//!HOOK LUMA
//!DESC ARNet b24 Layer0 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND LUMA
//!SAVE FEAT_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF LUMA_texOff
#define TEX_BIND_L0_TEX LUMA_tex
#define TEX_BIND_L0_POS LUMA_pos
#define TEX_BIND_L0_SIZE LUMA_size
#define TEX_BIND_L0_PT LUMA_pt

const float kernels[36] = float[36](
  -0.5359856f, +0.0992247f, +0.2847501f, -0.2503599f, +0.3142547f, +0.3881651f, -0.3589239f, -0.0351814f,
  +0.5133514f, +0.1903275f, -0.0109388f, -0.0414851f, +0.4665762f, -0.1323611f, +0.4740404f, +0.5067783f,
  -0.4454461f, -0.0703018f, -0.5789772f, +0.3920993f, -0.5802289f, -0.7384812f, -0.1444016f, -0.5247894f,
  -0.0429032f, -0.4226770f, -0.0767308f, +0.0031674f, -0.3780921f, -0.2980719f, +0.4229330f, +0.4372289f,
  -0.0405568f, +0.1087721f, -0.3954858f, +0.1353728f
);

const float biases[4] = float[4](
  -0.0162971f, -0.0181586f, +0.1055948f, +0.0236509f
);

vec4 hook() {
    const vec4 r0 = vec4(
        TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)).x
    );
    const vec4 r4 = vec4(
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)).x
    );
    const float r8 = TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)).x;

    float sum[4] = biases;
    for(int n = 0; n < 4; n++) {
        const vec4 k0 = vec4(kernels[n * 9 + 0], kernels[n * 9 + 1], kernels[n * 9 + 2], kernels[n * 9 + 3]);
        const vec4 k4 = vec4(kernels[n * 9 + 4], kernels[n * 9 + 5], kernels[n * 9 + 6], kernels[n * 9 + 7]);
        const float k8 = kernels[n * 9 + 8];
        sum[n] += (dot(r0, k0) + dot(r4, k4) + r8 * k8);
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer0 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND LUMA
//!SAVE FEAT_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF LUMA_texOff
#define TEX_BIND_L0_TEX LUMA_tex
#define TEX_BIND_L0_POS LUMA_pos
#define TEX_BIND_L0_SIZE LUMA_size
#define TEX_BIND_L0_PT LUMA_pt

const float kernels[36] = float[36](
  +0.3409122f, -0.9394667f, +0.5039950f, +0.3905887f, -0.2389737f, -0.3848276f, -0.3206661f, +0.5571620f,
  +0.1570957f, +0.0993217f, +0.7164524f, -0.3058394f, +0.2075445f, -0.4208949f, -0.5609635f, -0.5122629f,
  +0.1341986f, +0.5660003f, +0.2761970f, -0.4208585f, -0.2707386f, +0.5244272f, +0.1315016f, +0.9969198f,
  +0.4543652f, -1.1089586f, -0.1951730f, +0.1849497f, +0.1492892f, +0.6693390f, +0.1072932f, -0.4438224f,
  -0.1308163f, +0.5889822f, +0.4787060f, -0.3697473f
);

const float biases[4] = float[4](
  -0.0090951f, +0.0230232f, -0.0278087f, -0.0612901f
);

vec4 hook() {
    const vec4 r0 = vec4(
        TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)).x
    );
    const vec4 r4 = vec4(
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)).x
    );
    const float r8 = TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)).x;

    float sum[4] = biases;
    for(int n = 0; n < 4; n++) {
        const vec4 k0 = vec4(kernels[n * 9 + 0], kernels[n * 9 + 1], kernels[n * 9 + 2], kernels[n * 9 + 3]);
        const vec4 k4 = vec4(kernels[n * 9 + 4], kernels[n * 9 + 5], kernels[n * 9 + 6], kernels[n * 9 + 7]);
        const float k8 = kernels[n * 9 + 8];
        sum[n] += (dot(r0, k0) + dot(r4, k4) + r8 * k8);
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer1 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND FEAT_L0
//!BIND FEAT_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L0_TEX FEAT_L0_tex
#define TEX_BIND_L0_POS FEAT_L0_pos
#define TEX_BIND_L0_SIZE FEAT_L0_size
#define TEX_BIND_L0_PT FEAT_L0_pt

#define TEX_BIND_L1_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L1_TEX FEAT_L1_tex
#define TEX_BIND_L1_POS FEAT_L1_pos
#define TEX_BIND_L1_SIZE FEAT_L1_size
#define TEX_BIND_L1_PT FEAT_L1_pt

const float kernels[288] = float[288](
  +0.0530864f, +0.1485801f, +0.1005378f, -0.0931739f, -0.4494608f, +0.5591269f, +0.5295653f, -0.0927932f,
  -0.0716494f, -0.0301962f, +0.0831554f, -0.2751413f, -0.0749125f, +0.0810146f, +0.1356070f, -0.2076893f,
  +0.2913413f, -0.0339577f, +0.0284059f, -0.3517503f, -0.2439106f, +0.2983095f, +0.1533895f, -0.1489192f,
  -0.1600865f, +0.0627223f, -0.0147437f, -0.3754422f, +0.5685235f, -0.2946072f, +0.0544880f, -0.0804544f,
  +0.3366028f, -0.0813432f, +0.3055225f, -0.3977591f, -0.3766766f, -0.3582060f, +0.0255602f, -0.1833958f,
  -0.2046392f, +0.0716282f, -0.1298614f, +0.0332404f, +0.0710758f, -0.0827875f, -0.2083412f, -0.1115506f,
  +0.1751034f, +0.0922435f, -0.1245565f, +0.0243105f, +0.4798143f, -0.5519975f, +0.0349010f, -0.2087977f,
  +0.1619369f, -0.1995728f, +0.2882951f, +0.3160233f, +0.3682229f, -0.3187153f, -0.0498208f, -0.1747721f,
  -0.0163980f, +0.2955630f, +0.0188046f, +0.3680206f, +0.1268952f, -0.1388916f, -0.1027236f, -0.0188050f,
  -0.0854529f, +0.1736614f, +0.0757408f, +0.3878866f, -0.1698462f, +0.0406180f, -0.1246968f, -0.1852309f,
  +0.1566575f, +0.0780895f, -0.0418947f, +0.1117625f, -0.2259966f, +0.1183360f, -0.1779009f, -0.1669872f,
  -0.3050165f, +0.2505327f, -0.0072972f, +0.0905036f, -0.2769583f, -0.0608612f, -0.1394821f, +0.3300959f,
  -0.3019305f, +0.1209204f, +0.0080483f, +0.0055455f, -0.1471866f, +0.1122327f, -0.1078406f, +0.0723254f,
  -0.0744872f, -0.1548979f, -0.0390974f, +0.1414619f, -0.0239020f, +0.0426350f, +0.0108528f, +0.0905982f,
  -0.1865849f, +0.0931572f, -0.3231470f, -0.2071113f, -0.5349630f, +0.0887955f, +0.1517613f, +0.0088640f,
  -0.2394681f, -0.0601847f, +0.1478325f, +0.2433370f, +0.2435501f, +0.0657859f, -0.0395467f, +0.0547789f,
  +0.2349038f, -0.1336261f, -0.1949726f, -0.3029993f, -0.3270803f, +0.1699405f, -0.0159236f, +0.0509894f,
  -0.2223765f, -0.0746418f, -0.2148847f, +0.1214833f, +0.2039631f, +0.0030983f, +0.1082622f, -0.2455583f,
  -0.0157504f, +0.1224124f, +0.0203454f, -0.0761180f, -0.2466874f, +0.1019000f, +0.1973340f, +0.0747032f,
  +0.0921988f, +0.2435635f, +0.0783291f, -0.0804198f, -0.0014504f, -0.2644234f, +0.0908277f, +0.2407313f,
  -0.0571955f, -0.0201926f, -0.0333300f, +0.2703488f, -0.0937097f, -0.0609744f, +0.0991794f, +0.1778031f,
  +0.0096820f, -0.2420676f, -0.0488756f, +0.3421195f, -0.1021102f, -0.6031134f, +0.0718763f, -0.1909625f,
  -0.0041183f, +0.4902685f, -0.2016767f, +0.6137904f, +0.0400397f, -0.2625316f, +0.1305519f, -0.0854880f,
  -0.1069165f, +0.1781874f, +0.0735356f, +0.4448073f, +0.2139990f, -0.0445733f, +0.3464128f, +0.0498800f,
  +0.4217466f, +0.1233409f, -0.1497622f, -0.3177249f, -0.5121634f, -0.1980551f, -0.1245807f, -0.1317326f,
  +0.0571873f, +0.2147250f, -0.0643633f, -0.0600273f, -0.0748831f, +0.3308639f, -0.0134971f, +0.0934412f,
  +0.0958101f, -0.2201730f, +0.0397086f, +0.4441703f, +0.2054522f, -0.2953568f, +0.1423667f, -0.1149763f,
  +0.2176341f, -0.0537952f, -0.1874996f, +0.1290160f, -0.0046492f, +0.0692934f, -0.0049263f, -0.1726464f,
  -0.1821790f, +0.0603144f, -0.3009206f, -0.3075409f, -0.0085815f, -0.4094191f, -0.5336927f, +0.2903350f,
  +0.0167997f, +0.2515316f, +0.1678810f, +0.0610863f, +0.0873614f, -0.4771834f, +0.3085649f, -0.1354954f,
  +0.0135838f, +0.2244625f, -0.0322434f, +0.1950207f, +0.1168241f, -0.1096478f, -0.1104706f, -0.2249260f,
  -0.2713493f, -0.0527374f, +0.2675536f, +0.9316382f, -0.3484864f, +0.1229204f, -0.2684277f, -0.1779858f,
  -0.7023174f, +0.1982745f, +0.0903638f, +0.3083650f, +0.6255644f, +0.6064939f, +0.2972297f, +0.0038122f,
  -0.2151861f, -0.2014322f, -0.0690714f, +0.2665976f, -0.1934115f, +0.1464026f, -0.1762137f, +0.1300674f,
  -0.2772434f, -0.1672938f, -0.1401270f, -0.1567151f, -0.8691899f, +0.7386523f, +0.0049773f, +0.0252525f,
  -0.1951307f, +0.2260396f, -0.0278648f, +0.5932357f, +1.2814440f, -0.2664391f, +0.4679176f, -0.0223027f
);

const float biases[4] = float[4](
  -0.0532737f, +0.0081576f, +0.0601550f, -0.0042153f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer1 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND FEAT_L0
//!BIND FEAT_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L0_TEX FEAT_L0_tex
#define TEX_BIND_L0_POS FEAT_L0_pos
#define TEX_BIND_L0_SIZE FEAT_L0_size
#define TEX_BIND_L0_PT FEAT_L0_pt

#define TEX_BIND_L1_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L1_TEX FEAT_L1_tex
#define TEX_BIND_L1_POS FEAT_L1_pos
#define TEX_BIND_L1_SIZE FEAT_L1_size
#define TEX_BIND_L1_PT FEAT_L1_pt

const float kernels[288] = float[288](
  +0.1456216f, -0.1240881f, -0.2127574f, -0.2721515f, -0.2617371f, +0.0858425f, +0.2411058f, +0.0699220f,
  +0.0141748f, +0.1150485f, -0.1127973f, +0.3163732f, -0.7741613f, -0.6469886f, +0.5956721f, -0.2454503f,
  +0.0032268f, +0.1087455f, +0.0954908f, -0.2703974f, +0.2661564f, +0.4957209f, +0.0030481f, +0.1370279f,
  -0.0855748f, -0.3017941f, +0.0526334f, -0.1374252f, +0.4215907f, -0.0604775f, -0.1809838f, +0.2548070f,
  -0.1936342f, +0.1317469f, -0.1066403f, -1.0773102f, -0.7795745f, +0.7412278f, -0.3210947f, -0.0661482f,
  +0.0340105f, +0.0232766f, -0.1699151f, -0.2087579f, +0.0811236f, +0.3495633f, -0.1886521f, +0.1978829f,
  -0.2432818f, +0.1007893f, +0.1958132f, +0.0976338f, +0.2549908f, -0.1015706f, -0.0472364f, -0.1336895f,
  -0.2254164f, -0.1737672f, +0.1009565f, -0.2160438f, +0.3502670f, -0.2603580f, +0.0922299f, +0.0604511f,
  -0.0988225f, -0.0737699f, +0.0908727f, -0.2793571f, +0.3664234f, +0.1091133f, +0.0042106f, -0.0310123f,
  -0.1322423f, +0.0193735f, -0.0646112f, -0.0371333f, +0.0203861f, +0.3137463f, +0.0318729f, -0.2467490f,
  -0.0207533f, +0.0880150f, +0.1031834f, +0.2206144f, -0.4398553f, -0.3366314f, +0.0310304f, +0.0424189f,
  -0.0220371f, +0.2932007f, +0.0276546f, -0.0131700f, +0.0923086f, +0.3833851f, -0.0074243f, +0.0250020f,
  -0.2137468f, -0.0716324f, +0.2394826f, +0.2447202f, -0.0087018f, +0.0317081f, -0.2152854f, -0.3418659f,
  +0.0639467f, +0.2039070f, -0.2190139f, -0.1325673f, +0.0182994f, +0.4135070f, -0.2231006f, +0.1600550f,
  +0.0582463f, -0.1454265f, +0.0205927f, -0.2809044f, +0.1466512f, -0.0827598f, +0.1964529f, -0.0508236f,
  -0.1382399f, -0.0193326f, +0.1945983f, +0.3903394f, +0.1739665f, +0.3258661f, +0.2183260f, +0.1735805f,
  -0.0825605f, +0.1587373f, -0.1510515f, -0.0712711f, +0.2658672f, -0.0809494f, +0.0879162f, -0.0603497f,
  -0.0971460f, +0.1657852f, +0.0684294f, -0.0890160f, +0.2795838f, -0.0054863f, -0.0421343f, -0.1667266f,
  -0.1498036f, -0.1037232f, +0.0196776f, -0.0786016f, +0.0124423f, -0.1264856f, -0.0601494f, -0.0670469f,
  -0.1205254f, +0.2480906f, -0.1090261f, +0.2874586f, +0.0902478f, +0.1627808f, -0.1451356f, -0.2159359f,
  -0.0101567f, -0.0791043f, -0.1318894f, +0.1611667f, -0.1137635f, +0.0052488f, -0.2961828f, +0.0101707f,
  -0.0052468f, +0.2591598f, +0.2265293f, +0.4465275f, -0.1047054f, -0.3534373f, -0.1748987f, -0.0593143f,
  -0.1610900f, +0.1479018f, -0.4028943f, -0.2105883f, +0.2736630f, +0.2479715f, -0.3002943f, +0.2346693f,
  +0.0225875f, -0.0962694f, +0.0022921f, -0.0237074f, +0.0852703f, -0.3230780f, +0.0300585f, +0.0123391f,
  -0.7941362f, -0.2761911f, -0.1608581f, -0.3134817f, -0.2829792f, +0.6036288f, -0.1381960f, -0.0027817f,
  +0.0507776f, +0.0470461f, +0.1098947f, +0.2999498f, -0.0882071f, -0.0285662f, -0.2422164f, -0.1078150f,
  +0.0238603f, -0.1657022f, -0.1046542f, -0.0672728f, -0.2461639f, +0.1084005f, +0.1133106f, -0.0860313f,
  -0.0024742f, +0.1399951f, +0.2546681f, +0.1100554f, -0.1423030f, +0.0131468f, +0.1511239f, +0.0354867f,
  +0.0031991f, -0.0937085f, +0.2480225f, +0.4926837f, -0.5153543f, -0.1961769f, +0.6289593f, -0.0116003f,
  +0.1684593f, -0.3996430f, +0.1988946f, -0.5002996f, +0.0770218f, -0.2634058f, +0.0056665f, +0.2557488f,
  +0.2732404f, +0.1193999f, -0.2408871f, -0.0872415f, +0.0949301f, -0.2372806f, +0.3878804f, +0.0723518f,
  -0.0538483f, -0.0746968f, +0.1946033f, +0.1214191f, +0.4108012f, -0.0447652f, -0.4978583f, -0.0329953f,
  +0.0323420f, -0.5163420f, +0.0901478f, -0.3716838f, -0.3444069f, -0.0093347f, -0.0528905f, -0.2410784f,
  +0.5154561f, +0.1909408f, -0.1010954f, -0.1748979f, -0.0451727f, -0.0319559f, -0.0931675f, +0.0124921f,
  -0.0600163f, +0.0241514f, -0.0088165f, +0.4572176f, -0.9778345f, +0.7912921f, +0.0987644f, +0.2404505f,
  +0.2418918f, -0.0776662f, +0.2031056f, +0.0972472f, -0.2327006f, -0.0365778f, +0.0786984f, +0.0146545f
);

const float biases[4] = float[4](
  +0.1361540f, +0.6934666f, +0.0034587f, -0.0605292f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer2 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND FEAT_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L2_TEX FEAT_L0_tex
#define TEX_BIND_L2_POS FEAT_L0_pos
#define TEX_BIND_L2_SIZE FEAT_L0_size
#define TEX_BIND_L2_PT FEAT_L0_pt

const float kernels[288] = float[288](
  +0.0330758f, -0.0127138f, +0.0288117f, +0.4978458f, -0.0473836f, -0.0761682f, -0.1397140f, -0.1225493f,
  +0.0583575f, -0.2747157f, +0.0804120f, +0.4431160f, +0.0985345f, -0.2200368f, -0.2661527f, +0.0981973f,
  -0.1941992f, +0.0217751f, -0.4615377f, +0.0656271f, +0.0693931f, -0.0265657f, +0.1734329f, -0.3988524f,
  -0.1321985f, +0.2383889f, +0.1022891f, -0.2201748f, +0.1698208f, +0.2138430f, +0.1824174f, +0.0643462f,
  +0.2184899f, -0.3284774f, -0.2616195f, -0.3917355f, +0.1819225f, -0.3499369f, +0.0078567f, +0.3073197f,
  +0.0523127f, -0.1856048f, -0.0280049f, +0.0433282f, +0.1465875f, +0.2932919f, -0.1583643f, -0.1561344f,
  -0.0898725f, +0.3248333f, +0.1415547f, -0.3261044f, +0.2089928f, +0.0942225f, -0.0998948f, +0.1731430f,
  +0.0578615f, -0.3893007f, +0.2694053f, -0.1337986f, -0.3755336f, +0.0301151f, -0.0492233f, +0.2977320f,
  +0.2228456f, -0.2522510f, -0.2407714f, +0.0646817f, +0.1211659f, +0.0160166f, +0.2362811f, -0.1368683f,
  +0.1137948f, +0.1251114f, -0.0541183f, -0.0019771f, -0.0620749f, -0.1162702f, +0.1472820f, -0.0918579f,
  +0.1464771f, -0.2101026f, -0.2670965f, -0.0210438f, +0.0216445f, -0.1177625f, -0.0260536f, -0.1178116f,
  +0.0658703f, -0.0681412f, -0.1737753f, +0.0474431f, -0.0108918f, -0.0761103f, -0.2527494f, -0.1466634f,
  +0.0318600f, -0.1253218f, +0.0682186f, -0.5103364f, -0.3916473f, +0.2476106f, -0.1181885f, +0.1116122f,
  +0.6383466f, +0.0127135f, -0.2390887f, +0.1442851f, -0.1341767f, -0.3439075f, +0.1190810f, +0.1184572f,
  -0.1552528f, +0.0054080f, -0.0845183f, -0.0881061f, +0.0513219f, +0.1204006f, +0.3400698f, +0.0336067f,
  +0.0945211f, -0.0902598f, -0.2666803f, +0.3283249f, +0.1122026f, -0.0257251f, +0.0668504f, -0.2104326f,
  +0.3452575f, -0.0513538f, -0.4396411f, +0.1923705f, -0.0563502f, +0.0258496f, +0.3102100f, +0.1034002f,
  +0.0995141f, -0.1658648f, +0.1003108f, +0.0717151f, +0.0304219f, -0.0273031f, -0.0154060f, -0.1511355f,
  -0.0298513f, +0.2837881f, +0.4269391f, -0.1446890f, -0.1323865f, -0.1347289f, +0.0741719f, -0.5077691f,
  +0.0989301f, +0.3219833f, +0.2184106f, -0.2170937f, +0.0074107f, -0.3270767f, -0.0727552f, -0.0224767f,
  +0.1958856f, +0.1744668f, +0.3903094f, -0.1095608f, +0.0106823f, -0.1675772f, +0.0588303f, +0.4830810f,
  -0.4105262f, +0.4600872f, +0.0789783f, -0.0410944f, +0.0200491f, -0.0449183f, +0.1435446f, +0.3167675f,
  -0.7347546f, +0.0477401f, +0.4564736f, -0.3107552f, +0.4165734f, -0.3597957f, +0.1550023f, -0.2398853f,
  -0.0374876f, +0.2951860f, +0.1511283f, -0.0670916f, +0.3608443f, -0.2149306f, -0.1127047f, +0.0656566f,
  -0.2654909f, +0.1885426f, +0.4014538f, -0.2953458f, +0.2116366f, +0.1939221f, +0.1676870f, -0.5948317f,
  -0.5493243f, +0.2655688f, +0.1646301f, +0.3116542f, -0.1812753f, +0.5046071f, -0.3382359f, -0.2241111f,
  +0.3258952f, -0.0243143f, +0.1908651f, +0.0602580f, +0.5913826f, -0.2034433f, +0.1558526f, -0.0078475f,
  -0.0122091f, +0.0617181f, +0.0827032f, +0.0299075f, +0.0256830f, -0.2249992f, -0.1181752f, +0.3206630f,
  +0.5583325f, -0.0868706f, -0.1440499f, -0.0067301f, -0.0949624f, -0.3805348f, -0.3144112f, -0.4036047f,
  +0.1190469f, +0.2916179f, -0.4236410f, +0.1227443f, +0.0574743f, +0.0384752f, -0.0370014f, -0.1128206f,
  -0.1644605f, +0.1718254f, +0.0084308f, +0.2185235f, -0.0318150f, +0.0807201f, +0.0850169f, +0.0844861f,
  +0.0950715f, -0.1088470f, -0.2806707f, -0.1016755f, +0.0842759f, -0.1338511f, +0.4502073f, -0.0270761f,
  +0.0344352f, +0.0105709f, -0.2154561f, +0.0366133f, +0.2604074f, +0.2907996f, +0.3093500f, -0.2483821f,
  -0.0284317f, -0.1578329f, -0.0435331f, -0.1632796f, -0.4768175f, +0.0310965f, -0.0528182f, -0.0606060f,
  -0.1814523f, +0.0986262f, +0.1225098f, -0.2896585f, -0.3338033f, +0.0036413f, +0.0681049f, -0.1944439f,
  +0.1877640f, +0.0479981f, +0.2974118f, +0.0502000f, +0.2273162f, +0.1579305f, -0.3184041f, +0.1161430f
);

const float biases[4] = float[4](
  +0.0669940f, +0.0084670f, +0.0641222f, +0.1354572f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer2 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND FEAT_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L2_TEX FEAT_L1_tex
#define TEX_BIND_L2_POS FEAT_L1_pos
#define TEX_BIND_L2_SIZE FEAT_L1_size
#define TEX_BIND_L2_PT FEAT_L1_pt

const float kernels[288] = float[288](
  +0.1411843f, -0.0680124f, -0.0071046f, +0.0963742f, +0.1980283f, -0.0998581f, -0.1034216f, +0.3544623f,
  +0.5095734f, +0.1600493f, -0.0552129f, +0.2531771f, -0.1059506f, +0.3044272f, -0.1053147f, -0.0579260f,
  +0.2452975f, -0.0016788f, -0.0178746f, -0.0140203f, -0.0675841f, +0.0617288f, +0.0843631f, -0.1213482f,
  +0.1151320f, -0.1234662f, -0.2130569f, -0.1705056f, -0.2769362f, -0.2633803f, +0.0162731f, +0.0830731f,
  -0.0747028f, +0.1121574f, -0.0308689f, +0.0141673f, -0.6840508f, +0.2369204f, +0.4501314f, -0.1171937f,
  +0.0748877f, +0.1029089f, +0.0140201f, -0.0082185f, -0.2168158f, -0.1672967f, -0.3665289f, +0.0345472f,
  -0.0329856f, +0.1596618f, +0.2286026f, -0.0736134f, +0.0055808f, +0.1482694f, -0.0318015f, -0.2837597f,
  -0.0408519f, +0.0393345f, +0.0954590f, -0.2048816f, -0.3530634f, +0.1541311f, -0.1868775f, -0.1205304f,
  +0.0758812f, +0.0579279f, -0.1383286f, -0.1204970f, -0.0605623f, -0.1263671f, -0.0864311f, +0.2015009f,
  +0.0876210f, -0.0616409f, -0.0446175f, -0.2032806f, -0.0070857f, -0.0313331f, +0.0609870f, +0.1629540f,
  -0.0963764f, +0.1423535f, -0.1200528f, -0.4306294f, -0.0053350f, +0.1185483f, +0.0849863f, -0.1032353f,
  -0.0806438f, -0.3553355f, +0.0578061f, -0.0574230f, -0.0488107f, -0.1784519f, +0.0139209f, +0.1086567f,
  -0.0872906f, +0.3064530f, +0.2292901f, -0.4900654f, +0.1158935f, -0.0870145f, -0.0040482f, +0.4370184f,
  -0.0815503f, -0.2309145f, +0.2753451f, -0.8821992f, +0.1594680f, +0.8091892f, +0.1290204f, -0.4510976f,
  +0.4966724f, +0.1991255f, +0.1218941f, -0.1120109f, -0.0302783f, +0.1030849f, -0.2089151f, +0.0899458f,
  +0.0548250f, +0.1911205f, +0.2753538f, -0.1270961f, +0.0665390f, -0.2548238f, -0.0700098f, -0.1763202f,
  -0.3137904f, -0.0814075f, +0.2281008f, -0.5619204f, +0.4110678f, -0.0645286f, -0.0265365f, -0.3287860f,
  +0.4098260f, -0.1120073f, -0.2031549f, -0.1336762f, +0.0794493f, -0.0731859f, -0.3542648f, +0.0958760f,
  +0.0191154f, -0.1132049f, +0.0046006f, +0.0902647f, +0.0458409f, -0.0099052f, -0.1258955f, +0.1037625f,
  +0.1882667f, +0.1627849f, -0.2840482f, +0.1976725f, +0.0254912f, +0.1514048f, -0.0087410f, +0.0825489f,
  +0.3676617f, +0.1158211f, +0.1009513f, +0.1556187f, +0.0199148f, -0.0996651f, +0.0754265f, +0.0843348f,
  -0.0471049f, -0.2608194f, -0.2673765f, +0.0299842f, +0.0679590f, -0.1930091f, -0.0074128f, +0.0218802f,
  +0.0606090f, +0.0957815f, -0.1998034f, +0.3209284f, +0.1703073f, +0.4474902f, +0.1702222f, -0.0749149f,
  +0.1860132f, -0.0387015f, -0.3384207f, -0.0035873f, +0.0640080f, -0.1036959f, +0.5710640f, +0.1728419f,
  -0.0418455f, +0.2697488f, +0.0101560f, -0.0837891f, +0.2757981f, -0.1888162f, -0.1563560f, -0.0053394f,
  -0.0081443f, -0.0826906f, -0.1054523f, +0.1863004f, +0.8436016f, +0.0271586f, +0.2564012f, +0.3873697f,
  +0.1269102f, -0.1435717f, +0.4115757f, +0.0414392f, -0.0838656f, -0.2397292f, -0.6150988f, -0.2906197f,
  +0.0805790f, -0.2444022f, -0.1245165f, +0.1654097f, +0.0178118f, +0.0402061f, -0.1052619f, +0.2198720f,
  +0.3109167f, -0.0831497f, -0.0417433f, +0.1695395f, +0.0046255f, +0.0753984f, -0.0797848f, +0.2568880f,
  +0.2148187f, -0.2089634f, -0.0970646f, +0.0221330f, +0.0568367f, +0.0429830f, +0.0310058f, -0.1916986f,
  -0.1038693f, -0.0212059f, +0.1334652f, -0.3521891f, +0.0077137f, -0.4135060f, -0.0462026f, +0.2461816f,
  -0.0824557f, -0.2481463f, +0.1892362f, +0.3354400f, -0.0842938f, +0.2478546f, -0.0766335f, -0.2727116f,
  -0.0687904f, -0.0135318f, +0.0771010f, +0.0929457f, -0.0246843f, -0.0353640f, -0.0073451f, -0.2221179f,
  -0.2278048f, +0.1452129f, -0.2836768f, -0.4347453f, -0.2687709f, +0.2558789f, +0.0043170f, +0.0873718f,
  +0.0336265f, -0.0289739f, -0.3716482f, +0.1555052f, +0.2977022f, +0.1283520f, -0.0205113f, -0.0822978f,
  +0.1251667f, -0.0440250f, -0.0318458f, +0.0970190f, +0.1927795f, +0.0443228f, +0.2145700f, +0.0000667f
);

const float biases[4] = float[4](
  +0.0596386f, -0.2331931f, +0.0911784f, -0.1597383f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer3 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.3722601f, -0.2801292f, +0.1433326f, +0.3629152f, +0.0966291f, -0.4547842f, -0.0010274f, -0.2349729f,
  -0.5064678f, -0.6659911f, +0.1553727f, -0.1630041f, -0.1023346f, +0.1999626f, -0.3897499f, -0.4120374f,
  -0.0090817f, +0.0740811f, +0.4372168f, +0.0330052f, +0.2352372f, +0.4515456f, -0.1470026f, +0.0662660f,
  -0.1062807f, -0.2650050f, +0.1597655f, -0.0287658f, +0.1713468f, +0.0763505f, -0.1424550f, -0.1479097f,
  -0.3844031f, -0.3760713f, +0.0443472f, +0.3562978f, +0.4247439f, -0.1891654f, -0.3081801f, -0.3090929f,
  -0.0908086f, +0.1361997f, +0.2403037f, -0.0496591f, +0.1945815f, +0.2356231f, -0.0635207f, +0.1598241f,
  +0.1639792f, -0.2209553f, -0.0845516f, -0.1580518f, -0.3766028f, +0.0348529f, -0.4248566f, -0.2515828f,
  -0.1716817f, -0.1390154f, -0.0444019f, -0.3498932f, -0.2886985f, +0.1431804f, -0.0686130f, -0.1674376f,
  -0.1425039f, -0.5631965f, +0.0020742f, -0.4090791f, +0.2791061f, +0.2004630f, +0.0400952f, +0.0518146f,
  +0.0876888f, +0.1279268f, +0.1083786f, -0.0134722f, +0.0587378f, +0.0280619f, -0.0537782f, +0.0879736f,
  +0.4673646f, +0.4748997f, -0.1665818f, +0.1491033f, -0.0000577f, +0.2950318f, +0.4506820f, -0.2915215f,
  -0.4139733f, -0.0372454f, -0.2992966f, -0.0645459f, +0.0457221f, +0.3166109f, -0.1613237f, +0.1510902f,
  +0.6507709f, -0.0297233f, -0.1682268f, +0.0600657f, -0.0616160f, +0.1928234f, +0.2703735f, +0.0369299f,
  +0.1516425f, +0.6362261f, -0.3225985f, +0.0924320f, +0.0054983f, -0.0086262f, +0.3493576f, +0.0274865f,
  -0.0876422f, +0.0479958f, +0.0269840f, +0.2666950f, +0.2976179f, +0.0684519f, -0.0622122f, +0.0978986f,
  +0.6572234f, +0.2438771f, +0.0799512f, +0.1665145f, +0.1695378f, -0.0079755f, +0.1462979f, -0.4538950f,
  -0.4617558f, +0.2959840f, +0.1740694f, +0.8408190f, -0.3586043f, +0.1864252f, +0.1046242f, -0.4900251f,
  -0.2954695f, +0.3836752f, +0.6397917f, +0.6527839f, +0.2539085f, +0.1195897f, -0.4020941f, -0.6116949f,
  -0.1181720f, +0.1299837f, -0.1687407f, -0.0144651f, -0.0769040f, +0.0699972f, +0.0251759f, +0.0670275f,
  +0.0837099f, +0.1900805f, -0.0143924f, +0.1690791f, -0.2674664f, +0.2780408f, -0.0886627f, +0.0240874f,
  +0.3679833f, +0.2509479f, -0.2274583f, +0.0131284f, -0.0855713f, +0.0002382f, -0.0765016f, -0.1653135f,
  -0.1591475f, +0.3930664f, -0.0346731f, -0.0780306f, -0.3075628f, -0.4507133f, +0.2203065f, -0.1106119f,
  +0.1950576f, +0.1734404f, -0.1386836f, -0.2256092f, -0.2745957f, -0.3151528f, -0.0917266f, -0.1065800f,
  -0.0997595f, +0.2272542f, +0.0244595f, +0.2881031f, +0.1104385f, -0.0319118f, -0.2284747f, -0.1688701f,
  +0.2527269f, +0.1532040f, -0.2209540f, -0.0674533f, +0.1578664f, -0.6213912f, -0.0634198f, -0.1214569f,
  +0.6623569f, -0.1609508f, -0.1228913f, -0.1808744f, -0.3932526f, -0.0205634f, -0.0553555f, +0.0334336f,
  +0.2382887f, +0.3733982f, +0.0195638f, -0.2298300f, +0.0620855f, -0.0805619f, -0.1013715f, +0.0823971f,
  -0.2457169f, -0.3573257f, -0.1922174f, +0.4807784f, +0.0010146f, +0.1213513f, -0.1146158f, -0.0796361f,
  -0.3452124f, -0.4088571f, -0.0526988f, +0.0369929f, +0.2578731f, -0.0749435f, +0.1869009f, +0.2999142f,
  +0.2484815f, +0.0858249f, +0.1042260f, -0.1712071f, -0.3277512f, -0.1683221f, -0.1749095f, -0.1890189f,
  +0.1177238f, -0.2380384f, +0.0454616f, +0.5103010f, -0.2035387f, -0.1976831f, +0.0886860f, +0.0310470f,
  -0.1847021f, -0.2905460f, +0.2880503f, -0.4294279f, +0.3600785f, +0.6908563f, -0.1861996f, +0.3872059f,
  +0.0701145f, -0.1188493f, -0.0312383f, +0.2540748f, +0.3205124f, -0.5596396f, +0.2603486f, -0.0561885f,
  -0.1890876f, -0.2073170f, -0.1694680f, +0.0042226f, +0.2304217f, +0.2665610f, -0.2137408f, +0.0564753f,
  -0.0213552f, +0.2692729f, +0.1443860f, -0.4456391f, -0.4436578f, +0.1673869f, +0.0438509f, +0.0149623f,
  +0.3701701f, +0.1426224f, +0.0382279f, -0.1671147f, -0.0083211f, +0.0903444f, -0.0996317f, +0.1021149f
);

const float biases[4] = float[4](
  -0.4393344f, -0.0186959f, +0.1178510f, -0.3670798f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer3 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1123243f, -0.2249814f, +0.0660481f, -0.1046359f, +0.0885366f, -0.2208050f, +0.0908497f, +0.1059434f,
  +0.0366339f, -0.0220259f, -0.0655131f, -0.0399425f, -0.1397690f, -0.0258767f, +0.1370634f, +0.0135883f,
  +0.2539092f, -0.0471987f, +0.2840343f, +0.0175610f, +0.2244466f, -0.0224643f, +0.2016187f, +0.1074209f,
  -0.0716369f, +0.0750232f, -0.3456142f, +0.1067166f, -0.1307033f, +0.0547788f, -0.3248018f, -0.1903987f,
  -0.3101046f, -0.1361559f, -0.1396142f, -0.3790607f, +0.2374958f, +0.1004767f, -0.4185566f, -0.0077342f,
  +0.3074653f, +0.4392322f, -0.1518768f, +0.1128129f, -0.4826749f, -0.3043681f, -0.1381326f, -0.2157367f,
  +0.0863475f, +0.1900289f, -0.0774023f, -0.2650008f, -0.0318445f, -0.0647658f, +0.0859835f, -0.2684732f,
  -0.0796595f, +0.3346693f, +0.1236091f, +0.3984055f, +0.6506101f, -0.0222625f, +0.0145490f, +0.0732727f,
  -0.0349408f, +1.0451148f, -0.0362857f, +0.2892578f, +0.5114319f, -0.1221244f, +0.1270622f, +0.0634929f,
  +0.2943234f, +0.0174976f, -0.1547062f, +0.0575370f, +0.0478304f, -0.0524202f, -0.0602476f, -0.1117752f,
  -0.2893219f, -0.0246674f, +0.0669239f, -0.1460462f, +0.1870770f, +0.2421894f, -0.0109635f, +0.0015814f,
  +0.1013103f, -0.2917959f, +0.0880307f, +0.0339447f, -0.0026543f, -0.0326290f, +0.0672267f, +0.0563462f,
  +0.1175795f, -0.2423330f, -0.1261376f, -0.1807078f, +0.0503718f, -0.1541723f, +0.2125539f, -0.1311973f,
  -0.1966426f, -0.0714315f, +0.1448331f, +0.7767836f, -0.1524379f, -0.4423275f, +0.2756680f, +0.0252084f,
  -0.1544891f, -0.1905756f, -0.0081184f, -0.4410214f, -0.0895325f, +0.2741785f, +0.0122161f, +0.0604057f,
  +0.1005340f, -0.1416878f, -0.4948877f, -0.1059078f, +0.0196835f, -0.2183903f, -0.0050865f, +0.2648647f,
  -0.1244651f, -0.2097058f, -0.1202235f, -0.7248600f, -0.5228432f, +0.3876854f, -0.0455147f, +0.2162872f,
  +0.1456594f, -0.3994754f, -0.1553950f, -0.0012351f, -0.0424728f, -0.2351343f, +0.0469739f, +0.0530002f,
  +0.6991712f, +0.1504236f, +0.0389088f, +0.4849540f, -0.0279994f, +0.8651726f, +0.2663576f, -0.1463298f,
  +0.1223404f, -0.5579525f, +0.4069380f, -0.2043333f, +0.6361509f, -0.1541763f, -0.5183757f, +0.0079072f,
  -0.0644967f, -0.3193704f, -0.1772726f, +0.0518067f, -0.1126247f, -0.0686844f, +0.2774953f, +0.1154225f,
  +0.6332433f, +0.2722423f, -0.2010583f, -0.2318226f, +0.0562293f, +0.8563468f, -0.5025520f, -0.1793110f,
  +0.5460221f, +0.6363729f, -0.0791820f, -0.3385318f, -0.3920868f, -0.0289214f, -0.1909045f, -0.0323837f,
  -0.1896129f, +0.0188052f, +0.0107132f, +0.3660990f, -0.1733803f, +0.0137738f, +0.0366195f, -0.0277116f,
  -0.5203276f, -0.0695395f, -0.0055382f, +0.2599446f, +0.5021286f, +0.1053552f, +0.1041562f, -0.0403648f,
  -0.2235837f, -0.0964949f, +0.2396485f, -0.1883580f, -0.8128688f, +0.3518004f, -0.2572452f, +0.0405810f,
  +0.1521302f, -0.1166834f, -0.1380589f, +0.0324722f, +0.0833893f, -0.1950026f, +0.0365801f, +0.0267475f,
  -0.0016736f, +0.0108014f, -0.0093944f, -0.0254798f, +0.0010565f, -0.0285820f, +0.1580552f, +0.0394643f,
  +0.1920181f, +0.1102703f, -0.0302276f, -0.2569389f, -0.4818953f, +0.1567272f, -0.2564352f, -0.1002952f,
  -0.1561622f, +0.2458867f, +0.1199284f, -0.0245336f, +0.1010002f, -0.1666738f, -0.0881103f, -0.2301241f,
  +0.0402739f, -0.1413430f, +0.0043726f, +0.3171336f, -0.4429772f, -0.1357893f, +0.0643187f, +0.0098271f,
  -0.1535914f, +0.3873253f, +0.0076254f, -0.0507165f, +0.5327107f, +0.1008080f, -0.4437655f, +0.2193099f,
  -0.0394986f, +0.2142279f, -0.0701206f, +0.1835409f, +0.0433883f, -0.0224018f, -0.0100201f, +0.1735258f,
  +0.0413571f, -0.1597364f, +0.0214014f, -0.0995063f, -0.3867351f, +0.0403741f, +0.2131042f, +0.2728571f,
  +0.1091238f, +0.0956972f, -0.2533464f, -0.1349636f, +0.2142669f, -0.0247404f, -0.0912992f, +0.1491510f,
  -0.0914918f, -0.2993021f, -0.0410548f, -0.1487909f, -0.0771222f, +0.0245337f, +0.2123296f, -0.0141989f
);

const float biases[4] = float[4](
  +0.1745007f, -0.0970679f, +0.0441996f, +0.0231612f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer4 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1292962f, +0.0427736f, -0.0213653f, -0.2797548f, +0.0142431f, +0.3286779f, -0.0772096f, -0.0439750f,
  -0.2133474f, +0.4729981f, +0.0424686f, -0.2013448f, +0.2266935f, -0.0722438f, +0.1317811f, +0.2134968f,
  +0.1835512f, -0.1167405f, -0.0130310f, +0.2419056f, +0.1167284f, -0.2815558f, +0.3472942f, -0.1656007f,
  -0.0630940f, +0.0097975f, -0.1542765f, +0.2671485f, -0.1660637f, +0.2187127f, +0.1328286f, +0.1432971f,
  -0.1257859f, +0.1132695f, +0.1590064f, -0.3657110f, +0.4101207f, +0.0709463f, +0.5769074f, -0.2144177f,
  +0.3717668f, -0.5067318f, -0.2418720f, +0.2406156f, +0.4372270f, -0.0210539f, +0.7261530f, +0.2170242f,
  -0.2588594f, +0.0625056f, -0.1935720f, +0.0032336f, +0.0757436f, -0.1031521f, +0.0215600f, +0.1662077f,
  +0.2900017f, -0.3021189f, -0.1484228f, +0.0921237f, +0.0531683f, +0.1313593f, -0.0190773f, +0.1323780f,
  +0.6219674f, -0.1642541f, -0.2641420f, +0.2482718f, +0.2794455f, -0.5586153f, -0.0057912f, -0.1877000f,
  -0.0191494f, -0.4855970f, -0.4301389f, +0.1478205f, -0.0323087f, +0.0388586f, -0.0471416f, +0.1547038f,
  -0.0625220f, +0.3538568f, +0.0094407f, -0.3202223f, -0.1669391f, -0.0060084f, +0.0951706f, +0.0165890f,
  -0.0219071f, +0.5612560f, +0.1227613f, -0.0147600f, -0.1750947f, +0.0408990f, +0.1024494f, +0.0901531f,
  -0.0272265f, -0.0819734f, -0.5623164f, +0.4255425f, -0.2325548f, +0.3125236f, -0.0239066f, -0.2021320f,
  +0.1709472f, +0.1244617f, -0.0309281f, -0.0119998f, -0.2243344f, +0.0058306f, +0.9799374f, +0.0048887f,
  +0.0351784f, -0.2044586f, -0.0209856f, +0.3519867f, -0.0558748f, -0.0834008f, -0.0552080f, +0.0618129f,
  +0.1566842f, +0.5341502f, -0.1756909f, +0.2063581f, -0.0751489f, +0.2988063f, -0.0040053f, -0.0127387f,
  +0.0191357f, -0.0326869f, +0.1431271f, -0.0474656f, -0.1721037f, +0.1214799f, +0.3344803f, +0.1637864f,
  +0.1036962f, +0.0062109f, +0.0357997f, +0.2733798f, +0.0085373f, +0.0867925f, +0.1520640f, +0.1839258f,
  -0.0891776f, -0.3177448f, -0.0221670f, +0.0628696f, -0.0865916f, +0.0864256f, +0.0764755f, -0.0747228f,
  -0.0721551f, +0.1157981f, -0.1504502f, -0.0674048f, -0.2345577f, -0.0516752f, -0.1662285f, -0.2214374f,
  -0.6834277f, -0.3121392f, +0.2802666f, -0.1618337f, -0.1441066f, +0.1557563f, -0.0381518f, -0.0290655f,
  +0.0706271f, -0.2318093f, +0.1742468f, +0.0815333f, -0.1591431f, -0.0921271f, +0.2318836f, +0.2334228f,
  -0.3760330f, +0.0878344f, -0.0229496f, +0.1396249f, +0.1364521f, -0.2400669f, -0.3281867f, +0.1858383f,
  -0.7153047f, -0.1561472f, +0.3040858f, -0.2418709f, -0.0604651f, +0.0752083f, -0.2502793f, +0.2714357f,
  -0.3725448f, +0.0171586f, -0.0407862f, +0.2120146f, -0.0922946f, -0.0097114f, +0.0035953f, -0.0046823f,
  +0.1369565f, +0.1457896f, +0.2974724f, +0.3373949f, -0.0899284f, +0.1243042f, +0.2264055f, +0.1990633f,
  -0.1668973f, -0.2938935f, +0.2531138f, -0.0731053f, -0.2186016f, +0.3695100f, -0.0737616f, +0.2298042f,
  +0.2822257f, -0.0557275f, -0.0796069f, +0.0346923f, -0.0210575f, +0.0613995f, +0.0491353f, +0.1002000f,
  +0.2980941f, -0.3654068f, -0.0873979f, -0.3475346f, +0.3506851f, +0.4368646f, +0.1410214f, -0.0840836f,
  +0.0693318f, -0.0705814f, +0.1247338f, +0.3604825f, +0.0469275f, +0.2891508f, +0.3199979f, -0.0062125f,
  -0.1927845f, -0.0202056f, -0.0423145f, +0.6904123f, +0.2273059f, -0.2121342f, -0.2358425f, -0.0366049f,
  +0.0410020f, +0.3637327f, -0.5417620f, +0.2388010f, +0.6121385f, -0.6067733f, -0.2754152f, +0.3909298f,
  +0.1471517f, -0.1556883f, -0.0365115f, +0.3250712f, +0.1715978f, -0.1624034f, +0.3390003f, -0.2646752f,
  +0.1499852f, +0.1652967f, -0.0454253f, -0.0760276f, +0.0028468f, -0.0043569f, -0.1638942f, +0.0584516f,
  -0.0875584f, -0.1744496f, -0.0125290f, -0.0271114f, +0.2576424f, +0.2757176f, +0.0911157f, +0.2175374f,
  -0.1287425f, +0.0260115f, -0.0019265f, +0.1396106f, +0.0488923f, +0.2382719f, -0.0026334f, +0.1379835f
);

const float biases[4] = float[4](
  -0.0348653f, +0.0744857f, +0.0706648f, +0.0040893f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer4 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1710178f, -0.5734389f, -0.0264433f, -0.1687841f, +0.2281343f, +0.1749957f, +0.0270007f, -0.0271823f,
  -0.4317494f, -0.8123550f, -0.0447779f, +0.3736003f, +0.2911770f, -0.1084786f, +0.0925432f, -0.1025938f,
  +0.0228807f, -0.5102081f, +0.0120063f, +0.1530154f, +0.1664252f, +0.2580502f, +0.1676827f, -0.1147144f,
  +0.1860263f, +0.0664279f, -0.2371038f, +0.1004202f, -0.2069264f, +0.0083203f, +0.0393334f, -0.2504930f,
  -0.0670887f, +0.3382450f, +0.1363089f, -0.1605248f, -0.1986099f, -0.1950173f, +0.5011041f, +0.0688871f,
  -0.0861676f, +0.7550668f, +0.0643198f, -0.1404939f, +0.0276589f, -0.4070829f, +0.0286361f, +0.0222947f,
  +0.1655882f, -0.0938267f, +0.1740903f, +0.3545213f, -0.1332767f, +0.1002101f, +0.2404021f, +0.1690361f,
  +0.1471475f, -0.0111406f, +0.0963586f, -0.0715462f, +0.0327454f, -0.0579026f, -0.1250763f, +0.0549687f,
  +0.2513206f, +0.1625100f, +0.2233395f, -0.0060080f, +0.0206471f, +0.2113815f, -0.2589484f, -0.0450736f,
  +0.2852764f, -0.2176170f, -0.0349288f, -0.0676416f, -0.0313912f, -0.2452668f, -0.0677061f, -0.0062977f,
  -0.0488628f, +0.0291233f, -0.0647232f, -0.1701021f, -0.1842315f, +0.0449867f, -0.2398535f, +0.0019339f,
  -0.4077210f, +0.0172957f, -0.2497891f, -0.1046729f, +0.2852124f, -0.0835830f, -0.1330522f, +0.3753878f,
  +0.1576146f, -0.1490082f, -0.0551774f, -0.2329883f, +0.2692908f, +0.1501737f, +0.0524801f, +0.2105317f,
  -0.0567602f, +0.2241817f, -0.2322469f, -0.0396861f, -0.1119488f, -0.4063406f, +0.3325902f, -0.1854367f,
  -0.3344290f, +0.5976793f, -0.1253072f, -0.5530356f, +0.0901198f, -0.1283197f, -0.3469072f, -0.2344785f,
  +0.1125831f, +0.0120573f, -0.0121714f, -0.0825581f, +0.0711918f, +0.3016208f, +0.2210642f, -0.0138503f,
  +0.1797700f, -0.2583149f, -0.0022699f, +0.0882807f, +0.3156496f, -0.0803990f, +0.1039820f, +0.0380569f,
  +0.1541384f, +0.0445975f, -0.0835245f, +0.0419236f, +0.2354765f, +0.0019122f, -0.1900551f, -0.1331801f,
  +0.1413258f, -0.0564208f, -0.0057835f, -0.1821373f, +0.1381801f, +0.2467673f, +0.0888442f, -0.1861051f,
  +0.1095236f, +0.0759095f, +0.3404418f, +0.5966320f, -0.0833400f, -0.0905035f, +0.1138446f, -0.3137583f,
  -0.2916473f, -0.1457263f, -0.0831826f, +0.2283112f, +0.2392579f, +0.1915210f, +0.0125025f, -0.0395892f,
  +0.2117636f, -0.3183347f, +0.0834960f, +0.1329163f, +0.0190818f, -0.2561058f, +0.2070745f, -0.1086737f,
  +0.2474653f, -0.3545497f, +0.1254364f, +0.2315201f, -0.6821598f, +0.3055647f, +0.3524951f, +0.1584850f,
  +0.0680895f, -0.6763337f, +0.0001994f, -0.1827526f, -0.3158605f, -0.3716099f, +0.0371546f, +0.2699275f,
  +0.2697055f, +0.1185333f, +0.1092588f, +0.2239866f, +0.1047317f, +0.3184561f, +0.1288160f, +0.1249165f,
  +0.0694520f, +0.2723494f, +0.0296860f, +0.3236735f, +0.2658174f, -0.2156642f, +0.2773843f, +0.1721941f,
  -0.1808163f, -0.2010754f, -0.0903494f, +0.0092608f, +0.0942148f, -0.2332458f, +0.1158454f, +0.1780789f,
  +0.0932379f, +0.1178255f, -0.1853513f, -0.1207623f, -0.1230351f, +0.0929980f, -0.0011395f, -0.1465636f,
  +0.0609724f, +0.2829000f, -0.0171051f, +0.1071968f, -0.0169165f, -0.0234617f, -0.1360663f, -0.1739968f,
  +0.3329703f, -0.1875816f, -0.2035912f, +0.0286754f, +0.1030103f, -0.3516645f, -0.1090266f, -0.1409086f,
  +0.2434523f, +0.3476645f, +0.2155558f, +0.1632776f, +0.1894226f, -0.0455553f, -0.0337501f, -0.1256888f,
  +0.0902340f, -0.1852484f, +0.0147705f, +0.2394628f, +0.1427061f, +0.1374401f, +0.0451592f, -0.2134114f,
  +0.2644990f, -0.0015425f, +0.1271702f, -0.0729595f, +0.1708837f, +0.0989645f, -0.1011151f, -0.0121114f,
  +0.1988298f, +0.0385227f, -0.0006755f, -0.0120007f, +0.0051605f, -0.1921195f, -0.0685768f, -0.0211928f,
  +0.2103232f, -0.2799858f, +0.1404950f, +0.1869962f, -0.1051488f, +0.0603379f, -0.1281305f, -0.1476292f,
  -0.2213908f, +0.1902176f, +0.1455713f, -0.1136351f, +0.0402000f, +0.0485507f, +0.0496029f, -0.0918505f
);

const float biases[4] = float[4](
  +0.0723970f, -0.1620975f, -0.0542346f, -0.1553176f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer5 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1526309f, -0.1751664f, +0.0669538f, +0.0825272f, +0.0873933f, -0.0998969f, +0.1794454f, -0.0035319f,
  +0.2847151f, -0.6554828f, +0.1399950f, +0.3918758f, -0.1829764f, -0.0226990f, +0.2252109f, -0.0264258f,
  -0.0416586f, -0.0148597f, +0.2494194f, +0.1468046f, +0.0183397f, +0.0175820f, -0.1425583f, +0.0911448f,
  +0.5328699f, +0.5994410f, -0.0344752f, +0.0182205f, -0.1034554f, -0.0212388f, +0.6855045f, +0.1327049f,
  +0.0504412f, +0.0257994f, -0.0492068f, +0.2505862f, -0.4338221f, -0.0361799f, -0.1089925f, +0.1909752f,
  +0.0873653f, +0.3078206f, +0.1050585f, +0.2203451f, -0.2086424f, +0.2143209f, -0.1954540f, -0.0987511f,
  +0.2343292f, -0.0716016f, -0.3554421f, -0.2397789f, +0.3897344f, -0.5328472f, +0.1810616f, -0.1893518f,
  -0.3123181f, -0.1292821f, -0.1404744f, +0.0930516f, -0.2533166f, +0.4525853f, -0.1038354f, -0.0140824f,
  -0.0931081f, +0.2387920f, -0.0003381f, +0.0760667f, +0.0550298f, +0.1754238f, +0.0622617f, +0.1896723f,
  +0.2394369f, -0.0045399f, +0.2529078f, +0.2831366f, +0.5343673f, -0.0651065f, -0.4164233f, +0.1930054f,
  -0.0136955f, -0.3616339f, +0.2217278f, +0.1263778f, +0.3636505f, -0.1435989f, +0.2290221f, -0.0419343f,
  -0.1782470f, -0.5944558f, -0.0442885f, +0.6226044f, -0.0578556f, -0.0164255f, -0.0507585f, +0.2715043f,
  -0.0080009f, +0.0918383f, +0.0221970f, +0.0017469f, +0.3346903f, +0.4148050f, +0.2740848f, -0.4356265f,
  +0.1164557f, -0.0072119f, +0.1044923f, +0.1588541f, -0.2495202f, +0.0550180f, -0.3612509f, +0.0732472f,
  -0.3384313f, -0.3899280f, +0.3615788f, -0.1446316f, -0.5885617f, +0.2150794f, -0.2989859f, +0.0070505f,
  +0.1652437f, +0.2560735f, +0.2508391f, +0.1734064f, -0.2470980f, -0.4253523f, -0.0018644f, -0.3163740f,
  -0.2318340f, -0.1145825f, +0.2675483f, +0.1298342f, -0.4595816f, +0.4791513f, -0.1526171f, -0.0243495f,
  -0.2756083f, +0.0606364f, -0.1052746f, +0.0963726f, -0.2428333f, -0.0233883f, +0.1248062f, -0.1358576f,
  +0.0309581f, +0.1191373f, +0.2147279f, -0.0302059f, -0.1823912f, -0.4170700f, +0.4014936f, +0.2813004f,
  -0.3031798f, +0.0482545f, -0.2097715f, -0.5625269f, +0.3014911f, -0.0626496f, -0.2058739f, -0.2680502f,
  +0.0758657f, +0.0627018f, +0.0767118f, -0.1750623f, -0.0675628f, -0.0093127f, +0.0282877f, -0.3162595f,
  +0.1525634f, -0.0643611f, -0.2666927f, -0.2487243f, +0.1311720f, -0.8198626f, +0.2321353f, -0.0893014f,
  -0.0317015f, -0.1307395f, -0.3037552f, -0.1419536f, +0.1193125f, -0.4488934f, +0.4022608f, -0.4053883f,
  -0.0279217f, -0.5170348f, -0.4015908f, -0.0192183f, -0.1657474f, +0.1451540f, -0.0573780f, +0.0518637f,
  +0.1984989f, +0.0074706f, +0.0275130f, +0.1018492f, +0.5606678f, -0.3272348f, +0.2836243f, -0.1463015f,
  -0.2004195f, -0.0406250f, -0.0184023f, -0.2108508f, -0.1774881f, +0.1538983f, -0.1484054f, -0.1386193f,
  -0.1813475f, -0.2414744f, +0.0430819f, -0.0614533f, +0.2022619f, -0.0377516f, +0.1095867f, +0.2347935f,
  +0.2717137f, +0.0266592f, +0.1569439f, +0.2477500f, +0.2099358f, +0.4218330f, +0.2668611f, +0.0657400f,
  -0.2854446f, -0.0860108f, +0.1135959f, -0.1092757f, +0.1029936f, +0.0519003f, +0.4061088f, -0.0288584f,
  +0.3348293f, -0.3017633f, -0.0650877f, -0.1839762f, +0.0857932f, +0.2338470f, -0.0587947f, +0.1254031f,
  +0.4460574f, +0.0831942f, -0.0806373f, +0.4190143f, -0.1138817f, -0.0326521f, +0.2271949f, -0.2855243f,
  -0.3639814f, +0.3320447f, +0.1598355f, +0.0547355f, -0.2590814f, +0.2934441f, +0.0144959f, +0.1894009f,
  -0.0555732f, -0.5553343f, -0.1272350f, +0.2042544f, -0.1555249f, -0.2294991f, +0.0260547f, +0.0042527f,
  +0.2295804f, -0.2138219f, -0.0292698f, -0.0224866f, +0.2074138f, +0.0545411f, +0.2400891f, -0.0797064f,
  -0.6053981f, +0.1925751f, +0.1493952f, -0.2572218f, -0.3664680f, +0.5513164f, -0.1841358f, +0.3266824f,
  -0.0351493f, -0.2986988f, -0.1407854f, +0.2456873f, +0.3609121f, -0.2245270f, +0.3451695f, -0.0278214f
);

const float biases[4] = float[4](
  +0.0609570f, -0.3267230f, -0.0421651f, -0.0078310f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer5 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1905184f, +0.1349372f, -0.2055006f, -0.2695384f, -0.1939011f, -0.2506222f, -0.0520691f, +0.3589381f,
  +0.1769864f, +0.3219980f, +0.0969480f, -0.0486951f, -0.0819498f, -0.0774042f, +0.2807411f, +0.2735094f,
  +0.0609934f, +0.3916036f, +0.0290876f, +0.0309754f, +0.0350741f, +0.0302935f, +0.1109387f, +0.1156550f,
  +0.0286972f, -0.1317944f, -0.0581487f, +0.5183868f, -0.0939693f, -0.1553021f, -0.1361646f, -0.3531668f,
  +0.3587635f, +0.0705355f, -0.1347267f, -0.0781215f, +0.4567903f, +0.4520358f, -0.1973775f, +0.0486563f,
  +0.0419801f, +0.1857078f, +0.1951811f, +0.2701108f, +0.6153986f, -0.0023050f, +0.2517617f, +0.1656940f,
  -0.0217466f, -0.3720134f, +0.0990098f, -0.0362964f, -0.5061064f, -0.1722937f, -0.0008321f, -0.0617851f,
  -0.1356773f, -0.6027749f, -0.2190107f, +0.2895847f, -0.3233138f, -0.3699605f, -0.0074415f, -0.1163530f,
  -0.1099468f, -0.2312575f, -0.0098524f, +0.3407076f, -0.4371538f, +0.0313630f, -0.0384681f, -0.0596997f,
  +0.0565835f, -0.2162910f, -0.1907868f, +0.3526565f, -0.0124811f, +0.3078481f, +0.0845707f, -0.3529998f,
  +0.2480594f, -0.1894511f, -0.1228398f, -0.2435376f, -0.0193059f, +0.1669825f, -0.0772675f, +0.1934787f,
  -0.1059693f, -0.3889045f, +0.1992323f, +0.1670223f, -0.1167446f, -0.2926163f, +0.1745970f, +0.0077109f,
  +0.1098671f, -0.2362595f, +0.0214793f, +0.3289781f, -0.6438355f, +0.5373758f, +0.2726761f, -0.2346862f,
  +0.1151913f, -0.3709376f, -0.2861114f, -0.0735066f, -0.1701640f, -0.2002342f, -0.1341404f, +0.1609085f,
  +0.2372336f, +0.3027475f, +0.0103361f, -0.1272677f, +0.0091245f, +0.1938480f, +0.0869591f, +0.1198071f,
  -0.2494033f, +0.0093689f, -0.0078078f, -0.1365906f, -0.3934199f, +0.3009297f, -0.1030768f, +0.0777511f,
  +0.1131712f, +0.0656898f, +0.3016327f, +0.0464837f, -0.0955511f, +0.4377806f, +0.1027904f, +0.3518446f,
  -0.2533212f, +0.3749249f, -0.1835399f, +0.0339236f, +0.3538520f, -0.0437084f, +0.0273588f, -0.0864456f,
  +0.1217537f, +0.0427949f, -0.1992217f, +0.2893336f, -0.2562569f, -0.0027659f, -0.0161860f, -0.1100408f,
  -0.2130090f, +0.0051505f, -0.1299073f, +0.0075295f, -0.1120900f, +0.0791685f, -0.0288369f, -0.0228532f,
  -0.3209320f, +0.5187964f, -0.0341923f, -0.1539099f, -0.1528700f, -0.0542144f, -0.0305327f, -0.1972553f,
  +0.1161215f, +0.0934069f, -0.1963836f, -0.0242498f, +0.0636744f, +0.1892260f, -0.1480384f, -0.0280889f,
  +0.3098974f, +0.1604268f, -0.5295717f, -0.1587221f, -0.0745142f, -0.2149227f, +0.5540066f, +0.0031080f,
  -0.2629658f, -0.0619719f, -0.0169547f, +0.2826899f, +0.3969874f, +0.0638046f, +0.2182736f, +0.2505496f,
  -0.0447102f, -0.1856262f, -0.1099817f, -0.0424143f, +0.0787778f, -0.0594556f, +0.0036253f, -0.0959803f,
  +0.0222046f, +0.1283616f, +0.1536276f, -0.0968467f, -0.0231804f, -0.1068423f, +0.0587420f, -0.1053241f,
  -0.2675636f, -0.1509041f, -0.1254561f, -0.0409471f, +0.1318918f, +0.0006341f, +0.2396693f, +0.0516963f,
  -0.2483351f, +0.2831941f, -0.1159845f, -0.1884911f, -0.3049646f, -0.4001979f, +0.0807849f, -0.2057754f,
  +0.2856317f, -0.1422734f, -0.2199818f, +0.0972963f, -0.3713933f, +0.3257433f, +0.2509768f, -0.0903948f,
  -0.0458000f, -0.3087310f, -0.0042355f, -0.0852416f, -0.0432113f, +0.0479745f, -0.2372063f, -0.2071047f,
  -0.2999622f, -0.1529894f, +0.1435281f, +0.4241577f, +0.3099024f, +0.2508230f, -0.0829540f, -0.3196654f,
  -0.1231685f, +0.0240301f, +0.3837703f, -0.0185057f, +0.5933197f, +0.0806865f, -0.3882610f, -0.1450807f,
  +0.1563971f, +0.8313342f, +0.0634850f, -0.1571558f, -0.1003440f, -0.0512524f, -0.4548019f, -0.1975881f,
  -0.0235890f, -0.3794668f, +0.1638184f, -0.0079747f, -0.1720490f, +0.2474533f, +0.0498686f, -0.0869325f,
  -0.2721766f, -0.4134172f, -0.0942479f, +0.3630607f, +0.5121613f, -0.2500406f, +0.2322073f, +0.0240518f,
  +0.1290223f, -0.0349374f, +0.2539947f, -0.0842422f, -0.0522477f, +0.1585085f, -0.1257979f, +0.0318868f
);

const float biases[4] = float[4](
  +0.0298714f, +0.1133002f, +0.0886571f, -0.1095465f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer6 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0488923f, -0.0108112f, +0.0018290f, -0.1335576f, -0.0160931f, -0.1117221f, +0.1946022f, -0.0084495f,
  +0.1978888f, +0.0163459f, -0.1007477f, +0.0862858f, +0.1594377f, +0.4519501f, -0.2721236f, -0.3239594f,
  -0.0120871f, +0.1048971f, +0.1535542f, -0.2266686f, -0.0924666f, +0.0030503f, +0.1368438f, -0.0479851f,
  -0.0721089f, +0.1960679f, +0.0766158f, -0.4485167f, -0.0436420f, -0.3195916f, +0.0168902f, +0.2544997f,
  +0.0281856f, -0.0501567f, -0.1827432f, -0.1753680f, -0.0226230f, +0.2009590f, +0.1682247f, -0.1291880f,
  -0.1080778f, +0.0722663f, -0.0714971f, -0.2359474f, +0.2237522f, -0.0429011f, -0.1591530f, +0.3560623f,
  +0.0759538f, -0.1800104f, -0.0407097f, +0.0720755f, +0.3742383f, +0.1080956f, +0.4868722f, -0.1377898f,
  -0.0138252f, +0.5721117f, +0.3143810f, +0.1484221f, -0.1188752f, +0.0002810f, -0.1021861f, -0.2545954f,
  -0.2216741f, +0.3075253f, +0.2779232f, -0.2457955f, +0.2383165f, -0.2725516f, +0.0496348f, +0.0566432f,
  -0.1408891f, -0.2151219f, +0.1169257f, -0.0046066f, -0.0818449f, +0.1148473f, +0.2435684f, -0.0892904f,
  +0.1379010f, +0.1504820f, +0.2587295f, +0.0581007f, +0.1579179f, +0.4100530f, -0.1875585f, -0.0044234f,
  -0.0195239f, +0.1872669f, +0.0386023f, +0.1359705f, -0.1398118f, -0.1082781f, -0.2538197f, -0.0048758f,
  -0.2748342f, +0.4204134f, +0.7504736f, -0.5035650f, +0.2160792f, +0.1641867f, -0.0232861f, +0.0710989f,
  -0.2573186f, -0.0864941f, -0.3210206f, +0.3587609f, +0.3355784f, +0.3519690f, +0.3178891f, -0.8359151f,
  +0.0924017f, -0.1974096f, -0.0864687f, +0.1693707f, -0.1025528f, -0.3017954f, -0.0968717f, -0.3276127f,
  -0.2741428f, -0.0025853f, +0.1275838f, -0.0466246f, +0.4130357f, -0.1062206f, -0.1304831f, -0.0183483f,
  -0.1736706f, -0.1903110f, -0.0826228f, +0.3336657f, +0.1147209f, -0.1281313f, -0.3171408f, -0.0026941f,
  -0.0540240f, +0.0334091f, +0.2396146f, +0.2207976f, +0.1599743f, -0.0275338f, +0.0392185f, +0.2204781f,
  +0.1626730f, -0.0859710f, +0.0311423f, +0.0680858f, -0.0593495f, +0.1195701f, +0.0845963f, +0.1715933f,
  -0.0807098f, -0.2454477f, +0.2242723f, -0.2172704f, +0.0514845f, +0.0436474f, +0.0755110f, +0.2148460f,
  -0.1152000f, -0.0295358f, -0.1302781f, +0.0046417f, +0.1865284f, +0.1623779f, -0.2868360f, -0.1332813f,
  +0.2484571f, -0.3930035f, -0.0450807f, -0.0180566f, +0.2121913f, +0.0881476f, +0.1072512f, -0.2435605f,
  -0.1136860f, -0.2710111f, -0.0478382f, +0.0052075f, +0.3463163f, +0.1341628f, +0.0301463f, +0.0991121f,
  -0.0832026f, -0.3524984f, +0.2727681f, +0.0438212f, -0.0818007f, +0.0604468f, +0.2582484f, -0.4122342f,
  -0.0771637f, -0.1607492f, -0.1720764f, -0.0426102f, +0.2260259f, -0.3012321f, +0.0122209f, -0.1117050f,
  -0.3883914f, -0.3107651f, +0.3842092f, +0.0909118f, +0.0775632f, +0.0097737f, -0.0303922f, +0.5230780f,
  +0.0869728f, +0.0590248f, -0.0043854f, +0.2001247f, -0.0294570f, +0.1535241f, -0.1193625f, -0.0685179f,
  +0.1783688f, -0.1945244f, +0.0806049f, +0.0874325f, -0.1218062f, +0.0905140f, -0.1426202f, -0.1627834f,
  +0.0244293f, -0.3639695f, +0.2265614f, -0.0518451f, -0.3643507f, -0.0339828f, -0.0229867f, -0.1223404f,
  +0.2869361f, -0.3775252f, +0.0231747f, -0.0426014f, +0.4027421f, +0.2026224f, -0.2026278f, +0.0727148f,
  -0.0784840f, +0.0721123f, +0.6237988f, -0.3219925f, -0.3047561f, +0.3493058f, -0.0722813f, +0.0981440f,
  -0.5315181f, -0.3661288f, -0.5396942f, +0.0055561f, -0.0575453f, -0.3857264f, -0.1829049f, -0.3600668f,
  +0.2033948f, -0.3716020f, +0.1031801f, -0.2560028f, -0.1995410f, +0.1746301f, -0.2823647f, -0.2697881f,
  -0.3129487f, -0.2723846f, -0.0247486f, -0.1049799f, -0.1294560f, -0.0698484f, +0.2265267f, -0.1045011f,
  -0.0758672f, -0.1298686f, +0.4071505f, -0.1491932f, -0.3328691f, +0.1906581f, +0.3499881f, +0.3006469f,
  +0.0139204f, -0.1972935f, +0.3127351f, -0.0555740f, +0.0959574f, +0.1664575f, -0.0736406f, +0.2371163f
);

const float biases[4] = float[4](
  -0.0234060f, -0.0840130f, +0.0553802f, +0.0026473f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer6 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0328446f, +0.1088881f, +0.0009886f, -0.0298823f, +0.0404934f, +0.2365991f, -0.1242591f, +0.1643470f,
  +0.1988339f, +0.0449948f, +0.1225731f, +0.1848157f, +0.1187843f, -0.2901713f, -0.1075094f, +0.2516867f,
  +0.0920010f, +0.1580228f, -0.1548312f, +0.2684441f, -0.1705718f, -0.2595565f, -0.0136285f, +0.1696209f,
  -0.3136984f, +0.2727159f, +0.1480513f, +0.1695636f, -0.1326943f, +0.0370311f, -0.1124627f, +0.1593111f,
  -0.1433386f, +0.2503214f, -0.2523071f, +0.0635058f, -0.0840962f, -0.0297174f, -0.2280776f, -0.1836617f,
  -0.3254676f, +0.5482106f, +0.0746443f, +0.0432818f, +0.0748190f, +0.1076085f, +0.1277197f, -0.0226634f,
  +0.3607249f, -0.0356887f, +0.0581091f, +0.1377949f, +0.3863535f, +0.1018549f, -0.2642344f, -0.1441811f,
  +0.2056213f, -0.0625229f, +0.1023021f, -0.0905851f, -0.0147822f, +0.3334612f, -0.1537744f, +0.0657543f,
  +0.0545103f, +0.5846009f, -0.0726177f, -0.1286309f, -0.1178907f, -0.0106262f, +0.0055608f, +0.1806785f,
  -0.0038254f, -0.1989786f, -0.0576854f, -0.0132066f, -0.1185182f, +0.1051812f, -0.0226155f, +0.1910997f,
  -0.3316746f, -0.1065768f, -0.0711592f, +0.0169643f, -0.3283175f, -0.1818775f, +0.0491485f, +0.1000487f,
  +0.0263926f, +0.2386980f, +0.1274207f, -0.0370896f, +0.0248617f, +0.2231336f, -0.0506751f, +0.2023785f,
  +0.1393603f, -0.2650670f, +0.0385163f, -0.2537377f, +0.0197452f, +0.1658582f, -0.0035512f, -0.0280669f,
  -0.0278777f, -0.2817912f, +0.1898942f, -0.0185557f, +0.1253881f, +0.0090767f, +0.2980718f, +0.0927981f,
  +0.0357103f, +0.3874790f, +0.5224653f, -0.1650402f, -0.0900999f, +0.3711392f, -0.0671200f, +0.3104683f,
  +0.1047008f, -0.4967059f, -0.1930922f, -0.1426744f, +0.3679080f, -0.0029509f, -0.1831979f, -0.2604351f,
  +0.2357222f, +0.1426223f, +0.0971716f, +0.1123175f, +0.1589444f, +0.2188612f, +0.0568869f, -0.0786282f,
  +0.1728562f, +0.2622831f, +0.1321149f, -0.1980781f, +0.0558899f, -0.0086902f, -0.1678826f, +0.3455863f,
  +0.0726890f, +0.0476974f, -0.0218420f, +0.2322610f, -0.0447549f, -0.0831741f, -0.1518082f, +0.0893447f,
  +0.0755447f, +0.0731313f, +0.0201147f, +0.1741669f, +0.1875892f, +0.1807961f, -0.1274458f, -0.0849933f,
  +0.0666998f, +0.1217032f, -0.0409685f, -0.1175657f, +0.0055748f, -0.0990203f, +0.1699639f, -0.1354654f,
  +0.0679276f, +0.5848882f, +0.0331339f, -0.0098938f, +0.0567983f, +0.0124918f, -0.2828983f, -0.1379903f,
  -0.3278684f, +0.0322417f, +0.5091241f, -0.2594968f, -0.0830361f, -0.1414961f, -0.4778355f, -0.0305772f,
  -0.4489034f, +0.0903703f, -0.0677003f, -0.1558397f, -0.1100987f, +0.1408532f, -0.2408421f, +0.1450196f,
  +0.1233732f, +0.0880985f, -0.0272191f, -0.0078300f, -0.0121997f, -0.0569230f, +0.0598130f, -0.0390060f,
  +0.3112848f, +0.0021628f, -0.1553172f, +0.2995607f, +0.4955917f, -0.3208025f, +0.1027322f, -0.1489066f,
  +0.2212246f, -0.0323508f, +0.0562247f, -0.1372203f, +0.1303431f, -0.0030426f, -0.1094013f, -0.0220768f,
  +0.1741388f, +0.0708175f, +0.0052067f, -0.1451878f, +0.1422477f, +0.0607077f, -0.3171532f, +0.1089107f,
  +0.1415967f, +0.2795907f, +0.0290433f, -0.1682381f, +0.3436229f, -0.0939014f, -0.2756557f, +0.2249844f,
  -0.2212210f, +0.1766153f, -0.0700081f, -0.1438583f, +0.0749521f, +0.1358253f, +0.1075069f, +0.2672401f,
  -0.0345254f, +0.1023290f, -0.0281539f, +0.2560219f, -0.2409148f, +0.0869303f, +0.2990642f, -0.0708538f,
  +0.2065319f, +0.0537588f, +0.1527027f, +0.2472643f, +0.1582132f, -0.1121241f, -0.0072329f, +0.0009823f,
  +0.1055377f, +0.1539145f, -0.0442080f, -0.0490215f, +0.1721339f, -0.0371204f, +0.2995440f, -0.0394069f,
  +0.1347844f, +0.2822798f, +0.0414709f, -0.2283534f, -0.2991213f, +0.0918074f, -0.0207473f, -0.1026955f,
  +0.0044219f, +0.1984221f, +0.2369026f, -0.3585060f, -0.2763914f, +0.0667328f, +0.0658517f, +0.3224784f,
  +0.0636484f, +0.4470173f, -0.0520138f, -0.1106080f, -0.3418579f, +0.0430899f, -0.0534814f, -0.2035674f
);

const float biases[4] = float[4](
  +0.0672255f, -0.0213708f, -0.0416836f, -0.1036546f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer7 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0654767f, -0.1955760f, +0.3464883f, +0.1583503f, +0.0243200f, -0.0643150f, +0.1876515f, +0.1116468f,
  -0.2900015f, +0.0132159f, -0.1000814f, -0.0445421f, +0.0337048f, -0.1231598f, +0.3249803f, +0.1672270f,
  +0.0065285f, -0.2121870f, -0.0800873f, +0.0775534f, +0.1178645f, +0.1690742f, -0.0604165f, +0.1314889f,
  +0.0969872f, +0.1778397f, +0.1067216f, -0.1957954f, -0.0217987f, +0.0411923f, -0.1758095f, +0.0033869f,
  +0.2862881f, +0.0692437f, -0.1245817f, -0.1278585f, +0.2581015f, -0.7637817f, -0.1856597f, -0.1086216f,
  +0.0911341f, +0.0765057f, +0.4016169f, -0.1966825f, -0.2995876f, -0.4191944f, +0.3059200f, +0.0374876f,
  +0.0265862f, -0.0081004f, -0.2150169f, +0.0583236f, +0.1892276f, -0.0882801f, +0.1183899f, -0.1586717f,
  -0.1046547f, -0.0399372f, -0.1846773f, -0.0402042f, -0.0545071f, +0.0405746f, +0.0021205f, -0.0114643f,
  +0.2384264f, +0.4205631f, -0.0805468f, +0.2979026f, +0.1268127f, +0.2162119f, +0.0295687f, +0.0088563f,
  +0.1496697f, -0.0171099f, -0.1182107f, +0.2492868f, -0.2607298f, -0.0227314f, +0.1018603f, -0.1041997f,
  +0.1323475f, -0.2099076f, -0.1908282f, -0.0836430f, +0.1735637f, +0.3058060f, -0.2959169f, +0.0031753f,
  -0.0639438f, +0.0941673f, +0.0085351f, -0.0626511f, -0.2362493f, -0.0173672f, +0.2922305f, +0.0020299f,
  -0.1884786f, -0.0757972f, -0.3482524f, -0.2293058f, -0.0539110f, +0.1048543f, +0.0301592f, -0.0355347f,
  -0.2722205f, -0.1064616f, -0.6880699f, -0.2117383f, -0.4389866f, -0.2010297f, +0.5868470f, -0.3495190f,
  +0.1121907f, -0.4225717f, -0.1743046f, +0.1160351f, -0.0327560f, +0.1481666f, +0.0519681f, +0.2531992f,
  -0.4138899f, -0.1593670f, +0.0383567f, -0.0229222f, -0.3483252f, +0.1829825f, -0.0501022f, -0.0888836f,
  -0.1115781f, -0.3131279f, -0.0129694f, +0.0065185f, +0.2870975f, +0.0229136f, +0.3992325f, -0.0941061f,
  -0.1866070f, -0.2225053f, +0.3917604f, -0.1104830f, -0.1229870f, +0.0328910f, -0.0206922f, -0.2695296f,
  +0.3047856f, +0.0851215f, -0.1225200f, +0.2515180f, -0.0010502f, +0.3730400f, +0.0964009f, +0.1186229f,
  -0.0366429f, +0.0720839f, -0.0187024f, -0.0906057f, +0.0008825f, +0.3408825f, -0.2101867f, -0.1687439f,
  -0.1568504f, +0.2921740f, -0.0214394f, +0.1650492f, +0.2015730f, -0.0341416f, -0.0551350f, +0.0327148f,
  -0.2894487f, -0.3767453f, -0.0641073f, -0.1124970f, -0.1544044f, -0.2533755f, -0.0618074f, -0.0462693f,
  -0.1557684f, -0.0006266f, +0.0295332f, -0.2895486f, -0.9973561f, -0.3837176f, +0.8092565f, -0.4905312f,
  -0.2421952f, -0.0100451f, -0.1344769f, +0.0087888f, -0.2510031f, +0.4252202f, -0.0517760f, -0.2427384f,
  +0.2243601f, -0.0269357f, +0.2573211f, +0.0136524f, -0.1340022f, +0.0857660f, -0.0738727f, -0.0041102f,
  +0.1242495f, -0.1654345f, +0.1097631f, +0.2744396f, -0.4470277f, +0.1238037f, +0.1608685f, +0.0216471f,
  +0.0804559f, -0.2740079f, -0.0254707f, -0.2612275f, -0.2037998f, -0.0023164f, +0.0069406f, -0.0889688f,
  -0.2165575f, -0.0059116f, +0.0094468f, -0.2277403f, +0.0031169f, -0.0999656f, -0.2200901f, -0.2196028f,
  +0.0411154f, +0.0494954f, +0.2091422f, +0.1805151f, -0.1763161f, -0.2776340f, -0.1588062f, -0.4166103f,
  -0.0153284f, -0.0117705f, -0.0754916f, -0.0470209f, +0.0425622f, -0.1770690f, -0.0835985f, +0.0767344f,
  -0.1107685f, +0.2111422f, -0.0021470f, -0.0683166f, -0.0066936f, -0.4348873f, -0.4364409f, +0.0768379f,
  -1.0148042f, +0.7088860f, +0.2528501f, -0.0608701f, -0.4180098f, -0.1751925f, +0.6498850f, -0.1429847f,
  +0.3072876f, -0.0343553f, +0.0463365f, -0.2234592f, +0.2070901f, +0.3941392f, -0.5460093f, -0.1732907f,
  -0.0132619f, -0.2222041f, -0.1851702f, +0.2108470f, +0.0594086f, -0.0545027f, -0.3401412f, +0.1685635f,
  -0.1483002f, +0.3007599f, +0.2074158f, +0.6588343f, -0.0036277f, +0.5057735f, -0.3589444f, -0.0235321f,
  +0.2066807f, -0.3362790f, -0.0369094f, -0.6813365f, +0.0253005f, +0.0114336f, -0.3024518f, -0.0167428f
);

const float biases[4] = float[4](
  +0.0941415f, -0.1072220f, -0.1064200f, -0.0796648f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer7 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0257518f, -0.0285326f, -0.2215725f, -0.0174506f, -0.2601934f, -0.0409602f, -0.0629530f, +0.1228727f,
  +0.3426555f, +0.0431379f, -0.0282358f, -0.0786593f, -0.1542233f, -0.0148298f, +0.1888352f, +0.1116282f,
  -0.0610014f, +0.1509316f, +0.1396541f, +0.1185830f, +0.0908049f, -0.2439739f, -0.1869198f, -0.1326762f,
  -0.2164270f, +0.1376673f, -0.1646980f, +0.1124555f, -0.2778393f, +0.1405252f, -0.2123472f, +0.0263329f,
  +0.1939648f, +0.2776791f, -0.1330735f, -0.0589299f, +0.0223044f, -0.4959404f, +0.4794030f, -0.3662910f,
  +0.1917852f, -0.0880097f, -0.1028448f, +0.0915781f, -0.3372903f, -0.0682342f, +0.0682087f, -0.0466037f,
  -0.0388519f, +0.0405541f, +0.1422961f, -0.0313900f, +0.0186092f, +0.1642755f, -0.0411136f, -0.1104517f,
  +0.0216680f, -0.2583777f, -0.0516725f, -0.0592427f, +0.0182386f, +0.1802873f, -0.0251753f, +0.0326059f,
  +0.0316716f, +0.4521686f, -0.0630709f, +0.0444503f, +0.1651157f, +0.0810832f, +0.0129480f, -0.0832768f,
  +0.0499648f, +0.0443752f, +0.1855897f, +0.1401730f, +0.0526520f, +0.0009067f, -0.0163465f, +0.0376032f,
  -0.3890904f, +0.0425997f, -0.4493838f, +0.0346811f, -0.1576598f, +0.0775286f, -0.2498155f, +0.2029175f,
  +0.3858747f, +0.0686647f, +0.1067364f, -0.1987175f, -0.0892025f, +0.0728034f, +0.2566380f, -0.1595008f,
  +0.1698775f, +0.2830237f, -0.3759241f, +0.0610420f, -0.0601192f, +0.2690863f, +0.1725845f, +0.0578292f,
  -0.1441687f, -0.0691123f, -0.2868817f, +0.3430281f, -0.2704452f, +0.3067008f, -0.2256265f, -0.2115670f,
  -0.2077001f, -0.0879141f, -0.4321462f, -0.0956684f, -0.0322907f, +0.3216164f, +0.4284045f, +0.0096433f,
  +0.0235239f, -0.0842760f, +0.1675498f, -0.0113789f, +0.3938091f, -0.4238658f, +0.1639088f, -0.2513125f,
  +0.0178845f, +0.1842635f, -0.0109141f, +0.2224993f, +0.2159424f, +0.3165241f, +0.1973651f, -0.0994600f,
  -0.8512120f, -0.8132336f, +0.6249406f, +0.3192001f, +0.1877359f, +0.4779908f, -0.0693997f, +0.2116623f,
  +0.0105343f, +0.0123149f, -0.0940911f, -0.0154301f, +0.1224330f, +0.2785435f, +0.0838394f, -0.2461892f,
  -0.0985665f, +0.1507818f, +0.0924882f, -0.3445046f, +0.1113089f, +0.0525757f, -0.2019234f, +0.0819512f,
  -0.0384438f, +0.2321769f, +0.1082952f, +0.1239435f, -0.1041232f, -0.1121162f, -0.0075160f, -0.2131582f,
  -0.6146864f, +0.2624867f, +0.2704630f, -0.2789887f, +0.2750633f, +0.1309991f, -0.2469274f, -0.1454140f,
  -0.3973393f, +0.2698522f, +0.0263662f, +0.1631496f, +0.1128873f, +0.4956508f, -0.0380524f, -0.1174086f,
  +0.4086030f, +0.4231716f, -0.0386374f, +0.3169684f, +0.2136127f, -0.0191197f, -0.2375855f, -0.1726164f,
  -0.0780563f, +0.0368168f, -0.0663606f, -0.0425895f, +0.1221158f, +0.1287903f, -0.0640633f, -0.2132754f,
  -0.4262913f, -0.0003306f, -0.0357019f, +0.0096877f, +0.3842704f, +0.1451666f, +0.0239282f, -0.1206065f,
  -0.0890579f, +0.1652443f, +0.1025865f, +0.1316789f, -0.2375229f, -0.2281371f, -0.3984223f, +0.0491560f,
  -0.0996294f, +0.0243620f, +0.0948860f, -0.3031029f, +0.1960643f, +0.2656329f, +0.2583116f, -0.2914382f,
  -0.1458056f, +0.2282541f, -0.0724563f, +0.1009386f, -0.2008641f, -0.1446135f, +0.0053432f, -0.2056035f,
  -0.1421571f, +0.2193809f, +0.1182853f, +0.0402569f, +0.4418651f, +0.0161167f, -0.1576529f, +0.2996147f,
  -0.0896330f, +0.2293288f, -0.1911124f, -0.0696768f, +0.2892122f, +0.0644319f, -0.3515777f, +0.0523175f,
  +0.0644437f, +0.8153197f, +0.1797967f, -0.0986845f, -0.7831624f, +0.5295112f, +0.2452310f, -0.1857932f,
  +0.0042519f, +0.0790292f, -0.0374262f, -0.0889978f, +0.5063971f, -0.2138587f, -0.1102046f, -0.1109471f,
  +0.1447826f, +0.0284444f, +0.0114393f, +0.1362209f, +0.1290059f, -0.2005648f, -0.0092784f, -0.1587551f,
  -0.0023265f, +0.0406635f, -0.0870678f, +0.0786125f, +0.0294243f, -0.2810907f, +0.1557292f, -0.3199462f,
  -0.2278051f, +0.2229714f, -0.1502419f, +0.0457457f, +0.1173563f, +0.1995179f, -0.1062983f, +0.2451613f
);

const float biases[4] = float[4](
  +0.1290780f, -0.0722526f, -0.0729281f, +0.1197140f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer8 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1425644f, -0.2406755f, -0.1130743f, +0.0764456f, +0.0893278f, +0.2489659f, +0.1541195f, +0.0014008f,
  -0.1037693f, +0.2602428f, -0.1476489f, +0.6756411f, -0.2109915f, -0.4154936f, -0.2060631f, +0.0034278f,
  +0.1647580f, +0.2541060f, +0.0460087f, +0.5470757f, -0.0600022f, -0.0450242f, -0.1707240f, -0.0993259f,
  -0.2208291f, -0.2377717f, +0.2204376f, -0.1087434f, -0.0198057f, -0.2263458f, +0.1081947f, +0.3275186f,
  +0.2210743f, +0.2191395f, -0.1665394f, +0.4024010f, -0.2771167f, +0.1017090f, +0.2008199f, +0.6999073f,
  +0.1141347f, +0.3674776f, -0.0176634f, +0.3873215f, -0.1790263f, -0.0883438f, +0.2662242f, +0.3666653f,
  -0.0949088f, +0.1044722f, +0.0443620f, +0.0231791f, +0.1610268f, +0.0271923f, +0.3135744f, -0.1160153f,
  +0.2873172f, -0.1448936f, +0.2263916f, -0.0345348f, -0.0703578f, +0.0455049f, +0.1179173f, +0.1400073f,
  +0.0446991f, +0.0263097f, -0.0486490f, +0.1411533f, -0.1152583f, +0.0413214f, +0.1024228f, +0.2254673f,
  +0.1672373f, +0.3315482f, +0.1286224f, -0.2080181f, +0.0013261f, +0.0721646f, +0.1207807f, +0.0249399f,
  +0.0322357f, +0.5150036f, +0.0474261f, -0.7133960f, -0.0684049f, -0.2360497f, +0.0424900f, -0.0516654f,
  -0.0929417f, +0.0038313f, -0.0319768f, -0.2559528f, +0.0442346f, -0.0220770f, -0.0520196f, -0.0152961f,
  -0.0533492f, +0.1072811f, -0.1890577f, -0.1060695f, +0.0813876f, +0.0151170f, +0.0526239f, +0.0758167f,
  -0.0185426f, +0.1973191f, -0.0205897f, -0.5506800f, +0.0727721f, -0.2060323f, -0.4066290f, -0.3149334f,
  -0.3241475f, +0.1430581f, -0.2606058f, -0.1844259f, +0.0350306f, +0.0634253f, -0.0062185f, +0.1224868f,
  +0.1630748f, -0.1102967f, -0.0462485f, -0.1756930f, -0.0174585f, +0.2247425f, -0.1324016f, -0.2458008f,
  +0.1205956f, +0.1398621f, -0.1311347f, -0.1945454f, -0.1241973f, +0.0266723f, -0.1715429f, -0.2471678f,
  +0.0314411f, -0.1278027f, -0.1007427f, -0.1575872f, +0.2951262f, +0.1889345f, +0.0294991f, -0.1897584f,
  +0.1107684f, -0.3066378f, -0.0211268f, -0.2876498f, +0.2146695f, -0.1694988f, -0.1964957f, -0.0064738f,
  -0.0669468f, +0.1834386f, -0.1989830f, -0.3518988f, +0.3513143f, -0.0372166f, +0.4155623f, +0.0881803f,
  -0.1301713f, -0.3383448f, -0.1242735f, -0.3327525f, +0.0307111f, +0.1282580f, +0.0649445f, +0.0953636f,
  -0.2647839f, -0.2311646f, -0.3189721f, -0.2345480f, +0.0180999f, +0.4703054f, +0.0510155f, -0.2287581f,
  -0.0528321f, +0.1476614f, -0.4276059f, -0.1307961f, +0.0523590f, -0.1243819f, +0.2861720f, -0.0622062f,
  +0.1646340f, +0.3337277f, -0.3916025f, -0.1189126f, +0.2509610f, +0.2731362f, +0.0705353f, +0.2273003f,
  -0.2117431f, -0.3481131f, +0.0403496f, -0.0506047f, -0.1275097f, +0.1313908f, -0.0636468f, -0.2798795f,
  -0.0979910f, -0.0155598f, +0.0124267f, +0.0715672f, -0.0606903f, +0.0641750f, +0.1308904f, -0.4224966f,
  +0.0170763f, -0.0746539f, -0.0082882f, -0.0721040f, +0.2483363f, +0.1762190f, -0.0497246f, -0.0681182f,
  +0.2642779f, -0.0550149f, +0.0295657f, +0.2259427f, +0.1212769f, -0.4461530f, +0.3911768f, +0.1055582f,
  -0.3349372f, +0.4847373f, +0.3689720f, -0.0853322f, -0.0487423f, -0.2325992f, -0.0585203f, -0.0266891f,
  +0.2914898f, -0.1515362f, +0.0211835f, -0.2190456f, +0.0703024f, +0.0789571f, +0.0727520f, +0.0263063f,
  +0.0838941f, +0.0924285f, +0.4848691f, -0.1213612f, -0.3402565f, +0.3342605f, +0.6515710f, -0.1466949f,
  +0.0856146f, +0.1798929f, +0.2031436f, +0.1881301f, -0.3682933f, -0.4312002f, +0.3932905f, -0.2944818f,
  +0.2600051f, +0.3549886f, +0.0302954f, +0.0686606f, -0.0762313f, -0.1072178f, +0.0642279f, +0.0708607f,
  +0.2196036f, +0.0252368f, +0.2244040f, -0.0755861f, -0.0750812f, +0.2289916f, +0.0588968f, -0.5404643f,
  +0.4339157f, +0.0839986f, +0.1360810f, -0.0500843f, +0.0740085f, -0.1188330f, +0.2537087f, -0.4750586f,
  -0.1221651f, +0.1264022f, +0.0106501f, -0.0518339f, +0.0848175f, +0.0630960f, +0.1798480f, -0.2051066f
);

const float biases[4] = float[4](
  -0.0572606f, -0.0841461f, +0.0523870f, +0.0623977f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer8 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2866749f, +0.5136414f, +0.0732104f, -0.0567559f, +0.2533891f, -0.2846288f, -0.2218226f, +0.1166630f,
  -0.0939335f, +0.2157347f, +0.7578414f, -0.4162996f, -0.1961218f, +0.6063256f, +0.1778754f, -0.1788505f,
  +0.0685502f, +0.2249740f, -0.0407540f, +0.0513649f, +0.0416215f, -0.1028729f, +0.5094067f, +0.0249940f,
  +0.0122387f, -0.0205981f, -0.3054430f, +0.0052881f, +0.0517154f, -0.2336057f, -0.1412740f, +0.1675093f,
  -0.0209686f, -0.0027825f, +0.3555082f, +0.0909494f, +0.2963032f, +0.3781681f, -0.2672202f, +0.1248833f,
  +0.1027275f, -0.2012769f, +0.0496820f, +0.1979418f, +0.2377882f, +0.1123316f, -0.2478711f, -0.0113251f,
  +0.0778086f, +0.0364326f, -0.0934566f, +0.0232907f, -0.1443669f, +0.1439668f, -0.2375899f, +0.0707386f,
  -0.0422835f, -0.0532628f, +0.0064728f, -0.0256103f, +0.2032835f, +0.0253984f, -0.2337273f, +0.1939266f,
  +0.1838065f, -0.0958159f, -0.0148946f, -0.0098260f, -0.1306861f, +0.0114268f, -0.1099561f, -0.0640195f,
  +0.3483888f, +0.0280601f, -0.0115365f, -0.0094786f, -0.1510330f, -0.3099478f, -0.1929165f, -0.0381159f,
  +0.1935229f, -0.0075604f, -0.2486035f, -0.0905453f, +0.1345844f, -0.2305321f, +0.1973586f, -0.0844980f,
  -0.0883408f, +0.1087954f, -0.0244297f, +0.1394705f, -0.1150818f, -0.0385638f, +0.0432921f, -0.1571728f,
  +0.0352985f, -0.1243873f, -0.1323560f, -0.0172852f, +0.0174108f, -0.1042721f, +0.1223316f, -0.1521678f,
  +0.0550253f, -0.0728047f, -0.2409291f, +0.0775000f, +0.2389248f, -0.2019378f, +0.0782859f, -0.0072652f,
  +0.0527041f, +0.2151147f, +0.1387171f, +0.1040817f, -0.2690946f, -0.0617694f, +0.0296137f, -0.3458647f,
  -0.0887683f, +0.0561326f, +0.0602552f, -0.0019678f, -0.2352588f, +0.1326387f, -0.1518663f, -0.0636307f,
  +0.4835559f, -0.0461434f, -0.0164037f, -0.0787462f, +0.4491175f, +0.0308116f, +0.1864300f, +0.2046299f,
  -0.0518422f, +0.0409261f, +0.1269034f, -0.0315246f, -0.1146696f, -0.1421193f, +0.1737097f, -0.0710463f,
  -0.1451932f, -0.1155466f, +0.1599600f, +0.0729977f, -0.0011907f, +0.0939656f, +0.2924360f, -0.1780856f,
  +0.1792385f, -0.0291701f, +0.1117113f, +0.1686676f, +0.2957170f, +0.3503596f, +0.0350322f, -0.0356740f,
  +0.2338275f, +0.0623459f, +0.0876621f, +0.2419758f, -0.0688328f, +0.1045831f, +0.0582898f, +0.0094688f,
  +0.0368991f, -0.0687355f, +0.0267434f, +0.0336432f, +0.2518235f, -0.4354291f, +0.1893089f, -0.3035630f,
  +0.0984076f, -0.5848275f, -0.4514911f, -0.1890447f, +0.0390596f, +0.4803941f, +0.1736560f, +0.2637144f,
  -0.2379392f, -0.3931416f, +0.0826180f, +0.0674872f, +0.0006259f, -0.0133810f, -0.0868873f, -0.0726302f,
  -0.4418443f, +0.0068178f, +0.2289314f, -0.0913618f, -0.3833077f, -0.1302771f, +0.0605363f, +0.0664235f,
  +0.1038441f, +0.4758871f, -0.2688145f, +0.0862000f, -0.0485094f, +0.0301163f, +0.0101257f, +0.5249782f,
  +0.1623727f, +0.1920244f, +0.0272052f, +0.2370607f, +0.1271112f, -0.0029301f, +0.0134625f, +0.1164248f,
  +0.0275926f, -0.0569297f, +0.1551812f, -0.0492056f, -0.1408897f, -0.6054538f, +0.3123187f, -0.1572164f,
  +0.2813879f, -0.2054238f, +0.1080247f, -0.0444202f, -0.0920357f, +0.3099427f, -0.2952695f, -0.0931117f,
  +0.0446550f, -0.4131318f, -0.0580676f, +0.1973609f, +0.1231323f, -0.0787287f, +0.1282839f, -0.0307203f,
  -0.3094475f, +0.1355412f, +0.3014558f, -0.0164273f, -0.0649930f, +0.0993496f, +0.3128541f, -0.3185769f,
  -0.2118341f, +0.0573919f, -0.2796427f, +0.2348962f, -0.0336306f, +0.4494275f, +0.2210670f, +0.2763924f,
  +0.2349501f, -0.2210288f, -0.2048403f, +0.1520320f, -0.1235731f, +0.0163804f, +0.0473175f, -0.0008979f,
  -0.2614167f, -0.1908687f, +0.2260651f, +0.0988019f, -0.1669449f, -0.0365195f, +0.3614915f, -0.5177768f,
  -0.0721397f, +0.0331148f, +0.2055077f, +0.0957881f, -0.1185886f, +0.0914233f, +0.0163193f, -0.1029954f,
  -0.0249781f, -0.1594633f, +0.0511873f, +0.1309318f, -0.0747548f, -0.0869419f, +0.0333700f, +0.0294539f
);

const float biases[4] = float[4](
  +0.0418767f, -0.0555968f, +0.0017646f, -0.0195675f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer9 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0434922f, +0.0777142f, -0.4210547f, -0.2370066f, -0.3340501f, -0.1190509f, +0.3506518f, -0.1279887f,
  +0.3790531f, +0.0256741f, +0.2036080f, -0.1491382f, +0.0475633f, +0.0459235f, -0.0416164f, -0.1068303f,
  +0.1312454f, +0.1044157f, +0.2402593f, -0.0646466f, +0.2296087f, -0.0274320f, +0.1267000f, +0.0661543f,
  -0.4347034f, -0.1079712f, -0.5201321f, -0.1273698f, -0.1693784f, -0.5035410f, -0.7692665f, +0.0149139f,
  +0.1964785f, -0.0021093f, +0.0897944f, +0.0410966f, -0.5779030f, -0.3271949f, -0.0040417f, -0.3426834f,
  +0.3254568f, -0.4364841f, -0.0070735f, -0.1461173f, +0.0209386f, -0.1838080f, -0.1765262f, -0.2190781f,
  -0.1649812f, +0.0369836f, -0.4301023f, +0.0727110f, +0.3814690f, -0.2919461f, -0.5038052f, -0.2271854f,
  -0.4765701f, -0.2499991f, -0.1914249f, +0.3980075f, +0.3516566f, -0.0870300f, -0.2402541f, +0.1612368f,
  -0.1780805f, -0.2476010f, -0.0560016f, -0.1939885f, -0.4239981f, +0.1115034f, -0.0253618f, +0.2106091f,
  +0.0084243f, +0.0153003f, -0.2885198f, +0.0751887f, -0.2851816f, +0.0623807f, -0.1899426f, -0.1819293f,
  -0.3800670f, -0.0631478f, +0.1999684f, +0.3755638f, +0.1370568f, +0.6678895f, +0.2920735f, -0.1682639f,
  +0.0963257f, +0.0322999f, +0.2202791f, +0.1821662f, -0.0589996f, +0.1865644f, -0.1162676f, +0.1738202f,
  -0.0067265f, -0.0383808f, -0.1853212f, +0.2528097f, +0.3961683f, +0.0275036f, -0.3023922f, +0.0700546f,
  +0.3404587f, +0.1605900f, -0.2499933f, +0.3048364f, +0.6370268f, +0.1161697f, -0.7774872f, +0.1836367f,
  -0.0784934f, -0.0144579f, -0.1057740f, -0.0086722f, +0.2865366f, +0.0455159f, -0.2271414f, +0.0478243f,
  +0.2339710f, +0.0554409f, -0.0971821f, -0.0365737f, +0.2395761f, -0.0533341f, +0.1469537f, +0.3118634f,
  +0.7430903f, -0.0268124f, -0.4031986f, -0.0709654f, -0.2685366f, -0.7121130f, -0.0511130f, +0.1416943f,
  +0.1810727f, -0.0510659f, -0.0859583f, -0.0707224f, +0.2055899f, -0.3687076f, +0.1360414f, +0.1046678f,
  -0.5414686f, +0.5606163f, +0.5175071f, -0.1360122f, +0.2352677f, +0.1537171f, +0.1561327f, -0.1781192f,
  -0.1589894f, +0.1812232f, +0.4334615f, -0.1552676f, +0.2672285f, -0.2603762f, -0.2766845f, +0.3933099f,
  +0.0038897f, +0.2490940f, -0.1610436f, -0.0517291f, +0.2423955f, -0.0335231f, +0.0074446f, +0.1531207f,
  -0.1354671f, -0.1194291f, +0.5388622f, -0.4699699f, -0.4519091f, +0.1526445f, +0.3422747f, +0.2387004f,
  -0.2757259f, -0.6051486f, +0.1635871f, -0.1950964f, -0.4416957f, +0.4183242f, -0.1650765f, -0.3298698f,
  +0.1088044f, -0.0719431f, +0.0275830f, -0.2446838f, +0.1786591f, -0.0207977f, +0.1046391f, -0.0937140f,
  +0.1594854f, -0.3450796f, -0.1947593f, -0.0546287f, -0.0182077f, -0.4069462f, +0.2230288f, +0.2639560f,
  +0.3001852f, -0.0243251f, -0.0473381f, -0.2560590f, +0.1714459f, -0.1173753f, +0.0632164f, +0.0511110f,
  +0.1643843f, -0.2133822f, -0.0011788f, -0.0992118f, +0.0042041f, -0.2580967f, +0.0406191f, -0.1646669f,
  -0.1784072f, -0.0355830f, +0.2181414f, -0.0429589f, -0.0437815f, -0.1696722f, -0.1660592f, -0.0486960f,
  -0.1259624f, -0.0156254f, -0.3366518f, +0.0150483f, +0.0455265f, -0.1682718f, -0.4668224f, -0.2002330f,
  -0.4738716f, +0.0280353f, -0.0294362f, +0.3403379f, -0.3684904f, -0.2442900f, +0.0429995f, -0.3850675f,
  -0.1890775f, -0.1026886f, +0.1716390f, -0.2798042f, -0.1245885f, +0.3585688f, -0.0097770f, +0.0789397f,
  -0.0251500f, +0.2036638f, -0.2673108f, -0.3069187f, +0.2311559f, -0.2834687f, +0.3209694f, -0.1875395f,
  -0.3235109f, +0.3498446f, -0.2952334f, -0.2789846f, +0.5650154f, +0.0191422f, -0.4100361f, -0.3259092f,
  -0.0673198f, +0.1728043f, +0.4863614f, -0.0350297f, +0.0793848f, +0.1502620f, -0.2394243f, +0.0828113f,
  +0.1935156f, +0.6500253f, +0.0392550f, +0.0927463f, -0.3713798f, +0.3979318f, -0.0013100f, -0.1894174f,
  -0.0432125f, +0.0722646f, -0.1810378f, +0.0245201f, +0.2716539f, -0.1079830f, +0.1758406f, -0.1670782f
);

const float biases[4] = float[4](
  -0.0795199f, +0.0303595f, +0.0298575f, -0.0233106f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer9 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0225408f, -0.1436057f, +0.0831523f, +0.1964455f, +0.0696980f, +0.2049314f, -0.0204053f, -0.2207907f,
  +0.2281936f, -0.2186767f, +0.1338574f, +0.3310293f, -0.1329362f, -0.0073053f, -0.1005545f, +0.0770701f,
  +0.0576900f, +0.0408563f, +0.0785780f, -0.2053232f, +0.0239098f, -0.0596010f, -0.0682615f, -0.0427279f,
  +0.0633608f, +0.1422714f, +0.1453741f, -0.1698472f, +0.1468147f, +0.0398180f, -0.0623013f, -0.2270479f,
  -0.0306835f, -0.1639881f, -0.0669652f, +0.3358890f, +0.1236286f, -0.2559206f, +0.1808094f, -0.3483524f,
  +0.0033080f, +0.1849027f, +0.0119618f, +0.0802434f, +0.0351210f, +0.2319950f, -0.0224091f, +0.0073496f,
  +0.0239903f, +0.0379723f, -0.0501229f, +0.2391395f, +0.2687402f, -0.0204287f, +0.0472173f, +0.0067952f,
  -0.1779058f, +0.1548663f, -0.0324272f, -0.0711063f, -0.1430850f, +0.1960406f, -0.1093898f, +0.0406169f,
  -0.0948401f, -0.0334014f, -0.0810729f, +0.0351056f, +0.0938250f, -0.0326482f, +0.0613725f, -0.0277573f,
  -0.0233112f, -0.4604083f, +0.0587072f, -0.1086890f, +0.2227584f, +0.0350346f, +0.0682040f, +0.4171948f,
  -0.0664098f, +0.1810559f, -0.2438869f, +0.2139551f, +0.1143039f, -0.0578703f, +0.5169206f, -0.0267981f,
  +0.0035615f, -0.4985467f, -0.0700670f, +0.0735144f, -0.1249283f, -0.2037731f, -0.1909681f, +0.0902639f,
  -0.1645818f, -0.2502003f, +0.2963089f, -0.0739754f, +0.0533340f, +0.2243797f, -0.3167282f, +0.1025036f,
  -0.0589469f, +0.3990732f, -0.4434732f, -0.1627988f, +0.0420630f, +0.2151835f, +0.1967551f, +0.0927220f,
  -0.0657937f, -0.1185056f, -0.0004316f, +0.2515190f, -0.1185109f, -0.2032654f, +0.1809946f, -0.1863267f,
  -0.0010189f, +0.0735770f, +0.1269031f, -0.0026331f, -0.0765780f, +0.1237503f, -0.0864822f, +0.2558490f,
  +0.1327329f, -0.0311704f, -0.1053721f, -0.0715654f, +0.2015827f, -0.3250796f, +0.1258055f, -0.0483736f,
  -0.0656941f, -0.0609541f, -0.0052777f, -0.1411926f, +0.2345207f, -0.0530016f, -0.1528472f, -0.2722218f,
  +0.2699131f, +0.1722887f, +0.1787500f, +0.1288162f, +0.1183274f, -0.0155159f, +0.1461000f, -0.1354726f,
  -0.0415302f, -0.0706474f, -0.1869730f, +0.0094251f, +0.2377746f, +0.1954437f, -0.0988927f, +0.1952931f,
  +0.0444948f, -0.1344173f, +0.0522968f, +0.2276698f, -0.2187289f, +0.1189807f, -0.0055429f, +0.2523822f,
  -0.2286966f, +0.0331458f, +0.0504737f, +0.0364125f, +0.2063231f, -0.2734538f, +0.0788592f, -0.1735282f,
  -0.3705141f, -0.6426512f, -0.4085444f, +0.2898616f, -0.2806354f, +0.4885975f, -0.1455562f, -0.1489798f,
  +0.3146110f, +0.3073434f, +0.4751717f, -0.1785413f, -0.1666618f, +0.3623017f, -0.0125807f, +0.4069697f,
  +0.3250745f, +0.1481439f, +0.0556975f, +0.0019675f, -0.1023020f, -0.2453061f, +0.2667085f, +0.0801588f,
  +0.0913319f, -0.5816514f, -0.2221118f, -0.0568838f, -0.2692094f, +0.1972866f, -0.3083337f, +0.1512396f,
  +0.0636699f, +0.1957054f, +0.2378851f, -0.1408534f, -0.1545503f, +0.2461251f, +0.0229846f, -0.1099239f,
  -0.2308515f, -0.0230866f, -0.0244259f, +0.1906644f, -0.1425758f, -0.0577416f, +0.0001478f, -0.3176325f,
  -0.0054777f, +0.1618554f, -0.1640326f, -0.1485449f, +0.0972138f, +0.1524808f, +0.2494474f, +0.0732840f,
  +0.0163607f, -0.2121671f, +0.0054182f, -0.1023384f, +0.0104509f, -0.0331643f, -0.1727787f, -0.1673355f,
  +0.1397265f, -0.0769808f, +0.3176230f, -0.0335737f, -0.1941096f, -0.1421885f, -0.2585094f, -0.1434095f,
  +0.0197567f, +0.2788795f, -0.2243882f, -0.0730810f, +0.4407075f, -0.0814831f, +0.2159756f, +0.1702488f,
  +0.2704493f, +0.0718249f, +0.0337824f, -0.4861127f, +0.1338856f, +0.1776287f, +0.0797613f, -0.0304126f,
  -0.0822239f, -0.0353854f, -0.2076524f, +0.2275868f, +0.0497718f, -0.1979805f, +0.0028786f, -0.2009763f,
  +0.1276535f, +0.1149995f, +0.0345598f, -0.0997202f, +0.0767186f, -0.1554488f, +0.1517532f, +0.2042892f,
  -0.0830260f, -0.0352319f, -0.0902575f, -0.0182469f, -0.0487608f, -0.0710419f, -0.0637430f, +0.0675787f
);

const float biases[4] = float[4](
  +0.2638155f, +0.0822808f, +0.0024550f, +0.1129314f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer10 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0436986f, +0.2961915f, +0.0548448f, -0.3872758f, +0.0422389f, +0.2917375f, +0.2547673f, +0.0415820f,
  +0.1990103f, -0.0013993f, -0.2073203f, -0.3666522f, -0.0643404f, +0.2277758f, -0.0204838f, -0.1877163f,
  +0.2856736f, +0.1725829f, +0.0070219f, -0.5576006f, -0.1202664f, +0.3223232f, -0.0110206f, +0.0553500f,
  -0.0988373f, -0.0532939f, -0.0825352f, -0.1771976f, +0.1488503f, +0.0567730f, -0.1348280f, +0.1836955f,
  -0.1504135f, +0.2949063f, +0.1610893f, +0.1096055f, -0.4214463f, +0.3474331f, -0.0966351f, +0.1450105f,
  -0.1061345f, +0.3463086f, +0.2014663f, -0.4431970f, -0.0430692f, -0.0163704f, -0.4251144f, +0.2955218f,
  -0.1133430f, -0.0973670f, -0.0251503f, -0.0224311f, -0.1449300f, -0.1611650f, +0.1978779f, -0.1635479f,
  -0.0510870f, +0.2661296f, +0.1725668f, +0.0297433f, -0.1838838f, -0.0449822f, -0.2232668f, -0.6832628f,
  -0.0472154f, -0.0956269f, +0.3797471f, +0.0265407f, +0.0653473f, -0.1460203f, -0.0071288f, +0.0188491f,
  -0.1141032f, +0.3486798f, +0.0447528f, -0.1467397f, +0.0530586f, -0.2380592f, +0.1164530f, +0.0207990f,
  -0.1852133f, +0.0382093f, +0.0899472f, +0.0515586f, +0.0166786f, +0.1892224f, +0.1809525f, -0.0538993f,
  -0.0244285f, +0.0538735f, +0.0486438f, -0.0040843f, -0.0280965f, -0.0555481f, -0.1790981f, +0.0643894f,
  -0.2943939f, -0.0846863f, +0.0950763f, +0.0681569f, -0.1829453f, -0.0869502f, -0.2214221f, +0.3450549f,
  -0.0752945f, +0.0063723f, +0.1667658f, +0.1499941f, +0.0888562f, +0.0279529f, +0.1063633f, -0.2094337f,
  -0.5165368f, +0.0668123f, -0.0380476f, +0.0200235f, -0.2221654f, -0.0053608f, -0.1812459f, +0.1707606f,
  -0.0118428f, -0.1127066f, -0.0506508f, +0.1702891f, -0.0571516f, -0.0658157f, +0.0478838f, -0.0254265f,
  -0.0339132f, +0.0764776f, -0.2495261f, -0.0853547f, +0.5536454f, +0.2845109f, +0.1614792f, -0.1368226f,
  -0.1168677f, +0.3006582f, -0.2797568f, +0.1159303f, +0.0932631f, +0.0289293f, -0.0715006f, -0.0915087f,
  +0.0877846f, -0.0412145f, +0.0507706f, +0.2081218f, -0.1032551f, -0.1566114f, -0.1652291f, +0.2037136f,
  +0.1654410f, +0.2367143f, -0.2810874f, +0.0672062f, +0.3352360f, -0.0107178f, +0.2825412f, +0.2548709f,
  +0.0766000f, +0.0282084f, +0.2967547f, +0.4308707f, +0.0216628f, -0.0820248f, -0.0926572f, +0.0169713f,
  -0.0074142f, +0.1235395f, -0.0617216f, +0.4971220f, -0.1199974f, +0.0669403f, -0.1430115f, +0.1664227f,
  -0.1449729f, +0.7907303f, -0.1259025f, +0.1502685f, +0.1694603f, +0.1608551f, -0.3027124f, +0.0892099f,
  -0.1402039f, +0.0770846f, +0.0005830f, +0.5554820f, -0.3758241f, -0.3040023f, +0.2981944f, +0.0391660f,
  +0.1075659f, +0.1807020f, -0.0774199f, +0.0762035f, -0.1407604f, +0.1142731f, -0.0215595f, -0.1554888f,
  -0.0907505f, +0.2458454f, -0.3297462f, +0.1963907f, -0.1052147f, +0.0564585f, +0.0404402f, -0.1375841f,
  +0.1733761f, +0.3748130f, -0.5413964f, +0.6010669f, -0.1083223f, -0.2279620f, -0.0615049f, -0.4346931f,
  -0.3564325f, +0.0047069f, -0.0264714f, -0.3411649f, +0.0686480f, -0.0909194f, +0.0200109f, -0.1012414f,
  -0.2216604f, -0.1075461f, +0.4138839f, +0.0487316f, +0.2194048f, -0.0194644f, -0.2576238f, -0.3816661f,
  -0.1944286f, +0.0654647f, -0.0040817f, -0.1860421f, +0.0413844f, -0.2484502f, -0.1543165f, -0.2061768f,
  -0.3659934f, +0.3035261f, +0.4819928f, +0.0046417f, +0.3422991f, -0.4193173f, -0.3065124f, +0.2357872f,
  -0.4196567f, +0.0635176f, +0.1227049f, -0.0613221f, -0.2519395f, +0.4549446f, -0.0352964f, +0.0379282f,
  -0.3089522f, +0.0111961f, +0.1027456f, -0.1225052f, +0.0558520f, -0.2063343f, +0.0413619f, -0.2289029f,
  -0.0201682f, +0.0758530f, +0.1425976f, -0.0635895f, -0.0790984f, -0.0078474f, -0.1222376f, -0.1390485f,
  -0.0787080f, +0.0523905f, -0.3151770f, -0.1208357f, +0.5791330f, -0.2506103f, +0.0998712f, +0.1934426f,
  -0.0708530f, +0.2458696f, +0.2188186f, -0.2575682f, -0.5297863f, +0.0821413f, -0.0381076f, -0.0689690f
);

const float biases[4] = float[4](
  +0.0037210f, -0.0505945f, +0.0376003f, +0.0244769f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer10 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0098784f, -0.0200269f, +0.0547873f, -0.0229962f, -0.0771701f, -0.0220553f, +0.4254584f, -0.3707263f,
  +0.2469463f, +0.4292424f, +0.0148867f, -0.0440923f, -0.2764628f, -0.0081088f, -0.2314561f, -0.2597884f,
  -0.4588872f, -0.1561106f, -0.0559323f, -0.0330723f, -0.1049620f, -0.0796523f, -0.2177536f, -0.1104131f,
  -0.0673828f, -0.2677208f, -0.2025829f, -0.0732560f, -0.0801028f, +0.0306224f, +0.1876544f, -0.0506488f,
  +0.2361291f, -0.2382969f, -0.0672291f, -0.1684025f, -0.1216702f, +0.2923699f, +0.0356434f, +0.1564175f,
  +0.2225557f, -0.3348546f, -0.5355765f, +0.3185119f, +0.2457279f, -0.3051363f, +0.0548847f, +0.1258234f,
  -0.0486247f, +0.0524764f, -0.1320023f, +0.1747669f, +0.1463535f, +0.0761698f, -0.1139173f, -0.0197703f,
  -0.0677105f, -0.0002798f, +0.0036778f, -0.0173647f, -0.0393804f, +0.1118167f, -0.3586068f, -0.1659682f,
  -0.2148669f, -0.3670595f, -0.3414034f, +0.2756603f, -0.2350717f, -0.2567227f, +0.0598026f, +0.1088983f,
  -0.1265129f, +0.1046193f, +0.0200398f, -0.0319791f, +0.1368129f, -0.1643014f, +0.0174194f, +0.0793727f,
  +0.3747576f, +0.0502788f, -0.2488512f, -0.0294843f, -0.0858965f, -0.0228141f, -0.0745451f, +0.0195289f,
  -0.0366977f, -0.0811650f, -0.0071449f, +0.1607197f, +0.0192152f, -0.1462018f, +0.2475540f, -0.1631951f,
  +0.0775325f, +0.1058790f, -0.0129595f, -0.0257346f, -0.0418835f, -0.2526474f, -0.0374366f, +0.3046655f,
  -0.0927349f, -0.7652392f, -0.5066385f, -0.2479794f, +0.0508637f, -0.3050798f, -0.5644373f, +0.3192943f,
  +0.4344411f, -0.3540195f, +0.0957677f, +0.1063078f, +0.2047333f, +0.0347294f, +0.3548415f, -0.0073216f,
  +0.0252394f, -0.0016496f, -0.0330665f, +0.1278334f, -0.0726499f, -0.0553409f, -0.1669616f, +0.0273062f,
  -0.1290853f, -0.3682390f, +0.0278724f, +0.1053032f, +0.4059804f, -0.2795303f, -0.1501891f, +0.2091825f,
  -0.1911737f, -0.5025029f, -0.1549681f, -0.1012102f, +0.1197958f, +0.1450824f, +0.0823079f, +0.0176939f,
  +0.0438600f, -0.1661776f, -0.0567180f, +0.1132734f, +0.0266944f, +0.1137778f, -0.1550422f, -0.0039431f,
  +0.1766499f, -0.0703900f, -0.1854679f, -0.0026111f, +0.0255593f, +0.0274254f, +0.0398870f, +0.2090364f,
  +0.4474017f, -0.0475623f, +0.0560133f, +0.1423682f, -0.0332569f, +0.2448239f, -0.1102501f, +0.0762535f,
  +0.1556405f, -0.4008216f, -0.1387122f, +0.2486673f, +0.2990990f, -0.1613023f, +0.4483051f, -0.2358848f,
  +0.4228018f, +0.1235161f, +0.3584350f, +0.1889999f, +0.0535370f, -0.0192073f, -0.2440609f, -0.0292553f,
  +1.3819499f, +0.1665234f, +0.2510925f, +0.1797026f, -0.2505220f, +0.5478929f, +0.3467476f, +0.1650226f,
  -0.0233837f, -0.2137537f, +0.0399968f, -0.0071936f, +0.2607413f, +0.1431250f, +0.2309403f, -0.2671095f,
  -0.0227881f, -0.0576454f, +0.4210335f, +0.2645067f, -0.2518426f, -0.1239793f, +0.1775263f, -0.1602009f,
  +0.1942487f, +0.0716396f, +0.5924612f, -0.2410603f, +0.0057854f, -0.2299826f, -0.1479181f, +0.0245158f,
  -0.0548789f, -0.0384489f, +0.1327785f, +0.2753072f, +0.1588826f, -0.1040387f, -0.1212869f, -0.0298931f,
  +0.2023129f, +0.0974139f, +0.0342528f, +0.0690077f, +0.0455094f, -0.1345052f, -0.2148495f, +0.0708502f,
  +0.3001287f, -0.1388513f, +0.1137030f, +0.1017651f, +0.0765387f, -0.0637772f, +0.2679355f, -0.0988844f,
  +0.0849684f, +0.0762881f, -0.0982598f, +0.1276208f, +0.2948688f, +0.0278095f, -0.3412019f, -0.1706271f,
  -0.5613672f, +0.1107068f, -0.2630984f, +0.1380521f, +0.3200010f, -0.0799964f, -0.0596449f, -0.3841298f,
  +0.0822353f, -0.1286754f, +0.1522074f, +0.1744581f, -0.3027653f, +0.1160052f, +0.1047384f, +0.0834216f,
  +0.0839175f, +0.1076221f, +0.0762607f, -0.0189736f, -0.1308887f, +0.0017923f, +0.0563074f, +0.1694739f,
  +0.1173670f, -0.1145539f, -0.1949732f, +0.2440712f, -0.2881145f, -0.1968927f, -0.0553127f, -0.2346874f,
  +0.1377670f, -0.1534152f, -0.2608733f, +0.2846579f, +0.2544543f, -0.0255572f, +0.0698809f, +0.1304999f
);

const float biases[4] = float[4](
  +0.2248567f, -0.0090503f, -0.0725705f, -0.0194516f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer11 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1580890f, +0.2497382f, +0.3845252f, +0.0401310f, -0.3167283f, -0.3403855f, -0.1967275f, -0.1446911f,
  -0.1956280f, -0.2019051f, +0.2965672f, +0.2171246f, +0.0259652f, +0.1413339f, -0.2922730f, -0.0730886f,
  -0.0672946f, -0.1904509f, +0.2311499f, +0.3860998f, -0.3127661f, -0.3310101f, -0.4762048f, -0.2059766f,
  -0.0130438f, +0.1177096f, +0.1452299f, -0.0560331f, -0.1624115f, -0.1010367f, +0.0177687f, +0.0744891f,
  -0.1034866f, -0.1354178f, +0.4218105f, +0.0448597f, +0.4674940f, -0.5169460f, -0.0849800f, +0.3068475f,
  -0.1568886f, -0.0158199f, +0.2065774f, -0.0662395f, -0.1920453f, +0.1622905f, -0.3073489f, +0.1566175f,
  -0.0724820f, +0.0099460f, +0.1380596f, -0.0875505f, +0.0429975f, +0.0178212f, -0.0111871f, -0.0217411f,
  +0.1890818f, +0.0869124f, +0.0013738f, -0.3022635f, -0.0730414f, -0.1902654f, -0.0691195f, +0.0501302f,
  +0.1359423f, +0.2004855f, +0.1733341f, -0.3489282f, +0.0362417f, +0.1716433f, -0.0287249f, +0.1176902f,
  +0.1525326f, +0.0024163f, +0.3576910f, +0.2025486f, -0.0076267f, -0.2746881f, +0.1840524f, +0.1544190f,
  +0.0096768f, -0.0053132f, +0.2416762f, -0.0565751f, -0.1253358f, -0.4105314f, +0.4473425f, +0.2063511f,
  -0.2075968f, +0.3209204f, -0.0589360f, -0.0948335f, +0.0581886f, +0.1500705f, +0.1348376f, +0.1397653f,
  +0.2080564f, +0.1776400f, -0.0928845f, +0.0869772f, -0.4367950f, -0.2313251f, -0.3424058f, +0.0501650f,
  +0.2162928f, -0.1577763f, +0.1949735f, -0.2730648f, -0.3412703f, -0.1556481f, +0.3205714f, -0.2734725f,
  -0.3390144f, -0.3843243f, -0.2620454f, +0.1160388f, -0.1905087f, +0.1680468f, +0.1233621f, +0.0407519f,
  -0.0162631f, +0.2086958f, -0.0597248f, +0.0022583f, -0.0309902f, +0.1639156f, -0.3049903f, -0.0833764f,
  -0.0146103f, -0.1122757f, -0.1786258f, -0.1356702f, +0.2850739f, -0.2906344f, -0.0920809f, -0.1272821f,
  +0.0567294f, +0.0074067f, -0.0310944f, +0.1035973f, -0.1285493f, +0.1914586f, +0.1492570f, +0.0660313f,
  -0.1330996f, +0.2709268f, -0.2889886f, -0.0475557f, +0.1094073f, +0.0557123f, -0.3004302f, -0.0937371f,
  +0.3868843f, -0.1299699f, +0.1784588f, +0.2488122f, -0.2349513f, -0.2393053f, +0.4363376f, +0.1549542f,
  +0.2279585f, +0.1428100f, +0.0807526f, -0.0142507f, +0.1521723f, +0.1609719f, +0.1957551f, +0.2371988f,
  -0.0467508f, +0.1378615f, -0.4835019f, +0.0125364f, +0.4319817f, -0.1393341f, -0.2408361f, -0.0767208f,
  -0.4243842f, -0.2728681f, -0.1433641f, +0.1927979f, +0.3060319f, +0.3758715f, -0.4821549f, -0.1147465f,
  +0.1767133f, +0.0546274f, +0.0595308f, +0.3033865f, -0.3178078f, +0.1027752f, +0.3280526f, -0.0076091f,
  +0.2194260f, +0.1784148f, -0.3863039f, +0.0179035f, -0.1542266f, -0.0722660f, +0.0769999f, -0.2044482f,
  -0.1366286f, -0.0072808f, -0.3098403f, +0.0418859f, -0.0380888f, -0.3667957f, -0.4482253f, -0.2144568f,
  -0.1602348f, -0.0244280f, -0.2305540f, +0.4421082f, -0.1026051f, -0.2434945f, -0.1069235f, +0.2476109f,
  -0.0039444f, -0.3152371f, -0.2398442f, -0.0478119f, +0.0784657f, +0.2335243f, -0.1366183f, +0.2064504f,
  -0.2146252f, +0.1923591f, -0.2773388f, +0.0479506f, -0.1609902f, +0.0338648f, -0.0702565f, -0.2229087f,
  -0.0662316f, -0.2439235f, +0.1186640f, -0.0095394f, +0.0392745f, -0.0032489f, -0.1616234f, -0.2413407f,
  -0.1930536f, +0.0720119f, +0.3442093f, -0.3060377f, +0.0181627f, -0.2324281f, +0.7952473f, +0.0145067f,
  -0.0513436f, +0.2716190f, +0.0491857f, -0.8461992f, +0.2809286f, +0.1795433f, +0.3940188f, +0.2513900f,
  +0.1074233f, +0.3570041f, +0.4649740f, +0.0739084f, +0.2494924f, +0.3124427f, +0.0775354f, +0.2888381f,
  -0.1510967f, +0.0309131f, +0.1756760f, -0.0026454f, -0.3504308f, +0.5675666f, -0.1291782f, -0.3119090f,
  -0.0751596f, -0.0239253f, +0.3147045f, -0.0647657f, -0.5284637f, +0.3278088f, +0.6735702f, -0.0642187f,
  +0.0427288f, -0.3481302f, +0.3029920f, -0.5034559f, +0.0035485f, -0.0945822f, -0.0147221f, -0.2157638f
);

const float biases[4] = float[4](
  -0.0808256f, +0.0930458f, +0.0476535f, -0.0758022f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer11 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1968220f, -0.0817497f, -0.0192939f, +0.0167530f, -0.0316673f, +0.0287975f, -0.1733426f, +0.3385074f,
  +0.1642246f, +0.1185668f, +0.0113955f, -0.3196323f, +0.0952477f, -0.0775438f, +0.0289700f, -0.1421160f,
  -0.0118812f, -0.1794369f, -0.1658991f, -0.1276261f, -0.1814613f, -0.0914683f, -0.0246202f, -0.2101333f,
  -0.3300543f, +0.0205021f, -0.0438131f, +0.1593624f, -0.3789237f, -0.2854269f, -0.0158683f, -0.4214361f,
  -0.4710248f, -0.2335327f, -0.3650644f, +0.7250897f, -0.4022993f, +0.1857032f, -0.0861684f, -0.1680038f,
  +0.2715595f, -0.1303424f, -0.2128334f, +0.3709384f, -0.0286177f, -0.1794054f, -0.0512949f, +0.1412364f,
  -0.2131173f, +0.3280960f, +0.3171777f, -0.0390668f, -0.6746339f, +0.3434284f, -0.2347663f, +0.1532165f,
  +0.0948272f, +0.1990140f, -0.0006363f, -0.1461767f, +0.2127004f, -0.0861333f, -0.2811729f, -0.1541878f,
  -0.0978093f, -0.2328879f, -0.0903471f, -0.0081972f, +0.2117207f, +0.0215173f, -0.0606867f, +0.0400562f,
  -0.1903820f, +0.1630277f, -0.0647896f, -0.2469717f, -0.3018683f, -0.0203455f, -0.2088244f, -0.0288296f,
  -0.4713926f, -0.1439703f, -0.1892487f, -0.1780161f, +0.0085767f, +0.0971004f, -0.6859835f, +0.0216941f,
  -0.2248158f, +0.4669892f, +0.1144726f, -0.0287595f, -0.2119244f, +0.1567961f, -0.3937290f, -0.0171800f,
  -0.1032635f, +0.1962996f, +0.0815549f, +0.1659236f, -0.0238845f, -0.2664244f, -0.1342478f, -0.2004199f,
  -0.0611690f, +0.2728726f, -0.0128332f, +0.1292161f, +0.8280473f, -0.2077849f, +0.2184995f, -0.2177083f,
  +0.1700056f, +0.2568833f, -0.1719370f, +0.0496154f, +1.2395989f, -0.2942950f, +0.2240374f, -0.1491606f,
  -0.1680330f, +0.1024844f, +0.0484661f, -0.1352444f, +0.1449991f, +0.1098318f, +0.0848880f, -0.0040814f,
  +0.0626393f, -0.3022256f, +0.0158296f, -0.0207349f, -0.2178082f, -0.0517993f, +0.2175712f, +0.2160587f,
  -0.2632697f, -0.0692257f, +0.1293387f, +0.1603531f, -0.7057271f, +0.2266734f, -0.2872314f, -0.2418665f,
  +0.2826143f, -0.1933154f, -0.1182646f, -0.0963123f, +0.1400108f, -0.0340412f, -0.1182079f, +0.1066940f,
  +0.4029356f, -0.2988724f, -0.4204132f, -0.0133833f, +0.0032721f, +0.3101791f, +0.4782399f, -0.0078016f,
  -0.2145741f, -0.0585593f, -0.2113969f, +0.0732199f, +0.1035035f, +0.2366672f, +0.1267125f, -0.0029168f,
  +0.3050215f, -0.3486572f, +0.1656511f, +0.3706726f, +0.0744778f, +0.0730464f, +0.2057723f, +0.2816377f,
  +0.1766937f, +0.5249702f, -0.3583922f, +0.0089632f, +0.0942521f, -0.4467712f, +0.2995642f, -0.2252826f,
  +0.1123509f, +0.1522852f, -0.0825906f, +0.4199520f, +0.1112177f, +0.0169184f, +0.1478705f, +0.4007096f,
  +0.2648432f, -0.3538821f, +0.2914957f, -0.0284151f, +0.2069301f, +0.0283633f, +0.0303036f, -0.0194105f,
  +0.1779306f, +0.2605457f, -0.2448959f, +0.1451043f, -0.0499436f, +0.0801176f, +0.0755191f, -0.0149921f,
  +0.0332609f, +0.1481628f, +0.0346662f, -0.0173397f, +0.0649440f, +0.2103532f, +0.0046162f, +0.1524378f,
  +0.0020105f, -0.0834846f, +0.2211767f, +0.3589162f, -0.2348758f, -0.2520159f, -0.3758678f, -0.1191111f,
  +0.6120738f, -0.1174112f, -0.0972320f, -0.0506207f, +0.0206281f, -0.2146569f, -0.3996677f, +0.1333139f,
  +0.0439963f, -0.3965987f, -0.3818338f, +0.0043685f, +0.1155582f, +0.1790159f, +0.1566457f, +0.0857015f,
  +0.2796667f, +0.0463790f, +0.3389822f, -0.0997812f, -0.3827495f, -0.1258627f, -0.0026289f, +0.0558015f,
  +0.2542951f, -0.3649422f, -0.0066535f, +0.1843029f, -0.4472863f, -0.2636003f, +0.3754421f, -0.2950873f,
  +0.1085944f, -0.2551079f, -0.0533166f, +0.0581128f, -0.2437828f, -0.1887161f, +0.0890305f, -0.2019813f,
  -0.0377808f, +0.0803353f, +0.0919875f, -0.2148155f, -0.3572855f, -0.0322130f, -0.1614360f, +0.0676008f,
  -0.0126387f, +0.1140983f, -0.0164719f, -0.1300485f, +0.4901073f, -0.1075088f, +0.1993153f, +0.0305178f,
  -0.0196681f, -0.0092525f, -0.1814507f, -0.2719510f, +0.1927040f, -0.0663666f, -0.0343034f, +0.1333272f
);

const float biases[4] = float[4](
  -0.1206717f, -0.0840553f, +0.0771481f, +0.0247044f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer12 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1559075f, -0.0456850f, -0.4147906f, +0.1639325f, -0.4658569f, +0.0551168f, -0.1083473f, +0.0968109f,
  +0.0952708f, -0.0963176f, -0.2489196f, -0.1694666f, +0.2461406f, +0.5353094f, +0.0751611f, +0.1280432f,
  -0.0712028f, +0.1848906f, -0.2557464f, -0.1687007f, +0.3596658f, +0.1516132f, -0.1831275f, -0.0187142f,
  +0.1274136f, +0.2275828f, -0.1965454f, -0.0134520f, -0.0606453f, -0.3015192f, -0.1617930f, +0.0036830f,
  +0.0379556f, -0.2175880f, +0.2979929f, +0.0387258f, +0.0383047f, +0.5163377f, -0.0045110f, -0.6458163f,
  -0.3531624f, +0.2891118f, -0.2222572f, +0.1899184f, +0.9609244f, -0.3725044f, +0.0916582f, -0.1701648f,
  +0.3573617f, +0.3096091f, -0.1609492f, +0.0057317f, +0.0330388f, +0.1156066f, -0.1259916f, -0.0115841f,
  -0.5255950f, +0.0801568f, -0.0593965f, +0.0535324f, +0.2388134f, +0.0249726f, -0.4120797f, -0.0403262f,
  -0.0313267f, +0.2529097f, +0.0402506f, -0.0629697f, -0.3911359f, -0.1381548f, -0.3081375f, +0.1217601f,
  -0.4610635f, +0.0509549f, -0.4491859f, -0.4309584f, -0.2845886f, +0.4182599f, -0.3643268f, +0.2276694f,
  +0.0534705f, +0.1822125f, +0.1933182f, +0.0524429f, +0.0523297f, +0.1696502f, -0.0839485f, +0.0080233f,
  +0.0314537f, +0.1375767f, -0.0090104f, -0.4168198f, -0.3831164f, -0.0179689f, +0.0805791f, -0.1101532f,
  -0.0534318f, +0.2170705f, -0.2851356f, -0.0029194f, +0.0285764f, -0.1395427f, -0.2895245f, +0.0695926f,
  -0.2046011f, +0.3126066f, -0.0187215f, -0.3291909f, -0.5286033f, +0.0275848f, -0.0876630f, -0.1559298f,
  +0.1062738f, +0.1383095f, -0.1578373f, +0.3576094f, -0.3093918f, -0.0208807f, -0.1268392f, -0.0076019f,
  +0.1396158f, -0.1148687f, +0.1288973f, -0.0282724f, -0.0162029f, -0.1246241f, -0.1718474f, +0.0598388f,
  -0.1702217f, +0.1676758f, -0.2377479f, -0.0911963f, +0.1748060f, -0.2124640f, -0.0175680f, +0.0985820f,
  -0.1523102f, -0.0775826f, +0.1158048f, +0.0216501f, +0.2418912f, -0.0546855f, +0.1236836f, -0.2831952f,
  +0.1416814f, +0.1074889f, -0.0441366f, -0.1200156f, +0.0422230f, +0.1839139f, -0.4018214f, +0.0668759f,
  -0.0289222f, +0.2557727f, +0.0727508f, +0.0206947f, +0.0149808f, +0.0689038f, +0.0412509f, -0.4173381f,
  +0.1993637f, +0.1508934f, +0.2216515f, +0.0033347f, -0.4698027f, +0.0954422f, -0.0978314f, -0.1253982f,
  +0.0055007f, +0.1627470f, -0.3358020f, +0.0160142f, +0.1083224f, +0.2036769f, -0.1840713f, +0.0100671f,
  -0.3272336f, +0.0003721f, +0.0034778f, +0.1858748f, -0.4087618f, +0.0791275f, +0.2237517f, -0.0104860f,
  +0.2567562f, +0.3886839f, -0.0876271f, +0.8132039f, -0.1476386f, +0.1652698f, -0.3927235f, +0.0513425f,
  -0.1705790f, -0.1855040f, -0.2356799f, +0.0840481f, +0.2082808f, -0.2887232f, -0.0862705f, -0.0162601f,
  -0.3056320f, -0.2417935f, -0.1430402f, -0.2697458f, +0.4282533f, -0.1846395f, +0.2660666f, +0.1385970f,
  -0.1855026f, -0.2652230f, +0.0259756f, +0.0235960f, +0.2312956f, +0.2129567f, -0.0675370f, -0.0979455f,
  -0.2251264f, -0.1922414f, -0.4753742f, -0.0787283f, -0.0286734f, -0.0211433f, +0.0899912f, +0.0929685f,
  -0.1549895f, +0.2461597f, +0.0181183f, +0.3262846f, -0.0899582f, -0.0078281f, -0.0957003f, +0.6742969f,
  -0.0643792f, +0.1088188f, -0.0746296f, +0.1944790f, +0.2636547f, -0.1579915f, -0.0408095f, +0.0375614f,
  -0.1112329f, -0.0437911f, +0.4526008f, +0.4441880f, +0.0539575f, -0.3238487f, -0.1573098f, +0.0447037f,
  -0.3416153f, +0.0069039f, +0.1254280f, +0.1706062f, -0.0082890f, -0.0645732f, -0.5126688f, -0.0424708f,
  -0.2384288f, -0.0679559f, -0.2519254f, -0.0232731f, -0.3723790f, -0.2186108f, -0.5417128f, +0.3577793f,
  -0.0865760f, -0.0315077f, +0.2373869f, -0.0552152f, -0.1378136f, +0.0391887f, -0.0686862f, +0.2899543f,
  -0.0414541f, -0.3887103f, -0.0188186f, -0.0969557f, +0.2334561f, -0.1216531f, -0.2032113f, -0.0712768f,
  -0.0933089f, -0.0570201f, +0.1184499f, +0.1501183f, +0.0388581f, +0.0960944f, -0.2626772f, +0.0524094f
);

const float biases[4] = float[4](
  +0.1154624f, +0.0316839f, +0.0304118f, -0.0416852f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer12 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1028768f, -0.0937563f, -0.2869073f, -0.0176384f, -0.0593597f, +0.0475329f, -0.0516010f, +0.0145706f,
  -0.2515016f, +0.2655661f, +0.3861606f, +0.2398477f, +0.3580769f, -0.0684416f, +0.1146735f, +0.1438642f,
  +0.2883631f, +0.0477550f, +0.0471139f, +0.6950523f, +0.7427772f, -0.4008904f, +0.0084049f, -0.1259094f,
  -0.0037317f, +0.1908989f, -0.2201553f, -0.0998055f, -0.0748380f, -0.0915082f, -0.3126377f, +0.0336259f,
  -0.1523611f, +0.2293679f, -0.4929823f, -0.2079389f, +0.0455005f, -0.1201143f, -0.0644565f, +0.3647064f,
  +0.0931391f, +0.2244841f, +0.4161605f, -0.0352889f, +0.1747222f, -0.2444250f, +0.4721569f, -0.3740200f,
  -0.0304545f, -0.1489040f, +0.0125422f, -0.0273041f, -0.0821452f, -0.0057836f, -0.1442802f, -0.0006785f,
  +0.0840648f, +0.0604978f, -0.1677760f, -0.0160279f, +0.1178802f, +0.2409265f, -0.0831683f, -0.3735419f,
  +0.2150036f, +0.1932158f, -0.1022257f, -0.1822101f, -0.4458541f, -0.0051869f, +0.0568858f, +0.3198960f,
  -0.1688586f, -0.0312205f, -0.0895570f, -0.0023674f, -0.2168911f, -0.1656120f, -0.0567537f, +0.0438913f,
  +0.0066396f, -0.0499173f, -0.1844601f, -0.1680294f, -0.2205820f, +0.2381581f, +0.2176983f, +0.1094109f,
  -0.0059574f, +0.1624513f, +0.0789168f, +0.0040143f, -0.0982559f, -0.0958871f, -0.1408526f, +0.2963123f,
  -0.0183211f, -0.0804049f, -0.0102217f, +0.1957297f, -0.1416456f, +0.0020444f, -0.1576367f, +0.0856598f,
  +0.4176926f, +0.0470346f, -0.9301569f, -0.4120867f, -0.1555032f, +0.2104855f, +0.3767093f, -0.0790723f,
  -0.0009597f, -0.0022061f, +0.2382839f, -0.3226759f, +0.1607296f, +0.1711772f, +0.1142566f, +0.2621156f,
  -0.1294730f, -0.1241736f, +0.0572553f, -0.0143495f, +0.2190365f, +0.0921739f, -0.0061491f, +0.1290522f,
  +0.8126865f, +0.1271706f, +0.1746754f, +0.2159705f, +0.1113490f, +0.6012362f, +0.1149647f, -0.1097706f,
  +0.2595363f, +0.2312823f, -0.1736375f, -0.0934909f, -0.1997664f, -0.0036663f, +0.0930061f, +0.0226615f,
  +0.2690352f, -0.2936742f, +0.0474754f, +0.2136072f, +0.0668226f, -0.0092877f, +0.1523431f, -0.1587270f,
  -0.0022245f, +0.1485578f, -0.1483812f, -0.3401741f, -0.1030473f, -0.0174395f, -0.0911566f, +0.0405892f,
  -0.0270251f, +0.0009229f, -0.1184475f, +0.2047158f, +0.0799492f, -0.1495643f, -0.2049118f, -0.0519183f,
  +0.1439341f, -0.5917652f, -0.0827183f, -0.1955938f, +0.0566756f, +0.0188698f, -0.1109708f, +0.1562314f,
  +0.4161306f, +0.0670711f, -0.1856140f, -0.0427298f, +0.1682211f, -0.1649497f, -0.3503467f, -0.1249262f,
  -0.1041538f, +0.2076072f, +0.3696012f, -0.3265427f, -0.3010442f, -0.5248750f, +0.0998384f, -0.4231022f,
  +0.0582316f, -0.0622388f, +0.0508205f, -0.0572470f, +0.0348292f, +0.5821185f, -0.0669828f, +0.0109349f,
  +0.3531103f, +0.1926820f, +0.0907656f, +0.0155639f, -0.7078201f, +0.7207919f, +0.0777455f, +0.0168426f,
  +0.1038304f, +0.0015619f, +0.0109998f, +0.2225021f, -0.3951428f, +0.0440608f, +0.4433582f, +0.1123085f,
  +0.0917609f, -0.2585369f, -0.0000022f, +0.3504470f, -0.0876117f, -0.1161792f, +0.0653616f, -0.1033853f,
  -0.0739800f, +0.0689808f, -0.1934978f, -0.2593193f, -0.3094303f, -0.0449792f, -0.2194553f, -0.0124703f,
  +0.1515337f, -0.0433863f, +0.2217186f, +0.5598835f, -0.0616719f, +0.0048575f, +0.0749488f, -0.0707900f,
  -0.1258991f, +0.0329582f, +0.2174110f, +0.1067248f, -0.0798940f, +0.2926214f, +0.0522362f, +0.0142913f,
  +0.1094646f, +0.2132758f, -0.2231933f, +0.6960514f, +0.4247298f, +0.1658121f, +0.1268212f, +0.2674379f,
  +0.0776846f, +0.0392225f, +0.1764791f, +0.1814210f, +0.3486044f, +0.1729890f, +0.1747865f, +0.2162942f,
  +0.0303993f, -0.1279840f, -0.0567228f, -0.0120473f, +0.0724726f, +0.0230167f, +0.0147745f, +0.0903297f,
  -0.1240602f, -0.3658757f, +0.2151437f, -0.2257959f, +0.1275654f, -0.0817847f, -0.1979974f, +0.0571044f,
  +0.1635339f, -0.1128048f, -0.0289083f, -0.0456534f, -0.3564798f, +0.0841908f, -0.1864520f, +0.2331869f
);

const float biases[4] = float[4](
  -0.0081955f, -0.0095023f, +0.0434772f, -0.0061674f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer13 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.4150436f, +0.0916945f, +0.2816746f, -0.0683482f, +0.1227691f, -0.2807267f, -0.0689036f, +0.0080150f,
  -0.2318116f, +0.0353779f, -0.0197687f, -0.0223748f, -0.5402030f, -0.2245796f, +0.2781750f, +0.0072407f,
  +0.2055443f, +0.0855297f, +0.0381277f, -0.1255185f, +0.1986531f, +0.0678061f, -0.0319345f, -0.1251384f,
  +0.1655338f, -0.0708844f, -0.0854709f, +0.2178389f, +0.6593375f, -0.1768325f, -0.1126873f, +0.3310517f,
  +0.0140025f, +0.0115411f, +0.5317446f, -0.0977867f, -0.2671033f, -0.3415181f, -0.0105352f, +0.1442728f,
  +0.2138452f, -0.0846108f, -0.1151059f, -0.0334028f, +0.2492431f, -0.0769993f, +0.0205109f, +0.2009557f,
  +0.2971875f, -0.4138581f, -0.0275988f, +0.0689797f, -0.4794910f, +0.1929359f, +0.0109746f, -0.1487813f,
  -0.0025435f, +0.1758382f, -0.2533887f, -0.3079006f, +0.5572587f, -0.4439645f, +0.1285037f, -0.3723436f,
  +0.0463617f, -0.1636748f, -0.0704195f, +0.0511279f, -0.0955394f, -0.2617483f, -0.2024551f, -0.1026125f,
  -0.1029179f, -0.0051194f, -0.0449718f, -0.1928449f, -0.0060924f, -0.1511789f, -0.0061022f, +0.0974388f,
  +0.3453980f, +0.1708958f, -0.0368681f, -0.3468214f, -0.2383968f, -0.3277302f, -0.0480648f, -0.0219143f,
  +0.1454363f, -0.0157149f, +0.0906472f, -0.3161717f, +0.0500171f, +0.0909347f, -0.1107766f, -0.0335640f,
  +0.0431816f, -0.2224233f, -0.1743919f, +0.1460318f, +0.1129135f, -0.0544105f, -0.2465528f, +0.2152305f,
  +0.0589670f, +0.0846715f, +0.2703712f, +0.4727994f, +0.8504462f, +0.3432294f, -0.1181679f, -0.3450781f,
  +0.1755152f, -0.2996176f, +0.4711202f, -0.7107121f, -0.3728205f, -0.2783574f, -0.0925601f, -0.0845992f,
  -0.1494394f, +0.1826204f, +0.1647455f, -0.0949509f, +0.1808862f, +0.0774788f, +0.0522380f, -0.1857184f,
  +0.1345515f, +0.3384390f, +0.0522261f, +0.2576798f, +0.4581710f, -0.0901243f, +0.0231442f, +0.0799344f,
  +0.1648728f, -0.0401056f, +0.3069540f, -0.3022574f, +0.1497343f, +0.0439371f, -0.3064927f, -0.2461326f,
  -0.1047512f, -0.0395038f, +0.0272898f, +0.1079070f, -0.1553466f, -0.1760073f, -0.0943481f, -0.1908086f,
  +0.1333401f, +0.1249554f, +0.0289956f, +0.1655469f, -0.1708816f, +0.1434119f, +0.1074144f, -0.2824920f,
  +0.5579289f, -0.1788532f, +0.0472393f, -0.4593693f, +0.0143214f, +0.2467423f, -0.0174295f, +0.1537645f,
  +0.1238001f, -0.1087847f, +0.0005741f, +0.0847883f, +0.0069730f, +0.0127236f, -0.1929464f, -0.0676568f,
  +0.6683893f, +0.3219677f, +0.1521589f, +0.1980266f, +0.2805476f, -0.0782896f, -0.2468551f, -0.3671205f,
  +0.6462834f, -0.1837605f, +0.2782241f, -1.2926935f, +0.0088826f, -0.0232930f, -0.2802253f, +0.0000748f,
  +0.1607711f, -0.0755946f, +0.0204274f, -0.0110029f, -0.1011559f, +0.0466801f, -0.0391507f, -0.2101579f,
  +0.1518100f, +0.1289189f, -0.0623986f, +0.2965690f, +0.2515225f, -0.4574695f, +0.3826894f, -0.0013396f,
  +0.0483264f, +0.1803898f, -0.0746479f, -0.1134679f, +0.1411904f, +0.1297989f, -0.3271450f, +0.0079456f,
  -0.2990687f, -0.1163359f, -0.3913463f, -0.1740225f, -0.3032402f, +0.1316620f, -0.5373333f, -0.2268292f,
  -0.3393191f, +0.2760934f, -0.1677633f, +0.0062852f, -0.0826975f, +0.0681174f, -0.3115448f, -0.4417048f,
  -0.2306861f, +0.1398881f, -0.0477771f, +0.0641612f, -0.1434110f, -0.0310627f, -0.1851751f, -0.1064886f,
  -0.1212619f, +0.1795116f, +0.1309988f, -0.0343395f, -0.4234872f, -0.2811851f, -0.0039604f, -0.2807891f,
  +0.2456440f, -0.1398556f, +0.2028048f, +0.0647183f, +0.3720741f, -0.1085729f, -0.0748309f, -0.1603480f,
  -0.4414145f, +0.5697407f, +0.0466899f, +0.2628630f, +0.6038645f, +0.1069244f, -0.1409132f, -0.2638631f,
  +0.2124390f, -0.0538703f, +0.0858910f, +0.0402447f, -0.0301020f, +0.0207375f, +0.2873931f, +0.2085454f,
  +0.1379490f, -0.2814716f, -0.0424746f, +0.0148275f, -0.7276678f, +0.0596682f, +0.4400866f, +0.1758254f,
  +0.3236717f, -0.1086254f, -0.4826902f, -0.0229766f, -0.1017116f, -0.0012917f, +0.0535980f, +0.2770907f
);

const float biases[4] = float[4](
  +0.0849137f, -0.0915027f, -0.0670139f, -0.0046621f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer13 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0317770f, +0.2015930f, +0.1300272f, +0.0687168f, +0.0953305f, -0.0957287f, +0.2191146f, +0.0573753f,
  +0.0523502f, +0.1472606f, +0.4291511f, +0.3140075f, +0.0168202f, -0.1972528f, -0.1053116f, -0.0594958f,
  -0.0997622f, +0.1484368f, -0.0690055f, +0.0353091f, +0.0470299f, +0.1150666f, -0.0195889f, -0.0206233f,
  +0.3508627f, -0.2548971f, -0.2011030f, -0.0786193f, +0.6431659f, +0.3207087f, -0.5062950f, +0.0342000f,
  +0.3777576f, +0.2402188f, -0.0329999f, -0.0252200f, -0.0239830f, +0.1209921f, -0.5088130f, +0.2859918f,
  -0.0419434f, +0.1756082f, +0.2218855f, -0.2227887f, -0.0730909f, -0.0908696f, +0.4133567f, +0.0077060f,
  -0.1708062f, -0.1439397f, -0.0509975f, +0.2267464f, +0.3502291f, +0.0130731f, +0.3400254f, +0.0019383f,
  -0.2420530f, -0.3208047f, -0.4775841f, -0.3761401f, -0.0048230f, -0.0836833f, +0.5252053f, -0.0870817f,
  -0.1051123f, +0.0560559f, +0.1848016f, +0.1423440f, -0.2926502f, +0.1640460f, +0.2068481f, +0.2773960f,
  -0.4865645f, -0.0785464f, -0.2033009f, -0.0598202f, +0.2737088f, +0.2046339f, +0.1142790f, +0.0069336f,
  +0.1066055f, +0.3599419f, +0.2177590f, -0.0129791f, +0.4753035f, -0.2544323f, -0.4656490f, +0.0097978f,
  +0.2832359f, +0.2610014f, +0.3134468f, +0.4425108f, -0.4963062f, -0.1657336f, -0.3712798f, -0.0739789f,
  -0.1194981f, +0.0012984f, +0.1082411f, -0.1607265f, -0.4569212f, +0.0987973f, -0.1046033f, +0.0726699f,
  -0.3569647f, +0.0099635f, -0.3371356f, +0.1201389f, +1.0558995f, +1.0270607f, -0.2085169f, +0.0959209f,
  -0.2785661f, +0.0768423f, -0.3193477f, -0.2524315f, +1.1022592f, -0.3596411f, -0.1233633f, -0.5807750f,
  -0.1488746f, +0.0572648f, +0.0716433f, +0.0013413f, -0.2419974f, -0.2373093f, -0.0455472f, -0.0218977f,
  -0.1682848f, +0.0138353f, +0.0932339f, -0.1603915f, -0.8590669f, -0.2870789f, -0.6103995f, -0.0511205f,
  +0.3840147f, -0.0152780f, -0.0339456f, +0.3406957f, +0.0539527f, -0.1857681f, -0.0520415f, +0.2126736f,
  -0.1866917f, +0.0824661f, -0.4774697f, -0.3074517f, -0.0109280f, +0.0041279f, +0.3457280f, -0.1246809f,
  -0.3274488f, +0.5136377f, +0.1298731f, -0.8543722f, -0.5688592f, -0.0257763f, +0.8368421f, -0.1473475f,
  +0.0593054f, +0.3072596f, +0.1435920f, +0.0187552f, +0.3180033f, -0.2400073f, +0.1656030f, -0.3367831f,
  -0.2109352f, +0.0457926f, -0.1523495f, +0.0218008f, -0.1866936f, +0.4211273f, -0.1453827f, -0.0676157f,
  -0.2580284f, -0.3273624f, -0.0023889f, +0.3668445f, -0.3655183f, +0.5834938f, -0.2716672f, +0.0539509f,
  +0.0040068f, -0.0192516f, -0.1503785f, -0.0910240f, -0.0231852f, -0.1895765f, -0.1877590f, -0.1536384f,
  +0.0137392f, -0.0214308f, -0.0142417f, +0.0182756f, -0.0499177f, -0.0700132f, +0.1510702f, -0.1468024f,
  +0.0930211f, -0.1465738f, +0.0543036f, +0.0052016f, +0.3275489f, -0.3829437f, +0.2471206f, -0.1098698f,
  +0.0820830f, -0.1073329f, +0.0868905f, +0.0159244f, +0.0742978f, -0.1040241f, +0.0950267f, +0.0822067f,
  -0.2270921f, +0.1954974f, +0.4054923f, +0.1959273f, +0.0441219f, +0.0695573f, -0.0461140f, -0.1958407f,
  -0.1962495f, +0.2223021f, +0.3037726f, +0.3072465f, -0.0431846f, -0.3335930f, -0.5214126f, +0.2183605f,
  +0.0680871f, +0.3397841f, +0.1200688f, -0.0230617f, +0.0998948f, -0.0254938f, +0.1580000f, -0.0425854f,
  +0.0463549f, +0.1193534f, -0.1439692f, +0.0660742f, -0.0821943f, +0.1129095f, -0.3318162f, +0.2226505f,
  -0.6952818f, -0.2098738f, -0.3617428f, +1.0194120f, -0.1457552f, +0.1072800f, -0.5455502f, +0.1404616f,
  +0.0097381f, +0.2802202f, -0.1164315f, +0.1768449f, -0.1522508f, -0.2702862f, +0.2067980f, +0.0626648f,
  +0.1983741f, +0.0826818f, -0.1006432f, -0.2766258f, -0.0354701f, -0.2272868f, +0.0401386f, -0.0276635f,
  -0.1696029f, -0.6331478f, +0.1555941f, +0.0000145f, -0.1455826f, +0.2488443f, +0.1746307f, +0.1546722f,
  +0.1130769f, +0.1307770f, +0.1824141f, -0.2227984f, -0.2055649f, +0.2650902f, +0.0043724f, -0.0123020f
);

const float biases[4] = float[4](
  +0.0655249f, -0.0751883f, +0.0542690f, -0.0174059f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer14 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0234629f, +0.0029987f, +0.2361725f, +0.0009075f, -0.0674691f, -0.0478471f, +0.0418092f, +0.1418688f,
  -0.0230393f, +0.0766185f, +0.0736653f, +0.3097265f, +0.1479514f, -0.0368852f, -0.2670656f, +0.0656088f,
  -0.0642126f, -0.0254570f, +0.0680172f, +0.5325316f, -0.1696453f, +0.2365402f, +0.1162429f, -0.3010971f,
  -0.1074703f, -0.2897879f, -0.2083454f, +0.3422979f, +0.3463785f, +0.0980862f, +0.1935323f, +0.1005079f,
  -0.2920216f, -0.4120972f, -0.2414790f, -0.4696474f, +0.1186342f, +0.0256087f, -0.3133536f, -0.0866544f,
  -0.3034619f, +0.4816855f, -0.2063833f, +0.8012566f, +0.1761549f, +0.1727790f, -0.0031440f, -0.2243854f,
  +0.0000116f, -0.2181181f, +0.3504588f, +0.0597944f, +0.0075059f, +0.2836184f, +0.1297778f, +0.0390094f,
  +0.0482280f, -0.1245192f, +0.1828333f, +0.0723169f, -0.0063292f, +0.2716354f, -0.0732814f, -0.0538748f,
  -0.0036917f, +0.0351164f, -0.1300813f, +0.3180960f, +0.0008100f, +0.3197121f, -0.7605666f, +0.2805170f,
  +0.0516724f, +0.0337560f, -0.1593606f, -0.0326492f, -0.0023111f, -0.2957826f, +0.1146535f, +0.0380537f,
  +0.2040374f, -0.1028159f, -0.0218009f, -0.2464596f, +0.2789388f, +0.0261482f, +0.1154455f, +0.4858380f,
  +0.0833853f, -0.1146386f, -0.0295639f, +0.1571802f, +0.0300912f, +0.2683772f, +0.1421222f, +0.3511975f,
  +0.1745812f, +0.2782535f, -0.6749989f, -0.0750760f, +0.1528870f, -0.2829711f, -0.0580249f, -0.0348352f,
  +0.0949385f, -0.2348873f, +0.0856047f, -0.0165429f, -0.4545933f, -0.2306471f, -0.3092545f, -0.1197369f,
  +0.0725713f, -0.0133421f, +0.1153257f, +0.1644835f, -0.1101983f, +0.0945234f, -0.1204186f, +0.4505840f,
  +0.0683785f, +0.0784236f, -0.3452795f, +0.3516955f, +0.1122717f, -0.6734019f, -0.1952525f, +0.0372454f,
  -0.0409730f, -0.3535320f, +0.1397737f, -0.2000301f, -0.2029061f, -0.3351125f, -0.1470705f, +0.0612662f,
  -0.0907070f, +0.0427449f, -0.0606433f, +0.1170525f, +0.0161791f, -0.0202489f, -0.2734982f, +0.1056931f,
  -0.0292623f, -0.1833085f, -0.1335094f, -0.2516703f, +0.2053288f, -0.6020525f, +0.1365660f, +0.1744503f,
  +0.3233796f, -0.3180760f, +0.1157039f, -0.5308290f, +0.1867459f, -0.5406478f, +0.2459720f, +0.2886825f,
  +0.0224728f, -0.1512296f, -0.0474165f, -0.1851499f, -0.0044145f, -0.1951832f, +0.1435263f, +0.5700765f,
  -0.0802224f, -0.3698390f, +0.0393277f, -0.4325504f, -0.2488971f, -0.8584220f, +0.2012200f, +0.2211455f,
  -0.2439037f, +0.0127540f, +0.3044460f, -0.0883779f, +0.1248608f, -0.7498977f, -0.2543274f, +0.2771379f,
  -0.0450761f, -0.0416693f, +0.3168469f, -0.2219329f, -0.0379118f, -0.1250601f, +0.0456683f, +0.2548885f,
  -0.0822882f, -0.2330172f, +0.1589029f, -0.0661216f, -0.1029796f, -0.1880461f, +0.0863206f, +0.2529235f,
  -0.2184069f, +0.1217934f, -0.2433859f, +0.0229922f, -0.1157748f, +0.1067265f, -0.5635390f, +0.1719354f,
  -0.1264650f, -0.2237447f, +0.1716658f, -0.0732714f, +0.0123435f, -0.0113580f, +0.0487496f, +0.2688857f,
  +0.0861631f, +0.1119597f, -0.0660623f, +0.1420203f, -0.3016196f, +0.0437465f, +0.1427076f, -0.2142640f,
  +0.0636826f, +0.0390049f, -0.1136641f, -0.1820818f, +0.2808982f, +0.4627538f, -0.0781233f, -0.1506646f,
  -0.1816042f, +0.0668976f, -0.0175760f, +0.2425783f, +0.0675800f, +0.2979210f, -0.1013996f, -0.0608001f,
  +0.1514590f, +0.4884405f, -0.3913221f, +0.4439868f, +0.2103851f, +0.4183161f, +0.3136026f, -0.2908869f,
  +0.2547543f, +0.0051187f, +0.3168675f, +0.5240699f, -0.1458231f, +0.3650578f, -0.4286044f, -0.3908860f,
  -0.2813762f, +0.0011789f, -0.0035664f, +0.2598552f, -0.0051811f, +0.1267142f, -0.0319584f, -0.2889808f,
  +0.0627888f, +0.0930237f, -0.1593920f, +0.0634713f, +0.0942898f, -0.0848698f, -0.4301890f, -0.1992763f,
  -0.1404939f, +0.2671428f, -0.2648225f, +0.0225816f, -0.1563552f, +0.1879962f, +0.3523436f, -0.1665838f,
  -0.1844958f, +0.1352501f, -0.2602778f, +0.0535783f, +0.2538254f, +0.0443173f, -0.2846726f, -0.2539541f
);

const float biases[4] = float[4](
  +0.0294939f, +0.1097859f, -0.0198768f, +0.0579325f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer14 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0287619f, +0.0390145f, -0.0361563f, +0.2612824f, -0.1659718f, +0.1297352f, +0.0081141f, -0.1208799f,
  -0.1583448f, -0.2317524f, -0.1337890f, +0.2823217f, -0.1286987f, +0.2580168f, -0.2935357f, +0.1682412f,
  +0.0940649f, +0.2683810f, +0.0082129f, +0.4728729f, -0.0074281f, -0.1110670f, -0.2729400f, +0.6145316f,
  -0.1065315f, +0.0272745f, -0.2158709f, +0.2291575f, -0.0450577f, -0.3437957f, -0.0468240f, -0.0856536f,
  -0.0769676f, -0.3863995f, +0.2414939f, -0.1490218f, +0.3746640f, -0.1686893f, -0.5641583f, -0.0182626f,
  -0.4150053f, -0.1790207f, +0.1232131f, -0.0660821f, -0.1180244f, +0.0099458f, +0.0006270f, +0.4448912f,
  +0.1204089f, -0.0833847f, -0.1282875f, +0.0707479f, -0.1209778f, -0.3683012f, +0.0343569f, -0.0247866f,
  +0.2887401f, +0.0646443f, -0.0502599f, +0.2244008f, +0.1201749f, -0.4342237f, -0.1518688f, +0.1682535f,
  +0.1061134f, -0.0963543f, +0.1370171f, -0.1996959f, -0.1237666f, -0.1760857f, +0.4042101f, +0.3796887f,
  +0.1078803f, +0.2065037f, -0.1298840f, -0.2339471f, -0.1276337f, -0.0887714f, -0.0899145f, +0.1555945f,
  +0.2287662f, +0.0709886f, -0.0687875f, -0.0691297f, -0.3075907f, -0.0750211f, +0.1712647f, +0.1326784f,
  -0.0208628f, +0.2425689f, -0.1499740f, +0.1185824f, -0.1259543f, +0.0371542f, +0.0859882f, -0.2355756f,
  +0.2598971f, +0.1442330f, -0.8017378f, -0.2305309f, +0.0027602f, +0.0464638f, -0.5298809f, +0.1011206f,
  +0.3256441f, +0.3410835f, -0.6767130f, -0.3554028f, +0.2136923f, -0.0777950f, -0.0712917f, -0.1441928f,
  +0.0593686f, +0.2713019f, -0.2085912f, -0.1051414f, +0.1691029f, +0.0931026f, -0.0355897f, +0.0610435f,
  -0.0190842f, +0.1119015f, -0.3358783f, -0.1478793f, -0.0246340f, -0.4285484f, -0.3212889f, +0.0837315f,
  +0.3110069f, +0.0899501f, -0.0709261f, -0.1639414f, -0.0761819f, -0.1528596f, +0.4410805f, +0.0185319f,
  +0.2134759f, +0.2328492f, +0.0553437f, +0.0015768f, -0.0537570f, +0.0913272f, +0.3876862f, -0.0347492f,
  +0.4261920f, +0.0577589f, +0.2430218f, -0.0182778f, -0.1834757f, +0.6995716f, -0.1201251f, +0.0308171f,
  -0.3569168f, +0.1046871f, -0.0380002f, +0.3982157f, -0.5800492f, +0.4039390f, -0.1051355f, -0.0285465f,
  -0.0368655f, -0.0925102f, +0.0829952f, +0.0753793f, -0.2436284f, +0.0327360f, -0.1792951f, +0.1078007f,
  +0.1301261f, -0.0320964f, +0.0919163f, +0.0322047f, -0.1252125f, +0.9588089f, -0.3334670f, -0.2118109f,
  -0.0306429f, +0.0159607f, -0.2580139f, +0.3227835f, +0.9065686f, +1.0542386f, +0.2128224f, +0.5300385f,
  +0.1752570f, -0.0390516f, +0.0103095f, +0.0022782f, +0.4489133f, +0.5476588f, +0.1273577f, +0.2604122f,
  +0.1029298f, -0.0332442f, +0.0053964f, -0.0412204f, +0.0053787f, +0.2541474f, -0.0476646f, -0.0723766f,
  +0.1129613f, -0.2701777f, +0.1272314f, +0.2646824f, -0.1272700f, +0.5784888f, -0.5585077f, +0.2548748f,
  +0.2623977f, -0.1439816f, +0.2799806f, +0.0494219f, +0.0338861f, +0.7350722f, -0.1225616f, +0.0330597f,
  +0.3848279f, +0.0005248f, -0.1826273f, -0.1299027f, -0.0800667f, +0.1751383f, -0.2366408f, -0.1443089f,
  +0.1356959f, +0.0574581f, -0.1633063f, -0.0089550f, +0.3431502f, -0.2233760f, +0.1471161f, -0.3004072f,
  +0.1657754f, -0.0614801f, +0.0221834f, -0.4646664f, +0.0452606f, -0.2357785f, +0.0206228f, +0.0512913f,
  -0.1472225f, -0.2574862f, -0.0030841f, +0.1146357f, -0.0145392f, -0.2079139f, -0.0832894f, -0.1373164f,
  +0.0751545f, +0.6256897f, -0.2230962f, +0.0956334f, +0.2326944f, -0.1383878f, -0.3996911f, +0.0188533f,
  -0.2409768f, -0.3748978f, +0.2905020f, +0.0477083f, +0.1497390f, -0.2937320f, -0.2682087f, -0.0468082f,
  -0.0966547f, +0.0831255f, +0.1552874f, -0.1153586f, +0.1181719f, +0.2360832f, -0.0169321f, -0.1472267f,
  -0.0921162f, +0.4311033f, -0.1559121f, +0.1625900f, +0.2365960f, +0.2193617f, -0.2846224f, +0.0599760f,
  -0.1979409f, -0.1619289f, +0.2267306f, -0.1873305f, +0.0241643f, +0.0897032f, +0.4892665f, +0.0357716f
);

const float biases[4] = float[4](
  -0.0286310f, -0.0244349f, +0.0236635f, +0.0326128f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer15 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2603034f, -0.0765126f, -0.2762888f, -0.1908508f, +0.0446081f, -0.2191654f, -0.5229237f, -0.0004471f,
  -0.2779887f, -0.0362249f, -0.4278121f, -0.8896394f, -0.1516318f, -0.1497397f, -0.0595679f, +0.0418641f,
  +0.0873176f, +0.0410491f, +0.1762819f, -0.0195469f, +0.2191730f, -0.0001877f, -0.1645430f, +0.0642917f,
  -0.0263741f, +0.1380046f, +0.0477455f, +0.1062140f, -0.6677528f, +0.1998322f, +0.0562715f, +0.1599691f,
  -0.2834567f, -0.0498860f, +0.3888822f, +0.6685719f, -0.6036888f, +0.6391262f, -0.2765436f, -0.1951330f,
  -0.2503710f, -0.1729867f, +0.2285601f, -0.0311447f, -0.3610857f, -0.2130266f, -0.4185375f, -0.4514358f,
  -0.0033507f, +0.0589631f, +0.2921394f, -0.0448616f, +0.0342052f, -0.0385530f, -0.0497206f, -0.0631805f,
  -0.0310419f, +0.0767619f, +0.2146547f, +0.0350437f, +0.1394960f, -0.1189096f, -0.1585083f, +0.0189374f,
  -0.0977988f, -0.0783032f, -0.0396763f, +0.1057607f, -0.0271578f, -0.1277509f, +0.1688044f, +0.1742395f,
  -0.1520907f, +0.0572770f, -0.2141082f, -0.1894596f, +0.9472075f, +0.8785173f, -0.6039954f, -0.1744974f,
  +0.0070363f, +0.0837521f, +0.0254571f, +0.4663440f, -0.0594560f, -0.2062346f, +0.1903197f, -0.1442802f,
  -0.1680760f, +0.2996581f, -0.1472295f, +0.0898969f, +0.0348568f, +0.1021918f, -0.1702576f, -0.0659786f,
  +0.4180374f, +0.1785513f, +0.6388978f, -0.2309881f, -0.3423772f, +0.5073135f, -0.0305620f, -0.2534732f,
  -0.0690437f, +0.1697500f, +0.0000129f, -0.3237437f, -0.2331191f, +0.0939511f, +0.3501931f, +0.0316744f,
  -0.1303747f, +0.1256729f, +0.0712840f, -0.2009264f, -0.1143176f, -0.0576092f, -0.0461775f, +0.1078004f,
  -0.0691224f, +0.0662970f, +0.3208977f, -0.1651679f, +0.1803423f, +0.0819237f, -0.5467821f, -0.0910954f,
  +0.4700245f, +0.2312364f, +0.2437379f, -0.0032680f, +0.2807560f, -0.0712092f, +0.0542861f, -0.0201465f,
  +0.1418869f, +0.0696674f, +0.1372626f, +0.2692804f, +0.1569701f, +0.0392946f, +0.0895324f, -0.0675884f,
  +0.0681918f, +0.0372387f, +0.4752508f, -0.0402525f, +0.2822152f, +0.2253930f, +0.0823058f, -0.0374698f,
  -0.2247902f, -0.1171278f, -0.0369160f, +0.0034018f, -0.2443693f, -0.0841750f, +0.1951957f, +0.1895687f,
  +0.1273627f, +0.1506662f, +0.0673512f, -0.0641003f, -0.1069154f, -0.0988458f, +0.1551664f, -0.1188614f,
  -0.0364554f, +0.4982470f, +0.5086081f, -0.0247877f, +0.1452777f, +0.1820641f, +0.0213805f, -0.0903697f,
  -0.1039320f, +0.0586476f, -0.2343347f, +0.0952863f, -0.0314372f, -0.1462788f, -0.0387381f, -0.0168420f,
  +0.0550023f, -0.0908077f, -0.0370548f, -0.1316834f, +0.2043257f, -0.2350767f, +0.2630655f, -0.2115378f,
  +0.0643258f, +0.2239462f, +0.2978618f, -0.2422506f, -0.0257495f, +0.1142974f, +0.0588897f, +0.1908544f,
  -0.3789283f, -0.4323479f, +0.0984202f, -0.0588105f, -0.1924665f, -0.3405864f, +0.2006093f, +0.1411392f,
  +0.0572524f, -0.0785951f, +0.1764562f, +0.0195863f, -0.0608889f, -0.0937072f, -0.1557495f, +0.0370853f,
  -0.0054407f, -0.0137880f, -0.2343267f, +0.2547519f, +0.0666576f, -0.0072835f, +0.3398185f, -0.0779024f,
  -0.4466347f, +0.3530330f, -0.2483016f, +0.2714517f, +0.0385749f, +0.3885313f, +0.1185358f, +0.1159054f,
  -0.4143761f, +0.2939717f, +0.0848462f, +0.1204226f, +0.0197056f, +0.3661572f, +0.2014156f, -0.0125059f,
  +0.2375448f, +0.1390667f, -0.1686630f, -0.0715495f, -0.3024776f, +0.2049446f, -0.0482870f, -0.1409219f,
  +0.1305761f, +0.1639499f, +0.0909551f, +0.1968974f, -0.3198192f, +0.2762280f, +0.1487851f, +0.0654349f,
  -0.4805131f, +0.1364827f, +0.2117385f, +0.2604626f, +0.1326987f, +0.2349474f, +0.3333643f, -0.0433360f,
  +0.1621305f, -0.0038993f, +0.2600336f, -0.1240758f, -0.1154408f, +0.2601704f, +0.2886662f, +0.0851911f,
  -0.0539119f, -0.1359733f, -0.0060319f, +0.0591567f, -0.2133162f, -0.0315763f, +0.1604975f, +0.1533789f,
  +0.0676613f, +0.1501904f, +0.0194831f, +0.2114550f, -0.0154253f, +0.0270574f, +0.2063325f, +0.3615396f
);

const float biases[4] = float[4](
  -0.0588513f, -0.1553154f, +0.0734386f, +0.0038738f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer15 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1217327f, +0.3852415f, +0.1110083f, -0.1421447f, +0.0414144f, -0.1786456f, +0.0656078f, +0.0211391f,
  +0.0644669f, +0.0223855f, +0.2700351f, -0.0343085f, +0.1791577f, -0.2508651f, +0.1019703f, -0.0922502f,
  -0.0837175f, -0.2000443f, +0.0368406f, -0.2479732f, +0.2268351f, +0.0116843f, -0.1815135f, -0.2419074f,
  +0.1333984f, -0.0347698f, +0.0148057f, -0.1953552f, +0.1690437f, +0.0080794f, -0.1586478f, +0.1809045f,
  -0.3587310f, -0.0555284f, +0.3259076f, -0.3018796f, +0.1553562f, +0.3980565f, +0.2790200f, +0.3214310f,
  -0.2878515f, -0.2134367f, -0.0956377f, +0.0761912f, -0.0367873f, -0.0071212f, -0.2117786f, +0.0151579f,
  -0.0645487f, +0.3241527f, +0.2664284f, -0.0097536f, +0.1219575f, +0.0143574f, -0.1867629f, +0.0696227f,
  -0.2409028f, +0.0178183f, -0.0799849f, -0.2798804f, +0.2226729f, -0.3651260f, +0.0476946f, -0.0481189f,
  -0.1818794f, +0.0020398f, +0.0018289f, -0.1066855f, +0.3705010f, -0.3993993f, +0.1548739f, -0.0301909f,
  +0.1171289f, +0.0986436f, +0.0654369f, -0.0104157f, -0.0853046f, -0.0132301f, -0.0568164f, +0.0225759f,
  +0.0384480f, +0.0115621f, -0.1595143f, +0.0831651f, +0.1299272f, +0.0490674f, -0.1683410f, -0.1037068f,
  -0.1238303f, +0.1462249f, -0.0344788f, +0.1313228f, -0.0204689f, +0.1579555f, -0.1489148f, +0.0574860f,
  +0.1789282f, +0.6846229f, +0.2916366f, +0.0726704f, -0.6916630f, -0.5985084f, +0.5150590f, +0.0984396f,
  +0.3968600f, -0.6051358f, +0.2765700f, +0.1370110f, -0.1329367f, -0.2615059f, +0.0899601f, -0.2186591f,
  -0.1530720f, +0.0377770f, -0.0124435f, +0.2428307f, -0.1119060f, +0.1045077f, -0.2288308f, +0.2572393f,
  -0.1094987f, -0.0110968f, +0.0346829f, -0.4377287f, +0.4785345f, +0.2915249f, +0.2559073f, -0.1948402f,
  -0.1132110f, +0.1456671f, -0.3754911f, -0.1239626f, +0.3554166f, -0.2759927f, +0.4478967f, +0.0353804f,
  -0.0650883f, +0.0653546f, +0.1120506f, +0.0844607f, +0.1581708f, +0.0447003f, -0.2098444f, -0.1569260f,
  +0.1990944f, +0.5483809f, +0.1526410f, -0.1594258f, -0.1600749f, -0.2559272f, +0.2639094f, -0.0356739f,
  +0.0215630f, +0.6413938f, +0.4662408f, -0.3360690f, -0.3639772f, -0.5551687f, +0.1492345f, -0.0452612f,
  +0.1062263f, +0.3321985f, +0.0415519f, -0.1755314f, +0.1395652f, -0.2142881f, -0.0450511f, -0.1122837f,
  +0.1059229f, -0.0114426f, +0.0640087f, -0.3129798f, +0.1255034f, +0.0319331f, -0.1327780f, +0.3794453f,
  -0.1357198f, -0.2549264f, +0.5892997f, -0.2008890f, +0.1431046f, +0.5317637f, -0.0290205f, -0.3119890f,
  +0.0865381f, -0.1982806f, +0.2015345f, +0.1188570f, -0.0753089f, +0.0118133f, -0.8535317f, -0.3646801f,
  -0.2057816f, +0.1759612f, +0.3537915f, +0.1017717f, -0.0439244f, -0.0992079f, -0.1057623f, -0.0081653f,
  -0.1730160f, +0.0044330f, -0.0126217f, +0.3028854f, +0.8214154f, -0.4786547f, -0.2235699f, +0.1500823f,
  +0.0297550f, -0.0231561f, +0.5051278f, +0.0659631f, -0.0122391f, -0.0116193f, -0.1997893f, -0.1818518f,
  -0.2338340f, +0.2701221f, +0.1090527f, -0.0143031f, +0.0613155f, +0.0309560f, +0.0629018f, +0.0211946f,
  -0.0260307f, -0.3870292f, -0.1965097f, -0.1847645f, +0.3820226f, +0.2371245f, -0.1363051f, +0.1910838f,
  +0.0528606f, -0.4241564f, -0.4259890f, -0.0449984f, +0.0141739f, +0.0920634f, -0.3194640f, +0.2814448f,
  +0.0126295f, +0.1635237f, +0.3866524f, +0.0789684f, +0.0980698f, +0.1248350f, -0.3278402f, +0.2099218f,
  -0.2068512f, -0.0752451f, +0.2421165f, +0.2615657f, -0.1591375f, -0.0863265f, -0.1024648f, +0.4175729f,
  +0.0200406f, +0.0700854f, +0.2580323f, +0.3317086f, +0.2164580f, +0.2736908f, -0.4977133f, -0.2543600f,
  +0.0834837f, +0.0525391f, +0.1308986f, +0.0372061f, +0.3283554f, +0.0254777f, -0.1222965f, +0.0439497f,
  +0.0567286f, +0.0668304f, +0.2267546f, -0.0116128f, +0.1374205f, -0.0263743f, -0.7052813f, -0.1715420f,
  -0.1702622f, -0.1521197f, -0.2979920f, -0.1506429f, +0.0571468f, +0.0811671f, -0.0444227f, +0.1822881f
);

const float biases[4] = float[4](
  +0.1093132f, +0.0389179f, -0.0302797f, -0.0902033f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer16 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1413060f, -0.1476705f, +0.2721939f, +0.1754529f, +0.1445187f, +0.2444781f, +0.0386929f, +0.2228794f,
  +0.1911232f, -0.1172997f, -0.0254278f, -0.0296081f, +0.0132870f, -0.2931873f, -0.0098721f, +0.1032522f,
  -0.0085501f, +0.1682314f, +0.1144081f, +0.1031528f, +0.1855631f, -0.1105529f, +0.1453110f, +0.1196656f,
  +0.2292801f, +0.1600319f, -0.0331741f, +0.0736137f, +0.2764953f, +0.2305024f, -0.4450517f, +0.4053990f,
  +0.0139530f, +0.0558979f, -0.0269341f, -0.2035903f, +0.1104602f, -0.3669512f, +0.6523486f, +0.1841512f,
  +0.1283081f, -0.1124643f, +0.0422276f, +0.2441586f, -0.2539801f, -0.4502764f, +0.1254528f, -0.3282016f,
  -0.0017645f, +0.2978443f, -0.0272613f, -0.1215816f, +0.1876327f, +0.0415550f, +0.0883500f, +0.0220979f,
  +0.1717674f, +0.1789407f, +0.2751058f, +0.0117955f, -0.2443269f, -0.2662025f, -0.1039077f, +0.1838659f,
  +0.4871440f, -0.1312739f, -0.1863497f, -0.0898810f, +0.1671169f, +0.0628362f, +0.1506258f, +0.1308851f,
  -0.0782110f, +0.0262290f, -0.1673747f, +0.1744911f, -0.0757099f, +0.0329879f, +0.0117100f, +0.1652431f,
  -0.0929647f, -0.1648516f, -0.1701649f, +0.0640012f, -0.1549846f, +0.0298105f, +0.0518107f, +0.0493237f,
  -0.0512433f, -0.2067844f, -0.2881205f, +0.0187818f, -0.0189484f, +0.1257540f, -0.1251646f, -0.1501126f,
  -0.0541033f, +0.1414322f, +0.0573792f, -0.0644054f, +0.1214278f, -0.1655473f, -0.2856101f, -0.0062868f,
  +0.3714838f, -0.2450763f, -0.1703335f, -0.4195206f, +0.0607655f, +0.2351197f, -0.0308869f, +0.1471025f,
  +0.3098477f, -0.2248258f, -0.3979529f, +0.1393551f, +0.3192869f, -0.4224059f, +0.1126928f, -0.1718201f,
  -0.0898862f, -0.0580230f, +0.0295790f, -0.2481381f, +0.0935044f, -0.0195359f, -0.2248146f, +0.1304367f,
  -0.0042771f, -0.2564689f, -0.0407256f, -0.4220964f, -0.0052620f, -0.2116772f, -0.5145260f, -0.2439271f,
  +0.1245417f, -0.1541459f, -0.0770230f, -0.0793963f, +0.0758827f, +0.0932700f, +0.0402595f, +0.0694607f,
  -0.0616607f, +0.2289198f, -0.1251253f, +0.0619576f, +0.0247861f, -0.1231526f, -0.0297347f, +0.2168051f,
  -0.1418836f, +0.2171350f, -0.1748604f, +0.0227658f, +0.0624579f, +0.2263294f, -0.2161650f, -0.0547785f,
  +0.1114619f, -0.0974868f, -0.0083280f, -0.2765502f, -0.0222208f, -0.3651290f, -0.2479666f, -0.2932200f,
  +0.0101994f, -0.0180496f, +0.0813887f, +0.0517688f, -0.0003161f, +0.1999844f, -0.0494236f, +0.0144677f,
  +0.1806531f, -0.0791945f, -0.1145903f, -0.1964148f, -0.3127949f, +0.3969475f, +0.0295478f, -0.4265625f,
  -0.0441055f, -0.2619777f, -0.4244664f, -0.2228531f, +0.2759740f, +0.0550374f, -0.2191298f, -0.3184505f,
  -0.2233366f, +0.0284358f, +0.0398408f, +0.0361891f, +0.0523006f, +0.0358536f, -0.0795143f, +0.2637556f,
  +0.2820306f, +0.2474918f, -0.1666322f, -0.1702921f, -0.0816284f, -0.2779430f, -0.3260390f, -0.0826024f,
  +0.0732486f, +0.0900125f, +0.0402256f, -0.1903827f, +0.1842486f, +0.0989643f, -0.0681335f, +0.0722414f,
  -0.2355084f, -0.1396484f, -0.0312505f, +0.1177039f, -0.1215409f, +0.0406739f, +0.1221934f, +0.2340918f,
  +0.0771157f, -0.2412945f, -0.3894598f, -0.0477719f, -0.1941797f, +0.2854350f, +0.0272477f, +0.0027748f,
  +0.0411865f, +0.1386363f, +0.1497240f, +0.2151857f, +0.0536110f, +0.1630553f, -0.0460172f, -0.1039007f,
  -0.5701162f, +0.1967418f, +0.0719406f, -0.1186112f, +0.0863880f, -0.3738237f, +0.0283054f, -0.3259832f,
  +0.6236803f, -0.1300474f, -0.2710430f, -0.1653390f, +0.1374069f, -0.3013200f, +0.0564138f, -0.2697790f,
  +0.1028157f, -0.2096202f, +0.0753877f, +0.1721048f, +0.0555438f, -0.4192496f, +0.1054271f, +0.3779345f,
  +0.3349009f, -0.0075317f, -0.1097261f, +0.0674053f, -0.0683002f, +0.0087256f, -0.0351029f, +0.0724676f,
  -0.2930380f, -0.3383888f, -0.1528407f, +0.1672529f, -0.1476420f, +0.0690693f, +0.1991337f, +0.2455728f,
  +0.0957172f, -0.1150695f, -0.0256799f, -0.1109758f, -0.1434462f, +0.1041513f, +0.0488143f, -0.0322554f
);

const float biases[4] = float[4](
  -0.0176039f, +0.0704596f, +0.0494901f, +0.0324719f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer16 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1536873f, -0.3334419f, +0.4743950f, -0.0324232f, +0.0835002f, +0.0444361f, +0.1595931f, -0.1656361f,
  +0.3316122f, +0.0827622f, +0.2633850f, -0.0921749f, -0.0221632f, +0.2256136f, -0.1061022f, +0.0202568f,
  +0.3240564f, +0.1812910f, +0.1044692f, +0.0686140f, +0.2388599f, -0.3900867f, +0.0235068f, -0.2651594f,
  -0.0064749f, +0.3139383f, -0.0503633f, -0.3056523f, +0.0601781f, -0.1967403f, -0.2220491f, +0.0130182f,
  +0.9948629f, +0.1653847f, -0.0250517f, -0.5247366f, -0.1722728f, +0.2065517f, -0.5436169f, +0.0827883f,
  +0.3036103f, +0.3841496f, -0.0932547f, -0.0116425f, +0.3241263f, +0.0318859f, -0.0503968f, +0.1990440f,
  -0.0486776f, +0.1815312f, +0.3090273f, -0.2786132f, +0.0596048f, -0.3444553f, +0.0253092f, -0.0121209f,
  +0.4602595f, -0.0716323f, +0.1681562f, -0.4344655f, -0.0863114f, -0.0029669f, +0.2193123f, -0.2512227f,
  +0.0864037f, -0.3360488f, -0.2522059f, -0.0164597f, +0.2399233f, +0.1660824f, +0.2721087f, +0.0651030f,
  +0.0240684f, -0.0611848f, -0.1353274f, +0.0764759f, -0.1331843f, +0.0255116f, -0.0780320f, +0.2171631f,
  -0.4326345f, -0.0371685f, +0.0662385f, +0.2990805f, +0.0137828f, +0.2178079f, +0.4377002f, +0.5444978f,
  -0.2046340f, -0.0515779f, -0.0432876f, -0.0085775f, -0.3142230f, -0.0373327f, +0.0128359f, +0.0662349f,
  +0.5503016f, -0.0789460f, -0.0793274f, +0.3328115f, +0.0126485f, +0.1330286f, -0.0626862f, +0.0148598f,
  -0.1378456f, -0.0013344f, +0.0520328f, +0.1325956f, -0.0966612f, -0.3170652f, +0.2696007f, +0.2069195f,
  -0.1184394f, -0.4666362f, -0.0069181f, +0.0701581f, -0.1142195f, +0.2108648f, -0.0593696f, -0.2110059f,
  +0.2146423f, -0.1838766f, -0.0192790f, -0.0161535f, -0.2856753f, +0.0477429f, +0.0527507f, -0.0082556f,
  -0.4945300f, -0.2961175f, +0.1718694f, +0.0135281f, -0.0213867f, +0.1331156f, +0.0712681f, -0.1727064f,
  -0.3149682f, -0.6800125f, -0.0474228f, +0.3056648f, -0.0404655f, +0.0178524f, +0.1916950f, +0.0177956f,
  +0.2487968f, -0.2839867f, -0.0044046f, -0.1120070f, -0.3723727f, +0.2585831f, +0.2770128f, -0.0262330f,
  -0.0185618f, -0.2709403f, +0.5532549f, +0.0893394f, +0.1098366f, -0.7556385f, -0.0980984f, +0.1547549f,
  +0.1915445f, +0.2250852f, -0.1485628f, +0.2463959f, -0.0742901f, -0.4886710f, -0.0416633f, -0.0285368f,
  +0.2637316f, -0.0833109f, -0.3660636f, -0.2600071f, -0.0907751f, +0.0745882f, +0.2705715f, +0.0489034f,
  -0.4508801f, -0.2765677f, +0.3706740f, -0.4139352f, -0.3980314f, -0.1225072f, -0.3580034f, +0.1089091f,
  -0.2825636f, +0.1809256f, -0.0552533f, +0.3029418f, -0.0776472f, -0.3054058f, -0.0404910f, +0.2749289f,
  +0.0040619f, +0.2282038f, +0.0302451f, -0.2291336f, -0.0123367f, +0.1870624f, -0.0652588f, +0.3561448f,
  +0.4790942f, +0.0299203f, +0.1669402f, +0.1438403f, +0.0876734f, +0.1848224f, -0.0522074f, -0.1512519f,
  +0.0517289f, +0.8244444f, +0.2123774f, +0.0366608f, -0.0408718f, +0.0137329f, -0.0842822f, +0.1715692f,
  -0.0545324f, -0.1664922f, -0.0619073f, +0.0682542f, -0.0400394f, -0.0410025f, +0.2234938f, -0.0785535f,
  -0.0534480f, -0.0014610f, -0.0800270f, +0.2157059f, +0.1824184f, +0.0962499f, -0.2263301f, -0.0215262f,
  -0.2030417f, -0.0775987f, -0.2201376f, -0.1544371f, -0.2645690f, -0.1004429f, +0.0345601f, +0.1411561f,
  +0.0823161f, +0.0535533f, +0.1602115f, +0.0737941f, -0.3305798f, +0.1361786f, +0.5977684f, +0.0072781f,
  +0.5469674f, -0.2635089f, +0.0020206f, +0.2589634f, -0.4852761f, -0.0333388f, +0.0502652f, -0.3332522f,
  +0.1314623f, +0.2869087f, +0.1818801f, -0.0683852f, -0.2235845f, -0.0675783f, -0.0241171f, -0.3298764f,
  +0.2204145f, +0.1169538f, +0.0516198f, +0.1896095f, +0.0026050f, -0.1170546f, +0.2009751f, +0.2487800f,
  -0.0389274f, +0.2755926f, -0.2976364f, +0.2000294f, -0.0386097f, +0.1821608f, +0.2509111f, +0.1007278f,
  -0.2300493f, +0.1404713f, +0.0334563f, +0.0252234f, +0.0951764f, -0.2181083f, -0.1427390f, +0.0427542f
);

const float biases[4] = float[4](
  +0.0054945f, +0.0473891f, -0.0016038f, +0.0639670f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer17 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1573679f, +0.1290903f, -0.1581682f, -0.2008768f, +0.0006361f, +0.3438774f, -0.1474854f, -0.2696626f,
  -0.2494736f, +0.4552999f, -0.0026545f, -0.3857617f, +0.3036181f, -0.0270114f, -0.0037591f, -0.1869234f,
  -0.1229840f, -0.2680262f, +0.0474655f, +0.0723690f, +0.2172158f, -0.2186708f, +0.0297795f, -0.2849406f,
  -0.1123156f, -0.1698584f, +0.7938230f, +0.1018903f, +0.2918184f, +0.0237960f, +0.1899546f, +0.0643148f,
  +0.1821244f, +0.1259769f, +0.0489102f, -0.3119068f, -0.0637814f, +0.0855922f, -0.3671834f, +0.0085540f,
  -0.3676614f, +0.0656671f, +0.0088753f, +0.0476828f, -0.0632083f, -0.3196733f, -0.0943507f, -0.1784754f,
  -0.4857443f, +0.1098195f, +0.1855964f, -0.0592757f, +0.0159208f, -0.3737741f, -0.1174449f, +0.3804676f,
  +0.2905923f, -0.0082242f, +0.2747297f, +0.1139598f, +0.3879405f, +0.2485296f, -0.1678624f, +0.1805303f,
  +0.1252794f, -0.0158797f, -0.1873131f, +0.0088695f, +0.2499636f, +0.0702734f, +0.1452053f, +0.1083813f,
  +0.1238719f, +0.1270136f, +0.0986664f, +0.0512420f, +0.1199328f, -0.0349015f, +0.0349317f, +0.0590209f,
  -0.1927641f, +0.3993557f, +0.2742046f, -0.3056805f, -0.1019171f, -0.1495678f, +0.3044219f, -0.2452307f,
  -0.1137894f, -0.1610162f, -0.0326864f, -0.2249197f, +0.0807265f, -0.0028364f, -0.1311021f, -0.3394773f,
  -0.0539882f, -0.0033123f, +0.1997173f, -0.0491375f, +0.0204286f, +0.2718903f, -0.0983396f, -0.0560424f,
  -0.3311833f, -0.0707964f, +0.0932353f, +0.3356179f, +0.4894002f, -0.3210180f, +0.4328069f, -0.1512445f,
  +0.6369064f, +0.1354741f, -0.1378161f, -0.6281807f, +0.4302008f, -0.3791262f, -0.0920420f, -0.2832442f,
  +0.0904253f, +0.0369671f, +0.2398902f, +0.0730025f, +0.1305021f, -0.0079550f, -0.0622920f, +0.0499704f,
  +0.4142195f, +0.0972206f, -0.2152176f, +0.4087480f, +0.3490071f, -0.6770759f, +0.1959798f, +0.1305622f,
  +0.2134235f, +0.2803113f, +0.1314025f, -0.2044903f, +0.2374239f, -0.0400435f, +0.2529603f, -0.1106389f,
  +0.0943792f, -0.0199894f, +0.0760392f, -0.1907732f, +0.3659134f, +0.1298841f, -0.0066060f, -0.0072458f,
  -0.1647521f, +0.5093135f, -0.3529762f, -0.2302139f, +0.0444023f, +0.0421915f, -0.3530403f, -0.1732606f,
  -0.0769155f, -0.0532828f, +0.1668401f, +0.0653115f, -0.1044562f, -0.0086263f, -0.2463008f, -0.1132727f,
  -0.5325931f, -0.2034629f, +0.4980515f, +0.0327301f, +0.4353554f, +0.2132404f, -0.0077424f, +0.0053207f,
  +0.4117346f, +0.1413811f, -0.2786731f, -0.0333581f, +0.4068136f, +0.5146397f, +0.4691180f, -0.1574008f,
  +0.4002266f, +0.0694429f, +0.0546128f, -0.0887027f, -0.2912595f, -0.0090295f, +0.5654740f, +0.1028304f,
  -0.1686478f, +0.1409518f, +0.5064228f, +0.0088715f, -0.2533807f, +0.0095537f, -0.3034638f, +0.0360279f,
  -0.4429285f, -0.0340569f, +0.7810059f, +0.0582017f, -0.0927498f, -0.2306502f, +0.0447683f, +0.6715026f,
  -0.2793627f, -0.2156741f, +0.2027447f, -0.3083692f, -0.3466024f, +0.3708851f, -0.3501470f, -0.0334792f,
  +0.3523580f, +0.5695151f, +0.2185189f, +0.0431221f, +0.5252193f, +0.2870196f, -0.3323586f, +0.1967606f,
  -0.2297194f, -0.0304006f, -0.4052988f, -0.2804149f, +0.0416386f, +0.4501710f, +0.5411794f, +0.0721250f,
  -0.1935295f, +0.0499494f, +0.1048983f, -0.0907310f, -0.2908963f, +0.0421430f, -0.3295986f, -0.1726952f,
  -0.2880322f, -0.2798758f, -0.1226429f, -0.1031139f, -0.6481119f, +0.5761718f, -0.0678737f, -0.0669655f,
  +0.0033024f, -0.5725062f, -0.0054387f, +0.3590654f, -0.0770104f, -0.8763674f, -0.1771836f, -0.1966797f,
  +0.0053643f, +0.2342339f, +0.0404495f, +0.2172017f, +0.5908560f, +0.0554443f, +0.1372588f, +0.1912121f,
  -0.0791850f, -0.1446324f, +0.1066354f, -0.1524303f, -0.3149831f, +0.1046203f, -0.0374789f, +0.0605142f,
  -0.0374516f, +0.2646186f, +0.2857973f, -0.1281701f, +0.3579826f, +0.2089555f, -0.0783905f, -0.0434299f,
  +0.1960504f, +0.0809989f, -0.0870060f, -0.0081880f, +0.0775989f, +0.2437489f, +0.0410383f, +0.1597177f
);

const float biases[4] = float[4](
  -0.0656556f, -0.0036911f, -0.0844595f, -0.0659206f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer17 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1161257f, +0.0223427f, -0.1216850f, +0.0678016f, -0.1813260f, -0.1826906f, -0.1130115f, -0.1006050f,
  +0.1485650f, -0.3159345f, -0.1991888f, +0.2032353f, -0.2712788f, +0.1462781f, -0.3286483f, +0.1658531f,
  -0.4230564f, +0.0117477f, +0.2100540f, +0.0918178f, -0.0822738f, +0.1185522f, +0.3610428f, +0.1803934f,
  -0.0238632f, -0.2676624f, -0.2879947f, -0.0754843f, -0.3857848f, -0.2782823f, -0.0902004f, -0.2588997f,
  +0.2114629f, +0.3338490f, +0.3211394f, -0.2858508f, -0.7954023f, -0.0792591f, +0.1281444f, -0.2673457f,
  -0.0814538f, +0.2323863f, -0.1784849f, -0.0910449f, -0.1468488f, +0.0377414f, +0.5379610f, +0.1213433f,
  -0.1670853f, -0.3996901f, -0.2869577f, +0.0065658f, -0.6271456f, +0.0631011f, -0.0272987f, -0.2696456f,
  -0.3567792f, -0.0923403f, -0.1613946f, -0.2417081f, -0.3336393f, +0.7211599f, -0.1563918f, -0.2623247f,
  +0.0442445f, -0.0375691f, -0.0936365f, -0.1283095f, -0.2337670f, +0.1297150f, -0.1558107f, -0.0631988f,
  -0.3521423f, -0.1563239f, -0.0591266f, +0.0163451f, +0.1107624f, +0.0237390f, +0.3299672f, -0.3550301f,
  +0.3196145f, +0.0440478f, +0.1253922f, +0.2010611f, +0.1959550f, +0.1241653f, -0.3554555f, +0.0092042f,
  +0.0334867f, +0.0382509f, -0.2255868f, -0.0867648f, +0.0207263f, +0.1747204f, +0.1858461f, -0.0211033f,
  -0.0357724f, +0.0588486f, +0.0488152f, +0.0661714f, -0.3568219f, +0.0785903f, +0.3807794f, -0.2480744f,
  +0.6544101f, -0.0379261f, -0.1411555f, +0.0152814f, -0.2340386f, +0.2714643f, -0.4149660f, +0.5650402f,
  +0.0661543f, -0.0024844f, -0.2215728f, +0.0489581f, -0.0562222f, +0.2031833f, +0.0806787f, +0.4093743f,
  +0.1172025f, -0.0755601f, -0.1628951f, -0.0460019f, -0.1823441f, -0.4876041f, +0.2493932f, -0.0959126f,
  -0.0390735f, +0.0284701f, +0.1379783f, +0.1545148f, -0.0008931f, -0.1755937f, -0.1899102f, -0.0103650f,
  -0.0946892f, -0.1042409f, -0.1767862f, +0.0311497f, -0.0477728f, -0.0241664f, -0.1962351f, +0.0230492f,
  +0.0618346f, -0.0343210f, -0.0862301f, +0.1495142f, -0.0086754f, +0.0070330f, +0.2692007f, +0.1123657f,
  +0.1691426f, -0.0108555f, -0.0003053f, -0.0014473f, -0.0710693f, +0.0958459f, +0.2281134f, +0.3180600f,
  -0.0971444f, +0.1675703f, -0.0499442f, +0.1478698f, -0.1058735f, +0.1154350f, +0.2612516f, +0.1224954f,
  +0.0396240f, -0.1456049f, +0.1466648f, +0.0505921f, -0.3021187f, +0.0176252f, +0.6762605f, -0.1415941f,
  -0.2043409f, +0.2957892f, -0.1270303f, +0.1923245f, +0.8941683f, +0.0379551f, +0.8920260f, -0.0032165f,
  +0.0774973f, -0.1501536f, -0.0310253f, +0.0309369f, +0.3030730f, +0.0072758f, -0.3556264f, +0.1636779f,
  +0.4760576f, -0.0797540f, -0.3191173f, -0.1096340f, -0.1192257f, -0.2147637f, +0.1403649f, +0.0746612f,
  -0.0836292f, +0.0611144f, -0.1949267f, -0.0596404f, +0.3053537f, -0.0471838f, +0.1369516f, +0.0463093f,
  +0.0375386f, +0.1895936f, +0.0663377f, +0.1788269f, +0.1515532f, +0.1948969f, +0.1187829f, +0.1364811f,
  +0.1089981f, -0.3513894f, +0.1486204f, +0.1541913f, -0.0979398f, +0.1052267f, -0.2736264f, +0.0689927f,
  -0.1902902f, +0.0257405f, -0.0958814f, +0.0326037f, -0.2653101f, -0.1155816f, +0.2704685f, +0.3320749f,
  +0.0359395f, -0.0439388f, +0.0022945f, -0.0067793f, +0.0989829f, -0.0384275f, +0.0490151f, +0.0293972f,
  -0.6723884f, -0.5054533f, -0.3917856f, -0.4212983f, -0.7853776f, +0.5690228f, -0.1273936f, +0.3166916f,
  +0.3813876f, +0.0202566f, -0.0744895f, +0.1910465f, +0.3568722f, -0.0743675f, -0.4972492f, -0.2138153f,
  -0.0462152f, +0.0081953f, +0.0902572f, -0.0005188f, +0.0073563f, -0.0285555f, +0.1391871f, +0.1683767f,
  -0.2524791f, -0.0752950f, -0.1509388f, -0.1993355f, -0.0264491f, +0.1597046f, +0.0300918f, +0.1792088f,
  +0.0549483f, -0.1813324f, +0.1717667f, -0.1621462f, -0.0311091f, -0.0532633f, +0.0346454f, -0.2513127f,
  -0.0211405f, +0.0888270f, -0.0762292f, +0.1380120f, -0.0024336f, -0.0352215f, -0.0690674f, -0.0914872f
);

const float biases[4] = float[4](
  +0.0318950f, +0.0564958f, +0.1127552f, +0.0501264f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer18 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0105431f, -0.4950113f, +0.5170758f, +0.0328651f, +0.1301322f, +0.0298420f, -0.0287636f, +0.0587655f,
  +0.2607059f, -0.1081125f, -0.0228585f, +0.2442839f, +0.1684413f, +0.2326739f, +0.2334904f, +0.0338948f,
  +0.3430375f, -0.0825702f, +0.3490978f, +0.0503321f, +0.2591057f, +0.2068605f, +0.1868548f, +0.0396677f,
  +0.1134626f, +0.1877991f, -0.5525203f, +0.0420346f, -0.2990159f, +0.1909264f, -0.4229734f, +0.1968103f,
  -0.0338930f, -0.6117834f, -0.6084052f, +0.5527941f, +0.2863330f, +0.1489612f, -0.2840633f, -0.5906056f,
  -0.2684554f, +0.2228716f, -0.0959043f, +0.2065000f, +0.3027616f, +0.1551424f, +0.1470456f, +0.2710174f,
  +0.1921752f, -0.0421168f, -0.1500045f, +0.3263875f, +0.0888842f, +0.0148476f, +0.2884029f, -0.0044254f,
  -0.0133238f, +0.2288489f, +0.2093519f, -0.1986305f, +0.5243359f, +0.2631798f, -0.0720728f, -0.0640344f,
  +0.0525917f, +0.1338785f, +0.0809048f, +0.0807192f, +0.2396793f, +0.0620641f, +0.0952299f, +0.3128379f,
  +0.0373874f, -0.3335606f, +0.3241563f, -0.1440334f, +0.0558722f, -0.0100589f, -0.2419549f, +0.0345164f,
  +0.2101000f, +0.1862208f, +0.1058849f, -0.0097095f, -0.3018680f, +0.1767019f, -0.0659176f, +0.1242160f,
  -0.0818626f, +0.4227268f, +0.4317623f, +0.0705960f, -0.0618425f, +0.0545286f, -0.0638893f, +0.2734508f,
  +0.1230180f, -0.1793567f, -0.1160220f, +0.0461429f, -0.1260142f, +0.0322826f, +0.2177749f, +0.0903025f,
  +0.1055284f, +0.2739506f, +0.2317479f, +0.1336685f, -0.2224196f, +0.0725055f, -0.2017753f, -0.4850851f,
  +0.0396669f, +0.1119844f, -0.2212329f, +0.3313693f, -0.1481002f, +0.0463158f, +0.1079098f, +0.4972188f,
  +0.4137533f, +0.2187065f, +0.1529395f, +0.2691696f, -0.2002112f, +0.2086653f, -0.3260442f, -0.0634030f,
  -0.0278609f, -0.3563685f, +0.0035922f, +0.1958146f, -0.3085513f, +0.1178199f, -0.1315881f, +0.0515983f,
  +0.0411647f, +0.0787926f, +0.1453569f, +0.5058495f, -0.0842406f, +0.3339579f, -0.0769087f, +0.2968616f,
  +0.1644229f, +0.1100500f, -0.0982254f, +0.0725733f, +0.2592137f, +0.0740037f, -0.1795248f, +0.0488495f,
  -0.0386578f, +0.1163130f, +0.1731968f, +0.0345555f, -0.0201120f, +0.0163955f, +0.0637614f, -0.1539723f,
  -0.1190279f, +0.2169561f, -0.1494216f, +0.2230476f, -0.0182810f, +0.0775550f, +0.1251157f, +0.0263742f,
  -0.1302301f, -0.1317282f, +0.0453914f, +0.2706661f, -0.1695954f, +0.1279939f, -0.0204529f, -0.0886512f,
  -0.4550114f, +0.4284346f, +0.3013894f, +0.1936865f, -0.4247841f, -0.1736149f, +0.2164477f, +0.1510904f,
  -0.2552325f, -0.5534405f, -0.5034658f, +0.2597033f, -0.1289839f, -0.2325722f, -0.1923247f, +0.0233275f,
  -0.0088865f, +0.0316223f, +0.1048390f, +0.3074740f, -0.1466814f, +0.1699343f, +0.0532502f, -0.0177406f,
  -0.0561755f, -0.0638856f, +0.3129156f, +0.3260991f, +0.1321051f, -0.1144729f, +0.1570433f, +0.0308223f,
  +0.0789887f, +0.0268920f, +0.2347266f, +0.1468527f, -0.0942963f, +0.1745574f, -0.2223839f, -0.1298593f,
  -0.0919896f, +0.1362740f, +0.2087173f, -0.1711863f, +0.1398508f, +0.0868066f, -0.1273975f, +0.0229712f,
  -0.0583924f, +0.1106190f, -0.1611226f, -0.0402072f, -0.0321857f, -0.0247765f, +0.3128855f, +0.3591975f,
  -0.2899355f, -0.0800044f, +0.2160643f, -0.0960076f, +0.0986829f, -0.0400358f, +0.0199214f, +0.3524785f,
  +0.0583788f, -0.0513529f, -0.0644926f, -0.0618679f, -0.1918994f, -0.1650213f, +0.2306265f, +0.1508537f,
  +0.3079578f, +0.1158045f, +0.2287048f, +0.0105730f, -0.5383418f, -0.2165063f, -0.0572938f, -0.1085298f,
  -0.1843001f, +0.0937837f, +0.1456306f, -0.0051738f, +0.0208226f, -0.2585877f, -0.1919187f, +0.8494436f,
  +0.0342434f, -0.0582778f, +0.0657846f, -0.0378357f, +0.2094697f, -0.0722915f, -0.3104234f, -0.1256665f,
  -0.0665398f, -0.2096983f, -0.1198995f, +0.0447913f, -0.1098301f, -0.0609779f, +0.0193545f, +0.1172430f,
  -0.1285544f, -0.0263570f, -0.2140937f, +0.2987519f, +0.0454843f, +0.1799075f, -0.1212564f, +0.1439237f
);

const float biases[4] = float[4](
  -0.0115191f, +0.0170431f, -0.0042773f, +0.0292196f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer18 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.3702785f, -0.2804899f, +0.7931627f, -0.3562340f, -0.0886842f, -0.0115417f, +0.2633729f, +0.0544357f,
  -0.1866034f, +0.0106912f, +1.1458663f, -0.4050851f, -0.2723468f, +0.1134434f, +0.0161035f, +0.2758451f,
  -0.1185412f, -0.2960720f, +0.1425012f, +0.1851792f, +0.1598900f, +0.2277101f, +0.0456427f, +0.0434198f,
  -0.0316014f, +0.4608616f, +0.1232366f, -0.6079115f, -0.1622721f, -0.0594272f, -0.1968402f, +0.2053606f,
  +0.3779955f, -0.3168414f, -0.0945417f, -0.3708293f, -0.3911676f, +0.0042406f, -0.3531645f, -0.4083816f,
  +0.3501112f, +0.1665205f, +0.6045337f, -0.0647932f, +0.2571315f, +0.1240872f, -0.1949593f, +0.1943806f,
  +0.1803683f, -0.0108752f, +0.0744070f, -0.1896766f, +0.0563239f, +0.2117910f, +0.2338087f, +0.2456660f,
  +0.4640464f, +0.2979159f, +0.1951899f, -0.3200954f, +0.1484971f, +0.4025455f, +0.2390989f, +0.1725921f,
  +0.2049261f, -0.0893370f, +0.4259531f, -0.1368999f, +0.0156651f, -0.0229322f, -0.0450401f, +0.0144504f,
  -0.1383269f, -0.5423798f, +0.1188463f, +0.0237865f, +0.1037313f, -0.2718857f, -0.0201242f, +0.0249350f,
  -0.1985369f, +0.2668382f, +0.4431824f, -0.0460071f, +0.1564174f, +0.0119507f, -0.0638419f, -0.0208840f,
  -0.0812040f, -0.1388348f, -0.1848430f, -0.1391093f, -0.0053106f, -0.0448266f, +0.0831990f, -0.1758008f,
  +0.0414762f, -0.5509754f, +0.0424831f, -0.1477297f, -0.1096430f, -0.2703723f, +0.1369488f, +0.0676028f,
  -0.2131476f, +0.1769616f, -0.1546376f, -0.2570621f, +0.3131924f, +0.1333512f, -0.0128667f, -0.3452810f,
  +0.3868085f, +0.0111725f, -0.0553832f, -0.3755487f, +0.1540084f, -0.0310132f, -0.0380119f, -0.6333879f,
  +0.0258592f, +0.0011222f, +0.1718786f, +0.0476962f, +0.0266379f, +0.1681998f, -0.1043923f, -0.0057935f,
  -0.0546516f, +0.1201333f, -0.0275478f, +0.0047987f, -0.1661922f, -0.1160549f, -0.0394065f, -0.0136960f,
  -0.0829535f, -0.2499217f, +0.0486594f, -0.0622774f, +0.1482185f, -0.3779680f, -0.0717704f, -0.0483755f,
  +0.2057675f, +0.3117784f, -0.2077797f, +0.0519919f, +0.2319543f, +0.2366705f, -0.1062484f, +0.1662803f,
  -0.1636732f, +0.1877007f, -0.6920116f, +0.2627472f, +0.2103004f, +0.1716211f, -0.0987358f, +0.1867189f,
  -0.1285527f, -0.2698871f, -0.1937361f, +0.3824679f, +0.3938576f, +0.1337906f, -0.1843632f, +0.0324990f,
  +0.0586408f, -0.3148050f, +0.2509386f, +0.3959839f, -0.1184403f, -0.0859545f, +0.1309623f, -0.0545886f,
  +0.1504750f, -0.4720248f, -0.0879415f, +0.4712697f, -0.3068798f, +0.2384348f, -0.8151941f, +0.4544898f,
  -0.0388842f, +0.1432447f, +0.0376866f, +0.5502373f, +0.4780738f, -0.3809222f, -0.4377962f, +0.2690045f,
  +0.0483390f, +0.2693011f, +0.0671847f, +0.4354531f, +0.0948813f, +0.1783312f, -0.3140457f, +0.0105623f,
  -0.3673327f, -0.1296727f, -0.3966365f, +0.1817565f, +0.0167722f, +0.3879957f, -0.2366820f, -0.2560984f,
  -0.4685788f, -0.3201158f, -0.0064548f, +0.2482183f, +0.3912935f, -0.3653106f, -0.3517205f, +0.1612211f,
  -0.0564445f, -0.0795588f, -0.0434216f, -0.0065493f, +0.2007667f, +0.0277870f, +0.1769813f, +0.1215095f,
  -0.3604838f, +0.3036830f, +0.6002313f, -0.1138914f, -0.0051885f, -0.0875781f, +0.2984306f, +0.0318997f,
  -0.3233248f, +0.0902718f, -0.0498637f, +0.0441209f, +0.3206563f, -0.2814397f, -0.0596382f, -0.2782261f,
  -0.2127128f, -0.2069763f, +0.2151341f, +0.0106513f, -0.0851470f, -0.1617685f, -0.2029809f, -0.0529496f,
  -0.5165809f, +0.4654824f, -0.3606388f, -0.2099898f, +0.0889618f, -0.4307343f, +0.3046647f, +0.3490764f,
  -0.1678041f, -0.4722940f, -0.0693926f, -0.0585043f, +0.0952683f, +0.0331726f, -0.0189921f, -0.1319808f,
  -0.3989500f, -0.1640510f, -0.0160120f, -0.0837932f, +0.3371603f, +0.0846163f, +0.0594925f, -0.0358583f,
  -0.0547127f, +0.2761143f, +0.1612571f, +0.2196395f, +0.0886265f, -0.0970904f, -0.0729543f, -0.1993272f,
  +0.0618643f, -0.0055622f, -0.0948996f, -0.0376919f, +0.1861944f, -0.2061419f, -0.2515232f, -0.0639878f
);

const float biases[4] = float[4](
  -0.0123582f, +0.0395193f, -0.0140675f, +0.1339757f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer19 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1815075f, +0.0376778f, -0.1030690f, +0.0988782f, -0.1837525f, -0.0233041f, +0.2688671f, -0.1944679f,
  -0.2077925f, +0.0586074f, +0.4069683f, -0.0383697f, +0.3114240f, +0.0252913f, +0.6935075f, +0.1732143f,
  +0.0037387f, +0.1378976f, +0.0359203f, +0.3340605f, +0.2083933f, -0.3032913f, +0.3802016f, +0.2144106f,
  -0.2251894f, -0.1548254f, +0.3231867f, +0.0064389f, -0.0628574f, -0.1452413f, -0.1264375f, +0.1204280f,
  +0.5550269f, +0.2641938f, +0.0558068f, -0.3862869f, -0.3505196f, +0.1543902f, +0.6807179f, -0.0055100f,
  +0.1847092f, -0.1045464f, -0.1349568f, +0.3039424f, +0.4459609f, -0.3511689f, -0.1499033f, -0.0797672f,
  +0.0727647f, -0.0449304f, -0.1312879f, +0.0056548f, -0.0486800f, -0.1967403f, +0.2797742f, +0.1045485f,
  -0.1069152f, +0.1937807f, +0.2479513f, +0.0582427f, +0.1226622f, -0.1287560f, +0.1261925f, -0.0490931f,
  +0.1329089f, +0.1150219f, +0.1429323f, +0.2448476f, +0.0440676f, +0.0352569f, +0.1949669f, +0.0836296f,
  -0.2446569f, +0.0626109f, +0.1065080f, -0.3017227f, +0.1390986f, +0.3003677f, +0.2875681f, -0.1117218f,
  -0.0021746f, -0.1011312f, -0.1316994f, +0.0809627f, -0.0205434f, -0.0091772f, +0.0000077f, -0.4323317f,
  +0.2041683f, -0.0881168f, -0.0694233f, -0.1224814f, +0.0886271f, +0.1198765f, -0.0216045f, +0.0101794f,
  -0.8736318f, +0.1998457f, +0.1029506f, +0.0889964f, +1.1392798f, -0.7170468f, -0.1146644f, +0.5048348f,
  -0.0168105f, -0.4005765f, +0.4095730f, +0.2199079f, -0.1467500f, +0.2070057f, -0.5752476f, -0.0809491f,
  -0.1933544f, -0.0495292f, +0.0774188f, -0.0269073f, -0.1268770f, +0.0580566f, -0.0306263f, -0.0338054f,
  -0.0902630f, -0.1688738f, -0.3870267f, -0.1749408f, +0.1028219f, +0.1042718f, -0.3034118f, +0.3482692f,
  -0.1493206f, -0.1327230f, -0.2624843f, +0.0140194f, +0.0191795f, -0.1322445f, -0.1853749f, +0.2744418f,
  -0.0316167f, -0.1829003f, -0.1393921f, -0.1060221f, -0.1686444f, +0.1110400f, -0.1987074f, +0.1051063f,
  -0.0950718f, -0.4011643f, -0.0137807f, -0.2282056f, -0.0915438f, +0.1504032f, +0.1242868f, +0.3736801f,
  -0.1592573f, -0.1441319f, -0.0143743f, -0.3519717f, -0.0316853f, +0.4083866f, +0.1521294f, +0.1364244f,
  +0.1060732f, -0.0574948f, -0.0352500f, -0.0099686f, +0.0118851f, +0.2834761f, -0.1155046f, +0.0207886f,
  +0.2350514f, -0.1033199f, -0.0286652f, +0.0710891f, +0.0012947f, -0.0324250f, -0.1210977f, -0.0264762f,
  +0.3027042f, +0.2003545f, -0.2087349f, -0.0992224f, +0.2920493f, -0.2932642f, -0.1173673f, +0.2521823f,
  -0.0538453f, -0.2472447f, -0.0371330f, -0.0578907f, +0.3175387f, -0.0811683f, +0.0575502f, +0.1895577f,
  -0.0646031f, +0.1668457f, +0.1701048f, -0.0409109f, -0.1615107f, -0.2100110f, +0.4602354f, +0.1895628f,
  +0.1772087f, +0.1550260f, +0.2509099f, +0.2740807f, +0.2733586f, -0.2892033f, +0.6273758f, -0.1160821f,
  +0.1415130f, +0.2992024f, +0.4279697f, -0.1152561f, +0.3568647f, +0.2946421f, +0.1401363f, -0.0298569f,
  -0.0787873f, +0.0096863f, +0.1629848f, -0.0504129f, -0.2903211f, +0.2876990f, -0.1588349f, +0.0179091f,
  +0.1006085f, -0.0432059f, +0.1404251f, -0.1601437f, -0.3145387f, -0.1523320f, +0.0662044f, -0.1831856f,
  +0.0561536f, +0.2956166f, -0.2264903f, -0.0110039f, +0.3756213f, +0.0104684f, -0.0896381f, -0.0120375f,
  -0.0171757f, -0.0084020f, +0.0669337f, -0.0833114f, -0.1483902f, +0.0668801f, -0.0616579f, -0.0632654f,
  -0.1168836f, +0.1442578f, -0.2242979f, +0.1220415f, +1.0025644f, +0.8360756f, -0.2570993f, -0.2168756f,
  -0.2308668f, -0.0380335f, -0.3293282f, +0.3053616f, +0.1673056f, -0.0210751f, -0.5103363f, -0.1028498f,
  -0.1126850f, +0.2429912f, +0.0547884f, -0.0380300f, +0.0130015f, +0.0070530f, +0.3136338f, -0.1020917f,
  +0.0522861f, -0.7148633f, -0.2016229f, -0.1610690f, +0.2751750f, +0.3743259f, -0.0637438f, +0.2240056f,
  +0.2235239f, -0.0114855f, +0.0319212f, +0.1596774f, +0.1109709f, +0.1498135f, -0.4582277f, +0.0897228f
);

const float biases[4] = float[4](
  +0.0640905f, -0.0281662f, +0.0881058f, -0.2000553f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer19 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.5111696f, +0.4679229f, -0.1007678f, -0.0749501f, +0.0782389f, -0.1356408f, +0.3016030f, -0.0356071f,
  +0.2166470f, -0.0268405f, +0.3122308f, -0.4928342f, -0.5857837f, +0.5686912f, +0.0690653f, +0.1097616f,
  +0.1264959f, -0.0061915f, -0.3824079f, +0.2325151f, -0.1413644f, -0.1277455f, +0.2966573f, -0.2471750f,
  -0.0331198f, +0.3911403f, +0.6053808f, -0.1220324f, +0.0434299f, -0.0548083f, +0.1096051f, -0.2661233f,
  -0.0798376f, -0.2618345f, -0.1604619f, +0.1075846f, +0.3262300f, +0.0781284f, +0.7670944f, +0.3111610f,
  +0.2994764f, +0.4832384f, -0.5690315f, +0.4069684f, +0.4580713f, -0.2748323f, -0.2897593f, -0.3522839f,
  -0.3589512f, +0.1497844f, +0.1446578f, -0.1076305f, +0.2609720f, +0.6462042f, -0.8221444f, -0.2413177f,
  -0.8372118f, -0.2895809f, -0.4293863f, +0.2291244f, -0.5960864f, +0.4216476f, -0.3241898f, +0.0455646f,
  -0.4234639f, +0.2001794f, -0.4313128f, +0.2416076f, -0.1169513f, +0.1718508f, -0.5742053f, -0.0989012f,
  +0.2450320f, -0.0425108f, +0.0086833f, +0.1332873f, -0.2924256f, -0.0790210f, -0.0583162f, -0.0587778f,
  +0.5823079f, -0.1444595f, +0.1083182f, +0.3497083f, -0.1591835f, +0.1581140f, +0.4220558f, -0.0483369f,
  +0.5412070f, +0.6463193f, -0.1696275f, -0.6688510f, -0.0868518f, +0.2258705f, -0.4644245f, +0.2219025f,
  +0.1316249f, -0.2893873f, +0.0975324f, +0.0002844f, -0.0352448f, +0.2483581f, +0.1286884f, -0.0700896f,
  +0.5259612f, -0.2323327f, +0.0946374f, +0.2639272f, -0.4334724f, +0.4710599f, +0.1908211f, -0.3472504f,
  +0.3839202f, +0.4331328f, +0.0798424f, -0.7316942f, +0.1095009f, +0.3571891f, -0.0915320f, -0.2382232f,
  +0.1825920f, -0.0123732f, -0.0381270f, +0.0466427f, -0.0453995f, +0.0060200f, +0.3230200f, -0.0378330f,
  -0.0003166f, +0.1999036f, +0.0078765f, -0.0114817f, +0.4202072f, -0.0074866f, +0.4269964f, +0.0163492f,
  +0.1727288f, -0.1074977f, +0.2966379f, +0.0552816f, +0.2958803f, +0.1178675f, -0.1491177f, +0.0332135f,
  -0.0348244f, -0.4894080f, -0.1052239f, -0.0681840f, -0.0514603f, +0.0414481f, -0.3331838f, -0.0445713f,
  +0.3165689f, -0.1022557f, +0.2417081f, +0.1219540f, -0.3187178f, +0.0182204f, -0.4521162f, +0.1544619f,
  -0.3355408f, -0.2811126f, -0.1089840f, +0.0988372f, -0.1574311f, -0.2752009f, +0.0246858f, -0.0202772f,
  +0.2324135f, +0.0902796f, -0.5322487f, +0.1473322f, +0.3925628f, -0.1491701f, +0.2508482f, +0.1052117f,
  +0.2176288f, +0.0248740f, -0.3659450f, +0.2466233f, -0.9049904f, +0.3807776f, +0.0193698f, -0.1783650f,
  -0.1903466f, +0.1750872f, -0.3816500f, +0.0563310f, +0.1075834f, -0.2688231f, +0.2360607f, -0.0180369f,
  -0.1617637f, -0.2330580f, -0.1096893f, +0.1043540f, +0.2934990f, -0.2148110f, -0.0753224f, +0.2100576f,
  -0.1440005f, -0.1940499f, +0.1009699f, -0.3231446f, -0.1010255f, -0.0517634f, -0.3480593f, +0.0045644f,
  +0.2018354f, +0.1252231f, -0.0470462f, +0.0160814f, -0.0172972f, +0.2412474f, -0.0195759f, +0.3119403f,
  +0.0332166f, +0.0935613f, -0.2268369f, +0.0057313f, -0.1231276f, -0.1060259f, +0.0314404f, +0.0265475f,
  +0.0567255f, +0.1656960f, +0.0791090f, -0.0129199f, -0.2530902f, -0.0767773f, -0.0098867f, -0.0765966f,
  +0.0702646f, -0.0371531f, +0.0553577f, +0.1753589f, -0.1654644f, -0.1114549f, -0.0452930f, -0.0146199f,
  -0.0624399f, +0.7789865f, -0.3344266f, +0.0831852f, -0.0317535f, -0.2979995f, -0.6283184f, +0.0174253f,
  +0.4156162f, +0.5270783f, +0.1545391f, -0.3617014f, +0.2076858f, -0.2022703f, -0.1262552f, -0.1187075f,
  -0.4076179f, +0.2942576f, +0.1032894f, -0.0223563f, +0.1247909f, +0.1751370f, +0.2093814f, -0.2400180f,
  +0.0963418f, +0.3367048f, -0.2054958f, +0.1466488f, +0.2383095f, -0.2935485f, +0.0717184f, +0.1550042f,
  +0.0201727f, +0.1106810f, -0.1205056f, -0.3006719f, +0.0339770f, -0.0613027f, +0.3249019f, -0.1266521f,
  -0.1273552f, +0.1760522f, -0.1251099f, -0.0483482f, -0.0164664f, -0.0798135f, +0.1759271f, +0.2877377f
);

const float biases[4] = float[4](
  -0.2937554f, -0.0487303f, +0.0732047f, -0.6244894f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer20 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0211716f, -0.0680826f, -0.0408926f, -0.0318670f, +0.2094685f, -0.0339479f, -0.1044677f, +0.2082224f,
  -0.0574983f, -0.0511283f, -0.5907987f, +0.0952267f, +0.9170736f, -0.1454898f, +0.1594719f, -0.0586956f,
  -0.2700704f, +0.3828457f, -0.3092676f, -0.0429628f, +0.1212319f, +0.0706052f, -0.0293593f, +0.2459354f,
  +0.0484397f, -0.1129806f, -0.1422258f, +0.0658508f, +0.5253272f, +0.5504441f, +0.1931615f, +0.2823468f,
  -0.3231941f, -0.1425213f, -0.0332774f, +0.1952268f, -0.2584562f, +0.4542508f, +0.2451168f, -0.8190428f,
  +0.6880248f, +0.2412285f, -0.2637165f, +0.3422534f, +0.0251082f, -0.0167698f, -0.6470666f, +0.4060729f,
  +0.1253205f, -0.1125160f, -0.0339542f, +0.0028698f, -0.3332112f, -0.4972921f, +0.0242741f, -0.1425788f,
  +0.0431752f, -0.0298746f, -0.0932263f, +0.2842348f, -0.3065487f, -0.0746034f, -0.1543012f, -0.3650264f,
  -0.0893894f, -0.1989933f, -0.2293649f, +0.2802730f, -0.0461011f, -0.0662321f, -0.2291614f, +0.1675943f,
  -0.2135806f, -0.2090752f, -0.3910050f, -0.1605577f, -0.1652154f, +0.0314098f, -0.2815487f, +0.1217871f,
  -0.3650558f, -0.1737989f, -0.0869967f, -0.0107312f, +0.3101041f, -0.0513955f, -0.0763106f, +0.3037503f,
  +0.2917861f, -0.3477504f, -0.1060157f, +0.0388602f, +0.0242374f, -0.0866158f, -0.0861399f, -0.1016859f,
  +0.2353636f, -0.0345902f, +0.0037430f, -0.4207938f, +0.3799320f, +0.2037670f, +0.0779081f, -0.2034655f,
  -0.0718515f, +0.8609114f, +0.2380023f, -0.0291625f, +0.2371147f, -0.1735926f, -0.3757287f, -0.0196697f,
  +0.1848934f, -0.5085614f, +0.0021144f, -0.2705218f, +0.0335263f, -0.1909746f, -0.1696271f, -0.4849339f,
  -0.0044147f, +0.0263364f, -0.1535930f, -0.0692723f, +0.0140222f, +0.1491460f, -0.1365869f, +0.0122737f,
  +0.1083066f, -0.0158810f, +0.4586145f, -0.3387346f, -0.0447390f, -0.1918249f, -0.1780360f, +0.0466034f,
  -0.2830906f, +0.0656805f, +0.3899202f, +0.1012026f, +0.1504215f, -0.2469177f, -0.1151759f, -0.0035872f,
  -0.1747433f, +0.0078585f, -0.1273391f, -0.0604340f, +0.1085713f, -0.0005448f, -0.0651276f, +0.1417218f,
  -0.1242244f, -0.3344466f, -0.0717325f, +0.1428358f, -0.3660880f, +0.0127554f, -0.0516492f, +0.3584293f,
  -0.0155327f, -0.2023856f, +0.2622389f, -0.1407459f, -0.0387540f, +0.1799620f, +0.0692608f, -0.6287016f,
  +0.2596498f, -0.0900239f, +0.1747129f, -0.0407175f, +0.0505657f, -0.3498602f, +0.3215455f, -0.2604476f,
  -0.0144313f, -0.1673851f, +0.0704842f, -0.3042070f, +0.2675444f, -0.4691225f, -0.0816721f, -0.4678804f,
  -0.4507183f, -0.1957438f, +0.0998941f, -0.4294149f, -0.2003581f, -0.2867622f, +0.4920258f, -0.4037894f,
  -0.1995697f, -0.0019007f, +0.0136327f, +0.0340039f, -0.1494886f, -0.1422344f, +0.0424906f, +0.1864918f,
  -0.2923473f, +0.0381053f, -0.0362720f, -0.0964790f, -0.3821145f, -0.6621335f, -0.1742109f, +0.0454331f,
  -0.2073539f, -0.4324647f, +0.1060399f, -0.0113343f, -0.5368974f, +0.0384901f, +0.0676781f, -0.0232656f,
  +0.1238491f, -0.1807498f, +0.1238274f, -0.0669023f, -0.0731283f, -0.0885360f, -0.0267125f, -0.0616455f,
  +0.0578334f, -0.1126227f, -0.1220913f, +0.1227493f, +0.1891991f, -0.0456763f, +0.0393911f, -0.5046720f,
  +0.1815644f, -0.0565088f, -0.2426243f, +0.0547262f, -0.0173057f, -0.1547049f, -0.1370021f, +0.0926530f,
  -0.0826383f, -0.0982384f, +0.0325834f, +0.0710513f, -0.2940662f, +0.1291394f, -0.2892138f, +0.1771175f,
  +0.0917841f, +0.4602924f, +0.1099809f, +0.0878714f, -0.3792752f, -0.2232309f, -0.3837910f, +0.1744183f,
  +0.2702860f, -0.4234718f, -0.0444316f, +0.1991852f, +0.0645376f, +0.0762713f, -0.3840228f, -0.0465376f,
  +0.0035336f, +0.0815852f, +0.1415891f, +0.3269339f, +0.0602616f, +0.2029303f, -0.0676121f, +0.0279817f,
  +0.1664706f, -0.0732202f, +0.4099248f, +0.3379025f, +0.4061079f, -0.0020872f, +0.1067811f, +0.0176332f,
  -0.1103510f, -0.0712228f, +0.2404986f, +0.0498699f, +0.4418388f, -0.0338941f, +0.2160859f, +0.0394869f
);

const float biases[4] = float[4](
  +0.0957108f, +0.0625095f, -0.0666941f, +0.0523383f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer20 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1371499f, -0.0340501f, -0.2029262f, -0.1289353f, +0.0159909f, -0.1154968f, +0.3299929f, +0.3226041f,
  -0.4313616f, -0.0511670f, -0.4227263f, -0.4007180f, +0.4108373f, -0.1157500f, +0.0641431f, -0.0281338f,
  -0.2193134f, -0.1556596f, +0.1441458f, -0.0365852f, -0.4950784f, +0.1008184f, +0.0032493f, -0.1806619f,
  +0.0469852f, -0.0927474f, -0.1266288f, -0.3418753f, -0.0085291f, +0.7725308f, +0.0505767f, +0.0945503f,
  +0.1335626f, +0.3394963f, -0.4281575f, -0.3733861f, -0.1316571f, -0.0254060f, +0.3980068f, -0.2391909f,
  -0.0986867f, +0.8399645f, +0.0818596f, -0.1364030f, -0.1950820f, +0.1177009f, +0.0844742f, -0.1452566f,
  -0.1726130f, -0.1411985f, -0.1141984f, -0.3262305f, +0.3671688f, +0.5154582f, +0.0140886f, +0.4278695f,
  -0.4357406f, +0.1189925f, -0.1870470f, +0.1435525f, +0.6591468f, +0.6224380f, +0.4840007f, +0.1146435f,
  +0.0678175f, +0.2282467f, -0.0264366f, +0.2447115f, +0.1230499f, +0.0807023f, +0.1185829f, +0.0844223f,
  -0.1216666f, -0.1379427f, -0.2635006f, -0.1079955f, -0.1918106f, +0.0977565f, -0.2102949f, +0.0540077f,
  -0.1028989f, +0.0879026f, -0.1374861f, -0.0561032f, -0.5683311f, +0.1508108f, +0.0535023f, +0.9982081f,
  -0.1520428f, -0.1404883f, +0.1233330f, -0.0868224f, -0.6558658f, +0.1032893f, +0.1276779f, -0.0913186f,
  -0.3137231f, +0.1564112f, -0.1395154f, -0.2824628f, +0.0271352f, +0.8875510f, +0.0165474f, -0.1342481f,
  +0.2863873f, +0.4710711f, +0.1022172f, -0.2135849f, +0.3966165f, -0.2051630f, -0.1777231f, +0.1917418f,
  -0.2286532f, +0.4144315f, +0.1608812f, +0.0038026f, -0.3250954f, +0.0067905f, +0.2781230f, +0.1059355f,
  -0.0655761f, -0.0540746f, -0.2651629f, +0.0090047f, +0.0425715f, +0.4466664f, +0.0079561f, +0.0745367f,
  -0.1346990f, -0.0623369f, -0.1721033f, +0.0131729f, -0.3499739f, +0.0769134f, -0.0008471f, +0.2357866f,
  +0.0764869f, +0.4345402f, +0.0241031f, -0.3189733f, -0.3519427f, -0.0873130f, -0.1050959f, -0.0552115f,
  +0.1917112f, -0.0029065f, +0.1782170f, +0.1752381f, +0.2309477f, +0.1119603f, -0.2079749f, +0.0975235f,
  +0.2386793f, -0.0243959f, -0.2090712f, +0.5973203f, +0.2401410f, -0.2328365f, +0.0528103f, -0.3704902f,
  +0.1368247f, +0.4141447f, -0.0995598f, -0.0087174f, +0.0577106f, +0.0544709f, -0.0397899f, +0.3106266f,
  +0.2127039f, +0.1673407f, +0.1719405f, +0.2891575f, +0.1848755f, +0.0382609f, +0.0526706f, -0.3659136f,
  -0.1459138f, +0.0710602f, +0.4409714f, +0.1050234f, -0.4904061f, +0.0971783f, -0.5103019f, +0.0669065f,
  +0.3900590f, +0.1347560f, +0.3139264f, -0.0541451f, -0.1354413f, +0.0703149f, -0.3718679f, +0.3018172f,
  -0.0591816f, +0.0110705f, +0.1428166f, +0.0461772f, -0.5565838f, +0.1585868f, -0.0848770f, +0.2151719f,
  -0.1640838f, -0.0932975f, +0.3561513f, +0.0329737f, +0.1628415f, -0.2630273f, -0.0326560f, -0.0601882f,
  +0.1063878f, +0.1193055f, +0.0766541f, -0.1086897f, -0.6145367f, -0.0925510f, -0.1513328f, +0.0465371f,
  -0.1592688f, +0.0026129f, +0.0635752f, +0.1744332f, -0.0658703f, +0.1167304f, -0.0209560f, +0.0002416f,
  +0.0945905f, -0.3179683f, -0.0961928f, -0.0017834f, +0.0868275f, -0.0602364f, -0.0170219f, +0.2632244f,
  +0.1756149f, -0.4311681f, +0.0501146f, -0.0063234f, -0.3382421f, +0.1537166f, +0.0343173f, -0.1044942f,
  +0.0519157f, +0.0230507f, +0.0367366f, +0.3511484f, -0.2060204f, +0.2732616f, +0.1259329f, +0.2473397f,
  +0.2227065f, -0.3844863f, -0.1136611f, +0.3946261f, +0.0108675f, -0.3500612f, +0.1878074f, +0.2062138f,
  -0.5780761f, +0.4290567f, +0.1873721f, -0.3548964f, -0.5404726f, +0.0892353f, +0.3340724f, -0.2101435f,
  -0.1072374f, +0.0073606f, +0.1151596f, +0.3583930f, -0.3796971f, -0.1828344f, +0.1447081f, +0.0624579f,
  -0.0580655f, +0.2352970f, -0.1488427f, +0.4460802f, -0.3110179f, -0.2707927f, +0.0944080f, +0.1623908f,
  +0.1698102f, -0.2980632f, -0.2753408f, +0.1242017f, -0.5214490f, +0.1940820f, +0.2623158f, +0.1473193f
);

const float biases[4] = float[4](
  -0.0105284f, +0.0532820f, +0.0427802f, +0.0112167f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer21 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.3134627f, -0.1025969f, +0.2562025f, -0.1809817f, +0.2986006f, +0.1762235f, +0.1885639f, +0.0145246f,
  +0.1089751f, +0.0763975f, -0.1008616f, -0.0920434f, +0.2677012f, +0.1309936f, -0.1757508f, +0.0067394f,
  -0.2768188f, +0.0070181f, -0.3952475f, +0.2882638f, +0.0922022f, -0.4794023f, -0.3258172f, +0.0337690f,
  -0.3810568f, +0.0680206f, +0.1969571f, +0.0058852f, -0.1836410f, +0.0822257f, -0.0011891f, -0.3296239f,
  +0.1218911f, +0.1256881f, -0.1513136f, +0.1288549f, +0.3665191f, +0.1591156f, +0.9623097f, +0.2552131f,
  -0.0337693f, +0.2194826f, -0.1029885f, +0.1780031f, -0.1578782f, -0.3887790f, -0.3070601f, -0.0872359f,
  +0.0484818f, +0.0983448f, +0.1246498f, -0.0016450f, +0.0136821f, +0.0802640f, +0.2337713f, +0.0420422f,
  -0.0092128f, -0.1345018f, -0.0015022f, -0.0475193f, +0.0082762f, +0.0266825f, +0.4251298f, +0.3792914f,
  +0.1869944f, +0.0365794f, +0.2246886f, +0.0497129f, -0.0907989f, -0.3117592f, +0.0828893f, -0.0874815f,
  -0.1845118f, +0.1665758f, -0.2210472f, +0.0492240f, +0.3167476f, +0.0105215f, +0.1535665f, +0.0401549f,
  -0.3508422f, -0.4976165f, -0.1658754f, -0.0726438f, +0.2020870f, +0.1386071f, +0.1556709f, +0.0071470f,
  +0.3368591f, -0.0409080f, -0.1379083f, -0.0460172f, +0.4796239f, -0.0951434f, -0.2400617f, +0.2475851f,
  +0.2390179f, -0.3007214f, -0.2497981f, +0.1930746f, +0.2818671f, -0.0521862f, -0.6158094f, +0.2975607f,
  +0.0256031f, -0.1396185f, -0.0003483f, -0.2304436f, +0.6700615f, +0.2051252f, +0.5615650f, +0.1652074f,
  -0.1243165f, -0.1878742f, +0.3570981f, -0.1701930f, -0.1862474f, +0.1979522f, +0.0040995f, +0.0646885f,
  +0.0349133f, +0.0147861f, -0.1587741f, -0.0320848f, +0.1945000f, -0.0431136f, -0.3340385f, +0.0310604f,
  -0.0638154f, -0.1225098f, +0.0423065f, -0.0953460f, -0.2321974f, +0.0838119f, -0.1998932f, -0.1430682f,
  +0.1702888f, +0.0595298f, -0.0653228f, +0.1814140f, +0.0738763f, -0.1198221f, -0.1730778f, -0.2704575f,
  -0.5244907f, -0.1338677f, -0.1799556f, +0.0345564f, -0.1897023f, +0.0687177f, -0.5609249f, -0.1338107f,
  +0.2534882f, -0.1030628f, +0.1564635f, +0.0249862f, -0.1971552f, +0.1425344f, -0.3425689f, -0.0804260f,
  +0.1595085f, -0.0665759f, +0.2098655f, +0.0975562f, -0.0937409f, -0.0404142f, -0.0061093f, +0.1513777f,
  +0.5021436f, -0.1800837f, +0.7709395f, +0.0672500f, -0.1617083f, +0.6436663f, -0.9784154f, -0.0914775f,
  +0.0477304f, +0.3081922f, +0.0609354f, -0.4195493f, +0.6969141f, +0.7685004f, -0.6280172f, -0.0428556f,
  +0.0714652f, +0.1932379f, +0.0375476f, -0.1466884f, +0.0663608f, +0.2428182f, +0.2170538f, -0.0622704f,
  +0.1918678f, -0.2177659f, -0.0624441f, -0.0446393f, +0.3845100f, -0.0904124f, -0.2025302f, -0.0309736f,
  +0.1350967f, +0.3369037f, -0.0425113f, -0.1018246f, -0.1495915f, -0.1212452f, +0.4601707f, +0.5352722f,
  +0.0829373f, -0.1076918f, +0.1323893f, +0.0533581f, -0.0016552f, -0.2252711f, +0.1521469f, -0.1690806f,
  -0.0583151f, +0.0848041f, -0.4274395f, +0.0867038f, +0.1142233f, -0.1558680f, +0.1731607f, +0.0239442f,
  +0.6262432f, +0.1277235f, +0.2825590f, +0.0496621f, -0.2413102f, -0.2419507f, -0.1124356f, -0.0035646f,
  +0.0897523f, +0.0951033f, +0.0662418f, +0.0842667f, -0.0132515f, -0.1609512f, -0.0292355f, -0.0220274f,
  -0.0606759f, +0.4077269f, +0.0639482f, -0.0638320f, +0.1589369f, -0.0100585f, -0.0174154f, +0.0640500f,
  +0.3621753f, +0.3743610f, +0.3395242f, -0.3750093f, +0.2885385f, -0.0011170f, +0.4686196f, +0.0195696f,
  -0.0655737f, -0.1276032f, -0.1283289f, +0.2513472f, +0.1044753f, -0.5446841f, +0.1150890f, -0.2733202f,
  -0.1098806f, +0.2473554f, +0.4586217f, -0.2116418f, -0.0477889f, +0.2181972f, -0.2418308f, +0.1252695f,
  -0.8234096f, -0.3756745f, +0.0782576f, -0.0410918f, -0.7703487f, -0.2639658f, +0.8963059f, +0.2505151f,
  -0.1061988f, -0.1894105f, +0.1002404f, +0.3602469f, +0.2763126f, -0.6610212f, -0.7536405f, -0.5690058f
);

const float biases[4] = float[4](
  +0.1291559f, -0.0108610f, -0.0791412f, -0.0346576f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer21 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0652828f, +0.0657877f, +0.2967007f, +0.1083857f, -0.2664529f, -0.0987813f, -0.0386114f, -0.0357781f,
  +0.2011633f, -0.1446960f, +0.1679531f, +0.1915016f, -0.0708255f, -0.3209588f, -0.1019879f, +0.4989195f,
  +0.2134424f, -0.2573418f, -0.0225390f, -0.0350385f, -0.3122486f, -0.2035747f, +0.1485700f, +0.0304054f,
  +0.2626445f, -0.5132759f, -0.1695251f, +0.0980071f, -0.7577597f, +0.7311723f, +0.1807944f, -0.3753188f,
  +0.2671947f, +0.4145520f, +0.4708712f, -0.1970720f, -1.1837379f, +0.5717378f, -0.5282418f, +0.1214282f,
  -0.2752490f, -0.0953986f, +0.0963448f, -0.4155237f, -0.1771912f, +0.1850861f, -0.0351414f, +0.2371862f,
  +0.1131262f, -0.1483067f, -0.3905072f, -0.0415439f, +0.0412553f, +0.0745409f, +0.0487907f, +0.0704926f,
  +0.3866642f, -0.1868072f, +0.3025317f, -0.1109530f, -0.4570623f, +0.5512822f, -0.4676214f, +0.2362050f,
  +0.2320408f, -0.0167122f, -0.0930761f, -0.1133281f, -0.0229071f, +0.1234101f, +0.1179944f, -0.0837068f,
  +0.1068202f, +0.0053103f, -0.3956016f, +0.1686026f, +0.0467167f, -0.0564240f, +0.0051346f, +0.0071391f,
  -0.0728825f, +0.0202687f, +0.0806822f, +0.1131076f, +0.2473829f, -0.2885992f, +0.1984798f, +0.0323345f,
  +0.2465120f, +0.1722880f, +0.2196427f, -0.0148676f, +0.2083025f, -0.0577179f, +0.3877106f, +0.1376895f,
  +0.4494109f, -0.0088022f, -0.0342096f, +0.1001977f, -0.1963970f, +0.2477990f, -0.0841611f, -0.0041484f,
  -0.0545533f, +0.0199120f, +0.1830453f, +0.0734099f, +0.4603319f, -0.4766650f, +0.2052467f, +0.3805275f,
  +0.1414899f, +0.0204552f, -0.4105925f, +0.2274428f, +0.0971529f, +0.1421332f, -0.0313741f, -0.0172697f,
  +0.0749330f, +0.2582023f, -0.1630047f, +0.1116524f, -0.0936764f, -0.1620441f, +0.4914196f, -0.0125137f,
  +0.1087410f, +0.0583065f, +0.2397194f, +0.2502527f, +0.3444251f, -0.2521034f, +0.1908353f, +0.2009359f,
  -0.0795042f, +0.0604589f, -0.0408372f, +0.2331822f, -0.0258840f, -0.2874877f, -0.3922576f, +0.0940131f,
  -0.5720198f, -0.1437741f, -0.0016726f, -0.1243086f, +0.1659655f, +0.4247926f, -0.0500395f, -0.1482548f,
  -0.5558281f, +0.4611543f, -0.0924498f, -0.1494919f, +0.0473372f, -0.0128495f, +0.3484230f, -0.3153813f,
  -0.2098613f, +0.0279018f, -0.2351590f, +0.0122185f, +0.1365179f, -0.1841837f, +0.2288935f, -0.2704462f,
  +0.1939923f, +0.4885337f, -0.1446064f, -0.1761407f, -0.3267194f, -0.3564430f, -0.2815751f, +0.0816805f,
  -0.0945824f, +0.1709075f, -0.2261907f, +0.1318666f, +0.8423224f, +0.3579962f, -0.0338900f, -0.0035808f,
  +0.5775533f, -0.0526985f, -0.0584068f, +0.1815493f, +0.3827988f, -0.1473149f, +0.2540644f, -0.4968975f,
  +0.0156039f, +0.0886728f, -0.0776330f, -0.0541645f, -0.1317900f, +0.0673039f, -0.3640950f, -0.0211416f,
  -0.0053252f, -0.0308004f, -0.3292740f, +0.0294013f, -0.2346080f, +0.2628164f, -0.0214062f, -0.1423754f,
  -0.0682378f, +0.0538581f, -0.2696619f, +0.2262456f, +0.1495445f, -0.0056760f, -0.1244315f, -0.1610265f,
  +0.0872377f, +0.3601500f, +0.4244026f, +0.0048594f, +0.1465208f, -0.1512477f, +0.2020247f, -0.1674537f,
  +0.0088532f, -0.2446898f, -0.0000636f, +0.0959437f, -0.2922520f, -0.0863582f, +0.6098388f, -0.5042932f,
  -0.1473055f, +0.3946726f, -0.4018939f, +0.4420179f, +0.1508926f, -0.0165497f, -0.6059499f, -0.0130629f,
  +0.3528635f, +0.5849974f, +0.4523576f, +0.1334971f, -0.5518175f, +0.0886914f, -0.3133110f, +0.0140172f,
  -0.1478287f, +0.5374773f, +0.1040940f, +0.1076110f, -0.1489712f, -0.4024539f, -0.0039720f, +0.1881664f,
  -0.0434937f, +0.6469877f, -0.0060695f, +0.1004922f, -0.2325595f, +0.6246388f, +0.0806400f, +0.1714974f,
  +0.0342596f, +0.2351820f, +0.1403367f, +0.1864911f, -0.2394352f, +0.0347900f, +0.0956408f, -0.3229217f,
  -0.0640972f, +0.4050464f, -0.3146975f, +0.2182286f, -0.1671790f, +0.4791640f, +0.1050165f, -0.3272821f,
  -0.1401742f, -0.1095124f, -0.0180415f, -0.1306418f, -0.1058332f, -0.0145530f, +0.0198725f, -0.1506599f
);

const float biases[4] = float[4](
  +0.0172790f, +0.0366142f, -0.0168239f, -0.0019837f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer22 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1682246f, +0.1045803f, -0.1144299f, +0.7605042f, +0.1862884f, -0.0659957f, -0.0317710f, +0.0103732f,
  +0.1582610f, +0.0593282f, -0.3082115f, +0.2775683f, -0.1290749f, -0.1438029f, -0.0539320f, +0.3430059f,
  -0.1136148f, +0.0093511f, -0.0502992f, +0.3418575f, +0.0086518f, +0.0172118f, -0.2243701f, -0.2194922f,
  +0.0120782f, +0.2393877f, -0.1114881f, +0.4547109f, -0.1439313f, -0.2317025f, -0.2380988f, -0.1008776f,
  -0.1071576f, -0.0612879f, +0.1128285f, +0.1026172f, -1.0774294f, +0.5657006f, +0.1419709f, +0.4332125f,
  +0.2401428f, +0.0575572f, -0.1671909f, -0.1804420f, +0.2070108f, -0.1683944f, -0.1054809f, +0.0130375f,
  +0.0846735f, +0.0383150f, -0.1371031f, +0.0126396f, -0.1061214f, +0.1531407f, -0.1802079f, +0.0963614f,
  -0.0138117f, +0.1525080f, +0.0180668f, -0.0593091f, +0.2908864f, +0.0342025f, +0.4418292f, -0.2634488f,
  -0.1034758f, +0.1188759f, +0.1245663f, +0.1447797f, -0.0810724f, -0.3302490f, +0.0316747f, +0.1868847f,
  -0.2129363f, -0.0515044f, -0.0973207f, +0.9938149f, +0.0155336f, -0.1653198f, +0.1300007f, +0.0384018f,
  +0.4058459f, +0.0090187f, -0.1449645f, -0.0351933f, -0.1308679f, +0.1462873f, -0.2492950f, -0.0057794f,
  +0.2509475f, +0.1850886f, -0.0044472f, +0.0454124f, -0.0704193f, -0.1085355f, -0.0088861f, +0.4239407f,
  -0.2399124f, +0.0895441f, -0.0321460f, +0.5334415f, -0.1194290f, -0.1661762f, -0.1294847f, -0.2360961f,
  +0.1097446f, +0.2691070f, +0.2802744f, -0.0571549f, -0.4225278f, +0.2246834f, -0.5717313f, -0.2027656f,
  +0.0114433f, +0.2576175f, -0.0042591f, -0.1932799f, +0.0220645f, -0.1387323f, -0.0529001f, +0.0788959f,
  -0.0802466f, +0.1724276f, -0.0261511f, +0.0797812f, -0.2654184f, -0.0050056f, -0.0654382f, +0.1319686f,
  +0.0570106f, +0.3275444f, +0.0888944f, -0.1692986f, +0.0106854f, +0.2885652f, -0.1495549f, +0.7875887f,
  +0.2448581f, +0.1990241f, -0.0866080f, +0.0066273f, -0.0566194f, -0.0371516f, -0.0266675f, +0.1778822f,
  -0.0759718f, +0.0200117f, -0.1073498f, +0.0195567f, +0.1171281f, +0.0264682f, +0.1943034f, -0.1444916f,
  -0.0615801f, -0.2529504f, -0.1429047f, -0.4071563f, -0.1366711f, +0.2869462f, -0.0462293f, +0.1888050f,
  +0.0808623f, -0.1535305f, +0.0310637f, -0.4486434f, +0.1475905f, +0.1784951f, -0.0206513f, +0.3469111f,
  -0.1650220f, -0.1398002f, +0.2332712f, +0.0219076f, +0.0324413f, +0.1793129f, +0.0097551f, -0.2360469f,
  +0.1733279f, +0.3307269f, -0.0143377f, -0.1971454f, +0.2223635f, -0.4143322f, +0.2698806f, -0.3376936f,
  -0.0465699f, +0.0444445f, +0.0770438f, +0.0493781f, +0.3626999f, +0.3040200f, -0.0565464f, -0.0471837f,
  +0.2778432f, -0.1153775f, -0.1735189f, -0.0243975f, +0.3169835f, -0.0007178f, +0.0535590f, +0.0305406f,
  +0.3276947f, +0.0485598f, -0.3984941f, -0.4062936f, +0.2020401f, -0.2681928f, -0.0816529f, -0.1723617f,
  -0.0701154f, -0.3343989f, +0.1016394f, +0.1255044f, -0.2116375f, +0.0884261f, +0.1442988f, -0.2282694f,
  -0.0853844f, -0.0472005f, +0.0215897f, +0.3865109f, +0.0190905f, -0.0001707f, +0.0302882f, +0.2899633f,
  +0.2692499f, +0.2083822f, +0.0727994f, +0.0611194f, -0.1513930f, -0.2370790f, -0.0013201f, +0.1242091f,
  +0.0032066f, +0.1286942f, +0.2650568f, +0.2241183f, +0.0928458f, -0.3237292f, +0.1056019f, +0.1421675f,
  -0.1023692f, +0.2113328f, +0.0664586f, +0.3956197f, -0.2510280f, -0.2554742f, -0.0285496f, +0.0588710f,
  -0.1805597f, +0.1154619f, +0.3494746f, +0.0508083f, +0.3034106f, +0.1163554f, -0.3469380f, -0.0908414f,
  -0.2985873f, +0.0996041f, -0.0204890f, +0.0871950f, -0.2266974f, -0.2389870f, -0.0496082f, +0.0522861f,
  -0.3575516f, +0.0443683f, +0.1340019f, +0.0845420f, -0.0227015f, -0.1256364f, +0.0521899f, -0.0288849f,
  -0.1244956f, +0.0708157f, +0.0263589f, +0.1820226f, -0.2387399f, +0.1936568f, -0.0441020f, +0.0959831f,
  +0.2983214f, +0.1991303f, -0.1034513f, +0.0361028f, +0.1958468f, -0.0718071f, +0.2048971f, +0.0892960f
);

const float biases[4] = float[4](
  +0.0824397f, +0.0014612f, -0.0916689f, -0.0348746f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer22 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0505161f, +0.0554633f, +0.0133310f, +0.6002308f, -0.1348957f, -0.2443647f, +0.0141459f, +0.1003601f,
  +0.0466774f, +0.2951134f, -0.0007184f, +0.0880144f, -0.3358287f, -0.2855358f, -0.1207524f, -0.2128054f,
  +0.0640535f, +0.0972803f, -0.2635267f, +0.0359230f, -0.2317277f, -0.0252535f, +0.2012177f, -0.2147636f,
  +0.0689713f, +0.2351946f, -0.0615736f, -0.0481313f, +0.0763348f, -0.1105636f, +0.0315727f, +0.5074381f,
  -0.3394921f, -0.3301319f, +0.1897117f, +0.4452189f, +0.6988945f, -0.3056912f, -0.4202908f, +1.0026459f,
  +0.0760811f, +0.0113380f, -0.1446247f, +0.0621307f, +0.1211827f, +0.2837704f, -0.3315747f, +0.2426116f,
  -0.2056977f, +0.2039491f, -0.1101262f, +0.0249601f, +0.1862564f, -0.0865959f, +0.0110895f, +0.1562968f,
  -0.3924761f, +0.1860712f, -0.2257700f, +0.1415066f, -0.2585244f, -0.1253329f, -0.2903255f, +0.1483011f,
  -0.3598830f, -0.0616576f, -0.3109151f, +0.1964407f, -0.3146838f, +0.1250890f, -0.2241888f, +0.1989831f,
  +0.0013712f, -0.1723054f, -0.0199387f, +0.3431749f, -0.0732966f, -0.1254841f, -0.0946245f, +0.1653347f,
  -0.1625653f, -0.0424498f, -0.4291121f, -0.0019744f, -0.2667198f, -0.0505762f, +0.1199436f, -0.3928549f,
  +0.0364912f, -0.0059553f, -0.2235625f, -0.0833635f, +0.1043870f, +0.2309875f, +0.2840200f, -0.0975043f,
  -0.1037453f, -0.0413791f, -0.2474386f, -0.0495240f, -0.3606502f, +0.1245928f, -0.0145881f, -0.6726401f,
  -0.1449680f, +0.0080833f, -0.5603415f, -0.2794407f, +0.3464833f, +0.2235435f, +0.3790883f, +0.1439440f,
  +0.1855024f, -0.2558182f, -0.1642105f, -0.1775438f, -0.0358804f, -0.0096528f, +0.3143636f, -0.2169456f,
  +0.3053210f, -0.1560090f, +0.0132185f, -0.0913453f, -0.4657051f, +0.2131199f, -0.1081299f, -0.3598303f,
  -0.0470085f, +0.1242426f, -0.0566608f, -0.1315227f, -0.3432894f, -0.0715685f, -0.0093146f, +0.4799435f,
  -0.1152742f, -0.2863892f, -0.0465377f, +0.0580647f, -0.2963905f, -0.0063328f, -0.1087105f, +0.0078933f,
  -0.1313938f, +0.0530387f, -0.0751063f, +0.1842661f, -0.2397314f, +0.1089216f, +0.1189626f, -0.4879424f,
  -0.0617087f, +0.1809550f, +0.0054127f, +0.2359239f, +0.1475507f, -0.3461331f, +0.2131683f, +0.1440122f,
  -0.1573948f, +0.0095424f, +0.2038577f, +0.5428283f, -0.1763500f, -0.1464317f, -0.1556525f, -0.0434403f,
  -0.1286284f, -0.1973200f, +0.2196198f, +0.5935013f, -0.1608237f, +0.0157633f, -0.2573606f, -0.1113528f,
  -0.3842283f, -0.3685316f, +0.3346564f, +0.1933782f, +0.0012594f, -0.2049875f, +0.1420890f, -0.2324555f,
  -0.1295452f, +0.2669918f, +0.3082265f, -0.1644749f, -0.4436944f, -0.0266735f, -0.1517150f, -0.0192495f,
  +0.2346997f, +0.0110603f, +0.1483539f, +0.0461455f, -0.0240011f, -0.1309168f, -0.1013260f, +0.0234624f,
  +0.2276370f, +0.1456327f, +0.1448812f, -0.0857660f, -0.0321605f, -0.0589562f, -0.0131277f, -0.1726286f,
  +0.0016711f, -0.1579016f, +0.4125637f, +0.1992666f, +0.0370524f, -0.0176592f, -0.0757900f, -0.0332200f,
  +0.0854876f, +0.1089937f, -0.1341587f, -0.1733880f, +0.1676395f, -0.0480418f, +0.1446549f, +0.1853287f,
  -0.1568867f, +0.1048896f, -0.4829233f, -0.2581977f, +0.2216633f, -0.2135361f, +0.2073009f, -0.1344627f,
  +0.0022381f, -0.1720240f, +0.0084222f, -0.1154975f, -0.2803666f, -0.2596293f, +0.1620664f, -0.0748481f,
  +0.1852735f, -0.1252362f, +0.1558976f, -0.1465440f, -0.3550864f, +0.0470216f, -0.0651151f, -0.0874990f,
  -0.2979416f, -0.0071260f, -0.0671635f, -0.1818930f, +0.3469460f, -0.4378221f, +0.7635582f, -0.0403753f,
  -0.0904452f, -0.0370762f, +0.1218889f, -0.0011110f, +0.2524789f, +0.5810398f, -0.2708555f, +0.0070185f,
  -0.0097529f, +0.0377957f, -0.1312886f, +0.0663173f, +0.4596526f, -0.1282089f, +0.0260430f, -0.2887379f,
  +0.0800766f, +0.0074287f, -0.1498587f, +0.1052392f, -0.1265888f, -0.3214476f, -0.0702506f, +0.2274764f,
  -0.2290350f, -0.0299046f, +0.1407411f, +0.0331638f, -0.1335198f, +0.1751346f, +0.2516622f, -0.0318883f
);

const float biases[4] = float[4](
  +0.0518285f, +0.0367120f, -0.1573528f, +0.0783137f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer23 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2812446f, -0.2040770f, -0.0841443f, +0.1347747f, +0.4921433f, -0.2592583f, +0.0894959f, -0.0955717f,
  +0.0603319f, +0.0817719f, -0.0709751f, +0.2304321f, -0.0206772f, -0.0693317f, +0.1516590f, -0.0163177f,
  -0.1420950f, -0.0699148f, -0.1354093f, +0.0844842f, +0.1609366f, +0.0513062f, +0.0836226f, +0.0902728f,
  +0.0906792f, -0.0000021f, +0.3287677f, -0.0641479f, +0.0785855f, +0.3686483f, -0.0061824f, +0.0657369f,
  +0.3161022f, +0.8863137f, +0.1850374f, +0.1471665f, +0.0825719f, -0.1942470f, -0.1046213f, +0.3854263f,
  +0.0395065f, +0.0252865f, -0.1864640f, +0.1417665f, +0.1901542f, -0.0043528f, -0.0678566f, +0.0576699f,
  +0.1245821f, -0.2141527f, +0.0075110f, -0.0141952f, +0.3687993f, +0.2138717f, +0.1091299f, +0.0707310f,
  -0.2914315f, -0.3549197f, +0.1217193f, -0.0730675f, +0.1117910f, -0.3281675f, -0.3744060f, +0.2354863f,
  +0.1612406f, -0.1442258f, +0.1690739f, -0.1173758f, +0.1549991f, -0.1120675f, +0.0625572f, +0.0368029f,
  +0.1642801f, +0.0126219f, +0.0978439f, +0.0432083f, +0.2235722f, -0.0485043f, -0.0395250f, +0.0660827f,
  -0.1219424f, +0.0685564f, +0.0842006f, -0.0909497f, +0.1356970f, -0.0919940f, -0.1331248f, -0.0226175f,
  +0.0886047f, +0.1162256f, -0.2107022f, +0.0944477f, -0.0393442f, -0.0847844f, -0.0151498f, +0.1213185f,
  +0.1682524f, -0.1493451f, +0.0856598f, +0.0664551f, +0.0152366f, +0.4902599f, -0.1524348f, -0.0037279f,
  +0.3295458f, -0.3326857f, +0.0481616f, -0.0421698f, +0.5689670f, +0.1027548f, +0.4066372f, -0.0705133f,
  +0.2757078f, +0.1486232f, +0.0240021f, -0.4621062f, +0.3012954f, +0.0349929f, +0.0102054f, -0.2736240f,
  +0.2026738f, +0.2890548f, -0.1739067f, -0.0609051f, +0.0523914f, +0.0238603f, -0.1306325f, +0.0672388f,
  +0.5558183f, -0.1422512f, -0.0238348f, +0.0258074f, -0.2752168f, -0.0757267f, -0.3459995f, -0.0134455f,
  +0.2886810f, -0.0695682f, -0.1567018f, -0.1281114f, -0.5089909f, -0.2771605f, -0.0597046f, -0.0077557f,
  +0.0111029f, -0.2529501f, +0.0717884f, +0.0817739f, -0.0110643f, +0.0613976f, -0.2331364f, -0.1138403f,
  -0.0876243f, -0.0058098f, +0.0387710f, +0.0842930f, -0.4270714f, -0.1886411f, -0.1735029f, +0.1882291f,
  -0.0404891f, -0.5463206f, +0.1513903f, -0.0901802f, +0.1750994f, -0.2835891f, +0.0282460f, -0.1315851f,
  +0.0809276f, -0.3853627f, -0.1329672f, -0.0139952f, +0.0792139f, +0.2672842f, +0.0383790f, -0.1767569f,
  +0.0379180f, +0.7776628f, -0.2095032f, -0.5035157f, -0.5385117f, +0.2752689f, +0.4513241f, -0.1084996f,
  -0.6472098f, +0.2291580f, +0.2208001f, -0.1866812f, -0.5050639f, +0.2472503f, +0.6757548f, +0.0315907f,
  -0.0093475f, +0.0056499f, +0.0733737f, -0.1737461f, -0.2641861f, +0.2209313f, -0.1985108f, +0.0873345f,
  +0.0066824f, -0.0840010f, -0.0953635f, -0.0595633f, -0.4418090f, +0.1511883f, +0.1865091f, -0.0625034f,
  +0.0335995f, -0.0553479f, -0.3271668f, -0.1098985f, +0.0418573f, +0.0597539f, +0.2925442f, -0.5064192f,
  -0.0458463f, -0.0732069f, -0.0337237f, +0.0649135f, +0.0656121f, -0.0085595f, +0.1096891f, -0.0977455f,
  -0.0612489f, -0.1960524f, +0.0684308f, -0.0433323f, +0.0754928f, +0.1054975f, +0.1140231f, -0.1841966f,
  -0.2595889f, -0.1439792f, +0.0912186f, -0.1573857f, +0.2373101f, +0.1332573f, -0.0078405f, +0.1750719f,
  +0.0315558f, -0.0260163f, -0.1226576f, -0.0774928f, +0.0387090f, +0.1224782f, -0.0449841f, +0.0266522f,
  -0.1714186f, +0.6158367f, -0.1128936f, -0.2444433f, +0.3409663f, +0.8138638f, -0.2357753f, -0.0189380f,
  -0.3968603f, -0.4881061f, +0.1909392f, -0.3136269f, -0.4823719f, +0.4207946f, -0.2128491f, +0.1048768f,
  -0.5211614f, -0.0908105f, +0.0826156f, -0.2079531f, +0.0145563f, +0.2460467f, +0.0075860f, -0.0810318f,
  -0.2139911f, -0.0418150f, -0.0955158f, -0.0794284f, +0.0277777f, +0.3602048f, -0.4843982f, -0.1744432f,
  -0.5264263f, -0.5097216f, +0.3593689f, -0.0657257f, -0.3634793f, +0.0517454f, -0.0753640f, +0.1336878f
);

const float biases[4] = float[4](
  +0.0433791f, +0.0467917f, -0.0169958f, -0.0308199f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer23 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0325104f, +0.0765981f, -0.1488784f, -0.0573568f, +0.2306065f, +0.0340083f, -0.2559355f, +0.1522300f,
  -0.0683217f, +0.2574826f, -0.0850813f, -0.1558904f, +0.0309070f, -0.1718945f, -0.1145973f, -0.0721506f,
  +0.0408836f, +0.1536756f, +0.1270824f, +0.0079763f, -0.0461424f, -0.0983270f, -0.2608902f, -0.1652538f,
  -0.2385145f, +0.2199560f, -0.1235859f, -0.0076604f, +0.2234395f, +0.1393648f, -0.0606179f, +0.0789471f,
  +0.0709705f, +0.3633468f, -0.0987407f, -0.2073272f, +0.2480222f, -0.1458716f, +0.2910046f, -0.2888026f,
  +0.0089270f, +0.0482050f, +0.3654195f, -0.0748517f, +0.1504627f, -0.2866716f, +0.1926242f, -0.0205777f,
  -0.0876961f, -0.3087409f, +0.3897977f, -0.1126985f, -0.1547272f, -0.2964740f, +0.2194932f, -0.1611619f,
  +0.1343504f, +0.5462707f, +0.0785696f, +0.4937759f, +0.5139542f, -0.1425234f, +0.2540008f, -0.3313839f,
  -0.1745588f, -0.5645530f, +0.1018452f, -0.3808739f, +0.2006176f, -0.1695586f, +0.0660855f, -0.1462416f,
  -0.2960319f, -0.2567295f, +0.2878653f, +0.3902504f, -0.3057089f, +0.3508237f, +0.7714005f, -0.1861438f,
  +0.5630215f, +0.1084266f, -0.1802344f, +0.1018528f, -0.7182940f, -0.0236179f, -0.1609060f, -0.0562318f,
  -0.0149926f, +0.2878699f, +0.1806353f, -0.1898725f, -0.0060535f, +0.0395753f, +0.0815214f, -0.0212359f,
  +0.1581438f, -0.2924657f, +0.3331847f, -0.0914910f, -0.1144925f, +0.1027421f, -0.1113492f, +0.0652140f,
  +0.2332792f, -0.1357932f, +0.2650516f, +0.2779698f, +0.4186733f, -0.0756318f, -0.3906805f, -0.4414183f,
  -0.0935898f, -0.0288826f, +0.2711819f, -0.1526090f, +0.3319839f, -0.0452055f, +0.3521287f, +0.1523896f,
  -0.2053960f, +0.1095402f, -0.0607920f, +0.0821713f, +0.1585676f, +0.0815388f, +0.2921638f, +0.0126344f,
  -0.0309430f, +0.2289270f, -0.0010607f, +0.1211302f, -0.1028861f, -0.0919043f, +0.0848687f, -0.0737907f,
  +0.0794081f, -0.0046621f, +0.1061099f, +0.1080164f, +0.1008949f, +0.0771229f, -0.0428566f, -0.0173263f,
  +0.0129247f, +0.3032244f, -0.1583989f, +0.0923356f, -0.3400829f, -0.2365070f, -0.2536853f, -0.1008214f,
  -0.1970715f, +0.3299956f, +0.2677072f, -0.0373841f, -0.2006073f, -0.0134264f, +0.1621493f, +0.0434969f,
  +0.2821827f, +0.3403544f, +0.1219748f, +0.0888588f, -0.0479699f, +0.0061683f, +0.0953195f, +0.1794189f,
  +0.2190559f, +0.5408655f, -0.1575287f, +0.0610986f, -0.4055239f, -0.0468958f, -0.2831349f, +0.1413177f,
  +0.2926233f, -0.5378864f, -0.0118366f, -0.2833816f, +0.1301481f, +0.2030326f, -0.0428128f, +0.0986848f,
  +0.0309349f, +0.1002251f, +0.0445465f, -0.1025080f, -0.0337705f, +0.1084768f, -0.0297475f, +0.1793316f,
  +0.0646340f, -0.0392697f, -0.2017925f, +0.0656697f, -0.0368370f, -0.0024743f, -0.3831097f, +0.0083887f,
  +0.2984545f, -0.2250524f, +0.0234965f, +0.0000679f, -0.2750247f, -0.0305438f, +0.0460699f, +0.2352241f,
  -0.0985046f, -0.0046696f, +0.0306762f, +0.1322871f, -0.3913986f, -0.1325213f, +0.2270352f, +0.0265713f,
  -0.1567557f, -0.0316115f, +0.0755307f, -0.1255617f, -0.2865109f, +0.3395751f, -0.1842769f, -0.0916363f,
  +0.0282557f, -0.3229233f, +0.5322476f, -0.1135393f, +0.1888165f, +0.0576119f, +0.3261649f, -0.0063845f,
  -0.0802718f, -0.2985328f, -0.0759569f, +0.1534273f, +0.2971188f, -0.1820677f, +0.0999055f, -0.1014598f,
  +0.4058734f, -0.3729624f, +0.2782069f, +0.0176020f, -0.0985869f, +0.1535053f, -0.3942942f, -0.1149142f,
  +0.0023189f, +0.6434695f, -0.0775129f, -0.4085371f, +0.6315272f, +0.3424063f, -0.3899251f, +0.4479953f,
  -0.1243209f, -0.0992735f, -0.1073457f, +0.0923341f, -0.2481935f, +0.4283745f, -0.1519124f, +0.0024683f,
  +0.1250791f, -0.1963497f, +0.1202584f, +0.0941933f, -0.1492811f, +0.0931938f, -0.0539340f, -0.2835837f,
  -0.2096703f, +0.8061106f, -0.3970575f, -0.0308112f, -0.2176486f, +0.6058961f, -0.0429928f, +0.1150971f,
  -0.4577636f, -0.2544599f, +0.0741932f, -0.1268967f, -0.3839921f, -0.2488123f, +0.3798909f, -0.0330722f
);

const float biases[4] = float[4](
  +0.0411524f, -0.1107673f, +0.0382236f, -0.1342668f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer24 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1692483f, -0.0150883f, -0.0702312f, -0.1360473f, -0.0491754f, +0.0365439f, -0.0626021f, +0.2401753f,
  +0.3285698f, -0.2034331f, -0.4573047f, -0.2437902f, +0.3127490f, +0.0898354f, -0.0592932f, +0.3550743f,
  -0.0688552f, -0.0212075f, +0.0164831f, -0.1175856f, +0.1392266f, +0.0818764f, +0.1856327f, +0.2634204f,
  -0.2688826f, +0.0714448f, -0.3844637f, +0.6337041f, -0.4674315f, -0.0280371f, -0.0407465f, +0.5824038f,
  -0.2324778f, -0.5534686f, -0.0789779f, -0.1646512f, +0.0940139f, +0.1562722f, -0.2637361f, -0.0592937f,
  -0.5063792f, -0.1690953f, +0.1054645f, +0.0968728f, +0.0378253f, +0.3975419f, +0.1582747f, -0.0654263f,
  -0.2229932f, +0.1082737f, -0.1460350f, +0.1818432f, +0.0051229f, -0.0854274f, -0.1330927f, +0.6714948f,
  -0.1638093f, -0.0027046f, +0.0922062f, +0.1320857f, +0.3130893f, -0.4626578f, -0.0233864f, +0.3995195f,
  -0.1397584f, -0.0449408f, -0.1314864f, -0.0572186f, +0.0907674f, +0.5996010f, +0.3981258f, +0.0097758f,
  +0.0000308f, +0.0950469f, +0.0816111f, -0.1982409f, -0.0151817f, -0.0442128f, +0.1165614f, -0.0006124f,
  +0.3450111f, -0.1080694f, -0.0580836f, -0.2576260f, +0.0215782f, -0.0937577f, +0.0809166f, +0.0169023f,
  -0.0862967f, +0.0202659f, -0.0757076f, +0.1470840f, -0.2100911f, +0.0341427f, -0.0274446f, -0.2048312f,
  -0.1114029f, +0.3234242f, -0.5024262f, +0.1835827f, -0.0836246f, -0.0365666f, +0.2279162f, -0.1317579f,
  -0.4897696f, +0.2380727f, +0.1146537f, -0.2895360f, -0.4132052f, -0.1000654f, +0.1340594f, -0.2729728f,
  -0.2283385f, +0.1309189f, -0.2651695f, -0.0668373f, -0.3676647f, +0.0367213f, -0.0899335f, -0.1979524f,
  +0.1086393f, +0.1357017f, -0.4083563f, +0.0580002f, -0.0631281f, -0.0724358f, +0.0251400f, +0.1285237f,
  +0.0474125f, +0.1671539f, +0.0963979f, +0.1415336f, +0.0753950f, -0.3324243f, -0.3403572f, +0.0886806f,
  -0.0097098f, +0.2179593f, -0.1069229f, -0.1152877f, -0.0144716f, -0.3572754f, +0.0555776f, +0.2315454f,
  -0.0981997f, +0.1516460f, -0.2159909f, +0.0494852f, -0.1156326f, -0.0486984f, -0.1249504f, +0.1335859f,
  -0.2546348f, -0.1433690f, -0.1036665f, +0.0680278f, -0.2353679f, -0.0959068f, -0.0874278f, +0.1629457f,
  -0.2575872f, -0.2378314f, +0.1401734f, +0.0910635f, -0.2344586f, +0.1784727f, -0.1497895f, -0.0787238f,
  +0.1404244f, -0.1453764f, +0.1216313f, -0.3775076f, -0.0624242f, -0.0506985f, +0.1096670f, +0.1291151f,
  -0.3811844f, +0.0544761f, -0.1899358f, +0.1863444f, -0.1668572f, -0.0621265f, +0.2360090f, +0.0723655f,
  -0.1815060f, +0.3456372f, +0.0833358f, -0.1783993f, +0.3741440f, -0.6069969f, +0.3099946f, -0.4315147f,
  -0.0051406f, +0.0206607f, -0.0590175f, +0.0256128f, +0.0727352f, +0.0714057f, -0.1832693f, +0.0436667f,
  -0.0991420f, +0.0990655f, +0.2564244f, +0.1162840f, -0.2020727f, -0.1616008f, -0.1283673f, +0.0160065f,
  +0.0067812f, -0.3531530f, +0.0647631f, +0.2030589f, +0.0358369f, +0.1536288f, +0.2515125f, -0.1712361f,
  +0.0862489f, +0.1271461f, +0.0899639f, -0.2272646f, +0.1607494f, -0.0528133f, -0.1856461f, +0.1402454f,
  -0.0502276f, -0.1798051f, +0.1511162f, -0.1029744f, +0.0660019f, -0.0120957f, +0.0020458f, -0.0530060f,
  +0.1733570f, +0.1214722f, +0.0912199f, +0.0531267f, -0.1310825f, +0.0115844f, +0.2174631f, -0.1059547f,
  -0.3035215f, +0.4734543f, -0.0642294f, +0.3952857f, +0.1596207f, +0.0684311f, +0.2214555f, -0.1669688f,
  -0.3261586f, -0.0028303f, +0.1218769f, +0.1932608f, +0.0371199f, +0.0908355f, -0.0018978f, -0.0666424f,
  +0.2170368f, -0.0513824f, -0.2930060f, -0.2477827f, +0.0598182f, +0.1326300f, -0.0554089f, +0.1800963f,
  +0.1117524f, +0.1250238f, -0.0205343f, -0.1668049f, +0.1078885f, -0.1452993f, -0.1127000f, +0.0410282f,
  -0.0218811f, +0.1519422f, -0.1414259f, -0.4159345f, +0.2010210f, +0.1454627f, +0.0899981f, +0.3297060f,
  +0.0238502f, +0.1332004f, -0.1190124f, +0.1067363f, +0.0475026f, -0.2526078f, -0.1314840f, +0.2481239f
);

const float biases[4] = float[4](
  -0.0177907f, -0.0250384f, +0.0222617f, +0.0126450f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer24 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1237863f, +0.5304904f, +0.3628515f, +0.0967536f, -0.1440379f, -0.1856264f, +0.0982706f, +0.3612802f,
  -0.5033324f, +0.2235309f, +0.0042025f, -0.0216145f, -0.0371844f, -0.2056145f, +0.1937263f, +0.0393428f,
  +0.0963972f, +0.0193867f, +0.0921317f, -0.0450991f, +0.1823841f, -0.2068440f, +0.0437078f, +0.0458305f,
  +0.0379198f, -0.2156616f, +0.3001198f, +0.5167347f, -0.1236871f, +0.1328655f, +0.4032266f, -0.1199339f,
  -0.4213448f, -0.3104266f, +0.0708440f, -0.4252917f, -0.2120822f, -0.5696333f, -0.0160510f, -0.4864662f,
  -0.1608243f, -0.1460008f, +0.0670711f, -0.1039323f, -0.0039829f, -0.0211700f, +0.1413402f, -0.4441136f,
  +0.1825439f, +0.0515942f, -0.2443083f, +0.0259725f, +0.0202855f, +0.0612786f, +0.1970586f, -0.3783883f,
  -0.1052870f, +0.1416698f, -0.0766402f, +0.0898114f, +0.0042766f, +0.2159293f, -0.1154776f, -0.3260886f,
  -0.0401268f, +0.0482356f, +0.0236677f, +0.0744970f, -0.0666141f, +0.2076293f, +0.1822518f, -0.1601711f,
  +0.0788721f, -0.0225966f, -0.1153780f, +0.0789579f, +0.1170429f, +0.0434077f, +0.2391209f, -0.3306039f,
  +0.4103167f, +0.1521544f, -0.4378718f, -0.0939108f, -0.0834298f, +0.2928221f, -0.3032213f, +0.1817412f,
  -0.0089459f, -0.1350735f, -0.1434958f, -0.2307456f, +0.5407067f, +0.0146584f, -0.2169656f, +0.0600521f,
  +0.3364308f, +0.2396478f, +0.1322358f, -0.0769123f, +0.3400821f, +0.1404584f, +0.1880665f, -0.2295450f,
  +0.0454603f, +0.2162395f, +0.3482327f, -0.0869739f, -0.3989494f, +0.1680937f, -0.3727016f, +0.3793319f,
  -0.1828666f, -0.2148270f, +0.4068403f, +0.3560796f, -0.0668133f, +0.1538394f, -0.0636849f, -0.1327346f,
  -0.0252290f, +0.0883503f, -0.4523737f, +0.3008432f, -0.1135078f, -0.0433688f, -0.0969340f, -0.1278112f,
  -0.1278658f, +0.0860010f, +0.1587278f, +0.2541509f, +0.0394979f, +0.3624795f, -0.2725392f, -0.4013915f,
  +0.1358597f, +0.1280694f, +0.0108746f, -0.0931008f, -0.0828265f, -0.0729442f, +0.1504581f, -0.1425199f,
  -0.0222592f, -0.1331733f, +0.0328059f, -0.0188920f, +0.0839628f, +0.0972375f, +0.0775223f, +0.1013070f,
  +0.1658890f, +0.4765894f, +0.0459280f, -0.1299047f, +0.0237156f, -0.0027038f, -0.2502479f, +0.0524021f,
  -0.3110734f, +0.0082206f, +0.1432215f, -0.0450952f, -0.0809586f, -0.0357073f, +0.3804264f, +0.0321129f,
  +0.0645189f, +0.1987591f, -0.4386773f, -0.3448699f, -0.0279423f, +0.0429519f, +0.0783164f, +0.0150099f,
  +0.1131421f, +0.0451032f, -0.4501344f, +0.3616318f, -0.4903881f, +0.4389850f, +0.2457646f, +0.0945141f,
  +0.1378145f, +0.1546306f, -0.1137009f, +0.4073350f, +0.2500716f, -0.0333678f, +0.1134111f, +0.0104430f,
  -0.2044621f, -0.0938590f, -0.3696528f, +0.0942714f, +0.0531234f, +0.0267327f, -0.2391900f, +0.0562703f,
  -0.1626052f, -0.1756319f, -0.0955974f, -0.0343670f, +0.1141401f, -0.1631252f, -0.0985881f, +0.1003275f,
  -0.0775571f, +0.0032857f, +0.1165854f, -0.1149926f, +0.0641672f, -0.3661756f, +0.1818130f, +0.0265536f,
  +0.2073438f, -0.0778246f, -0.0928766f, -0.1291473f, +0.2638051f, +0.1045233f, +0.1459757f, +0.0174680f,
  -0.4467619f, +0.1733883f, -0.3825671f, +0.2304956f, +0.2142437f, +0.0721461f, -0.0772469f, +0.4398432f,
  -0.0372392f, -0.0622209f, +0.2116451f, -0.2092656f, +0.1666775f, +0.1569097f, -0.0604413f, +0.2071821f,
  +0.2994378f, +0.0020376f, +0.3878977f, -0.0654122f, +0.0567853f, -0.0092967f, +0.0256917f, +0.0517240f,
  -0.2203856f, +0.0917078f, +0.1557935f, +0.2300832f, +0.2917825f, +0.4034041f, +0.3202064f, +0.1968334f,
  +0.0881578f, -0.0504154f, -0.0083975f, +0.1106764f, +0.2464311f, -0.2991107f, -0.2982104f, -0.2081858f,
  -0.0581338f, -0.0701960f, +0.4506214f, -0.0318671f, +0.2464825f, +0.0360755f, -0.1436598f, -0.0901965f,
  -0.0972288f, +0.0543570f, -0.2450211f, +0.0467017f, -0.1953357f, +0.1956510f, +0.3389102f, +0.1396704f,
  +0.0750300f, -0.1245166f, +0.1102437f, +0.0073710f, +0.0715282f, +0.2482545f, -0.0005144f, -0.1826448f
);

const float biases[4] = float[4](
  -0.0031799f, -0.0403745f, +0.1749893f, +0.0277139f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer25 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0157093f, -0.0373342f, +0.0581241f, -0.0906205f, +0.0090928f, +0.0359473f, +0.0947003f, -0.0949231f,
  +0.0048479f, +0.0032658f, +0.1177593f, -0.0768699f, -0.0218044f, +0.0492487f, +0.1272543f, -0.1058994f,
  +0.0833126f, +0.1360549f, +0.1943164f, +0.1712135f, +0.0540790f, -0.0271499f, -0.0821979f, +0.2122640f,
  +0.0922100f, -0.0798798f, -0.0223364f, +0.1290968f, +0.1006697f, +0.1857668f, +0.3035615f, +0.2247757f,
  +0.5936131f, -0.2875654f, +0.1284783f, -0.0971334f, +0.0339917f, -0.0023120f, +0.2389500f, +0.1090835f,
  -0.4158243f, -0.4007930f, -0.0273499f, +0.0769325f, +0.0665754f, +0.1439921f, -0.3336219f, +0.2782332f,
  -0.0898730f, +0.2680006f, +0.1099015f, +0.1074582f, -0.1199569f, -0.0925344f, +0.1829500f, -0.1612585f,
  -0.0999275f, +0.3172365f, -0.1735873f, +0.0936957f, +0.2744152f, -0.1944577f, +0.0696706f, -0.0218255f,
  -0.1253333f, +0.0037110f, -0.0568515f, +0.2567551f, -0.3790325f, +0.1434754f, -0.4577624f, +0.6351833f,
  -0.0877030f, -0.1103197f, +0.5647768f, -0.1546907f, -0.2616999f, +0.6523311f, +0.3542733f, -0.2342373f,
  -0.3954543f, +0.3111976f, +0.0214456f, -0.3190260f, -0.3018066f, +0.3284470f, +0.0504666f, -0.2364647f,
  -0.2481183f, +0.1273061f, -0.2665217f, -0.1287805f, +0.3784557f, +0.6146168f, -0.0035624f, +0.0675021f,
  +0.2237925f, +0.7607041f, +0.2604126f, -0.0702855f, +0.0116528f, -0.1626538f, -0.5994273f, +0.1338121f,
  -0.3436064f, +0.3665931f, +0.0269805f, +0.1818265f, -0.0524217f, +0.0794017f, -0.7266142f, +0.2032880f,
  -0.0026033f, -0.1350651f, +0.3609510f, +0.4420850f, -0.2572658f, +0.1750920f, -0.4887490f, +0.2470423f,
  -0.3847552f, -0.1605311f, +0.2091616f, -0.0353191f, -0.1490669f, +0.1201438f, -0.2271014f, -0.2928184f,
  -0.2117046f, +0.0028780f, +0.0670649f, +0.0946711f, -0.3368625f, +0.4250826f, +0.0733694f, -0.1363772f,
  -0.2333887f, +0.0286772f, -0.1934267f, +0.1675636f, -0.5723420f, +0.0809134f, +0.1060828f, +0.4148647f,
  +0.0835899f, +0.1738527f, +0.2047089f, -0.1124909f, -0.1374630f, +0.5216929f, -0.0930830f, -0.0240776f,
  +0.0469455f, -0.1129878f, +0.2076899f, -0.3694156f, +0.1303623f, +0.3084012f, -0.2967177f, -0.1409527f,
  +0.1335036f, -0.2843901f, -0.0490939f, -0.0459145f, -0.0799146f, -0.2750992f, +0.2170511f, -0.3553945f,
  +0.0350742f, +0.4496695f, +0.3001388f, +0.0763424f, -0.0907054f, -0.6600013f, -0.7178554f, -0.1351531f,
  -0.4103386f, -0.3205548f, -0.0677097f, -0.2928357f, -0.4042118f, -0.1114794f, +0.2466757f, -0.1927216f,
  +0.1590697f, +0.4188007f, -0.0349823f, -0.0401184f, +0.0475019f, +0.2513138f, -0.0577432f, -0.3787636f,
  +0.2857336f, +0.8036768f, +0.0347010f, -0.1166101f, +0.1598042f, -0.2349893f, -0.3967290f, -0.1542878f,
  +0.0460022f, +0.0758397f, +0.0653541f, +0.3907355f, -0.3315500f, -0.5882154f, -0.1788403f, -0.7490292f,
  +0.1880401f, -0.2344380f, +0.2106894f, -0.4490499f, -0.3121678f, +0.2508501f, -0.0310154f, +0.3309697f,
  -0.1485929f, +0.0796141f, +0.1603877f, -0.0449151f, -0.0662570f, +0.0434385f, +0.2417719f, -0.1553566f,
  +0.3017626f, -0.3206905f, +0.0777799f, +0.0235583f, -0.1625858f, +0.1083312f, -0.0710913f, +0.3435183f,
  -0.1704800f, +0.0226580f, -0.0478253f, -0.1075744f, -0.0439188f, +0.2675490f, +0.2450362f, -0.0563986f,
  -0.3544108f, -0.2081115f, +0.3587390f, +0.2382447f, -0.1743242f, +0.3456755f, +0.0531714f, -0.1898226f,
  +0.0410358f, -0.1001228f, -0.0660452f, -0.5500270f, +0.6436076f, -0.1950535f, -0.5422710f, +0.2423467f,
  -0.3484148f, +0.1751567f, -0.2837696f, +0.2850763f, +0.2194670f, -0.2127788f, -0.0884291f, -0.1215093f,
  +0.0969908f, -0.3238048f, +0.0167651f, +0.1296258f, +0.2078986f, +0.3054277f, +0.2182376f, +0.0671474f,
  +0.1326329f, -0.3336276f, -0.0303263f, -0.2984971f, -0.2838897f, -0.1186098f, +0.0796930f, +0.2186062f,
  +0.0333993f, +0.4364260f, +0.0769390f, +0.1236691f, +0.3318838f, -0.0987304f, +0.0036575f, +0.2658030f
);

const float biases[4] = float[4](
  +0.0063112f, -0.1740460f, -0.1214399f, +0.0066647f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer25 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0338247f, -0.0725942f, +0.2563733f, -0.1293524f, +0.5074551f, +0.3061443f, +0.0773733f, +0.2417563f,
  -0.5003480f, -0.6283512f, -0.7460255f, -0.0400856f, +0.7202560f, -0.2808372f, -0.2264240f, +0.1071255f,
  +0.0899744f, -0.0083132f, -0.0253272f, -0.1234873f, -0.2229702f, -0.0844809f, +0.2742112f, +0.0926298f,
  +0.5236247f, -0.2281308f, +0.0135437f, +0.0580024f, +0.1319157f, +0.0940758f, +0.2413193f, +0.3088726f,
  +0.0120413f, -0.1192786f, +0.3741679f, -0.1697019f, +0.1997299f, -0.0837211f, -0.0976293f, -0.1839377f,
  +0.0498103f, +0.0121865f, +0.1179522f, -0.1632981f, -0.0932816f, +0.0831795f, +0.0467842f, -0.2068295f,
  +0.1356194f, +0.0749660f, -0.0763168f, +0.0072770f, +0.2094978f, +0.1066365f, +0.2403916f, -0.1893305f,
  -0.0352258f, +0.0296998f, -0.1708375f, +0.0870667f, +0.0784921f, -0.1878455f, +0.0481392f, +0.0461509f,
  -0.0496617f, +0.1000098f, -0.0671918f, +0.0592178f, +0.0880268f, -0.0036446f, +0.0582415f, -0.1751431f,
  +0.3345630f, +0.5798019f, -0.0070900f, -0.1246254f, +0.1204102f, +0.1808291f, -0.0817200f, +0.3744974f,
  -0.1481549f, +0.3188910f, -0.0103961f, -0.5568197f, +0.2369017f, -0.0662298f, +0.5357986f, -0.2356846f,
  +0.0657876f, -0.0781032f, -0.0965131f, +0.2849329f, +0.1169776f, -0.5503991f, +0.0120422f, -0.1843010f,
  -0.5534855f, +0.1939205f, +0.2969590f, +0.0690982f, -0.3691770f, -0.5871701f, +0.2403475f, -0.2090093f,
  -0.5702386f, -0.5890543f, +0.4182389f, +0.5920400f, -0.2219444f, -0.6883711f, -0.1831071f, -0.2880850f,
  -0.1601747f, -0.2685623f, +0.1151544f, -0.1427849f, +0.0990796f, +0.2035583f, -0.3675105f, -0.1992009f,
  +0.0009026f, -0.0172903f, +0.1132720f, +0.0877131f, -0.0707983f, -0.1753612f, +0.0086977f, -0.3751013f,
  +0.1856775f, +0.2082651f, -0.2082517f, -0.0137625f, +0.3865791f, +0.1090482f, +0.0670169f, -0.1391707f,
  -0.0041203f, -0.0995556f, +0.0024354f, -0.1541519f, -0.0508780f, +0.0941193f, -0.1579340f, +0.0220793f,
  -0.1014820f, +0.0347037f, -0.2411666f, +0.1206050f, -0.1411755f, +0.0413740f, -0.0466145f, -0.0948827f,
  +0.0213533f, +0.1381039f, +0.2992979f, -0.0485260f, +0.2085364f, -0.0793628f, +0.0030427f, +0.0404107f,
  -0.0923729f, -0.1230875f, -0.2276357f, +0.1551282f, +0.2234849f, -0.1564148f, +0.1371988f, -0.1760943f,
  +0.3841172f, -0.1421928f, -0.0769328f, +0.1067346f, -0.2524461f, +0.0385341f, +0.0413201f, -0.0688149f,
  -0.0190309f, +0.2465450f, -0.6602416f, +0.2550759f, +0.4683305f, +0.4724917f, -0.2063301f, +0.6805987f,
  -0.2994851f, +0.1862098f, -0.2279283f, +0.1633610f, +0.3572149f, -0.0909187f, -0.2071364f, -0.2889940f,
  -0.0865647f, +0.2365742f, -0.0166923f, +0.0164461f, -0.1594864f, -0.1391239f, -0.4375889f, -0.1740280f,
  +0.2195553f, -0.1893192f, -0.2313430f, -0.1108713f, +0.0927810f, -0.0710488f, -0.1859268f, -0.2073942f,
  -0.1011431f, +0.0009801f, -0.0018771f, -0.0802282f, -0.0037251f, -0.0074663f, -0.0951791f, -0.0736284f,
  +0.5428099f, +0.6778829f, +0.1495785f, -0.1412277f, +0.1173426f, -0.0142473f, -0.4293125f, +0.2480767f,
  +0.2860896f, -0.7312797f, -0.0934154f, +0.0179686f, +0.5012714f, +0.0734419f, +0.2455141f, -0.2553297f,
  +0.4011890f, +0.1547472f, +0.1617817f, +0.5941966f, -0.7425463f, +0.3528144f, -0.2015581f, -0.0978805f,
  +0.1269796f, +0.4446106f, -0.2044632f, +0.2388609f, -0.0841811f, -0.0317142f, +0.0509220f, +0.0465790f,
  +0.1939848f, -0.1605342f, +0.0283355f, +0.0184968f, +0.4481724f, -0.4481962f, +0.2777811f, -0.0390531f,
  +0.3342260f, +0.3787969f, +0.7186306f, -0.0990308f, +0.2294897f, +0.4501796f, +0.6957029f, +0.1015150f,
  +0.1728823f, +0.1822413f, +0.1060568f, -0.0731154f, -0.1242866f, -0.0228842f, +0.0404500f, +0.0451051f,
  +0.0402693f, +0.2315886f, -0.0526620f, -0.0962258f, -0.3410492f, +0.1067520f, -0.1546209f, -0.0539429f,
  -0.2499750f, +0.0550204f, +0.1121432f, +0.0664432f, -0.1879244f, -0.0541474f, +0.2483566f, -0.1826823f
);

const float biases[4] = float[4](
  +0.0727263f, -0.0880860f, +0.0470655f, -0.0732149f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer26 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2091352f, -0.1413855f, -0.3709705f, +0.1051212f, +0.0646942f, -0.1541223f, +0.0623642f, +0.1514193f,
  -0.1234870f, -0.2524317f, +0.0247303f, +0.3025263f, +0.0145870f, +0.0879128f, -0.0143324f, +0.0844046f,
  -0.0678225f, +0.2662577f, +0.0552308f, +0.0592864f, -0.1069566f, +0.0657934f, -0.0757646f, +0.0753368f,
  +0.5601470f, -0.4289286f, -0.0834094f, -0.3960173f, -0.0605755f, -0.0049002f, +0.1116511f, +0.1485910f,
  -0.2938681f, +0.5789082f, -0.1738674f, +0.3411859f, -0.2049008f, +1.2362779f, +0.2365224f, +0.1989584f,
  +0.0439164f, -0.0896594f, +0.7355216f, +0.2836394f, -0.4883879f, +0.1725009f, -0.4824557f, +0.0728354f,
  -0.1328943f, +0.0828953f, +0.2481500f, -0.0034206f, +0.1521631f, +0.0241340f, -0.1135947f, -0.1889271f,
  +0.1199729f, +0.1696743f, -0.0593404f, -0.1719424f, +0.3212453f, -0.5271695f, +0.2793629f, +0.3433361f,
  -0.0411751f, -0.2049777f, +0.1918409f, -0.1480264f, +0.0256396f, +0.2099243f, +0.0703876f, +0.0340630f,
  +0.0494348f, +0.0551373f, +0.0377510f, +0.2859134f, +0.0807469f, +0.1032171f, +0.1492863f, -0.0218018f,
  -0.2403092f, -0.2459064f, +0.0221493f, +0.2651260f, -0.0442087f, +0.1672604f, +0.1228491f, -0.0516819f,
  -0.1602883f, -0.1245771f, +0.1374294f, -0.0494610f, -0.0676420f, -0.0623929f, -0.1177616f, -0.1047254f,
  +0.2580041f, +0.1166534f, -0.0437883f, -0.2474745f, +0.0952278f, +0.1756732f, -0.1903697f, -0.3035755f,
  +0.2911024f, +0.1122550f, +0.3049119f, +0.5032204f, -0.1166902f, +0.1083718f, -0.1156867f, -0.1352467f,
  -0.0302504f, -0.3038035f, -0.0831896f, -0.0099479f, +0.0063457f, -0.0533511f, -0.1178732f, -0.1160301f,
  +0.0669077f, +0.2371928f, +0.5039214f, +0.1501683f, +0.2102070f, +0.1713084f, -0.0267575f, -0.5635821f,
  +0.0973958f, +0.3769958f, +0.0451925f, +0.1538440f, +0.4797798f, -0.0745666f, -0.0269873f, -0.3109230f,
  +0.0712828f, -0.1685872f, -0.0508766f, +0.0493544f, -0.2030850f, +0.1291332f, -0.1899577f, -0.2862181f,
  -0.0595616f, -0.2111948f, +0.3664633f, +0.0288875f, +0.0157536f, -0.0741500f, -0.1141677f, +0.0429725f,
  +0.1701347f, +0.0398531f, -0.2341354f, +0.0835134f, +0.0706138f, +0.0369765f, +0.2880794f, -0.0029053f,
  +0.0232064f, +0.1898540f, -0.0028373f, -0.2216680f, -0.1338547f, +0.1062570f, -0.1378674f, +0.0032588f,
  -0.0453328f, +0.1054468f, -0.1432070f, -0.1060818f, +0.1407723f, +0.0912792f, +0.2080346f, +0.0848065f,
  -0.4017825f, +0.5960506f, -0.5852766f, +0.0604619f, -0.0944704f, +0.3739449f, +0.7064820f, +0.0034729f,
  +0.0371595f, +0.2466104f, -0.4763588f, -0.0792084f, -0.2193130f, -0.5616082f, +0.4188624f, -0.0564909f,
  -0.2422537f, -0.0425929f, +0.0317056f, +0.1211467f, +0.1092275f, -0.0327820f, +0.1991947f, +0.0545802f,
  +0.3429685f, -0.4719797f, -0.2207042f, -0.0546421f, +0.4089054f, +0.5270642f, +0.0082280f, +0.0638063f,
  +0.1618481f, -0.7172667f, -0.4866893f, +0.0588261f, -0.5849231f, +0.0445823f, +0.1428176f, -0.2049346f,
  +0.0620579f, -0.0915108f, -0.3481472f, -0.0046322f, -0.1664127f, +0.1803098f, +0.2446105f, +0.0946685f,
  -0.2338176f, +0.0235697f, -0.0762905f, -0.0964222f, -0.0963683f, -0.0076979f, +0.2591361f, -0.0631517f,
  +0.0617586f, -0.4094602f, +0.4638523f, -0.0299933f, -0.0549682f, -0.0267582f, -0.1920119f, -0.0299604f,
  +0.1737765f, -0.0609242f, +0.1759085f, -0.2160310f, -0.0039858f, -0.1134881f, -0.1997757f, -0.2184478f,
  +0.0515632f, -0.3057184f, -0.2769949f, +0.1135749f, +0.0438222f, +0.3988705f, -0.6993427f, -0.3328540f,
  +0.0626769f, -0.2347433f, +0.1313144f, +0.0910699f, -0.0902131f, +0.1498854f, +0.1680251f, -0.0297123f,
  +0.2589373f, -0.0784236f, -0.0535735f, +0.0088182f, +0.1472057f, +0.2965047f, +0.1763993f, -0.8623994f,
  -0.0212050f, +0.1266584f, +0.3101450f, +0.2705003f, -0.1319547f, -0.3333258f, -0.1704529f, -0.5829707f,
  +0.0366434f, +0.4518192f, -0.0125782f, +0.0336755f, +0.2404049f, +0.0311487f, +0.0415929f, +0.0779059f
);

const float biases[4] = float[4](
  -0.0392049f, -0.0316519f, -0.0729234f, +0.0145583f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer26 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.5010070f, -0.0577324f, +0.1247671f, -0.2634549f, -0.1544861f, +0.3075526f, -0.1916304f, -0.1152861f,
  -0.0653910f, -0.1923258f, -0.2826609f, +0.1237939f, -0.1894283f, +0.2742326f, -0.0794789f, -0.1989084f,
  +0.2244474f, +0.4128846f, -0.0251091f, -0.1324941f, -0.1516521f, +0.0390017f, +0.0767094f, -0.1085645f,
  -0.1079039f, +0.4862792f, +0.3046049f, -0.2211085f, +0.0748440f, +0.3368309f, -0.3777328f, -0.0287025f,
  +0.0317005f, +0.6146805f, -0.5377078f, -0.4205911f, -0.0570575f, -0.3382722f, -0.2284734f, +0.0805992f,
  -0.1876504f, +0.2573465f, -0.3621992f, +0.2226338f, +0.1039272f, +0.0899953f, +0.0959917f, -0.0576794f,
  -0.1467253f, +0.2553349f, +0.1064374f, +0.0603475f, +0.2489661f, -0.0926399f, -0.0187013f, +0.0740829f,
  +0.0757513f, -0.0883544f, -0.0638784f, +0.0458446f, -0.2712080f, +0.5264642f, -0.0109634f, -0.0848121f,
  -0.0795450f, +0.0014971f, -0.4054859f, -0.0159298f, -0.0768070f, +0.2151955f, -0.0006430f, -0.2342056f,
  -0.5596772f, -0.1902352f, +0.2991430f, +0.2049888f, +0.1739857f, +0.1337396f, +0.1005436f, -0.1906817f,
  +0.4812846f, -0.2265149f, +0.3458558f, +0.5089443f, +0.1155146f, -0.1548228f, +0.4309323f, -0.0981341f,
  +0.1000509f, +0.2647615f, +0.2284057f, -0.0537904f, -0.1021837f, -0.1149886f, +0.0012225f, -0.0317307f,
  -0.4194305f, +0.3379903f, -0.0503614f, +0.1258805f, +0.2084434f, +0.0831813f, -0.0492737f, -0.2736875f,
  +0.1555087f, +0.0600192f, +0.2610326f, +0.4598169f, -0.0806985f, +0.1572482f, -0.2981244f, -0.1451746f,
  +0.0981334f, +0.0946741f, +0.2516610f, +0.2922677f, +0.0935579f, -0.2757004f, -0.1428841f, -0.1980023f,
  -0.3714238f, +0.2085468f, +0.3076861f, +0.2448457f, +0.0883335f, +0.1873093f, +0.1363500f, -0.2262343f,
  -0.0074970f, +0.1256821f, -0.4287331f, +0.1364876f, +0.0188181f, -0.0693218f, +0.0811099f, +0.3699658f,
  -0.0033904f, -0.4022974f, +0.0380672f, +0.1056791f, -0.0556211f, -0.1519778f, -0.0343512f, -0.2411536f,
  +0.3508119f, +0.2816899f, -0.2567353f, +0.1230375f, -0.0001087f, -0.1290019f, -0.0767018f, -0.0400685f,
  +0.0554726f, +0.5839220f, -0.0747058f, +0.0117269f, -0.3114039f, +0.4975640f, -0.0134069f, -0.0084922f,
  -0.1562944f, +0.1092665f, -0.3141606f, +0.3580893f, -0.2979735f, +0.0930340f, +0.3690754f, -0.2445326f,
  +0.2023703f, +0.2353094f, +0.0124381f, -0.0671167f, -0.0767647f, +0.0982908f, +0.1189526f, -0.3931727f,
  -0.0895702f, -0.3306932f, +0.0684576f, -0.0981796f, +0.2123880f, -0.3841536f, -0.1222749f, +0.0948418f,
  -0.0722505f, +0.2190047f, -0.0420693f, +0.1546107f, -0.1987209f, +0.3859433f, +0.0987743f, -0.0541364f,
  +0.0026698f, -0.0844510f, +0.0423214f, -0.0234895f, -0.1142999f, -0.1632401f, -0.0100488f, -0.0455323f,
  -0.2242902f, +0.2989317f, +0.1977459f, +0.0278536f, +0.5178548f, -0.1774401f, -0.1572508f, +0.2426579f,
  +0.0331475f, +0.3149238f, +0.3408730f, -0.1039509f, -0.0475376f, -0.2540123f, +0.1914554f, +0.2273916f,
  -0.5125183f, -0.1417936f, -0.0065494f, -0.0079653f, -0.1021708f, +0.0336005f, -0.0476791f, -0.0335801f,
  +0.2608745f, -0.1077962f, -0.0775547f, +0.0475052f, +0.0287768f, -0.3248022f, +0.0791286f, -0.0447294f,
  +0.1652080f, +0.1218915f, -0.0459327f, -0.1492552f, +0.2106597f, -0.2502650f, +0.2367340f, +0.0435355f,
  +0.2323438f, -0.1323363f, -0.2045590f, +0.0481408f, -0.1716952f, +0.2103820f, +0.1844639f, -0.0636732f,
  +0.0533016f, +0.3487833f, -0.2172896f, +0.0246223f, +0.2434613f, +0.3523800f, -0.3609845f, +0.0555336f,
  -0.3166766f, +0.0168194f, -0.0273390f, -0.2027245f, -0.1491751f, +0.1523400f, +0.1474186f, -0.0000649f,
  -0.0388769f, +0.0213711f, -0.4088342f, -0.0361894f, +0.1027392f, +0.1164735f, +0.1629816f, +0.3177503f,
  +0.0297259f, -0.2937178f, -0.1519974f, -0.0531607f, -0.0089892f, -0.0342112f, +0.1145149f, -0.3895569f,
  +0.1248997f, -0.2392070f, -0.2080187f, +0.0509574f, -0.0478115f, -0.2892840f, +0.0868621f, -0.0671846f
);

const float biases[4] = float[4](
  +0.0403109f, +0.0203658f, +0.0460887f, +0.0990378f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer27 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.6703991f, -0.0514757f, +0.2234780f, -0.0840156f, +0.1229229f, -0.0017964f, -0.2595819f, -0.0494556f,
  -0.0353684f, -0.6121370f, -0.1617386f, +0.1903926f, -0.0064295f, -0.2199860f, +0.2184581f, +0.2267767f,
  -0.0054238f, +0.1074592f, -0.0078409f, -0.1209418f, -0.1126573f, +0.2013427f, +0.0827508f, +0.1410539f,
  -0.0445250f, +0.2628939f, -0.2950082f, +0.2238915f, -0.1016577f, +0.1097850f, -0.6126689f, -0.3024739f,
  -0.2376379f, -0.0389826f, +0.1531730f, -0.0298327f, +0.3281388f, -0.1515016f, -0.2271309f, +0.1720943f,
  +0.2253212f, +0.0697350f, -0.0228170f, +0.1018190f, +0.2067276f, -0.0079245f, -0.0362991f, +0.0690264f,
  -0.1112540f, -0.0632083f, -0.0594632f, -0.0199392f, +0.0432819f, +0.1172061f, +0.3035831f, +0.0975446f,
  +0.0948655f, +0.0730480f, +0.3590908f, -0.1645107f, -0.0419756f, -0.2292143f, -0.1068689f, +0.2908913f,
  -0.1048331f, +0.1944049f, +0.0082574f, +0.1313349f, -0.0203317f, +0.1822672f, +0.0420283f, -0.1407144f,
  +0.2239755f, -0.0147848f, +0.1575319f, -0.0480512f, -0.3046938f, +0.0839459f, -0.0320294f, +0.0189734f,
  -0.0702654f, -0.2135836f, +0.0346260f, -0.1811756f, -0.0498848f, -0.1198466f, -0.6336346f, +0.3934246f,
  +0.0597407f, -0.3327498f, +0.1572670f, -0.1353176f, -0.1216607f, +0.2608931f, -0.0307320f, -0.3644974f,
  -0.1617082f, -0.1722775f, -0.3778058f, -0.0659679f, +0.0051503f, -0.2536039f, -0.1450295f, -0.2297825f,
  -0.6917506f, +0.6622221f, -0.0701029f, -0.0491055f, +0.0730722f, +0.0582468f, +0.0356084f, -0.1382208f,
  +0.1257485f, -0.3923531f, -0.3613401f, +0.0776900f, -0.4625601f, -0.1862717f, -0.2340804f, +0.0829234f,
  -0.0179511f, +0.0221714f, -0.0023464f, -0.0479168f, -0.1490216f, +0.0522445f, -0.0604255f, +0.1818888f,
  +0.1109581f, -0.0115327f, +0.0469800f, -0.1327942f, -0.2439365f, -0.1337951f, +0.0185400f, -0.0149890f,
  +0.0071589f, +0.0220188f, -0.0103396f, -0.1413328f, -0.0603705f, +0.1483893f, +0.0946953f, +0.0362166f,
  +0.0675254f, +0.0059758f, +0.6058841f, -0.1235400f, -0.7405217f, +0.4349813f, +0.7878206f, -0.0600282f,
  +0.4168152f, -0.1335393f, +0.6922118f, +0.1375703f, -0.3904123f, +0.2984032f, +0.2336444f, -0.2529102f,
  +0.1857041f, -0.2611936f, -0.3626141f, -0.2375397f, +0.0848709f, -0.0245313f, -0.2649319f, -0.1049369f,
  -0.1772479f, +0.0209369f, +0.6120270f, -0.3224778f, +0.0847751f, -0.6690814f, +1.2868364f, -0.1947591f,
  -0.1330114f, +0.0438524f, +0.4063438f, -0.0137721f, +0.1081531f, +0.0538103f, -0.0472807f, -0.3260565f,
  -0.1155820f, +0.2172992f, +0.1803270f, +0.0387482f, +0.5838944f, -0.2042198f, +0.0047498f, -0.2728397f,
  -0.0697704f, -0.0440586f, +0.3427368f, -0.0388910f, +0.2315959f, +0.2145819f, +0.8092387f, -0.3679087f,
  -0.0835146f, -0.1691191f, +0.1378546f, -0.1180572f, -0.3153238f, -0.1839918f, +0.0248582f, +0.0225959f,
  +0.2911611f, -0.0785811f, -0.0314204f, -0.0666864f, +0.5033452f, +0.1997626f, -0.1001287f, -0.0621509f,
  -0.1593122f, +0.0864250f, +0.0285419f, -0.2153829f, -0.0302858f, -0.5636309f, +0.1787833f, -0.2495016f,
  +0.5139271f, -0.0029534f, -0.1815148f, +0.1302554f, +0.1720861f, +0.0468026f, -0.1556565f, -0.1073604f,
  +0.0018001f, -0.0946888f, +0.0057625f, -0.1159609f, -0.2558738f, -0.1902238f, +0.4200732f, -0.3054639f,
  -0.6596310f, +0.3173809f, -0.2287526f, +0.2061671f, -0.2914108f, +0.3968539f, -0.1429116f, -0.1975578f,
  +0.1265508f, -0.6417731f, -0.1247103f, -0.3441485f, +0.3047328f, -0.4866133f, -0.3514849f, +0.0083645f,
  -0.3819143f, +0.2156708f, -0.0933182f, -0.0201951f, +0.1915175f, -0.4255724f, -0.0662489f, -0.4253233f,
  +0.1453863f, +0.0459613f, +0.1643380f, -0.0477418f, -0.1549662f, +0.1662238f, +0.3244302f, +0.0977059f,
  +0.1099154f, +0.2179382f, +0.0039058f, -0.1287300f, +0.0101766f, +0.2154147f, -0.1606802f, -0.4340071f,
  +0.0579772f, +0.1279280f, -0.3437422f, +0.2445761f, +0.3949926f, +0.2454859f, +0.0601907f, -0.1543078f
);

const float biases[4] = float[4](
  +0.0510742f, +0.0726631f, -0.1646603f, +0.0335725f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer27 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2001442f, +0.1641547f, +0.0121279f, -0.0121961f, -0.2784576f, -0.0108951f, +0.0204774f, +0.0867006f,
  -0.2834172f, +0.0739694f, +0.1025857f, -0.0305238f, -0.1204375f, -0.0060356f, -0.3657179f, +0.1652742f,
  -0.0216487f, +0.2974416f, +0.0550668f, -0.2294628f, +0.2075552f, +0.1539793f, -0.2920862f, +0.0289939f,
  +0.1058844f, -0.1240968f, -0.0014447f, -0.3043242f, -0.0014632f, +0.1429940f, +0.0912796f, -0.1569797f,
  -0.5286149f, -0.4635432f, +0.1432807f, -0.4145470f, -0.4077734f, -0.0655585f, -0.8734352f, +0.1736541f,
  -0.3918517f, -0.3501023f, -0.0155218f, -0.7982796f, -0.3964655f, +0.1158040f, +0.1279752f, -0.2080784f,
  -0.1876277f, -0.1268097f, -0.0807942f, -0.0386940f, +0.1808138f, +0.2957911f, +0.3814633f, +0.0361658f,
  -0.0043573f, -0.2899600f, +0.2883412f, -0.1422709f, -0.2943797f, +0.3220830f, -0.2707959f, +0.1434332f,
  +0.0302289f, -0.1904998f, -0.0655930f, +0.0762998f, -0.2245990f, +0.1587827f, +0.0267651f, -0.1105373f,
  +0.3661401f, +0.6128051f, -0.7611986f, -0.0471054f, -0.1650904f, +0.0807572f, -0.8515257f, -0.0225578f,
  -0.4323240f, -0.0162093f, +0.5392408f, +0.0331247f, +0.4420052f, -0.2180796f, +0.3995323f, -0.2155877f,
  +0.3643663f, +0.0122918f, +0.2243828f, -0.0857874f, -0.3980782f, +0.4753599f, +0.4923790f, -0.3347368f,
  -0.1065580f, +0.7414696f, +0.1555237f, +0.1647425f, -0.5117469f, +0.3421982f, -0.6330579f, -0.0590550f,
  -0.3604658f, -0.5070093f, +0.2383751f, -0.4883693f, +0.3228145f, -1.0912327f, -0.2798947f, +0.1687201f,
  -0.2510710f, +0.0487324f, -0.3072914f, +0.4114864f, -0.2665939f, +0.1830070f, +0.0904524f, -0.6383665f,
  +0.0919541f, +0.0889061f, +0.1762021f, +0.0721213f, +0.0196415f, +0.3742486f, -0.4962007f, -0.0284960f,
  +0.3179824f, -0.2008206f, -0.1068573f, -0.0417483f, +0.2859057f, -0.0217850f, +0.0892300f, +0.3520939f,
  -0.3230127f, +0.0265060f, -0.2186605f, -0.0679008f, -0.0677616f, +0.0924442f, -0.0510355f, -0.1511071f,
  +0.1771813f, +0.1896303f, +0.0437145f, +0.0140148f, -0.1751248f, +0.1904486f, +0.2490918f, +0.0538496f,
  -0.0400895f, +0.1696984f, -0.3203534f, -0.1466590f, +0.3884999f, -0.3181837f, +0.1740629f, +0.1139584f,
  -0.0795045f, +0.2741935f, +0.1272135f, +0.1171857f, -0.1018923f, -0.0795056f, +0.2011506f, -0.0588471f,
  -0.5348253f, -0.0927887f, -0.0931054f, +0.0519197f, -0.4351298f, -0.3885013f, -0.3390678f, -0.2425456f,
  -0.3520469f, -0.1178593f, -0.0856426f, +0.1472825f, +0.0476919f, +0.0117419f, +0.2241330f, +0.0629648f,
  -0.5494698f, -0.3954022f, +0.0179244f, -0.4415943f, -0.3932946f, +0.5117232f, +0.0665597f, -0.0065924f,
  +0.1241162f, +0.0374821f, -0.2363083f, +0.0154956f, +0.0981079f, +0.2007609f, +0.0673544f, +0.0820792f,
  +0.0708180f, -0.0823209f, -0.2462341f, -0.1270104f, -0.0230277f, +0.5205715f, +0.2300612f, +0.1400105f,
  -0.0263288f, -0.3310400f, +0.0775884f, -0.1466838f, -0.4993616f, -0.1263480f, -0.1331591f, -0.0411959f,
  +0.0621574f, +0.3407679f, -0.1341709f, +0.0102048f, +0.2486189f, +0.1525258f, +0.0091945f, +0.1569370f,
  -0.2205913f, -0.0512357f, -0.0021652f, -0.0202572f, +0.1607974f, -0.2508142f, -0.3023471f, -0.0958001f,
  -0.2845801f, -0.1300270f, -0.0227814f, -0.0029600f, +0.1278881f, -0.0131570f, +0.2328748f, -0.1668842f,
  -0.0351156f, -0.2150964f, +0.0404736f, -0.0145925f, -0.0501557f, -0.1476434f, +0.1603563f, -0.0346024f,
  -0.3202872f, -0.5315858f, -0.2021148f, -0.5564681f, +0.6702790f, -0.8396946f, +0.2773662f, -0.2746500f,
  +0.3475353f, +0.1823720f, -0.2635455f, +0.5430313f, +0.2802365f, -0.3082366f, -0.3650798f, -0.0818550f,
  +0.1070773f, -0.0311422f, -0.0220084f, +0.0518308f, +0.0996635f, -0.0912675f, -0.1684232f, -0.1141349f,
  +0.4473027f, -0.0566672f, +0.1086674f, +0.0177942f, +0.1894785f, -0.2845366f, +0.2661988f, -0.0514424f,
  +0.1988259f, -0.0577650f, +0.2410806f, -0.1903997f, +0.5515200f, -0.0484980f, -0.1920653f, -0.1586070f
);

const float biases[4] = float[4](
  +0.0190989f, -0.0453389f, +0.0724223f, +0.0292611f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer28 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0844416f, +0.0955299f, -0.0257217f, -0.0852981f, -0.1920471f, +0.2525165f, -0.1184573f, -0.3805013f,
  -0.3185807f, +0.2087912f, -0.3800123f, -0.4043754f, -0.4087295f, -0.0404755f, +0.1699974f, -0.2093037f,
  +0.0008957f, +0.1136084f, +0.0158143f, +0.0200392f, +0.0934263f, +0.0100206f, +0.1188790f, -0.2622736f,
  -0.1091122f, +0.0913231f, +0.0266116f, +0.0956341f, +0.2164268f, +0.4066549f, +0.1275984f, +0.2949952f,
  +0.0878814f, +0.2982863f, -0.3370344f, -0.2723845f, -0.1131826f, +0.2529822f, +0.3081917f, -0.1641989f,
  -0.0757204f, +0.0520237f, -0.2465865f, +0.2252200f, -0.0591674f, -0.3533160f, +0.5934016f, -0.0653752f,
  +0.1152752f, +0.1935762f, +0.0319223f, -0.2605327f, -0.1015602f, +0.1954715f, -0.1205262f, +0.1833623f,
  +0.0733283f, +0.4208393f, -0.7697864f, -0.3921672f, +0.2906603f, -1.2010040f, +0.2239736f, +0.5384622f,
  -0.5298462f, +0.2669760f, -0.0102562f, +0.1359880f, +0.1907433f, +0.2076729f, -0.0546121f, -0.1707378f,
  -0.0992168f, +0.2763086f, -0.1921172f, +0.2544032f, -0.2834496f, -0.0731855f, +0.1041628f, -0.3984067f,
  +0.0463946f, -0.0015731f, -0.2524119f, -0.3494569f, -0.3020599f, -0.0327711f, +0.0746249f, -0.3052123f,
  -0.0258618f, +0.0232545f, -0.0498956f, -0.1436654f, -0.0483813f, +0.0626489f, +0.0016160f, +0.0194205f,
  -0.3398877f, +0.0939390f, +0.0256848f, +0.2002923f, +0.0449416f, +0.5702919f, -0.2297269f, -0.1541934f,
  +0.0477786f, -0.3918986f, -0.0523810f, +0.4728504f, -0.2621147f, -0.4929119f, +0.2292562f, +0.3604477f,
  -0.3058138f, +0.0764982f, +0.0233848f, -0.2386214f, -0.1921300f, +0.0371338f, +0.0232022f, -0.3455175f,
  -0.0889482f, +0.2229603f, -0.1299304f, +0.4011353f, -0.1249219f, +0.1121339f, -0.2042011f, -0.2380794f,
  +0.2415288f, +0.1945280f, -0.2880728f, +0.3591641f, -0.3017806f, +0.1131406f, +0.1569975f, -0.2573094f,
  -0.0196714f, -0.1942748f, -0.0050596f, +0.0296172f, -0.0532154f, +0.0668863f, -0.0054886f, -0.0779704f,
  +0.0967965f, +0.1644769f, +0.1089816f, +0.2490786f, +0.1646896f, -0.0050592f, +0.0548352f, -0.2011340f,
  +0.0785714f, +0.1929130f, -0.0128952f, -0.2359744f, -0.0784828f, -0.4965630f, +0.2351539f, -0.0606341f,
  +0.1487602f, -0.0806715f, -0.0830489f, -0.1684300f, -0.0430692f, -0.0189356f, -0.0476638f, -0.0165804f,
  -0.1676369f, +0.0813752f, -0.2143974f, +0.1984721f, -0.3220196f, +0.0153678f, -0.0917446f, +0.1998313f,
  -0.0286081f, -0.3030092f, -0.0355229f, +0.0643352f, -0.3103211f, -0.5403098f, -0.1382328f, -0.2767962f,
  +0.1319184f, -0.1803809f, -0.2236216f, +0.5986145f, -0.0105591f, -0.3620442f, +0.2366479f, +0.3314890f,
  +0.1741614f, +0.3116640f, -0.0133839f, -0.0376784f, +0.1861468f, -0.2382220f, -0.0720998f, -0.2567972f,
  +0.5238751f, -0.1064530f, +0.0086514f, -0.0497019f, +0.0091935f, -0.1257607f, -0.0569095f, +0.1736619f,
  -0.0167999f, +0.0723559f, -0.3433947f, -0.2206907f, +0.1239777f, -0.0262349f, -0.1461233f, +0.0967998f,
  -0.2081812f, +0.1400805f, -0.0647561f, +0.1409648f, -0.0177240f, -0.0571058f, +0.0341330f, -0.1989404f,
  -0.0089203f, +0.1323896f, -0.0325935f, -0.0052502f, -0.1666058f, -0.1122245f, +0.2444941f, -0.0980924f,
  -0.0944069f, +0.1343745f, -0.0449081f, +0.0395519f, +0.0106295f, -0.1721657f, +0.0815673f, +0.0334804f,
  -0.2273079f, -0.1859122f, +0.2627138f, +0.2260936f, +0.2723224f, +0.3164310f, +0.2554398f, -0.0289715f,
  -0.1440941f, -0.0216329f, +0.1136785f, +0.1519973f, -0.0665149f, -0.9689339f, -0.1311046f, -0.3620488f,
  -0.4400094f, -0.1610867f, +0.3425702f, -0.1651788f, -0.1077908f, +0.3028486f, -0.0891495f, -0.2515315f,
  +0.0477979f, +0.1214115f, +0.0868006f, +0.0589084f, +0.0851702f, -0.2460814f, -0.1315564f, +0.0426601f,
  -0.2798185f, +0.2819180f, -0.0203543f, +0.1994268f, +0.1010570f, -0.0112295f, +0.2639032f, +0.1873925f,
  -0.0855592f, -0.1397688f, -0.1148318f, -0.2559988f, +0.0066369f, +0.0850799f, -0.1188768f, -0.0734495f
);

const float biases[4] = float[4](
  +0.0475244f, +0.0150816f, -0.0431821f, -0.0413106f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer28 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0400564f, +0.0680916f, -0.1128658f, +0.1162256f, -0.1105478f, -0.1189822f, +0.5319487f, -0.0123415f,
  -0.3040193f, +0.1402475f, +0.1950865f, -0.0118022f, +0.0164113f, +0.2611802f, -0.1113072f, -0.2623469f,
  +0.2238824f, -0.1731039f, +0.2552260f, +0.2270371f, -0.0675013f, +0.1658093f, -0.0269064f, +0.1449986f,
  -0.2865749f, +0.0873929f, -0.2710788f, +0.0091295f, +0.2164373f, +0.2074294f, +0.3345945f, -0.2903144f,
  -0.4200395f, -0.5546348f, -0.1711600f, +0.1909507f, -0.0080744f, +0.1949757f, -0.1167901f, +0.0730452f,
  -0.0172267f, -0.0614695f, -0.0473325f, +0.3278945f, +0.2427498f, +0.0204871f, +0.2133689f, +0.3925800f,
  -0.0647497f, -0.2310774f, +0.3739317f, +0.1684295f, -0.1312746f, +0.2208933f, +0.2023635f, +0.0091202f,
  +0.1624327f, -0.5199128f, +0.3189163f, -0.0660767f, +0.0453796f, +0.1522067f, -0.2621136f, -0.1315655f,
  -0.0104032f, +0.1043300f, +0.5962946f, +0.2340846f, +0.0298191f, -0.0118623f, +0.1191450f, +0.0133212f,
  -0.0554773f, -0.1710907f, +0.2254289f, -0.2522622f, +0.1243356f, +0.2661077f, +0.0629489f, -0.0252331f,
  +0.1700909f, +0.3598308f, -0.1673206f, -0.3359170f, -0.0441252f, -0.0588757f, +0.0946931f, +0.5437923f,
  -0.1479910f, -0.0011774f, +0.1425919f, +0.0839105f, +0.0484511f, +0.0540820f, -0.0450702f, +0.0953075f,
  +0.0268507f, +0.0366138f, -0.0819447f, -0.0411005f, -0.1610048f, -0.0628365f, -0.3882307f, +0.1735709f,
  -0.0603127f, -0.4114635f, -0.0676202f, +0.0990923f, -0.0515236f, +1.0839872f, -0.0752443f, +0.9057289f,
  +0.2742812f, +0.2422192f, +0.6614122f, +0.1387017f, +0.0083093f, -0.0361162f, +0.1943516f, +0.3984355f,
  +0.2009749f, -0.0308277f, -0.0126951f, +0.1195615f, -0.0380560f, +0.1810271f, -0.2538863f, -0.1102436f,
  +0.2863547f, -0.3629566f, -0.1140504f, -0.1797128f, -0.1341514f, +0.9831863f, +0.1849197f, -0.1526186f,
  +0.0655351f, +0.0417966f, +0.0239028f, +0.3221681f, +0.1091295f, +0.0459731f, -0.0940716f, +0.1475039f,
  +0.0948489f, +0.0873769f, +0.0195565f, -0.2403112f, -0.1305395f, +0.0396980f, -0.0756667f, +0.4451871f,
  -0.0235902f, -0.1930823f, -0.0620377f, +0.4171278f, +0.2242284f, +0.4328782f, -0.3187849f, -0.3720147f,
  -0.0135541f, +0.1356332f, -0.3269822f, +0.1038091f, -0.0085534f, +0.2251842f, +0.0090091f, -0.1025829f,
  +0.1712591f, +0.3773151f, +0.1794366f, -0.1027689f, +0.0283786f, -0.1344584f, -0.1997110f, +0.2508131f,
  -0.0236372f, +0.0309773f, -0.2144899f, +0.3048285f, +0.4925838f, +0.8036752f, -0.0415480f, +0.0002399f,
  +0.1407183f, +0.0844619f, -0.7339237f, +0.2750695f, +0.1897765f, +0.3209407f, -0.1944473f, -0.1772750f,
  +0.0274917f, +0.2903761f, +0.0163166f, -0.4144453f, +0.1467935f, +0.0476924f, -0.3727426f, -0.4309872f,
  -0.1531116f, +0.4202216f, -0.3936090f, -0.0158669f, +0.2001349f, +0.4665258f, -0.3244465f, -0.0895717f,
  +0.3968561f, +0.2787408f, -0.6346673f, -0.0780061f, -0.0639843f, -0.1666234f, -0.1509391f, +0.2973036f,
  +0.0031044f, -0.0994932f, -0.1727294f, -0.1675803f, +0.2179932f, -0.1128132f, +0.0765976f, +0.3736506f,
  -0.1535372f, -0.1474479f, +0.3269305f, -0.0553115f, +0.3755201f, -0.0217573f, -0.0689443f, +0.3461395f,
  +0.2311849f, -0.0640031f, -0.1699615f, +0.1643227f, +0.0531626f, -0.1116184f, +0.1209519f, +0.3404330f,
  -0.0506516f, -0.2479209f, -0.0006663f, -0.1649815f, +0.0683235f, +0.0454137f, +0.4312881f, +0.4933264f,
  -0.1907647f, +0.4329786f, +0.1323671f, +0.1823038f, +0.4078643f, -0.2009075f, -0.2441828f, -0.2363517f,
  +0.4004278f, -0.0177385f, -0.1207780f, +0.1339423f, +0.0639612f, -0.2083403f, +0.0461638f, -0.0434231f,
  -0.1225572f, +0.1055758f, -0.0656504f, -0.1614105f, +0.3687347f, -0.2461447f, +0.2235896f, +0.1797133f,
  +0.0821575f, -0.1342649f, +0.3384360f, -0.0649450f, +0.3540976f, -0.3309302f, -0.3364364f, +0.2514326f,
  +0.2131238f, -0.0215130f, -0.4552283f, +0.0804029f, +0.1044127f, -0.4921956f, +0.0822808f, +0.0929966f
);

const float biases[4] = float[4](
  +0.0224795f, -0.0366917f, -0.0163371f, +0.0491105f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer29 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2151789f, -0.1130812f, -0.3197717f, +0.4859861f, +0.0599898f, -0.2760442f, -0.3579089f, -0.3296010f,
  -0.0345023f, -0.0499997f, -0.0039956f, +0.4674715f, -0.4282448f, +0.1131573f, +0.1369843f, +0.0418850f,
  -0.0713731f, -0.2532463f, +0.0969721f, +0.5379016f, -0.1559534f, -0.0484822f, -0.2560321f, -0.1148878f,
  -0.0828972f, -0.0441685f, +0.2571923f, -0.0191709f, -0.3805956f, +0.2374522f, -0.5535172f, -0.3486143f,
  +0.2273838f, -0.2333790f, -0.1392507f, +0.0169542f, -0.4519126f, +0.4814506f, +0.2272546f, -0.1982503f,
  +0.1014271f, -0.4206513f, +0.5397915f, -0.1112176f, +0.0983714f, +0.3478366f, -0.3878913f, -0.3710589f,
  -0.1641695f, -0.3258067f, -0.4068760f, +0.0317209f, +0.1622410f, -0.5111917f, -0.0380707f, -0.1513632f,
  +0.1462464f, -0.0929454f, +0.1547478f, +0.0902134f, +0.1668411f, +0.5281639f, +0.0366236f, -0.4840268f,
  +0.2373633f, -0.2275610f, +0.0770255f, -0.1784959f, -0.1946784f, -0.1396173f, -0.1061002f, -0.0310925f,
  +0.0780728f, +0.0337466f, -0.0269401f, +0.0155582f, -0.1894069f, -0.0324005f, -0.1939555f, -0.1426345f,
  -0.3883473f, -0.2827739f, +0.3924611f, -0.0950344f, -0.0910176f, -0.0642620f, -0.0885116f, -0.2182040f,
  +0.1149696f, +0.0278348f, +0.0446142f, -0.0520886f, +0.0327312f, -0.1442073f, -0.1800884f, +0.3523382f,
  +0.2280532f, +0.0592450f, -0.2428138f, +0.0122558f, -0.0183669f, -0.2112352f, +0.0125662f, +0.0985748f,
  -0.2949546f, -0.6794693f, +0.1361597f, +0.2871708f, +0.3908366f, +0.7032343f, -0.0101045f, -0.2206832f,
  +0.0170387f, -0.1584470f, +0.1439591f, -0.8516333f, +0.0618017f, +0.3928801f, +0.0586892f, +0.6898142f,
  -0.0171464f, -0.0312729f, -0.0328296f, -0.0153570f, -0.1605389f, -0.0067239f, -0.2387754f, -0.0548106f,
  -0.0546114f, +0.0340964f, -0.0674661f, +0.0179600f, +0.1628704f, -0.0318275f, -0.0283267f, -0.1270024f,
  -0.1695879f, +0.0016841f, +0.2008099f, -0.1212957f, -0.5002671f, -0.0595151f, -0.3480363f, +0.3738698f,
  +0.1697425f, +0.2043109f, -0.0082048f, -0.0083808f, -0.0650306f, +0.1279885f, +0.1587155f, +0.1611669f,
  +0.3330389f, +0.1228273f, -0.0032200f, -0.3008491f, +0.0897828f, -0.0719638f, -0.1690451f, +0.2114490f,
  -0.0680717f, +0.0003494f, -0.0683530f, -0.0520150f, +0.1461307f, +0.0464148f, -0.0475824f, -0.0027039f,
  +0.2236310f, +0.2674972f, -0.0188386f, -0.2529671f, +0.0738460f, -0.2106188f, -0.0130668f, +0.1716353f,
  -0.1597914f, -0.3422118f, -0.3161185f, -0.6000455f, +0.2428175f, +0.0569245f, +0.2881246f, +0.1788810f,
  -0.0563576f, -0.4230282f, -0.4316063f, +0.4134917f, +0.1371149f, -0.3719549f, -0.1175117f, -0.0578217f,
  -0.0363039f, +0.0772978f, +0.0617250f, -0.0720653f, +0.0063641f, +0.0894624f, +0.0338248f, +0.0705931f,
  -0.2464175f, -0.4654009f, +0.4564054f, +0.0509123f, +0.0087045f, +0.3952266f, -0.8355198f, +0.0678682f,
  -0.0727292f, -0.4167089f, +0.0448734f, +0.1874269f, +0.1895641f, -0.2442885f, -0.0590725f, -0.4082858f,
  +0.2601412f, +0.0293774f, -0.0075093f, +0.0198027f, -0.2736071f, -0.2174052f, -0.0518368f, -0.0185308f,
  +0.2046500f, +0.0249148f, +0.0323895f, +0.0373579f, +0.1668726f, -0.3118545f, -0.2384469f, +0.2607352f,
  -0.0876068f, -0.1351802f, -0.1982888f, +0.1079638f, -0.0195434f, +0.0777467f, -0.3367818f, -0.4479960f,
  +0.2772548f, -0.0636530f, -0.0796898f, -0.0517715f, -0.4117265f, -0.3285564f, -0.1606196f, -0.1518241f,
  +0.2805824f, -0.4334922f, -0.3222997f, +0.0761858f, +0.3738965f, +0.4583577f, +0.0091045f, +0.2314330f,
  -0.0724596f, +0.5179009f, +0.3294791f, -0.0423914f, +0.3243284f, +0.0991051f, +0.1311756f, +0.0733605f,
  +0.0344959f, +0.0380770f, +0.1322174f, +0.0391633f, -0.1808865f, +0.2649330f, -0.1668041f, +0.0399024f,
  +0.0525536f, +0.1904293f, -0.2682770f, -0.0484669f, +0.2134587f, +0.2431219f, +0.2227032f, +0.2015319f,
  +0.1158267f, +0.0024626f, +0.1208277f, -0.2421925f, -0.2918305f, +0.2881426f, -0.1241435f, +0.1654792f
);

const float biases[4] = float[4](
  -0.2344927f, -0.0123549f, +0.0339402f, +0.0501697f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer29 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2869936f, -0.1122409f, -0.3617819f, +0.1283908f, -0.0034482f, -0.0912848f, -0.3023006f, +0.0301750f,
  -0.0586630f, +0.0320989f, -0.0643187f, +0.0661148f, +0.3720866f, -0.1661181f, -0.1312339f, +0.1355560f,
  +0.1217523f, -0.1264208f, -0.0414130f, +0.1352253f, +0.1548252f, -0.2312817f, +0.2016080f, +0.1130263f,
  -0.0432224f, +0.1890559f, +0.2973783f, +0.0655357f, -0.3872311f, +0.1605013f, -0.2570502f, +0.0561065f,
  +0.0375354f, -0.0283247f, +0.1884750f, -0.2360882f, -0.2594777f, +0.1075677f, +0.5345309f, +0.1857184f,
  -0.0885696f, -0.0301718f, -0.0833884f, -0.0032182f, +0.2036919f, +0.0360350f, -0.1134701f, -0.3129676f,
  -0.3251472f, -0.1563145f, -0.0215895f, +0.1752406f, -0.0351623f, +0.1427624f, -0.3225408f, +0.1362830f,
  -0.0501500f, +0.0610933f, +0.1752092f, -0.1864936f, -0.2974467f, -0.1893465f, +0.0431052f, +0.2600117f,
  +0.1929278f, +0.0148063f, -0.1776277f, +0.0889315f, +0.0781017f, +0.1545362f, +0.1302538f, -0.1644301f,
  -0.0169473f, -0.0241355f, +0.0887260f, -0.1170194f, -0.1482672f, -0.0417102f, -0.0040904f, -0.1014289f,
  +0.0407216f, +0.2927386f, +0.0914357f, +0.0191524f, -0.0275826f, +0.4860372f, +0.0793310f, +0.1839180f,
  +0.1405399f, -0.0083665f, +0.0349041f, -0.0017620f, -0.1033445f, +0.0349016f, +0.1792554f, +0.0173589f,
  +0.1568367f, +0.1973844f, +0.0903782f, +0.1022001f, -0.1187084f, -0.4003395f, -0.0092161f, -0.1482871f,
  -0.1394160f, +0.2121233f, +0.0874409f, +0.2414051f, +0.0266003f, +0.0720198f, -0.2502297f, +0.1149444f,
  +0.2608806f, +0.0083315f, +0.0609288f, -0.2996863f, -0.1257490f, +0.0578063f, +0.2443777f, +0.0928922f,
  +0.2025907f, -0.1658782f, -0.0017761f, +0.0664061f, -0.3013496f, +0.4742015f, -0.0895293f, +0.1598205f,
  +0.3581684f, +0.1093275f, -0.1028878f, -0.0622356f, -0.4337481f, -0.2975650f, -0.0566515f, -0.2704455f,
  +0.2156847f, +0.0162393f, -0.0426887f, +0.2641427f, -0.0017841f, -0.2412448f, +0.1497664f, +0.1018814f,
  -0.0696399f, +0.0834120f, +0.0320724f, -0.2809198f, -0.3774053f, +0.3790012f, -0.1935746f, +0.0029029f,
  +0.0477477f, +0.3869226f, +0.2533864f, -0.5002227f, +0.2031467f, +0.4321567f, +0.0533892f, -0.0006826f,
  -0.0317824f, +0.0566022f, +0.2308000f, -0.1987314f, -0.0686645f, +0.1283307f, +0.5026544f, +0.0262086f,
  -0.8145853f, +0.1043012f, -0.1986742f, +0.2242834f, +0.0850589f, -0.9040949f, +0.2689831f, +0.0103201f,
  -0.3869075f, -0.4098513f, -0.3789273f, +0.3463470f, -0.1945220f, -0.8338913f, -0.0145691f, -0.2195973f,
  +0.4008013f, -0.2795285f, -0.2757109f, +0.4381319f, -0.0534737f, -0.3272848f, -0.1586325f, +0.0754347f,
  +0.4535061f, +0.1502724f, +0.8621941f, -0.0822225f, -0.0043242f, +0.5304393f, +0.0417322f, -0.0341134f,
  -0.1247246f, +0.0015866f, +0.1297884f, -0.0106685f, +0.4703536f, +0.2849805f, +0.0666588f, -0.1020382f,
  -0.0823022f, -0.1947458f, +0.2384391f, -0.2859569f, -0.1080589f, +0.0887108f, -0.0646086f, -0.1799165f,
  +0.1826700f, -0.0561418f, +0.1059963f, +0.0442741f, -0.0625325f, -0.0796839f, -0.0382813f, -0.2131282f,
  +0.0416112f, +0.0035829f, -0.0320945f, +0.0374269f, -0.1435346f, -0.1357077f, +0.0614968f, +0.0879384f,
  -0.1736529f, +0.1355809f, -0.0553318f, +0.1606348f, -0.1191174f, +0.0166460f, +0.0512176f, +0.1741350f,
  +0.3098441f, -0.1858567f, -0.2531391f, +0.0130215f, +0.1945107f, -0.2876821f, -0.2070246f, +0.0912430f,
  +0.1548224f, +0.0929687f, +0.2630691f, -0.2078201f, +0.3145567f, -0.2729246f, +0.3084326f, +0.2934988f,
  -0.3744470f, +0.3814457f, +0.1103496f, -0.1318855f, -0.1874360f, +0.1154440f, +0.0947545f, +0.1501782f,
  -0.1189073f, -0.1904563f, -0.2678829f, +0.1857144f, -0.0570368f, +0.0609489f, -0.3064278f, -0.2803877f,
  -0.0425705f, -0.2313859f, -0.4111536f, +0.1452537f, -0.4304641f, +0.1121608f, +0.1231333f, -0.1834513f,
  -0.3030981f, -0.1247487f, -0.1773841f, -0.1164644f, +0.0390833f, -0.1012500f, +0.2551825f, -0.0710769f
);

const float biases[4] = float[4](
  +0.0291662f, +0.0034490f, -0.0673475f, +0.0824413f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer30 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2460166f, -0.0915423f, -0.0914062f, +0.0175762f, -0.1971682f, -0.1785578f, +0.1886469f, +0.0811107f,
  -0.2477887f, +0.0319924f, -0.2574861f, -0.0301168f, +0.2145104f, -0.2711750f, +0.2096327f, -0.1497729f,
  -0.0725099f, +0.0451751f, -0.2131303f, -0.0316830f, -0.0543306f, -0.0353942f, +0.2769943f, +0.0565132f,
  -0.4119302f, +0.0671126f, -0.2887474f, +0.0812025f, -0.0283702f, +0.0728565f, -0.1516694f, +0.3986346f,
  -0.0332904f, +0.8381692f, -0.0384551f, -0.2985696f, +0.0438864f, +0.4113854f, -0.1175853f, -0.5940369f,
  +0.2518575f, -0.1070882f, -0.1818985f, -0.1795028f, +0.0439643f, +0.1521583f, -0.1740386f, -0.1630005f,
  -0.4082046f, +0.0413914f, -0.1699340f, +0.0778242f, -0.0283584f, -0.0618211f, -0.1846933f, +0.2194511f,
  -0.0516762f, +0.1330574f, -0.4299510f, -0.2770463f, +0.0055065f, +0.0989950f, +0.5603592f, -0.0998734f,
  +0.4667214f, -0.1101112f, +0.1305989f, +0.0420159f, +0.1991610f, +0.2439972f, +0.2143635f, -0.0422252f,
  +0.0321494f, +0.4946229f, -0.1503281f, -0.0206412f, -0.0837441f, -0.2591895f, +0.0383518f, +0.1506902f,
  -0.1258932f, +0.0268759f, +0.1613340f, -0.1740053f, +0.1594677f, +0.0080188f, +0.3556221f, -0.2412162f,
  +0.3773862f, +0.1595494f, +0.0712646f, -0.0434255f, -0.1127786f, +0.0823771f, -0.1285257f, +0.0582521f,
  -0.0619085f, +0.4094417f, -0.0766843f, -0.3478677f, +0.0560902f, -0.0725418f, +0.0018349f, -0.0933141f,
  +0.0140352f, +0.3780618f, +0.1940225f, +0.4413943f, +0.2155487f, -0.1437650f, -0.3756477f, -0.0602535f,
  +0.0360059f, -0.0039613f, +0.0819414f, +0.1815673f, -0.2385508f, +0.1108286f, +0.0103891f, +0.1730478f,
  +0.1556717f, +0.1619127f, +0.1106203f, -0.0400021f, +0.1001083f, -0.0688106f, +0.0245699f, +0.0058111f,
  +0.2150492f, -0.0318597f, +0.1385663f, +0.0779760f, +0.1792458f, -0.1219257f, -0.2493981f, +0.0119494f,
  +0.2270549f, -0.2007305f, +0.0558233f, -0.0322521f, -0.0383242f, +0.0498656f, +0.2862598f, +0.0025452f,
  -0.0395715f, +0.0682301f, -0.3151522f, -0.0459403f, +0.0416353f, +0.2556091f, +0.1970114f, +0.2257877f,
  -0.2744805f, +0.3027389f, -0.4959030f, +0.0860818f, -0.0711634f, +0.3173699f, -0.0329231f, +0.0598700f,
  +0.0084234f, +0.0372467f, +0.0732180f, +0.0834200f, +0.1749915f, -0.0454089f, +0.3680841f, +0.1733012f,
  +0.0253289f, -0.1272466f, +0.1249143f, -0.0000762f, -0.1919999f, +0.0878899f, +0.1350629f, -0.1660979f,
  -0.2451488f, -0.3154121f, -0.1018118f, -0.0250545f, -0.5715348f, -0.0829337f, +0.2003835f, -0.6989837f,
  -0.2916327f, +0.0458017f, +0.2352517f, +0.1932491f, -0.4387623f, -0.3367150f, -0.6134152f, -0.3625571f,
  +0.1053803f, +0.0171892f, -0.0839219f, +0.2169956f, -0.0953210f, +0.0024606f, -0.0114852f, +0.0285795f,
  -0.0439427f, -0.2036319f, +0.0437564f, -0.0226933f, +0.0661958f, -0.1950221f, +0.0916191f, -0.1064081f,
  +0.0125191f, +0.0334025f, -0.1466129f, +0.0195892f, +0.3665285f, -0.3847790f, +0.2450341f, -0.0380340f,
  +0.0067496f, +0.1172873f, -0.1922780f, +0.1265270f, -0.0055121f, -0.3324395f, -0.0562538f, +0.2404325f,
  +0.0759199f, +0.1243142f, +0.0766004f, -0.1230304f, +0.0831996f, -0.0545804f, -0.1495597f, -0.2216771f,
  +0.2986262f, -0.0308571f, +0.0471667f, +0.0795720f, -0.0970320f, +0.1142083f, -0.4070353f, -0.1359853f,
  +0.1945716f, +0.7304944f, -0.5012594f, -0.0960339f, +0.3382362f, +0.1475615f, -0.0284207f, -0.1810746f,
  +0.3511810f, +0.0167340f, +0.2570931f, +0.1102596f, -0.1384964f, -0.1982103f, -0.2621546f, -0.1141473f,
  +0.3293841f, -0.0310397f, +0.0428171f, -0.1597328f, -0.1281529f, -0.3686190f, -0.1696203f, -0.1831058f,
  -0.5582153f, +0.1695922f, -0.1401740f, -0.0457415f, -0.0230418f, -0.0918626f, +0.0558488f, -0.0935683f,
  +0.0166238f, +0.0028072f, -0.0693602f, -0.0287234f, +0.0302146f, +0.1251171f, +0.2777242f, +0.0115271f,
  +0.0295658f, -0.0432280f, -0.0422362f, -0.1353401f, -0.1812937f, -0.0464095f, -0.0468308f, -0.0244626f
);

const float biases[4] = float[4](
  -0.0775341f, -0.0488285f, +0.0078457f, -0.0024684f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer30 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0214355f, +0.2837811f, -0.2808987f, -0.1024370f, +0.2007916f, -0.0649241f, -0.0580958f, +0.1127959f,
  +0.1042668f, +0.0326605f, +0.2344380f, -0.0760812f, +0.1489062f, +0.1306989f, -0.0107846f, +0.5245193f,
  -0.0796772f, +0.2393889f, -0.0744794f, +0.0872201f, +0.0975199f, -0.0141607f, +0.1379203f, -0.0757788f,
  +0.1246064f, -0.2847122f, +0.3874735f, -0.3936439f, -0.0010840f, +0.2235267f, -0.1647731f, +0.1148137f,
  +0.3715374f, -0.0136299f, +0.3431274f, -0.1357352f, +0.4068038f, +0.0891338f, -1.0214635f, -0.1476008f,
  -0.0321180f, +0.2318179f, -0.1217995f, +0.2989534f, +0.2695543f, +0.0254308f, -0.2918570f, -0.0936428f,
  +0.5010949f, -0.0179478f, +0.0114233f, +0.1588174f, +0.0237175f, +0.0087295f, +0.0187204f, +0.1197352f,
  +0.2309563f, -0.1502436f, +0.0978405f, -0.1061276f, -0.0515334f, +0.0428914f, +0.1777294f, -0.0036044f,
  +0.1397575f, +0.2130510f, +0.0903711f, +0.1385929f, +0.2517305f, -0.0679955f, -0.2051860f, +0.0735447f,
  -0.3385984f, +0.1304235f, -0.1655750f, -0.2438666f, -0.2633032f, +0.2518527f, -0.0219337f, -0.0923315f,
  -0.4133947f, +0.2949572f, -0.5839478f, -0.1242998f, -0.0694158f, -0.0531381f, +0.0691137f, -0.1922727f,
  +0.0687976f, +0.1250491f, -0.2196710f, -0.2286146f, -0.1512934f, -0.3446268f, +0.2769768f, -0.0488809f,
  -0.2346088f, +0.1150237f, +0.1050192f, -0.2480733f, -0.0591990f, -0.2088005f, +0.0936706f, +0.1063853f,
  +0.0294919f, -0.2549847f, -0.4822667f, -0.4446799f, -0.2594381f, -0.4895543f, +0.4707077f, +0.0776401f,
  -0.2661019f, -0.0738253f, +0.2130590f, +0.2160327f, -0.0470137f, +0.2323373f, +0.0787793f, +0.0423637f,
  +0.1510173f, +0.1209351f, +0.0036571f, +0.0451666f, +0.1530830f, -0.0825777f, -0.1887108f, +0.0799203f,
  +0.0025652f, -0.0103087f, +0.0043135f, +0.2818376f, +0.0514693f, -0.2804841f, -0.0490792f, +0.0267228f,
  -0.1098857f, -0.0049417f, -0.0252414f, +0.2015547f, +0.1560709f, +0.0531008f, +0.2437171f, -0.1044688f,
  +0.0189629f, +0.2356648f, +0.1025663f, +0.0728834f, +0.1447971f, -0.2356490f, +0.0410325f, -0.0447346f,
  +0.2033480f, -0.1303442f, +0.5370072f, -0.1790197f, +0.0058063f, +0.0376983f, +0.4031371f, -0.1835124f,
  -0.2143280f, +0.1640252f, +0.1261985f, -0.0349925f, -0.0315717f, +0.0505603f, -0.5155221f, -0.0079783f,
  -0.2263458f, -0.0392329f, -0.2771710f, +0.0199996f, +0.3346835f, -0.1986472f, +0.1689814f, +0.0332291f,
  +0.1082234f, +0.0903681f, -0.5461925f, +0.4597777f, -0.4112177f, -0.0617971f, +0.3896566f, +0.1671339f,
  +0.3927632f, +0.0412911f, -0.1713553f, -0.0642629f, +0.3671470f, +0.0408102f, +0.6679577f, -0.1563346f,
  -0.1070850f, +0.0079426f, +0.0083123f, +0.1049659f, -0.1638134f, +0.0392557f, -0.0502542f, -0.0695774f,
  -0.1476105f, -0.0097837f, +0.1830240f, +0.3676878f, +0.0437606f, -0.1643971f, -0.2657843f, +0.0782123f,
  -0.0427786f, -0.0052528f, -0.1652306f, +0.0396355f, +0.3469781f, -0.0260438f, -0.2098684f, -0.0584643f,
  +0.2445562f, -0.1574319f, -0.0026999f, -0.0983860f, +0.0992452f, -0.0586244f, -0.1726848f, +0.3420416f,
  +0.3920690f, +0.0066100f, -0.5353198f, -0.0512013f, -0.0592623f, -0.1007341f, +0.0316106f, +0.1378916f,
  +0.0236222f, +0.0768574f, -0.1172730f, -0.0699235f, +0.0052727f, -0.1950102f, -0.1605494f, +0.1115473f,
  +0.2594751f, -0.1359966f, -0.3723955f, -0.0772880f, +0.3571555f, -0.1585818f, -0.0320264f, -0.2858045f,
  +0.0886527f, -0.4682529f, -0.2701116f, -0.1870653f, +0.1970035f, +0.0825650f, -0.3573578f, -0.1235570f,
  +0.1663467f, +0.0811941f, +0.1023089f, +0.0773416f, -0.0042262f, +0.2343541f, -0.1331553f, +0.0520870f,
  +0.3182944f, -0.1342941f, -0.1426691f, +0.3086553f, -0.1940613f, +0.0334432f, -0.0036170f, -0.1868657f,
  -0.0311800f, -0.1717918f, -0.1124495f, -0.4402141f, -0.0492442f, -0.1996412f, +0.3539358f, -0.2057024f,
  +0.1303055f, +0.0312668f, +0.0598910f, +0.0579291f, -0.1717681f, -0.0524919f, -0.3261183f, +0.3513845f
);

const float biases[4] = float[4](
  -0.0007598f, -0.0035400f, -0.1053651f, +0.0656569f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer31 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0735562f, -0.1119968f, -0.2433999f, -0.0548429f, +0.0871236f, +0.3462380f, +0.2004551f, +0.2042481f,
  -0.2845582f, -0.2175415f, +0.0318585f, +0.1026857f, -0.0689037f, +0.3597639f, -0.1880386f, -0.7354415f,
  -0.1274332f, -0.2746455f, +0.0321173f, +0.0070927f, +0.0955803f, +0.0131437f, -0.2030124f, +0.0733422f,
  +0.4502233f, +0.4253790f, -0.0852641f, -0.3680644f, +0.1230151f, -0.2468231f, +0.0745115f, +0.4192755f,
  -0.2247481f, +0.3246494f, +0.6417940f, +0.3336930f, +0.4474728f, +1.0239499f, -0.1116803f, -0.2270845f,
  -0.1109146f, -0.1984295f, +0.0067984f, -0.2648644f, -0.1193536f, +0.1016524f, -0.0365789f, -0.0922348f,
  +0.0088673f, +0.1438657f, -0.2323237f, +0.0961783f, -0.2088786f, +0.0871953f, +0.1965779f, +0.0009443f,
  +0.0745840f, +0.0515614f, -0.0395595f, -0.3467009f, -0.3208246f, +0.0589671f, +0.1540999f, -0.1391729f,
  +0.0184227f, -0.0863822f, -0.0635776f, -0.1094942f, -0.1070536f, +0.1122984f, -0.2154333f, -0.0486991f,
  -0.0102546f, -0.0556668f, -0.1410524f, +0.1208757f, +0.1251295f, -0.0838851f, -0.1420616f, +0.0588824f,
  -0.1160324f, -0.0539961f, +0.0242084f, -0.0075819f, +0.1100185f, -0.0565341f, -0.0898534f, +0.1620955f,
  +0.4055291f, +0.3457801f, -0.1064152f, +0.1651572f, -0.1956405f, +0.1197276f, -0.1756575f, -0.5608276f,
  -0.2908540f, +0.1229414f, -0.0501281f, -0.0141484f, -0.0581450f, +0.2062741f, -0.0409381f, -0.0006397f,
  -0.3985152f, -0.5282914f, -0.2727385f, +0.1772016f, -0.3337933f, -0.2014554f, -0.4756033f, -0.4008892f,
  +0.6081537f, +0.7219744f, +0.3811069f, -0.3304102f, +0.1136114f, +0.0388092f, +0.1626538f, -0.1886429f,
  -0.1929705f, -0.0154007f, -0.0418183f, +0.1035854f, -0.1156446f, -0.2221588f, -0.2667409f, +0.0603703f,
  +0.1590042f, +0.0264337f, -0.2593686f, -0.0169693f, -0.3852812f, -0.1633184f, +0.0706506f, -0.0279057f,
  +0.0148784f, +0.0395222f, +0.1970744f, -0.2776880f, -0.2073395f, +0.4250351f, -0.3648393f, -0.1205980f,
  +0.2287596f, +0.0660384f, -0.1176773f, -0.1303805f, +0.0631437f, -0.4495474f, -0.1688455f, -0.1256459f,
  +0.2074144f, +0.1537055f, +0.3681332f, +0.1124043f, -0.0363147f, -0.2812723f, -0.2069886f, -0.1579310f,
  -0.0915763f, +0.1105846f, -0.0300155f, +0.0690810f, +0.0655399f, +0.3319560f, -0.0923744f, +0.1710676f,
  -0.0225775f, -0.1085400f, -0.1702597f, +0.0693257f, +0.1756642f, -0.1437966f, -0.0371225f, -0.0094230f,
  -0.3319709f, +0.1882778f, -0.0517297f, +0.3555071f, +0.0831925f, +0.1997726f, -0.7654245f, -0.2278693f,
  +0.0959483f, +0.1426066f, -0.0724901f, +0.2040194f, -0.0014791f, +0.2275023f, -0.1223930f, +0.2124052f,
  +0.0724589f, +0.3553644f, -0.0592521f, -0.0074280f, -0.4408318f, +0.4325322f, -0.0628775f, +0.3837841f,
  -0.0778645f, -0.3732619f, +0.2054205f, -0.3911665f, -0.2192242f, -0.4162758f, -0.4005801f, +0.0392330f,
  +0.0808197f, +0.2478188f, -0.0379588f, +0.2837989f, -0.3548950f, +0.3555417f, +0.1900426f, +0.2883192f,
  -0.0341446f, -0.0030358f, +0.0398091f, -0.0767950f, -0.0837218f, -0.0815596f, -0.0346723f, -0.0623182f,
  +0.3101896f, -0.0762223f, +0.1637217f, -0.1979992f, +0.1105259f, -0.2796852f, -0.0445452f, +0.3263870f,
  +0.2433595f, +0.0812307f, +0.0689880f, -0.0434933f, -0.0373432f, +0.0235433f, +0.0276770f, -0.1570228f,
  +0.3576554f, +0.0369515f, +0.0408845f, -0.1864203f, -0.1395068f, -0.3400186f, +0.0383176f, -0.0706626f,
  +0.5722035f, +0.0177133f, -0.0281383f, -0.0397863f, +0.0626718f, -0.1442150f, +0.0051165f, +0.3419729f,
  +0.0447009f, -0.2040694f, -0.2494985f, +0.0446141f, +0.0267855f, -0.0452066f, -0.2712264f, -0.1131649f,
  +0.0450664f, -0.0436072f, -0.0979694f, +0.1884326f, +0.0962489f, +0.3855484f, -0.0391214f, +0.0499474f,
  -0.0643574f, -0.2013037f, -0.0111946f, -0.0764960f, -0.1373126f, +0.0053379f, -0.0623825f, -0.2345155f,
  +0.1416291f, -0.1061564f, -0.2086234f, -0.1380821f, +0.1584040f, +0.4683020f, -0.1439970f, -0.3100484f
);

const float biases[4] = float[4](
  -0.0373570f, +0.0183453f, +0.0102086f, +0.0680584f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer31 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0143725f, +0.0543565f, +0.0984705f, -0.0178620f, +0.0596415f, +0.0483862f, +0.1008384f, +0.0950513f,
  +0.0826031f, -0.0578608f, +0.1347573f, -0.0750183f, +0.0748813f, -0.1375749f, -0.0186430f, +0.2022344f,
  +0.1391680f, +0.0962047f, +0.0523090f, +0.0123033f, -0.0834744f, -0.0021099f, -0.0604160f, -0.0624152f,
  -0.6396582f, -0.5101858f, -0.0703491f, -0.1114190f, -0.1915434f, +0.3593647f, +0.1665237f, -0.2404776f,
  -0.2576724f, +0.3354012f, +0.1507081f, -0.1341089f, -0.0398410f, +0.3692402f, +0.3716408f, +0.3740182f,
  +0.3898416f, +0.0532917f, +0.1249188f, +0.0699448f, -0.0523662f, -0.0507432f, +0.2466641f, +0.2040136f,
  +0.0295346f, -0.4222736f, -0.0835732f, +0.0093588f, -0.1715090f, +0.0602886f, -0.2261725f, +0.2626974f,
  -0.5751731f, -0.1569807f, -0.2450220f, -0.0578226f, -0.5423831f, +0.1733665f, -0.2964411f, +0.1780528f,
  +0.2137407f, -0.1429308f, -0.0144617f, +0.2215570f, +0.1486481f, -0.1015944f, -0.0898829f, +0.0872087f,
  +0.3618239f, -0.1965078f, +0.2100070f, -0.2680552f, +0.3058644f, +0.0890652f, +0.2318916f, +0.2578969f,
  +0.4912590f, -0.0197142f, -0.5071755f, +0.3403376f, -0.3103621f, +0.1814585f, -0.6685335f, -0.9657578f,
  -0.0944043f, -0.0174013f, +0.4602326f, -0.3168582f, -0.0821351f, -0.2142301f, +0.1166337f, +0.0711076f,
  -0.0534117f, -0.2607700f, +0.7311027f, -0.2024972f, +0.2322986f, +0.1210762f, -0.2322070f, +0.0417754f,
  +0.0489036f, +0.1600672f, +0.1886441f, -0.0219506f, -0.2121356f, -0.1448725f, -0.2528100f, -0.6359130f,
  -0.1933035f, -0.1319434f, +0.1408682f, -0.3876276f, -0.3679776f, -0.1505512f, +0.0878815f, -0.0121348f,
  +0.1469811f, -0.2847935f, +0.2041177f, -0.1187914f, +0.1432046f, -0.0568048f, +0.1783416f, -0.0537479f,
  -0.2499099f, -0.1953748f, +0.0280743f, -0.1015762f, -0.2710256f, +0.2243942f, -0.2438636f, -0.0652400f,
  +0.3298568f, -0.1585243f, -0.1801729f, -0.2028271f, +0.1705962f, -0.3481934f, +0.1179515f, -0.1009169f,
  -0.1237057f, -0.0514205f, +0.0844321f, -0.0211952f, +0.0303139f, -0.1346786f, -0.1287466f, -0.1983448f,
  +0.4814834f, -0.0286518f, +0.0561021f, -0.1170367f, +0.2656569f, -0.4147330f, -0.4549288f, +0.4478203f,
  +0.0654797f, +0.0073951f, +0.0791069f, +0.2443708f, -0.1260528f, -0.2890536f, +0.0327807f, +0.1446827f,
  +0.3422031f, -0.1268467f, -0.0975259f, -0.0115557f, +0.1654023f, +0.0809893f, -0.1200094f, +0.0847815f,
  -0.0067275f, +0.3460421f, -0.2413088f, +0.4337639f, +0.1378568f, -0.0259288f, -0.4035074f, -0.3313902f,
  -0.3565810f, -0.0288367f, +0.2841460f, -0.0680358f, -0.2295864f, -0.1866264f, +0.2758235f, +0.4730156f,
  +0.0204760f, +0.0753099f, -0.0588880f, +0.0076964f, -0.0552224f, +0.0511264f, +0.0360835f, +0.1742786f,
  -0.2002722f, -0.0360197f, +0.1069247f, +0.1682013f, +0.2775717f, -0.0479819f, -0.3462345f, -0.1732970f,
  -0.0962217f, +0.1530362f, +0.1597832f, +0.0091345f, -0.1761476f, -0.2768632f, +0.2127232f, +0.1762026f,
  -0.0322740f, -0.3070341f, -0.0184585f, +0.0437329f, +0.1571729f, +0.0996560f, +0.2338331f, +0.0093580f,
  +0.0904327f, -0.1062130f, -0.2582996f, +0.0611500f, -0.0245677f, -0.1505650f, +0.0733596f, +0.0792548f,
  -0.0308569f, -0.1082925f, -0.0935464f, +0.1790605f, +0.0677127f, +0.0146164f, +0.3827122f, +0.0374321f,
  -0.0919258f, -0.3980141f, -0.2739489f, -0.1731369f, -0.0956445f, +0.0272402f, -0.1834341f, +0.0224494f,
  +0.0998787f, +0.1156067f, +0.3811764f, -0.3126037f, +0.3040460f, -0.5031283f, +0.2292245f, -0.3979883f,
  -0.1953454f, +0.4596858f, -0.0887889f, +0.2020854f, -0.0608611f, +0.0450894f, -0.1669393f, -0.1646170f,
  -0.0432279f, +0.1776528f, -0.0045658f, -0.2067780f, -0.1302830f, -0.1601939f, -0.1008651f, +0.0940950f,
  +0.1527836f, +0.0483070f, +0.0427045f, +0.2652768f, +0.2377371f, -0.2209650f, -0.0356095f, -0.0233188f,
  +0.0364430f, +0.0551447f, +0.0021060f, -0.1637340f, +0.1064880f, +0.1167422f, +0.3226004f, +0.1695477f
);

const float biases[4] = float[4](
  +0.0468777f, -0.0848231f, +0.0185263f, +0.0686834f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer32 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0402810f, -0.1428631f, -0.1928498f, -0.0098299f, -0.0334663f, +0.1586357f, +0.1110578f, +0.2279617f,
  -0.2102091f, -0.2289263f, +0.2088105f, -0.2200484f, +0.3725804f, +0.4164366f, -0.0209238f, +0.0946232f,
  -0.0012152f, -0.0103149f, -0.3789496f, +0.0805006f, -0.2163570f, +0.2065223f, +0.0288890f, -0.0418789f,
  -0.1824947f, -0.2796277f, -0.0646561f, +0.0259678f, -0.2697794f, +0.2608599f, +0.1850538f, +0.2830703f,
  -0.5726491f, -0.3823883f, +0.1881079f, -0.0408903f, +0.4882030f, +0.0535987f, +0.0305857f, -0.1602291f,
  +0.1471266f, +0.1571563f, -0.1976064f, -0.1925451f, +0.6224984f, +0.2672422f, -0.4280248f, +0.0879157f,
  -0.0491110f, -0.0471392f, +0.0115622f, -0.2024557f, -0.0251952f, +0.0275659f, -0.1773695f, -0.1178051f,
  +0.4859082f, -0.0322504f, +0.1918907f, -0.1452328f, -0.0590392f, +0.1791510f, -0.6444120f, +0.1446053f,
  -0.1204847f, -0.1117026f, -0.0953721f, +0.0336979f, -0.0971143f, +0.5811837f, +0.1440155f, +0.2274226f,
  +0.0868561f, -0.1167959f, -0.1493702f, +0.0390108f, +0.0039316f, -0.0903137f, +0.0757125f, +0.0553145f,
  +0.1118338f, +0.0068526f, +0.1813264f, -0.0322259f, +0.4490558f, +0.0805490f, -0.0665961f, -0.1643153f,
  -0.0495203f, -0.0222691f, +0.1261249f, -0.0049144f, +0.3971240f, +0.1429527f, -0.1304104f, -0.0126297f,
  +0.0038551f, +0.2526549f, -0.2252524f, +0.0684548f, -0.0892018f, -0.0660455f, +0.3254391f, -0.3726996f,
  +0.3626104f, -0.1346886f, -0.3124760f, -0.1412686f, -0.1474258f, +0.5366033f, -0.4740466f, +0.2614668f,
  +0.0844868f, +0.0525066f, +0.1859248f, -0.1602590f, +0.1527072f, +0.2590878f, +0.0396885f, +0.3272917f,
  -0.0152120f, -0.2335907f, -0.0458633f, +0.0807027f, -0.0539048f, -0.4186833f, -0.0462499f, +0.0028089f,
  -0.1995527f, -0.0619056f, +0.0534295f, +0.0463917f, -0.0084803f, -0.2777778f, -0.0500980f, +0.1084397f,
  -0.0881867f, +0.0557626f, +0.0085949f, -0.2247057f, +0.0160018f, -0.0797293f, -0.0885678f, +0.1863736f,
  +0.1214220f, +0.0009419f, -0.0704799f, -0.1350604f, +0.1172008f, +0.1667115f, +0.0816155f, -0.0809220f,
  +0.2648724f, -0.2158719f, -0.3930787f, -0.1003458f, +0.0569064f, +0.1657273f, -0.0101333f, +0.1919840f,
  +0.3442117f, +0.2944174f, -0.2625466f, +0.1700099f, +0.2326423f, -0.0349324f, +0.0366876f, -0.0960280f,
  +0.2602433f, -0.0701080f, -0.0787173f, +0.4296522f, -0.2016723f, +0.1951856f, -0.1561756f, +0.0846802f,
  -0.3213606f, +0.7789393f, +0.1023488f, -0.0180227f, -0.4842275f, -0.0605539f, +0.1270886f, -0.2814755f,
  +0.3370251f, -0.1144367f, -0.2403170f, +0.0766155f, +0.0416875f, -0.1078567f, +0.0324361f, +0.7449763f,
  -0.0335184f, -0.0827123f, -0.1157101f, -0.0905110f, +0.0420607f, -0.0248059f, +0.1503990f, -0.0755038f,
  +0.2652257f, +0.2050045f, +0.0146691f, -0.1346412f, +0.1086875f, -0.4266727f, -0.1279478f, +0.1891398f,
  +0.0453804f, +0.0112188f, +0.0594691f, +0.0805533f, +0.0199828f, -0.4583485f, -0.1156368f, -0.0291791f,
  -0.0904396f, -0.1685142f, -0.2749146f, +0.0121384f, -0.2763327f, +0.3738654f, +0.0327207f, -0.0882600f,
  -0.0412095f, +0.0726698f, -0.0174308f, +0.1578163f, +0.1974443f, +0.1547851f, -0.0484181f, -0.0246749f,
  +0.1455662f, -0.0686773f, +0.0000781f, -0.0308106f, +0.0112236f, +0.0711460f, -0.0514197f, +0.1249806f,
  -0.2420932f, +0.0012984f, -0.0358806f, +0.0087842f, +0.0622009f, +0.7156199f, +0.0955566f, -0.1738953f,
  +0.3510302f, -0.1747918f, -0.1204687f, -0.1676109f, +0.1368568f, +0.7341982f, -0.4482007f, +0.1303633f,
  +0.1562782f, +0.0284618f, -0.1793168f, +0.0905097f, +0.1548692f, -0.0282924f, +0.1679764f, +0.1934709f,
  +0.1774410f, +0.1398302f, +0.1276476f, +0.1170633f, -0.0177109f, +0.4052078f, -0.2327742f, -0.0549269f,
  +0.1631210f, +0.0711526f, +0.0644132f, +0.0128861f, -0.0517278f, +0.1705991f, +0.0523349f, +0.0210427f,
  +0.0293512f, -0.0204983f, -0.1605794f, +0.0912098f, +0.0056450f, -0.1601082f, +0.0117826f, -0.0457627f
);

const float biases[4] = float[4](
  +0.0362092f, +0.0179811f, -0.1079170f, -0.0656127f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer32 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1322961f, -0.0981017f, +0.1892974f, +0.1787487f, -0.2577018f, +0.0787644f, -0.1708965f, -0.0030029f,
  +0.2728066f, +0.1943301f, +0.3315096f, +0.0901856f, +0.3807168f, -0.0092045f, -0.2931542f, -0.1142897f,
  +0.2537666f, -0.2196667f, +0.4668507f, +0.1125629f, +0.1167139f, -0.4279780f, +0.0198785f, +0.3077960f,
  -0.1670291f, +0.8267285f, -0.1104934f, -0.0387831f, -0.0533611f, -0.2423007f, +0.0629273f, +0.0259285f,
  +0.1863443f, +0.3464837f, +0.1536736f, -0.0768171f, +0.0078497f, +0.4039763f, +0.1820069f, -0.3317130f,
  +0.1009008f, -0.0540638f, +0.6119246f, +0.1594725f, +0.1346643f, -0.5078535f, -0.0856169f, -0.0957482f,
  +0.0901785f, -0.1034564f, -0.1324157f, -0.1276282f, +0.0781832f, -0.1442406f, +0.2357241f, +0.1877818f,
  +0.1023221f, +0.1964940f, -0.0358413f, -0.5090579f, -0.0296318f, -0.1250480f, +0.1119518f, -0.1407062f,
  +0.1345434f, +0.0255716f, +0.0979988f, -0.0330648f, -0.0363218f, -0.1697749f, +0.1483064f, -0.1695368f,
  +0.0213513f, -0.0470216f, -0.1836807f, -0.3722073f, +0.1200028f, +0.2237251f, +0.2132520f, -0.0003572f,
  +0.1977624f, -0.2502024f, +0.3196818f, -0.1325438f, +0.0991803f, +0.3005629f, -0.1185817f, +0.1324842f,
  -0.0027803f, +0.0516804f, -0.1902811f, -0.0811482f, +0.0197097f, +0.0439209f, +0.0229914f, +0.0337685f,
  -0.1639852f, -0.3670104f, -0.0543797f, +0.3040812f, -0.1733354f, +0.0424276f, -0.0733022f, +0.0756944f,
  -0.1547857f, +0.3379954f, +0.0156557f, -0.2001736f, -0.0324789f, -0.1912986f, +0.3117006f, +0.1723958f,
  -0.4913440f, -0.1487026f, +0.1887206f, +0.2601246f, -0.2176090f, -0.2112836f, -0.2413455f, -0.2100323f,
  -0.0302843f, -0.1826086f, -0.1472802f, -0.0414163f, -0.0097319f, +0.0796266f, +0.0324789f, -0.1008041f,
  -0.2515338f, +0.0641003f, +0.1442682f, +0.1956809f, +0.1981601f, -0.0109492f, +0.0826920f, +0.2866175f,
  +0.0166389f, -0.1293315f, +0.2482939f, -0.0999152f, -0.0878292f, +0.2600046f, -0.0771642f, -0.0429001f,
  -0.0655038f, -0.1080640f, -0.0006192f, +0.4137134f, +0.1538241f, -0.1578827f, -0.1861018f, -0.2575859f,
  -0.0535155f, -0.0478592f, +0.1781818f, +0.1817043f, +0.3588936f, -0.0404050f, -0.1306345f, -0.2017979f,
  -0.1087657f, -0.2446422f, +0.3160397f, -0.0548735f, +0.1702946f, +0.3023144f, -0.1307918f, +0.1133869f,
  +0.2467898f, +0.0267739f, +0.1420192f, +0.3615724f, -0.1273400f, +0.0174504f, -0.1268049f, +0.2473563f,
  -0.4420781f, -0.1387478f, +0.1436791f, +0.1881981f, +0.0299737f, +0.7049809f, -0.1273818f, -0.1637913f,
  -0.1596760f, +0.1229147f, -0.0022880f, -0.0529517f, -0.1362415f, +0.0109649f, +0.0428634f, -0.1167597f,
  +0.0096677f, +0.1416194f, +0.1529920f, +0.0374619f, +0.0284552f, +0.2598475f, -0.1196173f, -0.1779939f,
  -0.1160716f, +0.1518681f, +0.0907115f, +0.2527121f, +0.1996918f, +0.4516291f, +0.0762779f, +0.0258880f,
  +0.0005218f, -0.0615802f, +0.1252153f, -0.0412950f, -0.2142240f, +0.0441788f, -0.0061196f, -0.3234848f,
  +0.0134568f, +0.1855125f, -0.0143926f, +0.3758824f, -0.3020595f, +0.1369786f, -0.1140324f, -0.1861558f,
  +0.0065737f, +0.2243706f, -0.3109518f, +0.1761414f, -0.0394638f, -0.2625373f, +0.2526272f, -0.1286633f,
  -0.0460977f, +0.1147129f, -0.2026014f, -0.1444876f, -0.1673138f, -0.0891670f, +0.0785731f, -0.1160192f,
  -0.0061260f, +0.1625104f, +0.0727515f, -0.0794833f, -0.0790298f, +0.4787890f, -0.2411129f, +0.1657722f,
  +0.3457538f, +0.1225586f, -0.0998155f, -0.2243245f, -0.0460571f, -0.1488576f, +0.4311727f, +0.3947473f,
  -0.2814865f, +0.0243447f, -0.2050450f, +0.0689784f, +0.2656617f, -0.1300498f, +0.1377069f, +0.0425648f,
  +0.0662608f, +0.0030221f, +0.1151537f, -0.1200333f, -0.0810423f, +0.4860049f, +0.0834663f, +0.0615867f,
  +0.5785048f, +0.0242083f, +0.2380006f, -0.4977186f, -0.0067134f, +0.2676058f, -0.3323941f, -0.0726136f,
  +0.1099913f, -0.0714609f, +0.0200266f, +0.1164327f, -0.1693890f, +0.0827871f, +0.0992427f, -0.0552195f
);

const float biases[4] = float[4](
  -0.0355186f, +0.0358233f, -0.0892175f, +0.0854333f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer33 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1554957f, +0.3892313f, +0.0081246f, -0.0497512f, -0.0479717f, +0.0996302f, -0.1848263f, -0.1186115f,
  +0.3489931f, -0.3227125f, -0.0533140f, -0.1230623f, -0.0055166f, -0.0428375f, +0.2138585f, +0.3120067f,
  -0.1578160f, +0.0099385f, -0.2358494f, +0.1309124f, -0.1479859f, +0.1226938f, +0.1264331f, +0.1550415f,
  +0.4765571f, +0.2146600f, -0.2812631f, -0.0766397f, -0.0851784f, -0.0616014f, +0.2788277f, +0.0183615f,
  -0.2104940f, -0.7250434f, -0.1067911f, -0.2121915f, -0.0080429f, +0.1259214f, +0.0467235f, +0.2883050f,
  -0.0644640f, +0.1416421f, -0.0584712f, +0.1174888f, -0.0629679f, +0.1179649f, +0.1726708f, -0.0053031f,
  -0.0761286f, -0.0498066f, +0.1037352f, -0.1189718f, +0.0385031f, +0.0465647f, -0.0596949f, -0.0519374f,
  -0.1276416f, +0.0050182f, -0.1309085f, +0.1878386f, +0.1138346f, -0.0942318f, -0.0214426f, -0.1598719f,
  +0.0198455f, -0.1820884f, +0.0300130f, -0.0451434f, -0.1521132f, +0.0323958f, -0.0821419f, -0.0304265f,
  +0.2212089f, -0.3627269f, +0.1862030f, -0.1905457f, -0.1282177f, +0.0288778f, -0.1346356f, -0.0709077f,
  +0.5032923f, -0.0226031f, +0.4024746f, +0.0205598f, -0.0414387f, +0.4725706f, -0.0128679f, -0.5570576f,
  +0.0308777f, -0.3916957f, -0.1521341f, +0.0162654f, -0.3902126f, +0.0638798f, +0.5529001f, +0.3167039f,
  -0.2866962f, -0.5497221f, +0.1360333f, -0.1264855f, +0.0347723f, +0.6213515f, -0.2924534f, -0.3942022f,
  +0.0499168f, +0.1466393f, +0.3856902f, +0.4458065f, -0.2043957f, +0.6164411f, -0.4021221f, -0.3052408f,
  -0.0681445f, -0.4913458f, -0.1372914f, +0.0416897f, -0.4390906f, +0.0650978f, +0.0514060f, +0.1356970f,
  -0.4132340f, -0.4289057f, -0.1067511f, -0.1544542f, -0.2520468f, +0.2965943f, -0.3752804f, -0.2635695f,
  -0.7314274f, +0.0649859f, -0.3103586f, +0.0898751f, -0.2392242f, +0.0499688f, -0.3719007f, -0.0792346f,
  +0.3445431f, -0.1856041f, -0.1037169f, +0.0561726f, -0.2326370f, +0.1774431f, -0.0046865f, -0.2358093f,
  +0.0534248f, +0.0775082f, -0.1308050f, -0.0629722f, +0.1107477f, +0.0076818f, +0.0244603f, -0.0046227f,
  +0.0502834f, +0.1635134f, -0.2272273f, -0.2696771f, +0.1994384f, +0.0143690f, -0.2508265f, +0.0010120f,
  +0.2928153f, -0.0163470f, -0.0023133f, -0.1942782f, -0.0248741f, -0.0986054f, -0.1307781f, -0.1953046f,
  +0.2446398f, -0.0504798f, -0.4719921f, -0.0522370f, -0.0770669f, +0.1136976f, -0.0743008f, +0.0179743f,
  -0.1370727f, -0.5006594f, +0.3987193f, -0.0746912f, -0.2313727f, -0.0844947f, +0.0562169f, -0.1870670f,
  +0.4504012f, -0.4542443f, +0.1700193f, -0.4531510f, +0.0433727f, -0.0671450f, +0.1150194f, -0.0589228f,
  -0.0209486f, -0.0242240f, +0.0162434f, -0.1351868f, +0.0160911f, -0.0248037f, +0.0199142f, -0.0272340f,
  +0.0282347f, +0.0986516f, -0.2157854f, +0.1073136f, -0.1031280f, -0.1020432f, -0.0711161f, +0.0595948f,
  +0.0007893f, +0.0277880f, -0.0946273f, -0.2172370f, -0.2689517f, +0.1284437f, +0.1524205f, -0.0666881f,
  -0.3827200f, +0.0881416f, -0.1573348f, +0.1441592f, -0.4854371f, +0.4833073f, +0.3183593f, -0.5202391f,
  +0.0560847f, +0.2661793f, +0.0953491f, -0.1860350f, +0.2093469f, +0.2521668f, +0.2510225f, +0.1996897f,
  -0.0023203f, -0.2543931f, +0.0339156f, -0.0222912f, +0.1193951f, -0.1964270f, -0.0671962f, -0.1283627f,
  -0.6540813f, -0.5237376f, +0.0987588f, +0.1933747f, -0.4308281f, +0.0274506f, +0.2276988f, -0.5332372f,
  +0.1258642f, +0.4755693f, -0.2492079f, -0.5488753f, +0.3768772f, +0.5334920f, -0.2836572f, -0.1895634f,
  +0.0584062f, -0.0349868f, -0.0706765f, +0.1484636f, -0.0623652f, -0.1940794f, -0.1307103f, -0.0890384f,
  -0.0001630f, -0.0731543f, -0.1672514f, -0.0057375f, -0.2257555f, -0.0098200f, +0.3050770f, -0.1545001f,
  +0.0977078f, +0.2047758f, -0.0449296f, -0.1317853f, +0.1043629f, +0.1943097f, -0.1699055f, +0.0759656f,
  -0.0350305f, +0.0441899f, +0.2336613f, -0.1700903f, -0.0642284f, -0.1674980f, +0.1794444f, +0.0503803f
);

const float biases[4] = float[4](
  +0.0466330f, -0.1877806f, +0.0841607f, +0.0051257f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer33 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1186463f, +0.0839815f, -0.1952991f, -0.0277317f, +0.0738807f, -0.3146505f, -0.0905304f, +0.1492440f,
  -0.4792134f, -0.4295050f, +0.1980897f, +0.0721263f, +0.1489002f, -0.3500091f, +0.2293223f, +0.1952785f,
  +0.3121724f, +0.0630432f, +0.0785134f, -0.0060540f, -0.1271775f, +0.1110068f, +0.1091535f, -0.0121847f,
  -0.0521440f, +0.0080611f, -0.2474956f, +0.2419086f, +0.2386063f, +0.2865171f, +0.1891926f, +0.0566018f,
  +0.4548514f, +0.2069475f, -0.1824294f, -0.4194205f, +0.1245321f, +0.0818603f, +0.2821029f, -0.0243235f,
  -0.2995568f, -0.0706862f, +0.1795857f, +0.2900907f, +0.0639508f, -0.3880379f, +0.2662142f, +0.3113454f,
  -0.1167458f, +0.0641205f, -0.0732619f, +0.0167932f, -0.1362431f, -0.0681015f, -0.1884712f, -0.0748366f,
  -0.1511294f, +0.0331040f, -0.2122656f, +0.2682856f, -0.1236907f, -0.0364238f, -0.1790248f, -0.1755140f,
  -0.0728012f, -0.0140785f, +0.1163939f, -0.2159091f, -0.1609192f, -0.2348549f, +0.0522200f, -0.0356635f,
  +0.0030549f, -0.7721523f, -0.1850193f, +0.1739714f, -0.0552426f, +0.1732233f, +0.2138281f, -0.1762955f,
  +0.1949440f, -0.3675027f, +0.1841201f, +0.5144404f, -0.2364241f, +0.0116570f, +0.1616789f, -0.1262617f,
  +0.0310440f, -0.0347347f, -0.0674550f, +0.0392863f, -0.0565186f, +0.0901754f, +0.0664720f, +0.0161308f,
  +0.3202041f, -0.1940213f, +0.2538724f, -0.1885921f, +0.2633570f, +0.2805320f, -0.1879585f, +0.0409039f,
  +0.5522921f, +0.5655398f, +0.1627219f, -0.2669069f, +0.0884654f, -0.0449652f, -0.1287501f, +0.1840088f,
  +0.0923090f, +0.1578849f, -0.0073664f, -0.1110118f, +0.0482702f, +0.1089611f, +0.1623965f, +0.3205146f,
  +0.0426778f, +0.0406237f, -0.0952160f, -0.0322367f, +0.0778253f, -0.0373075f, +0.0884166f, +0.1428252f,
  -0.0033645f, +0.1056886f, +0.0180646f, -0.1518667f, -0.0896281f, +0.0432991f, -0.1942564f, +0.1651766f,
  +0.0773547f, +0.0916627f, -0.0492164f, +0.1459664f, -0.0267216f, -0.0191545f, +0.0411117f, +0.1051413f,
  +0.1566946f, +0.0340117f, -0.5023664f, -0.1000428f, -0.1015713f, -0.1372887f, -0.1551302f, +0.0918301f,
  -0.0806960f, +0.3455736f, +0.1093333f, +0.1471608f, -0.0665134f, +0.0290476f, +0.0564435f, -0.2534607f,
  +0.0269919f, +0.0857057f, +0.1226154f, -0.0012489f, -0.0798324f, +0.0234928f, +0.1387055f, +0.1276185f,
  +0.1374442f, +0.0430032f, -0.6032197f, +0.3773809f, -0.6521664f, -0.5341219f, -0.1265571f, -0.2967281f,
  +0.2072495f, +0.0961494f, +0.2253947f, -0.4450959f, +0.3768252f, -0.1595057f, +0.3186904f, +0.4228352f,
  +0.0853357f, +0.0315690f, +0.0573258f, +0.1589245f, +0.1470277f, -0.1358513f, +0.0737371f, +0.0297708f,
  -0.0876486f, -0.1420767f, +0.2524427f, +0.1448555f, +0.2035324f, +0.4237151f, -0.2509108f, +0.0924219f,
  +0.0877778f, -0.0563446f, -0.1486597f, +0.1044950f, -0.0187124f, -0.1349388f, -0.1505072f, -0.0758192f,
  +0.0116555f, -0.0364354f, -0.0722075f, +0.0455838f, -0.0609789f, -0.0842586f, -0.0402413f, -0.0288921f,
  -0.2549468f, +0.2397972f, -0.1037433f, +0.1839880f, -0.1713356f, +0.3427903f, -0.0567295f, -0.1973871f,
  -0.3119867f, +0.1297186f, -0.1269967f, -0.0825587f, -0.0234026f, -0.1194513f, +0.1768854f, -0.0875531f,
  +0.3525877f, +0.1382556f, +0.0193571f, +0.0936125f, -0.0691365f, -0.1947927f, -0.0201727f, -0.1928987f,
  +0.2744821f, +0.4410068f, -0.0364520f, +0.2195283f, -0.3529186f, -0.1892239f, -0.2285470f, -0.0477871f,
  -0.9785544f, -0.6452332f, -0.3354684f, -0.3096503f, -0.0509307f, -0.3895231f, +0.0173120f, -0.4777889f,
  +0.5646282f, +0.3244106f, +0.3320152f, +0.1254925f, +0.2899843f, -0.2643835f, -0.2136018f, -0.2717769f,
  -0.0446395f, +0.2599561f, -0.0645372f, +0.0030219f, -0.3175116f, -0.0856705f, -0.1757099f, -0.2440900f,
  +0.2112827f, +0.2319472f, -0.0277901f, +0.2585563f, +0.2047476f, -0.3884855f, +0.4808245f, -0.1212179f,
  +0.1653295f, -0.0294603f, +0.2580833f, -0.2907016f, +0.1177256f, +0.0571497f, -0.3755770f, -0.1720507f
);

const float biases[4] = float[4](
  +0.0683680f, -0.0088107f, +0.0483104f, +0.0120742f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer34 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0690432f, -0.1389678f, -0.1957338f, -0.0015670f, +0.0405993f, -0.0896939f, -0.1390279f, -0.3350736f,
  +0.0706293f, +0.3188251f, +0.1321281f, -0.2290814f, -0.2493301f, -0.0531692f, +0.2315622f, +0.0762107f,
  +0.0545261f, +0.4419047f, -0.0937496f, -0.1548257f, +0.1409686f, +0.0425407f, -0.1016839f, -0.0811641f,
  +0.1136228f, -0.1224844f, -0.2384631f, +0.1461323f, +0.2684435f, +0.0600431f, -0.0642382f, +0.2108376f,
  -0.1587714f, +0.0000436f, +0.0750345f, +0.0727737f, -0.5098885f, -0.1312570f, -0.1038776f, -0.6856269f,
  -0.4189437f, +0.4733792f, -0.1642626f, -0.5161546f, +0.0192801f, -0.0415669f, +0.1132487f, +0.4261900f,
  +0.1015336f, -0.1131068f, -0.2848990f, +0.2604007f, -0.2586887f, -0.0006700f, -0.0821743f, +0.0030382f,
  -0.2763112f, -0.0953363f, -0.1536179f, +0.0472878f, +0.7462566f, +0.3660869f, +0.0043914f, +0.4413411f,
  +0.4291840f, +0.0211129f, -0.1402238f, -0.0720885f, +0.2029328f, +0.2121854f, +0.0506485f, -0.3154607f,
  +0.2122238f, -0.0115854f, -0.0463547f, -0.1942917f, +0.0388224f, +0.0231432f, +0.0334866f, -0.1285200f,
  +0.1329100f, -0.1244439f, -0.3099651f, -0.2119561f, -0.0339062f, -0.0263103f, +0.1228326f, -0.2113334f,
  -0.1432869f, +0.4387537f, +0.0575844f, -0.0069313f, -0.0347683f, -0.0008320f, +0.1182269f, +0.1482454f,
  -0.2709214f, +0.1697778f, +0.4145269f, +0.0656522f, -0.0464875f, -0.0322834f, -0.0103896f, +0.1838967f,
  +0.2726342f, -0.1810332f, +0.1713300f, -0.6486437f, +0.0447159f, -0.2916491f, -0.2291248f, -0.1780880f,
  -0.0871701f, +0.5560333f, -0.0825688f, -0.3497801f, +0.0270393f, +0.0211214f, -0.2223251f, -0.4846272f,
  +0.0089501f, +0.1404073f, +0.2218517f, +0.0297225f, +0.0802932f, -0.0069461f, -0.0845631f, +0.0349681f,
  +0.2594642f, -0.1633769f, -0.0488385f, -0.0011567f, +0.2116600f, +0.1278332f, -0.1511011f, -0.2085157f,
  -0.4024623f, +0.1488637f, -0.0218932f, -0.0383787f, -0.0799547f, +0.3259226f, -0.0412673f, +0.1021790f,
  -0.1379974f, -0.1578418f, +0.0159483f, +0.0285911f, -0.0860376f, +0.0333450f, +0.0407304f, -0.0565719f,
  +0.1478515f, +0.2991255f, +0.3480120f, -0.0557363f, +0.0909212f, -0.1367717f, -0.0853498f, -0.4337830f,
  -0.0821568f, +0.1382577f, -0.1383509f, +0.1887617f, -0.0609336f, +0.0195423f, -0.2160082f, +0.1340026f,
  +0.0009479f, -0.0135104f, -0.2258138f, -0.0096781f, +0.1927104f, +0.1247585f, -0.1171953f, +0.0341896f,
  -0.4481646f, +0.2521858f, -0.3573772f, +0.0782272f, +0.1125750f, +0.3924999f, -0.3504574f, +0.3511752f,
  +0.3213419f, -0.1825262f, +0.3951136f, +0.0284405f, +0.2561176f, -0.0637987f, -0.1433356f, -0.5135284f,
  +0.0320096f, +0.0131911f, -0.0614688f, +0.1213906f, -0.1153749f, +0.0356585f, +0.0082422f, -0.1456978f,
  -0.1219618f, -0.2961016f, +0.0776848f, +0.1971885f, -0.2266549f, +0.0324685f, +0.1876218f, +0.0397781f,
  +0.1648384f, -0.6401847f, -0.0169059f, -0.1053179f, +0.0193001f, -0.0921431f, +0.5143527f, +0.1507164f,
  +0.1168838f, -0.5536915f, +0.1932418f, -0.0347181f, -0.0011466f, -0.1427793f, -0.0920027f, -0.5956928f,
  -0.0321325f, -0.4664681f, -0.2054227f, -0.2953688f, -0.2201051f, +0.0354696f, +0.1589298f, -0.0668208f,
  +0.0296759f, -0.0583582f, +0.0443058f, -0.2354577f, +0.0042044f, -0.0177983f, -0.1249741f, +0.1215036f,
  -0.0715656f, +0.0161097f, +0.2824867f, +0.0253826f, -0.3209454f, -0.0083276f, -0.0191640f, +0.0457779f,
  +0.1489179f, -0.0095252f, +0.2592837f, -0.6407672f, +0.3314341f, +0.1067323f, +0.0685020f, -0.8722759f,
  +0.0125482f, +0.2518101f, +0.0935747f, -0.2082320f, -0.0490131f, +0.0673874f, -0.3482812f, +0.0489663f,
  -0.3053320f, -0.0447361f, +0.2454626f, -0.0741469f, +0.0139206f, +0.0327104f, +0.1183595f, +0.1070421f,
  -0.0371434f, -0.0521703f, +0.0434492f, -0.1911427f, +0.1642263f, -0.0877576f, +0.1474509f, +0.1159825f,
  +0.2917825f, +0.0566899f, -0.0567306f, -0.1866920f, +0.0880652f, -0.1952369f, +0.1468937f, -0.0510590f
);

const float biases[4] = float[4](
  +0.0425657f, -0.0700400f, -0.0670369f, -0.0333949f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer34 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3384135f, -0.2396316f, +0.3036731f, +0.1430055f, +0.1921653f, +0.1350481f, -0.1247003f, -0.0581617f,
  -0.0817702f, -0.1996151f, +0.0576900f, -0.7988603f, -0.0196525f, +0.0036299f, +0.1822729f, -0.2965804f,
  -0.0795929f, +0.1114440f, +0.1241450f, -0.2221383f, +0.1110420f, -0.1713294f, -0.0336378f, +0.1557008f,
  +0.0874290f, +0.6322827f, +0.0126616f, +0.2413826f, +0.1253475f, -0.2462856f, +0.0303292f, +0.2113872f,
  +0.3020399f, +0.2134275f, +0.3524663f, -0.2423169f, -0.0398016f, -1.0228075f, -0.0009633f, -0.1475461f,
  -0.1579510f, -0.2416627f, +0.0724235f, +0.5021215f, -0.0862188f, -0.1965381f, +0.8805953f, +0.2672605f,
  +0.1309409f, +0.3972250f, -0.3597814f, -0.2482256f, +0.2566194f, +0.0499043f, +0.0429918f, +0.0486161f,
  -0.0938863f, +0.4965101f, -0.2788154f, -0.2265300f, -0.1711938f, +0.3143935f, -0.1966602f, -0.0678560f,
  -0.1069342f, +0.0312267f, -0.0639032f, +0.0240182f, -0.1330417f, -0.0022044f, +0.0571248f, +0.0579330f,
  -0.1172805f, +0.0045043f, -0.0549502f, -0.0395329f, +0.0321979f, -0.0458790f, -0.0077872f, -0.0383937f,
  +0.0777015f, -0.0838864f, +0.1413652f, -0.3038767f, -0.1667375f, -0.0493074f, +0.2761348f, +0.0339576f,
  +0.0478394f, +0.0628560f, -0.0152116f, -0.1277512f, +0.0370849f, +0.0346923f, -0.3677428f, +0.0561147f,
  -0.1607137f, +0.2883842f, -0.0949529f, +0.0647394f, +0.2711953f, -0.0846592f, -0.0909014f, +0.1534689f,
  -0.5758448f, -0.2494116f, -0.1127015f, -0.0683976f, -0.3051138f, +0.2168198f, +0.0047459f, +0.7087486f,
  +0.2790133f, -0.1715393f, -0.0849339f, +0.5143453f, -0.2217578f, -0.2455869f, +0.7915340f, -0.1082933f,
  +0.0905227f, -0.1954676f, -0.0472186f, +0.2471703f, +0.1423543f, -0.0682436f, -0.0786082f, -0.1197383f,
  -0.3013852f, +0.0390887f, -0.0046167f, -0.1508750f, +0.1836049f, -0.2150495f, -0.1082580f, +0.1356227f,
  -0.0612191f, -0.0589015f, -0.0065924f, -0.1432966f, +0.2254987f, -0.5385844f, -0.0129519f, -0.1193783f,
  +0.1627871f, -0.0768515f, -0.0780056f, -0.1463487f, -0.2194192f, +0.0436995f, -0.0391966f, +0.0573721f,
  -0.0087911f, +0.1962518f, -0.3054134f, -0.0185651f, +0.0415271f, +0.0373614f, +0.0755730f, -0.3884296f,
  -0.1913335f, -0.2462765f, +0.2015361f, -0.4411570f, +0.1272364f, -0.0867207f, +0.4286471f, -0.0153639f,
  +0.0255778f, -0.0909216f, -0.0058751f, -0.0226412f, +0.0792863f, -0.0899065f, -0.1645417f, +0.0319744f,
  -0.1046729f, +0.2994536f, -0.0071443f, +0.2386063f, -0.2105344f, -0.4076859f, -0.1120752f, +0.3421718f,
  -0.0482742f, +0.0334149f, +0.3842655f, -0.1431801f, -0.0197291f, -0.0209521f, +0.1096118f, +0.1429496f,
  -0.0808302f, -0.1449312f, +0.1356579f, +0.0419070f, -0.0249423f, -0.1755355f, +0.0056147f, +0.1124493f,
  +0.1640257f, -0.3144641f, -0.1585556f, -0.2329887f, -0.0468996f, -0.4412260f, +0.0497120f, +0.0071837f,
  +0.2090800f, -0.3732966f, +0.1887929f, +0.1706941f, +0.0377884f, -0.6761050f, +0.1373599f, -0.1221005f,
  -0.1233721f, +0.4155044f, -0.0449006f, -0.0341819f, -0.0557137f, -0.0476212f, +0.0609305f, -0.0159019f,
  +0.0421971f, -0.0040158f, -0.0819715f, -0.0778935f, +0.0164791f, -0.0360228f, -0.1172986f, +0.6336955f,
  +0.0415701f, +0.2861137f, +0.0789151f, +0.2123991f, +0.0241131f, -0.0437336f, -0.3810974f, +0.0931590f,
  +0.0285754f, +0.0245012f, -0.0305454f, -0.0637296f, -0.3659087f, -0.0177531f, +0.0316398f, -0.2114550f,
  +0.1727685f, +0.3206161f, -0.0631254f, +0.0698775f, +0.4783882f, +0.1345392f, +0.0220127f, +0.1871559f,
  -0.2110460f, +0.2826042f, -0.0979818f, +0.5351514f, -0.0264108f, +0.1125612f, -0.0723603f, +0.0604247f,
  -0.3027674f, -0.0292044f, +0.1104996f, -0.1610691f, +0.0268580f, -0.1115704f, +0.0657440f, +0.2757393f,
  +0.1274068f, +0.4095462f, -0.0054811f, -0.1429793f, +0.2899006f, +0.2521744f, +0.4587750f, +0.2315402f,
  +0.3710925f, -0.2665286f, -0.0522337f, +0.0725244f, -0.0284389f, -0.1102238f, -0.0780579f, -0.0743915f
);

const float biases[4] = float[4](
  -0.0689074f, +0.0045177f, -0.0264184f, +0.1304908f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer35 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2228988f, +0.0218102f, -0.1908264f, +0.0319607f, +0.0637394f, -0.0099931f, +0.1004827f, -0.1057161f,
  -0.0702861f, -0.0200481f, -0.0755270f, -0.1505689f, -0.0979992f, +0.2333400f, +0.2037217f, +0.0831150f,
  +0.2160149f, +0.0263235f, -0.1317575f, +0.2445586f, -0.1820784f, -0.0743956f, -0.1596415f, -0.3148297f,
  -0.3274445f, -0.1795612f, -0.0962359f, -0.0466514f, +0.0316344f, +0.2596635f, -0.2487549f, +0.1329166f,
  -0.3125079f, -0.4465342f, +0.1632018f, -0.4586930f, -0.2743162f, +0.1954890f, -0.1044963f, -0.1985561f,
  +0.1128303f, +0.0114273f, +0.3626133f, +0.1813657f, -0.0292583f, +0.0496791f, -0.1281649f, -0.2503492f,
  +0.1438968f, +0.0363618f, +0.0238997f, -0.1154012f, -0.0332524f, -0.1669607f, +0.2078016f, +0.0454100f,
  +0.2108248f, -0.0357300f, +0.1004848f, -0.3152642f, -0.0855440f, +0.0804930f, +0.3707659f, +0.3553675f,
  +0.0250747f, -0.1461958f, +0.1771189f, +0.1215764f, +0.4578845f, -0.1155005f, -0.0206954f, -0.0126183f,
  +0.3306617f, +0.0881409f, -0.0744154f, -0.1577617f, -0.0643346f, +0.4863658f, -0.0304476f, -0.5721213f,
  -0.1362953f, -0.1628103f, -0.0424632f, -0.1855234f, +0.1092557f, -0.1976938f, -0.1193426f, +0.1537324f,
  -0.0045304f, -0.0102438f, -0.0007771f, +0.0681363f, +0.0915546f, -0.1652708f, -0.1461076f, -0.0347197f,
  +0.1684544f, +0.2295498f, -0.4018046f, +0.4430188f, -0.3835669f, -0.0102159f, +0.1476989f, -1.3084568f,
  +0.0312093f, -0.0770381f, +0.0526095f, -0.9526959f, -0.0783963f, +0.4261696f, -0.3205484f, +0.3617803f,
  +0.0018860f, -0.1008947f, +0.0296877f, +0.0412777f, +0.1599614f, -0.0013831f, -0.0798464f, -0.2440783f,
  +0.2834246f, -0.2003591f, -0.2576755f, +0.0773117f, -0.0810556f, +0.0762149f, +0.4721902f, -0.1813725f,
  +0.2918652f, +0.1924119f, +0.1598395f, -0.5908519f, +0.0731144f, +0.1625347f, -0.1383842f, +0.0852364f,
  -0.0392371f, -0.1130572f, -0.0307625f, +0.0388744f, -0.0909400f, -0.0377458f, +0.0025592f, +0.0850620f,
  +0.6722443f, -0.4242308f, +0.3909079f, +0.0512028f, -0.1551059f, +0.1517555f, -0.2491435f, -0.6451303f,
  +0.5726716f, +0.6592683f, +0.6437271f, -0.2203352f, +0.1167549f, +0.1638186f, -0.6079553f, -0.3547022f,
  +0.3959643f, -0.2287589f, -0.1605206f, -0.2146622f, -0.1888968f, +0.2068199f, -0.0743117f, +0.1113120f,
  +0.3424775f, -0.3180353f, +0.6426517f, +0.1399852f, +0.3988989f, +0.1493924f, -0.2720071f, -0.6732144f,
  +0.1237050f, -0.3032280f, +0.0904598f, -0.0839316f, +0.0596540f, +0.5616282f, -0.5046453f, -0.4889781f,
  -0.7202091f, -0.1878812f, -0.0250946f, -0.1787096f, -0.0610454f, +0.2905211f, -0.2497754f, -0.2982643f,
  -0.3921492f, +0.1065649f, +0.4926483f, +0.1397498f, +0.4398471f, +0.3686983f, -0.3057701f, -0.1393175f,
  +0.1239616f, +0.1657976f, +0.6079476f, -0.0262571f, +0.1533818f, -0.1216594f, -0.2003738f, +0.2599160f,
  -0.2468631f, -0.0521627f, +0.1729782f, -0.0488956f, -0.1493090f, -0.2941630f, -0.0928594f, +0.2360995f,
  -0.0506886f, -0.3118293f, -0.3106116f, +0.1986852f, -0.0229900f, -0.0261624f, +0.0956158f, +0.0364268f,
  -0.0637716f, -0.1951864f, -0.2430377f, +0.1894900f, -0.1383230f, -0.1355255f, +0.1475121f, +0.2105462f,
  -0.0783636f, +0.0387954f, +0.1085979f, +0.0019635f, +0.1646230f, +0.0256009f, -0.2142315f, -0.1339054f,
  +0.2006927f, -0.4514606f, -0.3961802f, -0.0875409f, -0.1529241f, -0.0829248f, +0.2459360f, +0.2086497f,
  -0.1798115f, -0.2601309f, -0.3244203f, -0.3293756f, +0.5644977f, -0.1685468f, +0.3386506f, +0.5315168f,
  -0.2867261f, -0.0305391f, -0.0620980f, +0.2893608f, +0.1330874f, -0.2484304f, -0.0845279f, -0.0083266f,
  -0.0845658f, -0.0833872f, +0.0226328f, -0.0164717f, +0.1308178f, -0.1158568f, -0.1264600f, +0.0498763f,
  -0.0008663f, +0.2658491f, +0.1141784f, -0.2545880f, +0.0466550f, -0.3950585f, -0.0020332f, +0.2244911f,
  -0.0590158f, +0.0212307f, -0.0151489f, +0.0367034f, -0.0371488f, -0.0924660f, +0.1592920f, +0.0689761f
);

const float biases[4] = float[4](
  -0.0269203f, +0.0425750f, -0.2126409f, +0.0563116f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer35 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0426336f, +0.2019214f, +0.0921804f, -0.0036686f, -0.0131912f, +0.0155403f, +0.0934014f, +0.1263953f,
  -0.1444530f, +0.3682160f, +0.0559599f, -0.0912403f, -0.0586528f, -0.0580367f, -0.0389612f, +0.0596689f,
  -0.3065082f, -0.1342693f, -0.1422875f, +0.0665032f, -0.0460098f, +0.1453162f, -0.2185161f, -0.2722922f,
  -0.1485388f, +0.2668693f, +0.3293925f, -0.2338266f, +0.1261491f, -0.0908990f, -0.0815664f, +0.2283207f,
  -1.0472392f, -0.3945526f, -0.5931203f, -0.3414997f, +0.1635390f, -0.1946239f, +0.1385005f, -0.0577614f,
  -0.3434263f, -0.3474624f, -0.4930528f, +0.5215139f, -0.1370090f, -0.3063605f, -0.5929567f, -0.4464879f,
  +0.0355176f, +0.1892927f, +0.2850673f, -0.1152776f, +0.0901225f, +0.0057816f, +0.0922057f, -0.0191369f,
  +0.0485858f, -0.2575668f, +0.5060078f, -0.0707111f, +0.1407930f, +0.0855370f, +0.2142556f, +0.2714663f,
  +0.0719241f, -0.2709564f, +0.3044004f, +0.0322668f, +0.5493076f, -0.2384527f, -0.0594913f, -0.2823530f,
  -0.1230054f, +0.0577697f, -0.0536807f, +0.0178385f, +0.0013902f, +0.0744713f, -0.1714192f, -0.0874014f,
  -0.0562522f, -0.2340567f, +0.1149382f, -0.1211744f, +0.1704947f, +0.0157345f, -0.1580119f, +0.1205106f,
  -0.0645033f, -0.0302496f, +0.0494287f, +0.0564825f, -0.0159793f, -0.0382827f, -0.1044006f, -0.0954587f,
  -0.2640668f, -0.2486394f, -0.6452871f, +0.2183496f, -0.1285729f, +0.0673982f, -0.2178126f, -0.2815373f,
  -0.2652794f, -0.1157171f, -0.2499864f, +0.8586317f, -0.3205169f, +0.2149832f, -0.2445696f, -0.6056789f,
  -0.1810775f, -0.0095404f, -0.1329972f, -0.0286317f, +0.1734291f, -0.0407416f, -0.2551301f, +0.0000265f,
  +0.1342101f, +0.1510314f, +0.1404471f, -0.0109272f, -0.2001501f, -0.1274502f, -0.3517469f, +0.0206381f,
  +0.7968199f, +0.9873073f, +0.5418336f, -0.6707216f, +0.0204272f, -0.1146548f, -0.2203807f, +0.2840501f,
  +0.0513939f, +0.1224400f, +0.1124696f, -0.4512184f, -0.3957892f, +0.1999716f, +0.0898271f, +0.2271944f,
  +0.2885408f, -0.0822449f, -0.6317855f, +0.4752478f, -0.4275147f, +0.4335794f, +0.1228262f, -0.3291059f,
  -0.0407450f, +0.4747031f, +0.7438397f, +0.3251804f, -0.2617679f, +0.4738151f, +0.1255305f, -0.1618880f,
  +0.3424661f, +0.2382061f, -0.0606809f, +0.6182513f, -0.3600468f, +0.3099934f, +0.1226722f, -0.3297586f,
  +0.3065803f, +0.2734191f, +0.1212858f, -0.1786417f, +0.0106715f, +0.0374824f, -0.0407179f, -0.0876826f,
  +0.5633189f, +0.6718684f, +0.0601749f, -0.0148896f, +0.3668786f, +0.4631676f, +0.2749068f, -0.0254165f,
  +0.3471951f, -0.0426824f, +0.6012153f, -0.1300878f, +0.2606540f, +0.1850295f, -0.3973178f, -0.8498337f,
  +0.0821859f, +0.3171000f, +0.1397952f, -0.2181004f, -0.0847906f, +0.2096910f, +0.1129072f, -0.4274452f,
  +0.0511026f, -0.2911169f, +0.4529029f, -0.2397640f, -0.0689081f, +0.2437162f, -0.0452933f, -0.4096198f,
  -0.1260175f, +0.0618987f, +0.1986960f, -0.2082197f, -0.0044244f, -0.1872394f, -0.2577448f, -0.5892441f,
  +0.3522625f, -0.1653831f, -0.2890144f, +0.1119048f, -0.2154316f, -0.0951284f, +0.2061817f, +0.1299285f,
  +0.2963662f, +0.5946468f, +0.2039450f, +0.3128533f, -0.3001653f, -0.1190120f, +0.3042481f, -0.2105526f,
  -0.0843913f, +0.4242316f, +0.1384719f, -0.1869842f, -0.0771774f, +0.2187612f, +0.1204755f, +0.0004945f,
  +0.3108264f, -0.0069382f, -0.0802263f, +0.0677412f, -0.0254574f, +0.0514787f, +0.0225420f, +0.1326217f,
  -0.0203301f, -0.6847462f, -0.0666257f, +0.1322268f, +0.0336704f, -0.6317679f, +0.4409204f, -0.1419734f,
  -0.2215283f, +0.1137379f, -0.0345259f, -0.1316378f, +0.0871067f, +0.0507278f, +0.0230541f, +0.1459036f,
  +0.0542089f, -0.1151411f, +0.0108020f, -0.0177567f, +0.0262871f, +0.0768676f, +0.0213442f, -0.0211370f,
  -0.1496809f, -0.2821196f, -0.0453984f, +0.0276877f, -0.3123745f, -0.1260572f, -0.0865895f, -0.0592003f,
  -0.0921815f, +0.0703882f, -0.1659126f, +0.0308319f, -0.0245253f, -0.0097705f, -0.1327239f, +0.0311642f
);

const float biases[4] = float[4](
  -0.0402333f, -0.0326123f, -0.0510108f, +0.0895497f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer36 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1394680f, -0.0864062f, +0.1042482f, -0.1697530f, +0.1360764f, +0.0634361f, +0.5774764f, -0.2493960f,
  +0.0393892f, -0.0712295f, -0.3049871f, +0.2087093f, -0.0065945f, +0.0228208f, +0.2636449f, +0.0125861f,
  +0.0963176f, -0.1460362f, +0.4178239f, +0.0096650f, +0.0814652f, -0.1286584f, -0.1002319f, -0.2397097f,
  -0.0464419f, +0.0037971f, +0.4476624f, +0.3041824f, +0.0530564f, -0.4053586f, -0.3229303f, +0.3537382f,
  -0.1689735f, -0.8091077f, +0.1644547f, -0.0330324f, +0.2667601f, -0.7196823f, -0.2431283f, +0.1140756f,
  -0.1600346f, +0.2635080f, +0.1855412f, -0.2233148f, +0.0944724f, -0.3966980f, -0.4003871f, -0.0328706f,
  -0.1719846f, +0.0963909f, +0.0398807f, -0.3283810f, +0.0239676f, -0.0238337f, -0.1688876f, +0.3619288f,
  -0.3586600f, +0.1814189f, -0.3905519f, +0.2924497f, +0.2675416f, +0.1384686f, +0.0554737f, -0.1722826f,
  -0.2745616f, +0.8645068f, +0.0128536f, +0.0117519f, -0.0223830f, +0.0562832f, -0.2870177f, -0.5067447f,
  -0.1491036f, +0.0880784f, -0.2355785f, +0.1560694f, +0.0002038f, -0.0427433f, +0.1934020f, +0.0589410f,
  -0.0195336f, +0.2534840f, -0.1480752f, -0.0624759f, -0.1539148f, +0.1620815f, +0.1322374f, +0.0455761f,
  -0.1335365f, +0.2782918f, -0.0294540f, +0.1581796f, -0.0439598f, -0.0551703f, +0.0710108f, -0.0677779f,
  -0.1988401f, -0.1055095f, +0.0821516f, +0.0134611f, -0.0297165f, +0.0440403f, -0.4154444f, -0.1095674f,
  -0.3202194f, +0.0629662f, +0.1924108f, +0.3833683f, +0.1985675f, +0.1092846f, -0.8118091f, +0.2824463f,
  -0.0739961f, +0.0982153f, +0.0566985f, +0.2442844f, -0.1774367f, -0.1591063f, -0.2121343f, -0.0452613f,
  -0.0249138f, +0.0079646f, -0.2115734f, -0.0253358f, +0.0105205f, +0.0097802f, -0.1174839f, -0.2455696f,
  -0.0341575f, +0.2541455f, -0.7039862f, +0.1613797f, -0.1056216f, -0.0169358f, -0.2467114f, -0.4590619f,
  +0.1133663f, -0.0853409f, +0.2012962f, +0.0095304f, +0.0335350f, -0.0582783f, +0.2230634f, +0.0341030f,
  -0.0627151f, +0.0584043f, -0.0960557f, -0.0996969f, +0.0999522f, -0.0530434f, +0.0393298f, -0.0059244f,
  -0.3735302f, -0.1105832f, -0.3289566f, -0.3219467f, +0.4698592f, -0.3435591f, +0.2061118f, +0.0051088f,
  -0.0779319f, +0.1627681f, -0.1959103f, -0.2535776f, -0.1248072f, +0.1072951f, +0.2300420f, +0.3118000f,
  -0.2145644f, +0.1223408f, -0.1163471f, +0.1344293f, -0.0747294f, -0.0651285f, -0.0800668f, +0.1290546f,
  -0.3550790f, -0.0509792f, -0.0169945f, +0.2877284f, +0.0230517f, +0.0677679f, +0.1890423f, +0.3444321f,
  -0.0974761f, +0.4276997f, -0.3410496f, +0.3402543f, -0.0831517f, -0.0433399f, +0.4834471f, +0.1159902f,
  +0.2306073f, -0.0995194f, +0.0640309f, -0.2516990f, +0.0710659f, +0.1044050f, -0.3243866f, -0.2564814f,
  +0.2228287f, -0.1197340f, -0.2295567f, +0.0002674f, +0.1028081f, +0.0247677f, -0.2611888f, -0.2454163f,
  +0.1690881f, -0.3131346f, -0.2634486f, +0.1412001f, -0.0055918f, +0.1001872f, +0.7733710f, +0.0761857f,
  -0.0418147f, +0.0880393f, -0.0769954f, -0.0862442f, +0.4124327f, -0.2079091f, +0.5002903f, -0.0751536f,
  -0.2666555f, -0.0578944f, +0.3381705f, +0.5840679f, -0.0210677f, -0.2232177f, +0.3378718f, -0.0301464f,
  -0.0146957f, +0.3936380f, -0.0060666f, +0.1729039f, -0.0301804f, -0.0875810f, +0.3872561f, +0.1875046f,
  +0.0275478f, -0.0641490f, +0.0438311f, -0.1931029f, +0.3861794f, -0.3477252f, -0.0345345f, +0.2213084f,
  -0.1508839f, -0.3990754f, +0.2982434f, -0.1178926f, -0.1822422f, -0.0569698f, +0.4127884f, -0.2672698f,
  -0.0266953f, +1.0892541f, -0.5987150f, -0.4052587f, -0.0366695f, +0.0337578f, -0.0239962f, -0.0286530f,
  +0.0901013f, -0.0240373f, +0.0588234f, -0.0436434f, +0.1463813f, +0.1105716f, -0.3950242f, +0.1027595f,
  +0.0057978f, +0.1288943f, -0.0725099f, +0.0388752f, +0.0602915f, +0.0149280f, -0.0562222f, -0.2433637f,
  -0.0011887f, +0.1660700f, +0.1091471f, +0.1423124f, +0.0852536f, +0.0439396f, -0.3710337f, -0.0366581f
);

const float biases[4] = float[4](
  -0.1385757f, -0.0057086f, -0.0958140f, -0.0046020f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer36 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1447698f, -0.0347771f, -0.1239294f, -0.0010084f, +0.2551175f, +0.0759083f, +0.1251132f, -0.0112295f,
  +0.0302595f, +0.3353769f, -0.1767585f, +0.1955092f, -0.2181387f, +1.1636585f, +0.0024688f, +0.3910838f,
  -0.1727670f, +0.1905356f, -0.3452160f, +0.0431901f, +0.1196567f, -0.0014503f, -0.0141147f, -0.0706706f,
  +0.0611422f, +0.0868837f, +0.1674241f, -0.2399633f, -0.0637005f, -0.1240749f, -0.6495914f, +0.0733791f,
  +0.0516101f, +0.0452127f, +0.2201686f, -0.1019794f, -0.4891095f, -0.3899419f, -0.3096459f, -0.1111721f,
  -0.1856526f, -0.2552797f, -0.1338186f, +0.1797423f, +0.0210330f, -0.0722680f, +0.0365401f, +0.2412661f,
  +0.1358206f, +0.0919851f, -0.0947507f, -0.1008399f, +0.0594947f, +0.0133243f, +0.5683445f, +0.3452689f,
  -0.1447067f, -0.1400201f, -0.0891499f, +0.2748425f, -0.0139555f, -0.0178053f, +0.1943482f, +0.4600288f,
  -0.1285753f, +0.0352676f, +0.0085868f, +0.0697537f, -0.0659043f, -0.0278562f, +0.4388579f, +0.0367897f,
  +0.2828428f, -0.1219737f, +0.2763014f, -0.0638199f, +0.1996906f, +0.3823236f, +0.0617986f, -0.1409715f,
  +0.1277632f, -0.1436006f, -0.2260817f, +0.0057559f, +0.4731440f, -0.4309324f, -0.1684094f, -0.0590564f,
  +0.0311599f, -0.1894133f, -0.2232534f, -0.1958092f, +0.1819991f, +0.2306619f, +0.0112190f, +0.1024265f,
  -0.1252405f, -0.0303682f, +0.1901944f, +0.4060536f, +0.0433921f, -0.0418951f, +0.3040602f, +0.0882525f,
  +0.5834178f, -0.3307329f, +0.0330286f, -0.1954489f, +0.2817033f, +0.3423663f, +0.0362543f, +0.5691130f,
  +0.0816002f, -1.0951016f, +0.1504074f, +0.1641014f, -0.2146795f, +0.5263620f, +0.2042306f, -0.2606968f,
  -0.1328345f, -0.0068736f, -0.0395990f, -0.0168733f, +0.0676746f, -0.0632999f, +0.4026321f, -0.0764243f,
  +0.2785846f, +0.0060118f, +0.3163829f, +0.0069033f, -0.1354143f, -0.0194215f, -0.5065964f, -0.0219047f,
  +0.0384197f, -0.0334025f, +0.2926027f, -0.0696301f, -0.0295629f, -0.1493511f, -0.0223604f, -0.0818343f,
  -0.2726605f, +0.0346466f, -0.0908204f, +0.1146908f, -0.2896299f, -0.1626022f, +0.0281049f, +0.0910981f,
  -0.2505025f, +0.3120212f, -0.1800460f, -0.0297717f, -0.8208866f, +0.0936518f, -0.6486892f, +0.2087780f,
  -0.2141615f, -0.0679692f, -0.0792441f, +0.1231251f, -0.0193104f, -0.2048155f, -0.2502228f, -0.2731860f,
  -0.1504651f, +0.0468128f, +0.1465089f, +0.1582146f, +0.0403139f, +0.2315397f, -0.2695334f, +0.0210370f,
  +0.3919939f, +0.1190245f, +0.3246565f, -0.1604492f, +0.6736380f, +0.6339293f, -0.5725741f, -0.0139280f,
  +0.2181508f, -0.6111923f, +0.1211299f, -0.3684868f, -0.0290501f, +0.4595871f, -0.0679967f, +0.1065355f,
  +0.1447424f, -0.1907586f, +0.0836421f, +0.3560652f, +0.0909830f, -0.0382848f, -0.0217061f, -0.4161201f,
  +0.4482263f, -0.0411163f, +0.3376840f, +0.1240721f, -0.2999880f, -0.0418204f, -0.0683629f, -0.1963836f,
  +0.2891353f, -0.6486794f, +0.1027120f, -0.0530789f, +0.0347315f, -0.1009237f, +0.2734037f, +0.1516321f,
  -0.1345993f, +0.2214085f, -0.0736189f, +0.5137249f, -0.0055484f, -0.5666387f, +0.2490552f, +0.0876692f,
  +0.1990826f, -0.2280700f, +0.1164448f, +0.1439277f, +0.4110877f, -0.4951836f, +0.3292007f, +0.1061932f,
  +0.2801252f, +0.0961834f, +0.3230577f, +0.3974052f, -0.0987687f, -0.1858074f, +0.0321778f, +0.4307162f,
  +0.1574575f, -0.1449733f, -0.1183542f, -0.1326207f, +0.1892289f, -0.0890654f, +0.1399098f, +0.0797696f,
  +0.2449020f, +0.1884559f, +0.0217801f, +0.0589641f, +0.1972346f, -0.3654473f, -0.6515636f, +0.0458439f,
  +0.1326704f, -0.3268537f, +0.5065055f, -0.1059295f, -0.0717322f, +0.1561248f, +0.3768913f, -0.1177149f,
  +0.0482702f, -0.1336820f, -0.0463281f, +0.1140622f, +0.2099376f, -0.0133009f, -0.6336947f, +0.0169037f,
  -0.1098479f, -0.1566628f, +0.5162740f, -0.3397700f, +0.0781930f, +0.1292291f, -0.5158740f, +0.0055268f,
  +0.0090707f, +0.0814220f, +0.1428306f, -0.0043736f, -0.0673641f, +0.0348371f, -0.0463673f, -0.2378572f
);

const float biases[4] = float[4](
  -0.0739649f, -0.0471544f, -0.0374564f, +0.0394585f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer37 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2148775f, +0.0547955f, -0.6287976f, -0.0980330f, +0.2529617f, +0.3573222f, +0.2011468f, -0.5756807f,
  -0.1978036f, +0.2434315f, -0.5655889f, -0.4263660f, +0.3544569f, +0.1631306f, -0.2170877f, +0.0353104f,
  -0.2657074f, +0.0477749f, -0.1758988f, -0.0730176f, +0.1073073f, -0.0045251f, -0.0727318f, +0.0197820f,
  +0.1007019f, -0.2515798f, +0.0841536f, +0.3137036f, +0.2844225f, +0.2876530f, +0.1098430f, -0.1541398f,
  +0.1919530f, +0.0944344f, -0.1623544f, -0.3159534f, +0.1950306f, +0.2800749f, -0.3210508f, -0.4620105f,
  +0.0371357f, +0.4008470f, +0.1276448f, -0.0084051f, -0.0330220f, +0.0768550f, -0.0998574f, +0.0628105f,
  -0.0128985f, -0.0714241f, -0.1644232f, +0.0423144f, -0.1135459f, -0.0126789f, +0.2336750f, +0.1530801f,
  +0.0118593f, +0.0336835f, +0.1239296f, -0.0988536f, +0.0961307f, +0.0627445f, +0.1197602f, +0.1095181f,
  +0.0457630f, +0.0915107f, +0.1614610f, -0.0847559f, +0.1387168f, +0.1509229f, +0.0042993f, +0.0375611f,
  +0.1665768f, +0.2254385f, +0.0625339f, -0.1214798f, -0.0889246f, -0.1840810f, -0.1044667f, -0.0027853f,
  +0.1803621f, +0.4495775f, +0.3184133f, -0.0201168f, +0.1908176f, -0.0224233f, +0.1463932f, -0.2527077f,
  -0.2032054f, +0.6140856f, +0.4498156f, -0.1473220f, -0.1122578f, -0.1393610f, +0.0903776f, -0.0849781f,
  -0.1155129f, -0.1281316f, +0.1617638f, -0.0350111f, +0.0754068f, -0.1040064f, +0.1085678f, +0.0145329f,
  +0.1707511f, +0.0281044f, -0.1273002f, -0.0454828f, +0.0836378f, +0.0642877f, +0.0183254f, +0.0886229f,
  -0.5728616f, +0.4017433f, -0.0803037f, -0.1897161f, +0.1895287f, -0.1119263f, -0.1658310f, +0.0411594f,
  +0.0430898f, -0.0586371f, +0.0718991f, +0.0231576f, +0.0979828f, -0.0530504f, -0.0276435f, +0.1756296f,
  -0.1600461f, +0.1588784f, +0.1351905f, -0.0538529f, +0.0460423f, +0.0988572f, -0.3053960f, +0.0520673f,
  -0.3153201f, -0.0417509f, +0.0093999f, +0.0775569f, -0.1558854f, -0.2063586f, -0.4327502f, -0.2265743f,
  -0.0554550f, -0.0762755f, +0.2184429f, -0.0208730f, -0.0265301f, +0.1056744f, +0.1050734f, +0.0813670f,
  -0.2734730f, -0.3055604f, +0.0659905f, +0.3015501f, -0.2029415f, +0.0310136f, +0.2782100f, -0.1225385f,
  +0.1218343f, -0.1183224f, +0.1835621f, +0.0503898f, -0.1315387f, -0.1069088f, +0.2623179f, +0.1895836f,
  -0.4504883f, +0.2958457f, -0.1151459f, +0.0836418f, +0.1134735f, +0.3037947f, +0.1718156f, -0.2445617f,
  -0.0814756f, +0.8073903f, -0.5085989f, -0.4887050f, +0.2873889f, +0.4102747f, -0.1983389f, -0.0786624f,
  +0.0287083f, +0.2790907f, +0.0439489f, +0.1300812f, +0.0379208f, +0.0283715f, -0.0521204f, +0.2436762f,
  +0.3005831f, -0.0822653f, +0.3931354f, -0.0550905f, +0.0034711f, -0.2162552f, +0.0280482f, +0.0700121f,
  +0.0935893f, -0.3211022f, +0.2042800f, +0.2296146f, +0.5725329f, +0.0773357f, +0.2268769f, -0.4333898f,
  +0.0181849f, -0.0954015f, -0.1365707f, -0.1569114f, +0.0592605f, +0.3502696f, -0.2531320f, -0.3736032f,
  +0.6427732f, +0.0009786f, +0.1783605f, -0.3306330f, +0.2203675f, +0.0904627f, -0.2743350f, +0.3447783f,
  -0.1059095f, +0.2394246f, -0.1156145f, -0.5098377f, +0.5217540f, +0.1882190f, -0.1439222f, -0.0172550f,
  +0.2539638f, -0.0531525f, -0.0406413f, +0.0726829f, +0.0858166f, +0.1785750f, -0.0806128f, +0.0106116f,
  +0.0543015f, +0.2039232f, -0.0547849f, -0.0091676f, +0.0569831f, +0.2544273f, -0.0710114f, +0.1167642f,
  -0.0360405f, -0.3792680f, -0.1652368f, +0.5163686f, +0.2424105f, -0.2273010f, -0.1081955f, +0.3910717f,
  -0.1563517f, +0.2156106f, +0.2289989f, +0.1577458f, +0.4990726f, -0.1680791f, +0.0669404f, +0.0216934f,
  -0.0011253f, +0.0686582f, -0.1777867f, +0.0451633f, -0.0163382f, +0.0037295f, +0.1884915f, +0.0377233f,
  -0.0614635f, +0.1446144f, -0.0526494f, -0.1198594f, -0.0231471f, -0.1019215f, -0.0152080f, -0.0873195f,
  -0.0018748f, +0.0348184f, -0.1090651f, +0.0462668f, -0.3507232f, +0.0048715f, -0.1277472f, +0.0283591f
);

const float biases[4] = float[4](
  +0.0436000f, +0.1124497f, +0.0002150f, -0.0051252f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer37 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1686782f, +0.2591829f, -0.0287278f, -0.0373600f, +0.0207433f, +0.1729386f, +0.1571967f, +0.0386876f,
  -0.0480074f, +0.0257739f, -0.4629554f, +0.1227014f, -0.1032732f, +0.0879753f, -0.3078358f, -0.2904150f,
  +0.0558982f, -0.5117423f, -0.5360286f, +0.2012731f, -0.1397699f, +0.2304625f, +0.2634722f, -0.7388093f,
  -0.6322017f, +0.1047188f, +0.1549856f, +0.0092527f, -0.0483276f, +0.0024263f, -0.2444357f, +0.2062685f,
  -0.2773185f, +0.1686962f, -0.7576876f, -0.0308699f, -0.3626171f, -0.3153360f, -0.4741822f, +0.1053540f,
  +0.1807193f, -0.0798492f, -0.1444665f, -0.0217927f, +0.5015470f, +0.0308604f, -0.0548239f, -0.7286180f,
  -0.0247303f, -0.1256811f, +0.4013068f, -0.2516231f, +0.3419960f, +0.0165070f, +0.2329815f, -0.0547338f,
  -0.2580571f, +0.0851543f, -0.3247229f, +0.1454344f, -0.2673808f, +0.0178893f, -0.1474349f, +0.4499483f,
  +0.1471146f, -0.2673946f, -0.1669792f, -0.2459282f, -0.5753670f, +0.4758886f, -0.1426392f, -0.6938968f,
  +0.1910287f, -0.1605999f, +0.0504309f, +0.0687561f, -0.0749911f, -0.0439497f, +0.0755378f, +0.2339627f,
  -0.0794439f, -0.0385914f, +0.1285278f, +0.2007958f, -0.1809093f, +0.0187019f, +0.2276534f, -0.1777332f,
  +0.0291537f, +0.1179563f, +0.2479002f, +0.1303174f, -0.2636257f, -0.0955175f, +0.0654382f, +0.0730405f,
  -0.1371110f, -0.7270037f, -0.5603237f, +0.2334566f, -0.1367494f, +0.1502939f, +0.4334184f, -0.0116763f,
  -0.2961274f, -0.0727102f, -0.0073542f, -0.3906720f, +0.4681352f, +0.1316512f, +0.4548086f, -0.1784985f,
  +0.0590589f, +0.3371665f, +0.0259546f, -0.0558256f, +0.1016734f, +0.0631620f, -0.0884696f, +0.4444681f,
  +0.0278938f, +0.1432647f, -0.0013068f, -0.0979209f, -0.1107061f, -0.0012493f, -0.0679825f, -0.0264240f,
  -0.0770626f, +0.1551626f, +0.3787936f, +0.1544267f, +0.7349243f, -0.2089368f, +0.1362124f, +0.0937290f,
  +0.0769636f, +0.0826178f, +0.1525271f, +0.1823217f, +0.1802243f, +0.0119902f, +0.0301619f, +0.0222597f,
  -0.3816783f, +0.2575194f, -0.0726087f, +0.0472316f, -0.0695582f, +0.2319980f, -0.2790294f, -0.0987489f,
  -0.2792502f, +0.3351886f, -0.1652360f, -0.1097798f, +0.1420924f, +0.2971293f, -0.4246037f, +0.1137613f,
  +0.0231648f, -0.0964416f, +0.2712119f, +0.2215397f, -0.2465225f, -0.0931176f, +0.1079417f, -0.1367091f,
  -0.0471778f, -0.5231926f, +0.2624628f, +0.0694975f, -0.0089842f, -0.0321185f, +0.4426830f, +0.1511046f,
  -0.0011925f, +0.3917553f, -0.6727908f, +0.1214295f, +0.1740189f, +0.3574722f, +0.4855857f, -0.8220609f,
  -0.0876860f, +0.3781627f, +0.0059766f, -0.0413808f, -0.1621817f, +0.0007857f, +0.0145063f, +0.2573615f,
  +0.3466018f, +0.2786062f, +0.2227674f, -0.1613069f, +0.0602379f, +0.1511034f, +0.0220901f, -0.1735242f,
  +0.3363972f, -0.3140479f, +0.3226564f, +0.0251056f, +0.5752123f, +0.0735469f, +0.2632390f, -0.0041814f,
  +0.0301049f, -0.1533904f, -0.0143490f, -0.1157561f, +0.1286624f, +0.1106196f, -0.0276629f, -0.2432586f,
  +0.1425366f, +0.4372816f, -0.0297936f, -0.1675371f, -0.0105886f, -0.1993009f, -0.4329873f, -0.1123116f,
  +0.2250114f, +0.0758330f, -0.3203343f, -0.0194456f, +0.0427611f, -0.1067017f, -0.1528156f, +0.1505429f,
  +0.1658210f, +0.1679885f, +0.1861095f, +0.1313642f, -0.1222562f, -0.0221858f, +0.0672594f, -0.0248994f,
  +0.3691534f, -0.2948681f, +0.1396092f, -0.0815803f, -0.0036671f, -0.2276609f, +0.1768505f, +0.4909274f,
  +0.1702606f, -0.2913542f, +0.5501519f, -0.2422203f, +0.0123148f, +0.0659398f, +0.3940399f, -0.4117758f,
  +0.2073030f, -0.2237681f, +0.0355583f, -0.1052664f, -0.1686565f, +0.1672389f, +0.2877159f, +0.2505179f,
  -0.1684480f, -0.0129150f, -0.0454110f, -0.0417190f, +0.0177374f, +0.0455850f, -0.1242150f, +0.2136323f,
  -0.1987784f, -0.2065260f, -0.1229042f, +0.1337103f, +0.0368466f, -0.2298652f, -0.1942870f, -0.0520149f,
  +0.2288438f, -0.1214857f, -0.0198427f, +0.1700214f, +0.0151203f, +0.0526500f, +0.1988940f, +0.0062097f
);

const float biases[4] = float[4](
  -0.0308474f, +0.0208885f, +0.0376629f, +0.1039778f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer38 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0817197f, +0.3931390f, +0.1130575f, -0.1316835f, +0.1736416f, -0.1478719f, -0.0800512f, -0.1875124f,
  -0.0372773f, +0.3140611f, -0.3730605f, -0.0049924f, +0.3971397f, -0.0165083f, -0.1238942f, +0.2588628f,
  -0.0759146f, +0.0974056f, +0.1749036f, -0.0000053f, +0.1271991f, +0.0475504f, -0.0673918f, +0.3551078f,
  -0.0094746f, +0.2997368f, +0.0932200f, +0.2277578f, -0.0431596f, -0.2877807f, -0.0399797f, -0.2853489f,
  +0.0580231f, -0.0714775f, +0.5200048f, -0.0202671f, +0.7009369f, -0.1262446f, +0.2605226f, -0.2015171f,
  +0.0541557f, -0.1009665f, -0.0870447f, -0.0950624f, +0.2411956f, +0.3854815f, +0.1736663f, -0.3088226f,
  -0.1289606f, +0.3603854f, -0.0863374f, -0.1624660f, -0.3118369f, -0.0397434f, +0.3099811f, +0.0293685f,
  +0.0416472f, -0.3160587f, -0.0541255f, +0.4892828f, +0.1873137f, +0.0563145f, -0.1105209f, -0.1148604f,
  -0.1417495f, -0.0810191f, +0.0482184f, -0.4529515f, -0.0084642f, +0.0127462f, +0.1476160f, -0.2538115f,
  -0.0351227f, +0.1213947f, -0.1366574f, -0.0232560f, +0.0289411f, -0.1162038f, +0.0353722f, +0.0514697f,
  +0.1105295f, -0.1299919f, +0.2434441f, +0.0751512f, +0.0476930f, -0.1050776f, +0.2194167f, -0.0857091f,
  +0.0174847f, -0.0848116f, -0.0254709f, +0.0201706f, -0.0567908f, +0.0957216f, +0.1015044f, -0.2228891f,
  -0.0062409f, -0.2862324f, -0.2667800f, -0.1640607f, -0.1295053f, -0.1623012f, -0.0378540f, +0.1079565f,
  -0.0074913f, -0.0931019f, +0.1154798f, +0.1243173f, +0.2199615f, +0.0790974f, -0.2881854f, +0.0833008f,
  -0.3195127f, +0.1138902f, -0.0189724f, -0.0648231f, -0.0232127f, -0.0089318f, -0.0382741f, +0.1083803f,
  +0.1253680f, +0.0402491f, -0.1273256f, -0.1141436f, -0.0899998f, -0.1833165f, +0.0819070f, -0.1039281f,
  -0.0203750f, +0.1271748f, +0.1853071f, -0.1570669f, +0.1267719f, +0.0373745f, -0.1689056f, +0.2253562f,
  -0.1996440f, +0.0286080f, -0.0623982f, +0.2191931f, -0.0055696f, -0.0379535f, +0.0835988f, -0.0585810f,
  +0.0098320f, +0.0599097f, +0.0964301f, +0.0143539f, +0.4774414f, -0.0916590f, -0.1130467f, -0.1457715f,
  -0.0456122f, -0.0642333f, +0.1706749f, +0.0429172f, -0.3367539f, -0.4546009f, -0.3050041f, +0.0361270f,
  +0.0610972f, +0.0535368f, +0.0777957f, +0.0397130f, +0.1132351f, +0.0816952f, -0.3264100f, -0.0550312f,
  +0.0484748f, +0.1349847f, -0.1359205f, +0.0564566f, +0.8301554f, +0.2259410f, +0.1804185f, -0.1505645f,
  +0.3963298f, +0.1908168f, -0.3084198f, +0.0170283f, -0.4662486f, -0.0949091f, +0.5409090f, -0.1752118f,
  +0.5956616f, -0.1258334f, +0.0956644f, -0.1922097f, +0.0668035f, +0.4709615f, -0.2153161f, +0.0709075f,
  +0.1129570f, -0.0975273f, -0.0243860f, -0.0413954f, +0.2163899f, -0.0423024f, -0.1556724f, +0.0172782f,
  +0.0755370f, -0.0314986f, -0.0568616f, +0.1485750f, -0.1023143f, +0.0141497f, -0.0247259f, +0.1916418f,
  +0.5881674f, +0.2014633f, -0.1739497f, -0.2830485f, +0.1396047f, -0.0903854f, -0.2133049f, +0.0686719f,
  -0.0391807f, +0.4000275f, -0.1670538f, -0.1156787f, +0.1638451f, -0.3349939f, -0.0537506f, -0.4100872f,
  +0.0216389f, +0.2227419f, +0.5498272f, +0.0627988f, -0.0681295f, -0.5108002f, +0.0485471f, +0.0283040f,
  -0.0884147f, +0.0518337f, -0.2982903f, +0.0442841f, +0.1024483f, +0.0474305f, -0.0497000f, -0.0374569f,
  -0.1120102f, +0.0525607f, +0.1558254f, -0.1041596f, +0.5315046f, +0.2654680f, -0.0117859f, -0.1716469f,
  +0.0471835f, +0.1041926f, -0.3655679f, -0.2269536f, -0.1422454f, +0.1662520f, -0.4527740f, +0.0523188f,
  +0.3849794f, -0.0131185f, +0.0356688f, +0.1977102f, -0.1494876f, -0.1250170f, -0.0731469f, +0.1155089f,
  -0.0186960f, +0.1618640f, -0.1738513f, -0.1431666f, -0.5635822f, -0.1082863f, +0.1817479f, -0.1618604f,
  -0.2841008f, +0.1445502f, -0.1632345f, +0.1026829f, -0.1200641f, -0.0548726f, +0.3958870f, -0.0506438f,
  +0.0092993f, +0.0148851f, +0.1542441f, +0.0625517f, +0.0024285f, -0.2338072f, +0.0406094f, +0.0944040f
);

const float biases[4] = float[4](
  +0.1275329f, -0.0466582f, -0.2078481f, +0.0160222f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer38 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0158940f, +0.4256187f, -0.1478341f, +0.0646290f, -0.3987646f, -0.1291541f, -0.0216768f, -0.0692139f,
  +0.1216456f, +0.1719382f, -0.4198942f, -0.2628198f, +0.0132495f, -0.4742691f, +0.4161763f, -0.6001527f,
  -0.0976706f, +0.1162296f, +0.2102775f, +0.0668791f, -0.0387553f, -0.1262797f, -0.1632640f, +0.2661711f,
  -0.0065862f, +0.2021583f, +0.3581324f, -0.3839802f, -0.3671017f, +0.1090828f, -0.0414979f, +0.2302834f,
  -0.2410122f, +0.1482776f, +0.5914503f, +0.1904622f, -0.0045233f, +0.0407445f, -1.0158430f, +0.1719315f,
  +0.1630472f, +0.1079824f, -0.1848011f, +0.0376023f, -0.1884968f, +0.2467714f, -0.0075598f, -0.1260641f,
  -0.0244469f, -0.2366635f, +0.0951449f, +0.1021273f, +0.4789586f, +0.3043233f, +0.0187884f, +0.1588514f,
  -0.2417136f, -0.3085431f, -0.0509646f, -0.0425388f, +0.0141773f, +0.1016112f, -0.0846361f, -0.0800133f,
  -0.2683252f, +0.0044409f, -0.0097398f, -0.2095159f, -0.1691952f, +0.0707131f, +0.0171220f, +0.0005268f,
  +0.0098056f, +0.0678258f, +0.1295913f, -0.1456588f, +0.0110219f, -0.1256386f, -0.1441390f, -0.2009775f,
  -0.1296354f, -0.1405996f, -0.2873778f, +0.1454915f, -0.0216068f, +0.0996848f, +0.0461124f, +0.0729334f,
  +0.0335672f, -0.0120445f, +0.1014225f, +0.0230885f, -0.0680598f, -0.0615949f, +0.1979959f, +0.2005451f,
  +0.0461804f, +0.2477431f, +0.0563760f, +0.1709179f, -0.5417547f, -0.1519570f, +0.1361427f, -0.0319384f,
  -0.1997233f, +0.0501533f, -0.1282140f, +0.0307229f, -0.3965946f, +0.2361331f, -0.3126477f, +0.2705691f,
  +0.0274458f, +0.0256368f, +0.0443327f, -0.1466946f, +0.1181230f, +0.1364666f, +0.1516620f, -0.1700853f,
  -0.1488919f, +0.1459887f, -0.0193495f, -0.0982698f, -0.0440858f, -0.0099429f, +0.2088723f, +0.1538653f,
  -0.1502568f, -0.1135468f, +0.0900639f, +0.0148836f, -0.0451448f, -0.3064528f, -0.0051708f, +0.0026622f,
  -0.2309977f, +0.0700842f, +0.2403289f, +0.0547675f, +0.1605441f, +0.1616668f, -0.0389045f, +0.2662621f,
  -0.0054248f, +0.0360240f, +0.0077056f, +0.0979116f, +0.1838129f, -0.1014846f, +0.1734708f, -0.0368050f,
  +0.1219276f, +0.3025942f, -0.3670556f, +0.2908017f, +0.0987488f, +0.2915644f, -0.0285877f, -0.1233574f,
  -0.1378475f, +0.0504350f, -0.8500559f, -0.1149298f, -0.0295178f, +0.2686897f, +0.3098721f, -0.4153903f,
  -0.0408210f, -0.1199145f, -0.3840131f, -0.1512952f, -0.2587606f, -0.1790790f, -0.0034576f, -0.1970098f,
  +0.1789627f, -0.2015619f, -0.0668619f, +0.8047062f, +0.5005045f, -0.3200606f, +0.1885620f, -0.3012440f,
  -0.9234938f, +0.2445040f, +0.1841874f, +0.2853347f, -0.2222957f, -0.4661655f, -0.0143995f, +0.4297712f,
  +0.1999076f, -0.2915443f, +0.0840188f, +0.0060624f, -0.1804281f, -0.2447256f, -0.2613405f, -0.1789725f,
  +0.1676481f, -0.0083982f, +0.1202842f, +0.1779169f, +0.0037127f, -0.2584161f, +0.1871046f, +0.0628822f,
  +0.0146550f, +0.0380620f, +0.0934997f, +0.4325808f, -0.0036875f, -0.0854929f, +0.0568928f, +0.5283819f,
  -0.1548804f, -0.0997408f, -0.2997887f, +0.1566799f, +0.5015621f, -0.0533039f, +0.0795245f, +0.1552393f,
  -0.0159863f, -0.4296468f, +0.2287437f, +0.1803540f, -0.1040009f, -0.5274307f, +0.0519619f, -0.1452759f,
  +0.0223813f, -0.2753519f, +0.0633756f, +0.2740183f, +0.0318307f, -0.0414870f, +0.0743066f, -0.3811236f,
  +0.0164586f, -0.3823836f, -0.4959954f, -0.0675122f, +0.5073872f, -0.5012593f, +0.3904600f, -0.2934078f,
  +0.3411179f, -0.0851409f, +0.3253642f, -0.5889999f, +0.0920874f, +0.0863920f, -0.3069143f, +0.2173570f,
  +0.1532848f, -0.0860584f, -0.1051795f, -0.1647254f, -0.3128832f, -0.0762261f, +0.3251908f, -0.4711093f,
  +0.2213651f, -0.2117887f, +0.0202226f, +0.0383604f, +0.4319327f, -0.0221123f, -0.1931260f, -0.1053722f,
  +0.2222715f, +0.1999647f, -0.1416169f, +0.1207799f, -0.1985152f, +0.1640046f, -0.0041484f, -0.0522521f,
  +0.1084058f, +0.0357415f, -0.0035530f, -0.0186459f, -0.0425897f, -0.0603082f, -0.3078661f, +0.0433792f
);

const float biases[4] = float[4](
  -0.0731401f, -0.0422359f, +0.1076586f, +0.3337443f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer39 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3355700f, -0.0913793f, -0.3591172f, -0.0762704f, +0.0138966f, +0.0396071f, -0.0071254f, -0.0324353f,
  +0.4726613f, +0.1324306f, +0.3385050f, -0.0804232f, +0.1703429f, +0.0251395f, +0.3018600f, +0.1585624f,
  +0.1295323f, -0.0327784f, +0.0580604f, -0.0166772f, -0.3123265f, -0.1037132f, +0.1486918f, +0.2233621f,
  +0.1578401f, +0.0373087f, +0.0776486f, -0.1553037f, +0.0323660f, -0.0230107f, +0.0929228f, +0.0460841f,
  -0.4240088f, +0.2817101f, -0.4811642f, +0.0504071f, +0.1485441f, +0.2236372f, +0.0272924f, -0.0806746f,
  -0.0084510f, +0.0494547f, -0.0714437f, +0.0377625f, +0.0804998f, -0.1010426f, +0.2183138f, +0.0305591f,
  -0.0211649f, +0.1338299f, -0.2000197f, +0.0613220f, -0.1094588f, +0.0279710f, -0.0297295f, -0.0687255f,
  -0.2406172f, +0.1881581f, -0.0073818f, -0.1775029f, -0.1974312f, -0.0601211f, -0.0030463f, -0.0719763f,
  -0.0152864f, +0.0140467f, -0.0431349f, -0.0596352f, +0.0701661f, -0.0912580f, -0.0001205f, -0.0806409f,
  -0.1160899f, -0.1931956f, +0.1270089f, +0.0363947f, -0.0073567f, -0.0993166f, +0.3826837f, -0.0162165f,
  -0.2446779f, +0.0409163f, +0.3006082f, -0.0329648f, -0.2166687f, -0.1468484f, +0.1296187f, -0.0099010f,
  -0.0041662f, -0.0510893f, +0.0818284f, -0.0472000f, -0.0924898f, -0.0328512f, -0.0058592f, +0.0293791f,
  -0.2388970f, +0.2148530f, +0.3862170f, -0.1074568f, +0.0444120f, -0.1519810f, -0.1207461f, +0.0286558f,
  -0.0518279f, -0.5426115f, -0.2003464f, +0.1867211f, +0.4014310f, -0.3614902f, +0.2912389f, +0.1078285f,
  -0.1719789f, +0.1088597f, -0.1078319f, -0.1358195f, +0.0581067f, -0.1699413f, +0.0888056f, +0.1679679f,
  -0.0873618f, +0.1107034f, +0.0806649f, +0.1368797f, +0.1414147f, -0.0947375f, +0.0105313f, +0.2735344f,
  +0.0121757f, -0.1939491f, +0.1140313f, -0.0369661f, +0.2689790f, -0.3197673f, +0.0491529f, -0.1456330f,
  +0.1058245f, -0.0171673f, +0.0360485f, -0.0602888f, -0.2373255f, -0.0727282f, -0.0123672f, +0.0269047f,
  -0.0115253f, +0.1627305f, +0.0998325f, -0.0863370f, -0.2209835f, +0.1217278f, +0.0721932f, -0.4652911f,
  +0.4748723f, -0.1788538f, -0.3974368f, +0.0186314f, -0.3672505f, -0.0474268f, -0.1845185f, -0.3676106f,
  +0.0805328f, +0.0779940f, +0.0396729f, -0.2004654f, +0.2154124f, -0.0225328f, +0.0981893f, -0.6315852f,
  +0.2581636f, -0.1212432f, +0.3296277f, -0.0675338f, +0.0332281f, -0.3474506f, -0.0817012f, -0.2106740f,
  +0.4136412f, +0.1388444f, -0.3911140f, +0.1131918f, -0.2635188f, -0.3549690f, -0.2706529f, +0.7322289f,
  +0.7831774f, +0.0298481f, +0.1419706f, +0.1557448f, -0.0142373f, +0.1777363f, +0.2446485f, -0.2429313f,
  -0.2002668f, -0.0388275f, -0.1564467f, +0.0343157f, -0.0709016f, +0.1268970f, -0.3018928f, -0.2316316f,
  +0.1759755f, -0.1452948f, -0.2564440f, +0.0058088f, -0.5439929f, +0.1565739f, -0.3302583f, +0.4318566f,
  -0.5801719f, -0.0999156f, -0.1090687f, -0.0868212f, +0.0342356f, +0.0705670f, -0.1429167f, -0.4429053f,
  +0.3206942f, +0.1609517f, +0.0389515f, -0.2663815f, -0.0192419f, -0.3207665f, -0.1265952f, -0.5430075f,
  -0.0400121f, -0.3100713f, -0.4267583f, -0.1581631f, +0.2970833f, +0.0989345f, -0.2122875f, -0.4422516f,
  -0.3274173f, -0.6029583f, -0.0755024f, -0.3854335f, +0.2702454f, -0.2375432f, -0.3470721f, -0.3729782f,
  -0.2744645f, -0.0062388f, -0.1760797f, +0.0237463f, -0.0822044f, -0.3237891f, -0.3053336f, +0.0134452f,
  -0.2257338f, +0.1095557f, -0.4922596f, +0.0817696f, -0.5591642f, +0.2923828f, -0.0565568f, +0.1603829f,
  -0.2249163f, +0.1118866f, -0.2809984f, +0.1800369f, -0.1938311f, +0.2562506f, -0.7132334f, +0.1237246f,
  -0.1201580f, -0.0066652f, +0.1909989f, -0.0135927f, +0.0617054f, -0.1864795f, -0.1632177f, -0.0238192f,
  +0.1711383f, -0.0727853f, -0.1811618f, -0.0005230f, -0.1621648f, +0.1973841f, +0.2897644f, +0.2441166f,
  +0.1351150f, +0.2853587f, +0.1912100f, -0.2447649f, +0.0381623f, +0.1483170f, -0.0020824f, -0.1907223f
);

const float biases[4] = float[4](
  +0.0185650f, +0.0349391f, -0.0020342f, -0.0413112f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer39 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0608942f, -0.2848712f, -0.1116759f, +0.0151939f, -0.0382592f, -0.0795401f, +0.0664578f, -0.0375224f,
  +0.1174475f, -0.0604122f, +0.2662022f, -0.0504333f, +0.0796607f, +0.1020003f, +0.2008805f, -0.0999962f,
  -0.1951776f, -0.0344728f, +0.2058358f, -0.2677361f, -0.1798074f, -0.2412869f, +0.0232368f, +0.2211457f,
  +0.1544970f, -0.1064252f, -0.1590220f, -0.0688966f, -0.1886596f, +0.0034912f, -0.1504531f, +0.1196513f,
  +0.4835928f, -0.0637827f, +0.4084906f, -0.4050449f, +0.1909910f, -0.1003098f, +0.3300550f, +0.3843448f,
  +0.3485584f, +0.3712412f, +0.3646276f, -0.2116136f, +0.0973348f, -0.0526161f, -0.0032376f, +0.2461524f,
  +0.0993302f, +0.0262962f, +0.1407441f, +0.0001062f, +0.2854746f, -0.2127797f, +0.0259772f, +0.3119032f,
  +0.4202434f, +0.1109454f, +0.2231689f, -0.1623736f, +0.0137035f, -0.0404076f, +0.2783743f, +0.2371971f,
  -0.0334677f, +0.2436436f, +0.0815269f, -0.2062482f, -0.2174462f, -0.0288865f, +0.1380862f, +0.2760291f,
  +0.1632456f, +0.1714386f, +0.0275047f, -0.0084310f, -0.0702637f, -0.1468128f, -0.1359930f, -0.0405997f,
  +0.1738916f, -0.0118625f, -0.0766735f, +0.0226386f, +0.1241091f, -0.0912884f, -0.0371428f, +0.2095584f,
  -0.1185290f, +0.0937715f, +0.0158313f, -0.1526950f, +0.2080416f, -0.0879849f, -0.0847454f, +0.0384258f,
  +0.2599338f, -0.3184870f, -0.1653095f, +0.0300490f, -0.0501221f, -0.0858857f, +0.2085434f, -0.0003923f,
  +0.1606739f, -0.5368046f, -0.1349778f, +0.0900292f, -0.0481026f, +0.1237115f, +0.0369631f, -0.2980351f,
  +0.6325485f, +0.0212677f, +0.4738015f, -0.1126849f, +0.0895144f, -0.1048380f, -0.3692901f, +0.4775334f,
  -0.0357089f, +0.0529913f, +0.0815026f, -0.0512409f, +0.0152731f, +0.0657861f, -0.0280564f, +0.2901390f,
  -0.0558541f, +0.1729107f, -0.3467450f, -0.1981225f, -0.0547624f, +0.0853420f, +0.1604735f, +0.1314345f,
  -0.2266656f, +0.3750885f, +0.3010441f, -0.3305323f, -0.1875843f, -0.0148808f, +0.2725718f, +0.5848814f,
  +0.1513260f, -0.6230876f, +0.1313289f, -0.0078811f, -0.0001218f, +0.0803667f, +0.2862424f, -0.2823913f,
  -0.1815916f, +0.1160403f, +0.1859701f, -0.3471814f, +0.1573287f, -0.0493786f, +0.1009664f, -0.3088928f,
  +0.1485543f, +0.1699611f, -0.0845495f, +0.2127903f, -0.0170775f, -0.1221045f, +0.1429280f, +0.2269289f,
  -0.2549761f, -0.2017153f, -0.0109459f, +0.1277777f, -0.1364670f, +0.2960162f, -0.0031715f, +0.1260836f,
  -0.2020570f, -0.0987324f, -0.0136666f, +0.0977356f, -1.0174409f, +0.5284591f, -0.3896700f, +0.2112583f,
  +0.1605711f, -0.6069325f, +0.1796777f, +0.0664730f, -0.3436235f, +0.0918498f, +0.2804180f, -0.0997430f,
  -0.1180459f, -0.3496413f, +0.2949586f, -0.0856847f, +0.2509639f, +0.3716912f, +0.1435540f, -0.0530396f,
  -0.1571897f, -0.4354848f, -0.0684722f, +0.1141092f, -0.3648895f, +0.2202292f, -0.2642538f, +0.2779429f,
  +0.1062132f, -0.2781377f, -0.0793878f, +0.2256916f, +0.1727993f, +0.0490066f, -0.0409241f, +0.1826457f,
  -0.4421712f, -0.1828274f, +0.5015271f, +0.1963903f, -0.1226472f, +0.1779569f, +0.0808815f, +0.2226594f,
  -0.0889154f, -0.1015549f, +0.2718281f, +0.2624305f, -0.4197743f, +0.4202346f, -0.0823926f, -0.3243562f,
  -0.0351965f, -0.3671111f, +0.1654998f, -0.0423939f, -0.4863252f, +0.0080846f, -0.0927233f, -0.0896900f,
  -0.9283190f, +0.0050034f, +0.2994868f, +0.1371763f, -0.2755778f, -0.0051500f, -0.0365771f, +0.5348585f,
  -0.1633702f, +0.1177324f, -0.0417057f, +0.1805454f, -0.7229802f, -0.0554269f, -0.4414843f, -0.7498546f,
  -0.0748132f, -0.1877969f, +0.0906588f, +0.1483489f, +0.2729968f, -0.0220399f, +0.2094952f, -0.3387713f,
  -0.5062171f, -0.2938158f, +0.0007147f, +0.0056231f, +0.1925211f, +0.0860358f, -0.1993858f, +0.1931729f,
  -0.1917476f, -0.1770720f, -0.1092049f, +0.5536581f, -0.4993056f, +0.3764147f, -0.0672778f, +0.0478741f,
  -0.5384609f, +0.0213735f, -0.2433121f, +0.2268636f, -0.0526454f, -0.0969805f, +0.0591946f, -0.0111707f
);

const float biases[4] = float[4](
  +0.0516333f, -0.0143233f, -0.1300495f, -0.1481169f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer40 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1143474f, -0.1591828f, -0.1934538f, +0.0782930f, +0.1229244f, -0.1107648f, -0.2404864f, +0.0360794f,
  +0.1273249f, +0.1538307f, +0.1578289f, -0.0344073f, -0.4237698f, +0.1192023f, +0.0228189f, +0.2347459f,
  +0.1195544f, +0.0697999f, +0.0025779f, -0.0342108f, -0.1291516f, +0.0112985f, +0.1382203f, -0.1279250f,
  -0.0273703f, +0.3310186f, -0.2693292f, -0.1960525f, +0.0201135f, -0.3757457f, -0.2819667f, -0.1115173f,
  -0.1093918f, +0.1295070f, +0.3874234f, -0.1351807f, -0.2051016f, +0.0841976f, -0.1096692f, +0.2588947f,
  -0.2241200f, -0.0481792f, +0.0776536f, -0.1728992f, +0.0596978f, -0.0441831f, -0.0136801f, +0.3913926f,
  -0.0417641f, -0.0672700f, -0.2256247f, -0.5770469f, +0.1950413f, +0.0681334f, +0.2444484f, +0.0273652f,
  -0.5048281f, +0.1707636f, +0.4010273f, -0.2291840f, +0.0647570f, -0.2299725f, +0.0043917f, +0.1850488f,
  -0.2426287f, +0.1017189f, +0.1294046f, -0.1752534f, -0.0596466f, -0.0144934f, -0.0422441f, +0.2985470f,
  +0.0813397f, +0.1121940f, -0.1871422f, -0.2055274f, -0.0893850f, +0.0411688f, -0.0545614f, +0.0430069f,
  -0.1012495f, -0.0018990f, +0.0940008f, +0.2072816f, -0.0607282f, -0.0268551f, +0.1239518f, +0.0171888f,
  -0.1297897f, -0.1449115f, -0.0554183f, +0.0903107f, +0.1165900f, -0.0396810f, +0.3959326f, -0.0966743f,
  +0.0201090f, -0.0051588f, -0.2931224f, -0.0908571f, -0.2653484f, +0.0009753f, +0.2508042f, -0.0155750f,
  +0.0061391f, +0.4415022f, +0.2827234f, +0.1662683f, +0.0891199f, +0.0809629f, +0.0863694f, -0.4058352f,
  +0.1447400f, -0.0622132f, +0.0119501f, +0.1252554f, -0.0756138f, +0.1541458f, +0.1070918f, +0.0483880f,
  +0.0661654f, +0.0646539f, -0.1392489f, -0.0321698f, +0.0223971f, +0.0152260f, +0.0633927f, +0.2610617f,
  -0.0854298f, -0.0643163f, +0.5038661f, -0.0845834f, +0.1596371f, -0.0250875f, -0.0301118f, -0.0155331f,
  +0.0783687f, +0.0665082f, +0.1092519f, +0.0610642f, +0.1245748f, -0.0978278f, +0.2732021f, +0.1168197f,
  -0.0455591f, -0.1635832f, -0.0315089f, -0.1473473f, +0.0286069f, +0.0972574f, +0.1080670f, +0.1085409f,
  +0.0664782f, +0.1457835f, -0.1274671f, -0.5128484f, -0.2403972f, +0.3014064f, -0.1591834f, +0.4212961f,
  -0.0068648f, +0.0407481f, +0.0980902f, -0.1534481f, -0.2001276f, +0.0454830f, -0.3071979f, +0.1722291f,
  +0.0864629f, +0.2552846f, +0.0440811f, +0.1959205f, -0.0719764f, -0.0402732f, -0.1233847f, +0.0755834f,
  +0.4927976f, -0.0918160f, -0.4260431f, -0.0127986f, -0.2227885f, +0.0364071f, +0.0203985f, +0.0761049f,
  -0.1725902f, -0.2654058f, -0.1441562f, -0.4527913f, +0.0287209f, +0.1098590f, +0.1789299f, -0.0658680f,
  +0.1396581f, -0.0431295f, -0.1807210f, +0.0308190f, +0.0816653f, +0.1621438f, -0.2774185f, -0.4823809f,
  -0.1513137f, -0.2827201f, -0.2762695f, +0.0673382f, -0.0013086f, -0.0234388f, -0.3381541f, -0.3981359f,
  +0.1527185f, -0.1093894f, -0.2184410f, +0.1397309f, +0.0194874f, +0.0668852f, -0.2262185f, -0.2007726f,
  +0.1023836f, +0.3494403f, -0.0453321f, -0.2963444f, +0.0583084f, +0.3615071f, -0.5318052f, +0.2295673f,
  +0.1801229f, +0.0567777f, +0.0048464f, -0.0770728f, -0.0346422f, -0.0107348f, -0.0863127f, +0.0798740f,
  +0.0280726f, -0.0302663f, -0.0393195f, +0.1662351f, -0.1323457f, +0.1272698f, -0.1650538f, -0.1158380f,
  -0.0644816f, +0.0364421f, -0.1442981f, -0.4798879f, +0.1841462f, -0.0727278f, -0.1768685f, +0.2483762f,
  -0.1014629f, -0.2074450f, -0.2463951f, -0.6286150f, -0.0978978f, +0.0756356f, +0.0968309f, -0.3024195f,
  +0.1100634f, +0.0047258f, +0.1507837f, -0.2352205f, -0.0515003f, -0.1112572f, -0.0775118f, -0.4610927f,
  -0.0341219f, +0.1452532f, -0.2389259f, -0.1669747f, +0.1794951f, -0.0033597f, -0.0892470f, -0.1290668f,
  -0.1043590f, -0.3709057f, -0.0792966f, +0.0422072f, +0.0496201f, -0.1525073f, +0.0984758f, +0.4932977f,
  +0.0298062f, -0.1065804f, -0.1799169f, +0.1600919f, +0.1562055f, -0.1169286f, +0.0047842f, -0.0300606f
);

const float biases[4] = float[4](
  +0.0761738f, +0.0076989f, -0.0636090f, -0.1720065f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer40 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0115467f, +0.2882234f, +0.1365323f, -0.4114428f, +0.2023464f, +0.0381423f, -0.5046904f, -0.1901693f,
  +0.2502471f, -0.5439256f, +0.2732531f, -0.1158419f, +0.1735408f, +0.0800772f, +0.1713620f, +0.5531324f,
  +0.1645892f, -0.0430865f, -0.0184753f, +0.1207797f, -0.3924120f, +0.0602267f, -0.7254880f, -0.0755366f,
  -0.0916811f, -0.2616353f, +0.2402710f, +0.0327533f, -0.0518057f, +0.0630009f, +0.0906776f, -0.1502924f,
  -0.0350673f, +0.1957770f, +0.0026911f, -0.0150074f, -0.2408518f, +0.3455406f, +0.5883949f, +0.3515008f,
  +0.0858409f, +0.1710868f, +0.2025543f, -0.0181654f, -0.1790671f, +0.0856790f, -0.1181804f, -0.1559241f,
  +0.1063696f, -0.0284108f, +0.3605875f, +0.0717254f, +0.1879237f, -0.1744594f, +0.2023940f, +0.4224954f,
  -0.2976247f, +0.1877933f, -0.0691540f, +0.2318357f, -0.2210601f, -0.1049955f, -0.0286434f, +0.3069530f,
  -0.0582463f, -0.0949612f, -0.0556101f, +0.0150028f, -0.0899848f, +0.0482135f, +0.2022666f, -0.0005995f,
  -0.0985071f, -0.3316872f, -0.1524412f, -0.3415587f, +0.0187150f, -0.0965011f, -0.1635630f, +0.1132878f,
  +0.0861555f, +0.4557541f, +0.0854505f, -0.1097830f, -0.2910013f, +0.0267247f, -0.1783478f, -0.1293030f,
  +0.0837434f, -0.0017321f, +0.0220457f, +0.2840823f, +0.2439808f, +0.0073614f, -0.2878973f, -0.2663066f,
  +0.2267699f, +0.0641223f, -0.4553319f, -0.2496828f, -0.0285922f, -0.0367004f, -0.0607934f, +0.5438129f,
  -0.1404302f, +0.2594755f, -0.2771193f, -0.1205279f, -0.2975974f, -0.3034104f, -0.5360212f, +0.2611818f,
  +0.1732381f, -0.0085840f, +0.0492153f, -0.0589850f, -0.0553979f, +0.0234625f, -0.0664152f, +0.0760834f,
  +0.0251350f, +0.0815451f, -0.1580644f, +0.1097651f, +0.0139768f, +0.1473771f, +0.1597955f, +0.1644507f,
  -0.2563479f, +0.3930695f, -0.3086488f, +0.4038979f, +0.0118523f, +0.1169177f, -0.0025024f, -0.2484137f,
  -0.0125752f, +0.1768514f, -0.1587048f, -0.1225650f, -0.1700984f, +0.2371918f, +0.2651666f, -0.1755855f,
  +0.2262765f, +0.0916150f, -0.0544532f, +0.0353742f, -0.0655177f, -0.3089713f, +0.0852397f, -0.1171216f,
  -0.2006469f, +0.1932962f, +0.0264589f, +0.2674360f, -0.1020352f, -0.6495324f, -0.0401895f, -0.1411123f,
  +0.1439629f, -0.2818946f, -0.0073136f, -0.0274079f, +0.1538933f, +0.0721832f, -0.3493324f, -0.3979917f,
  -0.0051745f, -0.0548512f, -0.2748193f, +0.2774132f, -0.4407827f, +0.2712812f, +0.2331551f, +0.0951239f,
  -0.1420208f, -0.2757692f, +0.2116649f, +0.4320220f, -0.3688610f, +0.0577156f, +0.4844277f, +0.2400998f,
  -0.3774682f, +0.0878069f, +0.0650979f, -0.1070109f, -0.1013154f, -0.2126934f, +0.1863944f, -0.2522055f,
  -0.1715337f, +0.1458385f, -0.1391865f, -0.2804314f, -0.1006070f, +0.1421475f, -0.3418255f, +0.2141695f,
  -0.3316496f, +0.1272575f, +0.4697243f, -0.0380797f, +0.0668580f, +0.0242343f, -0.2171703f, -0.2048689f,
  -0.0296316f, -0.1995812f, +0.0895902f, -0.0807061f, +0.0919344f, -0.1031486f, -0.1920800f, -0.2776195f,
  +0.2143920f, +0.3891442f, -0.2813400f, -0.1271738f, -0.1433463f, -0.1108768f, +0.2754656f, -0.0914433f,
  -0.0364477f, +0.1022293f, -0.1775140f, +0.4170330f, -0.2809680f, +0.3989448f, +0.2497223f, -0.0555437f,
  +0.1419750f, +0.0387440f, +0.0322477f, -0.0022252f, -0.1395323f, -0.1582045f, +0.4120176f, -0.2674587f,
  -0.2413903f, +0.0474901f, -0.6323553f, -0.1950042f, -0.3201975f, -0.2044555f, -0.1324266f, +0.1325625f,
  -0.2177456f, -0.1577549f, -0.5528833f, +0.2377042f, -0.1007382f, +0.0872650f, -0.1122045f, +0.3664766f,
  -0.0066030f, +0.1070287f, +0.2123763f, -0.1684417f, -0.2872191f, -0.0784225f, +0.0051353f, -0.5411258f,
  -0.1841072f, +0.2010293f, -0.2982453f, -0.1725455f, +0.0059620f, -0.0065321f, -0.0397941f, +0.1795511f,
  -0.0473231f, -0.0481323f, -0.4670510f, -0.1310381f, -0.2433269f, -0.0477639f, +0.3288323f, +0.1265899f,
  -0.0699424f, +0.0343943f, +0.0699741f, +0.0955285f, +0.1249353f, -0.0536387f, +0.2753513f, -0.1873730f
);

const float biases[4] = float[4](
  -0.0042986f, -0.0261423f, +0.0261618f, +0.0283880f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer41 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0566088f, +0.2976899f, -0.1157329f, +0.1207728f, -0.0689072f, +0.0558166f, +0.0027893f, -0.0266598f,
  -0.0632456f, +0.2739876f, +0.2071773f, +0.5827549f, -0.5367284f, +0.3600546f, -0.3160147f, +0.4169344f,
  +0.4556730f, -0.3338370f, +0.3561093f, +0.5310814f, -0.1499694f, -0.0992409f, +0.0695172f, -0.1614738f,
  -0.0744960f, +0.0953026f, +0.1998814f, -0.1048524f, +0.0389284f, +0.1933134f, -0.2127263f, +0.2217886f,
  +0.2853883f, +0.4303175f, -0.0801329f, -0.5368715f, -0.4082887f, -0.6344215f, -0.5078039f, +0.2791693f,
  -0.0190797f, +0.1264311f, +0.1259454f, -0.1672028f, -0.2794224f, -0.0257982f, -0.0092710f, +0.3284175f,
  -0.0997833f, +0.0042919f, +0.0471366f, -0.0596579f, -0.0746058f, +0.0356458f, -0.0822723f, -0.0219573f,
  -0.0854267f, +0.0665676f, +0.1106972f, +0.0135129f, -0.1053448f, +0.0472395f, -0.3598761f, +0.0111848f,
  +0.1710054f, -0.0233974f, +0.1000828f, -0.0221506f, +0.0317266f, -0.0409772f, +0.0352657f, +0.0134889f,
  -0.1667712f, +0.1674133f, -0.3645260f, -0.0408440f, +0.1104658f, +0.2767194f, -0.2455769f, -0.3671482f,
  +0.2073616f, -0.5131438f, -0.1689393f, -0.1787337f, +0.5095778f, +0.0359402f, -0.3229332f, +0.0515949f,
  +0.0001189f, -0.2326458f, -0.1903561f, +0.0221639f, -0.0021698f, -0.0321011f, -0.2488195f, -0.0294213f,
  +0.3291599f, +0.3625382f, +0.1272929f, -0.0519040f, -0.3672700f, -0.3952526f, -0.4487555f, +0.0300601f,
  +0.5475801f, +0.0376670f, +0.3886811f, +0.2446588f, +0.1477899f, +0.1848099f, +0.3509308f, +0.1857173f,
  +0.5095003f, +0.3278214f, +0.0238230f, -0.0187119f, -0.0949726f, +0.6854232f, +0.0821804f, -0.2653800f,
  +0.2392164f, -0.2395433f, +0.0398113f, -0.1220433f, -0.0999301f, +0.2893938f, +0.1243884f, +0.1366978f,
  +0.2162181f, -0.2639676f, +0.2259298f, -0.8363037f, -0.2744713f, +0.1570835f, +0.1463675f, -0.0563790f,
  -0.2633130f, +0.0129054f, +0.3313517f, -0.4628759f, -0.0985803f, -0.1458023f, -0.0125117f, +0.2365187f,
  +0.0336008f, -0.0193206f, -0.1568288f, +0.0159234f, +0.0292921f, +0.0014522f, -0.0335116f, -0.0587570f,
  -0.2082889f, -0.1018719f, -0.1401038f, +0.1010891f, +0.0878157f, +0.1298206f, -0.1386414f, -0.2883669f,
  -0.0985180f, +0.3203423f, +0.0962545f, -0.1240898f, +0.0591112f, +0.1413125f, -0.1447310f, +0.1166752f,
  -0.0750881f, -0.0542620f, -0.1548169f, +0.0910254f, -0.0967885f, +0.1125811f, -0.1904013f, +0.0363556f,
  +0.1019031f, +0.2718292f, -0.0151081f, +0.0333914f, +0.3636836f, +0.0896697f, +0.1141021f, +0.1446234f,
  +0.1087146f, +0.2098862f, -0.1758466f, +0.1577111f, -0.2907525f, +0.1804880f, -0.1522692f, +0.1669206f,
  -0.1677516f, +0.2740807f, -0.3091439f, +0.0895720f, -0.1479882f, +0.0640758f, -0.1584645f, -0.2215475f,
  +0.0228150f, +0.1120991f, -0.1247888f, +0.0994314f, +0.0857042f, +0.0026470f, -0.1809844f, +0.0930086f,
  +0.0034937f, +0.1378039f, -0.1508532f, +0.0937563f, -0.1732657f, +0.1670516f, -0.1486662f, -0.0295817f,
  -0.3002954f, +0.2269211f, +0.1992314f, +0.0062514f, -0.1404145f, +0.1580592f, -0.1172117f, +0.2801715f,
  +0.3302043f, -0.0077761f, +0.2466397f, +0.0561577f, -0.0639494f, +0.0627404f, +0.2685848f, +0.1182332f,
  +0.0274335f, +0.1368168f, +0.1221659f, -0.0484249f, +0.0480732f, -0.0238761f, +0.0271512f, +0.0150364f,
  -0.1559217f, +0.3954074f, +0.2702292f, -0.0989281f, +0.1977730f, -0.3430219f, -0.4292527f, +0.3540928f,
  -0.2490194f, -0.0274411f, -0.0114597f, +0.4859956f, -0.0739813f, -0.1140264f, -0.3577726f, -0.1609839f,
  +0.0799202f, -0.2814457f, +0.2425886f, -0.0510682f, +0.1173631f, -0.1745283f, +0.0736823f, -0.0194884f,
  -0.0220640f, +0.0121262f, -0.2628614f, +0.1402732f, +0.0516361f, -0.2733846f, -0.0999168f, -0.0109894f,
  +0.0175738f, +0.2045643f, -0.1758120f, +0.1684148f, -0.0315741f, -0.1832265f, +0.0770767f, +0.0352162f,
  +0.0798560f, +0.0392330f, -0.1175780f, +0.0513894f, -0.0438428f, -0.0884075f, -0.0157635f, +0.0513325f
);

const float biases[4] = float[4](
  -0.0439205f, -0.0508970f, -0.0028342f, +0.0107957f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer41 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3767321f, +0.2221864f, -0.4282595f, -0.0010639f, +0.0455422f, -0.0663880f, -0.1595538f, -0.1569388f,
  +0.2503306f, +0.0653201f, -0.3144933f, +0.0900572f, +0.1709007f, +0.0172544f, -0.1452437f, -0.2155320f,
  -0.0155042f, +0.1152164f, -0.1912501f, +0.1422451f, +0.0230377f, +0.0196554f, -0.0642194f, +0.1021808f,
  -0.1300533f, +0.2295662f, -0.0479115f, +0.0111241f, -0.2985247f, +0.0094548f, -0.0639270f, -0.1669716f,
  -0.0131732f, +0.2005349f, -0.2293357f, -0.0683947f, +0.0396437f, +0.1242768f, +0.1762757f, -0.3317181f,
  -0.2468634f, -0.0651686f, -0.0638229f, -0.0987175f, +0.1331131f, +0.2237650f, +0.1323373f, -0.0454335f,
  +0.0499313f, +0.3775823f, -0.3414531f, +0.0817626f, +0.0385873f, +0.0946908f, -0.0982238f, -0.1454104f,
  -0.2073379f, +0.1082076f, +0.0794432f, -0.0192073f, -0.1078767f, -0.1126104f, +0.1998836f, -0.0460003f,
  -0.1943288f, -0.0171082f, -0.0316692f, -0.2108230f, +0.0500460f, -0.2686794f, +0.0854047f, +0.1618355f,
  +0.0849716f, +0.0327677f, +0.1135195f, -0.0754412f, +0.0147630f, -0.1803545f, +0.4245900f, -0.0125507f,
  -0.2395157f, -0.0335425f, -0.1552240f, +0.1769235f, -0.7052758f, -0.1287000f, +0.8560312f, -0.2802737f,
  +0.1284062f, +0.0570626f, -0.0965621f, +0.0867206f, +0.1215172f, -0.1059927f, +0.1459937f, +0.0135446f,
  +0.2704877f, -0.2513239f, +0.4812984f, -0.1166098f, +0.3284830f, +0.2004378f, -0.1303921f, +0.2158354f,
  -0.1326673f, -0.3386654f, +0.3587262f, -0.3297470f, -0.1615497f, -0.1091876f, -0.2285011f, +0.0042445f,
  +0.1134509f, -0.3920176f, +0.2364943f, -0.2272978f, -0.3998613f, +0.1688447f, -0.0576538f, +0.0474006f,
  +0.1676345f, -0.1452401f, -0.0166146f, -0.0997088f, -0.1807492f, +0.0740893f, -0.0676377f, -0.1499836f,
  +0.0153887f, -0.0393999f, +0.2592930f, +0.1757523f, +0.0981535f, -0.0322000f, -0.2902581f, +0.0234111f,
  -0.0281277f, +0.0494811f, -0.3081060f, +0.3670043f, +0.1049421f, +0.0999303f, -0.0640235f, -0.1308809f,
  +0.0366025f, +0.2692698f, -0.0254872f, -0.0426028f, +0.1417360f, +0.1693698f, -0.1087839f, +0.1245816f,
  -0.1526513f, +0.4027631f, +0.1211987f, -0.5082024f, +0.5852687f, +0.3554220f, +0.0794183f, +0.0776853f,
  -0.3963142f, -0.2326685f, -0.0344780f, -0.2804385f, +0.1110792f, +0.0223097f, +0.2580320f, -0.0156675f,
  -0.0277876f, -0.0893147f, +0.0350733f, +0.1035356f, -0.1251904f, -0.4793896f, +0.2293197f, -0.0275462f,
  +0.4411777f, -0.1698945f, +0.6988907f, +0.1689738f, -0.2595067f, -0.7888216f, -0.6742991f, +0.4389833f,
  +0.7077233f, +0.1180399f, +0.3657596f, +0.1572713f, +0.1857193f, -0.4599623f, -0.7788756f, +0.2760739f,
  +0.2084884f, -0.2520794f, +0.1210299f, -0.0852733f, +0.0842455f, +0.0945522f, -0.0450362f, -0.1132857f,
  +0.3491669f, -0.4000054f, -0.1949011f, -0.1607013f, -0.1886300f, +0.2477408f, -0.0911480f, -0.3357570f,
  +0.4196666f, -0.3016730f, +0.3118943f, -0.4511518f, -0.5198495f, +0.3232861f, -0.0821960f, -0.1928337f,
  +0.4216076f, +0.1527852f, -0.0351688f, -0.1210396f, +0.1676740f, -0.0667460f, -0.3037957f, +0.0084618f,
  -0.0030671f, -0.3681332f, -0.3022733f, +0.2355664f, +0.1098490f, -0.1956808f, -0.1170161f, -0.0818884f,
  +0.1016600f, -0.0616407f, -0.0123812f, +0.2037047f, -0.0811409f, +0.0589659f, -0.0620304f, +0.0034904f,
  +0.3427440f, -0.0054915f, +0.0092234f, -0.1581082f, +0.1910133f, +0.3951165f, +0.4314682f, +0.0080952f,
  -0.1217156f, -0.0908444f, -0.8422702f, -0.4954911f, -0.1878765f, +0.4142063f, +0.4520741f, -0.4201763f,
  -0.5268716f, +0.3385037f, -0.6139469f, -0.2725564f, +0.7120719f, +0.3292676f, +0.0994895f, +0.2168616f,
  -0.0204672f, +0.1981596f, +0.0071130f, -0.2454133f, -0.0903866f, +0.1498491f, -0.3511166f, -0.1181994f,
  +0.1416773f, -0.3385471f, +0.3635488f, -0.2412461f, -0.2695763f, -0.2589321f, -0.5882791f, +0.1261365f,
  +0.3838968f, -0.1803964f, +0.3589811f, -0.2632058f, -0.2136406f, +0.3027200f, -0.1616595f, -0.4417607f
);

const float biases[4] = float[4](
  +0.0485798f, -0.0125564f, -0.0392415f, -0.0588179f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer42 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0556884f, +0.1190321f, +0.1367151f, +0.1171717f, +0.0453741f, +0.1601240f, -0.1992177f, +0.0605306f,
  +0.0293054f, -0.1275077f, +0.2011378f, +0.0524972f, -0.0608303f, +0.0239358f, +0.1058429f, -0.0862342f,
  -0.0864308f, +0.1478735f, +0.2117755f, -0.0341738f, +0.0372917f, -0.0097031f, +0.0314700f, -0.1840507f,
  +0.1596068f, +0.0054653f, -0.0283103f, -0.1311005f, +0.2772737f, +0.3503405f, -0.7299649f, -0.0108155f,
  +0.3144359f, -0.0994888f, -0.1259760f, +0.2060127f, -0.0616550f, -0.0387420f, -0.1386106f, +0.0626401f,
  +0.0498834f, -0.0717912f, +0.0530675f, -0.2734331f, -0.1236838f, +0.0032748f, -0.0288357f, -0.1686909f,
  +0.3096846f, -0.1320003f, +0.1143095f, -0.1512065f, -0.1717698f, +0.0714579f, -0.2324336f, +0.0069309f,
  -0.2472390f, +0.3106476f, +0.1474005f, -0.3142602f, -0.1300259f, +0.0278738f, +0.0831786f, -0.0387842f,
  -0.0419607f, -0.0864692f, -0.2726336f, +0.3080849f, -0.1257013f, -0.2075415f, +0.1412240f, +0.0891213f,
  -0.0489176f, +0.2085154f, -0.1017280f, -0.1614538f, -0.2304358f, +0.0334537f, -0.1519639f, -0.0045231f,
  +0.0378690f, -0.1010531f, -0.0629834f, +0.0125148f, -0.0742047f, -0.0227986f, -0.0010785f, +0.3872691f,
  -0.0036955f, -0.1366908f, -0.1338725f, -0.1176574f, +0.0296581f, -0.0376342f, -0.0424607f, -0.1019774f,
  +0.0335850f, +0.0605407f, -0.1109858f, +0.1272720f, -0.0030523f, +0.1354560f, +0.2535857f, -0.0309108f,
  +0.2776843f, -0.1590495f, -0.3504675f, -0.1369812f, -0.1276652f, +0.1694692f, +0.0519459f, +0.2661945f,
  -0.1069175f, +0.0282736f, +0.1199640f, +0.0315485f, -0.1166516f, -0.2973202f, +0.1843352f, -0.1745649f,
  +0.0231682f, -0.0447563f, -0.1967615f, +0.0102217f, -0.0725497f, -0.0595653f, +0.2327397f, +0.0338233f,
  -0.0592454f, +0.0448350f, +0.2737015f, +0.1859494f, +0.0035518f, +0.0789703f, -0.1956649f, +0.0554739f,
  -0.1524535f, +0.0653416f, +0.0721065f, -0.0021091f, -0.1988534f, -0.1029491f, +0.0415183f, -0.0541634f,
  -0.0424973f, -0.0197174f, +0.0301940f, +0.2658759f, +0.3940961f, +0.0719500f, +0.1399019f, +0.0369005f,
  -0.1918150f, +0.2369416f, -0.0799931f, +0.0822087f, +0.1839276f, -0.1838908f, +0.1392172f, -0.5340381f,
  -0.0000793f, -0.1629572f, -0.1213214f, +0.0848429f, +0.1302672f, +0.0020914f, +0.0548827f, +0.0168949f,
  -0.0506305f, -0.0109832f, +0.1474942f, -0.1619388f, +0.2266578f, -0.0739745f, -0.3130663f, -0.0006282f,
  -0.8070568f, -0.3447289f, -0.4782368f, -0.0237187f, +0.0052333f, -0.4260922f, +0.3181130f, +0.0255854f,
  -0.0158177f, +0.2291858f, -0.0243692f, +0.0388379f, +0.2658550f, -0.1895554f, +0.1807441f, +0.0470634f,
  +0.2198330f, +0.0984670f, -0.0178617f, -0.0161765f, +0.2016873f, +0.0856002f, -0.2490182f, +0.0738417f,
  +0.0980222f, -0.1047091f, -0.0554687f, -0.1209945f, +0.2806887f, +0.1155547f, -0.2915708f, -0.0082356f,
  +0.1592587f, +0.0714209f, +0.4039147f, -0.1478831f, +0.1918397f, -0.1139367f, +0.0756501f, -0.0319309f,
  -0.0762199f, +0.3314879f, -0.3697233f, -0.0097445f, +0.1142894f, -0.0552292f, +0.1203864f, +0.0044630f,
  +0.0467064f, +0.0215988f, -0.2358350f, +0.1941760f, +0.1478631f, +0.0619762f, +0.2107657f, +0.4289694f,
  +0.0618599f, -0.1777826f, -0.0040914f, -0.0486896f, +0.0661351f, -0.0011541f, +0.0043635f, +0.0924379f,
  -0.1679210f, -0.3196399f, -0.6302390f, -0.0661967f, +0.0565048f, -0.0845601f, +0.2174903f, +0.0320031f,
  -0.3650975f, +0.3491831f, -0.5274935f, -0.2648592f, +0.2016526f, -0.3496899f, +0.0013763f, -0.4020247f,
  +0.0266896f, +0.2096589f, -0.0534770f, +0.2922748f, +0.0672014f, +0.2918309f, +0.0607450f, +0.0717400f,
  +0.4052432f, +0.1390600f, -0.1011820f, +0.0062410f, +0.1336715f, +0.1364282f, -0.1607471f, +0.0497606f,
  +0.2395112f, +0.4065604f, -0.0197259f, -0.1583719f, +0.1077521f, -0.4436044f, -0.0879761f, +0.1289552f,
  +0.1643337f, +0.1177152f, +0.0500265f, +0.1140759f, +0.0756106f, +0.1765879f, -0.0231325f, +0.0500847f
);

const float biases[4] = float[4](
  +0.0354382f, +0.0088243f, +0.0709044f, +0.0164420f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer42 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0275200f, +0.1278791f, +0.2126413f, +0.0323564f, -0.0419926f, -0.0264416f, +0.0870328f, -0.0409106f,
  +0.1401812f, -0.9366216f, +0.0431134f, -0.0405641f, +0.0990339f, +0.5230179f, +0.2044558f, +0.9973346f,
  -0.0461501f, +0.1255411f, +0.0621327f, +0.2037010f, -0.0078847f, -0.0809460f, +0.0119448f, -0.1595792f,
  -0.0314766f, -0.1335726f, +0.2393283f, +0.0976732f, -0.3200456f, -0.2177202f, +0.7098994f, -0.0994864f,
  +0.0407730f, -0.5992265f, -0.0707574f, +0.0424648f, -0.0084911f, -0.0574404f, +0.8118625f, -0.2025760f,
  -0.0954806f, +0.1687118f, +0.1127887f, -0.4069909f, +0.2188541f, -0.1683401f, +0.0290900f, -0.4027913f,
  -0.0166047f, +0.0564665f, +0.1805564f, -0.0074931f, -0.0510148f, -0.2413790f, +0.1910304f, -0.0676528f,
  +0.0951894f, +0.1768579f, +0.0178700f, +0.0557827f, -0.0868477f, -0.3039033f, +0.4237978f, -0.1986668f,
  +0.0735288f, -0.0414899f, +0.1459289f, +0.0266384f, +0.0853244f, -0.3589074f, +0.1893286f, +0.0636999f,
  +0.0485914f, -0.0339373f, -0.1096559f, -0.0383033f, -0.1019518f, +0.0675711f, -0.1601732f, -0.0055495f,
  +0.0484091f, +0.5130492f, -0.1213891f, -0.4463408f, -0.1242250f, +0.2339376f, -0.2389461f, -0.2949848f,
  -0.0560583f, -0.0860184f, -0.0649675f, +0.3988949f, -0.0705475f, +0.1646956f, -0.0882340f, +0.1795263f,
  +0.2789282f, -0.2906049f, -0.4739237f, -0.1834999f, -0.1041242f, -0.0115710f, -0.5144570f, -0.0121891f,
  -0.7807717f, +0.2801380f, -0.2497498f, +0.3324356f, -0.3144307f, +0.1407437f, +0.0102861f, -0.4058644f,
  +0.0871887f, -0.2932073f, +0.0267924f, -0.2341076f, +0.2612455f, -0.1358626f, +0.0658826f, +0.2736806f,
  +0.2474778f, -0.0983257f, -0.0489998f, -0.1320499f, -0.0451358f, +0.0858583f, -0.1522834f, -0.0188745f,
  +0.4257488f, -0.0209268f, -0.0949308f, -0.2568820f, +0.1795263f, +0.4594158f, -0.2161092f, +0.1412826f,
  +0.0696466f, -0.1997926f, -0.0052945f, -0.1234514f, +0.0616506f, +0.1785082f, +0.1159747f, +0.0397554f,
  +0.0394653f, +0.2359900f, -0.1374586f, -0.2070860f, -0.1743930f, +0.0028144f, -0.4458966f, -0.0732452f,
  +0.1264802f, +0.4525315f, +0.2245699f, +0.2556377f, -0.1573840f, -0.0894411f, +0.0638278f, +0.0873190f,
  +0.1460762f, -0.0880248f, +0.1257062f, -0.0042357f, -0.0184925f, -0.0136450f, -0.0366635f, +0.1048570f,
  -0.0017400f, +0.0227426f, +0.0233737f, +0.1221284f, -0.1454675f, +0.4658880f, -0.4161927f, +0.1393809f,
  +0.7559165f, +0.2540277f, -0.1790612f, +0.8512295f, +0.3556530f, +0.9078261f, -1.0456917f, +0.3721532f,
  +0.0317582f, -0.0441491f, +0.0232107f, +0.3952972f, -0.1233367f, +0.3873785f, -0.0686207f, +0.2023104f,
  -0.2507102f, -0.1635696f, +0.1715777f, +0.2174882f, -0.1826281f, +0.1043026f, -0.0679995f, +0.0589895f,
  -0.0763162f, -0.1216631f, +0.2184564f, -0.0551982f, +0.1875556f, +0.3444041f, -0.2369243f, +0.2034294f,
  -0.1944444f, +0.0968405f, -0.2379787f, +0.0291222f, -0.1888853f, +0.6058798f, -0.3482982f, -0.1760983f,
  +0.0370842f, +0.2314263f, +0.0585185f, -0.1121137f, +0.0157134f, +0.1795567f, +0.0278527f, +0.0461441f,
  +0.1703822f, -0.3155133f, +0.0786693f, +0.1982890f, -0.0857539f, -0.0092757f, -0.0650644f, +0.6882916f,
  +0.1044298f, -0.0687096f, +0.0337917f, -0.0120190f, -0.0806997f, +0.2665921f, -0.0882610f, +0.0274400f,
  +0.2674096f, +0.0715510f, -0.0508181f, +0.0184464f, +0.1016056f, +0.2773322f, +0.2890563f, -0.0180763f,
  +0.0141592f, -0.2535025f, -0.1884316f, +0.0440608f, +0.1915642f, -0.1926629f, +0.5929942f, +0.3127813f,
  -0.0941038f, +0.1791528f, -0.0943162f, -0.0062081f, -0.0660948f, +0.2629598f, +0.0272708f, +0.0263884f,
  -0.1255093f, -0.0989527f, -0.0961241f, -0.1291106f, +0.0009222f, +0.0826186f, +0.0039126f, +0.0592905f,
  +0.7019615f, +0.0158635f, +0.1960016f, -0.1667936f, +0.2189000f, -0.2955152f, +0.0602824f, -0.1594610f,
  +0.2261888f, -0.0505712f, -0.0497892f, -0.1279991f, +0.1728839f, +0.0869901f, -0.0638577f, +0.0687761f
);

const float biases[4] = float[4](
  -0.0090699f, -0.0193425f, +0.0131814f, -0.0052943f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer43 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0904164f, +0.1222076f, +0.0841204f, -0.0233271f, +0.0898930f, +0.0555691f, -0.1292192f, -0.0590335f,
  +0.2602701f, +0.0878142f, +0.0897172f, -0.1442372f, +0.0517448f, +0.1985596f, -0.5131010f, -0.0311807f,
  +0.1471447f, +0.4551455f, +0.1123857f, -0.0803570f, -0.0747622f, +0.3177995f, -0.2252467f, +0.1541952f,
  +0.0477241f, -0.0781558f, -0.1738293f, +0.0673635f, +0.0973055f, +0.0471619f, +0.2489062f, +0.0777723f,
  -0.3526276f, -0.2294085f, -0.4075507f, -0.0029973f, +0.0130846f, +0.3138570f, +1.1734517f, -0.3136461f,
  +0.0198796f, +0.0733080f, -0.1457155f, -0.1145503f, -0.0924577f, +0.3368043f, +0.2170237f, +0.1668681f,
  -0.0159284f, -0.1656125f, -0.0801809f, +0.0671841f, -0.1348408f, -0.1667191f, +0.0411169f, -0.1015938f,
  +0.0766215f, +0.0969434f, -0.0160373f, +0.2986480f, +0.2600033f, +0.1254951f, -0.0954929f, -0.3555859f,
  +0.0976135f, +0.1583776f, -0.0180529f, +0.1375499f, +0.0430680f, +0.2567989f, -0.1139470f, -0.2005382f,
  -0.1711224f, -0.0819669f, +0.2556008f, -0.0355081f, +0.1259461f, +0.1056570f, +0.0714290f, -0.1235937f,
  +0.3419972f, +0.3911453f, -0.3962419f, -0.0853155f, -0.3207250f, +0.2343886f, -0.3418209f, -0.0372360f,
  -0.0032822f, -0.1639049f, +0.1308530f, +0.0544006f, +0.0517013f, -0.2216037f, +0.0688720f, -0.0969679f,
  -0.1244040f, -0.2832105f, +0.0176058f, +0.0468485f, +0.1610615f, -0.0286226f, +0.1292943f, +0.1217649f,
  +0.2378033f, -0.1570316f, -0.2407429f, +0.0445846f, -0.5674046f, -0.1560150f, +0.0875612f, -0.5226616f,
  +0.1066642f, +0.0882501f, +0.0400033f, -0.1460826f, +0.1523814f, +0.0489382f, -0.0282668f, +0.0701695f,
  +0.0179981f, -0.0972307f, -0.1239845f, -0.0179384f, -0.2848080f, -0.0238113f, -0.2691383f, -0.0513857f,
  +0.1333926f, -0.3560625f, -0.0508000f, +0.1514928f, +0.0960902f, -0.0180093f, +0.3558465f, -0.2223573f,
  +0.0387302f, -0.1474493f, +0.0266210f, -0.1862358f, -0.0247237f, -0.0818509f, -0.0416440f, -0.0619854f,
  +0.0167259f, +0.0512690f, +0.1238329f, -0.0710721f, +0.0337905f, +0.0649755f, -0.0602219f, +0.0649057f,
  +0.0828662f, +0.0775070f, -0.0751832f, -0.0664716f, +0.0329771f, +0.1402846f, -0.1216412f, -0.1336143f,
  +0.0827450f, +0.2782669f, +0.1390989f, -0.0539903f, +0.0237270f, +0.1347409f, -0.0204695f, +0.0968212f,
  -0.0601393f, -0.0036700f, +0.1214273f, -0.2022789f, +0.2934712f, +0.0792321f, -0.0527721f, -0.0721741f,
  +0.0555388f, +0.2968223f, -0.3018638f, -0.5303214f, +0.4394331f, -0.0629434f, +0.1182433f, -0.3779793f,
  -0.1078919f, +0.4170107f, -0.1160610f, -0.5087312f, +0.3462021f, +0.2734507f, +0.0262121f, +0.2765179f,
  +0.1626535f, +0.0424001f, -0.0196906f, +0.0566379f, +0.1167758f, +0.1095053f, +0.3191720f, +0.0631887f,
  -0.0499656f, -0.3775208f, +0.1513297f, +0.3489929f, +0.3183675f, +0.9563271f, +0.6411831f, +0.0098549f,
  +0.0860751f, -0.4342646f, +0.0057154f, -0.0292088f, +0.3980590f, +0.0002768f, +0.1072598f, -0.2642608f,
  -0.3840010f, -0.3055118f, +0.0537229f, -0.0965554f, +0.1238315f, +0.1507041f, +0.4261345f, -0.2935595f,
  -0.3646637f, -0.2516205f, -0.6096269f, -0.2583223f, +0.0952185f, +0.2630708f, +0.1694673f, -0.3249160f,
  -0.2496121f, -0.1180022f, -0.3910025f, +0.1032611f, -0.1754458f, -0.0706901f, -0.1723476f, -0.0692392f,
  -0.1192794f, -0.0770899f, +0.1407705f, +0.1600354f, +0.3218836f, -0.0258585f, +0.1527296f, -0.0461766f,
  -0.1607106f, +0.5237121f, -0.0674402f, +0.4623312f, +0.4507448f, +0.2083432f, +0.0097624f, -0.3559114f,
  -0.0508637f, +0.0473537f, +0.1431775f, -0.1255735f, +0.1214626f, -0.0791176f, +0.0889429f, -0.0278928f,
  +0.0040809f, +0.0646586f, -0.0264384f, +0.0044291f, +0.1246552f, -0.0166516f, +0.0796890f, +0.0424410f,
  +0.0129027f, -0.0708817f, -0.0263878f, +0.0660541f, -0.1148900f, -0.0330521f, +0.0006548f, +0.1975848f,
  +0.0084983f, -0.0444712f, -0.0123553f, -0.0140830f, +0.0481976f, -0.0607487f, -0.0255430f, -0.0122458f
);

const float biases[4] = float[4](
  +0.0118216f, -0.0191840f, +0.0050090f, +0.0766409f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer43 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1440784f, -0.3002031f, +0.1083745f, -0.0618783f, -0.3059433f, +0.0779282f, +0.1972458f, -0.1146694f,
  -0.0545376f, +0.1385634f, +0.3092347f, -0.0990791f, -0.0275739f, +0.0042222f, -0.4116760f, -0.0932787f,
  -0.0188397f, -0.2708923f, +0.0361906f, -0.0689306f, -0.6066430f, +0.3266419f, +0.0905392f, +0.0735587f,
  -0.0436623f, -0.1657645f, +0.0569427f, -0.0672769f, +0.0455432f, -0.0585094f, -0.1870201f, -0.2905611f,
  -0.0849396f, -0.0205224f, +0.2532252f, -0.0315026f, -0.5338094f, +0.2369670f, -0.0987093f, +0.1878642f,
  +0.6300575f, -0.0522771f, -0.0301931f, -0.1914177f, +0.1330507f, +0.4194741f, -0.1440122f, -0.2237507f,
  +0.1998113f, -0.1615675f, -0.1106476f, -0.0461274f, -0.3949616f, +0.0160306f, -0.2222293f, +0.0812182f,
  +0.2335810f, -0.1796649f, -0.1503690f, +0.2189646f, +0.2651475f, +0.0391264f, -0.0068170f, +0.1243451f,
  +0.2886407f, -0.1793597f, +0.0530548f, -0.0632164f, -0.2248897f, +0.0114773f, -0.1577870f, +0.0775639f,
  +0.0063448f, +0.0052113f, +0.1194608f, +0.0169687f, +0.0201580f, -0.0934078f, +0.0977808f, +0.1932636f,
  +0.1586900f, +0.3982856f, +0.0314912f, -0.1274940f, +0.3492540f, -0.0829761f, -0.0675326f, +0.0720218f,
  -0.0339341f, +0.1808816f, -0.2374264f, +0.1416286f, -0.1338248f, +0.1251805f, -0.0600947f, +0.0100057f,
  +0.1646712f, +0.3300799f, +0.1222417f, -0.0878863f, -0.1749564f, +0.0001513f, -0.0016494f, +0.0791504f,
  +0.3801952f, +0.0412574f, -0.0850760f, +0.0072541f, +0.0424823f, +0.0830542f, +0.1809439f, -0.0994573f,
  -0.2549171f, +0.1637937f, +0.0789279f, +0.0485694f, -0.0243505f, -0.0010456f, +0.0537303f, +0.0470701f,
  -0.0690253f, +0.1860694f, +0.0143146f, +0.0494486f, -0.0066113f, -0.0316531f, -0.0057204f, -0.0427034f,
  -0.0506387f, +0.1006996f, -0.0098083f, -0.0432302f, +0.0739743f, +0.0519539f, -0.0973762f, -0.0193826f,
  +0.1097197f, +0.2055891f, +0.1619537f, +0.0530485f, -0.0661696f, +0.0599439f, -0.1506824f, +0.0537812f,
  +0.2709736f, +0.0235379f, -0.3824529f, -0.0530396f, +0.1148612f, +0.0809250f, -0.1731178f, -0.1628494f,
  +0.1422485f, -0.1317866f, -0.0486340f, +0.0285993f, -0.2019641f, -0.1306253f, -0.0492182f, -0.1792183f,
  -0.2784293f, -0.1105096f, +0.0311778f, -0.1752424f, +0.1731808f, -0.1482663f, +0.0405046f, -0.0919043f,
  +0.7019379f, -0.0696142f, -0.1061883f, -0.0347652f, -0.0293368f, -0.0904728f, -0.1400298f, -0.2594477f,
  +0.0620124f, -0.3354585f, +0.3174887f, +0.1557482f, -0.3622903f, +0.2364363f, +0.4324369f, -0.7629988f,
  +0.0386081f, -0.3342185f, -0.1124076f, -0.3511725f, -0.0607250f, -0.1157633f, -0.0196462f, +0.0818156f,
  +0.0464309f, +0.0008978f, -0.1949090f, +0.0298920f, +0.1965501f, +0.1638530f, -0.1159184f, -0.2771227f,
  -0.2234782f, -0.1323933f, -0.0280703f, +0.3212599f, -0.4045509f, +0.0711618f, +0.0596610f, -0.0087395f,
  +0.1486566f, -0.1571449f, +0.1806348f, -0.2846317f, -0.0829549f, -0.1178472f, +0.1005248f, +0.3251028f,
  -0.0246115f, +0.2332284f, +0.0442397f, -0.0810663f, +0.0453051f, -0.0470303f, +0.0384233f, -0.1924533f,
  +0.0252173f, -0.1955961f, +0.0517624f, -0.2139321f, +0.1963478f, -0.1138164f, -0.2536649f, +0.1208051f,
  -0.2227405f, +0.0670690f, +0.0480004f, +0.0299253f, +0.0171660f, -0.0120937f, -0.0783831f, +0.0510023f,
  +0.5106965f, +0.0803831f, -0.0703772f, +0.1229278f, -0.3094087f, -0.1618299f, -0.1337464f, -0.0724925f,
  +0.0570555f, +0.4684410f, +0.1865081f, +0.4015989f, -0.5786026f, +0.5684387f, +0.0895542f, -0.5790659f,
  +0.1705827f, +0.3198387f, -0.0853882f, +0.1533026f, -0.2181478f, +0.3849388f, +0.0450786f, +0.1626483f,
  +0.0133903f, -0.2665926f, -0.1481360f, -0.0309070f, -0.1836821f, -0.0713485f, -0.0894877f, +0.2271223f,
  +0.1964996f, -0.0968597f, +0.1915745f, -0.2585786f, -0.3084105f, -0.3681169f, -0.1957581f, +0.7235832f,
  +0.0750542f, +0.0389565f, -0.0953127f, +0.1938343f, -0.2336961f, +0.1430420f, -0.1013511f, +0.0721896f
);

const float biases[4] = float[4](
  -0.1125596f, +0.0930274f, -0.0185632f, -0.0454938f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer44 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1036325f, +0.1157568f, -0.0970139f, +0.0513136f, -0.1428340f, -0.1383321f, +0.1184899f, -0.3114335f,
  -0.0497542f, +0.2299847f, -0.5685989f, -0.0241310f, -0.1445248f, -0.1187804f, +0.2391985f, -0.0512937f,
  -0.0169442f, +0.0952669f, -0.0999137f, +0.0076055f, +0.1107007f, -0.1611477f, +0.0797705f, -0.1777446f,
  +0.3210600f, -0.4590745f, -0.2508250f, -0.0083079f, -0.2612317f, -0.0217182f, +0.0385692f, +0.2173717f,
  -0.0153443f, +0.0082059f, +0.0959358f, +0.0515881f, -0.1535044f, -0.4669993f, -0.1369417f, -0.4717207f,
  +0.0663004f, +0.3015930f, -0.1015101f, +0.0017790f, -0.1596090f, -0.2069065f, +0.2133242f, +0.1862442f,
  -0.0622493f, +0.0632862f, -0.0423042f, +0.0141310f, +0.2529461f, -0.1673204f, +0.0270102f, +0.0239499f,
  +0.0574801f, +0.0185979f, +0.0577188f, -0.1668369f, -0.0911013f, +0.0434040f, -0.1333183f, -0.1059788f,
  -0.1708840f, -0.0202892f, +0.0702145f, +0.1090393f, +0.2490885f, -0.2173327f, +0.0832479f, +0.0572916f,
  +0.0717433f, +0.0095891f, +0.0049753f, -0.0581829f, -0.1073162f, -0.1236679f, +0.1517782f, +0.1676656f,
  +0.0853229f, -0.0840678f, -0.1502742f, -0.0048613f, +0.1444891f, -0.0477128f, +0.1268061f, +0.0201900f,
  +0.0584074f, -0.1152573f, -0.0357544f, -0.0245543f, -0.1304283f, +0.0745289f, +0.2224702f, +0.0722047f,
  -0.1409183f, -0.1382224f, -0.0137093f, +0.0340359f, +0.0552107f, -0.0715590f, +0.1476345f, -0.0412455f,
  +0.0334834f, -0.1690040f, +0.1793450f, -0.1142943f, -0.1229280f, -0.0144158f, +0.2325433f, -0.0960573f,
  -0.2712898f, -0.0693896f, +0.1268810f, -0.0216587f, -0.0269774f, +0.1572582f, +0.1956621f, -0.0675163f,
  -0.1366186f, -0.1567931f, +0.0065516f, +0.0555187f, +0.0663057f, -0.0819820f, -0.0819080f, +0.0533054f,
  -0.0210506f, -0.1610466f, +0.1143719f, +0.0165525f, +0.0129862f, -0.2187444f, +0.0405013f, -0.1208328f,
  -0.0694827f, +0.2008670f, +0.0127471f, +0.1653868f, +0.1579182f, +0.2305016f, -0.1197959f, -0.0218136f,
  +0.1304964f, +0.2620143f, +0.0323030f, +0.0763946f, -0.0298256f, -0.1191320f, -0.2214019f, -0.0592094f,
  -0.2098430f, -0.3434166f, +0.6214072f, -0.0888911f, -0.0510773f, -0.0518185f, +0.0506720f, -0.2258789f,
  +0.0174554f, +0.0830257f, -0.0214870f, -0.0477887f, +0.1627355f, -0.0570625f, -0.0325020f, +0.1287910f,
  +0.0159208f, +0.0660426f, -0.3282941f, -0.1094137f, -0.3963313f, +0.2863890f, +0.3796544f, -0.0523458f,
  -0.4503033f, -0.0804329f, -0.2824548f, +0.0912626f, -0.1872903f, +0.2879172f, +0.0562072f, +0.4712653f,
  -0.0550115f, -0.3194252f, +0.0203696f, -0.1586223f, -0.0186652f, -0.0926405f, -0.0768932f, -0.2680240f,
  +0.1094039f, +0.2054531f, -0.0592275f, +0.0377007f, +0.0392075f, +0.4419880f, -0.0137902f, +0.0552002f,
  +0.1188222f, +0.0003586f, +0.0135587f, +0.1993583f, -0.1281427f, +0.0703897f, +0.0941360f, +0.0515080f,
  +0.1077827f, -0.3325057f, -0.0736471f, +0.0375310f, -0.1702844f, +0.0677529f, +0.1647533f, +0.0038930f,
  +0.0746770f, +0.2933036f, +0.1428766f, -0.0191203f, -0.0633811f, -0.1843968f, -0.2119806f, +0.2139107f,
  +0.2141649f, +0.2086132f, +0.2731251f, +0.0200101f, +0.0558069f, -0.1385693f, -0.4118235f, -0.2223630f,
  -0.0439089f, +0.0903602f, -0.0109200f, -0.0279467f, +0.0566171f, +0.2214615f, +0.3519219f, +0.1859082f,
  -0.3284370f, +0.5370349f, -0.1666649f, +0.2183192f, +0.2593296f, -0.0923422f, +0.3576042f, -0.2663602f,
  -0.5287409f, +0.3050906f, -0.0479059f, -0.6099573f, -0.0203235f, -0.1633347f, +0.2798628f, +0.0121121f,
  +0.1560228f, -0.1655992f, -0.0429274f, -0.0694207f, +0.1648905f, +0.0176930f, +0.2400171f, -0.0206437f,
  -0.0749282f, +0.1671652f, -0.0748712f, -0.0910672f, -0.3124677f, +0.0419228f, -0.0402298f, -0.0190876f,
  +0.1818753f, +0.0087584f, +0.0203196f, +0.5944685f, +0.1057746f, -0.1261517f, +0.1194895f, +0.1344728f,
  +0.1187259f, -0.3864525f, -0.0318063f, -0.1115113f, -0.1222149f, -0.1092184f, +0.2779882f, +0.0002497f
);

const float biases[4] = float[4](
  +0.0358329f, -0.0130121f, +0.0861410f, +0.0279191f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer44 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1456210f, -0.0835170f, -0.0390765f, +0.0067427f, -0.2296924f, -0.0632366f, -0.2867023f, +0.0645480f,
  +0.2969717f, +0.2298903f, -0.0857756f, +0.1867651f, +0.2338208f, -0.2180466f, -0.4676263f, +0.5981935f,
  -0.0740943f, -0.1022813f, +0.1236751f, +0.0163649f, +0.1692541f, -0.0491025f, -0.1165701f, -0.0771306f,
  -0.1436424f, +0.4124783f, +0.2903416f, +0.1731000f, +0.0273611f, +0.1655332f, -0.4458299f, +0.0718778f,
  -0.4608545f, +0.0294600f, +0.1273500f, -0.6157532f, +0.5163695f, +0.0644092f, -0.1086092f, -0.5803232f,
  +0.0001569f, +0.2775799f, +0.0673594f, -0.1172102f, -0.0434588f, +0.0727388f, -0.1091211f, +0.1715777f,
  +0.0301035f, +0.0841037f, +0.0737536f, -0.1175527f, +0.4544708f, -0.0887304f, +0.0156024f, -0.1467953f,
  -0.0323865f, +0.0644703f, +0.0106199f, +0.4602369f, -0.1284942f, -0.0888425f, -0.0998678f, -0.0112088f,
  -0.0816636f, -0.0428985f, +0.0663171f, +0.1626947f, -0.0616619f, -0.1929169f, -0.0109983f, +0.0464842f,
  +0.0159401f, -0.0001537f, -0.2732249f, +0.0288810f, -0.4097262f, -0.1258414f, +0.1011651f, -0.0348043f,
  -0.2431772f, -0.0899952f, +0.6141374f, -0.0381937f, -0.3418384f, -0.0543048f, +0.0671250f, +0.1368927f,
  +0.0403654f, -0.1518227f, +0.0854532f, +0.0382036f, +0.0951166f, -0.2001980f, -0.3132561f, +0.0047076f,
  +0.2949333f, -0.5555197f, -0.2780906f, +0.1880168f, -0.3017688f, -0.2735927f, +0.1726129f, +0.0101244f,
  +0.5396433f, -0.0795347f, -0.8859072f, -0.2899788f, -0.0996303f, -0.3335547f, +0.0749150f, -0.0207452f,
  +0.1801377f, +0.1310576f, -0.1253320f, -0.1159668f, +0.1746213f, -0.3733824f, -0.4724610f, -0.0112965f,
  -0.0382134f, -0.1929713f, -0.0970355f, -0.1062084f, -0.4372268f, -0.3614942f, +0.1671110f, -0.0634831f,
  +0.2325439f, +0.0458248f, -0.1132727f, -0.2235048f, -0.1313312f, +0.2479549f, -0.2400799f, +0.0674807f,
  -0.0866428f, -0.0482001f, -0.1056370f, -0.0388912f, +0.1006758f, -0.3875108f, -0.0727504f, -0.0320785f,
  +0.2868783f, -0.1621167f, -0.0263352f, -0.0744214f, -0.2647493f, -0.0694600f, +0.3230420f, +0.4089749f,
  -0.1875925f, -0.0041399f, -0.2331565f, +0.0886913f, -0.2467154f, +0.1548772f, +0.0528717f, -0.0554795f,
  +0.0898539f, +0.1143925f, +0.0141410f, -0.0458818f, -0.4218841f, +0.0651862f, +0.2049932f, +0.3967932f,
  +0.1585790f, -0.6725777f, +0.0690053f, -0.1030397f, -0.0355653f, +0.0032399f, +0.3687541f, -0.0969952f,
  +0.8102902f, +0.2390673f, +0.2765763f, +0.1595748f, -0.3247120f, -0.0819721f, -0.0315704f, +0.1377322f,
  +0.1040341f, +0.2802764f, -0.0015088f, +0.3368469f, -0.2215445f, -0.1226309f, -0.2624641f, +0.1087271f,
  -0.0489642f, -0.3456422f, +0.0208040f, -0.1082566f, -0.3080868f, +0.1421014f, +0.0734631f, +0.0200999f,
  +0.2488738f, +0.2783593f, +0.0041685f, -0.5820675f, +0.0739159f, +0.0685201f, -0.0408157f, +0.1886229f,
  +0.1656246f, +0.1631851f, -0.0549257f, -0.5468629f, -0.4110011f, +0.0654786f, -0.0394706f, -0.0212395f,
  -0.1369331f, -0.0144196f, -0.0059083f, +0.0547184f, +0.3079092f, +0.0874053f, +0.2436516f, -0.0606578f,
  +0.4082821f, +0.2707791f, +0.0285065f, -0.0897368f, +0.1469129f, -0.1528566f, +0.2374645f, +0.2263727f,
  +0.1657056f, +0.0877786f, +0.0478476f, +0.0751184f, +0.2769370f, -0.2243699f, +0.0743580f, +0.0628512f,
  +0.0326948f, -0.0455228f, +0.2025181f, -0.0260291f, +0.2536863f, +0.0067676f, +0.0852710f, +0.2005017f,
  -0.5541278f, -0.0698200f, -0.2005781f, +0.1488730f, -0.1693767f, -0.3040621f, +0.3042503f, -0.5953868f,
  -0.1303420f, +0.1639432f, -0.0491814f, -0.0687487f, +0.3605530f, -0.1208413f, +0.0383793f, -0.0699914f,
  -0.1178779f, -0.0079591f, -0.0344366f, -0.0087310f, -0.0704563f, +0.1238869f, +0.0902893f, +0.0214058f,
  -0.0252909f, +0.0732706f, -0.0883094f, +0.1256416f, +0.1100320f, -0.2928011f, +0.2449249f, -0.0125704f,
  +0.1836840f, -0.0881008f, +0.0489863f, +0.0454056f, -0.0927966f, -0.1351288f, +0.0924658f, -0.0567723f
);

const float biases[4] = float[4](
  +0.0688916f, +0.0974833f, +0.0139235f, -0.0450248f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer45 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.4433626f, -0.5080702f, -0.1588124f, +0.0172150f, +0.5098950f, +0.2236604f, +0.1417955f, +0.0018072f,
  +0.2196855f, +0.0423076f, -0.4394445f, -0.1053794f, +0.9603665f, +0.4660434f, -0.2962511f, +0.1986482f,
  +0.1328569f, -0.3309505f, -1.1577108f, +0.2771910f, +0.1757256f, +0.4833353f, -0.2886163f, +0.2526613f,
  -0.3330801f, +0.2348250f, -0.6678950f, -0.1912590f, -0.1571233f, +0.8338441f, -0.5099710f, +0.1193974f,
  +0.5392493f, -0.4140964f, -0.8643543f, -0.3280060f, -0.1568117f, +0.1851396f, -0.8754538f, +0.0397130f,
  +0.0024246f, -0.4304001f, -0.5721840f, +0.3185264f, -0.3540174f, +0.2433227f, -0.1152604f, -0.5620512f,
  +1.3334254f, -0.3143637f, -0.5456234f, -0.1186632f, +0.4719043f, +0.0891355f, +0.3174059f, +0.0432293f,
  +0.2991016f, -0.5442776f, -0.5142275f, -0.0312474f, -0.2510516f, +0.0458097f, -0.3086565f, +0.2686254f,
  +0.0692602f, -0.7798001f, -0.3376520f, +0.4233313f, -0.1100042f, -0.2593460f, +0.1163652f, -0.4480757f,
  -0.0108267f, -0.1241019f, +0.2243622f, -0.0205590f, +0.2398132f, -0.1222327f, +0.1152985f, +0.1121100f,
  +0.1359209f, -0.4702452f, +0.1092165f, -0.0173513f, -0.0695904f, +0.1338942f, +0.0686062f, +0.2314380f,
  +0.1504805f, -0.3254850f, +0.0881498f, -0.1570041f, -0.1224508f, +0.0525318f, +0.1307286f, +0.1459901f,
  +0.0378894f, +0.1014988f, -0.1339627f, +0.0909963f, -0.5021379f, +0.1290872f, -0.2879230f, +0.3791248f,
  +0.1863787f, -0.4232321f, -0.2664855f, +0.0765573f, -0.2772413f, +0.0726627f, -0.1094872f, -0.0659082f,
  +0.1360098f, -0.0457199f, +0.3208037f, -0.0886165f, -0.0704221f, -0.0516695f, -0.0503077f, +0.0147810f,
  +0.1880291f, -0.1577441f, +0.0583218f, -0.0824827f, -0.0076270f, +0.2445211f, -0.2171623f, +0.1393673f,
  +0.2394059f, -0.4432714f, +0.1184149f, -0.1979697f, +0.2599711f, +0.0396745f, -0.0271740f, +0.1709086f,
  +0.2131634f, -0.1226879f, +0.1636949f, +0.1875060f, +0.0860199f, -0.0190844f, -0.1976980f, +0.1397772f,
  +0.1794365f, -0.7451484f, -0.2017005f, +0.0309598f, +0.0001638f, +0.0970802f, +0.1121316f, +0.1861935f,
  +0.3777145f, -0.2496906f, +0.1658446f, -0.2345174f, +0.3267538f, +0.0407369f, +0.4196647f, +0.2308189f,
  +0.0550153f, -0.2604787f, -0.2123208f, -0.1558103f, -0.3063639f, +0.1588731f, +0.1834403f, +0.2619769f,
  +0.0494961f, +0.3044848f, -0.0406127f, -0.2868991f, +0.1843933f, +0.2935249f, -0.3645397f, -0.3155828f,
  +0.3460931f, +0.2792065f, +0.4443083f, -0.3190634f, +0.2152678f, +0.2126289f, -0.4695408f, -0.2361841f,
  +0.1189104f, +0.0392938f, +0.1634458f, +0.1004752f, +0.2238300f, +0.0301530f, -0.0039979f, -0.4389183f,
  -0.0592347f, +0.0655113f, +0.1316290f, -0.0811055f, +0.1286593f, -0.0016295f, +0.1276818f, -0.0800601f,
  +0.0166601f, -0.0895154f, +0.0910775f, -0.1275703f, +0.1293696f, -0.1196543f, +0.1689674f, -0.1024929f,
  +0.2077251f, -0.3481487f, +0.1795629f, -0.1858946f, -0.2403742f, -0.1407903f, -0.1058995f, -0.0155105f,
  +0.1005652f, -0.4829266f, -0.1728367f, +0.0315584f, -0.4133191f, -0.0378052f, +0.0907552f, +0.1901926f,
  +0.2853383f, -0.0359729f, -0.1113236f, +0.2558576f, +0.1676285f, -0.1298098f, -0.1948805f, -0.2878328f,
  +0.1939527f, -0.1092390f, +0.1587811f, -0.2065208f, +0.2061276f, -0.1082359f, -0.1375072f, -0.0746632f,
  -0.3793728f, -0.3227023f, -0.1611121f, +0.1218328f, -0.0839400f, +0.1667789f, -0.3013871f, +0.0108268f,
  +0.2923059f, -0.5019890f, +0.0104330f, +0.4955239f, -0.3199654f, +0.2346006f, -0.4478980f, -0.1261844f,
  +0.0317353f, -0.0024227f, +0.0852400f, -0.4236604f, -0.3813194f, -0.0010033f, -0.3793084f, -0.1114810f,
  -0.2105669f, +0.0228537f, -0.1384989f, +0.0635708f, -0.3880832f, +0.0644302f, -0.6286689f, +0.0862055f,
  +0.4317983f, -0.1716028f, +0.1242849f, -0.0069647f, +0.5177597f, +0.3009793f, -0.0385571f, +0.1497001f,
  +0.2778751f, -0.1277186f, +0.0935560f, +0.0041721f, -0.2823071f, +0.2574023f, +0.0098465f, +0.2188174f
);

const float biases[4] = float[4](
  -0.2638648f, -0.1932910f, -0.0660747f, -0.1168318f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer45 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0182483f, -0.0944537f, -0.0796696f, -0.0228855f, -0.0642782f, +0.0540791f, -0.0114736f, -0.0899186f,
  -0.0262886f, +0.0348027f, -0.2587642f, +0.1318105f, -0.3367093f, +0.2936715f, +0.0341517f, -0.3078433f,
  +0.2049652f, -0.0908187f, -0.0130752f, +0.0584561f, +0.0494991f, +0.1344756f, -0.0563918f, -0.0162368f,
  -0.2532561f, +0.0830527f, +0.0606402f, -0.0244165f, +0.0227126f, +0.0739012f, -0.2293924f, -0.0679464f,
  +0.0722617f, +0.4084013f, -0.4262660f, -0.3845083f, +0.4817904f, +0.0287937f, -0.6266503f, -0.2902691f,
  -0.2503057f, +0.0827097f, -0.3370623f, -0.0632471f, +0.3153352f, +0.0611263f, -0.2710629f, +0.0018276f,
  +0.0637381f, +0.0667826f, -0.0350146f, +0.1884091f, +0.1519379f, -0.0071072f, +0.3922302f, -0.0995179f,
  +0.3078227f, +0.3611285f, +0.2322405f, +0.2615318f, +0.0538718f, +0.0261217f, -0.1582781f, +0.0684768f,
  +0.1838405f, -0.3100486f, -0.0299405f, +0.0514833f, -0.1697629f, +0.0577297f, -0.0102785f, -0.2839274f,
  -0.0107000f, +0.0477655f, +0.1483604f, +0.0021135f, -0.0755974f, -0.2378652f, +0.1641821f, +0.2306486f,
  -0.1679145f, +0.2029293f, +0.0314549f, +0.0594191f, +0.4425600f, -0.2378712f, -0.0107446f, -0.0693455f,
  -0.0512421f, -0.0009469f, -0.0885395f, +0.1062648f, -0.0091784f, -0.0254731f, -0.0650553f, -0.0091155f,
  +0.0381621f, +0.6450154f, +0.2430260f, -0.1509271f, -0.0493048f, +0.0015105f, -0.1994237f, +0.1500237f,
  -0.3245111f, +0.1470496f, -0.0059749f, +0.0570428f, +0.0961231f, -0.0438514f, +0.3718328f, +0.1346368f,
  -0.1079759f, -0.0722357f, +0.1159003f, -0.1551433f, -0.0567956f, -0.1287318f, +0.0735156f, +0.0726588f,
  +0.3126143f, -0.1303855f, -0.2210280f, +0.0398951f, -0.2678646f, -0.0810996f, +0.0740895f, +0.0065053f,
  -0.3292778f, -0.0711945f, -0.2965295f, +0.1532519f, -0.4444023f, -0.1086706f, -0.0512647f, -0.0360745f,
  -0.4951293f, -0.2297795f, -0.3728404f, +0.0701755f, +0.0238430f, -0.2410086f, -0.0066123f, -0.0617194f,
  +0.0395325f, -0.0921951f, -0.2680656f, +0.0700314f, -0.1934914f, -0.0412315f, -0.0723383f, -0.0371215f,
  +0.4070881f, -0.0066759f, +0.2280127f, +0.0944554f, -0.0879735f, -0.1035462f, +0.1893228f, -0.0515273f,
  +0.1716369f, +0.1100747f, +0.2323725f, -0.1219393f, -0.0297750f, -0.0264037f, +0.1027442f, +0.2060388f,
  +0.0157447f, +0.0909411f, +0.2798600f, -0.1910044f, +0.3168913f, -0.0424626f, +0.2047219f, -0.0995087f,
  -0.1495157f, +0.3717757f, -0.0100907f, -0.0832655f, +0.1511833f, -0.2151229f, +0.0990935f, -0.3312631f,
  -0.1579893f, +0.2263456f, +0.0546163f, -0.1000341f, -0.1243396f, -0.1470831f, +0.0576976f, +0.1058550f,
  -0.1448025f, -0.0006151f, +0.1296121f, -0.0347941f, +0.1752266f, -0.0086685f, +0.1263520f, -0.0405161f,
  -0.0656805f, +0.1818895f, -0.0076426f, -0.0364511f, +0.1472104f, -0.0525191f, -0.0013149f, -0.1798649f,
  +0.1493373f, +0.1363244f, +0.2778291f, -0.0677060f, -0.1334653f, +0.0079105f, +0.1450667f, +0.1172089f,
  -0.2330136f, +0.0641477f, +0.1494632f, -0.0191369f, +0.0329281f, -0.1367149f, -0.1385232f, +0.1941856f,
  -0.2006075f, -0.0145400f, +0.2423090f, -0.2196543f, +0.4063452f, +0.0352570f, +0.3942186f, +0.2893459f,
  -0.0471504f, -0.1773939f, -0.1094670f, +0.0146702f, +0.0091488f, -0.1806736f, +0.0240715f, -0.1019965f,
  -0.1096029f, -0.0701661f, +0.0552379f, -0.0596115f, +0.0468160f, +0.0050021f, +0.0108581f, +0.4292064f,
  -0.5309536f, -0.2322453f, -0.0044542f, +0.1486986f, +0.3568104f, -0.1473274f, +0.1146145f, +0.1268348f,
  +0.2359855f, -0.2190715f, +0.3212768f, -0.0144550f, +0.0292638f, -0.1581317f, +0.1131690f, -0.1722932f,
  +0.1697206f, -0.1813523f, +0.1130150f, -0.1801975f, +0.0616743f, -0.0194383f, -0.0416472f, -0.0112793f,
  -0.2490642f, -0.0871838f, +0.2999468f, -0.1101377f, +0.2072599f, +0.0978034f, +0.0672616f, -0.0085296f,
  -0.0337895f, -0.0287229f, -0.0174444f, +0.0239923f, -0.1027160f, -0.0391813f, -0.0674745f, +0.1210849f
);

const float biases[4] = float[4](
  +0.0240983f, +0.0351900f, +0.0801472f, -0.0431717f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer46 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0783885f, -0.3200017f, +0.0730424f, -0.3511400f, +0.1924515f, -0.0797812f, -0.0316911f, +0.1388098f,
  +0.1214047f, -0.0072079f, -0.0162425f, -0.2750984f, +0.2181244f, +0.1955344f, +0.0523647f, +0.2952405f,
  -0.1377181f, -0.1670480f, -0.0198854f, +0.1491752f, +0.0386139f, -0.0880635f, -0.0078142f, +0.0552529f,
  +0.0653844f, -0.2674595f, +0.2200247f, +0.0891828f, -0.0807271f, +0.0424512f, +0.0207103f, +0.1099159f,
  +0.2085271f, -0.1519811f, +0.0789903f, +0.1134387f, -0.1032218f, +0.0194125f, +0.0683287f, +0.3820805f,
  +0.3424890f, +0.3505826f, -0.3363242f, +0.1257780f, -0.1595424f, -0.0869669f, -0.0881906f, +0.1585991f,
  +0.1528279f, +0.0866220f, +0.4315560f, -0.2268246f, +0.0874908f, -0.1728210f, +0.1061828f, +0.1836274f,
  -0.1996381f, -0.1691211f, -0.3738654f, -0.2729692f, +0.0139592f, +0.1261468f, -0.2080783f, -0.0416209f,
  -0.0137362f, +0.0645280f, -0.1268563f, -0.1879677f, +0.0960614f, -0.3754666f, -0.2669258f, +0.0500053f,
  +0.0881385f, +0.1934866f, +0.0558493f, -0.0065255f, -0.1475639f, +0.0902970f, -0.2270147f, -0.0701069f,
  +0.1646674f, +0.1718809f, -0.0269704f, -0.2121673f, -0.0691851f, +0.0119145f, +0.1937028f, -0.0385397f,
  -0.0854629f, -0.1432547f, +0.0081431f, +0.0174550f, +0.0735801f, +0.0221604f, +0.0598151f, +0.0113463f,
  -0.0404233f, -0.0055895f, +0.0406629f, -0.0934338f, -0.2414899f, +0.0314933f, -0.0155259f, +0.1280290f,
  -0.0583762f, +0.0964719f, -0.2769457f, -0.0493596f, +0.2048477f, -0.0709873f, +0.0272313f, +0.0381614f,
  -0.2175635f, +0.2569129f, +0.3588078f, +0.1815508f, +0.0649626f, -0.1585742f, +0.2692228f, +0.0570764f,
  +0.0902411f, -0.0363003f, +0.0294452f, +0.0587888f, -0.0621979f, +0.0143467f, -0.3537730f, -0.0520906f,
  -0.2152873f, +0.0569103f, -0.0487037f, -0.1244009f, +0.0866828f, -0.0256310f, +0.0566273f, -0.1242164f,
  -0.0376537f, +0.1432542f, -0.2212234f, +0.3003973f, +0.0233980f, +0.2485542f, +0.2691870f, -0.0829363f,
  -0.3374695f, -0.0784228f, -0.1092636f, -0.0785020f, +0.1699276f, +0.0924704f, +0.2399489f, +0.1566531f,
  -0.1520460f, -0.0382868f, -0.0583875f, -0.0408352f, +0.0500493f, +0.3067439f, +0.1173517f, -0.0057866f,
  -0.1675583f, -0.1687031f, +0.0410279f, -0.0123781f, +0.0367868f, +0.3200092f, +0.0831272f, +0.0593834f,
  -0.0526446f, -0.5591283f, -0.2094039f, -0.1288595f, +0.1277637f, -0.1434461f, +0.2225709f, -0.0955118f,
  -0.2654676f, -0.2533322f, +0.1401734f, -0.0554264f, -0.0638062f, +0.0642993f, +0.0245490f, -0.2347008f,
  -0.2597157f, +0.0319750f, +0.0637765f, +0.1500791f, +0.1325954f, -0.1635088f, -0.0249738f, -0.1305689f,
  -0.1967197f, -0.3623948f, +0.0539635f, -0.0512883f, -0.1288334f, +0.0455218f, -0.0701072f, +0.0823249f,
  +0.1107080f, -0.2294993f, +0.0315119f, -0.4103976f, +0.0639098f, -0.1043433f, +0.2508338f, +0.0309750f,
  -0.1676550f, +0.0184027f, -0.0288536f, -0.2482630f, -0.1579130f, +0.1621131f, +0.5119807f, +0.1521805f,
  -0.1113186f, -0.0692133f, -0.0358109f, +0.1675368f, -0.1171355f, -0.1217059f, +0.0580084f, +0.2016442f,
  +0.1531352f, +0.1434079f, +0.0362495f, +0.1082374f, +0.0458550f, +0.0796154f, +0.1759080f, +0.2147119f,
  +0.0852879f, +0.3214658f, +0.0219436f, +0.1544891f, -0.0139763f, +0.0033068f, -0.1747854f, +0.1984294f,
  -0.1764366f, +0.1451477f, -0.0750158f, +0.3510719f, +0.1340612f, +0.1025968f, -0.2474677f, +0.0724464f,
  -0.1373800f, -0.3448101f, +0.0853539f, -0.0409046f, +0.0275061f, -0.5520926f, -0.0631670f, -0.2392849f,
  -0.1384646f, +0.1475928f, +0.3592600f, +0.2355092f, -0.0963706f, -0.2032676f, +0.0460225f, -0.2350351f,
  -0.1964051f, +0.1747050f, -0.0932839f, +0.2772963f, -0.0560283f, +0.4703111f, +0.3054628f, +0.0139844f,
  +0.1695903f, -0.0923129f, +0.2635671f, -0.0381292f, -0.1585449f, -0.1801805f, +0.1782873f, -0.0640318f,
  +0.0967938f, -0.1646803f, +0.0726819f, +0.0797265f, -0.1497811f, -0.0130932f, +0.1182714f, +0.2302405f
);

const float biases[4] = float[4](
  -0.0318176f, -0.0322437f, +0.0988195f, -0.0024135f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer46 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1861917f, -0.1427903f, +0.0686702f, +0.1534747f, -0.1689582f, +0.0225266f, -0.0425267f, -0.1284276f,
  +0.0015889f, -0.6727555f, -0.1151609f, -0.5701224f, +0.2782598f, +0.5509111f, +0.0504106f, +0.0096421f,
  -0.0125176f, +0.1125552f, -0.0375262f, +0.1695703f, +0.0598871f, +0.0721699f, +0.1304205f, +0.0429610f,
  +0.0906051f, +0.0946388f, +0.1869584f, -0.1045189f, +0.1831144f, +0.0005982f, -0.0087277f, +0.0285611f,
  -0.0046217f, +0.0494664f, -0.2237904f, +0.3503011f, +0.6455786f, -0.2762772f, -0.0192640f, +0.2619897f,
  +0.1892280f, +0.2341213f, -0.5258729f, +0.2153761f, +0.2036036f, +0.2903458f, -0.1888498f, +0.0382868f,
  -0.0094011f, +0.1428194f, -0.3849026f, -0.2199600f, +0.1720672f, -0.0792982f, +0.1085589f, -0.0110812f,
  -0.1347086f, -0.2141772f, -0.7817963f, +0.2062423f, +0.0623587f, -0.2501418f, -0.0277903f, -0.2558934f,
  -0.1250063f, +0.2482928f, +0.0427017f, +0.0077288f, +0.1995560f, -0.2979720f, -0.0728361f, -0.0388167f,
  +0.0088860f, -0.1149615f, -0.0017653f, +0.1145131f, -0.2060057f, -0.0857354f, +0.0579310f, +0.0203590f,
  +0.2441773f, +0.5633453f, +0.0616712f, -0.1297131f, -0.4126873f, -0.0507302f, +0.0844948f, +0.0475928f,
  -0.2708618f, -0.3450932f, -0.1002602f, -0.1836400f, -0.0025984f, +0.3239048f, +0.3010020f, -0.0709876f,
  +0.1571992f, +0.1921965f, +0.6055266f, -0.1795872f, +0.0073660f, +0.2523107f, +0.0409264f, +0.0736572f,
  -0.2134664f, -0.1087081f, -0.1058607f, +0.2784598f, -0.8381228f, +0.3511996f, +0.0687911f, -0.2558079f,
  -0.0772979f, -0.4424099f, -0.5228974f, -0.2432212f, -0.0433895f, -0.0139896f, -0.0122640f, -0.0585999f,
  -0.0504514f, -0.2080253f, +0.6030410f, -0.0092696f, +0.0608705f, +0.0244439f, +0.2010102f, -0.0819786f,
  +0.1118802f, +0.1359043f, +0.9715676f, +0.2229231f, -0.1996641f, +0.3983293f, -0.4124551f, +0.0508279f,
  +0.3267072f, +0.0778889f, -0.3561606f, -0.0627152f, -0.2377976f, -0.2109394f, -0.0235922f, +0.1771740f,
  +0.0977606f, +0.2502972f, +0.1766525f, -0.2731561f, -0.3069598f, +0.0384269f, -0.1518599f, +0.1390929f,
  +0.3299401f, -0.1756846f, +0.0092889f, +0.3043150f, -0.2380356f, -0.1648972f, +0.1878312f, -0.1886130f,
  -0.1909805f, +0.4434494f, +0.0448159f, +0.2203544f, -0.1584666f, -0.1769278f, -0.1773855f, +0.0917246f,
  +0.1258345f, -0.0269010f, +0.2866142f, +0.0866357f, -0.2207986f, -0.0339545f, -0.0652180f, +0.2352700f,
  +0.3558413f, +0.3484460f, -0.1651613f, +0.2370661f, -0.1334427f, +0.3719402f, +0.0237459f, +0.1967397f,
  -0.1964694f, +0.1157639f, +1.3384682f, +0.2631132f, -0.3458598f, +0.0114379f, +0.0336275f, -0.1345344f,
  +0.1393567f, -0.2716895f, +0.1091931f, +0.3884920f, -0.1683980f, +0.2648402f, -0.1518901f, -0.0233712f,
  -0.2024275f, -0.4005909f, +0.5539189f, -0.0791748f, -0.1174083f, +0.6226108f, +0.1736375f, +0.2475664f,
  +0.3411670f, -0.3308030f, +0.4333181f, -0.1042778f, -0.1337561f, +0.3149906f, +0.1311338f, +0.3815436f,
  +0.3122281f, -0.2994839f, +0.0268338f, +0.3692688f, -0.0264625f, +0.0923951f, -0.4934327f, -0.1186029f,
  +0.2318278f, +0.4611066f, -0.0113348f, +0.0671167f, -0.1156053f, +0.1810979f, -0.0483654f, +0.1171745f,
  +0.3356948f, +0.0014314f, +0.2038954f, +0.2729509f, -0.2181624f, -0.3122758f, -0.3764791f, -0.1287177f,
  +0.2316319f, +0.2951214f, +0.1274085f, +0.3115128f, -0.2579802f, +0.0743605f, +0.0720481f, +0.1888178f,
  +0.2089095f, -0.1934561f, +0.2441573f, +0.1323818f, +0.6055117f, -0.3410399f, -0.0254282f, -0.2907770f,
  +0.4257843f, +0.0926952f, +0.1563149f, +0.1211371f, +0.1365590f, -0.0059215f, -0.1183961f, -0.1148185f,
  +0.0457380f, +0.1708679f, +0.0131244f, -0.0573317f, -0.0130328f, -0.0180360f, -0.3985069f, +0.1490619f,
  +0.2519706f, +0.0961678f, -0.3592687f, +0.3300808f, -0.1875388f, -0.1393359f, -0.1245121f, -0.3858523f,
  -0.2106406f, +0.3717271f, -0.0740557f, -0.2018061f, +0.1097001f, -0.0888519f, -0.1663729f, -0.1859876f
);

const float biases[4] = float[4](
  +0.0090349f, -0.0692876f, -0.0401771f, -0.0413328f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer47 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0830247f, -0.1143253f, +0.2249582f, +0.0211311f, +0.0294009f, -0.1970387f, +0.0823275f, +0.2021680f,
  -0.1527890f, +0.3937413f, -0.0576316f, +0.0756954f, +0.0513191f, -0.1069031f, -0.1358237f, -0.1417231f,
  +0.0992398f, +0.2552184f, +0.1681577f, -0.0389291f, +0.1055240f, +0.0391751f, +0.0376025f, +0.1192407f,
  +0.1063366f, +0.3454494f, +0.0512548f, +0.0882586f, -0.0188436f, +0.1534553f, -0.0300931f, +0.1333596f,
  +0.0192953f, +0.0038251f, +0.2127831f, +0.0675566f, +0.0497994f, +0.0832269f, +0.4174083f, +0.3281725f,
  +0.0424636f, +0.0310122f, +0.1976881f, -0.0302391f, +0.0262396f, +0.0032928f, +0.1060560f, +0.2941400f,
  -0.0184646f, +0.3677451f, +0.1758887f, -0.1245029f, +0.4302267f, -0.1115009f, +0.0222389f, -0.2101433f,
  +0.2409890f, -0.0207082f, -0.0345425f, +0.0457435f, +0.0543087f, -0.0432555f, +0.2031506f, +0.2065588f,
  +0.3367321f, +0.0895185f, +0.2473088f, +0.0001727f, +0.1602300f, +0.0420426f, -0.0522159f, -0.0651613f,
  +0.0073977f, -0.2281861f, +0.2834828f, -0.0181485f, -0.0749484f, +0.1056637f, +0.1483598f, +0.3303242f,
  -0.0008110f, +0.1705956f, +0.0269697f, -0.0235824f, -0.2305369f, -0.1706302f, +0.0089742f, -0.2393677f,
  +0.1448816f, -0.3291645f, -0.1663115f, +0.0584062f, -0.2304817f, -0.2374817f, +0.1633268f, +0.0762760f,
  -0.0650648f, -0.1543784f, -0.2160635f, -0.0158762f, -0.0527808f, +0.1300976f, -0.1734416f, +0.0710716f,
  +0.1555185f, -0.0653014f, +0.0714621f, +0.2767995f, -0.5551231f, -0.3363309f, -0.1252107f, +0.0378813f,
  +0.1484769f, -0.1496560f, -0.0458210f, -0.0199156f, -0.2392815f, +0.1063480f, -0.2405575f, +0.0376790f,
  +0.0309030f, -0.1483880f, +0.1765313f, -0.1173226f, +0.1881624f, -0.1599013f, +0.1894045f, +0.0388525f,
  +0.1307023f, -0.1722385f, -0.5330951f, +0.2900306f, -0.2112496f, +0.1004265f, -0.0153696f, -0.0615542f,
  -0.1315401f, -0.0893658f, +0.1330755f, -0.0006014f, +0.1284523f, -0.0925025f, +0.1602923f, +0.1253164f,
  -0.0439274f, +0.0837074f, +0.0303734f, -0.0425322f, +0.1744643f, +0.0020628f, +0.0881997f, -0.1099795f,
  +0.1291240f, -0.2028830f, -0.1368098f, +0.1172624f, -0.0687604f, -0.0740745f, +0.1642313f, +0.2786849f,
  -0.0929507f, +0.1071529f, -0.1972234f, +0.2652014f, -0.1996634f, +0.2055270f, +0.0839887f, +0.0452203f,
  -0.1081071f, -0.0599405f, -0.1526248f, +0.0624879f, -0.1453537f, +0.1503295f, -0.2327265f, -0.0864458f,
  -0.0770416f, -0.4082828f, +0.0485864f, +0.0223030f, +0.1694995f, +0.1435283f, -0.0306580f, +0.0478836f,
  -0.0670668f, -0.4197661f, +0.0797249f, +0.3785505f, -0.0251478f, +0.0502061f, +0.0300426f, -0.3692161f,
  +0.1429763f, +0.1564895f, -0.0163686f, -0.0253539f, -0.1042939f, +0.0325067f, -0.1962941f, +0.0064898f,
  -0.1080710f, -0.2331864f, -0.2702012f, +0.2039976f, -0.0766261f, +0.0522762f, -0.1136971f, +0.1855106f,
  +0.0489012f, -0.0903639f, -0.0480648f, +0.3135022f, +0.0398465f, +0.1337654f, -0.2072742f, -0.1251959f,
  +0.2463536f, +0.2148643f, -0.1072996f, -0.1747744f, -0.1720643f, +0.1830251f, -0.7577030f, -0.3090826f,
  -0.0304469f, -0.1979148f, +0.1891822f, +0.3263079f, -0.3103192f, -0.4043511f, -0.2625032f, +0.0672012f,
  +0.2542300f, -0.0060700f, -0.0799933f, +0.1010358f, +0.0101713f, +0.3599246f, +0.0219465f, +0.0341670f,
  -0.3486080f, +0.1744156f, +0.1074606f, +0.3988411f, -0.2696989f, +0.2421205f, -0.0825727f, -0.0970667f,
  -0.4933700f, -0.0818678f, -0.1243307f, -0.0104013f, +0.4750475f, +0.2439336f, -0.1684210f, +0.3299121f,
  -0.0641761f, +0.0273270f, +0.1208722f, +0.0868948f, -0.2780355f, +0.1840852f, -0.1048027f, -0.2599203f,
  -0.2581024f, -0.3539563f, -0.0842664f, +0.0235672f, +0.1771810f, +0.0087235f, +0.1458586f, +0.4132107f,
  +0.1012402f, +0.0003980f, -0.1626996f, -0.0359107f, -0.2189407f, +0.5990031f, -0.7716599f, -0.5871661f,
  -0.0116831f, +0.1717676f, -0.1503988f, +0.3813681f, -0.0543796f, +0.1437632f, -0.0849328f, +0.1844998f
);

const float biases[4] = float[4](
  +0.0183808f, -0.0512003f, -0.0367464f, -0.0243683f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer47 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0333904f, +0.0461685f, +0.0225642f, -0.0311973f, -0.1110277f, +0.1143124f, +0.1085979f, -0.1824144f,
  -0.0976659f, +0.4287566f, +0.1283530f, -0.2160224f, +0.0178221f, -0.1415646f, -0.0530386f, +0.0819600f,
  +0.0350218f, +0.3276847f, +0.2262118f, -0.0323143f, +0.2448881f, -0.0390362f, -0.0895436f, -0.1976239f,
  -0.1014369f, +0.1718674f, +0.2086414f, +0.0430321f, -0.1780095f, -0.2951213f, -0.2230907f, -0.0019217f,
  -0.0691821f, +0.1211878f, -0.0871180f, +0.0552675f, -0.1942278f, +0.0154939f, +0.0782422f, +0.0710360f,
  -0.1296453f, +0.0954892f, +0.2491999f, -0.0683189f, -0.0508458f, -0.1403893f, -0.0750681f, +0.0895481f,
  +0.0522337f, +0.2585190f, -0.0887875f, +0.0351067f, -0.1304296f, +0.0174215f, -0.2017743f, +0.0678192f,
  +0.1507565f, +0.3906573f, -0.0738361f, -0.0541093f, -0.1105373f, +0.0800928f, +0.0050523f, +0.0487815f,
  +0.2628147f, +0.1136689f, +0.2213923f, +0.1183584f, +0.1104053f, +0.0105353f, +0.1586911f, +0.2268327f,
  +0.0152780f, +0.0980793f, -0.0822782f, -0.0239567f, +0.0257896f, +0.0576499f, -0.0608731f, -0.0667242f,
  +0.0495448f, -0.4610120f, -0.2216339f, +0.2303129f, -0.2493967f, -0.0879780f, +0.0257366f, +0.0795658f,
  -0.0213371f, -0.0233007f, -0.0718920f, +0.0299060f, -0.0128009f, +0.0183479f, -0.0295650f, -0.1021940f,
  -0.1529605f, -0.0962542f, -0.0530951f, -0.0491946f, -0.0701746f, -0.1176360f, +0.0046871f, -0.1192384f,
  -0.0531371f, -0.9489605f, +0.4202643f, -0.2482284f, +0.4559207f, -0.0143129f, +0.8000177f, +0.1968496f,
  -0.2954999f, -0.1428550f, -0.1389752f, +0.1422602f, +0.2470392f, -0.1487403f, +0.1434776f, -0.1389141f,
  +0.0070820f, -0.1835053f, -0.0640811f, +0.0593715f, -0.2154218f, -0.0913339f, -0.0062887f, +0.0139656f,
  -0.2620479f, +0.3983733f, -0.1232606f, -0.0255447f, +0.2483848f, +0.0885083f, -0.0954175f, -0.2862618f,
  -0.1066810f, +0.3437562f, -0.0079650f, +0.0864119f, +0.0769082f, +0.0519819f, -0.1260041f, -0.0096466f,
  +0.0044939f, +0.2506868f, +0.0712997f, -0.0050958f, +0.0434677f, -0.1047338f, -0.1580930f, -0.0096918f,
  +0.2356221f, -0.2096842f, +0.0959926f, +0.0597674f, -0.0206496f, +0.1576755f, +0.3086376f, +0.0428110f,
  -0.0324650f, -0.2795404f, -0.1883442f, +0.0592573f, -0.1302450f, +0.0161170f, +0.0818764f, +0.0128582f,
  +0.1842011f, +0.1032095f, +0.2500373f, -0.0473893f, -0.2235952f, +0.1830882f, +0.0660590f, +0.3342046f,
  +0.1724254f, +0.3768797f, +0.6000423f, -0.2221267f, +0.5508567f, +0.1972283f, +0.3500440f, +0.0317689f,
  -0.0607062f, +0.1121528f, +0.0706256f, -0.1099773f, +0.1702282f, -0.1224756f, +0.1159930f, -0.0738972f,
  -0.2323999f, +0.0731172f, -0.0554068f, +0.0724753f, +0.1246501f, +0.0573340f, +0.0993709f, -0.1529678f,
  -0.2544040f, +0.0259924f, -0.1975108f, +0.2421097f, -0.0334080f, +0.0459727f, -0.1588510f, +0.0691985f,
  -0.1675318f, -0.1305705f, -0.0825823f, -0.0502539f, -0.1465798f, -0.0436629f, -0.0138765f, +0.0025761f,
  +0.1458805f, -0.0381648f, -0.3759152f, +0.1546110f, -0.1265447f, +0.0432686f, +0.1234619f, +0.1697609f,
  -0.0403183f, -0.2111449f, +0.0267111f, +0.1182894f, +0.0834023f, -0.1500530f, +0.0743441f, +0.0691122f,
  -0.1434419f, -0.2147803f, -0.1501726f, +0.2945796f, -0.0527499f, -0.0358643f, -0.0247443f, -0.0211079f,
  -0.0257091f, -0.4483893f, +0.0039855f, +0.3863754f, +0.1126407f, +0.1007331f, +0.2238228f, +0.1628181f,
  -0.1134546f, -0.2010739f, +0.0216054f, +0.2085114f, -0.0841010f, +0.3742388f, +0.0815693f, +0.1415421f,
  -0.2260643f, -0.0544584f, -0.3509625f, +0.4639527f, +0.4400423f, +0.0824659f, +0.3056497f, +0.1464126f,
  -0.0800267f, -0.2707026f, -0.3037276f, +0.2322932f, -0.1095097f, +0.2833823f, +0.0124141f, +0.1012203f,
  -0.1980151f, -0.2219749f, -0.1364436f, -0.0563281f, -0.0676053f, +0.0474834f, -0.2161517f, -0.0661552f,
  -0.0524566f, -0.2283500f, +0.0587871f, -0.2024931f, +0.0339231f, -0.0895638f, -0.0726099f, -0.0218271f
);

const float biases[4] = float[4](
  +0.0723794f, -0.0057286f, +0.0038810f, -0.0984535f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer48 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!BIND FEAT_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

#define TEX_BIND_L3_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L3_TEX FEAT_L0_tex
#define TEX_BIND_L3_POS FEAT_L0_pos
#define TEX_BIND_L3_SIZE FEAT_L0_size
#define TEX_BIND_L3_PT FEAT_L0_pt

const float kernels[288] = float[288](
  -0.1994620f, +0.1766424f, +0.0805696f, -0.1738774f, -0.0078922f, -0.4254484f, -0.0490753f, +0.1967838f,
  -0.2070272f, +0.0023907f, +0.3743339f, +0.5044613f, -0.2847258f, +0.0608020f, +0.1065644f, -0.0003989f,
  -0.0774296f, -0.1157511f, -0.2357490f, +0.4313251f, -0.0721867f, -0.0672147f, -0.0305115f, +0.2909191f,
  -0.1594325f, -0.0172933f, +0.2368634f, +0.0782266f, -0.1034000f, +0.1924231f, -0.1088431f, -0.2598345f,
  -0.0028678f, +0.0055448f, +0.1707415f, -0.2994263f, -0.0407164f, +0.1630358f, -0.2239342f, +0.0250337f,
  -0.0101565f, +0.0188799f, -0.0858030f, -0.3416523f, -0.1993164f, +0.1941497f, -0.1652338f, +0.1827235f,
  +0.1903956f, +0.3172577f, +0.3128037f, +0.0258768f, -0.0331938f, +0.0935692f, -0.0424259f, +0.5009527f,
  +0.0404769f, +0.0635482f, -0.0162394f, -0.0145789f, +0.0012171f, -0.0856632f, -0.1978666f, +0.0508985f,
  -0.1496251f, +0.0404907f, +0.0549739f, -0.1854343f, +0.1957842f, -0.1202186f, +0.0983611f, +0.2519386f,
  -0.2361287f, -0.1249194f, -0.0995584f, -0.1585720f, -0.0849747f, -0.2515582f, +0.0534591f, -0.0297513f,
  +0.1073414f, +0.0795817f, -0.1349178f, -0.1353653f, -0.0209398f, -0.0013611f, -0.0386942f, -0.1185942f,
  +0.1513434f, +0.1067705f, +0.0207581f, -0.1969117f, -0.1048818f, +0.1155925f, -0.1105647f, -0.2412901f,
  -0.0664635f, +0.0905788f, +0.1172848f, +0.3023316f, -0.1587367f, +0.1416067f, +0.1262676f, +0.2137049f,
  +0.0777757f, +0.0143426f, +0.2037464f, -0.1832187f, +0.1497362f, +0.2904733f, +0.0508442f, +0.1165423f,
  -0.1521205f, +0.0422404f, +0.0204380f, +0.0556143f, +0.2489792f, +0.0632921f, -0.0183602f, +0.1436337f,
  -0.1800889f, -0.0450185f, +0.1297044f, -0.0316792f, -0.0201540f, -0.2124383f, +0.1195571f, +0.0426903f,
  -0.0806435f, -0.0085721f, +0.0955097f, +0.1634770f, -0.1569932f, +0.0652700f, -0.0432474f, +0.0149084f,
  +0.0479239f, +0.0270296f, +0.0820667f, +0.0119202f, -0.1688249f, +0.0832397f, +0.0176668f, +0.0492945f,
  -0.0321257f, -0.2116102f, -0.1042863f, -0.3125567f, -0.0091583f, +0.0591659f, -0.0170685f, -0.7026584f,
  -0.0044059f, -0.1042780f, -0.0600709f, -0.0526059f, +0.1003050f, -0.0303651f, +0.2998301f, -0.1698796f,
  -0.0293970f, +0.1131242f, -0.0357154f, -0.1233835f, +0.2702658f, -0.0424425f, +0.0514919f, +0.1353770f,
  +0.0960756f, -0.0361652f, +0.2326345f, -0.0037713f, +0.0862754f, +0.2126798f, -0.0636771f, -0.1622976f,
  -0.0251850f, -0.0910632f, -0.1324612f, -0.1630011f, -0.1859763f, +0.0189879f, -0.1269745f, +0.1524701f,
  -0.1034781f, -0.2419544f, -0.1873770f, +0.2099803f, +0.0900596f, -0.2479373f, +0.1776447f, +0.1915941f,
  -0.0116817f, -0.1857600f, -0.1315583f, -0.0462574f, +0.1629409f, +0.0352951f, +0.2803094f, -0.2669875f,
  +0.5057817f, -0.0284173f, +0.0932568f, +0.0498505f, +0.0660316f, +0.2515605f, +0.2181671f, -0.0277813f,
  +0.0701877f, +0.0059752f, +0.1110743f, -0.0093901f, +0.1422407f, +0.0644973f, -0.0458237f, -0.1594072f,
  -0.1115677f, -0.1162964f, -0.2400011f, -0.1533376f, -0.0653363f, -0.4584147f, +0.0070351f, +0.0497745f,
  +0.1164242f, -0.0202391f, +0.0704132f, -0.5588025f, -0.1142799f, -0.0927030f, -0.2574946f, -0.0824455f,
  +0.2084669f, +0.3755999f, +0.1091360f, -0.2452091f, +0.1682331f, +0.0848164f, +0.0354465f, -0.2471639f,
  -0.3181640f, +0.0174499f, -0.0235311f, +0.0841628f, -0.1968217f, +0.0177739f, +0.2632521f, +0.2003628f,
  +0.0684432f, +0.1528111f, -0.1352464f, +0.4379832f, -0.0406026f, -0.5296491f, +0.1399782f, +0.2631430f,
  -0.0386210f, -0.1971848f, -0.0627144f, +0.3085299f, -0.2617996f, -0.0372668f, -0.0490299f, +0.0986500f,
  -0.1042638f, -0.3010347f, -0.3626368f, -0.0251576f, +0.0100036f, +0.0893646f, +0.2109711f, -0.2223136f,
  +0.0368204f, +0.0568396f, -0.0643746f, +0.1478535f, +0.0314248f, +0.3676366f, +0.1030490f, -0.1345516f,
  +0.1927451f, +0.2287225f, +0.3370198f, +0.0226592f, +0.0038975f, +0.2940553f, +0.0118724f, -0.0650592f
);

const float biases[4] = float[4](
  -0.0188783f, -0.0167000f, +0.0964722f, +0.0597356f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)) + TEX_BIND_L3_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer48 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!BIND FEAT_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

#define TEX_BIND_L3_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L3_TEX FEAT_L1_tex
#define TEX_BIND_L3_POS FEAT_L1_pos
#define TEX_BIND_L3_SIZE FEAT_L1_size
#define TEX_BIND_L3_PT FEAT_L1_pt

const float kernels[288] = float[288](
  +0.0332677f, -0.2565277f, -0.4425879f, +0.3882224f, -0.0344303f, -0.0773753f, +0.0326655f, -0.1570405f,
  -0.2033551f, +0.3419861f, -0.1214729f, -0.2573983f, -0.0396397f, +0.1031211f, -0.0674267f, +0.1825523f,
  -0.1593667f, -0.0725138f, -0.1101293f, +0.2430281f, -0.0474492f, +0.0752923f, +0.0439567f, -0.0703018f,
  +0.0665481f, +0.2969364f, -0.2417214f, -0.2340005f, -0.0035391f, -0.7099246f, -0.2578983f, -0.1600126f,
  +0.0872020f, +0.4921098f, +0.0146053f, +0.1174983f, +0.3823254f, -0.4081028f, -0.2537639f, -0.0564160f,
  +0.0566401f, -0.1620101f, +0.2431923f, +0.0944710f, -0.0417597f, -0.0103653f, -0.0592228f, +0.0926234f,
  +0.0869024f, +0.3986292f, -0.1626593f, +0.0775472f, -0.0448140f, -0.0128503f, -0.0941349f, +0.1197598f,
  -0.2203523f, +0.0761733f, -0.2220307f, -0.0134330f, -0.0391560f, -0.0198262f, -0.1224592f, -0.2625643f,
  -0.1127051f, -0.0729584f, -0.2945490f, -0.1173763f, +0.0658972f, -0.1346626f, -0.0422316f, +0.0449993f,
  +0.0213848f, +0.3579779f, +0.1196381f, +0.2763827f, +0.1124568f, -0.0324706f, +0.2265280f, -0.1583375f,
  -0.1200294f, -0.1164671f, +0.2578998f, +0.6321443f, -0.1886179f, +0.1889578f, +0.1126207f, +0.1211917f,
  -0.1020231f, -0.1594920f, -0.3429132f, +0.2563629f, +0.1566208f, +0.0887583f, +0.3481234f, -0.2360553f,
  -0.2138314f, +0.0875006f, +0.1843512f, -0.0627653f, +0.1649183f, +0.2990298f, +0.0654446f, +0.1256149f,
  +0.0211845f, -0.2894899f, +0.3953527f, +0.3748247f, +0.3253717f, +0.1075824f, -0.7225194f, +0.0159463f,
  +0.0896907f, -0.1520560f, -0.2599632f, -0.7883773f, -0.0559765f, -0.0726639f, -0.5175065f, -0.1545387f,
  +0.1266902f, +0.0583152f, +0.3090640f, -0.0706495f, +0.2659186f, +0.2996725f, +0.1415194f, -0.0104766f,
  +0.1706885f, -0.1453454f, +0.4508626f, -0.3026062f, -0.1700090f, +0.2799278f, -0.2033066f, -0.1252117f,
  -0.0693163f, -0.1168911f, -0.1970185f, +0.0257842f, +0.0572674f, -0.2143372f, +0.0843143f, -0.0770207f,
  -0.2294830f, +0.2189790f, +0.0205629f, -0.1377261f, -0.0361719f, -0.2698399f, -0.0604917f, +0.1195492f,
  -0.0640247f, +0.5161658f, -0.2442816f, -0.1751592f, +0.1455250f, -0.4542116f, -0.0363950f, +0.2134765f,
  +0.1739674f, +0.1036796f, +0.0538034f, -0.2040927f, -0.0028528f, -0.1418608f, -0.0134666f, +0.0604523f,
  -0.5532708f, +0.0260559f, -0.2357113f, +0.3035162f, -0.1301294f, -0.0801363f, +0.1831570f, +0.2169744f,
  -0.5249118f, +0.5661106f, +0.1588754f, +0.1760719f, +0.0000854f, -1.1650381f, -0.2657580f, -0.1236419f,
  -0.1029790f, +0.1208877f, +0.2596546f, -0.2610895f, -0.2175243f, +0.0678435f, -0.2452403f, +0.3141652f,
  -0.3880194f, +0.0887295f, +0.2433558f, -0.0840250f, -0.0590879f, +0.0954959f, -0.0151056f, +0.3199277f,
  +0.1135028f, -0.0198001f, -0.5540308f, +0.0352443f, +0.0047471f, -0.0796060f, -0.1067272f, -0.0007686f,
  +0.1427697f, +0.0336198f, +0.2510255f, +0.0789602f, -0.0888449f, +0.2253849f, +0.1025247f, -0.2460668f,
  -0.1155602f, +0.1947788f, +0.4216644f, -0.0014278f, -0.3123610f, +0.0376771f, -0.1633279f, +0.0605466f,
  -0.4864847f, +0.2868957f, -0.1199041f, -0.0764522f, -0.1738024f, -0.1450614f, -0.2041394f, +0.3303113f,
  +0.1067033f, +0.1720602f, -0.0075307f, -0.0088941f, -0.3102909f, +0.0934428f, -0.0328120f, +0.2688949f,
  +0.0661447f, +0.1188928f, +0.3260477f, +0.1359242f, -0.3081153f, -0.1218273f, -0.0720935f, +0.1275103f,
  -0.0501166f, +0.0437985f, +0.1760515f, +0.0708643f, -0.3336562f, +0.3941222f, +0.1246237f, -0.0436559f,
  -0.2391576f, -0.0117510f, +0.3182482f, -0.0997201f, +0.0600773f, +0.1204758f, -0.1495651f, +0.2705023f,
  -0.1583711f, -0.0772970f, +0.0048121f, +0.0946131f, -0.1067423f, -0.0549516f, +0.0203668f, +0.0731323f,
  -0.2593921f, -0.0587685f, -0.1150389f, +0.2276902f, -0.0170607f, -0.1881304f, -0.3396225f, -0.2196012f,
  -0.1707173f, +0.2365804f, +0.3556396f, +0.0227214f, -0.1045403f, +0.0689195f, -0.0416210f, +0.4471151f
);

const float biases[4] = float[4](
  -0.0459384f, +0.0573152f, -0.0727375f, -0.0532482f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)) + TEX_BIND_L3_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer49 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0519150f, +0.2143933f, -0.1593747f, +0.0379919f, -0.0822652f, -0.0290152f, -0.1837588f, -0.1504278f,
  +0.0176106f, +0.0953460f, -0.0057475f, -0.0520575f, -0.0417454f, -0.0500201f, -0.0624084f, +0.0159116f,
  +0.0900048f, +0.0524955f, +0.2090711f, -0.0489523f, +0.1479938f, +0.0404200f, +0.1210516f, +0.0677241f,
  +0.0751551f, -0.2261355f, -0.1188517f, +0.0513640f, -0.1341948f, -0.0856783f, +0.1003288f, -0.1161367f,
  +0.0440333f, -0.1186552f, +0.0224443f, -0.3897285f, -0.0052382f, +0.0038252f, +0.2395768f, +0.0400077f,
  -0.0781984f, +0.0859994f, -0.2543203f, +0.2377125f, -0.0341756f, +0.0830191f, -0.0993550f, +0.0017091f,
  -0.0763180f, +0.0742125f, +0.0143706f, +0.0069954f, +0.0604794f, +0.0077455f, -0.0057492f, -0.0653087f,
  -0.0881559f, +0.1218082f, -0.1568772f, +0.0341758f, -0.1249723f, +0.0396953f, -0.1218019f, -0.0387440f,
  -0.0407751f, -0.0320207f, +0.0546005f, -0.0214339f, +0.0986617f, +0.0174133f, +0.0445296f, -0.0216139f,
  +0.0020499f, -0.0956546f, -0.0370879f, +0.0199824f, -0.0101362f, -0.0011215f, +0.0422502f, +0.0043705f,
  +0.0590627f, +0.0034154f, -0.1530767f, +0.0877868f, -0.0827224f, -0.0605980f, -0.0266859f, -0.0587052f,
  -0.0980296f, +0.2456067f, +0.1180916f, -0.0746810f, +0.1213095f, +0.0014230f, -0.0763503f, -0.0077387f,
  +0.0109960f, -0.2440271f, -0.0061988f, +0.0017720f, +0.0453123f, -0.0256254f, +0.1142464f, -0.0466270f,
  +0.0190354f, +0.0881947f, -0.1581994f, -0.0332307f, -0.1432018f, -0.1662134f, +0.0284466f, -0.3407006f,
  -0.0865530f, -0.0252699f, -0.2457083f, +0.1179959f, -0.1822570f, +0.1205230f, -0.0310775f, +0.2275837f,
  -0.0668518f, +0.0891138f, -0.0762539f, +0.0211126f, +0.0199158f, +0.0274237f, -0.0628440f, -0.0355294f,
  +0.1402405f, +0.1821145f, +0.0183403f, +0.0718784f, -0.0159573f, +0.0676446f, -0.0950257f, -0.0528645f,
  +0.0978258f, +0.2040125f, +0.2413578f, -0.1114062f, +0.1976100f, +0.0663833f, +0.1500028f, +0.0808323f,
  +0.0055708f, -0.0933373f, -0.0639898f, +0.0483667f, -0.0546960f, +0.0227504f, +0.0330957f, +0.0217018f,
  -0.0058646f, +0.3034064f, +0.1574254f, -0.0857856f, +0.1033891f, -0.0000201f, -0.1176359f, -0.0383349f,
  +0.0396039f, -0.1841480f, -0.0275281f, +0.0466904f, -0.0333906f, +0.0394327f, +0.0869541f, +0.0553316f,
  +0.1183985f, +0.2117706f, +0.1410419f, -0.0490534f, +0.2091072f, -0.0838826f, +0.0061204f, -0.0541320f,
  +0.0025235f, +0.3773470f, -0.1109796f, -0.1617711f, +0.0681455f, -0.0049586f, +0.0332131f, +0.1382713f,
  +0.0427375f, +0.0292216f, -0.0715443f, +0.1356952f, +0.1415836f, +0.0878876f, +0.0574273f, -0.0856074f,
  +0.0080706f, +0.1517619f, +0.0034378f, -0.0430975f, -0.0209122f, -0.0093684f, -0.0387220f, -0.1087334f,
  -0.1459246f, -0.3243346f, -0.2446366f, -0.0663717f, -0.4875329f, -0.0745985f, -0.0865721f, +0.0521795f,
  -0.2189421f, -0.1823167f, -0.1698094f, +0.1093508f, +0.1044781f, -0.0246660f, -0.0547300f, -0.1739196f,
  +0.0135108f, -0.1874367f, -0.0292837f, +0.0350581f, -0.0056581f, +0.0091333f, +0.0961522f, +0.0338913f,
  -0.0920227f, +0.1453249f, -0.0979421f, +0.0408443f, -0.0980721f, -0.0253060f, -0.1518078f, -0.1056463f,
  +0.0621705f, +0.0820265f, +0.1215268f, -0.0308806f, +0.0579051f, +0.0596848f, +0.0234432f, +0.0564558f,
  +0.0258904f, +0.1664868f, +0.0916614f, -0.0621727f, +0.1427060f, +0.0393288f, -0.0271184f, -0.0424142f,
  +0.3105995f, +0.0081831f, -0.0495229f, +0.0232203f, +0.1184024f, -0.2537877f, +0.1519415f, +0.0420679f,
  -0.2292825f, +0.2013098f, -0.1332553f, +0.0669060f, +0.1219724f, +0.0759460f, -0.0088794f, +0.0345404f,
  -0.0302886f, +0.1022643f, -0.1279296f, +0.0128516f, -0.1150452f, +0.0308169f, -0.1195241f, -0.0652396f,
  +0.0565790f, +0.0297234f, +0.0633930f, -0.0958479f, -0.0732028f, -0.0782910f, -0.0169547f, -0.1382925f,
  -0.0127505f, +0.0473885f, -0.0491066f, +0.0324205f, -0.0619131f, +0.0527329f, +0.0034715f, +0.0372387f
);

const float biases[4] = float[4](
  +0.0721188f, +0.0645915f, +0.0699754f, +0.0696879f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ACNet b24 Layer50 L0
//!WIDTH LUMA.w 2 *
//!HEIGHT LUMA.h 2 *
//!BIND TMP1_L0
//!COMPONENTS 1

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

vec4 hook() {
    vec2 fcoord = fract(TEX_BIND_L0_POS * TEX_BIND_L0_SIZE);
    vec2 pos = TEX_BIND_L0_POS + (vec2(0.5f) - fcoord) * TEX_BIND_L0_PT;

    ivec2 icoord = ivec2(fcoord * vec2(2.0f));
    int index = icoord.y * 2 + icoord.x;

    vec4 r = TEX_BIND_L0_TEX(pos);

    return vec4(clamp(float[4](r.x, r.y, r.z, r.w)[index], 0.0f, 1.0f), 0.0f, 0.0f, 1.0f);
}
