//!HOOK LUMA
//!DESC ARNet b24 Layer0 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND LUMA
//!SAVE FEAT_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF LUMA_texOff
#define TEX_BIND_L0_TEX LUMA_tex
#define TEX_BIND_L0_POS LUMA_pos
#define TEX_BIND_L0_SIZE LUMA_size
#define TEX_BIND_L0_PT LUMA_pt

const float kernels[36] = float[36](
  -0.4666879f, +0.1588297f, +0.2610213f, -0.2523761f, +0.3551734f, +0.3561407f, -0.4151160f, -0.0914708f,
  +0.4128894f, +0.1649627f, -0.0457513f, -0.0519460f, +0.4041258f, -0.1407080f, +0.4304572f, +0.4351206f,
  -0.4610624f, -0.1060834f, -0.4432383f, +0.4811998f, -0.4296748f, -0.6403707f, -0.0765371f, -0.4378746f,
  +0.0396822f, -0.3244770f, +0.0205947f, +0.0458090f, -0.3542934f, -0.3048648f, +0.4636859f, +0.4618999f,
  +0.0088168f, +0.0756044f, -0.4169642f, +0.1273772f
);

const float biases[4] = float[4](
  -0.0558469f, -0.0048097f, +0.1855348f, -0.0099452f
);

vec4 hook() {
    const vec4 r0 = vec4(
        TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)).x
    );
    const vec4 r4 = vec4(
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)).x
    );
    const float r8 = TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)).x;

    float sum[4] = biases;
    for(int n = 0; n < 4; n++) {
        const vec4 k0 = vec4(kernels[n * 9 + 0], kernels[n * 9 + 1], kernels[n * 9 + 2], kernels[n * 9 + 3]);
        const vec4 k4 = vec4(kernels[n * 9 + 4], kernels[n * 9 + 5], kernels[n * 9 + 6], kernels[n * 9 + 7]);
        const float k8 = kernels[n * 9 + 8];
        sum[n] += (dot(r0, k0) + dot(r4, k4) + r8 * k8);
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer0 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND LUMA
//!SAVE FEAT_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF LUMA_texOff
#define TEX_BIND_L0_TEX LUMA_tex
#define TEX_BIND_L0_POS LUMA_pos
#define TEX_BIND_L0_SIZE LUMA_size
#define TEX_BIND_L0_PT LUMA_pt

const float kernels[36] = float[36](
  +0.3027902f, -0.9691963f, +0.3643251f, +0.4145025f, -0.2093111f, -0.3886699f, -0.2469763f, +0.6644530f,
  +0.2434598f, +0.1556518f, +0.7638136f, -0.4476635f, +0.2127898f, -0.2296860f, -0.6387866f, -0.5597342f,
  +0.0129439f, +0.6640940f, +0.1449257f, -0.3954624f, -0.3042103f, +0.4531651f, -0.1068431f, +0.9811865f,
  +0.3963934f, -1.0160323f, -0.1144866f, +0.1146922f, +0.1466665f, +0.5296686f, +0.0622789f, -0.5431379f,
  -0.2154986f, +0.4176637f, +0.2794600f, -0.4885436f
);

const float biases[4] = float[4](
  -0.0126229f, +0.0319835f, -0.0256207f, -0.0720476f
);

vec4 hook() {
    const vec4 r0 = vec4(
        TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)).x
    );
    const vec4 r4 = vec4(
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)).x
    );
    const float r8 = TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)).x;

    float sum[4] = biases;
    for(int n = 0; n < 4; n++) {
        const vec4 k0 = vec4(kernels[n * 9 + 0], kernels[n * 9 + 1], kernels[n * 9 + 2], kernels[n * 9 + 3]);
        const vec4 k4 = vec4(kernels[n * 9 + 4], kernels[n * 9 + 5], kernels[n * 9 + 6], kernels[n * 9 + 7]);
        const float k8 = kernels[n * 9 + 8];
        sum[n] += (dot(r0, k0) + dot(r4, k4) + r8 * k8);
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer1 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND FEAT_L0
//!BIND FEAT_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L0_TEX FEAT_L0_tex
#define TEX_BIND_L0_POS FEAT_L0_pos
#define TEX_BIND_L0_SIZE FEAT_L0_size
#define TEX_BIND_L0_PT FEAT_L0_pt

#define TEX_BIND_L1_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L1_TEX FEAT_L1_tex
#define TEX_BIND_L1_POS FEAT_L1_pos
#define TEX_BIND_L1_SIZE FEAT_L1_size
#define TEX_BIND_L1_PT FEAT_L1_pt

const float kernels[288] = float[288](
  -0.0728869f, -0.1041653f, +0.1238641f, +0.5007982f, -0.0621857f, +0.3494993f, -0.0842402f, +0.0030291f,
  -0.1037596f, -0.1392469f, -0.0082515f, +0.2953429f, -0.2663491f, -0.2423859f, -0.5381171f, -0.1213320f,
  +0.3732879f, -0.3021282f, +0.0686195f, -0.1053980f, +0.3667983f, -0.0454315f, -0.2517468f, -0.0796021f,
  -0.0290590f, +0.0740227f, -0.1193780f, +0.2975003f, -0.2105722f, -0.7568437f, +0.0198682f, -0.0461305f,
  +0.2391573f, -0.1485150f, +0.0821456f, +0.5648301f, -0.6487156f, +0.2520652f, -0.6020519f, -0.1605287f,
  -0.1535444f, -0.0659066f, -0.0386643f, -0.0982626f, -0.2657700f, +0.0544875f, -0.2331911f, -0.2146424f,
  +0.0642461f, +0.0551418f, -0.2249663f, +0.2929395f, -0.1036718f, +0.1188457f, -0.4772155f, -0.0535162f,
  -0.1256506f, -0.2344690f, +0.1269337f, +0.4505953f, -0.6671431f, +0.3238449f, -0.6067173f, +0.1186639f,
  +0.0725926f, +0.1175402f, +0.0946223f, +0.2436017f, -0.1092160f, -0.3769144f, -0.1403293f, -0.0244984f,
  -0.1808713f, +0.1935675f, +0.1028324f, +0.6490506f, -0.2717651f, +0.0169322f, -0.1588287f, -0.0892980f,
  +0.2014485f, +0.0820540f, -0.0185677f, +0.1171621f, -0.3537276f, -0.0233887f, -0.1913867f, -0.1658571f,
  -0.2787517f, +0.2668315f, +0.0336888f, -0.0372418f, -0.5590920f, -0.1455399f, -0.0796880f, +0.2431412f,
  -0.4457097f, -0.0124264f, +0.0379415f, -0.0042475f, -0.3471603f, +0.1248320f, -0.3565428f, +0.2221429f,
  -0.1923754f, -0.1018749f, -0.0149482f, +0.0133009f, +0.0125383f, +0.1455956f, -0.0512230f, +0.1360475f,
  -0.0777935f, +0.1006198f, -0.2580717f, -0.4148776f, -0.6733937f, +0.0842391f, +0.0369565f, -0.0030159f,
  -0.2888148f, -0.1223778f, +0.2047065f, +0.1218394f, -0.1002625f, +0.0134674f, -0.1858013f, +0.2228467f,
  +0.2413872f, -0.1898158f, -0.1763472f, -0.2927077f, -0.2595993f, +0.1178914f, -0.0712787f, +0.1455668f,
  -0.1424619f, +0.0445583f, -0.2227186f, -0.0866496f, +0.0507010f, -0.0822974f, +0.1869874f, -0.2113294f,
  -0.0238239f, +0.1038501f, +0.0168363f, +0.0356667f, -0.1739609f, -0.1201043f, +0.0810261f, +0.1297764f,
  +0.1251958f, +0.2967356f, +0.0691296f, -0.0682344f, +0.0127027f, -0.3383006f, +0.2399433f, +0.2630878f,
  +0.1015975f, +0.0072194f, -0.1162160f, +0.2579238f, +0.0270071f, +0.0282035f, +0.1118806f, +0.1893987f,
  -0.1770947f, -0.2545905f, +0.0006572f, +0.3744188f, +0.0734930f, -0.0717476f, -0.0974149f, -0.1824124f,
  -0.0226018f, +0.4788992f, -0.1116748f, +0.2555560f, +0.0245869f, -0.2281065f, +0.2456859f, -0.1059819f,
  -0.0744081f, +0.1145665f, +0.1076484f, +0.2004590f, +0.0341638f, +0.1816825f, +0.0991495f, +0.0955720f,
  +0.2977498f, +0.0110137f, -0.0935516f, -0.1016188f, +0.0900368f, -0.2887431f, +0.0141015f, -0.1937940f,
  +0.1754082f, +0.1155728f, +0.0608624f, +0.0635289f, +0.2544141f, +0.0196064f, +0.1943967f, +0.0608369f,
  +0.2468111f, -0.3160922f, +0.0911349f, +0.4070733f, +0.4683006f, -0.4360533f, +0.1283865f, -0.1031266f,
  +0.1156022f, -0.1000371f, -0.2099373f, -0.0175993f, +0.4232632f, -0.0313850f, -0.1805160f, -0.1672840f,
  -0.1126748f, +0.0652569f, -0.2672504f, -0.1670450f, +0.6579213f, +0.2472507f, -0.6369927f, +0.1610462f,
  -0.3663918f, +0.2079097f, +0.1814884f, -0.1148519f, +0.4270182f, -0.5585911f, +0.1415839f, -0.1753068f,
  +0.1010691f, +0.1914686f, +0.0491077f, +0.3140401f, -0.2878881f, +0.2660971f, -0.1194931f, -0.3901319f,
  -0.1834248f, -0.0347095f, +0.2371606f, +0.5559672f, -0.1285054f, +0.0924753f, -0.0881953f, -0.2646781f,
  -0.8202543f, +0.1558006f, +0.0871085f, +0.6610391f, +1.0405641f, +0.2394449f, +0.3894285f, +0.0074943f,
  -0.2936537f, -0.1647489f, -0.0353482f, +0.1471317f, +0.1333432f, +0.1220728f, -0.0041968f, -0.0050157f,
  +0.0278602f, -0.2135910f, -0.1565585f, -0.1534703f, -0.6789619f, +0.1642263f, +0.0503971f, -0.0282267f,
  -0.3872496f, +0.2310021f, -0.0282400f, +0.2940524f, +0.7040811f, +0.1135141f, +0.2955452f, -0.0065341f
);

const float biases[4] = float[4](
  -0.2209779f, +0.0996670f, +0.0951406f, -0.0344565f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer1 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND FEAT_L0
//!BIND FEAT_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L0_TEX FEAT_L0_tex
#define TEX_BIND_L0_POS FEAT_L0_pos
#define TEX_BIND_L0_SIZE FEAT_L0_size
#define TEX_BIND_L0_PT FEAT_L0_pt

#define TEX_BIND_L1_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L1_TEX FEAT_L1_tex
#define TEX_BIND_L1_POS FEAT_L1_pos
#define TEX_BIND_L1_SIZE FEAT_L1_size
#define TEX_BIND_L1_PT FEAT_L1_pt

const float kernels[288] = float[288](
  -0.0281006f, -0.0862009f, -0.3478431f, +0.3265084f, -0.4098915f, +0.0947623f, +0.3191853f, +0.2163098f,
  -0.0402890f, +0.1021861f, -0.1922209f, +0.3940845f, -0.5320792f, -0.2482885f, +0.3779332f, -0.0687697f,
  -0.0263411f, +0.2394973f, +0.0269852f, +0.0394027f, +0.2875346f, +0.2763085f, +0.1045183f, +0.2956581f,
  -0.1606934f, -0.3263933f, +0.1045801f, -0.2956166f, -0.6199082f, +0.0038605f, -0.5609776f, +0.4605515f,
  -0.1200373f, +0.0859455f, -0.1242895f, -0.6723530f, -0.4337873f, +0.7443994f, -0.5188510f, -0.1074302f,
  +0.1145784f, +0.0421412f, -0.2229564f, -0.2626068f, +0.1708691f, +0.2378307f, -0.1854198f, +0.2332744f,
  -0.4377173f, +0.1132571f, +0.2403933f, +0.0970937f, -0.1604410f, +0.2294772f, -0.1036974f, +0.0564426f,
  +0.0506385f, -0.1716982f, +0.0546892f, -0.7978866f, -0.4400392f, +0.0602184f, -0.0815895f, +0.1888056f,
  +0.0825945f, -0.1696899f, +0.0886738f, -0.3919861f, -0.0895924f, +0.2461733f, +0.0274997f, +0.0374636f,
  +0.0555166f, +0.0597766f, -0.0852348f, +0.1758601f, -0.4334170f, -0.1376586f, +0.2086269f, -0.1126389f,
  -0.0172507f, +0.0593338f, +0.1325376f, +0.3986728f, -0.6933405f, -0.1997530f, +0.0103737f, +0.0167392f,
  -0.0832772f, +0.2312978f, +0.0379136f, -0.1520681f, -0.1883605f, +0.2550479f, -0.0257735f, +0.1307240f,
  -0.1420490f, -0.1091663f, +0.1140198f, +0.4399076f, +0.1680013f, +0.1129248f, -0.2709392f, -0.3120794f,
  -0.0436211f, +0.2804103f, -0.2173936f, +0.2192639f, -0.1581734f, +0.3579361f, +0.0318312f, +0.1167917f,
  +0.1405613f, -0.1654771f, +0.0070645f, -0.0994365f, +0.2068670f, -0.3154425f, +0.1190963f, -0.0854760f,
  -0.1400055f, -0.3254303f, +0.2428214f, +0.4538463f, +0.1322493f, -0.0263040f, +0.0199746f, +0.2417523f,
  -0.0112977f, +0.1602394f, -0.1361241f, +0.3011445f, +0.5189458f, -0.0981997f, +0.2503279f, -0.2156845f,
  -0.1604796f, +0.1006097f, +0.1044115f, +0.1287412f, +0.0300165f, -0.1512041f, +0.0268958f, -0.1611088f,
  -0.1078544f, -0.1022895f, +0.1412440f, +0.0460705f, +0.4101771f, +0.2592901f, -0.4117383f, -0.0095498f,
  -0.3175799f, +0.1348963f, -0.0049242f, -0.2101372f, +0.6815424f, +0.3370377f, -0.5313684f, -0.2314115f,
  -0.0891683f, -0.0764747f, -0.0359137f, +0.3666013f, +0.6128545f, +0.3826068f, -0.4071499f, -0.3403998f,
  -0.2408810f, +0.1475831f, +0.1699513f, +0.3321261f, +0.1460477f, -0.1262645f, -0.2420933f, +0.0871072f,
  +0.0390143f, +0.0189391f, -0.3054011f, -0.0951170f, +0.5163117f, +0.0528221f, -0.4523501f, +0.0717297f,
  -0.0251957f, -0.1889101f, -0.0050249f, -0.4195797f, +0.1970015f, -0.2292307f, -0.2014038f, -0.0181399f,
  -0.2441592f, -0.3226618f, -0.1402868f, +0.1544660f, -0.0452796f, -0.0082807f, -0.0022554f, -0.1750897f,
  +0.2819982f, +0.0383845f, +0.0266787f, +0.0650193f, +0.1257967f, -0.4701343f, -0.2415298f, -0.1043814f,
  +0.2832898f, -0.2771602f, -0.1088215f, -0.0256252f, -0.2448936f, -0.3178218f, -0.0719893f, -0.0430237f,
  -0.1159005f, +0.0895379f, +0.2200775f, -0.1788379f, +0.0428584f, -0.2099101f, -0.1893365f, +0.0770715f,
  -0.0998467f, -0.0354481f, +0.1687591f, +0.3477990f, +0.2236922f, +0.0892364f, +0.2393558f, +0.1095021f,
  +0.1132768f, -0.0623847f, +0.1049055f, -0.2531536f, +0.1658013f, +0.3336486f, +0.2593842f, +0.1560849f,
  -0.0415255f, +0.0603277f, -0.2559642f, -0.1501298f, +0.4401334f, +0.0471467f, -0.2742076f, +0.2465217f,
  -0.5282649f, +0.1134566f, +0.1530547f, -0.0434989f, +0.4396748f, -0.5031694f, -0.3859765f, +0.1916710f,
  +0.0962713f, -0.4990300f, +0.0672043f, -0.6427456f, -0.3316114f, -0.2913880f, -0.2429890f, -0.1504920f,
  +0.3703605f, +0.2687950f, -0.1939414f, +0.4843894f, +0.2466184f, +0.2100863f, -0.3767189f, -0.0035835f,
  -0.4368525f, +0.2272811f, -0.1451601f, +0.9287321f, +0.1736534f, +0.4050232f, +0.2567205f, +0.3650975f,
  +0.2044946f, -0.0295560f, +0.2148934f, +0.1253594f, -0.0814521f, -0.1723921f, -0.2352133f, +0.0800730f
);

const float biases[4] = float[4](
  +0.0630634f, +0.2149815f, -0.0423725f, -0.0946104f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer2 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND FEAT_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L2_TEX FEAT_L0_tex
#define TEX_BIND_L2_POS FEAT_L0_pos
#define TEX_BIND_L2_SIZE FEAT_L0_size
#define TEX_BIND_L2_PT FEAT_L0_pt

const float kernels[288] = float[288](
  -0.1464265f, -0.0122492f, -0.1684032f, +0.1234181f, +0.0234987f, +0.0418387f, -0.0094269f, -0.0161590f,
  +0.0959396f, -0.2729559f, -0.0184595f, +0.0698835f, -0.3410976f, -0.2019918f, -0.3225249f, +0.4423592f,
  +0.0337008f, +0.1611857f, -0.2594616f, -0.0279235f, +0.2488365f, -0.1465809f, +0.2452653f, +0.1039003f,
  -0.0984540f, +0.0568885f, -0.1351405f, -0.2043337f, +0.2395535f, +0.3171910f, -0.1094294f, +0.2481397f,
  +0.1074849f, -0.2941993f, -0.4137313f, -0.1878119f, -0.5584179f, -0.0500233f, -0.0798270f, +0.7514383f,
  +0.3641081f, -0.2058562f, +0.0946399f, +0.0541676f, +0.1678489f, -0.0476969f, +0.1551425f, -0.0391117f,
  -0.1984118f, +0.0554503f, +0.0012636f, -0.3967296f, +0.1696516f, +0.1924003f, -0.1465491f, -0.0929107f,
  +0.2623672f, -0.3719377f, +0.2111551f, +0.0519247f, -0.4401471f, -0.0297572f, -0.2112256f, +0.0764466f,
  +0.2125462f, +0.1506327f, -0.0683938f, -0.1059596f, -0.1119046f, +0.3100958f, -0.0037583f, -0.0226415f,
  +0.1554918f, -0.0754374f, -0.0623847f, +0.1258123f, +0.0644407f, +0.1245403f, +0.1422928f, -0.0706439f,
  +0.2027311f, -0.1208649f, -0.3372099f, -0.0861067f, +0.1909432f, +0.3997417f, -0.0120905f, +0.3027470f,
  -0.0278253f, -0.1462888f, -0.2795370f, -0.0377498f, -0.0256327f, +0.2671189f, -0.1959053f, -0.1480750f,
  +0.2362348f, -0.2007555f, -0.2723258f, -0.3025708f, -0.0049883f, +0.2434024f, -0.1340887f, -0.1096999f,
  +0.3254686f, +0.0194595f, -0.4160905f, +0.1024202f, -0.0598440f, +0.0356338f, -0.2073230f, -0.1419554f,
  +0.0997305f, -0.0874437f, -0.2169378f, -0.0330181f, +0.0004289f, -0.1953681f, +0.0019606f, -0.1121024f,
  -0.0675221f, -0.0341098f, -0.3511928f, -0.1212055f, -0.1396766f, -0.1028252f, -0.1089825f, +0.0059769f,
  +0.5069114f, -0.2137429f, -0.4021982f, +0.0934626f, -0.0538197f, +0.0525453f, -0.1717362f, -0.1084281f,
  -0.2284664f, -0.0140402f, -0.0742135f, +0.0872100f, -0.3186278f, -0.2226385f, +0.1209131f, -0.2034917f,
  +0.0913475f, +0.1136120f, +0.1694981f, +0.0166185f, -0.1695343f, -0.2237101f, +0.0773407f, -0.0539017f,
  -0.1723700f, +0.1028099f, +0.0663550f, -0.1516029f, +0.0586730f, -0.0405095f, +0.0441738f, -0.3081023f,
  +0.0702336f, +0.2184413f, +0.3538222f, +0.1503982f, +0.0272391f, -0.0775522f, -0.0500859f, -0.0328016f,
  +0.1047646f, +0.2817695f, +0.1153762f, +0.0993806f, +0.1149980f, +0.0939126f, -0.1983307f, +0.2931248f,
  -0.6396949f, +0.0065700f, +0.3272997f, -0.0823223f, -0.1415430f, -0.0152064f, +0.0045219f, +0.0102167f,
  -0.1820126f, +0.0803239f, -0.0760408f, -0.0041158f, +0.1596376f, +0.0451262f, +0.0649118f, +0.0426512f,
  -0.2934162f, +0.0033278f, +0.4641780f, +0.0694155f, +0.1120768f, -0.0212052f, +0.0649487f, +0.0058966f,
  -0.4682833f, +0.1007746f, -0.0740094f, +0.0934680f, -0.3283325f, +0.1774713f, +0.0674600f, -0.0195346f,
  +0.0024725f, -0.1922144f, +0.1073227f, +0.0335204f, +0.3071622f, -0.2450845f, -0.0344790f, +0.0714425f,
  +0.0197291f, +0.2036244f, -0.0049724f, +0.0520501f, -0.3775805f, -0.0877662f, -0.2174006f, +0.0018086f,
  +0.0597887f, -0.0513353f, -0.2465553f, +0.0733779f, +0.0978498f, -0.0553758f, -0.0717422f, -0.4824169f,
  -0.0162631f, +0.1372520f, -0.5572478f, -0.0382662f, -0.1651601f, -0.0273770f, -0.1958659f, -0.5395706f,
  +0.0865211f, +0.2573062f, -0.0664329f, +0.1205815f, -0.1804888f, -0.0257702f, +0.0580415f, +0.0140618f,
  -0.1563618f, -0.0493302f, -0.0840310f, -0.2533654f, +0.4691317f, +0.3021178f, +0.4757587f, -0.2615807f,
  -0.0027052f, -0.1031038f, -0.2474839f, +0.0044581f, -0.5935786f, +0.0985824f, -0.0129585f, -0.2733313f,
  +0.0201040f, +0.1053541f, -0.1157818f, +0.5451269f, -0.0536489f, -0.0625056f, +0.0511643f, +0.2005519f,
  +0.0288270f, +0.0521958f, +0.1482130f, +0.2026808f, -0.2021128f, -0.2351246f, +0.2378763f, -0.0700412f,
  +0.1210635f, -0.4571773f, +0.2700222f, -0.0757947f, -0.1210798f, -0.2412848f, -0.2428237f, +0.1084351f
);

const float biases[4] = float[4](
  +0.2028588f, -0.0600877f, +0.3281132f, +0.2024287f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer2 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND FEAT_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L2_TEX FEAT_L1_tex
#define TEX_BIND_L2_POS FEAT_L1_pos
#define TEX_BIND_L2_SIZE FEAT_L1_size
#define TEX_BIND_L2_PT FEAT_L1_pt

const float kernels[288] = float[288](
  +0.1940091f, -0.2592059f, +0.0316645f, -0.0305705f, +0.0150538f, +0.0296547f, +0.3296809f, -0.1710514f,
  +0.1459899f, +0.0308589f, -0.0924881f, +0.2401438f, +0.0357873f, +0.2474346f, +0.4899758f, -0.1480015f,
  +0.0940029f, -0.0115586f, -0.3167856f, -0.1371307f, -0.1030356f, +0.0888089f, -0.2109786f, -0.2063292f,
  +0.0027943f, -0.3697266f, -0.1648460f, -0.2817234f, +0.1385720f, -0.0006984f, +0.3041859f, -0.2289600f,
  -0.2161823f, +0.0122104f, +0.0515387f, -0.2130414f, -0.2278173f, +0.2258241f, +0.3485214f, -0.0971857f,
  -0.0133785f, -0.1049925f, -0.0530571f, +0.0495845f, +0.0240149f, +0.2654744f, -0.2559625f, +0.0800120f,
  +0.1596576f, +0.0413528f, +0.0960332f, +0.0038786f, -0.1293284f, -0.1504438f, -0.0659649f, -0.0461981f,
  +0.3048494f, +0.1180545f, +0.0369016f, -0.3177478f, -0.3451621f, -0.2257623f, +0.1214663f, +0.0352650f,
  +0.2502958f, +0.0790222f, -0.1866033f, -0.3402261f, +0.0845943f, -0.0967324f, +0.0007593f, -0.0385242f,
  -0.0027238f, +0.0348460f, +0.0056279f, -0.0467966f, -0.1161693f, -0.3291804f, -0.0162120f, -0.0706873f,
  -0.0219332f, +0.3621663f, +0.0272848f, -0.1609915f, +0.1387330f, +0.1156582f, -0.0337559f, +0.1901162f,
  +0.0435107f, +0.0814567f, -0.1134254f, -0.0057301f, +0.0252089f, +0.0721628f, -0.0555179f, +0.3017258f,
  -0.2622414f, +0.3366570f, +0.1392342f, -0.2478242f, -0.2620713f, -0.0799906f, -0.0399298f, -0.0653794f,
  -0.0887862f, -0.0506566f, +0.3876652f, -0.5161340f, -0.1728443f, +0.2382886f, +0.0383784f, +0.0790870f,
  -0.0520569f, +0.3200513f, +0.2324183f, +0.1000897f, +0.4334605f, +0.3010278f, -0.0196814f, +0.1848786f,
  -0.1355495f, +0.1664090f, +0.1918493f, -0.0491651f, +0.0535689f, +0.1307507f, -0.0793534f, -0.1372297f,
  -0.2274338f, -0.0669343f, +0.0980303f, -0.3136123f, +0.0377139f, -0.0856624f, -0.0422359f, +0.0241325f,
  +0.1553826f, -0.3360994f, -0.1152621f, -0.3490376f, +0.2198844f, -0.2046482f, +0.2013017f, -0.0052180f,
  +0.2136465f, +0.0038203f, -0.1555915f, -0.0592947f, -0.1044027f, -0.0103684f, -0.2379555f, -0.0041901f,
  +0.3141652f, +0.0737873f, -0.2679321f, +0.1116511f, -0.1815156f, +0.0366576f, -0.1531899f, -0.0012256f,
  +0.1623029f, +0.0441757f, +0.0224442f, +0.0490822f, -0.0162228f, +0.0649340f, +0.0952501f, -0.2158622f,
  +0.2433583f, -0.1287469f, -0.2285414f, +0.1315822f, +0.0287263f, -0.1713980f, -0.1524885f, +0.0503896f,
  +0.4383778f, -0.1263112f, -0.0789900f, +0.2724382f, +0.6327168f, -0.3205170f, -0.0439152f, -0.1270813f,
  +0.6366580f, -0.2260543f, -0.2105884f, -0.2083038f, +0.7182791f, -0.0908590f, +0.4635030f, -0.3586520f,
  +0.1440782f, +0.2051394f, +0.0516067f, +0.0963472f, -0.1279263f, +0.0310724f, -0.3109171f, -0.0702293f,
  -0.0192279f, +0.1918313f, -0.0235991f, +0.2919746f, +0.7685350f, +0.2986692f, +0.0488388f, +0.1394017f,
  +0.1534746f, +0.0311098f, +0.3974117f, -0.0221473f, +0.0090331f, +0.2176414f, +0.4560871f, +0.0612356f,
  +0.2068181f, -0.0016467f, -0.2263213f, +0.0023817f, +0.0076114f, -0.1554500f, -0.1989001f, +0.0666776f,
  -0.0304888f, +0.2904429f, -0.0930122f, +0.0151287f, +0.0379740f, -0.2098409f, -0.1730831f, -0.0708270f,
  +0.1230470f, -0.1079509f, -0.0893423f, -0.0317218f, +0.0307270f, -0.1189579f, +0.1643096f, -0.2724503f,
  -0.0295472f, -0.0533892f, +0.2133066f, +0.4039377f, +0.1050550f, -0.1906016f, -0.1830009f, -0.1675333f,
  -0.0952185f, -0.0216142f, +0.1126132f, +0.7298978f, -0.0891909f, +0.2501397f, +0.0592933f, -0.3393427f,
  -0.1366407f, -0.0190123f, +0.0072197f, +0.0918661f, -0.1929858f, +0.2678739f, +0.1442155f, -0.3610770f,
  -0.1571584f, +0.3363936f, -0.1702937f, -0.1119881f, -0.1591360f, +0.2377870f, -0.2437641f, +0.0094518f,
  +0.2086767f, +0.2702821f, -0.4295829f, +0.3489732f, -0.3123095f, +0.1423201f, -0.1679716f, -0.1112748f,
  +0.2279790f, +0.0066274f, -0.2138482f, +0.0917386f, -0.0180111f, +0.0941723f, +0.0024715f, -0.0505779f
);

const float biases[4] = float[4](
  +0.1085158f, -0.2577346f, +0.1311623f, -0.1014691f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer3 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0723121f, -0.0622434f, +0.1899813f, -0.2743459f, +0.3439981f, -0.3070111f, +0.3072051f, -0.1803810f,
  -0.3577820f, -0.6956887f, +0.0117223f, -0.6222649f, +0.1007473f, +0.0997691f, +0.0978464f, -0.3972935f,
  -0.1348114f, -0.1410739f, +0.4689885f, +0.1004962f, -0.0237893f, -0.4311677f, +0.0541829f, +0.0966986f,
  +0.0770310f, +0.1917520f, +0.1963023f, -0.3641087f, +0.2792474f, -0.3824810f, -0.0177183f, -0.1567386f,
  -0.0872166f, -0.2324764f, -0.0152645f, +0.3817602f, +0.1887252f, +0.0267264f, -0.1270338f, -0.3470576f,
  +0.1293713f, +0.2471239f, +0.2450858f, +0.1881353f, -0.0518671f, -0.1833482f, -0.0219596f, +0.0600260f,
  +0.0297703f, +0.1360354f, -0.0495451f, +0.1993204f, -0.1983538f, +0.0219747f, -0.2536019f, -0.0006892f,
  -0.0046346f, +0.1405565f, -0.0808840f, -0.3631738f, -0.2528977f, +0.8475859f, -0.1992562f, -0.0970843f,
  -0.0069230f, +0.0151687f, +0.1273737f, -0.6622001f, +0.0475054f, -0.0095831f, +0.0034170f, -0.0887496f,
  -0.1785347f, -0.6035990f, +0.0658232f, -0.0531030f, +0.1855500f, +0.2354531f, -0.0399275f, -0.1150322f,
  +0.2853587f, +0.0860186f, -0.2127360f, +0.3451754f, +0.1258799f, +0.1051155f, -0.0600069f, -0.3071561f,
  -0.2326783f, -0.2301116f, -0.4505776f, +0.1735412f, +0.5629837f, +0.7057862f, -0.1207189f, -0.1765224f,
  +0.1101799f, +0.3244238f, -0.1972768f, +0.0115348f, -0.0055972f, +0.0487607f, +0.1720676f, +0.1042043f,
  +0.0376684f, +1.2667828f, -0.2149608f, -0.3122346f, -0.2126539f, -0.3918328f, +0.0920288f, +0.2492311f,
  -0.0897372f, +0.1881673f, +0.0222837f, +0.4409099f, -0.1382336f, +0.1535360f, -0.0968690f, +0.1902685f,
  -0.0965522f, +0.7801285f, +0.2114686f, +0.2627973f, +0.3906220f, +0.3099554f, -0.0154715f, -0.3160782f,
  -0.7621197f, +0.4494388f, +0.3618840f, +0.3847349f, +0.6711677f, -0.4300314f, +0.0000007f, -0.2804280f,
  -0.4523829f, -0.2286993f, +0.3839882f, -0.0506972f, +0.6627347f, +0.1293691f, +0.0588163f, -0.4506064f,
  +0.2608581f, +0.0430413f, -0.1742845f, -0.1488128f, -0.0698371f, -0.2012250f, +0.1163023f, +0.1828967f,
  +0.0475391f, +0.2464815f, -0.0290278f, -0.0382152f, -0.0755781f, +0.0767762f, +0.3258972f, +0.0302044f,
  +0.3389186f, -0.1952491f, -0.2105465f, -0.0692292f, -0.2594350f, -0.0208819f, -0.0141916f, -0.2618680f,
  -0.1067343f, +0.3268760f, -0.0010146f, +0.0484004f, -0.2214661f, +0.1421129f, -0.0592335f, -0.0095282f,
  +0.1636710f, +0.4267900f, -0.0419942f, -0.1148753f, +0.1333210f, -0.2942566f, +0.1588990f, -0.0630908f,
  -0.0502618f, +0.1122238f, +0.1283159f, +0.0538120f, +0.0080186f, -0.1514602f, -0.2241595f, -0.1871741f,
  -0.0155139f, +0.0234003f, -0.2964561f, +0.0710402f, +0.0363526f, +0.1401606f, -0.1730148f, -0.1202021f,
  +0.2067181f, +0.0424709f, -0.1959581f, +0.1843434f, -0.1144213f, -0.3308871f, +0.1696282f, +0.0438338f,
  -0.1235782f, +0.2676234f, +0.1125717f, +0.0206582f, +0.2138869f, +0.1144648f, -0.0389261f, +0.0149081f,
  -0.0443048f, -0.0557650f, -0.0899914f, -0.1833115f, +0.0539844f, +0.6028086f, -0.2030334f, -0.0195321f,
  -0.1375050f, -0.6053032f, -0.0054647f, +0.3238364f, -0.0707697f, +0.0442325f, -0.0750678f, +0.2274727f,
  +0.3263569f, +0.1472341f, +0.0947521f, +0.0898539f, -0.1076581f, -0.3459746f, -0.3009042f, -0.0575559f,
  +0.0744295f, -0.8820595f, +0.0910656f, -0.1469085f, +0.3057460f, -0.4193927f, -0.0217508f, +0.1750906f,
  -0.1713903f, -0.8057796f, +0.3048374f, -0.3711904f, +0.3095045f, +0.7309300f, -0.6572322f, +0.3140481f,
  +0.1707401f, +0.1871740f, -0.0774161f, -0.1358624f, +0.2131690f, +0.3873433f, +0.3552810f, -0.1637034f,
  +0.1446030f, +0.4961953f, -0.1129758f, -0.4906778f, +0.1320403f, +0.9807216f, -0.3476802f, +0.2272517f,
  -0.0931235f, +0.3532693f, +0.1391347f, -0.3437193f, -0.4090238f, +0.3972209f, +0.0759081f, -0.1710873f,
  +0.5257894f, -0.2272673f, +0.1075233f, -0.1633867f, -0.4847879f, -0.1597232f, -0.1132128f, +0.0912392f
);

const float biases[4] = float[4](
  -0.4613464f, -0.1748454f, +0.1753681f, -0.3694277f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer3 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2040298f, +0.5010988f, +0.0117417f, -0.0955453f, +0.1698678f, -0.1319841f, +0.0964656f, +0.0163338f,
  +0.0665028f, +0.2917530f, -0.1671261f, +0.0183845f, -0.2916305f, -0.0392748f, -0.0181415f, +0.0063172f,
  +0.1819295f, +0.1916545f, +0.0369617f, -0.2182756f, -0.0280630f, -0.0371636f, +0.1052364f, +0.1807290f,
  +0.0440849f, -0.1441630f, -0.2337680f, +0.4155377f, -0.2187791f, -0.6013341f, +0.1892149f, -0.1682262f,
  +0.0471908f, +0.0147724f, -0.1070738f, -0.4460478f, -0.3884086f, +0.0719115f, +0.4952384f, +0.0223497f,
  +0.1452409f, +0.1043280f, -0.2175632f, +0.0337439f, -0.2475915f, +0.1299750f, +0.0367213f, -0.3246766f,
  -0.1717557f, -0.2518939f, +0.0775549f, -0.3041757f, -0.2029975f, +0.0057075f, -0.3692845f, -0.1404300f,
  -0.3354466f, -0.3028268f, +0.3942369f, -0.0666229f, -0.4645365f, +1.0093173f, +0.1107620f, +0.2679457f,
  -0.2781911f, -0.0818319f, +0.1874422f, -0.2606593f, -0.0726267f, -0.3055531f, +0.1267947f, +0.0346370f,
  +0.0681571f, +0.4275049f, +0.0398931f, +0.1374750f, +0.0941669f, +0.1807387f, +0.0737550f, -0.1198592f,
  -0.1811641f, +0.0704550f, -0.0246801f, -0.2157204f, -0.0310981f, +0.1055731f, +0.0291201f, -0.1223356f,
  -0.2878961f, -0.3275076f, +0.1653870f, +0.1528110f, -0.2418678f, +0.0131375f, -0.1569182f, -0.0952385f,
  +0.1125671f, -0.3864000f, +0.0603638f, -0.2609057f, +0.0812068f, -0.2345262f, +0.2152926f, -0.0473157f,
  +0.0692958f, -0.4794898f, +0.1779440f, +0.5778439f, -0.2162091f, -0.6340563f, +0.2064825f, -0.1926389f,
  -0.0652782f, -0.7024296f, -0.0363612f, -0.5812733f, -0.1091751f, +0.0855808f, -0.1611515f, -0.1913090f,
  +0.3104568f, -0.5268670f, -0.0657405f, +0.4467604f, +0.1847072f, -0.0100445f, +0.0519380f, +0.1938612f,
  +0.2359402f, -0.0426169f, -0.2673755f, -0.5065501f, -0.6969626f, +0.6449607f, -0.2700441f, +0.2030261f,
  +0.0769115f, -0.3181640f, -0.1316990f, -0.2085312f, -0.1691854f, -0.1349194f, +0.2548460f, -0.2812788f,
  +0.5032635f, +0.5824901f, +0.1428350f, -0.3452204f, +0.0565675f, +0.5648091f, +0.2200492f, -0.2513503f,
  +0.0607545f, -0.2901586f, +0.3979522f, -0.5353402f, +0.3363933f, -0.0734325f, -0.6152928f, -0.3038791f,
  -0.0598320f, -0.1085163f, -0.2975062f, +0.3589803f, -0.2576693f, -0.3788244f, +0.3089812f, +0.2127346f,
  +0.4335369f, +0.2552588f, -0.1802453f, -0.4239000f, -0.1755942f, -0.3403131f, -0.2814887f, -0.5413072f,
  +0.4204296f, -0.0985277f, -0.0603677f, -0.1267478f, -0.1909214f, -0.3444563f, -0.4393891f, -0.6726322f,
  +0.0985819f, +0.3601567f, -0.0645094f, +0.0662323f, -0.1816217f, +0.0695902f, +0.0431431f, -0.2526949f,
  +0.0425616f, +0.1334821f, -0.0381385f, -0.0181176f, +0.0084666f, -0.1906817f, +0.2083940f, -0.0021698f,
  +0.1034885f, -0.4124941f, +0.1354018f, -0.0410513f, -0.2338017f, -0.3300795f, -0.0478654f, +0.0221249f,
  -0.0526666f, +0.0091114f, -0.0782950f, -0.1167076f, -0.0077823f, +0.0748537f, -0.1436750f, +0.0622115f,
  +0.1910763f, +0.0369483f, +0.1361886f, -0.4929681f, +0.2670357f, +0.3963208f, +0.2102871f, -0.0018776f,
  +0.2305691f, -0.4120731f, -0.1091090f, +0.0971688f, -0.1098277f, -0.1153519f, -0.2304493f, -0.1337202f,
  -0.2703913f, -0.1231303f, +0.1147271f, -0.0301052f, +0.1962197f, -0.0587566f, +0.0932502f, -0.2744857f,
  -0.0234258f, -0.3817141f, +0.0938075f, -0.0972444f, +0.2259002f, +0.3085428f, +0.2460770f, -0.1129383f,
  -0.3767987f, -0.2686887f, -0.0288729f, -0.0530585f, +0.3391221f, -0.1763545f, -0.0747377f, +0.1997956f,
  +0.0052817f, -0.1435921f, -0.0850476f, -0.0573954f, -0.0102958f, -0.1239002f, +0.1001702f, +0.2307005f,
  +0.1537414f, +0.1452964f, +0.0117007f, -0.1557335f, +0.5427688f, +0.1782148f, +0.5084624f, -0.1308965f,
  +0.1634342f, -0.0945352f, -0.3337454f, +0.0516427f, +0.2383552f, -0.1761914f, +0.1533978f, -0.0125118f,
  -0.2681583f, +0.1772635f, -0.1368419f, +0.1866053f, +0.1806817f, +0.0213347f, +0.1740336f, +0.1091089f
);

const float biases[4] = float[4](
  +0.0497167f, +0.0818954f, +0.1068010f, +0.0582815f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer4 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1437874f, -0.0908416f, +0.1374280f, -0.4320791f, -0.2658435f, +0.1827784f, +0.1672723f, -0.5007818f,
  -0.1103265f, +0.2246000f, +0.0400823f, -0.1890837f, +0.1850128f, -0.0535571f, -0.2504037f, +0.0546324f,
  +0.1727291f, -0.8928170f, -0.0099364f, +0.1079592f, -0.1005074f, -0.2869425f, -0.0980376f, -0.1839728f,
  +0.1182659f, +0.3175849f, +0.0219445f, +0.1002048f, -0.3490625f, -0.0134531f, +0.1663546f, +0.0552272f,
  -0.0420233f, +0.1295832f, -0.0476135f, -0.1328026f, -0.1402824f, +0.2831809f, +0.1573234f, -0.1498129f,
  +0.2953391f, +0.2112923f, -0.3860887f, +0.1772936f, -0.1458685f, +0.0097826f, +0.6216665f, -0.0575608f,
  -0.2019731f, -0.1457232f, +0.0920117f, -0.1425320f, +0.0137169f, +0.0657419f, +0.1916801f, +0.3035990f,
  +0.3392925f, +0.3970027f, -0.2212653f, -0.1939288f, +0.2361304f, +0.4399309f, +0.2694052f, -0.0409357f,
  +0.2224007f, -0.0578228f, +0.0299442f, +0.5448134f, -0.2020721f, -0.1318525f, +0.4133674f, +0.0544938f,
  +0.1124669f, -0.4526427f, -0.2011546f, -0.0469011f, -0.1760073f, -0.0480825f, -0.1729378f, +0.0397903f,
  -0.0434648f, -0.2521056f, -0.1062741f, +0.0144271f, +0.2909125f, -0.1446285f, -0.0852853f, +0.2722581f,
  -0.0817493f, -0.4167576f, +0.2289880f, +0.3599261f, +0.2978536f, -0.0204728f, +0.0840785f, +0.3061112f,
  +0.0532406f, -0.1198833f, -0.4847319f, +0.4103982f, -0.1471546f, -0.2701685f, -0.1111569f, +0.1599031f,
  +0.0875977f, -0.3584238f, -0.0666901f, -0.1843619f, +0.6503288f, +0.1852712f, +0.2128924f, +0.3430096f,
  -0.0281624f, -0.0790092f, -0.0399420f, +0.5384442f, -0.0940231f, +0.2260097f, -0.1445326f, +0.2294402f,
  +0.3236153f, +0.2770112f, +0.2049800f, +0.1498570f, -0.1536877f, -0.1369982f, -0.1277973f, +0.4171906f,
  -0.0134781f, +0.0075574f, +0.1179103f, +0.0466838f, +0.1028243f, +0.1534110f, +0.1843695f, +0.0518667f,
  +0.0471675f, +0.3322439f, +0.2296470f, +0.4077008f, -0.2298388f, +0.3450050f, +0.2616532f, +0.1268964f,
  -0.0985595f, +0.1260330f, +0.1488318f, +0.2047535f, +0.0041214f, +0.2050845f, +0.0101399f, -0.0396685f,
  +0.0743970f, +0.0939724f, +0.1927524f, -0.1834623f, -0.1758822f, -0.2313301f, -0.1585201f, -0.1717742f,
  -0.5449424f, +0.0159225f, +0.1052288f, +0.2280570f, +0.0817524f, +0.2423549f, +0.2299478f, +0.1069616f,
  -0.0891992f, -0.0844567f, -0.0102415f, -0.0061994f, -0.0973522f, -0.0859445f, +0.0806839f, +0.1867501f,
  -0.3777344f, -0.0834033f, +0.0982632f, -0.0521792f, -0.0804060f, -0.1345421f, -0.3425552f, +0.0736000f,
  -0.5426775f, +0.0640409f, +0.1512903f, -0.0032473f, +0.0917298f, -0.0382769f, +0.0475119f, +0.1926325f,
  -0.6595153f, +0.0640995f, -0.0629506f, -0.0880105f, -0.0177973f, +0.0417513f, -0.0691579f, +0.1029862f,
  +0.0555534f, -0.1441934f, +0.4591852f, -0.0904291f, -0.0017068f, +0.0671903f, +0.0240592f, +0.1166736f,
  -0.1132412f, +0.1329393f, +0.1016628f, -0.0979640f, +0.0327418f, +0.2345897f, -0.1447308f, +0.0229190f,
  +0.1425707f, -0.3930877f, -0.0905428f, +0.0221727f, -0.0078026f, +0.2455058f, -0.3241541f, +0.1895240f,
  +0.1507545f, +0.0507733f, +0.1756238f, -0.3999567f, -0.3469395f, +0.6089705f, +0.0117484f, +0.0809644f,
  +0.0579943f, +0.2929690f, +0.2631522f, +0.5218959f, +0.1915485f, -0.1188291f, -0.1470049f, -0.1265025f,
  -0.1019806f, -0.6307010f, +0.0734446f, +0.4771997f, -0.4113303f, +0.4016382f, -0.0825141f, +0.2447992f,
  -0.2040587f, +0.4459104f, -0.0687427f, -0.2755726f, -0.3856723f, -0.7615505f, -0.1027312f, +0.1644937f,
  +0.0927848f, +0.1234211f, +0.2112164f, +0.1243407f, +0.1158213f, -0.1609647f, -0.1107618f, -0.0991627f,
  +0.0869177f, +0.0132589f, -0.1291183f, -0.0787217f, -0.0329869f, +0.0208143f, -0.2393128f, -0.1087990f,
  -0.1921587f, -0.2231873f, -0.1246295f, -0.1381759f, +0.0013399f, +0.2639995f, +0.4413968f, -0.2638128f,
  -0.2125488f, +0.1122903f, +0.0114737f, -0.1480892f, +0.1107439f, +0.3704603f, -0.0935157f, +0.1910361f
);

const float biases[4] = float[4](
  +0.0923058f, -0.2195317f, +0.2479197f, -0.0124830f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer4 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1272292f, -0.5454522f, +0.0227110f, -0.0338277f, +0.3012772f, +0.0470128f, -0.1380285f, -0.3508851f,
  -0.2982767f, -0.2357022f, +0.1060673f, +0.1616267f, -0.1162364f, +0.0209143f, +0.1929582f, -0.5035576f,
  +0.0070691f, -0.8079969f, +0.2081710f, +0.3086015f, -0.1623285f, -0.0151937f, +0.1409312f, -0.2023494f,
  +0.1594129f, -0.1078265f, -0.1614419f, +0.0951873f, +0.1101574f, -0.1534270f, +0.0911889f, -0.3228525f,
  -0.0592313f, +0.1966890f, +0.1287840f, +0.0862522f, -0.0792778f, -0.0785485f, +0.6382192f, -0.2102031f,
  -0.0186589f, +0.6318986f, +0.0284088f, +0.4107783f, -0.2274469f, -0.1560728f, +0.2486635f, +0.0170617f,
  +0.1600446f, +0.0913507f, -0.0957285f, +0.2815298f, +0.0361642f, -0.0113899f, -0.0091947f, -0.2198961f,
  +0.1063561f, +0.3330389f, -0.1062472f, -0.2462943f, -0.0897578f, +0.0785408f, +0.0430929f, -0.0715262f,
  +0.0551578f, -0.2105432f, +0.0346198f, +0.6687228f, -0.1470184f, -0.0775413f, +0.2607354f, -0.2142640f,
  +0.0614762f, -0.1347493f, +0.0500496f, -0.0562641f, -0.2915065f, +0.3326673f, +0.0114574f, -0.0614994f,
  -0.0950346f, +0.0323252f, -0.1816697f, -0.1584400f, -0.2823274f, -0.1975479f, -0.1204807f, -0.0966498f,
  -0.3939151f, +0.4393344f, -0.3391390f, +0.0722943f, -0.0629451f, -0.1151784f, +0.0651904f, +0.3132388f,
  +0.0714166f, -0.3027912f, +0.0626741f, -0.1893889f, -0.2910006f, +0.1332439f, +0.1499307f, +0.2201282f,
  -0.0586843f, -0.0224939f, +0.0247560f, -0.0379315f, -0.0645947f, -0.3170783f, +0.5160268f, +0.2536387f,
  +0.0700274f, +0.5569367f, -0.0406062f, -0.9002109f, +0.2378709f, -0.2283127f, +0.5051926f, +0.0499501f,
  -0.0729916f, -0.0001465f, +0.1631193f, -0.2845557f, +0.1143122f, +0.2285261f, +0.1678782f, -0.1354671f,
  +0.0764587f, +0.2269416f, +0.0140669f, -0.4970837f, +0.0891773f, -0.0495970f, +0.1685053f, +0.2442644f,
  +0.2404782f, -0.2307687f, -0.2637337f, +0.0174574f, -0.2646684f, -0.2225967f, +0.4503031f, -0.0597218f,
  +0.2249023f, +0.0617375f, +0.2721035f, -0.2423004f, -0.2526253f, +0.1017617f, -0.0767232f, -0.0521247f,
  +0.0698785f, -0.1261802f, +0.3359741f, +0.9019365f, +0.1658001f, -0.1520288f, +0.1190162f, -0.1863680f,
  -0.0750088f, -0.6814787f, +0.0059583f, +0.2380559f, +0.1385036f, -0.1952125f, +0.0249811f, +0.0392405f,
  +0.0945690f, -0.4659034f, -0.0504084f, +0.1209415f, -0.2799738f, -0.0496205f, -0.0466760f, +0.0659869f,
  +0.1626660f, -0.5605616f, -0.1654931f, -0.0302323f, +0.0838411f, +0.4040114f, +0.3475599f, -0.2819757f,
  +0.2446336f, -0.1747594f, -0.0890140f, +0.4395820f, -0.0186527f, -0.2884446f, +0.2430482f, -0.0212336f,
  +0.1275951f, -0.2068913f, +0.1689609f, +0.0917279f, -0.0677210f, -0.2074890f, -0.0254585f, +0.3131825f,
  -0.1603415f, +0.3320087f, +0.0107221f, +0.0952026f, +0.4848515f, -0.3798165f, +0.3625880f, +0.0411003f,
  -0.0433752f, -0.4220841f, -0.2332636f, +0.4613886f, -0.0849918f, -0.1694864f, +0.4109768f, +0.4526342f,
  -0.0513845f, -0.2236376f, +0.0573214f, -0.1892513f, -0.3391506f, +0.0500147f, +0.0561988f, -0.0260309f,
  -0.0145477f, -0.3405473f, +0.1359918f, +0.1342620f, -0.2015945f, +0.0355211f, +0.2575745f, -0.0606421f,
  +0.3333088f, -0.6415102f, +0.1002136f, +0.0870612f, -0.1076269f, +0.0222243f, +0.1027792f, -0.1502894f,
  +0.1002308f, +0.6472527f, +0.1484733f, -0.2979692f, -0.3474806f, +0.0349043f, +0.0618531f, +0.1848699f,
  -0.0178897f, -0.2117633f, -0.0720178f, +0.1790810f, -0.3470060f, +0.2076516f, +0.2339190f, +0.1748654f,
  +0.2747673f, -0.4072553f, +0.1533954f, -0.0174848f, -0.1468932f, +0.2311077f, -0.0251629f, +0.2127519f,
  +0.0664940f, +0.4534764f, -0.1590731f, +0.2884409f, -0.3092837f, -0.1492968f, -0.2393832f, +0.0257265f,
  +0.2084873f, -0.1165926f, -0.1243221f, -0.0065301f, -0.3357420f, +0.1360074f, +0.0291965f, +0.0842641f,
  +0.0368987f, +0.2751554f, -0.0775472f, +0.1193464f, +0.0386550f, +0.0676429f, -0.1784362f, +0.0316313f
);

const float biases[4] = float[4](
  +0.2360954f, -0.1106612f, -0.0821810f, -0.0145729f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer5 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1487441f, +0.2404297f, +0.1996987f, -0.3305869f, -0.0920747f, +0.2897067f, +0.2676175f, -0.1639058f,
  +0.4032542f, -0.2340424f, +0.1058529f, -0.0428548f, +0.0236755f, +0.0651940f, -0.0135004f, +0.0870503f,
  -0.0645925f, +0.1543459f, +0.2523575f, +0.1022701f, +0.2458034f, -0.1458515f, +0.0942852f, -0.0555301f,
  +0.3573568f, +0.3935269f, +0.0299068f, -0.1832926f, -0.1381706f, -0.0776941f, +0.2916225f, -0.2473429f,
  +0.2187951f, -0.3991209f, -0.0511445f, -0.3777888f, -0.3612010f, -0.0827909f, -0.5643291f, +0.3417751f,
  -0.0221357f, +0.4307558f, -0.0958617f, +0.2037063f, -0.1288608f, -0.1448145f, -0.0380532f, -0.3452882f,
  +0.0467915f, -0.0179599f, -0.3408889f, -0.0430554f, -0.1002385f, -0.3332110f, +0.0104704f, +0.2388909f,
  -0.2003500f, -0.0017478f, -0.0956774f, +0.1170730f, -0.3372793f, +0.5293666f, -0.1844353f, +0.0952649f,
  -0.1230490f, +0.2952246f, +0.0577299f, +0.1257132f, +0.1375333f, -0.0986603f, -0.0292331f, -0.1236314f,
  -0.0246649f, -0.1925636f, +0.0808432f, +0.3545350f, -0.2084972f, +0.0535754f, -0.4772922f, +0.2928141f,
  +0.0590510f, -0.0900298f, -0.1601044f, -0.1404944f, +0.2387648f, -0.0635751f, -0.1870964f, +0.1344088f,
  +0.0504685f, +0.2756970f, -0.1799006f, +0.2611786f, -0.0303930f, +0.2924756f, +0.3222059f, -0.3818368f,
  -0.1709767f, -0.4812332f, -0.1442041f, -0.0164766f, +0.3905195f, +0.2410347f, -0.6551802f, -0.3882254f,
  +0.0372268f, +0.2002375f, -0.1444439f, +0.0793409f, -0.3841189f, -0.2616173f, +0.4592741f, +0.3084467f,
  -0.0493460f, -0.2122833f, +0.3402332f, +0.1902703f, -0.3453876f, +0.1237389f, -0.0103506f, -0.0197619f,
  +0.0864224f, -0.0030352f, +0.0417241f, +0.1349298f, +0.2308718f, +0.2543828f, +0.3105189f, -0.4621766f,
  -0.1827537f, -0.5296304f, +0.0103576f, +0.1112533f, -0.2117010f, +0.3134472f, +0.6238148f, +0.3789878f,
  +0.1951636f, -0.0240417f, +0.1461209f, +0.2886064f, -0.0674810f, -0.0490663f, +0.1919224f, +0.1074409f,
  +0.2011209f, -0.2028901f, +0.1454494f, -0.3705423f, +0.1963525f, -0.0407162f, +0.2942992f, -0.0976190f,
  -0.2145922f, -0.4490498f, -0.3055731f, -0.6319126f, +0.1709615f, -0.1523165f, -0.3676157f, +0.0358317f,
  +0.1088961f, +0.3429222f, +0.1655379f, +0.0231479f, +0.1411423f, -0.0372024f, +0.0246867f, -0.5335216f,
  +0.1958821f, -0.3633162f, -0.4124122f, +0.0891322f, +0.3620530f, -0.0315073f, +0.2801718f, -0.3691821f,
  -0.1180909f, -0.7813828f, +0.1497566f, +0.6565869f, +0.0401705f, -0.6846945f, +0.3919252f, -0.4489914f,
  -0.0538778f, -0.0444825f, -0.3217927f, +0.4468306f, -0.2135655f, +0.1037858f, +0.0317526f, +0.0144526f,
  +0.1739347f, -0.4807525f, +0.0250048f, -0.1211514f, -0.0153710f, -0.3122830f, +0.0661704f, -0.0676257f,
  +0.0450207f, +0.2192653f, +0.1876301f, +0.1231849f, -0.4619811f, +0.2493757f, -0.2763683f, +0.0400070f,
  +0.2324217f, -0.0358392f, -0.1307308f, +0.1614332f, -0.1473588f, +0.0467686f, -0.0117497f, -0.0131161f,
  +0.0289045f, -0.4523848f, +0.0119191f, +0.3915790f, -0.3065677f, +0.3459745f, +0.3599562f, +0.3014176f,
  -0.1788977f, -0.4965164f, -0.0612689f, +0.5480319f, -0.3650985f, +0.3242565f, +0.3665135f, -0.3472759f,
  +0.2074582f, -0.1310280f, -0.2879088f, -0.1160879f, -0.4956533f, +0.4388813f, -0.1593694f, +0.2337915f,
  +0.0324142f, -0.0470978f, +0.0403061f, +0.3571630f, +0.1632821f, +0.3304349f, -0.3701388f, -0.2579351f,
  -0.0575750f, -0.3436717f, +0.0830075f, -0.1271148f, +0.1924218f, +0.0169850f, +0.1899363f, -0.1010802f,
  -0.2168681f, -0.5299994f, -0.1183273f, -0.1900928f, -0.1577277f, -0.0405381f, +0.1501069f, -0.2744851f,
  -0.0518493f, -0.2291717f, +0.0856951f, +0.1647379f, -0.0110377f, +0.2536430f, +0.0326969f, -0.2042236f,
  -0.1822008f, +0.1421873f, +0.0617258f, -0.1845036f, +0.0821350f, +0.3401969f, +0.0256871f, +0.1399346f,
  +0.1804794f, -0.0287979f, +0.0107281f, +0.3677987f, -0.0231257f, -0.1994237f, +0.1900186f, -0.0007422f
);

const float biases[4] = float[4](
  +0.0394117f, -0.1260286f, -0.0246578f, -0.0443460f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer5 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1187024f, -0.2611718f, -0.0940185f, +0.2576069f, -0.3873529f, -0.3890116f, -0.0491906f, +0.2553634f,
  +0.1868681f, +0.0802698f, +0.0960151f, -0.1388660f, +0.1931379f, +0.5684499f, +0.7841895f, -0.0667083f,
  -0.1843398f, -0.4059233f, -0.0896640f, +0.1595169f, -0.0141897f, +0.3840874f, -0.2891604f, -0.2386247f,
  -0.3433765f, +0.0509929f, +0.1355059f, +0.3968844f, +0.5627715f, +0.5125096f, -0.0954724f, -0.2040943f,
  +0.5289287f, +0.7481003f, -0.2457162f, -0.6894341f, +0.4573520f, -0.2115950f, +0.6252739f, +0.0136418f,
  +0.3576046f, -0.7593827f, +0.0303091f, -0.4990964f, -0.0360163f, +0.3802352f, +0.0752197f, -0.0357477f,
  -0.2379463f, -0.1124554f, +0.1989053f, +0.2019946f, +0.2232866f, +0.0214174f, +0.2558542f, +0.0651760f,
  +0.2045798f, +0.0193600f, -0.4580190f, +0.0489749f, +0.6384667f, -0.6723016f, -0.0564622f, -0.3224058f,
  -0.2426160f, -0.3821980f, +0.1663786f, -0.1452652f, -0.4504507f, +0.5840643f, -0.1090067f, +0.1105465f,
  +0.1769713f, -0.0309761f, -0.3292537f, +0.0799355f, +0.0248419f, -0.0372346f, -0.2769349f, -0.0422774f,
  -0.1592420f, -0.1002152f, -0.1678453f, -0.2639949f, +0.0717572f, -0.1233865f, -0.2378218f, +0.3220608f,
  +0.1720940f, +0.1720078f, +0.1453591f, +0.3044280f, +0.0765885f, -0.4686007f, +0.2486010f, +0.4825200f,
  +0.0886267f, +0.1321449f, +0.1188104f, +0.4377178f, -0.0783182f, +0.1746463f, +0.4185673f, +0.2388792f,
  -0.0870312f, -0.7763231f, +0.0074025f, +0.8382399f, +0.2538317f, -0.1991160f, -0.3311741f, +0.2106252f,
  +0.5385394f, +0.1044508f, +0.2722063f, -0.1039208f, -0.1376753f, +0.0976439f, +0.0773151f, +0.3407882f,
  -0.0129304f, -0.2928929f, +0.0674528f, -0.2035295f, +0.1321394f, -0.1359792f, -0.0770994f, +0.0323027f,
  +0.0713000f, -0.1219297f, -0.0644827f, +0.5226499f, -0.2617583f, +0.7613512f, +0.0182237f, -0.0510760f,
  -0.1266311f, -0.1131669f, -0.0331045f, -0.2994293f, -0.0798446f, +0.2824920f, +0.0855086f, +0.1177550f,
  -0.0720515f, +0.2367009f, -0.0236697f, -0.2886553f, -0.1370208f, +0.1214557f, -0.2042730f, +0.1559000f,
  +0.2774727f, +0.2097202f, -0.1059272f, -0.1093706f, -0.0314812f, -0.3997814f, +0.2201771f, +0.0692439f,
  +0.1931767f, +0.2392812f, +0.0978196f, -0.3654105f, +0.2656067f, -0.0399549f, +0.2426331f, -0.0109224f,
  -0.0216337f, +0.4654030f, +0.0003800f, +0.0627039f, -0.0155801f, -0.1303031f, -0.3124230f, +0.0886490f,
  +0.3809034f, -0.1395701f, -0.3269564f, +0.2644603f, -0.1175954f, -0.3295071f, +0.4061919f, -0.0704003f,
  -0.1063059f, -0.3008831f, +0.0198245f, +0.1978721f, -0.0074629f, -0.5532910f, +0.1380593f, +0.3460776f,
  -0.2420818f, +0.1829829f, +0.1418636f, +0.0468551f, +0.1463593f, +0.0001068f, +0.0634843f, +0.1721922f,
  +0.0483839f, +0.3273725f, +0.2609126f, -0.1751974f, +0.3159672f, -0.3737255f, +0.1654914f, +0.0488329f,
  +0.1907705f, +0.0590070f, -0.0507856f, +0.1931054f, +0.0491690f, -0.3595359f, +0.3818328f, +0.4114084f,
  +0.0009409f, +0.0038069f, +0.0097520f, +0.0173258f, -0.2001224f, -0.2502298f, +0.0539996f, +0.3953587f,
  +0.3034374f, +0.2374330f, -0.1027945f, -0.1655781f, -0.1660086f, +0.0458000f, +0.5994043f, -0.2272597f,
  +0.0036594f, -0.6037683f, -0.1317140f, -0.0966332f, -0.1943198f, +0.2494482f, -0.1553440f, -0.0458034f,
  -0.2342334f, -0.1252160f, -0.0096226f, +0.4019237f, +0.0755126f, -0.0178763f, -0.3007762f, +0.2420752f,
  +0.0606754f, -0.1549062f, +0.4487490f, +0.1532163f, +0.4560706f, -0.0074682f, -0.4375621f, +0.1795702f,
  +0.3647459f, +0.0859765f, +0.1144335f, -0.3929390f, -0.0793693f, -0.0997910f, -0.1779614f, -0.2897873f,
  -0.0043901f, +0.1663288f, -0.0476380f, -0.0079294f, -0.1571286f, +0.3075624f, -0.1570491f, -0.2092400f,
  +0.1944924f, -0.0734672f, -0.1172725f, +0.0173348f, +0.4914513f, -0.4364715f, -0.0714344f, -0.1456117f,
  -0.1077704f, -0.1571209f, -0.0409586f, -0.1670490f, -0.1035555f, +0.2409385f, -0.3393179f, -0.1384797f
);

const float biases[4] = float[4](
  -0.0336438f, +0.0380435f, +0.1269763f, -0.1132393f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer6 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1474224f, +0.2570216f, +0.2327625f, -0.0773597f, +0.2984843f, +0.2071345f, +0.3433161f, -0.1048989f,
  -0.1081560f, +0.1774136f, -0.2695359f, -0.0006405f, -0.0876753f, +0.1733722f, -0.0517972f, -0.1206271f,
  -0.1223374f, +0.1103346f, +0.0553455f, -0.0162415f, +0.1304422f, -0.0338363f, +0.0639384f, -0.1670051f,
  -0.0578564f, +0.1297204f, -0.4164401f, +0.1775735f, +0.1746993f, -0.6108987f, +0.0124565f, -0.2987667f,
  -0.0357350f, +0.1340830f, -0.1145987f, +0.1655057f, -0.3387911f, +0.2881671f, -0.0383315f, +0.2684160f,
  +0.1739338f, +0.2069048f, -0.0828068f, -0.2713394f, -0.1908494f, -0.0195950f, +0.2356975f, +0.1951211f,
  -0.1759251f, -0.0850393f, +0.0651085f, +0.0380179f, -0.0584360f, -0.0008518f, -0.1632090f, -0.2558580f,
  +0.0914075f, +0.0548135f, -0.1513308f, +0.2524095f, -0.5242622f, +0.0680767f, -0.1735355f, -0.1322401f,
  -0.0484000f, +0.0042579f, +0.1472855f, -0.1281783f, +0.0270792f, -0.0659754f, -0.0663153f, +0.0407272f,
  +0.0171435f, -0.2367817f, -0.1967800f, +0.2111943f, -0.2180496f, +0.2006877f, +0.2215388f, +0.0739871f,
  +0.0463322f, -0.0408584f, +0.0484696f, -0.0110899f, +0.1909263f, -0.3799073f, -0.1573659f, -0.2806616f,
  -0.2372108f, +0.2037102f, +0.2831276f, +0.2259855f, +0.0685904f, +0.0962229f, -0.2967364f, -0.1359323f,
  -0.5430826f, -0.2977220f, -0.2764189f, +0.0889346f, +0.0985879f, +0.4075853f, +0.0916844f, +0.0533655f,
  -0.2305944f, -0.6695783f, +0.3668137f, +0.2079008f, +0.6880575f, +0.1530914f, +0.0616477f, -0.8440554f,
  -0.0154087f, +0.0279563f, +0.0082908f, -0.0104270f, +0.1496086f, -0.1904124f, -0.0292325f, -0.0464582f,
  -0.0431003f, -0.3242889f, -0.1429016f, +0.0692569f, +0.0333861f, +0.0677717f, -0.2254282f, -0.0523620f,
  +0.2026532f, -0.3471040f, +0.1913582f, +0.2904969f, +0.1215887f, -0.0012970f, -0.4847236f, -0.2615442f,
  +0.2085537f, +0.0096139f, -0.0141642f, +0.0965297f, -0.0584925f, +0.1569038f, -0.1142109f, +0.1812164f,
  +0.0853830f, +0.1232972f, -0.0030204f, -0.0248692f, +0.0429031f, +0.0433847f, -0.0656476f, -0.1196931f,
  -0.1148183f, -0.1398583f, +0.0737845f, +0.0899033f, -0.1267314f, +0.0676342f, +0.0953065f, +0.2890581f,
  +0.0736912f, +0.0914443f, +0.0868896f, +0.0978864f, -0.0578797f, +0.0507309f, -0.1170426f, -0.1349920f,
  +0.1161830f, -0.0182086f, -0.0850705f, +0.0274563f, +0.1249830f, -0.0045702f, -0.0674950f, -0.0037086f,
  -0.2483997f, -0.2194448f, -0.2804357f, +0.0641612f, +0.3534766f, +0.2044100f, -0.1652156f, -0.0140831f,
  +0.0218330f, +0.0761972f, +0.1619232f, -0.0330314f, +0.1279198f, -0.1447569f, +0.0452752f, -0.1312167f,
  +0.0837104f, -0.2064756f, -0.0134457f, -0.0370509f, +0.2371527f, -0.0760243f, -0.0254186f, -0.0499116f,
  -0.2048089f, -0.1640158f, +0.2925886f, -0.0940089f, +0.1715974f, +0.1237886f, +0.1218054f, +0.1251394f,
  +0.2275358f, +0.1059312f, -0.0941143f, +0.1051965f, -0.0684623f, -0.0469041f, -0.0873926f, +0.0628422f,
  +0.3183833f, -0.1961828f, -0.4674653f, -0.2383403f, -0.1591041f, +0.4997606f, +0.0015291f, +0.3064099f,
  +0.5717082f, +0.1047392f, +0.1854029f, -0.0051909f, +0.2271340f, +0.0198307f, -0.0500761f, +0.1386438f,
  +0.1769197f, -0.0112873f, -0.0543558f, -0.0776296f, +0.0093106f, -0.2700566f, +0.2640415f, +0.3608352f,
  -0.0660062f, +0.0039586f, -0.1723399f, -0.2262661f, -0.3910412f, +0.6278986f, -0.1212788f, +0.4155017f,
  +0.2269815f, -0.0664696f, -1.4643687f, +0.0570677f, +0.3007057f, -0.0173247f, +0.2210340f, +0.0082867f,
  +0.0157383f, +0.3242677f, +0.1162435f, -0.2129486f, -0.1659116f, -0.3141084f, -0.0250739f, +0.1653710f,
  -0.0589985f, -0.0734870f, +0.1253749f, -0.2044061f, -0.1508059f, +0.0132106f, +0.3462174f, +0.0001860f,
  +0.0943326f, -0.0326180f, +0.4759236f, -0.3190180f, +0.0442397f, +0.1338398f, -0.0754074f, +0.3308944f,
  +0.1471163f, +0.0383707f, +0.1206653f, -0.2705805f, -0.0374773f, +0.1052207f, +0.1337850f, +0.3761657f
);

const float biases[4] = float[4](
  +0.0332027f, -0.0762106f, +0.1844318f, +0.0313786f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer6 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0948809f, +0.2546261f, -0.0143590f, -0.2205711f, +0.0866899f, +0.1332790f, +0.2770043f, +0.2146620f,
  +0.0174591f, +0.2808826f, +0.2242664f, +0.0420368f, -0.1744695f, +0.0519076f, -0.0105555f, -0.0047342f,
  +0.3992734f, -0.0198589f, -0.0515708f, +0.0086613f, -0.0454505f, -0.2857205f, -0.1592969f, -0.1217374f,
  -0.3635831f, +0.1575196f, -0.3394944f, -0.1354156f, -0.5738203f, +0.3172202f, +0.1995096f, +0.0097892f,
  -0.0965864f, +0.0734870f, +0.0295240f, +0.2956429f, -0.9771420f, +0.1514615f, +0.1611538f, -0.2334164f,
  +0.1227427f, -0.0254412f, -0.1584312f, +0.2334046f, -0.1354845f, -0.2613559f, +0.2288788f, -0.4097978f,
  +0.0178568f, +0.0876990f, -0.0988232f, -0.0530268f, -0.3486075f, +0.3015014f, -0.0168493f, +0.0466309f,
  -0.2166977f, +0.1346095f, +0.1947848f, -0.0848723f, -0.5468295f, +0.0242037f, -0.0435497f, -0.0067206f,
  -0.0632238f, -0.0405687f, +0.0556963f, +0.0297264f, -0.0673744f, +0.0699881f, -0.0772125f, -0.0449903f,
  -0.3292432f, -0.2569553f, +0.0549732f, -0.1895004f, -0.3082829f, -0.0419061f, -0.1456105f, -0.0221541f,
  -0.1231089f, -0.0433784f, -0.0726731f, -0.2644911f, -0.4309108f, +0.0638202f, +0.1072026f, +0.1312799f,
  -0.1040976f, +0.0773332f, -0.0133589f, -0.0645942f, -0.1807040f, -0.0049605f, +0.4849839f, -0.0769051f,
  -0.3734717f, -0.0561864f, +0.0188018f, -0.0982542f, -0.6767390f, +0.5193648f, +0.0092774f, -0.1366027f,
  +0.0350465f, +0.0040172f, +0.2500640f, +0.0914823f, -0.9672344f, -0.3314358f, +0.6515138f, -0.1673790f,
  +0.2603610f, +0.1966911f, +0.2655422f, -0.1517143f, -0.1865516f, +0.0189961f, -0.0373591f, -0.1885793f,
  -0.3988848f, -0.1501408f, +0.0212564f, +0.2289366f, -0.1983715f, +0.1929057f, +0.0386947f, -0.0195782f,
  -0.0272813f, +0.1192824f, +0.2182987f, +0.2082555f, -0.4195718f, -0.2694472f, +0.2035311f, +0.1085519f,
  +0.2242540f, +0.4285746f, +0.1041866f, +0.0084247f, -0.0736314f, +0.1013911f, -0.1043361f, +0.3678308f,
  -0.2020454f, -0.0996877f, +0.0379001f, +0.1155457f, -0.1442525f, +0.1138082f, -0.4887847f, +0.1645010f,
  -0.2255529f, -0.1330273f, +0.0521596f, +0.3282566f, -0.1143713f, +0.3286737f, +0.0340933f, -0.1874713f,
  -0.0441705f, -0.0688297f, +0.0450201f, +0.2331079f, -0.0548801f, +0.0346057f, -0.1127493f, -0.2780938f,
  -0.1161767f, -0.2377394f, -0.1311782f, +0.0964996f, -0.2685937f, -0.1515009f, -0.2368501f, +0.3746439f,
  +0.0092430f, -0.2584442f, +0.0491331f, -0.1775844f, -0.3272852f, +0.4381992f, -0.1208424f, +0.3566203f,
  -0.0576960f, +0.1798598f, -0.5364400f, -0.1233177f, +0.1805455f, +0.1182533f, -0.1853455f, +0.0033260f,
  -0.0918088f, -0.4780600f, +0.1945777f, +0.2715648f, -0.4782383f, -0.2864332f, +0.2068608f, +0.2624108f,
  -0.0907529f, -0.1276505f, -0.2766961f, +0.6161234f, -0.1538883f, -0.2556671f, -0.0135555f, -0.6617575f,
  +0.2577037f, +0.4762050f, -0.2478386f, +0.1932545f, +0.0766526f, -0.3380402f, -0.1794115f, -0.1292467f,
  +0.0183126f, -0.0130586f, -0.0261703f, +0.0269612f, -0.3539469f, +0.4112736f, -0.5478978f, +0.3143882f,
  +0.2535976f, -0.0702899f, +0.2396713f, +0.4113030f, +0.0597523f, +0.3336162f, -0.3270077f, +0.3241586f,
  -0.1679152f, +0.0574504f, +0.0472456f, +0.1816883f, -0.0105697f, +0.2935476f, -0.1876970f, +0.0734785f,
  -0.2316528f, -0.2092560f, +0.0555811f, -0.0745724f, +0.1796791f, -0.1811814f, +0.1560560f, -0.0309122f,
  +0.0369039f, -0.1657642f, +0.4939745f, -0.1251861f, +0.4494250f, +0.0204372f, +0.2216909f, -0.2481966f,
  -0.1981976f, +0.2765287f, +0.2351286f, +0.3985471f, +0.3513402f, -0.0399955f, +0.0672184f, -0.4125069f,
  +0.1789123f, +0.1605535f, -0.3165431f, -0.0563812f, -0.1066047f, +0.2692388f, +0.1201022f, +0.0453323f,
  -0.1123440f, +0.1170538f, +0.2115603f, +0.0068370f, +0.1959971f, -0.0941455f, +0.1437636f, -0.1089684f,
  -0.0384602f, -0.0942089f, -0.0897263f, +0.1193507f, -0.0198907f, -0.2237635f, -0.1300945f, -0.0440551f
);

const float biases[4] = float[4](
  +0.1353147f, +0.0055512f, +0.0252927f, -0.0402832f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer7 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0608959f, -0.3599624f, -0.0256472f, +0.1269995f, -0.0345575f, -0.0953450f, +0.0735657f, +0.1471575f,
  -0.0492773f, -0.2164972f, -0.0942161f, -0.3647807f, -0.0792706f, +0.2387507f, -0.1095923f, +0.0470688f,
  +0.1896100f, +0.0565135f, -0.0460161f, -0.1969638f, +0.1424055f, +0.0581311f, -0.0186117f, +0.0095090f,
  -0.1134974f, -0.3435841f, -0.0720147f, -0.4001990f, +0.1077018f, -0.1849641f, +0.1346875f, +0.1507603f,
  -0.3118602f, -0.2842380f, -0.3953162f, +0.2521568f, +0.2622468f, -0.0774847f, -0.0101208f, -0.0931901f,
  +0.0182070f, -0.1359376f, +0.1897765f, -0.0729314f, +0.1083615f, +0.1250500f, +0.1157133f, +0.2280426f,
  +0.0266947f, -0.5546722f, -0.0192801f, -0.3394147f, -0.0603081f, +0.1752658f, -0.5083101f, -0.4894019f,
  -0.4693354f, +0.0803413f, -0.0505317f, +0.0830770f, +0.1056900f, +0.6333901f, -0.1542496f, -0.2382910f,
  +0.3763515f, -0.1020134f, +0.1293051f, -0.2722207f, +0.3042325f, +0.3079837f, +0.2443447f, -0.1065941f,
  +0.2887746f, +0.3813933f, +0.1398022f, -0.1720768f, +0.5221180f, +0.5320408f, +0.1607852f, -0.0972396f,
  -0.1557016f, -0.6667262f, -0.1869331f, -0.2041619f, +0.3584525f, +0.1150863f, -0.2669275f, -0.0678041f,
  -0.0729451f, +0.0243134f, +0.0724704f, -0.5280032f, -0.0064482f, +0.0369642f, -0.0131020f, +0.1400712f,
  -0.3356041f, +0.2410102f, -0.0787382f, +0.0839391f, +0.1105502f, +0.3400252f, +0.0692899f, +0.1277636f,
  +0.0799428f, -0.5337852f, -0.4025576f, +0.3366685f, -0.6412023f, -0.7461433f, +0.2886032f, -0.5624485f,
  +0.2868229f, -0.5714278f, -0.1828162f, +0.3802880f, -0.2586595f, +0.0764973f, +0.0960756f, -0.2049908f,
  +0.2587066f, -0.2219742f, -0.1610844f, -0.0704899f, +0.7111897f, +0.5621554f, +0.2576956f, -0.3783062f,
  +0.3784338f, +0.0343257f, -0.0480447f, +0.2567629f, +0.3660125f, +0.2120401f, +0.4507834f, -0.1684240f,
  -0.0407302f, -0.1937226f, +0.3270057f, -0.0289252f, +0.3602638f, +0.0984307f, +0.3481788f, +0.1158914f,
  +0.1095016f, -0.4971658f, -0.0262439f, -0.0964849f, +0.2328885f, +0.1053608f, +0.2946998f, +0.2393958f,
  -0.3808290f, +0.1540840f, +0.0489708f, -0.4437483f, +0.3203951f, -0.2370938f, +0.0275846f, -0.0909820f,
  -0.0358537f, +0.1789892f, -0.0228644f, +0.0844676f, +0.3801396f, +0.1390393f, -0.3640231f, +0.3126459f,
  -0.1836139f, -0.3277296f, +0.0037258f, +0.1506039f, -0.3610847f, -0.5247621f, +0.0649604f, +0.1358661f,
  -0.1005988f, +0.1412429f, +0.2085419f, -0.4336867f, +0.0030769f, -0.7240644f, -0.2374902f, +0.1287387f,
  -0.0463867f, +0.1059769f, -0.0047876f, -0.1516691f, -0.0465219f, -0.1687074f, -0.6068149f, +0.0758616f,
  +0.0389908f, +0.4336268f, +0.0036134f, +0.2172100f, +0.2284296f, -0.6639336f, +0.0954262f, +0.1036677f,
  +0.0296307f, +0.0791685f, -0.1780860f, -0.2284466f, +0.1902326f, -0.3802364f, -0.0741833f, +0.2052594f,
  -0.0144728f, -0.3260156f, -0.0811430f, +0.0068333f, +0.3972425f, -0.3177145f, -0.0339825f, -0.1563959f,
  +0.0660176f, +0.3852572f, +0.0554370f, +0.0496353f, -0.0501326f, +0.2815979f, -0.0576883f, +0.3450806f,
  +0.0084528f, +0.2815625f, -0.0166035f, -0.3688929f, +0.2109661f, +0.2058305f, +0.0785943f, +0.0096668f,
  +0.0200382f, +0.1025998f, -0.1409563f, -0.1950742f, +0.2345249f, +0.0864059f, -0.0924796f, +0.5137258f,
  -0.0761299f, +0.1469695f, -0.0802923f, -0.0263529f, +0.0949706f, +0.4537283f, -0.1254327f, -0.0829029f,
  -0.3049269f, -0.5571909f, +0.0707502f, +0.0956258f, -0.1950089f, +0.2170093f, +0.7778584f, -0.4030452f,
  +0.3020965f, -0.3789109f, +0.1184543f, -0.3842352f, +0.0199103f, +0.0321448f, -0.2982344f, -0.1698028f,
  -0.4411683f, -0.0414457f, -0.0089613f, +0.0090925f, +0.5314745f, +0.8219594f, -0.1828420f, -0.3603503f,
  -0.3429913f, +0.5241129f, -0.1428232f, +0.5681749f, +0.1194320f, -0.1233456f, -0.4089408f, -0.3799774f,
  +0.4958789f, -0.0727407f, +0.1252794f, -0.2030819f, -0.1332589f, -0.3971023f, -0.2851912f, -0.3395313f
);

const float biases[4] = float[4](
  +0.0471417f, -0.0086154f, -0.0126693f, -0.0135646f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer7 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0023071f, +0.1357682f, -0.0603115f, +0.1236285f, -0.1476528f, -0.1879898f, -0.3330556f, -0.3497281f,
  +0.3140363f, +0.1703900f, +0.0550453f, -0.0347703f, -0.3537000f, +0.0552348f, +0.1300331f, -0.4205264f,
  -0.1443579f, -0.2074459f, +0.1065052f, +0.2568526f, +0.1363065f, +0.1328123f, +0.0312495f, -0.1669462f,
  -0.0162301f, +0.0566021f, +0.0087624f, -0.0923842f, -0.2807235f, +0.2388734f, -0.2013716f, +0.2503668f,
  -0.2675464f, +0.5555242f, +0.0032188f, +0.0249234f, +0.2472470f, -0.7275836f, +0.0074477f, -0.3318222f,
  -0.2889454f, -0.0878388f, +0.0111812f, +0.2989047f, -0.1568456f, -0.0589624f, +0.0320875f, -0.0257579f,
  -0.0935695f, +0.2870247f, +0.0983343f, +0.0769039f, +0.2811639f, +0.3483924f, +0.1925607f, -0.0788160f,
  +0.1885124f, +0.5470468f, -0.1702735f, -0.3197897f, +0.3118893f, +0.4899135f, +0.2733957f, +0.0665863f,
  -0.0280221f, +0.1033411f, -0.0123950f, -0.0414237f, +0.3358998f, -0.1582276f, +0.5226643f, +0.1124238f,
  +0.0383353f, -0.1310051f, -0.1205172f, +0.1523199f, +0.3113532f, -0.0560055f, -0.6147010f, -0.0461235f,
  -0.2249406f, +0.0359620f, +0.1157095f, +0.2743625f, +0.5414630f, +0.3202060f, -0.4814485f, +0.7938563f,
  +0.1418178f, +0.0207067f, +0.0062757f, -0.0567926f, -0.1846264f, -0.0492662f, -0.2084279f, -0.1658944f,
  +0.1011697f, -0.1648728f, -0.3121653f, -0.0294192f, -0.2536510f, -0.3151361f, +0.4084097f, +0.1020632f,
  -0.2366114f, -0.1632686f, +0.1716293f, +0.3041144f, -0.1094066f, -0.1265835f, +0.1560546f, +0.3374359f,
  -0.5020123f, +0.1796016f, -0.0596566f, +0.3884122f, +0.0787350f, +0.0204922f, +0.1756776f, +0.1045679f,
  +0.1977521f, -0.2189119f, -0.0106612f, -0.2785649f, -0.0199353f, -0.3476631f, +0.2132563f, -0.1003251f,
  +0.3135031f, -0.1831313f, +0.2387741f, +0.0552767f, -0.0648449f, -0.1392140f, -0.0665879f, +0.2174587f,
  -0.0479088f, +0.0928307f, -0.0530690f, +0.0622229f, +0.0093781f, +0.0864555f, -0.0309139f, -0.1054511f,
  +0.0674114f, +0.0996022f, -0.1268480f, -0.0548824f, +0.0048443f, +0.2174746f, +0.4117201f, +0.0985878f,
  +0.1462213f, +0.3332657f, +0.3115132f, -0.0732464f, -0.2556498f, +0.2548017f, +0.4196844f, +0.3591086f,
  +0.2170838f, +0.0024046f, +0.1278438f, -0.3117039f, -0.1360584f, +0.0049852f, -0.1466831f, -0.2714050f,
  -0.0286118f, +0.1637946f, +0.1479957f, +0.1255594f, -0.0898661f, +0.0676047f, -0.0207577f, +0.1304175f,
  +0.0594300f, +0.5829792f, +0.2199263f, -0.0040059f, -0.0926929f, +0.1340845f, +0.0903735f, +0.3692980f,
  +0.1088906f, +0.0979676f, -0.0427806f, +0.1069673f, -0.3066937f, -0.2695191f, -0.2875240f, -0.1781321f,
  +0.0046649f, +0.2351949f, -0.1360259f, +0.1862038f, -0.0972412f, +0.3125401f, +0.0378990f, -0.1155078f,
  -0.2672218f, +0.2213836f, +0.1368809f, +0.3603164f, +0.0562026f, -0.1054946f, -0.0672678f, -0.0457466f,
  +0.2108335f, +0.2208177f, -0.1929649f, +0.0839847f, -0.1974377f, -0.1695096f, -0.0996076f, -0.0201806f,
  +0.1248742f, +0.0471417f, -0.0598812f, -0.3646398f, +0.2258696f, -0.2431207f, -0.3019769f, -0.1524684f,
  -0.0527920f, -0.0338290f, -0.2865889f, -0.2360390f, +0.3442629f, +0.5793850f, -0.0195137f, -0.0531068f,
  +0.0284286f, -0.1004256f, -0.0327864f, -0.4246404f, +0.3291840f, +0.3231952f, +0.2688971f, +0.2633813f,
  -0.2505209f, -0.3993586f, -0.2674150f, -0.3945894f, +0.0913662f, +0.2159503f, +0.1140891f, -0.0655155f,
  +0.1475462f, -0.0768626f, -0.1081456f, -0.0445193f, +0.3727998f, +1.4199917f, +0.1499021f, -0.0703504f,
  -0.2549224f, -0.2160403f, +0.0347817f, -0.0452355f, +0.2505692f, +0.9559628f, +0.5633425f, -0.1256055f,
  +0.1974664f, -0.2920760f, +0.2553357f, -0.3662784f, -0.1976192f, -0.2958154f, +0.0545402f, +0.0979737f,
  -0.0070239f, -0.3858815f, +0.2423691f, -0.1084143f, -0.0476850f, +0.6980875f, +0.1153847f, +0.0487397f,
  -0.2458309f, -0.1248564f, -0.0203651f, +0.0255583f, +0.0366296f, +0.3122613f, +0.3212344f, +0.0594684f
);

const float biases[4] = float[4](
  +0.0023709f, +0.0172124f, -0.0098062f, -0.0248720f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer8 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0045946f, -0.0965629f, -0.0578388f, -0.1727538f, +0.1939984f, +0.2213565f, -0.0903585f, -0.0231012f,
  +0.1623873f, -0.1455296f, +0.0073141f, +0.2708427f, +0.0417783f, +0.1620115f, +0.2520201f, +0.0314281f,
  -0.1443888f, +0.0585327f, +0.0339956f, -0.2335876f, +0.3110439f, +0.0225052f, +0.0709629f, +0.1082434f,
  -0.0483235f, -0.2321223f, -0.2752508f, -0.1250398f, +0.2395140f, +0.2498860f, +0.0085248f, +0.1049924f,
  +0.0886368f, +0.1862495f, -0.1078384f, +0.2888154f, -0.3112406f, +0.6103317f, -0.2702704f, -0.1580062f,
  -0.4177628f, +0.0480627f, -0.0702410f, -0.2542211f, +0.3706250f, -0.1323234f, -0.2131814f, +0.1851644f,
  -0.0956092f, +0.3621274f, +0.0668003f, -0.0650566f, -0.0019441f, +0.1015351f, -0.0752997f, +0.0127576f,
  -0.0795008f, +0.0219650f, -0.0189325f, -0.0818272f, -0.2775080f, -0.0421204f, -0.2059495f, +0.0762278f,
  +0.1144540f, -0.3363790f, +0.0090345f, -0.1125441f, -0.1389496f, +0.1442323f, +0.3747011f, -0.0709457f,
  +0.2330312f, -0.3459614f, -0.0469701f, +0.1310596f, -0.1303773f, -0.1023761f, -0.1871976f, +0.0620257f,
  +0.2295153f, +0.3322263f, -0.0739125f, -0.0625869f, -0.1081185f, -0.0605497f, -0.3498030f, -0.0514855f,
  +0.2318624f, +0.2518527f, -0.0406484f, +0.2229741f, +0.2156939f, +0.1282607f, +0.0608055f, -0.6863754f,
  +0.3573470f, -0.4073150f, -0.1334187f, +0.2894493f, +0.2273456f, -0.1007890f, -0.1777834f, -0.2144770f,
  -0.0140532f, +0.3504132f, -0.0698151f, +0.4138435f, +0.1698504f, -0.1237437f, -0.5333720f, -0.2536504f,
  -0.1365558f, -0.3172981f, -0.2929772f, +0.2610761f, -0.0879329f, -0.1911969f, -0.3571491f, -0.2342436f,
  -0.0247116f, -0.4559167f, -0.2331108f, +0.1465417f, -0.0102205f, +0.1350794f, -0.2711998f, -0.5343006f,
  +0.2355987f, +0.1774876f, +0.1672199f, +0.0758829f, -0.0841063f, -0.1359406f, -0.4865294f, -0.3493346f,
  +0.3465758f, -0.5538870f, +0.2907596f, +0.1524624f, +0.0368917f, -0.0479663f, -0.0127222f, -0.4963027f,
  +0.1666151f, +0.1022190f, +0.0820256f, -0.0536895f, +0.1134438f, -0.0229490f, -0.0417134f, +0.1023972f,
  -0.1041489f, +0.1996516f, -0.0976766f, +0.1436495f, +0.0847014f, -0.0939585f, -0.0074391f, -0.1956686f,
  +0.0084722f, +0.0977396f, +0.1043162f, +0.0141437f, -0.1012275f, +0.0410125f, -0.0535188f, -0.0791283f,
  -0.0450700f, -0.3996124f, -0.1254472f, +0.0636719f, -0.0229953f, +0.0689099f, +0.0183325f, -0.0169818f,
  -0.0377260f, -0.0992682f, -0.1366429f, +0.0727653f, -0.0060798f, -0.1313706f, -0.1345972f, +0.0099815f,
  +0.1480533f, +0.1128917f, -0.0322967f, +0.1028663f, -0.0387427f, -0.0332405f, -0.0255316f, -0.1255713f,
  +0.0194917f, -0.0693489f, -0.0748154f, +0.0072647f, -0.0873344f, -0.0599008f, -0.1471840f, -0.0971972f,
  +0.0259319f, -0.0454364f, +0.0434158f, +0.2213577f, -0.0871001f, -0.0850563f, -0.1511032f, -0.3083411f,
  -0.1340713f, -0.1470567f, +0.0237239f, +0.0864633f, +0.0071473f, +0.0986133f, -0.0507786f, -0.0371835f,
  -0.3378012f, +0.0772525f, +0.5387006f, +0.3525496f, +0.1046880f, -0.2264759f, -0.1701099f, +0.6232210f,
  -0.4685806f, +0.6717637f, +0.5440409f, -0.2595524f, -0.0408657f, +0.2934090f, -0.0441154f, +0.2307408f,
  -0.2669989f, -0.7271029f, -0.0311214f, +0.3368801f, +0.4138773f, +0.2057797f, -0.1128303f, +0.3250028f,
  -0.4208883f, -0.3399938f, +0.5263456f, +0.2589117f, -0.4171316f, -0.2361853f, -0.1729599f, +0.2849731f,
  -0.4349247f, +0.2309478f, -0.3880526f, +0.1857535f, -0.1562056f, +0.0877265f, +0.1721251f, -0.1823864f,
  -0.1657584f, +0.0952776f, -0.1696648f, +0.0644095f, +0.1338162f, +0.3552299f, -0.0017976f, +0.0914348f,
  -0.0085883f, -0.0881148f, +0.2762584f, -0.0081324f, -0.3927152f, +0.0883066f, +0.0520832f, +0.1112179f,
  -0.0566083f, +0.6794429f, +0.1227758f, +0.0130982f, +0.0229642f, -0.1845515f, +0.0509443f, -0.5571062f,
  -0.4526401f, -0.3643182f, -0.1764448f, -0.0110747f, -0.2668333f, -0.1998762f, +0.0654657f, -0.0606849f
);

const float biases[4] = float[4](
  -0.0694215f, +0.0125383f, +0.1255940f, +0.0220894f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer8 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3951590f, -0.3405637f, +0.0201937f, +0.4519506f, +0.0955008f, +0.0619571f, -0.1942357f, -0.2107400f,
  -0.2710691f, -0.2847188f, -0.3572226f, -0.0428349f, +0.1475008f, +0.1392033f, -0.0397033f, -0.1293733f,
  -0.1009058f, +0.1908449f, -0.2268038f, -0.6249909f, +0.2589023f, -0.0608629f, -0.0482351f, -0.1108274f,
  +0.0989324f, -0.1482827f, +0.0821426f, -0.0444394f, +0.3020393f, +0.0336692f, +0.1433270f, -0.2593425f,
  -0.0443461f, +0.1562790f, +0.1128916f, -0.0320125f, +0.0242874f, +0.4506979f, +0.2033922f, -0.0097269f,
  +0.2973930f, +0.5659236f, +0.4356056f, -0.2965692f, +0.1251138f, +0.3853576f, +0.1203548f, +0.1686311f,
  +0.1503780f, +0.3451051f, -0.0231839f, -0.1596411f, +0.1889056f, -0.0220927f, +0.0995855f, -0.1248661f,
  +0.2298144f, -0.1138581f, +0.0736386f, -0.2954690f, -0.1251716f, -0.0727420f, +0.3449786f, +0.0496789f,
  +0.2342118f, +0.4090914f, +0.1375637f, -0.3157756f, +0.2050060f, +0.1513382f, +0.1184776f, +0.1265678f,
  +0.1461626f, +0.2427007f, +0.2700926f, -0.1075547f, +0.2470728f, +0.0454076f, +0.0239638f, +0.1517369f,
  -0.1211444f, +0.1406780f, +0.2843574f, +0.1951411f, +0.0527965f, -0.0378266f, +0.4020936f, +0.2034730f,
  -0.1293652f, +0.1015717f, +0.3351691f, -0.6358352f, -0.0105852f, -0.1273523f, -0.0105649f, +0.2874051f,
  -0.0376867f, -0.7077031f, +0.0547407f, +0.0090170f, -0.2002477f, -0.0744704f, -0.0716837f, -0.2190610f,
  -0.5885204f, +0.6114885f, -0.1274640f, -0.0733458f, -0.1134010f, -0.8453540f, -0.0544554f, -0.2838211f,
  -0.5365720f, +0.1789591f, +0.6485603f, +0.0256588f, -0.1105640f, -0.1914500f, +0.1193102f, +0.6012037f,
  +0.1881872f, -0.3219346f, +0.1613234f, +0.2284962f, -0.4110533f, +0.1781394f, -0.3480166f, -0.2356104f,
  +0.1292601f, +0.2379969f, +0.2349559f, +0.0779021f, +0.1518611f, -0.2558035f, -0.0998370f, -0.1804283f,
  +0.0409236f, -0.2094277f, +0.1578918f, -0.0056367f, -0.1806772f, -0.2139643f, +0.0714537f, +0.3013274f,
  +0.0378461f, -0.1069618f, -0.2377150f, +0.0487266f, -0.4169469f, +0.0017686f, +0.0937146f, -0.2444943f,
  -0.0097589f, -0.1964116f, +0.0807936f, +0.2086475f, -0.4117394f, +0.0451797f, +0.0156702f, -0.0224979f,
  +0.1733514f, +0.0252824f, +0.0528254f, -0.1854697f, -0.2496932f, +0.0485403f, +0.0681130f, -0.0500995f,
  -0.2296484f, -0.0724000f, -0.1410759f, +0.4214358f, -0.0593910f, +0.0405198f, +0.3991146f, -0.3182165f,
  -0.0480233f, -0.0944170f, -0.1832481f, +0.1870791f, -0.1220200f, +0.1508717f, -0.1863463f, -0.0283823f,
  -0.2500345f, +0.1468636f, -0.0394681f, +0.1521800f, -0.4107013f, -0.0992022f, -0.1949331f, -0.2022081f,
  -0.1576683f, -0.2943577f, -0.1989011f, +0.2234741f, -0.0040286f, +0.1738781f, +0.2498310f, -0.3847251f,
  -0.0457350f, -0.0374006f, +0.0837290f, +0.5476342f, +0.0792979f, +0.4599773f, -0.3376191f, +0.1575322f,
  -0.0588258f, -0.0217044f, -0.1335820f, +0.3653695f, -0.0132745f, +0.3500652f, -0.2869262f, -0.0932549f,
  -0.0881378f, -0.5531550f, -0.2777211f, -0.1850071f, -0.2063273f, -0.0406913f, +0.0819556f, -0.0756124f,
  +0.0912488f, +0.0782432f, -0.2808553f, -0.2010853f, -0.0681339f, -0.1084954f, -0.2060018f, -0.3753424f,
  -0.1138389f, +0.7360690f, -0.2051886f, +0.2294645f, -0.0005334f, -0.0056678f, -0.0070229f, -0.5116769f,
  +0.0195408f, +0.4054989f, -0.1334642f, -0.1233304f, +0.0649025f, +0.1047757f, -0.0575992f, -0.2092883f,
  -0.1252179f, -0.1214571f, -0.0106981f, +0.3016216f, +0.3192529f, +0.2879472f, -0.3005412f, +0.0600092f,
  +0.0601036f, -0.1375446f, +0.1043452f, +0.2380577f, +0.0673835f, +0.0293605f, +0.0784231f, -0.0122704f,
  -0.0727271f, +0.0337254f, -0.1309218f, -0.3979981f, +0.0069744f, +0.1488506f, +0.3031222f, -0.2558382f,
  -0.1188826f, -0.3286711f, +0.0399314f, +0.0433677f, -0.4097117f, +0.5281259f, -0.2574776f, -0.0613860f,
  -0.1907911f, -0.0868571f, -0.0829710f, -0.0481349f, +0.0789783f, +0.2544593f, -0.2507946f, +0.1923143f
);

const float biases[4] = float[4](
  -0.0302782f, +0.0944499f, +0.0571594f, -0.0194754f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer9 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1684083f, +0.3011155f, -0.0028455f, +0.0353449f, -0.0792471f, -0.1303419f, +0.2094678f, -0.2538255f,
  +0.0583890f, +0.0951589f, -0.1536740f, -0.1937725f, -0.5641071f, -0.3801846f, +0.8084039f, +0.0018199f,
  -0.4760246f, +0.0874138f, -0.1018462f, -0.4206823f, -0.0286429f, +0.0846708f, +0.2784709f, +0.0547183f,
  -0.1432458f, -0.5992292f, -0.0086820f, -0.1050311f, +0.1945762f, +0.0651441f, -0.0983370f, -0.0765342f,
  -0.0269976f, +0.1929142f, +0.3002279f, -0.0665167f, -0.1303962f, -0.6468628f, +0.5015061f, +0.1041192f,
  +0.3360768f, +0.1694808f, -0.0885453f, -0.3253613f, +0.0019591f, +0.2234697f, +0.1049411f, -0.1326122f,
  -0.0549074f, +0.0042851f, -0.0533772f, +0.1479339f, +0.0802032f, +0.2459457f, +0.1890171f, -0.1096740f,
  -0.2766326f, +0.1224207f, +0.0481902f, +0.0600498f, +0.4421027f, -0.3025720f, +0.1699310f, +0.0238452f,
  +0.1512216f, +0.4069606f, +0.0605547f, +0.1183742f, +0.2449025f, +0.0532438f, -0.2071366f, +0.1601301f,
  -0.0303875f, -0.2134225f, +0.3084935f, +0.2044102f, -0.1435968f, -0.1307553f, +0.0302360f, -0.0548489f,
  -0.0642129f, -0.1263973f, -0.1999262f, +0.0218263f, -0.0181337f, +0.0484864f, -0.0950115f, -0.1557961f,
  +0.1239799f, -0.0782123f, -0.1847568f, +0.2677540f, +0.0812416f, -0.0280651f, -0.1585325f, +0.2098015f,
  +0.0420086f, +0.0076197f, +0.2708128f, -0.1572001f, -0.2556920f, +0.0278820f, +0.7613596f, -0.3624513f,
  -0.1753967f, -0.4314364f, -0.1004765f, -0.2875419f, +0.1123943f, +0.0655349f, -0.4632177f, -0.1337856f,
  +0.1317181f, +0.2252651f, +0.0802718f, -0.2920635f, +0.2818690f, +0.1298574f, -0.1530642f, -0.0236420f,
  +0.2200816f, -0.0567808f, -0.4264446f, +0.3650872f, +0.2870363f, +0.4650318f, +0.1844186f, -0.4380994f,
  +0.3421087f, -0.0651701f, -0.0510659f, +0.0711592f, +0.0200293f, +0.6103982f, -0.4290534f, -0.5764357f,
  +0.1027843f, +0.2138952f, -0.0106175f, -0.1847870f, +0.6749446f, +0.1345854f, +0.1770014f, -0.1627518f,
  -0.1846361f, +0.3411694f, +0.0135812f, -0.0687030f, +0.1300373f, +0.1960124f, -0.5598826f, -0.1010625f,
  +0.8918481f, +0.1554476f, -0.0404987f, +0.1316265f, -0.3937115f, +0.0037254f, -0.2477025f, +0.0767489f,
  -0.0544007f, +0.2858626f, -0.1186295f, -0.0220980f, +0.2873864f, -0.0019487f, +0.0334209f, +0.0856737f,
  +0.0988926f, +0.0601446f, -0.1285468f, -0.1331887f, -0.1224770f, +0.1583518f, -0.3127991f, -0.3007793f,
  +0.7020744f, -0.1004252f, -0.1253153f, -0.0835069f, +0.0491391f, +0.6588597f, -0.0917937f, -0.5496694f,
  -0.0263089f, +0.0698011f, +0.1184034f, -0.3275547f, +0.1611668f, +0.2597154f, +0.6605918f, -0.1123745f,
  +0.0544222f, -0.2803212f, +0.0741618f, -0.1221083f, +0.3327548f, +0.3726854f, +0.0684326f, -0.1295939f,
  +0.2366690f, -0.1915223f, +0.2136746f, -0.2731534f, -0.0842625f, +0.5672604f, -0.1485146f, -0.0404063f,
  -0.1293948f, -0.0137216f, -0.1587533f, -0.0635027f, -0.0105339f, -0.0033256f, -0.0340913f, +0.1287068f,
  -0.1652061f, +0.2619805f, +0.1174223f, -0.1555544f, +0.3005000f, +0.0899562f, +0.6247262f, +0.1391770f,
  +0.1260290f, +0.1322499f, -0.0316210f, -0.3689027f, -0.0685668f, -0.1282799f, -0.7944942f, +0.2901337f,
  -0.1730215f, +0.3213665f, +0.0163371f, -0.0491406f, +0.0392179f, +0.0825717f, +0.2842964f, +0.1235630f,
  +0.0226182f, +0.4242874f, -0.1080627f, -0.1210000f, -0.1099356f, +1.0809206f, +0.4178393f, +0.5908491f,
  +0.7993823f, +0.1174836f, +0.1698124f, -0.4000888f, +0.0253293f, -0.0774163f, -0.0750179f, -0.5005782f,
  +0.0519289f, +0.5267111f, -0.1835528f, -0.3218087f, -0.0117767f, +0.0672644f, +0.1829686f, +0.1233302f,
  +0.0994829f, +0.2613805f, +0.0254777f, -0.2308317f, +0.4390061f, +0.1900290f, +0.0267579f, -0.0975093f,
  +0.5577649f, -0.1586379f, +0.1865459f, -0.5480412f, -0.2791419f, +0.3545882f, +0.1146477f, +0.0410291f,
  -0.0211196f, +0.4055165f, +0.2136990f, +0.2276764f, +0.2829126f, -0.3786996f, +0.5249653f, +0.5098022f
);

const float biases[4] = float[4](
  -0.0796002f, -0.0266735f, +0.0962754f, -0.0136564f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer9 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1982796f, +0.4013808f, -0.0955222f, -0.3641576f, +0.0554066f, +0.4344288f, -0.2805347f, +0.0463115f,
  +0.2911964f, -0.1185971f, +0.0749654f, -0.1897262f, -0.1452583f, -0.1161970f, +0.3727697f, +0.6427712f,
  -0.1668223f, +0.2816302f, -0.0119888f, -0.0775758f, -0.0342651f, -0.0224150f, -0.1153275f, +0.0215249f,
  -0.1718150f, +0.1049219f, +0.0422621f, -0.3015851f, -0.6102319f, +0.0151463f, -0.1667335f, +0.0910903f,
  +0.1814239f, -0.2346552f, +0.2365554f, +0.1779833f, -0.2612975f, -0.0390280f, +0.1275824f, +0.2378100f,
  -0.0723887f, +0.2903235f, +0.0892843f, +0.1939364f, -0.1445579f, +0.0738871f, -0.2809654f, +0.3199294f,
  -0.0569195f, -0.1847394f, +0.0601069f, -0.0853432f, +0.1245939f, +0.1456840f, +0.2856158f, -0.0496791f,
  +0.0581338f, +0.1019167f, -0.0763141f, -0.1322993f, -0.6713787f, +0.4218946f, +0.1509092f, +0.0539954f,
  +0.1250208f, -0.1662806f, -0.0664819f, +0.2071654f, +0.1261157f, -0.0288092f, +0.5531486f, -0.1173375f,
  +0.0984149f, +0.1059027f, +0.1440895f, -0.0317489f, -0.0147615f, -0.0505321f, -0.1698910f, +0.1580369f,
  -0.1913566f, +0.4181346f, -0.0310568f, +0.0645312f, -0.1775053f, +0.0319780f, +0.3128715f, -0.0669498f,
  +0.1971505f, -0.2790074f, -0.1144419f, +0.0263340f, -0.1914928f, +0.0226912f, -0.3306701f, +0.2991588f,
  -0.4355688f, -0.6021382f, +0.1655674f, -0.3706739f, -0.0924056f, -0.0555194f, +0.0304613f, +0.4318097f,
  -0.0436036f, +0.0169200f, -0.1097961f, -0.7397612f, -0.2656696f, +0.2444430f, -0.1741599f, +0.3118981f,
  +0.1347893f, +0.1718294f, +0.1379327f, +0.3359563f, -0.2794389f, +0.1849218f, -0.1342393f, +0.0741350f,
  -0.1735705f, +0.2467923f, -0.0637173f, +0.0188220f, -0.3709800f, +0.0401753f, +0.1513668f, +0.3859832f,
  +0.3230344f, +0.3086839f, +0.0962664f, -0.1098653f, +0.4768558f, -0.2228228f, +0.1510603f, +0.3711206f,
  +0.0970487f, +0.0826265f, +0.2335448f, -0.2462414f, -0.3789832f, -0.1100661f, -0.2236858f, +0.1009472f,
  +0.0645861f, +0.3659615f, +0.0600374f, +0.2133440f, -0.3121177f, -0.0938147f, -0.4376806f, -0.0501070f,
  +0.0202397f, +0.1504038f, +0.0116612f, +0.5861387f, +0.0904799f, -0.5648522f, -0.5783728f, +0.0463687f,
  +0.0967145f, +0.3272309f, +0.2131148f, +0.2994675f, +0.1777666f, -0.0041712f, -0.3495103f, +0.2734316f,
  -0.1351632f, +0.0007608f, -0.0930703f, +0.0015205f, -0.1080801f, +0.3076737f, -0.2752863f, +0.0904122f,
  -0.3454884f, -0.1362032f, +0.0060312f, -0.1402746f, +0.7166018f, +0.4038810f, -0.3437610f, +0.2973910f,
  +0.4418346f, -0.0949898f, +0.0449800f, +0.1328849f, +0.3979487f, +0.2880366f, -0.4800670f, +0.0774251f,
  -0.0744590f, -0.1580509f, +0.1564268f, -0.4799255f, -0.4309929f, +0.2888996f, -0.0506521f, +0.0922783f,
  -0.0883551f, -0.2325129f, -0.2796252f, -0.3248845f, +0.3744210f, +0.2378878f, -0.2567573f, +0.0624351f,
  -0.0240662f, -0.2963782f, +0.0100888f, -0.5360596f, +0.0829520f, +0.3630947f, -0.1855576f, -0.1091894f,
  -0.0288520f, +0.0565446f, +0.0228423f, -0.1987295f, +0.3087734f, -0.0191164f, -0.0619742f, -0.0374673f,
  +0.1072359f, +0.2967707f, -0.0139287f, -0.2356633f, +0.1175236f, +0.1447615f, +0.3371736f, +0.0449271f,
  +0.0230251f, +0.2205935f, -0.0626469f, -0.2043364f, +0.0374198f, -0.0206168f, -0.1198303f, -0.0112063f,
  +0.2629927f, -0.1804013f, +0.1251614f, +0.0835878f, -0.0125550f, -0.0515370f, +0.0675730f, -0.0543825f,
  -0.3929754f, +0.0639365f, -0.2212225f, -0.0082531f, +0.4681618f, +0.1445008f, -0.2301360f, +0.1759379f,
  +0.1472576f, +0.4626057f, -0.1847997f, +0.0156072f, +0.1242975f, -0.1153967f, -0.0246380f, -0.1487652f,
  +0.0635516f, -0.0099557f, -0.2084840f, +0.2064407f, -0.0669488f, -0.1189854f, -0.2247024f, -0.1675138f,
  -0.0368827f, +0.2157377f, -0.0371297f, -0.1511708f, +0.3751189f, +0.0913909f, +0.1091229f, +0.1073162f,
  +0.0106544f, +0.1822237f, +0.0789765f, +0.1091302f, +0.3726367f, -0.3038632f, +0.1161776f, -0.0173340f
);

const float biases[4] = float[4](
  +0.0577098f, +0.0773192f, -0.0019586f, +0.1458602f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer10 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0962851f, +0.0676307f, +0.0141743f, -0.0388460f, +0.1091256f, +0.3070959f, +0.4720750f, +0.1461056f,
  +0.2234500f, -0.0341197f, -0.1286054f, -0.1529367f, -0.1680197f, -0.0989501f, -0.1377784f, -0.2005764f,
  -0.0715842f, +0.6663226f, +0.0558438f, -0.3383068f, -0.0565532f, -0.1067121f, -0.0237018f, +0.1972540f,
  +0.5570914f, +0.1964034f, -0.1265116f, -0.0524337f, +0.1881316f, +0.0954226f, +0.2920422f, -0.1301854f,
  +0.1895024f, +0.0112354f, -0.1773292f, +0.0369117f, -0.3622912f, -0.0954889f, +0.0580527f, -0.2344448f,
  -0.0872880f, -0.0016105f, +0.2586127f, -0.2114518f, +0.3063252f, +0.1127868f, -0.0964445f, +0.1245020f,
  +0.2085549f, -0.0219196f, -0.0025987f, -0.1846348f, +0.0140450f, +0.0601833f, +0.2001574f, -0.0594405f,
  +0.3825688f, +0.0474033f, -0.0311919f, -0.2769304f, +0.0643194f, +0.1450726f, -0.0141075f, +0.2922549f,
  +0.0152130f, -0.0053350f, +0.2133059f, -0.2787042f, +0.1181216f, +0.4300222f, -0.2021358f, +0.2154113f,
  -0.0810594f, -0.2708857f, -0.0450608f, -0.4135240f, +0.2057344f, -0.4453314f, +0.0721733f, +0.0218367f,
  -0.0203368f, +0.2393555f, +0.1070129f, -0.1784313f, -0.0407866f, +0.0526963f, +0.0090671f, +0.1496485f,
  -0.0060965f, +0.1006996f, -0.0571554f, +0.1705019f, +0.0102844f, +0.0225276f, -0.1498351f, -0.1289055f,
  +0.1144133f, -0.3554648f, +0.3588603f, +0.0358906f, -0.1635753f, -0.0725164f, -0.0707377f, +0.2488254f,
  -0.2852432f, +0.2754335f, +0.1514969f, +0.1585067f, +0.3785956f, +0.0476998f, -0.1830496f, -0.1627596f,
  +0.0552955f, -0.1369327f, +0.1887019f, -0.1274989f, +0.2445842f, +0.1337094f, -0.1055635f, +0.1651901f,
  -0.3242249f, -0.1479135f, -0.1805359f, -0.0413784f, -0.0702774f, +0.1581333f, -0.4425385f, -0.1017844f,
  -0.2385814f, +0.2272751f, +0.1817637f, +0.0789531f, +0.0174008f, +0.1374060f, +0.0102471f, -0.3137141f,
  +0.0313504f, +0.2608955f, +0.1604888f, -0.1929993f, +0.2120538f, -0.1085829f, -0.0925251f, -0.0510863f,
  +0.0218304f, +0.0593644f, +0.0781163f, +0.0267252f, -0.0364653f, -0.2215970f, +0.0317126f, +0.0699139f,
  +0.0353652f, -0.0678170f, -0.2610359f, -0.0796407f, +0.1370551f, -0.1402040f, +0.1115832f, +0.0595955f,
  -0.0729983f, -0.0433787f, +0.0455052f, +0.1770647f, +0.0656600f, -0.1233551f, -0.0506128f, -0.0200646f,
  -0.0205189f, -0.0768139f, +0.0260013f, -0.1636575f, -0.0016982f, +0.0022748f, -0.0353672f, +0.0372979f,
  +0.0119265f, +0.3261280f, -0.2136233f, +0.1178023f, -0.0381401f, +0.1173769f, -0.0716083f, -0.0229322f,
  -0.0523601f, -0.0040719f, -0.0607906f, +0.2996848f, +0.0460954f, -0.0497435f, +0.1032710f, -0.0500506f,
  -0.0347514f, +0.0202722f, +0.1164736f, +0.0084814f, -0.1391282f, +0.0702794f, -0.2545213f, +0.1668067f,
  -0.2387894f, +0.2335390f, -0.0814105f, +0.1069815f, -0.0547325f, -0.0214149f, -0.0886643f, +0.1457436f,
  +0.1344767f, +0.1980098f, +0.0258860f, -0.0783010f, +0.2046957f, -0.0712052f, +0.0538221f, -0.2182864f,
  -0.0930708f, +0.0503949f, +0.2841971f, -0.6086252f, -0.0073719f, +0.0015059f, -0.0303233f, -0.0003419f,
  +0.1560509f, +0.0479540f, -0.1222269f, +0.1224003f, +0.0445744f, +0.7723976f, +0.4345438f, -0.0408944f,
  -0.1032884f, -0.1416628f, -0.0925532f, +0.2238622f, -0.4056366f, +0.0688099f, +0.1869001f, -0.1775217f,
  +0.4387033f, -0.3386777f, +0.5806130f, +0.0647811f, +0.2558464f, -0.2159349f, +0.3772910f, +0.2725919f,
  +0.5610153f, -0.5493586f, -0.2443839f, -0.2025163f, +0.0777366f, +0.6123696f, +1.0762953f, +0.0530109f,
  +0.0132626f, +0.3340172f, +0.0193005f, +0.3843826f, +0.3190266f, -0.2055608f, +0.2681774f, -0.4471947f,
  +0.4334274f, +0.0542665f, -0.0534752f, -0.2209168f, -0.2468198f, -0.1957359f, +0.0897414f, -0.1354431f,
  +0.6651208f, +0.1949391f, +0.1345949f, +0.0438498f, +0.6978185f, -0.3349468f, +0.2666991f, +0.1261348f,
  +0.3122188f, -0.0981964f, +0.3584973f, -0.3897333f, +0.1018068f, -0.0034528f, +0.1704153f, -0.3430309f
);

const float biases[4] = float[4](
  +0.0152484f, -0.0953809f, +0.0814179f, -0.0928681f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer10 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0856668f, +0.0773357f, +0.2057629f, -0.1997677f, +0.1468703f, +0.1589148f, +0.0756721f, +0.1338832f,
  +0.1880592f, +0.4157521f, +0.4623482f, -0.2132703f, +0.5625103f, +0.1711092f, -0.3722454f, +0.2979154f,
  -0.0500961f, +0.1000306f, +0.2299651f, +0.1225890f, -0.3374214f, +0.6129130f, -0.3867964f, +0.2877224f,
  +0.0295746f, -0.2904886f, +0.2552574f, -0.0572334f, -0.0347852f, +0.0813431f, +0.2692781f, -0.1265726f,
  +0.3470096f, -0.6498621f, +0.6060327f, -0.3562540f, +0.6319258f, +0.2591651f, -0.0470064f, -0.1739130f,
  -0.0593475f, -0.1544104f, +0.1294710f, -0.1193452f, -0.0077249f, +0.1210732f, -0.1966307f, +0.0488327f,
  +0.2956440f, +0.0025455f, -0.0638021f, +0.1307562f, +0.1958891f, +0.1294436f, +0.1419407f, -0.1211061f,
  +0.3462724f, -0.1780468f, +0.2076281f, -0.0110696f, +0.2697013f, -0.2544616f, -0.0367246f, -0.1438663f,
  +0.1287868f, -0.2511589f, +0.0411037f, +0.0142637f, -0.2709553f, +0.1674190f, -0.0103667f, -0.1413763f,
  -0.2075934f, +0.4037501f, -0.0926482f, -0.1330481f, -0.0706244f, -0.0915069f, +0.0028044f, -0.1837902f,
  +0.1399338f, -0.0680607f, +0.3154696f, -0.3820765f, -0.0379757f, -0.0843250f, -0.4846739f, -0.3530954f,
  -0.1309890f, -0.4105204f, +0.2821121f, -0.3062760f, -0.1293847f, +0.2975545f, +0.0559576f, -0.0109701f,
  +0.2487360f, -0.1399811f, +0.1861140f, -0.1478347f, -0.0348131f, -0.1817327f, +0.0049160f, +0.1155503f,
  +0.5288642f, -0.2549243f, +0.3269104f, -0.7755052f, +0.5058363f, +0.1041086f, -0.5366666f, +0.4545185f,
  -0.0756436f, -0.0855542f, +0.3846636f, +0.0727722f, +0.2408160f, +0.1550828f, -0.1466631f, +0.4950947f,
  +0.0255723f, -0.1620365f, -0.1095517f, +0.0998306f, -0.1784941f, -0.3232249f, +0.1588310f, +0.2280512f,
  +0.1952105f, -0.0235457f, +0.2882666f, -0.1599677f, +0.0653460f, -0.2540455f, +0.1937950f, +0.0490757f,
  +0.2252928f, -0.0862380f, +0.2345668f, -0.5833633f, -0.0197168f, -0.4090423f, +0.0431985f, -0.0056204f,
  +0.0464255f, -0.0308284f, +0.1536975f, -0.3197185f, -0.1983336f, +0.2514700f, +0.1403438f, -0.1723196f,
  +0.2875789f, +0.6038164f, +0.1086859f, -0.1903020f, -0.2485178f, -0.2106188f, -0.2017806f, -0.1153625f,
  +0.2062954f, +0.6819531f, -0.0502109f, -0.3078192f, +0.0167376f, +0.1778174f, -0.0610189f, -0.2589869f,
  +0.1145155f, +0.1901630f, -0.0882243f, +0.0480647f, +0.2164646f, -0.1990532f, +0.2310737f, +0.3797034f,
  -0.2148994f, +0.3496269f, +0.4547059f, +0.1568143f, +0.0577374f, -0.0875224f, -0.1616073f, -0.0184090f,
  -0.0774111f, -0.2587984f, +0.4307247f, -0.5074986f, -0.0688229f, +0.2840532f, +0.3242837f, -0.4455607f,
  +0.2445208f, -0.0703688f, +0.0960899f, -0.1494850f, +0.3750115f, -0.1196041f, +0.3282009f, +0.1337700f,
  -0.3756440f, +0.4599001f, +0.0112530f, -0.4179190f, +0.1199316f, +0.4075857f, -0.2001062f, -0.0032129f,
  -0.0012873f, +0.1390399f, -0.3512442f, +0.3358789f, +0.2065653f, +0.0945513f, +0.2234636f, -0.2999610f,
  +0.1136744f, -0.0369978f, +0.0843050f, -0.1457555f, +0.0793623f, -0.1166034f, +0.0643546f, +0.0297506f,
  +0.0446396f, +0.4556253f, -0.2267140f, +0.1140837f, +0.0673929f, -0.2984067f, +0.1534750f, +0.3198956f,
  -0.0170738f, +0.1511287f, -0.1750261f, +0.4346519f, +0.2203679f, -0.3117811f, -0.1159635f, -0.0434850f,
  +0.1458367f, -0.0389960f, +0.0653383f, +0.4206505f, +0.1474398f, -0.1878104f, -0.0399472f, -0.1105748f,
  +0.0064168f, +0.0351609f, -0.3801754f, +0.5225078f, +0.4626414f, -0.0889471f, -0.1625363f, -0.0276243f,
  -0.0837613f, +0.5756238f, -0.1924081f, +0.0921915f, -0.1319351f, -0.0319284f, -0.1156487f, -0.0336118f,
  +0.4623108f, -0.0146830f, +0.0277100f, -0.2755975f, +0.0799755f, +0.0661711f, +0.1643292f, +0.1944780f,
  +0.3906537f, +0.0735894f, -0.2411868f, +0.2688037f, -0.0757001f, -0.0989260f, +0.0252532f, -0.0343748f,
  -0.1327024f, +0.1559132f, -0.4892064f, +0.2836919f, -0.1095242f, +0.0133672f, +0.0301637f, -0.0477974f
);

const float biases[4] = float[4](
  -0.2416255f, -0.0675102f, -0.1139704f, -0.0034074f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer11 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2878610f, -0.0256573f, +0.0322196f, +0.1030262f, -0.1256291f, -0.0131900f, -0.2256552f, -0.0168627f,
  -0.1095489f, +0.0428550f, -0.2136310f, -0.1899223f, -0.0612451f, -0.4797802f, -0.0565980f, -0.4011197f,
  -0.0533583f, -0.2922231f, +0.1275362f, +0.2309954f, -0.1832935f, +0.0158785f, +0.1442880f, +0.1988718f,
  -0.2595733f, +0.0881347f, -0.1091069f, -0.0596515f, +0.1225303f, -0.2218455f, -0.2230062f, +0.3083273f,
  -0.3506993f, -0.0723335f, +0.0283835f, -0.1997542f, +0.1093874f, +0.1201746f, -0.2007809f, -0.0970017f,
  -0.2840347f, -0.4456976f, +0.1234367f, +0.4186526f, -0.2745973f, +1.0505896f, -0.4146494f, -0.3453016f,
  -0.0985554f, +0.0884621f, -0.0777212f, -0.0292590f, +0.1499718f, +0.2140773f, -0.0156596f, +0.0009075f,
  +0.0788671f, -0.0408086f, -0.0008182f, +0.1019932f, -0.5250245f, -0.0041750f, -0.4457019f, -0.3014852f,
  -0.2765969f, -0.0079705f, +0.1438411f, +0.1353403f, +0.4318740f, -0.1090399f, -0.1468497f, +0.1070839f,
  -0.0456338f, +0.0327491f, -0.1894771f, -0.2900144f, -0.0754293f, -0.2360147f, -0.0420413f, -0.1780093f,
  -0.0929347f, +0.1675662f, +0.0527982f, +0.0234582f, -0.0143051f, -0.2809116f, +0.2015340f, -0.2481841f,
  +0.0680303f, +0.1720516f, +0.0273951f, -0.0173076f, +0.0213353f, +0.0201632f, -0.1508086f, +0.2548827f,
  -0.5225606f, -0.7319857f, -0.0326150f, -0.2942999f, +0.0070401f, -0.8651614f, -0.3713714f, +0.5096460f,
  -0.1501245f, -0.1852927f, -0.1369058f, +0.3381188f, -0.1258791f, -0.3852486f, -0.0392327f, -0.0960789f,
  +0.3432638f, +0.0679619f, +0.0627702f, -0.1339614f, -0.0577779f, +0.2459724f, +0.0073347f, -0.1839960f,
  +0.2896508f, -0.4847504f, +0.1062833f, -0.1574365f, -0.4217126f, -0.3254744f, -0.0148355f, +0.1362198f,
  -0.2286146f, +0.0662124f, +0.0768888f, -0.2811933f, -0.1266276f, -0.4561829f, -0.1702749f, +0.3530119f,
  -0.0456697f, +0.1209469f, -0.1199542f, -0.1668027f, +0.0929070f, -0.0618754f, -0.4018871f, +0.0840745f,
  +0.2739629f, +0.1642043f, -0.2187304f, -0.1663233f, +0.1620008f, +0.3573446f, +0.1236630f, +0.0692851f,
  +0.1023932f, -0.3547456f, +0.0728997f, -0.5054433f, +0.1564608f, -0.1422723f, +0.7113365f, -0.0603356f,
  -0.1939372f, -0.1774302f, -0.0135637f, +0.0363944f, -0.0048066f, -0.0797961f, +0.3523194f, +0.1772062f,
  +0.4657163f, -0.0584858f, +0.0124666f, +0.1091766f, +0.1819821f, +0.1196241f, -0.3532192f, -0.1528137f,
  -0.1820647f, -0.1035903f, -0.1058389f, -0.2220634f, +0.0307259f, -0.4400106f, +0.2080687f, -0.0355211f,
  +0.0865814f, +0.3154312f, +0.1599196f, +0.0175636f, +0.0036466f, -0.1223239f, -0.2296334f, -0.2301161f,
  +0.1059567f, -0.3113978f, +0.0019581f, +0.3046097f, -0.2951395f, +0.1759536f, -0.0213816f, -0.0786182f,
  -0.3055281f, -0.0815055f, -0.2357358f, +0.1201876f, -0.1857474f, -0.0826903f, +0.2147998f, +0.1220152f,
  -0.0326050f, +0.2821758f, -0.0189424f, +0.0041379f, +0.3151176f, -0.1955877f, +0.0946522f, -0.0050599f,
  +0.2341258f, +0.1684378f, -0.1275286f, -0.1216110f, +0.0436552f, -0.1060903f, -0.2852326f, +0.3639799f,
  +0.0117602f, -0.0176743f, +0.1536649f, -0.0023100f, -0.0912122f, -0.0250416f, +0.0351499f, -0.0585782f,
  -0.0693263f, -0.2538013f, -0.0041746f, -0.0099668f, -0.1382696f, -0.0851559f, -0.3353266f, +0.0586802f,
  +0.0405846f, -0.5977396f, -0.0659469f, -0.1508574f, -0.9475502f, -0.6275335f, +0.1884222f, +0.2434090f,
  -0.5609599f, -0.0430651f, -0.1145965f, -0.2427033f, -0.5922762f, -0.1180927f, +0.2020931f, -0.1437646f,
  -0.1428691f, +0.1774776f, +0.0830194f, -0.0423949f, +0.1512588f, +0.0572724f, -0.3823791f, -0.1351804f,
  -0.1694098f, -0.1662898f, +0.0372582f, -0.5690647f, -0.1232676f, -0.0448355f, -0.2828064f, -0.1409288f,
  -0.1347451f, -0.0550941f, +0.0278172f, +0.0356875f, -0.1688426f, -0.0144514f, -0.3173239f, -0.1751456f,
  +0.0549955f, -0.2040122f, -0.0197428f, -0.2383939f, -0.2044149f, +0.4252922f, -0.5107905f, -0.4177937f
);

const float biases[4] = float[4](
  -0.1101407f, +0.0089209f, +0.0617502f, +0.0018316f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer11 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2213877f, -0.2266413f, -0.0531411f, -0.6049021f, +0.3557524f, +0.0376928f, +0.1607526f, -0.3054756f,
  -0.0651441f, +0.0455606f, -0.0373161f, -0.2974507f, +0.2793792f, -0.0665363f, -0.2810634f, -0.3855110f,
  +0.0176025f, +0.2916247f, +0.0239019f, +0.0536978f, +0.1251366f, +0.0292167f, -0.4122804f, -0.0602603f,
  -0.1098019f, +0.3414811f, -0.1067569f, +0.2250533f, -0.1954109f, -0.0637348f, +0.1370797f, -0.0078682f,
  -0.2707759f, -0.1361484f, -0.2505256f, +0.7628266f, -0.1167732f, +0.1449395f, -0.4934335f, -0.0872334f,
  -0.2451564f, -0.3787706f, +0.4060874f, +0.1837356f, -0.0299191f, +0.0936539f, -0.2482938f, -0.1300239f,
  -0.0269552f, -0.0546964f, +0.1069532f, -0.1414917f, +0.4695094f, -0.0963704f, +0.3901451f, +0.2198110f,
  +0.0715748f, -0.0063202f, -0.0481318f, -0.1863985f, -0.0199902f, +0.0541897f, -0.0669782f, +0.0877384f,
  +0.3695721f, +0.1017035f, +0.0948987f, -0.2312451f, +0.4058833f, +0.1100376f, +0.1168604f, +0.1544568f,
  -0.1650736f, +0.1726806f, +0.0406962f, +0.1508784f, -0.1736835f, +0.1764589f, -0.1455045f, +0.0131517f,
  +0.2948092f, -0.2132667f, -0.2536336f, +0.3533441f, -0.0455261f, +0.3359481f, -0.5562630f, +0.2181010f,
  +0.2124016f, +0.0573377f, +0.1942128f, -0.1497174f, +0.2469179f, +0.0779019f, -0.0521589f, +0.0572319f,
  +0.0384559f, -0.0030492f, -0.0637836f, +0.3437545f, +0.3472195f, +0.0453754f, -0.0827564f, +0.0408669f,
  -0.0040842f, +0.3925984f, +0.1448347f, -0.1103291f, +0.2899584f, -0.4936305f, +0.3233337f, -0.1134117f,
  -0.3099499f, +0.2593049f, +0.0225112f, -0.2589916f, -0.0080829f, +0.1165332f, -0.0984760f, -0.2516482f,
  -0.0982426f, -0.0020914f, -0.0920535f, -0.6690717f, -0.5484521f, -0.2612482f, +0.2511731f, +0.1598061f,
  +0.0139094f, -0.1958854f, +0.3639003f, -0.9460624f, -0.6681622f, +0.0984012f, +0.3354588f, +0.1259019f,
  +0.1468331f, -0.1685227f, +0.0801271f, -0.0609549f, -0.4782490f, +0.5026736f, -0.4905954f, +0.4737339f,
  -0.2780384f, -0.2428179f, -0.1238800f, -0.0219173f, +0.0425358f, +0.0655657f, -0.1404240f, -0.1478539f,
  -0.1933329f, -0.3950575f, -0.1043327f, -0.1201162f, -0.0115090f, +0.0738587f, +0.2406475f, +0.0278621f,
  -0.0936445f, +0.2317538f, +0.0576401f, -0.3100511f, +0.1540523f, +0.0834300f, -0.1959922f, -0.1096112f,
  -0.0251438f, -0.2058748f, +0.1229119f, +0.5266251f, -0.5765668f, -0.1993589f, +0.3174910f, -0.0641121f,
  -0.0786225f, -0.2976182f, -0.2871256f, +0.5660408f, +0.1469644f, -0.4470747f, -0.2501157f, -0.1508867f,
  -0.0277365f, +0.0334807f, -0.1553072f, -0.0358059f, +0.0248116f, +0.1906765f, +0.2458141f, +0.1933722f,
  +0.3255979f, -0.3542304f, +0.1300739f, -0.0767070f, -0.4392483f, +0.3125559f, -0.0484466f, -0.5133768f,
  +0.1344882f, -0.3285085f, -0.3320878f, -0.0517124f, -0.1247843f, -0.1692525f, +0.0948005f, -0.0210803f,
  +0.3515926f, -0.0805711f, +0.2842321f, -0.1556521f, +0.0359087f, -0.0396495f, -0.1045748f, +0.0584764f,
  -0.2949899f, -0.2347842f, +0.2059781f, +0.2120855f, +0.0747666f, -0.2938322f, -0.5752830f, +0.1954264f,
  +0.2434891f, +0.4342877f, -0.0629119f, -0.0174859f, +0.0192869f, -0.0870159f, -0.1838588f, +0.5611779f,
  +0.1330588f, -0.1093936f, -0.1824860f, +0.1609590f, -0.2128315f, +0.1488056f, -0.1161446f, +0.4243361f,
  +0.1544291f, -0.0299311f, +0.1789459f, -0.3629695f, -0.1281405f, -0.2142073f, -0.0697576f, +0.0944050f,
  +0.1393621f, +0.4647975f, +0.1747301f, -0.4923629f, -0.3340333f, +0.3095021f, +0.5698599f, -0.2640282f,
  -0.1017015f, -0.1481826f, +0.2444059f, -0.1751166f, -0.0312270f, +0.4059237f, +0.0680660f, -0.0973036f,
  -0.2464453f, +0.1830407f, -0.2968504f, -0.3739726f, +0.7710518f, +0.1033372f, -0.1485777f, -0.0118269f,
  -0.0387902f, +0.7203139f, +0.0557793f, -0.0885595f, +0.5090659f, -0.2337910f, -0.0189042f, +0.1718295f,
  +0.0737253f, -0.1896441f, +0.0035441f, -0.2225373f, +0.1415786f, -0.1810226f, -0.2583100f, +0.0643240f
);

const float biases[4] = float[4](
  -0.0339008f, -0.0876219f, +0.0355060f, +0.1026978f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer12 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.5796382f, -0.2326386f, -0.1984607f, +0.2474939f, -0.0806842f, +0.3238504f, -0.1892363f, +0.2906663f,
  +0.1038970f, -0.4004310f, +0.1406108f, +0.0168462f, +0.3647690f, +0.0665021f, -0.1324145f, -0.1293563f,
  -0.0683693f, +0.2340156f, -0.0339938f, +0.0822773f, +0.3323610f, -0.2933857f, -0.3484740f, -0.0970781f,
  -0.1311736f, +0.2866425f, +0.1361768f, +0.0326054f, +0.2711556f, -0.2622835f, -0.2131921f, +0.1042380f,
  -0.1846126f, -0.6012155f, +0.2743879f, +0.2759806f, -0.1285818f, -0.1302227f, +0.0814622f, -0.1900728f,
  -0.0855869f, +0.1317792f, -0.5472277f, +0.2671178f, -0.2022360f, -0.2512998f, -0.1667474f, +0.0735511f,
  +0.0632140f, -0.0899743f, +0.2268696f, -0.0030467f, -0.1146842f, -0.0117669f, -0.0876082f, -0.1864716f,
  -0.0389931f, -0.0515922f, -0.4316106f, -0.2316213f, +0.0916667f, -0.0201246f, -0.0494397f, -0.0514178f,
  -0.0882144f, +0.1313653f, -0.2548310f, +0.0143852f, -0.2217587f, -0.3294212f, +0.0022334f, -0.1698206f,
  -0.4040307f, +0.2699985f, -0.2660415f, -0.1182653f, -0.0670479f, +0.0530702f, -0.0124840f, +0.1760723f,
  -0.2024089f, +0.6082920f, -0.2239107f, -0.2031502f, +0.0523573f, -0.6066116f, +0.0973485f, +0.1831700f,
  +0.3253172f, +0.4191649f, +0.2664403f, -0.2334610f, -0.1263660f, -0.1820514f, +0.3085088f, +0.2042103f,
  +0.1324191f, -0.1573640f, -0.0622829f, -0.1123954f, -0.2536315f, -0.3152093f, +0.2496027f, +0.0146826f,
  +0.0618608f, +0.0895244f, +0.1049843f, +0.0263305f, -0.3101776f, +0.2087027f, +0.0136828f, +0.1569715f,
  +0.2065362f, +0.5810612f, +0.1455926f, +0.0429045f, -0.2656336f, +0.1262345f, +0.1850716f, +0.1661812f,
  +0.3583099f, +0.0142352f, +0.2074884f, -0.1093031f, -0.4422294f, -0.3201996f, +0.5263425f, +0.1421402f,
  +0.0287937f, +0.2015600f, +0.2360952f, -0.1006227f, +0.1532733f, -0.0544646f, +0.1621620f, +0.0960393f,
  +0.0785771f, -0.0020485f, -0.1027473f, +0.1183319f, -0.2463205f, -0.2825870f, +0.2455668f, +0.1240206f,
  -0.1044875f, +0.0621862f, -0.1183651f, -0.0426820f, +0.0313773f, +0.0585705f, -0.1747959f, +0.0082370f,
  +0.0118379f, +0.1578899f, -0.1303561f, +0.0341694f, +0.0586527f, -0.2558813f, +0.0097090f, +0.0621556f,
  +0.0290451f, +0.0647645f, +0.0291096f, -0.1230608f, -0.2192399f, -0.0268501f, +0.1872284f, +0.1105349f,
  -0.1279887f, +0.0041510f, -0.0288027f, +0.1014390f, -0.0355904f, -0.1889662f, -0.0721603f, +0.0706964f,
  +0.1301712f, +0.0968633f, +0.1025378f, -0.0862352f, -0.0770750f, -0.1583594f, +0.1876578f, -0.1410171f,
  +0.0467837f, +0.0580098f, +0.0569239f, -0.1237787f, +0.0064469f, +0.3186943f, -0.0310878f, +0.2475829f,
  -0.0288099f, -0.0401312f, -0.0035416f, -0.1273547f, -0.2622776f, -0.0033056f, +0.1128826f, -0.0576866f,
  +0.2972758f, +0.0291837f, +0.0947524f, -0.0435796f, +0.2767889f, +0.0814473f, +0.0531475f, +0.3182600f,
  -0.0614782f, +0.0224326f, -0.0284610f, +0.2715212f, -0.0385450f, -0.0981022f, +0.0688256f, +0.2041812f,
  +0.1869990f, -0.2091017f, +0.0652592f, +0.1296331f, +0.1514591f, +0.5980083f, +0.0675398f, -0.2290277f,
  +0.1529127f, -0.2692351f, +0.0123583f, +0.5380878f, +0.1438264f, +0.4959555f, -0.1360616f, +0.0241339f,
  +0.0530114f, -0.3446459f, +0.2882788f, +0.1142861f, -0.1547797f, +0.4611031f, +0.0214420f, -0.0790500f,
  +0.0181006f, -0.0497013f, -0.0453263f, +0.0694041f, +0.1487335f, +0.2093319f, +0.3838137f, -0.1108980f,
  -0.3609134f, +0.2834416f, +0.3826522f, +0.3265304f, -0.1768408f, -0.0799797f, -0.6407029f, -0.1593679f,
  -0.0639762f, +0.0022350f, +0.1564444f, -0.2148663f, -0.0917987f, +0.2357170f, -0.4566831f, +0.4795051f,
  +0.2988310f, -0.1615566f, -0.0938525f, +0.1079047f, +0.0111798f, +0.0553686f, +0.2588775f, -0.1100056f,
  +0.1435471f, -0.2498776f, +0.4451683f, +0.3617310f, +0.0676525f, +0.0531949f, -0.2278332f, -0.0120920f,
  -0.1376153f, +0.0902660f, +0.4610755f, +0.0404075f, +0.0718473f, +0.0390342f, +0.0870391f, +0.3229371f
);

const float biases[4] = float[4](
  +0.0028760f, -0.2379639f, +0.0230115f, -0.1817099f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer12 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.6786439f, +0.0880261f, -0.0736114f, -0.1152623f, -0.1085977f, -0.0926813f, +0.1307609f, -0.0718216f,
  +0.0684431f, +0.3166950f, -0.3698857f, +0.1348990f, +0.2270663f, -0.0334076f, +0.1056068f, -0.0475196f,
  -0.1959791f, +0.1354259f, +0.2122675f, +0.1673174f, -0.0509337f, -0.1946968f, +0.3900104f, -0.1475340f,
  +0.1452367f, -0.4257574f, -0.0845304f, -0.3191840f, -0.3547966f, -0.1199155f, +0.3701850f, +0.2428181f,
  +0.1154261f, +0.1872880f, -0.5364974f, +0.0638893f, -0.3380059f, -0.0408530f, -0.0446180f, +0.0466952f,
  -0.0885943f, +0.0884995f, -0.0529949f, +0.3119951f, +0.0848896f, -0.0091561f, +0.3086528f, -0.0050177f,
  +0.2527927f, +0.2318449f, -0.1062092f, +0.1702164f, +0.3866215f, -0.3097087f, +0.0533858f, +0.2614449f,
  -0.0670390f, -0.1948470f, -0.1431507f, +0.0949082f, -0.2320195f, -0.1198535f, +0.0266160f, -0.2203987f,
  -0.0442146f, -0.0633823f, -0.0655952f, -0.0715782f, -0.2138439f, +0.0052382f, +0.1115273f, -0.3071186f,
  -0.5786319f, +0.0820965f, +0.2140433f, +0.0693478f, +0.2705846f, +0.2365678f, -0.2611223f, +0.4231215f,
  -0.3068558f, +0.1698151f, +0.0099441f, +0.4679232f, -0.0650592f, +0.3181638f, +0.2584327f, +0.2146294f,
  +0.0740333f, +0.0563766f, -0.1013888f, -0.1271954f, +0.0588986f, +0.1409663f, -0.1614498f, -0.2082669f,
  -0.6663983f, -0.0845499f, -0.0322375f, +0.1367616f, +0.6679080f, +0.1849511f, -0.0289919f, -0.3680232f,
  +0.0633254f, +0.8074974f, -0.0563752f, +0.0102166f, -0.1287386f, -0.1368416f, +0.2164337f, -0.2570651f,
  -0.0568977f, +0.1454566f, +0.0835016f, +0.1172422f, +0.3373631f, +0.2961817f, +0.1535653f, +0.2252588f,
  +0.3880489f, -0.0703708f, -0.1232957f, +0.1396567f, +0.2644091f, +0.0676118f, -0.0456200f, +0.1267437f,
  +0.0199507f, +0.3526352f, +0.2064808f, +0.0667708f, -0.1475209f, +0.0889035f, -0.1672285f, -0.2158455f,
  -0.0529678f, +0.1707422f, -0.0039848f, -0.1855618f, -0.2302258f, -0.1456965f, -0.1618568f, +0.0948198f,
  +0.5582595f, +0.1013312f, -0.0457138f, -0.0365864f, +0.1241987f, -0.3390293f, -0.0507067f, -0.0610485f,
  +0.3245994f, -0.0713750f, -0.0438618f, -0.3756367f, -0.0167320f, +0.4326996f, +0.0720712f, -0.3072571f,
  +0.0514847f, +0.2468698f, +0.0037838f, -0.1858682f, +0.1037245f, -0.0190473f, -0.1730710f, -0.1207166f,
  +0.1931146f, -0.2210019f, +0.0374779f, +0.0289848f, -0.2153011f, +0.4454370f, -0.3169876f, +0.4492465f,
  +0.2956393f, +0.0069813f, -0.4384817f, +0.2421372f, +0.3697655f, -0.3925161f, -0.0746837f, -0.1812579f,
  -0.0146852f, +0.4461726f, +0.0207399f, +0.3079400f, -0.2295238f, -0.5533495f, -0.4474827f, -0.0243886f,
  -0.3811019f, -0.2709476f, -0.3187006f, -0.0953200f, +0.0132548f, -0.2136722f, +0.0192876f, +0.4032064f,
  +0.0772148f, +0.1266982f, -0.1620003f, +0.3014178f, -0.1402412f, +0.0915192f, -0.4215677f, +0.6429829f,
  +0.1834479f, -0.1856543f, +0.3091534f, +0.0951769f, +0.2679348f, +0.0123533f, -0.2403683f, +0.1716542f,
  -0.1761974f, +0.4068759f, -0.3373558f, -0.0954174f, +0.0427087f, -0.0983647f, -0.2198487f, +0.0931488f,
  +0.2655076f, +0.1291248f, -0.3467951f, -0.1767790f, -0.0916325f, -0.0692357f, +0.0593179f, +0.0013324f,
  -0.0941469f, +0.0504550f, -0.1084127f, -0.0563252f, -0.4203598f, -0.1150087f, +0.3685401f, +0.2988737f,
  +0.2171547f, -0.3079890f, +0.1373978f, +0.1397517f, -0.3504603f, +0.3485090f, +0.2225644f, +0.0584211f,
  +0.2477871f, -0.4102581f, -0.1096252f, +0.2948545f, +0.4157969f, +0.4203406f, +0.3761350f, +0.1443696f,
  -0.3130528f, +0.1504430f, +0.3689220f, +0.2278255f, +0.5108821f, +0.1476923f, +0.3197909f, +0.2248218f,
  +0.1671622f, -0.0090955f, -0.1224507f, -0.1996578f, +0.3093424f, -0.1213488f, +0.1824706f, +0.2246096f,
  -0.0172944f, -0.0627452f, -0.0665257f, +0.3403694f, -0.0450434f, -0.1486362f, +0.0704019f, +0.1470261f,
  -0.1149710f, +0.0246485f, -0.2017497f, +0.0941699f, +0.3284454f, -0.0763815f, +0.2336432f, +0.4453262f
);

const float biases[4] = float[4](
  -0.1269072f, -0.0418564f, +0.0186752f, -0.0947215f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer13 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1174162f, -0.0337491f, +0.1771316f, -0.3119088f, -0.1364376f, -0.2349647f, -0.1785128f, +0.2173820f,
  -0.4716831f, -0.0870156f, +0.0149367f, -0.2256401f, -0.0906658f, +0.0365677f, +0.1661077f, -0.2038537f,
  -0.1325076f, -0.4029144f, +0.0059215f, +0.1188047f, +0.0802173f, -0.0537509f, -0.0764920f, +0.0660894f,
  -0.1612238f, +0.1248114f, -0.2341713f, -0.3455667f, -0.1530651f, -0.2851480f, +0.4014155f, -0.0608519f,
  +0.0224189f, +0.0899438f, +0.3211127f, -0.2040079f, -0.2535454f, +0.2931254f, -0.3748614f, +0.3390191f,
  -0.1286663f, -0.1539464f, -0.2338752f, +0.2834994f, -0.6567741f, +0.3350347f, -0.9148986f, +0.2939169f,
  -0.1631227f, -0.1265861f, -0.0502468f, +0.1183355f, +0.3234441f, +0.2584036f, +0.3349239f, -0.2055017f,
  +0.4288872f, -0.0060457f, -0.1066229f, -0.0336224f, +0.0274848f, -0.2962575f, +0.0959033f, -0.1425294f,
  +0.5747314f, -0.0868657f, +0.0058818f, +0.1613179f, +0.1559504f, +0.0916274f, +0.7912955f, +0.2303118f,
  -0.2839409f, +0.0857932f, +0.2736970f, -0.4715538f, -0.7634679f, -0.1033908f, -0.1361262f, +0.2212492f,
  -0.1350282f, -0.2499239f, -0.0278325f, -0.2621348f, -0.1355986f, -0.0627753f, -0.1223121f, -0.0220256f,
  -0.0251358f, -0.1175516f, -0.0595654f, +0.5377733f, +0.1873857f, +0.2193483f, -0.0541685f, +0.0289529f,
  +0.0821273f, +0.3088048f, -0.2501544f, +0.1101916f, -0.3915743f, -0.5659596f, -0.2837545f, -0.0168375f,
  +0.0827454f, -0.4297016f, +0.2744865f, +0.0029057f, -0.1176287f, +0.0664672f, +0.2604850f, -0.1839081f,
  +0.3494432f, +0.1400096f, +0.0132125f, -0.3452401f, +0.3426330f, -0.3475099f, +0.2155676f, +0.5583799f,
  -0.0933765f, +0.0513447f, +0.0643524f, +0.0441818f, -0.6906002f, +0.3586825f, -0.2415048f, +0.1782776f,
  -0.3372686f, +0.3017525f, +0.0173065f, +0.2799238f, +0.3324239f, +0.0775486f, -0.1374842f, -0.0320691f,
  +0.2354347f, -0.0902992f, -0.0836046f, -0.3611086f, +0.4528983f, -0.1239463f, -0.0702125f, -0.0182379f,
  +0.0943432f, +0.1702289f, +0.0880695f, -0.2687993f, +0.1245523f, -0.1930625f, +0.0321806f, +0.1678390f,
  +0.2563373f, +0.0999970f, -0.0030687f, -0.4641590f, +0.1216500f, -0.0536353f, +0.0403820f, -0.0395784f,
  -0.1063138f, +0.1415545f, +0.0527620f, -0.1348842f, +0.1402304f, +0.0126106f, +0.1120174f, +0.1208286f,
  -0.6034665f, -0.8636101f, +0.0792196f, +0.0312775f, +0.0585089f, +0.3623980f, +0.2532360f, +0.3335520f,
  +0.2545553f, -0.2615586f, -0.0211728f, -0.0857589f, -0.3710628f, +0.1409625f, -0.4004516f, -0.6609220f,
  +0.1518809f, -0.1233173f, +0.0414766f, -0.2866865f, +0.0002157f, +0.0159405f, -0.0414936f, -0.1233775f,
  -0.0901843f, -0.6542779f, -0.2429188f, -0.3138657f, +0.0441742f, +0.0978312f, -0.2568253f, +0.1200048f,
  +0.1085116f, +0.1216444f, +0.1502026f, -0.0534030f, +0.1602645f, -0.3795015f, -0.4628930f, +0.0719315f,
  +0.1433382f, -0.0234815f, -0.2587329f, -0.2752536f, -0.0313354f, -0.0613161f, -0.2330545f, +0.1887475f,
  +0.0115945f, -0.0829461f, +0.0131850f, -0.2410793f, +0.0391392f, +0.1791221f, +0.2927623f, -0.0394844f,
  +0.2525138f, +0.2543308f, -0.2018291f, -0.2618663f, +0.2091363f, -0.2905447f, -0.0191361f, -0.3497035f,
  -0.0391900f, +0.2526928f, +0.1219040f, -0.0787598f, -0.0154784f, -0.1901657f, +0.2823750f, -0.0271742f,
  +0.0422179f, +0.0640924f, -0.1734979f, -0.2926251f, -0.1214093f, -0.1827154f, +0.0553234f, -0.0724746f,
  +0.1971676f, -0.3601739f, +0.0912940f, +0.0942649f, +0.3236333f, +0.1443661f, -0.8543921f, +0.2847881f,
  -0.2829245f, +0.3864499f, +0.2656228f, -0.1983464f, +0.1689935f, -0.2453057f, +0.4404169f, -0.0508034f,
  -0.0551528f, -0.2156170f, +0.0315888f, -0.0090094f, -0.0893052f, -0.0205895f, -0.0336306f, -0.1000982f,
  -0.1124952f, +0.0778195f, -0.1875946f, +0.3972469f, -0.2385473f, +0.2599419f, -0.3055616f, -0.1388925f,
  -0.2217411f, +0.2665022f, -0.0475175f, +0.4477177f, +0.1760410f, -0.2749162f, +0.1291241f, +0.0577309f
);

const float biases[4] = float[4](
  -0.0504540f, -0.0884317f, -0.0692817f, +0.1375577f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer13 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0359318f, +0.1949893f, -0.0141257f, -0.0919930f, -0.0791948f, -0.1642148f, +0.2253204f, +0.3209096f,
  +0.2619584f, -0.1355873f, +0.2325796f, +0.4657060f, -0.1240140f, +0.2766294f, -0.2277497f, -0.1442773f,
  +0.2269261f, +0.0930880f, +0.0925527f, -0.1283475f, -0.1214427f, -0.0961922f, -0.3716625f, +0.1108426f,
  +0.1820330f, -0.2524522f, -0.0191305f, +0.0378992f, +0.3772193f, +0.6046703f, +0.0883970f, -0.2796140f,
  +0.2783324f, +0.3181008f, +0.1163692f, +0.8544282f, +0.6267099f, +0.5175231f, -0.4452626f, -0.2118468f,
  -0.0692654f, -0.0597363f, -0.3807309f, -0.5132688f, +0.3696857f, -0.0393816f, +0.5211851f, +0.0826348f,
  +0.0297512f, +0.1934586f, +0.2571032f, +0.0627303f, -0.3047438f, +0.1656817f, +0.1905959f, +0.0584167f,
  -0.0002078f, -0.2258342f, -0.1958919f, +0.0606091f, +0.4803103f, -0.1557206f, +0.0251291f, -0.1923360f,
  -0.3416466f, -0.1498821f, -0.0063527f, -0.2677200f, +0.3714710f, +0.2872216f, +0.1381633f, +0.2648608f,
  -0.4208734f, +0.1071428f, +0.1836743f, -0.0153022f, +0.1140095f, -0.3910949f, -0.1618044f, -0.1534969f,
  -0.2195090f, -0.0968493f, -0.0784926f, -0.0093313f, +0.7097514f, -0.1625068f, -0.0298763f, +0.1889624f,
  +0.6524720f, +0.3348702f, +0.1914974f, -0.7585743f, +0.0001254f, +0.3695061f, +0.3428124f, -0.5186309f,
  +0.0403847f, -0.3308737f, -0.0465543f, -0.0263507f, -0.2083670f, -0.1583412f, +0.0900043f, -0.1489359f,
  -0.1317422f, +0.0852103f, -0.0761788f, +0.0560528f, +0.3718709f, -0.2417626f, -0.7392625f, +0.7722832f,
  +0.2808300f, +0.3769801f, -0.0492602f, -0.0158491f, +0.0373954f, +0.1356296f, +0.4948862f, -0.1921588f,
  -0.0279966f, -0.2735310f, -0.0755789f, -0.1977392f, -0.0872105f, -0.0130191f, -0.0784133f, +0.1040878f,
  -0.2049116f, -0.3052347f, +0.1006959f, -0.4854543f, +0.1459894f, +0.2271529f, -0.4114503f, +0.3123534f,
  +0.0160134f, +0.5898244f, +0.2714965f, +0.0644271f, -0.5173870f, +0.0438887f, +0.2198551f, +0.2409932f,
  +0.3167696f, +0.0499307f, -0.0257999f, +0.2896908f, -0.3295478f, -0.0342709f, +0.4861561f, +0.1122991f,
  +0.1494339f, +0.5667336f, +0.1065909f, -0.5018260f, -0.6282114f, -0.3470187f, +0.6775045f, -0.4921931f,
  -0.1285361f, +0.7880028f, +0.1702477f, +0.0976263f, +0.5950825f, +0.0546141f, +0.2707500f, +0.0547956f,
  +0.1514329f, +0.0827467f, -0.0944502f, +0.1602179f, +0.0770816f, +0.4691411f, -0.0923521f, -0.2030430f,
  -0.0740288f, -0.0148679f, +0.1277030f, -0.3305172f, -0.4474933f, +0.4903647f, -0.1716233f, -0.2099088f,
  +0.1346405f, +0.0637165f, +0.0109103f, -0.8583416f, -0.4435634f, +0.2708137f, -0.2551089f, -0.4063611f,
  +0.0677806f, -0.1240321f, -0.0652614f, -0.2515006f, +0.1558793f, +0.0554883f, -0.0309888f, -0.0173752f,
  -0.2504967f, -0.2527389f, +0.0994751f, -0.1501659f, +0.3063413f, +0.1077379f, -0.1455687f, +0.0952662f,
  -0.1581577f, +0.1102555f, -0.0746167f, +0.1307623f, -0.0131140f, -0.1232445f, +0.2034013f, +0.2999721f,
  +0.1199124f, -0.1416341f, +0.0311566f, -0.2198448f, -0.0991707f, +0.1747516f, +0.0680812f, +0.0932594f,
  +0.2561392f, -0.1958601f, +0.0300878f, +0.2428732f, -0.2330928f, +0.2116063f, -0.1764548f, +0.0706435f,
  -0.1135636f, +0.0682006f, -0.0711479f, +0.4550052f, +0.0216919f, +0.0698121f, -0.1769023f, +0.2089004f,
  +0.0339966f, -0.1476410f, -0.2721104f, -0.2423388f, -0.1058090f, -0.2834949f, +0.0206488f, +0.3880755f,
  -0.0129581f, -0.2099529f, -0.2021709f, +0.5644462f, -0.7573760f, +0.3950524f, -0.3509991f, +0.0101770f,
  +0.4109148f, -0.0132755f, +0.1613549f, +0.0849494f, +0.3019023f, -0.0393438f, +0.0066543f, +0.1579475f,
  +0.2874296f, -0.0305442f, -0.1256887f, -0.0557199f, -0.0030568f, -0.3148501f, +0.1577719f, -0.0831853f,
  -0.3587237f, -0.1671548f, +0.3919215f, -0.0306611f, -0.5163285f, +0.7311498f, -0.0632173f, -0.0549089f,
  -0.4743142f, +0.1395625f, -0.0210128f, -0.1937580f, -0.2848307f, -0.1217991f, +0.0818396f, -0.5942024f
);

const float biases[4] = float[4](
  -0.0055762f, -0.1805702f, -0.1154610f, +0.0149892f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer14 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2841198f, -0.1615368f, -0.0716533f, +0.4022158f, +0.0764035f, -0.5135142f, +0.0663531f, -0.1506059f,
  -0.4464066f, +0.0496409f, -0.1775536f, +0.0268963f, -0.3200454f, +0.2915207f, -0.0256502f, +0.0244950f,
  -0.0959379f, -0.1548055f, -0.0902415f, -0.1783398f, -0.1626694f, +0.0175659f, -0.2377755f, -0.2767377f,
  +0.1534168f, -0.2482399f, -0.0930062f, +0.3603925f, -0.2076461f, -0.5863945f, +0.5096114f, -0.2686460f,
  -0.2520010f, -0.3723537f, -0.3242633f, -0.0277332f, +0.0365264f, -0.1764492f, -0.2039543f, +0.3343128f,
  -0.0455051f, -0.1265047f, +0.4651262f, -0.1039660f, +0.0196484f, +0.2144252f, -0.0493777f, -0.1247435f,
  +0.0874953f, -0.2326828f, -0.0275878f, -0.1062690f, +0.0222723f, +0.0974697f, +0.1733817f, -0.0733360f,
  -0.1442272f, -0.1519678f, -0.0677888f, -0.1211102f, -0.0421123f, -0.4533814f, -0.0043807f, -0.0643179f,
  -0.1796594f, +0.0976291f, -0.2491663f, -0.2689069f, -0.1843399f, +0.1552206f, -0.1861284f, +0.1391431f,
  +0.0929018f, -0.1138855f, +0.3603245f, -0.4730208f, +0.2966063f, +0.2494225f, +0.0850620f, +0.2230689f,
  +0.2803233f, -0.0810768f, -0.0357347f, -0.0766468f, +0.2571712f, -0.4266635f, +0.4099997f, +0.2055865f,
  +0.0925759f, -0.0998574f, -0.0843843f, -0.1434570f, -0.0688417f, -0.3188200f, +0.0498700f, +0.0781273f,
  +0.1575709f, +0.3441987f, +0.2334967f, -0.3303009f, +0.6697941f, +0.6302916f, -0.0000951f, +0.2908176f,
  +0.3254490f, +0.1521239f, +0.1281618f, +0.1352445f, +0.2051951f, +0.1808100f, +0.1807881f, +0.3310652f,
  +0.0915976f, -0.2752229f, +0.2901712f, +0.1547879f, +0.4180342f, +0.0579899f, -0.2255156f, +0.1215090f,
  +0.1132830f, +0.5610703f, +0.2114112f, -0.2776567f, +0.1430588f, +0.0480832f, +0.0325514f, +0.2868872f,
  +0.2454406f, +0.2408327f, +0.0170555f, -0.0142942f, +0.1003324f, +0.6989446f, -0.2152885f, +0.3033874f,
  +0.0248257f, -0.0515674f, -0.1598148f, +0.0279421f, +0.0095133f, -0.0348041f, -0.2147187f, +0.1506768f,
  -0.0010057f, +0.0843568f, +0.0255997f, -0.0726583f, +0.1873282f, -0.0351392f, +0.0295162f, +0.1335724f,
  +0.0864344f, -0.0282850f, +0.1392236f, +0.0411137f, +0.1085451f, -0.1644897f, +0.0313571f, -0.0595331f,
  +0.1765681f, -0.0531485f, +0.1515308f, +0.0943635f, +0.1011612f, -0.1102309f, -0.0459713f, +0.0676194f,
  +0.0960069f, +0.0400699f, -0.0463982f, -0.0696265f, +0.2071265f, +0.3865274f, +0.1409821f, -0.0609955f,
  -0.0621255f, +0.0408007f, +0.1675889f, -0.0660824f, +0.0886073f, -0.1500765f, +0.2196563f, +0.0726846f,
  +0.2786740f, +0.0272212f, -0.0470587f, +0.1315778f, +0.0055542f, -0.0453900f, +0.0551281f, +0.0773962f,
  -0.0439851f, +0.1693308f, +0.0926480f, -0.1357065f, +0.0489531f, -0.0012744f, -0.1662818f, +0.1631097f,
  +0.1935780f, +0.1900427f, +0.0416213f, +0.0936014f, +0.2464652f, +0.4004277f, -0.3140464f, +0.2124825f,
  +0.1914601f, -0.0905035f, -0.0932705f, -0.0073313f, +0.0964894f, +0.0220302f, +0.0583095f, -0.0037518f,
  -0.0037508f, -0.0233297f, +0.1957695f, -0.5714127f, +0.2743497f, +0.2320931f, +0.4453979f, -0.1012034f,
  +0.7396433f, -0.0233813f, -0.0943538f, -0.4908722f, +0.2013053f, -0.0808903f, +0.3403733f, +0.0836873f,
  +0.3479140f, -0.2370924f, +0.4709032f, -0.2120510f, -0.0575027f, +0.1248201f, +0.0565294f, +0.0959418f,
  +0.4086862f, +0.3192793f, +0.2187965f, +0.3509150f, +0.5098093f, +0.6992770f, +0.5140533f, +0.2716477f,
  +0.6828162f, -0.0110822f, -0.0840078f, -0.0646382f, -0.0313059f, -0.2517757f, +1.2607964f, -0.1161059f,
  +0.3827182f, -0.2176916f, +0.2915446f, +0.0125748f, +0.0502119f, +0.1611971f, +0.2241359f, +0.2251268f,
  +0.2719371f, +0.2095030f, +0.0297903f, -0.1602211f, +0.1036217f, -0.1020958f, +0.1202785f, +0.0755738f,
  +0.1271991f, +0.2904754f, -0.0264269f, -0.1172165f, -0.1582914f, +0.2333789f, +0.5715109f, -0.0267027f,
  +0.1899508f, -0.0437132f, -0.1941782f, +0.1070770f, +0.0050438f, -0.2100992f, +0.2201678f, +0.0718843f
);

const float biases[4] = float[4](
  +0.1043016f, -0.1984572f, +0.0332517f, -0.1275811f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer14 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1455542f, -0.3219301f, +0.3178180f, -0.0913639f, +0.1389733f, +0.1135114f, +0.1139626f, +0.1267686f,
  +0.1830774f, -0.1700411f, +0.2920409f, -0.1883785f, -0.2107368f, -0.2096254f, +0.4494875f, +0.1958199f,
  -0.2312225f, +0.1417606f, -0.0744643f, +0.0348400f, -0.0312854f, +0.0269393f, +0.1903910f, +0.1349905f,
  +0.0634770f, +0.0598030f, +0.0361307f, +0.2893472f, -0.2020956f, -0.5838848f, +0.2554657f, -0.0336466f,
  -0.1552431f, -0.1093436f, +0.4280000f, -0.0868427f, -0.3038670f, +0.3649480f, -0.1365797f, +0.0100261f,
  -0.5070178f, +0.0898751f, -0.1000129f, -0.0408180f, -0.1409613f, -0.1422071f, +0.1970640f, -0.0835470f,
  -0.2462842f, -0.3398250f, -0.0561756f, -0.0176188f, -0.4440899f, -0.4667241f, +0.3443058f, +0.1413351f,
  -0.3021778f, -0.3371804f, -0.1335557f, -0.2309407f, -0.3001958f, -0.5696396f, +0.1057186f, +0.0785272f,
  -0.3093964f, +0.1831888f, -0.2899310f, -0.0443623f, -0.1499249f, +0.1788380f, +0.0927929f, -0.2684287f,
  -0.2237455f, -0.0043193f, +0.0867849f, +0.0058429f, -0.1002401f, -0.4328685f, -0.1581941f, -0.1108601f,
  +0.2650144f, -0.1105583f, +0.5622626f, -0.0682410f, -0.0410631f, -0.7018317f, -0.1631969f, -0.2649303f,
  -0.1130577f, -0.2266575f, -0.1131444f, +0.2385881f, +0.0627039f, +0.1368078f, -0.0695255f, +0.0066781f,
  -0.1844703f, +0.0780405f, +0.0879409f, +0.1114125f, +0.3635823f, -0.3579081f, -0.2470973f, +0.2121783f,
  -0.2623897f, -0.0634193f, +0.1365066f, -0.0581599f, +0.1804029f, +0.2488885f, -0.3962138f, -0.3612583f,
  -0.2615357f, -0.0756254f, -0.4881029f, +0.1047099f, +0.1063865f, -0.2885575f, -0.0719151f, -0.1867656f,
  -0.1340309f, -0.1200067f, -0.1063369f, -0.0729834f, +0.1606741f, -0.3845550f, +0.2863185f, -0.1427511f,
  +0.0288692f, -0.3304184f, -0.3885052f, +0.3290798f, +0.1903927f, +0.3819527f, -0.7633083f, +0.0420378f,
  +0.1265192f, -0.0084064f, -0.2259438f, -0.1593390f, +0.1416766f, -0.1158619f, +0.0074627f, -0.0899435f,
  -0.2722833f, -0.2139669f, +0.0218392f, +0.2450740f, +0.1069240f, -0.5067761f, -0.1871598f, -0.0548706f,
  -0.1475323f, -0.0142880f, +0.1728648f, +0.7259601f, -0.1148337f, +0.1775549f, -0.0922997f, -0.1352764f,
  +0.0352181f, -0.0315152f, -0.3301976f, +0.3726974f, +0.0238844f, -0.2254297f, -0.1163009f, -0.0465005f,
  +0.0521074f, -0.3648067f, +0.0913945f, +0.2229953f, +0.2846656f, -0.5299729f, -0.1387744f, +0.0185265f,
  +0.4665616f, +0.0225195f, +0.3289877f, +0.7418522f, +0.3659663f, +0.8937492f, -0.0758969f, +0.3146213f,
  +0.3864375f, +0.1626293f, -0.4154302f, +0.0064327f, +0.1755349f, +0.1794753f, +0.3320885f, +0.1495633f,
  +0.0412149f, -0.1039363f, -0.1547670f, +0.2305004f, +0.2680464f, -0.6416198f, +0.0515367f, -0.1124102f,
  +0.3259127f, -0.0472885f, +0.0354018f, -0.1904692f, -0.0398664f, +0.0310085f, -0.1733280f, -0.2007995f,
  +0.1928822f, +0.0617396f, -0.1653083f, -0.0318792f, +0.1979614f, +0.5306559f, -0.3408725f, +0.0676914f,
  -0.0509941f, -0.0174464f, +0.3077160f, +0.0896760f, +0.4990944f, +0.0226849f, +0.0907720f, +0.1615264f,
  +0.4277714f, -0.0618566f, +0.3321806f, +0.1677774f, +0.2524678f, -0.0147377f, +0.2286804f, +0.2023276f,
  +0.2648313f, +0.0251755f, +0.0827131f, +0.4271174f, +0.1340300f, -0.2851848f, +0.0315418f, +0.1515208f,
  +0.2688252f, +0.2451168f, +0.1235718f, -0.1690240f, +0.0941350f, -0.1447326f, +0.3879559f, -0.2237115f,
  -0.0278145f, +0.2354147f, +0.2315601f, -0.1835426f, +0.2776831f, +0.1251848f, +0.2743994f, +0.1008429f,
  +0.0873719f, +0.0244187f, -0.1479047f, +0.0706829f, +0.0170241f, -0.2469286f, +0.1167803f, +0.0847144f,
  +0.0034710f, -0.0427826f, -0.1306997f, +0.0219498f, -0.1333530f, -0.1416536f, +0.1511987f, +0.2750960f,
  +0.0490152f, +0.2096476f, -0.1380713f, +0.1301401f, +0.0496537f, -0.2058546f, +0.4598111f, +0.3445839f,
  +0.1414881f, -0.0413362f, -0.1608920f, +0.0028204f, +0.0435623f, +0.0432119f, -0.0250817f, +0.0187467f
);

const float biases[4] = float[4](
  -0.0399147f, -0.1145999f, -0.1269756f, -0.0773240f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer15 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0646813f, +0.0385855f, -0.0222428f, +0.1641578f, +0.2046792f, +0.0629341f, -0.0168234f, +0.1665718f,
  -0.1659386f, +0.1292141f, +0.1120970f, -0.2851212f, +0.1194945f, -0.2556273f, +0.2208966f, -0.3076119f,
  +0.2090907f, +0.0751363f, -0.1186472f, +0.0515742f, +0.0661981f, +0.0010520f, -0.2102243f, +0.1333338f,
  -0.0544899f, -0.0265704f, -0.0823175f, +0.2002606f, -0.3220280f, -0.1311281f, +0.3181442f, +0.0054274f,
  -0.3910253f, -0.4048893f, +0.1998827f, +0.2599780f, -0.2249463f, +0.2431582f, +0.0119129f, -0.1290703f,
  +0.5313038f, -0.0713337f, +0.2135530f, -0.1239119f, -0.0226040f, +0.0703162f, -0.4228452f, +0.0674172f,
  -0.0038480f, +0.3337651f, -0.0544855f, -0.0551422f, -0.0555979f, +0.0042547f, +0.0621776f, +0.2158156f,
  -0.2085179f, +0.0909184f, +0.0910896f, -0.3256795f, +0.6127642f, +0.1299689f, -0.8065905f, +0.0190710f,
  +0.0069013f, +0.2859745f, +0.2711023f, -0.2708602f, +0.0819707f, +0.2236741f, -0.2409046f, +0.0418876f,
  +0.1104641f, +0.3329366f, -0.2272591f, +0.3625391f, +0.1998896f, +0.1941077f, -0.3930235f, +0.3499082f,
  +0.4348323f, +0.4143036f, -0.1688088f, +0.4044765f, +0.0672815f, +0.1111787f, +0.0778337f, +0.2152909f,
  +0.1015023f, -0.2935043f, -0.0035091f, -0.1492690f, +0.1838487f, -0.0644785f, -0.2975835f, +0.0991278f,
  +0.0443095f, -0.0515271f, +0.1742665f, -0.0638109f, -0.4358692f, +0.3609688f, +0.0768808f, -0.1902435f,
  -0.4601348f, +0.2864421f, +0.0019993f, -0.0799146f, +0.3468368f, +0.1740555f, +0.2676254f, -0.0455830f,
  -0.1155693f, +0.1757728f, +0.2549059f, +0.0065274f, -0.0180868f, -0.1963551f, +0.0344172f, -0.1669549f,
  +0.1375252f, +0.0098334f, +0.2226746f, -0.6556072f, -0.1421663f, +0.3971381f, +0.2096588f, +0.0927237f,
  -0.0371757f, +0.0840120f, +0.2324477f, -0.5859638f, +0.4180968f, +0.1888847f, +0.0446509f, +0.0320225f,
  +0.3068634f, +0.0235199f, -0.0662532f, -0.1581877f, -0.0752860f, -0.1170125f, -0.0617090f, -0.2481960f,
  -0.1016010f, -0.0935441f, -0.1792001f, -0.0161551f, +0.0574978f, +0.2677017f, -0.3225861f, -0.0439507f,
  +0.0922621f, -0.0625642f, +0.0388924f, +0.0396000f, +0.0500181f, +0.0218501f, +0.0884018f, -0.0896723f,
  -0.0286519f, +0.0221309f, -0.0982364f, +0.1081259f, +0.1139721f, +0.0436749f, +0.0454479f, +0.0968285f,
  +0.0063548f, +0.0413850f, +0.1791698f, +0.0800187f, -0.1220751f, +0.1628436f, +0.3955792f, -0.2994926f,
  +0.1718797f, +0.3199416f, -0.0606875f, +0.1297425f, +0.4870121f, -0.0876964f, +0.1164163f, +0.2723193f,
  +0.1217986f, -0.2129066f, -0.0479614f, +0.3907420f, +0.1617287f, -0.2661269f, +0.3839213f, +0.1446891f,
  -0.0074635f, +0.3858145f, +0.1798666f, -0.3125846f, -0.0888325f, -0.0554653f, +0.4560862f, +0.1577802f,
  +0.0295699f, +0.0864769f, -0.0237305f, +0.0219129f, +0.2244410f, -0.2474108f, +0.3578199f, +0.4046458f,
  +0.1911514f, +0.1909091f, +0.1932999f, +0.2015944f, -0.0027317f, -0.1678144f, +0.1101941f, +0.1993523f,
  +0.1045958f, +0.1674387f, -0.0475052f, -0.0779086f, -0.3047303f, +0.0524859f, +0.0336471f, -0.0264215f,
  +0.0108138f, +0.4113272f, +0.1263980f, -0.2230105f, -0.2887860f, -0.0416637f, +0.1708070f, -0.0941374f,
  -0.1612171f, +0.3197065f, +0.1001117f, -0.0528440f, -0.1050830f, -0.1448535f, +0.0179503f, -0.1189914f,
  +0.2820379f, +0.1863925f, -0.0940861f, -0.0364027f, -0.3619443f, +0.0474594f, +0.2642023f, -0.2164859f,
  +0.0813207f, +0.7206653f, +0.0478894f, -0.5760396f, -0.5204691f, -0.1828675f, +0.5045525f, -0.5542199f,
  -0.2391835f, +0.1601876f, -0.0734399f, -0.3939287f, +0.2670699f, -0.1939449f, +0.1310162f, -0.3138213f,
  +0.0342972f, -0.0491065f, +0.0283738f, -0.2092687f, +0.1993055f, +0.2354201f, -0.1450284f, -0.3095019f,
  -0.1781121f, -0.1035669f, +0.0693213f, -0.2921945f, -0.5092742f, +0.7479506f, -0.1735947f, -0.4638600f,
  -0.2623766f, -0.1160206f, -0.0979491f, -0.3670322f, -0.2810164f, +0.1199477f, -0.2212579f, -0.2167628f
);

const float biases[4] = float[4](
  -0.1623912f, -0.0736820f, +0.0053952f, +0.0245936f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer15 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3115973f, +0.2252438f, -0.2381541f, +0.4100395f, +0.2484888f, -0.2499300f, +0.1107214f, -0.1072765f,
  +0.1661340f, -0.0171721f, +0.0068977f, -0.0081659f, +0.4296257f, +0.0204649f, -0.0128105f, -0.2069386f,
  +0.2575236f, -0.3541459f, -0.1234110f, -0.1267215f, +0.5838916f, -0.3234119f, -0.1643927f, +0.1377652f,
  -0.1156040f, +0.1944701f, +0.0120386f, +0.1757730f, +0.4925521f, -0.0266456f, -0.6059805f, +0.5972514f,
  -0.2696945f, -0.1380378f, +0.2477625f, -0.8876672f, +0.2823955f, -0.0252801f, +0.1865482f, +0.1662220f,
  +0.0256779f, -0.1332981f, +0.0436785f, -0.1656819f, +0.2594766f, +0.0074567f, +0.1906691f, -0.1622919f,
  +0.0940459f, +0.2193150f, -0.1920686f, +0.2797469f, +0.0140139f, -0.1692035f, -0.2135477f, +0.0553638f,
  +0.2642772f, -0.2894633f, -0.0200364f, +0.0382586f, +0.1312705f, -0.1093462f, -0.0846532f, -0.0816420f,
  -0.0897904f, -0.0681847f, +0.0228606f, +0.2005731f, +0.0310145f, -0.0287785f, +0.2300063f, -0.0830518f,
  -0.1599902f, -0.1297685f, -0.1991439f, -0.1573802f, -0.3388821f, +0.3037229f, -0.2980054f, +0.0974202f,
  +0.5095440f, +0.2205441f, +0.2386861f, +0.0216272f, -0.3447285f, -0.1475824f, -0.1632886f, -0.1460793f,
  +0.0796888f, -0.1894563f, -0.2257550f, -0.1559316f, +0.6641814f, -0.0616680f, +0.3063001f, -0.1740322f,
  -0.1246280f, +0.1109953f, -0.1583474f, +0.2185184f, -0.8823462f, -0.0230673f, +0.5459682f, -0.0598098f,
  -0.0045416f, -0.0327471f, +0.0568484f, -0.4018437f, +0.0200920f, +0.2377662f, +0.2326792f, -0.3045610f,
  -0.3161812f, +0.8109424f, +0.3989833f, -0.3838126f, -0.1280304f, -0.1022913f, -0.1224592f, -0.6479126f,
  +0.1278982f, -0.0467397f, +0.0518869f, -0.3469164f, -0.0673197f, +0.0665135f, +0.0272630f, +0.0880026f,
  -0.0893344f, +0.2388447f, +0.0395649f, -0.4570104f, -0.0210428f, +0.0316271f, +0.2077254f, +0.0416673f,
  +0.0308964f, +0.2551383f, -0.0861270f, -0.3386467f, -0.0327625f, +0.0296177f, +0.1901860f, +0.1848970f,
  +0.0496238f, -0.0736788f, +0.1000417f, -0.0129665f, -0.1601884f, -0.3420887f, +0.1920096f, -0.0010269f,
  -0.3242081f, -0.3306680f, -0.1212315f, -0.0408158f, -0.0271906f, -0.0948432f, +0.4154735f, +0.0793114f,
  -0.0652888f, +0.0101360f, +0.0781054f, +0.0014729f, -0.1106246f, +0.1292471f, -0.2885083f, -0.2778962f,
  +0.0211055f, +0.1527758f, +0.0748209f, -0.4732594f, +0.2991235f, -0.1270021f, +0.4751967f, +0.1790334f,
  -0.1363940f, +0.6216816f, +0.1045406f, -0.0364031f, -0.0527153f, +0.4595228f, -0.1854469f, +0.1062134f,
  -0.0434268f, -0.0877710f, -0.0493789f, +0.1926306f, -0.5997791f, +0.0663864f, -0.3208638f, +0.1605407f,
  -0.1597838f, +0.1824683f, +0.1005016f, -0.4156927f, +0.1254532f, -0.0645830f, -0.1350065f, +0.2243865f,
  -0.4548699f, +0.4139302f, -0.0540355f, +0.2294381f, +0.2692058f, +0.1551169f, -0.3715584f, +0.2401832f,
  +0.0496364f, +0.0626889f, +0.1958325f, +0.0420833f, +0.1974140f, -0.4105584f, -0.0324937f, -0.0608243f,
  -0.0510012f, -0.0163809f, +0.2004338f, -0.1074263f, +0.0083257f, +0.1464251f, -0.0120292f, +0.1197557f,
  +0.0390353f, -0.2926881f, -0.3323301f, +0.0866914f, -0.1388972f, +0.2237918f, +0.0722332f, +0.3252098f,
  +0.0502806f, +0.1691132f, -0.1852388f, -0.0828600f, +0.0552628f, +0.2306350f, -0.0843133f, -0.1372526f,
  -0.0696391f, -0.0036942f, -0.0970427f, +0.0724087f, -0.1682326f, +0.2428652f, +0.2770308f, -0.2253279f,
  -0.0295225f, -0.0897879f, -0.3072173f, +0.6243004f, -0.5616383f, -0.3069683f, +0.2304978f, +0.1529294f,
  +0.0161117f, -0.2841026f, -0.0127302f, +0.3217172f, +0.2142077f, -0.0236419f, -0.3836022f, -0.2402038f,
  -0.0799511f, -0.0728488f, +0.2472485f, -0.0997066f, -0.0666743f, +0.1322413f, +0.1508726f, +0.1152081f,
  +0.0072070f, -0.0256581f, +0.1412627f, +0.2903298f, +0.0066996f, -0.2136099f, +0.0871195f, +0.0762389f,
  +0.1081483f, +0.1670742f, -0.0790255f, +0.0199134f, -0.3366963f, -0.2439023f, -0.0456213f, -0.0784737f
);

const float biases[4] = float[4](
  +0.0953488f, -0.0096984f, -0.1209531f, -0.1802875f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer16 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1967408f, -0.0304549f, -0.2807987f, -0.4720667f, -0.1050606f, +0.1610905f, -0.0944361f, +0.0487697f,
  +0.2935103f, +0.0677251f, -0.0105490f, -0.1477356f, -0.1817596f, +0.3840953f, +0.2498980f, +0.1130880f,
  +0.1363788f, +0.0758803f, +0.2143126f, +0.0313977f, +0.1844565f, +0.3968594f, +0.1465136f, +0.4829248f,
  -0.4418408f, -0.0780427f, -0.2780164f, +0.1014530f, -0.2530601f, -0.0575835f, +0.0861825f, +0.1866050f,
  +0.3834336f, -0.0317412f, -0.0578665f, -0.5678965f, +0.0494269f, -0.0175950f, +0.0354386f, -0.0418631f,
  +0.1245096f, -0.0417413f, +0.3283559f, +0.1225078f, +0.1452077f, +0.1379989f, +0.0671867f, -0.1971836f,
  -0.0686595f, +0.0326626f, -0.1474277f, +0.3533280f, +0.0710086f, +0.1431967f, +0.0659468f, -0.1621894f,
  -0.2166181f, -0.2322222f, -0.3587581f, -0.2728797f, -0.1997988f, -0.5065966f, +0.1918189f, +0.2004558f,
  +0.3266668f, +0.0468822f, -0.0460737f, -0.0925050f, +0.0225032f, -0.0231500f, -0.1706414f, +0.0727699f,
  -0.1221626f, +0.0374923f, +0.1904162f, +0.3606580f, +0.1941210f, -0.2272155f, -0.1527849f, -0.0010977f,
  -0.3164332f, -0.2773862f, -0.0056339f, +0.1942422f, +0.0204479f, -0.1959196f, -0.0070869f, +0.1609620f,
  -0.1326979f, +0.1996987f, -0.2877422f, +0.1028279f, -0.1211725f, +0.0435124f, -0.4249396f, +0.4011227f,
  -0.0784331f, -0.1256280f, +0.3321358f, +0.2191287f, +0.3577787f, +0.1702411f, -0.3676301f, +0.0055212f,
  -0.1872147f, +0.0156346f, -0.2322362f, +0.6160001f, +0.2061032f, +0.2723920f, -0.2303285f, -0.1516666f,
  +0.3532654f, -0.0208637f, -0.0419443f, +0.3523487f, -0.2957344f, -0.4675906f, -0.2902316f, +0.0810405f,
  -0.1198618f, +0.3232037f, +0.2960938f, -0.3215595f, -0.1318721f, +0.1510969f, -0.1590092f, -0.1830103f,
  -0.1648027f, -0.1632607f, +0.0074886f, -0.2085657f, -0.2720381f, -0.1864253f, -0.0887792f, -0.0784073f,
  +0.0260973f, -0.1751206f, +0.0639259f, -0.2191564f, -0.2275317f, -0.1335955f, -0.2323171f, +0.0384327f,
  -0.1045579f, -0.0523748f, -0.0522116f, -0.1010957f, +0.0763170f, -0.0055970f, -0.0867595f, +0.0542531f,
  +0.0820403f, +0.0067109f, -0.0405105f, -0.2541231f, -0.0082198f, -0.0459553f, +0.0078486f, -0.0762738f,
  +0.0333961f, -0.0056295f, -0.1495415f, +0.1366197f, -0.0074937f, -0.3105907f, -0.0635056f, -0.0534132f,
  -0.2774175f, +0.0118058f, +0.0700385f, +0.2827023f, -0.0589151f, +0.0626908f, -0.0930316f, -0.1730461f,
  -0.1178284f, +0.0993688f, +0.1889544f, +0.3919404f, -0.0846181f, -0.1229881f, -0.0401994f, -0.0886840f,
  +0.0431132f, -0.0111640f, -0.1125631f, +0.0363661f, -0.1415686f, -0.0601748f, -0.0937283f, +0.1579223f,
  -0.0442445f, +0.0427205f, -0.0630509f, -0.2059275f, +0.0026641f, +0.2792896f, -0.0431091f, +0.2634709f,
  -0.0912999f, -0.0279822f, -0.1658874f, +0.0160477f, -0.0020799f, -0.0586918f, +0.0850220f, +0.0355680f,
  +0.1230537f, -0.2215964f, +0.0659420f, -0.1261331f, -0.0979481f, +0.1217713f, -0.0841887f, -0.0852261f,
  +0.2532153f, +0.1556197f, +0.1432530f, +0.4777371f, -0.2316150f, -0.2028064f, -0.0296799f, -0.5684534f,
  +0.4131841f, -0.1615978f, -0.0729555f, -0.2530217f, +0.1969817f, -0.5205046f, -0.0115178f, +0.1028860f,
  +0.2543499f, +0.2119614f, +0.1963300f, +0.3916997f, +0.1131494f, -0.0976600f, -0.0144185f, -0.0986725f,
  +0.1177376f, -0.0672228f, +0.0530607f, +0.3755874f, +0.0238298f, +0.0720314f, -0.5031515f, -0.1198925f,
  +0.0506515f, -0.0677832f, +0.1672167f, +0.0161182f, +0.5728009f, -0.1522145f, -0.0820268f, -0.1721921f,
  -0.1851504f, -0.0787910f, -0.0534893f, +0.0305686f, -0.0814053f, +0.0359140f, +0.0332452f, -0.2135762f,
  +0.1806855f, -0.2868375f, +0.1541776f, -0.0311831f, +0.0475119f, -0.2307142f, -0.0206700f, +0.0869861f,
  -0.0676897f, -0.6344188f, +0.2713332f, +0.0790463f, +0.0164886f, -0.0815786f, -0.0288637f, -0.1615903f,
  +0.3102649f, -0.5095372f, -0.0493311f, +0.0238165f, -0.1586102f, -0.0133967f, +0.0159258f, -0.2342056f
);

const float biases[4] = float[4](
  +0.1041810f, -0.1541399f, +0.0481964f, -0.1964222f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer16 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0049192f, +0.2535532f, +0.2630756f, +0.0721834f, +0.2150317f, -0.2447582f, -0.0220556f, +0.1653036f,
  -0.5149519f, -0.0750358f, +0.1425590f, +0.3930442f, +0.0333855f, -0.0581584f, -0.0741718f, -0.0716327f,
  +0.2811333f, -0.1442106f, +0.4568833f, -0.4524866f, -0.1826943f, -0.1525907f, -0.1721613f, -0.1203090f,
  +0.0357020f, -0.0235927f, -0.0944457f, -0.5599396f, +0.2926516f, +0.3672102f, +0.3305425f, -0.1182069f,
  +0.6244381f, +0.1282243f, -0.4708271f, +0.2283323f, -0.2313895f, +0.0804604f, -0.2545597f, +0.2425487f,
  +0.1100144f, -0.2674337f, +0.0380855f, -0.0019607f, -0.1753647f, +0.5720814f, -0.1894031f, +0.2822279f,
  +0.0038006f, +0.0394550f, +0.3347854f, -0.0209570f, -0.2901611f, -0.5437321f, -0.1139656f, -0.1781327f,
  +0.1056914f, +0.3746822f, +0.1981326f, -0.2930455f, -0.2161692f, -0.1409701f, +0.0013908f, +0.0154680f,
  +0.0804626f, -0.1268352f, +0.1538037f, +0.0207683f, +0.2060596f, +0.5594198f, -0.0283013f, -0.0098349f,
  -0.1978852f, +0.2534254f, +0.2596660f, +0.0344476f, -0.0361173f, -0.1157554f, +0.3486423f, -0.0273947f,
  +0.0477113f, +0.0013074f, +0.2688000f, -0.4674315f, -0.5599321f, +0.2966753f, +0.0397210f, +0.0457160f,
  -0.0261381f, +0.0495999f, -0.2786398f, -0.3299594f, -0.4810550f, +0.1168304f, -0.1121409f, -0.2547222f,
  +0.2592565f, -0.1786068f, +0.2552696f, -0.0176937f, +0.3717379f, +0.1119224f, -0.3639137f, -0.1905325f,
  -0.1687690f, -0.4338542f, -0.0092243f, +0.0691471f, +0.2490484f, +0.1119971f, -0.3326329f, +0.3829237f,
  +0.4311792f, -0.2221258f, -0.1122368f, -0.1373301f, +0.3865027f, +0.3234417f, -0.3034191f, +0.1514733f,
  -0.0837407f, -0.1352319f, +0.1324399f, +0.1394656f, -0.0288254f, +0.1737146f, -0.1412666f, -0.2923118f,
  +0.2139397f, -0.4702215f, +0.0810901f, -0.1297340f, -0.0886983f, +0.1061908f, +0.0969929f, +0.0266052f,
  +0.1354747f, -0.5467522f, +0.0413730f, -0.2256010f, +0.0848587f, -0.3695542f, -0.1022744f, -0.0037008f,
  +0.2957802f, +0.2861280f, -0.0007833f, +0.0201302f, -0.4993807f, -0.2590423f, +0.1147489f, +0.0911340f,
  +0.1036214f, +0.2106832f, -0.0029144f, +0.5322863f, -0.2901612f, -0.5643448f, +0.4926286f, -0.4005165f,
  +0.0832113f, +0.0233987f, -0.2427979f, +0.0671646f, +0.0521458f, -0.1502122f, +0.0512870f, +0.2766057f,
  +0.1871655f, +0.0851948f, -0.4233108f, -0.5290455f, -0.1533034f, +0.1513916f, -0.0063793f, +0.4696089f,
  -0.3136950f, +0.0071243f, -0.3449070f, -0.2803114f, -0.3027740f, +0.0466438f, +0.1994399f, +0.4779043f,
  -0.2468371f, +0.0253826f, -0.5998344f, +0.0515573f, +0.1047264f, -0.1379652f, +0.1140146f, +0.1334120f,
  +0.0739217f, -0.2021014f, +0.2318744f, -0.1283727f, +0.2313368f, +0.1080102f, +0.2860083f, +0.1145483f,
  +0.1820569f, +0.0128043f, -0.3382334f, +0.0447999f, +0.2309821f, +0.5955527f, -0.1251566f, -0.5102562f,
  +0.1285916f, -0.0690850f, +0.1122237f, -0.0141478f, -0.0583986f, +0.3188285f, -0.2280701f, +0.1399560f,
  -0.2231914f, +0.2453911f, -0.0501027f, -0.0393052f, -0.1058559f, -0.4059912f, -0.0551347f, -0.2517537f,
  +0.0889562f, -0.1644347f, -0.2100879f, +0.0454368f, +0.3311988f, -0.4105578f, -0.1542784f, +0.0402224f,
  +0.1889960f, -0.0593983f, -0.1668817f, -0.1696541f, +0.1035707f, -0.3927045f, -0.3262191f, -0.1025313f,
  -0.1303791f, +0.2592556f, -0.0302294f, +0.0025288f, +0.0239963f, +0.2176690f, -0.0778691f, -0.0952758f,
  -0.1895348f, -0.3382772f, -0.1194565f, -0.0445115f, -0.0792595f, +0.2366947f, -0.0983925f, +0.2081559f,
  +0.0211722f, -0.0982895f, +0.2257536f, +0.0285515f, -0.5379639f, +0.0759693f, -0.2760503f, +0.0359473f,
  -0.0078307f, -0.0595965f, +0.0396456f, +0.1519190f, -0.0646048f, -0.0750009f, +0.1574443f, +0.0828655f,
  +0.1417883f, -0.1154860f, +0.0530997f, -0.3114883f, -0.1728841f, +0.1164556f, +0.1513218f, -0.3128506f,
  +0.1086546f, -0.4346321f, +0.0657034f, +0.0049792f, -0.2611630f, +0.2901163f, -0.0975235f, -0.2445115f
);

const float biases[4] = float[4](
  -0.0432563f, -0.0008686f, +0.0914934f, -0.0354682f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer17 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0038512f, -0.0836114f, +0.1689731f, -0.0209092f, -0.1245788f, +0.0794625f, -0.0483430f, -0.1719907f,
  +0.0571381f, -0.6817140f, -0.0702898f, +0.0225995f, +0.1361163f, -0.0230777f, +0.2701996f, -0.0451344f,
  -0.0259313f, -0.2490604f, -0.2935643f, -0.1303898f, +0.0432406f, +0.3187243f, +0.1906933f, -0.3506148f,
  +0.0355959f, -0.2602817f, +0.0597739f, +0.0239452f, +0.0440186f, -0.0565561f, -0.1123324f, +0.4516430f,
  +0.1746018f, -0.6367363f, -0.1054578f, +0.2327220f, -0.2415432f, +0.0372544f, -0.2034940f, +0.1178274f,
  +0.0658719f, -0.0512392f, -0.0904949f, -0.1384168f, -0.6929459f, +0.4258761f, +0.1789059f, -0.1751666f,
  -0.2392450f, +0.1218368f, +0.2046512f, +0.5835177f, -0.0860708f, -0.1667738f, -0.2736664f, +0.1797558f,
  +0.2637131f, +0.2658562f, -0.3001532f, +0.5620724f, +0.4536112f, +0.1094760f, +0.0168703f, -0.0884772f,
  -0.1012658f, +0.1713070f, +0.0897771f, +0.2450875f, +0.2486035f, +0.0473829f, -0.1424716f, +0.1098492f,
  +0.1188370f, -0.1777160f, +0.0214599f, -0.0649476f, -0.0898687f, -0.2218269f, +0.1069637f, +0.0302551f,
  -0.4465013f, +0.0385087f, +0.0468655f, -0.0709594f, -0.1875697f, +0.3649336f, +0.1155440f, -0.0824960f,
  +0.2364388f, -0.0716620f, -0.2495866f, -0.0902588f, -0.0512436f, +0.0584359f, +0.0068620f, -0.1451263f,
  -0.5151734f, -0.2247957f, +0.1401403f, +0.3507527f, +0.0288411f, +0.5544099f, +0.3883887f, +0.2226819f,
  -0.4610991f, +0.4658369f, +0.4550723f, +0.3336802f, -0.6439266f, +0.5723667f, -0.1346906f, +0.3092029f,
  +0.4171277f, +0.1082345f, -0.0310617f, -0.2005534f, -0.1492939f, +0.0244874f, -0.2084289f, +0.0866153f,
  +0.1885515f, +0.0580974f, +0.1208930f, -0.0623829f, +0.5166640f, -0.0971132f, +0.1423400f, +0.2880223f,
  -0.0921943f, +0.3156123f, +0.1943874f, +0.5231674f, -0.0324520f, -0.1530054f, -0.4259768f, +0.3336768f,
  -0.1305142f, +0.1213382f, +0.2227836f, -0.2524158f, +0.2121039f, +0.0526123f, +0.0043272f, -0.0333588f,
  -0.2355666f, +0.0282798f, +0.0582850f, -0.2074507f, -0.0187176f, +0.1217790f, -0.0215635f, +0.2987860f,
  -0.1317649f, +0.5874579f, +0.0695717f, -0.1153623f, -0.0341497f, -0.0464409f, +0.3697433f, +0.0039847f,
  +0.0172418f, +0.1839657f, -0.0102568f, -0.1034516f, +0.0785963f, +0.3452521f, -0.1479492f, +0.3534145f,
  -0.3373163f, -0.2591269f, +0.3511916f, +0.3062240f, -0.0156452f, +0.1144957f, +0.3674823f, +0.0324329f,
  -0.0966916f, -0.2262795f, +0.0656424f, +0.3709641f, -0.2346677f, -0.2696519f, +0.1090520f, -0.1887988f,
  +0.0972907f, +0.2309800f, -0.1401768f, +0.0946255f, +0.3498730f, +0.0482799f, -0.0029871f, +0.3126823f,
  -0.2720157f, -0.0293753f, +0.2046059f, -0.1085112f, +0.1147855f, +0.3996944f, -0.2201071f, +0.0987845f,
  -0.1036917f, +0.0691749f, +0.2339630f, +0.0099132f, -0.4631452f, -0.0805744f, -0.5384490f, -0.0783371f,
  +0.0327799f, +0.2425474f, +0.0654333f, -0.1727197f, +0.1681976f, +0.1337798f, +0.0320238f, +0.3730583f,
  +0.0833058f, +0.0012947f, -0.0664879f, +0.0737136f, +0.1343535f, +0.1276701f, -0.1281012f, -0.0626939f,
  +0.0907481f, +0.2106779f, -0.3514118f, -0.0821947f, -0.2804554f, -0.2112168f, +0.1072336f, +0.3191203f,
  -0.1609123f, +0.0419626f, -0.4596858f, +0.1187659f, +0.1395560f, +0.0866420f, +0.1379502f, +0.2379444f,
  -0.0162034f, +0.0209106f, -0.0492874f, +0.0259142f, +0.2078597f, +0.0620090f, -0.0154646f, -0.0444063f,
  -0.1455655f, +0.2995082f, -0.2114166f, +0.2191614f, -0.4036440f, -0.0034639f, -0.2218628f, +0.0095518f,
  -0.0697569f, +0.1293170f, -0.1248757f, +0.1935417f, +0.2159333f, +0.0140949f, -0.1058637f, +0.0574184f,
  -0.0175012f, +0.0012780f, -0.0773941f, -0.0160006f, -0.0256072f, +0.0530920f, -0.0552426f, -0.0420351f,
  +0.0597949f, +0.0367407f, +0.0332582f, -0.1162523f, +0.0816702f, +0.0892621f, +0.0161682f, +0.0278140f,
  +0.0035798f, -0.0687056f, +0.0054823f, -0.1006788f, -0.0025419f, -0.0349677f, +0.0321368f, -0.0710061f
);

const float biases[4] = float[4](
  -0.0036914f, -0.2110808f, -0.2222103f, -0.7482983f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer17 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1419326f, +0.0590303f, -0.0254050f, +0.2525178f, -0.0991207f, -0.0527916f, +0.2898529f, -0.1854939f,
  -0.1850253f, -0.4240927f, +0.2368812f, +0.1599378f, -0.1824046f, +0.0868503f, -0.1376017f, +0.2588349f,
  -0.2878264f, -0.3240413f, +0.0282620f, -0.0388504f, -0.5323196f, +0.4338302f, -0.2924504f, +0.1127064f,
  +0.0141923f, +0.0140150f, +0.1008803f, -0.1934689f, +0.1797969f, +0.0323133f, -0.0409286f, +0.1658789f,
  -0.0955110f, +0.2978809f, -0.0091469f, +0.1526743f, -0.2657489f, +0.2322053f, +0.2982180f, +0.3307862f,
  +0.1145242f, +0.3705495f, -0.0902640f, -0.1035803f, -0.1803298f, -0.0827432f, +0.4338743f, -0.1055094f,
  +0.0708075f, +0.3387730f, -0.0329988f, +0.3047397f, +0.6781397f, +0.0214075f, +0.2367798f, +0.2628320f,
  -0.2070572f, +0.1299063f, +0.0612675f, -0.0188346f, -0.1043658f, -0.3238789f, -0.2871798f, -0.4466703f,
  -0.0212484f, -0.1708752f, -0.0710629f, +0.0330081f, +0.2767522f, -0.1065934f, +0.0291627f, +0.1949662f,
  -0.0942773f, +0.1568970f, -0.0068841f, +0.1414572f, -0.3140886f, +0.2882817f, -0.2607068f, -0.0886609f,
  +0.3902051f, +0.0253263f, -0.1168408f, +0.2580942f, +0.2942251f, -0.2875118f, -0.3702185f, -0.2118382f,
  -0.2076198f, +0.0545651f, +0.0568330f, -0.1947158f, +0.2191492f, -0.2292103f, +0.0924962f, -0.1887748f,
  +0.1187636f, +0.0480863f, +0.1097767f, +0.0927870f, -0.6209524f, -0.0341161f, -0.1552275f, -0.1599635f,
  +0.2384065f, -0.5282037f, -0.4459638f, -0.0734718f, -0.5970512f, -0.0170297f, -0.5105771f, -0.0129832f,
  +0.1366353f, +0.0164120f, -0.1392168f, -0.1623367f, +0.3428373f, +0.0475274f, +0.4962134f, -0.2663002f,
  +0.1057724f, -0.2546881f, +0.1145058f, +0.0749299f, -0.0640336f, -0.0397718f, +0.1743164f, -0.1784564f,
  -0.4823677f, -0.2711597f, -0.0080719f, -0.1863600f, -0.5842401f, +0.2672284f, -0.2009729f, -0.2337814f,
  +0.2326435f, -0.1116863f, +0.0378189f, +0.0018169f, -1.0184777f, -0.1154163f, +0.2085352f, -0.0159652f,
  -0.2255583f, -0.1550165f, +0.0066489f, -0.0020662f, +0.2514004f, +0.1010090f, -0.0153657f, +0.1841824f,
  -0.0240797f, -0.1036217f, -0.1582001f, +0.3378483f, +0.0181005f, -0.0091926f, -0.2121857f, +0.2963583f,
  +0.0097934f, +0.2415506f, +0.1903463f, +0.5653916f, -0.0484157f, -0.1895766f, -0.1970201f, +0.1933581f,
  -0.0458734f, -0.1089178f, +0.2159204f, +0.1635640f, -0.1900662f, +0.0346456f, +0.2531143f, +0.0318559f,
  -0.0298323f, +0.1884516f, -0.0895642f, +0.2647973f, +0.3453805f, +0.1730161f, +0.2206699f, +0.0507309f,
  +0.0648149f, -0.0720304f, -0.3039447f, +0.3431452f, -0.1131623f, +0.0387590f, -0.1613322f, +0.2220936f,
  +0.0953505f, +0.2119581f, +0.1370437f, -0.1499487f, +0.0325616f, +0.0224290f, +0.0313148f, +0.0561059f,
  +0.0550912f, -0.1721453f, +0.0261647f, -0.6988139f, +0.0071185f, -0.0417514f, -0.1082289f, +0.0422450f,
  +0.0936626f, -0.1812067f, +0.0139376f, -0.4735550f, +0.3513260f, -0.0151267f, +0.3325316f, -0.0563903f,
  -0.0231232f, -0.1500709f, -0.0199790f, -0.0101346f, +0.0966269f, +0.1392982f, +0.1035679f, -0.0160362f,
  -0.0196555f, -0.1452575f, +0.0445281f, +0.3089213f, -0.3221284f, +0.0841934f, +0.1565165f, +0.1792740f,
  -0.1739988f, -0.0064409f, +0.0086656f, +0.0529749f, -0.0866003f, -0.0754765f, -0.2959953f, +0.2321855f,
  +0.2565984f, -0.0109697f, -0.2631086f, +0.1366988f, +0.0864936f, +0.0995556f, -0.1170143f, -0.2614392f,
  +0.1168057f, -0.2352881f, -0.0844222f, +0.0178220f, +0.3156919f, +0.3225255f, -0.4564225f, -0.4494829f,
  -0.0261725f, +0.1344727f, +0.0545885f, -0.1467516f, +0.0034847f, +0.0512207f, -0.0556839f, -0.1103265f,
  +0.2348669f, -0.0970849f, +0.0580653f, -0.0498171f, +0.0429860f, +0.0092130f, +0.1492106f, -0.2008404f,
  -0.1382865f, -0.3571936f, +0.2391509f, +0.1496298f, -0.3821084f, -0.2204390f, -0.1997053f, -0.1379909f,
  -0.1847655f, -0.1966998f, -0.0139290f, +0.1488259f, +0.0055998f, -0.1004067f, -0.2167071f, -0.0211074f
);

const float biases[4] = float[4](
  -0.0003022f, -0.0299529f, +0.0308974f, +0.2573979f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer18 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1143675f, +0.1078323f, -0.1946925f, +0.0515642f, +0.2192600f, -0.0113084f, -0.0719409f, -0.0412598f,
  -0.2359950f, +0.3023998f, +0.1711430f, +0.1005828f, +0.3049558f, +0.1733344f, +0.0829238f, +0.0750373f,
  +0.2243997f, -0.1673329f, +0.1463425f, +0.0327537f, +0.0236458f, -0.0741703f, +0.0876183f, -0.1179792f,
  -0.0080018f, -0.0076184f, -0.2163667f, +0.0373489f, -0.0294037f, -0.0059091f, -0.0627141f, +0.0604303f,
  -0.0634796f, +0.4289281f, -0.4199519f, +0.0997047f, +0.2017387f, +0.5643628f, +0.1994201f, -0.0156178f,
  -0.3094174f, +0.3022641f, +0.5271335f, -0.4237569f, -0.0593188f, -0.2131102f, +0.0902479f, -0.2135885f,
  +0.2561666f, -0.1537914f, -0.1129004f, +0.0608076f, -0.0628556f, +0.0364695f, +0.1795726f, -0.1490388f,
  +0.4042307f, +0.0197181f, -0.0584129f, +0.0042151f, +0.0154705f, +0.3464426f, -0.0693922f, -0.2644103f,
  -0.1865111f, +0.0404914f, -0.0912371f, +0.1710813f, -0.2187995f, -0.0091673f, +0.1835008f, +0.1760075f,
  +0.0862439f, -0.2740179f, +0.1019041f, +0.1194068f, -0.0446867f, -0.0347212f, -0.2375068f, -0.1123141f,
  -0.0169347f, -0.1301011f, -0.0645128f, +0.0798007f, -0.0763235f, -0.1822186f, +0.2180422f, +0.0876349f,
  +0.2698484f, -0.0152041f, -0.0009933f, +0.0777786f, -0.1077741f, -0.1499498f, -0.0516077f, +0.0322620f,
  -0.2895736f, -0.1426577f, +0.1394076f, -0.4748647f, +0.1279970f, -0.3748798f, +0.1110075f, -0.3480066f,
  +0.2778322f, -0.8336170f, +0.1782882f, -0.2153123f, +0.0347717f, -0.0643450f, +0.0957237f, +0.0676348f,
  +0.0185819f, -0.0254204f, -0.1701880f, +0.1037819f, +0.0722325f, -0.1654845f, +0.0643963f, +0.2683616f,
  +0.0411821f, -0.1223516f, +0.1319612f, -0.2894419f, +0.0845663f, -0.1855647f, -0.1926593f, -0.0609380f,
  +0.1014148f, -0.1697809f, -0.0004817f, +0.3155382f, +0.1766281f, +0.0063671f, +0.1413030f, -0.0660224f,
  -0.3532768f, +0.0709098f, -0.1688749f, +0.5751019f, -0.1090829f, -0.0732424f, -0.0295421f, +0.1505378f,
  +0.0132510f, -0.0648987f, +0.0173706f, -0.0594380f, +0.0702640f, -0.0797137f, -0.2367677f, -0.0217328f,
  +0.0740122f, -0.0497898f, -0.0197358f, +0.1445933f, +0.1101710f, +0.0076564f, -0.0643435f, -0.0531073f,
  -0.1421322f, +0.0861000f, -0.0372490f, +0.1116459f, +0.0094100f, -0.1070720f, -0.0331956f, +0.1337871f,
  -0.0244727f, -0.1722641f, +0.1883925f, -0.1678226f, -0.0424679f, -0.1884508f, +0.1609415f, -0.2434339f,
  +0.2485600f, -0.2353602f, +0.1613498f, +0.1043978f, -0.0259533f, +0.0270426f, +0.1165622f, +0.0357692f,
  +0.0597750f, -0.1921462f, -0.5395826f, +0.5107273f, +0.0998627f, -0.1234683f, -0.1726593f, +0.1664345f,
  +0.0172727f, -0.0673995f, +0.0108137f, +0.3319567f, -0.0231657f, -0.0725093f, +0.0833342f, +0.0942924f,
  -0.1080935f, -0.1207356f, +0.1345290f, +0.6366227f, -0.0091975f, -0.0018769f, +0.1661448f, +0.1178467f,
  -0.3582071f, +0.0492946f, +0.0920610f, -0.0760596f, +0.1148445f, -0.1246698f, -0.0875824f, -0.0111319f,
  +0.0211955f, -0.0514053f, -0.0180053f, +0.0941430f, +0.2890921f, -0.2949146f, +0.0893318f, +0.0285197f,
  -0.4266714f, -0.1672709f, -0.3418775f, +0.2133109f, +0.3643656f, -0.1349576f, +0.6666585f, -0.0614696f,
  -0.2127372f, +0.1925818f, +0.0326645f, +0.1308696f, -0.0954840f, -0.3025540f, +0.0124965f, -0.1070973f,
  +0.0211730f, -0.0188586f, -0.2024281f, -0.8608787f, -0.1634763f, -0.3798165f, +0.0613365f, +0.1967885f,
  +0.2574403f, +0.0023710f, +0.3417014f, -0.7130994f, -0.1461152f, -0.3512323f, -0.5528804f, -0.0061901f,
  +0.0105843f, -0.0383562f, -0.1067669f, -0.2250307f, +0.0415126f, -0.1210121f, -0.1936933f, -0.1273882f,
  -0.2559273f, +0.2017042f, +0.0403039f, -0.7397977f, +0.1303866f, -0.3481017f, -0.2436639f, -0.3451950f,
  -0.3217168f, +0.0622437f, +0.0255059f, -0.4892676f, +0.0236210f, -0.4290072f, +0.0144504f, -0.0140795f,
  -0.2457770f, -0.1470875f, +0.0539116f, -0.4108500f, -0.0298966f, -0.0039869f, +0.0265359f, -0.2682449f
);

const float biases[4] = float[4](
  -0.0432392f, +0.1568342f, -0.0687812f, -0.0335825f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer18 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1866949f, -0.0984848f, +0.0860420f, +0.0978106f, -0.0413183f, -0.2112298f, +0.0618209f, -0.3140621f,
  -0.2390337f, -0.4016316f, +0.2200365f, +0.0687533f, -0.0665381f, -0.0677157f, -0.3630824f, +0.3276479f,
  -0.3864902f, -0.0486683f, -0.0119916f, -0.0163193f, -0.1779284f, +0.2042943f, +0.0191409f, +0.1851634f,
  -0.0956874f, +0.0474272f, -0.1365053f, -0.6401203f, +0.4177898f, -0.5482508f, -0.0795949f, -0.0621738f,
  -0.4816221f, +0.4925316f, +0.1181885f, +0.8659158f, +0.3719266f, -0.0549256f, -0.4592184f, +0.4272460f,
  +0.0069001f, -0.1554642f, +0.4750167f, -0.3754392f, +0.0148262f, +0.2152380f, -0.1037429f, +0.4299341f,
  +0.0252395f, +0.0695768f, +0.1817789f, -0.8641676f, +0.3698844f, +0.2538832f, -0.1825373f, -0.2665626f,
  +0.2651276f, -0.0341200f, +0.1094490f, +1.4752362f, +0.3771961f, -0.0944566f, -0.1004016f, +0.2522045f,
  +0.3527511f, -0.0092651f, +0.1475975f, +0.1898482f, -0.0177378f, -0.0859870f, +0.1296200f, +0.2527363f,
  -0.0722772f, -0.0919854f, +0.0706137f, +0.0245238f, +0.1365940f, +0.0179532f, -0.1202204f, -0.1164620f,
  -0.0766542f, -0.2706827f, -0.0646250f, -0.1748319f, -0.0102013f, +0.0652869f, -0.1194658f, +0.1825168f,
  +0.1825222f, -0.1665163f, -0.2503276f, -0.0670640f, -0.2332179f, +0.1101859f, +0.0632700f, +0.0918983f,
  -0.3094137f, +0.1004015f, +0.0262628f, -0.0718581f, +0.2171202f, -0.2822303f, +0.0980004f, -0.1066991f,
  -0.2885178f, -0.6926017f, +0.0907913f, -0.2850236f, +0.0546837f, -0.2238689f, -0.3399977f, -0.3279810f,
  +0.2629632f, -0.3269407f, +0.1338376f, -0.3532463f, -0.0429145f, +0.0545095f, +0.0344888f, -0.2853184f,
  -0.0673542f, -0.0026802f, +0.0733909f, -0.3462180f, +0.0581928f, +0.1740324f, +0.0895889f, +0.0865628f,
  +0.1526013f, -0.4174030f, +0.3030185f, +0.7087726f, +0.1735895f, +0.1433847f, -0.0456594f, +0.2472806f,
  -0.1029460f, -0.1087959f, +0.0986781f, -0.3951930f, +0.0354712f, -0.1209958f, -0.3473014f, -0.2284624f,
  -0.0698700f, -0.0170852f, -0.1200576f, -0.1697833f, -0.0878325f, -0.1015998f, +0.1483563f, +0.2501688f,
  +0.0560985f, +0.3952420f, +0.1803354f, +0.3602637f, +0.2288648f, +0.2087284f, +0.4768942f, +0.1984704f,
  +0.2952642f, +0.0171630f, +0.3232086f, +0.3226477f, -0.1102679f, +0.0979511f, +0.1668733f, +0.0968430f,
  -0.0747514f, +0.0078205f, -0.0169016f, +0.7550955f, -0.3245915f, +0.0304527f, +0.3492804f, -0.0437570f,
  +0.1459759f, +0.1845295f, -0.0911135f, +1.5139617f, -0.3942905f, +0.4509709f, -0.5053355f, +0.2324289f,
  +0.1496526f, -0.0649092f, -0.4153476f, +0.6576867f, -0.0441905f, +0.1131668f, -0.0992200f, +0.1536774f,
  -0.1348532f, +0.0914544f, +0.0579798f, -0.0824379f, -0.0076795f, -0.0544301f, +0.2288085f, +0.3553296f,
  -0.3980830f, +0.2488606f, -0.2110031f, +0.3954688f, +0.1310218f, +0.0392458f, +0.1035898f, -0.2300542f,
  +0.1969147f, -0.1134108f, -0.0705135f, +0.3778420f, -0.2724190f, +0.0075722f, +0.3035564f, +0.0744209f,
  +0.0269759f, +0.0411858f, +0.0131628f, +0.2181792f, -0.1433925f, -0.2069737f, -0.1468990f, -0.0472092f,
  +0.3570091f, -0.4601302f, -0.0538558f, +0.0956067f, +0.2562918f, -0.2204576f, -0.1743836f, -0.0885240f,
  -0.2387457f, -0.0020632f, -0.2862496f, +0.3119145f, -0.0066810f, -0.1696236f, -0.2710419f, +0.1602391f,
  +0.0097280f, -0.0819031f, -0.0244764f, +0.3146396f, +0.3139800f, -0.3995474f, -0.3976420f, +0.2374976f,
  -0.3494251f, -0.4975253f, +0.0441054f, +0.3316946f, +0.3101837f, -0.0493940f, +0.0791198f, +0.0708164f,
  -0.4804848f, -0.2269343f, -0.0442129f, +0.3838570f, +0.0989517f, -0.0859108f, -0.2490479f, +0.3080430f,
  -0.0821178f, -0.1581619f, +0.1429918f, -0.0336818f, +0.2015301f, -0.0914589f, +0.2097831f, -0.0527776f,
  -0.1648227f, -0.1197594f, +0.3356513f, +0.2340366f, -0.0442014f, +0.2485069f, -0.1259194f, -0.2931908f,
  -0.1458087f, +0.1440502f, +0.1118755f, +0.1821257f, +0.3997469f, -0.1925440f, -0.1571144f, +0.3059687f
);

const float biases[4] = float[4](
  +0.0176347f, -0.0390752f, +0.2686710f, +0.0783684f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer19 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.5728984f, +0.0008690f, -0.3819599f, +0.1695832f, -0.1247691f, -0.0575812f, -0.2318105f, -0.1572213f,
  -0.0912456f, -0.3631979f, +0.0330651f, -0.1295201f, +0.3440135f, +0.0789356f, +0.2312183f, +0.2099116f,
  +0.0460288f, -0.1007126f, +0.1630452f, +0.2144873f, -0.3772930f, -0.5211574f, +0.0787158f, +0.2106609f,
  -0.2981130f, -0.0748357f, -0.0422808f, -0.1145013f, -0.2725392f, +0.3227110f, -0.7312576f, -0.3405369f,
  +0.0451038f, +0.2664217f, -0.0019734f, -0.5773506f, +1.0725579f, +0.0803884f, -0.1788492f, -0.1402296f,
  -0.0024621f, -0.3315471f, -0.1011005f, -0.0722791f, +0.3416329f, -0.6078823f, -0.0520284f, -0.3267268f,
  -0.2667066f, -0.1978229f, -0.0810215f, -0.0799854f, -0.0267553f, +0.1872257f, -0.2662760f, -0.0874991f,
  -0.3128901f, +0.2325633f, -0.0875736f, -0.0685650f, +0.2283654f, +0.2146789f, -0.2304046f, -0.0269245f,
  +0.1823308f, -0.0009517f, -0.0428891f, -0.1154999f, -0.3730482f, +0.2147830f, -0.0169416f, -0.1487420f,
  -0.2793082f, +0.1025784f, +0.1860780f, +0.1069309f, -0.2913272f, +0.1684239f, +0.0836195f, -0.1903027f,
  -0.1234797f, +0.5548607f, +0.2714732f, +0.0961689f, -0.0198038f, -0.4258645f, -0.1300023f, -0.1618458f,
  -0.1422486f, -0.0152126f, -0.1097929f, -0.2417289f, +0.2280809f, -0.0530682f, -0.1710513f, +0.1241992f,
  -0.3147081f, -0.0926545f, +0.0111032f, +0.2310939f, +0.1451848f, +0.5002609f, +0.3360457f, +0.0006089f,
  -0.0829779f, +0.6881042f, +0.3833667f, +0.0050978f, -0.8418227f, -0.1202585f, -0.7347000f, +0.3930817f,
  -0.0112290f, +0.1031142f, -0.0837938f, -0.6386302f, +0.4026740f, +0.1648373f, +0.4200090f, +0.1680815f,
  -0.0775337f, -0.2781102f, -0.1750954f, -0.1925430f, +0.0153278f, -0.1315719f, -0.3388329f, +0.3724594f,
  -0.1501271f, +0.5947422f, +0.3701552f, +0.4974491f, -0.0549193f, -0.5059248f, -0.7050952f, -0.0932268f,
  +0.1136177f, -0.0751811f, +0.0018169f, -0.4418072f, -0.2073967f, -0.1075057f, +0.2042395f, -0.2106087f,
  +0.1967615f, -0.0784545f, +0.1761333f, -0.2209085f, -0.0859746f, -0.1976861f, +0.2187407f, -0.3635601f,
  -0.0956864f, -0.4841614f, -0.3162922f, -1.1542046f, +0.1005639f, +0.2776496f, -0.0675337f, +0.1868555f,
  +0.3112714f, +0.2368570f, -0.1970247f, +0.0417575f, -0.1253392f, +0.3317221f, +0.2065536f, +0.2280125f,
  +0.0412265f, +0.1567278f, +0.3013951f, +0.4143692f, +0.1762672f, -0.0686089f, +0.1593423f, +0.1674316f,
  -0.3531055f, +0.1134297f, +0.0792934f, +0.1198264f, +0.2993644f, -0.2112248f, -0.4315166f, +0.4468323f,
  +0.0597647f, +0.1284574f, +0.1682916f, -0.2430074f, -0.0932563f, -0.1953626f, -0.2302528f, +0.1057245f,
  +0.0300838f, -0.2426646f, -0.1555507f, +0.0527474f, +0.2026636f, -0.3786826f, +0.0457720f, -0.0058624f,
  +0.1275478f, -0.0400726f, -0.0677131f, +0.3957588f, +0.0202505f, -0.1532881f, -0.3530000f, -0.0243939f,
  +0.0042363f, +0.2134195f, +0.1079416f, -0.0702555f, +0.0029647f, -0.0752838f, -0.0987496f, +0.1071324f,
  +0.2505779f, +0.1821915f, -0.1177562f, -0.1053273f, +0.2146107f, +0.1005073f, -0.1942591f, +0.1726814f,
  -0.2651071f, +0.0217710f, +0.1126794f, -0.2731330f, -0.1594432f, -0.0010104f, +0.1939481f, -0.0627084f,
  -0.0750036f, +0.1804484f, +0.1042244f, +0.2608905f, -0.2002860f, +0.0476912f, -0.0559418f, +0.0656731f,
  -0.2538743f, -0.2536906f, +0.1721194f, -0.2017277f, -0.4008312f, -0.1620612f, +0.5960317f, -0.3947758f,
  +0.1001613f, -0.3583616f, +0.2823750f, +0.4578646f, -0.1508394f, +0.9374360f, +0.0757046f, -0.3245173f,
  +0.3475457f, -0.1764206f, +0.1243252f, +0.2280923f, -0.2230980f, +0.0889760f, -0.3076468f, +0.2501108f,
  +0.0452412f, +0.1789881f, +0.0868806f, +0.3696546f, +0.0370890f, +0.6484744f, -0.0250668f, +0.1210019f,
  +0.0308231f, -0.1621725f, -0.4536191f, +0.3505270f, -0.0296441f, +0.3517809f, -0.9326339f, +0.4882084f,
  +0.3461960f, +0.2346139f, -0.0857460f, +0.1416806f, +0.5164624f, +0.0541326f, +0.4918196f, +0.4516195f
);

const float biases[4] = float[4](
  -0.0398325f, -0.1070671f, -0.0059406f, -0.0457284f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer19 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0120030f, +0.0235043f, -0.1452636f, +0.1926617f, +0.3657176f, +0.2905297f, -0.1210398f, -0.0251635f,
  +0.3035607f, -0.1457987f, +0.4163894f, -0.8069121f, +0.4836994f, +0.2155725f, +0.1156041f, -0.2227692f,
  +0.2241742f, -0.5958028f, -0.0859018f, -0.0992049f, +0.0489728f, -0.2128593f, -0.1633153f, +0.2585778f,
  -0.0241886f, +0.0495236f, -0.0748692f, +0.0570492f, -0.1859590f, +0.1577726f, -0.3579692f, +0.1050764f,
  -0.0891042f, +0.5199190f, +0.1819922f, -0.8459001f, +0.0914263f, +0.5140936f, -0.1049692f, -0.1133153f,
  +0.1188159f, +0.3932953f, +0.1589046f, -0.2428589f, +0.2799419f, +0.2611912f, -0.2580710f, +0.0471458f,
  -0.3118718f, -0.3133903f, -0.1316554f, +0.0916609f, +0.4355388f, +0.4951163f, -0.3753774f, +0.1240478f,
  -0.2178781f, +0.0730528f, +0.1093553f, +0.2990493f, -0.4522304f, +0.3034070f, -0.2380909f, -0.0619276f,
  -0.0676212f, +0.2800130f, -0.1758326f, +0.3029794f, -0.0410396f, +0.1706577f, -0.3469261f, +0.1500728f,
  +0.2553255f, -0.1354080f, -0.1897039f, -0.0302751f, +0.0117946f, +0.2258167f, -0.0379882f, -0.2146786f,
  -0.0865657f, -0.2617854f, +0.0755302f, -0.0787790f, +0.1345314f, -0.0476781f, +0.0588676f, +0.3616779f,
  +0.2415983f, +0.1817574f, -0.0666584f, +0.2236957f, -0.1716505f, -0.0071455f, -0.0399467f, +0.3457622f,
  +0.3983206f, +0.2112637f, +0.1151918f, -0.0553189f, -0.1297178f, -0.1827029f, +0.0896225f, -0.8203025f,
  -0.0444325f, -0.2215382f, -0.0843791f, -0.6621156f, -0.0931441f, -0.0721267f, +0.4835769f, +0.1372740f,
  -0.2308692f, +0.2367305f, -0.0436263f, +0.3057056f, +0.1971079f, -0.0638880f, -0.1137384f, +0.1496556f,
  -0.1756953f, +0.0154967f, +0.0664525f, -0.0129101f, -0.2662549f, +0.2380303f, +0.0965460f, -0.5492801f,
  -0.0669542f, -0.4132528f, -0.0030301f, -0.0903261f, -0.1229480f, +0.5148730f, +0.3995938f, -0.2141075f,
  +0.0394684f, +0.0505047f, +0.1749816f, +0.1811488f, -0.0428730f, -0.0564646f, +0.0603662f, +0.1779100f,
  +0.0251049f, -0.0862227f, -0.0850358f, -0.1078957f, -0.0971677f, +0.0247355f, +0.0764236f, -0.4235788f,
  +0.0074095f, +0.0771555f, +0.0782033f, -0.0503038f, -0.1843904f, -0.0466387f, -0.3463939f, -0.0163673f,
  +0.0076832f, -0.4491227f, -0.0821283f, +0.1277884f, -0.2400544f, -0.1616298f, -0.1871151f, +0.0363607f,
  -0.1206867f, -0.0033131f, -0.0853788f, +0.0945030f, -0.2422820f, -0.4305084f, +0.3592514f, +0.0593386f,
  -0.0958391f, +0.4063287f, +0.4826428f, -0.1876518f, -0.1067679f, +0.1925979f, -0.2149889f, -0.3012783f,
  -0.4532662f, +0.1671891f, -0.0222041f, +0.2219445f, +0.2695690f, -0.0561816f, +0.2782139f, +0.0783941f,
  +0.2793558f, -0.3366920f, -0.0645546f, +0.1195450f, -0.3632808f, +0.1509580f, -0.2647279f, +0.5155535f,
  +0.0883702f, +0.0913405f, -0.0736737f, +0.0766367f, +0.8148364f, +0.1210129f, +0.2607183f, +0.0209038f,
  +0.0789079f, +0.3021549f, -0.2402025f, +0.2545205f, +0.1934416f, +0.0661514f, +0.3764016f, +0.0481495f,
  -0.1733295f, -0.2496510f, -0.0547935f, +0.0169003f, -0.0291048f, +0.0539722f, +0.3060575f, +0.0173036f,
  +0.1605295f, +0.2648878f, -0.1313551f, +0.1203174f, +0.2095003f, -0.0903871f, +0.0930689f, +0.3043627f,
  -0.0077601f, +0.2926801f, -0.1230975f, -0.0169659f, +0.0355817f, +0.1799506f, +0.0577658f, +0.1765215f,
  -0.2351147f, -0.3265581f, +0.4509636f, +0.4342101f, -0.0236779f, +1.0382836f, -0.1937553f, -0.6286860f,
  +0.1373157f, -0.0063079f, +0.1983519f, -0.1572141f, -0.2587620f, +0.0248811f, -0.6565472f, -0.1974395f,
  -0.0809498f, +0.2528499f, -0.0425797f, +0.0523792f, +0.2048345f, -0.0455952f, +0.0989246f, +0.1053421f,
  +0.2889825f, -0.2288192f, +0.0532299f, -0.2635826f, +0.1603772f, +0.0406187f, +0.4060645f, +0.1158342f,
  +0.2432244f, +0.1147882f, +0.1332015f, +0.0423977f, -0.2265577f, -0.3504167f, +0.0196412f, -0.1238529f,
  +0.0015125f, -0.0954148f, +0.0303312f, -0.0145900f, +0.0229622f, -0.1016134f, -0.1127958f, +0.0161841f
);

const float biases[4] = float[4](
  -0.0544229f, -0.0264862f, +0.1157904f, -0.1277536f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer20 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.4072171f, -0.0771432f, +0.0298652f, -0.4601059f, -0.2957636f, +0.0023954f, +0.1301723f, -0.2006855f,
  +0.1839335f, +0.0514954f, -0.1641461f, -0.0563275f, +0.1266906f, -0.2278692f, +0.4752461f, +0.0849979f,
  +0.0909389f, +0.3261430f, -0.0906239f, -0.3173718f, +0.1567934f, +0.0795324f, -0.1423053f, -0.2635157f,
  +0.0116145f, -0.1431777f, +0.1730045f, -0.0727360f, +0.1282983f, +0.2441561f, +0.3720717f, -0.0425292f,
  -0.0668552f, +0.6343336f, +0.3900178f, -0.7074268f, +0.2789141f, +0.1874208f, +0.1972283f, -0.4894274f,
  +0.5435053f, -0.2624893f, -0.3837636f, -0.3405293f, +0.1235392f, -0.1956409f, -0.3607448f, +0.3217625f,
  +0.0886860f, +0.0317817f, -0.4502528f, -0.0539671f, +0.1348202f, -0.0284721f, -0.0365373f, -0.0749528f,
  -0.0393440f, +0.3365196f, +0.1521987f, +0.1448302f, -0.0638237f, +0.3531691f, +0.1679809f, -0.1101555f,
  +0.2032484f, +0.1854045f, -0.0223591f, +0.0701529f, +0.0221467f, +0.1734557f, +0.1188207f, +0.0936569f,
  -0.1826942f, +0.0839023f, -0.2567663f, +0.1335041f, +0.1573770f, -0.1287496f, -0.4563584f, +0.0046666f,
  -0.2501631f, -0.1498405f, -0.0215637f, +0.8425835f, -0.2894006f, +0.1549900f, -0.4064777f, -0.0602345f,
  +0.2030082f, -0.1433595f, +0.2624028f, -0.3923513f, -0.0409071f, +0.2222687f, +0.0122902f, +0.0518335f,
  +0.1457079f, -0.1403174f, +0.1770425f, +0.1578041f, -0.0513817f, -0.3012638f, -0.1142483f, -0.1044731f,
  -0.4791071f, +0.0149072f, +0.0004739f, -0.3772245f, +0.0157292f, +0.4235795f, -0.4529632f, -0.1468566f,
  -0.0218905f, -0.4236636f, -0.1133841f, -0.4455409f, +0.1417416f, +0.1097691f, -0.0324336f, -0.4958537f,
  +0.0471940f, -0.2495800f, +0.1865367f, +0.0256084f, -0.0617851f, -0.2053476f, -0.0969861f, -0.0600646f,
  -0.3960853f, -0.0259262f, +0.2692805f, +0.0109360f, +0.1456862f, -0.1490164f, -0.1608813f, -0.1328976f,
  +0.0865027f, -0.2339861f, +0.1044236f, +0.2946376f, -0.0707884f, -0.1690330f, -0.0771378f, +0.1107646f,
  +0.0068810f, -0.0375000f, -0.2197956f, +0.0838097f, -0.0468377f, +0.1107845f, +0.0507515f, -0.1302378f,
  -0.2840838f, +0.2880104f, -0.2870691f, +0.2936518f, -0.1060803f, +0.0528654f, +0.0227665f, +0.0924287f,
  +0.0159325f, -0.0692497f, +0.0241966f, +0.1040976f, +0.0375842f, +0.2456529f, -0.0800562f, -0.1299468f,
  +0.1062698f, -0.0875554f, +0.2440029f, +0.0625952f, +0.0475751f, +0.0643121f, -0.0731647f, -0.0953821f,
  -0.1232379f, -0.0846668f, -0.0512044f, -0.0413413f, +0.0042171f, +0.1089162f, -0.3610074f, -0.3667152f,
  +0.0870555f, -0.0115133f, +0.0160666f, -0.1539627f, +0.0351945f, +0.2338533f, +0.1403523f, -0.0244037f,
  -0.1023220f, -0.1318439f, -0.0626503f, -0.0333055f, +0.2100597f, -0.0929749f, -0.0293057f, -0.0966277f,
  -0.1660015f, -0.2295737f, +0.2476280f, -0.1639331f, +0.2960515f, -0.3618547f, -0.0106155f, -0.1459374f,
  -0.0683744f, -0.1220845f, +0.0240252f, +0.0211770f, +0.1891137f, +0.0241923f, +0.0644251f, -0.1339249f,
  -0.2591625f, -0.1756243f, +0.1421698f, -0.4335733f, +0.2780017f, +0.0347792f, -0.2022530f, -0.0810640f,
  -0.2471036f, +0.3372052f, -0.0994095f, +0.3694305f, -0.1292866f, +0.2110222f, -0.1048528f, -0.2078881f,
  +0.0314162f, -0.2417387f, -0.1296093f, -0.1016075f, +0.3201777f, +0.0119520f, +0.1888162f, +0.6107398f,
  +0.0632632f, +0.1844559f, +0.5674889f, -0.0720084f, +0.1397520f, -0.4984050f, -0.6066468f, +0.1188483f,
  +0.4240910f, +0.5875115f, -0.1914896f, +0.4170382f, +0.1955483f, +0.4528958f, -0.0126193f, +0.6457006f,
  +0.1123567f, -0.4225940f, +0.2382986f, -0.0650449f, -0.2794738f, -0.4718615f, +0.0324926f, -0.2823048f,
  +0.2346010f, -0.1092647f, +0.1331099f, +0.1752693f, +0.5263453f, -0.1353489f, -0.0879485f, -0.0696739f,
  -0.0930397f, -0.7768502f, +0.4705726f, -0.0743052f, +0.6654783f, -0.0585122f, +0.0373732f, -0.1527336f,
  -0.3274711f, -0.0791954f, -0.0183810f, -0.1163579f, +0.4447040f, +0.0731321f, +0.1905298f, +0.0494104f
);

const float biases[4] = float[4](
  -0.0517494f, +0.1153329f, -0.1032946f, +0.0092192f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer20 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2544798f, +0.1164368f, -0.0757104f, -0.2783237f, +0.1080318f, -0.0216155f, -0.1549167f, +0.0323375f,
  -0.0380691f, -0.0282271f, +0.2603973f, -0.4721759f, +0.2977836f, -0.0487736f, -0.3453414f, +0.1370854f,
  -0.1327935f, -0.0129435f, +0.2499544f, -0.1269041f, +0.1053297f, -0.1674456f, +0.0780585f, -0.3959099f,
  -0.0863965f, +0.4833640f, +0.3528910f, -0.4460929f, -0.2597627f, +0.3554776f, -0.2630954f, -0.0461970f,
  +0.0346019f, -0.1965446f, -0.3234029f, -0.1555524f, +0.0484854f, +0.2381016f, +0.0856986f, +0.0202625f,
  -0.0208928f, +0.1741597f, -0.3061121f, +0.2811176f, +0.2530611f, +0.1356396f, +0.0839658f, +1.0397607f,
  -0.1284975f, +0.0677883f, -0.0575225f, -0.1718603f, +0.1483372f, +0.1378265f, +0.1804295f, -0.0317207f,
  +0.4650913f, +0.5059934f, +0.3545779f, +0.0424740f, -0.6617412f, +0.2456157f, +0.0487824f, -0.4274205f,
  +0.1726499f, +0.3666175f, +0.2986729f, -0.0387817f, +0.1328290f, +0.2335242f, +0.0624080f, -0.4922816f,
  -0.6722622f, -0.3588382f, -0.0508046f, -0.5779841f, +0.1151811f, -0.2296450f, -0.1920023f, +0.0360477f,
  -0.3373181f, -0.2623298f, +0.0306233f, -0.4680191f, -0.2207456f, -0.2358362f, +0.2067937f, +0.2893391f,
  -0.3833989f, +0.3123839f, +0.0834634f, -0.4259242f, -0.7068571f, -0.3377655f, +0.1577905f, -0.0852586f,
  +0.0982562f, +0.0668935f, -0.0594238f, -0.4724687f, +0.2756385f, -0.0275483f, -0.0542984f, -0.1274424f,
  -0.6420583f, -1.2726185f, +0.0784438f, -0.3708522f, +0.3263462f, -0.3372853f, +0.2140389f, -0.1084045f,
  -0.6404203f, +0.4677925f, -0.0349091f, -0.2044155f, -0.3063844f, +0.2812271f, +0.2042320f, -0.5511262f,
  +0.1011783f, -0.0462593f, -0.2816695f, -0.2589754f, +0.2775969f, -0.1272953f, +0.1112147f, -0.1491494f,
  -0.5263377f, -0.0002342f, +0.0457406f, +0.0053126f, +0.1946552f, -0.4426869f, -0.0122493f, +0.0802582f,
  +0.1281777f, -0.2712745f, -0.4251838f, -0.2048694f, -0.2781410f, -0.1539566f, +0.0624902f, +0.0677071f,
  +0.1479171f, +0.1421698f, +0.1623731f, -0.1632131f, +0.0532872f, -0.0698051f, -0.1977091f, -0.0594176f,
  +0.3373992f, +0.0812184f, +0.2845725f, -0.1713163f, +0.6071019f, -0.1282484f, -0.0763980f, +0.0220585f,
  +0.0785784f, +0.3655370f, +0.1260204f, -0.0664887f, +0.4950546f, +0.1071079f, +0.1781215f, -0.2009453f,
  +0.0982115f, +0.0735508f, +0.3550870f, -0.3167030f, +0.2454883f, +0.0229878f, -0.0908396f, -0.0023443f,
  +0.2443556f, -0.4130331f, +0.4145983f, +0.3182783f, +0.1516802f, -0.2597052f, +0.0500008f, -0.1847438f,
  +0.3425884f, +0.2706338f, +0.0237384f, +0.1722303f, -0.1380053f, +0.2341771f, +0.1033330f, -0.0038861f,
  +0.0507722f, +0.0588462f, -0.0386253f, -0.0639827f, +0.4054774f, +0.0777095f, +0.0946371f, -0.2227199f,
  -0.1178341f, -0.5536132f, +0.2665131f, -0.0875141f, +0.2451210f, -0.2062983f, +0.1250597f, -0.2037071f,
  -0.1256697f, +0.2215195f, -0.0194110f, -0.2988051f, +0.1762892f, -0.0758812f, +0.1338833f, -0.2085260f,
  -0.3491029f, -0.0051410f, -0.2252704f, -0.0173398f, -0.0579865f, +0.0783646f, +0.0829941f, +0.0049371f,
  -0.2570722f, +0.0722744f, -0.2100525f, +0.1304115f, -0.4644958f, +0.2511474f, +0.0107157f, -0.0805349f,
  +0.2730381f, +0.0780336f, -0.3636524f, +0.4382608f, -0.4408883f, +0.2883407f, -0.1322511f, +0.0171266f,
  +0.0242734f, -0.2567683f, -0.1214077f, -0.0587993f, +0.2551027f, +0.0961258f, -0.2098595f, +0.0370973f,
  -0.3093236f, -0.7844205f, -0.2158469f, +0.1578125f, +0.0567914f, -0.1470909f, +0.0731008f, +0.0054753f,
  -0.4631124f, +0.3234918f, -0.2590234f, -0.2928688f, -0.1575536f, +0.4778712f, -0.0578295f, +0.0168609f,
  +0.0440665f, -0.1613292f, -0.2226406f, -0.0552482f, +0.3631952f, -0.0811094f, +0.1872905f, -0.1139562f,
  +0.1143662f, +0.3721224f, +0.0399991f, +0.0652058f, -0.0601555f, -0.0601218f, -0.1091968f, -0.1259230f,
  +0.3266008f, +0.1784198f, -0.0153696f, +0.1180345f, +0.3103846f, +0.0685970f, +0.3575171f, +0.0288699f
);

const float biases[4] = float[4](
  +0.1928106f, +0.0499469f, -0.0217655f, -0.0199013f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer21 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1703319f, +0.0262429f, +0.3519849f, -0.0923752f, +0.3394081f, +0.1760617f, +0.0948926f, +0.3482906f,
  -0.0584103f, +0.2857247f, -0.1183869f, +0.1389174f, +0.0670397f, -0.3574508f, +0.1556065f, +0.3356518f,
  -0.0940724f, +0.2431078f, +0.1676925f, +0.2555425f, +0.2353516f, -0.2631268f, -0.1200289f, +0.0313033f,
  -0.7517779f, +0.3011086f, +0.1440293f, -0.1380558f, +0.0547496f, -0.0920296f, -0.1782914f, +0.0014528f,
  -0.0576345f, +0.5351228f, -0.2634393f, -0.0657205f, +0.2437288f, -0.1964214f, -0.2687772f, +0.2787517f,
  -0.1131693f, +0.0057378f, -0.1925021f, +0.1616781f, +0.1425901f, +0.0048647f, +0.1229759f, +0.2085426f,
  -0.2130841f, +0.1963264f, +0.2128891f, -0.2750587f, +0.1307792f, +0.2507730f, -0.1245146f, -0.0454522f,
  +0.2764843f, -0.1160449f, +0.0942151f, -0.2705317f, -0.1714429f, +0.3681046f, -0.0928076f, -0.0903546f,
  +0.1712706f, -0.0698009f, +0.1661595f, -0.3738388f, -0.1188790f, -0.2012533f, -0.1118410f, -0.2832691f,
  -0.1601671f, -0.3573637f, +0.2238806f, -0.1683235f, -0.0635306f, +0.0444039f, -0.0894134f, -0.4178656f,
  -0.1715515f, -0.4248746f, -0.1315559f, +0.0359937f, +0.2510844f, -0.5023957f, +0.2169707f, -0.3581072f,
  -0.0187427f, -0.0175348f, +0.1048403f, +0.1302350f, -0.1860974f, -0.0687214f, +0.0211565f, +0.0816766f,
  -0.0541321f, -0.2031684f, -0.2982336f, +0.0149960f, +0.0743091f, -0.0024920f, -0.3868227f, -0.0081139f,
  -0.2866783f, -0.2153047f, -0.4740973f, -0.4146630f, +0.1483597f, -0.6445780f, +0.1694508f, +0.1003786f,
  -0.1267272f, +0.3069071f, +0.0559261f, +0.2058636f, +0.3970605f, +0.0476187f, +0.0042493f, +0.0796776f,
  +0.2649069f, -0.3669155f, -0.3243182f, +0.1284999f, +0.0591011f, +0.1261704f, +0.2323807f, +0.2860965f,
  +0.0402016f, +0.0987474f, -0.0621292f, +0.3329165f, -0.0992482f, -0.0453073f, -0.0710557f, +0.0401430f,
  -0.0497809f, +0.1967892f, +0.1354258f, +0.3389755f, -0.0337068f, -0.1464076f, +0.1535426f, +0.2185361f,
  -0.0374433f, +0.3988192f, +0.1664891f, +0.0089333f, -0.3134323f, +0.0988708f, -0.0826234f, -0.1157280f,
  -0.1334592f, +0.1746504f, +0.2070171f, -0.3077297f, -0.1812676f, +0.1396883f, +0.2058121f, -0.1081117f,
  -0.1439811f, -0.1585789f, +0.3258491f, -0.3381203f, +0.2244810f, -0.2792295f, -0.2589763f, +0.3951929f,
  +0.0504824f, -0.0993814f, -0.1252635f, +0.2510922f, +0.2091301f, +0.1140392f, +0.1550101f, -0.1866520f,
  +0.1120972f, -0.0318728f, -0.1273728f, -0.6128809f, -0.3960397f, -0.0612416f, -0.9586871f, +0.0796360f,
  -0.0356703f, -0.4420791f, -0.2013416f, -0.0370158f, +0.1395267f, -0.0455202f, +0.0566340f, +0.1365685f,
  +0.0170315f, +0.2244312f, +0.0171538f, +0.4026929f, +0.6291842f, +0.1368717f, +0.2476533f, +0.0897906f,
  +0.0789434f, +0.1697715f, -0.1337325f, +0.3222353f, -0.2192478f, +0.6850414f, +0.1860921f, -0.0413210f,
  +0.0557461f, +0.0599250f, +0.1537868f, +0.1396460f, -0.0429469f, +0.2057317f, -0.2680856f, +0.2265356f,
  +0.1273830f, -0.0423288f, +0.2389945f, -0.1236608f, -0.2570930f, +0.8225824f, +0.4799647f, -0.2573393f,
  +0.4343917f, +0.2743456f, +0.1269434f, -0.2317542f, +0.0196551f, +0.1125674f, -0.1437674f, +0.2406081f,
  +0.2323763f, +0.2824474f, +0.0795531f, +0.0451276f, +0.2127758f, -0.1374024f, -0.1420860f, +0.0663776f,
  +0.3501029f, +0.3469881f, +0.3301031f, +0.2484907f, -0.1619059f, +0.5536485f, -0.6071218f, -0.8308014f,
  +0.0380456f, +0.2550349f, +0.1637165f, -0.6359731f, -0.1333635f, +0.0968762f, +0.2715170f, +0.5707771f,
  -0.2460646f, +0.1942146f, +0.0355833f, +0.2185658f, +0.4930190f, -0.2528365f, -0.0186823f, +0.6101256f,
  -0.2068687f, +0.2151252f, +0.1562234f, +0.1437896f, -0.2056879f, +0.0404818f, -0.2699825f, -0.3901077f,
  +0.0107961f, -0.0229980f, +0.0672447f, -0.0237526f, +0.1013983f, +0.0888221f, -0.0618185f, +0.4334613f,
  -0.1578417f, +0.1466756f, -0.2249841f, +0.1398145f, +0.3164448f, +0.0012983f, -0.1400779f, +0.2161120f
);

const float biases[4] = float[4](
  +0.1246041f, +0.0080963f, -0.0635149f, +0.0004318f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer21 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.4188929f, +0.0450631f, +0.1232694f, +0.2400908f, +0.1017550f, +0.3518382f, +0.2680829f, +0.0905196f,
  +0.3338020f, -0.1926898f, +0.3235431f, +0.0240042f, -0.3420232f, +0.3224979f, +0.0625089f, +0.3865015f,
  +0.0450729f, -0.0510876f, +0.1519004f, +0.0872379f, -0.1587713f, +0.0127362f, +0.0194007f, +0.2451227f,
  +0.6712327f, +0.1557174f, -0.0284165f, +0.0371775f, +0.0240734f, -0.1252692f, -0.1353183f, -0.3770057f,
  +0.5365930f, +0.0814426f, -0.0181610f, -0.4595499f, -0.1949674f, +0.2143631f, -0.0877829f, +0.1003377f,
  -0.3827210f, -0.3044832f, +0.1414992f, +0.3218906f, -0.2455502f, -0.0716736f, +0.0918200f, +0.0944468f,
  +0.0896534f, +0.1069945f, +0.0014361f, -0.0484135f, +0.0448635f, -0.1408222f, -0.2334398f, -0.7302448f,
  +0.2630314f, -0.2681399f, +0.1133612f, -0.5644643f, +0.0984908f, -0.0324280f, +0.5672423f, +0.1176169f,
  -0.3450206f, +0.0473955f, -0.4087878f, -0.3815281f, -0.1348583f, -0.0183188f, +0.4390823f, -0.0174994f,
  +0.1273316f, -0.3082286f, -0.2045667f, -0.0504567f, -0.2533169f, -0.4009644f, -0.2526013f, +0.1872691f,
  +0.1842097f, -0.0773099f, +0.0481752f, -0.1521216f, +0.0409688f, -0.0202445f, -0.0592998f, +0.0514625f,
  -0.2241348f, -0.1240276f, -0.2940391f, +0.1419801f, -0.1422282f, +0.1685525f, +0.2446793f, +0.3007783f,
  -0.2426292f, -0.2262384f, -0.0397310f, -0.3568991f, +0.0292825f, +0.2085625f, -0.2824436f, -0.3846333f,
  -0.5730131f, +0.4045624f, +0.2215683f, -0.3511655f, +0.0299441f, -0.1736722f, -0.7062027f, -0.0183941f,
  +0.2367745f, -0.2483166f, +0.2804216f, -0.4686018f, -0.0567743f, +0.3687697f, +0.0161300f, +0.0842796f,
  -0.2505577f, +0.3755875f, +0.0120188f, -0.0232255f, -0.0268634f, -0.1981297f, -0.0165829f, -0.1675923f,
  -0.0125107f, +0.0118372f, +0.3722152f, -0.0373413f, -0.3171028f, +0.0816155f, -0.2620235f, +0.0129563f,
  +0.1337012f, +0.0302086f, -0.1479652f, +0.1052097f, -0.0619916f, +0.0325830f, -0.0570005f, -0.1052006f,
  -0.1649408f, -0.4014634f, +0.5188721f, -0.0955036f, +0.2183448f, +0.9922482f, +0.0617867f, -0.1598260f,
  +0.0398380f, +0.2606551f, -0.0466950f, +0.0572628f, +0.0845434f, -0.2698722f, +0.7944957f, -0.0046620f,
  +0.5519086f, -0.0556761f, +0.0095851f, -0.3606971f, +0.0851069f, -0.1582004f, +0.0592961f, -0.2126392f,
  +0.0589651f, +0.1680976f, +0.0711081f, -0.5277605f, +0.5425318f, +0.0717302f, -0.3415861f, +0.1932092f,
  -0.3304388f, +0.0853610f, -0.1363980f, +0.0059862f, +0.3170198f, +0.2559693f, -0.4951248f, +0.1771842f,
  +0.0544305f, +0.3859592f, +0.3715777f, +0.2643539f, +0.3145384f, -0.2099252f, +0.0516332f, +0.1594449f,
  -0.0124793f, -0.3965579f, -0.1421810f, -0.5011922f, -0.4557563f, -0.1758625f, -0.5741146f, +0.1572527f,
  +0.3211997f, -0.0337426f, -0.1073669f, -0.3107406f, +0.0572806f, +0.4296044f, -0.7105461f, -0.0798791f,
  -0.1181306f, -0.3344913f, -0.2917599f, +0.3731428f, -0.0237371f, +0.4590890f, -0.5177918f, +0.1792920f,
  +0.0795234f, +0.1312207f, -0.2157463f, -0.0704587f, -0.1026107f, -0.1251943f, -0.0667212f, -0.1019463f,
  +0.0628772f, -0.0545460f, +0.0708726f, -0.0307724f, -0.2315225f, +0.1234884f, +0.1921061f, -0.2240967f,
  +0.0382370f, -0.3072087f, -0.1245472f, +0.2452149f, +0.0251870f, -0.2091222f, -0.1185259f, +0.0549270f,
  -0.2046629f, -0.1450498f, +0.2288220f, -0.2809637f, +0.0211595f, +0.1951246f, +0.1338281f, +0.1207665f,
  +0.1390307f, +0.4782457f, -0.0536775f, -0.0383772f, -0.2039320f, -0.3332416f, -0.2709258f, +0.3165817f,
  -0.2141641f, +0.3596001f, +0.0074586f, -0.1360254f, -0.4074784f, +0.5638064f, +0.2474605f, +0.3177783f,
  +0.2065521f, +0.2351233f, -0.0166312f, +0.1673801f, +0.3247142f, -0.1404074f, +0.4946420f, +0.1363311f,
  +0.3026958f, +0.2783147f, -0.0203030f, -0.1001922f, -0.0899476f, -0.0477124f, +0.4735627f, -0.3583257f,
  +0.0169997f, -0.1257595f, +0.2535183f, -0.8382547f, +0.8293704f, -0.2398778f, +0.6163066f, +0.2967003f
);

const float biases[4] = float[4](
  -0.0078351f, +0.0753863f, -0.1614825f, -0.4387230f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer22 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0313873f, -0.1643048f, +0.1395154f, +0.2033541f, -0.1614577f, +0.2159311f, -0.4660306f, +0.2519183f,
  -0.0170321f, +0.0490566f, +0.1674950f, -0.2317101f, -0.0123458f, +0.0896889f, -0.2339693f, -0.4506946f,
  -0.0612633f, -0.2239421f, -0.1434699f, +0.1366044f, +0.3078769f, +0.0849207f, +0.2207513f, -0.1921472f,
  -0.1789356f, -0.1939470f, +0.0191252f, -0.2258598f, +0.1003457f, -0.0250569f, -0.1737388f, +0.3867370f,
  +0.2207135f, +0.4611560f, +0.5820774f, +0.0614129f, +0.2199222f, +0.1716753f, -0.2947864f, +0.3217156f,
  -0.0718938f, -0.1480694f, -0.0716763f, -0.2347342f, +0.2012237f, -0.0218165f, +0.3816608f, +0.0570835f,
  +0.1979863f, -0.0068462f, +0.0662828f, -0.1795615f, +0.0648420f, -0.2353521f, +0.2608443f, +0.1404520f,
  +0.0895164f, +0.3091383f, +0.0849961f, -0.0796742f, +0.2911134f, -0.6045145f, +0.3632035f, +0.1535185f,
  +0.0956058f, +0.0292263f, +0.1329822f, -0.6518002f, -0.1379091f, -0.2669828f, +0.3540424f, -0.0313393f,
  +0.0927019f, -0.2024084f, +0.0979063f, +0.0553381f, -0.2376431f, -0.3300802f, -0.0834375f, +0.4113780f,
  +0.3127099f, -0.1565016f, -0.0611907f, -0.0518225f, +0.0542821f, +0.1457197f, -0.1436946f, -0.1973311f,
  -0.2502276f, +0.0923731f, +0.0275366f, -0.0828507f, +0.0646166f, -0.0132848f, -0.0126062f, -0.1273935f,
  +0.0937551f, -0.3197637f, +0.0944853f, +0.2419161f, -0.4012730f, -0.4988202f, -0.4051852f, -0.1357157f,
  +0.1728197f, +0.5039167f, +0.3566644f, -0.1234101f, -0.1908949f, -0.4943423f, -0.2789286f, -0.0265155f,
  -0.1469077f, +0.0161447f, +0.0785419f, +0.0928536f, +0.0244180f, -0.0913717f, -0.1113814f, +0.2970106f,
  +0.1349944f, -0.1382547f, +0.1262362f, +0.1955763f, -0.4249265f, +0.1503258f, -0.3674977f, +0.3413228f,
  +0.1558467f, +0.1936002f, +0.2977671f, +0.3788839f, -0.2353225f, +0.3600391f, -0.0266173f, +0.1832971f,
  -0.0146895f, -0.1307267f, -0.0015326f, +0.0444918f, -0.1557912f, +0.1256506f, -0.0106354f, -0.0087844f,
  +0.1673060f, -0.1789750f, +0.1455526f, +0.0636240f, -0.0251361f, -0.0009803f, -0.0661534f, +0.0612135f,
  +0.0935778f, -0.1337217f, +0.1250083f, +0.1119664f, -0.0784648f, -0.1696427f, -0.2592534f, +0.0153980f,
  -0.0172253f, +0.1166236f, -0.0022877f, -0.0773625f, +0.0999316f, +0.0015581f, +0.2130495f, -0.0681068f,
  -0.0084078f, -0.0435803f, -0.0609847f, -0.0317161f, -0.2681790f, -0.3749703f, +0.0184502f, +0.0254458f,
  -0.0536866f, +0.2036547f, +0.0705638f, -0.1337559f, -0.2894858f, +0.2305540f, +0.2332722f, -0.1826411f,
  -0.1058897f, +0.0914121f, +0.2463595f, +0.0996601f, +0.2601712f, +0.0467853f, -0.1201098f, +0.0221053f,
  +0.0709169f, -0.0748994f, +0.1537005f, +0.1064686f, -0.1205226f, -0.1897749f, -0.1950748f, -0.0180268f,
  +0.2569312f, +0.2318453f, +0.0265121f, +0.2852912f, -0.2545713f, -0.1411611f, -0.1078020f, -0.0652791f,
  -0.2078766f, +0.0040734f, +0.1016848f, -0.0549884f, -0.0006510f, +0.0891002f, +0.1300724f, +0.1225322f,
  +0.2066717f, -0.0986232f, -0.3192239f, +0.2432072f, -0.0415142f, -0.2859833f, +0.0101232f, +0.2554937f,
  +0.2192525f, +0.1405650f, -0.5933506f, -0.0433665f, +0.2214597f, -0.1662428f, -0.4124925f, -0.6398112f,
  +0.4629492f, +0.0910598f, -0.1133434f, +0.1326020f, -0.0505514f, -0.0230757f, +0.3792307f, -0.1079151f,
  -0.0594083f, -0.2661695f, -0.1997650f, +0.0191617f, -0.2015742f, +0.1419927f, -0.0474388f, -0.1731018f,
  -0.0023049f, +0.0748864f, +0.0158499f, -1.0129569f, +0.3888030f, -0.0313574f, +0.3756040f, -0.5825983f,
  +0.2038657f, -0.1160123f, +0.0634936f, +0.5383422f, -0.0623946f, +0.3844802f, -0.2475589f, -0.2454921f,
  -0.0853642f, -0.1943763f, +0.0887014f, +0.0859490f, -0.0483497f, -0.1415929f, -0.0689233f, -0.2601025f,
  -0.0287085f, +0.0323379f, +0.0932391f, -0.2929240f, +0.1034516f, -0.2991709f, +0.5191880f, -0.1531852f,
  +0.0928013f, +0.0427747f, -0.2112742f, +0.0185584f, +0.0582580f, -0.1975565f, +0.1171638f, -0.0191687f
);

const float biases[4] = float[4](
  +0.1056408f, +0.0819557f, -0.1096082f, -0.2266065f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer22 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1031422f, -0.0736167f, -0.0561456f, +0.0728664f, -0.2378986f, -0.0114450f, -0.0546252f, -0.6425229f,
  +0.2028820f, -0.0509376f, -0.4312374f, +0.0911302f, +0.3448675f, -0.2009050f, +0.2028766f, +0.5027481f,
  +0.2378469f, +0.1485133f, -0.5724953f, +0.0897180f, -0.1869885f, +0.0334982f, -0.3070102f, -0.1368326f,
  +0.0597007f, -0.1323221f, -0.0309918f, -0.0939583f, +0.1572186f, -0.1375618f, -0.6532407f, +0.6200511f,
  -0.0431221f, -0.1831488f, +0.1569927f, -0.4052633f, +0.2585252f, -0.2891695f, +0.0868194f, +1.1348274f,
  +0.0045451f, -0.1199829f, -0.0858833f, -0.0164735f, +0.0605225f, +0.0794414f, +0.0374615f, -0.0276851f,
  -0.0827805f, -0.0723349f, -0.0026003f, +0.0410569f, +0.1792415f, +0.2027850f, +0.2826166f, -0.0488697f,
  -0.1167142f, -0.3714451f, +0.0012732f, -0.1844976f, +0.1697966f, -0.1116758f, -0.0245871f, +0.0058387f,
  -0.1806268f, -0.4162730f, +0.3078402f, -0.2264600f, -0.2014598f, -0.0547138f, +0.1868844f, -0.0181681f,
  +0.1959113f, +0.0769744f, +0.0273777f, -0.1140203f, -0.2474336f, -0.3810797f, -0.1856377f, -0.0762530f,
  -0.0268550f, +0.0574761f, -0.4285065f, +0.1566101f, -0.3127297f, +0.0344588f, -0.2035065f, -0.0169593f,
  -0.1532107f, -0.0168185f, -0.1928202f, -0.3176467f, +0.2607060f, +0.4241202f, +0.0447126f, -0.2462599f,
  +0.0427543f, +0.2367147f, +0.3544817f, +0.0504454f, -0.0070064f, -0.4142446f, +0.1582620f, -0.6011985f,
  -0.2920807f, +0.0644744f, -0.0799551f, -0.3001268f, -0.0582127f, +0.3375772f, +0.4764988f, -0.0351684f,
  -0.1581994f, -0.2280046f, +0.1489594f, -0.9474314f, +0.6994321f, -0.4875342f, +0.0766420f, -0.3781471f,
  +0.4604912f, -0.0030686f, +0.2363904f, +0.1107336f, +0.0657395f, -0.2206086f, -0.2705288f, -0.1238525f,
  +0.2237116f, +0.4257497f, -0.2803395f, -0.1320821f, +0.0075422f, -0.1019972f, +0.4401903f, -0.3403566f,
  -0.1793016f, -0.1708385f, +0.4251297f, -0.7414889f, +0.0512635f, -0.2142219f, +0.0577321f, +0.1616662f,
  -0.2406501f, -0.1746955f, -0.1372592f, -0.0617852f, -0.1992339f, -0.1076854f, +0.1595512f, -0.1987454f,
  -0.3302933f, +0.3791591f, -0.0410428f, +0.0237935f, -0.2178669f, -0.0390166f, -0.0176032f, -0.4667870f,
  -0.7340617f, -0.0500915f, +0.0985396f, +0.2293365f, -0.2552243f, -0.1288377f, +0.4941454f, -0.1034251f,
  +0.0870434f, +0.1172170f, +0.1039382f, -0.0927023f, +0.0962703f, -0.5863743f, -0.2681790f, +0.1092683f,
  +0.2388127f, -0.2038561f, +0.3732699f, -0.0966167f, +0.0606174f, +0.1557240f, +0.2192745f, +0.0772956f,
  -0.0764074f, -0.0098320f, +0.2285741f, -0.1263747f, -0.4417022f, +0.0374420f, -0.0599146f, +0.0409593f,
  +0.0583443f, +0.0780307f, +0.4799574f, +0.0772408f, -0.1469047f, -0.4565863f, -0.2967556f, +0.2352077f,
  -0.0453819f, +0.1643586f, -0.2980994f, +0.1560414f, -0.2833366f, -0.0100704f, -0.1842287f, +0.2224342f,
  -0.1761361f, +0.3773254f, +0.1090311f, +0.5495757f, -0.1381303f, -0.0513452f, +0.0807698f, +0.3558483f,
  +0.3146909f, -0.1115770f, -0.1130971f, -0.0769429f, +0.2401174f, -0.1820700f, +0.0937365f, -0.2212515f,
  +0.1050634f, +0.0147141f, +0.0619633f, -0.1585679f, +0.1575351f, -0.1944348f, +0.4174867f, +0.7808304f,
  +0.4671096f, +0.0660277f, +0.2305767f, -0.0487255f, +0.2374662f, -0.0289270f, -0.1840237f, +0.0740314f,
  +0.3244739f, +0.2078687f, +0.1007508f, +0.0039895f, +0.2272894f, +0.1004656f, -0.2464496f, -0.1009165f,
  -0.4556711f, +0.2812948f, +0.2998743f, +0.4465231f, -0.0864881f, -0.2110173f, +0.2965322f, -0.4132601f,
  +0.1851585f, +0.1779940f, +0.0231978f, -0.2776966f, +0.4912375f, +0.2750565f, +0.2406989f, +0.1002463f,
  +0.1512370f, -0.1777454f, -0.3210122f, -0.1619371f, -0.0289839f, +0.0194019f, +0.3754714f, -0.0684878f,
  -0.0256088f, +0.1825514f, -0.1010640f, -0.0176806f, -0.0536800f, -0.1799278f, -0.1392093f, +0.2770663f,
  +0.0387191f, +0.0879423f, +0.1462918f, -0.0940612f, +0.1313102f, -0.1199024f, +0.2881086f, -0.0665701f
);

const float biases[4] = float[4](
  +0.1772008f, -0.0040158f, +0.0675477f, +0.0362168f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer23 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0529579f, -0.3836266f, -0.3324557f, -0.3445434f, -0.2197223f, -0.0572199f, +0.0580258f, -0.0743704f,
  +0.5256242f, -0.1757792f, -0.0801331f, +0.1977591f, +0.1856898f, +0.1407053f, -0.1996987f, +0.1102553f,
  +0.2447658f, -0.0998104f, +0.0695955f, -0.1783759f, +0.1087285f, +0.2931726f, +0.1528760f, -0.1063807f,
  +0.3662519f, -0.3086360f, +0.1072372f, +0.0364894f, +0.0592746f, +0.9537218f, -0.8290356f, +0.3698398f,
  +0.6564800f, +0.3101207f, +0.0825193f, +0.1695178f, +0.7346053f, -0.1212889f, -0.1430450f, -0.0652739f,
  -0.1966637f, +0.2063308f, +0.0805991f, -0.1391286f, +0.2419447f, +0.1904540f, +0.5753119f, -0.0464370f,
  +0.1456020f, +0.1668899f, +0.0793379f, +0.3581646f, +0.0826945f, +0.0567724f, -0.0569320f, -0.0482858f,
  +0.1689961f, -0.0199435f, +0.2669531f, -0.0825634f, +0.0089962f, -0.1104610f, +0.5800060f, +0.4811582f,
  -0.1880903f, +0.1050232f, +0.0637115f, +0.2938471f, +0.0791730f, -0.0890278f, +0.0415085f, +0.2809539f,
  -0.1584946f, -0.2517100f, -0.1081364f, -0.1396659f, +0.0170917f, -0.3367149f, +0.0694126f, -0.2300587f,
  -0.0786130f, -0.1267260f, -0.2097745f, -0.0838707f, +0.0514073f, +0.2499827f, +0.0538644f, -0.0700379f,
  +0.0710552f, +0.3167228f, -0.3842434f, +0.0659849f, +0.3100796f, -0.0987665f, +0.0997288f, -0.3429757f,
  -0.1188316f, -0.0437212f, +0.1941685f, -0.1475399f, +0.1335220f, +0.4125830f, -0.1653316f, +0.2351532f,
  +0.4979405f, -0.2324538f, +0.0161362f, -0.1475450f, +0.5477198f, +0.6892647f, +0.2501933f, +0.2818179f,
  +0.3031785f, +0.2988915f, -0.2248866f, -0.1481826f, -0.5664241f, +0.4270103f, +0.0089109f, -0.0679257f,
  +0.1471972f, +0.0747051f, +0.1636883f, -0.1261054f, -0.0975416f, -0.4505251f, +0.2691635f, +0.0659893f,
  +0.3830508f, -0.1769352f, +0.1122368f, -0.1022377f, -0.4278078f, -0.3708608f, -0.5010332f, +0.0890498f,
  -0.0181488f, -0.3138960f, -0.0355547f, +0.2864506f, -0.2115716f, -0.0871132f, -0.5334519f, +0.0237207f,
  -0.3092389f, +0.6657040f, +0.0947888f, +0.1373712f, -0.1168936f, -0.4945850f, -0.3511188f, +0.2761938f,
  -0.6687418f, +0.1094693f, +0.1987118f, -0.2727091f, -0.2724853f, -0.6415356f, -0.0549461f, -0.0919387f,
  -0.1566173f, +0.1219675f, -0.0171576f, +0.1272369f, +0.0658997f, +0.0224430f, -0.1491140f, +0.0942859f,
  -0.7784528f, -0.0782495f, -0.0732414f, -0.6719428f, -0.6767162f, -0.1623186f, +0.5079063f, +0.3012087f,
  -0.1735489f, +0.0968050f, -0.1013143f, +0.0805350f, -0.5827764f, +0.5217704f, -0.2481175f, +0.0042160f,
  +0.2784431f, +0.2167207f, +0.2870228f, -0.3504815f, +0.0661296f, +0.1033397f, +0.1452327f, -0.2803923f,
  -0.2427816f, -0.0493731f, +0.0826457f, -0.2354978f, -0.1657649f, +0.1101751f, -0.3617823f, -0.0312751f,
  -0.0733254f, +0.4575081f, +0.3092032f, +0.3860840f, +0.0983475f, -0.3014154f, -0.5844125f, -0.4813019f,
  +0.0671877f, -0.0368897f, -0.2280782f, -0.2160502f, -0.1035291f, -0.0942325f, +0.3810614f, -0.2773860f,
  +0.1562010f, +0.0195328f, -0.0552702f, -0.0757804f, -0.1311804f, +0.1833905f, -0.4294586f, +0.0903241f,
  +0.1230406f, -0.1754179f, -0.0969204f, +0.1407823f, -0.0147986f, +0.2032843f, +0.0540179f, +0.3189399f,
  +0.0795581f, +0.2279081f, -0.1607106f, +0.3296393f, +0.2126640f, +0.0139794f, +0.3195943f, +0.2369503f,
  +0.0200461f, +0.0938592f, -0.1473813f, -0.0790621f, +0.5369548f, +0.5678470f, -0.4169646f, -0.2681419f,
  -0.0092232f, -0.3284662f, -0.0768573f, +0.0440234f, +0.3454952f, -0.1517037f, +0.2328202f, -0.1206596f,
  -0.0982755f, -0.1552976f, -0.0214203f, +0.0500476f, -0.4344570f, +0.2009584f, +0.1118258f, -0.0538483f,
  -0.1058905f, +0.1003478f, -0.1177132f, -0.2439843f, +0.0499105f, +0.3136784f, -0.3020683f, -0.0702884f,
  +0.3563659f, +0.2310374f, +0.3653750f, +0.1516745f, +0.0370617f, -0.0371654f, +0.1120181f, -0.1552883f,
  +0.2394244f, +0.0377778f, +0.4332122f, -0.1769629f, -0.5222415f, -0.0552189f, +0.1763689f, -0.1831156f
);

const float biases[4] = float[4](
  +0.0719083f, +0.0803995f, -0.0683919f, +0.0634663f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer23 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1729618f, +0.2073444f, -0.4134386f, +0.0275218f, -0.4089203f, +0.0041262f, -0.3305260f, -0.0519531f,
  -0.1416555f, +0.2989477f, -0.2168569f, +0.0075110f, +0.0268737f, -0.3284651f, -0.3630984f, -0.2226870f,
  -0.2928677f, +0.2143388f, -0.2734085f, +0.1855982f, +0.1235115f, -0.4451192f, -0.2673056f, -0.1307129f,
  -0.1015631f, +0.0679038f, -0.2011649f, -0.2680470f, -0.2740908f, +0.0106601f, -0.0500122f, -0.0366117f,
  -0.0722842f, -0.0023193f, +0.1707269f, -0.4286446f, +0.2803794f, +0.1213433f, -0.0943750f, -0.2481276f,
  -0.1018130f, -0.4676256f, +0.0423785f, -0.0061083f, -0.1464002f, -0.5618348f, -0.0394127f, -0.0986612f,
  -0.3396975f, +0.0752835f, +0.1306313f, +0.0060231f, +0.0386740f, +0.2221320f, -0.2716686f, -0.1793613f,
  -0.2434335f, +0.2324328f, +0.3180653f, +0.1043426f, -0.1801624f, +0.1916565f, +0.4878860f, +0.0251851f,
  +0.0384006f, -0.3380299f, +0.0967449f, -0.4137936f, -0.0318938f, +0.1660629f, +0.3495112f, -0.1195694f,
  +0.1417262f, -0.0521378f, +0.1109444f, +0.2111743f, +0.2122510f, -0.0672854f, +0.9027502f, +0.3959204f,
  +0.2479520f, +0.1202940f, -0.1080286f, -0.1231256f, +0.3261294f, -0.0366091f, +0.0902395f, +0.2622316f,
  +0.0978806f, +0.0989429f, +0.3731660f, -0.1603503f, +0.0319241f, -0.0243558f, +0.4405257f, -0.0021551f,
  -0.1089552f, +0.2648041f, +0.2511320f, -0.1691594f, -0.4018470f, -0.6389056f, -0.3892025f, +0.1114453f,
  -0.0769458f, +0.3789074f, +0.1649814f, +0.0085419f, +0.4783627f, -0.2111628f, +0.2334458f, -0.0261795f,
  +0.1281383f, +0.2770305f, +0.0336612f, +0.0958589f, +0.1293687f, +0.0115963f, +0.1200678f, +0.1014425f,
  -0.3272552f, -0.2979816f, -0.1840421f, +0.0264064f, +0.4032637f, +0.0459672f, +0.0403269f, -0.1382623f,
  -0.0839692f, -0.0427518f, +0.3570724f, -0.0140590f, +0.1340414f, +0.0727302f, -0.6017428f, +0.2146434f,
  +0.0817748f, -0.0354116f, +0.0330425f, -0.3643916f, +0.1685138f, -0.0099840f, -0.0878565f, -0.0311218f,
  -0.3028592f, +0.0259389f, -0.0485550f, -0.4070772f, -0.3528066f, -0.9480144f, +0.2853761f, -0.6148477f,
  -0.5130434f, +0.2522946f, -0.1466332f, -0.2834425f, -0.5522690f, -0.2461265f, +0.6075176f, -0.4194200f,
  -0.1010904f, +0.4070156f, -0.0000011f, +0.0893557f, -0.2909383f, +0.1023635f, +0.1114020f, +0.0188486f,
  -0.0838310f, -0.1082031f, +0.1033115f, +0.3162135f, -0.2893573f, +0.7316677f, -0.4501548f, +0.2163031f,
  +0.0563295f, -0.1723736f, +0.1913990f, +0.2900418f, +0.0259273f, +0.6446561f, -0.6715125f, +0.1752012f,
  +0.0785449f, +0.2404715f, +0.0759052f, +0.0470987f, -0.4164572f, +0.3794680f, -0.4212411f, -0.0099516f,
  -0.0060811f, -0.0142282f, +0.1433326f, +0.1353800f, +0.4464808f, +0.0786415f, -0.1331508f, -0.0401299f,
  +0.1185787f, -0.0995205f, -0.2023968f, -0.1201857f, +0.1888129f, +0.0450660f, -0.0273045f, +0.2881831f,
  -0.0737595f, +0.0859645f, +0.1976192f, -0.0018163f, +0.2410860f, +0.0910391f, -0.2788254f, +0.1614235f,
  +0.2824702f, +0.4522524f, -0.1400157f, +0.1936514f, +0.2931363f, +0.5777127f, -0.3121385f, +0.2813426f,
  -0.4749276f, +0.2108317f, +0.3401563f, -0.0914860f, +0.0258546f, +0.0756607f, -0.0505451f, +0.1464982f,
  +0.0189498f, +0.0917401f, -0.0539932f, +0.6275404f, +0.6169795f, -0.7231262f, -0.1343455f, +0.1456243f,
  +0.1016644f, +0.4257438f, +0.2457753f, +0.0356480f, -0.0431495f, +0.4055930f, +0.0646166f, +0.2993476f,
  -0.1546072f, -0.3369844f, +0.1000080f, +0.1781218f, -0.8848963f, +0.4298169f, -0.2618856f, +0.1620684f,
  -0.2708178f, +0.2243553f, +0.1803255f, -0.1287746f, +0.0672295f, -0.3992265f, -0.3277826f, +0.1203820f,
  +0.0298537f, +0.5972770f, +0.3714766f, +0.0927114f, +0.1045835f, +0.4219494f, +0.6180854f, -0.1912468f,
  +0.1373029f, +0.1428626f, +0.0052229f, -0.3094756f, -0.2194439f, -0.1091654f, +0.5960248f, -0.0235805f,
  -0.3443951f, -0.0249725f, +0.1924396f, -0.4063659f, +0.2598615f, -0.3871736f, +0.3527974f, -0.0313890f
);

const float biases[4] = float[4](
  -0.0865952f, +0.0459996f, -0.1601785f, +0.1291301f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer24 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1649483f, +0.0462795f, -0.3641859f, -0.2525744f, -0.4503048f, -0.1572732f, +0.0102636f, +0.1529350f,
  +0.0071600f, -0.2652139f, -0.0609185f, -0.0595230f, -0.0294114f, +0.0724383f, +0.1920696f, +0.0732932f,
  -0.1260788f, -0.1316735f, -0.4932369f, -0.0409940f, -0.1324598f, +0.3727099f, +0.2846742f, +0.0838872f,
  +0.3725068f, +0.1806406f, +0.2466591f, +0.0924739f, +0.1373704f, +0.0190637f, +0.2703700f, +0.0716823f,
  -0.5985404f, -0.4958206f, +0.4855845f, +0.1512083f, -0.1857245f, +0.0233319f, +0.2067447f, -0.4520539f,
  +0.0042812f, -0.0193210f, -0.0109878f, -0.1775599f, +0.1678358f, +0.0826056f, +0.0650406f, -0.1229012f,
  -0.1776449f, +0.0729238f, +0.2079529f, -0.0864202f, -0.0226647f, -0.1050792f, -0.2650448f, -0.2683306f,
  -0.0755457f, +0.1243008f, +0.0797734f, +0.2204498f, -0.1107157f, -0.1398265f, -0.0481407f, +0.3762340f,
  +0.0152407f, +0.2045882f, +0.4698237f, +0.3084241f, -0.1211480f, -0.3105440f, +0.5141560f, -0.2416762f,
  -0.1471355f, +0.2019340f, -0.4236361f, -0.1201418f, +0.1664835f, -0.1209064f, +0.0207605f, -0.1494268f,
  +0.5301678f, +0.0634733f, +0.1058015f, -0.5825597f, -0.1850599f, -0.2047584f, -0.0529216f, +0.1211334f,
  +0.2466993f, +0.1318919f, +0.1603473f, -0.0293145f, +0.0167787f, -0.0466693f, +0.3522363f, -0.1977833f,
  +0.0536806f, +0.2903628f, -0.0550041f, +0.1194172f, -0.0104017f, -0.1344391f, +0.1954108f, -0.0152938f,
  -0.4514783f, +0.0005111f, -0.0773034f, +0.1171921f, -0.4260094f, -0.3080957f, +0.4237626f, -0.1668550f,
  -0.0688537f, -0.0548429f, -0.2907860f, -0.2629167f, -0.1397303f, -0.1572828f, +0.3074198f, -0.0833817f,
  +0.0393902f, -0.1093647f, -0.0373108f, -0.0836272f, +0.0984477f, -0.0029575f, -0.1781520f, -0.0145459f,
  -0.0333408f, +0.2578523f, -0.2238242f, -0.0402621f, +0.1889260f, -0.0715857f, -0.2092394f, -0.1296751f,
  +0.3047220f, +0.3180115f, +0.2667924f, +0.1230047f, +0.3072780f, +0.1444052f, +0.0023482f, +0.0487431f,
  +0.0416828f, +0.0210911f, -0.1442846f, +0.0434589f, +0.2212399f, -0.1857079f, -0.0662755f, -0.2384995f,
  -0.0133435f, +0.2364134f, -0.4320094f, -0.1531664f, -0.2112332f, -0.0539009f, -0.1120057f, -0.2989644f,
  +0.2631101f, +0.1271634f, +0.2117724f, +0.0183492f, -0.1065423f, -0.0496902f, +0.0786605f, +0.0481676f,
  +0.0234946f, +0.1234714f, +0.1816873f, +0.0359390f, -0.0278210f, -0.0540798f, +0.2335077f, -0.0271987f,
  -0.0439522f, -0.0367240f, -0.1697878f, +0.0140803f, -0.3842888f, -0.0859742f, +0.6897523f, +0.1702841f,
  -0.2629861f, +0.1527796f, +0.0199667f, -0.1722664f, -0.0197466f, +0.0095309f, +0.2391593f, -0.2530606f,
  -0.1502503f, -0.0259776f, -0.0758464f, -0.0284728f, +0.1283071f, -0.0163742f, -0.0177563f, -0.0254840f,
  +0.0475536f, +0.1845947f, +0.2350464f, -0.2589147f, -0.2166419f, -0.0157882f, -0.3205623f, -0.2529797f,
  +0.0326757f, -0.0586622f, -0.0294567f, -0.0569482f, +0.1652370f, +0.2037179f, +0.2738541f, +0.0796107f,
  -0.3762806f, +0.1412990f, -0.2710188f, +0.3566605f, +0.2471040f, +0.0077465f, +0.1245954f, +0.0769745f,
  +0.3841457f, +0.2071289f, +0.0833557f, -0.2111966f, +0.2185553f, -0.1213970f, +0.1329775f, +0.1875200f,
  -0.1807110f, +0.1722099f, -0.1538010f, +0.0360618f, -0.0596872f, -0.1322754f, -0.0206412f, +0.2155201f,
  +0.1906746f, +0.5155089f, -0.0817189f, +0.0224813f, -0.0990202f, -0.2085122f, +0.0390630f, -0.4965354f,
  +0.0510239f, +0.1166362f, +0.6843309f, -0.1385255f, +0.5296084f, +0.1014659f, +0.7159551f, -0.1596617f,
  +0.1102960f, +0.5133346f, -0.4093375f, -0.2240793f, -0.1577882f, +0.1573014f, -0.1757867f, -0.2175819f,
  +0.1912462f, +0.1089332f, +0.0826331f, -0.1546352f, +0.2808626f, -0.1102328f, +0.1255158f, -0.1685157f,
  -0.1339991f, -0.0440572f, +0.1375173f, -0.0890290f, +0.5356171f, +0.1860353f, +0.2421090f, -0.2408251f,
  +0.2204839f, +0.0829529f, +0.1620125f, -0.0234675f, +0.2066118f, -0.0123513f, +0.1596497f, -0.0812376f
);

const float biases[4] = float[4](
  +0.0514786f, -0.0044768f, -0.1629194f, -0.0544153f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer24 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1423329f, +0.3490703f, -0.1322400f, +0.2592767f, +0.1434302f, -0.0246776f, -0.0530001f, +0.0106949f,
  +0.2459486f, +0.6053237f, +0.4367457f, -0.4806556f, +0.4546186f, -0.0725485f, +0.0616425f, +0.1091083f,
  +0.0972939f, +0.4810481f, +0.1346407f, +0.0000691f, +0.0846591f, -0.3770083f, +0.1196285f, +0.1897556f,
  -0.0181775f, +0.0879773f, +0.0310295f, +0.2969881f, -0.1225266f, +0.2504941f, +0.0756053f, +0.0428469f,
  -0.2248691f, -0.4972470f, +0.2912977f, -0.0510087f, +0.1123019f, -0.1098627f, +0.2578619f, -0.2348544f,
  +0.0468396f, -0.1717631f, +0.2612702f, -0.2717471f, +0.2826932f, +0.1220692f, -0.1013671f, +0.0255306f,
  -0.0142422f, -0.0455395f, +0.0165873f, +0.1072255f, +0.1331263f, +0.2281857f, -0.1770477f, +0.1589813f,
  -0.0970273f, -0.1052569f, +0.1795537f, +0.0612212f, +0.0298441f, +0.0138623f, +0.4365040f, +0.1793599f,
  -0.0813459f, -0.1448953f, -0.1365442f, +0.2033275f, +0.2357014f, -0.0816303f, +0.2194243f, -0.0948251f,
  +0.1630139f, -0.2622115f, +0.0533289f, -0.0608182f, +0.0039342f, -0.0695451f, +0.2394697f, +0.0665914f,
  +0.3025760f, -0.1278246f, -0.2008900f, +0.1792456f, -0.1152347f, -0.2801605f, +0.0297686f, +0.0496283f,
  +0.2614134f, +0.2325852f, +0.2113490f, +0.1394618f, -0.2394707f, +0.0862149f, +0.3413800f, -0.1117826f,
  +0.0492682f, -0.1980683f, +0.2861520f, -0.3568464f, +0.3351902f, +0.0146964f, +0.4030533f, -0.4160981f,
  +0.5389327f, -0.1653991f, +0.2761558f, +0.0261901f, +0.0310210f, -0.1125959f, +0.2981310f, +0.0021745f,
  -0.5065306f, -0.1855696f, -0.1017761f, -0.2407392f, +0.3151191f, +0.3491359f, +0.5012017f, -0.0721102f,
  -0.2300151f, +0.0192402f, +0.0590405f, -0.2988223f, +0.2213046f, -0.1706582f, -0.2450247f, -0.2426734f,
  +0.0310273f, -0.0130524f, +0.1781762f, -0.2454071f, -0.1921007f, +0.0209578f, -0.1133592f, -0.1210020f,
  -0.0650495f, -0.1486199f, -0.3181508f, -0.0152589f, -0.3274134f, -0.1457540f, -0.1286892f, -0.3108053f,
  -0.1581765f, +0.4564893f, +0.1643388f, -0.1418744f, -0.0108406f, -0.0522232f, +0.0515360f, -0.0462187f,
  -0.5243443f, +0.2980646f, +0.2771158f, +0.1104989f, -0.3744822f, +0.2890340f, +0.0099148f, +0.4600043f,
  -0.4131369f, -0.1104679f, -0.5682751f, +0.5779300f, -0.0349648f, +0.1003098f, -0.0357188f, +0.0570310f,
  -0.4521610f, +0.3848504f, -0.0168585f, -0.0373686f, -0.0018717f, -0.1476326f, +0.0427388f, +0.2422723f,
  +0.6083859f, -0.3208897f, -0.3422755f, -0.1514289f, -0.0034128f, -0.1915344f, +0.0558555f, +0.2481754f,
  +0.2227441f, +0.0833543f, +0.4937822f, +0.4859118f, -0.1886962f, +0.1777452f, +0.0235135f, +0.0041534f,
  -0.1688360f, +0.2081342f, -0.0819708f, +0.0246591f, +0.1576929f, -0.1304750f, -0.1446750f, +0.2736875f,
  -0.1387206f, +0.0112723f, +0.0822822f, +0.1149481f, +0.2769009f, -0.1047314f, -0.0319746f, +0.1858864f,
  -0.2414723f, +0.0305117f, -0.5137438f, +0.2628093f, +0.0123618f, -0.1794827f, +0.1017735f, +0.0943219f,
  +0.2099483f, +0.3623270f, +0.0396293f, +0.0685693f, +0.2953128f, -0.3899755f, +0.1036771f, -0.1998980f,
  -0.0864617f, +0.2310632f, -0.3715633f, +0.0381694f, -0.1119437f, -0.0342540f, +0.1029470f, -0.3649413f,
  +0.2650153f, -0.0053469f, +0.1878122f, -0.3049292f, -0.2680764f, -0.0726225f, +0.1788329f, +0.0093594f,
  +0.0525910f, +0.0304860f, -0.0378983f, +0.1407775f, +0.1319599f, -0.1455253f, +0.5145739f, -0.6437631f,
  +0.2139069f, +0.1080576f, +0.0323126f, -0.1576320f, +0.0684518f, +0.0867496f, -0.2072202f, -0.3272941f,
  -0.2403211f, -0.0402172f, +0.0135572f, -0.1373125f, -0.1272822f, -0.0889343f, +0.3248009f, -0.3311465f,
  +0.1702859f, -0.1467948f, +0.1811464f, -0.0866772f, -0.0793785f, +0.1252658f, +0.3816727f, -0.2625192f,
  -0.1250328f, -0.1872135f, +0.4697064f, -0.2250879f, +0.0033211f, +0.0051949f, +0.5142621f, -0.2734540f,
  -0.2331248f, +0.0016094f, +0.1031470f, -0.1568893f, +0.0863091f, +0.3680173f, +0.3622464f, -0.2049538f
);

const float biases[4] = float[4](
  -0.0413647f, +0.0254400f, -0.1835473f, +0.0006154f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer25 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.7619801f, +0.0921555f, +0.2330697f, -0.3079325f, +0.0791155f, -0.3891362f, +0.4015869f, -0.3713425f,
  -0.0041588f, +0.0827033f, -0.0250926f, -0.1504368f, +0.4355726f, +0.0251520f, -0.0226395f, -0.0981091f,
  +0.1689111f, -0.0854513f, +0.1638029f, -0.2112840f, +0.0964175f, +0.1854911f, -0.0834131f, -0.0619577f,
  -0.1690776f, -0.0969315f, -0.2994291f, +0.1833052f, -0.0505721f, -0.0201031f, +0.3111553f, +0.2348276f,
  +0.2235246f, -0.0738911f, -0.1511731f, +0.0161778f, +0.0967056f, -0.1271690f, -0.0086268f, -0.0117178f,
  +0.0656572f, -0.1083468f, -0.3279299f, +0.2717451f, +0.1552510f, -0.0108544f, -0.3264270f, +0.2482176f,
  +0.0353615f, -0.0143133f, -0.2287141f, -0.2401558f, -0.4336792f, -0.0963947f, +0.3248124f, -0.1234652f,
  -0.0157710f, -0.0874512f, +0.1098128f, -0.1187492f, -0.0681018f, +0.0439850f, -0.3199812f, -0.1204752f,
  +0.1907009f, -0.1119111f, +0.0005563f, +0.1449347f, +0.1043870f, +0.1526142f, -0.4665677f, +0.2699373f,
  +0.2254328f, +0.0281049f, +0.2201746f, +0.4017839f, -0.2485758f, +0.7136403f, +0.1157121f, +0.2162443f,
  +0.1027617f, -0.1359348f, -0.1944630f, +0.2734489f, -0.7953629f, +0.1704827f, +0.8901784f, -0.2358168f,
  +0.4269774f, +0.5741475f, +0.0243351f, -0.2559155f, -0.0769109f, +0.2247265f, +0.0435116f, -0.4550335f,
  -0.3268678f, +0.0066151f, +0.1209160f, -0.2527469f, +0.1116729f, -0.3723667f, -0.7488082f, +0.0867710f,
  -0.6749323f, +0.3119557f, -0.1433565f, +0.0304290f, -0.0316120f, +0.0252426f, -0.6779816f, -0.0421076f,
  -0.3731464f, +0.2985401f, +0.1956260f, +0.5948929f, -0.4128836f, +0.5397373f, -0.1237567f, +0.0147687f,
  -0.1336659f, -0.3331077f, +0.0650784f, -0.1489190f, +0.1922304f, +0.1003470f, -0.1677276f, -0.0551629f,
  +0.0855838f, -0.3944117f, -0.1171705f, -0.3496197f, +0.0751146f, +0.1731767f, +0.3142949f, -0.1972885f,
  +0.1521192f, -0.0730366f, +0.2467367f, -0.1061275f, +0.3469198f, -0.1118853f, +0.1202444f, +0.6165164f,
  +0.2136339f, +0.2005465f, -0.0859075f, +0.0224844f, -0.0378659f, -0.2065869f, -0.0477123f, -0.2426557f,
  +0.2424615f, +0.0167822f, +0.4627611f, -0.1588345f, -0.3049766f, +0.2695887f, -0.1762499f, -0.0093270f,
  +0.0580916f, -0.3234985f, -0.0642133f, -0.3297746f, -0.3671277f, -0.0572843f, +0.0908216f, +0.1178053f,
  -0.1431909f, +0.0154729f, +0.0458166f, -0.0127961f, -0.0387586f, -0.2462888f, -0.0372364f, -0.2733155f,
  -0.4264918f, +0.0868901f, +0.1814015f, -0.6649842f, +0.7229570f, +0.3487960f, +0.0120973f, +0.1488747f,
  -0.1798741f, +0.1446459f, -0.0126552f, -0.2940383f, +0.1067463f, +0.0368108f, -0.3213620f, -0.0288054f,
  +0.0847052f, +0.2973934f, -0.1716614f, +0.1602965f, +0.4121307f, -0.1050973f, +0.2691291f, -0.1254329f,
  +0.0541897f, +0.4807298f, +0.0991950f, +0.1193351f, +0.0872121f, +0.3484381f, +0.7348475f, -0.1939581f,
  -0.2523637f, +0.3255940f, +0.2572709f, -0.1779441f, -0.2286802f, -0.3099364f, +0.1700698f, -0.2338801f,
  +0.0705544f, -0.0846923f, -0.0785026f, -0.0821311f, +0.1627517f, +0.2046936f, -0.2372652f, -0.0529736f,
  -0.0965507f, -0.2012736f, -0.0323650f, +0.1889802f, +0.0456038f, -0.0339531f, +0.0745099f, +0.1423039f,
  +0.1256953f, +0.1976060f, +0.0108861f, +0.3306958f, -0.0385470f, -0.0776479f, -0.0712053f, +0.0704495f,
  -0.1125241f, +0.2581932f, -0.1127111f, +0.0015120f, -0.2043844f, -0.0264647f, +0.0187565f, -0.0816674f,
  +0.5720174f, +0.1748444f, -0.0656819f, -0.5776367f, +1.1232641f, -0.4767347f, -0.4891441f, -0.0937304f,
  -0.2795460f, +0.0603158f, -0.2192264f, -0.0694964f, +0.2307441f, +0.0199959f, -0.1080227f, -0.0687324f,
  +0.0507331f, -0.1315894f, -0.3484197f, -0.0997460f, -0.3693560f, -0.0308806f, +0.2563558f, -0.1437953f,
  -0.1797671f, -0.0707208f, +0.1172360f, -0.1956414f, -0.3772426f, +0.1093436f, -0.1791189f, -0.2547784f,
  +0.1466878f, -0.1295150f, +0.1469731f, -0.2891312f, -0.6501231f, +0.0471657f, -0.0632940f, -0.2406178f
);

const float biases[4] = float[4](
  +0.0495567f, -0.1750276f, +0.1240008f, +0.0569820f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer25 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0910933f, +0.0422453f, +0.0848698f, +0.2745425f, -0.0255403f, +0.2852850f, +0.4325735f, +0.2249728f,
  +0.1515779f, -0.4207085f, -0.5886278f, +0.5809075f, -0.0218255f, -0.0746509f, -0.2698337f, +0.3944951f,
  +0.1685130f, -0.0296460f, +0.0557523f, +0.1324544f, -0.2126798f, +0.3044412f, -0.0095910f, +0.3888041f,
  +0.2408824f, -0.1792743f, -0.0503881f, -0.0817022f, -0.1251299f, -0.2872285f, +0.6910512f, +0.2735068f,
  -0.0098146f, +0.1641042f, +0.1247566f, +0.0385965f, -0.1570418f, -0.1498905f, +0.3619345f, +0.0573467f,
  -0.0966040f, -0.0847908f, +0.0425074f, +0.0768548f, -0.2821993f, +0.0060753f, -0.0718634f, +0.1510072f,
  +0.0085440f, +0.0898085f, +0.1810233f, -0.1259839f, +0.2078966f, -0.0736800f, +0.3910729f, -0.1752582f,
  -0.1641739f, -0.1509559f, +0.1667221f, -0.2231391f, +0.1549233f, +0.0131214f, -0.0490563f, -0.0799419f,
  -0.0335302f, -0.0612965f, +0.1307417f, -0.3324183f, +0.1121261f, +0.1505530f, +0.2429982f, -0.2254368f,
  -0.0127988f, -0.1982761f, -0.0625177f, -0.1259067f, +0.1212598f, -0.0948702f, -0.0732066f, -0.1479637f,
  +0.2911533f, -0.3223566f, +0.1200448f, -0.2205970f, -0.0100580f, +0.3778668f, +0.0980767f, -0.0442120f,
  +0.3115174f, -0.0878547f, -0.0119218f, -0.3843529f, +0.0105566f, +0.2315087f, -0.1409550f, +0.0674122f,
  +0.0213917f, +0.2057076f, +0.0721829f, -0.1664060f, +0.2760876f, -0.2485868f, -0.5051858f, +0.0485219f,
  +0.2098027f, +0.1864820f, +0.1090068f, -0.8439839f, +0.2301566f, -0.0777064f, -0.5965722f, +0.4869117f,
  +0.1504178f, +0.0836566f, +0.1552016f, -0.3764535f, +0.4842651f, +0.2058666f, -0.0758737f, +0.1444578f,
  -0.1750099f, +0.0810531f, +0.2367169f, +0.1736358f, +0.2900569f, +0.1362403f, +0.3088051f, +0.1279085f,
  -0.0455838f, +0.2147804f, -0.0249056f, -0.1369506f, -0.0324196f, -0.1467402f, +0.1194242f, +0.1987689f,
  -0.4832903f, +0.2498166f, +0.0263015f, +0.1404769f, +0.1473690f, +0.0731327f, -0.1900480f, +0.1664598f,
  -0.4128207f, +0.2831637f, +0.1548618f, +0.0663961f, -0.0003424f, +0.0912852f, -0.1932531f, +0.3825740f,
  -0.2052150f, +0.3905993f, +0.0926652f, -0.0006052f, -0.0596593f, +0.3565170f, +0.2210211f, +0.1760004f,
  -0.2990515f, +0.1073599f, -0.0704801f, -0.0805699f, -0.1181879f, -0.0997510f, +0.1499445f, -0.0195577f,
  -0.0263374f, -0.0941530f, +0.1667267f, +0.2805714f, -0.7176956f, -0.0085054f, +0.0876719f, +0.1636045f,
  -0.0313695f, -0.0318755f, -0.2694004f, +0.0592753f, -0.7630402f, +0.4054623f, +0.5499492f, +0.3344907f,
  -0.0913178f, +0.1300072f, -0.3455551f, +0.1751030f, +0.0300987f, -0.0538747f, -0.0787368f, -0.2506322f,
  -0.0016464f, +0.1435635f, +0.1840072f, +0.2461850f, +0.1174199f, +0.3154579f, -0.4523450f, +0.3288338f,
  -0.3029336f, +0.1512630f, +0.1353060f, +0.2765935f, +0.3814571f, -0.1141963f, -1.2659593f, -0.3356305f,
  +0.2401592f, -0.4362455f, +0.1147501f, -0.1826241f, -0.0719671f, -0.1194969f, -0.3117613f, -0.2635313f,
  -0.4666143f, +0.0741030f, +0.0474959f, -0.0823889f, +0.0205154f, -0.3128893f, +0.0678247f, +0.5176631f,
  -0.9145586f, +0.4343236f, +0.0469434f, +0.3371908f, -0.5892857f, +0.2737085f, -0.1499911f, -0.2212429f,
  +0.1627028f, +0.5826216f, +0.1208852f, -0.2813449f, +0.3135349f, +0.1482008f, -0.1386501f, -0.1097155f,
  -0.0752440f, -0.6172496f, -0.2385947f, -0.7234433f, -0.1095727f, -0.1733266f, +0.2465999f, +0.0264836f,
  -0.4733835f, +0.4059097f, +0.0464671f, +0.2664576f, -0.2004816f, +0.3691999f, -0.3260863f, -0.1541719f,
  +0.5969242f, +0.3273392f, +0.5324664f, -0.4668207f, -0.0096189f, +0.0238983f, +0.0926847f, -0.4567546f,
  -0.0316794f, -0.2644135f, +0.0242626f, -0.1507232f, -0.3328446f, +0.0224473f, +0.2724183f, +0.2150474f,
  -0.0249396f, -0.0349082f, -0.0165672f, +0.2274566f, +0.1658425f, -0.0999292f, -0.4034725f, +0.2712212f,
  +0.1491349f, +0.2398000f, +0.1820037f, +0.2430582f, +0.1979259f, +0.1366457f, -0.0460430f, -0.0918937f
);

const float biases[4] = float[4](
  +0.2439504f, -0.0514073f, -0.0687133f, -0.0411110f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer26 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0929323f, +0.2920724f, +0.2913298f, -0.0218122f, -0.0461039f, +0.2025100f, -0.1327661f, +0.0189262f,
  -0.1370788f, -0.0068833f, +0.0677392f, +0.1161020f, +0.0439537f, -0.0724782f, +0.0769506f, +0.2825228f,
  -0.1122280f, -0.1452775f, +0.3031386f, -0.1503360f, -0.1488242f, -0.1110713f, -0.3009028f, -0.1526027f,
  +0.0374917f, -0.1529786f, -0.0053058f, +0.1016610f, +0.0974952f, -0.0696215f, +0.2450235f, +0.0171533f,
  -0.2899854f, +0.1216926f, +0.0212475f, -0.7066832f, +0.1649420f, -0.0356670f, -0.1930416f, -0.3369718f,
  -0.0226871f, +0.4723995f, +0.2652144f, -0.0985508f, -0.1257519f, -0.0441633f, +0.1495719f, +0.3145588f,
  -0.1182844f, -0.2483378f, -0.0594780f, -0.2612772f, -0.3062620f, +0.0066919f, -0.0884029f, +0.3089687f,
  -0.0807910f, -0.2877523f, -0.2717522f, +0.2964618f, +0.1821657f, -0.1047240f, +0.3306510f, -0.0028766f,
  +0.3426506f, +0.0006694f, -0.2046070f, +0.0256437f, -0.3721346f, +0.1720676f, +0.1184674f, +0.5259293f,
  +0.0075980f, +0.0593788f, -0.0637802f, -0.0123241f, +0.0892179f, -0.0776998f, +0.4058759f, +0.1645375f,
  +0.0565552f, -0.3817179f, -0.2917524f, +0.2037496f, -0.0343416f, -0.1146494f, +0.2727683f, +0.3934454f,
  -0.0700614f, +0.0549605f, -0.1751213f, -0.1193858f, -0.1407005f, -0.1054656f, +0.0643323f, +0.0501485f,
  +0.0348181f, +0.3317957f, +0.0787312f, -0.0507831f, +0.1029825f, -0.0076742f, +0.2206762f, +0.0271375f,
  +0.0972052f, +0.4235459f, +0.2252744f, -0.2085524f, +0.0221713f, -0.1662485f, -0.7223831f, +0.3744566f,
  +0.0988685f, +0.3659535f, +0.2377712f, -0.2187971f, +0.1029803f, -0.0972189f, -0.1721770f, +0.1050386f,
  -0.1536725f, -0.2512815f, -0.0630773f, -0.0852420f, +0.0488448f, -0.1790952f, -0.0764487f, +0.0109978f,
  -0.2709408f, -0.0046339f, -0.0860870f, +0.1748558f, +0.6106459f, +0.1766982f, -0.5024629f, +0.1426546f,
  -0.1442410f, +0.0113827f, -0.0743277f, +0.1844928f, -0.1819228f, +0.0483391f, -0.0224263f, +0.0681845f,
  -0.1392510f, -0.1107158f, +0.0019641f, -0.1233132f, -0.0021830f, -0.1560426f, +0.2529649f, +0.1299194f,
  -0.0914311f, -0.2420285f, -0.0677387f, -0.0504731f, +0.1851580f, +0.0867671f, +0.0418203f, +0.2955107f,
  +0.3026015f, +0.0666880f, -0.0280264f, +0.2706478f, -0.0179812f, -0.0477877f, +0.1722632f, +0.3403795f,
  +0.0514958f, +0.5249090f, +0.1814163f, +0.0416230f, -0.0020515f, -0.2119688f, +0.3295605f, +0.1031595f,
  -0.1031368f, +0.2603370f, +0.0405296f, +0.0450949f, -0.0732518f, +0.0701932f, -0.2190526f, +0.6164256f,
  +0.0995974f, +0.0966546f, -0.0913153f, +0.1401551f, -0.2343235f, -0.0074435f, -0.2515035f, -0.1118801f,
  -0.0260573f, -0.3496116f, -0.0204027f, +0.0208943f, -0.0281239f, -0.0514083f, +0.0709957f, -0.0114530f,
  +0.1031737f, +0.1236462f, -0.2138197f, -0.1300171f, +0.4009030f, +0.0290903f, -0.2990750f, +0.2501876f,
  -0.0555289f, +0.1614615f, +0.0141311f, +0.1854036f, -0.3496040f, -0.0171958f, -0.1208208f, -0.0565834f,
  +0.2390553f, -0.0725813f, -0.0284997f, +0.1001856f, +0.0203764f, -0.1226685f, -0.1403703f, -0.3536005f,
  +0.4019774f, -0.0526068f, -0.2262331f, -0.3418685f, -0.1417968f, -0.0692746f, +0.0682176f, -0.4033521f,
  +0.0652765f, +0.3029239f, -0.1431780f, +0.1417039f, -0.1861649f, -0.0581312f, -0.0325291f, -0.4147132f,
  -0.0958142f, +0.2236684f, +0.0188943f, -0.1028226f, -0.0319126f, +0.2621131f, +0.5189006f, -0.4135385f,
  +0.1131762f, +0.1754086f, +0.4133235f, -0.0070487f, -0.1926874f, +0.3420833f, -0.5595452f, +0.6670390f,
  -0.3803218f, -0.1024541f, +0.0058528f, -0.0743858f, -0.0179219f, +0.1840632f, +0.2757652f, -0.4500603f,
  +0.3083797f, -0.2464021f, +0.2664761f, -0.2868802f, -0.0214933f, -0.0357891f, +0.0734051f, +0.1936320f,
  +0.1637879f, -0.3652751f, +0.0562895f, -0.0103269f, -0.2528544f, +0.0144133f, -0.0288696f, +0.0963598f,
  +0.3201913f, +0.0223040f, +0.0873792f, -0.0449883f, -0.2643735f, +0.1130248f, +0.0305016f, +0.1434285f
);

const float biases[4] = float[4](
  +0.0934586f, +0.0718133f, -0.1727214f, -0.0004346f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer26 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1656818f, +0.2455331f, -0.0430160f, +0.2010693f, +0.0831524f, -0.2570396f, +0.0064442f, -0.1400830f,
  +0.0879159f, -0.3291364f, -0.0284651f, +0.3658057f, +0.2264830f, +0.0409921f, +0.4261189f, +0.1014327f,
  +0.3795463f, +0.0134775f, -0.2015311f, +0.0538527f, +0.0489359f, -0.1279244f, +0.1944752f, +0.2272005f,
  -0.3404200f, -0.3340683f, -0.1469518f, -0.3033387f, -0.1388137f, +0.0794038f, +0.1740711f, -0.1713230f,
  +0.0537747f, +0.9119318f, -0.1062535f, -0.6856577f, +0.0047594f, +0.1032246f, -0.6479479f, +0.4494385f,
  +0.0693486f, +0.1718842f, -0.0396001f, +0.1040958f, +0.3532854f, +0.0834474f, -0.0296379f, -0.2521163f,
  -0.1178499f, +0.2203195f, -0.0013254f, -0.1222278f, +0.0474681f, -0.0424484f, +0.1335127f, +0.1641422f,
  -0.3684350f, -0.5382702f, +0.0069652f, +0.0507207f, -0.2768178f, +0.1013752f, +0.2242510f, -0.1311408f,
  -0.1625319f, +0.0886769f, -0.3058227f, -0.1709398f, +0.1790829f, +0.0358225f, -0.0079324f, +0.1875524f,
  +0.0993433f, -0.0057895f, +0.0701804f, -0.1025693f, -0.0888312f, -0.0448529f, +0.3402710f, +0.0452857f,
  +0.2572250f, -0.2215691f, -0.1508902f, -0.0755296f, +0.2450975f, -0.1483705f, +0.2967983f, +0.0572189f,
  +0.2520438f, +0.0669046f, +0.2150215f, -0.0499018f, -0.0045700f, -0.0520582f, +0.2542539f, -0.0995173f,
  +0.0765571f, +0.0917164f, -0.0200101f, -0.4391349f, +0.0226278f, -0.0029261f, -0.1233188f, +0.0352343f,
  +0.2440142f, +0.1585425f, -0.4393274f, +0.8019659f, +0.3603699f, +0.0166225f, -0.0061262f, -0.0154892f,
  +0.0987575f, +0.2899505f, +0.1126596f, +0.0601647f, +0.3731708f, +0.2408826f, -0.3733581f, -0.5609903f,
  -0.2413377f, -1.0091987f, -0.1857072f, +0.0829346f, -0.0543339f, +0.0209436f, -0.2724536f, +0.2094463f,
  -0.2306993f, +0.0651966f, -0.4734983f, +0.0112995f, -0.1801988f, -0.3443556f, -0.0899271f, -0.2502587f,
  +0.4042380f, +0.4842809f, -0.0819899f, -0.0001678f, -0.1230412f, +0.1446099f, -0.0843283f, +0.0112062f,
  +0.3377015f, -0.0635962f, -0.1523520f, -0.0951242f, +0.0837200f, +0.2298431f, -0.1891082f, -0.0579709f,
  +0.1220035f, +0.3580393f, +0.0103416f, +0.3472422f, +0.0780651f, +0.3471632f, +0.0607991f, +0.0814385f,
  +0.0024476f, +0.0653845f, -0.1799858f, -0.0326631f, -0.3207669f, -0.1634049f, -0.2214710f, -0.2313154f,
  +0.2895648f, +0.0221545f, +0.0323052f, -0.1410842f, +0.1351274f, +0.2815638f, +0.2911666f, -0.0868509f,
  -0.0788191f, -0.5159839f, -0.3404348f, +0.4814155f, -0.2233326f, +0.6323755f, +0.2710391f, +0.0219730f,
  -0.1514432f, -0.1716732f, -0.5260746f, +0.0564222f, -0.5836251f, +0.4205236f, +0.6948457f, -0.0408970f,
  +0.0744945f, -0.0984091f, -0.1669971f, -0.1297204f, +0.1566642f, +0.1838450f, +0.0069010f, +0.0937654f,
  +0.0945296f, +0.2407384f, +0.0910133f, -0.2418904f, +0.1391611f, -0.1741048f, -0.3462897f, +0.2596398f,
  -0.2175638f, -0.0207666f, -0.3361002f, +0.3242814f, -0.2622987f, +0.0977414f, -0.1108478f, -0.3636880f,
  -0.4717482f, +0.0682817f, +0.2442417f, +0.2417748f, +0.0033144f, -0.1099528f, +0.2984433f, +0.0826076f,
  +0.1290019f, -0.3215752f, +0.1575075f, +0.0620936f, +0.1731463f, +0.0659115f, -0.0378647f, -0.0010891f,
  +0.2996390f, -0.1542177f, +0.1623835f, +0.2472366f, -0.0288746f, +0.1293767f, -0.0515340f, +0.2197652f,
  +0.0098292f, +0.0321692f, -0.0475750f, -0.0637005f, -0.0657404f, -0.4488289f, +0.2344218f, +0.3144464f,
  +0.0243122f, +0.5313441f, +0.2277929f, -0.0512930f, +0.0905559f, -0.5896724f, +0.0633938f, +0.2765028f,
  +0.1867393f, +0.0952526f, +0.4355179f, +0.1160332f, -0.1241688f, -0.4367943f, -0.3377868f, +0.4189875f,
  +0.0158240f, +0.3396778f, -0.0762298f, -0.0249489f, -0.2951478f, -0.1230835f, +0.3096789f, +0.2761140f,
  +0.2718365f, -0.0052139f, +0.0497522f, -0.0998714f, -0.2878478f, -0.0072791f, -0.0940491f, +0.1487727f,
  +0.3704794f, +0.4670233f, +0.1647725f, +0.0116302f, -0.1346401f, +0.0006289f, -0.2948486f, +0.5402457f
);

const float biases[4] = float[4](
  -0.0808526f, -0.1438779f, -0.1250553f, -0.0087547f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer27 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2329396f, -0.4938212f, +0.0263574f, -0.0409212f, +0.0884008f, +0.3028125f, +0.0214948f, -0.0056061f,
  -0.2570970f, -0.1342765f, -0.2025398f, -0.0243933f, -0.2492675f, +0.1749017f, -0.3300874f, -0.1565611f,
  -0.0823703f, +0.1406893f, +0.1221463f, -0.0337193f, -0.2195006f, +0.1783849f, -0.3584555f, -0.1121278f,
  +0.0182081f, +0.0520042f, -0.1307154f, +0.0069254f, -0.1738501f, +0.0630756f, -0.1363198f, -0.3194556f,
  +0.2627696f, -0.1487270f, -0.3886265f, -0.3747731f, +0.1395818f, +0.4790590f, +0.2170475f, -0.1506896f,
  +0.3023510f, +0.1999195f, -0.0235205f, -0.0156807f, +0.2548848f, +0.2103144f, -0.1178057f, +0.0218919f,
  +0.4112634f, -0.0317531f, +0.1260746f, +0.1442995f, -0.1473636f, +0.0374349f, +0.0456001f, +0.2441616f,
  +0.2645016f, -0.0553296f, +0.0584099f, -0.1933051f, -0.4908566f, -0.0495120f, +0.1129869f, +0.1144007f,
  +0.0023752f, +0.1827962f, +0.0615749f, +0.2102689f, +0.0830547f, -0.0492861f, +0.1699458f, +0.2294556f,
  +0.0248458f, +0.2507975f, -0.0613228f, -0.0874820f, +0.0392845f, +0.2618333f, -0.1169491f, -0.0891790f,
  +0.0559587f, +0.1409017f, -0.2437349f, -0.2803090f, +0.4910641f, -0.1678921f, -0.1010709f, +0.0017980f,
  -0.1969627f, -0.0070251f, -0.0757819f, -0.0487590f, +0.1360980f, -0.0233693f, +0.2629356f, -0.2272654f,
  -0.0834398f, +0.0014216f, +0.0069428f, -0.0318784f, -0.1650923f, +0.1965119f, +0.4648626f, +0.0095602f,
  +0.1297923f, +0.1895674f, -0.0355310f, -0.1366097f, -0.5133280f, +0.4874408f, -0.1309209f, -0.4993269f,
  +0.0672769f, +0.1284652f, -0.2133095f, +0.1987165f, +0.1129133f, -0.2059046f, +0.0839433f, +0.1439577f,
  +0.1419895f, -0.1791759f, +0.0380987f, -0.1110087f, -0.1284265f, +0.0789218f, -0.1117624f, +0.2084556f,
  +0.4032946f, -0.2880215f, +0.1492535f, -0.0077280f, -0.1000469f, -0.1573056f, -0.4107273f, +0.1866730f,
  +0.2188508f, -0.2144363f, -0.0110326f, +0.1047633f, +0.2153734f, -0.0206585f, -0.1298840f, +0.1178639f,
  -0.4145432f, -0.4014731f, +0.1938012f, +0.0804172f, -0.0323898f, -0.0392647f, +0.6089983f, +0.1790857f,
  -0.1188550f, +0.0107269f, +0.8478580f, +0.7892885f, -0.5841899f, -0.0294956f, -0.0105765f, -0.3582372f,
  -0.1581963f, -0.0026040f, +0.1930470f, +0.0212126f, -0.1116748f, +0.1540333f, +0.0870254f, +0.2044821f,
  -0.0043118f, -0.0000305f, +0.2849262f, -0.0846337f, +0.1095806f, -0.0757792f, -0.1187728f, +0.2023236f,
  -0.0273485f, +0.4692168f, +0.4774015f, +0.5964450f, +0.8265793f, +0.0271801f, -0.1006300f, -0.3872817f,
  +0.0468718f, -0.0927839f, +0.3405063f, -0.1728695f, -0.1084913f, +0.0473467f, +0.1447049f, +0.0442354f,
  +0.0690465f, +0.1242093f, +0.0038274f, -0.0104274f, -0.0141514f, +0.0297490f, +0.2423721f, +0.0361758f,
  +0.1138173f, -0.1463856f, +0.1183027f, -0.2224554f, -0.0218583f, -0.0628549f, +0.0404626f, -0.0731665f,
  +0.0314161f, +0.0767448f, +0.2135423f, -0.1078258f, +0.0313824f, +0.0957240f, +0.1810651f, -0.0003259f,
  +0.0265523f, +0.0644649f, +0.2340577f, -0.3956876f, +0.3111462f, -0.1054469f, +0.1157328f, -0.2234365f,
  -0.2450165f, +0.0965300f, +0.0522465f, -0.3079486f, +0.3059826f, -0.2147332f, +0.0605627f, -0.3767854f,
  +0.1650007f, -0.0434270f, +0.0353569f, -0.0567377f, +0.3046342f, -0.1507395f, -0.0885719f, +0.0276052f,
  -0.5078532f, -0.1736491f, -0.0101488f, -0.2178183f, +0.2951072f, -0.0265471f, +0.1782755f, -0.0789824f,
  +0.2671630f, -0.0658796f, +0.0154839f, -0.3049002f, +0.1049010f, +0.0568889f, -0.1050860f, -0.1704230f,
  +0.1285764f, +0.2268809f, -0.1751997f, +0.1670609f, -0.0402631f, +0.2610360f, +0.0336853f, +0.0725406f,
  +0.1425245f, -0.0547788f, +0.3314250f, -0.4382524f, +0.2245403f, -0.1821884f, -0.2885793f, +0.7327959f,
  +0.6352931f, +0.6806307f, +0.2280429f, -0.1644475f, -0.1546528f, +0.5657119f, -0.1856219f, +0.0806109f,
  -0.1010254f, +0.0378875f, -0.1918059f, -0.2615204f, -0.2012080f, +0.3534407f, -0.0032156f, +0.0120668f
);

const float biases[4] = float[4](
  +0.0865333f, +0.0913827f, -0.3428477f, -0.1870188f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer27 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0418441f, -0.0290028f, +0.0286587f, -0.0263481f, +0.1631193f, +0.0718878f, +0.0223701f, +0.0404928f,
  +0.1486967f, +0.1176581f, -0.1888029f, -0.1097573f, -0.0602565f, +0.1691248f, -0.6162865f, -0.1998350f,
  +0.4878284f, -0.3195308f, +0.0346990f, -0.2675440f, +0.0257543f, +0.2016298f, -0.0085508f, -0.2322228f,
  +0.0231453f, +0.0124246f, -0.0325321f, -0.1566271f, +0.0849308f, +0.0653645f, -0.5345016f, -0.2134640f,
  +0.3699930f, +0.4161791f, -0.4378783f, -0.5845240f, +0.2855849f, +0.0789444f, -0.4780465f, -0.3867510f,
  -0.0051588f, -0.6320145f, +0.0067688f, -0.7807418f, +0.2719057f, +0.7499878f, +0.3181880f, -0.0879297f,
  +0.0419751f, -0.0458250f, -0.0471691f, +0.1153597f, +0.2802764f, +0.0121335f, -0.0289970f, +0.0436690f,
  +0.0855881f, -0.0734239f, +0.0016347f, +0.1693254f, +0.0437749f, +0.0922634f, -0.2424157f, +0.0882745f,
  +0.3138113f, -0.3598339f, -0.2320237f, -0.1274820f, -0.1136766f, +0.1288978f, +0.3272008f, +0.1206886f,
  -0.1799688f, +0.0166055f, +0.0265371f, -0.2932432f, +0.2047997f, -0.2416412f, -0.1470373f, +0.1400021f,
  -0.3387861f, +0.2562123f, +0.4287943f, -0.5424386f, +0.1584642f, -0.3278197f, +0.1828512f, +0.1160389f,
  -0.0838461f, +0.4611339f, +0.3154721f, -0.3769664f, -0.1189515f, -0.3049994f, -0.3217350f, -0.0806980f,
  -0.0738753f, -0.0031312f, +0.0358060f, +0.2193791f, +0.1280191f, +0.0611088f, +0.3341264f, +0.0985902f,
  -0.4728980f, +0.0116212f, +0.2570926f, -0.1616712f, +0.3603225f, -0.0708758f, -0.0126386f, +0.3020548f,
  +0.2723634f, +0.7560191f, +0.4577901f, +0.4805719f, +0.0150736f, +0.5426179f, -0.3706062f, +0.1817380f,
  +0.1975922f, -0.1691003f, +0.0059173f, +0.0021580f, +0.0518194f, +0.2444089f, -0.1360754f, +0.2705111f,
  +0.0820637f, +0.0256309f, +0.0236518f, +0.2540261f, +0.2957858f, +0.0658439f, -0.3004470f, +0.6825230f,
  +0.4534151f, -0.0965437f, +0.3388052f, +0.4696333f, +0.5238196f, +0.0442210f, -0.2627775f, +0.4796694f,
  +0.1946479f, -0.0912197f, -0.0605664f, +0.0826999f, -0.0808500f, +0.1106051f, -0.0821861f, -0.0470962f,
  +0.2269585f, -0.2521715f, -0.0940527f, +0.1810703f, -0.1566764f, +0.0712670f, -0.0085557f, +0.1672063f,
  +0.2912847f, -0.1972797f, -0.1361124f, +0.1835343f, -0.2525806f, +0.2643113f, +0.1340787f, +0.0983784f,
  -0.0602607f, +0.2212948f, +0.0594874f, -0.0831617f, -0.0351768f, -0.1714833f, +0.0790844f, -0.2162503f,
  +0.1468633f, +0.3855616f, -0.2095055f, -0.0641628f, +0.0336225f, +0.2449389f, +0.0936042f, -0.1783114f,
  -0.8284858f, +0.0618383f, -0.1236304f, -0.1289571f, -0.3667811f, -0.4309155f, +0.2116435f, -0.2370843f,
  -0.2255386f, -0.1174874f, +0.0274326f, +0.0099872f, -0.1369853f, +0.0358574f, +0.1173944f, -0.2095958f,
  -0.2885815f, +0.1759220f, -0.1350957f, -0.1303385f, +0.0955056f, +0.4515342f, -0.2212699f, -0.2281387f,
  -0.0990131f, -0.0247149f, +0.2821120f, +0.3506560f, -0.6598558f, -0.0057333f, -0.0875529f, -0.7902737f,
  +0.1169280f, +0.1062187f, -0.0962190f, -0.0004158f, -0.2345843f, +0.0635146f, -0.1336825f, -0.0597175f,
  -0.0314604f, +0.1525944f, -0.1704509f, -0.0330614f, -0.3715247f, +0.0605192f, +0.1029751f, -0.0597850f,
  -0.3593137f, -0.0999629f, +0.1091277f, +0.0563217f, -0.2257854f, +0.2123511f, -0.0765521f, -0.0834357f,
  +0.2211598f, -0.0722612f, +0.0997016f, -0.1288567f, +0.1745987f, -0.4103646f, +0.1051120f, +0.0215980f,
  +0.5278288f, -0.3510230f, +0.2535824f, -0.5918540f, -0.0887460f, -0.2890756f, +0.2940535f, +0.2232039f,
  -0.0282777f, +0.0582896f, -0.0263878f, +0.0662419f, +0.5611501f, +0.5632598f, -0.0250382f, +0.1227449f,
  -0.1696151f, +0.0553359f, -0.1721970f, -0.1064040f, -0.0001416f, -0.2324202f, -0.0440781f, -0.2623751f,
  -0.1439049f, +0.2032884f, +0.2879910f, -0.3102336f, -0.0471577f, -0.1227509f, -0.2298373f, -0.0120332f,
  +0.0382895f, +0.3126270f, +0.3415903f, -0.1253537f, +0.4545186f, -0.0879779f, +0.1734560f, -0.0948711f
);

const float biases[4] = float[4](
  -0.0984276f, +0.0436720f, -0.0287306f, -0.0789749f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer28 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0027296f, -0.1146705f, -0.1099710f, -0.0751291f, -0.2853251f, +0.1564077f, +0.0582458f, +0.1858166f,
  -0.1060368f, -0.4277820f, +0.0079738f, -0.2058197f, -0.1071246f, +0.0013538f, -0.0001949f, +0.1411196f,
  +0.1844864f, -0.2151220f, -0.0792678f, +0.4180855f, -0.1394455f, -0.0002813f, +0.4235792f, -0.1073031f,
  -0.2151975f, +0.0677655f, -0.1865466f, +0.0731936f, +0.1810101f, +0.1241562f, +0.5172228f, +0.0157508f,
  +0.1225427f, -0.2033769f, +0.2320039f, -0.0008431f, -0.1225391f, -0.3458212f, +0.0603307f, -0.5894100f,
  +0.4356740f, -0.0124784f, +0.1599219f, +0.4952045f, +0.0615150f, +0.3016317f, +0.2832494f, -0.1387979f,
  +0.2129212f, +0.0481805f, +0.0501489f, +0.1156767f, -0.4344940f, -0.3314201f, -0.2631443f, +0.2344506f,
  +0.3758774f, +0.3796857f, -0.2224285f, +0.0592031f, +0.1005893f, -0.6408919f, +0.0473935f, -0.1814214f,
  -0.0216088f, +0.0576414f, -0.0838856f, +0.1064159f, -0.1286497f, -0.1416029f, -0.0658903f, -0.1172893f,
  -0.1788284f, +0.0890331f, +0.1034610f, -0.1172685f, -0.1554091f, +0.1159139f, -0.4051343f, -0.0726275f,
  -0.1203097f, +0.0319519f, +0.0461590f, -0.3935017f, +0.0275178f, +0.0829021f, -0.1657772f, -0.2360703f,
  -0.1801030f, -0.0709008f, +0.1800462f, -0.4723804f, -0.1069124f, +0.0684082f, -0.1652253f, +0.0922289f,
  -0.3096487f, +0.0221333f, -0.1595662f, -0.2098891f, +0.1045811f, -0.1073027f, -0.1377278f, +0.0167730f,
  +0.1481319f, -0.2032223f, -1.1885915f, +0.1723816f, -0.4831344f, -0.1427470f, -0.2439850f, +0.2336769f,
  +0.1357670f, -0.2136487f, -0.0562980f, -0.0236635f, -0.0462049f, +0.0473731f, -0.0246760f, -0.0272856f,
  -0.1529592f, +0.1164027f, -0.0033765f, +0.1419649f, -0.0613679f, -0.0908780f, +0.0653792f, +0.0298726f,
  +0.0794787f, +0.0390423f, -0.6926835f, -0.1048230f, -0.0955553f, -0.0964442f, +0.3318138f, -0.4432469f,
  +0.1637610f, -0.3687178f, +0.1591285f, +0.0413141f, -0.0174654f, -0.0941616f, +0.1083283f, +0.0126507f,
  -0.2369580f, +0.0175248f, +0.0122691f, +0.1031464f, +0.3070731f, +0.3841347f, +0.0929072f, -0.4238591f,
  -0.2442915f, +0.0097109f, +0.2095327f, -0.4857565f, -0.0649356f, +0.4845056f, -0.1721755f, -0.1243351f,
  -0.1233991f, +0.1708343f, +0.1057374f, -0.1416598f, +0.2576203f, +0.2656178f, -0.3030463f, +0.0225331f,
  -0.2599130f, +0.0780052f, -0.1834690f, +0.1590891f, +0.1085539f, +0.3579407f, +0.1737625f, -0.2641890f,
  -0.2377276f, -0.0744761f, -0.3506525f, -0.5264013f, -0.0707193f, +0.5049073f, -0.1137808f, -0.1113033f,
  -0.0305093f, -0.1495666f, +0.0390078f, -0.2511294f, -0.0215680f, +0.1322036f, +0.0682105f, +0.0547228f,
  +0.0248431f, +0.0908692f, +0.1559603f, +0.0771138f, +0.0246661f, +0.2198116f, -0.1238690f, -0.2933016f,
  +0.3187522f, -0.1767049f, -0.2141115f, +0.0434203f, +0.0307333f, +0.5574207f, -0.0390272f, +0.3957769f,
  +0.1926116f, -0.3158726f, -0.1686916f, -0.0865800f, +0.1034747f, +0.1247291f, +0.0794476f, -0.0292322f,
  -0.1546643f, +0.1430236f, +0.0308964f, -0.2010517f, -0.1567928f, -0.3874983f, -0.7336529f, +0.0205510f,
  -0.1296003f, +0.2484494f, +0.3801002f, -0.3105938f, -0.3936631f, -0.0573229f, +0.0162144f, +0.0934843f,
  +0.2706968f, +0.2911207f, +0.0895012f, -0.2764559f, -0.0591784f, -0.0704518f, -0.0176096f, -0.1314998f,
  -0.0847242f, +0.0191984f, +0.0521561f, -0.0033443f, +0.5114506f, +0.5060204f, -0.1142864f, +0.9584716f,
  -0.2087974f, +0.1754929f, -0.5690368f, +0.0768980f, -0.1991300f, -0.1172913f, -0.2815147f, +0.1778171f,
  -0.2267588f, +0.0002295f, +0.1056781f, -0.1116389f, +0.0736808f, +0.1877240f, +0.0717311f, +0.0755835f,
  +0.0976437f, +0.2082627f, +0.0827799f, -0.0462560f, +0.2204383f, +0.2224666f, -0.0088961f, -0.1293615f,
  +0.0449563f, -0.2329256f, -0.3238626f, +0.1516240f, +0.1915822f, +0.5467861f, +0.2528517f, +0.1399951f,
  -0.0425821f, -0.1362575f, -0.1820114f, +0.0814065f, -0.0390807f, -0.0710397f, -0.0382514f, -0.0500364f
);

const float biases[4] = float[4](
  -0.0137032f, +0.0203846f, -0.0685635f, -0.1307703f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer28 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1349237f, +0.1120538f, +0.1479078f, -0.2336486f, -0.1257655f, +0.1409326f, +0.4230861f, -0.3181674f,
  -0.0983654f, +0.3289255f, +0.2662382f, +0.4047360f, +0.0316629f, +0.1549928f, -0.0069154f, -0.0721953f,
  -0.0278741f, +0.2359050f, +0.1152178f, +0.0478941f, -0.0240566f, -0.0156540f, -0.0658821f, +0.0677072f,
  -0.0376723f, -0.0571980f, +0.2827529f, -0.0955897f, -0.4254187f, +0.0057422f, +0.2297566f, +0.2614889f,
  -0.1609953f, +0.1856426f, -1.2268314f, -0.2046765f, +0.0302045f, -0.2446916f, +0.3511216f, -0.0923177f,
  +0.2990966f, +0.2654193f, +0.2695076f, -0.3277692f, -0.0577635f, -0.0090084f, -0.0728783f, +0.1310136f,
  +0.1420192f, +0.0345838f, +0.1656132f, -0.1563766f, +0.0433953f, +0.0785286f, +0.0083511f, +0.1356338f,
  +0.0720624f, -0.1012874f, +0.4597378f, -0.1329604f, +0.2234823f, +0.0517551f, -0.0101592f, +0.0774102f,
  -0.0511318f, +0.4297175f, +0.0292650f, -0.1100924f, +0.0102591f, +0.0907187f, +0.0147758f, +0.0903240f,
  -0.0250323f, -0.1100304f, +0.2340630f, -0.1122289f, -0.6041176f, +0.0299181f, +0.1533882f, -0.0780543f,
  -0.0666304f, +0.1203195f, +0.2401828f, -0.5885835f, -0.2846534f, -0.1677852f, -0.2721303f, -0.1290506f,
  +0.0108848f, +0.0853119f, +0.0709255f, -0.0797942f, +0.0380288f, +0.0820700f, +0.0753392f, -0.0621336f,
  -0.0885606f, +0.2099765f, -0.1340477f, +0.0787313f, -0.6519498f, -0.4941039f, +0.2920659f, -0.4081880f,
  -0.2219376f, -0.3958090f, -0.2824168f, +0.2861166f, -0.1803409f, +0.2432066f, -0.0496463f, +0.0552867f,
  +0.0554517f, +0.0299594f, +0.4316629f, +0.1009517f, +0.0709745f, +0.2315637f, +0.0430200f, +0.1837621f,
  -0.1252326f, +0.0627644f, -0.1499929f, +0.1970852f, -0.1833490f, -0.3354240f, -0.0608649f, +0.0460196f,
  +0.1437225f, -0.4568842f, -0.1066107f, +0.3314936f, -0.2486488f, -0.3831071f, +0.1733972f, -0.0048250f,
  -0.2124082f, -0.2022860f, +0.0217525f, +0.5116217f, -0.0561638f, -0.1686452f, +0.0814609f, -0.0120171f,
  -0.0685069f, +0.1759313f, +0.0611878f, +0.4280245f, -0.2036854f, +0.2421972f, +0.1595779f, +0.0440476f,
  +0.0827080f, +0.1119780f, -0.0039201f, +0.4075221f, +0.1820632f, +0.4291071f, +0.2205995f, -0.2738407f,
  -0.0112789f, -0.0300871f, +0.0989860f, -0.2086203f, +0.0511190f, +0.3325156f, -0.1675556f, -0.1166460f,
  +0.0054693f, +0.2595764f, +0.0135009f, -0.0186382f, +0.0466022f, +0.2573566f, +0.1734479f, -0.1746190f,
  -0.1766310f, +0.2373068f, +0.0569302f, +0.1775940f, +0.4414656f, +0.4381785f, +0.1060949f, +0.0719089f,
  -0.3016561f, -0.2776605f, +0.0312101f, -0.0868366f, +0.2946564f, +0.4751552f, -0.1501813f, -0.3636123f,
  +0.4721208f, +0.0115143f, +0.1066959f, +0.0504978f, -0.2644843f, -0.1575224f, -0.2338553f, -0.1065614f,
  +0.1896308f, +0.2042956f, +0.2573566f, -0.0632080f, -0.0826237f, +0.0323344f, -0.1879781f, +0.0476235f,
  +0.1517606f, +0.1050148f, -0.4734598f, -0.2549115f, -0.2179696f, +0.1575931f, -0.0008868f, +0.1589239f,
  -0.1442224f, -0.1187830f, -0.1427682f, -0.1440066f, +0.2448890f, -0.0253600f, +0.1813719f, -0.1254140f,
  -0.0184808f, -0.2564214f, -0.0618960f, -0.2652355f, +0.0383924f, +0.1323969f, -0.1669400f, -0.1180364f,
  -0.0902162f, -0.2166018f, -0.0767194f, -0.2562993f, +0.1337472f, +0.1071902f, -0.1675765f, +0.1088950f,
  -0.1955143f, -0.3530782f, -0.1563360f, +0.0729430f, +0.1448287f, -0.0447749f, -0.0005867f, -0.5244373f,
  -0.0425277f, +0.2424024f, +0.2203998f, +0.0900484f, +0.2361481f, +0.4235633f, +0.0466825f, -0.4274643f,
  +0.4124730f, -0.1883605f, +0.1881937f, -0.1490780f, +0.0858834f, +0.1293868f, +0.2014350f, -0.0146708f,
  -0.1537298f, +0.2962119f, +0.0194718f, -0.1988400f, +0.3521423f, +0.4663303f, -0.1080050f, +0.1679171f,
  +0.2547383f, -0.0435150f, +0.1513813f, +0.1392323f, +0.2309313f, +0.5429827f, +0.2478079f, +0.1338475f,
  +0.2148958f, +0.0658357f, -0.3474926f, -0.0225013f, +0.3163784f, +0.1723948f, +0.0303173f, -0.0510168f
);

const float biases[4] = float[4](
  -0.0796464f, +0.1469172f, -0.0868448f, -0.0470955f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer29 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1372849f, +0.0666243f, -0.0293619f, +0.0081876f, -0.1522162f, +0.0171340f, -0.0714920f, +0.1789424f,
  -0.2653833f, -0.0662888f, +0.1216461f, +0.3490234f, -0.0126500f, -0.3195353f, +0.2600577f, +0.4714347f,
  +0.1763607f, -0.2662697f, -0.2673865f, +0.1192218f, +0.1571941f, -0.0122099f, -0.1173735f, +0.2701658f,
  +0.3109702f, +0.0252144f, +0.1751017f, -0.0507745f, -0.0154848f, +0.0538119f, +0.2104365f, +0.1875157f,
  -0.1505785f, -0.2364674f, +0.3307834f, +0.2308041f, -0.2029182f, -0.4756731f, +0.2633283f, +0.1513888f,
  +0.0286344f, -0.0640525f, +0.0662851f, -0.1250256f, -0.0700151f, -0.0018544f, +0.1563852f, -0.1864507f,
  +0.2528098f, +0.0307900f, +0.0935158f, -0.2337719f, +0.1890317f, +0.0083965f, +0.1834131f, +0.0898097f,
  +0.2660952f, +0.2353536f, +0.5519540f, -0.1912363f, +0.3857857f, -0.2491302f, +0.3496905f, -0.0050783f,
  +0.0593886f, -0.1512522f, +0.0123357f, -0.1272344f, +0.2287732f, -0.0062167f, -0.0069778f, -0.0187867f,
  -0.1267317f, -0.2053202f, +0.1088534f, -0.0227593f, -0.0138674f, +0.1783429f, +0.2710002f, -0.1103481f,
  +0.1045671f, -0.2318680f, +0.1839000f, +0.2276207f, -0.0078642f, +0.1241832f, -0.1710035f, -0.4942081f,
  +0.1843818f, -0.1895548f, +0.2833993f, +0.0162587f, +0.0384340f, -0.0808770f, -0.0437226f, -0.0446071f,
  +0.0711059f, +0.0769522f, -0.0829995f, -0.2550033f, -0.0083450f, +0.1423250f, +0.2773534f, +0.1533185f,
  +0.0014553f, +0.2137375f, +0.0322586f, -0.0745328f, +0.4484660f, -0.0494890f, -0.3735096f, -0.1744211f,
  +0.0399851f, -0.1560665f, -0.0500905f, +0.1141849f, +0.0999232f, -0.1089153f, +0.0481674f, +0.1529743f,
  -0.0937118f, +0.1639254f, -0.0581403f, -0.1008285f, -0.3579402f, -0.3424697f, +0.1830281f, +0.0427523f,
  -0.0048451f, +0.0308515f, -0.2572260f, -0.3715745f, -0.6766548f, -0.2711526f, +0.1309175f, +0.2671287f,
  +0.0434342f, +0.0219699f, -0.2213731f, +0.0455473f, -0.0789562f, -0.0863025f, -0.0028712f, +0.2446364f,
  +0.0403694f, -0.1127218f, -0.0214768f, +0.0727582f, -0.0024758f, +0.2403813f, -0.0051480f, +0.0421288f,
  +0.3554763f, +0.1531339f, -0.1899719f, +0.1994084f, +0.0633177f, +0.1495561f, -0.4035788f, +0.1776016f,
  -0.0914670f, -0.1423847f, -0.2518401f, +0.0239918f, -0.1009098f, +0.1020561f, -0.2153019f, -0.0590008f,
  +0.0703911f, +0.0913783f, -0.2209967f, -0.2284191f, +0.0639024f, -0.1700920f, -0.0255388f, -0.0261314f,
  -0.0578484f, -0.3073244f, -0.1545053f, -0.8076363f, +0.7472507f, -0.3024383f, +0.8794175f, -0.3790369f,
  -0.1089111f, +0.0275003f, +0.0568104f, -0.0005304f, +0.2127075f, -0.2010920f, +0.2593918f, -0.2271935f,
  +0.0484754f, +0.0101490f, -0.1061803f, +0.0664154f, -0.2057993f, -0.0361542f, -0.0482526f, +0.0745204f,
  -0.3130058f, -0.0713460f, +0.4516250f, -0.0770793f, -0.1471720f, -0.4371573f, -0.2233008f, +0.1022641f,
  +0.0662325f, +0.1534279f, +0.1359879f, +0.0739461f, -0.3647162f, -0.1346037f, -0.2385256f, -0.3127119f,
  +0.2127157f, -0.1036060f, +0.0831202f, +0.0497330f, +0.1102039f, +0.0144140f, +0.1666764f, +0.0719687f,
  +0.0670338f, -0.1372501f, +0.1182469f, +0.1909759f, +0.3085487f, -0.1788400f, -0.0605617f, +0.1963970f,
  +0.0009790f, +0.0564813f, -0.0834445f, +0.0979998f, -0.1725233f, +0.0999324f, -0.6025445f, -0.1786242f,
  -0.0391147f, +0.0377845f, +0.0375927f, +0.1795932f, +0.0274132f, -0.1033225f, +0.1390148f, +0.0320164f,
  +0.2334699f, +0.2230855f, -0.3807608f, +0.0694399f, +0.5777134f, +0.0689581f, -0.4927283f, +0.1666799f,
  -0.1375617f, +0.2555697f, +0.0252725f, -0.3609436f, +0.2110866f, +0.1750036f, -0.3180978f, -0.2312140f,
  -0.1361566f, +0.1431615f, -0.1608119f, +0.0253259f, -0.0662174f, +0.2869946f, +0.2146436f, -0.1514331f,
  -0.1048765f, +0.0280780f, -0.2065132f, -0.1310273f, -0.3763534f, +0.3599674f, -0.0024537f, +0.1167642f,
  +0.1294604f, -0.1258489f, +0.1549815f, -0.0329699f, -0.3656847f, +0.2193121f, -0.5984821f, -0.3428428f
);

const float biases[4] = float[4](
  -0.2531902f, +0.0471735f, +0.0325010f, -0.0545952f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer29 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2807857f, +0.3649520f, -0.1424453f, -0.2012326f, +0.1966362f, -0.3337926f, -0.1864245f, +0.0638647f,
  +0.2203361f, +0.3050255f, -0.1631966f, -0.5845632f, +0.5607107f, -0.1948518f, +0.2368042f, +0.3186404f,
  -0.1398441f, +0.1767992f, -0.2605701f, +0.0377979f, +0.0539350f, -0.1452680f, +0.0396586f, +0.0809800f,
  -0.1387026f, -0.1499002f, -0.0296994f, +0.0594809f, +0.1299476f, -0.0841596f, +0.1421790f, -0.0759379f,
  +0.0877026f, -0.1630856f, +0.3003374f, -0.2288777f, -0.0268211f, +0.0632642f, +0.3022006f, -0.2310091f,
  -0.0241213f, +0.0236652f, +0.1547858f, -0.1368655f, +0.1081741f, -0.1617682f, -0.0299984f, -0.1337908f,
  -0.0423409f, -0.1454166f, +0.0181111f, -0.0410664f, +0.1731976f, +0.0377345f, -0.1236363f, +0.0911257f,
  -0.0035206f, -0.1130970f, +0.3427377f, +0.1119175f, +0.3739692f, -0.1336733f, -0.1799564f, -0.1892160f,
  +0.0937655f, -0.1367601f, +0.0347260f, -0.0639722f, -0.0551720f, +0.0695148f, -0.0464270f, -0.1333264f,
  -0.1783151f, -0.0946743f, -0.0171797f, -0.4011590f, +0.3281623f, +0.1494103f, +0.1296287f, -0.1451774f,
  +0.0826956f, +0.2585151f, +0.0648236f, -0.1395338f, +0.1982007f, +0.2179966f, +0.1267447f, -0.1639232f,
  -0.0078003f, +0.1629862f, -0.0739476f, +0.0732470f, +0.0911416f, -0.2151663f, -0.1024697f, -0.2632849f,
  -0.2902865f, +0.2273302f, +0.1868151f, -0.0229469f, +0.0003868f, -0.1914166f, +0.1762757f, +0.1736630f,
  +0.0768007f, -0.0704415f, +0.0473569f, -0.4556649f, +0.4874254f, -0.0888874f, +0.0140779f, -0.2518780f,
  -0.0164280f, +0.2403769f, -0.2093568f, +0.1962665f, +0.1475217f, +0.0924558f, +0.1709878f, -0.2740498f,
  +0.1050165f, -0.1800858f, -0.2376114f, -0.1017687f, -0.1325641f, +0.0707233f, +0.1438009f, +0.1424799f,
  +0.8148377f, -0.1095692f, +0.0255380f, -0.1035055f, -0.7870604f, +0.0933300f, +0.2533500f, +0.1605894f,
  +0.2178936f, +0.0407867f, +0.0483100f, +0.1313016f, -0.3622994f, -0.2751439f, -0.0561851f, -0.2048039f,
  +0.0720815f, +0.1262702f, -0.0172550f, +0.1204816f, +0.0651279f, -0.0925362f, +0.0134207f, +0.0889717f,
  -0.0206113f, -0.1219633f, +0.0652839f, -0.0643713f, +0.0442114f, -0.2533046f, -0.1509001f, -0.0115060f,
  -0.1203719f, +0.0976707f, +0.1909452f, -0.1171612f, -0.0118841f, +0.0925658f, +0.0454852f, +0.0510276f,
  +0.2014478f, +0.5009100f, +0.2302625f, +0.1139695f, -0.0573446f, -0.3511561f, -0.0934711f, +0.5545970f,
  -0.3991346f, +0.0938080f, +0.2092141f, +0.3398216f, -0.5054107f, +0.2794790f, -0.1801892f, +0.1070078f,
  +0.0936268f, -0.3063553f, -0.2726051f, -0.2015499f, -0.1089956f, +0.2163573f, -0.2031922f, +0.0732671f,
  +0.4211183f, +0.3210534f, -0.1475894f, -0.1128647f, -0.2563146f, -0.2475863f, +0.5131371f, -0.0733501f,
  -0.1047891f, +0.2940029f, -0.1592190f, -0.1099325f, +0.8259931f, -0.0799946f, +0.2796144f, -0.0263402f,
  -0.0299179f, +0.0499251f, +0.1041365f, -0.0207889f, -0.0161259f, +0.0960726f, +0.2693229f, -0.0848623f,
  +0.2521015f, -0.3095377f, -0.0404483f, +0.0075034f, +0.2472305f, -0.0599817f, +0.1043333f, -0.0848662f,
  +0.5697879f, +0.0087715f, -0.0109016f, -0.0887679f, +0.3890415f, -0.0107073f, +0.0095137f, +0.1040671f,
  +0.1225541f, -0.2115812f, +0.0124002f, +0.1279681f, +0.1147299f, -0.1154064f, +0.1770657f, +0.3394870f,
  -0.1726908f, +0.2936300f, -0.0586222f, -0.3868531f, +0.1679761f, +0.0454123f, -0.4725920f, -0.2089888f,
  +0.1483094f, +0.2834997f, +0.5047174f, +0.0490216f, +0.5352328f, +0.3815358f, -0.0803523f, -0.4954211f,
  -0.1682089f, +0.1101633f, +0.0141394f, +0.1686905f, +0.0039690f, -0.1937944f, +0.0578340f, +0.0778095f,
  -0.2326537f, +0.0399751f, -0.0987856f, -0.1255036f, -0.0231734f, +0.1088387f, +0.0804928f, -0.2446836f,
  -0.0004411f, -0.0369689f, -0.1458239f, -0.4755702f, -0.9536684f, +0.1105450f, +0.0244887f, +0.1664707f,
  -0.2169160f, +0.0842361f, -0.1671707f, +0.0702533f, -0.0681111f, -0.3550841f, -0.0974889f, +0.1258618f
);

const float biases[4] = float[4](
  +0.0163038f, +0.1187170f, -0.3917120f, +0.1245846f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer30 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0549757f, -0.0356023f, -0.0503371f, +0.0607825f, -0.1218798f, -0.0926796f, -0.0621168f, +0.2100283f,
  -0.0436058f, -0.0710189f, +0.3954712f, -0.0699792f, +0.1194463f, -0.3418743f, +0.0500380f, +0.0887990f,
  +0.0292719f, -0.0358679f, -0.1976437f, +0.1996122f, +0.0942502f, -0.2998117f, -0.2688211f, +0.1853337f,
  -0.0180017f, +0.0131420f, +0.1347409f, +0.0232828f, +0.1198838f, -0.0084732f, +0.1196639f, +0.2962839f,
  -0.0117567f, +0.0402072f, +0.2726094f, -0.4706055f, -0.3084109f, +0.2815626f, -0.0699730f, -0.0760930f,
  -0.1582137f, -0.1512411f, -0.2191201f, -0.0203767f, +0.1976329f, +0.2778665f, +0.5493630f, +0.5298104f,
  -0.0447856f, -0.1633362f, +0.1180724f, +0.0020435f, +0.0742664f, -0.1086625f, +0.1562862f, +0.1176204f,
  +0.3179805f, +0.2785980f, -0.2905304f, -0.1305538f, -0.5647710f, -0.0044101f, -0.0921570f, -0.3433487f,
  -0.0126857f, +0.0738545f, -0.0379954f, -0.3797304f, -0.3383830f, +0.1886582f, -0.0706963f, -0.0242128f,
  -0.0528930f, -0.0405648f, -0.1836018f, +0.0853626f, +0.0771948f, -0.1296636f, +0.1629153f, -0.1200306f,
  +0.0027325f, +0.0764818f, -0.1498820f, -0.3021710f, +0.0241004f, -0.0062238f, -0.2065028f, +0.0150055f,
  -0.2590538f, -0.0796743f, -0.1127996f, +0.0012641f, +0.0916664f, +0.1375075f, -0.2882372f, -0.0095317f,
  -0.1205342f, +0.0513461f, +0.2107214f, -0.1930591f, +0.1915286f, +0.0033658f, +0.0357230f, -0.3299311f,
  -0.0604201f, -0.2010680f, +0.3990641f, -0.0720155f, +0.5320920f, +0.2167408f, +0.1004702f, -0.3808882f,
  -0.0948710f, -0.2205416f, +0.1258721f, -0.1862849f, +0.1665760f, +0.0278216f, -0.3425826f, -0.2537877f,
  +0.0637492f, +0.0482223f, +0.0458790f, -0.1923289f, -0.0583226f, -0.0832153f, -0.0377476f, -0.1039989f,
  +0.0365022f, +0.3072162f, -0.0912422f, -0.1973773f, -0.2141700f, -0.3189549f, -0.0255693f, -0.3111792f,
  +0.0683060f, +0.1103737f, +0.1874685f, -0.2397798f, -0.1350507f, -0.0652195f, +0.0120923f, -0.1959876f,
  -0.3108661f, -0.1012940f, -0.0373378f, +0.1906302f, +0.1286603f, +0.0689438f, +0.0551769f, -0.2000803f,
  -0.4538078f, +0.2684534f, -0.4305596f, +0.0856625f, -0.0516380f, +0.0735892f, +0.4260789f, -0.2025879f,
  -0.3049809f, -0.0104242f, +0.0166496f, -0.2425468f, +0.2340032f, +0.3749208f, -0.2385834f, +0.0874453f,
  -0.0665880f, +0.1138751f, +0.2812051f, -0.3386565f, +0.1273317f, +0.2352971f, -0.1100652f, -0.0550916f,
  -0.4792430f, +0.1944823f, +0.0823993f, -0.1757548f, -0.2354466f, -0.2089076f, +0.2286738f, -0.5004998f,
  -0.3168115f, -0.1025466f, +0.1829203f, -0.1485683f, +0.1335402f, +0.0067875f, -0.5816044f, -0.1257406f,
  -0.1130861f, +0.0276364f, +0.0028850f, +0.0898168f, -0.0529111f, +0.0837133f, +0.0725627f, -0.2199462f,
  -0.1412710f, +0.0511611f, +0.1933671f, -0.0451939f, +0.0924656f, +0.1951086f, +0.0459453f, +0.0432140f,
  -0.2083049f, +0.0917908f, +0.0820868f, -0.2657507f, +0.0748048f, +0.0639569f, +0.0444177f, -0.2581214f,
  +0.1484177f, -0.2459414f, +0.0371830f, +0.1584051f, +0.1270033f, -0.0335476f, +0.0442276f, +0.0110136f,
  +0.2505412f, +0.4170703f, +0.0459098f, -0.1094759f, -0.3423942f, -0.0287593f, -0.7150180f, +0.0380461f,
  -0.0879804f, -0.1693559f, -0.0584310f, -0.0413369f, +0.0073718f, +0.3093657f, -0.0063863f, +0.0784786f,
  -0.0467778f, -0.0052672f, -0.3474850f, +0.0275531f, +0.0406573f, +0.0328892f, +0.0093120f, -0.1482989f,
  -0.3475995f, +0.1955465f, +0.4891958f, -0.1980895f, -0.1175821f, +0.0847402f, +0.3156993f, -0.2919577f,
  -0.0212423f, +0.0539402f, +0.0654131f, -0.0563560f, -0.1410818f, +0.2855292f, +0.1884876f, +0.5494407f,
  +0.0378806f, -0.1049908f, +0.0960196f, +0.1739874f, -0.2181192f, -0.0861077f, -0.0472999f, +0.1488756f,
  -0.1440982f, -0.0807142f, +0.0008551f, +0.1272601f, +0.2039521f, +0.2861229f, +0.2541198f, +0.2894549f,
  -0.1591491f, -0.1920452f, +0.0416505f, +0.0432056f, +0.0393886f, +0.3771670f, -0.0570153f, +0.2207504f
);

const float biases[4] = float[4](
  +0.1407490f, +0.0647466f, -0.1164528f, +0.0381706f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer30 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0144873f, -0.1454119f, +0.1403791f, -0.0283154f, +0.1018064f, +0.0833820f, +0.0250713f, -0.2581030f,
  -0.0951028f, +0.2467432f, -0.3575056f, -0.2672763f, -0.2318962f, +0.2912102f, -0.2462479f, +0.3951061f,
  -0.2025952f, +0.0240583f, -0.0555514f, -0.3348474f, -0.1013759f, +0.1112280f, +0.2011998f, +0.0662956f,
  +0.0011551f, +0.1092965f, -0.0550495f, +0.0245321f, -0.0862895f, -0.1865209f, +0.0986658f, +0.0202698f,
  -0.0541003f, -0.4265031f, -0.1196227f, -0.0688524f, +0.3746607f, -0.2667943f, -0.3487794f, -0.0515135f,
  -0.2184268f, -0.0230973f, +0.0484109f, -0.3097129f, -0.1258775f, -0.0649863f, +0.5815456f, +0.0307242f,
  -0.0075755f, -0.0977464f, +0.2026470f, -0.0422636f, +0.0937799f, +0.0027142f, +0.0988507f, +0.0507140f,
  -0.0595242f, +0.1832682f, +0.1209220f, -0.1206275f, -0.2844066f, +0.0186602f, +0.0681175f, -0.5231140f,
  -0.1984249f, +0.0046211f, -0.0589154f, -0.2589301f, -0.0765976f, -0.1302113f, +0.1465192f, +0.0612175f,
  +0.1484597f, -0.0975617f, +0.1499392f, +0.2596688f, -0.0845231f, +0.1345464f, -0.0552650f, +0.1545492f,
  +0.0384215f, -0.0880134f, +0.2641920f, -0.3026619f, -0.0034421f, -0.0603669f, -0.0377338f, -0.2680417f,
  -0.1676350f, +0.1738427f, +0.0369271f, -0.1592757f, -0.2220626f, +0.2097736f, +0.0927799f, +0.0255841f,
  +0.1990159f, +0.0203857f, +0.5295027f, +0.1661082f, -0.0181619f, +0.0054030f, -0.1442517f, -0.2014338f,
  +0.0034992f, -0.0935099f, +0.3886160f, -0.4295549f, +0.1189754f, +0.4901510f, -0.0853846f, -0.2750216f,
  -0.1811831f, -0.3497108f, +0.0843016f, +0.0560269f, +0.0739354f, +0.5787423f, -0.0061337f, +0.2136039f,
  +0.1815036f, +0.0976974f, -0.1656975f, -0.0215526f, -0.2259931f, -0.2380659f, -0.2311532f, -0.0609990f,
  +0.0591266f, +0.0882991f, -0.0892811f, -0.2375076f, +0.0596706f, -0.0609162f, +0.0981344f, -0.2026464f,
  +0.0069908f, -0.2174523f, -0.2606412f, -0.2110983f, +0.3334124f, +0.2335928f, -0.0958629f, +0.0638846f,
  -0.1440796f, +0.0016346f, -0.3572392f, +0.1524459f, -0.1188794f, -0.2449279f, +0.1211015f, -0.0199649f,
  -0.1532370f, +0.0445938f, +0.2141161f, -0.0333856f, -0.0182922f, +0.0798598f, -0.0308687f, -0.1229910f,
  -0.2950460f, -0.1328233f, +0.0073427f, -0.0029745f, +0.1873858f, -0.0608916f, +0.1826885f, -0.0926610f,
  -0.3212723f, +0.1660963f, +0.0243760f, +0.0068535f, +0.0384558f, +0.1330319f, +0.1043257f, -0.0486251f,
  -0.2581867f, +0.4442654f, -0.5690166f, +0.4237799f, -0.4894650f, +0.5167339f, -0.0839558f, +0.1119262f,
  -0.1535238f, -0.1496192f, +0.1108763f, -0.3333226f, +0.1953042f, +0.0260151f, -0.0203880f, -0.0764186f,
  -0.0506086f, +0.0512512f, -0.0002621f, -0.0242500f, -0.0923653f, +0.0666433f, +0.2137315f, -0.1091007f,
  -0.2677158f, -0.0413843f, +0.3034707f, -0.0875612f, -0.2290002f, +0.4092496f, -0.0322120f, +0.0135556f,
  -0.0723926f, -0.2239979f, -0.1799381f, -0.1455763f, +0.5246513f, +0.1995969f, +0.0259433f, +0.0422427f,
  -0.0402952f, -0.0539847f, +0.2273086f, -0.0644895f, -0.0062694f, +0.1053208f, -0.0311976f, -0.0418958f,
  -0.0517464f, -0.0240774f, -0.1284040f, +0.0583864f, +0.1222897f, +0.0631859f, +0.3213383f, -0.0366279f,
  -0.1955894f, +0.1712224f, -0.1439386f, -0.1009311f, +0.0726601f, +0.0586380f, -0.0811652f, +0.1729489f,
  +0.0425798f, -0.1422959f, +0.0588006f, +0.0198388f, +0.1305709f, +0.0479226f, +0.0292914f, -0.0368987f,
  -0.0562310f, -0.0886665f, +0.3444509f, +0.0160108f, +0.1016753f, +0.0149723f, -0.0336659f, +0.0406414f,
  -0.3881554f, +0.0061434f, +0.0651799f, +0.1155779f, -0.0651965f, -0.2429580f, -0.6117074f, +0.0765140f,
  -0.0511110f, -0.0759374f, +0.2933924f, +0.1216929f, -0.0551757f, +0.1683036f, -0.0833695f, -0.2189099f,
  -0.2908899f, +0.3793610f, -0.0490194f, +0.1352494f, -0.3908099f, -0.1028080f, +0.2789306f, -0.2190621f,
  -0.3962538f, +0.1563604f, +0.0319530f, -0.2718636f, -0.1131447f, -0.0296782f, -0.0088392f, -0.0460171f
);

const float biases[4] = float[4](
  +0.1236812f, +0.0196165f, -0.0751534f, +0.0872225f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer31 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.4336775f, +0.0540007f, -0.2414750f, -0.1263372f, +0.0447020f, +0.3957180f, -0.4549043f, -0.1728106f,
  +0.4459779f, +0.0687901f, -0.0499047f, -0.0531050f, -0.1313692f, +0.4680299f, -0.6625537f, -0.0348255f,
  +0.4461736f, -0.1125406f, -0.2651400f, -0.4189450f, -0.3130697f, +0.3957698f, -0.2385386f, -0.0251727f,
  +0.2088782f, +0.3520969f, +0.0952717f, +0.0525224f, +0.0594830f, -0.3132946f, -0.4986774f, +0.0596864f,
  -0.1366144f, +0.0854199f, +0.2427309f, -0.3434134f, +0.4111821f, +0.3418845f, +0.3430522f, -0.2215642f,
  -0.1453703f, +0.2939641f, +0.2628653f, -1.0639138f, +0.0871740f, +0.8297743f, -0.3515188f, -0.0592970f,
  +0.1648720f, +0.2477279f, -0.0994356f, +0.0713969f, +0.3389271f, -0.1268776f, -0.0664971f, +0.0117794f,
  +0.1237576f, +0.3785264f, +0.1306381f, -0.2603516f, +0.2704251f, -0.1074747f, -0.0121396f, -0.3401988f,
  -0.1073467f, -0.0324262f, +0.0054090f, -0.3980988f, +1.0583978f, +0.2782356f, +0.0910357f, +0.0052771f,
  +0.4331777f, -0.1255817f, -0.2482663f, +0.2393660f, +0.0273298f, +0.3723902f, -0.6612801f, -0.0564107f,
  +0.2154032f, +0.0353539f, +0.0856505f, -0.1623782f, -0.0334527f, +0.1024702f, -0.0152788f, +0.1659982f,
  -0.2321140f, +0.2803739f, +0.0493581f, -0.2375977f, -0.4510183f, +0.6582985f, -0.0421429f, +0.0196348f,
  +0.0147427f, +0.1412064f, -0.1395714f, -0.0516196f, -0.2962732f, +0.4369202f, -0.9203171f, -0.3771856f,
  -0.1062175f, -0.3791098f, +0.0278802f, -0.3580194f, +0.2557763f, -0.5340463f, -0.1308699f, -0.2262260f,
  +0.3421691f, -0.3846796f, +0.1371750f, -0.6055619f, -0.4622644f, +0.3761278f, +0.6311715f, -0.3457003f,
  -0.1916204f, +0.5535254f, -0.1141932f, +0.2854933f, +0.0272367f, -0.5571783f, -0.5666437f, +0.1625706f,
  +0.7210264f, +0.4537988f, +0.3266235f, -0.2422336f, +0.0531196f, -0.1370625f, +0.4296831f, -0.1008936f,
  -0.1365216f, +0.3718832f, -0.0520074f, -0.6309414f, +0.7260163f, +0.3081850f, -0.1791593f, -0.3651704f,
  -0.0091030f, +0.0699934f, -0.1160070f, -0.0420416f, +0.1575698f, -0.1300994f, -0.0331146f, +0.0789563f,
  +0.0568245f, -0.2752016f, +0.1452537f, +0.2818856f, -0.0783649f, +0.7899584f, +0.0196587f, -0.0499086f,
  +0.2836289f, +0.0202135f, -0.0564259f, -0.4917588f, -0.0627342f, +0.3244109f, +0.1363792f, +0.2412676f,
  +0.2198146f, +0.2989579f, +0.0669239f, -0.1020920f, -0.1767253f, -0.6276855f, +0.1007580f, -0.1501265f,
  -0.3106402f, -0.0271590f, -0.2350558f, +0.2222036f, +0.1500505f, +0.0949720f, -0.9212309f, +0.2422368f,
  -0.1943790f, -0.0963572f, +0.1066649f, -0.0454303f, -0.0406370f, +0.4472486f, +0.1351069f, -0.5223253f,
  +0.1254941f, +0.2568446f, +0.0657664f, +0.1713651f, -0.1331957f, +0.1193995f, +0.4246175f, -0.4336448f,
  +0.2115386f, -0.3136241f, -0.0674192f, -0.2957195f, -0.1507743f, -0.1849335f, -0.3054348f, +0.0634217f,
  -0.3239711f, +0.1461769f, -0.1310839f, +0.1919770f, -0.0729364f, -0.1540060f, +0.0560475f, -0.0291198f,
  -0.0314423f, -0.1111465f, +0.0479522f, -0.0022769f, -0.0511909f, +0.1249677f, +0.1614823f, -0.0411155f,
  +0.1247801f, +0.0972947f, +0.2096110f, +0.2017302f, -0.1048317f, -0.2921461f, +0.0334288f, +0.5093209f,
  -0.1357694f, -0.1241919f, +0.2754910f, -0.1635081f, +0.1232505f, -0.2069443f, +0.1597457f, -0.0761829f,
  -0.1627153f, -0.0283373f, +0.1650064f, +0.0456246f, -0.0062082f, -0.1066351f, -0.1625223f, -0.0008561f,
  +0.4677558f, +0.6874486f, -0.0686931f, -0.1316476f, -0.0749246f, -0.8912660f, -0.1355422f, +0.3941627f,
  -0.1656369f, -0.0138760f, -0.2750418f, -0.1853795f, +0.4687034f, -0.0265516f, +0.2872530f, +0.3059522f,
  -0.0735077f, +0.0186991f, -0.0479578f, +0.0267318f, -0.0208549f, +0.1358100f, -0.0749052f, -0.0979101f,
  -0.0816685f, -0.1167069f, +0.1145554f, +0.0209423f, -0.0319275f, -0.1944529f, +0.0250018f, -0.0290552f,
  -0.0369019f, +0.0008899f, +0.0700751f, -0.0438518f, +0.4190730f, +0.1988574f, +0.0085226f, +0.0630920f
);

const float biases[4] = float[4](
  -0.2389477f, -0.2804565f, -0.0679334f, +0.0361695f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer31 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1820113f, -0.2231003f, -0.0813552f, -0.0515374f, +0.0914100f, +0.0631293f, +0.0467394f, -0.0603653f,
  +0.1325781f, +0.2490184f, -0.0954262f, -0.0447826f, -0.0338635f, +0.0455716f, -0.0045820f, -0.0279849f,
  -0.0324497f, +0.1529649f, +0.0402709f, -0.0119717f, +0.0247062f, -0.0440329f, +0.1428888f, +0.0680815f,
  -0.4643866f, -0.3769921f, -0.3425964f, -0.4940825f, -0.0827243f, +0.0890500f, +0.0605006f, -0.3365152f,
  +0.4014935f, +0.1164882f, +0.3152573f, +0.2826760f, -0.2760852f, +0.1504564f, +0.2275444f, +0.0274827f,
  -0.1780657f, +0.2567116f, +0.1011461f, +0.1602390f, -0.0914948f, -0.0449118f, -0.1402596f, -0.3331915f,
  -0.2279389f, -0.4334877f, -0.0853535f, -0.2447146f, -0.3087773f, -0.2821711f, -0.2398727f, -0.0019546f,
  -0.1712435f, +0.3394982f, +0.0925964f, +0.3375622f, -0.1295620f, +0.0396947f, -0.3266230f, -0.0142099f,
  -0.0639048f, -0.0700031f, -0.3911171f, +0.2672696f, +0.0162766f, -0.2406290f, -0.1001381f, +0.2289957f,
  +0.7287074f, +0.1467863f, -0.0447680f, -0.0031808f, +0.1181772f, -0.1722054f, -0.2006883f, +0.2019004f,
  +0.0718560f, +0.3313471f, -0.0188495f, -0.0115890f, -0.3889932f, -0.1527061f, +0.3763725f, +0.0721859f,
  -0.3676685f, +0.0580669f, +0.0748117f, -0.1188420f, -0.8037655f, +0.1449569f, -0.0279148f, -0.1842610f,
  +0.5382431f, -0.2716798f, -0.0260817f, -0.1973391f, +0.5384945f, +0.4246211f, -0.1890060f, +0.2092475f,
  -0.2339646f, -0.0356779f, +0.2818858f, -0.3114051f, -0.1717794f, +0.4436713f, -0.6526588f, -0.6752686f,
  -0.0035486f, +0.1026624f, -0.0545334f, -0.1148673f, -0.2780130f, +0.2785288f, -0.0052808f, -0.3340579f,
  +0.1178984f, +0.0052379f, -0.0537598f, -0.0082364f, +0.6376212f, -0.0819402f, +0.0114535f, -0.5575633f,
  -0.2797965f, +0.2363365f, +0.2079260f, -0.6059969f, -0.8739091f, +0.1884980f, +0.5288153f, -0.2316353f,
  -0.3090020f, -0.0401409f, -0.1487362f, -0.1799369f, -0.3318769f, -0.3489456f, +0.3155837f, -0.0485076f,
  -0.2162264f, -0.4126820f, +0.0280718f, +0.0085642f, +0.0883130f, +0.1966779f, +0.1300890f, -0.3080572f,
  +0.8070350f, +0.0856085f, +0.0125932f, +0.1290724f, +0.1739425f, -0.3218828f, +0.0000965f, -0.4445216f,
  -0.2591342f, +0.0954523f, +0.0151892f, -0.1679444f, +0.0235479f, -0.2249746f, -0.0983823f, -0.0002795f,
  -0.0287538f, -0.0793577f, +0.1238538f, +0.1286938f, +0.3514102f, +0.4934516f, -0.2793148f, +0.0638957f,
  +0.1418415f, +0.2327181f, -0.0496130f, +0.5376153f, +0.0993021f, -0.2872665f, +0.2563655f, -0.4998572f,
  -0.1879396f, -0.0377542f, -0.2925981f, -0.1907439f, +0.1376278f, -0.2181597f, -0.0448107f, +0.4299171f,
  +0.0489465f, -0.0160711f, -0.1106463f, -0.0797021f, -0.0133305f, -0.0727894f, +0.1409906f, +0.0696208f,
  +0.2059039f, -0.0578322f, -0.0264389f, -0.0591157f, -0.2902925f, -0.0776703f, -0.0105721f, -0.0385675f,
  -0.0129005f, -0.0825885f, -0.1909923f, +0.0976343f, +0.0058635f, +0.1026952f, -0.1665724f, +0.0287584f,
  -0.0980822f, -0.4210400f, -0.0873483f, +0.0948442f, +0.0256515f, +0.1701324f, +0.0076903f, -0.3708664f,
  +0.2102433f, -0.0699716f, -0.0894290f, -0.0693691f, +0.4906356f, -0.4648288f, +0.1249678f, -0.0608390f,
  -0.0568375f, -0.0074344f, -0.0513628f, -0.0453669f, +0.2183794f, -0.1917007f, -0.0020309f, +0.0083000f,
  -0.2990045f, -0.3606130f, -0.2035086f, -0.3650234f, +0.1363970f, +0.4669103f, -0.0402892f, -0.2215888f,
  +0.3420085f, +0.6157548f, +0.2484958f, -0.0190608f, -0.3339084f, -0.1420337f, -0.0528130f, -0.3193859f,
  -0.0346981f, +0.2866641f, +0.0841219f, +0.0860712f, -0.0567842f, -0.1583971f, +0.1188446f, -0.0485715f,
  -0.1461309f, -0.0576361f, +0.0931210f, -0.2179725f, +0.0530176f, +0.0159775f, +0.1330160f, +0.2244437f,
  +0.3182711f, +0.1875038f, -0.0470161f, +0.0168250f, -0.4352204f, -0.0877192f, -0.0755175f, +0.3220554f,
  +0.0100812f, +0.1549281f, +0.2456134f, -0.1071239f, +0.4154429f, -0.1939617f, +0.0321497f, +0.1787304f
);

const float biases[4] = float[4](
  +0.0736916f, -0.1183221f, +0.0101904f, +0.0843806f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer32 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1445843f, +0.2139902f, +0.1916799f, -0.0559203f, -0.1842202f, -0.3225654f, -0.0961071f, -0.1278783f,
  +0.1331796f, -0.9039888f, +0.1140600f, -0.0818738f, +0.2049171f, +0.6701217f, -0.1353627f, -0.2377446f,
  +0.4915144f, +0.2660193f, -0.1863738f, +0.0013162f, +0.1523858f, +0.1334336f, -0.1166674f, -0.0546502f,
  -0.0668488f, -0.2838312f, +0.3258340f, -0.6945949f, +0.2113381f, +0.2115341f, -0.0553327f, -0.0383053f,
  -0.2456125f, -0.4610034f, -0.6066155f, +0.6345589f, -0.5505722f, +0.5783185f, -0.1250627f, -0.0951148f,
  -0.0272978f, +0.1813646f, +0.0077656f, -0.2273794f, +0.2641945f, -0.3649054f, -0.0148454f, +0.2788249f,
  -0.3129457f, +0.1617912f, +0.1671849f, -0.1711601f, -0.0653510f, +0.0157460f, -0.0220708f, -0.0158704f,
  -0.3198662f, -0.3748403f, -0.1001817f, -0.0923786f, -0.2395078f, -0.4965975f, -0.5360623f, +0.2568362f,
  -0.0683315f, -0.0154201f, -0.0632799f, -0.1885792f, -0.0159713f, -0.2869111f, -0.0312962f, +0.1726984f,
  +0.0700727f, -0.0631725f, +0.0650727f, +0.0650456f, +0.3716941f, +0.1850372f, +0.1651945f, -0.0949969f,
  +0.0568162f, +0.0539328f, +0.1671714f, -0.1994613f, +0.1489175f, -0.3483281f, +0.1534174f, +0.1634121f,
  +0.1953889f, -0.2029423f, -0.2258460f, +0.0477739f, +0.3582298f, -0.2249586f, -0.0535469f, -0.1041317f,
  -0.4510435f, +0.1371488f, -0.2583095f, -0.3962717f, -0.2854179f, -0.0824290f, +0.2240002f, -0.1090305f,
  -0.1867972f, +0.0874434f, +0.1346095f, -0.0982173f, -0.2043854f, +0.2291345f, -0.0661730f, -0.0821010f,
  -0.2013837f, -0.2258161f, +0.1450086f, +0.0499702f, +0.1033780f, +0.4631078f, -0.0707516f, +0.2482338f,
  -0.0112095f, +0.0371093f, -0.0983314f, +0.0492219f, -0.1446404f, -0.0340533f, -0.1210866f, +0.1331400f,
  +0.3817637f, +0.2143072f, +0.0735444f, +0.1387458f, -0.1858325f, -0.3062526f, -0.2443547f, +0.0947272f,
  -0.0115292f, +0.1573996f, +0.1704520f, -0.1015708f, -0.0763722f, -0.0482804f, -0.0384096f, +0.1833725f,
  -0.3212703f, +0.2088645f, -0.2290833f, +0.0930772f, +0.0890748f, +0.0199279f, +0.0862030f, -0.2039250f,
  +0.0884898f, -0.6633354f, +0.0543390f, +0.1002425f, -0.0659166f, -0.0731138f, +0.0152895f, -0.0517673f,
  -0.1145994f, +0.0185403f, +0.1144111f, +0.2875639f, +0.0015553f, +0.0129785f, +0.1209334f, -0.2405613f,
  -0.2704759f, -0.2600354f, +0.0025757f, +0.2780783f, -0.0824565f, -0.1001210f, -0.0090878f, +0.1450414f,
  -0.0859469f, +0.0595686f, +0.5857486f, -0.3597560f, -0.2455785f, +0.0891179f, +0.3275647f, -0.0485306f,
  +0.0342953f, +0.1352768f, -0.0045659f, +0.3162141f, +0.0467024f, -0.1294002f, +0.0168234f, +0.2184296f,
  -0.0490254f, +0.0081694f, -0.2733594f, +0.0590172f, -0.1754702f, -0.2169903f, -0.3086564f, +0.3178291f,
  +0.0850548f, -0.1873274f, -0.2051680f, -0.0185459f, -0.2982651f, -0.0421094f, +0.1440614f, +0.3335579f,
  +0.1787711f, +0.2372860f, +0.1119500f, +0.1496198f, -0.2234537f, -0.3400173f, +0.0629985f, +0.1823933f,
  +0.1972046f, +0.5671965f, +0.0302262f, +0.2148194f, +0.1761529f, -0.3679439f, +0.0613031f, +0.0201768f,
  +0.4766055f, -0.1505716f, -0.3050960f, +0.0086970f, +0.2134126f, +0.2528650f, +0.2106204f, +0.0237991f,
  -0.1276861f, -0.0860718f, -0.0544008f, -0.1062525f, +0.0878601f, -0.1654746f, +0.0176029f, -0.1594959f,
  +1.0157353f, +0.3764441f, -0.4800590f, -0.0352814f, +0.1380354f, +0.3651442f, +0.3227854f, -0.1195486f,
  +0.4114082f, +0.6496759f, +0.0060791f, -0.1669059f, +0.0861778f, +0.9063352f, -0.0175569f, +0.8677222f,
  -0.2369546f, +0.1010120f, +0.2477188f, +0.0495424f, +0.3934773f, +0.3426005f, +0.0315022f, +0.1591598f,
  +0.3366512f, +0.4272196f, -0.1322379f, +0.3891993f, +0.0512810f, +0.3709722f, +0.2003187f, -0.1400825f,
  +0.5350379f, -0.0809276f, +0.0048978f, +0.0162712f, +0.2131954f, -0.0294368f, +0.1236088f, -0.0783034f,
  +0.2404167f, +0.0795831f, +0.1662396f, +0.0084747f, +0.0193054f, +0.2542954f, -0.0613496f, -0.1732144f
);

const float biases[4] = float[4](
  +0.0792288f, +0.0276415f, -0.1379497f, -0.0283734f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer32 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.4622100f, +0.2745980f, +0.0465684f, -0.0207503f, +0.0409601f, +0.3674916f, +0.1483717f, -0.1427429f,
  +0.0228984f, +0.3840830f, +0.0499961f, -0.0183036f, +0.0424099f, -0.0054861f, +0.0143213f, +0.1197850f,
  -0.0653629f, +0.3060378f, -0.1591070f, -0.0201895f, +0.3017388f, -0.5244427f, +0.0114781f, -0.0552230f,
  -0.5911090f, +0.0741405f, -0.1963750f, -0.0267649f, +0.0386813f, +0.3088029f, -0.0945006f, -0.0480430f,
  -0.3932780f, -0.0083864f, +0.2108511f, +0.2510940f, +0.1509089f, +0.3490943f, -0.1415193f, +0.2667954f,
  +0.2201201f, +0.1212370f, -0.1391007f, +0.1348927f, +0.0001780f, -0.8806652f, -0.3115460f, +0.2722758f,
  +0.3166968f, +0.1282459f, -0.0539561f, -0.0452461f, -0.0166796f, +0.4868316f, -0.0567568f, -0.1249657f,
  +0.3943042f, -0.0490277f, -0.0151611f, -0.1620570f, -0.0976412f, -0.1205713f, -0.1777265f, -0.0590656f,
  +0.5908998f, +0.0315575f, -0.2216900f, -0.0031167f, +0.0849132f, -0.2786943f, -0.1414501f, +0.1358894f,
  +0.5530655f, +0.6544435f, +0.1874693f, -0.3117285f, +0.2797053f, +0.0003220f, +0.0927294f, +0.0740500f,
  +0.2562099f, +0.2753113f, +0.2913904f, -0.1677121f, +0.0871012f, -0.0544678f, +0.2812547f, -0.4142002f,
  +0.1141584f, +0.1932895f, +0.0301330f, -0.2269277f, +0.4277363f, -0.1124716f, +0.1190009f, +0.2634386f,
  -0.1844336f, -0.1561429f, +0.0435746f, -0.3321795f, -0.1771122f, -0.0340716f, +0.1646225f, +0.1292873f,
  -0.3906626f, +0.0872895f, +0.4710976f, -0.5880894f, -0.1051266f, -0.5880170f, +0.6895432f, +0.0018795f,
  +0.3144242f, -0.5219563f, +0.2961944f, +0.3078433f, -0.2332714f, -0.8030981f, -0.3436148f, +0.2809031f,
  +0.2806186f, +0.0316485f, -0.2458167f, +0.0857147f, +0.0446518f, +0.0622816f, -0.0134940f, +0.3346949f,
  -0.2661785f, -0.0066104f, -0.2563416f, +0.3077020f, +0.2038577f, -0.2868232f, +0.4157899f, +0.3178032f,
  -0.0789080f, +0.0693595f, -0.0708819f, -0.1090501f, -0.1951553f, -0.0991587f, -0.0018801f, +0.3227078f,
  +0.0535033f, -0.3853004f, +0.0984736f, +0.2263345f, +0.1931053f, -0.3632585f, +0.1385139f, -0.1307291f,
  -0.0841432f, -0.5161586f, +0.1622267f, -0.1538219f, +0.2272486f, -0.3484415f, +0.1255494f, +0.1543728f,
  +0.0415302f, -0.1002494f, +0.0689692f, +0.1535053f, +0.0793539f, -0.0582355f, -0.2090496f, -0.0937622f,
  -0.1563282f, -0.2249389f, +0.0554329f, -0.0841003f, -0.0200525f, -0.4923433f, +0.0450319f, +0.0292067f,
  -0.3607394f, +0.2145809f, +0.3330328f, +0.1418094f, +0.1050936f, +0.0881657f, -0.2221201f, +0.0438054f,
  -0.0647838f, +0.3095952f, +0.0799203f, -0.0634021f, -0.0091448f, -0.0756574f, +0.0891854f, -0.0206467f,
  -0.0113298f, -0.2174664f, -0.2711789f, +0.1733911f, -0.1343325f, +0.1144446f, -0.0180827f, +0.2516759f,
  -0.0677794f, -0.3343971f, +0.1620844f, +0.0480411f, -0.0834634f, -0.0859492f, +0.0802010f, +0.3833134f,
  -0.0963073f, -0.0335078f, -0.0600816f, +0.1045248f, -0.2623873f, -0.0005543f, -0.1468146f, +0.0193415f,
  +0.0179551f, +0.2464501f, -0.0392472f, +0.0199419f, -0.3043451f, -0.1876705f, -0.0250053f, +0.0990541f,
  +0.1368509f, +0.2971239f, +0.0769930f, -0.0709421f, -0.1255011f, -0.1993703f, +0.1305248f, -0.3234189f,
  -0.0544105f, -0.0229266f, +0.1060031f, +0.2768930f, -0.0556343f, -0.0929216f, -0.0456271f, -0.0711272f,
  +0.2365783f, +0.4375035f, +0.2061481f, -0.0129170f, +0.3369318f, +0.3302391f, -0.0434532f, +0.3049097f,
  +0.0670077f, +0.0195511f, +0.3015051f, -0.3851077f, -0.1826494f, +0.1885445f, +0.6078981f, -0.3371685f,
  +0.1409829f, +0.1990165f, -0.0901803f, +0.4707661f, +0.0866976f, -0.3015452f, -0.1644378f, +0.0382409f,
  +0.1832237f, +0.2090814f, -0.1086581f, -0.0652872f, -0.1160315f, +0.0949198f, +0.1113022f, +0.2027271f,
  +0.2714353f, -0.3592245f, -0.6188942f, -0.0264238f, -0.0386901f, -0.3682330f, +0.5626627f, +0.1072520f,
  +0.2600365f, +0.1240413f, +0.0357664f, +0.1191121f, -0.1593186f, -0.2462872f, +0.0960455f, +0.2613433f
);

const float biases[4] = float[4](
  -0.0471531f, +0.1183580f, -0.0361567f, +0.0907795f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer33 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1540920f, +0.2708171f, -0.1306177f, -0.0938616f, +0.0307842f, +0.4036618f, -0.5353490f, -0.0995203f,
  +0.1466413f, +0.1251949f, -0.3499443f, -0.2483982f, +0.0434090f, +0.5809810f, -0.0593376f, +0.3104509f,
  -0.0773245f, -0.0633576f, -0.2840969f, +0.3545686f, -0.4134067f, +0.3448049f, -0.2206869f, -0.0268976f,
  -0.1995576f, -0.1103350f, +0.2430648f, +0.1151698f, +0.1051063f, -0.0404251f, +0.0646642f, +0.0990277f,
  +0.0843360f, -0.4577273f, -0.3221098f, -0.6116388f, -0.1930298f, -0.0253802f, +0.1163901f, -0.0898337f,
  -0.0572132f, +0.1105061f, -0.0470593f, +0.1946568f, -0.1966373f, -0.0308999f, +0.0560894f, -0.2243131f,
  +0.0149151f, -0.0490761f, +0.0602109f, -0.0144213f, +0.0531935f, -0.1343553f, -0.1056117f, -0.2269709f,
  -0.2047307f, -0.1841737f, -0.3718837f, +0.1104005f, -0.3336497f, -0.0711372f, -0.0815099f, -0.0583887f,
  -0.0500604f, +0.0875728f, +0.0686950f, -0.0632457f, -0.0681980f, -0.1993032f, -0.0022179f, +0.0835395f,
  +0.0485068f, +0.3344349f, -0.0377367f, +0.0764176f, -0.1727020f, -0.1254474f, -0.0567451f, -0.0193184f,
  +0.3830753f, -0.1287588f, -0.0210703f, +0.1135555f, +0.0586804f, +0.1432860f, +0.0472742f, -0.0325276f,
  -0.0196647f, -0.0988043f, -0.1559611f, +0.0874738f, -0.1884389f, +0.1138135f, -0.0646975f, +0.1960328f,
  -0.1877895f, +0.0926698f, -0.0598774f, +0.0851657f, -0.1358166f, +0.2200400f, -0.0166789f, -0.2497423f,
  +0.1987846f, -0.3106188f, -0.1686742f, +0.3017240f, +0.3115738f, +0.3799055f, -0.2439192f, -0.2483458f,
  +0.2401199f, -0.5339833f, -0.1729987f, -0.9372503f, -0.0695373f, -0.2509301f, +0.1349581f, +0.3885858f,
  +0.0216259f, +0.0625659f, -0.0942096f, +0.0850456f, -0.2787406f, -0.0100845f, -0.1117384f, -0.0666078f,
  -0.0984107f, +0.2399631f, -0.0146610f, +0.2258581f, +0.3495210f, +0.3653932f, +0.0683238f, -0.1070874f,
  -0.1643152f, -0.2721554f, -0.3349347f, -0.0965574f, -0.2836261f, +0.1847767f, -0.2123301f, +0.1110003f,
  +0.1381022f, -0.0116130f, -0.1466591f, -0.0036040f, -0.0926752f, +0.1240271f, +0.1353055f, +0.3925476f,
  -0.0884319f, -0.1000247f, -0.0586120f, -0.1299457f, +0.1063752f, +0.0300443f, +0.1202486f, +0.0230147f,
  +0.0570820f, +0.3972529f, +0.1581394f, -0.2660229f, -0.2374987f, +0.1791468f, -0.3112433f, -0.0720351f,
  +0.1311644f, -0.2604504f, -0.1562223f, -0.0811523f, -0.2787672f, +0.0034517f, +0.5061220f, +0.3202411f,
  -0.1008783f, -0.1113462f, +0.4009942f, -0.1038419f, +0.1927382f, -0.3422448f, -0.0128452f, +0.0854281f,
  -0.2497943f, -0.4317842f, +0.0838564f, -0.4499454f, +0.1252726f, -0.1729912f, -0.1243759f, +0.1432119f,
  -0.0714770f, -0.1000019f, +0.2096281f, +0.0542623f, -0.0905766f, +0.0432048f, +0.1627359f, -0.0138994f,
  -0.0629321f, +0.0244550f, +0.0231234f, +0.0935957f, -0.1793282f, +0.0155983f, +0.2014822f, +0.2493240f,
  -0.1315357f, +0.2656245f, +0.0373169f, +0.0800674f, +0.0063264f, +0.2268565f, +0.1494119f, -0.1752973f,
  +0.1993368f, +0.0145055f, +0.0415221f, +0.1872559f, +0.0048670f, -0.0768699f, +0.0415129f, +0.1230642f,
  +0.3959047f, -0.1208357f, +0.0622708f, -0.0354322f, -0.0530270f, -0.1458858f, -0.1493742f, -0.1310119f,
  +0.2923931f, -0.0166850f, -0.0003497f, -0.2735147f, -0.0227414f, -0.0372903f, +0.1379012f, +0.3234439f,
  +0.1898565f, +0.3572910f, +0.1288621f, -0.0307292f, +0.1157225f, -0.3071400f, -0.3151783f, -0.1470064f,
  +0.6262110f, +0.4486947f, -0.1256728f, -0.5673901f, +0.5841750f, +0.2887727f, -0.4667611f, -0.2303157f,
  +0.3022143f, -0.3203993f, +0.1462499f, -1.1312530f, +0.3887040f, +0.1681339f, -0.2928745f, -0.1894360f,
  -0.3431901f, +0.3636914f, +0.1780010f, +0.2223909f, -0.0269022f, -0.0363964f, +0.1989370f, -0.2204849f,
  -0.3797630f, +0.1377142f, +0.1193623f, +0.4473567f, -0.0269799f, +0.1198990f, +0.1152394f, -0.0936816f,
  -0.3029700f, +0.3490856f, -0.0365115f, -0.2224118f, +0.1279874f, +0.4623300f, +0.2822596f, +0.0468276f
);

const float biases[4] = float[4](
  +0.0278240f, -0.0433071f, +0.1967054f, +0.0671919f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer33 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3481353f, -0.1048578f, -0.0077654f, +0.0858754f, +0.0744547f, +0.0233658f, -0.2891618f, -0.0277816f,
  +0.2568307f, -0.0480792f, +0.0238091f, -0.1839140f, +0.1682781f, +0.2339226f, +0.0121928f, +0.1547404f,
  -0.0420052f, +0.1787091f, -0.0253382f, +0.0208342f, -0.0843220f, +0.1662279f, -0.0080663f, +0.0725573f,
  -0.2832936f, +0.1698175f, -0.3116705f, +0.1759697f, +0.0374127f, +0.4131950f, -0.4071249f, -0.3472323f,
  -0.0479549f, +0.2350781f, -0.0086705f, +0.0727614f, +0.4664851f, -0.0638953f, +0.0254866f, -0.2401270f,
  +0.0117026f, +0.0877532f, -0.1370145f, +0.1833255f, -0.1853516f, -0.2138973f, -0.0673673f, +0.3005580f,
  +0.0316345f, -0.2140516f, -0.2418279f, +0.0432363f, -0.1571103f, +0.1996670f, -0.2717993f, +0.0300329f,
  -0.1791417f, -0.2992072f, -0.4147499f, +0.1609145f, -0.0069142f, -0.0582360f, +0.0396648f, +0.1487525f,
  +0.1085854f, -0.0196618f, +0.2415140f, -0.4207990f, -0.0841266f, +0.1092137f, -0.0352130f, +0.1561122f,
  +0.0671231f, -0.1941359f, +0.0669987f, +0.2339487f, -0.0899561f, -0.1341430f, -0.0933093f, +0.1475447f,
  -0.0128011f, -0.1259831f, -0.0822691f, +0.1679632f, -0.3398453f, +0.2388414f, -0.3496517f, -0.1229014f,
  +0.5803195f, -0.0004683f, +0.0064073f, -0.2075576f, -0.1630035f, +0.4816861f, +0.0510161f, +0.2057966f,
  +0.0642915f, +0.0353166f, -0.0240215f, +0.0978813f, +0.0598449f, +0.2199183f, -0.2806329f, +0.1852944f,
  +0.3651473f, +0.0184275f, -0.2272312f, +0.1008937f, -0.0122563f, -0.1524520f, +0.0264829f, +0.2013459f,
  -0.0095687f, -0.1654633f, -0.2480050f, -0.2275891f, +0.1619966f, +0.4993946f, +0.2759323f, +0.1347964f,
  -0.0605614f, +0.0240526f, -0.0943356f, +0.1263631f, +0.1911458f, +0.1484690f, -0.1128651f, +0.0722543f,
  -0.0184653f, +0.2494078f, +0.0579236f, +0.3886245f, +0.4456682f, +0.2738788f, +0.1230038f, +0.0097899f,
  -0.0111804f, +0.0393821f, +0.0564002f, +0.0648102f, +0.3622781f, +0.0305967f, +0.1748233f, -0.0157588f,
  +0.6228582f, +0.1588558f, -0.1919928f, +0.3361197f, +0.0425738f, -0.0034540f, -0.3664748f, +0.1817253f,
  +0.0093356f, +0.1530010f, -0.2497547f, -0.0285148f, -0.1530382f, +0.2103704f, +0.0372172f, +0.3220225f,
  -0.2946166f, -0.1845380f, -0.2201462f, +0.0669298f, -0.2142777f, -0.0377771f, -0.0797285f, -0.0266129f,
  -0.0527037f, +0.4096532f, -0.1081624f, +0.2577590f, -0.0950371f, -0.3791656f, +0.2345058f, -0.3094001f,
  -0.1439516f, -0.0781514f, -0.2083284f, -0.6252510f, -0.2616924f, -0.0591813f, +0.3760706f, +0.4198644f,
  -0.0013269f, +0.1630088f, +0.0692742f, -0.0265021f, -0.2749301f, -0.0949292f, +0.0432437f, -0.0828371f,
  +0.0338872f, -0.0680403f, +0.1464649f, +0.0494931f, +0.2827306f, +0.1106473f, -0.0485043f, -0.2032265f,
  -0.1703940f, -0.2505447f, -0.1393200f, -0.0596867f, -0.2805475f, -0.1259347f, -0.0156678f, -0.1120136f,
  +0.0262010f, -0.0498184f, +0.0135408f, -0.1398323f, +0.0013150f, -0.0675010f, +0.0034919f, -0.0467628f,
  +0.0094069f, +0.4381371f, -0.1727338f, -0.0643645f, -0.1916360f, -0.1923712f, -0.0331270f, -0.0523248f,
  -0.6229421f, +0.5624155f, -0.3116648f, -0.7170466f, +0.2145133f, -0.0901063f, -0.0388551f, +0.0853418f,
  -0.0639345f, +0.2865954f, +0.0292849f, -0.0281457f, +0.2714013f, -0.1539322f, +0.0323361f, +0.1182527f,
  -0.0802707f, +0.0290840f, -0.2700287f, +0.1378107f, -0.4654958f, +0.0569359f, -0.0383194f, -0.2027861f,
  -0.4973898f, -0.2434527f, +0.2959650f, -0.0885655f, -0.4663857f, +0.2267625f, -0.0734190f, -0.0717192f,
  +0.2694856f, +0.2278441f, +0.3164436f, +0.3434011f, +0.0607757f, +0.1703059f, -0.1184913f, -0.2456403f,
  +0.0246400f, +0.1408952f, +0.0229835f, -0.1085149f, -0.0294221f, +0.0116262f, -0.0062980f, +0.0482953f,
  +0.0624470f, -0.0302203f, +0.2087505f, -0.0191035f, +0.1917534f, +0.2376410f, -0.2155460f, -0.0458560f,
  +0.2083174f, -0.2192250f, +0.0732706f, -0.0341719f, -0.0373471f, -0.0262265f, -0.2067417f, -0.0517589f
);

const float biases[4] = float[4](
  -0.0290883f, +0.1505877f, +0.2213680f, +0.0189292f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer34 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2330922f, -0.1440351f, +0.0494847f, -0.2794164f, +0.0724815f, -0.0864562f, -0.1922214f, +0.1229051f,
  +0.3757829f, -0.0957380f, +0.0478294f, -0.2580180f, +0.0416955f, +0.0105327f, -0.1861196f, -0.2462528f,
  +0.2097439f, -0.0303869f, -0.2422307f, -0.2993490f, +0.1325123f, -0.0583929f, -0.0915935f, -0.0831087f,
  +0.1381070f, -0.2935219f, +0.2021941f, -0.2448650f, +0.0340231f, -0.0394701f, -0.2384253f, +0.5007083f,
  -0.2589406f, -0.0949113f, +0.1450525f, -0.0839520f, +0.0116496f, -0.1230386f, +0.1562405f, -0.6675633f,
  +0.0882652f, -0.0917414f, -0.2706997f, -0.2831549f, +0.3715130f, -0.1259073f, +0.1949445f, -0.0645236f,
  +0.1039792f, +0.0184769f, +0.2011173f, -0.1762712f, -0.0692745f, -0.1212571f, +0.0421106f, -0.1266678f,
  -0.3050667f, +0.0373846f, -0.0906737f, -0.0147848f, -0.0278346f, +0.1167596f, +0.0350459f, +0.0351988f,
  +0.3179882f, -0.0280088f, +0.0225985f, -0.2238556f, -0.2048686f, +0.0935943f, +0.3047604f, +0.2541050f,
  +0.0961120f, +0.2259721f, -0.0509000f, -0.4072519f, -0.0811885f, -0.1182680f, +0.0202145f, -0.2409565f,
  +0.0779902f, -0.0368276f, -0.0254217f, -0.2045196f, -0.0909135f, -0.1229644f, +0.0344841f, +0.0147096f,
  -0.0012695f, +0.1380237f, +0.1734006f, -0.3318778f, +0.1536689f, +0.0425356f, -0.1742674f, -0.0991846f,
  +0.1072543f, +0.3644441f, +0.3639934f, -0.4046394f, -0.1221104f, -0.0196676f, +0.0473763f, -0.0340117f,
  +0.0500726f, +0.4006313f, +0.1895080f, -0.1901668f, -0.3009300f, +0.1402249f, -0.2601292f, -0.0780268f,
  +0.1739028f, +0.0344480f, +0.1060197f, +0.0272760f, -0.0149597f, -0.0157266f, -0.5164561f, -0.2153191f,
  +0.1085636f, +0.2029417f, -0.1858798f, -0.0329037f, +0.0261885f, -0.1463523f, +0.1206493f, -0.0328971f,
  +0.0627857f, +0.2639586f, -0.0150852f, -0.1039448f, -0.1269111f, +0.1583637f, -0.0218264f, -0.0059644f,
  -0.0724028f, -0.0392236f, +0.1338547f, +0.0578142f, +0.1312282f, +0.0816921f, +0.3506276f, +0.0197640f,
  +0.0144098f, +0.1243389f, +0.1150665f, -0.3289629f, -0.6279035f, -0.1959016f, +0.1695177f, -0.1265962f,
  +0.4046836f, +0.0870171f, +0.1585226f, -0.2019838f, +0.3448693f, -0.2625204f, -0.0573980f, +0.1205259f,
  -0.0998985f, -0.1686097f, -0.2587081f, +0.5034996f, +0.0642651f, +0.0483362f, -0.1543929f, +0.1151659f,
  -0.0540601f, +0.1494811f, -0.3125348f, -0.1822272f, -0.2878836f, -0.0010066f, +0.0456005f, -0.1008020f,
  +0.1288415f, +0.4602461f, -0.2838989f, -0.3628018f, +0.0678629f, -0.0152951f, -0.4088291f, +0.4042030f,
  -0.5672945f, -0.0740295f, +0.0379431f, +0.3524545f, +0.3125627f, +0.1230985f, -0.2653020f, +0.2727097f,
  -0.1003522f, -0.0631939f, +0.0569710f, -0.1242735f, -0.1793304f, -0.1113504f, +0.3003604f, -0.2375833f,
  +0.2428588f, -0.0368564f, +0.3529889f, -0.1632287f, -0.1740889f, +0.2531459f, +0.1795357f, -0.1103039f,
  +0.0753206f, -0.0443977f, -0.2364516f, +0.1782074f, -0.0743670f, +0.2695464f, +0.0241836f, +0.0120359f,
  +0.1359262f, +0.1113010f, +0.0970983f, -0.3455527f, +0.2289859f, -0.1200838f, -0.0813697f, -0.2076983f,
  +0.1592573f, +0.0654707f, -0.0739111f, -0.4837382f, -0.1039873f, +0.0711779f, +0.0617194f, +0.1162357f,
  +0.0775872f, -0.0389469f, +0.0325722f, -0.1628797f, +0.0792898f, +0.0180695f, +0.0505436f, -0.0964802f,
  -0.1228503f, +0.9896709f, +0.3071311f, -0.0024894f, -0.4837709f, -0.4528834f, +0.2855445f, +0.3826368f,
  +0.3793675f, +0.1401086f, +0.4633074f, +0.0235975f, -0.3715915f, -0.2632395f, -0.6596085f, +0.4275039f,
  +0.0698689f, +0.0945159f, +0.2953979f, -0.0466217f, -0.1149741f, +0.0122643f, +0.0308990f, +0.2535734f,
  -0.1166037f, +0.0007866f, +0.4216633f, -0.1596773f, +0.0554211f, -0.1281778f, -0.0202774f, +0.1858152f,
  +0.3591004f, -0.0639253f, +0.1767082f, +0.0126361f, +0.1403708f, +0.2932242f, -0.3478005f, +0.0399055f,
  +0.1554511f, +0.1127270f, +0.0867202f, -0.1542094f, -0.1392619f, -0.2048784f, -0.0095853f, +0.1954023f
);

const float biases[4] = float[4](
  +0.0705791f, +0.0055793f, -0.3026965f, -0.0861126f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer34 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0216269f, +0.1541087f, -0.1401653f, -0.0365631f, -0.1312607f, +0.0805666f, -0.2167610f, -0.0609249f,
  +0.1574601f, -0.1525344f, -0.0466237f, -0.1588976f, -0.2349220f, +0.0270120f, +0.2508641f, +0.3554753f,
  +0.0220641f, +0.1221936f, +0.0252897f, -0.1571655f, +0.0425251f, +0.0940754f, +0.1625467f, +0.0587144f,
  +0.0050246f, +0.0716917f, -0.0199290f, +0.2349321f, +0.2423784f, -0.0529864f, -0.0986735f, +0.2029582f,
  +0.0895189f, -0.2077675f, +0.2590238f, -0.0551102f, -0.3083426f, -0.0524986f, -0.1665454f, +0.4122283f,
  -0.2475829f, -0.0510571f, +0.2027891f, -0.0147504f, -0.0332200f, -0.0939045f, +0.2231986f, +0.0305365f,
  +0.1511171f, +0.0218369f, -0.0082198f, +0.0847950f, +0.0076528f, -0.0855825f, -0.0399809f, +0.2087795f,
  -0.1276449f, -0.0459794f, -0.2755257f, +0.1681765f, +0.0564603f, +0.1826704f, -0.0418635f, -0.0534917f,
  +0.1024942f, -0.0060025f, +0.1177193f, +0.0626560f, -0.0090738f, +0.1209442f, +0.1344933f, -0.0992648f,
  +0.3697827f, -0.0403054f, -0.0799469f, -0.4325789f, -0.1847452f, -0.0579947f, -0.3058718f, -0.0172369f,
  +0.2390015f, -0.0188597f, -0.1796293f, -0.3331380f, -0.0953472f, -0.0018094f, -0.1707989f, +0.1914888f,
  -0.1178342f, -0.0604914f, -0.2749824f, +0.0835949f, +0.0544328f, -0.0798615f, -0.2317729f, +0.0599068f,
  +0.1012015f, +0.3103332f, +0.3312759f, -0.2323998f, -0.1345565f, -0.4498133f, -0.3176588f, +0.0330675f,
  -0.1941951f, -0.2093699f, +0.2347353f, -0.8868451f, +0.0516809f, +0.0815476f, -0.2654934f, +0.6261249f,
  -0.5327314f, +0.0069610f, -0.1716266f, +0.0844422f, -0.3093077f, +0.0054743f, +0.2542405f, +0.3193973f,
  -0.1907870f, +0.0474173f, +0.0110665f, -0.0055098f, -0.2725373f, -0.5049073f, -0.0574920f, +0.0035016f,
  -0.1322177f, +0.0673528f, +0.0869078f, -0.3419331f, +0.0209591f, -0.2685752f, -0.0194381f, +0.1888210f,
  -0.3599017f, +0.0989063f, -0.1433944f, +0.0818599f, -0.0626114f, -0.1287903f, -0.0345869f, +0.0231334f,
  +0.0913123f, -0.0030182f, -0.0395432f, +0.0027120f, +0.0148454f, -0.2445406f, -0.0782314f, -0.1618261f,
  +0.0800050f, -0.1717828f, -0.4778163f, +0.3820186f, -0.0139346f, -0.0866546f, +0.2103578f, -0.0170263f,
  -0.1661053f, -0.1744063f, -0.3657081f, +0.2385430f, +0.2494891f, -0.0039727f, -0.2481700f, -0.0336296f,
  +0.0802699f, -0.1043237f, +0.2393662f, -0.1368560f, +0.0882135f, -0.4030688f, -0.2537058f, +0.1608795f,
  -0.1630777f, +0.1460580f, -0.1329379f, -0.3395547f, -0.1371509f, +0.1172004f, +0.1363306f, +0.1018582f,
  +0.0453160f, -0.1472019f, -0.1699442f, -0.0378745f, +0.2392180f, -0.0542236f, -0.0587750f, +0.1374427f,
  +0.0473487f, -0.0325052f, +0.3731828f, -0.0806318f, -0.1503897f, -0.2123678f, -0.0035882f, -0.0284425f,
  +0.1591795f, -0.3583425f, -0.0771009f, -0.1916732f, -0.1310387f, +0.4479496f, +0.0341240f, +0.0028756f,
  +0.0765322f, -0.0796681f, -0.0250875f, +0.0072050f, -0.0869514f, -0.0405018f, +0.1080834f, -0.0157476f,
  +0.0073466f, +0.0085874f, +0.1144866f, +0.3483530f, -0.1905399f, -0.0849641f, +0.1698173f, +0.0587982f,
  -0.1186566f, -0.1394002f, -0.3181207f, -0.1620647f, -0.1179941f, -0.1432833f, +0.0119805f, +0.1894103f,
  -0.1141132f, +0.0049648f, +0.1193056f, +0.2805781f, -0.0569406f, -0.0560755f, +0.0776574f, +0.0650226f,
  +0.1946738f, -0.4065861f, -0.2606498f, +0.1757523f, -0.4091000f, +0.0827146f, -0.1346533f, -0.1067443f,
  +0.1369539f, -0.0628806f, -0.0535511f, -0.2480980f, +0.1059266f, -0.0929010f, +0.0828167f, +0.3768199f,
  -0.6260091f, +0.3412580f, -0.1852346f, +0.1083836f, +0.0811727f, +0.0639814f, -0.3037045f, +0.2029635f,
  +0.0108485f, -0.0823047f, +0.0317266f, +0.0702737f, -0.0946092f, -0.2146547f, +0.0524818f, +0.1404686f,
  -0.1788687f, -0.0400052f, -0.0188634f, -0.0846396f, -0.2273089f, +0.5359122f, -0.0377749f, +0.5265607f,
  +0.0138689f, +0.0648803f, -0.1241824f, +0.0307190f, +0.0741930f, +0.1974771f, -0.1271192f, +0.0046135f
);

const float biases[4] = float[4](
  -0.0374542f, -0.0551082f, +0.0723368f, +0.1843793f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer35 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0473564f, -0.2043934f, +0.0108636f, -0.0855853f, -0.0754317f, +0.0539526f, +0.1275746f, +0.0679400f,
  +0.0626831f, -0.2453338f, -0.1561513f, +0.0602487f, -0.0935055f, -0.2244578f, +0.4310406f, +0.2233742f,
  -0.2900824f, -0.0477096f, +0.1446985f, -0.2307336f, +0.0281681f, -0.1694978f, +0.0998697f, +0.0637335f,
  +0.1125354f, -0.2268023f, -0.0735711f, +0.0038320f, -0.2075045f, +0.0586322f, +0.4820019f, +0.2457915f,
  +0.3268706f, +0.3347589f, +0.1059183f, -0.0927526f, +0.1867340f, +0.0240512f, -0.2265621f, +0.2208856f,
  +0.2068511f, -0.2227992f, +0.7683550f, +0.2714896f, -0.1182081f, +0.1980996f, +0.2639657f, +0.1241708f,
  +0.2096848f, -0.3051114f, +0.0391754f, -0.0946239f, +0.1960150f, +0.0312782f, +0.0260548f, +0.3940485f,
  +0.0992391f, -0.1457574f, -0.1933239f, -0.1465008f, +0.2003215f, -0.1001758f, +0.0381844f, +0.0668202f,
  +0.2470439f, -0.0455580f, +0.3431804f, -0.2155942f, +0.5887672f, -0.0409665f, +0.3172019f, +0.1758740f,
  -0.1195734f, +0.1178495f, -0.0244616f, -0.1773157f, -0.0175662f, +0.0004848f, +0.2461196f, +0.1265497f,
  -0.1957558f, +0.1543453f, -0.1747583f, -0.1117059f, -0.0939709f, -0.0810830f, -0.1083560f, +0.3551383f,
  -0.0989775f, -0.1947557f, -0.0399549f, -0.0149184f, -0.0477834f, -0.0290540f, +0.0571290f, +0.1106390f,
  -0.3523933f, +0.0634788f, +0.7913018f, -0.1044846f, -0.5649276f, +0.3232839f, +0.0954946f, -0.5367170f,
  +0.8602433f, +0.5044073f, -0.2836493f, -0.9168916f, -0.1763874f, +0.0511008f, -0.1566309f, +0.4121205f,
  -0.1873689f, +0.2521931f, -0.0921435f, +0.2807896f, +0.1260802f, -0.1975013f, +0.0233511f, -0.0483999f,
  -0.3318090f, +0.1010836f, +0.6830783f, +0.0579326f, +0.1930051f, +0.0420222f, -0.2820655f, -0.4222638f,
  -0.2948358f, +0.2683059f, +0.0461884f, +0.0512342f, -0.0994177f, +0.2786446f, -0.2823333f, -0.0695720f,
  -0.1535765f, +0.2975807f, -0.0075724f, -0.0410026f, +0.1223683f, -0.0605006f, +0.0320693f, +0.1492979f,
  -0.8033468f, -0.5959648f, +0.5275258f, -0.3969215f, -0.2548568f, +0.1688842f, +0.1707210f, -0.3823657f,
  +0.5080226f, +0.1768195f, -0.0649253f, -0.3024493f, +0.2886387f, -0.1376682f, +0.0694485f, +0.3662459f,
  -0.1490452f, +0.0013539f, -0.0550981f, +0.1131974f, +0.0269352f, -0.0046761f, -0.0435733f, +0.0268129f,
  -0.2109209f, -0.1705908f, +1.4703281f, +0.5066797f, +0.4420660f, +0.6255276f, -0.8190166f, +0.5696191f,
  +0.8364440f, -0.3353927f, +0.9031571f, -0.2063000f, -0.2300768f, +0.5179302f, -0.1527795f, -0.5120205f,
  -0.0134363f, +0.0098764f, +0.1539035f, -0.1211361f, -0.0678350f, -0.0751890f, +0.0067650f, +0.0127269f,
  +0.0898408f, +0.0469698f, -0.0702256f, -0.1577800f, +0.1031483f, +0.0885478f, +0.2902017f, +0.0465885f,
  +0.0351911f, -0.1245166f, -0.1163553f, -0.0056124f, +0.0670495f, +0.1383204f, +0.0671886f, +0.0559171f,
  -0.0218592f, +0.1385071f, +0.0113267f, +0.1194525f, +0.0712281f, -0.0313551f, +0.0290066f, -0.0432905f,
  +0.1011335f, -0.2349119f, -0.1225353f, -0.0317062f, +0.1761374f, +0.0231863f, +0.0221185f, -0.1610520f,
  -0.0056903f, +0.0300664f, -0.0757732f, -0.0820479f, +0.0612318f, -0.1441657f, -0.1148812f, +0.0355407f,
  +0.0147834f, -0.0800142f, +0.0235783f, +0.0679174f, -0.0395972f, +0.0340745f, +0.0563378f, -0.1125679f,
  -0.2479002f, -0.4861262f, +0.1475400f, +0.1855701f, -0.0529713f, +0.5748643f, +0.0208150f, -0.3313110f,
  +0.8180827f, -0.1954609f, -0.3127439f, -0.6891361f, +0.1862220f, -0.1468731f, +0.2638881f, +0.4290355f,
  -0.2426019f, +0.2063492f, -0.1930869f, +0.2802738f, +0.2871083f, -0.2213097f, -0.0217417f, +0.1336650f,
  -0.0353982f, -0.0845688f, +0.1116724f, +0.0378197f, +0.0702686f, +0.1712952f, -0.1603013f, -0.2336164f,
  +0.0503945f, -0.1075990f, -0.1281577f, -0.0406241f, -0.3792715f, -0.1602719f, -0.0796601f, +0.0714892f,
  +0.0093160f, +0.0885194f, -0.1051404f, +0.0430252f, +0.1118418f, -0.0329816f, +0.0457352f, +0.1100857f
);

const float biases[4] = float[4](
  +0.0619806f, +0.1125385f, -0.4311523f, -0.0148450f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer35 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1096460f, +0.0423504f, -0.1322708f, +0.1100030f, -0.1720729f, +0.0368303f, +0.2199955f, -0.0346098f,
  +0.1298596f, -0.2976181f, +0.0744624f, +0.1502286f, +0.1145779f, -0.2007892f, +0.1240445f, +0.2919441f,
  -0.2703288f, +0.0213894f, +0.0240664f, +0.0145259f, -0.2667452f, +0.1062075f, -0.3230997f, -0.1197715f,
  -0.0577664f, +0.0128821f, -0.0307735f, -0.1176521f, -0.1129941f, -0.0748634f, +0.3348922f, -0.2519836f,
  -0.3657374f, -0.4380954f, -0.1546371f, +0.0894268f, +0.2017014f, -0.0090659f, -0.3072217f, -0.1494576f,
  -0.1904474f, +0.1065979f, -0.2534000f, +0.0140841f, -0.1173735f, -0.0258256f, -0.1651981f, +0.0714639f,
  +0.0547277f, +0.0106200f, -0.3410239f, -0.2061252f, -0.1827093f, +0.2322410f, +0.4160259f, -0.1882533f,
  +0.6325660f, -0.0705397f, -0.0543479f, -0.0019869f, -0.2894700f, +0.1038687f, +0.4797073f, +0.0458515f,
  +0.2680557f, -0.1933893f, +0.1450155f, -0.1566641f, -0.3443728f, -0.0075119f, -0.0977834f, +0.1016059f,
  +0.0138571f, +0.2735941f, -0.2551004f, -0.1674389f, +0.0401062f, +0.0958205f, -0.1875448f, +0.0835595f,
  -0.2732125f, -0.0555351f, -0.0251509f, -0.4842852f, +0.0329475f, +0.2822182f, -0.1410029f, +0.1817907f,
  +0.1887030f, +0.0359722f, +0.2489626f, -0.2535723f, +0.0142616f, -0.1303065f, +0.1583549f, +0.3351848f,
  -0.1468000f, -0.3456566f, +0.1205751f, -0.0220303f, -0.2283290f, +0.1625320f, +0.2398495f, +0.1460744f,
  -0.0541764f, -0.1757634f, +0.7503990f, +0.4731606f, -0.8931946f, +0.2543084f, -0.3829357f, -0.0047509f,
  +0.0044549f, -0.1434589f, -0.1487262f, -0.2287965f, +0.1963016f, +0.3468208f, -0.2922890f, +0.3631143f,
  +0.2574862f, +0.3297470f, +0.0360311f, +0.0825063f, +0.0320949f, +0.1154441f, -0.0996020f, +0.5094778f,
  +0.2133403f, +0.5229888f, +0.1085304f, +0.2540391f, +0.6907162f, +0.0202166f, +0.2441874f, +0.3796487f,
  -0.1889020f, -0.3995792f, -0.2960062f, -0.2425684f, +0.1495408f, -0.0765090f, +0.2195100f, +0.4985067f,
  -0.0312748f, +0.1114355f, -0.1202717f, +0.0239912f, -0.3051589f, +0.4489854f, -0.3561206f, +0.0095591f,
  -0.1066530f, +0.4081175f, +0.1501406f, -0.0731030f, -0.4705876f, +0.0253975f, -0.6791228f, +0.4844480f,
  -0.4961653f, +0.4339635f, +0.3056365f, -0.2562001f, -0.2504405f, +0.3799743f, -0.2739325f, +0.0255083f,
  -0.0525733f, +0.0547206f, +0.1415158f, -0.1026010f, +0.1808040f, -0.0656972f, +0.0706412f, -0.0632271f,
  +0.3393239f, +0.2348526f, -0.2809937f, -0.0817207f, -0.4242572f, +0.2136897f, +0.1881300f, -0.0132291f,
  -0.2137831f, +0.4444642f, +0.0779859f, -0.4804546f, +0.3531416f, +0.1991100f, +0.2381766f, -0.1639215f,
  +0.0608222f, -0.0944560f, +0.0538283f, +0.0418751f, +0.2180341f, -0.0570436f, +0.0595349f, +0.1725257f,
  -0.0312320f, +0.2215380f, +0.3123674f, +0.1782538f, +0.2002595f, -0.1905318f, -0.1261026f, +0.2710332f,
  -0.2685044f, +0.1844446f, +0.2201460f, +0.0405279f, +0.3155903f, -0.0612402f, -0.2093169f, -0.0979069f,
  +0.0745761f, +0.1973996f, +0.0914800f, -0.1322038f, +0.0054881f, -0.1634872f, -0.2193449f, -0.2444264f,
  +0.5302703f, +0.1240187f, -0.0051356f, +0.1537348f, +0.2271447f, -0.2173821f, +0.1806858f, +0.1948818f,
  -0.2781212f, +0.2715044f, +0.0203896f, +0.1355846f, -0.2816585f, +0.0159029f, -0.1948790f, -0.1886185f,
  -0.3407469f, -0.1012240f, +0.1438355f, -0.0814343f, +0.1301385f, +0.0829204f, +0.1698731f, -0.1527568f,
  -0.4893860f, -0.1632479f, -0.0454477f, +0.1577755f, -0.5578180f, +0.0626007f, +0.3230692f, -0.0617300f,
  -0.1601649f, +0.1273879f, -0.3478678f, +0.0115438f, -0.6870430f, +0.1333379f, -0.3857134f, +0.0161564f,
  +0.0359191f, -0.0407414f, +0.1078107f, -0.0610060f, -0.0152499f, +0.0074245f, +0.0718625f, +0.0908401f,
  -0.2762214f, +0.2138473f, +0.2400970f, +0.1615678f, -0.0195473f, -0.0084373f, -0.1474179f, -0.2724864f,
  -0.1501237f, +0.1157066f, +0.1027429f, +0.1026209f, +0.3343809f, -0.1194304f, +0.0735333f, -0.0029979f
);

const float biases[4] = float[4](
  +0.1169088f, +0.0423650f, +0.1373003f, +0.0244751f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer36 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1612115f, +0.1120700f, +0.0870233f, -0.0382113f, -0.2211300f, -0.0004280f, -0.1175022f, -0.1116824f,
  +0.0559764f, +0.1111291f, +0.0386643f, +0.1306412f, -0.3229718f, -0.2785288f, -0.0235552f, +0.0454865f,
  +0.0615382f, -0.3413007f, +0.1103008f, +0.2681249f, -0.3199714f, -0.1168573f, -0.1807150f, +0.0459918f,
  -0.5323634f, -0.0660664f, +0.0282886f, +0.2580502f, -0.0341564f, +0.0191009f, +0.2068504f, -0.0653775f,
  -0.1693650f, +0.5283785f, -0.5085384f, -0.6825972f, +0.3963377f, -0.3312854f, -0.0191680f, +0.4423916f,
  -0.0153957f, -0.1253962f, -0.3488158f, +0.0821078f, -0.1195702f, -0.4355803f, +0.0013483f, +0.1406736f,
  -0.1681925f, +0.0523031f, -0.0178217f, +0.0171888f, +0.2501619f, -0.1848163f, +0.2487921f, +0.2071894f,
  -0.3246992f, -0.0910584f, -0.1724906f, +0.2911002f, +0.0192383f, -0.1280845f, +0.1740463f, -0.2680747f,
  -0.0011371f, -0.0726822f, +0.6359702f, -0.0481522f, +0.2755466f, -0.0173866f, -0.0285746f, -0.0727031f,
  -0.1157428f, -0.0352884f, +0.0213232f, +0.0517563f, -0.0191292f, -0.0157767f, -0.0110902f, -0.0561577f,
  -0.0258061f, -0.1138978f, +0.0012981f, -0.0330203f, -0.1454210f, +0.3433278f, +0.0762838f, -0.1618223f,
  +0.1169276f, -0.0559957f, -0.2028553f, -0.0230933f, -0.0566832f, -0.1808528f, -0.0170971f, +0.0392183f,
  +0.0527715f, +0.0363000f, -0.0366034f, -0.1199176f, -0.1497685f, +0.0164577f, -0.3885289f, +0.0793284f,
  -0.1193367f, -0.1600796f, +0.1015163f, +0.3199793f, +0.3891655f, +0.2582881f, -0.0074752f, +0.1346719f,
  -0.0217058f, -0.2798373f, -0.0639013f, +0.4826886f, +0.0617906f, -0.0284172f, -0.0698574f, +0.0745952f,
  -0.0422035f, -0.0594735f, -0.0741417f, +0.0598489f, +0.0407533f, +0.0859669f, -0.1919819f, -0.1315480f,
  -0.0501817f, -0.0889017f, -0.1243401f, +0.0564842f, +0.1050157f, -0.1514179f, +0.2590936f, +0.1305825f,
  -0.0232033f, -0.0018052f, -0.0139662f, +0.1854434f, +0.0612972f, +0.0819108f, -0.0013615f, -0.1377423f,
  +0.1133974f, +0.0236525f, +0.1294908f, -0.1096358f, -0.1613097f, +0.0438508f, -0.0701895f, -0.1109612f,
  -0.0389658f, +0.4236661f, +0.1287456f, -0.0348380f, +0.1451594f, +0.0622584f, +0.1898729f, +0.0374457f,
  +0.0378489f, +0.4080353f, -0.2736786f, -0.0903066f, +0.2793655f, +0.4620900f, -0.0334663f, -0.2560874f,
  +0.2446896f, +0.0551385f, -0.0172627f, +0.1078593f, +0.1597757f, +0.1658330f, -0.0392195f, +0.3066267f,
  +0.4482060f, -0.3124433f, -0.5213388f, +0.1214304f, -0.1102385f, +0.4016756f, -0.0914142f, +0.1161107f,
  -0.0139713f, +0.3748103f, -0.9132797f, +0.0350829f, +0.0713483f, +0.0983743f, -0.2484127f, -0.1972170f,
  +0.1767385f, +0.0514996f, -0.1487660f, -0.0917449f, +0.0923294f, +0.0100324f, +0.0034903f, +0.0614012f,
  +0.1720155f, +0.1097366f, +0.4249857f, +0.0242354f, -0.0298692f, +0.1125177f, -0.0107111f, +0.0293194f,
  -0.0185874f, -0.0852560f, -0.4961615f, +0.1897636f, -0.1120302f, +0.0306084f, +0.1979503f, -0.0882980f,
  -0.1854517f, -0.0398006f, -0.0592141f, +0.1471921f, +0.1085274f, -0.2634147f, +0.2177909f, +0.0992338f,
  -0.0014056f, -0.3028618f, +0.1370286f, +0.0924191f, -0.5449401f, +0.5872929f, +0.1606785f, -0.0616747f,
  +0.0523091f, +0.1695976f, -0.1752218f, +0.2119551f, +0.0014981f, +0.0427295f, -0.0807268f, -0.0118673f,
  +0.3198133f, +0.2414803f, -0.1017434f, -0.4234850f, -0.2412080f, -0.4085673f, -0.0970755f, -0.2606556f,
  +0.4134547f, -1.0357993f, +0.5782616f, +0.9143893f, -0.0247531f, +0.1584292f, -0.2843422f, -0.1505525f,
  -0.0638083f, +0.5407351f, -0.0932745f, -0.2022339f, +0.0820636f, -0.0091238f, -0.2110867f, -0.0913544f,
  -0.0544251f, +0.0482605f, -0.1446099f, +0.0117775f, +0.2905382f, +0.0068975f, +0.3280520f, +0.1680324f,
  -0.2499854f, -0.1850169f, +0.0697322f, +0.1046955f, -0.1880499f, +0.0547565f, +0.2078987f, -0.2300703f,
  -0.0404230f, +0.0119321f, +0.3293224f, -0.1092389f, +0.1247901f, +0.0199980f, +0.0193076f, -0.0812379f
);

const float biases[4] = float[4](
  +0.0537467f, -0.0153845f, -0.1501143f, -0.0451956f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer36 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1313823f, -0.1325885f, -0.0773269f, +0.1855487f, +0.0667202f, +0.0310778f, +0.2298339f, +0.0108759f,
  -0.1997316f, -0.4606786f, +0.3003038f, +0.4650833f, +0.0914992f, +0.5490606f, +0.1794662f, +0.0595356f,
  -0.0200590f, +0.0753858f, -0.1519079f, +0.0176984f, -0.0050083f, +0.2393155f, +0.0294916f, +0.0571326f,
  -0.0155687f, +0.0729260f, +0.0176062f, -0.1204605f, +0.0617350f, -0.0767379f, -0.3261671f, +0.1864466f,
  +0.0662471f, +0.4070661f, +0.1204865f, -0.3812571f, +0.1701062f, -0.6432779f, -0.7652455f, +0.5451873f,
  +0.1047570f, -0.3607822f, -0.4929644f, +0.1325850f, +0.0456555f, -0.2648733f, -0.1772709f, +0.1083784f,
  -0.0366604f, +0.0489880f, +0.0352889f, -0.0270258f, -0.0378338f, -0.1071483f, -0.0626939f, +0.0320465f,
  -0.0451558f, -0.1516625f, -0.4230530f, +0.0983094f, -0.0112575f, +0.0579749f, -0.1998040f, -0.1463708f,
  -0.1163939f, +0.0869886f, -0.1899752f, -0.2214312f, -0.1161492f, -0.0502061f, -0.1343984f, +0.0889371f,
  -0.0401034f, +0.1152592f, +0.0448071f, -0.1890541f, -0.3143652f, +0.0064456f, -0.0835354f, +0.0888119f,
  -0.0277928f, -0.2770534f, -0.0953663f, +0.2627622f, -0.2155708f, -0.0692353f, +0.0737711f, -0.1248043f,
  +0.0795770f, -0.2521209f, +0.0017856f, -0.1488097f, -0.2703699f, +0.3084304f, +0.0056315f, +0.0707067f,
  +0.3299324f, -0.0661489f, -0.1601087f, +0.2894132f, +0.0592694f, +0.1386257f, +0.0633375f, -0.1161421f,
  +0.3267341f, +0.1213713f, -0.5868708f, -0.1977431f, +0.3151791f, -0.0185114f, -0.5746542f, -0.4231496f,
  +0.1684318f, -0.0443589f, -0.6755975f, -0.4142545f, +0.2148035f, -0.0436734f, +0.0578160f, -0.0085999f,
  -0.0137535f, +0.0623191f, -0.0894887f, -0.1096037f, +0.1253583f, -0.0985257f, +0.1233515f, +0.1985294f,
  -0.1200657f, -0.0224255f, -0.0122194f, -0.0275941f, +0.0589908f, +0.0351219f, -0.4948363f, +0.1510074f,
  -0.0027112f, -0.1297081f, -0.0660246f, +0.0960056f, +0.1773497f, -0.1238117f, -0.1482965f, +0.1660924f,
  -0.0039653f, +0.0578729f, +0.0479561f, +0.1464482f, +0.0091840f, +0.0271912f, +0.0246686f, -0.1054560f,
  +0.2314979f, +0.3512868f, +0.0162677f, +0.0188754f, -0.4490246f, +0.7093690f, -0.2637165f, -0.3295555f,
  -0.0214645f, +0.0251639f, -0.4488184f, +0.2109218f, -0.2345583f, -0.3655592f, +0.0469092f, +0.0097850f,
  -0.3465161f, -0.0071727f, +0.0623909f, +0.0194583f, +0.1772104f, +0.1367710f, -0.1554165f, +0.2542877f,
  +0.0359591f, +0.2414563f, +0.0152077f, -0.2095989f, +0.1695451f, -0.3745608f, +0.3880468f, +0.2492897f,
  -0.0507963f, +0.3515078f, +0.4405449f, +0.1835248f, -0.0524716f, +0.6116177f, -0.0824189f, -0.2307995f,
  +0.3075715f, +0.1368489f, -0.1173828f, -0.2072768f, +0.1855287f, +0.1444634f, -0.2678703f, +0.1914291f,
  +0.2923733f, +0.0965894f, -0.1693401f, +0.0107108f, -0.0066166f, +0.0092825f, -0.0640451f, +0.0146620f,
  -0.0322802f, +0.0867409f, -0.2040774f, -0.0489797f, +0.0102416f, +0.1327249f, -0.2497570f, -0.1256234f,
  +0.1382727f, -0.0738648f, -0.0071390f, +0.0444171f, -0.0970781f, -0.0003184f, +0.1309281f, +0.0279745f,
  +0.0248753f, -0.0200950f, -0.1477176f, -0.0062201f, +0.1528504f, -0.4291159f, -0.1562191f, +0.0805279f,
  -0.0295007f, +0.2050343f, +0.0496165f, -0.0576162f, +0.3886437f, +0.2517505f, -0.0038125f, +0.0545749f,
  +0.1927788f, +0.0547972f, -0.1036744f, -0.1612418f, +0.0040800f, -0.1246866f, +0.3025526f, +0.4263240f,
  +0.1806863f, +0.1593125f, +0.4459195f, -0.4082179f, -0.0438128f, -0.4324131f, -0.6141689f, -0.5247227f,
  +0.0167400f, -0.2238769f, -1.0797583f, +0.0262570f, +0.4332119f, -0.0390761f, +0.0225601f, +0.2391221f,
  +0.0171503f, +0.0655797f, -0.0452000f, -0.0140106f, +0.0376802f, +0.0311310f, -0.2327948f, +0.0362258f,
  -0.0116196f, +0.0511159f, -0.3467293f, -0.0778101f, -0.2847443f, -0.0237966f, +0.0160348f, -0.1521899f,
  +0.0066649f, +0.0399933f, -0.0993411f, -0.0076537f, +0.0098260f, -0.0289022f, +0.2390096f, +0.1542381f
);

const float biases[4] = float[4](
  -0.2082362f, -0.0305449f, +0.1041853f, +0.2399876f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer37 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1594479f, +0.2141019f, +0.0266864f, -0.3274953f, -0.1527355f, +0.2014027f, -0.0882814f, +0.0322602f,
  -0.1369463f, +0.8098985f, -0.0758883f, -0.9878073f, +0.3620706f, +0.0428362f, -0.2999036f, +0.3012080f,
  -0.4100846f, +0.0312101f, -0.1483540f, -0.2177804f, -0.0166977f, +0.0494877f, +0.0207373f, -0.1084009f,
  +0.1911269f, -0.1770827f, +0.3486731f, +0.0915619f, +0.2841314f, -0.0270194f, -0.2699538f, +0.2586374f,
  +0.5672343f, +0.3124040f, +0.7152005f, +0.1252332f, -0.4240140f, +0.2406380f, -0.3243810f, -0.3600442f,
  -0.0578973f, +0.0302116f, +0.2369709f, -0.2467760f, +0.2312510f, +0.0962994f, +0.2275399f, -0.1421619f,
  +0.1397990f, -0.0450936f, -0.0228164f, -0.1328369f, +0.0140363f, -0.0213427f, +0.1884592f, +0.0379342f,
  +0.0472741f, -0.0073481f, +0.2380709f, -0.0170923f, +0.1505279f, -0.0386298f, -0.1325150f, +0.1697368f,
  -0.1589562f, -0.0484512f, +0.0605662f, -0.0892266f, +0.2721483f, -0.0928244f, -0.0111163f, -0.2005153f,
  +0.0271858f, +0.1129899f, -0.1451078f, -0.0246928f, +0.0621823f, -0.0624749f, +0.0295609f, -0.1082518f,
  +0.2243512f, +0.2297805f, -0.1561316f, +0.1669521f, -0.0031817f, +0.1446763f, +0.0995781f, +0.1808026f,
  +0.0578730f, +0.0926310f, +0.2162405f, -0.0941664f, +0.0895932f, -0.0817885f, +0.2695288f, -0.0200623f,
  -0.1582648f, -0.7976322f, -0.0767471f, +0.0309687f, +0.0541217f, +0.0074884f, +0.2677075f, +0.2866923f,
  +0.0729861f, -0.3809635f, -0.3747547f, -0.5896608f, -0.2804622f, +0.4196996f, +0.4034086f, -0.1221383f,
  -0.1162769f, +0.2771425f, -0.3691888f, +0.3884929f, +0.1279324f, -0.1774842f, -0.1192605f, +0.3178598f,
  -0.0711736f, -0.2429256f, +0.3286047f, -0.1699953f, -0.0494199f, -0.4001738f, -0.0384178f, +0.2110165f,
  -0.1964084f, -0.1116023f, +0.0338454f, +0.2438954f, +0.0756691f, -0.0170806f, -0.3524999f, -0.0110041f,
  -0.1675178f, -0.1281031f, -0.1088845f, +0.0139497f, -0.1408584f, -0.1788392f, -0.3194427f, -0.1728323f,
  +0.0927517f, -0.3059644f, -0.0713071f, +0.1259092f, -0.0316278f, -0.0976101f, -0.0045942f, +0.1624951f,
  +0.0713903f, -0.0358924f, +0.1831778f, +0.0915685f, -0.2843050f, -0.1015211f, -0.0782030f, -0.1513965f,
  -0.1476029f, +0.0288290f, +0.1047800f, -0.1109561f, +0.1873229f, -0.2173333f, -0.0722156f, -0.0684030f,
  +0.1713210f, +0.1873115f, +0.1047929f, -0.2401628f, +0.2996744f, +0.0556942f, -0.1772197f, +0.0169658f,
  -0.2674095f, +0.7297232f, -0.4585351f, -0.7686216f, +0.1485091f, -0.0247779f, -0.0090457f, +0.2828780f,
  -0.2918563f, +0.5651053f, -0.0418069f, -0.1574961f, +0.1531839f, +0.0521274f, -0.2006831f, -0.0469247f,
  -0.3027073f, -0.0166238f, +0.1181090f, -0.0456959f, -0.1890800f, +0.2082212f, +0.2399053f, +0.0248338f,
  -0.2893496f, +0.0871659f, +0.4967928f, +0.0859277f, -0.2499098f, +0.5936335f, -0.6465657f, -0.1912652f,
  +0.0479722f, +0.0682469f, +0.2551349f, -0.2641670f, -0.1546348f, +0.2907921f, +0.0615981f, -0.1924717f,
  +0.0468254f, +0.4213072f, -0.1143881f, -0.0359783f, -0.0509095f, +0.0128919f, +0.0343843f, +0.0442481f,
  +0.5515695f, +0.0681186f, -0.3392206f, -0.2320030f, +0.7447323f, +0.1446348f, -0.0661893f, -0.3809364f,
  +0.0429456f, -0.1196577f, -0.1857339f, -0.4323356f, +0.4654833f, -0.0328937f, +0.1768048f, -0.0636355f,
  -0.0154874f, +0.0156495f, -0.0873542f, +0.0673191f, -0.2262032f, -0.0662723f, -0.0063348f, +0.0819845f,
  -0.1031750f, -0.6129505f, -0.0641591f, -0.2732268f, +0.2681654f, +0.5678878f, +0.5197353f, +0.1729873f,
  +0.1824596f, -0.4214841f, +0.2194048f, +0.4751728f, -0.6123186f, -0.3149880f, -0.2174844f, -0.1205622f,
  -0.0282067f, +0.1067526f, -0.1431003f, +0.0920068f, -0.1059955f, -0.0747527f, +0.0273442f, -0.0274961f,
  -0.0465382f, -0.1616322f, +0.1072277f, -0.2319596f, -0.0385647f, -0.1557843f, -0.0331530f, +0.0314036f,
  -0.0170286f, -0.1359280f, +0.1028851f, -0.0444035f, +0.0755107f, -0.1650461f, -0.0246449f, -0.1330777f
);

const float biases[4] = float[4](
  +0.0124061f, +0.0467735f, +0.0496132f, +0.0599590f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer37 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.7885070f, +0.1689117f, -0.3574376f, +0.3099530f, +0.3758997f, -0.0264746f, +0.1038429f, +0.1817887f,
  +0.3655998f, -0.0083100f, -0.0561184f, +0.2499076f, +0.0370396f, +0.0591740f, -0.1999978f, -0.1988056f,
  +0.2967788f, +0.0931630f, +0.1228556f, +0.1180106f, -0.0102272f, +0.1263810f, -0.0063704f, -0.0320247f,
  +0.1144530f, -0.0587330f, -0.5986719f, +0.0397978f, -0.3295586f, -0.0756579f, +0.3993274f, -0.5978254f,
  -0.4465969f, -0.0615932f, -0.4705974f, -0.0426166f, -0.0422823f, -0.2266712f, -0.4316125f, +0.1243825f,
  -0.0532611f, +0.0474574f, -0.2155357f, +0.2576721f, -0.1552701f, +0.0313223f, -0.1604182f, -0.0008187f,
  +0.0797201f, -0.0740177f, -0.0502136f, +0.1384425f, +0.0547503f, +0.1846555f, -0.2081287f, -0.0831391f,
  -0.0241812f, +0.0989522f, -0.0801316f, +0.1803452f, +0.0439454f, -0.0097380f, -0.1118503f, +0.0191018f,
  +0.0764567f, -0.0648561f, +0.0088435f, +0.0505061f, -0.1630880f, +0.1102801f, -0.0650677f, +0.0709630f,
  +0.3660164f, +0.1277969f, -0.0533729f, +0.0012516f, +0.1309121f, +0.0368603f, -0.0667702f, +0.1342454f,
  +0.2131653f, +0.1174542f, -0.0188856f, -0.4121351f, +0.5438874f, +0.0882993f, -0.0352400f, +0.0235034f,
  +0.0943247f, -0.1327594f, +0.0190121f, -0.2144809f, +0.3808342f, +0.0281915f, +0.0400627f, +0.0144560f,
  -0.3286419f, -0.1835598f, -0.4381211f, -0.2672367f, +0.0194415f, -0.2545601f, +0.2207971f, +0.3200067f,
  +0.5988576f, -0.0229028f, +0.2839632f, -0.2746877f, +0.7048911f, +0.2596147f, -0.0468229f, -0.2684487f,
  +0.4143932f, -0.0702590f, +0.3659438f, -0.0981688f, +0.0940446f, -0.0707445f, -0.0206549f, -0.2435725f,
  +0.1322582f, +0.0226484f, +0.0196353f, -0.0460377f, -0.2065337f, +0.1190576f, -0.2371204f, +0.0819845f,
  +0.1824648f, -0.1458675f, +0.0051825f, +0.0479591f, -0.1986095f, +0.2607028f, +0.1999518f, -0.1995541f,
  +0.5731949f, -0.1616516f, +0.3621510f, -0.3742653f, -0.3269557f, -0.0558658f, -0.0851602f, +0.0767978f,
  -0.1253853f, +0.3340092f, +0.2349053f, -0.3110704f, -0.1155934f, -0.1325015f, -0.1331642f, -0.0472153f,
  -0.0405484f, +0.4600710f, -0.0269915f, -0.5518577f, +0.5635126f, +0.0858850f, -0.3043678f, +0.4474915f,
  -0.0770669f, -0.4095256f, -0.1056971f, -0.0370406f, -0.2275343f, +0.1271834f, -0.1043322f, -0.1488811f,
  -0.3602069f, -0.8382098f, +0.3432477f, +0.1606387f, -0.0974209f, +0.2377737f, -0.1054475f, +0.2006837f,
  +0.7433903f, +0.6559449f, +0.1707180f, -0.7958155f, -0.3586794f, +0.2870088f, -0.0676731f, -0.3228178f,
  -0.1920294f, +0.2300756f, -0.0450465f, +0.2141933f, +0.3319481f, -0.1138401f, +0.1790403f, -0.0666136f,
  -0.0408788f, +0.1158374f, -0.0988049f, -0.3333630f, -0.1486971f, -0.0633165f, +0.0856382f, -0.2693833f,
  +0.0055850f, +0.1285710f, +0.3858244f, +0.2504348f, +0.3854122f, -0.1959725f, -0.1607291f, +0.1069628f,
  -0.0428983f, +0.0679905f, +0.0682791f, -0.0719644f, +0.1842467f, +0.0016245f, +0.0439492f, -0.0950672f,
  +0.0184937f, +0.0491291f, -0.0512865f, -0.0923730f, +0.0217264f, +0.0152110f, -0.2211352f, -0.0886443f,
  +0.0573371f, +0.0042482f, -0.1738424f, -0.0605773f, -0.1228245f, -0.1679577f, +0.0889813f, +0.2244702f,
  -0.0611535f, +0.0012204f, -0.1053844f, +0.3026835f, -0.0571925f, -0.0402156f, +0.0765919f, +0.2374781f,
  -0.1664949f, -0.4740618f, +0.1140350f, -0.0156431f, +0.0014523f, -0.1286906f, +0.2353350f, +0.1396886f,
  +0.3979846f, -0.0003440f, +0.3562467f, -0.2702600f, +0.0376072f, -0.2319904f, +0.1473134f, -0.0263815f,
  +0.1328209f, +0.0495627f, -0.0762810f, -0.0198665f, +0.1499581f, +0.0414096f, +0.3944574f, +0.0685514f,
  -0.0102891f, -0.0738386f, -0.0926358f, -0.0723013f, -0.0875530f, -0.0591489f, +0.0405697f, -0.0778418f,
  -0.0510753f, -0.1115963f, -0.0908174f, +0.1273068f, -0.0511108f, -0.0426530f, -0.0202047f, +0.0261225f,
  +0.2856661f, -0.0246847f, -0.0917842f, +0.0581063f, -0.0622028f, +0.2463237f, +0.2479853f, +0.1428888f
);

const float biases[4] = float[4](
  -0.0028158f, +0.0189898f, -0.0189845f, +0.0704292f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer38 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0293286f, +0.1776614f, +0.1880388f, -0.0691363f, -0.0435542f, -0.1048615f, +0.0014158f, -0.2679425f,
  +0.2201836f, +0.3834971f, +0.0856810f, +0.0552579f, +0.0857441f, +0.0243375f, -0.1074679f, +0.0431085f,
  -0.0288146f, +0.1531475f, -0.2544822f, -0.0968900f, -0.0192959f, +0.0466336f, -0.0683836f, +0.0090254f,
  -0.0597303f, +0.3425374f, +0.2589002f, -0.2900282f, +0.0266963f, -0.2010568f, +0.0000984f, -0.4194960f,
  +0.0300127f, +0.0046455f, +0.0276088f, +0.0993360f, +0.1259825f, +0.0503345f, +0.5805004f, -0.3265083f,
  +0.2744626f, +0.0716029f, +0.4777972f, -0.0959839f, -0.0538359f, +0.1594759f, -0.7069065f, +0.1262498f,
  -0.0950773f, +0.0234668f, -0.1101619f, +0.0088596f, -0.1138238f, -0.0398351f, +0.1418876f, -0.0574689f,
  -0.0639434f, -0.0380391f, +0.0671418f, -0.5206186f, -0.1674474f, -0.0342398f, -0.6607491f, -0.0185634f,
  -0.1577258f, +0.0301311f, -0.0303412f, -0.1320007f, -0.3930836f, -0.0851238f, +0.4281502f, -0.0658355f,
  +0.0376147f, +0.0934184f, -0.0925359f, +0.0811743f, +0.0129986f, +0.0492774f, -0.0693924f, +0.0991323f,
  -0.2171893f, -0.1303206f, -0.4548638f, -0.0231142f, -0.0596971f, -0.0980622f, +0.0602371f, -0.0117761f,
  +0.1352970f, +0.0855418f, -0.0462598f, -0.0791339f, +0.0474534f, +0.1237186f, -0.2206326f, +0.0030655f,
  -0.0430298f, -0.1368848f, +0.0306466f, -0.0063775f, -0.0543676f, -0.0042956f, -0.0792548f, +0.2525593f,
  -0.0626505f, +0.0875466f, -0.1318572f, +0.1898701f, +0.1544597f, +0.0918562f, -0.3302780f, +0.0842773f,
  -0.0526628f, +0.4263353f, +0.0665128f, +0.1291219f, -0.1805262f, +0.1366376f, -0.2116856f, +0.4040634f,
  +0.1827276f, -0.0637006f, +0.0039478f, -0.0503021f, +0.0591287f, +0.0108631f, +0.1556905f, -0.0556759f,
  -0.2226015f, -0.0732256f, +0.1776296f, -0.1710191f, -0.0719372f, +0.0148433f, -0.3057364f, +0.2166038f,
  -0.0685609f, -0.0240387f, -0.0706677f, -0.1331976f, -0.2903785f, +0.0100773f, +0.0579124f, -0.0328659f,
  -0.0406792f, +0.1237134f, +0.1915564f, +0.0187646f, +0.0370126f, -0.2411465f, +0.1020886f, +0.0885989f,
  -0.0978922f, +0.0372834f, +0.1705554f, -0.0270978f, -0.0025779f, -0.0683686f, -0.0967878f, +0.0212671f,
  -0.1619205f, -0.1624923f, -0.0660144f, +0.2696941f, -0.0223432f, -0.1627768f, -0.1997359f, +0.2295307f,
  -0.0520471f, +0.0530731f, +0.0645832f, -0.4012491f, +0.0979427f, -0.4188797f, -0.0658277f, -0.1237765f,
  +0.1455193f, -0.1270303f, -0.2395238f, -0.1343854f, +0.1770365f, -0.2487300f, +0.1056971f, -0.1686012f,
  +0.2592631f, -0.0619192f, -0.2327747f, -0.0871018f, +0.3328996f, +0.0512243f, +0.0176456f, -0.0841377f,
  +0.2548841f, -0.2333284f, +0.0321429f, +0.0499145f, +0.0195567f, -0.0561342f, -0.0641694f, +0.1060085f,
  -0.1728584f, -0.1205856f, +0.0393336f, +0.3764835f, +0.2558175f, +0.0734328f, +0.0402831f, +0.0612049f,
  +0.1453851f, +0.0627093f, -0.0070576f, -0.0767025f, +0.1901333f, -0.2077584f, -0.2269167f, +0.1557719f,
  +0.0219182f, +0.0631029f, -0.0143862f, +0.1089557f, -0.0211092f, -0.0113962f, +0.0097022f, -0.2662862f,
  -0.2538027f, -0.0761476f, +0.3969291f, +0.2876934f, -0.1404971f, -0.3504495f, +0.1636068f, -0.1465529f,
  -0.2004417f, +0.1234523f, -0.0766541f, +0.0341208f, -0.0371416f, -0.0574085f, -0.3782765f, -0.0280855f,
  -0.1244117f, -0.2375630f, +0.3161870f, -0.8784927f, -0.1381964f, -0.1285411f, +0.1679681f, -0.0613744f,
  +0.5406374f, +0.2385507f, -0.5007131f, -0.0474152f, +0.2045574f, +0.3354904f, -1.1361405f, +0.4464275f,
  -0.0627711f, -0.2847407f, -0.0045987f, -0.2090037f, +0.1016594f, +0.2810137f, +0.2847015f, -0.2335476f,
  -0.0914849f, +0.0253128f, -0.0747339f, +0.2357879f, -0.1628666f, -0.0955329f, -0.2066352f, -0.1770418f,
  -0.3292674f, -0.1443017f, -0.0783502f, +0.0009152f, -0.0804234f, -0.0018233f, -0.2412603f, -0.0611260f,
  -0.4724607f, -0.0499330f, -0.0402544f, -0.0776375f, -0.0925675f, -0.1602900f, +0.0104053f, -0.0016521f
);

const float biases[4] = float[4](
  +0.0025916f, +0.0651137f, -0.0676655f, -0.0701955f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer38 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0169781f, +0.0376449f, -0.1125248f, +0.0220814f, +0.0568835f, +0.0645874f, +0.0177926f, +0.2387753f,
  -0.2402092f, -0.2355854f, -0.6630112f, +0.1031229f, -0.1096040f, -0.1428147f, +0.0176582f, -0.2571434f,
  -0.1923996f, -0.0021730f, -0.2095187f, +0.0960907f, -0.1502517f, -0.0524372f, -0.1175724f, +0.0890376f,
  +0.2469533f, -0.1828172f, +0.1275854f, +0.4189881f, -0.0989025f, +0.2081587f, +0.1155767f, +0.0945947f,
  -0.4945263f, -0.0724801f, +0.9825339f, -0.1096964f, -0.0145550f, +0.2608342f, -0.7222754f, +0.2045851f,
  +0.6095818f, -0.1830213f, +0.3927597f, -0.0857676f, +0.4317489f, -0.0374310f, -0.0855265f, +0.0433699f,
  +0.0102420f, +0.2064188f, +0.0243067f, -0.3500417f, +0.0536239f, -0.0767462f, +0.0542060f, +0.1496884f,
  +0.9381196f, +0.5729696f, -0.1594768f, -0.4008433f, +0.1689754f, -0.1474513f, -0.1484881f, +0.0246156f,
  +0.2467712f, +0.3301315f, +0.0657859f, -0.0784536f, +0.0625859f, -0.0119831f, +0.1343027f, -0.0192618f,
  -0.0271198f, +0.0321350f, -0.2980852f, +0.0631945f, -0.0323179f, +0.0851131f, -0.1007031f, -0.4754425f,
  -0.1196074f, -0.1387859f, +0.1306180f, +0.0176527f, +0.1065888f, -0.0774333f, -0.0933426f, +0.0875664f,
  -0.2691019f, +0.0023919f, -0.2285509f, -0.0477524f, -0.0991975f, +0.0633137f, -0.0869449f, +0.2429289f,
  +0.1587435f, -0.0815016f, +0.1074946f, +0.5407077f, +0.0614151f, +0.1138010f, +0.0434769f, -0.3527476f,
  -0.3730107f, -0.5835592f, -0.1804889f, -0.1068040f, -0.0685756f, +0.2258535f, +0.0295902f, +0.0984663f,
  +0.0598511f, +0.0164592f, -0.1728772f, -0.0277810f, +0.2847812f, +0.8936246f, +0.3869343f, +0.1375603f,
  +0.0238432f, -0.1166965f, +0.2042896f, -0.0906543f, -0.0927985f, +0.0696739f, +0.0291160f, -0.0278312f,
  +0.1038258f, -0.3742735f, +0.1944279f, +0.0381771f, -0.0776641f, +0.2253394f, +0.2482120f, +0.0341538f,
  -0.2653038f, +0.0777210f, +0.1284054f, -0.0584253f, -0.0187451f, +0.0753994f, -0.0691055f, +0.2691467f,
  +0.0972578f, +0.4717655f, +0.0422253f, +0.1001741f, +0.0264510f, -0.1094542f, -0.0827531f, -0.2286230f,
  -0.0679635f, +0.2842353f, +0.1792731f, -0.0111822f, -0.0401606f, -0.1201904f, -0.0552148f, +0.0166397f,
  +0.3218002f, +0.2754277f, +0.5097743f, -0.0737939f, +0.2583872f, +0.2249692f, -0.3004861f, -0.0842773f,
  +0.0695989f, +0.0962714f, +0.1689700f, +0.0133492f, +0.0192239f, -0.1478223f, -0.2217406f, -0.2336268f,
  +0.2057950f, +0.1500993f, +0.4078982f, -0.1336037f, +0.3023983f, +0.2916862f, +0.2518007f, -0.3436303f,
  -0.4647436f, -0.0753918f, -0.6313214f, +0.0026238f, -0.4650287f, -0.1383173f, +0.5372658f, -0.0939177f,
  +0.3503030f, -0.1103070f, +0.1125872f, +0.0870734f, -0.0548839f, +0.0086918f, +0.0577478f, -0.2246401f,
  +0.4663619f, +0.1126902f, +0.0031227f, +0.2969550f, +0.3288282f, +0.0882651f, -0.3414823f, -0.0550384f,
  -0.3603048f, -0.0762211f, +0.0603442f, +0.1993102f, +0.1320851f, -0.0738457f, -0.4470420f, +0.2724582f,
  +0.0026491f, -0.0484721f, +0.1396813f, +0.0412364f, +0.0162338f, -0.1043118f, +0.1401003f, -0.2071888f,
  -0.1136031f, -0.2791376f, +0.1886526f, -0.2531525f, -0.0756904f, -0.1379430f, -0.0094033f, -0.0461686f,
  -0.0609681f, -0.4429306f, +0.0373395f, +0.1393074f, +0.1524385f, -0.1881148f, +0.1930432f, +0.0785911f,
  -0.0935708f, -0.0669735f, -0.0187270f, +0.2629987f, +0.0246654f, -0.0554999f, -0.0039646f, -0.2132857f,
  -0.6683242f, +0.0945518f, -0.0280057f, -0.7037296f, -0.3309703f, -0.3324917f, +0.0728233f, -0.0513701f,
  -0.0017534f, -0.1105970f, -0.3134572f, +0.0094467f, +0.5589898f, -0.3557138f, +0.4644650f, -0.1864702f,
  -0.1833497f, -0.0085900f, -0.0164549f, +0.1904700f, -0.0108317f, -0.1699033f, +0.0557903f, -0.2080799f,
  +0.0679063f, +0.0796326f, -0.0456226f, +0.0149138f, +0.0805550f, -0.3122250f, +0.0219020f, -0.0867681f,
  -0.0749843f, -0.1018600f, +0.2034084f, -0.0391248f, +0.1144432f, -0.2467526f, -0.2713368f, -0.0108171f
);

const float biases[4] = float[4](
  -0.1408406f, -0.0516048f, +0.1033648f, +0.1726726f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer39 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2778498f, -0.1740586f, -0.2550419f, +0.2300650f, +0.0308041f, -0.1364291f, -0.0104719f, +0.1198281f,
  +0.6100149f, -0.2523748f, +0.1248569f, +0.0259638f, +0.2275569f, -0.0394350f, +0.1768965f, +0.1000774f,
  +0.2076582f, +0.0432628f, +0.0350215f, +0.0362738f, +0.1269899f, +0.1277265f, +0.2748370f, +0.1280140f,
  +0.1634015f, -0.0586189f, +0.1089812f, -0.1340439f, +0.0133351f, -0.0554987f, +0.4009960f, -0.0240983f,
  -0.1667376f, +0.1476039f, -0.0750688f, +0.0788344f, -0.0005504f, +0.4847464f, -0.0807527f, -0.1574582f,
  +0.4554200f, -0.0375430f, +0.1552247f, +0.0141428f, -0.2066129f, -0.1338751f, +0.2282066f, +0.1680924f,
  -0.0533500f, -0.0294760f, -0.2285072f, +0.1848355f, -0.0872230f, -0.1041216f, +0.0102483f, +0.0395596f,
  -0.0771269f, +0.1353609f, -0.2230398f, -0.0855189f, -0.1675895f, +0.1270640f, -0.1137802f, +0.0719128f,
  -0.0745521f, +0.0924115f, -0.0912417f, +0.0948089f, +0.0674360f, -0.0522721f, +0.0630497f, +0.0148540f,
  -0.1130195f, -0.0173863f, -0.0140715f, -0.0889381f, -0.1260686f, +0.0789902f, +0.1604903f, -0.0086420f,
  -0.2741876f, +0.1145554f, +0.3216687f, -0.1880178f, -0.0589511f, -0.2004818f, +0.1151889f, -0.1576897f,
  +0.1866955f, +0.1977953f, +0.1363930f, -0.0807921f, -0.0026571f, +0.1190900f, +0.1413466f, -0.1992159f,
  -0.1647119f, +0.1350828f, +0.2563243f, -0.0440838f, -0.0198382f, -0.2384278f, -0.1479778f, -0.1273082f,
  -0.2638764f, -0.3240303f, -0.0795927f, +0.1369509f, +0.2469839f, -0.1714069f, +0.0754379f, -0.1103657f,
  -0.1276401f, +0.4760153f, +0.1269208f, -0.1101544f, +0.3125364f, -0.1244981f, +0.2120449f, +0.0413197f,
  -0.1793795f, -0.0503225f, -0.0316718f, -0.0224348f, +0.1267728f, -0.0232235f, -0.1540312f, -0.0142097f,
  -0.1319761f, -0.3082632f, +0.2983587f, -0.2477197f, +0.2653782f, -0.2647095f, -0.1026613f, -0.2169383f,
  +0.1615010f, +0.0359511f, +0.2732450f, -0.0463902f, -0.1673031f, +0.0443371f, -0.0873175f, -0.1287753f,
  -0.0904806f, +0.0633165f, +0.1328379f, -0.0836950f, +0.0033186f, -0.1050908f, -0.0095166f, -0.0399407f,
  -0.1777203f, +0.0391247f, -0.2423517f, +0.0919890f, -0.2276349f, -0.0434980f, -0.1206876f, +0.0133099f,
  -0.2343954f, +0.0544889f, -0.0299903f, -0.0768495f, -0.0637883f, -0.1031026f, -0.0303438f, -0.0021602f,
  +0.1238315f, -0.1606146f, +0.2511067f, +0.0038819f, +0.1371843f, -0.0395216f, -0.0173227f, +0.0065967f,
  +0.1541628f, +0.3579430f, -0.3202555f, -0.0660134f, -0.0128630f, -0.1495058f, -0.4254695f, -0.1821389f,
  -0.4246424f, -0.1416903f, +0.1741865f, -0.5092984f, -0.3441198f, +0.4939997f, -0.0366383f, -0.1395893f,
  -0.2543757f, -0.0853743f, +0.0754808f, -0.0520789f, +0.1196969f, -0.1119461f, -0.2124969f, -0.1071827f,
  -0.2520892f, +0.0170289f, -0.2065916f, -0.0851386f, +0.0098148f, -0.0716682f, -0.0502454f, +0.0797827f,
  +0.0668087f, +0.4036482f, +0.0472438f, +0.1764379f, -0.0867740f, +0.7378061f, +0.1787309f, +0.0269788f,
  +0.3732785f, -0.5134396f, -0.3615379f, +0.3583042f, -0.0930613f, +0.2290316f, +0.0453484f, -0.3502672f,
  +0.5344623f, -0.4533591f, -0.2590895f, -0.1338205f, +0.5806487f, +0.2867247f, -0.0766901f, +0.1463145f,
  +0.2143964f, -0.1273206f, +0.1127773f, -0.1468336f, +0.2239619f, +0.0237909f, -0.0000347f, -0.0863422f,
  +0.6139063f, -0.2061743f, -0.1672125f, +0.0086427f, -0.1433553f, +0.0763599f, +0.3132392f, -0.0006832f,
  +0.1619496f, -0.0170708f, -0.3395590f, -0.0116331f, +0.1933949f, -0.2563999f, -0.3322773f, +0.2548503f,
  -0.4167674f, -0.1864823f, -0.0645248f, +0.0072233f, +0.1637494f, +0.1208336f, -0.4378387f, -0.1420381f,
  +0.3286160f, -0.1093419f, -0.0086745f, -0.1763196f, +0.0415953f, -0.2851189f, +0.0542638f, -0.1696567f,
  +0.2904811f, -0.0072130f, +0.1693151f, +0.0157092f, +0.0777264f, -0.2768044f, +0.3268712f, +0.3596181f,
  +0.2428972f, +0.2683852f, +0.4327846f, -0.3725713f, -0.0510758f, +0.0899734f, -0.1185840f, -0.1572394f
);

const float biases[4] = float[4](
  +0.0434976f, +0.2096725f, -0.0123183f, -0.3522504f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer39 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1211308f, -0.4664829f, +0.3034301f, +0.0102751f, +0.1068011f, +0.2654720f, -0.1142853f, +0.1756292f,
  +0.3675643f, -0.1236884f, +0.6748869f, +0.1386203f, +0.0873969f, +0.3225484f, -0.2513678f, -0.0920600f,
  +0.2216765f, -0.3983428f, +0.2360861f, -0.1408702f, -0.1533815f, +0.1240699f, +0.0472980f, -0.1598114f,
  +0.1458554f, -0.1420105f, +0.1547279f, +0.1383346f, +0.1915771f, -0.0274088f, -0.4107592f, +0.2345547f,
  +0.4561171f, +0.2156825f, -0.0662890f, -0.1892674f, +0.2671860f, -0.3203868f, +0.4473644f, +0.3302788f,
  -0.1867229f, +0.4070294f, -0.1730214f, +0.0595174f, +0.2262350f, -0.0476541f, -0.0407524f, +0.1611651f,
  -0.0218275f, +0.0274938f, +0.0238140f, -0.0009708f, +0.0295828f, +0.1553333f, -0.0293989f, +0.0858785f,
  -0.1446759f, +0.0511321f, -0.2844820f, -0.0503151f, -0.1943896f, -0.1873656f, +0.0785386f, +0.2633846f,
  +0.0058203f, +0.2770293f, -0.1546322f, +0.1002437f, +0.0442007f, +0.0824094f, +0.0823005f, +0.1835512f,
  +0.0998174f, +0.1992316f, +0.1000207f, -0.0103385f, +0.0486182f, +0.3534671f, -0.0421917f, -0.0302990f,
  +0.3291118f, +0.4059187f, +0.4428907f, -0.0241866f, +0.0258769f, +0.4196526f, -0.2493807f, +0.1772293f,
  +0.6870249f, -0.1578199f, +0.3426698f, -0.0303461f, +0.0213265f, +0.3669276f, +0.3183638f, +0.1073029f,
  -0.0802971f, +0.0303941f, +0.0881285f, +0.0368330f, +0.0458013f, -0.0398110f, -0.1080644f, +0.2048819f,
  +0.1299589f, -0.2795350f, +0.1169185f, -0.2307971f, +0.4683637f, -0.1628089f, -0.0060618f, +0.0302657f,
  -0.1369984f, -0.0840784f, -0.2188994f, +0.2259934f, -0.0027207f, -0.2289769f, +0.0587435f, +0.3792969f,
  +0.0149812f, +0.1028259f, -0.0574226f, -0.0034584f, -0.0265533f, -0.0161197f, -0.1419946f, +0.0346615f,
  -0.1391357f, +0.0012432f, +0.1438317f, -0.2947715f, +0.0239346f, -0.2204133f, -0.0433943f, -0.2383152f,
  -0.0777958f, -0.0242536f, -0.1575911f, -0.0885134f, -0.0871809f, -0.0300861f, +0.0028059f, +0.1093498f,
  +0.1023875f, +0.2443743f, -0.0727987f, +0.0623804f, -0.0299471f, +0.0191476f, +0.0015734f, +0.0385372f,
  +0.2326124f, -0.2857859f, -0.0210520f, +0.0150942f, +0.3172713f, +0.1352748f, -0.0018933f, -0.2263621f,
  +0.0241776f, -0.0269883f, +0.0421324f, -0.0543361f, +0.0670416f, -0.1303296f, +0.0204015f, -0.0409588f,
  -0.2034503f, -0.1713220f, -0.1454151f, -0.0521213f, -0.0328310f, -0.0896277f, +0.1777895f, -0.2255010f,
  -1.1947907f, -1.0783216f, +0.6049029f, +0.4033045f, -0.8726047f, +0.7415802f, -0.0424103f, +0.0039800f,
  +0.7348223f, -0.6646128f, +0.4020382f, +0.1257753f, -0.2274978f, -0.2049871f, +0.1119919f, -0.3932119f,
  +0.1012553f, -0.0583896f, +0.0632435f, -0.0516268f, +0.0416426f, -0.0101001f, -0.0875504f, -0.0310486f,
  +0.0549487f, -0.3017674f, +0.4857273f, +0.0598262f, +0.2058486f, +0.2469454f, -0.1503344f, -0.0436340f,
  +0.3223030f, -0.4568720f, +0.2403111f, +0.0094742f, +0.0639629f, +0.0596190f, +0.0874314f, -0.2379797f,
  -0.2823528f, -0.3747172f, +0.0939665f, -0.1407975f, +0.0928141f, +0.1452118f, +0.2281961f, -0.0421248f,
  -0.1794233f, -0.5587878f, +0.2161282f, -0.0535795f, -0.0146003f, +0.0833537f, +0.0519208f, -0.4694606f,
  -0.0603240f, -0.0249223f, +0.0022894f, -0.0253569f, -0.0005648f, -0.1810086f, -0.1613839f, -0.0895101f,
  -0.1335888f, -0.1418949f, +0.4167681f, -0.0388871f, +0.0547141f, +0.2582563f, -0.2947256f, +0.2440584f,
  -0.0876902f, +0.0335586f, +0.7063042f, +1.2478420f, +0.1104905f, +0.0624705f, -0.5688999f, -0.8902027f,
  +0.2607242f, -0.3087898f, +0.5242310f, -0.4701123f, -0.2385122f, +0.1002518f, +0.0585561f, -0.2748582f,
  +0.0436322f, -0.1614022f, -0.0338195f, -0.0623911f, -0.1084060f, +0.0540309f, +0.1768849f, +0.0986858f,
  +0.1149368f, -0.1670367f, +0.1455942f, -0.1873106f, +0.0305791f, +0.0151088f, +0.0087320f, -0.1126481f,
  +0.0200003f, -0.0593481f, +0.0175766f, -0.0281274f, -0.0586312f, +0.0242170f, -0.0075552f, -0.0554570f
);

const float biases[4] = float[4](
  -0.0590022f, +0.0292054f, -0.3836400f, -0.3408107f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer40 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0063383f, -0.1618294f, -0.1344102f, +0.1323420f, +0.0119158f, -0.0330167f, -0.0734509f, +0.1297701f,
  -0.0136728f, +0.0425226f, -0.2825238f, -0.1247472f, +0.1030143f, -0.0896988f, +0.0949836f, +0.0024957f,
  -0.0233223f, +0.0490325f, -0.0457155f, -0.0642113f, -0.0153009f, -0.0772763f, +0.0811850f, -0.2275972f,
  -0.1330499f, +0.3202386f, -0.0942028f, +0.1581022f, +0.0270313f, +0.1239665f, -0.5789939f, +0.1350007f,
  -0.0811103f, +0.3226393f, +0.5565395f, +0.1425574f, +0.7331142f, -0.3275546f, +0.5460944f, +0.3688682f,
  -0.0714547f, +0.0886388f, -0.0671158f, -0.0365758f, +0.2434985f, -0.0773921f, +0.0772368f, +0.0669922f,
  -0.1045773f, -0.2190212f, +0.3185259f, -0.2635746f, +0.2930996f, -0.3410163f, +0.5020298f, +0.1786997f,
  -0.3592370f, +0.2385897f, -0.1543146f, -0.3487964f, -0.0403158f, +0.0491847f, -0.0475350f, +0.2956823f,
  -0.1490106f, -0.0052104f, +0.0198830f, -0.0924032f, -0.1808815f, -0.0220322f, +0.0939941f, +0.1130810f,
  +0.1322383f, +0.0441784f, -0.3259275f, -0.3068308f, +0.0092077f, +0.0478353f, +0.1332379f, -0.1756743f,
  -0.0440789f, +0.1335189f, +0.1955146f, +0.0139027f, +0.0094652f, -0.0582241f, +0.2086121f, -0.0238350f,
  +0.0115234f, -0.1957811f, -0.0259533f, +0.2328278f, +0.0188572f, -0.0064455f, +0.2029232f, +0.0441007f,
  +0.0113400f, -0.3549964f, +0.0830656f, -0.0721753f, -0.0128613f, +0.0437260f, +0.2733081f, -0.0244596f,
  -0.1058272f, +0.2390254f, -0.0115265f, -0.0090344f, +0.3777408f, -0.0595537f, +0.1800595f, -0.5921677f,
  -0.0659053f, -0.0213107f, +0.0035896f, +0.2061174f, -0.0343195f, +0.0746979f, +0.1640227f, -0.1593235f,
  -0.0318442f, -0.2393032f, +0.0243749f, +0.1613160f, +0.0800208f, +0.0959262f, +0.1557847f, +0.2934225f,
  +0.1143018f, +0.0815817f, -0.1077819f, +0.2615943f, +0.2038915f, -0.3611760f, +0.2662425f, -0.1231863f,
  +0.0945922f, +0.0131333f, +0.0022863f, +0.4318001f, -0.0668141f, -0.1695349f, -0.2147007f, +0.2714703f,
  +0.0536195f, -0.0656898f, -0.0614878f, -0.1332669f, +0.0978906f, +0.0738443f, -0.0382468f, -0.1675687f,
  +0.1968619f, -0.0249939f, -0.2129144f, -0.4061343f, -0.0043148f, -0.0143343f, -0.0551380f, -0.0682165f,
  -0.0192462f, +0.2822879f, +0.0988651f, -0.1907734f, +0.0145505f, -0.0623082f, -0.1343185f, -0.1073031f,
  -0.0169891f, -0.0377046f, +0.0483522f, +0.2413947f, +0.1331376f, -0.0826370f, -0.1906382f, -0.1520146f,
  +0.4678884f, -0.0511614f, -0.3891191f, +0.0995578f, -0.1274200f, -0.3038172f, -0.0982533f, -0.1052960f,
  -0.1712182f, -0.0253668f, +0.0691081f, -0.6180025f, +0.0277748f, -0.0990372f, +0.2158702f, -0.3992222f,
  -0.0525394f, +0.1408717f, -0.1371739f, +0.0038035f, +0.0974584f, -0.2201726f, +0.0402075f, -0.2118718f,
  -0.0794358f, -0.1223120f, +0.0056515f, +0.0644225f, +0.1639455f, -0.2104292f, +0.0254961f, -0.2502319f,
  +0.1616590f, +0.2127852f, -0.0743603f, +0.0522609f, +0.1612119f, +0.0374804f, +0.1337465f, -0.2012673f,
  +0.0375477f, +0.0557099f, +0.3306532f, +0.1435611f, -0.0127559f, +0.1412081f, -0.1434925f, +0.0033142f,
  +0.1176243f, +0.2952126f, +0.0424987f, -0.1675047f, -0.2850050f, +0.2018947f, -0.0124072f, +0.2475690f,
  -0.0493087f, +0.0327545f, +0.1426021f, +0.2343149f, -0.0533915f, +0.1183863f, +0.0115889f, -0.0581064f,
  +0.0406913f, +0.0675304f, -0.4408722f, +0.0713959f, -0.1421249f, +0.1536143f, -0.0185825f, +0.4028031f,
  -0.0191382f, -0.2200229f, +0.1989421f, -0.5411217f, -0.6057718f, +0.0858058f, -0.0644808f, -1.6381392f,
  -0.1321503f, +0.0535073f, +0.0881783f, -0.3912222f, -0.2061901f, +0.0588877f, +0.1474067f, -0.0368045f,
  -0.2828818f, -0.0703302f, +0.2596657f, +0.3486805f, -0.0821853f, -0.2303731f, +0.1655141f, +0.0416363f,
  -0.4887744f, +0.1024165f, +0.0945241f, -0.1161751f, -0.1785458f, +0.1636938f, -0.3865364f, +0.2674845f,
  -0.2055733f, +0.0201210f, +0.0121404f, -0.4108158f, -0.1297725f, +0.1732166f, -0.0080346f, +0.0542481f
);

const float biases[4] = float[4](
  +0.1886927f, -0.1882514f, -0.0506755f, -0.0117759f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer40 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0586683f, +0.1062005f, +0.1322686f, -0.0142367f, -0.0463446f, +0.2008744f, -0.3757259f, +0.0571128f,
  +0.2517693f, +0.1433460f, +0.0483314f, -0.3093674f, -0.1852653f, +0.0296171f, +0.0975527f, -0.1755387f,
  +0.0358850f, +0.2424712f, +0.0124927f, +0.2057693f, +0.0311379f, +0.0479917f, -0.1722821f, -0.0080831f,
  -0.1489989f, -0.3341098f, +0.2081380f, +0.2934624f, +0.0617881f, +0.0525993f, +0.4399325f, +0.2624097f,
  -0.0671530f, +0.0447166f, +0.2481323f, -0.2164169f, -0.0863535f, -0.1554270f, +1.8262472f, -0.0784768f,
  +0.0765537f, +0.1854307f, +0.0790563f, -0.2765326f, -0.0006357f, -0.1352494f, +0.2024255f, -0.3920249f,
  -0.0547631f, +0.0233013f, +0.0409927f, -0.1985275f, -0.2565266f, +0.3826645f, -0.1946923f, +0.1527669f,
  -0.1608640f, +0.0708779f, +0.0211904f, +0.2116316f, -0.2491715f, +0.4061661f, -0.2352401f, -0.2833129f,
  -0.1371400f, -0.0152874f, +0.0622794f, +0.1314605f, -0.0273914f, +0.1470418f, +0.1997781f, -0.3052540f,
  +0.1414211f, -0.2155179f, -0.4629137f, -0.0166990f, -0.1182613f, -0.0190581f, +0.0350562f, -0.0925765f,
  +0.1103329f, +0.5272877f, -0.5161988f, +0.1957005f, -0.2597196f, +0.1353809f, -0.3397875f, -0.1262885f,
  +0.0680804f, +0.1238082f, +0.0585392f, +0.5701411f, -0.0544689f, +0.0864468f, +0.0422500f, -0.2440431f,
  +0.2634012f, +0.0581580f, -0.0678052f, -0.0839886f, +0.0311009f, +0.2033542f, -0.2613747f, +0.0545237f,
  -0.0294080f, +0.5256929f, -0.1917361f, +0.1385522f, -0.1632312f, +0.0596867f, -0.9769626f, +0.2666093f,
  +0.2670937f, +0.2963781f, -0.0115812f, +0.2924176f, +0.1072681f, -0.1457761f, +0.1779476f, -0.0872101f,
  +0.1806390f, -0.1906200f, -0.0234031f, -0.1205815f, +0.2388269f, -0.1789546f, +0.2511345f, +0.1116248f,
  +0.1409373f, +0.2436467f, -0.0532008f, +0.0817574f, +0.1674785f, -0.1895679f, -0.0769392f, -0.0100982f,
  +0.1936683f, -0.0846387f, -0.0380784f, -0.2140623f, +0.3710333f, -0.3510315f, +0.1331817f, -0.0749525f,
  +0.2280812f, +0.0480474f, -0.5674745f, -0.3909152f, +0.0558148f, -0.0346164f, -0.1555338f, -0.3046248f,
  +0.0489871f, -0.0026842f, +0.6513380f, -0.0001370f, -0.0026988f, -0.0257846f, +0.0387801f, +0.1706840f,
  -0.0531130f, -0.1453084f, +0.0247956f, -0.1951835f, +0.1149713f, -0.0346269f, +0.0855072f, -0.0329735f,
  -0.0354769f, -0.2882421f, -0.0464037f, -0.1004067f, -0.0457424f, +0.0379376f, -0.3179051f, -0.0476745f,
  -0.2703852f, -0.4092357f, +0.0114354f, +0.7515229f, -0.1315981f, +0.2699673f, +0.0452357f, +0.4685195f,
  -0.4088766f, -0.0718865f, +0.0938255f, +0.0817706f, -0.2275311f, +0.1056399f, -0.2333369f, +0.5379162f,
  -0.1782167f, -0.0807598f, -0.0156465f, +0.0964424f, -0.0232218f, +0.1750944f, +0.1304443f, +0.2459305f,
  -0.3591715f, -0.2597207f, +0.2421301f, +0.1952713f, -0.1633865f, +0.1868223f, -0.3377352f, +0.0980247f,
  -0.2592900f, -0.1257607f, -0.1207001f, +0.3198914f, -0.2238225f, +0.1776764f, -0.3622744f, -0.0539449f,
  -0.0773530f, -0.0001285f, +0.7893915f, +0.2483303f, -0.0113639f, +0.0169954f, -0.1879292f, +0.3371870f,
  -0.0031886f, +0.0564777f, -0.0484186f, +0.1361431f, -0.0714952f, +0.0071957f, -0.0547887f, +0.1212833f,
  +0.0107605f, +0.0069742f, +0.1024045f, +0.1765690f, +0.0428672f, +0.0107603f, -0.2241260f, -0.1491694f,
  -0.3887492f, -0.3183701f, +0.1465281f, +0.3994044f, -0.0114413f, -0.1108225f, +0.1762864f, +0.2885791f,
  +0.1564434f, -0.1013820f, -0.2814350f, +0.3621487f, -0.3338308f, +0.0534731f, -0.0472016f, +0.7619064f,
  -0.0092576f, +0.0690745f, -0.0257935f, +0.1823526f, +0.1566645f, -0.1405088f, +0.3012903f, -0.1389887f,
  -0.2566961f, +0.0352331f, +0.1757744f, +0.0976939f, -0.1542417f, -0.0397945f, +0.0292302f, +0.2561348f,
  -0.0696624f, +0.2840497f, -0.0241512f, +0.0091959f, +0.0023810f, -0.1934655f, +0.0752217f, +0.1750659f,
  +0.1746755f, +0.1453068f, -0.0436758f, +0.2307852f, +0.3344328f, -0.1353004f, +0.2187245f, -0.1200353f
);

const float biases[4] = float[4](
  -0.1720061f, +0.1574465f, +0.0620863f, +0.1436309f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer41 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1058399f, -0.1460408f, -0.0753467f, +0.0388776f, +0.0476573f, +0.2551897f, -0.0642782f, -0.2118621f,
  -0.0348850f, +0.1207458f, +0.2202148f, -0.0429542f, -0.0597449f, -0.1436432f, -0.0913221f, -0.0634839f,
  -0.0324471f, +0.0638625f, -0.0002225f, -0.0341664f, +0.0468979f, -0.0508916f, -0.0540420f, +0.0876051f,
  -0.1634149f, -0.2634941f, +0.1590851f, +0.0616433f, -0.1258894f, +0.4630076f, +0.0478234f, +0.0883710f,
  +0.6321238f, +0.5261878f, +0.1548218f, +0.5923882f, +0.0176560f, -0.6260250f, -0.1984345f, +0.3455946f,
  -0.1329108f, +0.3237268f, -0.0824809f, -0.0014419f, +0.0542768f, +0.0295335f, -0.0876444f, +0.1539069f,
  +0.1081618f, -0.1132253f, +0.2753919f, +0.0010475f, +0.1102614f, +0.3064340f, -0.1130021f, +0.1051217f,
  +0.0267520f, +0.0858692f, -0.1476141f, +0.1931884f, -0.0046204f, +0.2325908f, +0.0180506f, -0.2090187f,
  -0.2228113f, +0.2376817f, -0.1869941f, +0.1106683f, +0.0482485f, -0.1920861f, -0.0898324f, +0.2549780f,
  -0.3728206f, +0.0833971f, +0.0742030f, -0.2736051f, +0.1134882f, -0.0066444f, +0.2262443f, -0.0457473f,
  +0.1237334f, +0.1215487f, -0.0907651f, -0.0061629f, +0.2968239f, -0.1569439f, -0.0405211f, +0.0620802f,
  -0.0475407f, -0.2040228f, -0.1313625f, -0.0188226f, -0.0468310f, -0.0060941f, -0.1229344f, +0.0314303f,
  +0.4888677f, +0.8693655f, +0.3657756f, +0.4902151f, -0.4099616f, -0.5246473f, -0.6397952f, +0.4031747f,
  +0.0537279f, -0.2888035f, +0.2554228f, -0.5403357f, +0.0480388f, +0.6211616f, +0.1348409f, -0.4768392f,
  +0.2194734f, -0.0784353f, +0.2180913f, -0.0287849f, +0.0188649f, -0.1782537f, +0.1184557f, -0.0185513f,
  +0.0433564f, +0.0949466f, -0.5162320f, +0.2566684f, -0.1136718f, +0.0143967f, +0.4422761f, -0.8664541f,
  -0.0596350f, -0.1517438f, -0.0009704f, -0.4718842f, +0.0170480f, -0.0405792f, +0.0609972f, +0.1250181f,
  +0.0277460f, -0.4171798f, -0.1783801f, +0.0942979f, -0.0633894f, -0.2070378f, -0.1328067f, +0.0875438f,
  -0.0432385f, +0.2983686f, -0.1639933f, -0.1154402f, -0.0817667f, -0.5486909f, +0.3208842f, -0.2074002f,
  -0.3784780f, +0.1427499f, -0.0627204f, -0.2319445f, +0.1704731f, -0.3869244f, +0.2474152f, +0.4222209f,
  -0.1429060f, +0.1523394f, -0.0398918f, -0.0465124f, +0.1197572f, -0.0009074f, -0.0018491f, -0.0955730f,
  +0.0146279f, -0.0100427f, -0.0346048f, +0.0165968f, +0.0904192f, +0.0171935f, -0.1241851f, -0.1595699f,
  +0.0465368f, +0.2818285f, +0.2517664f, +0.0726848f, +0.2717690f, -0.0255331f, +0.2407093f, -0.1874867f,
  +0.1540882f, -0.0814431f, +0.1683803f, -0.1212462f, -0.0726060f, -0.0118916f, +0.0855123f, +0.0035137f,
  -0.0588459f, +0.0735086f, -0.0600860f, -0.0096038f, -0.0244673f, -0.0268412f, -0.0078088f, +0.0067302f,
  -0.0293576f, -0.0255826f, -0.0051267f, -0.0061579f, -0.0098516f, -0.0299824f, +0.0037551f, -0.0208665f,
  -0.0341619f, +0.0578747f, +0.0002569f, +0.0209117f, -0.0079532f, +0.0040847f, +0.0156302f, -0.0071033f,
  -0.1388135f, +0.1769455f, +0.1939109f, -0.2389797f, +0.0110943f, +0.0315011f, -0.0522387f, +0.1333418f,
  +0.1118006f, +0.2140346f, +0.1569605f, -0.0042289f, +0.0634356f, -0.2553498f, +0.2757843f, +0.2229909f,
  +0.0907470f, +0.3745979f, -0.1358107f, -0.0203265f, -0.0562468f, +0.5248561f, +0.1310974f, +0.4231122f,
  +0.1296698f, -0.0923701f, +0.2881104f, -0.2016931f, -0.0546595f, -0.3685988f, -0.0157454f, +0.0952946f,
  -0.1956895f, -0.1520489f, +0.0741835f, -0.0625423f, -0.0116029f, -0.3988171f, -0.4079844f, +0.4068608f,
  +0.3506513f, -0.2659154f, -0.1101893f, +0.1054679f, +0.0929742f, -0.0723674f, +0.3407765f, +0.5242407f,
  -0.0157922f, -0.0397140f, +0.2608356f, -0.2364522f, +0.1727568f, -0.1323988f, -0.2594955f, -0.1925862f,
  +0.0764622f, +0.1302273f, +0.0413244f, +0.0744796f, +0.2325542f, -0.4230661f, +0.2340933f, +0.0914358f,
  +0.2961492f, -0.0603315f, -0.0836942f, +0.0914497f, -0.0478900f, +0.0199027f, +0.1347621f, +0.2839362f
);

const float biases[4] = float[4](
  -0.0607115f, -0.0600088f, -0.5816478f, -0.0073819f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer41 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1746473f, +0.0299958f, -0.1452818f, +0.0820196f, +0.0349974f, +0.0139545f, +0.0035200f, +0.3528091f,
  +0.2989209f, +0.0399735f, -0.3835673f, +0.1236678f, +0.3170586f, +0.0164477f, -0.4812115f, -0.6540756f,
  -0.1801843f, -0.0478787f, -0.0761905f, -0.2091015f, -0.0062071f, +0.0075698f, +0.1131694f, +0.3230558f,
  -0.2016431f, +0.1571085f, +0.0408209f, -0.1231115f, -0.0403923f, +0.1920372f, -0.0620349f, -0.1290020f,
  +0.0587705f, +0.2365899f, -0.2249860f, -0.4644687f, +0.3272658f, +0.0337564f, -0.1364781f, -0.9169234f,
  -0.1850881f, -0.1485848f, +0.0506619f, -0.2345156f, -0.0330207f, +0.3190216f, +0.0303028f, +0.3717755f,
  +0.0125861f, +0.2315701f, -0.1555750f, +0.1025173f, -0.0883590f, +0.1384832f, -0.1237395f, -0.1118757f,
  -0.0672701f, +0.0744954f, +0.0078088f, +0.2320381f, -0.2295127f, -0.2251291f, -0.1382238f, +0.0002743f,
  +0.0716709f, -0.0756507f, -0.1437732f, -0.3344126f, -0.0675048f, -0.2772903f, +0.1132694f, +0.2038726f,
  -0.2788945f, +0.0551017f, -0.0413649f, -0.0227733f, -0.1699174f, -0.0570934f, +0.0721956f, +0.1246501f,
  -0.2235698f, -0.2240013f, -0.0816736f, -0.1386616f, +0.0157419f, +0.2820622f, +0.0467630f, -0.3407017f,
  +0.0002739f, -0.1526278f, +0.0055722f, -0.0746759f, -0.0113352f, +0.0103242f, +0.0285396f, -0.1875761f,
  +0.1717708f, +0.2242610f, +0.1915672f, -0.1194228f, -0.0191473f, -0.3923658f, -0.2690256f, +0.0698313f,
  -0.3441090f, -0.2623781f, +0.3350031f, -0.0472400f, +0.0290237f, +0.2001911f, -0.1959565f, +0.3180182f,
  +0.2492720f, -0.3945813f, +0.2938472f, -0.0678650f, -0.1454586f, +0.3178309f, +0.2072474f, -0.3024221f,
  -0.1605479f, +0.1484330f, -0.2206782f, +0.1042497f, -0.1600186f, -0.2789831f, +0.2694182f, +0.0449738f,
  -0.0110358f, +0.0677750f, -0.3069477f, -0.5552782f, -0.2078331f, -0.1356459f, +0.1292740f, +0.2690794f,
  -0.0181247f, -0.0686897f, -0.0490985f, +0.1019062f, +0.0632131f, -0.0402533f, -0.0586197f, +0.0018686f,
  -0.0321122f, +0.1047306f, -0.0857210f, -0.1127543f, +0.1114709f, +0.1539594f, +0.1817727f, -0.2380544f,
  -0.1937755f, +0.1368253f, +0.0039039f, -0.1595055f, -0.0237393f, -0.1014518f, +0.0728280f, -0.1549218f,
  -0.3485575f, -0.2153372f, +0.0530598f, -0.2384908f, +0.0320908f, -0.2358373f, +0.0657769f, -0.2632658f,
  -0.4015382f, -0.1947207f, +0.3566116f, -0.0608620f, -0.2835580f, -0.1933605f, +0.4142562f, +0.3225790f,
  +0.1484675f, -0.2381450f, +0.3706312f, -0.1489654f, -0.8060978f, -0.1247028f, +0.2476962f, -0.0691441f,
  -0.1869378f, -0.2629325f, +0.1657662f, -0.2549230f, +0.3089826f, -0.3310859f, +0.3045831f, -0.1535109f,
  +0.1246302f, -0.3502280f, +0.1111964f, -0.2382971f, +0.2242376f, -0.1807201f, +0.0349862f, -0.3648840f,
  +0.0807067f, -0.1527459f, +0.3102184f, +0.0869289f, +0.2522978f, +0.1545245f, -0.1264034f, -0.2131077f,
  +0.2351314f, -0.4257904f, +0.1868495f, -0.2018885f, +0.0532240f, +0.1337155f, +0.3829813f, -0.0451259f,
  -0.0621528f, +0.1462441f, -0.2745406f, +0.0936660f, -0.0363260f, +0.1065566f, -0.2693025f, -0.2121069f,
  -0.1710790f, -0.2231243f, +0.0654336f, +0.1407564f, -0.2642584f, -0.0976956f, -0.1011970f, -0.2068947f,
  +0.4160440f, +0.1663266f, +0.0812749f, +0.0339168f, +0.1539047f, +0.0415287f, +0.2478288f, +0.1767931f,
  -0.2253981f, -0.1477480f, -0.0799291f, -0.1312408f, +0.2744808f, -0.1168101f, +0.0472613f, -0.4471828f,
  -0.4390663f, -0.6245943f, +0.3803463f, -0.2864638f, -0.5810305f, -0.0665841f, +0.6940019f, +0.9706149f,
  +0.3382943f, -0.0852277f, -0.1255768f, -0.0333684f, +0.4617938f, +0.1497827f, +0.2747372f, +0.0656082f,
  +0.1001987f, +0.2048730f, +0.1308363f, -0.1591252f, +0.0767310f, -0.1853852f, -0.3665739f, +0.0220248f,
  +0.4327121f, +0.2331850f, +0.4870618f, +0.0660282f, +0.4051322f, -0.0666131f, +0.2941467f, -0.1800824f,
  +0.2612039f, +0.0808817f, +0.0412038f, +0.0535092f, -0.0828643f, +0.0731679f, +0.0933480f, +0.2428517f
);

const float biases[4] = float[4](
  +0.0582678f, -0.0609722f, -0.0147633f, -0.0059883f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer42 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1513297f, +0.0121333f, +0.0123844f, -0.1603307f, +0.0018631f, -0.1019933f, +0.1523486f, -0.0684061f,
  +0.1492163f, -0.0457528f, +0.1891110f, -0.1655757f, -0.1029288f, -0.3882492f, -0.1478038f, -0.3951015f,
  +0.0739101f, -0.0120603f, +0.0298390f, -0.1717442f, +0.0589299f, +0.0578804f, -0.1305307f, +0.0891397f,
  +0.0411526f, +0.0756589f, -0.2603022f, -0.1453530f, +0.2098611f, +0.3032429f, +0.0326891f, +0.1080417f,
  +0.4512584f, -0.2690865f, +0.0795087f, +0.2312723f, -0.1413632f, -0.2741060f, -0.0422988f, -0.1456651f,
  -0.6733029f, +0.6749287f, -0.4465061f, +0.1871373f, -0.0915901f, +0.2717674f, -0.2800796f, +0.0273778f,
  -0.0507205f, +0.0249642f, +0.0457576f, -0.2467232f, +0.0775569f, +0.0732888f, +0.1562427f, +0.0970060f,
  -0.0782703f, -0.1010950f, -0.1279667f, +0.0642606f, -0.2558989f, -0.0861187f, -0.2415958f, -0.1018868f,
  +0.1933284f, +0.0548781f, -0.5881535f, -0.0403919f, +0.0239497f, -0.1479218f, +0.3961552f, -0.1277138f,
  -0.0312505f, -0.0364635f, +0.0132208f, +0.0297784f, -0.0962063f, -0.0167613f, +0.1196392f, -0.0906987f,
  -0.0232679f, +0.2299795f, -0.0925019f, +0.0301535f, +0.0455558f, -0.1360124f, +0.1758734f, +0.2050971f,
  -0.1146547f, +0.0560170f, -0.1228215f, +0.0168760f, -0.0914841f, +0.0756946f, -0.2039437f, -0.2026959f,
  -0.0727954f, +0.0606382f, +0.1040960f, +0.1336125f, +0.0954736f, +0.0589605f, +0.0422896f, -0.0858124f,
  +0.0850921f, -0.3681392f, -0.3295141f, -0.2265480f, -0.1001802f, +0.3394063f, +0.1082326f, +0.0406110f,
  -0.1777855f, -0.4568297f, -0.0627595f, +0.1696643f, -0.1171192f, +0.1677920f, +0.2382376f, -0.1977847f,
  -0.0902760f, -0.0511447f, -0.0717614f, -0.3491082f, -0.1106454f, -0.0299110f, +0.0855521f, +0.0074270f,
  -0.0761825f, +0.0178851f, +0.4763643f, +0.0765451f, +0.0085723f, +0.0649432f, -0.1650221f, +0.0370614f,
  -0.0603263f, +0.1725649f, -0.1536176f, -0.0110535f, -0.0679189f, +0.0070735f, +0.1634958f, +0.1478629f,
  -0.0047751f, +0.0033144f, +0.0122393f, +0.0667219f, +0.1377813f, -0.0614237f, +0.0777650f, -0.1117084f,
  +0.2425918f, -0.1263982f, -0.0453468f, +0.1521928f, -0.0376493f, +0.0116512f, +0.1308763f, -0.1842868f,
  -0.0772470f, +0.1207623f, -0.2085177f, -0.0093720f, +0.0615330f, +0.0913208f, +0.1413500f, +0.0670034f,
  -0.2244852f, +0.0600243f, +0.2041979f, -0.2148944f, +0.2441968f, +0.1234973f, -0.3921029f, +0.3733115f,
  -0.3517645f, -0.2365810f, -0.2181612f, -0.1707121f, +0.1266507f, +0.2246077f, +0.3463407f, -0.1222131f,
  +0.1154647f, +0.4432332f, +0.1141408f, -0.3014058f, +0.1771954f, +0.0075458f, -0.0885007f, +0.1212356f,
  +0.0199768f, -0.0086367f, +0.0974744f, +0.1683777f, +0.1119496f, -0.1457022f, -0.0384019f, -0.2216458f,
  -0.3471751f, +0.0302349f, +0.2193453f, -0.1996218f, +0.3132203f, +0.1201946f, -0.0346050f, +0.0821199f,
  -0.1275992f, +0.2719113f, +0.6685515f, -0.1042999f, -0.0012941f, +0.0853605f, -0.1348313f, +0.0178270f,
  -0.2162332f, -0.1505934f, +0.0062814f, -0.1640844f, +0.2169432f, +0.0189553f, -0.1180502f, -0.2438670f,
  -0.3965200f, +0.4312530f, -0.0319903f, -0.0543661f, +0.0512425f, -0.1953945f, +0.3244875f, +0.0206472f,
  -0.1471769f, +0.0581351f, -0.1454137f, +0.0252186f, +0.0256420f, +0.0841810f, +0.0230743f, +0.1268784f,
  -0.4682213f, -0.0361556f, -0.0345765f, -0.2459096f, -0.0158513f, +0.1724099f, +0.2798597f, -0.1739455f,
  +0.0926658f, -0.0260496f, -0.3261617f, -0.0205629f, +0.3327859f, +0.5550329f, +0.4310322f, -0.8987002f,
  -0.1050445f, +0.7672215f, -0.1103233f, +0.0293058f, +0.1507824f, +0.1753235f, +0.1105530f, +0.0059790f,
  -0.2759473f, -0.1127507f, -0.0905947f, -0.1600469f, +0.1245499f, +0.0726209f, +0.1370943f, -0.0694544f,
  -0.2496471f, -0.1356160f, -0.1274769f, +0.0453712f, -0.0638682f, +0.1686346f, +0.1593340f, +0.0109102f,
  +0.1185737f, -0.0451302f, -0.1595538f, -0.0909763f, -0.0558309f, -0.1250207f, +0.3926019f, -0.1428708f
);

const float biases[4] = float[4](
  +0.0954383f, -0.0984475f, +0.0994372f, -0.0188807f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer42 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1016941f, +0.0124883f, -0.0059839f, -0.0787425f, -0.0660978f, +0.1062542f, -0.1003901f, -0.1159748f,
  -0.4659241f, +0.0744948f, -0.2779880f, -0.1413362f, +0.0983721f, +0.0687692f, +0.6239805f, +0.5633664f,
  -0.0749479f, -0.1166948f, -0.2935790f, -0.0166216f, -0.0421193f, -0.1368517f, +0.1647136f, +0.0692314f,
  +0.3117718f, +0.0639730f, +0.1593723f, -0.0876796f, -0.4620997f, -0.5177111f, +0.2945815f, -0.3256229f,
  -0.2033972f, +0.1966824f, -0.6087847f, +0.1138030f, -0.1552844f, +0.0286957f, -0.9141916f, -0.2391555f,
  -0.1089186f, +0.3243826f, -0.2379540f, +0.0039090f, +0.1138374f, +0.0395423f, -0.4189866f, +0.1476878f,
  +0.1240276f, +0.0070328f, -0.2951211f, +0.2485041f, -0.1340130f, +0.0578186f, -0.0101405f, -0.0181812f,
  +0.3778399f, +0.0796518f, -0.3031653f, +0.1645793f, -0.3337118f, +0.0062167f, -0.1182031f, -0.0332331f,
  +0.1953716f, -0.0589386f, +0.4337742f, +0.2974769f, -0.1246857f, -0.0630586f, -0.1702064f, -0.1254507f,
  -0.0759538f, +0.0169903f, +0.1481564f, +0.0034382f, -0.1189460f, -0.1820018f, +0.1151181f, +0.0561353f,
  -0.2702485f, -0.2280220f, -0.0384346f, -0.2804877f, -0.0227457f, +0.0219213f, -0.0057120f, +0.4953741f,
  -0.1581896f, -0.0353067f, -0.1104215f, -0.1043971f, +0.0167675f, -0.0634166f, +0.1603858f, +0.4572053f,
  +0.1759016f, +0.0597192f, +0.0538439f, +0.1547318f, -0.4394357f, +0.0184172f, -0.0841665f, +0.2314052f,
  -0.5264668f, -0.2801306f, -0.0199381f, +0.3267114f, +0.1920349f, +0.6555193f, -0.1291646f, +0.8957094f,
  +0.5805299f, -0.9235346f, -0.1688968f, +0.0464039f, +0.0853539f, +0.0049052f, +0.5977542f, -0.1113919f,
  +0.2918624f, +0.2290781f, +0.2952814f, +0.0604412f, -0.2092405f, +0.0159445f, -0.2449216f, +0.2488196f,
  +0.0920149f, -0.2354778f, -0.2966626f, +0.0056777f, +0.0992699f, +0.0427610f, -0.2121809f, -0.0012744f,
  -0.0286149f, -0.0255234f, +0.7718797f, +0.2121022f, -0.0036233f, +0.0480603f, -0.2114293f, +0.0184941f,
  -0.1560944f, -0.1465898f, +0.0662799f, +0.0202401f, -0.2205415f, -0.0974581f, -0.0622987f, -0.3540521f,
  +0.3424348f, +0.2617288f, -0.1618648f, +0.3724151f, -0.0437724f, +0.0498302f, +0.2796860f, -0.1002143f,
  -0.2083410f, +0.1845171f, -0.0330449f, +0.2394946f, -0.0881803f, +0.0395184f, -0.1199786f, -0.3848196f,
  -0.0294999f, +0.0606993f, +0.0011876f, +0.3654279f, -0.0754826f, +0.0295410f, -0.4072949f, -0.0991063f,
  +0.0922768f, -0.3164334f, -1.1334746f, -0.0668883f, -0.1669328f, -0.1883897f, +0.1789799f, -0.6724969f,
  +0.1311857f, -0.4923649f, -0.0034885f, +0.1571601f, -0.1118154f, +0.0204015f, +0.3221959f, -0.1297684f,
  -0.1052209f, -0.0396480f, -0.2175414f, +0.0243159f, -0.0983907f, -0.0243480f, -0.1178917f, -0.1769473f,
  +0.0249265f, -0.1247594f, -1.1589466f, +0.1511283f, +0.0673904f, +0.1333815f, -0.0669786f, +0.1470636f,
  +0.0633002f, -0.2527123f, -1.4079413f, +0.1440795f, -0.1672335f, +0.0296626f, +0.0837920f, +0.0838742f,
  -0.0738170f, -0.0184952f, -0.2157301f, -0.0418567f, +0.1585236f, +0.0661527f, -0.0342472f, +0.2387939f,
  -0.5545254f, -0.1957910f, +0.0716686f, -0.0207866f, +0.0189443f, +0.3947616f, -0.0609798f, +0.4160857f,
  +0.3790531f, -0.0801520f, +0.0833899f, +0.0877665f, -0.0316882f, +0.0050163f, -0.0757497f, +0.2026488f,
  -0.2561675f, -0.1113569f, -0.1876013f, -0.3295213f, -0.0659499f, -0.0336429f, +0.2018113f, +0.1663075f,
  -0.4201768f, -0.0845603f, +0.0469274f, -0.0070613f, +0.7067414f, +0.9350992f, -0.3592465f, +0.3637719f,
  +0.2207127f, +0.5762668f, +0.3500000f, -0.2153754f, +0.1468031f, -0.0530140f, -0.1292233f, +0.1844298f,
  -0.1954885f, +0.0550136f, -0.1179029f, -0.3344298f, +0.0860626f, +0.0052666f, +0.0480534f, +0.0612155f,
  -0.2530411f, +0.1838137f, -0.5007336f, -0.2369124f, +0.1703140f, +0.1844323f, -0.1565451f, +0.1213241f,
  -0.0043676f, +0.1693104f, +0.6696890f, -0.2175522f, +0.0728638f, -0.0387711f, -0.0253857f, +0.0146436f
);

const float biases[4] = float[4](
  -0.0378907f, +0.0258113f, +0.0440405f, +0.1691611f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer43 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2175953f, +0.0006554f, -0.0924306f, -0.1848439f, -0.0561984f, -0.1822524f, -0.0340890f, -0.3677144f,
  +0.0883171f, -0.2960079f, -0.2628778f, +0.1399400f, -0.4706365f, +0.1546101f, +0.0382024f, -0.0342600f,
  +0.2544705f, +0.4225793f, -0.4627484f, +0.3308744f, +0.0726581f, +0.0942249f, -0.2331223f, -0.2983109f,
  +0.3257185f, +0.0339091f, -0.0782042f, +0.0338951f, -0.2098277f, +0.0202434f, -0.1084221f, +0.0806612f,
  +0.1064757f, -0.2297004f, -0.5889624f, -0.4289774f, -0.9596652f, -0.2415777f, +0.4119490f, +0.2310487f,
  -0.0174035f, +0.2221343f, -0.3203515f, +0.1979774f, -0.0977682f, +0.2217967f, -0.4506063f, -0.0388396f,
  -0.2690096f, -0.2024043f, -0.1492010f, -0.0524417f, +0.1497566f, -0.0231981f, -0.1192904f, -0.3624651f,
  -0.0501579f, -0.2002510f, -0.3743122f, +0.0183277f, +0.1297091f, +0.1616823f, +0.0956121f, -0.4757650f,
  +0.0580548f, -0.0125581f, -0.4284784f, +0.2732147f, +0.0963780f, +0.2103662f, -0.2381320f, -0.3300109f,
  -0.1048221f, +0.1715796f, -0.3202052f, +0.2781450f, -0.1095344f, -0.0354928f, -0.0345958f, -0.0163171f,
  +0.2626744f, +0.0820717f, -0.5707517f, +0.0780444f, +0.0518520f, +0.2963926f, +0.0377233f, -0.2252584f,
  +0.0087183f, -0.1119636f, -0.3079293f, +0.1256986f, +0.1921430f, -0.2453453f, -0.3047222f, -0.2486105f,
  -0.1364184f, +0.2360906f, -0.6823404f, +0.1403908f, -0.2388593f, -0.0221613f, +0.2354501f, -0.1412241f,
  -0.1559015f, -0.1347302f, -0.2253100f, -0.0711465f, -0.2730231f, -0.1145923f, -0.2905272f, -0.3174827f,
  +0.3207062f, +0.1392383f, -0.2173381f, +0.1231416f, +0.3021370f, +0.0996609f, -0.1938201f, -0.0950297f,
  -0.2435494f, +0.0511238f, -0.3980901f, +0.0555595f, -0.3950287f, -0.2509157f, +0.0917979f, +0.1053884f,
  +0.3113593f, -0.0868640f, -0.1693444f, -0.3723416f, -0.1023328f, -0.0459307f, -0.0763920f, -0.1148056f,
  +0.0256498f, -0.1738786f, -0.0134433f, -0.3598142f, +0.1662373f, -0.2067082f, +0.3338824f, +0.0449244f,
  +0.1244784f, +0.0068227f, +0.2233520f, -0.1390049f, +0.1748873f, -0.2151086f, +0.0950782f, +0.1014173f,
  -0.0166142f, +0.3508883f, -0.2097994f, +0.0822016f, -0.0421562f, -0.1894776f, +0.0150700f, +0.3972816f,
  +0.0976730f, +0.2128367f, -0.0293079f, +0.1495189f, +0.1451377f, -0.3050141f, +0.0951283f, +0.2573489f,
  +0.0236857f, -0.1021016f, -0.0917734f, +0.0323806f, -0.0181134f, +0.0834951f, +0.2766720f, +0.1528821f,
  +0.6306025f, +0.5513473f, -0.0983147f, -0.1679149f, -0.1109726f, -0.1294301f, -0.0768779f, +0.0402027f,
  -0.0067890f, +0.1236273f, -0.0891331f, +0.1298396f, +0.2807698f, -0.3708020f, -0.0220500f, +0.6144193f,
  +0.2136368f, +0.0924282f, +0.2163709f, +0.0135422f, +0.2786362f, +0.1889476f, -0.1370218f, -0.3079676f,
  +0.1503983f, +0.0133196f, +0.3680739f, +0.7495076f, +0.2483680f, +0.5679566f, -0.1814708f, -0.4900497f,
  +0.1299869f, -0.0503665f, +0.0822842f, +0.0548582f, +0.1192162f, +0.0167923f, +0.2547740f, -0.1153439f,
  -0.1794052f, -0.2205081f, +0.2095332f, -0.2594234f, +0.2228532f, -0.0823535f, -0.1942409f, -0.1224430f,
  +0.0378764f, -0.0834861f, -0.1219505f, +0.1092972f, -0.0823374f, +0.1425183f, +0.0328182f, +0.1444592f,
  -0.0302388f, -0.0198996f, +0.0474125f, -0.0518515f, -0.0136718f, -0.0075485f, -0.0119554f, -0.0450268f,
  -0.2240203f, -0.1898751f, -0.0753074f, -0.4334826f, +0.2714189f, +0.4822244f, -0.2291977f, +0.4519344f,
  +0.2462926f, +0.0483086f, +0.3929434f, +0.3150012f, -0.4594583f, -0.2741432f, +0.1124479f, -0.1227265f,
  -0.0827605f, +0.1963133f, -0.0208991f, +0.0621658f, +0.1528745f, +0.0249491f, -0.0202649f, -0.0335260f,
  -0.3457584f, -0.1958749f, -0.4412917f, -0.0781506f, -0.2134966f, +0.0742031f, -0.3881849f, +0.2240119f,
  -0.1524591f, -0.2358098f, -0.1768198f, +0.1980139f, -0.1981755f, +0.0954472f, -0.2885000f, +0.0503411f,
  -0.0295194f, +0.0838620f, +0.0172601f, +0.0786515f, +0.0310032f, -0.0442588f, +0.1669513f, +0.1568324f
);

const float biases[4] = float[4](
  -0.1187951f, +0.0644172f, -0.1400496f, +0.0845505f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer43 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2680655f, +0.1136001f, +0.0302652f, -0.0005090f, -0.1045218f, -0.1825759f, -0.2432642f, -0.2174616f,
  +0.2046997f, -0.0391177f, -0.0450267f, +0.0483689f, +0.0212949f, +0.1776944f, +0.1459382f, +0.0998560f,
  -0.0600545f, -0.0261689f, -0.0251742f, +0.0040000f, -0.0184057f, -0.0272706f, -0.0345034f, +0.0010575f,
  -0.2667909f, +0.3067926f, -0.0836805f, -0.7516964f, +0.3089228f, -0.1286447f, +0.1513946f, +0.1102132f,
  +0.0167780f, +0.3494231f, +0.0409026f, +0.1669677f, +0.1440109f, +0.1366703f, -0.0198306f, -0.2126208f,
  -0.0669377f, +0.0189419f, +0.0398863f, -0.0176420f, +0.0020815f, -0.0267745f, -0.0299148f, -0.1087548f,
  -0.3721921f, -0.1555267f, -0.4364336f, +0.1321870f, -0.5081505f, -0.0475799f, -0.0391142f, +0.0931285f,
  +0.0083602f, +0.0398957f, -0.0960390f, +0.0371224f, +0.0592783f, +0.0155115f, +0.0714229f, +0.0206153f,
  +0.0597669f, +0.0351468f, +0.0509293f, -0.1003968f, -0.0060973f, +0.0135901f, +0.0428245f, -0.0013474f,
  +0.1295103f, -0.1283352f, +0.0876608f, -0.0312671f, +0.1109002f, -0.0719339f, +0.1502033f, +0.1152100f,
  +0.1668034f, +0.4875275f, -0.0931787f, +0.1177282f, -0.0127956f, -0.1013297f, -0.2637607f, +0.1661767f,
  -0.1323027f, -0.2614174f, -0.2223465f, +0.0049492f, +0.1210619f, +0.1185134f, +0.0551350f, -0.1500431f,
  +0.2603989f, +0.3644420f, +0.1350517f, +0.2023533f, +0.0600749f, -0.1137547f, -0.2238938f, +0.2927322f,
  +0.3153252f, +0.1752713f, -0.0438114f, +0.2797270f, -0.4598060f, +0.0859244f, -0.0435653f, +0.3643378f,
  -0.0365140f, -0.0487824f, +0.0978360f, +0.1281713f, +0.1483276f, -0.2335761f, +0.2897563f, +0.2312328f,
  +0.2083405f, +0.0388423f, +0.0829831f, +0.1091153f, +0.0386036f, -0.0239410f, +0.1074192f, +0.0588388f,
  +0.1059044f, +0.0412023f, +0.3493024f, -0.1955441f, +0.3245635f, +0.0749418f, +0.1903174f, -0.0362997f,
  +0.0805092f, +0.1793385f, +0.0017539f, +0.1124865f, +0.2405561f, -0.0563803f, +0.2591414f, +0.0185015f,
  +0.2117418f, +0.1422490f, -0.1011183f, +0.1167405f, -0.0525860f, +0.0529974f, +0.1848952f, +0.2720480f,
  -0.4039184f, +0.5827248f, +0.3816475f, -0.1404290f, -0.1857118f, -0.2734738f, -0.1735303f, -0.0330741f,
  +0.0017816f, -0.2885667f, -0.0692413f, -0.0827153f, +0.1015575f, +0.0948831f, +0.2189341f, +0.0403951f,
  +0.5159890f, -0.5104845f, -0.5778627f, +0.3969547f, +0.2413221f, -0.2150541f, +0.0896104f, -0.4482936f,
  -0.4098714f, +0.7543350f, +0.6542137f, -0.4334860f, -0.6393368f, +0.2223769f, -0.4748751f, +0.9674997f,
  +0.2706983f, -0.5149760f, +0.1959481f, +0.0053468f, -0.0847176f, +0.2070918f, +0.2606987f, -0.5308738f,
  -0.0308902f, -0.1706694f, -0.1792742f, +0.1175481f, +0.2651383f, +0.0446249f, +0.0704267f, -0.1585706f,
  -0.3838112f, -0.3322018f, -0.2936560f, -0.1093787f, -0.5526734f, +0.0091303f, -0.1378790f, +0.2456387f,
  -0.0868904f, -0.0622947f, -0.2517146f, +0.3381407f, +0.0721665f, +0.0132283f, +0.0577187f, -0.0391387f,
  -0.1736775f, -0.0662950f, +0.0184635f, +0.0086146f, -0.0524005f, -0.1468182f, +0.3786102f, -0.0089665f,
  +0.0524375f, +0.0436338f, +0.1664837f, +0.2300030f, -0.2547626f, +0.0509148f, -0.0486342f, +0.1445697f,
  +0.0545151f, -0.3194856f, +0.0659860f, -0.1936895f, +0.1652652f, +0.2534044f, +0.1570000f, -0.3227206f,
  -0.0422414f, +0.1842913f, -0.1096457f, +0.1777258f, -0.2460188f, +0.1999404f, +0.2576959f, +0.2330942f,
  +0.0760855f, +0.4918435f, +0.3226608f, +0.4240510f, +0.0296004f, +0.5666389f, -0.1710709f, -0.2540771f,
  +0.0902123f, -0.1524180f, +0.1216913f, -0.3329919f, -0.2899548f, +0.4492340f, -0.0047297f, -0.4643542f,
  +0.0910129f, +0.0186826f, -0.0303178f, -0.0302309f, +0.0157380f, +0.1574194f, +0.3084412f, -0.1405359f,
  -0.0063513f, +0.1597492f, -0.1104865f, +0.1217369f, -0.1137696f, +0.0273176f, -0.0799277f, -0.0264214f,
  +0.0226280f, +0.0895684f, -0.0113776f, +0.0480797f, -0.0824073f, +0.0630085f, +0.0134972f, -0.0895695f
);

const float biases[4] = float[4](
  -0.3825746f, -0.0782197f, -0.1425798f, +0.0063381f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer44 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1226468f, -0.0065809f, +0.1260455f, +0.1156874f, -0.0218866f, +0.0971236f, -0.1373757f, -0.0710128f,
  -0.1577405f, +0.0817918f, +0.0305875f, +0.1003159f, +0.1024523f, -0.1424859f, +0.1188923f, +0.0688284f,
  -0.1540605f, -0.0228595f, -0.0558631f, +0.1043576f, -0.2632291f, -0.2297907f, +0.0388935f, +0.0093163f,
  -0.0209444f, -0.0641666f, -0.0093428f, -0.0097938f, +0.0647213f, +0.3266711f, +0.1705260f, -0.0726570f,
  +0.0003945f, -0.0963537f, +0.4348714f, -0.6329420f, -0.0846065f, -0.2188214f, +0.1534898f, -0.4089007f,
  +0.0253283f, -0.0085982f, -0.0529288f, +0.1557922f, -0.2255199f, -0.3106335f, -0.0581990f, -0.0431334f,
  -0.3963292f, -0.0804630f, -0.0909769f, +0.1305353f, -0.0990606f, +0.2317797f, -0.1888590f, -0.0327771f,
  -0.0872885f, -0.1309661f, -0.0811824f, +0.1924623f, -0.0191003f, +0.1617520f, -0.1521480f, -0.0930645f,
  -0.1776566f, +0.0277885f, -0.1150052f, +0.1103445f, +0.2131196f, -0.1545904f, -0.0319460f, +0.0276028f,
  -0.0958434f, -0.1102208f, +0.0536193f, +0.0549458f, +0.0325889f, -0.1133031f, -0.1294532f, -0.0672036f,
  +0.2625610f, +0.0733627f, +0.1811358f, +0.0376897f, +0.1914022f, -0.1371210f, -0.1899911f, -0.1278514f,
  +0.0753373f, -0.1780581f, -0.0899122f, +0.1367788f, +0.1419976f, +0.0722316f, +0.1026199f, -0.0807475f,
  -0.4596614f, +0.0637777f, -0.0715487f, +0.0005857f, +0.0410907f, +0.3030512f, +0.1442187f, -0.1231211f,
  +0.3754652f, +0.1029293f, -0.0022851f, +0.1045879f, -0.2832148f, +0.0123244f, -0.2987401f, -0.3372934f,
  -0.0635566f, -0.0448073f, +0.0054393f, +0.0834202f, -0.2332793f, -0.1672767f, +0.0677938f, -0.2280018f,
  -0.4250330f, -0.0032933f, -0.0043261f, +0.0501231f, -0.0765945f, +0.1388744f, -0.0385192f, -0.0157325f,
  +0.2165504f, +0.0297203f, -0.0598810f, +0.1192282f, +0.0893449f, -0.3069911f, -0.0786574f, -0.0862351f,
  -0.0850833f, -0.1124051f, -0.0827185f, +0.0458249f, -0.0453800f, -0.0152613f, -0.0462644f, -0.0906010f,
  +0.0611003f, +0.2181482f, +0.3122982f, +0.0362566f, -0.0451546f, +0.0305202f, -0.2114162f, -0.0420143f,
  -0.1501555f, +0.0261333f, +0.3855186f, +0.0802325f, +0.1988264f, -0.1360894f, -0.1738742f, +0.1120846f,
  +0.1679240f, +0.2009683f, +0.1712615f, +0.2288599f, +0.2494535f, -0.0254014f, -0.0804714f, -0.1345515f,
  -0.0388542f, -0.0085945f, -0.5003724f, -0.1279416f, -0.0807996f, +0.1369871f, +0.5256420f, +0.3253700f,
  -0.3856235f, +0.2791713f, -0.6031759f, +0.0402963f, +0.0714705f, +0.1753665f, -0.3241603f, +0.4400599f,
  -0.1523414f, +0.1390069f, -0.1098183f, +0.0014197f, +0.3909863f, -0.1482431f, -0.0176893f, +0.1445243f,
  -0.0825676f, +0.2280578f, -0.0531531f, -0.0480242f, +0.0700031f, +0.1635879f, -0.0993682f, +0.3209535f,
  +0.0116340f, +0.2885948f, +0.0643262f, +0.2149534f, -0.1024625f, -0.0214311f, +0.0050104f, +0.1985817f,
  +0.0916358f, -0.0086947f, +0.0933038f, -0.0035592f, -0.2164505f, +0.0182716f, -0.0942017f, -0.0235344f,
  -0.2582249f, +0.0986126f, -0.1832672f, +0.0676797f, -0.1037172f, +0.3195104f, -0.0016549f, +0.0017229f,
  +0.1507918f, +0.1369116f, +0.4000724f, -0.0018236f, -0.1652662f, +0.1548125f, -0.1848324f, -0.0175618f,
  +0.1726683f, +0.0968923f, -0.0315242f, +0.2245604f, -0.1411168f, +0.1603716f, +0.0527148f, -0.0946376f,
  -0.5268042f, -0.1465020f, +0.0758775f, -0.0693774f, +0.1041986f, +0.2457963f, +0.0679983f, +0.0172435f,
  -0.6778929f, +0.0875162f, -0.3961537f, +0.2194365f, -0.1332494f, -0.4382117f, -1.0109614f, +0.2110276f,
  +0.0287255f, -0.1112811f, -0.1386573f, +0.3646385f, +1.0865566f, -0.3244700f, -0.1808716f, +0.0153551f,
  -0.1169846f, -0.0316563f, +0.0283719f, +0.1283265f, -0.1472756f, +0.2530976f, -0.2245170f, -0.1295583f,
  -0.0844907f, -0.2158994f, -0.1032357f, +0.0662696f, -0.1182484f, +0.2656339f, -0.2191905f, -0.1875115f,
  +0.0511871f, -0.1619080f, +0.1004625f, +0.0873227f, +0.4173312f, -0.0099172f, +0.0318190f, -0.0145745f
);

const float biases[4] = float[4](
  +0.2070311f, -0.0676987f, +0.1195743f, +0.1433106f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer44 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2226104f, +0.0186314f, -0.3183166f, +0.0028073f, -0.0671904f, +0.0974477f, +0.1389205f, +0.0389756f,
  +0.3500197f, +0.2214996f, +0.3871457f, -0.0258289f, -0.5219955f, -0.0108826f, -0.3987079f, -0.0954106f,
  -0.0375615f, +0.1531302f, +0.1434902f, +0.2420923f, +0.3535361f, -0.1016121f, -0.0536155f, -0.0240368f,
  -0.4223072f, -0.0501741f, +0.4168016f, +0.0680751f, +0.0082235f, -0.2961343f, -0.4416452f, -0.0530269f,
  -0.2917603f, -0.1279956f, -0.1952067f, +0.5263684f, -0.2277245f, -0.3173837f, +0.3604073f, +0.1706988f,
  -0.2249936f, +0.0113262f, -0.2511302f, -0.0343296f, -1.0170577f, -0.0171849f, -0.0461679f, +0.3112891f,
  +0.2408306f, -0.1556026f, +0.0418827f, -0.1131864f, -0.0348903f, -0.2306324f, +0.1637398f, -0.1717138f,
  +0.1066927f, -0.2684581f, +0.0088514f, -0.1436973f, +0.1421493f, -0.1228883f, +0.1291580f, +0.0034967f,
  +0.0569658f, +0.0696528f, -0.0068203f, -0.1450248f, +0.0503632f, +0.0997979f, +0.0028546f, +0.0234339f,
  -0.1506858f, -0.0042871f, +0.0016261f, +0.0469714f, -0.0250625f, +0.2449128f, +0.0691889f, -0.2591764f,
  -0.3682557f, +0.2290799f, -0.0191315f, +0.1526872f, +0.0093683f, +0.1791950f, +0.0326567f, -0.1223603f,
  +0.2480440f, +0.0466584f, +0.0895788f, -0.0845283f, -0.2231720f, +0.1248948f, +0.1218894f, -0.3360039f,
  -0.5164989f, +0.1661016f, -0.0290143f, +0.1245045f, +0.0393368f, +0.3569928f, -0.4085585f, -0.3144661f,
  -0.3373253f, +0.1854915f, -0.1561121f, -0.2514472f, -0.1675047f, +0.1697385f, +0.9879459f, -0.2584912f,
  -0.0809731f, +0.2122683f, +0.2635004f, -0.4882988f, -0.1893425f, -0.2316782f, -0.0583440f, +0.1740749f,
  -0.2083497f, -0.1401409f, -0.0176567f, -0.0556410f, +0.1118177f, -0.2564956f, +0.2764575f, -0.0791744f,
  +0.0361705f, -0.0157783f, -0.0432179f, -0.2465248f, -0.0873781f, -0.1735076f, +0.1599646f, -0.2817566f,
  -0.0043409f, -0.0765615f, -0.1546289f, -0.1408441f, -0.1398996f, -0.5193700f, -0.0195861f, -0.3332947f,
  +0.0032289f, -0.0082046f, +0.0244388f, +0.0557488f, -0.1061963f, -0.1965325f, -0.3631282f, -0.1594895f,
  +0.2009680f, +0.0733368f, -0.1197633f, +0.3115951f, +0.1205256f, -0.1478250f, -0.3674573f, +0.0261844f,
  +0.4038249f, +0.0082137f, -0.1692611f, +0.3808996f, +0.2646264f, +0.1293012f, -0.0228156f, +0.0722123f,
  -0.4912493f, -0.0408604f, -0.2413449f, -0.0637521f, +0.0935325f, +0.0408757f, +0.2485057f, -0.0720489f,
  +0.7270516f, +0.3314929f, +0.2777825f, -0.2573248f, -0.1867151f, +0.1513229f, +0.0374653f, +0.0162080f,
  -0.0945287f, -0.0197497f, +0.2311633f, +0.0777131f, +0.0795106f, -0.0234394f, -0.0845495f, -0.2268809f,
  -0.2820864f, -0.0011213f, -0.0035733f, +0.0510249f, -0.0927398f, -0.0529482f, +0.0573039f, -0.1091743f,
  +0.2522807f, -0.0046115f, -0.1305204f, -0.0041254f, -0.3406389f, +0.2701499f, -0.0895043f, -0.1970878f,
  +0.1471843f, -0.0985365f, +0.0898845f, -0.0307494f, +0.0538702f, -0.0249742f, +0.1272451f, -0.0304070f,
  -0.0835127f, -0.1109112f, +0.0094614f, -0.0808836f, +0.0309770f, +0.2480262f, +0.1702919f, +0.0913078f,
  +0.4007018f, +0.0727855f, -0.0730275f, -0.3404988f, +0.2123566f, +0.2389182f, +0.1868482f, -0.0151729f,
  -0.1617540f, -0.1711710f, +0.1095022f, -0.3012483f, -0.0561993f, +0.0953432f, +0.0326903f, -0.0495773f,
  +0.0442190f, -0.0431046f, +0.0786717f, +0.1510345f, -0.0185669f, +0.1848828f, -0.1391452f, +0.2747105f,
  -0.0689997f, +0.0457970f, -0.5268981f, +0.3478027f, -0.1127022f, -0.4698257f, +0.1054837f, -0.1298312f,
  -0.1620811f, +0.0509319f, -0.0096564f, -0.4652010f, +0.0156489f, -0.1553780f, +0.2514956f, -0.0223307f,
  -0.3129396f, +0.1736014f, -0.0004094f, +0.0530025f, -0.1159839f, +0.2333325f, -0.0771478f, -0.0206359f,
  -0.2193601f, -0.0005484f, -0.0064322f, +0.1676101f, -0.0510259f, -0.0494952f, -0.1049128f, +0.2127005f,
  +0.1889623f, +0.0081279f, +0.0346271f, +0.0918169f, -0.1665501f, +0.1601521f, -0.0707154f, +0.1471824f
);

const float biases[4] = float[4](
  +0.0811414f, +0.1467244f, +0.3731184f, +0.1834392f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer45 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0442232f, +0.0142762f, +0.0023320f, +0.1028807f, -0.1888689f, +0.2374947f, +0.4159152f, +0.4537189f,
  -0.2265623f, +0.3160732f, -0.0261363f, -0.2152925f, +0.1067780f, +0.6143207f, +0.2218353f, +0.1948847f,
  +0.2508817f, +0.0577815f, -1.0173225f, +0.3537202f, -0.1130278f, +0.7707821f, -0.6038254f, -0.6503082f,
  -0.2340617f, +0.1541557f, -0.3461815f, +0.2033710f, -0.2140553f, +0.2338210f, -0.2383551f, -0.2743876f,
  -0.0994526f, +0.1482864f, -0.5165434f, +0.2759971f, -0.6970669f, +0.0453842f, +0.1629142f, -0.0064909f,
  -0.2206688f, -0.2979722f, +0.0721612f, -0.0864510f, -0.1970856f, +0.3318986f, -0.8421416f, -0.6549973f,
  +0.1957886f, +0.1995507f, -0.0609096f, +0.1360059f, +0.0562301f, +0.1691359f, +0.1310312f, -0.1836165f,
  +0.1294836f, +0.0408853f, -0.0055941f, +0.0913469f, -0.4297700f, -0.0590148f, -0.0084055f, +0.5743825f,
  -0.1810545f, -0.3147635f, -0.3448460f, +0.0062435f, -0.2235063f, -0.2390776f, -0.0007973f, -0.1971150f,
  +0.0618814f, +0.1298073f, -0.0487080f, +0.0392087f, +0.0495942f, +0.0081385f, -0.1999258f, -0.1072914f,
  +0.0965488f, -0.2477821f, -0.1716579f, +0.2050074f, -0.1971470f, -0.0104458f, +0.1284643f, +0.0983025f,
  -0.0732863f, +0.3084391f, +0.1985755f, -0.1130121f, +0.0189643f, -0.0607767f, +0.0270301f, +0.0450097f,
  -0.0720247f, +0.2211237f, -0.1366905f, +0.2024817f, -0.0729136f, +0.2466749f, -0.2039843f, -0.1656121f,
  +0.3446648f, -0.7168745f, -0.4355254f, +0.2175894f, +0.1118450f, -0.1644655f, +0.3816761f, +0.0463670f,
  -0.2272505f, +0.3776047f, +0.5144662f, -0.0598624f, -0.1858986f, -0.1519514f, -0.2928545f, +0.2111109f,
  +0.0053027f, -0.0263513f, -0.2719777f, +0.1827508f, -0.1040512f, +0.0857697f, -0.0998356f, -0.2139309f,
  -0.2107630f, -0.4915215f, +0.1463362f, -0.2842432f, -0.0188100f, -0.4894598f, +0.2801561f, +0.3784568f,
  -0.0338134f, +0.6376466f, +0.0525957f, +0.4944524f, +0.1055407f, +0.2069025f, +0.0167310f, -0.5980518f,
  -0.0386634f, -0.0320636f, -0.0610728f, +0.0333862f, -0.0908200f, +0.0413483f, +0.0893747f, +0.0317649f,
  -0.0905235f, +0.2953086f, +0.0660336f, -0.0936033f, +0.0032755f, +0.0370985f, -0.2570572f, -0.2301847f,
  -0.2613489f, +0.0042213f, +0.0516051f, -0.0710909f, -0.0750113f, -0.0251921f, -0.0510334f, -0.0205886f,
  -0.1110413f, +0.3377238f, +0.0352839f, -0.1279725f, +0.0745667f, -0.0459979f, -0.1867715f, -0.1698492f,
  -0.0759010f, +0.3128952f, -0.1098673f, -0.6725101f, +0.4757654f, -0.0915630f, -0.0931043f, -0.2045614f,
  -0.3066851f, +0.1061281f, -0.0184467f, +0.0761379f, -0.0566504f, -0.1865538f, -0.0126699f, +0.0498443f,
  -0.1956081f, +0.2718269f, -0.0516652f, +0.0359605f, -0.0415226f, +0.0456513f, -0.0209012f, -0.0696559f,
  -0.2439663f, +0.1466040f, -0.2701997f, -0.0921540f, -0.2233887f, -0.0533290f, -0.2227356f, +0.1734087f,
  -0.2137958f, +0.0423796f, -0.0938360f, +0.0440722f, +0.0720736f, -0.0428265f, -0.0270682f, -0.0742080f,
  +0.0462103f, -0.2092426f, -0.1148221f, +0.2362499f, -0.2641951f, +0.2928021f, -0.0649774f, +0.3044173f,
  +0.1140550f, -0.2464987f, +0.0561110f, +0.7093593f, -0.4580825f, -0.0964523f, -0.0690764f, +0.0240955f,
  +0.2272124f, +0.2131298f, +0.0503111f, +0.0065038f, -0.1007421f, +0.1479357f, -0.1609214f, -0.1347981f,
  +0.1479757f, -0.3138377f, -0.0927130f, -0.0183246f, +0.0470770f, +0.1991794f, -0.2568643f, -0.0620177f,
  -0.0034126f, -0.3864657f, -0.0290199f, +0.0769995f, +0.0844866f, -0.1452186f, -0.0469841f, +0.1498508f,
  +0.0900094f, -0.0638903f, -0.1356396f, +0.0604459f, -0.0291536f, +0.1072189f, -0.1889432f, +0.0636451f,
  -0.0567928f, -0.0040043f, -0.0339621f, +0.0144862f, -0.0264123f, -0.0035465f, +0.0143195f, -0.0301417f,
  +0.0007880f, +0.1836003f, +0.0331168f, -0.0477081f, -0.0551312f, +0.0581517f, +0.0891281f, +0.0390501f,
  -0.0320668f, +0.1981611f, -0.0441419f, +0.1441121f, +0.0233288f, +0.1106191f, -0.0620965f, -0.0398268f
);

const float biases[4] = float[4](
  +0.0070188f, -0.0653919f, -0.4817576f, -0.3227953f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer45 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2017084f, -0.2859069f, +0.0272156f, +0.0644780f, -0.0354238f, -0.0838536f, +0.0332205f, -0.0447212f,
  -0.3448417f, -0.3169316f, -0.1842578f, +0.1931375f, -0.2454617f, -0.0577437f, +0.4211049f, +0.0610682f,
  +0.2582527f, -0.1198340f, +0.0425912f, -0.0106419f, +0.1638910f, -0.0485393f, +0.2275064f, -0.2197415f,
  +0.0374227f, -0.2721871f, +0.0640811f, -0.0908031f, +0.2311003f, +0.1563189f, +0.0668174f, +0.0638147f,
  -0.2261268f, +0.3674424f, -0.2831543f, -0.4643771f, +0.5564085f, -0.3752122f, -0.5613685f, -0.4857405f,
  +0.1845033f, +0.2189042f, -0.1298206f, -0.2197545f, +0.0971556f, +0.2281480f, -0.1746247f, +0.1877920f,
  -0.3482540f, -0.0972857f, -0.4000882f, +0.0388509f, -0.2032175f, -0.0161095f, +0.2194348f, -0.0094411f,
  +0.2223226f, +0.1825981f, -0.2220582f, +0.2865690f, -0.6617110f, +0.2937482f, -0.1792688f, +0.2182901f,
  +0.1802962f, +0.4418195f, +0.2109043f, +0.5595428f, -0.0185938f, +0.4502010f, -0.0969009f, -0.4193143f,
  +0.0144313f, -0.1534429f, +0.0082043f, +0.0840355f, -0.1069267f, +0.0240379f, +0.2810566f, +0.2463762f,
  -0.1029236f, -0.2278026f, +0.1386993f, -0.0504205f, +0.2156828f, -0.1735791f, -0.0736952f, -0.1443774f,
  -0.0148961f, -0.2875194f, -0.1228281f, -0.0131827f, +0.0494749f, -0.1254835f, +0.1108744f, +0.1060720f,
  +0.2983088f, +1.0056247f, +0.5519535f, -0.1380634f, +0.1276168f, +0.2481289f, +0.2322489f, +0.5706478f,
  -0.1201746f, +0.1825918f, -0.1631778f, +0.0724283f, -0.0771299f, +0.2758205f, -0.0233610f, +0.0754557f,
  -0.0901287f, -0.3281457f, -0.0195204f, -0.1077761f, +0.0757996f, -0.2108688f, +0.1089061f, +0.0623197f,
  +0.0653683f, +0.0015656f, -0.2094596f, +0.4010673f, -0.3068369f, +0.3109141f, -0.0502033f, +0.1406833f,
  -0.1173433f, -0.2051062f, -0.1510347f, +0.0659106f, -0.0978942f, -0.0292450f, -0.0672670f, -0.1046092f,
  -0.2174020f, -0.1445202f, -0.0577478f, -0.0726359f, +0.0883866f, -0.2342535f, +0.0500079f, -0.0198118f,
  -0.0360146f, -0.1465920f, -0.0792169f, +0.0618340f, -0.0873232f, -0.0403715f, +0.0579356f, -0.0536007f,
  +0.2760797f, -0.0187178f, +0.0424149f, +0.1773043f, -0.0113104f, +0.0945356f, +0.0920511f, -0.1612477f,
  -0.0517172f, +0.0578016f, -0.0173677f, -0.0336828f, +0.0250322f, +0.0563384f, -0.1496796f, -0.1769995f,
  +0.1369108f, -0.1964173f, +0.2090490f, +0.0487283f, +0.1063244f, +0.0719406f, +0.0029493f, +0.0808415f,
  -0.0076953f, -0.1686583f, -0.2374352f, +0.0784676f, +0.1860310f, -0.2843239f, -0.0389046f, -0.0394643f,
  -0.1487674f, +0.1106141f, -0.0408663f, +0.0446184f, -0.0504697f, -0.0354635f, -0.0882905f, +0.0583455f,
  -0.0354789f, +0.1164380f, +0.0347410f, -0.0976605f, -0.0161089f, -0.0568326f, +0.0599205f, +0.2454169f,
  +0.0149904f, +0.1533336f, +0.0066557f, -0.1035049f, +0.1617873f, -0.2177229f, -0.0442235f, -0.0077897f,
  +0.1150721f, +0.3675720f, +0.1381901f, -0.0349919f, -0.0400535f, +0.1000040f, +0.0250978f, +0.1533863f,
  +0.1494023f, +0.4332349f, -0.0114895f, +0.1112995f, -0.1285309f, +0.1556060f, -0.2664915f, +0.1160829f,
  +0.1622534f, -0.0120716f, +0.2181049f, +0.0142513f, -0.0721478f, +0.1454117f, +0.4793714f, +0.5460552f,
  -0.0118141f, +0.1700940f, -0.1797839f, +0.0271273f, +0.1026197f, +0.2567956f, +0.0040814f, -0.0311726f,
  -0.0177369f, -0.1345880f, -0.0514260f, +0.0782013f, +0.0149528f, -0.0195350f, +0.0024886f, +0.2391380f,
  -0.2177096f, +0.0311492f, +0.4030787f, -0.1191961f, +0.6305841f, -0.0661783f, +0.1290703f, +0.5172799f,
  +0.0290874f, -0.0791431f, +0.2157397f, -0.2584353f, +0.0364383f, -0.2074060f, -0.0126022f, -0.0402491f,
  +0.0055775f, -0.4680829f, +0.0308851f, -0.1712132f, +0.0891925f, -0.2696162f, +0.1338620f, -0.1674588f,
  -0.1367376f, -0.3464183f, +0.2562187f, -0.3056707f, +0.2596919f, -0.1932354f, +0.3051729f, -0.1804588f,
  -0.2120929f, +0.0661258f, -0.0638972f, -0.0114425f, +0.0617848f, -0.0312733f, -0.1664175f, +0.0258359f
);

const float biases[4] = float[4](
  -0.0308539f, -0.0194770f, +0.0098372f, -0.0587124f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer46 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1431218f, -0.3511471f, +0.2925422f, -0.2053323f, +0.2130340f, -0.0260638f, -0.0242815f, +0.2446431f,
  +0.1942918f, -0.4100800f, +0.1008024f, -0.0575393f, +0.3539874f, +0.0358263f, +0.0518259f, +0.2389176f,
  -0.1422577f, +0.0331920f, -0.0691299f, +0.0730419f, -0.1553413f, -0.3244294f, -0.0311471f, +0.0850716f,
  +0.0307357f, +0.0970221f, +0.5426527f, -0.2371198f, -0.0211000f, +0.1811360f, -0.0211099f, +0.1798235f,
  +0.6832612f, +0.2895786f, +0.5643142f, -0.0630050f, +0.7408177f, +0.1711943f, -0.0307316f, +0.4506831f,
  +0.3379227f, -0.0161141f, -0.3576903f, +0.1024390f, +0.0983222f, -0.1346465f, -0.2740735f, +0.0360896f,
  +0.2005810f, +0.3107533f, +0.2668156f, -0.2086133f, -0.1016491f, +0.2214864f, +0.3115177f, +0.1202613f,
  +0.2003324f, -0.2379896f, -0.0584537f, -0.0799525f, -0.1599444f, +0.3746559f, -0.2014665f, -0.1798482f,
  +0.0021641f, +0.1317428f, +0.1341441f, -0.0119227f, -0.0350139f, -0.3325232f, -0.2435220f, -0.0786006f,
  +0.2023532f, +0.4415967f, +0.0622313f, +0.0409252f, -0.0272131f, -0.0104491f, -0.1764666f, -0.1250779f,
  +0.2652579f, +0.3762032f, +0.1409823f, -0.0537397f, -0.2101071f, +0.0141293f, +0.1226604f, +0.0630382f,
  -0.0540005f, -0.1896396f, -0.1028222f, +0.0541822f, +0.2771310f, +0.0047646f, +0.0095517f, +0.1162447f,
  -0.0031992f, -0.1570268f, -0.2708349f, -0.1320266f, +0.1301436f, +0.1518913f, +0.0016351f, -0.0609983f,
  -0.1976871f, +0.0300238f, -0.5470287f, -0.1496645f, +0.0442797f, -0.1100319f, +0.0659572f, -0.1997090f,
  -0.2304217f, -0.1182252f, -0.0656085f, +0.0710963f, +0.0141649f, -0.1567693f, +0.2851484f, +0.0972197f,
  -0.0115327f, -0.0061647f, +0.0492588f, +0.1205132f, +0.0102558f, +0.0618839f, -0.1852663f, -0.2309829f,
  -0.1957766f, +0.0473464f, -0.3461418f, +0.0508360f, +0.0376194f, -0.0116344f, +0.1153842f, -0.0671410f,
  +0.0136131f, +0.0692905f, -0.0690572f, +0.2323963f, -0.0318278f, +0.3329234f, +0.3456293f, -0.0975036f,
  -0.1378879f, -0.2368050f, +0.1357240f, -0.2066698f, +0.0464340f, +0.0541071f, +0.1388745f, +0.0565412f,
  -0.1111402f, +0.0568489f, +0.3580645f, -0.0836986f, +0.0489366f, +0.3092699f, +0.0440800f, -0.1490031f,
  -0.0468731f, +0.0669810f, +0.1553668f, +0.0025269f, -0.1767428f, +0.3594089f, -0.0017195f, +0.0191148f,
  +0.0239597f, -0.2581893f, -0.0160130f, -0.1958334f, -0.1230445f, -0.0936058f, +0.1078245f, -0.1121297f,
  -0.1374242f, -0.1957497f, +0.5965638f, -0.1757366f, -0.0994725f, +0.0960666f, +0.0085052f, -0.3626548f,
  -0.1448984f, +0.2819907f, +0.2327324f, +0.0222725f, -0.0549161f, -0.2914082f, -0.1319672f, -0.2082620f,
  -0.0183780f, -0.2196151f, -0.1924701f, -0.1507980f, -0.1288819f, +0.0301261f, -0.0530146f, +0.1462999f,
  +0.0452678f, +0.0900598f, +0.0858518f, -0.4155563f, +0.1313472f, -0.1863706f, +0.1631475f, +0.0228804f,
  -0.1545486f, -0.0064551f, +0.0232014f, -0.2605411f, +0.0203193f, +0.0425618f, +0.2603486f, +0.0611917f,
  -0.1262221f, +0.7349699f, -0.2960144f, -0.0528193f, +0.0531399f, +0.0413783f, -0.0976916f, -0.0652750f,
  +0.1556169f, +0.1885990f, +0.3488564f, +0.0469069f, -0.2145577f, +0.1043275f, +0.0992386f, +0.0343389f,
  +0.1543834f, +0.0138477f, -0.2068098f, +0.0615458f, -0.1622488f, -0.2307702f, -0.0664326f, -0.0196025f,
  -0.2810290f, +0.3166495f, -0.0770144f, -0.0264510f, -0.3392665f, +0.1656375f, -0.1376735f, +0.1845522f,
  -0.3195357f, +0.4517161f, +0.9058275f, +0.0206804f, +0.5256513f, -0.1483876f, -0.3099067f, -0.2978820f,
  -0.1560893f, +0.3472468f, +0.3018665f, +0.2100182f, +0.1620254f, +0.0525413f, -0.0484823f, -0.1750520f,
  -0.1763695f, +0.1897339f, +0.0152426f, +0.1328726f, -0.1745471f, +0.1563188f, +0.2403203f, +0.0936103f,
  +0.2287342f, -0.0791914f, +0.4220454f, -0.3675171f, -0.2250176f, +0.1348910f, +0.1731258f, -0.2447181f,
  +0.0073094f, +0.0280163f, +0.0551294f, +0.0208909f, -0.0965351f, -0.2489886f, -0.0865602f, -0.0842979f
);

const float biases[4] = float[4](
  -0.0377269f, +0.0132792f, +0.1085167f, +0.0498472f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer46 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1814918f, +0.4964073f, -0.3223393f, +0.1696234f, -0.0275317f, -0.0150286f, -0.2634524f, -0.2011411f,
  +0.5303960f, +0.0325866f, +1.0707521f, -0.0505091f, -0.1126899f, +0.2207814f, -0.3099139f, +0.1114210f,
  +0.0010851f, +0.1528146f, +0.1726713f, -0.0279210f, -0.3069528f, +0.0606768f, +0.0280896f, +0.0518727f,
  -0.3347618f, +0.3135394f, -0.1197634f, +0.0283253f, +0.1203918f, -0.0536331f, -0.4851801f, +0.0564059f,
  +0.1440875f, +0.2217434f, -0.6159331f, -0.2452485f, +0.6919870f, -0.3470145f, -0.2112479f, +0.1209101f,
  +0.6477747f, +0.1430309f, -0.3557628f, +0.0808989f, -0.0400527f, -0.0168599f, -0.4712233f, -0.2659105f,
  -0.4969561f, +0.0502496f, +0.1794490f, +0.0714628f, +0.0045473f, -0.2261270f, +0.0583975f, +0.0779378f,
  -0.2182071f, -0.0018356f, +0.3014388f, +0.0877158f, -0.0173677f, -0.0953243f, -0.1342739f, -0.1226119f,
  +0.0369714f, +0.0198533f, +0.3738736f, -0.4475424f, +0.0950448f, -0.1170153f, -0.1605943f, -0.0656585f,
  +0.0342566f, -0.7650959f, +0.2664672f, -0.0306565f, +0.1087643f, -0.0371341f, -0.0297370f, +0.3009687f,
  -0.0037711f, +0.1384593f, +0.4114011f, +0.1077930f, +0.1563266f, -0.1951909f, +0.1662545f, -0.1215566f,
  -0.0387397f, +0.0745497f, +0.3612121f, +0.0375693f, -0.0260276f, -0.2680604f, +0.2870172f, +0.2117649f,
  +0.1393228f, +0.3042300f, +0.5768909f, -0.0641655f, +0.2854738f, +0.1348929f, +0.0020013f, +0.0374560f,
  -0.6766331f, -0.4741589f, +0.1814659f, +0.1469397f, -0.6618653f, +0.2002665f, +0.4329187f, +0.0779173f,
  +0.1183385f, +0.1219590f, +0.4303159f, +0.1192985f, -0.2683444f, -0.4000040f, +0.0145843f, -0.0512948f,
  -0.2001548f, +0.1339464f, +0.1738187f, -0.2026078f, -0.1186254f, +0.1703113f, +0.1343241f, -0.1325020f,
  -0.3442691f, -0.2633397f, +0.1272687f, +0.4053190f, +0.2088647f, +0.0576449f, -0.0959784f, +0.0335854f,
  +0.0970091f, +0.0924917f, -0.1019123f, -0.1667089f, +0.0425152f, -0.2135172f, +0.2198410f, -0.0925277f,
  +0.0157220f, +0.6305465f, +0.0603055f, +0.0449149f, -0.1619914f, -0.0933007f, -0.2391200f, -0.1310259f,
  +0.3557914f, +0.5078398f, -0.0189617f, -0.0594323f, -0.6374558f, -0.1819988f, -0.2714568f, -0.1225457f,
  -0.1232670f, -0.1691617f, -0.3769511f, +0.0303855f, +0.2360202f, +0.3127132f, -0.2248766f, -0.0280452f,
  +0.0679494f, -0.0242405f, -0.1596258f, -0.0760346f, -0.0298434f, +0.1067759f, +0.1486421f, -0.1266340f,
  +1.0442690f, +0.1355410f, -0.3835463f, -0.1261583f, -0.1705551f, -0.0213373f, -0.2870872f, -0.3207043f,
  -0.5069610f, +0.0855761f, +0.8476666f, +0.1788677f, -0.2503282f, -0.1134670f, +0.0836600f, +0.1539400f,
  +0.3810846f, +0.2108003f, +0.0579439f, +0.2204443f, -0.0065727f, +0.1750541f, +0.1548703f, -0.1420175f,
  +0.2810344f, -0.1232933f, +0.3757183f, +0.7324666f, +0.0793734f, +0.2451954f, +0.1430933f, -0.4438804f,
  +0.2174242f, -0.0298380f, -0.1950476f, +0.5160268f, -0.2173779f, -0.1194665f, -0.1736145f, +0.3022592f,
  +0.0877159f, -0.1284480f, +0.1190461f, +0.0581778f, -0.0903288f, +0.2382747f, -0.4548180f, +0.0225801f,
  +0.0787489f, -0.5169016f, -0.1412909f, +0.1795833f, +0.0065454f, +0.1109882f, +0.0648413f, -0.0742645f,
  +0.0578011f, -0.2041837f, +0.2026352f, +0.0800790f, +0.0144624f, -0.3543965f, -0.2541420f, +0.0486752f,
  +0.1621792f, +0.0358054f, -0.1460992f, +0.1250476f, -0.2170376f, +0.1758115f, -0.0487826f, +0.0792814f,
  -0.0048153f, +0.3939853f, -0.1508277f, +0.1935651f, +0.8451509f, -0.1383517f, +0.0719808f, -0.3142970f,
  +0.3305008f, +0.2163186f, +0.1568280f, -0.0537190f, +0.1332723f, -0.0884531f, -0.3885991f, +0.0887191f,
  -0.0240805f, -0.0668245f, -0.1736585f, +0.1001346f, +0.0932962f, -0.0898314f, -0.0542809f, -0.0069676f,
  +0.0889948f, +0.0949252f, +0.0109823f, +0.0439990f, +0.1869231f, -0.1070515f, +0.0102189f, -0.5017501f,
  -0.2436721f, -0.0348906f, -0.2553626f, -0.4436299f, +0.2226024f, -0.0144252f, -0.0420954f, -0.2163644f
);

const float biases[4] = float[4](
  +0.1305557f, +0.0870973f, -0.1305730f, +0.0715480f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer47 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0365387f, -0.0553936f, +0.0167625f, -0.0299791f, +0.0488495f, +0.0480781f, +0.0444999f, -0.0055362f,
  -0.0914240f, +0.0505390f, -0.2703620f, +0.1163276f, -0.1813383f, +0.0962923f, -0.0323006f, -0.0417972f,
  +0.0860267f, +0.3552049f, +0.0857080f, -0.0133203f, +0.0034689f, +0.2080442f, -0.0347013f, -0.0925666f,
  +0.0502194f, +0.4518284f, -0.0028695f, -0.0524836f, +0.0591801f, +0.0441285f, -0.3425172f, -0.1293397f,
  +0.1074303f, -0.1438635f, +0.3968868f, -0.1992818f, +0.1242388f, -0.0238213f, +0.3055093f, +0.2776455f,
  +0.0074129f, +0.0119273f, +0.0129403f, +0.0390121f, -0.0693981f, +0.0509011f, +0.0272975f, +0.0149633f,
  +0.0292006f, +0.2978120f, +0.2912510f, -0.2210186f, +0.2870421f, -0.1108098f, -0.0240959f, -0.0566944f,
  +0.1150804f, -0.0734748f, -0.0039850f, +0.1584096f, -0.0948675f, +0.1978967f, +0.2112562f, +0.0398068f,
  -0.0004384f, +0.1609821f, +0.0638997f, +0.0342946f, +0.0522398f, +0.1049641f, +0.0062070f, +0.1055833f,
  -0.1015690f, -0.1694655f, +0.0303615f, -0.2669501f, +0.0952911f, +0.0799456f, +0.1938533f, +0.1498172f,
  -0.2508507f, +0.1417488f, -0.0288434f, -0.3392636f, +0.2563106f, +0.1595158f, +0.2429417f, +0.1658429f,
  -0.0215145f, -0.1033591f, -0.2243833f, -0.0908193f, +0.1054755f, +0.1125703f, +0.0840271f, +0.0103639f,
  +0.1290377f, -0.3427408f, -0.2377238f, +0.0804057f, -0.1546699f, +0.0032456f, +0.0203996f, -0.1532677f,
  -0.1896781f, -0.1814972f, +0.0277282f, -0.4751121f, -0.2332814f, -0.3441224f, +1.1477811f, +0.3030199f,
  +0.2366712f, +0.0193133f, -0.0516610f, +0.1983352f, +0.1515583f, +0.0481421f, +0.2018446f, -0.0021735f,
  +0.0356520f, -0.2801463f, -0.0617393f, -0.2892766f, +0.0475131f, -0.2796189f, -0.1210378f, -0.1592473f,
  -0.2626731f, -0.0934182f, -0.4176717f, +0.1825066f, -0.2004823f, +0.2002758f, +0.2475065f, -0.0728602f,
  +0.1395783f, +0.0092860f, +0.1146228f, -0.1980373f, +0.3338610f, -0.0938833f, +0.0062773f, -0.2009487f,
  -0.1046007f, +0.1881397f, +0.1513297f, -0.2077696f, +0.0641962f, -0.4422545f, -0.5199821f, -0.1486480f,
  -0.2443585f, +0.0424994f, +0.0379160f, +0.0222154f, -0.1201862f, -0.2086581f, -0.0909579f, +0.2603256f,
  -0.3489439f, +0.0466766f, +0.0172239f, -0.0666823f, -0.0385534f, -0.1395812f, -0.0027429f, +0.1933753f,
  +0.0132669f, -0.1571401f, -0.0270581f, -0.4205763f, +0.3627218f, -0.2374196f, -0.1561360f, -0.3237408f,
  -0.3922231f, -0.1075079f, +0.0676522f, -0.3888974f, +0.2650562f, -0.4159182f, +0.0065075f, +0.0396785f,
  -0.1607823f, -0.2942713f, +0.0701206f, -0.0545865f, -0.0488493f, -0.3211863f, +0.0162188f, -0.0898606f,
  -0.0277542f, -0.0884655f, +0.0943713f, -0.2036059f, +0.0691956f, -0.1736727f, -0.1029026f, -0.2835913f,
  -0.3275642f, -0.2515233f, -0.2158709f, +0.0743982f, -0.0930951f, -0.0923627f, +0.0672755f, +0.0013913f,
  -0.1149065f, -0.0492442f, -0.1285536f, -0.0960112f, +0.1036040f, -0.1430961f, -0.0542949f, -0.0404194f,
  +0.1199156f, -0.2540937f, -0.1552655f, +0.2252652f, -0.0570404f, +0.1282312f, +0.3030440f, -0.0884835f,
  -0.0348300f, -0.0987065f, +0.0709517f, +0.4380977f, -0.4834631f, +0.0303403f, -0.1621851f, +0.2798023f,
  +0.2093924f, -0.1189648f, +0.1145196f, +0.0159929f, -0.0274575f, +0.0942007f, +0.0303000f, +0.2444616f,
  +0.0820752f, +0.1678136f, +0.1264534f, +0.0698832f, +0.2178843f, +0.3586673f, -0.2705470f, -0.2886881f,
  -0.1390519f, -0.1234794f, -0.4641877f, -0.0851998f, -0.1461593f, +0.5020064f, +0.5097527f, -0.1431970f,
  +0.3311223f, -0.0358504f, +0.3218889f, -0.0319584f, +0.5988268f, +0.1681697f, +0.5983918f, +0.0372243f,
  -0.0463839f, +0.1253443f, -0.2185738f, -0.0725951f, -0.3576619f, -0.0181187f, -0.3632348f, -0.0789140f,
  -0.2596652f, +0.1343897f, -0.0397483f, +0.1240660f, -0.1681382f, -0.0517831f, -0.4278401f, -0.1578922f,
  -0.2202650f, -0.1248426f, +0.0615072f, -0.2077417f, +0.0019355f, -0.2081271f, -0.2112541f, +0.0212268f
);

const float biases[4] = float[4](
  +0.1099872f, -0.1289603f, +0.0097615f, +0.0056843f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer47 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0442216f, -0.0181628f, -0.0075974f, -0.0081992f, -0.0035630f, +0.0272660f, -0.0373947f, -0.0647132f,
  -0.0257155f, -0.0436090f, -0.0674078f, +0.0196097f, -0.0284879f, -0.1297207f, -0.0321968f, +0.0695726f,
  +0.0764230f, +0.1341975f, +0.1089574f, +0.1227210f, -0.0102393f, +0.0915816f, +0.0275274f, -0.0048234f,
  +0.0653362f, +0.1206271f, +0.1825869f, -0.0566535f, +0.1153755f, -0.0219440f, -0.0507242f, +0.0714939f,
  +0.3137899f, +0.0785363f, -0.1648738f, +0.0493892f, +0.2540773f, -0.4429281f, -0.2868076f, -0.1880061f,
  -0.1743585f, +0.1006098f, +0.1173324f, +0.6206327f, -0.1809925f, -0.1872734f, -0.1451644f, +0.1078195f,
  -0.1068891f, +0.1965262f, -0.1223912f, -0.0124167f, -0.0649899f, +0.0499626f, -0.0475413f, +0.0658550f,
  +0.1505345f, +0.1408470f, -0.0411995f, -0.1295432f, +0.0914749f, +0.1075834f, -0.0656941f, -0.0125869f,
  +0.2773978f, +0.3428889f, +0.3579117f, +0.1188220f, +0.2537813f, +0.1238978f, +0.1416657f, +0.1951769f,
  -0.0035304f, +0.2505085f, +0.0975477f, -0.0953126f, +0.1386168f, -0.1472912f, -0.1875468f, -0.0805175f,
  +0.3119719f, -0.4517917f, -0.3183950f, +0.2849775f, -0.1039696f, +0.2043929f, +0.4491635f, +0.0605234f,
  +0.0597491f, +0.1952862f, +0.1933423f, -0.1040288f, +0.1802371f, -0.0201042f, -0.0633974f, -0.2264222f,
  -0.2127701f, -0.3810967f, -0.1452741f, -0.0044554f, -0.0758473f, -0.0898355f, +0.3336625f, -0.0392933f,
  -0.3752205f, -0.8141630f, +0.2438594f, -0.1027130f, -0.1292937f, -0.1314452f, +0.4253631f, -0.0753740f,
  -0.0564637f, +0.0776519f, -0.1650447f, -0.0984244f, -0.0191782f, +0.0634707f, +0.0036106f, +0.0525345f,
  -0.0332275f, -0.1393349f, +0.0524271f, -0.0087694f, -0.0163085f, -0.0645829f, +0.0381226f, -0.0161608f,
  -0.1615445f, +0.6001672f, -0.1459483f, -0.0802123f, +0.0401898f, -0.0917218f, -0.1359867f, -0.2662412f,
  +0.1165776f, +0.3974201f, +0.2741809f, +0.0061136f, +0.0480567f, +0.1280251f, +0.0717281f, +0.2408213f,
  -0.1171208f, -0.0431510f, -0.0533808f, -0.0017073f, -0.0568072f, -0.0638954f, -0.0415839f, -0.0386061f,
  +0.2964723f, +0.0538792f, +0.2737347f, -0.0944502f, +0.1684352f, +0.1731982f, +0.2382351f, -0.0354581f,
  +0.0443195f, -0.3277850f, -0.0496602f, -0.0479754f, +0.0512753f, +0.0041013f, +0.0906488f, -0.1525038f,
  -0.0078270f, +0.0908976f, +0.1792661f, -0.1350044f, +0.2243178f, -0.1401983f, -0.0739173f, +0.0232102f,
  +0.0617999f, +0.3885255f, +0.3663498f, -0.4026406f, +0.7938197f, -0.2084916f, +0.0980409f, +0.0180367f,
  -0.1260177f, -0.0451879f, -0.1543562f, -0.0985561f, +0.1257681f, -0.1216423f, -0.0234365f, -0.1118808f,
  -0.0810070f, +0.1725549f, +0.0704226f, -0.1617662f, +0.0928754f, -0.0883053f, -0.1159154f, +0.0068856f,
  -0.2095157f, -0.1883821f, -0.4910341f, +0.4366281f, -0.8070921f, +0.1019951f, -0.2552918f, +0.4000972f,
  -0.0098588f, -0.1327516f, +0.0603744f, -0.2059164f, -0.0571031f, -0.1203164f, -0.0311300f, -0.2000278f,
  +0.2576139f, -0.0452785f, -0.1556297f, +0.1235710f, +0.1018450f, +0.1943476f, +0.0721503f, -0.3367656f,
  -0.0257634f, -0.0996647f, -0.1486674f, +0.1960318f, -0.2957428f, -0.0173104f, +0.0194735f, -0.1161792f,
  +0.0003321f, -0.0391212f, -0.0247373f, +0.1025013f, +0.1031429f, +0.1367528f, +0.1300411f, +0.0060650f,
  -0.0805890f, -0.3018360f, -0.0656390f, +0.1919034f, +0.0005582f, +0.1865344f, +0.0200370f, -0.3038582f,
  +0.0525026f, -0.1776819f, -0.3549004f, -0.1159392f, -0.0885737f, +0.3954411f, +0.1898786f, -0.2368048f,
  -0.3484446f, -0.2170777f, -0.4977222f, +0.2211413f, -0.1136498f, +0.0807047f, +0.0923613f, +0.1965083f,
  -0.0935488f, -0.1238309f, -0.5178509f, +0.5271763f, -0.4468807f, +0.2778766f, -0.2679139f, +0.0638955f,
  -0.0932182f, -0.2395369f, -0.4813944f, +0.3674764f, -0.2655271f, -0.0722673f, -0.3891794f, -0.1586447f,
  -0.0680868f, -0.2702336f, +0.4131229f, -0.1955655f, -0.0832692f, -0.2397510f, -0.0157789f, -0.1053768f
);

const float biases[4] = float[4](
  +0.0547649f, +0.0617763f, +0.0694713f, -0.3330153f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer48 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!BIND FEAT_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

#define TEX_BIND_L3_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L3_TEX FEAT_L0_tex
#define TEX_BIND_L3_POS FEAT_L0_pos
#define TEX_BIND_L3_SIZE FEAT_L0_size
#define TEX_BIND_L3_PT FEAT_L0_pt

const float kernels[288] = float[288](
  -0.0620469f, +0.2569593f, +0.1617703f, -0.0542915f, -0.0614836f, +0.0100032f, +0.1021411f, +0.1684721f,
  -0.0661270f, +0.0870282f, +0.0337066f, -0.1653534f, -0.2898171f, +0.3376068f, -0.1917989f, +0.1114236f,
  -0.1575367f, -0.1439386f, -0.3545856f, -0.0831171f, -0.0872380f, +0.2631310f, +0.1006617f, +0.4816542f,
  -0.2265888f, +0.4931957f, +0.2449240f, +0.0794620f, -0.2992078f, +0.0263294f, +0.1710591f, -0.2618230f,
  +0.1587958f, +0.0550892f, +0.2862861f, -0.0420403f, +0.0299201f, -0.0040029f, -0.0852150f, -0.1070657f,
  +0.0427277f, +0.2892241f, +0.0535423f, -0.1223822f, -0.3274582f, +0.2248260f, -0.1180289f, +0.1734785f,
  +0.2435868f, +0.2393488f, +0.0285184f, -0.0047807f, -0.1740162f, -0.0868657f, +0.1358967f, +0.5275974f,
  +0.0863766f, +0.2726318f, -0.0307156f, -0.0036395f, -0.1408807f, +0.0850445f, +0.0195813f, -0.0028058f,
  -0.1062128f, -0.1758876f, -0.0146055f, +0.0177082f, +0.0163741f, -0.1419513f, +0.1521401f, +0.3513938f,
  -0.1356032f, +0.0033883f, +0.0009645f, -0.0421906f, -0.1360767f, -0.2268889f, +0.0535911f, -0.0226563f,
  +0.1706654f, +0.0867052f, +0.1774807f, +0.1710104f, +0.0012523f, -0.0915776f, +0.0228395f, -0.1370822f,
  +0.1978430f, +0.1181879f, +0.2557813f, +0.0379377f, -0.0300972f, +0.0021784f, -0.0642448f, -0.2883859f,
  -0.0791363f, -0.2149627f, +0.1242157f, -0.0201796f, -0.1427499f, -0.1717495f, +0.1899594f, +0.2269254f,
  +0.0955253f, +0.1908524f, +0.3596537f, +0.2878700f, +0.2022791f, +0.2455032f, +0.0618823f, +0.1085102f,
  -0.0968275f, +0.0521945f, +0.1353946f, +0.0854979f, +0.2740188f, +0.0219859f, +0.0440725f, +0.1567264f,
  -0.1975389f, -0.1687784f, -0.1148560f, -0.2100336f, -0.0706411f, -0.3928864f, +0.1100530f, +0.0322146f,
  -0.0273650f, +0.1620792f, +0.1416324f, +0.0274476f, -0.0467541f, +0.2026210f, -0.0610835f, +0.0140074f,
  +0.1285628f, -0.0465854f, +0.1326265f, +0.0183129f, -0.0852183f, +0.0423313f, -0.0054858f, +0.0296885f,
  -0.0478500f, +0.1281220f, +0.0875830f, +0.0174734f, -0.0413360f, -0.1385290f, +0.0015303f, -0.7049831f,
  -0.0409933f, -0.3270938f, +0.0333918f, -0.0090136f, +0.0542685f, -0.0307899f, +0.2005720f, -0.1210490f,
  -0.1290454f, -0.0389820f, -0.1999683f, +0.1018526f, +0.1632933f, -0.0977033f, +0.0323188f, +0.1738117f,
  +0.1086686f, +0.1703249f, +0.0745334f, +0.1496895f, +0.0788361f, +0.1828053f, -0.0302616f, -0.1323916f,
  -0.0377186f, -0.3071274f, -0.2819412f, +0.1394752f, -0.2227670f, +0.0554461f, -0.1094543f, +0.1741527f,
  -0.1856075f, -0.2233464f, -0.4392918f, +0.0358829f, +0.0430823f, -0.1698843f, +0.1473395f, +0.1957734f,
  +0.0141554f, -0.2448762f, -0.0159963f, +0.0664547f, +0.0323504f, -0.0532492f, +0.1842728f, -0.3212588f,
  +0.4928692f, -0.2860142f, -0.1228886f, +0.3023723f, -0.0002776f, +0.0027193f, -0.0483563f, +0.0134117f,
  -0.0267711f, +0.1007462f, -0.2076565f, +0.0355413f, +0.0596479f, -0.0253879f, +0.0085076f, -0.0981351f,
  +0.1438625f, -0.2692026f, +0.0661032f, +0.0285677f, -0.1092279f, -0.3824674f, +0.3405119f, -0.1283875f,
  -0.0395871f, -0.2226536f, -0.0172664f, -0.0262636f, -0.0162455f, +0.0451544f, -0.0336432f, -0.2508908f,
  -0.1091626f, +0.0618279f, -0.1581261f, -0.0649952f, +0.0413040f, +0.0745079f, +0.0155209f, -0.3918625f,
  -0.1978489f, -0.0525363f, +0.0196396f, -0.0912271f, -0.5286375f, -0.2352284f, +0.0700865f, +0.0618009f,
  -0.0343195f, -0.3551295f, -0.2473179f, -0.1496791f, -0.2182374f, -0.3378203f, +0.2980919f, +0.3470078f,
  -0.3450110f, -0.2565625f, -0.2577318f, -0.0441205f, -0.0965124f, -0.2635749f, +0.2375998f, +0.2673889f,
  -0.0533659f, -0.3217640f, -0.1778895f, +0.0614597f, -0.2529498f, -0.2163835f, +0.1846519f, -0.2455280f,
  -0.1187998f, +0.0018660f, -0.3302047f, +0.2858122f, -0.1237791f, -0.2350257f, +0.1916706f, -0.0707479f,
  -0.0603756f, +0.0361295f, -0.0001088f, +0.0459664f, -0.0253880f, +0.2068875f, -0.1369767f, +0.1162763f
);

const float biases[4] = float[4](
  -0.1239451f, +0.0069761f, +0.1108425f, +0.0205734f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)) + TEX_BIND_L3_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer48 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!BIND FEAT_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

#define TEX_BIND_L3_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L3_TEX FEAT_L1_tex
#define TEX_BIND_L3_POS FEAT_L1_pos
#define TEX_BIND_L3_SIZE FEAT_L1_size
#define TEX_BIND_L3_PT FEAT_L1_pt

const float kernels[288] = float[288](
  -0.0225795f, -0.3252017f, -0.0402438f, +0.0017499f, -0.1367432f, -0.1129910f, +0.1898128f, +0.0371432f,
  -0.1133090f, +0.1555427f, -0.0010246f, -0.2494107f, -0.2484044f, -0.3221127f, +0.2906609f, +0.4746408f,
  -0.1798728f, -0.0110747f, -0.0638760f, -0.1347454f, -0.1479775f, +0.2564503f, -0.0927307f, +0.1857822f,
  -0.1603435f, -0.0254392f, -0.1693090f, -0.2973461f, +0.0490462f, -0.2503627f, -0.3081326f, -0.2912708f,
  -0.0641256f, +0.0175645f, -0.1505111f, -0.7251109f, +0.0660025f, +0.1579628f, -0.3678154f, -0.0332325f,
  -0.2544251f, -0.0822272f, -0.0703941f, -0.1309962f, -0.3423777f, +0.1115176f, -0.3296921f, -0.0112151f,
  +0.0691111f, +0.1533839f, +0.0471959f, +0.2448838f, +0.0916501f, +0.3519042f, -0.1873750f, -0.0568987f,
  -0.2064149f, -0.0029309f, +0.0427719f, -0.1944607f, +0.1382181f, +0.0492517f, -0.2279970f, -0.0643783f,
  -0.1270659f, -0.0300967f, -0.0043080f, -0.1304608f, +0.1060570f, +0.0713980f, -0.0194959f, -0.0369210f,
  -0.0436435f, +0.0396155f, +0.0662259f, -0.0713328f, +0.1441951f, -0.0306830f, +0.0985463f, +0.1949136f,
  -0.6294975f, -0.3603711f, -0.0853935f, +0.2683281f, -0.1437860f, -0.2095110f, +0.0271506f, +0.1937849f,
  -0.4314421f, -0.0515286f, -0.2773204f, -0.0372379f, +0.1435969f, +0.2176535f, +0.2712509f, -0.8215662f,
  -0.1820229f, -0.1080330f, -0.0594879f, -0.1302199f, +0.6174573f, -0.4576769f, +0.0471946f, +0.1299491f,
  -0.0033928f, -0.6706198f, -0.1524288f, +0.1284881f, +0.8209172f, -0.3930972f, -0.1778987f, -0.0522715f,
  +0.1310063f, -0.1072396f, +0.0556456f, -0.1670545f, -0.1761533f, +0.0694231f, +0.1543009f, -0.5437216f,
  -0.0827763f, +0.4796445f, +0.3627646f, +0.1594743f, +0.0149696f, +0.0380163f, -0.1120192f, +0.0445314f,
  +0.1127752f, +0.1074789f, +0.3537576f, +0.2269790f, -0.0933339f, -0.3639560f, +0.0091863f, -0.2215903f,
  +0.1506498f, -0.0113763f, -0.3341890f, -0.1197132f, +0.1429545f, -0.3822149f, +0.2336867f, -0.4548544f,
  -0.1511568f, -0.0726549f, -0.0301872f, -0.0965213f, -0.0509138f, -0.3473168f, +0.0143717f, +0.0409014f,
  +0.1430442f, -0.0250902f, +0.2467927f, +0.0545106f, +0.2362996f, -0.5959058f, +0.5939227f, +0.6716165f,
  +0.1314612f, +0.1037834f, +0.2745265f, -0.0474717f, +0.1442414f, -0.2867113f, +0.0817497f, +0.3123293f,
  -0.4040486f, -0.1762395f, +0.1461890f, -0.1289193f, -0.1128398f, -0.2048792f, +0.1467603f, -0.2287735f,
  -0.2228083f, +0.3972820f, +0.3733116f, +0.4429722f, +0.2271467f, -0.6722553f, +0.5861383f, -0.3647700f,
  +0.3144521f, -0.1704754f, -0.1806282f, +0.0742487f, -0.0340196f, -0.5911124f, +0.6120188f, -0.0717317f,
  -0.1902399f, -0.1434392f, -0.0208180f, -0.2090262f, -0.1188602f, -0.3464335f, +0.0143814f, +0.2807974f,
  -0.0942783f, +0.1998047f, -0.0445476f, +0.1627155f, -0.3512295f, -0.5003553f, +0.5150567f, +0.1083083f,
  +0.2800314f, +0.0572859f, -0.1683282f, +0.1818939f, -0.1184303f, +0.3623167f, -0.2403258f, -0.4474170f,
  -0.1164584f, -0.0727673f, -0.0284685f, +0.0521453f, -0.1936905f, -0.1494882f, +0.2463862f, +0.1426723f,
  -0.5546361f, +0.2257980f, -0.1982816f, +0.0737796f, -0.0568067f, +0.2026864f, -0.6607153f, +0.5083485f,
  -0.0180598f, +0.0090134f, -0.0202839f, +0.0747762f, -0.1701083f, -0.0335372f, -0.1976098f, +0.1851927f,
  +0.0203615f, -0.0503538f, -0.1609244f, -0.0380055f, -0.3036385f, -0.3833900f, +0.1533317f, -0.0105828f,
  -0.1881900f, +0.1604377f, -0.2980864f, -0.3531791f, -0.3163212f, +0.4058720f, +0.1243595f, -0.0106710f,
  -0.3958459f, -0.0775982f, +0.1362652f, +0.1963741f, +0.0229717f, +0.4008290f, -0.5489854f, +0.2507134f,
  -0.2077325f, -0.2705009f, -0.1506831f, -0.0464124f, -0.0404268f, -0.2818275f, +0.1663531f, -0.0050697f,
  -0.3199654f, -0.0795911f, +0.0685520f, -0.2139362f, -0.0155677f, -0.2050427f, -0.2082426f, -0.1724895f,
  -0.2481515f, +0.1897208f, +0.3568508f, -0.0561016f, -0.1244283f, +0.1834737f, -0.2125263f, +0.3730822f
);

const float biases[4] = float[4](
  +0.0625446f, +0.0095732f, +0.0053417f, -0.0079437f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)) + TEX_BIND_L3_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b24 Layer49 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0192787f, +0.0931778f, -0.0849492f, +0.0428425f, -0.0699516f, +0.0021884f, -0.0845921f, -0.1011078f,
  +0.0387557f, +0.0831294f, -0.0575057f, +0.0242847f, -0.1259968f, +0.0164527f, -0.0085187f, +0.0719405f,
  +0.0232190f, +0.0691173f, +0.1596434f, -0.0363045f, +0.0654167f, -0.0279997f, +0.0498443f, +0.0214013f,
  -0.0553534f, -0.2256445f, -0.1163368f, -0.0031472f, -0.0840532f, -0.0492793f, +0.1426923f, -0.1176807f,
  +0.1008618f, -0.1365765f, -0.0605834f, -0.4670727f, +0.0570367f, +0.0334585f, +0.2239459f, +0.0757241f,
  -0.1397324f, +0.0662850f, -0.2616230f, +0.2041592f, +0.0077079f, +0.0666024f, -0.0565715f, -0.0001983f,
  -0.0314327f, +0.0501165f, +0.0149176f, +0.0329456f, +0.0000928f, +0.0226160f, -0.0350844f, -0.0442897f,
  -0.0851864f, +0.1161852f, -0.1506359f, +0.0871886f, -0.0783108f, +0.0665074f, -0.0702327f, +0.0049793f,
  -0.0060922f, -0.0194281f, +0.0307920f, -0.0143721f, +0.0147487f, -0.0197946f, -0.0020944f, -0.0050740f,
  -0.0074957f, -0.0288125f, -0.0434613f, +0.0341192f, -0.0536162f, +0.0117065f, +0.0250156f, +0.0229328f,
  +0.1115036f, +0.0333308f, -0.1273754f, +0.1559767f, -0.1922918f, -0.0018459f, +0.0309916f, +0.0276538f,
  +0.0063033f, +0.2043831f, +0.1299337f, -0.0287383f, +0.0460743f, +0.0074110f, -0.0741090f, -0.0160282f,
  +0.0169048f, -0.1434353f, -0.0016695f, +0.0000912f, +0.0031401f, -0.0158867f, +0.0507560f, -0.0547461f,
  -0.0242335f, +0.0467260f, -0.1465476f, -0.1657567f, -0.0260153f, -0.1891527f, +0.1046933f, -0.2858541f,
  -0.1392076f, +0.0042933f, -0.2547056f, +0.0930512f, +0.0218766f, +0.0851958f, -0.0013853f, +0.1572280f,
  -0.0269296f, +0.0451791f, -0.0385897f, +0.0214922f, -0.0030053f, +0.0269204f, -0.0162873f, -0.0096810f,
  +0.0657610f, +0.1173898f, +0.0128360f, +0.0080318f, +0.0023523f, +0.0124622f, -0.0433645f, -0.0353486f,
  +0.0425998f, +0.1799629f, +0.1475713f, -0.0356872f, +0.1455306f, -0.0075081f, +0.0644567f, +0.0146470f,
  -0.0175363f, -0.0848884f, -0.0507314f, +0.0570000f, -0.0807405f, +0.0212049f, +0.0651122f, +0.0323558f,
  -0.0210766f, +0.2493360f, +0.1609864f, -0.1079639f, +0.0561422f, -0.0328317f, -0.1492508f, -0.0738892f,
  -0.0322824f, -0.1414499f, -0.0154866f, +0.0155473f, -0.0445663f, -0.0112932f, +0.0486687f, +0.0312047f,
  +0.0752477f, +0.1948138f, +0.0860880f, -0.0783219f, +0.1020330f, -0.0257493f, -0.0978398f, -0.0709670f,
  +0.1606877f, +0.3591221f, -0.0917830f, -0.3478397f, +0.2286718f, +0.1334665f, +0.1396633f, +0.1614779f,
  -0.0471109f, +0.0610269f, -0.0528096f, +0.0703942f, +0.0487206f, +0.0180890f, +0.0351923f, -0.0167122f,
  -0.0301420f, +0.1100385f, -0.0384738f, +0.0280485f, +0.0072707f, +0.0107503f, -0.0683000f, -0.0686920f,
  -0.0637112f, -0.3074845f, -0.2413051f, +0.0430366f, -0.3425052f, +0.0457116f, -0.0393657f, +0.1966688f,
  -0.1523278f, -0.1312024f, -0.1443498f, +0.0213162f, +0.0314606f, -0.0588816f, -0.0471704f, -0.1511575f,
  -0.0182486f, -0.1470551f, -0.0345250f, +0.0299027f, -0.0257863f, +0.0033394f, +0.0781049f, +0.0116655f,
  -0.0736987f, +0.1700224f, -0.0571779f, +0.0568679f, -0.1168589f, -0.0068982f, -0.1548498f, -0.0956919f,
  +0.0489729f, +0.0678351f, +0.1391946f, -0.0283778f, +0.0222845f, +0.0146031f, +0.0139849f, +0.0425951f,
  +0.0652472f, +0.1780804f, +0.0560103f, -0.0100940f, +0.0458653f, +0.0462931f, -0.1064552f, +0.0050480f,
  +0.2956550f, +0.1096337f, -0.0575737f, -0.0754436f, +0.1157588f, -0.2015430f, +0.0844985f, +0.0300061f,
  -0.1557254f, +0.2031171f, -0.1144386f, +0.0384340f, +0.1400678f, +0.0644005f, -0.0298942f, +0.0320200f,
  -0.0153355f, +0.0662471f, -0.0717665f, +0.0347828f, -0.0523745f, +0.0403586f, -0.0629775f, -0.0136749f,
  +0.0454561f, +0.0704195f, +0.0373448f, -0.0801229f, +0.0376426f, -0.0493146f, +0.0314579f, -0.0419450f,
  -0.0402404f, +0.0419118f, -0.0285321f, -0.0231957f, +0.0498947f, +0.0020227f, +0.0226716f, +0.0243581f
);

const float biases[4] = float[4](
  +0.1334138f, +0.1223396f, +0.1369881f, +0.1237224f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ACNet b24 Layer50 L0
//!WIDTH LUMA.w 2 *
//!HEIGHT LUMA.h 2 *
//!BIND TMP1_L0
//!COMPONENTS 1

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

vec4 hook() {
    vec2 fcoord = fract(TEX_BIND_L0_POS * TEX_BIND_L0_SIZE);
    vec2 pos = TEX_BIND_L0_POS + (vec2(0.5f) - fcoord) * TEX_BIND_L0_PT;

    ivec2 icoord = ivec2(fcoord * vec2(2.0f));
    int index = icoord.y * 2 + icoord.x;

    vec4 r = TEX_BIND_L0_TEX(pos);

    return vec4(clamp(float[4](r.x, r.y, r.z, r.w)[index], 0.0f, 1.0f), 0.0f, 0.0f, 1.0f);
}
