//!HOOK LUMA
//!DESC ARNet b48 Layer0 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND LUMA
//!SAVE FEAT_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF LUMA_texOff
#define TEX_BIND_L0_TEX LUMA_tex
#define TEX_BIND_L0_POS LUMA_pos
#define TEX_BIND_L0_SIZE LUMA_size
#define TEX_BIND_L0_PT LUMA_pt

const float kernels[36] = float[36](
  +0.4854116f, -0.3725513f, -0.7675050f, -0.2251073f, +0.1887994f, +0.0882942f, -0.2160757f, -0.1897760f,
  +0.0145293f, +0.4215991f, -0.9684948f, -0.6619477f, -0.1116398f, -0.2387696f, +0.8821303f, -0.0387792f,
  +0.3419710f, +0.4037848f, +0.2805180f, +0.1652173f, +0.0103785f, -0.4440752f, -0.4343893f, -0.0969185f,
  -0.1110138f, +0.1656352f, +0.2379507f, +0.2694910f, +0.0643552f, +0.3258777f, +0.4753979f, -0.0022714f,
  +0.0726857f, -0.0424334f, -0.6207606f, -0.1335087f
);

const float biases[4] = float[4](
  +0.0102347f, -0.0108375f, +0.0020026f, -0.0198109f
);

vec4 hook() {
    const vec4 r0 = vec4(
        TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)).x
    );
    const vec4 r4 = vec4(
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)).x
    );
    const float r8 = TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)).x;

    float sum[4] = biases;
    for(int n = 0; n < 4; n++) {
        const vec4 k0 = vec4(kernels[n * 9 + 0], kernels[n * 9 + 1], kernels[n * 9 + 2], kernels[n * 9 + 3]);
        const vec4 k4 = vec4(kernels[n * 9 + 4], kernels[n * 9 + 5], kernels[n * 9 + 6], kernels[n * 9 + 7]);
        const float k8 = kernels[n * 9 + 8];
        sum[n] += (dot(r0, k0) + dot(r4, k4) + r8 * k8);
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer0 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND LUMA
//!SAVE FEAT_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF LUMA_texOff
#define TEX_BIND_L0_TEX LUMA_tex
#define TEX_BIND_L0_POS LUMA_pos
#define TEX_BIND_L0_SIZE LUMA_size
#define TEX_BIND_L0_PT LUMA_pt

const float kernels[36] = float[36](
  +0.1959797f, -0.6496692f, +0.1520610f, -0.2420048f, +0.0529694f, +0.5970972f, +0.0292608f, -0.3083835f,
  -0.2306944f, +0.3673581f, -0.0945093f, +0.2278051f, +0.0932933f, +0.2588552f, -0.4698789f, +0.0592121f,
  -0.9906717f, +0.5735648f, -0.6544948f, +0.5313889f, +0.2438595f, +0.1962431f, -0.4804974f, +0.0413416f,
  +0.2167901f, -0.5532277f, +0.4575759f, -0.5482208f, -0.0266468f, +0.5993623f, -0.3753204f, +0.2201599f,
  -0.0890484f, +0.1760519f, -0.4689903f, +0.1686157f
);

const float biases[4] = float[4](
  +0.0212626f, +0.0015015f, +0.0102335f, +0.0086331f
);

vec4 hook() {
    const vec4 r0 = vec4(
        TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)).x
    );
    const vec4 r4 = vec4(
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)).x
    );
    const float r8 = TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)).x;

    float sum[4] = biases;
    for(int n = 0; n < 4; n++) {
        const vec4 k0 = vec4(kernels[n * 9 + 0], kernels[n * 9 + 1], kernels[n * 9 + 2], kernels[n * 9 + 3]);
        const vec4 k4 = vec4(kernels[n * 9 + 4], kernels[n * 9 + 5], kernels[n * 9 + 6], kernels[n * 9 + 7]);
        const float k8 = kernels[n * 9 + 8];
        sum[n] += (dot(r0, k0) + dot(r4, k4) + r8 * k8);
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer1 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND FEAT_L0
//!BIND FEAT_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L0_TEX FEAT_L0_tex
#define TEX_BIND_L0_POS FEAT_L0_pos
#define TEX_BIND_L0_SIZE FEAT_L0_size
#define TEX_BIND_L0_PT FEAT_L0_pt

#define TEX_BIND_L1_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L1_TEX FEAT_L1_tex
#define TEX_BIND_L1_POS FEAT_L1_pos
#define TEX_BIND_L1_SIZE FEAT_L1_size
#define TEX_BIND_L1_PT FEAT_L1_pt

const float kernels[288] = float[288](
  -0.0799492f, -0.0305667f, +0.2148844f, -0.0278844f, +0.0364351f, -0.0003011f, -0.0514670f, +0.0851207f,
  +0.1557330f, +0.0342227f, +0.0243576f, +0.1182399f, -0.1322936f, -0.2566109f, +0.1506777f, -0.1489424f,
  +0.0809513f, -0.1676586f, -0.1545480f, -0.0414512f, -0.0172220f, -0.0543783f, -0.2864368f, +0.2032183f,
  -0.2112329f, +0.1477877f, +0.1513663f, +0.1944349f, +0.0024978f, -0.1022068f, -0.1069413f, +0.0285323f,
  +0.0974691f, +0.2309541f, -0.1981163f, +0.1038793f, -0.1834802f, -0.0506436f, +0.1945813f, +0.0483191f,
  -0.0065201f, +0.0191580f, +0.3384753f, -0.0173233f, -0.3541376f, +0.1892169f, -0.0258012f, +0.0459890f,
  -0.1665581f, +0.1776834f, +0.2326893f, +0.0930807f, -0.0408048f, -0.0212046f, +0.0200595f, +0.0304445f,
  +0.1069335f, -0.5156435f, +0.1506595f, +0.0019423f, -0.0235687f, +0.2541104f, -0.1864278f, -0.1119670f,
  +0.1047114f, -0.3669145f, +0.1347766f, -0.1716728f, -0.2620945f, -0.3237101f, +0.3235300f, +0.1431812f,
  +0.0127781f, -0.1004650f, -0.2187832f, -0.1574334f, -0.0499239f, -0.1827354f, +0.0377039f, -0.0706351f,
  +0.6009716f, -0.0106307f, -0.0144622f, +0.0281200f, +0.3642150f, +0.0998918f, +0.0737333f, +0.4408250f,
  +0.3686750f, -0.2318670f, -0.0797173f, +0.0093727f, +0.1558685f, +0.1834035f, -0.0153304f, +0.0638404f,
  +0.4165178f, -0.1681120f, -0.2315949f, +0.1873564f, +0.2264335f, +0.0583791f, -0.6490388f, +0.2825345f,
  +0.1556971f, -0.0993567f, -0.0116547f, -0.0986884f, -0.0180641f, +0.3499034f, +0.1041715f, -0.3568769f,
  +0.0699272f, -0.0403288f, +0.0244398f, -0.2114787f, +0.1635954f, +0.1132371f, -0.0775190f, +0.1408184f,
  +0.4156940f, -0.3345236f, -0.1529002f, -0.4633719f, +0.1329410f, +0.2059603f, +0.0663116f, -0.0214401f,
  +0.0834717f, +0.0127124f, +0.5036356f, -0.0442032f, +0.3188298f, +0.1645730f, +0.2205339f, +0.1658643f,
  +0.1224302f, -0.2700955f, +0.3684612f, -0.3762647f, +0.2574880f, +0.1691824f, +0.3536293f, +0.0417749f,
  +0.0387604f, +0.0816072f, -0.0580516f, -0.0673195f, +0.0772657f, -0.1568731f, -0.0713699f, +0.2110124f,
  -0.0067784f, +0.0945811f, -0.1039390f, +0.4613731f, -0.0522655f, +0.1976147f, -0.1775949f, -0.1315866f,
  +0.1060004f, -0.1486911f, -0.1017131f, +0.0985199f, -0.0124638f, -0.1261731f, -0.1114488f, -0.0093774f,
  -0.3700822f, -0.1334037f, -0.0182535f, +0.0085823f, +0.2890792f, +0.3349598f, -0.2637714f, -0.0709934f,
  -0.0806914f, +0.2843624f, -0.1597570f, +0.0664976f, -0.2141330f, -0.3601465f, +0.1590379f, +0.0772244f,
  -0.0979796f, -0.0865046f, -0.1130596f, -0.1778532f, +0.0486945f, -0.0548881f, +0.3772679f, +0.1423363f,
  -0.0543966f, +0.1055225f, -0.3217470f, -0.0510894f, -0.0864237f, +0.0284928f, +0.0804183f, +0.0824534f,
  +0.2131238f, +0.1656648f, -0.2008674f, +0.0414888f, +0.0642185f, +0.1025790f, -0.2751728f, +0.1973122f,
  -0.0491034f, -0.0669915f, +0.1767430f, -0.0233557f, +0.0168303f, -0.0798123f, +0.1194489f, +0.1292850f,
  +0.0947299f, -0.1087974f, +0.0462922f, -0.0653237f, -0.0828623f, -0.2147420f, -0.3560056f, +0.2605377f,
  -0.1916668f, -0.2535912f, -0.2560810f, +0.2209951f, +0.2074960f, -0.4126736f, -0.5733393f, +0.0696876f,
  +0.3597503f, +0.1485703f, -0.3765091f, +0.2672029f, +0.1768994f, +0.9063337f, +0.5153304f, -0.1462169f,
  +0.0086875f, +0.3052293f, -0.0148272f, -0.0905822f, -0.2550562f, +0.1444020f, -0.1318517f, -0.1833675f,
  +0.2153746f, -0.2872889f, -0.1057002f, +0.0036220f, -0.0743979f, +0.3777001f, -0.3159719f, +0.0368831f,
  +0.1219308f, -0.1298278f, +0.0336089f, +0.1719171f, -0.0554604f, -0.2042159f, +0.3249345f, +0.0327869f,
  -0.1918168f, +0.0621263f, -0.2250034f, +0.2072477f, +0.1118424f, -0.1972458f, -0.2391591f, +0.1123585f,
  +0.0753275f, +0.1799053f, +0.4375915f, +0.0741230f, -0.1445383f, -0.2134996f, -0.4128994f, +0.1236382f,
  -0.1572893f, +0.2739992f, -0.0545198f, -0.0012109f, +0.2559614f, +0.4071348f, -0.8696265f, +0.0158475f
);

const float biases[4] = float[4](
  +0.0520731f, -0.0955820f, +0.0051136f, -0.0312897f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer1 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND FEAT_L0
//!BIND FEAT_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L0_TEX FEAT_L0_tex
#define TEX_BIND_L0_POS FEAT_L0_pos
#define TEX_BIND_L0_SIZE FEAT_L0_size
#define TEX_BIND_L0_PT FEAT_L0_pt

#define TEX_BIND_L1_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L1_TEX FEAT_L1_tex
#define TEX_BIND_L1_POS FEAT_L1_pos
#define TEX_BIND_L1_SIZE FEAT_L1_size
#define TEX_BIND_L1_PT FEAT_L1_pt

const float kernels[288] = float[288](
  +0.1420574f, +0.2120778f, -0.1598407f, +0.1663867f, +0.0839871f, +0.1236808f, +0.3647901f, +0.0333835f,
  +0.0005342f, +0.0393962f, -0.0410819f, -0.1868116f, -0.1559751f, +0.0198614f, -0.3231816f, -0.1142699f,
  -0.1622651f, -0.1916707f, +0.1158584f, -0.1115368f, -0.2032820f, +0.0389386f, -0.0401171f, -0.2741735f,
  -0.2874808f, +0.3582259f, +0.0058336f, -0.0628033f, +0.2911344f, +0.0700076f, +0.3930224f, +0.0361682f,
  +0.0037158f, +0.0441873f, +0.2061149f, +0.0942648f, +0.1735322f, +0.1039650f, -0.0079050f, +0.0907019f,
  -0.0877617f, +0.1569783f, -0.0018095f, +0.3085344f, +0.0097649f, +0.0174462f, -0.1183926f, +0.1556446f,
  -0.0121461f, +0.1514473f, +0.2251479f, -0.0368441f, +0.1133173f, +0.1211202f, +0.1351074f, +0.1573519f,
  -0.1301479f, -0.0561288f, +0.0047689f, +0.0020740f, +0.3174878f, +0.0027822f, +0.1045143f, -0.1367187f,
  -0.0936851f, -0.0968665f, +0.1306680f, -0.2945898f, +0.3576102f, +0.1240425f, -0.0932019f, -0.1405175f,
  +0.1911367f, -0.0909298f, +0.0678912f, -0.0391064f, -0.0688772f, -0.2553272f, -0.0828465f, +0.1269327f,
  +0.0431801f, +0.0790706f, +0.3662439f, -0.2683873f, -0.1925833f, -0.0409640f, +0.1036136f, -0.1165392f,
  -0.1024009f, -0.0945245f, -0.0483435f, -0.0699061f, -0.0507355f, +0.1170381f, +0.1762041f, -0.3035973f,
  +0.0121863f, -0.0362520f, +0.3381685f, +0.1788860f, +0.1006421f, +0.1349456f, +0.1212462f, -0.1172783f,
  +0.0273021f, +0.3726710f, +0.3517416f, +0.0354014f, +0.0060396f, -0.5128152f, -0.1526899f, -0.1448045f,
  -0.0826755f, -0.2956594f, +0.1926292f, -0.3902214f, -0.0308743f, -0.0055144f, -0.0635071f, +0.1853231f,
  +0.1748895f, +0.4021399f, -0.4082308f, +0.1979025f, +0.0404616f, -0.1777623f, +0.1515518f, +0.1448600f,
  +0.0957960f, +0.5871403f, -0.5523504f, +0.1043237f, -0.0164425f, +0.0600808f, -0.1906826f, -0.2942033f,
  -0.1254602f, +0.1251597f, -0.5486106f, +0.0532871f, +0.0002743f, +0.0622801f, +0.1964800f, -0.0473376f,
  -0.0850615f, -0.1038991f, +0.0761485f, -0.0330167f, -0.1056246f, -0.2238458f, -0.1617321f, -0.1908077f,
  +0.0722699f, +0.0742829f, +0.2229467f, -0.1063727f, -0.0079261f, +0.0217351f, +0.2185681f, +0.1674628f,
  +0.1027541f, +0.0167082f, -0.1070887f, +0.1249874f, -0.1797370f, +0.1002533f, -0.0890317f, +0.1336514f,
  +0.0254640f, +0.0190614f, +0.5893609f, -0.1833839f, -0.0862528f, +0.0769033f, +0.2524185f, +0.0505857f,
  -0.1461995f, +0.1666390f, +0.5662216f, -0.0705465f, -0.0615284f, -0.2475385f, +0.1022503f, -0.0432283f,
  -0.2157671f, +0.0676049f, +0.0957821f, -0.0833498f, +0.3211077f, -0.2146521f, +0.0012920f, +0.0717596f,
  +0.0283985f, +0.4670634f, -0.4356954f, +0.0984463f, +0.3644427f, -0.0906617f, -0.2040523f, -0.0423929f,
  +0.0532384f, +0.3756002f, -0.3749030f, +0.1477873f, +0.0544076f, +0.1681490f, -1.2062178f, +0.0002747f,
  +0.1090928f, +0.1481224f, -0.5713207f, -0.1231244f, -0.2456138f, -0.2346133f, +0.3470761f, -0.2353150f,
  -0.1335443f, +0.1730475f, +0.5891899f, +0.1605219f, +0.1312745f, -0.0777458f, +0.5077508f, -0.2087139f,
  +0.1812755f, -0.2148006f, +0.8353319f, -0.1229569f, +0.2487142f, -0.1728648f, -0.6472438f, +0.2056763f,
  -0.1895417f, +0.1687992f, +0.0177043f, +0.0782724f, -0.1957473f, -0.2741165f, +0.0385030f, -0.0418946f,
  -0.2205173f, +0.3567093f, -0.0855158f, -0.0450343f, +0.0633288f, +0.3988346f, -0.3106675f, +0.3568682f,
  -0.3638430f, -0.7862012f, +0.0834632f, -0.0547630f, -0.1459486f, -0.3634146f, +0.9320913f, +0.2688276f,
  -0.0062465f, +0.1803588f, -0.1013371f, -0.0977306f, +0.3087369f, +0.0924032f, -0.2346587f, +0.0147597f,
  -0.1543601f, +0.1894105f, +0.2482465f, +0.1187844f, +0.3398261f, +0.1516266f, -0.0301655f, -0.0594139f,
  -0.3312756f, -0.0233685f, -0.1351863f, -0.1522723f, +0.0642453f, +0.0505265f, +0.1442343f, +0.0710426f,
  +0.3542881f, -0.0398152f, -0.0161307f, +0.0407298f, -0.0196565f, -0.1473954f, +0.1103321f, +0.0914445f
);

const float biases[4] = float[4](
  +0.0383952f, +0.0742070f, -0.0089153f, -0.0826266f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer2 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND FEAT_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L2_TEX FEAT_L0_tex
#define TEX_BIND_L2_POS FEAT_L0_pos
#define TEX_BIND_L2_SIZE FEAT_L0_size
#define TEX_BIND_L2_PT FEAT_L0_pt

const float kernels[288] = float[288](
  +0.1792138f, -0.4189586f, +0.2303808f, -0.4324668f, -0.0044176f, +0.0219362f, +0.2879274f, -0.0417402f,
  +0.2988822f, -0.2486999f, +0.1781805f, -0.4201734f, +0.2314625f, +0.3705319f, +0.3448603f, +0.0097479f,
  -0.1069410f, -0.1473675f, +0.0178051f, -0.2031392f, +0.0365442f, -0.0862499f, -0.0469868f, -0.0785916f,
  +0.1799989f, -0.1433900f, +0.1853036f, -0.3185182f, +0.2282961f, +0.0634328f, +0.0200660f, -0.2219817f,
  -0.1420208f, -0.1628353f, +0.0660863f, -0.1942659f, -0.0523849f, +0.1626420f, -0.0453677f, -0.2056155f,
  +0.0364203f, -0.0339531f, +0.1170432f, -0.0044649f, +0.0125802f, -0.0171928f, +0.0497292f, -0.2743548f,
  +0.1116236f, -0.4489945f, -0.0037377f, -0.0903473f, +0.1478858f, -0.1820710f, -0.0396362f, -0.0849812f,
  -0.0934683f, -0.5047685f, +0.1167145f, -0.0959956f, -0.0008501f, -0.2781920f, +0.1346107f, -0.3093882f,
  -0.0619728f, -0.1768518f, +0.3691110f, -0.0721575f, +0.0089594f, +0.1057101f, -0.1063486f, +0.1954475f,
  -0.1989718f, -0.2409324f, -0.2559299f, -0.4460873f, +0.1175817f, +0.2828594f, +0.0039754f, -0.0531313f,
  +0.1741454f, +0.1586167f, +0.2956495f, -0.3736620f, +0.0397785f, +0.3712077f, +0.0357505f, +0.0400812f,
  +0.0485842f, -0.1608757f, -0.1008735f, -0.2575056f, +0.0298437f, -0.0921192f, +0.0628075f, -0.0247625f,
  -0.1332492f, +0.1041444f, -0.0049507f, +0.0532570f, +0.1196337f, -0.0604212f, -0.0834052f, -0.0482523f,
  +0.0206349f, +0.0999884f, +0.0046431f, -0.0426282f, -0.1315131f, +0.4105467f, -0.2526652f, +0.1234736f,
  +0.0676933f, +0.1925548f, -0.2804846f, -0.0316029f, -0.0706089f, -0.0162371f, +0.1080399f, +0.0824174f,
  +0.2952614f, +0.2306315f, -0.0859193f, +0.0669707f, -0.0234217f, -0.1893526f, +0.2349257f, -0.0477068f,
  +0.2079555f, +0.1680303f, +0.1101128f, +0.2061818f, +0.2526830f, +0.1760155f, -0.2919373f, +0.0752668f,
  -0.0924380f, -0.1016765f, +0.0290456f, +0.0830031f, -0.1539222f, -0.0956385f, -0.0661520f, -0.0209616f,
  +0.2134071f, -0.0017283f, -0.0629877f, -0.0395086f, +0.1993145f, -0.0553602f, +0.4211500f, -0.0573431f,
  -0.2654296f, -0.1185502f, +0.0641089f, -0.0945631f, +0.2394220f, -0.5108960f, +0.4685745f, -0.0873119f,
  -0.0447178f, -0.3977627f, -0.1267827f, -0.0998598f, +0.2075896f, +0.2008289f, +0.0345912f, +0.0953061f,
  -0.4163908f, +0.2641563f, +0.0408891f, +0.0753986f, -0.2583012f, +0.1015502f, +0.2859719f, -0.1763504f,
  +0.0763046f, +0.0174658f, +0.2934328f, +0.0513285f, +0.4540061f, +0.0759589f, +0.2141827f, -0.0295535f,
  -0.0831574f, -0.0610665f, +0.1641612f, -0.0889820f, +0.3939833f, +0.0986208f, -0.0478135f, -0.3242457f,
  -0.1374957f, -0.1513113f, -0.0872023f, +0.0671171f, +0.1631694f, -0.1408183f, +0.0669135f, -0.0900648f,
  +0.4258131f, -0.0122783f, -0.0309344f, +0.1928110f, -0.0570769f, +0.1727092f, -0.0866462f, -0.4635325f,
  +0.2132491f, +0.1826040f, +0.1956152f, +0.1241312f, -0.0446357f, +0.0597151f, -0.0647812f, -0.6590222f,
  -0.2246591f, +0.0530141f, +0.0294649f, -0.0651519f, -0.1236231f, +0.0050364f, +0.3064368f, +0.0547653f,
  +0.0496165f, +0.0512950f, -0.0769336f, -0.0315166f, +0.0206480f, -0.1982712f, +0.4087689f, +0.0600628f,
  -0.0395344f, +0.2500075f, -0.2849260f, -0.0655935f, -0.3039075f, -0.2365178f, +0.4264022f, -0.1512535f,
  +0.0333270f, -0.1945508f, -0.0126074f, -0.2562427f, -0.0178156f, +0.0248819f, -0.0229305f, -0.0148379f,
  +0.0119249f, +0.0827384f, -0.0596424f, -0.1757331f, -0.3515891f, -0.3232949f, +0.4705361f, +0.2325198f,
  -0.0697572f, -0.0258760f, -0.0349794f, -0.0841103f, +0.0392427f, -0.0081037f, +0.1407386f, -0.5903346f,
  -0.1195816f, +0.0530898f, +0.0262799f, -0.1382299f, +0.0978165f, +0.0972541f, -0.0459682f, +0.0400160f,
  -0.0452323f, -0.1070126f, -0.0938183f, -0.1273881f, -0.0314267f, -0.0365151f, -0.0429158f, -0.0079582f,
  -0.0433711f, +0.2380812f, -0.1270554f, -0.0412659f, -0.0890160f, +0.1175792f, -0.0375989f, -0.3207071f
);

const float biases[4] = float[4](
  +0.1101404f, +0.0171409f, +0.0169670f, -0.0875960f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer2 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND FEAT_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L2_TEX FEAT_L1_tex
#define TEX_BIND_L2_POS FEAT_L1_pos
#define TEX_BIND_L2_SIZE FEAT_L1_size
#define TEX_BIND_L2_PT FEAT_L1_pt

const float kernels[288] = float[288](
  +0.0837711f, -0.1489619f, +0.0950430f, +0.0001406f, -0.0070031f, +0.2490751f, -0.3870492f, -0.0104711f,
  -0.0880138f, -0.2150474f, +0.1854578f, +0.2126027f, -0.0360995f, +0.2538099f, -0.5434483f, +0.1602687f,
  +0.0052475f, -0.1506708f, +0.2362587f, +0.2796097f, +0.1842488f, +0.0570430f, -0.3312143f, -0.0997125f,
  -0.1023233f, -0.3285938f, -0.1843510f, +0.0984917f, -0.1586820f, +0.3388953f, -0.0802723f, +0.1409412f,
  +0.2645819f, -0.2467918f, +0.0533412f, +0.3485623f, -0.1194264f, +0.3409970f, -0.5241561f, +0.1477434f,
  +0.0430906f, -0.0194870f, +0.1481102f, +0.1755178f, +0.3053239f, +0.2537217f, -0.3686806f, -0.1857073f,
  -0.1783615f, -0.0105151f, -0.0837843f, -0.0192899f, +0.1234750f, +0.0006070f, -0.0111030f, +0.0449878f,
  -0.1138090f, -0.2788525f, +0.4710774f, +0.1286367f, -0.0081481f, -0.0108785f, -0.0420077f, -0.0179398f,
  -0.0792908f, -0.3043318f, -0.0492362f, +0.0100845f, +0.2729976f, -0.1759959f, +0.1363782f, -0.4687582f,
  +0.0023375f, +0.0547059f, -0.2306806f, -0.0731690f, -0.1451429f, -0.2490850f, +0.3525770f, +0.0276056f,
  +0.1430916f, +0.1572959f, +0.1552950f, -0.1752275f, +0.1074231f, -0.4969389f, +0.4200400f, +0.0307538f,
  -0.0988618f, -0.0791145f, -0.0425762f, -0.0178647f, +0.0757576f, +0.0129390f, +0.3023910f, +0.0840540f,
  +0.3456538f, -0.1115228f, +0.2730315f, -0.3387899f, +0.2162061f, -0.0196342f, +0.0186651f, +0.1013498f,
  +0.1497087f, +0.1225966f, -0.1273302f, -0.2809842f, -0.0782575f, -0.2319626f, +0.0402255f, +0.3732905f,
  -0.0079648f, +0.2493350f, -0.0040609f, +0.0511199f, -0.1164031f, -0.0297425f, -0.2705669f, +0.3569387f,
  +0.0095189f, -0.1036014f, -0.0638493f, -0.1871908f, -0.0267892f, +0.1358102f, -0.1954186f, +0.1802495f,
  -0.1356905f, -0.1435783f, +0.2164259f, +0.0623888f, -0.3158409f, -0.2233979f, +0.2289495f, +0.2571457f,
  +0.1055906f, +0.1088902f, -0.0368576f, +0.0582405f, +0.0380721f, +0.3416375f, -0.2132838f, -0.2246860f,
  +0.2331319f, -0.2164141f, +0.2394480f, +0.2336038f, +0.1113891f, -0.4463278f, +0.1681015f, -0.0512791f,
  -0.2576864f, -0.0030051f, -0.3173501f, +0.4806590f, +0.2273386f, -0.2027495f, +0.1626592f, -0.0033477f,
  -0.0611709f, +0.3712833f, +0.2257352f, +0.0389571f, +0.1536739f, -0.0735672f, +0.2233656f, -0.0381905f,
  +0.0733285f, -0.0425916f, -0.1141860f, +0.0698441f, -0.0876903f, -0.2722932f, -0.0031827f, +0.0586062f,
  -0.0119698f, +0.2439116f, +0.1183628f, -0.0016978f, -0.3019949f, -0.0013510f, -0.0676026f, -0.1330380f,
  +0.0476953f, +0.0370899f, -0.3448943f, +0.1771097f, -0.0097144f, -0.1310023f, +0.1395368f, -0.0272288f,
  +0.0589121f, +0.0846279f, -0.0429231f, +0.1069127f, +0.0839659f, -0.0028895f, -0.0560818f, +0.1913870f,
  +0.1973623f, +0.0869033f, -0.0077972f, +0.2688777f, -0.3513249f, -0.1699212f, +0.2593787f, +0.5278539f,
  -0.2102870f, +0.0955008f, -0.1817255f, -0.0161117f, +0.1978109f, +0.0198802f, -0.0770855f, +0.5218207f,
  +0.0152854f, -0.0403381f, +0.0535836f, +0.0918962f, -0.1221469f, +0.0827950f, -0.1546233f, -0.0399222f,
  +0.2165436f, -0.0830953f, -0.1979268f, -0.1575322f, +0.3790620f, -0.2496638f, +0.3334673f, -0.1331322f,
  +0.1726833f, -0.1363738f, -0.1594904f, -0.0314633f, +0.0040796f, -0.0534614f, +0.1397922f, -0.0787994f,
  -0.3621771f, -0.1322417f, +0.1973234f, +0.0925436f, +0.1901543f, -0.3420323f, +0.0599280f, -0.1211344f,
  +0.3953787f, -0.1106887f, +0.2293026f, -0.2557172f, +0.2262918f, +0.0863914f, +0.0948521f, -0.4919664f,
  -0.0723436f, -0.2454655f, -0.0417965f, -0.3063846f, +0.0678572f, -0.0183603f, -0.1335142f, -0.0937916f,
  -0.0571902f, -0.0152822f, +0.0102217f, -0.1804907f, -0.0124764f, +0.1474252f, -0.1779911f, -0.2315318f,
  -0.0515446f, -0.1288938f, +0.1959429f, -0.2508506f, +0.0616582f, -0.0391303f, +0.0200673f, -0.6095478f,
  -0.0144803f, +0.0115653f, +0.0616269f, -0.1139847f, +0.0139665f, -0.0326935f, -0.0638129f, -0.3308664f
);

const float biases[4] = float[4](
  -0.0205478f, +0.0375715f, +0.0824116f, -0.0342983f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer3 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0565559f, +0.0841451f, -0.0051343f, +0.1861715f, -0.0393284f, -0.0010159f, +0.0877249f, -0.1927183f,
  -0.1004448f, +0.0438985f, -0.2487262f, -0.0192209f, -0.0847416f, -0.1039100f, -0.0114251f, +0.0392316f,
  -0.0266175f, +0.0385115f, -0.1705713f, +0.1607725f, +0.2825476f, -0.0658298f, -0.0595922f, +0.0510985f,
  -0.0816738f, -0.1233969f, -0.0117398f, +0.0028104f, +0.2324871f, +0.0000101f, +0.0785051f, +0.1517343f,
  -0.2249109f, -0.0558816f, -0.1944377f, -0.0989702f, +0.1150957f, -0.7149939f, +0.1741499f, -0.0640524f,
  +0.0766387f, -0.0176458f, +0.2534111f, +0.0263738f, -0.0059988f, -0.3590461f, -0.0662151f, +0.1138362f,
  +0.0988631f, +0.0032433f, -0.3506849f, -0.3522767f, +0.2074046f, +0.1501271f, -0.0130939f, +0.1302001f,
  -0.1404979f, +0.0457147f, -0.1626624f, -0.0473042f, +0.1087397f, -0.1245585f, +0.2170448f, -0.0388849f,
  -0.0949611f, -0.0266441f, -0.0618638f, -0.0128073f, -0.0592875f, -0.1725109f, +0.2919407f, -0.1574569f,
  +0.1381675f, +0.1315979f, -0.0502950f, -0.2623380f, +0.0337792f, +0.2129268f, +0.0326140f, +0.0373851f,
  +0.1093125f, +0.1018378f, -0.2722028f, -0.5170754f, -0.1409532f, -0.1431919f, -0.0739421f, +0.1251334f,
  +0.1961182f, -0.2481592f, -0.0387417f, -0.0547512f, +0.2828635f, +0.2150569f, -0.1808489f, +0.0468873f,
  +0.0419563f, -0.0875766f, -0.0275685f, -0.2999536f, -0.1941449f, -0.2769806f, -0.0714680f, +0.2878027f,
  +0.1397718f, +0.0556299f, -0.0741827f, -0.1255817f, +0.1231431f, -0.0649542f, -0.1161086f, +0.4142309f,
  +0.4045129f, -0.1206646f, -0.1268242f, +0.0242660f, -0.1694864f, +0.2187991f, -0.2217637f, -0.0574738f,
  +0.0522612f, -0.1466605f, -0.1275854f, -0.0939963f, +0.0174006f, +0.0807090f, -0.1478158f, -0.2233816f,
  +0.1308025f, +0.1765893f, +0.2440922f, -0.2423424f, -0.0112717f, +0.1509679f, -0.2121472f, +0.1086633f,
  +0.1957925f, +0.0494197f, +0.0915698f, +0.0012643f, +0.2168000f, +0.1766038f, -0.1740044f, -0.0006110f,
  -0.0033689f, +0.1668441f, +0.2557651f, +0.4296421f, +0.0656045f, +0.0084544f, +0.2967008f, -0.0976879f,
  -0.1328543f, +0.0159403f, +0.0486880f, -0.0908365f, -0.2599642f, +0.2093732f, +0.0429637f, +0.0013883f,
  -0.1929588f, -0.0556930f, -0.1116334f, -0.2358613f, -0.1763275f, -0.0029516f, -0.0407209f, -0.0774022f,
  -0.0400069f, -0.2074822f, +0.0512094f, +0.0470420f, +0.0623831f, -0.2827636f, -0.1241079f, -0.0972086f,
  +0.0063374f, -0.1785177f, +0.1554731f, +0.2857760f, +0.4852442f, -0.3921227f, -0.1288233f, +0.0442329f,
  -0.0065276f, +0.0302038f, -0.1628586f, -0.1195208f, +0.2702649f, +0.0175639f, -0.2998042f, -0.1147854f,
  -0.1618141f, +0.1299627f, -0.1591016f, +0.0064878f, +0.1523978f, +0.0931017f, +0.0682524f, +0.0852230f,
  +0.2620160f, -0.1660868f, +0.0648522f, +0.0202872f, +0.1697678f, -0.0274271f, -0.0026779f, -0.1426886f,
  -0.2221711f, +0.2054096f, -0.2545407f, -0.1927683f, +0.2790639f, -0.1225893f, -0.1250850f, +0.1343591f,
  -0.0991001f, -0.0309127f, -0.0223313f, +0.2399493f, +0.3850942f, -0.1640186f, +0.2217557f, -0.1796284f,
  -0.0654283f, +0.1666950f, +0.0684258f, +0.3063082f, +0.2820722f, +0.1682704f, +0.3855172f, +0.2418669f,
  -0.3143452f, +0.1165773f, +0.3193542f, -0.2369966f, -0.1521054f, -0.6033307f, -0.4143383f, +0.0669381f,
  +0.0436223f, -0.1714045f, +0.0445808f, +0.0391468f, -0.0800927f, -0.1109428f, -0.1133928f, +0.0014774f,
  -0.2812325f, +0.4003710f, +0.4754544f, +0.1253508f, +0.8225626f, -0.2766821f, +0.2978086f, +0.2187490f,
  -0.1488203f, -0.0642241f, +0.0432185f, -0.2614414f, +0.1134622f, -0.1734929f, -0.6025606f, +0.1438269f,
  +0.0665066f, +0.1106326f, -0.1684170f, -0.1160103f, +0.0503467f, +0.0117364f, +0.1125715f, +0.0477334f,
  -0.0934359f, -0.0252713f, +0.2030860f, -0.0641954f, +0.7382164f, -0.1103744f, -0.1358959f, +0.5683772f,
  -0.0203412f, -0.2308202f, -0.0142753f, -0.0032740f, -0.1724478f, -0.4839293f, +0.3577642f, +0.5565216f
);

const float biases[4] = float[4](
  +0.0387535f, -0.1610019f, -0.0025413f, -0.0935250f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer3 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1981069f, +0.3880858f, -0.0436647f, +0.0835520f, +0.0153266f, +0.2974814f, +0.3406852f, -0.0871389f,
  -0.0922732f, +0.1675959f, -0.0640153f, -0.2805022f, -0.3609614f, +0.0685216f, +0.1586014f, +0.0253535f,
  +0.1493402f, +0.0852852f, +0.2703500f, -0.0771606f, +0.0494560f, -0.0698707f, +0.1689462f, -0.0183885f,
  +0.0786427f, +0.0390382f, -0.3896767f, -0.0450579f, -0.0560718f, -0.1457085f, +0.3455317f, -0.0356108f,
  -0.0353401f, +0.1605771f, -0.0168934f, +0.1789946f, +0.0346350f, +0.0883663f, -0.1140258f, -0.0925295f,
  -0.1915682f, -0.1112788f, +0.1134699f, -0.0851774f, +0.0956062f, -0.2892273f, +0.0660943f, -0.1722333f,
  -0.1945244f, -0.0088898f, -0.1524363f, -0.1471623f, +0.0911149f, +0.0002039f, +0.0747761f, -0.1237609f,
  +0.0646910f, -0.1995640f, +0.0870791f, +0.0908908f, -0.1743400f, -0.1836759f, +0.3293836f, -0.1483233f,
  +0.0273168f, -0.0678381f, +0.2762251f, -0.1117942f, +0.1020886f, +0.0833484f, +0.1652457f, -0.2089313f,
  -0.0728781f, -0.0070815f, +0.3071882f, -0.0630224f, -0.4950138f, +0.3625926f, +0.0710310f, +0.0517160f,
  -0.1945105f, -0.6295217f, +0.4217605f, +0.2619520f, -0.4426154f, +0.4640849f, -0.0166038f, +0.5335733f,
  -0.0722316f, -0.4610209f, +0.9704769f, +0.2489793f, -0.4975622f, -0.0289702f, +0.6815190f, -0.1200761f,
  +0.0776893f, -0.1328662f, +0.0545814f, -0.0289848f, -0.1383336f, -0.1402218f, -0.1654154f, -0.0284168f,
  +0.0607770f, +0.1954602f, -0.2591822f, -0.1821995f, -0.2285155f, +0.3749652f, -0.1790125f, -0.0578773f,
  +0.3063633f, -0.3319578f, -0.0935127f, -0.0735192f, +0.0315367f, +0.0185014f, +0.0942603f, +0.5093178f,
  +0.0412727f, +0.0111433f, +0.2058888f, +0.1766418f, +0.2035686f, -0.0540743f, +0.0988983f, -0.1485522f,
  -0.2202731f, +0.0176217f, -0.0670733f, +0.0803062f, +0.0546395f, -0.1755573f, -0.1364560f, +0.1041666f,
  -0.0652451f, +0.1932571f, -0.1440999f, -0.1350307f, +0.0342551f, +0.1919086f, -0.2055584f, -0.1234135f,
  -0.0176077f, +0.0149381f, +0.0123643f, +0.0725925f, -0.1496743f, +0.0232369f, +0.1206085f, -0.0248408f,
  +0.2291985f, +0.2836441f, -0.2972507f, -0.2885578f, -0.1060450f, +0.1446613f, +0.3164655f, -0.1206305f,
  -0.2950677f, -0.0023083f, -0.2280976f, +0.2089501f, +0.2018021f, +0.0268604f, +0.3433521f, -0.2553318f,
  +0.0034287f, -0.2477767f, +0.1201472f, -0.4295068f, -0.2825419f, +0.2938623f, +0.0964462f, -0.2015730f,
  +0.2022494f, +0.0197505f, -0.0774435f, +0.0984135f, -0.1826061f, -0.2500432f, +0.1321185f, -0.0690422f,
  +0.0874852f, +0.0731222f, -0.1759978f, +0.0982504f, +0.2722923f, +0.3363658f, +0.0960754f, -0.3563916f,
  +0.0622464f, -0.0466884f, +0.1162744f, +0.3083966f, +0.0576255f, -0.0234446f, -0.0930724f, +0.0417372f,
  -0.0421039f, +0.0048792f, +0.0140529f, +0.1085800f, +0.0045210f, +0.0194059f, +0.0438860f, -0.1708146f,
  -0.0243126f, +0.2341336f, -0.2025136f, -0.0420679f, -0.0736764f, -0.0389491f, -0.1209502f, -0.1379651f,
  +0.1989701f, -0.0605160f, +0.4613107f, +0.1714108f, +0.2191239f, -0.0198369f, -0.0723495f, +0.1306051f,
  -0.1747117f, +0.0084717f, -0.2119380f, -0.1339034f, -0.0684677f, -0.1264227f, -0.1202218f, +0.0207612f,
  -0.1124464f, +0.0820097f, -0.1404856f, +0.0563976f, +0.1228227f, +0.0418422f, -0.1165764f, +0.1081418f,
  -0.3479927f, +0.1840027f, +0.1379051f, -0.0632004f, +0.2238101f, -0.0254067f, -0.0823346f, +0.0610796f,
  +0.1390552f, -0.2191906f, -0.2700769f, +0.0401329f, -0.0662130f, +0.2250213f, -0.2864332f, -0.0942237f,
  +0.0692447f, +0.2892109f, -0.2910152f, +0.0497135f, -0.1092146f, +0.3840735f, +0.0669180f, -0.0640418f,
  +0.0009034f, +0.0630375f, +0.5061957f, +0.2635188f, +0.0370629f, +0.4104293f, -0.1683010f, -0.0250381f,
  +0.0788205f, +0.1553734f, +0.0912492f, -0.1471659f, -0.0460417f, -0.0797564f, +0.3116465f, +0.0267274f,
  -0.0638348f, -0.0288293f, -0.4488080f, +0.1678886f, -0.1701311f, -0.0661317f, +0.1102732f, -0.2515429f
);

const float biases[4] = float[4](
  +0.0149317f, +0.0030332f, +0.1177999f, -0.3717356f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer4 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0441554f, -0.0462631f, +0.4296448f, +0.0218545f, -0.0480544f, -0.0442388f, -0.0807689f, -0.2596809f,
  +0.0492123f, -0.0615295f, +0.0304486f, +0.0713933f, -0.0642697f, -0.1012288f, +0.0516276f, -0.3052797f,
  +0.0971262f, +0.0947791f, +0.3680927f, -0.0463279f, +0.3064799f, -0.0320756f, +0.0672532f, -0.2553855f,
  +0.2300814f, +0.0082208f, -0.0243969f, +0.5434094f, -0.2548219f, +0.3733486f, -0.0795172f, -0.0788487f,
  +0.0024341f, -0.1240118f, -0.2684757f, -0.0889047f, -0.2156414f, -0.0073066f, -0.1005738f, -0.0960173f,
  +0.0658795f, -0.5195538f, +0.0314269f, -0.0634202f, +0.0461922f, +0.1642054f, +0.1712764f, -0.2487888f,
  -0.2544704f, -0.0055053f, +0.1441606f, +0.0649820f, +0.0507118f, -0.2169453f, +0.1611190f, -0.2123083f,
  +0.2251350f, -0.2863905f, +0.0178752f, +0.1047340f, +0.0128586f, -0.1106451f, -0.1117737f, -0.2169529f,
  +0.0584457f, +0.0981975f, -0.0739459f, +0.1221058f, +0.1782437f, +0.0717291f, -0.1268215f, -0.1705780f,
  -0.0266701f, -0.1645559f, +0.1967135f, +0.0386141f, +0.1207063f, +0.0633586f, +0.1942133f, -0.0671842f,
  +0.1443299f, +0.1038391f, +0.2431318f, +0.5520569f, -0.0706480f, -0.0277734f, +0.2930558f, -0.2605354f,
  -0.1801217f, +0.1137318f, +0.2314907f, +0.2136303f, +0.2017638f, +0.0448794f, +0.0693403f, -0.0442020f,
  -0.2285109f, -0.1742422f, +0.1510239f, -0.0590906f, +0.2047046f, +0.6844085f, -0.0683326f, +0.1774876f,
  +0.0520948f, -0.0530686f, +0.1913849f, +0.0753267f, +0.0756031f, +0.2692419f, -0.2142790f, +0.1598205f,
  -0.2204766f, -0.0732267f, +0.2015526f, -0.2160338f, -0.0697600f, +0.2367841f, -0.1867989f, -0.2639333f,
  -0.2373161f, -0.1734885f, +0.0805216f, -0.1586863f, -0.0743722f, +0.6133761f, -0.1414978f, -0.0156424f,
  +0.0095014f, +0.0133719f, -0.0294784f, -0.0816719f, -0.2493854f, +0.5590367f, -0.0563048f, +0.1484406f,
  +0.0309105f, +0.0489686f, -0.2478046f, -0.0035547f, -0.0495186f, +0.1331885f, +0.0567217f, +0.0162166f,
  -0.0843656f, -0.1080222f, -0.0443479f, +0.0324495f, -0.1580044f, +0.0112077f, +0.0816235f, -0.0605537f,
  -0.1286695f, -0.1596957f, -0.0714798f, +0.2845047f, +0.0651878f, -0.1048888f, +0.0094146f, -0.0564878f,
  +0.0656152f, -0.1800010f, +0.0014578f, +0.0081803f, +0.1398456f, +0.0356746f, +0.1752466f, +0.0234913f,
  +0.1255694f, -0.1789503f, +0.0950752f, -0.0595989f, +0.0626086f, +0.0306214f, +0.1287312f, -0.1414835f,
  -0.1164888f, +0.0953187f, +0.0130701f, -0.2403002f, +0.1926343f, -0.2986472f, +0.1602559f, -0.1413141f,
  +0.1646199f, -0.1220749f, +0.3146205f, -0.3119924f, +0.0539383f, +0.0339077f, -0.0175193f, +0.1518859f,
  -0.3033503f, +0.2022628f, +0.0281080f, +0.0152614f, +0.1615025f, -0.3609891f, +0.2692717f, +0.0444257f,
  -0.0159890f, -0.0689560f, -0.1015439f, -0.2352110f, +0.0963856f, -0.1402242f, -0.2354383f, +0.1073615f,
  +0.2077007f, -0.1662487f, -0.0474987f, -0.1882563f, +0.1786122f, +0.0176368f, -0.0074250f, +0.4405636f,
  -0.0024306f, +0.2927101f, -0.3582899f, +0.1801775f, -0.1423597f, -0.0311541f, -0.1184380f, -0.1402438f,
  +0.0597881f, +0.1510225f, -0.1747380f, +0.6218792f, +0.0502176f, +0.0164951f, -0.1751619f, +0.0700176f,
  -0.1483036f, +0.0378967f, -0.1526633f, -0.0793672f, -0.1125798f, -0.0388419f, -0.0079620f, -0.0221671f,
  +0.0685720f, +0.4022298f, -0.0706380f, +0.2777455f, -0.0131165f, +0.1965792f, -0.2743340f, -0.3552340f,
  +0.2361322f, +0.2425352f, -0.1099521f, +0.7660112f, +0.0525943f, +0.0038090f, -0.1378714f, +0.0767571f,
  -0.2763178f, -0.0403210f, -0.3346078f, +0.2577669f, +0.2147507f, +0.0614522f, +0.0548052f, -0.0471209f,
  +0.0506459f, +0.0695887f, +0.0506304f, +0.0586618f, -0.0320461f, +0.1077790f, +0.1320020f, -0.2360207f,
  +0.1212684f, +0.1468651f, -0.0094556f, +0.1459040f, +0.0572839f, +0.3000437f, +0.3214305f, -0.1035099f,
  -0.0298393f, -0.1543303f, -0.2267062f, +0.0954238f, -0.2788140f, -0.0329431f, +0.1811804f, -0.0165335f
);

const float biases[4] = float[4](
  +0.0343955f, +0.0145034f, +0.0213416f, -0.0552472f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer4 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0610908f, +0.0877463f, -0.0085032f, -0.1100869f, +0.1469065f, -0.1569435f, -0.2426246f, -0.4234405f,
  -0.0121373f, -0.2446246f, +0.0405077f, -0.1567244f, -0.2751682f, -0.0115951f, -0.0224187f, -0.1956282f,
  +0.1496578f, +0.2108899f, +0.2253169f, -0.1519063f, +0.2687085f, -0.1021672f, -0.0879587f, +0.0282951f,
  +0.2743155f, -0.0453140f, +0.2439577f, +0.3169288f, -0.0538643f, -0.2330421f, +0.1975611f, -0.1407200f,
  -0.1440632f, -0.0193506f, -0.0903114f, -0.1568688f, +0.0643193f, -0.2011482f, -0.1382836f, -0.1696728f,
  -0.0896279f, +0.0609404f, -0.0513429f, -0.1313553f, -0.2296044f, -0.1976662f, -0.2194351f, +0.2101834f,
  +0.1957702f, -0.0272917f, -0.1528168f, +0.1086490f, +0.1724526f, +0.1014208f, +0.0130977f, -0.0183985f,
  -0.0933982f, -0.2322920f, +0.1013681f, -0.1154914f, +0.4295867f, -0.4216522f, -0.3147892f, -0.0278472f,
  +0.3566057f, +0.1389142f, -0.0397796f, -0.0597485f, +0.2063269f, -0.0513827f, +0.0064402f, +0.0454257f,
  -0.1103004f, -0.1919079f, +0.2398538f, +0.3218798f, +0.0896807f, -0.0281972f, +0.2649344f, +0.2892472f,
  +0.0863613f, -0.0734992f, -0.0957213f, +0.1042682f, +0.1607229f, +0.1201786f, -0.0084767f, +0.3693384f,
  -0.0277389f, +0.0668072f, +0.0793389f, +0.2242785f, -0.0144951f, -0.0258293f, -0.2236245f, -0.1872831f,
  -0.2783563f, +0.0945524f, +0.0199421f, -0.1787113f, +0.0373624f, -0.2544172f, +0.0083960f, -0.0321212f,
  +0.0419879f, +0.1752991f, +0.3113020f, -0.2452563f, +0.0820359f, +0.2856361f, -0.1765958f, -0.0855437f,
  +0.2020395f, -0.0761687f, +0.1231512f, -0.1631187f, -0.1075493f, -0.1024744f, +0.1260338f, -0.0182332f,
  +0.2221124f, -0.4587708f, -0.0370002f, +0.0960668f, +0.0061702f, -0.8071355f, -0.0765800f, -0.0356447f,
  +0.0586442f, -0.2967573f, +0.1925092f, +0.1806600f, +0.0062360f, -0.3752962f, -0.0649600f, +0.1496830f,
  +0.0056503f, +0.3331537f, +0.1879459f, -0.0361540f, -0.3116308f, -0.1461213f, -0.2904377f, -0.2436375f,
  +0.0126020f, -0.2714808f, +0.1174882f, +0.0773232f, -0.1029142f, +0.0337266f, +0.2130746f, -0.1345484f,
  -0.4688998f, -0.0323222f, +0.1217956f, -0.0341836f, +0.3276193f, -0.0229137f, -0.0923734f, +0.0384064f,
  -0.1757059f, +0.1174702f, -0.0135879f, +0.1447974f, -0.0040193f, +0.0416523f, +0.1934355f, +0.2649556f,
  +0.0649467f, -0.0128526f, -0.5395190f, +0.4998974f, +0.1385510f, +0.1165101f, -0.0550975f, +0.2979793f,
  +0.0912333f, -0.0172120f, +0.0938165f, +0.4245844f, -0.0250125f, +0.1139519f, +0.1316851f, +0.0493208f,
  -0.2915280f, +0.1338813f, -0.0908077f, +0.2099130f, -0.0170143f, +0.1179434f, -0.1740450f, +0.1406733f,
  +0.2755154f, -0.5154378f, -0.0101965f, +0.1232592f, +0.0560596f, +0.0723558f, -0.1265986f, +0.0905547f,
  +0.1303246f, -0.2169303f, +0.0514956f, +0.2231055f, -0.0009858f, +0.3888777f, -0.1000119f, -0.1564066f,
  -0.1463662f, -0.4231582f, -0.2134336f, +0.0191925f, -0.0367410f, +0.2062825f, +0.4411252f, -0.3745871f,
  +0.2403279f, -0.2881109f, +0.1044533f, -0.6433377f, -0.0017429f, +0.0872012f, +0.0658454f, +0.1052206f,
  +0.2876787f, -0.3381492f, -0.0786626f, +0.0442870f, -0.0124332f, -0.0376170f, -0.0103002f, +0.1071301f,
  +0.0821966f, -0.2057757f, +0.0791814f, -0.0470932f, +0.1057653f, +0.0109309f, -0.1846411f, +0.0238651f,
  -0.0609426f, -0.3720482f, -0.0655110f, -0.1910294f, -0.2617924f, +0.3982635f, -0.0982456f, +0.0669074f,
  +0.3402365f, +0.0101531f, +0.1144478f, +0.1742360f, +0.0361180f, +0.0099484f, -0.4274445f, -0.1227912f,
  -0.0931079f, +0.0206572f, -0.2442318f, +0.0623842f, -0.1576455f, +0.0608133f, +0.2376554f, -0.2583759f,
  -0.1138998f, -0.1935858f, +0.0288031f, -0.0839581f, -0.0890470f, -0.3130207f, -0.2093212f, -0.1527316f,
  -0.1829284f, -0.0130350f, -0.0344726f, -0.0463669f, -0.0807023f, -0.1694154f, +0.0156193f, +0.0265928f,
  +0.0708904f, -0.1647017f, +0.2484159f, -0.0132302f, -0.2744732f, -0.0175086f, -0.1382807f, +0.0618110f
);

const float biases[4] = float[4](
  -0.0328528f, -0.0357450f, +0.0725733f, +0.0104516f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer5 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1773753f, -0.1653612f, -0.1545840f, +0.1185534f, +0.1130499f, -0.1094383f, +0.0719061f, -0.0853187f,
  +0.1722621f, -0.0985793f, -0.4214053f, +0.0321375f, -0.4034686f, +0.0239921f, +0.1870878f, -0.0044418f,
  -0.3692580f, +0.1721420f, +0.3587299f, -0.2624266f, -0.3062816f, +0.0307384f, -0.2835815f, -0.1739919f,
  -0.2639808f, -0.2567679f, -0.2793184f, +0.3465551f, +0.2710214f, -0.2728709f, -0.4285533f, +0.4362135f,
  +0.1039507f, -0.0028857f, -0.2457860f, +0.0908204f, +0.0303164f, +0.1285687f, -0.1337592f, +0.1731159f,
  -0.0455885f, -0.2416069f, +0.0737408f, +0.2064264f, -0.3097707f, -0.2272439f, +0.0404541f, +0.6125592f,
  +0.3131303f, -0.0656468f, -0.1637375f, -0.1026893f, +0.1088997f, -0.1408466f, -0.0519838f, +0.4658208f,
  +0.1075640f, -0.2044965f, -0.3469330f, -0.2572109f, -0.0758131f, -0.3157944f, -0.1295815f, -0.1030636f,
  +0.1187423f, +0.0187343f, +0.0653447f, +0.2082116f, -0.3000137f, -0.0901286f, -0.1619681f, -0.2236733f,
  +0.1075033f, -0.1070709f, +0.0966606f, +0.2979460f, +0.1244454f, -0.1414348f, -0.1127155f, +0.0080463f,
  +0.1238160f, -0.0656272f, +0.0931972f, -0.0080700f, -0.0281957f, +0.0940147f, -0.0808537f, +0.1468876f,
  +0.3120403f, +0.0253531f, +0.1553953f, +0.1552642f, -0.1669171f, +0.0066573f, +0.0616767f, +0.1177915f,
  -0.2452082f, +0.1399323f, +0.0498287f, +0.2156155f, +0.2011794f, +0.0653115f, +0.0234046f, +0.0104442f,
  -0.0344730f, -0.3600186f, +0.2271444f, -0.0378252f, -0.0843044f, -0.1840538f, -0.0058227f, +0.0026139f,
  -0.0286803f, +0.0813011f, -0.0157658f, -0.2325797f, -0.1130117f, +0.4694012f, -0.2355575f, -0.0049832f,
  -0.0875032f, +0.0488124f, +0.0271556f, +0.0282502f, -0.1863738f, -0.0470660f, -0.0812497f, +0.1421962f,
  +0.0378288f, +0.0784928f, -0.0798794f, +0.1833388f, -0.1096965f, +0.0292033f, -0.0534797f, -0.0246592f,
  -0.0795170f, +0.0215707f, +0.1357219f, +0.1883733f, +0.0259649f, +0.2251815f, -0.1967251f, -0.1813883f,
  +0.0187762f, +0.3384986f, -0.0775214f, +0.0277493f, -0.2300659f, -0.0280474f, +0.4989999f, -0.2026066f,
  -0.1375700f, +0.2353396f, +0.2455829f, +0.1641369f, +0.2529292f, +0.0480627f, -0.0473676f, -0.3738512f,
  +0.0194230f, -0.1025178f, +0.2826284f, -0.2474995f, +0.0977515f, +0.1176872f, -0.1580234f, +0.1215187f,
  -0.0229137f, +0.5245153f, -0.2833576f, +0.0886375f, -0.0329649f, +0.3206458f, +0.0822958f, -0.1005273f,
  +0.3620597f, +0.1435184f, +0.2201283f, +0.1231715f, -0.1710703f, +0.4298437f, -0.1742257f, +0.1169190f,
  +0.0442709f, -0.1039683f, +0.0068847f, -0.0239527f, +0.1169910f, +0.2277142f, +0.0341357f, +0.0990778f,
  -0.0655664f, +0.0932776f, -0.1763631f, -0.2398009f, +0.1972422f, +0.2172976f, -0.1750056f, -0.0870902f,
  +0.0142167f, -0.0776095f, +0.0899037f, -0.0888824f, +0.0242352f, +0.0156439f, -0.4370813f, +0.2469726f,
  +0.1675174f, -0.0536916f, -0.1853808f, -0.2861949f, +0.0591895f, +0.1362419f, -0.5385940f, +0.3457077f,
  -0.1077048f, +0.2000148f, +0.2659982f, -0.1301110f, -0.4016240f, +0.2151383f, -0.0632722f, -0.2935100f,
  +0.0378926f, -0.1377098f, +0.0364509f, -0.1192848f, +0.3475700f, -0.1051240f, +0.2729331f, -0.0573963f,
  -0.0313264f, +0.0619218f, +0.0035249f, +0.1072280f, +0.0468772f, -0.0156754f, +0.1576215f, -0.0254949f,
  +0.0481514f, +0.2465764f, -0.3276312f, +0.1288798f, -0.1681398f, -0.3151325f, +0.0904660f, -0.2010912f,
  -0.0835363f, +0.1390355f, -0.2091382f, -0.0519049f, +0.2732994f, -0.5116585f, -0.4984384f, -0.3399894f,
  -0.2440537f, +0.0724143f, -0.2026045f, -0.2042417f, +0.1255004f, -0.2465121f, -0.0823845f, +0.1327199f,
  +0.0339675f, -0.0326952f, -0.2071014f, +0.1882356f, -0.1219457f, -0.2437413f, +0.1305295f, -0.1845498f,
  +0.2000674f, +0.0797314f, -0.4005891f, -0.1403884f, -0.1600604f, -0.2400641f, +0.0462148f, -0.1828347f,
  +0.2019495f, +0.0908870f, +0.0926800f, +0.1818428f, +0.2704973f, -0.0194484f, -0.1013884f, -0.3048770f
);

const float biases[4] = float[4](
  +0.0141462f, +0.0757890f, -0.0456864f, +0.0018438f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer5 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0515808f, +0.1699849f, -0.0473512f, -0.0387216f, +0.1633739f, +0.2629879f, +0.1242686f, +0.0670960f,
  +0.0489945f, -0.4003547f, +0.1357711f, +0.0596367f, +0.0249262f, -0.1539467f, -0.0817361f, +0.0903312f,
  -0.2334742f, +0.0680339f, -0.2315954f, -0.2072100f, -0.1204928f, -0.2208210f, -0.2507349f, +0.2292327f,
  +0.1538735f, +0.0604267f, -0.3571013f, +0.0538154f, +0.0923841f, -0.3322662f, -0.3398620f, -0.0438504f,
  +0.1778480f, -0.5663229f, +0.0323673f, +0.2390842f, +0.4097638f, +0.2102676f, +0.3748034f, +0.0109840f,
  +0.1013371f, -0.2410470f, +0.0135110f, -0.5115941f, -0.2436894f, +0.2692021f, -0.0225259f, +0.4174245f,
  -0.2072706f, +0.2498580f, -0.4200384f, -0.0113446f, -0.4617258f, +0.1117430f, -0.4185722f, +0.0279332f,
  -0.1524116f, +0.4360552f, +0.1750560f, +0.1838647f, -0.1579204f, -0.4857162f, +0.3378649f, -0.1497785f,
  +0.0119219f, -0.3984070f, +0.4381904f, -0.0265082f, +0.2029190f, +0.1368461f, +0.2270437f, +0.0618910f,
  +0.0297867f, +0.0321400f, -0.2341640f, -0.0948323f, -0.1898815f, -0.1291129f, +0.2325527f, -0.0821231f,
  +0.1691617f, -0.0237249f, +0.1244346f, +0.1700574f, -0.2896948f, +0.1437802f, +0.2071493f, -0.0912856f,
  +0.0990007f, -0.0187923f, -0.2514155f, +0.2137865f, -0.0545263f, +0.4177172f, -0.0863273f, -0.2403561f,
  -0.0124696f, +0.0508990f, -0.0556741f, -0.1293600f, -0.0798652f, -0.0593651f, +0.1560468f, -0.1032265f,
  +0.0464759f, +0.0556468f, -0.0720486f, +0.0732571f, -0.2978208f, +0.3811085f, +0.1991258f, -0.2565954f,
  +0.1726010f, -0.0466802f, +0.0326513f, +0.0243157f, +0.1722892f, +0.2610860f, +0.1661013f, -0.0183935f,
  -0.1466791f, +0.0632322f, -0.1413742f, +0.1647670f, +0.0550590f, -0.1746615f, +0.0413372f, -0.2025928f,
  +0.0322877f, -0.0206260f, -0.0914569f, -0.1696173f, -0.2691032f, +0.0694957f, -0.2877436f, -0.2306957f,
  +0.1294358f, +0.0207711f, +0.0822972f, +0.0580120f, -0.0354783f, +0.2332574f, -0.3526911f, -0.1250665f,
  -0.2437963f, +0.2594345f, +0.1196380f, +0.2078111f, -0.1075757f, -0.0234376f, +0.2277858f, -0.0731517f,
  -0.0824516f, -0.1990477f, +0.3599353f, +0.2920185f, +0.2535433f, +0.1873666f, -0.1715839f, +0.0025558f,
  -0.0261938f, +0.1704865f, +0.0926616f, -0.2413548f, -0.1223309f, +0.2180373f, -0.1827666f, +0.2899341f,
  +0.0320021f, -0.0743222f, +0.1895528f, -0.1900536f, -0.5015628f, +0.1951076f, -0.0147341f, -0.1838034f,
  +0.0224476f, -0.1268704f, +0.4963837f, -0.1828366f, -0.1075027f, +0.2385766f, -0.5962037f, +0.2043840f,
  +0.2836671f, -0.1544586f, -0.0462405f, -0.5091950f, -0.1596571f, +0.0081286f, -0.4543384f, +0.7955742f,
  +0.0833920f, -0.0563587f, +0.1602040f, +0.2507742f, -0.1486817f, -0.2712910f, +0.3680977f, -0.2693622f,
  +0.0429345f, -0.2014317f, -0.2869835f, -0.0149935f, -0.0765586f, +0.0899179f, +0.0157088f, -0.1201892f,
  -0.1305454f, +0.0447564f, +0.0265476f, -0.2083220f, -0.0365033f, -0.1019749f, +0.0520570f, +0.1287989f,
  +0.0660533f, +0.0368206f, +0.1137948f, +0.1289963f, +0.0432604f, +0.2254980f, +0.0379803f, +0.3000714f,
  +0.3302101f, -0.3731825f, -0.2302244f, -0.2058529f, -0.1414959f, -0.2600461f, -0.4529742f, +0.0686926f,
  +0.2538104f, -0.2139484f, -0.1127099f, +0.2569988f, +0.0042318f, +0.1149788f, +0.0245885f, +0.3890361f,
  -0.0162140f, +0.0683026f, -0.2292220f, +0.1907641f, +0.3472564f, -0.0536611f, -0.1416402f, -0.1739765f,
  -0.0069512f, -0.0697682f, -0.4193261f, -0.1505135f, -0.0772895f, -0.1803566f, +0.0437829f, -0.1015282f,
  +0.1705445f, +0.2354441f, -0.0526450f, -0.3626770f, -0.2173202f, -0.6155717f, -0.2992276f, +0.4568108f,
  -0.1704886f, +0.2502163f, +0.1490998f, +0.0584111f, +0.0086462f, +0.2557786f, +0.0807806f, +0.0599155f,
  -0.3074917f, -0.2506305f, -0.2146961f, +0.1944636f, -0.1656160f, -0.1474714f, -0.1633373f, +0.1855350f,
  +0.0093548f, -0.2346068f, +0.0523163f, +0.0852802f, -0.3105598f, -0.4068380f, +0.2438267f, +0.2042242f
);

const float biases[4] = float[4](
  -0.0129449f, +0.0502800f, -0.0117385f, +0.0126638f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer6 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0679586f, -0.1253255f, +0.0042620f, +0.0752016f, -0.1770306f, -0.0078737f, +0.2780120f, +0.1607430f,
  -0.2058683f, -0.0144770f, -0.2554958f, +0.1092353f, -0.1430962f, +0.0161865f, -0.2370955f, -0.2670741f,
  +0.0542111f, -0.0283218f, +0.2055274f, +0.0351522f, +0.0877709f, +0.1949175f, -0.1328105f, +0.1408838f,
  +0.0975342f, +0.2152429f, -0.0082267f, +0.4740744f, +0.0550389f, +0.6174247f, -0.1737200f, +0.3880358f,
  +0.2322433f, -0.1772791f, -0.3933187f, +0.3281361f, -0.4724368f, +0.3688855f, -0.3099977f, -0.3091097f,
  -0.1052733f, -0.1084587f, -0.0223842f, -0.2464891f, +0.1349336f, -0.0657682f, -0.2671489f, -0.0626185f,
  +0.1588899f, +0.0374593f, -0.1512174f, +0.2486765f, -0.1908490f, +0.1561460f, -0.0996672f, +0.1993206f,
  -0.3176877f, +0.1643595f, -0.0169425f, +0.0345761f, -0.1808262f, -0.0487223f, -0.1472379f, -0.2086930f,
  -0.0622917f, -0.0133600f, +0.0203485f, -0.0486703f, -0.0220383f, +0.1496662f, +0.0144327f, +0.1546715f,
  -0.1334122f, +0.0701138f, -0.0642977f, +0.0850963f, -0.4087944f, -0.1605121f, +0.1428315f, -0.3514584f,
  -0.2620671f, -0.0325949f, -0.0011649f, +0.0756945f, +0.0294100f, +0.1469497f, -0.1147974f, +0.1998778f,
  -0.1791439f, +0.1639466f, +0.1058669f, +0.3966372f, -0.0957857f, +0.2103525f, -0.2812182f, +0.0863896f,
  -0.0420060f, +0.0327619f, -0.1500179f, +0.0843507f, -0.1419194f, -0.2187228f, -0.2623047f, -0.3513561f,
  +0.3195011f, -0.0685992f, -0.2595127f, +0.0571877f, +0.1085129f, -0.1870583f, -0.1204937f, +0.0301821f,
  +0.3559299f, -0.1532903f, -0.1456074f, +0.0147273f, -0.3161682f, -0.2416605f, -0.1495468f, -0.0820148f,
  +0.0922768f, -0.2674403f, -0.0138990f, +0.1680161f, -0.0772100f, -0.1134434f, +0.4537762f, +0.0437014f,
  +0.3392656f, -0.3457611f, -0.0414457f, +0.4592871f, +0.1035539f, -0.0607067f, +0.2307903f, +0.2537463f,
  +0.2172328f, +0.1658605f, -0.1518989f, +0.1489527f, -0.1889859f, -0.1044344f, -0.1504872f, -0.1585214f,
  -0.0143942f, -0.0644767f, -0.0299077f, -0.1560687f, -0.1865341f, +0.0513950f, -0.1188036f, +0.2031720f,
  -0.0696617f, -0.0956260f, +0.1064131f, -0.2487575f, +0.2530494f, +0.2947789f, -0.0260703f, +0.1942658f,
  -0.0600567f, +0.0674030f, +0.2407913f, -0.0557621f, +0.1464475f, +0.0354146f, -0.2692424f, +0.0750258f,
  +0.0375432f, -0.0715682f, -0.2232939f, -0.3104979f, -0.0172433f, +0.0730876f, -0.3458579f, +0.1280866f,
  -0.2835144f, +0.0388425f, +0.0902804f, -0.1903739f, -0.0161025f, -0.1085860f, -0.2657689f, +0.2141124f,
  +0.1303587f, -0.2868448f, +0.1079789f, -0.2566409f, -0.0448640f, -0.0412195f, -0.2358496f, +0.1029509f,
  -0.0200152f, -0.2594500f, -0.0063707f, +0.1140562f, -0.0005055f, -0.0504465f, -0.4290272f, -0.1225481f,
  +0.2867465f, -0.1570037f, +0.1772395f, -0.0971000f, +0.0475742f, +0.0173466f, -0.0664615f, -0.1030350f,
  -0.0565892f, -0.0697385f, -0.0124441f, -0.1088777f, -0.1016136f, -0.0594394f, +0.0636617f, +0.0651931f,
  -0.0998615f, +0.0302819f, +0.1387874f, -0.0960469f, -0.3075399f, -0.0377483f, -0.1780177f, +0.1318282f,
  +0.2043985f, +0.1633456f, +0.2001298f, +0.0982839f, +0.3594643f, +0.2484569f, +0.2037458f, +0.3677834f,
  +0.2550556f, +0.0607422f, +0.0493646f, -0.1846262f, +0.1617546f, +0.1856605f, -0.0656817f, -0.2473390f,
  -0.3701843f, +0.0739787f, -0.0546184f, +0.0112757f, +0.0535674f, +0.2900034f, -0.3729642f, +0.2035328f,
  -0.0943267f, +0.1289641f, +0.1433853f, +0.2908420f, +0.3027835f, +0.2378903f, -0.3894755f, +0.2201045f,
  -0.0752835f, +0.1076610f, -0.0556998f, +0.0827115f, +0.1664407f, +0.0570702f, -0.0572398f, +0.1822517f,
  -0.2700441f, +0.0474103f, -0.0205564f, +0.0537047f, +0.0513970f, -0.0837133f, -0.3772298f, +0.0095383f,
  -0.1860161f, -0.1353150f, +0.0646827f, +0.2669677f, -0.0068554f, -0.0536412f, -0.0731796f, -0.0256890f,
  -0.1270552f, +0.0184087f, +0.0121335f, +0.1075028f, +0.0455922f, +0.0137241f, -0.0674377f, +0.0020342f
);

const float biases[4] = float[4](
  +0.0435850f, +0.0006202f, +0.0455240f, -0.0789261f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer6 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0627426f, -0.0519613f, -0.0587862f, +0.0608268f, +0.4797916f, +0.2008135f, +0.0362932f, -0.0629220f,
  -0.2234958f, +0.0672561f, -0.0657246f, -0.0429949f, +0.2469707f, -0.2119034f, -0.0183394f, +0.0785857f,
  +0.0970193f, -0.0940622f, +0.0903653f, -0.1042357f, +0.2779850f, -0.1468077f, +0.1063652f, +0.0887614f,
  -0.3304758f, +0.0547700f, +0.2107390f, -0.1758680f, +0.2112363f, -0.0524952f, +0.0780096f, -0.3427185f,
  -0.0391520f, -0.0230851f, +0.1493643f, -0.0659530f, -0.2341162f, +0.0081750f, -0.2041294f, +0.1841632f,
  -0.3085141f, +0.2365828f, -0.1078693f, -0.1789497f, -0.2306135f, -0.1607641f, +0.3699955f, +0.0261065f,
  -0.0911247f, +0.4401619f, +0.0763311f, -0.0374539f, +0.1161947f, +0.1390180f, -0.3586296f, +0.0050420f,
  -0.0869884f, -0.1015242f, +0.0765402f, -0.0830703f, -0.1407795f, -0.0146142f, -0.1638036f, +0.2939420f,
  -0.1696627f, +0.1467400f, +0.0232024f, -0.1182320f, +0.0822629f, -0.2423069f, +0.1452056f, -0.0311516f,
  -0.1860957f, -0.1280238f, -0.0239329f, +0.0001862f, -0.2562689f, +0.1050772f, -0.1341807f, -0.2805717f,
  +0.0217297f, -0.1013873f, -0.0294031f, +0.1316501f, -0.3949457f, +0.1051835f, -0.0337200f, -0.0607344f,
  -0.0168504f, +0.0135138f, -0.2001016f, +0.2202588f, -0.2815238f, -0.0083466f, +0.1809098f, +0.0258432f,
  -0.3707368f, +0.0168862f, -0.4206997f, +0.2937881f, -0.2369388f, +0.0862553f, +0.0859172f, -0.1428362f,
  +0.0318529f, -0.0272548f, -0.3527987f, -0.1289839f, -0.5909601f, +0.2169623f, +0.0377856f, +0.6050510f,
  -0.1382422f, +0.0472107f, -0.1871534f, +0.2068139f, -0.2978395f, +0.1164857f, +0.1959206f, -0.3945089f,
  -0.1594117f, +0.2986532f, +0.0594799f, +0.2040197f, -0.0872428f, -0.0789661f, +0.0669163f, +0.1076851f,
  +0.1915230f, -0.0908244f, -0.2125053f, +0.0659756f, -0.3845053f, +0.0392424f, -0.0548705f, +0.1692054f,
  +0.1635496f, +0.0993105f, -0.2977645f, -0.0407620f, -0.1115486f, +0.0848880f, -0.2201432f, -0.2407033f,
  +0.4048810f, +0.3350071f, +0.2778543f, -0.0712367f, +0.2255359f, +0.0322976f, +0.2023972f, +0.0165636f,
  +0.4326307f, -0.2386441f, +0.4825679f, +0.2601803f, +0.4075467f, -0.1291991f, -0.0313366f, +0.0709763f,
  +0.3337705f, -0.1100978f, +0.3172925f, +0.0445484f, +0.4086696f, -0.0484148f, -0.2950339f, +0.1142413f,
  -0.1120950f, -0.1732235f, +0.4097989f, -0.0355956f, +0.6212324f, -0.1096806f, +0.5437555f, -0.1970001f,
  +0.0365735f, +0.0736742f, +0.1003488f, -0.1211813f, +0.4820949f, -0.0329232f, +0.2022680f, -0.1114787f,
  -0.0113923f, -0.0590588f, +0.1656789f, -0.0326004f, +0.3169429f, -0.2792166f, +0.0601407f, +0.2928444f,
  +0.1453843f, +0.1015713f, +0.2433525f, -0.0595328f, +0.2728876f, -0.0789784f, +0.5171809f, +0.0782125f,
  -0.1414365f, -0.2367224f, +0.2972377f, +0.2189518f, +0.2478673f, -0.0146469f, +0.3410358f, +0.1462912f,
  +0.0326659f, +0.0359812f, -0.0003067f, +0.1545208f, +0.1432081f, +0.0293307f, -0.1949145f, +0.0938972f,
  +0.0428493f, -0.1597576f, -0.1688885f, +0.0332124f, -0.0256830f, -0.1017519f, -0.1150480f, +0.0808135f,
  +0.2369718f, +0.1342946f, -0.1654698f, -0.1020514f, -0.3540184f, +0.0783523f, +0.6221282f, +0.5421616f,
  -0.2848868f, -0.0594392f, -0.3170824f, -0.1655539f, -0.3687005f, +0.0716318f, +0.4618325f, -0.0586794f,
  -0.0867297f, -0.0446952f, -0.2328108f, -0.0632124f, -0.5469810f, +0.0785422f, -0.1841846f, +0.1443588f,
  +0.0469023f, +0.0856862f, -0.2266267f, -0.0382709f, -0.1850545f, +0.0277832f, -0.1373754f, +0.2019825f,
  +0.0479434f, +0.3156736f, -0.2826077f, +0.1951002f, -0.1664596f, +0.3461438f, -0.0262663f, +0.1224572f,
  -0.2106574f, +0.0207831f, -0.0198978f, +0.0450903f, -0.1399076f, -0.0702931f, -0.0117099f, +0.0828355f,
  +0.0966082f, -0.0312650f, -0.1455550f, +0.1601863f, -0.1756453f, +0.1645619f, +0.1296644f, +0.1152811f,
  -0.0151650f, +0.1935028f, -0.0442111f, -0.0105465f, -0.1836397f, -0.0695185f, +0.1191658f, +0.0062517f
);

const float biases[4] = float[4](
  -0.0385351f, +0.0315388f, +0.0297310f, -0.0046862f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer7 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0411615f, +0.0213587f, +0.3306184f, -0.2444586f, -0.1845103f, +0.1514049f, +0.1848952f, -0.0258614f,
  -0.0079572f, +0.0072723f, +0.0323642f, -0.2297884f, -0.3375021f, -0.1824842f, -0.1514198f, -0.1265984f,
  -0.1331961f, +0.1531407f, -0.1323844f, -0.0161088f, -0.0395661f, -0.0615171f, +0.1018089f, +0.0135317f,
  -0.0178981f, +0.0439609f, +0.1488469f, +0.2138340f, +0.1202481f, -0.2088193f, +0.0612377f, -0.1203616f,
  +0.3454747f, -0.0913247f, -0.0638108f, -0.2577323f, -0.0393526f, +0.2705747f, -0.5145916f, -0.1703314f,
  +0.0009256f, +0.2049702f, +0.1027619f, +0.0228068f, -0.2239346f, -0.1093071f, -0.2048302f, -0.0265007f,
  -0.0893435f, -0.0472457f, +0.2458036f, -0.0111507f, -0.1631647f, +0.1355278f, +0.1820756f, -0.2810248f,
  -0.1314031f, -0.0418155f, +0.0793052f, +0.1991242f, +0.2091028f, -0.0421141f, -0.0857960f, -0.1058325f,
  +0.0019056f, +0.0561172f, +0.1231047f, -0.1063138f, +0.1617520f, -0.0694073f, +0.1225944f, -0.4209393f,
  -0.3054985f, +0.1455621f, +0.2607315f, -0.0232529f, +0.0891636f, +0.1267219f, -0.0741136f, -0.1823561f,
  +0.2237299f, +0.1405234f, -0.0554346f, -0.1470391f, -0.1073384f, +0.2060149f, +0.1890354f, -0.0053938f,
  -0.0112447f, -0.1062616f, +0.1684990f, +0.1961443f, -0.2112275f, -0.2939260f, -0.0116171f, -0.2726576f,
  -0.1743013f, +0.1868013f, +0.0383117f, +0.2000978f, -0.1399788f, -0.1079667f, -0.1945599f, +0.0542880f,
  +0.3546745f, +0.0265608f, +0.0975704f, +0.1498799f, +0.1315460f, +0.1352970f, -0.2598543f, +0.0652004f,
  -0.1327047f, -0.1870002f, +0.0614965f, +0.1198624f, -0.1585780f, -0.3566975f, +0.0780226f, +0.0017468f,
  +0.0823346f, +0.2137768f, +0.2196613f, +0.1711156f, -0.1046097f, +0.2319454f, +0.1477217f, +0.1514112f,
  +0.0831103f, -0.0252667f, +0.0476944f, +0.2640353f, +0.2539040f, -0.0114897f, -0.0795862f, -0.1086611f,
  -0.0706541f, +0.1567312f, +0.1341751f, -0.0766145f, +0.1032018f, -0.1845165f, +0.0695091f, -0.1272335f,
  +0.1549607f, -0.0995368f, +0.0528395f, +0.0678527f, -0.0139905f, -0.0915947f, -0.0866703f, +0.1082197f,
  +0.0010525f, -0.2001738f, -0.0595795f, +0.1861344f, -0.1410925f, -0.1054310f, -0.4570926f, -0.0732280f,
  +0.2185138f, -0.1325646f, +0.0312600f, +0.0830237f, +0.1238276f, +0.0877668f, +0.1891845f, +0.1344287f,
  +0.0543972f, +0.1568296f, -0.2147777f, +0.0979847f, +0.3194360f, -0.0918219f, +0.1117341f, +0.1508058f,
  +0.3107699f, -0.7411587f, -0.3678595f, +0.0372984f, -0.4132291f, +0.0486946f, -0.2283437f, +0.0212758f,
  +0.0910040f, -0.2543592f, -0.2684028f, +0.1865938f, -0.0341863f, +0.1973277f, +0.2193956f, -0.1618057f,
  -0.0000766f, -0.0033554f, +0.1596531f, +0.1269285f, -0.0429151f, +0.0612665f, -0.1450424f, +0.1514731f,
  +0.0573143f, -0.4331635f, -0.2619459f, -0.1282731f, -0.6930062f, +0.2770307f, -0.2538856f, -0.4404077f,
  +0.0709959f, +0.3307399f, +0.1326352f, +0.0972936f, +0.5395866f, +0.0539806f, -0.4885727f, -0.1646047f,
  +0.1377854f, -0.0794009f, +0.2384897f, +0.0862051f, -0.2300448f, +0.2177972f, -0.2562725f, +0.0777861f,
  -0.0872824f, -0.0074902f, -0.2205596f, -0.3276373f, -0.1913346f, -0.2386303f, -0.0559761f, +0.2843828f,
  +0.0004622f, +0.1698060f, -0.0880652f, +0.1584144f, +0.0851642f, +0.2051282f, -0.1768348f, +0.0156854f,
  +0.1160507f, +0.2624976f, +0.0285985f, +0.1387564f, -0.1749885f, -0.1301892f, +0.0564152f, +0.3253282f,
  -0.1718021f, -0.1759977f, +0.1866701f, -0.2449075f, -0.1684844f, -0.5208021f, +0.0131653f, +0.4016716f,
  +0.1445925f, +0.0712397f, -0.4327062f, +0.1983444f, +0.3219610f, +0.5052453f, -0.3449640f, +0.0445486f,
  +0.2529798f, -0.2735415f, -0.0368468f, -0.1220577f, -0.1744943f, -0.1008362f, -0.2201358f, +0.1634622f,
  +0.0248873f, -0.2170500f, +0.3050079f, -0.3415309f, -0.1507251f, +0.2362231f, +0.1134222f, +0.3583260f,
  +0.0068429f, +0.2150228f, -0.3426860f, +0.0591687f, -0.0173725f, +0.3454792f, -0.2663844f, +0.3205131f
);

const float biases[4] = float[4](
  +0.0315066f, +0.0714927f, -0.0131787f, -0.1075651f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer7 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1284336f, +0.0758149f, +0.0629445f, +0.1269333f, +0.1024823f, -0.2016427f, +0.0169818f, +0.0564523f,
  -0.0745244f, +0.0104596f, -0.3343205f, +0.1628821f, -0.0545556f, +0.2631379f, -0.1798535f, -0.2946657f,
  -0.1804718f, +0.0191551f, +0.2328251f, -0.0092307f, +0.2989665f, +0.0703640f, +0.0067185f, -0.0378198f,
  -0.2925027f, +0.1335088f, +0.1482453f, -0.1349642f, +0.3927561f, +0.0452539f, -0.2409501f, +0.1220599f,
  +0.8498042f, +0.1027431f, +0.2278615f, -0.5220659f, +0.9606208f, +0.2715310f, +0.3803571f, -0.0922974f,
  -0.0998908f, -0.0989464f, -0.3032296f, -0.2682774f, +0.4145277f, +0.0208641f, +0.0035782f, -0.1284429f,
  -0.1072589f, -0.2422874f, -0.1686523f, -0.3024090f, -0.2528990f, -0.1040541f, -0.4103646f, +0.3311265f,
  +0.2293318f, -0.0647117f, -0.0673404f, -0.0795038f, -0.2722343f, -0.3109593f, -0.2730047f, +0.0524670f,
  +0.0343689f, -0.2116815f, +0.2652963f, -0.0682261f, -0.1092333f, -0.2101340f, -0.1965536f, +0.3247631f,
  +0.0701801f, -0.1098128f, +0.2551315f, -0.1462311f, +0.4556338f, +0.1817130f, -0.0228740f, +0.0894837f,
  +0.0882289f, +0.1355180f, -0.0747602f, +0.1252730f, -0.0706028f, +0.3038614f, +0.0040518f, -0.2124878f,
  +0.0722912f, -0.0865435f, +0.2165972f, -0.1548876f, -0.2149108f, -0.2133821f, -0.1198021f, +0.1463036f,
  -0.2044468f, +0.1621752f, +0.1508248f, +0.1929107f, +0.0876254f, -0.4119058f, +0.0820710f, -0.0764788f,
  +0.0085856f, -0.3367790f, +0.1244666f, -0.0914054f, +0.0671291f, -0.3384376f, -0.0265877f, +0.1197919f,
  -0.2128031f, +0.1080303f, +0.0895755f, +0.0259468f, +0.1052523f, -0.1196573f, -0.1858571f, -0.1621968f,
  -0.1725565f, +0.1726149f, +0.0748853f, -0.3641705f, +0.2524948f, +0.2581165f, -0.1506461f, +0.0298867f,
  +0.1101335f, -0.1512586f, +0.1422488f, -0.1236243f, -0.0227261f, +0.0188323f, +0.0467469f, +0.1903880f,
  -0.0904860f, +0.0190822f, +0.1597700f, -0.2384353f, +0.2775718f, +0.3104765f, -0.2744029f, -0.0803750f,
  +0.0957644f, +0.1542851f, +0.0485512f, -0.0529403f, -0.0526882f, +0.0199274f, -0.0058481f, +0.0260233f,
  -0.1455911f, +0.0904662f, +0.0362107f, +0.1112400f, -0.1437183f, +0.0664702f, -0.1059835f, +0.0095120f,
  +0.0675497f, -0.0137030f, -0.0066782f, -0.1748224f, -0.0085317f, -0.0231388f, -0.2127935f, +0.3085507f,
  +0.1883453f, +0.4939332f, -0.3128099f, +0.1770753f, -0.0931858f, -0.0685493f, -0.2090807f, +0.1207951f,
  +0.4173088f, +0.4041477f, +0.0689394f, +0.4021719f, +0.1275105f, -0.5009251f, -0.3486889f, -0.0020729f,
  +0.2560095f, -0.0538148f, -0.1049105f, -0.1194526f, +0.0495804f, -0.1697327f, -0.0965266f, +0.3328697f,
  -0.1919919f, -0.1646454f, -0.0253611f, +0.0778718f, +0.2207970f, -0.1501956f, +0.0117096f, +0.0913423f,
  -0.1333401f, +0.0479178f, +0.0438879f, +0.0642301f, +0.1082963f, +0.0714549f, -0.0684682f, -0.1574307f,
  -0.2019352f, +0.0903873f, -0.2782960f, -0.0421740f, -0.0058596f, -0.0691509f, -0.1134220f, +0.1617411f,
  +0.1156448f, -0.0701309f, +0.0658977f, -0.1413617f, -0.0346746f, -0.0077510f, +0.0571368f, -0.0999826f,
  -0.3139292f, +0.0765010f, -0.0160754f, +0.0169778f, -0.0889952f, -0.2646398f, +0.3011811f, -0.3688500f,
  +0.0763358f, +0.0163891f, +0.1040775f, -0.1571113f, +0.0416519f, +0.2153271f, +0.1444750f, +0.1793004f,
  +0.0397513f, +0.1203784f, +0.1742696f, +0.2451746f, +0.1245690f, -0.2228697f, -0.1461868f, +0.0316854f,
  +0.2322126f, -0.1485161f, +0.0999495f, +0.3225294f, +0.2634113f, +0.3775789f, -0.3303091f, -0.0661943f,
  -0.1693717f, +0.2343699f, +0.0149617f, -0.1059926f, +0.0741897f, -0.0115169f, -0.0559369f, -0.1445372f,
  +0.1425105f, -0.1587120f, +0.2687898f, +0.3259760f, -0.2731924f, +0.0506550f, +0.1252814f, -0.0511845f,
  +0.0247449f, -0.3804343f, +0.1103413f, -0.0043605f, -0.1804201f, -0.2228708f, +0.5221093f, -0.0540062f,
  +0.0254478f, +0.1348320f, +0.0562769f, +0.0336126f, -0.1412687f, +0.0730632f, -0.1231950f, -0.1564556f
);

const float biases[4] = float[4](
  -0.1707805f, -0.1064055f, -0.0885966f, +0.1363306f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer8 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1871006f, +0.0962757f, +0.2842801f, +0.0206838f, -0.1736039f, -0.0550930f, +0.2787306f, -0.0322427f,
  -0.0336002f, -0.0742654f, -0.0309766f, +0.2392511f, +0.1186972f, -0.1863968f, -0.0948476f, -0.2521422f,
  +0.0888419f, -0.1069782f, -0.0253489f, +0.0593807f, +0.0116759f, +0.0661891f, -0.0365872f, +0.2134957f,
  -0.1167056f, -0.1123031f, +0.0416426f, +0.0976509f, +0.0438900f, -0.1082182f, -0.1029206f, -0.2198153f,
  -0.0047225f, +0.0637068f, -0.0761982f, +0.1277224f, -0.0874040f, -0.3961613f, -0.3145420f, -0.0514912f,
  -0.1781618f, -0.3214265f, +0.0634625f, +0.1055540f, -0.2306524f, +0.0180553f, -0.5533404f, -0.1038790f,
  -0.1052378f, +0.2950735f, +0.0184992f, +0.1097900f, +0.3070029f, -0.3332669f, +0.0623831f, -0.1835278f,
  +0.1219101f, +0.0743909f, -0.2373013f, +0.0066966f, -0.1882293f, -0.2303137f, -0.2581324f, -0.1228030f,
  -0.0845673f, +0.3220423f, -0.0094436f, +0.1141455f, +0.1360869f, -0.1334325f, +0.0291791f, +0.0329946f,
  +0.0170762f, +0.0326689f, +0.1990452f, -0.0176191f, -0.1843650f, -0.0038326f, -0.0142435f, -0.0577275f,
  +0.0244308f, +0.0890893f, -0.0227046f, +0.6382208f, -0.0002526f, +0.0949587f, -0.1647778f, -0.0400619f,
  +0.0858256f, -0.1012921f, -0.1209641f, +0.3645625f, -0.0358311f, +0.2031073f, -0.0869952f, +0.1255760f,
  +0.1489643f, +0.0676820f, +0.0213822f, +0.2408070f, +0.1313967f, +0.0021256f, -0.2868821f, -0.1209769f,
  +0.1740858f, -0.0366143f, +0.3522071f, +0.0366984f, -0.3941957f, -0.4059409f, -0.5174685f, +0.0822807f,
  -0.0771442f, -0.0958336f, +0.3528377f, -0.1680569f, +0.1690267f, +0.0520414f, -0.3829021f, +0.2353477f,
  -0.2218007f, -0.1785526f, +0.0316601f, +0.0402269f, +0.0823630f, +0.1732448f, -0.1884686f, -0.1222503f,
  -0.1593015f, -0.0909423f, +0.3164819f, -0.0103220f, +0.2222771f, -0.1532193f, -0.1604647f, -0.0890063f,
  -0.2043469f, -0.0693506f, -0.0920539f, +0.2217823f, -0.1312195f, +0.0915850f, +0.0883715f, +0.0373391f,
  -0.0755080f, +0.2349953f, -0.0957161f, +0.0241946f, +0.1946729f, +0.2847492f, +0.0677648f, +0.1040111f,
  +0.0313037f, +0.2258486f, +0.1436999f, +0.0819589f, +0.1325343f, +0.1654530f, -0.1546899f, +0.0580247f,
  -0.0973749f, -0.0479960f, -0.0972801f, +0.1013304f, -0.4105449f, +0.1902014f, -0.0114538f, -0.0459612f,
  -0.1790204f, +0.1232793f, +0.6156965f, +0.1331892f, -0.2364367f, -0.0924960f, +0.2389206f, +0.1603822f,
  -0.4481083f, +0.0505633f, +0.6696196f, -0.3771022f, -0.1801747f, +0.1021458f, +0.4860779f, -0.2656023f,
  +0.0620905f, -0.0227840f, +0.0896546f, -0.0505784f, +0.1308713f, +0.1410611f, +0.0925463f, +0.2076168f,
  -0.0741804f, +0.0965189f, +0.0756243f, +0.1469727f, +0.0899254f, +0.1272342f, -0.1802300f, -0.0188230f,
  -0.2455141f, +0.1267387f, +0.1590725f, -0.0004058f, +0.2626660f, +0.1118532f, -0.1425833f, -0.1989687f,
  -0.0166393f, -0.0724510f, -0.0088459f, -0.3970659f, +0.0221396f, +0.2510278f, +0.0610195f, -0.0197199f,
  +0.0984896f, +0.3161810f, -0.0128288f, -0.0830396f, -0.2168948f, +0.0477835f, -0.1277476f, -0.0884866f,
  +0.0078354f, +0.0790591f, +0.0115458f, +0.3716175f, -0.2364178f, +0.0858952f, -0.1100312f, +0.2084558f,
  -0.0878008f, +0.3022129f, -0.1316361f, +0.2090941f, +0.1542754f, -0.0659164f, -0.0423626f, -0.1254032f,
  -0.1123565f, +0.2493873f, +0.2311452f, +0.0313152f, +0.0603070f, -0.2011322f, +0.1232147f, +0.0184226f,
  +0.2820873f, -0.0150966f, -0.2047415f, +0.3205456f, +0.0034345f, -0.1709476f, -0.2300976f, -0.0333352f,
  +0.1030003f, -0.2142743f, -0.0394339f, +0.2267227f, +0.2580086f, +0.1859072f, +0.0412429f, +0.0973032f,
  +0.1623339f, +0.0134416f, -0.0654624f, -0.1483266f, -0.2837673f, -0.0410090f, -0.1446408f, -0.1118247f,
  -0.1315196f, +0.0371895f, -0.1001880f, +0.3631361f, +0.0242582f, -0.0938903f, -0.2638982f, +0.0936946f,
  -0.1192184f, +0.0930094f, -0.0558750f, -0.4841951f, -0.0069274f, +0.0712635f, -0.0742381f, +0.0353185f
);

const float biases[4] = float[4](
  +0.0320003f, +0.0178335f, -0.0018417f, -0.0606630f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer8 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0497980f, -0.0181426f, +0.1764659f, -0.0627368f, +0.0996375f, +0.1540486f, +0.1529390f, -0.0904690f,
  -0.1465212f, -0.0213844f, +0.2063615f, +0.3472999f, -0.1983366f, +0.0531817f, -0.0068458f, -0.5444114f,
  -0.0851888f, +0.1803214f, -0.0554274f, +0.2770045f, -0.1563121f, +0.4371313f, +0.2064089f, -0.1820371f,
  +0.4868587f, -0.0615715f, -0.0089997f, -0.1261371f, -0.0438600f, -0.0774826f, +0.0428861f, +0.0430021f,
  +0.0520264f, -0.0263463f, +0.1737349f, -0.2840318f, -0.3436145f, +0.0495804f, -0.2361951f, -0.0611892f,
  -0.1408230f, -0.1251578f, +0.1416332f, -0.2489821f, -0.1968924f, +0.1149890f, -0.2083533f, -0.2704047f,
  +0.1493030f, +0.0248238f, -0.0054332f, -0.0886518f, -0.4547746f, +0.0666492f, +0.1099358f, +0.2457505f,
  +0.0643265f, +0.1967781f, +0.2278236f, +0.1854701f, -0.4617073f, +0.0526117f, -0.0410661f, +0.1357029f,
  -0.0492378f, +0.2776163f, +0.1575539f, +0.1766304f, -0.6059114f, +0.2140622f, +0.1168664f, -0.1011125f,
  -0.0918500f, +0.0057026f, -0.4257398f, -0.1295443f, +0.0278046f, -0.1541026f, +0.0538542f, -0.0377669f,
  +0.0407766f, -0.2718410f, -0.2651438f, +0.2580355f, -0.4533999f, -0.2181787f, +0.0395809f, +0.3700268f,
  +0.1146951f, -0.0807589f, +0.1026225f, +0.5720629f, -0.5373287f, -0.3108375f, -0.0294424f, -0.2185388f,
  -0.4288146f, +0.0021182f, -0.0432158f, -0.0914857f, +0.1718972f, -0.0897522f, +0.1095871f, -0.2087997f,
  -0.3973119f, -0.0843292f, -0.0101155f, +0.5276594f, -0.0838861f, -0.0279194f, +0.4959145f, -0.2816211f,
  -0.1369515f, +0.0229259f, +0.0415320f, +0.0628876f, -0.1845020f, -0.1580662f, +0.3945586f, +0.0208258f,
  -0.2560753f, -0.0606957f, -0.0437232f, -0.0082241f, +0.1064495f, -0.1411783f, +0.1221889f, -0.2506610f,
  -0.2429095f, +0.1660620f, +0.0444919f, +0.2490269f, -0.2639295f, -0.5663067f, +0.1361272f, +0.0023603f,
  -0.1287388f, -0.2067226f, +0.0748511f, -0.0463142f, -0.1350140f, +0.0467993f, +0.3105564f, +0.1287589f,
  -0.1306006f, -0.1949653f, +0.0552439f, +0.1938740f, -0.1585064f, -0.0004833f, -0.0931076f, +0.1477491f,
  +0.1537139f, -0.0446850f, +0.3559491f, -0.2075538f, +0.3249782f, -0.0630651f, -0.1338314f, +0.2257024f,
  +0.1834393f, -0.1416952f, -0.0798158f, -0.2645689f, +0.3100244f, +0.0125249f, +0.0030875f, -0.0234039f,
  +0.1378437f, -0.0888938f, -0.4686189f, -0.0261561f, -0.2204180f, +0.0589638f, -0.0048074f, +0.3235862f,
  -0.1871438f, -0.0503606f, +0.0183821f, -0.1930335f, -0.1821211f, -0.1561939f, +0.3558189f, -0.1274259f,
  +0.1412302f, +0.4280439f, +0.0975896f, -0.0373474f, +0.1053199f, -0.0084030f, -0.1821503f, -0.0351470f,
  +0.1626948f, -0.3084919f, +0.1144138f, -0.2982262f, -0.0582829f, -0.1340173f, -0.0363285f, +0.0978363f,
  -0.0267432f, +0.2061503f, +0.1588105f, -0.2424620f, -0.3541449f, -0.0713564f, +0.2306090f, +0.1946818f,
  +0.0533378f, -0.0919674f, +0.0184764f, +0.0299372f, -0.3820569f, -0.1088119f, -0.0367073f, -0.2529901f,
  +0.1330836f, -0.0197810f, +0.6756436f, +0.1332813f, -0.1716989f, -0.2034725f, -0.0434728f, -0.0990597f,
  +0.0190471f, +0.1696323f, -0.1682014f, -0.5663146f, -0.0659456f, +0.0371019f, +0.1696439f, +0.0247330f,
  -0.1437684f, -0.0794729f, +0.0896404f, +0.3214028f, -0.1620069f, -0.2097964f, +0.0336546f, -0.1628415f,
  -0.2927959f, -0.1314899f, +0.0651628f, -0.1652249f, -0.2576273f, -0.1915794f, +0.3073856f, +0.0477559f,
  -0.1524217f, +0.3190938f, -0.3152736f, -0.4841261f, +0.1836217f, -0.1800244f, +0.1393236f, +0.0092850f,
  +0.0278384f, +0.0524429f, -0.0783668f, +0.1832775f, +0.2349159f, -0.0489839f, +0.1288618f, +0.2924412f,
  -0.1664165f, +0.4368471f, +0.0364003f, +0.1559268f, -0.1141475f, -0.1216571f, +0.1207420f, -0.2197845f,
  -0.1545878f, +0.0128969f, -0.0482034f, -0.1227112f, +0.0827450f, +0.0147335f, -0.0609797f, +0.1621935f,
  -0.0331309f, -0.3409151f, -0.0062800f, +0.0870619f, +0.4947354f, -0.2781489f, +0.0960705f, -0.0074879f
);

const float biases[4] = float[4](
  -0.0427845f, +0.0458611f, +0.0021396f, +0.0401916f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer9 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0456047f, -0.2858402f, -0.2130823f, +0.0852915f, +0.1310356f, +0.5466233f, +0.0551665f, +0.2755190f,
  -0.1245263f, +0.0707187f, -0.0485289f, -0.3194660f, +0.0009803f, -0.1973005f, -0.0992201f, +0.2197029f,
  -0.0571964f, +0.1230171f, +0.2513434f, +0.0530798f, -0.1137467f, +0.0371212f, -0.0792346f, +0.0906710f,
  +0.1718296f, +0.6721506f, -0.1515348f, -0.3260830f, +0.3533678f, -0.0127143f, +0.1799383f, +0.7687649f,
  -0.0842351f, -0.2060088f, -0.2771306f, -0.1972466f, -0.1934875f, -0.3272967f, +0.4615892f, +0.7945793f,
  +0.0173447f, +0.0408981f, -0.2948913f, +0.1283077f, +0.2648678f, +0.0134962f, +0.0486320f, -0.0399114f,
  -0.0365066f, +0.1126814f, -0.2308899f, +0.0736227f, +0.1916240f, +0.1445026f, -0.3390253f, -0.0510331f,
  +0.1211181f, +0.0609737f, -0.2398990f, -0.0872188f, -0.1822186f, -0.2066834f, -0.0495396f, +0.1421772f,
  +0.2290061f, +0.1106568f, +0.0543675f, +0.0232486f, -0.0364859f, +0.0259072f, -0.0825146f, -0.0655812f,
  +0.0065947f, +0.0895706f, -0.0406116f, +0.0653558f, +0.1039381f, -0.1733236f, +0.3319800f, -0.1499286f,
  -0.0547562f, -0.0043571f, -0.0506238f, +0.1247353f, -0.2372648f, +0.2418993f, +0.0993102f, +0.1808790f,
  +0.0868198f, +0.0127178f, -0.1178579f, +0.0271986f, -0.2121918f, +0.0644068f, +0.0835923f, -0.0996112f,
  -0.1566163f, +0.0382456f, +0.2889052f, -0.2302924f, +0.0975513f, -0.1471986f, -0.1168663f, -0.0211244f,
  -0.1797292f, +0.3447380f, +0.0901835f, -0.4281407f, +0.1450955f, -0.4867165f, +0.1484806f, -0.1548681f,
  -0.0691625f, -0.0614424f, -0.1420227f, -0.1406759f, +0.2016093f, -0.1020673f, +0.1985416f, -0.0032858f,
  +0.0161726f, +0.1100668f, -0.1617591f, -0.1255641f, +0.3187683f, -0.1638896f, -0.1081128f, -0.0040215f,
  -0.0512804f, +0.2755436f, -0.2836597f, -0.1957879f, +0.4551931f, +0.1777920f, -0.3261193f, -0.1913926f,
  +0.0516461f, +0.1681045f, -0.4631983f, -0.0039215f, +0.2458073f, -0.2844299f, -0.0529601f, -0.0455567f,
  +0.1258287f, -0.1856645f, -0.1405738f, -0.0132988f, +0.0684178f, +0.2001592f, -0.2222380f, +0.0749860f,
  -0.2104051f, -0.2867849f, +0.0533235f, -0.0656152f, -0.2397660f, -0.5575653f, -0.5912755f, +0.0010048f,
  -0.1901750f, +0.5302311f, +0.5776461f, +0.4110354f, -0.4993681f, -0.3640665f, +0.0709927f, +0.2693420f,
  +0.1314747f, -0.2047913f, -0.0659515f, -0.1878876f, +0.2194025f, +0.4630906f, -0.3939432f, +0.0972796f,
  +0.3441959f, -0.1187745f, +0.0773378f, -0.1505972f, -0.3148096f, -0.4576698f, +0.0411708f, +0.0720502f,
  +0.4132276f, +0.5547057f, -0.3902089f, +0.0229549f, -0.0110703f, +0.2512001f, -0.4603481f, +0.0798070f,
  -0.0606501f, -0.0535067f, -0.1548592f, +0.0191908f, -0.0920125f, -0.0362761f, -0.3337684f, +0.0873325f,
  -0.0119678f, -0.1906947f, +0.0043010f, -0.0687650f, -0.3480785f, -0.1675613f, -0.1096824f, +0.2200910f,
  -0.1197406f, +0.0661881f, -0.0074509f, +0.1126305f, +0.1363574f, +0.1158634f, +0.0453188f, -0.3436408f,
  +0.1745934f, +0.0692315f, +0.0552578f, +0.0754546f, -0.0956953f, +0.0066087f, +0.0904503f, +0.0592107f,
  +0.0784665f, -0.0067831f, +0.2501293f, -0.1979176f, -0.4101487f, -0.2361784f, -0.3494802f, -0.1183968f,
  -0.1188449f, -0.0556326f, +0.1069996f, +0.0292323f, -0.0702358f, +0.1940182f, -0.0776105f, -0.0810903f,
  -0.2093817f, -0.0377246f, -0.1693010f, -0.2144750f, +0.2898136f, +0.2221391f, +0.0561946f, +0.1354900f,
  +0.3386333f, -0.0027224f, -0.3413464f, -0.3390223f, -0.2947179f, +0.4376845f, -0.2143047f, +0.0122004f,
  -0.2908560f, -0.0577206f, -0.2174288f, -0.0361146f, -0.1750184f, +0.0025772f, -0.1071466f, -0.2285437f,
  -0.0063889f, -0.3005331f, +0.2514668f, -0.0978972f, +0.4251249f, +0.2860337f, -0.1147417f, +0.0456808f,
  +0.0769600f, -0.2998011f, +0.1571700f, -0.1893326f, -0.3288235f, -0.1263969f, +0.1315056f, +0.0259217f,
  -0.0108275f, +0.1986133f, -0.0821947f, -0.3486979f, -0.0113950f, +0.1566042f, -0.1291844f, -0.1192519f
);

const float biases[4] = float[4](
  -0.0920834f, +0.1030451f, +0.0101010f, -0.0536560f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer9 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0654631f, +0.2682691f, -0.1310248f, -0.1985862f, -0.0626224f, -0.3600925f, +0.1457242f, +0.1152476f,
  -0.0571212f, -0.3168774f, +0.3213995f, -0.0265778f, -0.0474538f, -0.1666298f, -0.0609706f, -0.0863707f,
  +0.0792809f, +0.2850732f, +0.3204347f, -0.0610151f, -0.1396010f, -0.2918172f, -0.1186559f, -0.0123069f,
  +0.0922936f, -0.2638717f, -0.1167304f, -0.1764827f, -0.0103265f, -0.1986429f, -0.0048900f, -0.1833653f,
  +0.0638810f, +0.1694833f, +0.1382107f, -0.0126247f, +0.4154984f, +0.1227684f, -0.1659362f, +0.2020549f,
  -0.2284561f, +0.1065619f, -0.0115915f, +0.1794438f, +0.3353696f, +0.0313362f, -0.2067327f, +0.1828270f,
  +0.0192973f, +0.3546222f, -0.0787246f, -0.0674161f, -0.1409206f, +0.1165934f, +0.0405093f, -0.0481572f,
  -0.0880051f, -0.0720793f, -0.1029848f, -0.3266338f, -0.3061552f, +0.1348294f, +0.2465844f, +0.1969867f,
  +0.0318182f, -0.0695555f, -0.0626387f, +0.1853872f, -0.5750545f, +0.1057858f, -0.0735770f, +0.1363222f,
  -0.2222611f, +0.1573429f, -0.1949988f, +0.1000174f, -0.1296871f, -0.2464783f, -0.0102305f, -0.0591145f,
  +0.2238807f, -0.2650414f, +0.1345880f, +0.3142895f, +0.0366336f, -0.3112684f, +0.1356834f, -0.0676907f,
  +0.1378754f, -0.0675259f, +0.1297156f, +0.0162630f, -0.0675400f, +0.0590571f, +0.1001160f, +0.0046982f,
  -0.0913122f, -0.3354242f, -0.4968235f, +0.2377903f, -0.0216615f, -0.1772703f, -0.0363853f, +0.0062432f,
  -0.3665513f, -0.2857794f, -0.0832004f, -0.4249506f, -0.1832417f, -0.1016987f, -0.1812880f, -0.2120811f,
  +0.1009846f, -0.0910251f, -0.0869746f, +0.0067402f, -0.1498954f, +0.2337966f, +0.2578239f, -0.0591758f,
  +0.1481560f, -0.2095976f, -0.2196828f, -0.1343268f, +0.0368334f, -0.1990533f, +0.1390705f, -0.1035762f,
  +0.0895346f, +0.1560923f, +0.1201777f, -0.0500624f, -0.0238193f, +0.2019378f, +0.1919006f, -0.4767109f,
  +0.0852183f, +0.0755124f, -0.0262942f, +0.1050367f, +0.0059488f, +0.2665594f, -0.0862849f, -0.1234018f,
  -0.1158466f, +0.0373014f, -0.0181015f, -0.2585320f, +0.3151470f, +0.2420971f, +0.2254330f, +0.0343087f,
  +0.2139366f, -0.2724112f, +0.0267270f, +0.2293131f, -0.1432155f, -0.1163331f, -0.3212879f, +0.1473231f,
  -0.0672284f, -0.0717382f, -0.2134908f, +0.0149561f, -0.0216150f, +0.1284928f, +0.0400672f, -0.3727075f,
  +0.1883852f, -0.0424780f, +0.4657963f, +0.2681341f, -0.0665422f, +0.2700227f, +0.0947076f, -0.1385525f,
  +0.0699806f, +0.1805428f, +0.0251276f, -0.1810022f, +0.2130199f, +0.1557838f, -0.1947429f, +0.1738582f,
  +0.2581590f, -0.2144376f, +0.2556958f, -0.1169656f, -0.0453524f, +0.7053849f, +0.0373767f, +0.1125105f,
  -0.1330654f, -0.2153022f, -0.0844939f, +0.1661713f, -0.0283948f, +0.1382838f, -0.3018197f, +0.0318111f,
  +0.0452501f, +0.1415372f, -0.4107256f, -0.1330412f, -0.0813305f, -0.0701668f, -0.3911747f, -0.0190132f,
  +0.2802197f, -0.1991948f, +0.4552157f, -0.1441246f, +0.4368007f, +0.4695233f, -0.1343791f, -0.1333745f,
  +0.0329892f, -0.0231697f, -0.1798777f, +0.0178932f, +0.0134007f, -0.0427170f, +0.1468798f, -0.1458773f,
  -0.2793629f, +0.1136875f, -0.2305115f, -0.0224670f, -0.1337251f, -0.2069722f, -0.1851089f, +0.2698442f,
  -0.0489800f, -0.0557229f, -0.0845132f, +0.0307153f, -0.1005649f, +0.0920045f, -0.0395229f, +0.0662452f,
  -0.1695886f, +0.1541768f, +0.3614276f, +0.1581207f, -0.0627181f, +0.0635911f, -0.1976124f, +0.0792604f,
  +0.1263485f, -0.0260325f, -0.1866697f, +0.1340428f, -0.1495455f, +0.2063971f, -0.0983254f, -0.2985811f,
  +0.1266998f, -0.0866851f, -0.1166503f, -0.0046765f, +0.0004006f, +0.2516427f, +0.0621767f, -0.0586175f,
  +0.0115513f, +0.0079385f, +0.0506375f, +0.0550011f, +0.1116913f, +0.0765193f, -0.0713678f, +0.1391192f,
  -0.2384682f, +0.1164715f, +0.0791112f, -0.0011670f, +0.0080300f, -0.1401626f, +0.0785022f, +0.1530269f,
  -0.1416015f, -0.0016071f, +0.0946272f, -0.0061139f, -0.0569645f, +0.1811187f, -0.1689955f, +0.0582125f
);

const float biases[4] = float[4](
  -0.1104046f, +0.0611436f, +0.0046767f, +0.1152528f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer10 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0238817f, -0.0104068f, +0.0853625f, +0.0296037f, -0.0031868f, +0.0362449f, -0.4106408f, +0.1472623f,
  +0.0382058f, +0.0224789f, -0.0827635f, +0.2055127f, +0.0394795f, -0.1120342f, +0.0938614f, +0.0603374f,
  +0.2293541f, +0.0421889f, -0.0478891f, +0.1540462f, -0.2364214f, +0.1011992f, +0.0135938f, -0.0435152f,
  +0.1992325f, -0.0371425f, -0.4076722f, +0.2659491f, -0.3955583f, -0.0102158f, +0.2239441f, -0.4090214f,
  -0.2241772f, -0.1826469f, -0.3082247f, -0.0124426f, -0.0664228f, -0.1220604f, -0.1120262f, +0.0478397f,
  -0.2625292f, -0.2243623f, +0.0051142f, +0.0731822f, -0.0518021f, -0.0725629f, +0.0142281f, +0.2213841f,
  +0.1232234f, -0.0785387f, +0.0297330f, +0.1334528f, +0.1369546f, -0.0320844f, -0.1004240f, +0.0804956f,
  -0.2562808f, +0.1905519f, -0.0454871f, +0.2514579f, +0.1230852f, +0.1792971f, +0.1060345f, +0.2324898f,
  +0.0138832f, -0.0994435f, +0.0735912f, -0.0531891f, +0.0866914f, +0.1621500f, +0.1908714f, +0.2075245f,
  +0.0873525f, +0.0398358f, -0.0020443f, +0.0190238f, -0.0366830f, -0.0499741f, +0.0951448f, +0.1829257f,
  -0.1146801f, +0.3063966f, -0.0454025f, +0.1017522f, +0.0616101f, -0.0505942f, -0.1199623f, -0.0845097f,
  +0.1001920f, +0.1523544f, -0.0911939f, +0.0878502f, +0.0424574f, -0.0669755f, +0.0252760f, -0.1295763f,
  +0.0684046f, +0.1172769f, -0.3467993f, +0.0868376f, -0.2652370f, +0.0465273f, -0.0584703f, +0.0701986f,
  -0.0942621f, -0.1698360f, -0.2836846f, +0.0023956f, +0.1085235f, -0.4221130f, -0.0421964f, +0.0660173f,
  -0.5597507f, +0.1617917f, -0.1672267f, +0.0859262f, +0.0134392f, +0.0262942f, -0.0046364f, +0.3084716f,
  +0.1156585f, -0.1263345f, -0.2688378f, -0.0007017f, +0.2950021f, -0.1095151f, -0.0344430f, -0.2313152f,
  +0.0704017f, +0.0656259f, +0.0321470f, +0.0860999f, +0.2160616f, -0.0545293f, -0.0745333f, +0.0474642f,
  +0.1532706f, -0.0926295f, -0.2603377f, +0.1450537f, -0.0111780f, -0.3912351f, +0.2808544f, +0.0155352f,
  -0.0120375f, -0.3254827f, -0.0276569f, -0.1904353f, -0.4025637f, +0.2008657f, -0.0089466f, -0.1952797f,
  +0.3666036f, -0.2963959f, -0.0208098f, +0.0280663f, +0.1294047f, +0.0434316f, +0.0754359f, +0.0157050f,
  +0.0042943f, -0.3100525f, +0.0933711f, +0.0198565f, +0.0980609f, +0.0210654f, -0.1836063f, -0.1449293f,
  -0.0195352f, -0.0499469f, -0.0563210f, -0.1024739f, +0.2829791f, -0.0692463f, -0.0890115f, -0.0284194f,
  +0.1077694f, +0.0397220f, +0.1849619f, +0.1721288f, -0.0828381f, +0.0917563f, -0.0393331f, +0.0195627f,
  +0.0031098f, -0.0344479f, +0.2959571f, +0.0824150f, +0.0687621f, -0.3215344f, -0.1011593f, +0.0898519f,
  +0.0622363f, -0.0041886f, -0.0280691f, -0.1763493f, -0.4871103f, -0.0558607f, +0.1271289f, +0.1079867f,
  -0.0398698f, -0.1519466f, -0.0804802f, -0.2198898f, -0.2403503f, -0.1606743f, +0.2228956f, -0.1394012f,
  +0.1159457f, +0.1358124f, +0.1801801f, +0.0343487f, -0.1682889f, +0.0620742f, +0.1384856f, +0.1301081f,
  -0.0354565f, -0.0790133f, +0.1713229f, -0.0428346f, -0.2242013f, +0.1430117f, -0.1001831f, -0.2739058f,
  +0.1235630f, +0.0738245f, +0.1884492f, +0.2863243f, +0.3223963f, -0.0045400f, +0.0137282f, -0.0158457f,
  +0.1792976f, -0.2589309f, +0.0109442f, +0.0026566f, +0.2506888f, +0.2415512f, +0.1263889f, -0.0259942f,
  +0.0369138f, +0.1306647f, +0.0578633f, +0.1874712f, -0.0493770f, +0.0968741f, +0.1750688f, -0.1119992f,
  +0.0770501f, +0.0556299f, +0.6356058f, +0.5387325f, +0.0554558f, +0.2263920f, -0.1552684f, -0.0908271f,
  -0.1760668f, -0.0440105f, +0.1369321f, +0.1227805f, +0.2642331f, +0.0185019f, +0.0635574f, -0.0862428f,
  +0.0331164f, -0.1678605f, -0.2315392f, -0.1842596f, -0.1837051f, +0.1601320f, +0.1019800f, +0.2014258f,
  +0.0514162f, +0.0528896f, +0.1540992f, +0.0865062f, -0.2792270f, -0.0395491f, -0.0400061f, +0.3030521f,
  +0.0795149f, -0.1154559f, +0.0937606f, -0.0135002f, -0.1310586f, +0.1135830f, +0.0318751f, +0.0134505f
);

const float biases[4] = float[4](
  +0.0489152f, +0.0181887f, +0.0292408f, -0.0277001f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer10 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0847397f, +0.1761431f, -0.0463345f, -0.0430153f, +0.1980820f, +0.0933311f, -0.2763585f, +0.0659187f,
  +0.0237469f, +0.3281734f, +0.1840895f, -0.1872645f, -0.0018270f, +0.2103832f, -0.0129152f, +0.2561956f,
  +0.1495966f, +0.3475035f, +0.1529848f, -0.1984462f, -0.1836293f, +0.0595288f, -0.3140023f, +0.1527859f,
  +0.1329326f, -0.2696871f, +0.2524500f, -0.0496090f, -0.5159072f, +0.2953136f, -0.2818501f, +0.0937564f,
  -0.0332776f, +0.1079561f, +0.3449566f, -0.0491078f, -0.4180537f, -0.3102605f, -0.2680572f, +0.4325646f,
  -0.1243666f, -0.4011832f, +0.0016579f, -0.0599637f, -0.0310170f, -0.1241149f, -0.2620931f, -0.0678866f,
  +0.1284673f, +0.1140011f, +0.1753824f, -0.0359568f, -0.0803079f, +0.0791370f, -0.3289380f, -0.1843661f,
  -0.0837634f, -0.0005275f, +0.1536490f, -0.0155902f, -0.0837694f, -0.0793635f, -0.5803947f, +0.0337971f,
  -0.3625849f, +0.1065341f, +0.1913094f, +0.0412864f, +0.1378049f, -0.2382931f, -0.2738103f, -0.1225392f,
  +0.0854893f, +0.0081166f, -0.0352059f, -0.0144058f, -0.2532622f, -0.1396801f, +0.4128494f, +0.0266446f,
  -0.0650146f, -0.5716562f, +0.0123921f, +0.3008067f, -0.1518854f, -0.2318096f, -0.1043990f, -0.0054637f,
  -0.2497499f, -0.2341969f, -0.0991070f, +0.0587179f, -0.2685720f, +0.0375132f, +0.3791537f, -0.1272907f,
  +0.2178753f, -0.1075054f, -0.4905946f, +0.0959742f, -0.0252074f, +0.0728148f, +0.2112756f, +0.1572743f,
  +0.0339385f, +0.0677058f, -0.1979978f, -0.1078884f, +0.0919254f, +0.3153796f, -0.2666682f, -0.0018230f,
  -0.0421533f, -0.1729836f, -0.3125269f, -0.0671762f, -0.2298924f, +0.1115657f, -0.1846996f, +0.1220002f,
  -0.0230634f, -0.0818191f, +0.1335620f, +0.0680532f, +0.3834322f, +0.1525439f, +0.1498114f, +0.1777693f,
  -0.3356845f, +0.1373681f, +0.1379497f, +0.0275189f, +0.2089283f, +0.3959682f, -0.0246519f, -0.2069935f,
  -0.4091159f, +0.0453436f, -0.3588123f, -0.0814528f, +0.3722027f, -0.0557700f, -0.0012821f, -0.0564981f,
  -0.1709118f, +0.0345765f, +0.1392144f, -0.2843653f, +0.2752065f, -0.0788255f, +0.2867585f, +0.0001508f,
  -0.1359056f, -0.0246833f, +0.1834514f, -0.0533393f, -0.0161206f, -0.1645698f, -0.1264372f, +0.0896823f,
  +0.1841182f, +0.0672690f, +0.1874152f, +0.0931680f, +0.1876949f, +0.0272515f, +0.1861636f, -0.0092869f,
  -0.0533068f, +0.0066226f, +0.5217891f, +0.2495972f, +0.0598680f, +0.1537731f, +0.1190118f, -0.1834611f,
  -0.4752731f, +0.0794925f, +0.2712439f, -0.4817777f, +0.1525178f, +0.1600949f, -0.1205689f, -0.3793799f,
  +0.1184854f, +0.1240777f, +0.4511108f, +0.2703203f, +0.2840697f, +0.0554804f, +0.2931880f, +0.0077237f,
  +0.1649728f, +0.0023281f, +0.5156549f, -0.0705804f, +0.2040968f, +0.1782125f, -0.0833753f, -0.0495097f,
  -0.1610886f, +0.0791138f, +0.3355567f, -0.0084346f, +0.0835954f, +0.0515895f, -0.1908439f, -0.2471820f,
  +0.6932492f, -0.1298325f, +0.3247148f, +0.0012361f, -0.0400720f, -0.1195790f, -0.0785434f, -0.0977424f,
  +0.0451953f, -0.1885781f, -0.0254275f, +0.0800546f, +0.2974731f, -0.0939634f, -0.2303093f, +0.0689015f,
  +0.0982996f, -0.2768857f, -0.2211741f, +0.4797292f, -0.0738461f, +0.3696022f, +0.1292887f, +0.1404859f,
  +0.0497868f, -0.0813445f, -0.1934125f, +0.0250081f, -0.1083691f, +0.1982177f, +0.0822564f, -0.0943495f,
  -0.1652314f, +0.0586126f, -0.2852790f, +0.3204800f, +0.0986120f, -0.1135299f, -0.4378781f, +0.1237283f,
  +0.3885830f, +0.2030755f, -0.1190897f, +0.2018075f, +0.0615922f, -0.0607163f, +0.1838142f, -0.1954622f,
  -0.5241445f, +0.0354601f, -0.4152511f, -0.0181860f, +0.1796150f, -0.1976192f, +0.1343989f, -0.2755917f,
  -0.0543954f, +0.0979701f, -0.0722732f, +0.2466892f, +0.1790857f, +0.0141691f, +0.4962819f, +0.0611861f,
  +0.0700970f, +0.0054188f, -0.3856205f, +0.2596637f, +0.0492820f, +0.4389142f, +0.1015301f, -0.1828685f,
  +0.2597595f, +0.0632261f, -0.3307980f, -0.0285969f, +0.1049994f, +0.2693286f, -0.1234928f, +0.0514328f
);

const float biases[4] = float[4](
  -0.0547984f, +0.0575390f, -0.0455755f, +0.0247276f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer11 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1128701f, -0.4835672f, -0.4896767f, +0.1664214f, -0.1287460f, -0.3164750f, -0.2342661f, -0.1802173f,
  -0.1130185f, -0.0460383f, -0.1425803f, -0.1297642f, +0.0201267f, -0.1286599f, +0.2729760f, +0.0593773f,
  -0.0304567f, +0.0718323f, -0.2540598f, +0.0628737f, -0.1463941f, -0.0304890f, +0.0952602f, -0.0811609f,
  -0.1099349f, -0.3017376f, -0.2094082f, -0.0895006f, -0.0608992f, +0.5864469f, -0.0635267f, -0.3153045f,
  -0.0052891f, -0.2683161f, -0.3308003f, -0.1295130f, -0.2814978f, +0.1751996f, +0.0620702f, +0.2246529f,
  -0.0564179f, -0.1362752f, -0.0903908f, -0.3164826f, +0.0459208f, -0.3723967f, +0.1533508f, +0.0453949f,
  +0.0479187f, -0.2683671f, -0.2505421f, -0.1471348f, -0.0812372f, -0.0125954f, -0.0521902f, -0.2605079f,
  -0.0232587f, -0.1691588f, +0.1184934f, -0.1138844f, -0.0964916f, +0.1888249f, -0.1428917f, +0.0241093f,
  +0.0793640f, -0.0663871f, -0.0517234f, +0.0447900f, +0.0103204f, -0.0409073f, +0.0250240f, +0.1179113f,
  -0.0969964f, +0.2695007f, -0.0870437f, -0.1491962f, +0.0511808f, -0.0758392f, +0.1058527f, +0.2129623f,
  +0.2514960f, -0.0269313f, -0.2257622f, +0.0306141f, -0.0332090f, -0.1554284f, +0.0044980f, -0.2992408f,
  +0.0495393f, -0.0519748f, -0.0982314f, +0.1572732f, -0.1032940f, -0.0043501f, +0.0805828f, -0.0962722f,
  +0.0389573f, -0.1757311f, -0.3778837f, -0.2808377f, -0.0559265f, +0.0261491f, +0.0392574f, -0.1618732f,
  +0.2076697f, +0.0511308f, +0.0901930f, +0.0194824f, -0.0376317f, +0.4548835f, +0.0371929f, -0.5844609f,
  -0.0802353f, -0.2422348f, +0.0640254f, -0.1403721f, +0.1752229f, +0.1919133f, +0.1356260f, +0.0464381f,
  -0.2249126f, -0.0795996f, -0.0290857f, -0.0904947f, +0.2539940f, -0.0320803f, -0.1360126f, +0.0632172f,
  -0.1106577f, -0.1510595f, +0.2087071f, -0.0522691f, +0.2090759f, +0.0476132f, +0.1588391f, +0.0323616f,
  -0.0030811f, -0.1924619f, +0.2465947f, +0.0520566f, +0.2009221f, +0.0228919f, +0.0560695f, -0.0402936f,
  -0.2278475f, -0.1436206f, +0.4435954f, -0.0640351f, +0.0072997f, +0.0272608f, +0.2033765f, -0.0321924f,
  -0.1962569f, +0.4086810f, +0.8815311f, -0.0601519f, +0.2036320f, -0.3254005f, -0.2337776f, +0.3854546f,
  +0.1106731f, +0.1910577f, +0.2819783f, +0.0616683f, -0.0092366f, -0.2377494f, -0.2534355f, +0.1404837f,
  +0.1762518f, +0.5365691f, -0.0244429f, +0.0181636f, +0.1959062f, -0.2523702f, +0.0488208f, -0.0177792f,
  +0.3796686f, +0.3326985f, -0.0611541f, +0.0566107f, +0.1278120f, +0.0527319f, -0.5348466f, +0.2088683f,
  -0.1116647f, +0.3561936f, -0.1971918f, -0.0930802f, -0.1130230f, +0.1835378f, +0.0776460f, -0.2325288f,
  -0.0340923f, -0.1485408f, -0.0791487f, -0.1027441f, -0.2565350f, -0.1217647f, +0.0079459f, -0.0420408f,
  -0.1137796f, -0.2463812f, -0.0776838f, +0.1477288f, -0.5072995f, +0.0006145f, -0.0466541f, -0.1617175f,
  -0.0036297f, +0.0029504f, -0.1352772f, -0.2357162f, +0.0018726f, +0.1266027f, -0.1420069f, +0.0928975f,
  -0.0858907f, +0.0765688f, -0.0793194f, +0.1891290f, +0.1440438f, +0.0025434f, +0.1894997f, +0.2100238f,
  -0.0046258f, +0.0434128f, -0.2536263f, -0.0086133f, -0.0861198f, +0.1908211f, +0.2761894f, -0.0305728f,
  +0.0675023f, +0.0116420f, +0.0260808f, -0.0348236f, +0.0967815f, -0.2928111f, +0.2347056f, +0.0185815f,
  -0.1213583f, +0.0918461f, +0.3827529f, +0.1394123f, +0.0457824f, +0.1212194f, +0.0551081f, +0.2163994f,
  +0.1476240f, -0.0448668f, +0.1210197f, +0.3931859f, -0.5077046f, -0.0632572f, -0.3241166f, -0.0912140f,
  +0.2403518f, +0.2728718f, +0.2518888f, +0.0077096f, -0.0290112f, -0.0227173f, -0.0802820f, -0.0706699f,
  -0.0404310f, -0.0257329f, -0.1101668f, -0.0712290f, -0.0184592f, -0.0138115f, -0.0573186f, +0.0675631f,
  -0.2875183f, -0.1153355f, +0.0409719f, -0.0674765f, -0.0564797f, -0.0039100f, +0.0775691f, +0.0832898f,
  -0.3311192f, -0.1002885f, +0.0169576f, +0.0750152f, +0.1191366f, -0.0177018f, +0.2032004f, -0.1925527f
);

const float biases[4] = float[4](
  +0.0821752f, +0.0010057f, -0.0588899f, +0.0725488f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer11 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1222884f, +0.2893124f, +0.2338705f, -0.0455800f, +0.0176190f, +0.4278354f, +0.0624007f, +0.0526594f,
  +0.0757472f, -0.2754139f, +0.0869009f, -0.1149663f, -0.1099637f, -0.3835090f, +0.0021909f, -0.1300321f,
  -0.1308537f, +0.0540175f, +0.0497921f, +0.1292531f, +0.1543647f, +0.0343343f, +0.0122692f, -0.2073330f,
  -0.0598502f, +0.1223902f, +0.0650062f, -0.0098923f, -0.0875976f, +0.0772271f, -0.2553641f, -0.2078334f,
  +0.3510646f, +0.0096112f, +0.0032992f, +0.0662094f, +0.1856389f, -0.1025095f, -0.1354615f, -0.3444000f,
  -0.1794579f, -0.0536812f, -0.1027078f, +0.3065144f, +0.0627012f, -0.1893006f, -0.0089220f, +0.1276371f,
  +0.0658397f, +0.1181910f, +0.1891156f, +0.1170133f, -0.2120112f, +0.0511469f, -0.0249716f, +0.0058583f,
  -0.0666590f, -0.1652279f, +0.2117255f, +0.1847764f, +0.2157916f, -0.2134022f, +0.1119798f, +0.0178390f,
  -0.1372284f, -0.0153486f, +0.0408348f, -0.0523151f, +0.3042909f, -0.1360970f, +0.1180616f, -0.2849320f,
  +0.0477115f, +0.3102518f, +0.2500382f, +0.0847212f, -0.1204772f, +0.2387851f, +0.0039834f, +0.0665362f,
  +0.3484651f, -0.3799685f, -0.1034915f, +0.0939343f, +0.1424377f, -0.3222427f, +0.0008650f, -0.0068230f,
  -0.0139161f, +0.0207870f, -0.3084630f, +0.1188069f, -0.0842056f, -0.0400105f, -0.0284777f, +0.0116009f,
  +0.0124437f, -0.1460894f, -0.4535294f, +0.1061800f, +0.2042431f, -0.3768359f, -0.2257614f, +0.1015714f,
  -0.1725670f, -0.1999732f, -0.1827584f, +0.0555973f, -0.2964436f, +0.2081716f, +0.4274105f, +0.0831184f,
  -0.1361906f, +0.2392004f, +0.2494362f, -0.0319629f, -0.1044673f, -0.0604494f, -0.2040862f, +0.1487314f,
  +0.1282471f, -0.1244782f, +0.1616947f, -0.0190335f, -0.2180299f, +0.0909784f, +0.2832211f, +0.0189056f,
  -0.1529688f, +0.3775855f, +0.1396329f, +0.0896720f, +0.3770787f, -0.0259187f, -0.1573083f, -0.1551619f,
  -0.0418078f, -0.3173055f, -0.2851618f, +0.0452499f, +0.1116748f, -0.0483341f, +0.1188950f, -0.0259052f,
  -0.0214909f, -0.1789889f, +0.1005806f, +0.1432831f, +0.1480235f, -0.1891864f, +0.0059832f, -0.1376032f,
  -0.0711766f, -0.3614567f, -0.2146580f, +0.1036300f, +0.1111598f, -0.1265593f, +0.1202360f, +0.0756011f,
  +0.0920734f, +0.0474923f, -0.1967511f, +0.1233734f, +0.0995787f, -0.2028272f, +0.1636869f, +0.0680609f,
  -0.3500311f, -0.0260635f, +0.0236848f, -0.0963474f, -0.0899980f, -0.1915645f, +0.0186538f, +0.0744340f,
  +0.1135845f, +0.1987501f, -0.0700445f, +0.1886621f, -0.3489852f, +0.0329231f, -0.0013970f, -0.0421244f,
  +0.0313118f, +0.1554556f, +0.2683386f, +0.3635730f, +0.0445289f, +0.0319534f, +0.0084509f, -0.4576740f,
  +0.0156936f, -0.0253059f, +0.0593963f, +0.1439959f, +0.0921672f, -0.1356311f, +0.1463486f, +0.2153193f,
  +0.1719951f, -0.3178937f, -0.0027022f, +0.0036249f, -0.3064638f, -0.0936593f, -0.1659638f, +0.0069095f,
  +0.0516627f, +0.0169160f, -0.1925152f, -0.1338275f, -0.0870474f, +0.0758437f, -0.1343773f, -0.0663788f,
  +0.3139539f, -0.1959029f, -0.0046848f, -0.0222512f, -0.2222489f, -0.0508807f, -0.0536452f, -0.1595505f,
  -0.0962550f, +0.0030057f, -0.0000449f, -0.0301012f, +0.2146920f, +0.0724357f, +0.0390555f, -0.0345485f,
  +0.0904265f, -0.0896637f, +0.0958069f, +0.0229231f, -0.0519400f, +0.3618892f, -0.2378104f, -0.1331126f,
  +0.0345651f, +0.1059769f, -0.1709423f, -0.0192871f, +0.0036525f, +0.1415565f, +0.1740692f, +0.0428951f,
  -0.2665093f, +0.3467554f, +0.1498907f, -0.1054141f, -0.0917915f, +0.1640347f, +0.1054929f, -0.3456512f,
  -0.1819408f, +0.0591997f, +0.0289720f, +0.0707082f, +0.0889347f, +0.2029902f, -0.0268733f, -0.1218556f,
  +0.1191940f, +0.0390807f, -0.0037278f, +0.0896960f, -0.0680521f, +0.0252752f, +0.1240417f, +0.0376336f,
  +0.0312675f, +0.1774286f, -0.0343920f, +0.2496048f, -0.0014937f, -0.2055541f, +0.1137619f, -0.1442800f,
  -0.1622555f, +0.1028523f, -0.0428887f, -0.1148377f, -0.2021941f, -0.0178941f, +0.3480389f, -0.2058084f
);

const float biases[4] = float[4](
  +0.0938197f, +0.0127543f, +0.1070128f, +0.0420674f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer12 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2578380f, -0.1545750f, -0.1695080f, -0.2118646f, +0.0617391f, -0.2315478f, -0.1523080f, +0.0460955f,
  -0.1125631f, -0.0779412f, -0.1671960f, +0.1827659f, -0.1399647f, +0.2602330f, -0.1075067f, +0.1484474f,
  -0.1102499f, -0.0792012f, -0.0363373f, +0.0880361f, +0.1157156f, -0.0153078f, +0.0297093f, -0.4270278f,
  +0.2891231f, +0.0116481f, -0.1270223f, +0.0239536f, +0.2294571f, +0.1953049f, -0.1261550f, +0.1013071f,
  -0.1690875f, +0.1128227f, -0.1274738f, -0.0067101f, -0.3485389f, -0.1312493f, -0.0281211f, +0.3440034f,
  +0.0276346f, +0.0643893f, -0.1916828f, -0.3081495f, -0.2795408f, +0.0905515f, +0.1501104f, +0.1337210f,
  -0.0956336f, -0.0828588f, +0.0038289f, -0.0909362f, -0.1353551f, -0.0692016f, -0.1210351f, -0.1702674f,
  +0.0895117f, -0.1552827f, -0.2742778f, -0.3187405f, +0.1679743f, -0.2240627f, +0.1109879f, +0.0500160f,
  +0.1527026f, +0.1523547f, +0.2468441f, -0.0553352f, +0.3294498f, +0.0841729f, -0.0327579f, +0.0451310f,
  -0.1407442f, -0.1742750f, +0.0192592f, +0.1969772f, -0.0576190f, -0.1147120f, -0.2338157f, -0.1265159f,
  -0.0295304f, -0.1486430f, +0.0865468f, +0.0958286f, +0.2036071f, -0.1259137f, -0.1435603f, +0.2217925f,
  -0.2015497f, +0.0086042f, +0.0082140f, -0.3220007f, -0.2609799f, +0.2434342f, +0.1666441f, -0.0659977f,
  +0.0808008f, +0.1051499f, -0.0922703f, -0.0913686f, +0.1949606f, -0.0344091f, +0.0428888f, +0.3549881f,
  +0.0854515f, -0.0548256f, -0.6308935f, +0.2778836f, +0.1940382f, +0.3670140f, +0.0337099f, -0.1618446f,
  -0.2018083f, -0.1444360f, +0.2118748f, -0.0588257f, -0.1245186f, -0.0276319f, -0.0433273f, -0.0511998f,
  -0.0523198f, -0.2603270f, -0.0022270f, +0.2246478f, +0.1185010f, -0.0617913f, -0.1203987f, +0.0691745f,
  +0.1358230f, +0.0652408f, -0.0774674f, +0.0276642f, -0.1803686f, +0.0722878f, -0.0900648f, +0.1736274f,
  -0.2448727f, -0.2618824f, -0.2698617f, -0.0747916f, -0.4168078f, -0.0741671f, -0.1179996f, -0.1101816f,
  +0.0487550f, -0.0437663f, +0.0033766f, -0.2081814f, +0.0757575f, +0.0236009f, -0.4411157f, +0.1435492f,
  -0.0302206f, +0.3821409f, +0.0198114f, -0.1028826f, -0.1305498f, +0.1785014f, +0.1372291f, +0.0233643f,
  +0.0954702f, -0.1672279f, +0.4031159f, -0.2100680f, +0.0442203f, +0.1396485f, +0.0881002f, +0.1345156f,
  +0.2085446f, +0.0156260f, -0.0600670f, +0.1186035f, +0.1501247f, -0.0874970f, -0.0514687f, -0.2329020f,
  +0.1209742f, -0.0474191f, +0.5872298f, -0.0784519f, -0.1265050f, +0.3975310f, -0.1310517f, +0.1936409f,
  -0.3282594f, -0.0991717f, +0.2244459f, -0.0984491f, +0.1724168f, -0.0326190f, +0.0019555f, -0.0837951f,
  -0.1574006f, +0.2827393f, +0.0360172f, +0.0313692f, +0.1180821f, -0.0529483f, +0.0929707f, +0.2648118f,
  -0.1930351f, +0.3949545f, +0.4174002f, +0.0044006f, -0.0335425f, +0.0589883f, -0.3200691f, +0.2717367f,
  -0.2777387f, -0.2039188f, +0.0412110f, +0.0566801f, +0.0756345f, +0.1358182f, +0.0801044f, +0.0680733f,
  -0.0148050f, +0.0119920f, +0.0569446f, -0.0156210f, -0.0829777f, -0.1605376f, -0.0552306f, +0.1376839f,
  -0.1565786f, +0.0045700f, +0.0660650f, -0.1438742f, +0.0160005f, -0.0482591f, +0.2141753f, -0.1308295f,
  +0.0946055f, +0.1056302f, +0.2221753f, -0.2347178f, -0.0872661f, -0.0668278f, +0.1614283f, -0.0193243f,
  -0.0601514f, -0.0041254f, -0.0886994f, -0.0464412f, -0.2454641f, -0.3112437f, -0.2176821f, -0.0455023f,
  -0.0017178f, -0.1144481f, +0.2424534f, -0.1675283f, -0.1798234f, -0.2547718f, +0.2085948f, -0.0367192f,
  +0.1762819f, +0.2621679f, +0.2598707f, +0.0484726f, -0.0369558f, +0.1165435f, -0.0969307f, -0.0022805f,
  -0.1951778f, +0.0934739f, +0.0056893f, +0.0897001f, +0.2469334f, -0.1388424f, +0.2623405f, +0.1457864f,
  +0.1625937f, +0.2761225f, +0.0668185f, -0.0264471f, +0.2514999f, -0.2454129f, +0.3289770f, -0.0730096f,
  +0.2139313f, +0.0497116f, +0.2628579f, -0.0656351f, +0.2108439f, -0.2856423f, +0.0617864f, +0.1079739f
);

const float biases[4] = float[4](
  +0.0192017f, +0.0132733f, +0.0818504f, -0.0432668f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer12 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0412570f, -0.0050462f, +0.1262329f, +0.1350280f, -0.2738134f, -0.0771895f, -0.0023287f, +0.4584543f,
  -0.2282742f, -0.1862771f, -0.1890632f, -0.1151334f, -0.2803481f, +0.1414869f, +0.1690416f, +0.1917186f,
  -0.3249825f, -0.2720124f, -0.0736289f, -0.0155807f, +0.1107047f, -0.1969688f, +0.0172672f, +0.1131646f,
  -0.0363391f, -0.1454421f, -0.1008011f, +0.2299202f, +0.1464590f, -0.1819918f, -0.1105380f, -0.0713501f,
  -0.2132363f, -0.3410414f, -0.3783264f, -0.1456788f, -0.0149612f, -0.3844388f, -0.2924989f, +0.1363100f,
  -0.5504637f, -0.0422818f, -0.5129744f, +0.1024341f, -0.1793687f, -0.2301559f, +0.1956497f, +0.2012971f,
  +0.0802980f, +0.2990360f, -0.0438733f, +0.0996455f, -0.1091145f, -0.0369506f, +0.0731247f, -0.0733259f,
  +0.0229544f, +0.1931030f, -0.6348101f, +0.1426305f, +0.1930470f, -0.4574112f, -0.0731720f, +0.2016510f,
  -0.3542690f, -0.0281794f, -0.2595865f, +0.0687177f, +0.1113908f, +0.0171868f, +0.1004072f, -0.3648727f,
  -0.1295279f, +0.2823696f, -0.2306808f, -0.1317034f, +0.1190692f, -0.1280839f, -0.2174312f, -0.0834055f,
  -0.1085672f, +0.1134703f, -0.0905952f, -0.0662369f, +0.1317619f, -0.3199067f, +0.0428070f, -0.0258692f,
  +0.1920105f, -0.0224989f, -0.1069888f, +0.0447680f, +0.0320467f, +0.1472163f, -0.1338516f, +0.2724957f,
  +0.0322997f, -0.1567858f, -0.0394907f, -0.0127418f, +0.0690780f, +0.0960379f, +0.1458848f, -0.3533671f,
  +0.0821437f, +0.0067602f, +0.1572742f, -0.2692609f, +0.1611294f, -0.1369489f, +0.0677218f, -0.0008223f,
  +0.1638261f, -0.2923250f, +0.4767316f, +0.0305148f, -0.0509293f, -0.2057333f, +0.0021419f, +0.2075510f,
  +0.0029286f, -0.1949326f, -0.1591509f, +0.1351140f, +0.0867095f, +0.0788500f, -0.0820432f, +0.0025775f,
  +0.3754777f, -0.0937778f, -0.0202844f, +0.0549756f, +0.2789682f, -0.2458481f, +0.2157976f, -0.0023880f,
  -0.0816243f, -0.6626323f, -0.2097139f, +0.1437123f, -0.2229816f, -0.2434316f, -0.0342262f, +0.0649052f,
  -0.2422222f, +0.1764346f, +0.1796984f, +0.2951697f, -0.0886135f, -0.3549969f, +0.4272851f, +0.1739574f,
  +0.0755532f, +0.2436343f, +0.2008584f, +0.2317296f, +0.0691191f, -0.0958186f, +0.1234654f, +0.0140566f,
  -0.0915261f, -0.0746130f, -0.0644825f, +0.0421684f, +0.0759223f, -0.1545952f, -0.2596190f, -0.1582893f,
  +0.0926550f, +0.0806253f, -0.0734472f, -0.2289895f, -0.2021937f, -0.0139380f, -0.1058927f, +0.0311005f,
  +0.2344544f, -0.1974007f, +0.0600128f, -0.0903875f, -0.1725216f, -0.2635988f, -0.1677375f, +0.0334219f,
  -0.0666941f, -0.0927390f, -0.1426433f, -0.0126976f, +0.3366250f, -0.1724075f, -0.0928008f, -0.1693560f,
  -0.1056328f, +0.0048416f, +0.0920510f, -0.0523711f, +0.0884823f, -0.2463443f, -0.0655868f, +0.1211167f,
  +0.1872817f, +0.0280509f, -0.2647916f, -0.0936125f, +0.0224594f, -0.3466168f, +0.0449176f, -0.1196149f,
  -0.0926114f, -0.0564019f, -0.3445424f, +0.0927686f, +0.1779107f, -0.1394579f, -0.0088928f, -0.0935409f,
  +0.1014239f, -0.0259797f, +0.0733218f, +0.0814740f, +0.2297520f, +0.3092374f, +0.0024271f, +0.1140083f,
  -0.2501311f, +0.0593741f, -0.2213098f, -0.1057731f, -0.1375260f, +0.3324983f, -0.2262310f, -0.1008584f,
  -0.0657020f, +0.3101706f, +0.2106413f, +0.1918674f, -0.0991575f, +0.0736259f, -0.0558231f, +0.0954285f,
  -0.0816883f, +0.0681144f, -0.1905318f, -0.0971447f, -0.0505300f, -0.0975222f, +0.3120756f, +0.0883321f,
  -0.1291082f, +0.0358963f, +0.4689834f, -0.3140589f, +0.0322584f, +0.0424989f, -0.0642832f, -0.0250713f,
  +0.2250093f, -0.0861545f, +0.1699184f, +0.4451637f, -0.0716054f, -0.0068755f, -0.1526885f, -0.1701079f,
  +0.1112598f, -0.0035239f, +0.0251914f, +0.1269671f, +0.0922316f, +0.0911030f, +0.2877157f, -0.0466988f,
  +0.1725830f, -0.1389271f, +0.2689772f, +0.1036346f, +0.0984168f, -0.1051093f, -0.2839352f, +0.1072074f,
  -0.0980238f, -0.1859608f, +0.0154728f, +0.1667247f, -0.3357317f, -0.0773627f, +0.1525403f, +0.2526026f
);

const float biases[4] = float[4](
  -0.0081265f, +0.0014742f, -0.0057684f, +0.0208852f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer13 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1730898f, +0.0943587f, +0.0144071f, -0.1364696f, +0.0496404f, -0.0881064f, -0.1495760f, +0.0593116f,
  -0.1430732f, -0.0768075f, +0.2191599f, -0.2701040f, +0.1577520f, +0.0519729f, +0.2159768f, +0.0084933f,
  -0.0519105f, +0.0873497f, +0.1039977f, -0.0841180f, -0.0810678f, -0.2049264f, -0.2431799f, +0.1210516f,
  +0.3071257f, +0.0561135f, -0.6999421f, -0.1293214f, +0.2483824f, +0.0257846f, -0.1580594f, +0.0568104f,
  -0.4052677f, -0.1615369f, -0.0418939f, -0.1714625f, -0.2933320f, +0.3016960f, +0.4296290f, +0.0314352f,
  +0.1845485f, -0.0036995f, -0.2150561f, -0.0414618f, +0.1072975f, +0.2424711f, +0.1614296f, -0.0564765f,
  +0.3363757f, +0.0549737f, +0.0944754f, +0.0412012f, -0.0277781f, -0.1099703f, -0.0680279f, -0.1808200f,
  -0.2598836f, +0.2067337f, -0.0713336f, +0.0834047f, -0.2021798f, +0.1479234f, -0.2643418f, -0.0380071f,
  +0.0581653f, +0.0356832f, +0.1358474f, -0.0190611f, -0.1916369f, +0.0799813f, +0.1011792f, -0.1174894f,
  -0.1344650f, +0.0863832f, -0.0411373f, +0.0004598f, +0.1371715f, -0.0609757f, +0.0552518f, +0.1885890f,
  -0.0505872f, +0.0396102f, -0.2604530f, -0.2296136f, -0.3169887f, -0.0599152f, +0.1785258f, -0.1262155f,
  -0.0268638f, -0.0389527f, -0.4055619f, +0.0662827f, -0.1453858f, -0.1431247f, +0.3777046f, -0.1213186f,
  -0.2047805f, -0.5925289f, +0.0527803f, -0.2212428f, +0.2915088f, -0.1233392f, +0.0092679f, +0.3683724f,
  -0.3945816f, -0.6049502f, -0.0384487f, -0.5122586f, +0.0878673f, +0.3392353f, +0.0672518f, -0.0831373f,
  -0.1104366f, -0.2036211f, -0.0940120f, -0.1371652f, -0.1561706f, +0.0902295f, -0.0109890f, +0.1866457f,
  +0.0087333f, -0.2986827f, -0.1040125f, -0.2878196f, +0.3361357f, -0.1791008f, +0.0267252f, +0.2573998f,
  +0.1089451f, -0.1041693f, +0.1329718f, -0.3470963f, +0.0878142f, +0.2754546f, +0.0794937f, +0.1872138f,
  -0.1164446f, -0.1370544f, +0.4385315f, +0.1090403f, +0.1325644f, +0.2397506f, -0.1161495f, +0.0262635f,
  +0.0031522f, +0.1456614f, +0.2045498f, +0.0337605f, -0.1783291f, +0.2183879f, -0.1984797f, +0.0818937f,
  -0.0925402f, +0.0022874f, -0.1074334f, +0.1266360f, +0.2002717f, -0.0029036f, +0.0233537f, -0.0371432f,
  +0.3819659f, +0.1050790f, +0.3659415f, -0.2298490f, +0.3811138f, +0.3354974f, +0.3943774f, -0.1779205f,
  +0.0634605f, -0.0230687f, -0.1766465f, -0.0967767f, +0.2943411f, +0.1166571f, +0.0445829f, -0.0779001f,
  -0.0041245f, -0.4363012f, +0.1672033f, -0.0497377f, +0.0609415f, +0.1172108f, -0.0942260f, +0.1793427f,
  -0.2452476f, +0.7536371f, +0.3605879f, -0.0655928f, +0.1715687f, +0.0211094f, +0.2757965f, +0.1865184f,
  +0.0773868f, +0.0693871f, -0.0458899f, +0.1160785f, -0.3003782f, -0.1108024f, -0.1244914f, +0.0012410f,
  -0.1168729f, +0.2455548f, +0.3179400f, -0.4000398f, -0.1497256f, +0.2390801f, +0.0685613f, -0.2273195f,
  +0.0557598f, +0.3119259f, +0.2333747f, +0.3225762f, +0.5519117f, +0.3197182f, +0.1056647f, +0.0619874f,
  -0.0564438f, +0.3747541f, -0.0354856f, -0.1998678f, -0.0109297f, -0.0255801f, +0.3092332f, +0.0182476f,
  +0.1065149f, -0.2827894f, -0.5726961f, +0.3618408f, -0.1362007f, -0.3959167f, -0.1854622f, +0.1688557f,
  +0.1515765f, -0.1672221f, -0.0522883f, +0.0785692f, +0.1597714f, +0.4412310f, +0.0045297f, +0.1489510f,
  +0.4112893f, +0.2091366f, -0.3552015f, +0.0917237f, +0.5324646f, -0.0910820f, -0.0200549f, +0.1175767f,
  -0.1770892f, -0.0034194f, -0.3802556f, +0.0015687f, -0.1376617f, +0.1289396f, +0.1497243f, +0.1078971f,
  +0.0025395f, -0.1583421f, -0.0877194f, +0.1170538f, -0.0424499f, -0.0980828f, +0.2160113f, -0.1417549f,
  -0.2058147f, +0.0017748f, -0.1914576f, +0.1014889f, +0.0245888f, -0.0991331f, +0.0735358f, +0.2307944f,
  -0.1164798f, +0.1823051f, +0.1965268f, +0.2466709f, +0.1702437f, -0.0738899f, -0.0432234f, +0.0551766f,
  -0.0719706f, -0.1107647f, +0.1565366f, +0.0661622f, +0.0037388f, -0.0434966f, +0.0808341f, +0.0282741f
);

const float biases[4] = float[4](
  +0.0843599f, -0.0164030f, -0.0381592f, +0.0086934f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer13 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.3159817f, +0.0841541f, +0.0961303f, -0.2304887f, -0.0594902f, +0.0829879f, +0.0586467f, -0.1085907f,
  -0.0223468f, -0.4087776f, +0.2182527f, -0.0671014f, -0.0241743f, -0.1677894f, -0.0148996f, +0.2975479f,
  -0.0688594f, +0.2248342f, +0.0644199f, +0.1638118f, +0.1846496f, +0.2885634f, -0.1785370f, +0.0623576f,
  +0.2990044f, +0.1160344f, +0.1012709f, -0.0808398f, -0.1076673f, +0.0637446f, +0.0214296f, -0.2997980f,
  -0.0979420f, -0.2397481f, -0.3492081f, +0.2649856f, -0.0093648f, -0.2952444f, -0.4362469f, +0.0806241f,
  -0.0264535f, +0.1679391f, -0.0708646f, +0.1962288f, +0.0377089f, -0.2219368f, +0.1077194f, -0.0911132f,
  +0.1950810f, +0.2161430f, -0.1365945f, +0.3289403f, -0.1748257f, -0.0020453f, +0.1483952f, +0.1206578f,
  -0.0586803f, +0.0213082f, -0.0318789f, +0.0470899f, -0.4601037f, -0.2470441f, +0.1653755f, +0.1452105f,
  -0.0432500f, +0.1028233f, +0.2424130f, +0.1091530f, +0.0512109f, -0.1333786f, +0.0733977f, -0.0436055f,
  +0.2806002f, -0.3071793f, -0.1418192f, +0.0718655f, -0.0074509f, -0.0257919f, -0.0028876f, -0.1269975f,
  -0.0815385f, -0.1499189f, +0.0180808f, +0.0727960f, +0.1189146f, +0.1122927f, -0.0459571f, +0.1736747f,
  -0.3565742f, +0.0528073f, -0.0089807f, -0.1778223f, +0.0963807f, -0.0642511f, +0.0391328f, +0.1046492f,
  +0.0346753f, -0.1282891f, +0.1057919f, +0.0733794f, -0.2821665f, -0.3529431f, +0.0931182f, +0.0576943f,
  -0.1148094f, -0.5093105f, +0.3978435f, +0.2394457f, +0.0740972f, -0.2238720f, -0.0795363f, +0.0320332f,
  -0.1026492f, -0.2054815f, +0.2495858f, -0.1082061f, +0.2033519f, -0.2638690f, -0.1019133f, +0.0504690f,
  +0.0081511f, -0.2260137f, -0.0193131f, +0.0527217f, +0.1543220f, -0.2220650f, +0.1276663f, +0.1618628f,
  +0.1678421f, -0.0675699f, +0.0946997f, +0.1210362f, -0.1682521f, -0.0495489f, +0.1025217f, +0.1808259f,
  -0.4857610f, -0.1088797f, +0.1421534f, +0.1793617f, +0.2096258f, -0.1817005f, +0.1101520f, -0.0140536f,
  +0.0489510f, +0.0494011f, -0.1368955f, +0.2249414f, -0.1057574f, -0.1688752f, +0.2159939f, +0.1378809f,
  -0.1500634f, -0.1207797f, -0.0953356f, +0.0393335f, +0.0382181f, -0.0584435f, +0.1870206f, +0.0241082f,
  -0.2603389f, +0.2328980f, -0.1278751f, +0.1101388f, -0.0830290f, -0.0907677f, -0.0104055f, -0.0776325f,
  +0.1841347f, -0.0328935f, +0.2710592f, -0.0132360f, +0.0719202f, -0.0010081f, -0.1558343f, -0.1533205f,
  -0.0667442f, +0.0474497f, +0.1616946f, +0.1636856f, +0.1510221f, -0.1242982f, -0.0519329f, -0.1833059f,
  -0.2850488f, -0.0765159f, -0.2467591f, -0.2129232f, -0.0373093f, -0.3710520f, +0.1450143f, +0.1044355f,
  +0.0295523f, -0.1678004f, -0.1576509f, -0.1022385f, -0.0791660f, -0.1821689f, -0.0571864f, +0.2003786f,
  +0.1087395f, +0.1222807f, +0.0296065f, -0.0563513f, -0.1727222f, +0.0512765f, -0.0591323f, -0.0205124f,
  -0.0698076f, -0.0701001f, +0.0239704f, -0.0724809f, -0.0964117f, +0.1198973f, -0.0666836f, +0.0845415f,
  -0.0024341f, +0.2109087f, -0.0756928f, +0.2239488f, +0.0301618f, -0.0729860f, +0.2189954f, +0.2113684f,
  -0.0582516f, +0.1820955f, -0.1062246f, +0.0341051f, +0.4259259f, +0.2279827f, +0.0447367f, +0.0452448f,
  -0.0036352f, +0.0014281f, +0.0534076f, -0.2544755f, -0.1586312f, -0.3136581f, +0.2628747f, -0.2464782f,
  -0.1124315f, -0.2874478f, +0.1362325f, +0.2197563f, -0.0823338f, -0.2382307f, -0.0722477f, -0.0677200f,
  +0.0900883f, -0.3189067f, +0.0934808f, +0.1261388f, -0.2387289f, +0.2134366f, -0.0154294f, +0.1558012f,
  -0.0450715f, +0.0313851f, +0.0749862f, -0.1574637f, +0.1384710f, +0.3018585f, +0.1461849f, -0.3111903f,
  +0.0359957f, +0.2033998f, +0.0349518f, +0.0538490f, +0.2036847f, -0.0575609f, +0.2028503f, -0.0621642f,
  -0.2568818f, +0.0704092f, -0.3325351f, +0.0257797f, +0.1874181f, -0.0182475f, +0.0812068f, +0.0991224f,
  -0.0767443f, -0.2118231f, -0.1790422f, -0.1263280f, -0.1694230f, -0.2065120f, -0.0062686f, -0.0517389f
);

const float biases[4] = float[4](
  +0.0320413f, +0.0647054f, +0.0400742f, +0.0972497f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer14 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0160034f, -0.0314284f, +0.0831011f, -0.0300138f, -0.1102608f, -0.0042374f, +0.0489319f, +0.0827520f,
  -0.1586612f, -0.3065616f, -0.0823447f, +0.0910687f, -0.0897499f, +0.2670541f, -0.1344277f, +0.1832820f,
  -0.0348609f, +0.0727436f, -0.1020077f, +0.2418623f, -0.0167086f, +0.1628943f, -0.3931628f, -0.0539721f,
  +0.0006963f, -0.2447967f, +0.0242824f, +0.1589378f, -0.1088950f, +0.0360676f, +0.3897216f, -0.0207241f,
  +0.0691344f, -0.2734457f, +0.0871321f, +0.0283019f, +0.0372544f, -0.0529491f, +0.1645445f, -0.0132307f,
  +0.1958330f, -0.0742648f, +0.0544875f, +0.0065061f, -0.2033247f, +0.2344021f, +0.4090793f, +0.0595078f,
  +0.0408807f, -0.1659693f, +0.1478108f, +0.0680945f, +0.0136583f, -0.1041005f, +0.2588521f, -0.2394435f,
  +0.0880854f, -0.0521048f, -0.0779668f, -0.0067143f, +0.1285741f, +0.1049505f, -0.1950848f, -0.1525142f,
  -0.1798588f, +0.0569745f, +0.0008109f, -0.0325983f, -0.0878378f, +0.1201728f, -0.1469667f, +0.2129748f,
  -0.1352834f, -0.2351939f, +0.1470440f, +0.0856570f, -0.2334779f, +0.2457171f, -0.1838228f, -0.0849753f,
  -0.0772768f, -0.2030456f, -0.1632261f, +0.2699625f, -0.2278263f, +0.3330597f, +0.1019709f, -0.0508118f,
  +0.3295007f, -0.1807877f, -0.0827481f, +0.1505466f, -0.2187530f, +0.1994090f, -0.1441952f, +0.0527860f,
  -0.0050328f, -0.0597981f, -0.3953162f, -0.1929916f, -0.1518144f, +0.4621988f, +0.3731272f, +0.2682267f,
  -0.3014160f, -0.4785733f, -0.5330824f, +0.0417571f, +0.0018150f, +0.0811742f, +0.1751299f, +0.3262048f,
  +0.0121330f, -0.1514091f, +0.2772115f, -0.0908208f, -0.1426903f, +0.0545917f, +0.0119911f, +0.1666525f,
  -0.0890088f, -0.1639529f, -0.2929814f, +0.0587603f, -0.0159703f, +0.1230484f, -0.1434619f, -0.1326981f,
  +0.0597086f, -0.1682822f, +0.0686513f, +0.1114418f, +0.0105328f, +0.0752673f, -0.1023871f, +0.3334747f,
  +0.3214129f, +0.0215497f, +0.0470624f, -0.3581562f, -0.2247272f, +0.1850314f, +0.1950243f, -0.1355620f,
  -0.0342741f, -0.0757526f, -0.1627076f, -0.1584265f, -0.0190249f, -0.0881342f, +0.0996076f, -0.0418515f,
  -0.2763155f, +0.2246757f, +0.2050183f, +0.0052820f, +0.0591157f, -0.0805698f, -0.0610291f, +0.3029761f,
  +0.0589042f, +0.1644709f, -0.0112371f, +0.3099294f, +0.2595576f, +0.2618400f, +0.1364345f, +0.0608856f,
  +0.1608228f, +0.0862224f, -0.2327014f, +0.0414085f, +0.1895310f, -0.0154261f, +0.1364948f, -0.1802829f,
  +0.0604429f, +0.4768543f, +0.1389939f, +0.2444903f, -0.1228505f, +0.0256163f, -0.0378660f, +0.0249061f,
  +0.0448564f, +0.2391088f, -0.0230803f, +0.0413928f, +0.1217486f, +0.1467511f, -0.2347535f, +0.0246558f,
  +0.2242913f, -0.0452191f, -0.0554658f, +0.0027097f, +0.1038107f, +0.1725467f, -0.2584113f, -0.0047411f,
  -0.0489341f, -0.0112762f, +0.2549365f, +0.1330443f, +0.4944162f, +0.0485547f, -0.0036183f, +0.1052932f,
  -0.0703330f, +0.1861553f, +0.0700178f, +0.3558711f, -0.1478568f, +0.1450308f, -0.0999745f, -0.0594087f,
  -0.1040974f, -0.0760629f, +0.2619916f, -0.1132742f, -0.2592461f, -0.2787166f, +0.2870817f, +0.1782633f,
  -0.1045070f, -0.1369531f, +0.1865529f, -0.0354839f, +0.0649313f, +0.0223230f, +0.0542515f, +0.4617874f,
  +0.2589104f, +0.0113539f, +0.0659885f, +0.1922557f, -0.0079762f, +0.1491062f, +0.0597349f, +0.1692269f,
  +0.1108632f, +0.0720010f, +0.7451405f, +0.0003243f, +0.0050273f, +0.0746040f, +0.0402639f, +0.1097284f,
  +0.1823130f, -0.3633916f, -0.2275428f, +0.2065862f, -0.0745119f, -0.1951597f, +0.0309795f, +0.2027205f,
  +0.4370154f, -0.0066943f, +0.1014225f, -0.0071151f, -0.2048100f, +0.0113723f, -0.2053952f, -0.1735312f,
  -0.1247890f, +0.0521222f, +0.1210863f, +0.1591688f, -0.2670277f, -0.1378426f, -0.1232338f, +0.0525260f,
  -0.1839149f, +0.0287191f, +0.0846668f, +0.0787162f, +0.1699873f, +0.0965682f, -0.2208421f, +0.1459185f,
  -0.2256065f, -0.1939440f, +0.0395798f, -0.2962344f, -0.1780586f, +0.0348882f, -0.1413237f, +0.1195616f
);

const float biases[4] = float[4](
  -0.0267161f, -0.0392737f, -0.0118592f, -0.0042435f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer14 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1380986f, -0.1484129f, -0.0594730f, -0.0684702f, +0.0069726f, -0.4891083f, +0.0283519f, +0.1137121f,
  +0.0089058f, -0.0586946f, +0.2904016f, +0.1452471f, +0.2953603f, -0.2804922f, +0.2367247f, +0.1459092f,
  +0.0203045f, -0.0597329f, +0.1115681f, +0.0022340f, +0.1702095f, -0.2385886f, -0.0401278f, +0.1078535f,
  -0.0424423f, -0.3057429f, -0.4597158f, +0.0564249f, -0.2349467f, -0.4150900f, +0.0252362f, -0.0658585f,
  -0.0132369f, -0.6186624f, -0.3737493f, +0.1818008f, -0.0385488f, -0.1573472f, -0.0521210f, +0.0234485f,
  +0.0354041f, -0.3988820f, +0.0895328f, +0.0762963f, +0.0109990f, -0.0747644f, +0.1283472f, +0.0263518f,
  +0.0171852f, -0.0728450f, -0.3486271f, -0.0835677f, +0.3097972f, -0.0417449f, +0.1790174f, +0.1962149f,
  +0.1228881f, -0.3978017f, -0.0630418f, -0.0288722f, -0.4559133f, +0.2304088f, -0.2678030f, -0.0353475f,
  +0.1601574f, +0.0357687f, -0.0337073f, +0.1221497f, -0.0397357f, -0.1024272f, +0.1961866f, +0.0005971f,
  +0.0712101f, +0.0865755f, +0.1563443f, +0.0029630f, +0.1245468f, -0.0030453f, -0.0011576f, -0.2406606f,
  -0.0032392f, +0.2593771f, -0.3287876f, -0.0024098f, +0.2297946f, +0.2166887f, +0.2039134f, -0.3007427f,
  +0.1106064f, +0.0875150f, +0.0079152f, +0.0456371f, -0.2282633f, -0.0007857f, -0.1654617f, -0.2134672f,
  -0.3742710f, +0.0846200f, -0.0517978f, +0.2301225f, -0.2592190f, -0.0394602f, +0.1771721f, -0.4333649f,
  +0.3867492f, +0.7410303f, -0.2206502f, -0.1914811f, +0.0051681f, +0.3243615f, -0.3196811f, +0.0864568f,
  -0.5404443f, +0.0686955f, +0.0708576f, -0.2846107f, -0.4584157f, +0.0328981f, +0.0789768f, +0.2548507f,
  +0.1137828f, -0.1621310f, -0.1817898f, -0.0681430f, -0.1112681f, +0.2615057f, +0.2862451f, -0.0944828f,
  +0.1858936f, +0.1502705f, -0.4194508f, -0.0997822f, +0.1771389f, -0.1678400f, +0.3001103f, -0.1930434f,
  -0.3053750f, -0.0685738f, -0.0642560f, -0.5312485f, -0.2840782f, +0.0282610f, +0.3888608f, +0.1007182f,
  -0.0915719f, +0.3142955f, -0.3197091f, -0.0413066f, -0.0387803f, -0.1005896f, +0.0328800f, +0.0127808f,
  +0.0481980f, +0.2135318f, +0.2841215f, -0.0630389f, -0.0102409f, -0.2334906f, +0.1256688f, -0.1887591f,
  +0.0436364f, +0.1996275f, -0.0527103f, -0.0798060f, +0.2208735f, -0.0331461f, +0.2685218f, -0.0475605f,
  +0.0914639f, +0.4339658f, -0.3971926f, +0.0969955f, +0.2173460f, +0.3006424f, -0.0716136f, -0.0231607f,
  +0.2274891f, +0.1891514f, -0.2484400f, -0.3638149f, -0.1223032f, +0.1797900f, +0.2288972f, +0.1999204f,
  -0.1436990f, +0.3159928f, +0.0131223f, +0.0681340f, +0.1822969f, -0.0790003f, -0.2420263f, +0.1174630f,
  -0.2374764f, +0.2517984f, -0.1183611f, +0.0204452f, -0.2072222f, +0.0604922f, -0.1146761f, -0.0619941f,
  -0.0211148f, +0.3890348f, -0.0918357f, -0.4128232f, -0.1443985f, -0.0040241f, +0.2891495f, -0.1529108f,
  +0.0302574f, +0.2525280f, -0.0207463f, +0.0348499f, -0.1131510f, -0.0069012f, -0.2101942f, +0.0947229f,
  +0.0457540f, -0.1703834f, +0.2436070f, +0.0549537f, +0.3067274f, +0.1574192f, +0.1449434f, +0.1089924f,
  +0.0381646f, +0.0106337f, +0.1135969f, -0.0738811f, -0.0034391f, +0.0087329f, +0.1012098f, -0.0411619f,
  +0.0029424f, +0.0561426f, +0.1389960f, -0.1124068f, +0.0462878f, -0.2432350f, +0.0737770f, -0.1632054f,
  +0.4865444f, -0.1895417f, +0.0814009f, -0.1974991f, +0.3680611f, -0.1474452f, -0.1236000f, +0.1267561f,
  +0.2666695f, -0.0819565f, +0.0891539f, +0.1975535f, -0.1136902f, -0.0642866f, -0.0736784f, +0.0462358f,
  +0.2549236f, -0.0397373f, -0.1344955f, -0.1383370f, +0.2256800f, -0.0510556f, +0.0732821f, -0.3340676f,
  +0.0547806f, +0.1234917f, +0.1888774f, +0.0627785f, -0.1536497f, -0.3624961f, -0.0436808f, +0.1127325f,
  -0.0131445f, -0.1284370f, -0.0008657f, -0.3203435f, +0.3263254f, -0.2124429f, +0.0485756f, -0.1652668f,
  -0.1515722f, -0.1630102f, +0.0129908f, +0.0058926f, +0.1133617f, -0.3320974f, -0.0511482f, -0.2036667f
);

const float biases[4] = float[4](
  -0.0138062f, -0.0405983f, +0.0094708f, +0.0127402f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer15 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1162144f, +0.3984348f, +0.1879744f, +0.2220638f, -0.2327559f, -0.1847395f, -0.0263340f, -0.2953617f,
  +0.1453098f, -0.0291755f, -0.1481585f, +0.1008641f, -0.1771193f, +0.3761620f, +0.1758471f, -0.1853548f,
  +0.1351960f, -0.0724615f, -0.1571571f, -0.0331079f, +0.0616947f, +0.1348128f, +0.3450303f, +0.0302160f,
  -0.2864781f, +0.0149727f, +0.1623113f, -0.0965962f, +0.1468235f, +0.0826963f, -0.0387218f, -0.1310205f,
  +0.0092069f, -0.1448489f, -0.1144640f, +0.0017615f, +0.2234939f, +0.0454808f, +0.3152526f, -0.0843910f,
  +0.0578118f, +0.0921678f, +0.1225013f, +0.0255204f, +0.2229341f, +0.2293276f, +0.0489939f, -0.1038250f,
  +0.1650089f, +0.1112976f, -0.1403035f, -0.0911569f, +0.0511032f, -0.1787188f, -0.1046922f, +0.1810965f,
  +0.1543957f, +0.2749548f, +0.2352082f, +0.2301232f, -0.0152019f, +0.2574369f, -0.3500479f, -0.0413233f,
  -0.0924437f, -0.1402236f, +0.0934885f, +0.1482372f, +0.0238626f, -0.1044741f, +0.1332957f, -0.3526745f,
  -0.1368388f, -0.1698270f, -0.2175077f, +0.2303218f, -0.0491622f, -0.2997944f, +0.1217420f, +0.4125005f,
  -0.1505006f, +0.1153109f, -0.0552593f, +0.1582909f, +0.0186698f, -0.3972380f, -0.1379051f, +0.2432837f,
  +0.1960277f, -0.2877027f, +0.3152627f, +0.0983217f, -0.3461417f, +0.0467102f, +0.0767100f, +0.2451785f,
  +0.2729847f, -0.3344063f, +0.0015307f, -0.5041387f, +0.3153546f, +0.2535555f, -0.0125829f, -0.2428233f,
  +0.3282395f, +0.1228187f, -0.0908693f, -0.3328095f, +0.4969217f, +0.2879086f, -0.2495639f, -0.4529876f,
  +0.2690345f, +0.3156959f, -0.4052590f, +0.0536368f, +0.4809618f, +0.0445164f, -0.3950184f, -0.3566754f,
  -0.1077570f, -0.0530148f, -0.0097565f, -0.1160839f, +0.0913972f, +0.0858075f, +0.0314891f, -0.0216279f,
  -0.0738894f, -0.1141210f, +0.0979141f, +0.0231167f, -0.1950293f, +0.0030702f, +0.1785684f, -0.0732267f,
  -0.1788545f, -0.1214603f, -0.1612569f, -0.1277556f, +0.0656374f, -0.0011349f, +0.0079155f, +0.1265732f,
  -0.1738584f, +0.1701310f, -0.1077371f, +0.2204014f, -0.0342109f, +0.0933428f, -0.0854143f, +0.1474594f,
  -0.0612437f, +0.0075766f, -0.0390659f, +0.1861478f, +0.1349243f, +0.0129631f, +0.0981564f, +0.1561804f,
  -0.0582911f, -0.0649424f, -0.1934204f, -0.1014257f, -0.0279997f, +0.0051467f, -0.0202135f, -0.0290514f,
  -0.2510255f, -0.4633333f, -0.1194227f, -0.0418888f, +0.1863101f, +0.0028243f, +0.0150721f, -0.0729920f,
  -0.2861345f, -0.0244870f, -0.0613516f, +0.2010464f, +0.0832578f, +0.3026447f, +0.1846118f, +0.2843121f,
  +0.1862813f, +0.1526823f, -0.3928390f, -0.0568315f, -0.1690110f, +0.0050371f, -0.2240586f, +0.4330178f,
  +0.1600938f, -0.3989527f, -0.1858433f, -0.1608797f, +0.1624789f, +0.0544070f, -0.3141370f, +0.1144973f,
  +0.5640599f, +0.1488545f, -0.1265976f, -0.2861912f, +0.1175998f, -0.0625575f, -0.0422439f, +0.5008076f,
  -0.1401370f, -0.3598576f, +0.2063340f, -0.4153416f, +0.1463524f, -0.2124708f, -0.1693045f, +0.7557769f,
  -0.2006003f, -0.3257699f, +0.0718439f, -0.0786454f, +0.2011396f, -0.3405723f, -0.0221641f, +0.0059523f,
  +0.1750958f, -0.3545991f, -0.3536818f, +0.2919449f, -0.4737003f, -0.2353869f, -0.4901608f, +0.1264574f,
  +0.1578812f, -0.0660688f, -0.1465458f, +0.1773593f, -0.0675790f, +0.2614337f, +0.0411130f, -0.0119849f,
  -0.1692778f, -0.1852875f, +0.1577421f, -0.0495092f, +0.0146873f, -0.4132767f, +0.1075070f, +0.1102883f,
  +0.1689228f, -0.1293893f, -0.3714074f, -0.0535595f, -0.0742562f, -0.0128570f, -0.2826886f, +0.0053678f,
  -0.0840543f, +0.0092606f, -0.3133575f, +0.1277400f, -0.2661059f, +0.2379897f, +0.1219394f, -0.2562306f,
  +0.0665042f, -0.0144311f, +0.3062054f, -0.0342656f, +0.1435848f, +0.0784183f, +0.0484191f, +0.0873502f,
  -0.0420784f, +0.0127758f, +0.1940036f, -0.1800750f, +0.2527561f, +0.0130023f, +0.2485953f, -0.2507173f,
  +0.0452815f, +0.1123119f, -0.0740306f, +0.1022038f, +0.0936107f, +0.0435689f, -0.1494378f, -0.0635904f
);

const float biases[4] = float[4](
  +0.0502567f, -0.0473180f, +0.0174086f, +0.1308922f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer15 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0133838f, -0.3239232f, -0.1276869f, -0.4710651f, +0.0734612f, +0.1362357f, -0.1608182f, -0.2128131f,
  +0.0611172f, -0.4997552f, -0.3076854f, -0.3649276f, +0.2884512f, +0.0169358f, -0.1084678f, +0.2307672f,
  -0.0735290f, -0.1285530f, -0.0510804f, -0.1609834f, +0.3666527f, +0.2448743f, +0.0413512f, +0.0734155f,
  -0.1276903f, -0.2005143f, -0.0860585f, -0.2650109f, +0.4088300f, +0.0562330f, -0.1013541f, -0.0851092f,
  +0.0048662f, -0.7999986f, +0.4086117f, -0.3742546f, -0.0483024f, -0.3783282f, -0.3581538f, +0.0339694f,
  -0.0641344f, -0.0439323f, +0.2398388f, +0.2350922f, +0.1285652f, +0.0774626f, +0.0361049f, -0.0403478f,
  +0.2811103f, +0.0590384f, -0.0032409f, +0.0211352f, -0.1448326f, -0.0529907f, +0.1111151f, -0.1499242f,
  +0.0505133f, +0.0285641f, +0.2397599f, -0.0856859f, +0.1942960f, -0.0643297f, -0.2471962f, +0.1913060f,
  -0.0788889f, +0.0262186f, +0.3620476f, +0.4583531f, -0.1037697f, -0.3212877f, +0.1354047f, -0.1266309f,
  +0.2594085f, -0.1387539f, -0.0303849f, +0.2493492f, -0.0543256f, -0.1578054f, -0.0389183f, -0.0192295f,
  -0.1151324f, -0.1561985f, -0.0049044f, +0.0335498f, -0.0295967f, -0.4692236f, +0.2612986f, +0.0766282f,
  -0.0817435f, -0.1112863f, -0.1259874f, +0.1729512f, -0.1489597f, -0.0867388f, +0.0366487f, +0.1529313f,
  -0.2533628f, +0.0334418f, +0.0180391f, -0.1498664f, -0.1350640f, +0.1493129f, -0.0942218f, -0.1460293f,
  -0.2533981f, -0.1310970f, +0.1324394f, -0.2103515f, -0.0506793f, +0.1455236f, +0.5202985f, -0.1378773f,
  -0.1029174f, +0.0623642f, -0.2946910f, +0.0456968f, +0.1894088f, +0.0070269f, -0.1861550f, -0.2801876f,
  +0.1121411f, +0.1751293f, -0.0540490f, -0.0446600f, +0.2308848f, -0.1117853f, +0.1407826f, +0.0017417f,
  -0.0808512f, -0.0469010f, -0.0458058f, -0.0214376f, +0.1166885f, -0.3785447f, +0.3933403f, +0.1545533f,
  -0.0167756f, +0.0545256f, -0.0348498f, +0.2470866f, +0.0644664f, -0.0135787f, -0.1070445f, +0.0401392f,
  -0.0585683f, -0.0650203f, -0.3178636f, +0.4538917f, +0.2228954f, +0.2437873f, +0.0992941f, +0.1681467f,
  -0.1841630f, -0.0449786f, -0.1892472f, -0.1884153f, -0.1278670f, -0.1193261f, -0.2246832f, +0.1054644f,
  -0.0685992f, -0.1803003f, -0.1600412f, -0.0450682f, +0.0134698f, -0.0154190f, -0.0951546f, +0.1011025f,
  -0.0833608f, +0.3885359f, +0.2218218f, -0.3056230f, -0.4336468f, -0.3693077f, +0.2855569f, +0.5248986f,
  +0.1078140f, -0.1197763f, -0.4319883f, -0.4741300f, -0.2507395f, -0.0591325f, -0.1361160f, +0.1814093f,
  -0.3178995f, -0.1296119f, -0.0432152f, +0.1113791f, +0.1903593f, +0.0489134f, -0.2310979f, +0.0458680f,
  -0.1029435f, +0.3445904f, -0.1474306f, +0.2126832f, +0.3018785f, -0.1621795f, -0.1831329f, +0.5013753f,
  +0.1700534f, -0.0214341f, -0.1356341f, -0.1772675f, -0.2262536f, -0.1238794f, +0.0689939f, +0.5028880f,
  -0.1144022f, -0.2456025f, -0.1009606f, -0.3348739f, -0.0667658f, +0.0576288f, -0.0811794f, +0.3921880f,
  +0.1429563f, -0.0892005f, -0.0258606f, -0.0230748f, -0.1413674f, -0.3334495f, +0.0353741f, -0.0036000f,
  +0.4211091f, -0.0711978f, +0.1614550f, -0.0446753f, -0.0993397f, -0.3802307f, +0.1433583f, -0.1392276f,
  +0.1552847f, -0.1381343f, +0.1500855f, +0.0435303f, +0.0134664f, +0.0320539f, +0.0163995f, -0.0136941f,
  +0.0511230f, -0.0853036f, -0.1809985f, -0.0350516f, +0.2922068f, +0.6904787f, +0.1315165f, +0.2613181f,
  -0.5058234f, -0.0771603f, -0.3409675f, -0.0687877f, -0.1542859f, +0.9702867f, -0.1963139f, -0.2167973f,
  -0.1441383f, +0.3884310f, -0.0234604f, +0.0721139f, -0.5509880f, +0.0926037f, -0.0590806f, -0.0550186f,
  -0.0190497f, +0.4331511f, +0.2885736f, -0.2297810f, -0.3564667f, +0.3740069f, -0.3194252f, -0.2802939f,
  +0.2542969f, +0.6924205f, -0.1004819f, -0.0461730f, +0.2090216f, -0.0554977f, -0.2556601f, -0.0766784f,
  +0.4125137f, +0.0314015f, +0.0781886f, +0.1079607f, +0.1369461f, -0.2323947f, +0.0438461f, +0.1111333f
);

const float biases[4] = float[4](
  -0.0024748f, -0.0234446f, -0.0453821f, -0.0740102f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer16 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0057911f, -0.1887849f, +0.0458572f, -0.3737352f, +0.0999465f, -0.2383444f, -0.0391227f, +0.0426706f,
  -0.0538575f, -0.1969469f, -0.1558217f, +0.2555837f, -0.1960993f, +0.1616594f, -0.1584462f, +0.0537819f,
  -0.0172260f, +0.0875651f, +0.0890222f, -0.0420419f, -0.0404412f, +0.0650078f, -0.3751287f, -0.1661323f,
  +0.1495623f, +0.0073890f, -0.1809030f, +0.1570849f, -0.0003563f, +0.0600454f, +0.0867085f, -0.3558065f,
  +0.0695808f, -0.0716630f, -0.1313504f, +0.1451583f, +0.0396173f, +0.1372322f, -0.5048876f, +0.2274507f,
  -0.0317578f, -0.0111215f, +0.1145075f, -0.2219667f, -0.1958879f, -0.0127924f, +0.2580357f, +0.0150066f,
  -0.2174184f, -0.0241310f, +0.1019445f, -0.0450320f, +0.0201709f, +0.1592563f, +0.0739433f, -0.1183146f,
  -0.2660834f, -0.2461917f, +0.0978417f, +0.1242788f, +0.1235635f, +0.0338675f, +0.0702280f, -0.1543732f,
  -0.0238569f, +0.0948700f, +0.2597045f, +0.1480962f, +0.0212109f, +0.0958814f, +0.2376626f, -0.2905851f,
  -0.1230368f, -0.0583583f, -0.0024301f, +0.1540406f, -0.4961881f, -0.1691833f, +0.0197896f, -0.0431880f,
  +0.2030124f, -0.0200980f, -0.5734739f, +0.1575930f, +0.4409382f, +0.1565144f, -0.1351577f, +0.4252082f,
  +0.1639557f, +0.0918275f, +0.2238687f, +0.1165997f, +0.0138800f, -0.1685632f, -0.2492225f, +0.0087615f,
  -0.0946144f, +0.0341686f, +0.0487781f, -0.1827972f, -0.3799928f, +0.0347264f, +0.1903913f, +0.1714564f,
  -0.2346867f, -0.2033101f, +0.6460073f, +0.0529059f, +0.0141801f, +0.3164009f, -0.0221931f, -0.6289856f,
  +0.3819543f, -0.1273141f, +0.1336654f, +0.1394574f, +0.2972205f, +0.3990597f, -0.4684997f, -0.3775741f,
  -0.2474844f, +0.3050247f, -0.0049567f, -0.1964682f, -0.0797017f, -0.2373746f, +0.1138576f, +0.0650087f,
  -0.3294711f, +0.5131726f, -0.0902954f, -0.3327688f, +0.3157845f, +0.0242768f, -0.0171782f, +0.2699280f,
  -0.1528666f, +0.1278756f, +0.0675000f, -0.0728535f, +0.2871776f, -0.1192969f, -0.1365411f, +0.0935888f,
  +0.0202690f, -0.0668546f, -0.0804223f, +0.0506371f, -0.0614773f, +0.0538335f, -0.0765159f, +0.4245297f,
  -0.0973564f, +0.1527729f, -0.0578914f, -0.0698513f, +0.1753682f, +0.0850628f, +0.2609246f, +0.3149840f,
  -0.0852963f, +0.0727997f, -0.1583236f, -0.0635114f, -0.0808321f, +0.0878893f, +0.0554573f, +0.1243856f,
  +0.2385164f, -0.3793665f, -0.1348087f, -0.2899235f, -0.3275737f, +0.0036372f, -0.0496450f, +0.2017296f,
  +0.0661354f, +0.2097467f, +0.0299359f, +0.1113894f, +0.1840598f, +0.1596128f, +0.2239544f, +0.0422832f,
  -0.0247058f, +0.0039694f, +0.1736737f, +0.3589798f, -0.1438645f, -0.1053959f, -0.0974975f, +0.2608898f,
  +0.0637514f, +0.5430290f, +0.0173954f, -0.1694650f, +0.0690056f, -0.0103703f, +0.1280259f, +0.1321903f,
  +0.0845366f, +0.0829633f, -0.1314684f, -0.0155313f, -0.0606964f, +0.0870191f, +0.0472324f, -0.0779594f,
  -0.0694361f, +0.3656495f, +0.0255298f, -0.1047321f, +0.2041193f, -0.2516323f, -0.0123859f, -0.0026446f,
  -0.1194067f, -0.0948742f, -0.0840866f, +0.0797814f, -0.2645251f, -0.0167680f, +0.0663386f, +0.3776932f,
  +0.0043125f, +0.2298814f, -0.1217910f, -0.0548326f, +0.7089214f, +0.0937246f, +0.5417443f, +0.0613462f,
  +0.2104758f, +0.0986221f, +0.1623623f, +0.0128897f, +0.0549438f, +0.0504401f, +0.0046324f, +0.0421982f,
  +0.0570389f, -0.4456755f, -0.0181772f, +0.0284079f, -0.0116076f, +0.0194345f, +0.0444794f, +0.0510152f,
  -0.0274758f, -0.1676498f, -0.1926532f, +0.5863087f, +0.2988575f, +0.0823052f, +0.5463187f, +0.1515764f,
  +0.0685490f, +0.2015920f, +0.2306228f, +0.0668625f, +0.1488145f, +0.3116301f, -0.3494488f, -0.2338365f,
  +0.2306617f, -0.0991781f, +0.0042173f, +0.1084701f, +0.2742706f, +0.1435039f, +0.1790126f, +0.0659892f,
  +0.0655365f, -0.0855872f, +0.1599173f, +0.1414117f, +0.0113076f, +0.1908316f, +0.3390422f, -0.1631944f,
  -0.0166354f, +0.2120383f, -0.0287535f, +0.1205610f, +0.1358955f, -0.0623867f, +0.1338795f, +0.0229828f
);

const float biases[4] = float[4](
  +0.0232615f, +0.0490889f, +0.0489562f, -0.0201327f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer16 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.3486532f, -0.2860405f, -0.1749482f, -0.3813797f, +0.1447551f, +0.3192611f, -0.1937002f, -0.1452801f,
  +0.0176999f, -0.1940046f, -0.0495040f, +0.2563273f, +0.2731093f, +0.2313245f, +0.4102891f, -0.1541095f,
  +0.0131860f, -0.0897677f, -0.2682362f, -0.1443592f, +0.1112832f, +0.2121407f, +0.0884987f, +0.1119880f,
  -0.0156726f, -0.8191165f, -0.1405013f, +0.1315982f, +0.2528379f, -0.0097676f, -0.0585686f, +0.1129381f,
  -0.1136046f, -0.3658956f, -0.2346107f, +0.1109918f, +0.1110487f, +0.0966919f, +0.0695510f, +0.1144179f,
  +0.2469470f, -0.2116661f, -0.0033444f, -0.1317051f, -0.1618122f, +0.1009972f, +0.5231780f, -0.1294842f,
  -0.0989937f, -0.7632524f, +0.0154357f, -0.0398255f, -0.1616946f, +0.0625951f, +0.2507896f, +0.1116164f,
  +0.0019429f, -0.5498391f, -0.1932203f, +0.0844878f, -0.0677577f, +0.0305448f, +0.0087897f, +0.2774236f,
  -0.1991524f, -0.0167915f, -0.0466447f, -0.2602889f, -0.0993347f, -0.1638423f, -0.2430825f, -0.0538645f,
  +0.0373845f, +0.0567023f, +0.1569616f, +0.1414512f, -0.2079664f, -0.4942020f, -0.0156558f, -0.0062503f,
  +0.0001892f, -0.3491928f, -0.4343924f, +0.1753234f, -0.2359499f, -0.0158217f, -0.2066794f, -0.4513613f,
  -0.2056367f, +0.1154146f, +0.0613630f, -0.0281931f, +0.0447880f, +0.0062267f, -0.5226494f, -0.5760385f,
  +0.0461581f, +0.4049158f, +0.2024195f, -0.1306511f, -0.3120603f, -0.1753504f, +0.1110627f, -0.3889618f,
  -0.0550444f, +0.2411977f, -0.1581275f, -0.2577952f, +0.2769781f, -0.3335402f, -0.2000464f, -0.6453124f,
  -0.0409615f, +0.0533869f, -0.0530572f, +0.1361897f, -0.3051701f, -0.0096060f, +0.2617790f, -0.3489737f,
  -0.2807152f, +0.0613068f, -0.0602914f, -0.1007987f, -0.4605862f, -0.1444926f, +0.0279848f, -0.1914019f,
  +0.2530964f, +0.3551433f, -0.1420559f, +0.0477409f, -0.2434977f, -0.0670868f, +0.2408978f, -0.1110459f,
  +0.1181554f, -0.0738046f, -0.1094046f, +0.1053541f, -0.4997507f, +0.1954957f, -0.3676344f, -0.2211458f,
  +0.1941559f, +0.1564775f, -0.1718466f, -0.1936272f, +0.1183817f, -0.0457556f, -0.0545043f, +0.2798615f,
  +0.0908010f, +0.3606201f, +0.3237166f, -0.4243459f, +0.0675468f, -0.0372790f, -0.0290766f, +0.2090358f,
  +0.2881207f, +0.0366675f, +0.2006659f, -0.0352888f, +0.1987695f, -0.1521646f, +0.4063340f, +0.1650080f,
  +0.0785131f, -0.1543149f, +0.0088838f, +0.1096174f, +0.2545505f, -0.2167261f, -0.0439296f, -0.1996298f,
  -0.0852127f, -0.0934751f, +0.4918030f, -0.2946147f, +0.3626024f, -0.2950983f, -0.2070998f, -0.8673790f,
  +0.0759078f, -0.0103212f, -0.1298713f, +0.1124685f, +0.4826979f, +0.1998399f, +0.0997812f, -0.2288161f,
  +0.0585401f, +0.0476555f, -0.0603032f, +0.0587199f, +0.0245817f, -0.1506775f, +0.0775694f, +0.1166523f,
  -0.0847344f, +0.1930630f, -0.4483123f, +0.1735749f, +0.1762958f, -0.2421807f, +0.0476560f, +0.3539738f,
  -0.2372548f, +0.0047607f, -0.2184016f, -0.0856265f, -0.0895639f, -0.0995527f, +0.0416151f, +0.3310681f,
  +0.0551909f, +0.0327758f, -0.1269214f, +0.1095385f, +0.1613858f, +0.1819478f, +0.1763448f, -0.0809479f,
  +0.3483503f, +0.1130898f, -0.4061940f, +0.1396054f, +0.2356815f, +0.0593472f, +0.1606416f, +0.0675357f,
  -0.3745460f, -0.0141906f, +0.0002760f, +0.0588588f, -0.1188036f, +0.0406481f, -0.3678482f, +0.0005950f,
  -0.2195599f, +0.4968202f, -0.0683853f, -0.0478257f, +0.1672346f, -0.0386643f, +0.0665972f, -0.3406817f,
  -0.0181192f, +0.0432630f, +0.2200179f, +0.4297719f, -0.1518371f, +0.1949442f, -0.0483963f, -0.2608030f,
  -0.0236139f, +0.1283893f, -0.0624865f, +0.0061800f, +0.0310142f, +0.1123201f, +0.0277867f, +0.0097115f,
  +0.2460724f, +0.1362269f, -0.0659114f, +0.1636059f, +0.2862688f, +0.1962194f, -0.1656803f, +0.0874574f,
  +0.0975364f, +0.3467896f, +0.0643572f, -0.0975111f, -0.1230441f, -0.0399475f, +0.0650039f, +0.1018029f,
  +0.0241793f, +0.0853005f, -0.0415919f, -0.1165076f, -0.0547929f, -0.0234303f, -0.1573097f, -0.0086727f
);

const float biases[4] = float[4](
  +0.0100872f, -0.0156721f, +0.0098726f, +0.0208338f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer17 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0695294f, -0.1537060f, +0.0768015f, -0.2151304f, -0.0544146f, -0.1870336f, -0.2224208f, -0.1487433f,
  +0.1232066f, -0.4926211f, -0.7603597f, -0.1122638f, -0.0825709f, +0.0281494f, +0.1820523f, +0.3930213f,
  -0.3053312f, -0.0572030f, -0.2611710f, -0.2161495f, +0.0425529f, +0.0205440f, -0.2382646f, +0.1126558f,
  +0.0239484f, -0.1784566f, -0.0852976f, +0.0217137f, -0.1210486f, -0.1829435f, -0.4629796f, +0.2388052f,
  -0.0429661f, -0.0907234f, +0.2445216f, -0.1346019f, -0.2180050f, -0.1226908f, +0.3180348f, +0.0888895f,
  -0.2589174f, +0.1437621f, +0.0500098f, -0.0446617f, +0.0753773f, +0.0132015f, -0.1910361f, +0.3129321f,
  +0.1848887f, +0.0596658f, +0.0805060f, +0.3324102f, +0.0712243f, -0.2340844f, +0.0195207f, +0.0843867f,
  +0.1518030f, +0.4952705f, -0.2205646f, +0.0653034f, -0.1937794f, -0.1127728f, -0.2869951f, +0.1907090f,
  +0.0611601f, -0.0965363f, -0.0417714f, -0.3124606f, +0.0878171f, +0.1244454f, -0.1438010f, +0.4784808f,
  +0.0532428f, -0.2345024f, +0.1070611f, -0.0562283f, +0.1029190f, -0.3108797f, -0.2817133f, +0.0611646f,
  -0.2232766f, -0.2422757f, -0.2029835f, +0.0743203f, -0.1544434f, -0.2619129f, -0.0849257f, -0.1289803f,
  -0.0765374f, -0.0849921f, +0.2288968f, -0.1863917f, +0.1760635f, -0.0881765f, +0.0362870f, +0.0539731f,
  -0.2275026f, +0.0463876f, +0.2967441f, -0.5085430f, -0.1778258f, -0.1376528f, +0.0205094f, +0.5207894f,
  -0.0356627f, -0.4446452f, -0.5097160f, +0.0632093f, -0.0359078f, +0.4778749f, -0.6167727f, +0.3110473f,
  -0.1521355f, -0.1717376f, -0.1270520f, -0.3553256f, +0.0319295f, -0.3531814f, +0.1826591f, +0.1259279f,
  -0.1433764f, -0.0991037f, -0.2059720f, -0.2737164f, -0.0513395f, -0.0844912f, -0.1021870f, +0.1756912f,
  +0.2744084f, +0.1492221f, +0.2475008f, -0.3697526f, +0.1296133f, +0.4969505f, -0.0255082f, -0.0338579f,
  +0.2391858f, +0.0330972f, -0.1915683f, -0.0746189f, +0.0054938f, -0.0018253f, -0.2918688f, +0.1233971f,
  +0.2625558f, -0.0881458f, -0.4748783f, -0.4827616f, +0.2050785f, -0.2734517f, +0.3973291f, +0.0903635f,
  -0.3297920f, +0.1214232f, +0.1643244f, -0.0406832f, -0.2128195f, -0.0711294f, -0.1950090f, +0.0266064f,
  +0.2825132f, -0.2562457f, -0.1811482f, +0.1825225f, +0.1779512f, -0.0090853f, +0.0784184f, +0.0702550f,
  +0.1919395f, -0.5000008f, -0.4047142f, -0.2248076f, +0.1429143f, +0.0311083f, +0.0424513f, +0.1981074f,
  +0.1914043f, +0.4399146f, -0.0362459f, -0.4271579f, -0.2113564f, -0.4041838f, -0.1937009f, +0.0137649f,
  -0.2420768f, -0.1450097f, +0.0153175f, +0.1905357f, -0.2489984f, -0.0227070f, +0.2725233f, +0.0251887f,
  +0.4344443f, +0.0028378f, -0.2665574f, -0.1737273f, +0.3868206f, -0.1007567f, +0.0283210f, +0.0222947f,
  -0.4129641f, -0.2724751f, -0.2487041f, -0.3059611f, -0.3926276f, -0.0748995f, +0.1383323f, +0.1376671f,
  -0.1204903f, +0.1059254f, -0.0398213f, +0.3015220f, +0.2043389f, +0.0402227f, -0.0801754f, -0.0813203f,
  -0.1794051f, +0.0780814f, +0.1471936f, +0.2414132f, +0.2482324f, +0.5517635f, -0.2894639f, +0.3302131f,
  +0.2157331f, -0.1265474f, -0.0590166f, +0.1672073f, -0.0099230f, +0.1497187f, -0.1123397f, +0.0846907f,
  -0.0406899f, +0.0576085f, +0.0188413f, +0.0217715f, +0.1923567f, +0.0720884f, -0.1877695f, -0.0266563f,
  +0.0683537f, -0.7177721f, -0.0550393f, +0.0100200f, -0.1459514f, +0.0429131f, -0.3055449f, -0.0312828f,
  +0.2477853f, -0.2697962f, +0.0437676f, -0.0508023f, -0.2019603f, -0.0926909f, -0.5163932f, -0.2719726f,
  +0.0049986f, -0.1192231f, +0.2166599f, -0.1506525f, -0.0083753f, +0.2981800f, -0.3274213f, +0.1223414f,
  +0.1451978f, -0.0954275f, +0.0782864f, -0.0676531f, -0.7402743f, +0.0916463f, -0.1036813f, +0.0001837f,
  +0.2852436f, +0.1023773f, +0.1646833f, -0.0176036f, -0.0737493f, +0.0885241f, -0.0238915f, +0.3783673f,
  +0.2050552f, +0.1106221f, +0.0374217f, -0.0962588f, -0.0459006f, -0.1208130f, +0.0079754f, +0.1182124f
);

const float biases[4] = float[4](
  -0.0633875f, -0.0060144f, -0.0935955f, -0.0584951f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer17 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1149910f, -0.0665191f, +0.0359401f, +0.1512743f, +0.0851178f, -0.2080840f, -0.1865585f, +0.1092364f,
  +0.0993221f, -0.2376621f, -0.1528114f, +0.0425593f, -0.0337947f, +0.1752297f, +0.2594308f, +0.3877257f,
  +0.0578417f, -0.0375222f, -0.0365423f, -0.0673032f, +0.2652038f, +0.0920091f, +0.1348968f, +0.1061890f,
  +0.2402837f, -0.1392470f, -0.0907512f, +0.2871881f, -0.0865639f, -0.0773997f, +0.2011533f, +0.1980801f,
  -0.2828717f, +0.0041125f, -0.0016550f, +0.2231870f, -0.0618927f, -0.4102256f, +0.1493175f, +0.3382663f,
  +0.0732507f, +0.1202500f, +0.0524179f, -0.0120025f, -0.0518080f, -0.1178433f, -0.1224497f, -0.1350304f,
  -0.0249162f, -0.0777392f, +0.1565098f, +0.0920269f, +0.0861443f, +0.1174812f, +0.0344202f, -0.1275696f,
  -0.1270660f, +0.0539743f, -0.1430514f, +0.2921813f, -0.2438961f, +0.0524781f, +0.0117764f, +0.1273895f,
  -0.1069574f, +0.0554193f, -0.0648649f, +0.0336278f, -0.0800160f, +0.1740778f, +0.1277343f, -0.0706597f,
  -0.1855680f, +0.0186897f, -0.0132276f, -0.2711560f, -0.0609123f, +0.2216646f, +0.1970620f, +0.0289825f,
  -0.2069476f, -0.1598665f, -0.5479270f, +0.1865626f, +0.3446071f, -0.1801235f, +0.3050182f, +0.0049558f,
  +0.1103427f, +0.1089853f, -0.0477976f, -0.1488516f, -0.0360916f, +0.1584790f, +0.0561476f, +0.2614629f,
  -0.0189893f, -0.0159582f, -0.0811138f, -0.1130065f, +0.0254545f, +0.0700289f, +0.1562654f, +0.1907583f,
  -0.0465670f, -0.0006833f, +0.2345728f, +0.1021524f, +0.0426711f, +0.0273314f, +0.1555120f, +0.0751847f,
  -0.2381551f, -0.0041152f, +0.1296398f, +0.2137346f, -0.0143388f, -0.2619810f, +0.0580850f, -0.2955636f,
  -0.0669717f, -0.1399869f, +0.0114395f, +0.1892984f, +0.3845240f, -0.2434829f, +0.0569838f, -0.0316945f,
  +0.3570604f, -0.2483746f, -0.1883629f, +0.1417696f, +0.2199018f, -0.2684742f, -0.0697174f, -0.1015396f,
  -0.0682911f, -0.0211185f, +0.1762796f, -0.1158042f, +0.0685691f, +0.0379696f, -0.1315378f, +0.0961947f,
  -0.3230366f, -0.1072446f, -0.1163301f, -0.1825617f, +0.1116011f, +0.1033101f, -0.2840808f, -0.1113007f,
  -0.1319601f, +0.2657949f, -0.0197778f, -0.0120040f, -0.1647503f, -0.2418699f, -0.0258035f, -0.1849129f,
  -0.1003602f, -0.0958592f, +0.1803970f, +0.0510765f, -0.1419524f, -0.0540548f, -0.0744051f, +0.0054919f,
  +0.1324127f, +0.0561779f, -0.2167325f, +0.1982059f, +0.1588441f, -0.0742006f, +0.2194738f, +0.0171512f,
  +0.0457956f, +0.0172043f, +0.1975023f, -0.1181476f, -0.0004066f, -0.4722142f, +0.2944993f, -0.1795535f,
  +0.1593883f, -0.1856056f, +0.1028693f, +0.2686057f, -0.0464956f, +0.0567278f, -0.0882664f, +0.2656226f,
  +0.1185998f, +0.0778947f, -0.0050115f, -0.0071311f, +0.2213571f, +0.1831032f, -0.1347027f, +0.1061895f,
  +0.1240277f, +0.0931111f, +0.1647556f, +0.1982469f, -0.3314175f, -0.3806785f, -0.1175858f, +0.4594170f,
  -0.2480594f, +0.0336101f, +0.1898132f, -0.0089046f, -0.1754903f, -0.0460194f, -0.1909525f, +0.0858115f,
  -0.0997556f, +0.1238482f, +0.0126792f, +0.1771549f, +0.1818485f, +0.0954849f, -0.1680870f, -0.1634569f,
  -0.0996208f, +0.1471840f, +0.0869843f, +0.2153095f, +0.2118042f, -0.0257629f, -0.0960208f, -0.1355894f,
  -0.0496113f, -0.0434425f, +0.0512893f, +0.3205996f, +0.3319224f, -0.3403991f, -0.1061076f, -0.1794583f,
  -0.0692152f, -0.3099987f, +0.0891654f, -0.0242317f, -0.1409867f, -0.1814476f, -0.0884105f, -0.0381769f,
  -0.0348792f, -0.3396714f, +0.1420824f, -0.1714675f, -0.2061890f, +0.2289176f, +0.1941608f, -0.2047186f,
  -0.1260448f, +0.0445670f, +0.0650707f, -0.1999953f, +0.3767611f, -0.0447243f, -0.2748083f, +0.0276761f,
  +0.2829620f, +0.0858259f, -0.0737349f, -0.0504424f, +0.0498971f, -0.0901179f, +0.0224219f, +0.2097501f,
  +0.2946114f, -0.1048912f, +0.0156021f, -0.1849901f, -0.0449943f, -0.0865437f, -0.0281916f, +0.0155103f,
  +0.2118281f, -0.0859038f, +0.2805664f, +0.1889163f, +0.0878935f, +0.0190614f, +0.1324947f, -0.0885168f
);

const float biases[4] = float[4](
  -0.0009427f, +0.0701244f, +0.0270577f, +0.0338081f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer18 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1606124f, +0.2143848f, +0.2371857f, -0.0502363f, +0.1622776f, +0.1961030f, +0.0349645f, +0.0175835f,
  -0.2746201f, +0.0257974f, +0.2875446f, -0.3394968f, +0.0396563f, +0.0542191f, -0.0565936f, -0.1559970f,
  +0.0733268f, +0.1026651f, +0.1549081f, +0.0312987f, +0.0388594f, +0.2206706f, +0.0407730f, +0.0188662f,
  +0.0119630f, +0.2919007f, +0.0766613f, -0.0806188f, -0.1543431f, -0.0668340f, +0.0279075f, +0.1409899f,
  +0.0383274f, +0.1485953f, +0.2935597f, +0.1406005f, -0.0210062f, -0.0095117f, +0.1896046f, -0.1474426f,
  -0.0181518f, +0.5842953f, +0.1817759f, +0.1379175f, +0.2553432f, -0.1275796f, +0.0389037f, -0.1740412f,
  -0.0881381f, +0.1019826f, +0.1660900f, +0.0405320f, -0.0172618f, +0.0975117f, -0.0768773f, +0.2553574f,
  -0.0080491f, -0.0316521f, +0.3006546f, +0.0226870f, -0.2143921f, +0.0045268f, +0.0886374f, +0.0599157f,
  +0.1113474f, +0.0242298f, -0.1494874f, -0.0965733f, +0.1393040f, -0.0337521f, -0.0021617f, +0.1738237f,
  +0.0803160f, -0.3594386f, +0.1831559f, -0.2945541f, -0.1519069f, -0.0275022f, -0.3460911f, +0.0531261f,
  -0.1618282f, +0.0673631f, -0.3315504f, -0.3660994f, -0.2379747f, +0.2377176f, -0.0052623f, -0.0021208f,
  -0.0489812f, +0.1152603f, +0.2502771f, +0.0529623f, -0.0948033f, +0.1933297f, +0.1152345f, -0.0527016f,
  -0.1083359f, +0.0599423f, +0.0339075f, -0.3214452f, -0.0911355f, +0.0170975f, -0.2144111f, +0.0435382f,
  +0.0352714f, +0.1862526f, -0.1803564f, +0.1438251f, -0.0386631f, -0.0319057f, +0.0072734f, -0.2204221f,
  +0.3482349f, -0.1161868f, +0.0277214f, +0.3731272f, -0.1212101f, +0.0672763f, -0.1488750f, -0.2802429f,
  -0.0511174f, +0.1600602f, +0.1411775f, +0.0135338f, +0.1512000f, -0.0133761f, +0.0472572f, +0.0941513f,
  +0.2394537f, +0.1435532f, +0.1022910f, -0.0858238f, +0.2908566f, +0.2460249f, -0.0825765f, -0.0504874f,
  -0.1564100f, -0.1155150f, +0.2140755f, +0.3243980f, +0.1110512f, -0.0396047f, -0.0915115f, +0.0783255f,
  -0.1478057f, +0.2264120f, -0.0653631f, +0.0401402f, +0.0832867f, +0.0828966f, +0.1584725f, -0.0960415f,
  +0.1940523f, -0.1242851f, +0.4501792f, +0.1715317f, +0.3517860f, -0.4370011f, +0.0731410f, -0.2052973f,
  -0.0312130f, -0.0531928f, +0.2635061f, -0.0978048f, +0.1200755f, -0.1753663f, -0.1850644f, +0.2307186f,
  -0.2811219f, +0.5031149f, -0.0447306f, -0.2157724f, -0.1466395f, +0.0951154f, -0.2462295f, +0.0970916f,
  +0.3369168f, -0.0026531f, +0.3727163f, -0.1993928f, -0.0318066f, -0.1313519f, -0.1577049f, -0.0641681f,
  +0.1820269f, +0.2801791f, -0.0362210f, +0.1201868f, +0.0201510f, +0.1723822f, -0.0009390f, +0.0320733f,
  +0.1422568f, +0.1409248f, -0.1081051f, +0.2151663f, -0.1639697f, -0.3773100f, +0.1336568f, +0.0708591f,
  +0.1467245f, +0.3569342f, +0.0143042f, +0.0165557f, +0.1872051f, +0.1805989f, +0.0234697f, -0.1586674f,
  -0.0353447f, +0.0757161f, +0.2363295f, +0.1949661f, +0.0350776f, +0.2773507f, -0.0023229f, -0.0810158f,
  -0.1681152f, -0.4223632f, -0.0763116f, +0.2987531f, +0.0839008f, -0.1611169f, +0.3135669f, -0.1003477f,
  +0.2630009f, -0.1924602f, +0.6440095f, +0.1506521f, -0.0323158f, -0.0711253f, -0.0022346f, -0.0774622f,
  -0.2800484f, -0.0876597f, +0.3213823f, -0.3013932f, +0.1860322f, -0.0372496f, -0.2791793f, +0.1368473f,
  +0.1094983f, +0.0017646f, +0.2138098f, +0.1127123f, +0.0131518f, +0.0503176f, -0.2091934f, +0.0707184f,
  -0.2553465f, -0.2024883f, +0.5939199f, -0.0894454f, +0.0489697f, +0.0511047f, -0.1840637f, -0.2855076f,
  +0.1596876f, +0.0891900f, +0.0460196f, -0.3646594f, -0.0722951f, -0.1114075f, -0.0132547f, -0.1364783f,
  +0.1749414f, -0.4841614f, -0.2191686f, +0.0562767f, -0.0385951f, -0.1013529f, +0.0469408f, -0.0720451f,
  +0.3593369f, -0.4121959f, +0.5075172f, -0.0904557f, -0.1919042f, +0.0471678f, -0.1316155f, +0.0185901f,
  +0.0921081f, -0.1979904f, -0.0877471f, -0.1141356f, +0.1432868f, -0.3358390f, +0.0480119f, -0.1179246f
);

const float biases[4] = float[4](
  +0.0625376f, -0.0287635f, -0.0266309f, -0.0015592f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer18 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0446563f, +0.0239932f, +0.2225195f, +0.3322599f, +0.2926922f, +0.0779225f, -0.0963146f, -0.0911707f,
  -0.3048111f, -0.0525522f, +0.2151735f, +0.4831151f, -0.0156900f, +0.1393638f, +0.1800558f, -0.2116576f,
  -0.0868692f, +0.1664413f, -0.2297777f, +0.2641093f, -0.4177292f, +0.0506591f, -0.1396575f, +0.1797198f,
  -0.1157449f, -0.1605873f, +0.3124355f, +0.0944715f, -0.0510700f, -0.1422698f, +0.0545539f, -0.1672029f,
  +0.1841462f, +0.2691770f, +0.3445079f, +0.3873057f, -0.3796684f, +0.2506846f, +0.2754126f, -0.1141670f,
  +0.1198228f, +0.1867371f, -0.1153567f, +0.4249359f, -0.0770036f, +0.1279047f, -0.0602813f, -0.2556819f,
  -0.2560770f, -0.1816319f, -0.0346085f, -0.0158715f, +0.0810882f, +0.4094445f, -0.3334211f, +0.2822737f,
  -0.0476189f, +0.1916200f, -0.0950404f, +0.2533142f, -0.2892364f, -0.1223814f, +0.1337562f, -0.1914275f,
  -0.3188230f, +0.2638662f, -0.3089764f, -0.1955632f, -0.0144454f, -0.4273989f, +0.0611642f, -0.0137413f,
  -0.0407956f, +0.3206919f, +0.0465074f, -0.0290801f, +0.1817508f, +0.0662252f, +0.1020271f, +0.0989745f,
  -0.3510652f, -0.0975664f, +0.0994874f, -0.0466595f, +0.0272828f, -0.0391270f, +0.2488779f, +0.0184853f,
  +0.5080467f, +0.2002162f, -0.1165693f, -0.0753125f, +0.1312071f, -0.0732764f, -0.1087527f, -0.1297009f,
  +0.0741288f, -0.2615303f, +0.1140262f, -0.0820522f, +0.0891820f, +0.0176540f, +0.1632691f, +0.0451759f,
  -0.3688160f, +0.1666753f, -0.2285813f, -0.2573862f, +0.0673872f, -0.1184811f, +0.3852716f, +0.1446716f,
  +0.1051253f, +0.1879572f, -0.1184090f, -0.4248783f, +0.1216879f, -0.0382033f, -0.0087234f, +0.4106961f,
  +0.0281361f, -0.0125051f, -0.0824873f, +0.1120183f, -0.1510245f, +0.1685286f, +0.1766913f, +0.1311524f,
  -0.4174289f, +0.2754279f, -0.1604973f, -0.1627098f, +0.0701625f, +0.4300302f, +0.1387471f, -0.2048833f,
  -0.0460841f, +0.4316690f, -0.2705172f, -0.0614211f, +0.0555967f, +0.3206339f, +0.0730825f, +0.1131213f,
  +0.1895929f, -0.1849285f, -0.2374523f, +0.0589870f, -0.2020495f, -0.0407231f, +0.1482342f, -0.1791145f,
  +0.4065150f, -0.3879533f, -0.0892092f, +0.2614434f, +0.0206173f, -0.1295805f, +0.0987852f, +0.1819443f,
  -0.0009544f, -0.5258692f, +0.1513437f, +0.0814264f, -0.2714633f, -0.0404410f, +0.1690369f, -0.0548707f,
  +0.1359886f, +0.0319214f, -0.2114552f, +0.3364819f, -0.0146288f, +0.0213294f, +0.2213968f, +0.1589745f,
  +0.1532328f, -0.3517480f, -0.1084829f, +0.0862364f, +0.1471126f, +0.0079827f, -0.2109429f, +0.2529381f,
  +0.2744609f, -0.4444207f, +0.4881029f, +0.0485679f, -0.0145940f, +0.1680517f, -0.4737850f, -0.2300769f,
  +0.2732164f, -0.4604216f, +0.0585157f, +0.0619503f, -0.2496025f, +0.0128030f, +0.0611847f, -0.1049401f,
  +0.1216124f, -0.3489702f, +0.3262187f, -0.0548022f, +0.0205012f, +0.0349264f, -0.1555565f, +0.1806761f,
  +0.0399925f, -0.2972618f, +0.0196979f, -0.1042215f, -0.0271910f, +0.0795705f, +0.0852683f, -0.0332583f,
  -0.1705722f, -0.0454749f, -0.0078377f, -0.0007385f, -0.0685690f, +0.0019381f, +0.0969160f, +0.0621983f,
  +0.0448237f, +0.1471999f, -0.4185032f, +0.1665061f, -0.3544049f, +0.0609722f, -0.2367646f, +0.0732758f,
  -0.1167091f, +0.1478281f, +0.0790723f, -0.1859594f, +0.1153733f, -0.1494769f, -0.0972326f, +0.1397337f,
  -0.0398387f, -0.0110365f, -0.0247060f, +0.2029172f, -0.1177658f, -0.0293729f, +0.1373655f, +0.0632961f,
  -0.1878535f, -0.0888229f, +0.2885934f, -0.1703263f, -0.1317992f, -0.1160922f, -0.0596465f, +0.0274543f,
  -0.2156748f, -0.1484158f, -0.1049812f, -0.3737749f, +0.0425690f, -0.2367373f, +0.0414473f, +0.0772040f,
  -0.0358876f, -0.3200314f, -0.0820431f, -0.0407141f, -0.0255194f, -0.1952663f, -0.0181273f, -0.1620752f,
  -0.1332346f, +0.0171827f, +0.1402571f, -0.2185225f, -0.2226853f, -0.2284391f, -0.0758355f, +0.1885518f,
  -0.1779442f, +0.0203627f, -0.0424405f, +0.1171735f, -0.0752619f, -0.1410442f, -0.0345454f, +0.0654874f
);

const float biases[4] = float[4](
  +0.0007330f, -0.0711382f, +0.0025415f, +0.0190181f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer19 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0373295f, +0.4784254f, -0.0645730f, -0.0107240f, +0.2463724f, +0.2934689f, +0.2892299f, -0.0538157f,
  -0.2031274f, +0.4199221f, +0.2982498f, -0.1712818f, -0.2198125f, -0.0961877f, -0.0343705f, -0.0667034f,
  +0.1544831f, -0.1593213f, +0.1248782f, +0.1066580f, -0.1423713f, -0.1033114f, +0.0566145f, -0.0377249f,
  -0.1958236f, +0.4962904f, +0.2445730f, -0.2964907f, +0.2545500f, +0.2336022f, +0.4910766f, +0.0728397f,
  -0.4213700f, +0.3494923f, +0.1971181f, -0.4499649f, +0.2524990f, -0.0280766f, +0.1061967f, +0.0307975f,
  -0.4320660f, -0.1828858f, +0.0296009f, +0.1569066f, +0.0456428f, -0.2170555f, -0.2340474f, +0.1094249f,
  +0.1086873f, +0.1782581f, +0.1227976f, -0.2654007f, +0.2293442f, +0.2491584f, +0.4045658f, +0.0886296f,
  -0.2719686f, -0.2585361f, +0.2195349f, -0.0609939f, +0.0186086f, -0.2643574f, +0.4179174f, +0.0432369f,
  -0.0481982f, -0.0450361f, +0.0334645f, +0.3241839f, -0.3310414f, -0.1137669f, +0.0594272f, +0.1350067f,
  -0.2402191f, +0.1180461f, -0.2552435f, +0.1481551f, +0.0926412f, +0.3842087f, -0.0860801f, +0.1322415f,
  -0.6602948f, -0.5346683f, +0.3853437f, +0.2271761f, +0.1049891f, +0.4592955f, -0.0980366f, +0.0083838f,
  -0.2587273f, +0.2462635f, -0.0508648f, +0.0191008f, -0.5408694f, +0.1995183f, -0.1398654f, -0.1007096f,
  -0.1876733f, -0.0033026f, -0.0571567f, +0.0484531f, +0.0937087f, -0.1587691f, -0.1768701f, +0.2147480f,
  +0.3486549f, -0.1338187f, +0.1539534f, +0.1863156f, -0.3274709f, -0.2457585f, -0.1962890f, +0.1941727f,
  -0.1597201f, +0.0754435f, -0.0583112f, -0.0247525f, +0.0770943f, +0.0264765f, -0.0135760f, +0.0127691f,
  -0.1415897f, +0.0014568f, +0.0576254f, +0.0237930f, -0.0407147f, +0.0388927f, +0.0708339f, -0.0246401f,
  -0.1533824f, -0.1722861f, +0.1548538f, +0.0408881f, +0.2557595f, -0.0113634f, +0.0582539f, -0.1535334f,
  -0.0457179f, +0.0147320f, +0.0577082f, +0.0222129f, -0.0758211f, +0.0289895f, -0.1294668f, +0.1655484f,
  +0.1353916f, -0.0737072f, +0.0761061f, -0.1268682f, -0.0564907f, +0.0535571f, +0.0610447f, -0.1057673f,
  -0.2380224f, +0.0514866f, -0.0597468f, +0.3170628f, -0.1195392f, -0.2388730f, -0.3133373f, +0.0027431f,
  -0.2248904f, -0.1055462f, -0.1595715f, +0.0858026f, +0.2410592f, -0.0480701f, -0.0815757f, -0.0234821f,
  -0.1519025f, -0.2453911f, +0.2355659f, +0.1900924f, +0.1022808f, -0.2655745f, -0.1055778f, +0.1761964f,
  +0.0892611f, +0.1453262f, +0.1483836f, -0.3124121f, -0.2316895f, -0.2365098f, -0.1141940f, +0.0289508f,
  -0.2572902f, +0.1194557f, +0.0968448f, +0.1346178f, -0.1436404f, -0.3055627f, -0.1376588f, +0.1433837f,
  +0.0243976f, -0.0072386f, +0.0995322f, -0.1286763f, -0.3767870f, +0.0391687f, +0.0946941f, +0.1096109f,
  +0.0682677f, -0.1484688f, +0.1732159f, -0.1360909f, -0.2606923f, -0.0243349f, +0.0716892f, +0.1367762f,
  -0.1312391f, -0.1695949f, +0.1306126f, -0.0087128f, +0.2364284f, -0.2957956f, -0.2158519f, +0.1914892f,
  -0.2687329f, +0.3805236f, -0.1414398f, -0.3257653f, -0.3464051f, +0.4582278f, +0.0155352f, +0.4486815f,
  +0.1166047f, -0.2191224f, -0.2379056f, -0.4087803f, -0.4722384f, +0.4796641f, -0.3600914f, -0.0241191f,
  +0.0238789f, -0.0653237f, +0.1140063f, -0.1547208f, +0.4160607f, -0.1220929f, -0.2750925f, -0.0293333f,
  +0.0075276f, +0.1994209f, -0.5184216f, -0.1217178f, +0.0891759f, -0.0476175f, -0.1782565f, +0.7076279f,
  -0.0251237f, +0.1319915f, -0.1203176f, -0.0309485f, +0.1371157f, +0.1909317f, +0.2304089f, +0.4234879f,
  -0.0582232f, -0.0128129f, +0.2440749f, +0.1345696f, -0.4414880f, +0.0726847f, +0.4919848f, +0.0992799f,
  +0.2267704f, +0.1108180f, +0.0050970f, -0.0258190f, -0.1068699f, -0.0862646f, +0.0999119f, -0.2340077f,
  +0.0854948f, +0.1465628f, -0.1731247f, -0.0908913f, -0.1830601f, +0.0508231f, -0.2609791f, -0.1778305f,
  +0.1198762f, +0.1849808f, -0.0756640f, +0.2302395f, -0.0875688f, +0.0874919f, -0.1513415f, -0.1798775f
);

const float biases[4] = float[4](
  +0.0724253f, -0.6648899f, +0.0749975f, -0.0801194f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer19 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0040881f, -0.1856278f, -0.2260440f, -0.4015212f, -0.0996340f, -0.2132037f, -0.1703452f, -0.0147959f,
  +0.1029184f, -0.0175971f, -0.7060639f, -0.6956823f, +0.0758965f, -0.1684032f, +0.4397880f, -0.1895073f,
  -0.1911891f, +0.0364858f, -0.2854262f, +0.1373593f, -0.0150230f, +0.1036164f, +0.0135603f, -0.0581637f,
  +0.5609751f, +0.3264664f, -0.0583702f, -0.4630034f, -0.0158450f, +0.1681694f, -0.2926105f, +0.6948623f,
  +0.2546467f, -0.0896639f, -0.4573253f, -0.2502652f, -0.1137776f, +0.4889183f, +0.2973608f, -0.2883086f,
  -0.5127230f, -0.3002950f, +0.1800216f, -0.0717445f, -0.4407881f, -0.1347792f, -0.0187888f, -0.0682517f,
  +0.2734434f, -0.4315316f, -0.0393306f, +0.0295324f, +0.0078314f, +0.0964320f, -0.3122029f, +0.5360200f,
  -0.1939652f, -0.0413556f, +0.0706859f, -0.4467113f, -0.2104397f, -0.0421073f, -0.3749404f, +0.2249571f,
  -0.2218945f, -0.2314614f, -0.2005364f, -0.0494724f, -0.1103892f, +0.3057439f, -0.0619827f, +0.0908994f,
  -0.1289115f, +0.0613318f, -0.0310341f, +0.1461638f, +0.0816105f, +0.1859070f, -0.0377283f, +0.1471542f,
  -0.0790527f, -0.2346046f, -0.1856669f, +0.0815162f, +0.3616139f, -0.1402722f, +0.1483845f, +0.3544199f,
  +0.1684903f, -0.0539848f, +0.1141105f, +0.0805221f, +0.1487068f, +0.0277922f, +0.1130330f, -0.0224588f,
  +0.4709679f, -0.2703018f, +0.0247012f, -0.1320433f, +0.1068089f, +0.1415434f, -0.2993055f, -0.0722966f,
  +0.3680476f, -0.6878510f, +0.0023445f, -0.3362320f, -0.4836951f, -0.0575201f, -0.0196423f, +0.0731076f,
  -0.1388249f, +0.1433971f, +0.2936001f, -0.4260758f, -0.1175310f, +0.1705364f, +0.1298811f, +0.0509699f,
  +0.0322262f, -0.3457764f, -0.1242840f, -0.1203138f, -0.0411758f, -0.2136452f, -0.1288391f, +0.0726014f,
  +0.3306992f, +0.1680369f, -0.1811390f, -0.2807820f, -0.1297505f, -0.1545284f, -0.1599001f, +0.0297694f,
  +0.2462101f, -0.0251896f, +0.1857964f, +0.0406549f, +0.1544605f, -0.1628749f, +0.0489407f, +0.2022914f,
  -0.1924482f, +0.0754626f, +0.5567921f, -0.3455572f, +0.1217125f, +0.4546506f, -0.0682653f, -0.2180382f,
  -0.2469761f, +0.0116308f, +0.1008167f, -0.5115476f, -0.0955089f, +0.0178535f, -0.3027867f, +0.2831345f,
  +0.0545089f, +0.1713940f, +0.1282072f, -0.2705900f, +0.0245035f, -0.2403018f, -0.4709285f, +0.0089395f,
  -0.2583344f, -0.1623305f, +0.0495202f, +0.0958407f, -0.0069373f, -0.2035154f, -0.1328855f, +0.3751290f,
  -0.1152419f, +0.0953033f, -0.2327555f, -0.1144897f, +0.1282765f, -0.4014136f, +0.1484978f, +0.0371088f,
  +0.2604520f, -0.1763543f, -0.2171102f, -0.4280403f, -0.0391152f, +0.1523826f, -0.0290752f, +0.1924526f,
  +0.1413297f, -0.1860835f, +0.3478765f, -0.1063914f, -0.1993366f, -0.1001942f, -0.1208248f, -0.3562244f,
  +0.0429422f, -0.1757783f, +0.1865771f, -0.0478546f, +0.1946420f, +0.1355787f, -0.2593782f, +0.3170950f,
  +0.1007160f, -0.1729338f, +0.0574408f, +0.0290365f, +0.1460131f, -0.1407931f, -0.1398295f, +0.2127605f,
  -0.0703645f, +0.3790481f, -0.0605419f, +0.2728367f, +0.0946591f, +0.0431022f, +0.2807680f, +0.0993780f,
  -0.2601227f, +0.3606420f, -0.1572745f, +0.1485444f, -0.2239552f, -0.2408244f, +0.0093187f, +0.2697486f,
  +0.0560629f, +0.0036661f, +0.0746457f, +0.0651465f, -0.3245995f, +0.1233120f, +0.0849096f, -0.0261212f,
  +0.0460871f, +0.1602232f, -0.0659910f, -0.0551676f, +0.1460087f, +0.0739241f, -0.0346427f, +0.4995795f,
  -0.1529545f, -0.1756452f, -0.0834281f, +0.0035662f, +0.1763950f, -0.1854818f, -0.0442216f, +0.1297707f,
  -0.0163372f, -0.0069605f, -0.1647611f, +0.1311425f, -0.1831976f, +0.0369563f, -0.0671751f, +0.0910964f,
  +0.0094629f, +0.0153614f, -0.1585738f, +0.0095286f, +0.1270780f, +0.0341698f, +0.0444644f, +0.2854802f,
  -0.1795916f, +0.0310568f, -0.2144082f, +0.0340835f, -0.2454574f, -0.2115942f, +0.2694148f, -0.0685872f,
  +0.0289733f, -0.1100718f, +0.0253309f, +0.0491513f, +0.0485351f, -0.0219808f, +0.0406949f, +0.0546608f
);

const float biases[4] = float[4](
  -0.1619259f, -0.2051891f, -0.0174803f, +0.0549443f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer20 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2910571f, -0.0351538f, +0.2110610f, +0.1496264f, +0.0173460f, -0.1373534f, -0.1211322f, +0.0522454f,
  +0.1516792f, -0.1330024f, -0.0663417f, +0.1743342f, -0.2944086f, -0.0588729f, -0.0612400f, +0.1252621f,
  +0.1460238f, +0.0145714f, -0.0078229f, +0.0646263f, +0.1409559f, -0.1976735f, -0.1117346f, +0.1385389f,
  -0.1419542f, +0.2117770f, +0.1186580f, +0.2541749f, +0.2316766f, -0.1007926f, +0.0537848f, -0.2438633f,
  -0.2982279f, +0.0045467f, +0.0896673f, +0.2007833f, -0.4975414f, -0.2148702f, +0.3283551f, -0.1402394f,
  +0.0316188f, +0.2296662f, -0.0085375f, +0.2106978f, -0.1769896f, -0.1728792f, -0.0047033f, +0.0731372f,
  +0.0042547f, +0.2198225f, +0.1038082f, +0.2089797f, +0.4041229f, +0.1536267f, +0.0518093f, -0.0843462f,
  +0.0183652f, +0.3462307f, +0.0364350f, +0.2952127f, +0.0735146f, +0.3292824f, -0.0989134f, +0.1496563f,
  -0.1270094f, +0.0280236f, +0.0545722f, +0.7927656f, -0.1775554f, +0.0663999f, -0.1255765f, -0.0620692f,
  +0.0632654f, +0.2097603f, +0.2388167f, +0.1881963f, -0.6076540f, +0.2277519f, -0.1454187f, -0.0293549f,
  +0.2202043f, -0.1428622f, +0.0671391f, -0.1360072f, +0.3651049f, -0.1271895f, -0.1910020f, +0.0267031f,
  -0.4704725f, -0.1356883f, +0.2091092f, -0.4580089f, +0.1916431f, -0.0606656f, +0.1689785f, +0.1407208f,
  +0.3660967f, +0.1119343f, -0.1174208f, +0.5340782f, -0.1230414f, -0.3484431f, -0.3208214f, -0.1053635f,
  +0.2464823f, -0.0793721f, -0.1979166f, +0.8384193f, +0.2563690f, +0.4032746f, -0.1191106f, +0.0241228f,
  +0.1125608f, -0.0891140f, +0.1572169f, +0.1191838f, -0.0694517f, -0.0496788f, -0.1361731f, +0.1770247f,
  +0.0908655f, -0.3921088f, -0.1150867f, -0.0426837f, +0.1083776f, +0.0810041f, -0.1099411f, -0.2539743f,
  -0.0222303f, +0.1427241f, -0.1433442f, -0.0243152f, +0.3440938f, +0.0327117f, -0.1641574f, -0.2254784f,
  +0.0482736f, +0.0205548f, -0.3061074f, +0.0958490f, +0.3813363f, -0.0388096f, -0.3004030f, +0.1629370f,
  +0.3431309f, -0.0970158f, -0.2466285f, -0.1160707f, +0.3228409f, -0.3944323f, +0.0489954f, +0.0980407f,
  +0.1009977f, -0.2505839f, +0.1131110f, +0.2138265f, +0.0126889f, +0.2174974f, -0.0851503f, +0.0892387f,
  +0.3706797f, +0.2275069f, +0.2459832f, -0.3545629f, +0.2880618f, +0.0748120f, -0.1644458f, -0.0010779f,
  +0.3269461f, +0.4784591f, -0.1358869f, +0.0495792f, +0.0487522f, -0.4951343f, +0.1702920f, -0.2275194f,
  +0.3741190f, -0.2330026f, -0.3365189f, -0.1787935f, -0.3182915f, +0.4601947f, +0.3053140f, +0.1710628f,
  +0.3690632f, +0.2746517f, -0.0720992f, -0.3228727f, +0.4246871f, +0.0995541f, +0.0734313f, -0.0860187f,
  -0.2143713f, +0.2712668f, -0.1059471f, -0.4197450f, -0.3434711f, +0.0142256f, -0.1332403f, +0.2203455f,
  +0.0289841f, -0.5111214f, -0.0278377f, -0.2555435f, +0.2340110f, +0.0879861f, +0.2902694f, +0.3160812f,
  +0.0535258f, +0.0603896f, -0.1786915f, -0.1653625f, +0.1930217f, -0.0901506f, -0.0854335f, +0.1080488f,
  +0.1885796f, -0.0985022f, -0.1164877f, -0.2708287f, +0.1901801f, -0.5227025f, +0.1853711f, +0.1303957f,
  -0.4383838f, -0.1228352f, -0.0801159f, -0.0107809f, -0.1517655f, +0.2111344f, -0.1538032f, +0.1593238f,
  -0.1544161f, +0.1234183f, +0.1317054f, -0.1512671f, +0.3460856f, -0.0473965f, -0.0736341f, +0.2297575f,
  +0.0771368f, +0.1301642f, -0.0811576f, +0.4452821f, -0.0907848f, -0.0390313f, -0.1531626f, +0.1624546f,
  -0.4439801f, +0.2381958f, +0.1954735f, +0.4796206f, +0.3037110f, -0.1018439f, +0.1290838f, +0.0556599f,
  -0.3643809f, +0.2433769f, -0.0794805f, -0.1343349f, +0.2206661f, +0.1001864f, -0.2075529f, -0.2809401f,
  -0.0031043f, +0.1178595f, +0.1602281f, -0.0335934f, +0.1209009f, +0.0858524f, +0.2258165f, +0.3187807f,
  -0.3056215f, -0.8590090f, +0.0026248f, -0.1057152f, +0.1819879f, +0.0361167f, +0.3963197f, -0.2319098f,
  -0.0581657f, +0.2689533f, -0.0811182f, +0.3209146f, +0.3106257f, -0.0419266f, +0.0705181f, -0.1220582f
);

const float biases[4] = float[4](
  +0.0521445f, +0.0123661f, -0.0715428f, -0.0490233f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer20 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2746700f, -0.1006018f, -0.0104764f, -0.3034386f, -0.0061916f, +0.0079352f, -0.1501146f, +0.0389958f,
  +0.4306406f, -0.1317054f, -0.1179113f, -0.0262271f, -0.2518760f, -0.0111316f, -0.0682051f, -0.0415122f,
  -0.0696177f, -0.1763475f, +0.1350471f, -0.1584968f, -0.7482971f, +0.1028575f, -0.0829963f, +0.1432137f,
  -0.3720902f, +0.3395999f, -0.0726666f, -0.0754444f, +0.1472894f, -0.0557260f, -0.0217514f, +0.0930031f,
  -0.2378158f, +0.2702401f, +0.4614300f, -0.0849217f, -0.1426971f, +0.4023397f, -0.3369860f, -0.1337409f,
  +0.2509662f, -0.1139856f, -0.1104541f, +0.3120530f, +0.3037518f, +0.0372930f, -0.5289918f, +0.1560806f,
  -0.0396623f, +0.1961609f, +0.3445894f, +0.2036993f, +0.6265423f, -0.0811575f, -0.3834770f, -0.1582190f,
  +0.1217804f, +0.0956450f, +0.1312433f, +0.5723357f, +0.2935697f, -0.0858211f, +0.0274267f, +0.1995346f,
  +0.0543057f, -0.1483223f, -0.0385695f, -0.0020611f, -0.1335904f, +0.0954559f, -0.0301958f, +0.0190677f,
  -0.0356426f, +0.0460814f, -0.0445257f, +0.3825426f, +0.3990036f, +0.2049453f, +0.0240562f, -0.1428929f,
  +0.1641443f, +0.0712758f, +0.3665100f, +0.4404730f, +0.1099759f, -0.0479569f, -0.2902321f, +0.1483172f,
  -0.1256690f, +0.0681645f, +0.1949937f, -0.1177685f, +0.1804367f, +0.0442746f, +0.1348069f, -0.1107830f,
  -0.1147773f, -0.3509962f, +0.0124341f, -0.1160753f, +0.3317856f, +0.0520691f, -0.0820108f, -0.2730575f,
  -0.0874020f, -0.1524500f, -0.0033626f, -0.7336318f, +0.1418174f, -0.0910995f, +0.3667698f, +0.2440591f,
  -0.2302564f, +0.0038311f, +0.1766013f, +0.0327093f, +0.1201566f, -0.0063934f, +0.5184282f, -0.2536300f,
  +0.0673081f, -0.4941886f, -0.1305272f, +0.1328106f, +0.3244287f, +0.0128307f, -0.3902235f, +0.0065370f,
  +0.1317063f, +1.1632609f, +0.1494719f, +0.3020984f, -0.2781802f, +0.0040420f, +0.1026496f, +0.0603759f,
  -0.0628756f, -0.0032037f, +0.1519468f, -0.1638124f, +0.1497602f, +0.1737762f, -0.1768324f, -0.3792206f,
  +0.0481258f, -0.0288073f, +0.1336320f, -0.4765878f, +0.0846709f, +0.1705573f, +0.2025832f, +0.0787203f,
  +0.1412872f, +0.0108421f, -0.0004028f, -0.2948904f, +0.3991593f, +0.0693870f, +0.0053902f, -0.1429894f,
  -0.0275341f, +0.0812029f, -0.0440323f, -0.1385844f, +0.0557099f, +0.3693652f, -0.1928520f, +0.1499157f,
  -0.0510645f, -0.0600085f, -0.0509407f, +0.0421553f, -0.1308524f, +0.3943490f, -0.4242038f, +0.2282342f,
  -0.0844563f, +0.0593201f, -0.1952457f, -0.1230452f, -0.1019764f, +0.2569353f, -0.5051538f, -0.2389900f,
  -0.0681976f, +0.0768853f, +0.3124759f, -0.0664285f, +0.0738601f, +0.1625542f, -0.2115915f, +0.3104643f,
  -0.1729105f, -0.0288543f, +0.0009052f, -0.4010108f, -0.2831924f, -0.1652934f, -0.1117198f, +0.1599125f,
  -0.0027852f, +0.1076098f, +0.0392965f, -0.5167458f, -0.0608578f, -0.3171488f, -0.1026225f, -0.0613551f,
  -0.0662191f, -0.0988273f, -0.2647776f, +0.0409503f, +0.2957132f, -0.0251650f, -0.1088407f, +0.2019374f,
  +0.1810387f, -0.2094547f, -0.0026946f, -0.0954497f, -0.1551484f, -0.4122990f, +0.1312625f, -0.0604387f,
  -0.1659247f, -0.3402930f, -0.0670549f, -0.2214458f, -0.0007080f, -0.0390777f, +0.1940350f, +0.1110557f,
  -0.0603203f, -0.0388986f, -0.0758237f, -0.0086447f, -0.2132284f, -0.2308258f, +0.3889312f, -0.1090197f,
  -0.0660174f, +0.0524500f, -0.1029827f, +0.1379021f, +0.3473666f, +0.3731017f, +0.3282630f, -0.0857152f,
  -0.3836803f, +0.1901188f, +0.0192426f, +0.0608992f, +0.1678338f, +0.3849704f, +0.0948157f, +0.1923086f,
  +0.0379275f, -0.1296472f, -0.3311346f, -0.2308936f, -0.0927821f, +0.0564691f, -0.1143805f, -0.2106638f,
  -0.0659389f, -0.3950766f, -0.1669950f, -0.2447704f, +0.5245708f, -0.0246371f, +0.5945056f, -0.1755903f,
  -0.0035208f, -0.8642161f, +0.0754130f, -0.4167877f, -0.0747015f, -0.0703135f, +0.3223577f, -0.3842711f,
  -0.0793678f, +0.0107055f, -0.0083792f, -0.2940444f, -0.2132028f, -0.0488746f, +0.3167126f, -0.5611020f
);

const float biases[4] = float[4](
  +0.0129774f, +0.0026761f, +0.0118839f, -0.0126180f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer21 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2816802f, +0.4714740f, -0.2986155f, +0.2865789f, -0.0431610f, -0.2073297f, -0.0372147f, +0.1836700f,
  +0.0284423f, -0.1807293f, +0.6198345f, +0.2002897f, +0.1126107f, +0.0417206f, +0.2609388f, -0.0608575f,
  -0.1491334f, -0.0679733f, +0.1075819f, -0.0956971f, +0.0212502f, -0.0446870f, -0.0838642f, -0.0532242f,
  +0.0250446f, +0.1567032f, -0.8100128f, +0.0401902f, +0.0762027f, +0.5421146f, -0.2864208f, +0.0232435f,
  +0.1810671f, +0.1573798f, -0.4105189f, -0.2027231f, -0.0981094f, +0.1674490f, -0.0891738f, +0.2020385f,
  +0.1854441f, -0.0271477f, -0.4688519f, -0.3746814f, -0.0732536f, +0.2262297f, +0.1378740f, +0.0696018f,
  +0.1214092f, +0.2332513f, -0.0435005f, +0.0089219f, -0.1914482f, -0.2328114f, -0.0385135f, -0.2193865f,
  +0.1576127f, +0.0819008f, -0.1394421f, +0.0378862f, +0.2866410f, +0.3118426f, -0.0394039f, -0.2325548f,
  +0.0089544f, +0.0047394f, +0.1029657f, +0.1640741f, +0.0841144f, -0.0529170f, -0.0474362f, +0.0704084f,
  +0.2117817f, -0.6845807f, +0.1178358f, +0.3686549f, -0.0054817f, +0.2478285f, -0.2066071f, +0.2000386f,
  +0.0922883f, -0.4340070f, -0.3017988f, +0.1197943f, -0.4346949f, +0.7233827f, +0.0505763f, +0.2334074f,
  +0.1816349f, -0.0681481f, +0.0122758f, -0.0189136f, -0.0001149f, -0.0909872f, +0.0148124f, +0.1265125f,
  -0.1742030f, -0.5839615f, +0.3775835f, +0.4167519f, -0.2118746f, -0.1156838f, -0.2610224f, +0.1986879f,
  -0.3944205f, +0.5296248f, +0.0738566f, +0.0945777f, -0.3573110f, +0.1431686f, +0.0940594f, -0.0245342f,
  -0.1146512f, +0.0440239f, +0.0639584f, -0.1193220f, -0.0620509f, -0.0912448f, +0.2212521f, +0.0658614f,
  +0.1087608f, -0.0567568f, +0.3749202f, -0.0109268f, +0.1757147f, +0.0401065f, -0.0381251f, +0.0088469f,
  +0.0940286f, -0.0233564f, -0.1532482f, -0.0441547f, +0.1784270f, +0.0285283f, +0.0245596f, +0.0788333f,
  +0.0165160f, -0.0303142f, -0.0998352f, -0.1601598f, -0.0301340f, -0.0579890f, +0.0122374f, -0.0414687f,
  -0.0972987f, -0.4033246f, +0.1192591f, -0.0337797f, +0.0012564f, -0.0021106f, -0.3900358f, +0.3313890f,
  -0.2356538f, -0.0462966f, -0.1176114f, -0.0938946f, -0.0819230f, +0.1187014f, +0.0052562f, -0.0433946f,
  -0.0199090f, +0.1931207f, +0.1031676f, -0.0413260f, -0.0049135f, -0.1036279f, -0.0173333f, +0.0192220f,
  +0.2679335f, +0.0653475f, -0.0809031f, +0.1443165f, -0.0172117f, +0.2127232f, -0.0078408f, +0.0658149f,
  -0.3783625f, +0.0657703f, -0.5709652f, -0.0051017f, -0.1769200f, +0.4609992f, +0.5301199f, +0.2938374f,
  +0.3702063f, +0.3590356f, +0.1349178f, -0.0358303f, +0.2442397f, -0.0701102f, -0.0664152f, -0.2787511f,
  +0.1548142f, -0.2544118f, +0.2137719f, +0.1521632f, -0.3137262f, +0.1170195f, -0.3264682f, +0.1258463f,
  +0.1977417f, -0.6579952f, +0.1375736f, -0.2473936f, -0.1660005f, +0.0105033f, +0.0345084f, +0.1755621f,
  +0.1093089f, +0.0900860f, +0.1153969f, -0.1467544f, +0.5408023f, -0.3247236f, -0.3723406f, +0.0862975f,
  -0.1151043f, -0.1122336f, +0.0580695f, +0.0416486f, +0.1744283f, +0.1147307f, -0.1676630f, +0.0329188f,
  -0.2729555f, -0.3356286f, -0.1099116f, -0.1960068f, -0.0978510f, +0.1437658f, -0.2231028f, +0.1372944f,
  -0.4443857f, +0.1210814f, +0.2878564f, -0.0766403f, +0.2169121f, -0.1931144f, -0.2959099f, -0.2166008f,
  +0.0571958f, +0.0023775f, +0.0792253f, -0.0728885f, +0.0407288f, -0.2464087f, +0.0134528f, -0.0006906f,
  +0.3698263f, +0.3848888f, -0.4305499f, -0.3392617f, +0.2761453f, -0.7677742f, -0.0253278f, +0.0703134f,
  +0.2283915f, +0.2273311f, +0.3722549f, +0.1559616f, +0.8456218f, -0.4914439f, -0.4009087f, +0.0026810f,
  +0.1446917f, -0.1686104f, +0.0916788f, +0.0533286f, +0.0316595f, -0.0017285f, -0.0245677f, -0.0472974f,
  +0.2595949f, -0.1571071f, -0.0395130f, -0.2321247f, +0.0777882f, -0.1684321f, -0.1833878f, +0.1335224f,
  +0.1580423f, -0.0706317f, +0.0820946f, +0.1053888f, -0.0200470f, +0.0470425f, -0.1706833f, +0.0610902f
);

const float biases[4] = float[4](
  -0.1778577f, -0.0505957f, -0.1189047f, -0.1017849f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer21 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0889654f, -0.5265288f, -0.1526842f, +0.0096809f, -0.4130675f, -0.1440880f, -0.3562916f, +0.1358901f,
  +0.0028390f, -0.1578720f, -0.2892599f, +0.1680945f, +0.3773072f, -0.0277058f, +0.2501608f, +0.0271126f,
  +0.0074899f, +0.0710692f, -0.0729762f, -0.2610890f, -0.1249259f, -0.0148332f, -0.0066651f, +0.1035274f,
  +0.2464196f, -0.0833695f, -0.2242565f, +0.0008221f, -0.1364673f, +0.3450330f, -0.6077070f, -0.1247563f,
  +0.3280093f, +0.1704563f, -0.2080093f, +0.5097373f, +0.5495033f, -0.3077478f, +0.1757808f, +0.0185537f,
  +0.1556401f, -0.1807493f, +0.2541946f, -0.2284387f, -0.1078098f, +0.1400304f, +0.2051217f, +0.2169842f,
  -0.0614513f, -0.0180322f, +0.3418187f, +0.3113048f, -0.4360273f, -0.3028767f, -0.2147570f, -0.0022454f,
  -0.0378349f, +0.3425383f, -0.5532176f, +0.1720086f, +0.2285080f, +0.3387961f, -0.0638932f, -0.2284557f,
  +0.0514739f, -0.0333695f, +0.1012485f, -0.1238733f, +0.0555269f, +0.0085967f, -0.0405573f, +0.0414179f,
  -0.0310764f, -0.0905847f, +0.1820938f, +0.1875421f, +0.1147294f, +0.0258824f, -0.0451207f, +0.1920709f,
  -0.0499867f, -0.2605630f, +0.0294566f, -0.1551245f, -0.0588892f, +0.0509736f, -0.3193392f, +0.0717826f,
  +0.1268034f, +0.1208568f, +0.0240954f, +0.1529662f, +0.0244614f, -0.1394536f, +0.0261917f, -0.1635873f,
  +0.0544599f, +0.1612512f, +0.3403210f, +0.0904764f, -0.1119718f, -0.1560308f, +0.3636990f, -0.1122335f,
  +0.1545972f, +0.3774967f, -0.1276198f, +0.0066969f, +0.0590932f, +0.0388715f, -0.1196057f, +0.0373779f,
  -0.1415702f, -0.0451489f, +0.1374629f, +0.1423752f, -0.0000976f, -0.2098587f, +0.0853990f, +0.3413678f,
  -0.0721574f, -0.0675631f, -0.0809887f, -0.0428434f, +0.3106298f, -0.2219097f, -0.1281323f, +0.0713818f,
  +0.1686914f, +0.2149472f, -0.1460372f, -0.1629147f, -0.0625466f, -0.0080249f, +0.0122018f, +0.1118756f,
  +0.0878912f, -0.1163627f, +0.1193923f, +0.0504410f, +0.0448771f, -0.0622888f, +0.0607627f, -0.0378323f,
  -0.0082819f, -0.0608403f, +0.2791495f, -0.0094588f, +0.4165823f, +0.1932867f, -0.1008295f, -0.0110867f,
  -0.0087986f, +0.0684635f, -0.0322806f, -0.1326902f, +0.2773693f, -0.4746036f, -0.3063617f, +0.1859185f,
  +0.1670121f, +0.0435432f, -0.0960575f, +0.0489257f, +0.2361502f, +0.2875769f, +0.0571246f, +0.1087300f,
  -0.1360458f, -0.0674508f, +0.0054205f, +0.0331265f, -0.1240405f, -0.3110803f, +0.0299357f, +0.0040364f,
  -0.1588186f, -0.3161955f, +0.0873536f, -0.0622705f, -0.0763062f, +0.2908809f, -0.2472556f, +0.3073013f,
  -0.0744315f, +0.2003472f, -0.0250943f, +0.1909909f, -0.5695854f, +0.1163556f, +0.2915821f, +0.3263702f,
  -0.2137003f, -0.1973276f, +0.0196378f, +0.0957629f, +0.1127767f, -0.1222527f, +0.0943153f, +0.0617799f,
  -0.0409140f, +0.2470776f, +0.1224528f, -0.0354170f, -0.5634052f, +0.1601590f, -0.0619740f, +0.3125487f,
  +0.0796090f, +0.2782868f, -0.4753686f, -0.1491181f, -0.1414605f, +0.1115729f, -0.2433641f, +0.2892792f,
  -0.0650395f, +0.1949210f, +0.1292448f, -0.1768559f, +0.0716880f, +0.1962607f, +0.0667518f, -0.0274626f,
  -0.0319169f, +0.2413854f, +0.2778192f, -0.1871139f, -0.0671149f, +0.2316199f, +0.1902094f, -0.0159884f,
  -0.1609002f, +0.0426417f, -0.1121591f, -0.1504084f, -0.0073012f, -0.0487002f, -0.0372827f, -0.0538062f,
  +0.5116915f, -0.2593268f, -0.1165377f, +0.2057490f, -0.3333755f, -0.0872796f, +0.1132002f, +0.0398534f,
  -0.0275194f, -0.4169807f, +0.1711084f, +0.0496416f, -0.5129802f, +0.1797008f, +0.2462618f, -0.1179927f,
  +0.1416413f, +0.1243996f, +0.0465481f, +0.0617388f, -0.1562403f, +0.1696628f, -0.1768817f, +0.0937921f,
  +0.0737616f, +0.1892332f, -0.5990952f, -0.0852247f, +0.4161667f, -0.0763464f, -0.6926745f, +0.2123975f,
  -0.0512753f, +0.1355654f, -0.1021435f, +0.3659908f, +0.5494173f, -0.5196131f, -0.1633883f, +0.1323887f,
  -0.2452609f, -0.0383773f, -0.2228021f, -0.1299261f, -0.2863963f, -0.0446826f, +0.2929170f, -0.0568427f
);

const float biases[4] = float[4](
  -0.0490345f, +0.1868225f, -0.0513883f, -0.0955429f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer22 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2190969f, +0.2134846f, -0.1265032f, +0.0471825f, +0.1240820f, -0.0394630f, +0.1993231f, +0.1007535f,
  +0.1222828f, +0.4704643f, +0.1818736f, +0.0186232f, +0.5242134f, +0.0018389f, +0.1731330f, +0.5452317f,
  +0.1884486f, +0.1297985f, -0.2946180f, -0.0057434f, +0.1250965f, +0.2068547f, +0.2140476f, -0.0467065f,
  -0.0712991f, -0.1277703f, +0.0288640f, +0.1190109f, -0.0284855f, -0.1632300f, +0.2891782f, +0.1365260f,
  -0.1868223f, +0.2628961f, +0.1296228f, +0.2334193f, +0.4134187f, -0.3710503f, +0.3765012f, +0.0960676f,
  -0.5763384f, +0.0035275f, -0.1156827f, +0.0865460f, -0.1837133f, -0.3606109f, +0.4012931f, +0.3269421f,
  -0.1090235f, +0.1041846f, -0.1749399f, -0.3588308f, +0.0090129f, -0.0567015f, +0.3972308f, -0.1585970f,
  +0.0466347f, +0.2879994f, -0.1453371f, +0.1588794f, +0.1445923f, +0.3076356f, +0.4230380f, -0.0416473f,
  -0.2820310f, -0.2485704f, -0.1250976f, +0.0422356f, -0.2374298f, +0.2106156f, +0.3074299f, +0.0330941f,
  -0.1850732f, +0.2009359f, -0.1619975f, -0.2211116f, +0.0450169f, +0.0267342f, -0.0561509f, +0.1855100f,
  +0.0137078f, +0.1850212f, +0.2163563f, +0.1798032f, -0.3188355f, -0.1434309f, +0.1824121f, +0.5210437f,
  +0.0786038f, -0.0775984f, -0.2306905f, +0.1040124f, -0.2669629f, -0.1403711f, +0.0776879f, -0.2663707f,
  -0.1941083f, +0.4503516f, -0.0730126f, +0.0870397f, +0.1989413f, -0.0643216f, +0.4418830f, +0.0543739f,
  -0.2509636f, +0.5387263f, +0.0161370f, +0.4727778f, +0.6076496f, -0.2832357f, +0.1270429f, +0.8120871f,
  -0.0222047f, -0.2904718f, -0.2628891f, -0.0912207f, -0.0617252f, -0.1142727f, -0.0148128f, +0.4081224f,
  -0.1176904f, +0.2051609f, -0.3016386f, +0.1140775f, +0.0374794f, -0.2161222f, -0.0238518f, -0.0351944f,
  -0.2545774f, -0.2452298f, -0.0147265f, -0.1367591f, -0.0994735f, +0.1588496f, +0.4378302f, +0.1217973f,
  -0.2324513f, -0.0114995f, -0.0548110f, -0.0957827f, +0.4548616f, +0.1180275f, +0.0923859f, -0.0469861f,
  -0.0251540f, +0.1396244f, +0.5025955f, +0.1278947f, +0.2507525f, +0.0014966f, +0.2418644f, +0.1779227f,
  -0.0776958f, +0.2715280f, -0.1032906f, +0.2510733f, +0.2568499f, +0.0965884f, +0.2487059f, +0.1241893f,
  -0.0904706f, +0.0759490f, +0.1764670f, -0.0679186f, +0.3060503f, +0.2647671f, +0.1551437f, +0.3458232f,
  +0.1140885f, +0.3150246f, +0.3303593f, +0.3188943f, +0.0218948f, -0.1170502f, +0.0321063f, -0.1112023f,
  +0.5105317f, -0.1050190f, +0.3433351f, -0.1688668f, +0.2113626f, +0.1576629f, +0.1367148f, +0.1191939f,
  -0.0626844f, -0.1558772f, +0.0160996f, -0.0501322f, +0.4641421f, -0.0258697f, +0.1022944f, -0.1029876f,
  +0.0911892f, +0.1286570f, +0.1893901f, +0.2505545f, -0.0954144f, -0.1027034f, +0.2980901f, -0.0097932f,
  -0.2523448f, +0.1537638f, +0.0190167f, -0.3221036f, +0.4879710f, -0.1327614f, +0.0132063f, -0.1561303f,
  +0.1358574f, +0.4515457f, -0.0037403f, -0.0319940f, +0.1188062f, -0.0749053f, -0.1097944f, -0.0220774f,
  -0.0338220f, +0.1046583f, +0.2753159f, -0.0950160f, +0.0899873f, -0.2129173f, +0.0698975f, +0.0695206f,
  -0.0497054f, +0.1426287f, +0.3248274f, +0.5503344f, -0.2729935f, +0.0090498f, +0.0674369f, -0.1009075f,
  +0.0552769f, +0.1087739f, -0.0027881f, +0.0646413f, +0.0566779f, +0.2226977f, +0.0583546f, -0.1513086f,
  +0.1644417f, +0.2882189f, -0.0391512f, +0.2017753f, -0.1062108f, -0.2047095f, -0.1248580f, -0.2106464f,
  +0.4734564f, -0.0317551f, -0.0278304f, +0.6927163f, -0.1568376f, +0.0250660f, +0.1446011f, -0.0840145f,
  +0.3547513f, +0.0197982f, -0.1590721f, +0.0566090f, -0.6920745f, +0.4681932f, +0.2489497f, +0.0177706f,
  +0.1295674f, -0.1433356f, +0.0325098f, -0.0088487f, -0.0333054f, +0.0185722f, -0.1243717f, +0.0834179f,
  -0.1151127f, -0.3270521f, +0.0294749f, +0.2200061f, -0.2916233f, -0.0449265f, +0.0969376f, +0.0458747f,
  -0.1495294f, +0.2635020f, -0.0040684f, +0.0616366f, -0.3891326f, +0.2955208f, +0.0303492f, +0.1706617f
);

const float biases[4] = float[4](
  +0.0098737f, -0.0426788f, -0.0136913f, -0.0355553f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer22 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0281661f, -0.2229448f, -0.1623307f, -0.3910624f, +0.1456348f, +0.1244010f, +0.1058529f, -0.0967140f,
  -0.1831928f, -0.1290054f, +0.0686650f, -0.4467774f, +0.5090228f, -0.1251688f, -0.0808574f, -0.2899670f,
  -0.0220059f, -0.1194529f, +0.1801836f, -0.1126613f, +0.0117242f, -0.0575102f, -0.0838167f, +0.2545501f,
  +0.1820369f, -0.0769144f, -0.2154947f, -0.5171084f, +0.0095227f, -0.1317685f, -0.4846214f, +0.3217444f,
  +0.0816596f, -0.2415921f, +0.3573515f, -0.2000312f, -0.5582870f, +0.3012347f, -0.1157092f, +0.0672568f,
  -0.4820496f, -0.2019841f, +0.1185234f, -0.1202147f, +0.4144073f, -0.1915818f, -0.1925610f, -0.1182888f,
  -0.4640883f, -0.3100734f, -0.1616870f, -0.2898494f, +0.2724627f, +0.1018179f, +0.0109258f, -0.0078266f,
  +0.0207567f, -0.0335043f, +0.0729576f, -0.2633581f, +0.0613479f, -0.1383778f, -0.3459079f, +0.1961268f,
  -0.3131734f, +0.0676472f, +0.1146863f, -0.0492392f, +0.2950104f, -0.0757638f, -0.4152717f, -0.0095614f,
  -0.0601258f, +0.0304782f, -0.2467318f, -0.2520635f, +0.2285996f, +0.0601346f, +0.1914986f, -0.0177933f,
  -0.0077870f, +0.0797123f, +0.1269255f, +0.1243972f, +0.2062484f, -0.0684170f, +0.1430425f, +0.3299198f,
  +0.0480946f, -0.0351103f, -0.3261046f, -0.1607118f, +0.0522780f, +0.0373363f, +0.1314248f, +0.5020926f,
  -0.1122192f, -0.1679807f, -0.1245675f, +0.1620139f, -0.1331296f, +0.1637810f, +0.0923972f, +0.1925922f,
  -0.2277093f, -0.1439409f, -0.2058672f, +0.9306748f, +0.4565136f, -0.2073044f, -0.3183749f, -0.1470399f,
  +0.0331791f, -0.6508526f, -0.0360847f, -0.2049219f, +0.0368965f, +0.0322178f, +0.1381699f, +0.4561346f,
  -0.2422083f, +0.1007180f, -0.2661818f, -0.0937414f, +0.0987207f, +0.0534542f, -0.0090435f, -0.1065783f,
  +0.0032179f, +0.0438073f, -0.2507396f, +0.0664658f, +0.3970076f, +0.0301336f, +0.4082053f, +0.0236906f,
  +0.1473549f, -0.6391463f, +0.0545889f, -0.0526444f, +0.1863953f, +0.0064669f, -0.0748698f, +0.1679506f,
  -0.0363672f, -0.1482847f, +0.0834106f, -0.3133874f, -0.1718243f, -0.0560867f, -0.1687853f, +0.0292584f,
  -0.1561448f, -0.3324312f, +0.1424198f, -0.3104886f, -0.1279879f, +0.2418926f, -0.1666461f, -0.1964296f,
  -0.2841476f, -0.0064639f, +0.3937783f, +0.0091102f, +0.2735584f, -0.0094144f, -0.2032619f, -0.0371686f,
  -0.0913175f, -0.0965229f, -0.3062337f, +0.1148965f, +0.1569803f, +0.0694971f, -0.5259593f, -0.0461407f,
  +0.4585303f, -0.1549519f, -0.3474436f, -0.0960915f, +0.1758698f, -0.0370428f, -0.4024363f, -0.2804362f,
  +0.6283022f, +0.0946608f, +0.0820730f, +0.0092835f, -0.0722637f, +0.2221826f, -0.2461216f, +0.1791879f,
  +0.0746482f, -0.5578874f, -0.2086679f, -0.1436595f, -0.1498819f, +0.0967641f, -0.5201480f, -0.0795236f,
  -0.1743624f, -0.7209741f, -0.0046961f, -0.0712343f, -0.2100886f, +0.1824517f, -0.0192918f, -0.1362543f,
  +0.0901151f, -0.1239318f, +0.2771865f, -0.0119291f, -0.0272279f, +0.2070381f, -0.1511498f, +0.0775880f,
  +0.1272350f, -0.0256447f, +0.3301700f, -0.1246585f, -0.1178139f, +0.1257461f, +0.1965204f, -0.0393435f,
  -0.0772692f, +0.0772887f, -0.0084462f, +0.2180336f, -0.2369033f, -0.1118014f, -0.0085848f, +0.0228947f,
  +0.0294253f, -0.0288097f, -0.0476572f, +0.0611244f, +0.0322515f, -0.0324686f, -0.2178006f, -0.0140258f,
  +0.0012032f, +0.3120196f, +0.1569057f, +0.4344115f, -0.0229411f, -0.1398780f, +0.1723676f, -0.1621313f,
  +0.1125131f, +0.0313396f, -0.2895462f, +0.0354433f, +0.2695907f, -0.1995297f, -0.3118151f, -0.3435430f,
  +0.1252663f, -0.2073670f, -0.0980433f, -0.1613454f, -0.2187872f, -0.1995537f, +0.0344493f, -0.3823562f,
  +0.2857954f, -0.0932325f, +0.2155036f, +0.1504184f, -0.0331104f, -0.1235515f, -0.0046466f, +0.1931266f,
  -0.0414307f, -0.2912714f, -0.0076300f, -0.2503742f, -0.2118644f, +0.0527840f, -0.3185963f, -0.0158260f,
  +0.0018064f, +0.3755651f, +0.0690843f, +0.0733087f, -0.0883535f, +0.0108057f, -0.1046729f, +0.1707970f
);

const float biases[4] = float[4](
  +0.0136724f, +0.0233655f, -0.0393362f, +0.0056899f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer23 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0549365f, +0.2715007f, -0.0069526f, -0.1354186f, -0.0298699f, +0.0482153f, -0.1154373f, +0.0232177f,
  -0.0163543f, -0.1213844f, +0.0079167f, -0.1653056f, -0.0730627f, +0.3870231f, +0.3638513f, -0.0996537f,
  +0.1074107f, -0.1071834f, -0.0240670f, -0.2709118f, -0.0679001f, +0.1295823f, +0.1904645f, +0.0312488f,
  +0.0078288f, -0.2581259f, +0.1016348f, +0.0463699f, -0.0300470f, -0.0701989f, +0.1412571f, +0.2905912f,
  +0.0978452f, -0.3061159f, -0.0680012f, +0.2756599f, -0.1515843f, -0.0898405f, -0.1403250f, -0.1160316f,
  -0.1883281f, -0.1682256f, -0.0236684f, +0.0403168f, -0.1004117f, +0.3390247f, +0.0103011f, +0.0385269f,
  -0.0111664f, +0.0505916f, -0.0163306f, -0.0328354f, +0.2020483f, -0.3752734f, -0.0252342f, -0.1491466f,
  +0.1637615f, +0.1869976f, +0.2049060f, +0.2343525f, -0.0543639f, +0.1461323f, -0.2532542f, -0.1777791f,
  -0.2546030f, +0.0934658f, +0.3518990f, -0.0103530f, +0.0600674f, +0.1100489f, -0.0712135f, -0.1516402f,
  -0.1205661f, +0.2572123f, -0.1939365f, +0.5829756f, +0.1590825f, +0.5848761f, +0.0000308f, +0.1426560f,
  +0.0427666f, -0.3595372f, +0.0077111f, +0.1723898f, +0.2669221f, +0.6287608f, -0.0213772f, +0.1048318f,
  -0.1923426f, +0.0573932f, +0.0064553f, +0.1532665f, -0.0582127f, -0.1793856f, -0.1919064f, +0.1170991f,
  -0.1675581f, -0.7492243f, +0.3810799f, +0.2548611f, -0.7864584f, +0.1896158f, -0.2070855f, +0.1270082f,
  +0.0373897f, -0.2127656f, +0.4786899f, -0.2522653f, -1.0340904f, +0.2073114f, -0.0305339f, -0.3270085f,
  +0.0700519f, +0.2180706f, +0.0353573f, -0.0416598f, -0.2722787f, -0.0948664f, -0.1069397f, -0.1212095f,
  +0.1272335f, +0.0169414f, +0.0471910f, +0.0360970f, -0.3249167f, -0.1129148f, +0.0632541f, -0.0080333f,
  +0.0408117f, +0.4702217f, -0.3016936f, -0.2207294f, -0.1854915f, -0.0392097f, +0.0009363f, +0.3993471f,
  +0.1079315f, -0.1578591f, -0.3045368f, -0.0837584f, -0.1508948f, -0.1650995f, +0.1528746f, +0.0384057f,
  -0.1507753f, +0.0446313f, -0.1603437f, +0.2257679f, +0.0584933f, +0.2497334f, +0.0418429f, +0.0351533f,
  +0.1523761f, +0.2361779f, -0.0692237f, +0.1880006f, +0.2237780f, +0.2992098f, +0.1491365f, +0.1151854f,
  +0.0217539f, -0.0186357f, -0.3137948f, +0.1386650f, +0.0573694f, +0.3194011f, +0.1069322f, +0.1672570f,
  -0.0464863f, -0.3215038f, +0.2935740f, +0.0485986f, -0.0205059f, +0.1107733f, -0.1197382f, +0.0602924f,
  -0.3546748f, -0.7201625f, +0.2815267f, +0.0628351f, -0.9005406f, +0.2196285f, +0.3785690f, -0.1653745f,
  -0.1793447f, -0.1382745f, +0.0449740f, +0.0362550f, -0.3427609f, +0.0222528f, +0.1762893f, -0.1643887f,
  +0.0866999f, +0.0266419f, +0.0698259f, -0.1050839f, +0.1897967f, -0.0686302f, +0.0166879f, -0.1189924f,
  -0.0012638f, +0.1481890f, +0.0887981f, -0.0680177f, +0.0475964f, +0.0279278f, +0.0368093f, +0.0916038f,
  +0.1936781f, +0.0645372f, -0.0282459f, +0.1544593f, -0.0710636f, +0.0064265f, -0.0364235f, -0.1598217f,
  -0.0112018f, -0.0236692f, -0.0024441f, +0.3099348f, +0.0410610f, +0.3072083f, +0.1117425f, +0.0131919f,
  +0.0089338f, -0.1991016f, -0.1035509f, -0.0236431f, -0.1755245f, -0.2184865f, -0.1853301f, +0.1073956f,
  +0.3326931f, -0.2035176f, -0.3295766f, -0.2266103f, -0.1818563f, +0.2112364f, -0.0239978f, +0.0910127f,
  -0.1497330f, +0.1599740f, +0.3688002f, +0.4797453f, +0.0523686f, +0.0957717f, -0.1940858f, +0.0274437f,
  +0.4617101f, -0.2848478f, +0.1335242f, -0.4450319f, +0.5278181f, +0.0898650f, -0.0571367f, +0.1672369f,
  +0.0331084f, -0.1441677f, -0.1313872f, -0.3692829f, -0.1064333f, +0.0178396f, +0.0909141f, +0.1037903f,
  -0.3961157f, -0.1526475f, +0.3125609f, +0.1055655f, +0.1209110f, +0.0015422f, -0.1732536f, +0.1561020f,
  +0.0438633f, -0.1357576f, -0.1552924f, -0.2328914f, +0.0574084f, +0.1638579f, +0.1028569f, -0.1191379f,
  -0.1710417f, +0.0414433f, +0.0220475f, -0.0880166f, +0.1550734f, -0.1786093f, +0.0726253f, +0.4451120f
);

const float biases[4] = float[4](
  +0.0570874f, -0.0700259f, +0.0857471f, -0.0955479f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer23 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0173499f, -0.1547900f, +0.0440699f, +0.1571937f, -0.1881999f, -0.2428764f, -0.0755884f, +0.1505387f,
  -0.2752798f, +0.0566744f, +0.0487018f, +0.1477796f, +0.0597659f, +0.0804548f, +0.3085345f, +0.2667530f,
  -0.2831978f, +0.0974902f, +0.0614235f, -0.0657910f, -0.1796170f, -0.2692493f, -0.3494349f, -0.0518276f,
  +0.1730893f, -0.0413494f, +0.0061803f, +0.0225937f, +0.0581898f, -0.0999270f, -0.0264203f, -0.0500737f,
  +0.0458572f, -0.0852224f, -0.1167712f, -0.1870119f, +0.3325254f, +0.3266506f, +0.2780057f, -0.1858867f,
  -0.3051847f, -0.2408473f, +0.0166565f, +0.0666814f, -0.4384028f, -0.1645035f, +0.3061514f, +0.4347869f,
  -0.1191174f, +0.0493929f, -0.0131119f, +0.2697644f, -0.1351833f, -0.1861721f, -0.0447566f, -0.0694840f,
  -0.1219830f, +0.0613410f, -0.0801958f, +0.2730207f, +0.2469622f, +0.2462522f, -0.2122837f, -0.0114593f,
  -0.0096498f, -0.0570043f, +0.0104077f, -0.0982418f, -0.0837183f, -0.4373063f, +0.1313128f, +0.3543133f,
  +0.1781513f, -0.1655567f, +0.2466946f, -0.3495526f, -0.2651892f, +0.0742439f, -0.2955671f, +0.2012700f,
  +0.1936878f, -0.0595285f, -0.1855643f, -0.3062982f, -0.1101813f, +0.2930024f, +0.0359605f, +0.0943053f,
  -0.1448829f, -0.2241675f, +0.1183931f, -0.1325625f, -0.2960180f, -0.0162185f, -0.3161620f, +0.0914555f,
  +0.2577977f, -0.0444618f, +0.0272693f, -0.1028907f, +0.2836922f, +0.0677253f, -0.1915272f, +0.2737218f,
  +0.1863044f, -0.0227955f, -0.4567712f, -0.1063041f, +0.2749722f, -0.0242867f, -0.1183770f, +0.1059290f,
  -0.1258082f, -0.0278594f, +0.0392153f, +0.2432963f, +0.1352733f, +0.0438862f, +0.1283634f, +0.0402330f,
  +0.0971203f, +0.0308674f, -0.0392047f, -0.2927598f, -0.0003708f, -0.2791156f, +0.0193901f, -0.0205479f,
  +0.3493937f, -0.1437825f, -0.0707265f, -0.3411172f, -0.0777023f, +0.1805469f, -0.1107398f, +0.1675800f,
  +0.1009660f, +0.1901199f, -0.1605347f, -0.3858840f, +0.3679794f, +0.1556165f, -0.8752542f, -0.2681163f,
  +0.1809463f, +0.2469678f, -0.3909772f, -0.0381053f, -0.0095709f, -0.2275477f, -0.1579212f, -0.0353035f,
  +0.5500671f, -0.0464040f, -0.3230765f, -0.3301247f, +0.2501968f, -0.6167631f, -0.0013286f, -0.0455991f,
  +0.0293086f, -0.0748276f, -0.0400475f, -0.1651021f, +0.0736076f, -0.0287813f, -0.1545935f, +0.2116957f,
  +0.0425343f, -0.1127972f, -0.0593085f, -0.0525543f, -0.2642494f, +0.1944736f, -0.0130973f, +0.1285105f,
  +0.0991927f, -0.0409721f, +0.0241520f, +0.0421832f, +0.3728276f, +0.2655283f, +0.4647100f, -0.2627065f,
  -0.1924031f, -0.2453277f, -0.0701798f, -0.0456691f, +0.1048268f, +0.4207197f, +0.0411792f, +0.1864157f,
  -0.1278800f, +0.0349449f, +0.1151789f, +0.2311910f, +0.0776558f, +0.1429197f, -0.0965001f, +0.0508233f,
  -0.2347648f, -0.0477140f, -0.0081259f, -0.3377403f, +0.2425343f, -0.0429181f, -0.2361527f, +0.1341444f,
  +0.0749261f, -0.0427040f, -0.3063404f, -0.0050350f, +0.3014774f, -0.2126283f, -0.0096937f, -0.0269331f,
  -0.0502724f, -0.0882303f, +0.0291575f, +0.0367870f, -0.2750089f, +0.1597983f, -0.0929785f, +0.1325697f,
  -0.1294688f, +0.2096221f, -0.0713535f, +0.2618904f, -0.1547877f, -0.1121566f, +0.1661028f, +0.1397344f,
  -0.0104932f, +0.0894174f, +0.2737701f, +0.0929422f, -0.0680286f, +0.0626163f, +0.0441736f, -0.1189369f,
  -0.2154758f, +0.0484512f, -0.0656334f, -0.2889208f, -0.0337775f, -0.5943424f, -0.0673512f, -0.3226727f,
  -0.0976543f, -0.4914879f, +0.0160900f, +0.2360892f, -0.3525652f, -0.5657299f, +0.3183073f, +0.2102626f,
  -0.0852949f, -0.2248192f, -0.1791739f, -0.0207448f, +0.0276838f, +0.0764877f, -0.1046268f, +0.4782773f,
  -0.1661500f, -0.2491458f, -0.5285754f, -0.2922844f, +0.0567770f, -0.2937856f, -0.1763374f, +0.0631265f,
  -0.1018222f, +0.0362809f, -0.3649068f, -0.0934309f, +0.2473257f, -0.3878330f, -0.2027554f, -0.0192197f,
  -0.1154343f, -0.0291744f, +0.0856925f, +0.1060581f, -0.2404541f, +0.0958985f, +0.0253467f, +0.0143290f
);

const float biases[4] = float[4](
  +0.0511703f, -0.0699285f, -0.0625434f, +0.0817132f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer24 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0028348f, +0.2472988f, -0.2904773f, -0.0986275f, +0.1750447f, +0.2205639f, -0.0186361f, -0.1027882f,
  -0.0552221f, +0.4483979f, -0.4157786f, +0.1103826f, +0.0796549f, +0.1463488f, +0.4989405f, +0.0320243f,
  -0.0652672f, +0.2619724f, -0.0507061f, +0.0675437f, +0.1533300f, +0.1840104f, +0.0403403f, -0.1229683f,
  -0.0329087f, +0.1083557f, +0.6419382f, -0.0894665f, +0.2537100f, +0.2105245f, -0.1906290f, -0.0899003f,
  -0.3126772f, +0.0371360f, +0.4323667f, +0.0505917f, +0.2045090f, +0.1298368f, +0.1177991f, -0.0101235f,
  +0.0166976f, +0.2574970f, +0.0425526f, +0.1202138f, -0.1540465f, -0.0022361f, -0.1711051f, +0.1372932f,
  -0.0220688f, -0.0572245f, -0.0766275f, +0.0149578f, -0.0081080f, -0.0139851f, +0.2169079f, -0.1316238f,
  +0.1179461f, +0.2030119f, -0.1467170f, +0.4347981f, -0.3296563f, +0.1242589f, -0.3718313f, -0.1064221f,
  -0.2549361f, -0.2073466f, +0.0571169f, +0.1105684f, -0.0854340f, +0.2105369f, -0.1218451f, +0.0860371f,
  +0.0675021f, -0.0165649f, +0.1899397f, -0.2739580f, +0.1389083f, +0.4343305f, -0.0388155f, -0.0038843f,
  +0.0356793f, +0.0102149f, -0.1772784f, +0.2379675f, +0.1622523f, +0.2609995f, +0.1535722f, +0.3593880f,
  +0.2072112f, +0.2193978f, +0.1027324f, +0.0001773f, +0.0418804f, +0.5095193f, +0.0686713f, +0.2527943f,
  -0.0549430f, +0.2607667f, +0.1364614f, -0.1959875f, +0.0501948f, +0.0142375f, +0.2003613f, +0.2365239f,
  +0.3925816f, +0.6018899f, +0.1462939f, +0.1604710f, +0.0299428f, +0.5495914f, +0.2447026f, +0.2001255f,
  -0.1441895f, -0.2003509f, +0.5053802f, +0.0140236f, -0.1160934f, +0.5229700f, +0.2994900f, -0.2991628f,
  +0.1216770f, +0.2943145f, -0.0210942f, +0.1173251f, -0.0609177f, +0.0312582f, +0.1554353f, +0.0957510f,
  +0.0281305f, +0.4848831f, +0.1927374f, +0.2379543f, +0.2734586f, +0.2651572f, -0.3144435f, +0.0070300f,
  -0.0947983f, +0.2178419f, +0.1324348f, -0.0198516f, -0.1454143f, +0.4539342f, -0.4680222f, +0.1059389f,
  -0.3622134f, +0.1353386f, -0.1725965f, -0.4169012f, -0.0288267f, -0.0810955f, +0.0798193f, -0.0282670f,
  -0.2415424f, +0.3395518f, +0.0664885f, +0.3294793f, +0.0349384f, -0.0956879f, -0.3714293f, -0.2725594f,
  -0.2840878f, -0.3460057f, +0.3401966f, +0.0657932f, -0.1270001f, -0.0189806f, -0.0996343f, -0.3193451f,
  +0.0299039f, +0.1313175f, +0.3051662f, -0.3451092f, +0.3539328f, +0.1071702f, -0.0639247f, +0.2614836f,
  -0.0356324f, +0.0299794f, +0.2208057f, -0.1235874f, +0.3720795f, +0.3302649f, -0.4556706f, -0.4703380f,
  -0.2470014f, -0.1649488f, +0.0796352f, -0.1478912f, -0.3494959f, +0.2245856f, +0.0637547f, +0.0480080f,
  -0.1181567f, +0.0368442f, +0.4578096f, -0.0993868f, +0.3638477f, -0.0098047f, -0.0141617f, -0.0883854f,
  +0.0696079f, -0.3358455f, -0.0951587f, -0.0581383f, -0.1012847f, -0.0358381f, -0.0617243f, +0.0503676f,
  -0.1443089f, +0.1514827f, -0.0130664f, +0.0472022f, -0.0967573f, +0.1557013f, -0.1150270f, -0.1071713f,
  -0.0933165f, -0.0013591f, +0.0122337f, +0.0491379f, +0.0949671f, -0.0753521f, -0.2242866f, +0.1957351f,
  +0.1664698f, +0.0973491f, +0.0921897f, -0.0191789f, +0.0125680f, -0.0156661f, -0.1134152f, +0.2221103f,
  -0.2833829f, -0.1575620f, +0.0987154f, -0.0176796f, -0.0672238f, +0.0428652f, -0.0041070f, +0.0780560f,
  -0.0662982f, +0.0224659f, -0.0768157f, +0.0082502f, +0.0076937f, +0.1680040f, +0.2310651f, -0.1912751f,
  +0.0640747f, +0.4917282f, -0.4140753f, +0.2646406f, +0.0212116f, +0.0545160f, +0.2453505f, -0.1572305f,
  +0.2110028f, -0.0242080f, +0.1462556f, -0.1376216f, +0.0313106f, +0.1006735f, +0.3786306f, -0.0348653f,
  -0.1245463f, +0.1143433f, -0.1681355f, -0.0360703f, +0.1140882f, +0.2597702f, +0.2143231f, -0.2210519f,
  +0.2536361f, +0.3013220f, +0.1704998f, +0.2162754f, -0.3269801f, -0.0134429f, -0.0907518f, -0.0622463f,
  +0.0604618f, +0.0238863f, +0.0576775f, +0.0212005f, +0.0743558f, +0.0942598f, +0.0292024f, +0.1078068f
);

const float biases[4] = float[4](
  -0.0332129f, -0.0772615f, +0.0110557f, -0.0372453f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer24 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0326337f, +0.0545094f, -0.1820932f, +0.2051196f, +0.0892053f, +0.3588631f, -0.1415447f, -0.0211073f,
  +0.2401221f, +0.1539096f, -0.2243158f, -0.1792712f, -0.1689091f, +0.1438835f, +0.1678052f, +0.0751153f,
  -0.0708135f, +0.0909588f, +0.0445793f, -0.1539206f, -0.2339932f, -0.0280409f, -0.0918280f, -0.0030346f,
  -0.0929532f, -0.0031292f, -0.1814276f, -0.0698862f, -0.1197548f, -0.0328845f, -0.0379264f, -0.5986789f,
  +0.1544510f, -0.2020764f, +0.0349427f, -0.2647184f, -0.0842101f, -0.1211405f, -0.0754872f, +0.1141775f,
  +0.1540940f, -0.2103285f, +0.0643710f, -0.2846492f, -0.2302010f, -0.0880002f, +0.0809917f, -0.0276140f,
  -0.1465413f, -0.0743874f, -0.2216441f, -0.0604034f, -0.3177529f, +0.1994258f, +0.1756636f, +0.1250963f,
  +0.1272739f, +0.3107980f, -0.3741542f, +0.0097565f, +0.0893262f, +0.0339578f, +0.1689218f, +0.0153490f,
  +0.2580643f, +0.0603405f, -0.1438055f, -0.0829232f, -0.1340172f, +0.3474343f, -0.5628129f, +0.0917788f,
  -0.2027201f, +0.1904962f, -0.2040159f, +0.2682992f, +0.2263312f, +0.1518699f, +0.1972312f, -0.1158742f,
  -0.0921540f, +0.2297104f, -0.0227042f, -0.1207476f, -0.0159879f, -0.3168157f, +0.0394617f, -0.5046492f,
  -0.1460017f, +0.0914228f, +0.1528165f, +0.0738612f, -0.0076279f, +0.0634991f, +0.0804497f, -0.1649480f,
  -0.2675544f, -0.0179017f, +0.4299609f, +0.1395264f, +0.2901298f, -0.3179860f, -0.3436079f, -0.0012937f,
  -0.0614447f, -0.5297989f, +0.6709994f, -0.0622486f, +0.0107348f, +0.0255797f, -0.0190106f, +0.2036448f,
  -0.0575139f, -0.9605063f, +0.0777403f, -0.4167513f, -0.3168172f, -0.0548752f, +0.1338431f, -0.2925816f,
  +0.1614296f, +0.1122472f, -0.0588481f, +0.0618373f, +0.0057105f, -0.2128309f, +0.1801115f, -0.0068426f,
  +0.0928027f, +0.0347858f, -0.0293127f, +0.0267286f, +0.1653105f, -0.2147668f, -0.0548499f, +0.0273181f,
  -0.2197306f, +0.0832853f, -0.1160268f, -0.2031417f, +0.1026054f, -0.1150857f, -0.0128193f, -0.2122046f,
  +0.3093643f, -0.1243156f, +0.0482121f, +0.2698995f, +0.1336393f, +0.3240571f, -0.2560089f, +0.2388002f,
  -0.0406898f, -0.1698565f, +0.1911624f, -0.0158637f, +0.2026014f, +0.2646822f, -0.1836956f, +0.3098685f,
  -0.0148295f, -0.1348919f, +0.0707501f, +0.0460119f, -0.1465813f, +0.0257944f, -0.0718894f, +0.0155683f,
  +0.0214319f, -0.0751736f, -0.1807017f, -0.1046111f, +0.0187921f, -0.1207344f, +0.0594663f, -0.0253023f,
  -0.1097480f, -0.3999362f, +0.0530086f, -0.3174094f, -0.0218492f, +0.0687149f, +0.1184223f, -0.0010085f,
  -0.0503787f, -0.0583982f, -0.1457750f, -0.0066807f, -0.0416020f, +0.0225530f, +0.3839681f, -0.1080441f,
  -0.3615483f, +0.0553440f, -0.1489041f, -0.5075450f, +0.0578420f, +0.1679430f, -0.0034927f, -0.2779790f,
  +0.2304193f, +0.3396802f, -0.1747586f, -0.0620791f, -0.1451932f, +0.0105769f, -0.2892788f, -0.0784954f,
  +0.0333674f, +0.2330641f, -0.0360247f, +0.0363814f, +0.1114887f, +0.1204354f, -0.2468061f, +0.1218487f,
  +0.1473672f, -0.1542790f, -0.0871856f, -0.3566397f, -0.2943219f, -0.0477804f, +0.0738630f, +0.0971937f,
  +0.1621724f, +0.2827295f, +0.1716360f, +0.0191894f, -0.1853239f, -0.1266552f, -0.0171359f, -0.1595255f,
  +0.1382832f, -0.1967733f, +0.0343894f, -0.1433172f, -0.0211719f, -0.0877224f, +0.0432598f, -0.1341427f,
  +0.1137161f, +0.0113229f, -0.1184120f, +0.3578870f, -0.0457110f, -0.2054023f, +0.3513429f, -0.0118299f,
  +0.2088562f, -0.5918519f, +0.0978715f, -0.0662271f, -0.1222494f, -0.2347606f, +0.2435019f, +0.0336263f,
  -0.0437998f, -0.0806006f, -0.0645865f, -0.0805508f, +0.1092727f, +0.0118808f, +0.1520254f, -0.1006457f,
  +0.0608607f, -0.0179664f, -0.1722578f, +0.1182757f, +0.0589842f, -0.2281461f, -0.2062216f, +0.1856102f,
  -0.0713293f, -0.0637913f, -0.2863542f, -0.3662499f, -0.0026548f, -0.2309696f, -0.0769958f, +0.1410931f,
  +0.1724760f, +0.1518894f, -0.0240962f, +0.0116158f, +0.0346109f, -0.2779435f, +0.1592275f, -0.0457905f
);

const float biases[4] = float[4](
  -0.0231035f, +0.0377188f, -0.0503723f, -0.0050143f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer25 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.4539386f, -0.1744644f, +0.0927822f, -0.1717031f, -0.2594449f, +0.2624617f, -0.0900252f, +0.1186286f,
  -0.5884957f, -0.5381569f, -0.4953327f, -0.1390251f, -0.2011237f, +0.2018641f, -0.4761057f, +0.0484141f,
  -0.3145229f, -0.3076539f, -0.0660503f, -0.0514628f, +0.0503179f, +0.2692903f, -0.1284817f, +0.0981257f,
  +0.4274074f, -0.3222995f, +0.0905340f, -0.2728123f, -0.1488623f, -0.5822951f, +0.1897272f, -0.3331311f,
  -0.0027467f, +0.4484220f, +0.2897804f, +0.1369817f, +0.0901227f, -0.2974010f, +0.0363006f, -0.0579531f,
  +0.1724236f, +0.1267892f, +0.2121807f, -0.2272260f, -0.2501869f, -0.1430899f, +0.0326574f, -0.1344232f,
  +0.2018273f, +0.0432659f, +0.1541096f, -0.2248666f, +0.2102156f, -0.3057644f, -0.0583399f, -0.0123509f,
  +0.4243075f, -0.1366470f, -0.2182228f, -0.1508184f, +0.1712475f, -0.0128568f, -0.2065321f, +0.3787501f,
  +0.2531740f, +0.1383654f, -0.0517047f, -0.1558472f, +0.0806436f, +0.1399945f, -0.0892765f, +0.0825889f,
  +0.0794830f, -0.0339605f, +0.0710758f, -0.0885843f, -0.1429686f, +0.1977985f, -0.1806786f, +0.0834241f,
  +0.2739991f, -0.0548381f, +0.0158616f, +0.1310056f, +0.2319364f, +0.2384371f, +0.0398498f, +0.1500392f,
  +0.5040410f, -0.2553678f, -0.1062978f, +0.3834977f, -0.1502028f, +0.1234218f, +0.3198982f, +0.1123727f,
  -0.0030654f, +0.1194342f, -0.1056812f, -0.0841881f, +0.2329598f, +0.0340440f, +0.0175076f, +0.0536652f,
  +0.6635487f, -0.1565397f, +0.0120571f, +0.0823623f, +0.0755133f, -0.5868527f, +0.3461965f, -0.1209140f,
  +0.2759879f, -0.1589011f, +0.3526614f, -0.1812714f, +0.0400323f, -0.0722961f, +0.0740340f, +0.4810202f,
  +0.0534805f, +0.0155601f, +0.2169244f, +0.2086777f, -0.0650994f, -0.0354995f, -0.1026346f, -0.0878249f,
  -0.4802749f, +0.0463865f, -0.1904599f, +0.1340974f, -0.0172172f, -0.2128537f, +0.1214432f, -0.0218102f,
  +0.4946688f, -0.0365795f, +0.0603164f, -0.1270474f, +0.2778243f, -0.0318894f, -0.0024385f, +0.5197294f,
  +0.1214549f, +0.1647296f, -0.1601564f, -0.1584723f, +0.2883945f, -0.3506777f, +0.1396504f, +0.0602332f,
  +0.0976917f, +0.4096209f, -0.2766007f, +0.4535821f, +0.6585675f, -0.6919411f, +0.3584109f, +0.1681169f,
  -0.0760883f, +0.1169093f, -0.0161925f, -0.0492222f, +0.0609295f, -0.1266655f, +0.2357107f, +0.0763347f,
  +0.2077315f, -0.0863148f, -0.2589772f, +0.1258617f, +0.3089421f, -0.4701856f, -0.2650090f, +0.0660958f,
  +0.6115902f, +0.3425092f, -0.6674725f, -0.0181375f, +0.8829210f, -0.1263365f, -0.7715278f, +0.0535961f,
  -0.0590876f, +0.0725143f, -0.3329620f, -0.2112638f, -0.2065237f, -0.0716284f, -0.0481750f, +0.2333280f,
  -0.1352354f, -0.1968164f, +0.0924595f, +0.0741115f, -0.3070268f, +0.0528623f, +0.1020260f, -0.0677787f,
  -0.2412185f, -0.1112011f, +0.2296091f, +0.1076640f, +0.0246176f, -0.0342272f, +0.0635665f, -0.4332742f,
  +0.0037584f, -0.0636101f, +0.1545116f, +0.2261690f, +0.0824395f, +0.0270836f, +0.0002689f, -0.2061590f,
  +0.1137947f, +0.0777345f, -0.0728471f, -0.4077106f, +0.4849887f, +0.0710132f, +0.0760221f, -0.0835398f,
  -0.1105729f, -0.1829521f, +0.0482061f, +0.1817706f, -0.1687916f, -0.1319892f, -0.4800983f, -0.0059148f,
  +0.0715125f, -0.0221962f, +0.1082624f, -0.0796513f, +0.0907151f, +0.1041108f, +0.1288747f, -0.1983589f,
  -0.1669806f, +0.1085390f, -0.3835699f, -0.4163666f, -0.0938936f, -0.1002763f, +0.3282534f, -0.1847776f,
  +0.1257600f, +0.1212951f, +0.0649782f, +0.4420043f, -0.4024641f, +0.1246407f, -0.0595964f, +0.3222912f,
  +0.0622055f, -0.0643201f, +0.1576932f, -0.3536467f, -0.3201685f, -0.0548816f, +0.2953299f, +0.0881316f,
  -0.1002276f, +0.1316603f, +0.1416773f, -0.1179598f, +0.1549779f, +0.5735120f, -0.1019275f, -0.1100383f,
  +0.1202328f, +0.0959599f, -0.3584853f, -0.1007250f, -0.0016990f, +0.0408642f, -0.1722402f, +0.2357303f,
  +0.0382458f, +0.0360982f, +0.0865728f, +0.0725324f, -0.1347290f, -0.1303424f, -0.0875887f, +0.0044380f
);

const float biases[4] = float[4](
  -0.1208739f, -0.1561780f, +0.0071761f, -0.0974249f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer25 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0710181f, -0.0693342f, -0.0778585f, -0.0205197f, +0.0494471f, -0.0748006f, -0.1845987f, -0.0320188f,
  +0.0371360f, -0.1501501f, +0.1638935f, -0.0085565f, -0.1287234f, -0.0003777f, -0.1131118f, +0.1077479f,
  -0.0739071f, +0.0014022f, +0.0474618f, -0.0840145f, -0.0431529f, +0.0394980f, +0.0295024f, -0.1295274f,
  -0.1249130f, +0.1074821f, -0.1530892f, +0.3706304f, +0.1304296f, +0.4283913f, +0.0401834f, -0.0461051f,
  -0.1909896f, -0.0340298f, +0.2202946f, +0.0785701f, -0.0786974f, +0.1148507f, +0.1462514f, -0.0242350f,
  +0.2050042f, -0.0300630f, +0.1869405f, -0.0617024f, +0.0931538f, +0.0583016f, -0.0098269f, -0.0122120f,
  -0.0321987f, +0.1459271f, +0.3320168f, +0.2139605f, -0.0912165f, +0.1278015f, -0.1378302f, -0.1639613f,
  -0.0258169f, +0.2375094f, +0.4108757f, +0.1266044f, -0.2201920f, +0.0698772f, -0.0235246f, -0.0774487f,
  +0.0991736f, +0.1203418f, +0.0372753f, +0.0738696f, +0.0051525f, -0.2405264f, +0.2358907f, -0.1220433f,
  -0.0553079f, +0.0343005f, +0.2682035f, +0.0156872f, -0.0619566f, +0.0135007f, -0.0447143f, +0.0572899f,
  -0.1284993f, +0.1174242f, -0.2072618f, +0.0474891f, -0.0901127f, -0.2201033f, +0.1319697f, +0.2531578f,
  -0.0510566f, -0.0357169f, +0.0612135f, -0.0889354f, -0.0001006f, +0.0612494f, -0.0360764f, +0.2024972f,
  +0.0545478f, -0.6370081f, -0.0287318f, +0.1217069f, -0.3198098f, +0.2303477f, -0.2088890f, +0.0928542f,
  +0.1089698f, -0.3254845f, -0.0878757f, -0.2404532f, +0.3377251f, +0.0216013f, +0.3543325f, +0.0042724f,
  +0.1199513f, +0.3068727f, +0.1142956f, +0.1944870f, -0.0950661f, -0.1185589f, -0.0821491f, -0.0567533f,
  -0.1897798f, -0.0696082f, -0.0300549f, +0.0530053f, -0.4292576f, -0.0284364f, -0.0256370f, -0.0297474f,
  -0.1702580f, -0.3461190f, +0.2030977f, -0.0165157f, +0.2953594f, +0.0437420f, +0.0298333f, -0.2483499f,
  -0.2445702f, -0.0385638f, -0.1169449f, -0.1559153f, -0.1370248f, +0.1670259f, -0.0930404f, +0.0827013f,
  -0.0008184f, -0.2203858f, -0.1659462f, +0.1385032f, +0.0144353f, -0.0252398f, -0.0829632f, +0.1820333f,
  -0.3791653f, +0.2406428f, +0.0956405f, +0.0801810f, -0.4278306f, +0.0545653f, -0.1194608f, +0.3041111f,
  -0.2060190f, -0.1516869f, +0.0490050f, -0.1959691f, +0.0756286f, -0.3129176f, +0.0604458f, +0.2520635f,
  -0.0458202f, +0.2565928f, +0.0674144f, +0.1903161f, +0.0511121f, +0.3818721f, +0.0270850f, +0.0523457f,
  +0.2401855f, +0.3151758f, +0.1512316f, +0.2127046f, -0.2315427f, -0.3499658f, -0.1606223f, +0.3043129f,
  +0.1880363f, +0.1297001f, +0.0322743f, -0.0150198f, -0.3289221f, -0.0629806f, -0.6241641f, -0.1649030f,
  -0.0775401f, -0.0006886f, -0.0348640f, +0.0819669f, -0.1874055f, +0.1936014f, +0.1319877f, +0.0654822f,
  -0.1527629f, +0.0176633f, +0.0120850f, +0.2543975f, -0.2821437f, -0.4759730f, +0.1762421f, -0.1945049f,
  +0.2169886f, +0.2580566f, +0.1566066f, -0.0002471f, -0.0279072f, -0.0085607f, +0.0469310f, -0.0322657f,
  -0.2755636f, +0.2957222f, -0.4065312f, -0.1122665f, +0.1674906f, +0.0570795f, +0.1974500f, +0.0706025f,
  +0.3706712f, -0.0714688f, -0.1842415f, -0.1087118f, +0.0712391f, +0.2097117f, -0.0070317f, -0.1937622f,
  +0.1859093f, -0.1107279f, +0.1364877f, -0.4019191f, +0.4052931f, +0.1355803f, +0.1432879f, -0.1560582f,
  +0.0915028f, +0.0565695f, +0.0646698f, +0.1178002f, +0.1541579f, -0.1546066f, +0.1141196f, +0.1152589f,
  +0.1798000f, +0.1808652f, -0.0426041f, -0.2609945f, +0.2381183f, +0.3672494f, -0.2202960f, -0.1754958f,
  +0.5626634f, +0.2457860f, +0.1506106f, +0.2127798f, +0.1106108f, -0.2035063f, +0.3119071f, -0.0579133f,
  -0.0113848f, -0.0885904f, -0.0233970f, +0.0374531f, -0.0384371f, -0.1381590f, -0.0149688f, -0.0335067f,
  +0.0697821f, -0.0661295f, -0.3186385f, -0.0821029f, +0.2745496f, +0.1617809f, -0.4128381f, -0.1294440f,
  +0.0798955f, +0.0062292f, -0.3214705f, -0.2072883f, +0.3009471f, +0.2360046f, -0.3021708f, -0.0022262f
);

const float biases[4] = float[4](
  +0.1144123f, +0.0162196f, -0.0374688f, -0.0893173f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer26 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1121960f, -0.1643738f, -0.1264232f, -0.0986630f, -0.2032889f, +0.1507699f, -0.0578192f, -0.3646171f,
  +0.0396658f, -0.1642312f, -0.1970034f, -0.2651275f, -0.3086807f, +0.0522511f, -0.1426394f, -0.3548468f,
  -0.1318989f, +0.0475338f, -0.1418405f, -0.1932136f, -0.1268435f, +0.1354582f, +0.0903878f, +0.0428869f,
  -0.1929448f, +0.0318810f, +0.0973415f, +0.0576389f, +0.1094605f, -0.1063368f, -0.0687250f, -0.4645189f,
  -0.4490094f, -0.3808199f, +0.2794928f, -0.0636505f, -0.0859413f, -0.1224449f, -0.2884552f, -0.1122920f,
  +0.1689655f, -0.0861843f, -0.0406114f, -0.0545667f, +0.1902460f, +0.0463850f, -0.1720505f, -0.0105952f,
  +0.0112414f, -0.0696701f, +0.1010622f, +0.1742149f, -0.0257021f, +0.0985798f, -0.1608567f, -0.0997440f,
  -0.4233327f, +0.1279425f, +0.1856944f, +0.1416794f, +0.1034368f, -0.1761152f, +0.0070650f, -0.0385979f,
  -0.0327316f, +0.0247131f, -0.1941492f, -0.2252966f, +0.1172594f, -0.0788626f, -0.2275265f, -0.1111349f,
  -0.0474510f, +0.1830660f, +0.0401649f, -0.0437436f, +0.3142951f, -0.2871017f, +0.0365762f, -0.0734088f,
  -0.2680386f, +0.3523749f, -0.0124996f, -0.6153961f, -0.1469721f, +0.3234084f, +0.2172313f, +0.1032186f,
  -0.0049823f, +0.0467918f, +0.1011471f, -0.3455956f, -0.0041256f, -0.0343838f, +0.2134897f, +0.2444343f,
  -0.2176455f, -0.0454965f, +0.4069094f, +0.1430070f, +0.0859142f, -0.3049292f, -0.0479030f, -0.1667973f,
  -0.1138105f, +0.4630398f, -0.3827771f, -0.0821688f, -0.1239494f, +0.1282099f, +0.0035058f, -0.4616213f,
  +0.0412674f, -0.1173877f, -0.3595746f, -0.3287168f, +0.3114889f, +0.3926224f, +0.0980454f, +0.1397749f,
  -0.3152161f, -0.1475019f, +0.2282379f, -0.0384593f, +0.2248450f, -0.3942876f, -0.2523007f, +0.0082559f,
  +0.0157099f, -0.1661484f, +0.3615438f, -0.1822726f, +0.0666589f, -0.0475961f, -0.1716033f, +0.0496863f,
  -0.3685489f, +0.2414822f, +0.3337128f, -0.2325709f, +0.0935741f, -0.2537300f, -0.0798556f, +0.1225213f,
  +0.0100651f, -0.3840750f, -0.1362080f, -0.1081543f, +0.0114880f, -0.0318059f, -0.4548803f, -0.0737068f,
  -0.1178160f, -0.1270319f, -0.0984884f, -0.0732040f, -0.0225803f, -0.2411495f, -0.2128748f, -0.1934918f,
  -0.1302113f, +0.2094704f, +0.1019889f, -0.1434171f, +0.1387668f, -0.0191148f, +0.0723811f, -0.0996143f,
  -0.0560576f, -0.3512979f, +0.4914987f, +0.2870039f, -0.2078806f, +0.1392137f, -0.0490498f, -0.3926521f,
  +0.0255968f, +0.1614627f, +0.5345017f, +0.0572209f, +0.2935890f, -0.2856539f, -0.1025862f, +0.0905468f,
  -0.1987051f, +0.2543446f, +0.5824230f, -0.0689483f, -0.2987691f, -0.0312823f, -0.1001826f, -0.0985562f,
  -0.3453930f, +0.1168574f, +0.1806506f, -0.2099880f, -0.0539174f, +0.0594156f, -0.2430252f, -0.4804627f,
  -0.4164601f, -0.1028755f, +0.3187969f, +0.1148458f, -0.3104454f, -0.2016992f, -0.2277780f, -0.0995978f,
  -0.2714646f, +0.0889818f, -0.0834869f, +0.0685975f, -0.1430958f, -0.1597657f, +0.0801889f, +0.1284964f,
  +0.0246174f, -0.0733586f, -0.0664349f, +0.0458813f, -0.0337952f, +0.1097749f, -0.0896355f, +0.1089959f,
  -0.0894161f, -0.2317435f, -0.1539312f, +0.3000287f, +0.0264312f, -0.1485780f, +0.0101881f, +0.1347091f,
  -0.0850361f, -0.0659659f, +0.1840904f, +0.2131260f, -0.1353564f, +0.0595569f, +0.1304812f, -0.0429987f,
  +0.1010670f, -0.3007565f, +0.0742736f, +0.1278815f, -0.1266456f, +0.0303832f, +0.0689746f, +0.0070046f,
  +0.1589279f, -0.1811887f, -0.1813263f, +0.2286611f, -0.0049231f, -0.0270314f, -0.6798163f, -0.6014496f,
  -0.0294425f, +0.0113453f, +0.0758529f, +0.2321269f, -0.0873378f, +0.2790971f, -0.2331038f, -0.2880590f,
  -0.2456159f, +0.1250155f, +0.1043087f, -0.0067196f, +0.1447808f, +0.0433438f, +0.2786089f, +0.0237635f,
  +0.0779734f, +0.0836614f, -0.1298043f, +0.1274963f, -0.1016243f, +0.0512623f, +0.2771457f, +0.2584943f,
  -0.2743240f, +0.0501047f, +0.0552750f, +0.3012841f, +0.1340200f, +0.0239864f, -0.1282612f, -0.0032649f
);

const float biases[4] = float[4](
  +0.0166161f, +0.0139598f, -0.0428415f, +0.0031220f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer26 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0380774f, -0.3105534f, -0.0419287f, -0.0029686f, -0.1146205f, -0.0884220f, +0.0049947f, -0.1097598f,
  +0.2502687f, -0.0586040f, +0.0432528f, +0.0575263f, +0.0823060f, -0.2374471f, +0.0120910f, -0.1451785f,
  -0.0730248f, -0.0665651f, -0.2078436f, +0.0820753f, +0.0056841f, +0.0367420f, +0.1124619f, -0.2017581f,
  +0.0523480f, +0.2575205f, -0.2541320f, +0.3732604f, -0.0831906f, -0.1042741f, +0.1242760f, -0.1456744f,
  +0.1118454f, -0.1571610f, +0.2612693f, +0.0905387f, -0.0040204f, -0.0512542f, +0.0565792f, +0.1021067f,
  -0.0942777f, +0.0383313f, +0.3706794f, -0.0130636f, +0.0197850f, +0.0562964f, -0.0231135f, -0.0107554f,
  +0.1508236f, +0.0231973f, +0.1203766f, +0.0273722f, -0.1320011f, +0.3284932f, -0.0076947f, -0.3185978f,
  +0.4133852f, -0.0245790f, -0.8872200f, -0.0658255f, +0.4509597f, +0.1917066f, +0.0231875f, -0.0006634f,
  +0.1511051f, +0.0893020f, +0.2644438f, +0.0557953f, +0.0815483f, -0.0668770f, -0.0731185f, -0.1522245f,
  -0.0990768f, -0.2347073f, +0.0589589f, +0.0447744f, -0.0020820f, -0.0995275f, -0.0970760f, -0.2169005f,
  +0.1431844f, +0.2656010f, +0.0725904f, -0.2635067f, +0.3842909f, -0.3326412f, -0.0371123f, -0.0592452f,
  +0.0020743f, +0.0917654f, -0.1315226f, -0.1237749f, +0.1710066f, +0.0157903f, -0.0691387f, -0.1186743f,
  -0.0016991f, +0.0845733f, +0.0717408f, +0.1197040f, -0.1168405f, -0.0382148f, -0.1659966f, -0.2204863f,
  +0.1715740f, -0.0156696f, +0.7196086f, -0.1878986f, +0.1010125f, -0.2570001f, +0.4581721f, -0.1318936f,
  +0.0101418f, +0.0432847f, +0.3832392f, +0.1093146f, -0.0641686f, -0.2524691f, -0.0215625f, -0.0310414f,
  +0.1751045f, -0.1692110f, +0.2374939f, +0.3024357f, +0.0590377f, -0.1557373f, -0.0460581f, -0.0466175f,
  -0.0615412f, -0.0760727f, +0.2972526f, -0.1758135f, -0.0432224f, -0.2935383f, +0.1302118f, -0.1207426f,
  +0.1635478f, -0.1712399f, +0.5421379f, -0.0209659f, -0.0651188f, -0.2133471f, -0.2174255f, -0.1529997f,
  -0.1556881f, +0.0708709f, +0.2060357f, +0.1045334f, -0.2637210f, -0.1637761f, +0.0905681f, +0.5399158f,
  +0.0471558f, +0.0187986f, +0.0890498f, +0.2893618f, +0.1654208f, +0.0880829f, -0.0262222f, +0.3440853f,
  +0.0343677f, -0.0254773f, -0.0243733f, +0.1041400f, -0.2056491f, -0.2078812f, +0.1735935f, +0.1716787f,
  +0.1137614f, +0.3466440f, -0.2215295f, +0.0526211f, +0.0630426f, -0.0038810f, -0.0095634f, -0.2602606f,
  +0.0964588f, +0.2951150f, -0.0458536f, +0.2116010f, +0.2302932f, +0.2346304f, +0.1883086f, -0.0766403f,
  -0.0880914f, -0.0654597f, -0.0557838f, +0.0831332f, -0.0164875f, +0.0000607f, -0.2142187f, -0.3385508f,
  +0.4373580f, -0.1756119f, -0.0138504f, +0.1366649f, -0.0496984f, -0.0878767f, +0.3842992f, +0.2025249f,
  +0.6821191f, +0.1262781f, +0.4248234f, -0.0362504f, +0.3511646f, +0.0267471f, +0.2005219f, +0.2164211f,
  +0.1123739f, +0.1836556f, +0.4628346f, +0.0768747f, -0.0030130f, +0.0254760f, +0.1600672f, +0.0269760f,
  +0.0546053f, +0.0368708f, +0.0531003f, +0.1210079f, -0.1094672f, +0.2100640f, +0.3522674f, +0.0491369f,
  -0.1846223f, +0.0859212f, -0.2062983f, +0.2241581f, +0.2739869f, -0.0452279f, +0.0642360f, -0.0126109f,
  +0.1245385f, +0.0982422f, +0.1362318f, +0.2606294f, +0.0153442f, +0.1787612f, +0.0675392f, -0.0899654f,
  +0.2517734f, -0.1369837f, -0.1329273f, -0.2432554f, +0.1700951f, +0.1112385f, -0.2818184f, -0.0457002f,
  +0.0329688f, +0.0802886f, -0.0297508f, -0.0279662f, -0.1481451f, -0.1161425f, +0.0319699f, +0.1520043f,
  +0.1703960f, -0.0600978f, +0.1986251f, +0.3827095f, -0.0682887f, -0.0588458f, -0.1495071f, -0.0795996f,
  +0.0043076f, +0.0462716f, -0.1474444f, +0.0636052f, +0.1035186f, +0.1050034f, +0.1734626f, +0.1980033f,
  +0.0960034f, -0.2457240f, +0.0242091f, +0.3004408f, +0.0584942f, -0.0142085f, -0.2712636f, +0.1631843f,
  -0.3114944f, -0.2092046f, -0.2776150f, +0.2612203f, -0.1803747f, +0.0172488f, +0.0966720f, +0.0583578f
);

const float biases[4] = float[4](
  +0.0724823f, -0.0624065f, +0.0119099f, -0.0189793f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer27 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0778633f, +0.1338727f, +0.0376235f, +0.1422267f, -0.0070940f, -0.1554627f, -0.0920785f, -0.1807990f,
  +0.0250114f, +0.0392052f, +0.1968839f, -0.0243403f, +0.0205920f, +0.1620131f, +0.0618736f, -0.0058614f,
  +0.0686837f, +0.1694945f, -0.0869613f, +0.0802715f, +0.0385826f, -0.0691555f, +0.0349048f, -0.2413481f,
  +0.0791680f, -0.2264547f, +0.2354394f, +0.2672337f, -0.5159094f, -0.2380123f, -0.3343841f, +0.1077842f,
  -0.0969356f, -0.1398638f, +0.2145306f, +0.2295652f, -0.4104905f, +0.1952073f, +0.2227464f, +0.3005606f,
  +0.0413344f, +0.3775418f, +0.3407735f, +0.0474235f, -0.4091957f, +0.1245991f, -0.1151930f, -0.0822948f,
  +0.1025611f, -0.2126862f, -0.1778656f, +0.1405479f, -0.0426702f, -0.8022846f, -0.4296688f, +0.4287178f,
  +0.1608690f, -0.5886809f, +0.0962575f, -0.0941007f, +0.4778755f, -0.6326980f, -0.6202937f, +0.1841379f,
  -0.3026309f, -0.3891525f, -0.1170275f, +0.0637837f, +0.1928547f, -0.2738968f, -0.1241759f, +0.2520574f,
  +0.1962163f, -0.2630244f, +0.1659315f, -0.0274068f, -0.5410385f, -0.1983134f, -0.0571785f, +0.0054245f,
  +0.1642016f, -0.0176662f, -0.0203578f, +0.2716134f, -0.0568241f, -0.4005157f, +0.2220594f, +0.0961521f,
  -0.0046358f, +0.0037423f, -0.0732916f, +0.0378004f, +0.0795889f, -0.0788673f, +0.0573621f, +0.0508142f,
  +0.1229512f, -0.0154990f, -0.3764548f, +0.2589205f, -0.2091629f, -0.1680405f, -0.3082021f, -0.2358260f,
  +0.0604323f, +0.1537636f, -1.0229594f, +0.5480778f, +0.1371567f, -0.3626513f, +0.4072120f, +0.1233177f,
  +0.0515021f, +0.0740075f, +0.1390694f, +0.0666989f, -0.1516872f, -0.2701318f, +0.3532545f, -0.0474609f,
  -0.3441423f, -0.0224210f, -0.0774859f, +0.0663392f, -0.0196610f, -0.4037024f, -0.2655513f, -0.2410217f,
  -0.2821552f, +0.1421111f, -1.1156783f, +0.0043612f, +0.0240128f, -0.2586360f, -0.3550519f, -0.2676359f,
  -0.0007510f, -0.0849512f, -0.1068607f, -0.1685546f, -0.2132004f, -0.0154991f, -0.0634723f, +0.0425774f,
  -0.0896374f, +0.1947822f, -0.0892168f, +0.0454324f, +0.2537968f, -0.0465690f, -0.0572331f, +0.0889099f,
  +0.1490753f, +0.0511956f, +0.1302870f, -0.2053345f, +0.4406215f, -0.2586409f, -0.2089739f, -0.0367121f,
  -0.1637975f, +0.0251891f, +0.0950985f, -0.1136338f, +0.1548738f, +0.1339429f, +0.1970246f, +0.0687865f,
  +0.0916013f, +0.1514643f, +0.1116435f, -0.0904935f, +0.1541781f, +0.0356743f, +0.0723554f, -0.1421032f,
  +0.0302167f, +0.1268804f, +0.3350556f, -0.3088519f, +0.1164651f, -0.1525982f, -0.1990927f, -0.1514528f,
  -0.0356606f, -0.2613363f, -0.1245006f, +0.0342853f, +0.0696540f, +0.6189575f, +0.0712187f, -0.2343253f,
  +0.0068846f, +0.1069043f, -0.0608676f, +0.0442064f, +0.1000251f, -0.2229028f, -0.0769104f, +0.0536005f,
  +0.1498924f, -0.0185440f, +0.0225851f, +0.1327087f, +0.2256233f, +0.0022254f, +0.1425479f, -0.1648157f,
  -0.1078384f, +0.0500054f, -0.0861653f, +0.0328669f, +0.1147022f, +0.1625674f, +0.0576720f, +0.0688557f,
  -0.0438540f, -0.0314861f, -0.0262482f, -0.0493293f, +0.1386564f, -0.1642568f, +0.0486950f, -0.0083373f,
  +0.0672746f, -0.2613851f, +0.2711208f, +0.2235995f, +0.3215732f, -0.1751201f, +0.0666184f, +0.0009984f,
  -0.0230594f, +0.0340094f, -0.0709827f, +0.0133243f, -0.0798718f, -0.1134039f, -0.1062159f, +0.0814319f,
  +0.0381979f, +0.1510988f, -0.1515805f, -0.0063941f, +0.1045801f, -0.0659894f, -0.1531092f, -0.0090221f,
  +0.1938972f, -0.0158306f, +0.1258654f, +0.4315927f, -0.2203931f, -0.2829956f, +0.3107837f, +0.1593297f,
  -0.1573244f, +0.0577190f, -0.0181709f, +0.1069976f, +0.3593868f, -0.0392181f, +0.0625492f, -0.1167161f,
  +0.0108807f, +0.1936453f, +0.1104779f, -0.0535423f, +0.1122658f, +0.1782036f, +0.1415287f, -0.0677722f,
  +0.0251310f, +0.3250382f, -0.3851294f, +0.1482073f, +0.2417747f, -0.4019134f, -0.2435384f, -0.2167361f,
  -0.1792528f, +0.0123979f, -0.2725449f, +0.2471894f, -0.0584783f, -0.3011379f, +0.1186864f, +0.2111933f
);

const float biases[4] = float[4](
  +0.0415852f, +0.0215263f, +0.0579471f, +0.0579593f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer27 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1388078f, -0.0660879f, +0.1741207f, +0.2597100f, -0.0895051f, +0.0762881f, -0.0942163f, +0.1288385f,
  +0.1849930f, -0.0520568f, +0.2642981f, -0.5537895f, +0.2383524f, -0.0043956f, +0.4019948f, +0.0187554f,
  -0.0573796f, +0.0034181f, -0.1698333f, +0.0791832f, -0.2243179f, +0.2367040f, -0.2964878f, -0.0295189f,
  +0.0739925f, -0.0608923f, -0.0075956f, -0.0589871f, -0.0384607f, -0.2511604f, -0.0240128f, +0.0723926f,
  -0.0555071f, +0.1981603f, -0.7099290f, +0.3328041f, -0.0927211f, -1.0116260f, -0.4545095f, -0.3480933f,
  +0.1179294f, -0.2583353f, -0.0404593f, +0.0134071f, +0.2672842f, +0.0637849f, +0.2923980f, +0.0861633f,
  -0.1359826f, +0.1171128f, -0.0257698f, -0.1732873f, +0.1669923f, +0.0879815f, +0.0247274f, -0.0995143f,
  +0.0413837f, -0.0796353f, +0.2551379f, +0.1820324f, -0.0940284f, +0.2989354f, -0.0553568f, +0.2544406f,
  -0.2004723f, -0.1495557f, +0.1408567f, +0.0036391f, -0.1363313f, +0.0203382f, -0.0682515f, +0.0881108f,
  +0.1009900f, -0.0690317f, +0.0410345f, -0.0461123f, +0.1262309f, +0.4693112f, +0.1242398f, -0.0206891f,
  -0.2274275f, +0.1132720f, +0.1099717f, -0.5342126f, -0.0004956f, -0.1773611f, -0.0741612f, -0.0097669f,
  -0.0702165f, -0.1745758f, +0.1739125f, -0.2563360f, +0.3072292f, +0.2576635f, +0.0739900f, +0.0460973f,
  -0.0542972f, -0.2004726f, +0.0806984f, +0.2825061f, +0.2245780f, -0.1188231f, +0.2651058f, -0.2260976f,
  +0.4336114f, -0.4135811f, -0.2400682f, +0.1827283f, +0.1172753f, +0.0460489f, -0.1637898f, +0.2069868f,
  +0.1546156f, -0.2918317f, -0.2135919f, +0.3994462f, +0.1508041f, +0.2883142f, +0.1652318f, +0.1436947f,
  +0.0472628f, -0.1564721f, -0.2105063f, -0.3337075f, +0.3345241f, +0.2863553f, +0.0823043f, +0.1475584f,
  +0.3458394f, +0.0108975f, +0.1092161f, -0.2985814f, +0.2673912f, +0.0210604f, -0.2782579f, +0.1684849f,
  -0.2126869f, -0.1862039f, -0.0292199f, -0.3455144f, -0.1747760f, +0.3633531f, -0.1458910f, +0.0278908f,
  +0.0053446f, -0.0042707f, +0.1613854f, -0.0005864f, -0.0597761f, +0.1845513f, -0.2712550f, +0.0227727f,
  -0.3989876f, -0.1408354f, +0.0188134f, -0.3000053f, +0.0635890f, +0.1511161f, -0.0524084f, +0.1553648f,
  +0.1601987f, -0.1396099f, -0.1833182f, -0.1168302f, -0.1586900f, -0.2420971f, -0.2633519f, +0.0002586f,
  +0.0323082f, +0.1219762f, +0.1402431f, +0.0235389f, +0.0549217f, +0.3831939f, -0.1027335f, -0.0148333f,
  -0.4563663f, +0.1293018f, +0.1537259f, -0.2527334f, -0.4281873f, +0.1340298f, -0.1114134f, +0.3075999f,
  +0.0545612f, +0.0674501f, +0.3771296f, -0.1956108f, -0.2842659f, -0.1050235f, -0.4381487f, +0.2584258f,
  +0.2978569f, -0.1783453f, +0.2305305f, +0.1529807f, +0.0414148f, +0.3021418f, -0.0501389f, +0.1030116f,
  +0.1397946f, -0.0836064f, -0.2526392f, -0.3158235f, -0.6117064f, +0.0976719f, +0.5018600f, +0.0101722f,
  +0.2826686f, +0.0820946f, +0.0957255f, -0.2394966f, -0.1539997f, +0.2679250f, -0.0532889f, +0.1534750f,
  +0.2120083f, -0.0249854f, +0.1522110f, -0.0203585f, -0.1664772f, -0.0913513f, -0.0347299f, -0.1738422f,
  -0.1767403f, -0.1780474f, -0.4225847f, +0.0979645f, +0.0445145f, -0.0823707f, +0.1293781f, +0.0263728f,
  -0.0657422f, -0.1276158f, +0.0980646f, +0.0459677f, +0.2104802f, +0.1185504f, -0.1565327f, -0.0464642f,
  -0.1951723f, -0.1462997f, +0.1692686f, -0.2926176f, -0.1799163f, -0.0086368f, +0.2329089f, -0.2515552f,
  -0.1753598f, -0.0801900f, -0.0813443f, +0.1679445f, -0.2089586f, -0.0800426f, +0.3134186f, -0.0436547f,
  +0.1905138f, +0.1000741f, -0.2115766f, +0.0192872f, +0.1270593f, +0.0451089f, -0.0531887f, -0.1052858f,
  +0.0759677f, +0.1644128f, -0.0990989f, -0.2958398f, +0.0648288f, -0.2187869f, -0.1266825f, +0.0394323f,
  -0.3204175f, -0.2305131f, -0.1777035f, +0.1955948f, +0.3475942f, -0.2245724f, +0.0986673f, +0.0808758f,
  -0.0030119f, -0.1011354f, +0.0169767f, +0.0635892f, +0.2604896f, -0.1192575f, +0.1322284f, +0.0189778f
);

const float biases[4] = float[4](
  -0.0356774f, -0.0050039f, -0.0906370f, +0.0549560f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer28 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2637822f, +0.0068057f, +0.1387839f, -0.1218455f, -0.2183583f, -0.1266755f, -0.1684086f, -0.2060145f,
  -0.3184828f, -0.0810434f, +0.0619257f, -0.1585009f, -0.2371544f, +0.1997207f, +0.0645486f, -0.1810478f,
  -0.0248554f, -0.0167289f, +0.1217403f, -0.0576811f, -0.2164947f, -0.3933871f, -0.1804376f, +0.1273247f,
  +0.0261140f, +0.1597337f, +0.1680561f, +0.0648410f, +0.0507353f, +0.0718997f, +0.1857999f, -0.2001920f,
  +0.3739592f, +0.1354878f, +0.0382555f, +0.0776137f, -0.3076870f, -0.4121341f, +0.0439270f, +0.1694869f,
  -0.3345936f, -0.1118962f, +0.0025408f, -0.0869849f, -0.5142186f, -0.0557641f, +0.0776195f, +0.0536357f,
  -0.2098982f, -0.0510308f, +0.1999297f, +0.1450400f, -0.1394060f, +0.2272991f, +0.0108789f, +0.0598008f,
  -0.0581767f, +0.1714779f, +0.2399225f, +0.0383928f, -0.0322405f, +0.1415377f, +0.2118027f, +0.0168750f,
  +0.0595630f, +0.3171495f, -0.1178864f, +0.0054132f, -0.7759275f, -0.0430931f, +0.0096526f, -0.1841558f,
  -0.2935935f, -0.1717172f, -0.2649958f, +0.2024524f, -0.3323034f, -0.3145197f, +0.1335617f, +0.1821631f,
  -0.1679742f, +0.2899374f, +0.1999663f, +0.0682846f, -0.1577126f, +0.4270007f, +0.4854334f, +0.3924193f,
  -0.3215416f, +0.1074280f, -0.0446836f, -0.2902053f, +0.2803760f, -0.1658006f, +0.3030510f, -0.1123485f,
  -0.0447735f, -0.2229174f, -0.2416048f, -0.2166798f, +0.2760202f, +0.0961750f, -0.1237076f, +0.1636632f,
  +0.2733406f, -0.1917908f, -0.2463564f, -0.1584013f, -0.3385453f, +0.4112467f, -0.3961229f, -0.0069338f,
  -0.2006692f, -0.0368894f, -0.3194849f, -0.3577114f, -0.4702193f, -0.0518414f, +0.1713233f, -0.1120327f,
  -0.1649591f, +0.0132328f, -0.0762290f, -0.0828653f, +0.2129299f, -0.0694634f, +0.0862373f, +0.2062406f,
  +0.0592542f, +0.0299673f, -0.1109529f, -0.2026522f, +0.0838115f, +0.0240102f, -0.2473164f, +0.4245749f,
  -0.1081330f, -0.4008312f, -0.1923436f, +0.1149810f, +0.2398239f, -0.1009125f, +0.0435824f, +0.0800252f,
  -0.6780750f, -0.1392979f, +0.2187723f, -0.1181343f, -0.1650128f, +0.4734539f, -0.1103193f, -0.2995717f,
  -0.1537497f, +0.3495639f, +0.0028936f, +0.2131271f, -0.1962903f, +0.0200067f, +0.2572561f, -0.0544160f,
  +0.0875671f, -0.3145464f, +0.0567805f, -0.1784666f, -0.3456464f, +0.1358779f, -0.2439754f, +0.0300478f,
  +0.1686937f, +0.1050788f, -0.3695673f, -0.1007445f, -0.2145085f, +0.1016943f, -0.3344325f, -0.1276622f,
  -0.4915931f, +0.3140768f, +0.0221198f, +0.1488820f, -0.0417257f, -0.5490575f, -0.0360967f, -0.1054310f,
  +0.1063722f, +0.0244171f, +0.0853824f, -0.0263819f, -0.2660224f, -0.2428138f, -0.0898942f, +0.2634434f,
  -0.0763227f, +0.1268629f, -0.2872536f, +0.0226525f, -0.1780393f, -0.2101440f, +0.1755894f, -0.1447224f,
  -0.2600164f, -0.0240350f, -0.1423065f, -0.1217129f, -0.0544377f, +0.1353767f, +0.1972044f, +0.0331320f,
  +0.0248859f, -0.1663976f, +0.1123761f, +0.0037462f, -0.2414536f, +0.0091971f, +0.1225146f, -0.1499062f,
  -0.2687152f, -0.1730967f, +0.0815092f, -0.0696258f, +0.2049460f, -0.0976723f, +0.2114225f, +0.0614513f,
  -0.2404759f, +0.3049761f, -0.0013514f, -0.1338581f, +0.2468425f, +0.1744659f, +0.2565372f, +0.1385663f,
  -0.1360898f, -0.0361328f, +0.0027154f, -0.4087240f, +0.1565778f, +0.1163811f, +0.0194112f, -0.1197521f,
  +0.2590821f, -0.0127506f, -0.0119988f, -0.2205843f, +0.2693350f, +0.2639968f, +0.0842116f, +0.1009031f,
  -0.0943005f, +0.2081338f, +0.1900901f, -0.1006972f, +0.2240794f, -0.0362573f, -0.0275225f, -0.3006994f,
  +0.1323934f, +0.5947481f, -0.1203316f, -0.0292658f, +0.2481032f, -0.3129786f, +0.1117348f, -0.1625920f,
  -0.0849577f, -0.0680508f, -0.1008264f, -0.0954586f, +0.3686474f, -0.1109617f, +0.3312064f, +0.1236649f,
  -0.1394718f, -0.1043909f, +0.1632129f, -0.1036230f, +0.1596397f, -0.1201451f, +0.1555310f, -0.0421079f,
  -0.0782559f, +0.0741888f, -0.1607241f, -0.2300194f, +0.6013712f, +0.0556470f, +0.2560659f, +0.1109256f
);

const float biases[4] = float[4](
  +0.0150262f, +0.0689515f, +0.0314263f, -0.0033030f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer28 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1721549f, +0.1285999f, +0.1366332f, -0.0734078f, +0.2716195f, +0.0949263f, -0.0042442f, -0.0134476f,
  +0.0043444f, -0.1467717f, -0.1438790f, -0.4899547f, +0.1592378f, -0.1357732f, +0.2254135f, -0.1843295f,
  -0.1515985f, -0.0570238f, -0.0583969f, -0.0373218f, +0.3755785f, -0.0958840f, +0.2862428f, -0.5039400f,
  -0.4408424f, +0.2486120f, +0.2100891f, -0.4530805f, +0.5943856f, -0.1557757f, +0.1443513f, -0.0845757f,
  +0.8201637f, +0.6907325f, +0.1472197f, +0.2676095f, +0.4614275f, +0.2587768f, +0.1106166f, -0.0241895f,
  +0.0035265f, -0.0985199f, -0.0885401f, -0.0343545f, +0.5385081f, +0.0114977f, -0.4422240f, +0.0942556f,
  -0.0397587f, -0.0473694f, +0.0855861f, +0.2740890f, +0.0588210f, -0.1321307f, -0.1468984f, -0.2205823f,
  +0.0953594f, -0.0657352f, -0.0441614f, -0.1026337f, +0.6972933f, +0.0797624f, +0.1644934f, +0.0644701f,
  -0.1344258f, -0.0004255f, +0.1918965f, -0.2026313f, +0.8286642f, +0.0542154f, -0.1492990f, +0.1048332f,
  +0.0203416f, -0.0199646f, +0.1788729f, -0.1434486f, -0.1552750f, +0.1875634f, -0.2938098f, -0.1964381f,
  -0.2710470f, -0.3261669f, -0.1628242f, -0.1368331f, +0.1234433f, +0.1834060f, -0.2453869f, -0.0036066f,
  +0.1600744f, +0.5273978f, -0.0589241f, +0.1173808f, -0.0745058f, +0.2242048f, +0.4686569f, -0.2161366f,
  -0.0461314f, +0.0202640f, -0.3125363f, +0.0915043f, +0.2298598f, -0.2313386f, +0.2502010f, -0.1177358f,
  +0.1376645f, -0.3761912f, +0.0726302f, +0.0427429f, -0.0690287f, -0.2803133f, -0.1214223f, +0.1240769f,
  +0.0951780f, -0.1739770f, +0.0271820f, -0.5278176f, +0.1510435f, +0.2294904f, +0.3682323f, +0.2173131f,
  -0.3385443f, -0.1006743f, -0.3239850f, -0.2788676f, -0.0654698f, +0.2388548f, +0.0801501f, +0.0256456f,
  -0.4426472f, -0.0205972f, -0.1719920f, -0.1845898f, -0.1463196f, +0.0814841f, +0.3709636f, +0.0660561f,
  -0.1377478f, +0.3059845f, -0.0289711f, -0.2979227f, -0.0832314f, +0.2645517f, +0.3077018f, +0.4456478f,
  +0.0229138f, +0.0454403f, -0.0795195f, +0.1194936f, +0.1878326f, +0.1586015f, +0.1981573f, +0.0785179f,
  +0.1927838f, +0.2476700f, -0.3435451f, +0.1901728f, +0.1677846f, +0.1761156f, -0.1190168f, -0.0626689f,
  +0.0339351f, -0.0924170f, -0.1949851f, +0.0215421f, +0.2394499f, +0.3086159f, -0.0033613f, -0.1909685f,
  +0.4371904f, -0.0556064f, -0.0019604f, -0.0459598f, +0.0050063f, +0.6105703f, +0.1870910f, +0.1722065f,
  +0.6155747f, +0.0480559f, -0.0260989f, -0.1153987f, +0.3258494f, +0.0198236f, -0.1968796f, +0.2119466f,
  +0.3652470f, -0.0824381f, -0.0631018f, -0.1626106f, +0.6012069f, +0.0819161f, -0.2927125f, -0.1821491f,
  -0.1938529f, +0.1529951f, -0.1703146f, -0.1964118f, +0.1423023f, +0.0072989f, +0.3323846f, +0.2564305f,
  -0.3575584f, +0.1009351f, +0.1811201f, -0.2888390f, +0.5161294f, -0.2358400f, +0.1441693f, -0.0037308f,
  +0.0708964f, -0.0324851f, +0.1054141f, -0.1796135f, +0.9644471f, +0.0521530f, +0.1887356f, +0.0894629f,
  -0.2567851f, +0.0916981f, +0.0608607f, -0.1848313f, +0.3790166f, +0.2252657f, -0.1555401f, -0.0506944f,
  -0.6068351f, +0.1100307f, -0.0573244f, +0.1386206f, +0.3485885f, +0.1215534f, +0.3971387f, +0.0230118f,
  +0.0593781f, +0.1505110f, +0.1042284f, +0.0680195f, +0.0677699f, +0.1056793f, +0.2682327f, -0.0540239f,
  +0.3926918f, -0.1763915f, +0.0871571f, +0.1367723f, +0.3191481f, +0.2386774f, -0.1783875f, +0.0200979f,
  -0.0925334f, -0.4184200f, -0.0224766f, +0.2049452f, +0.0430951f, -0.1032847f, -0.0689935f, -0.1096939f,
  +0.0290772f, +0.0748430f, -0.0401034f, -0.0564068f, +0.1541017f, +0.0924929f, +0.1000827f, +0.1489873f,
  +0.1293695f, -0.0712140f, -0.0177920f, -0.1838867f, +0.1016025f, -0.1921430f, -0.0030704f, -0.0306688f,
  -0.0020600f, -0.1503095f, -0.0003443f, +0.0286164f, +0.4376011f, -0.0507600f, -0.1450770f, -0.1143361f,
  -0.1680216f, +0.1252818f, -0.3103500f, -0.0495989f, +0.5125760f, +0.0288220f, +0.0726859f, -0.0154244f
);

const float biases[4] = float[4](
  +0.0208270f, +0.0013264f, +0.0218485f, +0.0039868f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer29 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2681979f, +0.2378789f, -0.0690068f, +0.1194517f, -0.1961821f, +0.2347734f, -0.1926643f, +0.0541846f,
  -0.0210738f, +0.1913607f, +0.2195516f, +0.1459578f, -0.0013278f, +0.2168971f, +0.3496553f, +0.1300351f,
  -0.0078717f, -0.0062730f, +0.0352581f, +0.0088337f, -0.1381957f, +0.0339460f, +0.0039930f, +0.0232476f,
  -0.0817518f, +0.0747243f, -0.3565284f, -0.1739062f, -0.0553453f, -0.3400904f, -0.1182162f, +0.0143123f,
  +0.1920396f, +0.1768699f, -0.2967382f, +0.2868614f, -0.2308554f, +0.2010053f, -0.0906286f, +0.3325176f,
  -0.0005819f, +0.1402183f, +0.0915549f, -0.0933695f, +0.0000135f, -0.0011890f, +0.1900669f, +0.2557446f,
  -0.0024288f, +0.1470024f, -0.3654031f, -0.4237882f, +0.0118931f, -0.2480999f, -0.1287460f, -0.2738261f,
  -0.0893426f, +0.1646629f, -0.4006165f, +0.3684728f, -0.2873193f, +0.4682582f, -0.0314244f, +0.2076712f,
  -0.4772891f, -0.1418977f, +0.1392661f, +0.0798603f, -0.1299244f, -0.2523234f, +0.3974253f, +0.1275468f,
  -0.2835177f, +0.2370048f, +0.1640510f, +0.6552727f, -0.3753974f, -0.2247306f, -0.2680396f, +0.2086391f,
  -0.2089736f, -0.1230590f, +0.0005177f, -0.2682275f, +0.8016028f, +0.0095343f, +0.2382068f, +0.3972884f,
  +0.1073999f, -0.0808497f, -0.2034703f, -0.1562276f, +0.0489273f, +0.0813005f, +0.1168587f, +0.1373577f,
  +0.1834930f, -0.2916929f, +0.1565308f, +0.0935771f, +0.1255492f, +1.1144923f, +0.2069881f, +0.3401249f,
  -0.0322116f, +0.0206717f, +0.4443538f, +0.1611003f, -0.4317472f, -0.4406617f, +0.1448279f, -0.0466233f,
  +0.0760624f, +0.1528773f, -0.2622155f, +0.1882555f, +0.0446510f, -0.0606195f, -0.1442851f, -0.0945733f,
  +0.1576232f, -0.1708364f, -0.4335605f, -0.2763826f, +0.3603469f, -0.1888198f, +0.0153857f, -0.1661646f,
  -0.0316791f, +0.1592897f, -0.4524063f, -0.1885217f, -0.0936727f, +0.0830671f, -0.0953044f, -0.0267020f,
  +0.1087541f, +0.0755617f, -0.0115009f, +0.1589988f, +0.0299190f, -0.0018334f, +0.0195991f, +0.1963612f,
  +0.1835281f, -0.0666533f, +0.0503861f, +0.1151674f, +0.0929661f, -0.1456041f, +0.3247657f, +0.1268097f,
  +0.1317697f, +0.1471529f, -0.1211044f, -0.0671949f, -0.0900686f, +0.0382003f, -0.1912653f, -0.3549512f,
  -0.0974632f, +0.0579539f, +0.2508030f, +0.0341184f, +0.2313632f, +0.1087072f, -0.0849456f, -0.3032945f,
  -0.2690052f, -0.2572535f, +0.2421256f, +0.1133156f, +0.3755841f, -0.2163133f, +0.0305317f, +0.2267553f,
  -0.3416711f, +0.3243715f, +0.0420182f, +0.0949971f, +0.1369261f, -0.3082890f, -0.0040404f, -0.0102065f,
  +0.0891196f, +0.1987189f, +0.1196684f, +0.0571976f, -0.0185053f, +0.0526203f, +0.0205071f, -0.1551313f,
  +0.1788339f, +0.1618903f, -0.1160431f, -0.1388530f, +0.0820167f, +0.0645009f, +0.1719973f, +0.2238018f,
  +0.1053367f, +0.2201286f, +0.0611247f, +0.3982303f, +0.0263432f, -0.0740024f, -0.1270991f, +0.1263085f,
  -0.0937003f, +0.0847615f, +0.1115385f, +0.1119213f, -0.3763038f, +0.0233876f, +0.0672528f, +0.0486155f,
  -0.0954109f, +0.1824716f, +0.0578726f, +0.0016483f, -0.2246146f, -0.2897725f, -0.2179087f, -0.0305457f,
  -0.1613353f, +0.0379701f, +0.3099834f, +0.3823855f, -0.3299768f, +0.1296592f, +0.0384267f, -0.0479098f,
  +0.2393192f, +0.1793004f, -0.1158262f, +0.1541936f, +0.0086147f, -0.2739234f, -0.0065650f, +0.0179133f,
  -0.0777498f, -0.0636909f, +0.1190194f, +0.1802583f, +0.2188811f, +0.0235981f, -0.1246465f, -0.0875007f,
  -0.3548676f, +0.1104223f, +0.4171119f, -0.1021881f, -0.0501794f, -0.1683480f, +0.1513821f, -0.0589110f,
  -0.0001686f, +0.0888088f, -0.6488039f, -0.0099673f, +0.0613165f, -0.0447268f, +0.0952561f, -0.1123376f,
  +0.1149400f, -0.0067041f, +0.1047435f, -0.0444577f, -0.0438433f, +0.0986693f, +0.0417379f, -0.0939766f,
  +0.3145265f, -0.1453464f, +0.1610299f, +0.2124973f, -0.1194390f, -0.3139017f, +0.1489316f, +0.1460474f,
  -0.1649098f, +0.0967003f, +0.0961764f, +0.1682528f, -0.1615143f, +0.1771455f, -0.2660215f, +0.0166573f
);

const float biases[4] = float[4](
  +0.0454775f, -0.0262078f, +0.0907591f, +0.0554167f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer29 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0151589f, +0.0942110f, -0.1356274f, +0.1205187f, +0.5770076f, -0.1006249f, +0.1539998f, -0.1327442f,
  -0.2756945f, +0.1779211f, -0.3155009f, +0.1498610f, -0.0039424f, -0.0411661f, -0.0359064f, -0.0674406f,
  +0.0795143f, -0.1669923f, +0.0770091f, +0.0961984f, -0.1710220f, +0.1015639f, -0.0372945f, +0.1519762f,
  -0.2959462f, +0.0364490f, +0.0541732f, -0.1570027f, +0.1824875f, -0.2635272f, +0.0869185f, -0.2622787f,
  -0.0984069f, +0.0681742f, -0.0988775f, -0.3105095f, -0.0381364f, -0.1482051f, -0.2563420f, +0.0029979f,
  +0.3018084f, -0.0742812f, +0.2034948f, -0.1961041f, +0.2918551f, -0.0536415f, -0.0412590f, -0.4318155f,
  -0.0459225f, -0.2184761f, +0.0739394f, -0.3035635f, +0.2003229f, -0.0238635f, +0.2214134f, -0.2415742f,
  -0.1744478f, +0.1413093f, -0.2191174f, -0.1312019f, +0.2041528f, +0.0008915f, +0.1259188f, +0.0060904f,
  -0.1000607f, -0.1178920f, -0.0827538f, +0.1212546f, -0.0017718f, -0.1546127f, +0.2177311f, +0.0323650f,
  -0.0792941f, +0.0364417f, -0.1373600f, -0.0201118f, +0.1319764f, -0.3033479f, -0.2310012f, -0.0161904f,
  -0.0567995f, -0.0997112f, -0.0764463f, +0.1541588f, -0.2503002f, +0.0416430f, -0.2844643f, -0.0185010f,
  -0.2637713f, -0.2385314f, -0.0204319f, +0.0179199f, -0.0953782f, -0.0382874f, +0.2215193f, +0.1760650f,
  +0.0246343f, +0.1680649f, +0.2254505f, +0.1253506f, -0.0276719f, -0.1795217f, +0.0255731f, -0.1627208f,
  -0.1350114f, +0.3060127f, +0.2930681f, -0.1328889f, -0.2223190f, +0.3624514f, -0.1911726f, +0.0060019f,
  -0.0802431f, +0.0170275f, +0.2327131f, -0.2393067f, -0.6025137f, -0.0162969f, -0.1891186f, -0.1137800f,
  -0.0207648f, -0.0120829f, +0.2851397f, +0.2066905f, -0.0249201f, +0.0664370f, +0.0750378f, +0.0335080f,
  +0.1072463f, +0.1067863f, +0.0230378f, +0.1622015f, -0.1565432f, -0.0279577f, -0.0052230f, -0.1976335f,
  +0.1086062f, +0.0784130f, +0.2148710f, +0.0429326f, -0.1750053f, -0.0300439f, +0.1080672f, +0.1249772f,
  -0.0342525f, -0.0716924f, +0.0272194f, -0.1079636f, +0.0874094f, -0.1806707f, -0.0024902f, +0.1007596f,
  +0.1016848f, +0.0792821f, -0.0025364f, +0.1814476f, -0.0358572f, -0.0373194f, +0.2725535f, +0.0375889f,
  +0.0343217f, -0.0355748f, -0.1343252f, +0.0590345f, +0.0368527f, -0.0032780f, +0.1120902f, -0.0044731f,
  +0.2816565f, +0.1772917f, -0.1142964f, -0.1909906f, +0.4508127f, -0.2863430f, +0.1930547f, +0.0938823f,
  -0.2533589f, +0.1758620f, -0.3504369f, +0.4212970f, +0.7492092f, -0.6900638f, +0.4300430f, +0.1075372f,
  -0.2206763f, +0.0228967f, -0.1876589f, -0.0042342f, +0.0711584f, -0.0850087f, +0.1342666f, +0.2507015f,
  +0.0535179f, -0.1751563f, +0.0053304f, -0.1590719f, +0.4709036f, -0.2846298f, +0.0423553f, -0.0801810f,
  +0.2546227f, +0.2225824f, -0.4376692f, +0.1170260f, +1.1131287f, -0.2500519f, -0.5891121f, -0.4162597f,
  -0.1036444f, -0.0403884f, -0.2218407f, +0.0065553f, +0.0380629f, -0.0443467f, +0.1803578f, +0.0135021f,
  +0.0590374f, +0.0007507f, +0.0544577f, +0.2063595f, -0.0317429f, +0.0822331f, -0.0426472f, -0.0278519f,
  -0.0062677f, -0.0334361f, -0.0256613f, +0.0193314f, -0.1813423f, +0.1445744f, -0.0209294f, +0.0547118f,
  +0.0679180f, -0.0845446f, +0.0685402f, -0.0472049f, -0.2328301f, +0.1129293f, +0.0000246f, +0.0454020f,
  -0.1633632f, -0.1590388f, +0.1576151f, +0.3495535f, +0.0170713f, +0.0275664f, +0.0581474f, -0.0121622f,
  -0.3096911f, -0.2349869f, +0.3852883f, -0.0492503f, +0.0565773f, -0.0554067f, +0.1132162f, -0.0453308f,
  -0.4142505f, +0.0745601f, -0.0589243f, -0.0156302f, -0.2239799f, -0.2790276f, +0.1180793f, +0.1736677f,
  -0.1113781f, -0.1151868f, +0.1220654f, +0.1278691f, +0.2096125f, +0.1469474f, +0.1143569f, +0.0570732f,
  +0.0167994f, +0.0614092f, +0.1410389f, -0.0435896f, -0.0814215f, +0.1050962f, +0.1267335f, -0.1178178f,
  -0.2712836f, +0.1167908f, -0.4377541f, +0.2900544f, +0.0705481f, -0.0712831f, +0.2577622f, +0.0451523f
);

const float biases[4] = float[4](
  +0.0763310f, +0.0760930f, +0.0290059f, +0.1170752f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer30 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0490660f, -0.1525213f, -0.1530655f, +0.1398663f, -0.0318076f, -0.1418572f, +0.0577121f, -0.0593616f,
  -0.3167605f, -0.0445377f, -0.1296532f, -0.2227217f, +0.1905011f, -0.1651412f, -0.4574548f, +0.1122077f,
  -0.1326073f, +0.0697927f, +0.0845904f, -0.0059902f, +0.0530393f, -0.0502116f, +0.1888328f, -0.0085023f,
  -0.1913608f, -0.0504612f, -0.1493406f, -0.4104370f, -0.2972396f, +0.2406265f, -0.0923996f, +0.6811431f,
  -0.0958415f, +0.0839612f, +0.1582184f, -0.0287752f, -0.1473908f, +0.0043959f, +0.3267866f, +0.0427947f,
  +0.1440338f, +0.2455330f, +0.0190937f, +0.0106569f, -0.3433827f, -0.0429568f, +0.1773114f, -0.0499224f,
  +0.0519201f, -0.1306303f, -0.2377252f, -0.2048867f, +0.1183331f, +0.2859556f, +0.0822113f, +0.0242141f,
  +0.3654785f, +0.1377636f, -0.3522198f, +0.0898384f, +0.0550001f, +0.0975763f, +0.1899254f, -0.2420014f,
  -0.0341776f, +0.0462261f, -0.0962149f, +0.1902200f, +0.1494827f, +0.1532341f, +0.0542696f, +0.0380711f,
  +0.1533088f, -0.0167065f, -0.0964450f, +0.2398385f, -0.1038615f, -0.2949487f, -0.0739847f, -0.2150287f,
  +0.1796062f, +0.0101759f, -0.3237697f, -0.2899255f, -0.1832520f, -0.0157373f, +0.4847734f, -0.2250248f,
  -0.0138872f, -0.1685332f, -0.2622802f, +0.1160269f, -0.2267873f, -0.0482094f, +0.5299386f, +0.2573401f,
  +0.0438397f, -0.3428815f, -0.1733171f, +0.2464178f, -0.2457839f, +0.0949927f, -0.1781995f, -0.0292360f,
  +0.2118885f, -0.2823842f, -0.1973277f, -0.3592114f, -0.0889970f, -0.5842211f, +0.0929013f, -0.1618027f,
  +0.1948763f, +0.5224443f, +0.3970988f, +0.1195290f, -0.4872963f, -0.5125914f, -0.1028797f, +0.3520079f,
  +0.2323188f, +0.1266607f, -0.1750560f, +0.0296607f, -0.0882011f, +0.1244980f, -0.1358004f, +0.0211169f,
  +0.0319419f, +0.0658043f, +0.1668743f, -0.2042859f, +0.0537887f, -0.0145757f, +0.1655054f, +0.1806252f,
  -0.0265859f, +0.4830544f, -0.1394415f, -0.0251934f, -0.2200682f, -0.0400104f, +0.0230757f, +0.2465702f,
  -0.3269986f, +0.0992256f, -0.2673805f, +0.0088586f, -0.0295343f, -0.3094368f, -0.2408674f, -0.0268108f,
  +0.0038794f, +0.3909401f, +0.2703860f, -0.0648743f, +0.0857894f, +0.0211120f, +0.1702203f, -0.1686722f,
  -0.1148325f, +0.3264945f, +0.1174622f, +0.0567865f, +0.0241893f, +0.0452143f, -0.2429479f, +0.0378855f,
  -0.1569250f, -0.1419146f, +0.1474997f, +0.3149524f, +0.0200038f, +0.1404871f, +0.3248942f, +0.4227288f,
  -0.0496759f, +0.1306771f, +0.0810552f, +0.1525999f, +0.0240942f, +0.0610915f, +0.2122485f, -0.3402564f,
  +0.1716893f, -0.0454832f, +0.2255935f, +0.0087447f, -0.1041119f, +0.1337195f, +0.5117059f, -0.1946732f,
  +0.1840210f, +0.0287583f, +0.2107449f, +0.1597941f, -0.3440730f, +0.1674384f, +0.1593941f, +0.1454094f,
  +0.1465119f, +0.4144458f, +0.2374342f, -0.3558269f, +0.0430392f, +0.1038030f, -0.0137695f, +0.0921286f,
  +0.1680752f, -0.0381748f, -0.0528620f, +0.0822194f, -0.2272126f, -0.1854157f, +0.2585998f, -0.1180136f,
  -0.1895278f, +0.2839046f, +0.1153002f, -0.0624860f, -0.0184670f, -0.0317624f, -0.1806395f, -0.2275503f,
  -0.0948271f, +0.5125948f, -0.2109504f, -0.1797895f, -0.3104387f, +0.0044483f, +0.4768648f, -0.1653152f,
  +0.1060270f, +0.4835796f, -0.0109969f, -0.0462722f, +0.2007685f, -0.0690727f, +0.1710499f, +0.1256407f,
  +0.2249960f, +0.3135624f, -0.1804962f, +0.0709709f, +0.3436689f, +0.1068404f, -0.0661025f, -0.1273532f,
  -0.0661988f, +0.2717596f, +0.0588154f, -0.2652837f, -0.0872332f, +0.3847096f, +0.1850710f, +0.1405519f,
  +0.2116558f, +0.7396227f, -0.2644083f, +0.1155041f, -0.0403486f, +0.1515095f, +0.3022174f, -0.0800404f,
  +0.1971963f, +0.4305131f, -0.2549315f, +0.0108721f, +0.0428226f, +0.0127997f, -0.0461265f, -0.0305589f,
  +0.2572213f, -0.0190851f, +0.2588184f, -0.0632806f, -0.0150998f, +0.1846483f, +0.0987059f, -0.1016541f,
  +0.0341614f, +0.4217969f, +0.0632001f, +0.3594337f, +0.1564222f, +0.0832823f, +0.1799262f, -0.0427543f
);

const float biases[4] = float[4](
  +0.0150047f, +0.0353897f, +0.0150083f, -0.0249149f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer30 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1269900f, +0.2628789f, +0.2644290f, -0.0824325f, -0.0359256f, +0.1025730f, -0.0069995f, +0.0561897f,
  +0.2007933f, +0.3427453f, -0.0772821f, -0.0195970f, -0.1530007f, -0.1401897f, -0.6503035f, -0.0112421f,
  +0.2456757f, +0.5666116f, +0.0285181f, -0.2065870f, +0.0514690f, -0.2766452f, -0.2974456f, +0.0969609f,
  +0.1729082f, +0.5228947f, +0.1354858f, -0.1699419f, +0.1190602f, +0.2649920f, -0.1617731f, +0.3695685f,
  -0.0057355f, +0.1421874f, +0.1694338f, -0.1991636f, -0.1619106f, +0.0938906f, +0.2945801f, +0.0433922f,
  +0.0283508f, +0.6835872f, -0.3789266f, -0.1492397f, -0.0795780f, +0.0418370f, -0.2474947f, -0.1481681f,
  +0.2306992f, +0.9754548f, -0.0018997f, -0.1129757f, +0.1208627f, +0.1508833f, -0.1336825f, +0.2651133f,
  -0.3277332f, +0.5488312f, -0.0752683f, +0.3260632f, -0.1794656f, +0.2921540f, +0.4069616f, +0.1901415f,
  +0.1511350f, +0.2594512f, +0.1746655f, +0.0120685f, -0.0118239f, -0.0662496f, +0.2726288f, -0.0601396f,
  -0.1232385f, -0.3920711f, -0.3632922f, +0.1847512f, -0.4454883f, +0.0522152f, +0.0062356f, +0.4206817f,
  -0.4746325f, -0.1441649f, -0.0727194f, -0.0134054f, +0.1592585f, -0.1760230f, -0.3081749f, +0.1341082f,
  -0.1054822f, -0.2146462f, +0.1273376f, +0.1015273f, -0.0033150f, -0.1622474f, -0.5982199f, +0.2203197f,
  -0.2805768f, -0.3591138f, +0.1871770f, +0.2419269f, -0.1782816f, -0.0155336f, +0.2170191f, +0.2403851f,
  -0.3648966f, -0.3395932f, +0.2346747f, +0.2498073f, +0.3311013f, +0.0990380f, +0.1149451f, -0.2191189f,
  -0.0982280f, -0.2794395f, +0.2247640f, -0.0929620f, +0.1002289f, -0.2851109f, -0.5440905f, +0.0541177f,
  -0.1086466f, -0.5774661f, -0.1728413f, +0.1774081f, +0.0991187f, -0.0604037f, +0.1686416f, -0.1464128f,
  +0.1022275f, -0.2922883f, -0.3308627f, +0.0529485f, +0.2167727f, -0.0032831f, -0.0991384f, +0.0185398f,
  -0.3241793f, +0.4493145f, +0.3280170f, -0.0838217f, -0.1173214f, -0.1642720f, +0.1700603f, +0.5107119f,
  -0.0108979f, +0.0578658f, +0.0233157f, +0.0882853f, -0.1688987f, -0.0271130f, +0.0649934f, -0.0634503f,
  +0.3252765f, +0.0132141f, -0.0651467f, +0.0085179f, -0.3230392f, +0.0598670f, +0.0764087f, +0.0586591f,
  +0.0087297f, +0.0828827f, -0.1266547f, -0.0139554f, -0.1184816f, -0.1985549f, -0.0596458f, +0.1447057f,
  -0.0024612f, +0.1439973f, -0.0618940f, +0.1801274f, -0.2369559f, +0.0694806f, -0.1861749f, -0.1298217f,
  +0.3744553f, +0.2648244f, +0.0791879f, -0.0367709f, +0.1213214f, +0.0462338f, -0.4048378f, +0.1704953f,
  -0.1579785f, -0.0367833f, -0.2055533f, -0.0038313f, +0.2788211f, -0.0954867f, -0.3877790f, +0.0788700f,
  -0.1387854f, +0.3205979f, +0.0431557f, +0.2307349f, +0.0977126f, -0.1169735f, +0.1172312f, +0.2003054f,
  +0.1265278f, +0.0812607f, -0.0769616f, +0.1672251f, +0.0191455f, -0.1040957f, -0.1591922f, +0.2710929f,
  -0.0846740f, +0.1266237f, -0.0454788f, -0.0474567f, +0.0915948f, +0.2980348f, +0.1784237f, +0.1549975f,
  -0.0492564f, +0.3709955f, +0.1295369f, -0.2327575f, +0.1418136f, -0.3035302f, -0.0720727f, +0.0172118f,
  +0.0247835f, -0.0795787f, -0.0283964f, +0.0336017f, -0.1034234f, -0.0681851f, +0.1370033f, -0.1616227f,
  +0.1867401f, +0.0005290f, +0.3339635f, +0.0071016f, +0.1392318f, -0.0698418f, -0.2987441f, +0.1503171f,
  +0.1014606f, +0.2174356f, +0.0360826f, +0.0726921f, +0.3341430f, -0.2173784f, -0.0411125f, -0.0170569f,
  -0.3296842f, -0.0596240f, -0.0845240f, -0.2010245f, -0.2047247f, -0.0307442f, -0.3151779f, +0.0038289f,
  -0.1264753f, +0.0336441f, -0.0200505f, -0.1043778f, +0.0016093f, -0.0474770f, -0.1163276f, -0.3148164f,
  -0.1925472f, +0.0505009f, +0.3058776f, -0.0115883f, +0.0088947f, -0.1658617f, -0.0695748f, -0.1221975f,
  -0.2457300f, -0.1511323f, +0.2920668f, +0.3616499f, -0.0347423f, -0.1735812f, -0.1293405f, -0.1547458f,
  -0.0800103f, -0.0718056f, +0.1939629f, +0.1457128f, +0.0754281f, -0.1796638f, +0.0323617f, +0.0103603f
);

const float biases[4] = float[4](
  +0.0536586f, +0.0015937f, +0.0439163f, -0.0061909f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer31 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.4140377f, +0.1200209f, -0.2030083f, -0.4657371f, +0.0968914f, -0.1578501f, +0.2223109f, +0.0084705f,
  -0.2833955f, +0.1365385f, -0.0158483f, +0.3193281f, -0.1139169f, +0.1215799f, +0.1306409f, -0.1529614f,
  -0.0609764f, +0.0856469f, -0.0307800f, +0.3034399f, -0.0827982f, -0.3081524f, -0.0633298f, +0.0479577f,
  -0.0737380f, +0.0803385f, -0.1167549f, -0.3670866f, -0.0005952f, +0.0611566f, -0.2419722f, -0.0076570f,
  -0.3021103f, -0.3153653f, +0.5434922f, -0.3126706f, +0.2165021f, -0.3223155f, +0.0699228f, +0.0612800f,
  +0.1335402f, +0.0000830f, +0.1248646f, -0.1656695f, +0.2263925f, -0.1980363f, -0.5606640f, +0.0160519f,
  +0.0029013f, -0.0217773f, -0.0503341f, +0.1065188f, -0.1751942f, -0.0078964f, +0.0341300f, -0.1772289f,
  -0.0157457f, -0.0537280f, +0.1535413f, -0.0047482f, -0.1676926f, +0.0257164f, +0.1822152f, -0.0829112f,
  +0.1363026f, -0.0383635f, +0.1684680f, +0.0486484f, -0.0397972f, +0.0488359f, +0.2559606f, +0.0544609f,
  +0.2156508f, -0.0113497f, +0.0714525f, -0.1210430f, -0.1784579f, +0.1908509f, -0.0552980f, -0.0138150f,
  +0.0334640f, +0.0878053f, +0.0467154f, -0.2970948f, +0.1019762f, -0.1289082f, +0.1968014f, -0.0147270f,
  -0.0453143f, -0.1168353f, +0.0249140f, -0.4762968f, +0.0611812f, +0.0763999f, -0.1122517f, -0.0357984f,
  +0.0423067f, -0.1118362f, +0.0605346f, -0.1091779f, +0.1798690f, -0.2101988f, +0.0298458f, -0.3179766f,
  +0.1506255f, +0.1611527f, +0.0455544f, +0.1020547f, -0.1588948f, +0.1383088f, +0.4639104f, +0.0463765f,
  +0.1743823f, +0.0480019f, +0.1276874f, +0.1299115f, +0.0509123f, +0.2904283f, +0.1426612f, +0.0824117f,
  -0.0319868f, +0.1725077f, +0.0547721f, +0.1265023f, +0.1333082f, +0.1368111f, +0.0037550f, +0.1369512f,
  -0.1447539f, -0.1856373f, -0.0229863f, +0.0253694f, +0.1988930f, -0.1955691f, -0.0113678f, -0.0218100f,
  -0.1687287f, -0.3180675f, -0.2293930f, -0.1762059f, +0.1328993f, +0.2356690f, +0.0332498f, -0.0633077f,
  +0.0703823f, -0.2665622f, +0.1018890f, -0.0372750f, -0.0575110f, -0.0865362f, -0.1175462f, +0.1182086f,
  +0.0715565f, +0.5025344f, -0.1125231f, -0.3092183f, +0.0446651f, -0.0509812f, +0.2205981f, +0.0765837f,
  -0.1213040f, -0.4495463f, +0.3262996f, +0.0036810f, +0.1915289f, +0.1161000f, -0.4074094f, +0.2422323f,
  -0.0366239f, +0.1501743f, -0.1419902f, -0.1631314f, -0.0305172f, +0.2323250f, +0.1126133f, +0.0196118f,
  +0.1927387f, +0.1953943f, -0.2512819f, -0.2064362f, +0.1669666f, -0.3330784f, -0.2929836f, -0.1894741f,
  +0.2414197f, -0.1870919f, +0.1824113f, -0.0740446f, +0.0558798f, +0.1993778f, -0.3375452f, -0.0101503f,
  +0.1335305f, +0.0953916f, -0.1074504f, -0.1517614f, -0.0250847f, +0.1214414f, -0.0464002f, -0.0175818f,
  +0.0039878f, -0.1741795f, +0.0600039f, +0.1530018f, -0.0701331f, +0.0147971f, +0.1149687f, -0.0546307f,
  -0.0117263f, -0.0381706f, +0.1749656f, +0.0786230f, +0.0272432f, -0.2624630f, -0.1477457f, +0.2081893f,
  +0.0785979f, +0.5021325f, -0.1464131f, +0.4793895f, -0.3364089f, +0.1461862f, +0.3140593f, +0.2793432f,
  +0.2723250f, +0.5761688f, -0.3933229f, -0.1231875f, +0.2801220f, +0.0894040f, +0.0155952f, -0.0701686f,
  -0.0204393f, +0.1319197f, -0.2300256f, +0.1953353f, +0.6850898f, +0.0011514f, +0.5216493f, +0.0521179f,
  +0.0465615f, +0.0737027f, -0.2499865f, -0.1239479f, -0.2164238f, +0.3037670f, -0.0130954f, +0.3078897f,
  +0.0580112f, +0.1294397f, -0.1487755f, +0.1621457f, +0.1261708f, +0.0853733f, -0.2307605f, -0.0061509f,
  +0.2425958f, +0.0359919f, +0.3013948f, -0.1200746f, -0.2725668f, -0.1530479f, -0.3009809f, -0.0062971f,
  +0.0079852f, -0.2661796f, -0.1164806f, +0.1351889f, +0.1431993f, -0.0426910f, +0.2563579f, +0.3846804f,
  +0.3201118f, -0.0522283f, -0.6713737f, -0.3266635f, +0.0672644f, +0.1159650f, -0.3383134f, +0.0418177f,
  -0.0175122f, -0.1587228f, -0.0341667f, -0.3993268f, -0.5678068f, -0.0433059f, -0.1443298f, +0.0830853f
);

const float biases[4] = float[4](
  +0.0070155f, +0.2200049f, -0.0442335f, -0.1269956f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer31 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0833107f, -0.0332248f, +0.0109245f, -0.3665739f, -0.3110238f, -0.0681030f, -0.0903414f, -0.0447893f,
  -0.1070248f, +0.4274888f, +0.1593966f, +0.1681784f, -0.2574553f, +0.1269221f, +0.0942446f, -0.0891927f,
  +0.2022675f, -0.1519900f, -0.0701364f, -0.1968081f, -0.4466972f, +0.1384198f, -0.0980914f, +0.0488073f,
  +0.0393860f, +0.2008251f, -0.1851141f, -0.1372111f, +0.0480520f, +0.3093400f, -0.1665415f, +0.2777246f,
  +0.1516168f, +0.3946681f, -0.3448381f, -0.0735568f, +0.2185603f, +0.2081384f, +0.1966423f, -0.0304196f,
  +0.1108624f, +0.3173599f, +0.0774242f, +0.1256218f, -0.6775382f, +0.0040094f, -0.0744748f, +0.1468870f,
  +0.0040214f, -0.0423346f, -0.1921001f, -0.1108206f, -0.4165498f, -0.0893973f, +0.0988717f, -0.2711297f,
  -0.3517190f, -0.2020704f, -0.2231319f, +0.0274061f, -0.2892507f, +0.1196730f, -0.1992155f, -0.3732583f,
  +0.0902716f, -0.0710309f, -0.2038973f, -0.1565494f, -0.1431312f, +0.0315964f, -0.0226452f, -0.0713574f,
  +0.2438700f, +0.1730855f, -0.1263101f, +0.0246038f, -0.3189149f, +0.2113561f, -0.0983740f, +0.1211971f,
  +0.2563745f, -0.0489069f, -0.2334814f, +0.0924856f, -0.0849699f, +0.2466069f, +0.0076322f, -0.0021367f,
  -0.0211869f, +0.3046884f, +0.2012672f, +0.0956496f, +0.3687266f, +0.1399962f, +0.0268349f, -0.3657894f,
  -0.0638322f, -0.0552864f, +0.1418352f, -0.0634391f, +0.0987295f, -0.2818069f, +0.0403536f, -0.0190496f,
  +0.0977081f, +0.0250609f, +0.0347247f, -0.1367016f, -0.1926122f, -0.0163103f, +0.1016931f, -0.2194572f,
  -0.0059428f, +0.1712412f, -0.0966050f, +0.2566094f, +0.2489169f, -0.0770219f, +0.0055429f, -0.2795648f,
  +0.1099803f, -0.0703591f, +0.1412143f, +0.0220016f, +0.2460430f, +0.1408703f, +0.1002901f, -0.1407387f,
  +0.2028219f, -0.1102996f, +0.2422565f, -0.0159514f, +0.5017799f, +0.0290994f, +0.0680000f, -0.0570967f,
  +0.0911969f, +0.1866750f, +0.0721194f, +0.1730544f, +0.2804731f, -0.0244153f, -0.0728234f, -0.0021952f,
  +0.0847557f, -0.3729427f, +0.0848422f, +0.1441678f, +0.2479642f, -0.2510794f, +0.1007530f, +0.1072317f,
  -0.2712491f, +0.3063130f, -0.2632283f, -0.0180010f, +0.4563071f, -0.1106508f, +0.3480108f, +0.0141021f,
  -0.1962715f, +0.1010314f, -0.1849646f, +0.2922474f, +0.2792602f, -0.4118868f, +0.3414198f, +0.0755807f,
  -0.0096210f, +0.2783523f, -0.2630399f, -0.3723480f, +0.3914210f, +0.3179809f, +0.0324376f, +0.0227307f,
  +0.2930494f, -0.0839391f, -0.0927459f, -0.1028436f, +0.1750731f, +0.1025758f, -0.1664637f, +0.3586220f,
  +0.0970061f, +0.0723573f, +0.1832020f, -0.0545211f, +0.2329280f, -0.0498549f, -0.0989819f, -0.0076590f,
  -0.0055717f, -0.0723209f, +0.0752409f, -0.0020455f, +0.4808909f, +0.2886343f, +0.1162413f, -0.1552841f,
  -0.0845625f, -0.3095485f, +0.0830239f, -0.0181851f, +0.2714325f, +0.0125479f, +0.2246305f, -0.1169355f,
  +0.0397937f, +0.0646584f, +0.3336977f, +0.1254139f, +0.1049004f, +0.1161351f, -0.0901537f, -0.1062369f,
  +0.0059820f, -0.1490382f, +0.0264701f, +0.1033837f, -0.1651496f, -0.4712034f, +0.0861744f, +0.0878337f,
  -0.1701179f, -0.1032401f, +0.1272341f, +0.3658057f, -0.0933305f, -0.1166152f, +0.0785306f, -0.2427927f,
  -0.0308126f, -0.0409831f, -0.0149588f, +0.2645258f, -0.0700673f, +0.0441166f, +0.0977358f, +0.0654916f,
  -0.0164449f, -0.1748258f, +0.1899133f, +0.0923458f, +0.5653183f, -0.3889897f, -0.0520217f, +0.0131794f,
  +0.0258860f, +0.1419372f, -0.0769514f, +0.0706885f, +0.2253328f, -0.4735766f, -0.0348659f, +0.1375105f,
  -0.2235785f, -0.1459130f, -0.1813079f, -0.0172247f, +0.2476224f, -0.1473630f, +0.0656667f, -0.2249871f,
  +0.0020235f, -0.1438578f, -0.0754656f, -0.1973484f, +0.5493391f, -0.1247510f, +0.0805411f, -0.0191593f,
  +0.0161371f, -0.1345605f, -0.1726976f, +0.1339090f, +0.2698435f, +0.0377572f, +0.3184868f, +0.2429421f,
  +0.0574820f, +0.2383766f, +0.1144467f, +0.2453678f, +0.4002712f, -0.2960768f, +0.1375663f, +0.1026378f
);

const float biases[4] = float[4](
  -0.0715565f, +0.0980140f, +0.0897729f, +0.0474068f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer32 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0283077f, -0.0110516f, +0.0880409f, +0.0010447f, -0.1372551f, +0.2977871f, -0.1103824f, -0.3482163f,
  +0.0630691f, +0.1479250f, +0.0396514f, -0.1933318f, -0.1971332f, +0.1006131f, -0.0588956f, -0.3085473f,
  -0.1389335f, +0.1515614f, -0.0561395f, +0.1385008f, -0.0282873f, -0.0015325f, -0.1221725f, -0.0372118f,
  +0.0331868f, -0.0905845f, -0.1601730f, -0.1455145f, -0.0614288f, -0.1186087f, +0.1615273f, +0.0554149f,
  +0.1963635f, -0.2466700f, -0.2206738f, -0.0815634f, -0.1514202f, -0.2113487f, -0.3055233f, -0.1966344f,
  -0.0807143f, -0.0582383f, +0.0608241f, +0.0059689f, -0.3738368f, +0.0741287f, +0.3301917f, +0.0163014f,
  +0.0767662f, +0.1024735f, -0.0998351f, +0.0262189f, -0.0631287f, -0.0313332f, +0.0530756f, -0.1725969f,
  +0.1850803f, +0.2164509f, +0.2845675f, +0.0364592f, +0.2114776f, -0.2898956f, +0.3364412f, +0.0329634f,
  +0.0294504f, +0.0326343f, +0.0822988f, -0.0629841f, +0.2295603f, -0.4423760f, +0.1674538f, +0.0024921f,
  +0.1062376f, -0.0915314f, -0.3202133f, +0.3606820f, -0.0351123f, +0.2417557f, +0.0509775f, -0.0955204f,
  +0.3384015f, -0.0385035f, +0.3200742f, +0.2366052f, -0.0979987f, +0.0512610f, -0.2425737f, +0.1842230f,
  -0.2832374f, +0.0579097f, -0.0701071f, +0.2419423f, +0.0337886f, +0.1180569f, -0.3799462f, -0.3053347f,
  -0.2475953f, -0.1784097f, +0.0963756f, +0.1690200f, -0.1184907f, -0.1034430f, -0.1718675f, -0.0334496f,
  -0.1799959f, +0.1922997f, +0.1875638f, -0.2121195f, -0.3637928f, -0.1638679f, +0.1717558f, -0.0527057f,
  +0.0368330f, +0.0685148f, +0.0142129f, -0.3007452f, -0.1787558f, +0.0430695f, -0.7134116f, -0.0685752f,
  -0.0931658f, +0.1807078f, -0.0373993f, -0.1411024f, +0.1282458f, -0.2108116f, -0.0537958f, +0.0017775f,
  -0.2441304f, -0.3507884f, +0.0706819f, -0.2745177f, -0.5120053f, -0.0376978f, -0.1683747f, -0.0154611f,
  +0.0989752f, +0.0422154f, +0.0160673f, -0.0059196f, -0.0928840f, -0.0520309f, +0.1792868f, -0.0690626f,
  +0.0248622f, -0.1452917f, +0.1914427f, +0.1687200f, -0.0227715f, +0.1792468f, +0.0046990f, -0.1139696f,
  -0.1479402f, -0.2031180f, +0.0751197f, +0.4195178f, +0.0490838f, -0.0325962f, -0.0986535f, -0.2623138f,
  -0.0590266f, -0.0273195f, +0.0073588f, -0.1657371f, +0.1868115f, +0.0356631f, +0.2566671f, +0.0221734f,
  +0.1068851f, -0.3057015f, +0.0651663f, -0.3870036f, -0.4685442f, +0.1977831f, +0.1256137f, -0.0455988f,
  +0.0637733f, -0.2505907f, +0.0161604f, +0.1186163f, +0.1056285f, +0.1442683f, -0.1164619f, -0.0391377f,
  +0.2522551f, -0.0507162f, -0.1804049f, +0.1837858f, +0.0602262f, +0.0152165f, +0.1494857f, -0.0873314f,
  -0.2030687f, -0.1230872f, +0.0581671f, -0.0765338f, -0.2035843f, +0.1359477f, +0.3309320f, -0.1911249f,
  +0.1922024f, +0.0004774f, -0.4283932f, +0.3834887f, -0.3241482f, +0.2714617f, +0.2653474f, +0.0248021f,
  +0.2902556f, +0.0053947f, -0.0189335f, +0.0685451f, +0.0225317f, +0.2693414f, +0.0469787f, +0.1497737f,
  +0.1841246f, +0.0065015f, +0.0297531f, -0.0313042f, +0.2128745f, +0.1212420f, +0.0577879f, +0.0625680f,
  +0.0450507f, -0.0948815f, +0.3067013f, -0.0547420f, +0.0538038f, -0.1214163f, +0.0137161f, +0.0242190f,
  -0.1117512f, -0.0905892f, +0.2490413f, -0.2311115f, +0.0789834f, +0.2717598f, +0.1550846f, -0.1711978f,
  +0.0302665f, +0.0200334f, +0.2474450f, -0.1472960f, -0.1800485f, -0.2274996f, +0.1412592f, +0.3488873f,
  -0.2610541f, -0.1240383f, +0.3028297f, +0.0539434f, -0.0856339f, +0.0524156f, +0.1046556f, -0.1214395f,
  +0.1395901f, +0.0609815f, +0.2679117f, -0.1724443f, +0.0280455f, +0.2993884f, +0.1597491f, +0.0690430f,
  +0.0231055f, +0.0812202f, +0.2178804f, +0.2866523f, +0.0189956f, -0.1249222f, +0.0801506f, +0.1201394f,
  -0.1711828f, +0.0793529f, +0.4803660f, -0.0622103f, -0.0147658f, -0.1546628f, -0.2544323f, +0.1376067f,
  +0.1078276f, -0.0110612f, +0.1033561f, -0.5710508f, +0.0059331f, -0.0077427f, +0.2917098f, +0.0957870f
);

const float biases[4] = float[4](
  +0.0336792f, +0.0459810f, -0.0015020f, +0.0190284f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer32 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0281459f, +0.1133101f, -0.1953299f, +0.1486328f, -0.0170238f, -0.1771014f, +0.2119551f, +0.3995349f,
  -0.0051600f, -0.1755453f, -0.2514223f, +0.1062360f, -0.2166182f, -0.2892883f, +0.0861752f, +0.2651518f,
  +0.0807116f, -0.0908102f, +0.0418228f, +0.3130926f, -0.0023194f, +0.1506322f, +0.1382180f, +0.1061621f,
  -0.0760852f, -0.0689709f, -0.1706603f, -0.0709427f, +0.0930101f, -0.1894785f, +0.0646149f, +0.1227356f,
  -0.2814118f, +0.3988408f, +0.0490963f, +0.0141192f, +0.1374610f, +0.0676695f, -0.0137817f, -0.2077472f,
  +0.1661613f, +0.1962235f, -0.0606924f, +0.4706595f, +0.2313593f, -0.1245388f, +0.1571900f, +0.0030529f,
  -0.0581694f, -0.0814456f, +0.0633610f, -0.6683265f, +0.5704484f, -0.0839610f, -0.0839495f, +0.2736648f,
  -0.1461103f, -0.2141262f, +0.0580620f, +0.0729519f, +0.2775840f, +0.4836374f, -0.2709115f, -0.0825300f,
  -0.0709130f, -0.1444484f, +0.0158922f, +0.1763662f, +0.1419862f, +0.4662804f, -0.0773161f, +0.1685442f,
  +0.0628284f, +0.1590429f, +0.0351092f, +0.0832248f, -0.1217836f, +0.1246947f, -0.0330198f, -0.1521745f,
  -0.1553135f, -0.1286564f, -0.0191045f, -0.1493286f, -0.3423115f, -0.1291707f, +0.1081599f, -0.4303001f,
  +0.0944194f, +0.1840957f, -0.3280722f, -0.4852681f, -0.1291624f, +0.0187328f, +0.1652855f, +0.0637918f,
  +0.5489091f, +0.0208690f, -0.1326846f, -0.0531252f, -0.2396003f, -0.1495924f, -0.0759103f, -0.0779606f,
  +0.3093077f, +0.0066478f, +0.0989561f, +0.3470939f, -0.1370155f, +0.2045575f, -0.0510158f, -0.0677944f,
  +0.4369338f, +0.3846473f, -0.3239660f, -0.2653449f, -0.0499112f, +0.0262382f, -0.0578329f, -0.1439130f,
  +0.2814821f, +0.0533958f, -0.2235038f, +0.0922673f, -0.3747487f, -0.0163540f, +0.3513782f, -0.0109091f,
  -0.0472606f, +0.1003321f, +0.4247208f, +0.1006951f, -0.0318341f, +0.1081589f, +0.0530895f, -0.0322636f,
  +0.1337838f, +0.0792022f, -0.1833943f, -0.0359739f, -0.1588199f, -0.2417300f, +0.7812854f, -0.1277538f,
  -0.0276795f, +0.1039938f, -0.1932664f, +0.1259373f, +0.0708175f, -0.1156636f, +0.1954403f, +0.1578561f,
  -0.0935645f, -0.2821198f, -0.2271267f, +0.0941182f, +0.1380153f, +0.0962876f, -0.0567168f, +0.1879719f,
  +0.1212767f, -0.1677867f, -0.1460706f, -0.1600733f, -0.0542855f, -0.0182907f, -0.0235053f, +0.0790584f,
  +0.0492444f, +0.0900684f, +0.0295830f, -0.0041305f, -0.1315526f, -0.0470597f, +0.0137610f, +0.3544793f,
  -0.0143775f, +0.2205013f, -0.1024774f, +0.1796113f, +0.1420207f, +0.3644591f, -0.1534216f, +0.3105885f,
  +0.1489733f, +0.2128415f, -0.1423724f, +0.1175273f, +0.1525909f, +0.2381017f, +0.1558595f, +0.0493181f,
  +0.2348306f, +0.1695830f, -0.1165967f, +0.1306884f, -0.0793643f, +0.0401278f, -0.3825332f, +0.1536505f,
  -0.3537187f, -0.1969497f, -0.0494478f, +0.1827188f, -0.3160062f, +0.0916819f, -0.0674793f, +0.0354070f,
  -0.1697781f, -0.0537619f, -0.0717800f, -0.2411609f, -0.1329969f, +0.0606876f, +0.5485037f, +0.0306985f,
  -0.0623724f, -0.1793383f, -0.0652469f, +0.1217302f, +0.0580737f, -0.1462258f, -0.0102316f, +0.1154106f,
  +0.1039596f, +0.0460005f, -0.1448779f, +0.1629658f, +0.0856213f, -0.0922522f, -0.1119185f, -0.0792668f,
  -0.0791868f, -0.1104859f, +0.1554028f, +0.1103606f, +0.0877694f, +0.2300150f, +0.1488288f, -0.2403337f,
  -0.0370222f, +0.2532604f, +0.3054884f, -0.2574675f, +0.0913462f, +0.1654446f, +0.0188543f, +0.0144215f,
  +0.1052632f, +0.1925029f, -0.0415018f, -0.1924698f, +0.2855137f, +0.1870366f, +0.0580906f, +0.0049663f,
  +0.0817814f, +0.0498590f, +0.0972755f, -0.0155294f, -0.0211773f, -0.0885181f, +0.1909899f, -0.0501938f,
  +0.0701016f, -0.0367664f, +0.0184247f, +0.1520249f, -0.1483985f, +0.1124450f, -0.0038016f, +0.2959318f,
  -0.0206888f, +0.0523166f, -0.3672546f, +0.1746193f, +0.0706898f, -0.0775262f, +0.1096830f, +0.1190043f,
  -0.3414415f, +0.1059954f, +0.1107006f, -0.3188157f, -0.0502445f, +0.3651921f, -0.1934683f, +0.0684766f
);

const float biases[4] = float[4](
  -0.0293850f, -0.1000344f, +0.0042560f, -0.0228672f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer33 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1337044f, +0.0808150f, -0.3006483f, -0.2349444f, -0.3928405f, +0.1292837f, +0.0567156f, +0.0416234f,
  +0.1013440f, +0.0839042f, -0.6404330f, -0.2163220f, -0.0674757f, -0.4898328f, -0.3523541f, +0.2308544f,
  -0.0669905f, +0.0896179f, -0.4183594f, -0.5413539f, -0.3778802f, +0.0100165f, +0.0337719f, +0.3249853f,
  -0.1572795f, +0.1057584f, +0.2733063f, +0.0838234f, +0.1258976f, -0.1904082f, +0.0287104f, -0.1201679f,
  -0.0697218f, +0.2884455f, -0.1103759f, -0.3136197f, +0.2523908f, -0.1112735f, -0.6544732f, -0.1416374f,
  -0.2447918f, +0.1828975f, -0.1003864f, +0.0502985f, +0.2492295f, -0.0461891f, -0.2069471f, +0.0941607f,
  +0.1585235f, +0.2014799f, -0.0440033f, -0.0456257f, +0.2574851f, +0.2334055f, -0.0886198f, +0.3081759f,
  -0.0476825f, -0.1842423f, +0.2868158f, +0.0251728f, +0.3209864f, -0.3200019f, +0.1723000f, -0.0241680f,
  +0.1238432f, -0.0523032f, -0.0917076f, +0.2382806f, +0.3160811f, +0.0320788f, +0.0622090f, +0.1023508f,
  -0.0449059f, +0.2055515f, -0.0442942f, -0.0624235f, -0.3026078f, -0.0332785f, +0.0607475f, -0.2000888f,
  -0.0649486f, +0.3156285f, +0.0281452f, +0.3855102f, -0.1973068f, -0.0186120f, +0.0967903f, -0.0854105f,
  +0.2241627f, +0.0046187f, +0.0707171f, -0.0421807f, -0.2083254f, +0.1630307f, -0.0059415f, -0.0862014f,
  +0.2030861f, -0.2322008f, +0.1210470f, +0.1413379f, +0.3411666f, +0.1186664f, +0.1296906f, +0.0954632f,
  +0.5486832f, -0.4655925f, -0.0508093f, -0.0130189f, +0.0948267f, +0.1857477f, +0.0379872f, +0.0189450f,
  -0.0229123f, -0.0662831f, -0.1600738f, +0.0332801f, -0.3562506f, +0.2493389f, -0.3411311f, +0.1458094f,
  +0.1235766f, -0.0857879f, -0.0665463f, -0.1214742f, -0.2942864f, +0.0184238f, -0.0596877f, +0.1236174f,
  -0.2261556f, -0.0616792f, -0.0734219f, -0.0987692f, -0.1569653f, -0.3970448f, -0.0660660f, -0.2075457f,
  -0.1567263f, -0.0641451f, -0.2312761f, +0.0273606f, -0.1092165f, +0.0431628f, -0.1529738f, -0.0290833f,
  +0.1044200f, -0.0724418f, +0.1447587f, +0.0908347f, +0.2467791f, -0.0209675f, -0.0152962f, -0.0223999f,
  -0.1297133f, -0.0994481f, +0.1871449f, -0.0114214f, +0.0565704f, +0.0143987f, -0.0106314f, +0.0497733f,
  -0.0278773f, +0.0434274f, +0.1873626f, -0.0086356f, +0.0405639f, -0.0414896f, -0.1233717f, -0.2232564f,
  -0.1806731f, +0.1252326f, +0.1739349f, -0.0430440f, -0.0321070f, +0.1729973f, +0.0079836f, -0.2252362f,
  -0.2196790f, -0.2146671f, +0.1312227f, +0.2666949f, -0.5530644f, -0.2181893f, +0.0471263f, +0.1173777f,
  +0.2075029f, +0.0855340f, -0.1655315f, -0.0746351f, +0.0039350f, +0.1970696f, -0.1512156f, -0.1014101f,
  -0.1225620f, +0.0187439f, +0.1690444f, +0.1377101f, +0.5098401f, +0.1451954f, +0.1060816f, +0.0622339f,
  -0.0234892f, +0.1310392f, -0.0306011f, +0.2779198f, -0.1548475f, +0.0572002f, -0.0076949f, +0.3412217f,
  +0.1123364f, -0.0847974f, +0.0797106f, -0.2503069f, +0.1495541f, -0.0756967f, +0.2997209f, +0.2221109f,
  -0.2080560f, -0.0005854f, +0.1707655f, +0.1317530f, -0.1642655f, -0.2585783f, +0.1626574f, +0.1076263f,
  -0.0108512f, -0.0362810f, +0.1542530f, +0.2578028f, -0.4767304f, -0.2360567f, -0.1717650f, -0.3900201f,
  -0.1248083f, +0.1030539f, +0.1969437f, -0.1121789f, -0.4488370f, -0.0013983f, -0.1120407f, +0.4551018f,
  -0.0051615f, -0.1865332f, -0.0332950f, -0.0859043f, -0.0530826f, -0.1094467f, -0.1211744f, +0.0938569f,
  +0.3768090f, +0.7069116f, +0.1045180f, -0.2034880f, -0.1177472f, +0.0944366f, -0.3344662f, +0.1052515f,
  +0.1046218f, +0.0911110f, +0.0106131f, +0.0151492f, -0.4304404f, +0.0683344f, -0.3091213f, -0.0842858f,
  +0.0410907f, -0.0351221f, +0.0506762f, -0.0481910f, -0.0762311f, -0.1797317f, -0.0512314f, -0.0887831f,
  -0.1812176f, -0.1450464f, -0.0055142f, +0.1981514f, -0.3038404f, -0.2852623f, +0.0315316f, +0.0052633f,
  +0.0285271f, -0.0357870f, -0.3141223f, -0.1144030f, -0.0108001f, +0.0146798f, -0.1357665f, +0.0739270f
);

const float biases[4] = float[4](
  -0.1218123f, -0.0007307f, +0.0505710f, +0.0045002f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer33 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2955218f, -0.0909215f, +0.2158015f, +0.0134186f, +0.2131022f, +0.0280388f, +0.0203032f, -0.3093589f,
  -0.0957697f, -0.0307786f, -0.0025988f, +0.1534919f, +0.0159082f, -0.4117734f, +0.0395258f, +0.0836581f,
  -0.2250004f, -0.0849933f, -0.1262100f, +0.0666836f, +0.0645043f, -0.1188755f, +0.0161798f, +0.1320711f,
  +0.0256795f, -0.0117247f, -0.1161787f, +0.2312796f, -0.0250033f, +0.0715762f, +0.1685080f, -0.0311255f,
  -0.5662510f, -0.1475355f, +0.2851666f, +0.0137864f, -0.2067634f, -0.0391418f, +0.2369738f, +0.0954784f,
  -0.0490008f, +0.2315647f, +0.2691515f, +0.1214365f, -0.0357894f, -0.1816663f, +0.1804766f, +0.0130743f,
  -0.2234660f, -0.0673693f, +0.2598659f, +0.4420522f, -0.0223513f, +0.1238728f, +0.0493130f, -0.1123003f,
  +0.1552791f, -0.1210615f, +0.1934866f, +0.2010840f, +0.1859250f, -0.0571988f, +0.2291376f, +0.0461186f,
  +0.1182414f, -0.2230065f, +0.2081700f, +0.0022970f, +0.1410023f, +0.3852718f, -0.0941639f, -0.1005004f,
  +0.1509592f, +0.0871512f, -0.0267105f, +0.2595480f, -0.2357132f, +0.1525763f, +0.3581370f, -0.0237666f,
  -0.4047977f, +0.2706738f, +0.0725800f, +0.2073035f, +0.2766069f, -0.1217242f, -0.0756198f, -0.1269620f,
  +0.0596844f, +0.0634898f, +0.2365002f, +0.3187710f, -0.1900319f, +0.0114384f, +0.1272492f, +0.0481212f,
  -0.1324231f, -0.1011548f, -0.0365609f, +0.5540024f, -0.1560623f, +0.0720790f, +0.1634332f, +0.0213698f,
  +0.3046021f, -0.2146757f, +0.0176579f, -0.0686553f, +0.2641437f, -0.1630269f, +0.1588475f, -0.1760375f,
  -0.0152233f, -0.0766710f, +0.1534086f, +0.3273329f, +0.1878388f, -0.1459232f, +0.2090843f, -0.0322698f,
  +0.0098101f, +0.1540366f, -0.0430672f, +0.1890152f, +0.0144170f, +0.0646140f, -0.0051611f, +0.0053452f,
  +0.0408378f, -0.0857796f, +0.2525557f, +0.0714877f, -0.0843280f, +0.0503196f, -0.2267665f, +0.1095158f,
  +0.1130509f, -0.0573102f, +0.3716531f, +0.1724196f, +0.1028889f, +0.0868111f, -0.1679905f, -0.0230810f,
  +0.0170235f, -0.0786229f, +0.1153837f, -0.1387188f, +0.1539140f, -0.0529732f, +0.0281917f, +0.0307575f,
  +0.0685915f, -0.0955034f, -0.0469824f, +0.0235338f, +0.1678674f, -0.2103390f, +0.0589205f, -0.3344162f,
  -0.0930846f, +0.0078881f, +0.4489144f, -0.0696078f, +0.3384048f, +0.0306594f, -0.1137159f, -0.2009033f,
  -0.0930936f, -0.1181537f, -0.2629621f, -0.2382797f, +0.2866698f, +0.0610063f, +0.0320364f, +0.1856688f,
  -0.2458910f, +0.0015325f, +0.3695906f, -0.0433984f, +0.0673070f, -0.4213188f, -0.2432333f, -0.0131807f,
  +0.1788426f, -0.1182951f, +0.4602229f, +0.2073023f, +0.0930940f, +0.1044714f, +0.0768691f, +0.0493279f,
  -0.1837806f, +0.0410064f, -0.2784593f, -0.1692205f, +0.3328430f, -0.0561462f, +0.0043711f, +0.1910692f,
  +0.0574435f, +0.0590434f, +0.0124061f, +0.0896941f, -0.0188197f, +0.5877502f, +0.0404776f, +0.1588920f,
  -0.0754330f, -0.1251763f, +0.4507374f, +0.1608095f, -0.0315043f, -0.0502195f, +0.3337987f, +0.2063383f,
  +0.0886934f, +0.1871612f, -0.0911231f, +0.0131900f, -0.1750896f, +0.3971257f, -0.0982844f, -0.0889863f,
  +0.1388901f, +0.0885617f, -0.1840665f, +0.4616872f, +0.0256534f, +0.1290800f, +0.0558453f, -0.0647497f,
  +0.1076070f, +0.2212127f, -0.1296524f, +0.1114124f, -0.1164786f, +0.0067183f, -0.1101920f, -0.0797760f,
  -0.0542678f, -0.0359728f, -0.0168991f, -0.1332147f, +0.0810242f, -0.4212345f, -0.1567048f, -0.0373646f,
  +0.2673046f, -0.1659455f, -0.0635149f, +0.1926268f, -0.1931621f, +0.1722134f, -0.1026698f, -0.1636607f,
  +0.2345914f, -0.2541736f, +0.3236917f, +0.0303286f, -0.1102765f, +0.4062634f, -0.3254800f, -0.2563178f,
  -0.0030385f, +0.1140661f, +0.0679919f, -0.2205644f, +0.3673782f, +0.0543223f, -0.2390460f, -0.0959384f,
  +0.0929486f, +0.8479360f, +0.0161916f, -0.2518467f, +0.1958961f, -0.3900042f, +0.1185179f, +0.7256751f,
  +0.0205928f, +0.0722476f, +0.1476400f, +0.0531706f, -0.4056349f, -0.3385029f, +0.0620453f, +0.4539421f
);

const float biases[4] = float[4](
  -0.0379648f, +0.0358224f, +0.0361364f, -0.0305653f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer34 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2312916f, +0.2181365f, +0.1805984f, +0.1996260f, +0.1853091f, -0.1063318f, -0.2045586f, -0.1305391f,
  -0.1671721f, +0.2421608f, +0.1381386f, +0.0627380f, +0.1893521f, +0.1000046f, -0.1855883f, +0.1750201f,
  +0.1186639f, +0.1151007f, +0.0234116f, -0.0116167f, +0.1188821f, -0.2698480f, -0.1523689f, +0.2173261f,
  +0.1659053f, +0.0273622f, -0.3408183f, -0.1778314f, -0.0579702f, +0.0584999f, +0.0005930f, -0.1406067f,
  -0.2600169f, -0.4132709f, +0.0647951f, -0.2709803f, +0.1612607f, -0.2780745f, +0.0683724f, +0.0901399f,
  +0.1699003f, +0.0427271f, -0.0992315f, -0.0198382f, -0.1076317f, -0.0629283f, +0.0432317f, +0.2219218f,
  +0.1338234f, -0.0259119f, -0.2875615f, +0.0066767f, -0.0194576f, -0.0361346f, -0.1414426f, +0.0391071f,
  -0.1012277f, +0.0073289f, -0.0678074f, +0.1624473f, -0.0520630f, +0.1298512f, -0.2897527f, -0.0311933f,
  -0.4370867f, -0.0190223f, +0.0363265f, -0.0573378f, -0.2185603f, +0.0131099f, -0.3741933f, -0.0972442f,
  -0.0386025f, -0.0380073f, +0.0969470f, +0.3433945f, +0.3607246f, +0.3247074f, +0.0022667f, -0.2034241f,
  -0.4630611f, +0.4242501f, +0.0107995f, -0.1142984f, -0.3846982f, +0.2344089f, -0.1155111f, -0.3125487f,
  -0.2201797f, +0.3877702f, +0.0841572f, +0.1713113f, +0.0759385f, -0.1140043f, +0.0307143f, +0.2901405f,
  +0.0736965f, +0.0554385f, +0.0817224f, -0.0768727f, -0.0514810f, +0.0580552f, +0.1340895f, +0.0759714f,
  -0.4069998f, +0.3427203f, -0.0785561f, -0.2745996f, +0.0927842f, +0.1307728f, +0.1818740f, +0.0762177f,
  -0.1961588f, +0.3485541f, +0.0357065f, +0.0275063f, +0.1606488f, +0.0457216f, +0.2409426f, +0.0059157f,
  -0.0969928f, +0.1358643f, +0.2522092f, -0.3511117f, +0.1847335f, +0.0970679f, +0.1442939f, -0.0209473f,
  +0.2007016f, -0.2152205f, +0.1191145f, -0.2131377f, +0.0241461f, -0.0035764f, +0.0576585f, -0.0883128f,
  +0.1527598f, +0.1135072f, +0.0968614f, -0.0233595f, -0.1295601f, +0.1226246f, -0.0401812f, +0.0469864f,
  -0.1756503f, +0.0740458f, +0.1111243f, +0.0516736f, +0.0931612f, +0.0956246f, -0.3089477f, -0.3951084f,
  +0.2300702f, -0.1281854f, -0.2017012f, +0.1137322f, +0.1511117f, -0.1739970f, -0.0636418f, -0.0822690f,
  -0.2595964f, -0.0435430f, +0.0507830f, +0.0755237f, -0.0308669f, +0.0262306f, -0.1275851f, -0.0562684f,
  -0.1477924f, +0.1172581f, +0.0232628f, -0.1004989f, -0.0351559f, -0.0389448f, -0.1834940f, -0.2543321f,
  +0.3992412f, -0.0658545f, +0.0060835f, -0.0505810f, -0.0525032f, +0.0457137f, +0.1170490f, -0.4153634f,
  -0.4367213f, +0.1354512f, -0.2127628f, -0.0923911f, -0.0372623f, -0.1357960f, +0.1839665f, -0.1131605f,
  -0.2882473f, +0.0305904f, -0.1169601f, -0.3649874f, +0.0379700f, -0.0341461f, +0.3609236f, -0.0468568f,
  -0.2511594f, -0.0217520f, -0.0677359f, +0.1025140f, +0.0140737f, +0.0105487f, +0.2226141f, +0.1368248f,
  -0.0061703f, +0.0484997f, +0.0936884f, -0.0921823f, -0.0203467f, -0.1003113f, +0.0478835f, -0.0430346f,
  -0.0720165f, +0.0859035f, +0.2318112f, -0.0894556f, +0.0038565f, +0.1180340f, +0.0146891f, -0.1112013f,
  +0.0829655f, -0.3419197f, -0.1000972f, -0.0406511f, -0.1657239f, +0.0857539f, +0.0932074f, -0.1881600f,
  -0.2346714f, -0.0144514f, -0.2152094f, +0.1539276f, +0.2920338f, -0.3941379f, -0.3392173f, +0.0187631f,
  +0.4287086f, -0.0912230f, -0.2702855f, -0.1511769f, +0.2325893f, -0.2297518f, -0.0575190f, +0.3135972f,
  -0.0040462f, -0.0701507f, +0.0392907f, -0.2021760f, +0.1000578f, -0.2721910f, -0.3131424f, -0.0737666f,
  +0.2347219f, +0.0013583f, -0.2389161f, +0.2926196f, +0.0996362f, -0.2986670f, +0.0658595f, -0.0950827f,
  +0.4830516f, -0.0118909f, -0.0448109f, +0.1607749f, +0.1169367f, +0.0387657f, -0.0013042f, +0.0116531f,
  +0.1708214f, -0.3770036f, -0.2839203f, +0.1205273f, +0.0701236f, -0.0922383f, -0.2742412f, -0.0782462f,
  +0.3904390f, -0.1229517f, -0.1612717f, -0.1092550f, +0.0413593f, -0.2277179f, -0.3643571f, -0.0793846f
);

const float biases[4] = float[4](
  +0.0175418f, +0.0323429f, +0.0101441f, +0.1016744f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer34 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2543524f, +0.0085078f, +0.0288836f, -0.0037186f, +0.0769004f, +0.0111142f, +0.0452067f, +0.2935134f,
  -0.1584175f, +0.2672035f, +0.0642855f, -0.0058250f, +0.6062220f, -0.0066797f, +0.3097827f, +0.0363796f,
  -0.2537599f, +0.2683753f, -0.1547288f, -0.0910647f, -0.0533299f, -0.0234400f, +0.3600605f, -0.0994504f,
  +0.1028170f, +0.1217694f, +0.0701981f, +0.1593708f, -0.4389185f, -0.1670288f, +0.1387618f, +0.1927495f,
  +0.2155690f, -0.2295247f, +0.3067303f, +0.2127278f, +0.0290042f, +0.0753235f, -0.3927502f, -0.0409378f,
  -0.0817049f, -0.3866717f, +0.3125188f, +0.0743828f, +0.0361607f, +0.0833447f, -0.1138219f, -0.1133184f,
  +0.3715563f, +0.1326707f, +0.4933578f, +0.2789345f, +0.1686851f, +0.2114603f, +0.0253951f, +0.0068361f,
  +0.0703901f, +0.0767588f, +0.4212044f, -0.0299749f, -0.2112166f, -0.2217725f, +0.3887270f, -0.0734440f,
  +0.5189480f, -0.0062256f, +0.0161401f, -0.0543392f, -0.0168306f, +0.0045074f, +0.0127635f, -0.1958140f,
  +0.1401252f, +0.1224269f, -0.1245349f, +0.2684760f, +0.1835876f, -0.1573112f, -0.3064916f, -0.0612602f,
  -0.0026921f, -0.2389394f, +0.0463173f, +0.0299600f, -0.2620249f, -0.1023035f, -0.5535592f, +0.3344339f,
  -0.3124537f, -0.0061706f, -0.0959958f, +0.2983623f, +0.4491769f, -0.0754141f, +0.0673702f, +0.1623984f,
  -0.3005313f, -0.0223539f, -0.3089344f, +0.0691146f, +0.0425483f, -0.1804685f, -0.3193618f, -0.1609324f,
  +0.0544613f, -0.2358329f, +0.1238016f, -0.0136769f, -0.0695306f, +0.2625248f, +0.1137042f, -0.2181925f,
  +0.1077827f, +0.0644977f, -0.2165728f, -0.1759410f, +0.1747269f, +0.2180641f, -0.1057247f, +0.2024608f,
  +0.1424735f, +0.0728431f, -0.1999009f, -0.2285296f, -0.2239695f, -0.1906592f, -0.2060699f, -0.0932255f,
  +0.0921516f, -0.0311426f, -0.1922619f, +0.2852875f, +0.0898192f, +0.0395944f, -0.1235086f, -0.0847175f,
  -0.2273883f, +0.1255367f, +0.0061215f, +0.4431166f, -0.1194384f, +0.0933071f, -0.0760765f, -0.0417041f,
  +0.0461282f, +0.3241421f, -0.1576572f, -0.1974405f, -0.1054984f, -0.0439237f, +0.1832523f, +0.0855811f,
  +0.0826712f, -0.1151094f, -0.2606470f, +0.0171958f, -0.1704413f, +0.3344426f, +0.1113933f, +0.1885914f,
  -0.2216125f, -0.0632415f, -0.2816276f, +0.0294586f, -0.0840500f, -0.0774948f, +0.0089154f, +0.0447611f,
  +0.0853115f, -0.0603098f, -0.1752293f, +0.1957653f, +0.1431796f, +0.0834393f, +0.2411394f, +0.3654769f,
  +0.3464386f, +0.2053019f, +0.0991535f, +0.1308986f, +0.1831776f, -0.2158704f, -0.1314172f, +0.0944321f,
  -0.0323989f, -0.1027038f, +0.0421369f, +0.1536363f, +0.0637924f, +0.2117232f, -0.0056729f, -0.0282513f,
  +0.0725722f, -0.0837239f, +0.0900970f, +0.3626243f, +0.2005284f, -0.0063377f, +0.1183281f, +0.1991046f,
  +0.2961073f, -0.3319603f, -0.0410791f, +0.0156346f, -0.0085759f, -0.1453203f, -0.0380047f, -0.0624806f,
  -0.1862223f, -0.3107876f, -0.0665695f, +0.0560876f, -0.0592617f, -0.2660172f, -0.0471356f, +0.0074959f,
  -0.3347661f, -0.0735530f, +0.0572318f, +0.0689777f, -0.1934380f, +0.2685737f, -0.2486638f, -0.1237704f,
  -0.1688645f, +0.0277922f, -0.1950075f, -0.1428566f, +0.0933668f, -0.0455203f, +0.2778935f, -0.6549532f,
  -0.0756654f, -0.1080441f, -0.0792529f, +0.0288384f, +0.1602534f, +0.0896079f, -0.2935214f, -0.1812249f,
  -0.2241203f, +0.1064495f, -0.1691204f, -0.3611824f, -0.1399873f, -0.1213486f, +0.0873401f, +0.0485787f,
  +0.0988425f, -0.1030992f, -0.0722371f, +0.1534356f, +0.0497453f, +0.0517577f, +0.0595611f, +0.1032304f,
  +0.1246030f, -0.3216967f, -0.1313269f, +0.0167499f, -0.0220124f, -0.1229656f, -0.1095491f, -0.0837156f,
  +0.0753868f, +0.0054602f, +0.0726045f, +0.0409494f, +0.0037413f, -0.0639744f, -0.1439392f, +0.1525042f,
  +0.1828871f, -0.0976232f, -0.1329612f, +0.0164932f, +0.1369949f, +0.0125297f, -0.1629299f, +0.1791695f,
  +0.1146740f, +0.0414351f, -0.1071845f, +0.0832602f, +0.0342501f, -0.0177224f, +0.1293523f, -0.1066601f
);

const float biases[4] = float[4](
  -0.1153685f, -0.0072205f, +0.0282608f, -0.0442953f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer35 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0587350f, +0.2012253f, -0.0366534f, -0.0170649f, -0.4582773f, -0.1663739f, +0.0891902f, -0.0977677f,
  +0.2425075f, +0.2739263f, +0.0998825f, +0.1608682f, -0.5977538f, +0.1547606f, -0.0514978f, -0.5012957f,
  -0.0766540f, +0.0263340f, -0.0288081f, +0.1290838f, -0.1571745f, +0.2029458f, -0.0481440f, -0.0147841f,
  +0.2100319f, -0.0699329f, +0.0143863f, +0.1525891f, -0.0522052f, -0.0595623f, +0.1029199f, +0.0269716f,
  +0.0632167f, -0.0287661f, +0.0474253f, +0.4167474f, -0.4478571f, +0.3575099f, -0.1825190f, +0.1361803f,
  +0.2039321f, -0.1401206f, +0.1699800f, +0.1456344f, +0.0806403f, +0.0481456f, +0.1237614f, +0.0328370f,
  -0.1160366f, -0.0963548f, +0.1742827f, +0.1880767f, -0.3082426f, +0.0883050f, +0.0316609f, +0.0059883f,
  +0.0556549f, -0.1049676f, +0.1114737f, +0.3192440f, -0.0743032f, +0.2367390f, -0.1367434f, +0.2055082f,
  +0.0196487f, +0.0912791f, +0.0748503f, +0.0507108f, -0.1113040f, +0.1146890f, -0.0503881f, -0.2306781f,
  +0.1628410f, -0.1501843f, +0.0366492f, -0.0158475f, +0.3449456f, -0.1078909f, +0.1617994f, +0.0669832f,
  -0.1009937f, -0.0680458f, +0.0917018f, -0.1465590f, -0.1967169f, -0.1464541f, -0.2764495f, -0.0994948f,
  -0.1618505f, -0.2409780f, -0.2570426f, -0.0071779f, -0.0103174f, -0.1053847f, -0.0409512f, +0.1799272f,
  +0.0991277f, -0.0308693f, -0.0176495f, +0.1415132f, +0.2912706f, -0.1248893f, +0.1113402f, -0.2202701f,
  +0.1004205f, +0.0088619f, +0.1487531f, +0.2989516f, +0.3933344f, +0.0073025f, +0.3054800f, +0.0600883f,
  -0.2027008f, +0.1104556f, +0.2386746f, +0.0003300f, -0.1191043f, -0.1883310f, +0.0914392f, +0.1546683f,
  +0.1805407f, +0.0203703f, +0.1290700f, +0.0451603f, -0.3303488f, +0.3015492f, -0.1657505f, +0.0551120f,
  -0.1590760f, -0.0837119f, +0.1435606f, +0.0053132f, -0.4315956f, -0.6448733f, -0.0302518f, -0.2698718f,
  +0.0080382f, -0.1644565f, -0.1118255f, -0.1251509f, +0.1201232f, +0.1487787f, -0.1632329f, -0.0272853f,
  -0.0585409f, -0.0619695f, -0.0995856f, -0.0528870f, +0.1806298f, -0.0953281f, +0.0018391f, -0.0301290f,
  +0.1417571f, +0.2153563f, -0.0468900f, -0.0926762f, +0.2514807f, +0.0901461f, +0.1328031f, +0.0034925f,
  -0.1071608f, +0.2617202f, -0.1682679f, +0.0898168f, -0.0076564f, +0.0740671f, +0.0125528f, -0.2807527f,
  +0.2835731f, +0.1070381f, +0.0570039f, -0.1800632f, +0.2880883f, +0.3105977f, -0.1553904f, +0.0761157f,
  +0.1319432f, -0.1633701f, +0.0805641f, -0.0883125f, +0.4503202f, +0.2215590f, -0.2763920f, -0.0893301f,
  +0.0778815f, +0.1252086f, -0.0942004f, -0.2636520f, -0.2163682f, +0.1252411f, -0.0695219f, -0.1480657f,
  +0.0269906f, -0.2070783f, -0.0941822f, -0.0056221f, +0.0200939f, +0.0526886f, +0.1633493f, -0.2123018f,
  -0.3609678f, +0.0142349f, -0.2909708f, -0.1606684f, +0.2058135f, +0.0987480f, +0.2409896f, +0.0880476f,
  -0.0364457f, -0.0665249f, -0.1076250f, -0.1662461f, +0.4250603f, -0.2959405f, +0.2714805f, -0.0088881f,
  +0.0100855f, +0.0926218f, -0.2156175f, +0.0760889f, -0.0119766f, +0.0220133f, +0.1673776f, +0.0524349f,
  +0.1289287f, -0.0981163f, +0.0118390f, -0.1644852f, -0.0524851f, +0.1258017f, -0.1077003f, -0.0328145f,
  -0.0123579f, +0.0183122f, +0.2635840f, +0.0408963f, -0.0058098f, -0.0850526f, -0.1273510f, -0.1293597f,
  -0.2884907f, +0.3924960f, +0.3395968f, +0.1031486f, +0.0983322f, -0.3497154f, -0.1355823f, +0.0568670f,
  -0.1596830f, +0.0397981f, -0.0387760f, +0.2225803f, +0.0405151f, -0.0296266f, +0.1583241f, -0.2413489f,
  +0.0606443f, -0.0537663f, +0.1041323f, +0.3986114f, -0.0435720f, +0.0089278f, +0.1864166f, +0.1577888f,
  -0.0817263f, +0.3594987f, -0.0408397f, -0.0520822f, -0.0069369f, +0.1475184f, +0.0883811f, -0.1632818f,
  +0.1283711f, -0.2392191f, -0.2061789f, -0.0573609f, -0.1808592f, -0.1115370f, +0.2731217f, -0.1139555f,
  -0.3589681f, -0.1018430f, -0.0144882f, +0.2044085f, +0.0446124f, -0.1962264f, +0.2142383f, -0.1406485f
);

const float biases[4] = float[4](
  +0.0372271f, +0.0540066f, +0.0345249f, +0.0412320f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer35 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2533600f, -0.2735144f, +0.4455870f, -0.5038497f, -0.1062622f, +0.7244381f, +0.0215395f, +0.0470187f,
  -0.0639148f, +0.2351411f, -0.1862427f, -0.0566882f, +0.2215225f, +0.4721065f, -0.7039033f, -0.2272027f,
  -0.0718403f, +0.0368363f, +0.0218015f, +0.1155235f, -0.0865047f, -0.2479738f, +0.0767963f, +0.0067106f,
  +0.0495693f, -0.3477429f, +0.2782884f, -0.0271852f, -0.2467738f, -0.2907876f, +0.6189245f, +0.3517763f,
  +0.0789205f, -0.2638452f, +0.3552708f, -0.0355201f, +0.0246035f, +0.1356222f, +0.0069673f, +0.1011053f,
  +0.1715220f, -0.0265828f, +0.2370321f, +0.1080173f, +0.2466445f, +0.0686535f, -0.1632331f, -0.0091335f,
  +0.3459575f, -0.1674077f, -0.2136911f, -0.1277796f, +0.2874824f, +0.1586985f, -0.2820630f, +0.0200406f,
  -0.0054583f, +0.0384108f, +0.1504270f, -0.0105641f, -0.0163404f, +0.2382150f, -0.0565028f, +0.1593481f,
  +0.1538211f, -0.0326528f, +0.0290190f, +0.0060696f, -0.0846879f, +0.1473168f, +0.0394723f, +0.1416750f,
  +0.0733796f, +0.0101466f, -0.1966819f, +0.2349896f, -0.2014340f, -0.2084089f, -0.0860486f, +0.3098569f,
  +0.1999961f, -0.3322430f, -0.1920169f, +0.4689717f, +0.0692539f, +0.5483316f, +0.1233374f, -0.3805799f,
  -0.0440621f, -0.0185212f, +0.4492450f, +0.1606399f, -0.1451029f, -0.1528446f, +0.0324290f, -0.0294314f,
  +0.1522734f, -0.6330091f, -0.0116890f, +0.7629296f, +0.0919860f, +0.2032576f, +0.2316485f, -0.0201631f,
  -0.1192255f, +0.6335863f, +0.5998322f, -0.3483483f, -0.3123020f, +0.0480041f, -0.2264292f, +0.0095738f,
  +0.2202231f, +0.3114128f, -0.0173155f, +0.2761100f, -0.1715532f, +0.0825416f, -0.0647665f, -0.0906629f,
  -0.1738297f, -0.0246604f, -0.2742300f, -0.0945430f, -0.0758544f, +0.1830868f, +0.2588209f, +0.0532589f,
  +0.4399451f, -0.0500456f, +0.4466681f, -0.0804447f, -0.2979889f, -0.5604966f, -0.2712785f, +0.3696571f,
  +0.0517873f, +0.1744379f, -0.3695259f, +0.2266941f, +0.1493836f, +0.4030440f, -0.1726130f, -0.2357267f,
  -0.0616824f, +0.0429700f, +0.2113326f, -0.1440690f, +0.1369917f, -0.1346463f, +0.0023696f, -0.2409405f,
  -0.1212109f, +0.1167347f, -0.1294090f, +0.1886136f, +0.0430267f, -0.2030363f, -0.0803259f, +0.0375931f,
  -0.2622554f, -0.0057032f, +0.0107092f, +0.0889733f, +0.0085286f, +0.0561079f, +0.1270436f, +0.1530725f,
  -0.0693724f, -0.0327603f, +0.4300874f, -0.2833667f, -0.1182528f, -0.2628562f, +0.0159914f, -0.1724875f,
  -0.2617057f, -0.2834598f, -0.2277957f, +0.2251701f, +0.4942156f, -0.0637378f, +0.0030152f, +0.1046638f,
  -0.1023697f, +0.2067147f, -0.1694783f, +0.1482729f, -0.2922069f, -0.2227276f, -0.0621159f, +0.0124453f,
  +0.1898449f, -0.1447870f, +0.1407134f, -0.2846725f, +0.2285509f, -0.0789357f, +0.3460725f, +0.0605893f,
  -0.2742845f, -0.1933558f, -0.2039188f, +0.2043221f, -0.0957202f, -0.1290249f, +0.2384571f, +0.1322726f,
  -0.0834768f, -0.3636760f, -0.2156616f, +0.1474319f, +0.1670685f, -0.0510325f, +0.2086525f, +0.1657867f,
  +0.0599816f, +0.0931256f, -0.0952960f, -0.0914174f, +0.1179633f, -0.1394113f, -0.0919178f, +0.0179631f,
  +0.0333103f, +0.2273686f, -0.2678014f, +0.0284758f, -0.3412226f, -0.0780256f, -0.2610974f, -0.2413051f,
  -0.1711898f, +0.0146389f, -0.2358069f, -0.0464099f, +0.1952628f, -0.1428176f, -0.0078983f, -0.0257720f,
  -0.0907160f, -0.1668089f, +0.0969593f, -0.2864964f, +0.5530601f, -0.2199043f, -0.0814589f, +0.1183654f,
  +0.0573426f, -0.1360333f, +0.0162787f, -0.4205889f, +0.4107371f, -0.0340833f, -0.2181889f, +0.1393465f,
  +0.0989012f, -0.0002269f, +0.1693740f, -0.0100633f, +0.0711409f, +0.0205839f, +0.0380334f, -0.0732109f,
  +0.0874966f, -0.0357879f, -0.0843440f, -0.1512893f, +0.4767957f, -0.1872476f, +0.0928004f, -0.0176990f,
  -0.1301214f, +0.0120677f, -0.0289908f, -0.4277263f, +0.0024074f, -0.5522956f, +0.2418844f, +0.1591859f,
  -0.2857078f, +0.1766032f, -0.1268513f, +0.0824167f, -0.1844104f, -0.1264265f, +0.0220011f, +0.0351292f
);

const float biases[4] = float[4](
  -0.0067766f, -0.0419475f, +0.0048324f, -0.0039260f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer36 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0790873f, +0.0980733f, -0.0470325f, +0.2587068f, -0.0643905f, +0.1512391f, -0.0711761f, -0.0420546f,
  -0.0540266f, -0.0384308f, +0.1253883f, -0.2372734f, -0.0596369f, -0.1274278f, +0.0427521f, +0.2266949f,
  +0.1548307f, -0.0130441f, -0.0139906f, +0.1150011f, +0.0297340f, +0.3437540f, +0.0238339f, -0.0236028f,
  -0.1189784f, +0.2169876f, -0.0886177f, -0.1152095f, +0.0278898f, +0.2926912f, -0.1153634f, +0.2221632f,
  +0.2661142f, -0.1991900f, +0.0431583f, +0.0097105f, -0.0646758f, -0.1591401f, +0.1975603f, +0.3036099f,
  -0.0102251f, +0.0688735f, -0.0926530f, +0.1717961f, +0.0289551f, +0.3566017f, -0.0152859f, +0.1152541f,
  +0.2081396f, +0.0310209f, -0.0071959f, +0.0073710f, +0.0800189f, -0.0740101f, -0.0112848f, -0.1039075f,
  -0.0622814f, -0.1123108f, -0.0352049f, -0.1522838f, +0.2617824f, +0.2201947f, +0.1464910f, -0.1683135f,
  +0.0781228f, -0.1272073f, +0.0583938f, -0.2720817f, +0.2966428f, -0.3456171f, +0.1419748f, -0.0700310f,
  +0.2063170f, +0.0916922f, +0.0156560f, -0.0763352f, +0.0382487f, +0.0711210f, -0.0355753f, +0.0188770f,
  -0.1704727f, +0.4589590f, -0.1549141f, -0.1933489f, -0.1302575f, -0.5267721f, -0.3330382f, +0.1722475f,
  +0.1955521f, +0.1888282f, -0.0369517f, -0.2042840f, +0.0987548f, +0.3034432f, +0.0245940f, -0.1510303f,
  +0.2795010f, -0.1933888f, -0.2125905f, +0.1007628f, -0.0675322f, -0.0017409f, +0.0460823f, -0.0873306f,
  -0.3188416f, -0.0535634f, -0.0689736f, +0.0338310f, +0.1588671f, +0.0127419f, -0.0950536f, +0.3461154f,
  -0.0044093f, +0.1767326f, +0.0565881f, -0.3175220f, +0.6179870f, -0.3512372f, -0.2777582f, +0.1302147f,
  +0.0979864f, +0.0254497f, -0.3201461f, -0.0689752f, -0.0151798f, -0.2433444f, +0.0272041f, -0.1596253f,
  -0.0936942f, +0.1218417f, -0.2757340f, -0.0362356f, +0.1305729f, +0.1633343f, +0.0228965f, +0.0520240f,
  +0.0408524f, +0.2115208f, +0.1577219f, +0.1278378f, -0.2096705f, +0.1623704f, -0.2192811f, +0.2202169f,
  -0.1257482f, -0.0119512f, +0.0075613f, +0.1128967f, -0.0466240f, -0.1608465f, -0.2552133f, +0.0592324f,
  -0.2536403f, -0.0643714f, +0.2214675f, -0.3028133f, +0.1006901f, -0.1075351f, -0.0782714f, -0.2546131f,
  -0.1679808f, -0.1016816f, -0.2593358f, +0.1317086f, +0.0506160f, -0.2359684f, +0.0674772f, -0.2366078f,
  +0.0925241f, +0.0140292f, -0.1598924f, -0.2242218f, -0.1372813f, -0.2172375f, -0.1160762f, +0.0146182f,
  +0.2350324f, -0.0006922f, -0.0363070f, -0.0034511f, -0.2208583f, -0.0949243f, +0.2404708f, -0.2072892f,
  -0.0852615f, -0.1740635f, -0.1217098f, -0.1868761f, -0.1468185f, -0.2019862f, +0.1980608f, -0.4651224f,
  +0.0420331f, -0.0261941f, -0.2581166f, -0.0684928f, +0.0574170f, -0.1400043f, +0.1202936f, +0.1818626f,
  +0.2454049f, -0.0400318f, -0.2665408f, +0.2165858f, -0.1973768f, -0.0697032f, +0.0090775f, +0.1365281f,
  -0.1857251f, -0.1028205f, -0.1535410f, +0.3680278f, +0.2487341f, +0.1371007f, +0.0566316f, -0.0346266f,
  +0.1319468f, +0.0696292f, +0.1723632f, -0.3250967f, -0.0949989f, -0.1377258f, -0.1599912f, -0.0780007f,
  -0.0870696f, -0.0682804f, +0.0117840f, -0.0036000f, +0.0667669f, +0.1403381f, -0.3874044f, +0.0476220f,
  +0.0812860f, -0.0203743f, -0.2668785f, +0.1613119f, +0.2538147f, -0.0126241f, -0.2808783f, -0.1719345f,
  +0.0983527f, -0.0241801f, +0.2568829f, -0.2020081f, +0.0354133f, +0.1662685f, +0.1993681f, -0.2306632f,
  +0.1710116f, -0.2022176f, -0.1414748f, -0.2618183f, +0.2040221f, -0.1613455f, -0.2179478f, +0.0019579f,
  +0.1166855f, +0.0350658f, -0.2658820f, +0.0388477f, +0.9275674f, +0.0877659f, -0.0164951f, -0.0650440f,
  -0.0549939f, +0.0339429f, +0.2091738f, +0.1303057f, +0.0212895f, -0.1191980f, +0.0918845f, -0.2095482f,
  -0.1818139f, -0.1286417f, -0.0488282f, -0.0482285f, +0.3939845f, -0.2954617f, -0.0078102f, -0.0244547f,
  +0.0138301f, -0.0884271f, +0.0344028f, -0.0257013f, +1.0092729f, -0.0297815f, -0.1605294f, +0.0050108f
);

const float biases[4] = float[4](
  -0.0059831f, +0.0280020f, +0.0369621f, +0.0629615f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer36 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1636371f, -0.0201083f, +0.1340980f, -0.2253083f, -0.0392722f, -0.2964625f, +0.4608747f, -0.1014658f,
  +0.0179447f, +0.2636690f, -0.0006495f, +0.1802143f, -0.1130797f, -0.0496589f, -0.1592873f, -0.4156441f,
  -0.2473994f, +0.2106263f, +0.0325406f, -0.1047496f, -0.0195762f, -0.1494747f, +0.0123881f, -0.1495409f,
  -0.1336204f, +0.0494748f, +0.0004725f, +0.2083720f, +0.0463691f, +0.0332732f, +0.2362431f, +0.1986029f,
  +0.1342845f, -0.1820821f, +0.0418735f, +0.0345033f, -0.1296650f, -0.3900337f, -0.3285961f, +0.0709432f,
  -0.2436115f, -0.2291112f, -0.1937889f, -0.4457788f, -0.5092585f, -0.1173733f, -0.2942452f, +0.2197917f,
  +0.0269644f, +0.0563293f, +0.1194766f, +0.0012230f, -0.3274700f, -0.2500949f, +0.0147260f, +0.1741207f,
  +0.3025184f, +0.2331259f, +0.0318682f, +0.0167200f, +0.5737957f, -0.2176404f, -0.1018067f, -0.0054641f,
  +0.0680123f, -0.0641666f, +0.2044811f, +0.2140050f, +0.0359516f, +0.1389897f, -0.0143298f, +0.3234855f,
  -0.0586914f, -0.0307034f, -0.1385035f, +0.3305824f, +0.0041029f, +0.2506211f, +0.1212234f, +0.3645531f,
  -0.0845254f, +0.3326885f, -0.0792421f, +0.2531168f, +0.2881403f, -0.3624292f, +0.1169950f, +0.1955428f,
  -0.3320125f, +0.0035358f, +0.2345399f, -0.0179892f, +0.1075831f, -0.0536977f, +0.3348213f, +0.1044653f,
  +0.1971561f, +0.3367391f, -0.2456526f, -0.1127790f, +0.0491000f, -0.0231205f, -0.0671490f, +0.3562459f,
  +0.0208968f, +0.2103354f, +0.0983915f, +0.1609441f, -0.0559490f, +0.3694313f, -0.0311591f, +0.3195767f,
  +0.0927806f, +0.2605873f, -0.0803748f, -0.1569460f, -0.6136277f, -0.5118033f, +0.3573925f, +0.1859771f,
  +0.3852131f, +0.1019289f, -0.0901150f, -0.0241142f, +0.0820210f, +0.0958364f, -0.1828008f, +0.4663056f,
  -0.1176319f, +0.0470560f, -0.0708965f, -0.0274325f, -0.2360020f, +0.3223838f, -0.0498072f, +0.0571475f,
  +0.2605636f, +0.5436908f, +0.1284182f, -0.2518644f, -0.6018851f, -0.2224843f, -0.0376364f, -0.2005324f,
  -0.1490051f, +0.1021946f, -0.2418035f, +0.1581983f, +0.0376013f, -0.1124425f, -0.1810884f, -0.1196571f,
  +0.1940499f, -0.0966155f, +0.1678873f, +0.2674518f, +0.0753605f, -0.1062738f, +0.0433162f, -0.0748654f,
  -0.1560223f, -0.0036162f, -0.0443092f, -0.0163114f, +0.0395721f, -0.3936369f, -0.1707121f, -0.1514329f,
  -0.1291047f, -0.0909351f, +0.1008472f, -0.1662017f, +0.0098726f, +0.0364794f, -0.0035606f, -0.3107193f,
  -0.2488937f, -0.1040669f, +0.0027016f, +0.1927529f, +0.1155243f, -0.2787302f, -0.2880493f, -0.1477062f,
  +0.1524296f, +0.0174581f, -0.3191844f, +0.1098266f, +0.3424845f, -0.5458540f, +0.0116468f, -0.1296227f,
  +0.0589028f, +0.1505369f, +0.1950848f, +0.0014264f, -0.1145063f, -0.3111645f, -0.0473027f, +0.0542138f,
  -0.1754487f, +0.2458370f, +0.0976910f, +0.0987857f, +0.0163522f, -0.3410538f, -0.2326348f, +0.1117307f,
  +0.0784292f, +0.1295846f, +0.0592860f, +0.1302683f, -0.0472278f, +0.0423459f, -0.2077803f, -0.2886742f,
  +0.2002185f, +0.2857469f, +0.0029251f, -0.2096623f, -0.0367974f, -0.1764174f, +0.0236175f, +0.1988743f,
  -0.1546957f, +0.2991393f, -0.2163113f, -0.1245417f, -0.0537266f, +0.2772095f, -0.0795624f, -0.2200862f,
  +0.0797511f, -0.0858037f, -0.0068379f, +0.1466371f, +0.0232502f, -0.2456969f, +0.1672755f, +0.1375962f,
  -0.2292906f, -0.0182637f, -0.1079817f, -0.0455653f, -0.1852104f, -0.0808314f, -0.0972887f, +0.2685779f,
  -0.3802710f, -0.1711366f, -0.3711977f, -0.1284061f, -0.1531039f, +0.5202560f, -0.2597599f, +0.1549186f,
  +0.0353928f, +0.1079354f, +0.0204865f, -0.0459786f, +0.2792705f, +0.0386232f, +0.2134080f, +0.2166027f,
  -0.4142220f, -0.1573382f, +0.1222527f, -0.0001410f, +0.0939112f, +0.1806673f, -0.0352650f, +0.0976179f,
  +0.4370059f, -0.0379088f, +0.2512612f, +0.2570042f, -0.0053242f, -0.2072278f, +0.0124137f, +0.1022762f,
  -0.0315177f, -0.0437546f, +0.0502689f, +0.0019104f, +0.1459913f, +0.4506553f, +0.0075456f, +0.0934611f
);

const float biases[4] = float[4](
  -0.0568353f, +0.0085845f, +0.0205070f, -0.0840490f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer37 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1643122f, -0.0894323f, -0.0285177f, +0.1013050f, +0.0226352f, -0.0220588f, -0.0710395f, +0.0797415f,
  +0.1519934f, +0.6009047f, -0.2819948f, +0.5468897f, +0.3009669f, -0.1883682f, +0.0866847f, -0.1670321f,
  -0.0205785f, -0.2502143f, +0.1965955f, -0.3291955f, -0.1411913f, +0.1449530f, +0.2418012f, +0.0204524f,
  +0.0757357f, -0.1848248f, -0.3765151f, -0.0237153f, -0.0965762f, +0.1427967f, +0.0243803f, +0.3704818f,
  +0.2017080f, +0.5912578f, -0.1886490f, +0.5447815f, +0.5079867f, -0.4747854f, -0.3336899f, +0.0360849f,
  +0.0264724f, +0.0171247f, +0.1524835f, -0.0643730f, -0.0568372f, -0.0886430f, +0.3276414f, +0.2269938f,
  -0.0506434f, +0.0696039f, -0.0823816f, -0.1179979f, -0.2498587f, -0.0744014f, -0.0050100f, -0.0921635f,
  -0.1738272f, +0.3592317f, +0.3329644f, +0.2213822f, +0.1470859f, +0.5943967f, -0.4225801f, -0.2518991f,
  +0.1234659f, +0.0112565f, -0.1121851f, +0.1501434f, +0.0386089f, -0.3837144f, +0.3983960f, -0.0525285f,
  +0.3415222f, -0.0693620f, +0.1872961f, -0.0143204f, +0.2767027f, +0.1335655f, -0.0532387f, +0.2077701f,
  -0.3045389f, -0.0474680f, -0.1157211f, -0.3146787f, -0.2300112f, -0.2721598f, +0.0626264f, +0.0043431f,
  -0.1816233f, +0.0439268f, +0.2487676f, -0.1369523f, -0.0696967f, +0.0999013f, +0.3416965f, -0.1446406f,
  +0.2333942f, -0.0300480f, +0.4972478f, +0.2124444f, +0.4061069f, +0.1179980f, +0.3677301f, +0.1366051f,
  +0.1149884f, -0.5361487f, -0.3939226f, +0.2200693f, +0.2353146f, -0.0168943f, -0.3222597f, +0.5740886f,
  +0.0364397f, -0.1956280f, -0.0172309f, +0.3823709f, -0.1123532f, -0.1975403f, -0.0196027f, +0.1949161f,
  +0.3295216f, -0.1437837f, -0.0365221f, +0.2235881f, +0.1657973f, +0.0866140f, -0.1026912f, +0.1822968f,
  -0.0473590f, -0.0671422f, -0.2006106f, +0.1157577f, +0.0859817f, -0.4348125f, -0.1090527f, +0.1544906f,
  -0.2309838f, +0.1321000f, -0.3316076f, +0.3088969f, +0.0734645f, -0.0919949f, +0.2799131f, +0.3684157f,
  -0.0995068f, +0.0486472f, +0.2066858f, -0.0843851f, -0.1525785f, +0.1603427f, -0.0701706f, -0.0730460f,
  +0.0510812f, -0.2849243f, +0.3479322f, -0.4555755f, -0.1794011f, +0.1091311f, +0.0809286f, -0.0281316f,
  -0.0542408f, -0.1759877f, -0.0579449f, -0.2803864f, +0.2918185f, -0.0629579f, -0.4573669f, +0.0163825f,
  -0.0407099f, -0.1750339f, +0.2384787f, -0.2350348f, -0.2561895f, +0.2193119f, +0.2729066f, -0.0552017f,
  +0.2422778f, +0.2773625f, +0.2680358f, -0.2611784f, +0.1145602f, +0.2807910f, -0.1869554f, -0.2683637f,
  +0.0801400f, -0.1229264f, -0.0174202f, -0.3714268f, -0.1126856f, +0.3230739f, -0.3932363f, -0.0234599f,
  +0.0722721f, -0.1334513f, -0.0859611f, -0.1497156f, -0.0150469f, -0.0033272f, -0.0021737f, +0.1502527f,
  -0.0123313f, +0.0177411f, +0.0111157f, -0.0803257f, +0.3879426f, +0.2723551f, -0.1191482f, +0.2169346f,
  +0.0854611f, +0.1783617f, +0.1706234f, -0.2706577f, -0.1808559f, +0.2904499f, -0.0509188f, +0.1431768f,
  +0.0068220f, +0.0487051f, +0.0754722f, +0.1077528f, +0.0285012f, -0.1906092f, +0.0535039f, -0.1069148f,
  +0.3197399f, -0.2515078f, -0.3205670f, +0.2953238f, -0.0773535f, +0.0984235f, -0.0288913f, -0.0871291f,
  +0.1226823f, +0.0985842f, -0.1857835f, +0.3554332f, -0.0317278f, +0.0653613f, -0.2702823f, -0.1767703f,
  +0.0556774f, -0.1998195f, +0.2256521f, +0.2174662f, +0.1792875f, -0.2208590f, -0.1605023f, -0.2604934f,
  +0.4678316f, +0.6747664f, -0.1646496f, -0.3380271f, -0.4263466f, -0.1050094f, -0.0558468f, +0.1101970f,
  -0.0421824f, -0.0311889f, -0.2380925f, -0.3669551f, +0.2133913f, +0.1035284f, +0.2204597f, +0.1294914f,
  -0.0299455f, -0.1579806f, +0.3076801f, +0.3195839f, +0.0707264f, -0.1022669f, -0.0041707f, -0.0008228f,
  +0.4518860f, +0.2186438f, -0.2918989f, -0.4368559f, +0.2130017f, -0.2742779f, -0.3860040f, +0.2838290f,
  +0.0616707f, +0.2008417f, -0.0285510f, +0.0548182f, -0.2063361f, +0.2837450f, -0.1444763f, -0.0526837f
);

const float biases[4] = float[4](
  -0.0645429f, -0.0637067f, -0.0246042f, -0.0472851f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer37 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3598252f, -0.0754491f, -0.0602135f, +0.1642727f, -0.1213048f, +0.0304481f, +0.0107171f, -0.0183193f,
  +0.0494206f, +0.2021163f, +0.0361943f, +0.1066154f, +0.1626384f, -0.0439619f, -0.0451965f, -0.2051169f,
  +0.0534161f, +0.0900359f, +0.0882743f, +0.2746492f, -0.3057488f, +0.1150461f, +0.0397387f, -0.1276872f,
  -0.0547586f, -0.0263223f, -0.1434520f, +0.5528006f, -0.2816871f, -0.4932445f, -0.0780904f, +0.0549347f,
  +0.1733912f, -0.3294111f, -0.0090250f, +0.2821577f, +0.5352874f, -0.1801576f, +0.4576060f, -0.0823180f,
  -0.0899518f, -0.0504927f, +0.3045571f, +0.1496259f, -0.2040155f, -0.1875685f, -0.0546570f, +0.0377661f,
  -0.0373335f, -0.1206553f, +0.0374123f, +0.0820020f, -0.2329577f, +0.0991032f, +0.0904898f, +0.0906434f,
  +0.0529572f, +0.0728211f, +0.1063444f, +0.0541460f, -0.7161139f, -0.2060163f, -0.2245248f, -0.2348977f,
  +0.0616242f, +0.0060750f, -0.0646346f, +0.2197416f, +0.0427548f, +0.2404408f, -0.1473730f, -0.1689005f,
  +0.0407139f, -0.0112438f, +0.1055641f, -0.0383715f, +0.0936058f, -0.1731279f, +0.1468365f, -0.1665030f,
  -0.0206292f, -0.0093414f, +0.1731662f, -0.2866019f, -0.2149934f, -0.0532077f, -0.2642502f, +0.1900386f,
  +0.0437142f, -0.0108211f, +0.0333053f, -0.2528846f, +0.3083478f, +0.0275948f, +0.1016474f, +0.0476823f,
  -0.0158557f, +0.1456121f, -0.0163186f, +0.6194523f, -0.3602535f, -0.0441122f, +0.1526131f, +0.1869725f,
  +0.2579143f, -0.2643195f, -0.2422358f, -0.1419482f, -0.2155201f, +0.0703350f, -0.3186948f, +0.1704580f,
  +0.2187526f, -0.0051457f, -0.0633354f, +0.4258200f, -0.3224423f, +0.2674792f, -0.0074765f, +0.0111918f,
  +0.0443887f, +0.5023727f, +0.0074063f, +0.1288139f, +0.1120164f, -0.4145957f, +0.0110900f, +0.4212620f,
  +0.0276070f, -0.4164729f, +0.2479744f, +0.2926279f, -0.3837567f, +0.0864967f, -0.2161471f, +0.2379979f,
  -0.0759730f, -0.1907400f, -0.2702384f, -0.0128693f, +0.0818143f, +0.1481674f, -0.2809754f, -0.0683917f,
  +0.1496169f, -0.0284006f, -0.0320370f, -0.0323865f, -0.2100796f, +0.0383667f, +0.0969459f, -0.1329581f,
  -0.0004599f, +0.2046199f, -0.2247446f, +0.3736614f, +0.3376746f, -0.1714864f, +0.0186593f, -0.0238015f,
  +0.0560113f, -0.2112181f, -0.2027605f, -0.1986476f, -0.1121235f, +0.2393406f, -0.0589107f, +0.1550869f,
  +0.0349437f, -0.3800472f, +0.0582649f, +0.0537630f, -0.2592023f, -0.1171293f, -0.4708302f, -0.0884494f,
  -0.0811403f, +0.2415698f, -0.8054764f, +0.4555610f, +0.5199605f, -0.1710855f, -0.0927881f, +0.1981321f,
  +0.3289223f, +0.0048076f, +0.3273405f, -0.3405089f, -0.3783530f, -0.1699260f, +0.2100400f, +0.2503008f,
  +0.1103202f, -0.6154224f, -0.1819826f, +0.0488757f, +0.0500640f, -0.1580932f, -0.1616996f, +0.3361558f,
  -0.2516316f, +0.1566833f, -0.0511033f, +0.0931839f, -0.4360754f, +0.1936152f, -0.3588011f, +0.1713468f,
  +0.5182967f, -0.0695711f, +0.2230150f, +0.2782641f, +0.2202639f, -0.3960536f, +0.1684430f, +0.3913840f,
  -0.0254555f, +0.1830437f, -0.1638821f, -0.4253906f, +0.1205106f, +0.0987438f, -0.2835211f, +0.1098627f,
  +0.2133555f, +0.2248124f, -0.1687023f, -0.4414259f, -0.2492610f, -0.1764905f, -0.3256195f, -0.0923152f,
  -0.1852779f, +0.1526172f, -0.2837577f, -0.3428295f, +0.1485410f, +0.0424182f, -0.3572673f, +0.0400207f,
  +0.0244171f, +0.1425854f, -0.1749054f, -0.2199539f, +0.1459555f, -0.0515208f, -0.3829217f, +0.1180373f,
  +0.1048001f, +0.0793614f, -0.2001365f, -0.2578002f, +0.0019561f, +0.0341658f, +0.2598712f, +0.0675731f,
  -0.2008388f, +0.1386635f, -0.4424092f, -0.2067915f, +0.1257008f, -0.1862199f, +0.0668342f, +0.3556570f,
  +0.1575720f, -0.2373176f, -0.0078499f, -0.3607773f, +0.0831240f, -0.0089110f, -0.2021278f, +0.1139075f,
  +0.0907758f, -0.1830521f, -0.5079466f, -0.3090467f, +0.2509716f, +0.2636144f, +0.2485446f, +0.0634980f,
  +0.1453905f, -0.3470528f, -0.1777818f, +0.0417799f, -0.1295986f, -0.0054106f, +0.0594828f, +0.3046534f
);

const float biases[4] = float[4](
  +0.0560618f, -0.0568928f, -0.0922616f, -0.0639758f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer38 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0536919f, -0.0831337f, +0.0590335f, -0.0668433f, -0.0743364f, -0.1483859f, +0.0903146f, +0.0677586f,
  +0.2137218f, -0.4220284f, +0.2037164f, -0.2577555f, -0.1095036f, +0.1353676f, +0.0120654f, -0.2419515f,
  -0.1640684f, +0.0731892f, +0.1407381f, -0.0195067f, +0.0307161f, -0.1725047f, +0.0412728f, +0.1115810f,
  -0.0847370f, -0.1199711f, +0.0004829f, -0.2082475f, -0.2013041f, -0.1947045f, -0.0000484f, -0.0847546f,
  -0.0370641f, -0.0665425f, -0.3108000f, -0.2965992f, +0.0927701f, -0.1056539f, +0.0279084f, -0.2205001f,
  -0.0279398f, +0.3086780f, +0.0011630f, -0.1574047f, +0.1710483f, -0.1578096f, -0.0318219f, -0.0516500f,
  -0.0150412f, +0.0953286f, -0.0713044f, -0.0395747f, +0.0577526f, -0.1460836f, -0.0409589f, -0.2828740f,
  +0.0409011f, +0.0937018f, -0.0816611f, +0.0741400f, +0.0159495f, +0.0308390f, -0.1261861f, -0.0866192f,
  -0.0398710f, -0.2852893f, +0.0334248f, -0.1323495f, -0.0893937f, -0.3197190f, +0.1095268f, +0.2623542f,
  -0.3776081f, +0.2349173f, +0.0403041f, -0.0843313f, -0.1170869f, +0.0560628f, +0.2076139f, -0.1549040f,
  -0.3353566f, +0.0327514f, +0.0130058f, -0.1434725f, +0.1414329f, +0.5863799f, +0.3490132f, +0.2565268f,
  +0.0017428f, +0.0409310f, -0.0470170f, -0.1720672f, -0.1374063f, -0.1221634f, +0.4672743f, -0.0206791f,
  -0.3335829f, +0.3251055f, -0.0605960f, +0.0562706f, -0.0898819f, +0.0883925f, +0.0670313f, -0.3250408f,
  +0.0623667f, -0.0144645f, -0.2168509f, -0.6443152f, +0.0758298f, +0.3337820f, +0.4327477f, +0.1574014f,
  -0.0479879f, -0.1224311f, +0.0199826f, +0.1489310f, -0.3721591f, -0.1010443f, +0.1862344f, -0.3107188f,
  -0.1648984f, +0.1884061f, -0.0028064f, +0.0840496f, +0.0640179f, +0.1903417f, +0.1563261f, -0.1182325f,
  -0.2235742f, -0.3984085f, -0.0129149f, -0.0571590f, -0.3511693f, -0.0462826f, +0.2438742f, -0.1226127f,
  +0.0262514f, +0.3372610f, +0.1840466f, +0.0605283f, -0.1477740f, +0.0254942f, +0.0224040f, +0.0692510f,
  +0.4211932f, +0.4354607f, -0.0198473f, -0.2694755f, +0.1805015f, -0.0289940f, -0.1186258f, -0.1071984f,
  -0.3178234f, +0.5626358f, +0.3229579f, +0.1214569f, -0.0695046f, -0.2514836f, +0.0479194f, -0.2210438f,
  -0.0454337f, -0.0695028f, +0.0034320f, -0.1548239f, +0.2898956f, -0.1164082f, -0.0249998f, -0.0905440f,
  +0.4506401f, -0.1798196f, +0.1703391f, -0.1989166f, +0.0262833f, -0.2465457f, -0.2194710f, +0.2959587f,
  -0.5327830f, +0.3012259f, +0.1742624f, +0.3133654f, -0.0477593f, -0.2325793f, +0.1230142f, -0.1497695f,
  +0.3589851f, +0.2637232f, -0.0240737f, -0.0133077f, +0.4599347f, -0.2883593f, -0.0084567f, -0.1590706f,
  -0.1088856f, +0.1782528f, +0.1585951f, -0.0879472f, -0.0496830f, +0.1160009f, +0.0563729f, -0.0205791f,
  -0.2234178f, +0.4824934f, -0.0451173f, -0.1253227f, +0.1543361f, +0.1670998f, -0.1808466f, -0.2081973f,
  +0.0503495f, -0.0481476f, -0.0434312f, -0.1484058f, -0.0994740f, +0.0834478f, +0.1228481f, +0.0049571f,
  +0.2746176f, -0.1285691f, -0.1110893f, -0.0153486f, +0.1784365f, +0.3148417f, -0.4068326f, -0.3050348f,
  -0.3576749f, +0.0358566f, -0.0560934f, +0.3888302f, +0.0580777f, -0.4743993f, -0.2523703f, -0.1061126f,
  -0.0059041f, -0.0152395f, -0.0723742f, -0.0173819f, -0.0492282f, -0.2573565f, -0.4744719f, -0.0613973f,
  +0.4827749f, +0.1493346f, -0.0232966f, -0.0292040f, +0.0496845f, -0.0751627f, -0.5385563f, +0.0125111f,
  -0.6127139f, +0.0590199f, -0.1520492f, -0.4614427f, +0.1564219f, -0.1523278f, -0.0261799f, -0.1125982f,
  +0.3672028f, -0.0756317f, -0.1500660f, -0.1199924f, -0.2085647f, -0.3507074f, -0.1686004f, +0.1263129f,
  +0.1053173f, -0.1410233f, -0.1195005f, -0.0497550f, +0.1774016f, +0.2007559f, -0.0054852f, -0.1510777f,
  +0.0721079f, -0.1330598f, -0.3784946f, -0.2966427f, +0.0322501f, -0.0017420f, -0.0780939f, +0.1083605f,
  +0.1162120f, +0.0646539f, +0.0661554f, -0.0269527f, +0.0902233f, +0.0884608f, -0.1489477f, -0.0318847f
);

const float biases[4] = float[4](
  -0.0038036f, +0.0312001f, +0.0278446f, +0.0377928f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer38 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0157805f, +0.3384281f, +0.2682589f, +0.0686810f, -0.0824615f, -0.0560731f, +0.0774025f, +0.1936561f,
  -0.0546862f, +0.1044451f, +0.1259962f, -0.1150286f, +0.5524288f, +0.3288230f, -0.1582268f, +0.1332979f,
  -0.1153981f, +0.0362563f, +0.3416387f, -0.2671055f, -0.0632248f, +0.0652890f, -0.0793392f, +0.1517167f,
  -0.1439774f, -0.0572653f, -0.1020061f, +0.2570749f, -0.0979363f, +0.0895518f, +0.3910056f, -0.3749596f,
  +0.5273164f, -0.0177538f, -0.4453031f, -0.1727519f, -0.5550157f, +0.2117186f, +0.0024168f, -0.4292110f,
  -0.0458768f, -0.3580126f, +0.2792036f, +0.0033887f, +0.4752553f, +0.1684980f, -0.4021154f, -0.2030649f,
  +0.0977495f, +0.2278650f, -0.4411166f, -0.0061172f, +0.0618829f, +0.1986743f, -0.0105634f, -0.0939735f,
  -0.0740316f, -0.1303007f, -0.0742321f, -0.2553611f, -0.1749442f, +0.1725267f, +0.1479663f, -0.3120902f,
  +0.0693403f, +0.0945343f, +0.2546524f, -0.1222752f, -0.2300086f, +0.1359501f, -0.1365878f, -0.0488446f,
  +0.2255929f, -0.2229659f, -0.0210731f, -0.4594560f, -0.1031428f, +0.1032263f, +0.1345048f, -0.1567504f,
  +0.0916918f, -0.2000427f, -0.1569812f, -0.3768865f, +0.0114070f, +0.1855977f, +0.3156965f, +0.0721782f,
  -0.1157112f, -0.1099679f, -0.0512435f, -0.0721303f, +0.0858279f, +0.2711604f, +0.3485622f, +0.1079294f,
  +0.1845322f, -0.0447107f, -0.0843010f, -0.1104589f, +0.0967364f, -0.1913027f, -0.0163147f, +0.2314155f,
  +0.3203271f, +0.4448106f, -0.1254741f, +0.7583773f, +0.1410401f, -0.0346896f, +0.7077281f, -0.1779764f,
  -0.4572435f, +0.1715739f, -0.1276187f, +0.3391174f, +0.1578975f, +0.0602356f, +0.2958278f, -0.3019516f,
  +0.2052303f, -0.0929333f, +0.1969730f, -0.0862922f, -0.0864081f, -0.0627038f, +0.0463636f, -0.0963683f,
  +0.1027908f, -0.1002489f, +0.3169855f, -0.1305453f, -0.2062428f, +0.0870139f, +0.0943835f, -0.2308066f,
  -0.2959536f, -0.1012335f, +0.0481923f, -0.0884930f, -0.1382137f, -0.0385290f, -0.0769010f, -0.3560048f,
  +0.1600117f, +0.1344824f, +0.0065407f, -0.1514150f, +0.0491851f, +0.4080195f, -0.4401338f, +0.0850387f,
  -0.2631664f, +0.3885956f, -0.0254959f, +0.4395596f, -0.1000609f, +0.3617035f, +0.3973128f, +0.1737004f,
  +0.1418606f, +0.0383009f, -0.1093233f, +0.1346125f, +0.1337067f, +0.2317249f, -0.1661907f, -0.0839124f,
  +0.1834232f, +0.0399627f, +0.0107563f, +0.1699196f, +0.2095526f, +0.3460049f, -0.3313065f, +0.1630498f,
  -0.3164212f, -0.4811001f, +0.0605042f, -0.2359014f, -0.0331530f, +0.3804654f, +0.1623078f, +0.1373514f,
  +0.1864061f, -0.1382566f, -0.3019876f, +0.1527144f, -0.2150430f, -0.2087379f, +0.1266122f, -0.0191803f,
  +0.1371203f, -0.2728306f, -0.2523122f, -0.0387914f, -0.1098423f, +0.2074614f, +0.0024369f, +0.0317770f,
  -0.1032832f, -0.2206797f, -0.0599614f, +0.0683687f, -0.1685895f, +0.2586060f, +0.3289252f, +0.2788505f,
  +0.1851140f, -0.2796577f, -0.1757916f, +0.2375816f, +0.2944858f, +0.2106191f, +0.0213992f, -0.2361964f,
  +0.2796713f, -0.1746359f, -0.0565299f, +0.2524898f, -0.0088971f, -0.0815436f, -0.2070159f, -0.0689852f,
  +0.0623270f, +0.1218478f, -0.0396880f, -0.0933613f, +0.2293137f, -0.3319730f, -0.0824622f, -0.1306332f,
  +0.0825147f, +0.0477941f, +0.0102806f, +0.0951655f, -0.0600765f, -0.2704676f, -0.3621689f, +0.0749966f,
  +0.4103530f, +0.0265383f, +0.0061353f, -0.1808737f, +0.2181024f, -0.1006972f, -0.3921881f, +0.2800097f,
  -0.2207411f, +0.2541098f, +0.3279012f, +0.2721058f, +0.0580218f, -0.1839655f, +0.0738993f, -0.2929420f,
  +0.2353425f, +0.1145042f, -0.0244255f, -0.0410076f, -0.2571424f, +0.0185584f, -0.0140888f, -0.0045121f,
  +0.0469593f, +0.0950211f, +0.2435694f, -0.1345634f, +0.0016496f, -0.0804579f, -0.0463538f, -0.0652494f,
  +0.0485751f, +0.2639644f, +0.0554366f, -0.1028336f, +0.2738683f, -0.1240123f, -0.0627349f, -0.2484916f,
  +0.0348574f, -0.0359230f, +0.2296701f, -0.0063038f, +0.0653004f, +0.0833711f, +0.0679078f, -0.1556257f
);

const float biases[4] = float[4](
  -0.0250945f, -0.0053607f, -0.0118725f, -0.0374793f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer39 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0642182f, +0.0788746f, +0.0284265f, -0.2147222f, +0.0624490f, +0.0474139f, -0.1637696f, +0.0162017f,
  +0.3026357f, +0.1130823f, -0.0626198f, +0.0037762f, +0.1481259f, +0.4993563f, +0.0023771f, -0.0672529f,
  +0.0343481f, -0.0446274f, +0.0167901f, -0.2538607f, +0.0320069f, +0.1341939f, -0.1931555f, -0.1868255f,
  +0.1358970f, +0.0527879f, -0.1121016f, -0.1770491f, +0.2851156f, +0.2092951f, +0.0294037f, -0.0943122f,
  -0.0564745f, +0.3199234f, -0.0368034f, -0.2994244f, -0.3332827f, -0.1667502f, +0.3005192f, -0.0974776f,
  -0.0565026f, +0.0629333f, -0.2080969f, -0.0902552f, +0.3662098f, -0.0976764f, +0.3799562f, +0.0685223f,
  -0.0562450f, +0.0240745f, -0.3034638f, -0.1294022f, +0.3314113f, +0.1162847f, -0.1030306f, +0.0858321f,
  -0.3769617f, -0.1243586f, +0.3357500f, -0.2701223f, +0.0949877f, +0.2512290f, +0.3460739f, +0.0213026f,
  -0.1448946f, +0.1271573f, -0.4869886f, +0.0962207f, +0.0951175f, +0.2413009f, -0.0865607f, -0.0638840f,
  +0.1474267f, -0.0382149f, +0.0232816f, -0.1744069f, +0.0527896f, -0.0602409f, -0.0599616f, +0.0099375f,
  -0.1252592f, -0.0235210f, -0.1498918f, -0.1115483f, +0.3004691f, +0.1054294f, -0.1852579f, +0.1208736f,
  +0.0888161f, -0.0254928f, -0.2031611f, -0.0396323f, +0.5655451f, -0.1090960f, +0.2039009f, -0.1832601f,
  -0.1829324f, -0.1717540f, +0.2168666f, -0.1272961f, +0.5361789f, +0.1903268f, +0.0521712f, +0.1153764f,
  -0.0597326f, -0.2516791f, -0.0772692f, -0.5137072f, +0.3515867f, +0.3271006f, +0.0995717f, +0.2348109f,
  +0.0279096f, +0.3178594f, -0.0517808f, -0.0595375f, -0.2761671f, -0.4596360f, -0.2425451f, +0.0574106f,
  +0.0332404f, -0.0393904f, -0.1691551f, -0.3001481f, +0.2436979f, -0.0108711f, -0.0688650f, +0.1200275f,
  +0.0020013f, +0.0678954f, -0.4282661f, -0.5827245f, +0.2193836f, -0.2637719f, +0.0838887f, +0.0175271f,
  +0.0889429f, +0.1280404f, -0.0036523f, -0.0874591f, +0.2461497f, +0.1323474f, +0.0279063f, -0.1481411f,
  -0.2384321f, -0.0262401f, +0.2109622f, +0.3925172f, -0.0551498f, +0.4795143f, +0.4617797f, +0.1375161f,
  -0.0896827f, -0.0449234f, +0.0694045f, +0.0394634f, -0.0192450f, +0.3883288f, -0.3766948f, +0.3439689f,
  +0.1293879f, +0.2406138f, +0.0379554f, +0.0621779f, -0.0351518f, -0.1897798f, +0.2269570f, -0.0456617f,
  -0.0531899f, +0.0673158f, -0.2415381f, +0.3933157f, -0.1006325f, -0.3108193f, +0.3966565f, +0.1278193f,
  +0.0728826f, -0.7150056f, +0.3360372f, -0.2825046f, -0.1106774f, +0.6469927f, -0.3069268f, +0.3915692f,
  +0.2743305f, +0.0226481f, +0.0167419f, +0.2147414f, -0.3129089f, -0.0820567f, -0.1794455f, +0.1289528f,
  +0.2028545f, +0.2848627f, -0.2901132f, +0.0548443f, +0.4238628f, -0.3400266f, -0.1495795f, -0.0399891f,
  -0.0656073f, -0.5650014f, +0.0577048f, +0.3991100f, -0.0278025f, +0.0314340f, +0.5255337f, +0.2033797f,
  -0.0946573f, -0.0502618f, +0.0900511f, -0.0718417f, +0.0802655f, +0.1222672f, -0.3499750f, -0.0683065f,
  +0.0979555f, +0.0774926f, +0.0892425f, -0.0566224f, -0.0429051f, -0.0346323f, -0.0554749f, +0.0024088f,
  +0.1791514f, -0.0213824f, +0.0110915f, -0.3492647f, -0.1121152f, +0.1772721f, -0.1709334f, -0.1531413f,
  -0.1667801f, +0.2111050f, +0.0460037f, -0.1475836f, +0.0618741f, -0.1643776f, -0.0591351f, -0.0280989f,
  -0.0664974f, +0.1582263f, +0.1190533f, -0.2936981f, -0.0639658f, +0.0526748f, -0.0898800f, -0.0267016f,
  +0.3303879f, -0.0380226f, -0.0272085f, -0.2030254f, -0.4079843f, +0.3400291f, -0.1474613f, -0.2413007f,
  +0.0352149f, +0.4320810f, +0.2134939f, +0.3427107f, -0.0012999f, -0.1119337f, -0.1219080f, -0.3931114f,
  -0.0374710f, +0.0124884f, +0.1077830f, -0.1596325f, -0.0568644f, -0.1261198f, -0.0184138f, -0.2452904f,
  -0.1281482f, +0.1234251f, -0.3541246f, -0.2881339f, +0.0489434f, -0.1763588f, +0.1818115f, -0.1769333f,
  +0.2767209f, +0.0748708f, +0.1713464f, +0.1533954f, +0.2362428f, +0.1984242f, -0.1240417f, -0.0605399f
);

const float biases[4] = float[4](
  +0.0225313f, +0.0334926f, -0.0967570f, +0.0280691f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer39 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1497656f, +0.0879004f, +0.0755139f, -0.1052797f, -0.1377847f, +0.0437952f, -0.0607491f, -0.1088868f,
  -0.4073362f, +0.1760004f, +0.1400077f, +0.0448351f, -0.1180720f, -0.0700740f, -0.0228811f, -0.0781387f,
  -0.2185353f, -0.0702629f, +0.1506123f, -0.1897718f, -0.2180914f, +0.1055351f, -0.0408664f, -0.0411894f,
  -0.1178905f, +0.0530947f, +0.0698009f, -0.2070024f, -0.1690815f, +0.0175142f, +0.0207873f, -0.2191721f,
  -0.2038653f, -0.3406393f, +0.2026856f, -0.1648826f, +0.0666942f, +0.1008958f, +0.1253313f, +0.1111994f,
  +0.1637105f, +0.0794308f, +0.0634845f, -0.0500584f, +0.1225596f, +0.3850150f, -0.3141529f, -0.2643723f,
  +0.0642163f, -0.0881572f, -0.0957847f, -0.0333355f, +0.3321916f, -0.0016561f, -0.0960056f, +0.0758359f,
  -0.0346471f, -0.0661687f, -0.1621771f, -0.2506102f, -0.2510619f, +0.1572949f, +0.0539952f, +0.0557934f,
  +0.0673142f, -0.2697240f, -0.0629229f, -0.0995909f, +0.0831469f, +0.1024205f, +0.1559567f, -0.0010744f,
  -0.1000884f, -0.0282340f, +0.2941357f, -0.0927269f, +0.0768118f, -0.1246655f, +0.1294517f, -0.2567930f,
  +0.0721052f, +0.2345277f, -0.0603090f, +0.2253406f, -0.2881293f, +0.0655814f, -0.2537253f, -0.0790737f,
  +0.1020589f, +0.1064593f, -0.0077295f, -0.0019393f, +0.0566762f, +0.1808307f, -0.0755086f, -0.0983368f,
  -0.2964087f, -0.0370939f, +0.4143510f, +0.2106572f, +0.1212543f, +0.2894937f, +0.3068066f, +0.0367205f,
  -0.0604540f, +0.0575606f, -0.0843800f, -0.2638305f, -0.2384728f, -0.4500956f, +0.0181908f, -0.2901456f,
  -0.0361382f, -0.0988838f, +0.0754128f, -0.2495090f, +0.2504037f, +0.2405912f, -0.0449607f, -0.2535936f,
  +0.1707108f, -0.0016651f, +0.0271315f, +0.1566532f, -0.0768626f, -0.0420650f, +0.1853702f, +0.0245570f,
  +0.0870250f, +0.4600129f, +0.0313088f, -0.3390984f, +0.0454983f, -0.0534009f, -0.3444660f, -0.1627047f,
  +0.1423150f, +0.0053547f, +0.0590328f, +0.0860900f, +0.2196345f, +0.1536940f, +0.1920079f, -0.1537677f,
  -0.0640453f, +0.1755121f, -0.0632767f, +0.1097459f, -0.3567584f, +0.2891257f, -0.2509542f, +0.1745436f,
  +0.3060939f, -0.0261854f, -0.1566913f, +0.2199945f, -0.1874604f, +0.2203319f, -0.2336710f, +0.0056642f,
  +0.2471573f, -0.5479249f, +0.1823876f, -0.2486159f, -0.3465371f, +0.0932335f, -0.3311224f, +0.1256280f,
  +0.0154494f, -0.3266405f, -0.2419512f, +0.0489998f, -0.1982699f, +0.2212502f, -0.0284775f, +0.0278073f,
  +0.0556129f, +0.4263114f, +0.2864446f, -0.0848637f, -0.0688561f, -0.3229828f, -0.3792053f, -0.2054860f,
  -0.0331249f, +0.0165064f, -0.1718570f, -0.3818898f, +0.1631620f, -0.6412838f, +0.1844552f, +0.4293528f,
  +0.0429277f, +0.0087619f, -0.2764794f, +0.2390491f, +0.1278233f, -0.2514942f, -0.1189874f, +0.1673970f,
  -0.0156783f, -0.0980170f, -0.1085549f, -0.4795574f, +0.0573661f, +0.1118535f, +0.1824312f, +0.1799366f,
  +0.1129166f, +0.1550949f, +0.0632128f, +0.1854721f, -0.0612813f, -0.2990916f, -0.1104264f, -0.0088540f,
  -0.1916379f, +0.0967600f, +0.0109923f, +0.2652462f, +0.1821076f, -0.3871046f, +0.1413366f, +0.0355984f,
  +0.2310622f, +0.3449482f, -0.2356991f, +0.0772708f, -0.1643467f, -0.4340043f, -0.3496879f, -0.2540185f,
  -0.0258721f, -0.2134394f, +0.0416526f, +0.1369482f, -0.0314792f, -0.1373383f, +0.0418951f, +0.2104376f,
  -0.1169487f, +0.0694230f, -0.1131334f, +0.1035231f, +0.0335616f, -0.3224650f, +0.2390967f, +0.1405392f,
  +0.3398799f, +0.0745731f, -0.3871169f, +0.1016310f, +0.6992308f, -0.3269165f, -0.2667171f, -0.0982788f,
  -0.1361999f, -0.3802733f, +0.0008787f, +0.1071105f, +0.2076999f, -0.3562649f, +0.2273361f, +0.5375950f,
  +0.1682241f, -0.1090994f, -0.0449530f, +0.0435126f, +0.0937800f, -0.2403244f, +0.1881077f, -0.0107564f,
  +0.1011291f, -0.3543440f, -0.0765467f, +0.3608862f, +0.3656597f, -0.4421438f, -0.0267039f, -0.1925141f,
  -0.3209229f, -0.1937539f, +0.0257253f, +0.0891278f, -0.0031801f, -0.1641137f, +0.1882096f, +0.2789692f
);

const float biases[4] = float[4](
  +0.0918602f, +0.0618757f, -0.0723628f, -0.0499135f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer40 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1810721f, -0.0618639f, +0.1007272f, -0.0218481f, -0.0962295f, -0.0122247f, -0.0475774f, +0.0866444f,
  -0.0694176f, -0.0898798f, -0.1394765f, +0.0709255f, -0.2015707f, -0.1616386f, -0.1267367f, -0.1585494f,
  -0.1044799f, +0.0175472f, -0.1460479f, -0.2540431f, -0.1596314f, -0.2009652f, +0.0094614f, -0.0130972f,
  -0.1421118f, +0.1004293f, -0.0084252f, -0.0927419f, -0.3934937f, +0.0526079f, +0.0212777f, -0.0854505f,
  -0.1552450f, +0.0495144f, -0.1268384f, -0.2577479f, +0.3280263f, +0.0018220f, +0.0936729f, -0.0877682f,
  -0.0322365f, +0.2889864f, +0.1338413f, -0.0149918f, +0.1501711f, +0.0805031f, +0.0493062f, +0.0894053f,
  -0.0458470f, +0.2507918f, -0.0154195f, -0.0589575f, +0.3028701f, -0.0238724f, +0.1047946f, +0.0153934f,
  +0.1178963f, -0.0741601f, -0.1022859f, -0.0728054f, -0.0338290f, -0.2102276f, +0.2014919f, +0.2701618f,
  +0.1747110f, -0.1194743f, +0.4243220f, +0.0177052f, -0.0190756f, +0.0546509f, -0.1474182f, +0.1298257f,
  -0.2142566f, +0.2454695f, +0.0799056f, -0.2432219f, -0.1070606f, -0.0807154f, -0.2135662f, -0.1169496f,
  +0.1217108f, -0.2403730f, -0.0198259f, +0.0070324f, +0.1903381f, -0.2886662f, -0.0042583f, +0.0311656f,
  -0.0877060f, -0.1319762f, +0.2451557f, -0.0603700f, +0.1267265f, +0.0154614f, +0.0328686f, -0.0088954f,
  -0.1272566f, +0.2003111f, -0.0718694f, -0.4237826f, -0.1694673f, -0.0471641f, +0.0522518f, +0.0261105f,
  -0.3413785f, +0.0828011f, +0.0732980f, +0.3935912f, -0.3831100f, -0.4294016f, -0.2131179f, -0.0361773f,
  -0.0244314f, -0.0284723f, +0.4652503f, -0.1480413f, +0.1704645f, +0.1126929f, +0.2835818f, -0.0330567f,
  -0.0120493f, -0.1962269f, +0.0464726f, -0.1488203f, +0.2664144f, -0.0566940f, -0.0352962f, +0.3335716f,
  -0.1907640f, +0.2109604f, +0.2904376f, +0.2343965f, -0.1648847f, +0.0752363f, -0.0237802f, -0.1560470f,
  +0.0492697f, -0.1744941f, -0.1378191f, +0.1087755f, -0.0819449f, -0.0668844f, +0.1594490f, -0.1140700f,
  -0.0819259f, -0.1146684f, -0.2384067f, +0.0942942f, -0.0579992f, +0.0208750f, -0.1338878f, +0.5292185f,
  -0.3275316f, -0.0907043f, +0.0473551f, -0.0352023f, +0.3080370f, +0.2391266f, -0.0911206f, -0.1743929f,
  -0.1713087f, +0.2282094f, -0.3823850f, +0.1833483f, +0.0225054f, -0.2225577f, +0.0173247f, +0.0940683f,
  -0.0617227f, +0.1925576f, +0.0083127f, +0.1979628f, -0.5342135f, +0.0721762f, +0.0803466f, +0.2729979f,
  +0.0967837f, -0.3902255f, -0.2269990f, -0.4013222f, -0.3337337f, +0.3723106f, +0.1043103f, -0.1164261f,
  -0.0343822f, -0.1718826f, -0.7193394f, +0.0337367f, +0.0543979f, -0.4519631f, +0.0298414f, -0.1252739f,
  +0.0135697f, -0.0085075f, +0.0349810f, +0.2146590f, +0.0159121f, +0.0932221f, -0.4734575f, +0.4078755f,
  -0.2515557f, -0.0268324f, -0.3239059f, -0.0745988f, -0.0180293f, -0.1630161f, +0.0411484f, -0.2267146f,
  -0.1217184f, -0.3653640f, -0.3210943f, +0.2421560f, +0.0461343f, -0.2885107f, -0.1706391f, +0.0597086f,
  +0.0373753f, +0.0000739f, -0.2883265f, +0.1346893f, +0.1507799f, -0.2235958f, -0.2670685f, +0.4380345f,
  -0.4336099f, +0.0282475f, +0.3193936f, -0.0278147f, +0.0973119f, +0.1680510f, +0.1460799f, -0.1511557f,
  -0.2897839f, +0.3444596f, -0.4131427f, +0.1183213f, +0.0210596f, -0.0911297f, -0.1841243f, +0.0429121f,
  -0.2062399f, +0.3362320f, -0.1246090f, -0.2994877f, -0.2167491f, -0.0638506f, +0.1203823f, +0.4595575f,
  -0.0024961f, -0.2239382f, -0.0680187f, +0.1730749f, -0.2641864f, +0.0657623f, +0.3324570f, -0.2840238f,
  +0.0100953f, -0.1743950f, +0.0952015f, +0.1850953f, +0.1041011f, -0.2728923f, -0.0673442f, +0.0124049f,
  +0.0855578f, +0.1385148f, -0.0050798f, +0.0535473f, +0.3159792f, +0.0945619f, -0.0006886f, +0.1005151f,
  -0.0822206f, +0.1033573f, -0.0420403f, +0.0199975f, +0.2348436f, -0.4690494f, +0.1015690f, +0.1748498f,
  +0.0957958f, +0.0062602f, +0.3326544f, +0.1660236f, +0.1768763f, -0.1873574f, +0.1885677f, -0.1106835f
);

const float biases[4] = float[4](
  -0.0421782f, +0.0022591f, +0.0171976f, +0.0941827f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer40 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0772426f, -0.1500243f, -0.0270533f, -0.0601678f, -0.0193280f, +0.0019313f, -0.1045676f, -0.0977135f,
  +0.1360794f, +0.0364908f, -0.2748561f, +0.2056674f, -0.0552491f, +0.0027028f, +0.0688197f, -0.1817659f,
  +0.0798851f, -0.3003280f, -0.0461047f, -0.0008841f, -0.3315422f, +0.1610630f, -0.0544265f, -0.0976231f,
  -0.0588661f, -0.4308890f, -0.2669480f, -0.0755207f, -0.1366685f, -0.0532885f, +0.0453204f, -0.5606142f,
  -0.0840081f, +0.4309325f, +0.4065707f, +0.3065957f, -0.1772638f, +0.1070899f, +0.5214854f, -0.1985311f,
  -0.0481876f, +0.1307735f, -0.4281474f, +0.1421623f, +0.1120509f, +0.1994970f, +0.1400711f, -0.2966481f,
  +0.1453766f, +0.3769172f, -0.2017321f, +0.1466815f, +0.1462906f, +0.0714170f, +0.0605557f, -0.5826576f,
  -0.2827789f, -0.4581916f, +0.3111120f, +0.2583040f, +0.1283354f, +0.2609278f, +0.2577772f, -0.1260832f,
  -0.1546441f, -0.0884026f, -0.4258860f, +0.1392841f, -0.2149642f, +0.0732675f, +0.1019387f, -0.3781064f,
  +0.2483874f, -0.2542869f, -0.0284389f, -0.4498869f, -0.1604898f, -0.0407673f, +0.1601351f, -0.5047952f,
  +0.3556248f, +0.0478599f, -0.2088969f, +0.1118102f, -0.0946466f, +0.0968764f, +0.3177830f, -0.0053737f,
  +0.3584878f, -0.3500840f, +0.3088626f, +0.0233083f, -0.1026772f, +0.0175906f, +0.0603254f, -0.1064200f,
  +0.5463169f, -0.3006038f, -0.0805720f, +0.0926522f, -0.0220388f, +0.0659990f, +0.4400507f, -0.0745076f,
  +0.2322268f, -0.1768002f, +0.0074076f, +0.0109010f, -0.1732478f, +0.4832518f, +0.2819921f, +0.0694299f,
  +0.1540396f, -0.0240531f, -0.3079990f, -0.1439528f, +0.2802799f, -0.0373001f, +0.2131849f, +0.0786350f,
  +0.0683935f, -0.1095964f, -0.0690814f, -0.0454991f, +0.1152187f, -0.1017307f, +0.2347246f, +0.1539067f,
  -0.1610283f, +0.0763977f, -0.0619928f, +0.0792799f, +0.1955597f, -0.1355453f, +0.3646678f, -0.0663821f,
  +0.0307261f, +0.0397686f, +0.0929521f, +0.0284857f, +0.0449112f, +0.0935789f, +0.5393699f, -0.3756852f,
  +0.0862274f, -0.0687380f, +0.0958719f, -0.0698229f, -0.1376661f, -0.1976641f, +0.1147167f, +0.0485984f,
  -0.0155534f, -0.1559336f, +0.0740435f, +0.1350550f, +0.0897329f, +0.0892117f, +0.1216670f, -0.0322998f,
  +0.1386846f, +0.1444255f, -0.4134359f, +0.0692728f, -0.0188291f, -0.1456066f, +0.2238220f, -0.1356061f,
  +0.0871182f, +0.3176944f, -0.0284400f, +0.0229189f, +0.0500055f, +0.0661424f, +0.1384732f, -0.0570865f,
  +0.4189885f, +0.0259301f, -0.1119650f, -0.1041012f, -0.4306702f, +0.0757531f, +0.4083556f, -0.0037970f,
  +0.0047253f, -0.2264454f, -0.1021903f, +0.0778598f, +0.2590449f, -0.1972510f, +0.0483716f, +0.1030252f,
  +0.0718896f, -0.3096725f, -0.0250713f, +0.0464784f, +0.0221212f, +0.0368387f, +0.4512902f, -0.0459577f,
  -0.0467194f, +0.2618795f, +0.0688512f, +0.4784843f, +0.0070555f, -0.1027995f, +0.3571413f, +0.0332698f,
  +0.1326175f, +0.2153783f, -0.2289547f, +0.1469684f, +0.1793579f, -0.2128830f, +0.4264615f, -0.0950379f,
  +0.0555232f, +0.3373125f, -0.1878139f, +0.0874227f, -0.1108686f, -0.1194854f, -0.0003514f, +0.1094262f,
  +0.0952532f, -0.4239555f, +0.3746967f, +0.0609103f, -0.1769472f, +0.1796194f, +0.0576487f, -0.1337794f,
  +0.0870155f, +0.1623222f, -0.1701929f, +0.2441677f, +0.1828856f, -0.3240778f, +0.0002091f, -0.0828785f,
  +0.1818139f, -0.7287018f, -0.0293550f, +0.4068229f, +0.1114338f, +0.0739187f, -0.2684766f, -0.0388879f,
  +0.2695880f, -0.1711968f, -0.2065917f, -0.1767838f, +0.1265262f, +0.4272051f, +0.1981519f, -0.1682872f,
  +0.1199118f, -0.1047173f, -0.0597365f, +0.2228552f, +0.1122276f, -0.2350680f, +0.1849458f, -0.1534484f,
  +0.1122146f, +0.0017607f, +0.0640040f, -0.0521021f, -0.2242278f, +0.0175070f, +0.1379580f, -0.0546980f,
  +0.0671363f, +0.2531180f, -0.4053215f, -0.1349505f, -0.0450869f, -0.1262558f, +0.2794746f, -0.0769801f,
  -0.1150110f, -0.3097453f, -0.0942455f, +0.1162598f, -0.1530958f, +0.0698645f, +0.0331974f, -0.2458839f
);

const float biases[4] = float[4](
  -0.0379935f, -0.0144082f, -0.0011699f, -0.0241881f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer41 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1491179f, +0.1283233f, +0.0235239f, -0.1469004f, -0.0097504f, +0.1105717f, +0.0966957f, -0.0958729f,
  +0.1607708f, -0.1333669f, +0.2361888f, -0.2866579f, -0.1709355f, -0.0806834f, -0.0762777f, +0.1828233f,
  -0.1639592f, +0.2097530f, -0.2874597f, +0.3256337f, +0.1304658f, +0.1290712f, +0.2648316f, -0.2030067f,
  -0.0022872f, +0.2063315f, -0.0677277f, -0.2616219f, -0.1718005f, +0.2130749f, +0.1251447f, -0.1858244f,
  -0.0679581f, -0.5104923f, +0.2619357f, +0.0965859f, -0.0307120f, +0.1100177f, -0.2989146f, +0.1246353f,
  -0.2932273f, -0.0015382f, -0.2131647f, +0.2096646f, -0.0762904f, +0.1301556f, +0.2795485f, -0.1863452f,
  -0.0791001f, +0.2111773f, -0.0550353f, -0.2470412f, -0.0632966f, -0.2220153f, -0.0073696f, +0.0120617f,
  +0.1518794f, +0.0007662f, +0.0390128f, +0.1489470f, +0.1211041f, +0.1904605f, -0.0151533f, -0.1369583f,
  +0.0023875f, -0.0169593f, -0.0768252f, +0.1290502f, +0.0411128f, -0.3072104f, +0.0927774f, +0.0691955f,
  -0.2127810f, +0.1572666f, +0.3125007f, +0.1507631f, +0.0580592f, +0.1166079f, +0.1796959f, +0.0085197f,
  +0.1893003f, -0.3407065f, +0.1099545f, +0.0230107f, -0.0464376f, +0.2901704f, -0.3087996f, +0.1888905f,
  +0.0233616f, +0.1566557f, -0.0383228f, +0.1045408f, -0.1059577f, -0.0510321f, -0.0635662f, -0.0501923f,
  +0.2182333f, +0.4004719f, +0.0444712f, -0.7098445f, -0.3982104f, -0.4639883f, +0.1086748f, +0.4050361f,
  -0.1448356f, -0.4138741f, -0.0492446f, -0.0187482f, +0.2519381f, +0.3699526f, -0.8165683f, +0.2183186f,
  -0.0065562f, +0.0124164f, -0.0437936f, +0.1006211f, -0.3101122f, -0.0814536f, +0.1344842f, -0.0714954f,
  +0.3362635f, -0.0240001f, +0.0059778f, -0.3155215f, -0.1302265f, -0.4443852f, -0.3196785f, +0.6258109f,
  -0.1374450f, +0.0800069f, +0.0480545f, +0.1198592f, -0.0824177f, +0.3642240f, -0.2392998f, -0.2703195f,
  +0.0586654f, -0.0645229f, +0.0715579f, +0.2072027f, +0.0042716f, -0.0927072f, +0.0641232f, +0.0223369f,
  -0.0079335f, +0.5484074f, +0.1523312f, +0.2024372f, -0.3129384f, -0.0519390f, -0.1477350f, +0.0520799f,
  -0.1118579f, +0.0403256f, +0.1567834f, -0.3147839f, -0.3582681f, +0.0733865f, -0.1579081f, +0.1371818f,
  +0.4292625f, +0.1053270f, -0.0082131f, +0.3621823f, -0.0152741f, +0.1262518f, -0.4697267f, -0.1029571f,
  -0.0710294f, +0.1992274f, +0.2134764f, +0.1765871f, -0.0538284f, -0.1511553f, -0.2633738f, +0.2624262f,
  -0.0287585f, +0.1135060f, +0.2922056f, -0.1062303f, -0.4448071f, +0.3310857f, -0.2666432f, +0.1315926f,
  +0.0432612f, +0.2440755f, +0.0078917f, +0.1522394f, +0.4184506f, -0.5825152f, -0.0639846f, +0.1736986f,
  +0.3706692f, -0.3121327f, +0.2796572f, -0.0636091f, +0.4832247f, -0.5144654f, -0.1158590f, +0.0273460f,
  +0.3680233f, +0.0132593f, +0.4969000f, -0.0256622f, -0.7113082f, -0.0319090f, -0.3722713f, +0.2833864f,
  +0.2582836f, +0.1376696f, +0.0952370f, +0.0678342f, +0.2248230f, -0.1273558f, -0.1441033f, -0.0051866f,
  -0.0445050f, +0.0318979f, +0.1730740f, +0.1488974f, +0.1081450f, +0.0522373f, -0.0652010f, +0.0542113f,
  -0.1321262f, -0.1723998f, +0.0542805f, +0.3224172f, -0.0431879f, -0.1000370f, +0.0591925f, +0.0412633f,
  +0.4824581f, +0.1669614f, +0.0599094f, +0.2784599f, +0.0339798f, +0.2847166f, +0.3540867f, -0.0720829f,
  +0.0571962f, -0.0392836f, -0.0217599f, +0.1550896f, +0.0769084f, +0.1367322f, -0.0417782f, +0.0089742f,
  -0.1056291f, -0.0586719f, -0.1150609f, -0.0459028f, +0.0429760f, -0.4047404f, -0.1008400f, +0.1188828f,
  -0.1743818f, +0.4714340f, +0.0007784f, -0.2229052f, +0.3247316f, +0.1838543f, -0.0448596f, +0.0261701f,
  +0.0967402f, +0.1761926f, -0.0375050f, +0.1777782f, +0.0818455f, +0.0454072f, -0.2513122f, +0.1727298f,
  -0.0373298f, +0.1186929f, -0.0668189f, -0.2412776f, +0.0719139f, -0.2375273f, +0.0163850f, +0.0639947f,
  -0.0058692f, +0.4455896f, -0.1469705f, -0.0431984f, +0.4387310f, -0.0267607f, +0.0476531f, +0.1453573f
);

const float biases[4] = float[4](
  +0.0332223f, -0.0060769f, -0.1114051f, +0.0287100f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer41 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0951382f, +0.0638687f, -0.1338350f, -0.3655671f, -0.0486177f, +0.0134794f, -0.1087560f, +0.1942167f,
  -0.0037765f, -0.0774124f, -0.0986862f, -0.1553225f, +0.0679756f, +0.1928902f, +0.1385969f, +0.0703996f,
  +0.0871674f, +0.0601791f, -0.0021782f, -0.1474602f, +0.0212305f, +0.0757080f, -0.1016397f, -0.1673664f,
  -0.0374421f, -0.0272131f, +0.1115330f, +0.1404886f, +0.2681223f, +0.1020889f, -0.0588627f, -0.1254209f,
  -0.1490038f, +0.4163318f, -0.1279371f, -0.3092477f, +0.4243300f, +0.0519467f, +0.2383964f, +0.0147577f,
  -0.1968262f, +0.1591254f, -0.0807464f, -0.1286900f, +0.0998676f, -0.0133067f, +0.0931734f, -0.0925268f,
  -0.1330786f, +0.1331361f, -0.0060864f, -0.1015296f, -0.0076223f, +0.0874414f, +0.3803896f, -0.1243008f,
  -0.2151813f, +0.2542911f, -0.2354625f, +0.1992815f, -0.1681895f, +0.0401143f, -0.3383580f, -0.0765999f,
  +0.1424260f, -0.1098242f, -0.2814426f, -0.1751932f, +0.1925793f, +0.1747924f, +0.2111072f, -0.0489718f,
  -0.0153745f, -0.0622534f, +0.0842822f, -0.1062715f, -0.0649790f, -0.0340209f, -0.0878857f, -0.0848730f,
  -0.0798731f, +0.1066373f, -0.1708646f, -0.1719588f, +0.1669277f, -0.1328762f, +0.0303789f, -0.0249590f,
  +0.0046517f, +0.0187025f, -0.1469756f, -0.0284240f, +0.0447350f, +0.0506408f, +0.0712143f, -0.0773842f,
  -0.0592839f, -0.3220793f, -0.2834913f, +0.1754311f, +0.4465977f, -0.2158781f, -0.2302795f, -0.0076948f,
  +0.2456444f, +0.1103860f, -0.2492343f, +0.2739658f, +0.0250714f, -0.1916805f, +0.3544059f, -0.1559284f,
  +0.0255455f, +0.0799885f, +0.1898924f, +0.0457989f, -0.0158272f, -0.0121081f, +0.4006022f, -0.1795529f,
  -0.2478861f, -0.3074712f, -0.0761796f, +0.2897583f, +0.1896127f, +0.1484046f, -0.0562226f, -0.2286488f,
  -0.0282429f, +0.3822435f, -0.2496433f, -0.0060356f, +0.2568317f, +0.3510602f, +0.3416140f, -0.3672737f,
  +0.1692796f, +0.3045062f, +0.0945383f, -0.0166852f, +0.0638013f, -0.1565755f, +0.4332066f, -0.0507184f,
  +0.2035376f, -0.4253438f, +0.1061626f, -0.3220916f, -0.1878682f, +0.2556542f, +0.2280053f, -0.0398427f,
  +0.1318493f, +0.1522138f, -0.0627805f, +0.1035731f, +0.1888857f, +0.1835596f, -0.1604970f, +0.0604565f,
  +0.3244942f, +0.3157102f, -0.1386959f, +0.0907149f, -0.1331115f, -0.0619304f, +0.1355852f, -0.2628464f,
  +0.0723392f, -0.1366521f, -0.6300244f, +0.2175380f, +0.1905312f, +0.2195946f, +0.4151058f, +0.3019199f,
  +0.2066250f, +0.3722328f, -0.2517349f, +0.7553315f, +0.7169666f, -0.1373828f, +0.1089571f, +0.1743046f,
  +0.0348565f, +0.1201110f, +0.0083576f, -0.2122976f, +0.1255307f, +0.0055713f, -0.0383241f, -0.0854629f,
  -0.1229676f, +0.1394116f, -0.0097815f, +0.2520770f, +0.2182405f, +0.1945624f, -0.1284483f, +0.3091571f,
  +0.1654345f, +0.2758320f, -0.3037628f, +0.1531622f, +0.1425853f, -0.0066544f, -0.1187750f, +0.2613548f,
  +0.2343145f, +0.1196762f, -0.1797019f, -0.1439227f, -0.0447485f, +0.2055510f, -0.0462537f, -0.1323273f,
  -0.1094846f, +0.0109504f, -0.0304524f, +0.0032381f, -0.0247070f, +0.0686245f, -0.0592492f, +0.1437047f,
  -0.2183132f, +0.0284161f, +0.0126964f, -0.0998681f, -0.2123869f, +0.1331210f, -0.1119305f, +0.0728814f,
  -0.0609978f, +0.0940939f, +0.0901453f, +0.0487139f, -0.1614616f, +0.0037581f, -0.0282548f, -0.0139647f,
  -0.4517988f, +0.1179594f, +0.4765158f, -0.7006265f, -0.4231657f, +0.3489533f, +0.1246239f, +0.4720280f,
  -0.2693358f, -0.1596491f, -0.1014361f, -0.0433398f, +0.1804169f, +0.1959470f, -0.3972460f, -0.0165278f,
  -0.1535991f, +0.2537201f, +0.0817527f, +0.1146972f, -0.1302945f, -0.1796368f, +0.0398803f, -0.2001112f,
  -0.0242899f, +0.0386368f, +0.2509284f, -0.1725246f, -0.2059946f, -0.1637388f, +0.4831442f, +0.6021890f,
  -0.2709121f, -0.3930137f, +0.0345717f, -0.1468200f, -0.2749488f, +0.2298487f, -0.2322292f, -0.2029369f,
  -0.0098506f, -0.1285994f, -0.0288933f, +0.0126494f, -0.1334782f, +0.0468053f, -0.0966797f, +0.1229058f
);

const float biases[4] = float[4](
  +0.0526434f, -0.0316066f, -0.1197245f, +0.0784664f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer42 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0350788f, +0.0177850f, +0.1415913f, +0.2382046f, -0.0241769f, +0.0412933f, -0.1249588f, +0.0936434f,
  -0.2788393f, +0.1283327f, +0.2094420f, +0.1221258f, +0.1529565f, +0.1813880f, -0.0091075f, -0.0485258f,
  +0.1163561f, -0.1837443f, -0.1851647f, -0.0045429f, -0.0227900f, -0.0098993f, +0.4364616f, +0.2160152f,
  +0.1681736f, -0.0658697f, +0.2924387f, +0.2009911f, +0.0752690f, +0.1115535f, +0.0010881f, +0.0479184f,
  -0.1135353f, +0.4239217f, -0.0085706f, +0.0502604f, +0.0362840f, +0.2509272f, +0.0019064f, -0.2360228f,
  +0.1039442f, +0.0880269f, -0.4112128f, +0.1834691f, -0.2136775f, +0.0214927f, +0.0365612f, -0.2226655f,
  -0.2299446f, -0.0778869f, -0.0048509f, -0.3447537f, -0.0006447f, +0.0114547f, -0.1039540f, +0.0081045f,
  +0.0608882f, -0.0541479f, +0.4386189f, -0.1325278f, +0.1342204f, +0.1212984f, -0.0532496f, +0.0605297f,
  +0.0272118f, +0.3568427f, -0.1253003f, -0.0470687f, -0.0272679f, -0.0876403f, +0.2260261f, -0.1677299f,
  -0.0774480f, +0.0790827f, -0.2654078f, +0.0325276f, +0.0633046f, -0.0809859f, -0.4020321f, +0.1102531f,
  +0.0004707f, +0.0446949f, +0.1620332f, -0.0200096f, -0.1419607f, -0.3344717f, +0.1153396f, +0.0014855f,
  -0.0302381f, +0.0159763f, +0.3307618f, -0.0016387f, -0.2791527f, +0.7605762f, -0.3567531f, -0.5345116f,
  +0.0359091f, -0.0644136f, +0.0503550f, -0.1307608f, +0.0920833f, +0.2439915f, -0.1285467f, -0.0695383f,
  +0.3875186f, +0.0613315f, -0.1374038f, -0.0669184f, -0.2436309f, +0.1439091f, -0.3915628f, +0.0508320f,
  -0.2289744f, +0.1792050f, +0.1411319f, -0.0377934f, -0.0090404f, +0.2434015f, -0.1584231f, +0.1319883f,
  -0.0584131f, -0.1142804f, -0.0853789f, -0.1522322f, -0.2694809f, -0.1348427f, -0.0240621f, -0.0099689f,
  +0.0655103f, +0.2332374f, -0.1332076f, -0.0165190f, +0.0543296f, +0.0052892f, +0.0204854f, -0.1157962f,
  +0.1215557f, -0.1212119f, -0.1282714f, -0.0592706f, +0.0771715f, +0.0012363f, +0.0837775f, +0.0779584f,
  -0.0856376f, +0.0790139f, -0.2585328f, +0.1746535f, +0.3389985f, +0.0530183f, -0.0447789f, -0.1463377f,
  +0.1084340f, -0.0414675f, -0.4627041f, +0.0657104f, +0.3949713f, +0.0925920f, +0.3943124f, -0.0156805f,
  -0.1599104f, -0.0390731f, -0.0643691f, +0.2194695f, +0.1112878f, -0.0856629f, +0.5744829f, -0.2207682f,
  +0.1128513f, +0.3256159f, -0.0069911f, +0.2366503f, +0.1973302f, -0.1092494f, -0.1070021f, -0.1202978f,
  -0.5218099f, -0.2601967f, -0.2151382f, -0.1500094f, +0.4638219f, -0.1135401f, +0.6385701f, +0.0629123f,
  -0.0256916f, -0.3760051f, -0.3588296f, -0.0495344f, -0.0175513f, -0.0756752f, +0.3985330f, -0.0887993f,
  +0.0860388f, +0.1295315f, -0.2370853f, +0.4807326f, -0.1540469f, -0.0014309f, -0.0591877f, -0.1643849f,
  -0.4514664f, -0.2027206f, +0.0045989f, +0.0650963f, +0.2307655f, -0.1517765f, +0.0814091f, +0.0756508f,
  -0.0302788f, -0.3581832f, -0.3851274f, +0.0321309f, +0.0472662f, +0.0266628f, -0.1116971f, +0.0339062f,
  -0.4447939f, +0.1255037f, +0.2600734f, +0.3134633f, +0.0594207f, -0.2136474f, +0.2092091f, +0.0548556f,
  +0.1775180f, -0.6273205f, -0.1981044f, -0.0194935f, +0.0332931f, +0.2112712f, -0.0194803f, +0.4205703f,
  +0.1016120f, +0.1342917f, -0.0861384f, +0.0969858f, +0.0660619f, -0.1273225f, -0.2488527f, -0.4374911f,
  +0.0126941f, -0.0971078f, -0.1602117f, +0.2177326f, +0.0040645f, +0.1319221f, +0.2918279f, -0.1389848f,
  -0.1086726f, +0.0534842f, -0.0232664f, -0.1712422f, +0.3347302f, +0.1579451f, -0.2168432f, +0.2570635f,
  +0.0867610f, +0.2439224f, +0.2278326f, +0.0962528f, +0.1090644f, +0.1805639f, +0.2140776f, -0.4146082f,
  -0.3361075f, -0.0158549f, -0.5825716f, -0.2082475f, +0.0346404f, +0.0316579f, -0.0943543f, +0.0782378f,
  -0.1925443f, -0.4305222f, +0.3726033f, +0.0031779f, -0.0727168f, +0.0793608f, -0.0571938f, +0.3755896f,
  -0.0773884f, +0.1537467f, -0.2486364f, +0.1555421f, +0.3031194f, +0.0979028f, +0.3437631f, -0.0460281f
);

const float biases[4] = float[4](
  -0.0231257f, -0.0169606f, -0.0025439f, -0.0412749f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer42 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1719573f, +0.0065742f, -0.1808529f, +0.1542661f, -0.0879982f, +0.1139234f, +0.2181727f, +0.0011501f,
  -0.0116307f, -0.2054812f, +0.2172551f, +0.0603608f, -0.2547761f, -0.1103173f, -0.1534329f, +0.2618358f,
  -0.0895834f, -0.0179251f, -0.0082478f, +0.0778573f, -0.1120864f, +0.1826279f, -0.0002574f, +0.2116219f,
  +0.0099226f, -0.1733250f, +0.1218097f, +0.0834675f, -0.1769400f, +0.4448490f, -0.0582493f, +0.0845032f,
  -0.1379688f, +0.4995702f, +0.2831513f, +0.0920027f, -0.1027992f, +0.5534088f, -0.4196187f, -0.3781298f,
  -0.0507339f, -0.1567290f, +0.1131785f, -0.0669694f, -0.1185998f, -0.1736553f, -0.0692408f, +0.1733282f,
  +0.0404505f, +0.1633208f, +0.2182495f, +0.3060594f, -0.0359623f, -0.0328482f, -0.0122275f, +0.0138303f,
  -0.1125406f, +0.2580908f, +0.3028984f, +0.0715434f, +0.0354906f, -0.0831834f, -0.3060775f, +0.0762566f,
  -0.0685594f, -0.0781025f, +0.2479744f, +0.1085547f, -0.0711085f, +0.0130017f, -0.0153046f, -0.0493426f,
  +0.2504090f, -0.0541829f, -0.3257989f, -0.1157182f, -0.0379853f, +0.1498180f, -0.0541896f, -0.1017954f,
  -0.1068604f, +0.5037999f, -0.1865257f, +0.0432649f, +0.0252363f, -0.4167323f, -0.5500625f, -0.2574499f,
  -0.0399486f, -0.2024906f, +0.4598276f, +0.1517904f, +0.0574610f, +0.1892996f, +0.0242796f, +0.1912575f,
  -0.1651552f, +0.1186949f, +0.0700128f, +0.0432773f, -0.0242860f, -0.1147952f, +0.3307335f, +0.0273135f,
  +0.3459900f, -0.0501659f, -0.2015547f, +0.3633363f, -0.0370528f, -0.0460513f, +0.0459189f, +0.2524737f,
  -0.4048813f, +0.5231183f, -0.0269679f, +0.0863421f, +0.1827274f, +0.3419227f, +0.0497389f, -0.5410095f,
  -0.0394703f, +0.2264121f, -0.3212305f, +0.1642321f, +0.2866333f, -0.0173085f, +0.2749128f, -0.0771251f,
  +0.0611061f, -0.2833161f, -0.4035367f, -0.0903370f, -0.0852873f, +0.0396210f, -0.2110532f, +0.0186771f,
  -0.1904397f, +0.3588905f, -0.1528481f, +0.0009757f, +0.0773686f, +0.1024235f, +0.2387058f, -0.1509497f,
  -0.1509028f, -0.0449066f, -0.2254383f, +0.0712789f, -0.2113062f, -0.2342000f, +0.0006724f, -0.0423097f,
  -0.0918609f, -0.2236991f, +0.1833401f, +0.0079270f, +0.1390632f, +0.0299694f, -0.0839673f, +0.1934715f,
  -0.0725923f, -0.2576461f, -0.3366431f, -0.0056302f, -0.1846800f, +0.0229728f, -0.0041871f, -0.1018191f,
  -0.1485984f, -0.1210058f, -0.1336204f, +0.1779876f, -0.3115650f, +0.0612597f, +0.2236056f, -0.0731971f,
  +0.1634811f, -0.3051375f, +0.0153780f, +0.0981605f, -0.3195869f, +0.1259651f, -0.4669936f, +0.3779990f,
  -0.3131118f, +0.5029284f, +0.1587403f, +0.0456467f, -0.0097412f, +0.2684217f, +0.0199118f, +0.1215370f,
  -0.4078516f, +0.0961241f, +0.2716418f, +0.0886937f, +0.0665688f, -0.0275984f, +0.0436609f, +0.1416505f,
  -0.1591736f, -0.3164648f, -0.1509637f, -0.0215676f, +0.0144694f, -0.1060352f, -0.0023087f, +0.1622983f,
  -0.1091346f, -0.0383651f, -0.0126747f, +0.1259277f, +0.0334068f, +0.1848214f, -0.0071228f, +0.0202229f,
  -0.0668651f, +0.0652917f, -0.0739346f, -0.0804309f, +0.1136490f, -0.1295904f, +0.3868546f, +0.0555471f,
  +0.0522876f, -0.0510389f, +0.0325683f, -0.0329705f, +0.0946776f, +0.3794504f, +0.1202146f, +0.1081185f,
  +0.1531793f, +0.1851189f, +0.1781211f, -0.1144895f, +0.0905306f, +0.1309211f, +0.0114831f, -0.2566536f,
  +0.0541949f, +0.0033360f, -0.1991395f, -0.2639592f, -0.0155886f, -0.1086574f, +0.2674430f, -0.0989857f,
  -0.2734849f, -0.2183113f, -0.0925772f, -0.1744189f, -0.0166242f, -0.0122328f, -0.1800273f, +0.1861856f,
  +0.2094669f, +0.1868470f, +0.1164141f, -0.0137318f, +0.0883651f, -0.1900628f, -0.1396936f, -0.2158092f,
  +0.1081351f, -0.0441652f, -0.1429706f, +0.2465146f, +0.2787250f, +0.1012096f, -0.1695709f, +0.0613398f,
  -0.0918246f, -0.2043916f, +0.1866001f, +0.0718763f, -0.1296195f, -0.0030708f, +0.0698963f, +0.0159064f,
  +0.2106796f, -0.0983257f, -0.0781612f, +0.0282057f, -0.1005316f, +0.0277961f, +0.0308916f, +0.0017414f
);

const float biases[4] = float[4](
  +0.0639056f, -0.0326237f, +0.0183762f, -0.0466891f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer43 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0421405f, +0.0041545f, +0.1571032f, +0.0332685f, -0.2113515f, -0.1486496f, -0.1964038f, -0.1081792f,
  -0.0127746f, -0.2150840f, +0.0461395f, +0.0397815f, -0.0489593f, +0.0403262f, -0.1638782f, +0.1710067f,
  -0.0046774f, +0.0989449f, -0.1624533f, -0.1414231f, -0.2302435f, +0.0043412f, -0.1227158f, +0.0296946f,
  +0.1014113f, +0.0439540f, -0.0180027f, -0.0133442f, +0.0701203f, +0.0474401f, +0.1141741f, -0.2579309f,
  -0.0430178f, +0.3656766f, +0.1428713f, +0.0251337f, +0.0264475f, +0.4759764f, -0.0143551f, -0.0627639f,
  -0.0660558f, +0.1189510f, +0.1081843f, +0.0781413f, +0.1264396f, -0.6169724f, +0.0377836f, -0.0396308f,
  -0.2339891f, +0.2197422f, +0.1233711f, -0.1948055f, -0.0183415f, -0.3101015f, +0.2455625f, -0.4069187f,
  -0.2519664f, -0.0331211f, -0.1835645f, +0.0402635f, +0.0739250f, -0.1000153f, +0.0072278f, -0.0302057f,
  -0.0145843f, -0.0414713f, -0.2609757f, -0.0293191f, +0.0131708f, -0.0384592f, +0.1543570f, +0.1723317f,
  +0.1080637f, -0.0156338f, +0.0811944f, -0.2339698f, +0.0071118f, -0.1302582f, +0.0335556f, -0.0994784f,
  -0.0051499f, -0.0082452f, +0.2712062f, +0.2577778f, +0.3544237f, +0.1634733f, -0.0123632f, +0.0110589f,
  +0.0601025f, +0.1697884f, -0.1213301f, +0.3452546f, +0.4357860f, +0.0492770f, +0.1467802f, +0.0062420f,
  +0.1495683f, +0.3168669f, -0.2091949f, -0.3749467f, +0.1347761f, +0.2790551f, +0.0964842f, -0.1593624f,
  +0.2296823f, -0.4824313f, +0.0450787f, -0.1153722f, +0.3199026f, +0.0224105f, -0.3525572f, +0.0453590f,
  -0.0180889f, -0.0201360f, -0.2419965f, +0.0019675f, -0.1102704f, +0.0678388f, +0.1594448f, -0.2314942f,
  -0.0145194f, -0.2103941f, -0.0310450f, +0.1098645f, -0.1690621f, -0.0471003f, +0.3453622f, -0.0511459f,
  -0.0894389f, -0.3455201f, +0.3546924f, -0.1183169f, -0.0507866f, +0.1172621f, -0.2572385f, -0.3889782f,
  -0.3142490f, -0.0701735f, -0.1435916f, -0.0202769f, +0.3009081f, -0.2787661f, +0.2368173f, +0.2209202f,
  +0.1290940f, +0.2045441f, +0.1467041f, -0.1277289f, +0.1997071f, -0.0236635f, -0.1286241f, +0.1289022f,
  +0.0034772f, -0.1858063f, -0.1574810f, -0.3332548f, +0.1535532f, +0.0577138f, -0.3952760f, +0.1559532f,
  +0.1066863f, -0.0725314f, +0.0593342f, -0.0735863f, -0.3157149f, +0.0404584f, -0.0207723f, +0.0375285f,
  +0.3557164f, -0.3522978f, -0.0371051f, +0.2328033f, -0.0248368f, -0.0967903f, -0.1023644f, +0.3490085f,
  +0.0714976f, -0.4592272f, +0.5829917f, +0.0007180f, -0.2329227f, +0.0855325f, -0.2782538f, -0.0221303f,
  -0.0422489f, -0.2215683f, -0.0577328f, -0.0589976f, -0.0089743f, -0.1878812f, -0.0658420f, +0.1030202f,
  -0.0482876f, +0.1296330f, +0.0864341f, +0.1521792f, +0.1485974f, +0.4629375f, +0.0176484f, -0.0028838f,
  +0.1383386f, -0.2582452f, +0.0463714f, +0.3366973f, -0.2276826f, -0.1072384f, +0.1765316f, +0.2206502f,
  +0.0909207f, +0.0231700f, +0.2091393f, -0.0461082f, -0.0357891f, +0.0641343f, -0.0554030f, -0.1351670f,
  +0.1040258f, +0.3959021f, -0.1479475f, +0.0999848f, -0.2692305f, +0.4550091f, -0.6239894f, +0.5073846f,
  +0.0793493f, +0.2356905f, -0.2758035f, -0.1780691f, -0.0951040f, -0.1703058f, -0.3581664f, +0.3481495f,
  +0.1881901f, +0.3672918f, +0.1413729f, -0.0582804f, +0.2118771f, +0.0315074f, +0.0979644f, +0.2351885f,
  -0.0896351f, +0.3850821f, -0.2460128f, -0.1102445f, -0.1107376f, -0.0866039f, -0.1899892f, -0.2360776f,
  -0.0112499f, +0.3202985f, -0.2592289f, -0.3317560f, +0.1022483f, -0.5043702f, -0.2664826f, +0.1074693f,
  -0.1690735f, +0.3952660f, -0.0880487f, -0.1382052f, -0.0542279f, -0.2037906f, +0.2711815f, -0.1010197f,
  +0.0923037f, +0.0492902f, +0.2842843f, +0.1159470f, +0.2817251f, +0.4386679f, -0.3737935f, -0.0156564f,
  -0.0530478f, +0.2124265f, -0.0580981f, -0.2709560f, -0.1397234f, +0.0222220f, +0.0464568f, +0.0307701f,
  +0.2796875f, -0.0331141f, +0.1769055f, +0.2016447f, +0.1079546f, +0.0419895f, +0.0628779f, -0.1103574f
);

const float biases[4] = float[4](
  +0.0961483f, +0.0272769f, -0.0155183f, +0.0719111f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer43 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1819927f, +0.1871778f, +0.1269898f, -0.2699515f, +0.0656420f, -0.0948390f, -0.1503099f, -0.1907733f,
  +0.2159344f, -0.1979726f, -0.0994306f, -0.4935179f, -0.1751333f, +0.3327088f, -0.4129910f, -0.2083954f,
  -0.2618277f, +0.1353129f, +0.0867951f, -0.0753104f, +0.0376194f, -0.2783971f, -0.2965066f, +0.1156136f,
  +0.2968150f, -0.1585793f, -0.0547054f, -0.0879076f, -0.0473122f, -0.4499576f, -0.2096460f, +0.2114333f,
  -0.1096179f, +0.0897072f, +0.0273841f, +0.0202423f, +0.4441638f, +0.1786891f, -0.0125464f, +0.0176709f,
  +0.1053646f, +0.0795855f, +0.5837044f, +0.2676364f, -0.0485598f, -0.2004420f, +0.1943512f, +0.1108889f,
  -0.1000533f, -0.1806727f, +0.0845044f, -0.1493363f, -0.3254672f, -0.0455835f, -0.1557641f, +0.0262377f,
  +0.1566791f, +0.0389146f, -0.2403326f, -0.2035158f, -0.0026693f, +0.2607138f, +0.0578160f, -0.0563052f,
  +0.1857701f, -0.1832524f, +0.0294567f, -0.1937370f, -0.2391728f, +0.1716409f, -0.2025772f, -0.1645643f,
  +0.2103419f, +0.1555805f, +0.0407532f, -0.3593847f, -0.0350409f, +0.1005511f, -0.0164095f, -0.1040557f,
  +0.0050378f, +0.2264336f, -0.1569645f, -0.3222163f, +0.0506403f, -0.0064470f, +0.2487264f, -0.1007931f,
  -0.0793109f, -0.0184839f, -0.2010721f, +0.1370897f, +0.1269206f, -0.0865162f, +0.0648241f, -0.0561757f,
  +0.1137901f, -0.2517385f, -0.1169178f, +0.1405507f, -0.0525205f, +0.1363128f, -0.0683777f, -0.2756584f,
  -0.3225688f, +0.0138483f, -0.1679836f, +0.1094073f, -0.4551737f, -0.2694802f, +0.2607855f, -0.1903729f,
  -0.0783123f, -0.1679360f, +0.0039235f, +0.1076351f, -0.0436420f, +0.0123860f, -0.1134642f, +0.1065618f,
  +0.0652745f, -0.1342275f, +0.0268874f, +0.0785431f, -0.0290283f, +0.4575656f, +0.2217014f, -0.2157954f,
  -0.2324008f, -0.1707627f, -0.0558802f, +0.2183510f, -0.1185736f, +0.1910055f, -0.1299021f, +0.0513731f,
  -0.0048199f, -0.1364363f, +0.1746559f, +0.3946167f, -0.1910309f, -0.0756136f, +0.1983049f, +0.1549203f,
  -0.0789751f, -0.1300818f, +0.0701288f, +0.0838559f, +0.0440449f, -0.2090373f, -0.0236047f, +0.0695014f,
  -0.0160528f, -0.0668490f, +0.0233180f, +0.0919750f, -0.1238902f, -0.0044927f, +0.1768644f, -0.0917967f,
  +0.1609986f, -0.0891762f, +0.0427341f, +0.2273844f, +0.2432606f, +0.0967857f, -0.0811849f, +0.0446614f,
  +0.2101520f, +0.2105058f, +0.1420493f, -0.0375797f, +0.4240425f, -0.2251577f, -0.1529298f, +0.0565724f,
  +0.1070191f, -0.5977670f, -0.1804878f, +0.2146820f, +0.3222456f, -0.1472251f, -0.0382430f, -0.0700816f,
  -0.2516319f, -0.1067915f, -0.1872130f, +0.4231600f, -0.0571013f, +0.0985154f, -0.2996546f, +0.4067578f,
  +0.0042630f, +0.4440157f, -0.0731414f, +0.0047220f, +0.1723756f, +0.1360482f, +0.1931128f, +0.3377847f,
  +0.1773229f, +0.5421320f, +0.3290017f, +0.3866599f, -0.4246441f, -0.5434631f, -0.1131372f, +0.5840921f,
  +0.0106984f, +0.2977459f, +0.0985720f, -0.0423354f, -0.0639737f, +0.0379165f, -0.2724300f, -0.0174818f,
  +0.2388965f, +0.1210620f, -0.1197452f, -0.0173148f, +0.2097135f, +0.3401858f, +0.1130068f, +0.0916400f,
  +0.2682397f, +0.2197891f, -0.2782716f, -0.0128148f, +0.0348262f, +0.3946816f, -0.1222461f, -0.0028311f,
  +0.0238469f, +0.0206539f, -0.2052627f, +0.2568278f, +0.0573890f, +0.4083989f, -0.1231511f, -0.0911968f,
  -0.0077432f, -0.0567332f, +0.1676667f, -0.0186905f, -0.4746292f, -0.1933500f, +0.0037111f, -0.2422179f,
  +0.2579194f, +0.1791276f, -0.1795241f, +0.0098445f, -0.3231731f, -0.3614626f, +0.1477440f, +0.1301318f,
  +0.0750965f, -0.2111423f, +0.0063119f, +0.2045482f, -0.6577684f, -0.5186513f, +0.2784435f, +0.1304062f,
  -0.0164747f, +0.0093853f, +0.2522964f, +0.0450286f, -0.3397620f, +0.2950968f, -0.0831443f, -0.0764404f,
  +0.0178586f, +0.1520619f, -0.0454847f, -0.2178453f, +0.1147968f, +0.4226750f, -0.2898358f, -0.0936606f,
  +0.1470618f, +0.1575569f, +0.5025410f, +0.5440340f, -0.4647934f, +0.0686700f, -0.2692181f, +0.3208592f
);

const float biases[4] = float[4](
  -0.0122391f, +0.0291129f, +0.0551406f, -0.0853064f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer44 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0226556f, +0.1669379f, -0.2232517f, -0.3021576f, +0.1018154f, +0.0078198f, -0.1443683f, -0.2620124f,
  +0.0286304f, -0.1772401f, -0.1600976f, -0.0016338f, +0.1210450f, +0.0862138f, -0.2495714f, -0.0843862f,
  +0.2053828f, +0.0021858f, -0.1264609f, +0.0183168f, -0.2637976f, +0.0338436f, -0.1299519f, -0.0823336f,
  -0.0284036f, -0.0847963f, -0.1054323f, +0.0141544f, -0.3110535f, -0.2421587f, +0.0078713f, -0.0938287f,
  +0.0334860f, -0.2966264f, -0.1975112f, +0.1151475f, +0.2853623f, +0.1502675f, -0.0493529f, -0.1230091f,
  -0.0797514f, +0.1639443f, -0.1257874f, +0.1218534f, -0.0910357f, -0.1144285f, +0.1011895f, +0.0490913f,
  +0.1044061f, -0.0945681f, -0.1270161f, +0.0666294f, +0.0783877f, -0.1119109f, +0.1304626f, -0.0770935f,
  -0.2914859f, -0.0168202f, -0.0730793f, +0.0444183f, +0.5581383f, +0.0751108f, +0.0023579f, -0.2698906f,
  -0.0828102f, +0.0459554f, +0.2143412f, +0.1995146f, +0.1145946f, -0.0652014f, +0.0788496f, +0.0264632f,
  -0.0632745f, +0.1993560f, +0.0440543f, -0.0558241f, -0.0302445f, +0.1323052f, -0.0847643f, -0.2251590f,
  +0.0172287f, -0.2889064f, +0.0831506f, -0.2742594f, +0.0278374f, +0.1380683f, -0.1892013f, -0.4384005f,
  -0.2161165f, -0.0559511f, +0.1458992f, -0.2568376f, -0.1263746f, +0.2255055f, -0.2148767f, -0.1911148f,
  +0.2018877f, +0.0286250f, -0.0247177f, +0.1262647f, +0.3912447f, -0.0755367f, +0.0359751f, -0.2389036f,
  +0.0051542f, -0.1726266f, -0.0299094f, -0.0669126f, +0.4636153f, -0.0765025f, +0.1628171f, +0.0638176f,
  +0.0373193f, +0.0232158f, +0.3076227f, -0.2651228f, -0.0835524f, +0.2334149f, -0.4039353f, -0.1532360f,
  -0.0416476f, +0.0998781f, -0.0751909f, -0.0606319f, +0.1304420f, +0.2323974f, +0.0655231f, -0.1709026f,
  +0.1028687f, -0.1931103f, +0.4480198f, -0.2332435f, +0.1830074f, +0.1217809f, -0.0429657f, -0.3105905f,
  -0.0943083f, +0.1666565f, -0.2057493f, -0.2479577f, -0.4091102f, -0.1435902f, +0.0641586f, +0.0693873f,
  +0.0450102f, -0.0360571f, -0.0891784f, -0.0818012f, +0.1345116f, -0.1978830f, +0.0046348f, -0.2189203f,
  +0.1845114f, -0.2368896f, +0.1959858f, -0.2563657f, -0.1943113f, -0.2417281f, -0.0725203f, +0.2552508f,
  -0.2130831f, +0.1991318f, -0.1685322f, -0.0843836f, +0.1460098f, -0.2066312f, +0.0523935f, +0.0437635f,
  -0.1694169f, -0.0053274f, -0.1614864f, +0.1940302f, -0.0554552f, -0.0629530f, +0.1325809f, -0.3106822f,
  -0.0626692f, +0.2685974f, -0.2484711f, +0.6140411f, -0.3127822f, +0.3332688f, -0.0877484f, +0.2964635f,
  +0.0928704f, -0.0721155f, -0.0090720f, +0.7056386f, +0.5217667f, -0.0859535f, -0.1102832f, -0.1796986f,
  +0.2172245f, +0.1632344f, -0.2342123f, -0.4151861f, +0.1170475f, +0.4395721f, -0.0480390f, -0.0002030f,
  +0.2012632f, +0.0352276f, +0.1339944f, +0.1610316f, +0.1171619f, +0.1696820f, +0.1503406f, +0.2571623f,
  +0.0782733f, -0.1596486f, -0.2839484f, -0.0049705f, +0.1562883f, +0.2329192f, -0.2362743f, -0.1246102f,
  +0.1168860f, -0.4827574f, +0.0754705f, -0.4142775f, +0.0859480f, +0.0142103f, -0.0978466f, -0.3449825f,
  +0.0881644f, +0.2090825f, +0.0851348f, +0.0983342f, -0.2373013f, -0.2829621f, -0.4756982f, +0.0574781f,
  -0.1811180f, +0.0088723f, -0.1644434f, -0.3695649f, +0.0012137f, -0.2767895f, -0.1123650f, +0.0290974f,
  +0.0573899f, -0.3724256f, +0.0523545f, +0.0002929f, +0.2429175f, -0.0570732f, +0.1006955f, -0.3845090f,
  +0.1380726f, +0.0833848f, -0.3092162f, +0.1978900f, -0.1699191f, -0.1505159f, -0.1029657f, -0.3330935f,
  +0.0186718f, +0.0445702f, +0.3350855f, -0.1811467f, +0.2586356f, -0.1751837f, +0.0647732f, -0.0850162f,
  -0.1978744f, -0.1402608f, +0.0188343f, -0.1644788f, +0.1902103f, +0.0353151f, +0.1375031f, -0.1723932f,
  -0.0877792f, -0.4947440f, +0.0808548f, +0.2901850f, +0.0818269f, +0.0334909f, -0.1399612f, +0.1385492f,
  -0.2363444f, +0.0274454f, +0.3495182f, -0.4136339f, +0.3227829f, +0.2877271f, -0.0572318f, -0.0926903f
);

const float biases[4] = float[4](
  -0.0166353f, +0.0363722f, +0.0330195f, -0.0302947f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer44 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1762897f, -0.1326444f, +0.0641274f, -0.0154927f, -0.1439363f, +0.0390817f, -0.0728664f, +0.1663976f,
  -0.4707935f, +0.1518238f, -0.0801968f, -0.0072715f, -0.3218756f, +0.0843715f, +0.2448370f, -0.0517722f,
  +0.1507067f, +0.1200879f, -0.3112960f, -0.1514296f, +0.2280729f, +0.2560705f, +0.1053061f, -0.0942842f,
  -0.0898741f, +0.0860271f, -0.0164464f, +0.0260399f, +0.1716926f, -0.0349458f, -0.0263977f, +0.4005599f,
  -0.1168186f, +0.1503803f, -0.0488571f, -0.2900093f, -0.2497718f, +0.2019821f, -0.1792105f, +0.3722646f,
  +0.0816149f, +0.1663742f, -0.2791009f, -0.0753113f, -0.0579219f, +0.0390827f, -0.3543568f, -0.0285131f,
  +0.0005420f, -0.1743363f, +0.2506591f, -0.0449576f, +0.0894035f, +0.1082183f, +0.0465485f, -0.0429327f,
  -0.1780272f, -0.1004305f, +0.0294145f, -0.1508695f, -0.3026732f, -0.2333622f, +0.1668110f, +0.1778226f,
  +0.0902485f, +0.0409637f, +0.0148030f, -0.1364041f, -0.1903966f, +0.1227928f, -0.0104279f, -0.0298271f,
  -0.0688868f, +0.0529364f, -0.0236874f, -0.0344634f, +0.1156413f, -0.0763706f, +0.0249830f, +0.0616319f,
  -0.0684856f, -0.1710600f, -0.0560204f, -0.0400899f, +0.0095354f, +0.2024641f, +0.3650800f, +0.0792143f,
  +0.2488335f, -0.1179665f, +0.0568644f, -0.5673300f, +0.3396294f, +0.1725066f, +0.3037085f, +0.0301109f,
  +0.1552061f, -0.0442447f, -0.1146161f, +0.0886746f, +0.1244439f, +0.0628341f, -0.0753600f, +0.0928384f,
  -0.3882331f, -0.3387758f, +0.3797621f, +0.1117574f, +0.0020343f, +0.6103895f, +0.2264418f, +0.3400622f,
  -0.1640050f, -0.1322965f, -0.4486242f, +0.1061063f, -0.1597662f, -0.0909393f, +0.2358873f, +0.1376176f,
  +0.1267353f, -0.0737141f, -0.1222294f, +0.0833848f, +0.0652552f, +0.1568177f, -0.1666680f, +0.1671945f,
  -0.1565522f, -0.0875465f, -0.2677269f, +0.0862878f, +0.4113186f, +0.1182667f, -0.1074736f, +0.2094058f,
  +0.1629180f, +0.0874000f, -0.1815196f, -0.5513203f, -0.0681807f, -0.1474513f, +0.0315660f, -0.0142705f,
  +0.1853895f, +0.2217647f, +0.2459134f, +0.2123604f, -0.0695537f, -0.1112343f, +0.0824124f, +0.3345875f,
  -0.1484112f, +0.6276198f, -0.0148938f, +0.1499856f, +0.1094271f, +0.0723850f, +0.1671325f, +0.3857062f,
  -0.1276329f, +0.0685252f, -0.1831383f, +0.0012929f, +0.1608271f, -0.0792024f, +0.3004262f, -0.1433558f,
  -0.3081483f, +0.1205003f, +0.1276547f, -0.2283351f, +0.1052130f, +0.0516045f, +0.3271073f, +0.1395855f,
  +0.0264470f, +0.0583302f, +0.0463102f, -0.1239995f, -0.1661868f, +0.1947860f, +0.1440182f, +0.0960067f,
  -0.2734420f, -0.0266361f, -0.0841765f, +0.0257488f, -0.4880244f, -0.2464218f, +0.1734933f, +0.2490886f,
  -0.1175903f, -0.3196371f, +0.0965274f, -0.1520633f, -0.1329656f, -0.0246759f, +0.2076931f, +0.4244540f,
  +0.0621246f, +0.0870871f, -0.1017616f, +0.5222885f, -0.5088972f, +0.0441724f, -0.1283370f, +0.0823167f,
  -0.1975865f, +0.0286258f, -0.0067748f, +0.0623361f, -0.0210654f, +0.2487122f, +0.0141741f, -0.0129204f,
  -0.1743946f, -0.1480361f, +0.0350095f, -0.0569900f, -0.2234032f, -0.1438180f, -0.2631643f, -0.3303177f,
  +0.0302179f, -0.1114157f, +0.0767702f, -0.1902149f, +0.1132328f, -0.2417042f, -0.4705718f, +0.0509158f,
  +0.1638723f, -0.1828788f, +0.2887435f, -0.1130057f, +0.1223624f, +0.0152603f, -0.1658247f, -0.0674260f,
  -0.0983720f, +0.0716638f, +0.1100263f, +0.0718002f, +0.0260857f, +0.0875460f, -0.0467139f, -0.0483314f,
  +0.1266617f, -0.1179906f, +0.0643624f, -0.1039831f, +0.0619427f, +0.0153470f, +0.0142025f, -0.2155205f,
  -0.0436081f, +0.1832943f, +0.1318625f, +0.1761890f, +0.1446540f, -0.0204153f, +0.1932935f, +0.1209213f,
  -0.0285214f, +0.0353472f, +0.1249694f, -0.1220868f, -0.0670089f, -0.0495893f, -0.0683435f, +0.3138634f,
  -0.1109422f, -0.0707706f, +0.0067179f, -0.1973532f, -0.0011090f, +0.0832701f, -0.1269137f, +0.2324191f,
  +0.0067940f, -0.0185103f, +0.0693569f, -0.4538030f, +0.2825238f, +0.0816532f, -0.0668611f, -0.0424530f
);

const float biases[4] = float[4](
  +0.0188932f, +0.0063315f, -0.0572847f, -0.0054702f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer45 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1729198f, -0.1256800f, -0.3035512f, +0.1074518f, +0.0933101f, +0.0794326f, -0.0724824f, +0.1070708f,
  -0.0821578f, -0.2205264f, -0.6959619f, +0.0196030f, +0.0656807f, -0.2511589f, -0.0949716f, +0.1090165f,
  -0.1289133f, +0.0297387f, -0.3720457f, +0.1466671f, +0.1931637f, -0.1029444f, -0.0158017f, +0.1254116f,
  -0.1351361f, -0.1234531f, +0.1780938f, +0.0023616f, +0.1078363f, +0.1343740f, -0.0573388f, -0.0929097f,
  +0.0501647f, -0.6591033f, -0.2910380f, -0.3406594f, -0.1296982f, +0.6261543f, +0.4824627f, -0.1968259f,
  +0.0147481f, +0.0898918f, +0.1161662f, -0.2516235f, +0.0992739f, -0.1761359f, +0.0683524f, -0.2166475f,
  -0.0451795f, +0.1129636f, -0.2009886f, -0.2373625f, -0.0298273f, -0.0944669f, +0.1841721f, +0.0776369f,
  +0.3058095f, +0.1283764f, +0.0426678f, -0.1746978f, +0.1782303f, +0.2091013f, -0.0036406f, +0.0499491f,
  +0.0637420f, +0.1251377f, +0.0275155f, +0.0036039f, +0.1127079f, -0.0487996f, -0.1020514f, -0.0100795f,
  -0.1560223f, +0.2856165f, -0.0819616f, +0.1215710f, +0.1629270f, +0.0339937f, +0.0846048f, +0.1896191f,
  +0.0732365f, +0.4424199f, -0.2359648f, -0.1550332f, +0.0212409f, -0.3406305f, -0.2220874f, -0.1523419f,
  +0.0299325f, -0.2733810f, +0.4095207f, -0.0162232f, -0.1588785f, +0.0795941f, -0.0867973f, +0.3397361f,
  +0.0092723f, +0.0532960f, -0.2071511f, +0.2758250f, +0.0903027f, +0.0438335f, +0.0513638f, -0.2213896f,
  +0.0924492f, +0.6749904f, -0.3571612f, -0.1099238f, -0.1965714f, -0.5771992f, -0.1962237f, +0.0546676f,
  +0.2446107f, -0.1351178f, +0.1137625f, -0.4118839f, -0.1224409f, +0.0055779f, -0.2416986f, +0.0632930f,
  -0.1023158f, +0.0197124f, +0.1462640f, +0.2540833f, +0.0951866f, -0.0838572f, -0.1211348f, -0.2904758f,
  +0.1776736f, -0.1750796f, -0.3358487f, -0.3583456f, -0.1287772f, -0.1161196f, -0.2189241f, +0.1224773f,
  +0.2625646f, -0.0126864f, +0.5406982f, -0.0114225f, -0.3379190f, -0.1088351f, -0.3222434f, +0.1038245f,
  +0.0597653f, +0.2634035f, -0.2182579f, -0.1480686f, +0.0793875f, -0.0579475f, +0.0872274f, -0.0769539f,
  -0.1402568f, -0.0178370f, -0.0534489f, -0.0316948f, -0.0692296f, -0.1337547f, -0.1736481f, -0.0881003f,
  -0.0178289f, +0.0330327f, +0.0222352f, +0.0779957f, +0.0231680f, +0.0778156f, -0.0020672f, -0.0688459f,
  +0.2201379f, -0.0668147f, -0.1030055f, +0.2109977f, +0.0723754f, +0.2644976f, -0.1076076f, -0.1382027f,
  -0.2692274f, -0.1180075f, +0.0417563f, -0.4627508f, +0.4861060f, -0.0265745f, -0.1941993f, +0.0643022f,
  -0.0269805f, +0.0592244f, +0.1404980f, +0.0232596f, -0.2093545f, -0.1082586f, +0.1333163f, +0.0650939f,
  +0.0712658f, -0.3036474f, +0.2017365f, +0.0422597f, +0.1318725f, +0.0116826f, +0.2243086f, -0.1598860f,
  +0.2503297f, +0.2889064f, +0.2020931f, +0.0462519f, +0.4616149f, -0.3080804f, +0.2562829f, +0.0456492f,
  -0.1354180f, -0.0200418f, -0.1420678f, +0.0225834f, +0.0015205f, +0.2726585f, -0.0262843f, -0.0073098f,
  -0.0120095f, +0.2237374f, -0.2180430f, +0.0237174f, +0.0542234f, +0.0869264f, +0.1786419f, +0.0175580f,
  +0.0176227f, +0.2820008f, -0.4559103f, +0.2661038f, +0.2477756f, -0.3166167f, +0.1590040f, -0.5423656f,
  -0.0344377f, +0.0946946f, +0.3059164f, -0.0396843f, -0.1975546f, -0.2992231f, -0.3728812f, +0.3633320f,
  +0.0232234f, -0.3117654f, +0.0049424f, -0.1265169f, -0.0932852f, -0.3566752f, -0.1228019f, -0.0265979f,
  -0.0205632f, +0.0432326f, -0.3233241f, -0.5146128f, +0.0461793f, -0.0264162f, +0.0821098f, -0.0087770f,
  +0.0078696f, +0.0107761f, +0.1739377f, +0.1554188f, -0.3579877f, -0.3470285f, -0.3577211f, +0.3644613f,
  -0.2392788f, -0.4130729f, -0.0214892f, +0.2111335f, -0.0658894f, -0.1315318f, -0.1797183f, +0.2288882f,
  +0.0461631f, +0.2634807f, -0.0547034f, -0.3942870f, -0.1311246f, -0.1643388f, +0.0033086f, +0.2643250f,
  +0.0387050f, +0.2185633f, +0.1612787f, +0.0112198f, -0.0110350f, -0.2494507f, +0.0281923f, -0.2582588f
);

const float biases[4] = float[4](
  +0.0340426f, -0.0102805f, +0.0159930f, -0.0278429f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer45 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0628209f, +0.0273037f, -0.2424253f, +0.0002330f, +0.1131366f, -0.0229337f, +0.0073444f, +0.2742001f,
  +0.1156402f, +0.0788780f, -0.3309433f, +0.1319074f, -0.0824176f, -0.1309348f, +0.1017034f, +0.0226549f,
  +0.0694691f, +0.0764452f, -0.0130937f, +0.1636284f, -0.0747970f, +0.0336369f, +0.1408481f, +0.0296032f,
  +0.2598366f, +0.1058608f, +0.6967638f, +0.1070000f, -0.3713581f, +0.4602986f, +0.1000991f, -0.1548320f,
  +0.3111941f, -0.5046904f, +0.3307020f, -0.3137816f, -0.3885081f, +0.3288716f, -0.2806918f, -0.3994060f,
  +0.0385983f, -0.1180791f, -0.1355016f, -0.1759943f, -0.2012376f, +0.1290496f, -0.1504003f, -0.1282728f,
  -0.1161453f, +0.3093126f, +0.0173488f, +0.1658615f, +0.4051939f, -0.3704115f, -0.2953118f, -0.0182374f,
  -0.0456633f, +0.7612290f, +0.4284137f, +0.3906566f, +0.4641954f, -0.2665755f, -0.0634848f, +0.2680179f,
  -0.1177929f, +0.2029725f, +0.2192956f, +0.0460296f, -0.1878128f, +0.0902252f, +0.0358723f, -0.1022932f,
  +0.2287530f, +0.2184401f, +0.2761420f, -0.1776146f, -0.0032615f, +0.0472680f, -0.2149286f, -0.2314816f,
  +0.2988550f, -0.2721612f, +0.3142999f, -0.1118859f, +0.2188899f, +0.4315532f, -0.0309391f, -0.0738273f,
  +0.3056867f, +0.1162190f, +0.0467638f, -0.1566110f, +0.0546512f, +0.0312812f, -0.0891113f, -0.2038654f,
  -0.1670690f, +0.6782712f, -0.1649777f, +0.0513762f, +0.2738670f, -0.0614446f, -0.0145300f, +0.0244191f,
  +0.3244751f, +0.6340841f, +0.1198704f, +0.2873719f, -0.1633973f, -0.0896137f, -0.0490967f, -0.2385988f,
  -0.0009629f, +0.0018675f, -0.0250401f, +0.0463018f, -0.1192278f, +0.3186291f, +0.0089580f, -0.0713092f,
  +0.1823844f, +0.0526222f, -0.0735420f, -0.1805892f, -0.2107817f, -0.0470052f, -0.3617713f, -0.0516835f,
  +0.3514779f, +0.1176449f, +0.2794280f, +0.0513878f, +0.0648458f, -0.1736781f, -0.2538857f, -0.2410362f,
  +0.0443200f, -0.0033622f, -0.1225967f, +0.2049401f, +0.3603061f, +0.0573132f, +0.0613051f, +0.1235790f,
  +0.0916089f, -0.1647442f, +0.0239103f, -0.1925369f, -0.1530284f, +0.0250163f, +0.0201937f, -0.2699384f,
  -0.0039848f, +0.1952554f, -0.0873461f, -0.1576639f, -0.2651517f, +0.0222335f, +0.0813277f, -0.1136132f,
  -0.1835684f, -0.1368750f, +0.4848957f, -0.0664926f, +0.2040823f, +0.2307751f, -0.0113721f, +0.0255363f,
  -0.1639900f, -0.2431084f, +0.1749548f, +0.1865907f, -0.0228638f, +0.3540639f, -0.3338556f, +0.0743312f,
  +0.0197308f, +0.0187041f, +0.1068727f, -0.0836117f, +0.3508588f, +0.2665841f, -0.1201187f, +0.0842498f,
  -0.1978396f, +0.1599548f, -0.0373313f, -0.1413339f, -0.0145072f, -0.0220015f, -0.0341463f, +0.1705085f,
  -0.0530958f, -0.0937098f, +0.3921467f, +0.0826319f, +0.0738974f, +0.0170710f, -0.3047286f, +0.1779597f,
  +0.0140624f, -0.2120350f, -0.1664196f, -0.2559104f, -0.0049935f, +0.0112130f, +0.1351456f, +0.0192424f,
  -0.1071608f, -0.0934730f, +0.1767809f, +0.2283607f, +0.2001745f, -0.1111876f, +0.2173606f, +0.1117909f,
  -0.3055749f, +0.0783091f, -0.0717148f, +0.1998184f, -0.0016135f, -0.2717066f, +0.1903001f, -0.1356826f,
  -0.0435970f, +0.2504800f, -0.1635471f, +0.1715190f, -0.0049834f, +0.0431908f, +0.1263442f, -0.2133153f,
  -0.0635683f, -0.3015080f, +0.0158409f, -0.1615368f, +0.1671180f, +0.0032855f, -0.2148207f, +0.0359861f,
  +0.2325232f, +0.0423724f, +0.1127293f, -0.0423769f, +0.0960639f, -0.0733124f, +0.0162766f, +0.0525457f,
  -0.0803607f, -0.0952851f, +0.1827254f, +0.2786922f, +0.1550776f, -0.1210809f, +0.4056821f, -0.3023472f,
  -0.2318897f, +0.1097635f, +0.0561195f, -0.0126131f, +0.0662112f, +0.2956273f, -0.0260730f, +0.1759697f,
  +0.0282606f, -0.1112646f, -0.0562253f, +0.0641447f, -0.1378271f, -0.0259102f, +0.1333569f, +0.0149544f,
  -0.0441341f, -0.2906179f, -0.1365322f, -0.0515641f, +0.0706374f, -0.1094512f, -0.1163322f, +0.0893698f,
  +0.1429576f, -0.0742625f, +0.0032764f, -0.2380606f, +0.0976799f, -0.0266329f, -0.0245677f, -0.0347328f
);

const float biases[4] = float[4](
  -0.0377721f, -0.0273364f, +0.0497069f, +0.0293000f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer46 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1559786f, +0.1027574f, +0.0346986f, +0.0153409f, +0.0813161f, +0.0001808f, +0.0366466f, -0.0460310f,
  -0.2950050f, -0.1629812f, -0.1189487f, +0.0779997f, +0.0990436f, -0.0557349f, +0.0253456f, +0.0804522f,
  +0.0619008f, -0.0448604f, -0.1505144f, +0.1078696f, +0.2396182f, +0.0588080f, +0.0449207f, -0.0743367f,
  +0.2016444f, -0.2961546f, -0.0079616f, -0.1176643f, -0.0449977f, -0.1786552f, -0.3023373f, +0.0104828f,
  +0.2688206f, -0.1404827f, +0.0862724f, +0.5087342f, -0.3673249f, -0.4859064f, +0.0703667f, +0.0150265f,
  +0.2025648f, -0.0652585f, -0.1911366f, -0.1568574f, +0.0904432f, -0.0494555f, -0.0786951f, -0.1691515f,
  +0.1467733f, +0.1925158f, +0.0469153f, -0.3673905f, +0.0355277f, +0.0013584f, +0.0778534f, -0.0408206f,
  -0.0236317f, +0.1734982f, -0.0406437f, -0.0399087f, +0.0031670f, -0.1080044f, -0.1032958f, -0.1209139f,
  +0.0186358f, -0.0529339f, -0.1089867f, +0.0137502f, +0.0899952f, -0.1329322f, -0.1780774f, +0.1696986f,
  +0.1567323f, +0.2674697f, -0.2626729f, +0.0556704f, +0.0628615f, +0.0293508f, -0.1668828f, +0.1302476f,
  +0.0903174f, +0.3110498f, -0.3953760f, +0.4302796f, +0.5574142f, -0.0621078f, +0.1803359f, +0.0939741f,
  +0.0515722f, -0.0689730f, +0.4708352f, +0.2190538f, -0.2026306f, -0.0671951f, +0.0788143f, -0.2321108f,
  +0.0601094f, +0.1327311f, -0.0069708f, -0.2334578f, +0.0949062f, +0.1028048f, +0.0078477f, -0.1571172f,
  +0.2153745f, -0.1500750f, -0.2222290f, +0.5151072f, -0.1061303f, -0.3298624f, +0.2393244f, +0.0489341f,
  +0.0035678f, -0.2240669f, -0.1294039f, +0.0806362f, +0.0163629f, -0.1759362f, +0.0494224f, -0.2845494f,
  -0.0220672f, +0.1827314f, -0.1167125f, +0.1585226f, +0.0813136f, +0.1277879f, -0.1876544f, +0.1515959f,
  +0.1982380f, +0.2847544f, +0.0955288f, -0.2559411f, -0.1284092f, +0.1630537f, +0.0597387f, +0.0463682f,
  +0.2529748f, +0.1531773f, -0.1277015f, +0.0727398f, -0.0654920f, +0.2150837f, -0.0920510f, -0.0898470f,
  +0.0124583f, -0.0175252f, +0.0370222f, -0.1155719f, +0.2344279f, +0.1114775f, -0.1311848f, +0.0778791f,
  -0.2757959f, -0.4417070f, -0.1216253f, +0.2705231f, -0.1178567f, -0.1017702f, -0.2183723f, -0.0037286f,
  +0.2509447f, -0.0589571f, -0.0781485f, -0.0174895f, -0.0344613f, +0.0436912f, -0.1133985f, +0.0387808f,
  +0.2274789f, +0.1855531f, -0.0603565f, +0.0971288f, +0.3027256f, -0.2270058f, +0.1227103f, -0.1018396f,
  +0.1944097f, -0.3374018f, -0.4215780f, -0.1402623f, +0.3102625f, -0.3851738f, -0.2533479f, -0.3480467f,
  -0.2356167f, +0.0968533f, +0.0334795f, -0.1623845f, +0.3518766f, -0.1284807f, +0.0065245f, +0.1306386f,
  +0.0493204f, +0.0994258f, -0.1037215f, +0.2162246f, +0.0638940f, -0.1978235f, -0.2207259f, +0.0175619f,
  +0.1811353f, -0.4788637f, +0.1022790f, -0.0273772f, +0.2839828f, -0.2752432f, +0.2136914f, +0.3794475f,
  -0.0201528f, +0.1548894f, +0.2228718f, -0.0592621f, +0.1936028f, -0.2022911f, +0.0688533f, +0.2223861f,
  +0.0571750f, +0.0351092f, -0.0011907f, +0.0747570f, +0.1018562f, -0.0217595f, -0.0271435f, -0.0020665f,
  +0.1834980f, +0.2436070f, -0.2723103f, +0.2368357f, +0.4465585f, +0.1168859f, -0.0030474f, -0.1657186f,
  +0.2957219f, -0.0176162f, -0.1208125f, +0.1340014f, +0.0721335f, -0.0437572f, -0.0423252f, +0.0125601f,
  -0.1595570f, +0.2224922f, -0.0421304f, +0.4010738f, +0.0679525f, -0.2243126f, +0.2849150f, +0.0832585f,
  -0.1271114f, -0.0685318f, -0.0546309f, +0.0135861f, -0.2827092f, -0.3261763f, -0.1332687f, -0.2801360f,
  +0.2051676f, -0.0920003f, -0.0839047f, -0.1203965f, -0.1689374f, -0.4341518f, +0.0012513f, +0.1796998f,
  -0.3732383f, +0.1204324f, +0.0872950f, -0.0845435f, +0.1881106f, +0.0913715f, +0.0678077f, -0.0253840f,
  +0.0009580f, +0.2278319f, +0.0256216f, -0.0328776f, +0.1478743f, +0.0445133f, -0.1352426f, -0.2857352f,
  +0.0242926f, -0.1307507f, +0.1699742f, -0.1922302f, +0.0278649f, -0.3047509f, +0.3301000f, -0.0022311f
);

const float biases[4] = float[4](
  -0.0142897f, +0.0500553f, -0.0799106f, +0.0110824f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer46 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0728003f, +0.0996353f, -0.0730681f, -0.1167685f, +0.0682115f, -0.2580875f, -0.0889841f, +0.2309245f,
  +0.0667521f, +0.0162870f, -0.4651981f, +0.0925346f, -0.3770369f, +0.0634121f, +0.1611813f, -0.1278850f,
  +0.1971800f, +0.0643558f, -0.3059588f, -0.2273883f, +0.5963321f, -0.0378330f, +0.0892282f, +0.1876664f,
  -0.0179956f, +0.1262993f, +0.0774519f, +0.0049361f, +0.1363414f, +0.0274318f, -0.2384009f, -0.1182148f,
  +0.4787417f, +0.0032010f, -0.4472082f, -0.2333819f, +0.3410782f, +0.0421287f, -0.0747128f, -0.1224600f,
  +0.2094668f, -0.2487559f, -0.0914839f, -0.0019639f, -0.3892677f, -0.0557657f, +0.1377459f, -0.1264737f,
  +0.0924271f, -0.0133449f, +0.0204012f, -0.5537118f, -0.0394475f, -0.0781373f, -0.0108404f, +0.0866406f,
  +0.0685164f, -0.3525657f, -0.0309807f, +0.0679990f, -0.1356019f, -0.1919439f, +0.0418768f, +0.1251351f,
  -0.0314638f, -0.2159021f, -0.0364531f, +0.0990229f, -0.3256310f, -0.0124589f, +0.2174691f, +0.0100269f,
  -0.2111674f, +0.1111518f, +0.0514055f, +0.1418097f, +0.2102109f, -0.1387870f, -0.0338795f, -0.0296581f,
  -0.2899704f, +0.0031509f, +0.3176297f, +0.2539657f, -0.2171122f, +0.0163013f, +0.2976635f, -0.0619353f,
  -0.1813127f, +0.0257780f, +0.2252764f, -0.4051593f, +0.4726958f, -0.1846255f, -0.0434474f, +0.0486838f,
  +0.1515703f, -0.1125535f, +0.2281029f, -0.2155468f, +0.1074022f, -0.1786297f, +0.0837259f, -0.3607435f,
  -0.4602450f, +0.5702240f, +0.0997594f, +0.3861063f, +0.4567586f, +0.0343060f, -0.2848689f, -0.1157385f,
  -0.0041441f, -0.2553565f, -0.1300185f, +0.1104264f, -0.0678836f, +0.1231209f, -0.1343088f, -0.2726493f,
  +0.0638251f, -0.0963269f, +0.1207868f, -0.2965041f, -0.0919631f, -0.2148663f, -0.0062856f, +0.1140146f,
  +0.0299383f, -0.0458013f, +0.1970618f, -0.3723818f, +0.1472112f, -0.3499458f, -0.0061980f, +0.0030437f,
  -0.3547594f, -0.2609921f, +0.1804883f, +0.1774378f, +0.1077191f, -0.1034115f, +0.0621431f, -0.0099533f,
  +0.1820235f, +0.3167086f, +0.0749329f, -0.0252440f, +0.0563366f, -0.2395850f, +0.0678470f, +0.0441966f,
  +0.3473906f, -0.0280259f, +0.3109222f, +0.0162315f, +0.1587286f, -0.0271642f, -0.0873370f, -0.1826308f,
  +0.1341937f, +0.1350864f, -0.0836542f, -0.1368386f, +0.3133523f, +0.2419243f, +0.2664145f, -0.1662699f,
  -0.1815206f, +0.0997064f, -0.2466649f, -0.1849876f, -0.0845602f, +0.0582090f, -0.1053421f, +0.1084737f,
  -0.6132436f, +0.1939890f, +0.2662950f, -0.1585380f, -0.5129870f, +0.0619670f, +0.0035562f, -0.2184933f,
  +0.4198136f, +0.0303687f, +0.0380361f, +0.3438464f, -0.5247280f, +0.0618069f, +0.1772476f, +0.1631246f,
  -0.3460309f, -0.0568508f, +0.0744410f, +0.1045409f, -0.0236060f, +0.0790841f, +0.1315992f, +0.0623722f,
  -0.2743849f, +0.2826163f, +0.1680088f, -0.2707105f, +0.0210746f, +0.0955273f, +0.0583763f, -0.2449408f,
  -0.2474711f, +0.0733570f, -0.0186313f, +0.0257946f, +0.0381079f, +0.1236998f, +0.0393616f, -0.2966125f,
  -0.0279885f, -0.3096447f, -0.0662566f, -0.0501087f, -0.1115728f, -0.1246271f, -0.0795906f, +0.0321934f,
  +0.0002987f, -0.0422931f, +0.2097173f, -0.1497042f, +0.2376640f, -0.0861779f, -0.0943404f, -0.0757168f,
  -0.3133054f, -0.0668142f, -0.0614944f, -0.2765390f, +0.3823476f, -0.1574009f, +0.0256316f, +0.1075095f,
  +0.0257774f, +0.0381057f, -0.1429429f, +0.0020517f, -0.1766695f, -0.0727629f, +0.0808469f, -0.0067377f,
  +0.2966236f, +0.0394342f, +0.0998171f, -0.2722695f, -0.0467205f, +0.2819236f, -0.0646740f, +0.2154905f,
  -0.0100943f, +0.0081362f, +0.0392255f, -0.0965038f, -0.4789099f, -0.0606724f, +0.0723641f, +0.1178458f,
  -0.2453456f, -0.4105298f, -0.0280258f, +0.0576610f, -0.0798069f, +0.1013817f, +0.0713536f, +0.0699051f,
  -0.1242103f, -0.2152086f, -0.1227587f, -0.0007625f, +0.0649427f, -0.1749706f, -0.1647047f, -0.0327619f,
  -0.4636984f, -0.3720204f, +0.1386215f, -0.1747493f, -0.2183338f, -0.1148418f, +0.1739951f, +0.0714932f
);

const float biases[4] = float[4](
  -0.0409062f, +0.0293482f, -0.0304695f, -0.0148462f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer47 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0986964f, -0.0470475f, +0.1653291f, +0.0738538f, +0.0640951f, +0.0873441f, -0.1148988f, -0.0578041f,
  +0.1986033f, +0.0293438f, +0.0707428f, -0.4466692f, +0.0030700f, -0.0594449f, +0.1352446f, +0.0467156f,
  -0.3721182f, -0.0348108f, +0.1517380f, -0.1637492f, +0.2812588f, +0.1329446f, -0.0517787f, +0.1695754f,
  -0.0027224f, -0.4341820f, +0.2487280f, +0.1544097f, -0.0339495f, -0.1443749f, -0.1184751f, -0.0748455f,
  +0.4290775f, +0.1871393f, -0.0846740f, -0.4924297f, -0.3205728f, +0.2907117f, +0.0652707f, +0.1502240f,
  -0.5007173f, -0.0239130f, -0.2142604f, -0.0773892f, +0.0699612f, +0.2015137f, -0.1300472f, +0.0307392f,
  -0.0625353f, -0.2021849f, -0.0093833f, +0.1559147f, +0.1374120f, -0.2346438f, -0.0422453f, +0.2013293f,
  +0.0263880f, -0.0523209f, +0.0000854f, -0.2440696f, +0.0625900f, -0.0901836f, +0.0683899f, +0.1841231f,
  -0.2375248f, -0.0935275f, -0.0455761f, +0.0413649f, -0.0583674f, +0.2258624f, -0.0398970f, -0.2848145f,
  +0.1048010f, -0.1387227f, -0.0878566f, -0.0066479f, +0.0860673f, -0.0861278f, -0.1454908f, +0.1396724f,
  +0.2057921f, +0.0434668f, +0.1856230f, -0.4978322f, +0.3286282f, -0.0627958f, +0.1382598f, -0.1442684f,
  +0.1231660f, +0.1891734f, -0.0825500f, -0.0869784f, +0.2670882f, -0.0352334f, -0.1730483f, -0.2527094f,
  +0.2221758f, -0.0530280f, -0.2716701f, +0.1169633f, +0.1763754f, -0.4254993f, +0.0687369f, -0.0726355f,
  +0.0701002f, -0.2334014f, +0.1412999f, -0.0820405f, -0.3809257f, +0.0922848f, +0.3105097f, -0.1225146f,
  -0.0596357f, +0.1229329f, -0.0705938f, -0.1602592f, +0.0661603f, -0.2511688f, -0.2449683f, -0.0897177f,
  +0.0436436f, -0.1864402f, +0.1117290f, +0.0346935f, -0.1183301f, -0.2722341f, -0.1712750f, -0.1663386f,
  -0.0939398f, +0.1596202f, +0.0298081f, +0.1236302f, +0.2393440f, +0.2198596f, +0.1549752f, -0.2909310f,
  -0.2272788f, +0.0874134f, +0.0636191f, -0.0127104f, -0.1554149f, -0.0005540f, -0.2298595f, -0.0349437f,
  -0.0632335f, -0.0211049f, -0.1376839f, -0.1144180f, +0.0827596f, +0.0464823f, +0.0151352f, +0.0872744f,
  -0.0775472f, +0.0256323f, +0.0277350f, -0.0431074f, -0.2199671f, -0.5482916f, +0.0389532f, -0.3217074f,
  -0.2209106f, -0.2342012f, -0.0393237f, -0.0071625f, +0.2565509f, +0.0282111f, +0.0887125f, +0.2196694f,
  -0.1247880f, +0.2851737f, -0.0754858f, +0.0105692f, +0.1888838f, -0.2376573f, -0.0919768f, +0.0286718f,
  +0.0121207f, -0.2915988f, +0.0623129f, -0.1522108f, -0.0218278f, -0.1648649f, +0.1399952f, -0.2316323f,
  -0.2284050f, -0.2026140f, +0.1699877f, -0.2207161f, -0.1703587f, +0.2254984f, -0.0148589f, +0.1693653f,
  +0.0296155f, +0.3213415f, -0.0484767f, -0.1604893f, -0.0536852f, +0.2052118f, +0.0635225f, +0.0354669f,
  +0.0308691f, +0.3433883f, +0.0851066f, +0.1007827f, -0.1408228f, +0.1655696f, -0.0180509f, -0.2880895f,
  -0.2650432f, +0.2061984f, -0.1615867f, -0.0686368f, -0.1600302f, +0.1935831f, +0.0840993f, +0.1570421f,
  -0.2927872f, +0.2197837f, -0.1963158f, -0.1062284f, +0.0902404f, +0.2562106f, -0.0249411f, -0.1630366f,
  -0.3675572f, +0.5184631f, -0.2467722f, +0.2392951f, +0.0624040f, +0.1643391f, +0.0284120f, -0.1647245f,
  -0.0230103f, -0.0547427f, +0.2914481f, +0.0089295f, -0.1303161f, +0.3539851f, +0.0912813f, -0.0239787f,
  +0.3579167f, +0.1578269f, +0.6033098f, +0.1032079f, +0.0341444f, -0.0512579f, +0.0881933f, +0.0289915f,
  +0.0964256f, -0.4508743f, +0.2954256f, -0.0370051f, -0.0280534f, -0.1284181f, -0.5643900f, +0.0676528f,
  +0.3390585f, -0.1676111f, +0.1152878f, +0.0488886f, -0.0818480f, +0.5432802f, -0.7778356f, -0.0362067f,
  -0.0528134f, -0.1085095f, -0.0372284f, -0.0376365f, +0.0257594f, +0.1770640f, +0.0992726f, +0.0905223f,
  +0.1211962f, +0.4588764f, +0.0886329f, +0.1489687f, -0.0790643f, -0.1303882f, +0.2415064f, +0.5418918f,
  +0.2942510f, +0.1190573f, +0.1469836f, +0.1783942f, -0.2337833f, -0.0652863f, +0.2831929f, -0.1027217f
);

const float biases[4] = float[4](
  +0.0351697f, +0.0322872f, +0.0127188f, -0.0314926f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer47 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0814358f, -0.1104816f, -0.0511358f, -0.0517379f, +0.0069334f, -0.0631159f, +0.0303313f, +0.0892930f,
  +0.0787946f, -0.1224475f, -0.0863178f, +0.0834785f, +0.0202023f, +0.1470093f, -0.0334985f, +0.0399239f,
  +0.2328365f, -0.1472675f, -0.1203327f, +0.1812622f, -0.1579843f, +0.0344980f, +0.0805369f, +0.0204415f,
  +0.4036584f, +0.0331392f, -0.2569520f, +0.0112590f, +0.4223140f, +0.1792682f, +0.1565034f, +0.2183815f,
  +0.3685246f, -0.3404033f, -0.3041373f, -0.0926197f, -0.1173821f, -0.2298828f, -0.0826311f, +0.3732358f,
  +0.1653121f, +0.1577540f, +0.2646085f, +0.7935219f, -0.2968268f, +0.2362541f, -0.3847387f, -0.1011458f,
  +0.0757727f, +0.6004581f, -0.2633806f, -0.1288996f, +0.0304690f, +0.3716356f, +0.1126951f, +0.0642186f,
  +0.2451173f, -0.1490624f, -0.0137582f, +0.3119665f, +0.2507810f, -0.0783264f, +0.0806753f, +0.2280006f,
  -0.1022604f, +0.1072759f, -0.1671986f, +0.0549406f, -0.0465451f, +0.5607057f, -0.1068600f, -0.3052892f,
  +0.0879875f, -0.1948048f, -0.0326597f, +0.1668908f, -0.0648951f, +0.1479023f, +0.0952563f, +0.1857176f,
  +0.0424731f, -0.2736642f, +0.1400922f, +0.0077694f, -0.4331656f, +0.0646148f, +0.1937529f, +0.0037068f,
  -0.1535408f, -0.0602381f, +0.0426718f, -0.0356931f, +0.1605784f, +0.0166575f, -0.1045816f, +0.0100985f,
  +0.0634973f, -0.2865345f, -0.0246775f, -0.2245837f, +0.0030403f, +0.0685782f, +0.0452174f, +0.1349000f,
  -0.1908934f, +0.1281054f, +0.0003446f, -0.1586536f, -0.1505836f, -0.0163967f, +0.0019857f, -0.0096075f,
  -0.2379082f, -0.0241982f, -0.3552949f, +0.0100243f, -0.0844918f, -0.1077423f, +0.1639485f, +0.1984848f,
  -0.0575235f, +0.0133415f, -0.0087848f, -0.0027766f, +0.2508037f, +0.1165646f, -0.0919863f, +0.1135795f,
  -0.0123950f, -0.0062300f, +0.2036882f, +0.0094237f, +0.1676117f, -0.0476022f, -0.0636022f, +0.2360814f,
  -0.1054347f, +0.0054422f, +0.0495157f, -0.1212547f, +0.1029261f, +0.0365766f, -0.1226783f, -0.1246045f,
  +0.0450532f, -0.0522776f, +0.0860215f, -0.1194527f, +0.0830367f, -0.0816288f, -0.0231818f, -0.0813287f,
  +0.0953251f, -0.0052938f, +0.1599356f, -0.2795305f, -0.5082801f, +0.1183620f, +0.1743516f, +0.1311026f,
  -0.2159069f, +0.2095934f, +0.1281604f, -0.0248982f, +0.0241457f, -0.2955632f, -0.3615181f, +0.2538063f,
  -0.0859993f, -0.1165412f, -0.0246925f, -0.1686194f, -0.1021681f, -0.1846057f, +0.0938608f, +0.2536687f,
  +0.2502616f, -0.0147585f, -0.3131275f, -0.4275447f, -0.5112003f, -0.9819599f, -0.4916461f, +0.5708374f,
  -0.0641710f, +0.1989642f, -0.1276758f, +0.4295017f, +0.2104411f, -0.1070870f, -0.1257535f, -0.2141099f,
  +0.2021024f, +0.0406063f, +0.1956138f, +0.0668362f, -0.0467322f, +0.1961329f, -0.1030297f, -0.0431204f,
  -0.2716751f, -0.0803812f, +0.3386178f, +0.2562538f, -0.0235681f, -0.1382448f, -0.2386799f, -0.2513174f,
  -0.0946553f, +0.2891366f, -0.2014560f, +0.0719363f, -0.0057111f, +0.0136517f, +0.2981117f, -0.3319454f,
  -0.0774989f, -0.0607464f, +0.1101154f, -0.1535273f, +0.1487157f, +0.1275606f, +0.0422551f, -0.0965840f,
  -0.1725012f, -0.1528941f, -0.0848946f, +0.2182041f, -0.1000024f, +0.1128254f, -0.1604041f, +0.0033295f,
  -0.0432153f, -0.1028898f, -0.1449078f, -0.0425137f, -0.0851125f, -0.1032625f, +0.0126794f, +0.2786666f,
  +0.2737883f, -0.2091761f, +0.0354885f, -0.0079727f, -0.0431129f, +0.0969825f, +0.0998540f, +0.1204278f,
  -0.0471989f, +0.0054614f, -0.2848233f, +0.2938129f, -0.0635113f, +0.2840506f, -0.2717270f, -0.0802602f,
  -0.0566657f, -0.0938130f, +0.2470346f, +0.4579342f, -0.1658336f, +0.0226047f, +0.2232821f, +0.0913330f,
  +0.1183264f, -0.1103780f, -0.1317431f, +0.2139379f, +0.5831001f, +0.4077190f, -0.0631037f, +0.4243985f,
  +0.3354904f, -0.3250215f, +0.0966693f, +0.0154796f, +0.1274707f, -0.1372323f, -0.0404624f, +0.6119955f,
  +0.1582542f, -0.3275407f, +0.4218028f, +0.0833575f, -0.1769868f, +0.0095569f, -0.1410417f, +0.2543077f
);

const float biases[4] = float[4](
  -0.0284685f, +0.0190596f, -0.0516512f, +0.0724603f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer48 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0725023f, +0.0056926f, +0.2548330f, +0.0760769f, +0.0225095f, -0.1849682f, -0.0246402f, -0.1606069f,
  +0.1771547f, +0.1306880f, -0.1063823f, -0.0473352f, -0.3974288f, -0.0459396f, -0.3261952f, +0.0737828f,
  +0.0604195f, -0.0911934f, -0.0638591f, +0.2070674f, +0.1164390f, -0.0862185f, +0.0908880f, +0.2225585f,
  +0.4158747f, +0.0699591f, +0.2851408f, +0.0537776f, -0.0940265f, -0.2310384f, +0.1943866f, +0.0327900f,
  -0.4744678f, -0.3770555f, -0.0912049f, +0.2696704f, -0.3130865f, -0.0388872f, +0.0699222f, -0.2355332f,
  +0.0685871f, +0.1064312f, +0.0360140f, +0.1939357f, -0.0778231f, -0.2566771f, -0.0966274f, -0.0863094f,
  +0.2964893f, -0.0838689f, +0.2539820f, +0.0348478f, +0.0203875f, +0.0187127f, +0.0329732f, -0.2092143f,
  -0.1320811f, +0.0553074f, -0.0034651f, -0.0119697f, -0.4051237f, +0.1038162f, +0.4273070f, -0.1477541f,
  +0.0408288f, +0.0176430f, -0.0985522f, +0.1623273f, -0.1034071f, -0.0325897f, -0.0404953f, -0.1434424f,
  -0.1595346f, -0.0433552f, +0.1810773f, +0.2090009f, -0.1197919f, -0.0831582f, +0.1062466f, -0.1349739f,
  -0.1590797f, +0.1575978f, -0.3433712f, +0.0809898f, -0.1425286f, +0.0606404f, -0.3285189f, +0.2979027f,
  +0.0377676f, +0.2079045f, -0.2624915f, -0.1575382f, -0.7446823f, +0.0349335f, +0.0546327f, -0.2224590f,
  -0.1803635f, -0.2969461f, +0.0299248f, +0.0800305f, -0.4693696f, -0.1815594f, -0.1271098f, -0.1152272f,
  -0.2717274f, -0.0366038f, +0.1647979f, -0.8753287f, -0.1503000f, -0.0293172f, +0.2880182f, +0.7537667f,
  +0.1735499f, +0.3242339f, -0.1769573f, -0.1261619f, -0.4006526f, +0.3253381f, +0.0761364f, -0.0563476f,
  -0.0963259f, -0.1101282f, +0.2454758f, -0.1472785f, -0.2580225f, -0.0518083f, +0.1386468f, +0.0123403f,
  -0.1593490f, +0.0956979f, -0.2674038f, +0.0259011f, -0.2306492f, +0.0102003f, +0.2666063f, +0.1636985f,
  +0.0468288f, +0.2075828f, -0.0564115f, -0.0704309f, -0.2209426f, +0.0343025f, -0.0802828f, +0.0215720f,
  +0.1286753f, -0.1591538f, +0.2468033f, -0.0276139f, +0.1266388f, -0.2260163f, -0.0530045f, -0.1983364f,
  -0.1182621f, +0.2033519f, +0.0327965f, -0.5332906f, -0.0953073f, -0.1147080f, -0.0435390f, -0.1329880f,
  +0.0994702f, +0.0604021f, -0.0178540f, +0.0060307f, +0.0903621f, +0.0008915f, -0.0244714f, -0.1078061f,
  +0.0804331f, -0.2047288f, -0.0611285f, +0.4004472f, +0.0338462f, +0.1181080f, +0.0704535f, +0.0027190f,
  +0.1534738f, +0.0537041f, -0.2865363f, +1.0950531f, +0.2216979f, -0.1494325f, +0.1497542f, +0.1151316f,
  -0.1463280f, +0.2873016f, +0.1832165f, +0.2426059f, +0.0014351f, +0.1315770f, +0.1034565f, +0.0646394f,
  +0.0327257f, +0.0850116f, -0.0916810f, +0.1824586f, +0.0958804f, -0.2326406f, +0.0794948f, +0.0565951f,
  -0.0670010f, -0.4319164f, -0.1253938f, +0.1261932f, +0.0452981f, -0.0972663f, -0.4477153f, -0.0380927f,
  -0.0381583f, +0.2956600f, +0.1495220f, +0.0124800f, -0.0262156f, +0.0786902f, +0.5369269f, -0.0208838f,
  +0.0424379f, -0.1485000f, +0.2610284f, +0.1664990f, -0.2868880f, -0.1820791f, -0.2505964f, -0.2035008f,
  +0.1949361f, -0.0302220f, -0.1293202f, -0.3434784f, -0.4012456f, -0.2011224f, -0.0133407f, +0.2075186f,
  -0.2929654f, -0.0660009f, -0.0418154f, -0.2816484f, +0.0916421f, -0.1019510f, +0.0367542f, +0.1494983f,
  +0.0201074f, +0.0797210f, +0.3563530f, -0.1913485f, -0.3307630f, -0.1311394f, -0.2199199f, -0.1144919f,
  -0.0093366f, -0.0724607f, +0.0354311f, -0.1402002f, -0.2756441f, -0.1004773f, -0.1606861f, -0.0008317f,
  -0.0934767f, +0.1154306f, -0.0465298f, +0.2801056f, -0.3329091f, +0.0913135f, +0.1281899f, +0.0014009f,
  +0.1220195f, +0.1625101f, +0.0405980f, -0.2831966f, -0.0269151f, -0.0783037f, +0.0372509f, +0.0733404f,
  +0.1128533f, +0.2682299f, -0.1164077f, +0.0086401f, -0.2227431f, -0.2909231f, +0.3822888f, -0.2658669f,
  +0.1406052f, +0.0892832f, -0.1546880f, +0.0768232f, -0.1349537f, -0.2360052f, -0.1309781f, +0.1603565f
);

const float biases[4] = float[4](
  -0.0184682f, +0.0037177f, -0.0117181f, +0.0007546f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer48 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2677298f, +0.1880441f, +0.0440696f, -0.1218787f, -0.1269221f, -0.0802099f, -0.0137344f, +0.0241281f,
  -0.0297093f, -0.0804473f, +0.1211755f, -0.1706737f, -0.1078944f, -0.1506715f, +0.1178081f, +0.3499303f,
  -0.0102021f, +0.2117677f, +0.0746950f, +0.1315058f, +0.1488986f, -0.1783519f, -0.0972583f, +0.2548631f,
  -0.1496819f, +0.0313698f, -0.0027302f, +0.4810033f, -0.1571940f, +0.0833581f, +0.0104367f, -0.1716134f,
  +0.1018896f, +0.2452774f, +0.1154889f, +0.4321506f, -0.2429392f, +0.0478829f, -0.0212393f, -0.0927556f,
  +0.1080397f, -0.0170142f, -0.0997147f, -0.0220421f, +0.1060132f, -0.1961525f, +0.2632037f, -0.1424588f,
  -0.2367253f, -0.2165295f, -0.1215073f, -0.1788748f, -0.1532020f, +0.0992083f, +0.1038907f, +0.1946007f,
  +0.0566060f, -0.3205223f, +0.2427225f, -0.3044415f, -0.1356192f, +0.2401768f, -0.0773469f, +0.1092162f,
  +0.0416973f, -0.3158936f, -0.1146282f, +0.0185106f, +0.2529119f, +0.1330084f, -0.1345237f, +0.0327912f,
  -0.1176940f, -0.1315541f, +0.0483829f, -0.0356993f, -0.0286499f, +0.2365038f, +0.1052283f, +0.0572469f,
  -0.0090394f, -0.0218072f, -0.1787209f, +0.1903471f, -0.0727731f, -0.0826403f, -0.2342717f, -0.0953072f,
  +0.3968090f, +0.0822963f, -0.2328381f, +0.3959672f, +0.1484215f, -0.1221957f, +0.0234846f, +0.0354867f,
  -0.1478513f, -0.0473203f, -0.2044083f, +0.3191730f, +0.4523263f, +0.1342271f, +0.1996668f, +0.0097496f,
  -0.6673154f, +0.3293503f, +0.2448292f, +0.5247371f, +0.0691707f, -0.2281832f, -0.0271405f, -0.1262077f,
  +0.1384767f, +0.3255939f, +0.1843395f, -0.1544183f, +0.0281628f, -0.3132709f, +0.1423486f, +0.2314250f,
  +0.2011061f, -0.2128533f, +0.1070038f, +0.2942561f, +0.0877701f, -0.0089645f, -0.3888791f, +0.1349279f,
  -0.1508592f, -0.0107126f, +0.2831341f, +0.1983547f, +0.0072619f, -0.1481463f, +0.7588620f, +0.1774490f,
  +0.0410041f, -0.1280182f, +0.2164196f, +0.3735873f, +0.1693307f, -0.1960971f, +0.2001842f, +0.1567913f,
  +0.1918138f, +0.0130485f, -0.0073239f, +0.0239047f, +0.2365063f, +0.0356629f, +0.1550176f, -0.1445788f,
  -0.0519874f, +0.0289655f, +0.3708582f, +0.1724648f, -0.0890433f, -0.1182386f, +0.3569282f, -0.5934837f,
  -0.0346328f, +0.1414394f, -0.1545923f, -0.2056078f, -0.1603424f, -0.0549983f, -0.0186072f, +0.0058091f,
  +0.3269467f, +0.2394943f, +0.1556908f, -0.2416224f, +0.3944141f, +0.0185299f, -0.2296329f, +0.1396794f,
  +0.1245875f, -0.0238802f, -0.0273847f, -0.4410753f, -0.1327437f, +0.3660520f, -0.1801201f, -0.0614593f,
  -0.1540430f, +0.0117891f, +0.1503312f, -0.3519768f, -0.1215905f, +0.1666877f, +0.4022357f, -0.1388269f,
  -0.0195778f, +0.3354375f, -0.2403738f, -0.3127114f, +0.3308880f, +0.1829746f, -0.1316532f, +0.0800636f,
  +0.0191234f, -0.1790191f, +0.0143890f, +0.0678344f, +0.0727911f, -0.2037504f, +0.0765600f, +0.2013393f,
  +0.0757358f, -0.2725910f, -0.0156689f, +0.3199203f, +0.0915635f, +0.0393372f, -0.1513064f, -0.1605715f,
  -0.0202388f, -0.1862694f, -0.0246273f, +0.1259866f, +0.1680299f, +0.0764642f, +0.0805492f, +0.3298950f,
  +0.2371508f, +0.1508874f, +0.2375731f, +0.2738369f, -0.0432997f, -0.3207965f, -0.1294327f, +0.1278556f,
  -0.0537458f, -0.1158386f, -0.1073847f, +0.1433639f, +0.0779121f, -0.0391947f, +0.0522556f, +0.4575564f,
  +0.0926855f, -0.0062208f, -0.1430668f, -0.0758378f, +0.0751315f, -0.2284118f, -0.4025485f, +0.2991322f,
  +0.1411940f, -0.0322680f, +0.0283408f, -0.0427358f, -0.2487425f, +0.0522905f, +0.2342580f, -0.1781869f,
  +0.1555663f, -0.0213371f, +0.0029396f, -0.3181343f, +0.0697873f, +0.0113047f, +0.0165252f, +0.0053286f,
  +0.0505397f, -0.0767561f, -0.0299209f, +0.1155546f, +0.1220203f, -0.0723842f, -0.0337454f, +0.0831200f,
  +0.3382566f, +0.2186500f, +0.0150624f, -0.0270446f, +0.0545888f, -0.0159869f, -0.5859510f, +0.0077493f,
  +0.0070182f, -0.3306114f, +0.0609764f, -0.0188728f, +0.0829479f, -0.0944174f, +0.0518934f, +0.4090436f
);

const float biases[4] = float[4](
  -0.0139261f, +0.0309482f, -0.0050589f, -0.0131812f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer49 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2536276f, -0.2306826f, +0.2785770f, -0.4408537f, +0.0792722f, -0.0226527f, -0.1913427f, -0.0178876f,
  +0.2426295f, -0.0445336f, +0.3152823f, -0.3709041f, -0.2184536f, -0.0605323f, +0.2089123f, -0.1471076f,
  -0.0701584f, -0.0406514f, +0.1764801f, +0.1604133f, +0.0232804f, +0.1278890f, +0.0459899f, +0.1687834f,
  +0.0026599f, -0.1424575f, -0.1932490f, -0.0613270f, -0.2061990f, -0.0616047f, -0.2034397f, -0.0074217f,
  -0.1477803f, -0.2240298f, +0.2442525f, +0.2302887f, +0.1848495f, -0.0180865f, +0.3204690f, -0.0380450f,
  -0.0415199f, -0.3232699f, -0.0941200f, -0.1368503f, +0.2186395f, +0.2286260f, +0.0132904f, -0.0719975f,
  +0.0006832f, +0.0866263f, -0.1537630f, +0.1283676f, +0.0717251f, -0.2119875f, -0.0466996f, -0.0260626f,
  -0.2695606f, -0.0441266f, +0.3343228f, +0.0363302f, +0.2099137f, -0.1356711f, +0.1103187f, -0.1868023f,
  -0.1784023f, +0.0265028f, +0.0202656f, +0.2847391f, +0.1917842f, +0.0459184f, -0.0908779f, +0.0908930f,
  -0.1430461f, -0.0462794f, +0.0970820f, -0.0309267f, +0.1200907f, +0.1093162f, -0.1191919f, +0.0450361f,
  -0.1909969f, -0.0600074f, +0.0587166f, -0.2737859f, +0.0018397f, +0.3205330f, -0.0395062f, +0.0722039f,
  -0.0139727f, -0.1263664f, -0.1642625f, +0.0717457f, -0.1395795f, +0.0080773f, -0.0304671f, -0.0433778f,
  -0.2104891f, -0.1081138f, -0.0496527f, -0.0033686f, +0.1144319f, -0.1645847f, -0.0897382f, -0.0847095f,
  +0.0551050f, -0.1081791f, -0.1632512f, -0.6482038f, -0.0575632f, -0.0346432f, +0.0425454f, -0.3086521f,
  -0.0454031f, -0.0992503f, +0.2119438f, +0.0597886f, +0.1382957f, -0.2468940f, -0.2065946f, -0.1430557f,
  -0.1519001f, -0.0130136f, +0.3448811f, +0.0304415f, -0.0780293f, -0.3966221f, -0.0361591f, -0.1535344f,
  -0.1466244f, +0.0112276f, -0.2027115f, -0.2853895f, +0.0574298f, -0.1852208f, +0.1699222f, -0.1999622f,
  +0.1431331f, +0.0242574f, +0.0740764f, +0.1463119f, +0.2126087f, -0.1051454f, +0.0991251f, -0.1138948f,
  -0.1741519f, +0.1484736f, -0.1811187f, -0.0032938f, -0.0296867f, -0.3118683f, -0.0332008f, -0.0757345f,
  +0.0824903f, -0.0255077f, -0.2805686f, +0.2809546f, +0.2219092f, +0.0962473f, -0.0085523f, +0.0957457f,
  -0.0322490f, -0.1343657f, +0.2129126f, +0.0105369f, +0.1232515f, +0.1538920f, +0.0791193f, -0.1272765f,
  -0.1270218f, +0.0794725f, +0.1271694f, -0.1042826f, -0.1404503f, -0.4102314f, +0.0577377f, +0.0767258f,
  -0.3121525f, +0.5082533f, -0.0967618f, +0.0307750f, -0.1872169f, -0.1316275f, -0.3324393f, +0.4821690f,
  -0.2018336f, +0.2142174f, -0.1892845f, -0.5629698f, -0.1072490f, +0.1049812f, -0.5795742f, +0.0483413f,
  +0.1537759f, +0.4004520f, +0.2495480f, -0.2482253f, +0.0739011f, -0.4813152f, -0.1685016f, -0.3522181f,
  +0.4200778f, +0.2213120f, -0.0786868f, -0.0742057f, -0.1421672f, -0.4132354f, +0.0375191f, -0.1037849f,
  +0.1727208f, +0.0814731f, +0.2866880f, +0.4780617f, -0.1347928f, +0.0597631f, +0.1809824f, -0.0454039f,
  +0.0864841f, +0.0328789f, +0.0219753f, +0.2533636f, +0.1511850f, -0.3676378f, +0.0635785f, -0.2044493f,
  -0.1924800f, -0.3517641f, +0.0873820f, -0.4242902f, +0.2841116f, -0.0099260f, -0.0597785f, +0.3619726f,
  -0.0146338f, +0.0538170f, -0.1171536f, +0.0729433f, +0.1927518f, -0.1600788f, -0.0161728f, -0.0370757f,
  -0.0626898f, -0.0603503f, -0.1900901f, +0.0710007f, +0.1719974f, -0.0848701f, -0.2951073f, -0.0173181f,
  +0.2833049f, -0.1799240f, +0.1346230f, +0.0541338f, +0.4327423f, +0.4938029f, +0.2040548f, -0.1094815f,
  -0.0181922f, +0.0558215f, +0.0359355f, -0.1344606f, -0.1312684f, -0.0728529f, +0.0685236f, -0.0763324f,
  -0.1389941f, -0.1101878f, -0.0514942f, +0.0886775f, +0.0729368f, -0.0065404f, +0.1474807f, -0.1075002f,
  +0.1682875f, +0.2632835f, +0.0010928f, -0.1619103f, +0.3460434f, +0.2452281f, +0.0090952f, +0.1670082f,
  +0.0297414f, +0.0295551f, +0.0212483f, +0.2276368f, +0.0421336f, -0.0344254f, +0.3375423f, -0.0486744f
);

const float biases[4] = float[4](
  +0.0470587f, +0.0733483f, -0.0667609f, +0.0768582f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer49 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1957041f, +0.2245038f, -0.2334053f, -0.2241964f, -0.1540386f, +0.2987771f, -0.2293184f, -0.1223678f,
  +0.0397649f, -0.5753782f, -0.5060807f, -0.0833778f, +0.2990634f, +0.7431994f, -0.3941438f, -0.2107416f,
  +0.1413226f, -0.2196530f, -0.2389708f, -0.0108820f, +0.0760054f, +0.2664999f, -0.0439780f, -0.2075196f,
  -0.2726826f, -0.1897171f, -0.0837734f, +0.1688580f, +0.0917811f, +0.0721136f, +0.2124793f, -0.0961237f,
  -0.1411514f, +0.2021470f, -0.3465410f, -0.5343544f, -0.0117260f, +0.4337762f, +0.6427696f, +0.3764981f,
  +0.1513263f, +0.0263044f, +0.1772853f, -0.0498760f, +0.1477245f, -0.2391818f, +0.2822106f, +0.0540316f,
  +0.0381448f, -0.0037156f, -0.0312913f, -0.1133591f, -0.0216669f, -0.0068471f, -0.0337094f, +0.0273793f,
  +0.1114701f, +0.1375204f, +0.1246376f, +0.0208361f, +0.0254684f, -0.1100389f, -0.0394323f, +0.0238468f,
  +0.0652041f, +0.0587234f, +0.0020969f, +0.0216090f, -0.0030931f, +0.0331098f, +0.0111386f, +0.0907077f,
  +0.1140541f, +0.2164564f, +0.0927375f, +0.1605788f, -0.0762757f, +0.1954981f, -0.0599330f, +0.1092854f,
  +0.0571757f, +0.2629983f, -0.7649305f, -0.0629244f, +0.0487813f, -0.2857934f, -0.0035566f, +0.1435960f,
  -0.1320475f, -0.0190044f, +0.1180523f, +0.0113742f, +0.2791296f, +0.0314053f, +0.0281530f, +0.0043014f,
  +0.0128068f, -0.1431365f, +0.3741104f, +0.0280094f, -0.2608068f, +0.1313688f, -0.0562926f, +0.0003103f,
  +0.3612839f, +0.5109364f, -0.9490976f, -0.1007809f, -0.1867292f, -0.2324240f, +0.0806837f, +0.1233964f,
  -0.0242473f, -0.2881037f, +0.2889144f, -0.1553681f, +0.2560039f, +0.1325466f, -0.3245215f, -0.0293693f,
  -0.0820657f, -0.4043601f, +0.4312248f, +0.4047824f, -0.2204217f, -0.1944749f, +0.0710464f, +0.0079792f,
  -0.0567691f, +0.5528046f, -0.4706945f, -0.4935727f, -0.1899547f, -0.2225209f, -0.2806933f, +0.3911985f,
  -0.0242936f, -0.1525773f, +0.4321358f, -0.0651114f, -0.1769104f, +0.4537884f, -0.0643958f, -0.0274981f,
  +0.1695754f, +0.1305456f, -0.0180371f, -0.2545235f, -0.0049085f, -0.2744768f, +0.0673930f, -0.2330539f,
  -0.2020591f, -0.0626277f, +0.0047373f, +0.0935102f, +0.2914116f, -0.0160563f, +0.1822446f, -0.0065222f,
  +0.0081917f, -0.0266449f, +0.0614130f, +0.1781701f, +0.0493258f, +0.1316132f, -0.1482861f, +0.0048184f,
  +0.0653632f, -0.0598564f, -0.0634965f, -0.4035452f, -0.1561161f, -0.1428483f, +0.1798350f, +0.0455350f,
  -0.0293392f, -0.0369644f, +0.3602043f, +0.2785963f, -0.0334339f, +0.2284941f, -0.1230946f, +0.1086749f,
  -0.0146312f, +0.0878589f, +0.0538372f, -0.0593016f, +0.0750762f, -0.2513640f, +0.0378219f, -0.1202711f,
  +0.0221433f, +0.5283725f, -0.2631034f, -0.1647594f, -0.0067062f, -0.2640569f, +0.0789614f, -0.0072616f,
  +0.2043373f, +0.0822916f, -0.3684632f, +0.2379265f, -0.3032021f, -0.3812841f, -0.2213984f, -0.1416381f,
  -0.1364724f, +0.6225567f, +0.2305909f, +0.3292033f, +0.1791803f, -0.2594005f, -0.2402575f, -0.0998177f,
  -0.2754618f, -0.1441738f, -0.0613211f, +0.0085502f, -0.3356396f, +0.2667981f, -0.0059182f, +0.3409331f,
  -0.1424363f, +0.0471602f, +0.0376412f, +0.1212751f, -0.0167965f, +0.1597053f, +0.2601535f, +0.1207532f,
  +0.1027824f, +0.1051368f, -0.3379344f, +0.1213187f, -0.0252819f, -0.2490196f, -0.0862168f, -0.0262999f,
  -0.0067434f, +0.1543668f, +0.0996115f, +0.5264922f, +0.0769050f, +0.3032476f, +0.1215991f, +0.0303268f,
  -0.1067455f, +0.0902503f, -0.3376545f, -0.3782583f, -0.1645387f, -0.1152879f, +0.0007573f, +0.0292600f,
  +0.1858012f, -0.1087562f, +0.1404822f, +0.4458404f, +0.1992050f, +0.0970244f, -0.0086354f, -0.0236912f,
  -0.1847544f, -0.4428356f, -0.2173961f, +0.0015263f, -0.1228532f, -0.0404221f, +0.2659745f, +0.0434581f,
  -0.0586019f, -0.1916076f, -0.4922006f, -0.4027760f, -0.2746208f, +0.1320557f, -0.0733044f, +0.5129940f,
  +0.3886618f, +0.2042982f, +0.0246904f, +0.1307641f, +0.1673812f, +0.2683947f, +0.0801636f, -0.0677934f
);

const float biases[4] = float[4](
  +0.0149094f, -0.0562497f, -0.0646589f, -0.2209870f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer50 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1021524f, -0.3505636f, -0.3168554f, -0.1048267f, +0.0492840f, -0.1427276f, +0.2399877f, +0.1651034f,
  +0.1806949f, +0.0142450f, -0.2532771f, -0.2324433f, +0.0912718f, +0.0026178f, -0.1400463f, +0.0136575f,
  -0.0302695f, +0.1580430f, -0.0269418f, -0.1218056f, -0.0437710f, +0.0027092f, +0.2778549f, +0.2358844f,
  -0.1022475f, -0.3818170f, -0.0681512f, -0.2080364f, -0.0448074f, -0.4336277f, +0.1981164f, +0.0325181f,
  +0.1924413f, +0.1148066f, -0.4738834f, -0.1469496f, +0.1479381f, +0.2794221f, -0.0138415f, +0.3213829f,
  -0.0196622f, -0.0060039f, -0.1435261f, +0.0958858f, +0.2769872f, +0.1760275f, -0.0131102f, -0.0640737f,
  +0.0889092f, -0.1394284f, +0.2301877f, +0.1680573f, +0.1144674f, -0.3567746f, -0.0948992f, -0.0234387f,
  -0.1563007f, -0.2272394f, -0.1400973f, +0.2906144f, -0.0910060f, +0.0739822f, +0.1165384f, -0.1788103f,
  +0.3180139f, -0.1719367f, -0.0656431f, -0.0254678f, -0.0823748f, -0.0093530f, +0.1612897f, +0.0519228f,
  -0.2023961f, -0.1949954f, -0.1196498f, +0.1631935f, +0.0402516f, +0.4790038f, -0.1300885f, +0.1903110f,
  -0.2953657f, -0.0411699f, -0.2024418f, +0.0936613f, -0.0550593f, +0.3155954f, -0.0687128f, +0.0157781f,
  -0.2294587f, -0.2202310f, -0.2300516f, -0.0735966f, -0.0054029f, -0.0514754f, +0.1252765f, +0.0655463f,
  +0.1771010f, +0.0374858f, +0.5608222f, +0.0065698f, -0.0918420f, +0.2663832f, -0.1399026f, +0.0566226f,
  -0.0314699f, +0.1186258f, -0.0311066f, +0.0551207f, -0.4716393f, +0.5086609f, -0.1984929f, -0.1101632f,
  -0.0411412f, +0.1265292f, +0.1150825f, -0.0099805f, +0.2360877f, +0.1179271f, +0.3803984f, +0.1033118f,
  +0.1933050f, +0.0116087f, -0.0103679f, -0.1404104f, +0.1209960f, +0.2511020f, +0.1030975f, -0.0842848f,
  +0.2022353f, +0.2795941f, +0.3900605f, +0.3797094f, +0.5016234f, +0.3256229f, -0.2291760f, +0.0431451f,
  -0.0599997f, +0.1497171f, +0.2873807f, -0.3034886f, +0.0476403f, -0.0703381f, -0.1335045f, +0.1342296f,
  -0.1164951f, -0.1735324f, -0.0504033f, +0.2097794f, +0.0945294f, +0.2111382f, +0.1829858f, -0.3264197f,
  -0.1475981f, +0.2160595f, +0.2593608f, -0.2366038f, -0.0980230f, -0.0552434f, +0.4643045f, +0.2285798f,
  +0.0080775f, -0.2056684f, -0.0618380f, +0.1193183f, +0.0365935f, -0.1182613f, +0.2910421f, +0.6047400f,
  -0.1610297f, -0.3408275f, -0.4212058f, +0.1682383f, -0.0151150f, +0.0259791f, +0.3029297f, -0.1131974f,
  -0.2425871f, +0.1640438f, +0.0236083f, -0.1690061f, +0.4312875f, -0.2410066f, -0.1161349f, -0.2679583f,
  +0.0421049f, +0.0109411f, -0.1624048f, +0.0528457f, +0.0321195f, +0.0531916f, +0.3922997f, +0.2945463f,
  -0.2076152f, +0.2252453f, +0.0377505f, -0.1747198f, -0.1128088f, +0.2307891f, +0.1227265f, +0.1141487f,
  -0.1425736f, +0.0032956f, +0.1845560f, -0.2066076f, -0.1279750f, +0.2705545f, +0.0716519f, -0.4187840f,
  -0.1134168f, -0.0463619f, -0.1123928f, +0.2425411f, -0.0589387f, -0.0411594f, +0.2842773f, +0.0820499f,
  +0.0195842f, -0.0828915f, -0.1407971f, +0.1371499f, -0.0117991f, +0.0690012f, -0.3851871f, -0.4472874f,
  -0.0906727f, +0.0206291f, +0.3582468f, +0.1585388f, -0.0130322f, -0.4125461f, +0.1595872f, +0.1941692f,
  -0.2339057f, -0.0910581f, -0.0905808f, +0.1210501f, -0.0173146f, -0.0949618f, +0.0876823f, +0.0373551f,
  +0.0577674f, -0.5129936f, +0.3960819f, -0.1492458f, -0.2512827f, -0.2798035f, -0.1718103f, -0.0514748f,
  -0.1536922f, +0.2588235f, -0.0660927f, -0.0840623f, +0.5056005f, -0.1027067f, -0.1314669f, +0.5280850f,
  +0.1430738f, -0.1077907f, -0.0528070f, +0.1115989f, -0.1296808f, -0.0161294f, -0.1052611f, -0.2926786f,
  -0.1327720f, -0.0635337f, +0.1294733f, -0.0167431f, +0.1952108f, -0.2589087f, -0.0856737f, -0.3138266f,
  +0.0263862f, +0.1659142f, +0.0871813f, +0.0983738f, +0.0834324f, -0.2291060f, -0.1104002f, +0.0204527f,
  +0.2603117f, -0.0240011f, -0.1442755f, -0.2471994f, +0.1321407f, -0.0826806f, -0.0271008f, +0.0002060f
);

const float biases[4] = float[4](
  -0.0090434f, -0.0219262f, +0.0541120f, +0.0011980f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer50 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0340895f, -0.2503093f, -0.0895396f, +0.0888411f, -0.0725920f, -0.3309947f, +0.1943653f, -0.3447353f,
  -0.3015830f, -0.0142844f, -0.3467035f, -0.0363575f, -0.0413643f, -0.0943753f, -0.0169973f, -0.2046712f,
  +0.0207238f, -0.0066923f, +0.0089188f, -0.0084502f, -0.0206200f, -0.0124990f, -0.0588351f, +0.0050203f,
  +0.0477307f, -0.0047133f, +0.1458937f, +0.1332000f, -0.1234729f, +0.0146350f, -0.2239899f, -0.0105772f,
  +0.1943237f, +0.1268928f, -0.1683752f, +0.0806323f, +0.3007626f, +0.0454064f, +0.1133627f, +0.1539254f,
  +0.1245078f, +0.1438508f, +0.0210855f, -0.1233160f, -0.1821762f, -0.1268103f, +0.1314766f, -0.4306017f,
  +0.2238639f, +0.0878597f, +0.2305045f, +0.0419590f, -0.0785113f, +0.0781628f, -0.0813018f, -0.1877511f,
  +0.0354362f, +0.2269905f, +0.0712366f, +0.0062773f, -0.2930839f, +0.0094765f, -0.0318304f, -0.0204091f,
  +0.1623070f, -0.0550853f, +0.1285485f, -0.0701909f, +0.0755820f, -0.0467141f, -0.0306335f, +0.0082247f,
  +0.1239439f, -0.0444493f, +0.1440557f, -0.0276057f, +0.0231782f, +0.3125406f, -0.0490476f, -0.0664632f,
  +0.2052169f, +0.1967658f, +0.0357027f, -0.2729290f, +0.0484864f, +0.4143664f, -0.0699169f, -0.0292119f,
  -0.1549761f, -0.0619508f, -0.1444526f, -0.2879107f, +0.0510769f, -0.1030218f, +0.1586058f, +0.1444756f,
  -0.1234567f, +0.1733110f, -0.4575540f, +0.3520886f, +0.1386187f, +0.0003198f, -0.1796362f, +0.2751604f,
  +0.3356631f, -0.0052737f, +0.0239054f, -0.1560231f, -0.1802538f, +0.4861208f, -0.0807441f, -0.0002580f,
  +0.1770613f, +0.0901966f, +0.1680817f, -0.2226969f, +0.1618065f, -0.0083206f, +0.0365732f, -0.2374583f,
  -0.1351989f, -0.1984258f, -0.3075754f, -0.0085366f, -0.3619909f, -0.0343952f, -0.2825548f, -0.3065318f,
  +0.1462779f, -0.2172414f, -0.2694957f, +0.1265484f, -0.3138314f, -0.0606900f, -0.1794957f, -0.0956360f,
  -0.0019040f, -0.1615614f, -0.1341975f, +0.2605632f, -0.0156733f, -0.1362841f, -0.0395790f, -0.1953423f,
  +0.1573687f, +0.1998187f, +0.1705119f, -0.0411973f, -0.1009887f, -0.3681056f, -0.1485043f, -0.3985464f,
  -0.1046924f, -0.1544057f, +0.1862691f, +0.1799662f, +0.0672057f, -0.1456607f, -0.4406579f, -0.1700337f,
  +0.0264307f, -0.0400077f, -0.0634554f, +0.0721626f, -0.0090283f, +0.0643185f, -0.2680371f, -0.3724582f,
  -0.0186198f, +0.4524736f, +0.1480867f, +0.1638384f, -0.3093807f, -0.4934416f, +0.0929154f, -0.1001968f,
  -0.1806958f, +0.1337281f, +0.6227749f, -0.0216084f, -0.2739074f, +0.0238490f, +0.0635665f, +0.0515065f,
  +0.2463387f, -0.0220773f, +0.1817064f, -0.0577841f, -0.2244422f, +0.0404861f, -0.0415069f, -0.3659496f,
  -0.0799381f, +0.0941137f, +0.0802938f, -0.0711742f, +0.0904154f, -0.2627156f, -0.0840851f, -0.1628825f,
  -0.1411011f, -0.1112532f, -0.1608067f, +0.1542733f, +0.4604333f, -0.0804590f, +0.0212389f, -0.4541029f,
  +0.1498431f, -0.1806624f, +0.1998156f, +0.1372215f, +0.1082421f, -0.1570179f, +0.0825679f, +0.3809709f,
  +0.1038043f, +0.1437485f, -0.1977251f, -0.0535000f, -0.0105055f, +0.0619379f, -0.2331650f, +0.0206045f,
  +0.1538344f, +0.0390715f, +0.0446502f, -0.0023543f, +0.0080156f, -0.2543809f, -0.1398400f, +0.0186105f,
  -0.2233045f, +0.0138345f, -0.3158298f, -0.0740572f, +0.0351849f, +0.0226141f, +0.0902252f, -0.1770373f,
  +0.0786642f, +0.0471907f, -0.1013728f, -0.2506591f, -0.0750591f, -0.1033798f, -0.2396716f, -0.2005485f,
  +0.2243633f, +0.0050359f, -0.0631253f, -0.1180330f, -0.1957465f, -0.4648059f, +0.1393484f, -0.0311942f,
  -0.1724758f, +0.0084891f, +0.0024614f, -0.4204456f, +0.0865711f, -0.1861036f, -0.0231355f, -0.3758135f,
  -0.1476382f, +0.1468961f, -0.2274885f, +0.0177739f, +0.0663257f, -0.1073520f, -0.1202448f, +0.2979438f,
  +0.1094196f, -0.2121806f, -0.2949807f, -0.3384863f, +0.0271307f, -0.3827599f, +0.1057642f, -0.1623092f,
  -0.0313091f, -0.0117862f, -0.1317753f, +0.4016566f, -0.0027935f, -0.0316217f, -0.0615196f, -0.2715403f
);

const float biases[4] = float[4](
  -0.0113633f, -0.0239810f, -0.0017768f, +0.0103449f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer51 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0797845f, -0.0436999f, +0.0773672f, -0.0664923f, -0.0406287f, -0.0473199f, -0.1204856f, -0.1393219f,
  -0.0356261f, -0.0761954f, +0.0392095f, -0.2098229f, -0.0718039f, -0.1274385f, +0.0291215f, -0.1377727f,
  -0.0204705f, +0.0618567f, +0.3008249f, -0.1051947f, -0.1863976f, -0.0854171f, +0.1645658f, -0.0562054f,
  +0.1444805f, -0.0738831f, -0.2110585f, -0.0024590f, -0.0063144f, +0.0678648f, -0.2092854f, +0.1092219f,
  +0.0613045f, -0.1327607f, -0.3252539f, -0.3325160f, +0.0941291f, +0.1552308f, -0.7639328f, -0.0082989f,
  +0.0855080f, -0.1358725f, -0.3054351f, -0.1471415f, +0.0157956f, +0.3025216f, -0.0087335f, -0.0055835f,
  -0.0997028f, +0.0628725f, -0.0839870f, -0.1649217f, +0.0399433f, -0.0044850f, -0.0490880f, +0.0603130f,
  -0.1154672f, +0.2537680f, -0.2853560f, -0.1806013f, -0.1617009f, +0.2762898f, +0.6489594f, +0.0237953f,
  +0.0187796f, -0.3541083f, -0.2240975f, -0.1388910f, -0.2893205f, -0.0293331f, +0.1232425f, +0.0818225f,
  +0.1126941f, -0.1112865f, +0.0106711f, -0.1757017f, -0.0473177f, -0.1385325f, -0.0518918f, -0.1725568f,
  +0.3268943f, +0.0185214f, +0.0015923f, -0.2831011f, +0.1808089f, -0.0079047f, +0.4732194f, -0.0595145f,
  +0.0317496f, -0.2985249f, +0.4852855f, -0.2071196f, -0.0669766f, +0.1230200f, +0.0951931f, +0.2076592f,
  -0.1160596f, -0.4361398f, -0.1156572f, -0.0749757f, -0.2374409f, +0.0260153f, -0.0355082f, +0.1498374f,
  +0.4097958f, +0.5514240f, +0.1027558f, -0.3417777f, +0.2928858f, -0.1484775f, -0.0949929f, +0.2603993f,
  +0.0629352f, +0.3121867f, +0.3795172f, +0.0163966f, -0.0690493f, -0.2134525f, -0.0226729f, +0.1860096f,
  +0.1893924f, -0.0274396f, +0.1255343f, -0.2458429f, +0.0733997f, -0.1306983f, -0.0948165f, -0.1036494f,
  +0.1702325f, +0.0965319f, +0.1412295f, +0.1930691f, -0.0793606f, -0.0284537f, -0.1170945f, +0.2074343f,
  +0.0100257f, +0.1378706f, +0.1093187f, +0.1243269f, -0.1185064f, -0.2560092f, +0.1913620f, +0.0823584f,
  +0.1284742f, -0.0478253f, +0.2586821f, -0.2569255f, +0.0135683f, +0.1283256f, -0.0741555f, -0.3844368f,
  +0.1020613f, +0.0584553f, +0.5498637f, -0.1427457f, +0.1190349f, +0.3351604f, -0.0159507f, -0.3421954f,
  -0.2351863f, +0.1279114f, -0.1252357f, -0.0876255f, +0.1360767f, +0.1890304f, +0.0434920f, +0.1198106f,
  +0.1853200f, +0.0604237f, +0.1317981f, +0.4039187f, +0.0790360f, -0.1576098f, -0.0559277f, -0.0081762f,
  +0.2986469f, -0.3715514f, -0.4717708f, -0.1007884f, -0.2122586f, -0.0484757f, -0.0385670f, +0.0320425f,
  -0.2921236f, +0.4332371f, -0.0569823f, +0.0631900f, -0.1088269f, -0.2525306f, +0.3167160f, -0.0350004f,
  -0.0532622f, +0.1261104f, +0.4409433f, +0.1857791f, +0.0736296f, -0.1283450f, -0.2379175f, -0.0637663f,
  -0.0137063f, -0.0707137f, +0.5302646f, -0.0860468f, -0.0489563f, -0.4254383f, -0.2275690f, -0.1605531f,
  -0.1338365f, +0.2952762f, +0.2679334f, +0.3871391f, -0.0563484f, -0.1660031f, -0.1663318f, +0.1163324f,
  +0.1744552f, +0.1183835f, -0.0002924f, -0.0427032f, -0.1299420f, +0.3493061f, -0.0644954f, +0.0691248f,
  +0.0968992f, +0.0841078f, -0.1144236f, -0.0225550f, +0.0863887f, +0.2162400f, -0.2330344f, +0.1097688f,
  -0.0565075f, +0.0701766f, -0.1747033f, +0.0259457f, -0.1570344f, +0.0666827f, +0.0649251f, +0.1068324f,
  -0.1801523f, -0.4175636f, +0.1676649f, +0.1304783f, -0.0050045f, +0.0833442f, +0.2478473f, -0.0553981f,
  +0.2124457f, +0.0453216f, +0.5208063f, +0.5324932f, -0.3237769f, +0.5019290f, +0.2081038f, -0.0916456f,
  +0.3287300f, -0.3067870f, +0.6159878f, -0.1514385f, -0.3286971f, +0.6341507f, -0.0220821f, -0.4158062f,
  +0.0738732f, +0.1467021f, -0.1300847f, -0.2765820f, -0.2203838f, -0.0179136f, -0.2533366f, -0.0438018f,
  +0.0736543f, -0.4588707f, -0.2501539f, -0.4303316f, -0.0518557f, -0.4745927f, -0.5161888f, -0.0459813f,
  +0.0930074f, +0.1054059f, +0.0268258f, +0.6544759f, +0.3422093f, -0.3579725f, -0.1474416f, +0.2390399f
);

const float biases[4] = float[4](
  +0.0276489f, -0.1493386f, -0.0830192f, +0.0028176f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer51 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0737542f, +0.0143330f, -0.2933039f, +0.2035193f, +0.0600844f, -0.1092668f, +0.0149292f, -0.0461288f,
  -0.1978587f, -0.0577498f, +0.2256828f, -0.1625621f, +0.1637419f, +0.1372416f, -0.2379221f, +0.0586075f,
  +0.0333073f, -0.0015517f, +0.0011334f, -0.0885074f, +0.0966082f, +0.0307909f, -0.0549003f, -0.0461372f,
  -0.1755982f, -0.2332326f, +0.2160487f, -0.1687557f, -0.0948601f, +0.0497129f, -0.0631292f, +0.1038116f,
  -0.2365025f, +0.3323824f, -0.1609748f, +0.1799853f, +0.2262746f, -0.5078256f, +0.1293733f, +0.0653624f,
  +0.0833558f, +0.0035321f, -0.1123368f, +0.2577837f, -0.1713818f, -0.2759021f, +0.2123077f, +0.0208653f,
  -0.1977364f, +0.0710668f, -0.1366007f, +0.0970215f, +0.1854959f, -0.0106787f, +0.2312886f, +0.3979144f,
  +0.0224995f, +0.3465545f, -0.0523296f, -0.0538420f, -0.3022469f, -0.1085665f, +0.2498954f, -0.1064231f,
  -0.0364785f, -0.2268689f, -0.0245831f, -0.2474183f, -0.0115761f, -0.2130885f, -0.1022473f, -0.0532711f,
  -0.0246613f, +0.2106115f, -0.0976830f, -0.2477329f, -0.1794487f, -0.1697069f, -0.0816404f, +0.0887640f,
  -0.1705743f, +0.0777487f, -0.0831061f, +0.1016245f, -0.0896189f, +0.0143431f, +0.0058809f, -0.0641297f,
  -0.0398871f, -0.2073031f, -0.1088706f, +0.1195560f, +0.2357844f, -0.2411651f, -0.1207460f, +0.0839784f,
  +0.0017243f, +0.1214993f, -0.0402844f, +0.4293309f, +0.2780203f, +0.2069171f, +0.0300600f, +0.1553925f,
  -0.2656740f, -0.0010760f, +0.4128473f, -0.0534757f, -0.2592008f, -0.2729182f, +0.2829513f, +0.0435164f,
  -0.1822685f, +0.4121745f, +0.1572675f, +0.0177441f, +0.0427864f, -0.4868053f, +0.0696232f, +0.0232525f,
  -0.1536252f, -0.0294687f, +0.0710307f, +0.1145428f, +0.1503559f, +0.0241365f, +0.0536918f, +0.0270841f,
  +0.1771510f, +0.1786229f, +0.2000512f, -0.0252864f, -0.0278205f, -0.0275380f, -0.0570577f, +0.0430633f,
  -0.1391693f, +0.0770812f, +0.0513623f, +0.0643231f, -0.0632504f, -0.1643655f, +0.0459450f, -0.1396888f,
  -0.3839035f, +0.2729811f, -0.2886190f, +0.0651231f, +0.1769010f, -0.1440330f, +0.0054433f, +0.0107911f,
  +0.2403116f, -0.2665153f, +0.2863513f, +0.0178741f, +0.1424849f, +0.2875013f, +0.0227984f, -0.1777223f,
  -0.1522395f, +0.1600232f, -0.0052405f, +0.2393812f, +0.0746235f, -0.1097247f, +0.0304617f, -0.3168216f,
  -0.2039319f, +0.0381059f, +0.0131470f, -0.2381085f, -0.2781458f, -0.1753005f, +0.1701157f, +0.2512534f,
  -0.4323639f, +0.2885338f, +0.2197304f, -0.1790819f, -0.3706363f, +0.0132456f, -0.2884636f, +0.5207630f,
  +0.0138909f, +0.3788210f, -0.0139462f, -0.1649572f, -0.1893759f, -0.4972048f, +0.0964532f, +0.4205587f,
  -0.0597681f, -0.0281530f, +0.2945643f, +0.1863188f, +0.1122706f, -0.2592321f, -0.0117184f, -0.2006917f,
  +0.1937930f, +0.0303310f, +0.0932290f, +0.2306874f, +0.1770300f, -0.0195991f, -0.3837520f, +0.3667206f,
  -0.0974930f, +0.0950353f, +0.0050662f, +0.2023146f, -0.1212281f, +0.0032355f, +0.2018314f, +0.0771823f,
  -0.5322870f, -0.2994460f, -0.1401826f, -0.1510935f, +0.1570930f, +0.0093224f, -0.0972417f, +0.0884810f,
  +0.2380574f, +0.2643263f, +0.3957569f, -0.0685440f, +0.2251614f, -0.0098871f, -0.0520292f, +0.1688531f,
  -0.0215620f, +0.3210197f, -0.5210830f, -0.0406027f, +0.2156835f, -0.5624074f, +0.0526480f, -0.1584931f,
  +0.2155689f, -0.0333958f, +0.5960907f, -0.2367474f, -0.5313033f, -0.1200971f, -0.7464311f, -0.0136135f,
  -0.0411816f, +0.4265868f, +0.5693742f, -0.3871470f, -0.0220890f, -0.3472319f, -0.2330773f, +0.0513621f,
  +0.0827431f, +0.2921273f, -0.1780308f, +0.0407093f, +0.0948839f, -0.5900939f, +0.1378129f, +0.1513249f,
  +0.1616751f, -0.7409352f, +0.3142191f, -0.0702249f, -0.2905579f, -0.0225566f, +0.3227088f, +0.2257978f,
  +0.2810530f, -0.1122726f, -0.1492622f, +0.0852238f, -0.0877408f, +0.0932013f, -0.3804522f, +0.3117551f,
  -0.1852851f, +0.4461334f, +0.1204587f, +0.0474523f, -0.0272666f, -0.2728586f, +0.1052274f, -0.0738989f
);

const float biases[4] = float[4](
  -0.0015163f, +0.0415727f, -0.0445851f, -0.3279633f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer52 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0172464f, +0.1376127f, +0.1451843f, +0.2442153f, +0.0308500f, +0.1273780f, -0.0633257f, +0.2265612f,
  +0.3333757f, -0.0289185f, +0.2059159f, +0.1236178f, -0.0007322f, -0.1139784f, -0.0116966f, +0.1655179f,
  -0.1025792f, -0.1890538f, +0.2976924f, +0.0585223f, +0.2178176f, +0.0262095f, +0.5230654f, -0.1842481f,
  -0.2039509f, -0.1911958f, +0.2789943f, -0.2187072f, -0.0250841f, -0.0126783f, +0.2420616f, +0.2421096f,
  -0.0552637f, -0.1636564f, +0.0860950f, +0.0700449f, -0.2561198f, +0.2216157f, +0.1424970f, +0.1132663f,
  -0.1231622f, -0.2399568f, -0.1421835f, +0.0743210f, +0.1889117f, +0.0162422f, -0.0201508f, +0.0722327f,
  -0.1164211f, +0.0259213f, +0.1157130f, +0.1810591f, -0.0330903f, -0.2192146f, +0.0949163f, +0.2305050f,
  +0.2379511f, -0.0663099f, -0.0201126f, +0.2132122f, +0.0884800f, -0.0254032f, -0.1616935f, +0.1161407f,
  -0.0599747f, +0.0275419f, -0.0330169f, -0.1087441f, +0.0222617f, +0.3431954f, +0.0853345f, +0.1718835f,
  +0.3268372f, -0.2189028f, -0.0789639f, -0.0413176f, +0.1037530f, -0.1329373f, +0.3576016f, -0.2614147f,
  +0.0184192f, -0.0925763f, +0.2542305f, -0.5540088f, -0.3304298f, +0.0346974f, +0.0309754f, +0.0801085f,
  -0.1233856f, +0.0587320f, +0.2308254f, +0.0561384f, -0.2770467f, +0.1713954f, +0.2749680f, +0.3720579f,
  -0.2186695f, -0.3422088f, +0.1226468f, -0.6706132f, +0.1112599f, -0.1418951f, +0.3365713f, -0.2086063f,
  +0.1172200f, -0.2573541f, +0.6711983f, +0.2275131f, -0.2943447f, -0.0504595f, +0.4804693f, -0.1875280f,
  +0.2692548f, +0.2332116f, +0.0491681f, -0.2001826f, +0.1560916f, +0.0799119f, +0.1341172f, -0.2209571f,
  +0.0125988f, +0.1674452f, +0.3033452f, -0.1040313f, +0.0947301f, +0.1455283f, -0.0316581f, -0.2137226f,
  -0.0708072f, +0.0943875f, -0.2566787f, +0.0715111f, +0.1506141f, -0.1157693f, +0.1113136f, +0.1545658f,
  -0.0756017f, +0.1644222f, +0.1185361f, +0.1185304f, -0.0952388f, -0.2076297f, +0.0470320f, -0.0538179f,
  +0.1428689f, -0.0330269f, -0.0375078f, +0.2689478f, +0.0905331f, -0.1626319f, +0.0349632f, +0.1069545f,
  +0.2229680f, +0.0040378f, +0.0350868f, +0.8125364f, +0.4521826f, -0.1508221f, -0.0623928f, -0.0252643f,
  +0.1211925f, +0.0461341f, -0.1175708f, -0.1224078f, +0.1621485f, -0.2521772f, +0.2276295f, -0.0674472f,
  -0.0399082f, -0.3455484f, +0.4208921f, +0.0275210f, -0.1395628f, +0.0576575f, +0.1224942f, -0.0356643f,
  -0.1260731f, +0.0408815f, -0.0338357f, -0.3951674f, +0.0149991f, -0.1681508f, -0.2962512f, -0.1033129f,
  +0.2685697f, +0.0129465f, -0.1221581f, +0.0586132f, -0.2805788f, -0.3020771f, -0.0652350f, -0.1039602f,
  +0.0639590f, -0.3343954f, +0.0058186f, +0.0583413f, +0.0181061f, -0.1272647f, +0.1573376f, +0.1294638f,
  +0.0872509f, +0.0501868f, -0.0990169f, -0.0523677f, -0.2990178f, +0.3092573f, -0.4736620f, -0.5848042f,
  +0.1314747f, -0.0380281f, +0.1086040f, +0.0683487f, +0.1776825f, +0.0417794f, -0.0336673f, -0.1243093f,
  +0.1441181f, -0.1229315f, -0.0645939f, -0.3125077f, +0.2068016f, -0.0056608f, +0.0329337f, -0.3155361f,
  -0.1945043f, -0.2754326f, +0.2485595f, -0.2622562f, +0.0788578f, +0.0108335f, -0.1511875f, -0.0459409f,
  -0.0323416f, +0.2293358f, -0.0255648f, -0.1023705f, +0.0868289f, -0.2788520f, -0.1276560f, +0.3245124f,
  -0.0744519f, +0.0603239f, +0.3921344f, -0.4137882f, -0.1458322f, -0.2717329f, +0.2495510f, -0.3458932f,
  -0.0005969f, +0.0832758f, +0.0705266f, +0.1493986f, -0.1526638f, -0.0574281f, +0.3505307f, +0.3031451f,
  -0.1199727f, +0.0358296f, +0.2473653f, -0.1144598f, -0.1409044f, -0.3313440f, +0.8633410f, -0.1307416f,
  +0.0971812f, -0.2078438f, +0.0141389f, +0.2995480f, +0.0372106f, -0.1214359f, -0.0453194f, -0.2567997f,
  +0.3831637f, -0.4809206f, -0.1889200f, +0.0404902f, +0.3109175f, +0.1719803f, +0.0324868f, -0.2213239f,
  +0.3588310f, +0.1841850f, +0.0464503f, +0.1817795f, +0.0103804f, +0.4572552f, -0.2787140f, +0.0967954f
);

const float biases[4] = float[4](
  -0.0467253f, +0.0089732f, +0.0928097f, +0.0118289f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer52 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1619856f, -0.0240526f, +0.0995835f, +0.1161297f, +0.2267530f, -0.0116769f, -0.0646014f, -0.0964984f,
  +0.1508200f, +0.1315458f, +0.1504168f, -0.0871120f, +0.3578263f, +0.2009701f, +0.0634363f, -0.1011475f,
  +0.1531580f, -0.1835399f, +0.2435708f, -0.2767956f, -0.0980343f, +0.0681334f, +0.0205384f, -0.0328651f,
  -0.3710098f, -0.1280636f, +0.1681630f, -0.0125285f, +0.1417523f, +0.0624351f, -0.1481600f, -0.1515721f,
  -0.1015857f, +0.0590059f, +0.0930619f, -0.0790879f, -0.2001348f, -0.0937873f, -0.0409866f, +0.2464731f,
  -0.1813794f, +0.1915434f, +0.0641771f, +0.1705967f, -0.0980937f, -0.2849307f, +0.1046158f, +0.0077306f,
  -0.1227052f, -0.4179424f, -0.0374248f, -0.2845343f, -0.1180823f, -0.0267518f, -0.1925289f, -0.1990013f,
  -0.0710934f, -0.0423046f, +0.0419522f, -0.0159721f, -0.1250318f, -0.2651615f, -0.2192581f, -0.2091085f,
  +0.0548239f, -0.0910069f, +0.1664062f, -0.1019845f, +0.0673172f, -0.0042405f, -0.3536447f, -0.1162950f,
  -0.0073609f, -0.0307680f, +0.1343495f, +0.3649178f, +0.0478500f, -0.0642747f, -0.2188315f, +0.2841777f,
  -0.0214214f, -0.0016529f, +0.1110249f, +0.4576599f, +0.1867800f, -0.0455576f, -0.0335089f, -0.1190943f,
  +0.0870334f, +0.1011877f, +0.0545435f, +0.1059489f, +0.0360385f, -0.1265685f, +0.0861758f, -0.0066774f,
  +0.0421273f, -0.4203099f, +0.1722083f, +0.5991855f, +0.2207973f, +0.3775374f, -0.3376785f, +0.5487757f,
  +0.2785153f, -0.4305149f, +0.0319718f, +0.1638384f, +0.3026635f, +0.1975128f, -0.1419761f, +0.0018618f,
  -0.0406712f, -0.2063824f, -0.2490531f, +0.0498416f, -0.1729628f, -0.1943355f, -0.0525947f, +0.0642967f,
  +0.0837657f, +0.1938008f, -0.2695469f, +0.2373700f, -0.1339996f, +0.1709947f, +0.1355835f, +0.4746720f,
  +0.2105607f, -0.0448168f, -0.2410168f, +0.0577352f, -0.1267062f, -0.1594811f, +0.1025417f, -0.5671753f,
  -0.0558424f, -0.1433588f, -0.0544666f, -0.0745037f, +0.1153657f, -0.1685015f, -0.3816438f, +0.2570196f,
  +0.0900351f, +0.0715351f, +0.0365883f, -0.2817864f, +0.2186284f, -0.0894512f, -0.2757760f, -0.0749393f,
  -0.3631912f, +0.1855358f, +0.0959043f, -0.4050049f, +0.0191272f, +0.0502022f, -0.0343144f, -0.6183919f,
  +0.0761763f, -0.0458448f, -0.1291185f, -0.0631248f, -0.1495634f, -0.1211117f, -0.4608530f, -0.3653727f,
  +0.0415366f, +0.0354967f, +0.3377082f, -0.2991860f, -0.2842889f, +0.1444840f, -0.1992338f, -0.0617198f,
  +0.0659819f, +0.1904915f, +0.1347029f, +0.0571992f, -0.2128492f, +0.1592838f, +0.4149560f, +0.2606722f,
  -0.0022422f, +0.1121386f, +0.3038758f, +0.2334148f, +0.1218150f, -0.2630110f, +0.1016884f, +0.0610307f,
  +0.1216429f, +0.3013715f, +0.0048070f, +0.1132810f, +0.0111706f, -0.1908644f, -0.2465542f, +0.2331088f,
  +0.2659118f, -0.3062865f, -0.1226750f, +0.0550514f, +0.1647478f, -0.0033674f, -0.3187222f, +0.2828705f,
  +0.2654708f, -0.0923226f, -0.0250239f, -0.1194024f, -0.0070322f, +0.0195041f, -0.1325791f, +0.0560565f,
  -0.1021925f, +0.0622337f, -0.2629832f, -0.2124835f, -0.0279604f, +0.1368382f, +0.1280141f, -0.1670176f,
  -0.0456393f, +0.1054673f, +0.1400577f, -0.3350212f, +0.4262588f, +0.0874361f, -0.2921023f, -0.3028074f,
  -0.1130640f, +0.0705819f, -0.0442355f, -0.2051942f, -0.1848143f, -0.2530278f, -0.0039947f, +0.1573998f,
  +0.0053575f, +0.1012332f, +0.1491094f, -0.2207600f, -0.0855119f, -0.0426467f, -0.1163428f, -0.0266896f,
  -0.5856394f, +0.0930068f, +0.0335889f, -0.2879761f, -0.0204610f, +0.0481393f, +0.1531636f, -0.0045297f,
  +0.0283730f, -0.2452108f, +0.2151493f, +0.1397125f, -0.0978218f, -0.1434590f, +0.0742937f, -0.1677960f,
  +0.0946841f, -0.0157557f, -0.1253630f, -0.0236509f, +0.0981335f, -0.2781323f, -0.1334685f, +0.0214374f,
  +0.0784482f, +0.5957578f, -0.1072512f, -0.2237943f, -0.0252899f, +0.2118300f, +0.0316708f, -0.0456764f,
  +0.0251586f, -0.0033766f, -0.1032661f, -0.2588883f, -0.1496548f, -0.0180453f, -0.2323691f, +0.0725897f
);

const float biases[4] = float[4](
  -0.0107368f, -0.0397212f, +0.0108512f, +0.0144407f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer53 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0959918f, -0.2286989f, -0.1189487f, +0.0000706f, +0.2626337f, -0.1629522f, -0.0114687f, +0.1361917f,
  -0.0070678f, -0.4126700f, +0.3971214f, -0.0769961f, -0.3460736f, -0.3030424f, -0.2782783f, -0.3284790f,
  +0.3480509f, +0.1341495f, -0.0060390f, +0.1598567f, -0.4832070f, -0.0539962f, +0.1319368f, +0.1458829f,
  +0.0767987f, -0.1631894f, -0.1569802f, -0.2024649f, +0.0628169f, -0.0646785f, -0.1485043f, -0.1099607f,
  +0.2341373f, -0.2100176f, -0.1149270f, +0.0352149f, +0.0664058f, -0.4461386f, -0.2714218f, -0.0060137f,
  +0.1979978f, -0.1414224f, -0.0014376f, +0.1232084f, -0.3311922f, +0.0552144f, -0.1359511f, +0.1478367f,
  +0.1911337f, +0.0797737f, -0.0708677f, -0.1006984f, +0.2411453f, -0.1045004f, -0.1223237f, -0.2207766f,
  -0.1209364f, +0.2358950f, +0.1906960f, -0.1550281f, -0.0050473f, -0.3291191f, -0.3705441f, -0.1309005f,
  +0.1274516f, +0.0482029f, +0.0921285f, -0.0172192f, +0.0176920f, +0.2145932f, -0.2561730f, -0.0941503f,
  -0.1330221f, -0.2728652f, +0.4246614f, -0.2720036f, -0.0393484f, -0.0045198f, -0.1084280f, -0.2139713f,
  +0.0651591f, -0.1721852f, +0.7086629f, -0.2166104f, +0.0705092f, +0.1409286f, -0.0582663f, -0.2504039f,
  +0.0765233f, -0.1265773f, -0.2279824f, +0.0261343f, -0.0401640f, +0.4529369f, -0.0534357f, +0.1038722f,
  -0.0239387f, -0.1368429f, -0.1306038f, +0.0270776f, +0.0439904f, -0.1486430f, +0.0028123f, -0.1246707f,
  +0.2285375f, +0.0530152f, +0.3848674f, -0.3213673f, -0.1807438f, -0.1103750f, -0.1517373f, -0.0915203f,
  -0.2308083f, +0.1187509f, -0.0760147f, -0.1209904f, +0.2880868f, -0.0979838f, +0.0059215f, +0.0025891f,
  -0.1809654f, +0.0582546f, -0.1287786f, -0.1300311f, +0.1167659f, +0.0696204f, -0.1150141f, -0.1755518f,
  -0.0753437f, -0.1421968f, +0.2212998f, -0.1362192f, -0.4148990f, -0.0570502f, +0.2260365f, -0.1522834f,
  +0.0391933f, -0.0140119f, +0.1803622f, -0.0067728f, +0.0820082f, +0.2983854f, +0.0824980f, -0.0805443f,
  -0.2807710f, +0.0738563f, -0.0801888f, +0.1699228f, +0.0846291f, -0.2059814f, -0.1531994f, +0.0850407f,
  +0.1149293f, -0.2227240f, -0.0037375f, +0.2288933f, +0.0916105f, +0.0194758f, -0.1145836f, +0.2670401f,
  -0.0675595f, -0.1551618f, +0.0611935f, -0.1557841f, +0.0658604f, +0.0128695f, -0.0544813f, +0.1621489f,
  -0.0206747f, -0.0780712f, +0.0839745f, -0.0115584f, +0.6491905f, -0.5371723f, -0.1578348f, +0.2704073f,
  -0.0970765f, -0.1437750f, -0.1403675f, +0.4185503f, -0.7973830f, +0.1809580f, +0.0237027f, +0.2827333f,
  -0.0961313f, +0.1397818f, +0.1650715f, +0.0623939f, -0.1780668f, -0.2161331f, +0.1767373f, +0.0335157f,
  -0.0370471f, -0.2920549f, -0.1216616f, -0.0809235f, +0.2891448f, -0.0296840f, -0.1379195f, +0.2049114f,
  +0.1579755f, +0.3064097f, -0.0971739f, +0.1627639f, -0.0616601f, +0.2737809f, +0.0000132f, +0.2497837f,
  -0.0331914f, +0.0647677f, +0.0169326f, +0.1063866f, -0.1299516f, -0.0951308f, +0.1566612f, +0.2399095f,
  -0.1549084f, +0.0023066f, +0.1351998f, +0.1532103f, +0.1458849f, -0.0838083f, +0.0180622f, +0.0585903f,
  +0.0871463f, -0.0377769f, +0.0009365f, -0.2529686f, +0.1803528f, -0.0301959f, -0.0033031f, -0.0920249f,
  -0.0484664f, -0.0487992f, -0.2757444f, +0.1197525f, +0.0365963f, -0.0999075f, -0.0185839f, +0.1076291f,
  +0.1745931f, -0.0170834f, -0.1209643f, -0.1877039f, +0.1565767f, -0.1222725f, -0.1014175f, +0.1743540f,
  -0.5136069f, +0.1265836f, -0.1800371f, -0.1474537f, +0.2446548f, +0.1419347f, -0.1470285f, +0.1083253f,
  +0.0869648f, -0.1203623f, +0.2444846f, +0.0720370f, -0.2655147f, -0.2515258f, +0.1402206f, +0.0840572f,
  +0.2485030f, +0.2030991f, -0.1027625f, -0.0375710f, +0.1830519f, +0.0536011f, -0.0408511f, -0.0654447f,
  -0.4245729f, +0.1282959f, +0.1908190f, +0.0146482f, -0.0894166f, +0.2394569f, +0.1363065f, +0.0438672f,
  +0.0245856f, +0.0836235f, +0.0303246f, +0.0137922f, -0.0902149f, -0.2957813f, +0.0710308f, +0.0277689f
);

const float biases[4] = float[4](
  +0.0788213f, +0.0265289f, -0.0088304f, +0.0120500f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer53 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3302401f, -0.1817607f, +0.1183704f, +0.2878295f, -0.2269155f, -0.4127111f, -0.1380408f, +0.3047797f,
  +0.0874389f, -0.1039567f, -0.0039351f, -0.0177922f, +0.2373392f, -0.0591826f, -0.1355410f, +0.3001157f,
  -0.0271250f, -0.1600349f, -0.0685638f, +0.0845578f, -0.2484694f, +0.0533972f, -0.1883470f, +0.0773019f,
  +0.1828717f, +0.1524888f, +0.1423950f, +0.3523845f, +0.1108275f, +0.0727441f, -0.0903237f, +0.4622359f,
  -0.2245207f, +0.4782602f, +0.1096813f, -0.1178736f, -0.2213435f, +0.0818246f, -0.3444143f, +0.1335987f,
  +0.0557874f, +0.2491730f, +0.2628365f, -0.0548219f, -0.2955087f, -0.9182779f, +0.2346066f, +0.0585073f,
  -0.1629456f, -0.1050001f, -0.1595141f, -0.3413067f, -0.1418236f, +0.1730331f, -0.1194503f, -0.2698631f,
  +0.1549320f, +0.0965708f, +0.2138244f, +0.3687994f, -0.2496733f, +0.0947541f, -0.5763308f, -0.1295758f,
  -0.4799505f, -0.1359596f, +0.3516581f, -0.2484373f, -0.4141817f, +0.2735830f, -0.2828688f, +0.0045785f,
  +0.0153500f, -0.2469379f, -0.1742327f, -0.1470880f, -0.2062401f, -0.0905625f, -0.0955176f, +0.0965856f,
  -0.1215002f, +0.1025991f, -0.2803717f, +0.0425584f, -0.0252111f, +0.0230429f, -0.0167216f, +0.2304948f,
  +0.0111320f, +0.1247951f, +0.1345767f, -0.2839705f, +0.1915640f, +0.2638501f, +0.0297353f, -0.2709233f,
  -0.1346713f, +0.0990801f, -0.1699516f, -0.1477586f, +0.1147324f, -0.0333415f, -0.0248946f, +0.0603795f,
  +0.1062258f, +0.0612128f, +0.0340606f, -0.0527286f, +0.2658045f, -0.0389975f, +0.0795456f, +0.1854981f,
  -0.1483861f, +0.1542318f, -0.1347770f, +0.0336207f, +0.0683634f, +0.0475652f, +0.0958659f, -0.2976390f,
  +0.1843967f, -0.0306987f, -0.4126843f, -0.0816044f, +0.0347013f, +0.1980555f, +0.0216582f, +0.0938215f,
  -0.0302801f, +0.1718303f, -0.1894152f, -0.2509804f, +0.0886160f, +0.4073430f, +0.2112508f, +0.1718506f,
  +0.0760552f, -0.2524745f, +0.1294242f, -0.0545150f, +0.0838664f, +0.2284045f, +0.1358797f, +0.0681201f,
  +0.0111199f, +0.1578864f, +0.2203656f, +0.0009022f, -0.0109925f, -0.2815036f, +0.1128919f, -0.3565523f,
  +0.2393910f, -0.2478278f, +0.0213221f, +0.2515469f, -0.0228526f, +0.1754422f, +0.0373075f, +0.0957761f,
  -0.1053036f, +0.0210300f, +0.1028860f, -0.1811004f, +0.1319139f, +0.1749372f, -0.0881239f, +0.0110220f,
  +0.2529526f, -0.2374724f, +0.0913133f, -0.2107280f, +0.2951594f, -0.4579882f, -0.0950509f, -0.2646313f,
  +0.1527690f, -0.0813935f, +0.2826689f, -0.0647085f, -0.3429914f, +0.2238991f, +0.1161387f, -0.3807168f,
  -0.0667231f, +0.1540418f, -0.0253742f, +0.1841046f, -0.0871165f, -0.0110730f, -0.0256485f, -0.1353423f,
  +0.0354085f, -0.2917994f, -0.0999190f, -0.2333217f, +0.1959230f, -0.0908149f, -0.0466226f, -0.1063775f,
  -0.0265232f, +0.0513651f, -0.2319166f, -0.0760252f, -0.0641468f, +0.2959863f, +0.0681481f, -0.1394636f,
  +0.0065016f, -0.1806664f, -0.1531582f, +0.0231658f, +0.0129694f, +0.0611867f, +0.0209595f, +0.1086946f,
  -0.0674558f, +0.0975912f, -0.0295988f, +0.1672089f, -0.5297286f, -0.0391455f, +0.0989240f, -0.0208704f,
  +0.1097027f, -0.2673380f, -0.0031912f, +0.1639677f, -0.0294463f, +0.0902094f, -0.0519792f, -0.4680829f,
  +0.0768437f, +0.4108547f, -0.2231140f, +0.3497801f, -0.0347928f, -0.0544158f, -0.1113430f, +0.1516851f,
  +0.3382875f, +0.1874896f, +0.2056641f, -0.0884115f, -0.0319721f, +0.1323837f, -0.3816306f, +0.2197305f,
  -0.0081088f, -0.1970949f, -0.1421015f, -0.1484036f, +0.2138630f, +0.3531291f, +0.0536142f, +0.0532917f,
  -0.0018001f, +0.1717565f, -0.2060034f, +0.0366853f, -0.0945137f, +0.0319250f, +0.0771507f, -0.3071671f,
  +0.1175180f, -0.2521572f, -0.4227883f, -0.3780959f, -0.2530034f, +0.0691692f, -0.1659267f, -0.0446887f,
  +0.2647891f, +0.1355097f, -0.1076185f, +0.0394765f, +0.3776222f, +0.3163436f, +0.2311599f, -0.0020089f,
  +0.1418879f, +0.0882286f, -0.0286226f, +0.1054826f, +0.2094634f, -0.0746062f, -0.1490239f, -0.0296834f
);

const float biases[4] = float[4](
  -0.1586988f, +0.0907515f, +0.0251962f, -0.1616536f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer54 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0931824f, -0.3278681f, -0.0429196f, +0.0630660f, +0.6150438f, +0.1384240f, +0.2417321f, -0.1681377f,
  -0.1397429f, -0.0924013f, +0.0926474f, +0.3258876f, -0.3934214f, +0.1366388f, +0.1189480f, +0.1617149f,
  -0.0894300f, -0.0755309f, -0.0874906f, -0.1714935f, +0.0618156f, -0.1074453f, +0.0519544f, +0.0053413f,
  -0.2398050f, +0.0213154f, -0.1947753f, +0.0280550f, +0.1213689f, -0.1624161f, +0.1614554f, -0.0398491f,
  -0.2768300f, -0.0984186f, +0.2166008f, +0.2737809f, +0.2250575f, -0.1867224f, -0.0095416f, +0.0552865f,
  -0.2397098f, -0.1632787f, -0.0417029f, +0.1386628f, +0.0976406f, +0.0110685f, +0.0618753f, -0.1384849f,
  -0.4010095f, -0.1001693f, +0.1079708f, +0.0823786f, -0.1004877f, -0.1892796f, -0.0072778f, -0.1766421f,
  +0.1325327f, +0.2249093f, +0.0230223f, +0.0972735f, -0.0496068f, -0.0090102f, -0.2959302f, -0.0655163f,
  +0.0470831f, -0.0616650f, +0.0079458f, -0.1513414f, -0.0974484f, -0.1668324f, +0.0277480f, -0.1646479f,
  -0.1053308f, -0.1140585f, +0.1353376f, +0.2042161f, -0.2522074f, -0.0253138f, +0.0753371f, +0.0640879f,
  -0.4182133f, -0.0984898f, +0.3508713f, -0.1086675f, -0.3465604f, -0.1445161f, -0.1328518f, +0.0843013f,
  +0.0095384f, -0.0298286f, -0.2876018f, -0.3227316f, +0.2578353f, -0.0431399f, +0.2169532f, -0.0327730f,
  +0.1414670f, +0.2857333f, -0.2626514f, +0.1524209f, -0.3097560f, -0.0912106f, -0.1658711f, +0.1648547f,
  +0.0806941f, +0.1494391f, +0.0691098f, -0.0282574f, -0.1459495f, +0.1536270f, -0.0938067f, +0.0419037f,
  +0.0390157f, +0.3464433f, +0.0012168f, -0.3084466f, -0.4403042f, -0.1324713f, -0.0038063f, -0.2144359f,
  +0.0159012f, +0.0114652f, -0.1178960f, -0.0051381f, -0.0923846f, -0.2062862f, +0.0770473f, +0.2402954f,
  -0.2740511f, +0.0088045f, +0.0775390f, +0.0230140f, -0.0876734f, -0.2024666f, +0.1115779f, +0.1568401f,
  +0.2644952f, -0.0144283f, -0.0451675f, -0.0678761f, +0.1220079f, +0.2390653f, +0.0577034f, +0.0070123f,
  -0.1327635f, +0.0234173f, +0.0281349f, -0.2244945f, -0.3888698f, +0.0499964f, +0.0492888f, +0.2817205f,
  +0.4099674f, +0.0956528f, -0.2655810f, -0.1391535f, -0.2920483f, +0.0415962f, +0.1088997f, -0.0325582f,
  -0.0519987f, +0.1855946f, -0.0035741f, -0.0324152f, +0.0151027f, +0.2356592f, +0.0219391f, +0.0866012f,
  +0.1475510f, +0.2392509f, +0.1258815f, -0.2075159f, -0.0733649f, +0.2477124f, -0.1562991f, -0.3764926f,
  +0.1760275f, -0.4648083f, +0.0523178f, +0.1619023f, +0.0137515f, -0.0323991f, -0.1393450f, +0.0771377f,
  +0.0356277f, -0.0327605f, +0.2082936f, -0.0023606f, +0.4263478f, +0.2041192f, -0.0819889f, +0.1894045f,
  +0.1119439f, +0.1441499f, -0.2288103f, +0.1883268f, -0.0298236f, -0.0665502f, +0.1176457f, -0.3200911f,
  -0.0597346f, -0.3386154f, -0.0416899f, +0.0241721f, -0.5735128f, +0.4133107f, -0.0261324f, -0.1999184f,
  +0.0717613f, -0.0788171f, +0.1105985f, -0.1486856f, +0.1124607f, +0.2425670f, -0.2545903f, +0.3378192f,
  +0.0094941f, +0.0575061f, +0.2795203f, -0.2034951f, -0.1207619f, +0.1002093f, -0.0494479f, +0.0789025f,
  -0.0042168f, +0.0737421f, -0.3469533f, -0.0147428f, -0.1124441f, -0.0793380f, +0.3151802f, -0.0975905f,
  +0.1849054f, -0.0464335f, -0.0347185f, +0.1782412f, +0.0055795f, +0.2419801f, +0.1677238f, +0.0692817f,
  -0.1763012f, +0.0048859f, -0.0057416f, -0.1117114f, +0.3073913f, +0.0761072f, -0.1868031f, -0.0936157f,
  +0.1974233f, +0.2661813f, +0.1998942f, +0.2093961f, +0.2743994f, -0.1173058f, -0.3433111f, -0.1050256f,
  +0.3132230f, +0.0291169f, -0.1285581f, +0.0498635f, +0.3314826f, +0.2652639f, +0.1974396f, +0.1505620f,
  +0.0855892f, -0.1160838f, +0.1725366f, -0.1539498f, -0.4742124f, -0.1354823f, -0.0265281f, -0.4150359f,
  +0.0079444f, +0.0323279f, +0.0508313f, +0.2551220f, +0.1638034f, -0.2322641f, -0.4274161f, -0.3148791f,
  +0.1005794f, -0.1123935f, -0.2325047f, -0.1217838f, -0.1613168f, +0.2245425f, +0.1547383f, +0.1798560f
);

const float biases[4] = float[4](
  -0.0062812f, +0.0387659f, +0.0665366f, +0.0530018f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer54 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0216261f, -0.0207902f, -0.1374780f, +0.2182684f, +0.0140965f, -0.2452621f, -0.0710234f, -0.1373909f,
  -0.0670198f, +0.2185618f, -0.1599669f, +0.1703666f, +0.2895611f, -0.0350092f, +0.0817668f, -0.1961294f,
  -0.2699262f, -0.1815581f, +0.1009245f, -0.1522865f, +0.0984759f, -0.1055461f, -0.0633208f, -0.1196894f,
  +0.1274677f, -0.2010462f, -0.2347159f, +0.3662558f, -0.0082433f, +0.0558793f, +0.3981103f, -0.0020621f,
  -0.1454357f, -0.0358373f, -0.3811341f, -0.1711276f, +0.1473721f, -0.1546399f, +0.5892416f, +0.1976450f,
  +0.0343272f, -0.0653847f, -0.0290369f, -0.3626712f, -0.0631528f, -0.1624385f, -0.0565633f, +0.2121723f,
  +0.0537231f, -0.1113838f, -0.0071468f, -0.1280680f, -0.0871297f, -0.1656221f, -0.0064322f, +0.2574010f,
  -0.0889684f, -0.2307709f, +0.1328827f, -0.3350112f, -0.3163452f, +0.1172236f, +0.0964099f, -0.0270161f,
  -0.1547053f, -0.1696512f, -0.0057282f, +0.0669348f, -0.1356170f, +0.1148557f, +0.0024097f, +0.2007364f,
  +0.2784983f, +0.0132898f, +0.1492754f, -0.0859140f, +0.0150894f, +0.0196334f, -0.2059119f, -0.1876233f,
  -0.1851088f, +0.2015008f, +0.0009219f, -0.2193052f, +0.2917362f, -0.2345126f, -0.3764860f, -0.2289910f,
  -0.0950935f, +0.0929470f, +0.1496879f, +0.0451580f, -0.2043288f, -0.1053137f, -0.0714793f, -0.1115979f,
  -0.0385419f, +0.0816039f, +0.1415650f, +0.1424040f, +0.2489479f, -0.0258270f, +0.1781682f, +0.0329663f,
  +0.1493632f, -0.0299369f, -0.0891197f, -0.1295592f, -0.2764842f, -0.1205693f, -0.0830805f, -0.1308744f,
  -0.0460169f, -0.1485295f, -0.3334515f, +0.1526836f, -0.2153739f, +0.0719758f, +0.1874677f, -0.1976889f,
  +0.0065947f, -0.0298726f, +0.1577622f, +0.1794228f, -0.0732311f, +0.0536660f, -0.2125941f, -0.3652359f,
  -0.0299596f, -0.0244981f, +0.0618682f, -0.0231623f, +0.3092975f, +0.0267409f, -0.1501749f, +0.3854398f,
  -0.2686979f, +0.0738741f, -0.0354701f, +0.0048884f, +0.2500021f, +0.0342088f, +0.0498890f, -0.0462549f,
  +0.4308057f, +0.0776898f, -0.0511294f, -0.1105253f, +0.0758309f, -0.2338466f, -0.2358099f, +0.2607607f,
  +0.4943661f, -0.1557090f, -0.0025752f, -0.0418266f, -0.0780689f, -0.0159060f, -0.2829399f, -0.3506213f,
  -0.1727529f, -0.0609816f, -0.3827527f, +0.2544238f, +0.0640990f, -0.1967456f, -0.0431102f, -0.3331305f,
  +0.2538451f, -0.0898618f, +0.1451197f, -0.1135879f, +0.0837516f, +0.0638909f, -0.0509710f, -0.0408836f,
  +0.0565517f, +0.2374578f, +0.6101011f, -0.1723966f, +0.6553913f, -0.0505492f, -0.1484097f, -0.4193387f,
  +0.2993318f, +0.0445993f, -0.6127960f, +0.1641369f, +0.0449128f, -0.0841226f, +0.1592712f, +0.2782969f,
  -0.3305908f, +0.0746250f, -0.2428078f, +0.0652412f, -0.2956742f, +0.1127205f, -0.1271821f, +0.1310699f,
  +0.3831623f, -0.0018947f, +0.0456164f, -0.1463695f, -0.3270666f, +0.1322178f, +0.0132632f, +0.0269932f,
  -0.1077208f, -0.0521987f, +0.1400213f, -0.0071681f, -0.2588118f, +0.0549444f, -0.1269217f, -0.1212131f,
  -0.0206103f, +0.0951112f, -0.0347101f, -0.1763864f, -0.0430422f, -0.3224059f, -0.0625305f, -0.1431983f,
  -0.0165791f, -0.0457932f, +0.2368922f, -0.0925799f, -0.0642589f, +0.0054084f, -0.0929540f, +0.2345592f,
  -0.1190119f, -0.1821696f, -0.5605987f, +0.2233272f, +0.1586331f, -0.1929472f, +0.2712562f, +0.2751508f,
  -0.3400702f, +0.0183194f, -0.2828945f, +0.0612920f, -0.0926285f, +0.2678156f, +0.2510024f, +0.0772837f,
  +0.0008994f, +0.1285338f, -0.2694544f, -0.2559842f, -0.2860304f, +0.0719063f, +0.2468992f, -0.0834563f,
  -0.2331024f, -0.3259969f, -0.2862621f, +0.0032556f, -0.1001866f, -0.0067297f, +0.2529614f, +0.0828883f,
  +0.1282557f, -0.1455611f, +0.0294674f, -0.1617378f, +0.3308995f, +0.0108715f, +0.0741983f, -0.1991481f,
  +0.4415954f, +0.3352059f, -0.2302428f, +0.2466815f, -0.1872067f, -0.0828464f, -0.0922657f, +0.1071173f,
  -0.3183087f, +0.0642205f, +0.0199061f, +0.2145320f, +0.3003271f, -0.2983802f, +0.2819683f, +0.3073806f
);

const float biases[4] = float[4](
  -0.0383644f, -0.0530180f, +0.0248686f, +0.0487626f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer55 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1770397f, -0.0714920f, +0.0423596f, +0.0101828f, +0.2104527f, +0.1753757f, +0.0686970f, +0.0308866f,
  -0.0343284f, +0.0894903f, +0.0475442f, -0.3072773f, +0.0954979f, -0.0155275f, -0.0369422f, -0.1366227f,
  +0.0250466f, +0.0101168f, +0.0685501f, +0.0334513f, +0.1066106f, +0.0053757f, +0.0745768f, -0.0234610f,
  -0.2044664f, +0.1296928f, -0.5503088f, +0.6275104f, +0.0043867f, -0.0152105f, -0.2356864f, -0.0258076f,
  +0.1009281f, -0.0106490f, -0.1721153f, +0.3388031f, +0.0115134f, -0.0582586f, +0.0422803f, -0.0168753f,
  +0.0842789f, -0.1503856f, -0.1250482f, -0.0307899f, +0.0597591f, +0.1325791f, -0.1219818f, -0.0128030f,
  -0.0646624f, -0.0325112f, -0.3574987f, +0.1825887f, +0.1331429f, +0.5303287f, -0.7146445f, -0.5422345f,
  -0.1605018f, +0.1012026f, -0.0507515f, -0.0375434f, +0.0882958f, +0.0089007f, -0.1535564f, +0.0585466f,
  +0.0630439f, +0.0820330f, +0.0972450f, -0.0519250f, +0.0842363f, -0.0481531f, -0.0545437f, -0.0169919f,
  +0.3384926f, -0.2690501f, -0.0877396f, +0.3267023f, -0.1763121f, -0.0948819f, -0.0441248f, +0.0336319f,
  +0.0294872f, -0.1383401f, -0.0819782f, -0.1749747f, -0.3602101f, +0.0653518f, +0.1630986f, -0.0089252f,
  +0.0765284f, +0.0121489f, +0.1906107f, -0.2197160f, -0.2527972f, -0.0432111f, -0.2460621f, -0.0300587f,
  +0.2573617f, +0.3024790f, +0.4041731f, +0.3454635f, +0.2998079f, +0.0462459f, -0.3144302f, -0.0539840f,
  +0.1922477f, -0.2286902f, +0.0035573f, +0.1339304f, -0.1689160f, +0.5864267f, -0.2127323f, -0.0939450f,
  +0.1904390f, +0.0019117f, +0.1652487f, -0.0026202f, +0.0995092f, +0.1032322f, -0.4215405f, +0.1697704f,
  +0.0270436f, -0.4203622f, +0.0123143f, +0.3472189f, -0.0670291f, +0.0910877f, -0.0233762f, +0.0497161f,
  +0.0823364f, +0.2792064f, +0.0719802f, +0.2555728f, +0.1793536f, -0.1895814f, +0.4100448f, +0.0979084f,
  +0.1774642f, +0.1074059f, +0.2170632f, +0.1602033f, -0.3043094f, +0.1076100f, +0.2365004f, -0.1222452f,
  -0.1213233f, +0.2666837f, -0.0279929f, -0.1148701f, +0.0380822f, -0.1006108f, +0.0419974f, -0.0829736f,
  +0.0064015f, -0.4591216f, -0.1803707f, +0.1185431f, +0.0582267f, +0.4298981f, -0.0367963f, +0.2550296f,
  +0.0193422f, -0.1343925f, +0.0353401f, +0.1430276f, -0.3372700f, -0.0818232f, -0.0821421f, +0.2932630f,
  -0.1237942f, +0.0072109f, +0.1459419f, +0.2368403f, +0.0211288f, -0.0082206f, +0.1302543f, +0.0446280f,
  -0.0296952f, -0.0328619f, -0.2746561f, +0.0224981f, +0.0089391f, +0.0075869f, +0.1076262f, -0.0395102f,
  -0.0868321f, +0.0841230f, -0.2221032f, -0.1375331f, -0.1562520f, +0.0373728f, +0.2013423f, +0.0963392f,
  +0.0369603f, +0.2274786f, -0.1032524f, -0.0057841f, +0.0334795f, +0.1935850f, +0.0947580f, -0.2085856f,
  -0.0715609f, -0.1430742f, +0.0012897f, +0.2869992f, -0.1810708f, -0.1435702f, -0.0855446f, -0.2661589f,
  -0.4488956f, -0.1172831f, +0.3086368f, -0.0240529f, +0.0752060f, +0.0127129f, +0.0188457f, +0.0325990f,
  -0.0789628f, -0.1407273f, -0.2652064f, +0.0471894f, +0.0892237f, +0.0301173f, -0.1334378f, +0.1031154f,
  -0.0543791f, -0.2189217f, +0.2391553f, -0.1435219f, -0.0466765f, +0.0918892f, -0.1275158f, +0.0036871f,
  -0.1014370f, -0.0688860f, +0.1599534f, -0.2949905f, -0.2850062f, +0.0007856f, +0.2607462f, +0.0586473f,
  -0.0837876f, -0.3418429f, +0.1199830f, +0.0593105f, +0.1147042f, +0.3988037f, +0.0437431f, +0.0214249f,
  -0.1618625f, +0.3134565f, +0.0460788f, -0.0638430f, -0.2225260f, +0.0459827f, -0.0006729f, +0.0066725f,
  +0.1027369f, +0.0541338f, +0.0696142f, +0.0259458f, -0.2069418f, +0.1519813f, -0.0480082f, +0.0271559f,
  +0.1641342f, -0.2727094f, -0.1659757f, -0.1326888f, -0.0444101f, +0.1801379f, -0.2348963f, +0.0835430f,
  -0.0904595f, +0.1237053f, +0.0641011f, +0.1740439f, +0.1337572f, +0.0765370f, +0.1571912f, -0.0388972f,
  -0.1441636f, +0.1227760f, +0.0610986f, -0.1051647f, -0.2935109f, +0.1919181f, +0.0499008f, -0.0634316f
);

const float biases[4] = float[4](
  -0.7153424f, -0.0570067f, +0.0149058f, +0.0384653f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer55 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0649505f, +0.3077888f, -0.3281969f, -0.2131203f, -0.2359103f, +0.1516211f, +0.0155591f, -0.1065416f,
  +0.1689235f, -0.2478449f, -0.1968308f, -0.1488219f, +0.3743317f, +0.4255120f, -0.1041023f, +0.3262984f,
  +0.2184554f, +0.0168872f, +0.0387684f, +0.0929560f, -0.1470698f, +0.3343348f, -0.1881759f, -0.0224860f,
  +0.0177933f, -0.0605272f, +0.3525826f, +0.1175104f, -0.1499517f, -0.0894066f, +0.0746117f, +0.0647613f,
  -0.0119353f, -0.2261935f, -0.2281336f, -0.1836884f, +0.1538334f, +0.2450312f, +0.1263233f, +0.2613748f,
  -0.0071784f, -0.1600419f, -0.0511334f, -0.2350442f, -0.0069629f, -0.3114119f, +0.3254633f, -0.2396685f,
  -0.1469233f, +0.2096381f, -0.3172547f, -0.0492129f, -0.4348594f, -0.0329682f, -0.1221358f, +0.1096645f,
  +0.0884735f, -0.0619098f, +0.1852946f, -0.0811813f, -0.0505085f, -0.1483152f, -0.2721709f, -0.0419007f,
  -0.1192149f, -0.1417147f, -0.1767111f, -0.1987559f, +0.1578424f, +0.0057286f, -0.2059405f, +0.1285067f,
  +0.2998407f, +0.1513264f, +0.1682407f, +0.0765804f, -0.0009788f, +0.2156825f, -0.0428432f, -0.1230516f,
  +0.0833957f, +0.0047898f, -0.1264874f, +0.0163024f, +0.0069503f, -0.2620236f, -0.1275011f, +0.0339344f,
  +0.1346489f, -0.0590957f, +0.0775653f, -0.0424168f, -0.0914415f, +0.0546794f, +0.0816814f, -0.0476420f,
  -0.3137582f, +0.1222477f, -0.5531097f, +0.2408873f, +0.0096518f, -0.3219441f, -0.2806072f, -0.2889573f,
  +0.3763586f, -0.1290151f, +0.4738478f, +0.2910682f, +0.0300941f, -0.7295262f, +0.4068398f, +0.4163812f,
  +0.1937945f, -0.2356223f, -0.3848390f, -0.1503114f, -0.0238242f, +0.3278501f, -0.1626654f, -0.0037889f,
  -0.1378725f, -0.3212281f, +0.4618817f, +0.2134846f, -0.4435372f, +0.1217489f, -0.2298870f, -0.5047798f,
  +0.1043656f, +0.4576365f, -0.0606160f, +0.2489189f, +0.4359650f, -0.4998866f, -0.2779736f, +0.5414386f,
  +0.0761865f, +0.2615485f, +0.0280514f, -0.1088710f, +0.0018593f, +0.3460165f, +0.0190550f, -0.2495689f,
  -0.1694771f, +0.1921145f, -0.0095486f, +0.0331215f, -0.0391220f, +0.0677587f, +0.0600200f, -0.0308335f,
  +0.1320549f, +0.2087505f, +0.0444215f, -0.2766847f, -0.1784776f, +0.0518553f, -0.0980882f, +0.0642882f,
  -0.0701302f, +0.0628806f, -0.0308887f, +0.0126047f, -0.0020507f, +0.0533569f, -0.0737156f, +0.0544941f,
  -0.3355878f, +0.1281000f, +0.1361544f, +0.1634873f, +0.1478005f, -0.0747327f, +0.1926047f, +0.1655963f,
  -0.0597200f, -0.0703785f, -0.1198131f, +0.0762444f, -0.0825870f, +0.1429471f, +0.3323148f, -0.3483149f,
  -0.2610653f, +0.1483453f, +0.6152173f, -0.1172154f, -0.0130023f, +0.1081514f, -0.1050022f, -0.1086673f,
  +0.1451235f, +0.2222534f, +0.0581963f, -0.0393587f, +0.2322412f, -0.1046421f, +0.1580443f, +0.1609090f,
  +0.0159806f, -0.0894784f, -0.2994482f, -0.2993088f, -0.1389208f, -0.1634239f, -0.1693661f, -0.4058383f,
  -0.0309005f, -0.2217188f, +0.1754362f, +0.2955936f, +0.1889669f, +0.1143275f, -0.2041702f, +0.2660625f,
  -0.0563599f, +0.1409594f, +0.0398888f, -0.0524930f, -0.0969658f, -0.0896194f, +0.0099286f, -0.1925799f,
  +0.1514637f, +0.0820277f, +0.3452784f, -0.6173748f, -0.1346711f, +0.2449791f, +0.3068239f, +0.1921932f,
  -0.1757625f, -0.0639321f, -0.1532420f, -0.1729095f, +0.2387253f, +0.2005678f, -0.0681861f, +0.2842487f,
  +0.0111939f, -0.0767296f, -0.0801576f, +0.0371447f, +0.0234657f, -0.0132696f, +0.1937584f, +0.0918228f,
  +0.2045907f, -0.4175135f, -0.1393420f, -0.2015341f, -0.2975112f, +0.0303127f, +0.0106413f, +0.0342341f,
  -0.1570934f, +0.1033319f, -0.2104346f, +0.0303540f, +0.1821168f, +0.4107084f, -0.1483239f, -0.3205306f,
  +0.0564662f, +0.0226295f, +0.0949805f, -0.0596839f, -0.0448652f, +0.0510591f, -0.0834572f, +0.0358914f,
  -0.0614479f, -0.3753276f, +0.3055264f, +0.2617674f, +0.0376154f, -0.1233421f, +0.0565432f, -0.3100942f,
  -0.1334425f, +0.0253423f, -0.2460116f, +0.1494285f, -0.0199657f, +0.1052776f, -0.0046062f, -0.1455241f
);

const float biases[4] = float[4](
  -0.0405241f, -0.0197972f, +0.0239189f, +0.0417615f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer56 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1196749f, -0.2449255f, +0.1542386f, -0.0430004f, -0.0787519f, +0.0416315f, -0.0812143f, +0.0673875f,
  -0.0374721f, -0.2506260f, -0.1067896f, +0.0999947f, -0.1276239f, -0.0624217f, -0.0879801f, +0.1226747f,
  -0.4008192f, +0.0906852f, -0.0259239f, +0.0672323f, +0.2914599f, -0.0991651f, -0.1157681f, -0.2148475f,
  -0.1025502f, -0.1039172f, +0.0682733f, -0.1097882f, +0.1780096f, +0.1786054f, +0.3704892f, -0.0483208f,
  -0.2434222f, -0.0554943f, -0.0231826f, -0.2978971f, +0.2504639f, -0.3535112f, -0.1268389f, -0.3881049f,
  +0.5178085f, -0.0263516f, +0.0797408f, +0.1964522f, +0.0971132f, -0.1377492f, -0.2218474f, -0.0149443f,
  -0.0283997f, -0.1216713f, -0.1527017f, -0.1289638f, -0.0703230f, +0.0368800f, -0.0253555f, -0.0066657f,
  -0.0534182f, +0.0170354f, -0.0498369f, -0.0641282f, -0.2373125f, +0.0402010f, -0.3229244f, -0.0890670f,
  +0.3664255f, -0.0138900f, -0.0209241f, +0.1639977f, +0.0752733f, -0.1603501f, -0.0235340f, +0.0297491f,
  +0.0129933f, -0.3617293f, -0.0762589f, +0.0400518f, +0.0677059f, -0.0159088f, +0.1454074f, -0.0165133f,
  +0.2508359f, -0.2016502f, -0.1409716f, -0.0340694f, +0.1032419f, -0.2638361f, +0.1971110f, +0.1337539f,
  +0.2946894f, -0.0188161f, -0.0400410f, +0.2525935f, -0.1119970f, -0.3559633f, -0.2674701f, -0.1731760f,
  -0.0211114f, +0.0414189f, +0.2794724f, +0.0933073f, -0.0892777f, +0.1441081f, -0.0115771f, -0.0437576f,
  +0.2891148f, +0.0939017f, +0.1583907f, -0.0107254f, -0.1327818f, -0.0743071f, +0.0867685f, +0.2230731f,
  -0.7070071f, -0.1996981f, +0.0176314f, +0.2550476f, -0.3810946f, +0.0061978f, +0.0488859f, -0.2614197f,
  -0.0526697f, -0.0315676f, -0.0661891f, -0.0332475f, +0.1461077f, -0.0601694f, +0.0439674f, -0.1041643f,
  +0.1843404f, -0.3885641f, +0.0915453f, +0.2842909f, +0.4934857f, -0.0289301f, +0.0731745f, -0.1942337f,
  -0.2656223f, -0.0191010f, -0.2822011f, +0.3138012f, +0.0180852f, +0.0562372f, -0.1820963f, -0.0843581f,
  +0.1156025f, -0.3073984f, -0.3224782f, +0.1572034f, +0.2717659f, +0.1483780f, -0.3882685f, +0.2138739f,
  -0.3732066f, -0.1640021f, -0.1101283f, +0.0023664f, -0.1522819f, +0.0330584f, +0.3099546f, -0.0227482f,
  -0.3755928f, -0.1022234f, -0.0951529f, +0.0567257f, +0.0761819f, +0.0471283f, -0.0845324f, -0.0431808f,
  +0.1710550f, -0.4942965f, +0.1846785f, +0.0329234f, +0.1511363f, -0.0129395f, -0.5438499f, -0.0173907f,
  +0.0338498f, +0.0583555f, +0.1599406f, +0.2066979f, +0.2871329f, +0.6138849f, +0.2486652f, +0.0081494f,
  +0.8094100f, -0.0026363f, -0.0760456f, -0.2019142f, +0.0272968f, -0.1998451f, -0.1183631f, +0.0028520f,
  +0.2171391f, -0.1412843f, -0.0501712f, +0.2304955f, -0.1565664f, -0.1237898f, +0.0397256f, +0.2579049f,
  +0.0617358f, +0.0665448f, +0.1961624f, -0.1345740f, -0.1644019f, -0.0716855f, -0.1010562f, -0.1614615f,
  -0.0071276f, +0.2486537f, -0.0478035f, +0.0266949f, -0.0017517f, +0.1324817f, -0.1126437f, -0.1362480f,
  +0.0195019f, -0.0390839f, -0.1887956f, +0.1997620f, -0.2761656f, +0.0398402f, -0.1179922f, +0.0591939f,
  +0.2451658f, -0.3145813f, -0.2090019f, +0.1499097f, +0.3220564f, +0.1701819f, +0.3939524f, -0.1969819f,
  -0.0464959f, -0.2671379f, -0.1173293f, +0.0059910f, -0.1286086f, +0.1701095f, +0.0173996f, +0.0928333f,
  -0.0089979f, +0.0865255f, +0.1992007f, -0.0525469f, +0.1976382f, +0.1210950f, +0.2122661f, +0.2737072f,
  -0.0312259f, -0.2121856f, -0.0356917f, +0.2692680f, +0.0118924f, +0.3638659f, -0.0498614f, +0.1324461f,
  -0.8372702f, +0.0814912f, -0.1307258f, +0.1393652f, -0.3903054f, -0.1723364f, -0.2778948f, -0.2129835f,
  -0.0771738f, +0.0464984f, -0.1444471f, -0.1090894f, -0.1214709f, -0.0587443f, +0.1549553f, +0.0117137f,
  +0.3358951f, -0.4298139f, -0.0995421f, +0.0970361f, +0.1711206f, +0.2611678f, -0.0034339f, +0.0107546f,
  +0.5652680f, -0.0518528f, +0.1074395f, +0.1219027f, -0.1800696f, +0.2068503f, -0.0236232f, +0.2221187f
);

const float biases[4] = float[4](
  +0.0044306f, +0.0024930f, -0.0378472f, +0.0813621f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer56 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1019821f, -0.1074934f, +0.0238986f, +0.1506424f, -0.2926452f, +0.0583465f, -0.2241555f, -0.0681585f,
  +0.3081757f, +0.1790015f, +0.0617156f, -0.3070519f, +0.0258322f, +0.2975745f, +0.0430902f, -0.0526253f,
  -0.0726083f, -0.2088885f, -0.1908191f, -0.0427691f, +0.0508718f, -0.2482515f, -0.1324276f, -0.0225488f,
  -0.0834366f, -0.1768339f, +0.1173079f, +0.0494525f, -0.1804647f, -0.0832923f, +0.0998949f, -0.0251416f,
  +0.0333517f, +0.1895178f, -0.1965622f, -0.1476502f, -0.2375093f, -0.9021348f, -0.0428260f, +0.3774651f,
  -0.5664601f, -0.0818818f, -0.2526703f, -0.3482745f, -0.2217552f, +0.1694029f, -0.0018740f, -0.2393347f,
  -0.1328080f, +0.1894298f, +0.0647048f, +0.2357163f, +0.1444202f, +0.0011813f, +0.1699485f, -0.3732847f,
  +0.1475719f, +0.3923305f, -0.1687540f, +0.1380383f, +0.0310305f, -0.2216470f, +0.0829949f, +0.0424566f,
  -0.0113443f, +0.1345232f, -0.0385194f, -0.2301001f, -0.1316066f, -0.1054469f, -0.0535611f, +0.1452161f,
  +0.1853949f, -0.1226989f, +0.1154363f, -0.0535254f, +0.0917720f, -0.0421493f, -0.2224930f, -0.0270850f,
  -0.4698426f, +0.2394171f, +0.3584468f, -0.1582553f, -0.0126900f, -0.0385942f, -0.0260756f, +0.2015583f,
  -0.2105539f, +0.0199846f, -0.1754954f, -0.0804428f, -0.1870036f, -0.1282682f, +0.0405996f, -0.1411410f,
  +0.2692194f, -0.2437512f, -0.1274472f, -0.1868933f, -0.0409855f, -0.3538855f, -0.1853056f, -0.1683436f,
  -0.4044605f, -0.4833689f, +0.1232075f, -0.0773894f, -0.2845974f, +0.2395093f, -0.1053514f, +0.2976671f,
  +0.8441002f, -0.0482768f, -0.0422917f, -0.1303199f, +0.1216974f, -0.1795450f, +0.1903113f, -0.4215138f,
  +0.1389531f, -0.2544940f, -0.0080757f, +0.2276592f, -0.3429813f, +0.1149539f, +0.0142900f, +0.2156952f,
  -0.1573794f, -0.1324067f, -0.0308929f, -0.0446711f, -0.2809966f, +0.1424481f, -0.1197400f, -0.4986593f,
  -0.1102544f, +0.1218342f, +0.1406118f, -0.0353357f, -0.0175584f, +0.0025115f, -0.0834668f, +0.0702593f,
  -0.0921021f, -0.0473114f, +0.2786637f, +0.1753877f, -0.3011321f, -0.0391596f, -0.0095585f, -0.0862286f,
  +0.5778437f, +0.2048167f, +0.4057338f, -0.0559679f, +0.0937167f, +0.2154763f, -0.0971325f, -0.0230957f,
  +0.4465250f, -0.1529922f, -0.0247044f, +0.2107571f, +0.1248620f, -0.3408423f, -0.0452798f, +0.2759614f,
  -0.2951282f, +0.1402470f, +0.0003802f, +0.2136997f, -0.2858304f, -0.1847265f, +0.1056655f, -0.0187327f,
  +0.1240048f, +0.0911294f, -0.2569473f, +0.2830471f, +0.1678885f, -0.3276760f, +0.0089066f, +0.2246868f,
  -0.0433016f, +0.0525724f, -0.0697104f, -0.2677161f, +0.0680882f, -0.0537182f, -0.2109431f, -0.2107269f,
  -0.0110916f, +0.1075724f, -0.2486406f, -0.1126579f, -0.0640956f, +0.0489946f, +0.0203155f, +0.0213531f,
  +0.2080372f, +0.1893106f, -0.0697764f, -0.0009096f, -0.2823397f, -0.2989547f, -0.1492934f, -0.2631210f,
  +0.0577542f, +0.1608029f, +0.1049227f, +0.0342101f, +0.1103468f, -0.1155891f, +0.1162460f, +0.1240998f,
  -0.0387814f, +0.0289516f, -0.1153762f, -0.1707994f, -0.1291496f, +0.0753506f, -0.0658094f, +0.0957451f,
  -0.1716399f, +0.5293376f, +0.0241257f, -0.0328961f, +0.0234834f, +0.0888728f, +0.3776659f, +0.1497481f,
  +0.3632178f, -0.1955035f, +0.0451711f, +0.0443120f, -0.2745412f, +0.2216576f, +0.0973155f, +0.0173245f,
  +0.1248606f, +0.0953854f, -0.0906208f, +0.0096999f, +0.1095476f, +0.1619076f, -0.0008892f, +0.0672180f,
  -0.4443506f, +0.1264321f, -0.0111811f, +0.1364815f, -0.0535039f, +0.1674271f, -0.0041719f, -0.2428684f,
  +0.0647052f, -0.2821292f, -0.0191648f, +0.1200509f, -0.1340834f, +0.3678831f, -0.0073088f, -0.0651949f,
  +0.0187486f, -0.0675941f, -0.2731117f, -0.2328003f, -0.0369417f, -0.0027141f, -0.0634523f, +0.0049889f,
  -0.1185665f, -0.1088677f, -0.0702339f, -0.1152985f, +0.0264727f, +0.2395173f, -0.0034994f, +0.2600150f,
  +0.1188556f, -0.1277199f, -0.0669077f, +0.0150466f, -0.0366172f, -0.0371340f, +0.1324588f, +0.1719914f
);

const float biases[4] = float[4](
  +0.0535939f, +0.0565763f, -0.0365198f, +0.0011236f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer57 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0776645f, -0.1324004f, +0.0130108f, +0.0915931f, +0.0528103f, -0.0658799f, -0.0100462f, -0.2361604f,
  -0.0623965f, -0.0894663f, +0.0729082f, -0.0216359f, -0.2244378f, -0.1665437f, +0.0427679f, -0.0371460f,
  +0.0504708f, -0.0954016f, -0.2818428f, +0.0859074f, -0.0628478f, -0.1567180f, +0.0542289f, -0.1150709f,
  -0.1652034f, -0.0095805f, +0.1537128f, +0.1672582f, -0.0875208f, +0.1362988f, +0.2123522f, -0.2027780f,
  -0.1103776f, +0.0012310f, +0.0182982f, -0.0682417f, -0.0249334f, +0.2218963f, -0.0924603f, +0.2972788f,
  +0.0370045f, +0.0597401f, +0.1483079f, -0.2862603f, +0.2715667f, +0.1203115f, +0.0249558f, -0.2475593f,
  -0.0470511f, +0.1661972f, +0.1316288f, -0.0025840f, +0.1050638f, +0.1704745f, -0.0072263f, +0.0564448f,
  -0.0296868f, -0.1555507f, -0.0263573f, -0.0424552f, +0.0450412f, +0.0116009f, -0.1207543f, -0.1111576f,
  +0.1030174f, +0.0163813f, +0.0499000f, +0.1094170f, -0.0797943f, -0.3454278f, -0.0075928f, +0.0616084f,
  -0.0498403f, -0.2764210f, +0.2558240f, +0.0029382f, -0.1026411f, -0.0163577f, +0.0339849f, -0.2302940f,
  +0.1228828f, -0.2290688f, -0.1372183f, -0.1092430f, -0.2213185f, -0.2415759f, +0.1073492f, -0.0688716f,
  -0.1515187f, +0.1054654f, -0.0158734f, +0.1177293f, +0.0381019f, -0.0864920f, -0.1252603f, -0.0081268f,
  -0.1625381f, -0.6954601f, +0.1988945f, -0.0209417f, +0.1331639f, -0.5275367f, -0.1324260f, -0.0301340f,
  -0.2059602f, -0.2408041f, +0.0002266f, +0.1257688f, +0.1782743f, +0.2342575f, +0.0590683f, +0.2751403f,
  +0.0575546f, -0.0550866f, -0.2155713f, +0.0826920f, -0.1956408f, -0.0359041f, +0.0785773f, -0.0672245f,
  +0.0058573f, -0.3281594f, +0.1810020f, +0.2919460f, +0.1188145f, -0.3289837f, +0.2051486f, +0.1880038f,
  +0.0252459f, -0.3268030f, -0.2256029f, +0.1056260f, +0.2670341f, -0.1236743f, +0.2453830f, -0.0367877f,
  -0.1130020f, +0.0255566f, +0.0225060f, +0.1484279f, -0.0779877f, -0.1462268f, -0.0774950f, +0.0584790f,
  +0.2781642f, -0.0232237f, +0.0675889f, -0.2211645f, -0.0160257f, -0.1315658f, -0.0704332f, -0.0347573f,
  -0.0699948f, +0.0208463f, +0.0915249f, -0.0660801f, +0.1528818f, -0.0353071f, -0.1691049f, -0.0161281f,
  +0.0209263f, +0.1268671f, -0.2445398f, +0.1121809f, -0.2120216f, +0.1663571f, +0.1796210f, +0.1681635f,
  +0.5716050f, +0.2500404f, -0.3809917f, -0.2790836f, -0.4603440f, -0.0063313f, +0.1298999f, +0.1817659f,
  -0.1262298f, +0.1606158f, -0.0467808f, -0.1234151f, +0.4072150f, +0.1624957f, -0.5785736f, -0.3045000f,
  +0.0228224f, -0.1296732f, +0.1683866f, +0.1879715f, -0.3172624f, +0.4105271f, -0.0571034f, +0.2179920f,
  +0.0571340f, +0.2252710f, -0.0505427f, -0.0721416f, +0.1156448f, -0.2227342f, -0.0469965f, -0.1092968f,
  -0.1590923f, +0.3720385f, +0.0091973f, -0.0631865f, -0.0510895f, +0.1338769f, -0.2747348f, -0.1503871f,
  -0.0132712f, -0.3510155f, -0.1100613f, +0.1314643f, -0.1232622f, +0.0358293f, +0.3181661f, +0.0750378f,
  -0.0508359f, +0.4820831f, +0.0234656f, -0.0527207f, +0.0621323f, +0.2301038f, +0.2555448f, +0.1299609f,
  +0.0642584f, +0.2115703f, -0.0428653f, +0.2226355f, +0.0771275f, -0.2649876f, +0.0324373f, -0.2821096f,
  -0.1667916f, +0.2862339f, -0.1606255f, -0.0475755f, -0.0281087f, +0.1840104f, +0.2437411f, -0.0955850f,
  -0.2122906f, -0.0097386f, +0.4365220f, +0.0427667f, -0.3867592f, -0.2994724f, -0.0136310f, -0.1387131f,
  -0.1542658f, +0.0287449f, +0.1425470f, +0.3623607f, +0.1049545f, -0.2540128f, -0.4572130f, +0.1892119f,
  -0.1990199f, +0.0529307f, -0.0957038f, -0.1600412f, -0.1196834f, -0.0063816f, -0.0825735f, +0.0165698f,
  -0.0929896f, +0.4262561f, +0.1439979f, -0.1111560f, -0.1354364f, +0.0245250f, +0.1883613f, -0.1300815f,
  -0.0954786f, -0.0600807f, -0.1357594f, -0.0267866f, +0.0482125f, +0.2645248f, -0.0706970f, +0.0475447f,
  -0.0366994f, -0.0722463f, -0.0726167f, -0.0107713f, -0.0237242f, +0.1292293f, -0.0093521f, -0.0720561f
);

const float biases[4] = float[4](
  +0.1015636f, +0.0414064f, +0.0008258f, +0.0079149f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer57 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0384161f, +0.0633158f, +0.1656894f, -0.1984461f, +0.1169985f, -0.1300331f, -0.1114946f, -0.1128158f,
  +0.0594412f, +0.1547018f, -0.1258258f, -0.0178856f, +0.2711803f, +0.2298831f, +0.1398293f, -0.0271864f,
  -0.0885667f, -0.0732729f, -0.0370591f, -0.0031541f, +0.2556564f, +0.0994746f, -0.1012941f, +0.0392404f,
  -0.1982985f, +0.1658660f, -0.2655296f, +0.2167586f, +0.2671564f, -0.1183612f, -0.0956877f, +0.4022404f,
  +0.0131325f, -0.1248749f, -0.1386924f, +0.2505981f, -0.2849282f, -0.2211676f, -0.0121371f, +0.1666522f,
  -0.1999552f, -0.0183320f, -0.1217411f, +0.2776295f, +0.2818776f, -0.2443311f, -0.1961727f, +0.1896568f,
  +0.6101679f, +0.0340219f, +0.0318693f, -0.3025683f, -0.4085257f, -0.0741429f, -0.0848393f, -0.2212927f,
  +0.0431337f, +0.0020309f, -0.0005725f, -0.2807536f, -0.4015768f, -0.2488760f, +0.0583136f, +0.1629931f,
  +0.0098604f, -0.0340785f, +0.1554796f, +0.1398029f, +0.1164581f, -0.0805550f, -0.2473534f, +0.0458173f,
  -0.0590829f, -0.0595637f, +0.1200225f, -0.0617397f, +0.1375415f, -0.0063702f, -0.0275326f, -0.0740229f,
  +0.1610708f, -0.2430442f, +0.1247396f, -0.0143373f, -0.0036144f, -0.0812909f, -0.0370823f, -0.1489607f,
  -0.0323454f, -0.2578994f, +0.2464062f, -0.0228279f, +0.0316072f, +0.0859260f, -0.0751905f, +0.0097382f,
  -0.1179190f, +0.1630256f, -0.1108251f, -0.0184737f, -0.1071591f, -0.0879463f, +0.2813897f, +0.0940048f,
  -0.1133611f, +0.3166091f, -0.1646707f, +0.1976300f, -0.1176795f, -0.1582085f, -0.0823055f, +0.2658164f,
  -0.3050011f, +0.4511208f, -0.2916495f, +0.0384995f, -0.0007275f, -0.0863837f, +0.0425477f, +0.2098697f,
  +0.0433599f, +0.1027862f, -0.1639638f, -0.0076415f, +0.0307442f, +0.1430798f, -0.0962858f, -0.1117288f,
  +0.0820165f, -0.4299889f, -0.1514789f, -0.2749825f, +0.1559283f, +0.4618930f, +0.3725480f, -0.2035619f,
  +0.0588069f, -0.2964254f, -0.2530470f, +0.0808025f, -0.0037316f, +0.2291198f, +0.3355146f, -0.0999986f,
  -0.1727007f, +0.0555225f, -0.2779916f, +0.2241971f, +0.0365983f, +0.1522996f, -0.0291759f, +0.1607362f,
  -0.1265096f, -0.1496134f, +0.1231291f, +0.0529944f, +0.1246491f, +0.1637432f, +0.1602971f, +0.0323500f,
  +0.0739466f, -0.1829730f, +0.0264612f, -0.0330015f, -0.0322212f, -0.0022657f, +0.1216216f, -0.0912840f,
  -0.2939577f, -0.3025446f, +0.2823563f, +0.1255130f, +0.0183687f, +0.2012769f, +0.2697721f, +0.0731422f,
  -0.0366250f, +0.1290387f, -0.1650523f, -0.1262892f, +0.2890476f, +0.2264006f, +0.0024112f, -0.0691778f,
  -0.1444476f, +0.0621516f, -0.2402626f, -0.0511795f, +0.0424172f, +0.0232912f, +0.0842358f, +0.1118089f,
  -0.1518789f, -0.3035477f, +0.1425659f, -0.1042544f, +0.0416577f, -0.1192269f, +0.2670835f, +0.1524482f,
  -0.1153554f, -0.0820556f, +0.0517892f, -0.1858815f, -0.1489078f, +0.0812035f, +0.2235736f, +0.0145596f,
  +0.0439385f, +0.1250151f, -0.0654143f, +0.0482685f, -0.1076105f, -0.0994801f, +0.0859394f, +0.0089522f,
  -0.0131494f, +0.0000543f, +0.0734017f, -0.0361395f, +0.0982094f, +0.0173211f, -0.0306176f, -0.0316081f,
  -0.1797019f, -0.0168695f, -0.0906695f, +0.0490340f, +0.0908876f, +0.1673389f, -0.1674438f, +0.1824752f,
  -0.1727476f, +0.3035370f, +0.0791599f, -0.1482013f, -0.0067927f, +0.2096942f, +0.1343218f, +0.0166794f,
  +0.0899857f, +0.0491229f, +0.0991306f, -0.1503388f, -0.0874837f, +0.2612080f, -0.0759151f, -0.1140906f,
  +0.2871792f, +0.0823584f, +0.1574675f, +0.0707322f, -0.1371333f, -0.3650174f, -0.1665971f, -0.0920771f,
  +0.3161864f, -0.5831080f, -0.1749760f, -0.0493848f, -0.3890329f, +0.1160041f, -0.3038120f, +0.2543909f,
  -0.1603649f, -0.0433483f, -0.1228742f, -0.0705351f, -0.0638897f, +0.2127112f, +0.2262750f, -0.0156737f,
  +0.2870567f, +0.2648287f, +0.1092263f, +0.1796139f, +0.3205152f, -0.0514511f, -0.0233720f, -0.4035532f,
  +0.4373858f, -0.0579551f, +0.2721036f, -0.5279374f, -0.4353313f, -0.0137406f, +0.6451975f, +0.5975481f
);

const float biases[4] = float[4](
  -0.0075477f, +0.0475966f, -0.0246016f, -0.0164104f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer58 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1853974f, +0.1303698f, -0.0417452f, -0.0557523f, +0.1481407f, +0.1387326f, +0.0044284f, +0.1635226f,
  -0.2109195f, -0.0052906f, +0.0975694f, +0.0503143f, -0.0083393f, +0.2902738f, +0.1001326f, -0.0557354f,
  -0.1249845f, +0.3092179f, +0.0033709f, -0.0303344f, -0.0819768f, +0.0440728f, -0.1669678f, +0.0101503f,
  -0.1915818f, -0.2507396f, -0.2870333f, +0.0618076f, +0.2359924f, +0.2907832f, -0.0832059f, +0.4576979f,
  +0.2604429f, +0.0521835f, +0.2564939f, +0.2278860f, +0.0818851f, -0.0488246f, -0.2126320f, -0.1538693f,
  +0.1686839f, -0.1302173f, -0.2454909f, +0.4503856f, -0.0848522f, +0.0741958f, -0.3418829f, +0.0368991f,
  +0.0340032f, -0.0065775f, -0.0674788f, +0.0009214f, -0.0665439f, +0.0911277f, -0.0071410f, +0.0256668f,
  +0.0438943f, +0.1062196f, -0.1894063f, -0.0269029f, -0.1375821f, +0.1065113f, +0.3119695f, -0.1479096f,
  +0.0786418f, -0.0291760f, -0.0934003f, +0.0158180f, +0.3147512f, +0.1107961f, -0.1546772f, -0.0390467f,
  +0.0262238f, -0.2141022f, +0.1753420f, +0.0125646f, -0.0436655f, +0.0202356f, +0.0239973f, +0.1554956f,
  +0.1761913f, -0.0116964f, +0.2070062f, +0.1268817f, +0.2441469f, +0.3133908f, -0.0201587f, +0.1681878f,
  -0.0545707f, -0.0382443f, +0.2510343f, -0.1504256f, -0.0582218f, +0.0117446f, -0.0082417f, -0.2253762f,
  +0.0906714f, +0.2756428f, +0.1057525f, +0.0118866f, -0.0623512f, -0.2746266f, +0.0176015f, -0.1915989f,
  +0.0509830f, +0.2094108f, +0.2576107f, -0.4079172f, +0.1961767f, -0.1705766f, +0.3824739f, -0.0504418f,
  +0.0898433f, +0.2628461f, +0.2436528f, -0.1777115f, -0.0076193f, -0.2967956f, -0.0585866f, -0.0089451f,
  -0.4651838f, -0.1741023f, +0.0835855f, -0.0674185f, +0.0636870f, +0.1368675f, +0.1044164f, -0.0373406f,
  -0.1939750f, -0.0486841f, +0.3364153f, -0.4120725f, +0.0831520f, -0.3353973f, -0.0945131f, +0.1978668f,
  +0.4197567f, -0.0599165f, +0.1579205f, -0.1395772f, -0.0746771f, +0.0424689f, -0.1133504f, -0.0236274f,
  -0.0093085f, -0.2797523f, +0.2283613f, +0.0012206f, -0.0721717f, +0.0902191f, +0.2167596f, -0.1941710f,
  -0.2564673f, -0.0430038f, -0.4202631f, +0.1226782f, +0.3891841f, -0.0536293f, +0.0643423f, +0.0327423f,
  -0.1349459f, +0.0076467f, -0.1411193f, -0.0568099f, -0.0575194f, +0.0948337f, +0.1872039f, -0.0166182f,
  -0.1424011f, +0.3512941f, +0.1415838f, +0.1467232f, -0.0563873f, +0.2945634f, +0.1991331f, +0.1966300f,
  +0.0007013f, -0.2950932f, -0.4682303f, -0.3045652f, -0.1071661f, +0.2909161f, -0.2819935f, +0.0561173f,
  -0.0345429f, -0.1500307f, +0.0295044f, -0.1506456f, +0.0723557f, +0.0034507f, +0.0071876f, -0.0760620f,
  +0.1880888f, +0.0754131f, +0.1437709f, +0.0092407f, -0.0049008f, +0.0706172f, +0.0917744f, -0.0655394f,
  +0.2549737f, -0.0631194f, +0.2040442f, +0.1479032f, -0.2008676f, +0.1025393f, +0.0875546f, +0.1750943f,
  +0.0204481f, +0.0019786f, +0.1652167f, -0.0251418f, -0.1781854f, +0.0427709f, +0.1487135f, -0.0961877f,
  -0.3131389f, -0.0027007f, +0.0326482f, +0.1189715f, -0.3462363f, -0.1833123f, +0.1248649f, -0.5332072f,
  +0.0924566f, +0.0383715f, -0.3623573f, +0.1627880f, +0.2118000f, -0.1937905f, +0.1990173f, +0.2633516f,
  -0.0154213f, -0.0750395f, -0.0791203f, -0.1847106f, +0.0410590f, +0.1111858f, -0.1621407f, +0.0300773f,
  -0.0246286f, -0.0918593f, -0.3027942f, +0.0250078f, +0.0831645f, -0.1780348f, +0.0385513f, -0.1721603f,
  -0.2644268f, -0.3184606f, -0.3287799f, -0.0796825f, +0.3413665f, -0.4577686f, -0.1391863f, -0.0204920f,
  -0.0103439f, +0.0845996f, -0.1890360f, -0.3316481f, +0.1597458f, -0.0204821f, -0.3546553f, +0.0000736f,
  +0.0439533f, -0.1102216f, +0.0185259f, -0.1966565f, -0.1961111f, +0.0961658f, +0.0841045f, +0.2251313f,
  +0.0932944f, +0.1449666f, -0.0333086f, +0.2504103f, -0.0034453f, +0.0298872f, +0.2142435f, +0.0146091f,
  +0.0921048f, -0.2918423f, -0.1676600f, +0.2542662f, +0.0053308f, -0.0913313f, -0.3713987f, +0.0802899f
);

const float biases[4] = float[4](
  +0.0227964f, +0.0512849f, -0.0578366f, +0.0248919f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer58 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1710307f, +0.1587530f, -0.1037367f, -0.1568145f, +0.1898961f, -0.0093318f, +0.3832424f, +0.7487558f,
  +0.2247895f, -0.4099472f, -0.1139697f, -0.0879733f, -0.1636324f, -0.1689994f, -0.0748882f, +0.0738661f,
  -0.1558106f, +0.0894965f, +0.2405295f, +0.1093580f, +0.0487898f, -0.0140976f, +0.0101771f, -0.2042458f,
  +0.1276550f, -0.0224191f, +0.1965427f, -0.2555623f, +0.5195014f, -0.0151438f, -0.0246762f, +0.0050056f,
  -0.1417846f, -0.0513979f, +0.0445916f, -0.1621401f, +0.1078595f, -0.0281190f, -0.0406696f, -0.0586004f,
  -0.0606449f, +0.0417321f, +0.3908497f, -0.1431001f, +0.0422384f, -0.0445405f, -0.3745168f, -0.0770136f,
  -0.1107681f, +0.1122415f, +0.2575665f, +0.0176563f, +0.1941016f, +0.0131578f, -0.0260038f, -0.0808500f,
  +0.3389359f, +0.1288931f, +0.4046160f, -0.2293974f, -0.1244495f, -0.0707440f, -0.0634720f, +0.0985709f,
  +0.1541669f, +0.1520777f, +0.1795137f, +0.1240448f, -0.0398953f, -0.1039064f, +0.1146662f, +0.0269833f,
  -0.0215170f, +0.2249757f, +0.0903572f, -0.0300141f, +0.2200813f, -0.1437754f, +0.0879496f, +0.4225820f,
  -0.0337019f, +0.1624534f, +0.6147608f, -0.1865411f, +0.0661528f, -0.1484950f, +0.1224612f, +0.1098818f,
  +0.0119220f, +0.2023034f, +0.3995626f, +0.2082683f, +0.4144793f, +0.0359917f, +0.0597679f, -0.0710926f,
  -0.2748411f, -0.0077070f, +0.1167279f, +0.1560238f, -0.1835430f, +0.2015819f, -0.0244685f, -0.0431831f,
  -0.1709412f, +0.0890876f, +0.3039038f, +0.2533925f, -0.1939545f, +0.3254693f, +0.0011665f, -0.2591734f,
  -0.0206816f, +0.6417918f, -0.1188051f, +0.2120077f, +0.0694010f, +0.1780515f, +0.3879257f, -0.0686570f,
  -0.0024058f, -0.0787076f, +0.1024331f, +0.0775420f, +0.0406951f, -0.1981209f, +0.0187097f, +0.2529394f,
  +0.1762294f, +0.1567832f, -0.1718467f, +0.0873631f, -0.0396258f, +0.2103634f, -0.0737082f, +0.0126650f,
  +0.0281934f, +0.0783280f, -0.2452510f, +0.0197035f, -0.1204549f, +0.0068629f, -0.2352234f, +0.0648787f,
  -0.0700848f, +0.3040083f, -0.1970326f, -0.0668571f, +0.0117279f, -0.3631564f, +0.0344656f, -0.3664053f,
  +0.1648800f, -0.0718989f, -0.1209617f, -0.0232120f, +0.1340879f, -0.4015044f, -0.1868770f, -0.1532189f,
  -0.0265600f, -0.0138139f, -0.0912765f, -0.1170584f, +0.3435620f, +0.0151602f, -0.1850919f, -0.1534009f,
  +0.0463340f, +0.0646931f, -0.0563049f, -0.1939049f, -0.0233479f, -0.1054828f, +0.0859230f, -0.3424028f,
  -0.2186140f, -0.0471232f, -0.1813120f, +0.2505754f, +0.1575714f, -0.1292930f, -0.0356830f, +0.0604593f,
  +0.0823828f, -0.3155074f, +0.1872690f, +0.1104278f, -0.1687895f, -0.1518521f, -0.2346499f, +0.0187359f,
  +0.2523422f, +0.0578219f, -0.0062340f, -0.4026713f, -0.2648994f, -0.1204620f, +0.0683658f, -0.1310178f,
  +0.1060917f, +0.0185891f, +0.0414625f, -0.0855069f, -0.2479150f, +0.3884560f, +0.0481453f, +0.0020969f,
  -0.1160707f, +0.1928408f, -0.0150770f, -0.3231073f, -0.1847748f, -0.0230314f, +0.1441403f, +0.0152414f,
  +0.1056589f, +0.0060937f, -0.0689100f, +0.1488060f, +0.0455814f, -0.1199486f, -0.0187543f, -0.3990786f,
  -0.0812733f, +0.0727767f, +0.1252611f, -0.0786352f, +0.2518271f, +0.1098057f, -0.0762796f, +0.0322468f,
  +0.2804181f, -0.1181730f, -0.0397590f, +0.2784304f, +0.3595700f, +0.0133579f, +0.1219405f, -0.0486852f,
  +0.0071852f, -0.1051451f, -0.0013438f, +0.0263003f, +0.1150015f, -0.2559096f, -0.0120394f, +0.0097020f,
  -0.3588992f, -0.2143382f, -0.0963843f, -0.5599630f, +0.1400522f, -0.4260905f, -0.1667006f, +0.0218173f,
  -0.1343664f, -0.0349764f, -0.2032387f, +0.3809609f, +0.2484385f, +0.2692313f, +0.1994934f, -0.0413093f,
  +0.2123197f, -0.1556907f, -0.1030630f, +0.0920475f, +0.0058707f, -0.0819912f, -0.1464884f, +0.1021580f,
  -0.1048784f, +0.1447412f, -0.1136431f, +0.4178136f, +0.0133234f, +0.0095404f, -0.1261629f, +0.0505968f,
  +0.0189582f, -0.0822299f, -0.2348341f, -0.0260176f, +0.0761198f, -0.0101661f, -0.1318963f, +0.0503143f
);

const float biases[4] = float[4](
  +0.0323826f, +0.0066944f, -0.0180266f, -0.0063046f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer59 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3030798f, +0.3142323f, -0.0682456f, -0.0725004f, +0.0588567f, -0.1767898f, +0.0069421f, -0.1572342f,
  +0.2572261f, +0.8975636f, -0.0896757f, -0.0344918f, +0.3451572f, -0.0895467f, +0.1807797f, -0.2574842f,
  +0.3394180f, +0.4210510f, -0.5072618f, +0.4737823f, +0.1861538f, -0.1806116f, -0.0222117f, +0.1113911f,
  +0.4385927f, +0.4642620f, +0.0314405f, +0.0745539f, -0.0367374f, -0.1872191f, -0.1069191f, +0.2667004f,
  -0.2112622f, +0.2068714f, +0.1123805f, +0.3094286f, +0.0177019f, -0.3145012f, -0.2473762f, +0.0452249f,
  +0.1809830f, -0.5155399f, -0.0300401f, +0.1856552f, +0.4933722f, -0.0306376f, +0.0927253f, +0.0221812f,
  -0.2570054f, -0.2277889f, -0.2015213f, +0.0632965f, -0.0994416f, -0.2688805f, -0.1618926f, +0.0606070f,
  +0.2823418f, +0.1677622f, -0.0967019f, -0.2210419f, +0.0864353f, -0.1748075f, -0.4183452f, -0.0218201f,
  -0.0693141f, -0.0571327f, +0.0270175f, +0.1994702f, -0.1444140f, -0.5356441f, +0.1227380f, +0.0457912f,
  +0.0676556f, +0.1498982f, -0.1818792f, +0.0511558f, -0.0177112f, -0.0995756f, +0.0680615f, +0.0837138f,
  +0.0497978f, +0.3576352f, +0.0856909f, -0.0715588f, +0.0802987f, -0.0251550f, +0.1704999f, -0.1114704f,
  +0.0144080f, -0.0178640f, -0.1381450f, +0.0186990f, +0.2087012f, +0.2016322f, -0.1930755f, +0.0698792f,
  -0.2683962f, +0.0712499f, -0.1197409f, -0.3433012f, -0.1580314f, +0.1977017f, +0.2711180f, +0.0108284f,
  -0.3228940f, +0.2379578f, +0.0020479f, +0.0272133f, +0.1295366f, +0.0595978f, +0.1776258f, -0.4511057f,
  -0.0039783f, -0.0869856f, +0.1462886f, +0.1207329f, +0.0777345f, +0.0058842f, -0.1187086f, -0.2319049f,
  -0.0333800f, +0.1329789f, -0.1491379f, +0.1051793f, +0.0301043f, +0.0925830f, +0.2277159f, +0.0130171f,
  -0.0075300f, +0.1970161f, +0.2131525f, -0.2620501f, -0.3537098f, +0.0042735f, +0.3279290f, -0.0618963f,
  -0.0676123f, +0.2392153f, +0.3956736f, +0.4075727f, +0.2346208f, +0.1435037f, -0.3706799f, +0.0793892f,
  +0.2900251f, -0.0675425f, -0.0504260f, -0.1853322f, +0.0546819f, -0.0759359f, +0.0102871f, +0.0125380f,
  -0.3650897f, -0.0935512f, -0.3645709f, -0.0444673f, +0.1053241f, +0.0742195f, -0.0415799f, +0.2311325f,
  +0.1475492f, +0.0904014f, +0.0518345f, +0.1963420f, +0.0461158f, +0.0076604f, -0.1518423f, +0.0413854f,
  +0.2663181f, -0.0591196f, -0.1588393f, -0.3028526f, -0.0603447f, -0.3374411f, +0.2272317f, -0.0374549f,
  -0.1344994f, -0.4464296f, +0.3867919f, -0.2950096f, -0.3358004f, -0.0901598f, -0.1596429f, +0.7190024f,
  -0.1174177f, +0.2218519f, -0.1845785f, +0.4225964f, +0.3136710f, +0.1987039f, -0.2678051f, -0.2538316f,
  +0.3457799f, +0.3892125f, -0.1532945f, -0.2811003f, +0.0043324f, -0.1400060f, -0.0621777f, -0.0246549f,
  -0.0169984f, -0.5144422f, +0.2725248f, +0.4276942f, -0.0370250f, -0.2623358f, -0.0794980f, +0.3869185f,
  -0.0488575f, +0.1043506f, -0.2377541f, -0.1211788f, +0.2265866f, +0.3092913f, -0.0972038f, -0.3463280f,
  +0.1134270f, -0.1420256f, +0.0528426f, +0.0231924f, +0.1421075f, -0.2539005f, -0.0785432f, -0.0851146f,
  -0.0288320f, +0.1062795f, -0.0298853f, +0.2469019f, -0.0475393f, +0.0413318f, +0.1534643f, +0.0451712f,
  -0.1686610f, -0.0149322f, +0.0592812f, -0.0912030f, -0.0625077f, +0.0318722f, -0.1975725f, +0.0075462f,
  +0.3105671f, +0.2825609f, -0.1941900f, -0.0782075f, +0.1615817f, +0.0493324f, +0.0269339f, +0.1284471f,
  -0.0985868f, +0.3909225f, -0.1016681f, +0.7904316f, -0.0856231f, +0.1291767f, -0.0789331f, -0.2147154f,
  -0.0063106f, +0.0172666f, +0.2844850f, -0.1475271f, -0.1641490f, -0.4815584f, -0.1042531f, +0.2649147f,
  +0.2401803f, +0.2679718f, -0.0054105f, -0.0820563f, +0.0154075f, +0.1742148f, +0.0644129f, +0.0274298f,
  -0.2016354f, +0.6293527f, +0.0870012f, +0.3494814f, -0.0697457f, +0.0590023f, +0.1431109f, -0.3854224f,
  -0.1445054f, -0.1416084f, +0.3294380f, -0.1558465f, -0.2664627f, -0.2419800f, -0.3505931f, +0.1502957f
);

const float biases[4] = float[4](
  -0.0830198f, +0.0306498f, +0.0121771f, -0.0716008f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer59 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1553197f, -0.0656225f, +0.0803752f, -0.3185425f, -0.0645348f, +0.1377216f, +0.0989321f, +0.2236451f,
  -0.1726549f, -0.4985000f, +0.4190653f, -0.8908164f, -0.3286625f, +0.2131206f, -0.1722031f, +0.3773066f,
  -0.1327529f, +0.2886525f, -0.2673321f, +0.4038767f, -0.0313536f, -0.0693353f, -0.2795881f, +0.0376725f,
  +0.2815347f, +0.1955020f, +0.0986252f, -0.3051587f, +0.0119020f, -0.2278175f, +0.2174700f, +0.1606340f,
  -0.2321973f, -0.5475900f, +0.3509128f, +0.0309811f, -0.2102821f, +0.0668365f, +0.0088842f, +0.1881559f,
  -0.1406957f, -0.0661389f, -0.3401403f, +0.1050785f, +0.0619470f, +0.1727785f, -0.2551008f, -0.3406702f,
  +0.2072393f, +0.0310519f, +0.1007171f, -0.0319852f, -0.1045500f, -0.0593505f, -0.1217611f, -0.0198789f,
  -0.0426224f, -0.2304731f, +0.1369016f, +0.1994307f, -0.0383214f, +0.0313583f, +0.1481458f, -0.0220398f,
  -0.0731977f, +0.0914802f, +0.0944134f, +0.0587863f, -0.0265763f, +0.1763435f, -0.0430796f, -0.0192130f,
  +0.1405848f, -0.3535201f, +0.1387471f, -0.1158407f, -0.0746060f, -0.1168172f, -0.1824223f, +0.0516523f,
  +0.0970563f, +0.2603580f, +0.1381938f, +0.1319358f, -0.2248724f, +0.1791042f, +0.4185578f, +0.1848662f,
  -0.1632953f, -0.0241200f, -0.3901710f, +0.2426898f, +0.0712392f, -0.1069736f, -0.2015833f, +0.0888770f,
  -0.1165551f, +0.0200349f, +0.0790360f, -0.2555116f, -0.0482746f, +0.0549802f, +0.1755390f, +0.0589196f,
  -0.0795597f, -0.0412603f, -0.1003469f, +0.4393053f, -0.1101412f, -0.2373120f, -0.2831652f, -0.3418496f,
  -0.0626979f, +0.4411241f, +0.0151542f, +0.3290104f, -0.5107930f, -0.2262032f, +0.1009813f, +0.1768712f,
  +0.2981653f, +0.1376721f, -0.0842784f, +0.0243916f, -0.0941403f, +0.0965781f, -0.0317880f, -0.0084311f,
  -0.3535208f, +0.1084742f, -0.1492952f, +0.0457904f, -0.3023458f, +0.0533948f, +0.1664253f, +0.0065267f,
  -0.0491482f, +0.0427543f, +0.2340149f, -0.0664961f, -0.0880297f, -0.1179047f, -0.1831126f, +0.1148348f,
  +0.2297750f, -0.3782708f, +0.1511540f, -0.2744423f, -0.1154446f, +0.0530480f, -0.0640847f, +0.0527741f,
  -0.1724912f, -0.0468779f, -0.1102029f, -0.1384192f, +0.0779044f, -0.0153486f, -0.0526252f, +0.1010175f,
  -0.0754607f, -0.0143792f, -0.1804673f, -0.0267420f, +0.0392917f, -0.1207119f, -0.1339824f, +0.0574779f,
  +0.1549790f, +0.5197946f, -0.0433735f, -0.0233105f, -0.0621502f, -0.3128304f, -0.0435027f, -0.3412833f,
  -0.2686121f, +0.1796741f, -0.1574700f, +0.2824080f, +0.3384150f, +0.2031279f, +0.3769490f, -0.0047739f,
  +0.1623286f, -0.0900822f, +0.0056321f, +0.0816594f, -0.0211659f, -0.0832830f, +0.3086515f, +0.0235541f,
  -0.2051153f, -0.2389752f, -0.0158314f, +0.0478930f, -0.0967973f, -0.2170840f, +0.0853196f, -0.0330443f,
  +0.0511260f, +0.0524593f, +0.0657547f, -0.0632555f, -0.0408132f, +0.1464968f, -0.1280284f, -0.1900893f,
  -0.0475190f, -0.2081174f, -0.0765453f, -0.0915052f, +0.0046623f, +0.0278885f, -0.1859982f, -0.0263221f,
  +0.0928040f, -0.1217554f, -0.0920702f, -0.1973815f, -0.2070655f, +0.0363222f, +0.0577828f, +0.1479925f,
  -0.1086403f, +0.0202340f, +0.0030048f, +0.0396839f, -0.1187881f, +0.1004920f, +0.0091560f, -0.2274292f,
  -0.0765636f, -0.2387753f, +0.2062942f, +0.0764896f, +0.3609889f, +0.1283242f, +0.2353151f, -0.0556435f,
  -0.1493212f, -0.1835681f, -0.0846987f, +0.0418484f, -0.1040777f, -0.0205152f, -0.0650655f, -0.0547259f,
  +0.0810031f, -0.0403463f, -0.2247721f, -0.0494080f, -0.2047403f, +0.0447380f, -0.0817225f, -0.0532262f,
  +0.0811681f, +0.0961313f, +0.0017728f, -0.2257237f, -0.0859185f, +0.4713150f, -0.0094343f, +0.2554970f,
  -0.3141648f, +0.0664387f, -0.1313547f, -0.0281066f, -0.0503213f, -0.0300832f, +0.0562090f, -0.0111969f,
  -0.0623628f, -0.2273553f, -0.0140468f, +0.0348190f, -0.1803281f, -0.0441818f, +0.0995925f, -0.3057841f,
  -0.3804470f, -0.1970193f, +0.0110985f, +0.1764152f, -0.0709208f, +0.0910852f, +0.1328230f, -0.0831124f
);

const float biases[4] = float[4](
  +0.0141320f, -0.0815246f, +0.0440802f, +0.0258620f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer60 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1835849f, +0.1537795f, +0.0972178f, -0.2885292f, -0.1004287f, +0.0458553f, +0.0758464f, +0.2080488f,
  +0.1451554f, +0.1279791f, -0.4658294f, -0.0787863f, +0.0256322f, +0.0124351f, -0.2461969f, +0.0282206f,
  +0.0540445f, +0.2558716f, +0.0918030f, +0.1516046f, -0.0853792f, +0.1450560f, +0.1174111f, +0.2002286f,
  -0.0584590f, -0.0672877f, +0.1367084f, -0.5476939f, -0.1554857f, -0.0300354f, -0.0145615f, +0.1183295f,
  +0.3953904f, +0.1378669f, -0.3001411f, -0.7034317f, +0.0561949f, +0.2234831f, +0.0167410f, +0.1771856f,
  -0.3129105f, +0.0943986f, +0.0915469f, +0.1363765f, -0.0909045f, +0.0438722f, +0.1090237f, +0.1615763f,
  -0.1967809f, +0.0012876f, -0.1612468f, +0.2058550f, -0.0800535f, +0.0514933f, +0.0865486f, +0.2158654f,
  -0.0873209f, +0.0126661f, -0.0897866f, -0.2538266f, -0.1450190f, +0.2683223f, +0.1214877f, +0.4885078f,
  -0.1603744f, -0.0022724f, +0.0947881f, +0.1833872f, -0.1516813f, -0.0236607f, -0.2258842f, +0.0225726f,
  -0.0766929f, -0.2967126f, +0.0353474f, -0.1558353f, -0.0284306f, -0.4769157f, +0.1889847f, +0.3093041f,
  -0.2668346f, -0.0835335f, -0.4239076f, +0.0170494f, +0.1845744f, -0.0151604f, +0.0344467f, +0.0466597f,
  +0.2316067f, +0.1241272f, +0.2910178f, +0.1244739f, -0.0028885f, -0.1538452f, +0.1879846f, -0.1713376f,
  +0.2199084f, -0.1316900f, +0.1230162f, -0.2625167f, +0.1850243f, -0.0517991f, -0.0001391f, -0.0627802f,
  -0.4645155f, -0.1154878f, -0.6642314f, -0.1440849f, +0.3495410f, -0.1606130f, -0.2195455f, -0.0504616f,
  -0.4011087f, +0.1547076f, +0.4678730f, +0.1749318f, -0.6469448f, -0.0257253f, -0.3056922f, +0.1170963f,
  -0.1750953f, -0.0005067f, +0.1086001f, -0.0511684f, -0.1699415f, +0.2345454f, -0.1120127f, -0.0057728f,
  -0.4871095f, +0.0448898f, -0.1193459f, -0.0451492f, +0.3665064f, -0.1294651f, -0.0191174f, -0.0910209f,
  -0.1939875f, -0.1492298f, +0.0314618f, +0.2329821f, -0.1771369f, -0.3087205f, +0.1237419f, +0.0331198f,
  -0.0431605f, -0.4164540f, -0.1909591f, +0.0402957f, -0.0134691f, -0.2270288f, +0.0716369f, -0.3570574f,
  +0.1717858f, -0.0114651f, +0.3695387f, +0.1926249f, -0.0244505f, +0.2295925f, -0.0115213f, -0.1326179f,
  +0.2777829f, +0.0849361f, +0.0175851f, -0.0799978f, -0.0640307f, +0.2908000f, +0.0737037f, -0.0888770f,
  +0.0617448f, -0.3476650f, -0.2529318f, +0.0650113f, +0.3912667f, +0.1319560f, -0.0042139f, -0.0924895f,
  +0.0308161f, +0.1468139f, +0.4095091f, +0.1341513f, -0.4931901f, -0.0297268f, +0.0955560f, +0.1371121f,
  +0.4456818f, -0.0943430f, +0.0144010f, -0.0265314f, -0.0158797f, -0.4091419f, +0.0900951f, +0.0181389f,
  +0.2541946f, +0.1011796f, +0.1387422f, -0.0875092f, +0.2393493f, +0.0251256f, +0.2268021f, -0.1127101f,
  +0.1052935f, -0.1065524f, +0.0235373f, +0.2207412f, +0.1800191f, +0.0526335f, +0.2385113f, +0.2954815f,
  +0.1699312f, +0.1136420f, +0.0377844f, +0.0044406f, +0.0564565f, +0.0708052f, -0.0058565f, +0.1381926f,
  +0.0151779f, -0.4748035f, -0.1309918f, +0.0424139f, +0.0302575f, +0.0357368f, +0.1427585f, -0.1684929f,
  +0.0415167f, +0.1395153f, +0.2894884f, +0.2078180f, -0.0262522f, +0.2321995f, -0.1793081f, -0.0281831f,
  -0.0638491f, -0.0880937f, -0.2131655f, -0.1859692f, +0.0104386f, +0.1780938f, +0.0315349f, +0.0453373f,
  -0.0547999f, -0.1674639f, +0.5084431f, +0.2452394f, +0.0546086f, -0.1324948f, +0.1449755f, +0.0867195f,
  -0.3411965f, -0.0449347f, +0.1555075f, -0.2369741f, -0.2494187f, -0.5328863f, -0.1127340f, +0.0916469f,
  +0.3651029f, +0.1420494f, -0.3069141f, +0.0548481f, +0.2272564f, -0.0218886f, +0.1144848f, -0.0879322f,
  -0.0901082f, +0.0825466f, +0.1988726f, +0.4955282f, -0.5379627f, +0.1247403f, -0.0177481f, -0.1240662f,
  -0.0626753f, +0.0384802f, +0.1965163f, -0.2263130f, +0.1719353f, -0.0347715f, +0.1791006f, +0.1289740f,
  -0.0763343f, -0.0259355f, -0.0362198f, -0.1469929f, +0.0284341f, -0.1150538f, +0.2643232f, -0.1585801f
);

const float biases[4] = float[4](
  -0.0027320f, +0.0085199f, +0.0154026f, -0.0550178f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer60 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0505832f, -0.0955642f, -0.0545346f, -0.2058163f, +0.1127506f, +0.2804005f, +0.1499584f, +0.2742281f,
  -0.1699214f, +0.4982538f, -0.0696015f, -0.0415154f, +0.0411128f, +0.2989755f, -0.1991948f, +0.2040278f,
  +0.1212551f, +0.0774135f, +0.0024618f, -0.0797180f, +0.1587067f, -0.1489523f, +0.0745322f, -0.0610330f,
  -0.6095541f, +0.1256962f, +0.1701181f, -0.2015742f, -0.1530868f, +0.0761754f, -0.0113845f, -0.0160397f,
  -0.1413146f, -0.0829824f, -0.1620664f, +0.3749426f, -0.0287447f, -0.2250288f, -0.4190868f, -0.1002668f,
  +0.2728076f, +0.3480739f, +0.0974295f, +0.2078959f, -0.1868574f, -0.0892144f, +0.0121002f, -0.0770911f,
  -0.3692855f, +0.0893800f, -0.0136262f, -0.3645869f, -0.2152363f, +0.0437896f, -0.1922417f, +0.0512733f,
  -0.1037624f, -0.1319273f, +0.0201994f, +0.0466725f, -0.3231167f, +0.0082840f, -0.0845359f, +0.0327368f,
  +0.1989381f, -0.0255460f, -0.1250098f, +0.0656632f, +0.0715480f, -0.1536100f, +0.1335942f, +0.3912012f,
  +0.3609294f, -0.1135857f, -0.0036775f, +0.1228672f, +0.0350184f, +0.1119137f, -0.1760501f, -0.1332373f,
  +0.1177552f, -0.0235030f, -0.4422560f, +0.0647066f, +0.0528502f, -0.0177581f, -0.0431867f, +0.2267748f,
  -0.0805191f, +0.0756999f, +0.2721792f, +0.1268144f, +0.0541256f, +0.1298425f, +0.2722706f, -0.1666710f,
  +0.3345628f, +0.1571398f, +0.0450216f, +0.3144896f, -0.0827191f, +0.0406906f, +0.3151497f, -0.1272198f,
  -0.0569704f, -0.1418957f, -0.1977578f, -0.5672863f, +0.4686071f, +0.5205302f, -0.1064669f, +0.1458495f,
  -0.0431598f, -0.0297788f, +0.1470945f, +0.2709897f, -0.0436608f, +0.0427640f, +0.0266849f, -0.1262601f,
  +0.0113302f, +0.1494762f, +0.0436862f, +0.2970841f, +0.0569638f, -0.3026947f, +0.2135088f, -0.1553549f,
  -0.1937969f, +0.1191701f, +0.1597756f, +0.0482077f, +0.0226634f, +0.3445827f, -0.0513850f, -0.0307728f,
  -0.1347067f, +0.1428780f, +0.0840214f, -0.1268333f, +0.0500284f, +0.2054583f, -0.1123876f, +0.0135945f,
  -0.1461923f, +0.2213487f, -0.1568367f, -0.0626806f, +0.0490075f, +0.2620843f, +0.1978028f, -0.0169511f,
  +0.1099185f, -0.1953188f, +0.2773811f, +0.0733339f, -0.1035682f, +0.1801745f, -0.0104343f, +0.2097991f,
  +0.1156309f, -0.1651180f, -0.1643278f, +0.0347289f, +0.2699051f, -0.2495041f, -0.2536329f, +0.1255215f,
  -0.3042478f, -0.0181715f, -0.2914197f, -0.0886724f, +0.2972674f, +0.3755458f, -0.2394135f, +0.0412423f,
  -0.0297328f, -0.1817647f, +0.0458218f, +0.0490423f, +0.0454358f, -0.2584733f, -0.3446175f, -0.0397143f,
  +0.0857664f, -0.0773556f, +0.2184725f, -0.0316126f, -0.0330412f, +0.0290798f, +0.2451355f, +0.2045579f,
  -0.0790759f, +0.2272438f, +0.0260066f, -0.1301158f, +0.2514938f, +0.1246296f, +0.0039601f, +0.0200616f,
  -0.1911764f, -0.1542393f, +0.0866392f, +0.1781621f, -0.0640526f, +0.2156351f, +0.1242020f, +0.0491200f,
  +0.2030593f, -0.1595125f, -0.0504326f, -0.1241860f, -0.2226809f, -0.0597233f, +0.1502469f, +0.2148184f,
  -0.2179392f, -0.0931508f, -0.1485530f, +0.2257735f, +0.0316977f, -0.2338143f, +0.1405818f, -0.0143872f,
  +0.0031225f, +0.1345081f, +0.3658703f, -0.0931485f, -0.0569540f, +0.1544792f, +0.2322305f, -0.0607132f,
  -0.1901428f, +0.0277463f, -0.1210212f, -0.0939326f, -0.0410915f, +0.1401661f, -0.0216193f, -0.0659247f,
  +0.1402748f, +0.3533173f, -0.0584826f, +0.5085592f, +0.1653056f, -0.0514275f, -0.1180317f, -0.0793844f,
  -0.1219632f, +0.1136419f, +0.4088171f, -0.0298799f, -0.3623573f, +0.0015082f, -0.0139117f, -0.0696355f,
  -0.1100475f, +0.0570419f, -0.2326680f, -0.0928176f, -0.0417861f, +0.2511948f, +0.0991797f, -0.0363589f,
  +0.0635180f, -0.0701614f, +0.0835544f, +0.1842493f, -0.0438097f, -0.3804850f, -0.1741183f, -0.1254317f,
  +0.3006052f, +0.1123835f, -0.0047517f, -0.1134835f, -0.1042317f, -0.0281928f, +0.0173296f, -0.1970283f,
  +0.0597859f, +0.1912314f, -0.0580250f, -0.2773049f, +0.1246416f, +0.4135438f, -0.0003213f, -0.1116298f
);

const float biases[4] = float[4](
  +0.0362918f, +0.0271661f, -0.0227841f, +0.0133694f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer61 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1438468f, +0.1223162f, +0.2458073f, -0.1060730f, -0.1350298f, +0.1591539f, +0.1388601f, -0.1260431f,
  -0.2297947f, +0.3680952f, +0.3359638f, -0.0771809f, +0.2046787f, +0.0877550f, +0.0249550f, +0.0104653f,
  -0.0772008f, -0.1458480f, -0.2875795f, +0.1643184f, +0.1829715f, -0.1127590f, -0.1056843f, +0.1431081f,
  -0.1388351f, -0.0364460f, -0.0708263f, -0.2361284f, +0.1354159f, +0.1506607f, +0.0447309f, -0.1200061f,
  -0.4547539f, -0.2478642f, -0.2746559f, -0.0390918f, +0.4163524f, +0.1842717f, -0.2139381f, +0.1312711f,
  +0.1066151f, -0.0498155f, -0.2824945f, -0.2992172f, -0.0227171f, +0.0679384f, -0.0373483f, +0.0090624f,
  -0.0843950f, -0.0519001f, -0.0044357f, -0.0522067f, +0.0655443f, +0.1889696f, +0.1055252f, +0.0888414f,
  +0.0761690f, +0.2419719f, +0.1215704f, -0.0300198f, +0.0081668f, -0.2688496f, +0.1687676f, +0.0496206f,
  -0.0864949f, +0.2190794f, +0.3652686f, +0.2771281f, -0.0531813f, -0.0057496f, +0.0472694f, -0.0198474f,
  -0.0873746f, +0.0438352f, -0.1202571f, +0.1120253f, -0.1382758f, -0.2349350f, +0.0488063f, -0.1813491f,
  +0.4094940f, -0.1187138f, +0.3755083f, -0.2750339f, -0.2113128f, -0.2597281f, +0.2091154f, -0.0072255f,
  -0.0345094f, +0.0346730f, -0.0927761f, +0.0504290f, +0.3319298f, -0.0680332f, -0.2669582f, +0.0090391f,
  -0.4924396f, -0.3376021f, +0.1684734f, +0.1901777f, -0.0731200f, -0.0307543f, -0.0253969f, -0.2445190f,
  -0.2034740f, +0.5206814f, -0.4750772f, -0.6065984f, +0.5470692f, -0.2082717f, +0.0172928f, -0.1945717f,
  +0.2629327f, +0.0395772f, -0.2066750f, +0.0767908f, -0.0960216f, -0.0872313f, +0.4298091f, +0.0927322f,
  -0.1832853f, -0.0761890f, +0.1249710f, +0.1316672f, -0.2086111f, -0.0614856f, +0.0841374f, +0.0539261f,
  -0.1723434f, -0.0993778f, +0.2180981f, -0.1073547f, +0.0023674f, +0.2071938f, -0.2177364f, -0.1219427f,
  +0.0113684f, -0.2873044f, -0.1480923f, -0.1151817f, +0.0382936f, +0.0159583f, +0.0135395f, -0.0899062f,
  +0.4320223f, +0.1796253f, -0.0785884f, +0.2414520f, +0.1082256f, +0.0434749f, +0.0647343f, -0.5075792f,
  -0.2401597f, -0.1557516f, +0.0087251f, -0.2669519f, +0.3340587f, +0.0263681f, -0.0123737f, +0.2279363f,
  +0.1108628f, +0.0433738f, +0.1754696f, +0.0058432f, +0.1017907f, -0.0796748f, +0.0265576f, -0.0421652f,
  +0.3553554f, +0.6666182f, -0.2570662f, -0.2719069f, +0.2766701f, +0.4103712f, +0.0998050f, -0.2226761f,
  -0.0131339f, -0.0047718f, -0.0525344f, +0.0759182f, +0.1563484f, -0.3564804f, +0.0906142f, +0.1412608f,
  -0.0266525f, -0.0662962f, -0.0906324f, -0.0067936f, -0.0022643f, +0.0157630f, -0.0486225f, +0.0681895f,
  +0.2762970f, +0.1344319f, -0.2711533f, -0.1036301f, +0.1382910f, +0.0172210f, +0.0475405f, +0.1228181f,
  -0.1497730f, +0.0608189f, +0.1616965f, +0.1386974f, +0.0884273f, +0.1203507f, +0.1069334f, -0.1531410f,
  -0.0849960f, -0.0214199f, -0.0578787f, +0.0137472f, +0.0155087f, -0.0573823f, +0.0135484f, -0.0443420f,
  +0.0813344f, -0.0804999f, -0.3466872f, -0.1399970f, -0.0937902f, +0.0908546f, -0.0280853f, +0.1104667f,
  +0.1040848f, -0.0340782f, -0.0704129f, +0.3544580f, -0.0831636f, -0.1091535f, -0.1334943f, -0.0130686f,
  +0.0984440f, +0.0208533f, -0.3264374f, +0.0923776f, -0.1981167f, +0.0341020f, -0.3152378f, +0.4053157f,
  +0.3501315f, +0.1335644f, -0.0413134f, +0.2965887f, -0.1294467f, -0.1886906f, -0.3475527f, -0.0371970f,
  +0.1097818f, +0.2734611f, -0.1064393f, +0.0370465f, -0.4972591f, -0.5057221f, +0.1419383f, -0.0281161f,
  +0.1772703f, -0.0720545f, -0.2543774f, +0.0082916f, -0.0351809f, -0.1031197f, -0.0888614f, -0.2852161f,
  +0.3973961f, +0.1300216f, -0.0306291f, -0.5265237f, -0.0637306f, -0.1861651f, -0.2160581f, +0.2032504f,
  +0.3015254f, +0.4157043f, -0.0127736f, -0.1901243f, -0.1400968f, +0.0942500f, -0.2024559f, -0.2477368f,
  +0.3283527f, +0.2110384f, -0.2522685f, +0.1372152f, +0.1157885f, -0.0360195f, +0.2980065f, -0.0296328f
);

const float biases[4] = float[4](
  +0.0235611f, +0.0580143f, +0.0254135f, -0.0795052f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer61 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0278355f, -0.0156272f, +0.0829976f, -0.2219004f, -0.2231694f, -0.1936239f, -0.1216691f, +0.0065600f,
  -0.0573732f, +0.1226077f, +0.1118819f, -0.0026794f, -0.0721092f, -0.1310095f, -0.0460129f, +0.0286029f,
  +0.0745757f, +0.0379898f, -0.3004366f, +0.1472343f, -0.2140104f, -0.0288689f, -0.3216798f, +0.2416944f,
  -0.0717578f, +0.0458494f, +0.4087736f, -0.0890000f, +0.1760837f, -0.0180046f, -0.1112732f, -0.4044418f,
  -0.4757814f, -0.0537162f, +0.2155916f, +0.0878352f, -0.1616164f, -0.1648257f, -0.0896880f, +0.2415659f,
  -0.1389442f, +0.1856186f, -0.3617299f, +0.5978938f, -0.0548144f, -0.1288928f, +0.0310352f, +0.0976210f,
  +0.1630053f, -0.0651809f, +0.0745059f, -0.1189647f, -0.4613753f, -0.3806330f, -0.2339983f, +0.0072640f,
  +0.2496153f, +0.0044820f, -0.0351415f, +0.2038303f, -0.0328141f, -0.1633640f, +0.1028039f, +0.2074766f,
  +0.0383042f, -0.0982273f, -0.4307494f, +0.0302689f, -0.4410541f, +0.1031503f, +0.0881307f, -0.1990156f,
  -0.1367933f, -0.0674022f, +0.2561179f, -0.1837911f, -0.2519996f, -0.0304434f, +0.0442198f, -0.3112842f,
  +0.0660859f, +0.0442881f, -0.4138122f, +0.8280918f, -0.1219968f, -0.2021902f, +0.0547370f, +0.2436248f,
  -0.1168834f, -0.0035198f, -0.1965222f, -0.0498867f, -0.1566705f, +0.0196137f, -0.0051058f, +0.0271463f,
  -0.2757934f, -0.2038300f, +0.3523058f, -0.0347356f, -0.2462209f, -0.3318449f, -0.0232197f, -0.4587088f,
  -0.1553561f, -0.2920904f, -0.0749812f, +0.0501061f, -0.3930814f, -0.0076886f, +0.0761456f, +0.5472654f,
  -0.0247801f, +0.3383587f, +0.0749322f, -0.0214780f, +0.0299505f, +0.0144566f, +0.0834697f, -0.1943444f,
  -0.1798922f, -0.2444631f, +0.1358774f, +0.0870295f, -0.1185330f, +0.0050267f, -0.0094257f, -0.0465036f,
  +0.0670794f, -0.2379023f, +0.0013631f, +0.0963285f, -0.1236484f, -0.2114988f, -0.0313623f, +0.1243858f,
  -0.1025614f, +0.0568444f, +0.1408681f, -0.1341426f, -0.0893656f, -0.0261329f, -0.2717212f, +0.0277610f,
  +0.1618311f, +0.0201789f, +0.4232164f, -0.1656025f, +0.0700785f, +0.2332964f, -0.2095483f, +0.1181990f,
  -0.1426280f, +0.1393284f, -0.1944976f, -0.1366391f, +0.0898035f, +0.0466260f, -0.2293803f, +0.0296762f,
  +0.0007548f, +0.0320131f, -0.0487122f, +0.0102931f, -0.1586144f, +0.0769141f, +0.0753624f, +0.0786552f,
  +0.0362443f, +0.2733715f, +0.1100696f, +0.9247366f, +0.2499676f, -0.3602673f, +0.4974736f, +0.1346078f,
  +0.1166942f, -0.0509016f, +0.6700742f, +0.6970534f, +0.1679884f, +0.0866700f, +0.4244304f, +0.1893634f,
  +0.0286146f, -0.0676255f, +0.0726903f, +0.0998494f, +0.2429873f, +0.0600106f, -0.0173772f, -0.0858087f,
  -0.0763552f, -0.1384837f, -0.1277318f, -0.2540228f, -0.1896171f, +0.0537745f, -0.4780813f, -0.0552223f,
  +0.1221239f, -0.0774906f, -0.2143019f, -0.2228537f, +0.1612488f, +0.0207403f, -0.3213680f, +0.0780132f,
  +0.1856849f, +0.0792234f, +0.1127073f, +0.1031422f, -0.0622750f, -0.1434385f, -0.1231773f, +0.1107931f,
  +0.0852610f, -0.1337341f, +0.0634835f, -0.2786624f, -0.0340311f, +0.3407836f, +0.0034820f, +0.0343982f,
  -0.1182046f, +0.0919102f, -0.3334100f, +0.2416803f, +0.0910530f, -0.0257940f, -0.2917005f, +0.0616252f,
  +0.0098067f, +0.0958038f, -0.1809086f, +0.2096936f, -0.0777609f, -0.0542005f, +0.1691271f, +0.1186309f,
  -0.3188157f, -0.6286510f, -0.0185546f, -0.0498643f, -0.1747393f, +0.0133361f, +0.3785847f, +0.1862157f,
  -0.0254014f, +0.3382983f, -0.1536267f, -0.3463988f, -0.0067645f, -0.2505772f, +0.1602630f, -0.0190098f,
  -0.1447166f, -0.0270132f, -0.0422308f, +0.1271835f, +0.1562154f, +0.0707483f, +0.0516415f, +0.0925599f,
  +0.1283280f, -0.2864054f, -0.1290864f, -0.0209548f, +0.1619487f, -0.0258751f, +0.0556485f, +0.1521872f,
  -0.2282204f, -0.1605998f, +0.0185859f, +0.0251828f, -0.0472281f, -0.0664756f, +0.0094760f, -0.2300340f,
  -0.0450216f, -0.0780209f, -0.1468003f, -0.1511446f, +0.0429333f, -0.0173202f, +0.1323314f, -0.0025624f
);

const float biases[4] = float[4](
  -0.1487674f, -0.0234222f, -0.0442909f, +0.0593329f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer62 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0577986f, +0.1163300f, +0.0252452f, -0.0982448f, +0.0837563f, -0.1983432f, +0.0403976f, +0.1747066f,
  +0.1584487f, -0.0447606f, +0.0262333f, +0.0832545f, -0.1300618f, -0.3219200f, +0.3685659f, -0.0446071f,
  +0.2992773f, +0.0717696f, -0.2383189f, +0.0232300f, +0.1315792f, -0.1682024f, +0.1751884f, -0.0604909f,
  -0.0424252f, -0.1371411f, -0.0807767f, -0.1855984f, +0.1537722f, +0.0589841f, -0.0949140f, -0.0278209f,
  +0.0643920f, -0.2781557f, -0.1725354f, -0.1170232f, +0.2448993f, -0.3508732f, -0.0041771f, +0.0116432f,
  +0.0134680f, +0.2277519f, -0.5963955f, +0.0805015f, +0.3725286f, -0.2669163f, -0.3313018f, +0.4019399f,
  -0.0122577f, -0.1262229f, -0.0230498f, +0.1875434f, +0.1262055f, +0.0817909f, -0.1705198f, -0.1130805f,
  +0.0836037f, +0.0282639f, +0.4173689f, -0.0384223f, -0.0955518f, +0.1754181f, +0.1312335f, +0.0323692f,
  -0.0776385f, +0.0219478f, -0.1899716f, +0.3154015f, -0.0317184f, -0.0335893f, -0.4000151f, -0.1854632f,
  -0.1186402f, +0.0402463f, -0.0448950f, -0.1984232f, +0.0597064f, -0.1669607f, -0.0226602f, +0.1720255f,
  -0.0846525f, -0.1304970f, -0.2397752f, -0.3581603f, -0.1185075f, -0.5017875f, -0.2646170f, +0.1608581f,
  -0.0197010f, +0.0340372f, -0.0463919f, +0.0435837f, +0.2397212f, -0.1113501f, -0.4677406f, +0.0308250f,
  -0.1068040f, +0.0269492f, +0.0660186f, +0.1566473f, -0.0290769f, -0.1450390f, -0.0676076f, +0.0024680f,
  +0.3329057f, -0.2897536f, -0.1811568f, +0.0185785f, -0.1025916f, -0.3403157f, -0.2177136f, -0.0953962f,
  +0.2368501f, +0.2763483f, -0.4739605f, +0.0287817f, -0.1239386f, -0.4294402f, +0.8764989f, +0.0248102f,
  +0.1568741f, -0.0357053f, -0.0228155f, +0.0893956f, +0.3355084f, -0.0698771f, +0.0028486f, -0.0065668f,
  -0.0900712f, +0.0980289f, -0.0815423f, +0.0326878f, -0.0991654f, -0.1203705f, +0.0622328f, +0.0993466f,
  -0.0685051f, -0.0157784f, -0.2078332f, +0.0830219f, +0.3119403f, -0.1197339f, +0.0252171f, +0.0899927f,
  -0.0327448f, +0.0976290f, +0.0497395f, +0.3121770f, +0.2152366f, +0.0967485f, +0.2366434f, +0.1709403f,
  -0.1311207f, -0.1921471f, -0.0236564f, +0.1783144f, +0.3622646f, -0.0884693f, -0.1961321f, +0.0866491f,
  -0.0993753f, -0.0922937f, +0.1223378f, +0.2825288f, -0.0161722f, +0.1366733f, -0.0472071f, -0.0326784f,
  -0.0719811f, +0.1088205f, -0.0050986f, +0.2013143f, +0.0334188f, +0.0628989f, +0.0988944f, -0.0295622f,
  -0.2822249f, +0.4015698f, +0.1339856f, +0.2976951f, -0.3502058f, +0.2974887f, -0.1801799f, +0.3884097f,
  -0.2442103f, -0.3251291f, +0.1306617f, +0.0720667f, -0.6236283f, +0.0947769f, -0.5797662f, -0.0671407f,
  +0.2735144f, +0.0343220f, -0.1057748f, +0.2409988f, -0.2343942f, -0.0579261f, -0.0414825f, +0.0464859f,
  -0.4000811f, -0.3603795f, -0.0416110f, -0.1208457f, -0.0449611f, +0.0630682f, -0.4419500f, +0.3124655f,
  -0.3290674f, +0.0484698f, +0.2173239f, +0.3438700f, -0.1597948f, +0.1971148f, +0.2160911f, +0.0410682f,
  -0.1041866f, -0.0318050f, -0.0322476f, -0.2318306f, +0.4139311f, +0.2145747f, -0.1038766f, +0.0407664f,
  -0.1038146f, +0.0577790f, -0.0813068f, +0.3587976f, +0.1046189f, +0.2983838f, +0.1294391f, +0.1879867f,
  -0.1842492f, -0.0587125f, -0.1570269f, +0.1439475f, +0.0672860f, +0.4031524f, +0.0770236f, +0.0611667f,
  +0.1831875f, -0.0030971f, +0.0944427f, -0.2169260f, +0.0727815f, +0.0485728f, -0.0547532f, -0.0718944f,
  +0.0801484f, +0.0736465f, -0.1914434f, -0.0720290f, +0.1053748f, -0.2835197f, +0.0610536f, +0.0646650f,
  -0.0564273f, -0.2334704f, +0.2213501f, -0.3609396f, +0.4691005f, +0.1865181f, -0.0537256f, +0.1659530f,
  +0.0482868f, -0.1229034f, -0.0647122f, +0.0468336f, +0.3574919f, +0.0924833f, +0.0763625f, -0.2639487f,
  -0.0189548f, +0.0785264f, +0.2701184f, -0.0433644f, -0.0961615f, -0.1095885f, +0.1750749f, -0.1511473f,
  +0.0552510f, -0.0362462f, -0.1126674f, -0.0485836f, -0.0676508f, -0.1258391f, -0.2300513f, +0.0944873f
);

const float biases[4] = float[4](
  -0.0166116f, -0.0112231f, +0.0203733f, -0.0360201f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer62 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0254926f, -0.1595545f, +0.0950047f, -0.2814997f, -0.0876488f, +0.1726860f, -0.2023361f, +0.0212538f,
  -0.1946152f, -0.0470618f, -0.0075984f, -0.1055302f, +0.0423012f, +0.2299535f, +0.2922903f, +0.0817663f,
  +0.0975809f, +0.0787415f, -0.2047451f, -0.1207093f, +0.1110279f, +0.1719191f, -0.0038072f, +0.0361640f,
  -0.1229052f, +0.0473326f, +0.0010619f, -0.1422973f, -0.1268828f, -0.5249221f, -0.0658427f, -0.2674019f,
  -0.0657947f, -0.8286421f, -0.0512813f, +0.1428827f, +0.3928195f, -0.1411289f, -0.7759192f, -0.1163538f,
  -0.0083206f, +0.1487093f, +0.3037355f, +0.0102189f, -0.3289787f, -0.0507683f, +0.0797114f, +0.3442012f,
  -0.1163833f, -0.1997090f, +0.0233250f, -0.1696249f, -0.0357013f, -0.4399738f, +0.0275820f, +0.1546121f,
  -0.1309461f, +0.1772935f, -0.2680855f, -0.2254848f, -0.0455427f, -0.2178679f, -0.0282936f, +0.3322554f,
  -0.1354996f, -0.0136702f, +0.0338731f, +0.0411180f, -0.3415458f, -0.1483990f, -0.2602055f, +0.0487786f,
  +0.0726875f, +0.0837748f, +0.0322503f, +0.0186165f, -0.3004891f, -0.1396572f, -0.0406253f, +0.0468484f,
  +0.0594167f, +0.0119384f, +0.0738254f, -0.4100255f, +0.0437883f, -0.1572358f, +0.0829529f, +0.1375741f,
  -0.1046362f, +0.1307901f, -0.0148323f, -0.1837790f, -0.0492333f, -0.2776699f, +0.0433537f, -0.1876076f,
  +0.0040037f, +0.1805706f, -0.1061528f, -0.1905907f, -0.1411551f, +0.1726443f, -0.1721429f, -0.0343748f,
  -0.3526044f, +0.1241884f, +0.0215940f, +0.1161672f, +0.5515646f, -0.1171425f, -0.2676483f, +0.4073941f,
  -0.0877765f, +0.5270901f, -0.5788118f, -0.2327795f, +0.0463660f, -0.0316542f, -0.4515458f, -0.0149759f,
  +0.1565350f, +0.1945109f, +0.0072188f, +0.1153615f, -0.2276550f, +0.1828886f, +0.1263208f, +0.0872919f,
  +0.0407206f, +0.3268148f, +0.2452629f, +0.4539860f, +0.2770480f, +0.3839845f, +0.0380337f, -0.1814645f,
  +0.0393688f, +0.1210878f, +0.2566814f, +0.2248775f, +0.1379939f, +0.6167384f, +0.2085765f, -0.3403686f,
  -0.1165247f, -0.1107277f, +0.1318431f, -0.3809194f, -0.4482801f, +0.2237613f, +0.0592922f, +0.0008192f,
  +0.1860775f, +0.0531218f, -0.0279051f, +0.1269127f, -0.2718582f, +0.3239963f, -0.1229917f, -0.0057789f,
  -0.0271673f, -0.0195117f, -0.0159772f, +0.0942933f, +0.0793290f, +0.1072578f, -0.1354037f, -0.0772048f,
  +0.1834359f, -0.3322161f, +0.0582213f, -0.1783469f, -0.0062072f, +0.0259523f, -0.0624013f, -0.0469553f,
  +0.0264836f, -0.0059076f, +0.0652761f, +0.1704801f, -0.0571345f, +0.0958874f, +0.2626809f, -0.0814738f,
  -0.0132057f, +0.0183753f, +0.3322893f, -0.0759270f, +0.1484351f, +0.2639678f, +0.3167022f, -0.2035964f,
  +0.1341731f, +0.1483808f, +0.1336888f, +0.2021156f, -0.0896331f, -0.1286408f, -0.0072728f, +0.0449223f,
  -0.0538746f, +0.0173070f, +0.1392951f, +0.0450641f, -0.2765933f, +0.1184727f, -0.0008547f, +0.0597862f,
  +0.0547896f, -0.1978603f, +0.1705500f, -0.4553244f, +0.2486500f, +0.1987086f, -0.0732889f, -0.2372240f,
  -0.0828288f, +0.0071696f, +0.0172547f, -0.0154648f, -0.0985971f, +0.1966676f, +0.0585680f, -0.0656878f,
  +0.0271762f, -0.0567123f, +0.1768366f, +0.2193141f, -0.2748204f, +0.2376035f, -0.1417077f, +0.1676261f,
  -0.0308906f, +0.0031979f, -0.0426481f, +0.1693975f, -0.2011344f, +0.0216084f, -0.1472987f, -0.0270422f,
  +0.0640524f, +0.0736345f, -0.0892145f, +0.4312069f, -0.0278887f, +0.0770065f, -0.0422717f, -0.0795474f,
  -0.5616569f, +0.0003519f, +0.0550691f, +0.0088889f, +0.1487308f, +0.2220726f, +0.0786497f, +0.1171394f,
  -0.1442609f, +0.3371727f, +0.2574954f, +0.1090431f, +0.2464785f, +0.0536936f, -0.0322990f, +0.0659302f,
  -0.0797600f, +0.0430361f, -0.0290021f, -0.3458042f, -0.1821614f, +0.0360367f, -0.0012650f, -0.0377898f,
  +0.0052344f, +0.2618921f, +0.0892968f, +0.0650309f, +0.1025402f, +0.0672377f, +0.1265828f, -0.1671713f,
  +0.3441925f, +0.1048060f, +0.2183131f, -0.0434003f, +0.1043014f, +0.3039109f, +0.0096154f, -0.0814451f
);

const float biases[4] = float[4](
  +0.0195962f, +0.0316336f, -0.0455884f, -0.0189333f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer63 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1759122f, -0.0191893f, -0.3215929f, +0.0116226f, -0.0540446f, +0.1853335f, -0.2408815f, +0.3623680f,
  +0.0489130f, -0.0218602f, +0.0050553f, +0.1319818f, -0.2992029f, +0.1010283f, +0.1687758f, +0.2565031f,
  +0.5011610f, +0.0954912f, -0.1849816f, +0.0922879f, -0.1779666f, +0.1095527f, +0.2708364f, -0.2296421f,
  +0.3013164f, -0.0020312f, +0.0294531f, +0.0586183f, -0.2236387f, -0.0551235f, +0.2825444f, +0.0659234f,
  +0.1786097f, +0.3792690f, -0.0338086f, +0.1606256f, +0.1660478f, +0.0447668f, +0.2449174f, +0.0014151f,
  +0.5038922f, +0.5761603f, -0.3406141f, +0.1304036f, -0.2760400f, -0.1080351f, -0.2618045f, +0.2666314f,
  -0.0689825f, +0.2140545f, +0.2107923f, +0.4764170f, -0.1374746f, -0.0728925f, -0.1563348f, +0.0894894f,
  -0.0708311f, +0.0522175f, +0.1076958f, +0.4246346f, +0.0125841f, -0.0495419f, +0.0810161f, +0.0257166f,
  -0.2322110f, +0.1637862f, +0.2677526f, +0.4509788f, -0.0359713f, +0.0975280f, -0.2815034f, -0.1679155f,
  -0.2635040f, +0.2025167f, -0.1584954f, +0.0103745f, +0.0932692f, +0.1245980f, +0.2029032f, +0.1870831f,
  -0.5109634f, +0.4672055f, -0.4338186f, +0.2683758f, +0.1511021f, -0.2761146f, +0.0141684f, -0.0770988f,
  +0.0503324f, +0.4896775f, -0.2817548f, +0.5604954f, +0.2291424f, -0.2007290f, -0.2225112f, -0.0683905f,
  +0.1134178f, +0.0928694f, +0.2222335f, -0.0775426f, -0.0344631f, -0.1525895f, -0.1903650f, -0.1466833f,
  +0.5282792f, -0.3656559f, +0.1562353f, +0.2343499f, -0.1410350f, -0.0835263f, +0.0482532f, +0.0147521f,
  +0.4257858f, -0.2091213f, -0.0159688f, -0.1775689f, -0.1102311f, -0.0019620f, +0.3561337f, +0.1352804f,
  -0.1119489f, -0.1625951f, +0.0042101f, -0.0017856f, -0.2835428f, -0.1815215f, +0.0665628f, -0.0093707f,
  +0.0443926f, +0.2635642f, +0.1336087f, -0.2056271f, -0.0835526f, -0.1099224f, -0.2229118f, -0.0735264f,
  -0.0850206f, -0.1538383f, -0.0447862f, -0.0705132f, -0.0377785f, +0.0285263f, -0.1819513f, -0.0790558f,
  +0.0397374f, -0.1502257f, -0.1079198f, +0.0513040f, -0.1211075f, +0.2336897f, -0.0561677f, +0.0119123f,
  -0.1959557f, +0.0850642f, -0.0240613f, +0.0991845f, -0.2874580f, +0.3358690f, -0.0362177f, +0.0491239f,
  +0.0194536f, -0.0477837f, +0.0423145f, -0.0076169f, -0.0505411f, +0.2169529f, -0.0862563f, +0.1328420f,
  -0.3352199f, +0.5286560f, +0.3369241f, -0.1952184f, +0.1151393f, -0.4989876f, -0.1173882f, -0.3826873f,
  +0.5563096f, -0.1834170f, -0.0839768f, +0.1986272f, +0.3126107f, -0.6001967f, -0.5478849f, -0.5280652f,
  +0.4188586f, -0.2906272f, -0.0207717f, -0.0934423f, +0.1865524f, -0.0024945f, -0.0243803f, -0.1592719f,
  -0.0715802f, -0.4158327f, -0.1018990f, +0.0403399f, -0.0317024f, -0.0406732f, +0.1624623f, +0.2867087f,
  +0.1130282f, +0.3639076f, +0.2488704f, -0.1569840f, -0.3768654f, -0.2513690f, -0.0733510f, +0.2191817f,
  -0.0371926f, +0.1581154f, +0.1939531f, -0.0659719f, -0.2446976f, +0.2016748f, -0.1117991f, +0.0217227f,
  -0.0034404f, +0.2320967f, -0.1715368f, -0.2621470f, -0.0565911f, -0.2327486f, +0.0094148f, -0.1426933f,
  +0.2144686f, -0.2020054f, +0.1156948f, -0.0202788f, -0.1173391f, -0.0922354f, -0.2256862f, +0.1011295f,
  -0.2264184f, +0.2081884f, +0.2766204f, +0.0594133f, +0.0792971f, -0.3518756f, -0.1278566f, +0.1224056f,
  +0.1765065f, +0.3823893f, +0.1354210f, -0.0695648f, +0.0582363f, -0.0524215f, -0.3387424f, -0.3040655f,
  -0.0849759f, +0.1630413f, +0.2081992f, -0.3070277f, -0.2578460f, -0.1193246f, -0.1608699f, -0.1495678f,
  +0.0960765f, -0.3551513f, +0.3482253f, -0.4066359f, -0.3063280f, -0.2230348f, -0.0056366f, +0.0352563f,
  -0.0895647f, +0.1212432f, -0.2109215f, +0.1547717f, -0.2120683f, -0.1861693f, -0.3567874f, +0.2473489f,
  +0.3549632f, -0.0275275f, -0.0469071f, +0.3020652f, -0.0571859f, -0.3792016f, -0.4004686f, -0.2032763f,
  +0.2152355f, -0.2781635f, +0.3824399f, -0.3149953f, +0.3158110f, -0.2748489f, -0.0993130f, +0.0839485f
);

const float biases[4] = float[4](
  -0.0356966f, -0.0021919f, -0.0250068f, -0.0279021f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer63 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0034614f, -0.1294495f, -0.0244598f, -0.0307771f, -0.0316819f, +0.1385820f, +0.0632147f, +0.0649317f,
  +0.0069799f, -0.2259494f, -0.0320842f, +0.1837009f, -0.1640319f, -0.0629798f, +0.4437749f, -0.0415194f,
  +0.0749674f, -0.0758375f, +0.0385305f, +0.1989324f, -0.1373540f, +0.0071164f, -0.1005440f, +0.1126565f,
  +0.0024376f, +0.0255579f, +0.3717521f, -0.0242049f, +0.3008962f, -0.0914114f, -0.1089323f, -0.2021159f,
  -0.3492931f, -0.1355380f, -0.1279683f, +0.0136194f, +0.1604451f, +0.1702034f, -0.0720068f, -0.1881853f,
  +0.0206655f, -0.0421465f, -0.2066184f, -0.3482949f, +0.0512830f, +0.1623082f, +0.0253270f, -0.3342949f,
  -0.0884826f, +0.0353056f, +0.1207574f, -0.1513936f, -0.0499955f, -0.1405165f, -0.0387771f, +0.1504350f,
  +0.2630541f, -0.1452563f, +0.1873096f, +0.0900297f, +0.2650449f, -0.1141982f, -0.1436338f, +0.0729648f,
  -0.0394101f, +0.0189748f, -0.0279404f, +0.0354714f, -0.0411624f, -0.0345868f, -0.1172885f, +0.1403497f,
  +0.0070606f, -0.3485838f, +0.3333337f, +0.1816708f, -0.1189566f, -0.2533739f, -0.2040160f, -0.2719836f,
  +0.3506775f, +0.0353074f, +0.0460878f, +0.0612209f, -0.0685395f, -0.3011430f, +0.0519547f, +0.1772424f,
  +0.3134303f, +0.5181745f, +0.1517814f, +0.1168898f, -0.1459332f, -0.0469263f, +0.0548170f, -0.1822946f,
  +0.1620149f, +0.1099688f, +0.2591704f, -0.0821818f, -0.0353187f, -0.2623906f, -0.0579734f, +0.1549348f,
  +0.2340643f, +0.1634507f, -0.1506209f, +0.1512112f, +0.2467832f, +0.1586048f, -0.2095544f, -0.0913876f,
  +0.1411370f, -0.3186781f, +0.2837957f, +0.5610065f, -0.0578123f, -0.2769655f, -0.1585760f, +0.2962343f,
  +0.1039056f, -0.0687180f, -0.1126796f, -0.1301548f, +0.3165451f, -0.1343719f, -0.1690557f, +0.2450306f,
  +0.2998501f, -0.0508450f, -0.1731834f, -0.1293741f, +0.0296743f, +0.0643506f, -0.2632737f, -0.1288657f,
  -0.2395144f, -0.1706982f, +0.1312599f, -0.1128018f, -0.0547551f, -0.0556116f, -0.1743687f, -0.0127539f,
  -0.2708134f, -0.0437131f, -0.1875793f, +0.0972275f, +0.1072118f, +0.1362279f, -0.0343789f, +0.1901296f,
  -0.2152189f, +0.0967031f, -0.1987714f, +0.0959707f, +0.0574413f, +0.1105970f, -0.0014352f, -0.0029445f,
  +0.0423823f, -0.0122539f, -0.0692452f, +0.1648560f, +0.0666888f, +0.1906459f, -0.1152698f, +0.0527697f,
  -0.0384048f, +0.1261112f, +0.2468319f, -0.0949027f, +0.1979258f, -0.1219515f, -0.1230166f, -0.0890870f,
  +0.1711841f, -0.5290640f, -0.0526795f, +0.2085795f, +0.1746247f, -0.3058857f, -0.6728407f, -0.4600685f,
  -0.0585293f, -0.1090545f, -0.1535206f, -0.1483431f, +0.2157202f, -0.1378992f, -0.1001485f, -0.2207873f,
  +0.1985668f, -0.0044502f, +0.0345390f, -0.0727004f, -0.1762629f, -0.2213949f, -0.0306117f, -0.0945786f,
  +0.1674027f, +0.5287919f, -0.1373631f, -0.3602075f, -0.0792899f, -0.1836350f, +0.3269779f, +0.4890465f,
  +0.1323666f, +0.0286927f, +0.3511448f, -0.1665131f, -0.1581916f, -0.4495400f, +0.1938170f, +0.1650639f,
  +0.1093349f, -0.1313423f, -0.0627804f, +0.3655981f, -0.1631296f, -0.1415541f, +0.2267217f, +0.0859301f,
  -0.4961082f, +0.4084626f, -0.4089778f, -0.0327906f, -0.0027167f, +0.0491574f, -0.1083701f, -0.0474602f,
  +0.1174501f, -0.2423638f, +0.1302447f, -0.0259289f, +0.0350780f, +0.1234112f, +0.0652439f, +0.0731947f,
  +0.1233424f, +0.0823205f, -0.2726329f, -0.0753391f, -0.0250971f, -0.0183116f, -0.0160082f, +0.0873306f,
  -0.2650053f, -0.0823437f, +0.2068432f, +0.0908238f, -0.0652493f, +0.2116357f, -0.5190887f, +0.1860502f,
  +0.1913928f, -0.2434149f, +0.1030271f, +0.0441549f, -0.5195410f, -0.3191663f, +0.0268232f, +0.1833481f,
  +0.1118909f, +0.0502110f, +0.1177567f, -0.2173581f, +0.0776654f, +0.3556294f, -0.2100293f, -0.1509407f,
  +0.4980269f, -0.1608654f, +0.2916534f, +0.2793856f, +0.0535929f, +0.0040645f, +0.3485861f, +0.1032622f,
  -0.0672341f, +0.3545735f, +0.1851622f, -0.0833420f, -0.0089690f, +0.2576557f, -0.2397475f, -0.1110330f
);

const float biases[4] = float[4](
  +0.0511774f, +0.0041245f, +0.0107179f, -0.0456050f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer64 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.6407087f, +0.0670407f, +0.3431658f, -0.1951358f, -0.0559979f, -0.0489734f, -0.1984483f, -0.1428314f,
  +0.2258486f, +0.5501880f, +0.3257905f, -0.2838582f, -0.2369696f, -0.1870070f, -0.6143827f, -0.0023783f,
  +0.0395631f, +0.0957176f, -0.2407328f, -0.4602567f, -0.0120874f, -0.0087526f, -0.2900580f, +0.1754223f,
  -0.0038631f, -0.1626727f, +0.0105037f, +0.0423325f, +0.0168328f, -0.3137321f, -0.2114989f, -0.1915051f,
  -0.1184776f, -0.2046874f, +0.2197747f, -0.1243089f, +0.0702748f, +0.0528628f, +0.0292325f, +0.2579524f,
  -0.3114575f, +0.0059644f, +0.0338689f, +0.2648884f, +0.1122961f, -0.2205974f, -0.0557768f, +0.4461578f,
  +0.2705666f, +0.1348973f, +0.0978319f, +0.2757134f, -0.1041392f, -0.0373995f, +0.0173636f, +0.0614261f,
  +0.2124177f, -0.1519519f, +0.2168538f, -0.2801112f, +0.0150663f, -0.0480568f, +0.2385227f, +0.2619079f,
  +0.0402221f, -0.0094292f, +0.1341264f, +0.4122673f, +0.0013455f, +0.3482109f, +0.0488672f, +0.0802961f,
  -0.2158015f, -0.2920026f, +0.0015441f, +0.2846611f, +0.0093813f, +0.1347940f, +0.2847472f, +0.0607606f,
  -0.1269255f, -0.0526506f, -0.0075417f, +0.0194434f, -0.1997257f, -0.0045214f, +0.5703898f, -0.3401768f,
  +0.1721885f, -0.0333682f, +0.1460419f, -0.2001033f, -0.2443167f, +0.1748171f, -0.0755781f, -0.2673025f,
  -0.1153224f, -0.0456221f, -0.3118482f, -0.1233806f, +0.1801540f, +0.0696881f, -0.0238505f, -0.0856879f,
  +0.0841210f, +0.1018517f, -0.3582046f, -0.1918622f, +0.0299302f, -0.0495625f, -0.3868651f, +0.1530175f,
  +0.2051941f, +0.1213600f, -0.0993064f, -0.3835477f, -0.0802310f, -0.3708020f, +0.0827331f, +0.0163421f,
  -0.2363579f, +0.0082755f, +0.0597211f, +0.0542374f, +0.0588475f, -0.1016022f, -0.0272560f, -0.0820059f,
  +0.0113770f, -0.0297402f, -0.1782581f, +0.0361131f, -0.1139340f, -0.0728500f, -0.1664514f, -0.0889857f,
  +0.1595394f, +0.0276244f, +0.0636175f, -0.0170426f, -0.0603751f, +0.3050444f, -0.1319039f, -0.1911353f,
  -0.2223263f, -0.1860608f, +0.2463216f, -0.1720497f, +0.1318165f, -0.4622629f, +0.2159895f, +0.1881975f,
  -0.2810704f, +0.1308944f, -0.5858539f, -0.3897167f, -0.0895969f, +0.0702329f, -0.1947673f, +0.3322998f,
  -0.1233889f, +0.0620270f, -0.2454820f, +0.2755271f, -0.3561445f, -0.0369726f, -0.0434552f, +0.2510970f,
  +0.5411221f, -0.6616952f, +0.5614023f, +0.0679234f, -0.0173860f, -0.2508165f, +0.2041365f, +0.0887495f,
  +0.2614717f, +0.1151066f, +0.9834707f, -0.6379730f, -0.1291854f, +0.0123100f, +0.3285129f, +0.0660785f,
  +0.1894852f, +0.1069451f, -0.5699371f, -0.0672670f, -0.4533736f, +0.0559369f, -0.0652180f, -0.3221853f,
  +0.4884216f, -0.3070360f, +0.4494968f, -0.1533297f, +0.0819917f, -0.3765721f, +0.0246598f, -0.0256993f,
  -0.3321413f, -0.0393740f, +0.4198630f, -0.0584732f, +0.0949061f, +0.0048228f, -0.0086656f, +0.3009723f,
  +0.1884699f, -0.1347898f, +0.0636096f, +0.2015834f, -0.1756170f, -0.3894699f, +0.0230738f, +0.1005607f,
  -0.4538784f, -0.0135594f, +0.1750009f, +0.0902510f, -0.0279301f, -0.0810597f, +0.1196740f, +0.2390607f,
  -0.3678020f, -0.0434322f, -0.3486102f, +0.0219469f, +0.0011974f, -0.0755267f, -0.4360245f, +0.4071467f,
  -0.2501635f, +0.0278883f, +0.1293956f, +0.2884229f, +0.1354972f, +0.1238427f, +0.0443596f, +0.0157475f,
  +0.0087974f, -0.1830787f, -0.3415005f, +0.3164339f, +0.3036086f, -0.1890064f, -0.3615016f, +0.0046907f,
  -0.2987220f, +0.0585754f, -0.6756420f, -0.3589102f, -0.0509220f, +0.1857038f, -0.2733629f, -0.0975714f,
  +0.0412253f, -0.0150150f, -0.0059063f, +0.4800399f, +0.0940234f, +0.3785580f, -0.2441898f, -0.0692215f,
  +0.0641901f, +0.2098696f, +0.1336971f, -0.1393680f, -0.1735864f, +0.0260993f, +0.0127283f, -0.1956327f,
  -0.0328692f, -0.1610833f, -0.1439100f, -0.1159732f, +0.1165571f, -0.1263481f, +0.1011996f, -0.0391602f,
  -0.1466504f, +0.0434256f, +0.0487906f, -0.1177761f, +0.1756863f, -0.0138416f, -0.0301613f, +0.0173643f
);

const float biases[4] = float[4](
  -0.0410051f, -0.0272409f, +0.0245207f, -0.0135894f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer64 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3168439f, +0.0776293f, +0.2714721f, -0.0337070f, +0.2262931f, +0.1773982f, +0.2399737f, +0.3319300f,
  +0.0724205f, -0.1716745f, -0.4911471f, -0.2192425f, -0.1300509f, -0.2773193f, -0.1913633f, +0.0418521f,
  -0.1553201f, -0.1278606f, +0.2575230f, +0.2963022f, +0.2578641f, -0.0062900f, +0.2989518f, -0.2220967f,
  +0.1006403f, -0.5979503f, +0.1736675f, -0.1264608f, -0.1087023f, +0.0606350f, +0.1784746f, -0.1694860f,
  -0.4544918f, -0.1057517f, +0.2749220f, +0.1694217f, +0.1459775f, -0.2768587f, +0.1313121f, +0.1227386f,
  -0.1457154f, -0.2770613f, +0.1472772f, +0.0150316f, -0.1669368f, -0.0152247f, -0.0941292f, +0.2880626f,
  +0.0323746f, -0.4451321f, +0.1464525f, -0.0213436f, +0.1560226f, +0.2143592f, -0.0429087f, -0.1244338f,
  +0.4111980f, -0.1642868f, +0.0801063f, -0.1454593f, +0.2230821f, -0.0756035f, +0.0498200f, -0.0022901f,
  +0.0934530f, -0.0294812f, -0.0779428f, +0.1914215f, +0.1082258f, +0.1178406f, +0.0213378f, +0.0349694f,
  +0.2255552f, +0.1045770f, +0.0822447f, -0.4088358f, -0.0391166f, -0.0205543f, -0.2050773f, +0.0308373f,
  +0.0569565f, +0.1209951f, -0.3897322f, +0.2675668f, -0.0207209f, +0.1969958f, +0.2332801f, -0.4911455f,
  -0.2416466f, -0.0562095f, -0.0597220f, -0.0219677f, +0.0902547f, -0.2031869f, +0.0591801f, +0.0280379f,
  +0.1646991f, +0.0019122f, +0.2809076f, -0.1945650f, -0.0574640f, +0.0575242f, +0.3029589f, +0.1792206f,
  -0.2728379f, +0.3047064f, +0.2581931f, +0.0682760f, -0.6443865f, -0.4179493f, +0.2766084f, +0.5851395f,
  +0.5542445f, -0.1301026f, -0.1675205f, -0.1864211f, +0.1653282f, -0.1941856f, +0.3745728f, +0.1218715f,
  -0.1729660f, -0.1086512f, -0.0383233f, -0.0475349f, -0.0837543f, -0.1940112f, -0.0483730f, +0.1489958f,
  -0.8335019f, -0.2412190f, +0.3570990f, +0.1560363f, +0.2895851f, +0.1026446f, -0.1861219f, -0.1670501f,
  -0.0246054f, -0.0811786f, -0.0257468f, +0.3168498f, +0.1072674f, +0.1037689f, -0.1937862f, -0.2057925f,
  -0.2084394f, +0.1700137f, -0.3189680f, -0.1597880f, +0.0148042f, +0.2765663f, +0.2801885f, +0.0229661f,
  -0.0700224f, -0.3905744f, -0.1470152f, +0.1474805f, +0.1824005f, +0.0771412f, +0.6763135f, +0.0732168f,
  -0.1864410f, -0.0893625f, +0.2830904f, +0.4476756f, +0.0552322f, +0.0259809f, +0.4416846f, -0.2114226f,
  +0.2820440f, +0.6297954f, -0.1552111f, +0.2280428f, +0.0043212f, -0.0569427f, -0.2582614f, +0.3039689f,
  -0.0384793f, +0.4973922f, -0.4714018f, +0.0720970f, -0.0611453f, +0.3346863f, -0.7028598f, -0.2564170f,
  +0.1614670f, -0.2631904f, -0.3360915f, +0.1590901f, +0.1077080f, -0.1717431f, -0.2456353f, +0.2239463f,
  -0.4183373f, +0.1223030f, +0.0999500f, -0.1136042f, -0.2498382f, -0.0278284f, +0.0755705f, +0.0906911f,
  +0.0922181f, +0.0843422f, +0.3892441f, +0.0680996f, -0.2033216f, -0.1813837f, +0.0584656f, +0.0838995f,
  -0.0618396f, +0.0278219f, -0.1235305f, -0.0743140f, -0.1937919f, -0.2555180f, +0.1005240f, -0.0092057f,
  -0.5066459f, -0.2009278f, +0.0736384f, +0.0227536f, +0.0387360f, +0.1528472f, +0.3269618f, -0.2505054f,
  -0.0998328f, -0.1084286f, -0.0832215f, +0.0192470f, +0.1297534f, -0.1424520f, +0.3265677f, +0.2114565f,
  -0.1822323f, -0.0405381f, +0.0029698f, -0.0952725f, +0.0354628f, +0.0428758f, -0.1798355f, -0.1389795f,
  -0.1104005f, +0.0063520f, -0.1939953f, +0.1561292f, +0.1960999f, -0.4436278f, -0.1305294f, +0.0778853f,
  +0.0569913f, -0.2437435f, -0.1420346f, -0.0401757f, +0.1082396f, +0.2188616f, -0.3550805f, -0.5402535f,
  +0.1847756f, -0.0108258f, +0.3989209f, +0.0011030f, +0.0586358f, -0.0761857f, +0.1523727f, -0.2828797f,
  +0.0456253f, +0.1269894f, -0.0530540f, +0.0259035f, -0.0182550f, +0.4607044f, -0.0390366f, -0.0420674f,
  -0.3670060f, +0.2937483f, -0.3424695f, -0.0226064f, +0.2372260f, -0.0233513f, -0.0468025f, +0.0790051f,
  -0.2753846f, -0.0991242f, +0.0002442f, +0.1086638f, +0.1867885f, +0.3569250f, -0.0849343f, -0.3652214f
);

const float biases[4] = float[4](
  +0.0251676f, +0.1053810f, +0.0120975f, -0.0062225f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer65 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1314889f, +0.0345437f, -0.2561961f, -0.0751289f, -0.2546595f, +0.5884585f, -0.2189301f, +0.0757071f,
  -0.2707715f, +0.1387411f, +0.2501549f, -0.0388929f, -0.0137990f, +0.2396461f, +0.0089188f, +0.0695433f,
  -0.0489729f, -0.0565301f, +0.2563898f, -0.2247603f, +0.2099203f, +0.3392927f, +0.2748075f, -0.1795157f,
  +0.0314894f, -0.2039063f, -0.0196220f, -0.1100714f, -0.1723777f, -0.0976657f, +0.2592070f, -0.2701749f,
  +0.1565443f, -0.4107001f, +0.3629256f, -0.2331577f, -0.0508239f, -0.0078434f, -0.0328404f, -0.1406444f,
  -0.0631598f, -0.3468847f, -0.3837376f, -0.1367130f, -0.2624761f, -0.1623742f, +0.1288067f, +0.0467646f,
  +0.0441064f, -0.2088484f, -0.0592720f, +0.0792179f, -0.0595521f, +0.0821324f, +0.1164773f, +0.0171305f,
  +0.1003904f, -0.5797501f, +0.1305152f, -0.0090187f, +0.0944883f, +0.2168948f, -0.0439614f, +0.1511100f,
  +0.1088372f, -0.1910629f, -0.0707658f, -0.2550316f, -0.1994455f, -0.0521582f, -0.0212309f, -0.1068153f,
  +0.0044630f, +0.0240901f, +0.0042699f, +0.0537050f, +0.1314143f, +0.2065976f, +0.0869548f, -0.1258835f,
  -0.0479825f, -0.3192798f, +0.4018784f, +0.2345546f, +0.0614723f, -0.1142017f, -0.0061226f, -0.1670003f,
  +0.0180552f, +0.0176194f, +0.0761387f, -0.1628127f, +0.2114820f, -0.0014630f, -0.0314828f, +0.2172865f,
  +0.1585925f, -0.0416940f, +0.1391034f, +0.0699466f, +0.1926585f, -0.0418407f, -0.0375682f, +0.0503600f,
  -0.0004454f, +0.0375274f, +0.0563535f, +0.1389285f, +0.0424137f, +0.2171897f, +0.0315759f, +0.0488447f,
  -0.0180600f, -0.1330931f, -0.2510833f, +0.0934058f, +0.0850032f, +0.0940125f, +0.1723558f, -0.1274566f,
  +0.1936218f, +0.1212651f, -0.0358344f, -0.0285267f, -0.1645954f, -0.0771198f, +0.1349117f, -0.1274016f,
  -0.1205070f, -0.2158249f, -0.0493820f, +0.2004963f, +0.1072472f, +0.0410274f, +0.1176618f, -0.0112124f,
  -0.0384064f, -0.3342351f, -0.0888037f, -0.0469925f, +0.3814538f, -0.0877567f, +0.1305728f, +0.1118682f,
  -0.1434148f, +0.0097539f, -0.0669438f, +0.2234724f, +0.1579484f, -0.0837333f, +0.2329876f, -0.2164958f,
  -0.1386702f, -0.0850282f, -0.1082516f, +0.1214195f, +0.1545306f, +0.2099086f, +0.0681016f, -0.0541600f,
  -0.1738473f, -0.0512491f, +0.1190080f, +0.0814357f, +0.2843485f, +0.3129891f, -0.0464671f, +0.0199749f,
  +0.2413874f, -0.4291445f, +0.0506792f, -0.1287745f, -0.0960429f, -0.3264612f, -0.0315148f, +0.1886378f,
  +0.0093335f, +0.3372323f, +0.0485639f, -0.2042961f, -0.3724226f, +0.0721795f, +0.1765789f, -0.5953460f,
  -0.0430682f, -0.0252458f, +0.0612443f, +0.3610494f, -0.6505391f, -0.1654811f, -0.3633634f, +0.3176916f,
  +0.2855401f, -0.0707427f, +0.2105480f, +0.1297461f, -0.6171083f, -0.3760651f, -0.3924482f, +0.0107553f,
  +0.2716650f, -0.1995326f, -0.0324013f, +0.3298961f, +0.0025925f, -0.5235648f, -0.0638303f, +0.3086313f,
  +0.0344031f, -0.1932808f, +0.0327437f, +0.3495912f, -0.0388783f, -0.1918521f, -0.4173352f, -0.0883904f,
  -0.3415992f, +0.0033449f, -0.0253558f, +0.0792413f, +0.1680285f, -0.2617583f, -0.1629719f, +0.1482678f,
  -0.1916409f, -0.0245393f, +0.2471602f, -0.1901434f, -0.0387181f, -0.3654429f, +0.1883125f, -0.0964718f,
  +0.2239069f, -0.3287227f, -0.1750842f, +0.1102491f, -0.3332306f, +0.0390681f, -0.1332968f, +0.0035581f,
  +0.2752951f, +0.1372533f, -0.0176649f, +0.0873208f, -0.1159166f, -0.1199080f, -0.0699257f, -0.0675026f,
  -0.1218910f, +0.0574024f, +0.0581139f, -0.0761469f, +0.3473268f, -0.1949512f, -0.1501625f, +0.0862536f,
  +0.0061791f, -0.1335186f, +0.0770225f, -0.0393086f, -0.1123645f, -0.1671801f, +0.2196843f, +0.1519478f,
  +0.1625605f, -0.0686906f, +0.3700157f, +0.1195164f, -0.3825647f, -0.2178209f, -0.0545711f, -0.0068684f,
  +0.0925856f, -0.1114908f, -0.4432123f, -0.0757312f, +0.0275410f, -0.2184022f, +0.4356559f, -0.1974280f,
  +0.0978731f, +0.0131870f, +0.1982925f, +0.0674429f, -0.0166761f, -0.2656289f, +0.1700488f, -0.1199396f
);

const float biases[4] = float[4](
  +0.0595622f, +0.0171095f, +0.0276702f, -0.0284119f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer65 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.5637532f, -0.3058245f, -0.2476182f, +0.2392640f, -0.2431458f, -0.6299152f, +0.1055906f, -0.1389952f,
  +0.5029717f, +0.1785350f, -0.3813850f, +0.2684685f, -0.3666077f, -0.8960456f, +0.1752061f, -0.3098677f,
  +0.2811819f, +0.2782987f, -0.1262193f, -0.3103341f, -0.0355268f, -0.7673475f, -0.3452653f, -0.0215828f,
  +0.0586882f, +0.0442575f, +0.3880466f, +0.2478134f, +0.0058006f, -0.3551154f, +0.0165383f, +0.0104514f,
  -0.3776487f, +0.7982128f, -0.3641714f, +0.2048409f, -0.1887657f, -0.0248738f, -0.0258139f, -0.3271563f,
  -0.1261689f, +0.2658874f, +0.1358812f, +0.4103651f, -0.0605596f, +0.0853224f, -0.1535777f, -0.0081422f,
  -0.1351951f, +0.0518782f, -0.0604482f, +0.2603958f, +0.0210190f, +0.0692137f, -0.1013880f, +0.1398566f,
  -0.0959719f, +0.0564685f, +0.1265878f, +0.0289098f, +0.0218741f, +0.0970710f, -0.0374938f, -0.2923149f,
  +0.0014016f, -0.2632260f, -0.1123836f, +0.0626201f, +0.1157587f, +0.1675946f, +0.0351053f, -0.2886527f,
  -0.1096748f, -0.0303095f, +0.3084749f, -0.2160332f, +0.0593201f, -0.0885504f, -0.0673309f, -0.0772824f,
  -0.0722831f, -0.1230025f, +0.0871477f, +0.1922575f, -0.0621779f, +0.0040945f, -0.1492094f, +0.2711199f,
  +0.0385789f, +0.0398019f, -0.2506459f, -0.1994299f, +0.1016805f, +0.0094951f, +0.1727388f, -0.1117298f,
  -0.0806308f, -0.2444961f, -0.3712716f, -0.0808068f, +0.2127731f, +0.0932532f, +0.0281613f, +0.0748000f,
  -0.3377167f, +0.3156673f, -0.0442750f, -0.1814995f, -0.4971221f, -0.2044955f, -0.2813457f, -0.1362920f,
  +0.1530016f, -0.1818949f, +0.1912366f, +0.0655024f, -0.1736632f, -0.1038048f, +0.2422359f, +0.2436280f,
  -0.1437220f, +0.1165938f, -0.0174163f, -0.0513757f, +0.1707855f, +0.0594028f, -0.1828404f, -0.1212249f,
  -0.0309148f, -0.0647330f, -0.1070192f, +0.0641046f, -0.0071695f, +0.0072973f, -0.0085266f, +0.0686823f,
  -0.1654986f, +0.0886463f, +0.1098838f, +0.0243841f, +0.2716649f, -0.1590209f, +0.1244434f, -0.0475613f,
  +0.0093909f, +0.1068259f, -0.1647420f, +0.0198406f, -0.1991429f, -0.1275998f, +0.1858018f, +0.0317661f,
  -0.1709026f, +0.3548238f, +0.0850429f, +0.2737642f, +0.2328512f, +0.2014036f, +0.0868582f, -0.2592072f,
  +0.0280050f, -0.1177788f, -0.0340283f, +0.0650224f, -0.0560903f, +0.4346376f, -0.1770918f, +0.2847051f,
  -0.0883429f, +0.3290876f, +0.1867744f, -0.1035403f, -0.3886288f, -0.1340407f, -0.2151711f, +0.1019135f,
  -0.1288871f, +0.2233265f, +0.5711865f, +0.4511255f, +0.0703503f, -0.0787621f, -0.1264545f, -0.0048516f,
  +0.3772328f, -0.3151924f, -0.0406935f, +0.1130237f, -0.0700668f, +0.0643254f, -0.2368499f, +0.1732276f,
  +0.1682832f, -0.1920592f, +0.1863475f, -0.2326380f, +0.0145242f, -0.1838912f, +0.0480467f, +0.1097078f,
  +0.2190238f, +0.1213662f, +0.0408526f, +0.1453812f, -0.0845150f, +0.0527141f, -0.1189701f, +0.0097001f,
  +0.3212313f, -0.0850383f, -0.1871962f, +0.0729885f, -0.1653415f, +0.0894630f, -0.2821069f, +0.2647559f,
  +0.0585560f, -0.1303656f, -0.0640224f, +0.0479510f, +0.1110943f, +0.1182799f, +0.0201807f, -0.0424905f,
  +0.1892016f, -0.1824804f, +0.0193795f, +0.3607888f, -0.0211133f, +0.2870111f, -0.0038878f, +0.1771716f,
  +0.1659387f, -0.0242019f, +0.2979096f, -0.1457963f, +0.0026736f, +0.1964277f, +0.0363799f, -0.0112561f,
  -0.2287141f, +0.3409336f, -0.2770289f, +0.1783211f, +0.0239641f, -0.1137955f, -0.2572118f, +0.1458484f,
  -0.1898762f, +0.3285984f, -0.4203988f, -0.0979843f, +0.1064244f, -0.2469680f, -0.0112647f, -0.2020662f,
  -0.2718120f, +0.3287172f, -0.1405251f, +0.1740168f, -0.1273960f, +0.0119743f, -0.2238204f, +0.1702987f,
  +0.0379374f, +0.0678966f, +0.0574854f, -0.1199734f, -0.0263427f, -0.1195036f, +0.1624289f, +0.0492332f,
  +0.4086309f, +0.2504560f, +0.1273189f, +0.0776910f, -0.4608269f, +0.2339159f, +0.0961789f, +0.0410279f,
  +0.1571144f, +0.0691626f, +0.4053897f, +0.4910039f, -0.4091711f, +0.0343600f, +0.0623312f, +0.1829116f
);

const float biases[4] = float[4](
  +0.0391010f, +0.0637038f, -0.0765453f, -0.0517396f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer66 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0074521f, +0.1135077f, +0.6193683f, +0.0276560f, +0.0546696f, +0.0932009f, -0.0249296f, -0.0963100f,
  -0.0933080f, +0.1128065f, +0.1168544f, -0.0806211f, +0.3115506f, +0.1153743f, +0.1336685f, -0.2461115f,
  +0.1340082f, +0.0654214f, -0.0993118f, -0.0456635f, +0.1689899f, +0.0626342f, -0.0916536f, -0.0621796f,
  +0.0199346f, +0.0421400f, -0.2770627f, -0.1359149f, -0.1910819f, -0.0705921f, +0.0776404f, -0.3799289f,
  -0.3001247f, -0.1500914f, -0.0324421f, -0.0835340f, +0.0408478f, +0.2774417f, +0.3634864f, -0.1076967f,
  -0.2511742f, -0.2016096f, +0.1627673f, +0.2045881f, -0.1236416f, +0.0778418f, +0.0221957f, -0.1712219f,
  +0.0483827f, -0.1454636f, -0.0175897f, -0.2900496f, +0.2304234f, -0.0360135f, +0.1301315f, -0.0799939f,
  +0.1068806f, +0.1100520f, +0.1719920f, +0.1343169f, +0.0138503f, +0.1515046f, +0.3474042f, +0.0004159f,
  -0.1371706f, +0.0484439f, -0.0059046f, +0.1143564f, -0.2794473f, +0.2042109f, +0.3720272f, +0.1382640f,
  -0.0049174f, +0.1631645f, +0.2738610f, -0.1129339f, -0.5250537f, +0.0404975f, +0.0722849f, +0.2418358f,
  +0.0819358f, +0.0217015f, +0.1592285f, +0.1551585f, +0.1802507f, +0.0347413f, +0.2834512f, +0.2033750f,
  -0.0260657f, +0.0263930f, +0.3135275f, -0.2203673f, -0.0775955f, +0.0098927f, +0.2591337f, +0.2249792f,
  +0.0247035f, +0.0139756f, -0.1392882f, -0.0449535f, +0.2333819f, +0.0303741f, +0.0451503f, +0.3828806f,
  +0.0475325f, -0.0894355f, -0.1487912f, +0.0575728f, -0.3189459f, -0.2176567f, +0.3217989f, +0.2876435f,
  +0.0725473f, -0.0036047f, -0.1934392f, -0.0493890f, -0.7182153f, -0.0802857f, -0.1523337f, -0.1287525f,
  +0.1136311f, -0.0065717f, -0.2653602f, -0.1794108f, +0.1281275f, +0.1168591f, -0.2659043f, +0.0279625f,
  -0.0851528f, -0.1109856f, +0.1093178f, +0.0809912f, -0.1113876f, -0.2025066f, +0.0164488f, +0.0646121f,
  +0.2063181f, -0.1009617f, +0.0738199f, -0.1716469f, +0.1919969f, -0.0628533f, -0.2939213f, +0.1604667f,
  -0.0403518f, -0.0200575f, -0.2184025f, +0.0066032f, -0.2831945f, -0.1694254f, +0.2701473f, -0.4206188f,
  -0.0985842f, -0.0256200f, +0.0337579f, +0.2634371f, -0.5277970f, +0.2404788f, -0.0902336f, -0.3706378f,
  +0.1258125f, -0.0304152f, -0.2128295f, -0.1307709f, -0.2099438f, -0.1538597f, +0.0767355f, -0.1700341f,
  +0.1953286f, -0.0899655f, -0.0716268f, +0.0759827f, +0.1340851f, +0.0906941f, +0.1136016f, -0.1834473f,
  -0.0567068f, -0.1431917f, -0.1795181f, -0.1068247f, +0.3292227f, +0.0903417f, -0.2480999f, -0.0933836f,
  -0.0761429f, -0.2887962f, +0.1295503f, +0.4146302f, +0.1455910f, +0.2143957f, -0.0505012f, -0.0290304f,
  -0.0259242f, +0.1818503f, -0.0932328f, -0.0560502f, -0.1363552f, +0.1962776f, +0.1423749f, -0.2109435f,
  -0.1686487f, -0.3557957f, +0.6114246f, -0.1924901f, +0.3419438f, -0.1304133f, -0.2203516f, +0.0440643f,
  +0.1492958f, +0.0479023f, +0.0853028f, +0.0907511f, -0.1203388f, -0.1127139f, +0.1544769f, -0.0130296f,
  +0.1319760f, +0.0009727f, +0.0555419f, -0.3790165f, +0.0627169f, +0.0136890f, -0.0949300f, +0.2930469f,
  -0.0239902f, -0.2208447f, -0.0692389f, +0.4773400f, -0.6111044f, -0.1427828f, +0.0749121f, +0.2924778f,
  -0.0100229f, -0.0940857f, -0.2767374f, -0.3631616f, -0.3199373f, +0.0148515f, +0.0305071f, -0.0360410f,
  +0.2684400f, -0.3819884f, -0.4240277f, +0.2388193f, -0.2218030f, +0.1453522f, -0.2626225f, +0.0060816f,
  +0.1805969f, -0.1528543f, +0.3022394f, +0.1616943f, -0.1911172f, +0.1657123f, -0.3219107f, +0.1327106f,
  +0.1252692f, -0.0536516f, -0.0390089f, +0.1121822f, -0.0359798f, -0.1675145f, -0.0898981f, +0.0302420f,
  +0.2510834f, -0.1096353f, -0.0942022f, +0.3678384f, +0.1761702f, +0.1074627f, -0.2525389f, +0.0515809f,
  +0.2361490f, -0.2267311f, +0.0815000f, +0.2479376f, -0.1913554f, -0.1603414f, +0.5296912f, -0.2750372f,
  +0.2609368f, -0.0026956f, -0.0386818f, -0.2745045f, -0.0660414f, -0.0156528f, -0.0284259f, +0.0078573f
);

const float biases[4] = float[4](
  -0.0245640f, -0.0082077f, +0.0051571f, +0.0411655f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer66 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0730871f, -0.0671569f, -0.2261260f, +0.0332901f, +0.0459999f, -0.2141607f, +0.1402540f, -0.1803314f,
  +0.0385352f, +0.1442734f, -0.0873517f, -0.2296342f, -0.1636259f, +0.0927788f, +0.1516219f, -0.2776458f,
  +0.1232825f, +0.1559790f, +0.4255282f, -0.0149274f, +0.1672194f, +0.0639973f, -0.0584440f, -0.0023726f,
  +0.2086045f, +0.0949428f, +0.5055107f, +0.1530804f, +0.1069058f, +0.2179103f, +0.3107333f, -0.1400925f,
  +0.0645412f, -0.0708265f, +0.1460480f, +0.0195265f, -0.0138338f, +0.3745506f, +0.1747930f, +0.0074687f,
  +0.2078263f, -0.2384946f, -0.2422283f, -0.0128477f, -0.3503333f, -0.2739835f, +0.4040534f, +0.1235837f,
  -0.1381004f, -0.0526686f, +0.2534433f, -0.0861334f, +0.0913623f, -0.0365203f, -0.0039111f, +0.1709310f,
  -0.0180800f, +0.2359380f, -0.1214360f, +0.0551473f, -0.2963741f, +0.1881152f, -0.2366794f, +0.0979946f,
  +0.1378255f, -0.0363784f, +0.0547986f, +0.0611527f, +0.0545324f, -0.0965426f, -0.0481988f, -0.0670249f,
  +0.0477761f, +0.1687811f, +0.0504700f, +0.3884610f, +0.1394119f, +0.0706837f, +0.1596358f, -0.3444100f,
  +0.0349630f, +0.0000003f, +0.0213661f, -0.1281321f, +0.3093075f, -0.0668359f, -0.2337152f, -0.2973089f,
  +0.1186265f, +0.1200813f, -0.1665745f, +0.2059716f, -0.2620719f, -0.0347164f, -0.1110986f, -0.0909191f,
  +0.0584752f, -0.2895792f, +0.2208194f, +0.1845139f, -0.2992757f, +0.0364439f, +0.1660272f, -0.0507205f,
  +0.2405456f, +0.0992867f, -0.0112572f, +0.0533012f, -0.3852767f, +0.0028053f, +0.0733509f, -0.3202073f,
  +0.0925647f, +0.1392888f, +0.3518638f, -0.0762919f, +0.3203242f, -0.2202931f, -0.2172689f, -0.1465353f,
  +0.0014732f, +0.1134526f, +0.0440583f, -0.0774309f, +0.1198982f, +0.0291600f, -0.0767826f, -0.0482730f,
  -0.1859815f, +0.1445286f, -0.1790938f, +0.3896604f, +0.0834189f, -0.2204051f, -0.1892431f, -0.3465256f,
  -0.0978281f, -0.0147264f, -0.1148173f, +0.3615327f, +0.1677818f, -0.2582003f, -0.1393233f, -0.0973949f,
  +0.0095815f, +0.0067546f, +0.3903056f, -0.4699038f, +0.1837103f, -0.1743262f, -0.2734991f, +0.2622559f,
  -0.0380758f, +0.1395643f, -0.2561985f, -0.1660759f, +0.0288895f, +0.1080426f, -0.0779899f, +0.1872492f,
  +0.0154353f, +0.0255415f, +0.1220877f, -0.0406702f, +0.3024423f, +0.1294764f, -0.2536978f, +0.0515597f,
  -0.1073148f, -0.2403516f, -0.0539103f, +0.2986373f, -0.2662317f, +0.0295992f, -0.2986930f, +0.3768458f,
  +0.2862389f, -0.2949419f, -0.1945913f, +0.0276579f, -0.3880091f, +0.3204644f, -0.1280334f, +0.1184142f,
  -0.0206605f, -0.2100206f, -0.1291255f, +0.1545911f, -0.1454326f, -0.2646901f, +0.0015138f, -0.0479376f,
  -0.2658372f, -0.1134078f, -0.1007426f, +0.3460389f, +0.0192021f, -0.1721808f, -0.2208046f, -0.1152499f,
  -0.1392262f, +0.0750595f, +0.0155012f, +0.0035520f, -0.4061076f, +0.2352097f, -0.3402989f, -0.2412641f,
  +0.1642028f, +0.1571587f, +0.2700951f, -0.1238671f, +0.0185482f, -0.0546838f, -0.0158074f, -0.1667953f,
  +0.0861233f, +0.0399863f, +0.0286961f, +0.1749448f, -0.2678780f, +0.0543736f, -0.0075524f, -0.1038680f,
  -0.1651727f, -0.1194830f, -0.1412531f, +0.1273101f, -0.3652203f, +0.1677220f, -0.3648410f, +0.5246858f,
  +0.0794623f, +0.1914937f, +0.1014023f, +0.0702730f, -0.3113856f, -0.0244877f, +0.3061428f, +0.0266609f,
  +0.1028674f, +0.2464662f, +0.1800288f, -0.0404197f, +0.1111649f, +0.1473380f, +0.0062463f, +0.3198443f,
  +0.3455981f, -0.0214069f, +0.2609480f, -0.1019566f, -0.2261768f, -0.0367734f, -0.1338547f, +0.5564352f,
  +0.3717356f, +0.1109633f, +0.0751191f, +0.2680883f, +0.0827485f, -0.1871529f, -0.1734601f, +0.1144152f,
  -0.0350780f, -0.1985382f, -0.1148937f, +0.1177541f, -0.0721845f, -0.0965220f, -0.1065775f, -0.0311437f,
  -0.0674203f, +0.1917194f, -0.2633412f, +0.4150836f, +0.1973042f, -0.1822279f, -0.0368801f, -0.2406236f,
  -0.1811246f, +0.1019173f, +0.0215708f, -0.0729186f, +0.0127629f, -0.1815561f, -0.0802021f, -0.2104914f
);

const float biases[4] = float[4](
  -0.0269296f, -0.0627338f, +0.0245780f, -0.0231648f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer67 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1827048f, +0.1920785f, -0.0784958f, +0.1509488f, +0.2101716f, -0.1213363f, +0.0186276f, -0.0611884f,
  +0.1296239f, -0.3817815f, +0.0738143f, +0.0852932f, +0.1929941f, +0.2174454f, -0.2444441f, +0.3247294f,
  +0.0430882f, +0.0266141f, -0.0752004f, -0.2038943f, -0.2929776f, -0.1454192f, +0.1365830f, +0.0548526f,
  +0.1577381f, +0.3478157f, -0.1506301f, +0.7113109f, +0.1458503f, -0.4397283f, +0.0864053f, -0.6195759f,
  -0.0258683f, -0.1945632f, +0.2897027f, -0.6400418f, -0.1368506f, +0.0971809f, -0.2971797f, +0.4037388f,
  -0.0791962f, +0.1453484f, -0.0122756f, +0.0394887f, -0.0504368f, -0.0530898f, +0.0819038f, -0.0486222f,
  +0.0035641f, +0.4420933f, +0.0576768f, +0.0991497f, -0.1401318f, -0.0329679f, +0.1562430f, -0.4416811f,
  -0.0050526f, -0.2853881f, +0.3242093f, +0.1211424f, -0.1108763f, -0.0099670f, -0.3166918f, +0.1947076f,
  -0.1115343f, +0.1153986f, +0.0162819f, -0.0326264f, +0.0023092f, +0.0644746f, -0.0590453f, +0.0373081f,
  +0.0282924f, -0.0043311f, +0.0939041f, -0.0469927f, -0.2123619f, +0.3013961f, -0.1452347f, -0.0226508f,
  -0.0441865f, -0.1217458f, +0.0237429f, -0.0102804f, +0.1030863f, +0.0177026f, -0.0148631f, +0.1462669f,
  +0.0795346f, +0.0756516f, -0.2601187f, +0.2602400f, -0.0676418f, +0.0457596f, -0.0831787f, +0.0500970f,
  -0.3481760f, +0.3941512f, -0.4056946f, -0.3383910f, +0.0105427f, +0.2952529f, +0.0712646f, +0.0186536f,
  +0.1054804f, -0.0732734f, -0.0429287f, +0.2408578f, +0.0510408f, +0.1299537f, -0.0505923f, +0.1168858f,
  -0.0508770f, +0.0465488f, -0.0464153f, -0.1796471f, -0.2147358f, -0.0716895f, -0.0222170f, +0.1534261f,
  -0.3690780f, +0.0046331f, -0.0603755f, +0.1511046f, +0.1481922f, +0.1827585f, +0.1461282f, +0.0747626f,
  +0.2547828f, -0.1405110f, -0.0591369f, +0.0301119f, +0.0646470f, -0.0100441f, +0.2024063f, -0.1736721f,
  -0.0425005f, +0.0427719f, -0.2243686f, +0.0810811f, -0.0434554f, +0.0570145f, -0.1495600f, -0.1503116f,
  -0.2613872f, +0.1169408f, +0.1084270f, +0.1109461f, +0.0261296f, +0.0633747f, -0.0797928f, -0.0693903f,
  +0.2257661f, -0.0828764f, +0.0497154f, -0.2143470f, +0.0203015f, -0.1897432f, +0.1588237f, -0.0831295f,
  +0.0674853f, -0.0198147f, -0.1646513f, -0.1521251f, +0.1078064f, -0.1062536f, -0.0874247f, +0.0560598f,
  -0.1868577f, -0.1696645f, +0.0360571f, +0.3415558f, -0.0945113f, -0.0510518f, -0.0166061f, +0.1868072f,
  +0.3901829f, +0.3800772f, -0.2445643f, -0.3177499f, +0.3234185f, +0.1310123f, +0.1045263f, -0.2057857f,
  +0.0194545f, -0.3301483f, -0.0206967f, -0.1757442f, +0.1141765f, +0.0266828f, +0.0933661f, +0.0128178f,
  -0.0079767f, +0.0627261f, +0.0231720f, -0.1107293f, +0.1700699f, -0.1570898f, +0.0850698f, +0.0084757f,
  -0.2263021f, +0.1909633f, -0.1159764f, +0.1188133f, +0.0697999f, +0.4343125f, -0.2660490f, +0.0072278f,
  +0.2804367f, -0.2808043f, -0.1724917f, -0.2293204f, -0.0507681f, -0.1555582f, +0.3230156f, +0.0333974f,
  +0.2271278f, -0.1660673f, +0.1496641f, -0.0642807f, -0.1977623f, -0.0227957f, +0.1770977f, -0.0764806f,
  -0.2768394f, +0.3934569f, +0.0544544f, +0.0107800f, -0.2235110f, -0.3895301f, +0.0577711f, -0.1585237f,
  -0.1185428f, +0.0362534f, +0.0140182f, -0.0104548f, +0.0409145f, -0.1099860f, -0.1202317f, +0.2177761f,
  -0.2778015f, +0.2117002f, +0.1995089f, +0.4660046f, -0.5055750f, -0.2790189f, +0.2089403f, -0.1091426f,
  +0.0479123f, +0.5701621f, +0.1494699f, +0.0867510f, -0.5050004f, -0.2986632f, -0.1406446f, +0.0083087f,
  +0.2690583f, -0.3262003f, -0.1501239f, -0.2641115f, +0.0024439f, -0.1356675f, -0.0852549f, -0.0476895f,
  +0.2150672f, +0.2077948f, +0.1309147f, +0.0144324f, -0.0208637f, -0.0525397f, +0.0423540f, +0.1766639f,
  -0.1270817f, +0.3968271f, -0.1488325f, +0.2009716f, -0.1640778f, -0.0649749f, -0.1617286f, +0.2793023f,
  +0.1271549f, +0.1360271f, +0.3229127f, -0.4517588f, -0.1943283f, -0.2172097f, +0.1630601f, +0.0052797f
);

const float biases[4] = float[4](
  -0.0063817f, -0.0032254f, +0.0435817f, -0.0881906f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer67 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0509931f, -0.0413838f, +0.1002401f, +0.0293884f, +0.1229682f, +0.0733064f, +0.0392049f, +0.0393553f,
  +0.2202698f, -0.0882750f, +0.1945083f, +0.0938217f, +0.0405909f, -0.0476726f, +0.2365895f, -0.2351375f,
  -0.0318050f, -0.2448823f, -0.1562180f, -0.0402121f, +0.0425261f, +0.2214072f, -0.0957704f, +0.1250333f,
  -0.2686731f, +0.2664037f, -0.4620915f, -0.0584047f, -0.1424563f, +0.0313640f, -0.1468887f, +0.1735894f,
  -0.1629756f, +0.2337316f, -0.1098253f, +0.1854354f, -0.1138948f, -0.2235244f, -0.0155370f, -0.2626027f,
  -0.2111324f, +0.1149981f, -0.2191529f, -0.1233829f, +0.0631305f, +0.1184414f, -0.1306356f, -0.1902914f,
  +0.1267208f, -0.0113639f, -0.2092654f, -0.1561622f, +0.1479090f, +0.1881526f, +0.0524782f, +0.2976558f,
  -0.0291875f, -0.0543975f, +0.0589042f, +0.0624363f, -0.1680606f, -0.3864672f, +0.5138837f, +0.1246956f,
  -0.1248895f, -0.1528681f, -0.0152402f, -0.0693601f, +0.0580872f, -0.2471538f, +0.1297139f, +0.0868190f,
  +0.4138195f, -0.3369842f, +0.1047329f, +0.0420002f, -0.3458847f, -0.3294354f, -0.1939313f, +0.0187729f,
  +0.2313734f, +0.3984536f, +0.0472974f, +0.0821444f, -0.1124589f, +0.1597855f, -0.1234195f, -0.1115366f,
  +0.0718380f, -0.0660032f, +0.0125248f, -0.1432778f, +0.0034715f, -0.0230444f, +0.1247642f, -0.0001115f,
  +0.7874919f, +0.5374123f, +0.1138328f, +0.3537671f, -0.3196838f, -0.0004873f, -0.3412512f, +0.1550438f,
  +0.1458369f, +0.4666119f, -0.0593089f, -0.1087080f, -0.0897625f, +0.1122431f, +0.1028648f, -0.0070744f,
  +0.2057840f, -0.2076437f, -0.1508396f, -0.2260161f, -0.3642934f, +0.0511860f, +0.0255733f, -0.0329942f,
  +0.2801696f, +0.2061670f, +0.0148474f, -0.1666621f, -0.3060939f, -0.2199825f, -0.4068550f, -0.0330724f,
  +0.2322960f, +0.4883641f, +0.0799469f, +0.2030207f, -0.1829052f, +0.1339148f, -0.1932729f, -0.4749445f,
  -0.1260353f, +0.0626361f, -0.0896126f, -0.1181362f, +0.0549223f, +0.0615548f, +0.0746841f, -0.0318566f,
  -0.0358669f, -0.3910173f, +0.1179045f, -0.1992564f, +0.2949064f, -0.3259772f, +0.2482996f, -0.3237282f,
  -0.1987865f, -0.0777026f, +0.2424579f, -0.0484682f, -0.0242417f, -0.1552025f, +0.0753533f, -0.2279546f,
  -0.0300667f, -0.2453258f, -0.1656989f, -0.4812992f, -0.0150203f, -0.0386163f, -0.0151640f, +0.1427019f,
  +0.1062151f, -0.0164064f, +0.1874699f, +0.0827386f, +0.0914673f, -0.1538083f, -0.3193506f, +0.1545184f,
  +0.0836434f, -0.1727151f, -0.1426516f, -0.2143861f, -0.3380317f, +0.1936997f, -0.3224527f, +0.0398790f,
  -0.0236383f, +0.1017070f, +0.3749944f, +0.2705948f, -0.0607019f, -0.5860583f, +0.0950651f, +0.1098639f,
  -0.0095894f, -0.1178049f, +0.1633563f, +0.2742929f, -0.0016198f, -0.1087637f, +0.1660918f, -0.1434073f,
  +0.2203207f, +0.0914431f, +0.4337278f, +0.2802895f, +0.3169141f, -0.4612692f, +0.0412467f, -0.1732008f,
  -0.1885307f, +0.2724383f, +0.1952748f, +0.0472519f, -0.3450657f, -0.1544451f, -0.1865447f, -0.2303989f,
  +0.1269899f, -0.0364869f, -0.0114233f, -0.0437874f, +0.0171131f, +0.0166926f, -0.0329426f, -0.1204726f,
  -0.1745043f, -0.1210877f, +0.3329506f, +0.0356610f, +0.2174641f, -0.1700758f, +0.0050959f, +0.0133724f,
  +0.2042905f, -0.0166672f, -0.0832565f, +0.1850214f, +0.1784695f, -0.0221119f, +0.1730014f, +0.0480675f,
  +0.2040940f, +0.1428999f, -0.0635143f, -0.2449142f, +0.1041144f, +0.0364688f, +0.2161636f, +0.0440781f,
  -0.1431630f, -0.0919644f, -0.1600986f, +0.0493204f, +0.3051052f, +0.1190327f, -0.0411999f, -0.2037742f,
  -0.1121522f, -0.0653813f, +0.0886988f, -0.1599757f, +0.1178766f, +0.0390829f, +0.1893774f, -0.0628695f,
  +0.1380022f, -0.0507210f, +0.1269109f, -0.1056294f, -0.0154608f, +0.0728559f, +0.0934929f, +0.0466884f,
  -0.2548722f, +0.0358041f, -0.3534758f, -0.1340765f, +0.3403311f, +0.2208502f, +0.2740811f, -0.1244004f,
  +0.1475646f, -0.1989118f, +0.0498474f, -0.0510830f, +0.0740508f, -0.0682511f, +0.0701673f, +0.1064087f
);

const float biases[4] = float[4](
  +0.0387650f, +0.0275186f, +0.0322519f, +0.0221126f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer68 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0517104f, +0.0317603f, +0.0072106f, +0.1378421f, +0.1434937f, +0.3875177f, +0.1422805f, -0.3666368f,
  -0.1286376f, -0.0523768f, -0.0060213f, -0.0547589f, +0.0822153f, -0.1375144f, -0.0339544f, -0.0774110f,
  +0.1303071f, +0.3448330f, +0.0371253f, -0.2063916f, +0.1036762f, -0.1116352f, +0.0205991f, -0.0982926f,
  +0.1098437f, +0.1475308f, +0.0919270f, +0.2998897f, +0.1747727f, +0.0587775f, +0.0416942f, +0.0839546f,
  -0.5641656f, +0.0454025f, -0.3825430f, -0.0718885f, +0.1254753f, +0.0062017f, -0.2975500f, -0.0694224f,
  +0.2315765f, +0.0059557f, -0.3409650f, -0.0553811f, +0.1406249f, -0.2140646f, -0.3183185f, -0.1724149f,
  -0.1269803f, +0.0551836f, -0.0439674f, +0.1943307f, +0.0269908f, +0.2884246f, +0.0363892f, +0.0526470f,
  -0.3138798f, +0.1408552f, -0.0569426f, +0.0850252f, -0.1591744f, +0.2357139f, -0.1331969f, -0.1379968f,
  -0.1763250f, +0.4020938f, -0.0714989f, -0.3115514f, -0.1074796f, +0.2065848f, -0.0006241f, +0.0127529f,
  -0.0079869f, +0.1341053f, +0.0499333f, +0.2839970f, -0.2169636f, -0.1173305f, -0.2925364f, +0.1824341f,
  +0.2080061f, +0.0878188f, -0.1015445f, +0.0910145f, -0.0412474f, -0.4319483f, -0.0203961f, +0.1237135f,
  +0.6956671f, -0.0286701f, -0.2964675f, -0.0928123f, +0.1981767f, +0.0244033f, -0.0604061f, +0.1219380f,
  +0.1019665f, -0.0028680f, -0.0507412f, +0.0955310f, -0.0070381f, +0.0413192f, -0.2164619f, -0.0351869f,
  -0.0665186f, +0.0100292f, -0.0703808f, -0.0451228f, -0.4002711f, -0.0123310f, +0.2753232f, +0.0136576f,
  +0.6786215f, -0.0259319f, +0.0846791f, -0.0378747f, +0.1295021f, -0.4117415f, +0.0997457f, -0.0017192f,
  +0.1483024f, -0.0994674f, +0.0379310f, +0.0700603f, +0.1012235f, -0.0514926f, +0.0454923f, +0.2727511f,
  +0.0647615f, -0.1515362f, +0.0312362f, +0.1815261f, +0.0782986f, -0.3642224f, +0.2538890f, -0.2914732f,
  +0.0197913f, -0.1385320f, -0.0020416f, +0.0078295f, -0.0058213f, +0.1679587f, +0.2820081f, +0.0446736f,
  -0.0725016f, +0.0989598f, +0.1954607f, -0.0030526f, +0.0771683f, +0.0530306f, +0.2409719f, -0.0414856f,
  +0.0247899f, -0.0771499f, +0.0411168f, +0.2255945f, +0.4169348f, +0.0037512f, -0.2516848f, -0.0107894f,
  +0.0959148f, -0.1436322f, -0.1591676f, +0.0882277f, +0.1424011f, -0.1993713f, -0.2479938f, -0.1375946f,
  +0.2495494f, -0.0517406f, -0.1189831f, -0.0431441f, +0.1291198f, +0.2290075f, -0.0069354f, +0.0776687f,
  -0.2464755f, -0.1041244f, +0.3487688f, -0.1552074f, +0.0918483f, +0.0002476f, -0.1495268f, +0.2175525f,
  +0.0924397f, -0.1322316f, -0.0218040f, -0.0325516f, +0.1929383f, +0.1010106f, +0.0478539f, +0.1264939f,
  -0.0795851f, +0.2143187f, -0.0288164f, +0.0219769f, -0.2678720f, +0.1214338f, +0.0643897f, +0.0861126f,
  +0.0598969f, -0.1772258f, -0.3532853f, +0.0155273f, -0.0307626f, +0.0140829f, -0.0416151f, -0.4070730f,
  -0.1353548f, +0.1270868f, -0.2568451f, +0.0096861f, -0.0319201f, -0.1877969f, +0.2056533f, +0.0952288f,
  -0.0583843f, +0.0025555f, +0.0685096f, +0.1866270f, +0.0460808f, +0.3042705f, +0.0810498f, -0.2244059f,
  +0.1563869f, -0.0106918f, +0.1035802f, -0.1334983f, -0.1251307f, -0.1701353f, -0.2404138f, -0.1070031f,
  -0.2724952f, -0.3448332f, +0.2160278f, +0.1026139f, -0.1634488f, +0.1059792f, -0.2481013f, +0.2794020f,
  +0.1556434f, -0.0801055f, +0.1792195f, +0.1646975f, +0.2240628f, +0.1392682f, -0.3201238f, +0.0547663f,
  -0.2513913f, -0.0863499f, +0.0094500f, +0.1360433f, +0.0505263f, +0.1324836f, +0.2780651f, -0.3065597f,
  -0.0261938f, +0.1992086f, -0.1950979f, -0.3826135f, -0.0667972f, +0.1423043f, -0.0158371f, +0.0510002f,
  -0.1128719f, -0.1783338f, +0.1585042f, -0.0310276f, +0.1760559f, -0.1715769f, +0.1624841f, +0.0787736f,
  +0.1526940f, -0.0251263f, -0.2541610f, +0.1273590f, +0.0936859f, -0.1587296f, -0.1388211f, -0.2855147f,
  -0.3743038f, +0.2948127f, -0.0600891f, +0.3223104f, +0.1008881f, -0.3241541f, +0.0650588f, -0.1309813f
);

const float biases[4] = float[4](
  -0.0077329f, +0.0002708f, +0.0151970f, +0.0009220f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer68 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0911891f, +0.0231177f, +0.0620931f, +0.2799358f, +0.1733284f, +0.4104997f, +0.1698851f, -0.0812099f,
  +0.0908569f, -0.0966014f, +0.0412086f, +0.0697925f, +0.2949155f, +0.0786020f, -0.2478793f, -0.3479856f,
  -0.4295721f, -0.2665363f, +0.0018537f, -0.0005380f, -0.1042598f, +0.0581925f, +0.0803937f, +0.1386032f,
  +0.1721132f, +0.2168858f, -0.0058296f, +0.1432191f, -0.0098508f, +0.0758861f, +0.0274429f, -0.0817292f,
  +0.0219542f, -0.2008080f, -0.4587419f, -0.1483357f, +0.0557582f, +0.1281817f, +0.1937096f, -0.3839502f,
  +0.3534998f, +0.0609772f, +0.2297040f, +0.3458888f, +0.0050723f, -0.1729585f, -0.0198862f, -0.2280300f,
  -0.0411588f, +0.0472421f, +0.0233951f, -0.3583277f, -0.0378964f, +0.0933405f, +0.0383835f, -0.0802749f,
  -0.1030343f, +0.1981185f, -0.1282391f, -0.3453389f, -0.1246401f, +0.1030266f, -0.0273383f, -0.0482945f,
  +0.0194285f, +0.0015329f, +0.0121679f, +0.1488585f, -0.0696702f, +0.4317881f, +0.0777453f, -0.1641600f,
  +0.2092594f, -0.0842803f, -0.0338855f, +0.3873430f, +0.1879293f, -0.2985458f, +0.2231177f, -0.0276955f,
  +0.3536924f, -0.1787769f, -0.4197630f, -0.0994117f, +0.2933852f, -0.4326101f, +0.2773079f, +0.0910879f,
  +0.3714745f, +0.3045453f, -0.0172816f, -0.1393108f, +0.0561677f, -0.1242453f, +0.1174415f, -0.0579975f,
  -0.0098593f, -0.1257310f, -0.3589993f, +0.1651248f, +0.1028773f, -0.1148608f, +0.4211356f, +0.3835083f,
  +0.1927544f, -0.2526770f, -0.2559822f, +0.2618949f, +0.5076712f, +0.0796598f, +0.1332639f, -0.0861104f,
  -0.3448641f, -0.0682629f, +0.1876680f, -0.1759574f, +0.1326126f, -0.2640116f, -0.0308211f, +0.0076359f,
  -0.0692751f, -0.0337374f, +0.1761610f, +0.0485755f, -0.1146182f, -0.1512368f, +0.0447058f, -0.1978426f,
  +0.4807528f, +0.0502485f, +0.2533430f, +0.2127644f, +0.2258808f, +0.0327593f, +0.1060306f, +0.1426464f,
  -0.3863073f, -0.0927835f, +0.0357543f, +0.0989185f, +0.0635089f, +0.0469449f, +0.2697278f, -0.0322763f,
  +0.0608694f, +0.2037913f, -0.0963222f, -0.2371562f, -0.1096960f, +0.1246520f, +0.2062416f, -0.1731808f,
  -0.0963701f, +0.1227389f, +0.2383045f, +0.0121197f, -0.4594979f, +0.5324891f, -0.0218399f, -0.2372184f,
  -0.1883062f, -0.0450797f, +0.0154139f, -0.0913192f, -0.2603195f, +0.1523554f, +0.2896074f, +0.1839438f,
  +0.0602673f, +0.0991807f, +0.1269637f, -0.0382394f, +0.0902671f, -0.1122913f, -0.1981061f, -0.0519702f,
  -0.0232174f, +0.1573877f, -0.2544786f, -0.1571902f, +0.1517396f, -0.0496576f, +0.1254784f, -0.0923792f,
  -0.0607495f, -0.5349797f, -0.0312024f, +0.0799211f, +0.0706656f, +0.4090564f, +0.0628740f, -0.0628379f,
  -0.0633343f, -0.0018851f, +0.1588711f, +0.0238072f, +0.0049446f, -0.0566244f, -0.0054097f, -0.1303584f,
  -0.0356824f, +0.0264578f, -0.0728215f, -0.2916919f, -0.0397012f, -0.0287124f, -0.1230062f, +0.0394823f,
  -0.2932075f, +0.0308878f, -0.0341915f, +0.0455730f, -0.1247218f, +0.0843263f, +0.0708580f, +0.0226697f,
  -0.1217730f, +0.0849082f, -0.0389406f, +0.2656965f, -0.1286516f, -0.0313411f, +0.1703801f, -0.1067316f,
  +0.0928956f, +0.0728778f, -0.0817347f, -0.1452506f, -0.0518236f, +0.4145409f, +0.1463609f, +0.0338253f,
  -0.0870642f, -0.0481786f, -0.0293825f, +0.2036862f, -0.2248253f, +0.1001124f, +0.2833440f, +0.0789482f,
  +0.0405268f, -0.1887213f, +0.0621718f, +0.2528392f, -0.0147395f, -0.0740437f, -0.0052174f, +0.0788797f,
  +0.2712511f, +0.0855964f, +0.1691579f, +0.1158297f, +0.1470676f, +0.1947909f, -0.6132464f, +0.0813949f,
  -0.1766226f, +0.2249285f, -0.0774036f, -0.0769555f, -0.1860968f, -0.1711138f, -0.0727540f, -0.0479479f,
  +0.0746283f, +0.0612811f, +0.0245589f, -0.0403786f, -0.0848310f, -0.0729496f, +0.0112834f, +0.1447392f,
  +0.2678718f, -0.0449286f, +0.1339727f, +0.2372072f, +0.3149879f, +0.2721456f, +0.0571393f, +0.3615060f,
  +0.0715643f, +0.1340414f, +0.1628467f, +0.4050636f, +0.0809322f, -0.2200896f, +0.1747366f, -0.0150783f
);

const float biases[4] = float[4](
  -0.0496089f, -0.0307736f, -0.0128165f, -0.0070875f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer69 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0045983f, +0.1076492f, -0.0315008f, -0.0532717f, +0.0699656f, -0.0385174f, -0.0797344f, -0.0543220f,
  +0.2931014f, +0.1427039f, +0.4974241f, -0.1981373f, -0.0309925f, -0.3252203f, -0.0687789f, -0.1022754f,
  -0.0065354f, -0.0091936f, -0.1350181f, -0.3241368f, +0.1440438f, +0.1127330f, -0.0956784f, +0.0226409f,
  -0.2309138f, -0.3017269f, -0.0937556f, +0.3957726f, -0.1684489f, +0.0809240f, -0.1693095f, +0.0954913f,
  +0.0477220f, +0.3380222f, -0.0978898f, -0.1493267f, -0.0895193f, -0.0855508f, +0.0441482f, +0.3108169f,
  -0.3185917f, -0.0994777f, +0.3006054f, -0.2029492f, -0.4001197f, -0.0028182f, +0.0101622f, +0.4067557f,
  -0.1795561f, +0.0098060f, -0.0103196f, -0.0617718f, +0.2073589f, -0.2099596f, +0.3033209f, -0.1309319f,
  +0.1002687f, -0.2894729f, -0.0160878f, -0.2080165f, -0.2309262f, -0.1713099f, -0.0280207f, -0.0441444f,
  +0.2526677f, -0.3495379f, -0.1231095f, +0.2005872f, -0.0279600f, -0.1871234f, +0.2455951f, -0.0817835f,
  -0.1153592f, -0.0418042f, -0.3100577f, +0.3235560f, -0.0274051f, -0.1240650f, -0.0082265f, +0.2300865f,
  -0.2195212f, +0.2293799f, -0.3890903f, +0.4682019f, -0.4096460f, +0.0666283f, +0.1378436f, +0.3583319f,
  +0.0160681f, +0.1220463f, -0.0530478f, +0.1355826f, -0.2610428f, +0.1211757f, +0.2221716f, -0.0512056f,
  +0.1061578f, +0.2671283f, -0.1790650f, -0.2615293f, -0.2369976f, +0.0965715f, +0.0194021f, -0.1196691f,
  +0.0110123f, -0.0797361f, -0.2745349f, -0.2366428f, -0.3268334f, -0.0847840f, -0.0534054f, -0.3731448f,
  +0.1056700f, -0.2735399f, -0.0074294f, -0.2823987f, +0.0530581f, +0.1018679f, -0.0280537f, -0.1512719f,
  +0.0940324f, -0.2089097f, -0.1458222f, -0.1463984f, -0.1404854f, +0.0512614f, +0.0206191f, +0.1402439f,
  -0.1071956f, +0.1002413f, +0.0428704f, -0.0937588f, -0.0259595f, -0.1755643f, +0.0439789f, +0.0405043f,
  -0.0425243f, -0.0378069f, +0.0622494f, -0.0462698f, +0.1311392f, -0.0685548f, +0.0179792f, +0.1254473f,
  -0.0205985f, -0.1695517f, -0.0911853f, +0.1767899f, +0.2033050f, +0.0677199f, -0.0329822f, +0.1931261f,
  -0.0320888f, -0.0974372f, +0.0503920f, -0.0327451f, +0.0313775f, -0.0256034f, -0.1230346f, +0.0112846f,
  +0.0355016f, -0.0472416f, -0.0943732f, -0.1852353f, +0.0253469f, +0.1407957f, -0.0557843f, +0.0414742f,
  -0.0118721f, +0.1485420f, -0.0165477f, -0.0263059f, +0.1343330f, +0.2750374f, +0.0551191f, +0.0227080f,
  +0.2104220f, -0.1635916f, -0.1059927f, +0.1733382f, -0.0659447f, -0.1485468f, +0.1456415f, +0.2366800f,
  -0.0689795f, -0.0890791f, +0.1748574f, -0.1619737f, +0.0201583f, -0.0389355f, -0.0416132f, +0.1034045f,
  +0.0282534f, -0.2320608f, -0.1292224f, -0.1241492f, +0.0024173f, +0.2263409f, +0.0422295f, -0.2619249f,
  -0.4121481f, -0.0471830f, +0.4349979f, +0.0088377f, +0.0585003f, -0.0381754f, +0.0349947f, +0.1324407f,
  -0.1751767f, +0.1790454f, -0.1735082f, -0.2255216f, +0.1864111f, +0.2552596f, -0.0138311f, -0.2330318f,
  +0.1590289f, -0.3003022f, +0.2801604f, +0.1283658f, -0.0313617f, -0.1970336f, +0.2056655f, +0.0745518f,
  +0.1145661f, -0.0155190f, +0.3704626f, +0.0196048f, -0.0743628f, -0.2678567f, -0.5962196f, +0.0908888f,
  +0.0979848f, +0.1717777f, +0.2051171f, -0.0664891f, +0.0546445f, -0.0743453f, -0.2884026f, +0.0771328f,
  +0.0025547f, -0.2063795f, +0.2305438f, -0.1487756f, -0.0866568f, -0.1045755f, -0.2618631f, +0.1486592f,
  +0.0673144f, -0.0993674f, +0.3716250f, +0.0211960f, +0.0177256f, +0.3924836f, +0.0971609f, +0.0079973f,
  -0.0135645f, +0.1740666f, -0.1818977f, -0.2259336f, -0.4373383f, -0.3364008f, -0.0384696f, -0.4345018f,
  +0.0734539f, -0.0952905f, +0.3061618f, +0.0662517f, +0.1375699f, +0.0111342f, -0.2250746f, +0.0295026f,
  +0.0908028f, -0.2155206f, -0.1884921f, -0.1341785f, +0.0463369f, -0.1092186f, +0.0607498f, +0.1776578f,
  +0.3500859f, -0.0457590f, -0.0448369f, -0.1413693f, -0.1145090f, -0.2421938f, -0.2108117f, +0.1214559f
);

const float biases[4] = float[4](
  -0.0146267f, +0.0268088f, -0.0055141f, -0.0452151f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer69 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2981348f, -0.0137526f, +0.0241094f, +0.1991552f, -0.1492040f, -0.2402979f, -0.0930151f, +0.0248049f,
  -0.0069394f, -0.1808724f, +0.2029570f, -0.2660653f, -0.0422585f, +0.2422926f, +0.2556985f, +0.1525601f,
  -0.0426025f, -0.0397471f, +0.0029797f, -0.1881849f, -0.1687299f, -0.0199574f, -0.0399961f, +0.1088919f,
  -0.1745930f, +0.0856394f, -0.0492092f, -0.1634236f, -0.0259692f, +0.3694220f, +0.1935238f, +0.4112945f,
  -0.4510818f, +0.1686449f, -0.1580056f, -0.4251473f, -0.0686827f, -0.1579384f, -0.1107752f, -0.0333324f,
  +0.2275960f, -0.0514135f, -0.2389649f, +0.1932933f, -0.0028161f, +0.2098335f, -0.1252604f, -0.1925119f,
  +0.1477407f, +0.0441833f, +0.2217546f, -0.0206596f, -0.0602538f, +0.0863631f, -0.0342135f, -0.4042614f,
  +0.0485846f, +0.1470112f, -0.2792636f, +0.2614465f, -0.1000472f, +0.1402489f, +0.1320751f, -0.3056609f,
  +0.0250776f, -0.1110783f, -0.0679894f, +0.0543336f, +0.1676413f, -0.0868155f, +0.1868618f, -0.0002796f,
  +0.3670378f, +0.1034387f, +0.2651693f, -0.2088093f, -0.0889726f, -0.2117248f, +0.3396277f, -0.1318996f,
  +0.1604233f, -0.3003342f, +0.0667968f, -0.4049919f, -0.2097093f, +0.0259980f, +0.1582005f, +0.4975835f,
  +0.0065371f, -0.1147904f, +0.2177647f, -0.0848470f, +0.0928137f, -0.0202982f, +0.1113508f, +0.0518535f,
  +0.0622036f, +0.0692754f, +0.1854989f, -0.1946257f, -0.4699571f, -0.1028085f, -0.5425480f, +0.0905518f,
  +0.0391091f, -0.3661931f, +0.1857944f, +0.1464476f, -0.0937661f, -0.1372819f, -0.3272988f, +0.1595500f,
  -0.0126314f, +0.1126846f, +0.0195000f, -0.0929329f, -0.1411017f, +0.1043680f, -0.0972199f, -0.0882520f,
  -0.1146010f, +0.0170746f, -0.0327710f, +0.0138396f, -0.0447542f, -0.0607489f, +0.0734959f, -0.0418464f,
  +0.1264041f, -0.1500882f, +0.1435278f, -0.0184210f, +0.1231078f, +0.1227165f, +0.0827696f, -0.1168316f,
  -0.0263907f, +0.0480899f, +0.1297314f, +0.1187255f, +0.0290552f, -0.0179737f, -0.1896715f, +0.1837231f,
  -0.0943678f, +0.0052283f, -0.1285910f, +0.0432054f, -0.0927405f, +0.0473778f, -0.0371233f, -0.2088715f,
  +0.4967208f, -0.3061254f, +0.2343394f, +0.4220265f, +0.0782029f, -0.3992354f, +0.3438218f, +0.1038383f,
  -0.1637721f, +0.1529890f, +0.0040652f, -0.0551663f, +0.5683988f, +0.1087062f, -0.1813282f, -0.0569927f,
  -0.1400298f, -0.3305663f, +0.1020081f, +0.0981458f, -0.1263154f, -0.0360642f, +0.1122398f, +0.1300629f,
  +0.3087334f, +0.2942588f, -0.3970790f, -0.0421577f, +0.1144775f, -0.4198644f, -0.0966164f, -0.3078291f,
  +0.1360986f, +0.0427824f, +0.5000936f, +0.2759269f, -0.1804607f, +0.3421728f, -0.0854326f, +0.2347812f,
  +0.0955109f, +0.4183781f, -0.0490008f, -0.1304495f, +0.2695235f, +0.1250392f, +0.0914607f, +0.0789979f,
  -0.2973109f, -0.0822009f, -0.0715912f, -0.0247303f, -0.6912729f, +0.1142996f, -0.3467225f, -0.0354985f,
  +0.2346338f, -0.3278811f, -0.0182625f, +0.0030226f, +0.3781473f, -0.2269798f, +0.4105463f, -0.0724908f,
  +0.1123884f, -0.4027986f, +0.2625244f, +0.2234508f, +0.0104016f, +0.0321389f, +0.3968043f, +0.1836208f,
  -0.1404085f, +0.0633717f, +0.0870834f, +0.2785342f, -0.3350266f, -0.2737974f, +0.5252073f, +0.3033136f,
  +0.0611087f, -0.1638013f, -0.0304509f, +0.2521436f, -0.2235320f, -0.1484553f, -0.0418528f, +0.2640368f,
  +0.3290537f, +0.2399486f, -0.0994747f, -0.0688173f, -0.4198460f, +0.0342991f, -0.1118929f, -0.1633523f,
  +0.4819698f, -0.3810594f, -0.4007239f, +0.3030855f, -0.0309447f, +0.1119938f, -0.0045156f, -0.4937290f,
  +0.0896848f, +0.0722270f, -0.2495469f, +0.0267944f, -0.0252034f, +0.2369554f, -0.0853893f, -0.2501855f,
  +0.0117978f, +0.0296419f, -0.0091686f, +0.0123496f, +0.1100790f, -0.0601260f, -0.1240166f, +0.1757930f,
  -0.0627367f, +0.1553252f, +0.1433414f, +0.0520715f, +0.1546689f, +0.1599860f, -0.1872177f, -0.0051641f,
  -0.1309884f, +0.0055786f, +0.0623513f, +0.0732311f, +0.0231499f, -0.0251827f, +0.0259805f, -0.0092681f
);

const float biases[4] = float[4](
  +0.0155139f, -0.0366175f, -0.0009220f, -0.0506637f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer70 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0928299f, -0.0031716f, +0.2093160f, -0.2186300f, -0.0377141f, -0.0475025f, +0.0189365f, -0.1080912f,
  -0.1282180f, +0.0506397f, -0.3174652f, -0.1320055f, +0.0169597f, -0.1446731f, -0.0136990f, +0.0508157f,
  -0.1857055f, +0.0633436f, +0.1264232f, +0.1409244f, -0.1338120f, -0.1673194f, +0.1538761f, +0.0976917f,
  +0.1658699f, +0.0453699f, -0.0133877f, +0.1454634f, +0.0256078f, +0.3115416f, -0.0549321f, -0.2452584f,
  -0.0014408f, -0.2054029f, -0.2199431f, +0.2262817f, +0.3426147f, +0.0153422f, +0.4266120f, +0.0522671f,
  +0.0670331f, -0.2092731f, +0.0930086f, +0.4434489f, +0.1171568f, -0.3258295f, +0.0163002f, -0.0432128f,
  -0.0437045f, -0.1712298f, -0.0296961f, -0.2460107f, +0.0294439f, -0.0657229f, +0.3374764f, -0.0479083f,
  -0.1267047f, -0.0817092f, +0.0251993f, +0.3526414f, +0.1488640f, +0.2861331f, +0.0616026f, -0.2637771f,
  -0.0287220f, +0.0169161f, +0.1719406f, -0.0918803f, -0.0120353f, -0.2653120f, +0.1657880f, +0.0446194f,
  +0.0749087f, -0.0544939f, +0.0041333f, +0.1176355f, +0.0440532f, -0.0791958f, -0.0044017f, +0.0711993f,
  -0.0765663f, -0.2644345f, +0.0816539f, +0.0245747f, -0.0267823f, +0.1267360f, -0.0687977f, +0.0155005f,
  -0.1256774f, -0.0988446f, +0.1130958f, +0.1161781f, +0.1711913f, +0.0905392f, -0.0053491f, +0.1538055f,
  -0.2210351f, +0.1115497f, -0.0701444f, -0.0045293f, +0.1216250f, +0.1192294f, -0.1194166f, -0.0535259f,
  -0.5821647f, +0.1701755f, +0.0227164f, -0.1499833f, -0.0568641f, +0.1173581f, +0.6151810f, +0.1357615f,
  +0.1390557f, -0.1772461f, +0.0965805f, +0.3032324f, -0.2028591f, -0.3349472f, -0.0316011f, +0.2144941f,
  +0.0164955f, -0.0294571f, +0.0250992f, +0.0410146f, -0.0182423f, -0.0116519f, +0.0533478f, +0.0858269f,
  -0.0871561f, -0.0943801f, +0.0116172f, -0.2314197f, -0.0662797f, +0.0462436f, -0.0910627f, +0.3387307f,
  -0.1106328f, +0.0751733f, +0.0658777f, +0.2833230f, +0.1311841f, -0.2053145f, -0.0876306f, -0.0994753f,
  +0.0872163f, -0.0969352f, -0.1031672f, +0.0951528f, +0.0686578f, +0.0001692f, -0.1757483f, -0.1147581f,
  +0.0412928f, +0.1922753f, -0.3910021f, +0.1583623f, +0.0758171f, +0.1493871f, -0.0193437f, -0.0861081f,
  +0.0967749f, -0.1449704f, +0.0438952f, +0.3315623f, -0.1667890f, +0.1250970f, +0.1207376f, +0.1347148f,
  -0.2252459f, +0.0869015f, -0.2913871f, +0.2833610f, -0.0104748f, +0.1291842f, -0.0897610f, -0.1355696f,
  -0.0323248f, +0.1719607f, +0.0446026f, -0.1500422f, +0.2543105f, +0.0971645f, -0.2666490f, -0.0300714f,
  +0.1461067f, +0.0847797f, -0.0916586f, +0.0354692f, +0.0924599f, +0.0713276f, -0.2199609f, +0.1455770f,
  +0.0493499f, +0.0971116f, +0.3232133f, -0.0269528f, -0.1138739f, -0.1823626f, -0.1574282f, -0.0416184f,
  -0.2419648f, +0.1931535f, -0.1070698f, -0.0404549f, -0.2482146f, +0.0378733f, +0.3648013f, -1.0516033f,
  +0.0460484f, +0.2473131f, -0.0082957f, -0.0757256f, -0.0802719f, -0.1377719f, -0.0169042f, +0.0196128f,
  -0.0711437f, +0.0412724f, -0.0431391f, +0.2128631f, -0.0367914f, +0.0007887f, +0.2196233f, -0.0859475f,
  +0.0986086f, -0.0046318f, +0.0477054f, +0.1339110f, -0.0677106f, +0.0167144f, -0.1169321f, +0.0777057f,
  +0.0129631f, -0.0436282f, +0.0317655f, +0.1460788f, -0.0479910f, +0.1357425f, -0.0354869f, -0.0846167f,
  +0.0009239f, +0.0587420f, +0.1231206f, -0.0107767f, -0.2247463f, +0.2063381f, -0.0368147f, -0.3438771f,
  +0.1405938f, -0.2714981f, -0.1650171f, -0.1942800f, +0.0681871f, -0.1025761f, -0.7206873f, +0.3258002f,
  -0.1086747f, +0.0531316f, -0.0981716f, +0.2367023f, +0.2471946f, +0.2144474f, +0.1429588f, -0.1352880f,
  -0.0810955f, -0.2308892f, -0.0062270f, -0.0042508f, +0.0521347f, +0.0432437f, +0.2368809f, -0.1864679f,
  +0.0073269f, -0.3666551f, +0.1928282f, +0.0865032f, +0.2889478f, +0.0043530f, +0.2862186f, +0.3841561f,
  -0.0649739f, -0.0299288f, -0.1080433f, -0.1472046f, +0.0983152f, -0.2827004f, +0.0068081f, +0.0829726f
);

const float biases[4] = float[4](
  -0.0216969f, -0.0295528f, -0.0339658f, +0.0062785f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer70 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0713068f, -0.0014786f, -0.1976514f, +0.1857827f, +0.0601936f, +0.1498384f, +0.3403707f, -0.1529172f,
  -0.0757891f, -0.0201823f, +0.2451989f, +0.0670440f, +0.2555596f, -0.0075511f, -0.0907457f, +0.0600364f,
  +0.0021267f, -0.0959663f, +0.1203945f, -0.0218274f, +0.0371208f, +0.1398685f, -0.1285479f, -0.0486284f,
  +0.1845814f, +0.0671670f, -0.1333023f, -0.0471678f, +0.0554661f, +0.0411602f, -0.1597731f, -0.1192770f,
  +0.0013179f, +0.0916745f, +0.0182510f, +0.1327098f, -0.0613842f, +0.1266868f, +0.6610575f, +0.2061339f,
  -0.0019613f, +0.2103272f, -0.2009394f, +0.3716474f, +0.0605356f, +0.4902532f, +0.2629872f, -0.2591647f,
  -0.0931585f, +0.2765346f, +0.0824447f, -0.0872152f, +0.0518782f, +0.0355966f, +0.2551814f, -0.3832155f,
  +0.0163784f, +0.3399321f, +0.0401855f, -0.0582066f, -0.1259702f, +0.6730561f, -0.3525917f, -0.6676115f,
  -0.1997968f, +0.0780824f, -0.1216841f, +0.0295301f, +0.2142280f, -0.0518136f, -0.0927344f, -0.2577193f,
  +0.1580568f, -0.0893854f, +0.0826381f, -0.1118021f, -0.0693304f, -0.0648232f, -0.3380922f, -0.0982295f,
  -0.0384819f, +0.0795128f, -0.0594268f, +0.0110113f, -0.0633335f, +0.0219111f, +0.1271144f, +0.1185168f,
  +0.0438074f, -0.1231064f, -0.0456476f, +0.2045577f, -0.0349398f, +0.1026904f, +0.0832398f, -0.0402621f,
  +0.1297529f, -0.2309866f, +0.0749526f, -0.0446135f, -0.2945464f, -0.0612857f, +0.1570854f, -0.0192535f,
  -0.2010203f, +0.0422856f, +0.0110050f, -0.0732429f, +0.8594005f, -0.1394814f, +0.6778916f, +0.4733891f,
  +0.0319814f, -0.0957652f, -0.3648582f, -0.0800211f, -0.1755983f, -0.0738909f, -0.2114875f, +0.0554201f,
  -0.0561560f, -0.0395209f, -0.0724061f, +0.0649111f, +0.0036349f, +0.0620845f, +0.0275165f, -0.2390091f,
  +0.4944685f, +0.1031752f, +0.0193404f, +0.0469481f, -0.1174330f, +0.4241953f, -0.5515593f, -0.2009099f,
  -0.0452555f, -0.0441667f, +0.1819962f, +0.5569639f, +0.1253638f, +0.0820299f, +0.0160480f, -0.1391133f,
  -0.0204070f, +0.1503094f, -0.0441618f, +0.0175435f, +0.0286005f, +0.0920035f, +0.2278517f, +0.1153083f,
  +0.1203086f, -0.0813467f, +0.1324288f, -0.2424718f, -0.1519973f, -0.0259610f, +0.1766139f, +0.0198478f,
  +0.2290377f, -0.0600027f, -0.0374420f, -0.0216052f, +0.1531847f, +0.1188373f, -0.2591811f, +0.1212420f,
  -0.0199010f, +0.0880868f, -0.0693532f, -0.1589529f, +0.1500299f, -0.0927795f, +0.4046386f, +0.1592147f,
  -0.1458585f, +0.0994428f, -0.0038077f, -0.3710980f, +0.1063529f, +0.1295269f, +0.1864900f, +0.2972627f,
  +0.1312063f, +0.0049164f, -0.0417898f, -0.2128591f, -0.3316460f, +0.6420339f, +0.1109204f, -0.2085338f,
  +0.2386103f, -0.0753567f, +0.0594279f, -0.0646887f, +0.0217823f, -0.0880976f, -0.1297050f, +0.1318249f,
  +0.2052882f, -0.2056957f, +0.0031629f, -0.0368551f, -0.4639077f, +0.0615545f, -0.3944056f, -0.0255974f,
  -0.1673505f, -0.0842631f, +0.1603572f, -0.2017529f, +0.3085424f, -0.3024476f, -0.0118688f, +0.0816721f,
  +0.0167731f, -0.0427933f, +0.0965577f, +0.0555045f, +0.0746016f, +0.0684384f, -0.0279251f, -0.0462795f,
  +0.0297622f, +0.1161933f, +0.1187230f, -0.0682939f, +0.2006002f, +0.0972860f, +0.1054914f, -0.0688922f,
  -0.0260681f, -0.1390721f, +0.1307496f, -0.2272868f, +0.1767389f, +0.0339050f, +0.0028775f, +0.0321028f,
  -0.2052215f, +0.0564699f, -0.1326171f, +0.1977563f, +0.2205984f, -0.0317373f, +0.0638822f, -0.1035454f,
  -0.0767707f, +0.1607879f, +0.0112700f, -0.0588941f, -0.1190357f, -0.0810212f, -0.0852961f, -0.1992827f,
  -0.1996887f, +0.0634341f, -0.1533845f, -0.2147483f, +0.0251864f, -0.0996964f, +0.3102876f, +0.2648015f,
  +0.0445838f, +0.0273132f, -0.1287361f, -0.2153818f, -0.0427634f, +0.0013692f, +0.0420722f, +0.0791385f,
  +0.2857122f, -0.1095559f, +0.0042237f, -0.1407721f, +0.1417985f, -0.1133164f, -0.3474894f, +0.1458921f,
  +0.0737838f, -0.1504467f, +0.0872083f, +0.1012098f, -0.0471213f, +0.1239812f, -0.1247954f, +0.0419857f
);

const float biases[4] = float[4](
  -0.0261254f, +0.0090370f, -0.0262855f, -0.0151807f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer71 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0177220f, +0.1246991f, +0.1476924f, -0.0162880f, +0.2104444f, -0.2303127f, -0.0077183f, +0.1264173f,
  -0.0109206f, +0.0202431f, +0.0050226f, +0.1398491f, +0.3923973f, -0.0633006f, +0.1321080f, +0.0141716f,
  +0.0957129f, +0.0567900f, +0.2003619f, -0.1687220f, -0.1581552f, -0.0796254f, +0.0575222f, -0.1433551f,
  +0.0892438f, +0.4002668f, +0.0086809f, -0.1357561f, +0.1894462f, -0.0215720f, -0.1154270f, -0.0953587f,
  -0.0031363f, +0.1345065f, +0.1711071f, +0.0724210f, +0.0177409f, -0.0132518f, -0.1045271f, -0.0584648f,
  +0.0741218f, +0.0810377f, +0.1003069f, -0.1403751f, +0.1005376f, -0.1864566f, -0.0467258f, +0.2954866f,
  -0.1253019f, +0.0323555f, +0.0794136f, +0.0459216f, +0.0240776f, -0.1890572f, -0.2645317f, +0.0873885f,
  -0.1453176f, -0.3234406f, +0.1750649f, -0.0391134f, -0.6959003f, -0.1268517f, +0.2691128f, -0.3393731f,
  -0.1214638f, -0.1888800f, -0.3516201f, +0.1844321f, -0.4206400f, -0.2351140f, -0.2932032f, +0.0852694f,
  +0.0061128f, +0.1995522f, -0.1707871f, -0.0547128f, +0.1931369f, -0.0386170f, +0.2436666f, +0.0172589f,
  -0.1511489f, -0.1063998f, +0.0803659f, -0.2175209f, -0.2718865f, -0.0224245f, -0.1834604f, -0.0985333f,
  -0.0721083f, +0.0212712f, -0.2242431f, -0.0705380f, +0.0204193f, -0.2027220f, -0.0427402f, +0.0605801f,
  -0.3348105f, -0.1960244f, +0.0751108f, -0.2764762f, -0.2716633f, +0.0127142f, +0.0252383f, -0.3265035f,
  +0.1569679f, +0.1871759f, -0.3704906f, +0.3610033f, -0.5631894f, -0.1926855f, -0.1494674f, +0.3033938f,
  -0.1094424f, +0.0563557f, +0.1177976f, -0.1379998f, +0.2093155f, +0.0769347f, +0.0851400f, +0.0173238f,
  -0.1509928f, +0.1363315f, -0.2034815f, +0.3127292f, +0.1860067f, +0.2224565f, +0.1351306f, +0.1348522f,
  +0.0319221f, -0.0034554f, +0.0339756f, +0.2572452f, +0.0689266f, +0.2762510f, -0.0655878f, -0.2047445f,
  -0.0435134f, +0.1441210f, +0.1895011f, +0.0017626f, -0.0034209f, +0.0691831f, +0.0822012f, +0.1117765f,
  +0.0141620f, -0.0403793f, +0.0137689f, -0.1594746f, -0.0202130f, +0.1081657f, +0.2292929f, -0.0866845f,
  +0.0256377f, +0.1327985f, +0.3561652f, -0.0102888f, -0.1695823f, +0.1015183f, +0.4854521f, -0.0212179f,
  -0.0256240f, -0.0092392f, -0.4184992f, +0.1906342f, +0.0205271f, +0.0553772f, -0.2516587f, -0.0399497f,
  +0.0100103f, +0.0800215f, -0.0581429f, -0.2795363f, -0.0500309f, +0.0011740f, +0.3806101f, -0.3368354f,
  -0.2684188f, -0.2303819f, -0.1000942f, +0.0892327f, +0.0708966f, -0.1860112f, -0.0755571f, -0.0335756f,
  -0.4390655f, +0.1627953f, -0.4467652f, +0.0336649f, -0.0778455f, +0.0864569f, -0.0449429f, -0.1698260f,
  -0.3852969f, -0.0151174f, -0.0292051f, +0.0496556f, +0.1993117f, +0.2094292f, +0.1505476f, -0.3419400f,
  -0.0522678f, -0.3617844f, +0.0713851f, +0.3261185f, -0.0245758f, +0.2782207f, -0.1619559f, -0.0594740f,
  -0.1056190f, +0.0014967f, +0.0458153f, +0.1677439f, -0.0149037f, -0.2821802f, -0.1056570f, +0.2600741f,
  -0.1686742f, +0.0193246f, -0.0159734f, +0.2556475f, -0.0421494f, +0.1694205f, +0.0045516f, -0.0282366f,
  -0.2688418f, -0.1057429f, +0.1467931f, -0.0938508f, +0.1630949f, +0.2701756f, +0.2070867f, +0.0711707f,
  -0.0962074f, +0.2402847f, +0.1627144f, +0.0155259f, -0.0603784f, +0.2079561f, +0.2106587f, -0.1079696f,
  -0.3109421f, -0.1552335f, +0.0925362f, +0.0719239f, -0.0655829f, +0.2907944f, -0.0108352f, -0.0030114f,
  -0.1122705f, -0.0850722f, +0.3060383f, +0.3278409f, +0.0877383f, -0.3115863f, -0.3503340f, +0.0195746f,
  -0.0717947f, -0.0049246f, +0.0984694f, +0.0296936f, -0.0225866f, +0.0066218f, +0.1051294f, +0.0338672f,
  -0.0202387f, +0.0289109f, -0.2161253f, +0.0313114f, +0.0077533f, -0.1418811f, +0.0421641f, -0.0816044f,
  -0.0112183f, +0.0711019f, -0.2489398f, +0.2890821f, +0.1830470f, +0.0907892f, -0.0556534f, +0.1659255f,
  +0.1795294f, +0.0547875f, +0.0742866f, -0.2050712f, +0.0813959f, +0.1427545f, +0.0365334f, +0.1179139f
);

const float biases[4] = float[4](
  +0.0009396f, +0.0364826f, +0.0481047f, +0.0371203f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer71 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1018177f, -0.1417015f, -0.1672105f, -0.0423548f, -0.0392225f, +0.2253124f, -0.0167607f, +0.0694109f,
  -0.0569953f, +0.1728017f, +0.0601883f, +0.3273485f, +0.0255960f, -0.5400617f, -0.0754426f, +0.2226003f,
  -0.1387310f, +0.0703239f, +0.1001733f, -0.2211922f, -0.0213509f, +0.0071474f, -0.3110157f, -0.0556357f,
  -0.0615900f, -0.4415315f, +0.1294033f, +0.0453541f, -0.0744216f, -0.0090598f, -0.0667937f, -0.1756046f,
  -0.1886671f, +0.2183247f, +0.0567744f, +0.1553310f, -0.2169036f, -0.3758389f, +0.0154324f, +0.4808062f,
  +0.1576443f, +0.3479671f, +0.2381538f, +0.2078489f, -0.0138600f, +0.2761114f, -0.2504854f, -0.2643990f,
  -0.2452492f, -0.1632917f, +0.2576910f, +0.0546211f, -0.0704137f, -0.0744178f, +0.1047301f, -0.2625200f,
  -0.0986070f, -0.0111526f, -0.0613093f, +0.1597654f, -0.1081299f, -0.3242716f, -0.2474891f, +0.3422118f,
  -0.0169720f, +0.2984433f, +0.2585946f, -0.0916777f, -0.1972051f, +0.2354508f, -0.3319288f, -0.0109901f,
  -0.0486952f, -0.0968472f, +0.1047809f, -0.2615887f, +0.0873911f, +0.1198595f, +0.0500443f, -0.0414021f,
  -0.2399594f, +0.0152227f, +0.1009072f, -0.3499639f, +0.4415761f, +0.1145901f, +0.0987373f, +0.1464853f,
  -0.1269107f, -0.0301021f, +0.1886397f, -0.0935862f, +0.1192072f, +0.0420165f, -0.0682420f, +0.1172831f,
  +0.0128221f, -0.3658958f, -0.2926524f, -0.0862871f, +0.1927569f, -0.0661455f, +0.0340477f, -0.3400519f,
  +0.0068481f, -0.2147725f, -0.1027928f, -0.1692282f, +0.1002909f, +0.2033326f, -0.1350591f, +0.0458261f,
  -0.1045388f, -0.1836265f, +0.3431101f, -0.1828908f, +0.2637320f, -0.0443609f, +0.1085575f, -0.0973574f,
  -0.3094393f, -0.0936983f, -0.1678834f, +0.0042115f, +0.0951871f, +0.2099500f, +0.1025639f, -0.0613971f,
  +0.0718638f, +0.1350080f, +0.4191994f, -0.1176014f, +0.0977184f, +0.2717321f, -0.0694795f, +0.0373814f,
  +0.0859521f, +0.1790136f, +0.0508414f, +0.0206060f, -0.0353227f, +0.2643749f, -0.0595518f, +0.1522344f,
  -0.0838401f, -0.0401285f, +0.0042261f, +0.0358428f, +0.0739785f, +0.0853701f, -0.2218458f, -0.0363765f,
  -0.1720360f, -0.0482870f, +0.1804527f, +0.0174709f, +0.3835585f, -0.1385465f, -0.3677095f, +0.1884532f,
  +0.1921028f, -0.2312566f, -0.0869327f, +0.1212599f, -0.1204219f, +0.0694887f, -0.0610526f, +0.1638133f,
  -0.0644948f, -0.2166877f, +0.1463858f, -0.0682303f, -0.0481161f, +0.0756779f, +0.0312776f, -0.1412981f,
  -0.5036724f, +0.4212347f, -0.4770516f, +0.0582191f, +0.2821906f, +0.2375266f, -0.0285364f, -0.0221203f,
  +0.1284885f, -0.1344708f, +0.0672922f, +0.2471286f, +0.0066090f, +0.2619755f, +0.0102862f, -0.0841753f,
  -0.1481230f, +0.0168651f, +0.0034675f, -0.1102064f, -0.0969988f, -0.1915303f, +0.1527696f, -0.1005324f,
  +0.0901347f, +0.0069553f, -0.1463392f, +0.0923034f, +0.1111218f, -0.0206126f, +0.3036979f, -0.1193809f,
  -0.1013459f, -0.1411978f, -0.1770983f, -0.1887038f, -0.0618524f, +0.2310280f, -0.2290280f, -0.0086983f,
  +0.4178282f, +0.1722669f, -0.1760224f, -0.1045913f, +0.1417081f, +0.1291793f, +0.1985367f, +0.1125477f,
  -0.4985831f, -0.5528850f, -0.0774156f, +0.2163152f, +0.1234596f, +0.1854466f, -0.3221536f, -0.1795389f,
  -0.1624070f, +0.2264413f, +0.0117260f, -0.0570756f, -0.1536961f, -0.5348811f, -0.1501084f, -0.1232135f,
  +0.2760337f, -0.3000738f, +0.1775789f, +0.1883795f, +0.1182648f, -0.0989724f, -0.2133893f, +0.0748149f,
  +0.5446798f, +0.5967062f, -0.2228462f, -0.1314924f, +0.1176574f, -0.3835313f, +0.6086724f, +0.3424349f,
  +0.1012538f, -0.1686343f, +0.1973687f, +0.3910243f, -0.1357850f, +0.3439690f, -0.3743056f, -0.0575740f,
  -0.2073736f, +0.0515563f, +0.0166015f, +0.1077783f, +0.0925714f, +0.0144976f, +0.0219704f, +0.0017554f,
  +0.1833933f, +0.1889719f, -0.0092145f, -0.2425413f, +0.1931634f, +0.1862465f, -0.0616818f, +0.0335064f,
  +0.1542325f, +0.1316113f, -0.1407139f, -0.0031487f, +0.2040702f, -0.0034904f, +0.1915133f, +0.1149729f
);

const float biases[4] = float[4](
  -0.0545691f, +0.0109959f, +0.0509677f, +0.0023083f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer72 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0181135f, -0.0046357f, +0.0362450f, -0.2684375f, +0.2672038f, +0.0889062f, +0.0846444f, +0.0014444f,
  -0.3103196f, -0.3723702f, -0.0300480f, -0.2311085f, -0.1109362f, +0.1455646f, +0.1689282f, +0.2730750f,
  +0.0038993f, +0.0380728f, +0.1234253f, +0.0062849f, -0.0184164f, +0.1347597f, -0.0013989f, -0.0830373f,
  +0.0916751f, +0.0276355f, +0.0089325f, -0.0202444f, +0.2737999f, +0.0443387f, -0.2611242f, +0.3761892f,
  -0.0906015f, -0.0153986f, +0.1501115f, -0.1522084f, -0.0900326f, +0.0195693f, +0.0260903f, -0.3589145f,
  +0.2261029f, +0.1392544f, +0.0762349f, -0.0858763f, -0.0660439f, -0.0273368f, -0.0481514f, -0.2600060f,
  -0.3466274f, +0.0248516f, -0.1912010f, +0.0118194f, +0.0201486f, -0.0515378f, -0.0151408f, +0.0747895f,
  -0.2459116f, +0.1091883f, -0.2784290f, +0.1586167f, -0.0273266f, +0.1582273f, +0.1262411f, -0.4977533f,
  -0.0756464f, +0.1269453f, +0.1184024f, +0.2172773f, -0.0828466f, +0.0575783f, +0.1097167f, -0.0397366f,
  +0.0281289f, +0.1707315f, +0.0163689f, +0.0721496f, +0.1238464f, -0.1045277f, +0.0460352f, -0.0001211f,
  -0.0565232f, +0.1466370f, +0.0253243f, +0.0128824f, -0.1083327f, -0.1522677f, -0.0217159f, +0.2954588f,
  +0.2839262f, +0.1565538f, +0.0643713f, -0.2562856f, -0.4423979f, +0.1214207f, -0.0802591f, -0.1362943f,
  -0.0614716f, -0.1923472f, -0.1081773f, +0.1626855f, +0.1120910f, +0.0420187f, +0.1502410f, -0.2101782f,
  -0.1575276f, -0.0134735f, +0.0518251f, -0.2065995f, -0.1471930f, +0.1294940f, +0.0095547f, -0.1930436f,
  -0.1117243f, +0.1562565f, -0.2024655f, +0.2544123f, -0.3339100f, +0.3656112f, +0.1875706f, -0.2822370f,
  -0.1984394f, +0.0368699f, +0.1368252f, -0.1439790f, -0.0167378f, -0.1360518f, +0.0668586f, +0.2642522f,
  -0.0574967f, -0.0559894f, +0.0470909f, -0.0944817f, +0.0469657f, +0.0225330f, -0.3890664f, -0.2727936f,
  -0.1945560f, -0.3687449f, -0.0552920f, -0.1084410f, -0.0741583f, +0.2574995f, -0.0445752f, +0.1067053f,
  +0.0974416f, -0.1660106f, -0.1357655f, -0.1474269f, -0.0753857f, +0.0817703f, -0.0543488f, +0.0724893f,
  -0.2331077f, -0.0862436f, -0.2152882f, -0.0060650f, +0.1670346f, -0.0273118f, +0.0354534f, +0.2950822f,
  -0.1977243f, +0.1688072f, -0.0784983f, +0.1956758f, +0.0579548f, +0.1129337f, +0.0062206f, -0.0403976f,
  -0.3257050f, -0.1640683f, +0.0856323f, -0.0693578f, -0.1829365f, +0.0051645f, -0.0830260f, -0.4559824f,
  -0.1697196f, +0.4614199f, +0.0090921f, -0.1566492f, -0.0206473f, +0.1678677f, +0.2468189f, -0.1452942f,
  -0.1485236f, +0.0013553f, +0.1911688f, -0.1407483f, +0.0547942f, +0.5060995f, -0.0024989f, +0.1356611f,
  -0.0855965f, +0.1514694f, +0.2029142f, +0.0825461f, -0.0033117f, -0.1186639f, +0.1385311f, -0.1944101f,
  -0.3099291f, -0.0349851f, -0.4230916f, -0.3788401f, +0.2848063f, -0.0511439f, -0.0253171f, +0.7693969f,
  -0.0773691f, +0.0788606f, -0.0325543f, -0.0573770f, +0.0842453f, -0.0327739f, -0.0708821f, +0.0181855f,
  +0.1175826f, -0.0515239f, -0.2538671f, +0.2694988f, -0.1529800f, +0.2099020f, +0.2577213f, -0.1056908f,
  +0.3072244f, -0.2060678f, +0.0417699f, +0.0204033f, +0.1387548f, +0.1338466f, -0.2199031f, +0.1202777f,
  +0.0886151f, -0.1495570f, -0.1659333f, -0.1508440f, +0.1061875f, -0.0942096f, +0.0673458f, +0.0305406f,
  -0.2398192f, -0.0153877f, +0.2902197f, +0.1143702f, -0.2429449f, +0.0723920f, -0.0228290f, -0.1880009f,
  -0.2814017f, -0.3762686f, +0.1564747f, -0.2764357f, +0.0021681f, +0.2105545f, -0.2277750f, +0.0112197f,
  +0.0624551f, -0.0351549f, +0.2162611f, -0.1018502f, -0.2340602f, +0.1314695f, +0.2507451f, -0.0441164f,
  -0.0100777f, -0.1017781f, -0.0905805f, +0.1735561f, -0.1896592f, +0.0301537f, -0.2231314f, +0.5515389f,
  -0.2858768f, +0.1317886f, -0.0926382f, +0.0271342f, +0.1528774f, +0.1393953f, -0.2055482f, -0.8905176f,
  -0.0380706f, -0.2101193f, -0.0268163f, +0.0003948f, +0.0426279f, +0.2234249f, -0.1051342f, -0.1917549f
);

const float biases[4] = float[4](
  +0.0074323f, -0.0431168f, -0.0221657f, +0.0220297f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer72 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0339637f, +0.0685519f, -0.0772275f, +0.0507656f, -0.3045177f, +0.0842646f, -0.0441972f, -0.1431992f,
  +0.5806804f, +0.0177853f, +0.0340636f, +0.0841003f, +0.1056075f, -0.0053849f, -0.1379282f, +0.1462485f,
  -0.0488702f, -0.1885470f, -0.2715374f, -0.0365259f, +0.2064462f, +0.1150154f, -0.0566642f, +0.0307245f,
  +0.2191829f, -0.1090724f, +0.2163012f, +0.2667304f, +0.2003734f, -0.0791508f, +0.1104688f, +0.1946827f,
  +0.1220924f, +0.3511965f, -0.1899687f, +0.0749627f, -0.3246516f, +0.1838840f, -0.2543224f, -0.0047816f,
  -0.2031600f, +0.1610894f, +0.1555130f, +0.1425045f, -0.0639112f, +0.0717134f, -0.1222429f, +0.0844777f,
  +0.2122575f, -0.0076492f, +0.0736095f, +0.0112369f, +0.2348725f, -0.0105134f, +0.0781185f, +0.2967560f,
  -0.1815863f, +0.0373165f, +0.0744181f, -0.1234561f, -0.0974747f, -0.0753712f, +0.0286470f, -0.0241674f,
  -0.2068226f, -0.2484838f, -0.1420448f, +0.0561687f, +0.0176311f, +0.1317489f, -0.0886223f, -0.0342527f,
  -0.2797166f, -0.3105575f, +0.1601392f, -0.1552486f, +0.0861377f, -0.0979908f, -0.1551664f, +0.1465313f,
  -0.0505686f, -0.1402565f, +0.1440663f, +0.1492811f, -0.3090375f, -0.1584270f, -0.0234297f, +0.0409540f,
  -0.0270971f, +0.0207041f, -0.1629788f, +0.1939327f, -0.0265389f, -0.0410479f, -0.0804049f, +0.0114676f,
  +0.0273522f, -0.2819742f, -0.0868265f, +0.2851742f, -0.2283160f, +0.1682559f, -0.0555618f, +0.0526856f,
  -0.2022053f, +0.0258639f, +0.1937527f, +0.1176927f, +0.1657445f, +0.1655171f, +0.0171500f, -0.3928629f,
  +0.0398605f, +0.2178649f, +0.2892116f, +0.1004765f, -0.1854570f, +0.1667913f, +0.3074281f, -0.2519014f,
  +0.3531847f, +0.0359602f, -0.0275175f, +0.0074133f, -0.3072021f, +0.1287640f, -0.1676457f, -0.4018699f,
  +0.0131162f, -0.1417720f, +0.1115289f, +0.1829136f, +0.2531249f, -0.1678418f, +0.0262647f, +0.1769448f,
  +0.0477742f, +0.0268177f, +0.0302386f, +0.0609210f, +0.1419753f, +0.0783906f, +0.1432440f, +0.0158923f,
  +0.2578533f, -0.0634283f, +0.3178248f, -0.0710412f, -0.1718043f, -0.1648724f, +0.2943457f, +0.0730184f,
  +0.5935209f, -0.0293207f, +0.3066550f, +0.2831459f, +0.1888308f, -0.0057159f, -0.1975723f, -0.3619071f,
  +0.1148476f, -0.1905600f, -0.1352002f, +0.0297677f, +0.2334175f, +0.0161897f, -0.1246921f, +0.1211143f,
  -0.2114871f, -0.1059543f, +0.0842045f, -0.1617418f, +0.0433344f, -0.5453027f, +0.1257483f, +0.0024096f,
  +0.0447390f, +0.3421236f, -0.3376745f, +0.1847198f, +0.3402705f, +0.0609130f, -0.2025796f, +0.3739040f,
  -0.2039120f, -0.1245174f, -0.0537417f, -0.0060579f, +0.0498677f, -0.1061708f, -0.0792909f, -0.0236121f,
  -0.0283987f, +0.0214558f, +0.0235336f, -0.4036652f, -0.0057093f, -0.1318383f, +0.3631201f, -0.2039172f,
  -0.1434100f, +0.3116351f, -0.2737274f, +0.0797031f, +0.4382378f, -0.2466685f, +0.0004723f, +0.1844131f,
  -0.1795719f, -0.0482778f, -0.0051875f, +0.2318562f, -0.0480113f, +0.0226915f, -0.0058054f, -0.0322939f,
  +0.3452188f, -0.1803089f, -0.0913517f, -0.0650343f, -0.1597021f, -0.0169085f, +0.1784518f, +0.1554969f,
  +0.3493622f, +0.0793499f, -0.0341759f, -0.2291252f, +0.1729938f, -0.0048969f, +0.1119075f, +0.1527671f,
  -0.0426861f, -0.2066868f, +0.2410962f, +0.1011808f, +0.0199600f, +0.1117291f, +0.0106957f, -0.0319734f,
  -0.2248025f, -0.0085561f, +0.0179985f, -0.0305381f, -0.3654500f, +0.1487954f, -0.1650391f, -0.2290580f,
  +0.0653511f, -0.2288210f, +0.2176795f, +0.0216117f, +0.2062360f, -0.4841919f, -0.2493358f, +0.1196389f,
  +0.0027887f, +0.3005593f, +0.4910634f, -0.0377666f, -0.0999566f, +0.0502045f, +0.1424161f, -0.1105966f,
  +0.2213440f, -0.0255231f, +0.0813271f, +0.1447581f, -0.2353090f, +0.0398934f, +0.1603934f, -0.1071440f,
  +0.1089231f, +0.0251418f, +0.0469977f, -0.0846239f, -0.0275429f, -0.1800794f, -0.1415062f, +0.0299832f,
  +0.1620828f, +0.0773836f, +0.2194495f, +0.2472314f, +0.0513910f, -0.0674936f, -0.0331081f, -0.0571392f
);

const float biases[4] = float[4](
  -0.0287025f, -0.0030787f, -0.0752797f, +0.0071618f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer73 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0547299f, +0.0287990f, -0.1656559f, -0.0328800f, +0.1497273f, -0.1095695f, -0.1486188f, +0.0417440f,
  -0.3049344f, +0.1698952f, -0.1072868f, -0.0726209f, +0.1107985f, -0.0654583f, -0.2036031f, -0.0809451f,
  -0.1251259f, -0.0260302f, -0.0599488f, -0.0950706f, -0.0275031f, +0.0360097f, -0.3505459f, -0.0767256f,
  -0.1061798f, -0.2324506f, +0.0218911f, +0.0839122f, +0.0053216f, -0.0298934f, -0.1360944f, +0.1168979f,
  +0.0972836f, -0.0645148f, -0.1725563f, -0.1425401f, +0.0793080f, +0.0217285f, -0.1042344f, +0.1564970f,
  -0.0155818f, -0.0765078f, -0.0200210f, -0.0192823f, -0.0412560f, +0.0928655f, -0.2260785f, -0.0179886f,
  +0.0447161f, +0.0347887f, +0.0544799f, -0.0659370f, +0.1969672f, +0.0613654f, -0.0941020f, -0.0035996f,
  +0.0975004f, -0.0360137f, -0.3651914f, -0.0834495f, -0.1243306f, +0.2276006f, +0.0636036f, -0.1542998f,
  +0.0395319f, +0.1494168f, -0.1056473f, -0.0553494f, +0.0000804f, -0.0245092f, -0.0883906f, -0.0546650f,
  +0.1355048f, +0.0470645f, -0.0890833f, +0.0025473f, -0.2642248f, -0.1840402f, +0.0838172f, -0.0468489f,
  -0.1417443f, +0.1391841f, +0.0731254f, +0.1703666f, +0.1520988f, +0.2641564f, +0.0815114f, +0.0968273f,
  -0.0795340f, -0.0657830f, -0.1528044f, -0.0102852f, +0.2063065f, -0.0247635f, -0.2045500f, +0.0449806f,
  +0.0489902f, +0.0434926f, +0.3404214f, -0.1116040f, +0.0448271f, +0.0547983f, -0.1286407f, +0.1708469f,
  -0.1558942f, +0.0358591f, +0.1319041f, +0.5260844f, +0.2547903f, +0.1417241f, +0.0760181f, +0.1076101f,
  -0.2051689f, +0.0957284f, -0.2856462f, -0.0140897f, +0.1106279f, +0.1695678f, +0.2350652f, +0.1441798f,
  +0.2313028f, +0.1689813f, +0.0048935f, -0.1451857f, +0.1402166f, +0.1214273f, +0.0802494f, +0.1067221f,
  +0.0259521f, -0.0313878f, -0.1658397f, -0.0905728f, +0.3262927f, +0.1012838f, +0.4072333f, -0.1903083f,
  -0.1948288f, +0.0221052f, -0.3246867f, -0.2093502f, +0.1088459f, +0.2857838f, -0.0618936f, +0.0217589f,
  -0.0108532f, +0.0292795f, -0.0244360f, +0.1297193f, +0.0140269f, -0.0814095f, -0.0757783f, -0.0054991f,
  -0.0271515f, +0.1032460f, -0.0400080f, +0.1419050f, -0.2416496f, +0.1963027f, -0.1154995f, -0.0341902f,
  +0.1200204f, -0.0186406f, -0.0878219f, +0.2101815f, +0.0489843f, -0.0554404f, -0.1175885f, +0.0644779f,
  +0.1243642f, -0.2331026f, +0.0694938f, -0.1296220f, +0.1905839f, +0.1801151f, -0.1367082f, +0.1694648f,
  -0.0253376f, -0.0527973f, +0.1617497f, -0.0759404f, -0.0772446f, -0.2127766f, -0.0850190f, +0.3922192f,
  -0.1309563f, -0.0992150f, +0.2000736f, -0.1179252f, +0.3163127f, +0.0315670f, -0.0287570f, -0.0978262f,
  -0.1181513f, +0.0001902f, +0.0024612f, +0.1028454f, -0.0309824f, +0.1224470f, -0.0556383f, +0.0120863f,
  -0.1217467f, -0.1177914f, +0.0707552f, +0.2646464f, -0.2642164f, +0.3381349f, -0.1220631f, -0.1366453f,
  -0.0456229f, -0.0109420f, +0.0564715f, +0.1630648f, -0.0724720f, -0.0072118f, -0.1231127f, +0.1083639f,
  -0.2017024f, +0.2435432f, -0.2081609f, +0.0362671f, -0.0410707f, +0.0167993f, +0.1109664f, -0.1303156f,
  -0.0531988f, +0.0226421f, -0.1111816f, +0.0061536f, -0.1284495f, -0.1168156f, +0.0741921f, -0.1798231f,
  +0.0639707f, -0.1202182f, +0.1372474f, +0.0230632f, -0.1757083f, +0.2696167f, -0.0809377f, -0.0127111f,
  +0.2529236f, +0.0586187f, -0.2303476f, +0.0749694f, -0.0406556f, +0.0682742f, +0.0483527f, +0.2311050f,
  +0.1420270f, +0.2067572f, +0.0120092f, -0.5814061f, +0.1195529f, -0.0030708f, -0.0054816f, +0.1136654f,
  +0.2406578f, +0.1234228f, +0.0910064f, +0.4523084f, -0.2383904f, -0.0087892f, -0.0798549f, +0.0474640f,
  +0.0765045f, -0.0845709f, -0.0607057f, +0.0754533f, +0.2055783f, +0.0454620f, -0.2056991f, -0.0400207f,
  -0.1801471f, +0.1088893f, -0.0732690f, -0.0163351f, +0.0464869f, +0.0446385f, -0.0156182f, -0.0008340f,
  -0.1064168f, -0.1981867f, -0.0559435f, -0.3165075f, +0.0296657f, +0.1706577f, +0.1173335f, -0.2158485f
);

const float biases[4] = float[4](
  +0.0769325f, -0.0033336f, -0.0238278f, +0.1042980f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer73 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1250142f, +0.1350358f, -0.0824676f, -0.1644734f, +0.3757853f, -0.0646310f, -0.2583543f, +0.0698741f,
  +0.1877048f, -0.1945269f, +0.1300224f, -0.0570770f, -0.5120669f, -0.4070406f, -0.0519981f, -0.2036337f,
  +0.0080781f, -0.0810498f, -0.1072740f, +0.0747086f, -0.2081061f, -0.3506384f, +0.0555452f, -0.1547628f,
  +0.0722232f, -0.1692527f, +0.0918756f, +0.0398081f, -0.0008797f, +0.0396793f, +0.0413125f, +0.3760232f,
  -0.1406940f, +0.3276499f, +0.1633315f, -0.0125064f, +0.1815931f, -0.0558447f, -0.1105079f, -0.2116669f,
  +0.2330700f, +0.0849184f, -0.0552271f, +0.3350360f, -0.1554701f, +0.2125293f, -0.0732470f, -0.2263099f,
  +0.1056578f, -0.1576235f, -0.3218880f, +0.3305681f, -0.2914919f, -0.3650056f, -0.1065937f, -0.1084306f,
  +0.0231570f, -0.1647060f, +0.1461962f, -0.5346887f, -0.2162017f, -0.4779727f, -0.2830846f, +0.1161849f,
  +0.0535494f, +0.0273405f, +0.0869064f, +0.0967966f, -0.1928266f, -0.1666229f, +0.2733197f, +0.1812714f,
  +0.1026466f, +0.0874385f, -0.1081645f, -0.0810353f, +0.0527377f, -0.0747179f, -0.0496258f, +0.2201944f,
  -0.2234360f, -0.0591358f, -0.0742202f, -0.2847683f, -0.0221236f, +0.0285782f, +0.1045016f, -0.1693566f,
  -0.1072963f, +0.0886645f, +0.3430236f, -0.2236959f, -0.0983719f, +0.0901639f, -0.0757587f, -0.0904793f,
  -0.0879501f, -0.3656473f, +0.0470185f, +0.0541748f, +0.0693198f, +0.2308814f, +0.0984902f, -0.1674822f,
  -0.0400671f, -0.2386376f, +0.0681386f, +0.0001291f, -0.0442166f, -0.1378286f, +0.2677211f, +0.1178253f,
  +0.0430203f, +0.1677073f, +0.0054497f, -0.1708354f, -0.1723870f, +0.4194896f, -0.3192185f, -0.5094848f,
  -0.0785772f, -0.1998300f, +0.0958520f, +0.0713016f, +0.0343737f, +0.0394392f, +0.0718491f, -0.1261342f,
  +0.1412747f, +0.1026682f, +0.1766369f, -0.0643541f, -0.1412405f, -0.0918950f, -0.2368760f, +0.2519944f,
  -0.0684039f, +0.1422111f, +0.1470800f, -0.0003438f, -0.2267188f, +0.1310233f, -0.3220927f, +0.0782887f,
  -0.0398693f, -0.1015178f, -0.2204639f, +0.1917578f, +0.0292930f, -0.1361642f, -0.1749659f, -0.0410900f,
  +0.1738075f, -0.2751834f, +0.0657664f, +0.0252992f, -0.1790409f, -0.0541603f, -0.1820598f, +0.1575428f,
  +0.1032666f, -0.1138985f, -0.0930533f, -0.3615294f, +0.0471542f, +0.1012812f, +0.2157328f, +0.0142013f,
  -0.1818813f, +0.1002297f, -0.1401519f, +0.1102730f, +0.3129720f, +0.1608906f, -0.0480638f, +0.2317561f,
  -0.5380904f, -0.0047446f, -0.4240005f, +0.3066391f, +0.2720165f, -0.1664068f, -0.6220123f, -0.0545956f,
  -0.2697099f, +0.1972306f, -0.2409135f, +0.2816531f, -0.1234413f, -0.3693214f, -0.0702024f, -0.0975410f,
  +0.3142328f, +0.1344850f, +0.2508318f, -0.2868663f, +0.0391570f, -0.0921386f, +0.0393276f, -0.0598862f,
  +0.3347230f, +0.4056392f, +0.2756273f, -0.2362839f, -0.3769847f, -0.2453829f, +0.4971502f, +0.1115783f,
  +0.0737824f, +0.0477276f, +0.2905393f, -0.1322032f, -0.0792875f, +0.0244484f, -0.0592668f, +0.0857376f,
  +0.2173437f, -0.0643154f, -0.2069385f, +0.2967733f, -0.4069634f, -0.2920803f, -0.0258652f, -0.1877951f,
  +0.0174826f, -0.0623928f, +0.2026950f, -0.2399288f, -0.1570425f, +0.2898633f, +0.0960606f, -0.0995379f,
  +0.0801819f, +0.1115194f, -0.2143283f, +0.3794906f, -0.1558388f, +0.1050013f, -0.0508006f, -0.1018729f,
  -0.4650018f, +0.1362460f, -0.1471696f, +0.2631999f, +0.1132708f, +0.1168879f, +0.1170092f, +0.1429495f,
  -0.1855200f, +0.1631578f, -0.1757374f, +0.2963412f, +0.0107676f, -0.0947780f, -0.1259781f, -0.3310956f,
  +0.1946425f, -0.0672127f, +0.2155649f, -0.2846414f, +0.3283650f, -0.2015665f, +0.3812014f, -0.0441072f,
  +0.4503713f, +0.1008637f, -0.0422919f, -0.2140156f, -0.4261402f, +0.0543428f, -0.1455065f, -0.1308097f,
  +0.4385742f, +0.3924354f, -0.2345603f, -0.5082139f, -0.2100606f, -0.0094814f, +0.0329876f, +0.5578630f,
  +0.1737156f, +0.0843903f, -0.1841561f, -0.3605729f, -0.2320119f, +0.0312142f, +0.2474809f, +0.0628720f
);

const float biases[4] = float[4](
  -0.0151995f, +0.0228547f, +0.0031566f, -0.0021570f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer74 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0242795f, +0.2619096f, -0.0261468f, -0.0005912f, +0.0636512f, -0.1051368f, +0.2937408f, +0.0768495f,
  +0.0300145f, -0.1896110f, -0.1349265f, +0.2137914f, +0.1859364f, -0.2211480f, -0.3613112f, -0.0015295f,
  -0.2517268f, -0.2659991f, +0.2153180f, +0.1500627f, -0.0340796f, +0.2133976f, +0.1193796f, +0.1345682f,
  -0.0405013f, +0.1993112f, +0.0272511f, -0.0753546f, +0.0573036f, -0.0404362f, +0.2582078f, -0.1069991f,
  -0.0832425f, -0.1585395f, +0.0627444f, -0.0499691f, -0.0651708f, -0.2551346f, +0.1676287f, -0.1802552f,
  -0.0657118f, +0.0304557f, -0.0055209f, -0.2112626f, -0.0348879f, -0.0445745f, -0.0205379f, -0.1021466f,
  +0.2062159f, -0.0952007f, -0.0770740f, -0.1820975f, +0.0750893f, +0.0535939f, +0.0026761f, -0.1690309f,
  +0.3036386f, -0.0462352f, -0.0917841f, +0.1901506f, +0.2110388f, +0.1557794f, -0.2583879f, -0.0056175f,
  +0.1277837f, -0.3139282f, -0.1317645f, -0.1064758f, +0.1696760f, +0.0839170f, -0.0389845f, -0.0277575f,
  -0.0239832f, -0.0790117f, -0.1268220f, +0.0565529f, +0.0197808f, -0.0485344f, -0.3820972f, +0.0435599f,
  +0.0828550f, +0.0075180f, -0.0140494f, -0.3317482f, +0.0762571f, -0.3896196f, -0.1825725f, +0.3150064f,
  +0.1924585f, -0.2472887f, +0.1189823f, +0.2928435f, +0.0629603f, -0.1302475f, +0.0130069f, +0.0582784f,
  +0.2507039f, -0.0012304f, -0.1076289f, +0.1392371f, -0.1288265f, -0.1598441f, +0.0180200f, +0.1799068f,
  +0.0596995f, -0.0303371f, +0.1722811f, -0.0132782f, -0.1323275f, +0.3492438f, +0.3834362f, +0.4358980f,
  -0.1042351f, -0.1003762f, +0.0156536f, -0.0921060f, +0.2737065f, +0.3015343f, -0.5109926f, +0.1152287f,
  -0.1094820f, -0.2043101f, +0.0477231f, +0.0045844f, -0.0120743f, -0.0944309f, +0.0689417f, +0.2039576f,
  -0.2303063f, +0.1099669f, -0.1715978f, -0.1613851f, -0.2743866f, +0.1596148f, -0.1419391f, -0.0405612f,
  -0.0797981f, +0.1142354f, +0.0918629f, -0.1097067f, -0.1557643f, -0.0323383f, +0.0819371f, -0.0612829f,
  -0.0892282f, -0.0110612f, -0.1663402f, +0.1006817f, +0.0656824f, -0.1340562f, -0.4542499f, +0.1593158f,
  -0.0314197f, -0.0740484f, -0.1411887f, -0.1907116f, +0.1599702f, -0.1355401f, +0.1806488f, -0.0728638f,
  -0.3676210f, -0.0362421f, +0.0296606f, +0.0223938f, +0.0235711f, -0.1003472f, +0.1010795f, -0.1312766f,
  +0.0377647f, +0.0699883f, -0.2853130f, -0.1129114f, -0.1144431f, +0.0570276f, -0.0438866f, +0.2581826f,
  -0.1509662f, -0.1313871f, +0.0018841f, -0.0277635f, -0.0634356f, -0.0575701f, -0.3736683f, -0.5222535f,
  +0.1568459f, -0.2003719f, -0.1003309f, +0.1149623f, -0.1260092f, -0.2519650f, -0.0547571f, -0.0620373f,
  +0.0199562f, +0.0118205f, +0.2539659f, -0.0532308f, +0.0090790f, -0.7366877f, +0.0664716f, +0.2545602f,
  +0.0785913f, -0.2231027f, -0.1579404f, +0.1166851f, -0.0382921f, -0.2359698f, -0.0447360f, -0.2268879f,
  +0.2128886f, +0.0810000f, +0.2439091f, +0.2271160f, +0.0530596f, -0.0044298f, -0.0411868f, -0.1559018f,
  +0.0678305f, +0.0660923f, -0.0994288f, +0.1826235f, +0.5207434f, +0.1032535f, -0.2175396f, +0.0303175f,
  -0.1167519f, +0.0858435f, -0.0200952f, -0.0918186f, +0.0861014f, +0.1296100f, -0.0689070f, +0.0907692f,
  -0.0252260f, +0.1338650f, +0.0595405f, -0.2661283f, -0.1977043f, -0.0227186f, -0.0547029f, -0.0689767f,
  +0.2427099f, -0.1438163f, +0.0031078f, -0.2931492f, -0.0280760f, +0.1245578f, +0.4856027f, -0.1474722f,
  -0.0704558f, -0.5153778f, +0.2225012f, +0.2240868f, +0.0102509f, +0.0720940f, +0.0006548f, -0.1406865f,
  +0.0966633f, -0.0846777f, +0.3563671f, -0.1874445f, +0.0208948f, +0.1971530f, +0.0725308f, -0.0206259f,
  -0.0879837f, -0.2425890f, -0.2462095f, +0.0569100f, -0.0841736f, +0.3563658f, -0.0447206f, -0.1793081f,
  -0.1554065f, -0.0008214f, +0.1512327f, -0.1445380f, +0.1432359f, +0.2464083f, -0.2239205f, -0.0658410f,
  +0.1432846f, -0.1393516f, -0.1401109f, -0.2910608f, +0.5356923f, +0.1302915f, -0.0827082f, -0.0725940f
);

const float biases[4] = float[4](
  -0.0391262f, +0.0001875f, -0.0479387f, -0.0106384f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer74 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2709186f, -0.0770171f, +0.1584923f, -0.0405035f, +0.1141426f, +0.1458508f, +0.2394551f, -0.0798672f,
  -0.0085111f, +0.0621829f, +0.1104228f, -0.0939878f, -0.2802770f, +0.1529105f, -0.3667230f, +0.2479539f,
  -0.1769448f, -0.0655990f, +0.0181726f, +0.0047209f, +0.2264742f, -0.1221173f, -0.2824314f, +0.0709795f,
  +0.0764989f, -0.0659249f, -0.0194697f, +0.0888349f, +0.2146686f, -0.1142077f, -0.3676343f, +0.0449338f,
  -0.3277254f, -0.3198436f, -0.0730943f, -0.2376188f, -0.4643472f, +0.2233850f, -0.2363146f, -0.2489259f,
  -0.1232060f, +0.1993908f, -0.0510468f, +0.0397785f, -0.1415682f, +0.2371804f, +0.0113559f, -0.0495801f,
  -0.0663048f, -0.3007740f, -0.0022551f, +0.0230019f, +0.1933539f, -0.0731080f, -0.0423993f, +0.0434969f,
  +0.0773989f, +0.2870073f, +0.3078237f, +0.2028528f, +0.3421554f, -0.0116626f, +0.1242812f, -0.0352549f,
  +0.0080473f, +0.1819745f, +0.0935639f, -0.0732625f, -0.2188680f, +0.0466167f, +0.0270813f, -0.0912356f,
  -0.1682771f, -0.1579816f, -0.0925840f, -0.1787374f, -0.2443747f, -0.1928485f, +0.1912964f, -0.2346975f,
  -0.4794295f, -0.4299262f, +0.1255278f, -0.0790790f, +0.1636849f, +0.1391693f, -0.1262633f, -0.4455630f,
  -0.1247528f, +0.0241654f, +0.1758137f, +0.0972147f, +0.0246269f, +0.0984385f, +0.0379483f, -0.3190032f,
  -0.1374134f, +0.0847360f, -0.0679367f, -0.2314658f, -0.1530436f, +0.0105576f, -0.0382311f, -0.2895453f,
  +0.0734956f, -0.3852777f, -0.1164759f, -0.0594378f, -0.2493992f, +0.4245783f, +0.0060100f, -1.0034958f,
  +0.2606996f, -0.0237556f, +0.1365525f, -0.1248121f, +0.0864783f, +0.0565710f, +0.0834618f, -0.0418105f,
  +0.1065807f, -0.0394682f, +0.0468256f, -0.1813109f, +0.2527490f, +0.1150143f, +0.0347777f, -0.0567965f,
  +0.0617892f, -0.1301952f, -0.0293303f, +0.1165978f, +0.2583202f, +0.0895342f, +0.0204607f, -0.3467345f,
  -0.0238002f, +0.0950858f, -0.0714485f, -0.1049774f, +0.0679535f, -0.0312304f, -0.0845854f, -0.2089639f,
  +0.2187716f, +0.1250518f, +0.0994722f, +0.0185296f, +0.0030397f, +0.1924666f, -0.0089032f, -0.0572395f,
  +0.1222476f, -0.1727829f, +0.1784743f, -0.0112517f, +0.1340437f, +0.3013365f, +0.3161544f, -0.0936566f,
  -0.0777058f, +0.1820150f, -0.1475047f, +0.2152042f, +0.1323540f, -0.1183904f, -0.0659020f, -0.2418387f,
  +0.0535296f, -0.2369110f, +0.0849201f, +0.2464911f, +0.1293217f, +0.0934710f, +0.2215596f, -0.0840517f,
  -0.1029669f, -0.1403634f, -0.1839489f, -0.0536893f, -0.0461214f, -0.2127126f, -0.0755663f, -0.1424296f,
  -0.1239572f, +0.0064694f, +0.2219945f, -0.0221410f, -0.0184082f, -0.0523895f, +0.0543472f, +0.2130140f,
  +0.3459615f, -0.2015498f, +0.1910266f, +0.1536386f, +0.4083219f, -0.0761217f, +0.1986448f, +0.1850200f,
  -0.0225204f, -0.0561699f, +0.0491642f, +0.1334768f, -0.1508184f, -0.0735570f, -0.1202634f, -0.0148208f,
  +0.0736257f, -0.1224598f, -0.0883459f, -0.2289036f, +0.2466096f, -0.0232314f, -0.0317047f, -0.0996369f,
  +0.1100588f, +0.1014130f, -0.0809160f, +0.0392865f, -0.2891960f, +0.0340610f, -0.3416030f, +0.0435899f,
  +0.0860344f, +0.1051407f, -0.0573639f, -0.0905192f, -0.1838138f, -0.0050802f, +0.0170970f, +0.1208647f,
  -0.1572858f, +0.0161770f, +0.1093719f, +0.1053335f, -0.1560872f, +0.1713451f, -0.0718251f, -0.1744487f,
  -0.1331593f, -0.0189103f, -0.0287406f, -0.0311892f, -0.0761069f, +0.4587256f, +0.0239816f, -0.0188722f,
  -0.2314402f, -0.1719316f, -0.1228153f, +0.0101043f, +0.1138805f, -0.0332738f, +0.0673824f, +0.0301026f,
  +0.0838559f, -0.1747556f, -0.1405987f, -0.1095953f, -0.3094324f, +0.2403594f, +0.1706282f, +0.1794859f,
  +0.1476371f, +0.0623854f, +0.0124971f, +0.0785120f, +0.2346027f, +0.0940580f, +0.0177567f, +0.1143300f,
  -0.0989804f, +0.1204646f, +0.0449553f, +0.1244330f, +0.2265451f, +0.1174322f, +0.1304167f, +0.1285310f,
  -0.1221823f, -0.0004043f, +0.0694632f, +0.1551505f, -0.1103354f, -0.0139205f, -0.0175982f, -0.0267756f
);

const float biases[4] = float[4](
  -0.0501666f, +0.0030239f, -0.0236592f, +0.0017820f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer75 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2034970f, +0.0213702f, +0.3171592f, -0.2810873f, -0.0579731f, +0.1144346f, +0.4543777f, -0.3217139f,
  -0.0072961f, -0.1225522f, -0.1398459f, -0.1564359f, +0.1530653f, -0.2786920f, -0.0542033f, +0.0595934f,
  +0.3996204f, -0.3176198f, -0.3271335f, +0.3978836f, -0.3041813f, -0.0130073f, +0.0492827f, +0.0363188f,
  +0.1741531f, -0.1569145f, -0.1019915f, +0.0150981f, +0.0552420f, -0.2871657f, +0.0705036f, -0.1709555f,
  +0.1265909f, -0.2464347f, -0.3135979f, -0.1541217f, +0.2072836f, -0.5503363f, +0.0583477f, -0.1033780f,
  -0.0756927f, +0.0439600f, -0.0082557f, -0.2264118f, +0.0447318f, -0.0202610f, +0.1531751f, +0.1500705f,
  +0.2442475f, -0.2095158f, +0.0538247f, +0.0473040f, -0.4190515f, +0.1649255f, -0.3210306f, +0.2370172f,
  -0.0117447f, +0.0846369f, +0.2814757f, -0.0583327f, +0.2913562f, -0.3203120f, -0.3919117f, -0.2228293f,
  -0.0422507f, +0.0492995f, +0.1641623f, +0.0397974f, +0.1022864f, -0.1670703f, -0.4656680f, -0.0120810f,
  +0.0844967f, +0.1503918f, -0.1476900f, +0.0226772f, -0.0246488f, +0.1747704f, -0.1986989f, +0.1372905f,
  -0.2323107f, +0.0613291f, -0.0900571f, -0.0299060f, +0.2698517f, +0.2910958f, -0.1153892f, +0.1472721f,
  -0.2772457f, +0.1062632f, -0.3168667f, +0.1576014f, -0.1319969f, +0.1291116f, -0.0253970f, -0.0471973f,
  +0.1763252f, -0.0907054f, +0.0081043f, +0.0193445f, +0.0232747f, -0.1392369f, -0.3143734f, +0.0091346f,
  -0.0637943f, -0.0427422f, +0.2663324f, -0.1296099f, +0.0088997f, -0.2403432f, -0.0287425f, +0.1634920f,
  +0.1105201f, -0.2027141f, +0.0706426f, +0.1223554f, -0.1753216f, +0.1729173f, +0.0651910f, +0.0009662f,
  -0.0367859f, -0.2567815f, -0.0979874f, +0.1774606f, +0.1796603f, +0.0351439f, -0.0055193f, +0.0217871f,
  +0.0983654f, -0.0036001f, -0.0059569f, +0.1936348f, +0.1642929f, +0.0709496f, -0.1035737f, +0.0019660f,
  -0.0110563f, +0.0318365f, +0.0012015f, -0.0750219f, +0.3186417f, +0.0539838f, +0.0098298f, +0.0742292f,
  +0.0853833f, +0.3753874f, +0.3188447f, -0.3058880f, -0.4650629f, -0.2901781f, -0.1152576f, -0.0644631f,
  +0.1259279f, +0.0621741f, -0.2330420f, -0.1510650f, -0.3726087f, +0.0242793f, +0.2756902f, +0.0708314f,
  +0.1338065f, +0.0055043f, +0.2107747f, -0.0556848f, +0.1849710f, +0.1082948f, +0.3379334f, -0.1121256f,
  -0.2677235f, +0.0250095f, +0.1077284f, -0.1585766f, +0.1006098f, -0.1637944f, -0.2878833f, +0.0129491f,
  +0.4406469f, +0.1564409f, +0.0430825f, -0.0162485f, -0.2268732f, -0.0881136f, -0.2848155f, +0.1341702f,
  -0.0777655f, +0.0327909f, -0.0848970f, -0.0428168f, +0.0042041f, -0.1406055f, +0.1636162f, -0.2973738f,
  +0.2586818f, -0.1405441f, -0.0500672f, +0.3637906f, -0.4330629f, -0.0965550f, +0.2012263f, -0.2633390f,
  -0.1126549f, -0.1447436f, +0.1171195f, -0.1751332f, -0.3255846f, +0.0837215f, +0.4064603f, -0.1579092f,
  +0.6051819f, +0.3443302f, +0.0893593f, +0.1850404f, -0.4180819f, -0.3751741f, +0.1257069f, +0.3407406f,
  -0.0323748f, +0.0580647f, -0.0512115f, -0.2317333f, +0.1078028f, +0.0055362f, +0.0466432f, +0.0354768f,
  +0.0340836f, +0.0706357f, +0.1117059f, +0.1431288f, -0.2183592f, -0.0384208f, +0.0705691f, +0.0978910f,
  -0.0272372f, -0.0102002f, -0.0309592f, +0.2774778f, -0.0962620f, +0.0525120f, -0.0283010f, +0.0653052f,
  +0.0724271f, +0.4538166f, -0.3783107f, -0.1774399f, +0.0365696f, +0.1734197f, +0.1264865f, +0.1663045f,
  -0.0244632f, +0.0376602f, +0.0610574f, +0.0519323f, +0.2024435f, +0.0808036f, +0.5796627f, +0.0466071f,
  +0.0768193f, -0.0341559f, -0.2239979f, -0.0975609f, +0.1079582f, -0.1148768f, +0.1999316f, -0.0573072f,
  +0.2038700f, -0.0309021f, -0.1082617f, -0.1377664f, +0.0069087f, +0.1489564f, -0.1110108f, -0.0679623f,
  +0.0473975f, -0.2408702f, -0.1700205f, -0.0675946f, -0.0421010f, -0.0292325f, -0.1471722f, -0.0751807f,
  -0.0225747f, +0.0415955f, +0.1815179f, -0.0346959f, -0.0311688f, +0.1573751f, -0.1870816f, -0.0388803f
);

const float biases[4] = float[4](
  -0.1030083f, -0.0039734f, -0.0736398f, -0.0018292f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer75 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0713772f, -0.0360638f, +0.2490773f, -0.1622302f, -0.0211166f, -0.1345281f, -0.0489548f, -0.0058650f,
  +0.0113903f, +0.0508863f, -0.0087711f, +0.0524328f, +0.1086238f, +0.4131610f, +0.2434075f, +0.1723275f,
  -0.0513657f, -0.0915601f, -0.2009435f, -0.0127386f, -0.0695938f, -0.2912448f, -0.0241769f, -0.0979110f,
  -0.0998037f, -0.1140922f, +0.0354456f, -0.0672506f, +0.3320723f, +0.1813511f, +0.2491458f, -0.0432152f,
  +0.1002114f, -0.1417158f, -0.2631733f, -0.5427352f, -0.4175607f, +0.0015322f, -0.0066251f, -0.0059185f,
  +0.1451949f, +0.1289925f, -0.2701411f, +0.2202429f, +0.1869682f, +0.0247465f, +0.2187584f, +0.0281954f,
  +0.1308833f, +0.0180807f, -0.0692786f, -0.2308884f, -0.1476415f, +0.2252125f, +0.0030597f, +0.1073272f,
  -0.0078390f, +0.1016446f, +0.1066597f, +0.1675218f, +0.0422191f, +0.0205940f, +0.0676850f, -0.0661061f,
  -0.0375036f, -0.0478276f, -0.1796320f, -0.1244617f, +0.1685642f, -0.0529576f, +0.1276921f, +0.0303970f,
  +0.0752179f, +0.0016244f, +0.2582437f, -0.0010283f, -0.0927451f, -0.3469913f, +0.2253014f, -0.5158537f,
  -0.1817475f, +0.1643720f, +0.0237734f, -0.0513443f, -0.2474878f, +0.1418702f, -0.1613939f, -0.2007211f,
  +0.0831743f, -0.1519684f, -0.3927228f, +0.0702841f, +0.1135502f, -0.2548271f, +0.0559153f, -0.1135980f,
  +0.6371299f, -0.1710559f, -0.0601820f, +0.1070898f, -0.2363077f, -0.0368549f, +0.2120855f, +0.0007789f,
  -0.3246030f, +0.3589466f, +0.2418458f, -0.0735817f, -0.0981373f, +0.2843612f, -0.0188815f, -0.1494965f,
  -0.0540674f, -0.1320936f, -0.0023277f, -0.0900662f, +0.4109366f, +0.1210423f, +0.2676602f, +0.1348238f,
  +0.3938893f, +0.0164215f, +0.2810575f, -0.4233395f, -0.1107837f, -0.5155503f, -0.3389907f, -0.0486447f,
  -0.0107922f, +0.2535430f, -0.0500596f, -0.3551513f, -0.3905270f, -0.0865494f, -0.1026923f, +0.0060829f,
  +0.2894874f, -0.1994433f, -0.0938105f, +0.1333536f, -0.2399017f, -0.0211985f, -0.1041824f, +0.3306192f,
  -0.0836372f, +0.1388650f, +0.2128865f, +0.1051930f, -0.2016649f, -0.3834860f, +0.2911548f, -0.3493005f,
  +0.2194920f, +0.2105753f, -0.0003450f, +0.3281126f, +0.2174492f, -0.4822126f, +0.0149534f, -0.1916770f,
  +0.1694572f, +0.4692383f, +0.4399973f, +0.0934859f, -0.2506007f, -0.0294115f, -0.1084927f, +0.1224997f,
  +0.0942347f, +0.0382660f, -0.0929955f, +0.1803903f, -0.4240702f, +0.0150638f, -0.0068519f, -0.0601070f,
  +0.1523292f, +0.1018118f, +0.0288233f, +0.4696474f, -0.0451616f, -0.1971067f, -0.0811602f, -0.0902118f,
  -0.3495456f, -0.3096632f, +0.4072384f, -0.0020445f, -0.0072901f, -0.0334149f, -0.3077368f, -0.1278787f,
  -0.0650080f, -0.1039850f, -0.1934717f, -0.0092830f, -0.0356040f, +0.1757277f, -0.1887970f, -0.0247850f,
  +0.4691273f, -0.1415649f, -0.2180859f, -0.1772258f, +0.2572041f, -0.0244506f, -0.0186234f, +0.0988348f,
  +0.0248234f, -0.1913754f, -0.1412171f, +0.0752825f, -0.1444038f, +0.0070164f, -0.1331577f, -0.1927522f,
  +0.0578504f, +0.0295171f, -0.0704952f, -0.1192069f, -0.0443771f, +0.1184440f, -0.0992909f, +0.0019210f,
  -0.0506286f, +0.1344746f, -0.0523411f, -0.0246833f, -0.3968194f, +0.1362230f, -0.0694770f, -0.0297379f,
  -0.0605628f, -0.1933900f, +0.0040775f, -0.2931989f, -0.3787992f, +0.3342524f, -0.0501026f, +0.1691740f,
  -0.0361760f, -0.1558884f, +0.0776061f, -0.0983096f, +0.0474483f, -0.0543124f, +0.1748286f, -0.2476636f,
  +0.0167241f, -0.0817359f, -0.0429156f, +0.2747329f, +0.0013235f, +0.1394842f, -0.0734226f, +0.0964968f,
  -0.3302281f, -0.2441010f, -0.1380414f, +0.1413159f, -0.2299735f, +0.2121147f, -0.1242818f, -0.2117565f,
  -0.0017738f, +0.0502487f, -0.1627833f, -0.2020555f, +0.0028126f, +0.1552554f, +0.1333137f, +0.0870299f,
  -0.0286374f, -0.1152604f, -0.0770773f, -0.0604207f, -0.1262976f, -0.2664419f, +0.0779138f, -0.0048589f,
  +0.1801220f, +0.1568904f, -0.2200408f, -0.2094943f, +0.2056368f, +0.0573332f, +0.2275100f, +0.0258733f
);

const float biases[4] = float[4](
  -0.0061603f, -0.0065848f, +0.0005003f, -0.0192377f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer76 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1724779f, +0.1397100f, -0.2193382f, -0.0394990f, +0.0894274f, -0.1051423f, -0.3413594f, +0.0349112f,
  -0.1692117f, -0.1232434f, +0.1383917f, -0.3174996f, +0.0598594f, +0.1463222f, +0.3645559f, +0.0287986f,
  -0.2098234f, +0.0316380f, +0.0555925f, -0.1314353f, -0.0015118f, -0.2715772f, -0.1161892f, -0.2493327f,
  +0.1580283f, -0.2143476f, +0.2694182f, +0.3122221f, -0.2102707f, -0.2197950f, -0.1047928f, +0.2386354f,
  +0.1225750f, -0.0336817f, -0.0699653f, -0.1041284f, +0.0109824f, +0.1401296f, -0.1490065f, +0.0716505f,
  -0.1349875f, -0.2178034f, +0.0581489f, +0.1240513f, +0.1065617f, -0.0913738f, -0.5010284f, +0.0501475f,
  -0.3094819f, +0.3062603f, -0.1922748f, -0.2181818f, -0.2892523f, -0.0086067f, +0.1184771f, +0.3083235f,
  -0.2664958f, +0.1481017f, +0.1958244f, -0.3425085f, +0.0310914f, +0.1675191f, -0.1229959f, -0.1245710f,
  -0.2698092f, -0.0728582f, -0.1351296f, +0.1626952f, +0.0567118f, +0.1927203f, +0.1970529f, +0.0162483f,
  -0.0773450f, -0.0705733f, +0.0498789f, +0.1452065f, +0.0333734f, +0.1410570f, -0.4670546f, +0.0001766f,
  -0.0579406f, +0.1078376f, +0.3174360f, +0.2576804f, +0.0023296f, -0.1575104f, +0.4278984f, +0.2350281f,
  +0.3375131f, +0.1511291f, +0.1258912f, +0.1272083f, +0.0294070f, -0.3376700f, -0.1076210f, -0.1066378f,
  -0.0391365f, -0.1179962f, -0.2902607f, -0.0682191f, +0.1412082f, +0.2023917f, +0.0878888f, +0.0566014f,
  -0.2091758f, -0.3581507f, -0.0830796f, -0.0300535f, +0.4947403f, -0.0110188f, +0.1475009f, +0.0781623f,
  -0.1753947f, -0.0177369f, -0.0789452f, -0.3291438f, +0.2047814f, +0.1200127f, +0.1928167f, -0.0068940f,
  -0.0600191f, -0.1927269f, +0.2762084f, +0.0312687f, +0.0779713f, -0.0383073f, -0.0789353f, +0.1333719f,
  +0.2020676f, +0.1301338f, -0.0065134f, -0.0693731f, -0.2043056f, +0.1555272f, +0.0473608f, -0.1240229f,
  +0.2838055f, +0.0021481f, -0.3366928f, -0.3819503f, -0.0213628f, -0.1272496f, -0.0624374f, +0.0420924f,
  +0.1940916f, -0.2147488f, +0.0624143f, +0.0334083f, +0.1771962f, +0.1765576f, -0.2971975f, +0.4836553f,
  -0.1195058f, -0.1187780f, -0.0382202f, +0.1148487f, -0.0261662f, -0.0204928f, -0.2376608f, +0.0946563f,
  +0.0317394f, +0.1139132f, +0.0383501f, +0.2982501f, +0.0810793f, -0.1481484f, -0.0479483f, -0.0340894f,
  -0.1666793f, -0.1242915f, -0.0365420f, +0.0838912f, +0.0868850f, -0.0832433f, -0.0024926f, -0.0151374f,
  +0.3053873f, -0.4643410f, -0.0505667f, -0.0413656f, +0.1195194f, -0.0799349f, -0.0515024f, +0.0023931f,
  +0.1710058f, +0.0287511f, -0.1208634f, +0.1392483f, -0.1284943f, +0.2684504f, +0.2305046f, -0.0613760f,
  +0.1722486f, +0.2031664f, -0.0138877f, +0.0238391f, +0.2662884f, +0.1570448f, -0.6335362f, -0.0021825f,
  +0.2640090f, -0.1946250f, +0.2640371f, -0.2292625f, -0.0522130f, +0.0307886f, +0.2344145f, -0.1881125f,
  -0.2251967f, +0.3930894f, -0.1512986f, +0.0770423f, -0.1078495f, +0.0951619f, -0.1966206f, -0.1206560f,
  +0.1095360f, -0.1299049f, -0.0469487f, +0.0671289f, +0.0636061f, +0.0902038f, -0.0055390f, +0.1505697f,
  +0.0888821f, -0.1774746f, +0.0242731f, +0.0997065f, -0.0697952f, +0.0912550f, -0.4340091f, +0.0606684f,
  +0.2044437f, -0.1031679f, -0.0116585f, +0.0418226f, +0.1408017f, +0.0512375f, +0.1070858f, +0.2568953f,
  +0.1458273f, +0.0095241f, +0.2489291f, -0.2043741f, -0.3509139f, -0.2218834f, +0.0698551f, -0.0471145f,
  +0.1904179f, +0.0299252f, +0.0997675f, +0.0743184f, +0.4441443f, -0.1343684f, +0.2731056f, -0.1445626f,
  +0.3441697f, +0.1644869f, -0.1700067f, +0.0786291f, +0.1018868f, -0.0468061f, +0.1150078f, +0.0619804f,
  -0.0584272f, -0.1610091f, +0.3058032f, -0.2897648f, -0.0642842f, -0.1160318f, +0.2864729f, +0.1211210f,
  -0.1658122f, +0.0215979f, +0.0538441f, -0.2967376f, -0.1114140f, +0.0071144f, -0.3411312f, -0.1266645f,
  +0.0952005f, +0.0610712f, -0.0155226f, +0.0960854f, +0.1332937f, +0.1369155f, -0.0869855f, +0.0130513f
);

const float biases[4] = float[4](
  -0.0276614f, +0.0113562f, -0.0331409f, -0.0080459f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer76 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1507651f, -0.0769911f, +0.0490016f, -0.0913139f, -0.1345930f, -0.1268989f, -0.2251254f, +0.2056629f,
  -0.0949186f, -0.2567254f, +0.1775263f, -0.2184584f, -0.0943919f, +0.1526217f, -0.0753724f, -0.1205518f,
  +0.2458438f, +0.1692313f, -0.1212046f, +0.2054633f, +0.0584859f, -0.0667311f, +0.0739796f, +0.0854416f,
  +0.0120849f, +0.1335320f, +0.0859360f, -0.1486783f, +0.0719074f, -0.3541261f, +0.0786395f, +0.0823699f,
  -0.2199057f, +0.4129318f, -0.0282698f, -0.0073761f, +0.2651100f, -0.2071753f, +0.0933480f, +0.0381698f,
  -0.0863346f, +0.0393719f, -0.1662636f, -0.0452471f, -0.3131386f, -0.2690120f, +0.0185610f, -0.0596702f,
  +0.0651097f, +0.2357461f, -0.3575002f, +0.0596023f, -0.0405820f, -0.0859846f, -0.0959033f, -0.1018580f,
  +0.0484507f, -0.1077063f, -0.2699799f, +0.1781669f, +0.0684635f, -0.1517798f, -0.4067633f, +0.2767678f,
  -0.1116072f, -0.0721860f, -0.1608572f, -0.0804876f, +0.0746489f, -0.1083531f, +0.0425797f, -0.0453594f,
  -0.0523016f, +0.0243056f, +0.0264172f, -0.0318204f, +0.0432663f, +0.3563245f, -0.3070323f, +0.0244685f,
  +0.1023313f, +0.1033811f, +0.1208845f, -0.1942341f, -0.2095447f, -0.1687879f, +0.1373243f, +0.2580537f,
  -0.1145440f, +0.0551069f, +0.0562237f, -0.2960983f, -0.3448494f, -0.0292271f, -0.1559281f, -0.0688867f,
  -0.0530618f, -0.0120828f, +0.1350814f, +0.1527146f, +0.0575657f, +0.1055494f, +0.1783997f, +0.0958493f,
  +0.4333648f, -0.0547603f, +0.0033767f, -0.0186614f, +0.4354210f, -0.0092583f, +0.0492926f, +0.3436564f,
  -0.0133309f, +0.0716265f, +0.1679772f, +0.0563895f, -0.0881548f, -0.1651458f, -0.2376467f, -0.0880990f,
  -0.1025073f, +0.0870110f, -0.0851104f, -0.0886036f, +0.2489580f, -0.0633162f, +0.0021519f, -0.8078187f,
  -0.0269787f, -0.1379923f, -0.0810334f, -0.0101509f, -0.3436689f, -0.1608447f, -0.0915047f, +0.0741030f,
  +0.1113234f, -0.0123485f, -0.0647391f, +0.1615395f, -0.1533875f, -0.1963569f, +0.2879635f, -0.1945444f,
  +0.2261706f, -0.1919758f, -0.2540733f, -0.0532995f, -0.1169773f, -0.3978712f, +0.4676353f, -0.0621302f,
  +0.5184037f, +0.1721543f, -0.2902531f, -0.0846969f, -0.1342841f, -0.4549581f, -0.2409029f, -0.0291489f,
  +0.1803561f, -0.0862879f, -0.0530713f, +0.1646582f, -0.0774256f, +0.1849421f, -0.0093399f, -0.0048377f,
  -0.0206940f, +0.0758103f, -0.1639968f, +0.1745151f, +0.0382684f, -0.1289591f, -0.0471014f, +0.2667004f,
  -0.1312811f, +0.0931214f, +0.2853213f, -0.3228750f, +0.1227891f, -0.1985864f, -0.3623112f, +0.1166541f,
  -0.2545189f, +0.0407463f, +0.1774734f, -0.2064944f, -0.1586775f, -0.2762831f, -0.0294985f, -0.0046396f,
  -0.1543834f, +0.2785760f, +0.0315664f, -0.2659733f, +0.0870641f, -0.2303295f, +0.1007115f, +0.2322860f,
  -0.0554497f, +0.2686580f, -0.0864313f, -0.1239152f, -0.0981527f, +0.0550419f, -0.2539051f, -0.1280436f,
  +0.0232731f, +0.1234677f, -0.0462328f, -0.1176992f, +0.0270560f, -0.3448481f, -0.2371478f, -0.1037770f,
  -0.2252765f, -0.2249986f, -0.1549451f, -0.0545255f, -0.0451141f, -0.2657502f, +0.0933685f, +0.2788175f,
  +0.1796029f, -0.1500895f, +0.0351695f, +0.1571571f, +0.1293945f, -0.0157204f, +0.0502352f, +0.0477869f,
  -0.0541282f, +0.0511334f, +0.0225461f, +0.0875339f, -0.0791149f, -0.0734712f, +0.0090469f, -0.0064545f,
  -0.0136070f, +0.2118489f, +0.0410846f, -0.0046778f, -0.1151867f, -0.2616302f, +0.2873431f, +0.2494451f,
  +0.0213318f, -0.1061426f, -0.0231155f, -0.0968679f, +0.0609513f, +0.2266104f, -0.0232749f, +0.0744370f,
  +0.2687477f, +0.0932738f, +0.1042659f, -0.3657814f, -0.0895508f, -0.1884729f, +0.2490818f, +0.2740632f,
  -0.0542321f, +0.0614175f, +0.3142211f, -0.0710357f, +0.0781740f, -0.1272102f, +0.0233497f, -0.0811833f,
  -0.1207673f, -0.0982012f, +0.0551492f, -0.0591612f, +0.0599744f, +0.0421389f, -0.1848377f, +0.0192430f,
  +0.0571255f, +0.0034521f, -0.0207516f, +0.2291708f, +0.0407953f, +0.1476673f, +0.0032917f, -0.0964910f
);

const float biases[4] = float[4](
  +0.0036460f, -0.0467331f, -0.0178452f, -0.0179371f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer77 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1115281f, +0.0033854f, +0.3252214f, -0.2096988f, +0.0611459f, +0.0643592f, +0.1988857f, -0.0340408f,
  -0.0352739f, +0.0471026f, +0.0849023f, -0.2300319f, -0.2938247f, -0.1534533f, +0.2527380f, -0.0724124f,
  -0.1271789f, +0.2143568f, -0.1669736f, -0.0751202f, -0.0780185f, +0.1001861f, -0.0468665f, -0.0465923f,
  -0.0220686f, -0.2526876f, +0.0557751f, -0.1598241f, +0.2202650f, +0.0548690f, -0.5332580f, -0.2050792f,
  -0.1287029f, +0.1534234f, -0.0725676f, +0.2039927f, -0.2000129f, +0.1628827f, -0.3391737f, +0.0323947f,
  +0.0948199f, -0.0008068f, -0.1379485f, +0.0978827f, -0.1350388f, -0.0636498f, +0.0276117f, +0.1800624f,
  +0.1267818f, -0.1515992f, +0.2608127f, +0.2037116f, +0.0169342f, +0.1178010f, +0.1341599f, +0.0258822f,
  +0.0616271f, -0.0684780f, +0.2622623f, +0.1733379f, -0.3653364f, -0.3446086f, -0.0008442f, -0.1901071f,
  +0.0581622f, +0.0240035f, +0.2155414f, -0.0182714f, -0.1204280f, -0.1609472f, -0.0432458f, -0.0989320f,
  +0.0825955f, -0.0235354f, +0.0264818f, -0.0175197f, +0.0101534f, -0.0371499f, +0.1599018f, -0.1298943f,
  +0.2084266f, +0.1746169f, +0.3862580f, +0.2472079f, +0.3667102f, -0.1855268f, +0.2495553f, -0.3030183f,
  +0.1808896f, -0.1403245f, +0.2888740f, +0.1917733f, +0.2287575f, -0.2282860f, -0.1741637f, +0.1401452f,
  -0.0786057f, -0.1748042f, -0.1541752f, -0.0981949f, +0.3089043f, +0.0860985f, +0.1907508f, +0.1192726f,
  +0.1428404f, +0.2209053f, +0.0287306f, -0.4722042f, +0.0468296f, -0.2202413f, +0.0846333f, -0.3899247f,
  +0.2006488f, -0.1386472f, +0.4647579f, +0.1606449f, -0.3887954f, -0.2485683f, -0.0251571f, -0.1920722f,
  +0.0569225f, -0.1775723f, -0.1189376f, -0.0120623f, -0.0873232f, +0.1171552f, +0.2085146f, -0.1335580f,
  +0.1698990f, +0.2858482f, +0.2865459f, -0.1637774f, -0.2931847f, -0.1595720f, -0.1573634f, -0.2046311f,
  +0.4023429f, +0.0610932f, +0.0760405f, -0.0913955f, -0.1163053f, -0.0417372f, -0.1383323f, -0.0735057f,
  +0.0463944f, -0.0990596f, +0.0437248f, -0.1443374f, +0.0073274f, +0.0297997f, -0.0417751f, +0.0217077f,
  +0.3449888f, -0.3591368f, -0.0417843f, +0.0634021f, -0.1745845f, +0.0404351f, -0.1027410f, +0.0987014f,
  -0.0352456f, +0.0436957f, -0.0541461f, -0.0255836f, -0.1693168f, +0.3962764f, +0.0632894f, +0.1031890f,
  -0.1322845f, +0.1056480f, -0.2162346f, +0.1107183f, -0.0408148f, +0.1304326f, +0.2938784f, -0.0560273f,
  -0.5880424f, +0.5906121f, -0.0101767f, -0.1516644f, -0.1393198f, -0.3957672f, -0.2940437f, -0.1088484f,
  -0.0124327f, +0.0210326f, +0.1480149f, -0.2422121f, +0.3801873f, -0.0192406f, +0.0553550f, -0.3533231f,
  -0.0060848f, +0.0042997f, +0.2652197f, +0.0152474f, +0.1133179f, +0.0014299f, -0.0821650f, -0.1347334f,
  -0.0970509f, -0.1419959f, -0.0025301f, +0.1335052f, +0.3730275f, +0.0745878f, +0.1635951f, -0.0143827f,
  -0.0422873f, -0.0634460f, -0.1264286f, -0.0344405f, -0.3476087f, -0.0841456f, -0.0152130f, +0.1427732f,
  +0.2082068f, -0.1460647f, -0.1585877f, +0.1360241f, -0.1155315f, +0.0472504f, -0.0031034f, +0.1121203f,
  +0.0640792f, -0.1559208f, +0.3774239f, -0.2543535f, -0.2054785f, +0.4142461f, +0.1737797f, +0.0536519f,
  +0.3317626f, +0.0889290f, +0.1674178f, +0.1005273f, +0.1784910f, -0.2600800f, -0.0199841f, +0.3201469f,
  -0.1406420f, -0.2698561f, -0.2684675f, +0.2830457f, -0.4728572f, -0.1012710f, +0.0019246f, +0.2763602f,
  -0.1368409f, +0.2750176f, -0.3822997f, +0.0686926f, -0.0550745f, +0.0759233f, +0.0221200f, -0.1394870f,
  -0.1542567f, +0.0770005f, -0.1191404f, +0.0105078f, +0.1815022f, -0.0892770f, +0.1880379f, -0.0662863f,
  -0.2374469f, +0.0106953f, +0.5774274f, +0.3564089f, -0.1195509f, -0.3357720f, +0.0757380f, -0.2752445f,
  +0.1061284f, +0.1011293f, +0.2751535f, -0.0457797f, -0.3538994f, -0.5565041f, -0.2600653f, -0.1225271f,
  +0.0042141f, -0.0511998f, +0.1889803f, +0.6177041f, +0.0744645f, +0.0962405f, -0.1897685f, -0.1099221f
);

const float biases[4] = float[4](
  +0.0151567f, +0.1029227f, +0.0099058f, -0.0432255f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer77 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0764551f, +0.1569283f, +0.1753599f, +0.2582202f, +0.3192839f, -0.1576932f, +0.2133229f, -0.1989282f,
  +0.0807875f, +0.2104392f, -0.0312901f, +0.2019954f, +0.2204040f, -0.0574898f, +0.1745201f, -0.2693541f,
  -0.0241130f, +0.4110995f, +0.1754026f, +0.1930550f, +0.1011576f, +0.4231662f, +0.3520093f, +0.0577883f,
  +0.2693279f, +0.1006841f, +0.6458912f, -0.0303549f, -0.3044619f, +0.0427976f, +0.1112983f, -0.1569181f,
  +0.4335154f, -0.2197203f, -0.4603020f, -0.0065719f, +0.0709852f, -0.3026590f, +0.1467357f, -0.1695491f,
  -0.0477713f, +0.1496556f, -0.2161217f, -0.1088459f, -0.0519071f, +0.2540101f, +0.4445773f, -0.1831619f,
  +0.1807520f, +0.2192851f, +0.2347489f, +0.1862412f, -0.2458772f, -0.0674945f, +0.0529653f, +0.1177965f,
  +0.1185819f, -0.2170409f, +0.0513005f, +0.1536232f, +0.0834313f, -0.2390499f, +0.0787257f, -0.4856385f,
  +0.1774494f, +0.0326710f, -0.1127162f, -0.1204011f, +0.2315941f, -0.1827200f, +0.1628297f, +0.0630107f,
  -0.0465359f, -0.0359090f, -0.3323968f, -0.0951330f, -0.2144931f, +0.0637416f, -0.0308973f, -0.3830355f,
  +0.1026481f, -0.0522592f, +0.0644151f, +0.1467539f, -0.1772241f, -0.1647165f, -0.0330126f, -0.2576861f,
  +0.2651389f, +0.4272149f, +0.1773286f, -0.0378067f, -0.2349894f, +0.0203333f, +0.0467269f, +0.1196074f,
  +0.0474482f, -0.2254601f, -0.0393884f, +0.0482674f, -0.0911320f, +0.2186327f, +0.3058216f, -0.2433575f,
  +0.2339590f, +0.3754712f, +0.1316660f, +0.0689113f, -0.0238314f, -0.4669558f, -0.0623205f, -0.0846575f,
  +0.3319388f, -0.1772041f, +0.1953039f, -0.2446409f, -0.1447310f, -0.1154879f, -0.2991067f, +0.1251950f,
  +0.0477039f, +0.0434547f, -0.2134903f, +0.0401118f, +0.2756687f, -0.1951125f, +0.2764000f, -0.1192884f,
  +0.2438825f, +0.1330483f, +0.1035311f, -0.1857522f, +0.1368558f, +0.2275990f, -0.2901769f, -0.2337918f,
  +0.0833212f, +0.1027638f, +0.0546816f, +0.1442706f, +0.1048988f, +0.1012303f, +0.0279948f, -0.2837091f,
  -0.0613052f, +0.0155624f, +0.0915226f, +0.0646807f, +0.1469877f, -0.3085165f, -0.2237179f, +0.0219371f,
  -0.2194185f, -0.0452881f, -0.2113089f, +0.1427625f, +0.1976316f, -0.1713392f, +0.0136415f, -0.0261827f,
  +0.3732466f, -0.0842152f, -0.0936948f, +0.2243615f, +0.1101332f, +0.0887447f, +0.1915962f, +0.1557468f,
  +0.2205183f, +0.4417187f, +0.0163826f, +0.1142498f, -0.1101878f, +0.0670621f, -0.0280557f, +0.1727975f,
  -0.2820611f, +0.0685500f, -0.1664385f, +0.3810593f, +0.0386787f, -0.4012877f, -0.4583255f, -0.3641807f,
  +0.0447575f, -0.1549474f, +0.2504470f, +0.1141462f, +0.2665799f, -0.3107969f, +0.3360531f, -0.3294506f,
  -0.1782370f, -0.0397118f, +0.4035626f, +0.6857273f, -0.2985143f, -0.3207126f, +0.1111254f, +0.1455260f,
  +0.6208209f, -0.0767809f, -0.0082618f, +0.2694528f, +0.0840124f, -0.1857804f, +0.0324897f, +0.1547274f,
  +0.4191144f, -0.3675477f, -0.1486044f, -0.0923884f, -0.1800199f, -0.3943166f, +0.1713350f, -0.0149228f,
  +0.0230731f, +0.0684011f, -0.0523381f, +0.1412629f, -0.0298323f, +0.0618959f, +0.3047961f, +0.0922317f,
  -0.0656763f, -0.0534139f, -0.0279471f, +0.1439988f, -0.2421878f, -0.1568021f, -0.0073278f, -0.1565016f,
  +0.2241069f, -0.1016374f, -0.0035610f, +0.0759602f, +0.0725270f, -0.4197820f, -0.1406981f, -0.2146673f,
  +0.2292209f, +0.2741618f, -0.0962237f, -0.2989024f, -0.1368426f, +0.3331925f, -0.1637376f, +0.2309432f,
  -0.0885847f, -0.4110918f, -0.0806946f, +0.0356219f, -0.0853965f, -0.5588108f, +0.0922900f, +0.0692428f,
  +0.3512283f, -0.1811959f, +0.0973662f, +0.1210964f, +0.0514304f, +0.1817100f, -0.0760028f, -0.0503640f,
  +0.1284944f, +0.0738347f, +0.0588655f, -0.3202745f, -0.1427300f, +0.0600587f, +0.0663397f, -0.0603596f,
  +0.1441006f, -0.3313904f, +0.1390376f, -0.1918119f, -0.3314994f, -0.2307837f, +0.5077291f, -0.1531038f,
  +0.2565062f, +0.1592673f, +0.2358496f, +0.3034078f, -0.0249153f, -0.4956786f, +0.1889062f, +0.0623422f
);

const float biases[4] = float[4](
  -0.1184365f, +0.0403342f, +0.0033805f, +0.0221122f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer78 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0798944f, -0.1493092f, -0.0362261f, -0.0444785f, +0.0535971f, -0.0606581f, -0.1608329f, +0.1900019f,
  -0.0741488f, -0.1935779f, +0.1883405f, -0.0764470f, -0.1232299f, +0.4213005f, -0.1941367f, -0.1782035f,
  -0.1485342f, -0.0529352f, -0.0933410f, +0.4930474f, -0.3472513f, -0.0190934f, -0.0364185f, -0.0743777f,
  -0.2390756f, -0.1202874f, -0.0499484f, +0.2510420f, +0.0667631f, +0.0216562f, +0.4122878f, -0.2260719f,
  +0.2931367f, +0.1051883f, +0.4367502f, +0.3877586f, -0.0662164f, +0.2757908f, +0.2012697f, +0.0004660f,
  +0.1125935f, +0.1849514f, +0.2343009f, +0.1447349f, -0.1694483f, -0.1605275f, -0.1123679f, -0.0945431f,
  +0.2598697f, +0.0440002f, +0.1939597f, -0.1493655f, -0.3481033f, +0.1215427f, -0.4933673f, -0.0122393f,
  -0.2201190f, -0.1706637f, -0.0981126f, -0.1319714f, +0.1874844f, +0.1127825f, -0.0057646f, -0.0324469f,
  +0.1651147f, -0.0219036f, +0.1188112f, -0.1041458f, -0.0364641f, +0.0815953f, -0.0299782f, -0.0345421f,
  -0.1461287f, -0.3175977f, -0.0628173f, -0.1405002f, -0.0295150f, -0.1062699f, +0.4181015f, +0.1321082f,
  +0.0779518f, +0.0608815f, -0.0930550f, +0.0103640f, -0.0755052f, +0.3780181f, +0.5815068f, -0.1959683f,
  +0.3808086f, +0.2621066f, +0.2061324f, -0.0021465f, -0.1311080f, -0.0596042f, -0.1033117f, +0.0700587f,
  +0.1156755f, -0.2974164f, +0.0372402f, +0.0677215f, -0.1762420f, +0.1598386f, +0.0633911f, +0.0923407f,
  -0.0658788f, -0.2040282f, -0.6315520f, -0.0518591f, +0.0707384f, -0.3105024f, +0.3363343f, -0.0802766f,
  +0.2512967f, +0.5084639f, -0.0439764f, -0.1682901f, -0.0563162f, -0.1941637f, -0.1211423f, +0.1278033f,
  -0.1668283f, +0.1092020f, -0.1077029f, -0.0933256f, -0.1198298f, -0.2220802f, +0.2966844f, -0.2950926f,
  +0.0166028f, -0.2194270f, +0.1697363f, +0.0883313f, -0.2080801f, +0.2651706f, -0.3730889f, +0.1406271f,
  -0.2749250f, +0.1535045f, -0.0357479f, +0.0078490f, +0.1729821f, -0.0349530f, -0.2361127f, +0.0276911f,
  -0.0768616f, +0.0652228f, +0.0262821f, -0.3000000f, -0.0089366f, -0.0004268f, +0.1600124f, +0.2185856f,
  -0.0544323f, -0.0587502f, +0.1206911f, +0.0431853f, +0.0401950f, -0.3237599f, +0.4519471f, +0.3647842f,
  -0.0008963f, +0.2471268f, -0.0032550f, -0.0106596f, +0.0747190f, +0.1995852f, +0.0562817f, +0.0677599f,
  +0.1082786f, +0.1156307f, -0.0709758f, +0.1877922f, +0.1206482f, -0.3422984f, +0.3866997f, +0.0420260f,
  -0.1180727f, -0.0446985f, +0.2872734f, +0.4287884f, +0.2279573f, +0.1277859f, -0.6375874f, +0.0868738f,
  -0.0550360f, +0.0203653f, +0.1267699f, +0.0724947f, -0.2476018f, +0.0569853f, -0.2390332f, -0.0362317f,
  -0.1195069f, -0.1679288f, -0.2772769f, +0.2802880f, -0.1806523f, -0.0552965f, +0.3288254f, +0.0409664f,
  -0.1538597f, -0.3360456f, +0.1223863f, -0.0902511f, +0.0929056f, -0.1835326f, -0.0834363f, -0.0265422f,
  -0.0131301f, -0.0697863f, +0.0044246f, +0.3427460f, +0.0249654f, +0.1440718f, +0.0154218f, -0.0836819f,
  -0.0335633f, -0.1229710f, +0.1584781f, +0.0335397f, +0.0098274f, +0.0301914f, +0.0038901f, -0.2250066f,
  -0.1752822f, -0.1354225f, +0.1929770f, -0.1248244f, -0.0756578f, -0.0553793f, +0.1246091f, +0.4220887f,
  -0.0178995f, -0.0414842f, +0.0929010f, +0.1462701f, +0.1946047f, +0.0077998f, +0.1194801f, +0.1692450f,
  -0.3279110f, -0.0253087f, +0.0724086f, -0.2860530f, +0.1664819f, +0.1729968f, -0.0029641f, -0.0047594f,
  -0.0716803f, +0.0486470f, +0.1114951f, +0.1005743f, -0.0680955f, -0.1624320f, +0.0145863f, +0.2848085f,
  +0.2774176f, +0.0473055f, +0.0025052f, +0.0528848f, +0.0570685f, -0.1221206f, +0.4545241f, +0.1334196f,
  +0.0050839f, -0.1455283f, +0.1243983f, -0.1042303f, -0.1480653f, +0.2547180f, +0.1110231f, -0.3325615f,
  +0.2216519f, -0.1001820f, -0.0331920f, -0.3328722f, -0.2585878f, +0.1862811f, -0.4707846f, -0.2025129f,
  +0.0196094f, +0.0015107f, +0.1618997f, +0.2629896f, -0.2239271f, +0.0122921f, -0.0957629f, +0.0150840f
);

const float biases[4] = float[4](
  +0.0175511f, +0.0099129f, +0.0017476f, -0.0062203f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer78 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2435811f, -0.0153364f, +0.4283631f, -0.2996812f, -0.1989833f, -0.1341160f, -0.0641629f, +0.3461148f,
  +0.1578138f, +0.0302612f, -0.0771538f, -0.0374112f, -0.0763249f, -0.1998386f, -0.3113342f, +0.4338641f,
  -0.0167694f, +0.1807055f, +0.0260881f, +0.3249746f, +0.1088755f, -0.0320758f, +0.2359335f, -0.0237177f,
  +0.1245659f, +0.1146256f, +0.0135847f, -0.1002117f, -0.0391863f, +0.3581540f, -0.0740239f, -0.1481615f,
  -0.0419989f, -0.1108460f, +0.1055223f, -0.2046017f, +0.1105921f, +0.0269847f, -0.3475114f, -0.0593973f,
  -0.4055312f, -0.1113396f, -0.1736763f, -0.1284243f, +0.1661373f, +0.1581060f, +0.0705928f, +0.2647224f,
  -0.0114886f, -0.0879295f, +0.1363867f, +0.1547353f, -0.1026439f, +0.1554328f, -0.0274903f, -0.2593351f,
  +0.1885816f, -0.1967211f, +0.0890242f, +0.0925027f, +0.0083293f, +0.4018965f, +0.2109117f, -0.0037686f,
  -0.0198917f, +0.2032612f, -0.0205097f, -0.0881025f, -0.0071688f, +0.3765778f, -0.1209371f, -0.2071151f,
  +0.1586047f, -0.1220857f, +0.1619344f, +0.1166087f, +0.5411215f, +0.0223412f, +0.0658387f, +0.3482281f,
  -0.0456563f, +0.1733959f, +0.1391682f, +0.3423657f, +0.2033775f, +0.0296862f, -0.0686073f, -0.1867756f,
  -0.0051188f, -0.0806740f, -0.0365438f, -0.0450057f, +0.1076369f, +0.1268457f, +0.2284272f, +0.1555473f,
  +0.2033281f, +0.1633420f, +0.0739538f, +0.1830122f, -0.1560751f, +0.0674179f, -0.3654275f, +0.0796104f,
  -0.0965668f, -0.2055403f, +0.4213722f, -0.4872151f, -0.0811344f, -0.3410641f, +0.3711931f, +0.0641690f,
  +0.0303728f, +0.3173991f, -0.0636963f, +0.1483451f, +0.1478942f, -0.0899211f, +0.0557060f, -0.1127851f,
  -0.0435935f, -0.0674593f, -0.3692586f, +0.2626718f, -0.3734738f, -0.1248730f, +0.0623008f, +0.2784320f,
  +0.3602394f, +0.0909715f, +0.1588458f, -0.3009380f, -0.2736550f, +0.1044797f, -0.2733757f, +0.4812282f,
  +0.2045699f, +0.1853556f, -0.0110603f, -0.0676944f, +0.0300952f, -0.4348275f, -0.0315851f, -0.3280616f,
  -0.1973165f, -0.0694762f, +0.0029541f, +0.0661430f, -0.0596424f, +0.0191612f, +0.1066590f, -0.1601754f,
  +0.1015810f, +0.0160543f, -0.2812157f, +0.0551112f, +0.0301504f, +0.0572742f, -0.0321322f, -0.1116394f,
  +0.0029561f, -0.0128182f, -0.0272710f, -0.0548606f, -0.3003820f, +0.1865260f, -0.2683748f, -0.1095722f,
  -0.1915658f, +0.0159742f, +0.2309757f, -0.1856184f, -0.3364567f, -0.0545352f, +0.1748783f, -0.2172639f,
  -0.2146188f, +0.0070455f, +0.2368733f, -0.1098395f, +0.0915301f, -0.2657571f, -0.0530732f, +0.0119122f,
  -0.1281028f, +0.3564187f, -0.2103422f, +0.2815015f, -0.1324501f, -0.0258978f, -0.0158774f, +0.0176848f,
  -0.0597245f, +0.1380198f, -0.1438721f, +0.0124842f, -0.3142687f, -0.0612073f, -0.0137456f, +0.2075906f,
  -0.2413339f, -0.2897837f, +0.0639175f, +0.0121876f, +0.0003210f, -0.0129988f, -0.0113093f, +0.2022336f,
  +0.0392175f, +0.0982048f, -0.0269816f, -0.0400355f, -0.1986741f, +0.3153314f, -0.0253794f, -0.1770624f,
  +0.0437765f, -0.0148368f, -0.1343230f, +0.0808353f, -0.1202445f, +0.1120464f, -0.1756654f, -0.0429407f,
  -0.0649249f, -0.0554253f, -0.0913860f, +0.1923881f, +0.2749667f, -0.3110143f, +0.1165754f, +0.1431999f,
  -0.0391613f, +0.0988752f, +0.0908599f, +0.1197731f, +0.0070342f, -0.1086272f, +0.1428628f, -0.0003925f,
  -0.0760927f, -0.1354362f, +0.3072462f, -0.2358028f, +0.0898823f, -0.1774768f, -0.0933026f, -0.0647718f,
  -0.4671708f, -0.0260953f, -0.1188538f, -0.1146362f, +0.2530769f, -0.2930393f, +0.0462539f, +0.0711364f,
  -0.2050239f, -0.1310027f, -0.1406981f, -0.2743231f, +0.2798392f, +0.0776136f, +0.1972726f, +0.0095829f,
  +0.0146205f, -0.1870136f, -0.1109222f, +0.0035463f, -0.1823086f, -0.2220604f, -0.2095081f, +0.3037181f,
  +0.2722601f, -0.0445162f, +0.0057541f, -0.2096102f, -0.0633339f, -0.1135792f, +0.2371594f, +0.3144869f,
  +0.1437774f, +0.1592022f, -0.0530280f, -0.3930761f, +0.1630307f, +0.0890287f, +0.2446503f, -0.1523395f
);

const float biases[4] = float[4](
  -0.0162385f, -0.0301127f, -0.0022142f, -0.0276602f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer79 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0914688f, -0.1801938f, +0.1203190f, +0.0379989f, -0.0693244f, +0.2150268f, -0.0098139f, +0.0626469f,
  +0.1122358f, -0.0857399f, -0.0441422f, +0.1482593f, +0.0936488f, -0.1131616f, -0.0572572f, +0.1416182f,
  +0.0115053f, -0.0071497f, +0.0277019f, -0.0751515f, -0.2612096f, +0.0308676f, +0.1498051f, +0.1309313f,
  +0.2816792f, +0.0424929f, -0.0124499f, -0.4017263f, -0.1505103f, -0.0004714f, +0.2267834f, -0.0685162f,
  +0.2496164f, -0.2279650f, +0.0911763f, -0.1911416f, +0.0808512f, +0.0445597f, +0.1825976f, -0.0340244f,
  -0.3484684f, +0.2557587f, -0.0077838f, +0.1544774f, +0.2315532f, +0.2279291f, -0.0146283f, +0.0172390f,
  +0.0612971f, -0.0930860f, -0.1036579f, -0.0193208f, -0.2216435f, +0.3426158f, +0.0641256f, +0.1057817f,
  +0.2005229f, -0.1383822f, -0.1446258f, +0.0884811f, +0.1102306f, -0.1671396f, +0.0105139f, +0.1731088f,
  -0.0397235f, -0.0708083f, -0.3964205f, -0.0603057f, +0.1565470f, +0.1599025f, +0.1373426f, +0.1245851f,
  +0.0649687f, -0.0187906f, +0.0423203f, -0.0570850f, +0.1071587f, +0.1600363f, +0.0828950f, +0.0421151f,
  +0.1626927f, +0.0207741f, +0.1023001f, -0.0978296f, +0.1191645f, +0.0514503f, +0.2282830f, -0.0115025f,
  +0.0699721f, -0.0768919f, -0.0233922f, +0.1983180f, +0.2093799f, +0.1702754f, +0.0138135f, -0.0162780f,
  -0.1131272f, -0.2730920f, -0.3819665f, +0.0876277f, -0.0439013f, +0.0855360f, -0.1120613f, +0.0947779f,
  +0.1831602f, -0.1087079f, +0.0181978f, +0.0571349f, +0.1868584f, +0.0228374f, +0.1818298f, -0.1142883f,
  +0.0679494f, -0.1039751f, -0.2387282f, -0.0580864f, -0.1263986f, +0.0152575f, +0.0899050f, +0.0129387f,
  +0.1139142f, +0.0102951f, +0.2354186f, -0.1860191f, +0.1308737f, +0.0208972f, -0.0273823f, +0.2465708f,
  -0.0617243f, +0.0547213f, +0.0769858f, +0.2956682f, -0.0668811f, +0.1213437f, -0.0684579f, +0.0310421f,
  -0.0783615f, +0.2043745f, +0.0332790f, +0.1501852f, -0.1686868f, +0.1294954f, -0.2468443f, +0.0491164f,
  -0.0282358f, -0.0165998f, +0.3530838f, +0.1786018f, -0.1303421f, -0.1033983f, +0.1082633f, +0.1813620f,
  -0.2908564f, -0.1527211f, +0.2789669f, +0.1145076f, +0.1427446f, -0.2097563f, +0.0841692f, -0.0628682f,
  +0.0054203f, +0.1185118f, +0.1149001f, +0.2451478f, -0.2722606f, -0.3522215f, -0.0430549f, -0.1799701f,
  -0.1334244f, -0.4270877f, +0.0642098f, -0.2291372f, -0.0511717f, -0.1992440f, -0.2520474f, -0.1465446f,
  +0.1350878f, -0.2672724f, -0.0778095f, -0.2066064f, +0.3805939f, +0.2409245f, +0.0638641f, +0.1614387f,
  +0.2005740f, -0.1358211f, -0.0186031f, +0.3243666f, -0.4486977f, -0.4902390f, -0.0853068f, +0.0552294f,
  -0.3319929f, -0.0034710f, +0.2107078f, +0.1600042f, -0.2244875f, -0.3468229f, -0.2111201f, -0.2504200f,
  +0.1032956f, -0.0861802f, -0.2146046f, +0.2516374f, -0.3308905f, +0.0259149f, -0.3372240f, -0.0057261f,
  +0.2458562f, -0.4932101f, +0.1146018f, -0.1475877f, +0.0006956f, -0.0924467f, +0.2365615f, +0.2504245f,
  -0.1823090f, -0.0284329f, +0.0153945f, +0.1062971f, -0.0403839f, -0.0170991f, -0.1297297f, -0.1133418f,
  -0.1239039f, -0.1282625f, -0.1635034f, -0.0343693f, -0.1031667f, +0.1624745f, -0.2190398f, -0.0326599f,
  -0.2374042f, -0.2794383f, +0.0815203f, -0.0583554f, -0.1130888f, +0.0100262f, -0.1683708f, -0.0194872f,
  -0.3397786f, -0.1004735f, -0.3523273f, +0.1273749f, +0.1002411f, -0.1972297f, -0.0675012f, -0.2523847f,
  +0.0927263f, +0.0703916f, -0.2104146f, -0.1213012f, +0.1513433f, -0.3387121f, -0.0661686f, -0.0372934f,
  +0.1246311f, +0.1460349f, -0.1985510f, +0.0619811f, +0.1669655f, +0.0184470f, +0.0288801f, +0.0462622f,
  -0.1091214f, -0.4209185f, -0.1849766f, +0.0104928f, +0.1669142f, -0.1242627f, +0.1853509f, -0.2323297f,
  +0.1174041f, +0.1414517f, -0.1839436f, +0.1506393f, +0.0186323f, -0.1103495f, -0.1151816f, +0.0155559f,
  +0.0639678f, -0.2279813f, -0.1725349f, +0.0307945f, +0.0739557f, -0.1991687f, +0.1676081f, +0.1540693f
);

const float biases[4] = float[4](
  -0.0266665f, +0.0395839f, -0.0056441f, +0.0603066f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer79 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.3108080f, -0.1818946f, -0.1651441f, -0.1976108f, -0.2786137f, +0.1529767f, +0.1131260f, -0.1224011f,
  +0.0051152f, -0.0481947f, +0.1386153f, +0.0696167f, +0.1146347f, +0.1359877f, -0.1467899f, +0.0258422f,
  +0.2479362f, +0.0332323f, +0.0372886f, +0.0602197f, +0.0321142f, -0.5818982f, -0.1737508f, -0.2740439f,
  +0.0312193f, -0.3886931f, +0.0583481f, +0.1357572f, -0.2299220f, -0.2814123f, +0.1942497f, -0.4594245f,
  +0.2498134f, -0.1771283f, +0.1078930f, +0.1824371f, -0.1873936f, -0.0954677f, -0.0066787f, +0.1001030f,
  +0.1796962f, -0.4065000f, +0.1615998f, -0.1015395f, -0.1367302f, -0.3285224f, -0.0608008f, +0.2075154f,
  -0.1363702f, +0.1282722f, -0.3420364f, -0.3491165f, +0.1530184f, -0.2904303f, +0.0343989f, -0.1165716f,
  +0.3278243f, -0.0059241f, +0.2295397f, +0.5134177f, +0.3245350f, -0.0172345f, +0.1290894f, -0.1663902f,
  +0.1190050f, +0.2666849f, +0.0388653f, +0.1512922f, -0.0883618f, -0.2916583f, +0.2088517f, +0.0061144f,
  +0.1500486f, -0.0020287f, +0.1050245f, +0.0334916f, +0.1785053f, +0.1039430f, -0.0122686f, +0.0858411f,
  +0.2062113f, +0.0273248f, -0.0825355f, -0.0485844f, +0.2399299f, -0.1401361f, +0.0429343f, -0.0132343f,
  +0.0384908f, +0.2604885f, +0.1547281f, +0.3141395f, -0.0643303f, +0.4041908f, -0.1957815f, +0.0478934f,
  +0.5086414f, +0.0765338f, +0.1706095f, -0.2741239f, +0.0589589f, -0.0087640f, +0.4423356f, -0.0512204f,
  -0.2032584f, +0.2129466f, +0.2088594f, -0.0848117f, +0.0600071f, -0.1790708f, -0.1134501f, -0.1117718f,
  +0.0580967f, -0.1538919f, +0.1258776f, -0.0761353f, -0.3176964f, -0.1125935f, -0.2902774f, -0.0186217f,
  +0.6410238f, +0.3115747f, +0.1342254f, -0.1534515f, +0.0288832f, +0.0746493f, +0.2507951f, +0.1190482f,
  -0.5167108f, -0.4827957f, -0.1051885f, +0.5868404f, +0.0015689f, -0.4476755f, +0.1309220f, -0.1157799f,
  +0.2322601f, -0.8074155f, -0.1254884f, +0.1111049f, -0.5465767f, -0.4161277f, -0.1208858f, -0.2873577f,
  -0.0983879f, -0.2484013f, +0.2038706f, -0.0180433f, -0.0497371f, +0.0501165f, +0.1344370f, -0.1472439f,
  +0.4426735f, +0.3173825f, -0.0419541f, +0.3019088f, +0.0092928f, -0.4927066f, +0.3633800f, +0.0712813f,
  +0.0462220f, -0.1122494f, -0.0151390f, +0.1899053f, +0.2853571f, +0.4532326f, -0.1319201f, +0.0586277f,
  +0.0009646f, +0.1772387f, -0.1995366f, -0.0833722f, -0.1191973f, +0.0941857f, +0.1546006f, +0.0950587f,
  -0.3377013f, -0.4680282f, -0.0095647f, -0.0570000f, -0.0094230f, +0.1303429f, -0.3865777f, -0.3453171f,
  +0.2123963f, +0.0665316f, +0.1080339f, +0.1749898f, +0.0652667f, -0.5814855f, +0.4307545f, +0.1199714f,
  +0.1613405f, +0.1267512f, +0.0383506f, -0.1232380f, +0.0298164f, +0.1038697f, -0.0002608f, +0.0063047f,
  -0.5001141f, -0.0096661f, +0.1875959f, +0.1118087f, -0.2914725f, -0.1044769f, -0.1290827f, +0.0745667f,
  +0.2963527f, -0.2826499f, -0.1708764f, -0.2160734f, -0.0003082f, -0.0495107f, +0.1366689f, -0.1511978f,
  +0.0865071f, +0.0147381f, +0.1628833f, -0.1694377f, -0.0350945f, -0.1100764f, +0.0565472f, +0.0068526f,
  -0.0128995f, +0.0892490f, +0.0905826f, +0.0122166f, +0.1787376f, -0.0971087f, -0.0234277f, +0.0042562f,
  -0.0519950f, -0.1532358f, +0.0342766f, -0.3108864f, -0.0114999f, +0.3510977f, -0.0822462f, -0.1394550f,
  -0.3060349f, -0.0772485f, -0.2455845f, -0.0781410f, -0.0319537f, -0.1581696f, +0.0989298f, +0.1012641f,
  -0.2350010f, +0.1399329f, -0.2550501f, -0.0139754f, +0.2201823f, -0.1772583f, -0.1611998f, -0.1001603f,
  +0.1015656f, -0.0558249f, +0.2638366f, -0.1406167f, +0.0611059f, +0.1447345f, +0.0925758f, +0.0956936f,
  +0.1672127f, -0.0427745f, -0.2631520f, +0.0045354f, -0.0940149f, -0.0442950f, -0.3242945f, +0.1613315f,
  -0.0509397f, -0.0149739f, -0.2190768f, +0.0078794f, -0.0561107f, +0.1346264f, -0.1802400f, +0.1198253f,
  -0.0205007f, -0.1236543f, +0.2820310f, +0.0879572f, +0.2323273f, -0.2406584f, +0.1116160f, +0.1566459f
);

const float biases[4] = float[4](
  -0.1047546f, -0.0084433f, -0.0034187f, -0.0130885f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer80 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0118251f, -0.0832502f, -0.0275530f, -0.0874633f, -0.3782052f, -0.0293477f, +0.0111206f, +0.0626788f,
  -0.2065449f, +0.1209054f, -0.3811077f, -0.0929458f, -0.1687988f, -0.0956608f, -0.1822608f, -0.0732544f,
  +0.0212138f, +0.0492383f, -0.2650858f, +0.2094873f, +0.0307680f, -0.0169279f, +0.0334256f, -0.0517859f,
  +0.0656090f, +0.0350171f, -0.1851683f, +0.0382542f, -0.1709989f, +0.2113805f, -0.4628089f, -0.0839489f,
  -0.3595731f, -0.1439851f, +0.0422051f, -0.2315306f, -0.0561415f, -0.0114662f, +0.3937764f, +0.1282727f,
  -0.0652733f, -0.0165439f, +0.0845434f, +0.0628593f, -0.0207442f, -0.3406852f, +0.0520230f, +0.1780185f,
  -0.2200758f, -0.2099862f, -0.1142983f, +0.2587550f, -0.4315580f, +0.2641761f, -0.6125313f, +0.0939443f,
  -0.2367131f, -0.0614624f, -0.0305658f, +0.2140486f, +0.0811066f, +0.2540622f, -0.0573957f, +0.0472184f,
  -0.0413098f, -0.1364186f, -0.3000445f, +0.2811540f, +0.1915487f, +0.1362351f, -0.1491617f, +0.0457914f,
  +0.0056869f, -0.1407181f, +0.4231687f, +0.1635611f, -0.0157031f, +0.3799416f, +0.1377331f, +0.0649667f,
  -0.1258315f, -0.2463064f, +0.2353179f, -0.0115975f, -0.2550250f, +0.1013437f, -0.2549664f, -0.0981082f,
  +0.0285226f, +0.0645944f, -0.3031152f, +0.1426609f, +0.0966430f, -0.4301223f, +0.0509272f, +0.1822184f,
  +0.0025671f, -0.0472126f, -0.0378115f, -0.0311432f, +0.3390166f, -0.2101233f, +0.0894443f, -0.1639867f,
  +0.1140748f, +0.1372101f, -0.2236285f, +0.0947531f, -0.0132890f, -0.0071573f, -0.0389883f, +0.0065545f,
  -0.2332994f, +0.4421231f, +0.1396804f, +0.1693450f, -0.0324985f, -0.2137811f, +0.0933537f, -0.1825460f,
  +0.0887166f, +0.1785441f, -0.2146207f, -0.0705698f, +0.0201730f, -0.3063575f, +0.1086474f, +0.0487937f,
  +0.0259408f, -0.0224436f, -0.0207009f, -0.1908357f, -0.2065293f, +0.1008041f, +0.0854801f, -0.1211112f,
  +0.1793949f, +0.0203295f, -0.1383215f, -0.2205109f, +0.1475015f, +0.1418350f, +0.1187762f, +0.1723972f,
  +0.1755553f, +0.1973504f, -0.0307517f, -0.0766706f, +0.1094150f, +0.2927389f, +0.0573572f, -0.3613046f,
  +0.3273048f, +0.1407468f, -0.3321926f, -0.0625204f, -0.0654971f, -0.1920723f, -0.2723809f, +0.2801169f,
  +0.0480237f, -0.1907448f, +0.0986607f, +0.1233510f, -0.1251226f, +0.1090476f, +0.0067155f, +0.1515218f,
  -0.2155011f, +0.1567782f, -0.1536329f, +0.0263107f, -0.1032220f, -0.1515089f, +0.3576643f, -0.0797768f,
  -0.0944406f, +0.0284876f, -0.0860593f, +0.0884362f, +0.2025677f, -0.4004787f, +0.4130332f, +0.3082276f,
  +0.1675561f, +0.2080865f, -0.3323559f, +0.0835674f, +0.3125037f, -0.0178674f, -0.1119750f, +0.1330446f,
  -0.3176222f, -0.0398708f, -0.0106278f, +0.2273276f, -0.2641826f, -0.0711765f, +0.1261813f, +0.0641232f,
  -0.0308669f, +0.0472715f, -0.0653622f, +0.3015587f, -0.1090550f, +0.0093573f, -0.6616071f, +0.0954774f,
  -0.0330512f, -0.2689524f, -0.1609113f, -0.0944148f, -0.0170122f, +0.0866596f, +0.1158448f, -0.1601998f,
  +0.0745860f, +0.0722696f, +0.0080678f, -0.0863976f, +0.0352551f, -0.0057374f, +0.0626459f, -0.3296255f,
  +0.0268942f, +0.2336162f, +0.1139988f, -0.1322107f, -0.2059091f, -0.3804016f, -0.0500305f, +0.1422024f,
  +0.1333640f, +0.1722154f, +0.0161231f, +0.0485488f, +0.0004990f, +0.2604066f, -0.0617625f, +0.0367403f,
  -0.1490873f, +0.1712248f, -0.1591478f, -0.0473092f, +0.2812346f, +0.0930379f, -0.0194568f, +0.1357084f,
  -0.0258378f, +0.1890294f, -0.2567457f, -0.1444885f, -0.3292315f, -0.0888366f, -0.0266338f, -0.2766248f,
  +0.3720120f, -0.2005720f, +0.1612999f, -0.0793273f, -0.0293191f, +0.1628940f, -0.0224033f, +0.0726289f,
  -0.2094609f, -0.0716760f, -0.0504396f, -0.0904291f, +0.2622769f, +0.1220456f, -0.6535519f, +0.0421154f,
  -0.4355290f, +0.0183345f, -0.1481532f, +0.1508569f, -0.2085201f, -0.1094209f, +0.4466482f, -0.2960303f,
  -0.0272591f, -0.1118800f, +0.0283736f, +0.0473144f, +0.0210965f, +0.0960348f, +0.0964594f, +0.0466339f
);

const float biases[4] = float[4](
  +0.0132205f, +0.0071654f, +0.0485467f, +0.0374867f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer80 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0068233f, +0.1023183f, +0.2542801f, -0.0243832f, +0.0301911f, +0.0392232f, +0.0397386f, -0.1854064f,
  -0.0105519f, -0.0857717f, +0.0993010f, +0.0544755f, -0.2103336f, +0.1260793f, -0.1307422f, -0.0668562f,
  +0.0378245f, +0.0949605f, -0.2445569f, +0.0207160f, +0.0182168f, -0.1435523f, -0.1123455f, +0.1766691f,
  +0.0864837f, +0.0762513f, +0.2812354f, +0.1882983f, +0.1264981f, -0.1613575f, -0.3293438f, -0.0045392f,
  -0.1008326f, -0.2020506f, +0.2391936f, -0.0705117f, +0.2306071f, -0.3321382f, +0.2116942f, -0.2488563f,
  +0.1008747f, -0.0741656f, -0.2909735f, -0.0728320f, -0.0668291f, +0.1046859f, +0.2126370f, -0.0151145f,
  +0.1702562f, -0.2549015f, +0.0686653f, -0.0720273f, +0.1505869f, -0.3159829f, +0.0752492f, -0.3203023f,
  -0.0990445f, -0.2144806f, -0.0713725f, +0.0635106f, -0.1666388f, -0.0818003f, +0.1379361f, -0.1204246f,
  +0.1538162f, +0.0462510f, +0.1601545f, +0.0912666f, +0.0948705f, -0.0444663f, +0.0811663f, +0.0997222f,
  -0.0755011f, -0.0990457f, -0.1283568f, +0.0079812f, +0.0080888f, -0.0162753f, -0.0212259f, +0.2008070f,
  -0.0005469f, -0.1537288f, +0.4293239f, -0.2224060f, -0.1356026f, +0.1715666f, +0.0420912f, +0.1131380f,
  +0.1033623f, +0.1138877f, +0.1639770f, +0.2574836f, +0.1078935f, +0.0079972f, +0.0032868f, +0.0164902f,
  -0.2376692f, +0.0447278f, +0.5746843f, -0.2088583f, +0.0626818f, -0.0555597f, -0.0320012f, -0.0631528f,
  -0.0415790f, -0.0618958f, -0.0566046f, +0.0564263f, +0.4349997f, +0.2284707f, +0.3690644f, -0.0428262f,
  -0.1955099f, -0.1717950f, +0.2001783f, -0.0020100f, +0.1195862f, -0.2269914f, +0.0627379f, +0.0777283f,
  -0.1828776f, +0.0395672f, -0.4310116f, +0.0681621f, +0.1747985f, -0.1803782f, +0.4990991f, +0.0135595f,
  +0.1703215f, -0.0230445f, -0.3690308f, -0.0788202f, -0.1220637f, -0.0868808f, -0.1992001f, +0.1397415f,
  -0.1286957f, -0.2800217f, -0.3372045f, +0.0428225f, -0.1429467f, -0.0809605f, -0.2025845f, +0.0554528f,
  -0.0244736f, +0.0611364f, -0.2142722f, -0.0076024f, -0.3149611f, +0.3053818f, -0.0406885f, +0.1005152f,
  -0.0744903f, +0.0878596f, +0.0728533f, +0.1059257f, +0.2882273f, -0.1701970f, +0.3633596f, +0.1290390f,
  -0.0676374f, -0.0410253f, -0.0164570f, -0.1524250f, -0.2205820f, -0.1085171f, -0.0421619f, +0.2316962f,
  -0.0861289f, -0.3162391f, +0.2092884f, +0.3739008f, +0.1595833f, +0.0001770f, +0.1226922f, +0.0950096f,
  -0.1492480f, -0.0608781f, -0.1026488f, +0.1745960f, -0.2563408f, +0.3338459f, -0.1342603f, +0.3067605f,
  +0.1231320f, -0.0340986f, +0.2528106f, +0.0404454f, -0.3246377f, -0.4076838f, +0.1078524f, +0.0615464f,
  +0.0008939f, -0.1305199f, -0.1297994f, +0.1303739f, +0.1771643f, -0.2838936f, +0.1758590f, +0.2573098f,
  +0.0788693f, -0.2842737f, -0.3094016f, +0.1098878f, -0.1141121f, +0.1503430f, -0.5127310f, -0.1115474f,
  -0.0171026f, -0.0680730f, +0.0394715f, -0.0547890f, +0.1260776f, +0.3284661f, -0.1300209f, -0.0840042f,
  -0.0597574f, +0.1579999f, +0.1981614f, -0.0407571f, +0.0542511f, +0.1735997f, -0.1395466f, -0.1454998f,
  +0.0591393f, +0.0843316f, +0.0330862f, +0.0663739f, +0.2398901f, +0.2769082f, -0.0470358f, -0.0563118f,
  +0.1032763f, -0.1531022f, +0.5314789f, +0.2848394f, +0.0825851f, +0.1158672f, -0.0337380f, -0.2672099f,
  -0.0693081f, -0.1302753f, +0.1886808f, +0.0460518f, +0.1713160f, -0.1485742f, +0.4128117f, -0.1357397f,
  -0.1690502f, +0.0709009f, -0.2173069f, -0.0381208f, -0.1069197f, +0.3068385f, -0.2067481f, +0.0915495f,
  +0.1616136f, -0.3465694f, -0.0653590f, +0.2281323f, +0.0706068f, +0.0043526f, +0.1955861f, -0.0259043f,
  +0.1251398f, -0.1152184f, +0.2089628f, +0.0600437f, +0.2445543f, -0.3343933f, +0.0244139f, +0.0757185f,
  -0.0862231f, +0.0134384f, -0.1107659f, +0.1034854f, +0.0847126f, -0.3696910f, +0.0995740f, -0.0467663f,
  -0.0726921f, -0.2081718f, +0.1223009f, +0.0590918f, +0.1711590f, -0.2379843f, -0.0131779f, -0.1971525f
);

const float biases[4] = float[4](
  +0.0050654f, -0.0101436f, -0.0009516f, -0.0432216f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer81 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1799668f, -0.1115108f, -0.1533833f, -0.0125806f, +0.0765879f, -0.4296930f, -0.1328860f, +0.0969083f,
  -0.0494504f, -0.1985139f, -0.0692350f, -0.0249472f, +0.1179726f, +0.2132619f, -0.0884924f, +0.1776774f,
  +0.1837058f, +0.0380597f, -0.0546151f, +0.1631321f, +0.2045437f, +0.0330567f, +0.2998607f, -0.1135615f,
  -0.3601415f, +0.1280429f, -0.1461377f, +0.1363362f, -0.0489892f, +0.0822464f, -0.0337450f, +0.0827877f,
  +0.2397595f, -0.1038879f, -0.0646932f, -0.0282201f, +0.1108630f, +0.2521160f, -0.0939629f, +0.0638391f,
  +0.0904836f, -0.1635423f, +0.0423724f, +0.0733019f, +0.0664977f, +0.0061201f, +0.1209881f, +0.1592331f,
  -0.0484281f, +0.0750469f, +0.0410069f, +0.2037935f, +0.0623809f, +0.1166055f, -0.0049873f, -0.0342066f,
  -0.0135686f, -0.2270394f, -0.0500395f, +0.1941342f, -0.0216019f, -0.2298479f, +0.1259112f, +0.0579581f,
  +0.1132148f, -0.0166417f, -0.3833720f, -0.0027454f, +0.2247623f, -0.1393170f, +0.2230090f, +0.0199003f,
  +0.0825897f, -0.3834866f, +0.1904135f, -0.1050180f, -0.0941052f, -0.0294477f, -0.1139618f, -0.0141513f,
  -0.5077755f, +0.5389381f, -0.3591760f, +0.3774759f, +0.0926341f, -0.1413426f, -0.0664482f, -0.3200310f,
  +0.2352298f, -0.0793722f, +0.2458944f, -0.0927297f, -0.2689299f, +0.2322128f, +0.1416893f, +0.1622918f,
  +0.4105669f, +0.4740960f, -0.1893882f, -0.2775907f, +0.3137068f, -0.2894969f, +0.3892013f, +0.1077486f,
  +0.2918907f, -0.1940967f, +0.6688725f, +0.0406750f, -0.3861630f, +0.0156295f, -0.0670194f, -0.0950997f,
  -0.5864347f, +0.2172291f, -0.2690956f, +0.2162727f, +0.0798810f, +0.0274152f, -0.3540099f, -0.4037063f,
  -0.1601126f, -0.2796329f, +0.0155976f, +0.2377987f, -0.1842837f, +0.1910335f, -0.3351136f, +0.0378667f,
  +0.2657037f, -0.1733470f, -0.2077772f, -0.2159266f, +0.4342371f, -0.4686696f, +0.0992701f, +0.2066317f,
  +0.0877879f, +0.1781469f, -0.0604326f, -0.0054764f, -0.2549238f, +0.1088919f, +0.0669594f, -0.0128062f,
  +0.2076851f, -0.1511076f, -0.0508907f, +0.2479457f, -0.0488667f, -0.1373896f, +0.0301781f, -0.0639435f,
  -0.3103229f, +0.2519587f, -0.0516722f, -0.2553884f, -0.0789878f, +0.2289012f, -0.1200086f, +0.0930237f,
  +0.0664294f, +0.0618003f, +0.1076477f, +0.2672826f, +0.1018556f, -0.2793137f, +0.0723658f, -0.3131052f,
  -0.2054626f, +0.5279548f, +0.0140192f, -0.3669101f, -0.2226216f, -0.0122518f, -0.0921369f, +0.1846916f,
  +0.3212785f, -0.3429844f, +0.1641342f, +0.7522107f, +0.4949530f, -0.3941867f, +0.0926734f, -0.6617899f,
  -0.0916126f, +0.0575841f, -0.0991642f, -0.1095186f, -0.0060330f, -0.1035347f, +0.0100606f, +0.3039434f,
  -0.1065148f, -0.0708067f, +0.0293587f, +0.4184017f, +0.3337932f, -0.1317359f, +0.0228709f, -0.2546131f,
  -0.0994997f, +0.4119814f, -0.1483310f, -0.3078326f, -0.3204752f, -0.2915135f, -0.1398147f, +0.4139088f,
  +0.0552963f, -0.0882001f, +0.1517739f, +0.0969279f, +0.2619469f, -0.0345352f, -0.0343251f, +0.0578601f,
  -0.0267471f, +0.0723945f, -0.0258506f, -0.0492574f, +0.1230117f, -0.0654009f, +0.1580966f, -0.1106005f,
  -0.2764268f, +0.1302669f, -0.0683894f, -0.2162311f, +0.2545300f, -0.2177414f, -0.0356256f, -0.2160009f,
  +0.0209403f, +0.1162807f, +0.2199997f, -0.0964656f, +0.0624973f, -0.2262725f, -0.1082863f, +0.0801497f,
  -0.1323810f, +0.2530712f, -0.0610941f, +0.0280618f, -0.0464220f, +0.1846981f, -0.0401496f, -0.0079668f,
  -0.2582613f, +0.3513319f, +0.1328948f, -0.1764021f, +0.0892391f, +0.0075373f, -0.0320986f, +0.1050580f,
  -0.1058808f, +0.0796989f, -0.3807633f, +0.1684240f, +0.0910910f, +0.3993441f, +0.0987295f, -0.1758860f,
  -0.2810847f, -0.1330422f, -0.2072985f, -0.0436264f, -0.0813055f, +0.1949959f, -0.2334512f, +0.1641096f,
  -0.0924485f, -0.1140302f, +0.0139208f, +0.1276673f, +0.0602601f, +0.0216205f, -0.2021770f, -0.1026305f,
  -0.0535892f, +0.2298778f, +0.1095598f, -0.0596307f, +0.4070809f, +0.0473181f, +0.2104863f, +0.2096807f
);

const float biases[4] = float[4](
  +0.0045281f, -0.0179561f, -0.0128336f, +0.0541329f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer81 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.4293546f, +0.1028964f, -0.1259298f, +0.0789094f, -0.1110311f, +0.1242686f, -0.1431184f, +0.2121054f,
  +0.0792680f, -0.2296255f, +0.0124817f, +0.5330216f, +0.1913420f, -0.1193412f, +0.0917291f, +0.1563253f,
  +0.0740239f, +0.3398519f, +0.3485467f, +0.2501707f, -0.3755333f, +0.3047650f, +0.0849122f, -0.1771724f,
  +0.2945796f, +0.1471657f, +0.1273885f, -0.3296721f, +0.0674083f, -0.1945973f, +0.1446550f, -0.0017848f,
  -0.3049532f, -0.1173247f, -0.2195688f, +0.6731991f, -0.1979825f, -0.0533961f, -0.0105486f, -0.0579014f,
  -0.2666262f, -0.0888451f, +0.2171040f, -0.1504960f, -0.1882513f, +0.0908649f, -0.1964216f, -0.0429614f,
  +0.0515761f, +0.1959595f, -0.0443324f, -0.1460965f, -0.0067760f, -0.1157134f, -0.0459913f, +0.0778229f,
  +0.0512704f, +0.0457610f, -0.1325904f, +0.0146819f, +0.1723370f, -0.0085492f, -0.0441129f, +0.1253811f,
  -0.1968356f, +0.2427935f, +0.1616439f, +0.2301310f, +0.1818670f, +0.2683842f, -0.0446901f, -0.1447568f,
  -0.1506600f, +0.0275827f, +0.0913476f, +0.1724239f, +0.0098970f, -0.1893557f, -0.1393289f, -0.0509572f,
  -0.1403238f, +0.1219051f, +0.2462927f, +0.0123299f, -0.1101317f, -0.1483127f, -0.2451844f, +0.1155363f,
  -0.2324882f, +0.0870269f, -0.0781703f, +0.0947804f, +0.0135682f, -0.0526867f, -0.0955218f, -0.1520952f,
  +0.2732370f, -0.3527584f, +0.0805785f, +0.1934068f, -0.1488285f, +0.0150558f, -0.2075956f, -0.1455413f,
  -0.0955090f, -0.1122948f, -0.1772031f, +0.0270806f, -0.3721453f, -0.0973528f, -0.0084465f, -0.0223172f,
  -0.4177061f, +0.3491813f, -0.0380227f, +0.1293837f, -0.1208315f, +0.1048939f, -0.1868743f, -0.1873997f,
  -0.1560371f, +0.4581994f, +0.0628095f, -0.0664053f, -0.2125711f, -0.2524338f, +0.1136548f, -0.2200170f,
  +0.2304873f, -0.3047148f, +0.4605707f, +0.0155393f, +0.1524864f, -0.1138082f, +0.1773761f, -0.3626264f,
  -0.2859546f, +0.3146973f, +0.2364006f, +0.5617024f, +0.0707091f, -0.1663326f, -0.1498107f, -0.1198454f,
  +0.4195240f, +0.0640197f, +0.0288206f, -0.1582546f, -0.0367500f, -0.1561732f, +0.3057943f, -0.1474409f,
  -0.0954412f, -0.0274773f, -0.1434253f, +0.3174881f, -0.4462939f, +0.0534156f, +0.3723807f, +0.1138379f,
  -0.0704834f, +0.0832713f, +0.4651392f, +0.3153650f, -0.2336731f, +0.0187743f, -0.2206861f, -0.1750764f,
  +0.1447705f, +0.4626950f, +0.0602121f, +0.1320531f, -0.0828529f, +0.0655464f, -0.2557696f, +0.2395081f,
  +0.0312566f, +0.0113375f, -0.0442548f, +0.1187037f, +0.1462360f, +0.3618593f, +0.0825359f, +0.0441497f,
  +0.3433730f, -0.1400702f, +0.0631594f, -0.3137011f, +0.0068530f, +0.0813242f, -0.0485225f, +0.0442956f,
  +0.1485871f, -0.1059637f, +0.2533477f, +0.3471203f, -0.1122707f, -0.3535683f, +0.0218087f, -0.1541998f,
  +0.0717045f, +0.1474707f, -0.1520150f, +0.1178226f, -0.1467481f, -0.2540844f, -0.0991863f, +0.2350352f,
  +0.0221428f, -0.2410192f, +0.2414693f, +0.2648644f, +0.2383746f, +0.0171173f, -0.2390982f, -0.0796143f,
  +0.1028284f, +0.1687900f, +0.2488506f, +0.1562976f, -0.2314721f, -0.1581316f, +0.1469952f, +0.0418355f,
  -0.0701364f, +0.2793165f, +0.2299003f, +0.1444506f, -0.2026886f, +0.2216003f, +0.1829989f, -0.0877518f,
  +0.1497974f, +0.1661148f, +0.0396573f, +0.1235426f, -0.5028944f, -0.1341131f, -0.3268232f, -0.1001177f,
  -0.1299007f, -0.0045940f, +0.0773435f, +0.0634544f, -0.1217858f, -0.1200867f, +0.0116182f, -0.2305517f,
  -0.2608139f, -0.2618795f, +0.1296222f, +0.2584238f, +0.0010849f, +0.1244131f, +0.1957093f, -0.2102375f,
  +0.1582370f, -0.2198350f, -0.0376029f, +0.2892752f, -0.3166377f, +0.1355678f, +0.0785573f, -0.0699290f,
  +0.1926441f, +0.0551058f, -0.2010306f, -0.1807557f, +0.0719671f, -0.1732063f, +0.3287141f, -0.1007389f,
  +0.1189615f, +0.0791686f, -0.4937733f, -0.2300394f, -0.2644402f, +0.1338410f, -0.0109525f, -0.0561794f,
  +0.0954917f, -0.1291355f, -0.1404403f, -0.0959941f, -0.0227661f, -0.1944660f, +0.0571969f, +0.1408825f
);

const float biases[4] = float[4](
  -0.0114955f, -0.0049810f, -0.0192961f, -0.0018134f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer82 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0249801f, -0.2607563f, +0.1451243f, +0.2803203f, -0.1640540f, +0.0398437f, +0.1441333f, -0.2664527f,
  -0.2681728f, +0.1428841f, +0.2906044f, -0.0388794f, -0.1146806f, -0.2354062f, +0.3085928f, +0.0060061f,
  +0.1717326f, -0.1657949f, -0.1573028f, +0.0541149f, +0.0276905f, +0.4760947f, +0.1760512f, -0.0445369f,
  -0.0689217f, +0.2311707f, -0.3049745f, -0.0575119f, -0.1882724f, +0.2748581f, -0.1316186f, -0.6273273f,
  -0.0152464f, +0.0516552f, -0.0930505f, +0.1724679f, -0.1047516f, -0.2173210f, +0.0451099f, -0.4435979f,
  +0.2273131f, +0.2280337f, -0.2717556f, +0.0040935f, -0.0231980f, +0.0513872f, -0.0519106f, -0.0043108f,
  -0.1687372f, -0.2629877f, +0.0039653f, -0.0015828f, +0.1035090f, +0.0638021f, +0.1643146f, -0.3610946f,
  +0.0256047f, +0.3319650f, -0.1071039f, -0.0393721f, -0.4136432f, +0.1713213f, +0.5041724f, -0.1017893f,
  -0.2935170f, -0.0867881f, +0.1321531f, -0.1994354f, -0.1060321f, +0.0827511f, -0.4272590f, -0.0695496f,
  -0.0844051f, +0.0625021f, -0.3653436f, -0.1482116f, -0.2609987f, -0.3548185f, -0.1964985f, -0.1422210f,
  +0.1875714f, +0.0607307f, +0.0598945f, -0.0677114f, -0.1018340f, +0.0226564f, -0.0388363f, -0.1119314f,
  -0.0452693f, -0.3125286f, -0.1894214f, +0.2980858f, +0.1070297f, +0.1156406f, -0.3097432f, -0.2122944f,
  +0.3378252f, +0.0489967f, +0.0883132f, +0.0914081f, -0.0313687f, +0.0369274f, -0.1804141f, +0.4793883f,
  +0.3553821f, -0.2224242f, -0.6175621f, -0.0125877f, -0.4236583f, +0.0976106f, +0.3464809f, -0.2870334f,
  -0.1748141f, +0.4973860f, +0.6428160f, -0.0781572f, -0.3283684f, +0.0457114f, -0.2271191f, -0.1189495f,
  -0.0451948f, +0.1377245f, -0.1189503f, -0.1448373f, +0.0099056f, +0.2101145f, -0.0121627f, +0.1614616f,
  +0.0165100f, -0.1985446f, +0.1005717f, -0.0015778f, -0.2468655f, +0.2589137f, -0.0910317f, +0.0297451f,
  -0.1811110f, +0.0920847f, -0.2712681f, -0.0202183f, +0.1279458f, -0.0233195f, -0.1083518f, +0.0304732f,
  +0.4509335f, -0.2274368f, +0.3982551f, -0.0365520f, +0.1116739f, -0.2862396f, -0.2304718f, -0.2463031f,
  -0.0338472f, -0.1126576f, -0.2209342f, -0.1276212f, -0.0484436f, +0.0445117f, +0.1229474f, -0.0889756f,
  -0.2056533f, -0.1465137f, +0.0703602f, -0.1408695f, +0.0379121f, -0.0181539f, -0.1585599f, -0.0985389f,
  -0.0062559f, +0.1554207f, -0.0479979f, +0.1691559f, +0.1515116f, -0.3398500f, +0.0858624f, +0.2484010f,
  +0.0932290f, +0.2971480f, +0.3578027f, -0.2596271f, +0.0432163f, +0.3160276f, -0.1689527f, +0.0261663f,
  -0.0234939f, -0.0489924f, -0.0308962f, -0.1735151f, -0.0443055f, -0.1562197f, +0.0980456f, +0.1199283f,
  +0.3159542f, +0.1370252f, -0.2069289f, -0.2229949f, -0.0353956f, +0.0439647f, -0.2107608f, -0.1266054f,
  -0.0043595f, -0.4662880f, -0.0338528f, -0.0968924f, -0.0075990f, -0.1632941f, -0.0905071f, -0.2123717f,
  +0.1233587f, +0.1291749f, +0.1317952f, -0.0503149f, +0.0837260f, +0.3032947f, -0.1124727f, +0.0798346f,
  +0.0653820f, +0.0464925f, +0.1408847f, +0.0603913f, +0.1664742f, -0.1815910f, +0.1570742f, +0.1151065f,
  -0.0365890f, -0.0462863f, -0.1305891f, +0.0682418f, +0.0352432f, -0.0474235f, +0.1056141f, +0.1556858f,
  +0.0564373f, +0.0572123f, -0.0584145f, +0.1159044f, -0.0110951f, -0.0660266f, -0.0663749f, -0.0873657f,
  +0.1253098f, -0.0875345f, -0.1688589f, -0.0404092f, +0.1921624f, +0.1155803f, +0.1627304f, -0.0031432f,
  -0.0145855f, +0.3274756f, +0.4488958f, -0.0275745f, +0.2854995f, +0.0132030f, +0.3311643f, +0.0246550f,
  -0.0521626f, -0.2738549f, +0.0960206f, +0.0602669f, +0.2259266f, +0.1083627f, +0.2485885f, +0.0283005f,
  +0.0112570f, -0.3917204f, +0.1358152f, +0.0072737f, +0.2817666f, -0.2220757f, -0.2241294f, -0.2444828f,
  -0.0032187f, +0.8355142f, -0.4669687f, +0.2308066f, +0.1329940f, +0.1200005f, -0.3377672f, +0.2055362f,
  -0.0136881f, +0.1628394f, -0.2433268f, +0.1274694f, -0.1023197f, +0.2369391f, +0.0301694f, +0.0891282f
);

const float biases[4] = float[4](
  +0.0076982f, -0.0070069f, +0.0038639f, +0.0321731f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer82 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.3035234f, -0.0164432f, +0.3655745f, -0.0172571f, -0.2367008f, +0.0580767f, -0.0531286f, +0.3160855f,
  +0.1874279f, +0.0910932f, -0.7750715f, -0.1027025f, -0.1880109f, +0.0447095f, +0.0881605f, +0.1200045f,
  +0.0417403f, -0.0743758f, +0.1002593f, +0.1972191f, -0.0468636f, -0.2653264f, -0.0873444f, -0.1774227f,
  +0.1811003f, +0.1021774f, +0.2117976f, +0.0156096f, +0.0979918f, +0.0982237f, -0.1209500f, +0.2574621f,
  -0.2842704f, -0.2360553f, +0.2914251f, -0.2413638f, +0.1693424f, +0.2496495f, -0.1101755f, +0.3451316f,
  -0.2182285f, +0.2279453f, +0.1470634f, +0.1670496f, -0.1283392f, +0.1400218f, +0.1435079f, -0.1181041f,
  -0.1826657f, -0.0585803f, -0.0451507f, +0.0540743f, +0.0711073f, -0.0750025f, -0.2753670f, +0.1719908f,
  +0.0633631f, -0.0609946f, +0.0054293f, -0.0369489f, +0.0116377f, -0.0813105f, +0.2763142f, -0.0748099f,
  -0.0269365f, +0.0740554f, -0.1489930f, -0.0570951f, +0.0557241f, +0.1979235f, +0.0179518f, +0.1110922f,
  -0.0372739f, -0.0988670f, -0.0263291f, +0.3175661f, -0.0884088f, -0.0335250f, -0.3174771f, +0.1566429f,
  +0.0728514f, +0.0386560f, -0.2176092f, -0.0564692f, +0.0618300f, +0.1542376f, -0.0894000f, -0.0025475f,
  -0.0888166f, +0.0083469f, -0.1248048f, +0.1225245f, -0.1714462f, -0.0803357f, +0.1018836f, -0.0391991f,
  -0.0163586f, +0.0088755f, -0.0340585f, -0.3449801f, -0.1889142f, -0.4598148f, +0.0105142f, -0.2905679f,
  +0.0889951f, -0.0584840f, -0.0124627f, +0.0649659f, -0.0656114f, +0.1347396f, -0.1070327f, -0.1074664f,
  +0.1581530f, -0.1406371f, +0.4581426f, -0.0777830f, +0.1559961f, +0.3215680f, -0.2428784f, +0.1688245f,
  +0.0793396f, +0.0828388f, -0.1314096f, +0.0509366f, -0.1193201f, +0.1359448f, -0.0353272f, -0.2615902f,
  -0.3949393f, -0.1460838f, +0.2524511f, +0.1269604f, +0.1093395f, +0.2308340f, -0.2788184f, -0.3765437f,
  +0.2089733f, -0.0413083f, -0.2034757f, +0.1852758f, -0.1379274f, +0.2306801f, -0.0298541f, -0.1935135f,
  -0.1370658f, +0.2211087f, -0.0804412f, -0.3961591f, +0.1805703f, -0.0699295f, +0.3286129f, +0.4592087f,
  +0.0981717f, -0.0028789f, -0.3197719f, +0.1181092f, +0.0086122f, -0.0375959f, -0.1339554f, +0.0975871f,
  +0.1477395f, +0.0684406f, +0.0365366f, -0.0218604f, -0.1167847f, -0.1528270f, +0.2235802f, +0.0598255f,
  -0.0851865f, -0.1128579f, -0.1064698f, -0.0884880f, +0.2436584f, -0.0955614f, +0.3651138f, -0.1685465f,
  -0.0316558f, +0.2020420f, +0.0010088f, -0.3004554f, +0.2444978f, -0.2701553f, -0.3133269f, -0.2560130f,
  -0.0513270f, +0.0630337f, +0.1562067f, +0.0688813f, -0.0043616f, +0.0369021f, +0.3625052f, -0.1428803f,
  +0.0091006f, -0.0974498f, -0.1788805f, -0.2248377f, +0.2446801f, +0.0988662f, +0.0185420f, +0.1706297f,
  -0.0518997f, -0.0804098f, +0.2486360f, -0.1250107f, +0.3119861f, +0.1861887f, -0.1339917f, +0.1018186f,
  -0.0999901f, -0.1232483f, -0.1022288f, -0.1020498f, +0.0914668f, -0.0742214f, -0.0121275f, -0.0432881f,
  -0.0606875f, -0.1134822f, +0.1649507f, -0.1953930f, +0.0330385f, -0.0776000f, -0.0984092f, -0.2274351f,
  +0.2858489f, -0.2636218f, +0.1147076f, +0.0580973f, -0.1084454f, +0.1714341f, -0.1352457f, -0.2689905f,
  +0.2266999f, +0.1259420f, -0.1504871f, -0.0733168f, -0.0716683f, +0.0593358f, +0.1834482f, +0.0885769f,
  -0.2722927f, +0.2040943f, +0.0689919f, +0.3597779f, +0.2070658f, +0.2385427f, -0.0619126f, +0.5057461f,
  +0.0381993f, -0.0622224f, -0.2824650f, +0.0528360f, +0.0358187f, -0.3071525f, -0.2853890f, -0.1231925f,
  +0.0236392f, -0.0366509f, +0.1047827f, -0.1463313f, +0.2461620f, +0.0728007f, -0.3909537f, +0.4289920f,
  -0.0444001f, -0.1294688f, -0.0485259f, -0.2124268f, +0.0616801f, -0.0296842f, +0.2342843f, +0.3867669f,
  -0.0306716f, +0.0683351f, +0.2371522f, +0.1477889f, +0.1535862f, +0.0207562f, +0.1404599f, +0.1671126f,
  +0.0796620f, -0.1242804f, +0.0244868f, +0.1795092f, +0.0492090f, +0.1023038f, -0.0923233f, -0.0573974f
);

const float biases[4] = float[4](
  +0.0117946f, +0.0118847f, +0.0216726f, -0.0327689f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer83 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1622386f, +0.1429672f, -0.1205584f, +0.0199044f, +0.0794140f, -0.2641737f, +0.1508355f, +0.0564570f,
  -0.0007502f, +0.1811930f, +0.0773753f, +0.0410359f, -0.1413387f, -0.1720564f, +0.2914466f, -0.1966272f,
  -0.1697873f, -0.1011809f, +0.3179177f, +0.2101816f, -0.1186255f, -0.5308791f, -0.0988283f, +0.0795311f,
  -0.1330256f, +0.0260323f, +0.1866704f, -0.0228435f, -0.3142699f, -0.2091972f, +0.0808308f, -0.4975508f,
  -0.2033277f, -0.2403974f, +0.1166628f, -0.6033205f, -0.4190572f, +0.0535971f, -0.0123197f, +0.2265750f,
  -0.1111661f, -0.0808466f, -0.0886994f, +0.3031606f, -0.1553159f, -0.1354233f, -0.0473065f, -0.1207532f,
  -0.3283192f, -0.0837608f, +0.5293283f, -0.1028818f, -0.5597917f, +0.1825840f, +0.1628015f, -0.1097568f,
  +0.3332137f, -0.2334479f, +0.1031761f, +0.2944335f, -0.4014357f, +0.1326682f, -0.2200769f, -0.3837247f,
  -0.0301989f, -0.0034635f, +0.0706746f, +0.3676002f, -0.3648319f, +0.0252092f, -0.2194145f, +0.1265180f,
  -0.2215922f, -0.0683222f, +0.3359722f, +0.1207046f, +0.2126941f, -0.3083412f, +0.0401982f, -0.1733633f,
  +0.0806735f, -0.0161045f, +0.0674654f, +0.0328986f, +0.0583323f, -0.3354602f, -0.1087744f, -0.2442185f,
  +0.2887417f, +0.0185410f, +0.3792515f, -0.3254200f, -0.1318241f, +0.2139562f, -0.0100800f, +0.0103210f,
  -0.1179318f, +0.3236179f, +0.0398341f, -0.1068249f, +0.1120067f, +0.0953843f, +0.0374546f, -0.0538943f,
  -0.0774262f, -0.1480803f, -0.3140758f, +0.4826449f, -0.1036441f, -0.4524439f, +0.0390177f, -0.4262683f,
  +0.2451288f, -0.0381044f, +0.5246603f, +0.1896525f, -0.4691079f, -0.2207624f, +0.0458341f, -0.0751845f,
  -0.0406185f, +0.2736970f, +0.0284644f, -0.0690571f, +0.1636603f, -0.1962450f, -0.0783488f, -0.0972603f,
  +0.0493740f, -0.0489376f, -0.1610288f, +0.0655095f, +0.0455183f, -0.2700788f, +0.4216183f, -0.1227947f,
  +0.4961208f, +0.0974260f, -0.1695430f, -0.0494245f, -0.3438232f, +0.2920653f, -0.0538723f, -0.0340765f,
  +0.1684105f, +0.0463533f, +0.3896554f, -0.1659916f, +0.0245593f, -0.0412579f, +0.0306334f, -0.1310485f,
  +0.1796465f, -0.3741887f, +0.1262212f, +0.4292635f, +0.1324698f, -0.0048846f, -0.0580139f, +0.1334263f,
  -0.0073215f, +0.1882360f, +0.4555606f, -0.0148115f, -0.2088569f, +0.0189520f, -0.0684000f, +0.0818354f,
  +0.3237346f, +0.0756944f, +0.3581398f, -0.2998349f, +0.1710909f, -0.1071649f, +0.3857093f, -0.0442995f,
  -0.0600162f, -0.3091343f, -0.1693050f, +0.0646086f, -0.1308463f, +0.4849191f, -0.4378749f, +0.1773828f,
  +0.0735632f, +0.2236591f, -0.0787979f, +0.3930328f, -0.6353278f, -0.1860878f, +0.0718567f, -0.0900690f,
  -0.3461584f, +0.1323676f, +0.0965703f, -0.2714647f, -0.1981544f, -0.0799465f, -0.3370665f, +0.0529353f,
  +0.1267628f, +0.2582151f, +0.6733592f, -0.1684179f, -0.2778251f, -0.4080411f, -0.1218810f, +0.0729419f,
  +0.0716360f, -0.3572857f, +0.3070764f, -0.1836313f, -0.0859771f, -0.7157627f, +0.1430327f, -0.0003341f,
  +0.0665896f, +0.1560542f, -0.0609871f, -0.1134998f, -0.1010272f, +0.0268035f, +0.2330327f, -0.1711090f,
  +0.0836444f, -0.0460366f, -0.2733350f, -0.0553093f, -0.1180948f, -0.0594392f, -0.0789239f, -0.0635223f,
  -0.0595881f, -0.0463939f, -0.0907538f, -0.1704202f, +0.2010131f, +0.1657091f, -0.1143663f, +0.0616289f,
  -0.2117618f, -0.2872645f, +0.0101530f, -0.1097824f, +0.0059580f, -0.0671159f, -0.2591112f, +0.1086894f,
  -0.1514760f, -0.1335947f, -0.0466985f, -0.0407193f, +0.3982908f, -0.2032797f, +0.1029798f, -0.2671890f,
  -0.0736749f, -0.1494180f, -0.0647753f, -0.2350324f, +0.0055948f, -0.0629590f, -0.1256941f, -0.0602792f,
  -0.1181109f, -0.0295286f, -0.0376635f, -0.0372783f, -0.0880680f, +0.1951755f, +0.1165984f, -0.0784402f,
  +0.1806725f, -0.3583925f, -0.1170983f, -0.2594667f, +0.0228750f, -0.0909055f, -0.0512402f, +0.1447908f,
  -0.0229394f, -0.1059877f, +0.2564202f, +0.2341876f, +0.0176766f, -0.1031142f, -0.3037162f, +0.0616399f
);

const float biases[4] = float[4](
  -0.0208773f, +0.0047599f, -0.0188256f, +0.0305309f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer83 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2582941f, +0.1051490f, -0.0024932f, +0.1503494f, -0.0166095f, -0.0295647f, -0.0520509f, -0.0556893f,
  -0.5610487f, +0.0763448f, -0.0517427f, -0.1397213f, +0.2600769f, -0.2302907f, -0.3330454f, -0.1292358f,
  -0.3291745f, +0.0752867f, -0.1475994f, -0.1046854f, +0.0231166f, -0.1073708f, -0.1528849f, -0.0311713f,
  -0.1082530f, -0.0676871f, +0.0397392f, +0.0171052f, -0.0653707f, +0.1436647f, -0.3399954f, +0.2498829f,
  +0.2850821f, +0.0332798f, -0.1108129f, -0.1734586f, +0.2400064f, +0.4330372f, -0.0485949f, +0.0513996f,
  -0.1277645f, +0.1241914f, -0.1019746f, -0.0281951f, -0.0044960f, -0.1509192f, -0.1282807f, -0.0113244f,
  +0.0654477f, +0.1486086f, -0.0219510f, -0.2207794f, -0.2834495f, +0.1505573f, +0.0074283f, -0.0382957f,
  +0.3701532f, -0.2653772f, -0.2210196f, -0.1192663f, -0.1459365f, -0.1038663f, +0.1904770f, -0.0006723f,
  +0.1199162f, +0.0008230f, -0.0663507f, +0.0537721f, -0.0540010f, +0.1566421f, -0.1852836f, -0.0347187f,
  +0.2667412f, -0.2512572f, +0.0382982f, -0.0173885f, +0.0012450f, -0.1197089f, -0.1172877f, +0.1537296f,
  -0.0191889f, +0.0146597f, +0.0614882f, -0.2936428f, -0.1649799f, +0.1235922f, +0.2501599f, +0.0256852f,
  +0.0219133f, +0.0700306f, -0.0109795f, +0.0254124f, +0.2172981f, -0.1846962f, -0.0905536f, -0.0723128f,
  -0.4540011f, +0.5696608f, -0.0747781f, -0.0556302f, -0.0066196f, +0.3672368f, -0.0716767f, +0.1287176f,
  +0.1077870f, -0.0737899f, -0.0277120f, -0.0036745f, +0.2639250f, +0.1662467f, +0.3294542f, -0.3304522f,
  -0.0838376f, -0.0604782f, -0.1479883f, -0.0525453f, +0.2135599f, -0.2112757f, -0.1010266f, +0.1718509f,
  +0.1099577f, -0.1134929f, +0.1084804f, -0.1832874f, +0.0402917f, -0.1246977f, +0.1296911f, -0.2803889f,
  -0.0262871f, +0.1629899f, -0.2815979f, +0.0112018f, -0.2419434f, -0.0608211f, -0.1840540f, +0.2179791f,
  +0.0628347f, -0.0280876f, +0.0794054f, +0.0493162f, +0.0152937f, -0.0654362f, +0.0758391f, -0.0677446f,
  +0.1754421f, -0.0185962f, -0.0181069f, +0.1066134f, -0.3634128f, +0.1171437f, -0.0661426f, +0.0557807f,
  -0.2157056f, +0.1555788f, +0.0477317f, +0.2195051f, -0.4165742f, +0.0165601f, +0.0116595f, +0.0924814f,
  -0.1533853f, +0.1458780f, -0.0285211f, -0.2081422f, +0.2249025f, +0.0505835f, -0.0489932f, -0.2182897f,
  +0.4712022f, -0.1172988f, +0.1256910f, -0.0110929f, -0.1136434f, -0.3623741f, +0.3583123f, -0.1534881f,
  +0.1542194f, +0.1367853f, +0.4112922f, -0.0057815f, -0.0717634f, -0.2614637f, +0.2833590f, +0.0265263f,
  +0.0935910f, -0.1364455f, -0.0028110f, -0.2175097f, -0.0115497f, -0.0938500f, -0.1394432f, +0.1169162f,
  +0.4378361f, -0.0182447f, -0.0908382f, -0.1200501f, -0.0596564f, -0.4415330f, +0.1076056f, -0.2043933f,
  +0.1236853f, -0.0280110f, +0.1800856f, +0.0084255f, +0.1523285f, -0.0399510f, -0.3927294f, -0.2163529f,
  +0.0664279f, -0.0567721f, +0.1351224f, -0.0511411f, -0.0770589f, +0.4612362f, -0.4425507f, -0.1935846f,
  -0.0877302f, -0.1275820f, +0.1300542f, -0.1249232f, +0.1949169f, -0.0834672f, +0.0556163f, +0.0347238f,
  +0.1873849f, +0.0290008f, -0.3245029f, +0.2059376f, +0.0319885f, -0.2213362f, -0.0460323f, +0.2415386f,
  -0.0178925f, -0.1743021f, -0.1911935f, +0.0321967f, -0.1032977f, +0.0670136f, -0.1775193f, +0.1606947f,
  -0.0808151f, +0.0161801f, -0.0174909f, -0.0223109f, -0.0193154f, +0.1451669f, +0.0862467f, -0.0187923f,
  -0.2447203f, +0.0900312f, -0.2745792f, -0.2861673f, +0.2755608f, -0.0028399f, +0.0249318f, -0.1443786f,
  -0.0764486f, +0.0196415f, +0.0420805f, -0.0429600f, -0.1698540f, +0.0680380f, -0.1863729f, -0.0391444f,
  -0.1038653f, -0.1121118f, +0.0826923f, +0.0835060f, -0.0226472f, +0.1053604f, +0.0882736f, -0.0791668f,
  -0.0146333f, -0.1246964f, -0.0344189f, -0.1135765f, -0.1790936f, +0.5029193f, -0.2702472f, -0.1799802f,
  -0.3303892f, +0.0615475f, +0.4618747f, +0.0748183f, +0.0249277f, +0.0244402f, -0.1311616f, +0.1838221f
);

const float biases[4] = float[4](
  +0.0266637f, +0.0144492f, +0.0343389f, +0.0228144f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer84 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2009655f, -0.2754037f, +0.0070411f, -0.2601275f, +0.0508725f, -0.0551915f, -0.1108152f, +0.0883231f,
  -0.1231580f, -0.1617304f, +0.3203922f, -0.2930322f, -0.1622688f, -0.1458278f, -0.0856885f, +0.0132491f,
  -0.1105957f, -0.0632285f, -0.0246115f, +0.2363679f, +0.1063870f, -0.0207896f, -0.4894888f, +0.0249682f,
  -0.2837826f, -0.1578456f, +0.0350030f, +0.1619144f, -0.1959297f, +0.2662267f, +0.0600670f, -0.1092078f,
  +0.1351540f, -0.3024546f, +0.0604115f, -0.0438740f, -0.1553802f, +0.0989478f, -0.0039491f, +0.3603467f,
  +0.0329004f, +0.1428202f, +0.0938326f, +0.2731624f, +0.2831415f, +0.5619972f, +0.0238334f, -0.1185223f,
  -0.2927123f, -0.2063574f, -0.0208697f, -0.0619618f, +0.1221551f, +0.0224361f, +0.1375997f, +0.0495253f,
  -0.1024367f, -0.1596749f, -0.0061042f, +0.0012142f, +0.1959552f, -0.0925803f, -0.0084781f, +0.0066410f,
  +0.0982128f, -0.0322499f, -0.1371480f, -0.1018697f, +0.0971514f, -0.2926140f, -0.2444641f, -0.0084880f,
  +0.2446034f, -0.1781805f, +0.3124665f, +0.0537044f, -0.2201896f, +0.2176891f, +0.0595495f, -0.0219088f,
  +0.3330945f, +0.1715269f, +0.0468821f, +0.3189303f, -0.0378494f, +0.0893091f, -0.3605345f, +0.2930330f,
  +0.0193543f, +0.1474282f, -0.2396957f, +0.0585866f, -0.3310555f, +0.2555290f, +0.2452294f, +0.1725500f,
  -0.1602895f, +0.1459549f, +0.2535171f, -0.0255120f, +0.1285701f, +0.0536600f, -0.0325095f, -0.0363083f,
  +0.2771500f, +0.0752787f, +0.1033096f, -0.0022910f, -0.2206635f, +0.3306988f, -0.4278753f, -0.0728619f,
  -0.0364825f, +0.0575007f, -0.1070185f, +0.1858460f, +0.2496667f, -0.4672833f, +0.3486584f, +0.1132328f,
  -0.0322123f, +0.0768449f, +0.1327568f, -0.0370042f, +0.0648815f, +0.0010944f, -0.0344450f, +0.2323739f,
  -0.1070773f, +0.0823178f, -0.1974959f, +0.0262128f, -0.0825207f, +0.0337179f, -0.0029175f, -0.0923120f,
  +0.1352943f, -0.0520882f, +0.3145570f, -0.2120077f, -0.0822499f, +0.1013639f, +0.1672527f, +0.0847506f,
  +0.1435788f, +0.4035048f, -0.1449248f, -0.2320513f, +0.1432973f, -0.2120432f, -0.1500671f, -0.2239237f,
  -0.1912961f, +0.2361938f, +0.0962078f, +0.1050764f, +0.1697800f, +0.1251169f, -0.1033907f, +0.0884420f,
  -0.0843269f, +0.0478687f, +0.3078082f, -0.1566445f, -0.0216878f, +0.0154238f, -0.1734565f, +0.0449901f,
  -0.3394379f, +0.0771135f, +0.0095960f, +0.2620703f, -0.0765794f, +0.2283394f, +0.0564037f, -0.2242703f,
  -0.2588835f, +0.2172360f, -0.3275488f, +0.1007089f, -0.1061285f, -0.0577132f, -0.2750652f, -0.0961027f,
  -0.2362280f, +0.1396405f, +0.0568357f, -0.0263717f, -0.1442973f, +0.0061466f, +0.4488735f, -0.0573926f,
  +0.0065496f, -0.0344991f, +0.0529749f, +0.2644393f, -0.1497246f, +0.1448985f, +0.3060084f, +0.1792806f,
  -0.1664196f, -0.1749245f, -0.0224823f, -0.0565849f, +0.3396804f, -0.1641981f, +0.0890602f, -0.0658629f,
  +0.1338612f, -0.1009103f, +0.0572752f, -0.0824579f, -0.1360427f, -0.0946098f, +0.2618416f, -0.1417729f,
  -0.0834283f, +0.0698713f, +0.1658667f, -0.2540286f, +0.1734480f, -0.0739231f, +0.0366077f, -0.2191557f,
  +0.1572089f, +0.0039744f, -0.0513292f, +0.1402794f, +0.0475143f, +0.0320545f, +0.0958138f, +0.0098208f,
  +0.3399097f, -0.0869833f, +0.0345610f, +0.1000874f, +0.3064219f, +0.1408866f, +0.0199158f, +0.1353218f,
  +0.1635062f, +0.2443156f, +0.3233038f, -0.0204599f, +0.0790393f, +0.0237479f, +0.1591159f, -0.0406876f,
  +0.0626716f, -0.4617741f, -0.0550736f, +0.1294105f, +0.3617276f, -0.1409386f, +0.0965457f, +0.0932183f,
  +0.1949755f, -0.0539645f, +0.0764758f, +0.2719046f, +0.0291620f, +0.0664597f, -0.2387416f, +0.2208560f,
  -0.0423193f, +0.1413865f, -0.0952231f, +0.1621807f, -0.0320529f, +0.0961869f, -0.1118791f, -0.1319771f,
  +0.1944976f, -0.4749331f, +0.0022132f, +0.0082031f, +0.2134197f, +0.3733083f, -0.1751825f, +0.0178002f,
  +0.0041467f, +0.3274443f, +0.0514454f, +0.0216423f, -0.0464044f, +0.1596444f, +0.0006418f, +0.0780135f
);

const float biases[4] = float[4](
  +0.0319129f, -0.0325069f, +0.0249435f, +0.0137876f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer84 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2947741f, -0.2010803f, -0.0867188f, +0.0560656f, -0.0283365f, +0.1765768f, -0.0758733f, -0.2287450f,
  +0.3384618f, -0.1650253f, +0.0676009f, -0.0045783f, -0.1019532f, +0.3272749f, -0.2272310f, +0.0898656f,
  +0.2120969f, +0.3474023f, +0.0377386f, +0.0897640f, -0.0040249f, +0.0449334f, -0.0955037f, +0.1353604f,
  +0.0031478f, -0.1322110f, -0.0180865f, -0.0681079f, +0.2149405f, -0.1502650f, +0.1257224f, +0.1972834f,
  +0.4759037f, -0.0862539f, +0.1424671f, -0.1203539f, -0.3894767f, -0.1732543f, +0.4219409f, -0.2231443f,
  +0.1762016f, -0.1348773f, +0.1761895f, +0.1592705f, -0.0475434f, -0.2049123f, -0.0604180f, +0.0263178f,
  -0.1397346f, +0.0598667f, -0.0810470f, -0.1612430f, +0.0504348f, +0.0178465f, -0.1576762f, +0.0402129f,
  +0.1037048f, +0.1452003f, +0.0831251f, -0.2211724f, -0.3395621f, +0.0568267f, +0.1147299f, +0.1738371f,
  +0.0506194f, -0.1540022f, -0.1128568f, -0.0485318f, +0.0113323f, +0.1014716f, +0.1754396f, -0.0611893f,
  +0.1396224f, -0.4692099f, -0.0843382f, -0.0337613f, -0.1194007f, +0.1663596f, -0.0373935f, +0.0844783f,
  +0.1250201f, -0.2284147f, +0.3024839f, +0.0798152f, -0.0106688f, +0.0569715f, -0.0538964f, +0.2249480f,
  -0.1561299f, +0.1061638f, -0.1250746f, +0.1137422f, +0.2226135f, +0.1912968f, -0.2337173f, +0.0505679f,
  +0.0378114f, -0.6265480f, -0.4107906f, +0.0187326f, -0.1240049f, +0.2490674f, +0.0480007f, -0.0697537f,
  +0.1230031f, +0.3769880f, +0.5498414f, +0.1213593f, -0.0726511f, -0.0615338f, +0.0881944f, +0.0096679f,
  -0.2126330f, +0.2511894f, -0.3211676f, +0.0896819f, +0.2558874f, -0.2574145f, -0.1652732f, +0.0461534f,
  +0.1037198f, +0.0371978f, +0.0161818f, +0.1029705f, +0.0354273f, +0.1554219f, +0.0820140f, -0.0473627f,
  -0.0441710f, +0.1183872f, +0.2449287f, -0.0508238f, +0.2479191f, +0.0545762f, +0.0720160f, -0.1389620f,
  +0.1532494f, +0.1147646f, -0.2477723f, +0.2192511f, +0.1796744f, +0.3374746f, -0.1959708f, -0.0055959f,
  +0.0108269f, -0.0409513f, -0.4760713f, +0.2911518f, -0.0572198f, +0.0417746f, +0.3290154f, +0.0496950f,
  +0.0879301f, -0.0605829f, -0.1866809f, +0.1215938f, -0.2139133f, +0.3241411f, +0.2704255f, +0.0819453f,
  +0.1129599f, -0.0328812f, +0.3407493f, -0.0528315f, -0.0373214f, -0.1778779f, +0.2737086f, +0.0844744f,
  +0.1778695f, +0.1540397f, +0.2922054f, +0.0595506f, +0.2173424f, +0.0381604f, +0.2819875f, +0.0963579f,
  -0.1158827f, +0.3298156f, -0.0766084f, -0.3092649f, +0.1357645f, -0.2334642f, -0.0327997f, +0.0289879f,
  -0.2606147f, +0.0108332f, -0.0066892f, +0.1019188f, +0.0179740f, -0.0831423f, -0.1676261f, -0.0917636f,
  +0.3343668f, -0.2899798f, +0.1131885f, -0.1150074f, +0.0518531f, -0.0476256f, +0.2229026f, +0.1251444f,
  -0.3686430f, +0.1190666f, -0.1828060f, +0.2367937f, +0.0129194f, -0.0711710f, +0.3177488f, -0.2298943f,
  +0.1265663f, -0.0858859f, -0.0271975f, -0.0506136f, +0.0856599f, -0.0528208f, +0.0817793f, -0.0224029f,
  -0.3491141f, +0.0870988f, +0.0834880f, -0.0525240f, +0.0102057f, -0.1694778f, +0.0078104f, -0.0198474f,
  -0.2381307f, +0.0675111f, -0.0385110f, -0.1931285f, -0.2201066f, -0.0548615f, +0.0180904f, -0.0853487f,
  +0.3129273f, +0.0217181f, -0.3632141f, +0.0002873f, -0.0535656f, +0.0068464f, +0.2764619f, -0.0954849f,
  -0.0678863f, +0.1770930f, +0.0036490f, -0.0476659f, +0.1448190f, -0.0504800f, +0.0396197f, +0.0362204f,
  +0.0567488f, -0.1282113f, -0.3213463f, +0.1423431f, -0.2939390f, +0.1514371f, +0.3551203f, +0.1601923f,
  +0.0653675f, +0.0837768f, +0.2541213f, +0.0376390f, -0.3276381f, -0.3344852f, -0.0005948f, +0.1627242f,
  +0.0491708f, +0.1603204f, -0.1229625f, -0.1065518f, +0.0126574f, -0.1187668f, +0.1364094f, -0.1092288f,
  -0.1758091f, -0.1446501f, -0.0956568f, +0.0849119f, -0.0377916f, -0.0252048f, +0.3038544f, -0.4132179f,
  -0.0073495f, +0.1754652f, -0.1577970f, +0.1856189f, -0.1179652f, +0.0356467f, -0.2343541f, -0.0460999f
);

const float biases[4] = float[4](
  -0.0120516f, +0.0130388f, +0.0047868f, -0.0310691f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer85 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0192643f, +0.0327779f, -0.2617722f, +0.1827146f, +0.0170066f, +0.0300155f, -0.1786300f, +0.4258329f,
  +0.1616707f, -0.0553222f, -0.3040308f, +0.1190679f, +0.0438167f, +0.2171765f, -0.0281324f, +0.3504163f,
  -0.1093238f, -0.0045285f, -0.2476027f, +0.0130434f, -0.2946616f, +0.1081119f, -0.0373898f, -0.0102083f,
  +0.1163198f, -0.0158843f, -0.0912121f, +0.3538201f, -0.1250190f, +0.0935878f, +0.2603818f, +0.0239516f,
  -0.0848989f, -0.0531009f, -0.1168520f, -0.0725520f, +0.3159462f, +0.1246679f, +0.0225642f, +0.1406461f,
  -0.1554568f, +0.1608344f, +0.1393905f, +0.0008174f, -0.1597096f, +0.0315068f, +0.1259158f, +0.0730954f,
  +0.1164882f, +0.1143975f, +0.3075223f, -0.0565577f, +0.0528316f, -0.0972116f, -0.0781015f, +0.1892030f,
  +0.0231050f, +0.2199351f, -0.2171956f, -0.1747922f, -0.0424530f, +0.1832142f, -0.4069116f, +0.1093762f,
  +0.0829211f, -0.2206311f, -0.1091867f, +0.0461951f, -0.1325744f, +0.0328629f, -0.2410560f, +0.1592063f,
  +0.0104070f, -0.0199026f, +0.2926241f, -0.0782416f, +0.1296738f, -0.0531414f, +0.3531312f, -0.2350201f,
  +0.1399559f, -0.1700592f, +0.0980790f, -0.1487650f, -0.0557123f, +0.1352243f, +0.3132803f, +0.0175643f,
  -0.0271649f, +0.0735719f, +0.0366195f, +0.3355314f, -0.0516698f, +0.0375005f, -0.0479378f, +0.0305164f,
  -0.1320757f, +0.3175726f, -0.0494308f, -0.0227206f, -0.0392287f, +0.0957568f, -0.2433225f, +0.0087382f,
  -0.3970788f, +0.3310997f, -0.1586920f, -0.6209332f, -0.5064504f, +0.1608509f, -0.3835614f, -0.1694758f,
  -0.1688123f, +0.2642203f, -0.1541909f, -0.1577323f, -0.0840187f, -0.1841583f, +0.0264117f, +0.3392257f,
  +0.1672933f, -0.0376550f, +0.1662014f, -0.1586024f, +0.1364793f, -0.1340024f, +0.0718891f, -0.1125292f,
  +0.2737130f, +0.2460657f, +0.2335855f, -0.4274909f, +0.1854509f, -0.0536814f, +0.0191814f, -0.1253299f,
  -0.0773269f, +0.0202375f, +0.0956892f, +0.1157737f, -0.2288319f, -0.2589490f, -0.0621384f, -0.0046844f,
  +0.0270281f, -0.0956036f, +0.1643827f, -0.4777403f, +0.1080830f, -0.0981608f, +0.0914583f, +0.0325909f,
  -0.1422077f, -0.1166838f, +0.0228199f, +0.0004776f, +0.3301475f, +0.0061787f, -0.2087236f, +0.1932207f,
  +0.2178448f, -0.1203529f, +0.0374522f, +0.1644022f, -0.0370021f, -0.3636578f, +0.3604056f, +0.0390787f,
  +0.2713052f, +0.0283178f, -0.0948657f, +0.3204032f, -0.0681188f, -0.1623585f, -0.1015371f, +0.2191292f,
  -0.1641501f, +0.0403033f, -0.1977073f, +0.2222204f, -0.3457072f, -0.0067039f, -0.0735162f, +0.0905204f,
  -0.1787698f, +0.0144460f, +0.0678571f, +0.0422895f, +0.2494378f, -0.1487276f, +0.4267268f, -0.0588906f,
  -0.0919383f, +0.1039345f, +0.2998056f, +0.1313889f, -0.0390646f, -0.1088677f, -0.2686225f, +0.1546548f,
  -0.2495033f, -0.4820976f, +0.0512035f, +0.2497252f, -0.3286748f, +0.0330528f, +0.0029534f, +0.1451332f,
  -0.1813623f, +0.3810397f, -0.0670038f, +0.1982426f, +0.1930358f, -0.1127359f, -0.0245359f, +0.3463190f,
  +0.1516035f, -0.0459993f, +0.1489492f, +0.0077860f, -0.1178648f, -0.0521014f, +0.1073090f, -0.0166154f,
  +0.0259090f, +0.0059293f, +0.1337327f, -0.5267791f, -0.0857446f, +0.0954488f, -0.0769762f, +0.0963959f,
  -0.0771294f, +0.1430431f, -0.1111555f, +0.2447450f, +0.2599143f, -0.0201574f, +0.0121355f, -0.0746972f,
  -0.1403735f, +0.0798560f, +0.0983715f, +0.1525636f, +0.0631804f, +0.1036517f, -0.0991538f, +0.1265784f,
  -0.2086556f, +0.1856252f, +0.2543776f, -0.1206438f, +0.0695521f, +0.2290309f, -0.0251589f, -0.2140617f,
  +0.0792571f, -0.0526186f, -0.2295649f, -0.0272899f, -0.1006352f, +0.0070547f, +0.2236137f, -0.0527602f,
  +0.2515702f, -0.0345010f, -0.1245715f, +0.3074640f, -0.1076399f, +0.1680846f, -0.1384219f, +0.2669045f,
  -0.0360533f, -0.0415851f, -0.1068271f, -0.2668453f, +0.2274082f, +0.2300459f, +0.1296848f, -0.0024785f,
  -0.0490832f, +0.1535799f, -0.2645531f, -0.0305154f, +0.3523894f, +0.0204646f, +0.0174952f, -0.0288414f
);

const float biases[4] = float[4](
  +0.0090558f, -0.0636402f, -0.0482439f, +0.0161421f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer85 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0603440f, +0.1617113f, +0.0894822f, -0.1468064f, +0.1801651f, -0.2120789f, +0.1524759f, +0.0106119f,
  +0.1170139f, -0.1597093f, +0.2478293f, +0.0646859f, -0.0409269f, -0.1535614f, +0.1301140f, +0.0586951f,
  -0.0370363f, -0.1524021f, +0.2143561f, -0.2147357f, -0.1281204f, -0.0186951f, +0.0982514f, -0.2577630f,
  +0.0095509f, +0.0687256f, +0.2164803f, +0.2665543f, +0.0187269f, +0.0477004f, +0.0024461f, -0.0367311f,
  -0.1037175f, +0.1958661f, +0.0782568f, -0.0240662f, -0.2174357f, +0.0048392f, +0.1905710f, -0.0797814f,
  -0.0808237f, -0.1829964f, +0.0890889f, -0.4328837f, +0.1436098f, -0.0717293f, -0.1654775f, -0.1008201f,
  -0.1590094f, -0.2514205f, -0.0855805f, +0.1204648f, +0.3494585f, -0.0867980f, +0.0807042f, -0.1053226f,
  -0.0376602f, +0.0379059f, -0.0286366f, -0.1787350f, +0.0490733f, +0.0102853f, -0.2444524f, -0.0709094f,
  -0.0708351f, -0.1132582f, +0.1217842f, +0.1053049f, -0.2922590f, -0.0716332f, -0.0988421f, -0.1038612f,
  -0.0197996f, -0.0240561f, -0.1610705f, -0.0133477f, -0.1319671f, +0.2534323f, -0.0687907f, +0.1302139f,
  -0.1532947f, +0.1137925f, +0.1332972f, -0.0501964f, -0.2652675f, +0.2772648f, -0.3172966f, +0.1469608f,
  -0.2137341f, +0.1673803f, -0.1387626f, -0.1093564f, -0.0647994f, +0.0513354f, -0.1194729f, -0.0252269f,
  +0.1202024f, -0.0378148f, -0.1147569f, -0.0725563f, +0.0909525f, -0.0199879f, +0.2588966f, -0.2125744f,
  -0.2730080f, +0.0193185f, -0.3291884f, +0.2897521f, +0.0235890f, +0.0163098f, +0.1647806f, -0.0393867f,
  -0.0891414f, +0.1179640f, -0.2215402f, -0.0145523f, +0.1828803f, -0.2473117f, -0.2398579f, +0.2064627f,
  -0.1555358f, -0.1417144f, -0.1030778f, +0.2118205f, -0.0382160f, -0.0596997f, +0.1617930f, -0.0221827f,
  -0.0661003f, -0.0243698f, -0.3140054f, -0.1326601f, +0.2235976f, -0.1138131f, +0.2166305f, +0.1173439f,
  -0.1403338f, +0.1705717f, -0.1289510f, +0.0520745f, +0.2016230f, +0.0170966f, +0.0837101f, -0.0814773f,
  +0.0219006f, +0.1526071f, +0.2719513f, +0.1201293f, -0.1272241f, -0.2460876f, +0.1223821f, -0.1345244f,
  +0.0958940f, +0.0251205f, -0.0690322f, -0.1600684f, -0.2532023f, -0.0733697f, +0.2612509f, -0.1473587f,
  +0.2844914f, -0.0603371f, +0.0931586f, +0.0969044f, +0.2071882f, -0.0259227f, +0.2325850f, +0.0998124f,
  -0.2410798f, -0.1481248f, +0.3394762f, +0.1049655f, +0.0191586f, +0.0708458f, -0.2563387f, +0.0590459f,
  -0.4070185f, +0.2029793f, +0.1551146f, +0.0853951f, -0.0245458f, +0.0540059f, -0.1397096f, -0.1177707f,
  -0.2495270f, -0.0611894f, +0.3044695f, +0.0124397f, -0.0027024f, +0.0313310f, +0.0229635f, -0.1088484f,
  +0.1438725f, +0.0787985f, -0.2147914f, -0.1915068f, -0.0628595f, -0.0229427f, +0.0484914f, -0.0103150f,
  +0.3523423f, -0.0829681f, +0.1329849f, -0.1252701f, +0.0201205f, -0.0531698f, +0.0247820f, +0.1541972f,
  -0.0732975f, -0.1096548f, -0.0956193f, -0.0072959f, -0.1756295f, +0.0757796f, +0.0789560f, -0.0502111f,
  +0.2689635f, -0.2358627f, -0.0392213f, +0.0258699f, +0.1871035f, -0.0922602f, +0.2006523f, -0.2147588f,
  +0.1884706f, -0.2519018f, -0.1760451f, +0.0603458f, -0.0317008f, +0.0178916f, +0.3457243f, -0.2263055f,
  -0.1354893f, -0.0420131f, -0.0761603f, +0.2610501f, -0.0482070f, -0.0071628f, -0.2725586f, -0.0702896f,
  -0.0992903f, +0.0183146f, +0.0899532f, +0.0542193f, +0.0250115f, +0.0268961f, +0.1950659f, -0.2539952f,
  +0.0710141f, -0.0708606f, +0.0011893f, -0.2408499f, -0.1113235f, +0.3286009f, -0.0044225f, -0.2929686f,
  +0.2703526f, -0.2630806f, +0.1064993f, -0.0356173f, -0.2476698f, +0.3281083f, +0.0438915f, -0.2147451f,
  -0.1340509f, -0.0543114f, -0.2130248f, +0.0456223f, -0.0627313f, +0.1593094f, +0.1433305f, -0.1733240f,
  +0.2336238f, +0.0167329f, +0.0922930f, +0.0587039f, +0.0864795f, +0.0572767f, +0.0124357f, +0.1753500f,
  +0.1250028f, -0.1554263f, +0.1063351f, +0.1513852f, -0.1479229f, +0.1883427f, -0.3254177f, +0.0197054f
);

const float biases[4] = float[4](
  +0.0202775f, -0.0005373f, -0.0277651f, +0.0422673f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer86 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0449052f, -0.0259148f, -0.1789959f, -0.1813948f, -0.1997274f, +0.1092994f, -0.0800233f, +0.1144871f,
  +0.0849860f, -0.0102387f, -0.1432882f, -0.1156740f, -0.0681475f, +0.0614272f, -0.2394501f, -0.2785889f,
  -0.2232944f, +0.0180984f, +0.1194768f, -0.1853499f, -0.0282120f, +0.0188038f, -0.1232922f, +0.1093044f,
  +0.1345463f, +0.1185676f, -0.3680192f, +0.1562348f, -0.1901476f, -0.1456648f, +0.0439587f, -0.2950482f,
  +0.1257026f, +0.2269387f, +0.0004954f, +0.1485166f, +0.0835775f, +0.1716867f, +0.4016643f, +0.0295933f,
  -0.1894553f, +0.0139524f, -0.3549245f, +0.1104895f, -0.0511946f, -0.0486102f, +0.0733134f, +0.1506857f,
  +0.1071257f, -0.2141808f, -0.1276856f, -0.0240289f, +0.1105313f, +0.2997873f, -0.0507563f, -0.0159638f,
  -0.0534434f, -0.1337373f, -0.0097350f, +0.0029919f, -0.1834714f, +0.0655198f, -0.2173122f, -0.1774282f,
  +0.0221162f, +0.0535452f, -0.0656887f, -0.1043912f, +0.0431248f, +0.1690084f, +0.1023964f, -0.2224604f,
  +0.0668366f, +0.1132471f, -0.1263794f, +0.0367107f, -0.1673710f, +0.0151259f, -0.1719177f, +0.3035674f,
  +0.0803515f, -0.0261044f, +0.2658807f, +0.1325375f, +0.0052961f, -0.0072288f, -0.0968873f, -0.1199449f,
  -0.1573755f, -0.0047094f, -0.0575964f, +0.0109515f, +0.1555138f, +0.4327552f, -0.2859722f, +0.2006707f,
  -0.0095690f, +0.0396734f, +0.1655715f, +0.1246174f, -0.2039590f, -0.0910389f, -0.0081660f, +0.1286952f,
  +0.1127538f, -0.0278063f, +0.0387554f, -0.0730999f, +0.1437893f, -0.0803010f, -0.2054237f, -0.0351884f,
  -0.0646972f, +0.1999639f, -0.1538801f, +0.1596707f, +0.1366473f, +0.0896385f, -0.0023138f, -0.1402143f,
  -0.0403171f, -0.0203438f, +0.0002556f, -0.0381488f, -0.1045672f, +0.0558669f, +0.4709345f, +0.0485471f,
  -0.0771685f, -0.0750224f, +0.1107426f, +0.0388029f, -0.1094200f, +0.0698615f, -0.0499219f, +0.2169887f,
  +0.0800857f, -0.0825533f, +0.1317348f, +0.1675270f, -0.0247912f, -0.0154366f, +0.0600026f, +0.0205250f,
  -0.0746421f, -0.2118766f, -0.0233667f, -0.0768414f, -0.2140200f, +0.0830917f, +0.1448991f, +0.0757028f,
  -0.0527783f, +0.0876424f, -0.0884768f, +0.0137222f, +0.0598595f, +0.0775662f, -0.1832105f, -0.1245752f,
  -0.1095978f, +0.1106668f, -0.0358027f, +0.0558311f, -0.0493206f, -0.1719375f, -0.0997489f, -0.0593952f,
  +0.0010119f, +0.0000787f, -0.0038581f, +0.4587321f, +0.1309545f, -0.2994428f, -0.1550711f, -0.0033810f,
  +0.0166884f, -0.1053838f, -0.3633992f, -0.1033136f, -0.1646425f, +0.2269372f, +0.0539348f, -0.0292155f,
  -0.0868028f, +0.0501421f, -0.0715300f, +0.0295250f, -0.0381543f, +0.2758086f, +0.1993110f, -0.0630608f,
  +0.2570334f, -0.1138066f, +0.0716961f, -0.0016149f, -0.1694517f, +0.0328524f, -0.0093705f, +0.0983337f,
  +0.1492254f, -0.1912824f, -0.0705627f, -0.0440206f, +0.2475528f, +0.2439446f, -0.0394585f, +0.0201011f,
  +0.2151081f, -0.0508402f, -0.0536898f, -0.2605194f, +0.0880408f, -0.0093634f, -0.2508235f, +0.0235528f,
  -0.0245604f, -0.3705484f, -0.0410320f, +0.0109330f, -0.1267755f, -0.2198131f, +0.0425114f, -0.0179302f,
  +0.1310793f, +0.2122699f, +0.0123203f, +0.1355534f, +0.1183366f, +0.0609714f, +0.1569992f, -0.0023842f,
  +0.1652884f, +0.1909253f, +0.0219778f, -0.0876640f, +0.0710405f, -0.2924468f, -0.2879210f, -0.1461923f,
  +0.0056214f, +0.1664093f, -0.0987760f, -0.0973388f, +0.1186215f, -0.0991651f, -0.0228829f, +0.1830119f,
  -0.2436330f, +0.0687556f, +0.0077323f, +0.2151447f, -0.1197644f, -0.2270157f, -0.0037540f, +0.0192305f,
  -0.2699614f, +0.1147199f, -0.1046028f, -0.0235373f, -0.1733463f, -0.0167332f, +0.0951238f, +0.0979539f,
  -0.0297806f, -0.2235086f, -0.0464802f, -0.1885789f, +0.2213167f, -0.1047311f, -0.0264788f, +0.0723316f,
  -0.0273586f, -0.2770424f, +0.1123535f, +0.3711531f, -0.0659816f, -0.3103101f, -0.0339027f, -0.2395915f,
  -0.2447148f, -0.0679146f, +0.1807327f, +0.2520705f, -0.2219226f, -0.0688489f, +0.1003593f, -0.0518708f
);

const float biases[4] = float[4](
  +0.0109828f, -0.0081057f, +0.0232321f, -0.0018900f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer86 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0398552f, -0.3266129f, +0.0241664f, -0.2468560f, +0.1719892f, -0.0958880f, +0.0009402f, +0.0133555f,
  -0.0553265f, -0.3194297f, +0.9217926f, -0.2738167f, +0.3388655f, +0.1587323f, -0.5243512f, +0.0340060f,
  +0.1620669f, +0.1321749f, +0.1746092f, +0.1120167f, +0.2316787f, +0.2623313f, -0.1349465f, +0.1904116f,
  +0.1454522f, +0.1183571f, +0.0789060f, +0.0783587f, -0.2618753f, -0.2394016f, +0.0941551f, -0.0227065f,
  -0.0637894f, +0.1043892f, +0.0820265f, +0.1335969f, +0.1990367f, +0.2981050f, +0.0672896f, +0.0160075f,
  +0.1532880f, +0.1266635f, +0.1360264f, -0.1476291f, +0.1761072f, -0.3150414f, -0.1653830f, +0.1341287f,
  +0.0232218f, +0.1083720f, +0.1108488f, +0.1191070f, +0.1121814f, -0.1223953f, -0.0499342f, +0.1951746f,
  -0.0558111f, -0.0749428f, -0.2568056f, -0.1358481f, -0.1490674f, +0.1999515f, +0.0651405f, -0.0555813f,
  +0.0620204f, +0.0334975f, -0.1171360f, +0.0512855f, -0.0574908f, -0.0102739f, +0.1411404f, -0.1478736f,
  -0.0497013f, +0.1569753f, +0.0924768f, -0.0706061f, +0.0104882f, +0.0491221f, +0.1907740f, -0.0390355f,
  +0.2163289f, -0.1144606f, +0.1406926f, -0.1832743f, +0.0651362f, +0.0564849f, +0.1689641f, -0.0697581f,
  +0.1530421f, -0.2371315f, +0.0069286f, -0.0099314f, +0.0682873f, -0.2700229f, -0.2922977f, -0.2060340f,
  -0.0593127f, -0.3256354f, +0.0784953f, -0.3512464f, +0.3558862f, -0.0559420f, +0.0457303f, -0.0565010f,
  +0.0128986f, -0.6881340f, +0.1417122f, -0.2937253f, -0.1517643f, -0.3102094f, -0.0544346f, -0.0976833f,
  -0.0516559f, -0.6667148f, -0.2080492f, +0.1666967f, -0.0564224f, +0.0365985f, +0.2647406f, -0.1297166f,
  -0.0887424f, -0.0522149f, +0.2157277f, -0.0049327f, +0.0872085f, -0.1286874f, -0.0020080f, +0.0563879f,
  -0.3819818f, -0.2581293f, +0.2738442f, -0.0908792f, +0.0667551f, +0.0011573f, -0.0119228f, +0.0708495f,
  -0.1632563f, -0.0919204f, +0.1983510f, +0.0193742f, -0.0028187f, -0.3108657f, -0.1092451f, +0.0578624f,
  +0.0930528f, -0.0487389f, +0.1516320f, +0.1343029f, +0.2236911f, -0.1675951f, +0.3027812f, +0.0193309f,
  +0.0978881f, -0.2174354f, +0.1276004f, -0.1052580f, -0.1064827f, +0.0000198f, +0.1223232f, -0.1204467f,
  +0.1487713f, +0.4743728f, +0.2239425f, -0.0540487f, +0.0308829f, +0.0108825f, +0.1578897f, -0.0219317f,
  +0.1053603f, +0.0282884f, -0.1357356f, -0.3003249f, +0.1459985f, +0.0782935f, -0.3137279f, -0.0065480f,
  -0.1509629f, -0.0035700f, +0.0010410f, +0.0821332f, -0.0292246f, -0.1757938f, -0.1111837f, -0.1953782f,
  +0.1181861f, -0.1736581f, -0.2029096f, -0.0243636f, +0.1048232f, -0.1671990f, -0.0997609f, -0.0644854f,
  +0.1550598f, +0.0293217f, +0.1118886f, -0.2817678f, +0.1144488f, +0.1375012f, +0.0598710f, +0.2751147f,
  -0.2062816f, -0.2508476f, +0.0709596f, -0.0915695f, -0.2134672f, +0.1117953f, -0.0992014f, -0.1533067f,
  +0.1119995f, -0.0647750f, +0.0487775f, -0.1140950f, -0.0819068f, -0.0519680f, -0.1137444f, -0.1321830f,
  -0.0902477f, -0.1735269f, +0.0247347f, +0.1356370f, -0.0782794f, +0.0248148f, -0.1063744f, +0.0950295f,
  +0.0563678f, -0.2022255f, +0.3442627f, +0.1694378f, +0.0927384f, -0.1267878f, -0.0707418f, -0.0508993f,
  -0.0749423f, +0.3288552f, +0.1911290f, -0.1974995f, -0.1133355f, -0.0368772f, +0.1492756f, -0.0472109f,
  +0.0955361f, -0.1384342f, -0.0621622f, -0.1122006f, -0.0742593f, -0.1876157f, +0.2256194f, -0.0425170f,
  -0.0164927f, -0.4143652f, +0.2595335f, +0.0226298f, +0.0957931f, -0.0927779f, +0.1871952f, +0.0052014f,
  +0.0247292f, -0.2237268f, +0.1597374f, +0.0062871f, -0.0261296f, +0.1567849f, -0.1506851f, +0.0073129f,
  +0.0891844f, -0.0031793f, +0.2374656f, -0.0155402f, +0.0245790f, +0.0739847f, -0.2218568f, +0.3053716f,
  -0.2620079f, -0.0311644f, -0.0139551f, -0.0360596f, +0.0638462f, -0.0347438f, +0.1251770f, -0.0621885f,
  -0.1558959f, +0.1199359f, -0.0086590f, -0.0529438f, -0.2506896f, -0.0170265f, +0.2497036f, +0.1340872f
);

const float biases[4] = float[4](
  +0.0104680f, +0.0230891f, -0.0380000f, -0.0227623f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer87 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1062027f, -0.0332018f, -0.0380479f, -0.0609441f, -0.1910076f, -0.1235856f, -0.1840924f, +0.0772952f,
  -0.2516060f, +0.1197731f, +0.0391105f, +0.2849200f, +0.4658331f, +0.1472840f, -0.0178924f, +0.0133412f,
  -0.1695472f, +0.1433920f, +0.0895014f, -0.1003940f, -0.1908213f, -0.5128223f, -0.1259625f, -0.1764674f,
  +0.0137021f, -0.1161237f, +0.0976249f, -0.0408475f, -0.2581358f, -0.1220536f, -0.0180802f, +0.0936400f,
  +0.2041880f, -0.1427006f, +0.0051575f, +0.2630586f, +0.1671005f, -0.0756980f, +0.1301329f, -0.1645072f,
  +0.0210507f, +0.4114183f, +0.1319577f, +0.0775907f, +0.1884696f, -0.2674591f, -0.1625917f, +0.0601600f,
  -0.2201082f, +0.0570927f, +0.2143040f, -0.1440004f, +0.0642022f, -0.1910573f, -0.1472856f, +0.0209638f,
  +0.0593761f, +0.1797280f, +0.1654583f, +0.2923865f, +0.0129759f, -0.0741762f, -0.0584181f, -0.0495925f,
  -0.1193869f, +0.0104147f, +0.0748742f, -0.0082872f, +0.0631084f, -0.3739333f, -0.1350553f, -0.2849153f,
  -0.1846322f, -0.1043602f, -0.0694427f, -0.0222069f, +0.0001367f, +0.0138999f, -0.0371881f, -0.1055520f,
  -0.1952933f, +0.0554982f, -0.1089791f, -0.0066345f, -0.0016928f, +0.0088589f, -0.1382397f, -0.0971055f,
  -0.2420593f, +0.3602423f, +0.0957991f, +0.0765800f, -0.3055952f, -0.1224950f, -0.0920354f, +0.0942740f,
  -0.0670859f, +0.2147355f, +0.0342956f, +0.0118198f, +0.0766312f, +0.3391412f, -0.0588970f, +0.2482807f,
  -0.0507476f, +0.1807792f, -0.1610502f, -0.1749149f, -0.1002762f, +0.3258664f, +0.0082307f, -0.1278693f,
  -0.0221343f, -0.0856274f, +0.1986557f, -0.0806103f, -0.0451568f, -0.1626916f, -0.1480526f, -0.0174403f,
  +0.0961013f, -0.0485402f, +0.0511693f, -0.0192735f, -0.0271896f, +0.0195158f, -0.0891912f, +0.1709401f,
  +0.1871049f, -0.0841349f, -0.2725051f, +0.0506827f, +0.0494006f, +0.0552024f, +0.1363399f, +0.0721500f,
  -0.0961391f, +0.1260983f, +0.0596682f, +0.1055607f, +0.1704169f, -0.0313165f, +0.0811298f, -0.3319978f,
  +0.2499997f, -0.2515461f, -0.2043018f, -0.1432957f, +0.1936162f, +0.0604072f, +0.1426455f, +0.0969541f,
  -0.1383180f, +0.2644936f, -0.0511137f, +0.2423584f, +0.1026725f, +0.1044215f, -0.1079950f, +0.1508670f,
  +0.0696229f, -0.0950203f, -0.0141410f, +0.1854499f, -0.2421228f, -0.0535772f, +0.0076949f, +0.0505017f,
  -0.0328643f, +0.1360491f, -0.3457723f, -0.1359149f, +0.0094146f, -0.0109291f, +0.0721371f, -0.1742675f,
  +0.0226100f, +0.0647972f, +0.1328157f, -0.2661863f, -0.0465140f, -0.1514485f, +0.0947177f, -0.0942032f,
  +0.0006980f, +0.1335087f, -0.0829080f, +0.1991490f, +0.0458783f, +0.0134401f, +0.0176174f, +0.0640010f,
  -0.0175952f, -0.1177553f, +0.0259217f, -0.0015130f, -0.0301851f, +0.0252616f, +0.0002932f, -0.0137276f,
  +0.3059812f, +0.3073709f, -0.0571993f, -0.0842712f, +0.0283135f, +0.0791529f, +0.0817776f, -0.0213974f,
  -0.0062514f, -0.0388773f, -0.0729300f, -0.0805007f, -0.1279150f, +0.2479294f, -0.0215372f, -0.1547086f,
  +0.2059104f, +0.2769105f, -0.0395206f, -0.0685108f, -0.1604075f, -0.0736662f, +0.1827506f, +0.0152651f,
  -0.0914797f, +0.0509709f, +0.2347946f, -0.0273242f, +0.3695568f, -0.7526649f, -0.1136127f, -0.4498003f,
  -0.0744383f, -0.2376356f, -0.2913377f, -0.0037207f, +0.2910104f, +0.2213557f, -0.1350908f, -0.0125976f,
  -0.4052263f, -0.2578866f, +0.3313700f, -0.1053507f, +0.0059030f, -0.1977632f, -0.3686171f, +0.0538126f,
  -0.4492881f, -0.0224163f, -0.1911559f, +0.2866413f, +0.2397566f, +0.3027414f, +0.0040779f, +0.5193868f,
  -0.0745340f, -0.0614365f, +0.1354733f, -0.1930202f, -0.3564165f, -0.3386509f, -0.2882225f, +0.2518920f,
  -0.0371786f, -0.2035750f, -0.0784848f, +0.1823604f, -0.1356584f, +0.1381165f, +0.0209943f, +0.0589373f,
  +0.5248286f, -0.1532583f, +0.0811972f, -0.2976061f, -0.1358014f, -0.0232494f, -0.0610114f, -0.1193489f,
  +0.0749239f, +0.1013195f, +0.0205623f, +0.2619583f, -0.1108553f, +0.0788589f, +0.2294759f, -0.2379105f
);

const float biases[4] = float[4](
  -0.0300850f, +0.0491001f, +0.0272260f, +0.0015364f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer87 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2090079f, +0.1341290f, -0.1889026f, -0.0343475f, -0.0861573f, -0.0173967f, -0.1849946f, +0.0283155f,
  -0.1924490f, +0.1124509f, -0.4125503f, +0.1134657f, +0.0024427f, -0.0439468f, -0.0676606f, -0.1820228f,
  -0.1931248f, +0.0747709f, -0.0214091f, +0.0618841f, +0.1126285f, -0.2893399f, -0.1930571f, -0.0009366f,
  -0.1808834f, -0.0779088f, -0.1863738f, +0.1254288f, +0.0662195f, -0.2005570f, +0.1360838f, -0.0465106f,
  -0.1178145f, -0.1351423f, +0.0815834f, -0.0398372f, +0.0965124f, +0.2441528f, -0.0615590f, +0.1022939f,
  -0.0863238f, -0.0442823f, -0.2468246f, +0.0326527f, -0.0077707f, -0.0348778f, -0.0703643f, -0.2133213f,
  +0.1144018f, +0.0464687f, -0.0208369f, -0.0349304f, +0.0319016f, -0.0317692f, +0.0232156f, -0.0788411f,
  +0.0341969f, -0.0645198f, +0.0573925f, -0.0157855f, -0.1869269f, +0.1667171f, +0.0142559f, -0.0062052f,
  -0.1734008f, +0.0903443f, +0.0500696f, -0.0544460f, +0.0866397f, -0.0992374f, +0.1084862f, -0.0261663f,
  +0.0876173f, -0.0478044f, +0.4708208f, +0.3714889f, +0.2400893f, -0.3285996f, +0.1657137f, +0.3722007f,
  +0.1661265f, -0.3069544f, +0.2845642f, +0.3572024f, -0.0190369f, -0.2743463f, +0.3482192f, +0.2308910f,
  +0.1637707f, +0.1416328f, -0.1116130f, -0.0748680f, +0.4458573f, +0.0792546f, -0.0075276f, +0.1888955f,
  +0.0217918f, +0.3247007f, +0.0070259f, +0.2157925f, -0.0012282f, +0.1638621f, +0.3515908f, -0.1588482f,
  +0.0671953f, +0.1296216f, +0.0283939f, +0.1465881f, -0.1761593f, -0.4224530f, -0.1162477f, +0.2229215f,
  +0.6843573f, -0.4458855f, +0.1617849f, +0.5074386f, -0.0757732f, -0.2282176f, +0.0019897f, -0.0878387f,
  +0.1539807f, -0.2908391f, -0.0236309f, -0.3092336f, -0.4409937f, -0.1795202f, -0.4299676f, -0.1068673f,
  +0.1693120f, -0.2509060f, +0.0326323f, +0.2378396f, -0.0424487f, -0.6508054f, +0.0086696f, -0.1781728f,
  -0.1173435f, -0.1625631f, +0.1637881f, +0.1217712f, +0.1442510f, -0.0442384f, +0.2196874f, +0.1821287f,
  -0.2545279f, +0.0263196f, -0.0388111f, -0.0550572f, -0.2131314f, +0.0890698f, -0.3551212f, -0.0398455f,
  +0.1296898f, -0.2222396f, +0.2679899f, -0.1952246f, +0.1929892f, +0.0009864f, -0.0226240f, +0.1691060f,
  +0.0257504f, +0.1357620f, -0.1298055f, -0.1623299f, +0.2148927f, -0.1604988f, +0.0440543f, +0.0535030f,
  +0.0147703f, +0.0102212f, -0.2379100f, -0.0849914f, +0.0588564f, -0.0205744f, +0.0460842f, +0.0327335f,
  +0.1416235f, -0.0415221f, -0.1185809f, -0.0012446f, +0.1823259f, +0.2131069f, -0.2013094f, -0.1110753f,
  +0.1288877f, -0.2191124f, -0.1372788f, -0.0237248f, +0.0719439f, +0.1877204f, -0.2587878f, +0.3083703f,
  -0.0605786f, +0.0709210f, -0.0009878f, +0.1045107f, +0.1476448f, -0.0331740f, +0.0468435f, +0.1282954f,
  -0.1267617f, +0.0067951f, -0.2006831f, -0.0054787f, +0.1608090f, +0.0409993f, -0.1208489f, +0.0409945f,
  -0.0544331f, +0.1207364f, +0.0366391f, -0.0134871f, +0.0230251f, +0.1511731f, -0.2131056f, +0.1886970f,
  +0.0291033f, +0.3056888f, -0.0942461f, +0.3773095f, +0.1152061f, -0.1330117f, +0.1069441f, +0.0707509f,
  -0.2198097f, +0.0996861f, +0.1121586f, +0.0173915f, -0.1672964f, -0.0267304f, +0.1348775f, -0.2766025f,
  -0.2092483f, +0.1459107f, +0.1215000f, +0.1711749f, -0.3607768f, -0.1863152f, -0.2031729f, +0.0918519f,
  +0.1797509f, +0.0104910f, +0.1767165f, -0.0552702f, -0.0059463f, +0.0191296f, -0.2154362f, -0.0291563f,
  -0.2070460f, -0.3695164f, +0.4836889f, +0.2112174f, -0.1551775f, -0.0139462f, -0.0303090f, +0.0339992f,
  -0.2434010f, +0.0448744f, -0.1755174f, +0.1157854f, -0.3365099f, +0.1788275f, -0.2179187f, -0.3218648f,
  +0.0206381f, -0.1721283f, -0.0910023f, +0.0424829f, +0.0175627f, +0.0022518f, +0.0573841f, -0.0046328f,
  +0.2088144f, -0.1447205f, +0.0649026f, -0.1245659f, -0.2459237f, +0.0701710f, +0.1981594f, -0.1610793f,
  +0.0081980f, -0.1429559f, -0.0491570f, -0.0986135f, -0.2094371f, -0.0351261f, -0.0079030f, +0.1035054f
);

const float biases[4] = float[4](
  +0.0351742f, -0.0460305f, +0.0168581f, -0.0121341f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer88 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2578711f, +0.0336100f, -0.3724178f, +0.0032583f, -0.1388223f, -0.0505089f, -0.0899648f, -0.0560709f,
  +0.1469991f, +0.0684791f, -0.2540830f, +0.4454916f, +0.0618820f, -0.4095785f, +0.0902317f, +0.0381116f,
  +0.1722858f, +0.0632413f, +0.3050918f, -0.0380775f, -0.1541424f, -0.2318195f, +0.0484747f, +0.1127966f,
  +0.3001753f, -0.0012127f, -0.0801965f, -0.0422001f, +0.1492149f, -0.0997672f, -0.2389848f, +0.2465274f,
  +0.1767914f, +0.2464081f, -0.0582589f, -0.0869544f, +0.0612415f, +0.0749601f, -0.2937197f, -0.2100393f,
  +0.0533268f, +0.0944111f, +0.0576543f, -0.0128493f, +0.0037567f, +0.2436779f, -0.1582862f, +0.0436942f,
  +0.2585797f, +0.2982129f, -0.1702589f, -0.1105355f, +0.2041261f, +0.3022915f, -0.0922106f, -0.0576616f,
  +0.2275168f, +0.0835311f, +0.2262093f, -0.0235191f, +0.1085355f, -0.1061156f, +0.0147307f, +0.0795552f,
  -0.0019489f, +0.2512965f, -0.1659342f, +0.0193959f, -0.0407075f, -0.0104659f, +0.0880515f, +0.1159185f,
  +0.2835021f, +0.0060829f, -0.0073635f, -0.1396545f, -0.0489291f, +0.1673719f, -0.0402767f, -0.2007543f,
  -0.0714808f, +0.1467830f, -0.2101504f, +0.0752189f, +0.3463877f, -0.0381001f, -0.0972724f, -0.0271114f,
  +0.0274987f, -0.0307789f, +0.1004161f, -0.0207751f, +0.1385283f, +0.4826609f, -0.0356980f, +0.0807966f,
  +0.1991355f, +0.0832211f, -0.0292547f, +0.2442021f, +0.1024472f, +0.0763606f, +0.2909478f, -0.1560701f,
  -0.1075480f, +0.2234832f, +0.0602303f, +0.4850928f, +0.2893960f, +0.0096979f, -0.1115997f, -0.7096057f,
  -0.1685981f, +0.2796447f, -0.3973188f, +0.0000538f, -0.0540633f, -0.2057084f, +0.0467923f, +0.2176159f,
  -0.0650047f, -0.2861953f, -0.0601699f, -0.0316302f, +0.0399709f, -0.0805603f, -0.0918422f, -0.1306296f,
  -0.2864789f, -0.1184394f, -0.1272534f, -0.0527701f, -0.1305668f, +0.2968228f, +0.1510803f, +0.0768426f,
  -0.2419398f, -0.0395156f, -0.0325654f, +0.2506394f, -0.2283558f, +0.1329352f, +0.0361795f, +0.1860184f,
  +0.1134629f, +0.0443310f, -0.0298388f, -0.1666342f, -0.0332852f, -0.1836011f, -0.0238758f, -0.0334792f,
  +0.1968882f, +0.1685931f, +0.2449695f, -0.1091937f, -0.2229238f, +0.1023845f, +0.1174641f, +0.1347784f,
  +0.0398264f, -0.1187333f, +0.1292209f, -0.0272174f, -0.0743851f, -0.0106087f, -0.0451663f, -0.1684576f,
  +0.2510305f, -0.1156091f, +0.0612967f, +0.1214693f, +0.2474315f, +0.0941202f, -0.1374677f, +0.2565818f,
  +0.2365347f, -0.0874796f, -0.0529853f, -0.1701425f, +0.0433780f, -0.0697858f, -0.1383341f, +0.0976976f,
  +0.0610298f, +0.1968069f, +0.3561500f, -0.0204230f, +0.0661468f, -0.0568701f, +0.0419542f, +0.0456561f,
  +0.0345872f, -0.1739348f, +0.1494845f, -0.1165773f, +0.1183104f, +0.1038576f, +0.0317455f, -0.0883896f,
  -0.0128007f, +0.1822106f, +0.0815428f, +0.0303370f, +0.1325991f, -0.1330324f, +0.0854177f, -0.1075840f,
  +0.0393563f, -0.0876762f, +0.0975571f, -0.1014123f, +0.0460582f, -0.4012114f, +0.0877534f, -0.1511386f,
  -0.1099344f, -0.2568054f, +0.1660516f, +0.0340427f, +0.0341375f, +0.0851861f, +0.0804214f, -0.2546699f,
  -0.0919234f, +0.2421810f, +0.1407551f, -0.2885996f, +0.0651661f, +0.1351395f, -0.0084522f, -0.1652187f,
  -0.1422407f, -0.1365658f, -0.1194021f, +0.0149306f, -0.1026691f, +0.2835653f, -0.0422067f, -0.2887003f,
  -0.1729653f, -0.1378406f, -0.1740552f, -0.2361995f, -0.0028654f, -0.5869856f, +0.1121207f, +0.1082773f,
  -0.0950744f, +0.1157060f, +0.0063051f, +0.2913829f, +0.2239980f, -0.1597162f, +0.1155455f, +0.6314777f,
  -0.0627832f, +0.0135989f, +0.0451364f, +0.0575254f, -0.1133674f, +0.0708254f, -0.0571706f, +0.1013498f,
  -0.2114843f, +0.0395688f, -0.0085280f, +0.0418452f, -0.0661576f, -0.1327855f, -0.1019091f, -0.1596282f,
  +0.0786689f, -0.1326283f, -0.1626727f, +0.0769914f, -0.1643844f, -0.3285270f, -0.1005455f, +0.0725154f,
  -0.0525999f, -0.0791928f, -0.0239579f, +0.0730442f, +0.1782550f, +0.1506169f, +0.0689029f, -0.1670991f
);

const float biases[4] = float[4](
  -0.0241740f, +0.0108906f, +0.0140221f, -0.0023399f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer88 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.3545983f, -0.0578827f, +0.2613326f, -0.1893698f, +0.0126550f, +0.2835136f, -0.0805153f, -0.1112252f,
  -0.0370789f, +0.1019602f, -0.0951502f, -0.2922783f, +0.1696656f, -0.1909156f, -0.0847777f, +0.0202857f,
  -0.1969165f, -0.1052405f, -0.1257485f, -0.0489161f, +0.0696787f, -0.1119597f, +0.0573719f, +0.1691370f,
  -0.2684714f, -0.0050790f, -0.0236159f, -0.5761252f, -0.1712654f, -0.4791199f, +0.1362827f, +0.3075713f,
  -0.1664055f, -0.2360918f, +0.0534672f, +0.1873036f, +0.1192769f, +0.1342122f, -0.0189228f, +0.4588842f,
  -0.0368977f, +0.2034993f, -0.1502918f, -0.1401221f, +0.0137240f, -0.3881344f, -0.1951648f, +0.0505051f,
  +0.0205564f, +0.3559906f, +0.1797936f, +0.2810801f, +0.1130497f, -0.1988999f, +0.0554842f, +0.0434540f,
  -0.1169861f, -0.0630677f, -0.0928824f, -0.0000093f, +0.0361687f, -0.1366688f, +0.0201742f, -0.2113504f,
  -0.1000850f, +0.0589891f, -0.1869808f, +0.0794824f, -0.1236940f, +0.0621207f, +0.0909578f, -0.0062936f,
  -0.0365151f, -0.0301728f, -0.2677778f, -0.0347714f, +0.1220528f, +0.0015127f, -0.0392912f, +0.0451529f,
  +0.0292011f, -0.0154355f, -0.2429856f, -0.1367686f, +0.1995239f, +0.3254359f, -0.2489132f, -0.0698994f,
  +0.0575131f, -0.1437981f, +0.0149535f, -0.0125529f, -0.2001058f, -0.0574887f, +0.0153990f, -0.0315931f,
  -0.0237914f, +0.1190010f, -0.1164368f, -0.4874634f, -0.0233468f, +0.0792942f, +0.0119462f, +0.1696750f,
  -0.0863590f, -0.1982708f, -0.0839373f, +0.5286023f, +0.1399975f, +0.2405774f, -0.0669350f, +0.0635001f,
  -0.0108809f, +0.0015784f, -0.0698830f, -0.1019609f, +0.0198958f, -0.0055718f, +0.1936951f, +0.2164658f,
  -0.1069335f, +0.1657116f, -0.0192352f, +0.1763607f, +0.1322818f, -0.0832143f, +0.2193100f, -0.0451977f,
  +0.0149486f, -0.1907291f, -0.1370194f, -0.1682749f, +0.1670200f, +0.0899753f, +0.1155796f, +0.1792687f,
  -0.1851108f, +0.0031100f, -0.0843436f, +0.0539085f, -0.0675069f, +0.1565888f, -0.0092055f, -0.0284309f,
  -0.0776961f, -0.0987092f, -0.0050887f, +0.0166674f, +0.0083820f, -0.2064119f, +0.0401669f, +0.0454544f,
  +0.0152562f, -0.2046696f, -0.1365966f, -0.2061603f, -0.2531180f, +0.0201292f, -0.0622615f, -0.0924423f,
  -0.0441414f, +0.0426080f, -0.0238133f, -0.1482129f, +0.1076575f, +0.2082689f, +0.0254954f, +0.2357304f,
  -0.1135555f, +0.1069664f, -0.0201894f, +0.1554432f, +0.1401303f, +0.0706971f, -0.2786176f, -0.2778103f,
  +0.0982342f, +0.2352855f, +0.1318223f, +0.3978745f, -0.1842510f, +0.3623684f, +0.3384761f, -0.0738419f,
  -0.0789765f, -0.1500032f, -0.0530384f, +0.0478855f, -0.1837027f, -0.0150138f, +0.0419402f, -0.0980580f,
  -0.2965567f, -0.1813461f, -0.1058721f, -0.0431212f, +0.0961329f, -0.1226295f, +0.0034640f, -0.0836765f,
  +0.0791372f, +0.0546903f, +0.0798889f, -0.1279028f, +0.0658154f, -0.2456548f, -0.1408306f, +0.5450356f,
  -0.0904444f, +0.0355058f, -0.1196930f, +0.0028598f, +0.2402648f, -0.0789007f, +0.1695639f, +0.1290046f,
  -0.0596965f, +0.2696010f, +0.1405302f, -0.1555602f, +0.0882784f, -0.0725494f, -0.0615066f, -0.0029599f,
  -0.2176893f, +0.2974748f, +0.0546580f, -0.3508424f, -0.1722370f, +0.1681710f, -0.1580325f, -0.4070397f,
  -0.1728037f, -0.1155532f, -0.0699839f, +0.0770868f, -0.2019014f, +0.2509221f, -0.0270816f, +0.0864062f,
  -0.1844638f, -0.0101600f, -0.0054025f, +0.2477876f, +0.0745272f, +0.2179463f, -0.1574118f, -0.0624480f,
  -0.2456238f, -0.1869572f, +0.1083653f, +0.1953986f, -0.2053008f, +0.0383079f, -0.0726967f, +0.0623857f,
  +0.0725305f, -0.2636067f, +0.1429761f, -0.1556820f, +0.0638919f, -0.0653196f, +0.0361488f, -0.0901222f,
  -0.0579748f, -0.0084721f, +0.0635437f, +0.0160142f, +0.0472922f, -0.1785692f, -0.0685481f, -0.0736351f,
  +0.0716588f, -0.1106335f, +0.0366075f, -0.1886964f, +0.3095133f, -0.0687030f, -0.0943286f, +0.0568047f,
  -0.2822581f, -0.1052065f, -0.1912576f, +0.0186879f, +0.2408853f, -0.2430313f, -0.0100618f, +0.0976997f
);

const float biases[4] = float[4](
  +0.0259172f, +0.0077149f, -0.0479929f, -0.0192203f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer89 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0370093f, -0.0403014f, +0.0202557f, -0.0187664f, +0.0615452f, +0.0676658f, +0.0132903f, -0.0057726f,
  -0.1090845f, -0.1111658f, +0.1281720f, -0.1257593f, +0.1249030f, +0.1215180f, -0.0014162f, -0.0337905f,
  +0.0231435f, +0.0508704f, -0.0977131f, +0.0695238f, +0.0182210f, +0.1660958f, -0.0188004f, -0.0033045f,
  -0.5225878f, +0.1158026f, +0.1003399f, -0.0777298f, +0.0241822f, +0.0071692f, -0.3231439f, +0.0314176f,
  -0.1332191f, +0.0367043f, -0.2279180f, +0.2098702f, +0.4642316f, +0.0655430f, -0.2424271f, +0.1855128f,
  -0.0189916f, +0.1024880f, +0.0687182f, -0.4330203f, +0.1129852f, -0.0238689f, -0.0077052f, +0.0504758f,
  +0.1564139f, +0.0476438f, -0.1008242f, +0.0816518f, -0.0178101f, +0.0292286f, +0.0165310f, -0.0241930f,
  +0.0219436f, -0.0821849f, +0.0629282f, -0.0346840f, +0.0020033f, -0.0880200f, -0.0925048f, +0.0313703f,
  +0.1141063f, +0.0091635f, +0.1349450f, +0.0770676f, +0.0817147f, -0.0370421f, -0.0222824f, +0.0462504f,
  +0.2634901f, -0.0219220f, +0.4540942f, +0.0284508f, -0.2535299f, -0.2979622f, -0.0001400f, +0.2647419f,
  +0.0165938f, +0.0577454f, -0.1311143f, +0.2716158f, -0.1640497f, -0.3179364f, +0.0633024f, +0.2412587f,
  -0.1944548f, +0.2165413f, +0.2241341f, +0.0562964f, +0.0388944f, +0.2759016f, +0.1256767f, -0.2795567f,
  -0.0255978f, -0.2115412f, +0.3420570f, +0.4618383f, -0.2900067f, -0.1857996f, +0.0516363f, +0.0760677f,
  -0.1648727f, +0.2266057f, +0.2874711f, -0.1871275f, +0.0160210f, -0.3797086f, -0.1883652f, +0.2300371f,
  +0.1724887f, -0.3415645f, -0.0212671f, -0.2886315f, -0.0489600f, -0.5293461f, -0.1953303f, +0.1705805f,
  -0.3708873f, -0.0519418f, +0.1680336f, +0.0347888f, -0.0292949f, -0.3178683f, -0.1318090f, +0.1182807f,
  +0.0373477f, -0.1786132f, +0.4970957f, -0.1819449f, -0.2084782f, +0.1158502f, -0.0034629f, -0.0083662f,
  -0.1601043f, -0.1879739f, +0.3806134f, +0.2795240f, -0.1828746f, -0.1744364f, -0.1906772f, +0.1790737f,
  -0.0101060f, +0.2059781f, +0.0118199f, -0.0255216f, +0.1553596f, +0.1277912f, +0.0007663f, -0.0780332f,
  +0.1417654f, +0.0049462f, +0.3659575f, -0.0493457f, -0.0275826f, -0.0105138f, -0.0581470f, +0.0943606f,
  -0.0929488f, -0.0126239f, -0.1265683f, -0.3486162f, +0.0965051f, +0.2838238f, -0.1385244f, -0.0653865f,
  -0.3217150f, +0.4449769f, +0.1291359f, +0.1603123f, -0.1318978f, -0.0594596f, -0.0794173f, -0.2161171f,
  +0.2048096f, -0.1640251f, +0.0036836f, -0.1603081f, -0.0379240f, +0.0692007f, +0.2078912f, -0.2385543f,
  +0.0230369f, -0.1001992f, -0.0538629f, +0.0994761f, +0.1692500f, +0.1341858f, -0.0269673f, -0.2385921f,
  -0.0700096f, -0.0027893f, -0.0428351f, -0.1439323f, +0.0677055f, -0.1178175f, +0.0921911f, -0.0595420f,
  +0.1266419f, -0.1592310f, -0.0094903f, -0.1329676f, +0.1023978f, -0.0285783f, +0.0048919f, -0.0796994f,
  +0.0478511f, -0.0513662f, -0.3994743f, -0.0078647f, +0.0841158f, -0.0730977f, +0.0511668f, -0.1130079f,
  +0.3353019f, -0.1409676f, -0.1193427f, +0.1213173f, -0.0223222f, -0.2144751f, +0.0933942f, +0.1549260f,
  -0.0743599f, +0.0970496f, -0.0834534f, -0.1833596f, -0.0497153f, -0.0682858f, -0.1217440f, +0.0620774f,
  -0.0803073f, +0.1034349f, +0.0237008f, +0.1251823f, -0.2564663f, +0.1736074f, +0.0214963f, +0.0795134f,
  -0.2058733f, -0.1201016f, +0.1092581f, +0.1057805f, +0.2280135f, -0.1318508f, -0.0360615f, -0.0867934f,
  -0.3531770f, +0.0983203f, +0.0534727f, +0.0061938f, -0.4977717f, +0.1217971f, -0.0859535f, -0.2113481f,
  +0.3684096f, +0.0700565f, -0.0634171f, +0.4062224f, +0.0431169f, +0.2201184f, +0.4138552f, -0.1893440f,
  +0.4390484f, -0.4551158f, +0.4684907f, +0.6016654f, -0.3461124f, -0.0373576f, +0.0326986f, -0.1135462f,
  +0.1987359f, -0.0214618f, +0.2995059f, +0.0410962f, +0.1068365f, -0.4251264f, +0.3002209f, -0.0543994f,
  +0.2621877f, -0.0472404f, -0.1157922f, -0.1619157f, -0.2606097f, -0.3384603f, +0.1191043f, -0.0085009f
);

const float biases[4] = float[4](
  +0.0224348f, -0.0603892f, +0.0199990f, -0.0072910f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer89 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1127641f, +0.0598947f, +0.1927577f, -0.0441955f, +0.0507392f, -0.0213107f, +0.0150643f, +0.0897537f,
  +0.0911740f, +0.0357341f, -0.1441550f, -0.0943639f, +0.2253157f, +0.1085226f, +0.0500797f, +0.0070104f,
  -0.0296850f, -0.0922205f, -0.0488340f, -0.1309431f, +0.0852754f, +0.0299731f, -0.0979187f, -0.0539605f,
  -0.0751660f, +0.2320352f, +0.0884488f, -0.0814804f, -0.0167683f, +0.2070619f, +0.2206748f, -0.2446580f,
  +0.1238239f, +0.0405075f, +0.0709340f, -0.0772637f, +0.2802847f, +0.1436781f, +0.0436191f, +0.1465660f,
  -0.1333178f, +0.0016715f, -0.1669017f, -0.1575491f, +0.0651038f, +0.2080431f, -0.2393648f, +0.0626286f,
  +0.0316076f, -0.2791149f, -0.0156600f, -0.0239857f, +0.0730670f, +0.2533924f, -0.0867615f, -0.1289483f,
  +0.1234087f, -0.1040039f, -0.2089778f, +0.0506087f, -0.1173030f, +0.0488127f, +0.1824176f, -0.1737156f,
  +0.0673950f, +0.0039500f, +0.0783302f, +0.1354756f, +0.0870112f, -0.0497038f, -0.2827611f, +0.0086313f,
  -0.0706438f, -0.1486332f, +0.1324387f, -0.1399766f, -0.0193250f, -0.0695562f, -0.0608032f, -0.1017327f,
  +0.2563110f, +0.0313705f, -0.2628470f, +0.3141271f, -0.2179754f, +0.3054084f, +0.2961934f, +0.1468636f,
  +0.0380489f, +0.0518125f, +0.1861101f, +0.3534329f, +0.2966247f, -0.3486436f, +0.0882121f, -0.2224123f,
  +0.2473613f, +0.0648796f, -0.0093973f, +0.0172986f, +0.0593094f, +0.1484320f, +0.3831349f, +0.0064840f,
  -0.1669089f, -0.3115273f, -0.1259132f, -0.0052966f, -0.0441271f, -0.4812701f, -0.3155062f, -0.1639782f,
  +0.0729281f, +0.3431465f, +0.1062424f, +0.0828085f, -0.1177533f, +0.2203418f, -0.0161682f, +0.2668748f,
  +0.1888561f, +0.1170201f, -0.0372252f, -0.0497734f, -0.0823778f, +0.1148630f, -0.0144764f, +0.0317380f,
  -0.3505583f, +0.4808702f, +0.3178889f, +0.3391193f, +0.1988956f, -0.1153287f, -0.0971460f, +0.0101135f,
  -0.0348213f, -0.3988096f, -0.1529758f, -0.2061844f, -0.0924193f, +0.0781318f, +0.0310167f, +0.1287994f,
  -0.1632324f, +0.1088559f, -0.0968605f, -0.1250093f, -0.1002484f, +0.0081041f, -0.1877510f, -0.0579789f,
  +0.1176111f, -0.0109527f, +0.1688729f, -0.0598120f, +0.2663969f, -0.1045245f, +0.0705898f, -0.1072661f,
  -0.0242142f, -0.0422211f, -0.0466688f, +0.0543710f, -0.0448311f, +0.0152897f, -0.0298470f, +0.0438107f,
  +0.0501480f, -0.0247704f, +0.1648260f, +0.0809062f, +0.3444525f, -0.2590908f, -0.0635752f, +0.0736007f,
  -0.2161977f, -0.1688507f, +0.2849199f, -0.3220974f, +0.2387360f, -0.1625213f, -0.1652070f, -0.2447531f,
  +0.0034565f, +0.0670649f, +0.0497677f, -0.0631784f, +0.0387362f, +0.0377197f, +0.1059274f, -0.1298825f,
  +0.0387465f, -0.0301296f, -0.2108653f, -0.0724817f, +0.0757383f, +0.0776501f, +0.1253685f, -0.2771472f,
  -0.1896915f, -0.1168488f, -0.1619345f, +0.1718540f, +0.2282360f, +0.1351378f, +0.0215954f, -0.3570043f,
  +0.0154745f, -0.1231991f, -0.1030542f, -0.1909348f, +0.1085541f, +0.1600540f, -0.0989161f, -0.0375503f,
  -0.1517545f, +0.1018211f, -0.2427565f, +0.2974542f, -0.0165067f, -0.2804468f, -0.3139130f, +0.2626790f,
  -0.5683775f, -0.0162926f, +0.0411699f, +0.0598106f, -0.1608717f, -0.6597997f, -0.0094612f, +0.1349384f,
  +0.1207167f, -0.1625375f, +0.2209537f, +0.3631937f, -0.2417744f, -0.3658631f, +0.0143259f, -0.0072386f,
  +0.0553875f, -0.0024437f, -0.2572555f, +0.3666233f, -0.0366376f, -0.1184406f, +0.0979302f, +0.0338858f,
  +0.3030857f, -0.0700392f, -0.1336582f, +0.0822242f, +0.3134900f, -0.2724026f, +0.0883569f, +0.0797038f,
  +0.2484993f, -0.0997430f, -0.2792571f, -0.0495518f, +0.0432697f, +0.0323375f, +0.4100467f, +0.1391686f,
  +0.1710314f, +0.1237472f, +0.0374850f, -0.0895142f, +0.2294926f, -0.3273357f, +0.1221524f, -0.0261090f,
  +0.2812021f, +0.4325936f, -0.0350186f, +0.0345256f, -0.0189178f, +0.0577768f, -0.1006223f, +0.0723280f,
  +0.1388847f, +0.0027155f, +0.3219039f, +0.1687381f, -0.0365567f, -0.0418497f, +0.2431793f, +0.4607479f
);

const float biases[4] = float[4](
  +0.0237430f, -0.0250745f, +0.0363416f, -0.0438246f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer90 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0643207f, -0.1031789f, -0.1270106f, -0.0085586f, -0.0516587f, -0.0503027f, -0.1117337f, +0.1137518f,
  +0.0675692f, +0.1573339f, -0.1718067f, -0.2351432f, -0.2770223f, -0.0664039f, -0.0648947f, +0.0300082f,
  -0.2582081f, +0.3134857f, +0.1012429f, -0.0713353f, +0.1313785f, -0.0018898f, -0.0728319f, +0.2305378f,
  -0.0815699f, +0.0716347f, +0.0430908f, -0.1887980f, -0.0324252f, +0.1760340f, +0.1861005f, -0.0462949f,
  +0.0011020f, +0.3945816f, -0.0112859f, +0.7310925f, -0.1830909f, -0.0478959f, +0.0489001f, -0.1016525f,
  +0.1596147f, -0.0990393f, +0.2271561f, +0.2417668f, -0.2320343f, -0.0688021f, -0.1653951f, -0.1843716f,
  +0.0844910f, +0.0693334f, +0.2127609f, +0.1343515f, +0.1599990f, +0.1644421f, -0.0568262f, -0.2536935f,
  +0.0237412f, +0.2341282f, -0.0118834f, +0.1643922f, -0.0665617f, -0.0823434f, +0.0699974f, -0.1671260f,
  -0.2644249f, -0.3087811f, +0.0637559f, -0.0782849f, +0.2686111f, -0.0671026f, +0.0281624f, -0.1607862f,
  +0.0788915f, -0.2036206f, -0.1111799f, +0.0059250f, -0.0362085f, -0.0767478f, -0.0183433f, +0.2018973f,
  -0.1271421f, -0.1928187f, -0.0243448f, +0.3976718f, +0.2471392f, +0.0221180f, -0.1198535f, -0.0093959f,
  -0.2338848f, -0.1146709f, +0.0319100f, +0.1240897f, +0.2980422f, -0.0308511f, +0.3075241f, +0.0796745f,
  +0.0051920f, -0.0107166f, -0.1724953f, -0.2890027f, -0.0098700f, +0.0846635f, +0.0255285f, +0.1170249f,
  +0.1129768f, -0.1681933f, +0.0138026f, +0.2859254f, -0.0072475f, -0.6860887f, +0.0390305f, -0.0774833f,
  -0.0560793f, +0.4576955f, -0.0474367f, +0.3048636f, -0.2926573f, -0.2185283f, +0.0441368f, -0.0500916f,
  -0.0383376f, +0.3453439f, +0.0293761f, -0.0040769f, -0.0214395f, -0.0428607f, -0.0187313f, -0.0469075f,
  +0.0541033f, +0.3764827f, -0.0892961f, -0.1514843f, +0.0246337f, +0.3049215f, -0.0092925f, -0.2274887f,
  +0.0321072f, -0.0661713f, -0.1584455f, +0.0145391f, -0.0181460f, +0.0674790f, +0.2977862f, -0.1476860f,
  -0.1876579f, -0.0718336f, -0.0077839f, +0.3827080f, -0.0296618f, -0.1887724f, -0.0993905f, +0.0055080f,
  -0.0180308f, -0.6055015f, +0.0967578f, -0.1878134f, +0.1381846f, +0.1369206f, -0.0313240f, +0.0165480f,
  +0.0731253f, -0.1232803f, -0.1695303f, -0.0575737f, +0.0120835f, +0.0714301f, +0.0826419f, -0.0278398f,
  -0.0247615f, +0.3711862f, +0.0335724f, -0.1211225f, +0.0829745f, -0.1406077f, -0.0221427f, -0.1023470f,
  +0.0220200f, -0.0103584f, -0.0369170f, -0.0873603f, -0.2904431f, +0.0088993f, -0.0267842f, -0.3616069f,
  -0.0071710f, -0.1087883f, -0.0072632f, -0.0851728f, -0.1679621f, -0.1374048f, +0.0342056f, -0.0999997f,
  +0.1256390f, +0.1819831f, +0.1666766f, +0.0617598f, +0.1467642f, +0.1554415f, -0.1033374f, +0.0802339f,
  -0.1237855f, +0.3546239f, -0.0511732f, -0.1241188f, +0.2095769f, -0.3044345f, +0.1968375f, +0.1686280f,
  +0.0358697f, -0.2007816f, +0.0509496f, -0.1091339f, -0.0136532f, +0.2140437f, -0.1198030f, +0.2336599f,
  -0.3452846f, -0.2479017f, +0.0668811f, -0.0341916f, -0.1020320f, -0.1362272f, -0.0788288f, +0.0120514f,
  +0.0066322f, -0.1602039f, +0.2442147f, -0.1897593f, -0.5071941f, +0.0096708f, -0.2337859f, -0.1728076f,
  +0.1045585f, -0.1768322f, +0.0286575f, -0.2010179f, +0.0313034f, +0.0726871f, +0.0759109f, -0.0535771f,
  +0.2878404f, +0.3211593f, -0.0291479f, -0.0546422f, -0.0481458f, +0.0567918f, -0.0952578f, -0.1448935f,
  +0.1109285f, -0.3349675f, -0.0583049f, -0.1698823f, -0.0253105f, -0.3368804f, -0.0585992f, -0.4916391f,
  -0.3152096f, -0.2826319f, -0.0891474f, +0.2250853f, +0.0449405f, -0.2108396f, +0.0897522f, -0.1949543f,
  -0.0227904f, -0.0776552f, +0.1875604f, +0.0394769f, -0.1788173f, +0.3409702f, -0.1321182f, -0.2525248f,
  -0.2759103f, -0.1438269f, +0.2135146f, +0.1112926f, -0.0524371f, -0.0203729f, +0.2029655f, -0.2625564f,
  +0.0370791f, +0.0861520f, -0.0789174f, +0.0980031f, +0.0861360f, -0.1041001f, +0.1272569f, -0.1302782f
);

const float biases[4] = float[4](
  -0.0186207f, -0.0029552f, +0.0104518f, +0.0047207f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer90 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0458191f, +0.1999948f, -0.0012627f, -0.1419825f, +0.0729462f, +0.1456854f, +0.1377830f, +0.0473240f,
  +0.0320434f, -0.3093641f, -0.1065784f, +0.0216076f, +0.1877747f, +0.0497408f, -0.3371156f, -0.0728983f,
  +0.0370860f, -0.1946626f, -0.0522731f, +0.1012286f, +0.0506496f, -0.0412971f, -0.2062242f, +0.0252674f,
  -0.1742966f, -0.2350946f, -0.0033063f, +0.1695777f, -0.3442656f, -0.3633722f, +0.2199844f, -0.1368882f,
  -0.0445532f, +0.1454188f, -0.0434868f, +0.2359874f, -0.0294407f, +0.1859101f, +0.2260579f, -0.3978807f,
  -0.1891276f, -0.2081377f, +0.1677786f, +0.1415556f, -0.0867370f, +0.3736656f, -0.3879445f, +0.0273446f,
  -0.0161576f, -0.1631619f, +0.1103117f, +0.2035260f, -0.2078203f, -0.2029750f, +0.0268440f, -0.4264688f,
  -0.0029106f, +0.3083835f, +0.0409642f, -0.0678238f, -0.1200951f, +0.0203713f, +0.1079663f, +0.1150472f,
  +0.0909485f, -0.0606574f, -0.3665403f, +0.1860393f, +0.1528774f, -0.1698546f, -0.1483213f, -0.2451363f,
  +0.2444101f, +0.6963446f, +0.0511204f, +0.0491751f, +0.2894520f, +0.0349731f, +0.0454762f, -0.1184169f,
  +0.2143083f, +0.2558478f, +0.1668138f, -0.1624613f, -0.0836993f, +0.0645187f, +0.1540900f, -0.0677615f,
  -0.1256178f, +0.1045070f, +0.1280843f, +0.0215495f, +0.1134014f, +0.2443058f, +0.1647775f, +0.0244250f,
  +0.2059003f, +0.2404299f, +0.0578893f, -0.4639415f, -0.0315837f, +0.2712951f, -0.1067714f, +0.0182690f,
  +0.1146973f, +0.0307374f, -0.1663650f, +0.1144992f, +0.0353270f, -0.4676735f, +0.0840841f, -0.2148853f,
  +0.1865856f, -0.1794218f, -0.0393909f, +0.2326029f, +0.0182370f, -0.3767126f, +0.1587661f, +0.0355978f,
  -0.2797622f, -0.0575763f, +0.0440284f, -0.1704963f, -0.1338082f, -0.0955089f, -0.0996679f, -0.1857359f,
  +0.2692516f, -0.0940170f, +0.0903021f, -0.2497608f, +0.0940039f, +0.2542615f, +0.1278890f, -0.1259820f,
  -0.0084647f, -0.0781902f, -0.1208480f, +0.3029985f, -0.1562732f, +0.1046095f, +0.2641059f, -0.2364149f,
  -0.0132242f, +0.2028175f, -0.0378570f, -0.0498798f, +0.1453747f, +0.1195972f, +0.1702374f, -0.1166278f,
  +0.0506571f, +0.1470488f, +0.0811949f, -0.3960955f, +0.2547121f, +0.1881621f, +0.3193960f, -0.0405393f,
  -0.0269446f, +0.3173662f, -0.0755615f, -0.0663683f, +0.1379612f, +0.0193303f, -0.1858926f, +0.0157769f,
  +0.0968659f, +0.0430975f, +0.1582352f, -0.2649221f, -0.0193367f, -0.1402620f, -0.2010080f, -0.0451959f,
  +0.0534419f, +0.3382434f, -0.1943501f, -0.2766272f, -0.0308331f, -0.4273610f, +0.1221972f, +0.4504659f,
  +0.3497128f, -0.2349275f, -0.0869455f, +0.0797180f, -0.2429402f, +0.2194408f, +0.1023731f, +0.1521827f,
  -0.0928964f, -0.2153548f, +0.1439794f, -0.1150327f, -0.0885834f, +0.0005265f, -0.1571730f, -0.0700783f,
  +0.2634986f, -0.3401181f, +0.1158858f, -0.3541678f, +0.0801703f, +0.1408114f, +0.2799069f, -0.1006752f,
  -0.0418818f, -0.1368847f, -0.0393827f, +0.0292094f, -0.0781941f, -0.1903908f, +0.2601580f, +0.1944796f,
  -0.1657029f, +0.3442659f, -0.0165377f, +0.0105852f, +0.0703498f, -0.0592138f, +0.0899861f, -0.0125516f,
  -0.0240089f, -0.1349791f, +0.2262169f, +0.1880777f, -0.1122679f, +0.1658105f, -0.2258371f, -0.1458120f,
  +0.1415169f, +0.1080289f, +0.0022849f, -0.1088223f, +0.0686758f, -0.0510333f, +0.2578897f, -0.1537244f,
  +0.2606640f, -0.3421195f, +0.0051882f, +0.1549793f, +0.0381834f, +0.1313318f, +0.0634539f, +0.0493263f,
  -0.2848701f, -0.2031622f, +0.2450415f, -0.0767927f, -0.0656428f, +0.0915307f, -0.0275391f, +0.0300208f,
  +0.0644881f, -0.0164157f, +0.3706617f, +0.0038730f, +0.3250324f, +0.2211697f, +0.1028761f, +0.2310112f,
  -0.0316161f, -0.0741954f, +0.0639310f, -0.0668301f, +0.0322805f, -0.0257601f, -0.1481872f, +0.2225665f,
  +0.0785942f, -0.1450702f, -0.2715177f, -0.2600401f, -0.1750872f, -0.0652860f, +0.1415337f, +0.2152780f,
  +0.0335004f, -0.0889096f, +0.1507276f, +0.0841893f, +0.1006021f, -0.0757825f, +0.1275915f, +0.0043456f
);

const float biases[4] = float[4](
  +0.0063638f, -0.0312609f, -0.0299145f, -0.0046905f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer91 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0363169f, +0.0192695f, +0.0166143f, +0.1026398f, +0.2468492f, +0.0241601f, +0.3696633f, -0.1479779f,
  -0.3292696f, +0.3105769f, -0.1918475f, +0.0109836f, -0.2109502f, -0.2189067f, -0.1280396f, -0.0849015f,
  +0.3127221f, -0.2244600f, -0.1124413f, +0.6072730f, +0.1924212f, +0.1263511f, -0.0282570f, +0.0379076f,
  +0.1871565f, +0.0987102f, -0.2575579f, +0.0579703f, -0.1275840f, +0.1335052f, -0.0563826f, -0.0634417f,
  +0.0485321f, -0.1486550f, +0.2417278f, +0.7949390f, +0.6191824f, -0.0563218f, +0.0289224f, -0.0072039f,
  +0.0821081f, -0.0225670f, +0.1262269f, -0.5207219f, -0.7570226f, -0.1720843f, +0.1150777f, +0.1737575f,
  -0.2185234f, +0.1447066f, +0.1006091f, -0.0238825f, +0.1882279f, -0.2390759f, -0.1297100f, -0.1125847f,
  +0.0586810f, +0.3222495f, +0.1904865f, -0.0206063f, -0.3049276f, -0.0763577f, -0.1093036f, +0.0508786f,
  +0.0714054f, -0.2155369f, +0.0609583f, +0.1317835f, -0.1082125f, +0.2719306f, +0.0899618f, +0.1950809f,
  +0.1386233f, +0.0266551f, -0.2399641f, +0.1123314f, +0.1914804f, +0.2842128f, +0.2073467f, +0.2634636f,
  +0.1412219f, +0.1157262f, -0.1250226f, +0.3783001f, -0.2447571f, -0.0587558f, +0.0234639f, +0.2801619f,
  +0.2632109f, -0.0028976f, +0.0288425f, +0.3391212f, +0.0042731f, +0.0881434f, +0.1877949f, -0.1008018f,
  +0.3383697f, +0.0761260f, +0.2207914f, +0.3496794f, +0.2003038f, -0.2302574f, -0.0794737f, -0.3855978f,
  -0.3268980f, +0.2087577f, +0.0711668f, -0.0008721f, -0.1225669f, +0.1183875f, -0.1824883f, +0.2646595f,
  +0.0091981f, +0.1161864f, -0.0113116f, -0.1535095f, -0.2209094f, -0.2556513f, +0.1456643f, +0.2889522f,
  -0.0510517f, -0.0559103f, -0.0950899f, -0.1380947f, +0.1582654f, -0.2657064f, +0.0881757f, -0.0228362f,
  -0.0171665f, +0.0277278f, +0.1155446f, +0.1505606f, -0.2480313f, +0.2291786f, -0.2328981f, -0.2126550f,
  +0.0659014f, -0.0412232f, +0.0782259f, -0.0425377f, -0.0813912f, +0.0103323f, +0.0286954f, +0.2214115f,
  -0.0689255f, -0.1125513f, -0.0591312f, -0.0025144f, -0.1106792f, +0.1460211f, -0.1812592f, +0.1430234f,
  -0.0695340f, +0.0221653f, +0.0747083f, -0.2914509f, +0.0174593f, +0.1492621f, +0.0811977f, -0.0576513f,
  +0.2152788f, -0.0963450f, +0.1873199f, -0.1736017f, +0.0735867f, -0.0281462f, -0.0321030f, +0.1255264f,
  +0.1086212f, -0.0377038f, -0.0278848f, -0.0566789f, +0.0714053f, +0.0152246f, -0.0637619f, +0.2069771f,
  +0.1045057f, -0.1423774f, +0.0668138f, -0.0865365f, +0.0330755f, -0.0608888f, +0.1112570f, +0.2038758f,
  +0.1031767f, -0.0475434f, +0.1106896f, -0.0316486f, +0.2803543f, +0.1612768f, +0.0250924f, -0.0343193f,
  +0.2135965f, +0.1494442f, -0.0401966f, +0.1324993f, -0.3105080f, +0.1526339f, -0.0979835f, +0.1618850f,
  +0.0751460f, -0.0030137f, -0.1241213f, -0.1719177f, +0.0631577f, +0.0675919f, -0.0695233f, +0.2070469f,
  +0.1361098f, +0.0323966f, -0.1949758f, -0.2720240f, +0.0585273f, +0.0144197f, +0.0064991f, +0.0967986f,
  -0.1682627f, +0.1128108f, -0.0033124f, -0.1585741f, -0.0039676f, -0.1050434f, +0.0725272f, -0.1239420f,
  -0.2454334f, +0.0733779f, -0.0295733f, +0.0795560f, +0.2006426f, +0.1571057f, -0.2272141f, -0.0830489f,
  +0.0467271f, -0.0021054f, -0.1308458f, -0.0845802f, +0.0474290f, -0.0521979f, -0.1618618f, -0.0253194f,
  -0.1203004f, +0.1109615f, +0.1164524f, -0.1853484f, +0.3583108f, -0.0195808f, +0.1924472f, -0.1741351f,
  -0.1924781f, +0.0072503f, -0.0553913f, -0.3392912f, +0.0043219f, +0.1337031f, -0.0814496f, -0.2893343f,
  -0.2954849f, +0.2251545f, +0.0736346f, -0.0213051f, -0.0375026f, +0.0359363f, -0.0749065f, -0.1289123f,
  +0.1836755f, -0.3747317f, -0.0181871f, +0.0485875f, -0.0593329f, +0.2001793f, -0.2792756f, +0.0078017f,
  +0.2167790f, -0.3736886f, -0.0074472f, +0.1087902f, -0.1544376f, -0.1568564f, -0.0129692f, +0.2478705f,
  -0.2637991f, +0.1608096f, +0.0173100f, +0.1631257f, +0.1648138f, -0.0550397f, -0.0025491f, -0.0242126f
);

const float biases[4] = float[4](
  -0.0237853f, -0.0241740f, +0.0039884f, +0.0246837f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer91 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2208989f, +0.1067816f, -0.2343750f, +0.1336667f, -0.2108656f, +0.1144068f, -0.1716708f, -0.1206120f,
  +0.0431413f, -0.0542286f, +0.2977287f, -0.1389448f, -0.1523028f, +0.0469943f, -0.1327738f, +0.0699889f,
  -0.2647259f, +0.0976520f, -0.0455556f, -0.1130930f, -0.1483414f, +0.0394412f, -0.3007276f, -0.0325547f,
  +0.2963743f, -0.2163281f, -0.2454265f, -0.2716276f, +0.1166298f, +0.1440549f, +0.1092179f, -0.0471686f,
  -0.0543397f, -0.2873563f, +0.3243884f, +0.0225495f, -0.1501397f, +0.0131638f, +0.0332962f, -0.0534826f,
  +0.0533364f, +0.0640372f, -0.0355305f, +0.0934014f, +0.0136897f, +0.2346793f, +0.1619193f, -0.2940216f,
  +0.0416570f, +0.1281915f, -0.0469952f, -0.0299654f, -0.1149697f, +0.1524215f, -0.1132128f, +0.0722564f,
  -0.0010600f, -0.0879155f, +0.1983808f, +0.0510016f, +0.0433363f, +0.1250871f, +0.0565814f, -0.1125502f,
  -0.0218721f, -0.0106901f, -0.2477175f, -0.1422753f, +0.0339837f, +0.1087647f, +0.0885002f, -0.1309702f,
  -0.0380352f, -0.0664882f, +0.0732447f, +0.0902182f, -0.0504112f, +0.0791084f, -0.0055404f, -0.0964804f,
  +0.2400158f, -0.1963891f, +0.4610242f, -0.2002603f, -0.0538170f, -0.1309315f, +0.1467739f, +0.1149575f,
  -0.0100307f, +0.1045600f, -0.0133402f, +0.1824614f, +0.2509115f, -0.1531454f, +0.0617060f, -0.1807846f,
  -0.1803344f, -0.0198492f, -0.0533774f, +0.0212390f, -0.1534988f, +0.0227613f, -0.0571746f, -0.0699730f,
  -0.0756776f, +0.1357149f, +0.0442317f, +0.1031186f, -0.1724862f, +0.0493512f, -0.1456194f, -0.1103339f,
  +0.0209130f, +0.0018688f, -0.1149838f, -0.0432127f, -0.3070803f, -0.1432704f, +0.2211589f, -0.2225115f,
  -0.1714427f, +0.1992603f, +0.1171371f, +0.0676086f, -0.0634859f, +0.0621510f, -0.1757325f, -0.0139922f,
  +0.1327837f, -0.1316775f, +0.1490966f, -0.1548717f, +0.0047409f, -0.0505537f, -0.0094439f, +0.1659271f,
  -0.0288473f, +0.0221866f, +0.1105676f, +0.0053139f, -0.1047284f, -0.0685889f, +0.0486168f, +0.0239838f,
  +0.3853478f, +0.0778970f, +0.1046278f, -0.0696740f, -0.0886373f, -0.1330186f, +0.4527740f, +0.0858758f,
  -0.0322870f, -0.3401430f, -0.1428018f, -0.0560982f, +0.1626320f, +0.0943105f, -0.5221980f, +0.2162446f,
  +0.6091889f, -0.3413711f, +0.1125127f, +0.2160644f, +0.2701276f, -0.2218649f, +0.3529298f, +0.0231389f,
  +0.5628276f, +0.0364501f, +0.2855973f, +0.2961811f, -0.1924135f, -0.2576895f, +0.1311221f, +0.3683415f,
  -0.1660314f, -0.1270297f, +0.3302490f, -0.0057728f, +0.0409466f, -0.5645095f, +0.2048461f, +0.1283700f,
  +0.0322072f, -0.1541045f, -0.4910733f, +0.0986174f, +0.3561929f, -0.0385496f, +0.3834155f, +0.0654631f,
  -0.1074361f, -0.3582256f, +0.1728988f, +0.2494809f, -0.3192270f, -0.2551832f, -0.1646045f, +0.2247532f,
  +0.1231200f, -0.1235888f, +0.2381049f, +0.1903975f, +0.2814403f, -0.6856186f, +0.1239631f, -0.1445905f,
  +0.1255506f, -0.0502373f, -0.1679960f, -0.0813119f, +0.1403344f, -0.4210095f, +0.2248038f, +0.0791408f,
  +0.1803448f, -0.0757848f, +0.1730426f, -0.0537599f, +0.1533999f, -0.1589737f, +0.1107456f, +0.1685904f,
  -0.4578556f, +0.2202692f, -0.1578406f, -0.1729442f, -0.1950734f, +0.0462753f, -0.2924995f, -0.3172117f,
  +0.0627993f, -0.1644588f, +0.2371050f, -0.1687765f, +0.0314621f, -0.1553761f, -0.1142601f, +0.1448065f,
  -0.3290747f, +0.2016853f, +0.1969381f, -0.0121579f, +0.2128778f, -0.0425976f, -0.2789053f, -0.1749922f,
  +0.5625933f, -0.2896519f, +0.1244547f, +0.2902459f, +0.1403666f, -0.4842530f, +0.6518965f, +0.2289744f,
  -0.6979625f, +0.2251509f, -0.3959767f, +0.2385059f, -0.0453332f, +0.3899152f, -0.4440852f, -0.5334319f,
  +0.0509919f, +0.0148799f, -0.1403414f, +0.1214116f, -0.2176714f, +0.0622142f, +0.0819982f, -0.1487542f,
  +0.1414713f, -0.0809513f, +0.1695268f, -0.0893561f, +0.2267903f, +0.0371817f, -0.3232635f, -0.0396123f,
  +0.2037940f, -0.0721158f, +0.2366605f, +0.0600022f, -0.0074281f, -0.3610370f, +0.2022701f, +0.2254441f
);

const float biases[4] = float[4](
  +0.0296709f, -0.0039083f, -0.0660845f, -0.0150090f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer92 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0578575f, -0.0582314f, +0.0839757f, +0.1369116f, -0.1109006f, +0.0071199f, +0.0660718f, -0.1782324f,
  +0.0602077f, +0.2561195f, -0.0897152f, +0.0919252f, -0.0572849f, +0.0141943f, -0.0935931f, +0.3370493f,
  +0.0274342f, -0.0632469f, -0.0623561f, +0.0114821f, +0.1185956f, +0.1944802f, -0.1085939f, -0.0034958f,
  -0.1955241f, -0.0225312f, -0.1076070f, +0.2934535f, -0.1066652f, -0.1491759f, +0.0966069f, +0.0004288f,
  -0.2547048f, +0.1537889f, -0.3566148f, +0.2988071f, -0.1965348f, -0.0261648f, -0.0707033f, -0.2000030f,
  +0.0721498f, +0.0043159f, +0.1679518f, +0.1447731f, +0.1085648f, +0.2244825f, -0.5188469f, -0.1652337f,
  +0.0205574f, -0.0621180f, +0.0099987f, -0.0486191f, +0.1736984f, +0.0034621f, -0.0046599f, +0.0325612f,
  -0.0403212f, +0.0361698f, +0.0080446f, +0.1477543f, +0.0465738f, -0.1542831f, -0.0830185f, +0.0357776f,
  +0.1290544f, +0.0003748f, +0.1187988f, -0.0644321f, -0.0248195f, -0.1719886f, +0.0007189f, -0.0015137f,
  -0.0082176f, +0.2232336f, -0.1348548f, -0.0780451f, +0.0468231f, -0.0306215f, +0.2175083f, -0.0232652f,
  -0.3774820f, +0.1654341f, -0.0040862f, +0.1276966f, +0.0152505f, +0.0783817f, -0.3463575f, -0.1205208f,
  -0.1643905f, -0.0587741f, -0.1432031f, +0.0861014f, +0.1569739f, +0.1450498f, +0.1248220f, +0.0370092f,
  -0.0374596f, +0.0726931f, -0.1064972f, +0.0505563f, +0.1992605f, +0.0396879f, +0.1168439f, +0.4384861f,
  +0.3582176f, -0.0711196f, +0.1347934f, +0.2133641f, -0.0403539f, +0.2228678f, +0.1099246f, -0.6646512f,
  +0.3653430f, -0.5660291f, -0.1138985f, -0.2035469f, +0.1697520f, +0.1506747f, -0.0015372f, -0.0954671f,
  +0.1320356f, +0.1522656f, +0.0036567f, +0.1762774f, -0.0829326f, -0.0734547f, -0.1976606f, -0.0844878f,
  +0.0372023f, -0.0874253f, -0.0727648f, +0.0429644f, +0.0241235f, -0.2777756f, +0.1877789f, +0.3503199f,
  -0.3047540f, -0.1143408f, +0.2379811f, +0.0301115f, -0.1314952f, -0.2943469f, +0.1465022f, -0.0943361f,
  +0.0103541f, -0.3714406f, +0.1608349f, -0.1454790f, -0.0049117f, +0.2315526f, +0.2644980f, -0.1697217f,
  +0.0233959f, +0.1870989f, -0.1158232f, -0.0015261f, -0.1425260f, +0.0683595f, -0.0440937f, +0.3954072f,
  -0.1803223f, +0.0567068f, +0.0253042f, -0.1161338f, +0.0821100f, +0.0214392f, +0.0386749f, +0.0287128f,
  -0.2447820f, +0.2163324f, -0.1478028f, -0.0108344f, +0.0725892f, +0.0234839f, +0.1806977f, +0.2027350f,
  -0.0639304f, -0.3871047f, +0.1309752f, -0.0700971f, -0.1703842f, -0.0125888f, +0.2089604f, -0.6158229f,
  +0.1844856f, +0.0196874f, +0.0213449f, -0.1242411f, +0.0434276f, +0.2203062f, -0.1734075f, +0.0296681f,
  -0.1867065f, +0.2359187f, -0.0614242f, +0.1001663f, -0.0694229f, +0.1474147f, -0.0610173f, -0.0194218f,
  +0.1432662f, -0.1607352f, +0.0528765f, -0.2338664f, +0.0317186f, +0.0490181f, -0.0578588f, +0.0969376f,
  -0.2583837f, +0.1915322f, -0.0959827f, -0.0801839f, +0.1383159f, -0.2379182f, -0.0780680f, +0.0872480f,
  +0.0975100f, -0.2433840f, +0.2068744f, -0.0328511f, -0.0442224f, +0.1878599f, +0.1084491f, +0.0767212f,
  -0.2079370f, -0.0212068f, +0.0095151f, +0.0747785f, -0.0221281f, +0.0303909f, -0.0650115f, +0.0713559f,
  -0.0412990f, -0.0226631f, -0.1407494f, -0.0576727f, +0.2658607f, +0.0458287f, +0.0406558f, -0.1329505f,
  -0.0079611f, +0.2116769f, +0.1607200f, -0.1126686f, -0.2679260f, -0.1525821f, -0.0031814f, -0.5980182f,
  -0.2173909f, -0.2225685f, +0.1184459f, +0.0153097f, +0.1285669f, +0.0755755f, -0.3433453f, +0.6250133f,
  +0.2306301f, -0.0503288f, +0.1533524f, +0.0344309f, -0.0587521f, -0.1381148f, -0.2480020f, -0.1733337f,
  -0.1600938f, -0.0537120f, +0.2058917f, -0.0205183f, +0.0897987f, -0.0428076f, -0.3131833f, +0.1347000f,
  -0.1530804f, -0.1358407f, +0.1796845f, +0.1393583f, +0.1622637f, -0.0299103f, +0.2674658f, -0.2285481f,
  +0.2214696f, -0.1241075f, +0.2268841f, -0.0260679f, -0.1255029f, +0.0733341f, +0.0040282f, -0.0760796f
);

const float biases[4] = float[4](
  -0.0148486f, +0.0014165f, -0.0087282f, -0.0134985f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer92 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0925277f, -0.1705185f, -0.0377850f, -0.0369478f, +0.0031768f, +0.1320207f, +0.1282431f, -0.2327721f,
  -0.1250842f, +0.5006156f, -0.0148384f, +0.0300848f, +0.0070063f, +0.1158520f, +0.1151513f, +0.1236765f,
  -0.0406803f, -0.2381220f, +0.1021624f, +0.1136211f, +0.1369962f, +0.2542030f, +0.1668370f, +0.0104298f,
  -0.1216414f, -0.1599522f, -0.0983584f, -0.0585029f, +0.0833408f, +0.2212564f, -0.1787791f, -0.0670393f,
  +0.2288323f, +0.2409799f, -0.0405961f, -0.1733502f, +0.2088508f, +0.0080415f, +0.1386534f, +0.1532524f,
  -0.1720881f, -0.0597000f, +0.0200675f, -0.3267122f, -0.1582863f, -0.1827919f, +0.0868257f, -0.0661321f,
  -0.2452113f, -0.0361913f, +0.1967100f, -0.2316694f, +0.0665262f, -0.0283023f, +0.2962244f, -0.0545918f,
  -0.1098854f, +0.1640944f, +0.1510518f, -0.0603633f, +0.0972094f, +0.0423759f, -0.3411997f, -0.1623478f,
  +0.0679412f, +0.0382717f, +0.0000993f, -0.0558004f, +0.2731909f, +0.1606838f, +0.2023507f, +0.0051207f,
  -0.0703457f, -0.2811175f, +0.2200907f, +0.0164439f, +0.1032235f, +0.1029247f, +0.5342317f, +0.1635305f,
  -0.0323552f, +0.2402408f, +0.0172221f, +0.1213388f, -0.1303283f, +0.1285433f, +0.1473324f, -0.0063018f,
  -0.1525979f, -0.0064578f, +0.0693000f, -0.1447603f, -0.0020902f, +0.2134218f, +0.1947895f, -0.1016794f,
  -0.6392723f, +0.0813690f, -0.0700925f, -0.0251444f, -0.0684668f, -0.0164588f, +0.1971576f, +0.1041087f,
  +0.4407773f, +0.1102689f, +0.3064970f, +0.1327294f, +0.2157037f, +0.2148189f, +0.5994815f, -0.3568298f,
  +0.4109932f, +0.1956763f, -0.1676328f, -0.2127683f, +0.0127800f, -0.0209643f, +0.1399858f, -0.1856334f,
  +0.1128520f, +0.3965103f, -0.0754347f, +0.0634539f, +0.1113181f, +0.1361992f, -0.2700493f, +0.1545798f,
  +0.0232312f, -0.6220769f, -0.0590474f, -0.0312605f, +0.2539895f, +0.3620211f, +0.0821085f, +0.0176790f,
  +0.0333904f, +0.0438758f, +0.1078445f, +0.1810373f, -0.1549069f, +0.1947790f, +0.1092247f, +0.0235433f,
  +0.0062093f, +0.0044363f, -0.1435522f, -0.1008240f, +0.2073126f, -0.0362012f, -0.3540542f, -0.0028193f,
  -0.0023168f, -0.1540722f, +0.0643522f, -0.0672583f, -0.1224071f, +0.1636083f, +0.0459108f, -0.2076042f,
  -0.0108571f, -0.0718789f, -0.0392517f, +0.0902843f, +0.0432060f, -0.0369637f, +0.1740701f, +0.0405590f,
  -0.0965492f, +0.2847950f, +0.0097426f, +0.1498382f, +0.0746167f, +0.0127604f, +0.0255052f, +0.2352714f,
  +0.5767356f, +0.1670772f, -0.2156215f, +0.0118475f, +0.1795917f, -0.0976678f, -0.2988798f, -0.2549967f,
  -0.2067829f, -0.3074101f, -0.1025571f, -0.2696694f, -0.0365299f, -0.0757840f, +0.3756935f, -0.0691479f,
  +0.0670116f, +0.0752144f, -0.1360338f, +0.1335423f, +0.0440970f, -0.1231757f, -0.2982385f, +0.1403708f,
  -0.1180883f, -0.3668511f, +0.1137841f, +0.0308841f, +0.2356917f, +0.0949064f, +0.3971682f, +0.3331067f,
  +0.0341499f, +0.0479878f, +0.0611263f, -0.0636047f, +0.0342348f, -0.0153000f, -0.3191920f, -0.0454857f,
  +0.2722535f, -0.1177343f, -0.1342393f, +0.0049532f, +0.1819503f, +0.0513918f, -0.4156132f, +0.1117025f,
  -0.4377545f, -0.0244751f, +0.0824957f, -0.3354012f, +0.1527791f, -0.0294554f, +0.3533856f, -0.2500897f,
  +0.0370789f, -0.1420538f, -0.0061345f, +0.1548943f, -0.0275412f, +0.0449675f, -0.1139843f, +0.0702733f,
  -0.0212890f, +0.1220310f, -0.0365217f, +0.1863279f, +0.1714207f, +0.1314202f, +0.0421777f, +0.0576583f,
  +0.1337382f, +0.3313741f, -0.1200948f, -0.0494109f, +0.0327753f, +0.0581393f, +0.2589441f, +0.3431434f,
  -0.1953536f, -0.1104996f, -0.1838950f, -0.0582384f, -0.2718455f, -0.1114130f, +0.1508917f, +0.0633243f,
  -0.0135768f, -0.1053174f, -0.1464378f, -0.0646047f, -0.0900704f, +0.0353893f, +0.1733503f, +0.1058950f,
  +0.1341064f, -0.0625502f, +0.1117226f, +0.1092007f, -0.1061976f, +0.1284209f, -0.1936973f, +0.0424915f,
  +0.0825168f, -0.0950434f, -0.1736972f, +0.1027200f, -0.1859932f, +0.0379318f, +0.2056022f, +0.0697616f
);

const float biases[4] = float[4](
  -0.0052224f, -0.0152704f, -0.0057326f, +0.0015333f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer93 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0017731f, -0.0831539f, +0.1768791f, -0.2018234f, +0.2709105f, -0.0541883f, +0.2841868f, -0.1827396f,
  -0.1563689f, -0.2653593f, +0.3408428f, -0.3164256f, +0.0493162f, -0.3870296f, -0.1184754f, +0.0071815f,
  +0.0753584f, -0.1470314f, -0.0381917f, +0.0052484f, +0.1443674f, -0.0945377f, +0.4002515f, -0.0893422f,
  +0.4046037f, -0.1608313f, +0.0381110f, -0.1841353f, -0.0506017f, -0.2788943f, +0.0806504f, -0.3033854f,
  -0.0597127f, -0.3802611f, +0.0957694f, +0.1045809f, +0.2508017f, -0.1419791f, -0.2050326f, -0.2168058f,
  -0.0125642f, -0.3040217f, +0.1956168f, -0.3626010f, +0.0365693f, -0.0702541f, -0.1230883f, -0.0908631f,
  +0.0397837f, -0.3306302f, +0.0547235f, -0.4296760f, +0.2377031f, -0.2762099f, -0.3029119f, -0.1084844f,
  +0.2961611f, -0.4524902f, +0.4929219f, +0.5640574f, -0.1737409f, -0.2851744f, +0.1081339f, -0.2944565f,
  -0.2174550f, -0.0344864f, +0.0049484f, +0.0549875f, +0.1298073f, -0.5190325f, +0.1430769f, -0.0052516f,
  +0.0744890f, -0.0381621f, +0.1611989f, -0.0673187f, +0.1426384f, -0.0402789f, +0.0924595f, +0.0591895f,
  -0.1637341f, +0.1749043f, -0.0343487f, +0.0054946f, +0.0540614f, +0.0121971f, +0.0764643f, -0.0817301f,
  +0.0567153f, -0.1492379f, +0.0422936f, -0.1179005f, +0.0389235f, +0.0234174f, -0.1602211f, +0.0146325f,
  +0.2143687f, +0.0141231f, -0.2327184f, +0.3660985f, -0.0655006f, -0.0833770f, +0.2979214f, -0.2634459f,
  +0.0071915f, +0.2565530f, +0.4682751f, -0.0654773f, +0.0938078f, -0.3707623f, +0.5042890f, -0.0500555f,
  +0.1014139f, -0.2622949f, -0.0152131f, -0.1544981f, +0.3602784f, +0.3353672f, -0.3379484f, +0.0754318f,
  -0.4749153f, -0.4676948f, +0.0232130f, +0.3466148f, -0.2266729f, +0.0218331f, -0.0325552f, -0.2623759f,
  +0.3501356f, +0.2139953f, +0.1781684f, +0.0805324f, +0.1817446f, -0.6154369f, +0.2210862f, -0.2352734f,
  -0.0965392f, +0.0413373f, -0.0996876f, -0.0304180f, +0.2503802f, -0.0374308f, +0.0523864f, -0.1084336f,
  -0.1402173f, +0.0694993f, -0.0496896f, -0.1660483f, +0.0636810f, +0.0921243f, +0.1588374f, -0.1176797f,
  -0.0872040f, -0.2481354f, +0.3002730f, -0.2758126f, +0.3769016f, -0.2008863f, -0.3073350f, -0.1434590f,
  -0.0096947f, -0.1101180f, +0.0497405f, -0.2469764f, +0.4072866f, +0.0571294f, +0.0479875f, -0.0018393f,
  -0.0388456f, +0.1562807f, +0.0105947f, -0.1830410f, +0.2247064f, +0.1013803f, +0.0008657f, -0.1710374f,
  +0.1230653f, +0.2822749f, -0.1625916f, -0.2888088f, +0.0938925f, +0.3641796f, -0.2052841f, -0.0729477f,
  +0.2067489f, -0.0113467f, +0.0237507f, -0.0222811f, +0.2474624f, +0.0892105f, -0.1419261f, +0.0519430f,
  +0.1405315f, +0.0861933f, +0.2206603f, +0.0139903f, -0.2173354f, +0.1160159f, +0.0625589f, -0.0234635f,
  +0.0181927f, +0.2500000f, -0.1924555f, +0.0056985f, +0.1490077f, -0.0028052f, +0.3100254f, -0.1457197f,
  -0.0447257f, +0.1205337f, -0.5773678f, -0.3366468f, -0.0419555f, +0.3416095f, +0.1130457f, -0.2772419f,
  +0.2965888f, -0.0013932f, -0.0247804f, +0.1648787f, -0.1673867f, -0.0332690f, +0.0847722f, +0.1359613f,
  -0.2393220f, +0.1019971f, -0.0241684f, -0.1276678f, -0.2888837f, -0.1262845f, +0.1254321f, +0.1529743f,
  +0.3893449f, -0.3344037f, -0.1179422f, +0.1159013f, -0.0648539f, -0.0145104f, +0.0058848f, +0.4007597f,
  +0.3606653f, +0.1338662f, -0.1862485f, +0.4638057f, -0.5411623f, -0.0390796f, +0.0910582f, +0.0563563f,
  +0.3346694f, -0.1270429f, +0.3518457f, -0.2313504f, +0.0997796f, -0.4393545f, +0.2568477f, +0.1184724f,
  +0.3660715f, -0.2849476f, +0.2817108f, +0.2534400f, -0.0889479f, +0.1451982f, +0.1768084f, +0.2399624f,
  -0.0043712f, +0.0108429f, +0.1091820f, +0.1499265f, -0.3636886f, -0.1563253f, +0.0463792f, +0.3839130f,
  +0.0386179f, -0.0466894f, +0.1749862f, +0.0379006f, -0.1435068f, -0.0293819f, -0.3235285f, -0.2447312f,
  +0.2178980f, -0.1836964f, -0.0779130f, +0.1938149f, -0.2550297f, -0.0079488f, +0.2591726f, +0.0514577f
);

const float biases[4] = float[4](
  -0.0488324f, -0.0139812f, +0.0242258f, -0.0684465f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer93 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0641315f, -0.0283516f, +0.1505526f, +0.0457238f, -0.0352542f, -0.0041958f, +0.1982427f, -0.1693520f,
  -0.0042977f, -0.1327765f, +0.0782049f, -0.0537889f, +0.1764492f, +0.0336875f, +0.0268497f, -0.0307449f,
  +0.0733025f, -0.0533970f, +0.0100065f, -0.0237140f, -0.0099815f, +0.2015349f, -0.0021714f, +0.0805078f,
  +0.3768627f, -0.0300654f, +0.0125828f, -0.1918768f, +0.0592152f, +0.0119421f, -0.0880736f, +0.1622859f,
  -0.1177348f, +0.2198892f, +0.0529254f, -0.1560128f, +0.3947484f, +0.1878855f, -0.2118291f, -0.0660880f,
  -0.0490631f, +0.0544450f, -0.2117636f, -0.1022126f, +0.2716344f, +0.1446431f, +0.0725265f, -0.1309590f,
  -0.0597779f, +0.1839383f, -0.1193335f, +0.1211382f, +0.1420303f, -0.0024875f, -0.2690072f, +0.3902695f,
  +0.0777628f, -0.0211036f, +0.2243727f, -0.0051663f, +0.2371658f, +0.0122385f, -0.1007989f, +0.1324027f,
  +0.1617792f, -0.1264436f, -0.1066755f, -0.0762809f, -0.1657949f, -0.0989600f, +0.0849898f, +0.0761570f,
  +0.0419583f, -0.1845095f, +0.0293478f, -0.0310608f, -0.1025656f, -0.2612565f, -0.0764486f, +0.0084039f,
  -0.0650754f, +0.1962500f, -0.0322845f, +0.0145060f, +0.0555219f, +0.0096037f, +0.1410847f, +0.0215884f,
  +0.0149329f, +0.0394803f, -0.3170518f, +0.1843695f, +0.1392829f, +0.0704114f, -0.2081632f, +0.0014718f,
  -0.2093606f, +0.2319945f, -0.0959329f, +0.0488642f, +0.0948041f, +0.0042576f, +0.1723246f, -0.0287678f,
  -0.1876331f, -0.2363521f, +0.2747064f, +0.2742385f, +0.1065713f, -0.2942536f, +0.0389144f, -0.2714233f,
  +0.0987021f, -0.1530082f, -0.1165862f, +0.1706717f, +0.0320223f, +0.0673944f, +0.0954015f, +0.1528495f,
  -0.0105508f, -0.3300361f, -0.0469057f, +0.2144618f, +0.0235670f, +0.1472226f, -0.0041375f, -0.2279801f,
  -0.0143121f, +0.0981491f, +0.0783029f, +0.2485908f, -0.2112191f, -0.0912731f, -0.0647384f, +0.3794325f,
  +0.1759660f, -0.0888101f, +0.3814708f, +0.0989166f, -0.4024924f, -0.2898129f, +0.1030488f, -0.1625926f,
  +0.1222113f, -0.0968277f, -0.1869471f, -0.0028415f, -0.0843129f, +0.0114280f, -0.0126390f, -0.0731718f,
  -0.0803799f, +0.1552578f, -0.0125920f, -0.0698871f, -0.0380632f, +0.0582769f, -0.1544000f, +0.1370672f,
  -0.1948734f, -0.0161113f, -0.3354527f, -0.1120576f, +0.1723965f, +0.0887517f, -0.2809849f, -0.1313722f,
  -0.0734857f, +0.1753353f, -0.0622443f, -0.1160443f, +0.0838324f, +0.0515282f, +0.2817258f, -0.2218837f,
  +0.0125755f, -0.1334525f, +0.1337159f, -0.0919941f, -0.1102273f, +0.2612948f, +0.1671760f, -0.3194998f,
  -0.2573204f, +0.2772094f, +0.0790659f, -0.1770110f, +0.0282133f, +0.0971190f, -0.0384546f, -0.1153658f,
  +0.1067345f, -0.0592058f, +0.1042998f, -0.0776558f, +0.1680577f, -0.0828087f, -0.1832868f, +0.0062081f,
  -0.1593253f, -0.0614676f, +0.0005025f, +0.1668213f, -0.2001795f, -0.1540662f, -0.1096987f, +0.0979393f,
  +0.1574395f, -0.0366831f, -0.0033294f, -0.1203628f, +0.0572440f, +0.0958950f, -0.0062314f, +0.0054063f,
  +0.2075328f, +0.0201107f, +0.0098553f, +0.1192173f, +0.0387250f, -0.0231974f, +0.2663616f, +0.0357243f,
  -0.2190093f, +0.2139239f, +0.1729010f, -0.0734029f, +0.0050648f, -0.2981425f, +0.0304540f, -0.3378282f,
  -0.0006411f, -0.1534196f, -0.1989789f, +0.0394243f, +0.0125996f, +0.1496311f, -0.1083338f, -0.0588048f,
  -0.2896903f, -0.0047385f, +0.0422086f, +0.1298904f, -0.0898829f, -0.0781425f, -0.2100078f, -0.1331879f,
  -0.3354719f, +0.1730555f, +0.2139496f, -0.1338433f, +0.2415722f, -0.1778290f, -0.0173439f, -0.2835297f,
  -0.0217410f, +0.0035405f, -0.2608218f, -0.1400858f, -0.3265059f, +0.1960787f, -0.0456741f, +0.1019181f,
  -0.2629819f, -0.2496033f, +0.1106835f, +0.1138981f, +0.1780901f, -0.0433462f, +0.0748665f, -0.2935115f,
  -0.0246137f, +0.1974487f, +0.1151560f, +0.0542453f, -0.1937611f, +0.1079800f, -0.2249817f, +0.2140714f,
  +0.2798180f, -0.2870617f, +0.0604349f, +0.0667264f, -0.2715941f, +0.0561608f, +0.0871604f, -0.1012595f
);

const float biases[4] = float[4](
  +0.0036080f, -0.0283317f, +0.0438875f, -0.0003570f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer94 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0694942f, -0.1779267f, -0.0487292f, +0.1754705f, -0.0759479f, +0.0129025f, -0.1016555f, +0.1282635f,
  -0.2745836f, +0.5510292f, -0.0345459f, +0.0262741f, +0.0726696f, -0.2605063f, +0.1024182f, +0.3343118f,
  +0.0654866f, -0.2873036f, -0.0584094f, -0.1272463f, -0.0293832f, -0.0237724f, -0.0747285f, -0.2421667f,
  +0.1512406f, +0.1489234f, -0.3001527f, +0.2340857f, +0.0408747f, -0.0152303f, -0.0405299f, -0.1044570f,
  -0.0944354f, +0.1170773f, +0.1527576f, -0.1453092f, +0.1077331f, +0.1836089f, -0.1662585f, +0.1656570f,
  -0.1917574f, +0.1183495f, +0.0595914f, -0.1182519f, -0.1775254f, -0.0055770f, +0.0968889f, +0.2007737f,
  -0.0786171f, -0.0108415f, +0.2168662f, -0.2388334f, +0.1088821f, -0.0225403f, +0.0685770f, +0.0224648f,
  +0.1474796f, +0.0476480f, +0.0718954f, +0.1167198f, +0.0011877f, -0.1611670f, +0.1651756f, +0.0978853f,
  -0.4392317f, -0.0721440f, -0.0352389f, +0.1171284f, -0.1587655f, -0.0529365f, +0.0457866f, +0.0770167f,
  -0.2316668f, -0.0866647f, +0.0297669f, +0.0046456f, +0.1667993f, +0.0523956f, -0.3033875f, -0.1186622f,
  +0.2628748f, +0.2347676f, -0.0644775f, -0.1431843f, +0.2377614f, +0.3095546f, -0.2277785f, +0.3425716f,
  +0.2500207f, -0.2121271f, -0.2006999f, +0.0809738f, -0.0313402f, +0.0540512f, -0.0291836f, -0.3991667f,
  -0.0601663f, -0.2055084f, +0.0311314f, +0.1140607f, -0.0314518f, -0.1189021f, -0.1150786f, +0.0876601f,
  +0.1404720f, +0.0355006f, -0.4599724f, -0.2982678f, +0.0798910f, -0.3103506f, +0.3520969f, -0.3307480f,
  -0.1744825f, +0.1340037f, +0.2755294f, +0.1385103f, -0.0123362f, +0.1580090f, +0.1295111f, +0.0912117f,
  -0.1447926f, -0.1237524f, -0.0153139f, +0.0545841f, +0.0258916f, -0.0444633f, +0.0150225f, -0.0406507f,
  -0.0078248f, -0.0788731f, -0.1201377f, -0.1943164f, +0.1611662f, +0.1639951f, +0.0466772f, +0.0478302f,
  +0.0437507f, -0.2124000f, +0.1149651f, +0.2502164f, -0.0238248f, -0.0627070f, -0.2921610f, -0.0010208f,
  -0.2000415f, -0.3712094f, +0.1950528f, -0.0146817f, +0.1533284f, -0.0117519f, +0.0636883f, +0.1410816f,
  -0.1680019f, +0.0682718f, +0.0648639f, -0.2472398f, -0.1546813f, -0.0048000f, -0.0089062f, -0.1178809f,
  -0.3200799f, +0.0451178f, -0.0231719f, +0.0848753f, -0.0074538f, +0.1698349f, -0.0412723f, -0.0049950f,
  -0.1931061f, -0.0859726f, -0.3299397f, +0.1332580f, -0.1010900f, +0.2051979f, +0.0672626f, -0.1489462f,
  -0.1117066f, +0.3537777f, +0.1543195f, -0.1829564f, -0.2127457f, -0.0665229f, +0.0068641f, +0.1449375f,
  +0.0686461f, +0.0405529f, +0.0137639f, +0.2099241f, -0.3299992f, -0.1233454f, +0.0783078f, +0.1760816f,
  -0.2673452f, +0.0692951f, -0.1421660f, +0.2150358f, +0.0906665f, -0.0212518f, +0.1187433f, -0.1461258f,
  -0.2657308f, -0.1047933f, +0.1620409f, -0.0123101f, -0.3161851f, +0.0143445f, -0.1138074f, +0.2485829f,
  +0.0944444f, -0.1638568f, -0.1223624f, +0.1822655f, -0.0201044f, +0.0601174f, +0.1935974f, -0.0819854f,
  -0.0523444f, -0.2104509f, +0.2072621f, +0.0848654f, -0.1185524f, +0.1057864f, +0.1355506f, -0.0149003f,
  -0.2373127f, -0.1532933f, +0.0668528f, +0.1770628f, -0.1101645f, +0.1695230f, +0.0011161f, -0.1280407f,
  +0.1568272f, +0.0098883f, -0.0401364f, +0.1211635f, -0.0405445f, +0.3376381f, -0.0680643f, -0.0450882f,
  +0.1891294f, +0.0444820f, -0.0118656f, +0.0430253f, -0.1084704f, +0.1520090f, +0.0840985f, -0.2305718f,
  +0.0384054f, -0.2187392f, +0.2384738f, -0.1389194f, -0.3000650f, -0.0775673f, +0.0184571f, +0.0240468f,
  +0.0267267f, -0.1147009f, -0.0425112f, -0.0636946f, -0.3562159f, +0.1441358f, -0.1064789f, -0.1557345f,
  +0.0337703f, +0.0087333f, +0.1708365f, -0.1509572f, +0.0285646f, -0.0069911f, +0.1855460f, -0.0826287f,
  -0.0285061f, +0.1709844f, +0.2951219f, +0.0507540f, -0.0037809f, -0.2052728f, -0.0767290f, -0.1394735f,
  +0.2699633f, +0.1816551f, +0.1205039f, -0.0785661f, -0.0205447f, -0.2104989f, +0.1423178f, +0.1877997f
);

const float biases[4] = float[4](
  -0.0106179f, -0.0127446f, -0.0056334f, -0.0142667f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer94 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1415750f, -0.0657557f, -0.1495206f, +0.1121803f, -0.0113653f, +0.0531474f, -0.0976571f, -0.0742048f,
  -0.0007204f, -0.3062531f, -0.1335870f, -0.2780918f, -0.2243678f, +0.0753638f, +0.2301977f, -0.3144089f,
  -0.0172203f, -0.0476726f, +0.1053374f, +0.0648260f, +0.0935347f, +0.0688391f, -0.2773097f, -0.1245808f,
  -0.0948929f, +0.0956399f, -0.1836404f, +0.1994827f, -0.0193530f, +0.2051350f, -0.0617861f, -0.2307979f,
  -0.1825590f, -0.3505686f, -0.0165984f, -0.0464547f, -0.2687303f, -0.0342903f, +0.0018067f, +0.0971288f,
  -0.2036856f, -0.0321105f, -0.0367819f, +0.4926629f, -0.0559012f, +0.2656513f, +0.1811146f, -0.0577083f,
  +0.0180429f, +0.0414012f, -0.2366339f, -0.1951415f, -0.0800844f, -0.0682600f, -0.1003576f, +0.1694402f,
  +0.0582444f, +0.0029628f, -0.1298073f, +0.1544797f, -0.1453087f, +0.0265511f, +0.0373983f, -0.2277540f,
  -0.2371659f, +0.1702691f, -0.0269722f, -0.1169576f, -0.1345345f, +0.0238118f, -0.0841434f, +0.0793996f,
  +0.3531140f, -0.1573206f, +0.0666857f, +0.0839566f, -0.0663932f, +0.0405735f, +0.0404078f, -0.0929057f,
  +0.3102277f, -0.1451487f, -0.0614368f, -0.1906313f, -0.0460842f, +0.0434919f, +0.1331077f, +0.0039452f,
  +0.3799031f, +0.0190535f, -0.0664446f, -0.0217949f, -0.0829813f, +0.3079917f, -0.0524020f, -0.0953755f,
  +0.4071816f, +0.3141412f, +0.0240748f, +0.2413605f, +0.0190670f, +0.6126540f, +0.0371885f, -0.0699795f,
  +0.0789811f, -0.1380991f, +0.1678149f, -0.0321152f, -0.1737769f, -0.5157990f, +0.0432512f, -0.1086567f,
  -0.1307275f, +0.1687740f, -0.1891160f, -0.1672533f, -0.0596000f, -0.1144747f, -0.0101400f, -0.0499128f,
  -0.4016809f, +0.1292384f, -0.0875262f, -0.1115754f, -0.0363063f, +0.1048482f, +0.1000865f, +0.0526084f,
  +0.2282902f, -0.1032398f, +0.2681859f, -0.1850647f, -0.1893697f, -0.1394311f, -0.1255568f, -0.3296316f,
  +0.1312850f, +0.0565122f, +0.0012876f, -0.2011080f, -0.0840256f, +0.0918377f, -0.1241612f, +0.1232086f,
  -0.1082577f, +0.0631328f, +0.0250625f, -0.0970092f, +0.0720074f, +0.1539048f, -0.0056730f, -0.2646444f,
  -0.1731619f, -0.5314459f, -0.2520110f, +0.2205195f, +0.0371257f, +0.1141637f, -0.0514839f, -0.1458498f,
  -0.0401101f, +0.1263827f, +0.0294084f, -0.0030492f, +0.2676758f, -0.2399842f, +0.0290442f, +0.0920948f,
  +0.3420461f, -0.1870463f, -0.0347703f, -0.1550014f, +0.1475587f, +0.1325811f, +0.2039652f, -0.0355547f,
  +0.2417041f, +0.0102688f, +0.1413281f, -0.0074887f, +0.0635407f, -0.1734874f, +0.0668478f, +0.0923083f,
  -0.1630347f, +0.1665951f, -0.1642948f, +0.2530031f, +0.0881264f, +0.4411836f, +0.0238320f, -0.0863592f,
  -0.1413406f, +0.0312597f, -0.0507417f, +0.2232836f, -0.0877050f, +0.1910006f, +0.1437119f, -0.1371282f,
  +0.1860970f, +0.0356819f, -0.1234943f, -0.1381083f, +0.1233431f, -0.0799807f, -0.0598634f, -0.2137416f,
  +0.0898115f, -0.1747982f, +0.0495710f, -0.0787838f, -0.1225877f, +0.0528051f, -0.2260185f, +0.0143384f,
  -0.1187985f, -0.0930058f, -0.0229366f, +0.1578979f, -0.0106703f, -0.1539177f, -0.2284512f, -0.1661975f,
  +0.0562312f, -0.4040354f, -0.0318960f, +0.1538495f, +0.0419403f, +0.1789548f, +0.0336079f, -0.0473816f,
  +0.2802398f, -0.0989563f, +0.0454403f, +0.0562024f, +0.0062765f, +0.0585989f, -0.0949447f, +0.0287963f,
  -0.1823206f, -0.0874112f, -0.1387736f, -0.1257001f, -0.0297288f, -0.0552126f, -0.0072778f, -0.0563209f,
  +0.3244196f, -0.1191462f, -0.0587711f, -0.2012808f, -0.2601295f, +0.1434465f, +0.0513455f, +0.1420660f,
  +0.2228770f, -0.0965113f, -0.0413701f, +0.1208599f, +0.0823574f, -0.0061564f, +0.1582491f, -0.2678832f,
  +0.0800071f, +0.1122035f, -0.0461414f, -0.1649491f, +0.0356563f, +0.0748742f, -0.0022685f, -0.0556320f,
  +0.3148354f, +0.0136125f, +0.0527051f, -0.0986018f, -0.0082763f, -0.0642779f, -0.2299795f, -0.3206916f,
  +0.1722021f, +0.1356211f, +0.0273125f, -0.0510843f, +0.0609529f, +0.1133897f, -0.0857538f, -0.0317171f
);

const float biases[4] = float[4](
  +0.0119619f, -0.0049241f, -0.0051889f, +0.0122306f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer95 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0577134f, -0.0480017f, +0.1921209f, -0.0891968f, -0.0426274f, +0.1345067f, -0.1188722f, +0.0963719f,
  +0.1519464f, -0.1665966f, +0.3369321f, -0.0782485f, -0.0095287f, -0.1746068f, -0.2469025f, +0.2413491f,
  +0.0192419f, -0.0226183f, +0.0887204f, -0.1192416f, +0.2580947f, -0.1690148f, +0.1490128f, -0.0177614f,
  -0.0750537f, -0.1117966f, -0.0540633f, -0.1206925f, -0.2553341f, +0.0038473f, -0.0418030f, -0.0125802f,
  -0.0653480f, +0.0732675f, -0.1514324f, +0.1248459f, -0.1153683f, +0.0011901f, -0.0450405f, +0.0624101f,
  -0.0648804f, -0.0374666f, -0.5476844f, -0.0843381f, -0.0181497f, +0.2399456f, -0.2064282f, -0.0166108f,
  -0.0749095f, +0.0307730f, +0.2015843f, +0.0943895f, +0.1368747f, -0.0281624f, -0.0987922f, +0.2054342f,
  -0.1093449f, -0.2722030f, +0.2526227f, +0.1319206f, +0.3447831f, -0.2419899f, +0.0623624f, -0.0922429f,
  -0.0971862f, +0.0048282f, +0.1574403f, +0.0727231f, +0.0607391f, -0.2167762f, +0.1504241f, -0.0993244f,
  +0.1580894f, +0.0153940f, +0.0693601f, +0.1074899f, -0.1803543f, +0.1694270f, +0.1074369f, +0.1580606f,
  +0.2601308f, -0.0485713f, -0.1209444f, +0.2090694f, -0.2368293f, +0.0965463f, +0.3467095f, +0.0522259f,
  -0.0703801f, +0.0456701f, +0.0670109f, +0.0535345f, -0.1331087f, +0.0750249f, +0.0157744f, +0.0233204f,
  +0.1110671f, +0.0950938f, +0.2153239f, -0.0809085f, +0.0673681f, -0.0063742f, +0.1210952f, +0.1197595f,
  -0.1186882f, +0.1668972f, -0.1618109f, -0.2631814f, +0.1759794f, +0.0962244f, +0.2616395f, -0.0639673f,
  +0.1059012f, -0.0446410f, -0.2372802f, -0.0862180f, +0.0893310f, +0.0637231f, +0.1380845f, -0.0178711f,
  +0.2448643f, -0.0511340f, -0.0139140f, -0.1599593f, -0.0731298f, +0.0758680f, +0.0019882f, +0.0129141f,
  +0.2370844f, +0.0140726f, -0.1144875f, -0.1574115f, -0.2156895f, +0.1243081f, -0.1028615f, +0.0376166f,
  +0.1363656f, -0.0885930f, +0.0080267f, -0.0297733f, -0.1228522f, -0.0516041f, +0.0027710f, +0.0978035f,
  -0.1302899f, +0.0529927f, -0.1906041f, -0.0742780f, +0.0577514f, +0.0822301f, -0.0554287f, +0.1356159f,
  +0.2632042f, +0.0443766f, +0.0597832f, +0.1149982f, +0.0914320f, -0.0234485f, +0.4453580f, +0.0227303f,
  +0.0847197f, -0.0315657f, -0.1631030f, +0.1218664f, -0.0227251f, +0.0639309f, +0.0012272f, +0.0028559f,
  +0.0736795f, +0.2013320f, -0.0516162f, -0.1173611f, +0.0269511f, +0.2920913f, +0.0260330f, +0.1410412f,
  +0.2288108f, +0.1171184f, +0.1682003f, +0.0554826f, +0.1318858f, -0.0030211f, +0.1542374f, +0.3859273f,
  +0.2386594f, -0.0907526f, +0.1304645f, +0.1190166f, -0.0637293f, -0.0147929f, -0.0896126f, +0.1514177f,
  +0.2273963f, +0.3633682f, -0.1031699f, +0.0126481f, -0.1335183f, +0.1571654f, -0.0312882f, +0.2084240f,
  +0.0574495f, +0.1460914f, -0.2152191f, -0.1637293f, +0.0441151f, +0.0786331f, -0.0190403f, +0.1887143f,
  +0.0002790f, -0.0331663f, +0.0115394f, +0.0369478f, -0.0423738f, +0.0498851f, +0.0598782f, -0.1115905f,
  -0.0421407f, +0.0497913f, -0.0767336f, +0.0092294f, +0.0915779f, +0.0031984f, +0.0384126f, -0.1233926f,
  +0.0511611f, +0.0612643f, -0.0471603f, -0.0458500f, +0.1077636f, +0.1404773f, +0.0424121f, -0.1916550f,
  +0.1729463f, -0.0276469f, +0.1302039f, +0.0271505f, -0.0267873f, +0.1303944f, +0.0823290f, +0.0116826f,
  +0.1427203f, -0.0401701f, -0.0470241f, -0.1063501f, +0.1520006f, +0.0211692f, +0.0922391f, -0.1344985f,
  +0.1316178f, -0.1621201f, -0.0380675f, -0.0694317f, +0.0852977f, +0.1380786f, -0.1889481f, +0.1282676f,
  +0.2768286f, -0.1786496f, +0.1468846f, -0.0933976f, +0.1733016f, +0.1284521f, +0.0952548f, +0.0642559f,
  +0.1201880f, +0.0400821f, -0.0289379f, -0.1324353f, +0.0389149f, -0.0157080f, +0.0732024f, +0.0541893f,
  +0.0363729f, +0.1088284f, +0.0057982f, +0.0179870f, +0.0975683f, +0.0677951f, +0.0207777f, +0.0096816f,
  -0.0576469f, -0.0233234f, -0.0569403f, -0.0945725f, +0.0575159f, +0.0788315f, -0.1605978f, +0.1703052f
);

const float biases[4] = float[4](
  -0.0235428f, +0.0161364f, +0.0102423f, +0.0127056f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer95 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3778691f, -0.3928019f, +0.0120738f, -0.1232009f, +0.0852339f, -0.4483677f, -0.1356708f, +0.3577527f,
  -0.2025191f, -0.2582532f, -0.1011702f, -0.1874216f, +0.6993048f, -0.1167308f, +0.0587899f, -0.0758517f,
  +0.0563815f, -0.5991850f, -0.0822359f, -0.0109851f, +0.2992856f, +0.0540517f, +0.0721416f, -0.0000087f,
  +0.2715587f, -0.3294586f, +0.4590618f, -0.0431514f, -0.1847405f, -0.3626815f, -0.2438622f, -0.1558871f,
  -0.0520431f, -0.0627699f, +0.2432534f, -0.3135201f, +0.0075821f, -0.3459529f, -0.1476374f, -0.1701077f,
  -0.1005237f, -0.0064324f, -0.1152943f, -0.1232552f, +0.2198264f, -0.0607045f, +0.1146436f, +0.1052485f,
  +0.1739663f, -0.2711372f, +0.1125448f, -0.0896622f, -0.0293286f, -0.1197429f, -0.0265857f, -0.0071831f,
  +0.3106250f, -0.1310187f, +0.0897861f, +0.0458321f, -0.0841161f, -0.1458673f, +0.2629659f, -0.2791271f,
  +0.1142117f, -0.2125321f, +0.0699252f, +0.3134097f, -0.0466628f, -0.3262625f, -0.1916143f, +0.1810273f,
  -0.1966308f, -0.0641456f, -0.1132370f, +0.0435160f, +0.1008342f, -0.0983414f, -0.1088529f, +0.0214865f,
  -0.0451235f, +0.0773915f, -0.1195395f, +0.2506509f, -0.3813380f, -0.1322273f, -0.0286807f, +0.0182160f,
  -0.1818844f, +0.1949015f, -0.0903601f, +0.0132900f, -0.1187412f, -0.0723703f, -0.1987900f, -0.0086066f,
  +0.2246891f, -0.0998522f, -0.3064461f, +0.2268872f, -0.2202277f, +0.0210202f, +0.2677656f, -0.0790991f,
  -0.3430194f, -0.0374759f, -0.0450545f, +0.0702451f, -0.1280800f, -0.0881982f, +0.1896090f, -0.2574367f,
  -0.2209884f, +0.1460278f, +0.0192827f, -0.0081286f, -0.3324219f, +0.1097010f, -0.1470946f, -0.1973688f,
  -0.1269485f, -0.0260959f, -0.1615818f, +0.0297767f, -0.1570284f, +0.1065828f, +0.2359720f, -0.0754522f,
  -0.2647734f, -0.0344107f, -0.0724042f, +0.0077700f, +0.1585964f, +0.1096744f, +0.0677877f, -0.0414583f,
  -0.2377525f, +0.0862877f, -0.0504622f, +0.0314944f, -0.1285756f, +0.2576824f, -0.0287803f, -0.2248365f,
  -0.0745881f, +0.1196414f, -0.0139924f, -0.0310784f, -0.0581239f, -0.0143342f, +0.0070643f, +0.0096451f,
  -0.1093335f, +0.1521557f, -0.0248931f, +0.0436160f, -0.0486352f, +0.0011004f, +0.0198322f, +0.0234851f,
  -0.1950220f, +0.0729014f, -0.1113317f, +0.0764398f, -0.1330287f, +0.0361288f, -0.2930498f, -0.0083526f,
  -0.2094056f, +0.1958654f, +0.0754543f, +0.2137398f, +0.0173923f, -0.0342167f, +0.0446300f, -0.1208041f,
  -0.2323348f, -0.1303933f, -0.1913278f, +0.1344095f, -0.2450207f, +0.0420571f, +0.0184194f, -0.1701371f,
  -0.3766049f, +0.1387170f, -0.3480045f, +0.0374232f, -0.1450121f, +0.0713154f, -0.3279011f, -0.1539273f,
  -0.1838753f, -0.1036366f, -0.0378625f, +0.0166949f, +0.1222958f, -0.0020155f, +0.0731383f, -0.1135066f,
  -0.1538719f, -0.0668349f, -0.0213974f, +0.0387626f, +0.0565661f, -0.0080566f, +0.0976873f, -0.0698138f,
  +0.0056155f, -0.0255968f, +0.0064561f, +0.0806843f, -0.0203242f, +0.0126458f, +0.0020575f, -0.0802000f,
  -0.0708847f, +0.0214128f, -0.0689131f, -0.0025381f, +0.0197867f, +0.0715516f, -0.0518877f, +0.1351634f,
  -0.0572795f, -0.1234252f, -0.2273638f, -0.2638807f, +0.2679662f, +0.2114943f, +0.0581651f, -0.1260842f,
  -0.0110007f, -0.0522572f, -0.0630680f, -0.0558660f, +0.1362405f, -0.1109801f, -0.0259372f, -0.0155794f,
  -0.1756323f, +0.0035783f, -0.1478564f, -0.1770484f, +0.1396071f, +0.0707893f, +0.0149740f, -0.1153792f,
  -0.0376382f, -0.0356437f, +0.1082608f, -0.2945414f, +0.0538375f, +0.1580895f, -0.3293858f, +0.0821409f,
  -0.5115718f, +0.2425077f, -0.0305781f, -0.1462512f, -0.1016858f, -0.0478524f, -0.3854145f, -0.2700097f,
  -0.1332040f, -0.0492977f, +0.0697296f, -0.0028418f, -0.1169514f, +0.3325092f, -0.1484813f, -0.0072716f,
  -0.1931439f, -0.0788066f, +0.1424017f, +0.0921368f, +0.0305782f, -0.0247732f, +0.0517515f, -0.1270575f,
  -0.0431934f, +0.1606855f, -0.0406071f, -0.0453466f, -0.0776475f, +0.0909251f, +0.0020255f, -0.1852038f
);

const float biases[4] = float[4](
  -0.0557086f, +0.0216207f, +0.0150561f, +0.0238319f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer96 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!BIND FEAT_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

#define TEX_BIND_L3_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L3_TEX FEAT_L0_tex
#define TEX_BIND_L3_POS FEAT_L0_pos
#define TEX_BIND_L3_SIZE FEAT_L0_size
#define TEX_BIND_L3_PT FEAT_L0_pt

const float kernels[288] = float[288](
  +0.0562853f, -0.0233351f, -0.0807730f, -0.0214775f, +0.1031458f, -0.0476877f, +0.0949617f, +0.1330020f,
  +0.0428734f, -0.1107245f, -0.0462614f, +0.0555793f, -0.3586303f, +0.1167709f, +0.2962526f, +0.2016337f,
  -0.0917752f, -0.2074601f, +0.1268226f, -0.2477271f, +0.1852709f, +0.0577087f, +0.0870071f, +0.0059510f,
  -0.0885314f, -0.1862297f, -0.2102210f, -0.1623255f, +0.0162808f, -0.1449152f, +0.2478319f, +0.1268945f,
  +0.0040189f, +0.2147115f, -0.1768117f, +0.0221721f, +0.1644440f, +0.3239405f, +0.1479626f, -0.0828754f,
  -0.0001365f, +0.0185095f, +0.1237614f, -0.0329617f, +0.0365344f, -0.2430964f, -0.1539686f, +0.0706861f,
  -0.0307960f, +0.1223806f, -0.0873855f, -0.1606116f, +0.2433112f, +0.3789230f, -0.0122572f, -0.0715937f,
  -0.1552880f, -0.0927277f, -0.1208683f, +0.0152702f, +0.0264237f, -0.0495808f, -0.0022079f, -0.0941766f,
  +0.0405658f, -0.1731312f, -0.0067130f, +0.2567120f, -0.2714949f, +0.0132374f, -0.0184613f, +0.0131659f,
  +0.1296829f, +0.1821820f, +0.0794885f, +0.1299416f, +0.2521436f, -0.2173538f, -0.2200003f, -0.1139158f,
  -0.0192216f, +0.0701710f, -0.0416856f, -0.0928667f, -0.1405882f, -0.0896651f, -0.0510607f, -0.1107321f,
  +0.1406407f, -0.0810880f, -0.2043552f, +0.0800416f, +0.2372105f, +0.1662163f, +0.3174391f, +0.0570112f,
  -0.0929377f, +0.0909869f, +0.1759247f, +0.1898723f, +0.2791553f, -0.2456410f, +0.1197318f, +0.0594464f,
  -0.0714418f, +0.0813749f, -0.2007287f, +0.0565047f, +0.1058272f, -0.0750145f, +0.0456384f, -0.0180468f,
  -0.0099913f, +0.1182974f, -0.1698085f, +0.0899821f, +0.0698587f, +0.1644737f, -0.0749880f, -0.3701794f,
  -0.1950217f, -0.0193062f, -0.1178300f, +0.1970219f, -0.0063380f, +0.0278015f, +0.0734167f, -0.1296911f,
  +0.0913961f, -0.1953570f, +0.0026909f, +0.0113610f, +0.1504344f, +0.1364207f, -0.0825802f, -0.0653674f,
  +0.1612538f, -0.0951961f, -0.1688748f, +0.1068562f, +0.1190171f, +0.0227978f, +0.1411689f, -0.1474505f,
  +0.0711725f, -0.1038380f, +0.1026434f, +0.0221616f, +0.0047264f, +0.0096708f, +0.1216732f, -0.1564706f,
  +0.0785223f, +0.1373737f, +0.0279251f, -0.2720849f, +0.0525780f, +0.1407461f, +0.0611760f, +0.0275038f,
  -0.0890654f, -0.0807170f, -0.0482865f, -0.0527390f, -0.1029767f, +0.2391212f, -0.2254113f, +0.2293746f,
  -0.2038872f, +0.0495698f, +0.0097961f, -0.0553379f, +0.1940255f, +0.2728988f, +0.1282484f, +0.1904844f,
  -0.1398703f, +0.0249131f, +0.0905527f, +0.1844494f, +0.1701604f, -0.0074221f, -0.2097977f, +0.3193922f,
  +0.0257102f, -0.1992229f, +0.1685732f, +0.0319968f, +0.3469958f, -0.3024140f, -0.0065602f, -0.0194080f,
  -0.4291640f, +0.0860421f, -0.0813749f, +0.1889287f, +0.0491777f, -0.1736763f, -0.0690724f, -0.0245578f,
  +0.2053290f, +0.3286435f, +0.1155622f, +0.0544722f, -0.4900269f, +0.0263794f, +0.2012926f, -0.0283809f,
  +0.1380471f, -0.1678726f, -0.0105125f, +0.0468363f, +0.0147110f, +0.1199374f, -0.0423847f, -0.0429169f,
  +0.0728422f, +0.0072632f, -0.0206805f, -0.1933562f, -0.0368142f, -0.0451373f, +0.0361022f, -0.0588100f,
  +0.0623656f, +0.1635843f, -0.1811475f, +0.0305928f, -0.0683936f, -0.1749438f, -0.3802099f, -0.1922417f,
  +0.0379715f, +0.2276993f, -0.0497464f, +0.0523409f, -0.0893496f, +0.0043431f, +0.0370119f, +0.1580065f,
  +0.1280578f, +0.1594210f, -0.1482297f, +0.0274229f, +0.0873476f, -0.1191060f, -0.0857027f, -0.0304620f,
  +0.0133062f, +0.0449559f, -0.0215477f, -0.0077867f, +0.0306258f, -0.2074474f, +0.1316755f, +0.2690407f,
  -0.0225791f, +0.3967849f, -0.0129018f, -0.1228926f, +0.1068835f, -0.1450550f, -0.2964326f, +0.1266203f,
  +0.2878752f, +0.1709041f, +0.0127646f, -0.1730760f, +0.1577888f, -0.0317571f, +0.2103159f, +0.2449971f,
  +0.2216946f, +0.0446135f, -0.3237910f, -0.1260200f, +0.0726538f, -0.0335952f, +0.0323666f, +0.1702854f,
  -0.0286168f, -0.0401631f, +0.0166379f, -0.2207512f, +0.0963515f, +0.3270484f, -0.1345044f, +0.0710238f
);

const float biases[4] = float[4](
  +0.0097104f, -0.0146802f, -0.0083848f, -0.0171784f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)) + TEX_BIND_L3_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer96 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!BIND FEAT_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

#define TEX_BIND_L3_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L3_TEX FEAT_L1_tex
#define TEX_BIND_L3_POS FEAT_L1_pos
#define TEX_BIND_L3_SIZE FEAT_L1_size
#define TEX_BIND_L3_PT FEAT_L1_pt

const float kernels[288] = float[288](
  -0.0234858f, -0.0507154f, -0.0646162f, -0.1216421f, -0.0277407f, -0.2149322f, +0.2848692f, -0.0690144f,
  +0.0316896f, +0.2158128f, +0.0155386f, -0.1325294f, -0.2444486f, +0.1238776f, -0.0366477f, -0.0935236f,
  -0.0331668f, +0.2215769f, -0.1424817f, +0.0416284f, +0.2652590f, +0.1732206f, -0.0768973f, -0.1018384f,
  -0.0402131f, +0.0456105f, +0.1096469f, +0.1262066f, +0.0221342f, +0.3497976f, +0.0688603f, +0.0009715f,
  -0.1267504f, +0.3811601f, +0.0927526f, +0.0412755f, -0.1338120f, +0.0258830f, -0.2249415f, -0.3044473f,
  -0.0197367f, +0.0468359f, -0.2598945f, -0.1558923f, +0.1307207f, -0.0567661f, +0.1352918f, +0.0159632f,
  -0.0166917f, +0.2415721f, -0.0031590f, -0.1007371f, -0.0705310f, -0.0060504f, +0.0007866f, +0.1786896f,
  +0.0620835f, -0.0173331f, -0.0541214f, -0.1739805f, -0.1785601f, +0.0234039f, +0.1145769f, +0.0209158f,
  +0.0404812f, -0.0531485f, +0.0345366f, -0.3353281f, -0.0260386f, +0.0698836f, -0.2959385f, +0.0137002f,
  -0.0624414f, -0.1035569f, -0.0329982f, -0.0000125f, +0.2562068f, +0.1855018f, +0.1216507f, -0.1935769f,
  +0.1001834f, -0.0893088f, +0.0301740f, -0.1468604f, -0.5087206f, +0.0067747f, -0.1286190f, -0.1251812f,
  +0.0438664f, -0.0593375f, -0.1528085f, -0.0380758f, +0.2772176f, +0.0586320f, +0.1443315f, +0.2275858f,
  +0.0007006f, +0.1035538f, +0.1902793f, -0.1725969f, +0.1761036f, -0.0292898f, -0.2648427f, -0.0659439f,
  +0.0519481f, +0.1969167f, +0.0704704f, -0.2046908f, +0.4613892f, -0.1791093f, -0.3118951f, +0.5048869f,
  +0.1029578f, +0.1978144f, +0.0647235f, -0.1237320f, -0.0404446f, -0.2806639f, -0.1408013f, -0.0443694f,
  -0.2201790f, +0.2724408f, +0.1149516f, +0.1784936f, -0.3228182f, -0.2326502f, -0.1831796f, -0.0533406f,
  +0.2501163f, +0.1259988f, +0.0063780f, -0.1289909f, +0.0636476f, +0.0321892f, -0.1792402f, -0.2678643f,
  -0.0733692f, -0.0315678f, -0.1118010f, -0.2062136f, +0.0390575f, -0.0001613f, -0.0017833f, +0.0653616f,
  -0.1702493f, -0.0521365f, +0.0788821f, +0.2082649f, +0.0116028f, -0.0263680f, +0.1315735f, -0.0205532f,
  -0.0365768f, -0.0822693f, +0.1243765f, -0.1261311f, +0.3525838f, -0.1286643f, -0.1457139f, +0.0479169f,
  -0.0330205f, -0.1226861f, -0.1719043f, +0.0710698f, -0.1766628f, +0.0715866f, -0.1749235f, +0.1806721f,
  +0.1780579f, +0.3196057f, +0.1331953f, +0.2466037f, +0.1840459f, +0.0887574f, -0.2569380f, +0.0736367f,
  -0.1529157f, -0.0751209f, +0.0721243f, +0.2117319f, -0.1634968f, +0.0416821f, -0.1021931f, +0.1704785f,
  -0.0504369f, -0.2527057f, -0.0359888f, -0.0387458f, +0.1917936f, -0.0257106f, -0.0632157f, -0.0623196f,
  -0.3838780f, -0.1426837f, +0.1839667f, +0.2169375f, +0.0975749f, -0.0718962f, -0.0993913f, -0.0278957f,
  -0.2190077f, -0.0230257f, +0.1545889f, +0.0250053f, +0.2046123f, +0.1507984f, -0.0912317f, +0.2091035f,
  +0.0363188f, -0.1818601f, -0.0748860f, +0.0440091f, +0.0180917f, -0.0697932f, +0.0484750f, -0.0927623f,
  -0.3146393f, -0.1242870f, +0.0278659f, -0.0886154f, -0.1334639f, -0.0293249f, -0.1870579f, -0.0091849f,
  +0.2988764f, -0.1341031f, -0.0868420f, +0.2042412f, -0.2646927f, +0.1369358f, +0.0943676f, +0.0732427f,
  +0.0358536f, -0.0844797f, -0.2257326f, +0.1505526f, +0.2419945f, +0.2306226f, +0.1554207f, -0.1519646f,
  +0.2570249f, +0.0268896f, +0.0725836f, +0.0144022f, +0.2440978f, +0.2345250f, +0.3578115f, +0.0366608f,
  +0.1527477f, +0.2360598f, -0.2112232f, +0.0557708f, -0.2209432f, +0.2806968f, -0.0817897f, -0.0445328f,
  +0.1425102f, -0.0505296f, -0.1744680f, +0.1175452f, +0.0533563f, -0.1137165f, +0.2459376f, -0.0069931f,
  -0.0846317f, +0.0195526f, +0.1293590f, +0.1153808f, +0.1758142f, +0.0764293f, -0.2638644f, +0.1893436f,
  +0.0011008f, +0.1012284f, -0.0739581f, -0.0492693f, -0.1933390f, +0.0979689f, +0.2214640f, +0.0668230f,
  -0.1350314f, +0.1286744f, -0.2568200f, -0.1783852f, +0.0844538f, +0.0478708f, -0.1107829f, -0.1101024f
);

const float biases[4] = float[4](
  +0.0202788f, -0.0226766f, -0.0106707f, +0.0098938f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)) + TEX_BIND_L3_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer97 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1064979f, -0.0164269f, +0.0509049f, +0.0474049f, +0.0396332f, -0.0640211f, +0.0972363f, -0.0317614f,
  -0.1128217f, +0.0788771f, +0.1002461f, -0.0996639f, -0.0882882f, -0.0094476f, -0.0097381f, +0.0186070f,
  +0.0257282f, -0.0523441f, -0.1387356f, +0.1022437f, +0.0088073f, +0.0139116f, -0.0276267f, -0.0595816f,
  -0.1200236f, +0.1196461f, -0.1736921f, +0.1129983f, -0.1348931f, +0.1634681f, -0.0830786f, +0.1348349f,
  +0.1727287f, -0.1428672f, +0.0526452f, +0.0529685f, +0.0162048f, +0.0628049f, -0.0646604f, -0.2662734f,
  -0.3686062f, +0.0920736f, -0.2251460f, -0.0440819f, +0.0033953f, -0.0143794f, -0.0601549f, -0.2295612f,
  +0.1164506f, -0.1948222f, +0.0540327f, -0.0559374f, +0.0432241f, -0.0958869f, +0.1373201f, -0.0533897f,
  -0.2349273f, -0.0504301f, -0.0256086f, +0.1473814f, -0.2861696f, -0.0517372f, +0.0524859f, -0.0934651f,
  -0.0641575f, +0.0505058f, +0.0330945f, +0.0194401f, +0.0604098f, -0.0249007f, +0.0087278f, -0.0035653f,
  -0.2771406f, +0.0808287f, -0.0339574f, -0.0925535f, +0.0739878f, +0.0929609f, -0.0791844f, -0.0626694f,
  -0.0220314f, -0.0143509f, -0.2326474f, +0.1411582f, +0.0366896f, -0.0158949f, -0.1090248f, -0.0921532f,
  -0.0776594f, +0.0630822f, +0.2499831f, -0.0499751f, -0.0513008f, -0.1330627f, -0.0782506f, +0.1068087f,
  +0.1722065f, +0.0933184f, -0.1865020f, -0.0645477f, +0.1524192f, +0.1041340f, +0.0818131f, +0.1679256f,
  -0.0779676f, -0.1332256f, -0.2190105f, -0.0252891f, +0.0053203f, +0.1173423f, -0.2051920f, -0.0558184f,
  -0.0225270f, -0.0205272f, +0.1436115f, +0.1589327f, -0.0494140f, -0.0258375f, -0.2119722f, -0.1298729f,
  +0.2055443f, -0.0561037f, +0.0178498f, +0.0350148f, -0.0945483f, -0.0000903f, +0.0567762f, +0.0130771f,
  -0.2916883f, -0.1027896f, -0.0507234f, +0.1124636f, -0.0089844f, -0.1507377f, +0.2249148f, -0.0330838f,
  -0.3164642f, +0.1085002f, -0.0494462f, +0.0868671f, +0.0431210f, +0.0352870f, +0.0294856f, -0.2462225f,
  -0.1856015f, +0.0117748f, -0.0473983f, +0.0293379f, -0.0153972f, +0.0367647f, -0.1364190f, +0.0214007f,
  -0.1508548f, -0.0545417f, +0.0902647f, -0.3482594f, +0.1342389f, +0.0118628f, -0.2347484f, +0.0184906f,
  -0.1275752f, +0.0376560f, +0.1160172f, -0.0911327f, +0.0146559f, -0.0186685f, -0.0882716f, -0.0072465f,
  +0.1209055f, -0.0187339f, -0.0406928f, +0.0336599f, -0.0105327f, +0.1094133f, +0.2071410f, -0.0235206f,
  -0.0109623f, +0.0409765f, -0.0728264f, +0.1672017f, -0.2187742f, -0.2606395f, -0.2477997f, -0.0092946f,
  -0.1197327f, +0.0498569f, +0.0001785f, +0.1751130f, -0.0683073f, -0.0153403f, +0.0690206f, -0.1988333f,
  +0.0585208f, -0.1000419f, -0.0354137f, -0.0324796f, -0.2324680f, +0.0110110f, -0.0410967f, +0.1418236f,
  +0.0136015f, -0.0987012f, +0.0066069f, +0.1529103f, +0.0943808f, -0.0859073f, +0.3615957f, -0.3734582f,
  -0.2001619f, +0.0424115f, -0.3253689f, -0.1322859f, -0.0338744f, +0.1107099f, +0.0497565f, -0.1715220f,
  -0.1663661f, +0.0746745f, -0.0465118f, -0.0052668f, +0.0236857f, +0.0662047f, +0.0225044f, -0.0940386f,
  -0.1572324f, -0.0652546f, -0.0277802f, -0.1485137f, +0.0289692f, +0.0298819f, -0.2111407f, -0.0451681f,
  +0.0447323f, +0.0359893f, +0.1052969f, +0.0103289f, +0.0044563f, -0.0473535f, +0.0239919f, +0.0806627f,
  +0.1222943f, -0.1397170f, -0.1236684f, +0.0001241f, +0.0060612f, +0.0868658f, -0.0626170f, +0.2471080f,
  -0.0238102f, +0.1992382f, -0.2649024f, +0.0230300f, -0.1257600f, +0.0567142f, -0.0846128f, +0.0530973f,
  -0.0383610f, +0.1090763f, +0.0842567f, +0.2581479f, -0.2877898f, -0.2450124f, +0.0187701f, +0.0165152f,
  +0.0255998f, +0.1405226f, +0.0480822f, +0.1834411f, -0.1387719f, -0.0039945f, -0.0538244f, +0.1870432f,
  -0.2401141f, -0.2054180f, -0.0481468f, -0.0133149f, +0.0219445f, +0.0182939f, +0.2112319f, -0.1613593f,
  -0.1044566f, +0.0248105f, -0.1526718f, +0.0596797f, -0.0360126f, +0.0248094f, +0.1473737f, -0.2806589f
);

const float biases[4] = float[4](
  +0.0347956f, +0.0260137f, +0.0299439f, +0.0353110f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ACNet b48 Layer98 L0
//!WIDTH LUMA.w 2 *
//!HEIGHT LUMA.h 2 *
//!BIND TMP1_L0
//!COMPONENTS 1

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

vec4 hook() {
    vec2 fcoord = fract(TEX_BIND_L0_POS * TEX_BIND_L0_SIZE);
    vec2 pos = TEX_BIND_L0_POS + (vec2(0.5f) - fcoord) * TEX_BIND_L0_PT;

    ivec2 icoord = ivec2(fcoord * vec2(2.0f));
    int index = icoord.y * 2 + icoord.x;

    vec4 r = TEX_BIND_L0_TEX(pos);

    return vec4(clamp(float[4](r.x, r.y, r.z, r.w)[index], 0.0f, 1.0f), 0.0f, 0.0f, 1.0f);
}
