//!HOOK LUMA
//!DESC ARNet b32 Layer0 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND LUMA
//!SAVE FEAT_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF LUMA_texOff
#define TEX_BIND_L0_TEX LUMA_tex
#define TEX_BIND_L0_POS LUMA_pos
#define TEX_BIND_L0_SIZE LUMA_size
#define TEX_BIND_L0_PT LUMA_pt

const float kernels[36] = float[36](
  -0.7592692f, +1.0494280f, +0.3138020f, -0.5268259f, +0.2269243f, -0.0312810f, +0.0167031f, -0.7982637f,
  +0.4714935f, +0.7038527f, -0.3579170f, -0.9018283f, -0.5144854f, +0.7802051f, -0.0114092f, +0.9728132f,
  -0.1204793f, -0.4286968f, -0.4943524f, +0.8530316f, +0.1615682f, +0.3954670f, -0.4280663f, -0.7733504f,
  -0.2880816f, -0.3701659f, -0.1105193f, +0.2670473f, +0.2933985f, -0.3342360f, -0.1444445f, +0.0951177f,
  +0.1065318f, -0.0446992f, -0.0425389f, -0.2092824f
);

const float biases[4] = float[4](
  +0.0062579f, -0.0529049f, +0.0723892f, +0.0065489f
);

vec4 hook() {
    const vec4 r0 = vec4(
        TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)).x
    );
    const vec4 r4 = vec4(
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)).x
    );
    const float r8 = TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)).x;

    float sum[4] = biases;
    for(int n = 0; n < 4; n++) {
        const vec4 k0 = vec4(kernels[n * 9 + 0], kernels[n * 9 + 1], kernels[n * 9 + 2], kernels[n * 9 + 3]);
        const vec4 k4 = vec4(kernels[n * 9 + 4], kernels[n * 9 + 5], kernels[n * 9 + 6], kernels[n * 9 + 7]);
        const float k8 = kernels[n * 9 + 8];
        sum[n] += (dot(r0, k0) + dot(r4, k4) + r8 * k8);
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer0 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND LUMA
//!SAVE FEAT_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF LUMA_texOff
#define TEX_BIND_L0_TEX LUMA_tex
#define TEX_BIND_L0_POS LUMA_pos
#define TEX_BIND_L0_SIZE LUMA_size
#define TEX_BIND_L0_PT LUMA_pt

const float kernels[36] = float[36](
  -0.4680488f, +0.3090094f, -0.3075285f, -0.6588790f, -0.2642180f, +0.7142816f, -0.3216185f, +0.6387017f,
  +0.4135123f, +0.0998938f, +0.1262666f, +0.8439232f, +0.5011325f, +0.4396692f, +0.0936041f, -0.4874977f,
  -0.7275735f, +0.1006251f, -0.2382275f, -0.1364650f, -0.2608415f, -0.4245185f, +0.8146583f, +0.2531888f,
  +0.3386218f, -0.2617406f, -0.1103337f, +0.1109921f, +0.3746755f, -0.1911914f, -0.8209117f, +0.0057304f,
  -0.3681508f, +0.3807238f, +0.1417193f, +0.3134722f
);

const float biases[4] = float[4](
  -0.0139645f, -0.0262499f, +0.0107343f, +0.0568204f
);

vec4 hook() {
    const vec4 r0 = vec4(
        TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)).x
    );
    const vec4 r4 = vec4(
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)).x
    );
    const float r8 = TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)).x;

    float sum[4] = biases;
    for(int n = 0; n < 4; n++) {
        const vec4 k0 = vec4(kernels[n * 9 + 0], kernels[n * 9 + 1], kernels[n * 9 + 2], kernels[n * 9 + 3]);
        const vec4 k4 = vec4(kernels[n * 9 + 4], kernels[n * 9 + 5], kernels[n * 9 + 6], kernels[n * 9 + 7]);
        const float k8 = kernels[n * 9 + 8];
        sum[n] += (dot(r0, k0) + dot(r4, k4) + r8 * k8);
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer1 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND FEAT_L0
//!BIND FEAT_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L0_TEX FEAT_L0_tex
#define TEX_BIND_L0_POS FEAT_L0_pos
#define TEX_BIND_L0_SIZE FEAT_L0_size
#define TEX_BIND_L0_PT FEAT_L0_pt

#define TEX_BIND_L1_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L1_TEX FEAT_L1_tex
#define TEX_BIND_L1_POS FEAT_L1_pos
#define TEX_BIND_L1_SIZE FEAT_L1_size
#define TEX_BIND_L1_PT FEAT_L1_pt

const float kernels[288] = float[288](
  -0.0142188f, +0.0765872f, -0.0515367f, -0.0001721f, +0.2340647f, -0.0101261f, +0.2016433f, +0.0963787f,
  +0.0201927f, +0.0286696f, -0.3864319f, -0.0475984f, +0.3188879f, +0.2913894f, -0.0753763f, +0.0346801f,
  -0.2582097f, +0.1522716f, +0.2684832f, -0.1568483f, +0.1531981f, +0.0815009f, -0.1564716f, +0.4118175f,
  -0.0347388f, +0.0915631f, -0.1938651f, +0.1724741f, -0.1387454f, -0.2635948f, -0.4621231f, -0.0765750f,
  +0.0836179f, +0.0979200f, -0.2383027f, +0.0489576f, +0.0513913f, +0.1822595f, +0.0895641f, +0.2074893f,
  -0.0039683f, -0.0250428f, -0.0330684f, -0.3628974f, -0.0627637f, +0.0623535f, -0.3518379f, -0.1853835f,
  +0.1955845f, +0.0684114f, +0.3193601f, +0.1661559f, +0.1360418f, -0.0631811f, +0.2351977f, -0.1593635f,
  +0.0288430f, +0.0582480f, -0.0109980f, +0.1114163f, +0.0379268f, -0.0104144f, +0.0222683f, +0.2301944f,
  -0.1781125f, +0.0368898f, +0.0981849f, -0.0426821f, +0.0454051f, +0.0588906f, -0.2424357f, -0.1374396f,
  -0.0486257f, +0.0469576f, +0.3088872f, +0.1896566f, -0.1935511f, -0.1087339f, +0.1036890f, +0.1865367f,
  +0.1802109f, -0.2420628f, +0.1319281f, +0.3277554f, -0.0153532f, +0.0239330f, +0.0511878f, +0.4410545f,
  +0.1948279f, -0.0511766f, -0.2653050f, +0.2346109f, +0.0174308f, +0.0020081f, -0.1190127f, -0.3014697f,
  +0.2180066f, +0.1520310f, +0.3798527f, +0.2907104f, -0.1034912f, -0.1073521f, +0.0756014f, -0.2420414f,
  -0.3519367f, -0.2701002f, -0.1046903f, -0.3383211f, -0.1948989f, -0.0406559f, -0.5231524f, +0.2982713f,
  +0.0363105f, +0.2457299f, +0.1391472f, +0.0405316f, +0.3067852f, -0.1268482f, +0.1989392f, -0.0987201f,
  -0.1593062f, +0.0254731f, +0.1442787f, +0.1623321f, +0.3815624f, -0.3643389f, +0.2967265f, -0.3854325f,
  -0.5051042f, -0.0184300f, +0.1468894f, -0.0416610f, +0.0541036f, +0.2386917f, +0.1423555f, -0.5478059f,
  -0.2634812f, +0.0877924f, +0.1169342f, -0.4711818f, +0.3239003f, +0.0093183f, -0.0457757f, +0.0398688f,
  -0.1308833f, +0.0473546f, -0.1654542f, -0.1934579f, -0.1941116f, -0.2452593f, -0.0090825f, -0.0135452f,
  -0.0665438f, -0.1363092f, +0.3145174f, -0.3023634f, +0.1376175f, -0.0771777f, -0.4407479f, -0.1190909f,
  -0.3249329f, -0.1186284f, +0.1514593f, +0.2818491f, -0.0104986f, -0.2162921f, -0.6112892f, +0.4291657f,
  +0.4152967f, +0.1109119f, +0.3008094f, +0.1217366f, +0.1675484f, -0.2676161f, +0.0751506f, -0.0592299f,
  -0.0797725f, +0.1330726f, +0.1873640f, +0.3464917f, -0.2199080f, -0.1432008f, +0.7483274f, +0.0315593f,
  -0.3515459f, -0.1760540f, +0.0468373f, -0.6879888f, -0.0039073f, -0.1428442f, -0.9112741f, -0.1702142f,
  -0.2577625f, -0.1189198f, +0.1707507f, +0.1027408f, -0.0977060f, -0.3223606f, -0.1082247f, +0.1821304f,
  -0.3483206f, +0.0076608f, +0.3235449f, +0.0945505f, +0.3139568f, +0.0127138f, -0.2285883f, +0.5086540f,
  -0.1193784f, -0.1383317f, -0.2639354f, -0.0074461f, -0.1188749f, +0.2803668f, +0.0722238f, -0.2878080f,
  +0.0582523f, +0.1421904f, -0.3012519f, +0.1008991f, +0.1980596f, +0.2037841f, -0.1285145f, -0.4744344f,
  -0.2824554f, -0.0591764f, -0.1043332f, +0.4852897f, +0.1452358f, +0.0437871f, -0.2492673f, -0.5766101f,
  +0.1348095f, +0.2987647f, +0.1476206f, +0.0772346f, -0.0571471f, -0.0661739f, -0.4776123f, -0.3759031f,
  +0.2817809f, -0.3929612f, +0.4618127f, -0.3058080f, +0.2458620f, -0.2030959f, -0.6412138f, +0.2418148f,
  +0.5924528f, +0.5568873f, -0.0763752f, +0.3276854f, +0.1019212f, +0.1470447f, +0.8293213f, +0.6395447f,
  +0.0860864f, -0.2496367f, -0.2011490f, +0.0316396f, +0.1549313f, -0.0267870f, -0.1007964f, -0.4572637f,
  -0.3772673f, +0.0114324f, -0.1190564f, -0.8218050f, -0.2571033f, -0.1110497f, -0.6058262f, -0.6161516f,
  +0.0987680f, -0.4781638f, -0.0405447f, -0.1958789f, +0.0177683f, -0.2962021f, -0.1803089f, +0.0047728f,
  +0.2260861f, +0.1313485f, +0.0755644f, +0.2860599f, -0.0906655f, -0.0273605f, -0.1336529f, +0.0915897f
);

const float biases[4] = float[4](
  -0.0321496f, +0.0394306f, -0.4535527f, +0.0302412f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer1 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND FEAT_L0
//!BIND FEAT_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L0_TEX FEAT_L0_tex
#define TEX_BIND_L0_POS FEAT_L0_pos
#define TEX_BIND_L0_SIZE FEAT_L0_size
#define TEX_BIND_L0_PT FEAT_L0_pt

#define TEX_BIND_L1_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L1_TEX FEAT_L1_tex
#define TEX_BIND_L1_POS FEAT_L1_pos
#define TEX_BIND_L1_SIZE FEAT_L1_size
#define TEX_BIND_L1_PT FEAT_L1_pt

const float kernels[288] = float[288](
  +0.0917669f, -0.0092793f, -0.2782461f, +0.1872142f, +0.0417514f, -0.0122267f, -0.0076401f, +0.3037648f,
  -0.1839800f, -0.0854373f, -0.1663319f, -0.1083881f, +0.0079969f, +0.2459669f, +0.0301853f, -0.0650154f,
  -0.0611905f, +0.0607478f, +0.1340014f, +0.0728673f, +0.0419203f, +0.0626390f, +0.0701782f, -0.1019115f,
  -0.0682220f, +0.2392579f, -0.2721093f, -0.0492237f, -0.0456895f, +0.1837656f, +0.0946490f, -0.0556511f,
  -0.1517661f, +0.1589882f, +0.1778657f, -0.2208432f, -0.0932369f, -0.2906253f, -0.1253512f, -0.3525746f,
  +0.0376135f, +0.0434124f, +0.0423641f, -0.0912835f, +0.1438005f, +0.0159309f, -0.1876798f, -0.0001780f,
  -0.0134003f, +0.1279163f, +0.0098830f, +0.1603754f, +0.1265376f, -0.0318127f, -0.2496713f, +0.2696608f,
  +0.0349654f, -0.1180026f, +0.0433235f, -0.3229310f, +0.1057692f, +0.0219242f, -0.0539048f, -0.0514988f,
  +0.2044657f, +0.2162338f, -0.0841088f, +0.2324213f, -0.0092384f, +0.2605999f, -0.3556628f, +0.0591546f,
  -0.1076953f, +0.0036030f, -0.1218437f, +0.2856200f, +0.2597587f, -0.0962441f, +0.1730046f, +0.0193336f,
  +0.2056558f, +0.0048774f, -0.0103985f, -0.0920061f, -0.7351918f, +0.1624877f, +0.1672625f, +0.3498219f,
  -0.4207794f, -0.1435272f, +0.0354842f, +0.0972462f, +0.2083668f, +0.0635865f, -0.0138349f, -0.1348047f,
  -0.2642759f, +0.1826161f, +0.2419948f, +0.3566537f, +0.0142905f, -0.3488974f, +0.3167824f, -0.2147457f,
  -0.0731856f, -0.1153218f, +0.1203292f, -0.6664106f, -0.4447741f, +0.2320529f, -0.4205972f, -0.4057809f,
  -0.2963669f, +0.1087851f, +0.1403760f, +0.3433118f, +0.3271949f, +0.2287452f, +0.0534992f, -0.0492538f,
  +0.1015589f, +0.2500110f, +0.3404796f, +0.9806910f, +0.1662937f, -0.1018953f, -0.3399228f, +0.0656897f,
  -0.5500192f, +0.1182098f, -0.3939458f, -0.7572571f, -0.3337005f, +0.1042385f, -0.3342776f, -0.6768081f,
  -0.0968817f, -0.0574137f, -0.1273590f, -0.1483195f, +0.0847377f, -0.1991658f, +0.1593167f, -0.0859762f,
  -0.2340539f, +0.1679543f, +0.2126499f, -0.1646671f, +0.2536041f, +0.0106636f, +0.0346706f, -0.1278238f,
  +0.2183291f, -0.0223426f, -0.1341512f, +0.1518230f, -0.2981071f, +0.1655541f, -0.2358713f, +0.1881545f,
  -0.2324440f, -0.2639686f, -0.0947525f, +0.1811331f, +0.1820562f, +0.0615926f, +0.2131929f, +0.1030724f,
  +0.2508584f, +0.0713637f, -0.0981640f, +0.4533081f, +0.0680083f, -0.0903138f, +0.0717726f, +0.0443555f,
  +0.0180065f, -0.0807098f, +0.1395710f, -0.1546147f, +0.0437299f, +0.1605861f, -0.1767859f, -0.2221994f,
  -0.4822291f, -0.0258594f, -0.2369564f, +0.2026824f, -0.0356599f, -0.0182926f, +0.1507471f, +0.2915214f,
  +0.0902245f, +0.1162920f, -0.2133655f, +0.3539046f, +0.1318283f, -0.0410238f, -0.1440805f, -0.3336019f,
  -0.0190736f, +0.1970288f, +0.1006784f, -0.3514413f, +0.0910438f, +0.0560486f, -0.1808169f, -0.1225775f,
  +0.1031783f, -0.0137363f, +0.2937873f, +0.5704004f, +0.3000705f, -0.0969255f, +0.3765422f, -0.0877177f,
  -0.1263808f, -0.1761437f, +0.2312402f, +0.2336930f, -0.0480207f, -0.0243205f, +0.1989828f, +0.0195112f,
  -0.1453943f, -0.1437269f, +0.3180135f, -0.0492860f, -0.0519612f, -0.0199518f, +0.0113528f, +0.1076269f,
  +0.0845131f, +0.0070307f, +0.0470635f, -0.3192602f, +0.1164590f, -0.2495407f, -0.2088736f, -0.1713668f,
  -0.1061230f, -0.1801801f, -0.1418561f, +0.1889933f, +0.0895791f, +0.1240671f, +0.0289629f, -0.0156419f,
  +0.1498048f, +0.2345157f, -0.0533512f, -0.2811336f, -0.2024883f, +0.1076405f, +0.4771205f, -0.1920180f,
  -0.1640276f, +0.0277366f, +0.0985329f, -0.3307216f, -0.2526226f, +0.1646667f, -0.1214923f, +0.2249575f,
  +0.1268314f, -0.0005816f, -0.0330452f, -0.1706968f, -0.1983246f, -0.0284440f, -0.1774213f, +0.0546078f,
  +0.1569930f, +0.1221797f, -0.2354327f, -0.1195774f, +0.0979267f, +0.0674843f, -0.0067510f, -0.3130072f,
  +0.1787706f, +0.0870814f, -0.1991482f, +0.1313254f, -0.0257031f, +0.0494792f, +0.1606176f, +0.1310538f
);

const float biases[4] = float[4](
  +0.0620953f, +0.0072977f, +0.2378489f, +0.0649984f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer2 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND FEAT_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L2_TEX FEAT_L0_tex
#define TEX_BIND_L2_POS FEAT_L0_pos
#define TEX_BIND_L2_SIZE FEAT_L0_size
#define TEX_BIND_L2_PT FEAT_L0_pt

const float kernels[288] = float[288](
  -0.0449322f, -0.1775695f, -0.0178946f, +0.1364417f, +0.2955163f, +0.2106283f, +0.1256361f, +0.2466669f,
  -0.0338527f, -0.1417177f, -0.1098617f, -0.2559819f, -0.0797906f, +0.2328328f, +0.1010634f, +0.2555000f,
  -0.1922887f, +0.1279312f, -0.0758344f, -0.0548552f, -0.2705666f, +0.5464740f, +0.0117157f, -0.0974719f,
  +0.2900103f, +0.1914515f, -0.5300444f, -0.0301644f, -0.4300130f, +0.0911693f, +0.4032689f, -0.1055020f,
  -0.2760845f, +0.0752535f, +0.0840595f, -0.5329949f, +0.2284387f, +0.2525424f, -0.1972402f, +0.0880544f,
  -0.2835536f, -0.1795209f, +0.1864012f, -0.2659218f, +0.0179054f, +0.2995589f, -0.0830270f, -0.0696448f,
  -0.0288199f, +0.0979334f, -0.2824792f, +0.0468186f, +0.4334810f, -0.2094331f, +0.0518712f, -0.0347327f,
  +0.0137695f, -0.0887003f, +0.1320107f, -0.2014676f, +0.0063715f, -0.0568034f, -0.1709029f, -0.0734239f,
  -0.0249861f, -0.1457435f, +0.2185241f, -0.3676971f, -0.1651293f, +0.1328772f, -0.2230577f, -0.2084819f,
  -0.1628292f, -0.0877298f, -0.2231945f, -0.0479747f, -0.3177906f, -0.0755332f, +0.0282001f, +0.1429561f,
  +0.0952363f, -0.7121734f, -0.0231267f, +0.0048434f, -0.1424610f, +0.0352860f, -0.2301205f, -0.3222739f,
  +0.0998813f, +0.0084714f, -0.2084095f, +0.1422232f, +0.0971389f, +0.0731964f, +0.2242781f, -0.0321955f,
  -0.3208100f, -0.3006444f, +0.2997659f, +0.0088141f, -0.3663875f, +0.3893194f, +0.0730411f, +0.1457837f,
  +0.2512574f, +0.3717738f, +0.1378823f, +0.3403585f, +0.0562792f, +0.0189886f, +0.1241331f, +0.2780811f,
  +0.1760674f, +0.2891854f, -0.3749314f, +0.1627352f, +0.2418862f, +0.1086334f, -0.0190673f, -0.2706129f,
  -0.4736084f, +0.1207152f, +0.5000862f, +0.0038755f, -0.1834424f, +0.0381011f, -0.4148434f, -0.1184423f,
  +0.1154793f, +0.0768135f, +0.2907102f, +0.4003392f, -0.1220595f, -0.4868720f, +0.3599762f, -0.0793273f,
  +0.1300719f, -0.0019260f, -0.2215425f, -0.2504449f, +0.1875433f, -0.3348387f, -0.0206105f, +0.5816994f,
  -0.0153413f, +0.0812864f, -0.2443115f, +0.0614587f, +0.0329435f, +0.2035916f, +0.1229357f, +0.0529201f,
  +0.2506105f, +0.4607908f, -0.1703829f, -0.2643797f, -0.0376898f, +0.4291367f, +0.2143245f, +0.0226499f,
  +0.0198857f, +0.1433521f, -0.2290262f, -0.7333541f, -0.1849818f, +0.1224469f, -0.1026745f, +0.2232849f,
  +0.1818107f, -0.3233295f, -0.2276387f, -0.0515494f, -0.0225445f, +0.0206856f, +0.2149206f, -0.0714279f,
  +0.0265976f, -0.2352716f, -0.2624310f, -0.0787708f, +0.1130821f, -0.1037644f, -0.1963703f, -0.0469445f,
  +0.4627306f, +0.4259709f, -0.3311381f, -0.1131927f, +0.1559778f, -0.4642403f, +0.0022704f, +0.0412887f,
  +0.3252108f, -0.1768136f, -0.0452074f, +0.1078672f, +0.3764516f, -0.0723626f, +0.2674384f, -0.1366856f,
  +0.2614735f, -0.4220534f, -0.1832995f, -0.2466717f, +0.2924501f, +0.0942269f, +0.0422950f, +0.3203323f,
  -0.0438303f, +0.0593471f, -0.2217035f, +0.0914952f, +0.0307818f, -0.0538238f, -0.2247349f, +0.0661093f,
  +0.0867660f, +0.1217898f, -0.0136042f, -0.0244019f, -0.2286513f, +0.0382910f, +0.0113905f, +0.3322760f,
  +0.0227970f, +0.1530035f, -0.0439330f, +0.0886414f, +0.1618492f, -0.0122964f, -0.1361111f, -0.1177121f,
  +0.1595830f, +0.0411449f, -0.0630808f, +0.3801576f, +0.0030655f, +0.2856607f, +0.0914824f, +0.0938692f,
  +0.1485490f, +0.0178233f, +0.1313321f, -0.1730562f, -0.0218126f, -0.1756825f, +0.2697028f, -0.1428516f,
  +0.4056621f, -0.4915388f, +0.3105643f, +0.0702890f, +0.0016032f, -0.5239989f, -0.2110407f, +0.3373859f,
  +0.1238177f, -0.0548738f, -0.0185847f, +0.0115344f, +0.0861990f, -0.1161156f, +0.1157818f, -0.0374290f,
  +0.0025225f, +0.0459165f, +0.0292088f, -0.0765345f, -0.0288013f, -0.0205822f, -0.0682880f, -0.0786153f,
  -0.1011711f, +0.0147975f, -0.0888479f, -0.0683837f, -0.0896776f, -0.1032893f, +0.0879218f, -0.2221533f,
  +0.0711311f, -0.0087613f, +0.1653846f, +0.1592738f, +0.2615985f, +0.0491356f, +0.2523679f, -0.2817218f
);

const float biases[4] = float[4](
  -0.0513029f, +0.0129759f, +0.0215997f, -0.1716175f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer2 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND FEAT_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L2_TEX FEAT_L1_tex
#define TEX_BIND_L2_POS FEAT_L1_pos
#define TEX_BIND_L2_SIZE FEAT_L1_size
#define TEX_BIND_L2_PT FEAT_L1_pt

const float kernels[288] = float[288](
  +0.0414422f, -0.1416595f, -0.1616257f, +0.0988690f, +0.0436616f, +0.2179055f, +0.3032456f, +0.2100895f,
  -0.0304478f, -0.1028941f, -0.3137305f, -0.1308398f, -0.0313121f, +0.4507378f, +0.0604415f, -0.1831627f,
  +0.0837967f, -0.0635666f, +0.0917939f, -0.1157811f, -0.1529078f, +0.0487723f, -0.1621673f, -0.1130216f,
  +0.0679865f, -0.3526982f, -0.2194564f, -0.0960085f, +0.0012809f, -0.0369065f, +0.3004073f, -0.2424659f,
  +0.0141463f, +0.1322958f, -0.1199121f, -0.1775799f, +0.0849554f, +0.6571216f, -0.2310558f, +0.0992902f,
  +0.0361392f, -0.0648125f, -0.0642996f, -0.0628789f, -0.0448778f, +0.1294850f, -0.3558907f, +0.1540468f,
  +0.1821953f, -0.2207091f, -0.1156647f, -0.0587502f, +0.1539639f, -0.0009386f, +0.0278073f, +0.0781040f,
  +0.0367157f, +0.1153823f, -0.3041594f, -0.2911424f, -0.0636699f, +0.1257148f, -0.1424804f, +0.0058295f,
  -0.2900799f, +0.3289464f, +0.4481344f, +0.0348348f, -0.2131820f, +0.0238044f, +0.0300052f, -0.1944631f,
  -0.1169491f, +0.1878728f, +0.2203525f, -0.0797633f, -0.2879554f, +0.1999146f, -0.1803114f, -0.1854431f,
  -0.0603003f, -0.0423863f, +0.0064279f, +0.2402255f, -0.2475446f, -0.1901079f, -0.1352629f, -0.3093261f,
  -0.4718726f, +0.1946758f, +0.3802758f, -0.3811949f, -0.1820468f, +0.3324642f, -0.1130779f, -0.2630132f,
  -0.3123655f, +0.1336600f, +0.2251213f, +0.0388027f, -0.2112436f, -0.0810557f, +0.0931735f, +0.1146869f,
  -0.1570666f, -0.0804523f, +0.5035580f, +0.0525284f, -0.0635809f, +0.0270503f, -0.2390796f, +0.1630281f,
  -0.3214588f, -0.2058502f, +0.4959611f, -0.1865740f, +0.1640888f, +0.2755486f, -0.2192731f, +0.0824068f,
  +0.0707628f, -0.0691855f, -0.3113614f, +0.1501048f, -0.0024285f, +0.1435429f, +0.0420845f, -0.2177158f,
  +0.2045753f, -0.3435341f, -0.1127204f, -0.0960259f, +0.0237037f, +0.1264335f, -0.0322568f, +0.1369146f,
  +0.2546147f, +0.0439585f, +0.1213974f, +0.2314833f, -0.0278417f, +0.2006978f, -0.1656142f, +0.2181005f,
  +0.0962452f, +0.0657366f, -0.2202833f, +0.1066776f, +0.2660800f, -0.0559087f, -0.0019447f, -0.0724085f,
  -0.1893839f, +0.3221780f, -0.2228350f, -0.0705247f, +0.1189586f, +0.3602429f, +0.1656865f, +0.1071489f,
  +0.2312500f, -0.0668567f, +0.1546559f, +0.0310563f, +0.2196678f, -0.7100418f, -0.0862211f, -0.0022986f,
  +0.0319564f, +0.0015015f, -0.2924392f, +0.1995988f, -0.3051474f, +0.3042260f, +0.2337320f, -0.0914879f,
  +0.0609662f, -0.2786022f, +0.1359079f, +0.5523577f, +0.0098453f, +0.0869615f, -0.4852146f, +0.0000735f,
  -0.0645803f, -0.1642076f, +0.0460612f, +0.1952969f, +0.0682788f, +0.1868449f, +0.4462595f, +0.0013183f,
  -0.2320844f, -0.0063269f, +0.1612438f, +0.2918283f, -0.1000520f, +0.0553865f, +0.0270622f, +0.2585212f,
  +0.0708381f, +0.0412796f, +0.0657677f, +0.4424250f, -0.0589223f, -0.0649478f, -0.0041906f, -0.2621357f,
  +0.0417429f, +0.0262650f, +0.1511487f, +0.1332467f, -0.4162195f, -0.1261680f, +0.1223771f, +0.0540588f,
  +0.1542637f, +0.2196831f, +0.0663090f, +0.0312212f, +0.0709252f, +0.1044099f, -0.0429282f, -0.0621232f,
  -0.2031974f, +0.3978291f, +0.1041637f, +0.0529686f, +0.1017451f, +0.0570334f, +0.0233619f, -0.1815921f,
  +0.1686878f, +0.2039866f, -0.1013701f, +0.1706405f, +0.1739689f, +0.0839302f, +0.0657281f, -0.1292861f,
  +0.3379432f, +0.1928252f, -0.3451329f, +0.1177457f, +0.0357832f, +0.0082951f, +0.1900765f, +0.1964759f,
  -0.0742374f, -0.1789871f, -0.2472419f, -0.0583011f, -0.1187568f, +1.0894206f, -0.3357713f, +0.0206776f,
  +0.0320453f, +0.0787795f, +0.1566178f, +0.3448894f, -0.0514754f, +0.2306715f, -0.0934164f, -0.1784275f,
  -0.1233283f, +0.0395961f, +0.1856166f, +0.3276588f, +0.1704457f, +0.0855810f, -0.0696380f, +0.0631811f,
  +0.0208366f, +0.2817277f, +0.2458250f, +0.5123479f, -0.0059264f, -0.0731278f, +0.0502269f, +0.0793786f,
  +0.0755345f, +0.2286954f, +0.1685444f, +0.1330218f, -0.0083540f, -0.1505027f, +0.0013894f, +0.1428921f
);

const float biases[4] = float[4](
  -0.1642942f, -0.3014430f, -0.0718829f, +0.0638878f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer3 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1624154f, +0.2266678f, -0.0130159f, -0.2893949f, +0.0432524f, -0.2510361f, -0.0939656f, -0.0601094f,
  +0.0138287f, +0.1763003f, +0.2240895f, +0.2159470f, +0.1966664f, -0.0097850f, +0.2371899f, +0.1556154f,
  +0.1114248f, +0.2349764f, -0.0708233f, -0.0327039f, -0.4149332f, +0.1533034f, +0.1049641f, +0.0725555f,
  -0.0715431f, +0.2105241f, -0.2551027f, +0.0306585f, +0.2792941f, +0.4179156f, +0.0398994f, -0.0954581f,
  -0.3342576f, +0.5743959f, +0.2586255f, +0.6882133f, -0.0084488f, -0.1606147f, +0.2806496f, -0.0317019f,
  -0.6196408f, -0.2729879f, +0.1714786f, -0.3649490f, -0.9535005f, +0.0815709f, -1.1295036f, -0.0499647f,
  +0.3138186f, +0.1723979f, +0.0290949f, -0.0916876f, -0.1179968f, +0.0440493f, -0.0704512f, -0.3099080f,
  -0.2072819f, +0.1230017f, +0.2065669f, +0.1339866f, -0.0795703f, -0.1345020f, +0.7356659f, +0.0034866f,
  -0.7164940f, +0.1482823f, -0.7923638f, -0.6352170f, -0.9073737f, -0.0756847f, -0.8027312f, -0.2055388f,
  -0.1210916f, -0.2040955f, -0.0380740f, -0.2915922f, -0.1873863f, -0.0228604f, -0.0528038f, -0.0797527f,
  -0.2292181f, +0.1070993f, -0.0527776f, -0.2239635f, +0.4898951f, -0.0067527f, -0.3973823f, +0.1934600f,
  -0.1314121f, -0.0324695f, -0.0051137f, +0.1889770f, -0.1083829f, +0.3348508f, +0.2141629f, +0.4459972f,
  +0.0618885f, -0.2378779f, -0.1452916f, -0.1068170f, -0.0337697f, +0.1287531f, -0.2992041f, -0.3857555f,
  +0.5569444f, +0.0105310f, +0.2218886f, +0.1319098f, +0.2861591f, +0.2000074f, +0.5532433f, +0.1501995f,
  -0.1717082f, -0.1441858f, -0.1624520f, -0.4176274f, -0.0923519f, -0.1213673f, +0.1024943f, -0.1430925f,
  +0.0411088f, +0.1275412f, +0.1495365f, -0.3206370f, +0.1649186f, +0.2530717f, +0.1726386f, +0.1448376f,
  +0.0081684f, +0.2651551f, +0.1312017f, -0.1624793f, +0.2366001f, -0.0391367f, +0.3626196f, -0.0580945f,
  -0.1337471f, -0.0672653f, -0.1151247f, -0.3018843f, -0.2290284f, +0.0388476f, -0.0237208f, +0.2625864f,
  +0.1853944f, +0.1762928f, -0.0403955f, -0.1835267f, +0.0614018f, -0.0686835f, -0.1808251f, +0.4361860f,
  +0.0833495f, +0.0679647f, -0.0993825f, -0.2576946f, +0.9892238f, -0.3642979f, -0.8103570f, +0.5796557f,
  +0.4649121f, -0.1237098f, -0.2240455f, -0.0721842f, +0.2274457f, -0.2592584f, -0.1120058f, +0.0769713f,
  -0.2491101f, +0.0207307f, -0.2245849f, +0.3047056f, +0.1936022f, +0.1794713f, +0.0137978f, -0.0839676f,
  +0.0401181f, +0.1051650f, -0.3311792f, +0.2796687f, -0.1642990f, -0.0685410f, +0.5987690f, -0.0446421f,
  +0.0106761f, -0.0404342f, +0.0619469f, +0.1236288f, -0.0417184f, -0.1127520f, -0.4281444f, -0.0654033f,
  -0.1004746f, -0.1636375f, -0.1835693f, -0.2880785f, +0.0011182f, -0.0118503f, +0.1457618f, -0.0816526f,
  +0.0364939f, -0.2490108f, +0.1207973f, +0.0368131f, -0.1353804f, -0.0193590f, +0.0985364f, +0.1003448f,
  -0.1146391f, -0.1867213f, +0.1298006f, +0.1438206f, -0.1590391f, -0.0261732f, +0.0862193f, +0.4645619f,
  +0.0211936f, -0.0931678f, +0.0077742f, +0.2826917f, -0.1221762f, +0.2632823f, -0.0209740f, -0.4236706f,
  +0.4356425f, +0.2475777f, -0.1083679f, +0.1846517f, -0.0444242f, +0.1164612f, +0.2484220f, -0.2678975f,
  +0.1210793f, -0.1055797f, -0.0886472f, +0.1759183f, +0.0781052f, -0.0539520f, -0.0319431f, -0.5766793f,
  +0.0596371f, -0.1875954f, +0.0277185f, -0.2495691f, -0.0973137f, +0.0642525f, -0.0398077f, +0.1747098f,
  +0.5500963f, -0.2047708f, +0.2749977f, -0.0581362f, +0.0441667f, -0.0873457f, -0.3534349f, +0.4192887f,
  +0.2532860f, +0.2066825f, +0.0393136f, +0.6034156f, -0.0626299f, -0.0004246f, +0.0721448f, +0.2936131f,
  -0.0670512f, +0.0588154f, -0.0340912f, -0.1398768f, +0.0571943f, +0.0440203f, -0.0509054f, +0.0610836f,
  -0.2770182f, +0.0335625f, +0.0238487f, -0.3947499f, -0.1362312f, +0.0642066f, -0.0214496f, +0.1679043f,
  -0.1666048f, -0.2326306f, +0.2101468f, -0.1536425f, +0.1950269f, +0.1244610f, +0.3787984f, +0.0053791f
);

const float biases[4] = float[4](
  +0.1387550f, +0.0902216f, +0.0724200f, +0.1562476f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer3 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0056948f, +0.1266237f, +0.2690348f, -0.3451615f, -0.2223705f, -0.0901192f, +0.4778397f, -0.1653172f,
  -0.2207090f, +0.0290546f, +0.0699446f, +0.6954011f, -0.1725152f, -0.5394672f, -0.2009671f, -0.7214019f,
  -0.3469768f, +0.2174422f, +0.2141960f, +0.0930885f, -0.2307951f, +0.0074818f, -0.4137757f, -0.9813839f,
  -0.1417427f, -0.2161670f, +0.0951572f, +0.2291024f, +0.1351484f, -0.0242710f, +0.3865506f, -0.3350019f,
  -0.1659582f, -0.1692694f, +0.1033515f, -0.3815773f, +0.1831519f, +0.1242667f, +0.2797874f, -0.1052111f,
  +0.0994572f, -0.1139621f, +0.2606744f, +0.1841881f, +0.1984806f, -0.4409362f, -0.0915845f, -0.5794071f,
  -0.0683363f, +0.2782830f, +0.0290897f, -0.1802213f, -0.0536620f, +0.3243214f, +0.1591811f, +0.1897812f,
  -0.0795162f, +0.2906839f, -0.2557864f, -0.0184450f, +0.0414349f, -0.0669449f, +0.0870734f, -0.3200325f,
  +0.2996485f, +0.2846621f, +0.2546406f, +0.0128635f, +0.0252723f, -0.2130234f, +0.3743461f, -0.0322675f,
  -0.1299270f, -0.0554595f, -0.1066698f, -0.2150464f, +0.1433000f, -0.1183762f, -0.3638337f, +0.2228476f,
  -0.0109725f, +0.0775603f, +0.3220930f, -0.6380638f, +0.3178865f, +0.0229041f, -0.1809007f, +0.0653107f,
  -0.1524169f, +0.0592631f, +0.2433168f, +0.1821881f, +0.3190300f, +0.4570346f, +0.1548409f, -0.0013961f,
  +0.1545563f, -0.2061140f, -0.3156885f, +0.1098835f, -0.0267745f, +0.3390614f, -0.2979675f, +0.1457448f,
  -0.0469725f, +0.7182582f, +0.2287902f, -0.4117706f, -0.0973599f, +0.0882475f, -0.0387250f, +0.0600096f,
  +0.1759583f, +0.0187253f, +0.3086262f, +0.0583387f, +0.3222975f, +0.0169944f, +0.1976372f, -0.1158876f,
  +0.2753084f, +0.1347622f, -0.0309902f, +0.5355426f, -0.1141371f, +0.1343485f, -0.4368331f, +0.0043106f,
  -0.1254963f, +0.4773135f, +0.0030570f, -0.0984927f, +0.4067800f, +0.0870368f, +0.0859466f, -0.0139754f,
  +0.1820664f, -0.0227906f, +0.4712784f, +0.0616225f, +0.1890973f, -0.2109677f, +0.3138901f, -0.0901724f,
  +0.1410008f, +0.0395312f, +0.0310105f, -0.1907800f, -0.0905785f, +0.0992896f, +0.1296221f, +0.2030770f,
  +0.2040403f, -0.0903335f, -0.0994573f, -0.0079281f, +0.2835784f, +0.1677751f, +0.5032532f, -0.0867607f,
  +0.2456411f, +0.1047945f, -0.2093099f, -0.0249926f, -0.2984733f, -0.1753093f, +0.2350013f, +0.1114021f,
  -0.1391761f, -0.0879028f, +0.2251626f, +0.0193416f, +0.0171015f, -0.0962089f, -0.1311657f, -0.1335149f,
  -0.4698806f, +0.2058618f, -0.2415826f, -0.4299330f, -0.4525054f, +0.1087041f, +0.1798916f, -0.3125575f,
  +0.3370230f, -0.0037884f, -0.0808199f, -0.1085040f, -0.3312616f, -0.0033070f, +0.3604982f, -0.1920928f,
  +0.3034650f, +0.0173772f, -0.0125277f, -0.1808297f, -0.1345433f, +0.0270363f, +0.1679001f, +0.1394554f,
  +0.2167297f, +0.5800439f, -0.2219399f, -0.1077044f, +0.0895209f, +0.0808520f, -0.0829870f, -0.2667778f,
  +0.0215503f, +0.0803241f, -0.3638506f, -0.3212641f, -0.2231240f, +0.0988368f, -0.0756278f, -0.3832504f,
  +0.3270281f, -0.0823688f, +0.0572779f, +0.2610440f, -0.1992408f, -0.0512013f, +0.2624008f, -0.4614964f,
  +0.0667780f, +0.0585860f, +0.0447419f, +0.1965310f, +0.1810906f, -0.3427970f, +0.1099612f, -0.3685863f,
  -0.2295511f, +0.1609540f, -0.1830254f, -0.1063474f, -0.1825467f, +0.0172573f, -0.4366479f, -0.1408641f,
  -0.2879369f, +0.2326142f, -0.1926540f, -0.0722352f, -0.2406685f, -0.2378714f, +0.1507535f, -0.1011601f,
  +0.2720466f, -0.0518341f, +0.2253817f, +0.0703790f, -0.3385747f, +0.0101952f, +0.2741950f, +0.1467521f,
  -0.3868597f, -0.4224282f, +0.0758247f, -0.3219893f, -0.1114894f, -0.0986010f, -1.1750265f, -0.3186474f,
  -0.0088680f, -0.0820742f, -0.2507723f, -0.0311530f, +0.1796001f, -0.0983632f, +0.0271262f, -0.1370394f,
  +0.4124578f, +0.0976538f, +0.2002277f, +0.0872393f, +0.0402412f, -0.2646204f, +0.2985423f, -0.1948976f,
  -0.1976414f, +0.1122345f, -0.1992625f, -0.3272103f, -0.2388707f, -0.2058098f, -0.3897437f, -0.0708680f
);

const float biases[4] = float[4](
  -0.1361516f, -0.0005465f, +0.1651271f, -0.3693324f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer4 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2261660f, -0.0233040f, +0.2033095f, -0.1385121f, -0.0759261f, -0.3249185f, -0.1879755f, -0.5013145f,
  -0.3577244f, +0.0910925f, -0.0750285f, +0.0136927f, +0.2646618f, +0.3231943f, +0.1215864f, -0.0804744f,
  -0.2227512f, +0.2672784f, +0.0455590f, -0.0514354f, +0.3627123f, -0.2530416f, +0.0153452f, -0.1087677f,
  -0.4524966f, -0.1512791f, +0.2135950f, +0.1658061f, -0.0714830f, -0.1367754f, -0.0163376f, -0.3276438f,
  +0.0326677f, +0.0630426f, -0.2966009f, +0.6594027f, -0.1723289f, +0.6933481f, -0.0319449f, -0.3284827f,
  -0.3030182f, -0.0066384f, -0.1479244f, +0.0523245f, +0.1571403f, +0.1429341f, +0.0220124f, -0.2440445f,
  +0.1028583f, +0.1439350f, +0.0089988f, -0.1246517f, +0.0468887f, -0.0538748f, -0.1146932f, -0.1210464f,
  +0.1581587f, -0.0574302f, -0.0389402f, -0.1655882f, -0.4781625f, +0.1395283f, +0.0076668f, -0.1031950f,
  +0.0991111f, -0.4725154f, -0.2800048f, +0.1670740f, +0.3467192f, -0.2311418f, -0.0163921f, +0.0796899f,
  +0.0305817f, +0.1561913f, +0.0457698f, +0.0173566f, -0.0757310f, -0.1755294f, +0.2666143f, +0.2830056f,
  -0.1839889f, +0.0364684f, +0.5512294f, -0.2969388f, -0.3049085f, -0.2742580f, +0.0924510f, -0.0346987f,
  +0.0444511f, -0.2283912f, -0.1425808f, +0.0760888f, -0.1245258f, -0.2440251f, -0.0282081f, +0.1071111f,
  -0.0641979f, +0.2415387f, +0.5457152f, -0.6333318f, -0.1441807f, +0.0013850f, +0.0591724f, +0.0639850f,
  -0.4431992f, +0.4703573f, +0.1829353f, +0.2099419f, -0.1779107f, -0.1231669f, -0.4276940f, +0.5920420f,
  +0.2050034f, -0.1453061f, -0.0826573f, -0.0914730f, +0.1819421f, -0.0972733f, +0.3520512f, -0.1533418f,
  -0.0053277f, -0.1532117f, +0.2205746f, -0.3352293f, +0.6107173f, -0.0775901f, +0.1647027f, -0.3169794f,
  -0.0532325f, +0.2916082f, -0.0779498f, +0.4352722f, -0.1193622f, -0.3077875f, +0.1354399f, -0.2176530f,
  -0.0722234f, +0.0562682f, +0.3155643f, -0.0957188f, +0.1126560f, +0.0498886f, -0.0060317f, -0.1286128f,
  +0.0462261f, +0.0848888f, -0.0341094f, +0.0894913f, +0.1245356f, -0.0430487f, +0.1304254f, -0.1674030f,
  -0.1781261f, -0.1501602f, -0.1795468f, +0.5463117f, -0.1054034f, +0.2549006f, +0.3573239f, -0.0563915f,
  +0.1309938f, +0.2528930f, +0.0077321f, +0.2187196f, +0.1229235f, +0.1195091f, +0.0480075f, -0.2000121f,
  -0.0882473f, -0.2707217f, -0.1305323f, +0.2603797f, -0.2072801f, -0.3737039f, +0.1236776f, -0.0084744f,
  +0.4037177f, -0.1421874f, -0.0932539f, +0.0195430f, -0.0475819f, -0.1620165f, +0.3873241f, +0.2918402f,
  +0.0927685f, -0.1442990f, -0.1840992f, +0.3746326f, -0.0975699f, -0.2066995f, +0.1567848f, -0.2247593f,
  +0.0487668f, +0.2231208f, +0.3113520f, +0.0720586f, -0.2679118f, +0.0094258f, +0.3849555f, +0.2332111f,
  +0.0131513f, +0.1477540f, +0.1467650f, +0.3312846f, -0.3135722f, -0.1363880f, -0.0211968f, -0.1667079f,
  -0.0820466f, -0.0628346f, -0.0421957f, -0.0854304f, +0.0119812f, -0.1649443f, +0.2261171f, -0.0558506f,
  -0.3014086f, -0.1211139f, +0.0269513f, +0.0803499f, +0.4352663f, +0.1552957f, -0.2537639f, +0.0671043f,
  +0.2460476f, +0.1901640f, -0.0923710f, +0.2028674f, +0.0595646f, +0.0743943f, +0.4404135f, +0.3761497f,
  +0.2362560f, +0.0691599f, +0.2031378f, -0.0587284f, +0.1041072f, -0.1216060f, -0.1133113f, -0.6192012f,
  +0.5061279f, -0.1557856f, -0.1163979f, +0.1805840f, -0.0679589f, -0.0459197f, -0.0679327f, +0.1482377f,
  +0.4170668f, +0.6800267f, +0.8543039f, -0.5220758f, -0.3169132f, +0.2723000f, +0.2236178f, +0.7252430f,
  +0.0502272f, -0.6523719f, -0.4987635f, +0.0499844f, +0.0053817f, -0.4213817f, +0.0253226f, -0.3249426f,
  +0.1557704f, +0.0023522f, -0.3265152f, +0.3144855f, -0.0441431f, +0.0670609f, -0.0374663f, +0.2714043f,
  +0.1108110f, -0.0657307f, -0.5096357f, -0.0558457f, -0.3836947f, -0.0770357f, -0.3783624f, -0.3164469f,
  +0.0848002f, -0.0491366f, +0.0430304f, -0.2354096f, -0.3494397f, -0.1871897f, +0.2306586f, -0.3581601f
);

const float biases[4] = float[4](
  +0.0228287f, -0.2146453f, -0.0162838f, -0.1046143f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer4 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1165453f, -0.0743385f, +0.1754122f, +0.1792208f, -0.1687322f, -0.2117732f, +0.0101266f, +0.0281210f,
  -0.1659672f, +0.1935026f, +0.0082547f, +0.0367706f, +0.4216688f, +0.0656381f, +0.4111384f, +0.2959290f,
  +0.2053906f, -0.2783085f, +0.0215565f, -0.0040246f, -0.0656225f, -0.1049834f, +0.3415233f, -0.2981292f,
  -1.0125278f, -0.2110668f, +0.4626403f, +0.3189976f, +0.0570931f, -0.2671244f, +0.0857289f, -0.0869208f,
  -0.2757328f, -0.0148504f, +0.5615619f, -0.1248303f, +0.1914067f, +0.7010691f, +0.1249155f, -0.0481244f,
  +0.2398423f, +0.2644946f, +0.1129218f, -0.4247165f, -0.2773027f, +0.1920899f, -0.0092902f, -0.0674465f,
  -0.3146827f, -0.0865454f, -0.0415827f, +0.1085481f, -0.1991565f, -0.1402011f, +0.1027152f, -0.0647620f,
  -0.2638202f, -0.4218894f, +0.2299198f, +0.2106891f, +0.4457080f, +0.4075901f, +0.1521218f, -0.1658235f,
  -0.0960932f, -0.3101834f, -0.1006083f, -0.0886575f, -0.0456154f, +0.2222505f, +0.0385336f, +0.1592778f,
  +0.0927055f, -0.2128916f, +0.0178312f, +0.1681229f, +0.0608122f, +0.1447671f, -0.1715629f, +0.3408044f,
  -0.0154154f, +0.0203568f, +0.0664102f, -0.0974208f, -0.1430734f, +0.0648576f, -0.1345617f, +0.2758842f,
  -0.1109034f, -0.0717148f, +0.0039347f, -0.0756910f, +0.2645157f, -0.0422820f, +0.0746994f, +0.5296604f,
  -0.0771192f, -0.1045138f, -0.0785711f, +0.1463703f, +0.3189886f, -0.1662190f, -0.2091629f, -0.1315144f,
  +0.2713396f, -0.0451680f, -0.0223014f, +0.1410261f, +0.0088864f, -0.1683296f, -0.0719943f, +0.1616700f,
  +0.1157015f, -0.3766589f, -0.0347564f, +0.2147738f, +0.2143520f, -0.0681887f, -0.1965602f, +0.3284231f,
  -0.1207125f, +0.0828829f, +0.2638830f, -0.0544620f, +0.3990132f, -0.0461163f, +0.1237248f, -0.1678555f,
  +0.0698366f, -0.0546533f, +0.0298085f, +0.4619735f, +0.1366380f, +0.1772325f, +0.0986315f, +0.2048901f,
  -0.0058237f, -0.0963157f, -0.0119173f, +0.0660307f, +0.1857935f, -0.0432257f, -0.1257835f, +0.0746184f,
  +0.0979762f, +0.4451647f, -0.1529053f, -0.1868983f, +0.0526124f, -0.0712714f, +0.1859310f, -0.0390628f,
  -0.0249992f, -0.0060935f, -0.1574513f, +0.0810427f, +0.0556724f, +0.0095503f, -0.0644722f, -0.3438962f,
  +0.0283306f, +0.1269356f, -0.1876208f, +0.1981513f, -0.1685982f, +0.3105353f, +0.0164749f, +0.0509591f,
  +0.3310891f, -0.2078961f, +0.1460342f, -0.2438198f, -0.2959534f, +0.1702018f, -0.3102351f, -0.3217597f,
  -0.3748629f, +0.2505833f, -0.0593339f, -0.3004328f, +0.2187970f, -0.0154912f, -0.1083799f, +0.2856513f,
  -0.2375686f, +0.0390257f, +0.4046609f, -0.1734070f, -0.2915580f, -0.1413202f, -0.0958380f, +0.4297283f,
  +0.3650582f, -0.0769202f, +0.0748711f, +0.2263401f, +0.4374264f, -0.0161767f, +0.1500115f, -0.1242564f,
  +0.1905465f, +0.1692108f, +0.0293371f, +0.1468385f, -0.2476271f, -0.6351794f, -0.2742297f, +0.0624487f,
  +0.0907671f, +0.1289972f, -0.0563591f, +0.1525785f, -0.2264671f, -0.0310773f, -0.0150793f, -0.2411027f,
  -0.3771778f, +0.0394698f, -0.0316740f, -0.2007810f, +0.4289699f, +0.1020955f, +0.2480358f, -0.2643609f,
  -0.3788049f, -0.1916013f, -0.1701606f, -0.1205975f, -0.1836923f, +0.0845119f, +0.3116171f, -0.0856948f,
  -0.0274051f, +0.0917707f, +0.0792726f, -0.0122139f, -0.2901233f, +0.0555070f, +0.1393690f, -0.0417963f,
  -1.0533289f, -0.1365600f, +0.1536547f, +0.2279207f, +0.6508801f, -0.1614081f, +0.0079138f, -0.0219093f,
  -0.8712835f, -0.1589770f, -0.1945617f, +0.1094593f, +0.2038868f, +0.8028914f, -0.2262075f, +0.2660324f,
  -0.0266136f, +0.0794152f, -0.2545662f, +0.3812272f, -0.1480138f, +0.2692290f, +0.0056263f, -0.0226346f,
  -0.0605603f, -0.0609030f, +0.1154930f, +0.1104866f, +0.2902205f, -0.1162036f, +0.2212724f, -0.2538635f,
  -0.0058954f, -0.0336277f, +0.3032987f, +0.3076687f, +0.6224087f, -0.0724497f, +0.4062425f, +0.3323421f,
  -0.0251472f, +0.0914258f, -0.0652010f, +0.2233124f, +0.0769389f, +0.1594628f, -0.1846362f, +0.5153172f
);

const float biases[4] = float[4](
  +0.0553965f, -0.1857050f, -0.1448832f, +0.2523730f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer5 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2212835f, +0.0638444f, +0.2294115f, +0.2370128f, -0.3259783f, -0.2635551f, -0.0142986f, -0.3841129f,
  +0.0671316f, -0.0837535f, +0.2380848f, -0.5654690f, +0.1439597f, +0.1517686f, -0.4063976f, +0.1335425f,
  -0.0171322f, +0.0154148f, -0.2716848f, -0.3182405f, +0.2276191f, +0.1429867f, +0.1310360f, -0.1295984f,
  +0.4421400f, -0.3098564f, -0.1570907f, -0.1099966f, -0.2645433f, -0.3109366f, +0.0676177f, -0.1033351f,
  +0.2574090f, -0.2430519f, -0.1012456f, -0.3839566f, +0.6500135f, +0.0959169f, -0.2473438f, +0.0497650f,
  +0.6228335f, +0.6631591f, -0.1182961f, +0.1930354f, +0.3065366f, +0.1670853f, +0.1377637f, +0.3268338f,
  +0.1929973f, +0.2605177f, -0.2864938f, +0.0110029f, +0.0816291f, -0.0006486f, -0.0494224f, -0.1398402f,
  +0.0261699f, -0.1478979f, +0.0617286f, +0.1348837f, +0.0190477f, +0.0087429f, +0.0064810f, +0.0327306f,
  +0.1725578f, -0.0677892f, +0.3612007f, +0.3089965f, +0.3919561f, -0.0938631f, -0.4533384f, -0.1368171f,
  -0.1337880f, +0.1176155f, -0.1849990f, +0.2415518f, -0.1303212f, -0.1349881f, -0.2213810f, +0.1709827f,
  -0.2088279f, -0.0030966f, +0.0633005f, +0.1729560f, +0.0566225f, -0.5122859f, -0.1140611f, +0.0037770f,
  -0.0608523f, -0.1944664f, +0.1950947f, -0.0814394f, +0.2054966f, -0.2273304f, -0.2261860f, -0.2461187f,
  -0.0292251f, -0.0240873f, -0.0522266f, -0.0608317f, +0.2663802f, +0.1295903f, +0.1530782f, +0.0044334f,
  -0.2968606f, +0.3769102f, -0.0704358f, +0.0902750f, +0.6556889f, -0.3708101f, +0.8325234f, -0.9431680f,
  -0.0280730f, -0.0435089f, +0.0180769f, -0.2253294f, -0.2627403f, -0.0878017f, +0.0813659f, -0.5495996f,
  -0.0907446f, -0.0936419f, -0.1921493f, -0.0058855f, -0.0837430f, -0.0916478f, +0.0812581f, -0.0097963f,
  +0.0886730f, -0.1155555f, -0.0327068f, -0.3632004f, -0.0080051f, +0.3641133f, +0.0879779f, +0.0861852f,
  +0.0904530f, -0.1031918f, -0.2989593f, +0.1112686f, -0.0525472f, -0.0664258f, +0.0894022f, +0.1407108f,
  +0.1773472f, -0.2385006f, +0.0172075f, -0.1599693f, +0.1148598f, +0.0703718f, +0.0776493f, -0.3250323f,
  +0.3323324f, -0.1170733f, +0.1746950f, -0.1831263f, -0.3672957f, +0.4182471f, +0.3077244f, -0.5924546f,
  -0.0110584f, +0.2743894f, -0.1056853f, -0.1251676f, -0.3042388f, +0.2628805f, +0.2813047f, -0.1930879f,
  +0.1213248f, -0.3207306f, -0.0778945f, +0.4195428f, -0.2638419f, -0.0656591f, -0.2657069f, +0.1299468f,
  -0.0896572f, -0.6221225f, +0.4529682f, -0.0339155f, -0.0219292f, +0.0350638f, -0.5913144f, -0.0228754f,
  -0.1952565f, +0.0329485f, +0.2893730f, -0.2631606f, +0.3570639f, +0.1286479f, +0.4303117f, +0.3500976f,
  +0.1562407f, +0.0434328f, +0.1806514f, +0.3085467f, -0.3343639f, -0.1481611f, -0.1066893f, +0.0915487f,
  -0.1516539f, +0.2689848f, -0.0713081f, +0.3177147f, +0.1770906f, -0.2081794f, -0.3114439f, -0.1420740f,
  +0.3090107f, +0.2206766f, -0.1682618f, -0.0359131f, +0.1000455f, +0.0184583f, -0.1537933f, -0.1085480f,
  +0.0745022f, +0.1093731f, +0.1781069f, +0.0164520f, -0.1309688f, -0.1813677f, -0.2631505f, -0.1357440f,
  +0.3706731f, -0.1766155f, +0.0193402f, -0.0968451f, -0.0350977f, -0.1817544f, +0.4438248f, -0.3359605f,
  -0.1455078f, -0.1438921f, -0.0314528f, -0.1523703f, -0.0400631f, -0.2564012f, -0.3761107f, -0.1136549f,
  +0.3938795f, -0.0113267f, +0.1945893f, -0.3377632f, -0.0767166f, +0.1848584f, -0.0097939f, -0.4563338f,
  +0.5502549f, -0.0123135f, -0.0743461f, +0.2122547f, +0.0714003f, +0.4141053f, +0.1493707f, -0.5499493f,
  +0.7423258f, +0.3928412f, -0.0946764f, -0.0472386f, +0.0859969f, +0.3752758f, -0.0227359f, -0.4045264f,
  +0.2423179f, -0.0669012f, -0.0001705f, -0.1682556f, +0.2002869f, +0.0699055f, +0.3774382f, -0.6070707f,
  +0.4764828f, +0.2155180f, +0.0198757f, -0.1444909f, +0.3790326f, -0.1564899f, +0.0177698f, -0.4176104f,
  -0.0834246f, -0.0637368f, +0.1856674f, +0.0945925f, +0.1736589f, -0.3664741f, +0.0604426f, -0.2117324f
);

const float biases[4] = float[4](
  -0.0473243f, +0.0698589f, -0.1220006f, +0.0018406f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer5 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.5019423f, -0.0722372f, -0.2256787f, +0.0795392f, -0.6158491f, +0.6080325f, +0.1265268f, +0.0872162f,
  +0.9361329f, +0.3455018f, +0.0745144f, +0.4651971f, +0.1836543f, +0.3862805f, -0.1195042f, -0.2165294f,
  -0.0874589f, +0.2885069f, -0.3995171f, +0.0119553f, -0.1694729f, +0.4986980f, +0.2181981f, -0.0507549f,
  +0.0669327f, +0.2867411f, -0.5517277f, -0.3898739f, +0.2054527f, +0.0380246f, +0.1662680f, -0.2510496f,
  -0.3847602f, +0.1298987f, -0.1568363f, -0.2870872f, -0.1884729f, -0.0972865f, +0.0493352f, -0.0765170f,
  -0.0951005f, +0.0528213f, -0.1664840f, -0.0636095f, -0.0083195f, +0.1042865f, +0.1579730f, -0.0573503f,
  +0.0193503f, -0.0858603f, +0.3591652f, -0.1574374f, -0.1088414f, +0.0675622f, -0.1346928f, +0.4092785f,
  +0.0425611f, +0.0833484f, -0.3476546f, +0.0794970f, -0.3807922f, +0.1001680f, -0.0622012f, +0.0583458f,
  -0.0018693f, -0.0371956f, +0.0176025f, +0.1892096f, +0.1460482f, -0.1064062f, -0.0688659f, -0.1301112f,
  -0.0940784f, +0.0761668f, -0.2782116f, +0.0640377f, +0.0959000f, +0.0986274f, +0.1443363f, +0.0070552f,
  +0.4145850f, -0.0274878f, -0.1591575f, +0.9092885f, +0.1398572f, +0.0485516f, +0.6298230f, +0.0142221f,
  -0.0086697f, -0.0511532f, +0.0092236f, +0.2944348f, -0.3747422f, -0.0085212f, -0.0448210f, -0.2150677f,
  +0.0607472f, +0.1389607f, +0.3586289f, +0.3549870f, -0.3008977f, +0.0379052f, -0.1426235f, +0.1418263f,
  +0.0363909f, -0.3021994f, +0.3360306f, +0.0391092f, -0.0958696f, -0.0998982f, +0.2031712f, +0.2167660f,
  -0.3648089f, -0.8160969f, -0.0593087f, +0.0555709f, +0.0050673f, -0.1211300f, -0.1185571f, +0.2722257f,
  +0.0370977f, +0.0146899f, -0.2593054f, -0.0576947f, +0.0394305f, +0.1719435f, +0.0831796f, +0.1201576f,
  -0.2996288f, -0.1271722f, +0.1705827f, -0.3491943f, -0.1002917f, +0.0014979f, +0.3438586f, -0.2212087f,
  -0.3896033f, -0.1787475f, -0.1990032f, -0.1231253f, -0.2536590f, +0.0438985f, +0.0037315f, +0.1827894f,
  +0.1345674f, -0.1859769f, -0.2524666f, -0.0766741f, -0.1553360f, +0.0317914f, +0.1573165f, -0.3404852f,
  +0.0449215f, -0.3079306f, +0.2301296f, -0.0549657f, -0.1898122f, -0.1271973f, -0.1260264f, +0.0772676f,
  +0.1287445f, +0.0161689f, -0.1569404f, -0.1988830f, +0.2244999f, -0.2251555f, +0.0364266f, +0.0415568f,
  +0.1694738f, -0.0178259f, -0.1964832f, +0.1659410f, -0.0623615f, -0.4184788f, -0.7198408f, -0.0272149f,
  -0.1870257f, -1.1541350f, +0.1176440f, -0.3837980f, +0.2563856f, -0.0139350f, -0.0281361f, +0.1383527f,
  +0.3985467f, +0.3038594f, -0.0794910f, +0.3805422f, +0.0589650f, +0.0785903f, +0.6087927f, -0.2361173f,
  -0.0786066f, +0.1046458f, -0.3247322f, -0.0261038f, +0.1935785f, -0.4492018f, +0.1339794f, -0.1138703f,
  -0.4252333f, -0.4563899f, -0.0059642f, +0.1531056f, +0.0545927f, +0.0049790f, +0.0735835f, -0.1635956f,
  +0.1886070f, -0.1380373f, +0.1667227f, +0.2538470f, +0.4875362f, +0.2351477f, -0.2788994f, -0.3277471f,
  +0.1275213f, -0.3061501f, -0.2477567f, -0.0302328f, +0.0615969f, -0.3831414f, +0.1450088f, -0.0927922f,
  -0.2264420f, -0.3494065f, +0.2794530f, -0.2385435f, +0.1430813f, -0.2220204f, -0.2762203f, +0.2187422f,
  -0.0815029f, -0.3071382f, +0.0633901f, +0.0297182f, -0.0209095f, -0.2312758f, -0.1682511f, -0.4696123f,
  +0.2960303f, -0.2050743f, +0.0469021f, -0.2435161f, -0.0850527f, -0.1075506f, -0.0604384f, +0.0770867f,
  -0.3673848f, -0.2652414f, +0.0427295f, -0.0577853f, -0.1136450f, -0.0556397f, -0.3329076f, -0.0483038f,
  -0.1433749f, +0.0411259f, -0.1708382f, +0.2037091f, -0.2041326f, +0.1355781f, +0.1635597f, +0.0575649f,
  -0.2025985f, -0.0800368f, -0.0905095f, +0.0065007f, -0.1398735f, +0.3262631f, +0.0007524f, +0.2433614f,
  -0.2445456f, +0.1312638f, +0.1445275f, -0.2333253f, +0.0370937f, +0.0748905f, +0.2213119f, -0.0130002f,
  -0.1102494f, -0.1676131f, +0.1088925f, -0.1367086f, +0.0382809f, -0.0112053f, +0.1923803f, +0.0557068f
);

const float biases[4] = float[4](
  -0.3932507f, +0.0790438f, -0.2015845f, +0.2137212f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer6 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2539124f, -0.3817788f, +0.0791781f, +0.2264810f, +0.0734133f, +0.1437217f, -0.1650667f, +0.1676194f,
  -0.1244881f, -0.0499785f, -0.1219340f, -0.2285504f, +0.0785520f, +0.1005914f, +0.1164680f, -0.0495401f,
  +0.0546036f, +0.0143120f, +0.0102504f, -0.1329857f, +0.0696485f, +0.1562056f, -0.0998904f, -0.0757852f,
  -0.2955201f, -0.0062375f, -0.1726313f, -0.0868709f, +0.3201841f, +0.3906008f, -0.4216185f, -0.0508839f,
  -0.1625612f, +0.1155191f, -0.6576167f, -0.4379529f, +0.2448588f, +0.1798349f, +0.2281153f, -0.2386972f,
  +0.1416211f, +0.0467745f, -0.1234690f, -0.0810993f, +0.0991683f, +0.0467738f, -0.0525387f, -0.4264607f,
  +0.0657874f, -0.2536333f, -0.1433946f, -0.0724387f, -0.1052592f, +0.2074291f, -0.0575622f, +0.2221124f,
  +0.1812624f, -0.0923474f, -0.0512858f, +0.0472721f, -0.8125590f, -0.0149653f, -0.2346010f, +0.2496729f,
  -0.0037689f, +0.1002618f, +0.0658774f, +0.0896754f, -0.9270865f, -0.3056664f, -0.0557290f, -0.1911489f,
  -0.0064987f, -0.1595965f, +0.1038077f, +0.0174519f, -0.0764250f, -0.1189893f, +0.1153350f, +0.0182179f,
  +0.1950572f, +0.2145025f, -0.0830532f, -0.1911089f, +0.0227317f, +0.2295774f, +0.2887475f, -0.1515500f,
  +0.1719906f, +0.0655604f, -0.0931940f, -0.1065861f, -0.1089135f, -0.0789059f, -0.2052681f, -0.0442572f,
  -0.1219710f, +0.1085012f, +0.0577268f, -0.1814756f, -0.2296978f, +0.0819015f, +0.3361460f, -0.1138110f,
  -0.7138854f, -0.3349043f, +0.1581335f, +0.1230590f, -0.2951930f, +0.3505290f, +0.6531190f, +0.1712082f,
  -0.1871586f, +0.1791409f, +0.3564901f, +0.2189702f, -0.4372390f, -0.2064792f, +0.1048384f, +0.4544076f,
  -0.0203845f, -0.3748154f, -0.0660073f, -0.2129325f, -0.3576866f, +0.1958695f, +0.3727683f, -0.1216401f,
  +0.1119650f, -0.6035357f, +0.0004972f, +0.3028955f, +0.2398537f, +0.2333930f, +0.1349801f, +0.1634574f,
  +0.2580796f, -0.0439659f, +0.4437858f, +0.1220605f, -0.0134364f, -0.0244889f, -0.0700046f, +0.1371972f,
  -0.0503046f, +0.1142889f, -0.0422709f, -0.0223919f, +0.0706096f, +0.0154371f, +0.0175137f, -0.3168202f,
  -0.2244047f, -0.2181203f, +0.2320656f, +0.0718518f, +0.1284318f, -0.3393419f, +0.0900412f, +0.1187828f,
  -0.2402426f, +0.0756005f, -0.0983789f, +0.1480746f, +0.0452695f, -0.0204080f, +0.1971306f, -0.0275698f,
  +0.0034754f, +0.2142524f, -0.1387264f, +0.0112002f, +0.2255289f, -0.0791440f, -0.0986105f, +0.1640497f,
  +0.1971493f, +0.1657995f, -0.2539217f, -0.3661570f, +0.2509925f, +0.1707073f, +0.2388594f, -0.2993476f,
  -0.0535046f, +0.3246819f, -0.0281692f, +0.0245996f, +0.5411142f, +0.2247411f, +0.2260069f, -0.0739345f,
  -0.1994321f, -0.2678789f, +0.0662354f, -0.0394513f, +0.0510612f, +0.0836148f, +0.0831099f, -0.0755407f,
  +0.1932175f, -0.1115725f, -0.3953064f, +0.2183463f, -0.1808335f, +0.5568544f, +0.1041236f, -0.0137494f,
  -0.0322214f, +0.1923447f, -0.1852028f, -0.1080528f, +0.2623636f, +0.0942336f, -0.0526849f, +0.0304513f,
  -0.1076574f, +0.0591995f, -0.0926570f, -0.1010851f, -0.0040433f, +0.1190906f, -0.0376192f, +0.1100082f,
  -0.3260706f, +0.1460260f, -0.0820677f, -0.2940434f, -0.0611749f, -0.0492379f, -0.0128917f, +0.1648653f,
  -0.0255514f, +0.0169454f, +0.0825338f, +0.4465001f, +0.0529624f, +0.0953716f, -0.0203998f, +0.0245627f,
  +0.0482855f, +0.4760159f, -0.0343030f, -0.1832934f, -0.0121843f, -0.4234570f, -0.0470376f, +0.0650279f,
  -0.0189286f, +0.4397733f, +0.1194759f, -0.2572725f, +0.2803552f, -0.4625535f, -0.0154844f, -0.0195336f,
  +0.4976571f, +0.2401687f, +0.2909504f, +0.1784472f, -0.1670276f, -0.1702906f, -0.5489035f, +0.2239586f,
  +0.1095417f, +0.1097204f, -0.0972503f, -0.0525320f, -0.1363556f, -0.0760960f, -0.0822880f, +0.1024559f,
  +0.1055509f, +0.2095005f, +0.0913724f, -0.1823753f, -0.3423055f, -0.1784791f, -0.1894820f, -0.1168049f,
  -0.0848002f, +0.0821974f, -0.1903640f, +0.1118955f, -0.3874694f, -0.1125539f, -0.0396333f, -0.1199399f
);

const float biases[4] = float[4](
  +0.1228461f, -0.0362176f, -0.0672015f, -0.0442268f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer6 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.3192467f, -0.1681168f, -0.0727349f, -0.0305644f, -0.0900808f, +0.1257545f, -0.0906800f, -0.0828204f,
  -0.2904127f, +0.0128089f, +0.1242527f, -0.2579770f, -0.0955019f, -0.0319708f, +0.0052834f, -0.0200461f,
  -0.1458508f, +0.1241046f, -0.1701207f, -0.0038462f, +0.0974168f, -0.0825813f, +0.1203576f, +0.0081229f,
  -0.4070660f, -0.1381666f, -0.1029687f, +0.1621143f, -0.1840143f, +0.0115716f, -0.2433977f, +0.0436182f,
  -0.8259745f, -0.4458765f, +0.3708443f, +0.1238387f, -0.2006445f, -0.1149366f, -0.1753749f, -0.2741257f,
  -0.2069511f, -0.3028089f, +0.3268075f, +0.4045955f, +0.3027306f, +0.1209739f, +0.2954982f, +0.2739442f,
  -0.3951286f, -0.0543356f, +0.1806585f, +0.1948304f, -0.1933036f, -0.1002098f, +0.1684262f, +0.0976157f,
  -0.4188406f, -0.0884286f, +0.2068363f, -0.3190403f, -0.1951203f, -0.2168723f, +0.2547147f, -0.0658982f,
  -0.1538524f, -0.1059202f, +0.2004211f, +0.0994805f, -0.6244814f, +0.3254460f, +0.2089558f, +0.0295655f,
  -0.0325006f, +0.1009425f, -0.0052006f, +0.0963949f, +0.0178837f, -0.1236890f, -0.0271490f, -0.0316593f,
  +0.1415116f, -0.2497606f, +0.1120546f, +0.2595023f, +0.0832111f, +0.0644457f, +0.2595811f, -0.0645897f,
  -0.1421643f, -0.0886730f, +0.0899114f, -0.1118188f, +0.0536127f, +0.0525655f, +0.2664163f, +0.0145787f,
  +0.1639773f, +0.0310821f, -0.1405211f, -0.2475376f, +0.2084763f, +0.1832380f, +0.3428009f, +0.1848663f,
  +0.2727835f, +0.2202452f, -0.3220947f, -0.1932633f, -0.0410316f, +0.0923291f, -0.1355569f, -0.0515777f,
  -0.0265280f, -0.0443280f, -0.0954156f, -0.2741537f, +0.3894625f, -0.0066645f, +0.1466992f, -0.0313044f,
  -0.0862082f, -0.1680761f, -0.0745332f, -0.0115852f, +0.0852755f, +0.1984166f, +0.0177686f, +0.1962460f,
  +0.2027359f, +0.2431641f, +0.0123147f, +0.2751610f, +0.6701707f, +0.3443924f, -0.2661383f, +0.0623684f,
  -0.1036856f, -0.0438975f, -0.0163956f, -0.0830673f, +0.3948438f, +0.1397547f, +0.0760480f, +0.3517864f,
  -0.0490844f, +0.3595147f, -0.1288914f, -0.2442292f, +0.1125335f, -0.0159369f, +0.0051575f, -0.1997912f,
  +0.0642567f, +0.0050235f, -0.0294724f, -0.3317097f, -0.1269497f, +0.0033924f, -0.2441039f, -0.0068636f,
  +0.0302509f, +0.1788658f, -0.1849889f, +0.1283134f, -0.1741632f, -0.1441631f, -0.0540016f, +0.1624013f,
  +0.0409206f, +0.1524307f, -0.0515951f, +0.0582575f, -0.1409429f, -0.3668025f, -0.3653450f, +0.3869011f,
  +0.0795456f, -0.2744411f, +0.5306060f, -0.2090689f, -0.4399525f, -0.0374806f, -0.2616445f, -0.0036672f,
  -0.4828098f, +0.0463325f, -0.1651983f, -0.2611191f, +0.2234076f, -0.1474932f, +0.3151890f, -0.1600693f,
  -0.1194274f, +0.2189230f, -0.1532639f, -0.0602351f, +0.0793913f, -0.2304379f, +0.0132368f, -0.3350993f,
  +0.0660893f, +0.2215294f, +0.0251051f, +0.0080646f, +0.4218555f, -0.3635567f, +0.2159118f, +0.1215645f,
  -0.0252868f, -0.2367524f, -0.2841141f, -0.0295258f, +0.3984138f, +0.1428020f, -0.0384857f, +0.2819762f,
  +0.0810997f, +0.2732373f, +0.0351259f, +0.1788543f, +0.1849039f, -0.0529112f, +0.2348010f, -0.1069281f,
  +0.0379677f, -0.1388369f, +0.1853693f, +0.1292136f, -0.0617258f, +0.1830293f, +0.3346717f, -0.0289009f,
  -0.0663925f, +0.1232141f, +0.0485878f, -0.2250201f, -0.2627361f, +0.1529025f, +0.0581644f, +0.0262037f,
  -0.4389887f, +0.1221926f, +0.0655484f, +0.5949716f, +0.1250094f, -0.2991687f, +0.1026392f, +0.2768889f,
  -0.4132540f, +0.5064016f, +0.6208186f, +0.0609975f, +0.2056824f, -0.4064444f, +0.3183468f, +0.3708650f,
  +0.0843569f, +0.2069332f, +0.1837246f, +0.2011512f, -0.1190527f, -0.2589585f, +0.0775234f, +0.0890821f,
  -0.1712545f, +0.1030197f, +0.2909712f, +0.1416098f, +0.7321237f, -0.4797948f, +0.1038626f, -0.1236231f,
  -0.0691251f, +0.1119888f, +0.3767359f, +0.0902406f, +0.3917319f, -0.1132286f, +0.1946565f, +0.3412976f,
  -0.1955776f, -0.3582235f, +0.2696404f, -0.1816243f, +0.2261182f, +0.0207858f, +0.1291548f, +0.0861362f
);

const float biases[4] = float[4](
  -0.0318285f, -0.0856933f, -0.0301960f, -0.0090432f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer7 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1051985f, +0.1835533f, -0.0996531f, -0.0009740f, -0.1594385f, +0.2302057f, +0.0884212f, -0.0935744f,
  -0.0775214f, +0.0512843f, -0.1263844f, -0.0581133f, -0.1188910f, -0.3484925f, -0.3547067f, -0.1113977f,
  -0.0058172f, +0.0731073f, -0.1243765f, -0.2247981f, +0.0136948f, -0.1890600f, -0.0938988f, +0.0776745f,
  +0.0829767f, -0.2542480f, +0.1647003f, +0.3400889f, -0.1759406f, -0.0914075f, -0.0882481f, +0.1895764f,
  +0.2931709f, -0.0055241f, +0.0236752f, +0.1888267f, -0.2233666f, +0.0243222f, +0.5315356f, +0.1184814f,
  -0.0347532f, -0.1556163f, +0.0873746f, -0.1308199f, -0.3948759f, +0.1331641f, -0.0020942f, -0.5877391f,
  +0.1752664f, -0.0568827f, -0.3940944f, -0.4749727f, -0.1663090f, +0.1426741f, +0.1231554f, -0.2794526f,
  -0.0550111f, -0.2744257f, +0.3228750f, -0.5674822f, +0.2694459f, -0.2503220f, +0.3272943f, -0.9784198f,
  +0.1568990f, -0.1689364f, +0.0392022f, -0.1866573f, +0.2035464f, -0.2628699f, -0.0275796f, -0.6966500f,
  +0.1461673f, -0.3557995f, -0.2592578f, +0.0807346f, -0.2808858f, -0.0566693f, +0.0093520f, -0.1550355f,
  +0.4283559f, +0.0300992f, -0.0294293f, -0.1128952f, -0.4728136f, -0.1224109f, +0.5790953f, +0.0239556f,
  +0.1474410f, -0.1417812f, -0.0559421f, +0.1666094f, -0.2604832f, -0.0030767f, +0.0826971f, -0.0292718f,
  +0.0510833f, -0.1678426f, -0.1305541f, +0.4807994f, -0.2966857f, +0.0716380f, -0.4298003f, -0.2342002f,
  -0.5208068f, -0.6184161f, -0.0879209f, +0.0996055f, -0.7537099f, +0.0441787f, -0.2483273f, -0.3470676f,
  -0.1423388f, -0.3432554f, +0.3694838f, -0.1192251f, +0.1531466f, -0.2378684f, -0.0252188f, -0.1628042f,
  +0.3864886f, -0.2240686f, +0.2250402f, +0.3175071f, -0.0204257f, -0.0467101f, -0.2243396f, +0.3366788f,
  +0.0165055f, +0.3766150f, -0.0969240f, -0.0310108f, -0.2722331f, -0.0951908f, +0.4114367f, -0.2088756f,
  -0.2078678f, -0.0571769f, -0.0748773f, -0.0176445f, -0.4034503f, +0.0838714f, -0.3824051f, -0.1260760f,
  +0.3360779f, -0.2069101f, -0.1970032f, -0.0780212f, -0.1395832f, +0.2616469f, +0.2285980f, +0.0520904f,
  +0.1612085f, -0.0651760f, +0.1196269f, +0.3088543f, -0.3786850f, +0.0037657f, +0.4380806f, -0.0614635f,
  +0.3127244f, -0.0252408f, -0.0867235f, +0.0020937f, -0.0824181f, +0.0207384f, +0.1248417f, -0.1906787f,
  -0.2525303f, +0.1685370f, +0.2749007f, -0.3027308f, -0.1916821f, +0.0167347f, -0.1675001f, +0.1591162f,
  -0.3719955f, -0.4008646f, -0.2204947f, +0.0591573f, +0.0840503f, -0.0976806f, -0.1875947f, -0.2300530f,
  +0.1280973f, -0.1793537f, +0.0404388f, +0.3150785f, +0.1158675f, +0.0313166f, +0.2715636f, -0.2402674f,
  -0.1505154f, -0.1534784f, -0.0274006f, +0.1668350f, +0.2638964f, -0.1594996f, +0.1345823f, -0.1502042f,
  +0.0693258f, +0.1182321f, +0.0967119f, -0.3506520f, +0.0765884f, +0.3133528f, +0.7694977f, -0.3730072f,
  +0.1305660f, +0.0402955f, +0.1713171f, +0.0689261f, +0.1652362f, -0.2918760f, +0.1662925f, -0.0892972f,
  -0.0376692f, +0.1497504f, +0.2414908f, +0.0081923f, -0.0427562f, -0.1640289f, -0.1212537f, -0.0517719f,
  -0.2275994f, +0.1372251f, -0.1306866f, +0.1071310f, +0.0422114f, -0.1125901f, -0.3632274f, -0.1493103f,
  +0.0191121f, -0.1160885f, -0.0305889f, -0.0755636f, -0.1608297f, -0.1112451f, -0.1535099f, -0.1330978f,
  +0.3706535f, -0.0938680f, -0.2794530f, -0.0919156f, -0.1465855f, +0.1209582f, +0.2222308f, -0.0297737f,
  -0.1597553f, +0.0936091f, -0.1386963f, +0.1024556f, +0.0474563f, +0.0196987f, -0.1479028f, +0.5216355f,
  -0.0691311f, -0.2114469f, -0.0426628f, -0.0650288f, +0.0907371f, -0.4402279f, -0.2339028f, +0.1124640f,
  +0.0841218f, +0.0436744f, -0.0769878f, -0.1194334f, +0.1037926f, -0.2345088f, -0.0404299f, -0.1732983f,
  +0.2215538f, -0.1365738f, +0.0890399f, +0.1505459f, +0.4194078f, -0.0641014f, -0.2075351f, -0.2359327f,
  +0.1824136f, +0.0872410f, +0.0361047f, -0.1122265f, -0.0031948f, +0.1297435f, -0.2112309f, +0.1232249f
);

const float biases[4] = float[4](
  -0.0560319f, -0.1154870f, +0.1913996f, +0.2255459f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer7 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0770344f, -0.1315893f, +0.1892497f, +0.0340435f, -0.0259670f, -0.0743537f, +0.1597048f, -0.1036507f,
  -0.0213012f, -0.1477309f, -0.0963345f, +0.0989624f, +0.1349314f, -0.0456253f, -0.0888599f, +0.1517272f,
  +0.2210981f, -0.0396357f, +0.3360525f, -0.0445678f, +0.0421303f, +0.1212988f, +0.4136320f, -0.3880402f,
  +0.0543071f, +0.1085557f, -0.0440927f, +0.0277720f, -0.1516059f, -0.1028001f, -0.1507417f, -0.0540632f,
  +0.3622128f, -0.3961252f, +0.7710168f, +0.1790615f, -0.3823451f, -0.5214444f, +0.0723105f, -0.2152190f,
  -0.0500445f, -0.2221251f, +0.3917153f, -0.5323977f, -0.5475444f, -0.7003577f, -0.1345507f, -0.3223026f,
  -0.0670787f, -0.2052264f, +0.0735346f, -0.1672314f, +0.1578778f, +0.0565681f, +0.0586611f, -0.1010157f,
  -0.0304834f, +0.4035403f, +0.2985554f, -0.2122762f, +0.3355948f, -0.2657762f, +0.0221162f, -0.1427590f,
  -0.2678227f, -0.1729971f, +0.4481679f, -0.1635782f, +0.3621982f, -0.5443731f, +0.3302358f, -0.6282127f,
  -0.0450852f, +0.0298619f, +0.2228282f, -0.1842623f, +0.0495798f, -0.0263918f, +0.3629643f, -0.0909170f,
  -0.0370442f, -0.0984284f, -0.1456044f, -0.1706307f, +0.0315113f, -0.1107328f, -0.0467827f, +0.0711911f,
  -0.1057882f, -0.0989410f, +0.0560911f, -0.1009109f, +0.1502682f, +0.0626275f, +0.0608705f, +0.1687899f,
  -0.0123787f, +0.0980668f, -0.0008548f, +0.0613603f, -0.1549103f, -0.0497727f, -0.1542613f, +0.2821750f,
  +0.1681852f, -0.2569058f, +0.0466419f, +0.4065775f, -0.0390947f, -0.0851013f, -0.1106920f, +0.5779149f,
  -0.1097890f, -0.1593337f, -0.3491571f, +0.6038295f, -0.1661235f, +0.1567762f, +0.6306698f, +0.2698615f,
  +0.0740552f, -0.0824829f, -0.3495699f, -0.0391037f, -0.0288632f, +0.0344806f, +0.2604075f, -0.1673832f,
  -0.2173666f, -0.1789100f, -0.1061194f, +0.2707804f, -0.1202711f, +0.2183053f, +0.2852494f, -0.1725693f,
  +0.1932548f, +0.0303964f, +0.3351323f, +0.3912314f, +0.2980340f, -0.1419193f, +0.0982002f, +0.2144080f,
  -0.3708625f, +0.3871456f, +0.1426234f, -0.1480105f, -0.0587135f, +0.0155185f, -0.3384626f, -0.1413508f,
  -0.1769671f, +0.3310058f, -0.0260861f, +0.0743161f, +0.0589618f, +0.0116367f, -0.6309167f, +0.0205016f,
  -0.0897591f, +0.4264639f, +0.2805597f, -0.0397303f, +0.1942438f, -0.1748698f, -0.1862203f, -0.0111604f,
  +0.1960925f, +0.2437286f, -0.3595325f, +0.1353599f, +0.1542054f, +0.1250462f, +0.6169361f, +0.2941104f,
  +0.1284184f, +0.2586748f, +0.1119643f, +0.0923873f, +0.4123259f, -0.0017578f, +0.4870131f, -0.5629407f,
  +0.3561624f, -0.0301286f, +0.0980496f, -0.2412993f, +0.3298068f, -0.0605089f, -0.0598992f, -0.1139745f,
  +0.0348130f, +0.2852311f, -0.1890850f, -0.2223835f, +0.1991908f, +0.5723027f, +0.2995878f, +0.0243812f,
  +0.0031785f, +0.1083697f, +0.2182051f, +0.0765995f, -0.0112355f, -0.2230091f, +0.1691911f, +0.0353622f,
  -0.1754437f, +0.1011721f, +0.0779615f, +0.1192723f, -0.0120235f, -0.0818567f, -0.1991126f, +0.1559670f,
  +0.0058856f, +0.1444610f, -0.0598047f, +0.1044179f, +0.1775858f, -0.2698702f, +0.0479577f, -0.3984226f,
  -0.1811522f, -0.0941545f, -0.0484426f, +0.0104595f, +0.2697896f, +0.0039341f, -0.3240669f, -0.2124853f,
  +0.2301686f, -0.1196803f, -0.0114416f, +0.1420604f, +0.1674030f, -0.1043319f, -0.0186401f, -0.0331201f,
  +0.2811401f, -0.0395609f, -0.3734389f, -0.5476992f, -0.4193099f, +0.1385629f, -0.2552412f, +0.0848735f,
  -0.1284199f, -0.2240325f, +0.1296177f, -0.3166898f, +0.0095304f, +0.0990157f, -0.2044490f, +0.2623042f,
  -0.0271405f, +0.1420075f, +0.1254101f, -0.1542198f, +0.1123740f, -0.1234402f, +0.2811894f, -0.5393863f,
  +0.1594776f, +0.1641438f, -0.2041401f, +0.3021154f, -0.0851249f, -0.0092779f, +0.1561432f, +0.2353651f,
  -0.1529052f, +0.2623977f, -0.0221094f, +0.3493272f, -0.0195017f, +0.1023297f, -0.2198142f, +0.4219419f,
  -0.2488625f, +0.1166328f, -0.1042644f, -0.3692900f, -0.1905077f, +0.0174153f, -0.1155309f, -0.0230726f
);

const float biases[4] = float[4](
  -0.4763274f, +0.0428177f, +0.0068805f, +0.0577128f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer8 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2484981f, +0.0642771f, -0.0233257f, -0.5438422f, -0.1769106f, -0.1425177f, -0.0332923f, +0.1239365f,
  +0.3100283f, +0.4984534f, -0.3026665f, +0.1283539f, +0.1353240f, -0.0449704f, +0.3237286f, +0.0689667f,
  +0.2399371f, +0.1643365f, +0.1776897f, +0.0271374f, +0.1094049f, +0.0696143f, -0.3451950f, +0.0144664f,
  -0.6564826f, +0.3823917f, +0.0410464f, -0.3441658f, -0.1557963f, +0.4495848f, -0.3184960f, +0.0986559f,
  -0.3706300f, +0.4452308f, +0.0777018f, -0.1471259f, +0.1113066f, +0.2235060f, -0.1657013f, +0.1285643f,
  -0.1017644f, +0.1195989f, +0.0459150f, -0.0535931f, +0.2462553f, +0.0182304f, -0.2658953f, +0.1822994f,
  -0.1136417f, -0.0318510f, +0.0770814f, -0.0960626f, -0.3900605f, +0.0281248f, -0.1691307f, -0.1321697f,
  -0.1779010f, +0.0010714f, -0.0245048f, -0.2527455f, -0.0678166f, +0.0281644f, -0.3063241f, -0.2112712f,
  -0.1349030f, -0.0280571f, -0.0697677f, +0.0956174f, -0.0563337f, +0.0065238f, -0.0415744f, -0.0252715f,
  -0.0744202f, -0.0536215f, +0.5622450f, -0.0269530f, -0.0491399f, -0.4027065f, +0.2245215f, -0.0290201f,
  -0.2260441f, +0.0330935f, +0.1594850f, +0.4687462f, +0.1881419f, -0.3217500f, +0.2678804f, -0.4315587f,
  +0.2546393f, +0.1189602f, +0.0598927f, -0.3272612f, +0.0045114f, +0.1100884f, +0.1785039f, -0.1882318f,
  -0.4105611f, -0.0192204f, +0.3744926f, +0.0356725f, +0.2522858f, -0.0721692f, +0.1521777f, +0.1613560f,
  -0.4022965f, -0.0426479f, +0.1166537f, +0.1071117f, -0.0245460f, -0.6307086f, +0.3433924f, -0.6471087f,
  -0.5422065f, +0.1132643f, -0.0895968f, +0.1877183f, -0.1778297f, +0.0190845f, +0.1896507f, -0.0258041f,
  +0.3662683f, -0.0083043f, +0.0609991f, +0.0773402f, +0.1825645f, -0.1411157f, -0.0477718f, +0.0890583f,
  +0.3844598f, +0.1478482f, +0.3754381f, -0.4038498f, -0.0901636f, -0.4895496f, +0.2455683f, -0.4276046f,
  +0.0612578f, +0.3115800f, +0.3021808f, -0.1183641f, +0.1112507f, -0.1717011f, +0.4926313f, -0.0082082f,
  +0.0731796f, +0.0211482f, -0.0478281f, +0.0422755f, -0.0713689f, -0.1879049f, +0.0503597f, +0.0588608f,
  -0.1077598f, +0.0547546f, -0.0098923f, -0.1846357f, -0.2476564f, +0.0763035f, +0.2277235f, +0.1652454f,
  -0.1920744f, +0.5642279f, -0.1809041f, -0.0282136f, -0.2220093f, +0.0574734f, +0.1773218f, +0.0809619f,
  -0.3007370f, +0.2950489f, +0.0330646f, -0.0338990f, +0.0874123f, -0.2038648f, -0.1728900f, -0.0356719f,
  -0.3392841f, -0.1285622f, -0.2801747f, +0.1504667f, +0.2518521f, -0.4244926f, -0.0830411f, -0.1027598f,
  -0.1902170f, -0.2988760f, +0.1180948f, -0.0990871f, -0.0168450f, -0.1517141f, +0.1656733f, -0.0119911f,
  -0.3042180f, -0.0947149f, +0.0150171f, -0.0192847f, +0.0371125f, -0.0012539f, -0.1262458f, -0.2095761f,
  +0.0743173f, +0.1814483f, +0.3641112f, +0.0661826f, +0.4396060f, -0.1206134f, -0.1682236f, +0.0199763f,
  +0.0072788f, -0.0901649f, +0.3222539f, -0.1227763f, -0.1083898f, +0.1328612f, +0.1110050f, +0.2212303f,
  -0.2085755f, +0.1701405f, +0.0822998f, +0.1952005f, -0.0903677f, +0.3173861f, -0.1844800f, +0.0967943f,
  +0.0407518f, -0.1035748f, +0.4631487f, -0.1739231f, +0.0735745f, +0.0802479f, -0.0001787f, +0.2292907f,
  -0.1795262f, -0.4611013f, -0.0516102f, -0.1409646f, -0.0374293f, -0.0669989f, -0.0895269f, -0.1200441f,
  -0.0692502f, -0.1736834f, +0.0378101f, -0.2426496f, +0.3456940f, +0.2824919f, -0.0133574f, -0.0348563f,
  +0.2704570f, +0.0463330f, -0.6936405f, -0.0270806f, +0.7456789f, +0.2788820f, +0.1917326f, +0.1109365f,
  -0.0188891f, +0.1877352f, +0.5028902f, -0.1885520f, -0.0684460f, +0.0448026f, -0.0434898f, -0.2043811f,
  +0.0403454f, +0.2154204f, -0.3098937f, +0.1949667f, +0.0285216f, -0.0119868f, +0.0575609f, -0.2281879f,
  -0.0132767f, -0.0060538f, -0.0160666f, +0.1130810f, -0.0821185f, +0.2256847f, -0.0899997f, -0.0910118f,
  +0.0065800f, -0.1187419f, +0.0725014f, -0.2449919f, -0.0865166f, -0.0808132f, -0.1486845f, -0.1811746f
);

const float biases[4] = float[4](
  -0.0237788f, -0.0172037f, -0.0197851f, -0.0939023f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer8 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1227873f, +0.0068012f, -0.0068574f, +0.0860523f, -0.3046873f, +0.0883404f, -0.0281479f, +0.1493925f,
  -0.1198905f, +0.0688083f, +0.0607554f, +0.2077698f, -0.2222087f, +0.1127968f, -0.0604706f, -0.0248019f,
  -0.2475407f, +0.1571041f, +0.0498867f, -0.3355135f, -0.3700642f, -0.0077526f, +0.0366928f, -0.0820381f,
  -0.4046242f, +0.3007248f, -0.1468053f, +0.1058701f, +0.4549816f, +0.2154396f, -0.0718158f, +0.0282011f,
  -0.0493549f, +0.3639346f, +0.0935731f, -0.0171021f, +0.4069133f, +0.0757661f, +0.4601018f, -0.1164691f,
  -0.0193493f, -0.0500108f, +0.2348401f, +0.1728584f, -0.4105809f, -0.5038049f, +0.3199970f, +0.2206573f,
  +0.0948422f, +0.0407234f, +0.2100895f, -0.0647389f, +0.0620161f, +0.0666665f, -0.3468957f, -0.1987439f,
  +0.3790636f, +0.2760280f, +0.1820795f, -0.3284078f, +0.2446542f, -0.0353804f, +0.0745069f, -0.0105210f,
  -0.0153438f, -0.1507394f, +0.2388704f, -0.1999812f, -0.2939774f, -0.1117485f, -0.1553015f, +0.1597777f,
  +0.1132119f, -0.0573548f, +0.1228217f, -0.1935452f, +0.1814953f, +0.1387821f, +0.0801241f, -0.0794382f,
  -0.0736234f, -0.0496230f, -0.1736847f, -0.0659350f, +0.1595137f, -0.0367623f, +0.1915846f, -0.1412365f,
  +0.0354434f, +0.2021759f, +0.0132794f, +0.2023954f, +0.0115361f, -0.0866197f, +0.1241305f, +0.0981509f,
  -0.0693269f, +0.3251868f, +0.0569641f, +0.4008010f, -0.5713309f, -0.1810476f, +0.0356256f, -0.0665603f,
  -0.0658698f, -0.1885235f, +0.0973094f, -0.0202461f, -0.2031583f, -0.0663650f, -0.1197646f, -0.0535697f,
  -0.2903302f, -0.4208594f, -0.1497548f, +0.0823645f, -0.0780891f, -0.0873743f, +0.0518689f, +0.0305424f,
  -0.0461865f, +0.1424826f, -0.0052420f, +0.2257472f, +0.2456909f, -0.0133442f, +0.2592589f, +0.1463759f,
  +0.0383878f, +0.2153838f, +0.0887688f, -0.0722601f, -0.0321580f, +0.0298927f, -0.0860134f, +0.1861014f,
  -0.1971310f, -0.2434163f, -0.0183878f, +0.2170949f, +0.2022552f, +0.1906901f, +0.0460289f, +0.3794986f,
  -0.3078371f, +0.2988103f, -0.2876210f, +0.3664213f, -0.8021374f, -0.1281865f, -0.1700926f, -0.0573896f,
  -0.0773096f, -0.1086530f, +0.3853821f, -0.2160943f, -0.6102751f, -0.2377561f, -0.5873494f, +0.2880802f,
  -0.0541844f, +0.1094180f, -0.1173074f, -0.0568930f, -0.0093743f, +0.1218585f, -0.1377841f, +0.2290327f,
  +0.2102458f, -0.0451289f, +0.1823634f, -0.0930837f, -0.0788031f, -0.0987795f, +0.1084923f, -0.4526280f,
  +0.3755794f, +0.0448737f, -0.1659611f, +0.2900964f, -0.6026356f, -0.2147935f, -0.1387186f, -0.3270286f,
  +0.2214202f, +0.9634210f, -0.4563332f, -0.0702118f, +0.3346027f, +0.3001291f, +0.0206328f, -0.1981754f,
  -0.1070282f, +0.0799199f, +0.1623510f, -0.2008784f, -0.2722043f, -0.0386323f, -0.3346608f, -0.1518286f,
  +0.4006787f, -0.3260473f, -0.0826559f, +0.1078410f, +0.0958258f, +0.1550739f, -0.3483438f, +0.1235989f,
  +0.1421426f, +0.1298358f, +0.0095389f, +0.1055291f, +0.1546197f, +0.0104271f, -0.1576537f, -0.3522640f,
  +0.1843763f, -0.2057432f, +0.2037743f, -0.1599107f, +0.5047057f, +0.1931344f, +0.2250449f, -0.1490614f,
  +0.0729003f, +0.1077890f, +0.0162982f, +0.0012195f, +0.0571837f, +0.0569563f, +0.1073641f, -0.3612719f,
  +0.0782196f, +0.0477362f, -0.2536408f, -0.0237190f, +0.3005608f, +0.1822133f, +0.2092413f, -0.0579130f,
  +0.4719408f, +0.2713619f, +0.2136064f, +0.0711108f, -0.3224057f, -0.0526383f, +0.2598400f, +0.0038471f,
  -0.0639071f, +0.9745914f, -0.0325274f, -0.0622561f, -0.1342414f, +0.1362519f, +0.0471340f, -0.1449639f,
  +0.1474062f, +0.2057362f, -0.3534080f, -0.1491920f, +0.0018061f, +0.2696244f, +0.1571577f, +0.0805247f,
  -0.0854543f, -0.2232458f, +0.0451791f, -0.0449479f, -0.0176499f, -0.0866769f, +0.1618641f, +0.1815024f,
  +0.0279167f, -0.1072411f, +0.0395844f, -0.2991660f, -0.2032715f, -0.0887320f, +0.1446667f, +0.1445894f,
  +0.0222035f, +0.0055462f, -0.0779376f, -0.0392473f, +0.1858801f, +0.0882438f, +0.0416080f, +0.2899644f
);

const float biases[4] = float[4](
  +0.0356766f, -0.0826603f, +0.0173988f, +0.0564711f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer9 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0140241f, -0.0974641f, -0.0857793f, +0.0741353f, -0.2127580f, +0.3724379f, +0.1768835f, -0.1947655f,
  -0.1337768f, +0.3839755f, +0.2814095f, +0.5304556f, -0.2373442f, +0.0358860f, +0.5264220f, -0.3097083f,
  +0.0223803f, -0.0902930f, +0.3065208f, +0.2516155f, +0.2571103f, -0.1609969f, +0.0546288f, -0.3381788f,
  +0.1482196f, -0.3517961f, +0.2120451f, +0.1664641f, +0.1581675f, -0.2083274f, -0.0832219f, -0.1195038f,
  +0.5692554f, -0.4893823f, +0.2012464f, -0.5225568f, +0.3748849f, +0.0067509f, -0.5824801f, -0.2054175f,
  +0.2931595f, -0.1361785f, +0.2616679f, -0.1634533f, -0.0027718f, -0.0033984f, -0.0203575f, -0.0308259f,
  -0.1125926f, -0.0196362f, +0.3151345f, +0.1547388f, +0.2810052f, -0.1455721f, -0.3409825f, -0.0665596f,
  +0.1256579f, -0.0983268f, +0.2628775f, +0.1072518f, +0.0675911f, -0.1092971f, +0.2486962f, +0.2039356f,
  +0.2939851f, -0.1924197f, +0.1127788f, +0.3122694f, +0.2994205f, +0.0775554f, -0.1451608f, -0.1840389f,
  -0.0721940f, -0.1948495f, +0.2292915f, +0.0631266f, +0.2236622f, +0.1262390f, -0.1644068f, -0.0107495f,
  +0.1018859f, +0.0121160f, +0.2075741f, -0.0565084f, -0.0313490f, +0.3091709f, +0.3649540f, +0.1121173f,
  +0.1810298f, -0.0110848f, +0.0608222f, +0.1613782f, -0.0295497f, +0.1617167f, +0.1028651f, -0.3800355f,
  +0.0053918f, -0.2396461f, -0.2919286f, -0.1074100f, -0.0058846f, -0.1728581f, +0.3690938f, -0.4406684f,
  +0.1732658f, +0.3487292f, -0.0364307f, -0.2222482f, +0.0471201f, -0.1547753f, +0.3070093f, +0.4553547f,
  -0.5064406f, -0.5599999f, -0.1981079f, +0.0363743f, -0.0254961f, -0.5631929f, -0.2851906f, -0.9960667f,
  +0.0867906f, +0.1426292f, +0.0762362f, -0.0588146f, -0.1762063f, -0.0034776f, -0.1276951f, -0.1569057f,
  -0.0631832f, +0.4314836f, +0.0463375f, -0.4331408f, -0.1024199f, +0.0568426f, -0.1600845f, -0.0027109f,
  +0.4038182f, -0.1180145f, +0.1727968f, +0.1504233f, +0.3520159f, -0.1008999f, +0.0456030f, -0.0142665f,
  +0.2965741f, +0.1050677f, +0.2698068f, +0.1553324f, -0.2414624f, -0.0996484f, +0.2092229f, +0.1149956f,
  +0.2597795f, -0.4393657f, +0.0566013f, -0.0635257f, -0.0082115f, -0.3354063f, -0.0527756f, +0.2235754f,
  +0.1472231f, -0.1399745f, +0.4022210f, -0.1000264f, -0.0644185f, -0.1500076f, +0.0536441f, -0.0295345f,
  -0.4025734f, -0.0985559f, -0.0015900f, +0.0931419f, +0.4978810f, -0.0544758f, -0.1731386f, -0.1346813f,
  -0.2884345f, -0.1343047f, -0.6623977f, +0.5182171f, -0.3013257f, -0.0759514f, +0.6272138f, -0.8261539f,
  -0.7704461f, -0.5991416f, -0.3970172f, +0.3246318f, +0.1791688f, -0.1276985f, +1.0359949f, -0.0448406f,
  +0.1812376f, -0.1431437f, +0.1509649f, +0.0341078f, -0.0339771f, -0.0175085f, -0.1762731f, +0.1423609f,
  +0.2585036f, +0.0573768f, +0.1402396f, +0.3501415f, -0.0710948f, +0.2751805f, -0.1723969f, +0.1693430f,
  +0.1518996f, +0.4534079f, -0.0309799f, +0.3107797f, -0.0669840f, +0.0076302f, -0.4162994f, +0.3219309f,
  +0.2567439f, +0.1990424f, +0.1325606f, -0.0804870f, -0.0855343f, -0.0196017f, +0.3361038f, +0.1901881f,
  -0.0932897f, +0.0970988f, -0.1082966f, -0.1551341f, +0.2660369f, -0.3226565f, -0.6140713f, +0.4555636f,
  +0.1564453f, +0.0319537f, +0.2800404f, -0.3193367f, +0.4990121f, -0.1396046f, +0.1785949f, +0.1873431f,
  -0.1618963f, +0.0652336f, +0.0021853f, +0.0548273f, +0.0748327f, -0.0144387f, -0.2470606f, -0.0787729f,
  -0.2197747f, -0.1077598f, -0.3805337f, +0.6697263f, +0.6895394f, -0.2287992f, +0.9312787f, -0.0186014f,
  +0.3046453f, +0.4393937f, -0.2685083f, +0.2243491f, +0.3658733f, +0.0328875f, +0.5841032f, +0.4448950f,
  -0.0587448f, +0.0680418f, -0.1009816f, -0.1486519f, +0.0564445f, -0.0826208f, +0.1717090f, +0.0170430f,
  -0.0527598f, +0.0906248f, -0.0450120f, +0.1374193f, -0.1887523f, +0.0091324f, +0.1218144f, -0.1168655f,
  +0.2745848f, +0.4014767f, -0.1496561f, +0.0843337f, -0.0194499f, +0.1731528f, -0.3221816f, +0.3016543f
);

const float biases[4] = float[4](
  -0.1401590f, -0.0300454f, -0.1029390f, +0.0335527f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer9 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1455081f, +0.0356607f, +0.2607764f, +0.3069764f, -0.1094580f, +0.0123366f, +0.0451675f, +0.0744750f,
  -0.1125079f, -0.1734026f, -0.2860408f, -0.0242188f, -0.3158277f, +0.0111824f, -0.7112070f, -0.5364194f,
  -0.5325550f, -0.2302274f, -0.2852439f, -0.3054686f, -0.2217587f, -0.1485783f, -0.2701201f, +0.0659266f,
  +0.2826198f, -0.0709142f, -0.1214287f, +0.1508210f, -0.0134895f, +0.0840384f, +0.0249769f, +0.1038494f,
  +0.5132096f, -0.4988339f, -0.6554744f, -0.2870153f, +0.2361854f, -0.6207520f, +0.0954149f, +0.1611047f,
  +0.0280735f, -0.0206807f, +0.2469245f, -0.1057579f, +0.0897736f, -0.1411454f, +0.4772089f, +0.0327461f,
  -0.2226719f, +0.1143147f, -0.0612370f, -0.1404639f, +0.0065693f, -0.1065354f, -0.4702109f, -0.1036213f,
  -0.3158279f, -0.3368836f, +0.2812667f, -0.1113863f, -0.0135964f, +0.2718595f, -0.3928874f, -0.1944851f,
  +0.0823542f, +0.1441944f, -0.2295663f, -0.0118436f, +0.0545273f, +0.1632641f, -0.5069160f, -0.4683958f,
  -0.1290191f, +0.0538739f, +0.0191582f, +0.0109088f, +0.0790840f, -0.0616801f, -0.1003574f, +0.1671131f,
  +0.1306745f, -0.2544637f, +0.0282237f, -0.2179267f, -0.2817839f, -0.1807427f, -0.1453894f, -0.4711044f,
  +0.0543806f, +0.2380740f, +0.0523020f, +0.0702312f, -0.2238437f, -0.1092549f, +0.1636456f, +0.6188756f,
  -0.4054683f, -0.0129223f, -0.0111863f, +0.0311822f, +0.5471435f, +0.2534995f, -0.3428205f, +0.1410790f,
  -0.0741604f, +0.2972670f, +0.3695551f, +0.5173265f, +0.0827999f, +0.1028010f, -0.1053869f, -0.3600096f,
  -0.5643039f, -0.4656562f, +0.0871726f, -0.4093994f, -0.6789920f, +0.0019630f, -0.4844996f, -0.0566617f,
  +0.0244995f, -0.2072435f, -0.4231046f, +0.1499625f, +0.0601052f, +0.2508118f, -0.1596061f, +0.3871661f,
  +0.1309424f, +0.1026136f, +0.0517231f, +0.4509573f, +0.4048822f, +0.1989425f, -0.1256031f, +0.1549501f,
  -0.6191926f, -0.0014263f, -0.0280570f, -0.3013808f, -0.3512461f, -0.0270802f, +0.3169636f, -0.1752617f,
  -0.3538736f, +0.1884853f, +0.3361183f, +0.1275571f, -0.0674332f, +0.0200570f, -0.3023981f, +0.2053299f,
  -0.0279542f, -0.3127308f, -0.0544913f, -0.1425510f, +0.3054138f, +0.0744812f, -0.1998811f, -0.2030028f,
  -0.1735808f, -0.1652023f, -0.1831217f, +0.0397166f, +0.2850239f, -0.1457298f, -0.1091221f, +0.3281340f,
  -0.0174028f, +0.0047226f, -0.1450305f, -0.0788506f, +0.3560901f, -0.0505465f, +0.2274043f, +0.4965845f,
  -0.2275949f, -0.4114604f, -0.4529893f, -0.4795616f, +0.9878345f, -0.0256092f, -0.0561240f, +0.0109144f,
  +0.5494704f, -0.0560453f, +0.1390474f, +0.1321657f, +0.5449891f, -0.0741714f, +0.5228598f, +0.5602556f,
  -0.1386236f, +0.0917807f, +0.1312709f, -0.0134658f, -0.0466381f, -0.1181143f, +0.0367584f, +0.1649177f,
  -0.3404579f, -0.1044535f, +0.1897451f, -0.1604717f, -0.0573242f, +0.0611259f, -0.4456487f, -0.3015302f,
  -0.0296159f, -0.2969121f, +0.2534064f, +0.1857607f, +0.2869753f, +0.1390030f, -0.0676174f, +0.2662509f,
  +0.0444730f, -0.0094612f, -0.1632654f, -0.1807784f, +0.0972843f, +0.0760956f, +0.0276930f, +0.1117873f,
  -0.0737173f, +0.3093495f, +0.0718179f, -0.0131896f, -0.5795569f, -0.2075753f, -0.3546275f, -0.2777442f,
  -0.0927529f, +0.1264056f, +0.0346449f, -0.0322924f, +0.2177498f, -0.0493434f, -0.0754685f, +0.1666294f,
  -0.0628400f, -0.4781850f, -0.4451627f, -0.1947967f, +0.0693737f, -0.0801111f, +0.0186742f, +0.1558448f,
  -0.6433764f, +0.0253356f, -0.2288876f, -0.0548637f, -0.0979772f, +0.1835565f, -0.0367811f, +0.1654418f,
  +0.0213609f, +0.0124409f, -0.2047397f, +0.0308454f, -0.3637862f, +0.1880308f, -0.1867653f, +0.2637931f,
  +0.0565404f, +0.2313479f, +0.1274003f, -0.2813862f, -0.2434611f, -0.0231944f, +0.0044033f, +0.1790560f,
  +0.2578473f, -0.1650580f, +0.0215140f, +0.2492074f, -0.1765037f, +0.2178729f, -0.1688576f, +0.0378873f,
  +0.1614886f, -0.0532867f, -0.1852051f, +0.2779759f, +0.1646477f, -0.0151632f, -0.0296077f, +0.0846202f
);

const float biases[4] = float[4](
  -0.0370211f, +0.0333572f, +0.0322582f, +0.0907173f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer10 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0775852f, +0.2269983f, +0.4712480f, -0.3697541f, +0.2202233f, +0.0584589f, -0.1258800f, -0.2056398f,
  -0.1331985f, +0.1821124f, +0.0762342f, -0.0132011f, -0.2690697f, -0.1686422f, +0.2205383f, -0.1789821f,
  -0.2459470f, +0.0699540f, +0.0437066f, +0.0519168f, -0.1955476f, +0.0210558f, +0.2378659f, +0.0701725f,
  -0.0348793f, +0.2107736f, +0.3558087f, -0.3256194f, -0.1134756f, -0.2685023f, +0.3753149f, -0.0176076f,
  -0.4419328f, +0.3515309f, +0.3019479f, -0.0966201f, -0.3843666f, +0.2320399f, +0.2501753f, -0.0521417f,
  -0.1924847f, +0.2494626f, -0.0086358f, +0.1340865f, -0.0646742f, +0.0276736f, -0.0381948f, +0.1710640f,
  +0.0221896f, -0.2068498f, -0.1872586f, +0.0892151f, -0.0342311f, -0.0587139f, +0.0552083f, +0.0224072f,
  +0.4461220f, +0.4559020f, -0.2636200f, +0.2754504f, -0.3150805f, +0.1391447f, -0.0465981f, +0.1558535f,
  +0.2953928f, +0.3401249f, -0.1437488f, +0.2905913f, -0.0641960f, -0.0142411f, +0.4142935f, +0.1015888f,
  -0.0879434f, +0.0727232f, +0.0445058f, +0.2760938f, -0.0725689f, -0.0956098f, +0.0667617f, -0.0600652f,
  +0.2214784f, -0.2217715f, +0.0554447f, -0.3868622f, +0.1487128f, -0.1108681f, -0.1572236f, -0.0801700f,
  +0.2147773f, -0.0214411f, +0.0197598f, +0.1480229f, -0.2978944f, +0.1794706f, -0.3336812f, +0.4994245f,
  -0.1530143f, +0.0816623f, +0.0776780f, -0.0637460f, +0.1913642f, +0.1231846f, -0.2437142f, -0.1571838f,
  -0.3398536f, -0.1650547f, +0.0556165f, -0.3025630f, -0.7383466f, +0.0213117f, +0.4559316f, +0.0170566f,
  +0.2195874f, -0.3329781f, -0.3014748f, +0.2677865f, -0.3281842f, +0.2426288f, +0.3304663f, +0.0617086f,
  -0.0141797f, +0.1986529f, +0.6459769f, -0.3867139f, +0.1018994f, +0.0436186f, -0.0726521f, -0.0253079f,
  -0.8157755f, -0.1189342f, +0.7717978f, -0.4870861f, +0.2208637f, +0.0641700f, -0.2840955f, -0.0836466f,
  -0.0271388f, +0.1594268f, -0.0269366f, -0.3874680f, +0.4542902f, +0.1989895f, -0.5421563f, +0.2384657f,
  +0.0389508f, -0.2741089f, -0.0086669f, -0.0641095f, +0.0699724f, +0.0451024f, +0.0184512f, -0.0564498f,
  -0.1280328f, +0.4518304f, +0.1629381f, +0.1206148f, +0.2940375f, -0.3705022f, +0.0897940f, -0.1745769f,
  -0.0760001f, +0.4083601f, -0.0522858f, -0.0829604f, +0.2134783f, -0.0956812f, +0.1722187f, -0.4244544f,
  -0.0300785f, +0.1961333f, +0.0795247f, +0.1439655f, -0.1089329f, -0.1377190f, -0.0557458f, +0.3496000f,
  -0.0775128f, +0.0565606f, +0.3294786f, -0.1523702f, +0.4129750f, +0.5369159f, -0.1698002f, +0.1605275f,
  -0.1296480f, +0.2247427f, -0.0190542f, -0.1307883f, +0.3267621f, +0.1162497f, -0.1561616f, +0.2311703f,
  -0.2292392f, +0.0709405f, +0.4922561f, -0.0718982f, +0.2375381f, -0.3336246f, +0.0780566f, -0.1439486f,
  -0.3807589f, +0.0435356f, +0.4869861f, -0.2733720f, +0.2596244f, -0.0740732f, -0.3310737f, +0.1816893f,
  +0.1221040f, -0.1323963f, -0.0410659f, -0.3212024f, +0.0654398f, +0.2213929f, -0.2081774f, +0.0883197f,
  -0.0400941f, +0.1900890f, -0.0670634f, -0.1661651f, -0.1266400f, +0.1693247f, +0.1144044f, -0.2037550f,
  -0.2045901f, -0.1751399f, -0.3340311f, +0.1693543f, -0.3984189f, +0.3211789f, +0.2218000f, -0.2886982f,
  -0.2517243f, -0.1699235f, +0.1223509f, -0.3349150f, +0.0635486f, +0.0659425f, +0.1698957f, -0.0779270f,
  +0.0808438f, -0.1398663f, -0.6522243f, -0.1199091f, -0.2015319f, +0.3060842f, -0.1042976f, +0.0415696f,
  +0.0485766f, +0.5199156f, -0.3386257f, -0.1223207f, +0.6608621f, +0.0096443f, -0.5913184f, +0.0847821f,
  +0.1603930f, +0.4118722f, -0.0939163f, -0.2530900f, +0.1725688f, +0.1266561f, -0.4604850f, +0.1612103f,
  -0.1967497f, -0.0084821f, -0.2413054f, +0.0480487f, -0.1758637f, -0.0189715f, +0.0424939f, +0.0384233f,
  +0.2795042f, +0.1087463f, -0.0489128f, -0.0804817f, -0.1760623f, +0.0514895f, -0.0339669f, +0.2321726f,
  -0.1647335f, +0.3756990f, -0.0086184f, -0.0181851f, -0.3113420f, -0.0278926f, +0.1890782f, -0.0057296f
);

const float biases[4] = float[4](
  -0.0769279f, +0.0007499f, +0.0346261f, -0.0859246f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer10 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0902401f, +0.3087087f, +0.0962830f, -0.0967369f, -0.0656315f, +0.1574183f, +0.0622356f, -0.1415873f,
  +0.1779937f, -0.0994758f, -0.0538886f, +0.2229507f, -0.0064225f, -0.3827950f, +0.0493543f, +0.1241188f,
  +0.2283472f, -0.0457645f, +0.0209689f, -0.2152606f, +0.1306231f, +0.0288927f, +0.0889128f, +0.2374842f,
  +0.1044880f, -0.2085146f, -0.2220002f, -0.1866111f, -0.0134401f, -0.1857135f, -0.1548937f, -0.0306420f,
  -0.3522940f, +0.0291981f, +0.3217441f, -0.1591051f, +0.0589265f, -0.6263278f, -0.0912674f, +0.2476318f,
  -0.0956738f, -0.0927273f, +0.1264518f, -0.2530447f, +0.1700831f, -0.2384254f, +0.1932695f, +0.0943490f,
  -0.2406429f, -0.1607807f, +0.0667643f, -0.0656540f, -0.1805861f, -0.2350818f, +0.4585112f, +0.0085852f,
  -0.0819312f, +0.1133811f, -0.0450771f, -0.1473223f, +0.0618780f, -0.3140992f, +0.3762080f, +0.2124052f,
  -0.1661120f, +0.0309644f, -0.2218253f, +0.0837461f, -0.0514756f, -0.2287729f, -0.0747491f, -0.1758515f,
  -0.0662188f, -0.1911894f, -0.0054382f, -0.0405662f, +0.1075581f, +0.0786395f, -0.0213588f, +0.0439133f,
  -0.0928917f, -0.1390113f, +0.2585183f, -0.1262540f, +0.2611979f, -0.2029428f, -0.2169997f, -0.0216906f,
  -0.0900538f, -0.0664943f, +0.0806341f, +0.0016240f, +0.0794818f, -0.0769402f, -0.0361188f, -0.2342579f,
  -0.1007624f, +0.0983994f, +0.0250574f, +0.1587638f, -0.0135581f, -0.0504721f, +0.0649146f, +0.0249250f,
  -0.0886799f, -0.2486665f, +0.2471160f, +0.1657134f, +0.0200323f, +0.1796605f, +0.0023500f, +0.0791204f,
  -0.0927250f, -0.2257828f, +0.1181608f, -0.0936785f, +0.0168884f, -0.1723910f, +0.0736769f, -0.1051798f,
  -0.1523267f, -0.0845364f, +0.4457871f, +0.0801917f, +0.0665531f, -0.1503846f, +0.0789181f, -0.0674447f,
  -0.1340289f, -0.2732228f, -0.0136691f, -0.1383701f, +0.4027852f, +0.0330334f, -0.4057199f, +0.0588264f,
  -0.0599000f, -0.3734753f, +0.0381147f, -0.0774870f, +0.0664614f, -0.0891484f, -0.0862115f, +0.0384035f,
  -0.0043402f, -0.0561505f, -0.3484823f, +0.2254274f, -0.2710634f, -0.0864237f, +0.0146679f, +0.0149922f,
  +0.2155780f, +0.3057900f, +0.0394010f, -0.0832126f, +0.0126370f, +0.5185013f, +0.0202369f, -0.0887406f,
  +0.2302237f, +0.4113498f, -0.3151640f, +0.4902150f, -0.1363929f, +0.1716170f, -0.0320681f, -0.0401865f,
  +0.1131880f, -0.0439833f, -0.1145005f, -0.3023597f, +0.3713371f, -0.0577053f, +0.0541463f, +0.4432197f,
  +0.0743793f, +0.3336522f, +0.1352720f, -0.3291672f, -0.1754790f, +0.3509701f, +0.1377736f, -0.0839197f,
  +0.3828164f, +0.2986701f, -0.2845669f, +0.3077311f, +0.1951158f, +0.2602797f, +0.2377376f, -0.2122709f,
  +0.0529192f, +0.1361405f, -0.1753092f, +0.0037574f, +0.3264863f, -0.0312992f, +0.2601880f, +0.0703960f,
  +0.2772380f, +0.4502700f, -0.6872070f, +0.5514964f, -0.1701801f, +0.1437715f, -0.1092414f, +0.1596262f,
  +0.2433891f, +0.1599878f, +0.2424807f, +0.0450956f, +0.4776336f, +0.1334406f, -0.1283773f, +0.0400656f,
  +0.0299738f, -0.3436592f, -0.1566575f, -0.1072189f, +0.2605959f, -0.0962871f, -0.1556706f, +0.4371606f,
  -0.2383045f, +0.2762711f, +0.0052662f, -0.1880476f, +0.2250465f, +0.4003881f, -0.1744120f, -0.1985097f,
  -0.1825814f, +0.0202611f, -0.1970496f, +0.1462663f, -0.0188784f, +0.1676885f, -0.0319933f, -0.2282232f,
  +0.1690038f, -0.0508476f, -0.3361838f, +0.4682433f, -0.1756879f, -0.6147633f, +0.6563587f, +0.2029039f,
  +0.2499040f, +0.4429761f, -0.3801551f, +0.4892105f, +0.5674866f, -0.4564328f, +0.5913213f, -0.0085359f,
  +0.0689183f, +0.6045517f, -0.1374102f, +0.0229017f, +0.1486938f, -0.0088852f, -0.0247232f, -0.0871189f,
  +0.1417031f, +0.0912099f, -0.1584996f, +0.3748857f, -0.0941067f, -0.2965238f, +0.3055303f, +0.1314899f,
  +0.1229555f, -0.2314897f, -0.2411300f, +0.2477091f, +0.2934194f, +0.0562236f, +0.0465870f, -0.1453087f,
  +0.0003026f, -0.1109951f, +0.1044412f, +0.0740889f, +0.0885006f, -0.0455172f, -0.0959102f, +0.2595522f
);

const float biases[4] = float[4](
  +0.0686139f, -0.0272179f, -0.1082639f, -0.0446698f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer11 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1768561f, -0.0757873f, +0.0956684f, +0.1087147f, +0.1165460f, +0.0947309f, -0.0927008f, -0.0612922f,
  -0.0058793f, -0.0081215f, -0.1921280f, +0.2938140f, +0.4188913f, +0.0528615f, +0.1229220f, -0.2872804f,
  +0.0481390f, -0.0225569f, -0.1116955f, +0.2172714f, +0.2519455f, -0.1873400f, +0.0200796f, +0.0520493f,
  -0.3874590f, +0.3914340f, +0.8101118f, -0.0078060f, +0.0605691f, +0.1575548f, +0.1377017f, -0.0735822f,
  +0.2427811f, +0.2573431f, +0.3975102f, -0.6173359f, +0.3722323f, -0.1628952f, -0.1413299f, -0.1064981f,
  +0.0989044f, -0.1823649f, -0.2092760f, -0.0301822f, +0.0864093f, -0.1611916f, +0.1833280f, -0.1775522f,
  -0.1099755f, +0.0725602f, +0.1617164f, +0.3649434f, -0.0346885f, -0.0845863f, -0.0042486f, +0.3913590f,
  -0.2581617f, -0.5214775f, -0.1195422f, -0.0723521f, -0.0145046f, -0.5699290f, +0.0669984f, +0.1158917f,
  +0.2726931f, +0.0216366f, -0.1509233f, +0.2083742f, +0.4747299f, +0.1452425f, -0.1292512f, -0.2264141f,
  +0.2547229f, -0.2831856f, -0.0205875f, +0.2520928f, -0.1741525f, -0.0602470f, +0.0007612f, -0.0729067f,
  +0.0531211f, +0.2430121f, -0.0330257f, +0.3175857f, +0.3580258f, +0.1502157f, -0.1611372f, -0.0878001f,
  -0.2039548f, +0.0267480f, -0.1517907f, +0.0089747f, +0.2126623f, +0.0126495f, -0.2035458f, -0.3826268f,
  +0.2903829f, -0.5805612f, +0.5510973f, +0.2136677f, -0.4193138f, -0.1815677f, -0.1615156f, -0.0318632f,
  -0.0142066f, -0.8329504f, -0.4378049f, -0.5554357f, +0.1370863f, -0.2960658f, -0.8599325f, +0.4170970f,
  +0.6267146f, +0.4711395f, -0.2456798f, -0.1172038f, -0.0038160f, -0.0812702f, -0.3533171f, -0.0504313f,
  -0.2596320f, +0.1884966f, -0.1097242f, -0.0018183f, -0.1728537f, -0.1354052f, +0.2472750f, -0.2564849f,
  -0.2344613f, -0.5889760f, +0.1186275f, +0.1804741f, -0.0292475f, +0.1785556f, +0.0283868f, +0.1004395f,
  +0.2068349f, +0.0638383f, +0.0846273f, +0.1617666f, +0.3955294f, -0.0796726f, -0.6135649f, -0.2991371f,
  -0.0112293f, +0.3212453f, +0.2631655f, -0.0158999f, -0.2239208f, +0.0614281f, -0.1658180f, -0.6399920f,
  +0.1235623f, -0.1020574f, -0.0497090f, +0.0436040f, -0.2576656f, +0.2159991f, -0.6742860f, -0.0472772f,
  -0.2246609f, -0.1194338f, -0.3237078f, +0.1495927f, -0.3057515f, +0.0175700f, -0.0785266f, +0.1108151f,
  +0.4634615f, -0.5852879f, -0.3418156f, -0.1198994f, -0.0744846f, -0.3652023f, -0.3451331f, +0.5535818f,
  -0.1996219f, -0.8435466f, -0.1584608f, +0.4232585f, +0.2297894f, -0.0489452f, +0.3881461f, +0.2949986f,
  +0.2805598f, +0.1522225f, +0.1031724f, +0.2290999f, +0.6184995f, -0.2206577f, +0.2341577f, +0.0473822f,
  -0.1238249f, +0.0050589f, +0.0764412f, -0.0610402f, -0.0617996f, +0.1251258f, +0.3191266f, -0.1256982f,
  -0.0134953f, -0.0531062f, +0.1835797f, +0.1872436f, -0.1236853f, -0.2558287f, +0.0212283f, -0.3530914f,
  -0.3746946f, -0.0167725f, +0.0764306f, +0.0384439f, -0.1565662f, +0.0391205f, -0.0306006f, +0.1522477f,
  -0.0792454f, -0.3439058f, -0.0468932f, -0.3528731f, +0.1044321f, -0.0206042f, -0.5821119f, -0.3624991f,
  -0.5212634f, -0.4938096f, +0.2753620f, -0.1656597f, +0.2219556f, -0.2523061f, -0.5177624f, -0.4689307f,
  +0.2485137f, -0.0170435f, +0.0201209f, +0.1690730f, +0.0217878f, -0.0366339f, +0.1325246f, -0.1394499f,
  +0.0407780f, +0.0220835f, +0.5395482f, +0.2323348f, +0.4008016f, +0.4367597f, -0.6371958f, -0.1769866f,
  +0.1627531f, -0.0800310f, +0.4573928f, -0.0589430f, -0.1720369f, -0.1488372f, -0.1391525f, +0.3692794f,
  +0.0741654f, +0.2711276f, -0.1214396f, +0.1604913f, +0.3165263f, -0.0199532f, +0.4085348f, -0.3198172f,
  +0.2535886f, -0.3709309f, +0.3890986f, -0.2146292f, +0.0403566f, -0.0163738f, -0.2111767f, -0.4466426f,
  -0.1366816f, +0.2032196f, +0.1644755f, +0.1199852f, -0.1320642f, +0.0016343f, -0.5243125f, -0.2146915f,
  -0.7473909f, -0.0390384f, -0.1239078f, +0.2651515f, -0.0351665f, +0.1956667f, +0.0689199f, +0.0613607f
);

const float biases[4] = float[4](
  -0.1253792f, -0.0451557f, -0.1206501f, -0.2036215f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer11 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0358537f, -0.1580568f, +0.2764706f, +0.2481571f, -0.1866851f, -0.3251862f, +0.3442730f, +0.1294018f,
  +0.3640822f, +0.1142481f, -0.2097586f, -0.1488137f, +0.1165741f, -0.1471678f, -0.2403465f, -0.0909992f,
  -0.1263050f, -0.0625275f, -0.0096629f, +0.2250155f, -0.0938544f, +0.1553172f, -0.0958527f, +0.0294798f,
  +0.1346107f, +0.0574734f, +0.0856454f, +0.4950256f, -0.2167368f, -0.3192412f, +0.5304227f, -0.0143749f,
  +0.5774463f, -0.6825159f, -0.2221086f, +0.1845164f, -0.3489674f, -0.1131813f, -0.2914078f, -0.4263381f,
  +0.2407225f, +0.2295654f, +0.3129620f, -0.1115478f, +0.2806783f, +0.0116557f, +0.1067284f, +0.1262274f,
  -0.2206464f, +0.0326035f, +0.0184629f, +0.1499189f, +0.1881979f, -0.0291918f, +0.2472896f, -0.0396960f,
  +0.2877094f, -0.1636688f, -0.2705399f, +0.4101689f, -0.1008521f, -0.1444713f, -0.1066468f, -0.0535014f,
  +0.3914467f, +0.3426218f, +0.0611520f, -0.0486472f, +0.0336191f, +0.0559463f, +0.0343572f, -0.2195974f,
  +0.0227401f, +0.1409876f, -0.2888704f, -0.0551568f, +0.0604329f, +0.0474226f, +0.1072146f, -0.0061230f,
  +0.0694622f, +0.0104809f, -0.1408781f, +0.1633373f, -0.0607047f, -0.2540351f, -0.2046886f, +0.0079427f,
  +0.1930282f, -0.0551530f, -0.1302833f, -0.0687950f, +0.2661280f, -0.0747363f, -0.0080264f, -0.2489774f,
  +0.0341551f, -0.2939766f, -0.0874206f, +0.0658816f, +0.0388328f, -0.1330837f, +0.1401815f, -0.0924161f,
  +0.0637183f, -0.1106241f, +0.0047849f, +0.0024385f, +0.3818645f, -0.3148508f, -0.0291488f, +0.0971822f,
  -0.5003712f, -0.4771533f, -0.6541653f, +0.1898366f, +0.0987607f, -0.1100859f, +0.0769393f, -0.0757466f,
  +0.1297411f, -0.1068868f, -0.0767933f, +0.2667748f, -0.1318169f, -0.4449337f, +0.1505563f, -0.0559603f,
  +0.0168312f, -0.2058137f, -0.1761488f, +0.5448676f, +0.1504684f, -0.2957037f, -0.0483175f, -0.3658274f,
  -0.1225632f, +0.3148860f, +0.0752757f, +0.6167619f, +0.1430790f, -0.2593271f, +0.4837286f, -0.0757567f,
  -0.1892463f, +0.0186833f, -0.3027409f, +0.0578572f, +0.2031734f, +0.1615616f, -0.2675352f, -0.1204243f,
  +0.1069283f, +0.1964916f, +0.1827934f, +0.0996757f, +0.0235224f, -0.2494432f, +0.0992045f, -0.3069616f,
  -0.3781275f, -0.2696933f, -0.0329064f, -0.1796442f, -0.6077036f, -0.0515635f, -0.1094117f, +0.0719909f,
  +0.0973312f, -0.3490922f, +0.0090371f, +0.0061944f, -0.0699703f, +0.0083963f, -0.0875984f, -0.1741048f,
  +0.0437479f, +0.0130978f, -0.1300471f, -0.1140749f, +0.0254178f, -0.3795242f, -0.0411136f, -0.2584327f,
  -0.6989263f, -0.5147515f, -0.1894959f, -0.0433598f, -0.1160306f, -0.2510719f, +0.2574712f, -0.2938146f,
  +0.2781571f, -0.1374429f, -0.0487416f, +0.1848748f, -0.1529166f, +0.0528682f, -0.3041842f, -0.0334316f,
  -0.0945585f, +0.4201028f, -0.2747852f, -0.4162326f, -0.1985573f, +0.3004665f, +0.1064091f, -0.3337415f,
  -0.3408762f, -0.2814783f, +0.1429633f, -0.0400393f, +0.1058230f, -0.0903585f, -0.0149937f, -0.2361024f,
  +0.0439420f, +0.1249495f, +0.0648495f, -0.1694185f, -0.2115030f, -0.3504309f, +0.4503314f, +0.0943036f,
  -0.0829052f, -0.1640255f, -0.4088660f, -0.2571895f, -0.2734269f, -0.0102733f, -0.0113952f, +0.2710198f,
  +0.1433797f, -0.1501917f, -0.0962244f, +0.1086525f, +0.2345131f, +0.1877129f, +0.0503050f, -0.0447975f,
  -0.0925581f, -0.1226958f, +0.0623318f, +0.0632919f, +0.1478603f, +0.0163393f, +0.0308820f, +0.0416450f,
  -0.1573328f, -0.2302599f, -0.1363863f, +0.2150952f, -0.0800633f, +0.1499473f, +0.4255238f, +0.1040698f,
  -0.2355509f, +0.1576236f, +0.3280736f, +0.2723692f, -0.1302982f, +0.0589595f, -0.1922427f, -0.8589331f,
  -0.0025111f, +0.1933812f, +0.0584416f, -0.1234166f, -0.1413264f, -0.0826621f, +0.2005155f, -0.1732371f,
  +0.2353376f, -0.0451854f, +0.2041212f, +0.1281967f, -0.0251604f, -0.0127491f, -0.1558562f, +0.0181153f,
  +0.2483379f, +0.0632685f, +0.0260731f, -0.1706188f, +0.0916005f, -0.1460267f, -0.8264154f, -0.3222958f
);

const float biases[4] = float[4](
  -0.1028348f, -0.1028853f, -0.0949943f, -0.1102701f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer12 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1993212f, -0.3907857f, -0.2381361f, +0.2649487f, -0.3938886f, +0.1614203f, -0.2901741f, +0.3175086f,
  -0.2153276f, -0.2790095f, +0.2519326f, -0.0250594f, -0.0870127f, -0.0169992f, +0.0230761f, +0.4110233f,
  -0.1539529f, -0.1190767f, -0.0770624f, -0.0944529f, -0.3191634f, +0.0599139f, -0.2890703f, +0.0485872f,
  +0.0649591f, +0.0050741f, -0.3791982f, -0.4118342f, -0.1570690f, +0.3478444f, -0.1933270f, +0.1306839f,
  +0.0259062f, -0.2110836f, -0.0507836f, +0.0438228f, +0.1250164f, +0.3435342f, +0.3928449f, +0.0613127f,
  +0.1745001f, +0.1160655f, -0.1181535f, -0.1753362f, -0.1744184f, +0.2685919f, -0.2158107f, +0.0480289f,
  +0.1627079f, -0.1094168f, -0.1292301f, -0.1533034f, -0.3733112f, -0.2214993f, +0.1795426f, +0.1928926f,
  -0.0495124f, -0.1496311f, -0.3128761f, +0.4428104f, -0.1707066f, +0.1022500f, -0.0730828f, +0.2301074f,
  +0.0504053f, -0.1279036f, -0.2116475f, -0.0787606f, +0.0617528f, +0.1776552f, -0.0346217f, +0.0639126f,
  +0.0631618f, +0.4001860f, +0.0862965f, -0.0428369f, +0.0419199f, +0.7832611f, -0.0121286f, -0.4859503f,
  +0.1972054f, -0.0162987f, +0.2979828f, -0.2301901f, +0.0412035f, -0.1795436f, -0.1159511f, +0.0177024f,
  +0.0249157f, +0.0883064f, +0.1756349f, +0.2527440f, -0.0038534f, +0.1335828f, +0.0434385f, -0.0603046f,
  +0.0023360f, +0.5859255f, +0.4183190f, -0.2326711f, +0.2058525f, +0.2494780f, -0.0180165f, -0.1849473f,
  +0.0023536f, +0.7877811f, +0.1507775f, -0.0132807f, +0.5653102f, -0.0365873f, +0.1455536f, -0.2989932f,
  -0.4072570f, +0.0734735f, -0.4479595f, +0.4607794f, +0.3207161f, +0.0332719f, +0.2158791f, -0.1134503f,
  +0.2461533f, +0.1293387f, +0.0918109f, -0.1760770f, +0.1331161f, -0.3366291f, -0.0777211f, -0.4123724f,
  +0.4178806f, +0.5362831f, +0.3531549f, +0.0453605f, +0.3021893f, +0.0597598f, -0.0696017f, -0.2880886f,
  +0.0763122f, +0.1781619f, +0.0526322f, +0.2255665f, +0.0654351f, -0.1205009f, -0.1234542f, -0.1120222f,
  +0.1077077f, -0.1778495f, -0.1888561f, -0.2260528f, +0.0965154f, +0.1274488f, -0.0065311f, +0.0578643f,
  -0.1112897f, +0.0247962f, -0.1958749f, +0.0673095f, -0.2744752f, +0.2040105f, +0.1790447f, -0.0532452f,
  +0.0080614f, +0.0121667f, -0.1475222f, -0.0339422f, +0.2010640f, +0.2491497f, -0.0783437f, +0.1440023f,
  -0.0794133f, +0.2369903f, -0.1906719f, -0.5436764f, +0.0877137f, +0.0626125f, -0.0679934f, -0.0193431f,
  -0.1646400f, -0.3220577f, +0.2127125f, -0.1638125f, -0.1096075f, -0.3712129f, +0.2767631f, +0.2429589f,
  -0.0177376f, +0.2762230f, +0.5419441f, -0.2475915f, -0.4111109f, +0.0528598f, -0.0802291f, -0.0033391f,
  +0.1674556f, +0.1111501f, +0.1656972f, -0.3350217f, -0.2322208f, +0.4251979f, -0.0317506f, +0.0941383f,
  +0.3488806f, +0.3972085f, +0.2906073f, -0.1686106f, +0.1665553f, +0.1177596f, +0.0871596f, +0.0753885f,
  +0.0955482f, +0.0064551f, -0.1958236f, +0.0097207f, -0.0595739f, +0.2038284f, -0.1369968f, -0.0320747f,
  -0.2079461f, +0.0102882f, +0.0110859f, +0.0414761f, +0.0111374f, -0.1293254f, +0.0376446f, +0.2825527f,
  -0.2501062f, +0.1628529f, -0.1926205f, +0.2337808f, +0.1110788f, -0.0393045f, +0.1242156f, -0.0652016f,
  -0.3726796f, +0.2636908f, -0.1892199f, -0.0964195f, -0.2611209f, -0.0260958f, -0.0830441f, -0.0503267f,
  -0.0325782f, -0.4255354f, +0.0870588f, +0.0581468f, +0.0711385f, -0.2533506f, +0.1020181f, +0.0774609f,
  +0.4243985f, -0.2285924f, -0.0445294f, +0.0903456f, -0.1346414f, -0.0303372f, -0.0297511f, -0.0273413f,
  +0.2711097f, -0.1669840f, +0.3175528f, -0.1906992f, -0.2601539f, -0.0674465f, -0.2064789f, -0.0680993f,
  -0.2471040f, -0.0501238f, -0.0347899f, -0.4104789f, +0.1269732f, -0.2174657f, +0.0379537f, +0.2103564f,
  -0.2241314f, -0.2500840f, -0.4263143f, -0.3162140f, -0.2322070f, -0.0107654f, -0.0097658f, +0.0211981f,
  -0.0892380f, -0.0359619f, -0.0269331f, -0.2033514f, +0.0115378f, +0.0290095f, -0.0634428f, -0.0331607f
);

const float biases[4] = float[4](
  -0.0593943f, -0.0095026f, +0.0311133f, +0.0315210f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer12 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2110130f, -0.1013004f, -0.0386805f, -0.1762155f, -0.1187255f, -0.3508588f, -0.2189267f, +0.0223859f,
  +0.5848337f, -0.0505122f, -0.0828416f, +0.0753077f, +0.0465111f, +0.0301194f, -0.0735428f, -0.2889228f,
  +0.0595103f, -0.1428288f, -0.0579181f, +0.1521584f, +0.0705494f, -0.0956666f, -0.0048300f, +0.0787752f,
  -0.5517484f, -0.0625423f, -0.1193116f, +0.1137227f, -0.1278826f, -0.1550411f, -0.2745707f, +0.0261925f,
  -0.4821920f, -0.2601591f, -0.5360280f, +0.1238211f, +0.1609729f, -0.3507265f, +0.0790542f, -0.1110263f,
  -0.2213663f, +0.0791991f, -0.3611354f, +0.2824437f, +0.3506467f, -0.0355568f, +0.0786479f, +0.0591514f,
  -0.2480647f, -0.2030338f, -0.3885320f, -0.2430788f, -0.2940680f, +0.0953318f, +0.0018145f, -0.2437415f,
  -0.0823573f, -0.2408635f, +0.1779480f, -0.2107647f, -0.0485228f, -0.0676091f, +0.2506103f, -0.2371162f,
  -0.1387757f, -0.1512931f, +0.1846916f, +0.1513356f, +0.0498732f, +0.1044062f, +0.1297898f, -0.0985941f,
  +0.1558472f, +0.0440255f, -0.0258080f, -0.2496000f, -0.0318815f, +0.3106311f, +0.0999162f, -0.0775183f,
  -0.0794299f, -0.0092008f, -0.0651736f, -0.6745809f, -0.0812398f, -0.0141910f, +0.0198251f, +0.0581116f,
  +0.0334596f, -0.1050878f, -0.0037686f, +0.0334503f, +0.0307459f, +0.1910523f, -0.0113857f, +0.1923233f,
  +0.4041487f, +0.1518819f, -0.1233894f, -0.0117998f, -0.0054903f, -0.2148747f, +0.2068865f, +0.0323523f,
  -0.3049115f, -0.0184643f, -0.0917497f, +0.0617634f, -0.1869362f, -0.1807078f, +0.0797216f, -0.1040546f,
  +0.0367030f, +0.0834101f, +0.1022102f, -0.1789921f, +0.0572231f, +0.0636781f, +0.0993459f, +0.0377079f,
  +0.4180100f, +0.1356893f, +0.0372855f, +0.1658026f, -0.3070893f, +0.2490287f, +0.2349436f, -0.0708906f,
  +0.0905257f, -0.1139423f, +0.1940160f, -0.3091997f, -0.0581924f, -0.0589204f, +0.1042926f, -0.0236585f,
  +0.1155887f, +0.0824340f, +0.0015356f, +0.0506086f, -0.0726229f, -0.0132809f, +0.0346861f, +0.1027563f,
  -0.0830559f, +0.3871304f, +0.0997050f, +0.0405877f, +0.2490330f, +0.2277947f, +0.3635841f, -0.0714191f,
  -0.1518222f, +0.0503801f, +0.0200670f, +0.2042241f, -0.1327402f, +0.2274556f, -0.0153172f, -0.0505275f,
  +0.1234649f, +0.2503254f, +0.1804465f, +0.1955787f, +0.0576035f, +0.1139106f, +0.2678517f, -0.0646628f,
  -0.0748194f, +0.4671790f, +0.0151083f, -0.2430037f, +0.2058856f, +0.0823001f, +0.1880075f, +0.2365172f,
  +0.0528508f, +0.8507905f, +0.1437406f, +0.3575749f, +0.1586839f, +0.2142269f, -0.1048501f, +0.4430852f,
  -0.0653586f, +0.2440319f, -0.2818553f, +0.0014530f, +0.0268252f, -0.5841106f, +0.2387574f, -0.1223343f,
  +0.1063980f, +0.1924121f, +0.0520287f, +0.0429384f, -0.0582501f, -0.3648624f, -0.3149670f, +0.2648764f,
  +0.1603582f, +0.0332004f, +0.1743118f, +0.2225002f, +0.3987882f, +0.0994918f, -0.0914906f, +0.0568534f,
  +0.1724727f, -0.0521709f, +0.4676793f, +0.5226597f, -0.1544467f, -0.1438929f, -0.0452797f, +0.0973408f,
  +0.2876928f, +0.1307629f, -0.0706674f, -0.3468538f, +0.1990771f, -0.1343696f, +0.1965433f, +0.0422789f,
  -0.4078346f, +0.4167759f, +0.1275226f, -0.3654590f, -0.1111595f, +0.1063178f, +0.3596377f, +0.1077987f,
  -0.1825103f, +0.3229373f, -0.3297711f, -0.0484516f, +0.0139227f, -0.0139200f, +0.0970093f, +0.0127502f,
  +0.1997854f, +0.7290705f, -0.5916356f, +0.0979086f, -0.3065361f, -0.2986859f, +0.7781158f, +0.2315986f,
  -0.0654021f, +0.1014268f, -0.1278617f, -0.4429801f, +0.5592227f, -0.2266631f, +0.5221764f, -0.0527868f,
  +0.0687217f, -0.1386809f, +0.0291027f, -0.2007070f, +0.1875970f, -0.1628830f, +0.1809888f, -0.2110552f,
  +0.3056348f, +0.1309602f, +0.0549705f, +0.4686555f, -0.5311620f, -0.0705204f, +0.2976279f, -0.1590258f,
  +0.0942463f, -0.0713654f, +0.7508391f, +0.0662085f, -0.0474046f, -0.1858234f, +0.4297496f, -0.2184588f,
  -0.0411953f, -0.0159389f, +0.3158857f, +0.3635651f, +0.0525432f, -0.2783495f, +0.2575646f, -0.0543029f
);

const float biases[4] = float[4](
  -0.0600746f, -0.0516180f, +0.0126535f, +0.0077918f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer13 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0086376f, +0.0550028f, +0.1383908f, -0.0993201f, -0.2839912f, -0.1136021f, -0.0265029f, +0.0896471f,
  +0.0309522f, -0.1480464f, -0.1147406f, -0.3277542f, +0.1386383f, -0.0403036f, -0.1303363f, -0.0215298f,
  +0.0118140f, -0.2267805f, -0.2224603f, -0.0555645f, -0.0742381f, -0.1639156f, -0.1922180f, +0.0306207f,
  +0.2989050f, -0.2165931f, +0.0594969f, +0.3338683f, -0.2110342f, +0.0735615f, +0.2089267f, -0.2265775f,
  -0.5742071f, -0.4654261f, -0.2055749f, +0.7134702f, -0.0508842f, +0.1177888f, -0.2629132f, -0.0108911f,
  -0.1673937f, -0.2904458f, +0.1767098f, -0.0848881f, -0.0451327f, -0.1359414f, -0.3478584f, -0.0440268f,
  -0.2673682f, +0.0359758f, +0.0139895f, -0.0523080f, +0.1814921f, +0.1483337f, +0.1619602f, +0.1548409f,
  -0.6291314f, -0.0195193f, -0.2906829f, +0.5601263f, +0.0386401f, +0.2163708f, +0.2488784f, -0.0400235f,
  -0.3645364f, -0.1513946f, +0.0736696f, -0.0337581f, -0.2397702f, -0.1176399f, +0.2458132f, +0.1343122f,
  +0.1539145f, -0.2041800f, +0.2851347f, +0.1476273f, +0.0150092f, -0.0955793f, +0.0291910f, -0.1075411f,
  -0.0763150f, +0.3981134f, +0.1904030f, +0.2250442f, -0.4343056f, -0.3305750f, +0.4211444f, -0.4287297f,
  +0.0614487f, -0.0135226f, -0.0565198f, -0.1404753f, -0.5294214f, +0.0298773f, -0.4287715f, -0.7022127f,
  +0.0900277f, -0.1308837f, -0.0029884f, +0.0744145f, -0.0753291f, +0.0679869f, -0.0324062f, +0.0534548f,
  +0.2154596f, +0.3789978f, +0.0736508f, +0.5577566f, -0.4130641f, -0.0568398f, +0.5335104f, +0.1563123f,
  -0.2967563f, -0.3967488f, -0.0085669f, +0.1784078f, -0.2254459f, -0.0997599f, -0.2159236f, -0.5194085f,
  +0.1583330f, -0.0223394f, -0.0478715f, -0.0288246f, -0.0081965f, -0.0745832f, -0.1573583f, +0.0562091f,
  -0.0659312f, -0.2006703f, +0.0183288f, +0.0891435f, +0.0356137f, -0.0183929f, -0.0757012f, +0.0453347f,
  +0.0130141f, +0.0578876f, -0.4075152f, -0.0397366f, +0.0434467f, +0.3526106f, -0.1781781f, -0.1523512f,
  -0.0469480f, +0.0619020f, +0.0406196f, +0.0131938f, -0.0230645f, +0.0316204f, +0.0194592f, +0.2127958f,
  -0.2123754f, +0.4180939f, +0.3681023f, -0.1156577f, +0.0498982f, +0.2778454f, -0.1006425f, -0.1057318f,
  -0.2172086f, +0.2929891f, +0.0380330f, +0.1168845f, +0.0554986f, +0.1073885f, -0.0024512f, -0.1841360f,
  +0.0980523f, -0.0431975f, -0.0801311f, -0.1618651f, +0.0283805f, +0.0884633f, +0.0629206f, -0.0662802f,
  -0.1240093f, +0.5562390f, +0.0620416f, -0.7635364f, +0.2496530f, +0.1552718f, -0.7298982f, +0.1390790f,
  +0.6620987f, +0.2485524f, +0.2128228f, -0.1676032f, +0.3093090f, -0.0857437f, -0.4649131f, -0.1068135f,
  -0.0875088f, -0.0461334f, -0.2308091f, +0.0110966f, -0.2013236f, -0.1200009f, +0.0591307f, +0.0122550f,
  +0.1676767f, -0.1358506f, +0.3235644f, -0.0909201f, +0.2205278f, +0.1211895f, -0.3672627f, -0.0804562f,
  +0.3485541f, -0.0043654f, +0.1218233f, -0.5700011f, +0.0723472f, +0.0071031f, -0.1625716f, -0.3706413f,
  +0.0544387f, -0.2090841f, +0.0800319f, +0.0333222f, -0.4329749f, -0.1011873f, +0.2436370f, -0.2925713f,
  -0.0696829f, +0.0241422f, +0.1565838f, +0.1173587f, +0.1698246f, +0.1151912f, +0.1264003f, -0.2563961f,
  +0.2481686f, -0.1857152f, -0.1902972f, +0.0541444f, +0.1318861f, -0.1850225f, +0.0267694f, +0.1236796f,
  +0.5907636f, -0.0290013f, -0.0318211f, +0.5749369f, -0.6277083f, -0.1457873f, +0.2241350f, -0.2529802f,
  -0.7831612f, -0.1920627f, +0.0405130f, -0.0759103f, -0.3515937f, -0.0791515f, -0.1069670f, -0.5303938f,
  +0.4746298f, +0.1483413f, +0.3024702f, +0.0728974f, +0.4878896f, +0.0551511f, +0.1087351f, +0.0109211f,
  +0.3138091f, +0.0221818f, +0.0459113f, +0.2669846f, +0.1748544f, -0.2079950f, -0.0226553f, +0.3646309f,
  -0.0805150f, +0.0709203f, -0.1805170f, -0.0810480f, -0.1841144f, +0.0923393f, +0.5217457f, -0.3372303f,
  -0.0140020f, +0.1206815f, +0.1223055f, -0.0571541f, +0.0942258f, +0.0005743f, +0.0793274f, +0.1964450f
);

const float biases[4] = float[4](
  +0.0585404f, -0.0551127f, +0.0328301f, -0.1412974f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer13 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0753062f, +0.1603354f, +0.5261359f, +0.1087696f, -0.2334065f, -0.0744184f, -0.0150551f, +0.0989645f,
  +0.1496196f, +0.1038296f, -0.2117604f, +0.1384645f, -0.1538003f, +0.0551191f, -0.0492540f, +0.0079017f,
  +0.0896607f, +0.0583515f, +0.1628544f, +0.1006023f, -0.2299759f, -0.0596871f, +0.0160989f, +0.0932527f,
  +0.1717350f, +0.1705454f, +0.2508615f, +0.1278840f, +0.0287555f, -0.1658663f, -0.0972402f, -0.0929111f,
  +0.6371717f, -0.5771593f, -0.0935975f, -0.0593842f, +0.3572035f, -0.0880878f, +0.0796821f, -0.0018836f,
  +0.5546793f, -0.0087324f, -0.0936886f, +0.2638339f, +0.3047714f, +0.0945652f, +0.3013328f, -0.1426427f,
  -0.3299616f, +0.4543233f, -0.4663557f, -0.1937204f, +0.4908991f, +0.1178338f, +0.0637926f, +0.0360288f,
  -0.6657968f, +0.0634470f, +0.1445652f, -0.1904538f, +0.4757593f, -0.2990879f, -0.3404471f, -0.3131208f,
  -0.2090307f, -0.3385092f, -0.0680075f, -0.1343564f, +0.4237162f, -0.4044115f, -0.3411178f, -0.6318380f,
  +0.2661837f, -0.7308604f, +0.2846960f, +0.0357504f, +0.1975776f, +0.2145052f, +0.1254811f, -0.5843118f,
  -0.0041829f, -0.1156953f, +0.0450570f, -0.3693087f, -0.0889646f, -0.2055270f, -0.3053379f, -0.4567046f,
  -0.2663212f, -0.0337516f, +0.1226675f, -0.1452426f, -0.0097726f, -0.1303714f, -0.3222745f, -0.4106898f,
  -0.1859876f, -0.7993138f, +0.1828716f, +0.0980169f, +0.1770410f, +0.1254306f, -0.0567137f, +0.1301768f,
  -0.2770506f, +0.1107683f, -0.0683415f, -0.2434027f, +0.0145754f, +0.3157970f, -0.3006791f, +0.3652197f,
  +0.0960569f, -0.1720165f, +0.0965914f, -0.0455685f, +0.0598781f, -0.1434642f, -0.0290586f, +0.0538306f,
  -0.1570733f, -0.4991536f, +0.1131221f, +0.0722491f, -0.5049714f, -0.1444817f, -0.2412978f, -0.2574742f,
  +0.0778243f, +0.1616355f, -0.1152458f, -0.1238600f, -0.0174811f, +0.1864180f, -0.1534874f, +0.0888181f,
  +0.0156506f, -0.0564111f, +0.0205140f, -0.1721412f, -0.0121677f, +0.0139501f, -0.1710861f, -0.4010427f,
  +0.3901407f, -0.3969387f, -0.0978465f, -0.3160457f, +0.1025672f, +0.0764001f, +0.2308818f, -0.1242249f,
  -0.1627033f, -0.3400287f, -0.3014401f, -0.1059824f, -0.0377390f, -0.2013179f, +0.3535465f, -0.0107435f,
  -0.0733390f, -0.3967318f, -0.0483011f, +0.2068660f, -0.0828783f, +0.0147890f, -0.0826426f, -0.0828900f,
  -0.3678975f, -0.4080306f, +0.4822919f, -0.0163556f, +0.0647772f, +0.1722727f, +0.2036134f, +0.0492944f,
  +0.0385803f, +0.1461600f, -0.0843681f, +0.1934869f, -0.5630946f, +0.1277111f, +0.3981345f, -0.2084091f,
  -0.1015818f, +0.3789487f, -0.0096848f, +0.2836872f, +0.0733843f, -0.1035854f, +0.1841542f, +0.0825851f,
  -0.2822909f, -0.3730551f, +0.4002738f, +0.1106710f, +0.1322889f, -0.1077467f, +0.0227066f, -0.0856271f,
  +0.1563958f, +0.0467069f, +0.3603607f, -0.1948870f, +0.1481388f, -0.1130046f, +0.1744229f, +0.1302030f,
  +0.2818380f, -0.1719737f, -0.0819357f, +0.0931967f, +0.3508354f, +0.1197521f, -0.0506533f, -0.0540051f,
  -0.2278529f, +0.2847431f, +0.0357908f, -0.1281658f, +0.2359378f, -0.2727551f, +0.0800674f, -0.0543985f,
  -0.1695098f, -0.1630965f, -0.0433775f, +0.0696737f, +0.1963515f, -0.4050267f, +0.1165109f, +0.0916253f,
  +0.1189254f, -0.3303812f, -0.3247546f, +0.2693347f, +0.3000091f, -0.0652029f, -0.0476865f, -0.3157960f,
  +0.0309178f, +0.4775389f, -0.2196804f, -0.3204758f, +0.0051101f, +0.1374603f, -0.4793406f, -0.1880093f,
  -0.2798428f, +0.2978303f, +0.0565903f, -0.2535239f, +0.0313926f, +0.2100773f, +0.2979220f, +0.2832834f,
  -0.1553815f, +0.2459947f, +0.1716440f, -0.1423471f, -0.1752856f, -0.2913377f, +0.2294953f, -0.0518120f,
  +0.4775684f, -0.3210135f, +0.2579600f, -0.0759074f, -0.0917181f, -0.2784280f, -0.1873335f, -0.3401402f,
  +0.4558569f, +0.0007926f, -0.2624495f, +0.3204940f, -0.1768512f, -0.2146629f, +0.1439986f, +0.3487981f,
  +0.1109318f, -0.3344035f, -0.0821787f, -0.0594601f, -0.2569554f, -0.1186154f, -0.0880143f, -0.5613800f
);

const float biases[4] = float[4](
  -0.0785544f, -0.0865938f, +0.0311379f, -0.2898143f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer14 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0913515f, +0.1250765f, +0.1159345f, +0.2372727f, +0.1002555f, +0.0022330f, -0.2385385f, +0.7853540f,
  +0.2657446f, +0.3161504f, +0.0183081f, -0.2142121f, +0.1090700f, +0.2708077f, +0.0534263f, +0.3931436f,
  +0.3077298f, +0.1507274f, -0.0702443f, +0.2332410f, -0.1519935f, -0.0817645f, -0.0542522f, +0.1664802f,
  -0.1445108f, +0.4307630f, +0.4829341f, +0.0346200f, -0.0188319f, +0.1025501f, +0.0107532f, +0.0581299f,
  -0.0652559f, +0.2487412f, +0.1728400f, +0.8252536f, -0.4780248f, +0.0416119f, -0.1259755f, +0.1445312f,
  +0.3016279f, +0.0587652f, -0.0814770f, -0.2380277f, +0.3057828f, -0.0614799f, +0.0229263f, -0.2687962f,
  +0.1291037f, +0.0267380f, +0.1722710f, +0.1091120f, -0.1515273f, +0.0473335f, -0.0579533f, +0.2477511f,
  +0.2559566f, +0.1185212f, +0.3599298f, +0.1108604f, -0.2821174f, -0.2759290f, -0.0152765f, +0.5438252f,
  +0.1653944f, +0.1864277f, +0.1640121f, -0.0802547f, -0.0083649f, +0.0311599f, -0.0480118f, +0.3288733f,
  +0.4519683f, -0.0045422f, +0.2650313f, -0.0457595f, +0.1905680f, -0.0493580f, +0.1064734f, +0.0197302f,
  +0.0218676f, -0.0757043f, -0.0596269f, +0.2504354f, -0.0485086f, -0.0180006f, -0.0180759f, -0.1473269f,
  +0.0134292f, -0.0933633f, -0.1157289f, -0.1474061f, +0.3561703f, +0.2499471f, +0.1452044f, -0.1375768f,
  -0.0460900f, -0.2444118f, +0.1784621f, -0.0967891f, +0.2245594f, -0.2769767f, -0.0439395f, -0.0121263f,
  -0.2125671f, +0.0156150f, -0.1726871f, -0.3150793f, +0.3641655f, +0.0445914f, +0.2506046f, -0.1909001f,
  -0.2403730f, -0.0914293f, -0.2278415f, +0.4149495f, +0.0265872f, +0.5976967f, -0.1011827f, +0.4021296f,
  +0.0188564f, -0.0130505f, -0.1728727f, +0.1442227f, -0.1336772f, -0.2319153f, +0.0593180f, -0.1097678f,
  -0.3022715f, -0.3996673f, -0.2380916f, -0.0685295f, +0.5122373f, -0.0738103f, -0.1008268f, -0.7129465f,
  -0.0940128f, -0.2959772f, -0.1306855f, +0.1883278f, -0.0203528f, -0.0672475f, -0.2772946f, -0.7502403f,
  -0.2473049f, +0.0196805f, -0.0609230f, -0.0116704f, -0.2496907f, -0.2106933f, -0.0595526f, -0.0096301f,
  +0.0488086f, +0.0914533f, -0.2024081f, +0.0107599f, -0.3683300f, -0.0029557f, -0.0792149f, -0.0386867f,
  -0.2087746f, +0.0146526f, -0.0786489f, +0.5390412f, +0.0356357f, -0.2938770f, -0.1713011f, -0.1488367f,
  -0.2201153f, -0.4420135f, +0.3390672f, -0.3103056f, -0.1899846f, +0.0608092f, -0.2452656f, -0.3835793f,
  -0.1833156f, -0.0429150f, +0.3176282f, +0.4387959f, +0.0623549f, -0.2151406f, -0.2099297f, -0.2161124f,
  +0.2365980f, -0.1141204f, -0.2961859f, -0.4455011f, -0.0962841f, -0.0717664f, -0.2577102f, +0.0762225f,
  +0.0233785f, -0.1056408f, +0.2124367f, +0.0346968f, +0.0838157f, -0.2800029f, -0.0778275f, -0.5568845f,
  -0.3638678f, -0.2944116f, -0.4573137f, +0.3316655f, +0.0531154f, -0.2262047f, -0.2130337f, -0.2794970f,
  -0.0113816f, -0.2399958f, -0.1561431f, +0.2486382f, -0.0648515f, +0.2472836f, -0.1088671f, -0.2506519f,
  +0.0981553f, -0.1633148f, -0.2994012f, +0.0492871f, -0.2213519f, -0.0185549f, -0.0565031f, +0.1330244f,
  +0.3172781f, -0.2283948f, -0.4320492f, -0.1090785f, +0.0430854f, +0.0786561f, -0.2626412f, +0.3509270f,
  +0.4449608f, -0.0128567f, -0.2449237f, +0.0154739f, -0.3566331f, -0.2175330f, -0.1702389f, -0.0548916f,
  +0.0615828f, -0.0976545f, -0.3424914f, +0.1645223f, -0.1866664f, +0.0457620f, -0.0997366f, +0.2070575f,
  -0.2818803f, -0.2075381f, -0.2629968f, -0.1741409f, +0.1282168f, +0.2652288f, -0.3979532f, -0.0275878f,
  +0.0966056f, -0.4759648f, +0.0405575f, +0.2579524f, +0.3087902f, +0.1035525f, -0.0550691f, -0.1336546f,
  +0.1208770f, -0.3431718f, -0.3505693f, -0.1258691f, +0.2368778f, +0.2302735f, -0.0565888f, -0.1366122f,
  +0.2647461f, -0.0598798f, -0.0191205f, +0.0914878f, -0.1062887f, +0.2850902f, +0.0261727f, +0.1839857f,
  +0.1121695f, +0.0151104f, +0.0505121f, +0.0564628f, +0.1218615f, -0.2976362f, -0.0017083f, +0.0505876f
);

const float biases[4] = float[4](
  +0.0298689f, -0.0360001f, +0.0708460f, +0.0033851f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer14 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0142268f, +0.0313788f, -0.0087121f, +0.2031764f, -0.0537775f, -0.1410087f, -0.1664607f, -0.0159551f,
  -0.1408746f, +0.1207337f, -0.1659625f, -0.5689461f, -0.4104334f, -0.0542054f, -0.0528555f, -0.0927995f,
  -0.1014213f, +0.0081350f, -0.1042911f, +0.1662411f, -0.3963477f, +0.0096860f, -0.0100662f, +0.0756219f,
  -0.2498676f, -0.1273383f, -0.2144374f, +0.1363391f, -0.2931856f, +0.1505925f, -0.2959197f, -0.0621136f,
  -0.5554008f, +0.3530784f, +0.1025062f, -0.0764379f, +0.6376187f, +0.3854017f, -0.0100215f, -0.1506031f,
  +0.0821158f, -0.1274170f, -0.1614875f, +0.1659885f, +0.0040680f, +0.3747384f, +0.1455668f, -0.1501685f,
  +0.0866223f, +0.2552258f, +0.0188734f, +0.0303798f, -0.0256093f, +0.0299514f, -0.0373987f, -0.5530544f,
  -0.5868697f, +0.0785827f, -0.3970084f, +0.1932316f, -0.0055316f, -0.4928651f, +0.0361307f, -0.2222578f,
  -0.0762302f, -0.2116335f, -0.2494933f, +0.1279314f, -0.2781231f, -0.0840428f, +0.0997587f, -0.1988298f,
  -0.0480778f, +0.0331390f, -0.0766049f, -0.0750498f, +0.0294969f, +0.1895239f, +0.0841747f, -0.0695272f,
  -0.0698503f, +0.1506085f, +0.0925787f, +0.0836131f, -0.0170898f, -0.1827615f, +0.1714717f, +0.0223408f,
  -0.0836532f, +0.0416938f, +0.0689061f, -0.0923789f, +0.2740670f, +0.0219600f, -0.0173909f, -0.0380084f,
  -0.1741315f, -0.2799628f, +0.0115364f, -0.2096252f, +0.0948744f, +0.2132437f, +0.1002762f, +0.0751340f,
  +0.1461265f, -0.0794269f, -0.1366451f, +0.3497750f, -0.0122889f, -0.1739827f, +0.0624044f, +0.1990166f,
  -0.0957960f, +0.1247856f, +0.1160218f, -0.1685335f, -0.3617282f, -0.1563249f, +0.0309243f, -0.0237806f,
  -0.1822740f, +0.2758300f, +0.0442640f, -0.0355973f, -0.2619717f, +0.0019106f, +0.0846880f, -0.1289349f,
  -0.2935318f, -0.2058572f, -0.0463565f, +0.3682268f, -0.1786245f, -0.2444629f, +0.0128971f, -0.3127739f,
  +0.0087545f, -0.0104610f, -0.0257176f, -0.2333826f, +0.0499124f, +0.1229134f, +0.0957066f, -0.1128686f,
  +0.0136739f, -0.1108135f, +0.0363342f, -0.3236680f, -0.2883353f, -0.3944771f, -0.1730088f, -0.0060083f,
  +0.0464504f, -0.2455948f, +0.1479416f, +0.2606354f, -0.1100845f, -0.2185734f, -0.1065244f, -0.0729061f,
  -0.1591909f, -0.1223821f, +0.1869033f, +0.0361371f, -0.0007207f, +0.1772828f, -0.0363393f, +0.1935667f,
  -0.0316061f, -0.2985992f, +0.3270155f, -0.2639399f, +0.2107379f, -0.4501400f, -0.4577094f, -0.2029216f,
  +0.2431702f, +0.0609486f, +0.4297928f, +0.0516451f, -0.0822823f, -0.2040757f, -0.3745170f, +0.3151343f,
  -0.2612658f, +0.2149725f, +0.0464798f, +0.4181065f, -0.3255614f, -0.3646157f, -0.4588197f, +0.1423795f,
  +0.1500459f, -0.4646109f, -0.2039914f, +0.0524832f, +0.4189617f, -0.2091379f, -0.1493544f, +0.0423110f,
  +0.5154347f, +0.4151851f, +0.1090775f, +0.1211630f, -0.0254102f, +0.0953279f, -0.4020674f, +0.0433185f,
  +0.0432123f, +0.0384030f, +0.1290290f, +0.2220796f, -0.2516600f, -0.4162793f, -0.3173882f, -0.3870618f,
  +0.0015093f, -0.1676391f, -0.2978382f, -0.2460234f, +0.0884739f, -0.4303344f, -0.0980926f, +0.0243619f,
  +0.3760405f, +0.0016522f, -0.5051011f, -0.0394380f, -0.0322971f, -0.1182012f, -0.0810465f, +0.1980086f,
  +0.1444938f, +0.0650907f, -0.2247794f, -0.2386756f, -0.1432337f, -0.2170851f, -0.0598942f, -0.5225783f,
  -0.3235599f, +0.4215001f, -0.1431798f, -0.4159641f, +0.4962718f, +0.1161075f, -0.1912982f, -0.2824823f,
  -0.1868171f, +0.0751632f, +0.0503425f, +0.7082216f, -0.1514722f, +0.0705326f, -0.4099231f, +0.3175396f,
  -0.1123836f, -0.2058307f, -0.0896433f, +0.5527807f, -0.2301024f, +0.0038662f, -0.2761087f, -0.5485505f,
  +0.1275781f, +0.5370566f, +0.0800615f, +0.1241210f, -0.1598890f, +0.0091416f, +0.0760360f, +0.1728721f,
  -0.0189601f, +0.4617312f, -0.1129879f, +0.2037288f, -0.3019734f, -0.2808526f, -0.1782591f, +0.1131041f,
  -0.0883140f, +0.0711131f, -0.1157833f, +0.0595004f, +0.1191001f, +0.0889672f, -0.1779133f, -0.4235247f
);

const float biases[4] = float[4](
  +0.0360883f, -0.0685279f, +0.0034040f, -0.0757213f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer15 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0123769f, -0.1090225f, +0.0523128f, +0.1996683f, +0.1978972f, +0.0199222f, +0.2497964f, +0.1336914f,
  +0.1266264f, +0.2758229f, +0.3087932f, +0.0136599f, +0.3620033f, -0.1684991f, +0.3609281f, -0.0393335f,
  +0.0018080f, -0.1044551f, +0.0772725f, +0.0561664f, +0.0580059f, +0.0915781f, +0.0681696f, +0.0726579f,
  -0.0872913f, -0.5838525f, -0.7365353f, +0.2972014f, -0.8352476f, -0.1357623f, -0.1258758f, -0.2387452f,
  +0.1374654f, +0.3853118f, +0.0615519f, -0.1201283f, +0.3076785f, +0.1108313f, +0.2612921f, +0.2032527f,
  +0.1769986f, +0.0381605f, -0.0375181f, +0.0876874f, +0.2264592f, -0.1073189f, +0.0477996f, -0.0919083f,
  +0.3629914f, -0.6369933f, +0.0673225f, +0.1753447f, +0.0935345f, -0.1740846f, +0.2108819f, -0.4296815f,
  -0.2053049f, -0.0650832f, +0.2536273f, -0.2656393f, -0.1889967f, -0.3143616f, +0.4565763f, -0.2169140f,
  +0.0613058f, +0.0340363f, -0.0687888f, -0.0848824f, +0.0234893f, -0.0237015f, +0.0724961f, -0.1820358f,
  -0.2764644f, -0.3611694f, +0.0703495f, +0.0772346f, +0.3784427f, +0.0184789f, -0.4572646f, -0.2564571f,
  -0.2003763f, +0.1175402f, -0.0587062f, +0.4767267f, +0.0877927f, -0.0058489f, -0.4097742f, -0.1974228f,
  +0.2311291f, +0.3135102f, +0.2775665f, -0.0118438f, +0.2078913f, +0.0059034f, +0.3962538f, -0.2527440f,
  +0.1920536f, -0.5798032f, -0.1245893f, -0.0948335f, +0.0197211f, -0.1502528f, -0.4433565f, -0.5651491f,
  +0.0921041f, -0.8660682f, +0.2515733f, +0.0346971f, +0.1516010f, -0.0323323f, -0.2155809f, -0.3743508f,
  -0.7891637f, -0.4087258f, +0.3004404f, -0.1698359f, -0.2691677f, -0.2428072f, +0.0811837f, -0.1507631f,
  +0.4946378f, -0.1892445f, +0.0278914f, +0.2418861f, -0.3456276f, +0.0006499f, -0.0926689f, -0.0825754f,
  +0.4868727f, -0.0165878f, -0.3043076f, +0.1777192f, +0.1475708f, -0.0612103f, -0.2133836f, +0.2505798f,
  -0.1502237f, +0.5522922f, -0.0228211f, -0.1022879f, +0.1735645f, -0.0881363f, +0.1139402f, +0.0470404f,
  +0.0209479f, -0.1354962f, -0.0979608f, +0.1619060f, +0.1560613f, -0.0605117f, -0.1223504f, +0.0036362f,
  -0.2918317f, -0.0462025f, -0.2221038f, -0.0467786f, -0.0297363f, -0.0063119f, -0.4856349f, -0.0011712f,
  -0.1444112f, -0.1119735f, -0.2867393f, +0.1333050f, +0.0596195f, -0.0169973f, -0.3157643f, +0.0738504f,
  -0.1574779f, +0.2210769f, +0.0689456f, -0.1473460f, -0.0223041f, +0.1293029f, +0.0234602f, +0.2279235f,
  -0.1259744f, +0.6730660f, +0.1833878f, +0.3737316f, +0.3789780f, +0.0630476f, +0.0471903f, +0.1603003f,
  -0.2689313f, +0.0267941f, -0.1349788f, +0.4273369f, +0.1976331f, -0.0243259f, +0.1092494f, +0.3258878f,
  -0.0648788f, -0.1019204f, +0.0776434f, -0.1124222f, -0.1959401f, -0.0627164f, +0.1175264f, +0.0404404f,
  +0.5063767f, -0.0453676f, +0.3477131f, -0.2331301f, +0.0835846f, +0.0980092f, -0.2119910f, -0.0319090f,
  +0.0753581f, +0.2425241f, +0.1170572f, -0.1515132f, -0.0680339f, +0.1042792f, +0.1335581f, +0.0713989f,
  -0.0973468f, -0.0478333f, -0.0760428f, +0.0200969f, +0.1745847f, +0.2935349f, -0.0722737f, +0.1578404f,
  +0.0706569f, -0.2793694f, +0.0643085f, -0.1389791f, +0.2917615f, +0.1412147f, +0.2587343f, +0.2702973f,
  +0.1789759f, -0.2166289f, -0.0442409f, +0.0373017f, +0.0782756f, +0.1295681f, +0.1680825f, +0.1177587f,
  -0.2766553f, +0.3014080f, -0.0852647f, -0.0339118f, +0.5954282f, +0.0588371f, -0.2818152f, -0.0248461f,
  +0.2636823f, +0.0667928f, -0.0128972f, +0.1762944f, -0.0494722f, -0.0714095f, +0.4943447f, +0.2368674f,
  +0.0631169f, -0.1449221f, +0.0083707f, +0.0424492f, +0.0341731f, -0.1356260f, +0.2950685f, +0.0929437f,
  -0.5472007f, +0.4028115f, +0.5116737f, +0.0569603f, +0.3171124f, -0.1388479f, -0.0130470f, +0.0325985f,
  +0.2575368f, +0.0247724f, +0.1187389f, -0.1672140f, -0.1012107f, -0.0988575f, +0.0049788f, -0.3416204f,
  +0.3899248f, -0.0527081f, +0.2562900f, -0.0401361f, -0.0403686f, +0.0906957f, -0.0598962f, +0.0262334f
);

const float biases[4] = float[4](
  -0.1383535f, -0.1412472f, +0.1274599f, +0.0940815f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer15 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0738513f, -0.1489732f, +0.0116111f, +0.2413763f, +0.2114246f, -0.2020482f, -0.0610036f, -0.2660975f,
  -0.0257491f, -0.2887363f, -0.3084435f, +0.4959551f, +0.4914048f, -0.0706962f, +0.0489566f, -0.0648786f,
  -0.2199643f, -0.1204590f, +0.3325622f, +0.0020899f, +0.0996482f, -0.2368910f, -0.0074650f, +0.0609132f,
  +0.0712037f, -0.2594761f, +0.1327704f, -0.0653486f, +0.2409043f, +0.0761771f, +0.1598268f, +0.1116669f,
  +0.0469879f, -0.0305396f, +0.0563304f, +0.2875321f, +0.3211264f, -0.1001264f, +0.4921600f, +0.1226749f,
  +0.4838586f, -0.0923836f, +0.2681122f, -0.2763787f, -0.1327101f, -0.0917611f, +0.3018313f, -0.0440460f,
  -0.1099720f, +0.0476864f, +0.3758089f, -0.0129740f, +0.0355400f, +0.2458490f, +0.0290223f, -0.0257534f,
  +0.5184116f, +0.2128409f, -0.1492378f, +0.1427565f, +0.4610801f, -0.0142486f, -0.0337303f, -0.3660008f,
  -0.2085718f, +0.0532063f, -0.1760031f, -0.2019974f, -0.1951222f, -0.2575966f, -0.0465805f, +0.2492664f,
  -0.0338673f, +0.0250199f, +0.0111274f, -0.0995962f, -0.1492586f, -0.0829915f, +0.0163548f, +0.0725641f,
  +0.0926155f, +0.0743089f, +0.2120066f, -0.0529437f, -0.3921131f, -0.0211850f, +0.1214043f, +0.3860444f,
  -0.0875054f, +0.3780618f, +0.0043039f, +0.0328784f, -0.4353893f, +0.0367358f, -0.4186527f, -0.2198550f,
  +0.2602056f, -0.0636347f, +0.1288660f, +0.0925039f, -0.2985517f, +0.2103116f, -0.0592634f, -0.0729431f,
  +0.4112222f, +0.0926640f, +0.1030616f, -0.4854656f, -0.1601923f, +0.3175197f, +0.0308191f, +0.2182196f,
  -0.0492544f, +0.1004551f, +0.1855405f, -0.1248816f, -0.4152763f, +0.2076758f, -0.2292919f, -0.4671436f,
  -0.0848936f, +0.1656627f, -0.3058327f, +0.0266186f, +0.1216282f, +0.0367096f, -0.1057018f, +0.0005055f,
  -0.7327686f, +0.3487529f, -0.3749636f, -0.3326698f, +0.3335011f, -0.0360949f, -0.0396646f, +0.0461351f,
  -0.1753309f, -0.0073784f, -0.2294308f, -0.0509019f, +0.0561690f, -0.0778463f, -0.1571418f, -0.4697149f,
  +0.3249180f, -0.0835331f, +0.0767367f, -0.0462581f, -0.0587225f, +0.0423086f, -0.2406775f, -0.1972364f,
  +0.1879102f, +0.3505735f, -0.2863896f, -0.2163972f, +0.0816002f, -0.0041480f, -0.2629996f, -0.0560878f,
  -0.0097692f, +0.0501242f, +0.0425474f, +0.0128301f, +0.1367316f, +0.0804954f, +0.1199289f, +0.1751151f,
  +0.3668295f, -0.1047026f, -0.1231049f, +0.0076080f, -0.1572708f, -0.2204819f, +0.0159096f, -0.0589111f,
  +0.4049450f, +0.5107145f, -0.1762813f, +0.0141291f, +0.0035636f, -0.3554659f, -0.6564589f, +0.2157440f,
  -0.1137333f, +0.0915150f, +0.1154453f, -0.0739378f, +0.1271188f, -0.2282700f, +0.2680394f, -0.4881690f,
  +0.3449050f, -0.0094678f, -0.1406254f, -0.0389020f, -0.1498175f, +0.0652399f, -0.0134328f, +0.0284010f,
  +0.2462593f, +0.2345359f, -0.2213494f, -0.0207585f, +0.2471132f, -0.0169952f, +0.3209217f, +0.0883183f,
  -0.3594729f, +0.2046770f, -0.2069606f, -0.0070108f, -0.1008554f, +0.0978298f, +0.2501376f, -0.0693911f,
  +0.0846886f, -0.3585363f, -0.1124544f, -0.0436424f, -0.0386362f, -0.0614217f, +0.0015414f, +0.0436833f,
  -0.1961950f, +0.3794974f, +0.0110604f, +0.1392756f, -0.3025332f, -0.2849024f, -0.1528322f, +0.0193964f,
  +0.2284753f, +0.1374058f, -0.0124047f, -0.0238767f, +0.0873867f, -0.0503227f, +0.1111161f, -0.2143417f,
  -0.1079665f, +0.4261990f, -0.3266649f, +0.1991653f, +0.1422633f, -0.0238351f, -0.3587066f, -0.1799682f,
  -0.0537673f, -0.7253551f, +0.1462135f, -0.0251450f, +0.3311233f, +0.0331819f, -0.0873161f, -0.1745069f,
  +0.1534908f, +0.2053358f, +0.0293540f, -0.2327454f, +0.1744381f, -0.0970704f, -0.0659619f, +0.0817886f,
  -0.1460825f, +0.4415728f, -0.6856431f, -0.3555758f, +0.1775203f, -0.2829876f, +0.1458407f, -0.2271482f,
  +0.2765782f, -0.5392238f, +0.3859830f, +0.1412378f, +0.2608151f, -0.0021119f, +0.4802788f, +0.2825400f,
  -0.1708399f, +0.0219187f, -0.0193457f, +0.0181544f, -0.4854275f, +0.2998457f, -0.3714789f, +0.0356613f
);

const float biases[4] = float[4](
  -0.1704273f, +0.0022282f, +0.0994839f, -0.0499538f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer16 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1366073f, +0.3523912f, -0.0336197f, -0.1760851f, +0.0445177f, +0.3757618f, -0.1222064f, -0.1119088f,
  -0.0293249f, -0.3590961f, +0.0733650f, -0.1913849f, -0.1484679f, -0.0752732f, -0.0796600f, -0.3547885f,
  +0.2132016f, -0.2318658f, -0.0707840f, +0.5537692f, -0.0147822f, +0.2095473f, -0.1197910f, -0.1655345f,
  +0.0483306f, -0.0506267f, +0.1238629f, +0.2245615f, -0.1916395f, -0.0600727f, +0.2329366f, +0.0190924f,
  +0.1631609f, +0.0482994f, -0.1873949f, +0.0547627f, -0.3485155f, -0.0991868f, +0.1956759f, -0.2576377f,
  +0.0117653f, -0.0022019f, -0.0260962f, -0.1050335f, +0.1151519f, -0.1535694f, -0.3677824f, +0.0041070f,
  -0.0515703f, +0.2285763f, -0.0899573f, +0.0830683f, -0.0232135f, -0.2528466f, +0.0114787f, -0.0283780f,
  -0.0100145f, +0.2126969f, +0.0452533f, -0.0730344f, +0.1344451f, -0.0351044f, -0.3723197f, +0.2849892f,
  +0.5296704f, +0.0797839f, -0.2034140f, +0.1916530f, -0.1183064f, +0.0104572f, -0.0697847f, +0.1076342f,
  -0.0225400f, -0.1631352f, +0.0509271f, +0.1138459f, -0.4039286f, -0.1197238f, -0.3219564f, -0.2433652f,
  -0.2711347f, +0.1371366f, +0.4607584f, +0.0766884f, +0.1040470f, +0.2119008f, +0.0858963f, -0.2081832f,
  +0.8095898f, -0.1804337f, -0.0005169f, +0.3390529f, -0.2195611f, +0.0967512f, +0.0319878f, +0.3508962f,
  +0.0823523f, +0.3576562f, -0.2639639f, -0.0259925f, +0.0421134f, -0.0916450f, -0.2024679f, -0.2415326f,
  -0.5094658f, +0.2970020f, +0.1194356f, +0.2669730f, +0.1275628f, -0.2655560f, +0.0057229f, -0.2717248f,
  +0.6860833f, +0.1438099f, -0.0120750f, +0.0690149f, +0.0713546f, -0.2480055f, +0.0868151f, -0.2309955f,
  +0.0552254f, +0.0289300f, -0.1985844f, +0.3343683f, +0.1188680f, +0.2456856f, -0.0528549f, -0.2907318f,
  -0.5643640f, +0.0595470f, -0.2080315f, +0.2016709f, -0.0530095f, -0.1793258f, +0.1906725f, -0.3274689f,
  +0.3333012f, +0.1165523f, +0.4084611f, -0.1070970f, -0.0182077f, -0.3477853f, -0.0599815f, -0.1349535f,
  +0.0514135f, +0.2185884f, -0.0310081f, -0.0513778f, +0.5296243f, +0.0320998f, +0.1163774f, +0.1597054f,
  +0.3892406f, -0.0337606f, -0.0424095f, -0.0183895f, -0.1900697f, -0.0470935f, -0.0694293f, +0.4904796f,
  -0.1447588f, -0.1637532f, +0.0300470f, -0.2500955f, +0.2663617f, -0.0852482f, -0.1726189f, +0.2880713f,
  -0.1557267f, -0.1246312f, +0.1019939f, -0.2724541f, +0.1202466f, -0.0266722f, -0.3167118f, +0.2803132f,
  +0.4339103f, +0.3577137f, +0.3363541f, +0.4682652f, -0.2247254f, -0.1286526f, +0.0974574f, +0.3326941f,
  +0.6098921f, +0.3943899f, +0.1878175f, +0.2575322f, -0.2130801f, +0.0321887f, -0.0467170f, +0.4227307f,
  -0.2117128f, -0.2675124f, -0.0760569f, -0.2012709f, -0.0019309f, +0.0122442f, -0.4510438f, +0.1599735f,
  -0.3945034f, -0.4508601f, +0.1907581f, -0.3327329f, -0.0003141f, -0.1731809f, -0.0598169f, +0.2206540f,
  +0.3780661f, +0.2719934f, +0.3782400f, +0.1408405f, -0.0957006f, -0.1389750f, +0.0951431f, +0.3251886f,
  +0.1459993f, -0.0548731f, -0.0451906f, +0.0290338f, -0.0272596f, +0.0734752f, +0.2769123f, -0.0384127f,
  -0.0533316f, +0.2009494f, -0.2500660f, -0.1171228f, -0.1559501f, +0.0681431f, -0.1580986f, +0.0827059f,
  +0.1337309f, -0.0484770f, -0.3895492f, -0.1420078f, +0.3232984f, -0.1906763f, +0.0939624f, +0.0796947f,
  -0.0375166f, +0.0418903f, +0.0226482f, +0.2937025f, +0.0371198f, +0.1325129f, +0.0161625f, +0.1241419f,
  +0.0075220f, -0.2756597f, +0.1589512f, +0.0650767f, -0.0476165f, +0.5557854f, +0.1360464f, +0.1713764f,
  -0.2873662f, +0.0487192f, +0.1281509f, +0.0139705f, +0.0296809f, +0.2248920f, +0.3618485f, +0.0057826f,
  -0.0375397f, +0.0489565f, +0.1996828f, -0.1969339f, -0.0763508f, +0.0673996f, -0.0403687f, +0.1990226f,
  +0.3084178f, +0.0349404f, +0.0733052f, +0.2701508f, +0.0216191f, +0.1181551f, -0.0106225f, +0.1933421f,
  -0.1551706f, -0.1027181f, -0.0292317f, +0.2149804f, -0.0644875f, +0.2905453f, -0.1217972f, +0.1522974f
);

const float biases[4] = float[4](
  +0.0800068f, -0.0654435f, +0.0307139f, -0.0078235f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer16 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0270145f, -0.0248193f, -0.1323332f, -0.3787605f, +0.0361206f, +0.0613606f, +0.0310967f, -0.0214109f,
  -0.4919926f, +0.0055985f, +0.0376193f, -0.0757295f, -0.4273311f, -0.3142335f, -0.1044132f, -0.2799553f,
  -0.2247270f, -0.0369661f, +0.1232239f, -0.0656449f, +0.1249290f, -0.0375760f, +0.1348598f, +0.2792927f,
  -0.1714413f, +0.3258338f, -0.0875596f, +0.2597928f, +0.1952263f, -0.2051244f, +0.1779343f, +0.2342856f,
  +0.1247810f, -0.2811519f, -0.2371698f, +0.1614811f, -0.2491331f, -0.1383188f, +0.1227125f, +0.5205820f,
  +0.2642043f, -0.6148018f, -0.1368320f, -0.1479145f, -0.0211435f, +0.2024636f, +0.1491368f, +0.3703936f,
  +0.1772607f, +0.1923225f, +0.0248424f, +0.0713129f, -0.1269554f, -0.0209181f, -0.1095199f, +0.2663676f,
  -0.0846058f, -0.1241243f, -0.1066250f, -0.3221506f, +0.0927178f, +0.1694353f, -0.1673075f, +0.2506776f,
  -0.0923352f, -0.4077262f, -0.0418411f, +0.1567626f, +0.1818569f, +0.1466534f, -0.3328289f, +0.2346551f,
  +0.0478774f, +0.2193253f, -0.0273964f, -0.0606851f, +0.1409354f, -0.0565291f, -0.0461283f, +0.2529336f,
  +0.1625272f, -0.0022797f, +0.0164157f, +0.0624644f, +0.2504966f, +0.1439976f, +0.0979880f, +0.4438146f,
  -0.2098935f, +0.0294088f, +0.1230815f, -0.0207584f, +0.0774443f, -0.0067960f, -0.0658269f, +0.1676301f,
  -0.0043888f, +0.0168678f, +0.1726702f, -0.2581589f, -0.0687329f, +0.3098004f, +0.1171481f, +0.0532333f,
  +0.3922168f, +0.1066313f, -0.1265659f, +0.2532598f, +0.1529739f, -0.3190144f, +0.0213653f, +0.2591032f,
  +0.1753677f, +0.0441421f, +0.0290801f, -0.0554226f, -0.0553816f, -0.3302360f, +0.0610782f, -0.0319892f,
  -0.3037568f, -0.2437050f, -0.1391123f, -0.0823596f, -0.1189214f, +0.0097704f, -0.2562698f, +0.0500483f,
  +0.0731289f, -0.1430169f, +0.0537779f, -0.0424942f, +0.0120200f, +0.0584095f, +0.1222125f, +0.0989672f,
  -0.0878307f, +0.0800318f, +0.0803757f, -0.0868963f, -0.0435620f, -0.1930882f, +0.0021581f, +0.0642259f,
  -0.1802101f, -0.0468904f, -0.0404491f, -0.1030385f, -0.0503751f, +0.0161550f, -0.2501464f, -0.1757383f,
  +0.2486160f, +0.2636708f, +0.0371140f, +0.1543106f, -0.3169061f, -0.3171754f, -0.0706579f, -0.2601618f,
  +0.0835924f, +0.2916768f, +0.0095857f, -0.3321843f, -0.2601976f, -0.2873888f, -0.1070700f, -0.5141890f,
  -0.3123361f, -0.1516476f, +0.0664251f, -0.1922245f, +0.3717744f, -0.1724269f, -0.4515853f, -0.0891890f,
  +0.1721303f, +0.0586985f, +0.0051933f, +0.0453522f, -0.4937817f, -0.2330206f, -0.2489227f, -0.2881713f,
  -0.2351817f, +0.5403945f, +0.1353778f, -0.0601833f, -0.2179873f, -0.0330591f, -0.3031978f, -0.1686541f,
  -0.0716769f, -0.3940833f, +0.2591773f, -0.0465121f, +0.4009651f, +0.2495833f, -0.1488009f, -0.0303555f,
  +0.1970354f, +0.3030190f, +0.6518678f, +0.1309474f, -0.1166593f, -0.1792852f, +0.2272970f, -0.0394009f,
  -0.0926873f, +0.4800934f, +0.1514161f, +0.2604655f, +0.2618895f, +0.3865496f, +0.3112854f, -0.0249018f,
  +0.2603504f, +0.3885544f, -0.0502508f, -0.1330018f, -0.1122469f, +0.3276210f, -0.1823282f, +0.0835163f,
  +0.1353656f, +0.0782788f, -0.5192106f, -0.0619073f, +0.0255186f, +0.1148784f, -0.1740332f, +0.5253680f,
  +0.0275623f, +0.1531891f, -0.2886418f, -0.1177590f, +0.2148118f, +0.1500628f, +0.0513367f, +0.4111634f,
  +0.0089087f, -0.3732869f, +0.1453970f, -0.2186675f, -0.0904186f, +0.2079278f, +0.5298648f, +0.1021313f,
  -0.0208522f, -0.0854177f, -0.0705526f, -0.3052585f, +0.0872216f, +0.1658376f, +0.4058606f, +0.2250140f,
  +0.2259881f, +0.2090789f, -0.0006198f, +0.3985504f, +0.0672176f, +0.3578002f, +0.2909794f, +0.1211028f,
  -0.1326962f, -0.2071084f, +0.0351979f, +0.0238018f, -0.0931617f, +0.0852457f, -0.2089785f, +0.1334584f,
  -0.0253616f, +0.1682797f, +0.0806644f, +0.0508755f, +0.1987322f, +0.0952356f, +0.0449314f, +0.2361616f,
  -0.2144175f, +0.0473228f, -0.0868056f, +0.1608115f, +0.1949570f, +0.2055132f, -0.1047709f, +0.3351462f
);

const float biases[4] = float[4](
  +0.0100607f, -0.0227595f, +0.0054744f, -0.0062546f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer17 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2024689f, -0.5480351f, -0.0086701f, +0.4037603f, +0.3653176f, -0.1214628f, -0.1587067f, -0.1124026f,
  +0.3482570f, -0.1205936f, -0.0101375f, -0.2193412f, +0.4096486f, -0.5027775f, +0.1147885f, -0.4439039f,
  -0.3636595f, -0.1569275f, -0.1513357f, -0.0310052f, -0.0809537f, -0.1657074f, +0.2530773f, +0.2656536f,
  -0.0585021f, -0.6645934f, +0.0927079f, +0.2122980f, +0.0406405f, +0.0307963f, -0.4751939f, -0.6918701f,
  +0.6013681f, +0.1207775f, -0.0819540f, -0.2197275f, +0.0417424f, -0.1206960f, +0.1713203f, -0.7656156f,
  -0.1241152f, +0.0287304f, +0.0117396f, -0.2319750f, -0.1266922f, -0.4225386f, +0.6320564f, +0.1068476f,
  -0.2503540f, +0.3498553f, +0.1714728f, +0.0984446f, +0.0887862f, -0.1284494f, +0.1654553f, -0.1833776f,
  -0.5375170f, +0.6378252f, -0.0552680f, -0.0669825f, -0.1374804f, +0.0312099f, +0.1290207f, -0.0558537f,
  -0.4592708f, +0.2832179f, -0.3198283f, -0.1096814f, -0.1789036f, +0.2605176f, +0.4064467f, +0.0847779f,
  +0.1348783f, -0.2740273f, +0.0203493f, +0.4374616f, -0.0721293f, -0.0447848f, -0.0352532f, -0.3026543f,
  -0.1658698f, -0.5370452f, -0.1520964f, +0.0689766f, +0.0992386f, +0.1195665f, -0.4372802f, -0.2713036f,
  -0.1502697f, +0.0133331f, -0.1090131f, -0.1472933f, +0.1681822f, -0.0210582f, -0.1858335f, +0.0024507f,
  -0.1539216f, +0.5586395f, -0.0333397f, -0.6342467f, +0.3713001f, +0.0965511f, +0.2561066f, +0.1799066f,
  +0.4702320f, +0.6668850f, -0.1425722f, +0.2770022f, -0.0540811f, +0.0316995f, +0.5500380f, +0.3453932f,
  +0.3576843f, +0.0182580f, -0.0307780f, +0.2579265f, +0.1425575f, -0.1527867f, +0.4153229f, -0.0571185f,
  +0.2016818f, -0.7299079f, +0.0201595f, +0.4080606f, -0.1644731f, -0.2745210f, -0.3898562f, -0.4890744f,
  +0.1260742f, +0.1472868f, +0.1498315f, -0.3644454f, +0.0506962f, -0.3473867f, -0.1577366f, +0.1500014f,
  -0.0006803f, +0.2792571f, -0.0654888f, -0.0249464f, +0.0464059f, -0.1030427f, +0.0742500f, -0.1875869f,
  -0.0213611f, +0.1111241f, +0.1489947f, +0.0811094f, -0.0269142f, -0.0213105f, +0.1068778f, -0.2717395f,
  -0.3626956f, +0.5835646f, -0.0523618f, +0.1793247f, -0.1518877f, +0.0885363f, +0.1026575f, -0.2206061f,
  +0.0472447f, -0.1154625f, -0.0273515f, +0.1987976f, +0.0336452f, +0.0516345f, -0.1024341f, -0.2360042f,
  +0.1223379f, +0.3224428f, +0.0300841f, -0.5651998f, +0.2503768f, +0.3517214f, -0.3021160f, +0.0555199f,
  +0.8638126f, +0.7856176f, +0.6726259f, -0.8449762f, +0.0586892f, +0.2168190f, -0.7367899f, -0.0129021f,
  -0.1886614f, -0.1068503f, -0.1889742f, -0.1984653f, -0.2719126f, -0.1017329f, -0.0824123f, -0.2229764f,
  -0.2560799f, -0.1054230f, -0.3767491f, +0.0970508f, +0.0929813f, -0.1730867f, -0.2410575f, +0.0204521f,
  +0.0779721f, -0.2811543f, +0.1713510f, -0.3036954f, -0.2290247f, -0.0300474f, -0.0577154f, -0.1806331f,
  +0.1980738f, +0.0082400f, -0.1433595f, +0.0426571f, -0.0433758f, -0.1441435f, -0.2191195f, -0.0819367f,
  +0.2320308f, +0.0865542f, +0.0652374f, -0.0528487f, -0.1820416f, -0.4952051f, +0.4869557f, +0.0681304f,
  +0.2686132f, +0.1743884f, +0.0932901f, -0.2342789f, -0.4303485f, -0.0656763f, +0.2962909f, +0.1938105f,
  -0.3032898f, +0.2211569f, +0.0529123f, -0.1282195f, -0.1760642f, -0.0934111f, +0.0437408f, -0.0713764f,
  +0.1019575f, +0.0623068f, -0.0300089f, -0.1869005f, -0.1164944f, -0.0516784f, +0.4855631f, +0.3334746f,
  -0.0420749f, -0.0929529f, -0.1946992f, +0.1442883f, -0.3720976f, +0.2222276f, -0.3581368f, +0.1691044f,
  -0.0622690f, +0.1958414f, +0.0615269f, +0.1536717f, +0.0529100f, +0.2852958f, +0.0050052f, -0.0226374f,
  -0.3118548f, +0.0094269f, -0.1697849f, -0.3082173f, +0.2727976f, +0.0974595f, -0.0117403f, +0.2331987f,
  -0.1845187f, -0.3746564f, -0.3827608f, +0.1035981f, +0.1883436f, +0.1838764f, -0.2499825f, -0.1382958f,
  -0.4705710f, -0.1322764f, -0.1113941f, +0.2064949f, +0.2390640f, -0.1487587f, +0.1269482f, -0.5263064f
);

const float biases[4] = float[4](
  -0.2323680f, -0.0617514f, -0.1335402f, +0.0200545f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer17 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.3320575f, -0.1481831f, -0.1379342f, +0.2872952f, +0.3814282f, -0.2952878f, -0.3340149f, +0.1886174f,
  -0.0389841f, +0.2130871f, +0.1109338f, +0.4394267f, +0.1329727f, -0.2335698f, -0.5843037f, -0.4927334f,
  +0.1346566f, -0.2404137f, +0.0311430f, +0.0539439f, +0.2107943f, -0.0737205f, -0.0985189f, -0.1800691f,
  +0.2068495f, -0.0928574f, -0.2062153f, +0.1000890f, +0.1429779f, -0.2345137f, +0.2189469f, -0.3201136f,
  -0.1873055f, +0.5471529f, -0.2530147f, +0.1043767f, +0.4111440f, -0.3941506f, +0.7962471f, -0.3142885f,
  +0.3238427f, -0.3353105f, -0.0062820f, +0.2530263f, +0.2844929f, -0.1163907f, -0.1881184f, +0.3142357f,
  +0.0836539f, +0.1431078f, -0.2447266f, -0.4213099f, -0.1876211f, +0.1722446f, +0.1814779f, +0.2424581f,
  +0.1380056f, -0.1031848f, -0.1464827f, -0.0203384f, +0.1866360f, +0.0092015f, +0.2788826f, -0.0742245f,
  -0.1383675f, +0.0015469f, +0.0254142f, -0.0540960f, -0.0287237f, -0.1806396f, +0.1466033f, +0.1060894f,
  -0.0735046f, -0.2703400f, +0.0158237f, +0.0764006f, +0.2889722f, +0.0446633f, -0.0695822f, -0.2936277f,
  -0.3053073f, -0.2086001f, -0.0846843f, +0.2122250f, +0.1690120f, -0.3860891f, -0.0375102f, -0.2881589f,
  +0.2532679f, +0.1183552f, +0.1165638f, -0.1568106f, +0.0467056f, +0.0223204f, +0.1601251f, +0.0646583f,
  +0.3995255f, +0.1044131f, -0.0287493f, -0.0543480f, +0.1019704f, +0.0068369f, +0.6691793f, -0.7014171f,
  +0.5525113f, -0.0991943f, -0.4238165f, +0.3044938f, +0.4702072f, -0.0215485f, +0.1064489f, -0.2460052f,
  +0.0936214f, -0.0883530f, +0.1354166f, +0.1365067f, -0.0388016f, +0.0899140f, -0.3215726f, +0.1213350f,
  -0.0062817f, +0.0525891f, +0.4370116f, +0.0218008f, -0.2762455f, -0.0860836f, +0.5230083f, +0.1405387f,
  +0.3541669f, -0.0896044f, +0.4096352f, -0.1123263f, -0.0697822f, +0.1761675f, +0.1475475f, +0.2112782f,
  +0.1922036f, -0.0011208f, +0.3170531f, -0.2811004f, -0.1392003f, -0.0552011f, +0.2884949f, +0.0181064f,
  +0.0252425f, +0.2975427f, +0.0785104f, +0.2826927f, -0.1565048f, +0.2143933f, +0.2710799f, -0.2846951f,
  +0.1232851f, +0.9327356f, +0.5779043f, +0.0587289f, +0.1716502f, +0.3105035f, -0.0039101f, -0.1640408f,
  +0.1880315f, +0.0587099f, -0.0204457f, -0.0809132f, -0.0758333f, -0.0179190f, +0.0641238f, -0.1592736f,
  +0.0200617f, -0.1223577f, +0.0555858f, +0.0772296f, +0.1920141f, +0.0493808f, -0.4323595f, +0.3743090f,
  +1.0772343f, -0.2956833f, +0.2803645f, -0.4593359f, -0.1821722f, +0.1313455f, -0.9047117f, +0.0979084f,
  -0.0711751f, -0.1339956f, +0.0098166f, +0.0954812f, -0.0677966f, +0.0708239f, -0.2286762f, -0.0362088f,
  -0.0681279f, -0.0168066f, +0.0586666f, +0.1525318f, -0.0228346f, -0.0751726f, -0.1331364f, +0.0173459f,
  -0.0561698f, +0.0742231f, +0.1746093f, -0.0592953f, +0.0194391f, +0.0006444f, +0.2060442f, +0.1617440f,
  -0.0730292f, -0.0004241f, -0.0224212f, +0.0871415f, -0.0210616f, -0.0192582f, -0.0801879f, -0.0443941f,
  +0.2510428f, -0.0735074f, +0.0523613f, -0.0423633f, -0.1216396f, -0.0975615f, +0.1573523f, +0.1082771f,
  -0.1719360f, +0.4095515f, +0.0274152f, +0.0756868f, -0.0275497f, -0.2264974f, -0.3896208f, -0.5108949f,
  +0.4691948f, -0.3483587f, -0.1673677f, +0.1154140f, -0.0647503f, +0.1877888f, -0.6872658f, -0.1976594f,
  +0.1801098f, +0.3835235f, +0.7888605f, +0.2770393f, -0.1698655f, -0.2880315f, +0.0406049f, +0.1761484f,
  -0.6643295f, -0.0544729f, -0.4143488f, -0.0701209f, +0.1683793f, +0.1427010f, -0.0842690f, -0.5516210f,
  +0.4221609f, -0.4110037f, +0.3520682f, -0.1186568f, +0.3088343f, +0.0371086f, -0.2728785f, +0.0066884f,
  -0.2057763f, +0.3913259f, +0.1906074f, -0.0989632f, -0.0984675f, -0.0380764f, +0.2993476f, +0.4555983f,
  -0.8192405f, +0.0449671f, -0.4550633f, -0.0624295f, +0.2695911f, +0.1510466f, -0.1372229f, -0.0466657f,
  -0.3386013f, -0.2006279f, +0.1639780f, +0.1595367f, +0.0040884f, -0.0338998f, -0.2677976f, -0.5243731f
);

const float biases[4] = float[4](
  -0.0386364f, -0.0145251f, +0.0909709f, -0.1583231f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer18 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0296994f, -0.1383551f, +0.0290593f, -0.1435202f, -0.1917531f, +0.3692486f, -0.1545394f, -0.1074949f,
  -0.0063252f, -0.2291841f, -0.0725437f, -0.1577769f, -0.1977752f, -0.2804531f, +0.0493943f, +0.0816547f,
  -0.3044161f, -0.0557191f, +0.3254675f, -0.1348160f, +0.2278095f, -0.0895317f, -0.0694763f, -0.0074969f,
  -0.1119203f, -0.2045668f, +0.0142360f, -0.1023538f, -0.2104262f, +0.2002956f, -0.2099676f, -0.0655352f,
  -0.5040944f, -0.2793117f, +0.0622770f, -0.1053034f, -0.2605390f, -0.3601801f, -0.2863631f, -0.2306242f,
  -0.3630366f, -0.8977667f, +0.0235014f, -0.0575075f, +0.0910959f, -0.1348054f, +0.0283460f, -0.0301792f,
  +0.2593049f, +0.0094218f, -0.1001461f, -0.1575482f, -0.2123890f, -0.1637838f, -0.2364763f, +0.0006485f,
  -0.8311414f, +0.1117260f, -0.1236902f, +0.0378902f, -0.0330798f, -0.2485045f, +0.4936494f, -0.1594393f,
  -0.4101639f, +0.3606862f, +0.3117448f, +0.0210764f, +0.1537761f, -0.2628703f, +0.1391950f, +0.2558072f,
  -0.1504212f, -0.0433352f, +0.0916878f, +0.3525622f, -0.0716717f, +0.1867441f, +0.0333657f, +0.2024002f,
  -0.1349031f, -0.4390635f, -0.4523190f, +0.4476534f, +0.3445039f, +0.0623183f, +0.0880414f, +0.0257110f,
  -0.1975257f, -0.0735054f, +0.1174634f, +0.0090333f, -0.1493691f, +0.2780125f, +0.0039645f, -0.0484101f,
  -0.1647467f, +0.1168470f, +0.1120097f, +0.1899400f, +0.5057076f, +0.5605044f, -0.0095700f, +0.5090896f,
  -0.0536591f, -0.2353749f, -1.3448794f, +0.2051279f, -0.0334803f, +0.5921499f, +0.5223641f, -0.0305266f,
  +0.1064690f, +0.1033888f, -0.0465520f, -0.1585975f, -0.0998309f, +0.0912941f, -0.0960382f, -0.4830665f,
  +0.0526672f, -0.0189811f, +0.0904935f, -0.1026257f, +0.3246599f, +0.0327367f, -0.2763615f, +0.4395154f,
  +0.2004834f, +0.0499208f, -0.5835494f, -0.4069275f, -0.3589931f, +0.0828407f, +0.0509545f, -0.1523032f,
  +0.0329972f, -0.3244139f, -0.3520647f, +0.0322094f, -0.1105955f, -0.0016491f, +0.0028448f, -0.4628626f,
  -0.0950714f, -0.0338508f, -0.0852922f, -0.1045711f, -0.3248476f, +0.0376039f, -0.0844582f, -0.1156184f,
  +0.0528075f, +0.2926551f, +0.1921555f, +0.1361148f, -0.2436911f, -0.0471043f, -0.1246536f, +0.2429084f,
  +0.0799771f, +0.2067575f, +0.1064108f, +0.1030440f, +0.0009080f, +0.0393956f, -0.0301819f, +0.0646539f,
  +0.0844360f, +0.1409790f, -0.1266126f, -0.1791969f, -0.4578061f, -0.1382110f, -0.0448440f, -0.0837575f,
  -0.1970785f, +0.3262312f, -0.0080187f, -0.0141040f, +0.0888365f, -0.4892848f, -0.2917774f, -0.0632759f,
  -0.2893104f, +0.6089945f, +0.0067633f, +0.3616413f, -0.2616834f, -0.0574769f, -0.0375574f, +0.0345001f,
  +0.0092429f, +0.2312722f, -0.2635431f, -0.0756412f, -0.3547280f, +0.0639608f, -0.1291501f, +0.0178186f,
  -0.0663709f, +0.3621017f, -0.3897224f, +0.2317445f, -0.6446701f, -0.1080134f, +0.5192747f, -0.1276080f,
  -0.0541049f, +0.2416331f, -0.2688314f, +0.2147194f, -0.1189439f, -0.0980654f, +0.2129183f, +0.2188828f,
  +0.3508820f, +0.1010171f, +0.1425939f, -0.0913305f, +0.0050550f, -0.1344806f, -0.0411843f, -0.0568691f,
  +0.1723281f, +0.5203289f, +0.2953942f, -0.3558806f, +0.1051893f, -0.1438892f, +0.1375727f, -0.1822258f,
  -0.2014070f, +0.4797630f, +0.6075830f, -0.0550686f, -0.2651874f, -0.3101679f, +0.0330725f, +0.0317168f,
  +0.3005033f, -0.1206167f, +0.0756243f, +0.0338247f, -0.1228230f, -0.2770157f, -0.0277081f, -0.2006436f,
  +0.5502118f, +0.0727289f, +0.4762398f, -0.2555114f, +0.1302070f, +0.2365929f, -0.1672901f, -0.4295217f,
  -0.2030187f, -0.3540800f, +0.1295188f, +0.0341914f, -0.0777570f, -0.2084464f, -0.2662653f, -0.0423182f,
  -0.1819267f, +0.0097574f, -0.1984157f, +0.0091258f, -0.0602691f, -0.0754805f, +0.3976092f, -0.3757512f,
  +0.0674058f, +0.0915291f, +0.4550498f, +0.0813487f, -0.0804941f, -0.0233500f, -0.2400244f, +0.0097776f,
  -0.3652939f, +0.4743305f, -0.1107111f, -0.0284929f, -0.0438915f, -0.1054813f, +0.3695402f, -0.1807932f
);

const float biases[4] = float[4](
  -0.0598740f, -0.0330117f, +0.0523286f, -0.0335137f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer18 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0185699f, +0.0435830f, -0.1017806f, -0.3505271f, +0.1211298f, +0.1006561f, -0.0770960f, -0.1846514f,
  -0.1992366f, -0.1683648f, -0.5321063f, -0.0554813f, +0.1548203f, -0.0265048f, +0.2566712f, -0.1289887f,
  -0.4354781f, -0.0526478f, -0.1006526f, -0.0921617f, +0.3847924f, -0.2722359f, -0.0291575f, +0.2556148f,
  +0.2135212f, -0.1805427f, -0.0389696f, +0.0592659f, -0.0928115f, -0.1772355f, +0.0752787f, -0.5124587f,
  -0.0631999f, +0.4666211f, +0.1975205f, -0.2709648f, +0.4784256f, -0.3798203f, +0.3857411f, -0.1861422f,
  -0.5127423f, +0.2517999f, -0.3346082f, -0.0594321f, -0.0985157f, -0.1758205f, +0.2303227f, +0.3132648f,
  +0.0248514f, +0.0387018f, -0.1954175f, +0.0633787f, -0.0989395f, -0.1424593f, +0.0832989f, -0.3267316f,
  -0.0676673f, +0.1863714f, +0.0323751f, +0.2100736f, -0.2988001f, -0.1453115f, -0.2823354f, -0.3415774f,
  -0.3248249f, +0.1325001f, -0.1458509f, -0.0068627f, -0.2813640f, +0.0127828f, -0.1865956f, -0.0251792f,
  -0.3681563f, +0.0826095f, +0.0677868f, +0.0828099f, +0.0412475f, +0.0140083f, +0.0253784f, +0.0095506f,
  -0.2644081f, -0.0578151f, +0.1659557f, +0.1342662f, -0.0610979f, +0.0272799f, -0.1841332f, +0.0142084f,
  +0.2149878f, -0.0840804f, -0.0456787f, +0.1326157f, +0.0747087f, +0.1519607f, -0.0483209f, -0.0516840f,
  -0.1960480f, +0.2494087f, -0.0502640f, +0.1407602f, -0.0286869f, -0.0611692f, -0.1120859f, +0.0301744f,
  -0.1567616f, +0.3366827f, +0.0655318f, +0.1339297f, -0.1223017f, -0.2280872f, -0.2811487f, +0.0538355f,
  +0.1432585f, +0.3820253f, -0.1135985f, +0.1315736f, +0.1031691f, +0.2203379f, -0.1139170f, +0.2377259f,
  +0.2113780f, +0.1344917f, +0.0023286f, +0.0709520f, -0.0137177f, +0.1140663f, +0.0390238f, +0.2248088f,
  +0.1887569f, +0.0286525f, -0.1980768f, +0.0524366f, -0.0814227f, -0.0846506f, -0.1597514f, +0.0265966f,
  -0.0397593f, -0.0176096f, +0.0360614f, -0.0122492f, +0.0848565f, +0.1069968f, -0.0394020f, +0.2837935f,
  +0.3352266f, +0.1227659f, -0.0325876f, -0.0604911f, -0.3891442f, -0.0237971f, +0.0625275f, +0.1093142f,
  +0.2253789f, +0.2745865f, -0.2186779f, +0.0505027f, -0.1286256f, -0.2003804f, +0.0101893f, +0.2073173f,
  +0.1464125f, -0.1922074f, -0.4059471f, +0.2699061f, -0.2264204f, -0.0680794f, +0.2541298f, -0.1662241f,
  +0.0631877f, -0.0088596f, +0.1221267f, -0.2770141f, -0.1842738f, +0.0053859f, -0.0740331f, +0.0289785f,
  +0.4839895f, -0.1013954f, -0.1565934f, -0.1285654f, -0.0543913f, +0.0546206f, +0.7278715f, +0.6615855f,
  +0.1327121f, +0.0356855f, -0.0520734f, +0.0686615f, -0.1657711f, -0.2660229f, +0.6582539f, -0.5040101f,
  +0.2697026f, +0.0969440f, -0.1599774f, +0.0104475f, -0.2665108f, +0.0070958f, -0.1835314f, -0.0661944f,
  +0.1265423f, +0.0722245f, +0.2762614f, -0.0151654f, +0.2134700f, -0.0415021f, +0.4462697f, +0.2248476f,
  -0.2785620f, +0.1025708f, +0.5041882f, +0.3118289f, -0.1528953f, +0.0948978f, -0.2981445f, -0.1777947f,
  -0.5048912f, +0.2500706f, +0.0862056f, +0.2190667f, +0.0284280f, +0.0872669f, +0.0135046f, -0.1665877f,
  -0.1444209f, +0.2069895f, +0.5196063f, +0.0418735f, +0.3201195f, -0.1566700f, -0.0446406f, -0.0250852f,
  +0.3966360f, +0.0297120f, +0.2776171f, +0.1618764f, -0.1291755f, +0.0748605f, +0.0102487f, -0.3504387f,
  +0.0511954f, +0.1541112f, +0.1528869f, +0.2412173f, -0.0020200f, +0.1719512f, +0.0981438f, -0.1781059f,
  +0.3999210f, -0.0357598f, +0.4053818f, +0.0846210f, +0.3137334f, -0.0748436f, -0.5581227f, -0.2428646f,
  +0.7600722f, -0.4158097f, -0.0690087f, +0.1680465f, +0.4537660f, +0.2530688f, -0.3023507f, -0.1936589f,
  +0.1017287f, +0.0894729f, +0.0207322f, +0.1588199f, +0.0245847f, +0.0888393f, -0.0492308f, +0.0767609f,
  +0.1128583f, +0.1364835f, -0.1007840f, +0.1636077f, +0.2928771f, -0.0579573f, -0.1102165f, +0.0911370f,
  +0.3619816f, +0.0900552f, -0.1400726f, -0.0067889f, +0.1759752f, +0.2605531f, +0.1586502f, -0.0703967f
);

const float biases[4] = float[4](
  +0.0229226f, -0.0004044f, -0.0580097f, +0.0428037f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer19 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1193179f, +0.0687834f, +0.0965021f, -0.2161532f, -0.1821135f, +0.1223372f, +0.1278740f, -0.1616423f,
  -0.1020163f, -0.0622307f, +0.3248438f, -0.0466254f, -0.0561126f, -0.0858976f, +0.5439388f, +0.3686964f,
  +0.2261426f, +0.1677320f, +0.1619119f, -0.0450142f, -0.2922218f, +0.0717883f, +0.1876438f, +0.3944893f,
  +0.2924736f, +0.0094980f, +0.0268548f, +0.0240108f, -0.1877391f, -0.0737653f, -0.0886572f, -0.2241696f,
  -0.1148932f, +0.2586535f, -0.0830168f, +0.0035357f, -0.1325420f, +0.0413367f, +0.3358380f, +0.2115123f,
  -0.0687970f, -0.2149521f, +0.1842076f, -0.1473107f, -0.1978412f, -0.1046735f, +0.0435394f, -0.1988064f,
  +0.0747864f, -0.0502312f, -0.4311965f, +0.1731653f, -0.0484172f, +0.1419000f, -0.1689102f, +0.1651062f,
  +0.1946480f, +0.0594442f, -0.2642851f, +0.0840292f, +0.1488143f, +0.3581609f, -0.2624944f, +0.1159256f,
  -0.0636317f, +0.0659160f, +0.2245464f, -0.0760545f, -0.0254159f, +0.2429112f, -0.0599610f, +0.0515952f,
  +0.2213816f, -0.2880208f, -0.3131654f, +0.0412860f, -0.4315264f, -0.1094863f, +0.1097026f, +0.0481752f,
  -0.0077130f, -0.1383434f, +0.2014976f, +0.2761784f, -0.0201748f, -0.1359086f, -0.0170958f, +0.0471842f,
  +0.1651343f, -0.1298119f, -0.0457572f, +0.0569414f, +0.1683702f, -0.0710178f, +0.0572644f, +0.0335849f,
  -0.1116110f, +0.5201397f, +0.7432869f, +0.0249384f, -0.0686306f, +0.0383112f, +0.5872003f, -1.0352129f,
  -0.4263979f, +0.5379758f, +0.5818151f, -0.0724251f, -0.2176210f, +0.1396185f, -0.2450706f, -0.6689804f,
  -0.1399280f, -0.3447736f, -0.0566143f, +0.0043377f, -0.0043868f, -0.1592744f, +0.1334547f, -0.2404303f,
  +0.3134724f, -0.2515682f, -0.2271064f, -0.1696802f, +0.3085822f, +0.0135133f, -0.3797259f, +0.0520697f,
  +0.3278068f, -0.1572316f, -0.2032548f, -0.3871505f, -0.0984676f, +0.1131525f, -0.1769516f, -0.1380835f,
  +0.0467178f, +0.0546330f, -0.1094983f, +0.0824890f, +0.0942304f, -0.0756625f, -0.0523353f, -0.0802397f,
  +0.1653216f, +0.2118898f, +0.2244678f, +0.0301171f, -0.1535649f, +0.0407279f, -0.0987943f, +0.0863448f,
  +0.3555245f, -0.1949058f, -0.5024046f, -0.0378524f, -0.0316180f, +0.0604496f, -0.1736712f, -0.2609129f,
  +0.2567212f, +0.1739432f, -0.2779683f, -0.0122937f, -0.1659434f, +0.0767271f, -0.1152789f, +0.0979889f,
  -0.5093714f, +0.2309026f, +0.0493711f, +0.0455112f, +0.1452208f, +0.0431542f, -0.3992262f, +0.2622100f,
  -0.2135621f, -0.1337598f, -0.3025999f, -0.0596637f, -0.1888943f, -0.3090271f, -0.3692199f, +0.1615872f,
  -0.4087599f, -0.0197536f, +0.0203022f, -0.1593942f, -0.1704613f, +0.0159351f, -0.2335943f, -0.0477589f,
  +0.1567173f, +0.2567063f, -0.0125994f, -0.2705090f, +0.0676488f, +0.0859703f, -0.0981486f, -0.2128934f,
  +0.5529222f, +0.5089794f, +0.2359184f, -0.2329445f, -0.1213809f, +0.0717341f, -0.3750595f, +0.2337219f,
  -0.0579168f, +0.2337063f, +0.0296920f, +0.1646283f, -0.1060007f, +0.0802641f, -0.1740151f, +0.1302196f,
  -0.0635123f, -0.2985134f, -0.3201102f, -0.1371444f, +0.2178178f, +0.1290664f, -0.3272341f, +0.1752146f,
  +0.0062907f, -0.1370475f, +0.0397491f, -0.0191735f, +0.3118234f, -0.1024041f, +0.0794876f, -0.0397733f,
  -0.1258706f, -0.1118520f, -0.0824747f, +0.0747492f, -0.0429758f, +0.0636696f, -0.0610091f, -0.0302665f,
  +0.3123568f, -0.4792427f, -0.3687463f, -0.0543028f, +0.6712708f, -0.2636119f, -0.5360594f, +0.7980439f,
  +0.5056022f, +0.0522403f, +0.1657298f, +0.2074974f, +0.6938245f, -0.1643860f, +0.4225275f, -0.0075806f,
  -0.1460278f, +0.0386592f, +0.0963041f, +0.0307589f, -0.2164252f, -0.0584964f, +0.1443619f, +0.0013228f,
  +0.1278972f, -0.1542223f, +0.2511655f, -0.1876495f, +0.1353458f, -0.0786632f, +0.1022104f, +0.1322449f,
  -0.0223029f, -0.2293521f, +0.0708689f, +0.1646385f, -0.0416833f, +0.0237267f, -0.0782191f, -0.1824567f,
  -0.1860522f, -0.0582958f, -0.0269202f, -0.1121484f, -0.1816934f, +0.0268040f, +0.0930828f, -0.0775449f
);

const float biases[4] = float[4](
  +0.1592691f, -0.1338712f, +0.0694896f, -0.0975224f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer19 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1092731f, -0.1707932f, -0.0300558f, +0.2373718f, +0.0661629f, +0.0255687f, -0.1412425f, -0.0148712f,
  -0.0353216f, +0.0860605f, +0.1104849f, +0.4717411f, -0.0393557f, +0.1666418f, +0.1843867f, -0.0762722f,
  +0.2068482f, -0.1047245f, +0.2782423f, +0.0662785f, +0.0669459f, +0.0853424f, +0.1328254f, +0.4871359f,
  -0.1952501f, -0.0769497f, -0.0825989f, +0.0253634f, +0.0685632f, -0.1187513f, -0.2016668f, -0.1114860f,
  -0.0694943f, -0.1907773f, -0.2219003f, -0.5854558f, +0.5301310f, -0.2639264f, -0.7313386f, -0.2708060f,
  +0.5115949f, -0.1662173f, +0.0383374f, +0.0102010f, +0.6684737f, -0.1826987f, +0.1751386f, -0.1722056f,
  +0.2585498f, -0.0226953f, -0.2082280f, -0.0072390f, +0.1015960f, +0.0148814f, -0.0202133f, +0.0618645f,
  -0.0123926f, +0.3386563f, +0.2358366f, -0.3500465f, +0.1304414f, -0.1428771f, +0.0055818f, -0.2293334f,
  +0.2777918f, -0.1382210f, -0.0310358f, +0.1534910f, +0.1453345f, -0.3512225f, +0.0035705f, -0.1850963f,
  -0.1861441f, +0.0633393f, -0.0354572f, +0.0637007f, +0.2760004f, +0.0012743f, +0.1440689f, -0.0857978f,
  -0.1595167f, -0.2126739f, -0.0628739f, -0.3959997f, +0.2039324f, -0.1421618f, -0.1828910f, +0.0509666f,
  -0.3595725f, +0.0672636f, +0.1717293f, -0.1345584f, -0.2614189f, -0.3303349f, +0.1400542f, -0.0025630f,
  -0.0051214f, -0.3186639f, +0.2736729f, +0.0149185f, -0.0314773f, +0.0058583f, +0.2420554f, +0.1693104f,
  -0.0361164f, -0.1452207f, +0.0636646f, +0.5828906f, -0.6071205f, +0.1653128f, -0.3582979f, -0.2554386f,
  -0.4013918f, +0.3519424f, -0.1447356f, +0.0886938f, -0.0926156f, +0.0829947f, -0.5893161f, -0.2392623f,
  -0.3503414f, -0.1356830f, +0.2533442f, -0.1794939f, +0.0106343f, +0.1972767f, +0.1095064f, -0.3779386f,
  +0.0795078f, +0.3918216f, -0.0959277f, -0.0032739f, +0.3253613f, +0.2443047f, -0.5074106f, +0.0347505f,
  -0.0409519f, -0.0494882f, +0.1580357f, -0.0039881f, +0.1193390f, -0.0306592f, -0.1589283f, -0.2409147f,
  -0.1228931f, +0.3093607f, -0.0448829f, +0.1926406f, +0.2448089f, +0.1375739f, -0.2058019f, +0.2112187f,
  -0.1178130f, +0.4653500f, +0.6965781f, +0.0058036f, +0.5259194f, +0.1553601f, -0.2493116f, +0.1043132f,
  -0.0604436f, -0.2820031f, -0.1537013f, -0.3408717f, -0.3414887f, -0.1994619f, +0.2452458f, -0.2649382f,
  -0.3179097f, -0.1275337f, -0.1228907f, +0.0673361f, -0.0073595f, -0.0736838f, +0.0424453f, -0.3104345f,
  +0.4450060f, +0.6787153f, -0.0866042f, -0.3882723f, +0.1432841f, -0.4358181f, +0.2325007f, -0.2377595f,
  -0.0384636f, +0.3202761f, -0.3296126f, +0.0120642f, -0.0406179f, +0.1975802f, -0.4079974f, +0.4457625f,
  +0.1425825f, -0.3530050f, -0.1096411f, -0.0877429f, +0.1077437f, +0.2626487f, -0.5467369f, -0.0008315f,
  -0.0082837f, -0.0383465f, -0.1598086f, -0.0768218f, +0.2217851f, -0.1510373f, -0.6136768f, -0.2271484f,
  +0.2949570f, -0.0838837f, +0.0579918f, -0.0729513f, -0.2065557f, -0.1310761f, -0.5897151f, -0.0604083f,
  -0.0141824f, -0.1793154f, +0.2272077f, +0.1104933f, +0.1490079f, -0.0228510f, +0.1138630f, +0.1071860f,
  +0.0410298f, -0.1411690f, +0.1178892f, +0.1046412f, +0.1360365f, -0.0700711f, -0.0985335f, -0.1019875f,
  -0.0200961f, -0.2572078f, -0.1047446f, +0.1287996f, +0.1023123f, +0.1212787f, -0.2721790f, -0.0723779f,
  +0.0266294f, -0.1789194f, +0.3797038f, +0.2460496f, -0.2968210f, +0.0189600f, +0.1013142f, -0.0131307f,
  +0.0646033f, +0.4683022f, -0.3691356f, +0.4427042f, +0.4730875f, -0.1449316f, -0.0781770f, +0.4287951f,
  +0.4075410f, +0.2059113f, +0.1801023f, +0.1797917f, +0.1547256f, +0.2631508f, -0.1772003f, +0.0625239f,
  +0.1183895f, -0.0867946f, +0.0639413f, +0.1719205f, -0.1030295f, +0.0054502f, +0.2731320f, +0.0393826f,
  +0.3691818f, -0.1367576f, +0.0430979f, +0.0519672f, -0.0042010f, -0.3936753f, +0.2535152f, +0.3278336f,
  +0.2628716f, +0.1503106f, -0.0206097f, -0.0568270f, +0.0057438f, +0.1343938f, +0.0385122f, +0.1654341f
);

const float biases[4] = float[4](
  -0.0685468f, -0.1183491f, -0.1210034f, +0.0522183f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer20 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0240592f, -0.1109213f, +0.2611456f, +0.2222709f, +0.0394657f, -0.2081231f, -0.0816031f, +0.3321853f,
  -0.3863605f, +0.2007799f, -0.5653298f, -0.1481348f, +0.2814400f, +0.3285161f, -0.1198504f, +0.2048647f,
  -0.6924496f, +0.3762541f, -0.0766375f, -0.0609900f, +0.0117235f, +0.1543230f, +0.0123772f, -0.3774403f,
  +0.0582755f, +0.1776483f, +0.4109175f, -0.1194590f, +0.0099706f, +0.0258548f, -0.2364872f, +0.2872205f,
  +0.1412991f, -0.4580644f, +0.2122287f, -0.0655403f, +0.2857049f, +0.1706312f, -0.4013424f, -0.0606092f,
  -0.1171297f, -0.6743477f, +0.1409764f, +0.3189174f, +0.1732172f, -0.0127216f, +0.0703251f, +0.0641283f,
  -0.1289488f, -0.1154985f, +0.0325529f, +0.0627933f, +0.0419904f, +0.2858184f, -0.1266368f, -0.0047816f,
  +0.3612300f, +0.0772850f, +0.1651982f, -0.1678935f, -0.0475629f, +0.2920144f, -0.1094804f, +0.1879502f,
  -0.1424853f, +0.0703951f, -0.0897550f, +0.0849932f, -0.1785221f, +0.2414423f, -0.0818293f, -0.0158540f,
  +0.0390044f, -0.0283278f, -0.0691821f, +0.1209457f, +0.1748928f, -0.1950299f, +0.0999760f, -0.3673062f,
  +0.0924039f, -0.9149779f, +0.2632868f, -0.0116947f, -0.1345133f, -0.3054225f, +0.2445490f, -0.0954707f,
  +0.3445391f, -0.2705645f, +0.0997314f, -0.1880211f, -0.0554346f, +0.1630593f, +0.2568353f, -0.0674350f,
  +0.1327378f, -0.0170598f, +0.0484820f, -0.1781363f, -0.1000368f, -0.4491065f, -0.2177512f, -0.5580474f,
  -0.2897914f, -0.4074809f, -0.0875946f, -0.6548363f, +0.6023560f, +0.3732326f, +0.6023436f, -0.0913949f,
  +0.1015248f, -0.2907775f, +0.2387531f, -0.1056722f, -0.0659320f, +0.4072006f, -0.1566575f, -0.4243197f,
  -0.0567627f, -0.0385270f, +0.2395343f, +0.0296299f, +0.0551524f, -0.2802349f, -0.1470563f, +0.0945435f,
  -0.2572966f, +0.0029867f, -0.0842696f, +0.1465313f, -0.0436034f, -0.0382669f, +0.5709724f, +0.0693851f,
  +0.1735166f, -0.2478021f, +0.2258388f, +0.0181776f, -0.1812570f, -0.0879420f, +0.2153046f, -0.3592968f,
  +0.1290853f, -0.0400409f, +0.1470315f, -0.0762388f, +0.1168715f, +0.1315953f, +0.1019914f, +0.2664255f,
  +0.2433090f, +0.1955070f, -0.3157569f, +0.0643557f, +0.0875539f, +0.3035974f, -0.0916386f, +0.0076417f,
  +0.1680358f, -0.0794662f, -0.0782885f, +0.0455131f, +0.0817338f, +0.1785210f, +0.0202597f, -0.0352013f,
  +0.0835361f, +0.1240567f, +0.3211794f, -0.1741837f, -0.2730747f, +0.2380050f, +0.4258626f, +0.3875794f,
  +0.1717778f, +0.0060389f, -0.1717634f, -0.0191126f, +0.0010653f, +0.3720647f, -0.1924192f, +0.2496867f,
  +0.1632478f, -0.4448537f, +0.1001765f, -0.1438979f, +0.2070386f, +0.4355028f, +0.3541604f, +0.0689959f,
  -0.4112589f, -0.0705142f, +0.2808913f, -0.1183969f, -0.3939210f, +0.0904930f, +0.2102925f, -0.1245945f,
  -0.0654716f, -0.1507932f, +0.1318547f, +0.0578132f, -0.1935811f, +0.1076168f, +0.1965652f, -0.0553772f,
  -0.1670438f, -0.1620116f, +0.1223931f, -0.1795778f, +0.0200314f, +0.4450330f, -0.0203694f, -0.2223730f,
  -0.1238886f, +0.0688880f, -0.3338556f, +0.0924261f, +0.1007444f, +0.2135555f, -0.2619583f, +0.0762188f,
  +0.1177509f, +0.0888881f, +0.1966327f, +0.1602788f, +0.2987000f, +0.3027125f, +0.0125495f, -0.1203691f,
  -0.2338035f, +0.5576217f, +0.2668220f, -0.0885916f, +0.0997688f, +0.2982309f, -0.2909354f, +0.1058535f,
  +0.0469569f, -0.0708664f, -0.0089788f, -0.1354076f, +0.1360906f, +0.3846034f, +0.0230024f, +0.1476145f,
  +0.3604191f, +0.0667943f, -0.1540061f, +0.2296758f, +0.4492188f, +0.0017422f, -0.0092869f, -0.3757905f,
  -0.1170603f, -0.1341927f, +0.2205350f, +0.0729167f, +0.2244967f, +0.2707526f, +0.0332224f, -0.0818669f,
  +0.0881069f, +0.0909576f, -0.2880219f, +0.1033255f, +0.3309983f, +0.2520197f, +0.2217712f, +0.1580834f,
  -0.0478029f, -0.0273452f, +0.0244819f, +0.0874000f, -0.0981978f, +0.3185428f, -0.4784736f, +0.2126848f,
  +0.1723728f, +0.1535791f, -0.2506066f, +0.0755315f, +0.1758864f, +0.1966835f, -0.0506626f, +0.2727711f
);

const float biases[4] = float[4](
  +0.0137437f, -0.0840315f, -0.0129604f, -0.0529799f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer20 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0439092f, -0.0164425f, -0.1951395f, -0.0010437f, -0.1627770f, +0.2215036f, -0.1381125f, +0.2434534f,
  +0.0916578f, -0.5557927f, -0.3280962f, +0.2181282f, +0.0753067f, +0.0485954f, +0.0464430f, +0.0350902f,
  +0.0593844f, -0.3321878f, -0.1394387f, -0.2206463f, +0.0225160f, +0.3227135f, +0.0219971f, -0.0142861f,
  -0.0747191f, -0.0210519f, +0.1639540f, -0.0955050f, -0.2935742f, +0.4727717f, -0.2737796f, +0.1413214f,
  +0.2502402f, +0.3424855f, -0.0080933f, -0.1964893f, -0.6994944f, +0.3825431f, -0.1468486f, -0.0158563f,
  -0.1316121f, +0.6303154f, -0.2633284f, -0.5912777f, -0.0515168f, +0.1836084f, +0.4252236f, +0.0410381f,
  +0.1160914f, -0.0318899f, +0.0255537f, +0.0666583f, -0.2198281f, +0.3214039f, +0.0932440f, +0.0756942f,
  -0.0486128f, -0.0622759f, -0.1072450f, -0.0647281f, -0.1003115f, +0.0900387f, -0.0055186f, -0.2660628f,
  -0.1123663f, -0.0763645f, +0.1392238f, -0.1914885f, +0.2503781f, +0.0531528f, -0.0455008f, -0.1161390f,
  +0.1475183f, +0.0722824f, +0.2742899f, -0.1148605f, -0.0630411f, -0.0455952f, +0.2326524f, -0.0698111f,
  -0.1149016f, +0.2257804f, -0.0022701f, -0.0961784f, -0.1337914f, -0.2303742f, +0.0784304f, +0.0988812f,
  +0.3830826f, -0.2613686f, -0.2044659f, -0.0781029f, -0.1209331f, -0.0879207f, +0.1012288f, +0.0675639f,
  +0.0349099f, -0.0305737f, +0.1191328f, +0.2067705f, +0.0944912f, -0.2562431f, +0.2882674f, +0.0908631f,
  +0.0162475f, +0.1076624f, +0.2069613f, -0.0728703f, -0.2392741f, +0.2040917f, +0.0520546f, +0.2427985f,
  +0.0338957f, -0.1414008f, -0.2166202f, +0.0400142f, -0.0539606f, -0.2172666f, -0.0581781f, -0.1603284f,
  +0.0567468f, -0.0601905f, +0.1128020f, -0.1028552f, -0.0884973f, -0.1829263f, -0.1247320f, -0.0961519f,
  +0.0928056f, +0.0567000f, +0.1143892f, -0.0698215f, +0.0131932f, -0.0150731f, +0.1824437f, -0.0411565f,
  +0.1105254f, +0.1197316f, +0.1296704f, -0.0698033f, -0.1728416f, +0.0084518f, -0.2821433f, +0.0326601f,
  +0.1992794f, +0.0919556f, +0.1658300f, +0.2028297f, +0.3514964f, +0.1694477f, -0.2556082f, +0.0869324f,
  +0.3320064f, +0.2298695f, +0.0992045f, -0.1006803f, -0.1715300f, +0.3868379f, -0.1013459f, -0.2190655f,
  -0.0406614f, -0.4379876f, +0.3153993f, +0.8627819f, +0.2063682f, -0.1539440f, +0.0536866f, -0.0585576f,
  +0.0747460f, +0.2180249f, -0.1943413f, +0.0042980f, +0.3235923f, +0.1350712f, -0.5280006f, -0.0014733f,
  -0.1199654f, -0.0812049f, +0.0157810f, +0.2699696f, +0.3732481f, -0.0952895f, -0.3725369f, +0.1547802f,
  +0.0988665f, +0.6227593f, +0.2011505f, +0.1160240f, +0.0992278f, -0.3815340f, -0.2464040f, +0.3313118f,
  +0.1263233f, +0.2390960f, -0.0301194f, -0.1415208f, -0.0860840f, +0.1732800f, -0.3581631f, -0.1658722f,
  -0.4123813f, -0.1789087f, +0.3947506f, +0.1364010f, +0.0186445f, +0.0176422f, -0.5995412f, -0.2657166f,
  +0.0854713f, +0.2546969f, -0.0864044f, +0.0342585f, +0.0275448f, -0.0664688f, -0.0323042f, +0.0043609f,
  +0.0393711f, -0.1856323f, +0.0584801f, +0.2825550f, +0.1198213f, -0.2189076f, +0.0595179f, -0.0463121f,
  -0.1379052f, +0.3124240f, -0.1149681f, -0.3425616f, -0.0387995f, +0.3183551f, +0.0838536f, -0.2843986f,
  +0.0645033f, +0.1090110f, +0.1773209f, -0.1556717f, +0.1184164f, +0.1604341f, -0.2412433f, +0.1958781f,
  -0.0083340f, +0.0162686f, -0.1890592f, +0.1276826f, +0.1177933f, -0.2778217f, -0.0988964f, +0.0855218f,
  -0.1155952f, +0.0367932f, -0.0978128f, -0.4103486f, +0.5812958f, +0.3064819f, -0.1198023f, -0.5910174f,
  -0.0661296f, -0.2617627f, -0.3942096f, -0.2828242f, -0.1739481f, -0.0179367f, -0.1807593f, -0.1985393f,
  +0.1867499f, -0.0890990f, +0.2092834f, -0.0654442f, -0.1466995f, +0.0800049f, -0.3381347f, +0.0805071f,
  -0.0975714f, +0.0614364f, +0.2316514f, -0.1353420f, +0.0256772f, +0.3272847f, -0.5003847f, +0.1088763f,
  +0.0714075f, +0.1576058f, -0.1867140f, -0.2324509f, +0.0017451f, +0.1019365f, -0.2001069f, +0.1332849f
);

const float biases[4] = float[4](
  +0.0150742f, +0.0037742f, -0.0365570f, +0.0556639f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer21 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2839006f, -0.1516405f, -0.3365470f, +0.1124240f, +0.1525819f, -0.2410287f, +0.0861953f, -0.0912763f,
  +0.2859225f, +0.1332136f, -0.2452828f, +0.2790158f, +0.2429264f, -0.1236800f, +0.1086024f, +0.0689836f,
  +0.0838908f, +0.0533868f, -0.0122407f, +0.1339626f, -0.0353134f, -0.0498035f, -0.0488460f, -0.0978444f,
  +0.0117597f, -0.0493750f, -0.3178877f, +0.1473781f, -0.0703838f, -0.5708137f, +0.2858279f, -0.2123703f,
  +0.1753079f, -0.3821220f, +0.0787074f, -0.0819221f, +0.3499900f, -0.0419593f, +0.1367321f, -0.2187985f,
  +0.2751049f, -0.3237077f, -0.0863757f, -0.0543084f, +0.1201893f, +0.1694444f, +0.0921609f, +0.0546835f,
  +0.0551500f, -0.2555717f, -0.2833011f, +0.5982638f, -0.2612348f, -0.2794760f, -0.4569871f, -0.1500202f,
  +0.0868197f, -0.5642551f, +0.0277930f, -0.3396129f, -0.5942587f, -0.2471673f, -0.1112494f, +0.1543631f,
  -0.0209499f, -0.2251063f, -0.3378572f, +0.2095815f, +0.3588587f, -0.0583389f, -0.0959930f, +0.0970529f,
  +0.2119451f, -0.1107799f, -0.0975504f, -0.1887143f, +0.3777240f, +0.0932104f, -0.1458089f, +0.1023829f,
  +0.0715646f, -0.1216088f, +0.4423056f, +0.1104324f, +0.5351287f, +0.0223183f, +0.2293963f, -0.0997170f,
  -0.2330941f, -0.1218141f, +0.1633169f, +0.0711987f, -0.3125561f, +0.0660322f, -0.0567864f, -0.1283638f,
  -0.0546300f, +0.0982853f, -0.0330355f, -0.7157151f, +0.0814853f, +0.2226971f, -0.4833959f, +0.0583540f,
  +0.1838240f, -0.0239649f, +0.0495180f, +0.3344047f, +0.7316318f, +0.0584561f, +0.1230331f, +0.0762004f,
  -0.3483630f, +0.0515443f, -0.1587008f, -0.0569275f, -0.4557499f, +0.1396039f, -0.1051695f, -0.0955852f,
  +0.1854070f, -0.0114487f, +0.2050016f, -0.4063177f, -0.1520268f, +0.0540341f, +0.1402253f, -0.0841444f,
  -0.1802966f, -0.2305222f, +0.2280339f, +0.1696628f, -0.2174230f, -0.1214535f, -0.1258473f, +0.0574581f,
  -0.1288584f, +0.0331849f, +0.0723268f, +0.0960693f, -0.2034117f, +0.1218888f, +0.1684751f, +0.0914149f,
  +0.3786939f, -0.1283302f, -0.0219809f, -0.5165187f, +0.0165020f, +0.2271477f, -0.2587230f, +0.0670118f,
  -0.3784757f, -0.0440854f, -0.2300937f, +0.2657180f, -0.3941451f, +0.0623456f, -0.4886841f, -0.0501060f,
  -0.1583309f, +0.2059387f, +0.1310882f, -0.1228359f, -0.0454828f, +0.0339336f, -0.1847787f, -0.0723973f,
  +0.3580498f, -0.0479398f, -0.1228487f, -0.3303826f, -0.4474159f, -0.0145798f, +0.0635551f, +0.2130671f,
  -0.1744755f, +0.1080448f, -0.1381007f, -0.3855307f, +0.5612924f, +0.1700568f, +0.0016188f, +0.2141953f,
  +0.0074854f, +0.3037028f, -0.3052918f, +0.1369961f, +0.3794623f, -0.0355528f, -0.4475890f, -0.2705762f,
  +0.4149590f, -0.1445759f, +0.0775313f, +0.0218890f, -0.1524420f, +0.0201170f, +0.2533562f, +0.1304350f,
  +0.0713431f, -0.3322540f, +0.6171388f, -0.0481697f, +0.0505083f, +0.1994832f, +0.2131980f, +0.3763035f,
  +0.1126888f, -0.1378883f, +0.3255668f, -0.0065736f, -0.0442514f, +0.0837739f, -0.1194699f, +0.0591267f,
  +0.1386647f, -0.0890448f, +0.0642424f, +0.1554994f, -0.0639894f, +0.3250780f, +0.0292636f, -0.2056692f,
  +0.2311972f, +0.1726883f, +0.2021602f, +0.2058894f, -0.0735698f, +0.2668840f, +0.1207784f, -0.2510720f,
  -0.2035365f, +0.0652150f, +0.2212808f, +0.1147335f, -0.1468516f, +0.0649631f, +0.2504683f, -0.0814382f,
  -0.0253404f, -0.0683773f, +0.0597465f, -0.0541127f, -0.0905050f, +0.2423647f, -0.5490014f, +0.0199066f,
  +0.3577284f, +0.1111559f, +0.6816192f, -0.1799923f, +0.0690644f, +0.0369839f, -0.5818468f, +0.0523896f,
  -0.0642406f, +0.4350280f, +0.0214402f, -0.0134367f, -0.4862349f, +0.0430609f, +0.2972465f, -0.0355869f,
  +0.2679036f, -0.0471634f, +0.0620449f, -0.0426467f, +0.0626555f, +0.0145082f, -0.4148760f, -0.2222278f,
  +0.0929404f, +0.0838919f, +0.0662741f, -0.3743901f, -0.0042054f, +0.0063552f, -0.0444334f, -0.0948259f,
  +0.1070623f, +0.1966237f, +0.0452278f, -0.2679504f, -0.1123974f, -0.0379749f, -0.0174715f, -0.0987106f
);

const float biases[4] = float[4](
  -0.0339255f, +0.0969594f, +0.0319322f, +0.0822861f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer21 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1455425f, +0.0676938f, +0.0810761f, -0.0013307f, +0.0062076f, -0.0099418f, +0.0591329f, +0.0635473f,
  +0.3107054f, +0.2815298f, -0.0179975f, +0.0481528f, -0.2701174f, +0.0259188f, +0.2873314f, +0.3369667f,
  +0.0553032f, +0.3428274f, +0.3319339f, -0.0351181f, +0.2779597f, +0.2247009f, +0.2616943f, +0.2879606f,
  +0.0253550f, -0.0110725f, +0.2450116f, +0.2724048f, +0.1652465f, -0.2211750f, +0.0438799f, +0.2063574f,
  +0.1508692f, +0.0896865f, +0.0480096f, +0.0651740f, +0.0965996f, -0.2375740f, +0.4130485f, +0.2073049f,
  -0.0971529f, -0.0168612f, +0.0583712f, +0.1052103f, +0.0344768f, +0.1781159f, +0.0245160f, +0.0163925f,
  -0.0687261f, -0.2158015f, +0.1318980f, +0.0380588f, +0.2674988f, +0.0202466f, -0.3711000f, +0.1679266f,
  +0.3475210f, -0.0228572f, -0.2294848f, -0.0659627f, -0.0208831f, +0.1199094f, -0.3899611f, -0.4682349f,
  +0.0089164f, +0.0379967f, +0.4330021f, +0.3098414f, +0.0453342f, +0.1684195f, +0.1026416f, +0.4170085f,
  -0.1109969f, -0.0177583f, -0.0103695f, -0.0565305f, +0.2268742f, -0.0870416f, +0.0009751f, -0.1167191f,
  +0.2128645f, +0.0566397f, -0.1774219f, -0.0879942f, +0.4392177f, -0.0865251f, +0.5029254f, +0.2589783f,
  +0.1960783f, -0.0540188f, +0.4509552f, +0.0459790f, +0.5327635f, -0.2048196f, +0.4871222f, -0.0197544f,
  +0.0071766f, +0.0807406f, +0.0762807f, +0.0872469f, -0.0849376f, -0.2513475f, -0.1956539f, -0.1675210f,
  +0.1687361f, -0.0103344f, -0.2347699f, -0.9005384f, -0.4885959f, +0.0290222f, -0.0910628f, -0.2825935f,
  +0.4065303f, +0.0863155f, +0.0795143f, +0.0173879f, +1.1338494f, +0.0712588f, +0.2931770f, +0.2812925f,
  +0.0874713f, -0.0686088f, +0.0670963f, -0.0207798f, +0.1673501f, +0.0065463f, +0.2055718f, -0.0674176f,
  +0.3842078f, +0.1560685f, -0.0003077f, -0.2603942f, -0.1391722f, -0.0743007f, +0.0182264f, -0.2931431f,
  -0.0323717f, +0.1373550f, +0.0666518f, +0.0935235f, -0.0503603f, -0.0120844f, +0.0417206f, +0.1395148f,
  -0.2160708f, +0.0792743f, +0.3312427f, -0.1312916f, -0.0075812f, -0.0759582f, -0.5955639f, -0.1489734f,
  -0.1622581f, -0.2627608f, -0.0052786f, -0.1551021f, +0.1070320f, +0.1987728f, -0.1963940f, +0.0956875f,
  -0.0356626f, -0.5939844f, +0.0026997f, -0.0280619f, +0.3054683f, -0.2121841f, +0.1462369f, +0.1867455f,
  -0.4402340f, -0.6730270f, -0.0590824f, +0.4266938f, +0.4858784f, -0.4131301f, -0.8625992f, +0.0436893f,
  -0.1890571f, -0.6770673f, -0.0897759f, -0.0709535f, -0.1404519f, -0.4674570f, +0.3419391f, +0.0774910f,
  +0.5457270f, -0.0850910f, -0.3115409f, +0.2016306f, +0.5206753f, +0.2021823f, +0.0148215f, +0.1178847f,
  -0.2029519f, +0.3134063f, +0.1155830f, +0.0690060f, +0.2499483f, -0.1653315f, -0.1992991f, -0.2949378f,
  -0.2770648f, +0.1881630f, +0.0568600f, +0.2753820f, +0.0131319f, +0.0073697f, -0.0532579f, +0.1089056f,
  +0.1760587f, -0.3977490f, +0.0001953f, +0.0672003f, +0.0850840f, -0.0238327f, +0.0016932f, -0.0597652f,
  +0.3097133f, +0.2641007f, +0.0990819f, +0.4340006f, +0.2534155f, -0.3853123f, +0.0145828f, -0.0540105f,
  +0.3879699f, -0.1633601f, -0.3902852f, -0.3137958f, +0.1830554f, -0.7200314f, -0.9012483f, -0.0072624f,
  +0.3815300f, -0.1102473f, +0.0444999f, -0.1038732f, +0.2540767f, +0.2281400f, +0.0408990f, +0.1318371f,
  -0.3877681f, -0.1322586f, +0.2357493f, +0.4384289f, +0.1128362f, -0.4100944f, -0.1521960f, +0.4110538f,
  -0.3518242f, -0.1446072f, -0.6912140f, +0.5444230f, +0.4645104f, -0.1928300f, -0.1649647f, +0.0396267f,
  -0.0231596f, -0.3055403f, -0.2630818f, +0.1903013f, +0.0136561f, -0.0404058f, -0.2682463f, -0.2225199f,
  +0.1931791f, -0.1163884f, -0.0181822f, +0.1356065f, +0.0157312f, -0.1682272f, -0.0571749f, +0.0678462f,
  +0.2074117f, -0.1734087f, -0.1388244f, +0.1010225f, -0.0266792f, +0.1530270f, -0.1237026f, +0.1261921f,
  +0.0141648f, -0.2913070f, -0.0670396f, -0.0096276f, -0.2525944f, +0.0921559f, -0.1951676f, +0.0246511f
);

const float biases[4] = float[4](
  +0.1472181f, -0.1474009f, -0.2170040f, -0.0595190f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer22 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0049425f, +0.0977821f, -0.0846574f, -0.1064254f, +0.3357713f, +0.2343676f, +0.0850615f, +0.0008221f,
  -0.2340225f, +0.2870592f, -0.2385708f, +0.0888728f, -0.1269409f, +0.3607216f, +0.2513514f, +0.1935730f,
  -0.2921433f, +0.0792743f, -0.3109751f, -0.1504248f, +0.2541684f, -0.1005801f, +0.4241320f, +0.0527124f,
  +0.0053662f, +0.0167461f, -0.0383894f, +0.0304558f, +0.5286018f, -0.6420587f, +0.1210087f, -0.3002456f,
  -0.1447616f, +0.2972977f, -0.1358359f, -0.1076165f, -0.0242876f, +0.4384795f, +0.2235291f, +0.0592026f,
  -0.3097293f, +0.1415084f, -0.6410860f, +0.2267544f, -0.0103912f, +0.3812116f, +0.1221687f, -0.2358191f,
  +0.0799033f, +0.0492179f, -0.0202056f, -0.1377795f, +0.1215787f, -0.2928396f, +0.3257227f, +0.0291936f,
  -0.0988577f, +0.4775393f, +0.0168150f, -0.3837271f, +0.2143072f, +0.8505133f, +0.1663271f, -0.1694556f,
  -0.0011123f, -0.5846713f, -0.0000049f, -0.1685175f, +0.2240375f, +0.0914948f, +0.4753280f, -0.0343806f,
  +0.1024613f, -0.2687289f, +0.1294059f, +0.1011043f, +0.1201379f, -0.3039510f, +0.0068834f, -0.1302368f,
  +0.8632202f, +0.0854381f, +0.1385783f, -0.0050627f, -0.1600610f, +0.0478202f, -0.1419313f, -0.0350907f,
  -0.0398517f, +0.0165671f, +0.1809140f, -0.0074516f, +0.2836240f, -0.1385285f, -0.1360268f, -0.0800676f,
  -0.0640876f, +0.0058180f, +0.3194776f, +0.2577135f, +0.0363649f, -0.1820953f, -0.0869952f, -0.1531427f,
  +0.4573488f, -0.1060630f, +0.3576475f, +0.6548826f, -0.0620613f, -0.1142720f, +0.7738011f, -0.7994339f,
  +0.0960079f, -0.2786753f, +0.3039948f, +0.0186185f, -0.0492726f, -0.0473369f, +0.4902732f, +0.1426716f,
  -0.0578768f, +0.2150853f, -0.1843085f, +0.0676195f, -0.2385490f, +0.3412971f, +0.1612344f, +0.2693672f,
  +0.0465974f, +0.2126063f, +0.4322855f, +0.6385994f, -0.2768079f, -0.3454359f, +0.5056005f, +0.3916282f,
  +0.1386835f, -0.1362704f, +0.1739295f, +0.4662020f, -0.0768938f, -0.1799048f, +0.2107587f, -0.0997976f,
  -0.0115542f, +0.0117632f, -0.0669045f, +0.0279487f, -0.0982010f, -0.0416221f, +0.2225327f, +0.0204463f,
  -0.2326907f, -0.1870904f, -0.0711297f, +0.1808768f, -0.1347404f, -0.3969561f, +0.1989829f, -0.0945995f,
  +0.1824592f, +0.0325311f, -0.0862911f, +0.1452898f, +0.0064927f, -0.0798713f, +0.0748732f, +0.0619428f,
  -0.0848065f, +0.0768798f, -0.0930842f, -0.0194750f, +0.0363140f, -0.2175934f, +0.3118094f, +0.0088688f,
  -0.2431453f, -0.0663713f, +0.1851733f, -0.2794473f, -0.1780541f, -0.1355956f, +0.0459561f, +0.3493481f,
  +0.3437054f, +0.3128115f, +0.2443830f, -0.1762635f, -0.0954398f, +0.0582313f, +0.1251982f, -0.4041881f,
  +0.0612599f, +0.0285050f, -0.0887734f, +0.2340934f, -0.1556729f, +0.0803347f, +0.1573489f, -0.1032667f,
  -0.1539632f, -0.0598250f, +0.4096613f, +0.3154336f, -0.0246432f, -0.6427073f, -0.0237135f, +0.7263777f,
  +0.0594208f, +0.5927474f, +0.1021948f, -0.1500179f, -0.1441101f, +0.1687049f, -0.2633220f, +0.3295546f,
  +0.0418296f, +0.1120084f, -0.1007426f, +0.0530702f, -0.1399758f, +0.2461340f, -0.0624134f, +0.1475952f,
  -0.0169057f, -0.0894659f, -0.0678828f, -0.1140891f, +0.1088195f, +0.1424538f, -0.2317900f, +0.1801255f,
  -0.3626826f, +0.0360873f, -0.0859271f, -0.0654972f, -0.1550560f, +0.1210109f, +0.1319434f, +0.0308195f,
  +0.1546962f, +0.1135740f, -0.1243222f, -0.1083023f, -0.1250433f, +0.2610699f, -0.2561798f, +0.0262422f,
  +0.0249815f, -0.2308637f, -0.2696080f, -0.2913973f, -0.0039609f, -0.1803378f, -0.3741291f, +0.0252740f,
  -0.1639198f, +0.0381727f, -0.5659463f, -0.0962257f, -0.3230153f, +0.5365385f, -0.7257662f, +0.0649420f,
  +0.0194336f, -0.0010985f, +0.0028889f, -0.0248776f, +0.0904767f, +0.1625897f, -0.0230338f, -0.0607843f,
  -0.0598611f, -0.2543692f, -0.4112995f, +0.0887889f, +0.0037009f, +0.0833303f, -0.1493043f, -0.1810521f,
  +0.0162815f, +0.1347199f, -0.1153109f, -0.1682628f, -0.0123135f, -0.0509919f, -0.0178470f, -0.0124858f
);

const float biases[4] = float[4](
  -0.0432523f, -0.0714340f, -0.0858080f, +0.0417355f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer22 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0941352f, +0.2834077f, -0.1480838f, +0.3037952f, +0.1863678f, +0.4759577f, +0.1392537f, +0.0988748f,
  +0.2729852f, -0.1543145f, -0.1228247f, -0.0858137f, -0.3142108f, -0.0310051f, +0.2035824f, -0.0045622f,
  +0.1899243f, +0.2261346f, -0.2001898f, +0.0795475f, -0.0216721f, +0.1015016f, +0.3171475f, -0.0522308f,
  +0.0581679f, +0.0734624f, -0.1214314f, +0.1654492f, -0.0137231f, +0.2178538f, -0.0867002f, -0.1829484f,
  +0.1214752f, -0.1314546f, +0.0269511f, -0.4314088f, -0.0541851f, -0.2224086f, +0.0483266f, -0.3719993f,
  +0.1539318f, +0.0928740f, +0.2890672f, +0.0121325f, +0.0129224f, -0.3671603f, +0.0414754f, -0.2197591f,
  +0.0022429f, +0.0084748f, -0.0646528f, -0.2189009f, -0.0852316f, -0.1131657f, +0.0858386f, -0.1407954f,
  -0.1583322f, -0.2552790f, +0.1354877f, -0.1279654f, +0.1893059f, -0.6928114f, -0.3907497f, +0.3256024f,
  -0.0053360f, +0.1278732f, -0.0148998f, -0.1411001f, -0.0040544f, +0.0410222f, -0.3173831f, +0.1644659f,
  -0.1563820f, +0.0070442f, +0.0450366f, -0.1857236f, -0.0707433f, -0.1730168f, +0.0354021f, -0.1215910f,
  -0.1112127f, +0.0048570f, +0.0490645f, +0.0466903f, +0.0004913f, -0.1150610f, +0.1320581f, -0.1215333f,
  +0.2670207f, -0.0600770f, +0.1357381f, +0.0151542f, +0.1130112f, -0.1331590f, -0.0819614f, -0.0518889f,
  -0.0327259f, +0.0149239f, -0.1459391f, -0.0309634f, -0.0323561f, -0.0687830f, +0.0759868f, +0.2271331f,
  -0.2242877f, +0.0796842f, -0.0031876f, +0.0963688f, +0.1906024f, -0.0577981f, +0.1473033f, +0.2309093f,
  +0.3518568f, -0.0613760f, +0.2887061f, +0.0520702f, +0.1899785f, -0.2511268f, +0.1487933f, +0.0608179f,
  -0.0623015f, -0.0167256f, +0.0116395f, +0.2007003f, -0.0071132f, -0.2079935f, -0.0864906f, -0.2108632f,
  -0.0187003f, +0.2507153f, +0.0799402f, -0.0042979f, -0.0745210f, +0.0707336f, -0.2670799f, +0.2140275f,
  +0.0018279f, +0.0747427f, +0.1561065f, -0.0611572f, -0.0365492f, +0.0056425f, -0.2236604f, +0.1298036f,
  +0.0570453f, -0.0870076f, -0.0432577f, +0.0669934f, +0.0177172f, +0.0311064f, +0.0682085f, +0.1948905f,
  -0.0907531f, -0.0055869f, -0.3313451f, +0.4426104f, +0.1055387f, +0.2168905f, +0.0216130f, +0.0859778f,
  -0.1717848f, -0.1261722f, -0.0913665f, +0.0665504f, -0.3053817f, +0.0582793f, -0.0239886f, +0.1889045f,
  -0.0174304f, -0.0533155f, +0.2070240f, +0.0500576f, +0.3264443f, -0.0309941f, +0.0598466f, -0.0117810f,
  -0.2153725f, -0.2682197f, +0.2685723f, +0.1892551f, -0.6221947f, -0.3055863f, +0.0221871f, -0.2482599f,
  -0.2834170f, +0.1797836f, -0.2690446f, +0.0154297f, -0.5047926f, +0.2461868f, +0.1856182f, +0.1045950f,
  +0.0956727f, +0.1931814f, -0.0831850f, -0.0679600f, -0.2667376f, +0.0047952f, -0.0333205f, +0.1927973f,
  +0.0297222f, -0.2113883f, -0.1902823f, -0.0048836f, -0.1434022f, -0.2877057f, +0.1458535f, +0.9101996f,
  -0.1559331f, +0.4347577f, -0.1174024f, -0.0012350f, -0.3549700f, +0.1701967f, +0.0058108f, -0.2661484f,
  -0.1061642f, -0.0140109f, +0.0389387f, -0.0936889f, +0.1070515f, +0.0599168f, +0.1679093f, +0.0822105f,
  -0.1548801f, +0.0002623f, +0.1834821f, +0.1317506f, +0.4017055f, +0.0538240f, +0.0606352f, -0.0399584f,
  -0.0340525f, -0.1076682f, +0.0311418f, +0.0038453f, -0.1624839f, -0.0617761f, +0.1246422f, +0.0021341f,
  -0.0340204f, -0.3439387f, +0.1555661f, -0.1070318f, +0.1856835f, -0.7733036f, +0.2696222f, -0.1388710f,
  +0.1341205f, +0.3404082f, -0.2772359f, -0.0584713f, +0.0590846f, -0.0666280f, -0.0814550f, +0.1217236f,
  +0.2899852f, +0.0049064f, -0.3037378f, +0.1103382f, -0.3180746f, +0.3256697f, -0.2020244f, +0.1248733f,
  +0.0798992f, -0.1657486f, -0.0307477f, -0.1180068f, -0.0515357f, +0.1879376f, -0.2111707f, +0.2532628f,
  +0.0812832f, -0.1703547f, +0.1683543f, -0.2268589f, -0.1962115f, -0.5321267f, +0.0234326f, +0.0243693f,
  +0.2038301f, +0.2403446f, -0.0215888f, +0.0456517f, -0.0337517f, -0.1390548f, -0.0831125f, -0.1977445f
);

const float biases[4] = float[4](
  +0.0088003f, -0.0059118f, +0.0183513f, -0.0001836f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer23 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1838772f, -0.0209515f, -0.0293803f, -0.1459083f, -0.0707618f, -0.0325288f, +0.2331799f, +0.0699464f,
  -0.1224710f, +0.1298381f, +0.0602357f, +0.0701264f, -0.0197101f, +0.0288044f, +0.0069170f, -0.2758322f,
  -0.1677552f, -0.1030608f, -0.0338305f, +0.0779481f, -0.5279512f, -0.2260499f, +0.1252394f, +0.1366041f,
  -0.0028709f, +0.1100617f, -0.1682875f, -0.0630961f, -0.0511528f, +0.0834137f, -0.0426863f, +0.0882185f,
  +0.4624248f, -0.7126252f, -0.6702399f, -0.5025619f, -0.1954800f, -0.2709104f, -0.4504876f, +0.4972503f,
  -0.1036699f, -0.2285075f, -0.1901550f, -0.1514893f, +0.1000928f, +0.2250250f, +0.0738262f, +0.2429941f,
  +0.0119130f, -0.1357785f, +0.0171872f, +0.2280823f, -0.0060459f, +0.0417886f, -0.1456312f, +0.2419301f,
  -0.4763612f, -0.8815584f, -0.4147272f, +0.5528397f, +0.2872749f, -0.1119267f, +0.4197278f, +0.7436417f,
  -0.3944003f, -0.2144386f, +0.1654712f, +0.1789504f, +0.4731233f, +0.2165235f, +0.1907863f, +0.3654471f,
  -0.1712847f, +0.0423320f, +0.2384038f, -0.1615073f, +0.1665515f, +0.1857273f, +0.0897359f, -0.1805042f,
  +0.0116855f, -0.1922846f, -0.4198411f, -0.0331829f, -0.1802521f, -0.2755008f, +0.0016786f, +0.1112325f,
  +0.0654464f, +0.2492943f, +0.1046478f, +0.0512922f, -0.2768565f, -0.0353643f, -0.0849916f, +0.5095788f,
  -0.4538158f, +0.4151642f, +0.3635916f, -0.1653437f, +0.3645614f, +0.1116544f, -0.4343624f, +0.3351836f,
  +0.3349209f, -0.8450827f, +0.6601961f, +0.0615121f, +0.1662455f, +0.4264986f, -0.6704005f, -0.5516208f,
  -0.2424285f, +0.1234629f, -0.2118851f, -0.0865275f, -0.0962942f, -0.3675134f, +0.8987976f, -0.4877289f,
  -0.2852097f, +0.2822424f, -0.0210023f, +0.2235352f, +0.3327366f, -0.3487076f, +0.0511371f, -0.0811101f,
  -0.2287488f, +0.4060251f, -0.2344264f, -0.1998678f, -0.2061199f, +0.0338041f, +0.0162007f, +0.2594773f,
  -0.3374906f, -0.2457462f, +0.0149817f, -0.0202473f, +0.1261240f, +0.2922174f, -0.0731947f, -0.2750977f,
  +0.1662386f, -0.1047228f, +0.1148921f, +0.3355924f, +0.2890419f, +0.0256461f, -0.0317438f, +0.0356500f,
  +0.1874492f, -0.2867066f, -0.1620173f, -0.0127707f, +0.2172198f, -0.1099254f, -0.6945830f, -0.2091337f,
  -0.2293881f, -0.0792138f, +0.0775353f, +0.0902858f, +0.0471468f, -0.4583955f, -0.3644616f, -0.2163902f,
  -0.5637705f, -0.4152861f, +0.2101718f, -0.2523563f, +0.3741194f, -0.3558447f, -0.3750153f, -0.0672588f,
  +0.2249591f, -0.1530455f, +0.1623382f, -0.2420796f, +0.5470213f, +0.2037274f, +0.2032904f, -0.0487735f,
  +0.4067296f, -0.0575753f, +0.1722381f, +0.1328504f, +0.0515694f, +0.1429655f, -0.3463572f, -0.2459343f,
  +0.3377923f, +0.2635422f, +0.1590150f, +0.1616472f, +0.4012498f, -0.0488504f, -0.0467631f, -0.2035144f,
  -0.3904423f, -0.0432930f, -0.3190156f, +0.2786241f, +0.1469667f, -0.3597516f, -0.2020992f, -0.4526563f,
  +0.1407015f, -0.4568877f, +0.0918937f, -0.1673716f, +0.1981598f, -0.1151816f, +0.1963091f, -0.0951654f,
  +0.0840547f, +0.0836853f, -0.0795939f, +0.2423371f, +0.1583930f, -0.0758023f, +0.1261175f, +0.1099634f,
  +0.3416761f, +0.0036257f, +0.0570337f, +0.4111472f, +0.0710810f, -0.0416623f, +0.2311648f, -0.4527932f,
  +0.0348475f, -0.2081728f, -0.2257866f, +0.1583648f, +0.2270078f, +0.2302039f, -0.0335157f, +0.0480654f,
  +0.0289182f, -0.2637189f, +0.2444361f, +0.4239402f, -0.0304204f, -0.1822682f, +0.3496226f, +0.1709509f,
  +0.1322725f, +0.2389517f, +0.4619522f, -0.3946342f, +0.6230906f, -0.3361886f, -0.7422838f, -0.0259222f,
  +0.3132609f, -0.1754948f, +0.1909758f, -0.0658477f, +0.2436893f, -0.2619244f, +0.2171193f, -0.0109536f,
  -0.0695795f, -0.2203655f, -0.1287613f, +0.4327157f, +0.1618393f, -0.4451798f, -0.1194911f, +0.2587215f,
  -0.2455022f, -0.5703363f, +0.0756364f, +0.0988463f, -0.0669381f, -0.2201666f, -0.0821749f, -0.3031575f,
  -0.0823579f, -0.3606652f, -0.1039875f, +0.0115399f, +0.0654689f, -0.0679354f, +0.0875594f, -0.1358336f
);

const float biases[4] = float[4](
  +0.0235005f, -0.1394115f, -0.1092035f, -0.1509159f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer23 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0010800f, +0.1603391f, -0.0814386f, -0.1812040f, -0.2052714f, +0.2083327f, +0.1547065f, +0.0223171f,
  -0.1996257f, +0.4143651f, -0.1109380f, -0.5408770f, -0.0527055f, -0.0682017f, +0.0629131f, +0.0647645f,
  -0.1141496f, +0.3538557f, +0.2844913f, -0.1362895f, -0.2230599f, -0.2133277f, +0.4776586f, +0.1003861f,
  -0.2350479f, +0.0866381f, -0.2030154f, -0.0711855f, -0.1857931f, +0.1974357f, +0.0232360f, -0.0359072f,
  -0.4109755f, +0.2883474f, -0.0438369f, +0.2899557f, +0.0329120f, +0.2436449f, -0.0266012f, +0.1996517f,
  -0.1983816f, +0.3134781f, -0.0051152f, -0.2113506f, -0.3393782f, +0.0071991f, +0.0027923f, -0.0053318f,
  -0.2097093f, -0.1505162f, -0.0893624f, -0.1025840f, -0.2200323f, +0.1925072f, +0.0139588f, +0.1269190f,
  +0.1808750f, -0.0981145f, -0.0887202f, -0.0785630f, +0.1731980f, +0.0456492f, -0.1742721f, +0.0402726f,
  -0.1454394f, +0.1207999f, +0.1053076f, -0.0169391f, -0.1157247f, +0.1483483f, +0.2006577f, +0.1609117f,
  -0.1195407f, -0.0943529f, +0.1893431f, -0.0138064f, -0.0533507f, +0.0631296f, +0.1674351f, -0.0481167f,
  -0.0744923f, +0.2559918f, +0.3651288f, +0.0158881f, -0.2533391f, +0.0238514f, -0.1143246f, -0.0258532f,
  +0.0401728f, +0.1376335f, -0.3757040f, +0.0272264f, -0.4183667f, +0.1101249f, -0.2797108f, +0.1420105f,
  -0.0078868f, +0.1088098f, +0.4097634f, -0.0374100f, +0.1837574f, +0.0988986f, -0.0803110f, -0.0481979f,
  +0.3087597f, +0.2335714f, +0.0555455f, -0.2428732f, +0.2310048f, +0.1458878f, -0.6623774f, +0.5947503f,
  +0.2902405f, +0.1006756f, -0.2499050f, -0.2429691f, -0.0649694f, -0.1638490f, +0.2773041f, +0.4197373f,
  +0.0453373f, +0.3531805f, -0.1925902f, -0.3322104f, -0.0563334f, +0.1485726f, -0.4587519f, +0.0394071f,
  -0.3627871f, -0.2219491f, -0.3023296f, -0.1134849f, +0.0647454f, +0.0123190f, -0.1138773f, +0.1672254f,
  -0.2376747f, +0.2159129f, -0.1314669f, +0.1477618f, +0.3020763f, +0.1907422f, -0.3520380f, -0.3190390f,
  -0.2269679f, +0.1553717f, -0.0730368f, -0.0711513f, +0.1184673f, +0.0192688f, +0.0233057f, +0.1745680f,
  -0.0302241f, +0.1758888f, +0.0519765f, +0.2189159f, -0.1064927f, -0.1333500f, +0.0177264f, -0.0426576f,
  +0.5234802f, -0.1392680f, -0.0700144f, +0.0196341f, -0.0474263f, -0.1965644f, -0.1669006f, -0.2038703f,
  +0.0210224f, +0.2101786f, -0.0068735f, +0.0230022f, +0.0710134f, -0.0241036f, +0.4185008f, +0.2575134f,
  -0.2929101f, +0.0692862f, +0.2611902f, -0.2527907f, +0.2817727f, -0.1259662f, -0.1555860f, -0.0884105f,
  +0.7616008f, -0.2519523f, -0.2610204f, +0.7350224f, +0.0083230f, -0.1300602f, +0.1415423f, -0.1015810f,
  -0.0383197f, +0.0012893f, +0.0526787f, -0.0374603f, +0.0522637f, -0.2141999f, +0.1158382f, +0.1103018f,
  -0.2851259f, +0.0521185f, -0.2138259f, -0.1168187f, -0.0900447f, +0.3853763f, -0.2410415f, -0.4318562f,
  +0.2975199f, -0.0465791f, -0.1518684f, +0.1050196f, +0.2776937f, -0.3073489f, +0.2833242f, +0.2734846f,
  +0.1233420f, +0.0908047f, +0.0713822f, +0.1076406f, -0.2600665f, +0.0349871f, -0.0679879f, +0.0228000f,
  +0.2445924f, +0.0376577f, +0.0465370f, +0.0083345f, -0.3112140f, +0.0753409f, -0.3423973f, -0.0100142f,
  +0.0320043f, -0.0842216f, +0.1107273f, -0.0616129f, -0.0788248f, -0.1675658f, +0.0294605f, -0.2304401f,
  -0.2221260f, -0.0131260f, -0.1197242f, +0.0106885f, +0.2095537f, +0.1940843f, -0.3307882f, +0.2242073f,
  +0.5836570f, -0.0245245f, -0.0063442f, +0.0044228f, -0.3408776f, +0.4941173f, -0.2069307f, +0.1176080f,
  -0.0553441f, -0.1973902f, +0.3840412f, -0.1519034f, +0.0697782f, +0.1974889f, +0.2014110f, -0.0254120f,
  -0.0198529f, -0.1413633f, +0.0690958f, +0.1900177f, -0.1765022f, -0.0159236f, -0.1048954f, -0.1891115f,
  -0.1722775f, -0.1580957f, -0.2417787f, +0.1053323f, -0.1875383f, +0.1643112f, +0.2154928f, +0.3560855f,
  +0.0061115f, -0.2902454f, +0.1343560f, +0.0340036f, +0.1284466f, -0.1525255f, +0.1554519f, +0.0969077f
);

const float biases[4] = float[4](
  +0.0530637f, +0.0464462f, -0.0175984f, +0.1059105f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer24 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1722744f, -0.0996817f, +0.0396143f, -0.1137451f, +0.4263632f, +0.0215104f, +0.0796932f, -0.2178878f,
  -0.3940808f, -0.1997168f, +0.2781904f, +0.1310334f, +0.1420243f, +0.0806534f, +0.1830382f, -0.1319227f,
  +0.0096706f, -0.1476619f, +0.0021053f, +0.0700102f, +0.2042821f, +0.1957165f, -0.1134071f, -0.2567139f,
  +0.0528845f, -0.3042259f, -0.3870185f, -0.2115903f, -0.1074764f, -0.4821000f, +0.0995223f, -0.1810416f,
  +0.2506736f, -0.1725913f, +0.0856232f, -0.0722876f, +0.4544119f, -0.3392093f, -0.2761675f, -0.2865414f,
  -0.4564539f, -0.0931696f, +0.3733972f, +0.1633333f, +0.3921645f, +0.3082539f, -0.1509561f, +0.0610784f,
  -0.0433033f, +0.1177779f, -0.0547747f, +0.0487889f, +0.2948703f, +0.0650748f, -0.7386532f, -0.3395880f,
  +0.0759945f, -0.3444853f, -0.4431511f, -0.5407645f, +0.1311266f, -0.1170176f, +0.2669481f, +0.1678320f,
  +0.1463731f, -0.1734269f, -0.0979560f, +0.0638080f, -0.1922173f, +0.0009659f, -0.1196112f, -0.3662355f,
  +0.1086262f, +0.1067755f, +0.0952773f, +0.1878490f, -0.0691378f, +0.1153693f, +0.0374849f, +0.1436354f,
  +0.2092396f, +0.0565281f, -0.0756177f, +0.2100415f, +0.2667206f, +0.0638766f, -0.0099602f, -0.1132581f,
  -0.0149483f, +0.0077099f, +0.1048178f, +0.0754128f, -0.3570396f, -0.0446651f, -0.1984432f, +0.1332684f,
  -0.0227008f, +0.0933299f, +0.0745964f, +0.5506158f, +0.2114586f, -0.3341306f, -0.2768230f, +0.1523985f,
  +0.1362661f, +0.2393873f, -0.3626796f, -0.1369486f, -0.1595391f, -0.4467615f, +0.2944820f, +0.2048134f,
  +0.1946966f, -0.1935776f, +0.1103577f, -0.1497942f, +0.0338516f, -0.0008682f, -0.0125301f, +0.1065551f,
  +0.1281691f, -0.2954783f, +0.1080544f, -0.0327314f, +0.1522582f, -0.0104909f, -0.1245579f, +0.0094305f,
  +0.1206888f, +0.0845456f, +0.2918723f, -0.2803135f, -0.4092346f, -0.0166927f, +0.1375721f, -0.2657264f,
  -0.0880509f, -0.1543783f, -0.2824342f, +0.2745352f, -0.1179676f, +0.1560444f, +0.0443073f, -0.0441889f,
  +0.0586516f, -0.4186790f, +0.0604239f, -0.1775474f, +0.1274731f, +0.1022680f, +0.2746181f, -0.0376992f,
  -0.1555701f, -0.5513791f, +0.1496825f, +0.2876332f, -0.1485290f, +0.0326268f, +0.0448711f, -0.0946834f,
  +0.1060909f, -0.6214441f, -0.0414878f, -0.1651123f, +0.0605913f, +0.2613256f, +0.0993424f, +0.0277619f,
  +0.2032514f, -0.6912017f, -0.0619822f, -0.2360530f, -0.1065396f, +0.0970360f, +0.0367458f, -0.5373862f,
  +0.9179503f, -0.6392968f, -0.2217548f, -0.2348185f, +0.1713938f, -0.2186878f, -0.1395528f, -0.2106764f,
  +0.0135356f, -0.7421704f, +0.2039085f, -0.1556815f, +0.0590716f, +0.1976687f, -0.1614041f, +0.4283865f,
  -0.2270969f, -0.5395016f, +0.2826517f, -0.1259800f, +0.1447171f, +0.2871333f, -0.0480818f, +0.0210500f,
  -0.1016812f, -0.8612356f, +0.1557216f, -0.0084313f, -0.6214432f, +0.1377148f, -0.1833644f, -0.5383307f,
  -0.2671050f, -0.8013830f, -0.2292980f, +0.1431183f, -0.0333672f, +0.1566806f, +0.0538033f, +0.1718334f,
  -0.4055670f, -0.0652072f, -0.0134820f, -0.0853994f, -0.1928159f, +0.3025170f, -0.1572996f, -0.0741621f,
  -0.6766494f, -0.4129910f, +0.3759466f, -0.2470360f, -0.0130509f, +0.3289020f, +0.1075249f, +0.0029836f,
  +0.1131039f, -0.0184565f, +0.2583875f, -0.0522540f, +0.0138963f, -0.0725828f, -0.0585067f, -0.1563776f,
  -0.0364190f, +0.0221305f, +0.1066459f, -0.0454593f, +0.2146505f, -0.0572111f, -0.0707028f, -0.0907855f,
  -0.0258481f, -0.6596718f, +0.0216881f, +0.2059760f, +0.3259329f, -0.1125562f, -0.2629691f, +0.0331340f,
  +0.0571897f, -0.3421196f, +0.0386162f, -0.1909011f, +0.0598606f, +0.0800498f, +0.0699318f, -0.1445783f,
  +0.1017363f, +0.0097752f, -0.1081823f, -0.0694633f, -0.2545788f, -0.0259266f, +0.1259541f, +0.1477694f,
  -0.0573635f, -0.0027326f, -0.1902011f, -0.2309142f, -0.1343835f, +0.2051453f, -0.1764481f, -0.0419864f,
  +0.1141091f, -0.1084147f, +0.0406255f, -0.1634945f, -0.1544616f, +0.0239864f, -0.1429998f, +0.0187337f
);

const float biases[4] = float[4](
  -0.1060918f, -0.0158910f, -0.0820002f, -0.0179533f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer24 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0903828f, -0.1502279f, -0.3145083f, -0.3298896f, -0.1493978f, -0.1374517f, -0.1407818f, -0.3020242f,
  -0.4891715f, -0.2554059f, -0.5211251f, -0.2753957f, -0.2376438f, -0.0191308f, -0.0324903f, +0.1784821f,
  -0.3730626f, -0.1260942f, -0.0109501f, -0.0013443f, +0.1584502f, +0.2848586f, +0.0336413f, +0.1037868f,
  -0.0287085f, -0.2058927f, -0.2677226f, -0.2424977f, -0.2112140f, +0.2254713f, -0.3273068f, -0.2661228f,
  -0.1314422f, -0.2616299f, -0.2444481f, -0.3653366f, -0.0793092f, +0.0299924f, +0.3658259f, +0.2446967f,
  -0.1557862f, -0.0940911f, -0.2827300f, +0.2089402f, -0.1245410f, -0.2188910f, +0.0425860f, +0.0262868f,
  -0.1581004f, -0.1623936f, +0.2563447f, -0.1879272f, -0.1540240f, +0.0575036f, +0.0893926f, -0.0606354f,
  -0.1481343f, -0.2901807f, -0.3338983f, +0.2257300f, -0.5074673f, +0.3612841f, -0.2241995f, -0.0125487f,
  -0.2242728f, -0.2350265f, -0.2088666f, -0.0859301f, -0.1085161f, +0.1970248f, +0.0784182f, +0.2616221f,
  -0.0163792f, +0.0040258f, +0.1561705f, +0.0176313f, -0.0271738f, +0.1245551f, +0.0756487f, +0.3055865f,
  +0.3021665f, +0.2996107f, -0.1704782f, +0.1323100f, -0.0120109f, -0.0469674f, -0.0110977f, -0.1390909f,
  +0.0504219f, +0.0030094f, -0.2112017f, +0.0072094f, -0.0772523f, -0.0200194f, -0.0131213f, +0.0229339f,
  +0.0504896f, -0.3247874f, +0.1518233f, -0.2227202f, -0.0413406f, +0.1099489f, -0.0885111f, -0.0859579f,
  +0.5520220f, +0.2379206f, +0.2105901f, -0.2727715f, -0.1394478f, -0.1660925f, +0.1636459f, -0.4935373f,
  -0.0028427f, +0.1290048f, -0.0162801f, +0.0057540f, -0.0755993f, -0.0174410f, -0.0155152f, +0.0057035f,
  +0.0085050f, -0.0332369f, +0.1725677f, -0.1041004f, +0.0455374f, +0.0879341f, -0.1407655f, -0.0382240f,
  +0.0814700f, -0.0431547f, +0.1504725f, +0.1270161f, -0.0068664f, -0.0308299f, +0.0943043f, -0.1248069f,
  +0.0823708f, +0.1367253f, +0.0208053f, +0.1210352f, +0.1331024f, -0.1354762f, +0.0689615f, -0.1104509f,
  -0.2015526f, -0.6078126f, +0.1337973f, -0.1087797f, -0.0046954f, +0.0646452f, +0.1953270f, -0.3281732f,
  +0.8535511f, -0.5163301f, +0.2300181f, +0.0724923f, +0.0505492f, -0.3045852f, -0.1519321f, -0.3315104f,
  -0.0513670f, -0.4618386f, +0.7048806f, -0.3331577f, -0.0022177f, +0.2237498f, +0.2266915f, +0.0655530f,
  +0.1366193f, -0.4022877f, +0.1139598f, +0.0574726f, +0.2653524f, -0.1614815f, +0.4573541f, -0.1483056f,
  -0.7656248f, -0.4880832f, +0.4027111f, +0.5719312f, -0.0982163f, +0.6935604f, -0.6071771f, +0.2870986f,
  +0.1729115f, -0.3905673f, -0.1159089f, -0.4044039f, +0.1463644f, -0.0824403f, +0.0976558f, +0.2143989f,
  +0.0623683f, -0.6644611f, +0.3057503f, -0.0800944f, +0.2897895f, -0.0590855f, +0.3492074f, +0.0397168f,
  +0.0556571f, -0.6759211f, +0.4096508f, -0.1762275f, +0.1318339f, -0.0997333f, -0.1344942f, +0.0202869f,
  +0.0082357f, -0.3634219f, +0.4655599f, -0.2085962f, +0.1744446f, +0.0474366f, -0.0462893f, +0.0171996f,
  -0.3474801f, -0.1085991f, +0.2629172f, +0.3113100f, +0.1119972f, +0.5052562f, +0.1661638f, +0.1169455f,
  -0.5591806f, -0.3086001f, +0.4487230f, +0.2831290f, -0.1950679f, +0.4988259f, -0.0689562f, -0.2402663f,
  +0.1395889f, -0.1854901f, -0.0090613f, -0.3422562f, -0.1709333f, -0.1930064f, +0.0114106f, +0.0146491f,
  -0.3110735f, -0.2287015f, +0.1205931f, +0.0169356f, -0.0351185f, +0.2271391f, -0.1244508f, -0.2160962f,
  -0.3114780f, -0.3612068f, -0.0209199f, -0.1936975f, -0.1850749f, -0.0162321f, -0.0395480f, +0.0430386f,
  +0.0146049f, -0.2813399f, -0.0479290f, -0.0768294f, +0.1040008f, +0.0030580f, +0.0159247f, -0.0646440f,
  +0.0331713f, -0.1053256f, +0.2288947f, -0.0209234f, +0.2060784f, +0.0010771f, +0.1949306f, -0.1174450f,
  +0.0911036f, -0.1872129f, +0.1270092f, +0.0432912f, +0.0972994f, +0.0355617f, +0.0188722f, -0.0840823f,
  +0.0256944f, -0.0036983f, +0.1510626f, -0.0569710f, +0.0157967f, +0.0065502f, +0.0189312f, -0.0395995f
);

const float biases[4] = float[4](
  -0.0229806f, +0.0212459f, -0.0761204f, -0.0654234f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer25 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1015471f, -0.0038288f, -0.0078416f, -0.0328279f, +0.1769405f, +0.0531596f, -0.3113202f, -0.1008733f,
  +0.0727897f, +0.2777230f, +0.1457370f, -0.1330550f, +0.1148023f, +0.0929436f, +0.1150473f, -0.1290055f,
  -0.0263084f, +0.0792292f, +0.2436821f, -0.0833540f, +0.1564831f, +0.0135217f, +0.0042794f, -0.1029415f,
  -0.2625607f, -0.2329148f, -0.2072580f, +0.0464188f, -0.0244969f, -0.0295304f, -0.5295676f, +0.0099688f,
  -0.0532867f, +0.0924785f, +0.0209679f, +0.1091908f, -0.3556485f, +0.3063173f, +0.0898996f, +0.5598421f,
  +0.0149165f, -0.0074165f, -0.0866006f, +0.1072429f, -0.1137448f, +0.1221461f, -0.0739406f, +0.1465394f,
  -0.0165919f, +0.0531025f, +0.1920200f, -0.0869328f, +0.1720553f, +0.0538815f, -0.3575690f, -0.5802350f,
  +0.0463415f, +0.3506790f, +0.4344491f, -0.2619433f, -0.1845223f, -0.0119953f, +0.1085876f, -0.1626323f,
  +0.0960162f, -0.1186937f, +0.0489195f, +0.0879283f, -0.0480086f, -0.1086453f, -0.4284166f, -0.2526344f,
  -0.1358951f, +0.2906076f, +0.0363096f, +0.1439736f, -0.1395020f, -0.0758158f, +0.2899450f, +0.2375206f,
  -0.1826818f, -0.1921901f, -0.2904455f, +0.2142833f, +0.0287955f, -0.3376408f, +0.0733440f, -0.1840044f,
  +0.0771315f, +0.0180543f, +0.1173578f, +0.0658456f, +0.0669736f, -0.0922091f, +0.3294936f, +0.4238538f,
  +0.2191937f, -0.0549574f, +0.1146545f, +0.0391589f, +0.0815985f, -0.0650431f, +0.6285048f, +0.4245569f,
  -0.0950832f, -0.8457126f, -0.7888535f, +0.4717514f, -0.0702071f, -0.2019462f, -0.0871345f, -0.3299083f,
  -0.2731016f, -0.0699852f, -0.0157895f, -0.2130736f, -0.3092239f, -0.1083954f, -0.0824889f, -0.1633947f,
  -0.2658181f, +0.0537531f, +0.1250097f, +0.1132061f, +0.1845094f, -0.0325616f, +0.1431496f, +0.3282338f,
  -0.1766952f, -0.2924725f, +0.0347504f, +0.4640338f, +0.4944901f, -0.2823040f, +0.3432162f, +0.1556529f,
  -0.1572483f, -0.0555735f, +0.0867800f, +0.1689909f, +0.0006225f, +0.2754189f, +0.3953276f, +0.3329848f,
  -0.4752848f, -0.0916325f, +0.1015512f, -0.0226776f, +0.2624248f, +0.0244858f, +0.0789529f, -0.4118365f,
  +0.1957475f, -0.2830556f, -0.8503715f, -0.3111018f, +0.1514408f, -0.1779778f, -0.2494080f, -0.0598105f,
  -0.4556233f, -0.1187627f, -0.0826153f, -0.0640818f, -0.1434522f, -0.1742862f, -0.3382025f, +0.0593920f,
  -0.1653257f, +0.2674020f, -0.5079275f, -0.0634134f, +0.0998573f, -0.2435867f, -0.0515823f, +0.0907210f,
  +0.6311908f, -0.0570247f, +0.6832373f, +0.4770027f, +0.0785307f, +0.1729503f, -1.5048414f, +0.4623280f,
  -0.0837374f, +0.1926145f, -0.3819220f, +0.2176688f, +0.1613451f, +0.0327214f, -0.0674600f, -0.3954267f,
  +0.3930168f, -0.5378123f, -0.0909030f, +0.1057226f, +0.0720319f, -0.1433006f, -0.4750389f, -0.3277854f,
  +0.0626575f, -0.2277727f, -0.3463843f, -0.4473833f, -0.5052990f, +0.0065822f, +0.8297331f, -0.2275313f,
  -0.1674874f, -0.2496697f, -0.0760533f, -0.0680195f, +0.0993773f, -0.3715628f, -0.1667625f, +0.0254014f,
  +0.1138199f, -0.0838625f, +0.1359994f, +0.2340644f, -0.1974587f, -0.2239245f, +0.0704848f, +0.0567545f,
  +0.0427962f, +0.0359557f, -0.4999951f, +0.1502652f, +0.1218351f, -0.2124248f, -0.5439357f, +0.1382416f,
  +0.2804012f, -0.0151733f, -0.5375475f, +0.0108804f, +0.1339714f, -0.0202979f, -0.2677957f, +0.2665502f,
  +0.1695154f, -0.2395947f, -0.2013691f, -0.1476793f, +0.0811385f, -0.0711658f, +0.0340116f, -0.0086478f,
  -0.1359608f, -0.5168777f, -0.9385694f, +0.0494160f, +0.3519393f, -0.2992591f, -0.1570057f, +0.3282495f,
  +0.0878993f, +0.0586882f, -0.1401322f, +0.3085133f, +0.0643631f, -0.3294543f, -0.3487639f, +0.1451587f,
  +0.2647069f, -0.0752008f, -0.0828186f, +0.0035190f, +0.0317255f, +0.1975542f, -0.3246770f, -0.1717315f,
  +0.1916716f, -0.4319752f, -0.3939637f, +0.3934978f, +0.2475004f, -0.4907676f, -0.6229539f, +0.6560509f,
  +0.2465912f, -0.0553988f, -0.3939853f, +0.0592991f, +0.0576334f, +0.0718559f, -0.2080413f, -0.0996440f
);

const float biases[4] = float[4](
  +0.0274598f, -0.0684934f, -0.0845242f, +0.1217752f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer25 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0704114f, +0.0253379f, -0.0006849f, +0.2620122f, +0.2415752f, -0.1255195f, -0.4044221f, +0.3035376f,
  +0.0541927f, -0.1726415f, +0.2758284f, -0.3370019f, +0.4893595f, +0.0721341f, -0.1972596f, -0.3949323f,
  -0.2048428f, -0.3371431f, +0.4967682f, -0.1508159f, -0.0587903f, -0.0775119f, +0.3100604f, -0.2400647f,
  -0.0782398f, -0.3621235f, +0.0813904f, +0.3715324f, -0.1366597f, -0.0530645f, +0.0869308f, +0.1809949f,
  +0.1096245f, -0.5187237f, +0.0322743f, +0.8003622f, -0.0571573f, -0.4745463f, -0.1838732f, +0.1457432f,
  +0.2254504f, +0.1481557f, +0.3782246f, +0.0245372f, -0.1272245f, +0.3053359f, -0.2765755f, -0.0017310f,
  -0.1049046f, +0.0369222f, +0.2596928f, +0.0132169f, +0.2404137f, -0.1368953f, -0.0764822f, +0.0409371f,
  -0.2003976f, -0.0901315f, -0.2945423f, +0.2102666f, +0.2590969f, -0.1584820f, +0.4649029f, +0.0763183f,
  -0.2907495f, -0.4708837f, -0.1275236f, +0.2603440f, +0.1221729f, +0.1354273f, +0.2509373f, +0.1845639f,
  -0.3111295f, -0.0284614f, +0.0650554f, +0.0429170f, +0.3374524f, +0.1182575f, +0.0720003f, +0.0614623f,
  -0.3880202f, -0.2374710f, -0.0189153f, -0.0643324f, +0.1388681f, -0.0788660f, +0.1583420f, +0.1705602f,
  -0.0193261f, -0.1612416f, -0.0727887f, +0.0692781f, +0.5454223f, -0.3538584f, +0.2406563f, +0.3159963f,
  -0.0343017f, -0.4767715f, -0.2503603f, +0.0299270f, +0.2456070f, -0.2561258f, -0.1806462f, -0.0183738f,
  +0.1161363f, +0.3377450f, -0.2196033f, +0.3420593f, -0.0714180f, -0.2207823f, +0.2150762f, -0.0571181f,
  +0.4320947f, -0.1778526f, -0.4177064f, +0.0352278f, +0.3415987f, +0.0039328f, +0.3634459f, -0.0583009f,
  +0.1489481f, -0.3282908f, +0.0743512f, +0.2113840f, -0.0022548f, -0.2994172f, +0.4807541f, -0.2150370f,
  -0.2165204f, -0.0410603f, +0.1088622f, -0.2818851f, -0.3074319f, -0.3036934f, +0.8994568f, +0.1085962f,
  +0.1384193f, -0.0018880f, -0.3747530f, +0.2040751f, +0.0751790f, -0.4594576f, +0.2200543f, +0.3211027f,
  -0.1015259f, -0.1134257f, +0.0364695f, +0.0953913f, -0.1074099f, -0.2221974f, +0.0497476f, +0.1591704f,
  +0.2871497f, +0.1544527f, +0.0661607f, +0.1055542f, -0.1815246f, -0.1680793f, +0.0359317f, -0.0416659f,
  -0.0172296f, +0.0346902f, -0.1061601f, +0.0774840f, -0.1337518f, +0.1495749f, -0.1391237f, -0.0435300f,
  +0.2325859f, +0.0690623f, -0.0602091f, +0.0639673f, +0.0638956f, -0.2437502f, +0.2646933f, -0.0530814f,
  +0.1395963f, -0.0038640f, +0.0176956f, -0.3399605f, +0.0837322f, -0.1435731f, -0.5989516f, -0.3659745f,
  -0.0273227f, -0.1837522f, -0.0722443f, -0.1879856f, -0.2353712f, -0.2023067f, -0.1127031f, +0.1569628f,
  +0.2173319f, +0.0203751f, +0.0563595f, +0.1231373f, -0.0618633f, +0.0176041f, +0.0096291f, +0.0819079f,
  +0.2423382f, -0.0263283f, -0.1020504f, -0.1449167f, -0.3036348f, +0.0129704f, +0.0111587f, -0.0345784f,
  +0.0292414f, +0.2241260f, +0.0413059f, -0.1548812f, -0.1079618f, -0.0670944f, -0.0070912f, +0.1481044f,
  +0.1102405f, -0.0437829f, +0.0442970f, +0.0010351f, -0.3156193f, +0.1540960f, +0.0033080f, -0.2497944f,
  -0.0623885f, +0.1327946f, -0.1856053f, -0.4585969f, +0.1439715f, +0.1347190f, -0.2495206f, -0.1737541f,
  -0.1110371f, +0.1672343f, +0.0335766f, -0.1254567f, -0.3099889f, -0.1046874f, -0.0257051f, -0.2036176f,
  -0.1492888f, +0.3293620f, +0.0108339f, -0.2703552f, +0.2802239f, +0.0384690f, +0.0389066f, -0.0317989f,
  +0.2054326f, +0.1318676f, -0.0660627f, +0.3767500f, -0.2163432f, -0.0522564f, +0.2291898f, +0.6075124f,
  +0.0773268f, +0.1500711f, -0.2474450f, +0.0857722f, -0.0641990f, +0.4156051f, -0.0098872f, +0.0704344f,
  +0.2535204f, -0.1188495f, +0.0586882f, +0.0879290f, -0.4883455f, -0.0280076f, -0.0080438f, -0.1533153f,
  +0.1078311f, -0.0991504f, -0.2102326f, +0.0039475f, +0.0703716f, -0.2340817f, +0.4247636f, +0.2118819f,
  -0.1758788f, -0.0676950f, -0.0936804f, +0.0512926f, -0.0956557f, -0.0888496f, +0.4263489f, +0.2604740f
);

const float biases[4] = float[4](
  -0.2141622f, -0.1633467f, +0.3612694f, +0.0882248f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer26 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2720915f, -0.1545913f, +0.0763381f, +0.1619844f, -0.0716266f, -0.3591050f, +0.1226489f, +0.1989935f,
  +0.1022866f, +0.1211995f, -0.1919329f, +0.3755148f, +0.4440069f, +0.0792725f, -0.1170742f, -0.0332554f,
  +0.1908348f, -0.1662231f, +0.1967601f, +0.1601405f, -0.0476059f, -0.5461265f, +0.0410208f, -0.1954084f,
  +0.1648465f, +0.6660576f, +0.2536897f, +0.4561360f, +0.0911945f, -0.2608217f, +0.2372685f, -0.0610479f,
  +0.2094645f, +0.1114474f, +0.2204381f, +0.0558150f, -0.1678100f, +0.0100427f, -0.0571977f, -0.0819720f,
  -0.0950297f, -0.0929801f, +0.0705927f, -0.1481964f, +0.1279166f, -0.2077686f, -0.0182964f, +0.4261090f,
  -0.1415970f, +0.4463274f, +0.0710990f, +0.1137516f, -0.0885413f, -0.0714704f, -0.1481968f, +0.1461623f,
  +0.2733039f, +0.4571514f, -0.2466272f, +0.3902107f, -0.1421713f, +0.1127540f, -0.0579877f, +0.1842847f,
  +0.0002371f, -0.0115014f, +0.0295344f, -0.1250117f, -0.2035308f, +0.1621749f, +0.0991106f, +0.0386005f,
  -0.0991104f, -0.0506774f, +0.4303429f, +0.0718909f, +0.3508143f, +0.3686322f, +0.0267184f, -0.0355366f,
  -0.1416318f, +0.2332715f, +0.3023365f, +0.1486120f, +0.2323565f, +0.4616297f, +0.0064457f, +0.3197790f,
  -0.2242945f, -0.1658305f, +0.6645957f, +0.3192850f, +0.1829034f, +0.3623877f, +0.0601619f, +0.2421716f,
  -0.0359932f, -0.4503463f, +0.2876593f, +0.0997427f, +0.4284781f, +0.0612076f, +0.4072371f, +0.0948263f,
  +0.2673834f, -0.1009124f, +0.4909502f, -0.3293905f, +0.5992366f, +0.0274818f, +0.8630255f, -0.1860275f,
  -0.2294269f, -0.3146828f, +0.4206119f, -0.2819707f, +0.0204746f, +0.1779359f, -0.2878792f, -0.3893026f,
  +0.0553766f, -0.2408659f, +0.3798375f, +0.4967517f, +0.2132670f, -0.2591257f, -0.1025479f, -0.1013051f,
  +0.0130075f, +0.2979972f, +0.5165125f, -0.6683308f, +0.0910324f, +0.1644887f, -0.2047318f, -0.1766446f,
  -0.1879184f, -0.2743003f, +0.3088008f, +0.3581032f, -0.0087850f, -0.1608667f, +0.0308213f, -0.0256424f,
  +0.2937626f, -0.1154376f, +0.0355344f, -0.1246304f, +0.0371312f, +0.3800672f, -0.0998479f, -0.1249948f,
  +0.1478316f, -0.1258468f, +0.1271591f, +0.2566442f, -0.1192326f, -0.3537408f, -0.0424519f, -0.1319898f,
  +0.1160493f, -0.0664462f, +0.2700788f, +0.3248207f, -0.2289125f, -0.1008807f, -0.2161087f, -0.1901231f,
  +0.1652372f, +0.3828833f, +0.2324727f, -0.2166862f, -0.1667835f, +0.3033964f, +0.1874206f, -0.2208096f,
  +0.3872963f, +0.3192521f, +0.3710766f, +0.0319239f, -0.5589198f, -0.1460398f, -0.0335070f, -0.0209167f,
  +0.3703614f, -0.0475751f, +0.3758637f, +0.0924445f, -0.2267720f, +0.0789603f, +0.4392737f, -0.4475647f,
  -0.1398130f, +0.1192573f, +0.4265731f, +0.0315457f, +0.0627535f, +0.0212343f, -0.0368313f, -0.4318063f,
  -0.1005879f, +0.1356132f, +0.6571516f, -0.3543401f, -0.0158611f, -0.0350808f, -0.0812129f, -0.2774186f,
  +0.2368216f, -0.6557086f, +0.3749838f, -0.1837895f, -0.0121796f, -0.0507016f, +0.1921307f, -0.0385725f,
  -0.0622435f, -0.0008818f, -0.3318314f, -0.0073405f, -0.2065558f, -0.4918308f, +0.0591746f, -0.0709305f,
  +0.3306260f, -0.0809904f, -0.5341293f, -0.3881813f, -0.2853155f, -0.0432993f, +0.0944411f, -0.2845370f,
  -0.0341177f, -0.0369835f, -0.4585276f, +0.0609421f, +0.1238243f, -0.2081255f, -0.1381013f, -0.2587939f,
  -0.0168319f, -0.1590906f, -0.4625127f, -0.0303869f, -0.2013615f, -0.2042050f, -0.0422490f, +0.0151947f,
  -0.2613109f, +0.1015147f, -0.7795902f, +0.5334259f, -0.5329247f, -0.0586001f, +0.0624977f, -0.3737916f,
  +0.1328579f, -0.0687510f, -0.2275285f, -0.1768486f, -0.0530609f, -0.5940005f, +0.0983102f, +0.1671178f,
  -0.0241576f, +0.1183201f, -0.4016320f, -0.3852509f, -0.0508282f, +0.1188613f, -0.1388160f, +0.1553500f,
  -0.0710201f, -0.1136778f, -0.3043596f, -0.3501486f, +0.0731555f, -0.0984065f, -0.2533293f, +0.4143976f,
  +0.1472882f, +0.0554813f, -0.4158400f, -0.2409130f, -0.1954262f, +0.0189047f, -0.0287595f, +0.1656984f
);

const float biases[4] = float[4](
  -0.0573132f, -0.0461981f, -0.1587996f, +0.0951305f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer26 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0660307f, +0.0429637f, -0.2716151f, +0.1558968f, -0.2323131f, +0.2478054f, +0.1946352f, -0.1292664f,
  +0.0570411f, +0.2806705f, -0.3766029f, -0.0680455f, -0.2146303f, +0.4532525f, +0.1286079f, -0.2240171f,
  -0.0773556f, +0.0101795f, -0.3790731f, -0.1590989f, -0.4305617f, +0.3375981f, -0.0964494f, -0.1102130f,
  +0.1929561f, +0.5232283f, -0.1455155f, -0.2841550f, +0.0924139f, -0.0594969f, +0.1305883f, -0.2127932f,
  +0.4541893f, +0.5990131f, -0.2943154f, -0.2237322f, -0.4548382f, -0.1772555f, +0.4801100f, -0.0893990f,
  +0.1267774f, -0.0951083f, -0.1694931f, +0.0636403f, +0.2251794f, -0.0323482f, -0.0813809f, -0.4793149f,
  -0.0067101f, +0.3735417f, -0.3077515f, -0.2200156f, -0.1066155f, -0.0158400f, +0.1098668f, +0.1030322f,
  -0.0434091f, +0.6042757f, -0.4746991f, -0.2511245f, -0.4732569f, -0.0320416f, -0.1441333f, -0.1659480f,
  -0.1978043f, -0.1625834f, -0.0225482f, +0.2072459f, -0.1748651f, -0.0716865f, -0.1443768f, +0.0466796f,
  +0.1325334f, -0.0078760f, +0.1228896f, -0.2769686f, -0.0799467f, +0.1279978f, -0.1109507f, -0.1086837f,
  -0.1472501f, -0.0260600f, +0.2574887f, +0.2620835f, +0.1649410f, -0.1160870f, -0.0083020f, +0.1362123f,
  -0.0915583f, +0.0187283f, +0.3104817f, +0.0048271f, +0.1509757f, +0.0536080f, +0.1459927f, +0.0608095f,
  -0.1477328f, +0.1918416f, +0.1308849f, -0.0724018f, +0.1505052f, +0.0821260f, -0.2278762f, -0.2449787f,
  -0.0070527f, -0.0127943f, +0.5706946f, -0.0756405f, +0.1620362f, -0.0421520f, -0.1023780f, +0.2184225f,
  -0.0859271f, +0.0275239f, +0.3179834f, +0.0138260f, -0.0439793f, +0.0462784f, +0.1287921f, -0.1351182f,
  +0.0853467f, -0.1909993f, +0.3220370f, +0.0973970f, -0.0903658f, +0.0527600f, -0.1101869f, -0.2179984f,
  +0.0326664f, -0.4422927f, +0.4943411f, +0.0029439f, +0.1201201f, -0.1308075f, +0.0803227f, -0.1017165f,
  +0.0642029f, -0.1791013f, +0.2847202f, +0.3159598f, +0.0576679f, -0.1661831f, +0.0694013f, -0.0528117f,
  +0.2901006f, -0.0840848f, +0.1805419f, +0.5627310f, -0.1792756f, -0.1480709f, +0.0496344f, -0.2815267f,
  +0.1916852f, -0.0806021f, +0.3297228f, -0.4364159f, -0.5363378f, -0.1057160f, -0.2771499f, -0.2309722f,
  +0.3200587f, +0.1682603f, +0.1251901f, -0.0909686f, -0.2698370f, -0.3145551f, -0.0470015f, +0.1815471f,
  +0.2797430f, +0.1723918f, +0.2352247f, -0.1754150f, -0.3394121f, -0.1524558f, -0.0233113f, -0.0515268f,
  +0.2673394f, -0.2412497f, -0.4207814f, -0.3110471f, -0.2969264f, +0.0862818f, -0.3812964f, +0.1521827f,
  +0.8543394f, +0.2402510f, -0.2042149f, +0.2864487f, -0.1934695f, +0.0872662f, +0.1709709f, +0.2541879f,
  +0.0362748f, +0.0802034f, -0.1464403f, -0.0256900f, -0.0594997f, -0.1157585f, -0.0475110f, +0.0421269f,
  -0.0755511f, -0.0844805f, -0.4550554f, +0.4527947f, -0.2334666f, -0.2056176f, -0.2123923f, +0.0329397f,
  +0.2444304f, +0.0583630f, -0.2299306f, -0.4252957f, -0.1102770f, -0.2104923f, -0.0632686f, +0.0087206f,
  +0.1670552f, +0.3664698f, +0.0114732f, +0.2429462f, -0.1050733f, -0.2750776f, -0.4306789f, -0.0557881f,
  -0.1399514f, -0.1671680f, +0.1080493f, -0.0596961f, -0.1658268f, -0.0923373f, +0.2520682f, -0.1088840f,
  +0.0442404f, -0.0264920f, +0.0867491f, +0.0710378f, -0.0327275f, -0.2475426f, +0.1021861f, +0.0180702f,
  +0.2479312f, +0.3741016f, -0.0393439f, +0.5054334f, -0.2788363f, -0.1178951f, -0.0228367f, -0.0048894f,
  -0.0743679f, +0.3471298f, +0.1102106f, -0.5288002f, +0.2973754f, +0.0132609f, +0.0880158f, -0.0575252f,
  +0.0474961f, -0.0973345f, -0.1527214f, -0.0997470f, -0.2188447f, -0.4247893f, -0.0656342f, +0.2073160f,
  +0.1606769f, -0.1060856f, -0.0410465f, +0.0326689f, +0.0096686f, -0.0681345f, +0.1639911f, +0.0974001f,
  +0.1773230f, -0.0492244f, -0.2481687f, +0.2262056f, -0.2303066f, -0.0177869f, +0.0780049f, +0.2279622f,
  -0.0566320f, +0.2012842f, -0.1311035f, +0.0625686f, +0.2305453f, -0.0811807f, -0.0058623f, -0.0311178f
);

const float biases[4] = float[4](
  +0.0663726f, +0.0235634f, -0.0389017f, +0.0183972f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer27 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0301738f, -0.0862145f, -0.1752083f, +0.1691464f, -0.0284729f, -0.0492021f, -0.1119343f, +0.0714411f,
  +0.1696116f, -0.1072148f, -0.0377782f, +0.2891746f, -0.2605371f, -0.0454444f, +0.5011196f, +0.0752615f,
  +0.0780040f, +0.0882854f, -0.2037077f, -0.0354326f, +0.0029942f, -0.0657365f, -0.1842770f, +0.0585297f,
  -0.0979603f, -0.1325195f, +0.2221625f, +0.1886634f, +0.0108520f, -0.2873348f, +0.1257434f, +0.1356372f,
  +0.2799787f, -0.0053885f, +0.4805516f, -0.1928238f, -0.0607298f, +0.1100627f, +0.4604895f, -0.2725068f,
  -0.2228150f, +0.2930071f, +0.2515217f, +0.1797862f, -0.0927754f, +0.1258433f, +0.3973691f, -0.1034660f,
  +0.3780391f, -0.0731681f, -0.2603588f, +0.1495567f, -0.1263496f, -0.1131919f, -0.1127398f, -0.2396277f,
  -0.1725998f, -0.0932636f, -0.0411291f, +0.1152794f, +0.3844984f, -0.0182333f, -0.1666157f, +0.3847616f,
  -0.3977181f, +0.1713990f, +0.1828513f, -0.0057483f, -0.5430886f, +0.2644966f, +0.1148165f, +0.0601370f,
  +0.0331465f, -0.1396375f, -0.0554221f, +0.2483116f, +0.0671028f, -0.0380497f, +0.2119180f, +0.1031771f,
  +0.1057720f, -0.2221226f, -0.0008760f, +0.1872959f, +0.0728304f, -0.2194287f, -0.1328134f, +0.0968229f,
  -0.0462643f, -0.2101017f, -0.1226855f, +0.0634903f, +0.1070163f, +0.1037235f, -0.2028708f, -0.0966085f,
  -0.2009240f, -0.1285636f, +0.0242141f, +0.1238397f, +0.0744606f, +0.0390274f, +0.0852346f, +0.1172775f,
  +0.0272823f, -0.6257176f, -0.2535763f, +0.0374322f, -0.2099991f, -0.3760305f, -0.2581924f, -0.0827717f,
  +0.1395978f, +0.1256584f, -0.2019471f, +0.0320330f, -0.2352187f, -0.1111640f, +0.0045731f, +0.0164672f,
  -0.1235693f, +0.1082319f, -0.0939877f, -0.0800159f, -0.2526577f, +0.0194237f, +0.0573329f, +0.0916827f,
  +0.3097718f, +0.1853085f, +0.5935290f, -0.3556048f, +0.0038737f, +0.6088368f, -0.2553267f, -0.2324897f,
  -0.0113084f, +0.0506409f, +0.1480322f, -0.1174303f, -0.0452774f, +0.0643212f, -0.1114536f, -0.0923662f,
  -0.0315601f, +0.0981058f, -0.1191064f, -0.0169336f, +0.1066017f, -0.0985665f, -0.1958188f, +0.0145052f,
  +0.1509716f, -0.0566361f, -0.3575913f, -0.3417936f, +0.1551228f, -0.1659778f, -0.7064390f, -0.1778735f,
  +0.1783227f, +0.0307162f, -0.0093298f, -0.1789780f, -0.1413885f, -0.0273156f, +0.0155455f, -0.0812523f,
  +0.0661187f, +0.0521479f, +0.1406298f, +0.1823924f, -0.2234254f, -0.0597675f, -0.1991228f, -0.0784044f,
  +0.2063902f, -0.8141510f, -0.3440950f, +0.8812429f, -0.7165917f, +0.0448802f, -0.6661569f, +0.0033213f,
  -0.2496435f, -0.7245322f, +0.0294635f, -0.0094648f, -0.4222968f, +0.2097806f, -0.4390038f, +0.2972697f,
  -0.1633537f, +0.0247271f, +0.0785407f, +0.1754435f, +0.1893148f, +0.0550136f, -0.1565495f, +0.0420508f,
  -0.2881837f, -0.0309052f, +0.0878687f, +0.1753114f, +0.2478354f, +0.1923059f, +0.0535862f, -0.0720020f,
  -0.4690316f, -0.0514126f, +0.2460399f, +0.1227194f, +0.1356012f, -0.0469969f, -0.1044948f, +0.1436359f,
  -0.0013735f, +0.1763428f, +0.0439292f, +0.0202920f, -0.0772107f, -0.0258392f, -0.1387636f, +0.3298887f,
  +0.1861964f, +0.0121185f, +0.3164619f, -0.0920791f, -0.0703908f, -0.1334754f, -0.3473741f, +0.1943091f,
  +0.3305685f, +0.2964503f, +0.1039207f, -0.0778810f, -0.1092304f, -0.0469135f, +0.0157096f, +0.0814733f,
  -0.2008571f, +0.2651996f, -0.0972871f, -0.1298967f, +0.2754703f, +0.2653912f, -0.2140874f, +0.2459206f,
  +0.0584675f, +0.7613772f, -0.3789068f, +0.0776051f, +0.0217210f, +0.4736722f, +0.0405414f, +0.0825315f,
  +0.2113045f, +0.5383319f, -0.0518228f, +0.0840583f, -0.0070299f, +0.4009155f, -0.1185573f, -0.2064264f,
  -0.0792939f, -0.0360129f, -0.0571387f, -0.0870147f, +0.0421773f, -0.0632547f, +0.1352610f, +0.1304422f,
  +0.0621573f, -0.0805009f, +0.0068739f, +0.0274959f, -0.0226708f, +0.2897162f, -0.1615046f, +0.0213185f,
  +0.0346301f, -0.0020515f, +0.2007097f, -0.0944972f, -0.0880001f, +0.3685235f, -0.0999612f, +0.1498770f
);

const float biases[4] = float[4](
  +0.1546540f, +0.0913012f, -0.0723557f, +0.0474309f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer27 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0346145f, -0.1816649f, -0.3002602f, +0.0806285f, -0.0934996f, -0.2470617f, -0.1474408f, -0.2498830f,
  -0.4048476f, +0.3396780f, -0.1847616f, -0.0975560f, +0.0331894f, +0.0021746f, -0.6387039f, -0.1247259f,
  +0.0229999f, -0.3319471f, +0.0688796f, -0.0494925f, +0.2639862f, -0.0016665f, -0.1136725f, +0.1697040f,
  +0.0751136f, +0.1469219f, +0.1591141f, +0.2187277f, +0.1337025f, -0.1324168f, +0.0297473f, -0.1537181f,
  -0.3956628f, -0.1331837f, -0.6314039f, -0.5479159f, +0.0293053f, +0.0450846f, -1.0466362f, +0.1409311f,
  +0.1782237f, -1.5075638f, +0.2585746f, -0.3866156f, +0.4095038f, +0.1011307f, +0.3820190f, +0.3905263f,
  -0.0302786f, -0.1068574f, -0.0713480f, +0.0894357f, -0.1272684f, +0.0120871f, +0.1509453f, -0.0214596f,
  -0.2786749f, -0.4202594f, -0.2655649f, -0.7051664f, +0.2932792f, +0.1750932f, +0.2900303f, -0.0780352f,
  +0.2018241f, -0.2226204f, +0.3295104f, +0.0142657f, +0.1690211f, -0.2450192f, -0.3771568f, -0.5165986f,
  -0.3432526f, +0.1406722f, -0.0124733f, -0.2792377f, +0.2389470f, +0.1169956f, -0.4056762f, -0.0348211f,
  +0.0706060f, -0.3329230f, -0.0546260f, -0.1501197f, -0.0042948f, -0.0453690f, +0.0109155f, +0.3783445f,
  +0.0684581f, +0.0491021f, -0.0452785f, -0.0552375f, +0.0257563f, +0.2055769f, +0.0231068f, +0.0309134f,
  -0.4157453f, -0.0354704f, -0.5206794f, -0.3174484f, +0.5250328f, +0.1456535f, -0.6918695f, +0.4831246f,
  +0.2968219f, -0.3580352f, -0.1384067f, +0.0271273f, +0.1438673f, -0.1937220f, +0.5581745f, +0.7233275f,
  -0.0055006f, +0.1049725f, -0.0533836f, +0.0996408f, -0.0159997f, +0.1093243f, +0.1246019f, +0.2058969f,
  -0.2732105f, -0.2097484f, -0.1670358f, -0.6725246f, +0.1307758f, +0.1077244f, +0.2571191f, -0.1234097f,
  +0.1585257f, +0.0808136f, +0.1473725f, +0.2490039f, +0.0261171f, +0.0492474f, -0.3438554f, -0.0636523f,
  +0.1726793f, +0.1383242f, +0.1270010f, -0.1255140f, -0.0976057f, +0.1847478f, +0.0289905f, +0.2436409f,
  +0.3804519f, +0.3793144f, +0.4012409f, -0.0748431f, -0.7099966f, +0.1868357f, +0.3721458f, -0.0726649f,
  -0.0478169f, +0.1938130f, -0.2545360f, -0.0756261f, +0.0159089f, +0.2185609f, +0.2794141f, +0.0604820f,
  -0.0768694f, +0.0810854f, +0.2558713f, -0.1332747f, -0.2208200f, -0.0937575f, +0.0514112f, -0.0150696f,
  +0.0002688f, +0.3402303f, -0.1817933f, -0.0098992f, -0.1224253f, +0.1872903f, +0.1129707f, +0.2515774f,
  +0.1615790f, +0.3457100f, -0.3690275f, -0.0101450f, +0.1490764f, +0.1325447f, +0.6912663f, +0.0700539f,
  -0.0139228f, -0.0162396f, -0.0017048f, -0.0959862f, -0.2792822f, -0.0352942f, -0.0144939f, +0.0322074f,
  +0.1981982f, +0.1466921f, +0.2823792f, +0.0960876f, -0.0894741f, +0.0598138f, +0.1492197f, -0.0927218f,
  +0.6259083f, -0.2512714f, +0.0884918f, +0.0263586f, +0.2938583f, -0.3024573f, +0.3879284f, +0.1114825f,
  +0.1689718f, -0.0109225f, +0.1692617f, -0.0386043f, +0.2763340f, -0.1150005f, -0.0336022f, +0.0882509f,
  -0.1693595f, +0.0188429f, +0.4423016f, +0.1397984f, -0.1230715f, -0.0427820f, +0.0988348f, -0.0398760f,
  +0.3248597f, -0.5408742f, -0.2895167f, -0.1188127f, +0.1577296f, +0.0098938f, +0.0159206f, +0.0009468f,
  +0.0259203f, -0.1337213f, -0.1290389f, -0.0415379f, +0.1506905f, +0.0325155f, -0.0691920f, +0.1118896f,
  -0.0470729f, +0.1756067f, -0.0806209f, -0.1432053f, +0.2171172f, +0.1201906f, -0.3961405f, +0.0957499f,
  +0.0570688f, -0.6951611f, +0.1500742f, +0.1350643f, +0.2537687f, +0.0104683f, +0.1154624f, +0.2805273f,
  -0.0419271f, +0.4202944f, -0.2265264f, +0.1458095f, +0.0918937f, +0.0458092f, +0.2638675f, +0.4751142f,
  +0.0511841f, +0.1638627f, -0.1896650f, -0.0653706f, -0.3392180f, +0.0963784f, -0.3706837f, -0.1577267f,
  -0.0908492f, -0.3573572f, +0.0930324f, -0.0324128f, -0.3069898f, -0.1347129f, -0.2391858f, +0.1338068f,
  -0.0770374f, +0.1087881f, -0.4183283f, +0.0815948f, -0.2203944f, -0.1256683f, -0.0859570f, +0.0481482f
);

const float biases[4] = float[4](
  -0.1405817f, +0.0520285f, +0.1656028f, +0.0694862f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer28 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.5266137f, -0.0614463f, +0.0046966f, -0.0501032f, -0.3597794f, -0.1359522f, -0.1145559f, -0.1646908f,
  +0.1562025f, -0.0736644f, +0.0714640f, +0.0713863f, -0.4815071f, +0.1941000f, -0.2831067f, +0.1189549f,
  +0.1754836f, +0.2119764f, +0.0581815f, +0.0221297f, -0.0561683f, +0.3346706f, -0.1357876f, +0.1342147f,
  +0.2603445f, +0.0101842f, +0.1755497f, -0.0259800f, -0.4898613f, +0.1796531f, +0.2620170f, -0.2917309f,
  -0.4227955f, +0.0770977f, +0.5763981f, +0.1808847f, +0.7055359f, +0.2610500f, +0.0209180f, -0.0349490f,
  +0.2508800f, -0.0322627f, +0.1473440f, -0.2020398f, -0.1804232f, -0.3950808f, +0.0317819f, -0.1857670f,
  -0.2792506f, +0.0153009f, +0.1075310f, -0.1834740f, -0.1212743f, +0.0436809f, +0.0360164f, -0.0385462f,
  -0.1316234f, -0.0600041f, -0.2233879f, -0.1720842f, +0.2140496f, +0.0704073f, +0.0259384f, -0.1619706f,
  -0.1138812f, +0.0616686f, +0.2298324f, +0.0301782f, -0.0109984f, -0.2270205f, -0.2007584f, +0.1787131f,
  -0.1175628f, -0.0230595f, +0.1303542f, +0.0130751f, +0.3859180f, +0.1033429f, +0.1850693f, +0.0814482f,
  -0.1878741f, -0.0073628f, -0.1208027f, +0.0172761f, -0.1824928f, -0.3550350f, +0.4460089f, +0.1310608f,
  +0.0195890f, -0.0897904f, -0.0445169f, +0.3359859f, -0.1053813f, +0.2060888f, -0.0264701f, -0.2260790f,
  -0.1114303f, +0.0211979f, -0.5468984f, +0.1583531f, -0.1634780f, -0.0052782f, +0.1496598f, -0.0923756f,
  -0.0862376f, +0.4036499f, -0.0402464f, -0.3692237f, +0.5953680f, +0.1481718f, -0.4780556f, +0.4533454f,
  +0.2609173f, +0.4342273f, -0.2164489f, +0.0731221f, -0.0472943f, -0.1855936f, -0.0643348f, -0.5365652f,
  -0.0906333f, +0.2657057f, -0.2590251f, +0.0519712f, +0.1869621f, +0.0845516f, +0.3914114f, +0.1265138f,
  +0.0198908f, +0.2458081f, +0.3189611f, -0.3018848f, +0.3285316f, +0.0373056f, -0.2684306f, +0.5612072f,
  +0.2402539f, +0.4236295f, -0.1234190f, +0.3232205f, +0.0478021f, -0.1160440f, +0.0594611f, -0.2661187f,
  -0.0670180f, +0.0585199f, -0.3056823f, -0.0166698f, -0.5129067f, -0.3095758f, -0.0718020f, +0.2277991f,
  +0.1284638f, -0.2045954f, -0.0538976f, +0.0115938f, -0.4227112f, +0.0899004f, -0.0785521f, +0.1983550f,
  -0.1661319f, -0.1772978f, -0.1854066f, -0.1344107f, -0.1061413f, +0.0911137f, -0.0246635f, -0.0702880f,
  -0.0338495f, +0.2530604f, +0.0641979f, +0.2734791f, -0.3566771f, +0.1209081f, +0.2740131f, +0.2034622f,
  -0.2606135f, +0.3150305f, +0.0012828f, +0.2384239f, -0.3393058f, +0.3418203f, +0.3062967f, +0.0035227f,
  +0.1256799f, -0.1296489f, -0.1403616f, -0.1588537f, +0.0931014f, +0.3464552f, -0.1436640f, -0.1041181f,
  +0.0668117f, +0.2650539f, +0.3339826f, -0.4180258f, +0.1457059f, +0.0931192f, +0.0959398f, -0.0766751f,
  +0.0966536f, +0.2556029f, +0.5149985f, -0.5920898f, +0.3121426f, +0.0911256f, +0.1307829f, -0.0316310f,
  +0.2497255f, +0.3637742f, -0.1979778f, +0.0897209f, -0.1096161f, -0.1744444f, -0.1305826f, -0.5611622f,
  +0.1708601f, +0.2278313f, +0.0013100f, +0.1787346f, +0.1308840f, +0.1066320f, -0.3179784f, -0.0914309f,
  -0.2209088f, +0.4802137f, -0.4017723f, -0.0652996f, -0.0033882f, +0.0138430f, -0.2338239f, -0.1391253f,
  +0.0127422f, -0.0375058f, -0.0723450f, -0.2623103f, +0.1908414f, +0.3484771f, -0.0514594f, +0.0565083f,
  -0.0957526f, +0.0875157f, -0.5789118f, +0.3976435f, +0.3312733f, +0.0084151f, -0.1181239f, -0.0671351f,
  +0.1971188f, -0.0945101f, -0.0737281f, +0.5260427f, +0.5070435f, -0.1132219f, +0.0606390f, -0.2744753f,
  -0.0325950f, +0.1480502f, -0.2979979f, -0.0833952f, +0.0363599f, -0.1646246f, +0.0024253f, -0.0634749f,
  +0.1147656f, +0.0080175f, +0.2685525f, -0.3085025f, +0.2919117f, +0.0394778f, -0.0279409f, +0.0417036f,
  -0.1561124f, -0.0123560f, -0.0203012f, -0.1732389f, -0.1443361f, -0.0478898f, +0.2408845f, -0.0679176f,
  -0.2082835f, -0.0279700f, +0.1349530f, -0.0784143f, -0.0785699f, +0.1294130f, +0.1598037f, +0.2174182f
);

const float biases[4] = float[4](
  +0.0674137f, -0.0249290f, -0.1396845f, -0.0324372f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer28 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1257932f, +0.0327529f, +0.0288728f, +0.1129891f, -0.1122578f, -0.0680442f, -0.3026295f, +0.0919096f,
  -0.3545862f, -0.0134297f, +0.0217278f, +0.1917991f, +0.0277050f, -0.0819220f, -0.3428407f, -0.0223904f,
  -0.1849007f, -0.0184031f, -0.0199924f, -0.2409355f, -0.0280889f, -0.1538172f, +0.0049544f, +0.1360729f,
  +0.0840212f, +0.1890808f, -0.1091845f, +0.0497399f, -0.4298049f, +0.0888181f, -0.0170161f, -0.1266247f,
  +0.0974318f, +0.0770387f, -0.5017493f, +0.0174862f, -0.3112710f, +0.1960086f, +0.0912168f, +0.0183201f,
  +0.0853121f, -0.0021390f, -0.1565112f, -0.1146551f, -0.0564800f, -0.0315336f, +0.0073313f, -0.1537130f,
  -0.3018650f, -0.0247986f, +0.2575201f, +0.0654006f, +0.0475823f, -0.0035408f, -0.1192208f, -0.0214855f,
  +0.0394351f, +0.1519495f, +0.4622513f, -0.0766919f, +0.1279413f, -0.0056306f, +0.3550696f, -0.4859980f,
  -0.0581436f, +0.0014698f, +0.1093664f, -0.1202302f, -0.0414388f, -0.0893211f, +0.3090226f, -0.1234889f,
  -0.0899914f, +0.0252343f, -0.3080655f, -0.0803741f, -0.0651584f, -0.0516829f, +0.2639292f, +0.0410509f,
  +0.0697324f, -0.2550724f, +0.0000612f, -0.0857506f, -0.0037648f, +0.3183352f, +0.3718980f, -0.0343078f,
  -0.0602112f, -0.1832459f, -0.0656227f, +0.1627570f, -0.0061094f, -0.0434370f, +0.0262626f, -0.2344206f,
  -0.1089527f, +0.0762999f, +0.2699240f, -0.0062313f, -0.2005663f, -0.0190815f, +0.2073484f, +0.0799571f,
  -0.0121928f, -0.0029429f, +0.1268794f, -0.3225410f, +0.0161687f, +0.3045506f, -0.1283855f, +0.1494023f,
  +0.0056033f, -0.0705166f, -0.0061030f, -0.0086700f, +0.0740234f, +0.0912395f, -0.0539000f, +0.0072168f,
  +0.0494256f, -0.0345110f, +0.2241738f, +0.0503188f, +0.0703382f, -0.0608932f, -0.1002058f, -0.0762670f,
  +0.2274840f, -0.0128815f, -0.2017332f, -0.0069571f, +0.0448711f, -0.0082401f, +0.0692452f, -0.0189955f,
  +0.1821977f, -0.1882563f, -0.0569610f, +0.1202518f, +0.0463998f, +0.0032252f, -0.2518418f, -0.0927479f,
  -0.0704179f, -0.1824937f, +0.0926557f, -0.0855910f, -0.2056404f, -0.0232953f, -0.0585397f, +0.0390126f,
  -0.2264761f, +0.0143217f, +0.2665195f, +0.1592123f, +0.0414711f, -0.0227750f, -0.2577964f, -0.2801128f,
  +0.1128936f, +0.2719799f, -0.0452689f, -0.1535433f, -0.1278629f, -0.4399773f, +0.0603254f, +0.1687354f,
  -0.2745838f, +0.0701910f, -0.2065127f, +0.2237858f, +0.0750632f, -0.1040747f, +0.2238392f, +0.0591942f,
  -0.3483002f, +0.2191206f, +0.6280843f, +0.1004165f, -1.1431705f, -0.6060620f, -0.2052190f, -0.1114149f,
  -0.0661052f, +0.1297407f, +0.1958545f, +0.2702928f, +0.1022971f, +0.6121308f, +0.0703957f, +0.0766839f,
  -0.0202818f, +0.0854040f, -0.1056476f, +0.1318305f, -0.1944594f, -0.0758248f, -0.1344924f, +0.1396859f,
  -0.3268858f, +0.3584264f, -0.1464114f, +0.0449834f, -0.2491689f, +0.0299844f, -0.0872333f, -0.1256361f,
  +0.0675892f, +0.1563864f, -0.0280521f, +0.1086783f, +0.1022496f, +0.3628272f, -0.2537815f, -0.1226240f,
  -0.0086905f, -0.2521496f, -0.3822519f, -0.1545310f, -0.2147925f, -0.1331888f, +0.1001777f, -0.0628727f,
  +0.1159501f, -0.3792765f, -0.2071831f, -0.1413693f, -0.2069490f, +0.5273115f, -0.1549904f, -0.2667187f,
  +0.1206729f, -0.1616236f, -0.1317667f, -0.0239891f, +0.1676569f, +0.1694488f, -0.0163073f, -0.0702629f,
  +0.1037479f, -0.3201502f, +0.1269848f, +0.0072174f, -0.7099966f, -0.1821503f, -0.2000340f, -0.2143719f,
  +0.1340397f, +0.0031984f, +0.1467339f, +0.1915949f, -0.0535511f, +0.3483236f, -0.4049616f, -0.4734195f,
  +0.1738627f, +0.0132362f, -0.1167284f, +0.1059370f, +0.0724100f, -0.0822320f, -0.0650564f, -0.2929185f,
  +0.2523360f, -0.1343814f, -0.3821453f, +0.4578235f, -0.3979706f, -0.1085251f, -0.0834941f, -0.2981755f,
  -0.0751188f, -0.2053486f, -0.0262311f, +0.4999866f, -0.0446426f, +0.2011713f, -0.2287927f, -0.1727110f,
  +0.1267592f, -0.0583073f, -0.0535833f, +0.2291332f, +0.0725183f, -0.0019535f, -0.0317062f, -0.0161860f
);

const float biases[4] = float[4](
  +0.0343101f, +0.0246034f, +0.0633861f, -0.0370744f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer29 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1825548f, -0.3050210f, +0.0375638f, +0.3128018f, +0.3947913f, -0.2793692f, -0.3606834f, +0.1572279f,
  +0.3403100f, -0.6028952f, -0.1837600f, +0.6270431f, +0.2570907f, -0.1329779f, -0.6570526f, +0.1334235f,
  +0.0057536f, -0.3665328f, -0.3518356f, +0.2936662f, +0.1630007f, -0.2993345f, +0.0947988f, -0.1891039f,
  +0.2124550f, -0.3909390f, +0.0537709f, +0.0763812f, -0.0220192f, -0.0314029f, -0.1633603f, -0.0941805f,
  -0.1825059f, -0.0080783f, -0.1242060f, +0.0286050f, +0.2056957f, -0.3075840f, +0.0522935f, +0.1915401f,
  -0.1532628f, +0.0018945f, -0.0673873f, +0.2125764f, +0.2615046f, -0.0289720f, -0.2833223f, -0.2733006f,
  +0.0273687f, -0.3828310f, -0.1813638f, -0.1544526f, -0.2618873f, -0.1202116f, -0.2160846f, -0.2579491f,
  -0.1549358f, -0.2108712f, -0.0739978f, -0.1608565f, -0.0550185f, +0.0745788f, -0.3300916f, +0.0153411f,
  -0.1954545f, -0.1850515f, +0.0850599f, -0.0015582f, -0.1972771f, +0.0454193f, -0.0637449f, -0.2053202f,
  -0.0703664f, +0.1745250f, +0.1792554f, +0.0549456f, -0.0760434f, -0.0815127f, +0.2327940f, -0.5623940f,
  +0.0818971f, +0.0066748f, +0.0818737f, -0.0542538f, +0.2707458f, -0.3284098f, +0.1568932f, -0.6581464f,
  -0.3766771f, -0.0562502f, +0.3501298f, -0.0633565f, -0.2264037f, -0.1083530f, +0.0700832f, -0.1875574f,
  +0.2415925f, -0.7013434f, -0.6048720f, -0.2064262f, -0.1826264f, -0.1759821f, +0.0767723f, +0.3129054f,
  -0.1256858f, -0.4891272f, -0.1190431f, +0.0177359f, +0.4563601f, +0.1652501f, +0.0827341f, +0.5633686f,
  -0.1098347f, +0.0782372f, -0.1402372f, -0.0371045f, -0.0552202f, -0.0343317f, +0.3576904f, +0.1609168f,
  -0.3262003f, +0.1870310f, -0.2787948f, +0.0934527f, +0.2885228f, +0.2029396f, -0.3707903f, -0.1838928f,
  -0.1725756f, +0.2906762f, +0.0009846f, -0.0736628f, -0.1105052f, -0.0326193f, -0.6517212f, -0.0637599f,
  -0.2628343f, +0.1340638f, +0.0087972f, +0.0537547f, +0.0495001f, -0.1008389f, -0.2692772f, +0.0348833f,
  +0.0083569f, +0.1204613f, -0.1695196f, -0.1488503f, +0.5838209f, -0.2441096f, -0.3764427f, +0.1960183f,
  +0.2757099f, -0.1279150f, +0.1015020f, +0.2533658f, +0.5103753f, +0.0686584f, +0.1992844f, -0.1984177f,
  +0.0841301f, +0.4259714f, +0.0367581f, -0.1451632f, +0.3012403f, +0.1351846f, +0.1985287f, +0.3748628f,
  +0.2158265f, +0.2655205f, -0.1848054f, +0.2442555f, -0.0377463f, -0.2087220f, +0.1043579f, +0.1126826f,
  +0.0838181f, -0.3625527f, -0.0598795f, -0.1627658f, -0.2494798f, -0.0977131f, +0.1276284f, +0.1953271f,
  +0.3524069f, +0.0158424f, -0.1054136f, +0.1063746f, +0.7497858f, -0.1870544f, +0.2656286f, +0.1877224f,
  +0.1630648f, -0.0534557f, -0.0602076f, +0.2369672f, -0.1054986f, -0.2824968f, -0.0369991f, -0.0446585f,
  +0.0664734f, -0.1654779f, -0.2776101f, -0.1265919f, -0.2015609f, -0.1275787f, +0.2493573f, +0.0752198f,
  +0.0882529f, -0.0091196f, -0.1118162f, -0.0171477f, +0.1027050f, -0.2297314f, +0.0526515f, -0.1187757f,
  +0.0472458f, +0.4134659f, +0.0909532f, -0.2752450f, -0.1583222f, +0.2624297f, +0.0594358f, -0.2404347f,
  -0.3696178f, -0.3199729f, -0.0667048f, -0.0262028f, +0.2613782f, -0.2502004f, -0.0243945f, +0.0747516f,
  +0.1101235f, +0.0526912f, -0.5114375f, +0.0500448f, +0.1515773f, -0.1945364f, -0.3155703f, +0.0686068f,
  +0.1222821f, -0.0955765f, -0.1056425f, +0.0527793f, -0.1147441f, -0.1150318f, -0.0920547f, -0.1912123f,
  +0.1798015f, -0.3580890f, -0.0086336f, +0.1565108f, -0.3047182f, -0.2076646f, -0.4864393f, -0.0038754f,
  +0.0486820f, +0.0526708f, -0.1169341f, +0.3674444f, +0.0765403f, +0.3722746f, -0.4636425f, +0.0955939f,
  +0.0597593f, +0.3360935f, -0.2222917f, -0.0473638f, -0.2306888f, +0.2278398f, +0.2137706f, -0.1989480f,
  +0.2032713f, +0.2143898f, -0.2695751f, +0.0852318f, -0.2149521f, -0.0865517f, -0.5547237f, -0.1407939f,
  +0.1386650f, +0.0370149f, -0.0275998f, +0.0240485f, -0.1312411f, +0.0542994f, +0.0475251f, +0.1293828f
);

const float biases[4] = float[4](
  +0.1356171f, -0.1097584f, -0.2455858f, +0.0850542f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer29 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2780196f, -0.0650047f, -0.2443790f, -0.1605830f, -0.0568492f, -0.1280425f, +0.1378765f, +0.1244790f,
  -0.0542698f, -0.0498946f, +0.3630052f, +0.2297520f, +0.0505371f, -0.1165439f, +0.0782317f, -0.0333221f,
  +0.3627018f, -0.0638485f, +0.0659211f, +0.1003635f, +0.3992620f, +0.0895960f, +0.0765603f, +0.2025421f,
  +0.1233324f, -0.1752804f, -0.3173790f, -0.4371333f, -0.0402539f, +0.1962762f, +0.1191254f, -0.4059196f,
  -0.4147160f, -0.5939658f, +0.1817584f, +0.1314630f, +0.0895106f, -0.1212681f, +0.0096572f, +0.0136152f,
  -0.2031545f, -0.2054895f, +0.0079226f, +0.1580683f, +0.0685863f, +0.0995765f, -0.3798219f, -0.0849500f,
  -0.0061526f, -0.3039814f, -0.2996148f, -0.0925984f, -0.2749681f, -0.4372986f, -0.3742861f, +0.0134362f,
  -0.0755176f, -0.5172147f, -0.1356248f, -0.2124337f, -0.1703072f, -0.0788693f, +0.0206537f, -0.2459923f,
  +0.2504331f, -0.2979462f, -0.0239163f, -0.1785184f, +0.4448113f, -0.1049736f, +0.0587773f, -0.0816518f,
  -0.1136542f, +0.2831171f, +0.1476860f, -0.0852815f, -0.1018122f, +0.2585719f, -0.2002905f, -0.1294425f,
  +0.0971128f, +0.0230386f, -0.1786071f, -0.0499924f, -0.6529012f, +0.1226207f, +0.1814089f, -0.1410409f,
  +0.0259046f, +0.5862147f, -0.1671786f, -0.1184203f, -0.2333996f, +0.3951173f, +0.1032539f, +0.1939925f,
  -0.4809614f, +0.5646715f, +0.0841344f, +0.0488559f, +0.2359016f, +0.1746276f, -0.2016732f, -0.0530186f,
  -0.1162904f, +0.0749741f, +0.3453347f, +0.2042461f, +0.2746888f, +0.1171644f, -0.5171067f, +0.1000919f,
  -0.2843467f, +0.3804701f, +0.1128767f, +0.1234451f, +0.2698165f, +0.0440131f, +0.0564981f, +0.2724155f,
  -0.0894646f, +0.3467349f, -0.0121857f, +0.0606541f, -0.0239432f, +0.0055408f, -0.0245044f, -0.0851210f,
  -0.1096798f, -0.1454896f, +0.0672856f, +0.0317756f, +0.3125862f, -0.1795170f, -0.1448193f, +0.0609267f,
  -0.2638229f, +0.1091315f, +0.1420486f, -0.0375959f, -0.3017829f, +0.0253303f, +0.1074793f, -0.1781669f,
  +0.1358418f, -0.1621227f, -0.4089117f, +0.0875717f, +0.2206934f, -0.0779369f, +0.0501540f, +0.2434055f,
  +0.2317417f, +0.0605771f, +0.1175194f, +0.1816792f, -0.0890607f, -0.2705800f, -0.0196617f, -0.1433124f,
  -0.0704640f, +0.3104273f, +0.2657138f, +0.1988843f, +0.1669918f, -0.1158282f, -0.0231494f, -0.0118006f,
  -0.1336155f, -0.2611170f, -0.0341724f, +0.0428007f, -0.1447100f, -0.0096335f, -0.0041261f, -0.1108646f,
  +0.0337717f, -0.2088075f, -0.0152007f, +0.2871028f, +0.0304963f, -0.0649099f, -0.2673986f, -0.1356348f,
  +0.0430353f, -0.2143537f, +0.0633213f, +0.0606198f, +0.1512100f, +0.0849815f, -0.8750118f, -0.1825720f,
  -0.1180322f, +0.0421127f, -0.1848655f, -0.1050882f, +0.0430080f, +0.1573655f, +0.0679415f, +0.0813520f,
  +0.1550637f, -0.0921202f, -0.2486227f, +0.5490815f, +0.0593608f, -0.1222880f, -0.7376446f, -0.2250826f,
  -0.2099307f, -0.0301311f, +0.0045136f, +0.0035938f, -0.3295140f, +0.0819359f, -0.2686636f, +0.0002012f,
  +0.0050784f, +0.1719581f, +0.2052026f, -0.0603058f, -0.3762084f, +0.0102498f, +0.0626862f, -0.2795898f,
  -0.1885808f, -0.0338425f, +0.2516889f, -0.2010046f, -0.2789936f, +0.1161397f, -0.3101631f, +0.1135900f,
  -0.2917210f, +0.1774084f, +0.0005083f, -0.1074026f, -0.2586524f, +0.1000469f, -0.0422759f, +0.2173503f,
  -0.0162936f, +0.0969400f, -0.0113326f, -0.0256585f, +0.0514826f, +0.2636696f, +0.1866020f, -0.3252872f,
  +0.4487903f, +0.0702216f, +0.0836688f, -0.0237301f, +0.3861685f, +0.2046070f, +0.1634694f, -0.0434542f,
  +0.2093324f, +0.0239496f, -0.1302304f, +0.0009566f, +0.1396423f, -0.3536022f, +0.1848801f, +0.0065559f,
  -0.1629967f, +0.3833887f, +0.1373562f, -0.0248180f, -0.4188983f, +0.2942967f, +0.3653117f, +0.2184536f,
  +0.3981155f, +0.1966445f, -0.0977579f, -0.0258378f, +0.2804590f, -0.2968571f, +0.1542991f, -0.0824626f,
  -0.3479805f, +0.0006068f, +0.0872894f, -0.1336801f, -0.1761722f, +0.1615532f, +0.4486900f, +0.1730757f
);

const float biases[4] = float[4](
  +0.0407512f, -0.0824387f, -0.0709827f, +0.0529183f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer30 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1540114f, +0.0267405f, +0.0665093f, -0.2253262f, -0.1072898f, +0.1178437f, +0.2424826f, +0.0618270f,
  +0.1418065f, +0.0337515f, +0.0315093f, -0.2125435f, +0.0405976f, +0.0428130f, +0.2667430f, -0.2856955f,
  +0.3292930f, -0.0207750f, -0.2257604f, -0.0952210f, +0.0556883f, -0.1651587f, +0.0942502f, +0.3204705f,
  +0.0907855f, +0.2164911f, -0.4254356f, -0.1418509f, +0.0596641f, +0.1670033f, +0.2970049f, -0.4892864f,
  +0.1508541f, +0.1618641f, +0.2299795f, -0.4309919f, +0.0230226f, +0.1761879f, -0.4667704f, -0.4751267f,
  -0.1632091f, +0.1025115f, -0.0724648f, -0.1417019f, +0.0010408f, -0.2215361f, +0.2521496f, -0.3144302f,
  +0.1477156f, -0.1909157f, +0.1559882f, +0.0836918f, -0.0358980f, -0.0933022f, -0.0420234f, -0.1860250f,
  -0.4469479f, -0.4832747f, +0.0780824f, +0.1888674f, +0.0119710f, -0.3119146f, -0.2603242f, +0.2605033f,
  +0.3013048f, -0.5001044f, -0.1541944f, +0.1619787f, -0.0906984f, +0.0980337f, -0.1020971f, -0.1989362f,
  -0.0094918f, +0.0445839f, -0.1544535f, +0.3980861f, +0.1848347f, +0.0695622f, -0.0495769f, +0.1135227f,
  -0.0256745f, +0.1214903f, +0.3484266f, -0.1499634f, +0.0879600f, +0.2954597f, +0.3444225f, +0.1387100f,
  -0.0765769f, -0.1542244f, -0.1592060f, -0.2006366f, -0.0049763f, +0.1462467f, +0.1633566f, -0.1628201f,
  +0.1536998f, -0.0073458f, +0.3761291f, +0.0411987f, +0.0481081f, +0.4070594f, -0.0726605f, +0.3109781f,
  -0.0265795f, -0.1590136f, +0.5286704f, +0.3263152f, +0.1289494f, +0.6028646f, +0.2186736f, +0.5642937f,
  -0.2179095f, -0.4938171f, +0.1643226f, +0.0722269f, -0.3392142f, +0.4412315f, +0.2761313f, -0.2271671f,
  +0.4189277f, -0.1638933f, +0.2966353f, +0.0079164f, -0.0692978f, +0.1175997f, -0.1299484f, +0.0460986f,
  -0.0416515f, -0.2618125f, +0.1287024f, +0.0459022f, +0.0164754f, -0.0631210f, -0.0967031f, +0.1554885f,
  -0.2030716f, +0.1203790f, +0.1139447f, -0.2754325f, -0.1330629f, +0.2832428f, +0.0516650f, -0.0854898f,
  -0.0360384f, -0.3402491f, +0.1060214f, -0.1232095f, -0.1231154f, -0.1352593f, +0.2244816f, +0.0445652f,
  +0.0878956f, +0.1285178f, -0.1393715f, +0.0546203f, +0.2170204f, +0.0164561f, +0.1375681f, +0.1191927f,
  +0.0598060f, +0.0516000f, +0.2098811f, -0.0481169f, +0.2955173f, +0.2057575f, +0.0453703f, +0.0389904f,
  -0.0805766f, -0.2585874f, -0.1861942f, +0.0683265f, +0.0718494f, +0.0228939f, -0.1263894f, +0.1416454f,
  +0.1073381f, +0.0608305f, +0.1469584f, -0.0424660f, -0.0521996f, +0.0328241f, +0.1813600f, -0.2076106f,
  -0.0886938f, +0.2283165f, -0.3556533f, -0.2728130f, +0.3754553f, +0.1301106f, -0.2498119f, +0.0000580f,
  -0.3233387f, -0.4206096f, -0.0466804f, -0.2438699f, -0.2235172f, -0.3769131f, -0.2698098f, +0.0620273f,
  +0.0166572f, -0.0589846f, -0.2604032f, +0.0346018f, -0.1377174f, -0.4173238f, -0.1493278f, -0.2055291f,
  -0.3368264f, +0.0935444f, -0.4444862f, -0.1079956f, +0.2802572f, -0.4536152f, +0.2835315f, -0.0247187f,
  +0.0215818f, +0.1662458f, +0.0076646f, -0.0335672f, -0.0636848f, +0.1169861f, +0.0552662f, +0.0461115f,
  -0.1046558f, -0.0460242f, +0.1591273f, +0.1292400f, +0.0622047f, -0.1475298f, -0.3294381f, -0.1712086f,
  +0.1374157f, -0.1269403f, -0.2607926f, +0.1681208f, +0.3285590f, +0.2074461f, -0.2761518f, +0.0180800f,
  -0.2355724f, +0.1369647f, +0.0638072f, -0.1620111f, -0.1540363f, +0.0474379f, +0.0897916f, -0.1487935f,
  +0.0658606f, +0.2412392f, -0.0092965f, -0.1969585f, -0.2570954f, -0.3677602f, -0.2809617f, +0.3676329f,
  +0.0437270f, +0.3791096f, -0.4941893f, +0.0799135f, +0.0945816f, +0.1434502f, +0.0257458f, +0.0515133f,
  -0.2481332f, +0.1567117f, -0.0911215f, -0.0665376f, +0.0869372f, +0.1162323f, +0.0171758f, +0.0179164f,
  -0.1696097f, +0.0642285f, -0.3674451f, +0.1118734f, +0.0180476f, +0.3666331f, +0.1705819f, -0.0607203f,
  -0.2018182f, -0.0512596f, +0.2020994f, +0.1934341f, -0.1071844f, +0.0020180f, -0.0494713f, -0.0581068f
);

const float biases[4] = float[4](
  +0.0421812f, -0.0529653f, -0.1032116f, +0.0349291f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer30 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0306644f, +0.0224652f, -0.0405383f, -0.0997405f, -0.1874955f, +0.0563854f, +0.1242600f, -0.0127066f,
  +0.0132480f, +0.0411490f, -0.0664594f, +0.3509385f, -0.0242118f, -0.3798863f, -0.0767925f, -0.3335443f,
  +0.0658365f, +0.3788201f, +0.0157289f, +0.0675965f, +0.2741850f, -0.2149765f, +0.0204998f, +0.1233706f,
  -0.5279274f, -0.1072727f, -0.1491232f, -0.2565355f, +0.1145909f, -0.1130360f, +0.2530297f, +0.0707726f,
  +0.1465604f, -0.5027604f, +0.2092187f, -0.1607278f, -0.3796948f, +0.1737801f, +0.0331992f, +0.0084937f,
  +0.1436092f, -0.3035338f, -0.1073256f, -0.1050331f, +0.5097396f, +0.1475117f, -0.0184036f, +0.0728110f,
  -0.2687672f, -0.1753571f, +0.3041435f, -0.0730439f, -0.1604003f, +0.1335994f, -0.1342081f, +0.2410792f,
  -0.5114652f, -0.0416401f, -0.1915790f, -0.0990208f, -0.0363067f, +0.2356717f, +0.1364502f, +0.2449857f,
  -0.3563402f, +0.3767925f, -0.0725558f, +0.0224631f, +0.2032563f, -0.1313417f, +0.2808682f, +0.0506906f,
  +0.0401532f, -0.1209672f, +0.0930106f, +0.0572871f, +0.0711516f, -0.0775222f, -0.0142819f, -0.0996442f,
  +0.0441217f, -0.0614703f, +0.0297108f, -0.0242004f, +0.0010383f, +0.0749488f, +0.0364741f, +0.2602849f,
  -0.0601951f, -0.0489251f, +0.1756342f, +0.0182029f, -0.1148233f, +0.0069566f, -0.0328675f, -0.0268990f,
  +0.0202540f, -0.2294171f, -0.0969064f, +0.0074225f, -0.0418207f, -0.1239167f, -0.0631461f, +0.3299825f,
  -0.0092950f, -0.2420978f, +0.0007798f, +0.1153174f, +0.0170185f, +0.1392241f, -0.2292500f, +0.1916575f,
  -0.0442850f, -0.3057072f, +0.1857584f, +0.0273336f, +0.0218148f, +0.0743415f, +0.0591286f, -0.0340351f,
  +0.2793757f, +0.0098842f, +0.0469899f, +0.0890087f, -0.0238817f, -0.2282692f, +0.0384831f, -0.0106476f,
  +0.3223271f, +0.1609266f, -0.3094809f, +0.0564007f, +0.0609210f, -0.1531804f, -0.1272926f, -0.2489794f,
  +0.0777460f, +0.3079133f, +0.1498426f, -0.0679763f, +0.0514043f, -0.1847278f, -0.0319242f, +0.1218253f,
  -0.2876715f, +0.0099403f, -0.0862496f, -0.1813544f, +0.0691441f, +0.2451449f, -0.0262878f, +0.2462218f,
  +0.0717896f, +0.1158503f, -0.2734897f, -0.1025614f, -0.0246571f, +0.0594080f, +0.0732527f, +0.1717461f,
  -0.1949746f, -0.1277066f, -0.1699372f, -0.4308101f, +0.2684184f, +0.3915182f, -0.0302864f, +0.1366366f,
  +0.3508048f, +0.0783686f, +0.0535348f, +0.2452242f, +0.1843899f, -0.1209846f, +0.4558659f, -0.1068769f,
  +0.0369188f, +0.0180645f, -0.2616957f, +0.5108637f, -0.0192212f, -0.1523917f, +0.3583524f, -0.3762057f,
  -0.1019050f, +0.0917882f, +0.0528416f, -0.0498437f, -0.1070664f, -0.1849798f, -0.1294413f, +0.0336544f,
  -0.2796186f, -0.1994159f, +0.3442249f, +0.2738504f, -0.1594175f, -0.1430896f, -0.0229242f, +0.2417119f,
  +0.0733638f, -0.3203246f, +0.0358797f, +0.1115749f, +0.0074116f, +0.2711895f, -0.0330612f, +0.2274087f,
  -0.0956225f, -0.2232486f, +0.2193709f, +0.0115440f, -0.1607719f, +0.0205049f, -0.0472150f, +0.2387231f,
  -0.0709806f, -0.2200435f, +0.1805869f, -0.2538204f, -0.0154882f, -0.2101054f, +0.2162016f, -0.0641507f,
  +0.0203952f, -0.3492834f, -0.2252484f, +0.1009374f, +0.6311988f, +0.3126923f, -0.2355584f, +0.3020072f,
  +0.0897649f, -0.0019883f, +0.3342603f, -0.0804424f, +0.2210455f, +0.2450391f, -0.0784026f, +0.0431752f,
  +0.1519286f, +0.0528537f, +0.1221454f, -0.1357340f, -0.0238407f, -0.0673127f, +0.2747392f, +0.1154972f,
  -0.1361564f, -0.4669641f, +0.2603965f, +0.0658633f, +0.5827871f, -0.2118543f, +0.3660923f, +0.2266747f,
  -0.2491784f, -0.0179610f, -0.5748001f, +0.1728120f, +0.1651347f, -0.0112536f, +0.0750631f, -0.1055984f,
  +0.3094325f, +0.0098412f, -0.0935816f, +0.3548084f, +0.1775225f, +0.1254450f, +0.2805770f, -0.0850845f,
  -0.2713614f, +0.1634628f, +0.3487945f, +0.2230649f, +0.0777071f, -0.1528116f, +0.1973545f, +0.1553815f,
  +0.0305174f, +0.0778954f, +0.1904820f, +0.0395859f, +0.2271500f, +0.0503749f, -0.0915232f, -0.0260651f
);

const float biases[4] = float[4](
  +0.0703590f, +0.0417338f, +0.0311043f, +0.0180038f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer31 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2748418f, -0.2254134f, -0.3884118f, -0.1057669f, -0.2798564f, -0.1435100f, -0.1047305f, -0.1358016f,
  +0.0938348f, +0.2329921f, +0.2087353f, +0.0022681f, +0.2220489f, +0.2118348f, -0.0734663f, -0.1915082f,
  +0.4040793f, -0.3769569f, +0.0642064f, +0.0495904f, +0.3847952f, -0.1839944f, -0.2804145f, +0.1703797f,
  -0.0204484f, -0.0619373f, -0.2509350f, +0.1014853f, -0.3338386f, +0.0035913f, -0.1288000f, -0.0542221f,
  +0.2564427f, +0.5295694f, -0.2053343f, -0.0306762f, -0.2730080f, +0.2243466f, -0.0283414f, +0.2788545f,
  -0.0800497f, -0.5588373f, +0.1205846f, +0.1206508f, +0.5245169f, +0.2807755f, -0.3515258f, -0.0367652f,
  -0.2246616f, +0.2358016f, -0.1282737f, +0.1129346f, -0.2344837f, -0.0291953f, +0.1355929f, +0.1653585f,
  -0.2145523f, -0.1413053f, -0.0219277f, +0.2026558f, +0.0009958f, -0.3432536f, +0.0219070f, -0.0462646f,
  -0.0578979f, -0.2283333f, +0.1242806f, -0.1431022f, -0.1332187f, -0.1356615f, +0.0156968f, -0.0875462f,
  -0.1097772f, -0.0714590f, +0.0348778f, +0.0952743f, -0.0331515f, +0.1954587f, +0.0071910f, +0.2067874f,
  +0.3121991f, +0.0385889f, -0.3250958f, +0.0066443f, -0.1386325f, -0.2941105f, +0.2116625f, -0.1334465f,
  +0.2682336f, +0.0626328f, +0.4410682f, +0.1570757f, +0.2508568f, +0.1411640f, +0.1979960f, +0.1143636f,
  +0.1473073f, -0.4215130f, +0.2418508f, +0.1986141f, +0.2546961f, -0.1081430f, +0.2615848f, +0.2925355f,
  +0.3904070f, +0.6232771f, -0.6945036f, -0.1806355f, +0.2165488f, -0.4982816f, -0.7944633f, -0.2943274f,
  +0.1637703f, -0.2914327f, +0.0472164f, -0.2195322f, +0.0082628f, +0.2380610f, +0.1220314f, -0.2474479f,
  -0.0242369f, -0.2131600f, -0.0212908f, -0.2035843f, +0.1042365f, -0.0371010f, +0.1655740f, -0.0091708f,
  -0.0265142f, -0.0787856f, -0.1125341f, +0.3069527f, -0.0050264f, -0.3206935f, -0.3942040f, -0.1184611f,
  +0.1210314f, +0.0262042f, -0.1098553f, +0.1294969f, +0.1738677f, +0.0570190f, +0.0332114f, +0.2447991f,
  -0.5450358f, +0.2811734f, -0.1147523f, +0.0296742f, +0.1969085f, +0.2360276f, +0.2107229f, +0.3701282f,
  -0.1369228f, -0.2140181f, -0.1215210f, -0.0823290f, +0.0145884f, +0.3862352f, -0.0071639f, +0.1574448f,
  -0.1326185f, -0.0392060f, -0.0715456f, -0.2695032f, -0.5192557f, +0.0793819f, +0.1826346f, -0.0120434f,
  -0.3196832f, -0.2656988f, +0.4512982f, -0.0209281f, +0.4714458f, -0.1887946f, +0.3319133f, -0.4053499f,
  -0.1537015f, -0.0768553f, +0.0141431f, +0.0523748f, -0.0698693f, -0.5225905f, +0.1220801f, +0.0537834f,
  +0.1042215f, -0.1488391f, +0.2718933f, -0.0296138f, -0.0611626f, -0.4049422f, +0.3762034f, -0.0146253f,
  -0.3245345f, +0.2425818f, +0.2401610f, -0.1121182f, +0.5771785f, +0.0782165f, +0.0171595f, +0.0656701f,
  -0.5069098f, +0.0663984f, -0.1838851f, +0.2294470f, +0.1164289f, -0.1654585f, +0.2544667f, -0.1143389f,
  -0.0482920f, +0.0997339f, -0.0258135f, -0.0945579f, +0.1638898f, -0.0410830f, +0.3837604f, -0.2020599f,
  -0.0171056f, -0.0616294f, -0.0818389f, -0.0547098f, +0.1588988f, +0.1501726f, +0.0351694f, +0.2540918f,
  +0.1383688f, +0.1193547f, -0.0020330f, +0.0202332f, -0.2236887f, -0.0077563f, -0.0920178f, +0.1219943f,
  -0.1053650f, +0.1835173f, +0.1049558f, +0.0773585f, +0.1789967f, +0.1052173f, +0.0399446f, -0.2153080f,
  +0.3691226f, -0.1366626f, -0.0125123f, +0.2185681f, +0.0046445f, -0.2383895f, +0.0553647f, -0.2185431f,
  -0.3128538f, +0.7685469f, +0.0355670f, +0.3028646f, +0.0467875f, +0.1313070f, -0.2010182f, -0.8501441f,
  -0.1936909f, +0.0445979f, +0.1793264f, -0.1535369f, -0.2706092f, -0.2790572f, +0.1749646f, -0.1628926f,
  +0.1904091f, +0.1434421f, +0.0919205f, +0.2784649f, +0.1189757f, -0.1427623f, +0.1173919f, -0.0011063f,
  +0.0989314f, +0.0257216f, +0.0196570f, +0.1485163f, -0.1075577f, -0.0420307f, +0.2591791f, +0.3944547f,
  -0.1174501f, -0.0246824f, +0.0761440f, -0.1044252f, -0.2365665f, +0.1335494f, +0.4591533f, +0.0517507f
);

const float biases[4] = float[4](
  +0.0402572f, -0.0585469f, +0.0677061f, +0.0807450f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer31 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0356962f, -0.0904536f, +0.0620518f, +0.0400144f, +0.0014503f, +0.0430847f, +0.0124445f, +0.0736411f,
  +0.0196761f, +0.0467204f, +0.0126534f, +0.0814179f, -0.0431654f, +0.0466723f, -0.0075376f, +0.1501117f,
  +0.1312248f, -0.1263759f, -0.2628594f, -0.0079216f, +0.0409666f, +0.1579591f, -0.0635638f, +0.2677623f,
  +0.0203602f, +0.0396159f, +0.1826778f, -0.0233627f, +0.1152147f, -0.0983800f, +0.1464561f, +0.0057957f,
  +0.3006968f, +0.0653592f, -0.1241809f, +0.3930084f, -0.5532203f, +0.0754015f, +0.1613960f, -0.0785374f,
  +0.3144549f, +0.2791081f, +0.2488798f, +0.1912810f, -0.3297859f, -0.0893094f, +0.3647728f, -0.0553031f,
  +0.0999704f, -0.1276467f, +0.0083037f, -0.0006237f, +0.0278003f, -0.0337263f, +0.0959459f, -0.1496668f,
  -0.4830803f, +0.0992651f, +0.0233095f, -0.4135148f, +0.5289493f, -0.0366084f, -0.2120229f, -0.4288330f,
  +0.4821752f, +1.0030996f, -0.2244956f, -0.0614777f, +0.4292267f, +0.0162119f, -0.3122573f, -0.7219241f,
  -0.0539546f, +0.1268277f, +0.0496759f, +0.0629674f, +0.1784044f, -0.0170503f, -0.1788607f, +0.0043525f,
  +0.1925239f, +0.0369244f, -0.0620291f, +0.0620180f, +0.0858031f, +0.1334715f, +0.0592573f, +0.3486125f,
  +0.0805043f, -0.0773311f, -0.0639410f, +0.1361752f, +0.2990088f, +0.1807518f, +0.1030984f, +0.1127673f,
  +0.3191113f, +0.0833753f, -0.4801060f, +0.2703704f, -0.2149529f, +0.2143153f, +0.1811761f, +0.0403900f,
  +0.0457247f, -0.0429817f, +0.6048678f, +0.5983071f, -0.3962505f, -0.0024934f, +0.1875828f, -0.1772766f,
  -0.0876046f, -0.0335103f, +0.3787152f, +0.2042673f, +0.3894525f, -0.0086910f, +0.1191517f, +0.0692439f,
  -0.2252814f, -0.3818107f, +0.1239873f, -0.3701184f, +0.0584300f, -0.2963122f, +0.1474437f, -0.3361152f,
  -0.1874604f, +0.0948844f, +0.0500611f, -0.6706840f, +0.2733841f, -0.0579471f, -0.4984353f, -1.1892593f,
  -0.1257701f, -0.2524676f, +0.2955734f, -0.3488658f, -0.2576012f, -0.0438988f, -0.4148857f, -0.5621676f,
  -0.1511292f, -0.0585061f, +0.1894882f, +0.0670010f, +0.1422786f, -0.0799950f, -0.3036708f, +0.0220184f,
  -0.0136089f, -0.1089644f, -0.0406218f, +0.0300213f, +0.2134370f, -0.1479655f, +0.0853511f, +0.2090158f,
  +0.1241014f, +0.2119996f, +0.4734508f, +0.1816691f, +0.1514269f, -0.3497721f, -0.0609016f, -0.3431200f,
  -0.0178929f, +0.0991165f, -0.1223261f, -0.0858589f, -0.0254986f, +0.0758516f, -0.3242966f, +0.0884665f,
  +0.6961361f, -0.2140853f, -0.0032280f, +0.1281734f, -0.2672974f, +0.0253220f, +0.1915569f, -0.1367683f,
  -0.0554237f, +0.2060003f, +0.2946098f, +0.6632850f, +0.2297930f, +0.0172500f, -0.5670599f, -1.2332662f,
  +0.1219271f, +0.0068311f, -0.1428327f, -0.0188862f, -0.0694195f, +0.0986111f, -0.1709544f, +0.0087149f,
  +0.0968160f, -0.3269932f, +0.1057059f, +0.3945514f, -0.2244038f, +0.0115272f, +0.0098367f, +0.1733271f,
  -0.1678699f, +0.6781010f, -0.7082740f, +0.7356442f, -0.2369179f, -0.0804200f, -0.6856604f, -0.1569090f,
  +0.0298737f, +0.0310086f, -0.1238222f, +0.2767513f, +0.0608349f, +0.0249216f, -0.0607684f, +0.0872755f,
  +0.0033991f, -0.1865597f, -0.2751154f, -0.0213341f, +0.1466195f, -0.0150432f, -0.1553385f, +0.2538508f,
  +0.1504813f, +0.0006852f, -0.2022439f, +0.0186383f, +0.0205405f, -0.1253905f, -0.0302386f, +0.0471268f,
  -0.4796319f, +0.1702527f, -0.0491475f, -0.0922194f, -0.0048621f, +0.0749753f, +0.0867426f, +0.2848499f,
  -0.2722059f, +0.7072004f, -0.1129080f, +0.5028639f, +0.2199808f, +0.1459910f, -0.1153221f, -0.2226423f,
  +0.2874145f, +0.2998344f, -0.0080763f, +0.1027093f, +0.0843275f, -0.0918560f, -0.0802030f, +0.0130065f,
  +0.3316465f, -0.3419875f, -0.0694910f, +0.0747648f, +0.0232498f, -0.0919180f, -0.2290193f, -0.1819308f,
  +0.3387836f, +0.1151672f, +0.0454319f, -0.1877370f, -0.2411340f, -0.0316239f, -0.3821799f, +0.0796309f,
  +0.3228281f, +0.0819792f, +0.0519566f, +0.0055847f, +0.3513047f, +0.1240732f, -0.0934926f, -0.1579923f
);

const float biases[4] = float[4](
  +0.0314692f, -0.0281863f, -0.0836314f, -0.0118739f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer32 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1088142f, -0.1457753f, -0.2451821f, +0.1452042f, -0.0939975f, +0.0218325f, +0.2453570f, -0.0188886f,
  +0.4103109f, -0.1740070f, -0.0471873f, -0.1547878f, +0.6148838f, -0.6090876f, -0.0651042f, -0.0448090f,
  +0.4147788f, +0.1273419f, -0.0425173f, -0.3040619f, -0.0247934f, -0.6620220f, +0.1063636f, -0.3491788f,
  -0.0309144f, +0.0023613f, -0.2689385f, -0.0908753f, -0.2504761f, +0.1656134f, -0.7934495f, -0.0937232f,
  +0.1218612f, -0.9441770f, -0.2226242f, +0.4764890f, -0.2820951f, +0.2782781f, +0.0060853f, +0.2012943f,
  +0.3064486f, +0.2180471f, -0.1748968f, -0.0570309f, +0.0158074f, +0.0728424f, +0.0490707f, +0.4366431f,
  -0.1057673f, -0.2536609f, -0.5130379f, -0.1015795f, -0.0305074f, -0.0419962f, -0.1329346f, -0.1703522f,
  -0.0647706f, -0.3437283f, -0.0466507f, +0.1589812f, -0.1187038f, +0.1594032f, +0.0185380f, -0.1558697f,
  -0.0377770f, -0.1318559f, -0.1974096f, -0.0116335f, +0.0569017f, +0.0546722f, -0.0215130f, +0.0137057f,
  -0.2441993f, +0.0326548f, +0.3293996f, +0.0810074f, -0.4689475f, -0.1956313f, -0.1969947f, -0.1698501f,
  -0.0801557f, +0.4486956f, +0.1738566f, +0.0729594f, +0.0589151f, +0.2338836f, +0.0216537f, +0.3643813f,
  -0.2645425f, -0.0700057f, -0.1096427f, -0.0000534f, -0.1863328f, -0.0258671f, +0.1207692f, -0.1056472f,
  -0.0629350f, +0.4007602f, +0.6375206f, -0.0423888f, -0.1733261f, +0.2236574f, +0.4462757f, -0.2037116f,
  -0.3690023f, -0.1912006f, +0.0884616f, -0.4560226f, +0.2136008f, +0.0386401f, -0.1200766f, -0.4229076f,
  -0.2510819f, +0.2525375f, -0.0040532f, +0.3787142f, +0.0082214f, -0.2653643f, -0.0034539f, -0.2516776f,
  +0.0822256f, -0.5755708f, +0.2243346f, +0.0790472f, +0.0908120f, -0.0873543f, +0.4474704f, -0.3000295f,
  -0.1466670f, -0.0430045f, +0.4251389f, +0.0342858f, +0.0429239f, -0.0190121f, +0.1124497f, -0.3441903f,
  +0.0238937f, +0.2152492f, -0.2321338f, +0.2481059f, +0.1196529f, -0.0971350f, +0.1087489f, -0.2920011f,
  +0.0557937f, +0.2161915f, -0.1214358f, +0.2438905f, -0.0702906f, +0.2232504f, +0.5155224f, -0.1276064f,
  +0.2544345f, +0.1772204f, -0.0858441f, -0.1080366f, -0.0094385f, +0.3909175f, -0.0913695f, -0.3798917f,
  +0.4372626f, -0.0882389f, -0.1205886f, +0.0082655f, +0.1003444f, +0.1457954f, -0.0389039f, +0.1594838f,
  +0.1203394f, +0.2318099f, -0.0866415f, -0.1317358f, +0.1867412f, -0.0322023f, +0.2861089f, -0.2595179f,
  -0.0715661f, -0.0390857f, -0.2775013f, -0.2659495f, +0.3894529f, -0.2711000f, -0.0873107f, +0.6968541f,
  +0.1069062f, -0.3014283f, -0.1876424f, -0.1608002f, -0.1265773f, -0.1321298f, -0.0432342f, +0.1114614f,
  -0.4643270f, -0.0637385f, -0.0270655f, +0.3528485f, +0.2322029f, -0.0495386f, +0.2251360f, -0.0988230f,
  -0.0954933f, -0.0081369f, -0.1796414f, +0.4203240f, +0.0183164f, -0.0403220f, -0.0772686f, -0.0411487f,
  -0.0630685f, +0.1385975f, +0.4905564f, +0.0181425f, -0.0386757f, -0.0279284f, -0.0142403f, +0.0974097f,
  +0.0543829f, -0.1022456f, +0.0752030f, +0.0967021f, +0.1622676f, -0.0892261f, -0.0881849f, +0.0954594f,
  -0.3314900f, +0.0246235f, -0.0472878f, +0.1058787f, +0.1342395f, -0.5198913f, -0.3167207f, -0.0258133f,
  -0.1143349f, -0.1544192f, +0.1940746f, +0.0543982f, -0.0160023f, -0.2062672f, +0.0502632f, -0.2515460f,
  -0.0057320f, +0.0832973f, +0.0691211f, +0.1691274f, +0.3504939f, -0.0229770f, -0.6545360f, +0.1064881f,
  -0.0418825f, +0.5479016f, +0.2614177f, +0.4533231f, +0.0786571f, -0.3232856f, -0.0170444f, -0.0600402f,
  +0.0256424f, -0.1652294f, +0.4265338f, -0.0121298f, +0.0903009f, +0.0318054f, +0.1857977f, +0.1905653f,
  +0.1899150f, +0.2706923f, +0.0774527f, +0.0479225f, -0.1207533f, +0.1140239f, -0.1110447f, +0.1268588f,
  +0.2730060f, +0.0347695f, -0.1430165f, +0.2686790f, -0.0352589f, +0.1788256f, -0.0486331f, +0.4838892f,
  +0.0657601f, -0.1021626f, +0.1240239f, +0.2489518f, +0.0223435f, +0.0449340f, +0.0010623f, -0.1069380f
);

const float biases[4] = float[4](
  +0.1505737f, +0.0037833f, -0.0480053f, -0.0069074f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer32 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0177102f, -0.0732041f, -0.0918061f, +0.0577145f, -0.2328967f, +0.3509327f, -0.0787254f, -0.0088077f,
  -0.2248599f, +0.0749583f, -0.0246042f, -0.0669301f, -0.2802761f, +0.3276449f, -0.0115216f, +0.4378084f,
  -0.0710519f, +0.1628012f, -0.0588825f, -0.0017353f, +0.0593546f, +0.2100867f, -0.1395694f, +0.1137428f,
  -0.3851890f, -0.0804551f, -0.3465256f, +0.0130451f, +0.3197883f, +0.1397676f, +0.2386739f, -0.1291829f,
  -0.0046188f, +0.1815858f, -0.5306154f, -0.4557146f, +0.8243270f, -0.8350654f, -0.3384342f, -0.1025980f,
  -0.0853767f, -0.1156108f, -0.1610923f, +0.1028970f, -0.1886544f, -0.1704764f, -0.1001990f, -0.1319256f,
  -0.2118617f, +0.2431555f, +0.2675329f, -0.0436256f, +0.1105415f, +0.0397583f, -0.3993439f, -0.0474901f,
  -0.2879426f, +0.0577087f, +0.0800237f, +0.2432758f, +0.0145890f, -0.0197110f, -0.2080614f, -0.1860037f,
  -0.1997812f, -0.0921723f, +0.0673668f, -0.0340392f, +0.0212850f, +0.1441675f, -0.0550010f, +0.0164845f,
  -0.0723802f, +0.0715148f, +0.0512260f, +0.1717993f, -0.0948392f, -0.1242453f, +0.3824072f, -0.1880050f,
  +0.2672153f, -0.0099312f, +0.1158389f, +0.1148952f, -0.0992723f, +0.6951432f, +0.0153488f, -0.2324370f,
  +0.0234970f, +0.0932992f, -0.1114541f, +0.0405239f, +0.0004136f, +0.0689617f, -0.1032667f, +0.1991242f,
  +0.0336065f, -0.0356829f, +0.1422557f, +0.1249438f, +0.2080409f, -0.2467572f, +0.4346780f, +0.1533530f,
  -0.0743546f, +0.1119424f, -0.1050663f, -0.2151589f, -0.2164704f, -0.0994783f, +0.1470158f, -0.0796652f,
  +0.1679760f, +0.0862484f, -0.1331721f, +0.0974526f, +0.0076821f, +0.0620124f, -0.0231159f, +0.0650603f,
  -0.0170859f, -0.1468727f, +0.0458523f, +0.2706965f, +0.0765057f, -0.0579337f, +0.1128332f, -0.0294207f,
  +0.1273047f, +0.0615233f, +0.0220413f, -0.0832428f, +0.0828446f, -0.0535829f, +0.1714156f, -0.0310192f,
  -0.0150909f, +0.0374319f, -0.0598564f, -0.1434782f, -0.0250879f, -0.1079243f, +0.0072345f, -0.0446098f,
  -0.1095238f, +0.2252403f, -0.0476861f, -0.5221460f, +0.4909227f, +0.1463550f, -1.0876514f, -0.0705388f,
  -0.2150265f, -0.0540048f, -0.0118540f, -0.3168928f, +0.3114423f, -0.8984519f, +0.2764819f, +0.2720531f,
  -0.0246807f, +0.1690873f, -0.2456845f, -0.1421953f, +0.0157532f, -0.0685408f, -0.0892880f, +0.0389587f,
  +0.2298608f, +0.2210824f, -0.1643146f, -0.1808128f, -0.2513644f, +0.0594568f, -0.4497457f, +0.0540022f,
  +0.0305941f, +0.0103325f, +0.3567422f, -0.0002065f, -0.0727436f, +0.3534184f, +0.0298769f, -0.3325164f,
  -0.1740653f, -0.0741557f, -0.0284838f, -0.0334561f, -0.0173632f, +0.1535100f, -0.0432413f, -0.0772542f,
  -0.0470331f, +0.0345936f, +0.0668073f, -0.0474018f, +0.0446561f, +0.0446422f, -0.2036245f, -0.1024205f,
  -0.2189455f, -0.1125607f, +0.2572523f, +0.0333127f, +0.0018634f, -0.1502899f, +0.0612011f, -0.0111252f,
  -0.1783974f, +0.0596163f, +0.3840018f, -0.0014334f, -0.0164032f, +0.0467930f, +0.0808940f, -0.1296997f,
  -0.1015296f, -0.2264246f, +0.1574529f, +0.1949625f, +0.5339922f, +0.1766126f, +0.3389257f, -0.1082204f,
  -0.1215516f, -0.1553470f, +0.0705194f, -0.2126045f, +0.1300682f, -0.3747967f, -0.3446278f, -0.2662557f,
  -0.2920988f, -0.0182942f, +0.0326581f, +0.2005434f, -0.0134960f, +0.0333412f, -0.1210750f, -0.1013144f,
  -0.0832311f, -0.4173334f, +0.1402073f, -0.2553037f, -0.2239923f, -0.0649241f, +0.6637003f, -0.1747518f,
  -0.1077394f, +0.5486981f, +0.3687890f, +0.2636487f, +0.1073234f, +0.3152416f, -0.1220892f, +0.1531390f,
  -0.1811272f, -0.0615207f, +0.4280802f, +0.4717672f, +0.0318563f, -0.0888873f, +0.1478022f, -0.0896186f,
  +0.1334536f, -0.1313197f, +0.2729126f, +0.0811211f, +0.1119261f, -0.0785492f, +0.0473506f, -0.0829938f,
  -0.2761036f, +0.1706304f, +0.3858101f, -0.1765409f, +0.0439163f, -0.1629597f, +0.1746697f, -0.1913815f,
  -0.0654978f, +0.0344665f, +0.1633659f, +0.0133220f, -0.0680034f, +0.0204616f, +0.0964923f, -0.1667484f
);

const float biases[4] = float[4](
  -0.0666599f, +0.0806914f, +0.1280250f, -0.0563441f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer33 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1590912f, +0.1340231f, -0.0756727f, -0.1449559f, +0.2959360f, +0.1669895f, +0.0357915f, -0.1809358f,
  -0.3739355f, -0.2827355f, -0.6362817f, -0.4309532f, +0.0497828f, -0.1275311f, -0.4249955f, +0.0362293f,
  +0.1201895f, -0.1876609f, -0.0783105f, -0.1788080f, +0.2766241f, +0.0649742f, -0.1473397f, +0.4238264f,
  -0.6126666f, -0.0529341f, +0.1008588f, -0.0574287f, +0.2333275f, -0.3704073f, +0.2354336f, +0.1175501f,
  -0.8319217f, -1.1207769f, +0.4480892f, +0.2995249f, -0.5400468f, +0.0635654f, +0.1684403f, +0.0689889f,
  +0.0386948f, -0.5284072f, +0.3200327f, +0.2003787f, +0.0665988f, +0.1935095f, -0.3270879f, +0.1757306f,
  +0.1522403f, -0.1994566f, +0.0886143f, +0.1428609f, -0.0193364f, -0.0688408f, -0.2201382f, -0.1318710f,
  +0.2144547f, -0.1889282f, +0.0739470f, +0.0236522f, -0.3600814f, -0.1021212f, -0.2922786f, +0.2702386f,
  +0.0216986f, +0.2079276f, -0.0589238f, -0.0508911f, +0.1044308f, +0.0556883f, -0.0384012f, +0.0375942f,
  -0.2705048f, -0.1238164f, +0.3922516f, -0.1290360f, +0.1076233f, +0.0861603f, +0.0184449f, -0.1270872f,
  +0.0263067f, -0.3648091f, +0.2383796f, -0.1787150f, -0.0067097f, +0.1801123f, +0.0070232f, -0.2333736f,
  +0.1484581f, -0.3324976f, +0.1224824f, -0.1647340f, -0.4118987f, +0.0302611f, -0.0330458f, -0.2611283f,
  +0.1017786f, +0.2110458f, +0.2004174f, +0.0476885f, -0.2060981f, +0.1058695f, +0.1093934f, +0.2435880f,
  +0.3043641f, -0.1525234f, +0.5535749f, +0.0646302f, -0.7577631f, +0.4211080f, -0.1214382f, +0.4010009f,
  +0.1174989f, -0.2092196f, -0.0990121f, +0.1298020f, +0.0498814f, +0.2045718f, -0.1003151f, -0.0713403f,
  +0.0700749f, -0.1763112f, -0.3250734f, +0.0081097f, +0.1611457f, -0.2110915f, -0.0488624f, -0.0336312f,
  +0.2973512f, +0.3635119f, -0.3117853f, -0.2318331f, +0.0680258f, -0.0401171f, -0.0067872f, -0.4349457f,
  +0.2078185f, -0.0567401f, -0.1665325f, +0.0253594f, +0.0498793f, -0.2480439f, -0.1201041f, -0.0688186f,
  -0.2832965f, -0.0239109f, +0.1108409f, -0.0948755f, +0.1235954f, +0.0649714f, -0.0534582f, +0.1738638f,
  +0.1153136f, +0.0604788f, -0.2713757f, +0.0528412f, +0.1766220f, -0.2178752f, +0.0784212f, -0.0266411f,
  +0.2272847f, +0.1731108f, +0.4746383f, +0.0618222f, +0.1135104f, +0.0327358f, +0.1092801f, -0.0108029f,
  -0.1165138f, -0.2732591f, -0.2396788f, -0.1013717f, +0.2142556f, +0.2295943f, +0.2148890f, +0.0929708f,
  -0.4506992f, -0.1708923f, -0.0138000f, -0.2396551f, -0.1062618f, -0.1609834f, -0.4292121f, +0.4145478f,
  -0.1540258f, -0.3256262f, +0.0740890f, -0.4416459f, +0.4163987f, -0.1028883f, -0.3951062f, +0.1199297f,
  -0.2507932f, +0.0445267f, +0.0332039f, -0.0617831f, +0.2705744f, +0.0557986f, +0.1327492f, +0.0370832f,
  +0.1737316f, -0.2760337f, +0.0149110f, +0.3250470f, +0.3727759f, +0.1065759f, +0.0893106f, -0.5619255f,
  -0.1553114f, -0.5506243f, +0.2626367f, +0.2218177f, -0.0745422f, -0.1641689f, -0.3181702f, -0.1543929f,
  +0.4806903f, -0.2497212f, +0.2486950f, +0.0715704f, -0.1259484f, -0.0611677f, -0.0808920f, -0.0840896f,
  +0.0239270f, -0.1687023f, +0.3497978f, +0.0759298f, +0.0385455f, +0.2289737f, +0.1481533f, +0.0357770f,
  +0.1596811f, -0.0578062f, +0.1990000f, -0.0391317f, -0.0208211f, +0.0663052f, -0.1306590f, +0.0730744f,
  +0.3732901f, -0.1785050f, +0.1566081f, +0.2161174f, +0.0573372f, -0.0292648f, +0.0492054f, -0.1351108f,
  -0.0588324f, -0.2141707f, +0.0548761f, -0.3977654f, +0.2820885f, -0.0849302f, +0.2351582f, -0.1229110f,
  +0.0086646f, +0.1409312f, -0.3260869f, +0.0526046f, -0.0279579f, -0.1473775f, -0.1928873f, -0.0750000f,
  +0.3187347f, -0.4021482f, +0.2028295f, +0.0774759f, -0.1199107f, -0.1911860f, -0.0223630f, -0.0641253f,
  -0.5264134f, -0.0226590f, -0.1009055f, -0.2321280f, -0.1188385f, +0.2643022f, -0.1973465f, +0.3786387f,
  -0.0311766f, +0.1107688f, +0.0121921f, +0.4183391f, +0.2753980f, +0.2982027f, -0.3659714f, -0.1173002f
);

const float biases[4] = float[4](
  -0.0645019f, +0.0665315f, -0.1381262f, +0.0725425f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer33 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2390302f, -0.1341848f, +0.3576936f, +0.1300913f, -0.3061302f, -0.1005654f, -0.1658458f, +0.2163188f,
  +0.1992264f, -0.2167075f, +0.1249239f, -0.0024115f, +0.3029975f, +0.3496923f, -0.0719727f, -0.0546948f,
  -0.2570350f, +0.2344283f, +0.3480067f, -0.1647335f, -0.3706186f, -0.1726867f, +0.1287810f, -0.2069436f,
  +0.2844854f, -0.0258238f, +0.2016120f, -0.0725479f, +0.1763956f, +0.0928551f, -0.0131705f, +0.1815926f,
  +0.2562858f, -0.4599416f, +0.4132404f, +0.3829547f, +0.2024281f, +0.4311933f, -0.1285670f, -0.4711864f,
  +0.1700120f, +0.0121735f, +0.2051456f, -0.0772913f, -0.0285339f, -0.1752515f, +0.1920590f, -0.1187417f,
  -0.0196108f, -0.1923318f, -0.0497353f, -0.0033621f, -0.0675559f, -0.1709749f, +0.1245176f, +0.0144073f,
  +0.2126497f, -0.3247807f, -0.1406175f, +0.0839354f, +0.1315250f, -0.1651252f, -0.0305464f, +0.0926308f,
  +0.0425990f, -0.0694948f, +0.0196002f, -0.1428459f, -0.0959282f, +0.0811827f, +0.1646326f, -0.2590415f,
  +0.1831295f, +0.0188377f, +0.2437810f, -0.0871438f, +0.0359538f, -0.0414681f, +0.0968982f, -0.3011152f,
  -0.1157721f, -0.0211569f, -0.0976522f, +0.0776860f, -0.2381896f, -0.0622942f, +0.2238697f, -0.0490738f,
  +0.0857676f, +0.0201560f, -0.2547092f, +0.0055291f, +0.0246018f, +0.0667833f, -0.1798583f, +0.0917363f,
  -0.3062705f, +0.3840773f, +0.2054199f, +0.1240121f, +0.0664657f, -0.3131386f, -0.6144530f, +0.1278698f,
  +0.2589788f, +0.1353878f, -0.1525069f, -0.8213072f, -0.0395852f, -0.6974441f, -0.2033551f, -0.0724639f,
  -0.0613054f, -0.0859466f, -0.1912132f, +0.0124404f, +0.2492369f, +0.0072119f, -0.2130322f, +0.2085732f,
  +0.1006373f, -0.0605287f, +0.0714708f, +0.2735716f, +0.1592229f, -0.2515208f, -0.0738830f, -0.0309689f,
  -0.5259414f, -0.0258049f, +0.0004215f, -0.2868263f, -0.1311158f, +0.1173526f, +0.1061302f, -0.0298575f,
  -0.0496829f, -0.0745192f, +0.0573390f, +0.0999530f, +0.0300773f, -0.0350089f, -0.2175227f, -0.0335445f,
  -0.2593390f, +0.2653610f, +0.1528354f, -0.2043034f, +0.0923999f, +0.1175733f, -0.1024638f, +0.1139331f,
  -0.5715739f, +0.3388647f, +0.0046955f, +0.2353624f, +0.1257443f, -0.1035879f, -0.1975044f, -0.1365361f,
  -0.0367731f, -0.1176469f, -0.3057239f, -0.1688588f, +0.2128682f, -0.0120537f, -0.1934877f, +0.1705196f,
  +0.1279856f, +0.1314856f, -0.0097531f, +0.0449827f, -0.0016700f, -0.0615202f, -0.1937938f, +0.2050313f,
  +0.2566610f, +0.4610623f, -0.8907960f, +0.4681137f, +0.3005527f, +0.1176766f, +0.3485534f, -0.2419646f,
  -0.2986921f, +0.3625382f, -0.4040407f, +0.3701975f, -0.4131406f, -0.0995025f, +0.1791944f, +0.0074629f,
  +0.3291386f, -0.0393545f, +0.1880130f, +0.0533231f, -0.0924029f, -0.0908322f, -0.2085956f, -0.1581440f,
  +0.4454015f, -0.0835059f, -0.0358024f, -0.1385580f, -0.1869601f, -0.0082111f, -0.3616297f, -0.1805610f,
  +0.3144001f, -0.2172914f, +0.1325242f, +0.0563342f, -0.1018642f, +0.1557228f, -0.1399398f, +0.1828340f,
  +0.0454318f, -0.1221559f, -0.0689455f, +0.0908447f, -0.0143050f, +0.2523083f, +0.1839999f, +0.1353797f,
  +0.2365824f, +0.1873914f, +0.3900326f, -0.2616459f, +0.4379959f, -0.2053327f, -0.3123609f, +0.3251452f,
  +0.1169684f, -0.0911594f, +0.0254490f, -0.1295418f, +0.3619692f, -0.1992696f, -0.1775585f, +0.0708693f,
  -0.2064383f, +0.1522564f, -0.0563919f, +0.0290818f, +0.2960996f, +0.1354976f, +0.0953429f, -0.2010049f,
  -0.4977150f, -0.2726944f, -0.3893467f, +0.2226018f, +0.0070165f, -0.0701808f, -0.5108458f, -0.1040241f,
  +0.3555691f, -0.2840790f, +0.1534084f, -0.3879547f, +0.3509977f, -0.0509649f, -0.0203420f, +0.5752587f,
  -0.4944400f, -0.5782273f, -0.2646214f, -0.0948593f, +0.0313772f, +0.0437298f, +0.1204275f, +0.2112945f,
  +0.0651693f, +0.2148552f, -0.2179897f, +0.0865638f, +0.2090632f, -0.0346845f, -0.5322080f, -0.4236749f,
  +0.1841469f, -0.2268690f, +0.1757244f, -0.1212234f, +0.2462398f, +0.0032385f, -0.3585151f, +0.0188834f
);

const float biases[4] = float[4](
  +0.0088766f, -0.1921217f, +0.0099689f, -0.1166831f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer34 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0960981f, +0.0021880f, -0.2314072f, +0.1442350f, +0.0636010f, -0.0193147f, -0.1085082f, -0.2672645f,
  +0.0929232f, +0.0962988f, +0.4527900f, +0.2774588f, +0.0335787f, +0.4540724f, +0.0550834f, -0.1949272f,
  +0.1695857f, +0.2734523f, -0.0450299f, +0.0724882f, +0.1463344f, +0.0476239f, +0.1422989f, +0.0281383f,
  -0.1430510f, +0.2102098f, -0.2622088f, +0.0012856f, +0.2268386f, +0.0070630f, -0.0658511f, -0.2733954f,
  +0.0245772f, -0.2985407f, -0.2471592f, -0.2100897f, -0.1595515f, -0.5643929f, -0.3340003f, -0.3833916f,
  -0.2889643f, +0.0643094f, -0.1165797f, -0.4722628f, +0.0764099f, +0.3991655f, +0.4121877f, +0.3591880f,
  +0.0467219f, +0.0522424f, +0.2127226f, +0.0181808f, +0.0897857f, +0.0384839f, +0.0357506f, -0.3153318f,
  +0.0260399f, +0.0615260f, -0.0137358f, -0.0523662f, +0.0418790f, -0.0473332f, +0.2563176f, -0.1773928f,
  -0.1398612f, +0.3115735f, -0.0495502f, -0.2718796f, +0.1374951f, +0.0385568f, +0.1898509f, +0.4477725f,
  -0.0039794f, +0.0669082f, +0.2855001f, -0.2485837f, +0.2205201f, +0.0434042f, +0.4404796f, +0.1297891f,
  -0.0442299f, -0.0719185f, +0.9061847f, -0.0022891f, +0.1655959f, +0.0804655f, +0.5230547f, -0.1809321f,
  +0.1936324f, +0.1115241f, -0.0587261f, +0.0920358f, +0.2457367f, -0.0290751f, +0.2507692f, +0.1528920f,
  -0.1130448f, +0.3085272f, +0.1788067f, -0.1580848f, +0.0106506f, -0.0029114f, +0.1662870f, -0.0517942f,
  +0.3705887f, -0.1043876f, +0.1022495f, +0.2369966f, +0.3608876f, +0.4733820f, -0.1647089f, +0.2271436f,
  -0.1314006f, +0.1307922f, +0.0811629f, +0.0869439f, +0.0801616f, -0.3441052f, +0.2043198f, +0.0057217f,
  +0.0350662f, +0.1368514f, +0.2189823f, -0.3218805f, -0.2350291f, -0.0993005f, +0.0131142f, +0.0059482f,
  +0.9126495f, +0.3418240f, -0.1363029f, -0.0210070f, +0.2685995f, +0.0998262f, -0.2125603f, -0.0616197f,
  -0.1714545f, -0.1279734f, +0.0473275f, -0.1834080f, -0.2499991f, +0.2338101f, +0.0525495f, -0.0367077f,
  +0.1651034f, -0.0316523f, -0.0571051f, +0.3072722f, -0.0480209f, +0.0142387f, -0.0839987f, +0.1118630f,
  +0.0334722f, -0.2810512f, +0.0346456f, +0.2416035f, -0.0020936f, +0.0055732f, -0.1415439f, +0.3875944f,
  +0.2497543f, +0.2140789f, +0.3935116f, +0.0717653f, +0.1695262f, -0.3335454f, +0.0342717f, -0.0196492f,
  -0.0735656f, -0.0952802f, +0.0535262f, +0.1388919f, +0.0228114f, +0.1392286f, +0.5028530f, +0.4047612f,
  -0.0859928f, +0.0442614f, -0.1170759f, -0.1628472f, -0.1239498f, -0.2219120f, +0.5447757f, +0.1703836f,
  -0.0009279f, +0.0369544f, +0.2792079f, +0.0151968f, -0.0524517f, -0.2834924f, +0.1682246f, +0.4833457f,
  +0.1820052f, -0.1600387f, +0.0677632f, +0.4292633f, -0.0893948f, +0.2336066f, -0.1239277f, +0.2025014f,
  +0.2679138f, -0.1501845f, +0.0675509f, -0.0871864f, +0.3000110f, -0.1474423f, -0.0647939f, -0.1781377f,
  +0.2067259f, -0.0810789f, +0.2320586f, +0.0664005f, -0.1150642f, -0.1607648f, +0.0397599f, +0.0144914f,
  +0.0256748f, -0.1242055f, +0.2063767f, -0.0458646f, -0.1140347f, -0.0621194f, +0.0291426f, -0.0896354f,
  +0.1042698f, +0.1421964f, -0.0330845f, -0.2964077f, +0.0146079f, -0.0679946f, -0.0939862f, -0.0909206f,
  +0.0331771f, -0.2986124f, +0.3797540f, -0.0097089f, -0.2129922f, -0.2810167f, -0.1264115f, +0.1234138f,
  +0.0474631f, -0.0880989f, +0.0682482f, -0.1084203f, -0.0528364f, -0.0963731f, +0.2372818f, +0.3882385f,
  -0.7175808f, +0.3651815f, -0.2189317f, +0.0037585f, +0.2020502f, +0.3900631f, +0.3345285f, -0.1300396f,
  -0.1579898f, -0.2874773f, -0.1041807f, +0.0806460f, -0.4260154f, -0.2212726f, -0.1180269f, -0.0917030f,
  -0.0167501f, -0.0549915f, -0.1710260f, +0.1778549f, +0.0055511f, -0.0162260f, -0.0714621f, -0.0432126f,
  -0.1252564f, -0.0409708f, +0.1489961f, +0.1872512f, -0.1890487f, -0.2606671f, -0.0082928f, +0.3131759f,
  -0.3980139f, -0.0563967f, +0.0543562f, +0.1396326f, -0.1546386f, -0.3070616f, -0.0694390f, -0.0149976f
);

const float biases[4] = float[4](
  +0.0077761f, +0.0416211f, -0.1272751f, -0.0092431f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer34 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0413215f, +0.0346539f, -0.0946859f, -0.1967427f, -0.1130732f, -0.0880344f, -0.2636923f, -0.0557270f,
  -0.0129895f, +0.0469865f, +0.0020116f, +0.2438551f, -0.0738367f, -0.1116570f, +0.0242127f, +0.0007471f,
  -0.1039758f, -0.2199894f, -0.1817378f, -0.0097855f, -0.1909524f, -0.1254721f, +0.0212642f, -0.0626149f,
  -0.0815504f, -0.1434487f, +0.0199694f, -0.0626790f, +0.0633857f, +0.0209655f, -0.1584259f, +0.2054349f,
  +0.4089135f, +0.3883777f, +0.0719180f, -0.1517185f, +0.0233421f, -0.0478387f, +0.0083190f, -0.3094537f,
  -0.1498530f, +0.0434839f, -0.0951817f, +0.0533767f, +0.0991625f, +0.1571987f, +0.0606315f, -0.0163815f,
  -0.0240438f, +0.1158873f, +0.0672745f, +0.1262904f, +0.3217376f, +0.2693340f, -0.2373323f, -0.1650183f,
  +0.2697738f, -0.0511019f, -0.3428644f, +0.1472758f, -0.0325064f, +0.3377562f, -0.0185319f, +0.1454814f,
  +0.0815850f, -0.2390907f, -0.1932904f, -0.2462411f, -0.0750972f, +0.1507878f, -0.1565918f, -0.2479941f,
  +0.0356826f, +0.0999695f, +0.0324215f, +0.0473198f, +0.1230765f, +0.2695385f, +0.0739343f, +0.2074003f,
  -0.1489967f, -0.1289656f, +0.0532917f, -0.0753921f, +0.0951002f, +0.3466088f, -0.0001263f, +0.1404070f,
  -0.0093213f, +0.3024229f, +0.0817338f, +0.0200604f, +0.2840527f, +0.2984202f, +0.0845831f, +0.0685374f,
  -0.2289554f, -0.0103333f, +0.4928361f, +0.1317702f, +0.1622812f, +0.2010656f, +0.4657005f, -0.1324249f,
  -0.0157838f, -0.2592968f, +0.2208422f, +0.1810271f, +0.0426107f, -0.1707863f, -0.0015789f, +0.2251850f,
  +0.3055635f, +0.1382326f, +0.4007279f, +0.1307164f, +0.1801638f, -0.1769853f, -0.0533880f, -0.1587971f,
  +0.0900717f, +0.0195174f, -0.3119670f, -0.1029235f, -0.0515987f, +0.0908259f, -0.1801799f, +0.1686143f,
  -0.0282759f, -0.1932765f, -0.2045579f, -0.3035458f, -0.1656581f, -0.0235051f, +0.0424391f, +0.1556498f,
  +0.1187695f, +0.0512672f, +0.0042443f, +0.0125813f, +0.0587815f, +0.2353929f, -0.0079598f, -0.2440677f,
  +0.1695019f, -0.0816174f, -0.1177960f, +0.0973198f, -0.0791668f, -0.0274104f, +0.0480860f, -0.1467166f,
  +0.4051815f, -0.0182103f, -0.3224795f, +0.2994933f, -0.2746876f, -0.4940785f, +0.2688236f, -0.1382212f,
  +0.1318560f, -0.1590667f, -0.3261744f, -0.1227131f, -0.2163153f, +0.0189313f, -0.0020493f, -0.2983858f,
  -0.3621399f, -0.0531292f, +0.0581772f, -0.4611077f, -0.0781038f, +0.1051029f, -0.1210875f, -0.2639995f,
  +0.2740769f, +0.6245407f, +0.0172045f, -0.3827808f, -0.2170796f, -0.0427590f, +0.2769701f, -0.1055782f,
  -0.4750553f, -0.0513668f, -0.3545192f, -0.3087849f, +0.1450733f, +0.2278827f, +0.0665551f, -0.3759726f,
  -0.1663467f, +0.0920990f, +0.0604752f, +0.0924842f, +0.0101606f, +0.1176727f, -0.3108605f, -0.0711599f,
  +0.0978787f, +0.0272875f, -0.0879545f, +0.0305814f, -0.2868729f, -0.2404274f, -0.3686481f, -0.0723933f,
  +0.1269810f, +0.0107100f, -0.0911164f, -0.0562315f, -0.0127055f, -0.1598255f, -0.0843173f, -0.3968879f,
  -0.2435931f, +0.0294651f, -0.1189512f, -0.3819850f, +0.2249346f, -0.1360131f, -0.2044324f, -0.0586868f,
  +0.2369774f, +0.2680097f, +0.2502312f, -0.5635790f, +0.1728833f, -0.2304942f, +0.1949144f, +0.0227891f,
  +0.2528071f, -0.1270270f, +0.0425521f, -0.0770266f, -0.0478784f, -0.2325923f, +0.1576715f, +0.3233193f,
  -0.2902006f, +0.3512199f, -0.2712826f, -0.2326156f, +0.1011634f, +0.0249665f, -0.3635491f, -0.4720531f,
  -0.4807310f, -0.2939541f, -0.0010990f, -0.1215636f, +0.2860918f, +0.1024642f, -0.0161005f, -0.0403385f,
  +0.0935471f, -0.3341544f, -0.1907641f, +0.0743502f, -0.5028422f, -0.5442827f, -0.1054846f, +0.2632621f,
  -0.5127074f, +0.2647508f, +0.0392866f, -0.3513419f, +0.2229073f, +0.0761142f, +0.1912631f, -0.0997424f,
  -0.4413434f, +0.1082909f, -0.2661687f, -0.1846936f, +0.0896775f, +0.0619953f, +0.1186200f, -0.5098751f,
  -0.2211713f, -0.1089206f, -0.3322194f, +0.0008926f, -0.1520573f, +0.1123703f, -0.1407007f, -0.2418030f
);

const float biases[4] = float[4](
  -0.0359847f, +0.0445931f, +0.1698142f, +0.0627009f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer35 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2731466f, +0.1298828f, +0.1607254f, -0.2800598f, +0.1848721f, +0.2327754f, -0.0880255f, +0.1195269f,
  -0.1888472f, +0.2495916f, -0.4696891f, -0.1104892f, +0.1117045f, -0.0346346f, -0.2064705f, +0.1344699f,
  +0.0510680f, +0.0931042f, -0.2932225f, +0.0508173f, +0.0405294f, -0.1057811f, -0.0160030f, +0.2150721f,
  +0.3255212f, +0.1081148f, +0.3951450f, +0.1679061f, +0.0615176f, -0.2013782f, +0.1570465f, -0.2173590f,
  +0.2569088f, +0.0343509f, +0.4289220f, +0.5024918f, -0.0679114f, +0.0712934f, -0.1502276f, -0.1685508f,
  +0.2800695f, +0.0379990f, +0.0223096f, +0.2003619f, +0.1354143f, +0.2108158f, -0.0715662f, +0.0291768f,
  -0.0037096f, -0.0171274f, -0.2268094f, +0.0728353f, -0.0926434f, -0.1628044f, +0.0467896f, +0.0804736f,
  +0.3565837f, -0.0698563f, -0.3367838f, -0.0100830f, -0.0077489f, -0.0896173f, +0.0644498f, +0.1935623f,
  +0.1603297f, +0.1183955f, -0.2693740f, -0.1304486f, +0.1271700f, +0.1768000f, -0.1002080f, +0.0503749f,
  +0.3760969f, -0.2806051f, -0.1135992f, +0.1024853f, +0.1356790f, +0.0092170f, -0.1321871f, -0.1424210f,
  +0.1123914f, -0.2357798f, +0.3812361f, +0.1031633f, +0.1069916f, -0.0837072f, +0.0545779f, -0.1836621f,
  +0.3364615f, -0.1476782f, -0.0145823f, -0.1377551f, -0.1338989f, +0.1635607f, -0.1780209f, -0.2370577f,
  +0.0247257f, -0.3110201f, -0.0869392f, +0.0003436f, -0.3898915f, -0.0110415f, -0.0094018f, -0.3255206f,
  -0.1247510f, -0.0725057f, -0.3377936f, -0.2277294f, -0.1793393f, -0.3516937f, +0.2928010f, -0.0227841f,
  +0.3294701f, -0.1372754f, +0.2725842f, -0.0990427f, -0.2256591f, +0.2418299f, -0.1417786f, +0.2720923f,
  +0.2942115f, +0.0122143f, +0.1854656f, +0.0155430f, -0.0451882f, +0.0329685f, -0.2398320f, -0.0576364f,
  +0.6851763f, -0.1798779f, +0.5014373f, +0.0353325f, -0.1755038f, +0.5096051f, -0.5580223f, -0.3385277f,
  +0.1975192f, -0.0193930f, -0.0144668f, -0.1181559f, -0.1903930f, -0.1560120f, +0.0726386f, -0.2599183f,
  +0.0613761f, +0.2208703f, +0.3044493f, +0.0509221f, -0.6651002f, -0.0850068f, -0.1029948f, -0.2425611f,
  +0.3286858f, +0.2294248f, -0.0114806f, +0.0096553f, +0.6868055f, +0.0995911f, +0.5037022f, -0.2277194f,
  +0.1477593f, -0.2017616f, +0.0685913f, -0.2074587f, -0.0663891f, -0.2858879f, +0.0339037f, +0.0618423f,
  +0.2973821f, +0.2195114f, -0.0134852f, +0.3142683f, -0.1953941f, +0.0611929f, +0.0736916f, -0.1941870f,
  -0.1252164f, -0.0219353f, -0.5235462f, -0.1912883f, +0.4690200f, -0.1734132f, +0.2015792f, +0.0234299f,
  +0.1209165f, -0.1507560f, +0.3500914f, +0.1482757f, +0.3914919f, -0.0988071f, -0.6590540f, +0.0635799f,
  +0.4498470f, +0.2701643f, -0.3082197f, +0.4070923f, +0.3473375f, -0.1765280f, +0.1222081f, -0.2259853f,
  -0.3191907f, -0.3144909f, -0.1141569f, -0.1193457f, +0.2796026f, -0.2862341f, +0.1139415f, -0.0063585f,
  -0.0419677f, -0.2398795f, +0.1524480f, +0.1051755f, +0.3540773f, -0.0460138f, -0.1174849f, -0.1943267f,
  -0.3585182f, -0.0934333f, -0.1701675f, -0.0977485f, -0.0585172f, +0.2373010f, +0.0933622f, +0.0699219f,
  -0.0792887f, +0.1520943f, +0.2850701f, -0.0281229f, -0.0754139f, +0.1231304f, -0.0117786f, +0.3445551f,
  +0.0577653f, -0.3221628f, +0.1621348f, +0.0753496f, +0.0473954f, -0.1034373f, -0.2571555f, -0.1667293f,
  -0.1776415f, -0.2038809f, +0.0202136f, -0.1340483f, -0.0124376f, +0.1102037f, +0.2284964f, -0.2085613f,
  -0.3685312f, +0.0828880f, -0.0485380f, -0.1467360f, +0.2268950f, +0.3702730f, -0.2577327f, +0.2071789f,
  -0.3813367f, +0.0867764f, +0.2408909f, +0.1791393f, +0.0543221f, -0.0352435f, -0.2522777f, -0.2326220f,
  -0.5792924f, -0.1163937f, -0.0756602f, +0.0997971f, +0.1657450f, -0.2017564f, -0.0458494f, -0.2395178f,
  +0.2531776f, -0.6043687f, +0.3935929f, -0.0849173f, -0.2931876f, -0.3417718f, -0.5956842f, -0.4246089f,
  -0.1229267f, -0.2819090f, +0.0818920f, -0.0922276f, +0.0126577f, +0.0338552f, -0.0172011f, -0.0322479f
);

const float biases[4] = float[4](
  -0.0099390f, +0.0823177f, -0.1160134f, +0.0748589f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer35 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3253131f, -0.1745880f, +0.0869197f, +0.1336379f, -0.0002955f, +0.1735298f, +0.2395045f, -0.1954988f,
  -0.0623274f, -0.0441773f, +0.1931167f, +0.0723345f, +0.1338350f, +0.1048976f, +0.1743731f, -0.0345599f,
  +0.1052006f, +0.0163419f, +0.1108717f, -0.0530401f, +0.0193953f, -0.0891335f, +0.1006505f, +0.0681075f,
  +0.0471644f, +0.1330762f, +0.1626703f, +0.5338027f, -0.0018896f, -0.3420296f, +0.2250851f, +0.3157364f,
  +0.0962615f, +0.3533093f, -0.4114152f, +0.3150042f, +0.4352897f, -0.2253261f, +0.1867419f, +0.0249376f,
  -0.0998948f, +0.1407129f, -0.0006681f, +0.1342658f, +0.1238732f, -0.0467102f, -0.1128943f, -0.2374691f,
  +0.5113304f, +0.1456887f, -0.0754460f, +0.0188431f, -0.0699905f, -0.4535037f, -0.0475905f, +0.0807193f,
  +0.2428108f, -0.1059378f, -0.4224778f, +0.0077102f, +0.3008072f, -0.2119382f, +0.0013186f, -0.2935709f,
  +0.0459239f, -0.1146689f, +0.1603430f, -0.1126090f, -0.0864160f, +0.0090982f, -0.0061757f, +0.0316687f,
  -0.2943828f, +0.0118977f, +0.0709708f, -0.3325866f, -0.0212944f, +0.3374173f, -0.0441645f, +0.0692772f,
  -0.0417940f, +0.2704609f, +0.0263461f, -0.2005830f, +0.5065310f, -0.2938983f, +0.0015827f, +0.1733467f,
  +0.0921299f, +0.3088053f, +0.3100573f, +0.0866705f, +0.1335020f, -0.2537206f, +0.1804974f, -0.1994806f,
  +0.0591126f, -0.0363978f, -0.1780633f, +0.1783589f, -0.0904786f, -0.0945189f, +0.1131090f, +0.0443063f,
  +0.1690336f, -0.9851115f, -0.4715801f, +0.1685361f, -0.5404454f, +0.3490141f, +0.0536935f, +0.7148082f,
  +0.1726737f, -0.6664663f, +0.2722236f, -0.6086429f, -0.1525512f, +0.1859623f, -0.3433698f, +0.4179679f,
  -0.2394529f, +0.0251612f, -0.3110610f, +0.1129124f, +0.1309523f, -0.0460718f, -0.1233249f, -0.0519914f,
  -0.6298517f, -0.3212898f, +0.2136274f, -0.0201088f, +0.1508611f, -0.0299661f, -0.3774453f, -0.4722658f,
  -0.2909177f, -0.0139151f, +0.1440650f, +0.1802282f, +0.3426071f, -0.0118839f, -0.0568242f, +0.1478585f,
  +0.1071696f, +0.0210508f, +0.0822785f, -0.1071032f, +0.1316737f, +0.1025628f, +0.0015231f, +0.0372772f,
  -0.1272378f, -0.1004643f, +0.3796349f, +0.0582528f, +0.2738287f, +0.2294649f, -0.1359280f, +0.0460061f,
  +0.0340390f, +0.0690609f, +0.0451239f, -0.1728374f, -0.0467974f, +0.1086221f, -0.1345184f, -0.0130383f,
  -0.1359961f, +0.2910295f, -0.2082165f, +0.1240653f, +0.0474513f, +0.2501872f, +0.0818597f, +0.1281208f,
  -0.2454936f, +0.2359238f, +0.0770314f, -0.0868621f, +0.3269316f, +0.3395796f, +0.1837843f, +0.4750987f,
  +0.0396434f, +0.4203403f, +0.5417673f, -0.0479461f, +0.2977555f, +0.1774567f, +0.1200128f, +0.2985932f,
  -0.3377810f, +0.1438982f, +0.0087097f, +0.3026395f, -0.0701575f, -0.2970977f, +0.0270491f, +0.0260648f,
  +0.3942424f, -0.1551213f, +0.3153024f, -0.0641202f, +0.1874903f, -0.1780049f, -0.1569285f, -0.0338457f,
  +0.1470484f, +0.1224384f, -0.1480852f, -0.0096088f, -0.0246755f, +0.1490337f, +0.0001759f, -0.3715609f,
  -0.2587298f, +0.1030536f, +0.2465034f, -0.1124246f, +0.3233611f, +0.2439427f, -0.1759709f, +0.1870056f,
  -0.0308814f, +0.0426551f, +0.3358229f, +0.0009875f, -0.2672581f, -0.4844820f, -0.2553949f, -0.1544410f,
  -0.0809225f, -0.2484363f, -0.1264258f, +0.0171821f, -0.2045980f, -0.1714103f, -0.1845198f, +0.0157497f,
  -0.0273624f, +0.2592586f, -0.3664050f, +0.3868724f, +1.0189757f, -0.0530902f, +0.0837731f, -0.3033863f,
  +0.5317649f, -0.2445122f, -0.4270388f, -0.2561440f, -0.1905799f, +0.5043926f, -0.8492199f, +0.1324492f,
  -0.2263910f, +0.2200640f, +0.0899713f, +0.3921795f, +0.1914594f, -0.0802986f, -0.2899752f, -0.1538893f,
  -0.7277883f, -0.7101040f, +0.1695822f, -0.1143608f, -0.3060631f, +0.0553640f, +0.0263847f, -0.2678345f,
  -1.0614535f, -0.4943894f, -1.2371216f, -0.1290884f, +0.4320587f, -0.3495259f, -0.4476845f, -0.2298758f,
  -0.2034989f, -0.1307798f, -0.0752168f, -0.1697254f, -0.1889966f, -0.2740489f, -0.0562253f, -0.2508094f
);

const float biases[4] = float[4](
  -0.0889581f, +0.0117235f, +0.1371188f, -0.0292755f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer36 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1765147f, +0.1019208f, -0.1681186f, -0.1049084f, -0.0039678f, +0.1453170f, +0.1080754f, -0.0722978f,
  -0.5203438f, -0.2547284f, +0.2532340f, -0.0446718f, -0.2469179f, +0.1423737f, -0.2783701f, +0.0071775f,
  -0.1524023f, +0.0546662f, +0.1260384f, -0.2803732f, -0.1111137f, +0.1371079f, -0.0324826f, -0.2729794f,
  -0.1933668f, -0.1430130f, -0.4089053f, +0.0542571f, +0.3978333f, +0.3421118f, +0.1633295f, -0.0607272f,
  -0.0968874f, +0.3224253f, +0.8985808f, +0.0015455f, -0.3131929f, +0.6496260f, +0.1046524f, -0.0345403f,
  -0.2300762f, -0.0842452f, -0.0593129f, +0.2868786f, +0.3816946f, +0.0816194f, +0.1460465f, -0.5974186f,
  -0.1707440f, -0.1740932f, +0.2778468f, -0.0028108f, -0.0310717f, -0.1166884f, -0.1448225f, -0.0679590f,
  +0.1959371f, -0.0072933f, +0.0993129f, -0.0012058f, -0.2849855f, +0.1993098f, +0.1029573f, -0.4251735f,
  +0.0138592f, -0.2404444f, +0.1759875f, -0.0127411f, -0.2269479f, +0.1477924f, +0.0675677f, +0.1206355f,
  -0.1616636f, +0.0827675f, +0.1972419f, +0.4207592f, +0.0352507f, +0.1726381f, -0.2355441f, +0.0252118f,
  +0.0009311f, -0.3531443f, +0.2247514f, -0.0206030f, +0.1013821f, +0.0833835f, +0.2597258f, -0.1245608f,
  -0.0412509f, -0.2095243f, +0.0294644f, -0.1835144f, +0.3721986f, +0.1106661f, -0.1415791f, +0.1029143f,
  -0.1465346f, -0.2002941f, -0.0474592f, +0.1775781f, +0.0082654f, -0.4538877f, -0.0840301f, -0.0388993f,
  -0.0937834f, +0.0152190f, +0.1235413f, +0.0478716f, -0.3940668f, -0.2960327f, -0.0225042f, +0.6853499f,
  -0.2190391f, +0.0889212f, +0.0788452f, -0.0417552f, +0.3573075f, -0.0730110f, -0.4370424f, -1.6613847f,
  +0.0752151f, -0.1493389f, +0.3561225f, +0.1025388f, -0.1608750f, -0.7440559f, -0.0413335f, +0.0006930f,
  -0.4348237f, -0.1647309f, -0.7065666f, +0.0894646f, -0.1826175f, +0.0920617f, +0.0439486f, -0.3909425f,
  -0.0685910f, -0.1116434f, +0.2288705f, +0.2241207f, +0.8108504f, -0.1313838f, -0.0986323f, +0.0585409f,
  +0.0698801f, +0.0906709f, -0.2894335f, -0.2140529f, -0.1821003f, +0.0541579f, +0.2483792f, -0.1856419f,
  +0.2895352f, -0.0859569f, -0.1486304f, -0.2348335f, +0.0762248f, +0.0209105f, -0.4338649f, +0.5526885f,
  +0.0338185f, -0.1836520f, +0.1732358f, -0.0302236f, -0.0824315f, +0.0504866f, +0.1119607f, +0.1030280f,
  -0.1342118f, -0.0018172f, -0.3221032f, -0.2008985f, -0.2082960f, +0.1829584f, -0.0872199f, -0.0893422f,
  +0.0921459f, +0.0496783f, +0.3729596f, -0.1465645f, +0.4128275f, -0.0999269f, +0.0681651f, +0.0600049f,
  +0.0102177f, +0.0987383f, +0.1084418f, +0.0423425f, -0.0007714f, +0.1312203f, -0.2988377f, -0.2271510f,
  -0.0933515f, +0.1618790f, -0.1337364f, -0.1390216f, -0.1745157f, -0.0275718f, +0.0548924f, +0.0023568f,
  +0.2339014f, -0.1235614f, +0.0080847f, +0.0039361f, -0.1398210f, +0.3773038f, +0.1021657f, +0.1787656f,
  -0.0083977f, +0.1961337f, -0.1325772f, +0.5350924f, +0.2143236f, -0.0216396f, -0.1284271f, -0.2431312f,
  +0.0007936f, -0.0265342f, +0.3162414f, +0.0728774f, +0.0333628f, -0.1589420f, -0.0040139f, +0.4743403f,
  +0.1028201f, +0.3834896f, +0.1550590f, +0.1047629f, +0.1230495f, -0.1568500f, -0.1023353f, -0.0572218f,
  -0.1361584f, +0.2782386f, +0.0022694f, -0.1890360f, -0.3113971f, +0.0452814f, -0.1755836f, +0.0341431f,
  -0.1519680f, +0.3727449f, -0.1034777f, +0.1612965f, -0.2911789f, +0.0127859f, -0.0048833f, -0.0204756f,
  -0.3681719f, -0.5784513f, -0.1829421f, +0.1241418f, -0.0479134f, +0.6821113f, +0.4703825f, -0.2683229f,
  -0.0597931f, +0.3053037f, +0.1925120f, -0.0334411f, -0.1948359f, +0.0546016f, -0.2514926f, +1.4277512f,
  -0.2047698f, -0.0994776f, -0.2220949f, -0.1049335f, -0.1006753f, +0.4950206f, +0.1369008f, +0.0397008f,
  +0.1086320f, +0.0774227f, +0.3783916f, -0.1770562f, +0.2288433f, +0.0562742f, -0.2067155f, +0.2247470f,
  -0.0491416f, +0.0059466f, -0.0979404f, -0.0305151f, -0.0867496f, -0.0609932f, -0.0188509f, +0.0945975f
);

const float biases[4] = float[4](
  -0.0018427f, -0.0130081f, -0.0892730f, +0.1129141f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer36 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0313238f, +0.0165438f, +0.1101296f, -0.0148460f, -0.0206406f, -0.1840669f, +0.3500822f, +0.1111158f,
  +0.2296548f, +0.0515579f, -0.3787323f, +0.3308633f, -0.0421944f, -0.0988358f, -0.1197553f, +0.2257777f,
  -0.0996379f, +0.0081927f, -0.2547659f, +0.2276092f, +0.0204136f, -0.0281911f, +0.2133378f, -0.0171115f,
  +0.2446021f, +0.0055834f, +0.1182546f, +0.1420919f, -0.0694536f, -0.4304408f, +0.1026866f, -0.1595308f,
  +0.1225516f, -0.1928488f, +0.0865869f, +0.1615184f, -0.1147113f, -0.4614389f, +0.1019188f, -0.5650650f,
  -0.1831014f, -0.1359539f, +0.4402269f, +0.1939046f, -0.0668509f, -0.0565714f, +0.1201857f, +0.0745647f,
  -0.0621443f, -0.2097227f, +0.1238685f, -0.0398055f, -0.0880489f, +0.0123751f, +0.1183573f, +0.1302789f,
  -0.4008791f, +0.1382706f, -0.1134349f, +0.3610657f, -0.0694238f, +0.3396510f, -0.1260244f, +0.2605798f,
  -0.2734841f, +0.0739431f, +0.1127882f, +0.5060632f, +0.3627649f, +0.0445288f, +0.0115808f, -0.1630539f,
  -0.1108025f, +0.1513444f, -0.0226434f, +0.1539680f, -0.1410389f, +0.1467236f, -0.0335724f, +0.4717507f,
  +0.2059623f, -0.2282908f, +0.0103959f, -0.1224719f, -0.1506917f, +0.2336896f, +0.0935251f, +0.1104347f,
  +0.1403889f, -0.2697591f, -0.0399206f, -0.0404815f, +0.1469772f, -0.0464213f, +0.1674537f, -0.0973946f,
  -0.0121038f, -0.0074884f, -0.1571606f, -0.1912638f, -0.1735421f, +0.2901791f, -0.0579888f, +0.0327831f,
  +0.0526160f, +0.0322477f, -0.1830512f, -0.3020181f, -0.0810276f, -0.6491483f, -0.0619246f, -0.3155275f,
  +0.1799640f, -0.0061091f, +0.0740333f, -0.2598454f, -0.0162298f, +0.0268564f, -0.1979979f, +0.0745963f,
  +0.0592306f, -0.0273393f, -0.0576972f, +0.0861504f, +0.1602450f, +0.1221721f, +0.0718797f, +0.0105873f,
  +0.1090159f, +0.2396506f, +0.0279597f, +0.0126251f, +0.1888891f, +0.1143730f, +0.0848627f, +0.4029770f,
  -0.0889747f, +0.0391637f, -0.0700739f, -0.1534134f, +0.0973195f, -0.1652272f, -0.0130412f, -0.4030370f,
  -0.0432042f, -0.3833260f, +0.1458452f, +0.0089867f, +0.1527595f, -0.4062407f, +0.0118713f, -0.4660998f,
  -0.1089224f, +0.7380239f, +0.3232881f, +0.4685503f, +0.0022898f, -0.2834983f, -0.3537852f, +0.1795025f,
  +0.1202876f, +0.0638800f, +0.2939591f, +0.1234673f, +0.2699562f, -0.0908568f, -0.1979759f, -0.1718421f,
  +0.2083830f, +0.3479210f, +0.1084982f, +0.2067385f, +0.2792943f, +0.2551394f, -0.1562121f, -0.0525598f,
  -0.2988290f, -0.7344909f, +0.7597219f, +0.2573069f, +0.1022882f, +0.1138948f, -0.0220839f, +0.2082235f,
  +0.0485399f, -0.1442175f, +0.1848421f, -0.0090337f, -0.1116361f, +0.0171885f, -0.1962296f, -0.0662903f,
  +0.1411476f, +0.0442521f, -0.1242964f, -0.0248928f, -0.1698593f, -0.0938642f, +0.2661273f, -0.3557668f,
  +0.3527535f, -0.0975090f, +0.5678036f, -0.1329045f, -0.1142126f, -0.2253070f, +0.1457892f, -0.0657422f,
  +0.1529926f, +0.0865260f, +0.0930019f, -0.0236783f, -0.2016075f, +0.1298988f, -0.0830112f, -0.1263875f,
  +0.0307329f, -0.0127363f, +0.1042132f, -0.0885982f, +0.1415123f, -0.0815016f, -0.1321340f, +0.1141146f,
  -0.3741329f, -0.1462075f, -0.0886957f, -0.1695782f, +0.0418072f, -0.0184995f, -0.2213134f, -0.1097090f,
  -0.2801421f, -0.0894059f, -0.0000053f, -0.0110747f, -0.0446525f, -0.0822929f, -0.2108744f, +0.0346999f,
  +0.0106861f, -0.3059657f, +0.2218425f, +0.0809637f, +0.3217516f, +0.6617759f, -0.2206662f, +0.3545151f,
  +0.1919309f, -0.0492779f, -0.1460139f, +0.0197720f, -0.2724074f, +0.2916031f, -0.5971151f, +0.2424010f,
  +0.3469347f, +0.4245384f, -0.4036824f, +0.2330930f, +0.1321277f, -0.0605016f, -0.4799886f, +0.1320650f,
  +0.0842575f, +0.0206129f, -0.1184587f, -0.0383881f, +0.0081528f, +0.0052787f, -0.0190260f, -0.2254785f,
  +0.0300443f, -0.0713620f, -0.6311841f, +0.0288774f, -0.4368653f, -0.4194881f, +0.0645454f, -0.0726288f,
  +0.1011403f, -0.1790110f, -0.1616384f, -0.1088426f, -0.2079568f, -0.3461533f, -0.0732027f, -0.1030095f
);

const float biases[4] = float[4](
  +0.0135487f, -0.0543509f, +0.0418094f, +0.0520596f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer37 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0725239f, +0.2399255f, -0.0050542f, -0.0265319f, -0.2677616f, +0.0112674f, +0.0984861f, -0.0792704f,
  +0.3374420f, +0.0057429f, -0.0820385f, +0.0727787f, +0.0158491f, -0.3095926f, +0.2821071f, -0.0838226f,
  -0.0746608f, -0.0843593f, +0.1932286f, +0.3002765f, +0.3165041f, -0.0981507f, +0.1716865f, -0.0204287f,
  -0.0569336f, +0.4994919f, +0.2061154f, +0.1152157f, +0.2914473f, -0.1158172f, -0.0105885f, -0.0153842f,
  +0.2556799f, -0.0766768f, -0.3136645f, +0.2517005f, -0.3799766f, +0.2236847f, +0.1170778f, +0.5199110f,
  -0.0407779f, +0.5196290f, -0.1295365f, -0.2576246f, -0.2573539f, +0.0921249f, +0.2002911f, -0.2058384f,
  +0.1036942f, -0.2009257f, -0.1719684f, -0.0603606f, -0.0274868f, -0.0813454f, +0.1382488f, -0.1988730f,
  -0.0827656f, +0.0638605f, +0.1156674f, -0.0437285f, -0.0681672f, +0.0290991f, -0.3426487f, +0.0068276f,
  -0.0526291f, -0.3902254f, +0.1301512f, +0.0446462f, +0.0291693f, +0.3043299f, +0.0311500f, +0.0469333f,
  +0.0640590f, -0.1382051f, +0.0480616f, +0.1293205f, -0.3512403f, -0.1649998f, +0.0595942f, -0.3886882f,
  -0.0006210f, +0.4508274f, -0.1234564f, +0.0901192f, -0.0069272f, +0.2168848f, +0.1520092f, -0.3380683f,
  -0.0386092f, -0.0660211f, +0.0933835f, -0.0490551f, -0.1702374f, -0.2117032f, +0.1098176f, +0.0041409f,
  -0.2660033f, +0.0962555f, -0.3612344f, -0.5845630f, +0.0475392f, +0.1248734f, -0.2336814f, +0.6381347f,
  -0.3020731f, -0.3372004f, +0.3426374f, -0.4699441f, -0.3488675f, -0.4491416f, +0.0651633f, +0.4773456f,
  -0.2902924f, -0.2768761f, +0.2617655f, +0.0630260f, +0.0576200f, -0.1611775f, +0.1019353f, -0.0398105f,
  -0.5112763f, -0.6567572f, -0.0104240f, +0.0135332f, +0.0523498f, +0.0524492f, +0.1287987f, -0.1244529f,
  -0.5368311f, -0.1705446f, +0.0327029f, +0.3497899f, +0.4866107f, +0.2214770f, -0.1761014f, -0.0655215f,
  -0.2041822f, -0.0783653f, -0.0457964f, -0.0315995f, +0.1189861f, +0.0233999f, -0.1588462f, +0.0359061f,
  +0.2265684f, +0.1617573f, +0.1531185f, -0.0802868f, +0.5476233f, -0.5291521f, -0.1176778f, +0.3644954f,
  +0.6236027f, +0.1120700f, +0.4705630f, -0.2028764f, +0.3147615f, -0.1030669f, -0.2217945f, +0.6491197f,
  -0.1904960f, -0.2167462f, +0.0614581f, +0.0514993f, -0.3695413f, -0.0875723f, +0.0590678f, -0.0955140f,
  -0.4328462f, +0.0049805f, +0.0222408f, +0.0343259f, +0.1841576f, +0.1498215f, -0.5029599f, +0.5249991f,
  -0.5188547f, -0.6015873f, -0.2205135f, +0.1264537f, +0.4153062f, -0.2311006f, -0.0040428f, -0.0139850f,
  +0.1705303f, -0.7595628f, +0.1279397f, -0.1897608f, +0.1941042f, -0.3953611f, -0.2495174f, -0.1952372f,
  -0.4947731f, -0.1845164f, -0.2768911f, +0.0352993f, +0.1392780f, -0.3887615f, +0.0090320f, +0.3256809f,
  +0.0176731f, +0.1512222f, -0.3008484f, -0.1460107f, +0.1517679f, -0.3850777f, +0.1239368f, -0.0984190f,
  -0.3922812f, -0.9464174f, -0.1552903f, -0.1567587f, +0.2819653f, -0.0620726f, +0.0281369f, +0.0790729f,
  -0.2050639f, -0.0861910f, -0.1893777f, +0.0307193f, +0.1613706f, +0.1008194f, -0.0798479f, +0.1429772f,
  +0.1906497f, +0.0626385f, -0.2370724f, +0.1637757f, +0.1728532f, -0.1114421f, -0.1104451f, +0.0106486f,
  -0.0429313f, -0.1830892f, -0.2921914f, +0.3015164f, +0.3405043f, -0.0453924f, -0.2725081f, -0.1107114f,
  -0.2212893f, -0.2097533f, +0.2976548f, -0.0195042f, -0.1271624f, -0.0458723f, +0.0855620f, -0.1543485f,
  -0.1164580f, +0.2933404f, +0.4400064f, -0.1293641f, +0.5773802f, +0.0001776f, -0.7978451f, -0.0234479f,
  -0.0338486f, -0.1402977f, -0.0634042f, +0.2428487f, +0.0761726f, +0.0775667f, -0.3715751f, -0.0313100f,
  -0.0569045f, +0.3055570f, +0.1611899f, +0.0454262f, -0.0768095f, +0.0332149f, +0.2070897f, -0.0266793f,
  +0.1921306f, -0.2481431f, +0.2119823f, -0.0626504f, -0.4870980f, -0.1202545f, -0.4084437f, +0.4037749f,
  +0.1888431f, -0.3801391f, +0.3213079f, -0.1290686f, +0.0968351f, +0.2847362f, +0.1228288f, -0.1535945f
);

const float biases[4] = float[4](
  +0.0865424f, -0.0251464f, -0.2428441f, +0.0120262f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer37 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0329346f, -0.0734340f, +0.0607242f, +0.0458599f, +0.0460492f, -0.0327053f, +0.0241344f, +0.1704450f,
  +0.4116464f, +0.0123715f, -0.0820438f, -0.1849378f, +0.1642562f, -0.0448432f, -0.0242406f, -0.2474093f,
  -0.1524974f, -0.1730824f, -0.0245504f, +0.1281721f, -0.1241974f, +0.1219353f, +0.1077022f, -0.1566546f,
  -0.0173280f, -0.1825915f, -0.1110769f, +0.1966710f, -0.2226201f, +0.1161802f, +0.1423747f, +0.2407109f,
  -0.3056833f, -0.0907758f, +0.3429922f, -0.2960730f, +0.2326375f, -0.1296168f, -0.5245162f, +0.4977910f,
  -0.0893198f, +0.5248244f, -0.2374150f, +0.1643523f, -0.1325200f, +0.2406472f, +0.2202212f, -0.1967395f,
  -0.4457310f, -0.0006746f, -0.0553390f, -0.1540370f, +0.0527500f, +0.1254329f, +0.0084534f, -0.0457984f,
  +0.0363384f, -0.1826688f, +0.1281140f, +0.4055591f, -0.1640814f, +0.0581299f, -0.0318175f, +0.1211375f,
  +0.1124582f, +0.2886245f, +0.0885630f, -0.3176073f, -0.1565182f, -0.2566409f, +0.0402068f, +0.0040965f,
  +0.0673100f, -0.1192602f, +0.2293326f, +0.0583674f, -0.0054428f, -0.2217380f, +0.0615437f, +0.0012513f,
  +0.1968103f, +0.0551377f, +0.1829662f, +0.1956408f, +0.3526004f, -0.2842769f, +0.1544020f, -0.2057347f,
  -0.0958749f, -0.0673404f, -0.0159754f, +0.0828396f, +0.1572341f, -0.0936580f, +0.0039817f, +0.0280641f,
  +0.1253619f, -0.3802692f, -0.3893078f, -0.0305490f, -0.4986421f, +0.1532542f, +0.0531553f, +0.5542484f,
  +0.4305495f, +0.3219167f, -0.3573750f, -0.9112255f, +0.1107031f, -0.0922100f, -0.5551472f, +0.3325780f,
  +0.0350167f, +0.1634360f, -0.0926793f, -0.0333537f, +0.2143229f, -0.2154322f, -0.1459024f, -0.0483101f,
  -0.4476143f, -0.3675891f, -0.0869985f, +0.2677215f, -0.1129666f, +0.1159400f, +0.0905508f, -0.3437842f,
  -0.8144158f, -0.7733992f, +0.3627062f, +0.2937206f, -0.2181967f, +0.3399705f, +0.1899523f, +0.3147009f,
  -0.1322941f, -0.2561677f, +0.3298214f, -0.0579033f, +0.2111944f, +0.0167290f, -0.0405540f, +0.2561011f,
  -0.0607076f, +0.0304365f, +0.0652529f, +0.0276015f, +0.0852542f, -0.3471551f, +0.1771902f, -0.1618193f,
  +0.3218427f, +0.3522947f, -0.1177143f, -0.0420947f, -0.2368942f, -0.1895674f, -0.2205067f, -0.5287141f,
  -0.0412190f, -0.3505496f, +0.7408972f, +0.1699996f, -0.0228046f, +0.1030901f, -0.0921232f, -0.0028138f,
  +0.0108563f, +0.0824630f, +0.0522811f, -0.0699289f, +0.0384183f, -0.1813385f, -0.1017473f, +0.0280004f,
  -0.1121885f, -0.1089989f, -0.3928128f, -0.3445669f, -0.3700290f, +0.0305951f, -0.2697909f, -0.0600240f,
  +0.0156709f, -0.2534601f, -0.0818288f, +0.1690083f, +0.4347628f, +0.2069075f, +0.0008942f, -0.2973223f,
  +0.1112390f, +0.0243880f, -0.0361345f, +0.1022639f, +0.0449818f, -0.0450228f, -0.1767960f, -0.0080641f,
  -0.1442494f, +0.0446956f, -0.3939181f, +0.1425512f, -0.0913235f, +0.0578102f, -0.1685344f, -0.2517287f,
  +0.1499415f, +0.1154432f, -0.0336620f, +0.2178373f, +0.5508752f, +0.0126080f, -0.1401540f, +0.0975511f,
  -0.1459154f, +0.0258255f, +0.0294807f, -0.1437867f, +0.2772220f, -0.0074715f, -0.1840211f, +0.2235137f,
  +0.5183814f, -0.1797942f, +0.0674201f, +0.3748603f, +0.1980087f, -0.0386257f, +0.1966527f, -0.0323427f,
  +0.0286531f, -0.4271161f, +0.6248254f, +0.2818135f, +0.2036005f, +0.0878995f, +0.0920650f, +0.3213814f,
  -0.2476463f, -0.0374079f, +0.1288528f, -0.0395765f, -0.1544817f, +0.1356721f, -0.0395398f, +0.0587583f,
  -0.8377160f, +0.2157730f, -0.2056172f, -0.5433936f, +0.1189539f, +0.1222792f, +0.0306038f, +0.1831889f,
  -0.4301388f, -0.8158374f, +0.1800157f, +0.0062463f, +0.3780310f, +0.0623851f, -0.0155546f, -0.4278007f,
  +0.0718197f, -0.0713103f, +0.1607993f, -0.1047807f, +0.0212190f, -0.0368559f, +0.0340353f, -0.0364685f,
  +0.3609972f, -0.0387231f, -0.1736026f, -0.1113907f, -0.1975783f, -0.1153526f, -0.0660155f, -0.3712399f,
  +0.0014176f, -0.0039111f, +0.0027143f, -0.2043432f, -0.0304990f, -0.4302543f, -0.0067655f, -0.1284190f
);

const float biases[4] = float[4](
  +0.0743797f, -0.0393703f, -0.1255489f, -0.0795752f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer38 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2009004f, -0.0158197f, +0.1379146f, -0.1547373f, -0.2385703f, +0.1737493f, -0.0152917f, -0.0906787f,
  +0.2115749f, -0.5321828f, -0.0600415f, -0.1767673f, +0.1736036f, -0.5789345f, -0.1347909f, -0.1787973f,
  -0.1178660f, -0.2775458f, -0.4712863f, +0.1048193f, +0.2370154f, +0.0155734f, -0.1089230f, -0.1325346f,
  -0.2341319f, +0.0303857f, -0.4630421f, +0.0183297f, +0.4508978f, -0.1019888f, -0.2409515f, -0.2466172f,
  -0.0730146f, +0.4319845f, +0.3860924f, -0.1437499f, +0.7345715f, +0.0781115f, +0.0300426f, -0.4451523f,
  -0.1051612f, -0.5017573f, +0.1242265f, -0.1737809f, -0.1071109f, +0.1714977f, -0.1132881f, -0.0309732f,
  +0.0904466f, -0.1951537f, +0.0577241f, -0.1140171f, +0.2726662f, +0.1134686f, +0.0496126f, +0.1290502f,
  -0.0712408f, -0.0909396f, -0.1784077f, -0.0699371f, -0.0974062f, +0.1350542f, +0.0788758f, +0.0875127f,
  -0.0494586f, +0.0483460f, +0.0563400f, -0.0284289f, +0.0699279f, +0.1822284f, +0.0159139f, -0.2196786f,
  +0.0278503f, -0.1817155f, +0.1885473f, +0.3911101f, +0.0708434f, -0.2054244f, +0.0905767f, -0.2091562f,
  -0.0008333f, +0.6810139f, -0.0555395f, +0.0813220f, -0.0391118f, +0.1286473f, +0.2848301f, -0.2006945f,
  -0.0335819f, +0.1212238f, -0.3424721f, +0.0889279f, +0.0437278f, +0.0526542f, +0.0292165f, -0.0564473f,
  -0.3294771f, +0.1611449f, +0.1106783f, +0.2522422f, -0.1011216f, -0.4268464f, +0.1295158f, +0.7824669f,
  +0.1668490f, -0.0703621f, +0.2597581f, -0.2999430f, -0.2245029f, +0.6397822f, +0.2627116f, +0.3272576f,
  -0.2133753f, +0.3321451f, +0.1361553f, -0.0404500f, +0.0058288f, +0.3777394f, -0.1128394f, +0.1886212f,
  +0.2832631f, -0.2028473f, -0.1608457f, -0.0170846f, -0.0950876f, +0.2412011f, +0.1368002f, +0.1472022f,
  +0.1726580f, +0.0040749f, +0.1108308f, +0.1205090f, -0.1639595f, -0.2804856f, +0.3975363f, -0.0704296f,
  +0.0195470f, -0.3581120f, +0.0438923f, +0.1212891f, -0.0402304f, -0.0192941f, +0.1591791f, +0.0105356f,
  +0.1747579f, +0.1758539f, +0.1222635f, -0.0788885f, -0.2136914f, +0.0431354f, +0.2269917f, -0.2470509f,
  +0.1048003f, -0.0730987f, -0.0284297f, +0.1899171f, +0.1179928f, -0.5981790f, +0.1706921f, -0.2594295f,
  +0.0958189f, -0.0463986f, +0.1342333f, -0.1373374f, +0.1578646f, -0.2682467f, +0.2124938f, -0.2180459f,
  +0.0543083f, -0.3231275f, -0.3033120f, -0.2225425f, -0.1021120f, +0.1722592f, +0.0358041f, -0.2968196f,
  +0.5291864f, +0.7208620f, +0.0245203f, -0.1737836f, -0.1637796f, +0.5748631f, +0.2319141f, -0.1250931f,
  +0.1604491f, +0.6887805f, -0.5206119f, -0.2717041f, +0.0958963f, -0.1752707f, +0.0798624f, -0.1948729f,
  +0.1298665f, +0.0293476f, -0.1406796f, -0.1060376f, -0.0723592f, +0.0261500f, -0.3293786f, +0.2299272f,
  +0.1736276f, -0.1226545f, -0.4122169f, -0.2025308f, -0.1423478f, +0.2708523f, +0.0652237f, +0.0994688f,
  +0.1026808f, -0.1214495f, -0.7351318f, -0.0389095f, -0.3049562f, -0.1905717f, +0.1254612f, +0.1828004f,
  +0.2570029f, -0.0180221f, -0.1365908f, +0.0412478f, +0.2636680f, +0.0911921f, -0.1038244f, -0.0513094f,
  +0.2216572f, -0.2958012f, +0.0806812f, -0.1929530f, -0.2840932f, -0.0277410f, -0.0740413f, +0.0720752f,
  +0.1363120f, -0.3753108f, -0.2982977f, -0.3298005f, +0.3250487f, -0.1521650f, -0.1792552f, -0.1050676f,
  +0.3878084f, +0.0152023f, +0.2026496f, -0.0404362f, -0.3213539f, -0.0632233f, +0.0551073f, -0.0693974f,
  -0.1301243f, -0.1687882f, -0.3118643f, +0.1992484f, +0.0062907f, -0.4885763f, +0.3281713f, -0.4365430f,
  +0.1539989f, +0.1527471f, +0.0335415f, -0.0528053f, +0.0259298f, +0.1741224f, -0.2305969f, +0.0873995f,
  -0.3342134f, +0.2684809f, +0.2525072f, -0.0685277f, -0.0076298f, -0.0653938f, -0.1485434f, -0.5974107f,
  -0.2682633f, +0.0929679f, +0.0338186f, -0.0119573f, -0.1267585f, +0.1370914f, +0.1749179f, -0.2365455f,
  +0.0466233f, +0.0062824f, +0.2991575f, -0.0364397f, -0.0454417f, +0.1394479f, +0.0487147f, -0.1101564f
);

const float biases[4] = float[4](
  -0.0332356f, -0.0470301f, -0.0097024f, +0.0217810f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer38 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0707136f, -0.1725332f, -0.0242957f, -0.1465816f, +0.0816273f, -0.2503413f, -0.1172805f, -0.1674781f,
  +0.0241668f, +0.2511468f, +0.2016523f, -0.0314167f, -0.0008967f, +0.2061530f, +0.1324575f, +0.0607322f,
  -0.1496922f, +0.6302149f, +0.0775681f, +0.1862299f, -0.2384782f, +0.2668996f, +0.0287306f, -0.1676301f,
  +0.0890247f, -0.1589428f, +0.1740518f, -0.2001284f, +0.2713551f, +0.1790521f, +0.1301136f, -0.0179416f,
  +0.5732726f, -0.3695202f, -0.1635716f, +0.0020197f, -0.6115694f, +0.7480193f, +0.0684695f, +0.4861770f,
  -0.2552388f, -0.1764175f, -0.2630213f, -0.1548640f, +0.1149654f, -0.1019659f, +0.1031554f, -0.2658589f,
  -0.3272827f, -0.2587834f, +0.4999363f, -0.1807103f, +0.0203129f, -0.1256494f, +0.4216477f, +0.4308113f,
  -0.1016012f, -0.0599215f, -0.2729907f, -0.0592314f, -0.0428231f, -0.3362035f, +0.1007033f, -0.2451294f,
  -0.0052984f, -0.2866580f, -0.4731241f, -0.1152917f, +0.0266271f, -0.0392198f, -0.0301121f, +0.0617219f,
  -0.1871298f, -0.1550807f, -0.4499834f, +0.1417867f, -0.2729118f, -0.0911853f, -0.0072298f, +0.2983062f,
  +0.0585588f, -0.2228566f, +0.2523974f, +0.2382748f, +0.0064996f, -0.2016774f, -0.0283110f, -0.0670572f,
  +0.0686325f, -0.4020528f, +0.1788105f, +0.0638168f, -0.0793119f, -0.0594925f, +0.0880880f, +0.1458944f,
  +0.0438258f, -0.2053523f, +0.0650777f, -0.0530783f, -0.3683052f, +0.0347608f, -0.0948743f, -0.0728798f,
  -0.1560366f, +0.1036811f, +0.4935804f, -0.0832676f, -0.1745591f, +0.4695863f, -0.0510524f, +0.0165380f,
  -0.0904246f, +0.2867407f, -0.2198684f, +0.0505831f, -0.0961315f, -0.0852324f, +0.1000858f, +0.0581624f,
  +0.1861049f, +0.0380737f, -0.0935502f, +0.1761641f, -0.0523346f, -0.0912304f, -0.1770404f, -0.0360052f,
  +0.3953433f, -0.0962344f, -0.0942419f, +0.0289788f, +0.1160875f, +0.1355892f, -0.0859309f, -0.0073496f,
  +0.0500499f, +0.0535929f, +0.0639304f, +0.1388742f, +0.0196136f, -0.1867236f, -0.0160107f, -0.0073660f,
  -0.0528904f, +0.0721731f, -0.1174848f, +0.2033534f, -0.0632451f, -0.0607934f, +0.1768362f, +0.1272268f,
  +0.3251657f, -0.1804458f, -0.1739792f, +0.1952855f, +0.0377336f, +0.4601788f, -0.0040051f, -0.1372168f,
  -0.1834339f, +0.3384748f, -0.1345595f, -0.0059164f, +0.0446513f, +0.0995667f, -0.0002444f, +0.1327049f,
  -0.0186899f, +0.2826248f, -0.1167775f, +0.4411060f, -0.2384670f, +0.1423223f, -0.1858967f, +0.0319895f,
  +0.0195243f, +0.3446443f, +0.1384899f, +0.4525895f, +0.1826377f, -0.1072324f, -0.0112738f, -0.1517577f,
  -0.0582842f, +0.2138651f, +0.0935154f, -0.1134307f, -0.1004509f, +0.0227620f, +0.1548756f, +0.1831204f,
  -0.0492492f, +0.0888124f, +0.2881613f, +0.0840938f, -0.0146956f, -0.1318586f, -0.0346264f, -0.3036668f,
  +0.1287275f, +0.1883116f, -0.1989279f, -0.0543578f, -0.0307389f, +0.0869843f, +0.1883347f, -0.0131993f,
  +0.1286539f, -0.1842300f, +0.2358137f, -0.0120231f, -0.0057532f, -0.0731694f, +0.1788523f, +0.0064154f,
  -0.1431454f, +0.0558123f, +0.2041374f, +0.2322278f, +0.0060447f, -0.1655068f, +0.0434377f, -0.0220418f,
  -0.0960051f, -0.4015330f, -0.4024577f, +0.0635184f, -0.0083202f, +0.2405095f, +0.2182186f, -0.1209923f,
  -0.1166418f, -0.2137911f, -0.3641679f, -0.1809971f, +0.0757911f, -0.1440110f, +0.0224299f, +0.1123531f,
  -0.0901473f, +0.0208445f, +0.0946715f, +0.3148765f, +0.1492979f, -0.2931077f, +0.2158558f, +0.1002602f,
  -0.5934018f, +0.1175383f, -0.3160293f, -0.0110115f, -0.6869433f, -0.6108061f, +0.3694857f, +0.4955548f,
  -0.0142513f, -0.2313300f, -0.3216000f, +0.1978933f, -0.1851221f, -0.1235096f, -0.1971994f, +0.2323137f,
  -0.0307695f, -0.1751220f, -0.2878022f, +0.1817961f, -0.0842229f, -0.1730230f, +0.5462514f, +0.3178194f,
  +0.0353859f, +0.1710246f, -0.3655260f, +0.1610867f, -0.1626545f, -0.2086140f, +0.2538716f, +0.0686042f,
  -0.1529639f, +0.1300069f, -0.2254090f, +0.2556454f, -0.0684958f, +0.0246836f, +0.1240869f, +0.0190595f
);

const float biases[4] = float[4](
  -0.0480333f, +0.0305935f, +0.0957718f, +0.0682948f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer39 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0444265f, -0.0650267f, +0.0395520f, +0.1011599f, -0.1295107f, -0.3943394f, -0.1766399f, -0.1925990f,
  +0.2003952f, -0.0303090f, +0.2604975f, +0.3328210f, -0.3438916f, -0.3765471f, +0.2022782f, +0.2075077f,
  +0.0735827f, +0.4294357f, -0.0773411f, +0.4588204f, +0.4344431f, -0.3106106f, +0.1559093f, -0.2703082f,
  +0.4634467f, -0.5484239f, -0.7485667f, -0.0626436f, -0.2603037f, +0.0020756f, -0.3881396f, -0.5719433f,
  -0.4378486f, -0.2856506f, +0.1676731f, +0.1574011f, +0.2281245f, -0.0673087f, +0.1127322f, +0.3850302f,
  -0.2544172f, -0.5761128f, +0.1865211f, -0.0747641f, +0.6071681f, -0.4245159f, -0.1248065f, -0.0690207f,
  -0.4552151f, +0.0364975f, +0.0811639f, -0.3789377f, -0.4043350f, +0.0324566f, -0.6596598f, +0.1799990f,
  -0.4218188f, -0.1702487f, -0.7309727f, -0.6058009f, +0.1997824f, -0.2067331f, -0.3338452f, -0.1832611f,
  -0.2410479f, +0.3596834f, -0.1024913f, +0.1371889f, -0.3753544f, -0.0915189f, -0.5370486f, -0.6624629f,
  +0.0807807f, +0.0561550f, +0.0244743f, +0.0582604f, -0.0630079f, +0.2012366f, +0.1248571f, -0.1343054f,
  -0.0483704f, +0.1047718f, -0.2979702f, -0.1580499f, -0.0815584f, +0.0076452f, -0.0653686f, +0.2050586f,
  -0.0561964f, -0.0776488f, -0.0438001f, -0.0126582f, +0.0554774f, -0.0394669f, +0.0751237f, +0.4151855f,
  +0.0222942f, -0.0698621f, +0.0135564f, +0.0727916f, -0.0499415f, -0.0750609f, +0.1044036f, +0.1475782f,
  +0.2394866f, +0.0276634f, +0.4858062f, -0.2781295f, -0.3188987f, +0.7549515f, +0.0383759f, -0.0537294f,
  +0.0902678f, -0.0268717f, -0.0667020f, -0.0905116f, +0.0714501f, -0.2167245f, +0.2159907f, +0.0669080f,
  +0.1569577f, +0.3239581f, +0.2763008f, +0.0532609f, -0.1069587f, -0.1814895f, -0.2079409f, +0.1590409f,
  -0.0083856f, -0.0263531f, +0.0864489f, -0.0784517f, -0.5869270f, +0.1021996f, +0.1554338f, +0.2986571f,
  +0.0903791f, +0.1392561f, -0.1219328f, +0.1038520f, +0.1156223f, +0.0420606f, -0.1228537f, -0.0060959f,
  -0.1006060f, -0.0506566f, +0.0135337f, -0.0034682f, +0.1471810f, +0.0746622f, -0.0060644f, +0.0295821f,
  -0.0185178f, +0.0730454f, +0.4670561f, +0.1673837f, +0.2051475f, -0.0162630f, +0.0068942f, +0.0881712f,
  +0.0305747f, +0.0195926f, +0.1570813f, +0.0545924f, +0.0472046f, -0.0990237f, -0.0449231f, -0.1620559f,
  +0.1425431f, -0.2016268f, -0.1153461f, -0.0196764f, -0.3563454f, +0.0132099f, +0.0510138f, -0.0259932f,
  -0.0015776f, +0.5305379f, +0.3639831f, -0.4656124f, -0.1207858f, +0.2309616f, +0.0691143f, -0.0554837f,
  -0.2522845f, -0.4108605f, -0.0144144f, +0.1337316f, +0.1586072f, +0.4401872f, -0.2977025f, +0.0693567f,
  +0.2188222f, -0.2454978f, -0.1428602f, -0.0758527f, -0.0645947f, -0.0614255f, -0.0369554f, -0.0959205f,
  +0.2352926f, +0.0041436f, +0.0837577f, -0.1207060f, +0.2052256f, -0.0516637f, -0.1361655f, +0.0616005f,
  -0.0649235f, +0.2321703f, -0.0021028f, -0.0239082f, -0.3082149f, +0.0869657f, +0.1730552f, +0.1180747f,
  -0.1321226f, +0.0663357f, +0.1492520f, -0.1402908f, -0.2855913f, +0.0512147f, -0.0847772f, +0.1772002f,
  -0.2023030f, +0.1307096f, +0.3579332f, -0.1018670f, +0.0278293f, +0.1559085f, -0.1039825f, -0.0675803f,
  +0.0365889f, +0.2971406f, +0.2205246f, -0.3302695f, -0.1487686f, +0.0068621f, -0.2156728f, +0.0263930f,
  +0.5281802f, +0.1177385f, -0.1384363f, +0.2627179f, +0.0873885f, -0.0985418f, -0.0419946f, -0.1867397f,
  -0.1784620f, +0.3973693f, -0.0263307f, -0.1958990f, +0.0263669f, +0.2490574f, +0.5221531f, -0.2610870f,
  +0.3698283f, +0.1867900f, +0.0281482f, +0.0456728f, +0.1411165f, +0.0355761f, +0.2376872f, +0.0479727f,
  +0.0365879f, -0.1754726f, -0.2146463f, -0.0703339f, -0.1202922f, +0.1146523f, +0.1143865f, +0.0694616f,
  +0.1672350f, +0.2139571f, -0.1123530f, +0.3103863f, -0.1072801f, +0.1629873f, +0.0340189f, +0.2105949f,
  +0.1262524f, +0.0695683f, -0.0451314f, -0.2059171f, +0.1548873f, -0.1783074f, +0.1417265f, -0.2863738f
);

const float biases[4] = float[4](
  -0.2434681f, +0.0976606f, +0.0965920f, +0.0896306f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer39 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0999134f, +0.0538328f, -0.0155613f, -0.3252555f, +0.3532669f, +0.0136242f, -0.1767435f, -0.1510273f,
  +0.0252116f, -0.1092521f, -0.0875952f, -0.1423712f, -0.1310563f, -0.0124185f, +0.1605017f, +0.0903529f,
  -0.0852107f, -0.0675989f, -0.0109734f, +0.0602052f, +0.1455142f, -0.0354833f, +0.0925849f, -0.0168504f,
  -0.0927495f, -0.3329786f, +0.0518453f, +0.9049811f, -0.6327901f, -0.1504384f, +0.0825891f, +0.2433761f,
  -0.2168364f, +0.1024261f, -0.0771828f, +0.1218772f, -0.2713734f, +0.1986141f, -0.1338918f, +0.4982844f,
  -0.1200391f, +0.2420390f, -0.1424011f, -0.0298765f, -0.1189335f, +0.0865854f, -0.1071422f, +0.1348671f,
  +0.1608659f, +0.0948060f, +0.1585088f, -0.2327337f, +0.1225066f, -0.0171481f, -0.0803695f, -0.0892491f,
  +0.1561350f, +0.3545232f, -0.0584966f, +0.0932125f, +0.1832431f, +0.0727714f, +0.0865781f, -0.2966247f,
  -0.0142415f, -0.1166899f, +0.0106779f, +0.1152784f, +0.0708779f, -0.0196078f, +0.0462121f, +0.2230148f,
  +0.1080798f, -0.0268420f, -0.0588099f, +0.0271083f, +0.0511649f, -0.0534337f, +0.0841660f, -0.1879241f,
  +0.3822200f, -0.1669695f, -0.2947063f, -0.2190802f, -0.0298849f, -0.0620142f, +0.0158360f, -0.2658384f,
  -0.1553712f, +0.0080531f, +0.3796658f, +0.2418933f, +0.0446309f, -0.1850121f, +0.1665313f, -0.1107209f,
  +0.1189194f, +0.0634695f, -0.0946136f, +0.1213937f, -0.0229164f, -0.1408461f, +0.1683288f, -0.0195131f,
  -0.1055004f, +0.1360082f, -0.1279763f, -0.3510849f, -0.1697172f, -0.1997857f, -0.6176246f, -0.0965026f,
  +0.2597099f, +0.1116493f, -0.1675937f, -0.0326581f, +0.2583434f, +0.2804696f, +0.2062942f, -0.3067926f,
  -0.2499401f, +0.0721613f, -0.0636679f, -0.1224869f, +0.2296098f, +0.0913503f, -0.0499607f, -0.0850497f,
  -0.1035279f, -0.0973625f, -0.0308862f, +0.7152625f, -0.2044109f, +0.1235059f, +0.0654875f, +0.1770114f,
  +0.4193797f, +0.0118905f, +0.0044405f, -0.5439522f, -0.0634071f, -0.1386636f, -0.1273569f, -0.2521176f,
  -0.0726974f, -0.1268826f, +0.0446122f, +0.1094990f, -0.1420621f, -0.0781041f, -0.1159339f, +0.2293335f,
  +0.0155704f, -0.0447886f, -0.4867465f, +0.3625214f, -0.1017353f, +0.4005265f, +0.0675242f, -0.1744609f,
  -0.0981262f, -0.0268330f, -0.1993777f, +0.0518947f, -0.1760548f, +0.4133947f, +0.0215798f, +0.1287179f,
  +0.3453904f, -0.0539996f, +0.2644131f, +0.0360027f, -0.2974819f, -0.0715624f, +0.1301067f, +0.2414946f,
  +0.1795225f, +0.0197096f, +0.3633786f, -0.1994908f, -0.0848471f, -0.1978339f, +0.1773797f, +0.0559739f,
  -0.1363931f, -0.0271495f, +0.4329119f, -0.0500454f, -0.1118007f, +0.0868749f, -0.0053726f, -0.1298656f,
  +0.1879745f, -0.1752296f, +0.0039159f, +0.0364835f, +0.0540899f, -0.2232303f, -0.1984517f, +0.1001690f,
  -0.1143199f, +0.1413316f, -0.0821887f, -0.1794359f, -0.1036511f, +0.0418198f, +0.0308908f, +0.2990491f,
  -0.1113545f, -0.0310355f, -0.0136655f, +0.1151138f, -0.0247468f, -0.0634933f, -0.0059893f, -0.2391052f,
  +0.0763237f, +0.0815232f, +0.0296525f, -0.1226858f, -0.0120029f, -0.0296488f, +0.0624347f, -0.1106689f,
  +0.1706260f, +0.0323728f, -0.2081121f, -0.1999252f, -0.1057224f, -0.0375155f, -0.0173416f, -0.1692556f,
  +0.0372002f, +0.0813123f, -0.2282035f, +0.0148717f, -0.0744449f, +0.0827694f, +0.0037892f, +0.0344872f,
  +0.2297986f, +0.1196278f, +0.0230848f, +0.0820222f, -0.0315634f, -0.1003440f, -0.0683522f, +0.1175841f,
  +0.0375590f, +0.2711173f, -0.0983294f, -0.5167465f, -0.0472747f, -0.2561189f, -0.4794898f, +0.6474349f,
  +0.0595203f, +0.2120228f, +0.0051718f, -0.2209175f, -0.1754581f, -0.2405425f, -0.1469187f, +0.1725920f,
  -0.0958174f, -0.0968896f, +0.0204324f, +0.1772281f, +0.0046666f, +0.1396120f, +0.0068216f, -0.2858160f,
  -0.2508032f, -0.0774447f, +0.2997243f, +0.6742509f, +0.0930863f, +0.5641047f, +0.5788193f, -0.1606715f,
  +0.0287667f, -0.1181202f, +0.2074757f, +0.1399277f, +0.2948254f, +0.2150292f, +0.0090513f, +0.0120086f
);

const float biases[4] = float[4](
  +0.1207024f, -0.0928462f, +0.0441509f, +0.0579591f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer40 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0222066f, -0.0562244f, +0.1604711f, -0.2656760f, -0.0338867f, +0.3967455f, +0.1274848f, +0.3209645f,
  +0.1158995f, -0.0130251f, -0.2350351f, -0.1538595f, -0.2978830f, +0.5085633f, -0.0583548f, +0.7022066f,
  +0.4393892f, -0.0476974f, -0.0774039f, -0.2192038f, -0.2155079f, -0.2496749f, -0.0436238f, +0.4062021f,
  +0.5302193f, -0.0354866f, +0.2826776f, -0.3952632f, -0.0717522f, +0.2533523f, +0.4709754f, -0.0618934f,
  +0.3791127f, -0.1397380f, +0.1753815f, +0.3519532f, -0.1065592f, -0.7519666f, -0.1012156f, +0.0398206f,
  +0.3482799f, -0.0637912f, +0.0000865f, -0.4584818f, -0.3616220f, +0.1857043f, +0.0067715f, -0.3045009f,
  +0.0231817f, +0.1564507f, +0.2999870f, +0.0200707f, +0.0021274f, +0.0947641f, -0.0682824f, -0.1443364f,
  -0.2418062f, -0.1053836f, -0.1595761f, +0.1955175f, +0.0558647f, +0.1427234f, +0.0028781f, -0.1561060f,
  +0.0933195f, +0.0470399f, -0.0898741f, -0.0028385f, -0.0083645f, +0.1959059f, +0.1357640f, -0.1546793f,
  -0.3379317f, +0.1879876f, -0.4180191f, +0.0700932f, -0.0717545f, -0.1544187f, -0.0933992f, +0.3540184f,
  -0.2562575f, +0.0672627f, -0.1358168f, -0.1499100f, -0.4380912f, +0.2352301f, -0.0787275f, -0.3048279f,
  -0.0355047f, +0.0413592f, +0.1190690f, -0.0613415f, +0.0769059f, +0.1571033f, +0.2651029f, -0.0791584f,
  -0.0673135f, +0.1638283f, +0.1592403f, -0.0681572f, +0.0047228f, +0.2238031f, +0.4160744f, +0.2280841f,
  +0.5240257f, -0.0150481f, -0.4488545f, -0.0015837f, +0.2335702f, +0.2699967f, +0.1835453f, -0.3492202f,
  +0.2655517f, +0.2597441f, -0.0862924f, -0.2147623f, +0.3880493f, -0.0160861f, +0.2546788f, -0.0923654f,
  -0.0671319f, +0.1438891f, -0.1553189f, +0.1233968f, -0.0714921f, -0.1380270f, -0.1494359f, -0.1265049f,
  +0.2968335f, -0.0844967f, -0.2851662f, +0.2084159f, +0.1804752f, -0.0403906f, +0.2769603f, +0.1153819f,
  -0.1613242f, +0.1860208f, -0.2000707f, +0.1337821f, +0.0677372f, -0.0304695f, +0.1791706f, -0.1913869f,
  -0.0510359f, -0.1382801f, +0.2087922f, -0.0995225f, +0.1006723f, +0.2521566f, +0.2073853f, -0.1953323f,
  +0.4148507f, -0.1917626f, +0.2288039f, +0.0434296f, +0.0637571f, +0.1335033f, +0.0060911f, +0.1959713f,
  -0.0215373f, -0.2002750f, +0.2387901f, -0.1340909f, -0.1332814f, -0.0656963f, +0.1168035f, +0.1530129f,
  -0.1122688f, -0.0334238f, -0.0316834f, -0.1473839f, +0.0837207f, -0.0221297f, -0.0881087f, -0.5523292f,
  -0.7099994f, -0.6338888f, -0.1745530f, -0.2061161f, -0.1542034f, +0.4014408f, -0.2726835f, -0.7968778f,
  -0.2456204f, +0.1097213f, +0.3064724f, -0.0787632f, +0.0600531f, +0.1484143f, +0.1345010f, +0.1516398f,
  +0.0457003f, +0.1442105f, -0.1894940f, -0.0373468f, +0.0552344f, +0.1524058f, +0.1136089f, +0.0108872f,
  -0.2403837f, +0.1174927f, -0.4271556f, -0.4535762f, +0.0467244f, +0.0376087f, +0.3838816f, -0.1261191f,
  -0.0392306f, -0.1615140f, -0.0433297f, -0.2307585f, -0.0785958f, +0.1390029f, -0.0406536f, +0.0131360f,
  -0.1047416f, -0.3197361f, -0.0753432f, -0.0637148f, +0.0373409f, -0.2786892f, +0.0213096f, +0.0883635f,
  +0.2888023f, -0.3888521f, +0.0763146f, -0.0064359f, +0.0505854f, +0.2026852f, +0.0622851f, -0.0797436f,
  +0.0481475f, -0.2093138f, +0.1453361f, -0.0914961f, +0.0953877f, -0.0302648f, -0.0779509f, +0.0365838f,
  -0.2150490f, -0.0339971f, -0.2208111f, +0.2303732f, +0.0835299f, +0.3783149f, +0.1800326f, +0.0361069f,
  +0.2005439f, +0.2842653f, +0.7530233f, +0.3768946f, +0.0279596f, -0.0598521f, -0.2586187f, +0.2423754f,
  -0.0703452f, +0.1244607f, +0.3415185f, -0.3174892f, -0.5123222f, -0.0045555f, -0.2624105f, -0.0044224f,
  -0.1962557f, -0.1815180f, -0.1142728f, +0.1544072f, +0.0837077f, +0.0857563f, +0.0517598f, -0.1483261f,
  -0.5464658f, +0.1471613f, -0.0484192f, -0.0036395f, +0.0291287f, +0.0283354f, -0.1915377f, -0.0704234f,
  +0.5303824f, -0.1326543f, -0.0439544f, +0.0985125f, +0.0671922f, -0.0068306f, -0.1339441f, +0.0625273f
);

const float biases[4] = float[4](
  -0.1021663f, -0.0425640f, +0.0041496f, -0.0295639f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer40 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1431510f, -0.3115610f, +0.3427165f, -0.1572805f, +0.0229175f, +0.2715124f, +0.0403621f, -0.0439632f,
  +0.1770420f, +0.3509900f, -0.4759282f, +0.2576141f, -0.0160920f, -0.1443498f, -0.1215317f, -0.1466206f,
  -0.0265924f, +0.0441360f, -0.0315426f, +0.0321921f, +0.2252398f, +0.2345258f, +0.0523286f, -0.1076341f,
  -0.1906890f, -0.2373843f, +0.0177708f, +0.0087304f, +0.0543195f, +0.3212954f, +0.1598964f, +0.1332939f,
  -0.5866213f, +0.3699152f, +0.2044094f, +0.0417694f, +0.2404222f, +0.3077790f, +0.1943748f, -0.3112150f,
  +0.2077476f, -0.0533339f, +0.0745705f, +0.1085862f, +0.6925893f, -0.1155700f, +0.3396327f, -0.0436870f,
  -0.2244647f, -0.1319889f, -0.0582020f, +0.2956602f, +0.0359635f, -0.0927557f, +0.1633422f, +0.1501254f,
  +0.3671500f, -0.0850219f, -0.2527115f, -0.3226239f, +0.2521546f, +0.2414323f, +0.6328916f, -0.0709307f,
  +0.0890479f, -0.0329648f, +0.0252509f, +0.1725321f, -0.1788587f, +0.0248679f, +0.1818787f, -0.0454333f,
  -0.5233157f, +0.1251351f, -0.1956025f, -0.0528742f, -0.0312414f, -0.0758574f, +0.1712620f, +0.1616110f,
  +0.1372942f, -0.1657389f, +0.0676918f, +0.1226872f, -0.1320305f, -0.0286079f, +0.1271813f, -0.3022376f,
  -0.4061450f, +0.0268199f, -0.0677675f, -0.0345186f, -0.1755650f, -0.0964596f, +0.2137525f, -0.0337450f,
  +0.0598209f, +0.4036340f, -0.2323968f, +0.0091470f, +0.1017606f, -0.1068940f, -0.1344966f, -0.1603569f,
  -0.2325411f, -0.4666629f, -0.2059591f, -0.2275504f, -0.3478234f, +0.1783022f, +0.1792651f, -0.0136615f,
  -0.2862715f, +0.2368015f, +0.0076994f, +0.0110525f, +0.1866479f, +0.1323795f, +0.0198422f, +0.0710198f,
  -0.0403749f, +0.1637943f, +0.2791093f, -0.2883559f, -0.0006652f, +0.0047847f, -0.1462660f, -0.0323227f,
  +0.1866767f, -0.0118405f, +0.0080923f, -0.0479198f, -0.1642183f, -0.1055566f, -0.2563496f, +0.1529744f,
  +0.0855736f, -0.1675643f, +0.0216937f, -0.2140947f, -0.0292243f, +0.0536791f, +0.0010427f, +0.0592187f,
  +0.2411432f, +0.0540900f, +0.1245031f, +0.0159620f, +0.0085783f, +0.3379378f, -0.0926169f, +0.1487632f,
  -0.0922290f, +0.0396386f, -0.2296506f, +0.0283857f, +0.0385839f, +0.6433804f, +0.0284192f, -0.5850573f,
  +0.4666725f, +0.2496166f, -0.1214001f, -0.0500858f, +0.2224662f, -0.2865979f, -0.0039575f, +0.0923353f,
  -0.2631007f, -0.0384499f, +0.2437836f, -0.0899063f, -0.0185460f, +0.3376130f, +0.1599518f, -0.1106445f,
  +0.4335787f, -0.0389222f, +0.1960992f, -0.1482105f, -0.0795902f, +0.1302542f, -0.1429982f, +0.1257517f,
  +0.3356797f, -0.2673097f, -0.0182389f, +0.1684454f, -0.0136889f, -0.0758254f, -0.0638306f, +0.0922079f,
  -0.2878949f, -0.1360849f, +0.0786815f, -0.0852407f, -0.0417075f, +0.1020760f, +0.0962761f, -0.1085929f,
  -0.3977709f, -0.1252834f, -0.0666206f, -0.0938426f, -0.1114219f, +0.0588252f, +0.1191825f, -0.0320446f,
  -0.1894983f, -0.1110825f, +0.0082330f, +0.2315124f, +0.1002463f, +0.0643268f, +0.1748356f, -0.0441687f,
  +0.4293966f, +0.2148201f, +0.0287561f, +0.3173163f, +0.0724694f, +0.0492700f, -0.0176729f, -0.0337904f,
  -0.0989670f, +0.0799397f, -0.2606974f, -0.1751136f, +0.1455905f, -0.1863512f, -0.1431892f, +0.2021439f,
  -0.0548008f, -0.1552604f, -0.0622203f, -0.0821080f, -0.2322132f, +0.0695197f, -0.0850014f, +0.1709102f,
  -0.6733651f, +0.1411325f, +0.0146442f, +0.1550130f, -0.0582890f, -0.4269553f, -0.0810007f, +0.3573076f,
  -0.8427038f, -0.1417170f, -0.0819697f, -0.1588786f, -0.2433354f, +0.6910404f, -0.1253130f, -0.2378388f,
  -0.3501016f, -0.1978467f, +0.1911393f, +0.2592412f, -0.2020485f, +0.2226266f, -0.1115282f, +0.0625179f,
  -0.2331246f, -0.1203653f, -0.0541077f, -0.0814850f, -0.0081747f, -0.1220162f, -0.0176316f, +0.1374730f,
  -0.1800925f, -0.2982888f, +0.0883136f, +0.2681183f, -0.1680133f, -0.0634132f, +0.1643203f, -0.0014284f,
  -0.3712985f, -0.0201119f, -0.0335147f, +0.0296814f, -0.0733191f, -0.0437737f, -0.2590707f, -0.1219800f
);

const float biases[4] = float[4](
  -0.1272200f, +0.0153772f, -0.0054115f, +0.0619065f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer41 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0403511f, -0.1140026f, +0.0031430f, +0.1000712f, +0.0780355f, +0.0113024f, +0.0666109f, -0.0022177f,
  -0.4954545f, +0.5409435f, +0.0821693f, -0.3610894f, +0.5273005f, -0.2944790f, -0.4971604f, -0.0997370f,
  +0.0134559f, -0.0814729f, -0.1078377f, +0.1079529f, +0.1236881f, -0.4384355f, -0.1067194f, -0.2049777f,
  +0.0198451f, -0.0333757f, +0.0514542f, -0.0164995f, +0.0071701f, +0.0252516f, +0.0833280f, -0.0655698f,
  +0.1241687f, +0.0048975f, +0.1298375f, +0.1622926f, -0.4041163f, -0.4292453f, -0.6038392f, +0.2816489f,
  +0.1920910f, -0.2491072f, -0.0225995f, -0.4000409f, -0.0953867f, -0.1557423f, +0.3888648f, -0.1938305f,
  -0.1761294f, +0.0454631f, +0.1984561f, +0.0240756f, -0.0049517f, +0.0190593f, +0.0143753f, +0.0501258f,
  -0.0295014f, -0.0697773f, +0.0358700f, +0.0985931f, -0.0507603f, -0.1655611f, -0.0173545f, +0.1137812f,
  -0.0343100f, -0.1479952f, +0.0900802f, -0.0097761f, -0.0368653f, +0.0784318f, -0.0704186f, -0.1124282f,
  -0.0941333f, -0.0709287f, -0.2071676f, -0.2891620f, +0.0691456f, +0.1664472f, -0.0013647f, +0.0832602f,
  +0.1958044f, -0.0365700f, -0.0027455f, -0.1469927f, -0.0045276f, -0.0509969f, -0.1742514f, +0.1359030f,
  -0.1205984f, -0.0159352f, -0.1868831f, -0.0172909f, +0.0668743f, -0.0043417f, -0.0492501f, +0.1539820f,
  -0.4217577f, +0.0676348f, +0.6003761f, +0.0303423f, +0.3602110f, +0.1632343f, +0.1542108f, +0.3050952f,
  +0.1320498f, -0.1297104f, +0.3118050f, +0.1004438f, -0.2249179f, -0.1595482f, -0.2846142f, -0.1752179f,
  -0.0093668f, -0.1942399f, -0.3051290f, +0.5674188f, +0.4827493f, -0.1779010f, +0.0553241f, +0.0509386f,
  -0.5348447f, -0.0393480f, +0.1114694f, -0.3409036f, +0.1118870f, +0.0813570f, -0.0365585f, -0.0661971f,
  +0.1399047f, +0.0981662f, -0.1189234f, +0.3590794f, -0.0254345f, +0.0024852f, -0.2163325f, +0.0608505f,
  -0.2219282f, +0.1685095f, -0.2244587f, -0.0542605f, +0.0671704f, -0.3408804f, +0.0814014f, -0.0954348f,
  +0.2065813f, +0.0095217f, -0.3313247f, +0.1170322f, -0.0115048f, -0.1359167f, +0.0819508f, -0.1146757f,
  +0.1068731f, +0.0554175f, +0.5817416f, +0.2148171f, -0.0596342f, +0.0213218f, +0.3709264f, +0.0105083f,
  +0.0472603f, -0.0365366f, +0.4387680f, +0.0429190f, -0.0651701f, +0.0387888f, +0.0114974f, -0.0718851f,
  -0.3375258f, +0.5134549f, -0.1833149f, -0.6278181f, +0.6035805f, -0.2119740f, -0.4715200f, -0.0365649f,
  +0.0839071f, -0.2461426f, +0.0918140f, -0.1304998f, +0.4438992f, +0.2472880f, +0.5857117f, -0.1615219f,
  -0.1020344f, -0.2739894f, +0.1681322f, +0.0769345f, +0.1343041f, +0.4221966f, +0.1203639f, +0.1020166f,
  +0.3754056f, +0.1719444f, -0.2229245f, +0.0112307f, -0.1066260f, -0.2576867f, -0.1990152f, -0.3400413f,
  +0.2022105f, -0.0803853f, -0.0922710f, -0.4252414f, -0.1472755f, -0.3248571f, +0.0014418f, -0.1041539f,
  +0.1030524f, +0.0515534f, -0.0067080f, -0.0175291f, -0.0589336f, +0.2953412f, -0.0964157f, -0.0345043f,
  +0.0843639f, +0.0587565f, -0.1127658f, -0.0461184f, -0.1312576f, -0.0028373f, -0.0252622f, +0.0436592f,
  +0.1058685f, -0.0383605f, +0.1164733f, -0.0008034f, +0.0431533f, -0.1006389f, +0.0987253f, -0.1065551f,
  +0.1572233f, -0.1282793f, +0.3526423f, +0.1838910f, -0.0735568f, +0.0791117f, -0.0029129f, -0.2763817f,
  +0.1301187f, -0.1223157f, +0.0268847f, -0.2241286f, -0.0303243f, +0.0673658f, -0.0386712f, +0.1021756f,
  +0.2441417f, +0.1011173f, +0.1174360f, +0.1080288f, +0.2016931f, -0.3960954f, +0.1420974f, -0.0096580f,
  -0.1026658f, +0.5080817f, +0.1580339f, +0.4503087f, -0.1463689f, +0.3909833f, -0.2466766f, -0.5888752f,
  +0.2106739f, -0.0989912f, -0.1231671f, -0.0442552f, -0.0641403f, +0.0096165f, -0.0194960f, -0.3023307f,
  -0.0867854f, +0.2376699f, -0.0694705f, +0.0914933f, +0.1244502f, +0.2639441f, -0.2656038f, -0.0781845f,
  -0.0859783f, +0.1697618f, -0.1285397f, +0.0673039f, -0.3543220f, -0.0841692f, -0.2346273f, -0.0891801f
);

const float biases[4] = float[4](
  -0.1490521f, -0.0364821f, -0.0054138f, +0.0070903f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer41 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0514519f, +0.0152205f, -0.2118555f, -0.0115681f, -0.1063860f, +0.0062700f, -0.0125771f, +0.0009923f,
  -0.1235700f, -0.0397493f, +0.2632886f, +0.2496387f, -0.0724704f, +0.1654000f, +0.1751665f, +0.1694620f,
  -0.0834014f, -0.0186253f, +0.3238480f, -0.0832144f, -0.1205144f, +0.1448205f, -0.0723744f, +0.1033081f,
  -0.3341165f, +0.3731249f, +0.0596865f, -0.6660789f, +0.5616145f, -0.1145588f, -0.4208568f, -0.1470357f,
  -0.1791576f, -0.0590346f, +0.1702270f, +0.1105865f, +0.4409522f, +0.0828026f, +0.4396111f, -0.1047591f,
  -0.1957797f, -0.1605102f, +0.0904136f, +0.1846283f, +0.0990189f, +0.3390342f, +0.1286634f, +0.1502959f,
  +0.2040800f, +0.2355827f, -0.1451475f, +0.0143406f, -0.0027131f, -0.0844484f, -0.1310668f, -0.3229914f,
  +0.1409314f, +0.0519819f, +0.0196875f, -0.4286625f, -0.1377927f, -0.2542797f, -0.0377891f, -0.0387098f,
  +0.0108434f, +0.0693540f, -0.0767722f, +0.0195517f, -0.0869918f, +0.0234517f, -0.0555283f, -0.0834458f,
  +0.3548783f, +0.0013718f, +0.0525425f, +0.0592397f, -0.1458875f, +0.0345110f, +0.2275396f, -0.1229328f,
  -0.0941618f, +0.0982861f, -0.1144552f, +0.0543696f, +0.1674456f, -0.1418049f, -0.0499707f, +0.1677927f,
  +0.0496199f, +0.2546956f, +0.0310064f, +0.0839308f, -0.0456498f, +0.0620323f, +0.1765086f, -0.2247276f,
  -0.0794928f, -0.0590786f, -0.4849116f, +0.0487500f, +0.3597226f, +0.0290879f, -0.3996228f, +0.3477152f,
  -0.0996299f, +0.0168649f, -0.1987881f, -0.6716787f, +0.0875271f, +0.2087313f, +0.2992525f, +0.1980568f,
  -0.1023090f, -0.2839726f, +0.3439298f, -0.0150394f, -0.3340933f, +0.1544079f, -0.1041317f, -0.1654038f,
  -0.2085641f, -0.0539892f, -0.1301471f, -0.0365766f, -0.2169399f, +0.0782630f, +0.0614283f, -0.1280211f,
  +0.2131140f, +0.2277335f, +0.1108629f, -0.0182678f, +0.1345470f, +0.1899222f, -0.0512018f, +0.0829379f,
  +0.0624653f, +0.1992608f, +0.2045544f, -0.1393035f, +0.0533652f, -0.2552762f, +0.1252328f, -0.2417703f,
  -0.0691352f, +0.0807547f, +0.1873863f, -0.0852642f, -0.0382628f, +0.1240651f, +0.1083041f, -0.0847144f,
  -0.1214886f, +0.0930840f, -0.5507072f, -0.0998556f, +0.1271375f, +0.2682941f, -0.0926806f, +0.1905729f,
  +0.0550346f, +0.1523834f, -0.2421164f, -0.1702117f, -0.0304509f, -0.1215333f, -0.0728423f, +0.2642661f,
  +0.2971887f, -0.2087833f, -0.2619266f, -0.1492479f, -0.0556621f, +0.0072403f, -0.0471910f, +0.1737091f,
  +0.5676020f, -0.2397227f, +0.2633991f, -0.0360389f, +0.0611031f, -0.6791105f, +0.3981348f, +0.3732159f,
  +0.1852081f, -0.0154807f, -0.2956704f, +0.1560607f, +0.2974648f, +0.2280147f, +0.1936159f, +0.0602336f,
  -0.1531800f, +0.0705360f, -0.0390543f, +0.0087947f, +0.1034686f, +0.1383459f, +0.0733413f, -0.1594401f,
  -0.1852227f, +0.1663822f, +0.2112153f, +0.0006687f, +0.1028109f, +0.4133822f, -0.2860819f, -0.2578286f,
  -0.0354630f, +0.0697535f, -0.0173181f, -0.0411222f, -0.1241582f, +0.0898172f, -0.3341940f, +0.0443076f,
  +0.2604282f, -0.1131260f, -0.4523307f, -0.0063311f, -0.0283055f, +0.0249706f, -0.0937442f, -0.2402039f,
  -0.0503337f, +0.1936130f, +0.5053085f, -0.2240574f, -0.1682583f, +0.2110036f, +0.3623877f, -0.2237835f,
  -0.0550939f, +0.0074649f, +0.0219112f, -0.1143930f, -0.0486313f, -0.0553008f, +0.2163253f, -0.0303725f,
  +0.2272498f, +0.2853853f, +0.0381738f, +0.1357938f, -0.2802945f, +0.1042585f, +0.1246428f, -0.6387768f,
  -0.0440508f, +0.5222318f, +0.1454371f, -0.2645194f, -0.1267943f, +0.1063723f, +0.0807354f, +0.0653391f,
  -0.3169934f, +0.2104385f, +0.0077152f, +0.0984517f, -0.1405267f, -0.0500197f, +0.2447913f, -0.0683996f,
  +0.1644672f, -0.2083222f, -0.4117611f, -0.1889267f, +0.1689120f, +0.1329536f, +0.3219334f, -0.2262942f,
  +0.1505139f, -0.1879591f, -0.0866398f, +0.3184554f, +0.1782074f, -0.1051035f, -0.2716183f, -0.0905759f,
  -0.0851332f, +0.3664912f, -0.1610969f, +0.0931317f, -0.2446623f, +0.2442599f, +0.2549741f, +0.1589620f
);

const float biases[4] = float[4](
  +0.0550078f, +0.1187768f, +0.1115634f, +0.1585222f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer42 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0592029f, +0.0323749f, -0.0929812f, +0.1346079f, +0.0515353f, -0.0560195f, -0.0782560f, +0.0710526f,
  +0.1905510f, +0.0488247f, +0.3971776f, -0.0308364f, -0.2929519f, -0.0384784f, +0.0911478f, -0.0757919f,
  -0.0139782f, +0.0535557f, +0.2680435f, -0.1306427f, -0.3619536f, +0.1177490f, +0.1837874f, -0.0064945f,
  -0.1592758f, +0.0057372f, -0.4863240f, -0.2355458f, +0.3556275f, +0.2705993f, +0.1751677f, +0.3746708f,
  -0.0790548f, +0.3518419f, +0.0762254f, -0.4404006f, -0.1015410f, +0.1087359f, -0.5745450f, -0.0735228f,
  +0.2148650f, +0.3374880f, +0.2636242f, -0.1885381f, +0.2253527f, -0.0192088f, -0.2948147f, -0.1565880f,
  +0.1721838f, +0.1595233f, -0.0296128f, -0.1377019f, +0.0069916f, -0.1453876f, +0.1796270f, -0.0679352f,
  +0.0104065f, +0.0783318f, -0.1235957f, -0.1113594f, +0.2038380f, +0.0784897f, +0.0943419f, +0.0718490f,
  -0.0490023f, +0.0566685f, +0.3181273f, -0.0459196f, -0.0756801f, -0.1581435f, -0.1265946f, -0.2090210f,
  -0.0809693f, -0.3446705f, +0.1454670f, -0.2002174f, -0.2234360f, -0.0846771f, +0.1987906f, +0.0324258f,
  -0.1196757f, -0.3041938f, -0.1433762f, +0.3866594f, +0.1640721f, +0.0004431f, -0.0942176f, +0.0556465f,
  -0.0642653f, -0.2022002f, +0.0026322f, -0.1628597f, +0.0027166f, +0.1392906f, -0.1298794f, -0.1808903f,
  +0.1384921f, -0.1673551f, +0.1435759f, +0.2172311f, -0.1322484f, +0.4622659f, -0.1517161f, +0.0158339f,
  -0.0156520f, -0.2534725f, +0.2668604f, -0.2959175f, -0.0956876f, +0.0380960f, +0.2297705f, -0.2067230f,
  +0.0824435f, +0.0689470f, +0.4308131f, -0.0357531f, -0.3407732f, -0.1511417f, +0.0095442f, -0.2809112f,
  +0.0558414f, -0.2539586f, +0.2229240f, -0.0216825f, -0.1737543f, -0.4198227f, +0.0621295f, -0.0269422f,
  -0.7105479f, -0.1651337f, -0.1239146f, +0.0681421f, +0.2209857f, -0.1142344f, +0.1443660f, -0.0399831f,
  +0.1099216f, -0.0074446f, +0.2305763f, +0.0585970f, -0.0896100f, +0.0473560f, -0.0891212f, -0.0234939f,
  -0.0744988f, +0.0586634f, -0.0557969f, -0.0628144f, +0.1090601f, -0.1986111f, -0.3316607f, +0.0902723f,
  +0.3074580f, +0.0101998f, -0.1133557f, -0.2137755f, -0.1646399f, -0.1939890f, +0.0393134f, +0.1454548f,
  -0.0404360f, +0.3366077f, +0.1518379f, +0.1659315f, -0.0137851f, +0.1694015f, +0.0772920f, +0.2022647f,
  +0.2741434f, +0.4614500f, -0.0345855f, +0.1754597f, +0.2586148f, -0.1311935f, +0.0411405f, +0.0540632f,
  +0.1892748f, +0.0238671f, -0.0023786f, -0.0924937f, +0.3105439f, +0.1407109f, -0.2937267f, -0.4630056f,
  +0.0197575f, +0.1526025f, -0.2633450f, -0.1848222f, +0.0553299f, +0.5408049f, +0.2236865f, +0.0123711f,
  -0.2790636f, +0.1825317f, -0.2564125f, -0.0974669f, +0.0030512f, +0.1001080f, -0.0939527f, -0.0457698f,
  -0.3609594f, +0.2156420f, +0.1351821f, -0.4256856f, -0.0569804f, +0.0012472f, +0.3070806f, -0.0481233f,
  +0.3837994f, +0.1115105f, -0.1388751f, -0.0891677f, +0.4739741f, -0.2272825f, -0.1840596f, +0.2325298f,
  -0.2293939f, +0.0823755f, +0.1504490f, -0.1530822f, -0.1888999f, +0.0557515f, -0.2412674f, -0.0706494f,
  +0.0487483f, +0.0304169f, -0.1191702f, +0.1504385f, +0.0597263f, +0.0368713f, -0.0603489f, -0.0091602f,
  +0.0600159f, +0.0793616f, +0.1899897f, -0.1642435f, -0.0687628f, +0.1448936f, +0.0933007f, +0.0030504f,
  +0.0880759f, +0.1793389f, +0.3995149f, -0.2955988f, -0.2846040f, +0.1170057f, -0.2955844f, -0.1108125f,
  -0.3089480f, -0.0027473f, +0.3386667f, -0.3087989f, -0.2901394f, +0.3578466f, -0.1694359f, +0.2770969f,
  +0.1507336f, +0.0591769f, -0.0266670f, -0.0104064f, +0.1516577f, +0.0664979f, -0.1157437f, -0.1848624f,
  -0.3922951f, -0.0127717f, +0.0337634f, -0.1777319f, -0.0540269f, +0.1007549f, -0.0126788f, +0.1737494f,
  -0.0948754f, +0.1292916f, +0.3629133f, +0.0082003f, -0.3100861f, +0.1015374f, -0.1622804f, +0.2106020f,
  +0.0721286f, +0.1729206f, -0.0400607f, +0.0349094f, +0.2055261f, +0.1392898f, -0.0132646f, +0.0540661f
);

const float biases[4] = float[4](
  +0.0025431f, +0.0497166f, +0.0296018f, +0.0015056f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer42 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1007596f, +0.1849735f, -0.1021704f, -0.2618284f, +0.1392669f, +0.0497947f, -0.0176999f, +0.1001342f,
  +0.1485137f, -0.0162669f, -0.0414671f, -0.0856025f, +0.0873605f, +0.1667860f, +0.1823922f, +0.1199237f,
  +0.0013428f, -0.0997181f, +0.1023199f, -0.0376164f, -0.0788057f, +0.1201590f, +0.0132692f, -0.0085361f,
  -0.1987519f, -0.1053866f, -0.1258775f, -0.3819530f, +0.1566337f, +0.1480017f, -0.1452327f, +0.0518564f,
  -0.0500127f, +0.0447934f, -0.2503579f, -0.2702864f, -0.0527331f, +0.1170701f, +0.0051275f, +0.1647090f,
  -0.1016442f, -0.0187290f, +0.3455526f, -0.0503348f, -0.6410266f, -0.3446979f, +0.0570534f, +0.0991891f,
  -0.1802487f, +0.0346158f, +0.0848716f, -0.2347834f, -0.0846317f, +0.0960918f, -0.0271946f, +0.0189775f,
  -0.6779501f, -0.1748362f, -0.3400198f, -0.0504840f, +0.2353848f, +0.0533817f, -0.4429037f, +0.2733607f,
  -0.0826414f, -0.1355614f, -0.2386325f, -0.1828391f, +0.1706647f, +0.0272770f, +0.1719052f, -0.0426624f,
  +0.0717972f, -0.0419762f, +0.0281007f, +0.4126844f, -0.1062623f, -0.0074474f, -0.0926595f, -0.0919547f,
  +0.0467488f, +0.1563539f, -0.0855548f, +0.1214161f, -0.0641235f, +0.0275219f, +0.0204420f, +0.1388926f,
  -0.0416454f, +0.1523245f, -0.0550948f, +0.1458296f, +0.0789190f, +0.0622755f, -0.0176443f, +0.1287431f,
  -0.2385296f, +0.1162943f, -0.2739627f, +0.0938585f, +0.1553654f, -0.0828768f, -0.1674804f, +0.0003506f,
  +0.1276386f, +0.0311304f, -0.0490491f, -0.0623539f, +0.0400708f, -0.4233339f, +0.6918443f, -0.2455696f,
  +0.0475889f, -0.0455635f, -0.1806594f, -0.0614778f, +0.2732036f, +0.0397376f, +0.0065938f, +0.0663136f,
  -0.3303068f, +0.0555014f, -0.2796390f, +0.0927463f, +0.0621736f, +0.2010453f, +0.0192955f, +0.0413077f,
  -0.0128107f, +0.1147738f, +0.1321373f, +0.0361574f, -0.1864736f, +0.0113669f, +0.0200139f, -0.1444679f,
  +0.1202220f, +0.0153934f, +0.1308216f, +0.0216708f, -0.1166287f, +0.0445693f, -0.0124038f, +0.1019227f,
  +0.1230131f, +0.1460213f, +0.0088870f, -0.3735112f, +0.0526179f, +0.0903836f, +0.2898299f, +0.2271273f,
  +0.1606938f, -0.2782155f, -0.0520581f, -0.1183427f, +0.1738995f, +0.3498918f, +0.2467197f, +0.3084894f,
  +0.0708183f, +0.1056159f, +0.0202931f, +0.0302712f, +0.1023818f, +0.2491758f, -0.0357468f, -0.1462492f,
  -0.0835954f, -0.1469799f, +0.0536054f, -0.0100289f, +0.0088789f, +0.2544573f, -0.0756584f, -0.2824575f,
  +0.5112845f, -0.3095917f, +0.2671953f, -0.0952436f, -0.0504976f, -0.1789357f, -0.4650455f, +0.0298216f,
  +0.0096098f, -0.1229891f, -0.2814694f, -0.0429864f, +0.1778878f, +0.1763812f, +0.1170403f, -0.2476553f,
  -0.0280303f, -0.1597608f, +0.0543404f, +0.0059555f, -0.1289546f, -0.0277280f, -0.0175478f, -0.2793519f,
  +0.1148895f, -0.2077803f, +0.2277798f, -0.1143180f, -0.2220369f, -0.0355347f, +0.0548047f, +0.0019127f,
  +0.0476990f, -0.1167345f, -0.0829951f, -0.0191975f, +0.1265266f, -0.2182283f, -0.0599002f, -0.0479490f,
  +0.0616662f, -0.0598731f, -0.1402336f, +0.3542922f, +0.0563085f, +0.2056856f, +0.0631683f, -0.1235581f,
  -0.0922612f, +0.0782818f, -0.2510868f, +0.1936764f, +0.4342887f, -0.0380903f, +0.1752658f, -0.1146058f,
  +0.0138258f, -0.0181926f, +0.2164132f, -0.2108998f, -0.0642240f, -0.0167807f, +0.1824465f, +0.2033269f,
  +0.0079600f, -0.2316745f, -0.1422404f, -0.0183463f, +0.0811466f, -0.0057221f, +0.1671735f, -0.2136058f,
  -0.5640632f, -0.0570235f, -0.7839602f, -0.4549589f, +0.4922463f, -0.1943757f, -0.1963718f, +0.1531409f,
  -0.0873289f, -0.0425154f, +0.0420529f, +0.0865449f, -0.0736526f, -0.3836607f, -0.1962273f, +0.3797979f,
  +0.1464286f, -0.2432608f, -0.1076817f, +0.1303291f, +0.0168745f, +0.0851306f, -0.2274218f, -0.0943664f,
  -0.1542976f, -0.2696410f, -0.3056564f, -0.0630067f, +0.1022789f, -0.1211508f, -0.1425445f, +0.1104674f,
  -0.1484218f, -0.1151999f, -0.2942639f, -0.0516457f, +0.0729878f, +0.0946872f, -0.0794102f, +0.1483927f
);

const float biases[4] = float[4](
  -0.1897092f, +0.0352853f, +0.0544747f, -0.0362608f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer43 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0253753f, +0.1090261f, +0.0445856f, -0.0422092f, +0.1092917f, +0.0850260f, +0.0170791f, -0.0047650f,
  -0.0369571f, +0.3183584f, +0.0809216f, -0.0921144f, +0.1741388f, -0.1780847f, -0.1589065f, -0.0759104f,
  -0.0989151f, -0.0144227f, -0.0979626f, +0.0463205f, +0.0164692f, +0.0810568f, -0.0227986f, +0.0345679f,
  -0.1077155f, +0.3873746f, +0.4201071f, -0.3538316f, +0.4371048f, -0.1086375f, +0.0388402f, -0.5888461f,
  -0.0888156f, -0.6942378f, +0.6169654f, +0.6296625f, +0.1591010f, -0.0628002f, +0.2738061f, +0.1795624f,
  +0.2969052f, +0.0306410f, +0.2163440f, +0.0103465f, -0.0625039f, -0.1466769f, +0.0369784f, -0.0334224f,
  -0.0798291f, -0.1269168f, -0.4266703f, +0.2004471f, -0.4543695f, +0.0626358f, -0.2045070f, +0.2798496f,
  +0.3797216f, +0.1281501f, -0.3322871f, -0.6081452f, +0.1525672f, +0.0894766f, -0.0892577f, -0.4452382f,
  +0.2391824f, -0.1664644f, +0.0150837f, -0.2172450f, +0.2246718f, -0.0093681f, -0.1572309f, -0.2735108f,
  +0.0179995f, +0.0901023f, -0.3277774f, +0.0763386f, +0.4360558f, -0.1251455f, +0.0670594f, -0.0907755f,
  -0.0364860f, -0.4909029f, +0.4988481f, +0.4645148f, -0.0514746f, +0.2133140f, +0.3491093f, -0.0242136f,
  +0.0051883f, -0.0051033f, -0.0257876f, +0.2381967f, -0.0499191f, +0.0801045f, +0.0587279f, -0.0734316f,
  +0.0135298f, +0.0901677f, -0.0241858f, -0.2514682f, -0.0175803f, -0.0545684f, +0.0426224f, -0.2983610f,
  -0.3237822f, -0.1841722f, +0.2019415f, -0.4194523f, +0.0720915f, +0.0713514f, -0.2762684f, +0.0026130f,
  +0.1140914f, -0.1022739f, +0.2089036f, -0.0209071f, +0.0422783f, -0.1050325f, -0.2074170f, -0.1809897f,
  +0.1832572f, +0.1026666f, -0.1811617f, +0.2124565f, -0.2434011f, -0.0730090f, -0.2205365f, -0.1070682f,
  +0.1244967f, +0.1376723f, -0.3493495f, -0.0700295f, -0.1268561f, -0.1987988f, +0.2240106f, +0.0059937f,
  -0.0444493f, +0.0013835f, -0.0907683f, -0.0547459f, +0.0288620f, -0.2155773f, +0.2110581f, -0.0233249f,
  +0.2700909f, +0.2234220f, +0.0432018f, +0.0086604f, -0.1642035f, -0.0070388f, -0.1033403f, -0.1267485f,
  -0.2606886f, +0.2333630f, -0.0434339f, +0.2832950f, +0.1735259f, -0.1866633f, +0.1068378f, -0.1184089f,
  -0.1315619f, -0.1264187f, +0.0039137f, +0.1034740f, -0.1672360f, +0.5143542f, +0.1115525f, +0.2124113f,
  +0.1136755f, +0.2243960f, +0.3547277f, +0.2796945f, -0.0328112f, -0.1246228f, +0.0518796f, -0.0221881f,
  -0.1055536f, +0.1649847f, +0.4183293f, +0.1530502f, -0.0945553f, -0.0984437f, +0.0698646f, +0.3243058f,
  -0.2106960f, +0.0689158f, -0.2071988f, +0.1275336f, -0.0393541f, +0.0753461f, +0.1886451f, +0.1903871f,
  -0.1265524f, +0.2377096f, -0.0746264f, +0.0403455f, +0.1723077f, -0.0999524f, +0.3214368f, +0.1815668f,
  -0.0003095f, +0.3081657f, +0.0678533f, -0.0070052f, +0.1229920f, -0.2113245f, +0.0317449f, +0.1956538f,
  -0.0217718f, +0.1599307f, +0.1142448f, -0.0776859f, -0.0822369f, +0.2065564f, -0.1373678f, +0.0343766f,
  -0.1793428f, -0.2038471f, -0.2125392f, +0.0010263f, +0.3378108f, -0.1749427f, -0.0632876f, +0.2522391f,
  +0.2455260f, +0.1205409f, -0.3416768f, +0.0240912f, -0.1032118f, -0.0335093f, +0.0995063f, -0.1280172f,
  -0.0256940f, -0.0184435f, +0.3745909f, +0.0395747f, -0.1028527f, -0.0047502f, -0.2496019f, -0.1503313f,
  -0.4646071f, -0.1501223f, -0.2516584f, +0.0201339f, +0.2607393f, -0.0946269f, -0.3310079f, +0.4835234f,
  +0.4783106f, +0.1853300f, +0.4668987f, +0.0342286f, +0.0292669f, +0.0761933f, +0.4919083f, -0.3309908f,
  -0.5044121f, -0.0693129f, +0.2091497f, +0.0292553f, -0.2392476f, +0.3080729f, -0.4601417f, -0.3607088f,
  -0.2862767f, +0.1875355f, -0.0498787f, -0.3088316f, +0.0685403f, -0.0178263f, -0.0008020f, -0.0306971f,
  -0.0013625f, +0.1385746f, +0.2855709f, +0.2780108f, -0.2713643f, +0.0463993f, -0.4651401f, -0.3271840f,
  +0.0648253f, -0.1779208f, +0.0241883f, -0.2030145f, -0.0014629f, -0.0505387f, -0.0780092f, +0.0563461f
);

const float biases[4] = float[4](
  -0.0629060f, -0.0686776f, +0.0837034f, -0.0761025f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer43 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1781510f, +0.0988927f, -0.2505646f, +0.2610296f, +0.1892996f, -0.1394195f, +0.0341316f, -0.1640511f,
  -0.1153414f, +0.3365358f, +0.2459544f, +0.0756570f, -0.4840990f, +0.1116912f, -0.2863107f, -0.1414935f,
  -0.0285048f, +0.1946779f, +0.0444215f, +0.0404168f, +0.1715774f, -0.0802292f, +0.0163423f, -0.0010589f,
  -0.5793583f, +0.8569685f, +0.1801673f, +0.0547158f, -0.1682207f, -0.2234454f, -0.5088214f, -0.1196019f,
  +0.4146220f, -1.2452276f, +0.2653438f, -0.7757410f, -1.0105428f, +0.5368950f, -0.1192014f, -0.2905459f,
  +0.0955890f, +0.1476782f, -0.1887260f, +0.1397890f, +0.4021671f, +0.1846081f, -0.2306855f, +0.2170486f,
  -0.0233278f, +0.1765943f, -0.1012157f, +0.0878617f, -0.0081864f, -0.0296896f, -0.0394335f, +0.0787578f,
  -0.1490033f, -0.4105022f, +0.0098198f, +0.0340417f, +0.1198719f, +0.0670401f, +0.0710275f, -0.2620142f,
  +0.2089278f, +0.1908825f, -0.0643139f, -0.0112479f, +0.2682041f, +0.0175450f, -0.1024562f, +0.2333147f,
  -0.3089913f, +0.1565680f, +0.2720239f, -0.1113804f, +0.2291975f, -0.0147841f, -0.0714346f, +0.3388289f,
  +0.2115834f, -0.1608845f, -0.4992769f, +0.1919874f, -0.0477151f, +0.1492753f, +0.2951984f, -0.2700266f,
  -0.0344273f, +0.0800308f, -0.2772112f, +0.2784446f, +0.1796097f, +0.4046031f, +0.0102795f, -0.0378569f,
  +0.0876319f, -0.0027015f, +0.0353044f, -0.1222505f, +0.0048308f, +0.0322278f, +0.0682104f, +0.0422325f,
  -0.3794944f, +0.0660555f, +0.9863922f, +0.2243530f, +0.0183906f, -0.1842661f, -0.1764660f, -0.1744447f,
  +0.2471165f, -0.0837044f, +0.1022967f, -0.4030918f, -0.1361693f, -0.1293474f, +0.3776171f, +0.0656077f,
  -0.1224945f, -0.0456351f, +0.0231616f, +0.0252345f, -0.0532151f, +0.1136167f, +0.0869755f, +0.0157004f,
  -0.0148066f, +0.0936341f, +0.3677255f, -0.0054063f, +0.1957843f, +0.2389123f, -0.1443920f, +0.1725655f,
  +0.0182810f, -0.0341794f, +0.0173880f, -0.2281834f, -0.1758975f, +0.1337888f, +0.1494033f, -0.0494757f,
  +0.0168557f, +0.0042578f, +0.0402058f, +0.1730981f, -0.3924662f, +0.0525619f, -0.1337797f, +0.2699265f,
  -0.1327781f, +0.1241245f, +0.5264348f, +0.2369770f, -0.2155169f, +0.1499188f, +0.2084744f, +0.1164575f,
  +0.0088770f, +0.0471299f, +0.3604174f, -0.0749361f, -0.0316516f, -0.0724083f, -0.0279197f, -0.2658722f,
  +0.1490958f, +0.0046655f, +0.3030326f, -0.1871983f, -0.2178494f, -0.2582115f, -0.1085459f, +0.0333924f,
  -0.0814842f, +0.1068791f, +0.1175881f, -0.1691471f, -0.4394000f, +0.1513481f, +0.2063992f, -0.3638654f,
  +0.1671235f, +0.3848656f, -0.0837081f, +0.4396958f, +0.0698729f, +0.2123120f, -0.1951313f, +0.0014313f,
  +0.0262647f, -0.1476417f, +0.0354077f, +0.1029028f, +0.0820154f, +0.2397824f, -0.0169735f, +0.1022304f,
  -0.0612887f, +0.0348753f, -0.1382098f, -0.1419553f, +0.1441486f, +0.3028071f, +0.3794063f, +0.0611895f,
  -0.0896656f, -0.1376835f, -0.0466211f, -0.0108067f, -0.0396393f, +0.1275825f, -0.2035160f, +0.0779141f,
  -0.1726283f, -0.1369226f, +0.4528228f, +0.0524035f, +0.1718702f, +0.1226540f, +0.1807228f, +0.2219656f,
  +0.2880314f, -0.0003037f, -0.2412566f, -0.3378513f, -0.0317323f, -0.1812844f, -0.1223692f, -0.3134637f,
  -0.2489120f, -0.2965699f, +0.1819208f, +0.0211367f, -0.0427493f, +0.0914403f, +0.1253391f, +0.2557001f,
  -0.0748026f, -0.1417198f, +0.0642865f, -0.3559531f, +0.2522717f, +0.1325619f, +0.1719603f, -0.1571979f,
  -0.1412141f, -0.1486105f, +0.3256875f, +0.3438309f, -0.2714638f, +0.2061932f, -0.4716797f, +0.3029294f,
  +0.0669599f, +0.8678012f, -0.4597844f, -0.0310969f, -0.1459202f, -0.0670547f, +0.0462094f, -0.2027064f,
  +0.0825072f, +0.0736416f, -0.0266669f, +0.0770977f, -0.1291420f, +0.0048191f, +0.0207266f, +0.0917613f,
  +0.2385696f, +0.1208037f, +0.3717591f, +0.0886332f, +0.2396732f, -0.0858737f, +0.2055916f, -0.0751077f,
  -0.2454253f, +0.2014126f, -0.3815513f, -0.0358249f, -0.1776790f, +0.2225839f, +0.0010970f, +0.3744690f
);

const float biases[4] = float[4](
  -0.0237753f, +0.1214345f, +0.1534041f, +0.0985825f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer44 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.3117677f, +0.0288366f, +0.0788881f, -0.1404818f, -0.0311866f, -0.1425007f, +0.0349985f, +0.0094128f,
  +0.3911047f, +0.2276898f, -0.0739569f, -0.3475086f, -0.1492650f, -0.3507926f, +0.1675120f, -0.0953890f,
  +0.0293592f, -0.0926868f, +0.1488739f, +0.1375241f, +0.0350786f, -0.0448893f, +0.2284615f, -0.1047271f,
  +0.0709382f, -0.0135460f, +0.4476013f, -0.4131882f, -0.1584845f, -0.1674516f, +0.0249088f, -0.0800917f,
  -0.3081902f, +0.3298626f, -0.0687691f, -0.0628279f, -0.0524230f, +0.6050324f, +0.0307501f, +0.6575013f,
  -0.2976894f, -0.1628372f, +0.0719151f, +0.2663576f, +0.3347757f, +0.1971557f, -0.0072653f, +0.0337563f,
  -0.0764733f, +0.3252491f, +0.1782057f, -0.1921280f, -0.1849012f, -0.0237871f, -0.0329517f, -0.0669325f,
  -0.0772498f, -0.0591870f, -0.1377121f, -0.1050108f, -0.3455917f, -0.1034201f, +0.4397274f, -0.2148747f,
  -0.2853210f, +0.1360301f, -0.1787077f, -0.0594556f, +0.1502855f, -0.1299520f, +0.0834551f, +0.0358722f,
  -0.2047753f, +0.0446153f, -0.0579124f, -0.2965473f, -0.1357619f, -0.2241320f, -0.0340416f, -0.2188643f,
  +0.5382750f, +0.1617492f, -0.1813773f, +0.1652907f, +0.1224635f, +0.0752618f, +0.1801179f, -0.0198706f,
  -0.6820384f, -0.0108417f, -0.0697872f, +0.2037707f, +0.1325648f, +0.1790071f, -0.1101174f, +0.0444426f,
  +0.3953345f, +0.3139567f, -0.2665774f, -0.1652420f, -0.6280973f, +0.3805276f, -0.1708238f, -0.5700263f,
  -0.8311925f, +0.3056266f, -0.1524660f, +0.2742772f, +0.0427401f, -0.0619768f, +0.1381744f, +0.0281988f,
  -0.0432174f, +0.2642518f, -0.0493931f, -0.1702661f, +0.4636558f, +0.0888595f, -0.0653934f, +0.2429559f,
  -0.2279032f, +0.3769721f, +0.1736613f, +0.0505516f, +0.0052001f, +0.0104694f, +0.0043325f, -0.0190647f,
  -0.0354790f, -0.2593147f, -0.2102975f, -0.3968008f, -0.2974432f, +0.0152218f, +0.2366814f, +0.1152242f,
  -0.0744943f, +0.0069634f, -0.3127304f, +0.0901003f, +0.3261146f, +0.1555294f, -0.1339303f, +0.1659912f,
  +0.0339240f, +0.0333614f, -0.2121745f, +0.4520423f, +0.1749302f, -0.0845356f, +0.2169715f, +0.4465289f,
  +0.5699377f, +0.0578821f, -0.2350576f, -0.2697546f, -0.3974763f, -0.2453312f, +0.2246757f, -0.2117255f,
  +0.1352607f, +0.0043647f, -0.2080946f, +0.1356969f, +0.2499599f, +0.2113242f, +0.0775795f, -0.0060999f,
  -0.2385707f, -0.1976814f, -0.1240126f, -0.4642684f, +0.1079093f, -0.4989916f, +0.2288629f, +0.2456831f,
  -0.3207485f, -0.2977050f, -0.2387821f, +0.5339880f, +0.2300547f, -0.4504415f, +0.0483009f, -0.2162236f,
  -0.1486067f, -0.1590276f, -0.0365177f, +0.3128536f, +0.1192045f, +0.1680391f, -0.1989443f, -0.2309997f,
  +0.0698867f, -0.1945245f, -0.3427162f, -0.0806024f, +0.0382385f, +0.4210401f, -0.0346008f, -0.0362100f,
  +0.0535928f, -0.2161985f, +0.1510677f, -0.0948644f, +0.2177838f, +0.1738176f, -0.5582505f, +0.1631266f,
  +0.2518717f, -0.1299298f, -0.1841885f, +0.2305731f, +0.2925829f, -0.0036072f, -0.0680148f, -0.1839646f,
  -0.1024669f, +0.0433463f, +0.0284940f, +0.1498877f, +0.0727748f, -0.0402537f, +0.0880478f, +0.2651494f,
  +0.0203526f, +0.1016956f, +0.0005656f, +0.0522351f, +0.0878692f, +0.1166139f, +0.3063279f, +0.0546754f,
  -0.0265767f, +0.0662059f, -0.0116493f, +0.2667027f, +0.0610790f, +0.0726206f, -0.0549600f, +0.0752699f,
  -0.2418035f, +0.0783748f, -0.2235901f, +0.2050446f, +0.2417436f, +0.2231654f, -0.1893557f, -0.1080901f,
  +0.0761648f, -0.0837492f, -0.2498571f, -0.2241655f, -0.1339460f, -0.2447645f, +0.0171537f, -0.2749402f,
  -0.0438526f, -0.1013001f, -0.3727783f, -0.0399173f, +0.4445588f, -0.1596200f, -0.0907824f, +0.2857053f,
  +0.1200503f, -0.1417498f, -0.1109021f, +0.1913213f, +0.2208883f, -0.3120474f, -0.0344794f, +0.1477629f,
  -0.0684054f, +0.1987065f, -0.2588677f, +0.1065797f, +0.6013907f, -0.0416839f, -0.3197020f, +0.3513320f,
  +0.0061724f, -0.0116996f, -0.0200112f, -0.0631441f, +0.0492822f, -0.1663096f, -0.4879841f, +0.1135038f
);

const float biases[4] = float[4](
  +0.1079203f, +0.2259673f, +0.0649529f, +0.1452201f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer44 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1160017f, +0.0645007f, +0.0728466f, +0.1105951f, +0.1140964f, +0.0071150f, +0.1127379f, +0.2082246f,
  +0.2179512f, +0.0994566f, -0.1949656f, -0.1205796f, -0.1755492f, -0.3375204f, -0.0397939f, -0.0801766f,
  -0.4435223f, +0.0365414f, -0.0080585f, +0.0109466f, +0.0455342f, -0.0665569f, +0.0496337f, +0.1488942f,
  -0.1164850f, -0.0649869f, +0.0247064f, -0.0190207f, +0.0742654f, -0.2100413f, +0.1227685f, +0.2545080f,
  -0.3752755f, +0.0218222f, -0.1134661f, +0.0823309f, -0.3856310f, -0.4768676f, +0.3029838f, +0.5333622f,
  -0.1165474f, +0.3537912f, -0.0704011f, +0.0447137f, +0.3315541f, -0.1068468f, +0.1730175f, +0.1093303f,
  -0.0189844f, -0.1466048f, -0.0089296f, +0.0491935f, -0.0360199f, -0.1042478f, +0.1209673f, +0.0694598f,
  +0.0886385f, -0.2649963f, -0.4082778f, +0.1989537f, +0.1611938f, +0.2693514f, +0.2312441f, -0.2300987f,
  -0.0875398f, -0.1845116f, +0.0219355f, -0.0732280f, +0.0013556f, -0.0852847f, -0.0123343f, +0.0640348f,
  -0.0463240f, +0.0973988f, -0.0830475f, +0.2085926f, -0.1785958f, -0.1190323f, -0.0888092f, -0.1142075f,
  +0.1950040f, -0.1021354f, +0.1946431f, +0.1850034f, +0.1654379f, -0.2511618f, -0.1536071f, -0.0955808f,
  -0.0816209f, +0.0495422f, +0.0346842f, +0.0279316f, +0.0940755f, +0.1031630f, +0.0017099f, -0.1259620f,
  +0.0413491f, +0.1834263f, +0.0682424f, -0.1045131f, -0.2233883f, +0.0407768f, -0.2616484f, -0.1467111f,
  -0.3831564f, +0.3903713f, +0.0802303f, -0.7527575f, -0.5018502f, +0.0454230f, -0.2985378f, -0.2513350f,
  +0.0663859f, +0.1354830f, +0.0707041f, +0.0915475f, +0.1395150f, +0.2814056f, +0.0697621f, -0.1860038f,
  +0.0640963f, +0.0651114f, -0.4143094f, -0.0634211f, -0.0992077f, -0.3860498f, +0.2293810f, +0.0385467f,
  +0.0903508f, -0.5171959f, +0.1609140f, +0.1340543f, +0.2269608f, -0.0857553f, +0.0694707f, +0.0954928f,
  +0.1809187f, -0.0218021f, +0.0106477f, -0.0491233f, -0.2669442f, -0.1131393f, +0.0934560f, -0.0270892f,
  +0.0899650f, +0.1032950f, -0.2051804f, +0.0877799f, -0.1028994f, -0.1456869f, +0.2166525f, -0.0928654f,
  -0.3071593f, -0.0335650f, -0.1598668f, +0.1745170f, +0.4638831f, +0.1650169f, -0.2490277f, -0.0554236f,
  -0.0775763f, +0.1195252f, -0.1356666f, -0.1217036f, -0.2855799f, +0.1261026f, +0.1103346f, +0.0537236f,
  +0.0160494f, +0.0134921f, +0.1308466f, -0.0846551f, -0.1800833f, -0.4852467f, +0.3648197f, +0.2657790f,
  +0.0291116f, -0.1682174f, -0.0936373f, +0.5824457f, +0.9624740f, -0.1080901f, +0.0762641f, +0.5093042f,
  -0.0489082f, -0.0178906f, -0.0471808f, -0.1888331f, -0.3217092f, +0.1054693f, -0.1068328f, +0.2003521f,
  +0.0514438f, -0.0974040f, -0.0181961f, -0.1617532f, -0.0905904f, +0.2127247f, +0.3029876f, +0.0304962f,
  +0.0417887f, -0.1054682f, -0.1033812f, +0.1869719f, +0.1052350f, -0.0469799f, +0.0524905f, +0.2781959f,
  +0.0995913f, +0.0005487f, +0.2097239f, +0.0944707f, +0.0984809f, -0.1321685f, +0.0359288f, +0.0573129f,
  +0.1567097f, +0.1289655f, +0.0257672f, -0.2912302f, -0.1249651f, +0.1491189f, -0.1308456f, -0.4770739f,
  -0.2909562f, -0.0032983f, -0.1676587f, +0.1784784f, +0.2283965f, -0.0425055f, +0.0683941f, +0.1276262f,
  +0.3854451f, +0.2152348f, -0.0274433f, +0.1831591f, -0.1223165f, +0.0048500f, -0.0126366f, +0.0493844f,
  +0.1696784f, +0.1708896f, -0.1383119f, -0.0430106f, -0.5133973f, -0.4417053f, -0.0616770f, +0.1225954f,
  +0.3838563f, +0.0825060f, -0.1164006f, +0.0946335f, -0.2083858f, +0.2432661f, +0.3559387f, -0.3368785f,
  +0.1510181f, +0.0932831f, +0.0485022f, +0.0352532f, +0.5603921f, -0.2366591f, +0.0070236f, -0.0494991f,
  +0.0282517f, -0.0062574f, -0.0123312f, -0.0135904f, -0.1244079f, +0.1997982f, +0.2508651f, -0.0686236f,
  -0.0057340f, +0.2983228f, -0.0136705f, +0.0082024f, -0.0914076f, -0.1607561f, -0.1037367f, +0.3569359f,
  -0.0382691f, -0.0463426f, +0.1067878f, +0.1106867f, +0.0034984f, +0.0396796f, -0.1478732f, +0.0294047f
);

const float biases[4] = float[4](
  -0.0169567f, +0.0466802f, +0.1447313f, +0.0154316f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer45 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1930276f, +0.0518474f, +0.0165619f, -0.1296078f, +0.3088950f, +0.1540154f, -0.0815572f, -0.1495862f,
  -0.0385880f, -0.4148666f, +0.0618792f, +0.0315949f, -0.0493105f, -0.1282853f, -0.0237492f, +0.1462409f,
  -0.1276428f, -0.0203265f, +0.1507975f, -0.0598314f, -0.0920706f, +0.1894765f, -0.0102727f, +0.0765575f,
  +0.4302503f, -0.3456933f, -0.2156974f, +0.5552267f, -0.7736519f, -0.0938667f, +0.3561149f, +0.1791350f,
  +0.3478821f, -0.1051963f, -0.0657876f, -0.0532477f, -0.4101411f, +0.2186615f, +0.2113240f, +0.0112770f,
  +0.2612692f, +0.2241007f, -0.0925492f, -0.0116198f, +0.0122230f, -0.0715972f, +0.0486662f, -0.0903547f,
  -0.0918801f, -0.2287532f, +0.0389291f, -0.3951683f, -0.3805635f, -0.3207847f, -0.3991293f, +0.3934917f,
  -0.3410924f, +0.0324891f, +0.1179409f, -0.0875746f, +0.2267878f, +0.2693473f, -0.2027692f, -0.0280533f,
  -0.0883371f, -0.3040572f, +0.3209269f, -0.0184886f, -0.0016722f, -0.0469529f, -0.0399153f, +0.0614772f,
  -0.0040051f, +0.0169180f, +0.0198630f, +0.1279645f, -0.2557750f, +0.0821634f, +0.0899327f, +0.0981336f,
  -0.1441530f, -0.0150793f, +0.3373104f, -0.1581669f, -0.2057072f, +0.0591469f, +0.0728690f, +0.1962834f,
  +0.2112409f, +0.2176738f, +0.0828949f, -0.1035662f, +0.1072434f, +0.0536218f, +0.0151489f, -0.0269301f,
  +0.0278682f, +0.2791716f, +0.1217382f, +0.1075932f, -0.3463661f, +0.0466848f, +0.0713092f, -0.1475116f,
  -0.0137488f, +0.2349084f, -0.1652664f, -0.1443042f, -0.1677548f, +0.1557700f, +0.4145950f, +0.4976108f,
  +0.0782028f, -0.1007054f, +0.2166989f, +0.2144372f, -0.0220453f, +0.3659661f, +0.2811086f, +0.1023505f,
  +0.2651978f, +0.2282318f, -0.1085036f, +0.4366314f, -0.3188101f, -0.0189125f, +0.0693278f, +0.2714991f,
  +0.2953591f, -0.0089090f, -0.3289542f, -0.0868643f, +0.1595316f, +0.0061452f, -0.1871322f, -0.0064318f,
  +0.0663033f, +0.0301677f, -0.1741222f, -0.2189683f, -0.0068341f, +0.0407150f, +0.0163457f, -0.0880395f,
  -0.0686905f, +0.0719447f, +0.2782090f, -0.1711006f, -0.0962033f, +0.3866156f, +0.2321430f, -0.2879384f,
  +0.1535599f, +0.0837744f, +0.0807391f, -0.1910526f, +0.2854662f, -0.0221650f, -0.0540072f, -0.1715411f,
  -0.1347414f, -0.2002939f, +0.1421549f, -0.0940833f, -0.0625869f, -0.1517791f, +0.0493101f, -0.0129985f,
  -0.1524182f, +0.1096025f, +0.1417277f, -0.0448996f, -0.0647063f, +0.0160010f, +0.0460154f, +0.0293505f,
  +0.2101701f, +0.3818679f, -0.0537839f, +0.3139322f, -0.1087704f, -0.0556109f, +0.2376221f, +0.0037854f,
  +0.2254178f, +0.0879092f, -0.0697521f, -0.0092744f, +0.0746697f, -0.0863048f, +0.0927449f, -0.0342537f,
  -0.0321500f, -0.0830884f, -0.1270200f, -0.1328967f, -0.3739166f, +0.2250911f, +0.2245950f, +0.4681190f,
  +0.1773865f, +0.2781097f, -0.0839877f, -0.0388415f, +0.2374932f, +0.0770022f, -0.1633713f, -0.0702663f,
  +0.0867637f, +0.0309626f, +0.0011489f, -0.0308317f, +0.0476772f, +0.0386236f, +0.0462980f, +0.1489516f,
  -0.0461052f, +0.1926132f, +0.0799303f, -0.0052360f, +0.0218288f, -0.0355991f, +0.0527592f, -0.0232490f,
  +0.1859743f, +0.0886632f, -0.2472153f, +0.0003578f, -0.1786172f, -0.0685389f, -0.1806857f, -0.1299198f,
  +0.0898965f, -0.5079227f, +0.0495486f, -0.1401519f, +0.2289874f, +0.1270200f, +0.0677372f, +0.2340093f,
  +0.2606756f, -0.1822430f, -0.0580707f, +0.0501099f, +0.0615046f, +0.1235189f, +0.0794412f, +0.0556035f,
  -0.0113512f, +0.1225727f, +0.4530833f, -0.1840841f, +0.7463363f, +0.3411972f, +0.6279138f, +0.1347776f,
  -0.0986783f, +0.4318751f, -0.5245385f, +0.1385872f, -0.2035920f, -0.2422029f, -0.3158895f, +0.2348233f,
  +0.0026466f, +0.0047806f, +0.0356319f, +0.0037072f, -0.0875823f, +0.0447058f, +0.0235781f, -0.1671944f,
  +0.0087709f, +0.1218922f, +0.1355885f, +0.0677116f, -0.2992076f, -0.1141409f, -0.1915736f, +0.1204362f,
  +0.0454635f, +0.1373803f, -0.2312253f, -0.0376352f, -0.0639093f, -0.0422252f, +0.1712306f, -0.1140008f
);

const float biases[4] = float[4](
  -0.0478977f, +0.0278999f, -0.0095994f, +0.0363548f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer45 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0636614f, +0.1137059f, +0.2661577f, +0.0140640f, +0.0947987f, -0.2412389f, +0.0432888f, -0.0757764f,
  -0.2693478f, +0.1414740f, -0.2588166f, -0.0187032f, +0.3191489f, -0.4017367f, -0.3788782f, -0.3703917f,
  -0.3215334f, -0.1122469f, -0.0735237f, -0.0404202f, -0.1521033f, +0.1880024f, -0.0301957f, +0.1897139f,
  +0.3763912f, +0.1684912f, -0.0735406f, +0.4894907f, -0.1698700f, -0.2453182f, +0.0971736f, +0.1784509f,
  +0.0813995f, +0.0018874f, -0.1797624f, -0.6822250f, -0.4785335f, -0.7803143f, -0.2471207f, +0.0846501f,
  +0.0347379f, +0.1421400f, -0.1758484f, -0.0695284f, -0.0473297f, -0.1868000f, +0.1438570f, +0.0259990f,
  -0.0244512f, +0.0808441f, -0.1160401f, +0.1177155f, +0.0411708f, -0.2397713f, -0.0050463f, +0.1256130f,
  -0.1990428f, -0.0788512f, +0.1766634f, +0.0794919f, -0.0565802f, +0.0543636f, +0.0945901f, -0.0642940f,
  -0.0432457f, -0.0376461f, +0.1326574f, +0.0194795f, -0.0456543f, -0.0137089f, -0.0809017f, +0.0341870f,
  +0.2147824f, -0.0837155f, -0.3048650f, +0.1056566f, +0.2056050f, -0.1629319f, +0.0101970f, -0.1679311f,
  +0.2714677f, +0.5674414f, -0.0596797f, +0.2527167f, -0.0010940f, +0.0398984f, +0.0380094f, -0.1819292f,
  +0.0199671f, +0.0928230f, +0.0082189f, +0.0615687f, +0.0987432f, -0.2006517f, -0.0993247f, +0.0655103f,
  +0.1101882f, +0.1006789f, +0.0722250f, +0.1420605f, +0.0653591f, +0.1229775f, +0.1758761f, -0.0124767f,
  +0.3064664f, -0.2975048f, -0.0515195f, -0.1104952f, +0.0258465f, +0.0786063f, +0.1549741f, -0.3705066f,
  +0.5700982f, +0.0921055f, +0.1298267f, -0.5301886f, -0.2086765f, +0.2818866f, -0.0950438f, +0.2844171f,
  -0.0058277f, -0.0973295f, +0.1700580f, +0.0270863f, -0.0844328f, +0.0986381f, +0.0854913f, -0.0074009f,
  -0.0623848f, -0.2539348f, -0.1349469f, +0.0224351f, -0.0094387f, +0.0175176f, -0.0169271f, +0.1781742f,
  -0.0766803f, +0.0163481f, -0.3141934f, -0.0673589f, +0.0201820f, +0.1629810f, -0.0446572f, +0.0859671f,
  -0.3231649f, -0.1393220f, +0.3563206f, -0.4105283f, +0.1168240f, +0.1046385f, -0.6251977f, +0.3326232f,
  -0.0645343f, +0.0847380f, -0.3972911f, +0.0306528f, +0.0746566f, -0.1305022f, -0.2599745f, -0.1840546f,
  -0.0518563f, +0.2817541f, +0.3030019f, -0.1901142f, -0.2466216f, -0.0869450f, -0.1620868f, -0.0976347f,
  +0.2275429f, -0.6876976f, +0.0357023f, -0.2629098f, -0.2722794f, +0.0286468f, -0.3129078f, -0.0244730f,
  +0.0752237f, -0.0392009f, -0.2212722f, -0.2137407f, -0.2692571f, +0.3484444f, -0.5428185f, +0.5673939f,
  +0.0417490f, -0.3638013f, -0.1977896f, +0.0364140f, -0.2705394f, -0.2001644f, -0.1185297f, +0.0855052f,
  +0.2191743f, -0.3865834f, +0.0366157f, -0.2297177f, +0.1507181f, +0.2096819f, -0.1112000f, -0.4583834f,
  +0.1482426f, +0.3360403f, -0.9440440f, +0.1333778f, +0.0897819f, -0.0341991f, +0.0046777f, -0.3176216f,
  -0.0857863f, +0.1213026f, +0.2762423f, +0.2849684f, +0.0261984f, +0.0760488f, -0.2292316f, -0.4970143f,
  +0.0810724f, -0.1822738f, -0.2077406f, +0.2251652f, -0.1971534f, -0.1528386f, -0.0528366f, -0.0901990f,
  -0.0863634f, +0.3443522f, +0.0066775f, -0.1572722f, +0.1588189f, +0.3163561f, +0.0072982f, +0.1068204f,
  -0.0315079f, +0.3544134f, +0.1515269f, -0.1329064f, -0.3252306f, -0.2703657f, -0.2107383f, -0.2858946f,
  -0.1515756f, +0.2478649f, +0.0180592f, -0.0324925f, -0.0080989f, +0.0333790f, -0.0709837f, +0.1628261f,
  -0.1162941f, +0.1207583f, +0.2548746f, -0.2532811f, +0.5198114f, +0.5007837f, +0.4053627f, -0.3407190f,
  -0.1128153f, -0.1665987f, +0.0808211f, +0.0725931f, -0.0283904f, -0.2996161f, +0.3418116f, -0.3366375f,
  +0.1008929f, +0.0907192f, +0.1280000f, +0.0565150f, +0.0033039f, +0.0815531f, +0.0565331f, +0.1119673f,
  +0.1133857f, +0.1635064f, -0.2210121f, -0.0465858f, +0.1858202f, +0.1947004f, +0.0727344f, +0.0283019f,
  +0.1307949f, +0.0957105f, +0.1358086f, -0.2113873f, -0.1240814f, +0.1377401f, +0.0151505f, +0.1118607f
);

const float biases[4] = float[4](
  -0.1936556f, +0.1115955f, -0.0056744f, +0.0700173f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer46 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1009694f, -0.3421626f, -0.0239876f, -0.0151144f, -0.0906198f, -0.0520817f, -0.0116431f, -0.0947901f,
  +0.1482938f, -0.1803390f, +0.1020032f, -0.1279444f, +0.0705385f, +0.0533540f, -0.3887324f, -0.2290773f,
  +0.1784496f, -0.2700372f, +0.3560067f, -0.1376749f, +0.0316888f, -0.0230374f, -0.3024170f, +0.1156848f,
  +0.0696162f, -0.0374469f, -0.2545539f, +0.1811521f, +0.0762963f, -0.7074788f, -0.1942760f, +0.2369233f,
  -0.0405624f, -0.1716288f, +0.0874494f, +0.0669501f, +0.3510879f, -0.1611950f, +0.2393492f, -0.0205459f,
  +0.2473836f, +0.2271929f, +0.3732910f, -0.0515722f, -0.1691989f, -0.2541944f, -0.1479861f, +0.1649417f,
  +0.1063046f, -0.0490772f, -0.1742620f, +0.1815311f, -0.0175702f, -0.0813892f, +0.0268172f, +0.1107825f,
  +0.0366786f, -0.2673120f, +0.1217008f, -0.1035288f, +0.0943788f, -0.3466105f, +0.0879837f, +0.0957361f,
  +0.2452701f, -0.0007704f, -0.0004295f, +0.0749338f, +0.0665596f, -0.3241248f, +0.3562109f, +0.1075679f,
  -0.1070643f, +0.1254960f, +0.0242763f, -0.0402623f, +0.2614287f, +0.1448303f, +0.0755281f, +0.0630640f,
  +0.4351470f, +0.0817128f, -0.1658083f, -0.0262188f, +0.0367189f, +0.2568387f, -0.3155635f, +0.1093533f,
  -0.1651607f, -0.0038117f, +0.1052348f, -0.0638651f, -0.1299959f, +0.1840086f, +0.2197679f, -0.0377153f,
  +0.1228570f, +0.0093914f, -0.1553342f, -0.3093114f, -0.0084632f, -0.1198719f, -0.0418881f, +0.4418617f,
  +0.1726398f, -0.2949741f, -0.1886847f, -0.3282459f, +0.6557472f, +0.2010554f, -0.5291617f, +0.0449924f,
  -0.3838182f, +0.0617559f, +0.1966863f, +0.1481311f, -0.0419604f, -0.0356729f, +0.0852596f, +0.0460585f,
  +0.4515605f, +0.1906102f, +0.4222398f, +0.4846897f, +0.2795599f, +0.1630516f, -0.2104592f, -0.4791857f,
  -0.2825764f, +0.0319174f, +0.0589460f, +0.0576650f, -0.1822651f, -0.3343065f, +0.0878334f, -0.2741959f,
  +0.0499775f, -0.0533659f, +0.1500061f, -0.0198669f, +0.0923333f, +0.3022231f, +0.0595409f, +0.2669873f,
  -0.1817243f, -0.2044965f, +0.1110589f, +0.0819011f, -0.1828354f, +0.0878151f, -0.0937268f, -0.0026298f,
  +0.0786106f, +0.4258495f, +0.1666884f, -0.2170023f, +0.1619941f, +0.2300094f, +0.7009111f, +0.0210341f,
  -0.2465826f, -0.0473269f, +0.2059561f, -0.1078310f, +0.0216662f, -0.2219667f, +0.4172508f, -0.0372893f,
  -0.1269403f, -0.2504227f, +0.1289345f, +0.2975835f, +0.1885329f, -0.0806521f, -0.1735210f, +0.1565163f,
  +0.1119214f, +0.0798380f, +0.3149023f, -0.7309273f, +0.3455938f, +0.2885957f, +0.1321016f, -0.2982421f,
  -0.2983598f, -0.3853262f, +0.3720287f, +0.0246586f, +0.0161147f, +0.0361708f, +0.0209434f, +0.4115239f,
  -0.2016447f, -0.1655993f, -0.1247294f, -0.2770458f, -0.1380256f, -0.0444632f, -0.0135164f, +0.0179406f,
  -0.0772503f, -0.2907539f, +0.0200267f, +0.1806224f, -0.0652188f, -0.0537762f, +0.2831677f, +0.0105779f,
  -0.0443238f, -0.2696539f, -0.1259947f, -0.0569411f, -0.1120485f, +0.1626272f, -0.0852402f, +0.4106573f,
  +0.0076493f, -0.0873266f, -0.0654914f, -0.0363659f, -0.1632603f, +0.0500134f, +0.0925710f, +0.0665720f,
  -0.0079506f, -0.0567932f, -0.1577987f, -0.0747565f, -0.1753252f, -0.0317962f, +0.2060446f, -0.0294737f,
  -0.3715096f, -0.2005085f, +0.3180542f, -0.0236107f, -0.2027472f, -0.1314140f, +0.4026925f, -0.1502787f,
  -0.2278639f, -0.4707607f, +0.3757384f, +0.0988938f, -0.1087153f, +0.4019966f, +0.0915202f, +0.0459435f,
  -0.0838536f, -0.1032690f, +0.2131488f, +0.4496082f, +0.5506708f, +0.2904248f, -0.0358038f, +0.3977190f,
  +0.0704759f, +0.1594570f, -0.2324153f, +0.1864534f, -0.1093322f, -0.1336820f, +0.4035474f, +0.0290973f,
  -0.0888366f, -0.3030193f, +0.0436708f, -0.0093858f, -0.0164921f, -0.0534171f, -0.0830828f, +0.3498632f,
  +0.1350076f, -0.1288560f, -0.0821478f, -0.3115329f, -0.1949207f, -0.1699234f, +0.0887608f, +0.2548077f,
  +0.0479318f, +0.0788447f, -0.0906349f, -0.1402558f, -0.1562585f, +0.0820991f, -0.1425627f, -0.0240931f
);

const float biases[4] = float[4](
  -0.0183820f, +0.0178413f, -0.0171109f, +0.0426410f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer46 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0108661f, -0.3143094f, -0.0233284f, +0.0481778f, -0.1798423f, -0.0594041f, -0.2180673f, +0.1412638f,
  +0.2758389f, +0.0130293f, -0.0019589f, -0.0210714f, -0.0878606f, -0.0294838f, -0.2117734f, -0.0627751f,
  -0.1464148f, +0.2119417f, +0.3717220f, -0.0428939f, -0.0345835f, +0.0784649f, -0.0721145f, -0.1817367f,
  -0.2852894f, -0.0939300f, +0.1054809f, +0.1975662f, +0.0441762f, +0.0526108f, -0.0359599f, -0.0465127f,
  -0.1945299f, +0.3339646f, +0.3683987f, -0.3693876f, +0.7743297f, -0.1401839f, +0.3424073f, -0.0661042f,
  -0.8026328f, +0.3699287f, +0.3412570f, -0.0126745f, +0.3875962f, -0.1461823f, -0.1311082f, -0.0688008f,
  -0.1599532f, -0.1554638f, -0.0029879f, -0.0405916f, +0.0532640f, -0.1662191f, +0.0495535f, +0.2147435f,
  -0.2136252f, +0.0926884f, +0.0063046f, -0.0340177f, +0.0095853f, +0.0698337f, -0.0716763f, +0.0786167f,
  +0.2592956f, +0.2137983f, +0.0198979f, -0.0163744f, -0.0125773f, -0.2011427f, -0.4485224f, +0.0793561f,
  -0.2051147f, -0.0138272f, +0.0154584f, -0.1101836f, +0.1394233f, -0.0378072f, +0.1537053f, -0.1241338f,
  +0.1335473f, +0.0043146f, +0.0514151f, +0.0376999f, +0.0173804f, +0.0180562f, +0.0066788f, -0.0824441f,
  -0.3372639f, -0.0478451f, -0.1134038f, +0.0643796f, +0.2871097f, +0.0883903f, +0.0251586f, +0.1287757f,
  +0.1312347f, -0.1271281f, +0.1383180f, +0.1762522f, +0.0586198f, -0.0496942f, +0.0096858f, +0.6619511f,
  +0.2036738f, +0.0112995f, +0.1816999f, -0.1980524f, +0.0749024f, -0.0162902f, -0.3554836f, -0.0505089f,
  -0.3483287f, -0.0643144f, -0.0239006f, -0.1533269f, -0.1044134f, +0.0692281f, -0.0998386f, +0.0189208f,
  +0.2082869f, -0.0632908f, +0.1354983f, +0.0979969f, +0.1778724f, +0.0525240f, +0.1402690f, +0.3303449f,
  +0.0131003f, +0.0576906f, -0.0945823f, +0.1174387f, -0.1153924f, +0.0858025f, +0.1272075f, -0.0626810f,
  -0.0814682f, -0.0790582f, -0.2543426f, +0.0764236f, +0.1037180f, +0.1296634f, -0.0838239f, +0.2049249f,
  +0.1737412f, +0.1479539f, -0.1496775f, -0.1987813f, +0.0965233f, +0.0031987f, -0.2053239f, -0.1387153f,
  +0.1339734f, +0.2583303f, +0.2943386f, +0.0809241f, -0.1549510f, +0.0979234f, +0.1604069f, -0.2918839f,
  +0.1898493f, -0.0991999f, -0.1349595f, +0.0191859f, -0.1529812f, -0.0220220f, -0.1764511f, +0.1561599f,
  -0.0477674f, -0.0301782f, -0.2215766f, -0.0393482f, +0.3268586f, -0.0870990f, -0.1143295f, -0.0586013f,
  +0.1205508f, -0.3488594f, -0.0005947f, -0.5964752f, +0.4853013f, -0.0298156f, +0.5094416f, -0.3151067f,
  +0.1571293f, +0.1520921f, +0.0821295f, +0.1453847f, -0.2221830f, -0.1536644f, +0.0286434f, +0.0012533f,
  +0.0668423f, +0.0098677f, -0.1383244f, +0.0934655f, +0.0170223f, -0.0434632f, +0.0495967f, -0.1292447f,
  +0.2210916f, +0.1530238f, -0.0065946f, +0.3389951f, +0.2830889f, -0.2155549f, +0.3100268f, +0.0699024f,
  +0.0793697f, -0.0183635f, +0.0245084f, +0.1332207f, -0.1288189f, -0.1562628f, -0.0603021f, +0.0369462f,
  +0.0507730f, +0.3286655f, +0.0148937f, +0.2526305f, -0.0201455f, +0.1491565f, +0.0502581f, +0.1660405f,
  -0.1728734f, -0.1259291f, -0.1541384f, -0.0894948f, +0.0161405f, -0.2319400f, -0.3731818f, -0.1512258f,
  +0.5567427f, -0.0587388f, -0.2058055f, -0.0438952f, -0.1472725f, +0.0544643f, +0.2204378f, -0.1452372f,
  -0.2101326f, +0.1992029f, +0.0485911f, -0.2452989f, +0.1525266f, -0.0992152f, +0.1899003f, +0.1024635f,
  +0.4226472f, -0.6885541f, +0.0874804f, +0.1416857f, -0.0814826f, +0.3158615f, +0.0040121f, +0.2140531f,
  +0.1819232f, -0.0756072f, +0.1501239f, -0.0544124f, +0.0031325f, +0.1303287f, +0.4135087f, -0.1328494f,
  +0.0258056f, +0.2573324f, +0.1121463f, -0.1313598f, +0.1072790f, -0.0830879f, -0.0414791f, -0.0097801f,
  +0.1610470f, +0.2882578f, +0.2672628f, +0.1903323f, +0.3300675f, +0.1842031f, -0.2238200f, +0.0162209f,
  -0.1402773f, -0.1107404f, +0.2759916f, -0.1400914f, +0.1444386f, +0.1959782f, -0.4127480f, -0.2202431f
);

const float biases[4] = float[4](
  -0.0718358f, +0.0190088f, -0.0107628f, +0.0741517f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer47 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1869263f, -0.1371360f, +0.0074940f, +0.0086235f, +0.1066606f, -0.1426101f, -0.0169886f, -0.0583565f,
  -0.0080133f, +0.0687245f, +0.0801392f, +0.0085651f, -0.1968041f, +0.0843935f, -0.1309597f, +0.2905218f,
  -0.1014850f, -0.1585258f, +0.2205915f, -0.0541146f, +0.0098160f, +0.1837085f, +0.1645437f, +0.0878165f,
  +0.4685071f, -0.2392341f, -0.1908143f, -0.1515387f, -0.1072761f, -0.1303013f, +0.0185784f, -0.3511606f,
  -0.1470142f, +0.0648470f, +0.0941190f, +0.7225358f, +0.0651347f, +0.1223605f, -0.2001603f, -0.1611995f,
  +0.5459670f, +0.1494299f, +0.1317848f, +0.1940556f, +0.1227187f, +0.0501368f, -0.0838390f, -0.0912680f,
  +0.2208769f, -0.1530386f, -0.1274122f, +0.0183291f, +0.1162452f, -0.3385282f, -0.0827275f, +0.1923467f,
  -0.6699085f, -0.3625936f, +0.4136357f, -0.5403174f, -0.2109015f, -0.1618294f, +0.2395535f, -0.3787817f,
  +0.4539546f, -0.0745863f, +0.0480714f, -0.3245586f, +0.0111661f, -0.0295122f, -0.4924278f, -0.2542854f,
  -0.0547003f, -0.2609346f, -0.1378543f, -0.1451232f, +0.0232473f, -0.0160288f, -0.0960953f, +0.0343129f,
  +0.1212623f, -0.5220490f, -0.2817802f, +0.1862036f, +0.0013765f, -0.1033472f, -0.0044254f, +0.0825008f,
  +0.0322739f, +0.4545496f, -0.0916450f, -0.1587337f, -0.1937743f, +0.0698525f, -0.1909371f, -0.0347434f,
  +0.1448305f, +0.0677682f, +0.1362694f, +0.3569362f, -0.1925111f, -0.0717368f, -0.0695093f, -0.3506511f,
  +0.0727730f, -0.3655824f, -0.2801800f, -0.5828288f, -0.1465318f, +0.2460077f, -0.2255270f, -0.0700841f,
  +0.1607480f, +0.1478632f, -0.4514558f, -0.1231022f, -0.1841962f, -0.0848411f, -0.2951430f, +0.3903655f,
  -0.0704090f, +0.1385872f, +0.0532713f, -0.0616356f, -0.0829586f, +0.1236770f, +0.1330833f, +0.1140418f,
  -0.5617838f, -0.0495867f, +0.1207002f, -0.2604839f, -0.2207666f, +0.3174159f, -0.1421301f, -0.0118253f,
  +0.0285161f, +0.0281213f, -0.0333435f, +0.0894355f, -0.0128335f, +0.0922663f, -0.3216231f, -0.0058650f,
  +0.3953261f, -0.6887826f, -0.1054365f, -0.0882154f, -0.1939614f, +0.2280054f, +0.0150091f, -0.1938525f,
  -0.0151954f, +0.1758233f, -0.2470614f, +0.2152456f, -0.5012642f, -0.2388724f, +0.1418017f, -0.2450986f,
  -0.0806780f, +0.2477273f, -0.4363180f, +0.4202811f, -0.1240915f, -0.0479538f, -0.1362179f, -0.5997099f,
  +0.6347383f, -0.5332655f, -0.1359188f, -0.1957726f, -0.2703109f, -0.2607553f, -0.4563016f, -0.1696971f,
  +0.1128290f, -0.1493678f, +0.3575648f, +0.1044354f, +0.1173479f, -0.0002447f, -0.4048318f, -0.3774943f,
  -0.2279948f, -0.2534095f, -0.1906921f, +0.0471765f, -0.4853903f, -0.0653102f, -0.1202464f, +0.0107138f,
  +0.2635702f, -0.1912650f, +0.6564279f, +0.1348111f, -0.3382812f, -0.2558995f, -0.4819396f, +0.2336704f,
  +0.8976416f, +0.4748852f, -0.1687945f, -0.0153083f, -0.0469953f, -0.5241109f, -0.2649900f, -0.5225894f,
  -0.3153638f, +0.0793683f, +0.1938063f, +0.4427966f, +0.2419768f, -0.1936623f, +0.0050348f, -0.2065830f,
  -0.0847113f, +0.2455948f, +0.1031394f, -0.1103357f, +0.1487735f, -0.0058378f, +0.0042179f, +0.0779525f,
  -0.0606655f, -0.1282195f, -0.4453819f, -0.3576083f, +0.2434905f, -0.3491493f, -0.2175985f, -0.1080632f,
  -0.1247586f, +0.0782408f, -0.4348730f, -0.0416048f, -0.0447581f, -0.0792384f, -0.1525187f, +0.3006164f,
  -0.0115140f, +0.0027166f, -0.1092164f, +0.1611643f, +0.2810133f, +0.0253125f, -0.1376070f, +0.0474221f,
  +0.2939359f, -0.1195746f, +0.3546946f, +0.4248507f, +0.2978815f, +0.1123463f, +0.0273610f, +0.0809175f,
  -0.3209099f, -0.1227241f, +0.1351794f, +0.2114528f, +0.0958887f, -0.1468401f, +0.1898216f, +0.0028179f,
  -0.0387326f, -0.0756697f, -0.0554212f, -0.1832963f, -0.1826607f, +0.1114394f, -0.2412316f, -0.2138107f,
  +0.2263653f, +0.1055301f, +0.1163680f, -0.0319833f, -0.1309469f, +0.0845772f, -0.0765864f, +0.1880262f,
  -0.3427148f, +0.0996921f, -0.0819931f, +0.0686242f, -0.0142089f, -0.1135380f, +0.0139443f, +0.0676774f
);

const float biases[4] = float[4](
  +0.0169320f, +0.0952439f, -0.2048188f, +0.0504388f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer47 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2965482f, -0.0332785f, +0.0500074f, +0.2614996f, +0.2279281f, -0.4593024f, -0.0952144f, -0.0602078f,
  +0.2775977f, -0.1129468f, -0.3308931f, +0.1433854f, +0.2084426f, +0.0486478f, -0.0889216f, +0.0066230f,
  -0.0017802f, +0.0042266f, -0.0070680f, +0.0400298f, -0.0487310f, +0.1068586f, -0.1349812f, +0.0479265f,
  +0.2704539f, -0.1997785f, -0.3680815f, +0.1248749f, +0.1271544f, -0.5338067f, -0.0750903f, -0.1320707f,
  +0.0734758f, -0.2839777f, -0.1122345f, +0.4389554f, -0.0351510f, +0.1683324f, +0.4105477f, -0.1010700f,
  +0.1681352f, -0.0387103f, -0.2452885f, +0.0207867f, -0.0443912f, +0.3959227f, -0.0242394f, -0.0321535f,
  +0.1621320f, -0.0216354f, +0.2748080f, +0.2549421f, +0.1773202f, -0.1761088f, -0.3583481f, -0.1460071f,
  +0.1427839f, -0.1665879f, -0.0196932f, -0.5335937f, +0.1683763f, -0.2191232f, +0.1314541f, -0.0933136f,
  -0.0611431f, -0.1362255f, +0.3165480f, -0.0930996f, +0.0767044f, +0.0127858f, -0.0796508f, +0.2573516f,
  -0.0434689f, -0.1222581f, -0.1996181f, -0.0127742f, +0.1150051f, +0.0343908f, -0.0230601f, -0.0089253f,
  -0.0611211f, -0.0056703f, -0.0582735f, -0.0478411f, +0.2697682f, +0.4081683f, +0.2650509f, +0.1945147f,
  +0.0989397f, -0.0678863f, +0.3496902f, -0.0499247f, +0.2763493f, +0.2410622f, +0.0725414f, +0.1681693f,
  -0.0957277f, +0.2531659f, -0.4038024f, +0.0054385f, +0.0008810f, -0.4608382f, -0.1571126f, -0.2622978f,
  -0.0980387f, +0.0362110f, -0.0417129f, +0.5036948f, -0.0414167f, +0.0811507f, -0.2574188f, +0.2005188f,
  -0.0036676f, -0.0651163f, +0.0295790f, -0.0154954f, +0.3685958f, +0.0991376f, -0.0171121f, +0.2505280f,
  -0.1206947f, -0.0729682f, -0.0369858f, -0.0331634f, +0.2044412f, +0.0714290f, +0.0521253f, -0.1171815f,
  +0.1454242f, -0.0091495f, +0.1581000f, +0.2281342f, +0.0248605f, -0.1955892f, -0.0586387f, +0.1703196f,
  -0.1023758f, +0.0724913f, +0.1714489f, -0.0222383f, -0.1212630f, -0.0097023f, -0.0318540f, +0.0401763f,
  -0.1022948f, -0.0353924f, -0.0602732f, +0.1468037f, +0.1139564f, -0.2089262f, -0.0752430f, +0.0448639f,
  -0.2305283f, -0.1035284f, -0.1944814f, +0.1447248f, +0.1166170f, +0.3962696f, +0.2808785f, +0.2967007f,
  -0.1312319f, +0.0518670f, +0.1554758f, +0.0407645f, +0.0329608f, +0.0471841f, -0.0112884f, +0.1387719f,
  -0.1275201f, +0.1111090f, +0.5078216f, -0.0013830f, +0.0180656f, +0.1568790f, +0.1812253f, +0.1797755f,
  -0.1288345f, +0.0940589f, +0.2337147f, -0.0593440f, -0.0099740f, +0.1254943f, +0.2364020f, -0.3032811f,
  +0.1365885f, -0.1475614f, +0.1513466f, +0.0105913f, +0.5778299f, -0.1622127f, +0.1705707f, +0.1059760f,
  +0.2226538f, +0.0832479f, +0.0920430f, +0.2722421f, -0.2393410f, +0.1009656f, +0.3680169f, +0.2644539f,
  +0.2403656f, -0.0424649f, +0.0386638f, -0.2059522f, +0.0205962f, -0.2871580f, +0.0721837f, -0.0683893f,
  -0.1759430f, +0.0571333f, +0.0387496f, +0.1720076f, -0.0159830f, -0.1246670f, +0.0718180f, +0.1877041f,
  +0.0078290f, -0.1472166f, +0.0899646f, -0.3716617f, -0.0606223f, -0.2125990f, -0.1973867f, -0.1127290f,
  -0.0836687f, -0.4852170f, +0.0465755f, -0.1169195f, +0.3979462f, -0.4578998f, -0.4451712f, -0.2112599f,
  +0.0426799f, +0.0739287f, -0.0923944f, +0.3133229f, -0.2547018f, +0.0218248f, -0.2036255f, -0.1930695f,
  +0.2535250f, -0.0323554f, +0.3266553f, +0.3268393f, -0.0699277f, -0.3072498f, +0.0771040f, -0.5218552f,
  -0.2539529f, -0.3455799f, -0.2381647f, -0.4427091f, -0.3764390f, -0.3568617f, -0.0910806f, -0.1779626f,
  +0.7813261f, -0.5128736f, -0.3469631f, -0.2244688f, +0.1748217f, +0.3651318f, -0.0994378f, -0.1148472f,
  +0.0764498f, -0.3201312f, -0.5106720f, -0.2679567f, +0.2109248f, -0.2671002f, +0.0024517f, +0.0346561f,
  +0.0097415f, +0.1510006f, -0.4211231f, +0.1895258f, -0.5648302f, -0.2148129f, -0.1429901f, -0.1573970f,
  +0.1349935f, -0.7816595f, +0.3067825f, -0.3272688f, -0.0995480f, +0.1221955f, -0.2383430f, -0.3641077f
);

const float biases[4] = float[4](
  +0.0388235f, +0.0852097f, +0.0987100f, +0.0436809f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer48 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1448441f, +0.0899037f, +0.1804997f, +0.2146107f, +0.1535357f, +0.1698567f, +0.3925404f, -0.1769541f,
  -0.1898654f, +0.4518731f, -0.6786940f, -0.1305293f, +0.1348627f, +0.0569776f, -0.0956735f, -0.0006754f,
  +0.1976714f, +0.1936471f, -0.2855700f, +0.0467567f, +0.0667380f, +0.2882875f, -0.1834167f, -0.0247578f,
  +0.1539358f, +0.2517529f, +0.1410507f, +0.2632472f, +0.0047068f, -0.1079250f, +0.0670862f, -0.7597266f,
  -0.2646804f, -0.4474731f, +0.0077130f, -0.2204840f, -0.1027398f, +0.1059630f, -0.1200488f, +0.6129437f,
  +0.1389617f, -0.1246499f, +0.0905449f, +0.0582869f, -0.3498988f, +0.0486255f, +0.2434676f, -0.2474799f,
  -0.0580214f, +0.1175973f, -0.2697457f, +0.1033972f, +0.1480104f, -0.4324638f, +0.2039559f, +0.1705804f,
  +0.1177340f, -0.2238272f, +0.0165465f, +0.2925171f, -0.1087365f, +0.0428208f, +0.2091809f, +0.1086382f,
  -0.2983553f, +0.0167654f, -0.1966509f, -0.0036328f, -0.0500281f, -0.1228889f, +0.0031839f, -0.0372954f,
  -0.2397725f, +0.2022151f, -0.1236073f, -0.1339685f, -0.1079715f, -0.0149134f, +0.0932023f, +0.0323984f,
  -0.2182283f, +0.1737906f, -0.5992119f, -0.1463870f, -0.0235579f, -0.0601797f, -0.0962201f, +0.3131978f,
  +0.2787201f, -0.0044208f, -0.0973147f, +0.0121353f, -0.2803226f, -0.0757174f, -0.0257372f, -0.4802384f,
  +0.7199427f, +0.0497588f, -0.0910347f, -0.0837222f, +0.1433078f, +0.0228108f, -0.2852039f, -0.3697004f,
  -0.5166824f, +0.2117971f, -0.1868389f, -0.1262751f, -0.1169504f, +0.0554198f, +0.4949172f, +0.4612675f,
  -0.0661873f, -0.0825092f, +0.6540800f, -0.1884162f, -0.5663025f, -0.0904346f, +0.0409349f, +0.2084163f,
  -0.3324544f, -0.4279752f, -0.2814487f, -0.0182245f, -0.1677067f, -0.1808827f, -0.3684414f, -0.2536177f,
  +0.4206990f, +0.1453699f, +0.0014079f, +0.0514825f, +0.0426981f, -0.0056574f, -0.1466113f, +0.3335836f,
  -0.2073638f, +0.1635029f, +0.8243732f, -0.3053743f, -0.1546715f, +0.1055523f, -0.2914515f, -0.5060192f,
  +0.1332928f, -0.2030691f, +0.0709052f, +0.1830321f, -0.1471867f, -0.1027056f, -0.1218852f, -0.2453504f,
  -0.3052459f, -0.1776143f, +0.0123892f, -0.1568947f, +0.0611935f, -0.1963305f, +0.0517040f, +0.1959641f,
  +0.2576200f, +0.0679194f, -0.3364473f, +0.0163650f, -0.0750863f, +0.2071244f, -0.0393949f, -0.1499986f,
  -0.3851948f, +0.3422876f, -0.2719361f, -0.1458354f, +0.2198676f, +0.2001182f, +0.1524156f, +0.2823962f,
  -0.0600681f, -0.0810648f, +0.0947606f, -0.0271059f, -0.1543968f, +0.3755158f, -0.1827402f, +0.2828086f,
  +0.0479564f, +0.0842850f, -0.1503422f, +0.0647917f, +0.4859540f, +0.4528775f, -0.4206126f, +0.4104349f,
  +0.1215637f, -0.1170979f, +0.2984423f, +0.1301900f, +0.1322063f, -0.1320300f, -0.0333043f, +0.0503400f,
  +0.1307001f, +0.2075076f, +0.1796460f, -0.0675020f, +0.0864223f, +0.1223385f, +0.0299490f, -0.2004641f,
  -0.0297515f, +0.2004864f, +0.1311108f, -0.0390201f, +0.1974855f, +0.5153788f, +0.0383652f, -0.4804419f,
  +0.0125584f, -0.1106804f, -0.3539583f, +0.0451512f, -0.4101701f, +0.0502240f, -0.2772971f, -0.0171609f,
  -0.1409210f, -0.1846726f, +0.0194906f, -0.2038752f, -0.0373149f, -0.1829065f, +0.0094084f, +0.1161822f,
  -0.0448636f, +0.0737621f, -0.7744838f, +0.1237585f, +0.0261992f, +0.0484801f, -0.0565103f, -0.2828484f,
  +0.2338300f, +0.1833935f, -0.3321269f, -0.3305875f, -0.2851892f, +0.0659236f, +0.0678494f, +0.3961668f,
  +0.4244720f, -0.0836671f, -0.4954492f, -0.3942710f, +0.0026997f, +0.1374891f, +0.3021370f, -0.0010008f,
  +0.0217305f, -0.3916769f, -0.0179077f, -0.1959066f, +0.0599319f, -0.1000504f, -0.0008372f, -0.0293361f,
  -0.2235210f, +0.1707871f, -0.1780067f, -0.0291590f, -0.1048371f, -0.0008554f, -0.1322622f, -0.1640565f,
  -0.2362779f, +0.0118112f, -0.2676107f, +0.2967316f, -0.1329934f, +0.1255363f, -0.2650504f, -0.2321927f,
  -0.0555823f, -0.0119373f, -0.2191635f, -0.0456022f, -0.0203780f, -0.0670070f, -0.3850061f, +0.0059852f
);

const float biases[4] = float[4](
  -0.0773941f, -0.0478592f, -0.0168033f, -0.0578348f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer48 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1565137f, +0.0538504f, -0.2766522f, +0.0888467f, -0.1743372f, +0.1658926f, -0.1021342f, -0.0766566f,
  -0.1087639f, +0.2193809f, -0.0664599f, -0.1327512f, +0.0175799f, +0.0952181f, +0.0492487f, +0.3294074f,
  -0.1985885f, +0.2501492f, +0.1035749f, +0.1682253f, +0.0948150f, -0.1305314f, +0.3820992f, -0.2286405f,
  +0.0021451f, +0.2702451f, +0.2947561f, -0.2153464f, -0.0092769f, -0.1733433f, -0.3040795f, +0.0154404f,
  -0.3791605f, +0.2114591f, -0.0696232f, -0.2672070f, -0.0631112f, -0.1845920f, +0.0263512f, +0.4576325f,
  -0.1601519f, +0.1634723f, +0.1658335f, -0.2799132f, +0.1595187f, -0.1214855f, +0.0308840f, -0.1076154f,
  -0.0142341f, +0.1364897f, -0.0814518f, +0.0612029f, +0.0761518f, -0.0737717f, +0.0519575f, +0.2965594f,
  -0.0285109f, +0.0162547f, +0.1663690f, -0.3388853f, +0.0308952f, -0.1096188f, -0.0539858f, +0.0246504f,
  -0.0684956f, +0.0390298f, -0.0902931f, -0.0839877f, -0.1115900f, -0.3829785f, +0.0571314f, -0.0223566f,
  +0.1039116f, +0.0639364f, +0.1862546f, -0.1294449f, -0.0633698f, -0.1960966f, +0.0198507f, -0.2254834f,
  -0.0728837f, -0.1221984f, +0.1487035f, +0.2188854f, -0.0293928f, +0.0814846f, -0.0981142f, +0.0117922f,
  -0.2954949f, +0.0201996f, +0.3871298f, -0.2055035f, -0.1323327f, -0.0801184f, -0.1262794f, -0.0102363f,
  +0.3654978f, +0.0805653f, -0.1043639f, -0.0158514f, -0.1110917f, +0.0616259f, +0.2968068f, -0.2107531f,
  +0.2988467f, -0.1901485f, -0.1635795f, +0.1541635f, +0.2612194f, +0.0622009f, +0.1501854f, -0.2765348f,
  -0.2103416f, +0.0342120f, -0.1250632f, +0.0787620f, +0.2817698f, +0.3615611f, -0.1021245f, -0.0136530f,
  +0.1825472f, +0.0324237f, -0.4031788f, -0.0863531f, +0.0310123f, -0.3368770f, -0.0114900f, +0.0166122f,
  -0.2023337f, +0.2130415f, +0.0512310f, +0.1083074f, +0.1606276f, -0.3587029f, -0.1952435f, -0.1475265f,
  +0.2299028f, -0.1127065f, -0.1088462f, +0.0932065f, +0.0364271f, -0.1057864f, +0.0942016f, +0.1556935f,
  -0.4543536f, +0.2203235f, -0.1434025f, +0.0573153f, +0.0853507f, +0.0297278f, +0.1959935f, -0.3365933f,
  +0.2574663f, +0.1208773f, +0.0995687f, -0.0286962f, -0.0207038f, +0.1062723f, +0.2251156f, -0.0728918f,
  +0.5624687f, -0.1988401f, +0.1451362f, +0.0910690f, +0.4787323f, -0.0329775f, -0.2686617f, +0.1740857f,
  -0.0220037f, +0.2184957f, -0.1014940f, +0.1029791f, -0.0162349f, +0.1416307f, -0.0846555f, +0.0561982f,
  -0.5623685f, +0.2151647f, +0.0650000f, -0.4348690f, -0.1899263f, -0.0550641f, -0.1958539f, -0.1330905f,
  +0.4575588f, -0.1959174f, +0.0627505f, +0.1816199f, -0.0711200f, +0.0999744f, +0.0756147f, -0.1051528f,
  -0.1463980f, +0.1759327f, -0.0322645f, +0.0876787f, +0.1882029f, +0.0369774f, +0.0703845f, +0.0281088f,
  -0.3049486f, -0.0066500f, -0.4762666f, +0.1254677f, +0.1542113f, -0.3931997f, -0.0781566f, +0.3937994f,
  +0.1745971f, +0.0284106f, -0.0000703f, +0.0625524f, -0.1357200f, -0.0925423f, -0.0215940f, +0.1370339f,
  -0.1470674f, +0.1319909f, +0.1800208f, -0.0677931f, +0.0034754f, +0.1759127f, +0.0570893f, +0.1814554f,
  +0.0062544f, +0.1245541f, +0.0753763f, -0.2204665f, +0.2361975f, -0.0634705f, -0.1353785f, -0.0386741f,
  -0.1034252f, -0.1124294f, -0.1851353f, +0.1022613f, -0.3288988f, -0.0148904f, -0.0170613f, -0.4257215f,
  +0.2404285f, -0.0669024f, -0.0909898f, -0.1211461f, -0.0817312f, +0.1225984f, +0.0865876f, -0.0424910f,
  -0.3736241f, +0.0695255f, +0.2343458f, -0.0748472f, +0.1291271f, -0.1023144f, +0.3617163f, -0.0887159f,
  -0.2852469f, +0.4081599f, +0.2302601f, -0.1338194f, +0.6796735f, +0.2222056f, +0.0229028f, +0.3497316f,
  +0.0112229f, +0.0806452f, -0.1101428f, -0.0616954f, +0.0248277f, +0.1588125f, -0.1517288f, +0.2813522f,
  +0.1377295f, -0.2686234f, -0.0854007f, -0.0485046f, -0.0950377f, -0.1423800f, -0.0901088f, +0.3494621f,
  +0.1128499f, -0.1165671f, +0.4634657f, +0.0077020f, -0.1042682f, +0.0613093f, -0.1488791f, -0.1936700f
);

const float biases[4] = float[4](
  +0.0224150f, -0.0131603f, -0.0377261f, +0.0553722f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer49 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1567433f, +0.1224798f, +0.3310124f, +0.2431742f, -0.2656547f, -0.0781714f, +0.0276866f, +0.1810705f,
  -0.0021285f, +0.2998427f, +0.4101582f, +0.2094419f, +0.1306336f, +0.1399674f, +0.1613032f, +0.0272619f,
  +0.0265556f, +0.1206436f, +0.0687471f, +0.0759609f, +0.2593392f, +0.2989938f, -0.0739891f, -0.0332437f,
  +0.0510775f, +0.0569420f, +0.0573895f, -0.0370103f, -0.2589763f, -0.0494780f, -0.1008050f, +0.2599603f,
  +0.0691244f, -0.1508041f, -0.8538278f, +0.2642556f, -0.2285747f, -0.0230940f, +0.2115452f, +0.1470227f,
  +0.1142612f, +0.4318874f, -0.1604660f, -0.1817375f, -0.0722146f, +0.2908240f, -0.0686104f, +0.3594902f,
  -0.0947059f, -0.0719386f, +0.1396089f, -0.0048285f, +0.0772630f, +0.0831056f, +0.0183791f, +0.1597009f,
  -0.0282365f, -0.1587124f, +0.2086536f, -0.0612911f, +0.0859722f, -0.0316269f, +0.0059175f, -0.1322839f,
  +0.0589662f, +0.1207847f, -0.2393725f, -0.1268579f, -0.2893822f, +0.0647521f, -0.0404887f, +0.0526980f,
  +0.3208991f, -0.3025913f, -0.2205171f, -0.1013107f, -0.2429483f, +0.0483120f, -0.1018389f, -0.5833360f,
  +0.3077173f, -0.0242934f, +0.1404354f, -0.1256007f, -0.4109240f, +0.0135215f, -0.1314936f, -0.3016606f,
  +0.5319515f, -0.3299510f, +0.0344609f, -0.1661711f, -0.1909561f, -0.1122877f, -0.1216874f, -0.3763405f,
  -0.5703278f, +0.3689699f, -0.1828291f, -0.0836328f, +0.3236267f, +0.3022442f, +0.2566975f, +0.1027900f,
  -0.6212630f, +0.4951760f, -0.1607356f, +0.0421673f, +0.3132543f, +0.7973152f, +0.3794291f, -0.1024561f,
  -0.2676229f, -0.1734831f, +0.2376396f, -0.0994926f, +0.0958795f, -0.0110812f, +0.0417121f, -0.0742133f,
  +0.2513559f, -0.2304424f, -0.3256079f, +0.1251066f, +0.0088497f, -0.3304467f, +0.0422879f, -0.0318014f,
  +0.2113194f, -0.2426453f, +0.1567911f, +0.0100442f, +0.0783920f, -0.4209205f, +0.1083089f, +0.0675490f,
  +0.1041435f, -0.0083969f, -0.0267845f, -0.0591587f, +0.0874697f, -0.4662722f, +0.1697933f, -0.0202216f,
  -0.0135721f, -0.0236599f, +0.0455826f, -0.0357923f, -0.0799203f, -0.0762321f, -0.0400602f, +0.0153545f,
  -0.2414037f, +0.1166859f, -0.0157727f, +0.0550940f, +0.0936538f, -0.0108972f, +0.1260746f, +0.0901757f,
  +0.0679627f, +0.1190457f, +0.0276964f, +0.0185832f, -0.0125037f, -0.0773962f, -0.0716285f, -0.0503547f,
  +0.1486380f, -0.1666264f, -0.0152326f, +0.4110701f, -0.3113723f, -0.0240398f, +0.0152722f, +0.2601045f,
  +0.1105000f, +0.5336490f, -0.2701656f, -0.1410903f, +0.3491138f, +0.1418237f, +0.0596660f, -0.3854262f,
  +0.0629722f, -0.4010431f, +0.1077621f, -0.1411191f, +0.0646430f, -0.1687020f, +0.2058305f, +0.2525828f,
  -0.2041852f, -0.0015453f, +0.2520553f, -0.2540731f, -0.0373044f, +0.3595537f, +0.1010260f, -0.0035063f,
  -0.1880794f, -0.0355027f, +0.0067392f, +0.2114593f, -0.4090055f, -0.1253255f, -0.0878458f, +0.4524662f,
  -0.0408206f, +0.2672303f, -0.0373083f, -0.0171256f, -0.0957768f, +0.2584047f, +0.0019148f, +0.0385761f,
  +0.2004987f, +0.0140109f, +0.0315041f, +0.1767836f, -0.1961196f, -0.0256714f, +0.1553372f, -0.5608553f,
  -0.1174576f, +0.2251024f, +0.5148882f, +0.2927595f, +0.1007634f, +0.1940963f, +0.4584357f, -0.4623168f,
  +0.1497106f, +0.1096840f, +0.1213273f, +0.1307379f, +0.1749225f, -0.0371292f, +0.1941956f, -0.3220891f,
  -0.0158424f, -0.1401886f, -0.6859732f, -0.2498671f, -0.4826650f, +0.1167257f, +0.0739192f, +0.2864869f,
  +0.3245101f, -0.5429369f, -0.7300989f, -0.8082237f, -0.8863398f, -0.1008084f, -0.0799352f, +0.3114837f,
  +0.1118077f, -0.3916575f, +0.4060233f, -0.5114461f, -0.2296643f, -0.2221519f, +0.1229655f, +0.0853419f,
  -0.1433869f, -0.0052365f, +0.0663957f, +0.1078552f, +0.0424713f, -0.0433840f, +0.0207450f, +0.0495580f,
  -0.3431199f, +0.2672210f, +0.1341197f, +0.1132179f, +0.0477955f, +0.1959098f, -0.0184906f, -0.0982872f,
  -0.0061031f, -0.1179474f, +0.0239486f, +0.1548243f, +0.1968066f, -0.1733021f, -0.0324869f, +0.0197264f
);

const float biases[4] = float[4](
  +0.0532226f, -0.0428553f, +0.0445270f, -0.1067169f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer49 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1527936f, +0.0866414f, -0.3253171f, +0.3755087f, +0.2507733f, -0.2505486f, +0.1612278f, -0.0709222f,
  +0.3409480f, -0.0284085f, -0.2214300f, +0.2087152f, -0.2207920f, +0.1880943f, +0.0047358f, -0.2431450f,
  -0.0135489f, +0.1047020f, -0.0867426f, -0.0790108f, +0.0675386f, +0.3058698f, +0.0497602f, -0.1306028f,
  -0.0655057f, +0.4339194f, +0.3035820f, +0.1132564f, +0.0137321f, -0.0038775f, +0.4700994f, -0.0424458f,
  +0.0625864f, -0.0881647f, -0.5715319f, -0.1524920f, +0.0630648f, -0.3093353f, +0.2346984f, +0.2840012f,
  +0.3067276f, +0.1148578f, -0.1673850f, -0.0020977f, -0.1935992f, +0.0916002f, +0.2321927f, +0.1161285f,
  -0.1441817f, +0.1265633f, +0.2002917f, +0.0127431f, +0.0226491f, +0.1832155f, +0.1055433f, +0.1048489f,
  -0.2929147f, -0.0704497f, -0.4498678f, +0.3272412f, -0.1434186f, +0.1200445f, -0.2820072f, -0.1115919f,
  -0.1221519f, +0.0262359f, -0.2009366f, -0.0829933f, -0.0428931f, +0.0112058f, +0.0018908f, +0.1298491f,
  +0.3695298f, -0.2607348f, -0.0244486f, +0.1191107f, -0.0847357f, +0.1554190f, +0.1458859f, +0.1704911f,
  -0.1981217f, +0.1636153f, +0.1124026f, -0.2956364f, -0.0862415f, +0.1500606f, -0.0367607f, -0.0952592f,
  -0.2179635f, -0.0405772f, +0.0320805f, +0.0628105f, +0.2475052f, -0.1509366f, +0.0459599f, +0.1147654f,
  -0.0884506f, -0.4039471f, +0.0119880f, -0.2913649f, +0.2860594f, +0.0890784f, -0.0409857f, +0.6133419f,
  -0.4109890f, +0.1677619f, -0.0720013f, +0.5202138f, -0.1202882f, -0.0555728f, -0.4335710f, -0.2191017f,
  +0.1250993f, +0.2030631f, +0.2015940f, -0.2307089f, -0.0325441f, -0.1581911f, +0.1442887f, -0.2540753f,
  -0.5949381f, -0.0549662f, -0.0296584f, -0.2959329f, +0.2248816f, -0.2901373f, -0.0662370f, +0.0173255f,
  -0.1611020f, -0.2084367f, +0.2554801f, +0.2083519f, +0.0670813f, -0.1426489f, -0.2695534f, +0.2863340f,
  +0.0661576f, -0.1427653f, +0.3418859f, +0.1130555f, -0.0472016f, +0.0752569f, -0.1984281f, -0.2480467f,
  -0.0263250f, +0.0002257f, -0.0909453f, +0.4051738f, +0.1864906f, -0.0826287f, +0.2219902f, -0.1153089f,
  +0.5868589f, +0.3244062f, +0.1483942f, -0.4874236f, -0.2665984f, -0.0015883f, -0.1248363f, -0.6098374f,
  -0.0691467f, -0.2672083f, +0.2061447f, +0.0704383f, +0.2594981f, -0.1112186f, +0.1531283f, +0.1406617f,
  +0.1594531f, -0.0483469f, -0.7347280f, +0.2010547f, +0.1299132f, -0.1350868f, +0.3031954f, -0.1108448f,
  +0.3684117f, -0.1446647f, +0.1764720f, -0.4168163f, -0.4884954f, +0.0422135f, -0.5337906f, -0.2921520f,
  +0.0591713f, -0.0012259f, +0.1082200f, +0.1990369f, +0.1078422f, -0.0979617f, +0.1643276f, -0.1665258f,
  -0.3950486f, -0.0853295f, -0.2516142f, -0.1261600f, +0.0743861f, +0.0516275f, -0.0006935f, +0.0869318f,
  +0.5568691f, -0.1948170f, -0.2527689f, +0.4596909f, +0.0397111f, +0.0805710f, -0.2295730f, -0.3512234f,
  +0.2118145f, -0.1169649f, +0.1127723f, -0.1998400f, +0.2637880f, -0.1938723f, +0.1690531f, -0.0165812f,
  -0.0349008f, +0.0656672f, +0.0083285f, -0.2926315f, +0.0642788f, -0.0859717f, -0.1226133f, -0.0876247f,
  -0.0263524f, -0.2763651f, -0.0011182f, +0.0486855f, -0.0916825f, +0.1240081f, +0.1034301f, +0.1500291f,
  +0.1453251f, +0.0853712f, +0.0560005f, -0.0291563f, -0.0002904f, +0.0795808f, +0.1000380f, -0.0259937f,
  -0.1879452f, -0.1455406f, -0.2338399f, -0.6348194f, +0.2170938f, -0.1848972f, -0.9022244f, -0.0876762f,
  +0.0885007f, +0.0917920f, +0.1233051f, +0.0132600f, +0.0735363f, +0.1154728f, +0.8979717f, +0.2590252f,
  -0.0096936f, -0.1498301f, -0.0183138f, +0.2059305f, +0.0732304f, +0.4100424f, +0.2024266f, +0.1297887f,
  +0.0587026f, +0.0411166f, -0.0322337f, -0.0865848f, +0.0512633f, -0.1351654f, -0.0390104f, -0.2926690f,
  +0.0227852f, -0.0636904f, -0.0566730f, -0.2837655f, -0.1255532f, +0.0924522f, +0.0795553f, +0.0559948f,
  -0.0842895f, -0.0388843f, +0.0539296f, -0.0042318f, -0.0622654f, +0.0525234f, -0.1233466f, +0.1008875f
);

const float biases[4] = float[4](
  +0.0542759f, -0.0289312f, -0.0264227f, +0.0584888f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer50 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1104404f, -0.2140208f, -0.0531440f, +0.1675647f, -0.1189405f, +0.2391957f, +0.1278310f, -0.2312900f,
  -0.0260446f, +0.2959014f, +0.1660560f, -0.1844156f, +0.0808101f, +0.0968423f, -0.0885769f, -0.2365382f,
  -0.0193986f, +0.0642809f, +0.0902500f, +0.0675562f, -0.0230466f, +0.1546228f, -0.1559033f, +0.0495596f,
  -0.3405046f, -0.0552156f, -0.3187054f, +0.2071811f, -0.2006963f, +0.0741333f, +0.0852848f, +0.1635434f,
  +0.0279254f, -0.1682604f, -0.3931461f, +0.4493829f, -0.2179770f, +0.1027542f, -0.7503154f, -0.5137243f,
  -0.1029796f, -0.1222033f, +0.2786888f, +0.3630692f, +0.0284789f, +0.3049985f, +0.1450556f, +0.1731283f,
  +0.0316063f, -0.0698199f, +0.0781388f, -0.1968883f, +0.1669328f, -0.0599305f, -0.0037662f, +0.1204294f,
  +0.1430671f, +0.2192079f, +0.2363081f, -0.0931633f, -0.3342540f, +0.1959804f, -0.0020741f, -0.2909985f,
  -0.0016939f, -0.4085499f, +0.0944880f, +0.1448633f, -0.0664262f, +0.4639599f, +0.0286823f, -0.0250525f,
  +0.1823550f, -0.0904642f, -0.0084347f, +0.0702786f, -0.0420093f, -0.0130426f, +0.1810737f, +0.0122151f,
  -0.0867715f, +0.2723126f, +0.0363520f, -0.0068570f, -0.0780034f, +0.0583845f, +0.1709671f, +0.2460555f,
  +0.1138462f, -0.0956744f, +0.2463313f, -0.1224485f, -0.0517390f, +0.0088812f, -0.1920666f, +0.0256554f,
  -0.3367484f, -0.1931992f, +0.6884828f, +0.0549545f, -0.2124060f, +0.0044650f, +0.3540528f, +0.0972637f,
  +0.2071356f, +0.3390179f, -0.3596708f, -0.1141222f, -0.2633009f, +0.0025362f, -0.3617063f, -0.0714639f,
  +0.0037879f, -0.5496579f, -0.0521808f, +0.2823715f, -0.2684542f, -0.1434806f, -0.2110164f, +0.2846163f,
  +0.0384749f, +0.2292071f, +0.0375310f, +0.1191725f, -0.1494669f, +0.1765887f, -0.2832276f, +0.0162217f,
  -0.0065443f, +0.2255327f, -0.2117857f, -0.5594602f, +0.3413630f, -0.0730147f, +0.0896840f, +0.4260144f,
  -0.1426823f, -0.0726328f, -0.0797508f, +0.1381624f, -0.2347647f, -0.2356467f, +0.3351399f, +0.0558633f,
  +0.1443776f, +0.1020918f, -0.1453259f, -0.0353107f, -0.0327678f, -0.0463446f, -0.2250961f, -0.0920257f,
  -0.0319507f, +0.1379387f, +0.2412663f, -0.2039514f, +0.2711475f, -0.3144515f, +0.6325476f, +0.1596001f,
  +0.0844254f, +0.0821075f, +0.0055540f, +0.1722093f, +0.0081827f, -0.0360583f, -0.2427059f, +0.0083022f,
  +0.1268076f, +0.2574952f, -0.2482465f, -0.3804185f, +0.1395756f, -0.0256373f, -0.0535911f, -0.0719062f,
  +0.8303734f, +0.1119436f, -0.2001252f, -0.1443938f, +0.0254427f, -0.0552079f, -0.0135540f, +0.1731784f,
  +0.0105355f, -0.1852014f, -0.1992420f, +0.3143976f, -0.3050147f, -0.1075533f, +0.2117616f, +0.3887617f,
  -0.0589968f, +0.1105988f, +0.0032746f, -0.1752066f, +0.0358757f, -0.2615018f, -0.0000698f, -0.0100817f,
  -0.0463501f, +0.1409534f, +0.0427618f, -0.0504933f, +0.1551425f, -0.2318867f, +0.2425644f, +0.2260338f,
  -0.0438387f, -0.0375335f, +0.0011077f, -0.1633248f, +0.2553373f, -0.1178621f, +0.1485265f, -0.0752315f,
  +0.3108982f, +0.1066627f, -0.1048891f, -0.2117025f, +0.1828347f, -0.0988455f, -0.1194652f, +0.0800573f,
  -0.1975436f, +0.0927632f, -0.2825359f, -0.0237998f, -0.0886606f, -0.2834551f, +0.2698633f, +0.4170695f,
  +0.0265034f, -0.1180178f, +0.1526730f, +0.0357974f, +0.0359136f, -0.2619380f, -0.3841923f, +0.1729112f,
  +0.2869115f, +0.0093088f, +0.1817589f, +0.1669384f, +0.1161306f, +0.2352056f, +0.4373516f, +0.0394781f,
  +0.5199599f, +0.0143257f, +0.0096536f, +0.0913801f, +0.2689556f, -0.1054058f, -0.0966426f, +0.2268873f,
  -0.3328373f, -0.2725964f, -0.1101963f, +0.2880385f, -0.0350049f, -0.5669917f, -0.1726051f, +0.2917838f,
  -0.1129280f, +0.0930390f, -0.0066716f, +0.0002703f, -0.1242809f, -0.0270794f, +0.1416464f, -0.0116843f,
  -0.1685987f, -0.2181053f, -0.2024485f, +0.2234490f, -0.2160175f, -0.1991962f, +0.0545824f, -0.0193606f,
  +0.1004712f, +0.0358550f, +0.0041421f, +0.1031536f, -0.1270319f, -0.1402642f, +0.1369097f, +0.1923595f
);

const float biases[4] = float[4](
  +0.0920782f, +0.0706668f, +0.0220787f, +0.0916196f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer50 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1827632f, +0.1671037f, -0.0478375f, -0.2555661f, +0.1217328f, +0.0365638f, -0.2380300f, -0.0771081f,
  +0.0237505f, +0.2475123f, +0.3138080f, -0.2052410f, +0.1147884f, -0.0406475f, +0.1582493f, +0.1926764f,
  -0.0970293f, +0.0884460f, +0.0263185f, -0.0247268f, -0.0396437f, -0.0995944f, -0.1969897f, +0.0844855f,
  -0.1082786f, +0.2036389f, -0.0775735f, -0.3482287f, +0.2615942f, +0.2032927f, -0.1831177f, -0.0137252f,
  +0.1469651f, +1.1087946f, -0.1945830f, -0.8215389f, +0.0168124f, -0.3330143f, +0.1845534f, +0.1709245f,
  +0.1185811f, +0.5215008f, +0.3115098f, -0.4076606f, -0.0384643f, +0.0331773f, -0.4731823f, -0.5618209f,
  -0.3420512f, +0.3076333f, +0.0053349f, -0.1014652f, +0.1794680f, -0.1612527f, -0.1281419f, +0.0416259f,
  -0.3395356f, +0.0291786f, -0.1803131f, -0.0644811f, +0.0642300f, -0.0100660f, +0.1633686f, +0.0266197f,
  +0.1086920f, +0.1533660f, +0.2201912f, -0.2402025f, -0.1601259f, +0.1435899f, -0.2420658f, -0.0139243f,
  +0.1315632f, -0.0620585f, -0.1324159f, +0.1930112f, +0.0810736f, -0.0497264f, +0.2453999f, +0.0668918f,
  +0.2455766f, -0.1229833f, +0.2502223f, -0.1261264f, -0.0219344f, -0.0905168f, -0.0724126f, +0.1391883f,
  -0.0283499f, -0.0076080f, -0.0217733f, +0.1791592f, -0.0994494f, -0.0225702f, +0.0821099f, +0.0190722f,
  +0.0630796f, -0.4378512f, +0.1722095f, +0.6074759f, +0.0400678f, +0.0062761f, +0.4507246f, +0.1624229f,
  +0.2861051f, +0.1694940f, -0.2547509f, -0.0862944f, +0.3885220f, +0.3740561f, -0.0554641f, +0.0094222f,
  -0.1246681f, +0.0866237f, -0.1435869f, +0.0829144f, +0.0590014f, +0.1281805f, +0.4256510f, -0.1540891f,
  -0.2272031f, -0.4071438f, -0.0384217f, +0.2968450f, -0.0455000f, +0.0949271f, +0.0263796f, +0.1713570f,
  -0.0728871f, -0.0490586f, +0.2148867f, -0.1724456f, -0.2576073f, -0.0037267f, +0.0011782f, -0.0202951f,
  -0.0566249f, +0.1505238f, +0.1886842f, -0.3550568f, +0.0539646f, +0.0171988f, -0.2916094f, -0.0194027f,
  -0.0437814f, +0.0224789f, +0.0793168f, -0.1696799f, +0.0538460f, +0.0188801f, +0.0688398f, -0.0599950f,
  +0.1120059f, +0.0969949f, +0.1644374f, -0.2546778f, +0.1455540f, +0.2570489f, -0.4393305f, -0.0624014f,
  +0.0918168f, +0.0063603f, -0.0082824f, -0.1537153f, -0.0965940f, +0.2086535f, -0.0024282f, +0.0936951f,
  +0.0087623f, -0.1370057f, -0.3171174f, -0.0656038f, -0.2614118f, +0.0666960f, -0.2729664f, -0.1695505f,
  -0.3150521f, -0.4507808f, -0.0829284f, +0.0140577f, -0.3391905f, +0.0081720f, -0.7584932f, -0.7351080f,
  +0.2348321f, -0.0756574f, +0.0196145f, -0.0189777f, -0.2641711f, -0.1100644f, +0.0259461f, +0.4974867f,
  +0.3074883f, +0.2186130f, -0.0183366f, -0.1756658f, +0.0480867f, +0.0328801f, -0.0954049f, +0.0040397f,
  -0.1704145f, +0.2602140f, -0.1390504f, -0.0520135f, -0.0324703f, -0.0044869f, -0.3904811f, -0.1574901f,
  +0.0901946f, +0.1733809f, +0.0661364f, -0.1455502f, -0.1748307f, -0.0252652f, +0.0583236f, +0.0492168f,
  -0.0800317f, +0.0086074f, -0.1410785f, -0.0811205f, -0.0671774f, -0.0968044f, -0.1067718f, -0.0341676f,
  +0.0782850f, +0.1753562f, -0.1367719f, -0.3562228f, -0.0082714f, -0.1501284f, +0.0449435f, +0.1821568f,
  +0.0074944f, +0.1876234f, +0.0361863f, -0.2335694f, +0.1124525f, -0.2837843f, -0.1613432f, +0.0108717f,
  -0.1972858f, -0.1631157f, -0.1870231f, +0.3159867f, -0.0138495f, -0.0152081f, -0.2194937f, +0.1113948f,
  -0.0453314f, -0.5446046f, +0.7402861f, +0.5033883f, -0.3342753f, -0.2673882f, +0.7895410f, +0.1162365f,
  -0.4116252f, -0.1018542f, -0.1247471f, -0.0861586f, +0.1667431f, -0.2609593f, -0.1146577f, -0.4427316f,
  +0.1788984f, +0.0736947f, -0.1015509f, +0.2126755f, +0.1755595f, -0.0011843f, -0.0640028f, +0.0320536f,
  -0.0075967f, -0.0592020f, -0.0727827f, +0.2605415f, +0.1115935f, -0.1170726f, +0.0944533f, +0.0066706f,
  +0.1842200f, +0.2287610f, +0.0601702f, +0.0150496f, +0.2000012f, -0.2880680f, -0.2739217f, -0.1520012f
);

const float biases[4] = float[4](
  +0.0186185f, +0.1178433f, +0.0436552f, -0.0439120f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer51 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0078378f, +0.0247855f, +0.1011384f, -0.0683508f, -0.0901631f, +0.1085156f, +0.1306021f, +0.2635012f,
  +0.2207971f, +0.1127351f, +0.3981092f, -0.2841290f, -0.0196029f, -0.0192352f, -0.0850163f, -0.0559775f,
  -0.0150675f, -0.2966708f, -0.0915371f, +0.0100319f, +0.1089161f, -0.1074351f, -0.0747370f, -0.0005583f,
  +0.4705130f, +0.1948656f, +0.1847591f, +0.3715364f, -0.1134727f, -0.3074761f, -0.0660955f, -0.0122177f,
  +0.3485050f, +0.2264496f, +0.3589624f, -0.1841045f, +0.1995655f, +0.2889819f, -0.1105486f, -0.0342898f,
  -0.1611213f, -0.0542296f, +0.2222088f, +0.6262105f, +0.2438916f, +0.1355613f, -0.2688311f, +0.0272573f,
  +0.0501703f, +0.0711401f, -0.0594245f, +0.1708331f, +0.0786127f, +0.0610186f, +0.1180486f, +0.1091818f,
  +0.1039830f, +0.1340294f, +0.2376253f, -0.2173618f, +0.2929229f, +0.0379555f, +0.4006903f, -0.2011191f,
  -0.0839626f, +0.0535957f, -0.0073571f, +0.3704101f, +0.2835810f, +0.0762758f, -0.1606978f, +0.0552332f,
  +0.3060443f, -0.0311907f, -0.0855930f, +0.1009146f, +0.0260432f, -0.3692732f, -0.0911410f, -0.1960419f,
  -0.3707154f, +0.5404809f, +0.3981486f, -0.2783145f, -0.1774690f, -0.2144517f, -0.1871257f, -0.1332353f,
  +0.0311667f, -0.6467885f, +0.0418269f, +0.1635344f, +0.2596864f, +0.4240268f, +0.0509096f, +0.2534828f,
  +0.1221082f, +0.1893697f, +0.0025782f, +0.0531809f, -0.1239950f, -0.0750503f, +0.0040595f, +0.0382648f,
  +0.0225852f, -0.0969540f, -0.5167425f, -0.3935378f, -0.2105561f, -0.3092566f, -0.3942714f, -0.2603136f,
  +0.0245834f, -0.2704894f, +0.1049950f, +0.4755210f, +0.2267658f, +0.1969420f, -0.4399874f, -0.0852208f,
  +0.0751851f, +0.0176850f, -0.1352719f, +0.0979568f, +0.0419588f, -0.0225879f, -0.0188163f, -0.0371104f,
  -0.0404811f, +0.0423654f, -0.0770512f, -0.0336540f, +0.1273765f, +0.0132237f, +0.0998480f, -0.0332800f,
  -0.0682816f, -0.0389693f, +0.1230146f, +0.0474187f, +0.2135763f, +0.0401275f, -0.0808372f, +0.0055742f,
  +0.2263838f, +0.1163335f, +0.2638894f, -0.0064294f, -0.4025776f, +0.1313906f, -0.0507832f, -0.2168314f,
  -0.1386711f, -0.0630761f, +0.3127174f, +0.2013940f, +0.2299504f, -0.0526504f, +0.1593995f, -0.0239562f,
  -0.0193315f, -0.1595534f, -0.1503015f, +0.1959554f, -0.1025674f, +0.0396606f, -0.0573414f, -0.1628613f,
  -0.2025284f, +0.2369938f, +0.3045280f, +0.0925811f, +0.0579829f, +0.2433934f, +0.4533770f, -0.0199889f,
  -0.5061216f, +0.1748055f, -0.4691403f, -0.1380536f, -0.5971535f, +0.0414857f, -0.9167395f, -0.1261465f,
  -0.0308545f, -0.1667405f, +0.0654074f, -0.1800068f, -0.0797504f, -0.3731628f, +0.0139075f, +0.1064919f,
  +0.0408539f, -0.0504287f, -0.2941286f, +0.2250901f, -0.2044728f, -0.1735233f, -0.1522264f, +0.0542738f,
  -0.0115628f, -0.1243260f, +0.2382986f, -0.0268839f, +0.1736431f, -0.1797959f, +0.2461190f, -0.1743815f,
  +0.0859978f, -0.1667468f, +0.1310211f, +0.0227930f, +0.3243009f, -0.1263219f, -0.0415842f, -0.1345542f,
  -0.0221882f, +0.2250163f, +0.0396166f, -0.2200041f, +0.2056397f, -0.5262846f, -0.4238693f, -0.1316188f,
  -0.2462911f, -0.2890870f, +0.0816697f, +0.1578844f, -0.3000573f, +0.2471074f, +0.0871448f, +0.2512539f,
  +0.0916630f, -0.0451768f, -0.0769220f, +0.0570856f, +0.1397202f, +0.1375029f, -0.0050633f, -0.0237615f,
  +0.0521434f, +0.1430746f, -0.1571178f, -0.3997604f, -0.0168751f, -0.5039775f, -1.1017460f, +0.0971574f,
  -0.2091962f, +0.1057347f, +0.2878607f, +0.1429478f, +0.0984310f, +0.2848112f, +0.6897240f, -0.1303570f,
  +0.1975259f, -0.5630302f, +0.0481852f, +0.1160450f, +0.0957213f, +0.2808292f, -0.0505393f, -0.0316774f,
  +0.2742753f, -0.0166033f, +0.0586386f, -0.1102141f, -0.0599796f, -0.3905276f, -0.2085453f, -0.3639095f,
  -0.0704330f, +0.1304342f, -0.1519435f, +0.0110368f, -0.0534305f, +0.1540132f, +0.0872979f, +0.1902789f,
  -0.1856994f, -0.2269470f, +0.2221277f, +0.1999350f, +0.0378547f, +0.0092236f, -0.2179583f, +0.0573082f
);

const float biases[4] = float[4](
  +0.0813754f, -0.0051565f, -0.0483546f, -0.0025887f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer51 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1743487f, -0.0822950f, -0.0696408f, +0.0368525f, +0.3586379f, +0.0682047f, -0.0048620f, +0.0274678f,
  +0.4059549f, +0.0960440f, -0.4187926f, -0.0480909f, +0.1236253f, -0.1166829f, -0.0506728f, +0.1053129f,
  -0.2222140f, +0.1786303f, +0.0680463f, -0.0339180f, -0.2773798f, -0.1467695f, +0.1421979f, -0.0883874f,
  -0.0106662f, -0.2024064f, -0.1731997f, -0.0041842f, +0.0668249f, +0.0161832f, +0.3616682f, -0.4391879f,
  +0.4101240f, +0.4485410f, +0.3336278f, +0.4016469f, +0.2831022f, +0.0515099f, -0.7568998f, +0.2580242f,
  -0.2987999f, +0.3053050f, -0.2992143f, +0.1318092f, -0.4080403f, +0.1900104f, +0.1511571f, -0.0474764f,
  -0.0892134f, -0.1497360f, -0.0377761f, -0.1214075f, +0.0596745f, +0.3438869f, +0.2776278f, +0.1449902f,
  -0.0217500f, +0.0361397f, +0.2019394f, -0.1820054f, +0.3002124f, -0.3220372f, +0.1822464f, -0.3024962f,
  -0.0196259f, +0.0394137f, -0.2389196f, -0.0384206f, -0.0861526f, +0.1552735f, +0.0696232f, +0.0914904f,
  -0.3186930f, -0.0327820f, -0.1350525f, -0.1464615f, +0.1996161f, +0.0169853f, +0.0209932f, +0.1955758f,
  +0.2482562f, -0.0976068f, -0.4022553f, +0.2439234f, -0.0489977f, +0.2678275f, +0.4338222f, -0.1023645f,
  +0.0091371f, +0.2145248f, -0.0887364f, -0.0305789f, -0.0374313f, +0.2863320f, +0.0128990f, +0.0089219f,
  -0.0673086f, -0.0426239f, -0.2158981f, +0.2965630f, +0.4175194f, -0.1959844f, -0.1819342f, +0.3048338f,
  +0.4591386f, +0.3175809f, -0.0071048f, -0.1480116f, +0.3794041f, -0.1745590f, +1.1640069f, -0.3857688f,
  +0.1582922f, +0.0453139f, -0.3143015f, -0.0992754f, -0.2528051f, -0.1180875f, +0.1957607f, +0.1237158f,
  -0.0964182f, -0.0746446f, +0.3105381f, -0.1068177f, +0.0884972f, +0.0223695f, -0.0080324f, -0.0910005f,
  +0.1075214f, +0.0215660f, -0.1607068f, +0.0586965f, +0.1295203f, +0.1350539f, +0.2599892f, -0.0409168f,
  -0.0249917f, -0.0326932f, -0.1527859f, -0.0079365f, -0.0640396f, -0.1400808f, +0.1735702f, +0.0405771f,
  -0.1410170f, +0.0075732f, +0.0809394f, +0.1561846f, +0.0809727f, -0.1668656f, -0.1375239f, +0.2347317f,
  -0.0421950f, -0.2002116f, +0.0686146f, -0.0004707f, -0.1083083f, +0.1633913f, +0.1349339f, -0.2049575f,
  +0.0223338f, +0.0359105f, -0.0454401f, +0.0157622f, +0.0169301f, -0.0316010f, -0.0653955f, +0.0319378f,
  -0.0778795f, -0.0189367f, +0.0916238f, +0.3111873f, -0.0012412f, +0.0466860f, -0.2917099f, +0.3829728f,
  +0.0048747f, +0.0117659f, +0.3278948f, -0.2130765f, -0.1145746f, -0.1415254f, +0.2846509f, -0.4653521f,
  +0.0152780f, +0.0589206f, -0.0236344f, -0.0470061f, -0.0182953f, -0.1160924f, -0.0389728f, +0.0646634f,
  +0.2723865f, -0.0263005f, -0.2351414f, +0.5695969f, -0.0102286f, -0.2281896f, -0.4068020f, +0.0799060f,
  +0.0224543f, -0.0793184f, +0.2478162f, -0.3419830f, -0.0752664f, +0.1305117f, +0.2710777f, -0.1067416f,
  -0.0857013f, -0.0378747f, -0.1599083f, -0.0250666f, -0.0258071f, -0.1341067f, +0.0346549f, +0.0333842f,
  -0.6138448f, -0.0305578f, -0.2991562f, +0.0478494f, +0.2269769f, -0.3545824f, -0.0970456f, -0.0230287f,
  -0.3717296f, +0.1016992f, -0.0512786f, -0.0046444f, -0.1213284f, -0.0837473f, +0.0294982f, +0.0752557f,
  -0.0206665f, +0.2213819f, -0.0422336f, -0.0447153f, -0.0488123f, -0.0684402f, +0.1311488f, -0.0027055f,
  +0.2440423f, -0.0673023f, +0.1316483f, -0.5066082f, -0.1714596f, +0.1132378f, +0.0588919f, +0.0104249f,
  +0.0189155f, -0.4422667f, -0.0473546f, -0.0215089f, -0.1191554f, -0.2116954f, +0.2720301f, -0.0214659f,
  +0.3745809f, -0.2282881f, -0.2564055f, +0.0116733f, -0.1541882f, -0.0308075f, -0.1757515f, -0.4101015f,
  +0.5377294f, -0.2880569f, +0.3171161f, -0.1398972f, +0.0709944f, +0.0707868f, -0.2696405f, -0.3210422f,
  +0.3183219f, -0.1899063f, +0.1865191f, +0.0211239f, +0.1128701f, +0.1440255f, -0.1799558f, -0.2494330f,
  +0.0351787f, -0.2446976f, +0.3895345f, +0.0648012f, +0.1630784f, +0.0627007f, -0.1247102f, +0.0639883f
);

const float biases[4] = float[4](
  +0.0967515f, +0.0344626f, -0.0550774f, -0.0126893f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer52 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2017098f, +0.0787276f, -0.1972713f, +0.0007681f, +0.0086820f, -0.0137675f, -0.1595052f, +0.2708827f,
  +0.1389706f, -0.0631747f, -0.1346996f, +0.1831971f, +0.0902247f, -0.0499386f, +0.2539041f, +0.0568911f,
  +0.1181846f, -0.1257933f, -0.2339562f, -0.0633787f, -0.0177379f, -0.0292277f, -0.1377320f, +0.5036703f,
  +0.5165983f, -0.4438745f, +0.1345294f, -0.0953144f, +0.2048157f, -0.3305607f, -0.0233285f, +0.1447208f,
  -0.7510062f, +0.2464415f, +0.3390408f, +0.0896209f, -0.2311084f, -0.1661360f, +0.0646194f, +0.1052925f,
  -0.3890429f, -0.0211856f, -0.2204752f, -0.3148586f, -0.2823984f, +0.1539484f, -0.5040655f, +0.2120110f,
  +0.2016633f, -0.4367805f, +0.2571808f, -0.0195445f, -0.0904993f, +0.2515405f, -0.1286159f, +0.0583656f,
  -0.3641151f, +0.9299777f, -0.5200359f, -0.0208842f, +0.0852838f, +0.0394835f, +0.1643984f, +0.1543683f,
  -0.1689430f, +0.0731547f, +0.1164179f, +0.1703531f, -0.1531939f, +0.4006907f, -0.1545421f, +0.0973798f,
  -0.0218596f, -0.0780913f, +0.0057881f, -0.0056806f, -0.0966645f, +0.0507983f, -0.1423965f, +0.0271821f,
  -0.1313984f, -0.1736286f, +0.0749306f, -0.1996564f, +0.0913273f, +0.0037316f, +0.2142841f, +0.2248016f,
  -0.0121996f, -0.0551203f, -0.1262678f, +0.0330120f, +0.2112609f, -0.0447861f, +0.3612038f, +0.1980743f,
  -0.2062586f, +0.2264158f, -0.8131911f, +0.0507522f, -0.0970107f, -0.2117127f, +0.2155653f, +0.2462881f,
  -0.4222822f, -0.2914479f, +0.0240804f, +0.1130985f, -0.5719258f, -0.2225445f, +0.7018707f, -0.4275244f,
  -0.1705036f, +0.0974627f, +0.1038883f, +0.0203851f, -0.1269844f, -0.0963746f, +0.1938990f, -0.0375798f,
  -0.0151121f, -0.3839556f, -0.0842123f, -0.1017580f, -0.0419440f, -0.4224448f, +0.1615689f, +0.2535570f,
  +0.0258136f, -0.4631642f, -0.1161888f, -0.0846626f, -0.2090856f, -0.3291246f, +0.2233627f, +0.0414552f,
  -0.1566284f, -0.0389604f, -0.2526152f, +0.1816429f, +0.1490579f, -0.2845277f, +0.1776289f, -0.0093294f,
  -0.0925388f, +0.1250169f, +0.0604456f, +0.0716797f, +0.0334664f, +0.0728891f, +0.0350554f, -0.0065461f,
  +0.1256132f, +0.1050862f, -0.0539863f, -0.2719874f, -0.3715641f, +0.2364130f, -0.5136198f, -0.4257225f,
  -0.1447487f, +0.0758282f, +0.0410596f, -0.2295259f, -0.0861334f, -0.0950603f, +0.4346946f, +0.2287153f,
  -0.2270031f, +0.3555883f, +0.2315771f, +0.0527336f, +0.1559113f, +0.1407675f, +0.0650448f, -0.0511948f,
  +0.1434153f, +0.1214871f, -0.1949468f, -0.0832631f, -0.2078649f, -0.1265658f, -0.3714712f, +0.1987527f,
  -0.3652261f, +0.3381142f, +0.1940112f, -0.4319161f, -0.1955259f, +0.3225623f, -0.0981452f, -0.2594596f,
  +0.1018094f, +0.0681875f, -0.0051015f, -0.0118162f, -0.0894668f, +0.1389275f, -0.1040135f, -0.3423790f,
  +0.0183366f, +0.1481178f, -0.1022975f, -0.1055381f, +0.1714222f, -0.0271149f, -0.0531947f, -0.0991426f,
  -0.0988889f, +0.1686145f, -0.1071997f, +0.0792331f, +0.1127717f, +0.0165820f, +0.1241105f, -0.0476946f,
  -0.2505141f, +0.0399603f, -0.2197971f, -0.0661236f, -0.1144686f, +0.1092898f, -0.1204119f, -0.0465950f,
  +0.1261890f, +0.0631381f, -0.1627276f, -0.1601260f, -0.1416278f, -0.0363062f, +0.1193315f, +0.1337955f,
  -0.0454518f, -0.0344728f, -0.1011178f, +0.0223149f, -0.0970326f, +0.0496769f, +0.2959727f, +0.0930261f,
  -0.6182570f, +0.5402254f, +0.1538580f, -0.0115399f, -0.2575711f, +0.1824261f, +0.0764219f, -0.1832351f,
  -0.0516612f, -0.4631449f, -0.1602163f, +0.5192840f, -0.3089628f, -0.0825510f, +0.0727095f, +0.1542957f,
  -0.1698722f, +0.1385010f, -0.4850787f, -0.1739879f, +0.1107363f, -0.3260410f, +0.1679720f, +0.3971156f,
  -0.0967326f, -0.0419947f, -0.0333980f, +0.0746188f, +0.1309985f, -0.2874847f, +0.0241642f, -0.0904939f,
  +0.0545134f, +0.1244633f, -0.2342355f, +0.3716020f, +0.2282849f, -0.3965627f, +0.1164118f, -0.0444267f,
  +0.2186197f, -0.0359909f, +0.1533238f, -0.1772062f, -0.0959866f, -0.0003002f, +0.0528329f, +0.0421534f
);

const float biases[4] = float[4](
  +0.0028070f, +0.1407987f, +0.0498893f, -0.0089658f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer52 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0857850f, +0.0443413f, -0.1948819f, +0.0238570f, +0.0316456f, +0.1700428f, -0.2206128f, +0.0196695f,
  -0.0771996f, -0.1321060f, +0.4007094f, -0.1305349f, -0.3079354f, +0.0772608f, -0.2498731f, +0.1685920f,
  -0.0139943f, +0.0589844f, -0.1332077f, -0.2051255f, +0.1090555f, +0.1558410f, -0.0047292f, +0.2005920f,
  +0.0912198f, +0.0846061f, +0.0901924f, +0.0146886f, +0.2279509f, +0.0227563f, +0.0428170f, -0.0468277f,
  +0.0413432f, -0.0295523f, -0.2372465f, -0.1019729f, +0.1507633f, -0.1525566f, +0.1312451f, +0.0051175f,
  -0.0578362f, +0.0892216f, +0.2987163f, +0.5760333f, -0.0217227f, -0.2556231f, +0.3390812f, -0.0674840f,
  +0.0457606f, -0.4723171f, +0.1410220f, -0.0636396f, -0.0967649f, -0.0846582f, -0.0243909f, -0.1095865f,
  +0.1599585f, -0.0283357f, -0.0824490f, -0.1023977f, +0.1215431f, +0.0556173f, +0.1434594f, +0.0975646f,
  +0.1411526f, -0.0304508f, +0.0498795f, -0.0594571f, -0.1373257f, +0.0108282f, +0.1173918f, -0.1396412f,
  -0.1412738f, -0.0529453f, +0.0795918f, -0.1239609f, -0.1115208f, +0.0492644f, -0.0144791f, +0.1071909f,
  +0.2525543f, -0.0670881f, -0.1034135f, +0.0633431f, +0.1552458f, -0.0696086f, +0.1851172f, -0.0191087f,
  -0.1466550f, +0.0380051f, +0.0157192f, -0.0132581f, -0.1136322f, -0.0117003f, +0.0935827f, -0.0398248f,
  -0.1262816f, +0.0898557f, +0.0825578f, -0.1669469f, -0.2684936f, +0.0667365f, -0.0243698f, -0.1256602f,
  -0.3532197f, +0.1913667f, +0.2500191f, +0.2090011f, -0.4037523f, +0.4817019f, +0.1009751f, -0.0134182f,
  +0.1175986f, -0.1209697f, +0.1490969f, +0.2469475f, +0.0278469f, +0.2103752f, -0.0942928f, -0.0854722f,
  +0.0368244f, -0.0644701f, +0.0710661f, +0.0106638f, +0.3636522f, -0.0889527f, -0.1005015f, +0.2977909f,
  -0.2031460f, +0.1464988f, -0.3233140f, +0.1894572f, +0.4199139f, +0.0514519f, +0.0118614f, +0.4561271f,
  -0.0259477f, +0.0554058f, -0.1852695f, -0.1124406f, +0.2396190f, +0.0586365f, -0.3667658f, +0.4866314f,
  +0.1056695f, +0.0247380f, -0.2141916f, -0.0070381f, +0.0196657f, -0.0425455f, -0.0242306f, -0.0401633f,
  -0.3308272f, -0.0863475f, +0.2924011f, +0.0839740f, -0.0679153f, -0.1715238f, +0.1938884f, +0.0105496f,
  -0.0242048f, +0.0981708f, -0.0059397f, -0.1274627f, +0.0512287f, +0.0457324f, -0.2461694f, -0.1734382f,
  +0.3075961f, -0.3928697f, -0.0821734f, +0.2947062f, +0.0184808f, -0.3223947f, +0.1442431f, +0.0111888f,
  +0.1878593f, +0.1331581f, -0.2761257f, +0.5631804f, +0.5407691f, -0.6942996f, +0.2825449f, -0.3138112f,
  +0.0435341f, +0.1860691f, +0.4627689f, -0.5636864f, -0.1576368f, -0.0400559f, -0.1077501f, -0.1109495f,
  -0.0022860f, -0.2958081f, -0.0350317f, +0.0903062f, -0.0582955f, -0.1896467f, +0.0860235f, +0.1311461f,
  +0.2838896f, -0.0999372f, +0.0268311f, +0.1205260f, +0.2335191f, -0.1761175f, +0.0179121f, +0.1872229f,
  -0.0992639f, +0.0535999f, -0.0948845f, -0.0056601f, +0.0177073f, -0.1358575f, +0.2292511f, +0.1895454f,
  +0.0061839f, -0.0213522f, -0.0571286f, +0.0409828f, +0.0914491f, +0.0803612f, -0.1940895f, +0.2143960f,
  -0.1272423f, -0.1099708f, -0.1058965f, -0.2692795f, +0.0774837f, -0.0382639f, -0.3447813f, +0.3738722f,
  -0.0218067f, +0.2052337f, -0.0607930f, +0.0096919f, +0.0087970f, +0.1002834f, -0.1375308f, +0.2591467f,
  +0.0914740f, -0.0593446f, +0.3014584f, -0.0729750f, +0.1571826f, +0.1345147f, -0.0100587f, +0.0789974f,
  -0.0780388f, -0.1945028f, +0.1743609f, -0.6261128f, -0.0325394f, +0.2121054f, -0.0452818f, +0.0105773f,
  +0.0203618f, +0.1299462f, -0.2337745f, +0.8491929f, +0.2626861f, -0.5199120f, +0.2027701f, +0.1568619f,
  +0.0030287f, -0.0253853f, +0.1577809f, -0.0710828f, -0.1344969f, -0.0168843f, +0.0654562f, -0.0973916f,
  +0.0568548f, -0.2784672f, +0.5787706f, -0.2437837f, -0.0819811f, +0.3607270f, +0.0356058f, -0.3220063f,
  -0.1208826f, -0.0515657f, -0.0367940f, +0.1391915f, +0.0726918f, -0.2934676f, +0.1314180f, -0.3400545f
);

const float biases[4] = float[4](
  +0.0819208f, +0.1003985f, -0.0856535f, -0.0471102f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer53 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1685430f, +0.0157140f, -0.1686077f, +0.2267930f, +0.1714384f, -0.2529484f, -0.1310372f, -0.1699775f,
  -0.1966459f, -0.1680992f, -0.2185441f, -0.0293847f, +0.1610680f, -0.0049810f, -0.1428874f, +0.1472533f,
  +0.0668816f, +0.2004940f, -0.2622710f, -0.0670559f, -0.0392062f, +0.0343376f, -0.1217714f, +0.1359205f,
  -0.4113382f, +0.2111894f, +0.7195218f, -0.1980920f, +0.1920090f, +0.4680569f, +0.5462217f, +0.3170550f,
  -0.0590158f, +0.0491274f, -0.0124133f, -0.0993700f, +0.2373417f, -0.0025404f, +0.0350162f, +0.0451790f,
  -0.1528101f, +0.2246777f, +0.1650773f, +0.1178688f, +0.2355610f, +0.0159861f, +0.1140385f, +0.0236908f,
  -0.1091608f, +0.0255655f, +0.2635352f, -0.2681900f, -0.0768170f, +0.1868000f, -0.0153865f, +0.0201013f,
  -0.1066088f, -0.0987599f, +0.0137748f, -0.2676360f, +0.0668954f, -0.1238906f, +0.4036771f, -0.3074383f,
  +0.1111695f, -0.1146541f, +0.2164048f, -0.0300418f, -0.0111619f, -0.2237474f, +0.0240781f, -0.1196112f,
  -0.0857530f, +0.3176976f, +0.0262212f, +0.1354408f, -0.0183836f, -0.3802558f, -0.1631781f, -0.0720689f,
  -0.2924017f, +0.0831655f, +0.2923753f, -0.0734784f, -0.2851376f, -0.1104956f, +0.2099324f, -0.1125027f,
  +0.2062325f, -0.3173510f, -0.0516647f, +0.0965543f, +0.1857905f, +0.1716045f, +0.0673697f, -0.0561834f,
  -0.5046411f, +0.2504081f, +0.1700500f, +0.0036519f, -0.2312396f, -0.0121279f, -0.6663614f, +0.2620333f,
  -0.0194053f, -0.5120441f, -0.2454864f, -0.0598535f, +0.2576903f, +0.1303686f, +0.4470540f, +0.0046703f,
  +0.0438955f, -0.1303586f, +0.2793000f, -0.2515590f, -0.1701758f, -0.5341527f, -0.0564290f, -0.1713074f,
  -0.0987556f, -0.1452224f, +0.1966679f, -0.2412028f, -0.2394623f, +0.2962755f, -0.1341780f, -0.3128048f,
  -0.0925285f, -0.1398098f, +0.3312904f, +0.1823651f, -0.0136876f, -0.1209379f, -0.7560943f, +0.1123593f,
  -0.0663093f, -0.1250748f, -0.1903812f, -0.0841488f, -0.1706202f, -0.1313371f, +0.1064240f, +0.0195752f,
  -0.1797205f, +0.0431271f, +0.0561759f, -0.1218944f, +0.1432894f, +0.1231846f, +0.0453166f, +0.1278548f,
  +0.4010319f, +0.2225892f, +0.0800985f, +0.5228657f, -0.1506526f, -0.3582826f, +0.1915690f, +0.2222070f,
  -0.1912120f, +0.1465122f, -0.0191263f, +0.2764520f, -0.1854613f, +0.0631462f, -0.1361001f, -0.6217216f,
  -0.2835978f, -0.1385861f, +0.3074331f, -0.2264536f, +0.1578064f, +0.0209698f, -0.0256573f, -0.0335027f,
  +0.3784345f, +0.0530137f, -0.4921780f, +0.6325389f, -0.0622460f, -0.1352700f, -0.1471460f, +0.0926417f,
  -0.0443027f, +0.0448833f, +0.2009887f, -0.1557796f, -0.0211646f, -0.1311666f, +0.2263413f, -0.3446743f,
  -0.0683526f, -0.0365124f, +0.0980211f, -0.2243358f, +0.1173688f, +0.1662817f, +0.1549487f, -0.1090563f,
  +0.0796813f, -0.0122363f, -0.2925982f, +0.1631399f, -0.1331704f, -0.1610800f, -0.0784587f, +0.0810345f,
  +0.0222315f, +0.0076091f, +0.0636604f, +0.0825742f, +0.1351590f, +0.0056991f, +0.1055865f, +0.0433793f,
  +0.0919435f, +0.1201084f, -0.1613980f, +0.1250762f, -0.0621817f, +0.0328525f, +0.0687392f, -0.0467162f,
  -0.1397486f, +0.5381107f, +0.2498428f, +0.1087777f, -0.0121080f, -0.4290890f, -0.1528043f, +0.1665617f,
  -0.1850778f, -0.1227506f, +0.1792446f, -0.0664386f, -0.0004807f, +0.0306346f, -0.2532519f, -0.1205911f,
  -0.0401208f, -0.2938688f, +0.0366422f, +0.1774230f, -0.0212964f, +0.0479107f, -0.0939921f, +0.0564667f,
  +0.0907631f, -0.0965947f, -0.2096504f, +0.3416192f, +0.0047696f, +0.0326529f, -0.9329522f, -0.2138783f,
  +0.1976474f, -0.1771302f, -0.3740419f, +0.0006287f, +0.1861317f, -0.0777212f, -0.2150291f, -0.1041826f,
  -0.0382443f, -0.1412464f, +0.1492002f, -0.2162116f, +0.0343543f, +0.0867528f, +0.1962370f, -0.1422695f,
  +0.1134504f, +0.1271015f, +0.4581625f, +0.2577191f, -0.0673258f, -0.3912517f, -0.5474735f, -0.0414284f,
  +0.0322573f, -0.0019817f, +0.1613771f, +0.0642897f, +0.0431450f, +0.2240599f, -0.2711730f, -0.2749434f
);

const float biases[4] = float[4](
  +0.0422098f, -0.0738577f, -0.0267473f, -0.0657083f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer53 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1221427f, +0.1558294f, -0.1692355f, +0.2334414f, -0.0041389f, -0.2915297f, -0.0996725f, -0.2634128f,
  -0.1864951f, -0.0740696f, -0.0072027f, +0.1264027f, -0.0492763f, +0.3397236f, +0.0381112f, +0.1941915f,
  +0.1370829f, +0.1003505f, -0.0822640f, +0.0282299f, +0.0411607f, +0.0413836f, +0.1072101f, -0.0679650f,
  -0.1039772f, +0.2988846f, +0.2775614f, -0.1353967f, +0.1238439f, +0.3077666f, +0.1544297f, +0.2069657f,
  -0.0309506f, +0.0976498f, +0.1402190f, -0.4064331f, +0.2249612f, +0.0642497f, +0.6401259f, +0.1785595f,
  +0.3235620f, -0.3107068f, -0.2188434f, +0.1946102f, +0.2655793f, -0.0876037f, +0.0541072f, -0.0108708f,
  +0.3002965f, -0.0048257f, -0.3914747f, +0.2804508f, -0.0448019f, -0.2217930f, -0.2377318f, -0.0180916f,
  +0.1764648f, +0.1780341f, -0.1801451f, +0.0541316f, +0.1656364f, +0.0587645f, +0.2314415f, +0.3794120f,
  -0.0890458f, -0.0827630f, -0.1239661f, +0.0762227f, -0.1033272f, +0.0993366f, -0.1366389f, -0.1230545f,
  +0.1060434f, -0.2439009f, -0.4416321f, +0.3813489f, -0.4221438f, -0.3948698f, -0.0525914f, -0.2076216f,
  +0.1353313f, +0.1800493f, -0.3338714f, -0.2185261f, -0.1608960f, +0.1148656f, -0.2202517f, +0.2940263f,
  -0.0860842f, +0.3515267f, -0.0104357f, -0.0713465f, +0.0258773f, +0.1768691f, -0.3603327f, +0.3255831f,
  +0.0758651f, -0.0838673f, -0.8117566f, +0.1852218f, -0.5235767f, -0.3016388f, -0.0488745f, -0.0545031f,
  +0.0084251f, +0.0985839f, -0.6573898f, +0.1034385f, -0.1090390f, -0.6339570f, -0.3207395f, +0.0462137f,
  +0.0119202f, +0.0280906f, -0.0393158f, +0.3830348f, +0.1899755f, -0.1090117f, -0.2253842f, +0.0555161f,
  -0.0403477f, -0.2243119f, -0.2327159f, +0.1455603f, -0.2629109f, -0.0362953f, -0.3697337f, +0.3055220f,
  +0.1795903f, +0.0719808f, -0.1795895f, -0.2046002f, +0.2223686f, +0.1043903f, +0.2102215f, +0.0249976f,
  +0.5600822f, +0.2404431f, -0.7057302f, -0.0977760f, -0.1518427f, -0.2885956f, -0.5909635f, -0.4082992f,
  +0.2057672f, +0.0560919f, -0.1884753f, +0.2254406f, -0.1697096f, -0.1857726f, -0.1378194f, -0.1724547f,
  -0.0615666f, -0.0372585f, +0.0567164f, -0.2164375f, +0.0567379f, +0.2288305f, -0.1196773f, +0.0146358f,
  -0.0266757f, -0.1078462f, +0.2045348f, +0.0616168f, +0.0843419f, +0.1594687f, +0.1982800f, +0.0076236f,
  -0.2931862f, +0.1288419f, -0.2409697f, +0.1596463f, +0.0736381f, -0.0127855f, +0.0471508f, +0.2953694f,
  -0.0782335f, -0.3491257f, -0.1990251f, +0.2725083f, +0.1254973f, -0.0949949f, -0.3137911f, +0.0566421f,
  -0.0172433f, -0.0714319f, +0.4374141f, +0.1932588f, -0.2432631f, +0.0885730f, -0.2347358f, -0.3958390f,
  -0.3424037f, +0.0473337f, +0.2829050f, -0.2222314f, +0.2050026f, +0.2141751f, +0.1872607f, +0.0121788f,
  -0.3418539f, -0.2137775f, +0.3821923f, -0.1187158f, -0.3840663f, -0.0711008f, -0.3491945f, +0.0754559f,
  -0.1447479f, +0.0986710f, +0.1942087f, +0.0170254f, +0.0888031f, +0.0777654f, -0.0220338f, -0.0698157f,
  -0.1462310f, -0.1967966f, -0.0962689f, -0.0330574f, +0.0479815f, +0.1870399f, -0.1726361f, -0.0774681f,
  +0.2041642f, +0.0423082f, +0.4883389f, +0.2414789f, -0.4811079f, -0.1598133f, -0.1565676f, +0.2011025f,
  -0.0924633f, +0.1116295f, -0.0276826f, -0.4213001f, -0.5141869f, -0.7258742f, +0.1181849f, -0.4041413f,
  +0.2032971f, -0.0879397f, -0.3768907f, -0.0033579f, -0.2682457f, -0.1100842f, -0.0545256f, -0.1591752f,
  +0.4429129f, +0.5740966f, +0.2278976f, +0.1088418f, -0.2684489f, -0.5269027f, -0.4532287f, +0.2362448f,
  +0.1357426f, +0.3376803f, -0.5606460f, -0.5326345f, -0.5889902f, -0.2982923f, -0.0383721f, +0.1714958f,
  -0.1505452f, +0.1131290f, +0.1404039f, +0.0454431f, -0.5383263f, -0.2099640f, -0.3508627f, +0.2807337f,
  +0.1952618f, -0.2318125f, +0.2770186f, +0.0525505f, -0.1451679f, -0.3798209f, -0.1679656f, +0.1742398f,
  -0.1065386f, -0.4067795f, -0.2310956f, -0.5686654f, -0.3784330f, -0.7147337f, +0.3678120f, -0.1961297f
);

const float biases[4] = float[4](
  +0.0657871f, -0.0668224f, +0.1053989f, -0.1892868f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer54 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2142872f, -0.0520974f, -0.1055000f, -0.3999147f, +0.2412488f, +0.1496858f, +0.0095282f, -0.0265971f,
  +0.0295149f, +0.0748426f, +0.1496655f, -0.4272468f, -0.0098120f, -0.1126138f, +0.3014490f, -0.2858453f,
  -0.1574943f, +0.1500701f, +0.0885501f, +0.0110650f, -0.0738344f, +0.2128258f, +0.2292646f, +0.0408952f,
  -0.1366349f, +0.2503292f, +0.7296219f, -0.0786502f, -0.0743942f, +0.0031918f, +0.0908115f, -0.1331038f,
  +0.2297695f, -0.2917557f, -0.0570742f, -0.1177632f, +0.1244534f, +0.1433715f, +0.1383808f, -0.4684345f,
  +0.2748856f, +0.2538824f, -0.0657533f, -0.0977157f, +0.2223951f, -0.2821349f, +0.2634439f, +0.1453139f,
  -0.2388887f, +0.0436237f, +0.7981690f, +0.3096136f, +0.0329536f, +0.3582078f, -0.1510206f, +0.1884999f,
  +0.4959962f, +0.2471193f, -0.0592889f, -0.1795188f, +0.1691570f, +0.1287443f, +0.0232126f, -0.1117764f,
  -0.1361161f, -0.2305633f, -0.6493420f, +0.1163414f, -0.0965133f, +0.0174770f, +0.0155387f, +0.0327873f,
  -0.0531430f, -0.1142328f, -0.1734149f, +0.1681341f, +0.1681854f, -0.2255841f, -0.0634551f, +0.1529289f,
  -0.1660962f, +0.2019726f, -0.0487531f, -0.0554418f, +0.0183709f, -0.5149803f, +0.1834423f, -0.0479466f,
  +0.0505524f, +0.1554823f, +0.0671553f, -0.1079852f, +0.1654826f, +0.2888536f, +0.1941683f, +0.1759656f,
  -0.0842928f, -0.0254974f, -0.0236078f, +0.1914225f, -0.0603415f, +0.1178601f, +0.0458109f, -0.5365658f,
  -0.1699405f, -0.3480594f, -0.0681389f, +0.1605983f, -0.0187983f, -0.0186955f, +0.0048140f, -0.3741394f,
  -0.1871751f, -0.0918812f, -0.1293262f, +0.1343416f, +0.0282531f, -0.2626465f, -0.2346589f, +0.0564313f,
  +0.1627645f, -0.2067227f, -0.1086558f, -0.2161146f, -0.1500540f, -0.6490288f, +0.2155531f, +0.0240630f,
  +0.3148539f, +0.3888543f, +0.2529252f, -0.3491783f, +0.2384348f, -0.0398400f, -0.1386165f, -0.3521087f,
  -0.1435521f, -0.2179494f, +0.0252122f, -0.0103109f, +0.0604487f, -0.0595589f, -0.0469819f, -0.1781946f,
  +0.0852067f, -0.0265131f, -0.0801971f, +0.0515365f, -0.1352251f, +0.0615170f, +0.0952296f, +0.0690235f,
  -0.0877131f, +0.1017779f, -0.0848510f, +0.0766442f, +0.2805698f, -0.1016106f, -0.3859126f, -0.2406239f,
  -0.2022413f, -0.0523716f, -0.1010343f, +0.0470642f, +0.3178312f, +0.0626728f, -0.1359121f, +0.2180180f,
  -0.1667379f, +0.0137572f, -0.3358169f, -0.0450209f, +0.0110942f, +0.0192486f, -0.0770583f, +0.1907185f,
  +0.1483830f, -0.3740664f, -0.0435562f, +0.3171923f, -0.1527368f, +0.3584084f, +0.2083467f, -0.3696084f,
  -0.4810493f, -0.4259791f, -0.4461958f, +0.2706878f, -0.3331585f, +0.1765513f, +0.2448687f, +0.1712319f,
  +0.0912868f, +0.0684881f, +0.0994376f, +0.3054521f, +0.1477863f, -0.2876319f, -0.1144086f, -0.0706134f,
  -0.1404436f, -0.0314755f, +0.0504266f, -0.0134101f, -0.0588233f, +0.0548051f, +0.0269513f, -0.3553534f,
  +0.0937828f, +0.2203714f, -0.2513635f, -0.1146049f, +0.2243249f, +0.0084351f, +0.1429854f, +0.0119306f,
  +0.0665415f, +0.0691281f, -0.3148566f, +0.0855099f, -0.0400446f, +0.0601636f, -0.0040852f, +0.6366226f,
  +0.1005038f, -0.0075414f, -0.0470461f, -0.0094924f, +0.1583953f, -0.2206828f, +0.0031115f, -0.4104043f,
  +0.1633806f, +0.0065219f, -0.0777708f, +0.0505695f, -0.1906026f, -0.1162203f, +0.2187615f, -0.1242488f,
  -0.2807968f, -0.5201628f, -0.6771494f, -0.1587459f, -0.2790195f, -0.4678079f, -0.1448798f, +1.0692334f,
  +0.0057976f, +0.0646426f, +0.0807390f, -0.1819669f, +0.0631498f, -0.0849570f, -0.0087800f, +0.4319101f,
  +0.1774416f, +0.3429906f, -0.2174207f, +0.1652588f, +0.2603777f, -0.2953678f, -0.1045634f, +0.1461009f,
  +0.2744716f, +0.2535964f, +0.1257952f, -0.4017353f, +0.1147733f, +0.0515004f, -0.2860306f, +0.6512347f,
  -0.1608368f, +0.0814872f, -0.1120367f, +0.0049318f, -0.0913290f, -0.1387668f, +0.1186012f, +0.0310778f,
  -0.2017634f, -0.3516762f, -0.1285340f, -0.0580783f, -0.0533586f, -0.5945938f, +0.0104344f, +0.0703838f
);

const float biases[4] = float[4](
  +0.0300952f, +0.1575059f, -0.0381736f, +0.0477259f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer54 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0803689f, +0.1368823f, -0.2527766f, +0.2057712f, +0.1226287f, -0.0293923f, -0.0482021f, -0.0459881f,
  +0.2300738f, -0.0394631f, -0.0947734f, +0.0919900f, +0.0348797f, -0.0034863f, +0.2551262f, -0.1193398f,
  +0.1238438f, +0.0177006f, -0.0544516f, +0.1716885f, -0.1924572f, +0.1099987f, +0.1792531f, +0.2533967f,
  -0.4889865f, -0.0204071f, +0.3568502f, -0.4607809f, -0.0268546f, -0.0910383f, +0.1929353f, +0.3057521f,
  -0.1542741f, -0.2237876f, -0.2003625f, +0.0451453f, -0.0734975f, +0.1864768f, -0.0727410f, -0.2204036f,
  +0.0812184f, +0.2830895f, +0.0122055f, -0.0074364f, -0.0796547f, +0.1829961f, -0.0405883f, +0.0565113f,
  -0.0154932f, +0.1817318f, +0.5926861f, -0.0358810f, +0.0495231f, -0.2504666f, -0.2232724f, +0.4942631f,
  +0.0928767f, +0.1407708f, -0.3278767f, -0.0267408f, -0.1506484f, +0.0588430f, -0.2467185f, +0.1055000f,
  -0.0641927f, -0.0373360f, +0.1479360f, +0.0373431f, -0.0497917f, +0.1359380f, -0.0771856f, -0.0363371f,
  +0.1147330f, -0.0789795f, -0.0447267f, -0.1780662f, -0.1583314f, +0.4258963f, -0.3057639f, +0.3752315f,
  +0.0969986f, +0.0613202f, +0.0444393f, +0.1684907f, -0.0781226f, -0.0379508f, +0.0584754f, +0.3035540f,
  -0.0118935f, -0.0709946f, +0.0987170f, -0.0058330f, +0.1660537f, -0.1000401f, -0.0607740f, -0.0274229f,
  -0.0176152f, -0.2873805f, -0.3314266f, +0.3840672f, -0.2803880f, -0.0176945f, -0.2278559f, +0.2939591f,
  +0.1000327f, +0.1425259f, +0.0620229f, +0.0795457f, +0.0171274f, +0.1598487f, +0.0207114f, +0.2530921f,
  -0.3094847f, -0.4071063f, +0.1120741f, -0.1505609f, -0.2968502f, -0.0247972f, +0.0330942f, -0.1805916f,
  +0.0490195f, -0.0578532f, +0.1738106f, -0.2144837f, +0.0415038f, +0.5670072f, -0.0246823f, +0.5183513f,
  -0.1440197f, -0.0922954f, +0.0453914f, +0.2917262f, +0.0037077f, -0.4167210f, +0.0361120f, +0.1742489f,
  +0.2987021f, +0.1659217f, -0.0124105f, +0.1903969f, +0.0927161f, +0.1816399f, +0.1549909f, +0.1035388f,
  -0.1253006f, +0.1058403f, +0.1476487f, -0.1135645f, +0.3534456f, +0.2638842f, -0.0491164f, -0.3841550f,
  -0.0479444f, -0.3292438f, +0.0569743f, -0.2863281f, -0.1434419f, -0.1893806f, +0.1811421f, -0.0903927f,
  +0.0595692f, +0.1274732f, +0.0272131f, +0.0826399f, -0.1273794f, +0.0376352f, +0.0066487f, +0.1109400f,
  +0.1242473f, -0.1867371f, +0.5013330f, -0.3575509f, +0.0189371f, +0.1865093f, +0.1409862f, -0.1085144f,
  +0.0657803f, -0.4981429f, +0.1801009f, -0.0219886f, -0.6544476f, +0.4019605f, -0.0034786f, +0.2808817f,
  -0.1620144f, -0.4594020f, -0.2492871f, -0.2190074f, -0.1840406f, -0.0399895f, -0.0531315f, +0.0741511f,
  -0.0173175f, +0.1073699f, +0.3018413f, -0.0521474f, -0.1060509f, +0.3809909f, -0.1922715f, -0.2557447f,
  +0.1206197f, +0.1811534f, +0.4278038f, -0.0935295f, -0.1544658f, +0.2775257f, +0.0611717f, -0.2095496f,
  -0.0034836f, -0.1009454f, -0.1707451f, +0.0015616f, +0.0189412f, +0.1355728f, +0.2169273f, -0.0011387f,
  +0.0315713f, +0.0821340f, -0.1420604f, +0.3544883f, +0.2252793f, -0.1194335f, +0.3095058f, -0.0675601f,
  +0.3378820f, +0.1916197f, +0.1451768f, +0.3466410f, -0.3438120f, +0.0627817f, +0.0314034f, +0.0451736f,
  -0.0475081f, -0.4917474f, -0.0565750f, +0.1488783f, +0.1016644f, -0.4052062f, +0.0034534f, -0.1938664f,
  -0.1017193f, +0.0467485f, +0.1854333f, +0.2912544f, -0.0549787f, +0.1564094f, +0.3780698f, -0.1825867f,
  -0.0455797f, +0.0426178f, -0.3306960f, +0.3042519f, -0.3370185f, +0.2294724f, -0.2901742f, +0.0949374f,
  -0.0373121f, +0.3860584f, -0.1023643f, +0.1024325f, -0.0404256f, +0.1499571f, -0.2198092f, -0.3168933f,
  -0.2126622f, -0.0448503f, -0.0550079f, -0.0350846f, -0.0856927f, +0.0439769f, -0.0282476f, -0.0479501f,
  -0.0614652f, -0.0934804f, +0.0833056f, +0.0276427f, -0.1918793f, +0.2137001f, -0.1169718f, -0.0535094f,
  +0.0621634f, +0.1554666f, +0.2558773f, +0.1984057f, +0.1920498f, +0.1665453f, +0.0963819f, +0.0620021f
);

const float biases[4] = float[4](
  +0.0374199f, +0.0202053f, -0.0521477f, +0.0349958f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer55 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1483416f, +0.1299135f, +0.0473187f, -0.2439636f, +0.0566517f, -0.1323861f, -0.0291972f, -0.1646946f,
  -0.0622666f, -0.4469028f, -0.2809290f, +0.3396298f, +0.1387860f, +0.0749379f, -0.0355679f, +0.2837066f,
  +0.0515013f, +0.4608988f, -0.0932089f, -0.2326759f, -0.3216994f, -0.2294347f, -0.1947687f, +0.0365729f,
  +0.0014295f, +0.2158527f, +0.1083126f, -0.0245050f, +0.3371058f, +0.0768771f, -0.1285926f, -0.0328081f,
  +0.0937186f, +0.1654075f, +0.4007271f, -0.2960762f, -0.1087498f, -0.1730739f, +0.0952015f, -0.1551195f,
  +0.2017304f, +0.4904289f, -0.0705553f, +0.1387611f, +0.1511633f, +0.6351256f, +0.1368074f, +0.1209351f,
  -0.0849313f, +0.0102881f, +0.2040765f, -0.0434328f, +0.2603158f, +0.0569013f, -0.0162649f, -0.0856322f,
  -0.3206111f, -0.1624455f, +0.1125637f, -0.2324062f, +0.1103849f, +0.2556348f, +0.3630231f, +0.0216550f,
  -0.1630076f, +0.0912672f, -0.0131848f, -0.1397082f, -0.1649253f, +0.2132142f, +0.0597762f, +0.0104846f,
  +0.0093321f, -0.1732442f, +0.0225369f, +0.0650240f, +0.0022398f, +0.1381245f, -0.1521646f, -0.0255783f,
  +0.3742741f, +0.1181498f, +0.3129751f, -0.2276460f, -0.1413989f, +0.1409657f, +0.1783888f, -0.1490642f,
  -0.2316725f, -0.1451483f, -0.0244686f, +0.2858663f, +0.1808980f, -0.0612420f, +0.1679685f, -0.0174061f,
  +0.0933546f, -0.0833089f, +0.2900322f, -0.1563859f, -0.2551764f, +0.1585442f, +0.2528316f, -0.1910280f,
  -0.6235808f, +0.3464925f, -0.2187194f, +0.7459059f, +0.5755453f, -0.0775456f, -0.1313782f, +0.4203997f,
  -0.1409459f, +0.0823589f, -0.3005936f, -0.0692740f, -0.6745395f, -0.2891877f, -0.2808295f, -0.3297810f,
  -0.2150825f, +0.0804995f, -0.2767770f, +0.0673826f, +0.0627321f, -0.1122605f, +0.1576518f, +0.2297638f,
  +0.0614305f, -0.3247003f, -0.2449659f, -0.2935112f, -0.6566679f, -0.3669637f, -0.2935928f, -0.6264428f,
  +0.2380218f, -0.1801379f, +0.1150522f, +0.2118739f, +0.4608082f, -0.1185860f, -0.0785353f, -0.0195942f,
  -0.0110248f, +0.0310957f, +0.0829069f, +0.0242586f, -0.1031586f, +0.0405590f, +0.0146899f, +0.0976291f,
  -0.0125216f, +0.1193063f, +0.1203014f, +0.1616868f, +0.0699889f, +0.1950672f, +0.2275046f, +0.0224874f,
  -0.1109170f, +0.1018719f, -0.0297993f, +0.2297921f, +0.0895810f, -0.0917144f, +0.1071973f, -0.2720057f,
  +0.4009256f, -0.0466206f, -0.1591909f, +0.2186201f, +0.0090319f, +0.0794017f, +0.2850052f, -0.0885569f,
  -0.5499976f, +0.2049075f, -0.0687376f, +0.4737452f, +0.2454444f, -0.2499289f, -0.0416512f, -0.1643649f,
  -0.4760089f, +0.4133447f, +0.0952213f, -0.0143307f, -0.3836188f, -0.1368146f, +0.1349539f, -0.1888751f,
  -0.1585030f, +0.1665568f, -0.1098219f, +0.1147707f, +0.0796638f, +0.0101054f, +0.2338608f, +0.1897988f,
  -0.4294754f, +0.1229472f, +0.2624403f, -0.1505560f, -0.2166512f, +0.0125232f, +0.0131151f, -0.0252077f,
  -0.2728289f, -0.1303708f, +0.4405952f, -0.3076432f, -0.0588757f, +0.1115522f, +0.2992138f, -0.2214137f,
  -0.1543353f, +0.0508450f, +0.2445989f, -0.2817608f, +0.1372215f, -0.0005424f, +0.0039218f, -0.0050022f,
  -0.0600945f, -0.1589762f, -0.3383594f, +0.1063382f, +0.2176642f, -0.1467580f, +0.1144837f, +0.2799266f,
  +0.0437426f, +0.0008248f, -0.0741936f, -0.1343966f, -0.1171075f, +0.0946956f, +0.2157924f, -0.0095827f,
  -0.0678668f, -0.1275658f, +0.2180875f, -0.2679758f, +0.0416165f, +0.0155807f, -0.3521934f, -0.3069846f,
  +0.2422671f, +0.0279424f, -0.5641370f, +0.2806842f, +0.2165973f, +0.2733120f, +0.2087185f, +0.3710623f,
  +0.1016019f, -0.0788091f, +0.0383617f, -0.3668270f, -0.0408244f, -0.1821374f, +0.3125617f, -0.1106677f,
  +0.0403058f, +0.0355065f, +0.0536707f, -0.0908604f, -0.0367567f, +0.0134998f, -0.0684116f, -0.2782243f,
  +0.0191716f, +0.1108643f, -0.2078758f, +0.0706818f, +0.0157491f, +0.0143252f, +0.0104632f, +0.3062644f,
  -0.0781835f, -0.2384875f, -0.0418656f, -0.1125551f, -0.1312054f, -0.0173165f, +0.0619580f, +0.0315176f
);

const float biases[4] = float[4](
  +0.0533734f, -0.0334820f, -0.0179668f, +0.0649918f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer55 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0980811f, -0.0385427f, +0.2169282f, +0.1644711f, -0.1980216f, +0.3118776f, +0.2764573f, +0.2961833f,
  +0.1167556f, +0.1862156f, -0.0131829f, -0.0583663f, +0.1726502f, -0.0900585f, -0.3373027f, -0.3021361f,
  -0.1662462f, -0.0405685f, +0.2163582f, -0.1846009f, -0.1544810f, -0.4166916f, +0.0441746f, -0.0275813f,
  -0.0838770f, -0.1683663f, -0.0713400f, +0.1048179f, +0.1690456f, +0.0447190f, +0.4132058f, +0.0636476f,
  +0.1052251f, -0.4210894f, -0.1181587f, +0.5992470f, -0.3728446f, -0.1266760f, -0.6688802f, +0.0575738f,
  +0.0689997f, +0.4738508f, -0.0517387f, -0.2594335f, -0.1923994f, -0.1639659f, -0.0709171f, -0.1714952f,
  -0.2132955f, -0.0512760f, -0.1826868f, -0.0413545f, +0.0644857f, +0.0966788f, +0.2215241f, +0.2810892f,
  -0.0449547f, -0.0698747f, +0.1812525f, +0.1288953f, +0.1750078f, -0.0261071f, -0.0854225f, +0.0115935f,
  +0.1031443f, -0.0106698f, -0.0403187f, +0.0132495f, +0.0595855f, -0.1516142f, +0.1029459f, +0.0847410f,
  +0.2304588f, -0.0368643f, -0.0899331f, +0.1886937f, -0.1433936f, -0.1765991f, -0.0810098f, -0.1643356f,
  -0.4442185f, +0.1698864f, +0.1688327f, +0.1535458f, +0.0467658f, +0.1455812f, +0.3165711f, +0.0296362f,
  +0.6400433f, -0.2194127f, -0.2290085f, +0.2629379f, -0.0397875f, -0.0543515f, -0.4134470f, -0.3517060f,
  -0.2874040f, +0.0334232f, +0.0404142f, +0.0697492f, -0.0976660f, -0.2450857f, -0.1792935f, +0.0409172f,
  -0.3194480f, +0.4079321f, +0.3231965f, -0.1227410f, -0.0875403f, -0.0351897f, +0.6015446f, -0.1166517f,
  +0.7252639f, -0.5541880f, -0.0764295f, +0.1434016f, +0.0824219f, +0.1828115f, -0.5476866f, -0.2157150f,
  +0.1755160f, -0.2025653f, +0.0447277f, -0.0083744f, -0.2713687f, -0.1063790f, -0.2211293f, -0.3229707f,
  -0.0230397f, +0.2704749f, +0.0948300f, -0.0307823f, +0.1440922f, +0.1063849f, +0.1199439f, -0.0694015f,
  +0.1539822f, -0.0562476f, -0.3958794f, +0.1465403f, -0.2293941f, -0.2095546f, -0.3270425f, -0.0654116f,
  +0.0773909f, -0.0408738f, -0.5774716f, +0.1316508f, -0.0670148f, +0.1104095f, -0.1979094f, -0.0738711f,
  +0.2865086f, -0.0952095f, -0.3367702f, -0.3017328f, +0.0369105f, +0.0938926f, +0.2179915f, +0.0346223f,
  -0.0099990f, +0.2448823f, +0.0751337f, +0.2112842f, +0.0640550f, -0.1378813f, +0.0910800f, +0.0167514f,
  -0.2917725f, +0.0876927f, +0.3369658f, -0.2579387f, +0.0837238f, -0.0526381f, +0.2573690f, +0.0816205f,
  -0.2457189f, +0.1421700f, +0.1047237f, +0.0161673f, +0.2776619f, +0.1392016f, -0.0789288f, +0.2704497f,
  -0.1179113f, +0.0318713f, +0.1283315f, +0.3562980f, +0.2564803f, +0.1785954f, +0.0703822f, +0.0542609f,
  -0.1574666f, -0.0146824f, -0.0649584f, -0.0189042f, +0.2491599f, +0.0593225f, +0.1753949f, +0.0855224f,
  -0.0908839f, +0.0102847f, +0.0005920f, +0.0803444f, -0.0205923f, +0.1194949f, -0.1466163f, +0.1388956f,
  -0.1988997f, -0.1268518f, +0.2741032f, -0.0340747f, -0.1502136f, -0.0242242f, -0.1569375f, -0.1767320f,
  -0.0695806f, -0.0816984f, +0.1524574f, -0.0336003f, -0.0167962f, -0.0577744f, -0.0050512f, -0.0038955f,
  +0.2101174f, +0.2277686f, +0.1508446f, +0.1309888f, +0.3019007f, -0.0139610f, +0.2947062f, +0.0625051f,
  +0.0624470f, +0.1575479f, +0.0550861f, +0.0649816f, -0.0073702f, -0.0171344f, -0.0162602f, -0.1034250f,
  -0.1244948f, -0.2166778f, +0.2859657f, +0.0555077f, -0.0594142f, +0.0803759f, +0.1851828f, +0.0781099f,
  -0.1887287f, +0.2245945f, -0.0962170f, +0.0757975f, +0.4689745f, -0.0142871f, +0.4489030f, +0.6208639f,
  +0.1570221f, +0.3442358f, -0.1877944f, +0.1570207f, -0.1678717f, +0.4800225f, -0.3057474f, -0.1243251f,
  -0.2637087f, +0.0017468f, +0.1675864f, -0.3366895f, -0.0124289f, +0.2312582f, +0.1867713f, -0.1697325f,
  -0.2118039f, -0.0420578f, -0.1170645f, -0.0735557f, +0.2745924f, +0.2131435f, +0.1857503f, +0.1827223f,
  -0.2197384f, +0.1095866f, +0.0216319f, -0.0135631f, -0.2440781f, +0.1893167f, -0.2465672f, -0.0832234f
);

const float biases[4] = float[4](
  -0.0406787f, -0.0727912f, +0.0439026f, +0.0862880f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer56 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0563680f, -0.0384472f, -0.0822255f, -0.0261779f, -0.0605401f, +0.0695418f, +0.0727417f, +0.2919237f,
  +0.0845821f, -0.3492630f, +0.2507000f, -0.0659317f, +0.0697951f, +0.1021930f, +0.0660149f, +0.0566138f,
  -0.0332818f, +0.0237792f, -0.0343408f, -0.0428382f, +0.2421921f, +0.2149937f, +0.0265925f, +0.1051533f,
  -0.0856714f, +0.3101179f, +0.2845856f, -0.5270616f, -0.1459101f, +0.1474894f, +0.0380017f, +0.1009624f,
  -0.2074280f, -0.1550514f, +0.1921176f, -0.0683364f, -0.2660596f, +0.4135207f, +0.4083381f, -0.0493056f,
  -0.0381411f, -0.0554446f, -0.0411544f, +0.2981417f, -0.0815124f, -0.3170268f, -0.0374619f, -0.0486603f,
  +0.0288265f, -0.0081321f, +0.0888601f, -0.0923723f, -0.1353345f, -0.1970700f, -0.0862211f, -0.0809008f,
  -0.0525654f, +0.1694506f, +0.1265425f, +0.3531639f, +0.3020642f, -0.1955109f, -0.3167256f, +0.1606456f,
  -0.1400227f, -0.1915505f, -0.0435136f, +0.2744903f, -0.0813715f, +0.2330980f, -0.0516887f, +0.2718753f,
  +0.0217537f, +0.3292617f, -0.2270268f, +0.3241024f, +0.0573617f, +0.0255920f, +0.1681251f, -0.1663734f,
  +0.1148830f, +0.0911254f, +0.0106079f, +0.0855972f, +0.0893863f, +0.2863693f, +0.0440704f, -0.1082298f,
  -0.0150623f, +0.1225513f, +0.1038092f, +0.0863547f, -0.0005163f, +0.0595844f, +0.0035295f, +0.0899047f,
  -0.5606271f, +0.3766731f, +0.0765053f, +0.1148959f, +0.0846359f, +0.1513486f, -0.0318893f, -0.3990557f,
  -0.2629133f, -0.7294892f, +0.0093506f, -0.0299201f, +0.0840170f, +0.2303603f, -0.3578837f, -0.1802792f,
  -0.0612099f, +0.1513124f, +0.1653173f, +0.0651694f, -0.0473230f, -0.0289183f, +0.0072113f, +0.0412541f,
  -0.1392282f, -0.0772549f, -0.1653792f, -0.1394115f, -0.2150381f, +0.2851612f, +0.0423672f, -0.1536030f,
  +0.2984604f, +0.2434514f, +0.0581943f, +0.0678429f, -0.1551602f, +0.3818764f, +0.0142393f, -0.3210400f,
  -0.1887432f, -0.1589728f, -0.1139835f, -0.0453832f, +0.2500565f, -0.0768169f, +0.0987110f, +0.0056886f,
  -0.0480757f, -0.1101341f, -0.0286495f, -0.0235787f, -0.0353125f, -0.2256984f, -0.1013186f, -0.0634594f,
  -0.0850491f, +0.4934584f, +0.0535423f, +0.1127123f, +0.2813047f, -0.2151926f, -0.1143883f, +0.0279223f,
  -0.1087028f, -0.1896362f, +0.2591442f, -0.0764832f, +0.1129099f, +0.1289057f, +0.0193633f, -0.0076847f,
  +0.1678072f, -0.2786855f, -0.0008748f, +0.2058126f, +0.0008264f, -0.2039436f, +0.0059999f, +0.2519535f,
  -0.4551045f, +0.3086437f, +0.0368497f, +0.4808491f, +0.0802826f, -0.2970403f, -0.0554656f, +0.0729112f,
  -0.0352309f, -0.5880779f, +0.0385914f, +0.1994261f, +0.3768446f, -0.2212012f, -0.3984162f, +0.0703337f,
  -0.0899838f, +0.0911876f, -0.0165157f, +0.0615240f, +0.1091925f, -0.1940623f, -0.0142809f, -0.1371210f,
  -0.0513412f, -0.1551392f, +0.0744921f, +0.1940835f, +0.0620627f, -0.3275623f, +0.2709013f, -0.0664537f,
  -0.1238623f, +0.0338963f, -0.0278107f, -0.0138797f, +0.1245760f, -0.1907169f, +0.1484006f, -0.0200534f,
  -0.0790369f, -0.0295444f, -0.0635802f, +0.1104766f, +0.0197621f, -0.2341463f, +0.0157999f, -0.3720123f,
  -0.1467505f, -0.2093559f, -0.0903603f, +0.1221226f, +0.2086696f, -0.2062205f, +0.0018184f, +0.0344358f,
  -0.0600774f, -0.1197795f, +0.0615027f, +0.1515056f, +0.1504626f, +0.3803616f, +0.0890729f, +0.1766520f,
  -0.2103736f, -0.5988252f, -0.1215145f, +0.4119591f, +0.1685778f, -0.2733304f, -0.2792130f, -0.0834650f,
  +0.3716887f, -0.3349556f, -0.3242705f, -0.0952396f, +0.3585721f, -0.2555641f, -0.0100205f, +0.0349137f,
  +0.1431791f, +0.2755378f, -0.0711743f, +0.1710583f, -0.2491274f, +0.1430406f, +0.2084174f, -0.1593731f,
  +0.4253613f, +0.1662774f, -0.0571944f, +0.0033816f, -0.0036949f, -0.1606711f, -0.0278767f, -0.1201790f,
  -0.0877210f, -0.0900504f, -0.2343100f, -0.1987785f, -0.2175832f, +0.1902385f, +0.5697794f, -0.2674431f,
  +0.1128903f, -0.0515791f, -0.0268570f, +0.1594784f, +0.1667604f, +0.3819623f, +0.1094540f, -0.0438393f
);

const float biases[4] = float[4](
  +0.0227870f, +0.0897908f, -0.0225396f, -0.0681335f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer56 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1386532f, -0.1764344f, +0.2025266f, +0.0414507f, -0.2268959f, -0.0245534f, +0.1343357f, -0.0397763f,
  +0.0966590f, +0.4372257f, +0.0894556f, +0.1952306f, +0.1492134f, -0.0431487f, +0.0578152f, +0.0830986f,
  -0.0749489f, -0.1251833f, -0.0048021f, -0.0263624f, +0.0839924f, +0.1481669f, +0.0108840f, -0.0285801f,
  +0.1210283f, +0.2881353f, +0.1665203f, -0.1236051f, +0.0098559f, +0.2469237f, -0.1189962f, +0.2911224f,
  +0.5290875f, -0.1314231f, -0.0460012f, +0.0085318f, -0.5592343f, +0.3591447f, -0.0443058f, -0.2974051f,
  +0.0672531f, +0.3428397f, +0.2265195f, -0.2955225f, +0.0248195f, +0.3479537f, -0.2897358f, -0.0472907f,
  +0.2109685f, +0.1598476f, +0.1395640f, -0.1318399f, -0.3680133f, -0.0534609f, -0.2330028f, -0.0470316f,
  +0.1278357f, -0.1743449f, -0.0583741f, -0.2456378f, +0.4958840f, +0.1229610f, -0.0418196f, -0.3728566f,
  +0.1564713f, +0.0299796f, +0.1619166f, +0.0606477f, -0.4218604f, +0.5219768f, -0.1643644f, -0.0992609f,
  -0.0599619f, +0.4105285f, -0.0079907f, +0.0525582f, +0.1498779f, -0.0923429f, -0.0296039f, -0.4503850f,
  +0.0174155f, -0.2380842f, -0.0560148f, -0.1838250f, +0.1003961f, -0.3879468f, +0.0100899f, -0.0834256f,
  +0.0292642f, +0.0670910f, +0.0399733f, -0.2143535f, +0.0140866f, -0.0004633f, -0.0709462f, -0.2338358f,
  -0.4620619f, -0.0818689f, +0.1908257f, +0.2095680f, +0.1097390f, -0.3893531f, -0.1672073f, -0.4324284f,
  +0.1879711f, +0.8249705f, +0.2212943f, -0.2912495f, -0.0088053f, -0.4898085f, -0.1696887f, -0.0323771f,
  -0.0057546f, -0.4601305f, -0.0769754f, +0.0010802f, +0.2167211f, +0.0553794f, +0.0280778f, +0.0043448f,
  +0.1861259f, -0.1042483f, -0.0197483f, +0.0772685f, +0.0926765f, -0.0567042f, +0.1877565f, +0.1299572f,
  -0.1215490f, -0.0262976f, -0.0658889f, +0.2599838f, -0.0556984f, -0.0383091f, -0.0729555f, +0.4710224f,
  +0.0208839f, +0.0755118f, +0.0304952f, +0.0100185f, -0.1373908f, +0.0329250f, -0.2866869f, +0.1281917f,
  -0.0702668f, +0.1319450f, +0.3437964f, +0.0155736f, +0.0999948f, -0.0262180f, +0.1419175f, +0.2403597f,
  -0.0053617f, +0.1179646f, -0.2214600f, +0.1837208f, -0.0658669f, +0.0801533f, +0.0750949f, -0.0501192f,
  +0.0122916f, +0.0712307f, +0.0157150f, +0.1325812f, +0.0547417f, +0.1280994f, +0.0079642f, -0.0299177f,
  -0.1524918f, +0.1012216f, +0.0209531f, -0.2815380f, -0.0136635f, +0.0734943f, +0.0710675f, +0.2251034f,
  +0.1931396f, -0.5467027f, -0.3652008f, +0.0109890f, -0.2181051f, +0.4206456f, +0.1894302f, -0.1285358f,
  +0.1753716f, +0.0314654f, +0.2203665f, +0.1579050f, +0.2978708f, +0.3878264f, -0.1550070f, -0.0262949f,
  +0.1681707f, +0.1478755f, +0.0335874f, -0.0906942f, -0.0060585f, -0.1455207f, -0.0853705f, +0.0796850f,
  +0.0765995f, -0.0561599f, -0.1203702f, -0.0786381f, -0.0777008f, +0.0545836f, -0.1412520f, -0.1730781f,
  +0.0649832f, -0.0000936f, +0.0584334f, +0.1453752f, +0.2616223f, +0.2927770f, -0.0641976f, -0.0039365f,
  +0.0025424f, -0.1770591f, -0.0562017f, -0.0443483f, -0.1589027f, +0.0512789f, +0.2026390f, +0.1614723f,
  +0.1056418f, +0.2824642f, +0.5916700f, -0.1190996f, -0.0945154f, +0.3317584f, -0.1680026f, -0.1802850f,
  +0.0547381f, -0.2668733f, -0.0611726f, +0.1404867f, -0.0555568f, -0.0504537f, -0.0167257f, +0.0463541f,
  -0.0678414f, +0.1284749f, +0.1414344f, -0.0163355f, -0.1061535f, +0.2604212f, +0.0391966f, -0.0007343f,
  +0.3204678f, +0.0015507f, +0.1514512f, -0.0598906f, +0.6961368f, +0.2564826f, -0.2412419f, -0.0271578f,
  +0.1576433f, -0.0085345f, +0.0262194f, +0.0075226f, -0.3548657f, +0.2192181f, +0.1910874f, -0.2910230f,
  -0.2064424f, +0.0789459f, -0.0414279f, -0.0129188f, -0.1822620f, +0.0988624f, -0.1160797f, -0.0500763f,
  -0.0842544f, -0.0899511f, +0.1135260f, -0.1811713f, +0.0974987f, +0.3659983f, -0.1875061f, -0.1217278f,
  +0.2086915f, +0.0337416f, +0.0171199f, -0.2392706f, -0.2037137f, +0.0913359f, +0.0113712f, -0.0435522f
);

const float biases[4] = float[4](
  +0.0790395f, +0.0279269f, -0.0028376f, +0.0410419f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer57 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0400081f, -0.0886777f, -0.2038458f, +0.0213554f, +0.1444612f, +0.3203159f, +0.0177133f, +0.0783470f,
  +0.2749874f, -0.0894148f, -0.2976031f, -0.0155614f, +0.0455335f, +0.2548987f, +0.2296100f, +0.2993717f,
  +0.2082573f, +0.1309942f, -0.1772209f, +0.0587286f, +0.1373151f, +0.3116834f, +0.0788786f, +0.0455093f,
  -0.0858535f, +0.2711039f, +0.0418383f, -0.1172559f, -0.0731919f, -0.3425520f, +0.3127677f, -0.1125811f,
  -0.3226408f, +0.2087045f, -0.3065471f, -0.0777419f, +0.2813078f, +0.2306986f, +0.3749525f, +0.6079256f,
  -0.0799232f, +0.0839263f, -0.0148968f, -0.1123513f, -0.0387615f, +0.4175732f, +0.1071294f, +0.0778655f,
  -0.1267988f, -0.0485857f, +0.0033785f, +0.1939114f, +0.0817331f, +0.1322636f, +0.0568089f, +0.4130867f,
  -0.1710960f, +0.1656950f, +0.3223943f, -0.1584421f, +0.0209833f, -0.0894979f, +0.0847323f, -0.2224024f,
  -0.1670334f, +0.1300598f, +0.0978595f, +0.1209608f, +0.0733546f, +0.1174854f, +0.0256438f, -0.0027179f,
  -0.1786124f, -0.0784150f, +0.0782112f, +0.0468820f, +0.0489680f, +0.2823097f, +0.2056361f, +0.1577532f,
  -0.0273640f, +0.0825971f, +0.1501525f, -0.0813970f, +0.0663433f, -0.2255468f, -0.0322893f, +0.1021901f,
  -0.0541635f, +0.0022088f, -0.0337153f, -0.1317511f, -0.1225069f, -0.2568011f, -0.0107981f, -0.0339068f,
  -0.0944515f, -0.3313088f, -0.1524841f, -0.0196979f, +0.1469006f, +0.1508748f, +0.3307104f, +0.0934276f,
  +0.3220587f, +0.3248365f, +0.5406335f, +0.0076136f, +0.1779854f, +0.1244666f, +0.1759454f, +0.4553999f,
  -0.1115807f, -0.2267777f, +0.0803570f, -0.3809386f, -0.0361214f, -0.0178083f, +0.2796302f, +0.1310143f,
  +0.0496884f, -0.0043887f, -0.1448721f, +0.0021329f, +0.0069640f, -0.0565595f, +0.1351589f, +0.0871172f,
  +0.1696835f, +0.2795035f, +0.0186643f, +0.3360233f, +0.1525488f, -0.0829779f, -0.1261184f, +0.2718492f,
  -0.1499873f, -0.0333104f, -0.1003599f, -0.1775054f, -0.1434520f, -0.0916505f, +0.1507172f, +0.0679582f,
  +0.1198094f, -0.1154975f, -0.1445506f, +0.3142424f, -0.0745459f, -0.1177056f, -0.2323502f, -0.0968503f,
  +0.0383100f, -0.0827583f, -0.2520515f, +0.0285179f, -0.0673550f, +0.1794515f, +0.0296598f, +0.0422291f,
  +0.1698053f, +0.0236656f, -0.0571369f, -0.0255758f, -0.0513790f, +0.1134425f, -0.0576141f, -0.0643828f,
  -0.2673041f, +0.3267055f, +1.0798172f, -0.3200805f, +0.1268923f, +0.3071975f, +0.3839864f, +0.0859293f,
  -0.2611663f, +0.2280613f, +0.3629312f, +0.0760268f, +0.2398487f, +0.0535615f, +0.2929353f, +0.1516434f,
  -0.0966554f, +0.1001042f, +0.1016811f, +0.2641948f, +0.0829512f, -0.1361076f, +0.1227313f, -0.0066016f,
  -0.2725320f, +0.1455194f, +0.4490604f, -0.2124733f, -0.0542202f, +0.2471203f, +0.0160154f, +0.2240404f,
  -0.1224460f, +0.0896778f, +0.1143783f, -0.3033356f, -0.0670761f, +0.1489798f, +0.1599734f, +0.2777613f,
  -0.0099475f, +0.1534041f, -0.2260016f, -0.0173489f, -0.0672385f, +0.0913110f, -0.1878784f, -0.0144897f,
  +0.1002561f, +0.0203495f, -0.3052105f, +0.1140541f, -0.2648679f, -0.2202662f, -0.0602670f, -0.0112313f,
  +0.0629776f, +0.1309238f, +0.1907765f, +0.0758516f, +0.1182456f, +0.0254059f, +0.0143596f, -0.2493565f,
  +0.2011051f, -0.3441902f, +0.0757581f, +0.0901085f, +0.1048328f, -0.1043674f, +0.0288134f, -0.0106163f,
  +0.0798247f, +0.0978139f, +0.1745646f, +0.0213182f, -0.0552755f, -0.3385809f, -0.0124574f, -0.2101888f,
  +0.0917570f, -0.1175628f, -0.4417088f, +0.2313486f, -0.1887259f, -0.4446305f, -0.3150911f, +0.2281013f,
  +0.0127013f, +0.5075800f, -0.1348657f, +0.5428810f, +0.2620614f, -0.1212772f, -0.1011935f, -0.1526783f,
  -0.0787227f, -0.2371835f, -0.0268614f, +0.3275078f, -0.0434482f, -0.0414130f, -0.2673700f, +0.1146952f,
  -0.0915957f, -0.2075414f, +0.8083010f, -0.1643394f, +0.2681542f, -0.0090256f, +0.0097191f, -0.2620587f,
  -0.0989172f, -0.0813078f, -0.1537799f, -0.0728431f, +0.0784301f, +0.0555889f, +0.1804815f, -0.0076396f
);

const float biases[4] = float[4](
  +0.0486275f, +0.0388092f, +0.0530931f, -0.0808737f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer57 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0944272f, -0.0193568f, -0.2966751f, +0.0529867f, -0.2507096f, +0.0197846f, -0.0425070f, -0.0033958f,
  -0.3786842f, +0.2443140f, +0.4711198f, -0.3160967f, +0.2571507f, +0.4401888f, +0.1044782f, -0.2228927f,
  -0.0904935f, -0.2108922f, +0.0895871f, -0.0236253f, -0.0139453f, -0.5775417f, +0.2041171f, +0.0394577f,
  -0.0095335f, +0.0411178f, -0.1120284f, +0.0130779f, +0.0158265f, -0.1342641f, +0.0298019f, +0.0498982f,
  -0.0326614f, -0.0122010f, -0.3113374f, -0.0842851f, -0.3724974f, +0.1884491f, +0.0624387f, +0.1295028f,
  +0.0777319f, -0.0608263f, -0.2932497f, +0.0190911f, +0.0482003f, +0.1022338f, +0.0753122f, +0.0771812f,
  -0.0372207f, +0.0487626f, +0.0994748f, -0.0371525f, +0.0332017f, +0.1075414f, +0.0573284f, +0.0799057f,
  -0.0954362f, +0.2002298f, +0.1532258f, +0.0370312f, +0.1206754f, +0.0909459f, +0.1212988f, +0.2828816f,
  -0.1073927f, +0.1950885f, +0.0017983f, -0.0651770f, -0.0483484f, +0.0356774f, +0.0324121f, +0.0558796f,
  -0.2708142f, +0.1164579f, +0.1507702f, -0.2714322f, -0.2744695f, -0.3026030f, -0.2700867f, -0.0410673f,
  -0.0794383f, +0.0409361f, -0.2774457f, +0.5529107f, +0.0696305f, -0.0838667f, -0.0036040f, -0.1705747f,
  +0.1853259f, -0.0400334f, -0.2165541f, +0.1594351f, +0.0214309f, +0.0065703f, -0.0688619f, -0.1802665f,
  +0.0899247f, +0.0953029f, +0.4203193f, +0.1963914f, -0.2293632f, +0.1423265f, -0.0322096f, +0.1680859f,
  -0.0523180f, +0.0416900f, -0.0986126f, +0.4576288f, +0.6704067f, -0.1341676f, +0.2722839f, -0.6243707f,
  +0.0766832f, -0.4064904f, +0.3942753f, -0.4987056f, -0.1988395f, -0.4557755f, +0.0023745f, -0.1342503f,
  +0.0218946f, +0.0272800f, -0.1214278f, -0.0421490f, -0.2032028f, +0.2354423f, +0.0832795f, +0.2402672f,
  +0.0425717f, +0.0343716f, +0.2106539f, +0.0243621f, -0.0925938f, -0.3448144f, -0.2705409f, -0.2138132f,
  +0.1799621f, +0.0148536f, +0.1305037f, +0.1106180f, -0.0108737f, +0.1916222f, -0.1746201f, +0.0248580f,
  +0.0893437f, -0.0839287f, -0.2071466f, +0.0935595f, +0.0105036f, -0.2056399f, -0.1092270f, -0.0728545f,
  +0.2440943f, +0.0515810f, -0.1938764f, +0.2018206f, +0.0664247f, -0.2627873f, -0.0068994f, -0.2625734f,
  +0.1046886f, -0.1493222f, +0.2566731f, -0.1225745f, +0.1421399f, +0.2690004f, +0.1050219f, +0.1625345f,
  +0.1227107f, +0.1027266f, +0.1756152f, -0.0622894f, +0.0150505f, +0.0726985f, +0.1497696f, -0.0237813f,
  -0.5862020f, -0.0906238f, -0.4536074f, -0.3039292f, +0.3234216f, +0.3092337f, +0.0011906f, +0.5571706f,
  -0.1444036f, +0.1482579f, +0.3051804f, +0.3432832f, +0.2540188f, +0.2665056f, -0.0345658f, +0.0345300f,
  +0.0261242f, -0.0558929f, +0.0169043f, -0.0407552f, -0.0046789f, +0.0900766f, -0.0494240f, +0.0234711f,
  +0.0832349f, +0.1676697f, +0.3416663f, -0.2474715f, +0.1635170f, +0.2466889f, +0.1886855f, -0.2712885f,
  +0.0330875f, -0.0285511f, -0.4625872f, -0.1573639f, -0.0337999f, -0.1739215f, +0.1782190f, -0.0495433f,
  +0.3082080f, -0.0969835f, -0.0132989f, -0.2855967f, +0.0985764f, +0.1076353f, +0.0378816f, -0.3286856f,
  -0.1126945f, -0.2666075f, +0.2998175f, -0.2239580f, +0.0647672f, -0.0131362f, +0.1741305f, -0.1399350f,
  -0.2465190f, +0.2162141f, -0.1772529f, -0.1149982f, +0.1321010f, -0.1497007f, +0.2428232f, +0.2266302f,
  +0.6005769f, +0.0455567f, -0.0142691f, -0.0484474f, +0.1038852f, +0.1711399f, -0.0658138f, +0.0165277f,
  +0.2601057f, -0.3864268f, +0.0144211f, -0.5773981f, -0.0360119f, +0.4449342f, +0.1490940f, -0.4087933f,
  -0.3420865f, -0.1160424f, -0.1191662f, -0.5075105f, -0.0325980f, -0.2859857f, +0.4282926f, +0.2319484f,
  -0.0863404f, -0.0520556f, -0.0403412f, -0.0922222f, -0.0282503f, -0.1091957f, +0.0251931f, +0.0273412f,
  +0.2869822f, -0.0518010f, +0.0251104f, -0.0883336f, -0.0140746f, +0.0642744f, -0.0681781f, -0.2374024f,
  +0.0516982f, -0.0998261f, -0.2540387f, -0.0536576f, -0.0388425f, +0.0209762f, +0.1545785f, +0.1225520f
);

const float biases[4] = float[4](
  +0.0875562f, -0.0573007f, +0.0659099f, +0.0878114f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer58 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0731728f, +0.0521128f, +0.0349800f, -0.0176614f, +0.2045753f, +0.1032148f, -0.2456090f, +0.0701669f,
  -0.0144704f, -0.1358147f, +0.3677905f, +0.1363047f, -0.0874485f, -0.2702632f, +0.0070791f, +0.0540709f,
  +0.0025426f, -0.1630512f, +0.0593535f, -0.0378309f, +0.0619385f, +0.0497642f, +0.0409540f, -0.0286561f,
  +0.1888767f, +0.0532581f, -0.3111270f, +0.0744698f, +0.1078047f, +0.3027034f, +0.0869621f, -0.0163164f,
  +0.0968706f, +0.1952501f, -0.1134719f, +0.0118002f, +0.1643071f, +0.3976249f, +0.2351747f, -0.1491277f,
  -0.1204557f, -0.0861230f, +0.2317462f, -0.3709131f, +0.2068668f, +0.2948744f, +0.0205680f, -0.0449680f,
  -0.1104085f, +0.0044399f, -0.0142623f, -0.0494169f, -0.0747137f, +0.0417857f, -0.1040076f, -0.0099787f,
  +0.0343160f, +0.3766086f, -0.0401293f, +0.0237695f, +0.0892839f, -0.2794997f, -0.2930498f, -0.0435003f,
  -0.0551285f, +0.0023528f, -0.0222320f, -0.5117715f, -0.0638787f, -0.2578110f, +0.1167470f, -0.3038763f,
  -0.1845978f, +0.0879881f, -0.0870880f, +0.2299462f, -0.2446664f, -0.1748629f, -0.1401992f, +0.2380002f,
  -0.2547007f, -0.1180684f, -0.2766082f, +0.3105616f, -0.0979226f, +0.1669715f, -0.1343347f, -0.0898282f,
  -0.1256835f, +0.0065006f, +0.1747350f, +0.1164281f, -0.0569305f, +0.0773425f, -0.0114540f, +0.0116690f,
  -0.1513081f, -0.0589040f, +0.1747077f, -0.3268163f, -0.0876082f, -0.2818916f, -0.1725410f, +0.3297680f,
  -0.3014161f, +0.0758259f, -0.3435340f, -0.0617675f, -0.0704172f, -0.1118889f, +0.1743280f, +0.2968555f,
  +0.0453965f, -0.2152691f, -0.1256082f, +0.1298494f, -0.2749684f, +0.0116627f, -0.0170742f, -0.0492374f,
  -0.2033032f, -0.0227226f, -0.1056251f, -0.0297118f, +0.3468640f, +0.0981651f, +0.2582587f, -0.1550995f,
  +0.0391583f, -0.0526355f, -0.0991013f, -0.0500071f, -0.0464891f, +0.4173401f, +0.1520869f, +0.1233310f,
  +0.2229340f, -0.0653924f, +0.0963787f, +0.1871291f, -0.0416551f, -0.0085618f, +0.0375276f, +0.1191465f,
  +0.0245876f, -0.0531106f, +0.1497391f, -0.2310882f, +0.1365051f, +0.1104702f, +0.2971344f, -0.0917887f,
  -0.0110530f, -0.1554214f, +0.0996905f, -0.1949459f, -0.1210358f, -0.3491300f, -0.1329723f, +0.1228704f,
  +0.1259418f, -0.0902177f, -0.2934113f, +0.1251699f, +0.1223730f, -0.4448107f, -0.0775956f, -0.1630910f,
  +0.2300666f, -0.1441673f, -0.0620241f, +0.2713986f, +0.0609604f, -0.0084445f, -0.2171632f, -0.1778203f,
  +0.2572185f, -0.1952975f, -0.0651769f, -0.2096925f, +0.1137134f, -0.0800431f, +0.0493369f, -0.1308956f,
  -0.1417343f, -0.1098449f, -0.6183847f, +0.0097158f, +0.3195490f, +0.2783115f, -0.0400499f, -0.2102881f,
  +0.2244344f, -0.0232782f, +0.0721887f, +0.0638254f, -0.2221938f, -0.0466553f, -0.2509193f, +0.1912920f,
  +0.1826948f, +0.1647463f, +0.1305134f, -0.1376730f, -0.3631600f, -0.1667783f, -0.0970090f, -0.1089148f,
  +0.0605760f, -0.3124422f, -0.0432839f, -0.2811575f, +0.3186195f, -0.1745408f, -0.0125650f, +0.1037995f,
  -0.1817399f, +0.1897194f, +0.0059340f, -0.0996602f, +0.0113247f, +0.0130319f, +0.2799799f, +0.1035114f,
  -0.1077826f, -0.1709159f, -0.0308362f, -0.2848400f, -0.1438042f, -0.0632576f, +0.0231327f, -0.2189252f,
  -0.0248374f, -0.1965638f, -0.0940617f, -0.1871940f, -0.0134893f, -0.1758312f, +0.0223778f, -0.0898913f,
  -0.1592061f, -0.0198393f, +0.0539774f, +0.0302189f, +0.0680381f, -0.2540024f, -0.5100141f, +0.0848743f,
  +0.2876228f, -0.2069573f, -0.0103855f, -0.1119910f, +0.1756668f, -0.1217595f, +0.2185538f, +0.1600337f,
  +0.0520804f, -0.2191827f, +0.2507365f, -0.3703887f, +0.1364018f, +0.1266451f, +0.0806625f, +0.2358897f,
  +0.1782687f, +0.2496854f, +0.1123456f, -0.0510722f, +0.0422649f, +0.0836378f, -0.0697548f, -0.1208026f,
  -0.0671509f, +0.1615078f, +0.1222455f, -0.0097187f, +0.2227188f, +0.0054790f, -0.1025938f, -0.0978341f,
  +0.0364073f, -0.2463260f, -0.0654855f, +0.0803917f, -0.3074775f, -0.1683722f, -0.0433222f, -0.1310650f
);

const float biases[4] = float[4](
  -0.0503393f, +0.0305878f, -0.0409839f, -0.0512063f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer58 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2217121f, +0.1421647f, +0.1074479f, -0.0192038f, +0.1329876f, -0.0849489f, +0.0586274f, +0.0133238f,
  -0.3662418f, -0.1915000f, +0.0402815f, -0.0347383f, -0.3004444f, -0.0077075f, -0.0098467f, -0.0106641f,
  +0.1981911f, -0.0348112f, +0.1091677f, +0.3031000f, -0.0201345f, -0.1623093f, -0.0981922f, -0.0393633f,
  +0.1521527f, -0.0376911f, -0.1267063f, +0.0376131f, +0.0961038f, +0.0571931f, -0.1341327f, +0.0223697f,
  -0.2922566f, -0.2954486f, -0.1654708f, -0.1462403f, +0.1927870f, +0.0397944f, -0.0965889f, +0.4454501f,
  +0.0336975f, -0.1694798f, +0.2322815f, +0.2820361f, -0.0317537f, -0.0709294f, +0.0423333f, +0.0060198f,
  -0.2083287f, +0.1585474f, -0.0451968f, +0.0795100f, -0.1727886f, -0.0529979f, +0.0488074f, +0.0588981f,
  -0.0323651f, -0.2293118f, -0.1044206f, +0.0114828f, -0.1181007f, -0.2859891f, +0.0892863f, +0.3383387f,
  -0.1724422f, +0.2511794f, -0.0218518f, +0.3027885f, +0.1393038f, +0.1280996f, -0.0314671f, +0.1362181f,
  -0.1569448f, +0.0971364f, -0.1121426f, -0.0415033f, -0.0398718f, -0.0969527f, +0.1169362f, +0.0821132f,
  +0.1215414f, +0.0875602f, +0.0697749f, +0.2667465f, +0.1007508f, -0.2045270f, -0.0858914f, +0.0028898f,
  +0.0842342f, +0.0464603f, -0.0061890f, -0.0006767f, -0.0364595f, -0.0067469f, -0.0287866f, +0.0804143f,
  -0.1585571f, +0.0455627f, +0.0700761f, +0.0869073f, +0.0856171f, -0.2205911f, -0.1375509f, +0.2296030f,
  +0.0859731f, -0.0372541f, +0.0304183f, +0.4243434f, -0.0425737f, -0.0078437f, -0.1503418f, -0.2910712f,
  +0.0912822f, +0.0732874f, -0.1862129f, +0.1463161f, -0.0011222f, +0.1071413f, -0.0646197f, +0.0060700f,
  -0.1251809f, +0.2193937f, +0.0339478f, -0.2355383f, +0.4637485f, +0.1351482f, +0.0993222f, -0.0958965f,
  -0.1195273f, +0.0351359f, -0.0571818f, -0.1186825f, -0.0318118f, +0.2609484f, +0.1807739f, -0.0223337f,
  -0.0765587f, -0.0015250f, -0.0863976f, -0.1834430f, +0.2165612f, +0.1520438f, +0.0600613f, -0.0085336f,
  -0.1404966f, +0.0175527f, +0.0952158f, -0.0073127f, -0.0212069f, +0.0368793f, -0.1403722f, +0.0718963f,
  -0.1373683f, +0.1052623f, -0.0944303f, -0.0190627f, -0.0397469f, +0.3744774f, +0.0082084f, -0.1719510f,
  +0.0432795f, -0.1384615f, +0.0140266f, -0.0434022f, -0.0039033f, +0.1920273f, +0.0050829f, +0.1392811f,
  -0.1335559f, -0.0191101f, -0.2550908f, -0.1359390f, +0.0549807f, +0.2256051f, +0.1029610f, -0.1657969f,
  +0.1666220f, +0.0802409f, -0.5392382f, +0.2764867f, -0.1762564f, +0.6484580f, +0.0906865f, +0.1856081f,
  -0.1184798f, -0.2855965f, -0.1175321f, -0.0334690f, -0.0708649f, +0.0213588f, -0.0800015f, +0.0383948f,
  +0.0776740f, -0.0785662f, -0.0602999f, +0.0529217f, -0.1091746f, +0.0635326f, -0.0990098f, -0.1462739f,
  -0.1106065f, +0.3144628f, -0.0502996f, -0.0392944f, +0.0608620f, -0.0863871f, +0.0014508f, -0.0063243f,
  +0.1189717f, -0.2213243f, -0.1023126f, -0.0455834f, -0.0539127f, -0.1538889f, +0.0326506f, -0.0653290f,
  -0.0237234f, -0.0064660f, +0.0051334f, +0.0694413f, +0.0211681f, +0.1757385f, -0.0000701f, +0.2144379f,
  +0.3241482f, -0.1589880f, -0.1939364f, -0.1993568f, -0.2161943f, +0.3928347f, +0.2538596f, -0.1974266f,
  -0.1875125f, -0.0309208f, -0.2120216f, -0.1910171f, -0.0816109f, -0.0428417f, +0.0976498f, -0.0276295f,
  -0.4079295f, +0.0697719f, +0.0283237f, -0.3361945f, +0.1250116f, -0.0302560f, +0.4184811f, +0.0801129f,
  -0.3755188f, -0.5514875f, +0.1168188f, +0.2418050f, +0.2561689f, -0.4835247f, -0.5951400f, -0.0014714f,
  +0.1379359f, +0.1199755f, +0.0605914f, -0.0521834f, +0.0717748f, -0.0476353f, +0.0504219f, -0.0282046f,
  -0.1756135f, -0.1689744f, -0.0376312f, +0.0474100f, -0.0451414f, -0.1419767f, +0.1358649f, +0.0222673f,
  -0.0476110f, -0.1459851f, +0.0636651f, -0.1462409f, +0.0372099f, -0.0804427f, +0.0930144f, -0.0417702f,
  +0.0972665f, -0.0213317f, +0.0593622f, -0.0147334f, +0.2593526f, +0.0931148f, -0.0173002f, +0.1609102f
);

const float biases[4] = float[4](
  -0.0173737f, -0.0275317f, -0.0133548f, +0.0508869f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer59 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0199177f, +0.0234943f, +0.0242935f, +0.0224504f, +0.0722476f, +0.0504918f, +0.0682084f, +0.0587219f,
  +0.0595234f, +0.0992348f, +0.1855785f, -0.1627684f, +0.2743244f, +0.2554463f, +0.2302795f, +0.1736620f,
  +0.1361387f, +0.2424245f, +0.1286673f, -0.1525439f, +0.1734989f, -0.0360274f, +0.1031725f, +0.0673590f,
  -0.1667900f, +0.0473154f, +0.4394906f, -0.1355115f, +0.2234623f, +0.1429274f, +0.0117942f, +0.0965809f,
  -0.3502169f, -0.0012369f, +0.5935348f, -0.1425601f, +0.4600055f, +0.0094315f, +0.4390801f, +0.4951016f,
  +0.2455180f, +0.0461290f, +0.0314540f, -0.0816540f, +0.0959515f, +0.1316465f, -0.3193493f, -0.0524771f,
  +0.1521817f, +0.1841070f, +0.4450975f, -0.1758840f, -0.0389686f, +0.2084060f, -0.0002028f, -0.0925113f,
  +0.3630218f, +0.1110610f, -0.1739145f, +0.1807666f, -0.1104416f, +0.0653078f, -0.3271684f, +0.1400659f,
  +0.0457334f, -0.1549340f, +0.3698211f, +0.2465154f, +0.4876944f, +0.0571406f, +0.1411979f, -0.0881536f,
  +0.0332922f, -0.0092688f, -0.0512003f, +0.1071699f, +0.0615702f, -0.2246192f, -0.0590189f, -0.1259375f,
  +0.0872070f, -0.0728564f, -0.0015868f, -0.0633006f, -0.1658430f, -0.2696622f, -0.3859905f, +0.0956209f,
  +0.0845747f, -0.0787525f, -0.1156159f, +0.0754952f, -0.0021131f, +0.1196018f, -0.1491474f, -0.1525233f,
  +0.2505690f, +0.0133732f, -0.3544227f, +0.0721685f, -0.0004448f, -0.1104027f, -0.0156393f, -0.1794185f,
  -0.0227648f, -0.2416454f, -0.2933685f, +0.0556148f, -0.0816578f, +0.0618778f, -0.6915549f, +0.2939120f,
  -0.2516202f, +0.1899578f, +0.1677617f, -0.0703361f, -0.0154426f, +0.5594538f, -0.0716583f, +0.0788534f,
  -0.1302629f, +0.0402294f, +0.1047277f, -0.0542797f, +0.2302733f, +0.0732074f, +0.2108206f, -0.0081461f,
  -0.2904043f, -0.0804022f, +0.2173987f, -0.0568895f, +0.0650022f, +0.0475521f, -0.1576855f, +0.1446209f,
  -0.1168071f, +0.1147829f, +0.0243524f, +0.1709688f, +0.0566013f, +0.2472081f, -0.0575796f, +0.0066400f,
  -0.0068403f, +0.3240487f, +0.5608564f, -0.1337402f, +0.0608441f, -0.0721395f, +0.0362505f, -0.1515088f,
  -0.0081553f, +0.0472789f, +0.1111482f, +0.0569674f, +0.0843775f, +0.1354802f, -0.0632469f, -0.0020279f,
  +0.0038993f, +0.1218684f, +0.0806571f, -0.0862419f, -0.0756085f, -0.1916818f, +0.1607039f, -0.0320376f,
  -0.0160567f, -0.0669757f, +0.5353582f, +0.2709859f, +0.1965243f, -0.1738531f, -0.1844007f, -0.1986096f,
  -0.0324647f, +0.1246111f, +0.5666370f, +0.0457620f, -0.0875223f, +0.1470212f, -0.1810956f, -0.0000310f,
  +0.0814656f, -0.0246476f, -0.2518958f, +0.2520242f, +0.0684919f, +0.0689598f, -0.0205494f, +0.0866924f,
  +0.1303503f, +0.0465376f, +0.5120859f, -0.1429387f, -0.1852654f, +0.1132554f, +0.0093425f, -0.2546868f,
  +0.0107075f, +0.2364256f, +0.4396341f, +0.0931652f, +0.0160060f, +0.1212472f, -0.2892419f, +0.0648570f,
  +0.0892983f, +0.2123157f, -0.0536648f, -0.0047239f, -0.1502158f, +0.1549567f, -0.2007889f, -0.2232961f,
  -0.0356088f, -0.0250276f, -0.0234345f, +0.1109489f, -0.0133388f, -0.1886576f, -0.2242107f, -0.1524917f,
  -0.0551295f, -0.2656170f, -0.2718675f, +0.2576728f, +0.1146348f, +0.2361336f, +0.1028761f, +0.2987212f,
  +0.1709860f, +0.2484445f, -0.2946609f, +0.0428670f, -0.0193582f, +0.3899207f, -0.0769486f, +0.1144976f,
  +0.3199889f, -0.1966476f, -0.5060343f, +0.2476485f, -0.4504654f, -0.4112326f, -0.2280072f, -0.2761076f,
  -0.2810762f, +0.0139495f, +0.1282262f, -0.0392627f, -0.0688942f, -0.1752000f, +0.4203400f, +0.5678266f,
  -0.0735274f, +0.2025273f, -0.1191211f, +0.0675258f, -0.0228419f, +0.5043575f, +0.0351792f, +0.0374208f,
  +0.1407596f, +0.0498058f, +0.0802222f, -0.0420306f, -0.0069778f, +0.0017945f, -0.0011717f, -0.0210031f,
  +0.0385550f, +0.0034042f, -0.1785162f, -0.2131223f, -0.0061689f, +0.2325796f, +0.0652685f, -0.1786355f,
  +0.0111270f, -0.0145764f, -0.1843349f, -0.0342284f, -0.0557993f, -0.1317257f, -0.0135870f, -0.0319030f
);

const float biases[4] = float[4](
  +0.0571145f, +0.0174491f, -0.0011157f, +0.0431078f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer59 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2968866f, +0.2672431f, -0.1687086f, -0.0940557f, +0.0495378f, +0.1832740f, +0.4511067f, +0.5643786f,
  -0.1561844f, -0.0829389f, +0.0440783f, +0.2719379f, +0.0247969f, +0.0860295f, -0.0022354f, -0.2776793f,
  -0.0579245f, -0.0818457f, -0.0528903f, +0.0890526f, +0.0601451f, -0.4389820f, +0.0303586f, -0.1409997f,
  -0.3521543f, +0.3541956f, -0.1694266f, -0.2300414f, -0.0398342f, -0.2203845f, -0.0172542f, +0.1641599f,
  +0.0795826f, +0.1645149f, +0.3025247f, -0.0132877f, +0.1743401f, -0.0195908f, +0.0144812f, +0.2722836f,
  -0.3434707f, +0.0084172f, -0.0791900f, -0.0267134f, -0.0611714f, -0.1940971f, +0.0931159f, +0.0985625f,
  +0.4412078f, -0.0668707f, +0.1743166f, +0.1632070f, -0.0407001f, +0.1745880f, -0.2088504f, -0.1215500f,
  +0.2792855f, -0.1605493f, +0.7071669f, +0.2015888f, +0.2814145f, -0.3888818f, -0.3963179f, -0.2749794f,
  -0.0778587f, -0.2367002f, +0.3280476f, +0.2372762f, +0.2153252f, -0.1419303f, +0.0399745f, -0.0537597f,
  +0.0570943f, -0.2732830f, -0.2928087f, +0.1484024f, -0.0011255f, +0.1088775f, +0.0972484f, -0.0239504f,
  -0.2924655f, +0.1250927f, -0.4269578f, -0.3165134f, +0.0645182f, +0.3537488f, -0.0870569f, +0.0365958f,
  -0.0268955f, +0.1862726f, +0.0217204f, -0.0585928f, +0.2450159f, -0.0255212f, +0.1663328f, +0.3206896f,
  +0.0706199f, -0.1430448f, -0.2168420f, +0.2257094f, -0.1471964f, -0.3423882f, +0.0538166f, -0.2406138f,
  -0.4238120f, -0.2680259f, -0.2773715f, -0.2405463f, +0.1866311f, +0.0962599f, -0.1417436f, -0.3082500f,
  +0.1004183f, -0.4254534f, -0.1013235f, -0.0229006f, +0.1053830f, -0.2536361f, -0.1859760f, -0.0313660f,
  -0.0994347f, -0.1445469f, -0.2025623f, +0.2566763f, +0.1920756f, +0.0542899f, +0.1104143f, +0.2446230f,
  -0.1481120f, +0.0644155f, +0.0425264f, -0.1164557f, +0.3016876f, +0.0250855f, +0.0146914f, -0.0570037f,
  -0.0650509f, -0.0526399f, +0.0588823f, -0.1486858f, +0.0265557f, +0.1920954f, +0.0783210f, +0.0259331f,
  +0.0858690f, -0.2655039f, +0.0813850f, -0.0726097f, +0.0598940f, +0.4636143f, +0.1326060f, +0.2372371f,
  +0.4300624f, -0.1362568f, +0.0584459f, -0.1669196f, +0.0792023f, +0.0561139f, +0.1141556f, -0.0472317f,
  +0.1090962f, -0.3449669f, +0.0662784f, -0.0100963f, +0.0337560f, -0.0112184f, -0.0337851f, -0.1110908f,
  +0.0130244f, -0.0296363f, -0.0417711f, -0.0023596f, +0.0545014f, -0.2652241f, -0.0522405f, -0.2307741f,
  +0.1059184f, +0.5551652f, -0.3667749f, +0.3208217f, +0.4635907f, +0.3214083f, -0.4434496f, +0.0101610f,
  +0.0664838f, +0.0625305f, -0.2604722f, +0.1831899f, -0.0318629f, -0.1627800f, -0.1731310f, +0.0667823f,
  -0.1454943f, -0.0324594f, -0.1152756f, -0.0145967f, +0.0371026f, +0.1272479f, +0.1184314f, +0.1280517f,
  -0.0607428f, +0.0571894f, -0.1698025f, +0.0063975f, +0.0244469f, -0.2098497f, +0.0459194f, +0.0062215f,
  +0.0593276f, -0.0137142f, -0.0809994f, +0.0923084f, +0.0549837f, -0.0653326f, -0.0582140f, -0.0884998f,
  +0.2459469f, -0.2863149f, -0.0043875f, +0.3788459f, +0.0718654f, -0.0659431f, -0.0840056f, -0.0685462f,
  -0.2692814f, +0.4103387f, +0.4671454f, -0.2074622f, +0.3171575f, -0.1630698f, +0.1567249f, +0.1751165f,
  +0.0923647f, +0.1203181f, +0.2167721f, +0.0763330f, +0.0646911f, -0.0536865f, +0.1303544f, +0.0551854f,
  +0.1911727f, -0.4637125f, +0.1322473f, +0.2908466f, -0.0186234f, -0.4942105f, -0.2876089f, -0.1366315f,
  +0.0735563f, +0.3923961f, +0.0250345f, +0.0678449f, -0.0512888f, -0.1513789f, -0.0006639f, -0.0094678f,
  +0.3285612f, +0.0535838f, +0.1459833f, +0.0538664f, +0.0278437f, +0.3279398f, -0.1875706f, -0.1419983f,
  -0.0415891f, -0.0830866f, +0.1326164f, -0.0556778f, +0.1925607f, +0.0573764f, +0.2201132f, +0.0154260f,
  -0.0194758f, +0.1071834f, +0.0612160f, +0.0179357f, +0.3034896f, +0.1626371f, +0.3409685f, +0.3374483f,
  -0.0430027f, +0.1945692f, -0.2331356f, +0.1180886f, +0.0437583f, +0.1496210f, -0.0576804f, +0.0235693f
);

const float biases[4] = float[4](
  -0.1983314f, +0.0472141f, -0.0049405f, -0.0172518f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer60 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1851880f, +0.2559226f, -0.2114857f, -0.2263878f, +0.1843048f, +0.3471429f, +0.1387336f, -0.1583969f,
  +0.0189471f, +0.1531866f, -0.3732333f, +0.0857519f, +0.0969395f, +0.1010446f, -0.0929018f, -0.2256678f,
  -0.0732981f, +0.0412196f, -0.2321503f, +0.1327996f, +0.3502148f, +0.1906451f, -0.0667039f, +0.2766568f,
  -0.1356418f, +0.1166660f, -0.1878053f, -0.1842485f, +0.4071496f, +0.1505704f, +0.0471155f, -0.1088281f,
  +0.1060588f, +0.1472033f, -0.3043768f, +0.1429706f, +0.2256240f, +0.3956218f, -0.0872922f, +0.0062412f,
  +0.0977838f, +0.2248245f, -0.0999310f, -0.0598359f, -0.1435061f, +0.1375497f, +0.1395113f, -0.4679781f,
  -0.1504326f, +0.3432880f, -0.1035321f, -0.2378776f, +0.1087730f, +0.0239957f, +0.0900868f, -0.0361884f,
  -0.1973407f, +0.1076507f, -0.2898054f, +0.2947747f, -0.0668109f, -0.1912056f, -0.1478286f, +0.0615273f,
  +0.0541060f, -0.1185639f, -0.1856989f, +0.0510428f, +0.3774669f, -0.0141400f, +0.0093719f, -0.0805172f,
  +0.5441838f, -0.2829666f, -0.0488048f, +0.2318396f, +0.2867503f, +0.3672579f, -0.0696626f, +0.0711493f,
  +0.0092666f, -0.0955922f, +0.0644847f, +0.0466824f, +0.2335230f, +0.2621754f, -0.0071792f, +0.0226020f,
  -0.0394368f, -0.0305055f, +0.1350169f, -0.1055535f, +0.0258975f, +0.0500638f, +0.1414451f, -0.0478775f,
  +0.1916109f, -0.1034004f, +0.1465653f, -0.1963267f, +0.1384644f, +0.1654406f, +0.1771457f, +0.1665265f,
  -0.1433132f, +0.0529031f, -0.2520939f, +0.2492619f, -0.0057642f, +0.0923547f, -0.2394640f, +0.3068105f,
  -0.1243971f, +0.1539548f, -0.2887878f, +0.0035676f, -0.2820283f, -0.2929305f, -0.1261932f, -0.1099503f,
  +0.1639581f, -0.0299304f, -0.0412602f, -0.1909877f, +0.2879229f, -0.1044777f, +0.1804170f, +0.3179535f,
  +0.0937612f, +0.1707322f, -0.1843957f, +0.0894895f, -0.0769615f, +0.0055711f, -0.0659637f, +0.1383098f,
  -0.0454374f, +0.0672427f, +0.0138883f, -0.0305695f, -0.3254708f, +0.0101582f, +0.0846135f, -0.1742184f,
  -0.3144477f, +0.1144705f, +0.0937547f, -0.1385703f, -0.0306660f, +0.0930799f, +0.0508083f, -0.1041707f,
  +0.0328824f, +0.0044791f, -0.1434514f, +0.0167392f, -0.1438698f, +0.0946185f, -0.0575556f, -0.0733119f,
  -0.0998732f, +0.0119725f, -0.3773392f, +0.0517751f, +0.1792422f, +0.0597332f, -0.1308051f, -0.0692872f,
  -0.0137608f, +0.0288258f, -0.2647114f, +0.1969359f, +0.1722239f, +0.1093360f, -0.0734520f, -0.0638508f,
  -0.1538541f, +0.0049005f, -0.1558766f, -0.0464973f, -0.1766237f, +0.2368456f, +0.1867755f, -0.0353855f,
  +0.0018152f, +0.0271869f, +0.0956854f, +0.2149407f, -0.2671696f, -0.0169592f, -0.0110544f, -0.1936940f,
  -0.1253309f, +0.0826909f, -0.0736884f, +0.1748187f, +0.0243721f, +0.0002382f, -0.0893691f, -0.0764966f,
  -0.1508830f, +0.0819517f, -0.0984711f, +0.0650949f, -0.1167206f, -0.1524650f, -0.0449029f, -0.1154801f,
  +0.0773744f, +0.0012247f, -0.0361393f, +0.1445198f, -0.0151756f, -0.0095280f, -0.0387205f, -0.1098637f,
  -0.0335755f, -0.2135158f, +0.0231024f, +0.0984381f, +0.1319531f, +0.2545015f, -0.0065953f, -0.0498840f,
  -0.2511990f, -0.0780807f, -0.0027388f, +0.2062601f, +0.2479753f, -0.0027008f, -0.1532404f, +0.0467272f,
  -0.0364000f, +0.0159974f, +0.0847724f, -0.0143164f, +0.2066111f, -0.0728903f, +0.0164505f, +0.0898803f,
  -0.2644325f, +0.1481001f, +0.0422851f, +0.0368834f, +0.1613482f, +0.0323390f, +0.2323493f, +0.0379297f,
  -0.2524084f, -0.0214589f, +0.0543134f, -0.0859755f, -0.3004399f, +0.0195141f, +0.4466608f, +0.2599029f,
  -0.0818141f, +0.0004117f, +0.1835077f, -0.1165418f, +0.2596056f, -0.1759166f, +0.3245605f, +0.1311570f,
  -0.0208581f, -0.0590598f, -0.1264308f, +0.0782389f, +0.0192504f, +0.0445422f, -0.0822746f, +0.2042979f,
  +0.0857115f, +0.0791706f, -0.0099918f, -0.1591096f, +0.0082061f, +0.3081080f, -0.2100273f, +0.1496375f,
  -0.0318927f, -0.0624453f, +0.0207486f, -0.2327306f, +0.0329316f, +0.0248777f, -0.0255411f, +0.0673157f
);

const float biases[4] = float[4](
  -0.0094015f, +0.0597495f, +0.0132833f, -0.0020258f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer60 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1675555f, -0.0909893f, -0.1236745f, -0.0507061f, -0.1545996f, +0.1471656f, -0.0775432f, -0.2034141f,
  +0.2122345f, -0.1629923f, -0.1603323f, +0.2672738f, +0.0026014f, -0.4015921f, -0.2587784f, +0.1050554f,
  +0.0498066f, -0.3477420f, +0.1063727f, +0.0711541f, +0.0966847f, +0.0324555f, +0.2613651f, +0.4031276f,
  -0.0476623f, +0.2047248f, -0.1699024f, +0.1570115f, +0.0656700f, +0.0386985f, -0.0716904f, -0.2810102f,
  -0.0786806f, -0.1700553f, -0.1389234f, +0.1061372f, -0.1287401f, -0.0213915f, -0.1991423f, +0.1078062f,
  +0.1283452f, +0.1604993f, +0.0883174f, +0.2996192f, -0.1124876f, +0.0469082f, -0.3448779f, +0.4991729f,
  -0.0971985f, +0.1295864f, -0.0538870f, +0.0755932f, -0.1080973f, -0.0838202f, +0.1035808f, +0.0171279f,
  -0.0722319f, +0.1247637f, +0.0868779f, -0.0474447f, +0.2310725f, -0.1173888f, +0.1837219f, -0.1012635f,
  -0.0376092f, +0.0404737f, -0.1037274f, +0.0750165f, +0.0923985f, -0.0510913f, -0.0641455f, +0.2315799f,
  -0.0635105f, -0.0532134f, +0.1211110f, -0.0071588f, +0.0622753f, -0.0767460f, +0.0692974f, +0.1001990f,
  -0.0675601f, -0.1391857f, -0.0028785f, -0.1049640f, +0.6504466f, -0.0112563f, +0.2738607f, +0.1481476f,
  +0.0016243f, -0.0653312f, -0.1088589f, +0.1262103f, +0.4395820f, -0.0741008f, -0.0972227f, +0.2356980f,
  -0.2256254f, -0.0110081f, -0.0251077f, -0.2664104f, +0.0914026f, -0.1014734f, +0.3409269f, +0.1291818f,
  +0.0861243f, +0.1742743f, -0.0724807f, +0.1725686f, -0.4210165f, -0.0171802f, -0.4038651f, +0.0597635f,
  -0.0242211f, +0.0077979f, +0.1145812f, +0.1066019f, -0.1561724f, +0.1790096f, +0.0356681f, +0.0976700f,
  -0.0364145f, +0.1041996f, -0.0409026f, -0.2273823f, -0.0614906f, +0.1258056f, +0.0373755f, +0.1237790f,
  -0.0547440f, +0.0373821f, -0.0478316f, -0.0884653f, -0.1275428f, -0.1752409f, +0.0829695f, +0.2469814f,
  +0.0967996f, +0.0042140f, -0.0330273f, +0.1096021f, -0.4458970f, -0.0665795f, -0.0892751f, +0.1515431f,
  +0.0810747f, +0.0448721f, -0.1714941f, +0.0391824f, -0.0651746f, +0.0001346f, -0.1534926f, -0.0041832f,
  +0.0426753f, +0.3340549f, -0.1676781f, +0.1065110f, +0.0020676f, -0.1244357f, -0.1269555f, -0.0386985f,
  +0.0100354f, -0.0952831f, +0.1775655f, -0.0391355f, -0.0623601f, -0.1413982f, +0.1415280f, +0.1183832f,
  -0.0472739f, +0.2864069f, +0.0164639f, -0.0322235f, -0.4185549f, +0.0739897f, +0.0718972f, +0.0024294f,
  -0.3219529f, +0.7021428f, -0.5214379f, -0.2037746f, +0.0710939f, +0.0269700f, +0.4715867f, +0.1874284f,
  +0.0250234f, +0.1256488f, -0.0718193f, +0.0344483f, -0.3975542f, -0.0888069f, -0.0212958f, -0.1278703f,
  +0.0320574f, +0.0889130f, -0.1275688f, -0.0628116f, +0.0896882f, +0.0617780f, -0.0730970f, +0.0289087f,
  -0.0404492f, +0.2685776f, -0.2471402f, -0.0317542f, -0.4386622f, +0.1438997f, -0.2944993f, +0.2425262f,
  +0.0321094f, +0.0068080f, -0.1055717f, -0.0390824f, -0.3391110f, -0.1408216f, -0.1028915f, +0.1250475f,
  +0.0440421f, -0.0439021f, -0.1906870f, -0.0689657f, +0.3189691f, +0.2730221f, +0.1172355f, -0.0141248f,
  -0.0098461f, -0.0063727f, -0.0098602f, +0.0209693f, -0.2804156f, +0.0423628f, -0.2432404f, -0.2324465f,
  +0.0456920f, +0.0322840f, +0.0810627f, +0.0274064f, -0.1886453f, -0.0924011f, -0.1939387f, -0.1174476f,
  +0.2590202f, -0.2935336f, +0.1978029f, -0.0539234f, -0.0846971f, +0.0044962f, -0.1611756f, +0.0158155f,
  -0.1168537f, -0.6191981f, +0.4313551f, -0.4149168f, +0.1440266f, +0.1585347f, +0.3950249f, -0.0746415f,
  +0.1405519f, +0.1322196f, +0.2083943f, -0.0545894f, +0.0727346f, +0.0805056f, +0.1410489f, -0.4457275f,
  +0.0905951f, -0.0194558f, +0.0418926f, -0.0788338f, +0.0543021f, -0.1294179f, +0.0510533f, +0.0347823f,
  -0.0623542f, -0.1849204f, +0.0677970f, -0.0963990f, +0.0066885f, -0.2331167f, +0.0136169f, -0.1452681f,
  +0.0742771f, -0.0822236f, -0.0272329f, +0.0256834f, +0.0661079f, +0.1485595f, -0.0188648f, -0.1574296f
);

const float biases[4] = float[4](
  +0.0006723f, +0.0379928f, -0.0469177f, +0.0544641f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer61 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0811053f, +0.0480920f, +0.0560271f, -0.2132179f, -0.0099903f, +0.0773151f, -0.0549825f, +0.2194503f,
  +0.1659468f, -0.0539397f, -0.4092146f, -0.2932784f, -0.0575895f, +0.2427977f, +0.0165736f, +0.1031742f,
  -0.0070486f, +0.0950096f, +0.0115554f, -0.0231213f, -0.0020673f, -0.1505040f, +0.1102367f, +0.0828486f,
  -0.2488533f, -0.0062950f, -0.0998198f, -0.2869589f, +0.2632281f, +0.5292779f, +0.3934634f, +0.3897977f,
  -0.0404749f, +0.0523903f, -0.2754678f, +0.1768656f, -0.1651994f, -0.1645275f, +0.1777312f, -0.2678795f,
  +0.1462383f, -0.0714606f, -0.0090406f, +0.1179318f, -0.1127472f, +0.0851997f, -0.2431380f, -0.1542944f,
  -0.1543120f, -0.0066189f, -0.0733191f, -0.2785672f, +0.0918075f, +0.2452730f, +0.1113781f, -0.1231577f,
  +0.1789329f, -0.0254855f, -0.0905901f, +0.2062837f, +0.0949183f, -0.0358903f, -0.1605998f, +0.0043514f,
  +0.0218273f, +0.1749079f, -0.0291464f, +0.0093865f, +0.0785985f, +0.1608497f, -0.0660729f, +0.1478142f,
  +0.1747430f, +0.0102628f, -0.2613282f, +0.2469940f, -0.0273069f, -0.1339965f, +0.1649109f, -0.0449433f,
  -0.4061755f, +0.1329116f, +0.3023160f, -0.0715072f, +0.0814571f, -0.0743121f, -0.0166398f, +0.0885584f,
  +0.0354466f, -0.1061848f, -0.3875453f, +0.3863050f, +0.1324612f, +0.2782557f, -0.2969988f, +0.0474045f,
  -0.1987428f, -0.2060843f, -0.6843446f, +0.0796792f, +0.0833916f, -0.1825806f, -0.0272393f, +0.1106877f,
  -0.7155697f, -0.3883722f, +0.1008427f, -0.3276723f, -0.2298228f, +0.0840511f, -0.1099388f, +0.4389714f,
  -0.0685438f, +0.4610152f, -0.2300024f, +0.4648108f, +0.1619399f, +0.4734568f, -0.1506284f, +0.0850328f,
  +0.0039086f, +0.0825416f, -0.0077875f, +0.1218727f, +0.1533215f, -0.1108669f, -0.0231720f, -0.0576886f,
  -0.3062553f, -0.1399042f, +0.4057844f, -0.1395400f, +0.0107946f, +0.0411595f, +0.2432310f, -0.0110159f,
  -0.0399954f, +0.2499211f, -0.0969063f, +0.0059290f, -0.0646892f, +0.0140990f, +0.1252320f, -0.0416189f,
  -0.1708325f, -0.3059324f, -0.2725699f, +0.2474311f, -0.5088985f, -0.3314558f, -0.2752057f, -0.0593168f,
  +0.0118543f, -0.0410635f, -0.6355033f, +0.2517322f, -0.0096011f, -0.5153912f, -0.2871188f, -0.1594865f,
  -0.2828903f, -0.3202730f, -0.4122892f, +0.3571916f, +0.0361558f, +0.0572162f, -0.0520834f, +0.0294791f,
  -0.2804995f, -0.0610185f, +0.2086257f, +0.1279140f, +0.0110677f, -0.0693790f, +0.0773124f, +0.1350642f,
  -0.5988843f, +0.4251685f, -0.0708460f, -0.0136045f, +0.1182399f, -0.2805699f, +0.0084905f, -0.1006588f,
  -0.3762736f, -0.0584235f, +0.2093917f, +0.5431446f, +0.1538329f, -0.0028279f, -0.0830341f, -0.2851482f,
  +0.2215590f, -0.0160304f, -0.2912626f, +0.1688192f, -0.2615370f, -0.1189095f, -0.0546047f, -0.0659913f,
  +0.0340073f, +0.4386245f, -0.3154577f, +0.2596835f, +0.0577328f, -0.1756386f, -0.1731892f, -0.0354065f,
  -0.1340480f, -0.2341134f, -0.4385760f, +0.2312514f, -0.0629602f, +0.0967084f, -0.2604746f, -0.2495708f,
  +0.0411874f, -0.1250319f, -0.1853480f, +0.0774085f, +0.0818570f, +0.3481075f, +0.3238769f, +0.1173212f,
  +0.2379404f, -0.2623976f, -0.5749830f, +0.0762703f, -0.0425143f, +0.1624328f, +0.1452296f, -0.0020577f,
  +0.0833158f, -0.0710808f, -0.1683696f, +0.0355359f, -0.0521130f, +0.0735570f, +0.0560636f, -0.0198480f,
  -0.0318075f, +0.0644782f, -0.3097257f, -0.1807838f, +0.0053347f, -0.1797953f, +0.0424524f, -0.0378787f,
  +0.3365395f, +0.1406192f, -0.7855819f, -0.2511995f, -0.2514035f, +0.3426234f, -0.2027226f, -0.1120241f,
  +0.2185911f, +0.0260538f, -0.2332781f, +0.1219726f, +0.0496566f, +0.2886718f, +0.0154471f, -0.2628362f,
  +0.0558147f, +0.0898620f, +0.0360324f, +0.1700530f, +0.0852004f, -0.0116789f, +0.1335633f, +0.3235238f,
  -0.0544588f, +0.1526159f, -0.2009708f, -0.2123251f, -0.0235019f, +0.2349952f, +0.1684037f, -0.0100828f,
  +0.0932174f, -0.0862272f, -0.1408431f, -0.0440422f, -0.0591219f, +0.0471816f, -0.1642604f, -0.0909741f
);

const float biases[4] = float[4](
  -0.0030621f, -0.0031489f, -0.0138631f, +0.0225170f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer61 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1079749f, +0.0159331f, +0.0638972f, +0.0863305f, -0.0884345f, -0.0207160f, -0.0491938f, -0.1099841f,
  -0.2280798f, +0.0730570f, -0.0608112f, -0.0717092f, +0.0325619f, -0.1111522f, +0.1051943f, +0.1198157f,
  +0.1961819f, -0.0462043f, +0.0374327f, -0.0326361f, -0.0240087f, +0.1942994f, -0.2549026f, -0.0704220f,
  -0.2036585f, -0.0592883f, +0.0340416f, -0.2321735f, +0.1528411f, +0.3101358f, +0.3144961f, +0.3258518f,
  -0.4422420f, +0.3365310f, -0.2106303f, -0.3018441f, +0.2428802f, +0.6649281f, +0.4016630f, +0.6570647f,
  +0.1329424f, +0.1413870f, +0.2428399f, +0.0890113f, +0.2822464f, +0.5582355f, +0.1393142f, +0.0059444f,
  -0.0595301f, +0.0397372f, -0.0735827f, -0.1221122f, +0.1238044f, +0.0632336f, -0.0764845f, +0.0092549f,
  +0.0249349f, -0.0489290f, -0.2034495f, -0.1139680f, -0.2080140f, +0.1039133f, +0.1519448f, -0.0374965f,
  +0.1891241f, +0.0504806f, -0.3591778f, +0.0300924f, -0.1593387f, +0.0040337f, -0.1316607f, -0.0359061f,
  +0.0252724f, +0.0337582f, -0.1217640f, +0.1614189f, -0.0023120f, -0.0195253f, -0.1024241f, -0.0406436f,
  +0.1701167f, +0.1317436f, -0.1316998f, -0.1191273f, -0.0055486f, +0.0458527f, -0.0319631f, -0.0969558f,
  -0.1568426f, +0.0957965f, -0.1256377f, +0.1905127f, +0.1127675f, +0.1799492f, +0.0443955f, -0.0404303f,
  +0.0305099f, +0.0738779f, +0.3763650f, +0.0379109f, -0.0681152f, -0.0597424f, -0.1466347f, +0.1724867f,
  +0.2159260f, +0.0107974f, -0.0346072f, -0.5565060f, +0.3627856f, +0.4390460f, -0.1421474f, +0.4148058f,
  -0.0499251f, +0.0735532f, -0.1071489f, +0.2966097f, +0.0871033f, +0.0783748f, +0.0542595f, -0.2617263f,
  +0.0278927f, +0.0560973f, +0.1775937f, +0.1437121f, -0.0116893f, +0.0029426f, +0.3144205f, +0.1825447f,
  -0.4120656f, +0.1310283f, -0.1197367f, -0.4853393f, -0.0246956f, +0.0081240f, +0.5045673f, -0.0451028f,
  -0.0272595f, -0.2779120f, -0.0531194f, +0.1810189f, +0.1048512f, -0.2348638f, +0.0191619f, -0.1911178f,
  +0.0072470f, +0.1108317f, +0.2161691f, -0.2675500f, +0.2108163f, +0.1721658f, +0.1000639f, -0.0255337f,
  -0.0169600f, -0.1248755f, -0.1130950f, +0.0819997f, +0.1975427f, +0.1667207f, -0.0589189f, +0.0861634f,
  +0.0341931f, -0.1347469f, -0.0793274f, +0.0079810f, -0.1025236f, -0.0343382f, -0.1737818f, -0.1370710f,
  +0.3310715f, +0.0119359f, +0.0809990f, +0.1141169f, +0.2770209f, +0.1089804f, -0.3627240f, -0.4801480f,
  -0.0921280f, -0.0420913f, +0.7228267f, -0.1444063f, +0.2566904f, +0.4169091f, +0.4836805f, +0.1892536f,
  +0.1242351f, +0.2292757f, -0.2712575f, +0.0262432f, +0.0703000f, +0.4681292f, -0.0108092f, +0.1409299f,
  +0.2676494f, +0.1084174f, +0.1347173f, -0.1540079f, +0.0148181f, -0.1414103f, +0.0095366f, -0.3516810f,
  +0.2855096f, +0.1357967f, -0.3898910f, -0.0808915f, -0.2263109f, +0.0709223f, -0.1258305f, -0.1358009f,
  +0.0627292f, +0.1395178f, -0.2825038f, +0.0073139f, -0.1016737f, +0.0097974f, -0.0464025f, -0.0132259f,
  +0.2587251f, -0.5411431f, -0.6763104f, +0.7197391f, +0.2401128f, -0.3063255f, -0.2473166f, -0.2529483f,
  -0.2738446f, +0.0047610f, -0.1212920f, +0.2253798f, -0.0399975f, -0.5143941f, +0.1052855f, -0.1014989f,
  -0.1937155f, +0.2875524f, +0.1738444f, +0.3576314f, +0.1059507f, -0.1328409f, +0.1490889f, -0.4232560f,
  -0.5954051f, -0.0411022f, +0.4667433f, -0.2065165f, -0.1272747f, -0.2987057f, +0.1490555f, -0.0609764f,
  -0.6153096f, -0.0658122f, +0.2326110f, +0.0928163f, +0.3448584f, +0.5649897f, +0.1092139f, +0.1811372f,
  -0.3567837f, +0.1254893f, +0.3711854f, +0.1486470f, +0.2730261f, +0.2521181f, +0.1050187f, +0.2108224f,
  -0.0464779f, -0.1359204f, -0.2543085f, +0.0395893f, -0.0401937f, -0.0752595f, +0.1547894f, +0.0421541f,
  -0.1297110f, +0.0723848f, -0.1383814f, -0.0743628f, -0.2782594f, -0.2015078f, -0.0031424f, -0.1442754f,
  +0.0430530f, -0.0112558f, -0.1458075f, +0.3680731f, +0.0820120f, -0.2234417f, -0.1055273f, -0.0098596f
);

const float biases[4] = float[4](
  +0.0390759f, +0.0012545f, +0.0379720f, +0.0229226f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer62 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1164530f, -0.0322471f, -0.1403087f, -0.2336842f, -0.4303779f, +0.2250822f, +0.0730782f, -0.0699622f,
  -0.0379772f, -0.0597493f, -0.0166669f, +0.0164056f, -0.3095723f, +0.2184781f, -0.3153602f, +0.4154347f,
  -0.1392611f, -0.0954555f, -0.0122657f, -0.1166256f, -0.0626364f, +0.2200883f, -0.0685348f, +0.1483099f,
  +0.2175308f, -0.0643663f, -0.0178176f, +0.1912690f, -0.3352237f, +0.1426139f, +0.0278569f, +0.2694317f,
  +0.3042681f, -0.2487086f, +0.2491685f, -0.2641267f, +0.3151218f, +0.1658332f, -0.2152940f, -0.0233481f,
  +0.2016580f, -0.1360143f, +0.2677372f, -0.2665951f, +0.2868138f, -0.0097821f, -0.1245373f, +0.4117714f,
  +0.0350865f, -0.6154573f, +0.1027794f, +0.1464093f, -0.1938826f, -0.0708569f, +0.1264163f, +0.1710558f,
  -0.0635474f, -0.2268513f, +0.2356836f, -0.3144375f, +0.1450905f, +0.2225011f, +0.0205153f, +0.1838456f,
  +0.0533677f, +0.0457788f, -0.1457115f, -0.2988178f, -0.0364068f, +0.2466170f, +0.0458418f, -0.1102262f,
  -0.2697139f, +0.0288413f, -0.1227197f, -0.2351621f, -0.0345400f, -0.0140294f, -0.3083503f, +0.0679156f,
  -0.0601458f, +0.1245326f, -0.1181408f, +0.1652024f, -0.0007521f, +0.0882137f, -0.1853174f, -0.1335624f,
  +0.0155481f, +0.0341834f, -0.3093044f, +0.0753408f, -0.0986647f, -0.1518215f, -0.0510242f, -0.0083174f,
  +0.1960665f, -0.2359718f, +0.4028336f, -0.1379080f, -0.0733161f, -0.3830829f, -0.1898360f, +0.0312032f,
  +0.1201882f, -0.2410228f, +0.0021382f, -0.0115100f, -0.4012930f, -0.4640728f, +0.4342718f, -0.9048557f,
  +0.0875279f, -0.1631954f, +0.1150657f, +0.2648913f, +0.1105780f, -0.3923124f, -0.2298730f, -0.5150580f,
  -0.0373226f, +0.0073443f, +0.1572170f, +0.1960454f, +0.0301057f, -0.0949868f, +0.0169040f, +0.1895962f,
  +0.0327547f, -0.0272784f, +0.2273039f, +0.2939932f, -0.1998401f, -0.3949068f, -0.0931511f, +0.2195497f,
  +0.0580253f, +0.1144135f, +0.0115131f, +0.2877361f, -0.1666179f, -0.2892278f, -0.0026108f, +0.3163020f,
  +0.0315617f, -0.1059163f, +0.0676801f, +0.0367438f, +0.0652135f, +0.0613077f, +0.1787194f, -0.0942273f,
  -0.2134056f, +0.1106843f, -0.0594692f, -0.0045380f, +0.1148071f, +0.1439509f, -0.0438549f, +0.1162195f,
  +0.0710460f, +0.0955059f, -0.0214505f, +0.1113072f, +0.1138630f, +0.0238586f, +0.0528505f, +0.0398440f,
  -0.0010513f, +0.2010861f, -0.1361668f, +0.1870907f, -0.2507764f, +0.1341866f, -0.0167237f, -0.2983927f,
  +0.0871933f, +0.0241981f, +0.0877668f, +0.1409305f, -0.0844961f, +0.0919727f, -0.3514955f, +0.0884486f,
  +0.1154503f, -0.0595062f, -0.0084268f, +0.1401250f, +0.0357945f, -0.1593426f, -0.0182239f, -0.2199708f,
  -0.0849937f, -0.0718985f, -0.0151601f, -0.0761806f, -0.1576933f, +0.0169395f, +0.1028872f, +0.1744421f,
  +0.1146341f, -0.2593117f, +0.3105028f, -0.1684077f, -0.1047636f, +0.0630371f, +0.0058188f, +0.2958938f,
  +0.0204625f, -0.0534432f, +0.1374128f, +0.1258489f, -0.0320654f, +0.0082386f, +0.0287405f, +0.1386498f,
  -0.0644469f, -0.0762821f, -0.1426010f, -0.0768832f, +0.1622829f, +0.1615805f, -0.0754133f, +0.2222056f,
  -0.2176836f, -0.0476557f, -0.0720001f, +0.1652521f, +0.1494013f, +0.3003466f, +0.0058844f, -0.0809877f,
  +0.0273813f, -0.0088125f, +0.0933010f, -0.0194982f, -0.0244741f, -0.0887166f, +0.0004317f, -0.0054424f,
  +0.0610013f, -0.2258178f, -0.3628040f, -0.1648297f, -0.2286177f, -0.1422818f, -0.2448958f, -0.4982850f,
  -0.0832959f, +0.0848063f, -0.2452433f, +0.1643953f, +0.2154787f, +0.1092993f, -0.0345029f, -0.3126221f,
  +0.0908270f, -0.0664256f, -0.1576785f, +0.2726947f, -0.0234031f, -0.1832454f, +0.1116373f, -0.4822978f,
  -0.1532427f, +0.0969674f, -0.0913382f, -0.1257387f, -0.0471439f, -0.0326091f, -0.0322146f, +0.0336361f,
  +0.1203488f, +0.0968092f, -0.1024534f, +0.0667126f, -0.1179066f, -0.1360708f, -0.0532078f, -0.1750114f,
  +0.1199450f, +0.1504692f, -0.1733083f, -0.0393227f, -0.0090736f, -0.0649447f, +0.1403400f, -0.4086682f
);

const float biases[4] = float[4](
  -0.0095739f, -0.0030978f, +0.0161711f, +0.0012818f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer62 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0239712f, -0.0249761f, +0.2752114f, -0.1949032f, -0.1451086f, +0.1757701f, +0.1157532f, -0.1269611f,
  +0.1359621f, -0.0870084f, +0.5371422f, -0.1490654f, -0.1281033f, +0.1302276f, +0.1375176f, -0.0922794f,
  -0.1116720f, -0.0315927f, -0.0870569f, -0.2353996f, -0.2913315f, +0.0256725f, -0.0415568f, +0.0909398f,
  +0.1893737f, -0.1637840f, +0.1693180f, -0.1003128f, -0.2058859f, +0.0211265f, +0.2480142f, -0.1955442f,
  +0.2903274f, +0.4852711f, +0.1027035f, -0.0873040f, +0.0375146f, -0.2419937f, -0.0872004f, -0.2267465f,
  -0.0468129f, +0.1323251f, -0.0811803f, +0.0655193f, -0.0742943f, +0.1121929f, -0.2768602f, +0.1120465f,
  +0.0510706f, -0.1492596f, +0.1247959f, -0.0431944f, +0.0122873f, -0.0796410f, +0.0008374f, -0.2595830f,
  -0.1190824f, +0.3031786f, +0.1715666f, +0.4958046f, +0.1015687f, -0.1157842f, -0.0782628f, -0.1640920f,
  -0.1661655f, -0.0692444f, +0.2541002f, -0.1483032f, +0.0417999f, +0.1262150f, -0.0713680f, -0.3717227f,
  +0.0607612f, -0.0260245f, -0.1766277f, +0.1580940f, -0.0357218f, -0.0094875f, -0.0366177f, -0.0107259f,
  -0.1625212f, +0.0332379f, -0.0419801f, -0.0446975f, +0.0006057f, +0.1675862f, -0.1430847f, +0.0462580f,
  -0.1074807f, +0.0235483f, +0.1509983f, +0.0849310f, +0.0718529f, +0.1851838f, -0.0422766f, +0.0065040f,
  -0.1022819f, -0.0107559f, -0.1636212f, -0.0078403f, -0.2601251f, +0.0743456f, -0.2655880f, +0.1452524f,
  -0.0044128f, +0.0743038f, +0.2658184f, -0.1650106f, -0.1982087f, +0.3466032f, -0.2126650f, +0.0131609f,
  +0.0070985f, +0.0588934f, +0.0190123f, -0.2787182f, -0.0677989f, +0.2681507f, +0.3367038f, +0.1590635f,
  +0.0928148f, -0.0871039f, -0.1829097f, -0.2247481f, -0.1878968f, +0.0108993f, +0.0344123f, -0.1521797f,
  +0.1634950f, -0.0901272f, -0.1752280f, -0.0678241f, -0.0073880f, +0.1026208f, -0.0390478f, +0.0099099f,
  +0.0195222f, -0.0832962f, -0.1454428f, -0.3801483f, +0.0777375f, +0.1752096f, -0.0938132f, +0.3406798f,
  +0.0082729f, +0.1408105f, -0.1395397f, -0.0063225f, -0.0126817f, +0.0171499f, +0.0272177f, +0.1370810f,
  +0.2378975f, -0.2540516f, -0.0804348f, +0.1026676f, -0.0959244f, -0.1482988f, +0.0381675f, -0.1517763f,
  -0.1154119f, -0.1627914f, +0.1326617f, +0.0019522f, +0.0882678f, -0.1111115f, -0.1334399f, +0.0733360f,
  +0.1348516f, -0.3459359f, -0.1369607f, +0.1998347f, -0.0714738f, -0.1234154f, +0.1697945f, -0.4560184f,
  -0.4528176f, -0.4042267f, -0.4654003f, +0.0130488f, +0.0272565f, +0.2691051f, -0.2424730f, +0.1255528f,
  -0.0134534f, -0.0817044f, -0.1546162f, -0.1831138f, +0.1209993f, +0.0988572f, +0.2301132f, -0.3200105f,
  -0.1560437f, -0.3139252f, -0.1984635f, +0.1946616f, -0.0431988f, -0.0567178f, +0.0147150f, -0.1898317f,
  -0.1525209f, +0.0011620f, +0.0725562f, -0.0468845f, -0.0673495f, +0.0354016f, +0.0856983f, -0.2401936f,
  +0.1440933f, +0.0646413f, +0.0393974f, -0.2705972f, -0.0510258f, +0.1457745f, +0.0681217f, +0.0482883f,
  -0.1926945f, -0.1045421f, +0.2182153f, -0.2723546f, -0.0775485f, +0.1487315f, -0.0459956f, +0.2509269f,
  +0.0237700f, -0.0022489f, +0.0163907f, +0.1549196f, +0.0973414f, +0.1665810f, +0.1066325f, +0.4315447f,
  +0.1108670f, +0.0078249f, +0.0454916f, -0.1409412f, -0.0182215f, -0.1638107f, +0.1120946f, -0.1518277f,
  +0.2291977f, +0.0314046f, +0.1062325f, -0.0364145f, -0.0853159f, +0.0427036f, -0.0377665f, +0.1831693f,
  +0.1390499f, +0.4239025f, +0.1858306f, +0.1626961f, -0.1582480f, -0.0310869f, -0.0535205f, -0.2416940f,
  -0.0419457f, +0.0122523f, +0.0887532f, +0.1624903f, -0.2060066f, -0.2361199f, +0.2843031f, +0.6461906f,
  +0.0954437f, +0.0862355f, +0.0496335f, +0.3217878f, -0.1203497f, +0.0266555f, -0.0156734f, +0.0793494f,
  +0.0311352f, +0.1384401f, +0.1974102f, -0.0858124f, -0.0023094f, +0.0778899f, -0.0969122f, -0.0040635f,
  -0.0393323f, -0.1426976f, +0.1578585f, +0.1260234f, +0.0640082f, -0.0132478f, +0.0935742f, +0.1004748f
);

const float biases[4] = float[4](
  +0.0237647f, +0.0253962f, -0.0161347f, -0.0447007f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer63 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1333288f, +0.0934822f, +0.3018147f, -0.0645079f, -0.0096031f, +0.0934588f, +0.0219213f, +0.0408637f,
  -0.0177061f, +0.0607223f, +0.1561189f, +0.1181925f, +0.1148527f, -0.0937210f, -0.0763692f, +0.2014788f,
  +0.0188837f, +0.1871291f, -0.0766501f, +0.0014700f, -0.1590094f, +0.0686100f, -0.0376275f, -0.4056515f,
  +0.1862845f, +0.0050894f, +0.1138519f, +0.1706458f, +0.0543209f, +0.0149209f, +0.2174834f, -0.0890200f,
  -0.3912947f, -0.0736115f, +0.2941580f, +0.0984689f, +0.1433865f, -0.2940269f, -0.2577251f, +0.3914622f,
  -0.0982493f, +0.3960998f, -0.0852272f, +0.0450102f, -0.2060976f, +0.3510009f, -0.0588618f, -0.3717957f,
  +0.0675211f, -0.0979016f, -0.0712202f, +0.0865773f, +0.1246886f, +0.1757219f, +0.1647288f, +0.0155195f,
  -0.3446028f, -0.0752693f, +0.5595499f, +0.0535136f, +0.0832955f, -0.2170533f, -0.1660475f, +0.1635614f,
  -0.0890299f, +0.3519868f, -0.0384832f, -0.0033241f, -0.1679851f, +0.2756754f, -0.0848562f, -0.2456767f,
  -0.1726491f, -0.1039895f, +0.0668315f, -0.2859490f, -0.1118954f, -0.3490273f, -0.1424825f, -0.0898097f,
  -0.1517814f, -0.1793795f, +0.3113653f, -0.2787111f, -0.1035878f, -0.3889102f, -0.0013776f, +0.2346580f,
  +0.0231162f, +0.0095294f, +0.0953805f, -0.1379372f, -0.0331812f, -0.2313000f, -0.0152643f, +0.0838529f,
  -0.2524778f, -0.1704814f, +0.1733288f, +0.1402387f, -0.1135467f, -0.1416132f, +0.1474900f, +0.1995153f,
  -0.1413917f, +0.0514201f, +0.1530037f, -0.2258493f, -0.0371067f, -0.2833129f, +0.0322682f, +0.2473170f,
  -0.1302001f, -0.1693385f, +0.0046405f, -0.0145300f, +0.0720441f, -0.4445563f, +0.1005380f, +0.2403101f,
  -0.0487886f, -0.2646620f, +0.0304298f, +0.1330055f, +0.0453138f, -0.1835863f, -0.0038686f, -0.1352776f,
  +0.0366364f, -0.2571125f, +0.3026635f, -0.2014208f, +0.0191295f, -0.2940901f, +0.2195574f, -0.1714851f,
  -0.0206146f, -0.0606609f, +0.1955743f, -0.2164635f, +0.0878515f, -0.1017581f, +0.2984242f, +0.1013908f,
  -0.1234008f, +0.0845832f, -0.0650200f, -0.2741068f, +0.2310326f, +0.2675695f, +0.1060311f, +0.2308229f,
  +0.0325975f, +0.1754111f, -0.0942832f, -0.0914295f, +0.1550920f, +0.1775941f, +0.1654440f, -0.0589870f,
  -0.1457004f, +0.1401968f, +0.1059389f, +0.0519667f, +0.0783572f, -0.1120149f, +0.1218973f, -0.0378339f,
  -0.1336578f, +0.0431712f, +0.0454515f, -0.2037620f, +0.0531120f, +0.1595360f, +0.0152969f, +0.0434716f,
  +0.1579827f, -0.1640549f, +0.0323320f, -0.1769112f, +0.4852189f, +0.4049345f, -0.0068660f, +0.0986609f,
  +0.0621114f, +0.0727400f, +0.1010777f, +0.1769663f, +0.1820403f, +0.1164868f, +0.0508013f, +0.1050755f,
  -0.1271728f, +0.0114874f, -0.0145148f, +0.0350025f, -0.0413797f, +0.0932610f, +0.0575526f, +0.0893188f,
  -0.2913636f, +0.0540649f, -0.0462644f, -0.1356936f, +0.1411511f, +0.3484092f, +0.1413185f, +0.0217998f,
  -0.1148925f, -0.0669780f, +0.0095105f, +0.0583742f, +0.0479543f, -0.0403698f, -0.0008335f, +0.0626392f,
  +0.0447657f, +0.2460379f, -0.0289888f, +0.0319128f, -0.1617678f, -0.1424555f, -0.2196266f, -0.2098383f,
  +0.0846612f, -0.1201522f, +0.2604908f, -0.0582407f, -0.1899518f, -0.2691158f, -0.1582750f, -0.0987519f,
  -0.0753083f, -0.0718618f, +0.0914348f, +0.0672051f, +0.0204204f, -0.1812994f, -0.0244276f, +0.1072566f,
  +0.3322477f, +0.0697616f, -0.0994372f, +0.2688092f, +0.0900295f, -0.0369837f, -0.2311814f, -0.1796342f,
  +0.1151422f, -0.1544671f, +0.2353797f, +0.1434933f, -0.2751948f, -0.5927097f, -0.0446086f, +0.0487888f,
  -0.0354064f, +0.0796265f, +0.2152409f, +0.0382181f, +0.1841177f, -0.0873089f, +0.0218298f, +0.0643216f,
  +0.2398483f, +0.0721220f, +0.2860768f, +0.0803086f, -0.0515129f, +0.0626521f, -0.1571268f, -0.1769043f,
  +0.1008880f, -0.1318866f, +0.2256648f, +0.0077790f, -0.0088240f, -0.1683668f, +0.0943060f, +0.1548952f,
  -0.0438338f, -0.0197610f, -0.0201797f, +0.0835321f, +0.1831778f, -0.2299678f, +0.0767496f, -0.0325193f
);

const float biases[4] = float[4](
  -0.0170062f, -0.0087878f, +0.0275068f, -0.0746915f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer63 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0934430f, +0.0947713f, +0.2467797f, -0.1982625f, -0.1438304f, -0.1031474f, -0.0790329f, -0.1136628f,
  -0.1666821f, +0.0097494f, +0.3308403f, +0.0403162f, +0.0029701f, -0.4142681f, -0.1161099f, -0.1352010f,
  +0.0827704f, -0.1683162f, +0.1260114f, +0.1791904f, +0.0118515f, -0.4466917f, -0.0696716f, -0.1117421f,
  +0.1997487f, -0.1242815f, -0.0025925f, +0.1903023f, -0.0477071f, -0.1962072f, -0.1764286f, -0.1217639f,
  +0.0578283f, -0.0161695f, +0.1703086f, +0.1347604f, -0.0574131f, -0.1679464f, -0.2172918f, -0.0720336f,
  -0.0003785f, +0.0643099f, +0.3290091f, -0.0595816f, +0.0451613f, -0.3539197f, -0.0634829f, -0.0625503f,
  +0.2906256f, -0.1470649f, -0.1377584f, +0.2952646f, -0.0304086f, -0.3128420f, -0.0925087f, -0.2138731f,
  +0.2176681f, -0.2290572f, -0.0302633f, +0.3322558f, +0.2153995f, -0.0936534f, -0.0001391f, -0.0439501f,
  +0.2279218f, -0.1848235f, +0.0393180f, +0.2993878f, +0.1997994f, -0.2575697f, +0.0037387f, +0.0771693f,
  +0.2391707f, -0.0481960f, -0.0247259f, +0.2661197f, -0.0889498f, -0.2538657f, -0.2338601f, -0.1256780f,
  +0.1525500f, -0.0202741f, +0.3883401f, +0.1343958f, -0.0190142f, -0.1667870f, -0.1553589f, -0.0832546f,
  -0.0622946f, -0.1033708f, +0.1510992f, +0.3382560f, -0.0584993f, -0.4132675f, -0.2103220f, -0.2940917f,
  -0.1141529f, -0.0419631f, +0.1189745f, +0.0595583f, -0.1641624f, -0.1405701f, -0.1698850f, +0.0622255f,
  +0.1488492f, +0.1617476f, +0.2437829f, +0.2603481f, +0.1054889f, -0.3803475f, -0.3880406f, -0.0968620f,
  -0.1681691f, +0.0473639f, +0.2797006f, +0.3513867f, +0.1096215f, -0.2857086f, -0.0085201f, -0.2193849f,
  -0.1795884f, -0.0484861f, -0.0526284f, +0.1194760f, +0.0231650f, -0.0806499f, +0.0826759f, +0.0305422f,
  +0.1394208f, -0.0854795f, +0.2862747f, -0.2470315f, -0.0766511f, -0.2716155f, +0.0622400f, +0.0527504f,
  +0.0397959f, -0.0534960f, -0.0377422f, +0.1909347f, -0.0294658f, -0.1815164f, -0.1384136f, -0.1688708f,
  +0.1526416f, +0.0652652f, +0.1864113f, +0.1444290f, +0.0434559f, -0.3319812f, -0.1556372f, -0.0714677f,
  +0.2138194f, +0.0217168f, +0.0312391f, -0.1337445f, -0.0052233f, -0.1867481f, -0.2198684f, -0.1357279f,
  +0.3038948f, +0.0763650f, +0.1375483f, -0.0208680f, +0.0791550f, +0.1331071f, +0.0475425f, +0.2439753f,
  +0.0551874f, +0.0505557f, +0.3725328f, +0.1308679f, +0.1301245f, -0.4109168f, -0.2197938f, +0.0281171f,
  -0.1915808f, -0.0502518f, +0.2916642f, -0.2580517f, +0.3934543f, +0.1363613f, +0.0665434f, +0.3297587f,
  +0.0838248f, -0.1014972f, +0.3356276f, -0.1154776f, +0.3359211f, +0.1261032f, +0.0801335f, +0.4639592f,
  +0.2324720f, +0.0266988f, +0.3468540f, +0.1697894f, -0.2287132f, -0.0744369f, -0.3358358f, -0.1209226f,
  +0.2694317f, -0.1337604f, +0.4221282f, +0.0631279f, +0.2611469f, +0.0323918f, -0.2552703f, -0.1448637f,
  +0.2746747f, -0.0184648f, +0.1453366f, -0.0046145f, +0.0401436f, -0.1467984f, -0.1445018f, -0.0363406f,
  -0.1233236f, -0.1127069f, +0.0036948f, -0.0694373f, -0.0463812f, +0.0709016f, +0.1510449f, +0.0829012f,
  -0.1906916f, -0.0821953f, -0.1072325f, +0.1859541f, -0.0219154f, -0.1460854f, +0.0725074f, +0.1212251f,
  +0.0432646f, +0.0769337f, +0.0689703f, -0.2385954f, -0.1336520f, -0.0799060f, -0.0399599f, +0.0719935f,
  -0.2339566f, -0.0154032f, -0.2690289f, -0.1223907f, +0.0475756f, +0.2169912f, +0.3627804f, -0.0420726f,
  -0.2769204f, +0.0839525f, -0.3437198f, +0.3722893f, -0.1667121f, -0.1329968f, +0.3026886f, -0.1407291f,
  -0.0108740f, +0.0915458f, -0.0911827f, -0.1144343f, +0.0125786f, +0.2037110f, +0.0082084f, +0.2123776f,
  -0.2123321f, +0.0192697f, -0.1545511f, -0.2123288f, +0.0695684f, +0.1128404f, +0.0166066f, -0.0133116f,
  +0.1061981f, +0.0063493f, -0.0246026f, +0.2557620f, +0.1995505f, +0.0706204f, -0.1025594f, +0.1918089f,
  -0.0106699f, +0.2022147f, -0.0801664f, -0.1239670f, -0.1070737f, +0.1648369f, -0.0206227f, +0.1315207f
);

const float biases[4] = float[4](
  -0.0942459f, -0.0986394f, -0.1353001f, +0.0118516f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer64 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!BIND FEAT_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

#define TEX_BIND_L3_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L3_TEX FEAT_L0_tex
#define TEX_BIND_L3_POS FEAT_L0_pos
#define TEX_BIND_L3_SIZE FEAT_L0_size
#define TEX_BIND_L3_PT FEAT_L0_pt

const float kernels[288] = float[288](
  -0.1146850f, +0.0367688f, -0.1009260f, +0.2208913f, -0.0178126f, +0.2204689f, -0.1193604f, -0.0764582f,
  -0.0993826f, +0.0293949f, -0.2133784f, -0.0111364f, -0.2020533f, +0.2483950f, -0.3852119f, -0.1750838f,
  +0.0644021f, -0.0101796f, -0.0979527f, -0.1284784f, -0.2752319f, +0.3711904f, -0.0601730f, -0.1077102f,
  -0.2284028f, -0.1827750f, -0.0912934f, -0.4874411f, +0.2448513f, -0.2100903f, +0.1384992f, -0.1584803f,
  -0.1543996f, -0.0543673f, -0.1098644f, +0.1797540f, +0.0297746f, -0.3051206f, -0.0461791f, +0.3845595f,
  +0.2280334f, +0.0194383f, +0.0205691f, -0.2696788f, +0.0194438f, -0.0399118f, +0.1214369f, +0.5642912f,
  -0.0989729f, -0.0089364f, +0.0509494f, -0.1173158f, +0.1310602f, +0.3655694f, -0.0625647f, +0.0764842f,
  -0.0257262f, +0.1406158f, -0.1357288f, +0.1985251f, -0.0155730f, -0.1694923f, -0.0504578f, -0.0708892f,
  +0.1723207f, +0.1030603f, -0.1655722f, -0.0693360f, -0.0404052f, -0.0922169f, -0.1865009f, -0.2446785f,
  +0.1853155f, +0.1381351f, +0.0017359f, -0.1819811f, -0.0098352f, -0.1329812f, +0.3597021f, -0.1930150f,
  -0.1420250f, +0.1644955f, +0.1042069f, -0.2018280f, -0.0260430f, +0.0365443f, -0.0984909f, -0.3665515f,
  -0.2234646f, +0.0081850f, +0.1313001f, -0.0290659f, -0.0831513f, -0.2012545f, +0.0732175f, +0.0078101f,
  +0.3017070f, -0.0975490f, +0.0079538f, -0.2409045f, -0.0787527f, +0.0304687f, +0.0666342f, +0.2929878f,
  -0.0522580f, +0.0435487f, +0.0362137f, -0.0456878f, -0.0121330f, -0.2919026f, +0.1295940f, -0.1459702f,
  -0.0369144f, +0.1326266f, -0.0921175f, -0.0341064f, -0.1116155f, +0.0324920f, +0.1866749f, -0.0531804f,
  +0.1058808f, +0.0418576f, +0.1497073f, -0.2292749f, -0.1406312f, +0.3248287f, +0.2316383f, +0.0187442f,
  -0.1731241f, +0.0565358f, +0.0827667f, -0.2618936f, -0.0837058f, -0.0099090f, +0.1537452f, +0.3082066f,
  -0.0845474f, -0.0085726f, +0.0853578f, -0.0716053f, -0.0435644f, -0.1686892f, -0.0822573f, +0.1545675f,
  -0.0111597f, +0.0777500f, -0.0232760f, +0.0274316f, -0.1412483f, -0.0491669f, -0.4411713f, -0.0191554f,
  +0.1543164f, +0.1557893f, -0.0292566f, +0.1109015f, -0.0340040f, +0.2218754f, -0.0621325f, -0.1818479f,
  -0.0797133f, -0.0406903f, +0.0822980f, -0.2919026f, -0.1040183f, +0.0206397f, -0.3190827f, +0.0027621f,
  -0.1449731f, -0.0475205f, +0.0050473f, -0.0825960f, -0.0057465f, -0.0729360f, -0.0278467f, -0.0423692f,
  -0.1254226f, -0.1053262f, +0.0672546f, -0.1328372f, -0.2002958f, -0.0215277f, -0.1326139f, +0.2322214f,
  -0.0367636f, -0.0013849f, +0.1117482f, -0.1927495f, -0.1060158f, -0.1983081f, +0.1105362f, +0.4362250f,
  +0.0345282f, +0.0664156f, +0.0530612f, +0.1236096f, -0.0746538f, -0.0230067f, -0.0396020f, +0.0105233f,
  -0.0177756f, -0.0243644f, +0.0176401f, -0.0334695f, -0.0300982f, +0.0685628f, +0.1307072f, +0.0379076f,
  -0.0240725f, +0.1148618f, -0.0695031f, -0.1206906f, +0.0542402f, +0.0297250f, -0.1001919f, +0.0211694f,
  +0.0975948f, +0.2685573f, -0.0445719f, -0.1582057f, -0.1108612f, +0.0747700f, +0.1489132f, -0.2062916f,
  +0.0076212f, +0.2357719f, -0.0115366f, -0.0994720f, +0.1985997f, +0.1463997f, +0.2822643f, -0.2662846f,
  -0.1661723f, -0.0507261f, -0.0137118f, +0.0366335f, +0.1168499f, -0.1641998f, +0.3921470f, +0.1395020f,
  +0.0220254f, -0.0719642f, -0.1637147f, +0.0040259f, -0.0037946f, -0.2165199f, -0.5248543f, +0.2818905f,
  -0.1969462f, +0.0025050f, +0.3102194f, -0.2147528f, -0.1408756f, -0.2885237f, +0.3167418f, -0.1665402f,
  +0.0541446f, -0.1375794f, +0.0191994f, -0.3454602f, -0.1759725f, +0.0172037f, -0.0593950f, +0.0673420f,
  +0.0665983f, +0.0111403f, +0.0088035f, +0.0950915f, -0.0879604f, -0.0203814f, -0.1853510f, +0.1001752f,
  -0.3180284f, -0.0527782f, +0.0796620f, -0.1429254f, -0.0179663f, -0.2942751f, -0.1385598f, +0.0716195f,
  -0.1396766f, +0.1573734f, +0.2560462f, +0.0262657f, +0.1225569f, -0.4881494f, -0.2392794f, -0.0400911f
);

const float biases[4] = float[4](
  +0.0212339f, -0.0561400f, +0.0579444f, -0.0205393f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)) + TEX_BIND_L3_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer64 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!BIND FEAT_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

#define TEX_BIND_L3_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L3_TEX FEAT_L1_tex
#define TEX_BIND_L3_POS FEAT_L1_pos
#define TEX_BIND_L3_SIZE FEAT_L1_size
#define TEX_BIND_L3_PT FEAT_L1_pt

const float kernels[288] = float[288](
  -0.0398566f, +0.1314985f, -0.1330124f, +0.1353418f, -0.0450263f, +0.1594688f, -0.1015529f, +0.0997654f,
  +0.2862349f, -0.1873886f, -0.2765830f, +0.1606193f, +0.0967228f, -0.0815927f, +0.0571726f, -0.0079240f,
  +0.1450546f, -0.2280461f, -0.1959902f, +0.2454631f, +0.0706211f, -0.3640107f, -0.2052435f, +0.0175511f,
  -0.2571171f, +0.0519423f, -0.2825084f, -0.0315162f, -0.0394955f, +0.1759771f, +0.2514284f, +0.1650323f,
  +0.2890278f, +0.0742278f, -0.1165854f, -0.4259262f, +0.3681390f, -0.3284436f, +0.0169066f, +0.3791363f,
  +0.0072163f, +0.0868999f, -0.1425404f, +0.0742181f, +0.3260734f, +0.0435145f, -0.2142179f, -0.3339565f,
  -0.0385547f, +0.0773115f, -0.0020767f, +0.0088427f, +0.0058314f, -0.1568539f, -0.2555132f, +0.1553149f,
  -0.0105553f, +0.1139540f, +0.0107863f, -0.1307214f, +0.0443695f, -0.2362631f, +0.1773305f, +0.0468255f,
  +0.1686366f, +0.0991021f, -0.2037905f, +0.1955743f, +0.0288464f, +0.0252997f, +0.0284012f, -0.2426690f,
  +0.0127616f, +0.0303101f, -0.0119202f, -0.0482708f, +0.1542659f, +0.2574819f, +0.2230638f, -0.0520810f,
  +0.1060478f, -0.0043923f, +0.0504997f, -0.1601309f, -0.0003665f, -0.1227454f, +0.0988004f, -0.1467728f,
  +0.1836697f, +0.3058789f, +0.0162100f, +0.0144444f, +0.1755286f, +0.2357490f, +0.2880744f, -0.1802187f,
  -0.0931611f, +0.0262871f, +0.0226618f, -0.0551536f, +0.0617990f, -0.0329156f, -0.0940888f, +0.0414831f,
  -0.1170547f, +0.0938099f, +0.1424768f, +0.2724248f, +0.0071375f, +0.0019496f, +0.0243029f, -0.0273511f,
  +0.0546935f, +0.2911597f, +0.0540521f, +0.2051991f, +0.1896781f, -0.1004460f, -0.1323766f, +0.0343370f,
  -0.0575684f, -0.0939702f, -0.0805293f, -0.0130986f, +0.0462984f, +0.2260048f, -0.1913133f, +0.0615815f,
  -0.0080631f, -0.0350520f, -0.0675680f, +0.2530668f, +0.0577685f, -0.1675408f, +0.0767469f, -0.0204727f,
  -0.0067642f, +0.1703885f, -0.0121458f, +0.1433957f, +0.0006616f, -0.1176435f, -0.0059609f, -0.1226492f,
  -0.0073505f, +0.0414825f, +0.0513476f, +0.0475382f, +0.4184993f, +0.3039429f, +0.1913024f, +0.0148711f,
  -0.5767523f, -0.1187555f, -0.0766789f, +0.0400562f, +0.0572126f, -0.2494044f, -0.1795717f, +0.2341489f,
  +0.1114018f, +0.0000598f, +0.0398694f, +0.0116057f, -0.0848681f, -0.3264402f, +0.1083286f, +0.1251196f,
  +0.0491205f, -0.0697348f, -0.0567444f, -0.0569861f, +0.2017864f, +0.3843632f, -0.2113685f, +0.0126456f,
  -0.6486487f, -0.0719412f, +0.1752847f, +0.1241626f, +0.0993060f, +0.3805768f, -0.2112341f, -0.3603533f,
  +0.1680466f, +0.0546832f, +0.0989279f, -0.1754955f, +0.0633788f, -0.1138819f, +0.2362810f, -0.0614903f,
  +0.0428340f, +0.0001132f, +0.0739751f, -0.0628247f, +0.1146738f, +0.2696916f, -0.0860924f, +0.0617201f,
  -0.2556241f, -0.0701167f, -0.0956013f, +0.1228636f, -0.2074203f, +0.0604825f, -0.1375226f, -0.0602860f,
  +0.0553733f, +0.1417562f, +0.1218191f, -0.0672638f, -0.0734614f, +0.1439440f, +0.3844400f, -0.2401275f,
  -0.0463057f, -0.0328724f, -0.0682138f, +0.0020262f, +0.0732169f, +0.0427278f, +0.0993821f, -0.1295283f,
  +0.1408999f, +0.1724763f, -0.0888828f, +0.2338438f, +0.3420977f, -0.1168446f, -0.4693507f, -0.1891832f,
  -0.2034989f, -0.2394248f, -0.0258341f, -0.1589335f, +0.2370706f, -0.2474529f, +0.0439483f, +0.2177908f,
  +0.0545928f, -0.1311521f, -0.1554867f, -0.1982548f, +0.1911383f, +0.2734414f, -0.3598090f, -0.0819557f,
  +0.4940250f, +0.0160585f, -0.2593233f, +0.1757435f, -0.1107168f, +0.3290342f, -0.4292279f, +0.0048008f,
  -0.0457328f, -0.3932958f, -0.1613836f, -0.3005359f, +0.0112068f, -0.5433520f, -0.1911550f, +0.2881057f,
  -0.0170416f, -0.0076434f, +0.0109501f, -0.1352229f, +0.0375157f, +0.2032024f, -0.0141157f, -0.0682826f,
  +0.1290787f, -0.0333189f, -0.0298735f, +0.2056184f, +0.0394374f, +0.4756372f, -0.2810933f, -0.0377059f,
  +0.0543749f, -0.1772870f, -0.1019401f, -0.2460000f, +0.0920675f, +0.6175053f, +0.0879303f, +0.0446403f
);

const float biases[4] = float[4](
  -0.0055668f, -0.0149775f, -0.0078622f, -0.1059936f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)) + TEX_BIND_L3_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer65 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0470981f, -0.0878611f, -0.1703170f, +0.0392963f, -0.0315234f, +0.1260602f, +0.0882001f, +0.0797951f,
  +0.0875955f, +0.0714595f, -0.0336249f, -0.0019660f, -0.0107148f, -0.0671491f, -0.0914978f, -0.1217692f,
  -0.0209405f, -0.0769386f, +0.1459320f, -0.0598669f, -0.0318938f, -0.1427645f, +0.0272208f, -0.0455127f,
  -0.3434576f, +0.0360963f, -0.0075123f, -0.2652937f, +0.2520197f, +0.2128882f, +0.3336194f, +0.0592375f,
  +0.0013303f, +0.0613267f, -0.0584227f, +0.3966172f, +0.0463825f, +0.2543847f, -0.2633851f, -0.1128407f,
  +0.0209144f, -0.0462319f, -0.0451074f, -0.0892600f, -0.0491369f, +0.0373894f, -0.0526336f, -0.0301890f,
  -0.0306184f, +0.0388856f, -0.1094726f, -0.0994133f, +0.0244904f, +0.1596289f, +0.0407326f, +0.0129922f,
  +0.1469373f, +0.0864669f, +0.0034670f, +0.1744449f, +0.0687075f, -0.0011856f, -0.1536255f, +0.1101521f,
  -0.0058573f, +0.0397522f, -0.0171836f, -0.0494242f, -0.0365628f, +0.0763202f, +0.0033637f, +0.0302774f,
  -0.1671918f, +0.0597317f, +0.1229657f, -0.2271783f, +0.0933369f, +0.2499495f, +0.2185982f, +0.2081199f,
  -0.0582049f, +0.0130850f, -0.0391645f, +0.0628860f, +0.0524159f, +0.1934270f, +0.1540482f, +0.0599994f,
  +0.0215190f, -0.0477373f, -0.0027338f, -0.0361359f, -0.0454335f, -0.0979322f, +0.0208594f, -0.0743188f,
  +0.0295345f, -0.1143934f, -0.3709523f, -0.0117288f, +0.0869280f, +0.0267562f, -0.1626329f, -0.0273929f,
  -0.0067095f, +0.0557692f, +0.0537443f, +0.1358784f, +0.0162362f, +0.0893287f, +0.2224721f, -0.3690622f,
  +0.1384096f, -0.0240650f, -0.2120634f, -0.0149320f, -0.0935318f, -0.1118181f, -0.0925734f, -0.0397687f,
  +0.0070816f, +0.0323531f, -0.0660753f, -0.0683905f, -0.0315210f, -0.0215197f, -0.0422120f, -0.1482051f,
  +0.0925399f, -0.0218440f, -0.0363064f, +0.2041223f, -0.0021993f, +0.0444870f, -0.1149127f, +0.1966857f,
  +0.0201813f, +0.1264911f, +0.0458487f, -0.0108884f, +0.0254695f, +0.0790092f, +0.0236821f, +0.1005802f,
  -0.0971079f, +0.0242532f, +0.0797324f, -0.1479824f, +0.0439645f, +0.1184852f, +0.0593891f, +0.1052682f,
  +0.0539148f, -0.0312635f, -0.1306468f, +0.0825363f, +0.0201430f, -0.0787125f, -0.1185885f, -0.0388067f,
  -0.0013435f, -0.0059018f, +0.0773117f, -0.0423250f, -0.0535321f, -0.0431334f, +0.0237354f, +0.0489806f,
  +0.0863306f, -0.0749213f, -0.2647265f, +0.1073658f, -0.0018336f, -0.0314512f, +0.0956326f, -0.1795701f,
  -0.1261066f, -0.2662493f, -0.0636478f, +0.2930074f, -0.2471934f, -0.0744674f, +0.0989849f, +0.0817016f,
  +0.0272754f, +0.0966638f, -0.1672824f, -0.1162750f, -0.1054031f, +0.1635128f, -0.0835100f, +0.0031088f,
  -0.0050174f, +0.0629947f, -0.1170989f, -0.1354090f, +0.0821909f, +0.0195739f, -0.0128733f, -0.1394311f,
  +0.0446726f, +0.1415256f, +0.0679959f, +0.1726001f, +0.0721666f, +0.2130906f, -0.2336076f, +0.0251492f,
  -0.0812702f, +0.0597259f, -0.0661197f, -0.1452330f, -0.0194973f, +0.0976527f, +0.1207878f, +0.1237260f,
  +0.0591329f, +0.0367018f, +0.0226950f, +0.0135302f, -0.0541986f, -0.1875824f, -0.1276640f, -0.1277189f,
  -0.1184157f, -0.1598086f, -0.0348133f, +0.1073100f, +0.0640488f, +0.0649589f, +0.0088022f, +0.0651906f,
  +0.0082341f, +0.0817044f, -0.0745004f, -0.0608036f, -0.0513355f, +0.0672819f, -0.0229753f, +0.0810670f,
  -0.1121721f, +0.0036073f, +0.0524418f, -0.1961964f, +0.2163360f, +0.4367457f, +0.0980156f, +0.1849795f,
  -0.1513609f, -0.0682926f, +0.0747302f, +0.1762130f, -0.1524472f, -0.0984821f, +0.5923294f, +0.0690418f,
  -0.0078353f, +0.0777734f, +0.0092318f, +0.0115405f, -0.0004156f, +0.1409742f, +0.0995617f, +0.0198118f,
  +0.0722249f, +0.0808895f, -0.0089379f, -0.1649148f, -0.0500024f, -0.0563824f, -0.1172658f, -0.2333612f,
  +0.1939771f, +0.0075324f, -0.3568427f, +0.1148087f, -0.0811965f, +0.1023896f, -0.1121613f, +0.0137419f,
  +0.1148096f, +0.1357541f, -0.1420595f, +0.0013554f, -0.0710874f, +0.0421338f, -0.1021971f, +0.0347742f
);

const float biases[4] = float[4](
  +0.0738050f, +0.0768640f, +0.0753526f, +0.0719018f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ACNet b32 Layer66 L0
//!WIDTH LUMA.w 2 *
//!HEIGHT LUMA.h 2 *
//!BIND TMP1_L0
//!COMPONENTS 1

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

vec4 hook() {
    vec2 fcoord = fract(TEX_BIND_L0_POS * TEX_BIND_L0_SIZE);
    vec2 pos = TEX_BIND_L0_POS + (vec2(0.5f) - fcoord) * TEX_BIND_L0_PT;

    ivec2 icoord = ivec2(fcoord * vec2(2.0f));
    int index = icoord.y * 2 + icoord.x;

    vec4 r = TEX_BIND_L0_TEX(pos);

    return vec4(clamp(float[4](r.x, r.y, r.z, r.w)[index], 0.0f, 1.0f), 0.0f, 0.0f, 1.0f);
}
