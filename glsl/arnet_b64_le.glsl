//!HOOK LUMA
//!DESC ARNet b64 Layer0 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND LUMA
//!SAVE FEAT_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF LUMA_texOff
#define TEX_BIND_L0_TEX LUMA_tex
#define TEX_BIND_L0_POS LUMA_pos
#define TEX_BIND_L0_SIZE LUMA_size
#define TEX_BIND_L0_PT LUMA_pt

const float kernels[36] = float[36](
  +0.5791560f, +0.3507293f, +0.0737337f, -0.2042755f, -0.2266462f, +0.5036269f, +0.1967663f, +0.2243782f,
  -0.2101855f, +0.2215164f, -0.1170707f, +0.1629846f, +0.1320041f, +0.3093373f, -0.6258866f, +0.0512978f,
  -0.5051551f, -0.2673947f, -0.2561990f, -0.5456577f, +0.7645866f, +0.3598530f, -1.0324253f, +0.0689525f,
  +0.3402731f, +0.1826533f, -0.1566803f, -0.6183764f, -0.3226918f, -0.1705087f, +0.3621370f, +0.1522648f,
  +0.6782324f, -0.4566559f, +0.3425957f, -0.0821623f
);

const float biases[4] = float[4](
  -0.0163301f, +0.0153359f, -0.0036913f, +0.0215466f
);

vec4 hook() {
    const vec4 r0 = vec4(
        TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)).x
    );
    const vec4 r4 = vec4(
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)).x
    );
    const float r8 = TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)).x;

    float sum[4] = biases;
    for(int n = 0; n < 4; n++) {
        const vec4 k0 = vec4(kernels[n * 9 + 0], kernels[n * 9 + 1], kernels[n * 9 + 2], kernels[n * 9 + 3]);
        const vec4 k4 = vec4(kernels[n * 9 + 4], kernels[n * 9 + 5], kernels[n * 9 + 6], kernels[n * 9 + 7]);
        const float k8 = kernels[n * 9 + 8];
        sum[n] += (dot(r0, k0) + dot(r4, k4) + r8 * k8);
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer0 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND LUMA
//!SAVE FEAT_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF LUMA_texOff
#define TEX_BIND_L0_TEX LUMA_tex
#define TEX_BIND_L0_POS LUMA_pos
#define TEX_BIND_L0_SIZE LUMA_size
#define TEX_BIND_L0_PT LUMA_pt

const float kernels[36] = float[36](
  +0.5262859f, -0.2766402f, +0.3497966f, +0.1687670f, +0.8800860f, -0.0072161f, -0.8424965f, +0.0642542f,
  +0.5669311f, +0.4926927f, +0.1545699f, +0.0239751f, +0.1783481f, -0.5120581f, -0.2540233f, +0.1969164f,
  +0.4235412f, +0.4548915f, -0.2052217f, -0.7136854f, +0.9664123f, +0.1634157f, -0.5679502f, -0.4917000f,
  -0.1845780f, +0.0955248f, -0.0082978f, -0.1930225f, -0.1803302f, +0.0364783f, +0.6852351f, -0.0218350f,
  -0.3406682f, -0.0982915f, -0.5138333f, -0.1516848f
);

const float biases[4] = float[4](
  -0.0237553f, -0.0376353f, +0.0426902f, +0.0240657f
);

vec4 hook() {
    const vec4 r0 = vec4(
        TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)).x
    );
    const vec4 r4 = vec4(
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)).x
    );
    const float r8 = TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)).x;

    float sum[4] = biases;
    for(int n = 0; n < 4; n++) {
        const vec4 k0 = vec4(kernels[n * 9 + 0], kernels[n * 9 + 1], kernels[n * 9 + 2], kernels[n * 9 + 3]);
        const vec4 k4 = vec4(kernels[n * 9 + 4], kernels[n * 9 + 5], kernels[n * 9 + 6], kernels[n * 9 + 7]);
        const float k8 = kernels[n * 9 + 8];
        sum[n] += (dot(r0, k0) + dot(r4, k4) + r8 * k8);
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer1 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND FEAT_L0
//!BIND FEAT_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L0_TEX FEAT_L0_tex
#define TEX_BIND_L0_POS FEAT_L0_pos
#define TEX_BIND_L0_SIZE FEAT_L0_size
#define TEX_BIND_L0_PT FEAT_L0_pt

#define TEX_BIND_L1_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L1_TEX FEAT_L1_tex
#define TEX_BIND_L1_POS FEAT_L1_pos
#define TEX_BIND_L1_SIZE FEAT_L1_size
#define TEX_BIND_L1_PT FEAT_L1_pt

const float kernels[288] = float[288](
  +0.1687078f, +0.0327656f, +0.1063473f, +0.0188380f, -0.3651594f, +0.0422310f, +0.1577363f, +0.1827170f,
  -0.0547457f, -0.0616058f, -0.0085740f, +0.2659724f, -0.0458743f, +0.3171802f, +0.2244902f, +0.1340335f,
  -0.0456001f, +0.1878972f, -0.0964664f, +0.1130402f, -0.2689494f, +0.1168870f, +0.2308485f, -0.0835857f,
  +0.0040299f, -0.2091972f, +0.3763986f, -0.2130061f, +0.1262098f, -0.0204580f, -0.0614683f, +0.0619527f,
  -0.1883800f, +0.0177448f, -0.1794033f, -0.1425640f, +0.0865717f, -0.0148369f, +0.2363038f, -0.1798351f,
  -0.1932020f, +0.2162870f, +0.0721885f, +0.0190341f, -0.0175975f, +0.0577703f, -0.0085525f, +0.2590258f,
  +0.1040993f, -0.2088403f, -0.2018303f, -0.1958693f, +0.1361168f, -0.0554147f, -0.0219896f, +0.3375205f,
  +0.1139162f, -0.1017763f, +0.3894881f, -0.1283663f, +0.1298665f, -0.1264635f, +0.0562458f, +0.0939508f,
  -0.0002112f, -0.1063469f, +0.0306906f, -0.2677278f, +0.1211112f, +0.0580860f, -0.0269942f, +0.2225327f,
  -0.0245066f, +0.0164698f, +0.0095184f, -0.1696963f, +0.2159572f, -0.1723568f, -0.0700464f, -0.1655820f,
  -0.0031556f, +0.2780104f, -0.1055732f, +0.0965685f, +0.1503081f, -0.1380294f, +0.0664213f, +0.2504044f,
  -0.3858299f, +0.0685502f, +0.0558648f, -0.1677269f, -0.1228994f, +0.0378146f, -0.2731735f, -0.0487088f,
  +0.1965455f, -0.0920431f, +0.0104414f, +0.2293313f, +0.0219798f, -0.0538760f, +0.0753896f, -0.0839858f,
  +0.1897985f, +0.1421172f, -0.0295225f, +0.2724017f, +0.0446455f, +0.0359298f, +0.4014050f, +0.0009212f,
  +0.0390636f, -0.1060495f, -0.0570588f, -0.1637260f, -0.1755688f, -0.3671985f, -0.0156816f, -0.1975372f,
  -0.1852512f, -0.0667201f, +0.2382875f, -0.4474058f, +0.1569163f, +0.1973761f, +0.1107392f, -0.1635161f,
  -0.0708853f, +0.0630950f, -0.1966077f, +0.1088319f, -0.0927427f, +0.3263181f, +0.3955332f, -0.3845351f,
  -0.0494735f, -0.2766609f, -0.2932664f, -0.2098565f, +0.1226248f, -0.2117195f, +0.1971962f, +0.1437697f,
  +0.0198995f, -0.1197074f, +0.1902118f, -0.1505534f, -0.0213668f, +0.0994981f, -0.0390582f, -0.2258132f,
  +0.1341683f, -0.3882895f, +0.2043041f, -0.0795456f, +0.4058014f, +0.0401535f, -0.0075867f, +0.1781264f,
  -0.1289351f, +0.2162251f, +0.1552080f, +0.0533584f, -0.0234944f, +0.2131189f, -0.2088429f, -0.0283268f,
  +0.2461157f, +0.0183239f, +0.0763720f, +0.3181578f, +0.1728460f, +0.0684910f, +0.1324819f, +0.0989807f,
  +0.0122605f, -0.1260660f, -0.3152146f, -0.0845093f, +0.0875720f, -0.0891623f, +0.2043049f, +0.1315022f,
  +0.2728891f, +0.0866350f, +0.0581110f, +0.0292241f, +0.0186934f, +0.1049855f, +0.0728776f, -0.0147926f,
  -0.1170053f, -0.2207071f, +0.2020808f, +0.1231008f, +0.0707661f, -0.1403162f, -0.0294996f, -0.1547898f,
  +0.1267959f, -0.0000328f, -0.1124884f, +0.1798902f, +0.3083808f, +0.3149132f, -0.0801578f, +0.1364219f,
  +0.1438243f, +0.1335111f, -0.1327995f, +0.0461997f, -0.0366013f, -0.0566567f, -0.0291484f, -0.0177308f,
  +0.0785350f, -0.0063175f, +0.0062471f, +0.1473458f, -0.2402328f, -0.1367887f, -0.1920035f, +0.0735589f,
  -0.1028872f, +0.1168600f, -0.0328902f, -0.0642847f, -0.0200471f, -0.1247166f, +0.1598149f, +0.2499443f,
  -0.0580968f, +0.0078509f, +0.0251937f, +0.1385669f, +0.2291217f, +0.2351554f, +0.0519289f, -0.1155378f,
  +0.1369482f, +0.0104557f, +0.2257414f, +0.2385523f, +0.2252870f, +0.0692958f, +0.0614213f, -0.4095362f,
  +0.1660977f, +0.0913351f, +0.1999455f, +0.2191752f, +0.0226706f, +0.0797201f, +0.1447782f, -0.2372412f,
  -0.1884491f, -0.0527718f, -0.1369344f, +0.1464146f, -0.0835216f, +0.1014233f, +0.0499566f, -0.3926078f,
  +0.0508468f, -0.1003460f, -0.1211088f, +0.0496614f, +0.0444085f, +0.1572144f, +0.5947726f, -0.3099034f,
  +0.0909763f, -0.2604606f, -0.2520921f, +0.5779043f, -0.1211741f, -0.0154876f, -0.0695502f, +0.0695731f,
  +0.2402430f, -0.0063835f, +0.1264402f, +0.0307214f, -0.2237763f, -0.0316840f, -0.1179323f, +0.1104577f
);

const float biases[4] = float[4](
  -0.1767002f, -0.0166198f, -0.0279921f, +0.0354920f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer1 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND FEAT_L0
//!BIND FEAT_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L0_TEX FEAT_L0_tex
#define TEX_BIND_L0_POS FEAT_L0_pos
#define TEX_BIND_L0_SIZE FEAT_L0_size
#define TEX_BIND_L0_PT FEAT_L0_pt

#define TEX_BIND_L1_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L1_TEX FEAT_L1_tex
#define TEX_BIND_L1_POS FEAT_L1_pos
#define TEX_BIND_L1_SIZE FEAT_L1_size
#define TEX_BIND_L1_PT FEAT_L1_pt

const float kernels[288] = float[288](
  +0.2188056f, -0.0027791f, -0.1469000f, +0.4670984f, -0.0890630f, -0.0869379f, +0.0020101f, -0.3748330f,
  -0.1489016f, -0.0254656f, -0.0198159f, +0.1980710f, +0.4116294f, +0.0591332f, -0.2833428f, +0.0432678f,
  +0.2460114f, +0.2279495f, -0.1807514f, -0.3646777f, +0.2513700f, +0.0619116f, -0.1366814f, +0.1693978f,
  +0.3012629f, +0.2205961f, -0.0388142f, -0.1353906f, +0.1235204f, -0.1343897f, +0.0039418f, +0.1286271f,
  -0.4793682f, +0.1297586f, -0.0659183f, -0.2853208f, -0.1601019f, +0.1572166f, +0.0766485f, +0.0649271f,
  +0.2639174f, +0.0085062f, -0.2078748f, -0.1061442f, +0.4313515f, +0.1000022f, +0.2691302f, +0.3474355f,
  -0.1817526f, -0.0520254f, -0.2223039f, -0.3358441f, -0.0860808f, +0.1627832f, +0.0750217f, +0.2335200f,
  -0.0897611f, -0.1113483f, +0.0220108f, +0.0335474f, -0.1220682f, -0.0954304f, +0.2227956f, +0.1344146f,
  -0.3534243f, -0.1077868f, +0.1920405f, -0.0787520f, -0.2206372f, -0.1226804f, +0.0777969f, -0.2043074f,
  +0.0180549f, -0.1262548f, -0.1892703f, -0.2341846f, -0.3966306f, +0.2603693f, +0.0168238f, +0.0880752f,
  -0.2112493f, -0.0178771f, +0.4332752f, +0.2759080f, -0.3403639f, +0.4567732f, -0.0674827f, +0.2130900f,
  -0.2344789f, -0.3323657f, +0.0943314f, +0.3856004f, -0.3654125f, -0.0012154f, +0.1074370f, -0.1289240f,
  -0.0690781f, -0.1229639f, +0.0309800f, -0.1378619f, -0.0185773f, +0.0035207f, +0.2022285f, -0.2635011f,
  -0.3300882f, -0.1912748f, -0.0565634f, +0.3632461f, +0.1745662f, -0.0193426f, -0.0993454f, -0.0103756f,
  -0.1484746f, +0.0867885f, +0.1327001f, +0.2737161f, +0.0034555f, +0.0251037f, -0.3458425f, +0.2495289f,
  +0.2563512f, +0.0340781f, +0.1207478f, +0.4111522f, +0.0259817f, -0.0066493f, -0.1767430f, -0.3221372f,
  -0.0595492f, +0.0157707f, -0.3697264f, +0.1860125f, +0.0131688f, +0.1004482f, +0.0607147f, -0.0809092f,
  +0.2588678f, +0.0661126f, -0.0863013f, -0.4108659f, +0.2972647f, -0.1619402f, -0.0808624f, +0.0552008f,
  +0.1205692f, +0.2630628f, +0.1760880f, -0.6923018f, +0.1893790f, -0.1900038f, +0.0611065f, -0.0069701f,
  +0.3095357f, -0.1384343f, +0.0921988f, +0.0157242f, -0.2879750f, +0.1944116f, -0.1571657f, -0.2051228f,
  +0.1251928f, +0.0316150f, -0.0918407f, +0.0153677f, -0.2649700f, +0.2117473f, -0.0523173f, -0.2027177f,
  -0.2717510f, +0.1037140f, +0.0851010f, -0.4101830f, -0.1041432f, -0.0509701f, -0.0151453f, +0.1883645f,
  -0.1973390f, -0.0998076f, +0.6868630f, +0.5870776f, +0.0335889f, +0.1053003f, +0.3779088f, -0.1362316f,
  +0.2121638f, -0.1076386f, -0.1951595f, +0.1951374f, -0.0454243f, +0.0253045f, +0.0620316f, -0.0186389f,
  +0.0803817f, -0.0904654f, -0.2860234f, +0.2126513f, -0.0859856f, -0.1913769f, -0.0799162f, +0.0157163f,
  -0.1854026f, +0.0088311f, +0.5023407f, +0.2469865f, +0.0145694f, +0.0149976f, +0.0427036f, +0.0081526f,
  +0.1715507f, +0.0963344f, +0.0174226f, -0.1235685f, +0.0684213f, -0.0225357f, -0.0262796f, -0.1689197f,
  -0.1637791f, -0.0685195f, -0.1126115f, -0.3151206f, +0.0251436f, -0.0789054f, +0.1343229f, +0.0838002f,
  -0.1910965f, +0.1220438f, +0.0444621f, -0.3628421f, +0.0873824f, -0.1880666f, +0.0270063f, +0.2163000f,
  -0.3411056f, +0.0765985f, -0.0719805f, -0.1542600f, +0.1900595f, -0.1218784f, -0.0636608f, +0.1678603f,
  +0.0460013f, +0.1190859f, +0.1152508f, -0.1885576f, +0.1183358f, -0.4761252f, -0.1802097f, +0.4156418f,
  +0.0285663f, -0.1917032f, +0.0213674f, -0.1651147f, +0.0965475f, -0.0993204f, +0.0371274f, -0.2776514f,
  +0.2384609f, -0.3403130f, +0.3610158f, +0.4404789f, -0.1073793f, +0.3223014f, +0.1487256f, -0.1730832f,
  -0.0148667f, -0.1938405f, +0.1328186f, +0.1524391f, +0.0206007f, +0.0315589f, -0.4613282f, -0.2294469f,
  -0.0960091f, -0.3580386f, +0.6715580f, +0.1672356f, +0.3930992f, -0.1188236f, -0.0120643f, -0.1508861f,
  +0.0192113f, +0.1669864f, -0.3993201f, +0.4349730f, -0.1814974f, -0.1261876f, -0.1946287f, +0.1061386f
);

const float biases[4] = float[4](
  -0.0513647f, -0.0589229f, -0.0369268f, -0.0273326f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer2 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND FEAT_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L2_TEX FEAT_L0_tex
#define TEX_BIND_L2_POS FEAT_L0_pos
#define TEX_BIND_L2_SIZE FEAT_L0_size
#define TEX_BIND_L2_PT FEAT_L0_pt

const float kernels[288] = float[288](
  +0.2168193f, -0.2716859f, -0.1758074f, -0.1565668f, -0.0877845f, +0.0674111f, -0.0036679f, -0.0943300f,
  +0.1687189f, +0.0959711f, -0.0510762f, +0.0615166f, +0.1574199f, -0.3803286f, +0.1834188f, -0.0445140f,
  +0.1791759f, +0.2421293f, -0.1824146f, -0.2660471f, -0.0247663f, +0.0176723f, -0.0077120f, +0.1073574f,
  -0.0330346f, +0.1521050f, -0.3104400f, -0.0962665f, -0.4020160f, +0.5167568f, +0.2511914f, -0.4317831f,
  +0.1963656f, -0.0707966f, -0.0888793f, -0.1740434f, -0.2494624f, -0.1564451f, +0.1428823f, +0.2883737f,
  +0.1566646f, +0.1048904f, -0.0398906f, -0.1290014f, +0.0182596f, +0.2457207f, +0.1834124f, +0.1978035f,
  +0.0016400f, +0.2127604f, -0.1831748f, +0.0080828f, +0.2016341f, -0.0231016f, +0.0407304f, -0.0193039f,
  -0.4607677f, -0.1264561f, -0.2221508f, -0.1373001f, -0.3472623f, +0.1612449f, +0.2662964f, +0.1540427f,
  -0.1435239f, -0.3154100f, -0.2422165f, -0.1275416f, -0.0940057f, +0.1008361f, +0.0942610f, +0.0636993f,
  +0.0454657f, +0.0515329f, -0.3151484f, +0.2713096f, +0.0798925f, -0.0314944f, -0.0542224f, +0.2802210f,
  -0.0368803f, +0.0849567f, +0.0841803f, -0.2280182f, -0.0916643f, +0.1022502f, +0.0063119f, -0.0559997f,
  -0.1461672f, +0.1064403f, +0.4021428f, +0.0107974f, +0.1520085f, -0.0124807f, -0.1369737f, -0.0506464f,
  +0.0349483f, -0.0928358f, +0.1676442f, -0.0934477f, -0.1454061f, -0.0559081f, +0.0473102f, -0.0192960f,
  -0.0081978f, -0.1446471f, +0.0329522f, +0.0687807f, -0.0875014f, -0.0929931f, -0.0615750f, +0.6666855f,
  -0.2023066f, +0.1729009f, +0.1853689f, +0.1817517f, -0.1913238f, +0.1583877f, -0.0359863f, +0.2758366f,
  -0.2225794f, +0.1450875f, -0.0295611f, -0.0237780f, -0.1164353f, +0.0603375f, -0.0612915f, -0.0945355f,
  +0.0160422f, +0.0822950f, +0.0306362f, -0.1830313f, +0.0582791f, +0.3994644f, +0.0754511f, +0.2390415f,
  -0.0427063f, -0.1875571f, -0.1046530f, -0.0317691f, -0.2513526f, +0.0556919f, +0.0001472f, -0.2192041f,
  -0.2876596f, +0.2024710f, +0.0640159f, -0.1407209f, +0.0095393f, +0.1316106f, -0.1766113f, -0.1567980f,
  -0.1109873f, -0.0013334f, +0.1845306f, -0.0269528f, +0.0592414f, -0.0042748f, -0.2361452f, +0.0098143f,
  -0.1009077f, -0.1362342f, +0.0523334f, +0.2535746f, -0.3518879f, +0.1829237f, +0.0721800f, -0.0420847f,
  +0.0743874f, +0.0302405f, -0.0451977f, +0.1546756f, +0.1288071f, +0.1233537f, +0.0950465f, +0.0539280f,
  -0.3284018f, -0.0504179f, -0.2192078f, -0.0904127f, -0.0224459f, +0.0355057f, -0.1005532f, -0.0202739f,
  +0.0145138f, +0.0849613f, +0.1960986f, +0.1829333f, +0.1810041f, -0.0427126f, -0.1755274f, -0.2434114f,
  -0.0209016f, -0.1128475f, -0.1955396f, +0.0907897f, +0.0584268f, -0.1445639f, +0.1428824f, -0.1446145f,
  -0.0571943f, +0.2913707f, +0.1432426f, -0.1374509f, +0.0459858f, +0.2481677f, +0.0542229f, -0.1347510f,
  -0.1189438f, -0.1103810f, +0.0062215f, +0.0674638f, +0.1493455f, -0.0498897f, +0.0264928f, +0.0060753f,
  +0.0595177f, +0.1580621f, -0.2270863f, +0.1615434f, +0.2889101f, -0.2170266f, +0.0607188f, -0.2125803f,
  +0.0137268f, +0.0772782f, +0.0986262f, -0.1405887f, +0.3114603f, +0.0798391f, -0.0986448f, +0.1284008f,
  -0.1063280f, -0.0166258f, +0.2749471f, +0.2153030f, +0.0158293f, +0.1214180f, +0.0301458f, +0.0742370f,
  -0.0601239f, -0.0137063f, -0.0470056f, -0.0031841f, +0.2196237f, -0.3398695f, +0.0813898f, -0.2890427f,
  +0.0391304f, -0.3715627f, -0.1012887f, -0.1104826f, -0.0378753f, +0.1625242f, -0.1769329f, -0.3263305f,
  -0.1785827f, -0.0319441f, -0.1225695f, -0.0781265f, -0.0003648f, +0.0305603f, -0.1324022f, -0.1870632f,
  +0.3601110f, -0.1424156f, -0.0040317f, -0.0913836f, +0.2479320f, -0.2420802f, +0.2309910f, +0.0810499f,
  -0.0740613f, +0.2030817f, +0.0622514f, +0.0911410f, -0.0217549f, +0.0347913f, -0.0396788f, -0.1324804f,
  +0.0050244f, +0.0796958f, -0.0160426f, -0.1256987f, -0.0009803f, -0.0064868f, +0.3532963f, -0.0146407f
);

const float biases[4] = float[4](
  +0.0300917f, +0.0216866f, +0.0199700f, +0.0203948f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer2 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND FEAT_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L2_TEX FEAT_L1_tex
#define TEX_BIND_L2_POS FEAT_L1_pos
#define TEX_BIND_L2_SIZE FEAT_L1_size
#define TEX_BIND_L2_PT FEAT_L1_pt

const float kernels[288] = float[288](
  +0.1388742f, -0.0079618f, -0.1375882f, +0.1535292f, +0.1947368f, -0.1621672f, -0.0680284f, +0.3291515f,
  +0.2056471f, -0.1406378f, -0.1281657f, -0.1274417f, -0.0588079f, -0.0371455f, -0.1463839f, -0.0832932f,
  +0.0846860f, -0.0464064f, -0.0525516f, -0.0697622f, +0.0431869f, -0.1594848f, +0.0870294f, +0.0353966f,
  +0.0563513f, -0.1278006f, +0.2330963f, +0.0409178f, -0.6737155f, +0.0765378f, +0.0605919f, +0.1774798f,
  +0.0480744f, +0.0603537f, +0.1541468f, -0.3408640f, -0.4227749f, -0.0814240f, -0.1301190f, -0.1681229f,
  +0.2606993f, +0.0502782f, -0.0646739f, -0.0386189f, +0.1524294f, -0.0710599f, +0.0499404f, -0.0561971f,
  -0.2145375f, +0.0193787f, -0.4983666f, +0.0029798f, -0.4593096f, +0.5929499f, -0.1550932f, +0.1553304f,
  +0.0795948f, +0.1051311f, -0.3395492f, -0.0348762f, -0.2533683f, +0.1427134f, -0.1586356f, -0.2875699f,
  +0.0310245f, +0.2115222f, -0.0802534f, +0.1143233f, +0.2576143f, -0.2417244f, +0.1917681f, -0.0099653f,
  -0.0308042f, +0.0712839f, -0.0603574f, -0.0225391f, -0.1563242f, +0.2491893f, +0.1662772f, +0.0821915f,
  +0.0738830f, -0.1739246f, -0.0687606f, -0.3182676f, +0.2826565f, +0.0173214f, +0.2020345f, +0.2079339f,
  -0.1205760f, -0.1127390f, -0.1194015f, -0.3235535f, +0.3038285f, +0.1355683f, +0.2559558f, -0.0464703f,
  +0.0918370f, -0.0103525f, -0.4602215f, +0.1333966f, -0.0307184f, -0.0569832f, +0.3160459f, +0.2194466f,
  +0.0747933f, +0.0417796f, -0.0425115f, -0.1235643f, +0.1328051f, -0.4048328f, +0.1629871f, +0.0022155f,
  -0.0349657f, +0.4064046f, -0.2743552f, +0.0701121f, +0.1761561f, -0.0491282f, +0.0681679f, -0.0739874f,
  +0.1231727f, +0.2561375f, -0.3086799f, -0.0378475f, +0.0328414f, +0.0684371f, -0.0147828f, -0.1156381f,
  -0.1418249f, +0.1321780f, +0.0315979f, +0.1548251f, -0.0679344f, -0.3715660f, +0.0913467f, -0.1660403f,
  -0.1048738f, +0.0891178f, -0.1197462f, +0.1955653f, +0.2362051f, +0.0695491f, +0.2889097f, -0.0672442f,
  +0.0689780f, +0.1864060f, +0.0286368f, -0.0066381f, +0.3154100f, -0.1341547f, +0.1405140f, -0.2587463f,
  +0.1146282f, -0.0480968f, +0.0599390f, +0.0965625f, +0.3334105f, -0.1487220f, -0.0206026f, -0.1370401f,
  +0.1620138f, +0.0540946f, -0.2219360f, -0.0091017f, -0.0105311f, +0.1615722f, +0.0608012f, +0.1846155f,
  -0.1664146f, -0.1173876f, +0.1250566f, -0.0960242f, -0.1575709f, +0.0521054f, -0.3764599f, +0.0058031f,
  +0.1128199f, +0.2941405f, +0.1484842f, +0.1991341f, +0.1937804f, -0.2628587f, -0.2083531f, +0.3184270f,
  +0.0879778f, +0.1501607f, -0.0908225f, -0.0741223f, -0.2566136f, -0.0985817f, +0.0119148f, -0.0155251f,
  -0.1783713f, -0.2856980f, -0.1974359f, +0.1101178f, -0.2999384f, +0.0403671f, -0.1100697f, +0.1365292f,
  -0.0798993f, -0.1919350f, +0.1632067f, -0.1088718f, -0.3551966f, +0.2472496f, +0.0898501f, -0.1067748f,
  -0.2975889f, +0.1069895f, -0.1232476f, +0.2314627f, -0.0511284f, +0.1407441f, -0.1671526f, +0.0562054f,
  +0.2569027f, +0.2596546f, -0.1254806f, -0.3009749f, +0.0410913f, +0.1047424f, -0.0673708f, +0.2645934f,
  -0.2036880f, -0.0653417f, +0.2196144f, +0.0213689f, -0.1084305f, +0.0659309f, -0.1422753f, -0.1094954f,
  -0.0055394f, -0.0375740f, +0.1445784f, +0.1757212f, +0.0509436f, +0.2744043f, -0.1293638f, -0.1302872f,
  +0.1485584f, +0.2229003f, +0.0241250f, +0.0884427f, +0.0958695f, -0.1825944f, +0.0346709f, +0.0354053f,
  -0.1368463f, -0.2229697f, +0.0401661f, -0.1631593f, -0.1487252f, +0.2004163f, -0.1358666f, -0.0962041f,
  -0.4811144f, +0.1141942f, +0.0925853f, +0.0910527f, +0.0513461f, -0.0956811f, -0.2027475f, -0.0215726f,
  +0.1957069f, +0.2123061f, -0.0668901f, -0.0777175f, -0.0298996f, -0.0838916f, -0.0637773f, -0.3304986f,
  +0.1596326f, -0.4222099f, +0.0201833f, +0.0183315f, -0.2615878f, +0.3167385f, +0.1394015f, -0.1179923f,
  -0.1685277f, +0.0179356f, +0.2164731f, -0.0662213f, +0.2182408f, -0.1417947f, -0.0361352f, -0.2517106f
);

const float biases[4] = float[4](
  -0.0217118f, +0.0271793f, +0.0997516f, +0.0135306f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer3 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1902486f, +0.2757791f, -0.1098505f, -0.3440538f, -0.0248124f, -0.2364486f, +0.0468308f, -0.1249405f,
  -0.2267886f, -0.1771718f, -0.0282443f, -0.0625771f, +0.1065927f, -0.0181089f, +0.3314632f, -0.1548503f,
  +0.0489232f, +0.1453817f, -0.0779124f, -0.0718339f, +0.1794375f, -0.2020326f, +0.1328290f, -0.1274727f,
  +0.3507046f, -0.1039199f, +0.2414677f, +0.0136992f, -0.0316788f, -0.0036867f, +0.3907039f, -0.2884985f,
  -0.0882114f, -0.2303849f, +0.0327534f, -0.1088395f, -0.1992281f, -0.0071703f, +0.1311226f, -0.0960830f,
  -0.2133017f, +0.0681730f, +0.1773851f, -0.1771255f, +0.0711776f, -0.1164235f, -0.1767375f, -0.0294877f,
  +0.0748519f, -0.5149131f, +0.5569295f, +0.1988782f, +0.0497479f, -0.0810928f, -0.2228557f, -0.1228025f,
  -0.4104796f, +0.0164212f, -0.0717248f, +0.2444061f, -0.0252341f, -0.3812668f, +0.2138423f, +0.1120129f,
  +0.2704418f, -0.1699469f, -0.0388605f, -0.3909597f, +0.1197413f, -0.0828315f, -0.1193106f, +0.2372446f,
  +0.1833361f, +0.2074681f, +0.1760478f, +0.1109206f, +0.0019839f, -0.0817411f, -0.1655943f, -0.2313720f,
  -0.1455319f, +0.1181163f, -0.1417080f, +0.0329746f, +0.0651829f, +0.0553999f, -0.0405743f, -0.1491700f,
  -0.1281779f, -0.1036102f, +0.1821282f, +0.0374850f, -0.1425816f, +0.0046905f, -0.1147259f, -0.1097253f,
  +0.3566359f, +0.2955922f, -0.3101410f, +0.3075249f, +0.3262572f, -0.0685876f, +0.0897124f, +0.4138375f,
  +0.0255892f, +0.0726575f, -0.2913737f, -0.1128721f, +0.1427578f, -0.1447800f, -0.0698613f, +0.3589940f,
  +0.2059146f, +0.1730151f, -0.2023275f, -0.0859887f, +0.2626441f, -0.3642373f, -0.0957674f, -0.0367699f,
  -0.0381291f, -0.1600928f, -0.3509840f, +0.1874493f, +0.0431632f, -0.4307584f, +0.3587893f, +0.2049612f,
  -0.2606989f, +0.3012707f, +0.1400339f, +0.0804002f, -0.0502054f, -0.3585656f, +0.0228556f, -0.0175589f,
  -0.2354958f, -0.1290001f, -0.1951212f, +0.2495283f, -0.2842565f, -0.0784119f, +0.1843557f, -0.0979273f,
  -0.1586930f, +0.1495178f, -0.4040565f, -0.0063192f, -0.0940915f, -0.0688402f, +0.2096193f, +0.3213502f,
  -0.1698514f, +0.0371826f, -0.4018258f, -0.1013875f, -0.1160287f, +0.0566836f, -0.0668142f, +0.0718352f,
  -0.0090207f, +0.0664024f, +0.1787505f, -0.3688464f, -0.1843663f, -0.0641143f, -0.0192495f, +0.0464061f,
  -0.0119626f, -0.2306946f, -0.5678437f, +0.0295000f, -0.2438048f, +0.1408480f, -0.2577339f, +0.1346266f,
  +0.1563469f, +0.1381427f, -0.2834140f, -0.1510254f, +0.0141879f, +0.0672477f, -0.1618466f, +0.0757984f,
  -0.3700151f, -0.3854330f, +0.3550051f, -0.1217890f, +0.0202844f, +0.4739106f, -0.0167821f, -0.0998494f,
  +0.1643824f, +0.0751500f, -0.5820766f, -0.3575002f, -0.0385134f, -0.0003828f, -0.1831813f, -0.2015816f,
  -0.0227039f, -0.0792108f, -0.5228276f, +0.1255854f, -0.2153356f, +0.4291312f, -0.0905913f, -0.0701105f,
  +0.1585713f, -0.0211689f, -0.1226404f, +0.0680299f, -0.2907500f, +0.1592283f, -0.0230533f, +0.3075422f,
  +0.0095428f, -0.1270125f, -0.0162791f, -0.0702469f, -0.0715036f, -0.0372702f, -0.0754173f, -0.0552129f,
  -0.1873012f, -0.2142606f, +0.1567527f, +0.1112951f, +0.1437939f, +0.4277052f, -0.0367272f, +0.1663739f,
  +0.0472293f, -0.0058439f, +0.2250451f, -0.0757389f, +0.2033691f, +0.1670161f, -0.0212815f, -0.1097944f,
  -0.4041655f, +0.1117050f, -0.1646434f, -0.1142122f, -0.0491111f, +0.0392650f, +0.0210544f, -0.1003412f,
  +0.3231936f, +0.0613130f, +0.1243566f, +0.0949906f, -0.0772848f, -0.0320313f, -0.0586940f, +0.1512680f,
  -0.0964790f, +0.2036721f, +0.0472217f, +0.3102064f, +0.1057873f, +0.0635825f, +0.1306561f, +0.2253063f,
  +0.1766812f, +0.0625128f, -0.1157860f, +0.0689575f, +0.0844470f, +0.1944145f, +0.2858422f, +0.0049622f,
  -0.0182509f, +0.2425651f, +0.1339816f, -0.3646601f, -0.1859920f, +0.0756688f, +0.1872472f, +0.1701787f,
  -0.0861521f, -0.1632297f, +0.1498736f, -0.1326528f, -0.0649781f, -0.0848993f, -0.1455835f, +0.1365383f
);

const float biases[4] = float[4](
  -0.0730571f, -0.0577602f, +0.1219375f, -0.0496300f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer3 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0095817f, +0.3691520f, -0.2347795f, +0.1402781f, +0.2338400f, -0.1723223f, -0.0291345f, -0.0888610f,
  -0.0168401f, +0.0072404f, -0.2622542f, +0.0618776f, -0.1986852f, +0.4032729f, -0.0300224f, +0.0966715f,
  +0.1531462f, +0.2222492f, +0.0818261f, -0.3102028f, +0.4600266f, -0.0006445f, -0.1303272f, +0.0185352f,
  -0.1065593f, +0.0124029f, +0.3153560f, -0.1047294f, +0.0632025f, -0.1515207f, +0.1314699f, -0.1593955f,
  +0.1155902f, +0.0945563f, -0.1819676f, +0.0763557f, +0.0418724f, +0.0538325f, +0.1795700f, -0.0598872f,
  +0.1651860f, +0.0508045f, -0.0836852f, -0.3685140f, +0.2816062f, -0.0548280f, +0.1739528f, -0.1686722f,
  -0.0801928f, +0.0240925f, -0.1409735f, +0.0405812f, -0.0721084f, -0.0156267f, -0.1816726f, -0.0475160f,
  +0.2021835f, +0.2237104f, -0.0021097f, +0.1218665f, -0.0839433f, -0.1035938f, +0.0059374f, +0.3031084f,
  +0.1096154f, +0.0898039f, +0.2376948f, -0.5778439f, +0.2192906f, -0.2280700f, -0.0874654f, -0.1661544f,
  +0.1346503f, -0.0719889f, -0.4092148f, +0.0543854f, +0.0651792f, +0.1255295f, +0.0891188f, +0.1565571f,
  -0.1063590f, +0.0858785f, -0.0475190f, +0.2624548f, +0.1344087f, +0.1060809f, -0.0791466f, -0.4259980f,
  -0.0972302f, -0.1098150f, -0.0479347f, +0.2982956f, -0.1585690f, +0.0828694f, -0.2227373f, -0.0511363f,
  +0.0543388f, +0.1873183f, -0.4248199f, +0.0026236f, -0.1771009f, +0.0276647f, -0.3337656f, -0.0546543f,
  +0.0008316f, +0.1267564f, +0.2497917f, -0.3309993f, -0.1812329f, +0.1297951f, -0.1585425f, +0.2795556f,
  +0.2859208f, +0.0229684f, -0.3286541f, -0.1813278f, +0.2694066f, -0.0600256f, -0.0183717f, +0.0729152f,
  +0.1156835f, +0.1681956f, -0.3259606f, -0.2255567f, +0.1178136f, -0.0622195f, -0.0029379f, -0.0432900f,
  -0.1975120f, -0.0916359f, +0.1238427f, +0.0999625f, -0.0480289f, -0.1909134f, -0.0856978f, -0.2209117f,
  +0.0680169f, -0.0664423f, -0.1077493f, +0.0270320f, +0.0132422f, +0.0530875f, +0.1047064f, +0.0412601f,
  +0.1550985f, -0.1148541f, -0.4259095f, +0.1552354f, +0.0362487f, -0.1864206f, -0.1469133f, +0.0080774f,
  -0.1161355f, -0.1301624f, +0.1676832f, -0.0382065f, -0.1526883f, -0.3614906f, -0.0099671f, +0.0007661f,
  +0.2590379f, -0.1419444f, +0.0704576f, -0.3903459f, +0.1910778f, +0.0818232f, -0.2225290f, +0.0886899f,
  +0.1192082f, -0.0132315f, -0.1448278f, -0.1748233f, +0.1259090f, +0.1378781f, -0.0694365f, +0.1761117f,
  +0.0588817f, +0.1262909f, -0.0642139f, +0.2136087f, +0.1147751f, +0.0178824f, +0.0504251f, +0.4296356f,
  -0.0089467f, +0.0589814f, -0.2083730f, -0.2363035f, +0.0379023f, -0.0902328f, +0.1291172f, +0.0090053f,
  -0.0557285f, +0.0183946f, +0.3645886f, -0.1327266f, -0.1648775f, -0.1232364f, +0.1723201f, -0.1877155f,
  -0.1808428f, +0.3825123f, -0.1695680f, +0.0150784f, -0.0252830f, -0.1919534f, +0.1843520f, +0.2942632f,
  -0.0060084f, +0.0525094f, +0.3102772f, -0.1870683f, +0.0509455f, +0.0947468f, -0.4046609f, -0.0311965f,
  -0.3766607f, -0.0404111f, +0.4904594f, +0.0494368f, +0.1978737f, +0.2799842f, -0.2084228f, -0.3591320f,
  +0.0856699f, -0.1462793f, +0.3560471f, -0.3027236f, -0.0058834f, +0.1502215f, -0.1613015f, -0.0890850f,
  -0.1584218f, +0.0262205f, +0.3361768f, -0.2600177f, -0.2630036f, +0.0056905f, +0.0099753f, +0.2848856f,
  +0.2165223f, +0.2290313f, -0.2530219f, +0.0878476f, -0.2475339f, -0.0559248f, -0.1951308f, -0.1166223f,
  -0.0331263f, -0.0151707f, +0.2410334f, +0.1878474f, -0.2640265f, -0.1506232f, +0.0909204f, -0.0729849f,
  -0.0327330f, +0.0824554f, -0.2315878f, -0.0086639f, -0.1017260f, -0.1028248f, -0.4185986f, -0.0008010f,
  -0.0992989f, -0.1353718f, +0.0942042f, +0.1699326f, -0.0558115f, -0.1960188f, -0.0395127f, -0.0284464f,
  -0.4020934f, +0.1264496f, +0.1718166f, +0.2336451f, -0.3213775f, -0.3543328f, -0.0690549f, +0.1931175f,
  -0.2079395f, -0.0055380f, +0.0209541f, -0.0186998f, -0.1764395f, +0.1201141f, -0.1056285f, +0.0641880f
);

const float biases[4] = float[4](
  +0.0057168f, +0.0552330f, -0.1374923f, -0.0612993f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer4 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0036143f, +0.0572536f, +0.1253399f, +0.0802423f, -0.0512849f, -0.1273724f, +0.0627852f, +0.1570509f,
  +0.1839440f, -0.0449717f, -0.0478598f, +0.1604301f, -0.1118409f, -0.0265786f, -0.0745542f, -0.1391277f,
  +0.2049342f, +0.1645978f, +0.0401640f, +0.0936156f, +0.0541714f, +0.0750967f, +0.2100788f, +0.0637659f,
  -0.0898779f, +0.3226058f, -0.0635769f, -0.0181448f, -0.1849506f, +0.0026260f, +0.1713470f, +0.0936361f,
  +0.2694003f, +0.0477570f, -0.2924906f, +0.0459234f, -0.1861532f, -0.3121677f, +0.1883598f, +0.2861087f,
  +0.4246626f, -0.3233086f, +0.2531079f, -0.2334455f, -0.0153913f, -0.0649151f, -0.0651340f, -0.1399698f,
  -0.0845553f, +0.0365489f, -0.1049355f, +0.2610175f, +0.1835816f, -0.0595548f, +0.1333875f, +0.0625445f,
  +0.0866998f, -0.0569269f, +0.1235098f, +0.2733919f, +0.1360501f, -0.2340263f, -0.0221487f, -0.0100550f,
  +0.1622213f, +0.0595031f, +0.0442708f, +0.2440336f, +0.0296969f, -0.0373374f, +0.2373431f, -0.0339431f,
  -0.0606347f, -0.0155494f, -0.1481169f, +0.1128905f, +0.1851000f, +0.0224076f, +0.2293110f, +0.2044108f,
  +0.0708506f, +0.3902099f, +0.0297103f, +0.1016236f, -0.0099893f, -0.0060030f, +0.1224560f, -0.0504095f,
  +0.1017576f, -0.0021317f, -0.0269008f, +0.1542871f, +0.0625821f, +0.0527586f, +0.2573322f, -0.0001090f,
  +0.0901826f, -0.1110630f, -0.0424737f, -0.2317488f, +0.1984418f, +0.0086228f, -0.1197809f, -0.0126474f,
  +0.0117808f, -0.4167453f, -0.0371719f, -0.1691666f, +0.1749053f, +0.1609537f, -0.0610345f, -0.2346965f,
  +0.2463488f, +0.0532988f, -0.0529046f, +0.0867588f, -0.1570860f, -0.0492219f, -0.1109943f, -0.0754507f,
  +0.0884392f, +0.0330001f, -0.2305114f, -0.2157498f, -0.0870492f, -0.0048407f, +0.0388328f, -0.1966939f,
  +0.0573893f, +0.0119557f, -0.0182390f, +0.1742463f, +0.0659034f, +0.1222414f, +0.3883100f, +0.0481394f,
  -0.2681893f, +0.0839016f, +0.1540444f, -0.1693119f, +0.2702409f, -0.0686892f, +0.0820175f, -0.1928233f,
  -0.0741678f, -0.0040530f, +0.1999364f, +0.1722810f, +0.1135725f, +0.0194809f, +0.2775554f, +0.3255023f,
  -0.2090861f, +0.1097822f, +0.2252640f, -0.2364516f, -0.0037816f, +0.2203836f, -0.2010305f, +0.0994240f,
  -0.1079122f, +0.1423741f, -0.1296550f, -0.0971402f, +0.1135449f, -0.1781396f, +0.2114386f, +0.1596746f,
  -0.0156457f, +0.0213299f, +0.3189598f, -0.1124430f, -0.1312254f, +0.0814797f, +0.1597632f, +0.0377486f,
  -0.1382013f, +0.2008306f, -0.0062943f, -0.4923970f, +0.2707352f, +0.0144861f, +0.1906161f, +0.1975557f,
  -0.4575246f, +0.2313416f, +0.0444307f, +0.0699681f, +0.1392535f, -0.3489895f, -0.1346847f, +0.0058424f,
  +0.0463610f, -0.0649817f, +0.2670817f, -0.2065347f, -0.3813709f, -0.0897986f, +0.0324064f, -0.0574290f,
  +0.1660833f, +0.1647347f, +0.1871812f, -0.1717193f, -0.3746278f, +0.1740810f, +0.0248937f, -0.0646179f,
  +0.0872862f, -0.0600463f, -0.0502532f, -0.1866975f, -0.1298001f, -0.1264280f, -0.3149997f, -0.2256942f,
  -0.1288934f, -0.0526633f, -0.2582871f, -0.0696708f, -0.0131541f, +0.1041220f, +0.0236153f, -0.1945983f,
  -0.4643018f, -0.1850516f, +0.0571429f, +0.0208351f, +0.0247364f, +0.1213480f, +0.0755763f, +0.0400935f,
  -0.0704730f, +0.1336880f, -0.0764598f, -0.0201635f, -0.1514006f, -0.2333316f, +0.0333812f, -0.1936364f,
  +0.1827485f, +0.0722416f, -0.6923183f, -0.1431379f, +0.3439679f, -0.0288759f, -0.0193667f, -0.0683602f,
  -0.1366827f, -0.1610809f, -0.2789494f, +0.1169408f, +0.1086087f, -0.0682652f, -0.2463618f, +0.0775161f,
  +0.0271304f, -0.2583618f, -0.1573038f, +0.0838331f, +0.0418853f, +0.1132769f, -0.1107255f, +0.2044009f,
  -0.0404447f, -0.2941359f, -0.0997081f, +0.0444613f, +0.3440275f, -0.3426228f, -0.2340420f, +0.1846469f,
  +0.0255088f, -0.1784021f, -0.2464582f, +0.0677497f, -0.1039617f, +0.1485208f, -0.1165739f, +0.3135708f,
  +0.3829514f, +0.0778922f, -0.0794081f, +0.0309553f, -0.0800376f, -0.0405907f, +0.0635266f, +0.1459434f
);

const float biases[4] = float[4](
  +0.0258287f, +0.0238363f, +0.0166390f, +0.0939673f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer4 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1402002f, +0.0551556f, -0.1049197f, +0.0833916f, +0.0061236f, -0.2173053f, -0.0988790f, -0.1233910f,
  +0.3135999f, +0.2915671f, +0.1685904f, +0.1558456f, -0.2542260f, -0.0561380f, +0.1368319f, -0.0624526f,
  +0.3708208f, +0.0736815f, +0.0826225f, -0.0405138f, -0.1984805f, -0.1733866f, +0.4722278f, -0.1479162f,
  +0.2267239f, -0.2131968f, -0.1414733f, +0.1431277f, +0.1013875f, -0.0146843f, +0.0657686f, -0.0160319f,
  -0.0429516f, -0.0485515f, -0.1602720f, +0.0549428f, -0.1137280f, -0.0788625f, -0.5281324f, -0.0538561f,
  -0.0487647f, +0.1049812f, +0.0283193f, -0.1583273f, -0.0055422f, -0.2178809f, +0.0117528f, +0.0950241f,
  -0.0269605f, +0.0876334f, -0.0447006f, +0.2468134f, +0.2959499f, +0.1319854f, +0.1873328f, +0.0800639f,
  -0.2381631f, +0.0930721f, -0.2173248f, -0.0197801f, -0.3896657f, +0.1581468f, -0.4610754f, -0.1503911f,
  -0.0968312f, -0.2459695f, -0.3335774f, +0.1146783f, -0.4071766f, -0.3273631f, +0.1134883f, +0.0162724f,
  +0.2904101f, +0.2223965f, +0.2320900f, -0.0575501f, +0.1336579f, -0.0011607f, +0.1349718f, +0.1083387f,
  +0.2286985f, -0.0103681f, -0.0713429f, +0.1529083f, -0.1041162f, +0.0117475f, +0.1443870f, +0.1765190f,
  +0.0982258f, -0.0095496f, -0.1124292f, +0.0138509f, +0.2405581f, +0.1155739f, -0.0383679f, +0.1212895f,
  +0.2219393f, +0.3438693f, -0.1512915f, -0.1059222f, -0.3482072f, +0.1591474f, +0.0533386f, +0.1548509f,
  -0.0792586f, -0.1197115f, +0.1908244f, +0.0830241f, -0.1794531f, +0.2226510f, -0.0784009f, +0.1981205f,
  -0.0604185f, +0.3339639f, -0.0006732f, +0.1462902f, -0.1224609f, -0.1949714f, +0.1436578f, +0.3713962f,
  +0.1007358f, -0.1746619f, -0.1434406f, -0.4719685f, -0.2023648f, -0.2057859f, +0.1339853f, -0.1975267f,
  -0.0929662f, -0.0279739f, -0.2380764f, -0.2425800f, -0.0785067f, -0.1333668f, +0.3456651f, -0.2252243f,
  +0.1392551f, +0.0491143f, +0.1197556f, +0.1273730f, +0.0509558f, +0.3144650f, +0.5247877f, +0.1756197f,
  -0.0571616f, +0.1499019f, +0.0210504f, +0.3265447f, -0.0989355f, +0.2883724f, +0.0450182f, -0.1960492f,
  -0.1206638f, -0.1508003f, +0.1805684f, -0.0166408f, +0.0135609f, -0.1675689f, -0.1563008f, -0.2204986f,
  -0.0569452f, -0.2049934f, -0.1026179f, +0.0257994f, +0.1015361f, +0.0163121f, -0.1739574f, -0.0753139f,
  -0.0681601f, -0.2170853f, +0.0391413f, -0.3179973f, +0.2228121f, +0.2317416f, +0.3185259f, -0.1198557f,
  -0.0442750f, -0.0928557f, +0.3759656f, +0.2461455f, -0.0338662f, +0.1628032f, +0.0086298f, +0.0243185f,
  -0.0002050f, +0.0410347f, +0.0230715f, -0.0781060f, -0.2534497f, +0.2190870f, -0.0052912f, +0.0582625f,
  -0.0929585f, +0.2589915f, +0.2379056f, -0.0183628f, -0.0155097f, +0.1036952f, -0.2903828f, +0.0261592f,
  -0.0813585f, +0.2835623f, -0.1119219f, +0.1371266f, -0.2105353f, +0.2321503f, +0.0976015f, +0.1303752f,
  -0.0226388f, +0.2493206f, -0.1855432f, -0.0753365f, -0.1984210f, -0.1831901f, +0.0751045f, -0.2557515f,
  +0.0170964f, -0.0694887f, +0.1175044f, -0.1535387f, +0.0785651f, +0.1189654f, +0.0368930f, +0.0298075f,
  -0.1979544f, +0.1680209f, -0.0591173f, -0.0282344f, +0.1115724f, +0.0984204f, +0.1541014f, -0.2744145f,
  -0.2425907f, +0.3096536f, -0.0385597f, +0.3333871f, +0.1244567f, +0.1353215f, -0.2774394f, -0.0225430f,
  +0.0326157f, -0.1752633f, +0.2381926f, -0.1446941f, +0.2734548f, +0.2462107f, -0.2060608f, -0.2869993f,
  +0.2530848f, +0.1065973f, +0.1664851f, -0.0408726f, +0.0848476f, +0.2193638f, -0.0455665f, -0.2060032f,
  +0.0703137f, -0.2055690f, +0.3119859f, +0.0697297f, +0.2351486f, +0.2573874f, -0.2261521f, -0.1050026f,
  +0.1390301f, -0.1215848f, +0.0054796f, +0.1367837f, -0.2154327f, -0.1564714f, -0.0563818f, +0.1736097f,
  -0.0456388f, -0.0597577f, -0.1625339f, +0.0467766f, +0.1879142f, +0.0374780f, -0.1097461f, -0.0394581f,
  +0.3822027f, -0.0100873f, -0.0554930f, +0.0689583f, -0.0711611f, +0.1927024f, -0.1336408f, -0.0069580f
);

const float biases[4] = float[4](
  +0.0227627f, -0.0270485f, +0.0995866f, -0.0184313f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer5 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.3386921f, +0.3824983f, -0.2248473f, -0.2310235f, +0.0306712f, -0.1633885f, -0.0231797f, +0.0756599f,
  +0.2616727f, -0.1827433f, +0.1161544f, +0.1108494f, -0.1568269f, -0.2329804f, +0.1194534f, -0.0212270f,
  +0.3474235f, -0.2675279f, -0.2235687f, -0.1024859f, -0.0869080f, -0.2575440f, -0.0910913f, +0.0185051f,
  -0.0845479f, +0.0294709f, +0.0986370f, +0.0157598f, +0.2896674f, -0.0746605f, -0.1206657f, -0.1039668f,
  +0.0917410f, +0.2149637f, -0.2003804f, -0.0386772f, -0.1033253f, -0.1232975f, +0.0911010f, -0.0575085f,
  -0.1184012f, -0.0186633f, -0.1515033f, +0.1563528f, -0.0072682f, +0.5178568f, +0.0595443f, +0.0996167f,
  +0.1302629f, +0.2486122f, -0.1136979f, -0.1234304f, +0.1651921f, -0.1454429f, -0.0873140f, +0.1307863f,
  -0.1593183f, +0.3839816f, -0.2025616f, -0.0625993f, +0.0482559f, -0.0997491f, +0.0046143f, -0.2755382f,
  -0.0348369f, -0.2259757f, -0.4648171f, +0.0883591f, -0.1463126f, +0.1928974f, +0.2187371f, -0.1672149f,
  +0.2709206f, +0.5030031f, +0.0317169f, -0.2015380f, +0.2688648f, -0.3659678f, -0.2617634f, -0.1467855f,
  -0.0571526f, +0.4296524f, +0.1570713f, -0.0847625f, +0.2489063f, -0.0822518f, -0.0262036f, +0.1335107f,
  -0.1799859f, +0.1388220f, -0.0756797f, -0.1293616f, +0.1427125f, +0.2260477f, +0.0484926f, -0.0918383f,
  -0.1862950f, +0.1845829f, -0.4492101f, -0.3561799f, +0.1416697f, -0.2280939f, +0.1094184f, +0.3312167f,
  +0.3120593f, +0.3454387f, +0.1196345f, -0.4207389f, -0.0258133f, -0.0164370f, +0.1440966f, -0.0448939f,
  -0.0162252f, -0.0090337f, +0.6290864f, -0.2672554f, -0.1050362f, +0.0801086f, -0.3093894f, +0.0633210f,
  +0.2713855f, +0.0592633f, -0.6404980f, -0.2094950f, -0.0471461f, +0.0844666f, -0.1397034f, +0.1482782f,
  +0.0894773f, -0.0841723f, +0.5930058f, +0.1358434f, -0.0272716f, +0.0501135f, +0.3257742f, +0.1749803f,
  -0.4203221f, -0.2033898f, +0.0322424f, +0.0029457f, +0.1856056f, -0.1710955f, +0.3767945f, +0.0450658f,
  -0.1120197f, +0.4384462f, +0.1882816f, -0.0542221f, -0.2615570f, -0.0046443f, -0.1228459f, -0.0634914f,
  -0.3195325f, +0.3750939f, -0.2240098f, +0.0391672f, -0.1570063f, +0.2404766f, +0.1589992f, -0.0311013f,
  -0.1939011f, -0.0398029f, -0.2471803f, +0.1512410f, +0.0316186f, -0.0776259f, -0.0047038f, -0.1993329f,
  +0.0846852f, -0.0091453f, -0.2182232f, +0.1284197f, -0.3475951f, -0.0469992f, -0.1146778f, +0.1726629f,
  +0.1113209f, +0.0588863f, -0.1353969f, -0.1915202f, +0.4763184f, +0.0435566f, -0.1318689f, +0.2590468f,
  -0.2677095f, -0.0889865f, -0.6417119f, +0.2757209f, -0.2528027f, -0.2750491f, +0.2231807f, -0.1243312f,
  +0.2480020f, -0.7778755f, +0.0872930f, -0.0251754f, +0.2948341f, +0.2411617f, -0.1455790f, +0.0971427f,
  +0.0958087f, -0.0857911f, -0.2077838f, -0.3181304f, +0.0656267f, -0.0086604f, -0.0660417f, +0.0304994f,
  -0.0596346f, -0.1825448f, +0.0979653f, +0.4189810f, -0.2149996f, -0.3754416f, +0.1681224f, +0.1011462f,
  +0.1184148f, -0.1174885f, -0.0090946f, +0.1997377f, +0.0598428f, -0.1749893f, +0.0309773f, -0.0869735f,
  +0.0395454f, +0.1506127f, +0.2735804f, -0.1567586f, +0.0117775f, +0.2801174f, -0.1858567f, +0.0221642f,
  -0.0987872f, +0.0620912f, +0.2007685f, +0.2996335f, +0.0227640f, +0.0107890f, +0.0891511f, -0.1414057f,
  -0.2621198f, +0.0619409f, +0.0261060f, -0.0635347f, +0.3131920f, +0.0993694f, -0.2251665f, -0.2574998f,
  +0.0274582f, +0.0602404f, +0.2179783f, +0.1222417f, +0.0979721f, +0.1127016f, +0.0810579f, -0.2841596f,
  -0.2040870f, +0.0765469f, -0.1943033f, -0.1126374f, -0.1004696f, +0.0730358f, -0.1269925f, +0.1322398f,
  +0.1069865f, -0.0013596f, -0.0145973f, +0.1269349f, +0.1184689f, +0.1305767f, -0.1858718f, +0.0573379f,
  -0.0971958f, -0.0006934f, +0.4454103f, -0.2026355f, +0.3299402f, -0.0359616f, -0.0206988f, +0.1653498f,
  -0.0652528f, -0.2291774f, +0.0141112f, +0.1386286f, -0.1246434f, +0.0147829f, +0.1428542f, +0.0205688f
);

const float biases[4] = float[4](
  -0.0051030f, -0.1222352f, -0.1063191f, +0.1469114f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer5 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0927000f, +0.0432867f, -0.0377584f, +0.1943051f, -0.1752045f, +0.0598616f, -0.1353774f, +0.0029540f,
  +0.1521965f, -0.1647156f, -0.1877637f, +0.1666362f, +0.4199350f, +0.3387969f, +0.1617954f, +0.1808960f,
  +0.1913323f, -0.1443078f, -0.2251867f, +0.3702562f, +0.2113864f, +0.2165206f, -0.0123647f, -0.0339320f,
  -0.2312960f, +0.0611727f, +0.2061546f, -0.0552842f, +0.0451403f, +0.2059783f, +0.1802023f, +0.2774414f,
  +0.1168179f, -0.2193770f, -0.0667582f, +0.4815868f, -0.0643686f, +0.1084216f, +0.0832625f, -0.2596474f,
  -0.1295030f, +0.0703440f, -0.2471703f, +0.5631298f, -0.1099135f, -0.3177412f, -0.1252473f, -0.4140532f,
  -0.0904754f, -0.3933386f, +0.3346135f, +0.3482932f, -0.3929120f, -0.0840431f, -0.2395290f, +0.0375747f,
  +0.0961335f, -0.1714480f, +0.4876357f, +0.4386334f, +0.1265843f, -0.0549182f, -0.0339160f, -0.1163884f,
  +0.0226788f, +0.2464717f, -0.5144250f, +0.1182250f, -0.2293791f, +0.2160302f, -0.0558506f, -0.0823889f,
  -0.2575107f, -0.2317907f, +0.1103280f, -0.0367513f, +0.1237378f, +0.3786816f, +0.1840302f, -0.2168910f,
  +0.0147016f, -0.3718345f, +0.2320198f, +0.0678107f, -0.0763332f, -0.1609301f, -0.0093297f, -0.4401386f,
  -0.0647811f, -0.1331726f, +0.1221929f, -0.0253250f, -0.2953924f, +0.0124647f, +0.2162990f, -0.1661977f,
  -0.1335414f, -0.3873764f, -0.1844618f, +0.0320701f, +0.0638127f, -0.1484997f, -0.0736756f, -0.0580351f,
  +0.1018416f, -0.4954295f, +0.0297088f, +0.1130466f, -0.1334509f, -0.3633313f, +0.0765030f, +0.1175739f,
  +0.3042794f, +0.0285933f, -0.1905910f, +0.0596069f, +0.0209533f, -0.3237524f, -0.0075331f, +0.0781025f,
  +0.2059065f, -0.1515820f, +0.0625027f, -0.2364203f, +0.1810004f, +0.0778541f, -0.1774806f, +0.0071534f,
  -0.0744328f, +0.0498342f, -0.1525073f, -0.1069437f, +0.1006927f, -0.0295342f, -0.0335884f, -0.1670793f,
  +0.0212045f, +0.0281345f, +0.0807499f, -0.1111121f, +0.1918467f, -0.2429106f, +0.2141109f, +0.1229105f,
  -0.0574004f, -0.1624964f, +0.0106259f, +0.1712589f, -0.1091996f, +0.1148047f, +0.0184917f, +0.0491017f,
  -0.3282428f, -0.0787849f, -0.1783478f, +0.0919354f, -0.3246887f, +0.1570592f, -0.0892854f, -0.2215149f,
  +0.0895629f, +0.2569014f, -0.1945849f, +0.0252217f, +0.0227286f, +0.1599899f, -0.0717496f, +0.0209662f,
  -0.2976845f, -0.2233415f, +0.1248910f, -0.0259815f, +0.0448605f, +0.0192801f, -0.1259145f, +0.0107175f,
  +0.2146780f, -0.1182019f, -0.2126641f, -0.0269223f, -0.2093081f, +0.2273341f, -0.1155760f, +0.3395131f,
  -0.2879392f, +0.1158940f, +0.0082275f, -0.0410970f, +0.0974833f, +0.0599181f, -0.0174710f, +0.1634594f,
  +0.1693019f, +0.0406805f, +0.0596657f, -0.0800238f, +0.2792405f, +0.3674003f, +0.2039489f, +0.2386018f,
  +0.1330947f, +0.1470270f, -0.1236643f, -0.0309814f, +0.2095954f, -0.2620236f, +0.0510090f, -0.0159221f,
  -0.0240328f, -0.0657301f, +0.1142454f, -0.1461781f, +0.1141959f, +0.0977837f, +0.0784464f, -0.1574043f,
  -0.0339279f, -0.0436844f, -0.0138990f, +0.1467037f, -0.1157604f, +0.0313197f, -0.0659539f, -0.2284276f,
  +0.0614290f, +0.1566188f, +0.0943916f, -0.2488070f, -0.0904114f, -0.1061445f, -0.0860632f, +0.2367316f,
  +0.0269378f, +0.3837815f, +0.1921222f, +0.1605802f, -0.2268111f, -0.1782256f, +0.0105955f, -0.2461610f,
  +0.1795288f, +0.1510951f, -0.3226496f, -0.2095553f, +0.0991359f, -0.1533569f, -0.2970702f, +0.0168010f,
  -0.1201565f, +0.2846819f, +0.4596032f, -0.0432616f, +0.0141523f, +0.2442044f, +0.2369234f, +0.2163402f,
  +0.0529867f, -0.3528443f, -0.1139565f, -0.2020424f, +0.2793691f, -0.0931898f, +0.1064311f, +0.1015992f,
  -0.2260118f, +0.2354273f, -0.5314855f, -0.3393606f, -0.1556105f, +0.0303527f, -0.1961962f, +0.2358407f,
  +0.2833114f, +0.0715217f, +0.3364272f, -0.1784347f, +0.0783007f, +0.1573616f, +0.0888957f, -0.0543590f,
  -0.1276611f, +0.0957336f, +0.2367873f, +0.1636940f, +0.1479343f, +0.0063766f, +0.0792287f, -0.0619326f
);

const float biases[4] = float[4](
  +0.0449428f, +0.0309236f, +0.0082216f, +0.0161251f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer6 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0164072f, +0.1166287f, -0.0183922f, -0.0645569f, -0.0942864f, -0.1480877f, -0.2707652f, -0.2979908f,
  +0.1053111f, +0.2064235f, +0.0159040f, +0.2247601f, +0.1771872f, -0.2144357f, -0.0739283f, +0.0047909f,
  -0.0665769f, -0.1412486f, +0.2683549f, +0.0761224f, -0.0994152f, +0.0251958f, -0.2405504f, -0.0569057f,
  +0.0322716f, +0.1987036f, +0.1267979f, -0.0668972f, +0.1406889f, -0.2392762f, +0.0258487f, -0.0389920f,
  -0.0285921f, +0.4028865f, -0.0638010f, +0.1304522f, -0.0098065f, -0.0684630f, +0.1187944f, -0.2080673f,
  +0.1672003f, -0.1059245f, -0.3077244f, +0.0197226f, -0.3221212f, +0.0487033f, -0.0492537f, +0.1652383f,
  -0.2899019f, +0.2712536f, +0.1235361f, +0.3191198f, +0.0453555f, -0.2422341f, +0.1287306f, -0.1644798f,
  -0.1297740f, +0.2006184f, +0.1120801f, -0.1914837f, -0.2651578f, -0.1231484f, +0.0433600f, -0.1979943f,
  -0.1564397f, -0.0582298f, -0.2055588f, +0.1320608f, -0.1736697f, -0.2336183f, -0.2275399f, +0.1799243f,
  -0.1483279f, +0.0220960f, +0.2733142f, -0.1042899f, +0.0210679f, +0.3953215f, -0.0448977f, +0.1610260f,
  +0.0522295f, +0.1480269f, -0.0569479f, -0.2108928f, +0.1400443f, +0.1877052f, -0.1295036f, +0.2996992f,
  -0.1888048f, -0.2213131f, -0.0176582f, -0.0582638f, +0.2466378f, -0.0198957f, +0.1476959f, +0.3250730f,
  -0.0016009f, +0.0269298f, +0.1601780f, -0.0019666f, +0.2061032f, +0.0108146f, +0.2212570f, -0.0731247f,
  -0.2708206f, -0.1169202f, -0.1308852f, -0.1425063f, +0.0226556f, -0.0464359f, -0.0500808f, +0.2734165f,
  -0.1418170f, -0.4229331f, -0.1551102f, +0.1255122f, -0.0949326f, -0.0698396f, +0.1010092f, +0.0579755f,
  +0.2332129f, +0.0854882f, +0.0031838f, -0.0047150f, +0.0114222f, -0.0019571f, +0.0346846f, -0.0204338f,
  +0.2831072f, -0.1727441f, -0.1394680f, +0.0166892f, -0.0659193f, -0.3516578f, +0.0194587f, +0.1844117f,
  +0.1781342f, -0.4307286f, -0.0230488f, +0.1563244f, -0.0285284f, -0.2463048f, +0.0037262f, +0.4499073f,
  +0.1519630f, -0.2020465f, +0.2789050f, -0.1465915f, +0.2700114f, -0.2860195f, +0.1372423f, +0.0650520f,
  +0.0650918f, -0.0080702f, +0.1544759f, -0.1426282f, +0.0505921f, -0.0527745f, +0.1303602f, +0.1774212f,
  -0.0643583f, +0.3589430f, +0.1982418f, +0.1122230f, +0.0958978f, -0.2060175f, +0.0463785f, +0.3119895f,
  -0.1171812f, -0.2004964f, +0.0987640f, -0.2555252f, +0.1415389f, -0.1564381f, -0.0238085f, +0.0853649f,
  +0.0570035f, -0.0429510f, +0.5321283f, -0.1414814f, +0.6387075f, -0.0800227f, -0.1182796f, +0.2835663f,
  +0.0750539f, +0.2353171f, +0.1004917f, -0.1183489f, +0.2248703f, +0.0714457f, -0.0737046f, -0.0227698f,
  +0.0393107f, -0.2142521f, +0.0551858f, -0.0097895f, +0.1409894f, +0.1362265f, +0.0582303f, +0.0457075f,
  -0.0329099f, -0.1201808f, +0.3143731f, +0.0329191f, +0.3343126f, +0.3698346f, -0.0041340f, +0.0596512f,
  -0.3199796f, -0.1493108f, +0.1615736f, -0.1112080f, +0.2488872f, +0.1432415f, +0.2287323f, -0.0046071f,
  -0.0613352f, -0.0882296f, -0.0778494f, -0.0221559f, +0.5399358f, +0.2297573f, +0.1727312f, +0.4753663f,
  +0.0406032f, +0.2090418f, +0.2066084f, -0.0666331f, +0.1589765f, +0.2592328f, -0.0058260f, -0.1973467f,
  -0.0963291f, +0.1677770f, -0.0067995f, -0.1607083f, +0.1017218f, +0.0009616f, +0.1260623f, +0.1238879f,
  +0.1470251f, +0.1189685f, +0.0109546f, +0.2954826f, +0.1682520f, +0.0565352f, +0.0407044f, +0.1082466f,
  +0.2177420f, +0.5548058f, +0.0670868f, -0.0295283f, -0.1975346f, +0.0281124f, +0.0513644f, +0.0610876f,
  +0.0487145f, +0.2397082f, -0.4079240f, -0.0273964f, -0.0153921f, -0.1467478f, +0.0738676f, +0.0547980f,
  +0.0554526f, -0.0256218f, -0.1197903f, +0.1257050f, -0.0857182f, +0.0001398f, -0.0100837f, +0.0440863f,
  -0.1493024f, +0.0485663f, -0.0197735f, +0.1119198f, -0.2123491f, +0.1821502f, -0.0778457f, -0.1547198f,
  +0.1874610f, -0.0642570f, -0.0575285f, -0.1921296f, -0.2178522f, -0.1649959f, -0.0485052f, +0.0569374f
);

const float biases[4] = float[4](
  +0.1572626f, +0.0505645f, +0.0228768f, -0.0415659f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer6 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0928448f, +0.1654360f, +0.0317010f, -0.1854991f, +0.0467931f, -0.1159225f, -0.0606575f, -0.0152124f,
  +0.0838054f, +0.2327525f, +0.1754304f, +0.0351625f, +0.0454313f, +0.1009679f, +0.0711832f, +0.0277927f,
  +0.2013803f, +0.2210125f, -0.1171229f, -0.2407445f, -0.0180633f, -0.1301021f, +0.0250858f, +0.2683640f,
  +0.0879623f, +0.0959531f, -0.2504449f, -0.1167782f, -0.0308632f, -0.1770681f, +0.1853379f, -0.2205953f,
  +0.0369891f, +0.2324388f, +0.1130970f, +0.0080190f, +0.2754399f, -0.1010143f, -0.2169865f, +0.1352008f,
  +0.1855259f, +0.4545714f, -0.2446656f, -0.1087720f, +0.1829686f, +0.2818088f, +0.0517395f, +0.2059039f,
  +0.0443119f, +0.0381568f, -0.2460651f, -0.0504971f, +0.0412510f, -0.3558939f, -0.1339647f, +0.1540744f,
  +0.0808121f, +0.1696001f, +0.4273282f, -0.0098979f, +0.2260606f, -0.5526964f, -0.1285473f, -0.0926471f,
  +0.1790529f, +0.3543323f, +0.0372615f, +0.0224891f, +0.1971906f, -0.0496001f, +0.0416860f, -0.0351623f,
  -0.1565242f, -0.1546296f, +0.0653076f, -0.2297817f, +0.1882866f, -0.1644595f, +0.0336405f, +0.3748918f,
  +0.3475729f, -0.0345178f, +0.2420485f, -0.1102121f, +0.0071081f, +0.0164165f, -0.1199933f, +0.2664838f,
  +0.1199075f, -0.0898941f, -0.2126226f, +0.2953265f, +0.0671123f, -0.1557769f, -0.1873328f, +0.2446592f,
  -0.1861728f, +0.0131865f, +0.1946576f, -0.0186164f, +0.2290632f, +0.1693336f, +0.1671561f, +0.0494227f,
  +0.0857962f, -0.0965071f, +0.0993027f, -0.1106866f, -0.1792260f, +0.3458379f, +0.1107101f, +0.2010109f,
  -0.0048407f, -0.1467584f, -0.2152984f, +0.0736016f, -0.3037353f, +0.0624149f, +0.1631767f, +0.2466384f,
  -0.0163687f, +0.0842680f, -0.1774873f, +0.0202949f, -0.2466335f, +0.1611899f, +0.1813114f, +0.0128571f,
  +0.2276139f, +0.0314280f, -0.4526791f, +0.0508206f, -0.0527805f, -0.0409608f, +0.1299822f, -0.0432986f,
  +0.1002986f, +0.0455538f, -0.1101012f, -0.0579158f, -0.0736897f, -0.1701113f, +0.0109465f, -0.0237674f,
  +0.2979016f, -0.0587608f, -0.0075918f, -0.1056795f, -0.0552938f, -0.1003751f, -0.0644501f, -0.0111933f,
  -0.0078046f, -0.0040128f, +0.0081585f, +0.1477469f, -0.0046996f, -0.2165304f, -0.0004476f, -0.1286123f,
  +0.0282947f, +0.1295221f, +0.0287584f, +0.1362795f, +0.1123297f, -0.1138517f, +0.0819415f, +0.0088287f,
  -0.1507817f, -0.1176321f, -0.0549977f, -0.0765103f, -0.1506834f, -0.2447697f, +0.1866713f, +0.1530092f,
  -0.1030729f, +0.0460161f, -0.0655363f, +0.0434163f, -0.1966606f, +0.2594039f, +0.0310215f, -0.1299761f,
  +0.0269159f, +0.1156846f, -0.0220281f, -0.0189626f, +0.1741275f, +0.1751909f, +0.1742542f, -0.1239851f,
  -0.0176943f, -0.0182681f, +0.0424059f, -0.1380716f, -0.1613051f, +0.1307489f, +0.1237294f, -0.0208020f,
  -0.2846124f, -0.0371339f, -0.0684129f, +0.1072576f, +0.0485476f, +0.1764137f, -0.0423322f, +0.0362106f,
  +0.2591414f, +0.1107488f, +0.0824007f, -0.0582409f, +0.0953392f, -0.0231228f, +0.0677049f, -0.3159424f,
  -0.3444833f, -0.0918829f, -0.4232893f, +0.0366888f, -0.0656679f, -0.2207507f, +0.2058573f, -0.1083767f,
  -0.1501441f, -0.2714570f, +0.1229600f, -0.0076346f, +0.0148546f, -0.0316372f, +0.2194594f, -0.0284308f,
  -0.1535994f, -0.0818444f, +0.1193449f, +0.2354058f, -0.2652846f, -0.1636693f, -0.0296900f, -0.3078744f,
  -0.0938386f, +0.0371749f, +0.2734352f, +0.0799445f, -0.1693197f, +0.1344557f, -0.1691110f, -0.0411799f,
  -0.3882253f, -0.3772866f, -0.0421029f, +0.1184578f, +0.0898948f, -0.1196881f, +0.0898322f, +0.0119539f,
  -0.1243846f, +0.1815849f, +0.3052632f, +0.2961365f, -0.3651164f, -0.1540765f, +0.1675691f, -0.1726587f,
  -0.0691676f, -0.1255338f, -0.0822372f, -0.0318997f, +0.0586920f, +0.0095808f, -0.0622234f, +0.0257905f,
  -0.0393359f, -0.0373001f, -0.1961536f, -0.1547007f, -0.0388464f, -0.1705834f, -0.1052763f, -0.0668091f,
  +0.0547068f, +0.1105871f, +0.0635366f, +0.1980011f, -0.0183340f, -0.3119575f, -0.4192591f, -0.5058914f
);

const float biases[4] = float[4](
  +0.0117186f, -0.0234013f, +0.0867617f, -0.0605458f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer7 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0580379f, +0.1752737f, +0.0372102f, -0.1397113f, +0.0525816f, -0.0869015f, +0.1881772f, -0.0076877f,
  +0.0069153f, +0.0081493f, +0.0606170f, -0.2974409f, +0.3054439f, +0.2112724f, +0.0369492f, -0.1290275f,
  +0.1786290f, +0.1435357f, +0.0585010f, -0.1589473f, +0.1676112f, +0.0393995f, -0.0499896f, -0.0043226f,
  +0.0251151f, -0.0256377f, -0.0323565f, +0.0565684f, +0.1634007f, -0.0407583f, +0.1132726f, -0.2711371f,
  -0.1237183f, +0.3009281f, -0.1106959f, +0.1066436f, -0.0892312f, +0.1015311f, -0.0963643f, +0.0117106f,
  +0.1303046f, -0.3180708f, -0.0060570f, -0.0524640f, +0.0483025f, +0.0405743f, -0.0466674f, +0.0626996f,
  +0.0098118f, +0.0069232f, -0.1456037f, -0.2787353f, +0.1221347f, +0.4071031f, +0.2244083f, -0.0861653f,
  +0.0021374f, -0.2175517f, +0.0623459f, +0.0951352f, -0.2573673f, +0.1940869f, -0.1080898f, -0.0467452f,
  -0.0702281f, -0.1989298f, -0.0075748f, -0.1704125f, +0.0263650f, +0.0396402f, +0.0122019f, +0.0325765f,
  +0.1067988f, +0.0986282f, +0.0622023f, -0.1800061f, -0.0954034f, +0.0320903f, -0.0340563f, -0.3666268f,
  -0.0928778f, -0.0812165f, -0.0320397f, -0.0606098f, -0.1748247f, +0.1371937f, +0.1333422f, -0.4182326f,
  -0.0628137f, -0.3133628f, -0.1622520f, +0.0287646f, +0.2039639f, +0.1079796f, +0.2286805f, -0.0548561f,
  -0.2161476f, -0.2166698f, -0.1630087f, +0.4099406f, -0.0207909f, +0.3574116f, +0.1563404f, -0.2961558f,
  +0.0003655f, +0.1928160f, +0.0468473f, +0.1719868f, +0.2888108f, -0.0643929f, +0.0803510f, +0.0197383f,
  -0.3186172f, +0.0638919f, -0.1161033f, +0.0509927f, -0.1115548f, +0.2304494f, +0.1045366f, +0.0970489f,
  -0.2773926f, +0.2603101f, +0.1772452f, -0.0856273f, +0.3704855f, +0.0652644f, +0.0403372f, +0.0023059f,
  +0.0260624f, +0.0765719f, -0.0548018f, -0.1420571f, +0.0780681f, +0.1473164f, +0.1524243f, +0.0285696f,
  +0.0430917f, +0.0614729f, -0.3284367f, -0.2032023f, +0.2752432f, +0.3548096f, +0.0255238f, +0.2080077f,
  -0.0630204f, +0.0825699f, +0.0447335f, +0.0329295f, -0.0988231f, +0.1580167f, -0.0475139f, -0.0043669f,
  -0.0512973f, +0.0070702f, -0.0022138f, -0.0162664f, +0.0055756f, +0.0720619f, -0.0794267f, +0.3033415f,
  -0.0466168f, +0.0149716f, +0.1855901f, +0.2461325f, +0.2605307f, -0.0290679f, -0.0701405f, +0.0425971f,
  +0.0183311f, -0.0930368f, -0.0045394f, +0.0451103f, -0.0086074f, +0.1750273f, +0.1586299f, -0.2694868f,
  +0.1341079f, -0.5058423f, -0.1391957f, -0.3015576f, -0.1612870f, +0.1616905f, +0.2702640f, +0.3484099f,
  -0.2895800f, -0.0275442f, -0.1016683f, -0.0051506f, -0.0923448f, -0.1451989f, +0.0313223f, -0.0964021f,
  +0.0865655f, -0.3456677f, +0.0102759f, +0.2330910f, +0.0023392f, -0.0495574f, -0.0477062f, +0.1079044f,
  -0.1020049f, -0.4386524f, -0.5520970f, +0.1367514f, -0.1116618f, -0.1855112f, -0.0959084f, -0.2087175f,
  -0.0390763f, +0.0793147f, +0.0265289f, -0.1358797f, -0.2758189f, -0.0753941f, -0.0774601f, +0.2106941f,
  -0.0736452f, -0.0309256f, -0.0465782f, -0.3153434f, +0.0229899f, +0.0636014f, +0.1099158f, -0.2027211f,
  +0.1092077f, -0.1667015f, -0.1225678f, +0.2056823f, +0.1872042f, -0.1644979f, +0.0354946f, +0.2607323f,
  +0.1254986f, -0.2782004f, -0.1178403f, +0.1268360f, +0.2901924f, -0.0442363f, +0.0305852f, -0.1047526f,
  -0.0536619f, -0.0602814f, -0.0504386f, +0.0314854f, +0.0854126f, +0.1995767f, -0.0450577f, +0.2794143f,
  +0.0874762f, -0.0622807f, +0.1844433f, +0.2862027f, -0.0588631f, -0.1859697f, +0.2067534f, +0.1436084f,
  -0.1736772f, -0.0647330f, +0.0498142f, +0.1124391f, +0.1079871f, -0.1178775f, -0.2498764f, +0.2997713f,
  -0.1506452f, +0.0526815f, -0.1677694f, -0.2035050f, +0.0398415f, -0.1680753f, -0.2547853f, -0.2929934f,
  +0.1339701f, -0.0308684f, +0.1931779f, +0.2909502f, -0.1932331f, -0.5454881f, +0.1676818f, -0.2107310f,
  -0.1182946f, -0.0376507f, +0.1731489f, +0.0263581f, +0.0702949f, -0.0915996f, +0.1254134f, +0.1445860f
);

const float biases[4] = float[4](
  +0.0074790f, +0.0796907f, +0.0547272f, -0.0837326f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer7 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0042828f, +0.0178963f, +0.1012932f, -0.1033113f, -0.1284404f, +0.2375807f, -0.0927977f, -0.1268432f,
  +0.0071374f, -0.2851648f, +0.0055677f, +0.2884516f, +0.0212499f, +0.0673565f, +0.0292221f, +0.0000496f,
  -0.2395203f, +0.1353790f, +0.3203602f, +0.0938822f, +0.0293298f, +0.0168293f, -0.1038601f, -0.1952017f,
  +0.0998525f, -0.5294824f, -0.2750410f, -0.2317304f, -0.0075137f, +0.0946946f, -0.0907119f, -0.2001204f,
  -0.1380887f, -0.1187809f, -0.1575376f, +0.0325351f, +0.1728314f, +0.0384259f, -0.0446993f, +0.1457586f,
  -0.0200107f, -0.3395794f, +0.0201470f, -0.2772956f, +0.2378499f, +0.2033524f, +0.1392461f, +0.0226263f,
  -0.1772293f, -0.1392652f, -0.1390651f, +0.3018041f, +0.0969977f, +0.0971236f, +0.1541243f, -0.3834432f,
  +0.2300011f, -0.1310652f, -0.2110199f, +0.2153372f, -0.0838446f, +0.0458934f, -0.0941725f, -0.1260340f,
  +0.0284233f, +0.0594809f, +0.1494346f, +0.2038840f, +0.1208156f, -0.0040625f, -0.0751962f, -0.2685075f,
  +0.1821724f, -0.1534810f, +0.0616174f, -0.2921939f, -0.2219471f, +0.0725208f, -0.0726310f, -0.0807779f,
  -0.0795715f, +0.0209063f, -0.0398545f, -0.1527515f, -0.0236026f, +0.1815470f, -0.0866083f, -0.2635207f,
  +0.3637452f, -0.0456569f, -0.0171339f, +0.2532184f, -0.2058189f, -0.1896376f, +0.0931206f, -0.1528885f,
  -0.0169768f, -0.2375861f, +0.0704235f, -0.0320988f, +0.0077426f, -0.0165508f, +0.0403318f, -0.1067129f,
  -0.0552926f, -0.2078441f, -0.1296067f, +0.1550004f, +0.1810396f, -0.0166524f, +0.0534497f, -0.3421055f,
  -0.2310284f, -0.3477186f, +0.0277973f, +0.1803254f, -0.1642334f, -0.1041170f, +0.0450949f, +0.0190909f,
  -0.1230019f, -0.1655994f, +0.0007292f, -0.0873469f, +0.2280863f, +0.1034852f, -0.1912556f, +0.3190580f,
  -0.2728283f, -0.1199491f, +0.0339941f, +0.0768631f, -0.0330748f, +0.1208721f, -0.1293880f, -0.1174618f,
  -0.1656367f, -0.0615811f, +0.0773207f, +0.0847400f, -0.0477709f, +0.1277761f, -0.1263229f, +0.1207369f,
  -0.1593907f, +0.0171170f, -0.1024079f, -0.3314525f, +0.0074916f, -0.3597931f, +0.0782023f, +0.2147249f,
  +0.1583384f, -0.2640442f, +0.0840639f, +0.2294293f, -0.1418429f, -0.0257825f, +0.0123604f, -0.2673989f,
  +0.1238314f, -0.0489517f, +0.1092535f, -0.3041571f, +0.0642636f, +0.2880458f, +0.2204543f, +0.1245129f,
  -0.4048327f, +0.3501144f, +0.1534593f, -0.1268143f, -0.2944254f, +0.0393411f, +0.0822816f, -0.1837575f,
  -0.2285265f, -0.5387344f, +0.2115324f, -0.0421615f, -0.0080077f, -0.4099166f, -0.3422883f, -0.2189610f,
  -0.0018727f, -0.0878742f, +0.0804704f, +0.3251884f, -0.1137786f, +0.2019552f, +0.2017315f, -0.1098655f,
  -0.1283269f, +0.0403304f, -0.2166445f, -0.2396954f, -0.3376242f, +0.0686141f, +0.0606861f, -0.1202664f,
  -0.2532334f, -0.2045031f, +0.0256611f, -0.0491762f, -0.1031967f, -0.2166165f, -0.0432829f, -0.6010051f,
  -0.0393861f, +0.0043958f, +0.0807562f, -0.1490162f, -0.0502615f, -0.0564531f, -0.0344543f, -0.4060124f,
  -0.1154275f, -0.1587740f, -0.2224072f, +0.0732753f, +0.0924842f, -0.3204813f, -0.0868423f, +0.0960162f,
  +0.1983294f, +0.0566760f, -0.2102675f, -0.0736450f, -0.1210767f, -0.3871710f, -0.1009431f, -0.3857513f,
  +0.1226424f, +0.0484424f, -0.4741853f, -0.0496007f, +0.2153026f, -0.1448302f, +0.3742471f, -0.0887555f,
  -0.0130776f, -0.1043605f, -0.0859600f, +0.1698702f, +0.0749674f, -0.0128582f, -0.0709194f, -0.1497771f,
  +0.1150334f, +0.0580795f, -0.0477923f, +0.0670949f, -0.1669162f, +0.0676800f, +0.2601391f, +0.0621549f,
  -0.0997869f, -0.0258503f, +0.0374071f, +0.1331714f, +0.2705650f, -0.1179442f, -0.1458327f, +0.0191799f,
  -0.2028233f, +0.2295625f, -0.2273524f, -0.2068526f, +0.0569178f, +0.1243934f, +0.2391452f, +0.1746799f,
  +0.1095980f, -0.0431296f, -0.1594685f, +0.0228150f, +0.0427282f, -0.2112864f, +0.2361585f, +0.0280818f,
  -0.0480357f, +0.1571053f, -0.0419258f, +0.2234992f, +0.0091684f, -0.0360935f, -0.1419206f, -0.1705877f
);

const float biases[4] = float[4](
  +0.1054306f, +0.0566270f, -0.0874384f, -0.1019954f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer8 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2857473f, +0.1555893f, +0.0048888f, -0.1156235f, +0.1516564f, -0.1294347f, -0.0497386f, +0.2261072f,
  -0.0210507f, -0.1624387f, +0.1374039f, -0.0767969f, +0.0195928f, -0.0258728f, +0.0876527f, +0.0713605f,
  -0.0240759f, +0.0060195f, -0.1596677f, +0.2541850f, -0.0435042f, -0.0783918f, +0.2387394f, +0.0231704f,
  +0.2594346f, -0.1665705f, +0.3384958f, +0.0672240f, -0.0600384f, -0.1476014f, -0.0594631f, +0.0311711f,
  +0.0103336f, -0.0976191f, +0.3681960f, -0.0915517f, -0.1803065f, -0.4176431f, -0.3842337f, +0.2755552f,
  -0.3196456f, +0.0399119f, -0.3183097f, +0.0645294f, -0.1866929f, -0.1964579f, +0.0301767f, +0.0894781f,
  -0.1850850f, +0.1506552f, -0.1575885f, -0.1688971f, -0.0920734f, -0.0198043f, +0.0849984f, -0.0052309f,
  +0.1841426f, -0.3647372f, -0.1377059f, -0.2220861f, -0.0974324f, -0.1240231f, -0.1168516f, -0.1923897f,
  +0.1888883f, +0.1498476f, -0.2907179f, -0.1554131f, +0.0374159f, -0.1620435f, -0.0628752f, -0.1804149f,
  -0.0600205f, -0.0622965f, +0.1023117f, -0.0691849f, -0.3535935f, +0.2307567f, +0.0289942f, +0.0155012f,
  +0.1927868f, -0.0463306f, -0.0207219f, -0.0399076f, +0.1051959f, -0.1463789f, -0.0817675f, -0.1678020f,
  +0.1097001f, +0.0181378f, -0.2381959f, -0.1964126f, +0.0987423f, +0.0745020f, +0.0257503f, -0.1565106f,
  +0.2101765f, +0.2630706f, +0.1008410f, +0.0111428f, -0.0370011f, -0.2559668f, -0.0947455f, -0.1672157f,
  -0.1017172f, -0.0352160f, +0.0661450f, +0.0177351f, -0.1599412f, -0.4008438f, +0.1133346f, -0.0630097f,
  -0.1910078f, +0.2170445f, +0.2586830f, -0.1286225f, -0.0073769f, +0.2393622f, -0.1720175f, -0.1324407f,
  +0.0620204f, -0.1192959f, -0.2538805f, -0.1488169f, +0.1158495f, -0.1564579f, +0.0109061f, -0.0776332f,
  -0.1309985f, -0.2740505f, -0.0809597f, +0.2067697f, +0.0185794f, -0.1013205f, +0.1933632f, -0.0332602f,
  -0.1367426f, +0.1040844f, +0.0632807f, +0.3274563f, -0.0783192f, +0.0740456f, +0.1183306f, +0.0525790f,
  +0.0270837f, +0.0241849f, -0.0021653f, -0.2138805f, -0.0189462f, +0.0646331f, -0.1783248f, -0.1634783f,
  +0.4410926f, -0.2017877f, -0.3594889f, -0.0614767f, +0.0166250f, +0.1229912f, +0.0092775f, +0.2075597f,
  +0.2539929f, -0.2702034f, -0.0074659f, -0.3322327f, -0.2267024f, -0.3988061f, +0.0840885f, +0.1647921f,
  +0.2696705f, -0.1028783f, +0.2901347f, -0.2771638f, -0.0468898f, +0.1389786f, -0.1257124f, +0.2883268f,
  +0.1358481f, -0.2805632f, +0.0236306f, -0.1248621f, -0.0458822f, +0.3653714f, +0.0723038f, +0.0769157f,
  -0.1069637f, +0.2079527f, -0.0938748f, -0.1598398f, +0.1138645f, +0.0142305f, -0.2771514f, -0.1552454f,
  +0.2901222f, +0.1389038f, +0.0395546f, -0.1018289f, -0.2848726f, +0.2496702f, +0.0220270f, +0.1413211f,
  +0.2408736f, +0.4744440f, -0.0309108f, -0.1139278f, +0.1026284f, -0.0237432f, +0.5077779f, +0.0387551f,
  +0.0207321f, +0.1930185f, -0.1422827f, -0.1862378f, -0.0607397f, +0.1600893f, -0.0258772f, +0.1645131f,
  -0.1078244f, -0.1439514f, -0.0420260f, -0.2250542f, +0.2231951f, -0.1083769f, +0.1748286f, +0.0127521f,
  +0.1993738f, -0.2325703f, +0.2233621f, -0.0607680f, -0.1756791f, -0.1159102f, +0.1159618f, +0.0564214f,
  -0.1162614f, -0.2386371f, +0.1662737f, +0.2066566f, -0.0234031f, -0.0647461f, +0.0553576f, -0.2698091f,
  +0.1377245f, -0.1195228f, +0.1160886f, +0.0299245f, +0.1593733f, -0.0410448f, +0.0242548f, -0.0125900f,
  +0.2431379f, +0.0195383f, +0.3775605f, -0.0661104f, -0.3719546f, +0.0612409f, +0.1272196f, -0.0210811f,
  -0.1123832f, +0.0971229f, +0.3130683f, -0.3189652f, -0.2551920f, -0.0534346f, -0.0258353f, -0.1137043f,
  +0.0793992f, -0.0820032f, -0.1123791f, +0.1373012f, +0.0727565f, +0.2807010f, -0.2026428f, -0.2727083f,
  -0.0577207f, -0.0436072f, -0.2135372f, +0.2672539f, +0.2221213f, -0.1403593f, -0.2438950f, +0.3210260f,
  +0.2648191f, -0.3402641f, +0.0042752f, +0.3870814f, -0.5253211f, +0.1858442f, -0.1282493f, +0.1372436f
);

const float biases[4] = float[4](
  +0.0850027f, +0.0635940f, +0.0457854f, -0.1152170f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer8 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0162099f, +0.4677291f, -0.1239822f, -0.2608931f, -0.1329841f, -0.3138111f, +0.1974355f, +0.1850049f,
  -0.0674512f, +0.0810803f, +0.0768597f, -0.1728386f, -0.1930945f, +0.1122251f, +0.1497258f, +0.2512743f,
  -0.0859229f, +0.2414348f, +0.1034814f, -0.0429297f, -0.2484936f, +0.0195776f, +0.2378993f, -0.1249803f,
  -0.0594663f, +0.0806964f, -0.0030214f, -0.3862847f, +0.0018180f, -0.1016745f, +0.0874120f, -0.0981458f,
  -0.1879985f, +0.1306873f, -0.2653923f, -0.3574763f, +0.0715603f, -0.1700437f, -0.1078521f, -0.0093748f,
  +0.1068030f, -0.0123705f, -0.1277075f, -0.0256287f, -0.1531213f, -0.1083908f, +0.3197575f, -0.0508803f,
  +0.0234704f, -0.2568332f, -0.1342350f, -0.2555817f, -0.2490087f, -0.0862750f, -0.0608975f, -0.2416516f,
  -0.1515515f, -0.2110517f, -0.1604658f, -0.0208773f, -0.1299734f, +0.0746656f, -0.3712527f, +0.0863461f,
  +0.2935873f, -0.1728780f, -0.0399816f, -0.0508230f, +0.0574939f, -0.4682868f, -0.1572073f, +0.1848174f,
  +0.1451036f, +0.0413582f, +0.1486511f, +0.1673022f, -0.2417811f, -0.1220758f, -0.1399138f, -0.0992604f,
  -0.0073865f, -0.0555835f, +0.3871448f, +0.2509914f, +0.1408159f, +0.1971525f, +0.1401406f, +0.0248590f,
  -0.1458082f, -0.0346517f, -0.1530733f, -0.1688317f, -0.1254509f, +0.0131995f, +0.4228134f, -0.1853517f,
  +0.2059180f, +0.3562461f, -0.0583958f, +0.2595964f, -0.1084815f, +0.0312871f, +0.1264431f, +0.1909081f,
  -0.1762287f, -0.0535860f, +0.2215830f, +0.3972358f, +0.2336741f, -0.0834817f, +0.1587304f, +0.2728459f,
  +0.1342051f, +0.2384278f, -0.2060275f, +0.0049522f, -0.0096184f, +0.2345703f, -0.1762161f, -0.0598221f,
  -0.1315478f, +0.1106548f, -0.0198282f, +0.1766973f, -0.0927684f, +0.0837120f, +0.0219586f, +0.0252571f,
  +0.0936591f, -0.0883251f, -0.1648813f, -0.1392710f, +0.1185370f, -0.0732918f, +0.0660248f, -0.0348387f,
  +0.1153592f, +0.1816359f, -0.0896182f, -0.0387411f, +0.0454975f, -0.1061788f, +0.0506727f, -0.0810664f,
  +0.0302729f, +0.2434619f, -0.1677042f, +0.1286523f, -0.0626360f, -0.0088616f, +0.0926885f, -0.2848106f,
  +0.0596571f, +0.0856233f, +0.0121365f, +0.1813480f, +0.1321724f, +0.1546355f, -0.0987396f, +0.0935523f,
  -0.1204882f, -0.1076502f, -0.0093435f, +0.0805285f, +0.2410356f, -0.1508909f, +0.1332514f, -0.1114302f,
  -0.1488189f, -0.0607933f, +0.1326780f, -0.1227946f, +0.2356475f, -0.0305749f, +0.1407457f, -0.2024668f,
  +0.0483291f, -0.1223828f, -0.1751688f, +0.1386945f, +0.1473977f, +0.3066258f, -0.0018934f, -0.0686406f,
  -0.0431114f, -0.0120622f, +0.1173196f, -0.1438583f, +0.4030462f, -0.0127282f, +0.0610676f, -0.1787288f,
  +0.1257689f, +0.0862707f, +0.3366070f, -0.0427874f, +0.0641199f, +0.1751290f, -0.2025345f, -0.0653902f,
  +0.0554410f, -0.1697404f, -0.2008334f, +0.1017438f, -0.2041495f, +0.0169907f, -0.1428528f, -0.0423655f,
  +0.0560773f, +0.1059237f, +0.0812393f, -0.0828496f, +0.1384162f, +0.0412285f, +0.1224462f, +0.2075678f,
  +0.1841007f, +0.2995032f, +0.3331336f, +0.0412065f, -0.0825499f, -0.3313968f, -0.0749087f, -0.1220481f,
  +0.1067479f, -0.2462289f, +0.3020654f, +0.2262265f, -0.2548296f, +0.1499222f, +0.3719394f, -0.1632812f,
  +0.3512822f, -0.0969903f, +0.0832318f, +0.1749273f, -0.1147932f, -0.1251468f, +0.0257903f, +0.0480056f,
  -0.2728531f, -0.0396253f, -0.0092133f, +0.0359932f, +0.0825385f, +0.0657338f, -0.1401167f, -0.2875154f,
  +0.2438289f, -0.0034059f, -0.1302390f, +0.0757646f, +0.1569683f, +0.2189333f, +0.0000499f, -0.1996358f,
  +0.1586176f, +0.0763841f, +0.2920396f, +0.1024267f, -0.0510387f, +0.1688407f, -0.3105021f, +0.1701504f,
  +0.0975798f, +0.2379125f, -0.0545542f, -0.1857878f, -0.1301929f, -0.0377292f, +0.0003661f, -0.2861543f,
  +0.0422217f, -0.3365773f, -0.5053050f, +0.0102978f, +0.2915798f, +0.2949892f, +0.1447619f, -0.1486496f,
  +0.0067803f, -0.0928504f, +0.1186860f, +0.1356996f, -0.0236887f, +0.0813533f, -0.1412583f, +0.1687426f
);

const float biases[4] = float[4](
  +0.0279985f, -0.0328257f, +0.0743906f, -0.0311942f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer9 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2283517f, -0.3326438f, +0.1389795f, +0.0870931f, -0.2287417f, +0.0293277f, -0.1175287f, -0.0409374f,
  +0.2147392f, +0.0268215f, +0.0485325f, +0.1344337f, -0.1488979f, +0.0407386f, -0.0523044f, +0.2236029f,
  +0.0597852f, -0.0607763f, -0.1012575f, +0.2893414f, -0.0693844f, +0.0104431f, -0.0252864f, -0.0054102f,
  +0.0870352f, -0.2539300f, +0.0466017f, -0.2177219f, -0.3637113f, -0.0218910f, -0.3570737f, -0.0454148f,
  -0.0195711f, +0.1522310f, -0.0280584f, +0.1034061f, -0.1410475f, -0.3439621f, -0.1568811f, +0.1682147f,
  -0.1976925f, -0.0671842f, -0.0467428f, +0.1039412f, -0.1922038f, -0.0650638f, +0.1666066f, +0.2561492f,
  -0.0490351f, +0.1297975f, +0.2796146f, -0.2307026f, -0.1571027f, -0.0299480f, +0.0144679f, -0.1802999f,
  -0.5114846f, +0.1281867f, -0.0224572f, -0.1072973f, -0.5209293f, -0.1797070f, +0.3570431f, -0.2747978f,
  -0.1521418f, -0.2319852f, +0.1223336f, -0.2183577f, -0.0517392f, +0.0059642f, +0.0099354f, +0.0343588f,
  -0.0368794f, -0.2921634f, +0.1702817f, -0.0630475f, +0.0989552f, +0.1251011f, -0.0118362f, -0.0845859f,
  -0.1246371f, -0.2030239f, +0.0003192f, -0.2189189f, +0.0708470f, +0.1289708f, -0.0487410f, -0.1182398f,
  -0.0149679f, +0.1611333f, -0.0072486f, +0.1066248f, +0.0574643f, -0.0976249f, -0.0897783f, -0.2550504f,
  +0.2435383f, +0.1142908f, -0.0820902f, -0.1294527f, +0.0384639f, -0.1026343f, -0.0241387f, -0.0301438f,
  +0.1111169f, -0.0018774f, -0.0795939f, -0.4153737f, +0.1695149f, -0.1129101f, +0.0808814f, -0.0958613f,
  -0.2310263f, -0.3423840f, +0.0991616f, +0.2097592f, +0.0123122f, -0.0421007f, -0.0778129f, -0.2188617f,
  +0.0853953f, +0.0741963f, -0.0413721f, -0.4383436f, -0.0034529f, +0.0114605f, +0.1691328f, +0.5647579f,
  +0.0304014f, -0.0559396f, -0.1621059f, +0.0372281f, -0.0897263f, -0.0613896f, -0.0873038f, -0.1560178f,
  -0.1354993f, +0.1334908f, -0.3158994f, -0.0477551f, -0.2939581f, -0.2063190f, +0.1244042f, -0.1748465f,
  -0.0322344f, -0.0191747f, +0.0031466f, +0.0716773f, -0.1084530f, +0.0306654f, +0.0633465f, +0.5756386f,
  +0.1603102f, +0.0173858f, -0.1058772f, -0.1977252f, -0.0194850f, +0.2072620f, +0.2402300f, +0.3777817f,
  -0.2350848f, +0.0967155f, -0.1363420f, +0.0402561f, +0.1314030f, -0.1149932f, +0.0705568f, +0.0944178f,
  -0.0247758f, +0.2704614f, +0.0607701f, +0.0307375f, -0.1897604f, +0.2400645f, -0.2841344f, +0.1510045f,
  +0.0457329f, -0.0456436f, -0.0446529f, -0.2109618f, -0.2020403f, +0.1779364f, +0.0608202f, +0.2235988f,
  +0.1677126f, +0.0378093f, -0.3083622f, +0.0630683f, +0.0004421f, -0.2264914f, +0.1737785f, -0.2890458f,
  -0.3376327f, -0.0477394f, +0.3400843f, +0.1143128f, +0.1346100f, -0.1647329f, -0.0920530f, +0.0018047f,
  +0.1520478f, -0.0245666f, +0.1755984f, +0.3219629f, +0.2859816f, -0.0944595f, +0.2120496f, +0.2553087f,
  -0.1161667f, +0.1065950f, +0.0248887f, -0.1601219f, -0.1002385f, -0.3327896f, +0.0630255f, -0.0498434f,
  +0.0638341f, +0.0828855f, +0.1983127f, +0.0653080f, +0.1178576f, +0.0409995f, -0.2695495f, +0.7028559f,
  +0.1965827f, +0.0750614f, -0.0592186f, +0.0000493f, +0.1080782f, +0.0494468f, +0.1046813f, +0.1052706f,
  +0.2744929f, +0.2547005f, +0.0476947f, +0.4466372f, +0.0954162f, -0.0066553f, +0.0053191f, +0.0097951f,
  -0.2307281f, +0.3952945f, +0.0599298f, +0.1904758f, -0.2138511f, -0.4332110f, -0.1172272f, +0.1542213f,
  +0.0453575f, +0.1561619f, +0.1811575f, +0.1525669f, -0.1132708f, +0.1423932f, -0.1901735f, +0.0020001f,
  -0.0570081f, +0.1017378f, +0.0008901f, -0.0848463f, -0.0479481f, -0.1414393f, -0.1291988f, -0.3617700f,
  +0.0417500f, -0.1650896f, -0.0049975f, -0.1093404f, +0.0991267f, +0.1221166f, -0.3273570f, -0.0351141f,
  +0.0794265f, +0.4264619f, +0.0729633f, -0.2689520f, +0.0703496f, +0.2625450f, -0.1890673f, -0.0243710f,
  +0.1573327f, +0.2048563f, +0.0228257f, -0.1750950f, +0.1855731f, +0.1095621f, -0.3641978f, -0.2219418f
);

const float biases[4] = float[4](
  -0.0647729f, +0.0197715f, -0.0607425f, +0.1760255f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer9 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0917545f, -0.1948179f, -0.1555390f, -0.0701191f, -0.0596308f, -0.0428621f, +0.1002530f, +0.1375513f,
  -0.1537942f, -0.2756040f, +0.2178542f, -0.2239109f, +0.2169408f, -0.1048346f, -0.1921964f, +0.1771852f,
  +0.2029670f, +0.0536826f, -0.0207714f, +0.0451707f, -0.1049773f, -0.0190722f, +0.1376736f, +0.2158970f,
  -0.3123648f, +0.0149364f, -0.2255365f, -0.3202411f, +0.1202129f, +0.0366233f, +0.3193537f, -0.0916099f,
  +0.1548931f, -0.3030751f, +0.3268643f, +0.3103649f, +0.0796361f, -0.0700800f, +0.0726147f, +0.0358995f,
  +0.1010525f, +0.1810665f, +0.2855407f, -0.0276246f, +0.0881194f, -0.0011471f, -0.1311101f, +0.2950817f,
  -0.1452794f, -0.0995296f, -0.2199802f, -0.3453345f, -0.0461718f, +0.1024494f, -0.4845444f, +0.5405706f,
  -0.1840978f, +0.2575225f, +0.2856752f, +0.3192122f, -0.5684884f, -0.0558098f, -0.2135600f, +0.1678769f,
  +0.1036617f, +0.0740154f, +0.2218706f, +0.0944548f, -0.0440480f, +0.1852568f, +0.3224158f, +0.0981305f,
  +0.0170587f, -0.1994649f, +0.0612560f, -0.0092768f, +0.1661988f, -0.2217033f, +0.0006826f, +0.3021690f,
  -0.0452780f, +0.1671071f, +0.0878554f, -0.2354360f, +0.0214775f, -0.2386303f, +0.1266403f, +0.0952782f,
  +0.2068087f, +0.0053385f, +0.1800419f, +0.0348906f, -0.0137062f, -0.2237884f, -0.1884049f, +0.1200241f,
  -0.1677081f, -0.1060378f, +0.0649789f, +0.0062072f, +0.0331796f, +0.1020674f, +0.0160321f, +0.0486840f,
  -0.0959646f, -0.0117441f, +0.3004484f, -0.0126066f, +0.1077062f, -0.1067271f, -0.1486107f, -0.0600169f,
  +0.0124804f, -0.0671256f, +0.1062734f, -0.1557929f, +0.1588697f, -0.2475753f, -0.1563145f, -0.4272860f,
  +0.1160543f, -0.1340912f, -0.0947687f, -0.0156683f, +0.1536403f, +0.1072328f, +0.0702584f, -0.2073451f,
  -0.1045515f, -0.0478837f, +0.0287963f, +0.0262118f, +0.1162269f, -0.0877368f, -0.2361132f, -0.3240089f,
  +0.0578520f, -0.0005978f, -0.0938373f, -0.0508718f, -0.0869082f, +0.0710981f, -0.0129495f, -0.1191525f,
  -0.1887951f, +0.1021870f, -0.0039134f, -0.0596259f, -0.0846592f, +0.0133322f, +0.1792944f, -0.0736799f,
  +0.0182462f, +0.0336376f, +0.1149074f, +0.0212336f, -0.1627112f, +0.2055834f, -0.0682953f, +0.4054477f,
  -0.2914301f, -0.2181014f, +0.0695334f, -0.0644245f, +0.1384899f, -0.0090339f, -0.0308134f, -0.1112470f,
  -0.1205390f, -0.1470328f, -0.2126913f, -0.0475983f, -0.1424948f, -0.0378497f, +0.2595451f, -0.0763384f,
  +0.2013056f, +0.2755515f, +0.1944472f, -0.0652013f, +0.0879798f, -0.2433890f, -0.1878581f, +0.1183464f,
  +0.0183134f, -0.2749099f, +0.2132025f, -0.1677189f, +0.2580302f, -0.2751229f, +0.0705121f, +0.0383918f,
  +0.0136653f, +0.3163686f, +0.2299243f, -0.0738048f, +0.2049050f, -0.2330237f, -0.0863675f, +0.0488826f,
  +0.4867501f, -0.2161542f, -0.2521582f, -0.0820718f, -0.0828672f, +0.0631826f, +0.2890336f, +0.2704002f,
  +0.0463476f, +0.0028416f, +0.0805685f, -0.1210212f, +0.1405576f, -0.0782590f, -0.0755785f, +0.0886466f,
  -0.0175741f, -0.1438664f, +0.4990383f, -0.2359820f, +0.1970169f, +0.0459649f, -0.1935832f, +0.0979839f,
  +0.1702294f, -0.2962933f, -0.2734079f, -0.2369716f, +0.4692123f, -0.1786552f, +0.2349064f, -0.3301656f,
  -0.1609752f, +0.1807713f, +0.2392613f, -0.0445485f, +0.1047384f, -0.1101695f, -0.2458089f, -0.1635938f,
  -0.0049404f, -0.4336869f, +0.1367582f, -0.0112895f, +0.1715046f, -0.2388001f, +0.1237678f, -0.1620452f,
  -0.2494537f, -0.2018816f, -0.4396665f, -0.3429198f, +0.4887722f, -0.2065730f, -0.0506861f, +0.1732924f,
  +0.0272031f, +0.0634347f, -0.3667116f, +0.1509241f, +0.3528520f, +0.2488237f, +0.0799620f, +0.2579445f,
  -0.1245340f, +0.0318327f, +0.0866155f, -0.0444628f, -0.0721533f, -0.1764602f, +0.1478659f, +0.2051397f,
  -0.1630254f, +0.2860997f, -0.0869561f, -0.0060329f, -0.0700873f, -0.0573449f, +0.2988818f, +0.0278072f,
  +0.1367258f, +0.2525562f, -0.0294309f, +0.1973038f, +0.2340635f, -0.1703401f, -0.1951855f, +0.0464152f
);

const float biases[4] = float[4](
  +0.0368123f, +0.0333141f, -0.1376771f, +0.0851205f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer10 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.3516534f, +0.0889395f, -0.0750691f, +0.0622850f, -0.0488191f, +0.1396915f, +0.0001774f, +0.0036416f,
  +0.5963334f, +0.0292893f, +0.1698868f, -0.0267994f, -0.1805967f, +0.0501269f, -0.0097265f, +0.3706039f,
  +0.1071716f, +0.1040985f, -0.1273068f, -0.1878488f, +0.1561493f, +0.2619570f, +0.0655639f, +0.0250651f,
  -0.1282650f, +0.1337623f, -0.1280635f, +0.2865951f, -0.1970001f, +0.0383791f, -0.2377510f, +0.1915097f,
  +0.1796986f, -0.3214696f, +0.1558807f, +0.1810489f, -0.1079826f, -0.2315159f, -0.0358583f, -0.1675369f,
  +0.3874273f, +0.2609514f, +0.1918760f, +0.0186095f, +0.0245826f, -0.1480488f, +0.1311657f, -0.1263438f,
  -0.0571142f, +0.0454110f, +0.1534449f, +0.0338279f, -0.1248408f, +0.0666029f, -0.1138872f, +0.0668621f,
  -0.0550024f, -0.0735153f, -0.1575161f, -0.1639661f, +0.2497519f, +0.0879166f, +0.4053318f, -0.3620561f,
  +0.0512260f, +0.0796898f, -0.0212102f, +0.2905532f, +0.0558497f, -0.0276714f, +0.0285554f, +0.0320052f,
  -0.1716380f, +0.3045767f, -0.1001029f, +0.0482379f, -0.0433855f, +0.0541560f, +0.0704683f, -0.1752972f,
  -0.3292993f, +0.2017087f, -0.1047415f, -0.1251814f, -0.0192905f, -0.0090880f, +0.0791985f, -0.0012546f,
  +0.0483658f, -0.0532363f, -0.0100784f, +0.0250957f, +0.0641312f, +0.1128298f, -0.0643455f, +0.1605115f,
  +0.0176534f, -0.3148808f, -0.2277033f, -0.1489043f, +0.0087374f, -0.0163131f, -0.2081072f, +0.2721411f,
  -0.1190428f, -0.0994047f, +0.0626819f, -0.1958971f, +0.1312137f, +0.1844173f, -0.0686011f, -0.1245431f,
  +0.0702790f, +0.1037544f, +0.2190184f, -0.0967739f, +0.0588371f, -0.1602060f, -0.0471722f, -0.0030821f,
  -0.1706499f, -0.0232256f, +0.1483958f, -0.1791805f, +0.3524305f, -0.1262040f, -0.0391373f, -0.1000323f,
  -0.1014070f, -0.0282519f, +0.3007561f, +0.0830245f, -0.0282384f, +0.3578282f, +0.1835393f, -0.3178637f,
  +0.0362850f, -0.0828344f, +0.1095405f, -0.4056903f, +0.0484482f, -0.1382668f, -0.1407745f, +0.1098833f,
  -0.1962119f, -0.0584569f, +0.1732380f, +0.1677365f, +0.2749999f, -0.0481549f, -0.1186946f, +0.3563036f,
  -0.3370808f, +0.3610205f, -0.1887109f, +0.1179160f, -0.2503646f, +0.2948832f, -0.0290879f, +0.2314185f,
  -0.1014478f, -0.2438455f, +0.1191367f, +0.0416976f, -0.3296301f, +0.1707988f, +0.1102858f, +0.0263570f,
  -0.1074525f, -0.0083600f, -0.1353368f, -0.2596557f, -0.0184853f, +0.1973371f, -0.2703252f, -0.2135528f,
  -0.1152911f, +0.1104114f, -0.0485947f, -0.0896945f, +0.0373802f, +0.0939724f, -0.3631511f, +0.0736890f,
  -0.2647464f, -0.1443931f, -0.1251923f, -0.0521504f, +0.1216978f, -0.0950287f, -0.0390477f, -0.1169437f,
  +0.1968136f, -0.2202409f, -0.2549209f, -0.5184323f, -0.1644813f, +0.2385708f, -0.1886510f, +0.1461559f,
  +0.1730057f, +0.1099202f, -0.3700165f, -0.0392928f, -0.2152138f, -0.1203000f, -0.0328793f, +0.0034711f,
  -0.2111783f, +0.0631894f, +0.1084379f, -0.1852495f, +0.0519141f, +0.1145094f, -0.1927543f, +0.0799144f,
  +0.0428629f, +0.1360516f, -0.5649356f, -0.0099359f, +0.1293347f, +0.2699798f, -0.0357027f, -0.0239689f,
  +0.0327393f, +0.2409706f, -0.2069181f, +0.3010519f, +0.1002102f, +0.3884840f, +0.0252425f, +0.4803132f,
  +0.2548309f, -0.1677252f, -0.2082452f, -0.1255009f, +0.0200210f, +0.3076571f, -0.0987791f, +0.2746397f,
  -0.0354380f, +0.2886523f, -0.1121999f, -0.0710178f, +0.2795961f, +0.1614047f, +0.2619924f, -0.0301978f,
  +0.1322152f, +0.0999684f, -0.0598080f, +0.0308109f, +0.1946037f, -0.2795008f, +0.0657469f, +0.2786471f,
  +0.1058259f, +0.0914458f, -0.1864680f, -0.1950351f, -0.0701937f, -0.2192519f, +0.3902103f, +0.1410058f,
  -0.0404396f, +0.0712092f, -0.0267406f, -0.1232159f, -0.0455815f, +0.0313482f, -0.0994762f, -0.0386360f,
  -0.1225109f, +0.1349430f, -0.2678950f, +0.2622282f, +0.2057548f, +0.1761392f, +0.0512619f, +0.4180480f,
  +0.0134599f, -0.1271197f, +0.0452589f, +0.1157777f, -0.1786064f, -0.0327362f, +0.1411739f, -0.0759959f
);

const float biases[4] = float[4](
  +0.0627764f, +0.0304463f, -0.0376672f, -0.0801184f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer10 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.4866596f, +0.0557753f, -0.0366090f, -0.1443131f, -0.1011776f, +0.0239711f, +0.0483777f, +0.4383640f,
  +0.5999609f, +0.1693272f, -0.0309576f, -0.3559807f, -0.1134456f, -0.0224315f, +0.0130003f, +0.1105362f,
  -0.1294897f, +0.0874341f, -0.2804107f, -0.0392283f, -0.0394373f, +0.1384980f, -0.0457501f, -0.0706431f,
  +0.0011290f, +0.0144253f, +0.0020889f, +0.1125858f, -0.2540129f, -0.0256621f, +0.1734997f, +0.4486073f,
  +0.3098862f, +0.1054594f, +0.0396634f, +0.1695088f, -0.0542990f, -0.0601315f, +0.0131454f, +0.2263423f,
  +0.1393424f, +0.1563983f, +0.0920974f, +0.0695984f, +0.0197498f, -0.0794906f, +0.1538228f, +0.0046357f,
  +0.0071497f, -0.2078905f, +0.2159764f, -0.0494003f, -0.3118173f, +0.1627208f, +0.0610560f, +0.0439996f,
  +0.2312472f, -0.1212215f, +0.0953536f, +0.0141699f, -0.1203891f, +0.1105436f, -0.0060250f, -0.0627675f,
  -0.1442499f, -0.0038633f, -0.1168613f, -0.0363977f, +0.0669733f, -0.0633814f, -0.0151719f, -0.3342394f,
  -0.1586805f, +0.4487682f, +0.1375988f, -0.0511586f, +0.1593452f, +0.0066140f, +0.1680246f, -0.1054773f,
  -0.1058238f, -0.2370186f, -0.0959163f, -0.3208485f, +0.0046714f, +0.2104478f, +0.0732239f, -0.1187111f,
  -0.1613550f, -0.1751223f, +0.1772829f, -0.2975507f, +0.0518363f, -0.2613019f, -0.2780121f, +0.1810635f,
  -0.0490067f, -0.1627662f, +0.0924466f, +0.0602152f, -0.1935537f, +0.3010098f, +0.1652960f, -0.2202671f,
  +0.2225567f, +0.0796997f, -0.0889693f, +0.1842784f, -0.3070929f, +0.0808408f, -0.3730747f, -0.0666269f,
  -0.0233424f, -0.3816224f, -0.1047826f, +0.1969210f, +0.0503059f, +0.0590494f, -0.0266512f, -0.2896010f,
  +0.0322475f, +0.1082702f, +0.2512479f, +0.2001736f, -0.2489753f, +0.2047390f, +0.1652407f, +0.0822273f,
  +0.2194356f, -0.1979713f, -0.2249603f, +0.1624197f, +0.0071688f, -0.0634387f, -0.1609816f, +0.1551279f,
  -0.0181858f, -0.0304864f, -0.2501872f, +0.2304136f, +0.1544674f, -0.0979163f, -0.1787611f, +0.1096646f,
  +0.1032136f, +0.0729280f, +0.1830567f, +0.2907055f, +0.0940738f, +0.0673124f, +0.1405798f, +0.0554505f,
  -0.1422716f, -0.0401361f, +0.0002087f, +0.0531074f, +0.0571124f, +0.1945443f, +0.0679008f, +0.0127854f,
  -0.0386164f, -0.1627748f, +0.2863986f, +0.0972802f, -0.1801855f, -0.0692593f, -0.0327777f, +0.1427356f,
  +0.0852125f, +0.0982448f, -0.0335113f, -0.1650568f, +0.0653836f, +0.1417869f, -0.2365184f, -0.1151124f,
  +0.2118912f, -0.1265280f, +0.3335360f, +0.2154956f, +0.1073935f, -0.0931961f, -0.1423723f, +0.0327213f,
  +0.0530839f, -0.0494414f, -0.0773824f, +0.2459841f, -0.0955187f, -0.0742415f, -0.0866679f, -0.1809095f,
  +0.1371330f, +0.1240862f, -0.0080069f, +0.0680270f, -0.2193742f, +0.2756601f, -0.0982563f, +0.2672201f,
  -0.0378541f, +0.1948892f, -0.4263764f, +0.1473455f, -0.0598002f, -0.0227543f, +0.0556076f, -0.0403926f,
  +0.1599131f, -0.0681316f, -0.1396647f, +0.1636381f, -0.3537836f, -0.1200237f, -0.0575732f, -0.1583345f,
  -0.2604890f, -0.2773721f, -0.3047886f, -0.0876883f, -0.0026073f, -0.1432446f, -0.0816285f, -0.3755264f,
  -0.1400035f, -0.0343609f, -0.1092163f, +0.1024187f, -0.3984773f, +0.1224114f, -0.2469756f, -0.1088945f,
  +0.3846384f, +0.1224157f, +0.0661426f, +0.0878814f, -0.0309332f, +0.1192164f, +0.0572240f, +0.0249304f,
  -0.0552057f, -0.0255890f, +0.5549873f, +0.0361780f, +0.0491873f, +0.1466474f, +0.0792610f, -0.3256202f,
  +0.2458316f, +0.0801534f, -0.3934750f, -0.2615983f, +0.2105903f, -0.2486422f, +0.0511536f, +0.1006206f,
  +0.1777417f, +0.2245764f, +0.1544219f, -0.0960216f, -0.0113538f, -0.0774832f, -0.0213553f, -0.2203221f,
  -0.1629842f, -0.3564293f, -0.0833740f, -0.1064872f, -0.1708919f, +0.1262336f, -0.0547519f, -0.0251286f,
  -0.0863128f, -0.0046298f, -0.0034280f, +0.1940233f, +0.1175424f, +0.2161370f, -0.1515567f, +0.2864146f,
  +0.1139646f, +0.2481651f, +0.3206323f, -0.3691474f, +0.0024450f, -0.3193139f, +0.1255077f, +0.0350040f
);

const float biases[4] = float[4](
  +0.0049780f, -0.0182363f, +0.0906753f, -0.0133694f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer11 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0526155f, -0.1799227f, +0.0538567f, +0.2277939f, -0.1798918f, -0.1210362f, +0.0246489f, -0.3579030f,
  +0.0287564f, -0.0238291f, -0.1268639f, +0.0705818f, +0.0863167f, +0.0123064f, +0.1522109f, +0.0308859f,
  +0.0762816f, +0.2322263f, -0.0563341f, -0.0710925f, +0.0761325f, -0.0831622f, -0.0147409f, -0.2732422f,
  +0.2393874f, +0.2104488f, -0.4842123f, -0.1103643f, -0.0005575f, -0.2012976f, -0.0126801f, -0.0715831f,
  -0.0742280f, +0.1498866f, -0.2037494f, -0.2505960f, +0.3089845f, +0.1333908f, +0.0480971f, +0.2093558f,
  +0.1100581f, -0.0895993f, +0.1959667f, +0.1570637f, +0.4281483f, +0.1309207f, -0.2112319f, +0.2669367f,
  -0.1093856f, +0.1736158f, +0.1244520f, +0.0233479f, -0.0502600f, +0.0197175f, -0.1135401f, +0.1564405f,
  +0.0355795f, -0.0536901f, +0.1565600f, -0.5129024f, +0.1278529f, +0.0516917f, -0.1233623f, +0.2519702f,
  -0.1244506f, -0.2886974f, +0.0083617f, -0.2512498f, +0.1525596f, -0.0700507f, +0.1454916f, -0.1282977f,
  +0.4941769f, +0.0667192f, -0.0372001f, +0.3513587f, -0.0819669f, +0.0968290f, -0.1128273f, +0.2424974f,
  -0.0668076f, +0.1859983f, -0.2209779f, +0.0292170f, +0.0496287f, -0.2486901f, +0.0273824f, +0.3769258f,
  -0.0871052f, -0.1308758f, -0.1472820f, +0.0425202f, +0.3365360f, -0.0618640f, -0.1585454f, +0.1630395f,
  +0.1929041f, +0.1916743f, -0.1373018f, -0.1490075f, -0.0816536f, +0.0158373f, -0.0427946f, +0.3913214f,
  +0.1312945f, +0.1457397f, +0.1895998f, -0.1279407f, -0.1319172f, -0.1896494f, +0.2552459f, +0.0167607f,
  -0.1224332f, -0.1139509f, -0.1456061f, +0.2884952f, -0.0149028f, +0.0381295f, -0.1474356f, -0.0505462f,
  +0.0198278f, +0.1459356f, +0.0156060f, -0.0336848f, +0.1040684f, -0.0653253f, -0.4296264f, +0.1018369f,
  -0.0180804f, -0.3419067f, +0.4306147f, +0.1471038f, -0.2605802f, +0.1347716f, +0.4281931f, -0.3362679f,
  +0.0333796f, -0.3044851f, +0.0382776f, +0.0356528f, -0.0658708f, -0.2437672f, +0.0170901f, +0.1963637f,
  -0.1052322f, -0.2890612f, -0.1378846f, -0.1599435f, -0.0874128f, -0.2501139f, -0.1122546f, +0.1237371f,
  -0.0492897f, -0.0766568f, -0.0875152f, +0.1835776f, -0.3081048f, -0.0558937f, -0.1991881f, +0.3269236f,
  +0.0650669f, +0.3899052f, +0.0783397f, -0.0266934f, -0.2948900f, +0.2148796f, -0.0370092f, -0.3090134f,
  -0.0779658f, +0.1592170f, -0.0788343f, -0.1526473f, +0.1733243f, +0.1501569f, +0.1381256f, +0.2470100f,
  -0.1111216f, -0.1344081f, +0.1255390f, +0.4063710f, +0.1151322f, +0.0765951f, +0.1231381f, +0.2512187f,
  +0.1067984f, +0.0760474f, -0.3962919f, +0.3687273f, +0.0482393f, -0.1076550f, +0.3403563f, -0.1508054f,
  -0.0455848f, +0.1366414f, -0.1747888f, +0.0443554f, -0.2643477f, +0.0737369f, -0.0245485f, +0.0211763f,
  +0.0167502f, +0.1014934f, -0.2926674f, +0.4567694f, -0.1631315f, -0.0546756f, +0.3162662f, -0.0171493f,
  +0.0758828f, -0.1347962f, -0.2277370f, +0.2723892f, -0.1519585f, +0.0200389f, -0.0655243f, +0.0177777f,
  -0.0116157f, +0.0144448f, -0.1902978f, +0.1536681f, -0.0999376f, -0.0238507f, +0.0896906f, +0.1354488f,
  -0.1160856f, -0.0994037f, -0.1800133f, +0.2544640f, -0.3837163f, -0.2188947f, -0.0475746f, -0.1141506f,
  +0.0991518f, +0.1070411f, +0.2775057f, +0.1773849f, -0.2171191f, +0.0179748f, -0.1648905f, -0.1174582f,
  -0.0601056f, -0.2901739f, -0.1270917f, +0.2928281f, -0.2342353f, +0.2503001f, +0.0953120f, -0.3791107f,
  +0.0489801f, -0.0212484f, +0.0548729f, -0.0724935f, -0.1153693f, +0.0873298f, +0.1879132f, +0.0853112f,
  +0.0936943f, -0.0929603f, +0.3008280f, -0.2188020f, +0.0758744f, +0.0162115f, -0.3446154f, +0.0354921f,
  +0.0134379f, +0.0769263f, -0.4594730f, -0.0307788f, +0.2351209f, +0.2320976f, +0.0896575f, -0.0931469f,
  +0.0362961f, +0.2144904f, +0.0895568f, +0.3103764f, -0.3789914f, +0.1291108f, +0.1884890f, +0.3239536f,
  -0.1210480f, +0.1148896f, +0.5067933f, -0.2541218f, +0.2403436f, +0.2684530f, -0.0631318f, -0.1572425f
);

const float biases[4] = float[4](
  +0.0191338f, -0.0330266f, -0.0697284f, -0.0308474f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer11 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0531110f, -0.1643783f, -0.0736813f, -0.2421366f, +0.2767991f, +0.1720786f, +0.1865720f, +0.2865781f,
  -0.1401926f, -0.0811261f, -0.0955487f, +0.0477319f, +0.5955501f, +0.2024622f, +0.1039129f, +0.4154670f,
  -0.1827549f, +0.0982815f, -0.0117016f, +0.0397072f, +0.2039352f, -0.1124400f, +0.0202024f, +0.1138065f,
  -0.0328291f, +0.2000569f, -0.4564869f, +0.3480878f, -0.0267664f, -0.1886216f, -0.2754446f, -0.0156616f,
  -0.0179447f, +0.3364529f, -0.4486914f, +0.4276631f, +0.4557317f, +0.1375033f, +0.0211210f, +0.2226482f,
  +0.1250414f, -0.0331658f, +0.1821887f, +0.0536413f, +0.3897519f, -0.1150941f, -0.2362767f, +0.0900081f,
  +0.1446887f, +0.3823110f, +0.4745250f, -0.1891450f, +0.1732796f, -0.1303165f, +0.0910581f, -0.3642605f,
  +0.4151079f, +0.2373720f, -0.0432085f, -0.0758147f, -0.2271460f, -0.0552722f, +0.0851010f, -0.2210198f,
  +0.1313401f, -0.0479562f, +0.0616570f, -0.1144863f, +0.1129394f, +0.1545441f, -0.2239078f, -0.2524854f,
  +0.0429448f, +0.0865041f, +0.0188364f, +0.0571092f, +0.1761206f, -0.1981399f, +0.2403317f, +0.2208466f,
  -0.3021376f, -0.1124856f, +0.1521444f, -0.0576189f, +0.1264303f, +0.2340868f, +0.0569032f, -0.3103353f,
  -0.2312839f, -0.0262146f, +0.1189991f, +0.0198629f, -0.4411351f, +0.3742799f, +0.1392647f, +0.1823088f,
  +0.2815811f, +0.1164285f, -0.1392426f, -0.1274535f, +0.1526266f, -0.1310585f, +0.1468596f, -0.0996295f,
  -0.2153977f, -0.3288873f, -0.1292540f, +0.1385200f, -0.0204852f, +0.0056886f, -0.1425689f, -0.1956052f,
  -0.0577269f, -0.0306306f, -0.3257577f, -0.0697799f, +0.0774821f, -0.0246866f, -0.0070849f, +0.0222943f,
  +0.1978520f, -0.0894546f, -0.0338383f, -0.0314983f, +0.2175278f, +0.2461583f, -0.0002111f, +0.1667977f,
  -0.0996178f, -0.1942191f, -0.1420024f, -0.1655913f, +0.1194140f, +0.1955685f, +0.0826627f, -0.0238527f,
  -0.0386753f, +0.0949065f, +0.0019075f, +0.3977994f, -0.0138028f, +0.0451427f, +0.1163699f, -0.0026510f,
  +0.1745844f, +0.1957979f, -0.0144468f, +0.1397171f, +0.1385939f, +0.0724056f, -0.0345087f, +0.2610863f,
  +0.3007848f, +0.0839603f, -0.2018415f, +0.2686942f, +0.3808767f, -0.5546938f, -0.1471739f, -0.0900895f,
  +0.1129454f, +0.0998694f, +0.1569363f, +0.1071519f, +0.2482586f, +0.1439323f, -0.2015165f, -0.3795767f,
  +0.2650580f, +0.0751557f, +0.4114171f, +0.2264255f, +0.4675615f, -0.2511310f, +0.0894386f, +0.5245566f,
  -0.1092182f, -0.1601480f, +0.2145457f, +0.3228484f, +0.0154284f, -0.3714835f, -0.1050569f, +0.1639160f,
  +0.1788097f, +0.0605249f, -0.0136216f, +0.1235166f, -0.0007957f, -0.1527312f, -0.1340795f, +0.2620157f,
  -0.1065740f, -0.0176612f, -0.1969441f, -0.0777502f, -0.3024883f, -0.1128833f, -0.0732866f, -0.0315449f,
  -0.0606343f, -0.3625139f, +0.0797677f, +0.1627454f, +0.1191028f, -0.0997231f, +0.1018690f, -0.3155697f,
  +0.1397548f, +0.0651825f, -0.0817854f, +0.1244340f, -0.0908989f, -0.2840561f, -0.0765565f, +0.0105886f,
  +0.0043712f, +0.2376515f, -0.2032083f, +0.3343151f, -0.0257285f, +0.0535642f, -0.1692606f, -0.0711813f,
  +0.1362578f, +0.0998259f, -0.2791805f, -0.1024883f, +0.2381982f, -0.1543580f, -0.3090690f, +0.3409923f,
  +0.1837671f, +0.2151685f, -0.1843558f, -0.0624587f, +0.1278399f, +0.0110697f, -0.1967366f, +0.0106791f,
  +0.0300366f, +0.2837060f, -0.0906154f, -0.1503832f, -0.0144794f, -0.1915559f, +0.0407957f, +0.2409687f,
  +0.0250736f, +0.3741833f, -0.0145995f, -0.0081470f, -0.3452917f, -0.0268182f, +0.0687010f, +0.1945465f,
  +0.0988606f, -0.0376329f, -0.0323667f, +0.3260981f, -0.0542059f, -0.0135109f, +0.0346338f, +0.1389142f,
  -0.1490434f, +0.0494546f, +0.0407528f, +0.1006043f, +0.0980332f, +0.0752085f, +0.0621565f, +0.1313192f,
  -0.2872272f, -0.1220924f, +0.2818033f, -0.1982570f, +0.0429771f, -0.0477269f, +0.1337624f, +0.0012615f,
  +0.1211218f, -0.1013900f, +0.0463254f, -0.0106436f, +0.0139983f, -0.0612858f, +0.1195147f, +0.0932216f
);

const float biases[4] = float[4](
  +0.0723375f, +0.0124842f, -0.0646192f, -0.0538115f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer12 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1252524f, +0.1111310f, -0.1659634f, +0.0799644f, -0.1298925f, -0.1474779f, -0.0605598f, -0.1589648f,
  +0.2195588f, +0.0592199f, +0.1587183f, +0.0053360f, -0.1142564f, +0.2808655f, +0.0461177f, +0.0317443f,
  -0.0636653f, -0.0738764f, +0.1706301f, -0.2108172f, -0.0825265f, -0.2558397f, +0.2216191f, +0.0283939f,
  -0.0766212f, +0.0985339f, +0.0583795f, -0.0332874f, -0.1628290f, -0.0952036f, +0.3343950f, -0.3030720f,
  -0.3517336f, +0.0293753f, +0.3701660f, -0.1191994f, -0.0374794f, -0.1664800f, -0.0404028f, +0.2605013f,
  +0.2083053f, +0.0884637f, -0.0198494f, -0.2684695f, -0.0981145f, -0.1311327f, -0.1608158f, -0.2865934f,
  -0.1131376f, -0.1401488f, +0.5939916f, -0.2727370f, -0.0454917f, +0.0209688f, +0.1073530f, -0.1330649f,
  -0.1066577f, -0.1827520f, +0.2758700f, +0.0282617f, +0.0320612f, -0.5364765f, -0.1880692f, -0.0042502f,
  +0.1923873f, -0.0838233f, -0.2724864f, -0.0821742f, +0.1047470f, +0.0435058f, -0.2483787f, +0.0862091f,
  -0.0256060f, +0.0096411f, -0.0032300f, -0.1148683f, -0.0286336f, -0.0560871f, -0.0021789f, -0.0074189f,
  +0.3273268f, -0.0022919f, -0.3578505f, +0.1668636f, +0.1037128f, +0.1515965f, -0.0547405f, +0.0218326f,
  +0.3742099f, +0.2128411f, +0.1596019f, -0.1498169f, +0.2370027f, -0.0289196f, -0.2467864f, +0.1123146f,
  +0.1686901f, -0.0320271f, -0.0621444f, +0.2885654f, +0.0604025f, +0.0019247f, -0.0863150f, -0.2504692f,
  +0.0671107f, -0.0651175f, +0.0925457f, +0.3081758f, +0.2737221f, -0.0654398f, -0.1838353f, -0.2748412f,
  +0.0592734f, -0.0123704f, +0.0448126f, +0.2196976f, -0.1637278f, +0.1739034f, -0.2695011f, +0.0449989f,
  +0.1398829f, +0.0646915f, -0.1229040f, +0.0386280f, -0.0565766f, -0.3748825f, +0.0091205f, -0.2310426f,
  +0.3108581f, +0.2617831f, -0.1318733f, +0.2370067f, +0.2516145f, -0.0966065f, -0.3138887f, -0.2279979f,
  -0.0951346f, +0.1569582f, +0.0079157f, +0.2220076f, +0.1842888f, +0.2329763f, +0.0437425f, -0.4216520f,
  -0.0292123f, +0.2338890f, +0.1036703f, -0.3936469f, -0.0096183f, -0.0924231f, -0.0158456f, -0.1547842f,
  +0.1496008f, -0.2871337f, +0.0169007f, -0.0923153f, +0.0051083f, -0.1430631f, -0.1250851f, -0.0830296f,
  +0.1967188f, +0.1563180f, +0.1764535f, +0.0082815f, +0.0723115f, -0.1220279f, -0.0433181f, +0.0337440f,
  +0.0516700f, +0.3996460f, -0.1982341f, -0.2590844f, +0.1416927f, +0.0141629f, -0.2433911f, +0.0350027f,
  +0.0851269f, -0.3801129f, +0.1750934f, -0.1264286f, +0.0493956f, +0.2483717f, -0.2435854f, +0.0152128f,
  -0.0450487f, -0.0043490f, +0.1240923f, +0.3290103f, +0.4501237f, +0.1421051f, -0.0719958f, -0.0559914f,
  +0.3259148f, +0.0224364f, -0.2069046f, -0.2245005f, +0.0545490f, -0.0067953f, -0.2381486f, +0.1619644f,
  +0.1779922f, +0.1849197f, -0.2471836f, +0.0117158f, -0.0219371f, +0.1587559f, -0.1100234f, -0.0387921f,
  +0.1797741f, +0.1364207f, +0.0210098f, +0.0216441f, -0.1256541f, +0.2078293f, -0.0397127f, +0.0405610f,
  +0.1883756f, +0.1410056f, -0.0678744f, -0.0466346f, -0.1167704f, -0.3209358f, -0.1141333f, -0.2103020f,
  -0.2796214f, -0.3980440f, -0.2605859f, +0.0915504f, +0.1905663f, +0.1448323f, -0.3184127f, -0.0589749f,
  +0.3057625f, +0.0209065f, -0.0765463f, -0.1363541f, +0.2651580f, -0.2356146f, -0.3089812f, +0.1368819f,
  -0.2230658f, -0.1145331f, +0.0466427f, -0.1453470f, -0.0349259f, -0.1983707f, -0.3557202f, -0.2754795f,
  -0.1644739f, +0.4245951f, -0.2885373f, -0.0520491f, +0.1811972f, -0.1297175f, -0.5345312f, -0.3387200f,
  -0.1652413f, +0.1503556f, +0.0966394f, -0.0989255f, +0.0318267f, -0.1807429f, -0.4319554f, -0.0375402f,
  -0.0796302f, -0.0625020f, +0.0811375f, -0.1366655f, -0.1968535f, -0.2138757f, +0.1653820f, -0.0979305f,
  -0.2678874f, -0.2217613f, -0.3213517f, -0.3963589f, -0.1830015f, -0.1076505f, -0.1877453f, -0.1356511f,
  -0.0730907f, -0.1344560f, +0.0787465f, -0.0491986f, -0.1217221f, -0.2684306f, -0.0605421f, -0.0296359f
);

const float biases[4] = float[4](
  +0.0616544f, +0.0086486f, -0.0242697f, -0.0035523f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer12 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0965930f, -0.0274728f, +0.0662504f, -0.2221250f, -0.1799576f, -0.1395154f, -0.1218668f, +0.3058335f,
  -0.0898498f, +0.2319242f, +0.0414808f, +0.0190651f, -0.1822996f, -0.0477093f, +0.0455302f, +0.3339348f,
  +0.0249193f, +0.1239211f, -0.0222971f, -0.2151274f, -0.2440737f, +0.1466093f, +0.0239017f, +0.0015681f,
  -0.3919202f, -0.1446418f, -0.0544892f, -0.2507132f, +0.0758169f, -0.2610420f, -0.1489450f, +0.1023287f,
  -0.0266966f, +0.2846831f, -0.0723853f, -0.2713974f, -0.0688421f, +0.0658922f, -0.1241099f, +0.1420420f,
  +0.0096712f, -0.1429724f, -0.5926306f, -0.0337622f, +0.0549347f, +0.1118833f, -0.1835375f, +0.1565162f,
  -0.0864771f, +0.0402273f, +0.2379974f, -0.1383888f, +0.1931353f, -0.6767475f, +0.0737160f, -0.1448614f,
  +0.1525260f, -0.0114162f, +0.0506332f, +0.0540507f, +0.1286501f, -0.0884001f, -0.2901948f, -0.1241991f,
  +0.1181913f, +0.0094773f, +0.1830299f, -0.1613104f, -0.1581727f, +0.1945456f, -0.0731808f, -0.0066134f,
  +0.1507092f, +0.1372609f, -0.0495821f, +0.1118798f, -0.0688046f, +0.0139565f, -0.1059827f, +0.0484093f,
  -0.1619476f, -0.4031364f, -0.1688697f, -0.3255064f, +0.0076552f, +0.0935171f, -0.0516217f, -0.1409311f,
  +0.2458407f, -0.2083927f, -0.1546689f, -0.1512873f, -0.0908233f, -0.1360258f, -0.1297264f, +0.0518702f,
  +0.0056868f, +0.1386235f, -0.2818224f, -0.2061685f, -0.1562746f, -0.1544625f, +0.0945975f, +0.2122974f,
  +0.0297079f, +0.4187041f, +0.2299107f, +0.0702378f, +0.0116329f, +0.1016796f, +0.4343896f, +0.2934801f,
  +0.0416122f, -0.0177699f, -0.1309112f, -0.1483088f, +0.1796528f, +0.0141419f, -0.1851670f, -0.2178048f,
  +0.1096914f, +0.0274416f, -0.0868972f, -0.0485969f, -0.0530074f, -0.1660582f, +0.0800228f, +0.1476296f,
  +0.0291276f, +0.2582978f, +0.0038713f, -0.0227793f, -0.5093143f, +0.1003088f, +0.2943124f, -0.3030531f,
  +0.2129730f, -0.1658297f, +0.1289007f, -0.0914674f, -0.2207933f, -0.0984486f, +0.1374957f, -0.0940433f,
  +0.0179133f, +0.0472513f, +0.0849991f, -0.1134789f, -0.1505297f, +0.1523905f, -0.1888337f, -0.0392544f,
  -0.4070897f, +0.0818866f, +0.2073787f, -0.1615133f, -0.1090768f, +0.0648473f, +0.2879754f, +0.1167183f,
  +0.1343875f, -0.0207769f, -0.0971919f, +0.0019869f, -0.1433455f, -0.2214424f, +0.0107142f, -0.1492599f,
  -0.1979081f, -0.1450785f, +0.0619629f, -0.0748458f, -0.0566552f, +0.2996218f, +0.0500616f, +0.3819320f,
  -0.2169837f, -0.0360775f, +0.0260338f, -0.2041921f, -0.0689939f, +0.0321822f, +0.2255012f, +0.2749316f,
  -0.0100480f, -0.3603595f, +0.3260555f, -0.2053788f, +0.0312254f, -0.2427593f, +0.0265099f, +0.2234922f,
  +0.0876580f, -0.0413368f, -0.0232946f, -0.1836568f, -0.2599997f, -0.0039672f, +0.0233865f, +0.0451107f,
  +0.0355665f, -0.0263420f, +0.1209382f, -0.1241307f, -0.0944504f, -0.2129172f, +0.0854993f, +0.0057791f,
  +0.1667037f, +0.1114542f, -0.0677243f, +0.1138260f, -0.0917340f, -0.0833662f, +0.1281055f, +0.0472237f,
  -0.1116597f, -0.2518958f, -0.0570903f, +0.1120761f, -0.0333684f, +0.0649363f, +0.1345462f, +0.0874751f,
  +0.0800844f, -0.3491792f, +0.0010987f, -0.0804687f, +0.5385695f, -0.2726494f, +0.0760850f, +0.0686971f,
  -0.0241768f, -0.2351824f, -0.0191768f, -0.1602568f, +0.3549592f, -0.2290364f, +0.1136669f, -0.0223659f,
  +0.1392230f, -0.0284304f, +0.1636307f, -0.0952463f, -0.1255089f, +0.1544310f, -0.0100678f, -0.0383185f,
  +0.2341376f, +0.1391140f, -0.2243992f, -0.0725223f, +0.2760977f, -0.0482081f, -0.2036260f, -0.5661123f,
  -0.1995671f, -0.4144464f, -0.1410759f, -0.1284616f, +0.0078884f, +0.0957844f, -0.0872098f, -0.0431217f,
  +0.0161816f, +0.0681331f, -0.1785480f, +0.1476649f, +0.0866998f, -0.4489097f, +0.0613000f, +0.2166208f,
  -0.0792551f, -0.1086473f, -0.5291839f, +0.0277566f, +0.0093076f, -0.0916217f, -0.2739697f, -0.1276705f,
  +0.1296771f, -0.2996774f, -0.3526209f, -0.0977536f, +0.1040901f, -0.3497618f, +0.1336557f, -0.1488229f
);

const float biases[4] = float[4](
  -0.0087881f, -0.0246512f, +0.0803277f, +0.0159961f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer13 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3464212f, -0.2120982f, -0.0032527f, -0.2850182f, +0.2619557f, +0.0517532f, +0.1033786f, +0.3338830f,
  -0.0871558f, -0.2346976f, -0.2815174f, +0.0705753f, -0.0847764f, -0.0908661f, +0.0654590f, +0.0081598f,
  +0.0572310f, -0.0572384f, +0.0788921f, +0.0356892f, -0.1818318f, -0.0475749f, +0.0158260f, +0.1221666f,
  -0.1885576f, -0.2041271f, -0.0975644f, +0.0796611f, -0.0697603f, +0.1274543f, +0.1761657f, +0.2450625f,
  +0.1370124f, -0.1815677f, -0.0721339f, -0.5143331f, -0.0426191f, +0.4539849f, +0.1000319f, +0.2540583f,
  -0.1458793f, +0.2659457f, +0.0371785f, +0.1758406f, +0.2918185f, -0.1097355f, +0.0100630f, +0.1786473f,
  +0.1390273f, +0.1830483f, -0.1766126f, +0.1021084f, +0.0194466f, +0.0376254f, -0.0525578f, -0.0548462f,
  +0.1905947f, -0.1795087f, +0.1322608f, -0.1848223f, -0.0963268f, -0.0088527f, -0.1409669f, +0.1706059f,
  -0.2470126f, +0.0880801f, +0.2289922f, -0.0746148f, +0.2737249f, +0.2251232f, +0.0015015f, -0.3313761f,
  -0.0939825f, -0.2611127f, -0.1077429f, -0.1162307f, +0.0668557f, +0.4971246f, +0.1177665f, -0.0604241f,
  +0.0235538f, -0.0011482f, -0.1136371f, -0.2127090f, -0.3582639f, +0.0276246f, -0.1837329f, +0.0847960f,
  +0.2107967f, -0.1881819f, -0.2607109f, +0.1895629f, +0.0707434f, +0.1424685f, -0.1515875f, -0.0675302f,
  +0.1174060f, +0.2184901f, +0.0382253f, +0.1195710f, +0.1458164f, +0.1073448f, +0.3616900f, +0.3359758f,
  -0.0558508f, -0.0261281f, +0.1015999f, +0.1314224f, +0.0218641f, +0.0708997f, -0.1352097f, -0.0946061f,
  -0.0329206f, -0.0033245f, +0.1706961f, +0.0191523f, +0.3803707f, +0.0545193f, +0.2126082f, -0.1015848f,
  +0.0146068f, +0.1038636f, +0.0404497f, +0.3318420f, -0.0138183f, +0.3522217f, -0.1098669f, +0.1496290f,
  +0.0563630f, -0.0131172f, -0.1910525f, -0.0778818f, -0.0266532f, -0.0402365f, +0.0379865f, +0.0431209f,
  -0.0872265f, -0.0284904f, -0.1458443f, +0.0781699f, -0.1584466f, +0.0626898f, +0.0803516f, +0.1985776f,
  -0.1405578f, -0.1679723f, +0.1233271f, -0.2170290f, -0.0976956f, -0.0537325f, -0.0645251f, -0.0533572f,
  -0.0548047f, -0.1398187f, +0.1518449f, +0.1361400f, -0.2045269f, +0.3503057f, +0.0761937f, -0.3392738f,
  -0.1200904f, -0.0658212f, -0.0667593f, -0.0966384f, -0.1718463f, +0.0134989f, +0.1802426f, +0.2191494f,
  -0.0285361f, -0.5248320f, +0.0950122f, -0.1698056f, +0.1275438f, -0.0833452f, +0.0708663f, -0.5394009f,
  -0.0144962f, -0.3965039f, -0.1528877f, +0.2803611f, +0.1154032f, -0.0612539f, +0.2564718f, -0.4055916f,
  -0.1534230f, +0.1490411f, -0.0880342f, +0.0604569f, +0.0485326f, -0.2026027f, -0.1097365f, +0.0187744f,
  +0.1767127f, +0.1255442f, -0.2430243f, -0.2689513f, +0.0321855f, +0.0921968f, +0.2393939f, -0.4716333f,
  +0.1997874f, +0.1760309f, -0.4153205f, -0.1533557f, +0.2329556f, +0.1359763f, +0.0049922f, -0.3346164f,
  -0.1780120f, -0.0489710f, -0.2140045f, +0.0252015f, +0.2368724f, +0.0291475f, -0.0433144f, -0.1823738f,
  +0.2133621f, +0.0647121f, -0.1439372f, +0.2491122f, -0.3647766f, -0.2307733f, -0.1904115f, +0.0976951f,
  -0.0239862f, -0.0475682f, -0.2621969f, +0.1130048f, -0.2738732f, -0.0916693f, +0.0552538f, -0.0071565f,
  +0.0160509f, +0.0801173f, -0.0869832f, -0.0083243f, +0.1377069f, -0.1484870f, -0.1504932f, -0.1792760f,
  +0.0793567f, +0.0765702f, +0.3712970f, -0.0262246f, -0.5815735f, -0.1965947f, -0.0763996f, -0.2064631f,
  +0.0938200f, +0.0955226f, +0.2015732f, +0.1384223f, -0.6665375f, +0.0056887f, +0.1134827f, +0.1833491f,
  +0.0764058f, -0.2109219f, -0.3186280f, -0.1421477f, -0.1849532f, -0.1112785f, -0.0282328f, -0.1070714f,
  -0.3218549f, -0.2066121f, -0.0731555f, -0.3264906f, +0.1139586f, -0.0287255f, -0.1873428f, -0.0649750f,
  +0.0700293f, +0.0049383f, +0.3945552f, -0.1142470f, -0.6555911f, +0.1268857f, +0.0637547f, +0.3838605f,
  -0.1007306f, -0.0746801f, +0.1621002f, +0.1641743f, -0.2690778f, -0.1668793f, -0.0693592f, +0.2965327f
);

const float biases[4] = float[4](
  +0.0869937f, +0.0710282f, +0.0085033f, -0.0632598f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer13 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0282625f, +0.2849429f, -0.0030019f, -0.1005719f, -0.1858196f, -0.1662140f, +0.1967353f, +0.2895505f,
  +0.0537147f, +0.3184944f, +0.0079212f, +0.5281720f, -0.1768404f, +0.0423594f, +0.0404433f, -0.0195767f,
  +0.0517361f, -0.2019705f, -0.2375893f, -0.0883702f, -0.0476060f, +0.1258149f, +0.0329495f, +0.0388661f,
  -0.0242353f, +0.0535653f, -0.3217177f, +0.1077823f, -0.2526227f, +0.4298313f, -0.1442906f, -0.0362030f,
  -0.1679408f, -0.0648342f, +0.1353169f, +0.0871327f, -0.1165987f, -0.1424470f, +0.1219577f, +0.0504391f,
  -0.1297409f, +0.1909685f, -0.1609194f, +0.2434955f, -0.3539323f, -0.1795134f, +0.0280515f, +0.1141449f,
  +0.0373811f, -0.0926291f, -0.0389365f, -0.0525744f, +0.1713424f, -0.0301330f, +0.0481324f, -0.1102926f,
  -0.2573162f, -0.0436975f, +0.0002410f, +0.1553387f, +0.1593155f, -0.0441575f, +0.2256703f, -0.2626702f,
  -0.0932929f, +0.2123183f, +0.0242878f, +0.2568069f, -0.1085032f, -0.1439947f, +0.1496462f, +0.0529408f,
  +0.0653997f, -0.0689314f, +0.1514062f, -0.1609089f, -0.1566972f, -0.1407974f, -0.1471465f, -0.0974712f,
  +0.0443323f, +0.0150132f, +0.1719270f, -0.1883535f, -0.3320349f, -0.1540762f, +0.1284139f, +0.2107810f,
  +0.2718064f, +0.0823556f, +0.3396989f, -0.1503686f, +0.0341659f, +0.2834799f, -0.1325254f, -0.2593039f,
  -0.1962082f, +0.1084234f, -0.2159737f, +0.0128263f, -0.0394798f, +0.0482525f, -0.0104569f, +0.0640762f,
  -0.0202038f, -0.1130725f, +0.1453834f, +0.3503652f, +0.2192217f, -0.1161321f, -0.2248365f, +0.1813417f,
  -0.0177883f, +0.0586912f, -0.1117198f, -0.2638403f, +0.2241836f, -0.3586202f, -0.1545278f, -0.1404985f,
  -0.2033604f, -0.1904933f, -0.2021222f, -0.0810641f, +0.1173755f, -0.1017484f, +0.1761874f, -0.0854358f,
  +0.1576896f, +0.2271120f, +0.1751766f, +0.0792044f, -0.0367002f, +0.3929871f, +0.1309087f, +0.0959270f,
  +0.0488903f, -0.2662101f, +0.2486713f, -0.1763926f, -0.2100278f, -0.0658776f, +0.0893088f, +0.2365740f,
  -0.0354902f, -0.0105114f, +0.4622690f, +0.0024969f, -0.1975773f, -0.0192345f, -0.1977380f, -0.0255207f,
  -0.1023527f, -0.0341771f, +0.1551600f, -0.0807976f, -0.2030188f, -0.0583131f, +0.1563501f, -0.0690051f,
  +0.0262139f, -0.0523252f, -0.1248034f, +0.1745530f, +0.2625721f, +0.0806254f, -0.2333338f, +0.1229973f,
  -0.0446284f, -0.0296099f, +0.1300177f, -0.0147695f, -0.0897277f, -0.3098430f, +0.0323013f, +0.0045984f,
  -0.1148777f, -0.1632808f, +0.0188957f, +0.1643141f, +0.0047727f, +0.0315397f, +0.2761157f, -0.2201958f,
  -0.0335764f, +0.0890264f, +0.0220483f, +0.0527413f, -0.0720033f, -0.0709066f, -0.0734761f, +0.4341837f,
  +0.1125596f, +0.0875049f, +0.0953855f, -0.0740744f, +0.0873510f, -0.0541045f, -0.0063395f, -0.2065052f,
  -0.0073292f, +0.0175728f, -0.0995187f, +0.0260038f, +0.2063097f, +0.0650323f, +0.2895887f, -0.0099354f,
  +0.1061422f, -0.1096321f, +0.0521350f, +0.4104744f, +0.0627630f, -0.0073653f, +0.0234377f, -0.1659530f,
  +0.1722733f, -0.0684544f, -0.2266034f, -0.1030370f, -0.1468234f, -0.2784807f, -0.0062464f, -0.0511582f,
  +0.3307403f, +0.0400064f, +0.0290572f, +0.4862261f, -0.0857665f, +0.1722857f, -0.1035630f, -0.1592936f,
  +0.0214740f, -0.0989618f, +0.0175940f, -0.0017264f, -0.1121052f, -0.0870190f, +0.0275889f, -0.1171535f,
  -0.0108673f, -0.1132609f, +0.0818570f, +0.3092071f, +0.0989855f, +0.2093098f, -0.1309103f, -0.2500587f,
  +0.4031400f, -0.1211407f, -0.0846221f, +0.3579335f, -0.0820259f, -0.1762925f, -0.0072422f, +0.1899602f,
  +0.1134557f, +0.4256271f, -0.0878803f, -0.2415586f, +0.2496614f, -0.2898159f, -0.2232577f, +0.3904411f,
  -0.0146172f, -0.0236957f, +0.0022450f, -0.1412579f, +0.0870150f, -0.1357247f, +0.0832255f, +0.4317878f,
  -0.0532561f, +0.2476756f, -0.4903482f, -0.0180447f, -0.3381857f, +0.3404537f, -0.1127599f, +0.4714190f,
  -0.2005164f, +0.6225451f, +0.0858510f, -0.4579631f, -0.1708014f, +0.1942508f, -0.0692333f, +0.1786533f
);

const float biases[4] = float[4](
  -0.1546739f, +0.0096398f, -0.1285423f, -0.0311114f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer14 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1264154f, +0.0457249f, -0.1571160f, +0.0932050f, -0.0087711f, +0.0341167f, -0.1280302f, -0.0444875f,
  +0.2259012f, +0.2379306f, +0.1514572f, +0.3694768f, -0.0980818f, -0.2087165f, -0.0634239f, -0.3500071f,
  +0.2454460f, +0.0376960f, +0.2472827f, -0.1009129f, +0.1446594f, +0.3009010f, +0.1608846f, -0.1155490f,
  -0.0633433f, -0.0115032f, -0.2460004f, +0.1192732f, +0.3043075f, -0.2343541f, +0.0143844f, +0.0683907f,
  -0.0606117f, +0.1801929f, +0.0584089f, +0.0638778f, +0.1563038f, +0.0734017f, +0.1168249f, -0.4533530f,
  +0.2329538f, -0.0556475f, -0.1234674f, +0.0300495f, +0.1648679f, +0.1932677f, -0.1070989f, -0.1045582f,
  +0.1336261f, -0.0475294f, +0.1258129f, +0.1913266f, +0.1528287f, -0.0156413f, +0.1156495f, -0.0554271f,
  +0.0859367f, -0.0649280f, +0.2087030f, +0.1885039f, +0.3051462f, -0.1692962f, +0.4448271f, -0.4542051f,
  +0.0061811f, +0.2984632f, -0.0813366f, +0.1376593f, +0.2122783f, +0.0838369f, +0.1122029f, +0.1363869f,
  +0.0697436f, +0.2044788f, -0.1092639f, -0.0254339f, -0.1944613f, +0.3466800f, +0.0638796f, +0.3246714f,
  -0.3170263f, +0.1956259f, +0.0855343f, +0.0388918f, +0.1051899f, -0.1595423f, -0.1699998f, +0.3973370f,
  -0.0467913f, +0.1794345f, +0.0880489f, -0.2287987f, +0.1200391f, -0.0171626f, -0.0314610f, +0.2421284f,
  -0.0635152f, -0.0361575f, -0.1992251f, -0.0868368f, -0.2317116f, +0.0146628f, +0.0242506f, +0.1335368f,
  -0.1231668f, -0.0210529f, +0.2040763f, +0.1890663f, -0.1210543f, +0.1739689f, -0.0083631f, -0.4173097f,
  -0.1011244f, +0.2092613f, +0.4413032f, +0.1148100f, +0.3269105f, -0.0719713f, +0.0237599f, -0.0527977f,
  +0.1939798f, +0.1594023f, -0.1993993f, -0.0226478f, +0.0176679f, -0.1048145f, -0.1788246f, -0.1545165f,
  +0.0194446f, +0.0987949f, +0.1081370f, -0.2453525f, +0.1822017f, +0.0986953f, -0.2368759f, -0.1432215f,
  +0.0957058f, -0.0664737f, -0.2638080f, +0.2034838f, -0.1893633f, -0.0904536f, +0.0787689f, +0.2210773f,
  +0.2676406f, -0.0248052f, -0.0581402f, +0.0073607f, -0.0269189f, -0.0525391f, +0.1574941f, +0.2183578f,
  -0.0383748f, +0.2982710f, +0.5059277f, +0.1636728f, -0.0941363f, -0.0579903f, -0.0021816f, +0.4655503f,
  -0.1537547f, +0.0556100f, +0.1599195f, +0.4270800f, -0.1834836f, -0.2428033f, -0.0757584f, +0.1329844f,
  +0.2351040f, -0.4451970f, -0.0340314f, -0.0178186f, +0.0109140f, +0.0312450f, -0.2440518f, +0.2988131f,
  +0.0225609f, -0.0186402f, +0.5301611f, +0.1614847f, -0.3242640f, -0.0501788f, -0.1903553f, +0.3572333f,
  -0.2231249f, -0.0504369f, +0.2109049f, +0.0151017f, +0.0517190f, -0.2706772f, +0.0089565f, +0.1884440f,
  -0.0877278f, -0.1183466f, +0.0932905f, +0.1266392f, +0.1442838f, -0.3900179f, -0.0038760f, +0.1733128f,
  -0.0620227f, +0.0187004f, +0.2244890f, -0.0019785f, -0.0858627f, -0.3163406f, -0.4064468f, +0.1649781f,
  -0.2728453f, -0.0385609f, +0.0475428f, +0.2600658f, -0.0756571f, -0.1105498f, -0.2501931f, +0.0307404f,
  +0.1821046f, -0.0122684f, -0.0278463f, -0.1199283f, +0.0669248f, +0.1941192f, -0.1371039f, -0.0261551f,
  +0.0165096f, +0.0267974f, +0.2655742f, +0.2373537f, -0.1548608f, +0.2678144f, -0.1082478f, -0.0943807f,
  -0.1550250f, +0.0392232f, +0.0921296f, +0.4408432f, -0.1279732f, -0.2777219f, -0.0807026f, -0.1666313f,
  -0.2846579f, +0.1471036f, -0.0386112f, -0.1903289f, +0.0794587f, +0.1467576f, -0.2011749f, +0.0335851f,
  +0.2598113f, +0.0944287f, -0.0753454f, -0.1713658f, -0.7668566f, -0.0552712f, -0.3837847f, -0.0711987f,
  -0.2453848f, +0.1848252f, -0.0305081f, +0.0514250f, -0.1710526f, -0.3859084f, -0.0999285f, -0.1620340f,
  -0.0535849f, -0.0492166f, -0.0719947f, +0.0216840f, +0.1145092f, -0.0519943f, -0.2012032f, -0.3429039f,
  -0.1090008f, +0.3045470f, -0.1830742f, -0.1861863f, -0.1906874f, +0.4248397f, -0.3409334f, -0.0768845f,
  +0.0330586f, -0.1800287f, +0.1529617f, -0.0196119f, -0.0613842f, -0.0045656f, +0.0794325f, -0.1125152f
);

const float biases[4] = float[4](
  +0.0575011f, +0.0610325f, -0.0677120f, -0.0277473f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer14 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0776204f, +0.1038175f, +0.0413483f, +0.2772257f, -0.1995320f, -0.0688308f, +0.0064916f, -0.3593220f,
  +0.0127443f, +0.0410950f, +0.1327310f, +0.5962683f, -0.3155665f, +0.0224629f, -0.0200313f, +0.0969298f,
  -0.0685139f, +0.1674294f, +0.1104733f, +0.3559909f, -0.1175536f, -0.0047884f, -0.0520257f, +0.0110586f,
  -0.1894556f, -0.5772124f, -0.1862595f, +0.2187965f, -0.1587402f, +0.1361114f, +0.1455014f, -0.2458286f,
  -0.0146319f, -0.0490697f, -0.3408777f, +0.3430363f, -0.3719531f, +0.1947079f, +0.0941147f, +0.1880952f,
  -0.0073495f, -0.0287037f, -0.1542591f, +0.2024132f, -0.2666876f, -0.0279673f, +0.0952853f, -0.0671108f,
  -0.1722006f, -0.0547829f, -0.2758582f, +0.0615580f, -0.2145632f, -0.0280134f, +0.0577689f, -0.1095334f,
  -0.2198483f, +0.2034922f, -0.3578077f, +0.4042320f, -0.1920973f, +0.0397282f, +0.0203381f, +0.1913971f,
  +0.0778825f, -0.0556645f, -0.0633260f, +0.1787993f, -0.2598781f, -0.0091151f, -0.0355638f, +0.1221517f,
  -0.4080625f, +0.0959164f, -0.0492379f, -0.0733944f, +0.1378811f, -0.1968666f, -0.0375921f, -0.4491949f,
  -0.1111458f, -0.0423095f, +0.2890671f, +0.0517146f, -0.0770512f, -0.0837368f, +0.2455393f, -0.2519234f,
  -0.0106476f, -0.2211564f, +0.0633001f, +0.0806503f, +0.0541785f, -0.1054642f, -0.0166918f, +0.0218698f,
  -0.1946045f, -0.0273606f, +0.1894577f, +0.1268912f, +0.2009211f, +0.1312255f, +0.1518865f, -0.1515048f,
  -0.0551658f, +0.2444185f, +0.0361574f, -0.0176978f, -0.5106411f, +0.0171478f, +0.0085297f, +0.0646119f,
  -0.1168694f, +0.1445495f, +0.0254895f, +0.1734998f, -0.3221822f, -0.0574731f, +0.1168238f, -0.0095084f,
  +0.0278607f, +0.0077640f, -0.2548845f, -0.0374172f, +0.1738355f, -0.1918872f, -0.1844566f, -0.0243963f,
  +0.0000610f, +0.1775969f, -0.2754629f, -0.0488055f, -0.0044742f, +0.0115644f, +0.1472939f, -0.2618572f,
  -0.1037915f, -0.1767648f, -0.0871347f, -0.0814943f, -0.1386184f, -0.2881240f, +0.0654456f, +0.0670316f,
  +0.0106486f, -0.0833613f, +0.2450253f, -0.1084324f, +0.0076854f, -0.3603214f, +0.1191212f, +0.0438142f,
  +0.0324742f, -0.1328136f, -0.0629029f, +0.2221743f, -0.1131612f, -0.2274268f, +0.0149735f, -0.0572309f,
  -0.1941521f, -0.0720954f, -0.1740818f, -0.2142330f, +0.0935825f, +0.0003535f, +0.0132357f, -0.1762665f,
  +0.0324701f, +0.1134926f, +0.0072880f, -0.0997271f, +0.1195591f, +0.0350260f, +0.0264212f, +0.0509864f,
  +0.0289130f, +0.1721663f, -0.1334139f, +0.0778907f, -0.2265466f, +0.3087677f, -0.2292861f, -0.2602475f,
  -0.2131465f, -0.2298769f, +0.3126550f, +0.0724698f, +0.2775677f, -0.0559171f, -0.0886631f, +0.0272220f,
  -0.1186054f, +0.0467921f, -0.0044452f, +0.1781658f, -0.1059590f, +0.1113406f, +0.0683962f, -0.0372397f,
  +0.0510812f, +0.0772336f, -0.3510036f, -0.2248314f, -0.0935627f, -0.1646050f, -0.0277157f, -0.0519047f,
  -0.0454008f, +0.0216004f, -0.0860448f, -0.0010614f, -0.0279412f, -0.0170959f, +0.1200944f, -0.0393517f,
  +0.0531375f, -0.1457845f, +0.4105293f, +0.1298649f, -0.0599010f, +0.0178830f, +0.1592053f, -0.1179378f,
  +0.0160074f, +0.0985136f, -0.0217136f, +0.4014860f, +0.1900625f, +0.0964163f, -0.1543349f, -0.3491505f,
  +0.2207853f, +0.0151823f, +0.2934239f, +0.8426629f, -0.1180038f, +0.0013717f, +0.0623054f, -0.3870455f,
  -0.2589705f, +0.1327039f, +0.0251489f, +0.0790500f, +0.0047956f, +0.0726722f, +0.0551407f, +0.0469370f,
  -0.2140413f, +0.0939205f, -0.2120934f, +0.1879765f, +0.1710394f, -0.2145011f, -0.1064477f, -0.0160952f,
  +0.3400276f, -0.0696529f, +0.2592950f, +0.5459809f, -0.2921638f, -0.2502751f, -0.2358672f, -0.0623381f,
  -0.4489475f, +0.0287817f, -0.1539429f, +0.1591527f, +0.1808866f, +0.2403680f, +0.2036959f, -0.0978981f,
  -0.1009652f, -0.0158370f, +0.1442119f, -0.0112400f, -0.1370219f, +0.1133859f, +0.0842460f, -0.0697047f,
  +0.2795496f, -0.1489230f, -0.3090575f, +0.2842562f, -0.1037164f, +0.1735893f, +0.2544640f, +0.0017088f
);

const float biases[4] = float[4](
  -0.0094079f, -0.0100732f, +0.0841223f, +0.0108046f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer15 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0148788f, -0.3928744f, -0.1402507f, +0.0664122f, +0.1083654f, +0.1181274f, -0.1757722f, +0.0497205f,
  +0.1743813f, +0.2809047f, -0.2245207f, -0.2039473f, -0.1634949f, +0.0757590f, +0.2221268f, +0.0457644f,
  -0.1396445f, -0.0876335f, +0.0212974f, -0.2169670f, +0.0471365f, +0.1246720f, -0.1058988f, -0.2487293f,
  +0.1154026f, +0.0324552f, -0.2605169f, -0.2793573f, -0.0732347f, +0.2879014f, -0.0863355f, +0.4072905f,
  +0.2463863f, +0.1534272f, -0.3597212f, -0.4190881f, -0.1653187f, -0.1703579f, +0.0126387f, +0.1766318f,
  -0.1625123f, -0.2917810f, +0.0513262f, -0.4355822f, +0.0888007f, -0.2198921f, +0.0495238f, -0.0554666f,
  +0.0801479f, -0.1582699f, -0.2994218f, -0.2491236f, +0.0008779f, -0.0697768f, +0.0266216f, -0.0141400f,
  +0.2668930f, +0.0326495f, -0.2873614f, -0.0922646f, -0.1182173f, -0.0499708f, -0.0204692f, +0.1174705f,
  +0.0166864f, -0.0562636f, +0.0989537f, +0.0061108f, +0.0463415f, -0.0824840f, +0.0133367f, -0.1933444f,
  +0.0774783f, -0.1341156f, -0.0311623f, +0.1580930f, -0.2003169f, +0.1888822f, +0.0254403f, +0.0508630f,
  -0.1569094f, -0.0015649f, -0.2365070f, -0.0136358f, +0.1320563f, -0.0159003f, +0.0407912f, +0.4373633f,
  -0.2027299f, +0.0675200f, +0.1324159f, -0.2161137f, +0.0144727f, +0.2961030f, -0.0062753f, +0.1108621f,
  +0.3715785f, +0.2756840f, +0.1885816f, +0.0004909f, -0.2651375f, +0.2092963f, +0.0033864f, -0.0882104f,
  +0.1853361f, +0.0836756f, +0.4125812f, +0.1490047f, +0.0165749f, +0.1345307f, -0.0346910f, -0.1261932f,
  +0.0058171f, +0.1754116f, -0.1398731f, -0.1122183f, +0.1759616f, -0.0175873f, +0.0561973f, -0.0491497f,
  -0.1517328f, -0.0093666f, -0.2255502f, -0.2063751f, -0.2667670f, +0.2040558f, +0.1945320f, -0.2042676f,
  -0.2704592f, -0.0757936f, +0.3008042f, -0.0074390f, -0.6289064f, +0.2287765f, -0.0091399f, +0.2397651f,
  -0.1517526f, -0.0476736f, -0.1569682f, +0.0932721f, -0.4723515f, +0.1438026f, -0.1461215f, +0.0700350f,
  +0.1384685f, -0.1881790f, +0.0365816f, +0.1110858f, -0.0163159f, -0.1772154f, -0.0310875f, -0.3582471f,
  +0.1722369f, +0.0700954f, +0.2147865f, -0.0004721f, -0.0718450f, +0.0732603f, +0.1762958f, +0.1825214f,
  -0.1988797f, -0.1091770f, -0.2477869f, +0.1079646f, +0.2408094f, +0.1199118f, +0.0599939f, +0.0087396f,
  +0.0970703f, +0.0576768f, -0.2419414f, +0.0360771f, -0.0392636f, +0.0795537f, +0.1095520f, -0.0956812f,
  -0.2269223f, +0.1105710f, -0.0907975f, -0.2928862f, +0.0104317f, -0.0594519f, +0.0394818f, -0.1461149f,
  -0.2374844f, -0.2636560f, +0.2932957f, -0.0544271f, +0.4830994f, -0.0622145f, -0.3379298f, -0.2944355f,
  -0.1485082f, +0.0369186f, -0.2067001f, +0.0436509f, +0.0313567f, +0.0047414f, +0.0587497f, -0.4756644f,
  -0.0111344f, -0.1770278f, +0.3202980f, +0.0432295f, -0.1460267f, -0.0085102f, +0.2381780f, -0.3896029f,
  -0.2761812f, -0.1292081f, +0.2794143f, +0.1851680f, +0.1621968f, -0.0588483f, +0.3101564f, -0.2701968f,
  -0.0675072f, +0.0271688f, +0.2344338f, +0.0984165f, +0.0253711f, +0.2129560f, -0.0241760f, +0.0862117f,
  -0.0316058f, -0.1345663f, +0.1239727f, -0.0603709f, +0.1427623f, -0.0778422f, +0.0904801f, +0.2756553f,
  -0.0152470f, +0.3414905f, +0.4706180f, -0.0414680f, -0.0046975f, +0.0010384f, -0.1715026f, +0.3166996f,
  -0.1415980f, -0.0945891f, +0.2182928f, +0.0911857f, +0.1337709f, -0.0414462f, -0.0970558f, +0.0578479f,
  -0.2899185f, +0.1173976f, +0.1539397f, -0.2710911f, -0.1545523f, +0.0384004f, +0.1657160f, +0.2608637f,
  +0.0291981f, +0.3354421f, +0.0513064f, -0.1806485f, -0.1543312f, +0.2026470f, -0.3167193f, +0.2686438f,
  +0.1455726f, +0.1053752f, +0.3426770f, -0.2581999f, +0.0044172f, +0.1982835f, -0.0042640f, +0.3107563f,
  +0.0555166f, -0.0855516f, +0.0542130f, -0.1251954f, +0.2441128f, -0.3105002f, +0.0523796f, -0.0755899f,
  +0.0916876f, -0.1870463f, +0.2363251f, -0.0173008f, -0.1133918f, -0.1408598f, +0.0301167f, +0.2471248f
);

const float biases[4] = float[4](
  +0.0247060f, +0.0255363f, -0.0516552f, +0.0347687f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer15 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.4089387f, -0.0167017f, +0.1085219f, +0.0658396f, +0.4056376f, -0.2489284f, -0.1091338f, +0.0987296f,
  +0.0342611f, -0.0684142f, +0.3324343f, +0.1557764f, +0.6500851f, +0.0323474f, -0.0807737f, +0.5186492f,
  +0.0665682f, +0.2114318f, -0.0735460f, +0.2862318f, +0.4153433f, +0.0554345f, +0.3836589f, -0.1854077f,
  +0.2148469f, +0.4558771f, -0.1098395f, +0.3714162f, +0.2000297f, -0.1340993f, +0.0663676f, +0.0433206f,
  -0.0915887f, +0.3484657f, -0.5591735f, +0.0382031f, +0.1814149f, -0.3937984f, -0.4192945f, +0.0084136f,
  +0.0935046f, +0.2554270f, +0.1184642f, +0.2450319f, +0.1855712f, +0.3824905f, -0.2398426f, +0.0239937f,
  +0.0477621f, +0.1432213f, +0.0186505f, +0.5060402f, -0.0632418f, +0.0649745f, +0.2509239f, +0.2396196f,
  -0.1194490f, -0.0013387f, +0.1508068f, +0.0741703f, -0.3791999f, -0.1549475f, -0.1067872f, +0.3433338f,
  -0.1223960f, +0.1885914f, +0.3185057f, -0.0003168f, +0.1900494f, +0.0554059f, -0.2213785f, +0.2068657f,
  -0.1223561f, +0.0601716f, -0.0884186f, -0.1244654f, -0.1473735f, -0.0752371f, +0.0855310f, -0.3141333f,
  -0.0028628f, -0.1284911f, +0.2930029f, -0.0980955f, +0.1810498f, +0.1095891f, -0.0441850f, +0.2155754f,
  +0.3606642f, +0.1105208f, -0.1154038f, -0.2280143f, -0.2157459f, -0.0980314f, +0.1017176f, -0.0178226f,
  -0.1936695f, -0.0080651f, +0.3294547f, +0.1799754f, -0.1685929f, +0.0228493f, -0.2089135f, -0.1309292f,
  +0.0359973f, +0.1209221f, -0.0046259f, -0.1735888f, +0.0859004f, -0.0447409f, -0.0240048f, +0.0122705f,
  +0.0303067f, -0.1003128f, +0.1143366f, -0.0591408f, +0.1777286f, +0.1352176f, -0.1510286f, +0.1201764f,
  -0.2058090f, -0.0341992f, +0.0626128f, +0.3867744f, +0.0343110f, -0.4759432f, +0.0482505f, -0.0298822f,
  +0.0131587f, -0.0443865f, +0.2809141f, +0.0602706f, -0.0964131f, -0.3457624f, -0.3365684f, +0.0479047f,
  -0.0900796f, +0.0475196f, +0.5610510f, -0.0864649f, -0.1989678f, -0.1087416f, +0.0473033f, +0.0108828f,
  +0.0925841f, +0.1186847f, +0.2782227f, +0.1640523f, +0.1987285f, +0.0172152f, -0.2526220f, +0.0690909f,
  -0.1669174f, +0.4262540f, -0.0894405f, +0.0511475f, -0.1603876f, +0.0586387f, +0.1833487f, +0.2708302f,
  -0.0348576f, -0.3368694f, -0.1005015f, -0.0790433f, -0.2509308f, -0.0427089f, -0.0535660f, +0.0116741f,
  +0.0054915f, -0.0542166f, +0.0656961f, -0.1384549f, +0.0128506f, -0.2844057f, -0.2870076f, +0.2587731f,
  +0.2946809f, -0.0181643f, -0.2815065f, -0.0850431f, +0.0085712f, +0.1198132f, -0.0819696f, -0.0385803f,
  -0.0337289f, -0.1329498f, -0.4036025f, +0.2755898f, +0.0420869f, -0.1252526f, +0.1978279f, +0.0970155f,
  +0.1349506f, +0.1030625f, +0.1415843f, -0.2064457f, +0.1521079f, +0.1879698f, -0.1921663f, +0.1276134f,
  +0.0278738f, -0.0665043f, -0.2285542f, -0.1770075f, -0.0860735f, -0.0353862f, +0.0985062f, +0.3563013f,
  -0.0629685f, -0.1168306f, -0.2721860f, -0.2210736f, -0.2990703f, -0.3306486f, +0.2004479f, +0.2417563f,
  +0.3147827f, +0.0048810f, -0.1323508f, +0.1278487f, -0.0585987f, +0.1230433f, +0.1098344f, -0.1687584f,
  +0.2180148f, +0.2510940f, +0.0430143f, +0.1400820f, +0.1845176f, +0.0661793f, -0.0244440f, +0.2829908f,
  -0.0523125f, -0.0543057f, -0.1061183f, -0.0128512f, -0.0402782f, +0.1988687f, +0.1233556f, -0.1584555f,
  +0.2704698f, +0.0308572f, -0.1983758f, +0.1765515f, -0.0597535f, +0.3973448f, +0.1845267f, +0.0280445f,
  +0.0341746f, -0.1178182f, +0.0128086f, -0.0775872f, +0.1776635f, -0.0467667f, -0.2120471f, -0.0127482f,
  +0.0067361f, +0.1493481f, +0.1403036f, -0.0056763f, -0.1812984f, +0.1697542f, +0.1762605f, -0.0628212f,
  -0.0329873f, -0.2048832f, -0.3130289f, +0.0702578f, +0.0823332f, -0.0256749f, -0.0929935f, -0.3768904f,
  +0.2467615f, +0.0504008f, -0.1576275f, +0.1296128f, -0.0032475f, +0.0715747f, +0.0357724f, +0.0857014f,
  -0.0335531f, -0.0930157f, +0.1453014f, +0.0824142f, +0.1268044f, +0.3027014f, -0.1597940f, -0.0607413f
);

const float biases[4] = float[4](
  -0.0230717f, +0.0033851f, -0.0339181f, +0.1197631f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer16 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0670008f, +0.2163836f, +0.0658909f, -0.2389778f, -0.1082152f, +0.2187049f, +0.2632395f, +0.0145692f,
  -0.1917312f, +0.2805167f, +0.4648167f, -0.2918701f, -0.3247820f, -0.1409001f, -0.0473614f, -0.0006468f,
  -0.2253722f, +0.0244000f, +0.2225798f, +0.0930242f, -0.3024532f, -0.1340718f, -0.1171309f, -0.0317821f,
  -0.2281546f, -0.1740279f, -0.0221325f, -0.2249513f, +0.1482346f, -0.1773580f, +0.1895893f, -0.0006973f,
  -0.3810942f, -0.0177153f, +0.2000377f, +0.2948575f, -0.1842738f, -0.3822671f, -0.2323531f, -0.1253261f,
  -0.2761307f, +0.0505003f, +0.3240067f, -0.2352206f, -0.4104383f, -0.0187292f, -0.1201823f, +0.1387293f,
  -0.0845219f, -0.1014806f, +0.1822834f, -0.0085504f, +0.1648989f, -0.0836622f, +0.4717819f, -0.0330994f,
  -0.0010273f, -0.1988956f, +0.1765822f, +0.0239077f, +0.1918653f, +0.1819822f, +0.3589059f, -0.2144468f,
  +0.2389850f, +0.0406302f, +0.0145826f, +0.0270101f, -0.1757298f, -0.0730323f, -0.1239056f, -0.1418160f,
  -0.0945479f, -0.0400927f, -0.0094424f, -0.1240903f, +0.0597124f, -0.1754006f, +0.3467436f, +0.1068024f,
  +0.0020437f, -0.3461393f, +0.1143672f, +0.0417692f, +0.0177797f, +0.1511381f, +0.2672628f, -0.1459807f,
  +0.1316173f, +0.0102616f, -0.0535770f, +0.0073983f, +0.3259082f, -0.2913324f, +0.0175926f, +0.0514628f,
  +0.3017606f, +0.1279681f, +0.1725384f, +0.2422487f, -0.0992937f, +0.1291603f, +0.2842013f, +0.0144501f,
  +0.1530095f, +0.2455246f, +0.1594714f, -0.0795098f, +0.0593982f, -0.3102610f, +0.2982772f, +0.0379709f,
  -0.1751444f, -0.2544919f, -0.0965729f, -0.0114850f, +0.3445693f, +0.0938244f, +0.2566136f, +0.2444772f,
  -0.1528889f, -0.0779559f, +0.2573017f, -0.0164792f, -0.1654437f, -0.0280086f, -0.0216958f, -0.0484905f,
  -0.1992474f, +0.1483549f, -0.3256714f, -0.0622068f, -0.3214965f, -0.1140350f, +0.0354501f, +0.1903197f,
  +0.2919993f, -0.1648518f, -0.1601381f, -0.0650988f, -0.0299521f, -0.1488516f, +0.0914543f, -0.0924374f,
  -0.0086337f, -0.1086530f, -0.1011096f, +0.0623790f, +0.0799842f, +0.1265470f, -0.0466034f, -0.0922751f,
  +0.2019564f, -0.1768580f, -0.1361678f, +0.0735205f, +0.2359480f, -0.2018899f, +0.3669772f, -0.2274401f,
  +0.1644477f, -0.3516336f, -0.0389490f, -0.3991181f, +0.3849888f, +0.0962477f, -0.0816874f, -0.0024091f,
  +0.0426409f, +0.0418431f, +0.1310270f, +0.0927708f, -0.0170764f, +0.1624226f, +0.0059476f, -0.1842902f,
  +0.4179315f, +0.0203813f, +0.0740590f, +0.1240686f, +0.0598736f, -0.1812041f, +0.2016055f, +0.1336543f,
  +0.1444860f, -0.0491333f, -0.1432387f, -0.0979813f, +0.2717167f, +0.1053601f, +0.1544746f, +0.2974005f,
  +0.0784952f, -0.2355681f, +0.2571735f, -0.2372337f, +0.0463201f, +0.4086694f, -0.0598865f, -0.1441534f,
  +0.0212947f, +0.0047290f, +0.0292295f, -0.2588248f, +0.1888253f, -0.2458286f, +0.0870985f, -0.0157440f,
  +0.1037293f, -0.1705020f, -0.0313468f, +0.0586582f, +0.2818221f, +0.2342132f, +0.0051529f, +0.4756181f,
  -0.0619005f, +0.1038413f, -0.0807051f, +0.2066134f, +0.0237959f, +0.0316562f, -0.0549880f, +0.1903664f,
  -0.1991541f, -0.0083125f, -0.0620454f, -0.0238348f, +0.1028055f, +0.1841861f, +0.2008008f, -0.1395449f,
  -0.0899282f, +0.1330335f, -0.1471171f, +0.0340416f, +0.0495910f, -0.1572043f, +0.5704367f, -0.1596541f,
  +0.2469476f, -0.0109317f, +0.1743956f, +0.0260793f, -0.0117000f, -0.0551632f, -0.1743284f, -0.0939719f,
  -0.1405110f, +0.0823709f, -0.1337450f, -0.1339171f, -0.3176769f, -0.1704928f, +0.2333106f, +0.0545977f,
  -0.0697074f, +0.0186838f, +0.1439698f, +0.1621861f, -0.1051341f, +0.0828296f, +0.0650120f, -0.1686225f,
  +0.2198505f, -0.1837377f, -0.1161461f, +0.0205479f, +0.1027629f, +0.2051048f, -0.0768339f, +0.2372421f,
  +0.0388610f, -0.0033688f, +0.1658228f, -0.1578687f, -0.0229922f, -0.1793654f, +0.0448807f, -0.0197738f,
  -0.0441361f, -0.1544341f, +0.2838660f, +0.0102685f, +0.1006953f, -0.1075294f, +0.2405717f, +0.0673698f
);

const float biases[4] = float[4](
  +0.0286447f, +0.0511470f, -0.0426118f, -0.0431228f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer16 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1016480f, +0.0686372f, +0.0676782f, -0.3951719f, -0.1428595f, -0.0274129f, +0.4614218f, +0.1970943f,
  +0.0267032f, -0.0084938f, +0.2019214f, -0.1119855f, +0.0040121f, -0.0479991f, +0.0501296f, +0.0322951f,
  -0.1481383f, +0.1004381f, +0.2021292f, -0.0384894f, -0.2066883f, +0.0046090f, -0.1563976f, +0.0697770f,
  -0.0848781f, -0.0059311f, +0.0017573f, +0.1034042f, -0.3417004f, -0.2882498f, +0.0808908f, -0.0232142f,
  +0.0812426f, -0.0885644f, -0.3145063f, +0.2402034f, -0.6537334f, +0.0758023f, -0.1387111f, -0.1386592f,
  -0.1863661f, +0.1002046f, +0.2235435f, +0.0555515f, -0.3510812f, -0.0161328f, -0.3931626f, -0.0218238f,
  -0.2749900f, -0.0485510f, +0.0012025f, +0.2275451f, -0.1197230f, -0.0579826f, +0.2421466f, +0.0625715f,
  +0.1658051f, -0.0004284f, +0.0290824f, +0.2744108f, -0.3362509f, +0.1415007f, -0.0596376f, -0.0292381f,
  -0.2360061f, -0.0490540f, +0.2195743f, -0.0530739f, -0.1554714f, -0.0903935f, -0.2647447f, +0.0629294f,
  +0.1524283f, -0.0529120f, +0.4466175f, +0.1319057f, +0.0176021f, +0.1514499f, +0.2957118f, -0.3401269f,
  +0.2733959f, -0.2536658f, +0.4092369f, +0.0078873f, +0.1973578f, +0.0306794f, +0.2153072f, -0.0549380f,
  -0.1433530f, -0.3011114f, +0.0615941f, -0.0253032f, +0.3302869f, +0.0333695f, +0.3595373f, -0.0109726f,
  +0.0612349f, +0.0685119f, +0.1209031f, -0.1346996f, -0.1222368f, +0.0951722f, +0.1600393f, -0.2497638f,
  +0.2722797f, +0.0467367f, -0.0931287f, +0.0620680f, +0.1967851f, +0.1254932f, +0.0488581f, +0.0738128f,
  +0.1196815f, -0.0343333f, +0.3169412f, -0.0999593f, -0.2733106f, +0.0541820f, +0.4384366f, +0.0312062f,
  +0.1098400f, +0.0549895f, -0.0052330f, -0.2449391f, -0.0781326f, +0.0071575f, +0.2127537f, +0.1899799f,
  +0.4680962f, -0.1348879f, +0.1895719f, +0.0110768f, +0.1021042f, -0.3020334f, +0.3778455f, -0.1685622f,
  +0.0445658f, +0.0094998f, +0.2055329f, -0.1671478f, -0.1505412f, +0.0843480f, +0.1181531f, +0.3127992f,
  +0.0156090f, +0.0446325f, -0.2415839f, -0.2241339f, -0.1518981f, +0.3628395f, +0.0052445f, +0.0106834f,
  +0.2087187f, -0.1744719f, -0.2353234f, +0.1189182f, +0.5171772f, +0.1559273f, -0.1263262f, -0.2344016f,
  +0.0960075f, -0.1694288f, -0.0444715f, -0.0455669f, +0.0257949f, +0.2099316f, +0.1968586f, -0.3013887f,
  +0.0426996f, +0.0915746f, +0.0724484f, -0.2071328f, -0.0545338f, -0.0977886f, -0.2965532f, -0.2169916f,
  -0.0867195f, -0.0077192f, +0.2935048f, -0.0048997f, -0.1848664f, -0.1439899f, -0.0636540f, +0.1990436f,
  -0.2733408f, -0.0231314f, +0.0398124f, +0.3003485f, -0.0397811f, +0.0927810f, +0.0945844f, -0.3069232f,
  +0.1963625f, -0.0117423f, -0.1402477f, +0.4002928f, +0.2251754f, -0.0246423f, +0.1479100f, +0.2265212f,
  -0.0044418f, +0.2079543f, +0.0398174f, -0.0964251f, -0.1620289f, -0.0818248f, +0.0175703f, +0.2496571f,
  +0.0020143f, -0.0686966f, +0.1941091f, -0.0677255f, -0.0861612f, +0.0599829f, +0.0376568f, -0.1330258f,
  +0.0215969f, +0.1590983f, +0.1030112f, +0.0014681f, +0.0720989f, +0.1009603f, -0.0447362f, +0.0411901f,
  -0.1894336f, -0.2401781f, +0.2456390f, +0.2097295f, -0.1120104f, +0.2814635f, +0.1999496f, -0.1587549f,
  -0.4094243f, -0.3797899f, -0.2059909f, -0.2814033f, +0.3844879f, +0.1488968f, +0.0940199f, +0.3008498f,
  +0.1240679f, -0.0504002f, +0.0229808f, -0.1346721f, +0.0052753f, +0.0254888f, +0.1260580f, +0.2794978f,
  -0.1118681f, +0.2894871f, +0.1854040f, -0.1184104f, -0.3143873f, +0.0314700f, -0.5494371f, +0.3018830f,
  -0.0639535f, -0.0196287f, +0.0065564f, -0.0734031f, -0.4444333f, +0.2341997f, +0.0985816f, +0.2727036f,
  +0.3791954f, +0.0193166f, -0.1974795f, -0.1637164f, -0.0248905f, +0.1353356f, +0.0588105f, +0.2649047f,
  -0.0240804f, -0.2078283f, -0.0447239f, -0.0836618f, +0.0182292f, -0.2464463f, +0.1430613f, +0.0406386f,
  -0.5405667f, +0.0336298f, +0.1505811f, -0.1457955f, -0.1676621f, -0.0107645f, +0.0409154f, -0.1706344f
);

const float biases[4] = float[4](
  -0.0077324f, -0.0291279f, +0.0559590f, +0.0363426f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer17 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0333082f, +0.1394118f, +0.1765396f, +0.0319097f, -0.1116680f, +0.1279387f, +0.0021549f, -0.1182232f,
  -0.1405715f, -0.0791199f, -0.1255962f, -0.0528393f, -0.0002821f, +0.1938464f, +0.3468670f, -0.0798020f,
  -0.3977922f, +0.0540435f, +0.1068771f, -0.1711728f, +0.1584678f, +0.1433551f, +0.0146074f, -0.2615799f,
  -0.0220629f, +0.1231976f, -0.0652870f, +0.1629207f, -0.1991311f, +0.2649752f, +0.2033763f, -0.0423353f,
  -0.0850768f, +0.2297755f, +0.2536475f, +0.2952512f, -0.0243810f, +0.0486150f, +0.0655149f, +0.4399372f,
  -0.2711906f, -0.0902290f, -0.3933559f, +0.1475592f, +0.2223189f, +0.2119787f, +0.0549375f, -0.1958868f,
  -0.0482559f, -0.0748160f, -0.1589387f, +0.1041338f, -0.0048369f, +0.0455787f, -0.0127206f, +0.4896947f,
  -0.0911022f, -0.0240614f, -0.4173754f, +0.1175174f, -0.3631371f, +0.0669983f, -0.1792352f, +0.3623677f,
  +0.0160673f, +0.0111447f, -0.1994905f, +0.0451429f, +0.0127105f, -0.0135876f, +0.1088502f, +0.1361337f,
  +0.0826516f, -0.1575939f, -0.1643572f, -0.2479699f, +0.1601608f, -0.0645032f, -0.0023195f, +0.0500710f,
  +0.1056736f, -0.2188974f, -0.2826576f, -0.1550180f, -0.1690828f, -0.1012563f, -0.1140232f, +0.1815121f,
  +0.0098737f, +0.0153536f, +0.0524808f, -0.0073283f, -0.3671939f, -0.0343488f, -0.0591664f, -0.2727677f,
  +0.0129133f, -0.0636251f, +0.4786170f, -0.0367057f, +0.3962315f, -0.0036594f, +0.0722125f, +0.3702535f,
  +0.1695066f, -0.1454291f, -0.3461029f, +0.2336144f, +0.4872017f, -0.3691655f, -0.2833703f, -0.0377377f,
  +0.0693995f, +0.1277820f, -0.1441692f, -0.0084406f, +0.0566419f, -0.5307270f, +0.0016915f, +0.4335765f,
  +0.2147905f, -0.2003713f, +0.3354868f, -0.0746936f, +0.2863598f, -0.2300404f, -0.1500381f, +0.0725120f,
  -0.0956458f, +0.0421093f, -0.1070636f, -0.0797399f, +0.4391308f, -0.0579532f, +0.2264185f, -0.0309721f,
  -0.0981337f, +0.2399380f, -0.0391745f, +0.6007333f, -0.3605360f, +0.0430590f, +0.1205196f, +0.0350856f,
  -0.1876004f, -0.0526615f, +0.1220182f, +0.0074120f, -0.2976048f, +0.2277734f, +0.0374165f, -0.0571657f,
  -0.0388882f, -0.0896930f, -0.1058986f, -0.1091694f, -0.1610273f, -0.0383750f, +0.0974728f, -0.0688900f,
  -0.1398151f, +0.1403227f, +0.2477162f, +0.2105069f, -0.1478128f, +0.1554872f, -0.2113246f, -0.2874947f,
  +0.1132288f, -0.2864934f, +0.0096136f, +0.1974881f, -0.2203732f, -0.2347268f, -0.3326541f, +0.0881422f,
  -0.0619595f, -0.1107931f, -0.0483119f, +0.2207249f, +0.1392941f, -0.1397350f, -0.0365914f, +0.0478404f,
  +0.0406320f, -0.0790485f, +0.1071267f, +0.0739320f, +0.2608396f, +0.0388023f, +0.3596661f, -0.0447097f,
  +0.1896421f, +0.0892748f, +0.2140749f, -0.1840658f, -0.0772723f, +0.0850039f, +0.0752153f, -0.0979588f,
  -0.0133318f, +0.0538825f, -0.2191757f, +0.0922211f, -0.1093267f, +0.2042643f, +0.2187879f, +0.0216917f,
  +0.1486319f, -0.1264382f, -0.1492710f, -0.0229074f, +0.0524645f, +0.1442643f, -0.0425110f, -0.0274239f,
  +0.1661877f, +0.0127515f, -0.0285980f, +0.0388357f, +0.0249544f, +0.2303834f, -0.0709959f, -0.2428087f,
  +0.2806507f, -0.4034545f, +0.0849323f, +0.4164276f, +0.1795941f, +0.0881800f, +0.0511627f, +0.2840264f,
  +0.1607364f, -0.1010710f, -0.2436056f, +0.0406574f, -0.0900020f, -0.3502712f, +0.1771708f, -0.1017085f,
  -0.0985248f, -0.0782871f, -0.1659438f, -0.3237388f, -0.2151754f, -0.2138244f, -0.0856954f, -0.0854130f,
  +0.1958122f, -0.2991580f, -0.3392890f, -0.3725096f, +0.2079781f, +0.0628564f, -0.1235711f, +0.1822928f,
  +0.1678426f, +0.0757835f, -0.4492544f, -0.1742837f, -0.4404860f, -0.4438658f, -0.2671015f, -0.3256097f,
  +0.0335146f, +0.0587454f, +0.1178336f, -0.2501462f, -0.0094786f, +0.0012461f, -0.1272834f, -0.1421096f,
  -0.1156882f, -0.0771028f, +0.3012337f, +0.0758121f, +0.1462764f, +0.0479017f, +0.0530039f, -0.1322491f,
  +0.2879400f, -0.0126434f, -0.0454419f, +0.4327164f, -0.0132944f, -0.1976072f, +0.0462815f, +0.0854382f
);

const float biases[4] = float[4](
  +0.0478361f, -0.0615400f, +0.0342717f, +0.0780936f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer17 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1518562f, -0.4326994f, -0.4657933f, +0.4422856f, +0.1936405f, -0.0326323f, -0.4654749f, -0.4977165f,
  -0.2171944f, +0.0636845f, -0.8881094f, -0.1732458f, +0.3445343f, -0.2487987f, +0.3359662f, +0.1617851f,
  +0.0803183f, +0.1863696f, -0.2929896f, -0.3722623f, +0.1895781f, -0.1734861f, +0.0624730f, +0.5585019f,
  +0.2346984f, +0.2320956f, +0.0700464f, +0.5074289f, -0.1759584f, -0.1962383f, -0.3044877f, -0.1096777f,
  -0.1007556f, +0.0987739f, -0.3114033f, -0.1994456f, +0.3174873f, -0.1910125f, +0.0138049f, +0.0619364f,
  +0.0914074f, +0.1997617f, +0.0326222f, -0.2198357f, -0.1494371f, -0.0915044f, +0.0180819f, +0.3721038f,
  +0.1636489f, +0.0570894f, -0.0717719f, +0.1219340f, -0.0805853f, -0.1497562f, +0.0291326f, +0.0077537f,
  -0.0345450f, -0.1331655f, +0.0287106f, +0.0359018f, +0.0546920f, +0.0063460f, +0.0651665f, +0.0887361f,
  +0.1106347f, +0.1264903f, +0.0886587f, -0.1017093f, -0.0977875f, +0.0520489f, -0.2102832f, +0.1227427f,
  -0.1290317f, -0.1296370f, +0.0198580f, +0.1745567f, +0.0903527f, +0.1869652f, -0.1632789f, +0.0609979f,
  -0.0922393f, +0.0537468f, +0.0752252f, -0.2910189f, -0.1182850f, -0.1338169f, +0.0739745f, -0.0088261f,
  +0.1032585f, -0.1507316f, -0.1111892f, +0.0163136f, +0.0495110f, -0.0592606f, -0.0529466f, -0.0743318f,
  +0.0792340f, -0.1787862f, -0.0555913f, -0.1440493f, +0.0343140f, +0.3021937f, +0.0169173f, +0.4034210f,
  -0.0091892f, +0.1634099f, +0.1616241f, -0.0466942f, +0.1287131f, +0.0661932f, +0.2251100f, -0.3676853f,
  -0.0609253f, -0.0453054f, -0.1617614f, +0.0856228f, -0.1243634f, -0.0569923f, +0.0960920f, +0.1327664f,
  -0.0206800f, -0.0923402f, -0.1022741f, +0.1355211f, -0.0856757f, +0.0636884f, -0.0111936f, -0.0214117f,
  -0.1698527f, +0.2339964f, +0.4389128f, -0.3991379f, -0.1041788f, -0.2771155f, +0.0041145f, -0.0084470f,
  +0.0634329f, +0.0116269f, -0.2613414f, +0.1218884f, +0.1636443f, +0.2425388f, -0.1123346f, +0.3850195f,
  -0.2209430f, +0.1031615f, -0.4350519f, +0.1417588f, +0.1547446f, -0.0092500f, -0.0389969f, +0.3167030f,
  -0.0987775f, +0.1571751f, -0.0274146f, -0.0815981f, -0.2137765f, -0.1997141f, -0.1890344f, +0.2779100f,
  -0.0046576f, +0.1410279f, +0.3005641f, +0.0927964f, -0.0391154f, +0.1032035f, -0.2841896f, -0.4138059f,
  +0.1237184f, +0.0845635f, -0.7424666f, -0.0000092f, +0.0336863f, -0.1821826f, +0.4205663f, +0.1625215f,
  +0.2962566f, -0.0404640f, -0.4654380f, +0.2850246f, -0.0404717f, -0.2692361f, -0.1722607f, -0.1125286f,
  +0.0005783f, -0.0184905f, +0.1183245f, -0.0379396f, +0.3092095f, -0.0605842f, -0.2091815f, -0.1849905f,
  +0.2142611f, -0.1986802f, -0.4182391f, -0.0598988f, +0.3547097f, -0.2253846f, -0.1642508f, -0.1626582f,
  +0.3097743f, -0.0271260f, -0.3132659f, +0.1322859f, -0.0394836f, -0.1297216f, +0.0630857f, +0.2417766f,
  -0.1791383f, -0.2342613f, -0.1243134f, -0.3118486f, +0.1331096f, -0.1178040f, +0.2853867f, -0.5046887f,
  +0.3601966f, -0.0143354f, -0.1012487f, -0.2503938f, +0.0164789f, +0.2335488f, -0.0701649f, -0.0878667f,
  +0.0019256f, -0.0920096f, +0.2584401f, +0.0560266f, +0.2848737f, +0.0926660f, -0.0403090f, +0.1330310f,
  +0.1520465f, -0.0311936f, -0.1100725f, -0.0420928f, +0.2966295f, -0.0754325f, -0.0576884f, +0.0180907f,
  +0.0701579f, -0.0578965f, -0.0706032f, -0.2022316f, -0.2160405f, +0.2908563f, -0.0346046f, +0.1087995f,
  +0.1264271f, -0.1690147f, +0.0647124f, -0.2534329f, +0.1324511f, +0.0872969f, -0.0623766f, -0.0202232f,
  -0.0349048f, +0.1666890f, -0.2765467f, -0.0823938f, +0.5986318f, -0.0869333f, +0.2724824f, -0.2379746f,
  +0.1178054f, +0.0823281f, -0.0917882f, +0.1598077f, +0.1201396f, +0.2127914f, -0.0091270f, -0.5816085f,
  +0.4667669f, +0.0359587f, +0.0588793f, -0.0994708f, +0.2558168f, +0.0464043f, -0.0634328f, -0.0646043f,
  +0.1627142f, +0.0129206f, -0.1249657f, +0.0665623f, +0.7063786f, +0.2593087f, +0.2702571f, -0.2910853f
);

const float biases[4] = float[4](
  -0.1026517f, +0.0447261f, +0.0144269f, +0.0744277f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer18 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0196341f, +0.2792925f, -0.1158172f, +0.0433949f, +0.0492846f, +0.0098529f, +0.3123837f, +0.2017210f,
  -0.0647146f, -0.2178600f, -0.0126372f, -0.0147469f, +0.2976883f, -0.0928499f, -0.1401545f, -0.1653484f,
  +0.1898547f, -0.0722163f, -0.2242354f, -0.1298709f, +0.1445564f, +0.2086998f, +0.0500576f, -0.0345967f,
  +0.0818779f, +0.2257802f, -0.0550255f, +0.0306932f, +0.1820098f, +0.1308929f, +0.2796221f, +0.0670638f,
  +0.1160979f, -0.2603186f, -0.2977369f, +0.0468695f, -0.0187105f, -0.0607050f, +0.1144554f, -0.0821350f,
  +0.3701448f, -0.4324198f, -0.3147485f, +0.0948350f, +0.0078919f, +0.0655127f, +0.0380681f, +0.2001837f,
  -0.0389451f, +0.1553955f, +0.2969309f, -0.1480385f, +0.0758080f, -0.1183190f, +0.0844293f, +0.2245002f,
  -0.0203775f, -0.0870429f, -0.0764892f, -0.0184714f, -0.1615966f, -0.0091043f, +0.0988633f, +0.0464050f,
  +0.1583493f, -0.4283510f, -0.1848517f, -0.0142027f, +0.3037297f, -0.0949607f, +0.0718538f, +0.2275683f,
  +0.0228897f, +0.0297414f, +0.1693742f, -0.0143639f, +0.1076586f, -0.0273433f, +0.1980963f, +0.2020858f,
  -0.2443689f, -0.0322437f, +0.1688728f, -0.0607575f, +0.2026581f, +0.0754480f, -0.0047869f, -0.3214534f,
  +0.0039841f, +0.0707942f, -0.0138794f, +0.1679796f, +0.0632232f, -0.0157027f, -0.1376887f, -0.0378187f,
  +0.0575317f, -0.2284883f, -0.0259994f, -0.2430103f, -0.0366581f, -0.2382827f, -0.2216483f, +0.1677756f,
  +0.2218180f, -0.1301603f, +0.0948636f, +0.1550593f, -0.1424646f, -0.1028470f, +0.2261038f, +0.2740108f,
  -0.1493047f, +0.1396175f, -0.1015733f, +0.0421550f, -0.1589411f, +0.4033500f, -0.0004344f, -0.0355991f,
  -0.2077765f, +0.0363642f, -0.1082316f, -0.1929964f, -0.0521656f, -0.0143410f, -0.1311664f, -0.0071165f,
  +0.1352339f, -0.1052122f, +0.0675546f, -0.2211692f, +0.1220607f, -0.3761369f, -0.1629831f, +0.0131697f,
  -0.0321211f, -0.1390205f, -0.0005716f, -0.0867537f, +0.4572678f, +0.1020101f, +0.0629305f, +0.1174423f,
  +0.0912121f, +0.1902725f, +0.0198191f, +0.0016367f, +0.0763005f, +0.1703954f, +0.3601044f, +0.1618377f,
  +0.1196995f, +0.2737883f, +0.0699231f, +0.0990117f, +0.0471764f, -0.2200710f, +0.2910771f, -0.2579354f,
  -0.0543961f, +0.1167335f, -0.2013699f, +0.1821709f, -0.0395089f, +0.1142229f, +0.3014790f, +0.0376541f,
  +0.2661391f, +0.0154629f, -0.0360107f, -0.1448901f, -0.1138020f, +0.0021535f, -0.0010807f, +0.2580045f,
  +0.2178243f, +0.0014479f, -0.1021744f, -0.1534485f, -0.0809834f, -0.5440599f, +0.5541474f, +0.0293522f,
  +0.0918391f, -0.3836022f, -0.1981358f, +0.0817456f, +0.0869687f, +0.0615031f, +0.5993803f, -0.3239702f,
  -0.0650345f, -0.0474103f, -0.2118585f, -0.2311771f, -0.1983548f, -0.0578193f, +0.4033172f, +0.1721284f,
  +0.3542515f, +0.2191548f, +0.3235029f, +0.0167123f, -0.0244763f, +0.0703215f, +0.4007977f, -0.0509854f,
  +0.1839334f, +0.1173959f, +0.1606878f, -0.0149809f, +0.4031524f, +0.0627768f, +0.4647022f, -0.1566218f,
  +0.0841766f, -0.1826507f, +0.1556907f, -0.0817809f, +0.1182102f, -0.1753166f, -0.6416047f, +0.1263975f,
  -0.0690175f, -0.0022329f, +0.0964825f, -0.3667956f, -0.0289468f, +0.0217769f, -0.3338315f, -0.2146313f,
  -0.0184290f, +0.1220166f, -0.0240445f, +0.1838574f, -0.0739072f, +0.0338790f, -0.2801234f, +0.2677945f,
  -0.0129682f, -0.3022971f, +0.0237529f, -0.2201299f, -0.0841751f, -0.0255071f, -0.4043824f, -0.3037009f,
  +0.1033056f, -0.1565877f, +0.0199316f, +0.1967606f, +0.1449346f, -0.0375875f, -0.2648266f, +0.0210483f,
  -0.2082118f, +0.1412341f, -0.0277824f, +0.2229623f, +0.1125423f, -0.1120080f, -0.1822807f, +0.0442384f,
  +0.0355856f, -0.4204182f, -0.0820613f, +0.1896421f, -0.1124211f, +0.2167344f, -0.0771166f, +0.0763447f,
  +0.1836882f, -0.0775274f, -0.1114652f, -0.3406267f, -0.1714791f, -0.1000156f, -0.3163305f, -0.2583222f,
  -0.0629171f, +0.4076370f, +0.0647524f, -0.1124337f, -0.4749285f, +0.0073437f, -0.3857505f, +0.1943927f
);

const float biases[4] = float[4](
  +0.0021015f, +0.0509451f, -0.0425547f, -0.0282030f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer18 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1538117f, +0.1278096f, +0.0502062f, -0.0670844f, +0.2869371f, -0.2901506f, +0.4676194f, -0.0878893f,
  -0.0154251f, -0.1914703f, -0.0436215f, -0.2388615f, +0.3181672f, +0.0964815f, +0.0876391f, -0.2459940f,
  +0.2020323f, +0.2348841f, -0.1637177f, +0.3007392f, +0.1708787f, -0.1417264f, +0.1913993f, -0.2607973f,
  +0.1354502f, -0.1135599f, +0.1679202f, -0.0025116f, +0.0022684f, -0.1928816f, +0.3611067f, +0.0447091f,
  +0.0925360f, -0.4663866f, +0.0460597f, +0.0936765f, +0.1948377f, -0.1793748f, +0.4097433f, -0.3396366f,
  +0.1294103f, -0.2000271f, -0.0684988f, +0.5412961f, +0.1424183f, -0.1742756f, +0.0653853f, -0.2696642f,
  -0.0736500f, +0.0903406f, +0.0885906f, -0.1206175f, -0.0849673f, -0.0036307f, +0.7196853f, +0.4063266f,
  +0.1372192f, -0.2081002f, -0.0667256f, +0.0311754f, +0.2981027f, +0.3374804f, +0.7105856f, -0.0419066f,
  +0.2503175f, -0.2592852f, -0.3458119f, +0.3590786f, +0.1438825f, -0.1929322f, +0.2224270f, +0.0412680f,
  +0.2787215f, +0.4072672f, -0.1532754f, -0.0606880f, +0.2106483f, +0.0019400f, -0.0500170f, +0.2713350f,
  +0.3364334f, +0.0723676f, +0.0959882f, +0.0642903f, +0.2196117f, -0.0034841f, +0.0359257f, -0.2141186f,
  +0.2853763f, +0.1334721f, -0.1036913f, -0.0828460f, +0.2449700f, +0.0304833f, +0.3726515f, -0.0372398f,
  +0.0931620f, +0.0781489f, +0.0691878f, +0.0989623f, +0.2920205f, -0.0257461f, +0.0782329f, +0.3878014f,
  +0.1088281f, +0.1468243f, +0.1962128f, -0.2311751f, +0.4540866f, +0.0888924f, +0.2076049f, +0.1253044f,
  +0.1929752f, -0.1671550f, -0.0477132f, +0.1081440f, +0.3293002f, +0.1012688f, +0.3818393f, -0.1396242f,
  -0.1745178f, -0.0886407f, -0.0421572f, +0.0165403f, +0.4224410f, +0.0801137f, +0.0141268f, -0.0254337f,
  +0.0572509f, +0.0948822f, +0.0616080f, +0.0214037f, +0.3904886f, -0.0675925f, -0.1277820f, +0.0302537f,
  +0.0845869f, -0.0716887f, +0.1537461f, -0.0143449f, +0.2304176f, -0.1490412f, -0.3142508f, -0.1676770f,
  +0.1681842f, +0.1249939f, -0.0768917f, -0.0274858f, +0.1566362f, -0.0983803f, -0.4849530f, -0.1581928f,
  +0.2477505f, +0.1003324f, -0.0183036f, -0.1167554f, -0.1542647f, +0.0736444f, +0.0770668f, -0.0435680f,
  +0.0904157f, +0.1016152f, +0.2721813f, +0.0773627f, +0.0276348f, -0.1425177f, +0.3124402f, -0.0111253f,
  -0.0713801f, -0.1400062f, -0.0687115f, +0.1389379f, +0.1015265f, -0.0733186f, -0.1458002f, -0.1344488f,
  -0.0283810f, -0.0084508f, +0.0425049f, -0.0437055f, -0.0474033f, +0.3327735f, +0.1255207f, +0.2502160f,
  +0.0623160f, +0.1994440f, -0.1366349f, +0.0105117f, -0.0182812f, -0.1032781f, -0.0310632f, -0.2600918f,
  +0.0425795f, -0.0910370f, +0.0543304f, +0.2538669f, +0.0971908f, -0.0110479f, -0.0544802f, +0.0326982f,
  +0.0940138f, +0.1134610f, +0.0842811f, -0.2739614f, +0.1451718f, -0.1765212f, -0.0353365f, +0.2667235f,
  +0.0267064f, -0.1629804f, +0.1203059f, +0.0479264f, +0.2100271f, +0.2183411f, +0.0966242f, -0.1117878f,
  +0.2074067f, -0.0585897f, +0.3080739f, -0.0068602f, -0.1661472f, -0.0329803f, +0.0002844f, +0.5988356f,
  +0.1905287f, +0.1484746f, +0.3343528f, -0.1425650f, -0.1175058f, +0.0775884f, +0.1879309f, +0.4093868f,
  +0.2186812f, +0.1897122f, +0.0195462f, -0.0205027f, +0.0702924f, +0.0706534f, +0.2194490f, +0.3207736f,
  -0.0150130f, -0.2082153f, -0.0364726f, -0.0032099f, +0.0751228f, -0.3278125f, -0.0321390f, +0.2492246f,
  -0.2491810f, -0.1835838f, +0.1093281f, -0.2562939f, +0.0234207f, +0.2904798f, +0.2549438f, +0.2624777f,
  +0.2025119f, -0.0340032f, -0.2661676f, -0.3945466f, +0.4039145f, +0.0658290f, +0.2249768f, -0.3453677f,
  +0.1868970f, -0.1425267f, +0.0556395f, -0.1352670f, -0.2251932f, -0.1163539f, +0.1277285f, +0.0992637f,
  -0.0192491f, -0.0367446f, +0.3235470f, -0.1770974f, -0.2011067f, +0.0714177f, +0.0969127f, -0.0533900f,
  +0.1049132f, -0.1203063f, +0.1868961f, -0.1371947f, +0.5747643f, +0.0634087f, +0.0514404f, -0.1704486f
);

const float biases[4] = float[4](
  -0.0286875f, -0.0438527f, +0.0536721f, +0.0102223f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer19 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1326315f, -0.0802671f, +0.0514625f, -0.1307339f, -0.1920631f, +0.0642909f, +0.1586240f, -0.1270993f,
  +0.1068988f, +0.0304032f, +0.0945605f, +0.0325600f, +0.0438263f, -0.1214272f, -0.1804689f, -0.1509995f,
  -0.0553674f, -0.0949133f, +0.1829067f, -0.0937884f, -0.0551387f, -0.0725720f, -0.0626014f, +0.1252018f,
  -0.0477402f, +0.2035437f, +0.1033198f, -0.0853664f, -0.0445862f, +0.2133557f, -0.0182717f, +0.1750441f,
  +0.0389380f, +0.0499464f, +0.2269122f, -0.1217611f, -0.0259914f, -0.0666341f, +0.0187062f, -0.0724294f,
  +0.0350576f, -0.2034173f, +0.0159998f, -0.0641069f, +0.0664145f, -0.2526584f, -0.0350200f, -0.0864271f,
  -0.0994679f, +0.0559043f, +0.0685240f, +0.2440774f, -0.0568402f, +0.2585337f, +0.0597097f, +0.0013111f,
  +0.0773199f, +0.1957395f, -0.0531385f, -0.1630536f, -0.2022278f, +0.1933032f, -0.1580700f, -0.0269750f,
  +0.0128161f, -0.0340458f, -0.1179123f, -0.1829238f, +0.1528129f, +0.1719980f, +0.1566749f, -0.1912022f,
  -0.0167980f, +0.1232396f, -0.0703701f, -0.1871079f, -0.0139121f, +0.2845201f, +0.1026818f, +0.0639715f,
  -0.0672183f, -0.0501986f, -0.0288033f, +0.1049791f, +0.2008970f, +0.2133008f, +0.0228699f, -0.0915806f,
  +0.2336415f, -0.1772126f, -0.0861717f, +0.1134489f, -0.1481552f, +0.3182827f, -0.0082181f, +0.0614586f,
  +0.0390796f, -0.1676621f, +0.2137863f, -0.1282029f, -0.1717138f, +0.1767884f, +0.2025178f, +0.4788647f,
  +0.3354906f, -0.4695530f, +0.4385036f, -0.2451218f, -0.3193210f, +0.1910286f, -0.0792064f, -0.4718715f,
  +0.0569336f, -0.1397128f, +0.1605083f, -0.1189962f, -0.0934944f, -0.1013615f, +0.0785385f, +0.1473211f,
  +0.4579772f, -0.3775129f, +0.1022721f, +0.0736639f, +0.3715329f, +0.0244633f, -0.0345918f, +0.0622673f,
  +0.3505065f, -0.3579434f, +0.0920806f, -0.0528288f, +0.1869395f, +0.2334680f, +0.3051947f, +0.0936250f,
  +0.1403086f, +0.0103811f, +0.1218670f, -0.0224701f, +0.1164524f, +0.2313196f, +0.0689831f, +0.3138974f,
  -0.2158624f, +0.0314141f, +0.0585380f, -0.0786974f, -0.1601085f, +0.0383432f, +0.2125028f, -0.0721105f,
  +0.0507959f, -0.0589498f, +0.1044215f, -0.3059074f, +0.1044288f, +0.2214158f, +0.1029921f, -0.1519364f,
  -0.0200374f, +0.1672025f, -0.0508919f, +0.0339818f, -0.1964424f, +0.2341886f, +0.1106000f, +0.1021478f,
  -0.2272254f, +0.1343340f, +0.4552825f, +0.1066738f, +0.0528759f, +0.2056093f, +0.0927274f, -0.0468973f,
  -0.1252961f, +0.0478023f, +0.0985695f, -0.2126305f, -0.0435818f, -0.0564224f, -0.0019205f, +0.0770350f,
  -0.0516291f, +0.0334240f, +0.1572340f, +0.0466176f, +0.0960108f, +0.0179230f, -0.1909865f, +0.2719947f,
  -0.2480579f, +0.1144293f, +0.1440018f, +0.2117023f, -0.1556558f, +0.2344358f, +0.1118620f, -0.2683332f,
  -0.3928671f, +0.0104400f, -0.0144023f, -0.1905064f, -0.1609861f, -0.1176987f, -0.0814418f, +0.0256410f,
  -0.1401357f, +0.1722392f, +0.1879097f, -0.1656437f, -0.1836699f, +0.0368884f, -0.0917740f, -0.1217519f,
  +0.2194384f, +0.1096209f, -0.3953522f, -0.0298589f, +0.1284025f, +0.0827433f, +0.0254168f, -0.2035790f,
  -0.2470875f, +0.1970922f, +0.0262939f, -0.0325456f, +0.4140059f, -0.0378934f, -0.0903756f, -0.1765398f,
  +0.1808371f, -0.0211653f, -0.1262544f, +0.2054953f, +0.1293802f, +0.0524289f, +0.0592962f, +0.0468612f,
  +0.2043886f, -0.0084408f, -0.3065514f, +0.3108354f, +0.0768847f, -0.0461863f, -0.3335812f, +0.0026754f,
  -0.0082274f, +0.1488889f, +0.4299572f, +0.0870755f, -0.0533667f, -0.0706006f, +0.3202372f, -0.1072622f,
  +0.0021760f, +0.0045709f, -0.0748357f, -0.0867543f, -0.6406696f, -0.3580571f, -0.1211877f, +0.3180504f,
  +0.3363377f, -0.0550305f, -0.5898061f, +0.1491212f, +0.0768824f, +0.1665742f, +0.1251249f, +0.2756266f,
  -0.0073085f, -0.1434541f, -0.2819502f, -0.1900084f, +0.3272968f, -0.4963748f, -0.0429210f, +0.1389102f,
  -0.2694289f, +0.0070945f, -0.2323883f, +0.4856490f, +0.1198166f, +0.1833841f, -0.0586139f, +0.0141970f
);

const float biases[4] = float[4](
  +0.0103598f, +0.0416245f, +0.0229172f, -0.0144825f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer19 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1868426f, +0.0849796f, +0.1055861f, +0.2067375f, -0.0059986f, -0.0978684f, +0.0615050f, -0.0422331f,
  -0.0083638f, +0.1459688f, -0.3197299f, +0.1514153f, -0.0840521f, -0.1412862f, -0.1131579f, +0.1543262f,
  -0.1328804f, +0.0616201f, -0.2253230f, +0.1823595f, +0.0720071f, -0.0877598f, +0.0751540f, -0.1196779f,
  -0.0207855f, +0.0171400f, -0.1485023f, +0.0112228f, +0.1259593f, -0.0253931f, +0.0622801f, +0.1179234f,
  -0.0059041f, +0.2983683f, -0.2996048f, -0.3495490f, -0.3160124f, +0.1965727f, -0.1397319f, -0.3488605f,
  +0.0156706f, +0.0145694f, +0.1934219f, -0.0386129f, -0.0733755f, +0.0042865f, +0.2580479f, -0.4010475f,
  -0.2029646f, +0.0679894f, -0.0787363f, +0.0562528f, -0.2265326f, -0.0086614f, -0.1058719f, -0.2408403f,
  -0.4633891f, -0.3419793f, -0.3531756f, -0.0276141f, -0.4286022f, +0.1921732f, -0.1313948f, -0.0138136f,
  -0.2789000f, -0.1405080f, -0.2007734f, +0.2384325f, -0.5791754f, +0.0937961f, +0.1937580f, -0.1065004f,
  -0.4970709f, +0.1950806f, +0.1337611f, -0.2793215f, -0.1337434f, -0.0635843f, +0.2168566f, -0.0350788f,
  -0.0937579f, +0.0995814f, +0.1725575f, -0.0783808f, +0.0926999f, +0.1329131f, -0.1053737f, -0.3790625f,
  +0.0039394f, -0.1437817f, +0.2456709f, +0.0542351f, -0.0950993f, +0.1402630f, +0.0717354f, +0.0812857f,
  -0.0957302f, +0.1380410f, +0.2081102f, -0.0216147f, +0.1744621f, +0.1214106f, -0.1021508f, +0.0672375f,
  -0.3236454f, +0.0701907f, -0.0027733f, -0.0155770f, -0.0272565f, +0.1352052f, -0.0015232f, -0.0633118f,
  +0.2032754f, -0.0721535f, +0.3669428f, -0.1339969f, -0.4481248f, -0.0284959f, +0.1463914f, -0.1942987f,
  -0.3091856f, -0.0913407f, +0.4649742f, -0.0892386f, -0.0669387f, +0.1529614f, -0.0767504f, -0.0484024f,
  -0.0212983f, +0.2282377f, -0.0582195f, +0.0564987f, +0.2498792f, +0.1869158f, -0.0157972f, -0.2829786f,
  +0.2398624f, -0.0053804f, +0.3633736f, -0.1551375f, -0.1415894f, -0.0043167f, -0.0354790f, -0.1472884f,
  +0.0630242f, +0.1775224f, -0.1485553f, -0.2195979f, -0.1416151f, -0.1348107f, +0.1790471f, +0.1256096f,
  -0.1338951f, +0.1988898f, +0.0462546f, -0.0537427f, -0.0405927f, +0.0711741f, -0.1322383f, -0.0694031f,
  +0.0484250f, -0.2556025f, -0.1419395f, +0.4232067f, -0.2614062f, -0.2047336f, -0.2338715f, -0.1311093f,
  -0.1361380f, -0.1481015f, -0.0518020f, +0.0572349f, -0.2547391f, -0.1711375f, -0.0135374f, +0.0632316f,
  +0.0323949f, -0.5453935f, +0.1096360f, -0.0081520f, -0.2103905f, -0.2097445f, -0.0466868f, -0.4216561f,
  -0.2573624f, -0.1391335f, -0.2054007f, +0.2431392f, -0.3542294f, -0.2042186f, -0.1575885f, -0.1034853f,
  -0.0431011f, +0.0357576f, -0.2353606f, +0.0106925f, +0.1248901f, -0.2519469f, +0.1032335f, -0.2053653f,
  +0.0098604f, -0.0455049f, +0.0047623f, +0.1941776f, -0.1557059f, -0.1143983f, -0.1445386f, -0.3618483f,
  -0.1320365f, +0.1969718f, -0.0554148f, +0.2761406f, -0.2469974f, -0.0141596f, +0.1676068f, -0.4442893f,
  +0.1138567f, +0.0585843f, +0.3105328f, +0.0713053f, +0.2184200f, +0.0345993f, -0.1655147f, +0.2428343f,
  +0.0396580f, +0.0715180f, +0.1540590f, -0.2565823f, +0.1339940f, +0.1568490f, +0.0465640f, +0.4593323f,
  -0.0141659f, -0.0312291f, +0.2462225f, -0.1860198f, +0.4545008f, -0.2358843f, +0.0059895f, -0.0708069f,
  +0.0985992f, -0.0835150f, -0.1646828f, -0.1365629f, +0.1990813f, -0.1014074f, +0.0011020f, +0.1475068f,
  +0.1383860f, +0.0055738f, +0.1580488f, -0.1184874f, +0.1171685f, +0.3312714f, -0.1137416f, +0.6710848f,
  -0.0971559f, +0.3342942f, +0.4510651f, +0.0572416f, -0.0011165f, +0.1598808f, -0.0933825f, +0.0618933f,
  +0.0376288f, +0.1685739f, +0.0005575f, +0.2011561f, -0.1079964f, -0.0237936f, +0.1739018f, -0.0692491f,
  +0.0622575f, +0.1514569f, -0.2171892f, +0.0831114f, +0.1704040f, -0.0166531f, +0.1486343f, -0.2416604f,
  -0.1723456f, +0.1368072f, -0.0555448f, -0.0454969f, -0.2174023f, +0.1293607f, -0.0337236f, -0.5113794f
);

const float biases[4] = float[4](
  -0.0009935f, +0.0328496f, +0.0150043f, +0.0267089f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer20 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0940254f, -0.1542439f, +0.3589063f, -0.1244406f, +0.0542144f, -0.0516074f, +0.1202888f, +0.1675938f,
  -0.1924973f, -0.3792776f, +0.4185677f, -0.1127055f, -0.3243750f, +0.0645903f, -0.1444464f, +0.1522078f,
  +0.2934019f, -0.0495490f, +0.1050434f, -0.4554662f, -0.0616373f, -0.0144136f, -0.0813735f, +0.0595532f,
  +0.0885459f, -0.1051720f, +0.4227087f, -0.3915067f, -0.0443693f, +0.1765005f, +0.0787345f, +0.0712228f,
  +0.1329954f, +0.4967622f, +0.0233383f, +0.0698276f, -0.0195924f, +0.0890152f, +0.0783265f, +0.0695184f,
  +0.1122325f, +0.1248707f, -0.0249783f, +0.2136275f, -0.0919117f, +0.0651009f, +0.2190657f, +0.0249582f,
  +0.3491278f, -0.0938929f, +0.0576342f, -0.1549553f, -0.0031979f, +0.0797550f, +0.0088816f, +0.1508886f,
  -0.1365070f, +0.1170612f, +0.4080878f, -0.0447204f, -0.1722682f, +0.2283329f, +0.1200156f, -0.0198626f,
  -0.0876794f, +0.3566290f, -0.0377868f, +0.1667990f, -0.0650370f, +0.2130940f, +0.0979009f, -0.0662700f,
  -0.0181808f, -0.2196016f, -0.0046947f, -0.0418257f, +0.1877313f, -0.1036996f, -0.0235215f, -0.0003187f,
  +0.0711878f, +0.0661356f, -0.0565162f, +0.0921683f, -0.0117557f, -0.3180566f, -0.0776721f, +0.0987389f,
  -0.2575103f, +0.2336347f, -0.1930772f, -0.1051105f, -0.1773691f, +0.0086808f, -0.1700445f, -0.1246301f,
  -0.0743666f, -0.0138674f, -0.0513057f, +0.1909877f, +0.3389072f, +0.0157942f, -0.0719347f, +0.2305927f,
  -0.0231031f, +0.2779553f, -0.2640915f, +0.1675459f, +0.2434175f, -0.2802993f, +0.0696988f, +0.2016005f,
  -0.0672401f, -0.4653313f, -0.0166522f, +0.1757742f, +0.1406729f, +0.3743291f, +0.1821944f, +0.0465082f,
  +0.1604361f, -0.0260437f, -0.1931234f, -0.0789862f, +0.2627241f, +0.0226858f, +0.0091810f, +0.1814265f,
  -0.0383056f, -0.0179479f, +0.0126002f, +0.1671047f, -0.0856473f, +0.0491257f, +0.2582561f, +0.2092091f,
  -0.0649733f, -0.2704874f, +0.0787781f, -0.1110005f, -0.2810860f, +0.2870668f, +0.1565488f, -0.1421004f,
  +0.0728735f, -0.1785173f, +0.0504563f, -0.1721945f, +0.4170612f, +0.1581760f, +0.0681842f, -0.0127008f,
  -0.3104375f, +0.0794309f, +0.2579140f, +0.1091761f, +0.4544867f, +0.0827998f, +0.1905417f, +0.2479419f,
  -0.0602087f, +0.2568574f, +0.2454682f, +0.1658390f, +0.2108295f, +0.0204708f, +0.2332315f, -0.0684762f,
  -0.0559317f, -0.1252053f, +0.0733450f, -0.2088979f, +0.1734183f, -0.3487357f, -0.0487055f, +0.1102370f,
  +0.0923500f, -0.1352930f, -0.0445411f, +0.5438696f, +0.3307403f, -0.0858338f, +0.1765269f, +0.0561652f,
  -0.0308322f, +0.1835618f, +0.0772341f, -0.0189248f, -0.1623574f, -0.0000175f, +0.1429679f, +0.2545321f,
  -0.1010486f, +0.0787021f, -0.2578540f, -0.0081549f, +0.1814446f, -0.1596315f, -0.2977868f, +0.1132720f,
  +0.1909911f, +0.1370566f, +0.0255769f, +0.2085625f, -0.0537170f, -0.3326253f, +0.1309153f, +0.0565042f,
  +0.1946788f, +0.1771920f, +0.1474432f, -0.2234540f, +0.0625950f, +0.1013800f, +0.0405794f, -0.2222623f,
  +0.1095138f, +0.0162681f, +0.0533574f, +0.2943956f, +0.2834217f, +0.0516127f, -0.1237379f, +0.2082092f,
  +0.0118598f, +0.1440319f, +0.0115970f, +0.1976668f, +0.3503234f, -0.1482415f, -0.0549589f, +0.2110310f,
  -0.5406786f, -0.2531435f, -0.2224705f, +0.0624169f, -0.2495282f, -0.0716841f, +0.1198311f, -0.2587294f,
  +0.3734311f, -0.2309504f, +0.1167816f, +0.3261670f, +0.2439510f, +0.2251791f, +0.1075884f, +0.2130437f,
  +0.1384930f, +0.1059284f, +0.4828173f, -0.0645055f, -0.3063530f, +0.0911481f, -0.0657633f, -0.1136968f,
  -0.1240958f, +0.0342444f, +0.1163523f, -0.3114552f, -0.0457891f, -0.0591069f, -0.0285272f, +0.1480981f,
  +0.2186243f, -0.1997628f, -0.3886516f, +0.1278395f, +0.2516702f, +0.3068833f, +0.0176787f, +0.0350967f,
  -0.0878618f, -0.2825707f, +0.0113428f, -0.0821052f, -0.0199943f, +0.1607485f, -0.3312105f, -0.1710744f,
  -0.0307391f, -0.2808368f, +0.0528661f, +0.1239451f, -0.0000467f, -0.1115986f, +0.0176709f, +0.0019824f
);

const float biases[4] = float[4](
  -0.0656371f, +0.0389639f, -0.0245320f, -0.0164296f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer20 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0041595f, -0.0069109f, +0.3261707f, +0.3655706f, +0.2224044f, +0.2311013f, +0.1673867f, +0.2910163f,
  -0.2541643f, -0.1756246f, +0.0839441f, -0.4136783f, +0.0870168f, +0.0502921f, +0.1733999f, +0.0369813f,
  +0.1157848f, +0.0308201f, -0.1384146f, -0.0058929f, -0.0023147f, +0.1566751f, -0.1124766f, -0.1307118f,
  +0.1737977f, +0.1015581f, +0.1836149f, +0.2929647f, -0.2215693f, +0.3242666f, +0.1805453f, -0.0485592f,
  -0.1102140f, -0.2661208f, -0.0833367f, +0.0609120f, -0.1496120f, +0.0266470f, +0.2481635f, +0.0201479f,
  -0.0566343f, +0.5106249f, -0.1611390f, +0.0278687f, -0.1102336f, +0.0601377f, -0.1560787f, +0.2224695f,
  +0.1882313f, -0.0192733f, -0.0811461f, -0.0288359f, -0.2972682f, +0.1221722f, +0.0825424f, -0.2798798f,
  -0.0697764f, -0.0188498f, +0.1153308f, -0.1093113f, -0.0529118f, +0.1080676f, -0.1566508f, -0.3082643f,
  -0.0715157f, +0.4358511f, -0.1926704f, -0.1581350f, +0.0177741f, -0.0434240f, -0.2494288f, -0.3321084f,
  -0.0363459f, +0.2327654f, -0.2105320f, +0.0904635f, +0.5591870f, +0.0188973f, +0.1427826f, -0.3669764f,
  -0.0636061f, +0.3478382f, +0.0414266f, +0.2071762f, -0.0209399f, +0.0960209f, +0.1462763f, -0.1260908f,
  -0.0858118f, -0.2757483f, +0.0545371f, +0.0835893f, +0.3235759f, +0.1624620f, +0.0123823f, -0.2115521f,
  +0.1431648f, +0.0474423f, -0.2663228f, -0.0249289f, -0.0044409f, -0.1612453f, +0.3230483f, +0.0169707f,
  +0.0633745f, -0.3133010f, -0.0184489f, -0.1850009f, -0.0703174f, -0.2094019f, +0.3309195f, -0.1880324f,
  +0.1738245f, -0.0327412f, -0.1941718f, +0.1204413f, -0.1088713f, +0.2400128f, -0.0547251f, -0.2045170f,
  -0.1172454f, -0.0976049f, -0.0345839f, -0.1145980f, -0.1016816f, +0.2407335f, -0.1009817f, -0.0095698f,
  -0.0851954f, +0.0500717f, -0.1337436f, -0.1768389f, +0.0017656f, -0.2239743f, -0.1452291f, +0.0342862f,
  -0.0662138f, +0.1066249f, +0.0536822f, -0.1589427f, -0.0173094f, -0.1474114f, -0.0255332f, +0.0234028f,
  -0.1312289f, +0.0781051f, -0.1937387f, +0.0710853f, +0.0176198f, -0.0642236f, +0.0341594f, -0.0585510f,
  +0.2567545f, +0.1686239f, -0.0139439f, +0.0409325f, +0.1453996f, +0.1623667f, +0.2386246f, -0.3162623f,
  -0.1451075f, +0.2382122f, +0.0620453f, -0.3341092f, +0.2133138f, +0.1156715f, -0.0914199f, -0.1072281f,
  -0.4091885f, -0.0547269f, +0.0725147f, +0.2474930f, -0.1330173f, +0.2181470f, -0.0740471f, +0.0290574f,
  +0.0082822f, +0.1688556f, +0.0165788f, +0.2570309f, +0.2990314f, -0.0048493f, -0.0375660f, -0.2813873f,
  +0.0991871f, -0.2661881f, -0.0851488f, +0.0608927f, -0.1192885f, -0.2917990f, -0.1293209f, -0.0046666f,
  +0.4142876f, +0.0202006f, -0.3346550f, -0.0055221f, -0.0934772f, -0.0531243f, +0.0046313f, -0.2012195f,
  +0.0651133f, -0.0364826f, +0.2591676f, -0.1175826f, -0.0268032f, +0.0548115f, +0.0461305f, +0.1829436f,
  -0.2173495f, -0.0172386f, -0.1850381f, -0.2066533f, +0.1173893f, -0.0665900f, -0.0164845f, +0.1198315f,
  -0.1262257f, +0.0495999f, -0.1594537f, -0.0340665f, +0.1483078f, +0.1270422f, -0.3021190f, -0.0514613f,
  +0.0088817f, -0.1504810f, +0.0351558f, -0.2000045f, +0.2663752f, +0.0423299f, -0.0516785f, +0.1032123f,
  +0.2431514f, -0.3154993f, +0.2492410f, +0.0356626f, +0.1946658f, +0.1504958f, +0.1213926f, -0.3492790f,
  +0.0764817f, -0.0482654f, -0.1697530f, -0.0580023f, -0.1236856f, +0.1727088f, +0.0665624f, +0.0814583f,
  -0.3003703f, +0.0404954f, -0.0664487f, +0.0514896f, +0.2224861f, -0.0017836f, -0.1459153f, -0.1560866f,
  -0.5290610f, -0.4512649f, -0.0999028f, +0.0637549f, +0.0736582f, +0.4280992f, +0.2917411f, +0.4716845f,
  +0.0591756f, +0.0256398f, -0.1705682f, -0.0546023f, -0.1659147f, -0.0745186f, -0.0529724f, -0.1465208f,
  -0.1394118f, +0.0289061f, +0.1844651f, -0.3261387f, -0.1520725f, -0.0780036f, -0.0085636f, -0.0615844f,
  -0.0607785f, +0.2119036f, -0.1352711f, +0.2609428f, -0.1077223f, -0.1903920f, -0.2662365f, +0.1138723f
);

const float biases[4] = float[4](
  -0.0256464f, -0.0177642f, +0.0346405f, -0.0086411f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer21 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1389862f, -0.0334190f, -0.1975934f, -0.0358168f, -0.2965512f, -0.0729368f, +0.1339489f, -0.1165045f,
  -0.0916377f, +0.0009502f, +0.0311552f, -0.0664785f, +0.2460022f, +0.0346077f, -0.0865252f, +0.0623593f,
  -0.0175596f, +0.0886068f, +0.0516211f, +0.2941396f, +0.1731983f, -0.0127386f, -0.0666595f, +0.0268520f,
  -0.0702449f, +0.1717097f, -0.0611219f, -0.2091291f, -0.0971205f, +0.1379079f, +0.0870294f, +0.2538257f,
  +0.2397544f, +0.2343055f, +0.0201861f, +0.1053442f, -0.5619279f, -0.0566080f, +0.3748999f, +0.0597779f,
  -0.0334992f, -0.2719793f, -0.3057762f, +0.4453204f, -0.1172594f, -0.0817512f, -0.0560477f, +0.1441214f,
  -0.1590934f, -0.1564496f, -0.2613546f, -0.0648146f, -0.1148520f, +0.0224016f, +0.0660512f, +0.0034669f,
  +0.0186504f, +0.0899286f, -0.0798175f, +0.0675050f, +0.2035598f, -0.0239064f, +0.0604679f, -0.3822513f,
  -0.2751517f, -0.0875960f, +0.0777123f, +0.1063047f, +0.0342060f, +0.0348693f, +0.1561508f, +0.1524382f,
  +0.0978662f, -0.1218568f, -0.3444341f, +0.0202791f, +0.1189046f, -0.0659104f, -0.0330882f, +0.1360312f,
  -0.2861632f, -0.4332270f, -0.1167775f, -0.2769359f, +0.0298416f, +0.1709221f, +0.0444911f, +0.3710814f,
  -0.1138119f, -0.0181066f, +0.1746555f, -0.2337230f, +0.3374023f, -0.1800261f, -0.0283722f, -0.1041777f,
  +0.2281925f, -0.2361879f, -0.2989862f, +0.0011234f, -0.1182451f, -0.2119572f, +0.1463389f, -0.2337361f,
  -0.0295491f, -0.0598771f, -0.5091804f, -0.3856004f, +0.2405142f, -0.2287522f, +0.1715975f, -0.0182696f,
  -0.2070896f, -0.0985512f, +0.2068654f, -0.0946529f, -0.3254389f, -0.0780768f, -0.1659605f, -0.3583558f,
  +0.2944083f, +0.0874708f, +0.1894249f, -0.0829948f, +0.1266413f, -0.0128148f, -0.0721491f, +0.0153756f,
  +0.0727012f, +0.0146697f, +0.0675183f, +0.1228743f, +0.2658253f, +0.0908774f, -0.1288885f, -0.1620366f,
  +0.2669145f, +0.2429426f, +0.0672070f, -0.2568485f, -0.0843845f, -0.2756231f, +0.0372040f, -0.1682962f,
  -0.1188144f, +0.3012042f, +0.1270461f, -0.1646691f, -0.1544657f, +0.1149322f, -0.0112445f, -0.0704603f,
  +0.0882216f, -0.1274217f, +0.1572660f, -0.1680216f, -0.0954792f, +0.1201048f, +0.0442854f, +0.1158945f,
  +0.0101690f, +0.0655365f, +0.0091565f, +0.1118579f, +0.0204233f, -0.1021553f, -0.1614891f, +0.0291453f,
  -0.1705520f, +0.1139633f, +0.2939620f, -0.1663968f, -0.1322776f, -0.0254987f, -0.1010850f, +0.2462347f,
  -0.1604579f, -0.2557289f, -0.2724465f, +0.5491982f, -0.1850819f, +0.0952326f, -0.3349368f, +0.1571177f,
  -0.1234503f, -0.1432498f, -0.2960868f, +0.1294588f, +0.2602311f, -0.0510910f, +0.1803070f, +0.0037153f,
  -0.2577861f, -0.0868354f, +0.1836875f, -0.0908209f, -0.0763210f, +0.1236629f, +0.0099503f, -0.0276399f,
  -0.0436892f, -0.0110527f, -0.1791965f, -0.0798012f, -0.3155382f, +0.0812570f, +0.0223890f, +0.0636991f,
  -0.1809313f, -0.0908231f, +0.0177014f, +0.2131207f, -0.0819873f, +0.0133064f, -0.2494379f, +0.1536278f,
  +0.0760542f, +0.1847675f, +0.0483709f, +0.1014197f, -0.0547743f, +0.1748885f, +0.2225860f, -0.1731511f,
  -0.2551492f, -0.0487798f, -0.0288964f, +0.3836388f, -0.2600335f, +0.0090019f, +0.0000639f, +0.3026522f,
  +0.0933526f, -0.1120132f, -0.0847139f, +0.1994220f, +0.0790944f, -0.1311854f, -0.2531381f, +0.2505421f,
  +0.2417810f, +0.0406164f, -0.5163997f, +0.0112647f, +0.1289828f, -0.0547581f, -0.1064829f, -0.0132925f,
  -0.3316879f, +0.1587589f, -0.1880465f, +0.2490726f, -0.6948046f, -0.1778314f, +0.2970737f, +0.0851894f,
  +0.1015393f, -0.2298985f, -0.1828139f, +0.0861935f, +0.3867962f, -0.0086205f, -0.0160490f, +0.1453008f,
  -0.0041437f, -0.2322275f, -0.3151178f, +0.0199343f, +0.0218922f, +0.0348938f, -0.2788212f, -0.2403205f,
  -0.0441292f, +0.1962253f, +0.1682324f, -0.0403137f, -0.6056139f, -0.1017858f, +0.5809386f, -0.4827958f,
  -0.3059368f, -0.0252690f, -0.0377573f, +0.2694354f, +0.1110658f, +0.1395101f, -0.1822485f, +0.2076361f
);

const float biases[4] = float[4](
  -0.0679109f, -0.0365830f, -0.3620277f, -0.0249492f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer21 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0850342f, -0.0732645f, +0.1186427f, +0.0992961f, -0.0623000f, -0.0630831f, -0.0328059f, +0.1235630f,
  +0.0611226f, +0.0635219f, +0.2349035f, +0.0766317f, +0.4076684f, -0.2690640f, +0.2587296f, -0.0240614f,
  -0.1354688f, +0.1262373f, +0.1813331f, +0.1006451f, -0.1469070f, +0.0329100f, +0.1206386f, -0.2906695f,
  +0.0199728f, +0.3674932f, +0.1257669f, -0.0345649f, +0.3596519f, +0.1652891f, -0.0086406f, +0.1791506f,
  -0.1165053f, +0.1815055f, +0.3411863f, -0.0401369f, -0.4847918f, +0.0139258f, +0.1765344f, -0.1309788f,
  -0.1099233f, +0.1725891f, -0.0019206f, +0.2237653f, -0.0897437f, -0.0107595f, -0.2338936f, +0.2794238f,
  -0.0049465f, -0.0436537f, +0.0638260f, +0.1884717f, +0.2763937f, -0.0003979f, -0.2218350f, -0.1754806f,
  +0.2390803f, +0.0117856f, -0.0960804f, -0.2326232f, +0.2151167f, +0.1943936f, -0.3039608f, -0.0134907f,
  +0.1077623f, -0.0024299f, +0.0333942f, -0.1452837f, -0.1139482f, -0.0674358f, -0.1930201f, +0.0583783f,
  +0.0924323f, +0.0093161f, -0.1217704f, +0.2150480f, +0.1462655f, -0.2021249f, -0.2659145f, +0.0867267f,
  +0.2886398f, +0.0218475f, -0.1049283f, -0.0657286f, +0.0083658f, +0.2120400f, -0.1207027f, -0.3625230f,
  +0.1536266f, -0.1908811f, -0.0145188f, -0.1760891f, +0.0311281f, -0.1187689f, -0.0931857f, +0.0905448f,
  -0.0469999f, +0.2948318f, +0.0637300f, -0.0653357f, -0.2015053f, -0.1733336f, +0.0331081f, +0.0233852f,
  +0.1344275f, -0.0163513f, -0.3154867f, -0.0578356f, -0.0915803f, +0.0267654f, -0.1302492f, -0.0175890f,
  +0.2833186f, +0.1761174f, +0.0052864f, -0.2884029f, -0.2280483f, -0.1217340f, -0.2828667f, -0.4140646f,
  +0.0430395f, -0.0237160f, +0.2417499f, +0.0139252f, -0.1236810f, -0.1509747f, +0.1710899f, -0.0940340f,
  -0.1406199f, +0.2705891f, +0.1234244f, +0.1095780f, +0.2219213f, -0.3412870f, -0.0462548f, +0.0423948f,
  +0.0148562f, -0.0980797f, -0.0108521f, +0.1587650f, +0.3519910f, +0.0017913f, -0.0622888f, -0.4615262f,
  +0.2719446f, +0.0730953f, -0.1778120f, +0.1371748f, -0.0346677f, -0.2044531f, +0.0181085f, -0.3826532f,
  -0.0769747f, -0.1452960f, -0.1431052f, -0.0115525f, +0.1147790f, -0.1638499f, +0.0904109f, -0.2387969f,
  +0.0024850f, +0.0560300f, -0.0655287f, +0.1772049f, +0.4280141f, -0.0255088f, -0.0604182f, +0.2159084f,
  -0.1537239f, -0.1208254f, -0.2170053f, +0.3438738f, -0.0044235f, -0.2362638f, -0.1749859f, +0.3084206f,
  +0.1016025f, +0.0039473f, -0.2336121f, +0.1307469f, +0.2576873f, -0.2690164f, -0.1164070f, +0.0873806f,
  -0.1791967f, +0.2581729f, -0.4193415f, +0.2808833f, +0.3759588f, -0.0544001f, -0.0330429f, -0.1244227f,
  +0.3128362f, +0.0405883f, -0.0479968f, +0.2833490f, -0.0010193f, -0.0808209f, +0.1056907f, -0.0835491f,
  +0.3227665f, +0.0078618f, -0.2733360f, +0.2281578f, -0.2903004f, -0.0285223f, -0.2039608f, -0.0449721f,
  -0.0617777f, -0.1434368f, -0.3962651f, -0.0714556f, +0.4184109f, -0.1808302f, +0.1304688f, -0.4609389f,
  -0.2781923f, -0.0580227f, +0.1218452f, -0.1500848f, +0.0458439f, +0.2778883f, +0.0227952f, -0.1675355f,
  +0.3542537f, +0.3683633f, +0.0050617f, -0.1201286f, +0.5209567f, -0.2071413f, +0.0533548f, -0.0653677f,
  +0.2317593f, +0.0168868f, -0.2442057f, +0.0038803f, -0.0314401f, +0.0836393f, -0.1127451f, -0.0158364f,
  -0.5516134f, +0.0621824f, +0.3332561f, +0.0471133f, +0.1551890f, +0.1294238f, +0.2515249f, +0.2015547f,
  -0.1202213f, +0.0164096f, -0.0037606f, +0.1463035f, -0.0328305f, -0.1467955f, -0.1558817f, -0.3131676f,
  +0.1130244f, -0.1179029f, -0.0689860f, +0.2398017f, +0.2661514f, +0.0412805f, +0.0119987f, +0.1758464f,
  +0.1999724f, -0.0004185f, -0.0790330f, -0.1998923f, +0.1208962f, +0.0447845f, +0.0307342f, -0.0818979f,
  -0.2353377f, -0.0979508f, +0.0350704f, -0.0650926f, +0.3722738f, -0.0031809f, +0.1603322f, -0.0927943f,
  +0.1343508f, -0.0111273f, -0.3117284f, -0.1111863f, -0.1325860f, -0.1082968f, +0.0284318f, +0.0261003f
);

const float biases[4] = float[4](
  +0.0337151f, -0.0032707f, +0.0066649f, -0.0519558f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer22 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1356968f, +0.0920125f, -0.0652504f, -0.0104950f, -0.0960712f, -0.1662002f, +0.1680674f, +0.2142406f,
  +0.2139980f, +0.1999128f, +0.2190476f, -0.0553862f, -0.0014826f, +0.0418819f, +0.2516890f, -0.0775614f,
  -0.2991142f, +0.1892542f, +0.1317037f, -0.4058526f, +0.1106448f, +0.0666856f, +0.1663450f, -0.2369467f,
  +0.1686510f, +0.2596279f, -0.2257177f, -0.0527158f, -0.1492476f, +0.0089821f, +0.0297835f, +0.0302621f,
  -0.1387418f, +0.3139528f, +0.6025188f, +0.0013965f, +0.2901594f, +0.1249104f, +0.2946798f, +0.3179240f,
  +0.2350225f, +0.2256849f, +0.3163418f, -0.4477638f, +0.1103323f, +0.2421417f, +0.5009333f, +0.1334897f,
  +0.2569632f, +0.0558790f, +0.0037668f, +0.1842660f, +0.0343422f, -0.1028876f, -0.0262765f, +0.1150358f,
  +0.0971688f, +0.3476929f, +0.0445421f, -0.2638399f, -0.2814114f, -0.2748923f, +0.1853824f, -0.0801542f,
  +0.0713068f, -0.0648238f, +0.2924578f, -0.1043272f, +0.2253251f, -0.0243758f, +0.3668563f, -0.1100223f,
  -0.0360184f, -0.2181488f, +0.1716890f, -0.2790220f, +0.1736674f, +0.1184286f, -0.1923688f, -0.1095881f,
  -0.3107377f, -0.2096937f, +0.0349090f, +0.3631012f, -0.0371864f, -0.0106186f, +0.0806061f, +0.5102311f,
  -0.1069594f, -0.0841832f, +0.0958569f, +0.1570986f, -0.1269843f, -0.3734518f, -0.3486517f, +0.3005503f,
  -0.0723888f, +0.1948817f, +0.1498417f, -0.1351546f, +0.1272833f, -0.0834239f, -0.1483018f, -0.2006229f,
  -0.1589538f, -0.2817688f, +0.1882683f, +0.5268224f, -0.0569052f, +0.1579059f, -0.1705504f, -0.0007183f,
  -0.1345897f, -0.3067941f, -0.0750122f, +0.2197765f, -0.0121510f, -0.0211395f, -0.4785728f, -0.0253868f,
  -0.0913676f, -0.1531585f, -0.2437590f, -0.1057067f, +0.1498800f, +0.1529790f, -0.1182413f, -0.0083745f,
  -0.1719403f, -0.3912483f, +0.1254130f, -0.1089528f, -0.1202263f, -0.0482960f, -0.0390824f, -0.3037358f,
  +0.0966192f, -0.1653767f, -0.0200850f, +0.3201316f, +0.0096712f, -0.0398681f, -0.2780760f, +0.0405700f,
  -0.0700187f, -0.0707593f, +0.2848383f, -0.2424434f, -0.1175227f, +0.3408408f, -0.1296940f, -0.1261283f,
  -0.1520849f, -0.2538724f, +0.2606730f, +0.1911330f, +0.2540911f, +0.1614237f, -0.1750950f, +0.2401391f,
  -0.1342818f, -0.0174387f, -0.0044462f, -0.4872321f, -0.3554721f, -0.2368444f, -0.2859394f, +0.0558149f,
  +0.5059345f, -0.0920690f, +0.1838909f, -0.0982180f, -0.0708569f, +0.0378403f, +0.2155691f, -0.1854844f,
  +0.1788468f, +0.1269895f, +0.3855244f, +0.3774335f, +0.0433967f, +0.1578843f, -0.2432273f, +0.0637029f,
  -0.2051853f, +0.0146907f, -0.0318874f, +0.0711169f, +0.0975304f, -0.0770374f, -0.2739575f, -0.1069951f,
  -0.0244863f, -0.0828690f, +0.1332442f, -0.2137766f, -0.2552464f, -0.1094700f, -0.0583146f, -0.0275444f,
  -0.1191552f, -0.0930839f, -0.0172588f, +0.0631719f, -0.0491245f, +0.1506596f, +0.1629345f, +0.1554899f,
  +0.0961201f, +0.2528552f, -0.1023173f, +0.1882277f, -0.1313587f, -0.1978746f, -0.1933320f, +0.0004479f,
  +0.2700359f, -0.0877323f, -0.1733280f, +0.0512664f, -0.1247740f, +0.1860675f, +0.0047065f, -0.0486301f,
  -0.1441866f, -0.1920137f, +0.0160360f, +0.0523342f, +0.1169041f, -0.2192135f, +0.0698532f, -0.0463817f,
  -0.1967337f, -0.2364357f, -0.2131281f, -0.1869661f, -0.0294720f, +0.0694534f, +0.3804434f, -0.0693704f,
  -0.2324797f, -0.0259150f, -0.7286322f, +0.2718001f, +0.3738922f, +0.1110505f, -0.2553642f, +0.2129699f,
  -0.5875061f, +0.1496788f, -1.1776242f, -0.1226461f, +0.2101064f, -0.0497849f, -0.0118986f, +0.5227692f,
  -0.0162985f, +0.0410809f, +0.0292814f, -0.1928455f, +0.1649575f, -0.2266128f, -0.3268212f, +0.1524197f,
  -0.0199055f, -0.3158877f, -0.1402397f, +0.2529053f, +0.1707022f, -0.0589334f, +0.1002552f, +0.1588389f,
  -0.2913719f, -0.1645751f, +0.0821741f, +0.0863441f, -0.2692722f, +0.0725195f, +0.0455637f, +0.1874979f,
  +0.0303960f, -0.0209123f, +0.1348862f, -0.3684107f, -0.1280027f, -0.3436411f, +0.1329787f, -0.2813906f
);

const float biases[4] = float[4](
  -0.0431013f, +0.0490151f, -0.0082986f, -0.0276608f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer22 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.3734221f, +0.1885715f, -0.0588375f, +0.2563623f, +0.2445544f, +0.0885994f, -0.0044483f, +0.4000616f,
  -0.3570197f, -0.0366638f, +0.0097656f, -0.3359378f, +0.1592345f, -0.2968301f, -0.0804266f, +0.1625285f,
  +0.1548711f, +0.0535356f, -0.1775093f, +0.0563648f, -0.1788982f, +0.0130484f, -0.1847079f, +0.1751028f,
  -0.2877667f, +0.0648155f, -0.1963753f, +0.1208414f, +0.0052989f, +0.2537574f, -0.2066572f, -0.1604623f,
  +0.2239982f, -0.0394451f, -0.1258992f, -0.0553945f, +0.3341569f, -0.0403086f, -0.1873575f, -0.0945655f,
  -0.3929317f, +0.2981544f, +0.1538943f, -0.2891639f, -0.1330158f, -0.1189142f, +0.2960930f, +0.0126641f,
  +0.0814292f, -0.1265728f, -0.1182407f, +0.0040867f, +0.0868223f, -0.1781264f, -0.0567494f, -0.1019912f,
  -0.4507053f, +0.1631379f, -0.0064908f, +0.0722914f, -0.2870017f, -0.1670029f, +0.0368149f, -0.0205272f,
  +0.1376716f, +0.0420248f, +0.1687071f, -0.3034517f, +0.0270668f, -0.2914644f, +0.1985634f, +0.0896036f,
  -0.0624509f, -0.0863063f, +0.2086290f, -0.1560411f, +0.1672419f, +0.0040922f, -0.0949778f, +0.1404057f,
  +0.1634167f, -0.1827159f, +0.0807800f, -0.0017134f, +0.0443553f, +0.2425996f, -0.0703137f, +0.0693894f,
  -0.0290158f, +0.0318354f, -0.3799928f, +0.0795397f, +0.1619182f, -0.0117761f, -0.0828070f, +0.1361200f,
  +0.0094582f, -0.1360835f, +0.0458963f, -0.1038661f, +0.2097991f, -0.1691402f, -0.1490507f, +0.1035572f,
  -0.0681102f, +0.1574041f, +0.0642108f, -0.3456358f, +0.1045787f, -0.3080502f, +0.3040583f, +0.0018588f,
  +0.1442891f, +0.1930781f, -0.0697235f, +0.1088205f, -0.1012273f, -0.0859603f, +0.5825641f, -0.4398551f,
  -0.0052346f, -0.2388321f, -0.1893065f, -0.2094655f, -0.0963074f, +0.0082257f, -0.0825110f, -0.2059617f,
  +0.0141927f, -0.1287728f, -0.2424892f, -0.3034393f, +0.1305741f, -0.0655510f, +0.1523425f, -0.0305064f,
  +0.2199141f, -0.1316327f, -0.3375007f, -0.4735015f, +0.1587013f, +0.2271578f, +0.3278819f, -0.0634590f,
  -0.0856909f, +0.0248979f, -0.0627461f, -0.0598835f, +0.3036724f, +0.0497027f, +0.0147453f, -0.1103956f,
  +0.2958089f, -0.0493265f, -0.4217052f, -0.0210296f, +0.0603327f, -0.0566117f, -0.0820825f, +0.1332248f,
  +0.1551735f, +0.1658582f, -0.1775607f, +0.0433947f, -0.0263575f, +0.0819359f, +0.0412043f, -0.1570407f,
  +0.1925448f, +0.0094324f, +0.0639473f, +0.0463477f, +0.2646652f, +0.0732886f, -0.2506762f, +0.1531766f,
  -0.1476478f, +0.0007404f, +0.3541979f, -0.3409294f, -0.3430420f, -0.2011211f, +0.2062905f, -0.1110275f,
  +0.1277284f, -0.1386381f, -0.0909218f, +0.2257892f, +0.3570462f, +0.1009340f, -0.1365770f, +0.1034101f,
  -0.1366289f, +0.2221590f, +0.0508102f, -0.1078206f, -0.2155394f, +0.0020991f, +0.1336397f, +0.0047734f,
  +0.3338175f, -0.0844505f, -0.3809765f, -0.2637132f, -0.2632608f, -0.2334436f, +0.0847127f, -0.0782218f,
  -0.0906250f, -0.0526750f, +0.0194284f, -0.1155344f, +0.0267335f, +0.0901012f, +0.1367607f, -0.1206274f,
  -0.0684046f, +0.3978799f, -0.0148475f, -0.0542755f, -0.0563540f, +0.1642432f, +0.4479205f, +0.1808435f,
  +0.2410112f, +0.2493903f, -0.0573539f, -0.0575696f, -0.0048821f, +0.3074306f, +0.0519626f, +0.2299745f,
  +0.1912333f, +0.3195975f, +0.1961502f, +0.2448643f, +0.2508834f, +0.3005109f, +0.1207903f, +0.2630153f,
  -0.1208888f, +0.4039256f, -0.2631708f, +0.0162029f, -0.0261933f, -0.0393062f, +0.1457928f, +0.3292110f,
  +0.2561268f, +0.1986786f, +0.2372761f, -0.3381895f, -0.0654859f, +0.1687055f, +0.1758886f, +0.1429468f,
  -0.0373641f, +0.0832041f, -0.0686303f, +0.2330869f, +0.0179639f, -0.0980608f, +0.3044588f, -0.0797309f,
  +0.1465342f, +0.2647683f, +0.3203671f, +0.1021928f, +0.1372156f, -0.1317665f, +0.0340026f, +0.2968308f,
  +0.0302217f, +0.0778274f, +0.1342736f, +0.0088175f, +0.1481132f, +0.0502305f, +0.0397396f, +0.1351603f,
  -0.0794245f, +0.0605452f, -0.1007341f, -0.4181213f, -0.1935798f, +0.2093495f, +0.4822266f, +0.0480180f
);

const float biases[4] = float[4](
  -0.0598317f, +0.0016298f, +0.0240525f, -0.0183330f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer23 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2663411f, +0.0326196f, +0.0826129f, -0.1597044f, -0.2673622f, -0.3164571f, -0.1945534f, -0.2787110f,
  +0.0598472f, +0.1956469f, +0.0571171f, +0.0523624f, -0.1244419f, -0.2619174f, -0.2378436f, -0.6193669f,
  +0.1554388f, +0.0022143f, -0.0998023f, +0.1978823f, -0.0019429f, -0.3252765f, -0.1956807f, +0.0968631f,
  +0.0220830f, +0.0444974f, +0.1541443f, -0.2807001f, -0.1737559f, -0.2038226f, +0.0761872f, +0.0917757f,
  -0.3598851f, +0.5744782f, +0.0369338f, -0.0127784f, -0.2170742f, -0.1771169f, -0.0059428f, -0.5046665f,
  -0.2692541f, -0.0481763f, -0.0571740f, +0.0611585f, -0.1640415f, -0.0413776f, -0.2166908f, -0.0103515f,
  -0.0133138f, +0.0013789f, +0.2138357f, +0.0235542f, +0.0700020f, -0.1109311f, -0.0310848f, +0.3039930f,
  -0.2505721f, -0.0199310f, +0.1239245f, +0.2115823f, -0.0226878f, +0.1547845f, +0.1583794f, +0.0463929f,
  +0.0262936f, -0.1021680f, +0.1085246f, -0.1351180f, +0.3473742f, +0.1752954f, +0.1241827f, +0.1636911f,
  +0.1302568f, +0.1647981f, +0.2903001f, +0.4726582f, +0.0152858f, -0.0730222f, +0.0483525f, -0.1307527f,
  +0.2201449f, -0.1699637f, +0.0908284f, -0.0291480f, +0.0264879f, +0.0746312f, -0.0293815f, -0.1520550f,
  -0.1218446f, -0.1543458f, -0.0191820f, +0.1197795f, +0.3282560f, -0.0559177f, +0.0677138f, -0.1672615f,
  -0.1019535f, -0.2882985f, +0.2326412f, +0.6296418f, +0.2544945f, +0.2782337f, +0.0807145f, -0.5121434f,
  -0.0299200f, +0.2495457f, -0.3457187f, +0.0679825f, +0.2723739f, +0.0428781f, +0.1548739f, -0.3455216f,
  -0.1211157f, +0.1699040f, -0.0146245f, +0.1684790f, -0.0431106f, -0.2564374f, -0.0836729f, -0.4708219f,
  -0.1812600f, -0.3214375f, +0.1342515f, +0.0639780f, +0.1913325f, +0.2307201f, +0.2612584f, -0.4656835f,
  +0.0687091f, +0.1963911f, +0.1052843f, +0.1426474f, +0.1908629f, -0.0690054f, -0.0653074f, +0.1472262f,
  -0.0103661f, -0.1071617f, -0.1136153f, +0.0030394f, +0.0761373f, -0.1529801f, -0.0208326f, -0.1234284f,
  +0.3087592f, +0.0106215f, +0.1749247f, +0.2342616f, -0.0269696f, -0.0259584f, -0.1835373f, -0.2050236f,
  -0.0299442f, -0.3031337f, -0.3556632f, +0.2067231f, -0.0102931f, -0.0085996f, +0.0950263f, +0.1238497f,
  +0.0552036f, +0.0547329f, -0.0555639f, -0.3294151f, -0.0554219f, +0.1231029f, +0.1752659f, -0.0043410f,
  +0.3843029f, -0.2449161f, -0.1194333f, +0.1100454f, -0.1858833f, +0.0023282f, -0.2113923f, -0.4294118f,
  -0.1797825f, +0.3065039f, +0.1557796f, +0.3448952f, +0.0074787f, -0.2967875f, +0.1398355f, +0.0962829f,
  -0.2439136f, -0.0911233f, -0.2049065f, -0.1134329f, +0.2773710f, +0.2626250f, +0.0898030f, +0.1081862f,
  +0.1892809f, -0.1918343f, -0.3191717f, +0.0478136f, -0.1841866f, -0.0080345f, -0.0908332f, +0.1224546f,
  +0.1026293f, -0.2419697f, -0.1669163f, -0.0283549f, -0.1534588f, -0.1466811f, -0.1117029f, +0.1848794f,
  +0.0088193f, -0.1353136f, +0.0504159f, -0.2437473f, +0.0626464f, +0.0638455f, +0.0430025f, -0.2050692f,
  +0.1522541f, +0.1977779f, +0.1716358f, -0.0728494f, +0.1798187f, -0.1765657f, -0.0446795f, -0.2728026f,
  -0.0213026f, -0.0380636f, -0.1833147f, -0.0661035f, +0.2113989f, -0.3178293f, -0.0451969f, +0.1006623f,
  -0.0887414f, +0.1626953f, -0.1269727f, +0.2336450f, +0.0982219f, -0.2563407f, -0.0818697f, -0.0674237f,
  +0.0618198f, -0.2483835f, -0.0193557f, -0.1138417f, -0.2260826f, -0.2981450f, +0.1354973f, -0.1708181f,
  +0.4798499f, -0.0393308f, -0.0300081f, +0.0059923f, -0.2939155f, +0.0622538f, +0.0250127f, +0.0265247f,
  +0.1570640f, -0.1572892f, -0.0133184f, -0.2213610f, +0.0177893f, -0.1762482f, +0.0517409f, -0.2249093f,
  -0.3303045f, -0.1742506f, -0.0422252f, +0.1702460f, +0.0022887f, +0.0490735f, -0.1027783f, -0.3207812f,
  -0.0970088f, +0.0649955f, -0.0599163f, +0.0099967f, +0.0701668f, +0.0507314f, -0.0572954f, -0.0852394f,
  -0.1228038f, -0.1810084f, -0.0604303f, -0.0231758f, -0.1079899f, +0.1340651f, -0.1130331f, -0.0984887f
);

const float biases[4] = float[4](
  -0.0340014f, -0.0294391f, +0.0658851f, +0.0224370f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer23 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1149567f, +0.0438637f, -0.0601182f, +0.1714946f, -0.1240105f, +0.2180668f, -0.0175067f, -0.4087226f,
  +0.0771474f, +0.1542577f, -0.0895075f, +0.0000651f, +0.1663374f, -0.1530287f, -0.0569145f, -0.4069078f,
  -0.1559047f, +0.1908427f, +0.0973550f, -0.0374616f, +0.1992927f, -0.1634899f, -0.3033766f, -0.2129372f,
  -0.0150796f, -0.0138751f, +0.1507781f, -0.0682633f, +0.1466950f, +0.1815239f, -0.1316646f, -0.1839090f,
  +0.0403993f, -0.1672131f, +0.1800023f, +0.0079502f, -0.1571803f, -0.0276447f, +0.0690255f, -0.1990671f,
  -0.0376290f, +0.0778824f, -0.0728226f, +0.0518690f, +0.2594612f, -0.0209602f, +0.0528241f, +0.0500308f,
  +0.1078648f, +0.2564876f, +0.2672594f, +0.0213599f, +0.0514917f, -0.2240941f, +0.0751653f, +0.0210666f,
  -0.2432141f, +0.1453326f, -0.0491401f, -0.0594398f, +0.1014150f, -0.0594072f, -0.1209070f, +0.0559908f,
  -0.1189737f, +0.0780931f, +0.0160548f, +0.1958818f, -0.1844779f, -0.0032703f, -0.0985950f, -0.1052273f,
  -0.1302265f, +0.0509062f, -0.2493522f, -0.0242964f, -0.2031009f, +0.1610844f, +0.1706868f, +0.1081207f,
  -0.0046223f, +0.4750116f, -0.0182171f, -0.1244552f, -0.2224163f, -0.1772147f, +0.1724495f, +0.5473728f,
  -0.0146853f, -0.2986545f, -0.2237471f, -0.0018568f, +0.0221934f, +0.1314732f, -0.1517500f, +0.1757357f,
  -0.3478155f, -0.2164188f, -0.2956996f, +0.1784002f, +0.0104641f, -0.0482919f, +0.1545403f, +0.1261239f,
  -0.0793550f, -0.2114714f, +0.1654076f, +0.1921170f, +0.0042167f, -0.0523992f, -0.0843278f, +0.1959194f,
  -0.0319695f, -0.1779473f, +0.0749200f, +0.6108607f, -0.1674205f, -0.1929905f, +0.1082644f, +0.3446451f,
  +0.1230540f, +0.0754888f, -0.1114564f, -0.1510538f, -0.0261915f, +0.1295152f, -0.1470598f, +0.2403498f,
  +0.0471977f, -0.0015516f, -0.1436899f, -0.1604581f, -0.0622827f, +0.0222895f, -0.0213553f, -0.0187443f,
  +0.1498222f, +0.0515867f, +0.0006170f, +0.2600653f, -0.2009526f, +0.2515802f, +0.1212155f, +0.3070348f,
  -0.0512385f, -0.2257064f, -0.2249018f, +0.0553336f, -0.0369441f, -0.0088556f, +0.1045850f, +0.4361617f,
  +0.0040602f, -0.0027880f, -0.0440604f, -0.1193510f, -0.2968286f, +0.0122260f, -0.0927407f, -0.1325082f,
  +0.1781784f, -0.1615368f, +0.1096994f, +0.2241932f, -0.0177953f, +0.0163360f, -0.0266786f, +0.3551118f,
  +0.0360838f, +0.0075025f, +0.0404232f, -0.0312430f, -0.1331199f, +0.0223389f, +0.0302936f, +0.3224273f,
  +0.2906221f, -0.0534042f, -0.2521554f, -0.1660304f, -0.1982359f, +0.4968768f, +0.1694355f, -0.1336788f,
  +0.0971518f, -0.0408471f, +0.1187333f, +0.0758516f, -0.1565482f, -0.0275986f, -0.1263341f, +0.1495889f,
  -0.0959630f, +0.1545379f, +0.1190791f, +0.1601866f, -0.1368169f, -0.2210300f, +0.0264701f, -0.0744386f,
  +0.2013140f, -0.0691587f, -0.1141106f, -0.2048330f, -0.0517116f, +0.1031282f, -0.0311355f, -0.1354950f,
  +0.0951250f, -0.0978942f, -0.0177537f, +0.0364394f, -0.2884403f, +0.1290069f, -0.1942406f, +0.1757761f,
  +0.1708504f, +0.2974500f, +0.0182918f, -0.1008750f, -0.3924561f, -0.3186952f, -0.0171549f, -0.4011059f,
  -0.0090954f, -0.1179387f, -0.1186913f, +0.0717354f, +0.2771608f, -0.1502102f, -0.1894858f, -0.0678853f,
  -0.1996592f, -0.0885322f, -0.1879013f, +0.1443012f, -0.1395233f, +0.0729489f, -0.0124189f, +0.0468318f,
  +0.0085376f, +0.0343174f, +0.2849076f, -0.3199545f, -0.3748891f, -0.2285952f, -0.1471541f, +0.4867812f,
  +0.1383424f, -0.1036313f, +0.0972860f, +0.2726241f, -0.0579081f, -0.0882739f, -0.1166245f, -0.0661318f,
  -0.1095355f, -0.2855637f, +0.0037931f, -0.0303766f, -0.1036278f, -0.2739784f, +0.2932131f, -0.2095647f,
  -0.3025745f, -0.3549311f, -0.0123548f, +0.0831892f, -0.1410573f, +0.0679444f, +0.0898445f, +0.2373036f,
  -0.0723908f, +0.0735684f, +0.0443382f, -0.3183965f, -0.2905737f, -0.0101364f, +0.0902408f, +0.1798983f,
  -0.0743091f, -0.1091176f, -0.2063371f, -0.1191206f, -0.2531845f, +0.0704814f, -0.1697855f, -0.0191124f
);

const float biases[4] = float[4](
  +0.0682759f, -0.1049044f, +0.0577655f, -0.0669780f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer24 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1493008f, +0.0860400f, +0.0494684f, +0.1590054f, +0.1916280f, -0.1817876f, -0.0842265f, -0.0876693f,
  +0.0419667f, +0.2279826f, -0.2866864f, +0.0173590f, +0.0805314f, -0.1523902f, -0.4971552f, +0.1428237f,
  +0.1279345f, -0.0080176f, +0.1327268f, -0.0781890f, -0.4211027f, +0.2143440f, +0.0925467f, +0.0053982f,
  -0.1580510f, +0.1118228f, +0.1337594f, +0.1931935f, +0.0559118f, +0.1808531f, -0.0537340f, -0.0509589f,
  -0.0601139f, +0.0047992f, +0.0385388f, +0.1431990f, +0.0849223f, +0.2121421f, +0.1347632f, -0.1324796f,
  +0.1447882f, -0.1691408f, -0.0543688f, +0.0902896f, -0.0805028f, +0.2675293f, +0.0675219f, -0.1647236f,
  +0.0364021f, +0.0487710f, +0.2220594f, +0.1265016f, +0.0860327f, +0.2652701f, -0.1378833f, -0.0912367f,
  +0.3571062f, +0.0054399f, +0.0810821f, -0.0922115f, +0.0195764f, -0.0414914f, +0.2043353f, +0.0103993f,
  +0.3872812f, +0.1408396f, +0.0524002f, -0.0657447f, -0.1898433f, +0.2120964f, -0.1139492f, +0.0504306f,
  +0.0472254f, -0.2928148f, -0.2371799f, +0.3074479f, -0.1049118f, -0.0760227f, -0.1461302f, -0.0121271f,
  -0.1396516f, -0.0634281f, +0.0900276f, +0.0712888f, -0.1861628f, +0.1541086f, +0.0568107f, -0.0025564f,
  +0.0135691f, -0.0171944f, +0.1542158f, +0.1173267f, +0.2615901f, -0.0159908f, +0.0129127f, -0.0296197f,
  -0.0640990f, -0.0488410f, +0.0767934f, +0.0404843f, +0.0428596f, -0.0471839f, -0.0217582f, -0.0506657f,
  -0.3791052f, -0.0579690f, -0.0687065f, +0.0556117f, -0.0221076f, -0.0645853f, -0.1238974f, -0.2264344f,
  -0.0541102f, -0.1420289f, -0.1287726f, +0.2485983f, +0.3418987f, -0.0263566f, +0.0234004f, -0.0672846f,
  +0.0047772f, -0.0968990f, -0.0766542f, +0.0191524f, +0.1906629f, -0.0029601f, -0.2455177f, +0.0802515f,
  -0.5726631f, -0.1945320f, -0.1306824f, -0.1034145f, -0.1083756f, -0.4450104f, +0.0057915f, -0.1423429f,
  -0.3977609f, +0.0589950f, -0.0125308f, +0.2913352f, -0.0579993f, +0.0128449f, -0.1314822f, -0.4102820f,
  -0.1219035f, -0.1221042f, -0.1498826f, -0.0151711f, +0.2238380f, -0.0692797f, -0.2759283f, +0.0292651f,
  -0.2987986f, -0.1095449f, +0.2995008f, -0.2645014f, +0.0872668f, -0.0604031f, -0.0504208f, -0.0970606f,
  -0.2711888f, -0.1510910f, +0.3427806f, +0.0615913f, +0.0551684f, -0.0620010f, -0.3335975f, -0.0472208f,
  -0.1087679f, -0.0841595f, -0.1396330f, -0.0803388f, +0.1428780f, -0.1479515f, -0.1393970f, +0.1132738f,
  -0.0585128f, +0.0087536f, -0.2687552f, -0.1451242f, -0.0866152f, +0.0324994f, +0.0414084f, -0.0179863f,
  -0.4183848f, +0.0464757f, +0.1659409f, +0.0039758f, -0.1953656f, +0.1657592f, +0.0320471f, -0.3582293f,
  -0.0510680f, -0.1751876f, +0.3068960f, +0.1764762f, +0.3091158f, +0.1787260f, +0.1284088f, -0.0242003f,
  -0.4878690f, +0.0119292f, -0.0892672f, +0.0749642f, +0.0229268f, -0.2237085f, +0.2987850f, +0.0595043f,
  -0.4391029f, -0.0803923f, +0.0151787f, +0.1917424f, +0.1262365f, -0.0280283f, +0.0767191f, -0.2941209f,
  -0.2759711f, -0.1595909f, +0.1212051f, +0.1879334f, -0.1421975f, -0.1996232f, -0.2325461f, -0.0822193f,
  -0.2613545f, -0.0244063f, -0.2163990f, -0.0241686f, +0.2478572f, -0.1880462f, +0.1139622f, +0.1193555f,
  -0.0534782f, -0.2923600f, -0.2134652f, -0.1224658f, -0.1258506f, -0.0430157f, -0.0413426f, -0.0048050f,
  -0.4969268f, -0.2062671f, -0.1206603f, -0.0007712f, -0.1069690f, -0.3896453f, -0.0417278f, -0.3359034f,
  -0.0290273f, -0.4730344f, -0.2537942f, -0.0618721f, +0.0774995f, -0.2727430f, -0.0169415f, -0.2251686f,
  -0.1136665f, -0.3074894f, -0.2866617f, +0.1685683f, -0.1743300f, -0.1823900f, -0.0984496f, -0.1904587f,
  -0.3192060f, -0.0866488f, -0.1165665f, +0.0700905f, +0.4002024f, -0.1669768f, -0.2458552f, -0.1333117f,
  -0.2825765f, +0.0875910f, -0.2682160f, +0.2354511f, -0.0372379f, -0.0384403f, -0.0151197f, -0.1158520f,
  -0.1930054f, -0.3203653f, -0.2261888f, +0.0743776f, -0.0543864f, -0.0388447f, +0.2198353f, +0.0948084f
);

const float biases[4] = float[4](
  -0.0024701f, +0.0239195f, +0.0055427f, -0.0339527f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer24 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1636896f, +0.1411127f, -0.3002905f, +0.0948441f, +0.0051280f, +0.1278988f, +0.1038133f, +0.2991951f,
  +0.0034008f, -0.0737417f, +0.0469547f, +0.1071920f, -0.2435306f, +0.1022822f, +0.1900658f, -0.0076452f,
  -0.1340071f, -0.1539274f, -0.0756609f, +0.1132291f, -0.1188195f, +0.0998265f, +0.3061537f, +0.0208957f,
  +0.0785433f, +0.0563178f, -0.0784400f, +0.0782050f, -0.1836674f, -0.0343131f, +0.1519446f, +0.1946957f,
  -0.1328722f, -0.3470096f, +0.0129659f, +0.3480391f, +0.0832182f, -0.1145828f, -0.0415073f, -0.1175975f,
  +0.0980070f, +0.0264927f, -0.0930631f, +0.0970255f, +0.1267723f, -0.4499680f, +0.0903767f, -0.2836413f,
  +0.0189003f, +0.0881415f, +0.2474151f, +0.1275948f, -0.1329394f, +0.0131563f, +0.0228818f, +0.1586729f,
  +0.0521448f, +0.4156910f, -0.2537339f, +0.2212602f, -0.2549152f, -0.1876700f, +0.1057021f, -0.1553257f,
  -0.0606059f, +0.3512922f, -0.0517488f, +0.0584341f, +0.1032544f, -0.3924419f, +0.0776453f, +0.0890270f,
  -0.1873489f, +0.2239804f, -0.1629554f, +0.0527892f, -0.0845865f, +0.0731069f, -0.0886115f, +0.2343593f,
  +0.0876832f, +0.0156185f, -0.0677611f, -0.2104536f, +0.0497192f, +0.1005814f, +0.0129534f, +0.2358468f,
  -0.0312099f, +0.0662880f, +0.1358696f, -0.0287101f, +0.1826849f, +0.1359329f, -0.0326349f, +0.0710072f,
  +0.1803716f, -0.0146029f, -0.0862053f, -0.1518172f, +0.0694872f, -0.0826669f, -0.1904943f, +0.3691958f,
  +0.0145455f, -0.4514751f, +0.0398474f, +0.1490237f, -0.1344282f, -0.0687909f, -0.1832786f, +0.1523302f,
  +0.2575867f, -0.2174726f, -0.0053369f, -0.0904733f, -0.1126737f, +0.3910410f, -0.1430972f, -0.0446282f,
  -0.0328074f, +0.2755152f, -0.0928622f, +0.1096830f, -0.0428387f, +0.0587270f, -0.1469211f, -0.3538513f,
  +0.1565360f, +0.1252676f, -0.2161926f, -0.1507289f, -0.0911906f, +0.0253370f, -0.0214287f, +0.1368524f,
  +0.1948066f, +0.2676708f, -0.0418110f, -0.3515530f, -0.2480208f, -0.0326223f, +0.0225888f, +0.2315440f,
  +0.1077423f, +0.1115948f, -0.1478434f, -0.0918315f, +0.0342539f, +0.0910588f, +0.0678529f, +0.2630306f,
  -0.2382904f, -0.0159272f, +0.1523588f, -0.0441282f, +0.1874005f, -0.1425365f, -0.0376725f, -0.0474766f,
  -0.0377783f, -0.0617422f, +0.1900870f, +0.0490552f, -0.1563702f, +0.0682065f, +0.0818811f, -0.1153911f,
  +0.1711960f, +0.1575516f, -0.0535682f, -0.1607095f, -0.2821908f, +0.1122986f, +0.2779362f, +0.0746695f,
  +0.2315991f, -0.2445149f, -0.2026651f, +0.0490951f, -0.1398961f, +0.0750773f, -0.0141496f, +0.1921196f,
  +0.0595658f, -0.0737334f, +0.0040797f, +0.0456604f, +0.2072773f, +0.0245322f, -0.1541502f, +0.0088003f,
  +0.1676588f, -0.0077947f, -0.0512966f, -0.0131701f, +0.0997023f, +0.0820164f, -0.0643801f, -0.0403660f,
  +0.0974100f, -0.0342292f, -0.0355541f, -0.2189910f, -0.1386504f, -0.1568384f, -0.1784669f, +0.3224041f,
  -0.1137800f, +0.0758506f, +0.1371103f, +0.0119635f, +0.0757755f, -0.1205674f, -0.0854290f, -0.0592283f,
  +0.0688823f, +0.0915723f, -0.0573318f, -0.2295377f, -0.2564746f, -0.0662000f, +0.0444946f, -0.0634022f,
  +0.1351518f, +0.1927955f, -0.3270264f, +0.0520194f, -0.2914043f, +0.0607649f, +0.1568431f, +0.3088376f,
  -0.1391827f, -0.1038047f, +0.1644887f, +0.0235328f, -0.0986094f, +0.1879361f, +0.0795372f, -0.0651958f,
  -0.1543454f, +0.0293710f, -0.1485229f, -0.3182893f, -0.1935223f, -0.0447127f, -0.0420384f, -0.0778068f,
  +0.2607688f, +0.0730261f, +0.0604431f, -0.3621893f, -0.1908578f, -0.3660346f, -0.0722410f, -0.1193692f,
  +0.0764559f, -0.1013918f, +0.0308217f, -0.1137809f, -0.0598522f, -0.1829154f, -0.0782378f, -0.2144931f,
  +0.1977309f, +0.2202917f, +0.0825525f, -0.1005723f, +0.0639573f, +0.3427553f, +0.1131431f, +0.0275659f,
  +0.3593091f, +0.3139259f, +0.1292786f, -0.0915346f, +0.2871563f, -0.0628964f, -0.2413505f, +0.1227177f,
  +0.2602755f, +0.1147798f, +0.1198108f, -0.2453753f, -0.1337400f, -0.0738484f, -0.0239857f, -0.1772071f
);

const float biases[4] = float[4](
  -0.0203403f, +0.0136254f, +0.0184315f, +0.0061682f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer25 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1232761f, -0.1743496f, -0.2016888f, +0.1194054f, +0.0848460f, -0.2262134f, -0.1651962f, +0.0896256f,
  +0.1487931f, +0.1983251f, +0.0958624f, +0.1067527f, -0.3536208f, -0.0146115f, +0.0516626f, -0.0341515f,
  -0.0517563f, -0.0048584f, +0.0479666f, -0.2106427f, +0.1217391f, -0.1192347f, +0.0641975f, +0.0225358f,
  -0.2251221f, +0.2297219f, -0.1425433f, -0.1660910f, -0.2223770f, -0.1377889f, +0.0721527f, -0.1980382f,
  -0.0350366f, +0.2184371f, +0.3867914f, +0.2914777f, -0.3777916f, +0.2839628f, -0.2545694f, -0.0568987f,
  +0.1400769f, +0.1284313f, +0.1349708f, +0.1943487f, -0.1302074f, +0.2001503f, +0.0395347f, -0.4457580f,
  -0.1636326f, +0.1162968f, -0.1506335f, -0.0432039f, +0.0745401f, +0.1282302f, +0.0010049f, -0.4656500f,
  +0.0046239f, +0.2206734f, +0.2323792f, -0.0031080f, -0.2316423f, -0.0882700f, -0.1809710f, -0.1440447f,
  -0.2613807f, -0.2092830f, +0.1034050f, +0.0443567f, -0.2926221f, +0.2193400f, +0.0459918f, -0.1345551f,
  -0.0773517f, -0.0414463f, -0.0807017f, +0.0736430f, -0.1204157f, -0.0358812f, -0.0453826f, -0.1783412f,
  +0.0162402f, -0.0530986f, -0.0951146f, +0.0876637f, -0.2825519f, +0.0201396f, +0.0702295f, -0.1759733f,
  -0.1679130f, +0.3883628f, +0.3003773f, +0.1026317f, +0.0121857f, -0.2463393f, -0.2752474f, -0.1489217f,
  +0.0622600f, -0.1016032f, +0.1394087f, -0.0733186f, +0.0828774f, -0.1398295f, +0.0394831f, -0.3192944f,
  -0.0454603f, +0.2697765f, +0.2923534f, -0.0214174f, +0.1079694f, -0.1580267f, -0.1259162f, -0.0779712f,
  -0.1972435f, +0.1227164f, -0.0089729f, -0.0375340f, +0.0012057f, -0.1685089f, -0.0116736f, -0.3703356f,
  -0.1547813f, +0.0290051f, +0.1481772f, +0.2127922f, -0.2168225f, +0.1051335f, -0.1613324f, -0.2089497f,
  +0.0267382f, +0.2434187f, +0.2445091f, -0.0299798f, +0.1475020f, +0.0932274f, +0.0127605f, -0.0713020f,
  -0.0492201f, +0.3526879f, +0.5677277f, +0.0796944f, +0.2435859f, -0.0036745f, -0.1690141f, -0.1640121f,
  -0.1599729f, +0.0927221f, +0.0481786f, +0.3882151f, +0.1212332f, -0.1105012f, -0.2279520f, -0.0711279f,
  -0.2974288f, +0.1797931f, -0.0611252f, +0.0986313f, -0.0052975f, +0.0179917f, -0.0480618f, -0.0676064f,
  -0.0864827f, +0.2916009f, +0.1779693f, +0.0086112f, -0.1544391f, -0.0721533f, -0.1787671f, -0.0399634f,
  +0.0177591f, +0.0665125f, +0.0403964f, +0.0665333f, -0.1133495f, -0.2558098f, +0.1058865f, -0.2465979f,
  -0.2896996f, -0.2401298f, +0.0841173f, +0.0490216f, +0.4019315f, +0.2848257f, -0.0643952f, +0.0963535f,
  +0.1963951f, +0.0232231f, +0.1584486f, +0.1018934f, +0.0867923f, +0.1697156f, -0.1512258f, +0.2492867f,
  +0.0344826f, -0.0216989f, -0.3708382f, -0.0366353f, -0.2348990f, -0.1092839f, +0.2317836f, +0.5135409f,
  +0.1348414f, -0.2128304f, -0.0852758f, +0.0804815f, +0.1446400f, +0.0284183f, +0.1250131f, +0.2240955f,
  +0.3563035f, +0.0495172f, +0.0176290f, -0.2943996f, -0.2537834f, +0.1569735f, -0.0048535f, +0.0866879f,
  +0.2305543f, -0.1460546f, -0.1223638f, +0.0572487f, +0.3340746f, -0.0279859f, -0.1984870f, -0.1489210f,
  +0.3319829f, +0.1744779f, +0.2130873f, +0.0011299f, -0.1374649f, -0.0397910f, -0.2242897f, -0.3661227f,
  -0.2919582f, -0.0565965f, +0.0469595f, -0.0069162f, -0.1579434f, -0.2950506f, +0.0148382f, -0.6882974f,
  +0.1585550f, +0.3210147f, +0.0250179f, +0.1345836f, +0.0582095f, -0.0521348f, +0.0653758f, -0.1426267f,
  -0.3526769f, +0.2061464f, +0.3663463f, +0.0310713f, -0.0096261f, +0.0703025f, -0.0370464f, -0.1235574f,
  -0.0397906f, -0.0723993f, +0.2133232f, +0.0856681f, -0.0246708f, -0.0934279f, +0.1720759f, +0.0218883f,
  +0.1270396f, +0.0080049f, +0.1400391f, -0.1715631f, +0.0137845f, -0.0005894f, -0.0096350f, -0.0048991f,
  -0.0194783f, +0.1690845f, -0.1021149f, -0.0974827f, +0.3699277f, -0.0234002f, -0.2210558f, -0.1422825f,
  +0.0754627f, +0.0194252f, -0.1096457f, +0.0630611f, +0.0045421f, +0.0629003f, +0.0283879f, -0.1985346f
);

const float biases[4] = float[4](
  -0.0418744f, +0.0741088f, +0.0893265f, +0.0774467f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer25 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0216840f, +0.0045142f, -0.0457835f, -0.1313535f, -0.0003101f, -0.1715574f, +0.1213501f, +0.2189763f,
  -0.0506089f, +0.0177291f, -0.1801771f, +0.1620271f, +0.1689640f, -0.0675489f, -0.1174329f, +0.1615896f,
  -0.0861777f, -0.1197827f, +0.0968518f, -0.1658859f, +0.1253366f, +0.0515716f, +0.0915691f, +0.4949264f,
  -0.0861547f, +0.0973038f, -0.2404073f, -0.1335166f, -0.0139753f, +0.1758929f, +0.0014536f, +0.3199557f,
  -0.2348416f, +0.1293191f, +0.0167317f, -0.1970584f, +0.3369768f, +0.5224399f, +0.3166353f, -0.1505377f,
  +0.0602584f, +0.0190576f, +0.1065493f, -0.0091552f, +0.0257440f, -0.1340573f, -0.2661392f, -0.1946675f,
  +0.0262444f, -0.1727435f, +0.0660330f, -0.3028459f, +0.0189081f, +0.2112127f, +0.1447509f, +0.3108385f,
  -0.1858263f, +0.0582483f, -0.0785205f, -0.0922478f, -0.0761358f, +0.0999745f, +0.1054865f, -0.1379833f,
  -0.0993849f, +0.0526823f, -0.2916931f, -0.0489570f, +0.0724561f, -0.1353716f, +0.0106154f, -0.0211660f,
  -0.1527139f, -0.0636241f, -0.0583061f, -0.2080807f, -0.0111669f, +0.2221252f, -0.0731956f, -0.1889827f,
  -0.2297174f, +0.0315757f, -0.0776617f, -0.1552766f, -0.1300214f, +0.0985710f, +0.0997739f, +0.1268873f,
  -0.1909421f, -0.2812441f, -0.0543703f, -0.1719450f, -0.4721021f, -0.2692759f, -0.1152662f, +0.2516913f,
  -0.2299989f, -0.1411020f, +0.3050275f, -0.0620041f, -0.0470376f, -0.0154222f, +0.2471929f, -0.2456785f,
  +0.1399902f, +0.5257191f, +0.2661551f, -0.2346253f, +0.5758703f, -0.2855033f, -0.1390006f, +0.0264163f,
  +0.0601650f, +0.0137689f, -0.0744617f, +0.0494272f, -0.1287014f, -0.0160207f, -0.0261950f, +0.1320380f,
  +0.1246894f, +0.2023320f, -0.0838213f, +0.2019258f, +0.1838850f, +0.1013420f, +0.1297477f, +0.4064593f,
  +0.2255798f, -0.2584543f, +0.2257783f, -0.1174326f, -0.0279667f, +0.1234696f, -0.1094481f, +0.3069418f,
  -0.0656856f, +0.0610232f, +0.0839250f, -0.0044704f, +0.0964635f, -0.0295872f, +0.0584141f, -0.0327916f,
  +0.2555510f, +0.0849411f, +0.5719860f, -0.1218221f, -0.0211806f, -0.2657603f, -0.0734185f, -0.3292126f,
  -0.0567539f, -0.2615103f, -0.0845320f, +0.3142113f, +0.0470496f, +0.0843287f, +0.1096559f, -0.1281271f,
  +0.0593599f, -0.0116586f, -0.0202204f, +0.1580014f, -0.0234091f, +0.2885783f, -0.0512357f, +0.1423093f,
  -0.1233333f, -0.3482001f, -0.1350276f, +0.6706890f, +0.1645306f, +0.2407241f, +0.0207102f, -0.5056345f,
  -0.2154129f, +0.2899027f, -0.4083093f, +0.0844762f, -0.0533246f, +0.2964349f, +0.1281975f, -0.1227214f,
  +0.1502628f, +0.4424091f, +0.0613808f, -0.2291265f, -0.2545900f, -0.1866024f, -0.0894615f, +0.2122677f,
  -0.1916624f, -0.1759775f, -0.0492431f, +0.0124647f, -0.2218110f, -0.1357859f, +0.2335428f, +0.1156839f,
  -0.1267156f, -0.0170066f, +0.0227092f, +0.3047998f, +0.1230490f, -0.0126958f, -0.0545064f, -0.1416948f,
  -0.3422131f, -0.1576586f, -0.0296845f, -0.1846023f, +0.1757834f, -0.2924943f, -0.0049824f, -0.1029351f,
  +0.0593631f, +0.1910650f, +0.0716294f, +0.2182808f, -0.1032244f, -0.1196571f, +0.0977648f, -0.1858242f,
  +0.0678902f, +0.1736361f, -0.0466919f, -0.1267627f, -0.0327053f, +0.1974776f, +0.0914570f, -0.2363600f,
  +0.0182157f, -0.0409597f, -0.2735290f, -0.2694202f, -0.0021882f, +0.1870849f, +0.0505351f, -0.1283748f,
  +0.1650144f, +0.0927921f, -0.0415005f, +0.2307346f, +0.1682204f, -0.0004943f, +0.0021392f, -0.1960918f,
  +0.0842668f, -0.0474900f, +0.2311898f, +0.0576367f, -0.1503762f, -0.0798908f, -0.0314696f, +0.4477825f,
  -0.2465817f, +0.0726917f, -0.1468720f, -0.2907892f, +0.0081889f, +0.2420504f, -0.0126609f, -0.1981937f,
  -0.1766644f, +0.1199362f, +0.0465043f, +0.3033668f, +0.1084631f, -0.0952228f, +0.0373914f, -0.2252660f,
  +0.2729836f, +0.0231465f, -0.0905376f, +0.0178433f, -0.0617013f, -0.0485105f, -0.2925411f, +0.3023566f,
  -0.1533998f, +0.0403429f, -0.0298680f, +0.1187835f, -0.1170586f, -0.2652302f, +0.1480542f, +0.1312734f
);

const float biases[4] = float[4](
  +0.0867721f, +0.0064392f, -0.0165689f, +0.1246472f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer26 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1841300f, +0.0076052f, -0.0928001f, +0.0734276f, -0.0997095f, +0.0074111f, +0.0157056f, -0.0429914f,
  +0.3029005f, -0.2990305f, -0.0403913f, -0.0469017f, -0.0408632f, -0.2614054f, +0.0722949f, -0.1799036f,
  +0.1231567f, -0.0316542f, -0.0269597f, +0.0179645f, -0.1217168f, -0.0559625f, +0.1000827f, +0.0709467f,
  +0.0170730f, -0.0367304f, +0.2432078f, +0.4677397f, +0.2211627f, +0.1962120f, +0.0218905f, +0.1662232f,
  +0.1583201f, -0.2922874f, -0.1597636f, +0.3187853f, +0.0847495f, -0.3700515f, +0.1962627f, +0.2181728f,
  -0.1845677f, -0.2621859f, +0.0638428f, -0.1149796f, +0.2323704f, +0.3129324f, -0.0980672f, -0.1435120f,
  -0.0940952f, -0.1292380f, +0.0898453f, +0.4222032f, -0.3702954f, -0.1295187f, +0.0271339f, +0.0309624f,
  +0.2265504f, -0.3506373f, +0.1509735f, -0.1692727f, +0.0038450f, -0.2443502f, -0.0646104f, +0.1789827f,
  +0.0375343f, -0.1766213f, +0.0745958f, +0.0544072f, +0.0209925f, +0.0259553f, +0.0992756f, -0.1052168f,
  -0.0011213f, +0.2258994f, -0.0299721f, -0.2672858f, +0.0420501f, +0.0340688f, +0.1042733f, -0.0808727f,
  -0.0530578f, +0.1477695f, +0.1295405f, -0.0483575f, -0.0922830f, +0.4627827f, +0.2192327f, -0.0698688f,
  -0.2213829f, -0.1118762f, -0.1580008f, +0.3739611f, -0.0584188f, -0.1429984f, +0.0478067f, -0.2066849f,
  -0.2487341f, -0.0320089f, -0.2665876f, +0.1775571f, +0.0905915f, +0.2629696f, +0.1771844f, +0.0801420f,
  -0.1368765f, +0.1047385f, +0.2461077f, -0.0433844f, -0.0455192f, -0.0126265f, +0.1601418f, +0.1042359f,
  -0.1197590f, +0.4759634f, +0.0588040f, -0.3732853f, +0.2907577f, +0.1250678f, -0.0773422f, -0.2779779f,
  +0.0630902f, -0.0604500f, -0.0501006f, +0.0551711f, +0.2986234f, +0.2290665f, +0.5252840f, +0.0894912f,
  -0.1171850f, -0.0641473f, +0.0158156f, +0.0697153f, -0.1172092f, -0.1728089f, +0.2757749f, -0.0379060f,
  -0.2719526f, +0.0889210f, -0.1030845f, -0.1607149f, +0.1207239f, +0.1741298f, +0.4084259f, -0.1418805f,
  -0.2760091f, +0.0338564f, -0.2243473f, -0.0582316f, -0.1082695f, +0.1902083f, +0.0375674f, +0.0643402f,
  +0.1203798f, -0.1041600f, +0.0857781f, +0.0895456f, +0.2012766f, -0.0723426f, -0.2263585f, +0.0572379f,
  +0.2228678f, -0.0368104f, +0.0755638f, -0.0285638f, +0.2347628f, +0.0426416f, +0.0318769f, -0.3739774f,
  -0.2804763f, +0.2822148f, -0.1597219f, +0.0292887f, -0.0316693f, +0.1472022f, +0.2108056f, -0.0633583f,
  -0.0445443f, -0.0642184f, -0.3461443f, -0.0766236f, -0.0755675f, +0.1603168f, +0.1023146f, -0.2777593f,
  +0.2524697f, +0.0894308f, +0.0717227f, -0.1408626f, +0.3831982f, -0.2177113f, +0.1068761f, +0.1007983f,
  -0.0535235f, +0.2543391f, -0.1302117f, +0.1051382f, -0.1996274f, +0.1741929f, +0.0740617f, +0.0056259f,
  -0.0035406f, +0.1583880f, -0.0841634f, +0.0907106f, -0.0573990f, -0.0885177f, +0.0137725f, +0.0691686f,
  +0.1679907f, +0.2421328f, -0.2076747f, +0.2103882f, -0.0370287f, +0.2026614f, -0.1527696f, -0.0525305f,
  -0.2567694f, +0.0093714f, +0.2739236f, +0.0437746f, -0.4778450f, -0.0822510f, -0.0045406f, -0.2216813f,
  -0.0149489f, +0.2340361f, -0.1706741f, +0.0422314f, -0.2859428f, +0.1562078f, +0.1745327f, +0.1935111f,
  -0.3045803f, -0.0347508f, +0.3498345f, +0.1751625f, +0.1049827f, -0.1264980f, -0.1481217f, +0.1289178f,
  -0.2617824f, +0.3068458f, +0.0478842f, -0.0186055f, -0.2614469f, +0.1496279f, +0.6120688f, +0.4704795f,
  -0.0485480f, +0.1019868f, -0.1041276f, +0.0399789f, -0.0160018f, +0.1951925f, +0.1020828f, -0.0230493f,
  -0.2706391f, +0.2127207f, +0.2724289f, +0.1118762f, +0.1623761f, -0.0721556f, +0.3229885f, -0.0638122f,
  +0.1053542f, +0.0502947f, -0.0135265f, -0.1944115f, -0.0858188f, +0.1953934f, +0.1929741f, +0.1968671f,
  -0.1874955f, -0.1167919f, -0.1536284f, +0.2100556f, -0.1231275f, +0.0547706f, -0.0184718f, -0.0598175f,
  -0.0710641f, +0.1909945f, -0.0636401f, -0.0038207f, -0.0676897f, +0.0268977f, +0.2939954f, +0.1571687f
);

const float biases[4] = float[4](
  +0.0694576f, -0.0361017f, -0.0018848f, -0.0190159f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer26 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2502302f, -0.2043640f, +0.1025791f, +0.0942584f, -0.0545590f, -0.2083644f, +0.2654465f, +0.0601876f,
  +0.3008844f, +0.0018553f, -0.0921649f, -0.0968576f, +0.1724672f, -0.3141328f, +0.1374338f, -0.1935227f,
  -0.0387622f, -0.1121894f, -0.1015980f, +0.1505260f, +0.0295815f, -0.2258357f, +0.3337041f, +0.2264734f,
  +0.2138668f, +0.0454635f, +0.0579655f, +0.2257310f, +0.1956128f, +0.4162276f, +0.1415222f, -0.0476496f,
  +0.0619116f, -0.2776374f, -0.1277144f, -0.1073582f, -0.1813125f, -0.0490052f, +0.1847831f, -0.0457114f,
  +0.3267327f, -0.1561764f, +0.1556353f, -0.0086386f, +0.1442369f, +0.1965296f, +0.2274772f, -0.0842480f,
  +0.1288064f, -0.0029009f, +0.4039744f, +0.1698651f, +0.3422036f, +0.3533023f, +0.0859911f, +0.0737199f,
  -0.0995095f, +0.1056779f, +0.0219763f, +0.3723198f, -0.0401642f, +0.0872002f, +0.7043414f, +0.1610720f,
  +0.1050154f, +0.1091507f, +0.1623717f, +0.1578910f, -0.0156755f, +0.2595150f, +0.1620620f, +0.0613644f,
  -0.0683504f, -0.1000452f, +0.0072421f, -0.1162985f, -0.1405506f, +0.1446806f, +0.0939923f, +0.1061903f,
  +0.1631470f, -0.1294123f, +0.0138175f, -0.0090532f, +0.0047274f, -0.0116066f, +0.0085021f, +0.0421832f,
  -0.1645698f, -0.1685637f, +0.0344905f, +0.1053411f, +0.0058373f, -0.0210945f, +0.0652560f, +0.1299840f,
  -0.1432011f, +0.0738965f, +0.0122244f, +0.1058812f, -0.2440927f, -0.0076344f, +0.2501570f, +0.0144328f,
  -0.2772413f, -0.3064505f, +0.1108069f, +0.0276280f, -0.3397056f, +0.0302079f, +0.1948978f, +0.1166181f,
  +0.0716844f, -0.0842966f, +0.1551919f, +0.1886151f, +0.3793637f, -0.0097739f, +0.0255192f, +0.1006960f,
  +0.0402560f, +0.1860927f, +0.0778193f, -0.0591026f, +0.3356363f, -0.1201102f, -0.5426832f, -0.1747051f,
  -0.0232393f, -0.0437407f, +0.0129411f, -0.0433079f, -0.0270119f, -0.3211397f, -0.3710837f, -0.0750906f,
  +0.3066896f, -0.1508275f, +0.2607601f, -0.3656154f, +0.0813392f, -0.1813332f, -0.5593223f, +0.1164940f,
  -0.0872853f, +0.0052055f, +0.1005422f, -0.2756257f, -0.0195324f, +0.0237161f, -0.0708640f, -0.1347255f,
  +0.0105056f, -0.1448870f, -0.2516445f, -0.0493322f, -0.1172566f, +0.1275447f, -0.0525378f, -0.0615696f,
  +0.1770864f, -0.0123527f, +0.2167774f, +0.0254582f, +0.0134805f, -0.0941208f, -0.0651298f, -0.0723157f,
  -0.1605648f, -0.0781342f, +0.0951870f, -0.0860739f, -0.0958201f, -0.1199809f, +0.1356580f, -0.1471272f,
  +0.2141962f, +0.2054138f, -0.4078620f, +0.2258095f, +0.1237406f, +0.2038239f, +0.0586300f, +0.1562484f,
  +0.0783550f, -0.0246954f, -0.0019177f, +0.0130988f, +0.0720003f, +0.0286515f, -0.1087025f, +0.0390556f,
  -0.0032309f, +0.1621206f, -0.0523092f, -0.2902609f, -0.2077111f, +0.1059066f, -0.2794456f, -0.1152504f,
  -0.0417809f, -0.1210861f, +0.0483380f, +0.1491104f, +0.0417228f, -0.2325318f, -0.2537640f, +0.0320345f,
  +0.0335111f, +0.1779303f, +0.1032765f, -0.0400375f, -0.0267754f, +0.0226465f, -0.1605246f, +0.0880888f,
  +0.0357350f, -0.2903771f, -0.1576490f, -0.1299760f, +0.2998373f, +0.2899910f, -0.2437519f, -0.1677630f,
  +0.1457061f, +0.1041130f, +0.0287019f, -0.0406432f, +0.1817386f, +0.2338859f, +0.3899595f, -0.3899384f,
  +0.2464722f, -0.2823901f, +0.0168685f, -0.0728325f, -0.0076219f, +0.3380734f, -0.1227135f, +0.2857292f,
  +0.0648999f, +0.0464345f, -0.1264713f, +0.0142535f, +0.1725409f, +0.2586144f, -0.0704878f, -0.0110802f,
  +0.4415506f, -0.2614011f, +0.2317432f, -0.1077841f, -0.0971205f, +0.0158101f, +0.2454738f, -0.2770831f,
  +0.5302184f, +0.0684389f, +0.2509097f, -0.1393953f, -0.4480351f, -0.0073405f, -0.1310677f, +0.0909456f,
  +0.1068751f, -0.1789239f, +0.4371983f, +0.0080706f, +0.2654103f, -0.2853670f, -0.1256598f, -0.1655616f,
  +0.2076438f, -0.2344594f, +0.4091445f, +0.1328112f, -0.0541301f, -0.0850097f, -0.2828592f, -0.0741493f,
  +0.2420218f, -0.0048886f, -0.0249745f, -0.0150574f, +0.0566072f, -0.1005510f, -0.3747846f, +0.0419711f
);

const float biases[4] = float[4](
  +0.0031102f, +0.0478003f, +0.0205582f, +0.0290081f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer27 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3731351f, +0.1123779f, -0.0834756f, +0.3921450f, -0.0759105f, +0.0177399f, -0.2384292f, -0.4499159f,
  -0.0335469f, +0.1202945f, -0.1558449f, +0.0328966f, +0.0210797f, +0.1425663f, +0.0103885f, -0.2020553f,
  -0.3224207f, +0.3680421f, -0.1925881f, +0.2328871f, +0.5543333f, -0.1490921f, +0.4073572f, -0.0885696f,
  -0.0218684f, -0.0302710f, +0.0602835f, +0.0315588f, +0.0272467f, +0.0449835f, -0.1318926f, -0.2863884f,
  +0.0805734f, -0.1286485f, +0.0865328f, -0.0376116f, -0.0562413f, -0.1095956f, -0.0838272f, -0.0696490f,
  -0.0626188f, +0.1594455f, -0.1020423f, -0.0752344f, +0.0429675f, -0.0136660f, -0.2806130f, -0.0686746f,
  -0.0947939f, +0.0539584f, +0.1447910f, +0.3980548f, -0.1202635f, -0.0201739f, -0.2584055f, -0.2397983f,
  -0.0726490f, -0.1199960f, +0.2187700f, +0.0416384f, -0.0165956f, -0.1604823f, +0.3874624f, +0.0319851f,
  -0.1626646f, +0.0121179f, +0.1368757f, -0.0519442f, -0.1749087f, -0.1957102f, -0.1039365f, +0.1258565f,
  +0.0718048f, -0.0088352f, -0.1593658f, -0.1496182f, +0.1109238f, -0.2859436f, +0.0916983f, +0.1471337f,
  +0.0360443f, -0.1528272f, +0.0399243f, -0.0387391f, -0.0616995f, +0.1403655f, +0.2560181f, +0.1822733f,
  +0.0376331f, -0.1428877f, -0.0765346f, -0.4190976f, +0.3152083f, +0.1724972f, +0.0707897f, +0.4457419f,
  -0.2881445f, +0.0397717f, +0.2857957f, +0.0261573f, -0.1585747f, +0.2173398f, -0.0184548f, +0.7042738f,
  +0.1580149f, -0.1249483f, -0.1066307f, -0.2780296f, -0.0966242f, +0.1705338f, +0.0555662f, +0.0497528f,
  -0.0270628f, -0.1962786f, +0.5020266f, -0.2380430f, -0.0935323f, +0.2001369f, +0.2178314f, +0.0502166f,
  -0.2102494f, -0.0316577f, +0.0236418f, -0.0364279f, +0.2096881f, +0.0228623f, +0.2315469f, +0.0993552f,
  -0.1235534f, -0.3298063f, +0.2414554f, -0.0965169f, +0.0027268f, +0.2889987f, +0.1120698f, -0.2161130f,
  -0.0408528f, +0.0770583f, -0.0353224f, +0.0050924f, +0.2116340f, +0.0594621f, -0.0768627f, +0.2043831f,
  -0.0546152f, -0.2348063f, +0.1421872f, +0.1571739f, -0.2279245f, +0.0055261f, +0.1239234f, +0.0422225f,
  -0.1610175f, +0.1451019f, +0.0055410f, -0.2315297f, -0.0153472f, -0.2048759f, +0.1959739f, -0.0399081f,
  -0.2255791f, -0.2084872f, -0.1845673f, -0.0553751f, -0.0010593f, -0.0304368f, +0.0451559f, +0.0779000f,
  -0.4054569f, -0.0962953f, +0.1853137f, +0.2370668f, -0.1521666f, -0.1016243f, -0.0285011f, +0.3513580f,
  -0.1822736f, +0.2931407f, -0.3612917f, +0.2210511f, -0.1298841f, -0.1150143f, -0.2003667f, -0.0659866f,
  -0.0440450f, +0.2234511f, -0.1467065f, +0.2695441f, -0.0879805f, +0.0518120f, -0.1952695f, -0.0750121f,
  -0.0478109f, -0.1007335f, -0.0430265f, -0.0433692f, -0.0877583f, -0.2884119f, +0.2444154f, -0.1726895f,
  -0.2932902f, -0.1878675f, -0.1757207f, +0.0035657f, +0.0528010f, -0.0272714f, -0.1197290f, -0.2668454f,
  +0.3348059f, +0.1056622f, -0.0546912f, +0.3240438f, +0.1033093f, +0.3229564f, +0.0305938f, +0.0988934f,
  -0.0616690f, -0.0460584f, +0.3743577f, +0.0556088f, -0.0255154f, -0.1577520f, +0.1273057f, +0.0841362f,
  -0.0385755f, -0.1859284f, +0.0589157f, +0.1252779f, +0.0569900f, -0.1876605f, +0.0413406f, -0.0207706f,
  -0.1256653f, -0.2910336f, -0.0691149f, -0.0502854f, -0.0133812f, +0.0570471f, -0.2840736f, +0.4694354f,
  +0.1048158f, -0.0248605f, +0.1602278f, +0.2888491f, -0.0364940f, -0.0630153f, +0.1846449f, +0.1315979f,
  -0.0298458f, -0.3279115f, +0.0398037f, +0.1560617f, -0.1733614f, -0.2708424f, +0.2365006f, +0.2932251f,
  -0.5820091f, -0.5015970f, -0.0425875f, +0.1287690f, +0.3143917f, -0.3071719f, -0.2335603f, +0.3237556f,
  -0.0022522f, -0.2277828f, -0.1979903f, -0.0785915f, -0.0034280f, -0.1370656f, +0.3036377f, +0.1476502f,
  -0.0053593f, -0.1411699f, +0.1474706f, +0.1160281f, +0.1133554f, +0.0636155f, +0.1090752f, +0.2154506f,
  +0.0371734f, +0.0607765f, -0.0434141f, -0.0519732f, -0.0055869f, -0.1311547f, +0.0463924f, +0.1153545f
);

const float biases[4] = float[4](
  -0.0131933f, +0.0643012f, -0.0483350f, +0.0234289f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer27 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1508072f, -0.3317229f, -0.0507295f, -0.3297665f, +0.0029147f, -0.0056367f, +0.0144284f, -0.0585434f,
  -0.0935373f, +0.2704082f, -0.1748299f, -0.2107508f, -0.1905787f, +0.0161020f, +0.1091667f, -0.2097888f,
  -0.0207812f, +0.1461875f, -0.0691524f, +0.0781805f, -0.2684771f, -0.2075188f, -0.1322636f, -0.0228846f,
  +0.1908317f, -0.0607696f, +0.1996119f, -0.3031141f, -0.1471136f, -0.0609075f, -0.0855688f, -0.0339638f,
  -0.1036029f, +0.2091633f, +0.2103475f, +0.1875434f, +0.0722311f, -0.0226248f, -0.0689942f, -0.1938231f,
  -0.0174679f, +0.2027197f, +0.2218991f, +0.1196000f, -0.0676269f, +0.0888446f, -0.1085737f, -0.0783041f,
  -0.0121644f, +0.2253621f, -0.0546601f, +0.0250552f, -0.3394153f, -0.4894919f, -0.0387494f, -0.2001837f,
  -0.0483944f, +0.1597882f, +0.2856381f, -0.1082105f, +0.1449837f, -0.3725785f, -0.2140089f, -0.3375981f,
  -0.0692053f, -0.1139070f, +0.1097852f, -0.0495353f, -0.1209214f, +0.2263811f, -0.0048727f, +0.2095146f,
  -0.1608766f, +0.0847581f, +0.0065457f, +0.2941588f, -0.2626265f, -0.0845364f, -0.0975521f, +0.0754366f,
  -0.2709842f, -0.0958564f, -0.0167424f, +0.0039365f, -0.4076438f, +0.1177667f, -0.0011406f, -0.1245860f,
  -0.0778855f, +0.6773735f, +0.1365269f, -0.0899912f, -0.4009156f, -0.1019129f, +0.1324325f, -0.2512085f,
  -0.1142650f, +0.1286794f, +0.0755499f, +0.4111576f, -0.2969430f, +0.1257867f, -0.2903164f, -0.0814523f,
  -0.0571743f, -0.0075401f, -0.2023749f, +0.2142289f, -0.0619825f, -0.2758911f, +0.0042449f, -0.0673052f,
  -0.1980246f, -0.0009827f, +0.0763902f, -0.0817409f, -0.1104169f, +0.1971114f, +0.3254418f, -0.2150620f,
  -0.0810191f, +0.0773493f, +0.1023855f, +0.1248689f, -0.0023035f, -0.0219517f, -0.1357759f, -0.0672277f,
  -0.2564277f, +0.0812015f, +0.2996748f, +0.3387910f, -0.0281270f, -0.2033705f, -0.0712994f, -0.2332600f,
  -0.1865348f, +0.0644241f, +0.1243812f, -0.0862726f, +0.1985842f, -0.1107791f, -0.1202682f, -0.1205757f,
  -0.3069026f, +0.0524831f, +0.1687640f, -0.2564384f, -0.0155263f, +0.1059593f, +0.2552567f, +0.0351485f,
  -0.2486426f, -0.1312729f, -0.3607265f, +0.0731994f, +0.0359496f, -0.2952497f, -0.0503929f, +0.7452801f,
  +0.2353999f, +0.0740905f, +0.0111709f, -0.2042075f, +0.2321985f, -0.0920871f, -0.0575639f, -0.1811099f,
  +0.0937750f, +0.3269835f, +0.2587061f, +0.0526245f, -0.2650190f, -0.1541307f, +0.1993138f, -0.2000654f,
  -0.7162139f, +0.1530249f, +0.0082106f, +0.5318143f, -0.0138586f, +0.0126746f, -0.1372633f, +0.0538752f,
  -0.0209252f, -0.3627683f, -0.1589262f, +0.1841968f, -0.1633371f, -0.3453365f, +0.0579992f, +0.4379084f,
  +0.1357459f, -0.0250306f, -0.1614400f, +0.0096056f, +0.0047017f, +0.0760642f, +0.0923563f, +0.0508039f,
  -0.2597159f, +0.2638154f, -0.0069283f, -0.1089210f, -0.2759847f, +0.0437887f, +0.0216838f, -0.3067758f,
  -0.2383829f, -0.2922470f, -0.2848991f, -0.1696704f, -0.3660159f, -0.1348858f, -0.2538018f, +0.2953355f,
  -0.0753849f, +0.1063152f, -0.0084769f, +0.2016570f, -0.1693903f, -0.0567107f, -0.1872262f, +0.0723714f,
  +0.0150347f, -0.1305778f, +0.0318329f, +0.1743517f, -0.2497359f, -0.0632752f, +0.2608328f, +0.1458171f,
  -0.0787909f, +0.0102632f, +0.0368556f, +0.1477218f, +0.0309151f, -0.1360485f, -0.2285910f, -0.2198087f,
  -0.0944967f, -0.0636540f, -0.0123641f, +0.0221532f, +0.1435320f, -0.1538368f, -0.0560408f, -0.2505289f,
  +0.1267846f, +0.0261317f, -0.3986479f, +0.1928629f, -0.4522176f, -0.2173367f, -0.1408006f, -0.2899511f,
  +0.0072001f, -0.2890426f, -0.2125987f, +0.0671893f, -0.3075456f, -0.2398995f, -0.0171593f, -0.1113744f,
  +0.0102804f, -0.0404752f, -0.0258630f, -0.2562493f, +0.2963950f, -0.0383320f, -0.1027850f, +0.1811561f,
  +0.0723239f, -0.1444014f, +0.0144824f, +0.2293656f, +0.0666244f, -0.4788185f, +0.0429733f, -0.2913707f,
  -0.0481123f, -0.0952191f, +0.0653229f, +0.4024892f, -0.0524235f, -0.1593504f, +0.0978550f, +0.0323744f
);

const float biases[4] = float[4](
  +0.0158623f, -0.0292144f, -0.0637676f, -0.0502940f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer28 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1520014f, +0.1850506f, -0.1789806f, +0.0670930f, +0.1301465f, -0.1081018f, -0.0073681f, +0.3417516f,
  -0.0518884f, +0.2045376f, +0.1019063f, +0.0250057f, +0.2566024f, -0.1048965f, +0.1884375f, -0.0321934f,
  -0.0838424f, +0.1983109f, +0.0260833f, -0.0938861f, -0.0690168f, +0.0885020f, -0.0551794f, -0.3861428f,
  -0.2663349f, -0.0253104f, +0.1530234f, +0.2639102f, -0.0772390f, +0.1128252f, +0.1107239f, -0.0223728f,
  +0.1454653f, +0.0135973f, +0.1542298f, -0.2916317f, +0.2438758f, -0.1988788f, +0.0656661f, +0.2529329f,
  -0.1970620f, +0.2125901f, +0.1267728f, -0.3568957f, -0.1115374f, +0.1064186f, +0.0225860f, +0.1479339f,
  +0.0628131f, +0.1573222f, -0.3016201f, +0.0616886f, +0.0535980f, +0.2770984f, +0.1358584f, -0.0154359f,
  -0.5332929f, -0.1589514f, +0.0627604f, -0.1286492f, -0.1888978f, +0.1177461f, +0.3078912f, -0.0132204f,
  -0.4039579f, +0.2532764f, -0.0212064f, -0.3339267f, +0.1519385f, -0.1701144f, -0.0690158f, +0.1970588f,
  -0.2569551f, -0.2186260f, -0.3198986f, -0.3188445f, +0.0265272f, -0.0145645f, -0.0972599f, -0.0699427f,
  -0.1324936f, -0.1436724f, +0.1256536f, -0.2956291f, -0.1007971f, -0.1842693f, +0.2379957f, +0.1440218f,
  +0.0313620f, -0.0339221f, -0.1240829f, -0.1066937f, -0.0668308f, -0.0485648f, +0.0945077f, -0.0954474f,
  +0.0096875f, +0.2016287f, -0.1946671f, -0.0550800f, +0.0303965f, -0.0776986f, +0.0922125f, -0.2552396f,
  +0.3207796f, +0.2363805f, -0.1748087f, +0.2264119f, -0.1080682f, -0.0128859f, -0.1014782f, -0.1508905f,
  -0.0546552f, +0.2370070f, +0.2411930f, -0.1577066f, -0.0016998f, -0.2745976f, +0.2785199f, +0.1919509f,
  -0.1029390f, -0.0067227f, +0.2924771f, -0.0359823f, -0.1015098f, -0.4224086f, -0.1089235f, -0.0738798f,
  -0.1704664f, +0.4663968f, -0.0510897f, -0.1700023f, -0.1104454f, -0.1075749f, -0.1971095f, -0.0428403f,
  -0.0336657f, +0.0090567f, -0.0509284f, -0.0444328f, +0.3264436f, -0.4543022f, -0.0783290f, -0.1330846f,
  +0.1572941f, -0.2329696f, -0.2010432f, -0.1276824f, -0.1582769f, +0.0538343f, -0.3477882f, -0.1573597f,
  -0.0810168f, -0.2055282f, -0.1225027f, -0.2202772f, +0.0900250f, -0.0216612f, +0.5005251f, -0.0402011f,
  -0.1515861f, -0.2529391f, +0.0887446f, -0.0425078f, -0.0127334f, +0.1188539f, -0.0824241f, +0.0794391f,
  +0.4172527f, -0.0561540f, +0.0652028f, +0.0529782f, -0.1861755f, -0.1890241f, +0.0081662f, +0.1736494f,
  +0.6540753f, +0.1959222f, -0.0126086f, -0.0269501f, -0.0251954f, -0.1018739f, +0.0283804f, +0.0111620f,
  +0.0444248f, +0.0138531f, -0.0240997f, -0.0347987f, -0.0836566f, +0.2113142f, +0.2693698f, -0.0318514f,
  +0.4309972f, -0.0757549f, -0.0204627f, -0.0945170f, +0.0512929f, -0.0703556f, +0.0218470f, -0.0545849f,
  +0.4429612f, +0.2717301f, -0.0723008f, -0.0053446f, -0.0259148f, -0.1242721f, -0.0643650f, -0.0099360f,
  +0.2853433f, +0.2515317f, +0.0554642f, -0.0748570f, -0.1717737f, +0.1134432f, +0.1646065f, -0.0539512f,
  -0.2946372f, -0.1250356f, +0.0254708f, +0.3725939f, -0.1285286f, -0.0260019f, -0.2191591f, -0.3196385f,
  +0.2097090f, +0.0755290f, +0.0760873f, +0.3011782f, +0.0437162f, -0.0980384f, -0.3115812f, -0.0099665f,
  -0.1525165f, +0.0034539f, +0.0542713f, +0.3008631f, +0.0394248f, +0.0899518f, -0.2362860f, +0.1210015f,
  +0.0528329f, +0.3159450f, +0.1336572f, +0.2306936f, -0.0884798f, -0.1798371f, +0.1291736f, -0.4387902f,
  +0.0728334f, +0.0131317f, -0.0819109f, +0.3315104f, -0.2565700f, -0.0460877f, +0.0499319f, -0.5024346f,
  +0.0244782f, +0.0553069f, +0.0776276f, +0.2622121f, -0.0198068f, +0.1812652f, -0.0642545f, -0.1665328f,
  +0.0808478f, +0.1856418f, +0.2387218f, -0.0520854f, +0.0448447f, +0.0908682f, -0.0749973f, +0.0221764f,
  +0.4887670f, -0.0736571f, +0.1226210f, +0.2036333f, +0.2652346f, -0.2459272f, -0.0869092f, +0.0828431f,
  +0.2477528f, -0.2411417f, -0.0067579f, +0.1589434f, +0.4383398f, +0.0789211f, +0.5302523f, +0.1086165f
);

const float biases[4] = float[4](
  +0.0745789f, -0.0032257f, -0.0236591f, -0.0958124f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer28 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1159721f, -0.1840696f, +0.1788063f, -0.2744607f, -0.3539007f, -0.1686218f, -0.0629100f, +0.1848536f,
  -0.1273230f, -0.0122420f, +0.0652980f, -0.2876342f, -0.3127661f, -0.0402132f, -0.1886606f, -0.0565638f,
  -0.0184931f, +0.1243187f, -0.0976791f, -0.2446709f, +0.1003155f, -0.0967552f, -0.2975922f, -0.2343582f,
  +0.1056651f, -0.0824385f, +0.0577955f, -0.2144866f, +0.1020507f, +0.0748655f, -0.2033168f, +0.0190689f,
  +0.0815351f, +0.3054082f, -0.0807744f, -0.1595493f, -0.2959638f, -0.0656500f, +0.6819881f, +0.3617273f,
  +0.1530207f, +0.2430929f, +0.1346172f, -0.1189428f, +0.2312980f, +0.0763759f, -0.5964426f, -0.2597066f,
  +0.2488405f, -0.2552455f, +0.0284548f, -0.2273058f, +0.0188904f, +0.6024303f, -0.4874248f, +0.2199320f,
  +0.0970384f, +0.0158086f, +0.0956970f, -0.0511395f, -0.0013044f, -0.0036069f, -0.0357738f, +0.2709628f,
  -0.1071576f, -0.1104913f, +0.0096289f, -0.0762681f, +0.2035391f, -0.0828020f, -0.4711339f, -0.0349922f,
  -0.0023965f, +0.0206759f, -0.4287871f, +0.1155866f, -0.3355948f, +0.2773961f, -0.1641991f, -0.0780969f,
  -0.0153519f, +0.1906200f, -0.0065104f, +0.2971983f, +0.4994142f, +0.0826283f, +0.0141460f, +0.2180898f,
  -0.2507843f, +0.4953938f, +0.1552673f, +0.1764667f, +0.2914508f, -0.1056794f, +0.1538767f, -0.1906677f,
  -0.3232654f, -0.1495653f, +0.1297652f, +0.1138351f, -0.0192560f, +0.0687040f, +0.3971305f, +0.1035363f,
  -0.0736600f, +0.0715423f, +0.0997160f, +0.2450661f, +0.1782584f, -0.0592687f, +0.0100689f, -0.0302123f,
  -0.0572407f, +0.2007154f, +0.0698162f, -0.2926046f, +0.0802535f, -0.1587602f, +0.0345282f, -0.0220912f,
  -0.0217571f, -0.1096300f, -0.0046950f, +0.0944664f, -0.0811167f, +0.4488727f, -0.1453499f, +0.1176281f,
  -0.3004795f, -0.0149551f, +0.2506751f, +0.0288687f, -0.1844287f, +0.0333445f, +0.2328234f, +0.2832707f,
  -0.1952601f, +0.0821873f, +0.0134449f, -0.2160838f, -0.1853692f, -0.1071643f, -0.1276377f, -0.0349848f,
  +0.2234296f, +0.0656516f, +0.0733586f, +0.1130066f, -0.1876416f, +0.0435671f, -0.0284469f, -0.1756443f,
  +0.0785284f, -0.0223855f, +0.3357817f, -0.0316257f, +0.0482328f, +0.0514369f, +0.1367338f, -0.0927257f,
  +0.0536947f, -0.1199955f, -0.0569958f, +0.1536098f, +0.0810953f, +0.0546411f, -0.2794154f, +0.2189907f,
  +0.2594303f, -0.1844791f, +0.0025780f, +0.0997379f, +0.0268951f, +0.1905642f, +0.1733221f, +0.0340738f,
  +0.1306315f, -0.0493179f, +0.1098700f, +0.0145237f, +0.0137997f, +0.1254656f, -0.2628719f, -0.0158960f,
  +0.1494318f, -0.0996633f, +0.2071884f, +0.1817141f, -0.0035144f, -0.0011490f, +0.1990235f, -0.1693498f,
  +0.0643847f, -0.1476319f, +0.2458204f, -0.0103021f, +0.0119645f, -0.0435390f, +0.1620399f, +0.2559344f,
  -0.1176340f, +0.0488811f, -0.0601070f, +0.0792517f, -0.0038626f, +0.1919923f, -0.0690744f, +0.0395902f,
  -0.0068402f, +0.0702563f, +0.1805185f, +0.0006026f, -0.3245410f, +0.0162065f, -0.0078302f, -0.0308892f,
  +0.1384126f, -0.2384258f, +0.1851337f, +0.2650066f, -0.1858064f, +0.2279247f, +0.0378603f, +0.0931567f,
  +0.2842142f, -0.0173051f, +0.0882026f, +0.0625648f, +0.1062417f, +0.0280592f, -0.6468094f, +0.0058733f,
  +0.0572899f, +0.0818134f, -0.0550889f, +0.2305016f, -0.0406091f, -0.0789381f, +0.3538688f, +0.1256607f,
  +0.0039783f, -0.0023413f, -0.0565321f, -0.0944281f, +0.1165089f, -0.2348577f, +0.0253907f, +0.3775217f,
  +0.2249852f, -0.2188142f, +0.1801448f, -0.1323673f, +0.3533249f, +0.0491730f, -0.5095299f, +0.1827901f,
  +0.2736329f, +0.0540518f, -0.2684953f, -0.1402574f, -0.0584511f, -0.0676286f, +0.4262462f, -0.0336562f,
  -0.1636109f, -0.2884883f, +0.0984083f, +0.0864571f, +0.0394807f, +0.2444681f, -0.1591206f, -0.0229743f,
  -0.4740278f, -0.2678172f, -0.3820117f, +0.4376386f, -0.0668974f, +0.0281340f, -0.3925184f, -0.0941648f,
  +0.1555636f, -0.0740490f, -0.4572664f, -0.0192868f, -0.1021749f, -0.0113809f, +0.1938945f, +0.0350229f
);

const float biases[4] = float[4](
  +0.0218325f, +0.0291028f, +0.0358336f, -0.0106754f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer29 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0801758f, -0.3444094f, +0.0665626f, -0.3073209f, -0.4645814f, +0.0478218f, +0.3404017f, +0.0246488f,
  +0.0814386f, -0.1182043f, +0.0692305f, -0.1033474f, +0.0561544f, -0.1285398f, +0.1382175f, +0.0593567f,
  -0.1863474f, -0.0375388f, -0.0107781f, +0.2871326f, -0.0237661f, -0.1865460f, +0.1227672f, +0.0583920f,
  +0.1279172f, -0.2282204f, -0.1475137f, -0.4070563f, -0.0126943f, +0.0157829f, +0.0873953f, -0.4248028f,
  +0.0158054f, -0.0397051f, +0.1923614f, -0.1121515f, -0.3616422f, -0.0256313f, -0.2392042f, -0.3657347f,
  +0.1064666f, -0.0710832f, +0.1246645f, -0.0741253f, -0.0668585f, -0.0674678f, -0.0332918f, -0.0313093f,
  -0.0325896f, -0.0363608f, +0.1006249f, +0.0034918f, +0.1031106f, +0.3387053f, -0.0635147f, +0.1475719f,
  -0.0085964f, -0.0623199f, +0.3864993f, +0.1975144f, +0.1671164f, +0.0417214f, +0.0976571f, -0.1983193f,
  -0.0131759f, +0.0191656f, +0.0372230f, +0.1289068f, +0.0769736f, +0.1333939f, -0.1393076f, +0.0538433f,
  +0.1591066f, -0.0244696f, -0.0900577f, -0.0500867f, -0.0290490f, +0.2360749f, -0.1218539f, +0.0894509f,
  +0.2670262f, +0.0864725f, -0.0078961f, -0.0991012f, +0.0466174f, +0.2370500f, +0.0793876f, +0.0468126f,
  -0.2744219f, -0.3535824f, -0.0174828f, +0.1686942f, +0.1324544f, -0.2036767f, -0.1405487f, -0.0044687f,
  +0.2681454f, -0.1413052f, +0.1283352f, -0.1448254f, +0.0854012f, -0.0868755f, +0.0523443f, -0.1211476f,
  +0.2206369f, +0.1121435f, +0.0077213f, -0.4338892f, -0.4528051f, +0.0382502f, +0.0059353f, -0.2082726f,
  -0.1228473f, -0.1695027f, -0.1515403f, -0.0739136f, +0.0205695f, +0.1782695f, +0.1736270f, -0.0880364f,
  -0.1317671f, -0.0253667f, +0.2261897f, +0.0000044f, +0.3344663f, -0.0963023f, +0.1295144f, -0.0821564f,
  -0.2346793f, -0.3736281f, +0.1228277f, -0.2667879f, +0.0084385f, -0.2489770f, +0.2437086f, +0.0332788f,
  +0.2617336f, -0.1998526f, +0.0221086f, -0.2135528f, +0.0495298f, -0.0824914f, +0.0230206f, +0.1836252f,
  -0.0705408f, -0.0261402f, +0.2698874f, -0.0384164f, -0.0654758f, -0.0620149f, -0.1409004f, +0.0918005f,
  +0.3439910f, +0.2293718f, -0.0741057f, -0.1245841f, -0.5149498f, -0.1034916f, +0.0210949f, -0.5330595f,
  -0.4823095f, +0.2138305f, -0.0037067f, +0.2832962f, -0.0965277f, -0.0082012f, +0.0971406f, -0.3014865f,
  -0.1418219f, +0.0733835f, +0.0096175f, +0.0457514f, -0.0355200f, -0.0425862f, -0.1629228f, -0.0146066f,
  +0.2955827f, +0.1888160f, -0.7283009f, -0.2741114f, +0.1043524f, -0.0618325f, -0.4307505f, -0.2724800f,
  -0.0542457f, +0.3484648f, -0.2917853f, -0.0018693f, +0.2039957f, +0.1431232f, -0.0122629f, -0.7167711f,
  -0.3281110f, -0.0324824f, +0.2726650f, +0.0298675f, +0.1486232f, -0.0839294f, +0.2601445f, +0.2713389f,
  -0.0880604f, -0.0331862f, +0.0075068f, +0.2067219f, -0.1828546f, -0.0473248f, -0.2087375f, -0.1421764f,
  -0.4305918f, +0.1607416f, -0.1928925f, +0.5562932f, +0.0933892f, -0.1208097f, +0.1861249f, -0.5124500f,
  +0.0380993f, +0.0541106f, +0.0070969f, -0.1313235f, -0.1089339f, +0.0893662f, -0.0703797f, -0.3233452f,
  -0.0371968f, -0.2772087f, +0.3275415f, +0.1589052f, -0.6456177f, -0.0860190f, -0.1625072f, -0.0625132f,
  -0.2387093f, -0.0656510f, +0.0754689f, +0.0485728f, -0.0318229f, -0.3682634f, +0.0635795f, -0.0681160f,
  +0.1526381f, +0.0780498f, +0.0413572f, +0.1007885f, -0.1748052f, -0.1518346f, -0.0027935f, -0.2550605f,
  -0.1160565f, -0.0848891f, +0.1167140f, -0.1644213f, +0.1089564f, -0.0860576f, +0.0373614f, -0.0720518f,
  -0.4252853f, +0.0920292f, -0.1471799f, +0.2924934f, -0.1507330f, -0.2713678f, +0.0459647f, -0.2133857f,
  +0.0781105f, -0.1655910f, -0.0443840f, +0.0698690f, +0.0260419f, +0.0416697f, +0.1516832f, -0.1472954f,
  +0.3406346f, +0.0518005f, -0.0560056f, +0.1057560f, +0.3215919f, +0.1350721f, -0.1847209f, -0.1367742f,
  -0.3793339f, -0.1172432f, -0.0539690f, -0.0280342f, -0.2143665f, -0.3635056f, -0.0634024f, -0.1260453f
);

const float biases[4] = float[4](
  +0.0101709f, -0.0481928f, -0.0502765f, +0.0012423f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer29 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0939815f, -0.4503810f, +0.1060413f, +0.2731614f, -0.0162060f, -0.0154940f, +0.0372247f, -0.0174259f,
  +0.2973595f, +0.0024574f, -0.3575018f, +0.1197944f, +0.3000745f, -0.2576262f, +0.0444045f, -0.0380949f,
  +0.1411418f, -0.1003861f, -0.3281022f, +0.0909762f, -0.1929502f, -0.0659122f, -0.0640107f, +0.3234790f,
  -0.0090599f, -0.0552493f, -0.1671764f, +0.0963191f, -0.0586325f, +0.0573929f, +0.1646359f, +0.0020825f,
  -0.1129684f, +0.0377835f, -0.1915661f, +0.0225712f, +0.1312910f, -0.0786357f, -0.0466567f, -0.4672149f,
  +0.0386509f, +0.0172506f, -0.1088126f, -0.0296867f, -0.1311351f, -0.1119636f, -0.1912136f, -0.2694094f,
  -0.4849618f, -0.2709934f, +0.0249128f, +0.0834189f, -0.3401461f, +0.0779814f, +0.0909866f, +0.0658276f,
  -0.0551538f, +0.1900069f, +0.1754150f, +0.1452936f, -0.4243865f, -0.1975846f, +0.0212200f, -0.1938531f,
  -0.0576088f, -0.0040046f, +0.2712679f, +0.1086294f, -0.1735905f, -0.1126061f, -0.1582183f, +0.1540590f,
  +0.0324187f, +0.0006038f, +0.2163494f, -0.1015346f, -0.0935346f, -0.0754334f, +0.2078519f, -0.0942708f,
  -0.1823664f, -0.2485853f, +0.3323615f, -0.1081518f, +0.2047675f, -0.0408286f, -0.3077564f, +0.3790894f,
  -0.1502875f, +0.0480225f, +0.0727671f, -0.0051967f, +0.1070744f, -0.1670179f, +0.1203798f, +0.3552725f,
  +0.4209865f, +0.0099320f, -0.1519299f, -0.1326971f, -0.0397518f, +0.2321099f, +0.1164272f, -0.0827851f,
  +0.1008231f, +0.0359892f, +0.0277518f, +0.1419305f, -0.0723893f, +0.0743760f, -0.1107761f, +0.0513731f,
  -0.0673793f, -0.0666145f, +0.0451535f, -0.1561218f, -0.2435330f, -0.1675431f, -0.2260279f, +0.1585203f,
  +0.0495715f, -0.1337535f, -0.2075793f, -0.0498627f, +0.0222387f, -0.1031505f, -0.1314117f, -0.3067729f,
  +0.0562300f, -0.0035971f, +0.0315242f, +0.1337712f, -0.0086379f, +0.1016874f, +0.3329841f, +0.0331842f,
  +0.1387093f, -0.1104559f, -0.0317311f, +0.0035793f, +0.0441923f, +0.0446663f, +0.0202008f, +0.1091381f,
  -0.1008675f, +0.1408861f, +0.1485291f, -0.2766851f, -0.2703494f, +0.1349650f, -0.0154322f, -0.0737061f,
  -0.6222288f, -0.0513141f, +0.3033162f, -0.0211311f, -0.1232780f, -0.1112559f, +0.0028275f, +0.1313916f,
  +0.0223686f, +0.0300482f, -0.1528186f, +0.1061695f, +0.1149903f, -0.1226184f, -0.0628565f, +0.0840449f,
  -0.1343004f, -0.0334117f, +0.0275365f, +0.2137776f, -0.1297067f, +0.0562478f, -0.0542133f, -0.5250181f,
  -0.0438157f, +0.3634291f, +0.1454467f, +0.0675334f, -0.2023026f, -0.0451123f, +0.2710963f, -0.0117688f,
  -0.0000340f, +0.1214944f, +0.1358440f, +0.0129958f, -0.1081527f, +0.0857031f, -0.0069751f, -0.3329696f,
  -0.0521200f, +0.0712966f, +0.1039545f, -0.0278342f, -0.0448908f, +0.4022343f, +0.0062330f, +0.2108685f,
  +0.0001109f, -0.2303228f, +0.0193619f, -0.1839236f, -0.0087322f, +0.3016178f, +0.1403545f, -0.0982849f,
  -0.1170718f, -0.0949181f, -0.1155751f, -0.0289157f, +0.4403808f, +0.2234273f, -0.0349800f, +0.0549022f,
  +0.0693265f, +0.1902934f, +0.0604887f, +0.3236751f, +0.0846350f, -0.0979100f, -0.1486064f, +0.0307303f,
  -0.1478511f, -0.0034147f, +0.0808529f, +0.0433855f, -0.0363919f, +0.0974796f, +0.2308598f, -0.1064057f,
  +0.0360338f, +0.3000016f, +0.0963518f, -0.1695717f, +0.3432574f, +0.0714952f, +0.1535635f, -0.1305554f,
  -0.1320391f, +0.1741512f, -0.2315373f, +0.3203842f, -0.1651580f, -0.2025913f, +0.0363377f, -0.1424757f,
  +0.0616438f, -0.0303126f, +0.1601618f, -0.0012699f, -0.1030909f, +0.0548217f, +0.1661935f, +0.0426797f,
  +0.3671480f, -0.1648354f, +0.2255739f, -0.2261342f, +0.1088799f, -0.0601448f, -0.0634743f, +0.2728291f,
  -0.2004806f, +0.1058424f, +0.0685145f, -0.1683431f, -0.2597575f, -0.2662397f, +0.2126862f, -0.1104796f,
  -0.1168002f, -0.0673570f, -0.2654620f, -0.4150856f, +0.0643799f, -0.3069822f, +0.2067316f, +0.1972831f,
  +0.1336066f, +0.0979462f, -0.2185973f, -0.0544663f, -0.2986331f, -0.1208941f, -0.0322774f, -0.0074322f
);

const float biases[4] = float[4](
  -0.0672474f, +0.0327151f, +0.0470068f, -0.2436006f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer30 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0915645f, +0.0555595f, +0.4573233f, +0.0652446f, -0.0107209f, -0.2450620f, -0.2549410f, +0.0195364f,
  +0.0054039f, +0.3434036f, -0.2487963f, -0.1383741f, +0.0215387f, -0.3594791f, +0.0581646f, +0.1321047f,
  +0.2044177f, +0.0771638f, -0.1390572f, -0.3424647f, +0.1729382f, +0.0236835f, +0.2932900f, -0.0235531f,
  +0.0066749f, +0.1479951f, +0.0693757f, +0.3217711f, +0.0402407f, +0.1236924f, -0.1852696f, -0.1346859f,
  +0.1446163f, +0.0383090f, -0.3563315f, +0.2117915f, -0.1069632f, -0.1581002f, +0.3562139f, +0.1318209f,
  +0.0110833f, +0.1218523f, -0.3378788f, +0.1040632f, +0.2112021f, -0.1568349f, -0.1097220f, +0.1288892f,
  -0.0436020f, -0.0073466f, -0.0447647f, +0.1438999f, -0.1527298f, -0.2302568f, -0.0470836f, +0.3150474f,
  +0.1020358f, -0.0122937f, -0.2623397f, +0.2217674f, +0.0340803f, -0.1322860f, +0.1684631f, +0.1616878f,
  +0.1566178f, -0.0253836f, -0.3322861f, -0.1820067f, -0.0376473f, -0.1121839f, +0.0640300f, +0.0961713f,
  +0.1593469f, +0.1383124f, -0.1799105f, +0.0327521f, -0.1709828f, +0.3155297f, -0.1185177f, +0.1747863f,
  +0.0895006f, +0.2568001f, -0.1230537f, +0.2085288f, -0.2158323f, +0.2740678f, +0.1018211f, +0.0560583f,
  -0.0447176f, -0.0392098f, +0.1989855f, +0.3490150f, -0.0888307f, +0.3296392f, -0.2307078f, +0.1393180f,
  -0.0746480f, -0.1819051f, -0.0320346f, +0.2320468f, +0.1205385f, +0.1795080f, +0.1870114f, +0.1581747f,
  -0.2697161f, +0.1442149f, -0.0996643f, -0.1225863f, +0.0921582f, +0.0352826f, -0.1263073f, +0.2339681f,
  -0.1965338f, +0.1089200f, +0.0695662f, -0.3067647f, +0.0925939f, -0.0106417f, -0.0785447f, -0.1705306f,
  -0.0200412f, +0.2295587f, +0.1196307f, -0.0092578f, -0.1087194f, -0.0029572f, +0.1613438f, +0.1452950f,
  +0.1554467f, +0.1541494f, -0.0545263f, +0.1956175f, -0.2189053f, +0.1131870f, +0.1734448f, +0.0883374f,
  -0.0263935f, +0.1736428f, +0.0447550f, +0.0694490f, -0.0335252f, +0.0222126f, -0.1068291f, +0.0042449f,
  +0.3421306f, -0.0131763f, -0.1054002f, -0.0417681f, -0.1426404f, +0.1464608f, -0.0185892f, +0.1346705f,
  +0.0748272f, +0.3512173f, +0.1535725f, +0.0613302f, +0.0052773f, +0.0020929f, +0.1855936f, +0.0007958f,
  +0.0686522f, +0.1081603f, +0.0448842f, +0.2593807f, -0.2142915f, +0.5578769f, -0.1238642f, +0.0508697f,
  +0.1877304f, -0.0385080f, +0.3097442f, -0.4027765f, -0.0566629f, +0.1082214f, -0.1553958f, -0.1280380f,
  -0.0854580f, +0.1480600f, +0.2311556f, -0.0411573f, +0.2764333f, -0.2559882f, -0.4013149f, -0.3089267f,
  -0.0322994f, -0.0588245f, +0.2295780f, -0.1805673f, +0.1298024f, +0.3744259f, -0.1698575f, -0.3433871f,
  +0.1243754f, +0.4275954f, +0.2490224f, +0.0409289f, +0.3072311f, +0.0190409f, -0.0061503f, -0.3902813f,
  -0.0982233f, +0.2795871f, +0.1813907f, +0.1094555f, +0.1871095f, -0.2318239f, -0.2125890f, +0.1260564f,
  +0.2555692f, +0.0957950f, +0.2149622f, +0.1904856f, -0.2551234f, -0.2290539f, -0.2310578f, -0.3433670f,
  +0.0135128f, -0.0135631f, -0.0873754f, -0.0138000f, -0.3424539f, +0.0949002f, +0.0031851f, -0.1489788f,
  +0.3509564f, -0.0049263f, +0.1438961f, -0.0311380f, -0.2149696f, -0.1472557f, +0.0497810f, -0.0261459f,
  -0.0505215f, -0.1479994f, +0.5958629f, +0.1448657f, -0.1849659f, +0.0609386f, -0.1481069f, -0.1428851f,
  +0.0222002f, +0.1387156f, +0.1353569f, +0.2309021f, -0.3124890f, +0.4984999f, -0.0082364f, +0.0481992f,
  +0.2020338f, -0.0160109f, -0.0775631f, -0.0387845f, +0.0710507f, +0.1593050f, -0.3542805f, +0.0092904f,
  +0.2682407f, -0.2662587f, +0.2440615f, +0.2913242f, -0.0212768f, +0.1813342f, -0.0151495f, -0.0915412f,
  +0.1698633f, +0.2243313f, +0.0095508f, +0.0072509f, -0.1391521f, +0.1646119f, +0.2818375f, -0.2593268f,
  +0.3844499f, -0.1456887f, +0.2282906f, -0.2445927f, +0.0162886f, -0.1833097f, +0.2254745f, -0.2131847f,
  +0.2205302f, +0.0450661f, +0.1637789f, +0.0772712f, +0.1733702f, -0.1223778f, +0.3488530f, -0.0840362f
);

const float biases[4] = float[4](
  +0.0874822f, +0.0238190f, -0.0310156f, -0.0227183f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer30 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1994114f, +0.0105054f, -0.2491384f, +0.2255311f, -0.3678451f, +0.2124920f, -0.3967696f, -0.0566900f,
  -0.1325467f, +0.1950080f, +0.0365433f, +0.1169622f, +0.1062136f, +0.2320126f, -0.0089572f, +0.0598886f,
  -0.1906877f, +0.0207236f, -0.1810067f, -0.0263417f, -0.2456855f, +0.1378875f, -0.0012500f, +0.2164848f,
  +0.0951887f, +0.1515922f, -0.3166598f, +0.0091871f, -0.2102307f, +0.0063259f, -0.1995123f, +0.0681795f,
  +0.3379964f, +0.2899911f, -0.1803252f, -0.1617727f, -0.1961728f, -0.2008808f, +0.2199200f, +0.4220318f,
  +0.1582718f, +0.0726568f, -0.2306114f, +0.0259695f, -0.0707358f, -0.3112014f, +0.1185343f, +0.1584968f,
  +0.0708937f, +0.1176291f, +0.1227508f, -0.0486931f, -0.0983958f, +0.0620100f, -0.0381884f, -0.2053663f,
  -0.1671435f, -0.2915914f, +0.1621236f, +0.2916100f, -0.1682137f, -0.3233006f, +0.0383389f, -0.0314810f,
  +0.1441597f, +0.1073087f, +0.0367066f, +0.1498924f, -0.0649878f, -0.0769229f, +0.2965025f, -0.1921578f,
  -0.0012421f, +0.1875992f, +0.2662922f, +0.1783195f, -0.2006945f, -0.1368010f, -0.0233475f, +0.1677264f,
  -0.1639645f, +0.3456513f, -0.2551799f, -0.2080481f, +0.2030870f, -0.2147259f, +0.0947476f, -0.3212740f,
  -0.2658700f, +0.1251314f, +0.0677361f, -0.1260567f, -0.0325282f, +0.1323200f, -0.0203049f, +0.3054956f,
  +0.1268493f, +0.1378565f, -0.1658645f, +0.1608693f, +0.1118313f, +0.1287895f, -0.0556214f, +0.2074198f,
  +0.0528064f, +0.0108305f, -0.1383536f, -0.0992790f, +0.0715225f, +0.0229775f, +0.0593503f, -0.0109269f,
  +0.1226695f, -0.1308140f, +0.0073796f, -0.1538740f, +0.4447024f, -0.5151580f, -0.0430936f, +0.0986474f,
  +0.0522464f, +0.3042705f, +0.1249668f, +0.1393877f, +0.0595618f, -0.0973230f, -0.0736595f, -0.0781278f,
  +0.2198490f, +0.2210678f, -0.3030722f, -0.0369214f, +0.2147463f, -0.0937889f, +0.0507913f, +0.3071327f,
  +0.4454251f, +0.0754393f, +0.0272559f, -0.0083369f, -0.0447109f, +0.0452216f, -0.0907223f, +0.3689432f,
  +0.1603928f, +0.0268184f, -0.0528816f, -0.1940627f, +0.0151051f, -0.0956756f, -0.1031584f, +0.1071634f,
  -0.1145852f, +0.0277473f, +0.2457874f, -0.0289679f, +0.0522320f, -0.0122891f, +0.0302477f, +0.1771088f,
  -0.0087245f, -0.0857720f, +0.2412433f, +0.0165905f, -0.1303174f, -0.0279614f, -0.0595054f, -0.2992891f,
  +0.0483664f, +0.1181840f, -0.0074198f, -0.0088149f, +0.0955740f, +0.0342714f, +0.0132448f, +0.0675536f,
  +0.0874849f, -0.2690833f, +0.0205929f, -0.2881653f, -0.0005774f, +0.0887281f, -0.0657046f, +0.1617573f,
  +0.0179688f, +0.1420607f, +0.1009888f, +0.0411212f, +0.0102365f, +0.0008380f, -0.0569814f, -0.1703905f,
  +0.0433164f, +0.0537651f, -0.0834312f, -0.0422423f, +0.1810650f, -0.1321466f, -0.2010800f, -0.0781103f,
  +0.0952807f, +0.0855499f, -0.0114259f, +0.0534224f, -0.0315952f, -0.0652190f, -0.1440868f, +0.0566173f,
  -0.0039720f, -0.0086644f, +0.1461106f, +0.0146944f, +0.0893441f, +0.0025430f, +0.0294572f, +0.0787285f,
  -0.1043914f, -0.0429719f, -0.1038213f, -0.1296610f, -0.1062821f, +0.1212058f, -0.0697701f, -0.4753078f,
  +0.2076991f, -0.2223885f, +0.0381540f, +0.2721279f, -0.1347315f, -0.1747917f, -0.1584698f, -0.3041695f,
  -0.1038024f, +0.0810124f, +0.3487957f, +0.2822752f, -0.1923480f, +0.3184122f, -0.2185007f, -0.0111645f,
  +0.1013846f, +0.1559023f, +0.1874353f, -0.0507506f, +0.3594255f, -0.0662667f, +0.0778021f, +0.3503577f,
  +0.5114160f, +0.1354057f, -0.0735187f, -0.0732951f, +0.1416501f, +0.0497715f, +0.1120375f, -0.0047213f,
  +0.4921427f, -0.0122293f, +0.2824754f, +0.0293674f, -0.0190311f, -0.2772968f, +0.1272803f, -0.1864477f,
  +0.0160660f, +0.2542842f, -0.2141632f, -0.1304051f, -0.1406773f, -0.0475721f, -0.2103211f, +0.0029392f,
  +0.2001205f, +0.0273405f, +0.0675333f, -0.1131790f, -0.0114413f, +0.2078861f, -0.3470193f, -0.2231228f,
  +0.1650447f, +0.1587805f, +0.2233672f, +0.1284214f, -0.3842926f, -0.1568143f, -0.2216499f, +0.0015782f
);

const float biases[4] = float[4](
  +0.0375755f, +0.0047121f, +0.0431659f, -0.0206657f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer31 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2313094f, -0.0869097f, +0.0043248f, -0.0923182f, -0.1416128f, +0.1979580f, -0.0534672f, +0.1130181f,
  +0.1137223f, -0.1239601f, +0.0127673f, +0.1091318f, -0.2064000f, +0.3161048f, -0.0455590f, -0.4089472f,
  +0.0460271f, -0.0816414f, -0.2359257f, +0.3066843f, -0.0120717f, -0.1043020f, +0.0320638f, -0.3728187f,
  +0.0827012f, -0.2029430f, +0.0784111f, -0.3556232f, -0.0171496f, +0.0342996f, -0.0171555f, +0.2133484f,
  +0.1815871f, +0.0493424f, +0.0140597f, -0.0035576f, +0.0470960f, +0.2659534f, -0.1054420f, -0.0386227f,
  +0.0384955f, +0.1154872f, -0.2009461f, +0.0363861f, -0.3345739f, -0.2189630f, -0.1622223f, +0.3309239f,
  +0.0689019f, +0.2016346f, +0.1605471f, -0.0688866f, -0.2613364f, -0.2316999f, +0.0838193f, +0.1614369f,
  -0.1580528f, +0.0970528f, +0.3539647f, +0.0609405f, -0.1556594f, -0.1027071f, -0.2187154f, +0.2162675f,
  -0.1040059f, +0.0459815f, +0.0432700f, +0.1068682f, +0.0197006f, +0.0326736f, +0.1458204f, +0.1647112f,
  -0.0025237f, +0.2388158f, -0.2922887f, -0.1630223f, -0.0815972f, -0.0340652f, -0.0456771f, -0.3399181f,
  -0.2815311f, -0.1444282f, -0.1059299f, +0.0789303f, -0.3980466f, +0.1045068f, +0.2332244f, +0.0495790f,
  -0.1452260f, -0.0225653f, -0.1514992f, +0.2325223f, -0.0270738f, -0.3891771f, +0.1103983f, -0.2508425f,
  -0.0694925f, -0.1686293f, -0.4521457f, +0.0648973f, +0.3686200f, +0.0175355f, -0.1653298f, -0.1838352f,
  -0.2573368f, +0.1994304f, -0.2282572f, +0.3883546f, -0.4714498f, -0.0842595f, +0.1786711f, -0.0021069f,
  -0.1065347f, +0.4462214f, +0.0992880f, -0.0318480f, -0.2343047f, +0.1405221f, -0.0496339f, -0.4540009f,
  +0.0329351f, +0.1415501f, -0.0346325f, -0.1585237f, +0.3394634f, -0.3049469f, -0.0678802f, -0.3690140f,
  -0.1202565f, -0.3850280f, +0.0714454f, -0.0074431f, +0.5829720f, -0.1310554f, -0.0512091f, -0.0528103f,
  -0.1302401f, +0.1256846f, +0.0354928f, -0.1420428f, -0.0943227f, +0.2551621f, -0.0515927f, -0.0038256f,
  +0.0933671f, -0.0895671f, +0.0725444f, -0.2685624f, +0.1481162f, +0.3739264f, +0.0891151f, -0.0189617f,
  +0.1155895f, -0.5907221f, +0.1129973f, -0.0781235f, -0.1840515f, +0.3245463f, +0.2216411f, +0.2866738f,
  -0.0224940f, -0.2779467f, -0.0190439f, -0.0009473f, -0.0568123f, -0.2702210f, -0.0215199f, +0.1275320f,
  -0.3581665f, -0.2587228f, -0.1524221f, +0.4463688f, -0.0157913f, -0.3333403f, -0.0861133f, -0.3327708f,
  -0.3975060f, +0.2168101f, -0.1955405f, +0.3539676f, +0.1043268f, -0.2442399f, +0.0562525f, +0.0461374f,
  -0.0562435f, +0.4421416f, -0.1915308f, +0.1216604f, -0.0425092f, -0.3213620f, -0.1059898f, +0.1667351f,
  -0.0104935f, +0.4971307f, -0.0112218f, -0.0764106f, +0.0281113f, -0.3608953f, -0.1562657f, -0.1291027f,
  -0.0562493f, +0.4129565f, -0.1906175f, -0.1604977f, -0.0050599f, -0.1462146f, -0.0690067f, +0.0433229f,
  +0.0665201f, +0.0939477f, +0.2001441f, -0.2192773f, +0.0915302f, +0.1255575f, -0.0096770f, -0.2556022f,
  -0.0018270f, +0.1097375f, +0.1627658f, +0.0697776f, -0.3473942f, -0.2867345f, +0.1966434f, -0.1113148f,
  +0.2651562f, -0.0750057f, +0.0824101f, -0.1278559f, -0.1494558f, +0.1251888f, -0.2026627f, -0.1875318f,
  +0.0205341f, -0.2512059f, -0.0581999f, +0.1188066f, +0.0200190f, -0.2294402f, +0.1365371f, -0.1579029f,
  -0.3317945f, +0.0976036f, +0.2335265f, +0.0223917f, -0.1933848f, +0.2338067f, +0.2757056f, +0.3979344f,
  +0.0419698f, -0.0377151f, +0.2148098f, +0.1152135f, -0.0083246f, +0.1312437f, -0.0366139f, +0.0209863f,
  -0.3628463f, +0.0225404f, -0.0810244f, +0.2422159f, +0.0296194f, +0.0088464f, -0.1707930f, -0.2264639f,
  -0.1817298f, -0.0799313f, +0.1076984f, +0.3147894f, +0.2430211f, +0.0759776f, -0.0570084f, -0.0911549f,
  -0.1028681f, -0.0313165f, +0.2148780f, +0.1817880f, -0.1631633f, +0.4226441f, +0.1234218f, -0.0547712f,
  -0.2715976f, -0.1674984f, -0.1164577f, +0.2712219f, +0.1121165f, -0.1637383f, +0.3213267f, -0.0732617f
);

const float biases[4] = float[4](
  +0.0869977f, -0.0509548f, -0.0770242f, -0.0170334f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer31 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2989145f, -0.1054237f, -0.0867825f, +0.0943094f, -0.0515420f, -0.2867909f, +0.1045906f, -0.1235403f,
  -0.5025240f, +0.0089578f, +0.2118303f, -0.2442111f, -0.2021737f, -0.2690786f, +0.0305127f, -0.0278337f,
  +0.0880193f, +0.2232211f, +0.0828982f, -0.3674947f, +0.4138291f, -0.2462611f, +0.1201954f, +0.2483536f,
  -0.2667315f, +0.0429036f, +0.0569162f, -0.0324484f, -0.0471553f, +0.1548169f, +0.0572765f, -0.1882763f,
  -0.0120749f, +0.0438583f, +0.0682355f, -0.1487200f, -0.1880694f, +0.1219149f, +0.0758600f, +0.0261320f,
  -0.0803179f, +0.0299510f, -0.2687025f, +0.1986426f, +0.1301341f, +0.0339486f, -0.1534129f, -0.4817757f,
  +0.0644863f, +0.3529932f, +0.0763367f, +0.1474432f, +0.2380931f, -0.1823502f, +0.0549583f, +0.2629699f,
  +0.0777629f, -0.1981783f, -0.3087944f, -0.0571782f, +0.1433705f, -0.1100080f, -0.1539259f, -0.3456619f,
  -0.0315995f, -0.3628956f, -0.3048787f, +0.1758202f, -0.0652029f, -0.0509408f, -0.0833980f, -0.0362324f,
  -0.0508940f, -0.0200512f, +0.1843779f, +0.0894637f, +0.1680949f, -0.0633578f, +0.1323569f, -0.1008821f,
  +0.0864234f, -0.0272971f, -0.1382942f, -0.1175340f, +0.1608206f, +0.0976377f, -0.3795520f, +0.1051470f,
  +0.1742432f, +0.1026427f, +0.0999134f, +0.0062252f, -0.2679527f, +0.0297876f, +0.0270743f, +0.2377083f,
  +0.0987710f, -0.1836541f, +0.1702594f, +0.1045456f, +0.1348344f, -0.1261601f, +0.2614929f, +0.1715105f,
  +0.1229080f, +0.3139871f, +0.0925153f, +0.1391869f, +0.1075552f, -0.1365948f, -0.3827114f, +0.2073131f,
  +0.1650918f, -0.0627458f, -0.2274053f, +0.0580350f, +0.0383453f, -0.2318202f, +0.2397599f, +0.2667108f,
  -0.0971665f, +0.0266678f, +0.1876741f, -0.1778154f, -0.0172610f, -0.1450804f, +0.0775867f, -0.0032750f,
  -0.1102838f, +0.0327995f, +0.5430931f, +0.1143598f, +0.1046206f, -0.0260768f, +0.0665128f, -0.0230143f,
  -0.3253572f, -0.0306644f, +0.3133654f, +0.0418857f, +0.0374904f, +0.0052757f, -0.1425026f, +0.2939207f,
  +0.2827097f, -0.0717702f, -0.1202584f, +0.2545722f, +0.2299731f, +0.1112345f, +0.0501078f, -0.3742223f,
  +0.1680874f, -0.0014126f, -0.0631932f, +0.0677133f, +0.1201377f, +0.1944546f, -0.2554330f, -0.0618584f,
  +0.2029937f, -0.1893210f, -0.0989004f, -0.2578193f, +0.2250090f, -0.1204731f, -0.1921182f, -0.0968013f,
  +0.0283069f, +0.2414718f, -0.0061793f, -0.0420486f, -0.3673837f, +0.1564066f, +0.1234499f, -0.1515395f,
  -0.3564295f, +0.1497125f, +0.3061666f, -0.2522327f, +0.2830162f, -0.1851683f, -0.0362132f, -0.1625219f,
  +0.2449665f, -0.0789791f, +0.1593285f, +0.0528161f, +0.1164325f, +0.0834929f, -0.0388248f, +0.0186522f,
  -0.0325003f, +0.0385352f, -0.1352746f, +0.0491102f, +0.1444975f, -0.3440491f, -0.1876741f, -0.0479900f,
  +0.0803355f, +0.1400903f, +0.2637899f, +0.0899184f, -0.2570328f, +0.0310655f, +0.0095698f, -0.4213623f,
  +0.0195519f, +0.1636236f, +0.2509642f, +0.3433242f, +0.1584097f, -0.1312133f, +0.0907416f, -0.2325382f,
  +0.1707491f, +0.1081950f, -0.5360623f, -0.2842149f, -0.2029731f, -0.2997104f, -0.0070710f, -0.0579519f,
  -0.1237498f, -0.1154918f, -0.3868237f, -0.6098527f, -0.0350888f, -0.2235574f, +0.0513591f, +0.4660868f,
  -0.1857224f, -0.3072480f, -0.4090979f, -0.0037869f, -0.1233852f, -0.0929108f, -0.0615607f, -0.0337360f,
  -0.3063315f, +0.1232569f, +0.0450913f, -0.2971101f, -0.1714025f, +0.0334989f, -0.2635326f, -0.2507873f,
  -0.4098444f, -0.4292425f, +0.1864944f, -0.2349595f, +0.0216335f, -0.0514949f, -0.2029812f, -0.2673499f,
  +0.0427446f, -0.1804757f, +0.0052922f, +0.0269404f, -0.3064340f, +0.0541899f, +0.2376565f, -0.1337660f,
  -0.0979856f, -0.4285418f, +0.1065998f, -0.1907153f, -0.2454844f, -0.0546603f, +0.2325057f, -0.4666505f,
  -0.0547775f, -0.1232014f, -0.0644587f, -0.1859096f, -0.0517754f, -0.1342278f, +0.2346467f, -0.1087465f,
  -0.2882733f, +0.0714186f, -0.2695800f, +0.2064757f, +0.1602128f, +0.1144405f, +0.3025573f, +0.3051949f
);

const float biases[4] = float[4](
  -0.0044697f, +0.0576621f, -0.0019007f, -0.0443463f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer32 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0256817f, +0.1204588f, +0.0539336f, -0.1264589f, -0.3059767f, -0.0092470f, +0.2120567f, +0.1374864f,
  -0.0393743f, -0.2058497f, +0.1457259f, -0.0669393f, -0.1640445f, -0.0189728f, +0.0215846f, -0.1453206f,
  -0.1470953f, +0.1921608f, -0.4272368f, +0.1549783f, -0.0164623f, -0.2025239f, +0.3690105f, +0.0442958f,
  +0.1674158f, +0.5188574f, +0.3829841f, -0.0012408f, -0.1502631f, -0.1410474f, +0.0621141f, -0.1842381f,
  +0.0572625f, +0.0335794f, +0.1340584f, +0.0279440f, -0.0747835f, -0.1239680f, +0.4200099f, +0.4821374f,
  -0.2318729f, +0.2300566f, +0.2803701f, +0.6193932f, -0.1654100f, -0.1356618f, -0.0482010f, +0.2598090f,
  +0.0898552f, +0.3916890f, +0.2784167f, +0.1227220f, -0.3146717f, -0.1866780f, -0.0955921f, -0.1607182f,
  -0.1610784f, +0.2247641f, -0.0422190f, -0.2401898f, +0.1534547f, -0.0810234f, +0.2223209f, +0.0926880f,
  -0.3086607f, -0.1001090f, +0.1541246f, +0.1368734f, +0.2266554f, -0.3260950f, -0.2138481f, -0.1453147f,
  +0.1113461f, -0.2514365f, -0.0402864f, +0.1568798f, +0.4628945f, -0.0114051f, -0.4025670f, +0.2992567f,
  -0.2046139f, +0.2000969f, +0.0312548f, +0.3018683f, +0.1680588f, +0.0703399f, -0.1480592f, -0.1668068f,
  -0.1910878f, +0.1746020f, +0.0095350f, +0.0542921f, +0.0491929f, +0.1119376f, +0.0277700f, +0.0876637f,
  -0.0883028f, +0.0996518f, -0.1323203f, +0.0310071f, -0.0498104f, +0.0460484f, +0.1340304f, +0.2914067f,
  -0.0795440f, -0.0004695f, -0.5332797f, +0.1275181f, +0.1826220f, -0.1125947f, -0.0093787f, +0.2734833f,
  +0.2847392f, -0.2823614f, -0.5208776f, -0.0634103f, +0.0368985f, -0.0842933f, -0.2423041f, -0.2299842f,
  -0.0437458f, +0.2588889f, +0.1289193f, +0.1851858f, +0.1771803f, +0.0506519f, +0.0764349f, +0.1898373f,
  +0.0783354f, +0.5954215f, +0.3342359f, +0.0759899f, +0.0516877f, +0.0218883f, +0.0619836f, +0.1687452f,
  +0.2454596f, -0.0100339f, +0.2240945f, +0.0275801f, -0.1022706f, -0.0460740f, +0.0383744f, -0.0265362f,
  -0.3257400f, -0.1042783f, +0.1559189f, +0.1924498f, +0.3126265f, +0.1225980f, -0.2907194f, -0.0521164f,
  -0.1580821f, -0.3217368f, +0.4569499f, +0.0545593f, +0.3917097f, -0.0919524f, -0.1690087f, +0.0738401f,
  +0.0470685f, -0.0121655f, +0.1811589f, -0.0567558f, +0.0294952f, -0.0282285f, +0.0647123f, -0.1006474f,
  +0.2538164f, +0.2774101f, +0.1499769f, -0.0591084f, +0.3640162f, +0.2004675f, +0.2172178f, +0.0624119f,
  +0.0814149f, +0.1975328f, +0.1181680f, -0.0062859f, +0.4019836f, +0.1209144f, -0.5197092f, -0.0682224f,
  -0.0320141f, +0.1656862f, +0.0458678f, -0.2984579f, +0.0251648f, +0.0669655f, -0.0088523f, -0.0528311f,
  -0.0104721f, +0.2100944f, -0.2820846f, -0.0541219f, +0.4618138f, -0.0497864f, -0.0395023f, +0.0500507f,
  +0.0608730f, +0.4748276f, +0.0894729f, -0.0918008f, +0.0623256f, -0.0249143f, +0.0605067f, +0.0919473f,
  +0.0345575f, +0.1348491f, +0.1132579f, +0.0600117f, +0.0838393f, -0.0258513f, +0.0429607f, +0.3374632f,
  -0.3081343f, +0.2777537f, +0.4837196f, -0.2185837f, +0.0454304f, -0.1686941f, +0.0162183f, -0.2229071f,
  -0.0358401f, -0.2901089f, -0.1807670f, -0.0965699f, +0.5899978f, -0.1123497f, +0.2111832f, +0.0674200f,
  +0.0117453f, -0.1782338f, -0.1909833f, -0.2838282f, +0.3871971f, +0.2731773f, -0.2233745f, +0.1531578f,
  -0.0651124f, +0.0052354f, +0.0689821f, -0.0206476f, -0.1982631f, -0.0735292f, +0.0153146f, +0.0012507f,
  +0.0451542f, -0.3375488f, +0.1506061f, -0.0739266f, +0.2103924f, -0.3724699f, -0.0043274f, -0.0120675f,
  +0.3263581f, +0.2677384f, -0.0362970f, -0.3793681f, +0.0903834f, +0.0975693f, -0.1875700f, +0.0205342f,
  -0.1876606f, +0.4516634f, +0.0243181f, -0.3045954f, +0.3546221f, -0.0066906f, -0.0208594f, +0.3120511f,
  -0.2900935f, -0.0839022f, +0.1544127f, -0.2200138f, +0.0470594f, -0.3028757f, -0.1565628f, +0.3770380f,
  +0.0376829f, -0.0516038f, -0.2367430f, -0.2251460f, +0.1334631f, -0.0872999f, -0.0756885f, +0.0239291f
);

const float biases[4] = float[4](
  +0.0466366f, +0.0065221f, -0.0128751f, -0.0189701f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer32 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0697770f, -0.3948705f, -0.0297713f, +0.1029333f, +0.3079662f, -0.1775084f, +0.2433463f, -0.3865862f,
  +0.0521947f, -0.1635999f, -0.1614802f, +0.0557538f, +0.3646708f, -0.2771499f, -0.0059708f, -0.2750676f,
  -0.1175161f, +0.3036904f, +0.1781428f, -0.2273591f, +0.2382685f, -0.1674268f, -0.0702225f, +0.1754348f,
  +0.1776341f, -0.3864526f, -0.2120956f, -0.1574419f, +0.0991156f, -0.0052279f, -0.0289290f, -0.0075071f,
  +0.0884940f, +0.1682756f, -0.1226637f, -0.4223313f, +0.2297351f, -0.4831756f, -0.1008877f, -0.6379326f,
  +0.0089073f, -0.2014292f, +0.1038383f, +0.1038611f, -0.2490008f, -0.2966231f, +0.1535002f, -0.1471402f,
  +0.0996836f, -0.0071055f, +0.1498335f, -0.1337342f, +0.0465493f, +0.2639534f, +0.0874203f, -0.0640545f,
  +0.1917973f, -0.3092403f, +0.2138317f, -0.0016587f, -0.0146679f, -0.3633690f, -0.1204023f, +0.2143598f,
  -0.4610046f, -0.1781446f, -0.0417521f, +0.0719685f, -0.0206418f, -0.2717734f, -0.0575336f, -0.2690651f,
  +0.0255241f, -0.0339859f, +0.0534098f, -0.0309203f, -0.1276932f, +0.0121870f, +0.0317946f, +0.0924349f,
  -0.0959324f, -0.3138468f, +0.1218430f, -0.0854582f, -0.0978235f, +0.0487247f, -0.1105895f, +0.0604525f,
  +0.0860411f, +0.2814389f, +0.0506347f, +0.1403963f, +0.1266106f, +0.1860822f, +0.1036293f, -0.2671116f,
  +0.3362275f, -0.0475815f, -0.0219013f, -0.1377282f, -0.1039040f, -0.1283400f, +0.0413460f, +0.2623076f,
  +0.0680388f, -0.0929823f, -0.2062106f, +0.0775342f, -0.1016238f, -0.0493545f, +0.0057291f, +0.0318206f,
  +0.5046483f, -0.0429042f, +0.3552023f, +0.1690124f, -0.1563705f, -0.1287141f, -0.0332185f, +0.1773334f,
  +0.1240852f, -0.1489795f, +0.0531548f, -0.0062424f, -0.2153331f, +0.0642974f, +0.2317630f, +0.2588208f,
  +0.0690396f, +0.1614576f, -0.0605465f, +0.0885490f, +0.0653131f, +0.0894354f, +0.1706887f, +0.0654770f,
  -0.2870462f, +0.0287452f, -0.0479375f, +0.2584910f, +0.2166947f, +0.0360377f, -0.0407964f, +0.2401121f,
  -0.1304560f, +0.1568456f, -0.0412970f, +0.0034031f, +0.1120364f, +0.2976895f, -0.0726569f, -0.4689353f,
  +0.2541292f, -0.1428079f, +0.3155323f, -0.1997557f, -0.0045598f, -0.2208994f, -0.0255892f, +0.0956634f,
  -0.1928399f, -0.0371846f, +0.5220891f, -0.1993700f, +0.0624264f, +0.0476125f, -0.1145454f, +0.1862896f,
  +0.1299975f, +0.1295472f, +0.0616778f, +0.0236603f, +0.1060327f, -0.0116065f, -0.1339616f, -0.1242877f,
  +0.2949709f, -0.1307727f, -0.3278442f, -0.0880716f, +0.1088201f, -0.0021952f, +0.0068076f, +0.1587350f,
  +0.1519039f, -0.1816847f, -0.4530472f, -0.1151969f, -0.1724647f, -0.1632922f, +0.0585941f, -0.0653822f,
  -0.1137662f, -0.1932127f, -0.1087246f, -0.0887506f, +0.0185097f, +0.0311890f, +0.1261686f, -0.1039368f,
  +0.0937989f, -0.0916789f, +0.0376294f, +0.0053903f, -0.1240999f, +0.1235019f, +0.1499906f, +0.1320451f,
  -0.0942556f, -0.2293006f, +0.2163425f, +0.0647360f, -0.1136406f, +0.0962544f, -0.0699999f, -0.1079711f,
  -0.1272554f, -0.1417022f, -0.0688169f, -0.2464406f, +0.0147228f, -0.1058609f, +0.2168604f, -0.2559896f,
  -0.2477675f, +0.0165794f, -0.1073452f, +0.1837394f, -0.0855725f, +0.1206631f, +0.0935147f, -0.0660025f,
  -0.2906075f, +0.0302735f, -0.0645937f, +0.0261777f, -0.1901884f, +0.2151535f, +0.1600721f, +0.0198290f,
  -0.0028556f, -0.6062050f, -0.0561835f, +0.0887610f, -0.0881854f, -0.0587431f, -0.1009653f, -0.1421509f,
  +0.1191690f, +0.1115573f, +0.0230287f, -0.1870933f, -0.4298102f, -0.1161936f, +0.1247797f, -0.0102516f,
  -0.1939188f, +0.0287259f, +0.3997432f, -0.0343817f, +0.0159505f, +0.1973809f, -0.0926131f, +0.2263275f,
  +0.2420197f, -0.2016891f, -0.1978083f, +0.0341806f, -0.3248638f, +0.2079547f, -0.1219916f, -0.0809950f,
  +0.0866517f, -0.1846250f, -0.0622757f, +0.1500561f, -0.2319156f, +0.1408076f, -0.1964174f, -0.3117179f,
  -0.3607174f, +0.0928437f, +0.1356637f, +0.3357272f, +0.0235162f, +0.1662624f, -0.0929186f, -0.0618230f
);

const float biases[4] = float[4](
  +0.0664485f, -0.0132091f, +0.0471150f, -0.0191414f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer33 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1639246f, -0.0005657f, +0.1713669f, -0.0619529f, -0.1354219f, +0.2691719f, -0.1346767f, -0.0849091f,
  -0.0374290f, -0.0949139f, +0.4572844f, +0.2467494f, -0.0180346f, +0.5782694f, +0.2144857f, +0.0442595f,
  -0.0832515f, -0.0775196f, -0.1726657f, -0.0026073f, -0.0445713f, -0.0188729f, +0.1533693f, +0.0298641f,
  -0.0754240f, +0.1124207f, +0.2147594f, -0.2320332f, +0.0008830f, +0.0273006f, +0.1201504f, +0.1124917f,
  -0.1278220f, -0.0896890f, -0.0643094f, -0.2556649f, +0.0157720f, -0.1162159f, +0.1228335f, +0.0436674f,
  +0.0063151f, -0.0824329f, -0.1087075f, +0.0565835f, -0.3061382f, -0.1080688f, -0.0972641f, +0.1125870f,
  -0.1785715f, +0.0236900f, -0.0414198f, +0.0375264f, +0.1263439f, +0.0530875f, +0.1200775f, -0.0546972f,
  +0.0443879f, +0.3125550f, -0.0062616f, -0.2569677f, +0.1192697f, +0.3140827f, -0.2260684f, -0.0245097f,
  -0.0194911f, +0.0172303f, -0.1886972f, +0.0390082f, +0.1444990f, +0.0596845f, +0.1583078f, +0.0129824f,
  -0.0553961f, -0.0773936f, +0.2792295f, +0.0434483f, +0.0143119f, +0.2811767f, -0.0665318f, +0.0475303f,
  +0.0367316f, +0.3150845f, -0.0551023f, -0.0280168f, +0.0163984f, -0.1897011f, -0.0673061f, -0.0339558f,
  +0.0630017f, -0.1280166f, -0.0921183f, +0.0206911f, +0.0355623f, +0.2117182f, +0.0779731f, +0.0554977f,
  +0.0528338f, +0.2734135f, +0.1354865f, -0.0745357f, +0.0048714f, -0.1790152f, -0.2099936f, +0.1689543f,
  +0.1313002f, +0.1826246f, +0.2738281f, +0.0507356f, -0.1849256f, -0.0694794f, +0.3496269f, +0.0502472f,
  -0.0232266f, +0.1280723f, +0.2338731f, +0.3317122f, -0.0486156f, +0.2806620f, -0.0054927f, -0.0710239f,
  -0.4679328f, +0.2403078f, +0.4587249f, +0.1486129f, -0.1271296f, -0.0207589f, +0.0663888f, -0.0477786f,
  -0.2578596f, +0.1032044f, +0.1214938f, +0.2371224f, +0.2317281f, -0.2309471f, +0.2486158f, -0.1210659f,
  -0.3461283f, -0.0512568f, +0.2108236f, +0.1370466f, -0.0785183f, -0.2243100f, +0.0160441f, +0.0234084f,
  -0.0458351f, -0.0769481f, -0.0628672f, -0.0281825f, +0.1365629f, +0.0418359f, +0.1647753f, +0.1086459f,
  +0.1944527f, +0.1502013f, -0.0769361f, +0.0102204f, +0.0838776f, -0.0409276f, -0.2098084f, +0.1035296f,
  +0.1609412f, +0.1516744f, -0.1481018f, -0.0280336f, -0.0836953f, -0.0628604f, +0.0823762f, -0.0971744f,
  +0.1048944f, -0.1287514f, +0.0727254f, +0.1068706f, +0.5036384f, +0.1666020f, -0.2347196f, -0.0479498f,
  +0.4361805f, -0.3105346f, -0.0819587f, -0.3551639f, +0.5129950f, -0.0611109f, -0.3329740f, +0.2241477f,
  +0.3274094f, +0.4731582f, -0.1086078f, -0.0100809f, +0.1872045f, -0.1647965f, +0.2129342f, -0.0385722f,
  -0.0975673f, +0.1532488f, +0.2327562f, -0.0407034f, +0.1129364f, -0.0887207f, -0.0912005f, +0.0382466f,
  +0.1125214f, -0.1838609f, -0.2622260f, -0.4030927f, +0.1857020f, -0.2054752f, -0.4000536f, -0.1295594f,
  +0.0921995f, +0.1727591f, +0.1289839f, -0.1111762f, +0.3343008f, -0.0873980f, +0.2202868f, +0.0762969f,
  -0.2965788f, +0.0545549f, -0.0054394f, +0.1659457f, -0.0379265f, +0.0512110f, -0.0446413f, +0.2858735f,
  -0.0867220f, -0.1260276f, -0.2496399f, +0.1888656f, +0.0284575f, +0.0254971f, -0.2481068f, +0.4305803f,
  -0.2240862f, -0.0366712f, +0.0877575f, +0.3522887f, -0.2718229f, +0.1606723f, +0.0268847f, +0.2678897f,
  -0.1726957f, +0.1497065f, -0.0601954f, -0.0630691f, +0.2620734f, -0.0293591f, +0.1669580f, +0.1599477f,
  -0.4498682f, +0.1302944f, -0.2923653f, +0.2938835f, -0.1602690f, -0.0225655f, +0.2707189f, -0.0631185f,
  -0.2935064f, +0.0434481f, +0.1274401f, +0.0917336f, +0.0006937f, +0.3200284f, +0.0482612f, -0.4231708f,
  +0.1156068f, +0.1983762f, -0.2861836f, +0.0404352f, -0.0623908f, -0.0044514f, +0.0434857f, +0.1030573f,
  +0.2354423f, +0.1417350f, -0.2867053f, -0.1362148f, +0.0832714f, +0.1169933f, +0.1606407f, +0.0755754f,
  -0.3649867f, +0.1096662f, -0.1781957f, -0.0973999f, +0.1875152f, +0.1635286f, +0.0885627f, +0.1690109f
);

const float biases[4] = float[4](
  +0.0773855f, -0.0874067f, +0.0124056f, -0.0278356f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer33 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1445941f, -0.0303407f, +0.1291729f, -0.2485216f, +0.3013027f, -0.0627690f, +0.0148591f, +0.0147877f,
  +0.1269716f, +0.0519407f, +0.0701844f, -0.1585445f, -0.1239077f, +0.1009904f, -0.0509817f, +0.2263212f,
  -0.0909588f, -0.3226601f, +0.0271945f, -0.0062038f, -0.0016967f, +0.0107380f, +0.0072133f, -0.4044162f,
  -0.2072551f, +0.1409773f, -0.0599722f, -0.3489313f, -0.0494961f, +0.0225768f, +0.0167554f, +0.1588519f,
  -0.1159256f, +0.0183141f, -0.2124849f, +0.0220971f, -0.0704129f, +0.1046724f, -0.1043583f, +0.0126561f,
  -0.0103003f, -0.0550516f, -0.2952500f, +0.2242283f, +0.2679412f, +0.2499430f, +0.2139599f, -0.2711889f,
  +0.2313802f, -0.0312980f, +0.1622984f, -0.0821679f, +0.0447204f, +0.1881037f, +0.0192777f, +0.0346748f,
  +0.2590368f, -0.0775949f, -0.2976682f, -0.2327954f, +0.1670399f, +0.0668088f, +0.0744479f, +0.2036825f,
  +0.3226593f, -0.2340409f, -0.2780070f, -0.0061706f, +0.2403780f, -0.1072837f, -0.1011102f, -0.1114541f,
  -0.2745667f, +0.0611775f, +0.2808830f, -0.0828573f, +0.1638867f, +0.2193304f, -0.0081537f, +0.1398680f,
  -0.2177187f, -0.0352987f, +0.1490843f, +0.1710261f, +0.1738643f, +0.0559137f, -0.0150176f, +0.2471285f,
  +0.1711790f, +0.0543944f, +0.1094385f, +0.0665048f, +0.0457020f, +0.1044816f, -0.1238110f, +0.1693593f,
  +0.0073338f, -0.2151796f, +0.0783509f, -0.1811143f, +0.0688865f, -0.1340400f, +0.1244158f, +0.1651828f,
  -0.2579414f, +0.2851079f, +0.0494556f, +0.2851000f, +0.1396073f, -0.0950472f, +0.1279707f, -0.2284113f,
  +0.0641966f, +0.0677220f, -0.0347241f, +0.1542989f, +0.1288086f, +0.1603101f, -0.0542067f, -0.3004718f,
  -0.1376351f, -0.1752845f, -0.0593130f, -0.0236796f, -0.1649415f, -0.0792099f, +0.3218172f, +0.0744288f,
  +0.0913914f, -0.0324073f, -0.0489662f, -0.1289792f, +0.2135742f, +0.4305691f, -0.0419010f, -0.0457472f,
  +0.2238073f, +0.1591736f, +0.0733366f, -0.1085349f, +0.1234124f, +0.1360456f, -0.0265870f, -0.1088075f,
  -0.2929716f, -0.2871345f, +0.1231983f, +0.0097410f, +0.1734965f, +0.0020981f, -0.1745935f, -0.0997187f,
  -0.1898483f, +0.1078274f, -0.2446440f, -0.2749625f, -0.1348401f, -0.3638747f, +0.1738255f, +0.3901116f,
  +0.5927375f, +0.6794562f, +0.0788909f, -0.1514039f, +0.0419601f, -0.0432915f, +0.1782171f, -0.1152270f,
  -0.2264140f, -0.0336804f, +0.1830555f, -0.1621475f, -0.0437930f, -0.3748620f, -0.0127353f, -0.1836564f,
  +0.1297941f, +0.1350895f, -0.1955525f, -0.2177223f, +0.0299914f, +0.0389748f, -0.1964088f, +0.0812405f,
  -0.1691285f, +0.0273268f, +0.0387746f, +0.2657702f, -0.1402125f, +0.2035261f, +0.0079309f, -0.0160535f,
  +0.0486824f, +0.0124058f, +0.0798356f, -0.0661189f, +0.2159819f, -0.0670786f, +0.0480287f, -0.0580652f,
  +0.0561375f, +0.0023366f, +0.3810103f, -0.0618882f, +0.2062510f, +0.1689219f, -0.1308604f, -0.1504753f,
  -0.3134249f, +0.0046429f, +0.1775065f, +0.3746126f, +0.2635106f, +0.0129680f, +0.0244773f, -0.2087648f,
  -0.1139601f, +0.2494202f, -0.0753751f, -0.0297975f, -0.0909642f, +0.0510009f, +0.1657679f, -0.1016442f,
  -0.2583955f, +0.1995098f, -0.0252132f, +0.0043258f, -0.1360106f, -0.0579573f, -0.0275347f, +0.0825078f,
  -0.2796915f, -0.2977439f, -0.3323544f, -0.1346102f, -0.1480571f, -0.1176020f, +0.0472839f, +0.1593937f,
  -0.2590007f, -0.2489772f, -0.3471656f, +0.0904331f, +0.1471560f, +0.0197689f, +0.0818451f, +0.0988290f,
  +0.1289065f, +0.3054777f, +0.0375224f, +0.1365381f, -0.0668813f, +0.0948715f, +0.2519581f, -0.1013331f,
  +0.0115873f, +0.1259424f, +0.4742104f, +0.1392672f, -0.3330577f, -0.0135226f, -0.3605088f, -0.6416206f,
  -0.0224102f, +0.0358288f, +0.2231721f, -0.1800520f, -0.0917027f, +0.2872094f, -0.0582998f, -0.2221275f,
  -0.4914291f, -0.0909174f, -0.2578547f, +0.1795038f, -0.0296968f, -0.0761154f, -0.2072538f, +0.2136450f,
  +0.2501814f, +0.2020146f, +0.3186099f, +0.3951387f, -0.6246681f, -0.0374325f, +0.3095701f, -0.1042936f
);

const float biases[4] = float[4](
  +0.0554495f, +0.0248601f, -0.0455435f, -0.0513940f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer34 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0070505f, +0.2769354f, -0.3980407f, +0.1826102f, -0.2354924f, -0.2205236f, -0.0146812f, +0.1546333f,
  -0.0753511f, +0.4346025f, -0.0910020f, +0.1964409f, -0.1455376f, -0.1635344f, -0.3290156f, -0.1383302f,
  -0.0963815f, +0.1110978f, +0.0434165f, +0.0884164f, -0.1013922f, -0.0993640f, -0.1693954f, -0.0107170f,
  -0.0632673f, +0.1057129f, -0.1963917f, -0.1919751f, +0.0739673f, +0.0672718f, +0.3241404f, -0.3623275f,
  -0.2669676f, +0.2376228f, +0.0127791f, +0.2762861f, -0.0051369f, +0.0916449f, -0.2838719f, +0.1472631f,
  -0.0281397f, +0.0839227f, +0.1205310f, +0.0592009f, +0.1054002f, -0.0670715f, -0.1521991f, +0.0350511f,
  -0.1940917f, -0.0161361f, +0.0717185f, +0.1694884f, +0.2323159f, -0.1260938f, -0.0913174f, +0.0455857f,
  -0.0271741f, +0.0453260f, +0.1850455f, -0.0942723f, +0.0035445f, +0.1603172f, -0.0161112f, -0.0938187f,
  +0.0665536f, -0.1540228f, +0.0944664f, +0.2717485f, +0.0541136f, +0.1567366f, +0.0221560f, -0.0453297f,
  -0.2271992f, +0.2605512f, +0.0109648f, -0.1654460f, +0.1090094f, +0.0085428f, -0.0487479f, +0.1011651f,
  -0.2139343f, -0.2831599f, +0.3774156f, -0.0239694f, +0.0634737f, +0.0257107f, +0.1308271f, -0.1680961f,
  -0.0169409f, -0.1713892f, -0.1221400f, +0.0306332f, -0.1711736f, +0.1848132f, +0.0396170f, +0.2625851f,
  -0.1001116f, -0.1000522f, -0.3123008f, +0.1578734f, -0.2177570f, +0.0024309f, +0.1325696f, +0.1016825f,
  +0.0416249f, +0.0230302f, +0.2187520f, -0.1387875f, +0.0570275f, -0.2498224f, +0.0383033f, +0.1110353f,
  -0.0216495f, -0.2223602f, +0.0095446f, -0.0035304f, -0.0916854f, +0.0429280f, +0.0424191f, -0.0774272f,
  -0.0709664f, +0.3109949f, -0.0830548f, -0.2289328f, -0.0750136f, -0.1996591f, -0.3973408f, -0.3149858f,
  +0.0391703f, -0.0861299f, -0.3295421f, -0.1678901f, -0.0346238f, -0.1713866f, -0.1222904f, -0.0790380f,
  +0.0961953f, +0.0452975f, -0.0571313f, -0.1854131f, -0.3885906f, +0.0400058f, -0.2433642f, -0.1358190f,
  +0.2431740f, +0.2684107f, -0.0514049f, +0.0668112f, +0.1101816f, -0.1142444f, +0.0074647f, +0.1937712f,
  +0.1013589f, -0.2675769f, +0.1722664f, -0.2110154f, -0.2378516f, +0.0136806f, +0.1216179f, -0.4682563f,
  -0.1569709f, -0.1151070f, -0.2473030f, -0.2085285f, -0.3411517f, +0.1486596f, +0.0363553f, -0.1145280f,
  +0.1123991f, -0.1286286f, -0.2024702f, +0.0400504f, -0.0887041f, -0.0253214f, +0.1847486f, -0.0242313f,
  +0.0803501f, -0.1512457f, +0.1192874f, -0.0727228f, +0.2085878f, +0.0235949f, -0.0607651f, +0.1998464f,
  +0.0252356f, -0.1494747f, -0.2406070f, -0.1378668f, -0.0844846f, +0.1954637f, +0.0121770f, -0.2001574f,
  -0.0729218f, -0.1294771f, -0.0458077f, -0.0923797f, +0.2027636f, -0.0548463f, -0.1302884f, -0.0377653f,
  +0.0323760f, +0.0241696f, -0.1215146f, +0.1731627f, +0.3819033f, -0.3235679f, -0.0833224f, +0.1132960f,
  +0.0632021f, -0.1243756f, -0.2090330f, +0.0193741f, -0.0167049f, -0.0744285f, +0.0996878f, +0.1113412f,
  -0.0011362f, -0.2946443f, -0.3998152f, -0.2501460f, +0.3984482f, +0.0793060f, +0.1641734f, -0.2846239f,
  -0.0834216f, -0.1612171f, -0.2353950f, -0.1080040f, +0.4347580f, -0.0896628f, +0.2736695f, +0.0485141f,
  -0.0448752f, +0.1410816f, -0.2133265f, -0.3221150f, +0.2496747f, -0.0166675f, +0.0303589f, +0.2283028f,
  -0.2609666f, -0.4526892f, -0.2961959f, -0.2480729f, +0.2005291f, +0.0783517f, -0.0422503f, +0.4605537f,
  +0.1595258f, -0.1793491f, -0.1718228f, -0.5706635f, -0.1356832f, -0.0898366f, -0.0630979f, -0.3725131f,
  +0.0522804f, +0.0296587f, -0.3270194f, -0.1782069f, +0.2256171f, +0.2414155f, +0.2770242f, +0.2792395f,
  -0.0027506f, -0.2102679f, -0.0604729f, -0.0251468f, +0.0619239f, +0.0608611f, -0.0625638f, +0.2654516f,
  -0.0830287f, -0.0041682f, -0.0436720f, -0.0088229f, +0.2687744f, +0.0846235f, +0.3675268f, +0.2061003f,
  +0.0079863f, -0.0994968f, +0.1814508f, +0.1452645f, +0.2475350f, -0.0615869f, +0.4259030f, +0.2140443f
);

const float biases[4] = float[4](
  +0.0734054f, +0.0112908f, -0.0390732f, -0.0249903f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer34 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.3411680f, -0.0167438f, +0.2246631f, +0.2694699f, -0.1742418f, -0.0468358f, -0.0906184f, +0.2941596f,
  -0.2377705f, -0.1623154f, +0.1784040f, -0.0063894f, -0.1873806f, -0.0451565f, -0.0204895f, +0.0894245f,
  -0.1701716f, -0.0839210f, -0.1334646f, -0.0990171f, -0.1379434f, +0.0181218f, -0.0523818f, +0.0135740f,
  +0.2209735f, -0.0564333f, +0.1253540f, +0.2413809f, -0.0074674f, -0.2132458f, -0.0937253f, +0.4445104f,
  +0.1108017f, +0.1233110f, -0.2902289f, -0.0372062f, +0.0816811f, -0.1834888f, -0.1380437f, +0.0221779f,
  +0.0703129f, +0.0210578f, -0.1738447f, -0.0877324f, +0.0445547f, -0.2702422f, +0.0755079f, +0.1667612f,
  +0.3282280f, -0.3656946f, +0.0244324f, +0.1797305f, +0.3206420f, -0.0278196f, +0.0303929f, +0.6744900f,
  +0.2461017f, +0.2531645f, -0.0355250f, +0.0708975f, +0.2787000f, +0.0824271f, +0.1487645f, -0.0109348f,
  +0.2999840f, -0.0470834f, -0.2555067f, +0.2472761f, -0.0966568f, -0.3424474f, +0.0455824f, -0.0902788f,
  -0.2058503f, +0.2744143f, -0.0931790f, +0.1197435f, +0.0039696f, -0.3504346f, +0.0565552f, +0.7420013f,
  -0.0055520f, +0.0712977f, +0.1841803f, -0.2948960f, +0.0121978f, -0.4592872f, +0.0113465f, -0.0804463f,
  +0.0379011f, +0.0835767f, -0.0600824f, -0.0763772f, -0.2854186f, -0.1819542f, -0.0312867f, -0.2144258f,
  -0.1192435f, -0.0903420f, -0.0393397f, -0.2782064f, +0.3342769f, -0.1671733f, +0.1731658f, -0.2407987f,
  -0.0754224f, +0.2173060f, -0.1088350f, -0.0080660f, -0.0069544f, +0.1877135f, -0.1611126f, +0.5022629f,
  +0.0391816f, +0.0215535f, +0.1030241f, +0.0512593f, -0.2409032f, +0.0580606f, +0.0064858f, -0.0028471f,
  +0.1553773f, -0.1738310f, +0.1319283f, -0.0735941f, -0.0271311f, -0.0837494f, -0.1822637f, +0.1443301f,
  -0.2156555f, +0.0403156f, +0.1905358f, -0.2948911f, -0.0016347f, -0.1078131f, -0.1030109f, -0.1148487f,
  -0.2592756f, -0.1362567f, +0.0448901f, -0.2087253f, +0.0000240f, -0.3068336f, -0.1341098f, -0.0548612f,
  +0.0671038f, -0.0362287f, -0.0089471f, -0.1128983f, -0.0227898f, +0.0327819f, +0.0378178f, -0.1219168f,
  -0.0569686f, -0.0944190f, +0.1786326f, -0.0227714f, -0.1851855f, -0.1853974f, -0.0368733f, -0.3159013f,
  +0.2142743f, -0.0490818f, +0.0286874f, +0.0206623f, +0.0102411f, -0.1355667f, -0.0163108f, +0.0957464f,
  +0.1471285f, -0.1841564f, -0.0480458f, -0.0659977f, -0.0839053f, +0.0242162f, +0.0400271f, +0.3044232f,
  -0.2085567f, -0.0651523f, -0.1480947f, -0.0474804f, +0.2660681f, -0.1251338f, +0.0705571f, +0.2584631f,
  +0.2085868f, +0.1472856f, +0.0058198f, +0.0718934f, +0.0407432f, +0.1184334f, +0.2989258f, -0.1793082f,
  +0.1252990f, -0.0283175f, +0.1032594f, +0.0545076f, -0.0021993f, +0.0984941f, -0.1712906f, +0.0735403f,
  -0.0975596f, +0.0262659f, +0.1123908f, -0.0740118f, +0.1831307f, -0.0074509f, -0.0213079f, +0.0941420f,
  -0.0087157f, +0.0978000f, -0.0941613f, -0.2769712f, -0.1695395f, -0.0823729f, +0.0373329f, +0.0169262f,
  +0.2323453f, -0.3479773f, -0.0427108f, +0.0761307f, +0.0392657f, +0.4800077f, -0.1175203f, +0.1236714f,
  +0.1280501f, -0.0001262f, +0.1667573f, +0.2707773f, +0.1526885f, -0.1708101f, -0.0775782f, -0.0592217f,
  +0.0476795f, -0.0939119f, +0.0541759f, +0.2694138f, -0.1169947f, +0.1429495f, -0.2652589f, +0.2184796f,
  -0.0691473f, +0.1981943f, -0.1787234f, +0.3604151f, -0.1213500f, +0.3233835f, -0.3495165f, +0.0489770f,
  -0.2299898f, +0.0337456f, +0.0726807f, +0.3860600f, +0.2705491f, +0.1521951f, -0.1837516f, +0.0765227f,
  -0.2227771f, -0.3466800f, +0.1274331f, +0.2297510f, -0.0861911f, -0.1122918f, -0.1531275f, +0.4414209f,
  +0.0857459f, -0.1199525f, -0.1934330f, -0.1218567f, +0.4822335f, +0.1365490f, -0.0221482f, -0.3375294f,
  +0.1367614f, -0.0472872f, +0.0885125f, -0.0212777f, -0.2108394f, +0.2116841f, -0.5745996f, -0.2334830f,
  +0.0858277f, +0.0307562f, +0.1296503f, -0.0408168f, +0.0097399f, -0.0722210f, -0.2703992f, -0.1394612f
);

const float biases[4] = float[4](
  +0.0456829f, -0.0392200f, +0.0566613f, -0.0050385f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer35 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0062685f, -0.0770466f, -0.2308148f, +0.0227439f, +0.0000857f, +0.0974275f, -0.0115775f, +0.1131301f,
  +0.0681993f, -0.0633793f, -0.0073139f, -0.0698161f, -0.3061206f, +0.1452561f, -0.1011476f, -0.0665025f,
  -0.0486975f, -0.1406701f, +0.1300030f, +0.0548254f, +0.1551849f, +0.1189549f, -0.0133469f, +0.1011030f,
  +0.1586557f, -0.0224931f, -0.2246613f, -0.1861668f, +0.1361577f, +0.0682821f, +0.0464838f, +0.2637059f,
  +0.0040986f, +0.1458769f, +0.1403590f, -0.1506907f, -0.1374084f, -0.0740544f, +0.0077130f, -0.2081766f,
  -0.1206983f, -0.0046762f, -0.1065904f, -0.0308624f, +0.2945853f, +0.2016123f, +0.1123353f, -0.1899245f,
  -0.4167089f, -0.0928674f, -0.1029823f, +0.0490548f, -0.0606683f, +0.1607744f, +0.3372616f, +0.0613585f,
  +0.1339722f, +0.0230552f, +0.1235497f, -0.4442042f, +0.1057966f, -0.1492873f, -0.0885303f, +0.0926979f,
  -0.3573809f, +0.2775110f, +0.1743982f, -0.1753333f, +0.2998316f, -0.0615490f, +0.0177835f, -0.0451957f,
  +0.0530882f, +0.2030990f, +0.0049591f, +0.0356475f, +0.0186792f, +0.2558615f, +0.0820017f, -0.1647194f,
  +0.0705666f, +0.0855371f, -0.0480081f, +0.2923801f, -0.3399880f, -0.3264935f, -0.1897225f, -0.3314799f,
  +0.0682821f, -0.1459830f, -0.1400825f, +0.0441313f, -0.2552844f, -0.0476875f, -0.2652015f, -0.1572030f,
  -0.2085771f, -0.2191007f, -0.0753584f, -0.2041090f, +0.0857577f, +0.5472512f, +0.3020275f, +0.3971445f,
  +0.4059820f, +0.2121810f, +0.0822422f, +0.0299925f, -0.3763776f, +0.0988634f, +0.1128262f, -0.0879961f,
  -0.0196635f, +0.1589960f, -0.1169921f, +0.4790386f, -0.2798310f, -0.1617318f, +0.0323432f, -0.3323138f,
  -0.5429952f, +0.2152986f, +0.0021455f, +0.0367147f, +0.3583966f, -0.3454052f, -0.3724742f, +0.1566752f,
  -0.0564515f, -0.3150598f, +0.2861804f, -0.1300859f, +0.1290307f, +0.1611398f, +0.1653323f, +0.0207445f,
  +0.1876668f, -0.1370033f, +0.0687503f, +0.0834050f, +0.1844002f, +0.1713491f, +0.2827767f, -0.0128000f,
  +0.0162998f, -0.1404508f, +0.0968264f, +0.2016273f, -0.0399953f, -0.2252119f, +0.2706552f, +0.2615319f,
  -0.2151338f, +0.1661067f, -0.0084924f, -0.1289189f, -0.0964069f, +0.0078464f, +0.0495422f, +0.1166014f,
  +0.1920875f, -0.1234023f, +0.0443423f, -0.0989464f, +0.0769682f, +0.3272713f, -0.1546222f, +0.1504028f,
  +0.1150529f, +0.0085382f, -0.0198662f, +0.0028500f, +0.3518740f, +0.0009228f, -0.1209241f, -0.3873281f,
  +0.0216618f, +0.1311632f, -0.0474420f, -0.0451245f, -0.0129848f, +0.3324944f, -0.0204289f, +0.0896450f,
  +0.1070878f, -0.0521534f, -0.1006552f, +0.0633643f, +0.0289514f, +0.0546162f, +0.2170426f, +0.2050391f,
  +0.2330726f, -0.1858644f, +0.0782555f, -0.0475866f, +0.0250517f, +0.1358392f, +0.0120378f, -0.0267676f,
  +0.2252757f, +0.5799390f, +0.1488739f, +0.1723282f, +0.1801953f, +0.1723913f, -0.1360540f, -0.0402211f,
  -0.2377261f, +0.0154187f, +0.1385631f, -0.2168619f, -0.0009604f, +0.1370021f, -0.1036302f, -0.1274761f,
  -0.4149818f, -0.0814803f, -0.0049827f, +0.2505777f, -0.0553245f, -0.2924017f, -0.0068350f, -0.3644173f,
  -0.0008885f, -0.2453272f, +0.0221518f, -0.0899635f, -0.2445399f, -0.2391649f, +0.0152089f, -0.3296120f,
  -0.0649442f, -0.1675034f, +0.0691592f, -0.1318504f, -0.0764262f, -0.1723636f, +0.1664061f, -0.0720475f,
  +0.0869823f, -0.2570373f, -0.0417987f, -0.1615959f, -0.3334514f, -0.1267341f, -0.2487150f, -0.3209057f,
  -0.0322487f, -0.1254884f, -0.1113822f, -0.4082913f, +0.2115760f, -0.0214195f, +0.0996412f, -0.0184236f,
  -0.0309600f, -0.1392382f, -0.2384840f, -0.0670008f, -0.2658253f, -0.3302310f, +0.0398632f, -0.2915120f,
  +0.3150851f, +0.0666032f, -0.1859652f, -0.1194613f, -0.1128098f, +0.0970565f, +0.0299014f, +0.3210646f,
  -0.0317708f, -0.0142643f, -0.0280682f, +0.1905899f, -0.1320698f, -0.1862723f, -0.0746975f, -0.2769869f,
  +0.1209101f, -0.0722581f, +0.1406044f, -0.1944438f, -0.0262561f, -0.0637712f, -0.1166754f, -0.0950699f
);

const float biases[4] = float[4](
  +0.0665404f, -0.0313027f, +0.0718300f, -0.0518987f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer35 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0973727f, +0.0983450f, -0.0019673f, -0.1424902f, +0.0146776f, +0.0974064f, -0.2574766f, -0.1449589f,
  -0.1031723f, +0.0476881f, -0.0300183f, +0.0633521f, +0.2797451f, -0.0977556f, -0.2556033f, +0.0982585f,
  -0.0216745f, -0.1667568f, -0.2559904f, +0.1567329f, +0.2131324f, -0.0465200f, -0.0808401f, -0.0364258f,
  +0.1398942f, +0.0856348f, +0.0519495f, -0.3941643f, -0.0878093f, -0.1494915f, +0.0875585f, +0.2066615f,
  -0.2325089f, +0.0087044f, -0.0012135f, -0.1262233f, +0.0042143f, -0.0170928f, -0.0258502f, -0.1558032f,
  -0.0630694f, +0.0631266f, +0.0355929f, -0.0312891f, -0.1486636f, +0.1075381f, +0.1978931f, +0.0397922f,
  +0.0331120f, -0.0130757f, +0.1876926f, -0.0761279f, -0.2624056f, -0.0659246f, +0.1269705f, +0.0262800f,
  -0.2320745f, -0.1332399f, +0.0000882f, +0.1196839f, +0.4070862f, -0.0894300f, -0.0045286f, -0.0405565f,
  -0.0471656f, +0.1429506f, -0.1614695f, +0.0264752f, +0.1980387f, +0.1335225f, +0.1260394f, -0.2400398f,
  +0.0051467f, -0.1955534f, -0.2001539f, -0.0255401f, +0.1660554f, -0.1372432f, +0.0716821f, +0.1440016f,
  +0.0948986f, -0.1693100f, -0.2314246f, -0.3562036f, +0.2284670f, -0.0748562f, -0.0869434f, -0.1146185f,
  -0.1027929f, -0.0118586f, -0.1392906f, +0.3502635f, -0.3064169f, -0.0231092f, -0.1122277f, -0.0069923f,
  -0.0816582f, +0.0793287f, +0.0508946f, +0.0745104f, +0.1511083f, -0.1279359f, +0.1124383f, +0.0505493f,
  -0.0155438f, -0.0015015f, -0.2357654f, +0.1583578f, -0.1965791f, -0.1229090f, -0.1511239f, -0.4049702f,
  +0.3816735f, -0.0523885f, -0.4275429f, +0.2556571f, +0.0928018f, +0.0663455f, +0.1953327f, -0.2631127f,
  -0.1750222f, -0.1670719f, +0.2551620f, -0.2384419f, -0.0891864f, +0.0893693f, +0.1955800f, +0.1805154f,
  -0.2430016f, +0.0242713f, +0.1343265f, -0.1320634f, -0.1260838f, -0.0349006f, +0.0035759f, +0.0215684f,
  +0.0693309f, +0.0294244f, +0.2305297f, -0.0756482f, -0.1317275f, +0.1183518f, +0.1117179f, -0.2191055f,
  -0.4338484f, -0.0457078f, +0.1578320f, +0.1699564f, -0.0275519f, -0.1749240f, +0.2279206f, +0.0395776f,
  -0.0397525f, -0.1524139f, +0.0061309f, +0.0429519f, +0.1797201f, -0.3657596f, +0.0015755f, +0.1012946f,
  -0.1419129f, +0.1856777f, +0.0646531f, +0.1086323f, +0.0735616f, -0.1653194f, -0.0548569f, +0.2190206f,
  +0.0370812f, -0.0761709f, +0.3621757f, -0.1569698f, +0.1371605f, -0.2699451f, -0.0648750f, +0.0539513f,
  -0.0686409f, -0.0209199f, +0.1175794f, +0.1317488f, -0.0337021f, +0.2638831f, +0.0566718f, +0.0496663f,
  +0.2182554f, +0.2224976f, +0.2446579f, -0.1102968f, +0.1126390f, +0.1559033f, -0.1338900f, +0.0682816f,
  -0.3566754f, -0.1373996f, +0.2638334f, -0.0510183f, -0.4015564f, -0.1927062f, +0.1161705f, +0.1033645f,
  -0.0576189f, +0.0333774f, +0.2349097f, -0.1732185f, -0.1537938f, +0.0464231f, +0.0909059f, +0.1390526f,
  -0.0410546f, -0.0728221f, -0.0692639f, +0.0099716f, -0.3478073f, -0.1124449f, +0.0590767f, +0.1756647f,
  -0.0232331f, +0.1666451f, +0.0025823f, +0.3627010f, +0.2439840f, +0.0019928f, -0.1138853f, -0.0928075f,
  -0.0613840f, -0.1585397f, -0.4633936f, +0.4637676f, +0.0600821f, +0.0488984f, -0.2679332f, -0.0296832f,
  -0.2815176f, -0.2578816f, -0.2989917f, +0.0878612f, -0.0709282f, +0.0055478f, -0.0840759f, +0.2284583f,
  -0.0361002f, +0.1922325f, -0.1552862f, -0.0422449f, +0.0544154f, -0.0042410f, +0.0441749f, +0.0735623f,
  -0.1346142f, +0.2012618f, -0.2593706f, -0.4762225f, -0.5170881f, +0.1315434f, +0.0614520f, +0.3448446f,
  +0.0507016f, +0.3593693f, -0.0454068f, -0.3690262f, -0.1863749f, -0.3575296f, -0.0057290f, +0.3030696f,
  -0.1759393f, +0.0651040f, -0.1813322f, -0.1051514f, -0.1438337f, -0.0937019f, -0.0145274f, -0.1469671f,
  +0.0310439f, +0.1558262f, -0.1776303f, -0.4022169f, -0.3572684f, -0.1948757f, +0.0490339f, +0.0866154f,
  +0.1438816f, +0.0752625f, +0.1519521f, -0.0333901f, -0.1432931f, +0.0339680f, -0.0054529f, +0.1500818f
);

const float biases[4] = float[4](
  +0.0480389f, -0.1257521f, +0.0305752f, +0.0348780f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer36 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0118749f, +0.0545304f, +0.2218701f, -0.2328428f, -0.0010237f, -0.0783177f, -0.2663649f, -0.0593410f,
  -0.1473182f, -0.2860301f, +0.0523023f, +0.0175563f, +0.0514785f, +0.2751861f, +0.1895690f, +0.0084013f,
  +0.2280329f, -0.3710808f, +0.0732623f, -0.1277840f, -0.1496654f, +0.0547252f, +0.0162993f, -0.0184312f,
  +0.0701180f, -0.2759355f, -0.1099249f, -0.0961574f, +0.2764013f, -0.0481829f, -0.3939339f, -0.0326140f,
  -0.1009294f, +0.0115015f, +0.1702441f, -0.0077413f, +0.1224946f, -0.0771692f, +0.0603973f, +0.1209814f,
  +0.1721090f, -0.0412187f, +0.0642149f, -0.3741501f, -0.1509352f, -0.0840485f, +0.1425152f, +0.1143040f,
  -0.0266911f, -0.1596179f, -0.2065767f, -0.2088492f, +0.0395186f, -0.1414374f, -0.2553874f, +0.0139321f,
  -0.1495812f, -0.3744320f, +0.4381370f, +0.0513444f, -0.3179825f, -0.3735544f, -0.2385195f, +0.0022815f,
  -0.1118373f, -0.5964401f, -0.0350793f, -0.2445168f, +0.2537091f, -0.1098743f, +0.0273964f, -0.2355855f,
  -0.1799841f, +0.0960485f, -0.0805588f, +0.0431795f, +0.0475956f, +0.0002955f, -0.0072842f, +0.0164118f,
  +0.0496649f, -0.0589594f, -0.2684554f, -0.1026697f, +0.1198107f, -0.1939595f, +0.1321657f, -0.1378741f,
  +0.0111205f, -0.1894761f, +0.1831705f, -0.1358089f, +0.0281275f, +0.0362477f, +0.1782128f, +0.0588306f,
  -0.0571665f, +0.2642418f, +0.0078770f, +0.2560045f, +0.1635321f, +0.3546091f, -0.0462850f, +0.0758842f,
  +0.0490062f, +0.7493632f, +0.3032874f, +0.0326217f, -0.0556389f, +0.1174500f, -0.0247049f, -0.0894178f,
  +0.2820249f, +0.0843490f, -0.0471194f, +0.1148674f, +0.2303636f, -0.0678522f, +0.3537665f, -0.0514959f,
  +0.1300491f, -0.1045383f, -0.0893453f, +0.2604607f, +0.0010394f, -0.0189386f, -0.0684169f, +0.1540382f,
  -0.1901030f, -0.1251517f, +0.1026338f, +0.1876272f, +0.3314712f, +0.1468976f, -0.1291505f, +0.2485098f,
  -0.1221105f, +0.1990649f, +0.0317026f, +0.1545347f, +0.0511420f, -0.1910701f, -0.0452030f, -0.0514637f,
  +0.2493691f, -0.0134350f, -0.0739526f, -0.0766405f, -0.0937714f, +0.2596662f, -0.0184587f, -0.2400908f,
  +0.0869374f, -0.2022917f, -0.3812625f, -0.0441057f, +0.1370791f, -0.2674653f, +0.0587346f, +0.1383362f,
  +0.3060757f, -0.0765569f, -0.1028877f, -0.1511398f, +0.2906472f, +0.1882780f, -0.0199956f, +0.1592904f,
  +0.4325808f, -0.0044510f, +0.0229287f, -0.0211551f, -0.1965782f, +0.2026045f, +0.2585891f, +0.0264979f,
  +0.1843454f, +0.3771099f, +0.1707757f, -0.2037244f, +0.0494239f, +0.2954704f, -0.3539742f, +0.2637857f,
  +0.1247656f, +0.0620949f, -0.0272508f, -0.0802979f, +0.1630068f, +0.2311013f, +0.0578348f, -0.0802552f,
  +0.0166170f, -0.1073432f, +0.0509064f, +0.0600360f, -0.0467092f, +0.2257035f, +0.1801414f, +0.0701780f,
  +0.1371270f, +0.1401375f, +0.0758194f, +0.0102348f, +0.0353739f, -0.0868806f, +0.1237159f, +0.4219655f,
  +0.2185193f, -0.1187648f, +0.1400629f, +0.0740863f, +0.0624346f, +0.2677368f, +0.2487220f, -0.0370100f,
  -0.1246989f, -0.0700518f, +0.0870953f, +0.3215814f, +0.2947225f, +0.1897487f, +0.2670279f, +0.1259528f,
  -0.0765311f, +0.3274587f, +0.0575831f, -0.0503304f, +0.0195854f, +0.4834330f, -0.0716172f, +0.1653300f,
  -0.1283060f, +0.3368849f, +0.2591239f, -0.1332949f, +0.0681500f, +0.3245844f, +0.0910993f, +0.0629852f,
  -0.1090628f, -0.5672295f, -0.0850577f, +0.2240870f, -0.0688801f, +0.0603876f, +0.1534729f, +0.3428121f,
  -0.0647514f, +0.1080675f, +0.0805942f, -0.2203622f, +0.0937233f, -0.0206603f, -0.1697692f, +0.7089118f,
  -0.1592135f, +0.1174276f, -0.1358988f, +0.2032493f, +0.0124040f, -0.0485075f, +0.1451357f, +0.0089832f,
  -0.0369760f, -0.2002794f, +0.2073481f, +0.2567666f, -0.0840788f, -0.0124426f, +0.0734274f, -0.0025422f,
  +0.0579110f, +0.0243069f, +0.1666805f, +0.1641930f, +0.1496398f, +0.2625227f, +0.0893889f, -0.4023814f,
  -0.0588128f, -0.1852674f, -0.0350834f, +0.0544851f, +0.0210311f, +0.1808329f, +0.0158726f, -0.1252307f
);

const float biases[4] = float[4](
  +0.0567246f, -0.0274571f, -0.0488140f, -0.0361757f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer36 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1446949f, +0.0774721f, -0.1338662f, +0.0164522f, -0.0125531f, +0.0395508f, +0.2483941f, -0.1824900f,
  -0.1794208f, -0.0459444f, -0.2537234f, -0.1378973f, -0.1642231f, +0.0424883f, +0.2606059f, +0.3036135f,
  -0.2743787f, +0.1118454f, +0.0850705f, +0.0260831f, -0.1353417f, -0.1982554f, -0.0081823f, -0.0279635f,
  -0.0343889f, -0.0310573f, +0.0946012f, -0.0619800f, +0.2658534f, +0.0456917f, +0.0941987f, +0.0722717f,
  -0.0929426f, -0.4383422f, -0.1730240f, -0.2278043f, +0.2563182f, -0.3531722f, +0.1661554f, +0.1105410f,
  +0.0645932f, +0.0015082f, -0.4965604f, +0.1973233f, -0.0672303f, +0.1633623f, +0.0344772f, -0.3724304f,
  +0.1389765f, +0.0770704f, -0.0774544f, -0.0142915f, +0.1181469f, +0.0172437f, +0.2044360f, -0.0099591f,
  +0.1818124f, +0.2781133f, +0.2780281f, +0.2652049f, -0.0141430f, -0.2194342f, +0.1738043f, -0.2696407f,
  +0.0062717f, -0.3563260f, +0.2588836f, -0.1106424f, -0.0166551f, +0.1177511f, +0.0777848f, -0.1425760f,
  +0.0711165f, -0.1930930f, +0.1239258f, +0.2597713f, +0.1137922f, +0.2128686f, +0.0834852f, -0.4258834f,
  +0.0231113f, +0.0583940f, -0.2185628f, +0.2741732f, +0.0423289f, -0.1562255f, +0.3054614f, -0.1149252f,
  -0.0846745f, -0.5081629f, +0.0731011f, -0.1854284f, +0.0801955f, -0.0040310f, +0.1730461f, +0.1196456f,
  +0.0985298f, -0.3699197f, -0.0024511f, +0.0147501f, -0.1136851f, -0.1081466f, +0.0729004f, +0.2841734f,
  -0.0762215f, -0.2752606f, -0.1831673f, +0.0975000f, -0.1369881f, +0.0428950f, -0.1203370f, -0.0102720f,
  +0.0982854f, +0.0200407f, -0.0130593f, +0.0931901f, -0.1590998f, -0.0249783f, +0.3876749f, +0.0161602f,
  -0.0224745f, -0.1677079f, -0.1068258f, -0.1371138f, +0.1183631f, +0.0652560f, +0.1447840f, +0.1187025f,
  +0.1874389f, -0.0950019f, +0.0453598f, +0.2074272f, +0.1818723f, +0.0679785f, +0.0897276f, +0.2392151f,
  +0.1394577f, -0.6280403f, +0.0062864f, +0.1422934f, +0.3139690f, -0.2303032f, -0.1199202f, -0.0373791f,
  -0.0300829f, -0.0264736f, -0.0469304f, -0.0352482f, +0.1259003f, -0.0781064f, -0.0496124f, -0.0362824f,
  -0.0473368f, +0.1215539f, -0.0352389f, -0.0454495f, +0.0117958f, -0.2055861f, -0.0324563f, -0.0604795f,
  +0.0457975f, +0.0283026f, -0.0618744f, +0.1561689f, +0.0285624f, -0.2962757f, -0.0672214f, +0.0464559f,
  +0.0059810f, -0.4333755f, -0.1969124f, -0.2268983f, -0.1765218f, +0.0722814f, +0.5185591f, +0.0660432f,
  +0.1346162f, +0.3489989f, -0.1264292f, +0.1328665f, -0.0674695f, +0.1217622f, -0.0423152f, -0.4412467f,
  +0.0810897f, -0.1864122f, +0.0393046f, -0.0027541f, -0.1364603f, +0.1924130f, +0.0570725f, -0.0028309f,
  +0.0121409f, -0.0184194f, +0.3439164f, -0.0126836f, -0.0442390f, +0.0449106f, +0.2627051f, +0.0069279f,
  +0.1056415f, +0.0375378f, -0.0550196f, +0.0796784f, -0.1167631f, -0.0144816f, -0.1111065f, +0.4024612f,
  +0.0791205f, +0.0002259f, -0.1028088f, +0.0884472f, +0.1537850f, +0.0862264f, +0.1388003f, +0.0480221f,
  +0.1907299f, -0.3024371f, +0.1578647f, +0.2556325f, +0.2891118f, +0.1718504f, +0.3599983f, +0.0006292f,
  -0.0282094f, -0.1074467f, -0.0341404f, +0.3674271f, -0.0851435f, +0.2807937f, +0.0261570f, -0.3269695f,
  +0.0269362f, -0.3362351f, -0.1427967f, -0.2603349f, +0.0010904f, -0.1804414f, +0.1068754f, +0.0315913f,
  +0.0986128f, -0.2112227f, -0.2088317f, +0.1829505f, -0.2996238f, +0.0468057f, -0.1239458f, -0.2115983f,
  +0.0843388f, +0.1348273f, +0.1166280f, -0.1238147f, +0.3203064f, +0.0516094f, -0.1614596f, -0.4285188f,
  -0.1004344f, -0.1064830f, +0.5919427f, +0.2477591f, -0.2978794f, +0.0400462f, +0.1591513f, +0.0856328f,
  -0.1179756f, +0.0821442f, -0.2048086f, +0.0227617f, -0.1560807f, +0.2166929f, +0.1526718f, -0.0114434f,
  +0.0912963f, -0.0153754f, -0.0782930f, +0.1444388f, -0.1145546f, +0.2436982f, +0.0385648f, -0.0614197f,
  +0.1813005f, -0.0394612f, +0.0405844f, +0.3758252f, -0.3398201f, +0.1041675f, -0.1405445f, +0.0317531f
);

const float biases[4] = float[4](
  +0.1117925f, -0.0464749f, +0.0740603f, -0.0074012f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer37 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0876069f, +0.1755532f, +0.0733850f, -0.0162458f, +0.0263511f, +0.0749128f, -0.1284512f, -0.2317415f,
  -0.1196228f, -0.3573072f, +0.0017367f, +0.2685414f, +0.1395724f, -0.2819829f, -0.1356672f, -0.1646881f,
  +0.2116913f, +0.0045240f, -0.0217629f, -0.0928083f, -0.1919002f, -0.2009319f, +0.0614077f, -0.2628615f,
  +0.2690313f, +0.1477870f, +0.0477990f, -0.2090792f, +0.0291644f, -0.0558912f, -0.2977780f, +0.2147016f,
  +0.2137197f, -0.0664399f, -0.2198368f, -0.4378117f, -0.5295573f, +0.0630008f, +0.2353333f, +0.1922140f,
  -0.1067742f, +0.0337258f, +0.0146877f, -0.0761382f, -0.0416490f, +0.2101113f, +0.0867305f, +0.0196536f,
  +0.1661150f, -0.2243506f, -0.3047520f, -0.1173274f, -0.3403771f, -0.3132339f, +0.0373539f, +0.0300024f,
  +0.0469055f, +0.1257982f, -0.0011322f, +0.0262332f, -0.1252941f, +0.2496641f, -0.2275761f, +0.2481840f,
  -0.0807612f, -0.2888853f, +0.0305021f, +0.0913295f, -0.0447765f, -0.1038322f, +0.0756334f, -0.0000560f,
  +0.1673756f, -0.2195717f, +0.1736778f, -0.1223123f, +0.1564865f, +0.2243341f, +0.1306427f, +0.0174435f,
  +0.2813174f, +0.0132087f, +0.0816611f, +0.1588533f, +0.0587274f, +0.2321607f, +0.1214532f, +0.3294726f,
  +0.2207532f, +0.0048300f, +0.3222116f, -0.2007005f, +0.3056785f, +0.2238196f, +0.0012770f, -0.0008942f,
  +0.1632165f, +0.2095016f, +0.0106626f, -0.2211490f, +0.0587161f, -0.2182834f, -0.1350037f, -0.5170344f,
  -0.2768802f, -0.1789090f, +0.2626085f, +0.2030991f, +0.0491200f, +0.1611940f, +0.0380045f, +0.0960696f,
  -0.0233479f, -0.3660758f, +0.0718838f, -0.3016332f, +0.1864069f, +0.3039402f, +0.3798784f, +0.1580326f,
  +0.3126108f, +0.1932706f, -0.1207270f, +0.2738061f, -0.1425710f, -0.0915878f, -0.3522957f, -0.1544546f,
  -0.0167859f, +0.0285846f, -0.0743997f, -0.0513375f, -0.0502468f, +0.0698218f, -0.1040987f, -0.1100897f,
  -0.2343492f, -0.1113844f, +0.2572694f, -0.0297888f, -0.0635689f, +0.0894304f, +0.0876862f, -0.3853580f,
  -0.0284067f, +0.2325238f, -0.0903459f, -0.0406847f, -0.1472311f, -0.0741008f, +0.0556150f, -0.0207452f,
  -0.1671656f, -0.2301132f, +0.3109749f, -0.0756141f, -0.1818829f, +0.1178460f, +0.0397164f, -0.2500521f,
  +0.0519629f, -0.1274762f, -0.0315816f, +0.3271027f, -0.0190743f, +0.4441914f, +0.0852538f, -0.1014801f,
  -0.1018302f, +0.1385114f, -0.3055325f, -0.5402066f, -0.4890264f, -0.0596426f, +0.0072242f, -0.0812770f,
  -0.2959815f, +0.0561991f, -0.1036368f, +0.5057347f, -0.0436474f, -0.1212766f, +0.1882269f, -0.3805137f,
  -0.0851806f, -0.0432007f, -0.1664217f, +0.1438308f, -0.0115207f, +0.0120439f, +0.3301198f, +0.2391441f,
  -0.0433369f, +0.1476645f, -0.0694098f, -0.2149271f, +0.0650984f, -0.2023226f, -0.0764011f, -0.4050449f,
  -0.1926343f, -0.0722265f, -0.0155808f, +0.4766133f, +0.2665814f, -0.1392993f, -0.0268500f, +0.1247698f,
  +0.2061004f, -0.5399841f, -0.2599380f, +0.0134821f, -0.0517507f, +0.0935567f, -0.1178770f, -0.0425901f,
  -0.0132086f, -0.0034668f, +0.1174350f, +0.0410522f, +0.0606033f, -0.2516464f, -0.1495004f, +0.0364293f,
  -0.0424339f, -0.1271615f, +0.1293512f, +0.1846609f, -0.0424073f, +0.1078958f, +0.0355967f, -0.0960602f,
  -0.0499383f, -0.2210929f, +0.0770433f, +0.0639747f, +0.1519854f, +0.1977424f, +0.1689179f, -0.0357510f,
  -0.0831371f, +0.1832206f, +0.3211077f, -0.3482230f, -0.3033985f, -0.0027722f, +0.0912761f, -0.0976620f,
  -0.1025335f, -0.0482594f, +0.1168549f, -0.0420974f, -0.1598372f, +0.1317604f, +0.0677037f, -0.1371671f,
  -0.0617558f, -0.1923494f, +0.1562029f, +0.2132837f, +0.0076606f, +0.1259885f, +0.2787597f, -0.0615964f,
  +0.2215937f, +0.1161637f, +0.1089066f, +0.1371618f, -0.1929408f, +0.1116959f, -0.2538302f, +0.1245844f,
  -0.3543105f, +0.0364846f, -0.0039470f, +0.2311111f, -0.1619571f, +0.1675232f, -0.0363177f, -0.0288401f,
  -0.0913212f, +0.1224186f, +0.0581878f, +0.3125703f, +0.2429361f, -0.1234132f, +0.1571902f, -0.1500446f
);

const float biases[4] = float[4](
  +0.0824124f, +0.0260341f, -0.0462847f, +0.0199976f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer37 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0065313f, -0.0393723f, +0.1519108f, -0.1210154f, -0.1587620f, +0.0793816f, -0.0030613f, +0.3371418f,
  +0.4420124f, +0.0673210f, +0.0660264f, -0.1180871f, +0.1788729f, -0.0284045f, +0.0010183f, +0.2257842f,
  -0.0030546f, -0.0935630f, -0.1459106f, -0.1031851f, -0.2285928f, +0.1118472f, -0.0740064f, -0.0689122f,
  -0.0204025f, +0.1658363f, +0.3038045f, +0.1980534f, +0.0453827f, -0.1125551f, +0.0679141f, -0.0479497f,
  +0.1884346f, -0.0904655f, +0.1911115f, -0.0026088f, +0.1345526f, +0.2359154f, +0.1024878f, -0.2147641f,
  +0.0047443f, +0.0907607f, +0.4493705f, -0.2506257f, +0.0829463f, +0.0426062f, -0.1603583f, -0.0356429f,
  -0.1325103f, -0.1106740f, -0.0168170f, +0.2303846f, +0.3313725f, -0.2023988f, -0.1434375f, -0.0157198f,
  +0.0487893f, -0.2305413f, -0.0602969f, +0.2232682f, +0.3569249f, -0.0457315f, +0.1470449f, +0.0076830f,
  +0.1425326f, -0.0977443f, -0.1009232f, +0.1504103f, -0.1386184f, -0.0457012f, +0.1004539f, -0.2226052f,
  +0.1484225f, +0.0531453f, -0.0823272f, -0.1624150f, +0.0633273f, +0.0845070f, +0.0892899f, +0.2713229f,
  -0.0889213f, +0.0543975f, -0.0555797f, +0.1340193f, +0.2453348f, -0.1207162f, +0.2510278f, +0.4896241f,
  +0.0651530f, -0.0404476f, -0.0817224f, -0.1900996f, -0.0127277f, +0.1804320f, -0.0247828f, +0.3754459f,
  +0.1504626f, +0.1064508f, -0.3975000f, -0.3106191f, +0.1247571f, +0.1185573f, +0.0739682f, -0.1408335f,
  -0.2636698f, -0.1880186f, -0.1133994f, +0.0623876f, -0.3451159f, -0.4209806f, +0.0005757f, +0.1990567f,
  +0.1124360f, -0.2585730f, -0.1064316f, -0.0155201f, -0.3616653f, -0.0489995f, +0.0131439f, +0.1623807f,
  -0.3040321f, +0.0128258f, +0.2560498f, +0.0749111f, +0.0728361f, +0.0485940f, +0.0308100f, +0.0916325f,
  -0.1710000f, +0.1143642f, +0.2229764f, -0.1329703f, +0.0153121f, -0.0770542f, -0.1613766f, +0.2366356f,
  +0.1993968f, -0.0317541f, -0.1678263f, -0.3362397f, -0.0631154f, +0.0768384f, -0.0890893f, +0.1523257f,
  -0.1547456f, +0.2210703f, +0.1360496f, +0.2281402f, -0.0670756f, +0.3278919f, -0.1024702f, -0.0709852f,
  +0.0232592f, -0.0622167f, +0.1419336f, +0.1688651f, -0.3233366f, +0.2327057f, -0.2685833f, +0.1240591f,
  +0.0624535f, +0.1214372f, +0.0786129f, +0.4939183f, +0.0612757f, +0.0665072f, +0.1127239f, +0.1170836f,
  -0.0362949f, +0.1831443f, -0.0517361f, +0.1236435f, +0.0044457f, +0.2233304f, -0.3085448f, -0.0514965f,
  +0.2758186f, +0.1050656f, -0.3108026f, -0.3035968f, -0.0277613f, -0.1795200f, +0.1398325f, -0.1505724f,
  +0.0105081f, +0.2135750f, -0.1761134f, +0.0608195f, -0.1335004f, -0.1548015f, -0.2437053f, +0.2748994f,
  -0.0191939f, +0.0273446f, -0.0333117f, +0.1833873f, +0.1322678f, +0.0146522f, +0.1091672f, -0.0703512f,
  +0.3346290f, +0.2403666f, +0.1049928f, -0.0144806f, +0.0855497f, +0.0832328f, +0.2666001f, -0.0113455f,
  -0.0484659f, -0.1683698f, +0.0414878f, -0.1009201f, +0.1478791f, -0.4313792f, -0.0228723f, -0.2423715f,
  -0.0989012f, -0.0229593f, +0.0728048f, -0.0352984f, +0.2247559f, +0.0226000f, -0.2011956f, -0.0161800f,
  +0.2392988f, +0.1471420f, -0.0245325f, +0.0978719f, +0.2662202f, +0.1162208f, +0.1083313f, +0.3348215f,
  -0.1408910f, +0.0376431f, +0.0342458f, -0.0611450f, +0.2340163f, +0.1570327f, -0.1563675f, +0.1213565f,
  -0.0303929f, -0.1360037f, +0.0885560f, +0.0137200f, +0.3857198f, -0.0269315f, +0.3028703f, +0.0568053f,
  -0.1181431f, -0.2053391f, +0.1506926f, +0.0008937f, +0.0344096f, +0.0998782f, -0.0911031f, -0.0842451f,
  -0.0371093f, +0.2776068f, +0.0389877f, -0.3268950f, +0.2742694f, -0.0461033f, -0.1507628f, +0.1438454f,
  -0.1693389f, -0.0168801f, +0.2094282f, +0.1094744f, +0.2514549f, -0.0653276f, +0.0536409f, +0.1402029f,
  -0.0461878f, +0.0691478f, +0.0242173f, -0.0106266f, -0.0626542f, +0.1165404f, +0.0952899f, +0.0945833f,
  +0.1183177f, +0.0901036f, -0.0611785f, +0.0351620f, +0.0815420f, +0.0630884f, +0.0672268f, +0.0175133f
);

const float biases[4] = float[4](
  -0.0320934f, +0.0117518f, -0.0464797f, +0.0171075f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer38 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1021437f, -0.0275552f, -0.2562834f, -0.0157504f, +0.0990504f, -0.0767682f, -0.0052343f, +0.0389614f,
  +0.0479083f, -0.0694237f, -0.1191435f, -0.0707300f, -0.0053666f, -0.1190217f, +0.0822013f, +0.3286819f,
  -0.0554166f, -0.2382008f, +0.1148412f, -0.1898565f, -0.0376966f, +0.0773735f, +0.1917151f, -0.2531591f,
  +0.1421818f, -0.2281195f, +0.1697751f, +0.0919871f, +0.1547009f, +0.0107084f, -0.0227730f, +0.0739905f,
  +0.3308932f, +0.1260044f, -0.3196348f, -0.0022306f, +0.0068236f, +0.1202181f, -0.1842034f, +0.0889031f,
  +0.1195863f, -0.0721703f, -0.1280016f, -0.1125318f, +0.1821115f, -0.1128957f, -0.0516313f, -0.0082903f,
  -0.1426273f, -0.0313137f, +0.0391794f, -0.1702034f, +0.0227408f, +0.2703163f, -0.2299858f, +0.2038091f,
  -0.2311973f, -0.1726204f, -0.0263602f, +0.0702654f, -0.2262621f, +0.3285784f, -0.5011917f, +0.2025310f,
  +0.0657254f, -0.0564760f, +0.2666919f, -0.0943813f, +0.1637663f, +0.0413320f, -0.1354116f, +0.2549182f,
  -0.0777916f, -0.0354879f, +0.2930008f, -0.0673953f, -0.0793496f, +0.2646802f, +0.2883840f, -0.1502030f,
  -0.1050780f, +0.0701748f, +0.2783622f, -0.0693223f, +0.1690290f, +0.0762346f, -0.1087912f, -0.0231083f,
  +0.1495104f, -0.0838406f, -0.0024795f, -0.1176015f, +0.0395344f, -0.0087957f, -0.0400633f, +0.0998201f,
  -0.0015803f, +0.6494417f, +0.2013471f, -0.0874570f, +0.0145209f, -0.0469847f, +0.1844244f, +0.0179708f,
  +0.3564141f, +0.3049261f, +0.2358491f, +0.2256828f, +0.0789423f, -0.3272167f, +0.1663036f, +0.4066684f,
  -0.1841259f, +0.1717962f, +0.0210327f, -0.1841339f, +0.0250396f, -0.0009155f, +0.0556083f, +0.0571437f,
  -0.1111871f, -0.1481114f, +0.2777418f, +0.1791305f, +0.1778766f, +0.0221192f, +0.2345555f, -0.0863090f,
  -0.1548537f, +0.0977952f, +0.2028463f, -0.0761033f, -0.1530280f, -0.0689322f, -0.0003428f, +0.0567211f,
  -0.0001263f, +0.0885631f, +0.0513971f, -0.0731258f, +0.1212559f, -0.0122860f, -0.1702343f, +0.0109571f,
  +0.1512170f, +0.0892041f, +0.0366570f, +0.0428324f, -0.0531633f, +0.1036772f, +0.2313729f, -0.4636607f,
  -0.0420457f, +0.0160912f, +0.3949064f, -0.2426105f, +0.0390537f, -0.1433136f, +0.0129932f, -0.2298661f,
  -0.0387382f, +0.0256030f, +0.0755479f, -0.0542804f, +0.2249803f, +0.1369440f, -0.0919410f, +0.0208153f,
  +0.2490667f, +0.2132727f, -0.3050938f, -0.0935184f, -0.0523840f, -0.1096036f, +0.1742031f, -0.0321806f,
  +0.0110042f, +0.2049674f, +0.5754786f, -0.2238520f, -0.1196087f, -0.2051933f, +0.1902920f, -0.2287362f,
  -0.1381590f, -0.0491282f, +0.1366406f, +0.1729031f, +0.0168460f, +0.1109476f, +0.0610567f, -0.1580021f,
  +0.3113845f, +0.0547763f, +0.0328105f, +0.0820020f, -0.1051977f, -0.1945295f, +0.1152625f, -0.0606089f,
  -0.0906176f, +0.1611074f, +0.1454663f, -0.0241424f, -0.0705250f, -0.1282192f, +0.3643516f, +0.0584214f,
  -0.0816273f, -0.1832819f, -0.1343607f, +0.1073810f, -0.1049774f, +0.0520938f, +0.1929487f, -0.0876179f,
  -0.0919212f, -0.0583518f, -0.1206100f, -0.1917941f, +0.0078622f, +0.1654464f, +0.3740973f, +0.0649468f,
  +0.0813332f, +0.0998041f, -0.2402253f, -0.3739136f, -0.0932532f, -0.0008341f, +0.2593330f, -0.0346806f,
  +0.1086860f, -0.0285216f, -0.4105526f, -0.0334305f, -0.0648814f, +0.0623500f, -0.0912876f, +0.1200492f,
  -0.3989236f, -0.0287558f, -0.2264276f, -0.0729496f, +0.3105364f, +0.1489942f, +0.1548567f, -0.0077900f,
  -0.0480832f, -0.0626177f, +0.0192417f, -0.0816649f, +0.1410223f, -0.2850898f, +0.2150589f, +0.2703178f,
  -0.1473517f, +0.1530736f, -0.0787364f, +0.2529549f, -0.2526851f, -0.1184978f, -0.0283843f, +0.0596592f,
  -0.1702970f, +0.3062935f, +0.0633456f, -0.0834161f, +0.1808708f, +0.1927370f, -0.3303651f, +0.1468661f,
  -0.4820172f, -0.1170408f, +0.0684831f, -0.1111831f, +0.1917596f, -0.2687464f, -0.1056599f, +0.0125124f,
  +0.1456127f, +0.1704089f, +0.0975577f, -0.0151873f, -0.3385855f, -0.1478469f, +0.1470765f, +0.1056015f
);

const float biases[4] = float[4](
  +0.0518828f, -0.0343968f, -0.0309756f, -0.0474484f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer38 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1468793f, +0.0772647f, +0.0360486f, -0.0640483f, +0.1920233f, -0.0181480f, -0.3070056f, -0.1264370f,
  +0.2262465f, +0.0539492f, -0.0573272f, +0.1431045f, -0.0764593f, +0.0159912f, +0.1432889f, -0.1331077f,
  +0.2044681f, +0.0437766f, -0.0816217f, +0.0787799f, -0.3736412f, -0.1468447f, +0.0445288f, -0.1249760f,
  +0.3113169f, -0.0236933f, +0.0312146f, -0.2991573f, +0.1819902f, -0.0669651f, -0.0261846f, -0.1555252f,
  +0.4779980f, -0.1484921f, +0.0674248f, +0.0871110f, +0.0511719f, +0.0779222f, -0.2801533f, -0.0121022f,
  +0.0087146f, +0.2062596f, +0.1826733f, +0.2656831f, -0.0350171f, +0.0527988f, +0.2890716f, -0.0855274f,
  +0.1499844f, +0.1887610f, +0.3310052f, -0.2062576f, +0.2797377f, -0.0662795f, -0.1563259f, +0.0500255f,
  +0.2341508f, +0.0674214f, +0.2610007f, -0.1497268f, +0.1925268f, +0.0372473f, -0.0401024f, -0.4294397f,
  +0.0050461f, -0.3811526f, -0.0794865f, +0.1472808f, -0.0038453f, -0.0482578f, +0.4491307f, -0.0690087f,
  -0.0675574f, -0.1298926f, -0.1911262f, -0.0722179f, +0.0443078f, +0.2223682f, +0.1356775f, +0.3061479f,
  +0.0214240f, -0.1484919f, -0.0853178f, -0.0303140f, -0.0207575f, +0.1026134f, +0.1643844f, +0.1152984f,
  +0.1674415f, +0.0808610f, -0.2073756f, -0.2705191f, +0.0646676f, +0.0879112f, +0.1200322f, -0.0134195f,
  -0.1155847f, -0.3539513f, +0.1162678f, -0.1481913f, +0.2662698f, +0.2450005f, -0.1789159f, +0.1562760f,
  -0.2360185f, +0.1453760f, -0.2733379f, +0.0124981f, -0.2633246f, +0.3572283f, -0.0426842f, +0.0422850f,
  -0.1642908f, +0.2327133f, +0.2086923f, -0.1305002f, +0.0600243f, -0.3334684f, -0.3103308f, +0.1134211f,
  -0.1191185f, -0.0247038f, -0.0815485f, -0.0495081f, -0.1696427f, +0.1103318f, -0.3509639f, -0.0193091f,
  +0.0200128f, +0.0894308f, -0.0759747f, +0.0195527f, +0.0354287f, -0.0402121f, -0.4210402f, +0.1815871f,
  -0.1680197f, -0.1562160f, -0.0084312f, +0.0471560f, +0.1043905f, -0.0546132f, -0.3639991f, +0.1152878f,
  -0.3631317f, +0.0309576f, +0.0041150f, +0.0098313f, -0.1249545f, +0.0384052f, +0.1369523f, -0.0178583f,
  +0.0468276f, -0.1162730f, +0.0722303f, +0.1210872f, -0.1060066f, +0.3001955f, -0.2413857f, -0.0554867f,
  +0.0726483f, +0.0936466f, -0.0796071f, +0.1603920f, -0.2441103f, +0.0050749f, -0.0493199f, +0.0123400f,
  -0.0396672f, -0.0520963f, -0.1387778f, -0.2404370f, +0.0187707f, -0.2132470f, +0.0997850f, +0.1672917f,
  +0.2273226f, +0.0032893f, -0.0763399f, -0.0467690f, +0.0784888f, +0.0243521f, +0.1428189f, -0.2097032f,
  -0.0462190f, +0.1750330f, +0.0699515f, -0.0929806f, -0.0196675f, -0.0352079f, +0.1596419f, -0.1638032f,
  +0.1544080f, -0.0575226f, -0.0257258f, -0.0983778f, -0.1322256f, +0.1790163f, -0.2632391f, -0.2635123f,
  -0.2897170f, -0.2313108f, +0.1445048f, +0.0804685f, -0.0727369f, -0.3049582f, -0.0118579f, -0.0082082f,
  -0.1430686f, +0.1539375f, -0.1822559f, +0.1390147f, +0.0461235f, +0.1113354f, -0.1779640f, +0.1800434f,
  -0.1698296f, -0.0293534f, +0.1702091f, +0.0570825f, +0.2199849f, -0.3089885f, -0.1252614f, -0.1350903f,
  -0.2184625f, -0.2623085f, -0.2548093f, -0.3719903f, -0.0886262f, -0.0786472f, +0.3068288f, -0.2981696f,
  +0.3029900f, +0.0158891f, +0.2202491f, -0.3190915f, -0.1351747f, -0.0452559f, +0.0245973f, +0.1344428f,
  -0.0408019f, -0.2423311f, -0.0595187f, -0.1159472f, +0.2073942f, +0.1202494f, -0.1806910f, +0.0535611f,
  +0.1967879f, -0.0769010f, -0.2721837f, +0.1681896f, +0.2237455f, +0.1113374f, +0.3054441f, +0.0560286f,
  -0.0311745f, +0.3277904f, +0.1151487f, -0.0469263f, +0.1250577f, +0.0326751f, +0.2799605f, -0.0277558f,
  -0.0481156f, +0.2093014f, +0.0522287f, +0.0095073f, -0.0093744f, +0.0759468f, +0.0902679f, +0.1986046f,
  +0.0185228f, -0.3398112f, -0.3319995f, +0.1107543f, -0.0179183f, +0.1025327f, -0.2632096f, -0.0153412f,
  +0.0090313f, +0.0684096f, -0.1227828f, -0.0820023f, -0.3245245f, +0.1018221f, +0.1462218f, +0.0871012f
);

const float biases[4] = float[4](
  +0.1804785f, -0.0449375f, +0.0938153f, -0.0036771f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer39 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0370063f, -0.0204529f, -0.2534403f, +0.0263554f, -0.0888253f, -0.1305880f, -0.0531614f, -0.1991402f,
  +0.0900050f, +0.2470214f, -0.0370354f, +0.2366254f, +0.3170252f, +0.0529191f, -0.0704197f, -0.0003053f,
  +0.0953108f, -0.2458653f, -0.1046270f, -0.0798951f, +0.0787788f, +0.1162088f, +0.1116519f, +0.2795697f,
  -0.0171719f, +0.2649759f, +0.1476165f, +0.2088479f, +0.0668270f, +0.2001403f, -0.1696401f, +0.2495749f,
  +0.1755373f, +0.0493249f, +0.1861460f, +0.2246760f, -0.0531632f, -0.1185651f, -0.2345447f, +0.0386613f,
  +0.0347502f, +0.2949727f, -0.2788438f, -0.2769913f, -0.0806565f, -0.2754681f, -0.2122634f, +0.2908667f,
  +0.0802296f, +0.3300959f, -0.1493711f, +0.0328747f, +0.1666801f, +0.0382941f, +0.0619260f, -0.1582155f,
  +0.1113091f, +0.1599445f, -0.0114799f, +0.0397075f, +0.2913970f, -0.1470782f, -0.0791398f, -0.3044831f,
  +0.1081262f, -0.1006569f, -0.3061399f, +0.1032633f, +0.1548001f, +0.0488191f, -0.1457206f, +0.1465205f,
  +0.2262939f, +0.0380998f, +0.2048453f, -0.3146864f, -0.1944766f, -0.2492463f, -0.1659001f, -0.0033520f,
  +0.0384473f, +0.4639199f, -0.3683018f, -0.0939739f, +0.1426435f, -0.0905373f, +0.2466420f, -0.6437610f,
  +0.1860552f, -0.0047912f, -0.0899642f, +0.0417169f, -0.1143577f, -0.1190303f, -0.3901736f, -0.0580563f,
  -0.0125812f, +0.1307721f, -0.0172212f, +0.3077991f, -0.2225805f, +0.0276328f, +0.0658002f, -0.2774161f,
  -0.3834897f, +0.3498292f, +0.0075991f, +0.0693947f, -0.0581805f, -0.0446748f, -0.0950409f, -0.5727406f,
  +0.1084380f, +0.0779676f, +0.0938042f, +0.1856537f, +0.1100838f, -0.0716928f, -0.2251328f, -0.2064745f,
  -0.2067968f, -0.0499754f, -0.2342159f, -0.1099279f, -0.0722852f, +0.1285293f, -0.3806233f, +0.1956141f,
  -0.1863943f, +0.0871727f, +0.0816639f, +0.0725906f, +0.0553521f, +0.3867280f, +0.1972496f, -0.0567856f,
  +0.1275982f, -0.1522503f, -0.0543794f, +0.1090272f, +0.2313448f, -0.1572499f, -0.0467440f, -0.0253194f,
  -0.2614231f, -0.0007698f, +0.1725572f, -0.2080480f, -0.3028944f, -0.2313664f, -0.0429328f, +0.0422259f,
  +0.2231123f, -0.2005803f, +0.0861682f, +0.1014534f, +0.0959117f, -0.3968672f, +0.2346697f, +0.1516035f,
  -0.6090654f, +0.1203924f, +0.1993621f, -0.0632204f, -0.2244636f, -0.0083614f, +0.1151497f, -0.1340642f,
  -0.1012280f, -0.0464750f, +0.1843730f, -0.1527901f, -0.1879690f, -0.2538423f, -0.1167060f, +0.1650595f,
  +0.1414339f, +0.2529810f, -0.3194132f, -0.0289035f, +0.3860480f, +0.2493585f, +0.1692318f, -0.1642215f,
  -0.2397363f, +0.1103557f, -0.1604257f, +0.0090813f, +0.1458801f, +0.1131479f, -0.0947266f, +0.2947843f,
  +0.0357633f, -0.0157828f, -0.2054386f, -0.3217936f, -0.0653019f, -0.0306581f, +0.2095616f, +0.3633144f,
  -0.3044214f, +0.1421831f, -0.1943962f, -0.0957324f, -0.2073207f, +0.3204508f, +0.3021377f, +0.0835430f,
  -0.2286118f, +0.2535790f, -0.0545026f, +0.3781168f, -0.3037664f, +0.2803437f, +0.1606370f, +0.3758728f,
  -0.0146514f, +0.1113154f, -0.0796855f, +0.1755398f, -0.0065608f, -0.0809266f, +0.0928478f, -0.1961917f,
  -0.0685987f, +0.4302026f, -0.0745246f, -0.1458028f, +0.0390794f, +0.0417708f, +0.1455637f, -0.1041602f,
  -0.1112553f, +0.0926928f, -0.1000807f, -0.3551248f, -0.4309916f, +0.1609915f, +0.0744342f, +0.2003409f,
  -0.0961679f, +0.1428272f, +0.1273609f, -0.0731962f, +0.0833735f, +0.1022271f, -0.1502758f, +0.2075225f,
  -0.1301423f, +0.0526489f, -0.0572301f, -0.1592924f, -0.1243553f, +0.3466503f, -0.2298151f, +0.0381738f,
  +0.1573928f, -0.0443620f, -0.1104787f, +0.1710647f, +0.0268495f, -0.0450124f, +0.0381643f, +0.0189291f,
  -0.0446976f, -0.1558921f, +0.1083558f, +0.1625655f, +0.1624107f, +0.0049129f, +0.0253553f, -0.1242879f,
  +0.1502391f, +0.0887679f, -0.0120694f, +0.3708912f, +0.0788779f, +0.3796645f, +0.2287719f, -0.0066723f,
  +0.1760567f, +0.0733957f, +0.1839144f, +0.0479405f, -0.1608425f, +0.2694486f, -0.1867391f, +0.0254352f
);

const float biases[4] = float[4](
  +0.0003563f, -0.0982795f, -0.2418892f, +0.1034185f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer39 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0022445f, -0.0759401f, +0.0572609f, -0.1406163f, -0.1062539f, -0.0129455f, +0.0011438f, -0.1807064f,
  -0.2158499f, -0.0648541f, +0.1069520f, +0.3110642f, -0.0069792f, +0.1628232f, -0.0637187f, +0.0369821f,
  -0.2496227f, -0.1269328f, +0.0278712f, -0.1071240f, -0.0615225f, +0.0758195f, -0.2977048f, +0.1579497f,
  +0.1787199f, -0.0778243f, +0.0635980f, -0.1740761f, -0.2418618f, +0.0214522f, -0.3067825f, +0.0214519f,
  -0.1311554f, +0.0271206f, -0.0463814f, -0.0237914f, -0.0168354f, -0.0463830f, +0.0214092f, +0.3271732f,
  -0.1015957f, +0.2350184f, -0.0119968f, -0.1394632f, -0.0347074f, +0.1885425f, -0.2387758f, +0.0875609f,
  +0.0522747f, -0.0579184f, -0.0009795f, -0.0404373f, -0.0988472f, -0.0921168f, +0.0426079f, +0.0103812f,
  -0.0137676f, -0.0756115f, -0.0376565f, -0.1215262f, -0.0022778f, +0.0132251f, -0.0851155f, +0.0411531f,
  -0.0663907f, +0.0074437f, +0.0071782f, +0.0040508f, +0.1524401f, +0.0015565f, -0.0542541f, -0.0204104f,
  +0.1906194f, -0.0624534f, +0.0157716f, -0.0290710f, -0.0744254f, +0.1871237f, -0.0814596f, -0.1555608f,
  +0.0992233f, -0.1914784f, -0.1139920f, +0.0440760f, -0.2672352f, +0.5083826f, -0.1542904f, -0.2724217f,
  +0.2373627f, +0.0427229f, -0.1181385f, -0.1092296f, -0.1482179f, +0.0769854f, +0.1305165f, -0.3776875f,
  -0.0496180f, +0.2535848f, +0.1401684f, -0.0259402f, -0.1072180f, -0.1523125f, -0.1351393f, -0.2920475f,
  -0.1003229f, +0.0977698f, +0.5281402f, +0.0466951f, -0.2928251f, -0.6248111f, +0.1012840f, -0.3783129f,
  +0.2375372f, +0.0670865f, +0.2302884f, -0.0450155f, +0.3375069f, -0.1710551f, +0.2803960f, -0.1087995f,
  +0.3167794f, +0.2010832f, +0.1833123f, +0.2135822f, +0.1512859f, -0.5527863f, -0.1186936f, +0.0591913f,
  +0.0701842f, -0.1515986f, +0.2902407f, +0.4913417f, +0.0574145f, -0.3730727f, -0.3564038f, -0.2289671f,
  -0.0038418f, -0.6776505f, -0.0775304f, +0.2668971f, -0.1765994f, -0.0196807f, +0.0773283f, -0.2165290f,
  +0.0692022f, -0.1034713f, -0.0065294f, +0.0498211f, -0.2777816f, +0.2640285f, -0.0885665f, +0.0181173f,
  +0.1268989f, -0.0208594f, -0.0178488f, +0.0848267f, -0.0236254f, +0.2287594f, +0.1101678f, -0.0255200f,
  +0.0583419f, -0.0780716f, +0.1338816f, +0.1556051f, -0.1107894f, +0.0098783f, +0.2460498f, +0.2715113f,
  +0.0885933f, -0.0805762f, -0.3852870f, +0.0016594f, +0.0879223f, +0.0277536f, -0.3023117f, +0.0000390f,
  +0.2010924f, +0.4866524f, +0.1197282f, +0.4273840f, -0.3231400f, -0.0676743f, -0.0136492f, +0.0266699f,
  -0.0075325f, -0.1015918f, +0.0576440f, +0.0463600f, +0.1753176f, +0.0178191f, -0.1022848f, -0.1617889f,
  -0.1131850f, +0.0572457f, -0.1284082f, -0.2130619f, +0.0881547f, +0.0391113f, -0.0484478f, +0.1729113f,
  +0.1235043f, -0.1706583f, +0.1662794f, -0.2399796f, +0.3175987f, -0.1046908f, +0.1088251f, +0.2257052f,
  +0.1337114f, +0.0102055f, +0.2683280f, -0.4142807f, +0.0006745f, -0.0716937f, +0.0122630f, +0.0878955f,
  +0.0005178f, -0.0180847f, -0.0626614f, -0.2223615f, -0.0855988f, -0.1897819f, +0.0832183f, +0.0016559f,
  +0.1430875f, -0.0399866f, +0.1037452f, +0.3458654f, +0.1356529f, -0.0513111f, +0.0128585f, +0.0335018f,
  +0.0275141f, -0.3672599f, +0.0854921f, +0.1399946f, -0.0347152f, +0.0932738f, -0.0298854f, +0.1511734f,
  +0.2775126f, +0.2181779f, +0.0654585f, +0.0707489f, -0.2462224f, +0.0553424f, +0.0372093f, -0.1628490f,
  +0.3055646f, -0.1743275f, +0.1325452f, +0.3379824f, -0.2459998f, -0.2098437f, +0.1068156f, -0.0288197f,
  -0.2133486f, -0.4458914f, +0.0211271f, +0.4137271f, +0.1499367f, -0.0427470f, -0.0401273f, -0.1127209f,
  -0.0257954f, +0.0654519f, +0.0758489f, +0.1530451f, -0.2192144f, +0.2073626f, +0.1835168f, +0.0222443f,
  +0.1552123f, -0.0326775f, -0.0128829f, +0.4219315f, -0.0814957f, -0.1824515f, -0.0157781f, -0.1063391f,
  +0.0974161f, -0.1312921f, +0.2208745f, +0.3100380f, -0.0312308f, +0.0295468f, -0.1176761f, +0.3445505f
);

const float biases[4] = float[4](
  -0.3646003f, -0.0839249f, +0.0550352f, -0.0253605f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer40 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0504527f, +0.2216471f, -0.1880473f, -0.1214391f, +0.2351395f, +0.1606626f, -0.1985226f, -0.0060225f,
  -0.2440905f, +0.1724152f, +0.4626374f, -0.1695720f, -0.0711084f, +0.3167241f, +0.2569691f, +0.0653518f,
  +0.0957238f, +0.2302361f, -0.0356679f, +0.0338447f, +0.0381517f, +0.1681747f, +0.1416749f, -0.1893045f,
  +0.0572495f, -0.1440615f, -0.2026320f, -0.2699353f, -0.1200412f, -0.1582024f, -0.1344340f, -0.4224750f,
  -0.1418376f, +0.2420218f, -0.2649401f, -0.1572469f, -0.0577109f, +0.2592333f, +0.0093356f, -0.0585288f,
  +0.1823304f, +0.0682354f, +0.1679355f, -0.0217510f, +0.0397123f, -0.1365130f, -0.0003689f, -0.3757691f,
  -0.0038724f, -0.1251349f, -0.0901399f, +0.3661994f, +0.7657210f, +0.0378328f, -0.0803558f, -0.0362554f,
  -0.2311410f, +0.2214489f, -0.0208620f, -0.1091771f, +0.2210308f, -0.0198860f, -0.0664555f, +0.1888195f,
  -0.1321541f, -0.0382436f, +0.2345105f, +0.1375912f, +0.2441207f, +0.0159328f, +0.2823762f, -0.1891982f,
  +0.0949071f, -0.2025661f, -0.1383464f, -0.0052723f, -0.1183177f, +0.2562984f, +0.1813359f, -0.1322092f,
  -0.3672321f, -0.0049643f, -0.1701386f, +0.2230762f, +0.1165505f, +0.1777635f, +0.2342382f, -0.0161564f,
  -0.1451312f, +0.0123107f, -0.1402472f, +0.0944153f, -0.0834437f, +0.0111469f, -0.2865360f, +0.0617422f,
  -0.4055495f, +0.0134104f, +0.1315748f, +0.1476313f, -0.1862573f, +0.1930240f, -0.0132668f, +0.1620281f,
  +0.0286160f, -0.1030789f, -0.1143096f, +0.1215598f, -0.6922860f, +0.3589891f, -0.0807861f, +0.3010871f,
  -0.0781204f, -0.3466244f, +0.3482898f, -0.0567507f, -0.2695503f, -0.1714840f, -0.2595553f, +0.2668618f,
  -0.0536178f, -0.0490695f, -0.1728387f, +0.1623706f, -0.1229114f, +0.1758493f, +0.0235182f, +0.1182470f,
  -0.1206164f, -0.1174069f, -0.1188244f, -0.4304868f, -0.6143925f, -0.4233410f, +0.2359103f, +0.0448705f,
  +0.0581599f, +0.1499044f, +0.1874100f, -0.0231060f, -0.2823764f, -0.2689873f, -0.0357131f, +0.0019631f,
  +0.2282729f, -0.0346819f, +0.1084859f, -0.1775302f, +0.1183547f, +0.1737835f, -0.2855893f, +0.0460244f,
  +0.0241401f, -0.1944726f, +0.2569735f, -0.0282169f, +0.0807548f, -0.0654367f, -0.1107126f, -0.2146524f,
  +0.0611667f, +0.0677424f, -0.1520602f, +0.1087777f, +0.1188836f, +0.2552460f, -0.0958751f, -0.0812270f,
  +0.1707363f, -0.1889247f, +0.2227382f, +0.1510648f, +0.1738728f, +0.4389533f, -0.0507425f, +0.0518515f,
  +0.1799461f, -0.2626567f, +0.1238739f, -0.0085352f, -0.3047000f, +0.3400622f, +0.0596541f, -0.3020249f,
  -0.2031480f, +0.1892290f, -0.0935272f, -0.0869868f, +0.2640667f, -0.0941179f, -0.0868567f, +0.3423156f,
  +0.0104571f, -0.1228509f, +0.2380421f, +0.4816575f, +0.0677378f, +0.2231713f, +0.1289796f, -0.2913507f,
  +0.2358222f, -0.0580285f, +0.1572571f, +0.2241721f, -0.0096326f, -0.2555891f, +0.0704796f, -0.2474503f,
  +0.0347344f, +0.0645496f, -0.1279654f, +0.0517666f, +0.0350883f, -0.1356147f, -0.0740673f, +0.0528380f,
  +0.0446631f, +0.0113920f, -0.1548358f, +0.1636427f, +0.3057014f, +0.0454214f, +0.3095134f, -0.2293165f,
  +0.4914632f, -0.0703424f, +0.1067131f, -0.1176033f, +0.4463504f, +0.3615927f, +0.1533458f, -0.2112646f,
  +0.1847741f, +0.2352798f, +0.2871871f, +0.1236626f, +0.3533396f, -0.0603086f, +0.1854252f, +0.1632020f,
  +0.0343463f, -0.0071084f, -0.0922573f, +0.0084085f, +0.5566264f, +0.0384435f, +0.1097770f, -0.1550215f,
  -0.0352944f, +0.0668489f, -0.0322150f, +0.2568815f, +0.8091152f, -0.2319949f, -0.1367635f, -0.2964369f,
  -0.0990774f, +0.1470937f, -0.0523558f, +0.4223676f, +0.3110474f, -0.0323630f, -0.0652305f, +0.0745603f,
  +0.0702029f, +0.1143524f, +0.0105759f, +0.2027885f, +0.3444145f, -0.2102231f, -0.0001245f, -0.2475660f,
  +0.1413215f, +0.1158085f, -0.0559379f, -0.0627051f, -0.1943623f, -0.1110060f, +0.1650942f, -0.3162207f,
  -0.1650666f, +0.0165673f, -0.2874415f, -0.1483491f, +0.3991400f, -0.1325660f, +0.1003698f, -0.1737735f
);

const float biases[4] = float[4](
  -0.0426807f, -0.0122700f, +0.0184669f, -0.0075511f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer40 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1354512f, -0.1426964f, -0.0899226f, +0.1106962f, +0.0034537f, +0.2343879f, +0.0940279f, -0.1903459f,
  +0.0541645f, -0.1698023f, +0.1836876f, +0.0278060f, +0.3701557f, +0.1554408f, +0.0836563f, +0.0874378f,
  -0.0009515f, +0.0348782f, +0.2324282f, -0.1071499f, +0.1472629f, -0.2113853f, +0.1682936f, +0.0599467f,
  -0.0134648f, +0.0337535f, -0.3177691f, +0.0050489f, -0.0002932f, -0.0350597f, -0.3072966f, -0.2013425f,
  +0.1857233f, -0.1516123f, -0.1389627f, +0.0410129f, +0.0645620f, -0.0664822f, +0.1306441f, -0.1136657f,
  -0.1390812f, +0.5129081f, +0.4264326f, -0.0129214f, -0.1291553f, -0.2163179f, -0.0092294f, -0.1452243f,
  +0.3492275f, +0.0428179f, -0.1620923f, +0.1704827f, +0.4631803f, +0.0687694f, +0.0395658f, -0.2599255f,
  +0.1226074f, -0.1182669f, -0.0364623f, -0.0179765f, +0.7277675f, +0.1054529f, -0.2087683f, -0.3950575f,
  +0.1112415f, +0.1591359f, -0.3699418f, -0.2447745f, +0.0698638f, +0.3591388f, +0.1658801f, +0.0010268f,
  -0.0297742f, +0.2385937f, -0.1580514f, -0.1805814f, -0.0408994f, +0.1270614f, +0.0784739f, +0.1887185f,
  -0.1221917f, +0.0831282f, -0.3143414f, -0.1929337f, +0.0250941f, +0.4876034f, -0.1859198f, +0.2251169f,
  +0.1614733f, +0.1614939f, +0.1428493f, +0.0798514f, +0.0244149f, +0.0145444f, +0.2639236f, +0.1589376f,
  -0.1768705f, +0.2418566f, +0.1140010f, -0.0043975f, +0.0142525f, -0.1373932f, -0.0387705f, +0.1118626f,
  -0.0270070f, +0.1886972f, -0.1649246f, -0.1111770f, -0.2685069f, -0.1777320f, +0.0406493f, +0.1651750f,
  -0.0960404f, +0.4376275f, +0.0956890f, -0.0834205f, -0.0718909f, -0.2864948f, +0.1977389f, -0.2787818f,
  -0.0243715f, +0.1153703f, -0.1958554f, +0.0326584f, +0.4483741f, -0.4507054f, -0.0347654f, +0.2840496f,
  +0.1301487f, +0.0257503f, +0.0155654f, +0.2562673f, -0.0011622f, -0.0390552f, +0.0074113f, -0.0125748f,
  -0.1673848f, +0.2955497f, +0.2465902f, +0.2542007f, -0.2107292f, +0.0358097f, -0.0349313f, +0.0632528f,
  +0.0304732f, -0.0224839f, -0.0196052f, +0.0577770f, +0.1238550f, -0.0023241f, +0.1064299f, -0.1379520f,
  +0.0294664f, -0.0720806f, +0.1609992f, -0.0101765f, -0.1351020f, -0.3942632f, +0.0201045f, -0.0089167f,
  +0.1759398f, +0.2692088f, +0.0781878f, -0.1146446f, +0.0172323f, +0.0937378f, +0.0627301f, +0.0766692f,
  +0.2227174f, -0.0506180f, +0.3786593f, -0.0375677f, -0.0291714f, -0.1138644f, -0.1490133f, -0.1507522f,
  +0.3265146f, +0.0634781f, -0.1601204f, +0.0756789f, -0.0439545f, +0.1016202f, +0.0948379f, -0.1749352f,
  -0.2380810f, +0.1062983f, -0.0187884f, +0.0440495f, +0.1293433f, +0.1908419f, -0.0303139f, +0.2478076f,
  +0.1467302f, +0.1973263f, +0.0178034f, +0.2058601f, +0.2498517f, -0.2258053f, -0.1116168f, -0.2257341f,
  -0.1346965f, -0.0955420f, -0.1156145f, -0.0070430f, -0.1431739f, -0.0387886f, +0.2145472f, +0.0049898f,
  +0.1589154f, -0.0575802f, -0.0281022f, -0.1111257f, -0.2651391f, +0.2071426f, -0.2691769f, +0.2940052f,
  -0.0135378f, +0.2137454f, -0.4103897f, +0.3115671f, -0.2961349f, -0.0808832f, +0.1448122f, -0.1530811f,
  +0.4845386f, -0.1549856f, -0.3679598f, -0.1299674f, -0.2878205f, +0.0589942f, +0.1456755f, +0.3086206f,
  +0.1006299f, +0.0188024f, -0.2363291f, +0.1666349f, -0.2271572f, +0.1067862f, -0.0556895f, +0.0907827f,
  -0.0942050f, +0.4135930f, -0.0756590f, -0.1325124f, -0.5515667f, +0.2990139f, -0.0907858f, -0.2472576f,
  -0.0707929f, +0.1105981f, +0.0715983f, +0.0263999f, -0.6862782f, +0.0939212f, +0.0625358f, -0.0316339f,
  -0.2079543f, +0.0547182f, -0.2112646f, -0.1558256f, -0.4731069f, -0.1557909f, +0.1450136f, -0.0608728f,
  +0.2147622f, -0.1414573f, -0.0122054f, -0.1960470f, -0.2434027f, -0.1447243f, +0.0955919f, -0.3350355f,
  +0.1131152f, +0.0618433f, +0.1952481f, +0.2486451f, -0.2634964f, +0.0814430f, +0.4079384f, -0.0585892f,
  +0.0230937f, -0.0756591f, -0.0278002f, +0.1320255f, -0.3050163f, +0.3613681f, -0.0284509f, -0.3207320f
);

const float biases[4] = float[4](
  +0.0065799f, +0.0251382f, -0.0032195f, +0.0985842f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer41 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1112468f, +0.1751014f, -0.1766692f, -0.0450708f, -0.2653962f, +0.0186314f, -0.0557232f, +0.1443954f,
  -0.0457322f, -0.0645194f, -0.4820944f, +0.1128180f, -0.1065408f, +0.0409566f, +0.0170552f, +0.0279542f,
  -0.1745649f, +0.0817434f, -0.2796825f, +0.2067380f, +0.1256755f, +0.0077106f, -0.1934167f, +0.1412022f,
  -0.1916496f, +0.0151461f, -0.0056377f, +0.1376535f, +0.0697830f, -0.0049702f, -0.0978670f, -0.1728184f,
  -0.0279044f, +0.4873765f, -0.2328787f, -0.2245047f, +0.0580119f, -0.0864193f, +0.1515097f, -0.3267952f,
  -0.2590486f, +0.2553869f, -0.0030352f, +0.1404952f, +0.1489075f, -0.2341247f, +0.1321075f, -0.1511709f,
  -0.0528347f, +0.0359486f, -0.1283210f, +0.2989608f, +0.0857196f, +0.1784501f, -0.0056456f, -0.2029032f,
  +0.4083164f, +0.0383729f, +0.0664851f, -0.4057829f, -0.0094558f, +0.3434899f, +0.2507058f, +0.1012417f,
  +0.0122927f, +0.2612380f, +0.5271646f, +0.2520526f, -0.0625442f, +0.5751935f, +0.0387057f, -0.1703007f,
  +0.0306139f, +0.0011132f, -0.1504174f, -0.0767405f, -0.0731557f, +0.0404273f, +0.0161585f, +0.1387044f,
  +0.0876053f, +0.3025942f, -0.1426646f, +0.0694814f, +0.0319168f, -0.1540810f, +0.2283923f, -0.1094333f,
  -0.2618034f, +0.1866032f, +0.0509507f, -0.0292243f, +0.0232881f, -0.0467527f, -0.1127449f, +0.0024692f,
  -0.0045088f, -0.1282702f, +0.0327584f, +0.0761939f, -0.1279166f, +0.0915037f, +0.0577966f, +0.0192784f,
  +0.2125966f, +0.4289257f, +0.2438126f, -0.0223845f, -0.3171696f, +0.0581102f, +0.3407693f, -0.2787043f,
  -0.0868196f, +0.1938484f, +0.2354675f, +0.3050052f, +0.0670490f, -0.1199205f, +0.0183190f, -0.0052309f,
  -0.2585311f, +0.2141093f, +0.0458930f, +0.0310067f, -0.0130731f, -0.0742810f, -0.2208107f, +0.0799997f,
  +0.0124333f, +0.0207564f, +0.1718195f, +0.0529651f, -0.0663440f, +0.3497098f, +0.0443003f, -0.1290796f,
  -0.0055186f, -0.1179872f, +0.1495782f, +0.1572483f, +0.0559568f, -0.0238778f, -0.1472992f, +0.0457218f,
  +0.0390364f, -0.0018472f, +0.0994753f, -0.1803828f, -0.0822333f, +0.0147769f, -0.0305018f, -0.0798402f,
  -0.2753175f, +0.2247486f, +0.1051225f, -0.0330066f, -0.2573957f, +0.0435752f, +0.1321634f, +0.2115848f,
  +0.0138789f, +0.1067558f, +0.1956614f, +0.0158200f, +0.2295021f, -0.0516354f, -0.0365226f, -0.2353954f,
  -0.1483593f, +0.1203894f, -0.3349738f, +0.0100180f, -0.0665003f, +0.1747991f, +0.0995354f, +0.1077417f,
  -0.4400829f, +0.1432474f, -0.0747237f, +0.1555912f, +0.0684142f, +0.4405344f, +0.0679797f, -0.2230202f,
  -0.1562670f, +0.0637359f, +0.2092293f, -0.0762712f, +0.2476119f, +0.2044207f, +0.4029829f, -0.1878241f,
  -0.1486806f, +0.0942407f, +0.0475574f, +0.1940857f, -0.0225503f, -0.1321082f, +0.0366152f, -0.1120283f,
  +0.1156109f, -0.1891120f, +0.2337637f, +0.3136953f, -0.3771705f, +0.1167840f, -0.1250195f, -0.0149550f,
  -0.1397742f, +0.2192228f, +0.2484040f, +0.2066646f, -0.2281903f, +0.1246025f, -0.0805790f, +0.1070745f,
  -0.0564422f, +0.0147894f, +0.0408047f, +0.0022349f, -0.0613169f, -0.1924875f, -0.0546518f, -0.0507368f,
  -0.2158993f, -0.1087378f, -0.3132666f, -0.0009229f, +0.1057982f, -0.0696254f, -0.1221168f, +0.1603598f,
  -0.1108303f, +0.1000535f, -0.1149656f, -0.0517488f, +0.0773738f, +0.1714899f, +0.1809033f, +0.1549479f,
  -0.0255151f, +0.3413105f, +0.0082563f, +0.1220970f, -0.2504623f, -0.1551258f, +0.1424862f, -0.1179733f,
  -0.4847639f, +0.2902813f, +0.3156725f, +0.1640111f, -0.5446551f, -0.5301806f, -0.0897441f, -0.5665042f,
  -0.4144462f, +0.2296412f, -0.1519221f, -0.0132851f, -0.1202904f, -0.1389019f, -0.2079901f, -0.0283932f,
  +0.0118415f, -0.2666435f, -0.1859310f, -0.1222160f, +0.1476635f, +0.2138780f, -0.1016853f, +0.1650551f,
  +0.3379313f, -0.0632773f, -0.2664272f, +0.1487627f, +0.0796840f, -0.1769048f, -0.0325623f, +0.2220686f,
  +0.1879213f, -0.0757049f, +0.0405330f, +0.1865747f, -0.4275747f, -0.2379260f, +0.0078209f, -0.0430564f
);

const float biases[4] = float[4](
  -0.1094937f, -0.1149385f, -0.0196068f, -0.0084180f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer41 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2339202f, +0.2615858f, +0.0657245f, -0.1546436f, -0.1038456f, -0.0051117f, -0.0014831f, -0.2933575f,
  +0.0391656f, -0.1743186f, +0.1956385f, -0.2039567f, -0.1152080f, -0.0274166f, +0.0773577f, -0.3558930f,
  -0.1620474f, -0.2568596f, -0.0691659f, -0.2763508f, +0.0798511f, +0.0479637f, +0.2479509f, -0.7163958f,
  -0.0346313f, +0.0382320f, -0.0024448f, +0.1582834f, +0.4211801f, -0.0014300f, +0.0103237f, +0.1575866f,
  +0.3392220f, +0.0297527f, +0.1580429f, -0.3843679f, +0.1796320f, -0.1102158f, -0.0406696f, -0.0414960f,
  -0.0096222f, -0.2689714f, -0.1528268f, +0.0806237f, +0.3746352f, +0.0028186f, -0.0050675f, -0.1462189f,
  -0.0106656f, +0.0028572f, -0.2093683f, +0.1294368f, +0.1920067f, -0.1079203f, +0.1695786f, +0.3429284f,
  +0.0996829f, -0.2292568f, -0.0489207f, -0.1437244f, +0.0942766f, +0.2220295f, +0.1079215f, -0.0403305f,
  -0.1280417f, +0.2058044f, -0.0594184f, +0.1239751f, +0.0368546f, +0.0271386f, -0.1574502f, -0.0621348f,
  -0.0389280f, -0.1520028f, +0.0041598f, +0.2105135f, +0.1809114f, -0.0223583f, -0.0002659f, -0.0526936f,
  -0.0162419f, -0.0556724f, -0.2356223f, -0.0273759f, +0.1306472f, -0.0608034f, -0.0207695f, -0.1437070f,
  +0.0330285f, +0.0051647f, -0.1520268f, -0.1221942f, -0.0865922f, +0.0393304f, +0.0300435f, -0.0059229f,
  +0.0765821f, +0.1537455f, -0.2293721f, +0.0196756f, +0.0742138f, +0.0586701f, -0.0351246f, -0.1219303f,
  +0.1029639f, +0.5699767f, +0.0699326f, -0.1054301f, -0.2469496f, -0.3809408f, +0.6176600f, -0.2088874f,
  -0.1525474f, +0.0361890f, +0.0538530f, -0.0008228f, +0.2873532f, -0.3083771f, +0.0655409f, -0.1621158f,
  +0.0259936f, -0.0881877f, -0.2547529f, -0.1264953f, -0.0185792f, +0.1681245f, -0.0891596f, +0.0653888f,
  +0.4475155f, +0.2685655f, +0.1491216f, +0.3091589f, -0.2651482f, +0.4173780f, +0.1572257f, -0.0472775f,
  +0.3624848f, +0.0495771f, +0.1253904f, +0.3497123f, -0.0220844f, +0.0421426f, -0.1855446f, -0.1327931f,
  -0.1480501f, +0.0489283f, -0.2599265f, +0.1713180f, -0.1548660f, -0.2021380f, +0.2318919f, +0.1468814f,
  -0.1295909f, -0.2225716f, -0.0258288f, -0.2190160f, +0.1464339f, +0.1066734f, -0.1835728f, -0.0786226f,
  +0.1828512f, +0.2938219f, +0.1645630f, +0.1067257f, -0.2159480f, +0.0152643f, +0.2866124f, -0.0645352f,
  -0.2927626f, -0.0905285f, -0.0559102f, +0.0545252f, +0.0969390f, -0.2654807f, -0.1333988f, -0.0372369f,
  -0.0382389f, -0.3758365f, -0.3275537f, +0.3562309f, +0.1948056f, -0.0730169f, +0.1694263f, +0.0089412f,
  +0.1710843f, +0.2685074f, +0.1361934f, -0.0988961f, -0.5656996f, +0.1971551f, +0.0086833f, +0.0527184f,
  -0.1593757f, -0.0655022f, +0.0270019f, -0.0345109f, +0.0155086f, -0.0650506f, +0.0505117f, -0.0081479f,
  -0.1925141f, -0.0543524f, -0.0669356f, -0.2510873f, +0.0527506f, -0.1438277f, +0.1522665f, -0.1434375f,
  -0.1573674f, +0.1002055f, +0.2585384f, +0.3186706f, +0.1369638f, -0.0016259f, -0.2589225f, -0.0505934f,
  +0.1319872f, -0.0320024f, +0.0053269f, -0.2436136f, -0.0720668f, -0.2518445f, +0.1206774f, +0.1997079f,
  -0.1540621f, -0.2755142f, +0.0871976f, -0.0511856f, +0.2661157f, -0.2155116f, +0.2716948f, -0.0816972f,
  +0.0047167f, -0.3578135f, +0.1911690f, -0.1875399f, -0.1293637f, -0.2887509f, -0.2608557f, +0.2101612f,
  +0.0297728f, -0.2489938f, -0.0480694f, +0.1320829f, -0.3145872f, +0.0028633f, +0.1057105f, +0.0701575f,
  +0.0135333f, -0.2726080f, +0.1058671f, +0.0378489f, +0.1734338f, -0.0288683f, -0.3213826f, -0.1091859f,
  -0.0209640f, +0.0385378f, +0.2898420f, +0.1214500f, +0.2044866f, -0.1742556f, +0.0515739f, +0.3108005f,
  +0.2412975f, -0.0366258f, +0.0022819f, -0.1894358f, +0.0994004f, +0.1125484f, -0.0629705f, +0.1304505f,
  +0.0317265f, +0.1066552f, -0.0381773f, +0.0180826f, +0.0415778f, -0.0085599f, -0.0668078f, -0.1088144f,
  +0.0933413f, +0.1340757f, +0.1902687f, +0.2722057f, -0.2120769f, -0.0304528f, -0.0510960f, +0.0870352f
);

const float biases[4] = float[4](
  -0.0590013f, -0.1624146f, -0.0466571f, +0.0527399f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer42 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0699656f, +0.1599860f, +0.1318657f, +0.3134877f, -0.0050284f, -0.3996729f, +0.2266660f, -0.0716517f,
  +0.1601869f, +0.1976261f, -0.0728028f, -0.1209416f, -0.0120579f, +0.1137521f, -0.0096990f, -0.0506148f,
  +0.2121590f, +0.1369834f, +0.1687744f, +0.0815027f, -0.2773698f, -0.1323418f, +0.0775556f, -0.0642112f,
  +0.4788198f, +0.2068004f, -0.0804456f, -0.5246171f, -0.0047188f, +0.4540262f, +0.1254859f, +0.1552783f,
  +0.5138890f, -0.0051939f, +0.0308220f, -0.2755339f, -0.1247411f, +0.1905318f, +0.0024093f, -0.0537794f,
  +0.3403716f, -0.0435115f, +0.0698134f, +0.2640368f, -0.1136278f, +0.0847420f, +0.2218888f, +0.3511802f,
  +0.3073055f, +0.0988854f, +0.3641433f, +0.4042494f, -0.0522019f, +0.1316697f, +0.0131325f, -0.1672488f,
  +0.0069883f, +0.1752731f, +0.1476872f, +0.3062527f, -0.0647194f, +0.1075332f, -0.2134443f, +0.0754151f,
  +0.1937596f, +0.0818735f, +0.2875888f, +0.2712749f, -0.1129638f, +0.0265955f, +0.1271142f, +0.0025955f,
  -0.4782589f, -0.0311229f, -0.0486853f, +0.1898438f, -0.1718949f, -0.1957970f, -0.4364486f, -0.0863478f,
  -0.1643686f, -0.1441607f, +0.1942440f, +0.2534783f, +0.2790391f, -0.0654397f, +0.0855519f, -0.0889764f,
  -0.0078373f, -0.2153071f, +0.1964214f, -0.3366557f, +0.0430932f, +0.1612198f, +0.0169751f, -0.2830546f,
  -0.0221103f, -0.1408661f, -0.1457525f, -0.3606285f, -0.0286931f, +0.0925911f, -0.1840431f, +0.1592941f,
  -0.4634240f, -0.1058955f, -0.3005770f, +0.0450917f, +0.0015554f, -0.2430468f, -0.0140751f, -0.0121961f,
  -0.0349946f, +0.1624231f, +0.0545969f, -0.0304573f, +0.1134965f, +0.1128417f, +0.1051313f, -0.2392462f,
  +0.0257223f, -0.0970229f, +0.0992910f, -0.2404840f, -0.1217665f, +0.0757418f, -0.4668765f, +0.0321837f,
  +0.2194753f, -0.2378839f, -0.1693922f, -0.2698558f, +0.2583129f, +0.2281530f, -0.0338952f, +0.0957408f,
  -0.0727760f, -0.0164646f, -0.0409491f, -0.0768575f, +0.0951661f, -0.0300324f, -0.0965283f, -0.0122378f,
  -0.6487563f, -0.0643213f, -0.0267970f, +0.2646960f, -0.1213511f, +0.1044914f, -0.0326215f, -0.1139818f,
  -0.4163064f, -0.3813964f, -0.1529112f, +0.1858066f, -0.0850540f, -0.1346380f, +0.2077473f, +0.1632544f,
  -0.2334900f, +0.0300019f, -0.0341902f, -0.1699892f, +0.1059876f, +0.0089921f, -0.1310341f, +0.1580933f,
  -0.3037605f, -0.2099502f, -0.2129573f, +0.0468032f, +0.1798766f, +0.0098866f, -0.1355304f, -0.0080080f,
  -0.2054776f, -0.4209338f, -0.3497002f, -0.0682497f, +0.2269253f, -0.1202738f, +0.0480508f, -0.2984586f,
  +0.0161032f, +0.1719774f, +0.1281314f, +0.2972071f, +0.3569540f, -0.2497078f, +0.0281197f, +0.1124403f,
  -0.1037678f, -0.1353274f, -0.1710429f, +0.1421337f, +0.2170889f, -0.0405360f, -0.0104499f, +0.0509772f,
  +0.1007507f, +0.1623983f, -0.2252814f, -0.2899593f, +0.3728374f, -0.0863881f, +0.1204476f, +0.0504112f,
  -0.0871756f, -0.0148871f, +0.0705004f, -0.0527930f, +0.1907077f, +0.1290466f, +0.1042389f, +0.1023890f,
  -0.1145051f, +0.0705754f, -0.1748418f, +0.0079224f, -0.2760537f, -0.0288416f, +0.1621249f, -0.0820051f,
  +0.3585530f, -0.2413091f, -0.0885605f, +0.1011898f, +0.0451724f, -0.3293536f, +0.0383496f, +0.0986012f,
  -0.1081798f, -0.2607420f, -0.1866826f, +0.0776013f, -0.0832188f, -0.0185854f, +0.1059049f, +0.1138389f,
  +0.0542780f, -0.0275317f, +0.1226284f, -0.4318878f, +0.0341928f, +0.2043079f, -0.1681442f, -0.0190498f,
  +0.3713655f, -0.0907986f, +0.0679358f, -0.2320162f, +0.1702809f, +0.0354218f, -0.3221890f, +0.2075048f,
  -0.0259741f, +0.0985462f, +0.2437191f, -0.1509136f, +0.0796599f, -0.2602042f, -0.1896338f, -0.1496432f,
  +0.2462589f, +0.2062380f, +0.0348330f, +0.0491947f, +0.0494501f, -0.0230696f, +0.0978898f, -0.0531552f,
  -0.0569992f, -0.0657286f, +0.1031976f, -0.0895066f, +0.1047480f, +0.1514604f, -0.0895270f, -0.0301758f,
  +0.0155242f, -0.0217953f, +0.1062877f, +0.0529822f, +0.1639924f, +0.0847057f, -0.2289700f, -0.0585582f
);

const float biases[4] = float[4](
  -0.0419397f, +0.0412451f, -0.0060572f, -0.0058916f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer42 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1724418f, +0.0655968f, +0.2072258f, +0.0011212f, +0.0306464f, +0.0502379f, -0.1852457f, -0.2346917f,
  +0.1079923f, -0.0374318f, +0.2772117f, +0.2135482f, -0.0857206f, +0.2372990f, -0.0433285f, -0.2404398f,
  +0.0011029f, -0.0080235f, -0.1249546f, +0.3004893f, +0.1240342f, -0.2632454f, +0.2606398f, -0.2682886f,
  +0.0375179f, +0.1637546f, -0.0737884f, +0.1318712f, -0.1476680f, -0.2203601f, +0.3591605f, -0.2458429f,
  +0.2417053f, +0.4691994f, +0.0118198f, -0.2536826f, -0.0046912f, +0.5666919f, +0.0462477f, -0.1470639f,
  -0.0597667f, +0.0718116f, +0.0215119f, +0.1222980f, +0.1216371f, -0.1673316f, -0.1490180f, -0.2587631f,
  +0.1468104f, +0.0577329f, -0.3388394f, -0.3550684f, +0.0857394f, +0.0548960f, +0.0093486f, +0.0036616f,
  +0.0322357f, +0.1699463f, -0.1623709f, +0.5442849f, -0.0171616f, -0.2056477f, +0.0987344f, -0.0325972f,
  +0.2001155f, +0.0659051f, -0.2707269f, +0.0305765f, -0.0205999f, -0.1528804f, +0.1245008f, +0.1273138f,
  +0.0147445f, -0.1849000f, +0.1900823f, +0.1468351f, -0.0694454f, -0.2213976f, +0.2128015f, -0.2062343f,
  -0.1629317f, +0.1123030f, -0.0012343f, +0.3619862f, -0.0689305f, -0.3973819f, +0.1562801f, +0.0980495f,
  +0.0279916f, +0.1870119f, +0.0420812f, -0.1608391f, -0.1771303f, -0.0776124f, +0.1596420f, -0.0010931f,
  +0.7329053f, -0.0301799f, -0.0934469f, -0.5089769f, +0.1881506f, +0.2586069f, -0.1827599f, +0.0698904f,
  +0.4831503f, +0.0186851f, -0.1313234f, -0.2622674f, +0.2032230f, +0.6884614f, +0.0708488f, +0.2088070f,
  +0.2264148f, +0.0486516f, -0.1379247f, +0.1124435f, +0.1445792f, +0.0180645f, +0.0925918f, +0.0597784f,
  +0.0635458f, -0.0025494f, -0.0725749f, +0.0824922f, -0.2511459f, +0.0417556f, +0.1098669f, +0.2756453f,
  +0.0686639f, +0.0050635f, -0.2289963f, +0.0661073f, -0.0917147f, -0.1057331f, -0.0333565f, -0.0486852f,
  +0.0423640f, -0.2263160f, -0.1888736f, -0.2140434f, -0.0557200f, +0.2654780f, +0.1233417f, -0.0220183f,
  -0.1943511f, -0.3122332f, -0.0583892f, -0.0485902f, +0.2636447f, +0.3392623f, +0.1064200f, +0.0459494f,
  -0.1914410f, +0.0322226f, +0.1492210f, +0.0802711f, +0.0426743f, +0.0948921f, -0.0583940f, +0.0326927f,
  -0.0961619f, +0.1586119f, +0.0496384f, +0.0098226f, -0.0566785f, -0.0566468f, +0.0553538f, +0.0422211f,
  +0.0772857f, +0.0540582f, -0.0990396f, -0.2205632f, -0.3836709f, +0.0466664f, -0.0539644f, -0.0160338f,
  -0.0941824f, -0.1400751f, -0.0708982f, +0.4705645f, +0.3979722f, -0.1016244f, +0.1156623f, +0.0890213f,
  +0.0491888f, -0.0254067f, -0.1433904f, +0.0710849f, +0.2296223f, +0.1645384f, -0.1617650f, -0.0088210f,
  +0.0333369f, +0.0488688f, +0.1311195f, +0.1434331f, +0.0076916f, -0.0849611f, -0.1790267f, -0.1202419f,
  +0.0127397f, -0.2134974f, -0.3069904f, -0.2496336f, -0.0280663f, +0.0484451f, +0.1882570f, +0.0909517f,
  -0.2065194f, -0.1197215f, -0.1019647f, -0.0643919f, +0.2606952f, +0.0526772f, +0.0734971f, -0.0715736f,
  +0.1448399f, +0.2146386f, -0.2827981f, -0.2430846f, -0.2549194f, +0.0308639f, -0.0295617f, +0.1481681f,
  -0.1092646f, +0.2021415f, +0.2144013f, +0.3390883f, -0.0671503f, -0.1710592f, +0.3202196f, -0.0540461f,
  +0.0506349f, -0.0560716f, +0.2769543f, +0.2109932f, +0.0635794f, -0.2376329f, +0.2324470f, -0.3034111f,
  +0.0890484f, +0.0412715f, +0.0402026f, -0.2561475f, +0.0873423f, +0.0701294f, +0.0035975f, +0.0073607f,
  +0.3144113f, +0.1280070f, -0.2209815f, +0.1073933f, -0.0266188f, +0.0598804f, +0.1853264f, +0.0193962f,
  +0.1556605f, -0.1444310f, -0.1291177f, +0.0247043f, +0.0456038f, +0.0183710f, +0.1103630f, +0.1763467f,
  +0.2983172f, +0.0043766f, +0.1003108f, +0.0019975f, +0.3455375f, -0.1500635f, +0.1362549f, +0.0326003f,
  -0.0274238f, +0.3360694f, -0.3318473f, -0.3524147f, +0.1430082f, +0.0974804f, +0.1022030f, +0.0920132f,
  -0.1323856f, +0.1156282f, +0.1297369f, +0.1919609f, +0.1233098f, -0.0450263f, -0.0661510f, +0.1543682f
);

const float biases[4] = float[4](
  -0.0391617f, -0.0107011f, +0.0226209f, +0.0949386f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer43 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0795893f, +0.0783317f, +0.1881188f, +0.0780853f, +0.1545670f, -0.1226702f, -0.1485939f, -0.1915755f,
  +0.0459272f, -0.0855851f, +0.1619012f, -0.1047475f, +0.0272165f, +0.0840225f, +0.0434694f, -0.3776804f,
  +0.0273896f, +0.0198913f, -0.1285798f, +0.0597168f, +0.0782169f, +0.1544657f, +0.2675765f, -0.3813633f,
  +0.0008558f, -0.0747242f, -0.1309764f, -0.1897679f, -0.1614928f, -0.0235521f, +0.1116867f, +0.0591894f,
  +0.0074239f, -0.0133957f, -0.2450901f, -0.1331367f, +0.0911576f, -0.0356942f, -0.1651723f, -0.2347902f,
  +0.0020224f, -0.0587423f, -0.4044096f, +0.3672547f, +0.2351515f, +0.3874529f, -0.0042152f, -0.2111388f,
  -0.1573477f, +0.0505681f, +0.0587827f, +0.0235712f, +0.1545486f, -0.1577527f, +0.1543234f, +0.1041105f,
  +0.2568578f, +0.1997143f, +0.0993437f, -0.1020216f, -0.1454357f, -0.1470784f, -0.3122855f, -0.0161074f,
  +0.2159368f, -0.1749348f, -0.0952805f, +0.0808709f, +0.0663650f, +0.0626400f, +0.0156016f, +0.1265875f,
  -0.2783701f, -0.0189116f, +0.0754690f, +0.1137734f, -0.1501310f, +0.1090373f, +0.0089440f, +0.0858425f,
  -0.1483311f, +0.0407929f, -0.0750559f, +0.1518460f, +0.1788168f, -0.1505283f, +0.0955684f, -0.0097885f,
  -0.0098865f, -0.0683119f, +0.1038373f, +0.1376108f, -0.0279460f, -0.0614879f, -0.0696708f, -0.0862044f,
  +0.1501088f, +0.2816166f, -0.4793993f, -0.3893938f, -0.2055290f, +0.0236846f, +0.3171142f, -0.1734495f,
  +0.3922333f, +0.4619631f, +0.4013561f, +0.1013802f, -0.2457030f, +0.1559053f, +0.4012115f, +0.3105389f,
  -0.1935189f, +0.0223292f, +0.0152747f, +0.0713702f, +0.1937264f, -0.1467193f, +0.0181125f, -0.1194905f,
  -0.0458060f, +0.0656817f, -0.1913735f, -0.1233692f, +0.1428892f, -0.0032687f, -0.2074368f, -0.2073858f,
  +0.0294173f, -0.2184400f, +0.1831446f, +0.3799591f, +0.0023883f, +0.1672425f, +0.0210789f, -0.1589255f,
  +0.0276810f, -0.0457243f, -0.1084341f, +0.3051675f, +0.2183639f, -0.1055271f, -0.0258454f, -0.2107558f,
  -0.0923167f, +0.2161379f, +0.1250971f, +0.1072313f, -0.0130929f, +0.1603123f, +0.0860297f, +0.1387788f,
  -0.0027025f, +0.2828558f, +0.2384343f, -0.0746223f, -0.2096929f, -0.3126654f, +0.1363702f, +0.3520918f,
  -0.0079801f, -0.2493517f, -0.1739161f, -0.4377956f, -0.1601816f, +0.2127640f, -0.0321274f, +0.0876810f,
  -0.1161609f, -0.1168790f, +0.1776483f, -0.1046184f, -0.1324398f, -0.0765857f, -0.1387711f, +0.1836106f,
  +0.0161730f, -0.1243688f, -0.0060826f, +0.3801508f, +0.0945951f, -0.1053660f, -0.1468693f, +0.1402631f,
  -0.1522254f, +0.0573865f, +0.0330078f, -0.0403475f, +0.0964572f, -0.2547821f, -0.2473822f, +0.0118476f,
  +0.0682537f, -0.1884707f, -0.0227634f, +0.0140418f, -0.0507173f, -0.1129245f, +0.2015573f, +0.0545400f,
  -0.1906703f, -0.1385011f, +0.0687938f, -0.0795531f, +0.0450013f, +0.0156892f, -0.0584275f, +0.0473354f,
  -0.0143043f, +0.2315044f, +0.0719646f, +0.1260649f, -0.0881975f, +0.0413955f, +0.0293307f, +0.0746160f,
  -0.0228407f, -0.0697842f, +0.0286306f, -0.0363545f, +0.1353232f, +0.0199834f, -0.0070021f, +0.0952086f,
  +0.0892937f, +0.0277840f, +0.0411608f, -0.1302177f, -0.1602999f, -0.1609232f, -0.1196902f, +0.1418099f,
  +0.0221482f, +0.0179983f, -0.0338564f, -0.0128623f, +0.1389044f, -0.2012484f, -0.0701354f, +0.0068969f,
  +0.0816084f, -0.1855625f, +0.0240081f, +0.0809317f, +0.1585611f, +0.0269605f, -0.2338555f, +0.0276329f,
  +0.1563547f, -0.4367669f, -0.4225264f, +0.2369622f, +0.3813315f, +0.1091490f, -0.4010423f, -0.2154578f,
  +0.2624410f, -0.0020861f, -0.0604418f, +0.1074111f, -0.1428054f, +0.0939368f, -0.0935080f, -0.2394810f,
  +0.0148875f, -0.0357200f, +0.2520837f, +0.0211236f, +0.1744285f, +0.0556428f, -0.0458660f, -0.1496989f,
  -0.2242474f, -0.0226772f, -0.0744582f, +0.1102720f, -0.1955857f, -0.0266519f, -0.1314541f, -0.3403916f,
  -0.0212421f, -0.0593891f, +0.1237016f, +0.0057117f, +0.1186933f, -0.0637819f, +0.0130158f, +0.0704832f
);

const float biases[4] = float[4](
  +0.1316871f, -0.0690115f, -0.1003681f, -0.3419873f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer43 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0167691f, +0.1520482f, +0.1726654f, -0.1095333f, -0.0417361f, +0.0828420f, -0.0774018f, +0.1600972f,
  -0.1285628f, +0.1621731f, +0.0454352f, -0.2173235f, -0.0057494f, -0.2057210f, +0.0408913f, +0.0683315f,
  -0.0336401f, -0.0793805f, +0.1476581f, +0.0988642f, -0.0812132f, +0.1933323f, -0.1003543f, -0.1199571f,
  +0.1170099f, -0.1496657f, +0.2238715f, +0.0417021f, -0.0866057f, +0.1144825f, +0.0981439f, -0.1816431f,
  +0.1006275f, -0.0567175f, +0.0864101f, -0.1452738f, -0.3459010f, -0.2282001f, -0.2015253f, +0.0023087f,
  +0.1664684f, -0.0631242f, -0.1407061f, -0.0713262f, -0.0157766f, -0.1680239f, +0.0578448f, +0.1445274f,
  +0.0516940f, +0.0834217f, -0.1756124f, -0.1184834f, -0.0938008f, +0.0516077f, -0.1124930f, +0.1864555f,
  +0.2961615f, -0.0740478f, +0.0830614f, -0.0445314f, -0.3309892f, +0.0866505f, -0.0559373f, -0.1810472f,
  +0.1749805f, -0.1536861f, -0.0507791f, +0.0295205f, -0.5680035f, +0.2589361f, +0.0394116f, +0.1173597f,
  -0.0141241f, +0.2223502f, -0.2121167f, -0.0716999f, -0.0660651f, -0.2968045f, -0.0900570f, +0.0205812f,
  +0.0178628f, -0.2045502f, -0.2348858f, -0.1897346f, +0.0069311f, -0.2325076f, -0.1156754f, -0.3876874f,
  -0.0640834f, -0.0080931f, +0.0846411f, -0.0622421f, -0.2469320f, -0.1408908f, +0.1543755f, -0.0404790f,
  +0.2157121f, +0.0407212f, -0.1748802f, -0.3612108f, +0.3790165f, +0.0526575f, +0.1968275f, -0.2111981f,
  -0.1151660f, -0.0691121f, +0.0621569f, -0.1884481f, +0.2922641f, +0.0487236f, -0.2947305f, -0.4035186f,
  +0.0527758f, -0.0099499f, +0.0117706f, -0.2081254f, +0.3759881f, +0.0374115f, -0.0285881f, -0.2125159f,
  +0.1602969f, +0.0497766f, +0.0691646f, +0.0897346f, +0.4600885f, +0.0837634f, +0.0706412f, -0.2611423f,
  +0.2543566f, -0.0663634f, +0.0013133f, +0.1890604f, +0.0501992f, +0.1527037f, -0.1715138f, -0.0594565f,
  +0.0562369f, +0.0441885f, +0.1361412f, +0.0007549f, +0.0753696f, -0.1192500f, -0.2169044f, -0.0008165f,
  +0.1676364f, +0.2757270f, +0.0054745f, +0.1523875f, +0.1304443f, -0.1929587f, +0.0738394f, +0.0563947f,
  -0.1679690f, +0.0502993f, +0.3422400f, +0.1665931f, +0.0704521f, -0.0901072f, -0.0957313f, +0.2310217f,
  +0.0377997f, -0.0592291f, +0.3043331f, -0.1532758f, -0.0426343f, +0.0300387f, -0.0511483f, -0.0761766f,
  +0.2680126f, +0.1093316f, +0.0063668f, -0.0814721f, +0.2483823f, -0.1554043f, +0.3141065f, -0.2053806f,
  -0.0887082f, -0.1529282f, -0.0079816f, +0.1898587f, -0.1915056f, +0.3198274f, -0.1864775f, +0.1598366f,
  +0.0593655f, +0.0150912f, +0.1595368f, +0.1304866f, -0.1403034f, -0.0758386f, -0.0316214f, +0.0486539f,
  +0.0040354f, +0.0380588f, +0.0399779f, -0.0584938f, +0.1095131f, +0.0023960f, -0.0925266f, +0.0303954f,
  -0.3038410f, -0.2769273f, +0.0359869f, +0.1259050f, +0.1519863f, -0.0642405f, +0.1155585f, +0.0121354f,
  -0.0679467f, +0.1038230f, +0.1048347f, -0.0509069f, -0.1722925f, -0.1484947f, +0.0099570f, +0.2892236f,
  +0.0510916f, +0.1094120f, -0.0595406f, +0.4741062f, -0.0883673f, +0.1589957f, +0.1479503f, +0.3358435f,
  -0.4297380f, +0.1061878f, +0.3328560f, +0.1600252f, +0.3501868f, +0.1413304f, -0.1432101f, +0.1906754f,
  +0.0697769f, +0.0438169f, -0.0978162f, +0.1080507f, -0.2492064f, +0.0490081f, +0.2814957f, -0.1681556f,
  -0.3591038f, +0.0191816f, +0.1024195f, +0.0620770f, -0.1281737f, +0.0886264f, +0.0704873f, -0.0344562f,
  -0.1885512f, +0.0202849f, -0.0646406f, -0.0896630f, -0.0368620f, -0.1230464f, +0.1094447f, +0.0651525f,
  +0.0189383f, -0.2544031f, +0.2846826f, -0.0463931f, -0.3694058f, +0.0508268f, +0.1332020f, +0.0078331f,
  -0.2546225f, -0.1409492f, +0.0216091f, +0.2284107f, -0.2099542f, -0.0914143f, +0.1343492f, -0.0912967f,
  -0.0558214f, +0.0266615f, -0.0066487f, +0.1664113f, +0.1814284f, +0.0040726f, -0.0474257f, +0.2296068f,
  +0.0599882f, +0.0979414f, -0.0023062f, -0.0921096f, -0.0157176f, +0.2342614f, +0.0084090f, -0.1262977f
);

const float biases[4] = float[4](
  +0.0644743f, +0.0224229f, -0.0177674f, -0.0012501f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer44 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2730186f, +0.0883850f, +0.2092461f, -0.0059801f, -0.0048204f, +0.1764470f, +0.2307305f, -0.1017860f,
  -0.0377770f, +0.1646460f, +0.0642174f, +0.2072051f, -0.0090887f, -0.3016866f, -0.1596669f, +0.2204516f,
  +0.0403020f, +0.0101940f, +0.1362380f, +0.4886770f, -0.0215477f, -0.0033059f, -0.1905034f, +0.0322507f,
  +0.2098643f, -0.4344868f, -0.0037568f, -0.3943534f, -0.1650305f, -0.3645649f, +0.0836220f, +0.2420577f,
  +0.1678935f, -0.2268789f, -0.3732152f, +0.0160490f, -0.0034236f, -0.3948636f, +0.0356934f, +0.0668773f,
  -0.0334829f, +0.0481898f, +0.0205287f, -0.2993229f, +0.0255248f, -0.2375547f, +0.0663132f, +0.1063393f,
  +0.0212001f, -0.2121948f, +0.2657651f, +0.0365963f, -0.0905495f, -0.0623695f, +0.1170749f, +0.1443666f,
  -0.0563670f, +0.1266422f, -0.0079253f, +0.0625756f, +0.1552575f, -0.3713095f, +0.0336535f, +0.2067886f,
  -0.0565239f, +0.0616095f, +0.1250523f, +0.0116024f, -0.0789767f, +0.0794910f, -0.1990253f, +0.0443485f,
  +0.0986549f, +0.0273725f, -0.0834593f, +0.2237450f, +0.1806238f, -0.0992041f, -0.0800292f, +0.1507962f,
  -0.1178690f, -0.1231981f, -0.2606382f, +0.0112999f, -0.2405427f, +0.0354418f, -0.0506290f, +0.1824462f,
  -0.0228417f, -0.0155726f, -0.1513728f, -0.3259375f, +0.0807352f, -0.0726497f, -0.0390509f, +0.0222207f,
  -0.2739666f, -0.1386765f, -0.4502870f, +0.2663359f, +0.0326442f, -0.2323437f, -0.1434800f, +0.2111307f,
  -0.1655930f, -0.0793098f, -0.0837534f, +0.2646240f, +0.0711586f, -0.0154994f, -0.0286807f, -0.0750630f,
  +0.1323914f, -0.1319702f, +0.0423198f, -0.1479363f, +0.0109100f, -0.3094666f, +0.0138330f, +0.0472573f,
  -0.0505759f, +0.1302581f, -0.1397588f, -0.0866135f, +0.2418264f, +0.0864995f, -0.1186679f, -0.2468324f,
  -0.2670058f, +0.0839735f, +0.0987772f, -0.2321999f, -0.0213727f, +0.0294490f, -0.1469320f, -0.4031334f,
  -0.2676574f, +0.1130525f, +0.0774592f, -0.1481715f, +0.0278213f, +0.1095608f, -0.0283477f, +0.2149442f,
  -0.0066387f, +0.1368473f, +0.0535427f, +0.1264386f, -0.0704934f, +0.1410884f, +0.0439365f, +0.0351084f,
  -0.0099010f, +0.0049858f, -0.1167055f, -0.0727021f, -0.2209944f, -0.1452281f, -0.0144404f, +0.1226821f,
  +0.1039713f, +0.0274532f, +0.0108868f, -0.5605741f, +0.0737866f, +0.2405101f, +0.1275916f, -0.0363365f,
  +0.4841867f, +0.1443070f, -0.1089263f, +0.0241342f, +0.0611323f, +0.0885530f, +0.0790062f, -0.0816888f,
  -0.0649707f, -0.3404871f, +0.2722445f, +0.4881054f, -0.0125195f, -0.0185594f, +0.0101705f, +0.0516430f,
  +0.0940804f, -0.0844064f, -0.1054924f, +0.3604225f, -0.3553676f, -0.0843854f, -0.0502835f, +0.0020590f,
  +0.1265656f, +0.0281755f, +0.2845199f, +0.2361401f, -0.0175984f, -0.2566826f, -0.1356602f, +0.0354160f,
  +0.0999701f, -0.0776927f, -0.0155991f, +0.2822270f, -0.0559869f, -0.0676469f, -0.1064706f, -0.1720547f,
  +0.1156759f, -0.0884029f, +0.1348201f, +0.1140540f, +0.0517122f, -0.1345299f, +0.3083231f, +0.2812799f,
  -0.1117959f, -0.1667129f, -0.1073199f, +0.1744535f, -0.0019707f, +0.0260134f, -0.1364542f, +0.0200300f,
  +0.1699873f, -0.3286051f, +0.2232565f, +0.4519419f, +0.1155146f, +0.0820809f, +0.4149471f, -0.3422692f,
  -0.2031227f, -0.0265393f, -0.0606022f, +0.0199042f, -0.0427252f, +0.0227313f, +0.2514881f, -0.2041254f,
  -0.1247155f, -0.1950428f, +0.2006481f, -0.3731048f, +0.0151758f, +0.0426104f, +0.1533478f, -0.3306801f,
  -0.0514189f, -0.5337988f, -0.0515415f, -0.3461831f, +0.2158412f, +0.0803583f, +0.0904863f, +0.2370417f,
  +0.0705928f, +0.4194382f, +0.0379200f, +0.0128081f, -0.0930637f, +0.0449374f, +0.1116580f, -0.0586697f,
  -0.0875188f, -0.1046447f, +0.1176186f, +0.1134867f, -0.2452273f, -0.0065286f, -0.0800265f, -0.0435988f,
  +0.0189827f, +0.0317192f, +0.0930341f, -0.0079429f, -0.0161825f, +0.2059695f, +0.0549662f, -0.1203679f,
  +0.0036176f, +0.0499509f, -0.1250219f, -0.1097076f, +0.2089476f, -0.0097677f, +0.1458228f, -0.2430958f
);

const float biases[4] = float[4](
  -0.0166003f, +0.0294885f, -0.0240389f, +0.0038235f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer44 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1646183f, +0.0423588f, -0.0769854f, +0.1607659f, +0.0107305f, -0.0399777f, -0.1254172f, -0.0338511f,
  -0.2493999f, -0.4751465f, -0.0989844f, +0.7610803f, -0.1370704f, +0.0273017f, -0.0651960f, +0.0485144f,
  -0.2436461f, -0.0657511f, -0.0798258f, -0.1009291f, -0.3109457f, -0.4431845f, -0.0676679f, -0.0848785f,
  -0.4486908f, -0.1900795f, +0.0475819f, +0.3459230f, -0.4358955f, -0.2526342f, +0.1681999f, +0.1375321f,
  -0.2804930f, +0.3997184f, -0.0977680f, -0.1810939f, -0.1702318f, -0.1516464f, +0.0991465f, +0.1315763f,
  -0.0988259f, +0.2728044f, +0.1182974f, -0.0139269f, +0.0080538f, +0.0871210f, -0.1437410f, -0.2386520f,
  -0.0339519f, +0.2859758f, +0.1590248f, -0.6363159f, -0.5045916f, +0.1673643f, +0.0210096f, +0.0195323f,
  -0.0407545f, -0.3113694f, +0.1661888f, -0.0481145f, -0.2324747f, +0.0151383f, -0.1495274f, +0.2210582f,
  -0.0994594f, +0.0868521f, -0.0741668f, -0.1101454f, -0.1497493f, -0.1227938f, -0.2177369f, +0.0156920f,
  -0.0176980f, -0.1132693f, -0.3714065f, +0.1003251f, -0.0302535f, +0.0094256f, -0.0383190f, -0.1116916f,
  -0.1891012f, -0.0763105f, -0.0612475f, +0.2591281f, -0.0732204f, -0.0610933f, +0.1914613f, +0.0688134f,
  +0.2234970f, +0.0749068f, +0.0859153f, +0.0358028f, +0.0344180f, -0.0765347f, -0.1282542f, -0.0099099f,
  -0.2545043f, +0.0424788f, +0.2192233f, -0.0473361f, +0.1568349f, +0.1730349f, +0.1327446f, -0.0836211f,
  +0.1360283f, +0.1194255f, +0.1020297f, +0.0716455f, +0.1290682f, +0.1874478f, +0.0710726f, -0.2809520f,
  +0.2038909f, -0.2216986f, +0.0615240f, +0.0934457f, +0.1211451f, -0.0941207f, +0.0609212f, +0.0167644f,
  -0.2972612f, +0.0843500f, -0.0504335f, +0.3097737f, -0.0477779f, +0.0881084f, -0.0016039f, +0.2976829f,
  +0.1070496f, +0.1471253f, +0.0002366f, +0.3089785f, +0.1400368f, +0.2609651f, -0.0610315f, -0.0413174f,
  +0.0296233f, -0.2932884f, -0.0229952f, -0.0649341f, +0.2038758f, -0.1280920f, +0.0182982f, -0.0563542f,
  -0.0703006f, +0.0459994f, +0.2352940f, -0.1558409f, -0.0662169f, +0.2107865f, +0.2190271f, -0.1772467f,
  +0.0306106f, -0.0228659f, +0.0027038f, -0.1064434f, -0.0503695f, -0.0070397f, +0.1620830f, -0.1326112f,
  +0.0734530f, +0.4269584f, +0.1668298f, +0.0258618f, +0.0538361f, -0.0740889f, +0.2201300f, -0.1088476f,
  -0.2087932f, +0.1402294f, +0.0562996f, +0.0986730f, -0.1055467f, +0.1919407f, +0.1652063f, -0.0959218f,
  +0.1196548f, -0.2472694f, -0.1321780f, +0.2383691f, +0.1722695f, -0.0207339f, -0.0427039f, +0.0222306f,
  +0.1150062f, -0.1097804f, -0.2052341f, +0.0803458f, -0.2207710f, -0.0457958f, -0.3517658f, +0.0460721f,
  -0.1291762f, +0.2264963f, -0.2084329f, +0.2694917f, -0.0797561f, -0.1038409f, -0.0130876f, -0.0215857f,
  -0.0544418f, +0.1569336f, +0.2950307f, -0.4700324f, -0.0510031f, -0.2744164f, +0.3531584f, -0.2138979f,
  -0.0801662f, +0.1064112f, +0.3711419f, -0.2881175f, +0.1412385f, +0.1167313f, +0.3152415f, +0.1525527f,
  +0.0199323f, +0.0700799f, -0.1084210f, -0.1315921f, -0.2159628f, +0.0756240f, -0.1824480f, +0.0288896f,
  +0.0861660f, -0.0258073f, +0.1127165f, -0.3124650f, -0.2364627f, -0.0448859f, -0.1119344f, -0.0108741f,
  +0.0443168f, +0.2895247f, -0.2055122f, -0.2189613f, -0.0171153f, +0.0394058f, +0.2013108f, +0.1807457f,
  +0.2325045f, +0.0295738f, +0.1361247f, -0.2286300f, +0.3277685f, +0.0640408f, +0.1352152f, -0.0455287f,
  +0.1594182f, -0.1790273f, -0.0697971f, +0.1490425f, -0.0120028f, -0.0008934f, -0.0846585f, -0.0969615f,
  +0.0261929f, -0.0454732f, +0.2306526f, -0.2715749f, +0.0380478f, +0.0335791f, -0.0472041f, -0.1568694f,
  +0.1525974f, -0.1020366f, +0.1101091f, +0.1041902f, +0.0056517f, +0.1763139f, +0.1791047f, -0.0942910f,
  +0.5340306f, +0.1848165f, -0.0200746f, -0.0331517f, -0.0594359f, +0.4844001f, +0.1745728f, +0.0737667f,
  +0.3727317f, -0.1145301f, -0.0396441f, -0.0555498f, -0.1030839f, -0.1247107f, -0.1048965f, -0.3262561f
);

const float biases[4] = float[4](
  +0.0170283f, -0.0131217f, -0.0037597f, +0.1333008f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer45 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1898587f, +0.0917762f, -0.0618509f, +0.2426614f, +0.2643374f, -0.0068334f, -0.1107304f, +0.0701810f,
  +0.0457359f, -0.0236291f, +0.0024872f, -0.3165264f, +0.0410621f, +0.1752374f, -0.1507173f, -0.0077178f,
  +0.1615976f, +0.1198052f, +0.2272964f, -0.1972355f, +0.0709365f, +0.3364398f, +0.0021047f, +0.3063149f,
  -0.0614844f, -0.0198934f, -0.2180682f, -0.2010864f, +0.0904986f, -0.2801723f, -0.0580227f, -0.0649756f,
  -0.0058296f, +0.3703665f, -0.1525478f, -0.2627827f, +0.0156127f, -0.1076263f, -0.1038482f, -0.0303281f,
  +0.3804785f, +0.1201960f, +0.1390136f, -0.1200208f, +0.3932248f, +0.1682992f, -0.1672352f, +0.1043466f,
  +0.1110060f, -0.1006738f, -0.0358067f, -0.2148610f, -0.1701783f, -0.0470311f, +0.1379295f, +0.1963557f,
  +0.0467561f, +0.0679244f, -0.0230594f, -0.1414436f, +0.2070170f, -0.0979740f, -0.1407765f, +0.1007676f,
  +0.2704107f, +0.3109985f, +0.3005793f, +0.0626496f, -0.1018487f, +0.4888090f, -0.0692207f, -0.1239681f,
  -0.0291700f, -0.3046304f, -0.1408451f, +0.3136750f, -0.4463921f, +0.2152530f, -0.0194362f, +0.0421280f,
  +0.0717960f, +0.0981624f, -0.1589221f, -0.3188665f, -0.0222770f, -0.0984239f, +0.1549248f, -0.2565254f,
  -0.1259836f, +0.4020109f, +0.3419578f, +0.1875689f, +0.1799829f, -0.0259850f, -0.0322192f, -0.0746535f,
  -0.1971678f, +0.0518321f, -0.0100857f, -0.3682724f, -0.0330595f, -0.0578726f, +0.0829895f, -0.1931553f,
  +0.0330813f, +0.4699746f, +0.2848071f, -0.2370222f, +0.1372184f, -0.1768664f, +0.1399586f, +0.1943746f,
  -0.0069367f, +0.0230746f, -0.0662001f, +0.1655295f, +0.0455026f, +0.0539910f, -0.4538289f, +0.0612117f,
  -0.1720374f, +0.2915763f, +0.1534950f, -0.2229248f, -0.0082797f, -0.1744149f, +0.0857591f, +0.0030928f,
  -0.0427415f, +0.0130290f, +0.1047657f, +0.5084263f, +0.4801508f, -0.0728731f, -0.2182135f, +0.0720541f,
  +0.0807557f, -0.2307065f, -0.3229768f, +0.1099863f, +0.0755747f, +0.1566844f, +0.0944527f, +0.0970881f,
  -0.1628094f, -0.1815504f, +0.4158277f, +0.1145571f, -0.3262338f, +0.0623634f, -0.0128514f, +0.0401865f,
  -0.0638498f, +0.0738952f, +0.0397357f, -0.0628633f, -0.3941149f, -0.0484895f, +0.1157104f, +0.3028701f,
  +0.0304145f, +0.0558195f, +0.2602105f, +0.1449227f, +0.0767687f, +0.0701932f, +0.0672536f, +0.1317363f,
  -0.0170999f, -0.0833563f, +0.1556908f, -0.1498928f, +0.0381124f, -0.1269767f, -0.1345042f, +0.0095735f,
  +0.0296504f, -0.2944864f, -0.0862479f, -0.2064334f, -0.0022202f, -0.0706814f, -0.1691698f, -0.1033949f,
  +0.1433442f, +0.2100417f, -0.0932095f, +0.1229421f, +0.0511637f, +0.0405021f, +0.1557494f, +0.1470760f,
  -0.0650749f, -0.0091666f, +0.0876464f, -0.2296936f, +0.2265657f, -0.1624992f, +0.1201921f, +0.4156833f,
  -0.0570810f, -0.1841741f, +0.0779247f, +0.2998631f, +0.2246290f, -0.0079750f, +0.0113064f, +0.0712957f,
  +0.0039555f, +0.1636443f, -0.4011767f, +0.2734709f, -0.0493940f, +0.0990055f, -0.2128755f, +0.0608211f,
  +0.0143432f, -0.3331493f, -0.0781272f, -0.2577752f, -0.2719513f, +0.0807159f, +0.0837139f, +0.1854237f,
  +0.1743610f, -0.0555006f, +0.0258223f, -0.0810424f, +0.0845339f, -0.1737434f, -0.1019806f, +0.0131193f,
  +0.0399550f, -0.1842234f, +0.0901779f, -0.1104385f, -0.3479144f, -0.2849946f, +0.1109826f, -0.3048103f,
  -0.0441552f, +0.0491955f, +0.0933955f, -0.0962640f, -0.0448879f, -0.1711689f, +0.0142556f, -0.1114007f,
  +0.0117347f, -0.6321536f, -0.0537308f, +0.0898779f, +0.4336224f, -0.0794492f, +0.0906693f, +0.0516765f,
  -0.3146103f, -0.3954982f, -0.0890623f, -0.1707790f, +0.1904453f, -0.0906863f, +0.0912198f, -0.1542960f,
  +0.0810096f, -0.0679169f, +0.0152159f, +0.0777002f, -0.0044755f, -0.0129338f, +0.1356404f, -0.1157765f,
  +0.0752924f, -0.0873992f, -0.1021290f, +0.2894916f, -0.1259409f, -0.1263098f, +0.0746035f, -0.0950180f,
  -0.1554383f, -0.0192565f, -0.3343056f, -0.3038152f, +0.5455373f, -0.2942457f, -0.1413620f, -0.1172738f
);

const float biases[4] = float[4](
  -0.0123206f, -0.0742346f, -0.0672918f, +0.0149906f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer45 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1730791f, +0.0027941f, +0.0217125f, +0.0008028f, -0.0278296f, +0.0855944f, +0.1940533f, +0.0772466f,
  +0.0509371f, -0.1941293f, -0.0236774f, -0.0846607f, -0.1264527f, +0.0825499f, -0.2409399f, +0.0020593f,
  -0.1287671f, +0.1399852f, -0.0956984f, -0.0232075f, -0.1200015f, +0.1280236f, +0.0554743f, +0.1446777f,
  -0.0918444f, -0.1254549f, +0.3449453f, -0.3490834f, -0.3219155f, -0.0608411f, -0.1983246f, +0.0201642f,
  -0.4544764f, -0.3527197f, -0.1267989f, -0.0183796f, +0.3152544f, +0.1408665f, -0.4697354f, -0.1320609f,
  -0.1019766f, +0.3253104f, +0.0044189f, +0.0286196f, -0.0439821f, -0.1703706f, -0.1300687f, -0.2512533f,
  +0.1146772f, +0.1301079f, +0.0207472f, +0.1948807f, -0.0547318f, -0.0104469f, +0.0403243f, +0.0480065f,
  +0.3384025f, -0.0756010f, +0.0138958f, +0.1096770f, +0.0320435f, +0.0267967f, +0.1051370f, -0.2184436f,
  +0.0742102f, +0.1328671f, +0.0417926f, +0.2995102f, +0.1868744f, -0.0347416f, -0.2136628f, +0.0376005f,
  +0.0518132f, +0.0876207f, -0.1239119f, +0.0759419f, -0.1838460f, +0.0196971f, +0.0332087f, +0.0618860f,
  -0.0278739f, +0.0418144f, -0.0985967f, +0.1296557f, +0.1756440f, +0.0880211f, -0.1622290f, -0.1909882f,
  +0.0565069f, -0.0941695f, -0.2768438f, +0.2213944f, -0.1599753f, +0.1764217f, -0.0433645f, -0.0684980f,
  -0.0376764f, +0.0762975f, -0.1840521f, -0.3007787f, +0.0556761f, -0.0219172f, +0.3598916f, -0.1004208f,
  -0.4309539f, +0.2500700f, -0.1628504f, -0.0295796f, -0.1432448f, -0.2345761f, +0.3478240f, -0.0471214f,
  -0.1363695f, -0.2152542f, -0.2382328f, -0.1273013f, +0.1663639f, -0.3813064f, -0.4071090f, -0.2118072f,
  +0.1711822f, -0.1712312f, -0.1715034f, -0.0610055f, -0.0157699f, -0.0395751f, +0.0491608f, -0.0955045f,
  -0.0179729f, -0.0271378f, -0.0318541f, +0.0569160f, +0.1473151f, -0.0041865f, +0.0475301f, +0.1279324f,
  +0.0384401f, +0.2896544f, -0.1386456f, +0.3339252f, -0.2789127f, +0.0860328f, -0.0680934f, +0.0074579f,
  -0.0165550f, -0.3371005f, +0.1294708f, -0.1408842f, +0.0957199f, +0.0186868f, +0.2456091f, +0.2297863f,
  -0.1869109f, -0.1865662f, +0.1095481f, -0.0422840f, -0.1533262f, -0.1630278f, -0.0908046f, -0.1178663f,
  -0.0174361f, -0.1621410f, -0.0339121f, -0.1715894f, -0.0524291f, -0.0287613f, -0.1459663f, +0.0548207f,
  -0.0094033f, +0.1206867f, -0.1366255f, -0.0207521f, -0.3087522f, -0.2165292f, -0.1943998f, +0.0298306f,
  +0.0233006f, -0.0030225f, -0.2155973f, +0.0247549f, +0.0663513f, -0.1312240f, -0.2155791f, +0.4600580f,
  -0.3845334f, +0.0912743f, +0.1574641f, +0.0269098f, +0.0838552f, -0.1406340f, -0.1154410f, +0.0849337f,
  -0.0683894f, +0.1575483f, -0.1099619f, -0.0751020f, +0.2314240f, +0.0056665f, -0.2391436f, +0.0879016f,
  -0.2560052f, +0.0447935f, +0.1148963f, +0.1018870f, +0.1595305f, +0.0006431f, -0.0222377f, +0.0248293f,
  -0.0588546f, -0.2433595f, +0.1168425f, -0.0275347f, -0.0167435f, +0.0770977f, +0.0763606f, +0.0086562f,
  -0.0966651f, +0.1177698f, -0.1165145f, +0.0599492f, +0.0109330f, +0.1945179f, -0.0649042f, +0.1281243f,
  -0.1140706f, -0.0934359f, -0.1195912f, -0.0293120f, +0.0260542f, +0.0512035f, -0.0036131f, -0.0815361f,
  +0.0120625f, +0.1841941f, +0.0823017f, -0.0060290f, -0.1696930f, -0.1146056f, -0.0233755f, +0.1604737f,
  -0.0500588f, +0.1176641f, -0.2045133f, +0.1005016f, +0.1205264f, -0.1796252f, +0.1703659f, -0.1497011f,
  -0.0248875f, +0.1288231f, +0.0246410f, +0.3604475f, -0.1193502f, -0.3440662f, -0.0508661f, +0.3403009f,
  +0.0994413f, +0.0890721f, -0.0294931f, -0.0691413f, -0.1449457f, +0.0215477f, -0.0875874f, +0.0330297f,
  -0.2304112f, +0.3057111f, +0.2433205f, -0.0608168f, -0.1456182f, +0.0919368f, -0.2199842f, -0.1314713f,
  +0.1901023f, +0.0512269f, +0.1128189f, +0.0567656f, -0.2270778f, +0.2466290f, +0.1598419f, +0.0476446f,
  +0.1229326f, +0.2299754f, -0.1645735f, -0.1183263f, -0.0582465f, +0.0557792f, -0.4741171f, +0.0541280f
);

const float biases[4] = float[4](
  -0.3729593f, -0.1049101f, +0.0147532f, -0.0185590f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer46 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1332933f, -0.2156561f, +0.2127687f, +0.2836331f, -0.0879737f, -0.0851357f, +0.0473394f, -0.0565935f,
  +0.1011372f, -0.2730324f, -0.0191152f, +0.2329239f, -0.1944680f, -0.2358469f, +0.2311677f, -0.1782975f,
  +0.0144652f, -0.0372420f, +0.2893098f, -0.2684562f, -0.0677345f, +0.0647386f, +0.1541160f, +0.3269109f,
  -0.3764074f, -0.1038057f, -0.0577859f, +0.0040533f, +0.2712793f, -0.1525616f, +0.2877669f, -0.0802813f,
  +0.0187329f, +0.3273833f, -0.3899319f, +0.1055916f, +0.5963238f, +0.1071448f, -0.0185366f, -0.0350453f,
  +0.1715797f, -0.3692076f, -0.0883920f, -0.1697313f, +0.0297579f, +0.2301948f, -0.2170684f, -0.0822142f,
  +0.0130606f, -0.3819321f, +0.2185651f, -0.0339348f, +0.1575211f, +0.1390480f, -0.1830627f, +0.0336060f,
  -0.0416250f, -0.3386168f, +0.1443377f, +0.1593644f, -0.1361376f, +0.0131664f, +0.1332978f, +0.2096854f,
  +0.0274260f, -0.2233078f, +0.1801304f, -0.1279540f, +0.0911199f, -0.1098458f, -0.1875468f, +0.1047545f,
  +0.2066159f, +0.0636710f, -0.0672178f, -0.0522065f, -0.2799573f, -0.1398696f, +0.0334511f, -0.1933830f,
  +0.1363925f, -0.2686195f, +0.0124620f, +0.0963436f, +0.0344086f, -0.0100802f, -0.2494343f, -0.0086388f,
  +0.2571025f, +0.0554848f, -0.0391639f, -0.3571486f, -0.0606909f, +0.0035598f, -0.2900769f, -0.0911726f,
  +0.1343516f, -0.0016619f, +0.1832356f, +0.0741106f, -0.2444721f, -0.0107426f, +0.0558271f, -0.1806827f,
  +0.1584823f, +0.3365656f, +0.1359298f, +0.1360727f, +0.0926856f, -0.2779355f, -0.1886332f, -0.1057067f,
  -0.1239000f, +0.0120553f, +0.0796108f, +0.1141277f, +0.0448850f, +0.0349483f, -0.0488941f, +0.3083127f,
  +0.0845621f, -0.1079341f, +0.0640802f, -0.1471537f, -0.1774067f, +0.0978211f, +0.1459568f, +0.0171868f,
  -0.1753163f, +0.2329425f, +0.1173639f, +0.0061201f, +0.0846916f, +0.1074392f, -0.1996953f, +0.0843116f,
  +0.3944828f, -0.1219141f, -0.0541924f, +0.1843887f, +0.0491152f, +0.0189028f, +0.0884573f, -0.0733106f,
  -0.2001046f, -0.2145524f, +0.4816624f, +0.0717192f, -0.0890653f, -0.0673220f, +0.0852664f, +0.0383999f,
  +0.1856495f, +0.3610564f, -0.0074568f, -0.2669273f, +0.1739228f, +0.2407669f, -0.3429528f, +0.2205482f,
  -0.2374355f, -0.2841007f, +0.1319379f, -0.1485400f, +0.1780628f, +0.1890490f, -0.0859762f, -0.1848107f,
  -0.1534626f, -0.2174153f, -0.0068582f, +0.2506145f, -0.3749136f, -0.0902309f, -0.0021053f, -0.1848597f,
  +0.1256586f, +0.0823112f, +0.1588444f, -0.2449617f, +0.3352402f, +0.1718811f, +0.2931560f, +0.1429270f,
  -0.1427176f, -0.1732416f, +0.1505629f, -0.1946688f, -0.2017932f, +0.0568423f, +0.1169191f, +0.0349160f,
  -0.0290491f, +0.0017294f, +0.0706694f, -0.0941284f, +0.1635435f, +0.0868627f, +0.1565264f, +0.0039396f,
  +0.0388710f, +0.4781936f, +0.1003434f, +0.0464466f, +0.1902970f, +0.0084553f, -0.0196816f, -0.0612861f,
  -0.0056302f, -0.1662196f, +0.0515000f, -0.0670511f, +0.0977972f, -0.0992040f, -0.1438860f, -0.1961047f,
  +0.1424054f, -0.2728522f, -0.0844689f, -0.0440216f, -0.1863926f, +0.0387535f, -0.1169868f, -0.0059408f,
  +0.0261425f, +0.3909182f, -0.0684411f, -0.0649801f, +0.2358643f, -0.1356306f, -0.0044972f, -0.0083658f,
  -0.0318857f, -0.0153589f, +0.0860757f, +0.0985035f, +0.3130343f, -0.2291023f, -0.1599880f, -0.0061297f,
  +0.1724931f, +0.2533469f, -0.1837409f, -0.0054561f, -0.0922846f, -0.0070434f, +0.0039508f, -0.2519131f,
  -0.1262626f, +0.2986186f, -0.0933198f, -0.1807041f, +0.0129345f, +0.0428279f, -0.1388451f, -0.3659443f,
  +0.1155273f, -0.2569733f, +0.1904326f, -0.0767943f, -0.0540736f, +0.0524915f, -0.0004130f, -0.2598869f,
  +0.0899128f, +0.2485627f, -0.1891249f, +0.0143290f, -0.0069142f, -0.0354534f, +0.0092455f, +0.2556626f,
  +0.1813241f, +0.0740445f, -0.0740028f, +0.0297817f, -0.0001708f, -0.1347445f, -0.0695657f, +0.0547598f,
  -0.0139706f, +0.1554464f, -0.0551563f, -0.0268118f, +0.2689254f, +0.3762011f, -0.0394499f, +0.0806224f
);

const float biases[4] = float[4](
  -0.0208622f, +0.0658814f, +0.0143846f, -0.0231933f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer46 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2715467f, +0.0077254f, -0.0168433f, -0.2473837f, -0.2425200f, -0.1170556f, -0.0788350f, -0.3281618f,
  +0.1868614f, -0.0067958f, -0.1631333f, -0.1358158f, -0.0182008f, +0.2223158f, -0.1730481f, +0.1803779f,
  -0.0483106f, -0.1536016f, -0.2100709f, +0.0229165f, -0.2312349f, +0.0527603f, -0.2034557f, +0.0318105f,
  -0.3088874f, +0.1348805f, -0.0220566f, +0.3801028f, +0.1780224f, +0.1477837f, -0.0963931f, -0.0418273f,
  -0.1703889f, +0.0150177f, +0.3524724f, -0.5503066f, +0.0968939f, -0.1120349f, -0.2199232f, +0.1745507f,
  +0.1775126f, -0.4162499f, +0.4543197f, +0.1985076f, +0.2717991f, +0.2876190f, -0.1056097f, -0.2155304f,
  -0.0054187f, -0.0199847f, +0.0078793f, +0.1255310f, +0.2896389f, -0.0078743f, +0.2833714f, -0.2091038f,
  +0.2116767f, -0.1069078f, +0.2718329f, +0.0067323f, +0.3281756f, +0.0595106f, +0.0254155f, -0.2686000f,
  -0.0344726f, -0.0459267f, +0.2863319f, +0.1177450f, +0.2016193f, +0.1369326f, -0.0450468f, -0.1679408f,
  -0.1786270f, +0.1065209f, -0.1059005f, +0.1476406f, +0.3905489f, +0.0120972f, +0.2284723f, +0.1069624f,
  +0.1011988f, +0.2488783f, -0.2818651f, -0.1045537f, -0.0308427f, -0.1234388f, -0.0948485f, +0.0017701f,
  -0.1050038f, -0.2156147f, +0.0365636f, -0.0772525f, -0.2316707f, +0.0740566f, +0.2468458f, +0.0092183f,
  +0.0945474f, +0.2584712f, +0.0628234f, +0.3379959f, +0.1096439f, +0.1981988f, +0.0153791f, +0.1628608f,
  -0.0411329f, +0.0033221f, +0.1671358f, +0.1757138f, +0.5638064f, +0.2434241f, +0.0614383f, +0.0129997f,
  +0.2074190f, -0.4721467f, +0.2065472f, -0.0256064f, -0.2038872f, +0.1936979f, +0.1215012f, +0.1901668f,
  -0.1575739f, -0.1450033f, -0.0112375f, +0.2362287f, -0.0603056f, -0.0198585f, +0.0027271f, +0.1454215f,
  +0.2398329f, -0.0802704f, -0.0398814f, +0.1629410f, +0.1628350f, -0.0335578f, +0.2312315f, +0.1179920f,
  -0.0125067f, -0.0641648f, +0.0296490f, +0.0719836f, -0.2244168f, -0.1980766f, +0.1587625f, -0.0626130f,
  +0.0792632f, +0.0469194f, +0.1694971f, +0.0303730f, +0.4232226f, +0.0075975f, -0.1010763f, +0.0526922f,
  -0.1090434f, -0.0981964f, -0.1799957f, -0.1070255f, +0.1535785f, +0.0142241f, -0.0702221f, -0.1966443f,
  -0.3408750f, -0.0126245f, -0.2090414f, +0.0717256f, -0.0126718f, -0.1122236f, -0.0013436f, +0.2153519f,
  +0.0007460f, +0.0728388f, +0.1657233f, +0.0007843f, +0.1524437f, +0.3426221f, -0.2279831f, -0.1626653f,
  -0.2419156f, -0.0605026f, -0.1384017f, +0.2223191f, +0.4917409f, -0.1414109f, +0.0423224f, -0.0067043f,
  -0.0312645f, +0.2194115f, +0.1167856f, +0.2615153f, +0.0942713f, -0.0125118f, +0.1281308f, +0.1504645f,
  +0.1295473f, +0.0928748f, -0.0028954f, -0.1134115f, -0.0706865f, +0.4188681f, -0.0586007f, +0.3430243f,
  +0.2528423f, +0.2456852f, -0.0462888f, -0.0069621f, +0.1812629f, +0.1892267f, +0.0790609f, -0.1975420f,
  -0.1989874f, -0.2255711f, +0.0589331f, +0.1335624f, -0.3771079f, -0.0990978f, -0.1924234f, -0.0222775f,
  +0.2013381f, +0.3120767f, -0.0382454f, +0.2538850f, -0.2517287f, -0.0572370f, -0.0641443f, -0.1166023f,
  -0.1282062f, -0.1554395f, -0.2125410f, +0.0325436f, +0.0452061f, +0.4136561f, -0.0775646f, +0.2315842f,
  -0.2038720f, -0.1893058f, -0.0445099f, +0.0091782f, -0.0926325f, -0.3596713f, +0.0149498f, -0.1791606f,
  -0.3107107f, -0.0842895f, -0.2363900f, +0.0293220f, -0.1807253f, +0.2979326f, -0.1977050f, +0.0398748f,
  +0.0876487f, -0.1681077f, +0.1398087f, +0.3465042f, +0.0869562f, +0.1153399f, -0.0781026f, +0.0098296f,
  -0.0943691f, +0.3410706f, +0.0623213f, -0.1052057f, -0.0492455f, +0.1249435f, +0.0126785f, +0.2020565f,
  -0.2324668f, +0.3152535f, -0.1890882f, +0.2329001f, +0.0205435f, -0.0676836f, -0.0298141f, -0.0275179f,
  +0.0622253f, -0.0358132f, -0.0284658f, +0.2820086f, +0.0775540f, +0.1340676f, -0.0671441f, -0.1923666f,
  -0.3152209f, -0.2511017f, -0.1298765f, -0.0417856f, -0.0992079f, -0.2211999f, -0.0809132f, -0.0020190f
);

const float biases[4] = float[4](
  +0.0296902f, +0.0204162f, -0.0275237f, +0.1345469f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer47 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0412599f, +0.2101191f, -0.0706110f, +0.0388399f, +0.1741017f, -0.0426078f, -0.0401368f, +0.0401052f,
  +0.0217006f, +0.1417430f, +0.2967406f, +0.0759483f, +0.2786427f, -0.3817779f, +0.0732118f, -0.0784089f,
  +0.2067669f, +0.1358077f, +0.1753910f, +0.0158218f, +0.1228017f, +0.2248102f, -0.2537186f, +0.0553889f,
  -0.1921289f, -0.1063825f, +0.0151961f, +0.1776195f, -0.0226997f, +0.0053280f, -0.0565759f, +0.2302830f,
  -0.2830603f, -0.1493091f, +0.5384907f, -0.0334531f, +0.0297280f, +0.1062713f, +0.1935170f, -0.0096908f,
  +0.4788301f, +0.3387923f, -0.0466332f, -0.0042761f, -0.1021532f, +0.1445041f, -0.2061447f, -0.2476837f,
  +0.1215110f, -0.0854437f, +0.1789193f, +0.0211115f, -0.1452901f, -0.0332416f, -0.0748081f, -0.1399561f,
  +0.1439091f, -0.0550915f, -0.1891500f, +0.1300347f, -0.0562799f, -0.1669652f, +0.0658006f, +0.0698903f,
  -0.0914001f, +0.0867744f, +0.2097605f, +0.1939487f, -0.1392834f, +0.0422226f, +0.1051308f, -0.1641229f,
  +0.2593219f, -0.0792371f, +0.1152542f, +0.0559179f, -0.1657559f, -0.0678722f, +0.1370850f, -0.1678330f,
  -0.2993296f, -0.1479255f, -0.1483337f, -0.2389770f, -0.2265007f, +0.1644982f, +0.1670508f, -0.2218074f,
  -0.0267536f, +0.1213318f, -0.0257307f, -0.2573986f, -0.3146191f, +0.1609363f, +0.1823208f, -0.1409062f,
  +0.4258493f, -0.0972653f, -0.1055356f, +0.2742172f, +0.0577741f, -0.2223264f, -0.1852534f, -0.2068007f,
  -0.7556148f, -0.3150772f, +0.0665388f, -0.3208310f, +0.3808285f, -0.5449401f, -0.0824419f, -0.0039065f,
  -0.1658890f, +0.3846974f, +0.0056456f, +0.3705609f, -0.3266597f, +0.1315742f, -0.0104125f, +0.1920221f,
  +0.2828425f, -0.0741442f, -0.0240657f, +0.2852953f, +0.2467152f, -0.0677038f, +0.1277742f, -0.1626056f,
  -0.4601378f, -0.1430164f, +0.0386140f, -0.2943242f, +0.3193092f, -0.3529145f, -0.0594859f, +0.1646374f,
  +0.0228974f, +0.1908739f, -0.0550210f, +0.2061025f, -0.2869346f, +0.1005322f, -0.1138996f, -0.3281810f,
  +0.0469786f, +0.0525388f, +0.4074907f, -0.4943107f, -0.3701200f, -0.2244797f, +0.0192972f, +0.0839551f,
  -0.4744593f, +0.3506067f, +0.4330888f, +0.1382861f, +0.1149530f, -0.0035441f, +0.1874097f, +0.0795143f,
  -0.0563508f, +0.0012230f, -0.0681396f, +0.2632358f, +0.1920177f, +0.0094666f, +0.0732188f, +0.0988647f,
  +0.1383630f, +0.0014580f, +0.2073860f, +0.0816381f, -0.3504112f, -0.3257922f, -0.0076199f, -0.3741178f,
  -0.4460750f, +0.0933021f, +0.1442941f, +0.3277887f, +0.0162222f, -0.1711771f, -0.0184658f, +0.0038878f,
  +0.1358790f, -0.2257292f, -0.1956357f, +0.2208669f, +0.1498727f, -0.0093605f, -0.1248692f, +0.3286388f,
  -0.1856156f, +0.1234052f, +0.0662642f, +0.3814143f, +0.2727647f, -0.2723698f, -0.1162904f, -0.2095165f,
  +0.2343323f, -0.1951933f, -0.3738422f, +0.2152825f, +0.1151084f, -0.1146403f, +0.0922830f, -0.3014410f,
  +0.1910846f, -0.1600258f, -0.3240457f, -0.1231673f, +0.2454987f, -0.3207285f, -0.0539780f, -0.1728885f,
  -0.0807533f, -0.2285079f, +0.1143619f, +0.0042680f, -0.0028774f, +0.2714226f, -0.2842254f, +0.0283848f,
  +0.3740697f, +0.0117967f, +0.1402276f, -0.0369126f, -0.1883257f, -0.1301788f, +0.3191710f, +0.1369090f,
  +0.1356539f, +0.0698576f, +0.1786386f, -0.1025322f, +0.2497715f, -0.2065761f, -0.1194342f, -0.2628439f,
  -0.2588212f, +0.0549738f, -0.1884685f, -0.1880473f, +0.1224669f, -0.0013207f, -0.1479913f, -0.0102612f,
  +0.4237257f, +0.1481216f, +0.1852808f, -0.3249527f, -0.3212079f, -0.0872620f, +0.1344152f, +0.2165339f,
  +0.0552249f, +0.1762599f, -0.1337313f, +0.2031309f, +0.1419660f, -0.1171818f, -0.2666506f, +0.1004707f,
  -0.2359383f, -0.0142464f, +0.0970896f, -0.1746568f, +0.3518343f, +0.0151016f, +0.0270730f, +0.0045161f,
  +0.0040720f, +0.1867119f, +0.1627592f, +0.1782093f, -0.1129253f, -0.0858482f, -0.1731116f, +0.1228727f,
  -0.0868935f, +0.0027285f, -0.0244129f, -0.2692802f, -0.2460817f, -0.2018622f, -0.0036717f, -0.0739436f
);

const float biases[4] = float[4](
  -0.0743203f, +0.0184441f, +0.0118647f, +0.0318307f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer47 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2141659f, -0.1495586f, -0.0053355f, -0.1492177f, +0.1009489f, -0.0735310f, -0.0475907f, -0.3271587f,
  +0.4343751f, +0.0199977f, +0.1595759f, +0.1501149f, -0.0109606f, -0.1690557f, +0.0589382f, -0.0605246f,
  +0.1003242f, -0.3115498f, -0.2432513f, -0.1282161f, +0.1186621f, -0.1060201f, +0.0398927f, -0.0927841f,
  -0.2073461f, +0.0573064f, -0.4098038f, -0.1071527f, +0.3308191f, +0.0370140f, -0.1981876f, -0.0202233f,
  +0.0542406f, +0.1023974f, -0.1276845f, +0.2101254f, -0.1716069f, +0.2070447f, +0.0105461f, +0.2872187f,
  -0.0094245f, +0.0716954f, +0.2383769f, +0.1320379f, -0.0339188f, -0.1975529f, +0.2525198f, -0.1661705f,
  -0.2254738f, +0.0567350f, -0.1269419f, -0.2593799f, +0.2339763f, -0.1223714f, -0.2763823f, -0.2812230f,
  -0.0189459f, +0.1778524f, +0.0381037f, -0.0366916f, -0.1035620f, +0.0066598f, +0.1944245f, -0.1835488f,
  -0.1104163f, -0.1389914f, +0.2077341f, +0.3242032f, +0.3700303f, +0.1465735f, +0.1390153f, +0.2053547f,
  -0.1720819f, -0.0203063f, +0.2512589f, +0.1144288f, -0.0695183f, -0.0978985f, -0.1302498f, +0.1279603f,
  +0.0917830f, -0.1096003f, +0.0710539f, -0.0865798f, -0.1196493f, +0.0484626f, -0.0311752f, +0.1919506f,
  -0.0901247f, +0.2285749f, +0.1568847f, +0.0007525f, +0.1537057f, +0.2151850f, -0.1728053f, +0.0014105f,
  -0.0146194f, +0.0041401f, +0.0015529f, +0.0443975f, -0.0753889f, -0.2541248f, +0.2560449f, -0.0882761f,
  -0.0053099f, -0.0088630f, -0.1901145f, -0.3791796f, +0.0091668f, +0.0894412f, -0.0160148f, -0.3044369f,
  -0.2103197f, -0.0518910f, +0.0283778f, +0.0028041f, -0.1078112f, +0.3727258f, +0.2827891f, +0.2335836f,
  -0.0151664f, +0.0168087f, +0.0970940f, +0.0979227f, -0.2740188f, +0.0650297f, -0.1353440f, -0.1646721f,
  -0.0909446f, +0.0882358f, -0.0244127f, +0.0784221f, +0.1422071f, +0.0220054f, -0.1449981f, +0.0753782f,
  -0.2098644f, +0.0025273f, -0.1449041f, +0.1015037f, -0.2817228f, -0.0913855f, -0.0542205f, +0.2171974f,
  -0.1547950f, +0.0334755f, -0.0560308f, +0.1486382f, -0.1936679f, +0.0572887f, -0.0825868f, +0.1495276f,
  -0.1442926f, -0.0570453f, +0.2067748f, +0.0166850f, +0.1183220f, +0.0710293f, -0.3356874f, +0.0116560f,
  +0.0904021f, +0.0376625f, +0.0592376f, +0.0742614f, -0.2229296f, +0.0915949f, -0.0829907f, +0.0426533f,
  -0.4775300f, +0.1402842f, +0.0502306f, -0.0677890f, -0.0565752f, +0.1669246f, +0.0902968f, +0.4277267f,
  -0.1127972f, +0.3534389f, +0.3665363f, +0.0733517f, +0.2030884f, -0.2425696f, +0.0224808f, -0.0817918f,
  +0.0483220f, +0.2961991f, +0.1861295f, +0.2084162f, +0.3799840f, -0.2241104f, -0.0655528f, +0.1094043f,
  -0.2827796f, -0.1691058f, -0.0387273f, +0.2130608f, -0.1172350f, -0.1605098f, -0.0520522f, +0.1101229f,
  +0.1269395f, +0.0696829f, +0.0081308f, +0.1910174f, -0.3178579f, +0.0727296f, +0.0646555f, -0.1064473f,
  +0.1852885f, -0.0513035f, -0.0709570f, -0.0243250f, -0.4087465f, -0.0679537f, +0.0049517f, -0.0371095f,
  -0.1437955f, -0.0427365f, +0.4456604f, +0.0031171f, -0.5119786f, +0.0328510f, +0.0490903f, -0.0105416f,
  +0.0542343f, -0.2385713f, -0.2154907f, +0.0021260f, +0.0746385f, -0.2366267f, -0.0720670f, -0.2208615f,
  -0.2244605f, -0.1026387f, +0.0768755f, -0.3754331f, -0.4318417f, +0.0626287f, -0.0184130f, -0.1100160f,
  -0.2743798f, +0.2069165f, +0.2660117f, -0.0171454f, -0.2049818f, -0.1927700f, +0.2657677f, +0.0915823f,
  -0.1743770f, -0.0847333f, +0.4898835f, -0.1100586f, -0.2701426f, -0.3559338f, +0.1124163f, -0.0992210f,
  +0.1160035f, -0.0150534f, -0.4524439f, -0.2250996f, -0.1501073f, +0.0920778f, +0.0341793f, -0.0724103f,
  +0.0006347f, -0.1934099f, +0.2001646f, -0.1105647f, +0.5192369f, +0.1468778f, -0.1684866f, -0.0463444f,
  +0.0204361f, +0.3133600f, +0.1953094f, +0.1930202f, +0.1027399f, +0.0730476f, +0.2147050f, -0.0229735f,
  -0.4825875f, -0.0899526f, -0.2103600f, +0.0964779f, +0.3707465f, -0.1448062f, +0.1380484f, -0.0872232f
);

const float biases[4] = float[4](
  +0.0216675f, +0.0580998f, -0.0188909f, -0.0181509f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer48 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2183278f, -0.2834792f, +0.0483089f, -0.0901871f, +0.1752103f, -0.0545288f, -0.0230897f, -0.2442293f,
  +0.0568389f, +0.2275830f, +0.0759803f, +0.2199782f, +0.2052713f, +0.0166214f, -0.2591234f, -0.2613208f,
  +0.0867914f, -0.0510272f, -0.1502674f, +0.0862306f, +0.0444280f, -0.4012818f, +0.1025303f, -0.3117207f,
  -0.1522726f, +0.0062420f, +0.0891883f, -0.1427582f, +0.0393894f, +0.0063662f, +0.1004306f, +0.0684149f,
  +0.0148060f, -0.3353055f, +0.1303900f, +0.0342759f, +0.1928899f, +0.0525241f, +0.3722072f, -0.0755569f,
  +0.2794135f, -0.1323414f, -0.4329893f, +0.2016363f, -0.1404967f, -0.0288075f, +0.2789817f, -0.1822937f,
  -0.3485097f, -0.2040838f, +0.0981901f, -0.1286509f, -0.0166095f, +0.0302290f, -0.0828424f, +0.2218184f,
  +0.1719197f, +0.1424508f, -0.0467629f, -0.0962367f, -0.0660131f, -0.1488737f, -0.1529440f, -0.0871276f,
  +0.2119838f, +0.1123724f, -0.0375624f, +0.2344168f, +0.0556410f, +0.0585432f, +0.1002898f, -0.2851749f,
  -0.0000165f, +0.1676423f, +0.1232760f, +0.0384305f, +0.1820323f, +0.0912711f, +0.0815070f, -0.2601016f,
  -0.0573363f, +0.0172469f, +0.0890963f, -0.0357042f, -0.0760002f, -0.0906057f, +0.0267077f, +0.1017077f,
  +0.0981300f, -0.2264954f, -0.0439122f, -0.2216560f, -0.1306967f, +0.0047422f, -0.1302506f, +0.0913784f,
  -0.1118726f, +0.2726601f, -0.0228860f, -0.0827041f, +0.3538120f, +0.0928184f, +0.1589849f, +0.1042488f,
  +0.1756380f, -0.3618004f, -0.0763074f, +0.0297731f, -0.1639609f, -0.3570475f, -0.0929582f, +0.0128906f,
  +0.1039185f, +0.0223148f, +0.1282074f, +0.0158319f, -0.1899529f, +0.1055216f, +0.1087810f, +0.0203199f,
  -0.1388317f, +0.2527921f, +0.0177902f, +0.2133560f, +0.2229647f, +0.1878871f, +0.0327346f, +0.0787923f,
  -0.0051206f, +0.0699579f, +0.4114719f, +0.2438766f, +0.0883110f, +0.2559601f, +0.3216636f, -0.0548754f,
  -0.1644353f, +0.1838960f, +0.4810908f, -0.1151417f, +0.1966798f, +0.3309184f, -0.1370599f, +0.0700288f,
  +0.0003219f, +0.1841095f, +0.1560540f, +0.2904877f, -0.0410073f, +0.0670052f, +0.0267098f, +0.2130234f,
  +0.0494137f, -0.3536778f, -0.0027356f, -0.1393948f, +0.2968872f, -0.0678071f, +0.0917263f, +0.5973352f,
  -0.0472788f, +0.2219764f, +0.2668164f, -0.0070770f, +0.0050738f, +0.0532058f, -0.1460068f, -0.0730730f,
  -0.0269469f, +0.1218118f, +0.0390654f, +0.3323497f, +0.0343669f, -0.0412969f, -0.4455353f, +0.3756241f,
  -0.0489965f, -0.1390275f, -0.2970349f, -0.1597889f, +0.3747361f, +0.1745097f, -0.2023955f, +0.4180766f,
  -0.2200658f, +0.3281834f, +0.1324117f, -0.1680942f, +0.1903109f, -0.0568311f, +0.0659496f, -0.1407622f,
  -0.1209309f, +0.1724226f, +0.0181984f, +0.1137669f, +0.0651128f, +0.0703865f, -0.0505859f, +0.1758691f,
  +0.1139556f, -0.1032458f, -0.1560939f, -0.0406865f, +0.2368273f, +0.0215534f, -0.1013891f, -0.0520756f,
  -0.0870395f, +0.1517816f, -0.3477366f, -0.1809589f, +0.2498779f, -0.0163156f, +0.2511218f, -0.1372315f,
  +0.0045434f, +0.4199944f, -0.2498318f, +0.2525297f, -0.1582037f, -0.0542447f, -0.0941377f, -0.2069908f,
  -0.1972567f, -0.6041703f, -0.2856736f, -0.1765507f, +0.4325741f, -0.3269691f, -0.0752328f, +0.2065821f,
  +0.0564465f, -0.3339628f, +0.0210850f, +0.1006059f, -0.0118083f, -0.1285367f, -0.0286059f, +0.0061645f,
  -0.0387498f, -0.2652611f, -0.1322427f, +0.0037655f, -0.1716516f, +0.1714337f, +0.0039147f, -0.4153120f,
  +0.0467368f, +0.1121102f, -0.1455905f, -0.3752397f, +0.0407629f, +0.1378133f, +0.0204338f, +0.0026392f,
  +0.1438935f, -0.3217065f, -0.1863113f, +0.1496008f, +0.0167542f, +0.0466351f, -0.0601910f, -0.2604467f,
  -0.1656328f, +0.2025252f, +0.0253037f, +0.1300308f, +0.0261598f, +0.1675881f, +0.1073371f, -0.0018798f,
  +0.3527209f, -0.2717061f, +0.1503001f, -0.1577514f, -0.1217347f, +0.2968856f, +0.1046829f, -0.2076170f,
  -0.2187453f, -0.1802209f, +0.0074691f, -0.0210274f, -0.2498560f, +0.0168405f, -0.0620374f, -0.1292046f
);

const float biases[4] = float[4](
  -0.0053077f, +0.0629384f, +0.0060433f, -0.0179655f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer48 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0161396f, -0.3826709f, -0.1966994f, -0.0410076f, -0.1772962f, +0.0406665f, -0.0318652f, -0.3292570f,
  +0.0348913f, -0.4228558f, +0.1650391f, -0.0248571f, -0.0578828f, -0.1174438f, +0.0221755f, -0.3211421f,
  +0.1549731f, -0.3597320f, -0.2531489f, +0.0285186f, -0.0936134f, +0.0975340f, +0.0316518f, +0.0840993f,
  +0.3824343f, -0.5347272f, +0.2490662f, -0.3725610f, +0.1476596f, +0.0630853f, -0.2580178f, +0.0602360f,
  +0.2008040f, -0.2698662f, -0.0088880f, +0.0263384f, +0.0983295f, +0.0209844f, -0.6258444f, +0.1590204f,
  -0.0674313f, -0.0860006f, -0.0927994f, +0.0076805f, -0.1778709f, -0.1231632f, -0.1197733f, -0.1275384f,
  +0.1831520f, -0.4877871f, +0.3953269f, -0.2267761f, +0.1712051f, -0.0338509f, -0.0481713f, +0.0815093f,
  -0.2593993f, +0.0008314f, -0.4187518f, +0.3282018f, +0.2437308f, +0.0819091f, -0.1302706f, +0.2148247f,
  -0.1432971f, -0.0054626f, -0.0947491f, -0.0643892f, +0.0305293f, -0.0074287f, -0.1009726f, -0.1393934f,
  -0.0625578f, -0.1298030f, +0.1275667f, +0.0517105f, -0.0014996f, +0.1541020f, +0.2698032f, -0.4048837f,
  -0.0665652f, +0.1845607f, +0.1558856f, +0.0301208f, -0.1534535f, -0.0030553f, +0.1940469f, -0.3333752f,
  -0.0733546f, +0.2463831f, +0.0106609f, -0.1371009f, -0.2249180f, +0.1126407f, +0.3424178f, +0.2916237f,
  -0.1954914f, -0.3903431f, +0.2687605f, -0.0108126f, -0.0054780f, -0.2346751f, +0.0317024f, -0.2439781f,
  -0.1228194f, +0.0200038f, +0.4899313f, +0.0802696f, -0.3022647f, +0.0772489f, -0.0196892f, -0.2835327f,
  -0.1267093f, +0.2318970f, +0.3853605f, -0.1153598f, -0.1316382f, +0.0445209f, +0.2580179f, -0.0826036f,
  -0.0670522f, -0.2942842f, +0.1645198f, -0.0227615f, -0.1555657f, +0.1223755f, -0.1386778f, +0.1382251f,
  +0.1169943f, +0.1302241f, -0.1410939f, +0.0379032f, -0.1190887f, +0.3058592f, -0.0840192f, -0.0678257f,
  -0.1322105f, +0.0831261f, +0.2239147f, -0.2364348f, +0.0303655f, +0.1818465f, -0.0450530f, -0.1859620f,
  -0.1848454f, +0.0961950f, -0.1636706f, +0.0140905f, -0.1335248f, +0.1656495f, -0.0608644f, +0.1615918f,
  -0.2691770f, -0.2917838f, +0.2163475f, +0.0309324f, +0.0613200f, +0.1625470f, +0.1163765f, +0.1062937f,
  +0.0209981f, -0.0533000f, -0.0365566f, -0.0910362f, +0.3529659f, -0.0317666f, -0.0164870f, -0.1141005f,
  +0.2502486f, +0.2153646f, -0.0785526f, +0.0363013f, -0.2758510f, +0.0846112f, -0.2448534f, -0.1359341f,
  +0.0491124f, -0.0903977f, -0.0349928f, +0.0058374f, -0.3893609f, +0.3192762f, +0.0581326f, +0.3965674f,
  -0.0049065f, +0.2340720f, -0.0568483f, -0.4498573f, +0.1757277f, -0.2125047f, +0.1536454f, +0.1436263f,
  -0.0714114f, +0.3361430f, -0.2903592f, +0.1706276f, -0.1504243f, +0.0120044f, +0.1085204f, +0.0571634f,
  -0.0809195f, -0.3326165f, +0.2909548f, +0.1023229f, -0.2375493f, +0.2011345f, -0.0903262f, -0.2950537f,
  -0.2653008f, -0.0154256f, +0.4342974f, -0.0529573f, +0.1353902f, +0.0147379f, -0.3280208f, +0.2244038f,
  -0.0901898f, -0.1096216f, +0.0318649f, -0.0575939f, -0.1198549f, +0.1099509f, -0.0010340f, -0.4853059f,
  -0.0827285f, +0.0486242f, +0.3113745f, -0.1318768f, -0.0117630f, +0.0362303f, -0.0809978f, -0.2866659f,
  -0.0463748f, +0.1689525f, -0.3420082f, +0.1677973f, -0.1014239f, -0.0401270f, -0.0009549f, -0.1047967f,
  -0.0851150f, -0.4140659f, +0.0111701f, -0.1655142f, -0.1569093f, -0.2275925f, -0.1796244f, +0.0331329f,
  +0.1315722f, +0.4729576f, +0.0836978f, +0.0531632f, -0.1147196f, +0.3655433f, -0.0827213f, -0.5097035f,
  -0.2629662f, +0.1177558f, -0.3009086f, +0.0822062f, +0.3293418f, +0.0217975f, +0.0111517f, +0.0551991f,
  +0.4103437f, -0.0087033f, -0.0788154f, -0.1673813f, -0.0063461f, -0.0150562f, -0.0113166f, +0.1126672f,
  -0.0058976f, -0.1254397f, -0.2115621f, -0.1607483f, +0.0283089f, +0.2264513f, -0.0192146f, -0.1702173f,
  +0.1579536f, +0.0717461f, -0.2145135f, +0.1392475f, +0.3559016f, -0.0097024f, -0.1045256f, -0.2575573f
);

const float biases[4] = float[4](
  -0.0105080f, -0.0031840f, -0.0168535f, +0.1392409f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer49 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2803989f, -0.1566285f, -0.0591539f, +0.0216082f, +0.1295250f, -0.1378912f, -0.0327148f, +0.2213808f,
  -0.0405666f, +0.0301713f, -0.0746758f, -0.1283103f, -0.1136916f, -0.0643751f, -0.1181941f, -0.1467398f,
  +0.0188879f, -0.0132956f, +0.0139490f, -0.3096518f, -0.2404680f, -0.1329497f, -0.0130680f, -0.0129676f,
  +0.3474169f, +0.1028035f, -0.4067110f, +0.1057838f, +0.3054934f, +0.2810585f, -0.0314774f, -0.2446645f,
  +0.3926359f, -0.1051552f, -0.2423518f, +0.1095225f, +0.0600845f, +0.5975338f, +0.1593540f, +0.1742144f,
  -0.1733550f, +0.1756451f, +0.1328623f, -0.1010936f, -0.1706166f, -0.1373248f, -0.0867317f, -0.0582837f,
  -0.1161094f, +0.0600909f, -0.3945886f, +0.1365310f, -0.0075146f, -0.1148385f, +0.0164775f, +0.2512248f,
  -0.0366929f, -0.1067482f, -0.0873753f, +0.3849145f, +0.2727137f, +0.2071737f, -0.0939978f, +0.0292616f,
  -0.0107807f, -0.0483075f, -0.0121119f, -0.0198564f, +0.0429946f, +0.1834854f, +0.0410257f, -0.0639758f,
  -0.0502816f, +0.0153465f, -0.0042557f, +0.0707816f, +0.0074084f, -0.1073558f, -0.0173569f, -0.0334682f,
  -0.0088941f, +0.0233723f, -0.2126953f, +0.0584540f, -0.0809782f, +0.1596724f, +0.0598233f, +0.1073163f,
  -0.2068583f, +0.0700640f, -0.0856334f, +0.1796422f, +0.0921861f, +0.1437952f, -0.0335655f, -0.0028706f,
  +0.1473665f, -0.1648963f, -0.1991279f, -0.0535478f, -0.0448656f, +0.0190220f, +0.2808422f, +0.1450070f,
  +0.0548480f, +0.2076980f, -0.0195679f, -0.2290590f, -0.4729999f, -0.0176378f, +0.1074230f, +0.2005101f,
  +0.0166072f, -0.1053789f, -0.0135032f, -0.1102574f, +0.0429560f, +0.0650385f, -0.1466474f, +0.1768331f,
  -0.0998639f, +0.0354424f, +0.1305411f, +0.1652967f, -0.0448078f, -0.0631626f, +0.0285065f, +0.0513954f,
  -0.0772452f, +0.1012453f, -0.0207968f, +0.0590884f, +0.1088388f, -0.0125785f, +0.1356171f, -0.0058762f,
  +0.0223106f, -0.1661971f, +0.1390352f, +0.1149960f, -0.0347598f, -0.1417528f, +0.0162942f, +0.0643378f,
  -0.0985298f, -0.0356313f, +0.0765401f, -0.1490078f, -0.0067893f, +0.1002899f, +0.1270275f, +0.1140885f,
  -0.0823627f, +0.0922611f, -0.0222943f, -0.1395392f, -0.0643907f, -0.1782994f, -0.2034411f, -0.1421285f,
  -0.0492533f, +0.0679089f, +0.1490881f, -0.0288162f, -0.2309659f, +0.1691004f, -0.0946839f, +0.0794940f,
  -0.0709995f, +0.0339115f, -0.0584977f, -0.1925486f, -0.1670665f, -0.1036929f, -0.0566156f, +0.2232892f,
  +0.2520951f, -0.3323850f, -0.0854445f, +0.0146827f, +0.3422741f, +0.1286131f, +0.0881456f, +0.1327272f,
  -0.0525781f, -0.1912782f, +0.0355645f, -0.2445899f, +0.3529264f, -0.1030317f, -0.0930382f, -0.0704866f,
  -0.4013392f, -0.1206606f, +0.1795439f, +0.3021234f, -0.2028650f, -0.2816685f, -0.3074111f, -0.5884294f,
  -0.1465178f, -0.0214816f, -0.3771528f, -0.2264898f, +0.1392063f, +0.2790608f, +0.1728446f, +0.1642562f,
  -0.0710374f, +0.0390242f, +0.0915961f, -0.0052978f, +0.2557204f, -0.0494547f, +0.1503390f, -0.1330221f,
  -0.0160269f, +0.1502520f, -0.0623169f, -0.1410587f, -0.1588769f, -0.2139460f, -0.0170473f, -0.0156801f,
  -0.0678156f, -0.1463336f, -0.2701384f, +0.1530345f, +0.0026758f, +0.0255349f, -0.0466440f, +0.1380564f,
  +0.0717190f, -0.1949386f, +0.0496987f, -0.0452766f, +0.2153161f, +0.0618683f, -0.2077608f, -0.0194697f,
  +0.0365121f, +0.0344640f, +0.1873580f, +0.0547510f, -0.2387011f, -0.1984304f, -0.2021780f, -0.4197220f,
  -0.2086243f, +0.0746682f, -0.0069648f, -0.0847518f, +0.2308825f, +0.0183360f, -0.0925991f, -0.2350499f,
  +0.0415068f, -0.0033636f, +0.0731006f, -0.1474264f, +0.0765308f, +0.1875097f, +0.3491326f, -0.0134663f,
  -0.0394964f, +0.2110036f, +0.2030573f, -0.0470426f, +0.0771635f, +0.0642401f, -0.2045128f, -0.0513252f,
  +0.0517242f, -0.3219881f, -0.2022595f, -0.2586609f, +0.1522146f, +0.0088663f, +0.1324503f, -0.3551935f,
  +0.0774973f, -0.1646014f, +0.2876666f, -0.1304365f, +0.1022195f, +0.0554235f, +0.1068867f, +0.1302734f
);

const float biases[4] = float[4](
  -0.0049367f, +0.0409954f, -0.1265755f, +0.0078101f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer49 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0393220f, -0.1214393f, +0.0482524f, +0.0627126f, -0.0793568f, -0.1370858f, -0.0337701f, +0.0412906f,
  -0.2705275f, -0.0416291f, +0.2797919f, -0.0374434f, -0.1922192f, +0.1267584f, +0.1245650f, -0.1528600f,
  +0.1035549f, +0.0591765f, +0.1488024f, -0.2133382f, -0.2157250f, +0.0888056f, -0.0317130f, +0.0052853f,
  -0.1280292f, +0.0703152f, -0.1912631f, +0.0725122f, -0.0323315f, -0.1506685f, -0.4410166f, -0.2246260f,
  -0.4180381f, -0.3942078f, -0.0958746f, +0.0401770f, -0.3306581f, -0.1582012f, +0.3969581f, -0.1217515f,
  -0.0845201f, -0.1313642f, +0.0484931f, -0.0779674f, +0.1860944f, -0.0212230f, +0.1714473f, -0.0836984f,
  +0.1294960f, +0.1934365f, -0.4171641f, -0.1190490f, +0.4731419f, -0.0208314f, -0.0203404f, +0.0305806f,
  -0.0318464f, -0.3463927f, -0.3769838f, -0.2956598f, +0.4112935f, -0.1028841f, +0.0752310f, -0.3038422f,
  -0.0925064f, +0.0895848f, -0.0963476f, -0.2719760f, +0.1587754f, +0.0223835f, -0.1155093f, -0.0396632f,
  -0.0435220f, -0.2383357f, +0.1457274f, -0.2820850f, -0.0621510f, -0.1928498f, -0.4426947f, +0.3933149f,
  -0.0735219f, -0.0907445f, -0.0910967f, -0.0784224f, +0.0080988f, +0.1201996f, +0.3813268f, -0.1176383f,
  +0.1019871f, +0.0236728f, +0.1445956f, +0.0298046f, +0.0856239f, +0.2122184f, -0.1606071f, -0.2658893f,
  +0.1288905f, +0.1244807f, +0.4530858f, -0.0166092f, +0.1199965f, -0.1470100f, +0.1043792f, +0.1851120f,
  -0.1017258f, -0.0552071f, -0.4344715f, -0.2120667f, +0.0400333f, -0.0785651f, +0.0769519f, -0.2967910f,
  +0.0610940f, +0.0960826f, +0.0724645f, +0.0923291f, +0.1751109f, +0.0395771f, -0.0012308f, -0.2270201f,
  +0.0043604f, -0.0474106f, -0.0281775f, +0.2543351f, +0.0143710f, -0.1842570f, -0.0342511f, +0.1231561f,
  +0.1158931f, +0.0488575f, +0.0357027f, -0.1479954f, +0.3129486f, +0.0747279f, +0.0108520f, -0.0419261f,
  +0.1320653f, -0.2526231f, -0.0646782f, +0.3644419f, +0.4271882f, +0.0304514f, +0.2335100f, -0.0115679f,
  -0.6059768f, +0.2076438f, +0.2261858f, -0.2525485f, -0.1038992f, +0.0302734f, +0.4561726f, -0.2602700f,
  -0.0192108f, +0.0490484f, -0.1385207f, +0.1129236f, -0.2871543f, +0.0221953f, -0.0590096f, -0.0509619f,
  -0.0737524f, +0.0424080f, -0.1177547f, -0.1375831f, -0.1094414f, +0.2885706f, -0.0733738f, -0.1466881f,
  -0.4577359f, +0.1393961f, +0.1486371f, +0.1954312f, -0.2420224f, -0.0905057f, +0.2550043f, -0.0573167f,
  -0.1577995f, -0.3682867f, -0.4378739f, +0.2334240f, +0.0378834f, -0.1097192f, -0.2967042f, -0.0088332f,
  -0.0351498f, -0.1061230f, +0.0565300f, -0.0365511f, +0.2326771f, +0.0583316f, +0.1551161f, +0.3300811f,
  -0.3586926f, +0.0775538f, +0.3757669f, +0.1682985f, -0.0268785f, -0.2139275f, -0.0695399f, -0.0169596f,
  +0.3179899f, -0.2268153f, -0.5135260f, -0.2417975f, +0.0920739f, +0.0940943f, +0.0152510f, +0.1959478f,
  +0.0261486f, -0.0652380f, +0.4144678f, +0.0079493f, +0.3231579f, +0.0384161f, +0.1720138f, -0.0493231f,
  +0.0001701f, +0.1316780f, +0.0407221f, -0.0464044f, -0.0353070f, +0.1456651f, +0.1343235f, +0.0401223f,
  -0.1192780f, -0.0095764f, -0.1183437f, -0.1526987f, -0.0072259f, +0.0178851f, +0.1108099f, -0.0324340f,
  -0.1307972f, -0.0877921f, -0.3715492f, +0.1852877f, -0.0477895f, -0.1194249f, -0.2506783f, +0.0691588f,
  +0.1240675f, -0.0609327f, -0.0318518f, -0.1354336f, +0.0609358f, +0.2158340f, +0.2833575f, +0.0890866f,
  +0.1056541f, +0.2909521f, +0.2704605f, -0.0887007f, -0.4384464f, -0.0415963f, +0.4072453f, +0.0351273f,
  -0.6998374f, -0.4643404f, -0.0834832f, +0.3248460f, -0.3471103f, +0.0910094f, -0.2671363f, -0.0264819f,
  -0.0989516f, +0.0952991f, -0.1537106f, +0.0659399f, +0.1120499f, -0.0901897f, -0.0575179f, +0.0877322f,
  -0.0722415f, -0.0099408f, +0.1022994f, +0.1229496f, -0.1928172f, +0.0490776f, +0.1784227f, +0.0465204f,
  -0.3195149f, +0.0847329f, -0.0048550f, +0.3406459f, +0.1899615f, -0.1488670f, -0.0934544f, +0.0141803f
);

const float biases[4] = float[4](
  +0.1451202f, +0.0059511f, -0.0483719f, -0.1290924f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer50 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0455115f, +0.0711979f, +0.1054063f, -0.1185780f, -0.1624553f, -0.0629290f, -0.1382719f, +0.0584548f,
  -0.1830041f, -0.1404670f, +0.6815598f, -0.0449630f, +0.0283479f, +0.0566083f, +0.0418637f, -0.0390081f,
  -0.0833254f, -0.1276096f, +0.0585505f, -0.0802460f, -0.0502663f, -0.3058874f, -0.5832274f, +0.0787733f,
  +0.1181813f, -0.0218851f, -0.0975226f, -0.1319392f, -0.0476402f, -0.2173208f, -0.1816474f, -0.4976978f,
  -0.1378764f, +0.1769906f, +0.0233085f, +0.4158252f, +0.1555707f, -0.0153639f, -0.4395764f, +0.3925116f,
  -0.3023040f, +0.0254441f, -0.0314331f, -0.3324349f, -0.0647384f, -0.3237333f, -0.1868427f, -0.0422209f,
  -0.0052871f, +0.1180305f, +0.2960787f, -0.2398177f, -0.1550197f, +0.0275821f, -0.1283111f, +0.1170483f,
  -0.2353710f, -0.0481288f, +0.0132624f, +0.1204201f, -0.1232271f, +0.2752320f, -0.1411798f, +0.0191231f,
  -0.0973286f, -0.0610545f, +0.0237243f, +0.1069544f, -0.3371927f, +0.0506655f, -0.0092141f, -0.2576694f,
  +0.0997334f, +0.2188382f, -0.0784548f, +0.2299225f, -0.1520543f, -0.0098143f, -0.0512274f, -0.3135058f,
  +0.0906640f, +0.0305968f, -0.0873656f, +0.2685949f, +0.3504791f, -0.0673225f, +0.0694024f, +0.1635154f,
  +0.0228725f, -0.1455549f, -0.2649730f, +0.0111060f, -0.0773743f, +0.1119816f, +0.0295457f, -0.2791459f,
  -0.0332020f, -0.0323117f, +0.1204816f, +0.0651110f, -0.0465124f, -0.0435971f, +0.1607625f, -0.2759182f,
  +0.2249368f, +0.3083921f, +0.1061935f, +0.0931294f, +0.5306847f, -0.0888046f, +0.0946563f, +0.5186687f,
  +0.0342834f, -0.0114926f, +0.0544769f, -0.1236332f, -0.1575273f, +0.0909772f, +0.3227176f, -0.0578833f,
  +0.1096532f, -0.0159869f, +0.0280602f, +0.0227537f, +0.0415978f, -0.1301948f, +0.0644374f, -0.2924091f,
  -0.1687121f, -0.0552069f, -0.2828612f, +0.1511161f, +0.2706566f, +0.4077254f, +0.2002493f, -0.1487358f,
  +0.2225143f, -0.0454413f, -0.0604057f, -0.1779621f, +0.1644576f, +0.2376789f, +0.1720075f, +0.0220028f,
  -0.2711631f, -0.1534789f, -0.1324956f, -0.0301590f, +0.1991690f, +0.0923461f, +0.0719547f, -0.1197671f,
  +0.2579972f, -0.0263164f, +0.1447053f, +0.2835687f, +0.0873227f, -0.0797572f, -0.0749392f, +0.1247552f,
  +0.1675488f, +0.0754315f, -0.2970424f, -0.1510013f, +0.3913230f, +0.2781153f, +0.4207332f, -0.0851362f,
  -0.1053568f, -0.0292421f, +0.0369081f, -0.2687567f, +0.0977721f, -0.0581336f, +0.1022732f, -0.3062582f,
  +0.0094992f, +0.2253463f, +0.0800126f, +0.1048926f, -0.1183458f, -0.3631032f, -0.3634068f, +0.0570397f,
  +0.0879177f, -0.2092668f, +0.0789783f, -0.2388567f, +0.0882473f, +0.0313802f, +0.3551484f, +0.0141428f,
  -0.0029612f, -0.0379090f, +0.1268079f, +0.1397181f, -0.1937165f, -0.0221490f, -0.0158202f, -0.2440777f,
  -0.0621110f, +0.2253547f, +0.0253131f, +0.2470836f, -0.1267760f, +0.1157694f, -0.1263018f, -0.4805429f,
  +0.1160553f, +0.0513690f, -0.1366167f, +0.0281049f, +0.0418277f, +0.0358064f, -0.0183488f, +0.0437746f,
  -0.1491399f, -0.0825909f, -0.1805695f, -0.1019043f, +0.1002378f, +0.0458697f, +0.0484837f, -0.3715965f,
  -0.0659554f, +0.0359607f, +0.3185208f, +0.4154576f, +0.0525005f, -0.0371849f, -0.4434744f, +0.0216096f,
  +0.0279480f, +0.1579167f, -0.3687252f, -0.1094100f, -0.0899709f, -0.3395316f, +0.4106104f, +0.1103315f,
  +0.0947973f, +0.0747892f, +0.0943054f, -0.0672995f, -0.0819899f, -0.0317446f, -0.0173701f, -0.3141747f,
  -0.0700804f, -0.0371811f, +0.0437236f, +0.3240883f, -0.1950411f, -0.2127292f, -0.0912253f, -0.0878187f,
  -0.2985627f, +0.1404288f, +0.1057567f, -0.0066786f, -0.2251676f, -0.0216590f, +0.0988264f, -0.1722992f,
  +0.0780833f, -0.0208250f, -0.0941269f, +0.0435531f, +0.0340057f, -0.0718732f, +0.1224292f, -0.1602908f,
  -0.0088160f, -0.0316179f, +0.0661206f, +0.0614455f, -0.0708364f, +0.0492259f, +0.1148470f, -0.0038620f,
  -0.0537955f, +0.1390271f, -0.0047352f, -0.1734136f, +0.0425697f, +0.0723471f, -0.0985208f, -0.0285474f
);

const float biases[4] = float[4](
  -0.0578714f, +0.0859916f, +0.0119182f, -0.0000020f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer50 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0735043f, -0.0434783f, -0.2527789f, +0.0412703f, -0.6103662f, -0.3243000f, -0.1886129f, -0.1727984f,
  -0.1723625f, +0.1099893f, -0.0928172f, +0.0221314f, -0.1839031f, -0.1556212f, -0.0011443f, +0.6370503f,
  +0.0205129f, -0.2487020f, +0.2078147f, -0.0513658f, -0.2502174f, +0.1073768f, +0.1641242f, -0.0499138f,
  +0.1283702f, -0.0732294f, -0.1609272f, +0.3565737f, -0.0828568f, -0.2920973f, -0.2360080f, +0.3902789f,
  +0.0273170f, +0.0306522f, +0.1462057f, +0.0794137f, +0.3583231f, -0.2586666f, +0.2902779f, -0.0052443f,
  -0.0972417f, +0.0511916f, -0.0528764f, +0.2303374f, +0.3565983f, -0.0915734f, +0.1034909f, +0.0801785f,
  +0.2391189f, -0.2316081f, +0.1033469f, +0.2145420f, +0.3204823f, -0.2721969f, +0.1193555f, +0.4467630f,
  +0.3516558f, +0.1485101f, -0.0146355f, -0.0327129f, +0.5204768f, +0.0911224f, +0.2038290f, -0.0121615f,
  +0.1533985f, -0.1131726f, +0.2204255f, +0.0983948f, +0.2573206f, +0.0740984f, -0.1354016f, -0.0275762f,
  +0.0142445f, +0.0470647f, -0.0368865f, +0.1001318f, -0.1386395f, -0.3659514f, +0.0007633f, +0.0761201f,
  -0.1437263f, -0.0278283f, -0.0594395f, +0.1165752f, +0.0568881f, +0.1360458f, +0.0574287f, +0.1893400f,
  -0.0887320f, +0.0529713f, +0.2508880f, +0.0553776f, +0.0334574f, +0.1058878f, -0.1647576f, -0.0436963f,
  +0.1894581f, +0.0306906f, +0.1343673f, -0.3314702f, -0.0128619f, -0.3380342f, -0.0608637f, -0.3207556f,
  -0.3156714f, -0.1422403f, -0.3088301f, +0.1172568f, +0.2122791f, +0.0444987f, -0.1344570f, +0.2405927f,
  -0.5477008f, -0.1863958f, +0.0839865f, +0.3576732f, -0.0206874f, +0.3489299f, -0.2422916f, +0.1395646f,
  +0.1620688f, +0.2199718f, -0.2219219f, +0.0060163f, +0.0593679f, -0.1075297f, +0.0213848f, +0.2899678f,
  +0.0649569f, -0.1085888f, +0.1069047f, -0.1292301f, -0.1498274f, +0.3117532f, -0.0894357f, -0.2454280f,
  +0.1400956f, +0.1495122f, +0.0791748f, -0.0759699f, +0.2317868f, +0.1123520f, -0.3030038f, +0.0695148f,
  -0.0702460f, -0.0169625f, -0.1825782f, -0.2213356f, +0.0564911f, -0.0510307f, -0.0584967f, +0.0788418f,
  -0.1053290f, +0.0089779f, -0.1269505f, -0.1660017f, -0.0393853f, +0.1573671f, +0.1044355f, -0.0123048f,
  +0.2939807f, -0.0592551f, +0.2199851f, -0.1951254f, -0.1635394f, -0.0604809f, +0.0261871f, -0.1078269f,
  +0.0293218f, +0.1895188f, +0.1306372f, -0.0054152f, -0.1060900f, +0.1095237f, +0.0814162f, -0.4509238f,
  -0.2385623f, +0.4071199f, -0.1566591f, +0.0013611f, -0.1720560f, -0.1204455f, +0.1213613f, -0.0044391f,
  -0.1473073f, -0.0056496f, +0.0678473f, -0.0413299f, +0.4822148f, +0.0227759f, -0.1893891f, -0.1075654f,
  -0.1056769f, +0.0147286f, -0.1477846f, +0.1424007f, -0.3116864f, +0.1294914f, -0.0903113f, -0.1368264f,
  +0.0782764f, +0.2101025f, -0.0111161f, +0.0575171f, +0.1229970f, +0.0324768f, -0.1051706f, +0.1186295f,
  +0.1318173f, -0.0001836f, +0.2011579f, -0.0935593f, -0.0251289f, +0.0744678f, -0.1254601f, -0.0714574f,
  -0.1479220f, +0.1544722f, +0.1450458f, -0.2544395f, -0.1514093f, +0.0174584f, +0.0039560f, -0.2273712f,
  -0.1331319f, +0.0735143f, -0.1531650f, +0.0922169f, +0.4701827f, -0.1115112f, -0.1806531f, -0.0564054f,
  -0.1271044f, -0.1510804f, +0.3007138f, +0.2802600f, -0.0950751f, +0.0424326f, -0.3597003f, -0.1471865f,
  -0.1610742f, -0.0294246f, +0.1205960f, -0.0573683f, -0.0698044f, -0.1033877f, -0.2542467f, -0.6499152f,
  -0.0403810f, +0.1230066f, -0.0292217f, -0.0332800f, +0.1717313f, +0.0857481f, +0.1894493f, +0.0693384f,
  +0.0948727f, -0.2870816f, +0.3437407f, -0.0940986f, +0.0834278f, -0.0581339f, -0.3761292f, -0.0787172f,
  +0.0932049f, +0.1125841f, -0.1924237f, -0.0747451f, +0.0021653f, -0.2380883f, -0.1016992f, -0.4968264f,
  +0.0950184f, -0.0364400f, -0.1645868f, +0.0969841f, -0.1761786f, +0.1857726f, -0.0564727f, +0.0484224f,
  -0.1279029f, +0.2380569f, +0.0093191f, -0.0148899f, +0.0203649f, +0.2217171f, -0.2972373f, +0.0105322f
);

const float biases[4] = float[4](
  -0.0638599f, -0.0077199f, -0.0109364f, +0.1708573f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer51 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0049223f, -0.0232645f, +0.0253002f, -0.3082207f, +0.1995274f, +0.0680560f, -0.2119832f, +0.0061349f,
  -0.1519893f, +0.3942153f, -0.1331794f, -0.0122186f, -0.1059343f, +0.1619942f, +0.1400318f, -0.2660032f,
  -0.0446884f, +0.0672979f, +0.0014046f, -0.1110596f, -0.2052378f, +0.1272198f, +0.0485377f, -0.2325606f,
  -0.0376653f, +0.1564348f, +0.0526340f, +0.1975530f, +0.3063771f, -0.1550149f, -0.2434707f, -0.0998726f,
  +0.1129121f, +0.0102374f, +0.0167531f, +0.4996599f, +0.2780347f, +0.0629323f, +0.0117855f, +0.1642919f,
  +0.2082194f, +0.2276865f, +0.1188974f, +0.0820592f, +0.0449426f, +0.0148157f, -0.0587628f, -0.0926926f,
  +0.0596654f, -0.0915207f, +0.0672488f, -0.2620137f, +0.1686760f, -0.0707772f, -0.0597146f, +0.0511261f,
  +0.1210244f, -0.1212883f, -0.0385820f, -0.1007201f, -0.1642669f, -0.2414434f, +0.0006080f, -0.1692909f,
  +0.1358930f, -0.0698059f, +0.2725348f, -0.0316085f, +0.1744066f, +0.0024721f, +0.0565256f, -0.1037523f,
  +0.2305523f, -0.0291176f, -0.0097727f, +0.0050653f, +0.0169404f, +0.0873642f, -0.4298833f, +0.0478051f,
  +0.2099304f, -0.2035431f, +0.2644898f, +0.0324806f, -0.0489662f, +0.2017818f, -0.0091913f, +0.1371118f,
  +0.0413530f, -0.0067893f, +0.0549067f, -0.0010054f, +0.1154357f, -0.0858130f, +0.2137102f, -0.0743843f,
  -0.1928334f, -0.2042970f, +0.1229529f, +0.2873520f, +0.2854686f, +0.0798637f, -0.5362295f, -0.0517543f,
  +0.3653224f, +0.1820702f, -0.1534530f, -0.1829430f, +0.1492956f, -0.2009490f, -0.0353994f, +0.1001210f,
  +0.1211749f, +0.3797487f, +0.2104404f, +0.0076114f, -0.0893888f, -0.1829912f, +0.3166806f, +0.1682104f,
  +0.0873131f, -0.0483592f, +0.0090941f, -0.0602756f, -0.0696447f, +0.0137189f, -0.0585850f, -0.0320149f,
  +0.1849234f, +0.0251991f, -0.0574103f, -0.2758467f, -0.1620280f, -0.1057297f, +0.0184407f, +0.0965110f,
  +0.0393121f, -0.1439234f, +0.3222317f, -0.0778882f, -0.0077565f, -0.0667818f, +0.2066372f, -0.0755113f,
  +0.1061031f, +0.0663511f, +0.2091429f, -0.0112286f, +0.0180849f, +0.2840719f, +0.0016490f, -0.0552448f,
  -0.0618118f, +0.0605980f, -0.0071060f, +0.2373677f, -0.0493035f, +0.2784367f, -0.0900444f, -0.0671006f,
  +0.0190670f, +0.1178060f, -0.0132928f, +0.0519013f, +0.1256066f, +0.0189241f, -0.0952735f, -0.1270305f,
  +0.1044026f, +0.0650755f, +0.1069712f, -0.0024255f, +0.0086497f, +0.1923418f, +0.0422740f, -0.1597503f,
  +0.0081854f, +0.0258150f, -0.1032385f, -0.2250877f, -0.0439061f, -0.2022094f, +0.2755789f, +0.1321485f,
  +0.0351658f, +0.0914808f, +0.1217332f, +0.2697243f, -0.3363027f, +0.0578246f, -0.2811506f, -0.0312961f,
  +0.0841148f, +0.0763498f, -0.0283886f, -0.1414024f, -0.1398947f, -0.1310337f, +0.0427426f, -0.0567368f,
  +0.0010917f, +0.1204302f, -0.1993954f, -0.0331997f, +0.1412117f, -0.0519613f, +0.1966073f, +0.1946707f,
  +0.2626997f, -0.2659065f, -0.1952668f, +0.0295273f, -0.1356968f, +0.2615020f, -0.0386891f, -0.0201501f,
  -0.2332935f, +0.3207208f, +0.0126421f, -0.1312614f, -0.0298205f, -0.0100412f, -0.0147925f, -0.0758746f,
  +0.1762753f, -0.0522631f, +0.1793032f, +0.0848830f, +0.0581051f, +0.2710802f, -0.0541599f, -0.0985149f,
  +0.0102400f, +0.0248140f, -0.0495928f, +0.0469612f, +0.0130774f, +0.0401644f, +0.1293744f, -0.1963865f,
  +0.0963319f, -0.1805260f, +0.0341394f, -0.2464706f, -0.0202402f, -0.2834263f, -0.0173436f, +0.0425102f,
  -0.0098108f, +0.1741580f, -0.2254523f, -0.3345490f, -0.1357284f, -0.0442698f, +0.3656296f, -0.1965894f,
  -0.0859367f, +0.0876831f, -0.0176323f, -0.2290388f, -0.1907612f, -0.1686567f, +0.2045969f, -0.5180568f,
  +0.4127488f, -0.2921090f, -0.0866352f, +0.2284258f, -0.2058691f, -0.2528690f, -0.0508785f, -0.1557081f,
  +0.1100320f, +0.0514969f, -0.2570157f, -0.3024914f, +0.1224443f, -0.0597768f, +0.0522168f, -0.0887878f,
  +0.0243879f, +0.5623977f, +0.3050535f, +0.1816599f, +0.2488724f, -0.0623827f, +0.0227992f, -0.6057914f
);

const float biases[4] = float[4](
  -0.0182244f, +0.0507675f, +0.0247031f, -0.1806089f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer51 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0407450f, +0.0810433f, +0.0067561f, -0.2480979f, +0.0184654f, +0.0082089f, +0.0989606f, -0.0730381f,
  +0.1471225f, +0.0045578f, -0.1522305f, +0.1381713f, -0.0355057f, +0.2219617f, -0.0774423f, +0.1681209f,
  +0.0331778f, +0.1376184f, +0.1242936f, -0.1585220f, +0.2843090f, +0.0304012f, -0.1221580f, -0.1866683f,
  -0.1382238f, +0.2934820f, +0.2566442f, -0.2884193f, -0.0867531f, -0.0427952f, +0.0277564f, +0.1038216f,
  +0.2312072f, +0.0010754f, -0.0973114f, -0.0856674f, +0.1036956f, +0.1195249f, -0.1620568f, -0.2201021f,
  -0.1621608f, +0.0155897f, +0.4881603f, +0.0094478f, +0.0468853f, -0.0675999f, -0.0815248f, +0.1969550f,
  +0.0376454f, -0.2956007f, +0.0837869f, -0.0213050f, -0.0841785f, +0.0216444f, -0.2212570f, -0.1628397f,
  +0.0068204f, +0.0909658f, +0.2948069f, -0.4775551f, -0.2120313f, -0.0433585f, +0.3063250f, +0.2911358f,
  -0.0285699f, -0.3075193f, +0.0129386f, -0.1957973f, -0.0840992f, +0.1099479f, +0.2455274f, +0.0098907f,
  +0.0301809f, -0.0067733f, -0.0202304f, +0.0463378f, +0.1977720f, -0.0914941f, -0.1864421f, +0.0122811f,
  -0.0408461f, -0.1400508f, +0.0851305f, -0.0624502f, +0.1708349f, +0.1010318f, -0.4211602f, -0.1946535f,
  +0.2304352f, -0.1872265f, -0.1176425f, -0.0004792f, +0.3578921f, +0.0710927f, -0.2681801f, -0.0732814f,
  +0.1786152f, +0.0196261f, +0.1117654f, -0.0471102f, -0.0887657f, +0.0768715f, -0.3107014f, -0.1302195f,
  -0.2909555f, -0.4336153f, +0.1696155f, +0.3817554f, +0.1684789f, +0.0185252f, +0.0648651f, -0.6047267f,
  -0.3175407f, -0.4370567f, +0.0948719f, -0.1505569f, +0.2321717f, +0.1656273f, +0.0250161f, -0.3939072f,
  +0.2248349f, -0.2151434f, -0.0626581f, +0.1969569f, +0.0452746f, -0.1071751f, +0.1444528f, -0.1763149f,
  +0.1092245f, -0.2123979f, +0.0434855f, +0.2499683f, -0.0358197f, +0.0304845f, -0.1230996f, -0.2424643f,
  +0.3575818f, -0.1155915f, -0.1998029f, +0.0493540f, -0.1759918f, +0.1740334f, +0.1056170f, -0.1585269f,
  -0.0982538f, +0.0081289f, +0.0714570f, -0.0090920f, +0.0451355f, -0.0020859f, -0.2381627f, +0.0294251f,
  +0.1221404f, -0.2356194f, +0.6625510f, +0.0788806f, -0.2820974f, +0.1733920f, +0.2826840f, +0.3295651f,
  +0.0318141f, +0.0446744f, -0.2687882f, +0.2296134f, +0.1276493f, +0.1275605f, +0.0643090f, +0.2053204f,
  -0.0030852f, +0.2336695f, +0.1585659f, -0.2604481f, -0.1892475f, -0.3106515f, -0.0119647f, -0.2135389f,
  -0.0371177f, +0.1375525f, +0.1125341f, -0.0280417f, +0.0648524f, +0.1126485f, -0.0393742f, -0.1899340f,
  +0.0992242f, +0.0388006f, -0.0084563f, +0.0768705f, +0.2088327f, +0.0132717f, -0.2483682f, +0.2620743f,
  +0.2667316f, -0.1649304f, -0.0183914f, -0.4006048f, -0.0186330f, -0.1268006f, +0.0248235f, +0.1531525f,
  +0.0539690f, +0.1726249f, -0.2222441f, -0.3602228f, -0.1384688f, +0.0786733f, -0.1311630f, -0.0479635f,
  +0.0092611f, -0.0765974f, +0.2861560f, -0.2538916f, -0.0239469f, +0.0426601f, +0.0589313f, -0.0597825f,
  -0.1475340f, -0.0107088f, +0.0177161f, -0.0415381f, -0.0121896f, -0.1933569f, +0.2466710f, -0.0346882f,
  -0.0993474f, +0.1023768f, +0.3439719f, -0.0457434f, -0.2354059f, -0.2580007f, +0.1436053f, +0.0735793f,
  +0.0033653f, -0.1175425f, +0.0994263f, -0.0493500f, -0.1094889f, +0.1984750f, -0.1366426f, +0.1912338f,
  +0.1749826f, -0.1025869f, -0.0573802f, +0.0051798f, -0.0106997f, -0.2910994f, +0.4802617f, +0.3484431f,
  +0.1516365f, -0.2843923f, +0.1106617f, -0.1031585f, +0.0788405f, +0.0357430f, -0.0532350f, -0.1988404f,
  +0.0935809f, -0.6252915f, -0.1978590f, +0.0842106f, +0.2542208f, +0.2609325f, -0.3411491f, +0.1257218f,
  +0.0384468f, -0.1504037f, -0.0462108f, +0.0023064f, -0.0909321f, -0.0817517f, +0.1635476f, +0.0353888f,
  +0.0393905f, -0.3150927f, -0.0712216f, +0.3049594f, -0.0961089f, +0.0482425f, +0.1926555f, +0.2562547f,
  +0.0079133f, -0.0707368f, -0.2053930f, +0.1559495f, +0.1233024f, +0.2246964f, +0.0318794f, +0.1524576f
);

const float biases[4] = float[4](
  -0.0185756f, -0.3664778f, -0.0411053f, +0.0280068f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer52 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.4148426f, -0.0745384f, +0.1113265f, +0.0192780f, +0.0361888f, -0.3661988f, +0.0409769f, -0.3016973f,
  -0.0065757f, -0.2228509f, +0.1908754f, +0.1916406f, +0.1983641f, -0.2236498f, -0.1964375f, +0.1552010f,
  -0.1031716f, -0.0224969f, +0.0367656f, -0.0751084f, -0.0794394f, -0.2652406f, -0.1241523f, -0.1084718f,
  +0.1680180f, -0.1520023f, -0.1218476f, -0.0673649f, -0.0482632f, +0.1191218f, +0.0917070f, -0.0964414f,
  -0.0068019f, -0.1981554f, +0.1655196f, +0.2507430f, -0.1897173f, +0.2680273f, -0.0314669f, -0.0646164f,
  -0.0661598f, +0.0440447f, -0.0948437f, +0.0844093f, +0.1398268f, -0.3696601f, +0.0959370f, -0.0370081f,
  -0.4278122f, +0.0172173f, +0.0766496f, +0.2552238f, +0.2716893f, -0.4292021f, +0.1097749f, -0.1083373f,
  -0.2824154f, -0.0209872f, +0.2706400f, +0.1913794f, +0.2186698f, -0.3525220f, +0.1831038f, +0.0997530f,
  -0.2071045f, -0.1884466f, +0.1262735f, +0.0275258f, -0.0241547f, -0.1258218f, +0.0438965f, +0.3160235f,
  -0.1541744f, -0.0522411f, +0.0310142f, -0.4491167f, +0.1206947f, +0.2004383f, +0.0353641f, +0.1384889f,
  +0.0525911f, +0.2388242f, -0.0963352f, +0.0218559f, -0.0395885f, +0.0841844f, -0.2291454f, +0.0738723f,
  +0.0949588f, -0.0910141f, +0.1285713f, +0.0979798f, +0.1811512f, +0.1880914f, +0.2187498f, +0.0064549f,
  -0.2457726f, -0.2157201f, -0.0878156f, -0.0348614f, -0.0209901f, +0.2876593f, -0.0544899f, +0.2007529f,
  +0.1192384f, +0.1610039f, +0.3983387f, +0.0118858f, +0.0892490f, +0.3864456f, -0.1593186f, +0.1037404f,
  +0.1193366f, +0.0938115f, +0.2796606f, +0.1009989f, -0.2109532f, +0.0535398f, -0.2098589f, -0.0023231f,
  +0.0924661f, -0.0498639f, -0.1198056f, -0.0549335f, -0.0767391f, +0.2912060f, -0.1416533f, +0.1450999f,
  -0.0242715f, -0.0919442f, -0.0824841f, -0.0462622f, +0.0516659f, +0.3952436f, +0.2661682f, -0.0842395f,
  -0.1185676f, +0.1334720f, +0.2824610f, -0.0907734f, -0.3110349f, -0.0111942f, -0.0144265f, -0.0388356f,
  -0.0714268f, -0.2784183f, +0.2878324f, -0.6784225f, +0.0068212f, +0.0911982f, -0.0523476f, +0.2114199f,
  +0.3294017f, +0.0762489f, +0.2001879f, -0.0936552f, +0.0134856f, +0.1167806f, +0.2410382f, -0.0390904f,
  +0.1044371f, +0.0991165f, -0.1457959f, +0.0652824f, -0.0255693f, +0.0689473f, -0.0534991f, +0.0863637f,
  +0.1480871f, -0.1857515f, +0.1284712f, -0.4617284f, -0.3159230f, +0.1670050f, +0.0703446f, +0.4604066f,
  +0.0863362f, +0.3853821f, -0.0650761f, -0.2049727f, +0.4318002f, -0.4151869f, -0.1958469f, +0.0822756f,
  -0.0792893f, -0.0464949f, -0.0705688f, -0.0527140f, -0.4181582f, -0.1832925f, -0.1741599f, +0.0724259f,
  -0.1222411f, -0.0782364f, -0.0618805f, -0.0554951f, -0.0127757f, +0.3356580f, +0.0957687f, +0.0809109f,
  +0.0870184f, -0.1842254f, +0.0466716f, -0.1702945f, +0.0198272f, +0.3624510f, -0.2997534f, +0.1117553f,
  +0.1995077f, -0.1547619f, -0.0786548f, -0.0377633f, +0.1124077f, -0.1096927f, -0.0853677f, +0.2087741f,
  +0.0744736f, -0.2641343f, -0.0073326f, -0.2502986f, +0.0492200f, +0.3195010f, -0.1297106f, +0.3747615f,
  +0.1631931f, +0.0709791f, +0.0614412f, +0.2228421f, -0.0654272f, +0.2128144f, +0.2044244f, -0.0937696f,
  -0.0218085f, +0.1782815f, +0.0597387f, +0.0856941f, +0.1207935f, +0.0716217f, +0.1487470f, -0.1692301f,
  -0.2232552f, +0.1084060f, -0.1108787f, +0.0604254f, -0.0143786f, +0.3489910f, -0.0161875f, -0.2306819f,
  -0.0287998f, -0.0774913f, -0.0670679f, +0.0444911f, +0.2343876f, -0.4410825f, -0.0990178f, -0.0811013f,
  -0.0774663f, -0.2311071f, -0.0978754f, +0.0186116f, +0.2928409f, +0.2298746f, +0.0933731f, -0.0437080f,
  +0.0030980f, -0.0598641f, +0.0074631f, +0.0168843f, +0.0629091f, +0.0807486f, -0.1323269f, +0.0320235f,
  +0.0384000f, -0.1174448f, -0.1515704f, +0.0582228f, +0.1574834f, -0.1800167f, -0.1617776f, +0.1587088f,
  +0.1580855f, -0.0407685f, +0.0959918f, +0.2161259f, +0.0059448f, +0.0898616f, +0.1438959f, -0.0886408f
);

const float biases[4] = float[4](
  -0.0157508f, -0.0776055f, +0.0569732f, +0.0375068f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer52 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2667774f, +0.1008137f, +0.1394018f, +0.3449815f, -0.0147183f, +0.0304402f, -0.1318109f, +0.0959592f,
  -0.2544993f, +0.1069277f, +0.0460849f, +0.1857021f, +0.2334425f, -0.3346474f, -0.0363081f, +0.0060550f,
  -0.0493864f, +0.0859708f, +0.0591235f, +0.2598220f, +0.1142436f, -0.0171017f, +0.1729625f, -0.0628207f,
  -0.2012326f, +0.2800078f, +0.1657069f, +0.1990490f, -0.0210741f, -0.0296137f, -0.1979735f, -0.2579705f,
  -0.6239616f, +0.2165717f, -0.4141412f, -0.2077300f, -0.0518758f, -0.3438224f, -0.1549216f, -0.1951067f,
  -0.4316461f, -0.1793740f, +0.0584788f, +0.0045022f, +0.0889136f, -0.0346658f, +0.0535343f, +0.0440842f,
  +0.1335995f, +0.0808425f, +0.0021942f, -0.0515050f, -0.1778804f, +0.1995015f, -0.4091807f, -0.0705978f,
  -0.1304837f, +0.0902948f, -0.1838041f, -0.3904620f, +0.0508252f, -0.3022224f, +0.2329760f, +0.0548074f,
  -0.1169811f, -0.0280384f, -0.0670859f, -0.0689683f, +0.0395427f, -0.0027342f, +0.3431389f, +0.0049964f,
  +0.1056732f, +0.0135454f, -0.0377541f, -0.2227780f, -0.2764097f, -0.0928831f, -0.0486545f, -0.1880610f,
  +0.1231321f, -0.1125726f, -0.0583795f, +0.0578960f, +0.1985078f, +0.1123587f, -0.1097907f, -0.1122994f,
  +0.1927335f, -0.1024775f, -0.1046610f, +0.1727079f, +0.0929373f, +0.0964881f, +0.2306115f, -0.0364827f,
  -0.2068978f, +0.1728823f, -0.0811957f, +0.3414934f, +0.0912829f, +0.1984496f, +0.2203066f, -0.2787092f,
  -0.0812390f, -0.1482210f, -0.2902676f, -0.0257529f, +0.1112199f, +0.0144618f, -0.0629813f, -0.1928113f,
  -0.1553001f, +0.0395010f, +0.0989601f, +0.1136255f, +0.0670888f, -0.1088629f, +0.0443462f, +0.0139903f,
  -0.2296098f, +0.3146453f, +0.2324509f, +0.1286110f, -0.1199695f, -0.0925542f, -0.1173275f, -0.2466520f,
  -0.1156650f, -0.0424873f, +0.0583902f, -0.1449728f, -0.0643787f, -0.0895797f, +0.0079433f, +0.1124213f,
  +0.0209257f, -0.1102194f, -0.0140535f, +0.2186082f, +0.1581812f, -0.1065570f, +0.2116841f, +0.1593717f,
  -0.1972131f, +0.0544408f, -0.0906977f, -0.1774073f, +0.1397119f, +0.1536403f, -0.1478869f, -0.0325937f,
  +0.1173405f, -0.1120143f, +0.1044390f, +0.0679216f, -0.0530622f, +0.1639657f, +0.2699082f, -0.1351042f,
  -0.0392150f, -0.0057276f, +0.1857541f, -0.0563634f, +0.0000659f, -0.1518256f, +0.1837084f, +0.1516293f,
  +0.0681402f, -0.1281595f, -0.0676801f, +0.0555737f, +0.0138935f, +0.0509874f, -0.1411473f, +0.1692426f,
  +0.1047295f, -0.0371465f, -0.1488179f, -0.1281209f, -0.0127781f, +0.4993602f, -0.1300865f, +0.2934315f,
  +0.0210999f, +0.3987171f, -0.1293657f, -0.1135974f, +0.0046169f, +0.3626213f, +0.1859185f, -0.1890767f,
  -0.0184101f, +0.1297078f, +0.0378571f, +0.0010030f, -0.0420670f, +0.5099541f, -0.1616263f, -0.0328430f,
  +0.0677046f, +0.0726245f, +0.0278907f, +0.0534521f, -0.1197010f, +0.4973792f, -0.0263227f, -0.1809080f,
  +0.1966369f, -0.0158527f, -0.1746972f, +0.1633131f, +0.1008541f, +0.0938080f, +0.0248880f, -0.0919369f,
  +0.0159303f, +0.0944076f, -0.1802728f, +0.2000245f, -0.0819200f, +0.3441737f, +0.0589620f, +0.2023473f,
  +0.1346596f, +0.0899159f, -0.1530661f, -0.1035530f, -0.3904179f, +0.1047089f, +0.0091627f, -0.0027384f,
  -0.0022724f, -0.0361982f, -0.0646460f, -0.1098348f, +0.1809807f, +0.2328437f, -0.0291154f, -0.0005105f,
  -0.1653356f, +0.0398164f, +0.0175604f, +0.5324802f, +0.0262163f, +0.2163314f, -0.2476021f, +0.1943794f,
  +0.0265492f, -0.5513799f, -0.0340386f, +0.0724824f, +0.0708323f, +0.7965020f, -0.0923920f, +0.2564637f,
  -0.0293874f, +0.3396818f, +0.0960129f, +0.0615671f, -0.0940243f, +0.0468407f, +0.1379557f, -0.2818953f,
  -0.0414651f, -0.1353106f, +0.3540059f, +0.1239955f, -0.1827415f, +0.1748234f, -0.1900747f, -0.0655488f,
  -0.0534346f, -0.3325062f, +0.0605574f, -0.1631289f, -0.0224184f, +0.3385813f, +0.0058941f, +0.3147963f,
  +0.0094037f, -0.0899976f, +0.2116992f, -0.1138076f, -0.0324378f, +0.0983544f, +0.0509950f, +0.2184445f
);

const float biases[4] = float[4](
  -0.0100352f, +0.0467674f, -0.0315009f, -0.0492938f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer53 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0180218f, +0.0939165f, +0.2412806f, +0.0291363f, -0.1044575f, +0.0019930f, -0.2922343f, -0.0407374f,
  +0.0977769f, -0.0730209f, +0.1367869f, -0.1559552f, +0.1125622f, -0.0868351f, -0.0400016f, -0.1918157f,
  -0.1001071f, +0.1727472f, -0.0099212f, +0.1609371f, +0.2675610f, -0.0828320f, -0.0069378f, +0.0376414f,
  +0.2262322f, -0.3320159f, +0.2314556f, +0.0848215f, +0.1846153f, +0.1810613f, -0.0397849f, -0.2260417f,
  +0.2960860f, +0.0086102f, +0.0463082f, -0.1107347f, -0.4591267f, +0.1218814f, +0.1998320f, -0.2031978f,
  +0.2515188f, +0.1785142f, +0.0365163f, -0.0188266f, -0.0335634f, +0.2139695f, -0.1792890f, -0.0479385f,
  +0.1226136f, -0.0162557f, -0.2174790f, +0.2173507f, -0.0283788f, +0.1784484f, +0.3064154f, +0.4404771f,
  -0.0729488f, +0.1270469f, +0.0875025f, +0.0732157f, +0.1677506f, +0.1976886f, +0.2237548f, +0.2055224f,
  -0.0023427f, -0.2340608f, +0.0254843f, +0.0244939f, +0.1609275f, +0.1847539f, +0.1909639f, -0.0919490f,
  +0.0503921f, -0.0461323f, +0.0836603f, +0.0495279f, -0.0072175f, -0.1438944f, -0.1898885f, +0.0368640f,
  +0.2168938f, -0.0930379f, +0.2603680f, -0.0446908f, -0.0165269f, +0.0665623f, -0.2785210f, -0.0316219f,
  +0.1950691f, -0.1688973f, +0.0728262f, +0.1297837f, +0.0090223f, +0.0387861f, -0.0683066f, +0.0466888f,
  +0.1554788f, +0.0934329f, -0.0223699f, -0.1047715f, +0.1791549f, -0.0826678f, -0.3172940f, -0.1809093f,
  +0.1105623f, -0.0608737f, +0.1098618f, -0.3200933f, -0.0055991f, +0.1904413f, -0.1518131f, -0.1507826f,
  +0.0107685f, -0.1239952f, -0.0706477f, +0.0343685f, +0.0199885f, -0.1824462f, -0.0158062f, +0.2260698f,
  +0.0973319f, +0.1165418f, +0.0373975f, -0.2281846f, -0.0825694f, +0.1636456f, -0.1536674f, +0.1318853f,
  -0.0782020f, +0.1809945f, -0.1807062f, -0.1396449f, +0.0989898f, -0.1210718f, +0.0887614f, -0.0794559f,
  +0.1400008f, +0.1113494f, +0.0939223f, +0.0600603f, +0.0525084f, -0.0839315f, -0.0382245f, -0.0509841f,
  -0.2558222f, +0.2775094f, +0.2053793f, +0.1392569f, -0.1680008f, +0.1870213f, -0.2508275f, +0.1481265f,
  +0.1361515f, -0.3166172f, -0.2459003f, +0.1850527f, -0.1717056f, +0.0886638f, +0.0100096f, +0.2420782f,
  -0.1226689f, -0.0464812f, -0.1352586f, -0.0589032f, -0.2025628f, +0.1885415f, -0.1690671f, -0.0204809f,
  -0.2173792f, -0.1033381f, +0.0883341f, -0.1100885f, +0.5540534f, +0.0030893f, +0.1210293f, +0.1489547f,
  -0.1802427f, -0.0761442f, -0.1015457f, -0.1225403f, +0.1010871f, -0.2316127f, -0.1164881f, -0.0790997f,
  +0.1626784f, -0.1182143f, -0.2586761f, -0.3323068f, -0.0494144f, +0.2049237f, +0.4189238f, +0.2291238f,
  +0.1893044f, -0.1551870f, +0.0004530f, +0.0520828f, +0.0370633f, -0.0049041f, +0.0501237f, +0.1054322f,
  +0.2429472f, -0.2000601f, -0.2956270f, -0.2775451f, -0.0052617f, +0.0182760f, +0.3770204f, +0.0046947f,
  -0.0326635f, +0.0692905f, +0.2273991f, -0.1300864f, -0.0234156f, +0.1443275f, +0.0161321f, -0.2042562f,
  +0.1527009f, -0.0833276f, -0.0235161f, +0.1434580f, +0.0298402f, -0.0798142f, +0.0298719f, -0.0169340f,
  +0.0402274f, -0.0318164f, +0.0351709f, -0.0037843f, -0.1474228f, -0.1515203f, +0.1700220f, +0.1299320f,
  +0.0391401f, -0.1506097f, +0.1679503f, -0.1876817f, -0.0233953f, +0.0946434f, -0.3615973f, +0.2812486f,
  +0.0068550f, -0.1640594f, -0.0858140f, +0.2008880f, +0.1924032f, -0.0770695f, +0.2102670f, -0.0641017f,
  +0.1312868f, +0.5318456f, -0.0096684f, -0.0324041f, +0.0938600f, +0.0099141f, +0.3905930f, +0.1249422f,
  -0.0606819f, -0.2866632f, +0.0789845f, +0.3934850f, -0.4189616f, +0.0821448f, -0.3511800f, +0.3258940f,
  -0.1738285f, +0.0196867f, -0.0765352f, -0.0704172f, -0.1345867f, -0.1775485f, -0.0903578f, +0.0549385f,
  +0.0332759f, +0.1489950f, -0.1560737f, -0.0465494f, -0.0229208f, +0.0098141f, +0.1837703f, -0.0648004f,
  +0.1194928f, -0.0954236f, +0.2362131f, +0.2441483f, -0.1540904f, +0.1700526f, +0.0071290f, +0.1204636f
);

const float biases[4] = float[4](
  +0.0507960f, +0.0341657f, +0.0593955f, +0.0313219f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer53 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.3361630f, +0.0068018f, -0.0477705f, -0.5742365f, -0.2324075f, -0.2408152f, +0.2734172f, -0.1759957f,
  -0.2779117f, +0.3760310f, +0.0793530f, -0.2690984f, -0.1668880f, -0.3019099f, -0.1809932f, -0.1432204f,
  -0.0638600f, -0.2314780f, +0.3227858f, -0.1409068f, -0.1582346f, -0.1667314f, +0.0008113f, +0.1503416f,
  +0.0112570f, -0.0027663f, +0.2440624f, +0.0565263f, -0.1867315f, -0.1024661f, +0.1595119f, -0.0994011f,
  -0.2349715f, +0.0949211f, -0.1914178f, +0.0438557f, +0.1402912f, +0.0492074f, -0.1093991f, -0.1920986f,
  +0.0175582f, -0.1104829f, -0.3518630f, +0.1181528f, +0.1197793f, +0.0190049f, -0.1530287f, -0.0557677f,
  -0.1399548f, +0.1646676f, -0.1367782f, +0.1637950f, +0.1651783f, -0.0042281f, -0.0985673f, +0.0557570f,
  -0.0990055f, -0.0439786f, -0.0972868f, -0.0855969f, +0.0955454f, +0.1260462f, -0.0601157f, -0.0291308f,
  -0.0175299f, -0.0901633f, -0.1140297f, +0.0475438f, +0.2037145f, +0.0190799f, +0.0431619f, +0.0865147f,
  +0.0065864f, -0.0168959f, +0.1898892f, +0.1015097f, +0.1295919f, -0.0241645f, +0.1257430f, -0.1023425f,
  -0.0538926f, -0.2356131f, +0.3005558f, +0.0704242f, -0.0806134f, +0.2341190f, -0.1974276f, +0.0490137f,
  +0.2863515f, +0.2415019f, +0.2925064f, -0.1321783f, -0.3351074f, +0.0840215f, -0.0969200f, +0.1043501f,
  +0.2039600f, +0.0427249f, -0.1434088f, +0.0764336f, -0.3137208f, -0.1670499f, +0.1465485f, -0.0460772f,
  -0.1102447f, -0.0444558f, +0.0799286f, -0.1995303f, +0.0826865f, -0.0491560f, -0.2095096f, +0.2065499f,
  +0.0919567f, +0.0592028f, +0.2305971f, -0.2030577f, +0.1207259f, +0.0409535f, -0.1130340f, +0.0844172f,
  +0.2937782f, -0.2072028f, -0.4189602f, +0.2265547f, +0.1276076f, -0.0821507f, +0.1638206f, -0.1272756f,
  +0.0574647f, +0.0044072f, +0.0060155f, -0.0050788f, -0.1478908f, -0.2727583f, -0.1229789f, +0.1631282f,
  +0.0034833f, +0.0477389f, -0.2940050f, -0.0627846f, +0.0692004f, +0.2121151f, -0.1101375f, +0.1341681f,
  +0.1083885f, -0.1914196f, +0.0398245f, +0.1409327f, -0.1144588f, -0.1505982f, -0.3360407f, -0.2006377f,
  -0.0555683f, +0.1665557f, +0.0638218f, -0.3237709f, -0.3162604f, -0.1108325f, -0.2209808f, -0.3352072f,
  -0.4164258f, +0.0129262f, +0.3942442f, +0.2742715f, +0.3826781f, +0.1018025f, +0.2936925f, +0.0091197f,
  +0.0592769f, -0.1737392f, +0.0274427f, +0.4271907f, +0.3965041f, -0.2445159f, +0.1474357f, -0.0576460f,
  +0.1425491f, +0.1012615f, -0.1024731f, -0.3142137f, -0.1002333f, +0.0258968f, +0.0523474f, -0.1493710f,
  +0.0450172f, -0.2991226f, +0.2300553f, -0.0477171f, +0.0339345f, -0.1622881f, -0.0638388f, -0.1195497f,
  +0.0679879f, -0.1854253f, -0.1938708f, -0.1501344f, -0.1346503f, +0.1417260f, -0.0478433f, -0.1452082f,
  +0.2277974f, +0.2093833f, +0.0453648f, -0.6291068f, -0.0775015f, -0.0287191f, +0.0122915f, -0.1448684f,
  -0.1597715f, +0.0073688f, -0.0925801f, +0.0734998f, +0.3187445f, -0.1537495f, +0.0956254f, +0.3697137f,
  -0.0295252f, +0.1874729f, -0.0369364f, -0.2394338f, -0.0056147f, -0.0312170f, +0.0963319f, +0.1430123f,
  +0.1453367f, +0.3403802f, +0.2946700f, -0.2094741f, -0.1317489f, -0.0102058f, +0.0584554f, -0.1285961f,
  +0.0926357f, +0.0995808f, +0.1892201f, -0.1189001f, +0.1678518f, -0.0745481f, -0.0958343f, -0.0724942f,
  +0.2250634f, +0.2983471f, -0.0477441f, -0.0295333f, +0.1881019f, -0.0737377f, -0.1484583f, +0.3551893f,
  +0.1950929f, +0.1144239f, +0.1051109f, +0.2085176f, -0.1490391f, +0.1658555f, +0.1641002f, -0.1458098f,
  +0.0250538f, +0.0127619f, +0.1171702f, -0.1567047f, -0.2930027f, +0.0591036f, -0.2030636f, -0.1681321f,
  +0.0623826f, -0.0729534f, -0.0706667f, -0.0843185f, +0.1895442f, -0.1595857f, +0.0235604f, -0.0588462f,
  -0.2097322f, -0.1073564f, -0.0264318f, -0.0248386f, -0.0877310f, -0.1323572f, -0.2554817f, +0.0621052f,
  -0.0953617f, -0.1509865f, -0.1063838f, -0.3138816f, +0.0041026f, -0.0245812f, +0.0749700f, +0.0468443f
);

const float biases[4] = float[4](
  -0.0657928f, -0.0310536f, -0.0458210f, +0.0355518f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer54 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0651415f, -0.1634790f, +0.0483199f, -0.1917139f, -0.0679769f, +0.0989087f, -0.4153194f, +0.1636675f,
  -0.0555901f, +0.0147383f, -0.0597538f, +0.1143334f, -0.0079245f, -0.1365289f, -0.2336035f, +0.0875984f,
  +0.1409139f, -0.0653946f, -0.0077478f, +0.0256182f, -0.0713063f, -0.1287427f, -0.1843654f, -0.0395926f,
  -0.1730419f, -0.2065110f, -0.0642134f, +0.0990138f, +0.0013707f, -0.1547029f, -0.3580638f, -0.0174463f,
  +0.2619324f, -0.0826278f, +0.0770765f, -0.2402371f, +0.1432180f, +0.0256220f, +0.1736116f, +0.1272189f,
  -0.2488425f, -0.1085012f, -0.0733229f, +0.2220085f, -0.1609275f, -0.0750451f, -0.0562965f, +0.0266797f,
  +0.0205796f, +0.0924216f, -0.1338174f, -0.1318386f, -0.3004306f, +0.1022214f, -0.4921194f, -0.0597045f,
  -0.4248570f, -0.1571147f, -0.1453133f, -0.0370582f, -0.0881929f, -0.3278902f, -0.0439017f, -0.0702201f,
  +0.0391700f, +0.2952985f, +0.2424333f, +0.1820125f, -0.0628047f, -0.1319605f, +0.0889933f, -0.1810632f,
  +0.0560091f, +0.2001047f, +0.0451907f, +0.0860231f, +0.0403141f, -0.3678713f, -0.2902927f, -0.0577464f,
  +0.1733510f, -0.1499130f, +0.1259569f, +0.1233164f, +0.0362665f, -0.0339062f, +0.1092344f, +0.1709361f,
  +0.0934555f, -0.1676412f, +0.1371908f, +0.2635436f, -0.1621162f, +0.1436558f, -0.2058925f, +0.0078879f,
  -0.0311847f, +0.3200681f, +0.3658916f, +0.3886124f, -0.3133467f, -0.1733123f, +0.0081053f, +0.2016829f,
  +0.0670397f, +0.0433956f, +0.1094314f, -0.4322433f, -0.0412155f, +0.0381744f, +0.3221501f, +0.2451502f,
  +0.1039289f, -0.1217018f, +0.0494210f, +0.0128371f, +0.3494023f, +0.0539212f, +0.0092512f, -0.2070562f,
  -0.1423545f, -0.1955505f, +0.1703331f, +0.4569684f, -0.0479324f, -0.2483983f, +0.0028325f, +0.0011113f,
  +0.0893760f, -0.2174423f, +0.1493465f, +0.0024509f, +0.0250554f, -0.0125985f, +0.0099025f, +0.1000240f,
  -0.2357329f, +0.0003213f, -0.3155501f, +0.0046073f, -0.0255789f, +0.0633041f, -0.2392896f, +0.2919379f,
  +0.1150879f, -0.1148557f, -0.2396386f, -0.0304540f, -0.0488677f, +0.1588945f, -0.0149176f, +0.1133099f,
  -0.2340195f, +0.0461809f, +0.2206389f, +0.1561619f, +0.0449618f, -0.0462319f, +0.3993686f, +0.1031034f,
  +0.0880855f, -0.2110709f, +0.1269868f, -0.0093635f, +0.2250594f, +0.0423088f, +0.2488909f, +0.1629362f,
  -0.0191571f, +0.0831760f, +0.0760958f, +0.2217130f, +0.0939164f, -0.2988180f, +0.4047911f, -0.2283839f,
  +0.1175827f, -0.3004262f, -0.2822769f, +0.1163202f, +0.1286266f, -0.1992285f, +0.0149930f, +0.0513787f,
  +0.0058654f, +0.2236107f, +0.0682428f, +0.0437971f, -0.2042420f, +0.0857376f, +0.6019459f, +0.1294277f,
  +0.2069622f, +0.0875318f, -0.0070064f, -0.0385631f, -0.4834788f, -0.2294569f, +0.1503099f, -0.0704769f,
  -0.3405677f, -0.2305036f, -0.0597972f, +0.2269870f, +0.5321916f, -0.2032543f, -0.3101358f, +0.3236433f,
  +0.0473354f, -0.0498265f, +0.1156276f, +0.0784265f, -0.0054053f, -0.2188122f, +0.2126076f, +0.2573382f,
  +0.0841053f, -0.0646744f, -0.1795244f, +0.1243008f, -0.1097111f, -0.1609956f, -0.2021089f, -0.0130907f,
  -0.0088243f, +0.0057315f, -0.1207524f, -0.0120319f, -0.1693037f, -0.2885080f, -0.0431448f, +0.0949396f,
  -0.4205750f, +0.2683266f, -0.2809070f, +0.2556568f, -0.2754332f, +0.1118720f, -0.0602720f, -0.1485085f,
  -0.3055781f, -0.0933152f, +0.1230721f, +0.0528968f, -0.2729041f, +0.0914312f, -0.1262890f, -0.0458253f,
  -0.0095700f, -0.1034944f, +0.1038842f, +0.1619748f, -0.0734345f, +0.1981031f, -0.6117164f, +0.1124715f,
  +0.0104170f, +0.1009476f, -0.0531107f, -0.0763936f, -0.2852294f, +0.1042011f, +0.2426014f, -0.1914752f,
  -0.0372133f, +0.1606018f, +0.1426125f, +0.1858666f, -0.2019650f, +0.3198561f, +0.1616210f, +0.2191325f,
  +0.2355067f, +0.3655340f, +0.2014271f, +0.0858394f, +0.2470125f, +0.2374519f, -0.0941096f, -0.1018556f,
  +0.0051538f, -0.1002516f, -0.0039384f, -0.0199568f, -0.1194913f, +0.1330874f, -0.1278193f, -0.1018031f
);

const float biases[4] = float[4](
  -0.0215867f, -0.0594697f, +0.0475929f, +0.0334132f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer54 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1239518f, -0.1224567f, +0.2517927f, +0.1435660f, -0.1910528f, -0.2384344f, -0.1306867f, +0.0792092f,
  -0.0089552f, +0.0380156f, -0.0182387f, -0.0544930f, -0.2022254f, +0.1484511f, -0.1593621f, +0.0072037f,
  +0.1634995f, +0.0233309f, -0.1813631f, +0.3150512f, -0.3328888f, -0.0867352f, -0.2225303f, -0.3805238f,
  +0.4941524f, -0.1785755f, +0.0334442f, -0.2975441f, +0.0035750f, +0.0682080f, +0.1163666f, +0.3216721f,
  +0.1022523f, +0.1391103f, -0.0788713f, +0.2412140f, -0.0882171f, -0.2132247f, -0.2255907f, +0.2868770f,
  +0.1358938f, -0.0970682f, -0.1764758f, -0.2788282f, -0.0005203f, -0.1263735f, -0.2214821f, -0.0702294f,
  -0.2127122f, +0.0696326f, +0.2631930f, -0.2961431f, +0.4173124f, +0.1653384f, -0.0208646f, +0.3014514f,
  -0.1826980f, +0.2192737f, +0.0357731f, -0.1133419f, -0.0288722f, +0.1643043f, -0.0872159f, +0.0328388f,
  -0.1641301f, +0.1267726f, +0.0876016f, -0.0526865f, +0.0967131f, -0.0407240f, +0.1052815f, -0.1558089f,
  -0.1467852f, -0.1188256f, +0.3552072f, -0.1969296f, +0.0412956f, +0.3251917f, -0.2912334f, +0.0855899f,
  -0.0288840f, +0.3777774f, +0.1156137f, +0.0699696f, -0.3261973f, +0.3651887f, -0.4411637f, -0.0099514f,
  +0.0552273f, +0.0424020f, +0.1626314f, +0.0384574f, -0.0195793f, +0.0248444f, -0.1648846f, +0.0349251f,
  +0.0419637f, -0.0389754f, -0.0514227f, +0.1768651f, +0.1859340f, +0.1221722f, -0.1248621f, +0.0427622f,
  +0.0285812f, -0.1451727f, -0.2367863f, -0.2233866f, -0.0879954f, +0.1844250f, +0.1158708f, -0.0786873f,
  -0.0022372f, -0.0449363f, +0.0076424f, -0.0094292f, -0.0626499f, +0.1061184f, +0.1964527f, +0.2449111f,
  +0.2667522f, -0.1041233f, +0.0881358f, -0.2609359f, +0.1662295f, +0.1278373f, -0.3686340f, -0.0626524f,
  -0.0049095f, -0.0394631f, +0.0238736f, +0.1534958f, +0.3377873f, -0.0424111f, -0.0053306f, -0.1533235f,
  +0.0552662f, +0.1689019f, +0.1121717f, -0.0414269f, +0.2521532f, -0.0597811f, -0.0770568f, -0.0436622f,
  -0.1701370f, +0.0961358f, -0.0773850f, -0.1776337f, +0.2596545f, +0.1455934f, +0.1099113f, -0.1977737f,
  -0.0163285f, -0.0826115f, -0.0240548f, -0.0578159f, +0.0080840f, +0.2046167f, +0.0768446f, +0.0990811f,
  +0.0847499f, -0.0783050f, -0.0758494f, -0.0969834f, +0.2034283f, -0.0544602f, +0.0380456f, +0.2026108f,
  +0.0794889f, +0.1463323f, -0.0478430f, +0.4520887f, +0.2335675f, +0.1285558f, -0.0964346f, -0.1204529f,
  +0.0358023f, +0.0101419f, +0.2523186f, -0.2247841f, +0.0418543f, +0.2440621f, +0.0837340f, +0.0318274f,
  -0.0032476f, +0.0081072f, -0.1243953f, +0.0946900f, -0.1599260f, +0.0166684f, -0.1627560f, +0.2580761f,
  +0.0697796f, -0.1232057f, -0.1309415f, +0.0265822f, +0.1761218f, +0.1144636f, +0.0871175f, +0.1227078f,
  -0.1447746f, -0.1422873f, +0.0022239f, -0.0156507f, -0.0306928f, +0.1362798f, +0.4195407f, -0.1742142f,
  +0.1901396f, -0.1270405f, +0.1298650f, -0.0184283f, -0.0881163f, -0.1030937f, -0.0016675f, +0.0544346f,
  +0.1123250f, -0.2078537f, +0.3979697f, +0.0962869f, -0.1117451f, -0.1017778f, -0.0969975f, +0.0749198f,
  +0.1922922f, -0.1716299f, -0.2764982f, -0.1516015f, +0.0609705f, -0.2147206f, -0.1468354f, -0.1683031f,
  -0.1706106f, -0.0842151f, -0.3665707f, +0.0665086f, -0.2898874f, -0.1427231f, -0.1838454f, +0.0573979f,
  -0.1480610f, -0.0403180f, -0.1766174f, -0.0584898f, +0.1816993f, +0.1411752f, -0.0838774f, +0.1253123f,
  -0.0531568f, +0.2719973f, -0.2304609f, -0.3814101f, +0.2758757f, -0.1525312f, +0.0349172f, +0.4684830f,
  +0.3459218f, +0.1664752f, -0.2376959f, +0.3296139f, -0.1988516f, +0.1427594f, -0.0351531f, -0.0913226f,
  -0.1591889f, -0.2291159f, +0.4176677f, -0.0275692f, -0.0611165f, +0.1654079f, -0.0599603f, +0.0295512f,
  +0.0344979f, -0.2363010f, +0.0811986f, -0.1551568f, -0.2474363f, -0.3304479f, +0.3298485f, -0.0709871f,
  -0.0690830f, +0.0771866f, -0.0975032f, +0.1286337f, +0.0599479f, +0.0065452f, -0.1509413f, -0.0644605f
);

const float biases[4] = float[4](
  +0.0012040f, +0.0309957f, -0.0473489f, -0.0616048f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer55 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1799421f, -0.2866478f, -0.0898913f, +0.1789282f, +0.0143696f, -0.0601917f, -0.1488649f, -0.1983742f,
  -0.1867359f, -0.0175122f, +0.0614319f, +0.5021147f, -0.0514080f, -0.0326910f, -0.3511556f, +0.1273175f,
  +0.0733440f, +0.0606194f, +0.0019637f, +0.3082375f, +0.2177659f, +0.1466683f, +0.0119663f, +0.2509966f,
  -0.0090797f, -0.0070205f, -0.4000046f, +0.1389472f, +0.3284650f, +0.1037883f, -0.1485254f, -0.2814976f,
  +0.3628941f, -0.1411707f, -0.0226086f, -0.2842787f, +0.2559544f, +0.1507261f, +0.2993011f, +0.0461212f,
  +0.0655858f, +0.0187557f, +0.0446336f, -0.0158832f, -0.0065931f, -0.1318271f, -0.0893737f, +0.3081043f,
  -0.1244254f, -0.0112164f, -0.1463396f, -0.3894863f, +0.2106427f, -0.0857457f, -0.0463881f, +0.0894487f,
  +0.3466150f, +0.1732951f, -0.2201158f, -0.1294291f, +0.1423036f, +0.1478960f, +0.0824872f, +0.1374328f,
  +0.1616487f, -0.2227146f, +0.2082257f, -0.1132432f, -0.2275147f, -0.3063024f, +0.0709587f, +0.1426084f,
  +0.0344666f, +0.0423969f, +0.0718923f, +0.0435652f, -0.0467633f, +0.1311572f, -0.0743861f, +0.1994048f,
  -0.0997707f, +0.2083433f, -0.1310039f, +0.0564663f, +0.1579873f, -0.0245932f, -0.0671732f, +0.3166224f,
  -0.2740805f, +0.1138309f, +0.0313434f, -0.0706365f, -0.0425459f, -0.1058324f, +0.0767995f, -0.2629596f,
  -0.4242864f, +0.0839303f, +0.1477032f, -0.0158405f, -0.1217918f, -0.0897870f, -0.1651210f, -0.0751537f,
  +0.1141670f, -0.2300130f, -0.0931007f, -0.2635708f, +0.0913573f, -0.2755865f, +0.3715622f, +0.1157479f,
  +0.0902345f, +0.0447710f, +0.1846205f, -0.1056846f, -0.2026813f, -0.0443234f, +0.2475653f, +0.3316658f,
  -0.0097366f, -0.1750811f, -0.1265652f, -0.1051546f, +0.0961861f, -0.0818659f, +0.0732326f, -0.0072019f,
  -0.0886736f, -0.3664702f, +0.1740813f, +0.1354485f, +0.5223760f, -0.1350401f, +0.0599709f, +0.1920507f,
  -0.2290843f, -0.4343893f, +0.0830892f, +0.1138772f, +0.1271160f, -0.2245931f, +0.0782904f, -0.1165330f,
  +0.0638509f, -0.0606892f, +0.0527645f, +0.0674154f, +0.0131012f, -0.0906755f, -0.0730064f, -0.0292549f,
  +0.1087749f, +0.0451754f, -0.0095981f, -0.0919400f, +0.3013252f, -0.0123270f, -0.1519351f, +0.0482796f,
  +0.1842314f, +0.0398120f, -0.1015805f, -0.0842069f, -0.0271350f, -0.1543007f, +0.2091292f, +0.0188320f,
  +0.0763048f, -0.4091688f, -0.2959415f, -0.1524758f, -0.1280688f, -0.1924028f, -0.0570564f, -0.3930530f,
  +0.1523707f, -0.1842286f, +0.2911848f, -0.0765013f, +0.0698196f, -0.0169306f, +0.1089453f, -0.1207819f,
  -0.2623253f, +0.2276172f, +0.1746337f, -0.3716691f, +0.3857999f, -0.0217489f, -0.0017199f, +0.0309552f,
  +0.0772480f, -0.2062522f, -0.2068783f, +0.2665366f, -0.0249476f, +0.1111790f, -0.1344347f, -0.3243923f,
  +0.0078116f, -0.1489352f, -0.0791987f, -0.0024851f, +0.3478186f, -0.0666066f, -0.3547253f, +0.2725417f,
  +0.0653610f, +0.0315760f, -0.2990870f, -0.2207233f, -0.0484178f, -0.1021307f, -0.0636681f, +0.0511468f,
  +0.0305201f, -0.0192517f, -0.0133191f, -0.1329760f, -0.0590609f, -0.2237292f, +0.2047785f, +0.0740445f,
  +0.1663249f, -0.0713108f, -0.4697085f, +0.0950761f, +0.0320901f, +0.5040995f, -0.0363792f, -0.1416758f,
  +0.1834417f, +0.0396843f, +0.1774802f, +0.2730604f, -0.0531518f, +0.1449669f, -0.2499868f, +0.0998204f,
  +0.4092568f, -0.2524201f, -0.1680729f, +0.1204598f, -0.0319141f, +0.0449731f, +0.0144333f, +0.0720858f,
  -0.1793804f, +0.1659254f, +0.1965831f, -0.3415471f, +0.0872902f, +0.1402178f, -0.3260148f, -0.1790230f,
  -0.0098943f, -0.1888213f, +0.1707219f, +0.3258547f, +0.4337642f, +0.1734337f, +0.2392727f, -0.0579469f,
  +0.1669469f, -0.0849617f, -0.0294372f, +0.0029159f, +0.1080699f, -0.0497970f, +0.1553841f, +0.2043042f,
  +0.0325303f, +0.3089992f, +0.0599628f, -0.2099699f, +0.0354353f, +0.0586538f, -0.1000637f, -0.0480905f,
  -0.0745647f, -0.0383424f, +0.0247497f, +0.0278140f, -0.0107328f, +0.0585777f, +0.0146937f, +0.0031264f
);

const float biases[4] = float[4](
  -0.0214621f, -0.0630297f, -0.0248626f, +0.0060208f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer55 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0929343f, +0.0909443f, +0.0479474f, +0.0607044f, +0.0923054f, +0.2628109f, -0.1147206f, +0.1565573f,
  -0.2070278f, +0.3217191f, +0.0349936f, -0.3188499f, +0.1403074f, +0.0731986f, +0.1766443f, +0.0876913f,
  -0.0564001f, +0.0890847f, -0.0055437f, -0.0118247f, +0.0620013f, +0.2692800f, -0.2311036f, -0.0428134f,
  -0.2014804f, -0.0262385f, +0.1965537f, -0.1950271f, +0.1552162f, -0.0269426f, +0.2175788f, +0.0974773f,
  +0.2485300f, +0.0464460f, -0.0874657f, +0.4521964f, -0.0247067f, +0.2320223f, -0.2192495f, +0.1099107f,
  -0.2088072f, -0.0448174f, +0.0577251f, -0.0210062f, -0.0450900f, -0.4213827f, +0.0583465f, -0.1862674f,
  -0.0087343f, +0.0660824f, -0.1750566f, -0.1281738f, -0.1150163f, -0.2395379f, +0.2006153f, +0.0245725f,
  +0.1052476f, +0.3005430f, +0.1465042f, -0.0036964f, +0.0613403f, +0.4506074f, -0.1464763f, -0.2904205f,
  +0.0284786f, -0.0844403f, +0.0519815f, +0.1404897f, +0.1061827f, -0.0511218f, -0.1718676f, +0.2066676f,
  -0.0641740f, +0.0451355f, -0.3026605f, -0.1854202f, +0.0566072f, +0.1283356f, -0.0305269f, +0.0865730f,
  -0.1583447f, +0.1659824f, -0.2676870f, -0.0236305f, +0.3550423f, +0.4108451f, -0.4632746f, +0.2422878f,
  +0.3696619f, +0.2929085f, -0.0618641f, -0.0103220f, +0.0523390f, -0.1298930f, -0.1428687f, -0.0980726f,
  +0.2169134f, +0.0210611f, +0.0835793f, -0.2614994f, +0.0671731f, -0.0188245f, +0.0952180f, -0.0761319f,
  +0.0556114f, -0.0370502f, -0.0422518f, -0.1462959f, -0.3190278f, +0.1019724f, +0.1232915f, +0.0785794f,
  -0.1607274f, -0.2573038f, -0.2447883f, +0.1815833f, +0.1640855f, +0.1037464f, +0.1081329f, +0.0239779f,
  -0.3410459f, -0.0997423f, -0.1355100f, +0.0153231f, +0.0438075f, +0.0228836f, +0.1716190f, +0.1551854f,
  -0.0825500f, -0.0130671f, +0.0400122f, -0.0046284f, +0.1504904f, +0.1117735f, +0.1357508f, +0.0806460f,
  +0.2514213f, -0.1674266f, +0.0833508f, +0.0211923f, -0.4970845f, +0.0464047f, +0.0227007f, -0.1631081f,
  +0.0976171f, -0.0454486f, -0.0093684f, -0.1448174f, -0.2073451f, -0.1843343f, -0.0647313f, +0.1535245f,
  -0.2029769f, +0.1623968f, -0.0580530f, +0.3852407f, +0.1933931f, -0.0355689f, +0.3344184f, -0.1412482f,
  -0.1488995f, -0.0224345f, -0.2502994f, +0.0925821f, +0.2337239f, -0.1052603f, -0.1942745f, +0.1027444f,
  +0.4844896f, +0.0950004f, -0.0426602f, +0.0569189f, -0.1426761f, +0.2604015f, +0.1926309f, +0.2578881f,
  +0.1749424f, +0.2461939f, +0.1821244f, +0.0980431f, +0.0144654f, -0.1537152f, +0.1056703f, -0.0222580f,
  +0.0167141f, -0.0249368f, +0.0484805f, -0.0160231f, +0.0236032f, +0.1029047f, +0.0767779f, -0.1700547f,
  -0.1739076f, -0.0184151f, +0.0231472f, +0.0860146f, -0.0397886f, +0.1344334f, -0.3022229f, -0.2670470f,
  -0.0134432f, -0.0177920f, +0.1287086f, +0.0162996f, -0.2487883f, +0.0963221f, +0.0626061f, +0.1770864f,
  -0.0587604f, +0.2297970f, -0.0790851f, -0.0839222f, -0.1366820f, +0.2151383f, -0.0532316f, +0.0602120f,
  +0.0543306f, +0.1267562f, -0.1639115f, -0.1356097f, +0.0445852f, +0.0757309f, -0.0482586f, +0.1265160f,
  -0.0468761f, +0.2189986f, +0.0265816f, -0.1748365f, -0.0011315f, -0.1482389f, -0.0576243f, -0.0889176f,
  +0.0106629f, +0.0922231f, -0.4255270f, +0.2790291f, -0.0200846f, -0.1270066f, +0.0132366f, -0.0402189f,
  +0.1128524f, +0.1075876f, +0.1372246f, -0.3676558f, +0.2618566f, -0.0402670f, -0.1400524f, +0.2228476f,
  -0.3455257f, -0.3923000f, +0.2779930f, +0.5426855f, -0.2516447f, -0.2165571f, -0.2822577f, -0.0370477f,
  +0.0593693f, +0.2339283f, -0.2488305f, +0.2085681f, -0.5849522f, -0.0107628f, +0.1164263f, -0.0780761f,
  +0.0179400f, +0.0831442f, -0.0897826f, +0.0597728f, +0.0327049f, +0.0815183f, +0.1885096f, +0.0449625f,
  -0.0160971f, -0.0609991f, -0.0207329f, +0.1678848f, +0.1248538f, -0.0574283f, -0.0731005f, -0.0547054f,
  +0.1556466f, -0.1099987f, +0.1138228f, -0.0666465f, +0.2133722f, -0.0698036f, -0.1300954f, -0.0384845f
);

const float biases[4] = float[4](
  -0.0058201f, +0.0048946f, +0.0374353f, -0.0612868f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer56 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2860652f, +0.1701122f, +0.2472725f, +0.2705525f, -0.0100633f, -0.2696915f, +0.2325175f, -0.0319402f,
  -0.0240616f, +0.2777019f, -0.0216077f, -0.1418379f, -0.1979272f, +0.2484773f, +0.0155288f, -0.0671835f,
  +0.0213050f, +0.0390662f, -0.1042101f, -0.0670481f, +0.0582503f, +0.3061165f, +0.0221783f, +0.0588447f,
  +0.1251647f, +0.0529511f, +0.1137124f, -0.2263541f, -0.0841538f, +0.1894746f, +0.1177710f, -0.2241351f,
  +0.0032855f, +0.0310694f, +0.0816449f, -0.3252277f, -0.1242926f, +0.0781544f, +0.0356396f, -0.1269625f,
  -0.0968365f, -0.0652559f, -0.0505830f, -0.3123267f, -0.0601371f, -0.1272030f, +0.0523357f, +0.2680427f,
  -0.1697447f, -0.1863178f, +0.0143044f, +0.1533104f, +0.1981166f, -0.1818545f, -0.0471789f, +0.0508021f,
  -0.2398394f, +0.1098852f, -0.3356934f, -0.0243936f, +0.0001967f, +0.1383954f, +0.0823130f, +0.3582044f,
  -0.0820311f, +0.0550685f, -0.0622126f, -0.1019313f, -0.2228311f, +0.0216289f, -0.0790852f, -0.0705331f,
  -0.0045848f, +0.1098821f, -0.0044738f, +0.1417093f, +0.2552288f, +0.1434383f, -0.0001007f, +0.5666813f,
  +0.0241779f, -0.0340920f, -0.1352596f, -0.1580837f, -0.2480638f, +0.0586772f, +0.0029400f, -0.1094979f,
  +0.1028522f, +0.0432340f, +0.1229613f, +0.0469848f, +0.0043374f, +0.0795303f, -0.2363076f, +0.2499747f,
  +0.0828835f, +0.2870727f, +0.0877803f, -0.2357971f, +0.0582703f, -0.0435577f, -0.0833606f, +0.2360867f,
  +0.1097629f, +0.2670548f, +0.0448599f, -0.3012364f, -0.1457104f, +0.0215068f, +0.1361990f, -0.0383575f,
  +0.1956203f, +0.0231529f, -0.2895270f, +0.1169128f, +0.1283118f, -0.1085257f, +0.1277739f, +0.0474562f,
  +0.0162158f, -0.0113400f, +0.2029219f, +0.2527111f, +0.0252059f, -0.2922427f, +0.0377126f, +0.1404098f,
  -0.0973253f, -0.0321189f, -0.1209904f, +0.1820982f, -0.0717168f, -0.0943070f, +0.2702360f, -0.1731639f,
  -0.0433415f, -0.0528965f, +0.0974686f, +0.3024257f, +0.1976722f, -0.1155882f, +0.1611046f, +0.0862618f,
  -0.0873253f, +0.3479740f, -0.1438771f, -0.1956293f, +0.1265796f, -0.0993138f, +0.0799371f, +0.1428557f,
  +0.0074592f, -0.0591685f, -0.1796352f, +0.2251236f, +0.0930037f, -0.1146894f, +0.2492463f, +0.2081028f,
  -0.0926457f, +0.1732516f, +0.0864745f, -0.0795608f, +0.0247507f, +0.0996535f, -0.1635386f, -0.2751046f,
  -0.1803412f, +0.3971856f, -0.0879199f, -0.1324749f, +0.0320389f, -0.0774074f, -0.0470689f, -0.2264456f,
  -0.0226076f, -0.1237565f, -0.0336580f, -0.1760858f, +0.2150369f, -0.1884691f, -0.0356028f, +0.1682140f,
  -0.0023352f, -0.0213922f, +0.0207428f, +0.1410731f, -0.0607031f, -0.1146679f, -0.0998205f, -0.4131843f,
  +0.0363577f, -0.1802260f, +0.1881269f, -0.2142293f, -0.0044914f, -0.1268796f, +0.0770939f, -0.3894015f,
  -0.1642687f, -0.0410135f, +0.0045421f, +0.2204177f, -0.0074039f, -0.2062825f, +0.0619003f, +0.2315560f,
  +0.0834480f, -0.1038487f, +0.1211506f, -0.1287783f, +0.0734474f, -0.0227680f, -0.1291251f, +0.0677457f,
  -0.0354559f, +0.3780650f, +0.0135074f, +0.1284596f, +0.0118150f, +0.1254926f, +0.0799656f, +0.7310274f,
  -0.0604214f, +0.0254323f, -0.0666916f, -0.0047162f, +0.1737513f, +0.1031382f, +0.1943775f, +0.1166537f,
  +0.0933739f, -0.2144461f, +0.0265162f, +0.0793154f, +0.0412268f, +0.1516634f, +0.1385602f, -0.0635031f,
  +0.2910336f, -0.0828022f, +0.1741228f, +0.0811959f, +0.0650712f, +0.0849878f, +0.0648393f, -0.1118971f,
  +0.4019178f, +0.0006624f, +0.0317492f, +0.2355257f, -0.2876592f, +0.1294950f, -0.1614941f, +0.4045512f,
  -0.0993513f, +0.0894468f, +0.1490584f, -0.0233255f, +0.2214328f, +0.1797518f, -0.2077885f, -0.1148029f,
  +0.1059908f, +0.1459741f, -0.2662586f, -0.0119614f, +0.2020103f, +0.0914227f, -0.0588238f, -0.1617551f,
  +0.1109971f, +0.0021692f, +0.0634789f, -0.1577163f, +0.2125363f, -0.0515289f, -0.2333252f, +0.0129779f,
  +0.1962296f, -0.3193568f, -0.3085789f, -0.0154864f, -0.0418168f, +0.0672944f, +0.0153504f, -0.1269821f
);

const float biases[4] = float[4](
  +0.0006974f, -0.0713613f, +0.0577828f, +0.0473309f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer56 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0969700f, -0.1086634f, -0.0051063f, +0.0696980f, -0.1202326f, +0.2954778f, -0.2157487f, +0.5423791f,
  +0.2337599f, -0.1999546f, -0.1007408f, +0.0022568f, +0.0077426f, -0.1036397f, +0.0388334f, -0.3684419f,
  +0.1482842f, -0.0743771f, +0.2124800f, +0.1283702f, -0.0581208f, -0.1316606f, -0.1270187f, +0.0490430f,
  +0.2917209f, -0.2484044f, +0.0270650f, -0.2594213f, -0.1620088f, -0.0685366f, +0.0483852f, +0.1822852f,
  +0.4252715f, -0.3312648f, +0.1529055f, -0.1399282f, -0.0425712f, +0.3334468f, +0.3270853f, -0.2265557f,
  +0.0526811f, -0.0278491f, +0.3050554f, -0.1147350f, -0.2308154f, +0.1589568f, +0.2386356f, -0.0348135f,
  +0.3144723f, -0.0813080f, +0.0256703f, -0.0454031f, -0.0539307f, +0.1208098f, -0.1930402f, -0.0634740f,
  +0.2875159f, -0.2845132f, +0.1308317f, +0.0888040f, -0.0424804f, -0.2329668f, +0.1254881f, +0.1717737f,
  -0.0401845f, +0.0625146f, +0.1377079f, +0.0700401f, -0.0297305f, +0.0501637f, -0.1889351f, -0.1922542f,
  +0.2198093f, +0.2233481f, +0.0659991f, -0.0003224f, -0.0571388f, -0.0739938f, +0.0876710f, +0.0625418f,
  -0.0311388f, +0.1514768f, +0.0154142f, +0.2440793f, -0.0944666f, -0.0858582f, -0.0815830f, -0.1996852f,
  -0.1775423f, +0.0018434f, +0.0365970f, -0.1024837f, -0.0707155f, +0.1472193f, -0.0645635f, -0.1753231f,
  +0.2406490f, -0.1196734f, -0.0307404f, -0.3054039f, +0.0782554f, -0.0952189f, -0.2009650f, -0.2452000f,
  +0.2167215f, -0.0941832f, +0.0847839f, -0.1966718f, -0.0793548f, -0.1544255f, +0.1257020f, -0.0013225f,
  -0.1211626f, +0.1203449f, +0.2346280f, +0.0827172f, +0.1808781f, +0.0879135f, -0.1882977f, +0.1056992f,
  +0.1905029f, +0.1204643f, -0.1188786f, -0.0910690f, +0.0282352f, -0.0036153f, -0.0637753f, +0.2306465f,
  +0.2433981f, -0.0383930f, +0.0986700f, +0.1793284f, +0.3041866f, -0.0279364f, -0.0172913f, -0.0092200f,
  +0.0120571f, -0.0362426f, +0.3941934f, +0.1405949f, +0.1393186f, +0.0676103f, +0.1377735f, -0.1341670f,
  +0.0513120f, -0.1815093f, +0.0102747f, +0.0059090f, +0.1140745f, -0.1405417f, -0.0014188f, -0.1347292f,
  -0.1613845f, -0.1973710f, -0.2624874f, +0.1207552f, +0.2199961f, -0.2463529f, +0.2042476f, -0.2102401f,
  +0.1044840f, -0.1896119f, +0.0402571f, +0.2151714f, -0.0205223f, +0.0100442f, -0.0897685f, -0.2535711f,
  -0.0058248f, +0.0384199f, +0.0199775f, -0.1625739f, -0.0303721f, -0.0663337f, -0.0864116f, +0.0348740f,
  -0.2985585f, +0.0451333f, -0.1984819f, +0.0121525f, -0.0398633f, -0.1235347f, -0.2122771f, -0.1180789f,
  +0.2315788f, -0.0794808f, +0.2333475f, +0.3018865f, +0.3517521f, +0.0076299f, -0.0022276f, +0.2251731f,
  -0.0359053f, +0.1929827f, +0.1553409f, +0.2265231f, +0.0561450f, +0.2254062f, +0.0588940f, +0.0331953f,
  +0.2471358f, +0.1839470f, -0.0258083f, -0.1345367f, +0.1036212f, +0.1536344f, -0.1760230f, -0.1232975f,
  -0.0410592f, -0.0392766f, -0.0680138f, -0.0727396f, +0.2489505f, +0.1421107f, +0.2228197f, +0.0567243f,
  -0.1342568f, +0.0297686f, -0.1588150f, +0.0634197f, -0.2842361f, +0.2604525f, -0.0439653f, -0.0267854f,
  +0.0858380f, +0.1478011f, -0.0287143f, -0.1120294f, +0.2072421f, +0.0713028f, -0.0230724f, +0.3787156f,
  -0.4177413f, -0.0593015f, -0.0164282f, +0.1461522f, +0.0988275f, +0.1094978f, +0.1656563f, +0.2492695f,
  +0.3588467f, -0.0258557f, +0.3368661f, -0.0138462f, -0.1028227f, +0.1136868f, +0.0371464f, +0.2163103f,
  +0.1447938f, -0.2479523f, +0.1378426f, -0.1637950f, +0.1954689f, +0.3873019f, +0.0694764f, -0.5073143f,
  -0.2064041f, -0.1158212f, -0.1979296f, -0.0067734f, -0.2492634f, -0.0617352f, -0.3856016f, +0.2223628f,
  +0.0425917f, +0.0929749f, +0.1071215f, -0.0203075f, -0.2177470f, -0.0118476f, +0.1050624f, +0.3206005f,
  +0.0301323f, -0.1052761f, +0.0000038f, -0.1718064f, +0.0629233f, -0.1469038f, +0.1531929f, -0.1013016f,
  -0.1770860f, -0.3807699f, -0.1355310f, +0.0022693f, +0.2216424f, -0.0983447f, +0.1139633f, +0.3674854f
);

const float biases[4] = float[4](
  +0.0479760f, +0.0491492f, -0.0649817f, -0.0537960f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer57 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1235923f, +0.0664276f, +0.2060026f, -0.0274844f, +0.0850844f, -0.1518517f, +0.0762507f, +0.0484640f,
  -0.0113699f, +0.0232107f, +0.1700185f, +0.1186611f, +0.0398387f, +0.0650008f, +0.0148541f, -0.1402255f,
  +0.0976873f, -0.1169322f, +0.3057443f, -0.0867684f, -0.0597277f, -0.3136940f, -0.1088250f, +0.4646350f,
  +0.0147099f, -0.2920821f, -0.0632116f, +0.0148208f, -0.0996758f, -0.1215805f, +0.1737237f, -0.0781636f,
  -0.2430767f, -0.1877832f, -0.0379367f, -0.0040723f, +0.1562180f, +0.0663619f, -0.0684986f, -0.0836511f,
  -0.2067922f, -0.0796092f, -0.0533744f, -0.0385045f, +0.1533698f, -0.0077709f, +0.0368718f, +0.3328274f,
  -0.0692026f, +0.0363665f, -0.2140544f, -0.2132795f, +0.0480016f, -0.0396276f, +0.1341941f, -0.0318867f,
  +0.1215560f, -0.0527689f, -0.2483885f, -0.1227858f, +0.1129424f, +0.2254492f, -0.0596912f, -0.0800986f,
  -0.0501032f, -0.1293911f, -0.0646686f, -0.3296924f, +0.0888167f, -0.0287835f, -0.0102498f, -0.0101054f,
  +0.0561294f, +0.1206779f, +0.0244993f, +0.1443778f, +0.0432584f, +0.0311474f, +0.0823061f, -0.1541122f,
  -0.1632477f, +0.0305711f, +0.2486760f, +0.1787905f, +0.1821358f, +0.2941912f, -0.0843776f, -0.0449634f,
  +0.1730759f, +0.1322107f, -0.0180363f, +0.0353833f, +0.1287323f, -0.0768866f, -0.0824787f, -0.2421699f,
  +0.3210318f, +0.1926451f, +0.1419013f, -0.0484220f, +0.0702262f, +0.3259331f, -0.0242457f, +0.2773050f,
  -0.0099369f, -0.2184180f, +0.1340927f, +0.4151600f, -0.0454226f, -0.1276848f, -0.0045655f, -0.3275895f,
  -0.0239764f, +0.1911666f, +0.0345576f, +0.2398770f, +0.1761916f, +0.1488145f, -0.2076411f, -0.1337806f,
  -0.2011892f, -0.0117142f, -0.0323357f, +0.2205583f, -0.0485998f, -0.2560109f, +0.2686787f, -0.0908801f,
  +0.1915120f, +0.1633010f, -0.0053105f, +0.2248914f, +0.4555081f, -0.0206542f, +0.0555586f, +0.0312095f,
  +0.2602584f, -0.0430511f, +0.0432698f, +0.1176406f, +0.0337746f, -0.1362511f, -0.0148135f, -0.0017764f,
  +0.0026810f, -0.2624536f, +0.0486103f, -0.1682492f, +0.1859993f, -0.1883924f, -0.1196112f, -0.1447858f,
  -0.0145212f, -0.1325146f, -0.0170830f, -0.3604197f, +0.1811590f, -0.1234317f, +0.0358962f, +0.1023096f,
  +0.0010598f, +0.1287584f, -0.1293766f, +0.0964918f, -0.1247149f, -0.0607829f, -0.1392733f, +0.0610416f,
  +0.1157708f, +0.0491271f, +0.1059154f, +0.1671135f, -0.0456160f, -0.1400363f, -0.2597761f, +0.3197058f,
  +0.0404104f, -0.2948630f, -0.4005777f, +0.3289916f, -0.4978887f, -0.1548429f, -0.0605572f, -0.3496402f,
  -0.0626219f, -0.1713466f, -0.1228042f, +0.0475520f, +0.2268213f, -0.0539076f, +0.0073661f, -0.0016205f,
  +0.1308286f, +0.0295638f, +0.1665591f, -0.0259899f, +0.4598302f, +0.0062692f, +0.2773114f, +0.3209854f,
  +0.0915969f, +0.1776236f, +0.5283572f, +0.0434617f, -0.2892281f, -0.1627197f, +0.2132233f, -0.2457860f,
  +0.1574410f, +0.2043310f, -0.0327376f, +0.3623986f, -0.0507825f, +0.1488526f, -0.1287646f, +0.1225930f,
  +0.0632080f, +0.0653909f, -0.2728738f, +0.0093590f, +0.2555422f, -0.2212065f, -0.1594094f, +0.3476912f,
  -0.1094373f, +0.1508982f, -0.0388753f, +0.1031763f, -0.0066973f, -0.0554635f, -0.5801518f, -0.0973243f,
  -0.0777189f, -0.0148290f, +0.0762893f, -0.0837845f, -0.1513550f, +0.1202950f, -0.1100475f, +0.1618087f,
  +0.0315813f, -0.1301976f, +0.0815821f, +0.1593827f, +0.1506927f, -0.0190893f, -0.1260063f, -0.0622916f,
  +0.4222372f, +0.1428985f, +0.1131931f, -0.1369966f, +0.3116099f, -0.2879178f, -0.1881752f, -0.0707025f,
  +0.1071601f, -0.3662259f, -0.1575845f, -0.3232574f, -0.2045788f, -0.2362404f, +0.5881430f, -0.0589870f,
  -0.2464641f, +0.0170103f, +0.0345213f, +0.0435058f, +0.1672950f, -0.3424183f, +0.1133092f, +0.1909521f,
  -0.3974659f, -0.1820518f, -0.3653845f, +0.2875968f, -0.2640977f, -0.1498631f, -0.1482269f, +0.0392705f,
  -0.4344501f, -0.1254273f, -0.0971070f, -0.0532511f, +0.3175161f, -0.1806872f, +0.0911583f, +0.1034094f
);

const float biases[4] = float[4](
  -0.0117768f, +0.0383559f, -0.0568723f, +0.0362288f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer57 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0746825f, -0.2618594f, -0.1757819f, +0.4433685f, +0.0859039f, +0.4237677f, +0.0307565f, +0.2896652f,
  +0.1345060f, -0.2529776f, +0.0411496f, +0.0535898f, +0.1062723f, +0.2033778f, +0.1323367f, +0.0737037f,
  +0.2194417f, +0.0570371f, +0.0082667f, +0.0938104f, +0.0547540f, +0.1352057f, +0.1766337f, +0.1954641f,
  -0.0312744f, +0.2626066f, -0.0798566f, -0.3250737f, -0.0464665f, +0.1501649f, +0.1425065f, +0.3167747f,
  +0.0535669f, +0.3338709f, -0.1065408f, +0.0434482f, -0.3772747f, -0.1017026f, -0.0439161f, -0.3081067f,
  -0.1269058f, -0.0866079f, -0.0079010f, -0.1607680f, -0.2593281f, +0.0288822f, +0.0061916f, -0.1434020f,
  -0.3644977f, +0.2248410f, +0.0624380f, -0.0848391f, +0.0556845f, -0.4675363f, -0.2960573f, -0.3054577f,
  -0.1161483f, +0.0950720f, +0.0119747f, -0.2820867f, -0.0164141f, +0.0509879f, -0.0500529f, -0.1462406f,
  -0.0465958f, +0.0273190f, +0.0078919f, -0.0874178f, +0.1153076f, +0.1753014f, -0.1297458f, -0.0084323f,
  -0.0044928f, -0.1568739f, +0.0476728f, -0.1720168f, -0.1096431f, -0.0122296f, +0.0874591f, -0.1724115f,
  -0.0120303f, +0.0521372f, +0.0466280f, -0.0160384f, -0.1659720f, +0.3385986f, -0.0749030f, +0.1033806f,
  +0.2016840f, +0.0453954f, +0.0583303f, -0.1922195f, -0.2081432f, +0.1627458f, +0.1826511f, +0.1848765f,
  -0.0881352f, -0.1765177f, -0.0129202f, +0.0926007f, +0.1805501f, +0.3221861f, -0.4236661f, -0.4076871f,
  +0.0835823f, +0.0509937f, -0.0161957f, +0.1359244f, +0.1320327f, -0.0464000f, -0.5646899f, +0.0226054f,
  +0.0062213f, -0.0474725f, +0.1216527f, +0.1955284f, -0.1963477f, -0.0013523f, +0.1645971f, +0.2061366f,
  +0.2746464f, +0.1154607f, -0.0112168f, +0.0277392f, -0.0773130f, -0.1193453f, +0.2049040f, +0.2587620f,
  -0.2063674f, +0.0051659f, +0.0992500f, -0.1972565f, -0.0730973f, -0.0605116f, -0.3301693f, +0.1897303f,
  -0.0391179f, +0.2779642f, -0.0788509f, +0.1599818f, -0.0294119f, -0.1393231f, -0.1047347f, +0.2555627f,
  +0.2353471f, -0.0322217f, -0.2652453f, +0.0497750f, -0.0935836f, -0.0750587f, +0.1867170f, +0.0602589f,
  +0.0256816f, -0.2636186f, -0.2225050f, +0.1847083f, -0.0174819f, -0.1317352f, -0.0863575f, +0.0698923f,
  +0.1146749f, -0.0906436f, -0.1393348f, +0.0425056f, +0.0913537f, -0.0373044f, +0.1882976f, -0.1344695f,
  -0.0451293f, +0.0099688f, -0.0772137f, +0.2868633f, -0.0166863f, -0.0038930f, -0.0993621f, -0.1481075f,
  +0.5489391f, +0.0491284f, +0.1446342f, -0.3383418f, -0.2398099f, -0.4323684f, -0.0496304f, -0.1113678f,
  +0.5477389f, -0.1139781f, +0.0835429f, -0.1716133f, -0.2043868f, -0.3640730f, +0.0892376f, +0.0530630f,
  -0.0836635f, -0.0097547f, +0.1999037f, -0.1354183f, +0.2408108f, +0.1326224f, -0.1359829f, +0.1616999f,
  -0.1472168f, -0.0205578f, +0.0489225f, +0.3233930f, +0.0464907f, +0.0353059f, -0.3508527f, +0.0018625f,
  -0.2994920f, -0.1138458f, +0.3112038f, +0.3433076f, -0.1326034f, +0.1302386f, -0.1459569f, +0.0609037f,
  -0.0954778f, -0.0107701f, -0.1169500f, -0.1907950f, +0.1576592f, -0.1452956f, -0.0616728f, -0.0165299f,
  -0.1570175f, +0.0713650f, -0.0981029f, -0.0488705f, +0.0135856f, -0.1354694f, -0.1347839f, +0.1132762f,
  -0.0853887f, +0.1375824f, -0.1619896f, +0.1356212f, +0.1963845f, -0.1110021f, +0.1222871f, +0.0637689f,
  -0.0899541f, -0.0926278f, +0.1658592f, +0.3280112f, -0.2511724f, +0.0217383f, +0.0389118f, +0.0253277f,
  -0.1319155f, +0.0027357f, -0.4261789f, +0.3057594f, -0.0432569f, +0.1158960f, -0.0327376f, +0.0300306f,
  -0.0062545f, +0.0444956f, +0.0244563f, -0.1228910f, -0.1927579f, -0.0022904f, +0.0356659f, -0.2710539f,
  -0.0613471f, +0.0533153f, +0.0850211f, +0.1902833f, -0.3083355f, +0.0958140f, -0.1767542f, -0.6003159f,
  -0.1641120f, -0.0264101f, -0.2737550f, +0.0332137f, -0.1094756f, -0.0297086f, -0.0739296f, -0.2885248f,
  -0.0240561f, -0.1515367f, +0.1528030f, +0.2409063f, +0.0487886f, -0.0245630f, +0.0277139f, +0.0029236f
);

const float biases[4] = float[4](
  +0.0114009f, +0.1423914f, +0.0278498f, -0.2294661f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer58 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0521833f, +0.0802907f, -0.1495687f, -0.2034017f, -0.1075847f, +0.1851433f, -0.0315157f, +0.0264230f,
  -0.0427175f, -0.1273336f, +0.3803684f, -0.2123985f, -0.0760773f, -0.1376624f, +0.1084819f, +0.0319013f,
  +0.0180569f, +0.0063698f, +0.0779304f, -0.1438057f, +0.1976374f, -0.1472377f, -0.0240178f, +0.1157813f,
  -0.0746003f, -0.1947597f, +0.2973162f, -0.3770656f, +0.0976851f, +0.3065214f, -0.0616115f, -0.0283094f,
  -0.2974157f, -0.1633009f, +0.0827695f, +0.0305683f, -0.0439747f, -0.1325007f, -0.2827466f, +0.2938581f,
  -0.2305799f, -0.1479287f, +0.2514832f, +0.0276400f, -0.1092394f, -0.0211757f, -0.0298119f, -0.0123956f,
  +0.4303649f, -0.2198092f, -0.0285557f, +0.2515180f, -0.1704213f, +0.0126558f, +0.2645810f, +0.1098920f,
  +0.2659829f, +0.0353818f, -0.1579264f, +0.0445108f, -0.1538985f, -0.0655511f, +0.0581562f, +0.1775746f,
  -0.0775675f, -0.0313853f, -0.1105940f, -0.2588049f, -0.2995347f, -0.0450433f, +0.0437460f, -0.2471156f,
  -0.0692860f, +0.0384819f, +0.0344987f, -0.0048610f, +0.1324287f, +0.0036834f, -0.1050069f, -0.0376429f,
  -0.1532049f, +0.0762631f, -0.2217164f, -0.0497692f, +0.1674421f, -0.1078422f, +0.0783171f, +0.2571853f,
  -0.2996748f, -0.0733289f, -0.1459284f, +0.1029420f, -0.1892607f, +0.1106045f, +0.0885927f, +0.1655293f,
  -0.3645483f, -0.0510556f, +0.1574659f, +0.3213595f, +0.1358828f, +0.0046403f, +0.2487344f, -0.1510077f,
  -0.0769464f, +0.2846312f, +0.1483894f, +0.0455393f, -0.0914161f, -0.0428609f, +0.1132575f, -0.0064416f,
  +0.0317614f, +0.1778554f, +0.3609264f, +0.1698908f, +0.1818942f, -0.1043769f, -0.1982609f, +0.1062083f,
  -0.0194279f, -0.2247052f, +0.0643270f, +0.0224410f, +0.0438245f, +0.1008459f, -0.1139649f, -0.1820623f,
  +0.0166778f, -0.2412793f, +0.2428311f, -0.2976777f, -0.0021895f, -0.0207977f, +0.0106811f, -0.0477606f,
  -0.1697039f, +0.2522848f, +0.2997690f, -0.0272404f, +0.0870438f, -0.1704038f, -0.1821602f, -0.0862270f,
  -0.1658795f, -0.1706255f, +0.1936131f, -0.3566807f, -0.0153787f, +0.2914937f, -0.1060722f, -0.1615488f,
  +0.1803570f, -0.0874895f, +0.0847158f, -0.1165122f, +0.2501130f, -0.2991955f, -0.0977064f, +0.1457473f,
  +0.0725118f, -0.1519056f, -0.3169979f, -0.0056115f, -0.2160219f, -0.1679879f, +0.1387422f, +0.0234252f,
  +0.1131124f, +0.0751305f, -0.0746839f, -0.0393252f, +0.0450888f, -0.1354240f, +0.1978839f, +0.0029334f,
  -0.1292472f, -0.1413003f, +0.1319652f, -0.2975907f, +0.2548611f, -0.1796196f, +0.1582835f, +0.3036081f,
  +0.0405093f, +0.1219094f, -0.1467372f, -0.0653959f, +0.0586612f, -0.0963902f, +0.1465678f, -0.0078584f,
  +0.0743062f, +0.1684588f, +0.1003778f, +0.0960207f, +0.0341086f, -0.0734775f, -0.1304393f, +0.0324174f,
  +0.2069228f, -0.0580638f, +0.2253748f, +0.0163764f, -0.0111588f, -0.0504051f, -0.1583851f, +0.2110477f,
  +0.2851682f, -0.1547245f, -0.1127149f, +0.1100311f, +0.0754970f, +0.1534923f, +0.1709635f, +0.0656572f,
  +0.2931997f, +0.2300585f, -0.0588528f, +0.2593560f, -0.0835099f, -0.3032166f, +0.3620051f, -0.3201255f,
  -0.1969632f, +0.1169714f, +0.3206454f, +0.1284284f, +0.3023124f, +0.0671123f, +0.3322099f, -0.2406954f,
  -0.0693060f, -0.1631768f, +0.0329103f, +0.1270347f, +0.0320677f, -0.1860179f, +0.1549819f, -0.2350569f,
  +0.0602284f, +0.2016256f, +0.3784857f, +0.0391056f, +0.0577417f, -0.1233282f, -0.3722416f, -0.0368339f,
  -0.0359676f, -0.1676657f, +0.0289764f, +0.4915635f, -0.0731211f, -0.0750567f, +0.0228508f, +0.2088472f,
  +0.1824034f, +0.2820701f, -0.1370815f, +0.2888661f, +0.3583426f, +0.0006357f, +0.0307731f, -0.0064624f,
  +0.0882292f, +0.0667220f, -0.1990302f, +0.2847837f, -0.1492151f, +0.1247640f, +0.2741226f, -0.0776577f,
  +0.3059693f, -0.1097159f, -0.0202980f, +0.1493658f, -0.0910882f, +0.0240839f, +0.1674890f, +0.2386279f,
  +0.4292935f, -0.0551128f, +0.0442678f, +0.1291554f, -0.3524028f, -0.0136274f, -0.1351256f, +0.0007434f
);

const float biases[4] = float[4](
  -0.0283257f, -0.0588549f, +0.0298100f, +0.0478308f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer58 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0263171f, +0.0166433f, +0.1016206f, +0.1732076f, +0.1351437f, -0.0822393f, +0.1294730f, +0.0679494f,
  -0.0076644f, -0.4319454f, +0.4495190f, +0.0924237f, +0.3242426f, -0.3620256f, -0.0288257f, +0.3072269f,
  +0.1082580f, -0.0770376f, +0.1958766f, +0.1320944f, +0.1243497f, +0.0542049f, -0.2350153f, +0.4110096f,
  +0.0509772f, -0.1338591f, -0.0760813f, +0.4874274f, +0.1536094f, +0.1198258f, -0.1690635f, +0.1015334f,
  +0.1095491f, +0.1512204f, +0.2259342f, +0.1265652f, +0.1583299f, -0.1682724f, -0.0901407f, -0.1193144f,
  +0.0115343f, +0.0639415f, +0.1488876f, +0.0452187f, -0.0324805f, -0.2766492f, -0.1738435f, -0.0859657f,
  +0.0835430f, -0.2143313f, +0.3483072f, -0.0164307f, +0.2925431f, -0.0013448f, +0.1489758f, -0.1813661f,
  -0.0029823f, +0.3040515f, +0.0355560f, +0.2040806f, +0.0079624f, +0.1276753f, +0.3694741f, +0.4915403f,
  -0.0998014f, +0.1819974f, +0.0121891f, -0.0673901f, +0.0382231f, -0.1187202f, -0.0045382f, +0.1968308f,
  +0.0049521f, +0.2609906f, -0.0626506f, +0.0977183f, -0.1891343f, +0.0761134f, -0.3458598f, -0.0759165f,
  -0.0207890f, -0.1636710f, +0.4087194f, -0.1921286f, -0.0053792f, -0.1288531f, -0.2180270f, -0.4804635f,
  +0.1612310f, -0.0071808f, +0.0859308f, +0.0250089f, +0.2433282f, +0.4182305f, -0.0808249f, +0.0191486f,
  -0.0753678f, -0.1431809f, -0.0916204f, +0.0107928f, +0.0267753f, +0.0905636f, -0.1141803f, -0.0885889f,
  +0.0443093f, +0.1511951f, -0.0780524f, +0.0747058f, +0.0496378f, +0.0656595f, -0.1926821f, -0.0346877f,
  +0.1393824f, -0.0746745f, +0.2351983f, -0.1629839f, -0.2286628f, -0.1067806f, -0.2072666f, -0.0747611f,
  +0.0191926f, -0.0498480f, -0.1093972f, +0.1951025f, +0.0787043f, +0.1996173f, +0.2151332f, +0.0292991f,
  -0.0260789f, -0.1990959f, +0.2237525f, -0.0593002f, -0.1958781f, +0.0452395f, +0.2300718f, -0.0023474f,
  -0.1280989f, -0.1450610f, +0.1171370f, -0.2425525f, -0.0403563f, +0.0746010f, -0.0814379f, +0.1254039f,
  +0.0444215f, +0.0363548f, +0.0471354f, +0.3307534f, -0.0293758f, -0.1337713f, +0.0010605f, -0.0939642f,
  +0.1426052f, -0.1564440f, -0.0385165f, +0.1823213f, +0.0705301f, +0.0243903f, -0.0784046f, -0.1143838f,
  +0.4949381f, -0.2067194f, -0.0747029f, +0.1545690f, +0.1687138f, -0.0219595f, -0.0301780f, +0.4489629f,
  -0.0943162f, +0.3262020f, -0.0989610f, -0.1223617f, -0.0294787f, -0.2339490f, -0.0209059f, +0.0325417f,
  +0.1441489f, +0.0073360f, -0.2020362f, +0.0814658f, +0.1130053f, +0.1542792f, +0.3825551f, -0.0823304f,
  +0.2503357f, -0.0193263f, -0.0442229f, -0.1655512f, +0.0400092f, +0.1800048f, -0.0262596f, +0.0700080f,
  -0.1381323f, +0.0617760f, -0.0305765f, +0.0078790f, -0.2136185f, -0.0549544f, -0.0257252f, -0.0943492f,
  -0.2988162f, -0.0655166f, +0.0578348f, +0.0671950f, -0.2116463f, +0.0686627f, -0.2092803f, -0.0042448f,
  -0.0447480f, -0.0040736f, -0.1139220f, +0.1095849f, -0.0425271f, +0.0715301f, -0.0574552f, +0.0290159f,
  +0.2205988f, -0.1212094f, -0.1194018f, -0.0898283f, +0.0133000f, +0.0693854f, -0.0271566f, -0.1456628f,
  +0.0537660f, -0.1487845f, +0.1340350f, +0.0841772f, -0.0177173f, +0.0399171f, -0.0688942f, -0.0005406f,
  -0.2465605f, +0.3542500f, +0.1863529f, +0.2007917f, +0.2667397f, -0.4234563f, +0.0136165f, +0.1493974f,
  -0.0004098f, -0.0657485f, -0.1268913f, -0.3854885f, +0.2230069f, -0.2226039f, -0.1252319f, +0.4584999f,
  +0.3062433f, -0.1421963f, -0.0720064f, -0.1298907f, -0.2475176f, +0.3095801f, -0.1333569f, +0.3027215f,
  +0.0841439f, -0.0932276f, +0.1017218f, -0.1162673f, -0.0697806f, -0.0270322f, -0.3071277f, -0.0743529f,
  -0.1333392f, -0.0630077f, -0.0741193f, -0.0017551f, +0.0925439f, -0.0681700f, +0.3315999f, +0.1603740f,
  -0.1115090f, -0.0047043f, +0.2456648f, +0.0003583f, -0.1702532f, -0.1953826f, +0.1194034f, +0.1619331f,
  -0.0332004f, -0.0452107f, +0.3175484f, -0.3221409f, -0.3118178f, +0.3353528f, +0.0269508f, +0.1959965f
);

const float biases[4] = float[4](
  -0.0165968f, +0.0349464f, -0.0497912f, -0.0553435f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer59 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0374573f, -0.0965714f, -0.0579111f, -0.0059042f, +0.2416645f, -0.0638428f, +0.1750780f, -0.1497012f,
  +0.0002177f, +0.2709086f, +0.1085920f, -0.1442298f, +0.1925420f, -0.2185353f, +0.0093986f, -0.3993586f,
  -0.2466006f, +0.0079013f, -0.2645916f, +0.0972631f, +0.0865646f, -0.0509892f, +0.0087705f, +0.0910337f,
  -0.2434550f, -0.3414867f, -0.2375299f, +0.3495342f, +0.1535596f, +0.1278093f, +0.3169885f, -0.0415826f,
  +0.0982188f, -0.0457184f, -0.3265313f, +0.2256637f, +0.0697396f, -0.1026877f, -0.4664727f, +0.1028197f,
  +0.0532798f, +0.1115154f, +0.2052620f, -0.0580468f, -0.1371797f, -0.1970233f, +0.1260512f, -0.1071903f,
  +0.0887991f, +0.0087884f, +0.3513710f, +0.2379662f, +0.0921856f, +0.2656777f, +0.3630013f, +0.2100764f,
  -0.1997575f, -0.1165980f, -0.3776503f, -0.0254136f, -0.2467519f, -0.0641964f, +0.1194479f, -0.0590290f,
  -0.4019570f, +0.1155423f, -0.1585098f, -0.0139177f, -0.2711571f, -0.2113910f, -0.1527545f, +0.2973556f,
  -0.1757450f, +0.1593423f, +0.0836836f, -0.1216884f, +0.2344319f, +0.0872982f, -0.1046835f, -0.1198829f,
  +0.1377365f, +0.2573882f, +0.2087251f, -0.1053188f, -0.1964121f, -0.0640681f, -0.1800399f, -0.1341082f,
  +0.1029193f, +0.0762958f, -0.0875231f, -0.0069234f, +0.0751642f, -0.0851611f, -0.0705578f, +0.0154191f,
  -0.0324436f, +0.0720372f, +0.0594343f, -0.0592918f, +0.0623024f, +0.2218054f, -0.0216609f, -0.0475446f,
  +0.3530771f, +0.1075630f, -0.1343729f, -0.0152940f, +0.1376180f, -0.0039246f, -0.0104336f, +0.0831833f,
  +0.1252378f, -0.0739994f, -0.1815199f, -0.2169100f, +0.2726291f, +0.0112707f, -0.0438566f, -0.1638233f,
  -0.1454353f, +0.1109960f, +0.0116645f, -0.0714950f, -0.1425864f, +0.1991008f, -0.2469819f, +0.0447277f,
  +0.0472398f, -0.0135004f, +0.0290340f, +0.1575021f, +0.1304535f, +0.0244839f, +0.0583496f, +0.2009538f,
  -0.1028884f, +0.2688889f, -0.0571876f, -0.1639972f, +0.1108296f, -0.0326341f, -0.2267473f, -0.0281503f,
  +0.1239878f, +0.1415504f, -0.4039601f, -0.0727676f, -0.3485685f, -0.1641339f, +0.1668240f, +0.0386708f,
  +0.1094968f, +0.0441470f, +0.0878507f, -0.0603872f, -0.1502875f, -0.5842233f, -0.1823401f, -0.3244459f,
  +0.0340592f, -0.0018673f, +0.0533839f, -0.0454316f, -0.0500858f, -0.2476518f, -0.1970439f, -0.1140723f,
  +0.5292856f, +0.1793876f, +0.0723843f, -0.0778454f, -0.0582723f, -0.3614103f, -0.1236631f, +0.0592792f,
  +0.2876214f, -0.0883345f, +0.0627779f, +0.1918128f, -0.1398060f, -0.1057005f, -0.3902391f, -0.0951956f,
  +0.0621922f, +0.1017149f, +0.1550207f, -0.1131144f, -0.0655220f, +0.1336787f, -0.1706092f, +0.1125863f,
  -0.6491891f, -0.0578826f, +0.2230189f, +0.3639565f, +0.4227131f, -0.0057594f, -0.2363863f, -0.0269438f,
  -0.5641941f, -0.0942721f, -0.0968327f, -0.0001034f, -0.1643745f, -0.0542649f, +0.2093776f, +0.1514436f,
  -0.1271296f, +0.1451418f, +0.0833254f, +0.1722317f, -0.0366276f, +0.0844445f, +0.0748074f, -0.1341440f,
  +0.2212534f, -0.1418590f, +0.0675304f, -0.2350653f, -0.1024493f, -0.1611484f, -0.1281766f, -0.0541353f,
  -0.0389228f, -0.3554831f, -0.1259681f, +0.0403000f, +0.0588159f, -0.0154838f, -0.1029759f, -0.3401470f,
  +0.0965720f, -0.2243485f, -0.2381749f, -0.1048848f, -0.5340825f, +0.3119948f, +0.1840212f, +0.2506540f,
  -0.0243481f, -0.0591899f, +0.1608079f, -0.2907785f, -0.1546831f, +0.2941107f, +0.0822906f, +0.0606733f,
  +0.3669721f, +0.0749652f, +0.0404532f, -0.2548356f, -0.2871938f, -0.2383683f, -0.3501357f, -0.0494302f,
  +0.1629789f, +0.1582919f, -0.0606976f, -0.0060808f, +0.0452895f, +0.1120571f, +0.0081449f, +0.0213906f,
  -0.0263724f, +0.0018389f, -0.0015139f, -0.2774134f, -0.0044417f, -0.1937708f, +0.0334169f, +0.0137678f,
  +0.0698447f, +0.3263184f, -0.0295616f, -0.2271928f, +0.3199458f, +0.0357535f, -0.2158890f, -0.0576180f,
  -0.4309728f, -0.0686584f, +0.4475684f, -0.0374097f, +0.0405761f, -0.0374059f, +0.1154602f, -0.0753944f
);

const float biases[4] = float[4](
  -0.0340163f, +0.0263782f, +0.0138462f, -0.0177788f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer59 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0840647f, -0.2654553f, +0.2000050f, -0.0075069f, +0.0257048f, -0.0116596f, -0.3743033f, -0.1287656f,
  +0.0371141f, +0.2437997f, -0.4189382f, -0.2795828f, -0.1897455f, +0.0741682f, +0.2158171f, +0.0932107f,
  -0.1602349f, -0.0381121f, +0.1144028f, -0.3301015f, +0.0369805f, -0.1081626f, +0.0172536f, +0.0021101f,
  -0.0466537f, -0.1034118f, -0.0206016f, -0.0812709f, -0.0208327f, -0.1123074f, -0.1501169f, -0.0631755f,
  -0.0735346f, -0.1000529f, -0.0984728f, +0.1289756f, +0.5082716f, -0.1174808f, +0.1585904f, -0.0289540f,
  -0.0520320f, -0.0810859f, -0.1933677f, +0.1748840f, +0.0699124f, +0.0749177f, +0.3634014f, -0.2185935f,
  -0.0442307f, +0.1791284f, +0.0192807f, +0.1251544f, -0.0399106f, +0.0051936f, +0.0298151f, -0.0945560f,
  -0.1633858f, -0.1347584f, -0.0482891f, +0.0610124f, -0.0085715f, +0.0046993f, +0.0777962f, +0.1270485f,
  -0.2814988f, -0.3387768f, +0.0063898f, -0.2030039f, -0.0707187f, -0.0704195f, +0.2963507f, -0.0002042f,
  -0.0993999f, -0.2173112f, -0.1866133f, +0.2580638f, +0.1932011f, -0.0821342f, -0.0140938f, +0.1377614f,
  -0.1625540f, -0.0348581f, -0.1095085f, +0.3372605f, +0.0103770f, +0.0081580f, -0.1434778f, -0.2575105f,
  +0.4845451f, -0.2329399f, -0.3380582f, +0.0371189f, -0.1344009f, -0.2197295f, -0.2693013f, +0.3091865f,
  +0.1699298f, -0.2069331f, -0.0146464f, +0.0795479f, +0.3465703f, +0.1699846f, +0.0640004f, -0.1588029f,
  -0.2273821f, -0.2004713f, +0.3913497f, +0.0578357f, -0.1741336f, -0.0450498f, +0.3853936f, -0.0550937f,
  -0.1218242f, +0.0400290f, -0.2110267f, -0.0062190f, +0.2276341f, -0.2553503f, -0.2114209f, +0.0820512f,
  -0.1159590f, +0.0329313f, -0.3384914f, -0.1592082f, +0.1287726f, +0.0446859f, +0.2116825f, -0.1067183f,
  +0.2178825f, +0.0117055f, -0.1797969f, -0.1902669f, +0.1376232f, -0.3220943f, -0.0790700f, +0.1020259f,
  -0.2956182f, +0.2633240f, +0.1133654f, -0.3801759f, +0.2704750f, -0.4096426f, -0.3113731f, +0.0575388f,
  -0.0115141f, -0.1417549f, +0.1248181f, +0.0333121f, +0.0434248f, -0.1402618f, +0.1600085f, -0.2427820f,
  +0.0123223f, -0.1271255f, +0.1522582f, -0.1275085f, +0.1810459f, +0.0625462f, -0.4545178f, -0.5733109f,
  +0.0045002f, +0.2799550f, -0.1075676f, +0.1896151f, -0.1488592f, -0.0164830f, +0.0968336f, -0.2265477f,
  +0.0472775f, -0.1630799f, -0.0938114f, -0.0627654f, -0.1159780f, -0.3470648f, -0.0997770f, -0.0534557f,
  -0.2133353f, -0.2888123f, -0.0546959f, -0.3729000f, +0.1497280f, +0.0739550f, -0.2137564f, -0.1963286f,
  +0.0881079f, +0.0416046f, +0.2440307f, +0.0590640f, -0.2936268f, -0.0432431f, -0.2231225f, +0.1588002f,
  +0.2042354f, -0.3001917f, -0.2521359f, -0.2759642f, +0.1789765f, -0.2635784f, +0.1959260f, +0.2059126f,
  -0.0391788f, -0.2976873f, -0.4175068f, -0.1076596f, +0.2377511f, -0.3695792f, -0.1186154f, +0.2168401f,
  -0.0021880f, -0.1776589f, +0.3303283f, +0.0884140f, +0.1029024f, -0.2192712f, -0.0143545f, +0.2328126f,
  -0.1538282f, +0.1336990f, +0.2118490f, -0.0030460f, -0.1126728f, +0.1414879f, +0.1752826f, -0.1967861f,
  -0.0761285f, +0.1629845f, +0.2229566f, +0.1364470f, -0.0530734f, -0.0326110f, +0.0426679f, +0.1969665f,
  -0.2744684f, +0.2874347f, +0.0757336f, +0.0285835f, +0.0396486f, -0.1031505f, +0.0204495f, +0.0129302f,
  +0.1178563f, +0.1446218f, -0.0803444f, +0.0135056f, -0.0386524f, +0.0408660f, +0.1118840f, +0.2429157f,
  +0.2559010f, -0.3345716f, -0.2451709f, -0.0669182f, +0.2718740f, -0.1962507f, +0.0184645f, +0.1407136f,
  +0.1523849f, -0.1048019f, -0.0677213f, -0.0829745f, +0.0297027f, +0.2378198f, -0.1351089f, +0.1797355f,
  -0.0665100f, +0.0703491f, +0.0455780f, +0.1714285f, +0.1954469f, -0.0577288f, +0.1584932f, +0.1755179f,
  +0.1024378f, -0.0348633f, -0.2204535f, +0.0312844f, -0.0533099f, -0.2428649f, -0.2651487f, +0.0706779f,
  -0.3467117f, -0.1180721f, +0.2412093f, -0.1926095f, -0.2360682f, +0.1058305f, -0.1818115f, -0.0478276f
);

const float biases[4] = float[4](
  -0.0143691f, -0.0382768f, +0.1350571f, +0.0306831f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer60 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0250504f, +0.1905936f, -0.1189514f, -0.1159823f, +0.1441923f, +0.1038844f, -0.1910556f, +0.2107459f,
  -0.2713312f, -0.0644431f, -0.3737498f, +0.1149892f, +0.1845989f, -0.3055579f, +0.1095341f, -0.0418626f,
  +0.1228427f, +0.2192661f, -0.9313644f, -0.0337559f, +0.1489634f, -0.0282961f, +0.2363795f, +0.0723006f,
  +0.3470854f, -0.1395574f, +0.1485108f, -0.0286503f, +0.2390900f, -0.0096194f, +0.3162155f, +0.1011388f,
  -0.0434226f, -0.0410828f, -0.1218391f, -0.3645778f, -0.1676381f, +0.1018130f, -0.0472387f, -0.3279123f,
  -0.1855003f, +0.0275443f, +0.4537347f, -0.0720456f, -0.0312016f, -0.3051963f, -0.0692835f, +0.0182021f,
  -0.1863332f, -0.0303737f, -0.0434192f, -0.0349863f, +0.2180038f, -0.0959211f, -0.1788981f, +0.2772464f,
  -0.0745319f, +0.0202446f, -0.1369145f, -0.0006933f, -0.0877725f, +0.2324892f, -0.0729849f, +0.0616758f,
  -0.0881104f, +0.0996644f, -0.4170560f, -0.1299801f, +0.0267562f, -0.0367312f, +0.1143784f, -0.0403795f,
  -0.0490273f, +0.0205009f, -0.1196822f, -0.0866416f, +0.0038059f, -0.1176040f, +0.1626290f, -0.0711617f,
  +0.0962204f, +0.0024497f, +0.1163797f, -0.1680921f, +0.0917469f, +0.1728912f, -0.1377918f, -0.1992608f,
  +0.2496433f, -0.1947278f, +0.5765787f, -0.0769712f, -0.2872038f, +0.1465057f, -0.0270933f, +0.0014772f,
  +0.1159812f, +0.0308438f, -0.1205919f, -0.1096978f, +0.0741561f, -0.3801775f, -0.0388856f, +0.1273038f,
  +0.0651480f, -0.0985314f, +0.0707399f, -0.0347980f, +0.1470981f, +0.1313757f, -0.2966159f, +0.0321510f,
  +0.2289608f, +0.1801476f, -0.0826143f, +0.0482678f, +0.0290293f, +0.0392714f, -0.0681629f, +0.0731248f,
  -0.0833843f, +0.0490685f, -0.0308151f, +0.1122044f, -0.0932350f, -0.2198733f, +0.0698613f, +0.0949494f,
  +0.1049980f, -0.0646402f, -0.0684278f, -0.0986123f, +0.2511114f, -0.1061353f, +0.0649349f, -0.0227538f,
  +0.1610358f, -0.0602243f, +0.1128094f, -0.0834448f, +0.2406573f, +0.1433326f, +0.1721808f, -0.0197213f,
  +0.0971532f, +0.0054325f, +0.1875053f, -0.1184071f, -0.1218681f, -0.1846821f, -0.0424935f, -0.1029049f,
  +0.0932662f, +0.2899790f, -0.4030631f, +0.4641970f, +0.0613304f, -0.1521569f, -0.4170281f, +0.0078589f,
  +0.2902742f, -0.1035403f, +0.2830908f, +0.0406216f, +0.0463229f, +0.1137484f, +0.1605843f, +0.1203884f,
  +0.2677933f, +0.1671339f, -0.0769875f, +0.0674419f, -0.0099107f, +0.0498379f, +0.0678287f, +0.1276567f,
  -0.1520803f, +0.1430438f, -0.0569061f, +0.1631012f, -0.1609763f, +0.0601160f, -0.4836556f, +0.2248406f,
  -0.0422440f, +0.2407909f, +0.0869880f, +0.1759995f, -0.0496425f, -0.2107031f, -0.0350046f, +0.1653939f,
  -0.1010681f, +0.0273468f, -0.0267834f, +0.1071132f, -0.1048359f, +0.0361249f, -0.0228937f, +0.1317612f,
  -0.2803505f, -0.0297015f, +0.2306035f, -0.0461254f, +0.4598992f, -0.2302154f, -0.0546777f, +0.0211136f,
  -0.0419115f, +0.0642200f, -0.1682082f, +0.1684238f, +0.0629539f, -0.0585321f, +0.1353872f, -0.0867990f,
  +0.2378878f, -0.1230236f, +0.0209797f, -0.1054550f, +0.0141738f, +0.1624586f, +0.1195811f, -0.0894006f,
  -0.0200390f, +0.0205957f, -0.1253782f, -0.1644857f, -0.3874858f, +0.3856512f, -0.0515065f, -0.2756211f,
  +0.0677265f, -0.0716588f, +0.3126432f, -0.2132224f, -0.1980712f, +0.0068545f, +0.2144073f, -0.1008613f,
  +0.1794424f, +0.2023157f, +0.3485322f, -0.2460073f, -0.4020703f, +0.0640340f, +0.0627041f, +0.2393410f,
  +0.3099019f, -0.1001542f, +0.2371446f, -0.2326879f, +0.0865409f, -0.0448263f, +0.3189163f, +0.2735140f,
  -0.3150032f, -0.4388023f, -0.4048751f, +0.2421139f, -0.0180829f, -0.0136318f, +0.1572612f, +0.1512037f,
  -0.2900017f, -0.1545366f, -0.1626114f, -0.0650656f, +0.5077325f, +0.1916636f, -0.5665922f, +0.0657674f,
  -0.2551662f, -0.1264809f, -0.2946743f, +0.2157487f, +0.3278827f, +0.1231344f, +0.1916218f, -0.0437115f,
  -0.0953548f, -0.1064652f, -0.0807081f, +0.1028416f, +0.4195930f, -0.1460826f, +0.1291752f, +0.0785017f
);

const float biases[4] = float[4](
  -0.0552637f, -0.0701722f, +0.0131843f, +0.0660119f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer60 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0923429f, -0.1861378f, +0.1692388f, -0.1272047f, -0.0687337f, -0.1404204f, +0.2658744f, -0.0178644f,
  -0.2103943f, -0.0228815f, +0.0680263f, -0.2559777f, -0.4341249f, -0.1084978f, +0.1330451f, -0.3067013f,
  -0.0827885f, +0.1489035f, +0.2029131f, -0.0166424f, +0.0782657f, -0.1084614f, +0.1408605f, +0.0824331f,
  -0.2568877f, +0.1168751f, -0.0521776f, -0.2016019f, -0.1133824f, -0.3626337f, +0.4729509f, +0.0829005f,
  +0.0237485f, +0.0142472f, -0.3786323f, -0.1262854f, -0.2431277f, -0.0364254f, -0.0574357f, -0.2006587f,
  -0.2118360f, -0.2737454f, +0.1280837f, +0.0620504f, +0.0210177f, +0.0061547f, +0.3095914f, +0.1737359f,
  +0.0421129f, +0.3141569f, +0.0366056f, -0.3165789f, +0.0476845f, +0.0295080f, -0.1336626f, -0.1355692f,
  -0.3672002f, -0.0401999f, +0.1313450f, +0.0364212f, +0.5666985f, -0.3923675f, -0.0299476f, +0.0437912f,
  -0.2405352f, -0.1624686f, -0.1894435f, +0.2316758f, +0.2599840f, -0.0493864f, +0.2753732f, -0.0056969f,
  +0.0915599f, +0.1324804f, -0.0203979f, -0.0419938f, +0.0449800f, -0.0251449f, +0.0328001f, -0.3776409f,
  -0.2227287f, +0.0894786f, -0.1770436f, -0.2122814f, -0.0229864f, -0.0958120f, +0.0528344f, +0.0097577f,
  +0.3663943f, -0.1850541f, -0.4475536f, +0.0190201f, +0.2096940f, -0.2977168f, +0.0974302f, +0.1701222f,
  -0.0503610f, +0.0578639f, -0.1627509f, -0.3503842f, +0.2505035f, +0.2195519f, +0.1806163f, -0.2184116f,
  +0.0100586f, -0.2327780f, +0.1718714f, -0.1351307f, +0.0046695f, -0.1887469f, +0.1225630f, +0.1734914f,
  -0.0269311f, -0.1202047f, +0.3129438f, +0.1104792f, -0.0405604f, -0.2405595f, +0.3245230f, +0.2176040f,
  -0.1877364f, -0.1948589f, -0.1019840f, -0.0783876f, +0.0289760f, -0.0656549f, -0.0997800f, -0.1518952f,
  -0.3374366f, -0.0400688f, -0.1116951f, +0.0787362f, +0.4221589f, -0.0781784f, +0.0176166f, +0.1522843f,
  -0.0648277f, +0.0844852f, -0.1346424f, +0.1347072f, -0.1938991f, -0.0404240f, +0.2657054f, +0.0117997f,
  +0.1345271f, -0.0506282f, +0.2336063f, +0.1085345f, +0.0452592f, -0.0054952f, -0.0354679f, -0.1315622f,
  +0.1614942f, +0.0554181f, +0.2685865f, +0.1163167f, +0.0462341f, +0.0650327f, +0.0956100f, +0.0266685f,
  +0.0951907f, -0.1367064f, -0.1555917f, -0.0111524f, +0.0180091f, -0.0223093f, +0.5392798f, -0.0213612f,
  -0.1075040f, -0.1436278f, -0.0251958f, -0.1023512f, +0.0853788f, +0.4206049f, -0.1978722f, +0.1850142f,
  -0.0934006f, -0.2322430f, +0.1433758f, +0.0146962f, -0.1693041f, -0.0615946f, -0.3352264f, -0.2019324f,
  -0.1827473f, +0.1512276f, +0.4541505f, +0.0635267f, +0.3379345f, +0.0589198f, -0.0222893f, +0.0299392f,
  -0.4207681f, -0.1725968f, -0.0149093f, +0.0813803f, +0.0116874f, +0.3885530f, -0.1961079f, +0.1039945f,
  +0.0765826f, +0.1763553f, +0.0526765f, -0.1121776f, -0.1719771f, -0.0870027f, +0.2506006f, +0.2508638f,
  -0.0354183f, -0.0958121f, +0.1341156f, +0.2093306f, +0.2746936f, +0.0278171f, -0.0509415f, -0.0379858f,
  -0.0275109f, -0.0883301f, +0.1828859f, -0.0546622f, -0.0506318f, +0.0322816f, -0.1333249f, +0.3036413f,
  -0.0579070f, +0.0620196f, +0.1985769f, -0.0143026f, -0.1058161f, -0.1250110f, -0.1060560f, -0.1515684f,
  -0.0286722f, +0.2621594f, +0.1116499f, +0.2409732f, +0.1315937f, +0.3705526f, +0.0796272f, +0.1230732f,
  -0.0579356f, -0.0270439f, -0.0415672f, +0.0314891f, +0.5130752f, -0.0568352f, -0.3872010f, +0.1360417f,
  -0.0122916f, +0.0758438f, -0.1981201f, -0.5351672f, +0.5047858f, -0.0962540f, -0.0359992f, -0.0362126f,
  -0.0051405f, +0.4184099f, -0.0963331f, +0.0055399f, +0.0589367f, -0.0181569f, +0.0657885f, -0.1315707f,
  -0.1467823f, -0.1312342f, -0.0635785f, -0.2838419f, +0.2218748f, +0.0360186f, -0.1595689f, +0.0523546f,
  -0.0896316f, -0.1444797f, -0.2177255f, -0.1182177f, +0.2381063f, +0.0058173f, +0.0843152f, -0.3599485f,
  +0.0454710f, -0.1132000f, +0.3407324f, -0.0955414f, -0.0484755f, -0.0418520f, +0.0621790f, -0.1700174f
);

const float biases[4] = float[4](
  -0.0135158f, +0.0276386f, -0.0351629f, -0.0113171f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer61 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0046796f, +0.1026495f, +0.0301560f, +0.0334890f, -0.0920133f, +0.2827472f, +0.1271079f, +0.0506741f,
  -0.1192308f, +0.1853109f, +0.0076681f, +0.0686387f, -0.0639212f, +0.0607984f, -0.1504336f, -0.1267094f,
  -0.1495962f, -0.0557585f, -0.2133407f, -0.1725460f, +0.0333022f, +0.2284027f, -0.0531211f, -0.0964899f,
  +0.0070532f, -0.3144553f, +0.1281197f, +0.0532927f, +0.0405634f, -0.0079911f, +0.1886107f, +0.0311834f,
  -0.2448503f, +0.0034911f, +0.1373918f, +0.0142668f, +0.3435347f, -0.2612169f, +0.0581165f, -0.0241143f,
  +0.0699041f, -0.0912310f, +0.0413541f, +0.0463045f, +0.0236710f, +0.1017190f, -0.1297408f, +0.0365983f,
  -0.0442958f, +0.0797474f, +0.0330430f, +0.0227545f, +0.1225059f, -0.1285906f, -0.0176742f, +0.1471612f,
  -0.1606140f, +0.1366628f, +0.1110940f, -0.0183453f, -0.1222225f, -0.1204391f, +0.1601681f, +0.0344468f,
  +0.2304663f, +0.1764985f, -0.1312644f, +0.0267402f, -0.1046387f, -0.0499892f, -0.0691394f, -0.1029578f,
  -0.1187172f, +0.0852884f, -0.2520654f, +0.2144922f, +0.0657287f, +0.1090357f, +0.3036275f, -0.1679103f,
  -0.0312981f, -0.0718278f, -0.0586672f, +0.1129444f, +0.2539618f, -0.2750074f, +0.0277998f, -0.0575670f,
  -0.1340129f, +0.2372362f, -0.3258710f, +0.2618826f, +0.0041854f, -0.2613275f, -0.2732744f, +0.0605071f,
  -0.0689063f, +0.1360009f, -0.0829564f, +0.2536415f, +0.0863084f, +0.0558665f, +0.2758990f, -0.0024736f,
  -0.0808234f, -0.0255782f, +0.0040389f, -0.0809255f, +0.1604632f, +0.0827045f, -0.2346349f, -0.0475257f,
  -0.0895785f, +0.3474649f, +0.0358964f, +0.1004200f, +0.3687614f, +0.0180865f, -0.4103353f, -0.0699754f,
  -0.2433322f, +0.2151842f, -0.0180192f, -0.1736551f, -0.0283478f, +0.1154241f, -0.1037162f, -0.1591695f,
  -0.1732358f, -0.1595560f, +0.2293380f, +0.0970364f, -0.2326418f, +0.0834360f, +0.0474506f, -0.1075390f,
  +0.0021169f, +0.0539875f, +0.2154706f, +0.1010888f, -0.2367222f, +0.1038797f, -0.1360150f, -0.0092308f,
  +0.0344530f, -0.1612993f, -0.2666686f, -0.1533056f, -0.0633992f, -0.3810082f, +0.2767415f, -0.1653223f,
  -0.2226536f, -0.1986895f, -0.2058753f, +0.0919741f, -0.1087495f, -0.0930814f, +0.1569744f, -0.1623669f,
  -0.0093394f, +0.2625434f, +0.1862370f, -0.1637344f, -0.0155007f, +0.0361045f, -0.1305199f, -0.1271886f,
  -0.1587387f, -0.0510552f, -0.4952267f, +0.3756233f, +0.1372079f, -0.2064331f, -0.1536152f, -0.0098019f,
  -0.0039798f, -0.2101493f, -0.1591046f, -0.1367645f, -0.2701249f, +0.0043573f, +0.2490224f, +0.2287038f,
  +0.0739753f, +0.0322222f, -0.1390534f, +0.4147778f, -0.3062690f, +0.0108387f, -0.1274880f, +0.0799680f,
  -0.1992995f, -0.2222165f, -0.3266280f, +0.0304066f, +0.1830242f, -0.1129825f, -0.0283560f, -0.1978097f,
  -0.1911346f, +0.0655456f, -0.1534049f, +0.0665433f, -0.0650832f, -0.3162709f, -0.0814818f, +0.1439912f,
  -0.0772656f, +0.1027208f, -0.2047745f, -0.0224242f, +0.2422783f, +0.0804505f, +0.0661354f, +0.3244511f,
  -0.0350595f, +0.2828880f, -0.0436352f, -0.1825975f, -0.1235359f, +0.2474632f, +0.1353345f, +0.2015600f,
  +0.0494182f, -0.0149271f, +0.0711989f, +0.1228018f, -0.0052548f, +0.0611348f, -0.2617721f, -0.3562219f,
  +0.1197812f, +0.0779563f, -0.0152426f, -0.0165733f, -0.2196867f, -0.0372937f, +0.0886759f, +0.1563168f,
  +0.1694524f, -0.0120173f, -0.0678272f, -0.0510414f, +0.0818389f, +0.1427015f, +0.1940014f, -0.0538717f,
  +0.1125270f, +0.3461607f, +0.2739417f, -0.5116410f, -0.1544476f, +0.3007669f, -0.0766216f, +0.2099020f,
  +0.1561175f, +0.1197821f, -0.0515970f, +0.0217636f, -0.3575680f, -0.0117695f, -0.1217418f, +0.2271788f,
  -0.0255083f, -0.2855417f, -0.0317270f, -0.0896121f, +0.1879742f, +0.2518051f, -0.2666157f, +0.1014741f,
  -0.1159510f, -0.1891239f, +0.1278090f, -0.1878995f, -0.0311819f, +0.0329696f, +0.2393809f, +0.0302058f,
  +0.2799906f, +0.0253155f, -0.1348051f, +0.1119037f, -0.1900719f, +0.0561529f, +0.0430669f, -0.0360569f
);

const float biases[4] = float[4](
  +0.0762417f, +0.1071357f, +0.0231813f, -0.0480604f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer61 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0718019f, +0.2082419f, +0.2320395f, +0.0114681f, +0.1256511f, +0.3920777f, +0.2277201f, +0.0954420f,
  -0.2751540f, -0.0366045f, +0.1339946f, +0.0658726f, +0.0182600f, +0.1076600f, -0.0479557f, -0.0178029f,
  +0.1401917f, +0.0318790f, +0.2057950f, -0.2103041f, +0.0266928f, +0.1408818f, +0.0655903f, -0.1557617f,
  +0.1444653f, -0.0320583f, +0.1768877f, +0.2104152f, +0.3428616f, +0.2467263f, +0.0883367f, +0.0176696f,
  +0.0046785f, -0.1313370f, +0.0118087f, -0.0905618f, -0.4752301f, -0.0956796f, -0.2074825f, -0.1006744f,
  -0.1094310f, +0.0090259f, +0.1754492f, -0.0495290f, -0.0365951f, -0.1418613f, +0.0734512f, -0.1452160f,
  +0.0790293f, +0.2418471f, -0.3827830f, -0.1665702f, -0.0405959f, -0.2259399f, +0.0243450f, +0.2102245f,
  +0.3408073f, +0.2042629f, +0.0539633f, +0.0079240f, -0.1838578f, +0.0357834f, -0.1879431f, +0.1208621f,
  -0.1385037f, -0.0729754f, +0.1149215f, +0.0710551f, +0.1960032f, -0.0310981f, +0.0403929f, -0.2159248f,
  +0.0339257f, +0.1711805f, +0.0659961f, -0.0550664f, +0.0447984f, -0.0544452f, -0.2412469f, -0.0920364f,
  -0.0753206f, +0.0829378f, +0.1588764f, -0.0293094f, -0.2626576f, +0.1027399f, +0.4276550f, -0.1063603f,
  +0.1059365f, +0.0452391f, -0.0417728f, +0.0043698f, -0.3196316f, -0.1663607f, -0.1484739f, -0.2149620f,
  -0.0013733f, -0.1677219f, +0.2223830f, -0.0260802f, -0.2283315f, +0.0636067f, -0.0262932f, -0.2942174f,
  -0.0635922f, -0.0772959f, +0.0217907f, -0.2475650f, +0.0179066f, +0.0169684f, -0.0697267f, -0.0965062f,
  +0.2068942f, -0.0196678f, +0.1420822f, -0.1979692f, -0.1631186f, +0.1256222f, -0.2309186f, -0.0009790f,
  -0.2099965f, +0.2191986f, +0.2194323f, +0.0197117f, -0.0289782f, +0.2319730f, -0.0488137f, +0.3522646f,
  +0.2948232f, +0.1054407f, -0.2859900f, +0.0700917f, -0.2814768f, -0.1039990f, -0.1477868f, -0.0269318f,
  +0.2529624f, +0.0219983f, -0.2360571f, -0.0257413f, -0.3809744f, +0.1503505f, -0.0439248f, -0.1013253f,
  -0.0497531f, +0.1184289f, -0.0165022f, +0.2491433f, +0.0485523f, -0.0414752f, +0.2290080f, -0.3915076f,
  -0.0583745f, -0.0933353f, +0.0411251f, +0.2726063f, +0.0057530f, -0.1381461f, +0.0120761f, -0.0624808f,
  +0.1740848f, -0.0174153f, +0.1778062f, +0.0787183f, -0.0921294f, +0.2162196f, -0.3105042f, +0.6490179f,
  +0.0383527f, -0.2140699f, -0.0963536f, +0.0288745f, -0.0601758f, -0.2543871f, +0.3745980f, +0.0131937f,
  +0.0843512f, +0.1382968f, -0.0820982f, +0.0272612f, -0.1148875f, -0.0919048f, -0.0081164f, -0.2139135f,
  -0.0345920f, -0.3349935f, -0.0984247f, -0.1488991f, -0.0125133f, +0.0343695f, +0.1216186f, +0.1938813f,
  -0.0965074f, -0.0219590f, -0.0823085f, -0.2817838f, -0.1434906f, -0.0811594f, -0.0995258f, -0.2051928f,
  -0.3589712f, +0.2637585f, -0.0492153f, -0.1772280f, +0.3580371f, -0.1100669f, +0.0664121f, -0.0368724f,
  -0.2266306f, -0.0414472f, +0.2287692f, -0.0016140f, +0.0538524f, -0.0410252f, -0.0604954f, -0.0236505f,
  -0.2407545f, -0.0998809f, +0.0122405f, +0.1006038f, -0.1666825f, -0.3403618f, +0.3142444f, -0.0380001f,
  -0.3562184f, +0.0485156f, +0.0520742f, -0.1081384f, -0.1052412f, +0.1636938f, +0.0397922f, -0.0731253f,
  +0.1486689f, +0.2175268f, -0.0544179f, -0.0238597f, +0.0619828f, +0.1109267f, +0.0642708f, +0.0785067f,
  -0.0432934f, +0.0983238f, -0.1505338f, -0.0310595f, -0.3168814f, -0.0719420f, +0.1289501f, -0.0014517f,
  -0.0710997f, +0.0171693f, +0.0676656f, +0.2309321f, +0.1376334f, +0.2369206f, -0.0142811f, +0.0570027f,
  -0.0243116f, +0.1845347f, -0.1422240f, -0.1862181f, -0.0964628f, +0.4425174f, +0.0650467f, -0.2579888f,
  +0.0545992f, +0.0445704f, -0.0631671f, -0.3698457f, -0.2731309f, +0.0205823f, +0.2090582f, +0.0134746f,
  -0.3814065f, +0.1761840f, +0.1108534f, +0.1079070f, -0.1672131f, +0.0233158f, +0.2729797f, +0.0300253f,
  +0.0635329f, +0.2516391f, -0.3191666f, +0.1870934f, -0.0635237f, +0.1173398f, -0.1539377f, -0.0735063f
);

const float biases[4] = float[4](
  -0.0389852f, +0.0447514f, -0.0356101f, +0.0625193f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer62 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2222222f, +0.2758722f, -0.0165538f, +0.0086023f, -0.1122850f, -0.2671071f, -0.0309863f, -0.1281836f,
  -0.1601610f, +0.1820383f, +0.1520187f, +0.2329307f, -0.2107495f, -0.0127294f, +0.0047842f, +0.2890463f,
  +0.0861881f, +0.0343937f, +0.1955194f, +0.0027760f, -0.1650891f, +0.1628032f, -0.0323395f, -0.2711089f,
  +0.0176004f, -0.0337133f, -0.2213062f, +0.0269815f, +0.0870386f, -0.0215280f, +0.0870271f, -0.0029307f,
  +0.0147390f, -0.1790373f, +0.2037789f, +0.2157248f, +0.1102001f, -0.0658676f, -0.0663671f, -0.2108545f,
  -0.0267809f, +0.1920849f, -0.1359008f, +0.0769909f, -0.3847726f, -0.0498106f, +0.0719705f, -0.0223767f,
  +0.2078197f, +0.1075961f, +0.0419698f, +0.0399258f, -0.1240632f, -0.1232188f, -0.0030654f, -0.0890852f,
  +0.3987672f, -0.2419953f, -0.1859870f, +0.0755781f, +0.2568295f, +0.1294442f, -0.2750674f, +0.1036131f,
  +0.0482496f, -0.0045619f, -0.1239175f, +0.0088541f, +0.0395218f, -0.0993488f, -0.0702635f, -0.0076325f,
  -0.0807513f, -0.0023968f, -0.0976136f, -0.0249619f, -0.0481298f, -0.1239063f, +0.0188944f, +0.0474265f,
  +0.0480265f, -0.1481565f, -0.0543314f, -0.1980224f, -0.1510314f, -0.0963888f, -0.0341165f, -0.1485645f,
  +0.0327678f, +0.0604823f, -0.2354278f, -0.1554287f, -0.1602886f, -0.3695044f, -0.1586151f, -0.0334314f,
  -0.0735091f, -0.2026345f, -0.1406075f, +0.1447145f, +0.2477585f, +0.0051965f, +0.1059872f, -0.1135974f,
  +0.1219039f, -0.0517597f, +0.0281055f, +0.0077221f, +0.2291917f, +0.0497310f, -0.0073231f, -0.1391920f,
  +0.0287691f, -0.1170942f, -0.3230261f, +0.1857017f, -0.2193822f, +0.3794956f, +0.0103969f, -0.1096668f,
  -0.0446649f, +0.0451682f, -0.0939902f, -0.1513996f, +0.1068757f, -0.0436441f, -0.0407844f, +0.0433911f,
  +0.2055572f, -0.2640438f, +0.1270591f, +0.1044404f, -0.2427603f, +0.3661645f, +0.0068361f, +0.0596602f,
  +0.1777540f, -0.0060116f, -0.1091737f, +0.3233139f, +0.1305009f, -0.0440811f, +0.0126045f, +0.1954806f,
  -0.1884627f, -0.2528706f, -0.1088496f, +0.1367813f, +0.0725839f, +0.2164226f, -0.0146435f, +0.0445338f,
  +0.0804358f, -0.0303570f, +0.2124315f, +0.0949909f, +0.3142458f, +0.0847434f, -0.0234947f, -0.0143899f,
  -0.0762571f, -0.2185435f, +0.1209593f, -0.1060885f, +0.0153134f, -0.2206586f, -0.1818431f, +0.2603314f,
  -0.1105343f, -0.1236787f, -0.0243468f, -0.2258272f, -0.1469688f, +0.1068309f, -0.3627225f, +0.0227025f,
  +0.2294510f, -0.1533798f, +0.0704850f, +0.2120594f, +0.1868873f, -0.1858456f, +0.1843047f, +0.0554203f,
  -0.0015642f, +0.0906890f, +0.0988821f, +0.0176388f, -0.1646467f, +0.0396057f, +0.0380558f, +0.0379576f,
  +0.1817096f, +0.4981493f, -0.1801389f, -0.1823192f, -0.4080123f, -0.1236419f, +0.2391444f, -0.1433912f,
  +0.0284414f, +0.3263587f, -0.1047363f, +0.0137537f, +0.0079664f, -0.0805122f, -0.0521322f, +0.0594818f,
  +0.0222097f, +0.0426243f, +0.1018528f, +0.1271560f, -0.0466585f, -0.0357817f, -0.2108764f, +0.0363417f,
  -0.0953247f, +0.1222250f, +0.0839970f, -0.2818983f, -0.0249691f, +0.1945969f, +0.1479131f, -0.1045592f,
  -0.0660041f, -0.1062319f, +0.1667401f, +0.2329776f, +0.2411370f, -0.0058712f, +0.2835617f, +0.0789553f,
  -0.0387372f, +0.2512435f, +0.2250146f, +0.1225956f, -0.0874830f, +0.1103058f, -0.0549838f, -0.0650555f,
  +0.1451787f, +0.0092568f, -0.0807600f, -0.2977727f, -0.0399900f, +0.1875007f, -0.1503387f, +0.0209337f,
  +0.0837267f, +0.0854228f, -0.0180762f, +0.3388481f, +0.1851491f, +0.2478908f, +0.2489023f, -0.2709886f,
  -0.0429275f, -0.1499609f, +0.0193215f, -0.0077941f, +0.0325869f, -0.1458709f, +0.0784598f, -0.0374219f,
  +0.2557746f, -0.0535711f, +0.1025425f, +0.0769669f, -0.0041592f, -0.0328765f, +0.1802706f, +0.0158931f,
  +0.2110667f, -0.0763098f, -0.1482294f, +0.1088586f, -0.1710045f, -0.0367157f, +0.0408991f, +0.1068450f,
  -0.0733433f, -0.1467116f, -0.0030423f, +0.0239105f, -0.0328279f, -0.1046727f, -0.0368448f, -0.1025634f
);

const float biases[4] = float[4](
  -0.0304195f, -0.0734847f, -0.0045647f, +0.0504243f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer62 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2692193f, +0.2034402f, -0.0651030f, +0.0414760f, -0.0332799f, +0.1026666f, -0.1765884f, -0.0568320f,
  +0.0881164f, +0.0791282f, +0.2757606f, +0.0789704f, -0.1540658f, -0.0451691f, -0.0395913f, +0.1092994f,
  +0.1168235f, +0.0118927f, +0.0829518f, +0.2128660f, -0.1263531f, -0.1585747f, +0.0320976f, +0.1672762f,
  -0.0535708f, -0.1149271f, -0.0267013f, +0.1149741f, +0.0229017f, +0.0056794f, +0.3434529f, -0.0332584f,
  -0.2302281f, -0.0321123f, -0.0164614f, -0.1690095f, -0.0644767f, +0.1896208f, -0.0531137f, -0.0021563f,
  -0.2239785f, -0.1862502f, -0.2153298f, +0.1319774f, -0.1495579f, +0.3481420f, +0.0150129f, -0.0048304f,
  -0.0781690f, +0.0626594f, +0.2104014f, -0.0441453f, -0.1598335f, +0.3672383f, -0.0435885f, -0.1092727f,
  -0.0975635f, -0.0448791f, -0.0467811f, +0.0720415f, -0.0639867f, +0.0632593f, -0.0922143f, +0.1885301f,
  +0.1068137f, +0.1601159f, +0.1797416f, +0.1912638f, -0.1557236f, +0.0126576f, -0.1881551f, -0.0431024f,
  -0.1138229f, +0.0779380f, +0.2470933f, -0.0828653f, -0.0134171f, +0.0288741f, -0.0629332f, -0.3199499f,
  +0.2112541f, +0.2207855f, -0.0448725f, +0.2196188f, -0.0469135f, -0.0686148f, -0.1266577f, -0.0500537f,
  +0.0936443f, +0.0434989f, +0.0147675f, +0.0053730f, +0.0461156f, +0.0266398f, -0.1408778f, -0.1028785f,
  +0.2786279f, +0.0454214f, +0.0861848f, -0.1385417f, +0.0041554f, +0.1911389f, +0.0516173f, -0.3093043f,
  +0.1989170f, +0.0296881f, +0.0198846f, -0.2019254f, +0.1744881f, -0.2913368f, -0.0658486f, +0.0299781f,
  +0.2404177f, +0.0609304f, +0.0714509f, -0.0357961f, -0.3164652f, +0.0451293f, +0.1269484f, +0.3196161f,
  -0.4312161f, -0.0737411f, +0.2747018f, +0.0832430f, -0.0370914f, -0.0755311f, +0.1570187f, -0.1425639f,
  -0.3192620f, -0.0065097f, -0.1812718f, -0.0823789f, -0.2216254f, +0.1154718f, -0.1689301f, +0.1075301f,
  -0.0153786f, -0.1522265f, -0.1441063f, +0.0412660f, +0.1104435f, +0.0587182f, -0.1554151f, +0.3746225f,
  +0.1598708f, -0.0994572f, +0.0024062f, -0.1339071f, +0.0884261f, +0.0904117f, +0.1048506f, -0.1344487f,
  -0.1778387f, -0.0392555f, +0.2632550f, -0.1046251f, +0.2807727f, +0.0370493f, +0.1561310f, -0.0206415f,
  +0.2619802f, +0.0102907f, +0.0525447f, -0.0459345f, +0.2826396f, +0.2614306f, -0.1075860f, +0.1461467f,
  -0.1340071f, +0.1637134f, +0.1167610f, -0.0792185f, -0.0969219f, +0.1274590f, -0.1254505f, +0.0697793f,
  -0.0208640f, +0.1445804f, -0.0977041f, -0.0331714f, +0.1619563f, +0.0106383f, +0.2161126f, +0.1780836f,
  -0.0055439f, -0.2394323f, +0.2185617f, -0.1228956f, -0.0224969f, -0.2682199f, -0.0992835f, -0.0037118f,
  +0.1484169f, +0.3392078f, +0.0904822f, +0.0405206f, -0.1285870f, -0.0455427f, +0.1260058f, -0.0032866f,
  -0.1587226f, -0.1790241f, +0.0681780f, +0.0739048f, -0.0808667f, -0.2398116f, +0.1469089f, +0.2225768f,
  -0.0849287f, +0.0077890f, +0.1391848f, +0.0205669f, +0.0561197f, -0.1440634f, +0.1588045f, +0.0997576f,
  +0.0186036f, +0.0786727f, +0.0860473f, -0.0018777f, +0.1137618f, -0.1999698f, +0.1045336f, -0.0395260f,
  -0.2376083f, -0.0619701f, -0.0677964f, -0.0334340f, -0.1750149f, -0.2517589f, +0.1717300f, -0.1438683f,
  +0.0510011f, +0.1713259f, +0.1032988f, +0.2083309f, -0.1712595f, -0.2939348f, +0.2220866f, -0.0791263f,
  -0.0151352f, +0.4073879f, -0.1505532f, -0.0714458f, +0.1923996f, -0.1264043f, +0.1652435f, +0.0999350f,
  -0.1019423f, +0.2093395f, -0.2102356f, -0.4851767f, +0.2138939f, +0.3505414f, -0.2409898f, +0.0112524f,
  -0.0949018f, +0.1116927f, +0.4007306f, +0.2845406f, +0.0834504f, +0.1620248f, +0.0900593f, +0.2749357f,
  +0.0155285f, +0.1412490f, -0.1963464f, +0.2442716f, +0.1353101f, -0.1238128f, -0.0494154f, +0.0142015f,
  +0.0358638f, -0.2403234f, -0.2342684f, +0.2031667f, +0.0067963f, +0.1960194f, -0.7072875f, +0.0693462f,
  +0.1616071f, -0.0533821f, -0.0544208f, +0.2002194f, +0.1881738f, +0.2151097f, -0.2827060f, +0.1016102f
);

const float biases[4] = float[4](
  -0.0461952f, +0.0282694f, -0.0339262f, +0.0101470f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer63 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0842678f, +0.1523012f, -0.0916303f, -0.0148352f, -0.2528439f, -0.0295851f, -0.0892144f, -0.2544379f,
  -0.1881858f, -0.1688451f, -0.0035114f, -0.0461610f, -0.1079861f, -0.0722922f, -0.1012874f, -0.5909061f,
  -0.0817857f, -0.1048242f, +0.1911007f, +0.1175973f, +0.2236014f, -0.0342609f, +0.0063770f, +0.0296057f,
  +0.3749770f, +0.2190336f, +0.1877560f, -0.4457340f, +0.0459384f, +0.2315318f, +0.2311055f, -0.1321568f,
  +0.0539069f, +0.0408982f, +0.1796229f, -0.3489164f, -0.1394579f, -0.1516197f, +0.3208019f, -0.5828991f,
  -0.0801743f, +0.0185919f, -0.2020038f, +0.0438578f, +0.2663372f, -0.0843521f, +0.2988232f, +0.0895354f,
  -0.2390152f, +0.0167572f, -0.2521070f, +0.0121825f, +0.2197844f, -0.2614786f, -0.1384052f, +0.3604943f,
  -0.4269956f, -0.1289322f, +0.1525096f, +0.1153636f, -0.0749013f, -0.3410521f, +0.1053094f, -0.1366653f,
  -0.0608664f, +0.0015315f, -0.0015865f, +0.0980943f, +0.0554767f, +0.2021726f, +0.1087698f, -0.0403625f,
  -0.0195032f, -0.0972592f, +0.0120894f, +0.0238519f, +0.0576698f, +0.0387644f, -0.0279158f, +0.1450314f,
  +0.1423194f, -0.0727599f, -0.1152253f, -0.0749519f, +0.2588553f, -0.0855189f, +0.0237490f, -0.1140163f,
  +0.1836003f, +0.2226881f, -0.1877437f, -0.0361475f, -0.2004579f, -0.0323985f, -0.1177478f, -0.1661878f,
  -0.3238304f, -0.2224245f, +0.2489643f, +0.1118682f, -0.0351365f, -0.1795267f, -0.0392667f, -0.0398700f,
  -0.3106136f, -0.0020166f, -0.2133736f, +0.5478572f, -0.2808495f, -0.2259770f, -0.0020252f, -0.1127752f,
  +0.0988141f, -0.0301255f, +0.2182463f, +0.1352715f, -0.1799876f, +0.0026620f, -0.0384580f, +0.0782494f,
  -0.0993531f, -0.0039547f, -0.0235755f, +0.2383826f, +0.0883898f, -0.0931160f, +0.1398568f, -0.2701819f,
  -0.0056321f, +0.0255303f, +0.0881957f, -0.3136559f, +0.3615235f, -0.1917938f, +0.0820680f, +0.1232719f,
  +0.0477380f, -0.1092683f, -0.2520846f, +0.1807579f, +0.0273860f, -0.3171391f, +0.2229262f, +0.1673248f,
  +0.0636515f, -0.1258565f, +0.0627442f, -0.2142311f, -0.1755403f, -0.0325870f, -0.3067347f, -0.0897851f,
  -0.1173875f, +0.0929582f, +0.0469178f, -0.0781309f, -0.1586233f, -0.0230897f, -0.4447413f, -0.1512925f,
  -0.0774158f, +0.1836068f, +0.2102972f, -0.0453472f, -0.1431038f, +0.2232339f, -0.0772576f, +0.0561625f,
  +0.0783964f, +0.0705769f, +0.0843824f, +0.3625633f, +0.2666511f, +0.2241334f, -0.1670373f, -0.1085568f,
  -0.0903850f, +0.4523875f, +0.0765691f, +0.1213502f, +0.3337895f, -0.1742472f, -0.1415424f, +0.1389657f,
  +0.0648476f, -0.1170543f, +0.0443233f, -0.0066868f, -0.0939360f, +0.1053308f, -0.1491576f, +0.0399594f,
  -0.0027070f, +0.1732058f, +0.1230957f, +0.1985022f, -0.0421194f, +0.0057312f, +0.0947648f, +0.0018423f,
  +0.1846183f, +0.0779169f, -0.1136527f, +0.1383659f, -0.1851556f, +0.0150284f, +0.0789553f, -0.2482357f,
  +0.1204331f, +0.0371592f, -0.2991732f, -0.2552840f, +0.2891415f, +0.0399919f, -0.0543776f, +0.0096191f,
  -0.0162280f, -0.1187089f, -0.0973018f, +0.1640751f, +0.3044876f, -0.1074767f, -0.0789829f, -0.1038910f,
  +0.1254960f, +0.3203328f, -0.0950601f, -0.2206826f, +0.0086987f, -0.1333319f, +0.3675544f, -0.2117367f,
  +0.0733776f, +0.1586321f, +0.3049959f, -0.3032220f, +0.0441815f, -0.2749923f, +0.3427496f, -0.3579052f,
  +0.0048564f, +0.0586194f, +0.0600071f, +0.0083137f, -0.1215015f, -0.1016592f, +0.1654527f, +0.2140788f,
  +0.3113276f, -0.0697303f, -0.2637064f, -0.4102987f, +0.2314446f, +0.2287211f, -0.2225145f, -0.0149043f,
  +0.0903875f, +0.1767532f, +0.1848475f, +0.2342136f, +0.1455582f, +0.0854644f, -0.0673728f, -0.0172102f,
  +0.0239122f, +0.0857055f, +0.0045196f, +0.0476889f, -0.0098282f, -0.0722851f, +0.0243656f, -0.0421186f,
  +0.0188195f, -0.0489136f, -0.0015347f, -0.0375789f, +0.0761276f, -0.0246045f, +0.1754460f, +0.1382290f,
  +0.0408427f, +0.0160972f, -0.0539750f, -0.1955202f, -0.1661214f, -0.0141729f, -0.0963425f, +0.1264727f
);

const float biases[4] = float[4](
  -0.1735602f, +0.0139769f, +0.0602617f, -0.2583528f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer63 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0557104f, +0.2549840f, -0.1302163f, -0.0871916f, +0.2364801f, +0.2607995f, -0.0090887f, -0.0563837f,
  -0.1228695f, -0.1204461f, +0.1246604f, +0.0311313f, +0.0595967f, -0.0248446f, +0.0670526f, -0.0259956f,
  -0.0376848f, +0.2073496f, -0.0612944f, +0.0693555f, -0.0115946f, +0.0642189f, -0.1910275f, +0.0344321f,
  -0.3032453f, -0.1733949f, +0.2404192f, +0.0615242f, -0.0268706f, +0.0723872f, -0.1692007f, -0.0089241f,
  +0.2041220f, +0.2237516f, +0.1321963f, +0.0975863f, +0.3116738f, -0.0169026f, +0.1283523f, +0.2316090f,
  -0.0563019f, +0.1777546f, -0.1639744f, +0.1316907f, +0.1261289f, -0.0799680f, -0.0363385f, +0.1390515f,
  +0.0079925f, +0.2192421f, -0.0947400f, -0.2889172f, -0.1297646f, -0.0934207f, +0.2490050f, -0.3102523f,
  +0.0479797f, -0.0336734f, +0.1843958f, -0.0861913f, +0.1394910f, -0.0100553f, -0.2197723f, +0.1879047f,
  -0.1740039f, +0.0283127f, -0.1942105f, +0.0575034f, -0.1586756f, -0.1357187f, -0.2443962f, +0.0253338f,
  -0.0964588f, +0.1064329f, +0.2084195f, -0.0149062f, +0.0372683f, +0.1739141f, -0.2340263f, +0.0991949f,
  +0.0308427f, -0.3503259f, +0.0888076f, +0.0180408f, +0.1693867f, +0.1406296f, -0.0518106f, -0.1451127f,
  -0.1388013f, +0.5603681f, +0.0627478f, -0.3579924f, +0.2730240f, -0.1166608f, +0.1439589f, -0.3163404f,
  -0.0946684f, -0.1985088f, +0.0340858f, -0.1110734f, -0.1977369f, -0.0768948f, -0.2762911f, +0.2698342f,
  -0.3434058f, -0.4030578f, -0.3442006f, +0.0695155f, +0.1918700f, -0.2505365f, -0.3571406f, +0.1808768f,
  +0.2041908f, +0.4287541f, +0.0622574f, -0.2140194f, +0.2828401f, -0.0062217f, +0.3398763f, -0.4811121f,
  -0.1166068f, +0.2345790f, +0.1926369f, +0.1336821f, +0.1581175f, +0.0500880f, -0.2104945f, +0.0613283f,
  +0.0010477f, -0.0680094f, -0.2740183f, -0.2160615f, -0.1024573f, -0.2178568f, -0.0246338f, +0.1726615f,
  -0.1124092f, +0.1916471f, -0.1710901f, -0.1431273f, +0.3705253f, +0.1290188f, -0.0434898f, +0.1450766f,
  -0.0725067f, -0.0570987f, +0.3343367f, -0.0302895f, +0.0951806f, +0.1916118f, -0.0629222f, +0.2426654f,
  -0.0189091f, +0.1681973f, +0.1534991f, -0.2166599f, -0.1186668f, -0.2081577f, +0.2115644f, +0.2639396f,
  +0.0891585f, +0.1957356f, +0.1670527f, +0.0008775f, -0.1704121f, -0.0092148f, -0.0198327f, +0.1297454f,
  -0.0222075f, +0.1296344f, +0.1766813f, -0.1596771f, +0.0025658f, +0.4581844f, -0.0755918f, +0.0905758f,
  +0.0557712f, +0.0442493f, +0.2396325f, +0.0437059f, -0.1528265f, -0.1582568f, +0.0089707f, +0.2940502f,
  -0.0737268f, -0.2811239f, -0.1543147f, +0.0587144f, -0.0871488f, +0.1354589f, +0.1085177f, +0.0627956f,
  -0.1631227f, -0.1058501f, +0.2330655f, -0.0227423f, +0.3113013f, +0.1563398f, -0.1862550f, -0.0635771f,
  +0.1089516f, +0.1934020f, +0.1468457f, -0.1033336f, +0.0089358f, -0.0575166f, +0.0472389f, -0.1852797f,
  -0.0227242f, -0.0112974f, +0.0730535f, -0.0354941f, +0.1279646f, +0.0180540f, +0.0333073f, +0.1674693f,
  +0.0419986f, -0.0818672f, -0.2751740f, -0.0073802f, +0.0042785f, -0.0886365f, +0.0328619f, -0.0058052f,
  +0.2458553f, -0.2603890f, +0.1605512f, -0.0543417f, +0.0733223f, +0.3955281f, -0.0321068f, +0.0114374f,
  +0.0952512f, -0.0693164f, +0.1405282f, -0.0941654f, +0.2318599f, +0.1328662f, +0.1936000f, -0.0448862f,
  -0.3899830f, +0.1069207f, +0.2202721f, -0.0472019f, -0.1792129f, -0.0149504f, -0.2878287f, -0.0579541f,
  -0.3642977f, +0.0629278f, -0.1628294f, +0.0686177f, -0.4025363f, -0.3172245f, -0.1581127f, -0.1186771f,
  -0.2539340f, -0.1088836f, -0.0848112f, +0.0479007f, -0.4347255f, -0.0072241f, -0.3356571f, +0.0616579f,
  +0.1338668f, +0.1413639f, -0.0095545f, +0.2624410f, +0.0847394f, -0.3894334f, +0.2194831f, +0.0380154f,
  +0.6258481f, -0.0745181f, +0.2902082f, +0.1833905f, +0.0070680f, -0.0119856f, +0.1713013f, -0.2979730f,
  +0.1904173f, +0.1566058f, +0.1771754f, +0.0997826f, -0.0268157f, -0.1976587f, +0.0375093f, -0.2868938f
);

const float biases[4] = float[4](
  -0.0385157f, -0.0975027f, -0.0331809f, +0.0042951f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer64 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0843517f, -0.0773619f, +0.0734800f, +0.0325546f, +0.1891629f, -0.2529568f, +0.0029706f, +0.0871023f,
  +0.2477825f, +0.0011785f, -0.2814932f, -0.0038446f, -0.0330075f, -0.1250458f, -0.3162562f, +0.3020491f,
  +0.2065174f, -0.0042750f, +0.2099986f, +0.0078366f, -0.1049314f, +0.1084782f, -0.0729725f, +0.0212689f,
  +0.2247220f, -0.0757338f, -0.0325480f, +0.3601743f, +0.0925294f, +0.4760249f, +0.0637652f, -0.2334233f,
  +0.0088546f, +0.5659236f, -0.2616626f, -0.0414684f, +0.0259241f, -0.2156402f, +0.1860024f, -0.6136870f,
  -0.2223934f, +0.1302774f, -0.1135680f, +0.1175299f, +0.2586688f, -0.0462257f, +0.0690178f, -0.0271353f,
  +0.0672452f, -0.3829719f, -0.0412459f, +0.2737177f, +0.1326029f, +0.0330789f, +0.0225568f, -0.0687260f,
  +0.0463072f, -0.0531113f, +0.2366980f, +0.0420773f, +0.2272879f, +0.1058259f, +0.1873268f, +0.1962406f,
  +0.1298286f, -0.0756402f, -0.0468113f, +0.0011806f, +0.0218819f, +0.3077071f, +0.2167716f, -0.0325887f,
  -0.0616028f, -0.0350160f, -0.1450187f, -0.2599800f, +0.0740920f, +0.1883999f, +0.2634919f, -0.1618273f,
  +0.1660956f, +0.0141422f, +0.1387569f, +0.0814893f, -0.0037883f, +0.0781149f, +0.2649014f, +0.1965656f,
  -0.0416653f, -0.0460992f, -0.1284272f, +0.1017913f, -0.4549248f, +0.2606835f, +0.1658165f, -0.0168842f,
  -0.2020959f, +0.2011459f, +0.1166447f, -0.0269907f, -0.0272855f, +0.3740798f, +0.1979192f, -0.2569686f,
  +0.0093384f, +0.1809333f, -0.2536800f, +0.0999845f, -0.0546749f, -0.5479227f, +0.3822528f, -0.2374371f,
  -0.4536301f, +0.0534215f, -0.1862888f, -0.0641602f, -0.0137034f, -0.0086157f, -0.1377687f, +0.0036997f,
  +0.1531658f, -0.0816984f, -0.1596139f, +0.0260145f, +0.0146901f, +0.5889747f, -0.0971108f, -0.1276849f,
  +0.2297581f, +0.1143847f, -0.2014594f, -0.0177268f, +0.1107147f, +0.0120426f, -0.1726793f, +0.1744498f,
  +0.1628029f, +0.1846058f, -0.0295733f, +0.2070812f, -0.0640635f, +0.0165938f, +0.0070284f, +0.0933274f,
  +0.0978717f, +0.0638398f, -0.0722850f, +0.1956640f, +0.1449265f, +0.3333694f, -0.3296026f, +0.1377555f,
  -0.1061102f, +0.0356676f, +0.0856201f, -0.0359320f, -0.0390125f, -0.2950878f, -0.0939232f, +0.3962485f,
  +0.0664734f, -0.0296330f, -0.0547916f, -0.0310681f, -0.0812752f, -0.0338186f, +0.0986483f, -0.1715947f,
  +0.0846831f, -0.0147096f, -0.1817455f, -0.2398497f, -0.0421000f, +0.3540285f, -0.0086852f, -0.1929889f,
  -0.3709297f, -0.1423246f, +0.0380117f, +0.4076765f, +0.3360686f, -0.4193142f, -0.1769734f, -0.3629202f,
  -0.2032571f, -0.0503865f, -0.0613872f, -0.0175372f, -0.1012647f, -0.0522817f, -0.0365261f, -0.2160888f,
  -0.1244401f, -0.2642553f, -0.2225111f, -0.6646575f, +0.0385155f, +0.0417459f, +0.0374962f, +0.1147087f,
  -0.1432953f, -0.1886936f, -0.0739435f, +0.2243040f, +0.0663908f, +0.0898090f, +0.0703182f, +0.1051909f,
  +0.0169507f, -0.4036847f, -0.1000939f, +0.0722548f, -0.0174180f, +0.2212988f, +0.0566215f, +0.1974622f,
  +0.1178316f, +0.0695918f, +0.1500356f, +0.0933181f, -0.0051908f, +0.5944993f, +0.0436907f, -0.1271535f,
  +0.1197457f, +0.2767556f, -0.1097838f, +0.0957739f, -0.0449088f, +0.0655463f, +0.0383429f, -0.1846201f,
  -0.0004967f, +0.0987549f, +0.0711253f, -0.0485421f, +0.2399044f, -0.0310733f, +0.1621373f, -0.2731203f,
  +0.2729758f, -0.2656225f, +0.0103713f, -0.1068096f, -0.0107665f, +0.2745272f, -0.0035095f, +0.0656847f,
  +0.4904770f, -0.3766515f, -0.1184913f, -0.1763120f, -0.1133044f, +0.5816627f, -0.3248458f, -0.1511512f,
  +0.1770395f, +0.0476297f, -0.0938277f, -0.1522942f, -0.3243176f, +0.3336800f, -0.0060226f, -0.0178529f,
  +0.0490664f, -0.1616215f, +0.2511007f, +0.5703397f, -0.1631114f, -0.1055900f, +0.1384343f, -0.2393948f,
  +0.3114299f, -0.3881660f, -0.0006043f, +0.1952915f, -0.1052031f, +0.2074773f, +0.1258765f, +0.0522296f,
  +0.2541147f, -0.2313499f, +0.3581881f, -0.0152437f, -0.0289779f, +0.1115818f, +0.0201218f, -0.0706203f
);

const float biases[4] = float[4](
  -0.0197393f, -0.0262210f, +0.0076217f, +0.0398376f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer64 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2056168f, +0.3272472f, -0.0884450f, +0.0380768f, -0.1453246f, +0.2210839f, +0.0126661f, -0.0275311f,
  -0.2154470f, -0.0468844f, +0.0809823f, +0.1334973f, -0.2115890f, -0.1378197f, -0.2383728f, -0.1740195f,
  -0.1300767f, +0.0952499f, -0.1736334f, +0.1044815f, +0.1281424f, -0.1665822f, +0.0351139f, +0.0390070f,
  -0.2357478f, +0.0019526f, +0.1438207f, -0.2471764f, -0.3688271f, -0.1631275f, +0.0662977f, +0.1305925f,
  +0.4585380f, -0.0243781f, -0.3659034f, +0.1781214f, -0.3744852f, -0.2562550f, -0.0357093f, +0.0115275f,
  -0.1300549f, -0.1067763f, -0.0875885f, +0.2061375f, +0.0820118f, -0.0057491f, +0.1418136f, +0.0654561f,
  -0.1106825f, +0.2606444f, +0.1275781f, +0.4833891f, -0.1927833f, -0.4357361f, +0.0944648f, -0.2572562f,
  -0.4511393f, -0.1297131f, -0.0749836f, +0.3583083f, -0.1141452f, -0.1644025f, +0.1836407f, +0.0511993f,
  +0.2061150f, +0.0517720f, -0.0452354f, -0.1508628f, +0.0290740f, -0.0061175f, +0.1872984f, -0.1181452f,
  -0.1004891f, +0.0214688f, -0.0278045f, +0.1457372f, +0.1560770f, -0.2409048f, -0.3307067f, +0.1671052f,
  -0.0777601f, +0.1756179f, -0.0514097f, +0.0516911f, +0.0289295f, +0.0290793f, +0.0843683f, +0.4332720f,
  +0.2379666f, +0.0428546f, -0.0571685f, +0.0080988f, +0.2030831f, -0.1093154f, -0.0428446f, +0.0563566f,
  -0.0495138f, +0.0951206f, +0.0363215f, -0.0552552f, -0.1428001f, -0.1391413f, +0.0013193f, -0.3201974f,
  -0.0111007f, -0.0665609f, +0.0054891f, -0.0091000f, -0.1054806f, -0.1436024f, -0.0125015f, -0.4001495f,
  +0.0268819f, -0.0620631f, -0.1551902f, +0.0798594f, +0.0515002f, +0.0107881f, -0.2304911f, -0.0082860f,
  +0.2702007f, +0.1868317f, +0.1831264f, +0.2186177f, -0.0403236f, -0.4298267f, +0.1719941f, -0.0998251f,
  +0.0677837f, -0.1553567f, -0.1058146f, -0.0557308f, +0.1697377f, +0.0859356f, +0.0831851f, +0.0353822f,
  +0.1745901f, -0.1644988f, -0.1520434f, +0.2086059f, +0.0166425f, -0.0670906f, -0.1304752f, +0.1357981f,
  -0.0639843f, -0.0936466f, -0.1661678f, +0.2510464f, +0.1472641f, -0.0425619f, -0.1766872f, +0.0075201f,
  -0.1027495f, -0.0931280f, -0.0558499f, +0.0642599f, +0.0301870f, -0.1099062f, -0.0881305f, +0.2086126f,
  +0.2212032f, +0.1031925f, +0.0278180f, -0.1648713f, +0.0296319f, -0.0937585f, -0.1297018f, +0.1018376f,
  +0.0538585f, -0.0134999f, +0.0601174f, +0.2311331f, -0.0496863f, +0.3105889f, -0.0147237f, +0.0722912f,
  -0.0266949f, -0.2134044f, +0.2107933f, +0.1278349f, -0.2185167f, +0.0238995f, -0.3347668f, -0.1181922f,
  -0.1463514f, -0.3023698f, -0.0356406f, -0.0704061f, +0.1495550f, -0.3130649f, -0.0484375f, -0.0336238f,
  -0.0772322f, +0.0399497f, +0.1232812f, -0.2177527f, -0.1203977f, +0.1938269f, -0.3101439f, +0.0944298f,
  +0.0275544f, +0.0584373f, +0.1961394f, -0.2750657f, -0.0541691f, -0.0153875f, -0.0686951f, +0.1673242f,
  +0.1326924f, -0.0320548f, +0.2797431f, +0.2228237f, -0.2833553f, +0.0618471f, -0.0550031f, -0.0466385f,
  -0.0717758f, -0.1643018f, -0.2293759f, -0.1276830f, -0.1095957f, +0.1945682f, -0.2502401f, -0.3028443f,
  +0.2441784f, -0.0012014f, +0.1256677f, -0.2379783f, +0.0865266f, -0.0741053f, +0.2201632f, +0.0595500f,
  -0.2032227f, -0.0027037f, +0.1636707f, +0.0885120f, +0.2116123f, -0.0006107f, +0.0287890f, +0.0248851f,
  +0.1218787f, -0.1101560f, -0.0652870f, -0.5038646f, -0.1631935f, -0.0678878f, -0.1103698f, -0.3196278f,
  +0.5206963f, +0.1644896f, +0.1484777f, +0.0508425f, +0.0139328f, +0.2411430f, -0.2173151f, -0.1647305f,
  -0.1282919f, +0.0010103f, +0.2341214f, -0.2081408f, +0.3298462f, -0.2576587f, -0.1485767f, -0.3994613f,
  +0.1099753f, +0.0271460f, -0.0575305f, +0.1600146f, -0.1909987f, -0.1134465f, -0.3284423f, -0.2691013f,
  +0.3853863f, +0.1208657f, +0.2367750f, +0.1575504f, +0.2555418f, -0.0008583f, -0.1774780f, -0.0885761f,
  +0.0484361f, +0.0921118f, -0.0991671f, +0.0953371f, -0.0989859f, -0.0287769f, -0.1162560f, -0.2028536f
);

const float biases[4] = float[4](
  +0.0250388f, +0.0299986f, -0.0204631f, -0.0149631f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer65 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0569961f, +0.0679063f, +0.1608735f, -0.1403744f, +0.1639432f, +0.3937264f, -0.1550943f, +0.0451233f,
  -0.0908673f, -0.1608516f, +0.3210524f, +0.1677920f, -0.1150484f, -0.0458038f, -0.1037414f, +0.0206467f,
  +0.0769416f, +0.1801652f, -0.0062639f, +0.2595181f, +0.0548667f, -0.0810215f, -0.1481210f, -0.1132600f,
  +0.0470775f, -0.0387395f, -0.1103825f, +0.0289732f, +0.3746011f, -0.1508377f, -0.2310679f, -0.4213050f,
  +0.2335492f, +0.1817715f, +0.3586985f, -0.0475931f, +0.2021275f, -0.0313683f, -0.0806076f, -0.1124752f,
  +0.2642759f, -0.0727377f, -0.1551263f, -0.0596775f, -0.4993229f, +0.0100210f, -0.1015903f, +0.0990826f,
  +0.0671076f, -0.3250048f, +0.0196279f, -0.0759692f, -0.0213076f, +0.1027301f, +0.3885187f, +0.0113341f,
  -0.1263695f, -0.1928043f, +0.0133762f, -0.2632811f, -0.2133322f, -0.1242222f, +0.1033239f, +0.0296236f,
  -0.0641138f, -0.0866972f, +0.0387594f, +0.2278083f, -0.1502935f, -0.2492328f, +0.3268904f, -0.0568229f,
  -0.1931783f, +0.2018413f, -0.2332231f, -0.0496454f, +0.1457003f, +0.1301245f, -0.0529078f, +0.1291408f,
  -0.0588325f, +0.0022829f, -0.4020864f, +0.1494791f, +0.2139261f, -0.0577833f, -0.0321000f, +0.0014527f,
  +0.0154134f, +0.0427125f, +0.0139974f, +0.2242246f, -0.2762792f, -0.1824132f, -0.0387000f, +0.0804338f,
  -0.2775547f, -0.1442855f, -0.0745934f, -0.0404878f, +0.1525190f, -0.0314185f, +0.1271115f, +0.1978416f,
  -0.1541747f, -0.0832976f, -0.0936888f, -0.3617328f, +0.0225287f, -0.0410313f, -0.2684214f, +0.2597323f,
  -0.0117770f, -0.1423722f, -0.1095296f, +0.0401763f, -0.0767962f, -0.2594509f, +0.0207409f, +0.1894211f,
  -0.0278693f, +0.0737496f, -0.1986934f, +0.2023251f, +0.2112139f, -0.2574524f, -0.0402643f, +0.0804751f,
  +0.0166090f, +0.0255758f, +0.0813763f, -0.0941934f, +0.1924612f, -0.0967567f, -0.0852898f, -0.0236079f,
  -0.1291266f, +0.0551399f, -0.0530948f, -0.0692735f, +0.0809677f, -0.0101778f, +0.2775753f, +0.0689727f,
  +0.2099715f, +0.2402224f, +0.1855631f, -0.0299977f, +0.1627124f, -0.0418380f, +0.2446740f, +0.4555998f,
  +0.4038586f, -0.2782314f, +0.3043972f, -0.0729048f, +0.3897232f, +0.2315441f, -0.1345517f, +0.2514026f,
  +0.1007384f, -0.0020699f, +0.0479831f, -0.0704657f, -0.0239390f, -0.1074882f, -0.0017500f, -0.0409683f,
  -0.1042690f, +0.0485999f, -0.0132518f, +0.0476937f, +0.0134524f, +0.1216178f, +0.0222452f, -0.1196281f,
  -0.0750627f, -0.2984609f, -0.3632503f, -0.2710410f, -0.1884340f, +0.1709996f, -0.1151681f, +0.0737883f,
  +0.0166838f, +0.0643994f, -0.0353305f, -0.3549434f, -0.0412633f, -0.1423842f, -0.2953891f, -0.0014311f,
  -0.0619433f, -0.0028868f, +0.1264273f, +0.1507428f, -0.0686290f, +0.0668727f, +0.0734699f, +0.1388129f,
  +0.0646809f, -0.0018536f, +0.0250809f, -0.0038472f, -0.2521622f, -0.0025701f, -0.1176277f, -0.0591352f,
  +0.0366140f, -0.0116629f, +0.1142313f, -0.1029394f, -0.2822635f, +0.1562153f, +0.1097682f, -0.3597034f,
  +0.0555226f, -0.1811467f, +0.2302616f, -0.3517511f, +0.1242714f, -0.0640797f, +0.0521219f, +0.1413938f,
  +0.0715343f, +0.3089902f, -0.0839233f, -0.2078177f, +0.0378434f, -0.2657677f, +0.1159618f, -0.2097719f,
  +0.0629667f, -0.0725254f, -0.1645934f, -0.1244869f, +0.0553248f, +0.1399528f, -0.0106787f, +0.1382664f,
  +0.1100554f, +0.0259599f, +0.0732329f, -0.0719402f, +0.1447325f, -0.2346923f, -0.1544348f, -0.4351976f,
  +0.1877695f, -0.1527829f, -0.1672098f, -0.1688010f, -0.1698968f, -0.3005196f, -0.2062049f, +0.1081816f,
  -0.1468084f, +0.0741126f, +0.0363358f, +0.4559108f, -0.0213323f, +0.0664594f, +0.1773020f, -0.0810207f,
  +0.2665567f, -0.1872234f, -0.1959309f, -0.1730181f, +0.0346352f, -0.1507600f, +0.0565831f, -0.1720522f,
  +0.2606809f, -0.0031754f, -0.3193238f, -0.1930905f, -0.0489098f, -0.0224784f, -0.0314363f, +0.0858118f,
  -0.0020671f, -0.0992272f, -0.2163186f, +0.1731655f, +0.0003468f, +0.0261372f, -0.0746731f, +0.3752897f
);

const float biases[4] = float[4](
  +0.0981378f, -0.1091391f, +0.0094875f, -0.1401694f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer65 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0139038f, +0.0617769f, +0.0118638f, -0.0629845f, -0.1031018f, +0.0181047f, +0.1620848f, +0.1152802f,
  +0.0804860f, +0.0856824f, +0.3543808f, -0.0895484f, +0.2470128f, -0.1602889f, -0.0166167f, -0.0120493f,
  +0.0956977f, +0.2959168f, +0.1723623f, -0.0172459f, +0.1646544f, -0.0904117f, -0.0967959f, +0.0052321f,
  -0.2089061f, -0.0533492f, +0.1222006f, +0.1786409f, +0.2660564f, -0.3264638f, +0.1628050f, -0.0182419f,
  +0.0906500f, +0.0571754f, +0.0483839f, -0.0310070f, -0.0239304f, -0.2408573f, -0.0282553f, -0.0228006f,
  -0.1030429f, +0.0510820f, +0.0739245f, +0.2228741f, +0.2506914f, -0.0663541f, +0.0925841f, +0.0898581f,
  +0.0239374f, -0.0651879f, -0.0948783f, +0.2111936f, -0.0146426f, +0.0637152f, -0.0724033f, +0.1432225f,
  -0.3500209f, -0.1328089f, +0.1081344f, +0.1455844f, +0.2628511f, -0.0333772f, -0.0684981f, +0.1495545f,
  -0.1438670f, -0.0366918f, -0.0672470f, +0.1800842f, +0.0292512f, +0.2352842f, -0.1735729f, +0.2765936f,
  +0.1698356f, +0.0460632f, +0.0363919f, -0.0023510f, +0.0214115f, -0.0250796f, +0.1394997f, +0.2290376f,
  +0.0438933f, -0.0778301f, +0.2631365f, -0.0873358f, -0.1419849f, -0.0178949f, -0.3516550f, +0.0230795f,
  +0.0339155f, +0.0571955f, -0.1414768f, +0.0504960f, -0.0818800f, -0.2243275f, +0.1032156f, -0.0005629f,
  +0.0047419f, +0.0976752f, +0.1163026f, +0.1529498f, -0.1682392f, +0.0305836f, +0.1140307f, +0.2198178f,
  -0.0335653f, -0.0724356f, -0.1580523f, +0.2449609f, +0.1934412f, -0.1634652f, +0.1096608f, -0.0921441f,
  +0.0769925f, -0.0080228f, -0.1959735f, +0.0451635f, +0.1032534f, -0.2823302f, +0.0353847f, -0.0516226f,
  -0.0340868f, +0.2373237f, +0.0449203f, -0.1238841f, +0.0496666f, -0.1528460f, -0.1238170f, +0.0613660f,
  +0.0041089f, -0.1979862f, -0.3481517f, -0.0801590f, +0.0666333f, +0.1390577f, +0.0321792f, +0.1610965f,
  -0.0155934f, -0.1753167f, +0.1390224f, +0.0649384f, -0.0579963f, +0.0861165f, +0.2062595f, -0.1032806f,
  +0.0070634f, -0.0668158f, +0.1396426f, +0.0822351f, +0.1259869f, -0.0793098f, -0.1148682f, -0.1907767f,
  +0.1168600f, -0.3778905f, -0.0583329f, +0.1374892f, -0.0044479f, -0.0848488f, -0.0891712f, -0.1960215f,
  +0.0128625f, +0.1125894f, -0.2175873f, +0.0531955f, -0.1001632f, -0.3498706f, +0.1182746f, +0.0044153f,
  +0.0202528f, +0.2474269f, +0.0069875f, -0.0217406f, +0.1601607f, +0.2198943f, +0.1658790f, +0.1044840f,
  +0.2362803f, +0.2990116f, +0.0468189f, +0.1245013f, -0.0435604f, -0.0488849f, -0.0126512f, +0.1666279f,
  +0.0468036f, -0.3218247f, -0.1269375f, -0.1160989f, -0.6800544f, -0.3190827f, -0.0486397f, +0.1381475f,
  +0.0400263f, -0.1859417f, -0.1281179f, -0.0823119f, +0.0612232f, +0.1143373f, -0.3497978f, -0.1861963f,
  +0.0045431f, -0.0266657f, -0.0600347f, -0.2077755f, +0.2822902f, -0.1457194f, +0.0940776f, +0.2817826f,
  +0.1719624f, -0.0400931f, -0.0461934f, -0.0430528f, -0.4121676f, +0.1370266f, +0.0217211f, +0.2135511f,
  +0.0240533f, -0.1474633f, +0.0283847f, +0.0473195f, +0.0833531f, +0.1898125f, -0.0458837f, -0.0681276f,
  +0.1041424f, +0.0466111f, -0.0169069f, -0.2428159f, +0.0457498f, +0.1058026f, -0.0898444f, +0.0943956f,
  +0.0736449f, -0.0833467f, -0.2304789f, -0.1713241f, -0.1429166f, -0.1107802f, +0.0819187f, -0.1113070f,
  -0.0573751f, -0.0642834f, -0.0777942f, +0.0452870f, +0.0930809f, +0.0222789f, -0.2804394f, +0.3107933f,
  -0.1857074f, +0.2666093f, -0.0860699f, +0.0878814f, -0.0357751f, +0.1273094f, -0.2051269f, -0.0098440f,
  -0.0339303f, +0.0595496f, +0.1181787f, +0.1893397f, +0.2378606f, -0.0182405f, +0.1435605f, +0.1368320f,
  -0.0187543f, +0.1105273f, +0.1726357f, +0.0178629f, -0.1694954f, -0.2678330f, +0.0084057f, +0.1330344f,
  -0.1906554f, +0.2196199f, -0.2420296f, -0.0633552f, -0.2610194f, -0.1340527f, -0.0387612f, +0.1990087f,
  -0.0035755f, +0.0587829f, +0.0060296f, +0.1971252f, -0.1486670f, -0.1845957f, +0.0015216f, +0.1374426f
);

const float biases[4] = float[4](
  -0.0138614f, -0.0300437f, -0.0427041f, +0.0046007f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer66 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1214004f, -0.0367702f, +0.0579968f, -0.1238268f, +0.2074298f, -0.0460695f, -0.0863062f, -0.0852702f,
  +0.2366142f, +0.0770498f, -0.2379028f, -0.1339127f, -0.0277848f, -0.0674467f, -0.0083478f, +0.2875144f,
  +0.1214080f, +0.0955097f, -0.1115641f, +0.2680016f, +0.1602554f, -0.0208873f, -0.1400285f, +0.1789552f,
  -0.2646408f, +0.0883253f, +0.3382845f, -0.1587664f, +0.0694132f, -0.1462652f, -0.0615760f, +0.0075156f,
  -0.2922859f, +0.1379812f, +0.3046639f, -0.0829606f, +0.1977306f, -0.0494936f, +0.3553351f, +0.0012107f,
  -0.1972167f, +0.0008559f, +0.1007572f, +0.1962888f, +0.0068473f, +0.1814640f, +0.0248558f, -0.1226266f,
  -0.2184363f, -0.0885793f, +0.1709912f, +0.4336753f, +0.1413067f, -0.0715438f, +0.0265268f, -0.1557841f,
  +0.1242287f, +0.1314497f, -0.2323001f, -0.2112022f, -0.1717227f, -0.0811225f, +0.1688202f, +0.1735061f,
  -0.0562773f, -0.0757010f, -0.1165000f, +0.0661289f, +0.0344584f, +0.0457920f, -0.0028141f, +0.1735666f,
  -0.1956624f, -0.0812043f, +0.0980587f, -0.0215084f, -0.1175167f, -0.0409925f, -0.2533386f, +0.0769980f,
  +0.1640541f, -0.1780542f, -0.1835632f, +0.0131943f, -0.0871588f, +0.2525038f, +0.0465747f, +0.1718431f,
  +0.2808459f, -0.1339688f, +0.0907352f, +0.0424498f, -0.3503549f, +0.0543318f, -0.0686584f, -0.0367163f,
  -0.1414915f, -0.2113225f, +0.0667023f, -0.0046056f, -0.2658425f, +0.1216639f, +0.0127796f, -0.1886425f,
  -0.0828866f, +0.0845060f, -0.0896530f, -0.0738808f, +0.2332168f, +0.1099551f, +0.1300392f, -0.3546351f,
  -0.0382739f, +0.0185453f, -0.0653296f, -0.0524856f, -0.0636165f, -0.0214178f, -0.0904394f, +0.0321510f,
  +0.0222047f, +0.0995776f, +0.0228341f, +0.0200302f, -0.0106578f, -0.0673574f, -0.1565795f, -0.0935010f,
  +0.1996375f, -0.0169882f, -0.0134751f, +0.1681587f, -0.0237689f, +0.3368973f, -0.0240640f, -0.0634901f,
  -0.1062547f, +0.0443141f, -0.1967690f, +0.0084187f, -0.0880179f, -0.1706142f, +0.1260973f, -0.2610072f,
  +0.0238598f, -0.0091575f, -0.0423053f, +0.2323947f, -0.2468443f, -0.0330567f, +0.1327678f, +0.1722536f,
  -0.2287956f, +0.1524968f, -0.0444337f, +0.0429447f, -0.0289758f, +0.2559437f, -0.3779933f, -0.0887613f,
  -0.0607538f, +0.0136226f, -0.2136156f, +0.3008496f, -0.1929988f, -0.0667303f, -0.0608874f, +0.0571584f,
  +0.1539512f, +0.0430163f, -0.1281739f, -0.1049145f, -0.1800561f, +0.1917657f, +0.2629485f, +0.0318753f,
  -0.3394468f, +0.1364883f, +0.2798863f, +0.0998229f, -0.1090901f, -0.0908840f, -0.1670350f, -0.3035552f,
  -0.2003808f, -0.1886239f, -0.1552303f, -0.1692843f, +0.0038587f, +0.0319356f, -0.1577481f, -0.0154770f,
  -0.0564608f, +0.1149309f, -0.0348012f, +0.2391784f, -0.0254831f, +0.2907530f, -0.0221811f, -0.0842113f,
  +0.0041006f, -0.0228516f, +0.2340044f, -0.0001647f, +0.1473046f, -0.4243061f, -0.0215131f, +0.1720508f,
  -0.0742641f, +0.1818206f, -0.0030156f, +0.1331208f, +0.0402669f, +0.0870165f, -0.1338028f, +0.0118706f,
  +0.0519755f, +0.1890926f, +0.2262456f, -0.2023944f, -0.2208175f, +0.1281293f, +0.0125731f, -0.0236468f,
  +0.2990279f, +0.0644294f, -0.0249021f, +0.0213244f, -0.1082878f, -0.0376636f, +0.0390681f, +0.3053500f,
  -0.0623659f, +0.1573834f, +0.1056384f, +0.0982213f, -0.0835009f, -0.0363992f, +0.1052049f, -0.0396976f,
  -0.1254536f, -0.0379892f, -0.0053323f, -0.1572246f, -0.1353652f, -0.0726612f, -0.1018192f, -0.2388257f,
  +0.2475980f, +0.2626060f, +0.3836722f, +0.2826490f, +0.0529189f, -0.1183530f, +0.0050996f, -0.2483383f,
  +0.1939646f, +0.0761937f, -0.0875714f, +0.2365578f, -0.1271273f, -0.0668599f, -0.0960098f, +0.2669874f,
  +0.0273406f, -0.4617825f, +0.0246152f, -0.2531046f, +0.0642525f, -0.0801256f, -0.0853481f, +0.0624769f,
  +0.1713943f, +0.0529143f, +0.0823273f, +0.0823075f, +0.1154260f, -0.2563871f, +0.1183799f, +0.2620694f,
  +0.1255659f, -0.0142505f, +0.1914839f, +0.0236571f, +0.1001369f, -0.2988098f, +0.2101580f, +0.0299399f
);

const float biases[4] = float[4](
  -0.0187325f, -0.0221241f, -0.0050983f, +0.0254335f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer66 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0583043f, -0.5950992f, -0.0934898f, +0.2388791f, -0.1216628f, +0.0129976f, -0.1125503f, -0.0722180f,
  +0.1196871f, -0.0490886f, -0.1041222f, -0.0962323f, -0.1790545f, -0.2328796f, +0.1069067f, +0.0442073f,
  -0.1786623f, -0.0619028f, +0.1582095f, +0.0949029f, -0.0065579f, +0.0665685f, +0.0472659f, -0.1275039f,
  -0.0183020f, -0.0243651f, -0.0583677f, +0.3515093f, -0.0053092f, +0.2692569f, -0.0078862f, -0.2218087f,
  +0.1142198f, -0.1400411f, +0.3506787f, +0.1808199f, +0.1007491f, -0.2559343f, +0.6105976f, -0.2135915f,
  -0.2117434f, +0.1250603f, +0.1114341f, +0.0137418f, -0.0817939f, -0.0495822f, +0.0389534f, -0.2493526f,
  -0.0846724f, +0.0679354f, +0.0848629f, -0.1638283f, -0.0868249f, +0.2753953f, -0.2488452f, -0.0793712f,
  +0.0632090f, -0.0179090f, +0.0704558f, -0.0651733f, +0.1263200f, +0.2929418f, -0.1791284f, -0.2713176f,
  -0.0895859f, +0.1261995f, -0.0388418f, -0.1840078f, +0.0744312f, +0.1584552f, -0.0960642f, +0.0063762f,
  +0.2198357f, +0.1272500f, -0.1276836f, +0.1688091f, -0.0699667f, +0.0577002f, -0.0375578f, +0.0582713f,
  +0.0850720f, +0.1995334f, -0.1802114f, +0.0841895f, -0.3129973f, -0.2470959f, -0.0107727f, -0.2085445f,
  -0.1321395f, +0.3064163f, -0.2042955f, -0.3236004f, -0.2242111f, +0.0995184f, -0.4801872f, +0.1836405f,
  +0.0002108f, +0.3486194f, +0.1118532f, +0.0461134f, +0.0452197f, -0.0915300f, -0.1028231f, -0.0117491f,
  -0.0119229f, +0.0997738f, +0.3525209f, +0.2844199f, +0.1596251f, -0.4289780f, +0.2123893f, -0.1770657f,
  +0.1358308f, +0.0250908f, -0.2062291f, +0.1051631f, +0.0019071f, +0.0649771f, -0.1604623f, -0.1298840f,
  -0.0254820f, +0.3850491f, +0.0166517f, +0.1532623f, -0.0952351f, +0.1832739f, +0.0958872f, -0.1260153f,
  +0.0191788f, -0.1667113f, -0.1299823f, +0.0893593f, +0.2142699f, +0.0358620f, -0.1137232f, -0.0821449f,
  -0.2557801f, +0.0309078f, -0.1103646f, -0.1474460f, -0.1002769f, +0.3582393f, +0.0695164f, +0.0150561f,
  +0.0119878f, -0.0435905f, -0.0455668f, +0.1850704f, -0.0872728f, -0.2441303f, -0.0211133f, +0.0232805f,
  +0.2634861f, -0.2905380f, +0.0840071f, -0.0903298f, -0.2200408f, -0.1426079f, +0.1209009f, +0.2692439f,
  -0.3440233f, +0.1445099f, -0.1746819f, -0.0751024f, +0.1224256f, +0.1078492f, -0.1270845f, -0.1727172f,
  +0.1605640f, +0.2706442f, -0.0941596f, +0.0640438f, +0.0006295f, +0.0882153f, -0.0671061f, +0.0107936f,
  +0.1670971f, +0.0074490f, -0.1797550f, -0.0437622f, -0.2280457f, +0.0632002f, -0.3363369f, -0.0829446f,
  +0.0050012f, +0.0006800f, +0.0987993f, -0.1593315f, -0.1088847f, -0.1058084f, -0.1664265f, +0.3302056f,
  +0.1314374f, +0.0499573f, -0.2863389f, +0.2728179f, -0.3295631f, +0.1643211f, +0.0694644f, -0.1275349f,
  +0.1588484f, +0.0361346f, -0.1040710f, -0.0387409f, -0.1904271f, +0.0136061f, -0.0339080f, +0.1326479f,
  -0.0291247f, -0.0687668f, +0.0748077f, -0.2961708f, +0.0003032f, -0.1002480f, +0.0000414f, -0.0719330f,
  -0.0851691f, +0.0185892f, +0.3607290f, -0.2443383f, -0.0214044f, -0.0031641f, -0.1672447f, -0.2078686f,
  -0.1343422f, +0.3544648f, +0.0523001f, -0.1225993f, +0.0606209f, -0.3952976f, -0.2473477f, +0.1818752f,
  +0.0857851f, +0.3820851f, +0.0826463f, +0.3245730f, -0.1255393f, -0.1073442f, +0.0419481f, +0.1491409f,
  -0.3020698f, +0.0714172f, +0.2857738f, -0.2046909f, +0.0755309f, +0.2225738f, -0.3741579f, -0.2948164f,
  +0.1983586f, -0.0335063f, +0.0866115f, +0.2399695f, +0.0373660f, +0.2396895f, +0.0491940f, -0.0174781f,
  +0.2781724f, +0.2537462f, +0.1514026f, -0.0726786f, -0.0292129f, -0.2329586f, +0.1488437f, +0.0629465f,
  +0.0838547f, +0.1166460f, +0.0833523f, -0.2722325f, +0.3091252f, -0.1687388f, -0.3100496f, -0.1578283f,
  -0.2948097f, +0.1743027f, +0.1183995f, +0.1421392f, -0.0700291f, +0.0241447f, +0.0568725f, -0.0807124f,
  -0.0349561f, -0.1341749f, -0.1388884f, -0.2753591f, +0.0964834f, +0.0626208f, +0.3766867f, -0.0477145f
);

const float biases[4] = float[4](
  -0.0061165f, +0.0345649f, -0.0242467f, -0.0275394f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer67 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2010338f, +0.1800014f, -0.0231903f, -0.2632291f, +0.2456733f, +0.1804107f, -0.1852242f, +0.2981057f,
  -0.2419770f, +0.3113936f, -0.0668884f, +0.2014136f, +0.1767516f, -0.1275938f, -0.2395450f, -0.5414536f,
  +0.1026180f, -0.0527501f, -0.0001247f, +0.0484735f, -0.0992812f, +0.0422905f, +0.0776597f, -0.0376111f,
  +0.1308387f, -0.0491348f, -0.1320777f, -0.0650805f, +0.4064828f, -0.0775717f, -0.1751566f, +0.5020609f,
  -0.1799908f, +0.2640084f, +0.3303469f, +0.2055710f, -0.1025805f, +0.0709049f, +0.1698054f, -0.4664436f,
  -0.1323963f, +0.0966802f, -0.1191135f, +0.0373522f, -0.0691032f, +0.0002283f, -0.0978956f, -0.0952499f,
  +0.0305124f, -0.0434791f, -0.2927667f, -0.2654096f, +0.0794003f, -0.2510023f, -0.0451647f, +0.2732773f,
  +0.0593457f, +0.0845475f, +0.0923640f, +0.1885550f, -0.0931885f, -0.1026800f, -0.0814736f, +0.2627594f,
  +0.1626455f, +0.0047868f, -0.0977597f, +0.0885787f, -0.1401166f, +0.1154401f, -0.0235366f, -0.0877972f,
  -0.0457454f, -0.0855985f, +0.1188171f, -0.0024731f, -0.0087651f, -0.2870487f, -0.2379362f, -0.2573017f,
  -0.1650890f, -0.0961216f, +0.1801207f, -0.1248479f, +0.1831190f, +0.1342322f, +0.0783602f, -0.0039597f,
  -0.0858590f, -0.2416101f, +0.0607602f, -0.0669333f, +0.1159836f, +0.0229535f, +0.1918144f, +0.0441692f,
  -0.2437067f, -0.2502567f, +0.0552724f, +0.1364286f, +0.0877819f, -0.3216153f, -0.2662326f, +0.0675841f,
  +0.3528326f, -0.1715322f, -0.2344312f, -0.1870096f, +0.2294507f, +0.0751244f, +0.2613162f, +0.0910015f,
  -0.0317446f, -0.1263170f, +0.0120641f, -0.2552742f, +0.2831054f, +0.1830514f, +0.0545261f, -0.2141183f,
  +0.0277868f, +0.0727025f, -0.0069567f, +0.0218535f, -0.0297285f, +0.1378961f, -0.0302426f, -0.1067983f,
  +0.0452946f, -0.1289707f, -0.1293732f, -0.1468106f, +0.1225725f, +0.1600629f, +0.3088294f, +0.1600530f,
  +0.1331723f, -0.0551562f, -0.2285599f, -0.2473631f, -0.1846759f, +0.1576040f, +0.0418536f, -0.0474770f,
  -0.1434268f, +0.0328453f, -0.0406180f, +0.1073694f, +0.1707626f, -0.1408145f, +0.0111014f, -0.1310571f,
  +0.1978034f, +0.3134538f, +0.1772376f, -0.5130631f, +0.0282086f, -0.5051773f, +0.1515638f, -0.4513822f,
  +0.2627515f, +0.3814754f, +0.0992298f, -0.3779267f, -0.0087453f, -0.2515367f, -0.1350364f, -0.6663718f,
  +0.1453836f, -0.1444913f, +0.0035841f, -0.1185217f, +0.1424272f, +0.0245823f, -0.1426839f, +0.0891591f,
  +0.4653078f, -0.7560689f, +0.1913222f, +0.0933956f, +0.3063368f, +0.0745489f, -0.4435582f, +0.1301592f,
  +0.4571244f, -0.1234096f, +0.1883520f, +0.0856316f, +0.0594497f, +0.3855417f, +0.0041008f, -0.0799291f,
  -0.0618785f, +0.1736528f, +0.0546984f, +0.0478435f, +0.0411886f, +0.0648743f, -0.1081346f, +0.1333572f,
  -0.3115169f, -0.3034173f, -0.1645211f, +0.2010792f, +0.0003565f, -0.0449366f, +0.0325958f, +0.0752323f,
  -0.3994588f, -0.4067502f, +0.0345628f, +0.2367681f, -0.0356561f, -0.0229301f, +0.1485454f, +0.2589836f,
  -0.1211240f, -0.2227538f, +0.0848685f, -0.0945170f, +0.0899704f, -0.0328811f, +0.1247593f, -0.1829702f,
  -0.1010183f, -0.0760907f, -0.1107151f, -0.1407847f, +0.1158936f, -0.2201646f, -0.2680796f, +0.1012160f,
  +0.0551820f, +0.1065903f, +0.0314563f, +0.1134280f, -0.1395132f, -0.1527763f, -0.0127029f, -0.0404270f,
  +0.1680963f, -0.1017456f, +0.0106922f, +0.0024376f, +0.0346506f, +0.0030304f, -0.0171910f, -0.1128927f,
  +0.3251053f, -0.1209548f, -0.0174499f, -0.1610249f, -0.2802777f, +0.0379753f, -0.2484598f, +0.3335378f,
  +0.1002980f, -0.0135242f, -0.0661308f, +0.0416096f, -0.0375302f, +0.2080786f, -0.0862172f, +0.2466031f,
  -0.0205644f, +0.0558766f, +0.1533843f, +0.0447843f, -0.1637195f, +0.0708627f, +0.0059329f, -0.2986906f,
  +0.1825533f, +0.0565864f, +0.1114832f, +0.0393502f, +0.2415793f, +0.0885156f, -0.0510186f, +0.1829785f,
  +0.2303653f, +0.0272503f, +0.1244198f, +0.0612449f, -0.0045885f, +0.0747630f, -0.0792511f, +0.2772870f
);

const float biases[4] = float[4](
  +0.0210967f, +0.0181085f, -0.0119662f, +0.0497306f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer67 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2787424f, +0.0563448f, -0.1743973f, -0.0609095f, +0.1209880f, -0.1315155f, -0.0509073f, +0.0459868f,
  +0.2282380f, -0.0766286f, +0.1255596f, -0.0692680f, -0.2342113f, -0.1113655f, +0.1906322f, -0.4500567f,
  +0.1711849f, -0.1546505f, -0.2102485f, -0.1894872f, +0.0596210f, +0.1450105f, -0.0082359f, +0.3288737f,
  -0.1099253f, -0.0880694f, -0.2020877f, -0.1726491f, +0.2287935f, -0.1822444f, -0.2910540f, +0.0163801f,
  -0.2254605f, +0.1682373f, +0.0628677f, +0.0932980f, +0.0479143f, -0.1449628f, +0.3135025f, +0.3788475f,
  +0.1364882f, -0.0033138f, -0.1216711f, +0.0435009f, -0.0558153f, +0.0385402f, -0.0860603f, -0.2218185f,
  -0.0001129f, +0.2212465f, +0.2199567f, -0.0392691f, -0.0875761f, +0.3671815f, -0.1752456f, +0.1015927f,
  -0.3251247f, -0.1397132f, -0.3503835f, -0.2356037f, +0.1125173f, -0.0083779f, -0.1416601f, +0.2218567f,
  -0.0524352f, -0.1262707f, +0.2092990f, +0.2916942f, +0.2829137f, -0.2425591f, +0.3145834f, -0.2242631f,
  +0.0939226f, -0.1921938f, -0.1406256f, +0.2481852f, -0.1288733f, -0.0999791f, -0.0396392f, -0.1246586f,
  -0.0348377f, +0.0020794f, +0.1399694f, -0.0641490f, -0.0343494f, +0.2028301f, -0.1428232f, -0.0188529f,
  +0.0604663f, +0.0518025f, -0.0273757f, -0.0959107f, +0.0095172f, +0.0489493f, +0.0082901f, -0.0436343f,
  +0.0658618f, +0.1411926f, -0.2254697f, -0.0115143f, +0.1317044f, -0.1365248f, -0.0051609f, -0.0413431f,
  -0.0696006f, +0.1516865f, +0.0782614f, -0.2359219f, -0.0700448f, -0.2653408f, +0.2081711f, -0.1953301f,
  +0.0340895f, +0.1102199f, -0.0897731f, +0.1200165f, -0.2742104f, +0.0357297f, +0.0252128f, +0.1194024f,
  +0.2871319f, +0.0039783f, -0.0508310f, -0.3540404f, +0.1560601f, -0.0858661f, +0.5330771f, +0.1013346f,
  +0.4167047f, +0.1438879f, +0.3451455f, -0.0838971f, +0.1327820f, +0.0592315f, -0.0678617f, -0.5432139f,
  +0.0437312f, -0.0210908f, -0.2361834f, -0.0311651f, -0.1617287f, -0.0512662f, -0.0067423f, +0.3340608f,
  -0.3007664f, -0.0381460f, -0.1116595f, -0.5748334f, +0.2406979f, -0.2139798f, +0.0120465f, +0.1247086f,
  +0.1849084f, +0.0802766f, +0.0871440f, +0.2253483f, +0.1316168f, +0.2366556f, +0.0740005f, -0.3336688f,
  -0.0126769f, -0.0025832f, -0.3207188f, -0.2136092f, -0.0358157f, +0.0074881f, -0.0681768f, -0.0202728f,
  +0.2487507f, -0.0453564f, +0.1661707f, -0.2475579f, -0.4761434f, -0.1862727f, -0.2722443f, -0.0955011f,
  +0.1117894f, +0.2486673f, -0.2457656f, +0.1096418f, -0.2600439f, +0.1395096f, +0.0651422f, +0.1025359f,
  -0.1577531f, -0.0008316f, -0.1921720f, +0.0619203f, +0.1695247f, +0.2197143f, -0.0625320f, -0.2007938f,
  +0.1675420f, -0.2029945f, +0.2189552f, -0.0146070f, -0.2479730f, -0.1407456f, +0.2129005f, -0.1165840f,
  -0.0679583f, +0.0343230f, -0.1254664f, +0.0800029f, -0.2074950f, +0.0813326f, -0.0311866f, +0.2642879f,
  +0.0076350f, +0.1513597f, +0.0680899f, +0.1834858f, -0.0489740f, +0.0015649f, -0.2633129f, +0.0512542f,
  -0.0178128f, -0.1772838f, -0.2256736f, -0.1640435f, +0.1982481f, -0.3974341f, -0.1605035f, -0.2755984f,
  -0.0939979f, -0.0981887f, -0.5652831f, -0.1125625f, -0.0291028f, -0.2822429f, +0.1124992f, -0.3690180f,
  +0.1958896f, -0.1030514f, -0.3324497f, -0.1767559f, -0.5428149f, -0.4192248f, -0.2286949f, -0.0396142f,
  -0.0960219f, -0.1554922f, -0.0392093f, -0.0913988f, +0.0121603f, -0.1325344f, -0.1970028f, +0.0096100f,
  -0.0679969f, -0.3755848f, -0.1371516f, -0.5257826f, -0.2979782f, -0.0773075f, -0.1494090f, +0.1845500f,
  +0.0034388f, +0.1122458f, +0.0160057f, -0.0999849f, -0.2228074f, +0.2786899f, -0.2329825f, -0.3350984f,
  +0.0229578f, -0.3386987f, -0.2409652f, -0.0377500f, +0.4168706f, -0.1867400f, +0.1935070f, -0.1355465f,
  +0.3233827f, -0.1587716f, -0.0728077f, +0.1793920f, +0.4706471f, -0.0246208f, -0.0871435f, -0.2343817f,
  -0.1242747f, -0.4258717f, +0.0023162f, -0.2894022f, +0.1914294f, +0.0732584f, +0.2069671f, -0.3867002f
);

const float biases[4] = float[4](
  -0.0447067f, -0.2149614f, +0.0612985f, -0.0360846f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer68 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1440594f, -0.0986837f, -0.2618184f, -0.0302586f, +0.1842793f, -0.3448130f, -0.2183160f, -0.0324642f,
  -0.1420335f, -0.0734336f, -0.3760796f, -0.1775641f, -0.0723142f, -0.3688523f, -0.0580369f, -0.3607889f,
  +0.0909326f, +0.2669159f, -0.2011565f, +0.0192786f, +0.1283744f, +0.0159411f, +0.0854066f, -0.1121973f,
  +0.2999996f, -0.0914570f, +0.0800114f, -0.2610874f, -0.0338912f, -0.0879541f, -0.0829614f, -0.0963395f,
  +0.0641847f, +0.2747239f, +0.2019760f, -0.0412065f, +0.2420434f, +0.0753557f, -0.2715391f, +0.1755410f,
  -0.0673094f, +0.1818441f, +0.0207181f, -0.0637842f, -0.1454072f, +0.1605461f, -0.1235365f, -0.1473032f,
  -0.0741561f, +0.1980001f, -0.4507338f, -0.1958953f, +0.0241653f, -0.0733166f, +0.0518599f, -0.2022912f,
  +0.0055211f, +0.2322401f, -0.0268097f, -0.0381698f, -0.0561198f, -0.0915252f, -0.2479259f, +0.1130618f,
  +0.0983605f, -0.1618452f, -0.1058764f, -0.0331536f, -0.1214838f, +0.1865686f, +0.2255947f, -0.0532396f,
  +0.0436143f, -0.0077253f, +0.1450144f, -0.0389113f, -0.0614621f, -0.2429790f, -0.1483256f, +0.0331661f,
  -0.0033302f, -0.0724414f, -0.0336508f, +0.0719581f, +0.0737547f, -0.1377393f, -0.1804706f, +0.0716475f,
  -0.0191434f, -0.1884626f, +0.0734845f, +0.1876194f, +0.1499183f, +0.0082737f, +0.0934936f, +0.1181826f,
  -0.3288283f, +0.0140867f, +0.3530578f, -0.1009747f, -0.3368530f, -0.0102994f, -0.0571631f, -0.3163069f,
  -0.0651333f, +0.2181437f, -0.2696053f, +0.4882137f, +0.2171388f, -0.0732892f, +0.0268254f, +0.1132932f,
  -0.1621005f, +0.0404962f, +0.0604972f, -0.0584011f, -0.2942536f, +0.1138167f, +0.2245875f, -0.0342718f,
  +0.0879640f, +0.0978139f, -0.0206270f, +0.0640905f, +0.1000699f, -0.0947359f, +0.1025667f, +0.0817824f,
  +0.0021700f, -0.2343228f, +0.6708887f, +0.1419209f, +0.1768420f, -0.0912064f, -0.2293505f, -0.0126058f,
  -0.4724790f, +0.2361223f, -0.1538013f, +0.1218172f, +0.0690127f, -0.0564206f, -0.0563700f, +0.2068952f,
  +0.0133396f, -0.1895873f, -0.0412594f, +0.0368771f, +0.2094603f, +0.1407972f, -0.0952682f, -0.1102825f,
  +0.1307626f, +0.3912697f, +0.0240292f, -0.1603512f, -0.3927549f, -0.1467428f, -0.0045387f, -0.1067826f,
  +0.2536753f, +0.0425302f, +0.0132997f, -0.2098643f, +0.0354606f, +0.0383121f, +0.0289991f, -0.4654811f,
  +0.2180419f, -0.1047795f, +0.0045627f, -0.1587656f, +0.0985300f, -0.1062007f, +0.2170236f, +0.1945383f,
  -0.2046526f, +0.1792234f, -0.2048326f, +0.2455781f, -0.0207311f, +0.0392646f, +0.1445140f, -0.2234319f,
  +0.3536526f, -0.0912295f, -0.1170235f, -0.1204360f, +0.1373450f, +0.0255239f, -0.1314668f, -0.2709823f,
  +0.0245061f, -0.0287850f, -0.0896402f, -0.2494319f, +0.0130551f, +0.0942646f, +0.2467308f, -0.0752419f,
  +0.1095055f, -0.1006828f, -0.2337711f, -0.0301791f, +0.4363330f, +0.0364305f, +0.0852149f, +0.1883890f,
  -0.0179425f, -0.0357768f, -0.1981011f, -0.0252951f, -0.1732320f, -0.0979178f, +0.1488757f, +0.0326732f,
  +0.0580046f, +0.0440989f, +0.1025660f, -0.0441835f, +0.1573030f, -0.0395369f, -0.1865504f, +0.0139421f,
  -0.2769960f, +0.2914307f, -0.0959878f, +0.0389966f, -0.2080704f, +0.1085639f, +0.1355853f, +0.3508325f,
  +0.2221965f, -0.0210901f, +0.0986393f, -0.0217281f, +0.3099402f, +0.3590007f, -0.1363387f, -0.0810330f,
  +0.0075296f, -0.0212484f, +0.8061363f, -0.0796263f, -0.5136570f, -0.1092128f, -0.0187171f, +0.0289546f,
  +0.0406700f, +0.1624444f, +0.1892125f, +0.0730661f, +0.6038800f, +0.3587047f, +0.0265421f, +0.1788891f,
  -0.1677083f, -0.2055167f, +0.2311019f, +0.0091694f, +0.0515150f, +0.0550554f, +0.1257586f, +0.0722154f,
  -0.0955732f, -0.0874021f, -0.2614128f, +0.0312012f, -0.1230874f, +0.1126462f, +0.1237862f, +0.0999946f,
  +0.1253847f, +0.0791390f, -0.2708288f, +0.1933390f, +0.0572594f, -0.0083985f, -0.0306207f, +0.2475649f,
  +0.1411611f, +0.1782825f, +0.0895050f, +0.0623793f, -0.0181887f, +0.0422981f, +0.4708403f, -0.1268254f
);

const float biases[4] = float[4](
  -0.0165543f, -0.0233510f, -0.0322698f, +0.0196577f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer68 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1281597f, +0.0262167f, -0.1766802f, +0.1380795f, -0.0558305f, +0.1111952f, +0.1028280f, -0.0796734f,
  +0.0646690f, -0.1291331f, -0.0893328f, +0.0357017f, +0.1817227f, +0.7515925f, +0.2851471f, -0.1116088f,
  +0.0706610f, -0.0392957f, +0.0868156f, +0.1773728f, +0.1815379f, +0.2017383f, +0.0768163f, +0.2113337f,
  +0.0148359f, -0.0432546f, -0.0502491f, +0.0644391f, +0.2176634f, +0.5035926f, -0.1770627f, +0.3787225f,
  +0.3788979f, -0.1200474f, -0.1251235f, +0.0974617f, -0.0840183f, -0.2860738f, +0.1319357f, -0.1991842f,
  -0.2312755f, +0.2334331f, +0.0098135f, +0.0988108f, -0.2155033f, +0.2261928f, +0.2680128f, +0.0124326f,
  -0.0719294f, -0.2427652f, +0.0982923f, +0.1564382f, +0.5373764f, +0.2704847f, -0.2596027f, +0.6033792f,
  -0.2818882f, -0.1211703f, -0.1022476f, -0.1147275f, -0.5088374f, +0.1759526f, -0.0936369f, +0.0847642f,
  -0.1957597f, -0.1142425f, +0.0211339f, +0.1456484f, +0.0629380f, +0.0148383f, -0.2293769f, +0.1605270f,
  -0.1160424f, -0.1379288f, -0.1775279f, +0.1015374f, +0.1782605f, -0.0102657f, -0.1594648f, +0.3625610f,
  -0.2448398f, -0.0671980f, -0.0727434f, -0.0231915f, -0.4073136f, -0.3069910f, +0.0878393f, -0.0246280f,
  -0.0824704f, +0.1302528f, +0.1618862f, -0.1571810f, -0.0946602f, -0.2185369f, +0.1280043f, -0.1709434f,
  +0.0072728f, -0.0374530f, +0.1467808f, +0.1101448f, -0.0707356f, +0.0482043f, -0.3298039f, -0.0457675f,
  +0.0131072f, -0.0517620f, +0.1354663f, -0.0872382f, +0.1637872f, -0.0730473f, -0.1399891f, +0.0031125f,
  -0.0906515f, +0.3850408f, +0.0221065f, -0.0225260f, -0.5144483f, -0.1305406f, +0.1888229f, -0.0349456f,
  -0.0134080f, -0.2505664f, +0.0610140f, +0.2051401f, +0.0039236f, -0.2724283f, +0.0153628f, +0.3612450f,
  +0.1489682f, -0.0746543f, -0.0765843f, -0.0125467f, +0.0776769f, +0.0439340f, -0.2719793f, +0.1217198f,
  -0.2111392f, +0.3133025f, -0.0930755f, +0.0148702f, -0.3148590f, -0.0554350f, +0.1354516f, +0.1422943f,
  +0.0156113f, +0.1420329f, +0.1122336f, +0.0707622f, +0.0221231f, +0.2229807f, +0.1786599f, +0.4104597f,
  -0.1087346f, +0.1372753f, -0.0660410f, +0.0121917f, -0.3926389f, +0.5414246f, +0.0789082f, +0.0630154f,
  +0.1977508f, +0.1068544f, +0.0150920f, -0.2886600f, +0.0602045f, -0.3854717f, -0.0495405f, +0.0688669f,
  -0.0072954f, -0.1147410f, +0.1185577f, +0.1216801f, -0.0313320f, +0.0938016f, +0.0011906f, +0.0984667f,
  -0.1846589f, -0.0122220f, +0.0296627f, +0.0341772f, -0.0097764f, +0.3073456f, +0.2263592f, +0.4595445f,
  -0.2381606f, +0.4444850f, +0.1265671f, -0.2475880f, +0.2540153f, +0.1399462f, +0.0801742f, +0.1170296f,
  +0.0410962f, +0.0103629f, +0.1617121f, -0.0765674f, -0.0739480f, +0.0442175f, +0.1309918f, -0.2785980f,
  +0.1814729f, +0.1227702f, +0.3991705f, +0.2756238f, +0.1204429f, +0.1417473f, -0.3220318f, -0.3643232f,
  +0.0419135f, +0.1515332f, +0.0634133f, -0.0753000f, +0.0643947f, +0.0326252f, +0.1532362f, -0.0865536f,
  +0.1839022f, -0.0991578f, +0.2765952f, -0.1156160f, -0.1088838f, -0.2425883f, -0.0160265f, +0.0842798f,
  -0.2306644f, -0.0518584f, -0.0527226f, -0.0581917f, +0.1666922f, +0.0205451f, -0.0804885f, +0.0071069f,
  -0.1600125f, +0.1193053f, -0.0543359f, +0.1100915f, +0.2350852f, -0.1080193f, +0.0534077f, +0.2486167f,
  +0.0748629f, -0.0767547f, +0.1752004f, -0.1611502f, -0.3505770f, -0.0361337f, +0.0785518f, -0.2353808f,
  +0.3932914f, -0.2387680f, -0.0764913f, -0.2759212f, +0.1384263f, +0.1082292f, +0.0991825f, -0.0334642f,
  -0.2454883f, +0.1728904f, +0.0275166f, +0.1055900f, -0.1179381f, +0.0050569f, +0.1009372f, +0.0058356f,
  +0.0269723f, -0.1022049f, -0.2518694f, -0.1039257f, +0.1764193f, +0.0438439f, -0.1328707f, -0.1292395f,
  +0.2398449f, +0.0715974f, +0.2259211f, +0.0644987f, -0.3372782f, +0.1081711f, +0.2877600f, -0.2161044f,
  -0.4742672f, +0.2403685f, -0.0704319f, +0.0285889f, -0.1635635f, -0.0347930f, +0.0744979f, +0.0934793f
);

const float biases[4] = float[4](
  -0.0219143f, +0.0290262f, -0.0294503f, -0.0252960f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer69 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0278809f, -0.1568938f, +0.1793964f, +0.1982407f, -0.1647418f, +0.1490391f, -0.1844624f, -0.3069998f,
  +0.1811719f, -0.0879343f, +0.4296296f, +0.2075933f, -0.2064077f, +0.2168222f, -0.0051460f, +0.0982412f,
  +0.0206877f, -0.1008125f, +0.0257354f, -0.0066700f, +0.0920507f, +0.0225723f, +0.2896243f, +0.2455520f,
  -0.1857083f, +0.3294349f, +0.0482987f, +0.0897828f, -0.0289672f, +0.0472849f, -0.1235160f, -0.3243394f,
  -0.2002938f, -0.0137590f, -0.0450729f, -0.3804701f, +0.3626527f, +0.0497767f, -0.1310189f, +0.1654398f,
  -0.2160907f, -0.0995794f, +0.1856088f, -0.1728389f, +0.0172497f, -0.1133042f, -0.0009457f, -0.1669115f,
  +0.1752935f, -0.0649890f, -0.1181068f, -0.2318017f, +0.0176007f, +0.1103663f, +0.0618958f, -0.0034355f,
  +0.2863003f, +0.0256831f, -0.1605525f, -0.2522033f, -0.1487296f, -0.0829974f, -0.1042878f, +0.1333460f,
  +0.0245491f, +0.1121739f, -0.1465905f, -0.0093751f, +0.1192661f, -0.2131287f, -0.1322452f, +0.1208449f,
  +0.1108112f, -0.4045122f, -0.2423602f, -0.0709964f, +0.4484461f, +0.0410268f, +0.0433065f, -0.3069272f,
  -0.0645077f, -0.5481709f, -0.0878166f, -0.1976049f, -0.0109801f, -0.1989148f, +0.2619560f, -0.1777564f,
  -0.0238852f, -0.1108169f, -0.1750397f, -0.0802484f, -0.0070277f, -0.0220474f, +0.1401866f, -0.0229137f,
  -0.2731835f, -0.4045500f, +0.4184328f, -0.0658682f, +0.4987752f, +0.2304876f, +0.2371335f, +0.0749876f,
  -0.1018683f, -0.2015859f, +0.1887345f, -0.0050414f, +0.1512722f, +0.0384210f, -0.0442310f, -0.1066863f,
  +0.0121962f, -0.1291294f, +0.1422012f, +0.1431331f, +0.0468667f, -0.1814180f, +0.0403804f, +0.0813651f,
  -0.1164656f, -0.0345210f, +0.0330216f, +0.0463445f, +0.4228380f, +0.0306713f, -0.0532151f, -0.0474782f,
  -0.3122879f, +0.0583984f, +0.0301611f, +0.0538950f, +0.0905889f, -0.1082486f, +0.0062872f, +0.0665746f,
  +0.0654176f, +0.0246070f, +0.1407635f, +0.0997731f, -0.0340777f, +0.1205923f, +0.1557351f, -0.1473008f,
  +0.1731537f, +0.0581158f, +0.1772892f, +0.0838242f, +0.0332538f, +0.0390457f, -0.2004748f, +0.1169662f,
  -0.0694437f, -0.0410388f, -0.0110819f, -0.0402581f, -0.3573467f, +0.2493513f, +0.0990924f, +0.1446601f,
  -0.0120993f, +0.0411721f, +0.0358097f, +0.2516632f, +0.1697558f, +0.1083125f, -0.0315950f, +0.3857843f,
  +0.1590479f, +0.0785139f, -0.1696813f, -0.0550730f, +0.1289348f, -0.2336074f, -0.0172694f, -0.1643883f,
  -0.0414360f, -0.1577825f, -0.0205279f, +0.0408639f, -0.0487544f, -0.1314880f, +0.3639250f, -0.5764160f,
  +0.1721358f, +0.1651139f, +0.0014647f, +0.0545449f, +0.0049760f, -0.3279923f, +0.1237880f, +0.0669727f,
  +0.0873540f, -0.0996390f, -0.0387548f, -0.0079943f, -0.0499051f, -0.0345869f, -0.0412610f, +0.0314162f,
  -0.2300938f, -0.4419290f, +0.1100530f, -0.1932051f, -0.0476365f, +0.1643242f, +0.0946821f, -0.0721427f,
  -0.1000085f, +0.0149923f, +0.0288506f, -0.0185766f, -0.1068935f, -0.0329484f, +0.0507925f, +0.1408982f,
  -0.0148934f, -0.1921302f, +0.0892405f, +0.0697204f, -0.0888844f, +0.1949127f, -0.1128778f, +0.1031134f,
  +0.0569710f, -0.0925894f, +0.2273477f, +0.1182154f, -0.0579362f, +0.1175639f, -0.2629316f, +0.1176271f,
  -0.0597488f, +0.0439407f, -0.0119168f, -0.1274339f, -0.0062244f, +0.1145103f, +0.0904401f, +0.0680225f,
  +0.0613151f, -0.0093107f, -0.3778028f, +0.0696376f, -0.1072774f, -0.0575516f, +0.0374673f, +0.1686416f,
  +0.0959011f, +0.0787283f, -0.0366012f, -0.0531607f, +0.1664118f, -0.1607184f, +0.0761150f, -0.1248325f,
  +0.1644847f, +0.2492684f, -0.1549620f, -0.1040613f, -0.0479334f, -0.0013455f, -0.1186695f, -0.1602998f,
  +0.1110309f, -0.0024821f, -0.0566057f, +0.1474728f, +0.0271275f, +0.1012551f, +0.0764150f, +0.0498120f,
  +0.0067919f, +0.0003250f, -0.0523764f, -0.1141208f, -0.0770366f, +0.1297118f, +0.0364868f, +0.2450683f,
  +0.0619884f, +0.1141495f, -0.0747296f, +0.1276926f, -0.1580134f, +0.2043090f, -0.1570536f, +0.0171487f
);

const float biases[4] = float[4](
  +0.0672729f, +0.0196654f, -0.0355645f, +0.0630043f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer69 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0346043f, -0.0122157f, +0.1693431f, -0.0883822f, +0.1704317f, +0.0084630f, +0.0926852f, +0.1344344f,
  +0.1825794f, -0.2238305f, +0.2756719f, -0.2133625f, -0.0534779f, -0.0238559f, -0.1574738f, +0.0101917f,
  -0.2381099f, +0.0787582f, -0.0479610f, -0.1777439f, +0.0832611f, +0.0161241f, +0.1782556f, -0.2270325f,
  +0.1301671f, -0.3275982f, -0.2023359f, +0.1134007f, -0.0326956f, -0.1280041f, -0.1696365f, -0.1933679f,
  +0.1125332f, -0.0625678f, -0.2403978f, -0.5414286f, -0.2704348f, -0.3937266f, -0.1604587f, +0.0994412f,
  -0.5101295f, -0.0397224f, +0.1485844f, -0.2641137f, -0.0941013f, -0.2164022f, -0.0412676f, -0.4430806f,
  +0.0601809f, -0.1299440f, +0.0797216f, -0.1530851f, +0.0641305f, -0.0747917f, -0.1181706f, -0.0476782f,
  +0.1276207f, +0.0707331f, +0.2815388f, -0.4907195f, -0.2056399f, -0.1876256f, +0.0040311f, -0.4320904f,
  -0.1304381f, -0.0057354f, -0.0168365f, +0.1550886f, +0.4461936f, +0.0369348f, +0.0679686f, +0.1575767f,
  +0.0580572f, -0.0261939f, +0.1205313f, +0.1283828f, -0.0444344f, +0.0855376f, +0.0512897f, -0.1579915f,
  -0.0667883f, +0.0809922f, -0.1332173f, +0.0248515f, +0.2419164f, +0.1504834f, -0.1379018f, -0.0525549f,
  +0.0322423f, +0.0547150f, -0.0140855f, +0.2265679f, +0.1533223f, -0.0134875f, +0.1006743f, +0.0511068f,
  +0.1687073f, +0.2717345f, +0.2564252f, -0.1401830f, -0.0701064f, +0.4614205f, -0.0093167f, -0.0982456f,
  +0.2584687f, +0.1139094f, +0.0524069f, -0.2379518f, -0.0659821f, -0.0052356f, -0.0173650f, +0.0151759f,
  -0.0257219f, -0.0208699f, +0.4775407f, +0.5093682f, -0.2545682f, +0.1181068f, +0.1512892f, +0.0481192f,
  +0.0620912f, +0.1134547f, -0.2282391f, -0.0226722f, +0.4677820f, +0.3254657f, -0.1686040f, +0.0251011f,
  +0.2147139f, -0.0995724f, +0.1048481f, +0.0820955f, -0.0312220f, +0.3032582f, +0.1053351f, -0.6275739f,
  -0.0183932f, +0.0232175f, +0.0558754f, -0.0724851f, +0.2186053f, -0.0263329f, +0.0534001f, -0.1635310f,
  -0.0980118f, +0.1200027f, +0.0790748f, -0.0839264f, +0.3673466f, -0.0808241f, +0.0656054f, +0.1120243f,
  +0.0677686f, -0.0576755f, +0.0882890f, +0.0530409f, -0.2085467f, -0.2803944f, -0.0319435f, +0.3179995f,
  +0.0014038f, +0.1902829f, -0.3579835f, +0.0634546f, +0.0806294f, +0.0194791f, +0.1460554f, +0.0619937f,
  -0.2349449f, +0.0110460f, +0.2524284f, -0.1112553f, -0.1193667f, +0.0738059f, +0.1155394f, -0.1417004f,
  -0.2675583f, +0.1030153f, -0.2373804f, +0.0131738f, +0.0786441f, +0.0311608f, -0.1676514f, +0.3025585f,
  +0.0771286f, +0.1780013f, +0.1450145f, +0.0291341f, -0.2239589f, +0.1922031f, -0.1543106f, -0.0227110f,
  +0.0849345f, +0.0306096f, +0.1436168f, +0.0316947f, -0.2317351f, +0.2273283f, +0.0932672f, -0.1485434f,
  +0.1470074f, +0.1271213f, -0.0679964f, -0.0669976f, -0.0241430f, +0.3049201f, -0.1062450f, -0.2006688f,
  -0.0324750f, +0.0509692f, +0.1817039f, +0.0641866f, -0.0965153f, +0.0341723f, -0.0589602f, -0.1867297f,
  -0.1049034f, +0.2569033f, +0.1042896f, -0.2240322f, +0.2234896f, -0.1550773f, +0.0788217f, -0.4359412f,
  +0.1544756f, +0.0115383f, +0.1588280f, +0.1603280f, +0.0501972f, -0.1824068f, -0.2036863f, -0.4510550f,
  -0.0442446f, +0.0560720f, -0.0549623f, -0.1157980f, +0.2591071f, -0.0345674f, -0.1134659f, -0.3453963f,
  -0.0604686f, -0.4547934f, +0.0283028f, -0.0620790f, +0.0091724f, -0.2833287f, -0.1039413f, +0.1704921f,
  -0.1933048f, -0.0903501f, +0.0154416f, -0.1153002f, +0.5087024f, +0.0600027f, -0.2849482f, -0.0375491f,
  -0.1039921f, +0.0416583f, +0.1468316f, -0.1814313f, -0.0922271f, +0.0885689f, -0.0057447f, +0.0358165f,
  +0.0565530f, -0.1287082f, +0.0562578f, +0.0226253f, +0.1971849f, -0.0324527f, -0.0605131f, -0.1932445f,
  +0.0632872f, -0.0751806f, +0.0398583f, -0.1410505f, -0.0725222f, +0.0900603f, -0.1113102f, -0.1866464f,
  -0.1235993f, -0.0545947f, +0.1320667f, -0.2748105f, +0.1074904f, -0.0985491f, +0.0817257f, -0.3924058f
);

const float biases[4] = float[4](
  -0.2125944f, +0.0378135f, +0.0077865f, -0.0293955f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer70 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0099497f, -0.1500074f, +0.1873415f, +0.1971671f, +0.0247884f, -0.0505796f, -0.1038450f, -0.0569708f,
  +0.0154439f, +0.6098102f, -0.0048651f, +0.2825659f, -0.1551426f, +0.1466530f, -0.2798325f, -0.0513031f,
  +0.0191583f, +0.0154216f, +0.1016463f, +0.0687999f, -0.0648980f, +0.0343288f, -0.1590253f, +0.0940049f,
  +0.3991917f, +0.1339692f, -0.0272793f, -0.0563605f, +0.1093066f, -0.0051019f, -0.1678198f, +0.1867309f,
  +0.5666429f, +0.1278090f, -0.1458166f, +0.0416023f, +0.0867405f, +0.1719175f, +0.3052793f, +0.1428673f,
  +0.0683878f, +0.0435926f, -0.2071034f, -0.0246499f, +0.2239366f, +0.1491798f, +0.0285249f, -0.1967691f,
  +0.0377151f, +0.0322858f, +0.1576304f, +0.1640263f, +0.0800018f, +0.0999145f, -0.1805818f, -0.2129641f,
  -0.1736004f, -0.0696804f, -0.0001219f, -0.0854879f, -0.0246434f, +0.0857905f, +0.3241790f, -0.2320047f,
  -0.1305331f, -0.0539860f, +0.1451829f, +0.0499950f, -0.1323883f, -0.1677319f, -0.2609625f, +0.0311209f,
  -0.2342393f, +0.2686159f, +0.2193554f, +0.0431050f, -0.0007175f, +0.0590468f, +0.0983080f, -0.0380008f,
  +0.1277451f, +0.3047401f, +0.0677114f, +0.3041560f, -0.1527331f, -0.0264361f, -0.0808796f, +0.3092763f,
  +0.2027351f, +0.1314684f, -0.0798265f, +0.1241081f, -0.0039107f, +0.0375623f, +0.1379727f, -0.2818304f,
  +0.0598302f, +0.1681467f, -0.0169556f, -0.1917227f, +0.1833279f, +0.2518783f, -0.1105236f, +0.0116400f,
  +0.1291339f, +0.0425394f, +0.3390587f, +0.0054140f, -0.1945785f, -0.1836884f, -0.0974443f, -0.1821664f,
  -0.1449451f, -0.1684058f, +0.0783878f, -0.0884907f, -0.0783535f, +0.0180025f, -0.1049193f, +0.2358529f,
  +0.3182195f, +0.3251193f, -0.2213123f, -0.1709959f, -0.1723597f, +0.2529779f, +0.1575437f, -0.1043898f,
  +0.0854592f, +0.1104599f, +0.1496079f, +0.0612916f, +0.1800798f, -0.1850045f, -0.2819697f, +0.0555479f,
  -0.2222235f, +0.0526769f, +0.1085867f, -0.1914613f, +0.2147360f, +0.2310958f, +0.2462765f, +0.0359275f,
  +0.0367883f, +0.0219401f, -0.1196867f, -0.0641226f, -0.1717864f, -0.0352989f, -0.2048638f, +0.0482153f,
  +0.0855454f, +0.0608624f, -0.1937283f, -0.0624555f, -0.2303136f, +0.0044765f, -0.1076806f, -0.1235881f,
  +0.2977259f, -0.1187423f, -0.3267150f, -0.1747811f, -0.0172720f, +0.1940094f, -0.2521897f, +0.0683765f,
  +0.0450787f, -0.1671679f, +0.1196831f, -0.1252621f, -0.0871846f, -0.0480943f, +0.0761254f, +0.1281229f,
  -0.0304444f, -0.3029845f, +0.0938367f, +0.0041360f, +0.0318045f, +0.1031625f, -0.0787867f, -0.4212076f,
  +0.1905323f, +0.1172562f, -0.1690787f, -0.0165436f, +0.0704312f, +0.0668248f, +0.3221515f, -0.1582906f,
  -0.1041458f, +0.1623974f, +0.0943655f, +0.0497923f, -0.2208772f, -0.0951515f, +0.2067977f, +0.0214255f,
  -0.1276464f, -0.1436696f, +0.1420361f, -0.2367749f, +0.1185580f, -0.0525724f, +0.0111004f, +0.1373772f,
  +0.0406754f, +0.1148852f, +0.0707431f, -0.3261762f, -0.1947796f, +0.0466866f, +0.0458318f, -0.1067705f,
  -0.1733329f, +0.0418133f, +0.1037692f, -0.0721399f, -0.2247509f, +0.1616049f, -0.0234286f, +0.2298844f,
  -0.0924585f, -0.1174192f, +0.1770576f, +0.0651628f, +0.3797609f, +0.1245687f, -0.1840921f, -0.0423199f,
  -0.0600891f, -0.0045969f, +0.0527823f, -0.1108067f, +0.1981129f, -0.0451031f, +0.0357277f, +0.1583073f,
  +0.1646130f, +0.0139768f, -0.0973212f, +0.1610319f, +0.1296031f, +0.1344171f, -0.0177769f, -0.0254355f,
  +0.2205641f, +0.2826940f, -0.3379560f, +0.0302171f, +0.0165905f, +0.1577830f, -0.1534062f, +0.1501659f,
  -0.1049247f, +0.0997941f, +0.0244304f, -0.1539981f, +0.0078469f, +0.2649104f, +0.1250477f, +0.4284410f,
  +0.0120834f, +0.1238503f, -0.0375216f, -0.0886112f, -0.0074103f, +0.0237818f, +0.0324936f, -0.0371760f,
  +0.2006323f, +0.3625211f, -0.0864220f, -0.0203672f, +0.2146837f, +0.1861744f, +0.1604098f, -0.1426247f,
  -0.1736591f, +0.1272830f, +0.3347776f, +0.0967179f, +0.0040203f, +0.1757126f, +0.0119670f, -0.4731248f
);

const float biases[4] = float[4](
  -0.0272349f, -0.0308590f, -0.0264519f, -0.0004263f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer70 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1423153f, -0.2385418f, +0.0147405f, -0.0302226f, -0.2411485f, -0.0771299f, +0.1948340f, +0.1921641f,
  -0.0803647f, -0.5799927f, -0.0467946f, -0.2323855f, +0.3238552f, -0.1177285f, +0.2277343f, -0.1297161f,
  -0.1107225f, -0.3857854f, +0.1227423f, -0.1171333f, +0.2008323f, -0.0516262f, +0.2236377f, -0.0845549f,
  -0.2331299f, -0.2246076f, +0.2036675f, +0.0854846f, +0.2175055f, -0.0197881f, -0.0391657f, +0.0030022f,
  -0.1315555f, -0.2373993f, +0.0178039f, -0.1357396f, +0.0902783f, -0.1835395f, -0.0020144f, -0.2467322f,
  -0.0188793f, -0.4082205f, +0.3084156f, -0.0663888f, -0.0528567f, +0.0355373f, +0.0283919f, -0.0666274f,
  -0.1848429f, +0.1456781f, -0.1950185f, -0.0122615f, +0.0557437f, -0.1178695f, +0.0456445f, +0.1127117f,
  +0.2715391f, +0.1835785f, +0.0814639f, +0.0132749f, +0.0492523f, -0.1155562f, +0.0606453f, -0.2034936f,
  +0.0613206f, +0.1075961f, -0.0013263f, -0.0183356f, -0.1737400f, -0.0447153f, -0.1488772f, -0.2067593f,
  +0.2153508f, +0.1098196f, +0.0414369f, -0.0043452f, +0.0185068f, -0.1795666f, +0.0409550f, -0.0307668f,
  +0.1455869f, +0.0503023f, -0.0557113f, +0.0764407f, -0.0983297f, +0.1416144f, -0.1561139f, +0.0206381f,
  +0.0457352f, +0.0614430f, +0.1591901f, +0.1574317f, +0.0653607f, -0.0326605f, -0.0475827f, -0.0614774f,
  -0.0455010f, -0.0454494f, -0.0345555f, +0.0780584f, -0.0845891f, -0.0028615f, -0.0841340f, -0.0482986f,
  +0.1611299f, +0.0094347f, -0.2434047f, +0.0584187f, +0.3401734f, +0.1225253f, +0.0671583f, -0.2070761f,
  -0.0574698f, -0.1447474f, -0.0940529f, +0.2806400f, +0.3075131f, +0.0722440f, -0.0420133f, +0.0764647f,
  +0.1861078f, -0.1250939f, +0.1144215f, -0.4880542f, +0.1859743f, -0.0690818f, -0.2926122f, +0.2126408f,
  -0.0000073f, +0.1094519f, -0.3049815f, -0.0652034f, +0.1145616f, +0.1051891f, +0.3880639f, +0.0684251f,
  +0.0464524f, -0.1067769f, +0.0091060f, -0.1393261f, +0.1288908f, +0.2159990f, +0.0299342f, +0.1871268f,
  +0.0202855f, -0.0584550f, -0.3823377f, -0.0158736f, +0.0284190f, -0.0485785f, +0.0456572f, +0.0105181f,
  +0.1625823f, -0.1597809f, -0.4153877f, -0.1930326f, -0.0680702f, +0.0811563f, -0.0423501f, +0.1965257f,
  -0.2068524f, +0.3269930f, -0.2058087f, +0.3743545f, -0.1304208f, +0.0691339f, -0.1906506f, -0.0370380f,
  -0.0255309f, -0.0495590f, -0.0027627f, -0.0362475f, +0.0115386f, -0.1187934f, -0.1421865f, -0.0368492f,
  -0.1359532f, +0.0812674f, +0.0510778f, +0.0098217f, -0.0670663f, +0.1335440f, +0.4931589f, -0.0953104f,
  +0.1989120f, +0.0026455f, +0.1038517f, +0.1015312f, +0.1514445f, +0.0319724f, +0.0657228f, +0.0650103f,
  -0.1936471f, -0.2134756f, -0.0794229f, +0.0662183f, -0.0255148f, -0.0570173f, +0.0683664f, +0.1410715f,
  -0.1225299f, -0.2052662f, -0.0057001f, +0.1595246f, +0.0123726f, +0.0167085f, -0.0844764f, +0.0948226f,
  -0.0083539f, +0.0827765f, -0.0064080f, -0.0090631f, +0.0464650f, +0.1083365f, -0.1951095f, +0.0233998f,
  -0.0935753f, -0.3586744f, +0.1649935f, -0.0927914f, +0.2675537f, +0.1534490f, +0.1937045f, -0.1594674f,
  -0.4658833f, -0.2025552f, -0.1863707f, +0.1266436f, -0.0171425f, +0.0706413f, -0.0371081f, -0.0075093f,
  -0.0595806f, -0.2956182f, +0.1644598f, -0.0587725f, +0.0801079f, +0.0524708f, +0.0263605f, -0.2084202f,
  +0.2341181f, -0.0262486f, -0.0076432f, +0.1559462f, +0.1922060f, +0.0309152f, +0.0827235f, -0.1912715f,
  -0.1684299f, -0.3823283f, -0.0257363f, +0.1172198f, -0.2521681f, -0.1696636f, +0.1522228f, +0.1294936f,
  +0.1263358f, -0.0430377f, +0.3164071f, +0.1334942f, +0.2304208f, +0.2428450f, -0.1173721f, -0.0306510f,
  -0.0186336f, -0.1439762f, -0.0725852f, -0.2386232f, +0.0886912f, -0.0535805f, -0.0121360f, -0.2008183f,
  +0.1104679f, +0.2137684f, -0.2928135f, +0.2318849f, +0.1975798f, -0.0055147f, +0.0759476f, -0.1921209f,
  -0.0851622f, +0.3130122f, +0.0374936f, +0.1900995f, -0.0519762f, +0.1363057f, +0.2354613f, -0.1203042f
);

const float biases[4] = float[4](
  +0.0176847f, +0.0181529f, -0.0332377f, -0.0256919f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer71 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0688116f, -0.0921621f, +0.3712841f, +0.0815903f, +0.0795073f, -0.0709223f, +0.0113736f, +0.1355365f,
  +0.1340725f, +0.1548325f, +0.2795732f, -0.2374993f, +0.0961347f, +0.2809238f, -0.0908943f, +0.0233294f,
  +0.1166062f, +0.0456334f, +0.2728013f, +0.1695595f, -0.2634861f, +0.0029451f, -0.1428303f, +0.1532242f,
  -0.0389771f, -0.1047446f, +0.0030412f, -0.0948072f, +0.2482515f, +0.0419611f, -0.1319329f, +0.1921721f,
  +0.2484036f, -0.2134705f, +0.1520618f, +0.1386755f, -0.0637062f, +0.0478224f, -0.1164184f, -0.1788121f,
  +0.3508347f, -0.0925630f, -0.0543808f, +0.1117014f, -0.1853467f, -0.3278410f, +0.1561218f, -0.0964521f,
  +0.1352891f, -0.0252066f, -0.0312094f, -0.1599019f, +0.1900120f, +0.0389405f, -0.0229856f, -0.0334326f,
  -0.1518054f, +0.0107309f, +0.0909124f, +0.0194572f, +0.1762150f, +0.0020428f, +0.0433614f, -0.2668245f,
  +0.1192477f, +0.0471609f, +0.0248096f, +0.0691580f, +0.0709862f, +0.2088718f, -0.2085333f, -0.1519025f,
  +0.1297620f, -0.1476545f, -0.0692074f, -0.0699511f, -0.3263325f, -0.1728762f, +0.1553002f, +0.1470753f,
  -0.1416181f, +0.0189252f, -0.1429287f, -0.2407266f, +0.0581221f, +0.0948527f, -0.0045188f, -0.0355465f,
  +0.0229882f, -0.1370193f, +0.0560117f, +0.2035281f, +0.0920931f, +0.3083820f, +0.0793322f, +0.1677566f,
  -0.1306701f, -0.0065939f, +0.1034612f, -0.0551857f, +0.0729491f, -0.1242874f, -0.3048935f, -0.0405252f,
  -0.1711018f, +0.0819224f, +0.0076088f, -0.0667599f, +0.0294379f, -0.0309046f, -0.0891557f, +0.0292183f,
  +0.0998787f, -0.2548658f, +0.1624513f, -0.0146868f, +0.1642609f, +0.1926711f, +0.2011886f, +0.1064057f,
  -0.0139100f, -0.0061692f, -0.0282380f, +0.0179037f, -0.1011110f, -0.1536262f, +0.0631475f, -0.0139401f,
  +0.3592717f, +0.2339557f, +0.0063618f, -0.2421176f, -0.1905226f, -0.1182787f, -0.2825764f, -0.2526202f,
  +0.1306702f, +0.2153615f, -0.0565134f, +0.1207471f, +0.0297893f, +0.1063154f, +0.0691710f, +0.0781031f,
  +0.0092454f, +0.1845091f, -0.0283026f, -0.0194964f, -0.2646785f, -0.1839771f, +0.1069866f, +0.2532786f,
  +0.3306179f, +0.0381249f, +0.0862670f, -0.1895693f, -0.0069691f, -0.2130266f, +0.2389338f, -0.1531466f,
  +0.1194145f, -0.2380054f, +0.0462049f, +0.0485812f, -0.0756240f, +0.0698248f, -0.0550887f, -0.0342866f,
  +0.1643209f, -0.2079500f, -0.0968582f, +0.1161294f, +0.2305719f, +0.2134642f, -0.1184095f, -0.2413920f,
  -0.3019189f, -0.2459669f, -0.2876027f, -0.3072672f, +0.0722645f, +0.0545170f, -0.0419014f, -0.0203716f,
  -0.2709238f, +0.0378401f, -0.1305823f, -0.1777538f, -0.2996291f, -0.0953218f, +0.2773302f, -0.0858031f,
  -0.3229983f, -0.0978874f, -0.0158587f, -0.0368278f, +0.1443560f, -0.0297035f, -0.0316612f, +0.0667350f,
  +0.0156291f, -0.0883195f, -0.1036239f, -0.2070878f, +0.0192416f, -0.1027101f, +0.2290796f, -0.1477233f,
  +0.2799009f, -0.0674488f, +0.1150464f, +0.0059762f, +0.2706951f, +0.3504177f, -0.2602224f, +0.1224047f,
  -0.2089874f, +0.3622769f, -0.0701134f, +0.1289021f, -0.0446169f, -0.2068131f, +0.1346886f, -0.3687738f,
  -0.3403363f, -0.1564276f, -0.3796739f, +0.0384568f, +0.4302097f, +0.1027369f, +0.0713918f, -0.2983383f,
  +0.0914305f, -0.0412716f, +0.0811031f, -0.0358120f, -0.0127915f, +0.0011002f, -0.1267937f, +0.0615720f,
  +0.0296723f, +0.0412158f, -0.0411236f, -0.1041932f, -0.2037889f, -0.0908376f, +0.1959168f, -0.0946486f,
  +0.1153362f, +0.0659802f, -0.0339810f, -0.0710746f, -0.2590626f, -0.0956845f, +0.1118459f, -0.5786242f,
  -0.0008972f, +0.0704839f, +0.0276094f, +0.0419494f, +0.0148747f, -0.1290693f, +0.1078928f, -0.0868734f,
  -0.3488918f, +0.2103048f, -0.1054014f, +0.2025046f, -0.0209804f, -0.0424463f, +0.0476504f, +0.1432042f,
  -0.2987032f, +0.0000762f, +0.1674678f, +0.3939855f, -0.0104962f, +0.0673324f, +0.1132909f, +0.0880884f,
  -0.0139080f, -0.0752327f, -0.0545616f, +0.0731767f, -0.0342437f, +0.0012060f, +0.1239945f, +0.1687153f
);

const float biases[4] = float[4](
  +0.0185873f, +0.0320435f, -0.0095938f, +0.0089055f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer71 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2282469f, +0.1360407f, -0.0794467f, -0.1081903f, +0.0134389f, +0.0341505f, -0.1826548f, -0.0059665f,
  -0.0838469f, +0.0926352f, -0.0083101f, -0.0728881f, +0.0292510f, -0.2419704f, -0.0468535f, -0.5120243f,
  -0.0058866f, -0.2324111f, +0.1976714f, -0.4598328f, -0.0127331f, -0.0310495f, +0.1333157f, -0.2501459f,
  +0.3214749f, -0.0106182f, -0.2363212f, -0.1845945f, -0.1334992f, -0.0106104f, +0.0398709f, +0.0506223f,
  +0.0244322f, -0.0448390f, +0.0404048f, +0.1431217f, -0.1013336f, -0.0532139f, -0.3818788f, +0.0848228f,
  -0.2453416f, +0.0461329f, -0.2583745f, -0.4112053f, -0.1469000f, -0.1561720f, -0.0916120f, -0.0523766f,
  -0.0403658f, +0.1298611f, -0.1898624f, -0.1166193f, -0.0001266f, +0.2314721f, -0.1024913f, -0.0261295f,
  -0.0257561f, -0.0546177f, +0.0769422f, -0.0746454f, -0.0309547f, -0.1139265f, +0.1312499f, -0.2165865f,
  +0.2111517f, -0.0277078f, +0.0734023f, -0.3322748f, -0.0662775f, +0.1818639f, -0.1725760f, -0.1087579f,
  +0.1531413f, +0.1617203f, +0.2059718f, +0.0964780f, +0.1654338f, -0.0925753f, +0.2539656f, -0.1040403f,
  +0.0706677f, +0.1745795f, +0.3247942f, +0.0946787f, -0.0262509f, -0.2019656f, -0.0115740f, -0.1970780f,
  -0.0223920f, +0.0024474f, -0.0394091f, +0.0114255f, +0.1432776f, +0.0745473f, +0.0107412f, +0.2131252f,
  +0.3102806f, -0.1998133f, +0.1213710f, +0.0264764f, +0.2373768f, +0.0543740f, -0.3006099f, -0.0446110f,
  +0.3448374f, -0.1580178f, +0.1117759f, +0.1205402f, +0.5637213f, +0.3490549f, -0.4295930f, +0.2179160f,
  +0.0096235f, +0.2204126f, -0.0073866f, -0.1973554f, -0.0740010f, -0.2092503f, -0.2799865f, -0.0171686f,
  -0.1012906f, -0.2618558f, +0.0089738f, +0.2112769f, -0.0169972f, -0.1640510f, -0.0015326f, -0.0086603f,
  -0.2170902f, -0.1890095f, -0.0563988f, -0.0010958f, -0.0286939f, -0.1708710f, -0.0500145f, +0.1974669f,
  -0.0200966f, +0.0466119f, +0.2279156f, +0.0093091f, -0.0557227f, +0.0746003f, -0.0976935f, -0.0589008f,
  +0.0521169f, +0.1175464f, +0.0231385f, -0.0214011f, -0.2179536f, +0.1135712f, -0.4358775f, -0.0918790f,
  +0.0675056f, -0.0671349f, -0.0073076f, -0.0041398f, +0.1366360f, +0.1355131f, -0.0002554f, +0.2510794f,
  +0.0430706f, -0.0514602f, +0.2915125f, +0.1013716f, +0.0870781f, -0.1444952f, +0.0605678f, -0.2011911f,
  +0.0427361f, +0.1576295f, -0.0984628f, +0.1081652f, -0.1323277f, +0.0957462f, -0.3857480f, -0.2823870f,
  +0.6292230f, +0.0930629f, -0.0368174f, +0.0137203f, -0.2417593f, +0.0519186f, +0.0015522f, -0.0916809f,
  +0.0900551f, -0.1973464f, +0.2647583f, +0.0349514f, +0.0046262f, +0.0745361f, +0.1172574f, -0.1369935f,
  +0.0267500f, +0.0823631f, +0.0165868f, +0.1944360f, -0.0681366f, +0.0676824f, +0.0369266f, +0.0203998f,
  +0.0530811f, -0.0764224f, -0.0421597f, +0.0470150f, +0.0909197f, +0.4131007f, +0.1253131f, +0.0312775f,
  +0.2353879f, -0.0367523f, +0.0204072f, -0.0974914f, -0.0541916f, -0.0991256f, +0.0956400f, +0.0969263f,
  -0.0341417f, +0.0897543f, -0.1985530f, -0.3397622f, -0.0999509f, -0.1931462f, +0.1364049f, +0.0510989f,
  -0.0468156f, +0.0327061f, -0.1112316f, -0.0826812f, +0.1231487f, +0.0600384f, -0.0557689f, -0.3945137f,
  +0.0796726f, +0.0485272f, -0.2595340f, +0.0493675f, -0.1775546f, -0.0612676f, +0.0908499f, +0.2364987f,
  -0.0477646f, -0.4830262f, +0.0075061f, +0.0356754f, +0.0131405f, +0.0427289f, +0.1321538f, -0.0064409f,
  -0.1925826f, -0.0316724f, -0.1118514f, -0.3089116f, +0.0825192f, -0.1463068f, -0.3157946f, -0.0771889f,
  +0.0610267f, -0.1838347f, -0.1599321f, -0.3202245f, -0.2306955f, -0.2074003f, +0.1933064f, +0.3159967f,
  +0.1486153f, -0.3888942f, -0.1888668f, +0.1607799f, +0.4097646f, -0.2066066f, +0.1613113f, -0.0285451f,
  -0.6330311f, -0.0555744f, +0.3135803f, -0.3913493f, +0.2923059f, -0.1246785f, -0.2170980f, -0.1625087f,
  -0.0478503f, -0.2750673f, -0.0353897f, -0.1809764f, +0.1098866f, +0.1484192f, +0.0767376f, -0.0854274f
);

const float biases[4] = float[4](
  -0.0466864f, +0.0352419f, +0.0040076f, -0.0098291f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer72 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0525662f, +0.0405040f, +0.0563448f, -0.0492438f, +0.0245974f, +0.0031105f, -0.4287811f, -0.0462636f,
  +0.1663789f, -0.3123770f, -0.0808074f, -0.2578976f, +0.1101411f, +0.1741000f, -0.0398352f, +0.2177896f,
  -0.0897564f, +0.1804129f, -0.0803304f, -0.2249036f, +0.0144896f, +0.2759364f, -0.2276682f, -0.2169828f,
  -0.0914174f, +0.1348227f, -0.0518042f, -0.0983577f, +0.1457342f, +0.0098664f, -0.0087853f, -0.0704637f,
  -0.0146612f, +0.0719839f, +0.0568470f, +0.2759432f, +0.3185706f, -0.3095514f, -0.3074149f, +0.2439816f,
  +0.1698626f, -0.0859464f, +0.1810235f, -0.0648214f, +0.4089321f, -0.3094567f, -0.1188270f, -0.1426560f,
  -0.0293473f, -0.0044924f, +0.1438413f, +0.1514037f, -0.2178328f, -0.0294419f, -0.1332040f, +0.0364271f,
  -0.0169479f, -0.1259722f, +0.2252021f, -0.0641685f, +0.0396982f, +0.2406374f, -0.0423079f, +0.2649939f,
  -0.1318527f, -0.1001875f, -0.2745979f, -0.0505380f, +0.0459420f, +0.0760723f, -0.3093940f, +0.3449727f,
  -0.1133293f, -0.1895967f, +0.1117176f, -0.0623208f, -0.1912419f, -0.1195120f, -0.0028999f, -0.1792811f,
  +0.0132159f, -0.2493650f, +0.1486510f, -0.1905720f, +0.3471277f, +0.0565475f, +0.2588798f, -0.1469996f,
  -0.0015869f, +0.0774153f, +0.1763719f, +0.1778578f, -0.1142752f, +0.0488157f, +0.1667712f, +0.1640237f,
  +0.1587953f, +0.2997730f, -0.1051915f, -0.1683055f, -0.2071717f, -0.2340076f, +0.0527673f, +0.1891190f,
  -0.0081415f, -0.0011519f, +0.3082047f, +0.1812896f, +0.0745905f, -0.0461834f, +0.1681629f, -0.2359696f,
  -0.0095860f, -0.0198354f, -0.0435948f, +0.3349699f, +0.1175094f, +0.3690201f, -0.0866303f, +0.3796747f,
  +0.0477400f, +0.3499484f, -0.0921425f, -0.1080897f, -0.0379794f, -0.0552399f, +0.0623845f, -0.0319538f,
  -0.0518852f, +0.0374024f, +0.0490709f, -0.3574895f, +0.2029473f, -0.1811438f, -0.2857567f, -0.4052508f,
  -0.1604023f, +0.0743356f, -0.2289011f, -0.0831687f, -0.0604710f, -0.1244253f, -0.0965639f, -0.2830795f,
  -0.2042983f, -0.2129211f, -0.0671581f, +0.0604736f, +0.0235871f, -0.1506154f, -0.1882765f, -0.1343600f,
  +0.0679655f, +0.0926007f, +0.0620844f, +0.2649690f, +0.2601734f, +0.1020008f, +0.0208509f, +0.2688199f,
  -0.2188443f, -0.1314201f, -0.0289454f, +0.2866686f, +0.0909068f, +0.0949676f, +0.2197729f, -0.0799947f,
  +0.0015393f, -0.1909136f, +0.2829361f, +0.0319992f, -0.2145830f, -0.0498149f, -0.0649623f, +0.2256678f,
  +0.0693231f, -0.0949543f, -0.1365498f, -0.1237480f, +0.4849178f, -0.2362700f, -0.2508995f, +0.1134476f,
  -0.1677480f, +0.0249130f, +0.1652644f, +0.1108785f, -0.1410134f, +0.1482719f, -0.0360147f, -0.2918345f,
  -0.1717744f, -0.0697642f, +0.0654621f, +0.0440409f, -0.1041165f, +0.0372575f, -0.2687484f, +0.0250353f,
  -0.1346994f, -0.0807851f, +0.1547116f, -0.5551612f, -0.0052912f, -0.4684849f, +0.0931653f, +0.2482332f,
  -0.1475837f, +0.1489876f, -0.3013624f, -0.1229708f, -0.0749677f, +0.1027056f, +0.0959440f, -0.3108945f,
  -0.0984740f, -0.5353854f, +0.3104114f, +0.0312960f, -0.1403914f, +0.0038437f, +0.1163696f, +0.1411628f,
  -0.1571212f, +0.2303428f, -0.0685448f, -0.2099525f, -0.0642240f, +0.0992647f, +0.1386711f, +0.0081476f,
  +0.0956584f, -0.1335136f, -0.0823960f, +0.1216207f, -0.0147197f, -0.1429607f, -0.0818123f, -0.2274633f,
  +0.0330329f, +0.0078070f, -0.1064312f, -0.0818309f, +0.2397640f, +0.0286057f, +0.2246551f, +0.1527799f,
  -0.0214045f, +0.2333815f, +0.4388329f, -0.3491549f, +0.0156105f, -0.5075758f, -0.2554528f, +0.3883919f,
  -0.0549407f, +0.1787807f, -0.0049941f, +0.2885866f, -0.1012176f, -0.1547143f, +0.0495632f, +0.0001665f,
  +0.1469190f, -0.1063398f, -0.0153109f, +0.0476863f, -0.2309244f, +0.0496744f, +0.2491422f, +0.2035064f,
  +0.4056212f, +0.0397938f, -0.3505934f, -0.0686250f, -0.1149138f, +0.2180372f, +0.2446745f, +0.1878470f,
  +0.0785088f, -0.1068890f, -0.0632978f, -0.0140251f, +0.0427702f, +0.2340184f, +0.0567242f, +0.1561330f
);

const float biases[4] = float[4](
  -0.0388819f, -0.0200023f, -0.0185884f, -0.0257593f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer72 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1455369f, -0.0594310f, -0.0039112f, +0.1613018f, +0.1201142f, +0.0153553f, -0.1886778f, +0.2089759f,
  -0.2102917f, +0.0669169f, +0.0334525f, +0.0588299f, +0.0289326f, +0.1775513f, -0.4032443f, -0.1390659f,
  -0.1918600f, +0.0631168f, -0.0156833f, -0.0161257f, -0.0946849f, -0.0355865f, -0.2556022f, -0.2741883f,
  +0.1210766f, -0.2683271f, +0.3380120f, +0.2603454f, -0.1915929f, -0.0008155f, +0.0434977f, +0.1547296f,
  +0.1836346f, +0.0702591f, -0.5758202f, -0.0567338f, +0.0072005f, -0.2335783f, +0.0848756f, -0.0074359f,
  +0.0349587f, -0.1293464f, -0.0611418f, +0.1727082f, +0.0193294f, -0.1417973f, +0.0358193f, +0.1033526f,
  +0.2937804f, -0.0185655f, -0.0599699f, -0.1543417f, -0.0409130f, +0.0153830f, +0.1958929f, +0.0774695f,
  -0.0921233f, +0.1599010f, -0.2618586f, +0.2527961f, +0.1670574f, -0.2571526f, -0.0077581f, +0.0315277f,
  -0.0901233f, +0.0056671f, +0.1561050f, -0.0607279f, +0.0334483f, -0.1679175f, +0.2082407f, +0.3530461f,
  -0.2835242f, +0.1095321f, -0.0025558f, +0.0481578f, -0.1280243f, +0.1602187f, +0.0441355f, -0.0648566f,
  -0.0903125f, +0.2403986f, +0.0421658f, +0.2454264f, -0.1640550f, +0.2437907f, -0.0984450f, +0.1803435f,
  -0.2820600f, +0.0609161f, -0.0877527f, -0.1268771f, -0.0866509f, +0.2395414f, +0.2186789f, -0.0571561f,
  +0.2851266f, +0.2189640f, +0.0785781f, +0.2908888f, +0.1498884f, +0.1881832f, +0.0172951f, +0.2979403f,
  +0.1384389f, +0.2292870f, +0.0624091f, +0.1794626f, +0.1384479f, -0.6867741f, -0.0347317f, +0.0562556f,
  -0.1308679f, -0.0271717f, +0.2516252f, +0.1572797f, +0.1091095f, -0.0358685f, +0.0015162f, +0.1959527f,
  -0.2103890f, +0.0105050f, +0.1452751f, +0.1415323f, -0.1501724f, -0.0805372f, +0.0007685f, +0.0774105f,
  -0.0466799f, -0.2297278f, +0.0547465f, +0.1067243f, -0.2874184f, +0.2142094f, -0.4697003f, -0.0413575f,
  +0.0350062f, +0.2206263f, +0.1144685f, +0.1703403f, -0.1066893f, +0.0317627f, -0.0366696f, -0.1138778f,
  +0.1314234f, -0.3309091f, -0.1493957f, +0.2294204f, -0.0689497f, +0.0686505f, +0.0649163f, -0.1665730f,
  -0.0060793f, +0.3023683f, +0.0423618f, +0.1463121f, +0.1588886f, -0.0501297f, +0.1876840f, +0.4559398f,
  +0.1447942f, -0.1361923f, +0.2634083f, +0.0015620f, -0.0573035f, +0.1126768f, -0.1041384f, -0.1735774f,
  -0.0123239f, -0.0461115f, +0.2081709f, +0.1210032f, -0.0773301f, -0.0239451f, +0.0804325f, +0.1995201f,
  -0.1211165f, +0.2823288f, -0.1166130f, +0.1691259f, +0.1703301f, +0.3090462f, +0.3127529f, +0.2465887f,
  +0.2470573f, +0.1747610f, -0.0176807f, +0.4727090f, +0.0912776f, +0.3279800f, +0.1929339f, +0.1015074f,
  -0.0044334f, -0.0694995f, +0.0018363f, +0.0118235f, +0.0354024f, +0.1027808f, -0.0168213f, +0.1990702f,
  +0.0828155f, -0.0728663f, +0.1166809f, -0.1447547f, -0.1071183f, +0.0448220f, +0.1177457f, -0.2723792f,
  -0.0306449f, +0.0126559f, -0.2048051f, -0.0397106f, -0.1310714f, -0.2894286f, +0.3511782f, -0.0154684f,
  +0.1310896f, +0.1127200f, -0.1153618f, -0.0794776f, -0.3078719f, +0.0238477f, -0.1581635f, +0.4317344f,
  +0.1859400f, +0.1043403f, -0.0977192f, -0.1448600f, -0.3709495f, -0.1663520f, -0.0172175f, -0.0398636f,
  +0.1369203f, +0.1159879f, -0.0917944f, -0.2164770f, -0.1989405f, -0.0512936f, -0.0722926f, -0.1542909f,
  +0.1508349f, +0.1299887f, +0.1290689f, +0.0530795f, +0.1960010f, -0.0046283f, +0.1361892f, -0.0212763f,
  +0.2135767f, +0.3046117f, -0.0851936f, -0.2733800f, -0.2558224f, -0.0676902f, -0.3854951f, +0.0410584f,
  +0.0563510f, +0.0033515f, -0.0735332f, +0.2680340f, -0.2205395f, -0.0462007f, -0.0097578f, -0.0915342f,
  +0.0428128f, +0.0580283f, -0.0989860f, -0.1687546f, -0.3410178f, -0.0122887f, +0.0689898f, -0.1763128f,
  +0.1269583f, -0.1798052f, +0.3784711f, +0.2492024f, +0.2197518f, +0.1132702f, +0.0828692f, -0.1697853f,
  -0.0396146f, -0.2716484f, -0.0284784f, +0.1091961f, +0.2988208f, -0.0294078f, -0.0459919f, +0.0655865f
);

const float biases[4] = float[4](
  +0.0101508f, +0.0148164f, -0.0332486f, -0.0026141f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer73 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1955719f, +0.3159472f, -0.2048134f, +0.1564380f, -0.0416998f, +0.0188169f, -0.0111491f, +0.0086621f,
  -0.0389992f, -0.3079447f, +0.3286776f, -0.3315412f, +0.1419825f, +0.0630775f, -0.3025423f, +0.1131571f,
  +0.0323040f, -0.0215531f, +0.0972127f, -0.1985343f, +0.0268031f, -0.3020090f, +0.1874142f, -0.2039511f,
  -0.1657677f, +0.1399421f, -0.3349820f, -0.0991739f, +0.0108272f, +0.1506575f, -0.0051095f, +0.0279257f,
  -0.2715436f, -0.0552941f, -0.3624917f, +0.1312317f, -0.0692028f, +0.1179097f, -0.1913576f, +0.0930294f,
  +0.2483039f, -0.1854481f, +0.0263153f, +0.0647643f, -0.0736760f, -0.2501254f, +0.5098940f, +0.0174274f,
  -0.0842181f, -0.0728973f, -0.0085440f, -0.0784911f, +0.0652638f, +0.1360347f, +0.1234017f, +0.0002485f,
  -0.2535680f, +0.2718474f, +0.1282451f, +0.1526996f, +0.0396467f, -0.1402708f, +0.1628792f, +0.0078232f,
  +0.3846111f, +0.1081457f, +0.1206804f, -0.4806772f, +0.2141815f, +0.0080917f, -0.3353803f, -0.4421071f,
  +0.0734572f, -0.0838456f, +0.0345544f, +0.0681748f, -0.0322663f, -0.0185760f, -0.1546604f, -0.0883762f,
  +0.1584397f, -0.1927394f, -0.0130664f, +0.1176828f, -0.1688827f, +0.0649878f, -0.1344193f, +0.0081928f,
  +0.1083671f, +0.0868630f, +0.0413757f, -0.2565166f, +0.1883869f, +0.0484794f, -0.1686310f, -0.1144039f,
  +0.6576541f, +0.3499928f, -0.0166087f, +0.0477485f, -0.1726152f, -0.0643938f, -0.0812176f, -0.0618589f,
  +0.0907063f, -0.0049695f, +0.4096296f, +0.3699771f, +0.3141560f, -0.0005425f, +0.0760403f, +0.1900474f,
  +0.1318685f, -0.0462082f, -0.2508561f, -0.2425171f, -0.1393321f, -0.1116750f, -0.4031594f, +0.1757835f,
  +0.1365024f, +0.0668297f, +0.1658202f, +0.1570223f, -0.0635755f, -0.0214963f, -0.2016366f, +0.1750247f,
  +0.0095179f, +0.0658802f, +0.1648061f, +0.1242888f, +0.2217658f, +0.2218544f, +0.0113900f, +0.0518203f,
  +0.1346468f, -0.4213757f, +0.0827792f, -0.5853746f, -0.1094140f, -0.0884665f, +0.2156300f, -0.0723196f,
  -0.1651497f, -0.1344609f, -0.0795120f, -0.2245875f, +0.2584688f, +0.1481907f, -0.0440307f, -0.1517862f,
  -0.1342595f, -0.0961168f, -0.1003950f, -0.1300492f, +0.0684726f, +0.2331209f, +0.3189085f, +0.0665837f,
  +0.1260930f, +0.1111675f, -0.1320949f, -0.3126296f, +0.4925083f, -0.1183635f, -0.2564094f, +0.1134698f,
  +0.0456650f, -0.1306752f, +0.0354902f, +0.1145095f, +0.1765633f, -0.3101419f, -0.0791272f, -0.1876566f,
  -0.0482410f, -0.4019598f, -0.3428735f, -0.3523629f, +0.2573950f, +0.2713860f, +0.4041642f, +0.3654175f,
  +0.2022521f, -0.1088823f, +0.0297101f, +0.1257528f, +0.1068456f, +0.2359239f, -0.0136340f, -0.1937459f,
  +0.1562187f, -0.3109768f, +0.0706868f, -0.0038328f, -0.1557928f, +0.1289887f, +0.0171593f, +0.0252650f,
  -0.2566846f, +0.0407909f, -0.0771477f, -0.1617643f, -0.1208387f, -0.0553927f, -0.0629121f, +0.1097037f,
  +0.0523090f, +0.1493272f, +0.1439833f, +0.1342612f, -0.1768732f, -0.0354924f, -0.0182528f, -0.1205301f,
  -0.0400612f, -0.1934242f, +0.2023023f, +0.0244157f, +0.5148791f, -0.1391552f, +0.1264060f, -0.1823309f,
  +0.2646189f, -0.0483232f, -0.3622329f, -0.1032836f, -0.3805160f, +0.1741858f, -0.1647646f, +0.1458741f,
  +0.0386792f, +0.1578315f, +0.1990798f, -0.3190629f, -0.2472617f, -0.2395225f, +0.0510738f, -0.2241137f,
  -0.1156998f, -0.3624352f, +0.1701553f, +0.0480701f, +0.0260583f, -0.0698904f, -0.3849292f, -0.2333383f,
  +0.1382142f, +0.2972648f, -0.0984365f, -0.8856173f, -0.2593594f, -0.0632457f, +0.1763856f, +0.0018891f,
  -0.0547065f, -0.1325636f, +0.3937189f, +0.1752426f, -0.3152196f, -0.0971835f, -0.0699569f, -0.3553650f,
  +0.3948625f, +0.2420167f, -0.1434160f, -0.3003044f, -0.0076495f, +0.1099373f, -0.1824289f, -0.2086776f,
  -0.3306873f, +0.3052478f, +0.3754098f, +0.0200812f, -0.0086374f, -0.0489377f, -0.4919855f, -0.0386379f,
  -0.0699784f, -0.1545781f, -0.0838263f, +0.0315365f, +0.0752908f, +0.0812906f, +0.3960420f, -0.0788449f
);

const float biases[4] = float[4](
  -0.0726708f, -0.0681921f, -0.0942511f, -0.0468034f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer73 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2351578f, +0.0277496f, -0.0797572f, -0.0159402f, -0.2495583f, +0.2106980f, +0.1898416f, -0.0599565f,
  -0.1009691f, -0.2800433f, -0.1769695f, -0.0257136f, +0.2363142f, +0.1788449f, -0.0458153f, +0.2671514f,
  +0.0117192f, +0.1169615f, +0.1388751f, -0.0111115f, +0.1226638f, -0.0274964f, -0.1273931f, +0.2023812f,
  +0.0272337f, +0.1023083f, +0.0967308f, +0.4608037f, -0.0985057f, -0.0476089f, +0.4588088f, +0.0727513f,
  -0.0450774f, +0.1579662f, -0.0406788f, +0.0026071f, +0.1486662f, +0.3393613f, -0.4978395f, +0.1727265f,
  +0.1348868f, +0.1657292f, -0.0472561f, -0.0636856f, +0.1520426f, -0.0778809f, -0.1082246f, +0.2286772f,
  -0.1524015f, +0.0960466f, -0.1474852f, +0.0417228f, -0.1302328f, -0.2223509f, -0.0994631f, -0.1595998f,
  +0.0606835f, +0.0183079f, +0.2354316f, -0.2095410f, -0.1388674f, +0.1176058f, -0.0260064f, -0.0793158f,
  +0.1909261f, +0.0898202f, -0.1859044f, -0.0060622f, +0.0487509f, -0.1895096f, -0.1361086f, +0.1921148f,
  +0.1179264f, -0.0760868f, -0.0550380f, +0.1502758f, +0.0702782f, +0.0345010f, +0.0166248f, -0.0088723f,
  +0.0370024f, +0.2068083f, -0.3565758f, +0.1040701f, +0.4626324f, +0.1122142f, +0.2730055f, +0.0988541f,
  -0.1006002f, +0.1143617f, -0.3460304f, -0.1122211f, -0.0040916f, -0.2358639f, -0.1834908f, +0.0357282f,
  -0.4330596f, +0.4585987f, -0.0611889f, +0.2160911f, -0.3785614f, +0.2012352f, -0.2638764f, -0.0224538f,
  +0.1398056f, +0.2352168f, -0.1393954f, -0.1544671f, +0.0863061f, +0.2266041f, -0.1940346f, +0.2470101f,
  +0.0251003f, +0.1892184f, -0.1038084f, +0.1507011f, +0.1012128f, +0.1035015f, -0.0144197f, +0.0440325f,
  -0.2620086f, -0.0897192f, +0.0525696f, +0.3189759f, +0.0334087f, +0.1110682f, +0.1717194f, -0.0354235f,
  -0.0734189f, +0.0514852f, -0.1688275f, +0.0841244f, +0.1294270f, -0.0984013f, +0.0393474f, +0.0099036f,
  -0.2513817f, +0.0859290f, -0.0308367f, +0.1004676f, +0.1166896f, +0.0730316f, -0.0229500f, -0.1354402f,
  -0.0526208f, +0.4096791f, +0.0178264f, +0.0524449f, -0.0343596f, -0.0895501f, +0.4948333f, +0.1276202f,
  -0.0171187f, -0.1506908f, +0.2150610f, +0.3941955f, +0.0430697f, +0.1998324f, -0.0485289f, -0.0790107f,
  +0.3191874f, +0.0654863f, +0.0080518f, +0.1574900f, -0.2640697f, +0.1377192f, +0.0977868f, +0.1812653f,
  +0.2489567f, +0.0005301f, -0.2331951f, -0.1979505f, -0.0358211f, +0.2598348f, -0.2258428f, -0.1717804f,
  +0.2065797f, +0.0867674f, +0.1316422f, +0.3718818f, +0.1916356f, +0.1367863f, -0.1224273f, +0.0670199f,
  +0.0088270f, +0.0331776f, -0.1696840f, -0.1540882f, -0.2732258f, +0.1931219f, +0.0473995f, -0.0302836f,
  +0.0428942f, +0.1016793f, -0.2390055f, -0.0690597f, +0.0329462f, +0.1281388f, -0.0601049f, -0.0775833f,
  -0.1089339f, +0.1040875f, +0.1645137f, +0.1629690f, +0.0510361f, +0.1463960f, -0.1009881f, +0.0330612f,
  +0.0822898f, +0.1039029f, -0.2244391f, -0.0564622f, -0.0240180f, -0.0439986f, -0.1363179f, +0.1175075f,
  +0.0512325f, -0.1064167f, -0.2271003f, +0.0336500f, +0.1778910f, -0.2057837f, -0.0529301f, -0.1814597f,
  +0.0697357f, -0.1682613f, -0.2320278f, -0.0385477f, -0.1919246f, +0.1042352f, +0.3822830f, -0.0877816f,
  +0.1149955f, -0.1244375f, +0.0051632f, +0.0182977f, -0.0653518f, +0.0876488f, -0.0305009f, +0.1167360f,
  -0.2413261f, -0.0806897f, +0.1381072f, -0.0230595f, -0.0997788f, -0.1141499f, +0.1391397f, -0.0328185f,
  +0.2842850f, +0.4743176f, +0.3802050f, -0.7902188f, +0.1767249f, -0.2799137f, +0.2486988f, -0.3732467f,
  -0.6189746f, +0.0386873f, +0.2431562f, -0.4952258f, +0.2957471f, -0.3224239f, +0.2823871f, -0.7161695f,
  +0.4394235f, +0.0384810f, -0.1426188f, -0.1033038f, +0.1937104f, +0.2172631f, +0.0565342f, -0.1211812f,
  +0.1000172f, +0.2288820f, +0.2614520f, +0.3467116f, +0.3704683f, -0.1452972f, -0.1118618f, -0.0016969f,
  -0.0417340f, -0.0638200f, +0.1659825f, +0.3701179f, +0.0077279f, +0.2110011f, +0.1953433f, -0.2513972f
);

const float biases[4] = float[4](
  +0.0093527f, +0.0314318f, -0.0103434f, -0.2024470f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer74 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.3431407f, -0.0068772f, -0.2327103f, -0.3108986f, -0.1472174f, +0.1566860f, -0.1590608f, +0.3376671f,
  +0.0009053f, -0.2032367f, -0.1165471f, +0.1355344f, -0.2359451f, -0.0701611f, -0.1388572f, +0.4172389f,
  -0.0680196f, +0.0002141f, -0.2231351f, +0.1093473f, +0.1408164f, +0.1346048f, -0.1534013f, -0.0842124f,
  -0.2306248f, -0.0446140f, -0.1624924f, -0.2009389f, -0.1340184f, -0.0149639f, +0.0100768f, +0.4550937f,
  +0.0407307f, +0.1270977f, +0.0676934f, +0.4736627f, +0.0849971f, -0.1569259f, -0.1109936f, -0.5451770f,
  -0.0123476f, -0.1462378f, -0.3674238f, -0.3157150f, +0.1550764f, +0.0573756f, -0.0245496f, +0.2833464f,
  -0.2212011f, -0.2482040f, -0.2504613f, -0.0310680f, -0.3370995f, -0.0019097f, -0.2710693f, -0.1838315f,
  -0.0408989f, -0.0251653f, -0.0488683f, -0.1546833f, +0.0204504f, -0.0288225f, -0.0197834f, +0.1247503f,
  -0.0101923f, +0.0981350f, +0.0176582f, +0.0296336f, +0.0101812f, -0.1269524f, +0.2667174f, -0.1357164f,
  +0.1339042f, +0.0364446f, -0.1020289f, -0.2110116f, -0.0475246f, +0.1472061f, -0.0967137f, +0.1516814f,
  -0.0203290f, -0.1876305f, -0.1327503f, +0.1258740f, -0.0706752f, +0.1421694f, +0.0199761f, +0.0601330f,
  +0.1716537f, +0.0757312f, +0.0184230f, -0.0299956f, -0.1935477f, +0.1887564f, +0.1321290f, -0.0813417f,
  +0.0669779f, -0.0247124f, -0.0317370f, +0.2294090f, -0.2673670f, +0.1411824f, -0.0891439f, +0.0910261f,
  -0.1342288f, -0.0510955f, +0.3470268f, +0.2869543f, -0.1070401f, -0.0072096f, +0.0420918f, -0.2478419f,
  +0.0286397f, -0.0173378f, -0.0333069f, -0.0824993f, -0.0671217f, -0.1488162f, +0.2467160f, -0.0974728f,
  -0.0044395f, -0.1003764f, +0.0810797f, +0.1629549f, +0.0575952f, +0.0197717f, +0.0331126f, +0.0282566f,
  +0.0914954f, -0.2515290f, +0.3275823f, -0.1585302f, +0.1266751f, -0.0908542f, +0.3402486f, +0.1937861f,
  -0.0778355f, -0.0668679f, -0.2149158f, +0.1898919f, +0.1482926f, +0.0222780f, +0.0065624f, +0.0361935f,
  +0.2285377f, -0.0639105f, +0.0214456f, -0.2236674f, -0.0027511f, -0.1023160f, +0.0645306f, -0.0593887f,
  -0.0127391f, -0.2177480f, -0.1310458f, +0.0221995f, -0.3451368f, -0.2216420f, -0.0003417f, -0.3718829f,
  +0.0190519f, +0.0509678f, +0.2360941f, +0.0818394f, +0.0818859f, +0.0159124f, -0.0665565f, -0.0543306f,
  -0.1883585f, +0.0018649f, +0.0918332f, +0.1697448f, -0.1407692f, +0.1300492f, -0.1603442f, -0.1051872f,
  +0.1067036f, -0.0801490f, +0.0269121f, -0.2299126f, -0.1445728f, +0.1311037f, -0.0721001f, -0.3451036f,
  +0.0198385f, +0.0622357f, -0.0617333f, +0.1600713f, +0.1083292f, +0.1189529f, -0.0924998f, -0.2175973f,
  -0.0913997f, -0.1289681f, -0.0162633f, +0.4040672f, -0.1358323f, +0.3687760f, +0.0614711f, -0.0084578f,
  +0.1173247f, -0.2675747f, -0.1204897f, -0.0749429f, +0.4414420f, +0.0089035f, +0.0571705f, +0.1395115f,
  +0.2452617f, -0.0401572f, -0.0075877f, +0.2180824f, -0.0049276f, -0.1935335f, +0.1479832f, +0.0664180f,
  +0.2748905f, +0.0417225f, -0.2890276f, -0.5912456f, -0.0045988f, -0.1931605f, +0.0609568f, +0.1740080f,
  -0.1907110f, +0.2763225f, -0.0719653f, +0.5790859f, +0.0825940f, -0.0118526f, -0.0284548f, -0.3389187f,
  -0.0174628f, +0.0498336f, -0.1903119f, -0.1720615f, +0.0329837f, -0.1754966f, +0.1166444f, -0.0629756f,
  +0.0144224f, -0.0502775f, -0.4254266f, +0.0318759f, -0.0063761f, +0.3451869f, -0.1390209f, +0.3491597f,
  +0.0521791f, -0.0209870f, +0.5655195f, -0.7356591f, +0.1119624f, -0.0377835f, -0.2030231f, +0.6038976f,
  +0.0111320f, -0.0692247f, -0.1005746f, +0.2776850f, -0.4827209f, -0.2138865f, +0.2704968f, -0.1083904f,
  -0.0916200f, -0.1167044f, +0.1383390f, +0.0202577f, -0.2442293f, -0.0838016f, +0.0542961f, -0.0824468f,
  -0.0185621f, -0.1160400f, -0.2138244f, -0.1856188f, +0.1262739f, -0.0140879f, -0.3511505f, -0.1426010f,
  -0.0615712f, +0.0456668f, +0.3037056f, -0.0436412f, +0.2136948f, +0.1008138f, -0.2507329f, -0.1113946f
);

const float biases[4] = float[4](
  +0.0038743f, -0.0360250f, +0.0060949f, -0.0106681f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer74 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3642583f, -0.0980140f, +0.3034664f, +0.0054862f, -0.2264328f, -0.0035108f, -0.1221975f, -0.0787193f,
  +0.0592319f, +0.1470976f, +0.2873032f, -0.1709745f, -0.0833405f, +0.0946673f, -0.2037328f, +0.1581406f,
  +0.0767570f, -0.1442602f, +0.1389987f, -0.2320675f, -0.2133381f, +0.0114554f, -0.0726748f, +0.0406168f,
  +0.0294515f, -0.0949690f, +0.0949285f, -0.2352375f, -0.2192249f, -0.0502026f, +0.1982249f, -0.1407340f,
  -0.0495404f, +0.0115458f, -0.1920713f, -0.2515559f, +0.0052009f, -0.1678703f, -0.0381572f, +0.0000257f,
  +0.1600287f, -0.0499554f, +0.0192538f, +0.1695379f, -0.3199861f, +0.0834946f, +0.1142849f, -0.0136223f,
  -0.0791453f, -0.3089016f, -0.2051223f, +0.3192363f, +0.1788842f, -0.1092005f, +0.2564806f, -0.0359730f,
  +0.1713613f, -0.0928351f, -0.0181629f, +0.0060109f, -0.4013143f, -0.2158082f, -0.2012233f, +0.1688088f,
  -0.0430165f, -0.0644139f, -0.2100669f, +0.0151622f, +0.2133557f, +0.1559359f, -0.0057444f, -0.1185339f,
  -0.0957015f, +0.0910367f, -0.2857617f, +0.1081083f, -0.0856141f, -0.0644530f, +0.0510143f, -0.0770053f,
  -0.0215457f, -0.1419133f, -0.2847340f, -0.3710865f, -0.3978366f, -0.0136458f, -0.2461964f, +0.1194631f,
  +0.0485500f, +0.0181984f, -0.0503185f, -0.0118711f, +0.0066117f, -0.0932012f, -0.2420343f, -0.0807396f,
  +0.0528628f, +0.0093154f, -0.1928315f, -0.2491983f, -0.0783877f, -0.2285168f, +0.0645288f, +0.3224174f,
  -0.0258993f, +0.0171605f, -0.1784413f, -0.1506419f, -0.1824631f, -0.3662267f, +0.1186493f, -0.0801540f,
  +0.0169297f, +0.0791137f, -0.1299167f, +0.0777351f, +0.0453797f, -0.0332613f, -0.1984407f, -0.0451241f,
  +0.0139385f, -0.0932756f, -0.0140030f, -0.2858348f, -0.2743902f, -0.1382032f, -0.1180766f, -0.0776593f,
  -0.2490849f, +0.0883146f, -0.2506552f, +0.3100919f, +0.1533290f, -0.1763923f, +0.1068954f, -0.3304998f,
  -0.1156896f, +0.0429157f, -0.0525613f, +0.0598553f, -0.1999508f, +0.1731240f, +0.2405336f, -0.0930895f,
  +0.5079426f, -0.0227919f, +0.1820332f, +0.0321270f, -0.0066729f, -0.0558145f, -0.0845152f, -0.2311101f,
  -0.2122701f, -0.1783995f, +0.0475541f, +0.1200313f, +0.0330474f, +0.0314957f, +0.3261234f, -0.1039457f,
  +0.0142212f, -0.0208115f, -0.1548543f, +0.2265511f, -0.0076972f, -0.1594721f, -0.1157548f, -0.1313799f,
  +0.0719400f, +0.3055919f, -0.3591895f, +0.1391858f, +0.0504665f, -0.1575242f, +0.0001763f, -0.3397548f,
  +0.2182943f, -0.1064105f, +0.0786054f, +0.3583215f, +0.3268842f, +0.0742938f, +0.1997962f, -0.2867658f,
  +0.0953601f, -0.1368468f, -0.1788653f, -0.1095072f, -0.2900721f, -0.0235813f, +0.1142689f, +0.0943420f,
  +0.2404845f, +0.0096004f, -0.1893480f, +0.1154010f, +0.2066892f, -0.0843227f, -0.0538223f, -0.0552928f,
  +0.1043997f, +0.2229031f, -0.0698628f, +0.0837506f, +0.0862502f, -0.0104342f, -0.2185569f, +0.0579666f,
  +0.0123796f, -0.0575155f, +0.2617194f, -0.1229911f, +0.0135693f, -0.3654264f, -0.1791456f, -0.1053607f,
  +0.4997489f, -0.1348666f, +0.0734119f, +0.0216657f, -0.0098229f, +0.3617300f, -0.0875343f, +0.1690693f,
  +0.1358716f, +0.2836770f, -0.0173568f, -0.1959837f, +0.1641956f, +0.1998879f, -0.0556257f, -0.0131217f,
  +0.1208251f, +0.1035698f, +0.0028839f, +0.0110575f, +0.1980792f, +0.1089094f, +0.2220127f, +0.1212687f,
  +0.0212846f, +0.2145324f, +0.1645686f, -0.7461526f, -0.0895122f, -0.2425826f, -0.0254672f, +0.5104545f,
  -0.0860514f, +0.6373149f, +0.1123745f, +0.9138112f, +0.1775148f, +0.0602207f, -0.2328374f, +0.0776400f,
  -0.1748184f, +0.0389304f, +0.0123123f, -0.0080081f, -0.2421433f, -0.3051361f, +0.3659592f, -0.0061850f,
  +0.0947532f, -0.0061095f, -0.0342156f, -0.0169434f, -0.3233284f, -0.1829868f, -0.2201364f, +0.1407453f,
  +0.0245512f, +0.0287827f, +0.0203124f, +0.1086516f, +0.1732717f, -0.1724151f, +0.0509518f, +0.2705428f,
  -0.0185417f, -0.0558723f, -0.1586698f, +0.1070035f, +0.0071633f, -0.0982798f, +0.2039843f, +0.0895115f
);

const float biases[4] = float[4](
  +0.0027090f, +0.0456335f, -0.0149894f, -0.0359121f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer75 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1680289f, -0.0861055f, +0.2087032f, -0.1373807f, -0.1514994f, -0.1197244f, -0.2996212f, -0.0239174f,
  +0.1292839f, +0.1605187f, +0.0619548f, +0.0070416f, -0.0619593f, -0.1036514f, -0.1114706f, -0.1891104f,
  -0.0861081f, -0.0251316f, -0.0265079f, -0.1147226f, +0.3265195f, +0.0671250f, +0.1361438f, -0.2140099f,
  +0.0449786f, -0.6140492f, +0.2840520f, +0.2223802f, -0.2417938f, -0.0085556f, -0.2292360f, -0.3372574f,
  +0.1110386f, +0.0510236f, -0.4346299f, -0.3316880f, -0.0486533f, -0.3828903f, +0.2011251f, +0.0809395f,
  -0.0369066f, +0.2273176f, +0.4409868f, -0.0731199f, +0.0787743f, +0.0714580f, +0.0119204f, -0.3967468f,
  +0.0954701f, -0.0853146f, +0.0661275f, +0.1141445f, -0.0616763f, +0.1606586f, -0.0328064f, -0.0200342f,
  +0.3036320f, -0.0729106f, -0.5562977f, -0.4306656f, +0.0377901f, -0.1519596f, -0.2272447f, +0.1034993f,
  +0.0409794f, +0.2061526f, +0.2615161f, +0.1635759f, +0.1717166f, +0.1400681f, +0.0036443f, -0.1256491f,
  -0.0764740f, -0.3082767f, -0.0242488f, -0.0602139f, -0.1402907f, -0.0747206f, -0.1866734f, -0.0114942f,
  +0.0402541f, +0.1648981f, +0.2658519f, -0.2151046f, +0.2902955f, +0.2248794f, -0.0379084f, +0.0208312f,
  -0.2401232f, +0.1378866f, -0.0972658f, +0.1096920f, -0.4151362f, +0.0995918f, +0.3376571f, +0.1341953f,
  -0.0618967f, +0.1687768f, +0.0887013f, +0.0527958f, -0.1723311f, +0.1507797f, +0.0475144f, +0.2879393f,
  +0.0392583f, -0.3234877f, +0.1000986f, +0.0881905f, +0.1036641f, +0.1582253f, +0.0331780f, +0.0195454f,
  +0.0598188f, -0.0832120f, +0.0526494f, +0.0902278f, -0.0953573f, +0.0523129f, +0.1215089f, +0.0144265f,
  -0.1368405f, +0.1487145f, -0.2427652f, -0.0434306f, -0.0737411f, -0.2235431f, -0.0209751f, +0.0974663f,
  +0.1180668f, +0.1723718f, -0.1787608f, -0.0708000f, +0.0176657f, -0.2253760f, +0.0990691f, -0.2701143f,
  -0.1181049f, +0.0811435f, -0.0588420f, +0.0024389f, -0.0932497f, +0.0916213f, +0.1318699f, -0.1800910f,
  +0.1385611f, +0.1560863f, -0.1930764f, +0.4395478f, -0.3825821f, -0.0443698f, +0.1645806f, -0.1824642f,
  +0.1962489f, -0.1579128f, +0.2475884f, +0.0849821f, -0.4661127f, +0.1013811f, +0.1392805f, +0.0280197f,
  +0.2536911f, -0.1392634f, -0.2897882f, -0.0024930f, -0.0240723f, +0.0932173f, -0.0109489f, +0.3792540f,
  -0.3774409f, +0.1141674f, -0.0905673f, +0.0651243f, -0.0375121f, +0.1294987f, -0.1430331f, +0.0780672f,
  +0.1201109f, +0.0391089f, -0.0801759f, +0.0542710f, -0.2140316f, +0.0428776f, +0.2393513f, -0.2352555f,
  +0.0136512f, -0.2214728f, -0.0310626f, +0.0527276f, +0.1467251f, -0.0280548f, +0.1394800f, -0.0120131f,
  -0.2631403f, -0.0189111f, -0.0142463f, +0.3054357f, +0.0828770f, +0.1158974f, -0.1740645f, -0.0545487f,
  +0.1179503f, -0.0167472f, -0.0038247f, +0.0775471f, -0.0381908f, -0.1498419f, -0.0233356f, +0.1027185f,
  +0.1476907f, +0.0886840f, -0.2659858f, -0.0356848f, +0.0143019f, -0.1260302f, -0.0443330f, +0.2274386f,
  -0.0615811f, -0.0026622f, +0.0055366f, +0.2422350f, +0.1419140f, +0.1525954f, -0.0018928f, -0.0031339f,
  -0.0271946f, +0.1249884f, +0.0182344f, +0.1053239f, +0.0145866f, +0.2096814f, -0.1554195f, -0.1083768f,
  +0.1605741f, +0.0054018f, -0.1412565f, +0.1360109f, -0.0095167f, +0.0170144f, +0.1711033f, -0.0268844f,
  +0.0122463f, +0.0147600f, -0.0564367f, -0.1074018f, -0.0699226f, -0.1953170f, +0.1115970f, -0.1343849f,
  -0.2730098f, -0.2494175f, +0.1819961f, +0.0027786f, +0.0114013f, +0.0648231f, -0.1670204f, -0.0874822f,
  +0.1851579f, +0.1310711f, -0.0258313f, +0.0905818f, +0.1421773f, -0.0154106f, -0.0759282f, +0.3418305f,
  +0.0899273f, -0.0540254f, -0.0214244f, +0.0417021f, +0.0181332f, +0.0044183f, -0.0185120f, -0.1452364f,
  -0.5079001f, -0.0117260f, +0.1647716f, +0.0055801f, +0.0578436f, +0.0426954f, -0.2696848f, -0.0821438f,
  +0.3451128f, -0.0213701f, -0.4020179f, -0.1183333f, +0.2600744f, -0.2053552f, +0.2598583f, +0.3166238f
);

const float biases[4] = float[4](
  -0.0381921f, +0.0600122f, +0.0298703f, +0.0568096f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer75 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1800134f, -0.0209206f, -0.1179586f, +0.0247161f, -0.0510677f, -0.0796527f, +0.2028089f, -0.0736828f,
  -0.2054204f, +0.4068839f, +0.0059197f, -0.2171684f, +0.1493786f, +0.0852627f, +0.0463302f, -0.2005558f,
  -0.1994867f, -0.0280749f, -0.1234219f, +0.1638437f, +0.2758274f, +0.2020695f, +0.1062898f, -0.0018388f,
  -0.1313366f, +0.0731011f, -0.1925341f, -0.2249189f, +0.0476192f, +0.0452266f, -0.0709722f, +0.1199806f,
  -0.3097524f, +0.0330588f, -0.0891528f, +0.3614685f, +0.5269469f, +0.0739392f, +0.1191374f, -0.3238181f,
  -0.1304651f, -0.2244508f, -0.3826850f, +0.1057871f, -0.0987031f, +0.0932230f, +0.2989761f, +0.3723568f,
  -0.2542833f, +0.1202496f, -0.0610690f, -0.1654621f, +0.0339465f, -0.2080465f, -0.1452653f, -0.0026364f,
  -0.0524385f, +0.1650307f, -0.1232197f, -0.2238153f, +0.2274378f, +0.2276669f, -0.1754584f, +0.0407849f,
  +0.1964993f, -0.2007377f, -0.0863887f, +0.1061381f, +0.4002983f, +0.2209648f, +0.0404059f, +0.1585706f,
  +0.1722009f, -0.2192598f, -0.0299160f, -0.0292231f, +0.1182679f, +0.0126587f, -0.2874167f, +0.2018551f,
  -0.0604128f, -0.1392456f, -0.1848742f, -0.0670557f, -0.0343961f, +0.1898992f, -0.0781510f, +0.0993957f,
  +0.1061132f, -0.1620500f, -0.0809302f, +0.2046927f, -0.0930341f, +0.1312279f, +0.2505537f, -0.1056323f,
  -0.4534098f, +0.0716491f, +0.0672541f, +0.0856854f, -0.0486646f, -0.2296029f, +0.1225496f, -0.1485564f,
  -0.4206781f, +0.2113395f, +0.1129374f, -0.1725423f, -0.1965458f, -0.5265612f, +0.4733174f, -0.4375612f,
  -0.2951297f, +0.0371816f, +0.2517010f, +0.2044245f, -0.2509792f, -0.1626819f, +0.2276345f, -0.2951917f,
  +0.1504624f, +0.0181519f, +0.0156223f, -0.4120011f, +0.0601122f, +0.1096116f, +0.0841310f, -0.0258080f,
  +0.3995162f, -0.0473127f, -0.0053935f, +0.1447157f, +0.3623936f, +0.3640783f, -0.2522777f, -0.0745434f,
  +0.1167046f, -0.0867084f, -0.0429598f, +0.0338370f, +0.3690349f, +0.2945919f, -0.0460295f, +0.2430811f,
  +0.0160474f, +0.0745167f, +0.0173073f, -0.1195852f, -0.0920311f, -0.2692184f, +0.1899031f, +0.0384835f,
  -0.0010285f, +0.0320066f, +0.2034025f, +0.0710074f, -0.2017314f, -0.1345529f, -0.1127501f, +0.1616715f,
  -0.1492634f, +0.2788554f, -0.1002340f, -0.0086659f, -0.1272579f, -0.3047492f, -0.0823040f, +0.0768991f,
  +0.0334347f, +0.1507511f, -0.0437669f, -0.1279784f, +0.1134238f, +0.3929995f, -0.1507086f, +0.0313516f,
  -0.0376930f, -0.0504158f, +0.3021444f, +0.4104803f, +0.1777923f, -0.0827986f, +0.2182095f, -0.0284890f,
  +0.1703186f, -0.1506209f, +0.0858548f, +0.2872231f, -0.1612885f, -0.4108419f, -0.0667766f, -0.1236636f,
  -0.1914934f, +0.0600330f, +0.2606292f, -0.1271464f, +0.0834220f, +0.2324967f, -0.1190721f, +0.0175754f,
  -0.0844129f, +0.1350384f, +0.0579121f, -0.2062585f, -0.0259796f, +0.0450010f, -0.0814098f, -0.3134677f,
  +0.0838552f, +0.3729789f, +0.0438440f, +0.0146358f, -0.2391137f, -0.0399412f, -0.2834666f, -0.0875121f,
  +0.1979081f, +0.1055312f, +0.0910077f, -0.0893222f, +0.0543401f, +0.1305520f, +0.1097600f, +0.1816142f,
  -0.3695401f, -0.1526812f, -0.2885727f, -0.0450642f, +0.1259810f, -0.0088753f, +0.0227948f, +0.2113550f,
  +0.0541255f, -0.0565563f, -0.0794694f, +0.0308354f, -0.4008228f, -0.0209333f, +0.1231544f, +0.1429774f,
  -0.1893850f, -0.1731658f, -0.1333745f, +0.1114320f, +0.1388886f, -0.1361964f, +0.0238071f, -0.1442271f,
  +0.0109143f, +0.1894673f, -0.0364558f, +0.0566072f, +0.0445105f, -0.3762820f, +0.1060507f, -0.0933467f,
  +0.0361146f, -0.0427547f, -0.0982289f, -0.0987128f, -0.3825183f, +0.1572335f, +0.1651673f, +0.1789687f,
  -0.0464364f, +0.0443258f, +0.1687613f, -0.0464982f, +0.0668434f, +0.0875408f, -0.0683558f, -0.0896086f,
  -0.3147736f, -0.2024786f, -0.1233595f, -0.2741701f, -0.2269339f, -0.1214182f, -0.0099144f, +0.1210279f,
  -0.1144264f, +0.0461016f, -0.0523051f, +0.1366434f, -0.1727633f, -0.1899816f, -0.0756948f, -0.1702278f
);

const float biases[4] = float[4](
  +0.0788619f, -0.0316683f, +0.0065001f, +0.0631936f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer76 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2309211f, +0.2055084f, -0.1078894f, +0.0268107f, -0.2300090f, -0.1009429f, -0.1243439f, +0.0116449f,
  -0.0515353f, +0.2615184f, +0.2173146f, +0.3978764f, +0.0726935f, -0.3473981f, +0.2293006f, +0.1521316f,
  -0.1660665f, +0.2197875f, +0.1584617f, -0.0893387f, -0.1078918f, +0.3751501f, +0.0274579f, -0.0279836f,
  +0.0558305f, -0.0655765f, -0.1818976f, -0.0125160f, +0.0069766f, -0.1123665f, -0.0100432f, +0.1588806f,
  -0.1452662f, +0.2037693f, -0.1602025f, +0.3299880f, -0.1636503f, -0.1331078f, -0.2088476f, -0.1147256f,
  -0.1578888f, +0.0301856f, +0.1789210f, -0.0956715f, +0.0033221f, -0.3925330f, +0.0142489f, -0.1242888f,
  -0.0681145f, +0.2026414f, -0.1198062f, +0.1074420f, -0.0495366f, +0.3321165f, -0.1856613f, +0.0157147f,
  -0.3201528f, +0.1999092f, +0.0724844f, -0.2425788f, -0.0503042f, +0.0510117f, -0.0126650f, +0.3096080f,
  -0.0430019f, +0.0331011f, -0.1731381f, +0.0109124f, -0.0369560f, +0.0180928f, +0.0030052f, -0.1749120f,
  -0.1548501f, +0.1643674f, -0.0853570f, -0.0249222f, -0.0620154f, -0.1130373f, -0.1760592f, -0.0248004f,
  +0.0742653f, +0.1753214f, +0.0607840f, -0.1906443f, -0.2880073f, -0.1324304f, -0.1835952f, +0.1119342f,
  +0.0573872f, -0.2140783f, -0.0132571f, +0.0091124f, -0.0032923f, -0.3188442f, -0.0652950f, +0.1591641f,
  -0.1321366f, +0.2923124f, +0.2594540f, -0.1641880f, +0.0617710f, -0.1916800f, +0.0070151f, +0.2891012f,
  +0.3345839f, +0.0377185f, +0.1713203f, +0.2153763f, -0.0907455f, -0.0187397f, +0.0813156f, -0.2035451f,
  -0.2587962f, -0.0847925f, -0.1680944f, +0.2155264f, +0.2748872f, -0.0403279f, -0.0544408f, +0.0304508f,
  -0.1251082f, -0.0859369f, +0.2121004f, -0.1196260f, +0.2370154f, +0.1282420f, +0.2574733f, +0.0578872f,
  +0.2198314f, -0.3343934f, -0.0632010f, -0.0852918f, -0.2213282f, -0.0175560f, +0.2334691f, -0.0091925f,
  -0.1031066f, +0.0006150f, -0.0348481f, -0.0770724f, +0.3453749f, +0.0353891f, +0.0608305f, -0.0676777f,
  -0.0559059f, -0.0950264f, -0.1313349f, +0.2671719f, -0.0528661f, -0.0053776f, +0.1178553f, +0.0211498f,
  -0.0372269f, +0.3645781f, +0.1364332f, -0.3302293f, -0.1532452f, -0.2755120f, -0.1409935f, -0.0312705f,
  +0.0937867f, +0.1727085f, +0.0624557f, -0.0982311f, +0.1362368f, -0.0937060f, -0.1709849f, +0.1019676f,
  +0.1473695f, -0.1063679f, +0.2730883f, +0.0021609f, +0.1453823f, +0.0165257f, -0.0593628f, +0.2110383f,
  -0.5417793f, -0.0403411f, +0.0133740f, -0.2977921f, -0.1265428f, +0.9509805f, +0.0856651f, -0.2187104f,
  +0.0505699f, +0.1367414f, +0.1167214f, -0.2021344f, +0.1551146f, +0.1669943f, -0.1256867f, -0.1366313f,
  +0.2017482f, +0.0863066f, -0.1177232f, +0.2422425f, -0.0534326f, +0.3007488f, -0.0745514f, +0.0005676f,
  -0.0981011f, -0.3142844f, -0.1994674f, -0.0988631f, +0.0706853f, -0.0975136f, +0.0574632f, -0.0460456f,
  +0.1203231f, -0.0966341f, -0.4008564f, +0.0979866f, +0.2480991f, +0.0639850f, -0.0297595f, +0.0031063f,
  +0.1647360f, +0.0236117f, -0.2084183f, +0.3110937f, +0.2168655f, +0.0567483f, -0.0284326f, +0.0770937f,
  +0.1055528f, -0.1129528f, +0.2860075f, -0.4607291f, +0.0473536f, +0.2379897f, +0.1295915f, -0.0215286f,
  -0.1628383f, +0.1657985f, +0.0896511f, +0.1731614f, +0.0995738f, +0.0285652f, -0.0245755f, -0.1487200f,
  -0.2108773f, +0.1888545f, -0.1690072f, +0.2494705f, +0.0061770f, -0.4273281f, +0.0800718f, +0.1211991f,
  -0.0882629f, +0.0397484f, -0.0823392f, +0.0766135f, -0.3064982f, -0.6456118f, -0.1454270f, +0.1730367f,
  +0.1370091f, +0.0589756f, -0.1137244f, +0.1915572f, -0.0255468f, -0.1229110f, -0.0548994f, +0.1022137f,
  +0.1507345f, -0.0297068f, -0.0585181f, +0.1912294f, +0.1342839f, +0.0583707f, -0.0890555f, -0.1003969f,
  +0.1455838f, +0.1180812f, -0.2905020f, +0.0749040f, +0.2160649f, +0.3016614f, -0.2697667f, -0.0555596f,
  +0.0201051f, +0.0999236f, +0.1632107f, +0.0214954f, -0.1255780f, +0.0429189f, -0.0345877f, +0.0533895f
);

const float biases[4] = float[4](
  +0.0069597f, -0.0448477f, +0.0242263f, +0.0014475f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer76 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0218398f, -0.2632447f, -0.0980877f, -0.0497824f, -0.0012872f, -0.0701427f, +0.0928077f, -0.0087365f,
  -0.1034666f, -0.3823240f, -0.2654890f, -0.0459794f, -0.1703447f, +0.2478061f, -0.0996054f, +0.0692832f,
  -0.0667688f, -0.0832813f, -0.1377001f, +0.0421938f, +0.0235684f, -0.1365847f, +0.0520324f, -0.0733848f,
  +0.0482907f, +0.0072336f, -0.0507951f, +0.2739555f, +0.0786136f, -0.1018529f, +0.0785339f, +0.3328828f,
  -0.0515820f, -0.2336495f, +0.1228972f, -0.2414686f, -0.0042525f, +0.3315175f, +0.0220994f, -0.1776382f,
  -0.0018151f, -0.1094806f, -0.3949803f, +0.1117367f, -0.1111196f, -0.3855488f, +0.1766957f, +0.1074219f,
  +0.0248579f, +0.0740468f, -0.0138863f, +0.0627531f, -0.0261057f, -0.0492920f, +0.1372586f, +0.2902677f,
  -0.0450121f, -0.1971631f, +0.0132371f, -0.0872453f, +0.1819436f, -0.4589448f, +0.2496859f, -0.3350019f,
  -0.0085765f, +0.1399642f, +0.0809196f, -0.3100122f, -0.1879171f, +0.1842715f, +0.0921062f, -0.0034454f,
  +0.1783298f, -0.0416722f, -0.0637455f, -0.0851779f, -0.0702738f, -0.0783172f, +0.1902842f, +0.1749635f,
  -0.1716325f, +0.0301588f, -0.0862576f, +0.2551869f, +0.0442344f, -0.1525864f, -0.2998302f, +0.3150278f,
  +0.0907727f, +0.0637735f, -0.1836419f, +0.0349174f, +0.1450054f, -0.1516542f, -0.0865397f, +0.0035057f,
  +0.0163129f, -0.0991138f, +0.0586811f, -0.0357053f, +0.1055792f, -0.0094835f, +0.2470819f, -0.0344568f,
  +0.0128890f, -0.1428608f, -0.2235625f, +0.1907163f, +0.0152339f, -0.0634689f, -0.3452947f, +0.0220244f,
  -0.0958506f, +0.0764252f, -0.1918244f, +0.0933679f, -0.0915352f, -0.1647192f, +0.0074682f, +0.0437380f,
  -0.3285171f, -0.0937372f, -0.2708107f, +0.0010852f, -0.0171507f, -0.2412989f, +0.1308908f, -0.1323211f,
  +0.1846609f, -0.0244214f, -0.0449201f, +0.1125554f, +0.0727347f, +0.1351898f, -0.1137783f, -0.0035727f,
  -0.0902087f, +0.0191952f, -0.4004690f, -0.0303935f, +0.0837964f, +0.1430410f, -0.0553965f, -0.2399752f,
  +0.2229490f, -0.0478664f, +0.0419494f, -0.2141517f, +0.0108706f, -0.1096820f, +0.2622494f, +0.0126317f,
  +0.3857951f, +0.0737035f, +0.1898234f, +0.2994115f, -0.0239292f, -0.0859760f, -0.0734405f, -0.0831558f,
  -0.0074014f, -0.2128565f, +0.1745800f, +0.1572318f, +0.1518030f, -0.1254576f, -0.0675458f, +0.1591734f,
  -0.0468092f, +0.1265957f, +0.0473267f, -0.0129758f, -0.0610048f, -0.0789021f, -0.0050161f, -0.1719101f,
  +0.4328801f, -0.0019378f, -0.1647860f, -0.1012917f, -0.0815354f, +0.2203823f, -0.1491399f, -0.0457582f,
  -0.4352755f, -0.0430314f, +0.0038081f, +0.2541682f, +0.2853167f, +0.1565888f, +0.0120357f, -0.1214837f,
  +0.0316010f, -0.2312366f, -0.0055371f, -0.0701913f, +0.0317509f, -0.1401535f, +0.1065665f, -0.2239356f,
  +0.3134050f, +0.0462698f, -0.1743048f, +0.1402988f, -0.0994655f, +0.0096923f, -0.1476839f, +0.1367796f,
  +0.0678910f, +0.1935590f, -0.0866860f, +0.1006758f, +0.0890849f, +0.0021344f, -0.3141457f, +0.1304540f,
  -0.0304693f, -0.0567413f, -0.1688921f, -0.1011203f, +0.3333412f, +0.1453868f, +0.1693198f, +0.1979421f,
  -0.0760352f, +0.0287380f, -0.1278904f, -0.1202502f, -0.1101754f, +0.0604853f, +0.2303147f, +0.0766167f,
  -0.0742694f, -0.1379952f, -0.0404212f, -0.0014930f, -0.0600482f, -0.1328351f, +0.0167372f, +0.1488302f,
  -0.3593918f, +0.0490276f, -0.0866522f, -0.3286168f, -0.2746237f, -0.0993611f, +0.1234695f, -0.0035612f,
  +0.6382549f, +0.0622196f, -0.0381173f, -0.1888761f, +0.1314760f, +0.2706329f, -0.1109199f, -0.3157012f,
  -0.1055934f, +0.0123615f, +0.2813208f, +0.1232285f, -0.1410037f, +0.1236460f, -0.0462536f, +0.1198393f,
  -0.0138609f, -0.0910776f, -0.1195814f, +0.0422267f, +0.0954114f, -0.0439138f, -0.1032179f, -0.1620071f,
  +0.0889338f, -0.0456406f, +0.0361392f, -0.0387667f, -0.4310692f, +0.0255459f, -0.0701211f, +0.0713926f,
  -0.1619989f, +0.0434684f, -0.0373527f, +0.0276418f, -0.1369793f, -0.1130340f, -0.1645710f, -0.3278005f
);

const float biases[4] = float[4](
  -0.0331096f, +0.0781922f, -0.0410667f, -0.0410572f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer77 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0771716f, -0.1027016f, +0.2590342f, -0.4454749f, -0.1230357f, -0.1361354f, +0.3189351f, -0.1385364f,
  +0.2115963f, -0.2736797f, +0.1147532f, +0.0377833f, -0.1892978f, +0.0833537f, +0.0753941f, +0.2601402f,
  -0.0675013f, -0.0605935f, +0.2988710f, -0.1545189f, -0.1299023f, -0.1871151f, +0.2520326f, -0.0255344f,
  +0.1460041f, -0.2074545f, -0.1311885f, -0.2337144f, -0.0813812f, +0.1601944f, -0.0069431f, -0.1489068f,
  -0.0646872f, +0.0534232f, +0.0638973f, -0.0246483f, +0.1303159f, -0.1668176f, -0.0974877f, -0.0854803f,
  +0.0404030f, -0.2121204f, +0.0566740f, +0.0354120f, -0.1291776f, -0.1275761f, +0.0682641f, +0.1153244f,
  +0.0239402f, -0.1621845f, -0.0189269f, -0.3012005f, +0.0279745f, -0.1487833f, -0.0907238f, -0.1093642f,
  -0.0847187f, -0.0780881f, -0.2771257f, +0.0984820f, +0.1936568f, +0.0164090f, -0.2253007f, -0.0053101f,
  -0.1791975f, -0.0444211f, -0.1372639f, +0.0442633f, +0.3020700f, +0.0325207f, +0.3430010f, -0.0800422f,
  +0.0802244f, +0.2457725f, +0.0766203f, +0.2773089f, -0.2557516f, -0.0609078f, -0.1126417f, +0.0975003f,
  +0.1033659f, -0.0765955f, +0.0575324f, +0.0163143f, -0.0678498f, +0.1799477f, +0.2243788f, -0.1500493f,
  -0.0826638f, -0.0712020f, +0.2956973f, +0.0635926f, -0.0514230f, -0.0184543f, -0.1550361f, +0.1305026f,
  -0.0622501f, -0.0555876f, -0.0515290f, -0.0519870f, -0.1243668f, +0.0910462f, +0.2917214f, +0.0809957f,
  -0.3712215f, +0.2051816f, -0.5000750f, -0.2459884f, +0.0430763f, -0.0081255f, -0.3218612f, -0.0266825f,
  -0.1293470f, +0.1367630f, -0.2599728f, +0.0324246f, -0.0573518f, +0.1164663f, -0.0439779f, +0.2651674f,
  +0.0851406f, -0.0749824f, +0.1449441f, -0.2455684f, +0.1665926f, -0.1353838f, +0.1151838f, +0.0923419f,
  +0.0192845f, +0.1375373f, -0.1431003f, -0.0667809f, -0.0642583f, +0.1564685f, +0.1058859f, +0.1181412f,
  +0.0036233f, -0.0974773f, -0.0623006f, +0.4785250f, +0.0202126f, -0.1465787f, +0.2107451f, +0.1159232f,
  +0.1061121f, -0.0196805f, -0.2475767f, -0.0627546f, -0.0891689f, -0.0512081f, +0.2294495f, -0.1631176f,
  -0.1083268f, -0.2221782f, -0.1904594f, +0.0531332f, +0.1025540f, +0.4227348f, -0.0857436f, +0.2827120f,
  +0.2264916f, +0.1329779f, +0.3745565f, -0.0328800f, +0.0671992f, +0.0904929f, -0.1567688f, +0.0480176f,
  -0.0532952f, -0.2197790f, +0.0162317f, +0.2177378f, +0.1198762f, +0.0442361f, -0.0157768f, -0.1162630f,
  +0.1095836f, -0.0344040f, -0.0178865f, -0.2318016f, -0.2895186f, -0.0683371f, +0.4802113f, -0.4041450f,
  +0.1349546f, -0.2261659f, -0.4820690f, -0.2406455f, +0.1636802f, -0.0270335f, +0.0649932f, +0.2608033f,
  -0.1534295f, +0.0040713f, +0.2334444f, -0.0163806f, -0.0869914f, -0.0372634f, -0.0710656f, +0.3264963f,
  -0.1145169f, -0.1198350f, -0.0253228f, +0.3003596f, -0.0702433f, +0.2042890f, -0.0072594f, +0.0632818f,
  +0.0686233f, -0.0043086f, -0.1805954f, -0.0207238f, +0.2515574f, +0.1636378f, +0.0403167f, -0.2782406f,
  +0.0670274f, +0.2977842f, +0.0548432f, -0.1548823f, +0.0682433f, +0.0784175f, -0.0438101f, -0.0100401f,
  +0.1482856f, +0.1037716f, +0.2674644f, -0.0025021f, +0.2595469f, +0.2701378f, +0.4045812f, +0.0247354f,
  +0.0001805f, +0.0076539f, -0.0111030f, +0.0462858f, +0.1590117f, +0.0179630f, +0.1118375f, -0.1742915f,
  -0.1465987f, -0.1658920f, +0.0836759f, +0.1988833f, +0.2608473f, +0.3687953f, -0.0158460f, -0.2835973f,
  +0.0017235f, -0.3385743f, +0.1377007f, +0.2512282f, +0.2620684f, +0.0711827f, -0.2159774f, -0.0735017f,
  +0.0433663f, -0.0275758f, +0.2396112f, +0.0620144f, -0.1732997f, +0.0197363f, -0.1499224f, +0.0775203f,
  +0.1393617f, +0.1468765f, +0.0232913f, +0.0533629f, +0.0591302f, -0.0999636f, +0.0206949f, +0.0844362f,
  +0.1449556f, -0.3722776f, +0.1485976f, -0.1082807f, +0.0921047f, -0.0083105f, -0.0986356f, -0.2741446f,
  +0.1620090f, -0.0570859f, -0.1509816f, -0.0211900f, +0.0499638f, -0.0215376f, -0.2179114f, +0.1458907f
);

const float biases[4] = float[4](
  -0.0504706f, -0.0245087f, -0.0145115f, +0.0277547f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer77 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0167825f, -0.0312791f, -0.1473243f, -0.0086851f, +0.3153400f, +0.0089438f, -0.0570765f, -0.2526011f,
  +0.2538811f, -0.2787584f, -0.4027940f, -0.1809943f, -0.0536561f, +0.3504449f, -0.3675727f, +0.1639833f,
  +0.1973875f, -0.0106954f, +0.1406545f, +0.0266540f, -0.0900764f, +0.1909644f, -0.0750816f, -0.0253007f,
  -0.1292212f, +0.1169452f, +0.0064377f, -0.2364468f, +0.0117150f, +0.1101748f, -0.2452624f, -0.1879457f,
  +0.2447003f, -0.0659171f, -0.0424232f, -0.6369251f, -0.0863327f, -0.3878345f, +0.1242283f, -0.2222635f,
  +0.0467279f, +0.1491937f, +0.0309479f, -0.0886717f, +0.1841400f, -0.2843113f, -0.0913275f, +0.1169210f,
  +0.0704602f, +0.0112550f, +0.1173529f, -0.0433281f, -0.1244113f, +0.1908504f, +0.1415824f, +0.0735140f,
  -0.0057893f, -0.0726775f, +0.1641758f, +0.2136626f, +0.0560569f, +0.4164001f, +0.0423894f, -0.3156134f,
  -0.0414137f, -0.0378304f, +0.0980760f, -0.1553826f, +0.0368186f, -0.0714024f, +0.0907990f, -0.2114280f,
  -0.1819860f, +0.2643024f, -0.1199888f, -0.1001657f, -0.0383680f, -0.0016998f, +0.0880994f, -0.1584527f,
  +0.1375411f, +0.0258651f, -0.1273249f, +0.2187972f, -0.0829187f, +0.1157335f, -0.2396149f, -0.1602435f,
  +0.1409819f, +0.1278532f, -0.0110200f, +0.1302345f, -0.1533965f, +0.1262240f, +0.1045518f, +0.0803670f,
  -0.0576700f, +0.1294259f, +0.0241627f, -0.0845204f, -0.2111695f, +0.3157162f, -0.0237763f, +0.0175275f,
  +0.2920138f, +0.2086573f, -0.3019163f, -0.0203348f, -0.1285871f, -0.0024645f, +0.0823892f, +0.0262703f,
  -0.0305580f, +0.0466760f, +0.0503876f, -0.0174735f, +0.2193162f, +0.3308301f, -0.0928744f, -0.0997014f,
  -0.3765009f, +0.0502237f, -0.1465771f, +0.3367495f, +0.2089118f, +0.0629482f, +0.0652979f, -0.1046524f,
  -0.2464477f, +0.1420425f, -0.1550907f, -0.0729592f, -0.0304202f, -0.0762499f, -0.2841874f, +0.0256213f,
  -0.0623546f, +0.0708469f, +0.0257515f, -0.0236253f, +0.1725588f, -0.1691519f, -0.1639955f, +0.0437731f,
  +0.0089925f, -0.2952736f, +0.0124055f, -0.0091783f, -0.1738648f, -0.0240633f, -0.1879135f, -0.0559755f,
  -0.3419374f, +0.0988331f, -0.1501468f, +0.0804786f, -0.2326774f, -0.0418554f, -0.0080958f, -0.1333713f,
  +0.0667175f, +0.1538601f, +0.1160566f, +0.2514617f, -0.0947352f, -0.2079459f, +0.0899549f, +0.0473792f,
  +0.0460498f, -0.2563639f, -0.1180291f, -0.1899316f, +0.0497161f, -0.1904209f, +0.0518728f, -0.0768396f,
  +0.1528354f, -0.1082697f, -0.2199790f, -0.2091495f, +0.2876432f, +0.1836602f, -0.0415255f, -0.0807628f,
  +0.0838594f, +0.0293823f, -0.1253909f, +0.1212997f, -0.1923546f, -0.1378220f, -0.0326752f, -0.2819543f,
  +0.0648035f, -0.1343144f, +0.3658964f, -0.0489700f, -0.0668306f, +0.2165104f, -0.0778387f, +0.0105436f,
  +0.0278090f, -0.1770239f, -0.0098624f, -0.1940102f, +0.0595989f, -0.0517401f, +0.1328997f, -0.0760931f,
  +0.1636574f, -0.0408890f, -0.1517574f, +0.0327525f, -0.0904713f, -0.1194284f, +0.0439574f, +0.2635896f,
  -0.0262873f, -0.1968724f, +0.0808099f, +0.2336250f, -0.1688242f, +0.0992998f, +0.1283080f, +0.0413293f,
  -0.0359554f, +0.1725901f, -0.2086812f, +0.1561733f, +0.1516495f, -0.0956613f, -0.1086487f, +0.1458691f,
  +0.1620511f, -0.0482280f, -0.1314747f, +0.1185552f, +0.0980978f, +0.2371209f, -0.0321478f, +0.2855775f,
  -0.3457443f, +0.0812689f, +0.2723530f, +0.0079525f, -0.1819496f, -0.0345830f, +0.0594652f, +0.0355053f,
  +0.2288589f, -0.0530044f, -0.1691153f, -0.3453389f, -0.1129434f, -0.0595637f, -0.0584599f, -0.3986064f,
  +0.3338206f, -0.1399849f, +0.3904949f, -0.2610252f, +0.5217829f, -0.1456635f, +0.0435737f, +0.0610509f,
  -0.2249277f, +0.1502716f, -0.0297454f, +0.3116084f, -0.1675842f, -0.0520634f, -0.1767385f, -0.0367433f,
  -0.0232021f, +0.0062755f, +0.1259154f, +0.2596988f, +0.2407037f, +0.1356271f, -0.0755530f, -0.0840456f,
  -0.1643353f, -0.1143037f, +0.0178345f, -0.0256500f, +0.1592681f, +0.1139075f, +0.1281056f, +0.3695602f
);

const float biases[4] = float[4](
  -0.0549597f, +0.0187806f, +0.0192742f, -0.0914842f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer78 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2591784f, -0.0762958f, +0.0334275f, +0.0539206f, -0.0498448f, -0.0201214f, +0.0368438f, -0.2164793f,
  +0.0919572f, -0.0243584f, -0.1117416f, -0.2034888f, +0.1422328f, +0.0905608f, +0.0464408f, -0.0290674f,
  +0.3128712f, -0.0273547f, +0.0306018f, +0.2127349f, +0.1120137f, +0.0516296f, -0.0571606f, +0.1254793f,
  -0.0699578f, -0.1063277f, -0.0999404f, -0.0818712f, -0.0304761f, +0.1901177f, +0.1215739f, +0.1576822f,
  +0.0439529f, +0.0969340f, -0.1951152f, -0.3422238f, -0.4977368f, -0.0572535f, -0.1247854f, +0.3477849f,
  +0.0164557f, +0.1130593f, -0.1475618f, -0.1343374f, -0.1002347f, -0.0471114f, -0.1512172f, -0.1937119f,
  -0.0920388f, -0.0592996f, +0.0116549f, -0.0354340f, -0.1628716f, -0.1723126f, -0.0404940f, +0.0100540f,
  +0.0110797f, +0.0579314f, +0.2823356f, +0.0345576f, +0.0453262f, -0.2294878f, +0.1729315f, +0.3708667f,
  +0.0220796f, +0.0515380f, -0.1818556f, +0.1127025f, -0.1122223f, +0.0070021f, +0.0161261f, +0.0300439f,
  -0.0191371f, +0.0021111f, +0.1360526f, -0.1352973f, -0.1257041f, +0.0783632f, -0.1016420f, -0.1203441f,
  +0.0675688f, +0.1023523f, -0.0570636f, -0.0037973f, +0.1343077f, -0.1782193f, -0.0373518f, -0.1392333f,
  +0.0095055f, +0.1802786f, -0.2041751f, -0.0239647f, +0.1520215f, -0.0226769f, -0.0952070f, -0.1736232f,
  +0.2871665f, +0.1304326f, -0.0386971f, +0.1074874f, +0.0330437f, +0.4209137f, -0.0594853f, -0.1196332f,
  -0.0120184f, -0.1460076f, +0.1104400f, +0.0437859f, -0.0873528f, +0.1469242f, -0.0022876f, -0.0338489f,
  +0.1307896f, -0.0068842f, -0.0809770f, +0.1759590f, -0.1516976f, +0.2272495f, -0.0399212f, -0.2698244f,
  -0.0224457f, +0.2305899f, +0.0287395f, +0.0443107f, +0.0879346f, +0.1129995f, -0.2369564f, +0.0134505f,
  +0.0853815f, +0.0261441f, +0.1307336f, +0.1735091f, +0.0310099f, +0.0128884f, -0.3104420f, +0.1020713f,
  +0.0928477f, -0.2296511f, -0.1189313f, +0.2492260f, +0.3665914f, -0.0892300f, +0.0911535f, -0.1793969f,
  -0.0151826f, +0.1202158f, -0.0652543f, +0.1018963f, +0.0448310f, -0.0564670f, +0.0263469f, +0.0953762f,
  +0.1894309f, -0.0158797f, +0.0411467f, -0.0949409f, +0.4790279f, -0.3294764f, +0.1187809f, -0.1554856f,
  +0.0171817f, -0.1658085f, -0.1261575f, +0.2216647f, +0.2445133f, -0.0953539f, +0.1433902f, -0.0781297f,
  -0.0329640f, +0.1888248f, -0.3194342f, -0.2093268f, -0.1235716f, -0.0277812f, +0.0395156f, -0.1366501f,
  +0.0320633f, -0.0263376f, -0.2056373f, +0.2190427f, +0.0282296f, +0.1804584f, +0.1394872f, +0.4624193f,
  +0.0653550f, -0.0688061f, -0.1318809f, +0.0853721f, -0.3206648f, +0.2834340f, -0.0289519f, +0.2280359f,
  -0.2882693f, -0.1577090f, -0.1520651f, +0.0035496f, +0.0552600f, -0.0220789f, -0.1405537f, -0.1025012f,
  +0.2755696f, +0.0479419f, -0.1131300f, +0.1966732f, +0.4375829f, -0.0174913f, -0.1320821f, +0.0120004f,
  +0.0696789f, -0.1291145f, -0.0734679f, +0.1197793f, +0.0545156f, +0.2288596f, -0.3011243f, +0.1128568f,
  -0.0285449f, -0.1392848f, +0.0363720f, +0.0445414f, +0.1483051f, +0.0954692f, -0.0589175f, -0.1637638f,
  +0.0152589f, -0.0033821f, +0.1536274f, -0.0354952f, +0.0485877f, +0.1138722f, +0.2862680f, -0.1329067f,
  +0.1454155f, +0.1489673f, -0.2160379f, +0.1099176f, -0.2414846f, +0.0058752f, +0.1018057f, -0.0146198f,
  +0.2690933f, +0.0500081f, -0.0145745f, +0.0649192f, +0.0127255f, -0.0437928f, -0.0238263f, -0.2167628f,
  +0.1326209f, +0.0871459f, -0.4940963f, +0.1300317f, -0.0472881f, -0.1313685f, +0.1365437f, -0.2544268f,
  +0.1124897f, +0.1810780f, +0.2681231f, +0.3343875f, +0.0447943f, -0.1347075f, +0.2206678f, -0.0213624f,
  +0.0819708f, +0.0755100f, -0.0576199f, +0.0467659f, -0.2053601f, -0.1208493f, -0.1810790f, -0.1771172f,
  -0.1000967f, +0.0080235f, +0.1629985f, -0.3298503f, +0.2024401f, -0.2154157f, +0.0386461f, +0.2470511f,
  +0.0195003f, +0.0836114f, -0.0066133f, -0.4186707f, -0.2267363f, -0.1121885f, +0.0392748f, +0.1515114f
);

const float biases[4] = float[4](
  -0.0225203f, -0.0572805f, +0.0190023f, -0.0127539f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer78 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0127317f, -0.0754678f, -0.1842104f, +0.1834146f, +0.1976213f, -0.0383503f, -0.0289403f, -0.0254553f,
  -0.0482876f, -0.1293062f, +0.0717625f, +0.2573155f, -0.0910699f, -0.0053317f, -0.1106507f, +0.0354293f,
  +0.0006151f, +0.0417657f, -0.1137071f, -0.1108411f, +0.0068255f, -0.2379995f, -0.1243300f, -0.0445478f,
  -0.0900044f, -0.3643763f, -0.0187072f, +0.2134364f, -0.0918930f, -0.3457001f, -0.2354650f, -0.0762092f,
  +0.0928011f, -0.4906365f, -0.0834538f, -0.1716253f, -0.1063255f, -0.0111416f, -0.0131733f, +0.1309951f,
  +0.1639344f, +0.0159510f, +0.1500389f, -0.0867668f, -0.0751194f, +0.0569080f, -0.0107657f, +0.0850782f,
  +0.1964941f, -0.0869637f, -0.1174691f, +0.0385629f, +0.1763019f, +0.1731335f, +0.0535307f, +0.0686248f,
  +0.1488146f, +0.0824462f, +0.2243031f, +0.0146593f, -0.0222592f, +0.1740781f, +0.0717115f, +0.0763887f,
  +0.3645675f, +0.1731697f, -0.0430003f, -0.1890457f, +0.0356713f, -0.0110439f, +0.0948769f, +0.2080138f,
  +0.0747231f, +0.1568248f, -0.2152955f, +0.1206892f, +0.2302469f, -0.2488167f, +0.0320640f, +0.0524980f,
  -0.1147467f, -0.0242270f, +0.1899998f, +0.1135972f, -0.1533210f, -0.1383057f, -0.0426160f, -0.0019265f,
  -0.1092570f, -0.1675838f, +0.0617531f, -0.1937939f, +0.1066105f, -0.0518404f, -0.0079487f, +0.1308527f,
  +0.1193201f, -0.0630029f, +0.0205236f, +0.0584189f, -0.1280429f, -0.0456446f, +0.0470901f, -0.1503663f,
  -0.3796769f, +0.2020065f, +0.0565548f, -0.2135912f, -0.1891351f, -0.1754923f, +0.0563224f, -0.1063033f,
  +0.2607795f, +0.0369032f, -0.0979546f, -0.1904893f, +0.0616571f, -0.1580760f, -0.1329086f, +0.0510807f,
  +0.0753984f, +0.3027221f, +0.0069044f, +0.0613845f, -0.3569077f, -0.0232903f, +0.0339969f, +0.1120026f,
  -0.1417411f, -0.0352206f, -0.1131199f, -0.0830368f, +0.1038409f, +0.2313601f, +0.2272591f, +0.0355989f,
  +0.0002664f, -0.0314991f, -0.1785416f, +0.0217082f, -0.0237170f, +0.1317245f, +0.0217117f, +0.1402389f,
  -0.2272179f, -0.0125321f, -0.0329802f, -0.0525574f, +0.2171878f, -0.3960074f, +0.0984238f, +0.1762038f,
  +0.2912194f, +0.2144379f, +0.1613774f, +0.0960921f, +0.5169951f, +0.0663654f, +0.1307703f, -0.0819397f,
  +0.1086650f, -0.0317966f, +0.1714325f, -0.0884239f, +0.1743506f, +0.0330934f, +0.2871284f, -0.1085266f,
  +0.0112695f, +0.3021395f, -0.0803249f, -0.0445079f, +0.1548470f, -0.1634250f, -0.1328756f, +0.0142070f,
  -0.0995346f, +0.3206915f, +0.0055956f, +0.0592089f, +0.0360871f, -0.0267235f, +0.2664290f, +0.2282072f,
  -0.1636524f, +0.0986585f, -0.1998751f, -0.0507708f, +0.1007710f, +0.0254609f, +0.1728026f, -0.2616484f,
  -0.0094468f, +0.1133901f, +0.1175771f, +0.1807835f, +0.2563829f, +0.0055827f, -0.0866335f, -0.1256428f,
  +0.0299689f, +0.0166612f, +0.1307800f, +0.1786492f, +0.2463885f, -0.0983706f, +0.0021605f, +0.1023510f,
  -0.1928073f, +0.0242236f, +0.0642667f, +0.4017099f, +0.2912759f, -0.2503200f, +0.2220204f, -0.3132586f,
  +0.2532905f, +0.0060524f, -0.3366855f, +0.0167332f, +0.1399554f, +0.1080606f, -0.0745836f, -0.0686957f,
  -0.0422955f, -0.1524480f, -0.0104984f, -0.1175230f, -0.0797824f, -0.1326299f, +0.0779615f, +0.1366231f,
  -0.2505791f, +0.0408425f, -0.0999992f, +0.2016300f, -0.1646482f, +0.3494314f, -0.1017753f, +0.0506780f,
  -0.2133906f, -0.1235651f, -0.0203613f, +0.0024488f, -0.1726035f, +0.1223170f, +0.0178263f, -0.0543580f,
  -0.1287275f, -0.1492033f, -0.2861750f, +0.1202782f, +0.2551629f, -0.0503827f, +0.1833031f, +0.1575352f,
  +0.0444189f, +0.0046465f, -0.1641526f, +0.1120660f, -0.4095145f, -0.2055112f, +0.0293782f, +0.0263275f,
  -0.1483238f, -0.1773793f, +0.0292204f, -0.1718709f, +0.0826913f, -0.0837195f, +0.0822145f, -0.0831880f,
  -0.3499387f, +0.1253176f, +0.5746794f, -0.0067606f, -0.0803819f, +0.0722373f, +0.1219147f, +0.1151373f,
  +0.1410312f, +0.0512009f, -0.0108951f, -0.1114586f, -0.0359101f, +0.4393069f, +0.0860887f, +0.1178231f
);

const float biases[4] = float[4](
  -0.0249072f, +0.0942913f, -0.0550975f, -0.0262960f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer79 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0010234f, -0.0892058f, -0.1207892f, +0.0799493f, -0.0177760f, -0.2765423f, +0.2671973f, -0.0343853f,
  -0.1440648f, -0.1100923f, +0.0959764f, +0.0817615f, -0.0949922f, -0.2154537f, +0.0196460f, -0.2917756f,
  +0.0664148f, -0.2299739f, -0.1255632f, +0.1210101f, +0.0654614f, +0.2737003f, +0.1169654f, +0.0100849f,
  +0.3885468f, -0.1694124f, -0.2324461f, +0.0416237f, +0.1544430f, -0.1177778f, +0.0535868f, +0.1894177f,
  -0.2732996f, +0.3055840f, +0.2978104f, +0.1470133f, -0.0030408f, -0.1285633f, -0.0974987f, -0.8132434f,
  +0.0047907f, -0.2590779f, -0.0627220f, -0.1329310f, +0.0149464f, +0.1687611f, +0.1030304f, +0.4019697f,
  +0.1966954f, -0.0535644f, -0.1354351f, -0.1786812f, +0.0974624f, -0.0972892f, -0.0562322f, +0.0460023f,
  -0.2009218f, +0.1891340f, +0.3068197f, +0.1735863f, -0.0220476f, -0.0028272f, -0.2169697f, +0.0144420f,
  -0.1453824f, -0.0104206f, -0.0385953f, +0.0416148f, -0.0774790f, +0.0890776f, +0.0857499f, -0.0100405f,
  -0.1018215f, +0.1897222f, +0.0084819f, +0.1106691f, -0.1724566f, +0.1121352f, -0.0619401f, +0.0049837f,
  -0.1189460f, -0.0221776f, +0.3657274f, +0.3300843f, +0.0984995f, +0.0792971f, -0.1203163f, +0.0733075f,
  +0.0328519f, +0.0698111f, +0.3312739f, +0.2538373f, -0.4183579f, +0.0333102f, +0.1304542f, -0.0454970f,
  +0.0404998f, +0.2296671f, -0.1031269f, +0.1696676f, +0.0064857f, -0.0485072f, +0.0044113f, +0.0412430f,
  -0.2166824f, +0.0176123f, +0.0816943f, +0.0280911f, +0.0651729f, +0.0003348f, -0.1356544f, -0.2161341f,
  +0.0071020f, +0.0960163f, +0.2039374f, +0.0742682f, -0.0882915f, -0.1819151f, +0.0107346f, +0.1230712f,
  +0.3075851f, -0.0939391f, +0.1757458f, +0.1321982f, -0.2013068f, -0.1864769f, -0.0690917f, -0.0156036f,
  +0.1111742f, -0.0567809f, +0.2267138f, -0.1177782f, -0.0222720f, +0.0241447f, +0.0712640f, -0.0451257f,
  +0.2287264f, +0.1526775f, -0.0466948f, +0.1599528f, -0.0600649f, +0.0365530f, -0.2752990f, +0.1144584f,
  +0.0038630f, -0.0751405f, +0.0477068f, +0.1202137f, -0.0111951f, -0.0926727f, +0.1037671f, -0.0689275f,
  +0.0684048f, +0.0433072f, +0.0602208f, +0.0129948f, +0.0402640f, -0.0209474f, -0.0530962f, +0.0980484f,
  -0.0803140f, +0.2258852f, -0.0495464f, +0.0087992f, -0.0845759f, -0.0181433f, -0.0949453f, +0.0421737f,
  +0.2407540f, +0.2963651f, +0.1966684f, +0.0348488f, +0.2710848f, +0.0402457f, -0.1961168f, -0.0683414f,
  +0.2161471f, +0.0600808f, +0.2558972f, -0.0017596f, +0.2503130f, -0.0704364f, -0.4112252f, -0.1264154f,
  -0.0070432f, +0.1500747f, -0.0301108f, -0.0308798f, +0.0508991f, +0.1767611f, -0.0310165f, -0.1261011f,
  -0.1583305f, -0.5155595f, -0.2375054f, +0.1088205f, -0.1794569f, -0.1784982f, -0.1938638f, +0.0775852f,
  +0.2824102f, -0.0845599f, +0.1906519f, +0.3300062f, +0.2739003f, +0.0962747f, +0.0591953f, -0.0814697f,
  -0.0185754f, +0.0184023f, -0.1183206f, -0.1735308f, +0.0216408f, -0.1533578f, -0.2071923f, -0.0276845f,
  +0.0829077f, +0.1666376f, -0.0952196f, -0.0169300f, +0.0091690f, -0.1192589f, +0.1432217f, -0.0262965f,
  -0.0078232f, -0.0676412f, +0.1737611f, +0.0947520f, -0.2895267f, -0.0108955f, +0.0150265f, +0.0724724f,
  -0.0275128f, +0.1062465f, -0.2484260f, +0.0444175f, +0.1362345f, +0.0959275f, +0.0684406f, -0.1115092f,
  +0.0097546f, -0.0793491f, -0.1154884f, +0.0206767f, -0.1268390f, +0.2873153f, -0.2367760f, -0.1455448f,
  +0.1864001f, -0.0199971f, -0.1690388f, +0.0791354f, +0.2232079f, -0.0021455f, -0.1172433f, +0.5341587f,
  +0.0100066f, -0.0071099f, +0.2222871f, -0.0126614f, +0.1653082f, +0.1653176f, -0.1057359f, -0.1403507f,
  -0.3049365f, +0.0838409f, +0.0465181f, +0.0362663f, +0.0942925f, +0.0107597f, +0.1011996f, +0.0046761f,
  +0.2719467f, +0.1965573f, +0.0785876f, -0.1624114f, -0.1747392f, -0.0236448f, -0.1420545f, -0.4381093f,
  -0.0462967f, -0.0353496f, +0.0811512f, +0.1239663f, -0.1543882f, -0.0920452f, +0.0833481f, +0.0993736f
);

const float biases[4] = float[4](
  +0.0279593f, -0.1416084f, +0.0811940f, +0.0165942f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer79 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1090712f, +0.1232728f, -0.4024484f, +0.0477474f, -0.0374534f, -0.0664900f, +0.1435372f, -0.2967909f,
  -0.0219399f, +0.0965469f, -0.3049648f, -0.1386680f, -0.1052346f, +0.0666796f, +0.2178627f, -0.2713685f,
  +0.1477108f, -0.0653079f, -0.1930938f, +0.1579246f, -0.0960825f, +0.2654324f, -0.0645827f, +0.4238086f,
  -0.0190837f, -0.2035900f, +0.1351708f, -0.0627113f, +0.1989926f, +0.0694018f, -0.0772968f, -0.2140631f,
  +0.8035722f, +0.1465846f, +0.3434172f, -0.2301443f, -0.0958773f, +0.0795288f, -0.0950043f, -0.6454587f,
  -0.0513056f, +0.1866037f, -0.3262685f, -0.2255977f, +0.2638940f, -0.3995373f, +0.1655727f, -0.4866671f,
  -0.2472981f, +0.0967093f, +0.0736408f, +0.0415209f, +0.1116272f, +0.2429450f, -0.1367735f, +0.1497448f,
  -0.5757411f, -0.2894849f, -0.1391582f, +0.1890648f, -0.0462627f, -0.1758469f, -0.1162156f, +0.6103388f,
  -0.2235725f, -0.1001004f, +0.3321165f, +0.2254226f, +0.0039962f, +0.4761502f, +0.1289771f, -0.0815857f,
  -0.1678355f, +0.0235699f, -0.2823294f, +0.1973210f, -0.0134544f, -0.0722750f, +0.2012292f, -0.1832855f,
  -0.3088133f, +0.1763728f, -0.0853504f, +0.0176400f, +0.0136004f, -0.2065626f, +0.2580058f, -0.3436411f,
  -0.0478122f, -0.1035736f, +0.0291234f, -0.0548800f, -0.0484790f, +0.0540064f, +0.1044862f, -0.3406175f,
  +0.2379806f, -0.1015710f, +0.2815398f, +0.1838737f, +0.1494261f, +0.1711961f, +0.0262050f, -0.1500056f,
  +0.2742844f, +0.3352359f, +0.2031670f, +0.4054792f, -0.0008987f, -0.0106173f, +0.3214707f, -0.4068939f,
  -0.3922953f, +0.1478426f, +0.1863680f, -0.0361923f, +0.0652305f, -0.0435746f, +0.1406773f, -0.4775039f,
  -0.1646632f, +0.1205040f, +0.0931869f, -0.0569826f, +0.3604321f, +0.1321103f, -0.0664032f, +0.0736524f,
  -0.3314915f, +0.0215988f, +0.0910735f, +0.2970678f, +0.2838289f, -0.1021454f, +0.0286470f, +0.2612632f,
  -0.0407466f, -0.1694849f, +0.3806186f, +0.1205247f, -0.1940666f, +0.4322360f, +0.2041693f, -0.4534940f,
  +0.2410667f, -0.0127119f, -0.2156644f, +0.1259610f, +0.4565019f, +0.3478773f, +0.0767842f, +0.3794923f,
  +0.0036908f, -0.1024584f, -0.1556777f, +0.3480130f, +0.1275575f, -0.0355177f, -0.0260963f, +0.5497131f,
  +0.0031005f, +0.2362753f, -0.1706460f, +0.2065206f, +0.0497494f, -0.0563915f, -0.0839444f, -0.1451825f,
  +0.1255201f, -0.2605204f, -0.3499334f, +0.1132438f, +0.0265781f, -0.0584289f, -0.1095203f, +0.2920667f,
  +0.0981897f, -0.1855944f, -0.0318203f, -0.2778845f, -0.0275288f, -0.0105205f, -0.1378020f, +0.0160695f,
  +0.0435638f, +0.1434977f, -0.1591377f, -0.0891930f, -0.1026700f, -0.0549337f, -0.0378688f, -0.2409122f,
  +0.1334595f, +0.0208133f, -0.2304043f, -0.1485973f, -0.1457469f, +0.0137180f, -0.2559292f, -0.0159139f,
  +0.0869152f, +0.0433818f, -0.0025882f, -0.0739668f, -0.1651259f, +0.0134626f, -0.0765366f, +0.2520585f,
  -0.0783099f, +0.2725245f, -0.0099340f, -0.0366253f, -0.1246222f, +0.2469129f, -0.2104866f, -0.1356762f,
  +0.0750441f, +0.0981610f, -0.2195623f, -0.0021742f, -0.0538881f, +0.1253878f, +0.1675202f, +0.0430928f,
  -0.1356774f, +0.0531746f, -0.0026298f, -0.0271005f, +0.0023710f, +0.0069615f, -0.3069015f, -0.1497316f,
  -0.0707418f, -0.1108374f, -0.1791460f, -0.1743288f, +0.0047411f, +0.0495766f, +0.2909115f, +0.0249131f,
  +0.0495207f, -0.1121558f, +0.5432792f, +0.1362794f, -0.2131283f, +0.0914154f, -0.2898760f, +0.1868454f,
  -0.1846515f, -0.0599332f, -0.0055214f, -0.0169473f, -0.1601680f, +0.0249541f, -0.2916948f, +0.0487250f,
  +0.0128075f, -0.0938159f, +0.4110363f, -0.0584670f, +0.1407195f, -0.0272403f, -0.1217963f, +0.1260340f,
  -0.0688366f, -0.0301108f, -0.3182080f, -0.0459918f, +0.0305894f, -0.1422189f, -0.1023303f, -0.2528985f,
  +0.2324494f, +0.0252228f, -0.2482559f, -0.1620587f, +0.2856955f, -0.2313895f, +0.2213733f, -0.1722184f,
  +0.1913116f, -0.2457736f, -0.1346282f, +0.1454760f, +0.5984558f, -0.0829956f, +0.2838788f, +0.3348432f
);

const float biases[4] = float[4](
  -0.0783268f, -0.0297153f, -0.0314507f, +0.0322716f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer80 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1741764f, -0.0453292f, +0.2417121f, -0.0477005f, -0.0005389f, -0.2346691f, +0.0671035f, -0.1742738f,
  -0.0300246f, -0.0566759f, -0.1330465f, -0.1338992f, -0.3827787f, -0.1428221f, -0.0072691f, +0.2300656f,
  +0.3426823f, +0.0754053f, +0.1926296f, +0.2527384f, +0.0053814f, -0.1986838f, -0.2594098f, -0.3139724f,
  -0.2368092f, +0.1164237f, +0.0812411f, +0.0712057f, -0.1360746f, -0.2067651f, -0.0704874f, -0.3199103f,
  +0.2784342f, +0.0584541f, -0.2446997f, +0.0635246f, +0.3098253f, +0.1114041f, -0.3770646f, -0.0283229f,
  -0.0812668f, +0.0811865f, -0.3713465f, -0.1289980f, +0.1207651f, -0.0574600f, -0.1210428f, -0.1240005f,
  -0.0935655f, +0.0420096f, +0.0090345f, +0.0305457f, +0.2804267f, -0.0748513f, -0.1070563f, -0.0455671f,
  -0.0385324f, -0.0072072f, -0.1278388f, +0.1190651f, -0.0724375f, -0.1078291f, -0.2189557f, -0.0077777f,
  -0.0881175f, +0.1474164f, +0.0271008f, -0.0856086f, +0.0781156f, +0.0648549f, -0.1421546f, -0.0327722f,
  +0.0624907f, -0.0025589f, -0.2267085f, +0.0744797f, +0.0919342f, +0.1841352f, -0.1698568f, -0.0027986f,
  -0.0563126f, -0.0284716f, +0.0169605f, -0.3492075f, -0.3088613f, -0.0650505f, -0.1726630f, -0.1122512f,
  -0.2104556f, +0.2050616f, +0.2634192f, +0.0041884f, +0.0226527f, +0.0314896f, -0.1003098f, -0.0476661f,
  -0.0232774f, -0.0911445f, -0.1460152f, +0.0116086f, -0.2732126f, +0.0233678f, +0.1121102f, +0.1271715f,
  +0.0608459f, -0.3057907f, +0.1911020f, +0.1927675f, +0.3881883f, +0.5967304f, +0.0405800f, -0.0503898f,
  +0.1161432f, +0.1782144f, -0.5366453f, +0.1463487f, -0.0038873f, +0.2261403f, -0.0144352f, +0.1648557f,
  +0.3380660f, -0.0146020f, +0.0362038f, -0.0183836f, +0.1656475f, -0.2202748f, +0.0855467f, +0.1418078f,
  -0.2188243f, -0.1974837f, +0.0440810f, +0.1237771f, -0.3087063f, +0.2342575f, -0.1003406f, -0.1231233f,
  +0.0992164f, -0.0237726f, -0.0441304f, -0.1936980f, +0.1290695f, +0.0848444f, +0.3010110f, +0.3111978f,
  -0.0907857f, +0.2801949f, -0.1876429f, -0.0132002f, +0.1508254f, +0.2471296f, +0.0492167f, -0.0979272f,
  +0.0748872f, +0.0379190f, +0.0738230f, +0.2090573f, -0.1723583f, +0.1229433f, +0.0828323f, +0.0048180f,
  -0.3046979f, +0.2132042f, +0.1854183f, -0.0065791f, -0.0627064f, +0.2536730f, +0.2977302f, +0.0243543f,
  -0.1905810f, -0.0549957f, -0.1643151f, -0.0873567f, +0.1044180f, +0.2952073f, +0.0978142f, +0.0913527f,
  +0.4268883f, -0.1916679f, -0.1936594f, +0.0127527f, +0.5735540f, +0.3405252f, +0.0562988f, +0.0361041f,
  -0.1239693f, +0.0434147f, -0.2289912f, +0.1088622f, +0.1412015f, +0.0111661f, -0.0076940f, +0.1758964f,
  -0.0943411f, -0.0670691f, +0.0986920f, +0.1541944f, -0.1036357f, +0.0412927f, +0.1667593f, +0.1727792f,
  +0.2622494f, +0.0644770f, -0.0607913f, -0.2319816f, +0.0449249f, +0.1016440f, +0.0791441f, +0.0941057f,
  -0.0238178f, -0.0856347f, +0.2065684f, +0.1082463f, -0.2100950f, -0.0826095f, +0.2037800f, +0.0544699f,
  -0.0206613f, +0.0642468f, +0.0152239f, -0.1718350f, -0.0078478f, +0.2611790f, +0.0980766f, -0.2493228f,
  +0.2439401f, +0.0751730f, -0.2190115f, -0.1839161f, -0.0725965f, +0.0935351f, +0.0816345f, -0.0466563f,
  -0.1069510f, -0.0242627f, -0.1030910f, -0.1395999f, -0.0443574f, +0.2318865f, +0.1314379f, +0.2917209f,
  +0.0979537f, -0.1836170f, +0.2393270f, +0.0074801f, -0.5021492f, -0.1574871f, +0.0533970f, +0.0613757f,
  +0.1998050f, -0.2144789f, +0.0375484f, +0.2201880f, +0.0933871f, +0.3991813f, +0.1473998f, -0.1435163f,
  -0.1746618f, -0.1185274f, +0.1874268f, +0.0333948f, -0.0658723f, -0.0094990f, +0.0681331f, -0.0232933f,
  +0.0496245f, +0.0013182f, +0.0967055f, -0.1230521f, +0.2841890f, -0.2418056f, -0.0140608f, -0.1449297f,
  +0.0662213f, -0.1069487f, +0.0330238f, +0.1213472f, +0.0705827f, -0.2061081f, -0.1529989f, -0.0028240f,
  -0.0798417f, -0.1428077f, -0.1111015f, +0.0669134f, +0.0391120f, -0.2281141f, -0.1214650f, -0.3109506f
);

const float biases[4] = float[4](
  -0.0180121f, -0.0532519f, -0.0043769f, +0.0336474f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer80 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1063684f, -0.1419886f, -0.0704893f, -0.0849643f, -0.0881617f, +0.1117536f, +0.1454413f, -0.1322023f,
  +0.0780742f, +0.0934639f, -0.1093762f, +0.1396643f, -0.1657410f, -0.0603472f, +0.0875635f, -0.0078890f,
  -0.0914316f, -0.0401725f, +0.1978179f, -0.0308784f, -0.0793188f, -0.1227099f, +0.1770571f, +0.0357657f,
  -0.0582750f, +0.1651743f, -0.0158374f, -0.1017592f, +0.0330844f, -0.1133429f, +0.1236473f, +0.0819605f,
  -0.0050817f, +0.1054911f, -0.1238106f, -0.0547764f, +0.2279904f, +0.4188258f, +0.1424330f, -0.5668703f,
  -0.0349674f, -0.2051743f, +0.1481204f, -0.0868398f, -0.0615337f, +0.0123749f, -0.0051967f, -0.0749201f,
  -0.3768764f, +0.0089478f, +0.0243367f, -0.1407553f, +0.0281084f, -0.0454836f, -0.0676693f, -0.0194361f,
  +0.4014051f, -0.0035302f, +0.0348354f, +0.2983791f, +0.1698758f, -0.1953007f, +0.0741336f, +0.1657847f,
  +0.0226125f, -0.1101729f, +0.0022585f, +0.0513398f, -0.0678134f, -0.1572736f, -0.1383310f, -0.3157585f,
  -0.0101490f, -0.0378231f, +0.1127058f, +0.0955106f, +0.1368365f, +0.1360993f, +0.0090001f, -0.0862081f,
  +0.0874116f, +0.0769366f, +0.0333213f, -0.3500143f, -0.4169697f, -0.3715289f, +0.1336414f, +0.4109031f,
  +0.0549277f, +0.0452007f, +0.2821424f, -0.1698160f, -0.0199242f, -0.0904055f, +0.1921684f, +0.1404088f,
  -0.1297960f, -0.2236807f, -0.0354274f, -0.2357095f, -0.0261416f, -0.1764306f, +0.0963825f, +0.3096718f,
  +0.1754578f, -0.0784343f, +0.1824905f, -0.0585867f, -0.0521010f, +0.0014639f, +0.1391653f, +0.0863404f,
  +0.0022244f, -0.0023878f, -0.1219552f, +0.0587358f, -0.1025030f, +0.0505147f, -0.0159494f, +0.3530823f,
  +0.2792766f, +0.1631503f, +0.0778502f, +0.1184781f, -0.0323164f, -0.0191400f, +0.1281859f, -0.1927992f,
  -0.0486000f, +0.2746707f, +0.0176291f, -0.0502731f, +0.2345997f, -0.1349982f, -0.0920988f, -0.2388644f,
  -0.0633633f, +0.0992908f, +0.1035253f, +0.3958360f, -0.1131733f, -0.0460905f, -0.1991857f, -0.0845977f,
  -0.1367239f, +0.0511840f, -0.0528411f, -0.1264101f, +0.0418859f, +0.1488251f, +0.0048883f, -0.0560139f,
  -0.0336585f, -0.0828072f, -0.0417394f, -0.0614820f, +0.0827920f, -0.0574848f, +0.1976586f, +0.1059101f,
  +0.0965624f, +0.0450866f, +0.3621219f, -0.1133933f, +0.0186212f, -0.0527130f, +0.1456459f, +0.1226454f,
  +0.1641531f, +0.0723215f, -0.1230677f, +0.2339723f, -0.0524773f, +0.1318655f, +0.0835992f, -0.0618601f,
  +0.2149124f, +0.0829601f, +0.1242676f, -0.0442135f, +0.4041570f, +0.3215325f, -0.0644286f, +0.5296860f,
  +0.1895284f, -0.0301751f, +0.0973707f, +0.1181477f, -0.1417865f, +0.0112875f, +0.3646896f, +0.0111238f,
  +0.1374891f, -0.2159276f, +0.0759557f, -0.1465232f, -0.0419708f, +0.0717376f, +0.0864259f, -0.0391864f,
  -0.0766910f, -0.1233527f, -0.2098300f, +0.1411409f, -0.3001197f, +0.1334785f, +0.2064705f, -0.0749648f,
  +0.3046390f, +0.1315508f, +0.0323139f, -0.1775772f, +0.0980223f, +0.1689706f, +0.1725823f, -0.1701040f,
  +0.0041788f, -0.0309426f, +0.2023182f, -0.3683252f, -0.1839352f, -0.1705345f, +0.1277256f, +0.1111066f,
  -0.0977977f, -0.0650534f, -0.0802218f, +0.6211056f, +0.4159999f, +0.1264899f, -0.3270621f, -0.0584037f,
  -0.1537812f, -0.0309683f, -0.1137296f, -0.0828946f, -0.2072186f, +0.2029842f, +0.0521479f, +0.2556088f,
  +0.3873617f, +0.3068537f, +0.3530645f, +0.0114797f, -0.0665471f, -0.3378999f, +0.1286441f, -0.6038325f,
  -0.2657756f, -0.0126778f, +0.2586140f, -0.3541543f, -0.0754285f, -0.0486533f, +0.2435604f, -0.1933495f,
  -0.0680323f, -0.0270957f, -0.2770430f, +0.0193228f, -0.0193605f, +0.2274712f, -0.1828206f, -0.0933869f,
  -0.1324157f, +0.0421350f, -0.0584492f, +0.1689292f, +0.2039056f, -0.2720596f, -0.1033682f, +0.2534738f,
  -0.0172164f, -0.1685567f, -0.0523214f, -0.1318601f, +0.0518987f, -0.0661571f, -0.3606994f, -0.0470654f,
  +0.1716673f, -0.0596090f, +0.0400109f, +0.0295058f, -0.0479901f, -0.1113057f, +0.0217158f, +0.2993301f
);

const float biases[4] = float[4](
  -0.0126107f, +0.0817776f, -0.0288444f, -0.0123508f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer81 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0547004f, -0.0771545f, -0.0474974f, -0.0308020f, +0.1098388f, -0.0151053f, +0.1040728f, +0.1005228f,
  -0.0713083f, -0.1589650f, +0.2739349f, -0.1838938f, -0.1205851f, -0.2066452f, +0.1106937f, +0.2340521f,
  -0.0516126f, +0.0483213f, +0.0489867f, -0.0739997f, -0.0254359f, +0.0064888f, -0.2128461f, +0.0467252f,
  -0.0767756f, +0.0626964f, +0.0753402f, -0.2009790f, +0.1075650f, -0.2105663f, -0.0554829f, +0.2731527f,
  +0.0187116f, +0.1241634f, -0.0854669f, +0.1506683f, -0.1192960f, -0.0199045f, -0.0221472f, -0.0075650f,
  +0.0268840f, +0.0711200f, -0.0870403f, -0.1174980f, -0.0641411f, -0.0678287f, -0.1684522f, +0.1619896f,
  -0.1508208f, -0.2017689f, +0.0383621f, -0.1703485f, +0.2326179f, +0.0576252f, +0.0215854f, -0.0832340f,
  -0.4997864f, +0.3172272f, +0.5148536f, +0.0044511f, -0.1341927f, -0.0240573f, +0.1353150f, +0.0893316f,
  -0.1279802f, +0.1177817f, +0.0618092f, +0.1243630f, -0.0944544f, -0.0599559f, -0.0026104f, +0.1825025f,
  -0.1107547f, +0.0269660f, +0.1872368f, -0.0503592f, +0.1729313f, +0.1687107f, -0.0672247f, +0.0679933f,
  -0.1004869f, +0.0275670f, +0.1845732f, +0.0146792f, +0.1087306f, -0.0183664f, -0.0537552f, -0.0427891f,
  -0.3162812f, +0.0297870f, +0.0551264f, -0.0240294f, -0.0911779f, -0.0005216f, +0.1295079f, -0.0835216f,
  +0.1283260f, +0.1325545f, +0.0043025f, -0.0405822f, -0.3122590f, +0.0730504f, +0.0111099f, +0.2258136f,
  -0.1352928f, +0.0076814f, +0.2024719f, -0.1566906f, -0.0463216f, +0.0898358f, +0.2568546f, +0.0680403f,
  -0.1761904f, +0.1082938f, -0.0718150f, +0.0262166f, -0.1225250f, -0.1873154f, +0.1288303f, -0.2788823f,
  -0.0252659f, +0.0221239f, +0.1680188f, -0.1265961f, -0.0895402f, +0.0345546f, -0.1309523f, -0.1222970f,
  +0.1338202f, -0.0189635f, +0.0098723f, +0.0387883f, -0.0126485f, -0.1158499f, +0.1710226f, -0.1356170f,
  +0.0076351f, +0.0346285f, -0.1102541f, -0.1649920f, -0.0342776f, -0.0395764f, -0.0964514f, -0.0512818f,
  +0.1563297f, -0.2643988f, +0.3590437f, -0.1657113f, -0.0141070f, -0.0600576f, -0.0033549f, -0.0460279f,
  +0.0571091f, -0.1147426f, +0.2231411f, -0.1889012f, -0.1162420f, -0.1518884f, +0.0510964f, -0.1190312f,
  -0.1173449f, -0.0898365f, +0.0365625f, +0.0066711f, +0.0459323f, +0.0416203f, -0.0333400f, +0.0945885f,
  -0.1753417f, -0.5057249f, -0.2598398f, +0.0935077f, +0.1173030f, +0.0462379f, -0.2035903f, +0.0279084f,
  +0.2225272f, -0.1385551f, +0.1058946f, +0.1251627f, -0.0908567f, +0.0231928f, -0.1130574f, +0.3937903f,
  +0.1563354f, -0.0776377f, -0.0186543f, -0.0431394f, +0.1558609f, -0.1843714f, -0.0550724f, -0.0639192f,
  +0.0101096f, -0.1803663f, +0.0860845f, -0.1621347f, -0.2663650f, -0.0911318f, +0.0109435f, -0.0534669f,
  -0.1611543f, +0.1172798f, +0.0492621f, -0.1591171f, -0.0183954f, -0.1891821f, -0.0430967f, -0.0195552f,
  -0.0660918f, +0.0603959f, -0.0630168f, -0.0944404f, +0.0146168f, +0.0470726f, +0.0109610f, +0.0174186f,
  +0.0395171f, -0.0431656f, +0.0404389f, +0.0518865f, -0.2964621f, -0.2609984f, +0.0759979f, -0.0704525f,
  +0.2091754f, -0.1640614f, +0.3074875f, +0.1146955f, -0.0828945f, -0.0219005f, -0.0451934f, +0.0305452f,
  +0.2819508f, -0.3178009f, -0.1438437f, +0.0414614f, -0.0061580f, +0.3221889f, +0.2841283f, +0.1782226f,
  +0.0251460f, +0.0767119f, -0.1932936f, +0.1011594f, +0.1655085f, +0.0527313f, +0.0375181f, -0.0346638f,
  +0.0052034f, +0.0259114f, -0.2896334f, +0.1781975f, -0.1938197f, +0.1444857f, +0.2018784f, +0.2028846f,
  +0.0173922f, +0.0790430f, -0.4554484f, +0.0931620f, +0.0609787f, +0.0447576f, -0.0931576f, +0.3608842f,
  -0.0537994f, -0.1217463f, -0.1111937f, +0.0744790f, -0.0646105f, -0.0139203f, -0.1125408f, -0.0272217f,
  +0.0929842f, +0.1641514f, -0.0326509f, +0.0474631f, +0.0115362f, +0.1210671f, -0.1729188f, +0.0511819f,
  -0.1868558f, -0.0521661f, -0.3210082f, -0.3287660f, +0.1232693f, +0.1507621f, -0.1374227f, +0.2737521f
);

const float biases[4] = float[4](
  +0.0940982f, +0.0485582f, -0.3148754f, +0.0149451f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer81 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0710228f, -0.3093988f, +0.4380149f, -0.1343960f, +0.3307698f, +0.1049711f, -0.2086264f, -0.1406910f,
  -0.1259522f, +0.0597251f, +0.2273722f, -0.0525207f, +0.4064655f, +0.2611886f, -0.0980430f, -0.2456908f,
  +0.1503206f, -0.1989978f, -0.0844962f, -0.0988186f, +0.3836882f, -0.0133326f, -0.2319044f, +0.0716605f,
  +0.0546706f, -0.0567198f, +0.0078572f, -0.0063464f, +0.4676512f, -0.1172481f, -0.0829487f, -0.0101451f,
  +0.0473171f, +0.0065990f, +0.1009102f, +0.0030628f, +0.3305871f, -0.0294432f, +0.2420660f, -0.1626293f,
  -0.2102917f, +0.2472867f, +0.3126082f, +0.0367265f, -0.2311083f, -0.1718302f, -0.1745251f, -0.0188681f,
  +0.1754144f, -0.1928017f, -0.1103592f, -0.0458774f, +0.0584028f, +0.2982605f, +0.4915413f, -0.0473474f,
  -0.2336534f, +0.1029321f, -0.0622588f, +0.0141257f, -0.1731910f, +0.1397379f, +0.0620268f, -0.3105897f,
  +0.0791294f, -0.1172449f, -0.0725414f, +0.0372377f, -0.0752612f, -0.1743543f, +0.0142575f, -0.1056338f,
  +0.0915000f, +0.0569753f, -0.0014763f, -0.2618612f, +0.1800608f, -0.1158888f, +0.2058737f, +0.0190862f,
  +0.6950886f, +0.7051808f, +0.2867464f, -0.2066361f, +0.3431032f, -0.3953450f, +0.5079817f, -0.0449948f,
  -0.0169292f, -0.0270919f, +0.1212134f, -0.4359897f, -0.0273970f, -0.0752220f, +0.0541470f, -0.3070755f,
  +0.0431674f, -0.0233705f, -0.0887868f, -0.1512725f, +0.2535923f, -0.0731381f, +0.2038492f, +0.0748428f,
  -0.1731623f, +0.1784191f, -0.0778896f, +0.3071627f, +0.1316634f, -0.4763145f, +0.0140416f, +0.3148478f,
  +0.0034285f, -0.0414093f, +0.0628807f, -0.0103748f, +0.1075765f, +0.1444377f, +0.1315539f, -0.0051053f,
  -0.0471914f, +0.0401055f, -0.1323431f, -0.0477413f, +0.0264992f, -0.1624100f, -0.1706861f, -0.0082598f,
  -0.0259500f, -0.0239568f, +0.0559915f, -0.0589549f, -0.1141855f, +0.0334884f, +0.1031652f, +0.0000690f,
  +0.0140290f, +0.0201114f, -0.0992739f, -0.0630075f, +0.1091522f, -0.0789644f, -0.0807611f, +0.0963626f,
  -0.0869321f, +0.1052742f, -0.0947186f, +0.1984169f, +0.1617995f, -0.1506393f, +0.3100961f, -0.0788657f,
  +0.0581796f, +0.4094502f, +0.1991439f, -0.3047098f, +0.1941187f, +0.0960757f, -0.2359262f, +0.1943970f,
  -0.0542378f, -0.1676972f, -0.2487538f, +0.1680503f, -0.1430602f, +0.1049291f, -0.0992974f, +0.1808324f,
  +0.3380660f, +0.1397213f, -0.1078721f, -0.2401854f, -0.0586944f, -0.0720443f, +0.3114370f, -0.0900115f,
  -0.1819830f, +0.2254442f, +0.1592174f, +0.1589921f, +0.0753596f, +0.0615789f, -0.2441800f, +0.1932723f,
  -0.0868379f, -0.1492291f, -0.0942058f, +0.1168350f, -0.2753328f, +0.2188193f, +0.1726194f, +0.2908833f,
  -0.0255109f, +0.0287621f, -0.0623090f, -0.0140491f, +0.0147022f, +0.1087090f, -0.0216464f, -0.0848209f,
  -0.1195202f, +0.0082426f, +0.0358004f, +0.0347249f, -0.0488188f, -0.0394720f, -0.0600716f, +0.1550204f,
  -0.1344112f, +0.0058049f, +0.2276914f, +0.1405769f, -0.0153162f, +0.2268186f, +0.1283490f, +0.0375313f,
  +0.0353491f, +0.0147289f, +0.0858230f, +0.0197404f, -0.1361485f, +0.0288137f, +0.0970332f, +0.0391101f,
  +0.0845779f, -0.0409010f, -0.1750757f, +0.1909292f, +0.1568009f, +0.0890826f, -0.0813579f, +0.0496746f,
  -0.3712256f, +0.0853266f, -0.0067009f, -0.0945128f, -0.0391243f, -0.0131130f, +0.1054257f, -0.0171948f,
  -0.0561530f, -0.2218055f, +0.1282377f, +0.1085239f, -0.0655090f, +0.1362566f, -0.2751250f, +0.1056164f,
  -0.1391472f, +0.2326239f, -0.1926867f, -0.2596827f, +0.0220493f, +0.1139249f, +0.2855594f, +0.0310068f,
  -0.2463350f, -0.0242803f, +0.0013751f, -0.0669570f, +0.1174567f, -0.3015435f, +0.0880291f, -0.1778009f,
  +0.0214299f, -0.0341642f, +0.1754849f, +0.0659923f, -0.0754926f, +0.0613580f, +0.1404711f, +0.1093453f,
  -0.3627382f, +0.1314511f, +0.3224776f, +0.4125336f, +0.1221664f, +0.0426526f, +0.3445330f, +0.1198550f,
  -0.2246965f, -0.0818759f, -0.1253755f, -0.0953800f, -0.0002017f, -0.1861776f, +0.3503065f, +0.1233981f
);

const float biases[4] = float[4](
  +0.0554761f, -0.1429993f, +0.0183160f, -0.1282330f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer82 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2184558f, -0.0436086f, -0.0414523f, -0.0751041f, -0.0585511f, -0.0814777f, +0.0513421f, +0.0505904f,
  +0.1833042f, -0.1975566f, -0.2294307f, +0.0844674f, +0.2900859f, +0.1137085f, +0.1593642f, +0.1892791f,
  +0.0770938f, +0.0867442f, -0.2805926f, +0.0869756f, +0.2073967f, +0.0493249f, -0.1470293f, +0.0132811f,
  +0.0762822f, +0.1423154f, -0.1787275f, -0.1092971f, -0.1327553f, -0.0170432f, +0.0450177f, +0.2671367f,
  +0.0939788f, +0.0945529f, -0.2046589f, +0.1511551f, +0.0293297f, +0.5382142f, +0.2481346f, +0.2459860f,
  +0.0306531f, -0.0292436f, -0.0660686f, -0.1049538f, -0.0887880f, +0.2998208f, -0.3900241f, +0.1508621f,
  -0.1433185f, +0.1804406f, -0.1037629f, +0.1147878f, -0.0257228f, +0.3784953f, +0.1806861f, +0.1294825f,
  +0.0304342f, -0.0221319f, +0.0477558f, +0.0022093f, +0.4317884f, -0.5692868f, -0.1177866f, +0.0840605f,
  -0.0658764f, -0.3318551f, -0.1949727f, +0.0946792f, -0.0425194f, +0.0740168f, +0.0897241f, -0.0309782f,
  -0.0492719f, -0.1314133f, -0.1291456f, +0.0970530f, -0.1122446f, +0.0140114f, -0.0348498f, -0.0406091f,
  +0.1359192f, -0.0113044f, -0.2147293f, +0.2180256f, -0.0912006f, +0.1555437f, -0.1941077f, -0.3896602f,
  +0.2119342f, -0.1959461f, -0.1679111f, +0.1281104f, +0.0273228f, -0.0332032f, +0.0569283f, +0.1783832f,
  +0.1076069f, -0.2048212f, +0.1475755f, +0.1341214f, -0.1153882f, -0.1574316f, +0.2664896f, -0.0680829f,
  -0.1048925f, +0.1315613f, +0.0439321f, -0.1932572f, -0.1809075f, +0.0835508f, +0.0037916f, -0.2877387f,
  -0.2176279f, -0.0500464f, +0.5989760f, +0.0556182f, +0.1412203f, -0.1448049f, +0.2301839f, -0.1655813f,
  +0.0949116f, +0.0891279f, +0.0290895f, +0.0077075f, +0.1062478f, +0.3296672f, +0.0384016f, -0.2469374f,
  +0.0962205f, +0.0304665f, -0.0541024f, -0.0019490f, -0.1299316f, -0.3999560f, -0.1410703f, -0.1928223f,
  +0.1189340f, +0.0267888f, +0.1737018f, -0.1553117f, -0.0929677f, +0.1430229f, -0.0792282f, +0.0579559f,
  -0.2396561f, -0.1205048f, +0.1310039f, +0.1718676f, -0.0382827f, +0.0398012f, -0.0955278f, -0.0397463f,
  -0.1148888f, +0.0592771f, -0.0178907f, +0.2853192f, -0.1960703f, -0.0565949f, -0.1194364f, -0.4977106f,
  -0.1137844f, -0.2168513f, +0.0452039f, +0.0945636f, -0.3773172f, +0.0106762f, +0.0157769f, -0.1860256f,
  -0.2264096f, -0.1070018f, +0.0993215f, +0.0138701f, -0.0704800f, -0.0626414f, -0.0570374f, -0.1856272f,
  +0.2201233f, +0.0509854f, +0.2044436f, +0.2553451f, +0.0356359f, -0.2324573f, -0.2503638f, +0.0052489f,
  +0.0202377f, +0.0017257f, +0.5248803f, +0.1660295f, -0.3635175f, +0.1482171f, +0.1167633f, -0.1888171f,
  +0.0346847f, +0.0503696f, -0.0877307f, +0.1156671f, -0.0082721f, -0.3567603f, +0.0318557f, -0.0839907f,
  -0.0961542f, -0.1481228f, +0.0423765f, -0.0802290f, +0.1601254f, -0.4083602f, -0.1070441f, -0.1664748f,
  +0.1788663f, +0.2048271f, -0.1612879f, +0.0133462f, -0.0982432f, -0.0806509f, -0.0269986f, +0.0065373f,
  +0.0496785f, +0.2161765f, +0.0802299f, +0.5320184f, -0.0899499f, -0.0034266f, -0.0355807f, -0.2072913f,
  -0.1287407f, +0.1659552f, +0.0041457f, +0.0332789f, -0.2049224f, -0.0132896f, +0.1211925f, -0.2384585f,
  +0.0084066f, -0.0629052f, +0.0362825f, -0.1543258f, -0.4402005f, -0.0775803f, +0.1018646f, +0.0396643f,
  -0.0876898f, +0.2720708f, +0.1425049f, -0.1001856f, -0.1077378f, +0.1876524f, +0.2703863f, +0.0099724f,
  +0.2803385f, -0.1192470f, -0.2223675f, -0.0424819f, -0.0005293f, -0.0013750f, -0.3260726f, +0.0818762f,
  +0.0720483f, -0.1511794f, -0.1537435f, -0.0225579f, +0.1246423f, -0.0629366f, +0.3069405f, -0.0428078f,
  -0.0913667f, +0.0810840f, -0.0608220f, +0.0625510f, -0.0252406f, +0.7166657f, +0.0434738f, +0.0277217f,
  -0.0983584f, +0.1819369f, +0.1942454f, -0.0173091f, +0.0530715f, -0.1279134f, +0.2655964f, +0.0296364f,
  +0.1170503f, +0.0992109f, -0.0543546f, +0.0222068f, +0.3819684f, +0.1689629f, -0.0645824f, +0.0794656f
);

const float biases[4] = float[4](
  -0.0286745f, -0.0618124f, +0.0077021f, -0.0300695f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer82 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2675788f, -0.0047931f, -0.0100704f, -0.0301413f, -0.0036895f, -0.0327873f, -0.0209886f, +0.0953526f,
  +0.1792126f, +0.1792403f, +0.0429846f, +0.0161433f, +0.0668304f, -0.0162175f, +0.0816874f, -0.0401090f,
  -0.0411586f, +0.0589069f, +0.0759522f, -0.0056599f, -0.1008582f, +0.0142289f, +0.0686507f, +0.0100052f,
  -0.1906728f, +0.1225776f, -0.0696467f, +0.2730854f, +0.0078070f, +0.1738285f, +0.1788903f, -0.0045245f,
  -0.0330856f, +0.1625887f, -0.2796733f, +0.1395386f, +0.0513868f, +0.0957444f, -0.1017851f, +0.0326516f,
  +0.1556665f, +0.0263978f, +0.0536778f, -0.1666109f, -0.1742372f, -0.0324906f, +0.1378317f, +0.1037051f,
  +0.1086206f, -0.0093014f, -0.0736006f, +0.2537082f, -0.1054144f, -0.0729524f, +0.0409222f, +0.0666109f,
  +0.2563685f, +0.0123937f, -0.0732417f, -0.2011758f, -0.3819963f, -0.2203722f, -0.2197978f, +0.0116982f,
  -0.1118020f, -0.0923958f, +0.0926327f, +0.1197658f, -0.2133335f, -0.0589817f, -0.0764123f, -0.0024068f,
  +0.3241769f, +0.0620050f, +0.1380759f, -0.1017642f, +0.2143484f, -0.0297046f, +0.0130580f, +0.1853589f,
  -0.0441533f, -0.2316997f, +0.0178879f, -0.0887179f, -0.1223640f, +0.0495551f, +0.2566593f, -0.1040051f,
  -0.1082545f, -0.3869875f, +0.0475203f, +0.0971593f, -0.0670341f, +0.0338312f, +0.0728602f, -0.0502928f,
  +0.3785097f, +0.1615406f, -0.0337198f, -0.0720289f, -0.0446928f, -0.1136764f, +0.3081566f, +0.2544646f,
  -0.0257853f, -0.1291169f, -0.0184912f, -0.2242280f, -0.1115283f, +0.3489142f, -0.2551160f, +0.0323957f,
  +0.2612296f, -0.1679820f, +0.2929491f, +0.0724558f, +0.1866019f, +0.3288875f, -0.0206249f, +0.0697237f,
  -0.1509349f, -0.1038866f, -0.0912521f, -0.2252454f, -0.0738003f, -0.1539405f, +0.0895843f, +0.1384349f,
  +0.1126153f, -0.1680076f, +0.0583533f, -0.1671180f, -0.1557061f, -0.2142365f, -0.1945593f, -0.0319784f,
  -0.1373128f, -0.3715163f, +0.1099350f, +0.1583189f, +0.0145958f, -0.1510304f, +0.1668774f, +0.1237062f,
  -0.1353849f, +0.0446328f, +0.1697236f, +0.0785599f, -0.0866621f, -0.0716592f, -0.1423097f, -0.2165893f,
  +0.0451117f, +0.0629073f, +0.1676082f, +0.2493877f, -0.2600837f, -0.1546210f, +0.0181960f, -0.3795373f,
  +0.0132513f, +0.0964549f, +0.2781174f, +0.1958753f, -0.2760768f, +0.0685288f, -0.0397355f, -0.1686263f,
  +0.1050950f, -0.0744557f, +0.0633257f, +0.0156778f, +0.0733487f, +0.1463846f, +0.1306378f, -0.0416023f,
  -0.0796397f, +0.2795047f, +0.2839560f, -0.0024075f, -0.0167674f, +0.0394178f, +0.3111759f, -0.2104778f,
  +0.0055436f, -0.0174490f, +0.3212824f, -0.1812128f, -0.0766797f, +0.0622990f, -0.1787438f, -0.2153431f,
  -0.1612670f, +0.3425948f, +0.1399659f, -0.1762763f, +0.0321779f, -0.0454959f, -0.1287161f, -0.2224057f,
  +0.0525601f, -0.1042368f, +0.0579119f, +0.0990555f, +0.1129044f, +0.1932243f, +0.2616260f, -0.0655212f,
  +0.2138813f, -0.0925258f, -0.0026071f, +0.0354497f, +0.1642954f, +0.1919965f, -0.1845445f, -0.1318184f,
  -0.1565742f, +0.1784477f, -0.2139114f, +0.0319566f, +0.1144482f, -0.0420105f, +0.0340802f, +0.0428536f,
  -0.1032088f, +0.2923567f, -0.1548357f, +0.0622792f, +0.1812810f, -0.2836949f, -0.0392753f, +0.1465123f,
  +0.2934837f, +0.3508905f, -0.0682485f, -0.2557254f, +0.1164263f, -0.1538080f, +0.0418807f, -0.0422401f,
  -0.1110264f, +0.1903112f, +0.0075562f, -0.3622405f, -0.0258015f, +0.3042303f, -0.1022326f, +0.0132088f,
  +0.0407690f, -0.1146263f, -0.0456534f, -0.2233364f, +0.1973271f, -0.4428524f, +0.2597213f, +0.1732656f,
  -0.0646680f, +0.0357923f, +0.5633790f, -0.0539260f, +0.0288116f, -0.0411999f, +0.0339482f, -0.1074219f,
  +0.0770520f, -0.0142198f, -0.1593910f, -0.0071873f, +0.1609163f, +0.3318749f, +0.2449589f, -0.0746387f,
  +0.0603506f, +0.1691941f, +0.0206588f, -0.0582459f, +0.2471161f, -0.2568257f, -0.3985740f, -0.1206477f,
  -0.0278220f, +0.0298755f, -0.0867458f, -0.0045966f, +0.0229557f, -0.4143031f, +0.0110436f, +0.0314016f
);

const float biases[4] = float[4](
  -0.0486664f, -0.0114932f, -0.0239383f, -0.0023850f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer83 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0391915f, -0.0270636f, +0.1773345f, +0.0078088f, -0.1372004f, +0.0261378f, -0.1088493f, +0.1049798f,
  +0.0244181f, +0.1209365f, +0.0436434f, -0.0614955f, +0.0814696f, +0.0917440f, -0.0940795f, +0.0806717f,
  -0.1798514f, -0.1430185f, -0.0911626f, +0.0165801f, +0.2364689f, -0.2104041f, -0.0678386f, -0.0248670f,
  -0.0213852f, -0.2156346f, +0.0640090f, +0.0882859f, -0.3088898f, +0.0261741f, -0.0395331f, -0.0921022f,
  +0.0055609f, +0.0725987f, -0.1904414f, -0.0380246f, -0.1031386f, -0.0291987f, -0.0251044f, +0.1088724f,
  +0.0777099f, +0.0997898f, +0.1022812f, +0.2057744f, -0.0517685f, +0.0698914f, +0.0016449f, -0.0657444f,
  -0.0817805f, -0.0009271f, +0.1562710f, +0.1866959f, -0.0032229f, -0.0197115f, +0.0869606f, +0.0978934f,
  +0.0180821f, -0.0792796f, -0.1292167f, -0.3037469f, -0.0781043f, +0.2883127f, +0.1765400f, -0.0107407f,
  -0.1596244f, -0.0225554f, -0.1037375f, +0.1696093f, -0.1277654f, -0.2314045f, +0.0241697f, +0.1418391f,
  +0.0382609f, -0.4279039f, +0.3721028f, +0.0212805f, +0.2943659f, +0.1599212f, -0.0000769f, +0.1995779f,
  +0.1890917f, +0.0388619f, +0.2896521f, -0.0345492f, -0.0286702f, +0.2348229f, +0.1205103f, +0.0952739f,
  -0.0011024f, -0.0008952f, -0.2307577f, +0.0180274f, +0.0400228f, -0.0753670f, -0.1003345f, +0.0712100f,
  -0.0342799f, -0.3498128f, -0.0133824f, -0.0938948f, -0.0976240f, +0.0151891f, +0.0228287f, +0.1306041f,
  -0.1727494f, +0.0231570f, +0.2224238f, +0.1489704f, +0.2078805f, +0.2593205f, +0.2032731f, +0.1160637f,
  +0.1340216f, +0.1276911f, -0.1349434f, +0.2349309f, +0.0760122f, -0.0441535f, -0.1276031f, +0.3691458f,
  -0.0478409f, -0.2321348f, -0.0095863f, -0.1502718f, +0.6562349f, +0.0059098f, +0.1496416f, -0.1797750f,
  +0.0486228f, +0.0974768f, -0.0681271f, +0.1193922f, +0.2647151f, +0.1523603f, +0.0312837f, -0.0147678f,
  +0.0428310f, +0.0882456f, -0.0557935f, +0.0917679f, +0.0373421f, +0.1558183f, +0.1264848f, +0.0380787f,
  -0.0693123f, -0.0514583f, +0.0023582f, -0.0568119f, -0.1688191f, -0.0278904f, -0.2255667f, -0.1699684f,
  -0.0093074f, -0.2673418f, +0.2057343f, +0.0863297f, -0.0974400f, -0.0571362f, -0.1844576f, -0.3888693f,
  +0.3458389f, -0.1370005f, +0.2736837f, -0.0235931f, +0.1410854f, +0.0818318f, +0.1072029f, -0.0181014f,
  -0.0686573f, -0.0407960f, -0.0583266f, +0.0961438f, -0.1877642f, -0.3702217f, +0.2697352f, -0.1662969f,
  -0.2346349f, +0.1373709f, -0.1563432f, -0.2026060f, -0.2972982f, -0.0954995f, +0.1634571f, +0.0882499f,
  +0.0021105f, +0.0410745f, +0.0038513f, +0.0777808f, +0.2724944f, +0.2919156f, +0.2503161f, +0.0158971f,
  +0.0107890f, +0.1215023f, +0.0460518f, +0.1634718f, -0.0352754f, -0.3659511f, -0.2843023f, +0.0217129f,
  -0.2106557f, -0.1267002f, +0.0819163f, -0.0227183f, -0.1436360f, +0.1543485f, +0.2854046f, -0.1104126f,
  +0.2249637f, -0.0079902f, +0.2602484f, +0.1328445f, -0.2262221f, +0.1040313f, -0.0605587f, +0.0420928f,
  -0.1309448f, -0.0048502f, -0.1333224f, -0.1265103f, -0.1467487f, +0.1050738f, +0.1417073f, -0.1780639f,
  +0.0008485f, -0.5294335f, -0.2028623f, -0.2708416f, -0.1573517f, -0.1206745f, +0.1712127f, +0.2663079f,
  +0.0351342f, -0.2517138f, -0.1063817f, -0.2712750f, -0.0709696f, -0.1533052f, -0.1023138f, +0.1816684f,
  -0.0650071f, +0.2290998f, +0.1063021f, -0.1513997f, +0.0661489f, +0.1814418f, -0.0628444f, +0.1275326f,
  +0.2314878f, -0.3191933f, +0.1793960f, -0.1932091f, -0.0059919f, +0.1691745f, +0.0918363f, -0.2418402f,
  -0.0970053f, +0.0125303f, -0.2032636f, -0.3670363f, +0.0555169f, -0.0781052f, -0.1484162f, +0.1297617f,
  +0.1240451f, +0.1721722f, -0.0709974f, -0.0170066f, -0.0630466f, -0.1548860f, +0.0429577f, +0.1706681f,
  +0.0527115f, +0.0259458f, +0.0151994f, +0.0980342f, -0.1094686f, +0.0793159f, -0.0272252f, +0.0754693f,
  +0.0742374f, -0.0042959f, -0.0881603f, -0.1795939f, -0.0318425f, -0.0035159f, -0.0761256f, +0.0245416f
);

const float biases[4] = float[4](
  +0.0801717f, +0.0003038f, +0.0714969f, +0.0227445f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer83 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0636365f, -0.2485159f, -0.0155735f, +0.2062608f, -0.0909161f, -0.0895748f, +0.0796275f, +0.0434121f,
  -0.1672990f, +0.3666312f, -0.1633220f, -0.1557417f, +0.0677596f, +0.0268749f, +0.1042352f, +0.1702975f,
  -0.0353132f, -0.0388075f, +0.0156007f, -0.3127943f, +0.0111646f, +0.0004634f, -0.0132438f, +0.1701972f,
  -0.2876648f, +0.1184437f, +0.1068664f, -0.0477544f, -0.0898326f, -0.1818696f, +0.0748197f, -0.0153775f,
  -0.1530493f, +0.2310991f, -0.0097814f, -0.1128078f, +0.3524892f, -0.1275325f, +0.0126675f, -0.1535361f,
  +0.1102958f, +0.2092384f, +0.1880430f, -0.0777122f, +0.3474744f, -0.0424936f, -0.0255131f, -0.2473686f,
  +0.1386933f, -0.0160039f, +0.2154420f, +0.0208286f, -0.0266930f, +0.1625998f, +0.1744823f, +0.0640336f,
  +0.0769852f, -0.1807685f, -0.1008407f, +0.0297324f, -0.0088606f, -0.1230374f, +0.2123140f, -0.1361577f,
  -0.1692502f, -0.1204773f, +0.2667126f, +0.0577129f, +0.1109939f, +0.2426151f, +0.1794579f, -0.1394216f,
  -0.1925649f, -0.0221376f, +0.1523223f, +0.1575082f, +0.0387402f, +0.1449420f, +0.0541795f, +0.0727144f,
  -0.2354946f, +0.0147303f, -0.0759022f, -0.0634529f, -0.1021693f, +0.4486350f, -0.3843895f, +0.0180868f,
  -0.1808238f, -0.1199534f, +0.0093186f, +0.1909561f, -0.4085945f, +0.2615752f, -0.1449226f, +0.1484720f,
  +0.0882008f, +0.1181954f, +0.0211587f, +0.1158460f, -0.0709703f, -0.1148668f, -0.0111850f, -0.0238523f,
  +0.1658974f, -0.0812109f, +0.1130510f, -0.2901184f, +0.2316740f, +0.1275679f, -0.1243451f, +0.0131205f,
  +0.4282713f, +0.1485696f, -0.0124923f, -0.0604038f, +0.0260095f, -0.2002547f, +0.0347677f, +0.1535510f,
  +0.0957172f, -0.1145332f, +0.1036167f, -0.0938904f, -0.0384373f, +0.0629711f, +0.2714740f, -0.0937085f,
  +0.2367124f, +0.2210076f, -0.0445242f, +0.2221493f, +0.1415556f, -0.3180973f, +0.1448852f, -0.0613837f,
  +0.2104097f, -0.1741966f, +0.0684195f, +0.1540799f, -0.1355914f, -0.1521868f, +0.2574516f, -0.0949923f,
  -0.1075063f, -0.0874417f, +0.0325316f, -0.2501380f, +0.3305633f, -0.1749858f, -0.0363360f, +0.0143914f,
  +0.0084692f, -0.0843451f, +0.2718075f, -0.2063641f, +0.0693536f, -0.1638371f, -0.2181042f, -0.0423393f,
  +0.1453296f, +0.0855320f, +0.1391006f, +0.1588107f, -0.0487996f, -0.1056423f, -0.1866602f, +0.1106349f,
  -0.1752769f, +0.0297657f, -0.0574115f, -0.1948643f, +0.1814377f, +0.2946819f, +0.0202699f, -0.2358053f,
  +0.2341416f, +0.0302596f, +0.0858934f, -0.3337035f, -0.0038768f, +0.3726851f, +0.0498168f, -0.2382978f,
  +0.0063098f, +0.1896743f, +0.0499600f, +0.1016458f, +0.2289549f, +0.1283062f, +0.0554967f, +0.0316522f,
  +0.1086603f, -0.0543139f, -0.2427718f, +0.0764332f, +0.0836701f, -0.0157955f, -0.2418113f, -0.3208572f,
  -0.1465238f, -0.0097332f, +0.0731223f, +0.2469871f, +0.0173338f, -0.0358167f, -0.0743148f, -0.2411819f,
  +0.1908175f, -0.0483423f, +0.0285309f, +0.0715875f, +0.0894910f, -0.0424589f, -0.1939320f, -0.1813583f,
  -0.1862228f, -0.1560286f, -0.0520143f, -0.0957612f, +0.0556006f, +0.1393455f, +0.0429329f, +0.0805680f,
  -0.0500591f, +0.4435331f, -0.2343768f, +0.0014278f, +0.0229248f, -0.0507304f, +0.0959082f, +0.0871221f,
  -0.1472018f, +0.0476324f, -0.0871237f, -0.0125266f, -0.0786748f, +0.1039056f, +0.1442318f, +0.0095409f,
  -0.3512039f, -0.1696166f, -0.0463344f, -0.0314878f, -0.0807175f, +0.0880067f, +0.0244733f, -0.0877484f,
  -0.0005591f, +0.2739086f, +0.0489959f, +0.4291167f, +0.2265797f, -0.0581094f, -0.0447085f, +0.4109485f,
  -0.0473116f, +0.0700157f, -0.2629486f, -0.1686788f, -0.0463439f, -0.0187093f, -0.0942926f, -0.0685941f,
  -0.0371141f, -0.0386570f, +0.0416537f, -0.1101970f, -0.1186505f, +0.2586060f, -0.0675547f, -0.0672411f,
  -0.0501801f, +0.0822340f, -0.1484796f, +0.1973108f, +0.3125508f, -0.4011950f, +0.0683793f, +0.1145474f,
  +0.0834448f, +0.1338469f, -0.0600242f, +0.0186038f, -0.2141292f, +0.1437135f, -0.0361776f, -0.2305747f
);

const float biases[4] = float[4](
  +0.0156616f, +0.0442087f, -0.0156527f, +0.0386641f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer84 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2374021f, -0.0739451f, -0.1236618f, +0.1094587f, -0.0339342f, -0.0780784f, +0.0946696f, +0.0153407f,
  -0.0192452f, +0.1157597f, -0.1196696f, +0.0544666f, +0.0352495f, +0.0521591f, +0.0402862f, +0.2013279f,
  -0.0367579f, -0.1632986f, +0.0237184f, -0.1061501f, -0.1146526f, -0.0057897f, -0.1017411f, +0.0231812f,
  +0.1248018f, -0.1892891f, +0.0895311f, -0.0343306f, -0.3055304f, +0.1330664f, -0.1937731f, +0.0943503f,
  -0.0514058f, -0.0185431f, +0.2227956f, -0.0998358f, +0.1631293f, -0.1409969f, +0.1172438f, +0.1186709f,
  +0.0271434f, -0.1552394f, -0.0786470f, -0.0520937f, -0.0095186f, +0.0286011f, +0.3696596f, -0.0485942f,
  +0.1242248f, +0.0750277f, -0.1463647f, -0.0217109f, -0.1617399f, +0.1676760f, -0.0776669f, -0.0901942f,
  -0.0835019f, -0.0317210f, -0.0808433f, +0.1956364f, -0.2379563f, +0.0910108f, -0.0904553f, -0.0817941f,
  -0.0625856f, -0.1420144f, +0.1028281f, +0.1010119f, -0.1084609f, +0.0888415f, -0.0207668f, +0.0813531f,
  +0.0861178f, -0.0353640f, +0.4286348f, -0.1520554f, +0.0328275f, -0.0926380f, +0.2345337f, -0.2810412f,
  -0.1049273f, -0.0884863f, +0.1282238f, -0.0138559f, +0.1232541f, +0.0241987f, -0.1512474f, -0.1616697f,
  +0.0223052f, -0.0429402f, +0.1902839f, -0.1792710f, +0.0087172f, +0.1508661f, -0.1309460f, +0.0313743f,
  -0.0451839f, +0.0527428f, +0.1965506f, -0.1165873f, -0.0878856f, -0.1523781f, -0.2627038f, +0.0457010f,
  -0.2828426f, -0.0112062f, -0.2912978f, +0.3558882f, +0.0366354f, -0.3169639f, -0.0341572f, -0.3562370f,
  -0.0483945f, -0.1854490f, +0.3560699f, -0.1120695f, +0.0664539f, -0.0531046f, +0.0836605f, -0.0510422f,
  +0.0732215f, +0.2683457f, +0.0206931f, +0.1401242f, +0.0532646f, -0.1930572f, -0.0281574f, +0.3127144f,
  -0.0129325f, +0.1112476f, +0.0937331f, +0.2694638f, +0.1867760f, -0.0962545f, -0.0201116f, +0.0481406f,
  -0.0562401f, +0.2705207f, +0.1988276f, -0.1687758f, +0.1829524f, -0.0377056f, -0.1952146f, +0.1026310f,
  +0.1232573f, +0.0469208f, -0.0163559f, -0.0242891f, -0.2875791f, -0.0023051f, -0.0702922f, -0.0255367f,
  -0.1247929f, +0.1494243f, +0.1026896f, -0.1111268f, +0.1108705f, -0.1385403f, +0.0048113f, -0.1323157f,
  -0.1418703f, -0.0500213f, +0.1152078f, -0.2807706f, +0.1619390f, +0.1631178f, -0.1780214f, -0.0314490f,
  +0.3686744f, -0.0587718f, -0.1508226f, -0.0560553f, +0.0902689f, -0.2199348f, +0.0462464f, +0.2268344f,
  -0.4414975f, +0.0123631f, -0.2132772f, +0.1745686f, +0.0035253f, -0.2949414f, +0.1487440f, -0.2053108f,
  +0.0554516f, -0.2602997f, +0.0005788f, -0.1562819f, -0.0183964f, +0.2839738f, +0.1233652f, -0.3043369f,
  +0.0491957f, +0.0031577f, -0.0750066f, +0.0640835f, +0.0108114f, +0.0559051f, +0.1895632f, +0.0418268f,
  -0.1181125f, +0.0833731f, -0.3545414f, -0.5202007f, +0.0629006f, -0.1984675f, +0.0187329f, +0.3211986f,
  -0.0179005f, -0.0057331f, -0.0841251f, -0.0175622f, +0.0383647f, -0.1156047f, +0.0232334f, +0.1421173f,
  +0.3374529f, +0.1450568f, -0.0559967f, -0.0314907f, -0.1174390f, -0.0873147f, +0.1660272f, -0.0152850f,
  +0.2369685f, +0.3508509f, +0.1836210f, -0.1777807f, +0.4804883f, -0.0642342f, +0.2585520f, -0.3090178f,
  -0.0714215f, -0.0520453f, +0.0050080f, +0.1087600f, -0.0046883f, +0.0247196f, +0.3435369f, -0.0323765f,
  -0.0145294f, -0.3052647f, -0.0963802f, +0.2429005f, -0.2611484f, +0.0802721f, -0.1607339f, +0.1248721f,
  -0.0140561f, -0.2126189f, -0.1632899f, +0.0264915f, -0.2436900f, +0.0536929f, -0.1383123f, -0.3083874f,
  -0.0447719f, -0.3505803f, -0.0751379f, -0.0452892f, -0.2589098f, +0.0724492f, +0.0020420f, +0.0753376f,
  -0.0590120f, +0.1136449f, -0.0246874f, -0.0122334f, -0.0270281f, +0.0324920f, -0.2055831f, +0.1716302f,
  +0.0150873f, +0.0280187f, +0.0066726f, -0.0690270f, +0.0017284f, -0.2573214f, +0.1959094f, +0.0671058f,
  -0.0154578f, +0.1716413f, -0.1978929f, +0.0107422f, -0.0207692f, -0.0160139f, +0.1300800f, -0.0746177f
);

const float biases[4] = float[4](
  -0.0184128f, -0.0613819f, +0.0073427f, +0.0498182f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer84 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0520574f, +0.1625047f, +0.0849434f, -0.0699710f, +0.0199474f, -0.0733675f, +0.1776105f, +0.0618199f,
  -0.0288381f, +0.0306291f, -0.0167227f, +0.2015202f, +0.2412223f, -0.1397209f, -0.1463734f, -0.3498989f,
  -0.0197230f, -0.0243745f, -0.1278402f, +0.1527194f, +0.0636310f, -0.0530326f, -0.2027026f, -0.0497118f,
  +0.0731386f, -0.1781403f, -0.2281430f, +0.0428347f, +0.0962595f, -0.2209013f, +0.1000862f, -0.1111498f,
  +0.1509288f, -0.3819565f, +0.0333876f, +0.2126026f, +0.0137051f, -0.0625389f, +0.0593223f, -0.1243626f,
  -0.0664994f, -0.1155396f, +0.0656473f, +0.2416613f, -0.1227220f, -0.1267229f, -0.1481940f, +0.0157630f,
  -0.2186271f, +0.0513539f, -0.0357432f, +0.1350727f, -0.3488195f, +0.1119064f, -0.0621633f, +0.0191072f,
  -0.1812777f, +0.2354294f, +0.2806082f, +0.0209270f, +0.1442039f, +0.2297599f, +0.0066376f, -0.0626795f,
  +0.2420553f, -0.1755148f, -0.0628817f, +0.0881821f, -0.1538829f, -0.1760448f, +0.0001023f, -0.0343757f,
  -0.0364014f, -0.4232052f, -0.0802045f, +0.0346672f, +0.2827050f, +0.0530845f, -0.2410369f, +0.1489454f,
  -0.1871810f, -0.4504697f, +0.1689888f, -0.0756903f, -0.0546052f, -0.1223507f, -0.0209414f, +0.0246578f,
  -0.0919128f, -0.0247978f, +0.2790655f, +0.0180000f, +0.1780230f, +0.0525383f, -0.1114744f, -0.1921764f,
  -0.1543185f, -0.1725480f, -0.0616122f, +0.2730637f, -0.2118840f, -0.0987190f, -0.0764185f, -0.0233423f,
  +0.0607302f, -0.3919753f, +0.3485239f, -0.1282046f, -0.2828938f, -0.1627030f, -0.1650709f, +0.0165615f,
  +0.0234441f, -0.0478027f, +0.2912988f, -0.1256454f, +0.0324974f, +0.0153782f, +0.3639676f, +0.1035011f,
  +0.1927688f, -0.2241290f, +0.0764191f, +0.0584494f, +0.2610694f, +0.1091079f, -0.3836361f, +0.0049458f,
  +0.1725145f, -0.2740950f, -0.1372849f, -0.0172394f, +0.0001619f, -0.0118252f, -0.1661384f, -0.0721044f,
  -0.1598013f, -0.1651012f, +0.0856880f, -0.2035668f, +0.0593003f, -0.0982458f, +0.1817588f, +0.0125777f,
  +0.0108549f, +0.0634985f, -0.2235403f, -0.0009363f, -0.2221504f, +0.1304702f, +0.0258375f, -0.0444188f,
  -0.1525972f, +0.1384430f, -0.1808842f, -0.1272811f, -0.0460381f, -0.1128426f, -0.4105172f, -0.1300488f,
  +0.0907118f, -0.2592637f, +0.0432046f, -0.3123716f, -0.1442646f, -0.0068483f, +0.2163708f, +0.0526168f,
  +0.0171957f, +0.1261492f, -0.1784201f, +0.1245360f, +0.1284720f, -0.1704921f, +0.2035735f, +0.1563525f,
  +0.0605235f, +0.2192906f, +0.2355675f, +0.0341618f, +0.2811949f, -0.2755107f, -0.0697195f, -0.0650021f,
  -0.2207438f, +0.5368468f, +0.2104145f, -0.1679162f, +0.1820374f, -0.0291089f, +0.1370857f, +0.1712275f,
  +0.1027172f, -0.0807853f, -0.0727480f, -0.0994911f, +0.2375078f, +0.0811288f, +0.1614858f, -0.0275292f,
  +0.2084412f, -0.1451227f, +0.0239568f, -0.1356926f, -0.0144499f, +0.0761334f, +0.0382132f, +0.1390192f,
  +0.1221164f, +0.0206984f, -0.2384009f, -0.0838429f, +0.0935257f, -0.0492558f, +0.2006133f, +0.2250038f,
  -0.2588813f, +0.0809300f, -0.1212279f, +0.1355407f, +0.1457100f, -0.0849513f, -0.2409176f, +0.1244386f,
  -0.2532048f, +0.1391950f, +0.1189466f, -0.0203163f, +0.0429061f, +0.1057292f, -0.0652854f, -0.0547080f,
  -0.0748400f, -0.0086432f, -0.2432102f, +0.0258022f, +0.0791231f, +0.0161830f, +0.1002085f, +0.1043339f,
  -0.0383866f, -0.2433618f, -0.1827899f, +0.0029339f, +0.4369945f, +0.1714077f, +0.0768812f, -0.1601130f,
  +0.4157074f, -0.6009297f, -0.1014462f, -0.1184818f, -0.1505716f, -0.0920717f, -0.3268032f, -0.5290864f,
  -0.3460133f, +0.0091547f, +0.0136466f, +0.0215211f, +0.0758304f, -0.0418190f, +0.0075077f, +0.0221828f,
  -0.0302106f, -0.0717108f, +0.0467666f, -0.0105959f, +0.0199362f, +0.1777645f, -0.0934784f, +0.0302708f,
  +0.1379229f, -0.0820149f, +0.2939092f, -0.0067029f, +0.0657853f, +0.3346990f, -0.0323467f, -0.0086782f,
  +0.1312270f, -0.2119454f, +0.1269523f, -0.0366332f, +0.0511650f, +0.0744163f, +0.4053750f, +0.3706286f
);

const float biases[4] = float[4](
  -0.0267353f, +0.0035479f, -0.0538765f, -0.0081130f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer85 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0426079f, -0.0415737f, +0.0908150f, -0.1045452f, +0.0802679f, -0.0295408f, +0.1194396f, -0.0050353f,
  -0.1479493f, +0.0185780f, +0.0994659f, -0.0034418f, +0.1624020f, -0.0861002f, +0.0680965f, -0.0049671f,
  -0.0502466f, -0.0632161f, -0.0247027f, +0.1829167f, +0.1174657f, -0.2383860f, -0.0779267f, +0.1050042f,
  -0.0746430f, -0.2184305f, +0.1593140f, +0.0208977f, +0.0420738f, +0.2572529f, +0.0746110f, +0.2814308f,
  +0.0866797f, -0.3626860f, -0.4643049f, +0.2581411f, +0.0969390f, +0.1477622f, -0.1482401f, +0.3196991f,
  +0.1178792f, -0.0781238f, +0.0015136f, -0.1146617f, +0.0167937f, -0.2587653f, -0.1668629f, -0.1844502f,
  -0.0650786f, -0.3968266f, +0.0948981f, -0.0784874f, -0.0995659f, -0.0033576f, +0.3106384f, +0.0834669f,
  -0.0082708f, -0.5528232f, -0.3206236f, -0.3824878f, +0.0568844f, -0.1427832f, +0.1576195f, +0.0984989f,
  +0.1191895f, -0.2788865f, +0.1207041f, +0.1507321f, -0.1215119f, -0.2477443f, +0.1129543f, +0.1335914f,
  -0.3057311f, +0.2565020f, +0.0989127f, -0.0138323f, +0.0008818f, -0.2214063f, +0.1521694f, -0.0274315f,
  +0.0195907f, -0.2258180f, +0.2962320f, -0.0886729f, -0.1233259f, -0.0839767f, +0.5555844f, +0.0643365f,
  -0.0724765f, -0.0462562f, +0.0924997f, +0.1318369f, -0.0381699f, -0.1358736f, -0.0423279f, +0.2813241f,
  +0.0395249f, -0.2631876f, -0.0045617f, +0.0057268f, -0.2150251f, +0.0278547f, -0.1483223f, -0.0816797f,
  -0.0989595f, -0.1141970f, -0.0558483f, +0.0726534f, +0.0317347f, +0.1106399f, -0.1936912f, +0.1563880f,
  +0.0791096f, +0.1685795f, +0.1636894f, +0.1574680f, -0.0923512f, +0.1933964f, -0.2150830f, +0.0057671f,
  +0.0617276f, -0.0958193f, -0.1405561f, -0.1949325f, +0.1050813f, -0.4403817f, +0.0643028f, +0.1147301f,
  +0.0158216f, +0.0056001f, -0.2302931f, -0.2162485f, -0.0162898f, -0.3673272f, +0.0533998f, +0.0367732f,
  -0.0055449f, -0.1117405f, -0.1688042f, -0.1759418f, -0.2447141f, -0.1751816f, -0.1177250f, +0.0132225f,
  +0.0875608f, +0.0060168f, +0.1868830f, -0.0917063f, -0.1214504f, -0.0287002f, +0.0098026f, +0.3185760f,
  -0.1218894f, -0.0000023f, -0.1383486f, -0.0722353f, -0.0527979f, +0.1381282f, +0.0569739f, -0.1230554f,
  -0.0608733f, -0.0234810f, +0.1801446f, +0.1359327f, +0.0258038f, +0.0305741f, +0.0380534f, -0.3111500f,
  +0.0595210f, +0.0095220f, +0.2345856f, +0.1780548f, +0.0602286f, -0.1413192f, +0.2541426f, +0.2485941f,
  -0.0974207f, -0.0810045f, +0.2097279f, -0.2362562f, +0.1657630f, -0.2479667f, +0.0292792f, -0.3417616f,
  +0.1366808f, -0.2849514f, -0.3854176f, -0.1956491f, +0.3054969f, -0.2254272f, -0.2567058f, +0.0108758f,
  +0.1437012f, -0.5485722f, +0.1067024f, -0.0522081f, -0.0584928f, -0.0139199f, -0.0857366f, +0.0907752f,
  +0.0720531f, -0.1266189f, +0.0352372f, -0.1492924f, +0.1047139f, -0.3758906f, +0.0751711f, -0.0340521f,
  -0.2029758f, +0.1046710f, +0.1412898f, +0.0204565f, +0.1385113f, +0.0170273f, +0.1960201f, -0.0187454f,
  -0.0851758f, +0.0665359f, -0.2620373f, -0.0674914f, +0.0280635f, -0.0259852f, +0.0102224f, -0.0970180f,
  -0.2122266f, +0.2579598f, -0.2025151f, -0.1870232f, +0.0951479f, -0.0197853f, -0.1444228f, +0.0859823f,
  -0.1826844f, +0.2669290f, -0.0723892f, -0.1190264f, +0.0297294f, -0.0247582f, -0.0953109f, -0.0453395f,
  +0.0413990f, -0.0788988f, -0.0628272f, -0.0733101f, +0.1103746f, -0.2300768f, -0.2196860f, -0.1777082f,
  -0.2645375f, +0.1153848f, +0.0223981f, -0.0230947f, -0.1868300f, -0.0746489f, -0.3890326f, +0.0598885f,
  -0.1389784f, +0.1496920f, -0.2067902f, +0.1006632f, -0.0404777f, +0.1236289f, -0.1147525f, -0.2113950f,
  -0.1607782f, -0.0747179f, +0.1035042f, -0.1532193f, +0.3426839f, -0.1550682f, +0.0225027f, +0.1622660f,
  +0.1555106f, +0.2666775f, -0.3371014f, -0.0140146f, -0.1405465f, -0.1030652f, -0.5055893f, -0.2343732f,
  -0.3331614f, +0.2423626f, -0.0919223f, -0.0295519f, -0.0561127f, -0.1145390f, -0.0080501f, +0.2330385f
);

const float biases[4] = float[4](
  +0.0349334f, +0.0564600f, +0.0671057f, +0.0555519f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer85 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.5340727f, +0.0697949f, -0.0953454f, -0.2550284f, +0.2155108f, -0.2039734f, +0.2125105f, -0.0335273f,
  +0.6359556f, +0.1832354f, +0.3588083f, +0.1927593f, +0.4990082f, +0.0028386f, +0.5226266f, -0.3362182f,
  -0.1189760f, +0.1054316f, -0.2440111f, -0.0895078f, -0.0962908f, +0.1194111f, +0.0374069f, +0.0085922f,
  -0.1664718f, -0.0560869f, +0.0109392f, +0.2583385f, -0.1681068f, -0.2456191f, +0.1199434f, -0.0039518f,
  -0.3478739f, -0.2917870f, +0.0350901f, -0.0814700f, -0.0043476f, +0.0909002f, +0.1285766f, +0.2570343f,
  -0.2530334f, -0.1095886f, -0.0024217f, +0.0530865f, +0.3377396f, -0.0223515f, +0.1086050f, +0.1175940f,
  -0.0261798f, +0.1483063f, -0.0372129f, +0.0680510f, -0.0374541f, +0.0119870f, -0.1014158f, -0.0696576f,
  +0.3137594f, +0.1678713f, -0.0582348f, -0.0116393f, +0.0051241f, -0.0132735f, -0.1412003f, -0.0554035f,
  -0.0174773f, +0.0653174f, +0.0874197f, +0.0092006f, +0.0395671f, -0.1828945f, -0.1130142f, -0.0007288f,
  -0.1347087f, +0.0036520f, -0.0012512f, -0.0743333f, +0.0673651f, +0.0310906f, +0.2199367f, -0.0155985f,
  -0.0562508f, +0.1044850f, +0.1556174f, -0.0983305f, -0.1322434f, +0.0218941f, +0.0090270f, +0.0178804f,
  -0.1521102f, -0.1204068f, -0.0126881f, +0.0063986f, -0.0178490f, -0.1822892f, +0.0893969f, -0.1438181f,
  +0.0814429f, -0.0100292f, -0.1458218f, +0.1298535f, +0.1107686f, +0.0320985f, +0.2349426f, +0.1156476f,
  -0.0601186f, -0.1961732f, +0.1678079f, -0.0663483f, -0.2057970f, +0.3220182f, -0.1265101f, +0.2389195f,
  -0.0601243f, +0.0552150f, -0.0794894f, +0.0636606f, -0.0363577f, +0.1220425f, -0.0895756f, +0.3911805f,
  -0.0405669f, -0.0079665f, -0.0575548f, -0.0338177f, +0.0938223f, +0.0710595f, -0.1800142f, -0.1594526f,
  +0.0787722f, +0.3422483f, +0.2385536f, +0.3365004f, -0.2179490f, -0.1260042f, +0.0012928f, -0.1419252f,
  +0.0261894f, +0.2225510f, -0.0391757f, +0.1216774f, +0.1839979f, -0.0630038f, +0.0694463f, +0.1599700f,
  -0.0039191f, +0.1084970f, -0.1598969f, -0.0623859f, +0.0329747f, +0.1481550f, -0.1671794f, -0.0437160f,
  +0.0634695f, +0.0587989f, -0.1429455f, +0.0614491f, -0.0710370f, +0.0600889f, +0.1658002f, +0.1513371f,
  -0.0262828f, +0.0280508f, -0.1449462f, -0.0127926f, +0.0955750f, +0.0356994f, +0.1202577f, +0.0604474f,
  -0.4795462f, +0.0793054f, -0.1367349f, -0.0755354f, +0.1043027f, -0.2342516f, -0.0506246f, +0.1678405f,
  +0.2243925f, +0.2810915f, -0.0162285f, -0.3278476f, -0.3281732f, -0.1299753f, +0.2831494f, -0.1231725f,
  -0.1699034f, -0.2689731f, -0.2327799f, -0.3020057f, -0.1640549f, -0.0698902f, +0.0105653f, +0.1608815f,
  +0.2175370f, +0.0359599f, -0.1278320f, -0.2086907f, +0.0523498f, -0.0066227f, -0.0052442f, +0.0675384f,
  -0.2478914f, +0.1479836f, +0.0347908f, +0.3672082f, +0.0103647f, -0.0240435f, -0.2183362f, -0.1704976f,
  -0.0220017f, +0.0915005f, +0.0998136f, +0.2882701f, -0.0183055f, +0.1941640f, +0.1594073f, +0.0432210f,
  -0.1893608f, +0.1186642f, +0.2186927f, +0.0078266f, -0.2176925f, -0.0144811f, -0.1732456f, -0.1012610f,
  +0.2606999f, +0.0546517f, +0.1755132f, +0.0894289f, -0.4288698f, -0.0114339f, +0.0820277f, +0.1051338f,
  -0.2603720f, +0.0423001f, +0.0754655f, +0.0326359f, -0.0917360f, -0.1716389f, -0.1421618f, -0.1409638f,
  +0.1891743f, +0.1180511f, -0.0733928f, -0.0439965f, -0.1544449f, +0.0777700f, -0.0969783f, +0.0831052f,
  +0.3519121f, -0.0399689f, +0.0341646f, +0.0642738f, -0.1328564f, -0.1328687f, -0.0061901f, +0.3937805f,
  -0.0427678f, -0.1955949f, +0.0163625f, +0.0044915f, -0.3535344f, -0.2377160f, -0.0588928f, -0.0463766f,
  -0.1952604f, -0.1562720f, +0.1044091f, +0.2871349f, -0.0966507f, -0.0640391f, +0.1050332f, -0.0172294f,
  +0.1300850f, -0.1749890f, -0.0646536f, -0.1482188f, +0.0756253f, -0.1908483f, +0.2043081f, +0.3288573f,
  +0.2546345f, -0.1111142f, -0.1469983f, +0.1130168f, -0.2314976f, -0.2690174f, +0.0736055f, -0.0492628f
);

const float biases[4] = float[4](
  -0.0631216f, +0.0267734f, +0.1051478f, -0.0141156f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer86 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0170102f, -0.0045806f, +0.0182218f, +0.0602197f, -0.1552177f, -0.1526130f, +0.1240860f, -0.1798824f,
  +0.0454558f, -0.1090343f, -0.0200626f, -0.1238604f, +0.0106384f, -0.0306191f, +0.1618196f, +0.0109363f,
  +0.2129911f, +0.1164467f, -0.2378176f, +0.1453555f, +0.0204824f, -0.1087912f, +0.1813556f, -0.1023852f,
  -0.1232769f, -0.1489733f, -0.1266207f, +0.0455538f, +0.0736521f, -0.0885074f, -0.0472663f, +0.0511142f,
  -0.1091181f, -0.3202974f, +0.0462970f, -0.0052657f, -0.3289955f, -0.1148367f, -0.1148481f, +0.1155040f,
  -0.0240116f, -0.1027680f, -0.0223254f, -0.1139417f, -0.0228508f, -0.0748837f, +0.0382760f, -0.0090436f,
  +0.0270885f, +0.1169242f, -0.1426492f, -0.1367135f, -0.0684722f, +0.1280046f, -0.0202467f, -0.0068022f,
  +0.0023624f, -0.1272437f, -0.0935363f, +0.0070933f, -0.4259918f, +0.0365053f, -0.1474506f, -0.0692005f,
  +0.0998603f, +0.1621919f, -0.1918001f, +0.0607742f, -0.0100972f, +0.1174319f, +0.2371752f, +0.0119744f,
  +0.0408432f, +0.0931186f, -0.0222112f, +0.1192876f, +0.0530408f, +0.1266954f, +0.1688002f, +0.2008203f,
  +0.1784009f, -0.0512524f, -0.0244565f, -0.0382287f, -0.2159862f, -0.0822247f, +0.3691214f, +0.2110009f,
  +0.1368931f, -0.0012373f, +0.1885827f, -0.2215738f, -0.0291864f, -0.1966692f, -0.0376133f, -0.0561974f,
  -0.0410711f, -0.1722865f, +0.0003512f, -0.0968241f, -0.1515118f, -0.1673227f, +0.0568765f, -0.1279801f,
  +0.0012812f, -0.1561705f, +0.0379363f, -0.2015798f, -0.0057954f, +0.0013058f, -0.0154973f, +0.0575741f,
  +0.2156930f, +0.1987015f, +0.2570080f, +0.0562807f, +0.0648305f, +0.0609078f, -0.1001746f, -0.1470864f,
  +0.0375171f, -0.0459576f, +0.1822553f, +0.0508484f, +0.0360176f, -0.0319268f, +0.0758418f, -0.1349671f,
  -0.0264012f, +0.2198793f, +0.1156528f, +0.1286505f, -0.2664225f, +0.0505167f, -0.1459230f, +0.3798802f,
  +0.0006895f, -0.1481123f, +0.2045766f, -0.0067682f, +0.0219364f, +0.0325579f, -0.1371313f, -0.3072401f,
  -0.0600673f, +0.0148936f, +0.1099548f, +0.1736655f, +0.1305479f, -0.2071065f, -0.0036790f, +0.1697996f,
  -0.2326414f, +0.0531337f, -0.0106076f, +0.1901825f, +0.1795018f, -0.0153571f, -0.2758914f, -0.1827603f,
  -0.1912125f, -0.0606256f, +0.2662397f, -0.0514196f, +0.1248412f, +0.0269937f, +0.1157366f, +0.2043989f,
  -0.2695839f, -0.0327156f, +0.2484844f, +0.4022322f, +0.0467360f, +0.0926602f, -0.0666330f, -0.1524854f,
  -0.0042107f, +0.0997586f, -0.0039274f, -0.1441857f, +0.2505082f, +0.0963308f, +0.2416652f, +0.2172196f,
  -0.1306231f, +0.0249126f, -0.0216297f, -0.3248305f, +0.0478632f, -0.0076284f, +0.0070633f, +0.1164502f,
  -0.1654499f, +0.0952833f, -0.1335078f, -0.1390272f, -0.1732840f, -0.0420468f, +0.1270721f, +0.0134294f,
  -0.1875432f, -0.0575942f, -0.2061243f, +0.1494913f, -0.0409237f, -0.0179988f, -0.1748675f, -0.3242185f,
  -0.0016595f, -0.0256440f, +0.0387273f, +0.0779592f, -0.2484144f, -0.1161401f, -0.0509939f, -0.3641306f,
  -0.1335481f, +0.1079130f, +0.1500617f, +0.1958116f, +0.0438971f, -0.2456229f, -0.0342293f, +0.0372096f,
  +0.1075093f, +0.0112242f, +0.5248518f, +0.1936812f, +0.1904760f, +0.0713498f, +0.4020716f, -0.1520647f,
  -0.2369729f, +0.1184842f, -0.2086547f, -0.1440519f, -0.0424081f, +0.1102828f, -0.0555236f, -0.2155203f,
  +0.0997053f, -0.1497181f, +0.2567714f, +0.1873976f, -0.1153138f, -0.4026746f, +0.2547089f, +0.3618359f,
  -0.2946213f, -0.2290154f, +0.1220542f, +0.0462436f, -0.1299474f, +0.0046617f, -0.1458789f, +0.1046656f,
  +0.0326036f, +0.0839678f, -0.2014358f, -0.1759985f, +0.0103912f, +0.0333214f, +0.0548807f, -0.0518618f,
  -0.0163619f, -0.1295998f, -0.1893529f, +0.0384743f, -0.0095323f, +0.1382541f, -0.1223006f, -0.1464323f,
  -0.0100128f, +0.0322755f, +0.0122682f, +0.0148085f, -0.3749047f, +0.2072802f, -0.0409217f, -0.2590280f,
  -0.0819616f, +0.1369666f, -0.0679405f, -0.2515084f, +0.4056915f, -0.0567355f, +0.1819359f, -0.2639173f
);

const float biases[4] = float[4](
  -0.0216376f, -0.0515524f, +0.0023311f, +0.0601891f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer86 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2089324f, +0.1966484f, +0.0931991f, +0.0938093f, -0.0003170f, -0.0341323f, +0.0642711f, -0.1564667f,
  -0.2399898f, +0.0065306f, +0.1438983f, +0.2949920f, -0.2186339f, +0.0610574f, +0.2129373f, +0.0773492f,
  -0.2808495f, +0.0018355f, +0.2255894f, -0.0648720f, -0.0118183f, -0.0579846f, +0.1053674f, -0.0448911f,
  -0.0763375f, +0.1644133f, -0.0010589f, -0.2955182f, -0.1752125f, -0.1755960f, +0.0588076f, -0.0612604f,
  -0.1677651f, -0.0371203f, -0.0169929f, +0.0276885f, -0.4068780f, +0.0422283f, +0.2060932f, +0.0201135f,
  -0.3189272f, -0.0261504f, +0.3320143f, +0.1538001f, +0.0890419f, -0.0440264f, -0.1421961f, +0.2495705f,
  -0.0114501f, -0.0592457f, -0.0446225f, +0.0550345f, -0.0476665f, -0.0974399f, -0.1651434f, -0.0227466f,
  -0.1342399f, -0.1155337f, +0.1092767f, -0.1505211f, +0.0547155f, +0.0288928f, -0.1327379f, +0.2920693f,
  -0.0884635f, -0.1724873f, +0.1390519f, -0.0549534f, +0.2713624f, -0.0493870f, -0.1270518f, +0.1972649f,
  -0.0833736f, -0.0107663f, +0.1548328f, -0.2739213f, +0.2908229f, +0.1400388f, +0.0838005f, +0.0071617f,
  -0.3200147f, +0.3544884f, +0.1913533f, +0.0531074f, -0.0388101f, -0.0614411f, -0.1530222f, -0.2145886f,
  -0.2315323f, +0.1735104f, -0.1162688f, +0.1301944f, +0.0694703f, -0.2366034f, +0.1328110f, +0.2292816f,
  +0.1495576f, -0.0659618f, +0.1701828f, -0.1914253f, +0.3098022f, +0.0229227f, -0.0034430f, +0.0251709f,
  -0.2384818f, -0.1185101f, +0.1766870f, +0.1771425f, -0.4479308f, +0.1255499f, -0.0573796f, +0.0876149f,
  -0.2942550f, -0.0115294f, -0.2404362f, +0.0247042f, +0.0216391f, -0.1456401f, +0.0174735f, +0.0038408f,
  -0.0353960f, +0.1219999f, +0.1387823f, -0.3143158f, +0.3202201f, +0.1525525f, +0.0089673f, +0.1082549f,
  -0.0595689f, +0.1113951f, -0.0484225f, -0.1315311f, -0.3628908f, -0.0338631f, -0.0073836f, -0.0045296f,
  -0.0607924f, +0.0265119f, -0.0332354f, -0.0932433f, -0.0000496f, -0.0555760f, -0.0030781f, +0.0996433f,
  -0.0612715f, +0.0528620f, -0.0158658f, -0.0245782f, +0.1364521f, +0.0104999f, -0.3718307f, -0.0906129f,
  -0.0136270f, -0.0121723f, -0.0044405f, -0.1306012f, +0.0625188f, -0.2146391f, -0.0238645f, -0.1808509f,
  -0.0111990f, +0.1701837f, +0.2595851f, -0.0375111f, -0.0932791f, +0.1564679f, +0.1334497f, -0.0328983f,
  +0.0602226f, -0.0037826f, +0.0393484f, -0.2239277f, +0.0207094f, +0.1769798f, +0.1202778f, +0.1827084f,
  +0.1571273f, +0.3589398f, +0.1802443f, +0.1825558f, +0.2134594f, +0.0892410f, -0.1019820f, -0.0265305f,
  +0.2848577f, +0.2565408f, +0.0403513f, -0.0306603f, +0.0788803f, +0.1713939f, +0.2442415f, -0.0631322f,
  +0.0487869f, -0.0465682f, -0.0948806f, +0.2425219f, +0.1149884f, -0.0484126f, -0.1095440f, +0.0214964f,
  +0.0658318f, +0.0227073f, -0.1274882f, +0.4312590f, +0.1458581f, -0.1955492f, -0.0758200f, -0.1610097f,
  +0.0308857f, -0.1335129f, -0.0234343f, -0.0278837f, +0.0558167f, -0.0432184f, +0.0696980f, -0.2453079f,
  +0.0380499f, -0.1023590f, -0.2112009f, -0.3898671f, -0.1488186f, -0.0249596f, -0.0735255f, -0.0653950f,
  +0.2742499f, -0.0528082f, +0.1901637f, +0.0920595f, +0.1976439f, +0.0377710f, -0.0831383f, -0.0323561f,
  +0.2308844f, -0.1089955f, -0.1055527f, +0.0407498f, +0.1212937f, +0.0955595f, -0.0378106f, -0.0093475f,
  +0.4323253f, -0.1900512f, -0.0213094f, -0.1885919f, -0.2499039f, -0.4039179f, +0.0363052f, -0.2466392f,
  +0.1481798f, -0.0494086f, -0.1879529f, -0.0471310f, +0.2648236f, -0.0658911f, -0.0070536f, -0.4402861f,
  +0.2300930f, -0.0556846f, -0.1148616f, -0.0440759f, +0.0293567f, +0.1312256f, +0.0099124f, +0.1054940f,
  +0.1122446f, -0.0663415f, -0.1023976f, +0.0337169f, -0.0520773f, -0.0537227f, -0.1398743f, -0.1129336f,
  +0.1998476f, -0.1649171f, +0.0231243f, +0.1535086f, +0.4553519f, -0.1057549f, -0.1135159f, -0.1281566f,
  +0.1704650f, -0.1089077f, -0.2179426f, +0.4555915f, -0.1631788f, +0.0407535f, +0.0166906f, +0.0577768f
);

const float biases[4] = float[4](
  -0.0108655f, +0.0258146f, -0.0723308f, -0.0009129f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer87 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2009593f, +0.0971700f, -0.1976101f, +0.1781384f, -0.0748781f, +0.1244845f, +0.2622363f, -0.1602539f,
  +0.0198322f, -0.1487561f, -0.0303369f, -0.1440592f, +0.0275964f, +0.0550663f, -0.0281768f, +0.0212931f,
  +0.0412301f, +0.0887420f, +0.0460887f, -0.0284451f, -0.2686691f, +0.2430152f, -0.0591768f, -0.0599569f,
  +0.2899798f, +0.4993220f, +0.0825253f, -0.3214395f, -0.0024936f, -0.5992782f, +0.7738739f, -0.0501842f,
  -0.0414352f, +0.0792370f, +0.4021159f, -0.4184128f, +0.2801927f, -0.3571050f, +0.3328255f, -0.0230919f,
  -0.0744303f, -0.0744359f, -0.1665402f, +0.0669943f, +0.1782171f, +0.1878952f, +0.0518941f, +0.4413126f,
  +0.6394171f, +0.1778296f, -0.0811345f, +0.1254161f, +0.2606294f, -0.1839600f, +0.4934449f, +0.0054317f,
  +0.0398969f, +0.0147740f, +0.1367511f, +0.3789584f, +0.1492600f, +0.1964442f, +0.0499496f, -0.4981419f,
  -0.1374833f, +0.2802531f, +0.0898403f, +0.0314297f, +0.2019363f, +0.1113322f, -0.0261858f, +0.1777712f,
  +0.2374754f, -0.1012991f, +0.2076371f, -0.1672893f, +0.0942770f, -0.0113701f, +0.0278671f, -0.1201383f,
  -0.2143788f, -0.0530648f, -0.0497635f, -0.2882930f, +0.1698135f, +0.0302121f, +0.1652136f, +0.0744165f,
  -0.1399269f, -0.2906058f, -0.1757761f, -0.2824817f, +0.0548471f, +0.0530896f, -0.0419336f, -0.4546919f,
  +0.1233108f, -0.0525367f, -0.0126123f, -0.4574606f, +0.4240485f, -0.2025640f, -0.0846933f, +0.4256360f,
  -0.2081247f, -0.4249266f, -0.0084494f, -0.4204100f, -0.0978604f, -0.2432722f, +0.1922749f, +0.0847964f,
  +0.0690193f, -0.0798093f, -0.0218220f, -0.0856565f, -0.2607990f, +0.2914250f, -0.0002441f, -0.1080263f,
  -0.6446691f, -0.1784730f, -0.0278772f, -0.0564259f, +0.2752249f, -0.3178135f, -0.1010998f, -0.0055802f,
  -0.2674428f, +0.1303092f, +0.2974444f, +0.0134851f, +0.1828507f, -0.0100427f, +0.2329323f, +0.2001202f,
  -0.1114420f, -0.0636575f, +0.0800451f, -0.0462148f, +0.2426772f, +0.1865049f, +0.2358412f, +0.1139228f,
  +0.1498008f, -0.0872291f, +0.1260443f, -0.0248682f, +0.0706509f, +0.1774962f, -0.1394434f, +0.0553919f,
  +0.1354243f, -0.3032818f, -0.0272694f, +0.2016304f, -0.0013406f, +0.0651541f, -0.3012261f, -0.2347809f,
  +0.0458936f, -0.1088089f, -0.0812570f, -0.0032264f, +0.0888518f, +0.0685167f, -0.0066137f, +0.1227070f,
  +0.1093287f, -0.0264071f, +0.1675700f, +0.0645181f, -0.0491969f, +0.0312202f, +0.0892777f, +0.0188097f,
  +0.0045182f, +0.2820706f, +0.0588154f, +0.1908017f, +0.0675734f, -0.3117327f, +0.4397282f, -0.1098014f,
  +0.1279206f, +0.4054398f, +0.5744069f, -0.3580945f, +0.3245329f, -0.1448295f, +0.2628748f, -0.3382799f,
  +0.0566455f, +0.0561835f, +0.1092595f, -0.0515714f, +0.0101612f, +0.1507052f, +0.1199441f, -0.0932175f,
  +0.2402735f, -0.2825679f, +0.1625760f, -0.0475239f, +0.0988385f, -0.1008661f, +0.0970843f, -0.0205882f,
  +0.1017997f, +0.0932752f, -0.0828131f, +0.1155991f, +0.2303530f, -0.0219821f, -0.0723529f, -0.0437203f,
  +0.0921205f, +0.0516346f, -0.0310061f, -0.4382195f, +0.2902700f, +0.1002093f, -0.0536382f, +0.0812768f,
  -0.0299686f, -0.2051731f, +0.0786434f, -0.3704292f, +0.2411108f, -0.1027902f, -0.0477590f, +0.0215219f,
  -0.2142733f, -0.1581116f, -0.3272641f, +0.0168475f, +0.3281687f, +0.1122917f, +0.1022202f, +0.3092124f,
  -0.0311181f, -0.1084363f, +0.1880577f, -0.2089990f, +0.2744971f, +0.3246407f, +0.1832408f, -0.2116232f,
  +0.0704790f, +0.0625377f, -0.1922143f, -0.1610438f, +0.1081657f, -0.0130643f, -0.1143640f, +0.2025840f,
  +0.3460814f, -0.2491742f, -0.0216978f, +0.0104434f, +0.1048671f, +0.1061819f, +0.0475351f, -0.0452056f,
  +0.1699897f, -0.1004653f, +0.2439893f, -0.3649863f, -0.0578249f, +0.0300761f, +0.0712416f, +0.1265152f,
  +0.0466762f, -0.0436185f, -0.2727653f, +0.0247320f, +0.0606589f, -0.3330435f, -0.1223591f, +0.0051266f,
  -0.3941506f, -0.4180834f, -0.2911873f, -0.0981802f, -0.0764032f, -0.1770604f, -0.0249501f, +0.0182457f
);

const float biases[4] = float[4](
  -0.1247570f, +0.0365723f, -0.1063432f, -0.1186557f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer87 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0745673f, -0.1290153f, -0.1146174f, +0.0259187f, +0.0917918f, -0.2288109f, -0.0590386f, +0.0345410f,
  +0.0091253f, -0.0931007f, +0.0174387f, -0.0371901f, +0.0156779f, -0.0599934f, +0.0397193f, -0.0376295f,
  -0.0170453f, -0.0269208f, -0.0674377f, -0.0914602f, -0.1130203f, -0.1654002f, +0.0114743f, +0.0348364f,
  -0.1482083f, +0.1571421f, -0.1631204f, +0.0585997f, +0.1476112f, +0.0368254f, -0.2802101f, +0.1165115f,
  +0.0668252f, +0.0926811f, -0.0617112f, -0.0070070f, -0.1129381f, +0.0706593f, +0.1883428f, -0.1485110f,
  -0.1262101f, -0.1131802f, -0.0632286f, -0.1500893f, -0.0132305f, +0.1524410f, -0.0867582f, -0.1094852f,
  -0.2596222f, +0.0300527f, -0.0148772f, +0.1729456f, -0.0746142f, -0.1861341f, -0.1562213f, +0.1173725f,
  -0.0380947f, +0.0651650f, +0.1029395f, +0.0950161f, -0.2112977f, -0.0283973f, +0.0430370f, +0.1678407f,
  +0.1216280f, +0.1907659f, -0.1712398f, -0.0451943f, -0.1091954f, +0.0671496f, +0.0252453f, +0.4263470f,
  +0.0595720f, -0.1086049f, +0.2184074f, +0.1506605f, -0.1064191f, -0.1015661f, -0.0452884f, -0.0942005f,
  +0.1338425f, +0.0240446f, -0.0906444f, -0.1518672f, -0.1943823f, +0.1938336f, +0.2786548f, +0.0201186f,
  +0.0688374f, -0.0993669f, +0.0760593f, -0.1078861f, +0.1211209f, -0.1225503f, -0.0364993f, -0.0326854f,
  +0.0963248f, +0.1645021f, -0.0512092f, +0.0859393f, -0.1806088f, -0.1933803f, -0.2552930f, +0.0032911f,
  -0.1291022f, -0.1886276f, +0.0426432f, -0.2018109f, -0.1618945f, +0.1008490f, +0.0364299f, -0.1399077f,
  +0.1409787f, -0.0999948f, +0.2272570f, -0.1372489f, +0.1912109f, -0.0381069f, +0.0555163f, -0.1229219f,
  +0.0029188f, +0.2040294f, +0.0415632f, +0.1695653f, -0.1407366f, -0.2181803f, +0.0504473f, +0.1711368f,
  +0.1667557f, -0.1496107f, +0.1217503f, -0.1144729f, +0.1231419f, +0.3233141f, -0.0264029f, -0.1052313f,
  -0.1148175f, -0.4684842f, +0.0895692f, -0.4424045f, +0.0837921f, -0.2276996f, +0.0450983f, -0.3092849f,
  -0.1156066f, +0.1115848f, +0.0406857f, +0.0821209f, -0.0088125f, -0.1789907f, -0.1359331f, -0.0531406f,
  -0.2220064f, -0.0048830f, -0.0914183f, -0.0570174f, +0.0176472f, -0.2234863f, -0.0330688f, -0.0382473f,
  +0.2856734f, -0.0086482f, -0.0521359f, +0.0696538f, -0.0728608f, +0.1294666f, +0.1369483f, +0.3099100f,
  +0.1352762f, +0.2311236f, +0.0362560f, +0.1116416f, +0.0498127f, +0.2066884f, -0.1968645f, +0.1798799f,
  -0.1755857f, -0.0604646f, -0.0800204f, +0.1404371f, +0.0791539f, -0.3324661f, +0.1822471f, -0.1932228f,
  +0.1988704f, -0.2559270f, +0.1052916f, +0.1891831f, -0.0137360f, -0.0693698f, +0.1813415f, +0.1661298f,
  -0.0750836f, +0.3078020f, -0.0220966f, -0.1474952f, -0.1798823f, +0.0118669f, -0.4195144f, -0.1756688f,
  -0.1739407f, +0.1909609f, +0.0324341f, +0.1063908f, -0.0564173f, -0.0572941f, +0.3229953f, -0.0768056f,
  -0.2454891f, +0.4025062f, +0.0466891f, +0.2502158f, -0.0362355f, +0.2621894f, -0.1751108f, -0.0598508f,
  -0.0004348f, +0.2153663f, -0.0446431f, -0.0907200f, -0.0372716f, +0.0184386f, -0.1182285f, +0.0612663f,
  -0.1194365f, -0.0315954f, +0.0360367f, -0.1140464f, +0.0106372f, -0.0208807f, -0.0299390f, -0.2769075f,
  +0.0814990f, -0.1390110f, +0.1206698f, -0.0849237f, -0.2629265f, -0.1001772f, +0.1275145f, -0.0326425f,
  -0.0105803f, -0.1052754f, +0.0789024f, +0.0479826f, -0.0944692f, -0.0010392f, +0.0033068f, +0.0794425f,
  -0.3771683f, +0.3084408f, +0.0371727f, +0.0042940f, +0.0647010f, -0.0585354f, -0.0288669f, +0.0791675f,
  -0.1195948f, -0.0060936f, -0.0383763f, -0.1718927f, +0.0688071f, -0.0862532f, +0.1335521f, -0.1183528f,
  +0.0230450f, +0.0830410f, -0.0517196f, +0.1489673f, -0.1145421f, +0.0275065f, +0.1499393f, -0.0339203f,
  +0.0423317f, +0.1177628f, +0.1904505f, -0.1270648f, -0.0782919f, +0.2345421f, +0.1088341f, -0.0474316f,
  -0.1477179f, -0.0777939f, -0.0843812f, -0.0892311f, +0.0446484f, +0.0681063f, +0.0505518f, -0.1757657f
);

const float biases[4] = float[4](
  -0.0077363f, -0.0510445f, +0.0212910f, +0.0641271f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer88 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0035773f, -0.1108770f, +0.4218134f, +0.2858038f, +0.0953305f, -0.0372423f, +0.2032481f, +0.0495535f,
  -0.0048770f, +0.4568564f, -0.1515672f, -0.1998250f, -0.1758421f, -0.3134452f, +0.1438064f, -0.0457896f,
  -0.2926190f, +0.3527154f, +0.0051265f, +0.0565070f, +0.1653968f, -0.0081318f, -0.0338957f, +0.0642609f,
  +0.1519920f, -0.1266338f, -0.2240383f, +0.0026322f, +0.3447273f, +0.0115211f, -0.2504610f, -0.1876485f,
  +0.5512208f, -0.1588989f, +0.0531638f, +0.0677217f, -0.0443927f, -0.2462040f, +0.1271665f, +0.2763783f,
  -0.1241669f, +0.1650288f, +0.0073365f, -0.0239918f, +0.0661540f, -0.1224497f, -0.1133433f, -0.1806611f,
  -0.0074095f, -0.0294730f, -0.0599766f, +0.1437256f, -0.0073668f, -0.0568984f, -0.0781589f, -0.1146951f,
  +0.0384876f, -0.2286221f, +0.0456095f, -0.2055498f, +0.0482009f, +0.0336691f, +0.0468574f, -0.1726559f,
  +0.1306776f, -0.1583520f, -0.0916481f, +0.0252475f, +0.0090933f, +0.0704468f, +0.0376644f, +0.0250178f,
  -0.0342006f, -0.1437317f, -0.1957730f, +0.1923427f, -0.1102118f, -0.0055333f, -0.0409284f, -0.1277868f,
  -0.0130684f, -0.1608987f, +0.1027849f, -0.1981051f, +0.0384665f, +0.2270103f, -0.1716455f, +0.1692136f,
  +0.0472850f, -0.0225218f, +0.2435777f, +0.1034725f, +0.1707055f, -0.1974759f, -0.2267324f, -0.1088283f,
  -0.1157549f, +0.0746358f, -0.1902228f, +0.0780258f, -0.1073627f, -0.0754035f, +0.1865066f, -0.0539645f,
  +0.2335610f, +0.0499708f, -0.2256961f, +0.1861723f, +0.0842147f, +0.1976457f, -0.0236865f, +0.2961199f,
  -0.2401383f, -0.1114966f, +0.0099114f, -0.1479634f, -0.0572916f, +0.0716519f, -0.3783302f, +0.0833767f,
  -0.1163013f, +0.0217328f, -0.1693117f, +0.1057400f, -0.4026347f, -0.0812637f, +0.1714071f, +0.2548901f,
  -0.0779665f, -0.1482114f, -0.0385331f, -0.1677298f, -0.0220864f, +0.2984714f, -0.0659909f, -0.0647562f,
  -0.1493012f, -0.1080947f, -0.1045143f, -0.0874717f, -0.1225822f, -0.0897602f, -0.1763414f, +0.0874551f,
  +0.0629869f, -0.1563530f, +0.0789573f, +0.0051439f, +0.1490746f, -0.1700749f, +0.0118449f, +0.1195576f,
  -0.1119787f, +0.0384287f, -0.1816100f, -0.1746556f, -0.2551085f, +0.1274453f, -0.0073962f, +0.1673201f,
  +0.0274557f, -0.1767213f, -0.1794838f, -0.2116209f, +0.1982220f, -0.0304391f, +0.2232847f, -0.2577743f,
  +0.0190076f, +0.0073182f, -0.4552167f, -0.0594841f, -0.1793449f, +0.0427638f, -0.0050495f, -0.0738429f,
  +0.1105447f, +0.2791216f, +0.0476471f, +0.0568909f, +0.0850176f, -0.3001167f, -0.1459864f, -0.1033663f,
  -0.3032913f, +0.2810535f, -0.1303029f, -0.0930459f, +0.0541377f, -0.0095942f, +0.0910709f, +0.0008626f,
  -0.0323706f, +0.0093880f, +0.2605093f, +0.1022948f, -0.0214044f, -0.0862913f, +0.0962040f, -0.3070906f,
  -0.0876321f, +0.1373377f, -0.1226542f, +0.0706571f, -0.1100448f, +0.0120602f, +0.0290170f, -0.0762298f,
  -0.1951401f, -0.2998274f, +0.0016887f, -0.0571412f, -0.0147494f, -0.2160462f, +0.0442942f, +0.0142822f,
  +0.1625429f, +0.2146415f, -0.1003706f, +0.1094978f, +0.0584231f, +0.0847176f, -0.0109783f, +0.1147516f,
  +0.0179701f, -0.1576981f, +0.1288312f, -0.0902871f, +0.1138529f, +0.0608517f, -0.0110544f, +0.1093177f,
  +0.2927047f, +0.1184028f, -0.0160526f, -0.1559848f, -0.5432143f, +0.1482238f, +0.0067619f, -0.2070962f,
  +0.0973121f, -0.1025104f, +0.3473473f, +0.1076252f, +0.1321635f, -0.2009820f, +0.0033024f, -0.0456533f,
  +0.8186454f, -0.2561798f, -0.1231820f, +0.0742208f, +0.2442999f, +0.2247780f, -0.0191263f, -0.4294593f,
  +0.2677634f, -0.0310560f, +0.1048723f, +0.0811686f, +0.0143545f, +0.1305163f, -0.1464857f, +0.1336958f,
  -0.1117347f, -0.0653524f, -0.0512107f, +0.3304685f, -0.0652619f, +0.0304283f, +0.0827495f, +0.0215535f,
  +0.1888540f, +0.4463217f, -0.1523255f, +0.1229521f, -0.0049111f, +0.0971873f, +0.2260045f, -0.0233359f,
  -0.0566965f, +0.1909059f, +0.0183064f, -0.1449276f, +0.0641062f, -0.0012191f, -0.0635730f, -0.2724837f
);

const float biases[4] = float[4](
  +0.0001735f, -0.0368739f, -0.0101114f, +0.0507441f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer88 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0680663f, -0.1984004f, +0.0357785f, +0.0907660f, +0.0328311f, +0.0052069f, -0.1687909f, -0.1644423f,
  -0.0024579f, -0.1039296f, +0.1310713f, -0.1162549f, -0.1716559f, +0.0693571f, -0.1905554f, +0.2058987f,
  +0.1562323f, +0.2477691f, +0.0233588f, +0.1279206f, -0.2262921f, -0.0234787f, -0.0622411f, -0.0281330f,
  -0.1226570f, -0.1640581f, -0.4906847f, +0.3396132f, -0.1537161f, +0.0908657f, -0.0718391f, -0.0821412f,
  -0.1370142f, +0.0328035f, +0.0029378f, -0.1670999f, -0.2795332f, +0.2727157f, -0.2624221f, -0.2864664f,
  +0.4424380f, +0.1735358f, -0.0781900f, +0.1343353f, -0.1732887f, +0.1113761f, +0.0715780f, +0.0270612f,
  +0.1989982f, +0.0988057f, +0.1365065f, -0.2732016f, +0.1207636f, +0.0142101f, -0.1770815f, +0.3074763f,
  +0.0195077f, -0.0852372f, +0.1881955f, -0.2212278f, -0.2344885f, +0.0248516f, +0.0291133f, +0.2106687f,
  +0.1396350f, -0.0746793f, -0.0917557f, -0.0675817f, -0.0249496f, +0.0912603f, +0.0283775f, +0.0093418f,
  +0.1495454f, -0.1508976f, +0.3128308f, +0.1147550f, -0.0617984f, +0.3557527f, -0.2823235f, -0.1312049f,
  -0.0094289f, +0.0354722f, -0.0848585f, +0.3629314f, -0.3329896f, +0.1100498f, -0.1763232f, -0.2057738f,
  -0.2478602f, +0.3137387f, -0.1235354f, -0.0720387f, -0.1844866f, -0.2989929f, +0.0393908f, -0.0555051f,
  -0.1102087f, -0.0819262f, +0.3034506f, +0.0797223f, -0.1148883f, -0.2121856f, -0.1128884f, -0.1412556f,
  +0.2290017f, +0.0868088f, +0.0728261f, +0.4243245f, -0.0517566f, +0.1815241f, -0.1144358f, +0.2539303f,
  +0.1819210f, -0.1927524f, -0.1655157f, -0.0503655f, +0.0679898f, -0.1945518f, -0.0587077f, +0.1716913f,
  +0.0662042f, -0.4403759f, +0.0791575f, +0.0344224f, -0.0937752f, -0.1951172f, -0.2402670f, -0.1259637f,
  +0.2258181f, +0.1243881f, -0.2191615f, -0.0653349f, -0.0129781f, +0.1531812f, -0.0292597f, -0.1713193f,
  -0.0222297f, +0.1235343f, -0.1359870f, -0.1925929f, -0.1009465f, -0.0385134f, +0.0150295f, -0.0464131f,
  +0.0724694f, +0.0308167f, -0.0416532f, +0.1431073f, -0.0499714f, -0.0224246f, -0.1421366f, -0.0174352f,
  +0.1115230f, +0.2648906f, +0.0437898f, +0.1246611f, -0.1822331f, +0.0971438f, -0.0575394f, -0.1288544f,
  -0.0297784f, +0.2779411f, -0.2010813f, +0.0392063f, +0.0156772f, -0.1859372f, +0.3227373f, -0.0150690f,
  -0.0938819f, +0.3108073f, -0.4742149f, -0.0885969f, +0.1752694f, -0.0552069f, -0.1163515f, +0.2099917f,
  -0.3764039f, -0.1006102f, -0.3505771f, +0.0257790f, +0.0785554f, +0.2074243f, +0.1676121f, +0.2234973f,
  -0.7990252f, +0.0480555f, -0.2883862f, -0.3341734f, -0.0435500f, -0.1400293f, +0.1366036f, +0.1202503f,
  +0.0209636f, +0.2472565f, -0.1634753f, -0.2136188f, -0.0296579f, +0.0127592f, +0.0340714f, -0.3732637f,
  +0.0249475f, +0.1811972f, +0.1521195f, -0.1297053f, +0.0501585f, +0.2320239f, -0.0267299f, +0.0157807f,
  -0.2078338f, -0.2977659f, -0.1368766f, +0.3200688f, -0.0086912f, -0.1266511f, +0.1115760f, -0.0909593f,
  +0.1544296f, +0.0337701f, -0.3806067f, +0.0662633f, -0.1924889f, +0.0964105f, -0.0838584f, -0.1381219f,
  -0.1239636f, -0.1585729f, +0.0614091f, +0.1707170f, -0.3189627f, +0.2294078f, -0.0889450f, -0.0967849f,
  +0.1916371f, -0.2696888f, -0.0414093f, -0.0514117f, -0.0767096f, -0.0894306f, +0.1581183f, -0.0738627f,
  -0.0623971f, -0.1694561f, +0.0426448f, +0.0467846f, +0.2232089f, -0.1610055f, -0.1335103f, -0.0846326f,
  +0.5764185f, -0.0517637f, +0.2884763f, -0.4386511f, -0.0029493f, +0.0273110f, -0.0544027f, +0.0062211f,
  -0.0958207f, -0.2034313f, -0.0318373f, +0.1169339f, +0.2263919f, +0.2509839f, -0.0737434f, -0.0549306f,
  -0.0188839f, +0.1102232f, +0.1603971f, +0.0152509f, +0.2385765f, +0.1400249f, -0.2114698f, +0.1467443f,
  -0.1727499f, -0.0224948f, -0.1383971f, -0.2180271f, +0.2879431f, +0.2304272f, +0.2416335f, +0.0933550f,
  -0.0541095f, +0.0520476f, +0.0497565f, -0.1792982f, +0.1725800f, +0.4428037f, +0.2410468f, +0.0120646f
);

const float biases[4] = float[4](
  -0.0074822f, +0.0108124f, -0.0167410f, +0.0044642f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer89 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1047571f, -0.0809480f, -0.3154928f, +0.0523786f, +0.0438343f, +0.0011336f, -0.2601806f, -0.1356166f,
  +0.0900111f, -0.0843393f, +0.0177065f, +0.1578126f, -0.0844266f, +0.1631667f, +0.0618937f, +0.0941086f,
  -0.0607208f, +0.0904792f, -0.0835468f, -0.0417992f, +0.1368705f, -0.0143363f, -0.1104351f, +0.0704249f,
  +0.0936520f, +0.2833128f, -0.0259107f, +0.0774394f, +0.1008062f, -0.1396081f, -0.0069975f, +0.1573349f,
  +0.0318709f, +0.2523054f, +0.0709377f, +0.2541426f, +0.2053777f, -0.0605930f, +0.0235227f, -0.0789823f,
  +0.0122451f, +0.0757219f, -0.0727637f, +0.1330568f, -0.0451633f, -0.0641556f, -0.0211618f, +0.1091216f,
  -0.2025767f, -0.2156680f, -0.0028534f, +0.1146269f, -0.1746960f, -0.0447097f, +0.2567367f, +0.0946051f,
  -0.3405213f, +0.0059243f, -0.0454727f, -0.1248187f, -0.1377742f, -0.0573503f, -0.0019798f, +0.2340309f,
  +0.0290173f, -0.0597009f, +0.0409680f, -0.0567819f, -0.0998744f, -0.0712758f, +0.0124801f, -0.0335064f,
  +0.2532701f, -0.0852110f, -0.0578001f, -0.1817923f, +0.1663439f, +0.0092602f, +0.2522659f, +0.0179844f,
  +0.1916117f, +0.3750375f, +0.3557153f, +0.8804424f, +0.1736568f, -0.3002059f, +0.1774169f, -0.2092741f,
  -0.0235552f, +0.2033556f, -0.0355499f, +0.3041540f, +0.0522566f, +0.5748832f, +0.2950647f, -0.2921007f,
  +0.1007971f, +0.0909959f, -0.0422558f, -0.0394681f, +0.0051982f, +0.0218687f, -0.0890142f, -0.0423793f,
  -0.2309875f, -0.0476662f, +0.1353855f, +0.2013531f, +0.1322727f, -0.2003850f, +0.0643904f, +0.0154763f,
  -0.2118220f, -0.1300598f, +0.2750494f, +0.0415291f, +0.0628764f, +0.2766286f, +0.0891971f, +0.0195717f,
  -0.0492583f, +0.0638715f, -0.0651667f, +0.0443950f, +0.0473594f, +0.0031591f, +0.0496195f, -0.1434331f,
  +0.0265995f, +0.0347595f, +0.0160665f, +0.0467055f, +0.0052971f, -0.1480167f, +0.0039401f, -0.0723487f,
  -0.0102344f, -0.0354766f, +0.0238682f, -0.0355683f, +0.0595620f, -0.0364552f, -0.0211928f, -0.0592470f,
  +0.2939009f, -0.0376094f, +0.4202046f, -0.2730349f, -0.0816534f, +0.0526340f, +0.1436125f, +0.1206519f,
  -0.1978958f, -0.1693947f, +0.0973206f, -0.3048415f, +0.5280501f, +0.0816600f, -0.2503689f, -0.1060808f,
  +0.1840307f, +0.0409923f, +0.1745567f, -0.1474909f, +0.1886306f, +0.0450511f, +0.0036366f, -0.2008047f,
  -0.0977235f, +0.0565283f, -0.0887000f, -0.4499453f, +0.1903507f, +0.0013411f, -0.1890847f, +0.0137169f,
  +0.0060483f, +0.2305302f, -0.0648169f, +0.0125913f, +0.3324355f, +0.1397465f, -0.0845617f, -0.2128632f,
  +0.1876037f, -0.1515194f, +0.0281085f, -0.2156650f, +0.0019152f, +0.1994780f, +0.0245659f, -0.1969243f,
  -0.0752869f, -0.3757996f, +0.1411351f, +0.0837388f, +0.0351335f, -0.1550193f, -0.0319002f, +0.0285485f,
  -0.2905702f, -0.0555301f, +0.1683199f, -0.0442965f, +0.1657259f, -0.3254343f, +0.1025773f, +0.0987444f,
  +0.1466577f, +0.1731009f, -0.1272158f, +0.3200685f, -0.0055551f, +0.2480704f, -0.2670263f, -0.3767723f,
  +0.0171952f, -0.1770363f, -0.0711402f, +0.2221156f, +0.0703924f, -0.2051788f, -0.2322057f, -0.0560307f,
  +0.0583295f, +0.2439525f, -0.0459833f, -0.2778296f, +0.0062072f, -0.0730717f, -0.2072936f, +0.0275156f,
  +0.0295058f, +0.0022574f, -0.1621230f, +0.0727269f, +0.0385745f, +0.1533990f, -0.0063016f, +0.2298561f,
  -0.3117784f, +0.0255894f, -0.1065703f, -0.2330266f, -0.1204013f, -0.2591475f, -0.1330054f, +0.2718452f,
  +0.2155792f, +0.1507058f, -0.5128802f, +0.1844104f, -0.0196327f, +0.2082470f, -0.1162763f, +0.3721158f,
  +0.1716002f, -0.1307950f, +0.3317400f, +0.3229157f, -0.0381277f, -0.0399723f, -0.1933803f, +0.1917255f,
  +0.0108362f, +0.1021110f, -0.1266896f, +0.0529292f, -0.2843658f, -0.2917205f, +0.1546898f, -0.0796869f,
  +0.1117430f, +0.0030886f, +0.3178548f, +0.0495938f, -0.1627765f, +0.0339071f, +0.2524376f, +0.0264167f,
  -0.0763203f, -0.0140671f, -0.1731333f, -0.0762164f, +0.0157387f, -0.2224730f, -0.0147190f, +0.1465176f
);

const float biases[4] = float[4](
  +0.0374417f, -0.1246856f, -0.0156702f, +0.0353086f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer89 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1021967f, +0.0941584f, +0.0765964f, +0.0838365f, -0.2031722f, +0.0360366f, -0.1595460f, -0.0034017f,
  +0.0780904f, +0.2774492f, -0.0894234f, +0.0520418f, -0.1626421f, +0.0402526f, +0.1887333f, -0.2015944f,
  -0.2187229f, -0.0681398f, +0.1012142f, +0.1206764f, +0.0178257f, -0.2343577f, -0.0605279f, +0.0322806f,
  +0.2094889f, -0.0129067f, +0.0908796f, -0.0649825f, -0.1347017f, +0.1783805f, -0.1152343f, +0.1265512f,
  -0.2741630f, +0.0057853f, -0.2150935f, -0.2221258f, +0.0640575f, +0.1744750f, -0.1682790f, +0.2132117f,
  +0.2133094f, -0.0058435f, -0.0868658f, +0.0036392f, +0.0621132f, -0.2516152f, -0.0662734f, -0.0098060f,
  +0.0620652f, +0.0195052f, -0.2053217f, -0.0408519f, +0.0106542f, -0.0111729f, +0.0386636f, -0.0576620f,
  -0.0352096f, +0.0170055f, -0.1041106f, -0.1358991f, -0.1007878f, -0.1373955f, -0.3948502f, +0.0462679f,
  -0.3017923f, +0.1581155f, +0.0319893f, -0.1762767f, +0.1267549f, -0.0044086f, -0.0098891f, +0.0429406f,
  +0.0777780f, -0.0168232f, -0.2034016f, +0.1003432f, -0.0922684f, +0.0957023f, +0.0807945f, +0.0330233f,
  +0.0208037f, -0.0779242f, -0.2158471f, +0.2343979f, +0.0596737f, +0.1663557f, +0.0232661f, +0.0830450f,
  +0.1028611f, -0.0797329f, +0.2283011f, +0.0488829f, -0.0352780f, -0.1654109f, +0.0201928f, +0.0092466f,
  +0.0737919f, +0.0559762f, +0.2330929f, +0.1068266f, +0.2087260f, -0.1653638f, -0.1405178f, -0.2546644f,
  +0.0644046f, -0.0883319f, +0.1360524f, -0.3298639f, -0.1963582f, -0.3946319f, +0.6077704f, -0.5770575f,
  -0.1718633f, +0.0330820f, -0.5082319f, -0.3747664f, +0.2196459f, +0.0573875f, +0.2464445f, -0.0800767f,
  +0.0861340f, -0.2229015f, -0.1656829f, +0.0630841f, +0.0652668f, +0.3082246f, +0.0035768f, -0.0990766f,
  +0.2187154f, -0.1738532f, +0.4132124f, +0.4712254f, -0.0415033f, +0.1939536f, -0.3313941f, +0.0450277f,
  -0.0749102f, -0.0591944f, +0.3438130f, +0.1011960f, -0.3723833f, +0.2505937f, -0.0606339f, -0.4845471f,
  -0.1896905f, +0.3598683f, +0.0274516f, -0.3621097f, +0.2430331f, +0.0326024f, +0.0494525f, +0.0894758f,
  +0.1064219f, -0.4060638f, +0.0732035f, +0.3492121f, -0.1553185f, -0.0138982f, +0.0762659f, -0.0478293f,
  +0.1060411f, +0.0314923f, -0.0182046f, -0.1523012f, +0.0126175f, -0.1384388f, -0.0629112f, -0.0161191f,
  +0.1867712f, -0.0408798f, +0.3108251f, -0.1332954f, +0.0846414f, +0.2022848f, -0.3941975f, +0.4575301f,
  -0.0750367f, -0.5632753f, -0.3831483f, +0.0123609f, -0.2377939f, -0.3932946f, +0.4576497f, -0.0893455f,
  -0.0754323f, +0.2013113f, +0.3512888f, -0.0815163f, +0.1819694f, +0.0637981f, +0.0175712f, -0.7105421f,
  +0.0849560f, +0.1268200f, -0.1452281f, -0.0200994f, +0.1784141f, -0.2459102f, -0.0527543f, +0.2760437f,
  +0.1192876f, -0.1602970f, -0.0371510f, -0.3020662f, +0.1000575f, +0.4025655f, -0.0601077f, -0.4183491f,
  -0.3814534f, +0.0617043f, +0.2897952f, +0.1140707f, +0.1676482f, +0.0500264f, +0.0217901f, -0.3866082f,
  -0.0689023f, -0.0612379f, +0.1127213f, -0.2397570f, -0.2329881f, +0.0162359f, -0.1668625f, -0.3164001f,
  +0.0300044f, -0.0781817f, -0.0650090f, +0.0277159f, +0.4263032f, +0.1356929f, +0.1596084f, -0.2826376f,
  +0.1085872f, -0.0047048f, -0.2472200f, -0.0542481f, +0.2231219f, +0.2208067f, -0.1374712f, +0.2900548f,
  -0.3821433f, +0.0058115f, -0.0120951f, +0.4354594f, +0.0561587f, -0.1377721f, +0.1167361f, +0.1035034f,
  -0.0470146f, +0.2157663f, -0.0220398f, -0.1476342f, +0.3126713f, +0.0767101f, -0.1784166f, -0.4781522f,
  -0.1282597f, -0.0023255f, +0.0734294f, +0.1679752f, +0.2673791f, +0.3168325f, +0.0712966f, +0.3663239f,
  -0.0021396f, +0.2199913f, +0.1870936f, -0.0221023f, -0.1490434f, +0.1668802f, -0.3905494f, -0.0504534f,
  -0.0330495f, -0.0026157f, -0.2039953f, -0.0679846f, +0.1620001f, -0.0473868f, -0.1529102f, -0.3589882f,
  +0.0482619f, -0.0643421f, +0.0971716f, -0.1290345f, +0.0845716f, -0.0757881f, +0.0871458f, +0.0591886f
);

const float biases[4] = float[4](
  +0.0518337f, -0.0784774f, -0.0123146f, +0.0270252f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer90 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0240287f, -0.0414088f, -0.0025925f, -0.1573880f, +0.3445293f, +0.2091414f, +0.2133134f, +0.1164093f,
  +0.4141743f, +0.0599261f, +0.0866746f, -0.2249005f, +0.1497660f, -0.2913594f, +0.3820621f, +0.0424202f,
  +0.4077129f, +0.0405517f, +0.2934351f, -0.0812480f, -0.0207142f, -0.1067414f, +0.1917179f, -0.0184518f,
  -0.0392602f, +0.0822026f, -0.2087752f, -0.0562136f, -0.0922846f, -0.1341633f, +0.0032438f, +0.1421991f,
  -0.0702247f, +0.3615489f, +0.6723928f, +0.1219134f, -0.0541955f, +0.0203538f, -0.0363036f, +0.0009771f,
  -0.1537547f, -0.0509987f, +0.2280301f, -0.1040777f, -0.4924818f, -0.0541357f, +0.1375688f, -0.0133251f,
  -0.1376958f, +0.2264326f, +0.1305631f, -0.0135762f, +0.1070321f, +0.0724211f, -0.0066023f, -0.0479312f,
  -0.0786551f, -0.0413718f, +0.1125360f, +0.0686189f, +0.2098531f, +0.1921611f, -0.0366841f, +0.0442273f,
  +0.0153306f, -0.2832541f, +0.1335949f, -0.0165427f, -0.0168668f, -0.1360041f, -0.1130551f, -0.0059844f,
  +0.1481431f, -0.0014173f, -0.1718703f, +0.0322933f, -0.1799389f, -0.1622069f, -0.3319719f, -0.0496850f,
  +0.0518292f, -0.1113002f, +0.1219415f, +0.2031460f, -0.1390051f, -0.2120658f, -0.2011274f, -0.1602696f,
  +0.0021084f, +0.0540729f, +0.0063440f, +0.0355112f, +0.2281621f, -0.1281078f, -0.2640440f, +0.1880892f,
  -0.0512002f, -0.1092333f, +0.0471069f, +0.2318975f, +0.4999255f, -0.2639171f, -0.0135349f, -0.2753834f,
  +0.0622670f, -0.1100660f, -0.0713659f, -0.0611246f, -0.2364958f, +0.0614541f, +0.1007589f, -0.3719459f,
  -0.0184971f, -0.1985173f, -0.1632755f, +0.2307638f, +0.1017842f, -0.0676194f, +0.3546810f, +0.0904620f,
  +0.0142133f, -0.3347387f, -0.0439452f, +0.1070368f, +0.1256755f, -0.0146233f, +0.0023514f, +0.0166948f,
  +0.0700549f, -0.3300501f, -0.2670883f, -0.1296227f, +0.0080368f, -0.1774776f, -0.1888342f, -0.1045421f,
  +0.1320515f, +0.0557691f, -0.0079271f, +0.1589804f, +0.2107085f, +0.0800347f, +0.1840006f, +0.0735049f,
  -0.1856924f, -0.0214306f, +0.2078107f, -0.0407486f, -0.1048052f, +0.1778141f, -0.0818095f, -0.1540049f,
  -0.1084874f, -0.1049670f, -0.0178650f, -0.2786601f, -0.0394506f, -0.1124245f, +0.0556390f, +0.2714312f,
  -0.2511623f, -0.1404641f, -0.0990044f, -0.0429550f, -0.0561369f, +0.0777073f, -0.3397870f, +0.1998637f,
  +0.1435614f, -0.3742746f, -0.0681671f, -0.2990868f, +0.1034087f, -0.2518741f, +0.0717882f, -0.1897469f,
  -0.1869568f, -0.0671410f, +0.2413285f, +0.4353610f, -0.2297198f, +0.2562407f, -0.1873262f, +0.1870472f,
  +0.0140023f, +0.0655374f, +0.1856239f, -0.0856524f, -0.0593670f, +0.0859202f, -0.3392069f, +0.3112386f,
  +0.2678197f, -0.0443026f, +0.1246046f, +0.1897767f, -0.1204089f, -0.0569279f, -0.0697503f, -0.2474039f,
  +0.2180657f, -0.2067245f, -0.0174051f, +0.0485347f, +0.0708459f, +0.1714606f, +0.1459742f, +0.0149939f,
  +0.3124670f, -0.2084207f, -0.0709150f, -0.1138105f, -0.3450706f, +0.1133923f, +0.0317474f, +0.2903880f,
  +0.0581182f, -0.0080015f, -0.2243275f, +0.0119351f, +0.0950006f, +0.1503765f, +0.0187079f, +0.0779411f,
  +0.2659626f, -0.1400152f, +0.0524150f, -0.1471255f, -0.2802786f, +0.0864638f, -0.2984731f, +0.1970647f,
  +0.0287163f, -0.0363760f, -0.0032496f, -0.0717643f, -0.0594441f, -0.0052870f, -0.2030090f, +0.2420316f,
  -0.1259049f, -0.3346044f, +0.0225755f, -0.2579896f, +0.1275666f, +0.0611267f, +0.0610490f, +0.1401491f,
  +0.0560970f, -0.2757612f, +0.0950895f, +0.0301681f, +0.0588308f, -0.6768422f, -0.1464638f, -0.0188286f,
  -0.3192330f, +0.1135501f, +0.3527130f, +0.2240683f, -0.0933122f, +0.2846558f, +0.0555052f, -0.1718964f,
  -0.0396849f, +0.0282099f, +0.0526722f, +0.1455563f, -0.1767365f, -0.1575660f, +0.0435858f, -0.1051862f,
  -0.1497715f, -0.8856119f, -0.1450910f, +0.2517871f, -0.0002014f, -0.0190994f, -0.0174566f, +0.1848127f,
  -0.2487036f, +0.1473047f, +0.1999833f, +0.0330599f, -0.0906811f, +0.1158352f, -0.0952645f, +0.0437798f
);

const float biases[4] = float[4](
  -0.0225151f, -0.0306809f, +0.0066425f, +0.1231074f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer90 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0600004f, +0.0251312f, -0.0764122f, +0.0777323f, -0.0345741f, +0.0390065f, -0.0901183f, +0.1305471f,
  +0.1464380f, +0.0509340f, +0.0744605f, -0.0636765f, -0.0532141f, +0.0781945f, -0.2043801f, -0.1916735f,
  +0.3452441f, +0.0174420f, +0.0290289f, +0.0764469f, +0.1344739f, -0.0398478f, -0.0282373f, +0.0115254f,
  +0.1307900f, -0.0411271f, -0.0212397f, +0.0965171f, -0.1570969f, -0.0286809f, +0.2628806f, +0.1000336f,
  +0.0204898f, -0.0383679f, +0.0165541f, +0.0276814f, +0.0360426f, -0.3827983f, -0.4058495f, -0.4224969f,
  -0.0765474f, +0.0735961f, +0.1840403f, +0.0306032f, +0.1300666f, +0.1447844f, +0.0628348f, -0.1437846f,
  -0.0550503f, -0.1755460f, -0.2346748f, -0.0969124f, -0.1055143f, -0.0253987f, +0.1606316f, -0.0257079f,
  +0.0036328f, -0.3141235f, -0.1312351f, -0.1163902f, -0.0131411f, +0.2044490f, +0.3689722f, -0.0861838f,
  -0.0777352f, -0.0711327f, +0.3578998f, -0.2750079f, +0.1173425f, -0.1454604f, -0.0409968f, -0.1173068f,
  +0.0010975f, -0.0482337f, +0.2364960f, +0.1425435f, -0.0619922f, -0.0103310f, -0.1005905f, -0.0321021f,
  +0.1838458f, +0.0948404f, +0.2240401f, -0.1030030f, -0.2732755f, -0.1960842f, +0.0562863f, +0.2254061f,
  +0.0772282f, +0.0713680f, -0.1049793f, +0.0477720f, -0.0757982f, +0.1295243f, +0.0568373f, -0.0701932f,
  -0.0114987f, +0.0305576f, -0.0549540f, -0.2167341f, +0.1747724f, +0.0642694f, +0.0941427f, -0.1524898f,
  -0.0285842f, +0.3354313f, -0.0589499f, -0.2237227f, -0.1377063f, -0.2131276f, +0.1764540f, +0.4787408f,
  +0.2406904f, +0.0875376f, -0.0089772f, -0.1126379f, -0.1168957f, +0.0869507f, -0.1292804f, +0.3117216f,
  +0.3013845f, -0.4085504f, +0.2250973f, -0.2750873f, +0.1718681f, -0.0684757f, +0.0364529f, +0.0173813f,
  -0.1916115f, +0.1241613f, -0.2516305f, +0.0958302f, +0.1536734f, -0.1556101f, -0.0647590f, +0.2189900f,
  -0.1814895f, -0.0487542f, +0.0826437f, +0.0310235f, +0.0135700f, +0.0691131f, +0.0614628f, +0.2488309f,
  -0.0136472f, +0.0597412f, -0.1848452f, +0.1256559f, +0.0558159f, -0.1088954f, -0.0208547f, +0.0039059f,
  -0.1457245f, +0.0755026f, -0.1205269f, +0.0729997f, +0.0723021f, -0.1316780f, -0.0637768f, +0.1783142f,
  -0.0831319f, -0.0585197f, +0.0443605f, -0.1127159f, +0.0731227f, -0.0707421f, -0.1395084f, +0.2883756f,
  +0.1186454f, -0.0926158f, +0.1724522f, -0.2672752f, -0.1033451f, +0.3780477f, -0.0252537f, -0.0546435f,
  -0.1719623f, -0.0949930f, -0.1985961f, +0.0446019f, +0.0097535f, +0.0156345f, +0.1535333f, +0.2569389f,
  -0.2838215f, +0.0906666f, +0.1510218f, -0.0512067f, +0.0586262f, -0.0335595f, +0.5749671f, +0.0974694f,
  +0.0742690f, -0.1206769f, +0.2179494f, +0.0330655f, +0.0058977f, -0.0111724f, -0.0221280f, -0.0504079f,
  +0.1442572f, +0.0204273f, +0.0515975f, -0.0618852f, -0.3936787f, +0.0048175f, -0.2007313f, -0.1493208f,
  +0.2546201f, -0.3733537f, -0.1716438f, +0.0366037f, +0.0133519f, -0.0914911f, +0.1217535f, -0.3914748f,
  +0.2064690f, +0.0298686f, +0.1562051f, -0.1227667f, -0.0145799f, +0.0079992f, +0.2594914f, -0.1295421f,
  -0.1928574f, -0.0314020f, +0.1517340f, +0.2148038f, -0.0872130f, +0.4056927f, -0.2226872f, -0.0994279f,
  +0.0832202f, +0.0401956f, +0.1200977f, +0.2789386f, +0.0314083f, +0.1000891f, +0.0241330f, +0.0584208f,
  -0.3258401f, -0.0187872f, +0.0568088f, +0.0460395f, -0.2390619f, +0.5000410f, -0.1626111f, -0.0436367f,
  +0.1942669f, +0.1997844f, +0.0838919f, -0.2069431f, +0.0118925f, +0.2138405f, -0.4366651f, -0.4316072f,
  -0.0350451f, +0.0951619f, -0.1282682f, -0.0964790f, +0.1722751f, -0.2158883f, -0.1867312f, -0.1216275f,
  -0.0279739f, +0.0247708f, +0.1311836f, -0.1815936f, +0.1202675f, -0.0210258f, +0.0866150f, -0.0372952f,
  +0.0996766f, +0.2678149f, +0.0236832f, +0.0952117f, +0.2299840f, +0.0513550f, +0.2496457f, +0.2618489f,
  -0.0028844f, -0.1921197f, +0.0551550f, -0.0160063f, +0.1202186f, +0.0122630f, +0.1587241f, +0.2392567f
);

const float biases[4] = float[4](
  -0.0027241f, +0.0026655f, +0.0009437f, -0.0399901f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer91 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1737573f, +0.3156331f, +0.0685620f, -0.0143820f, +0.0153766f, -0.0166834f, -0.0432483f, +0.2253369f,
  +0.0516403f, -0.1112731f, +0.3821059f, -0.1954382f, +0.1440076f, -0.2352612f, -0.1398051f, -0.0111571f,
  +0.0248505f, +0.0065332f, -0.0852649f, -0.1673751f, -0.0443588f, -0.1345386f, +0.1599646f, -0.0451452f,
  +0.2178498f, -0.4991208f, -0.1492539f, +0.0407307f, +0.0206462f, -0.0030813f, +0.0583170f, -0.1206076f,
  -0.1116275f, -0.4986556f, -0.7473089f, -0.0083875f, -0.3285612f, +0.0480499f, -0.1783908f, +0.0055132f,
  -0.0268139f, -0.1159461f, -0.0709779f, -0.0774931f, +0.1458902f, +0.0316491f, +0.1548632f, -0.1240489f,
  +0.0262355f, +0.1004942f, +0.0181320f, -0.0892160f, +0.1834292f, +0.0980207f, +0.0248144f, -0.0203309f,
  +0.3472621f, +0.3954966f, +0.5055135f, -0.3458649f, -0.0893584f, +0.1634939f, +0.1196033f, -0.3161814f,
  -0.1611722f, +0.1653832f, +0.1761770f, -0.1734801f, +0.0246213f, +0.0277433f, -0.0377268f, -0.3511379f,
  -0.0422926f, -0.0962463f, -0.1979364f, -0.2607048f, -0.1168826f, -0.1087356f, +0.2207721f, -0.0622393f,
  -0.0601868f, -0.1334171f, -0.2415069f, +0.0765695f, -0.0555050f, -0.2618832f, +0.0905116f, +0.0515563f,
  -0.1592616f, -0.0534739f, +0.1400574f, -0.2235215f, -0.0471408f, +0.0069150f, +0.0300955f, -0.1285301f,
  +0.1222430f, +0.0577304f, +0.1934153f, -0.2262261f, +0.1249432f, -0.1391417f, -0.0431298f, +0.1998703f,
  +0.0452113f, +0.2762166f, +0.1942801f, +0.1517896f, +0.0784011f, -0.0310803f, +0.1190932f, -0.3047505f,
  +0.2257033f, -0.0370123f, +0.3783274f, -0.0945320f, -0.1155539f, +0.1896773f, -0.0411369f, -0.0687364f,
  -0.0851440f, +0.1150665f, +0.0421292f, +0.3410684f, +0.0791865f, +0.1114862f, +0.2237521f, -0.0773350f,
  -0.1449997f, -0.2679341f, +0.2133458f, +0.0152247f, +0.3508226f, +0.2284972f, +0.1557764f, +0.0903821f,
  -0.0613486f, +0.0405602f, +0.0245467f, +0.0435682f, -0.0411833f, -0.0135814f, +0.2805486f, -0.0779305f,
  +0.0007953f, -0.2325402f, +0.4024762f, -0.0766549f, -0.0842630f, -0.2157012f, -0.0211856f, -0.0771002f,
  -0.0231506f, -0.2108132f, +0.1547208f, +0.3575725f, +0.1798792f, +0.1615514f, +0.0568323f, -0.1053507f,
  -0.0327831f, -0.1510915f, +0.3313141f, +0.1404079f, +0.1216000f, +0.5573221f, +0.0188109f, -0.2046878f,
  +0.0791109f, +0.0265551f, +0.0325519f, -0.0013357f, +0.2073685f, -0.0667090f, -0.0692456f, -0.0675449f,
  -0.1256257f, +0.1415862f, -0.0066707f, -0.0229940f, +0.4515811f, +0.0313302f, +0.1237663f, +0.1624410f,
  +0.1003034f, +0.0998994f, -0.2528998f, +0.1747439f, -0.0574573f, +0.0851992f, +0.1497249f, -0.0060613f,
  +0.0392181f, -0.1009831f, -0.1308938f, -0.2159846f, +0.1372388f, -0.1760855f, +0.1574159f, -0.0470392f,
  +0.1848508f, +0.1097301f, -0.2469849f, +0.0490745f, +0.0088456f, -0.0136583f, -0.0176643f, +0.1775925f,
  -0.0821951f, -0.1163911f, -0.0641048f, -0.0813070f, +0.2113998f, -0.1803598f, -0.1714177f, -0.1346661f,
  -0.2231952f, -0.2027366f, +0.1748467f, +0.0189527f, -0.0604793f, +0.1512634f, +0.0780797f, -0.1448337f,
  +0.1569931f, +0.0869176f, -0.1133665f, -0.2226365f, +0.1850526f, -0.0923355f, +0.0531054f, -0.0505555f,
  +0.0713912f, +0.0776042f, -0.1630130f, +0.0570937f, -0.2315141f, -0.1012303f, -0.0783065f, +0.0270698f,
  -0.0274232f, -0.1351906f, +0.3313973f, +0.2384843f, +0.2865234f, +0.2642214f, -0.3029521f, -0.2502476f,
  -0.3471628f, +0.0003615f, -0.3285078f, -0.4697909f, +0.0784445f, -0.0380072f, +0.0737365f, +0.4866909f,
  -0.0677873f, -0.1350616f, +0.0686292f, +0.0267518f, +0.1595444f, +0.1764175f, -0.0618870f, -0.2401528f,
  +0.0587019f, +0.3587499f, +0.0014707f, +0.1315248f, +0.4596910f, +0.0875868f, -0.1069991f, -0.1276384f,
  -0.2072446f, -0.0437563f, -0.2051363f, -0.1146313f, -0.0420690f, -0.1719180f, +0.0310228f, -0.0464506f,
  +0.1008639f, +0.0278818f, +0.0233182f, +0.0582452f, +0.0350148f, +0.0046013f, -0.0765518f, -0.1143486f
);

const float biases[4] = float[4](
  -0.0147390f, +0.0634251f, +0.0296748f, -0.0357859f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer91 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0214273f, -0.2686738f, +0.3666720f, +0.1756454f, -0.2678220f, +0.2300089f, -0.1625560f, -0.0857827f,
  -0.0360398f, -0.0910802f, +0.1319995f, +0.1083341f, -0.2008483f, -0.0290723f, +0.0632717f, +0.0808692f,
  -0.1746004f, +0.0519157f, +0.0486293f, +0.0307122f, +0.0114375f, -0.2941728f, -0.1152385f, -0.0989445f,
  -0.0138726f, +0.0490061f, -0.0160425f, -0.0397938f, +0.0731257f, +0.1318339f, +0.0350077f, -0.0173196f,
  +0.2166924f, +0.1973805f, -0.0593371f, +0.0968406f, -0.1339496f, +0.1641186f, +0.1503750f, -0.2000728f,
  +0.1885827f, +0.0200196f, -0.0256206f, +0.0229623f, +0.1140484f, +0.1194822f, -0.0130400f, -0.1589717f,
  -0.1870643f, +0.1191504f, -0.0274128f, +0.1595231f, -0.1381738f, +0.2972899f, -0.1648216f, +0.0553820f,
  -0.1006406f, +0.4305112f, -0.3137192f, -0.2270771f, -0.1118007f, +0.0331793f, -0.0454775f, -0.0539590f,
  -0.1135216f, -0.0944019f, -0.1452088f, +0.1051028f, -0.0907857f, -0.1164228f, -0.0971832f, -0.1110026f,
  -0.0525858f, -0.0549627f, -0.1958102f, -0.3068729f, +0.0562258f, -0.0580656f, -0.2181450f, -0.2133776f,
  -0.2149648f, +0.2531361f, +0.0092347f, -0.2879564f, -0.0394955f, +0.1184290f, -0.0894532f, -0.1411303f,
  +0.0068498f, +0.2104679f, -0.2656796f, +0.0649324f, -0.0212044f, +0.1051087f, +0.0358170f, -0.0398859f,
  +0.0947963f, -0.2688390f, +0.2204983f, +0.1861769f, -0.0532576f, -0.1367690f, -0.0303689f, +0.0276920f,
  -0.2495258f, -0.3028599f, -0.0432903f, +0.1875779f, +0.1235082f, +0.1035290f, -0.2687432f, -0.1227199f,
  -0.2353249f, -0.0987500f, +0.3741597f, +0.0398411f, -0.0301569f, -0.2740678f, +0.0774226f, -0.0835072f,
  +0.3725491f, -0.3908179f, +0.1820668f, +0.1303091f, +0.2960076f, +0.1463097f, +0.1888404f, +0.3660354f,
  -0.1120801f, -0.3244739f, +0.0045798f, -0.2568107f, +0.4598510f, -0.0496569f, +0.0498148f, +0.0104486f,
  +0.1044958f, +0.0851732f, +0.0084321f, +0.0050717f, -0.0346822f, +0.0245979f, +0.1567780f, -0.0175624f,
  -0.1900750f, -0.0098103f, -0.1654974f, -0.0675394f, +0.1237202f, -0.1530534f, -0.1259901f, -0.1941379f,
  +0.0833323f, +0.1094453f, -0.3894482f, -0.0813794f, +0.1822070f, +0.1060035f, +0.2076076f, -0.1059105f,
  -0.0222836f, -0.2104052f, -0.3190549f, +0.1310697f, -0.0603821f, -0.1551105f, -0.0279002f, +0.1616230f,
  -0.0508963f, -0.1787919f, -0.0754615f, +0.0703673f, +0.2730981f, +0.1642234f, -0.3748435f, +0.0288940f,
  +0.2864240f, -0.0110807f, -0.1148138f, +0.1674179f, -0.0946153f, +0.0503643f, +0.1925450f, -0.0831593f,
  +0.0436782f, +0.1052747f, +0.1181511f, +0.3369250f, +0.1122840f, -0.1352725f, +0.0274315f, +0.0403924f,
  +0.1173064f, -0.1871147f, +0.0420376f, -0.0562830f, +0.0012455f, -0.0621402f, -0.2193174f, +0.1486884f,
  -0.0962716f, -0.1228961f, -0.0233698f, +0.0745896f, +0.2053743f, +0.1790427f, +0.3184340f, -0.0749640f,
  -0.1245857f, +0.0866723f, +0.1791136f, +0.4581304f, +0.1078580f, +0.2275272f, +0.1854271f, +0.0981836f,
  -0.0948333f, -0.0661903f, -0.1757260f, +0.1549725f, +0.1073840f, -0.0133341f, -0.1716789f, -0.3194672f,
  +0.3549532f, +0.0339176f, +0.1802745f, -0.2405424f, -0.1446957f, -0.0778701f, +0.0502404f, +0.1716919f,
  -0.1188257f, +0.0154039f, -0.0533223f, -0.1523010f, +0.0831182f, +0.0814314f, +0.0907377f, -0.2276030f,
  -0.0711740f, -0.0222278f, +0.0046250f, -0.0216753f, +0.2247365f, +0.1181305f, +0.0417853f, -0.0480219f,
  +0.2928977f, -0.0080255f, +0.3632350f, -0.0285220f, -0.0040332f, -0.3484926f, -0.3272745f, -0.0050894f,
  +0.1495064f, -0.2010091f, -0.2666021f, -0.2346193f, -0.2259111f, +0.4160561f, +0.4673115f, +0.1706078f,
  +0.3470396f, +0.1589454f, -0.0910490f, -0.2509652f, +0.0435376f, -0.1086985f, -0.0795053f, +0.0119417f,
  -0.0968163f, -0.3241940f, -0.0426192f, +0.2290985f, -0.2226838f, -0.1214412f, -0.0845992f, +0.0911926f,
  -0.2219236f, -0.2058802f, +0.2278230f, +0.1295971f, +0.1476848f, +0.0664808f, +0.3112255f, +0.2843004f
);

const float biases[4] = float[4](
  -0.0051560f, -0.0147640f, -0.0344224f, -0.0097230f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer92 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0722896f, -0.0252110f, +0.1090579f, -0.0515840f, -0.2123374f, -0.0108449f, +0.0588511f, +0.1792391f,
  +0.2619379f, -0.1365033f, -0.0500272f, -0.0009423f, +0.0067195f, +0.1248565f, +0.1659244f, -0.1247731f,
  -0.2051601f, -0.1189071f, +0.1076132f, +0.3043045f, -0.0055743f, +0.1575107f, -0.0850384f, +0.0585872f,
  +0.3731810f, +0.0415910f, +0.3223473f, -0.0272371f, -0.0855889f, +0.0504574f, +0.0787203f, -0.2401584f,
  +0.2490387f, +0.3298104f, +0.2562470f, +0.0930622f, -0.1207280f, -0.1155092f, -0.0160397f, -0.3687127f,
  +0.1435097f, -0.0090629f, +0.0694147f, +0.2788059f, +0.0518036f, -0.1421466f, -0.4630584f, -0.1863165f,
  -0.0223680f, +0.0276108f, -0.2996024f, -0.0566625f, -0.2460554f, +0.1961534f, +0.0645795f, +0.1863072f,
  -0.1298919f, +0.1187878f, +0.0017418f, +0.0846527f, +0.0838694f, -0.0309986f, +0.2892545f, +0.0559914f,
  +0.1567459f, -0.1356233f, +0.1746113f, +0.1245055f, -0.2216355f, +0.0310496f, +0.0384415f, +0.0830792f,
  -0.0052062f, +0.1528513f, +0.0209812f, -0.0644827f, +0.2906203f, -0.0358966f, +0.0401847f, +0.2765282f,
  +0.0882712f, -0.0722570f, +0.0693680f, -0.1770710f, -0.1425574f, +0.3091610f, +0.1654495f, +0.3528121f,
  +0.0973406f, +0.0454579f, +0.1641826f, -0.2287426f, +0.0819084f, +0.1950240f, +0.2239903f, +0.1604653f,
  +0.0409683f, +0.2143781f, +0.0237488f, +0.0658548f, +0.0909477f, +0.0955730f, +0.0506432f, +0.1828026f,
  +0.0747135f, -0.0898577f, -0.0735115f, +0.0999700f, +0.0519248f, +0.1212607f, -0.0964509f, -0.2003786f,
  +0.2513686f, +0.2197390f, +0.0146666f, -0.2175966f, -0.1762140f, -0.1617755f, +0.1735706f, +0.1386320f,
  -0.0238108f, +0.0277183f, +0.2112195f, -0.0688401f, +0.0887549f, +0.1849923f, +0.2036857f, +0.0522083f,
  -0.0318163f, +0.2632446f, -0.1480784f, +0.0959672f, +0.1245490f, +0.0723510f, -0.0121545f, -0.1346400f,
  -0.0953223f, +0.1894654f, +0.1547431f, -0.1969956f, -0.1569168f, -0.1076649f, -0.2435480f, -0.3270268f,
  -0.0008064f, +0.0288382f, -0.0167376f, +0.0594337f, +0.1098964f, +0.3127776f, -0.0590196f, +0.2594943f,
  +0.5445028f, -0.0513534f, +0.1693433f, -0.1089997f, -0.0481883f, -0.3089397f, +0.1144849f, +0.4106428f,
  +0.2116314f, +0.1755155f, +0.0879677f, +0.0659088f, +0.0449438f, +0.0127915f, +0.2829808f, +0.0114169f,
  -0.0259405f, +0.0425739f, -0.0195489f, -0.0926166f, -0.1544006f, +0.0513682f, -0.0774189f, -0.0337992f,
  -0.3617305f, +0.0117664f, -0.1931194f, -0.2175018f, +0.1842008f, -0.2242123f, +0.4513445f, -0.3221495f,
  -0.1252728f, +0.2017101f, +0.0327095f, +0.2228407f, -0.0604489f, -0.3358873f, +0.2080639f, -0.0889834f,
  -0.0037835f, -0.0760721f, +0.0274123f, +0.0946750f, -0.0001542f, +0.3192359f, +0.2756266f, -0.0788970f,
  +0.0414017f, +0.0381422f, -0.3260067f, +0.2839037f, -0.0175175f, +0.1126438f, +0.0144533f, -0.2633879f,
  -0.0672172f, +0.1080771f, +0.0187561f, -0.1104297f, -0.3638489f, -0.0935855f, -0.0859178f, -0.1203902f,
  +0.0044433f, -0.1697815f, +0.2763560f, -0.1648841f, -0.2901487f, -0.0683700f, -0.3690996f, +0.3417076f,
  -0.0656540f, -0.0843291f, +0.3003707f, -0.0083468f, -0.0959401f, -0.1304268f, +0.2651899f, +0.0570040f,
  +0.1256490f, -0.0385762f, +0.1220118f, +0.0688718f, -0.0015386f, -0.1179064f, -0.0015046f, -0.0872062f,
  +0.3237825f, -0.0834862f, +0.0681044f, +0.0246596f, -0.2041385f, -0.3332672f, -0.0082307f, -0.1732367f,
  +0.7839655f, +0.1064276f, +0.1160221f, +0.2426400f, -0.2261407f, +0.0275150f, +0.0654869f, +0.0895828f,
  -0.2909068f, -0.0667006f, +0.1581234f, -0.2733640f, -0.1255775f, -0.1028161f, +0.3425144f, +0.0611340f,
  -0.0856259f, -0.1028372f, -0.2875844f, -0.1041989f, -0.3675102f, +0.1831959f, -0.0784037f, -0.1188595f,
  -0.1844938f, +0.0183961f, +0.0033183f, +0.1500337f, -0.1962415f, +0.2122653f, -0.0460782f, -0.1072506f,
  -0.1926755f, -0.1021601f, -0.1241385f, -0.1402227f, -0.0767381f, +0.0796529f, +0.1097193f, +0.1999916f
);

const float biases[4] = float[4](
  -0.0080647f, -0.0269903f, +0.0108437f, +0.1005906f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer92 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1335619f, +0.0046061f, -0.0538306f, +0.0432827f, +0.2331479f, -0.1143827f, +0.0024039f, -0.1096325f,
  +0.1461780f, -0.0145761f, +0.0733627f, +0.0186902f, +0.0390598f, -0.3070605f, -0.1860640f, -0.3720239f,
  -0.0531112f, +0.0252372f, +0.3278747f, -0.0101118f, +0.0554673f, -0.0927917f, +0.1310474f, -0.1363815f,
  +0.3685286f, +0.0717319f, -0.1018823f, +0.0139811f, +0.3417032f, -0.2187626f, -0.0374969f, +0.2550588f,
  -0.3693022f, +0.2148406f, -0.0752025f, -0.0960719f, +0.0991315f, -0.2793860f, -0.2470347f, +0.6063409f,
  -0.0275765f, +0.2634192f, +0.1670985f, -0.3387854f, +0.0755260f, +0.0136617f, -0.1569546f, -0.3539573f,
  -0.0333453f, -0.0317064f, +0.1819121f, +0.0100382f, +0.1169367f, -0.0560101f, -0.1112453f, -0.3388620f,
  +0.2007930f, -0.0105622f, -0.0338523f, -0.2639229f, +0.1337082f, -0.2246479f, -0.1659057f, -0.0906936f,
  +0.0236803f, +0.0042135f, +0.3089605f, +0.4075165f, +0.2329946f, -0.0974479f, -0.1346348f, +0.1059564f,
  +0.1719595f, -0.0092740f, +0.1345499f, +0.4121580f, +0.0873075f, -0.0417529f, +0.2494916f, -0.2881871f,
  +0.3702008f, +0.0174580f, +0.2632407f, -0.1694374f, +0.2889771f, +0.1392172f, -0.1962602f, -0.1632425f,
  -0.3048119f, -0.0467332f, -0.0438821f, +0.1654462f, -0.0632469f, -0.1200030f, -0.1637141f, -0.0199509f,
  -0.3240498f, +0.0369572f, +0.1765282f, -0.1032743f, -0.1677206f, -0.0928334f, +0.3003984f, +0.2458221f,
  +0.1801993f, +0.2277205f, +0.1543970f, -0.1824191f, -0.1460896f, -0.5102449f, +0.0493271f, +0.1263706f,
  +0.0211265f, +0.1399295f, +0.1632801f, +0.1757026f, -0.0529055f, -0.0212650f, -0.2427003f, +0.0011416f,
  -0.2400414f, -0.0456597f, -0.0796814f, +0.3573277f, -0.0750407f, -0.1267172f, +0.1366263f, -0.0296048f,
  +0.2261589f, -0.1451441f, -0.1447005f, +0.1685345f, +0.1312200f, +0.0001046f, -0.1550494f, -0.0241210f,
  -0.0141521f, +0.0552758f, +0.1930059f, -0.0909328f, +0.0133352f, +0.0642239f, -0.0362100f, -0.2313114f,
  +0.3442389f, -0.1125838f, +0.1943198f, -0.0135258f, +0.0689075f, -0.0909067f, -0.0725048f, -0.2053210f,
  +0.0942660f, -0.0084917f, -0.0500817f, +0.0178342f, -0.0501558f, +0.0336127f, -0.4682813f, +0.0071812f,
  -0.3408031f, -0.0228256f, -0.3013509f, -0.0148419f, -0.0233075f, -0.1263333f, -0.0665746f, -0.0030361f,
  -0.3566665f, +0.0468743f, +0.0053328f, +0.0827133f, -0.1215917f, -0.1250888f, +0.1439019f, +0.1051008f,
  +0.1308189f, -0.1635693f, -0.1906742f, +0.1638735f, -0.1411792f, -0.0696530f, -0.1910944f, -0.5659236f,
  -0.1797602f, +0.3161025f, -0.0269591f, -0.0253236f, -0.1254195f, -0.0676118f, -0.0342274f, -0.0602286f,
  +0.0005806f, +0.0239718f, -0.0334966f, +0.0162256f, +0.0342691f, -0.0471263f, -0.2055151f, -0.1147807f,
  -0.1783521f, -0.0011327f, +0.0222118f, -0.0423174f, +0.2821003f, -0.0922821f, -0.2941035f, +0.0749661f,
  -0.0941490f, +0.0941038f, -0.1650804f, -0.1891938f, -0.1245933f, -0.0377251f, -0.0293135f, -0.2105543f,
  -0.2154920f, -0.1623499f, -0.3122133f, +0.0653220f, -0.1685336f, -0.2453331f, -0.2271241f, -0.0659770f,
  -0.2292015f, +0.0898009f, -0.3207157f, +0.0838718f, +0.2234236f, +0.2157175f, +0.2117795f, +0.1167475f,
  +0.0978788f, +0.1115547f, -0.0135104f, +0.0971649f, +0.2005798f, +0.0210577f, -0.0299459f, +0.0335513f,
  +0.4048541f, -0.0818401f, -0.1334948f, -0.0103848f, -0.0422880f, -0.3739538f, +0.0915622f, +0.5560799f,
  -0.0470570f, +0.2452377f, +0.0645614f, +0.0747894f, -0.0171815f, +0.2144861f, +0.0809176f, +0.0633729f,
  +0.0928747f, +0.0519045f, +0.2357513f, -0.2008969f, +0.1518356f, -0.0240858f, +0.0600591f, -0.1164799f,
  +0.0848509f, -0.1525447f, -0.1005164f, +0.1513519f, +0.0568502f, -0.2963467f, -0.1691969f, -0.0104823f,
  +0.0621738f, +0.2089838f, -0.4891368f, -0.3396110f, +0.2507799f, -0.0985382f, -0.1526793f, +0.4084785f,
  +0.1843977f, +0.0619795f, -0.2119710f, -0.3898127f, -0.0555439f, +0.2657656f, -0.0779034f, +0.0651505f
);

const float biases[4] = float[4](
  +0.0161300f, +0.0796855f, -0.0008287f, -0.0462236f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer93 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1688932f, +0.0830947f, -0.1500045f, -0.0642401f, -0.1240245f, +0.0275298f, +0.0312583f, -0.3000385f,
  +0.1114841f, +0.0253668f, -0.0567735f, +0.0456216f, -0.0329273f, +0.0115391f, -0.1003617f, -0.0219975f,
  -0.1758704f, +0.1853771f, -0.0449457f, +0.0717682f, +0.0818089f, -0.1165747f, -0.1388420f, -0.1257737f,
  -0.1352175f, -0.0649732f, +0.1924487f, +0.0201711f, +0.0164434f, +0.0295098f, +0.0092992f, +0.0123964f,
  -0.0017529f, +0.0688068f, -0.0310384f, +0.1041526f, +0.1306190f, -0.0122043f, +0.0997082f, +0.0624981f,
  -0.2259613f, -0.0621372f, -0.0070361f, -0.1899247f, -0.0190030f, +0.0020656f, +0.0207628f, -0.3827583f,
  +0.0348379f, +0.1293883f, -0.0373592f, -0.1497699f, -0.1095789f, -0.0126383f, -0.2001481f, -0.0235599f,
  +0.0080956f, +0.0777386f, +0.1938744f, +0.0421846f, -0.0398762f, +0.0153938f, +0.0270632f, +0.0844752f,
  -0.0056896f, +0.0664196f, -0.3412947f, -0.3128110f, -0.0194970f, -0.1013511f, -0.0264706f, +0.0571998f,
  -0.0858982f, +0.0173836f, -0.0297033f, -0.2430035f, -0.0161766f, +0.1710103f, -0.0367043f, +0.1164429f,
  +0.3665167f, -0.0901691f, -0.3631710f, +0.2952094f, +0.1943568f, +0.3253730f, -0.2141064f, +0.0051105f,
  +0.0776157f, -0.0775107f, +0.0103724f, +0.1556044f, +0.0417411f, -0.2666877f, -0.0006720f, -0.1857370f,
  -0.0437546f, -0.1351405f, +0.0706496f, -0.1132772f, -0.2333329f, +0.1123062f, -0.3017375f, +0.1394174f,
  -0.0992601f, -0.0374753f, -0.0289695f, +0.0148755f, +0.1798607f, +0.2277461f, -0.1759050f, -0.2012345f,
  +0.1504409f, -0.1996576f, +0.1120287f, +0.0021932f, +0.2825871f, +0.1842756f, +0.2003286f, +0.1296437f,
  +0.1317123f, +0.0710187f, +0.1338478f, -0.1621328f, +0.0112491f, +0.2078585f, +0.1088809f, +0.1126170f,
  +0.1659785f, -0.0383946f, -0.1314280f, +0.1076729f, -0.1360322f, -0.0203382f, -0.1584218f, +0.2717846f,
  +0.3003672f, -0.0338467f, +0.0916696f, -0.2723619f, +0.0012700f, +0.2431249f, -0.1370355f, -0.0244878f,
  +0.2063625f, +0.1308686f, +0.0212733f, -0.1656819f, -0.1080605f, -0.0397299f, -0.0378007f, +0.0424365f,
  +0.1089563f, +0.2000663f, +0.0108975f, +0.1176788f, -0.2695820f, +0.3218865f, -0.0790261f, +0.0841315f,
  +0.1386631f, +0.0563367f, +0.0640571f, +0.0620883f, -0.0106010f, -0.1218121f, +0.0519942f, +0.1739986f,
  +0.1543009f, -0.0319085f, -0.3880079f, -0.2710181f, +0.0942182f, -0.0344662f, +0.1286494f, +0.0039531f,
  -0.0867502f, +0.1830009f, +0.1365129f, -0.1999749f, -0.0906671f, +0.1478535f, -0.1028399f, +0.3629223f,
  +0.1230345f, +0.0020981f, -0.0878219f, +0.0376756f, -0.1552783f, -0.0431488f, -0.0226982f, -0.1102167f,
  -0.1297806f, -0.1988524f, +0.2295336f, -0.1222243f, -0.1876882f, -0.1365490f, -0.2442096f, -0.0217312f,
  +0.0655858f, -0.0399563f, +0.2240632f, +0.1512297f, -0.0707421f, -0.1428767f, +0.1297834f, -0.1693391f,
  +0.1323043f, +0.0349689f, +0.0706003f, +0.0354077f, -0.0596858f, +0.2443481f, -0.1730389f, +0.1461315f,
  -0.2850609f, +0.1754938f, +0.1438343f, -0.0726518f, -0.0181068f, -0.2259176f, -0.0784708f, +0.1768002f,
  -0.1018381f, -0.0733048f, -0.0692908f, +0.1736826f, +0.0024404f, -0.2189637f, -0.0463918f, -0.1433476f,
  +0.1976375f, -0.1685990f, +0.3253043f, -0.0478831f, -0.1825059f, -0.0646159f, +0.1250966f, +0.2420534f,
  +0.3773066f, -0.1769261f, +0.0170962f, -0.2443235f, +0.0333688f, +0.1455525f, -0.1120577f, +0.1178806f,
  +0.0557763f, +0.1765893f, +0.1725910f, +0.0954312f, -0.0763875f, +0.1453827f, +0.4379322f, -0.2758092f,
  -0.1587901f, -0.1327435f, +0.1319737f, +0.0306022f, +0.0339934f, +0.3900832f, +0.0493847f, -0.2229143f,
  -0.0617548f, +0.2085883f, -0.0294569f, +0.1563722f, -0.0651938f, -0.0807654f, -0.2002333f, +0.1436777f,
  -0.1040838f, +0.0530944f, +0.0320218f, +0.2182184f, +0.2520742f, -0.0081046f, -0.1870112f, -0.3028257f,
  +0.3719086f, -0.6130112f, +0.0745051f, -0.0153988f, -0.0678900f, -0.3147927f, +0.0578462f, +0.0830181f
);

const float biases[4] = float[4](
  -0.0131672f, -0.0694444f, +0.0453089f, -0.0329284f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer93 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3818601f, -0.4573024f, +0.2868624f, +0.1519568f, +0.0655834f, -0.0970641f, +0.2494461f, +0.0596091f,
  +0.3635739f, +0.0187260f, +0.5425794f, +0.2285762f, +0.0728111f, +0.1957529f, +0.2496214f, +0.0644311f,
  -0.0740717f, -0.3746957f, +0.0208150f, +0.1059904f, -0.0674345f, +0.0886425f, +0.0797291f, +0.0693025f,
  +0.0809257f, +0.0222184f, +0.2967089f, -0.0152785f, -0.1303295f, -0.1626403f, +0.0197679f, -0.1373954f,
  -0.2989707f, +0.3022761f, -0.1168184f, +0.2658285f, +0.1228549f, +0.2017357f, -0.2161192f, -0.1718450f,
  +0.1399133f, +0.1378478f, -0.1088575f, +0.1602955f, -0.0782704f, -0.1052020f, -0.1844318f, +0.0971923f,
  +0.0651351f, -0.0469688f, -0.0472634f, -0.0304205f, -0.1018404f, +0.1559125f, -0.1526104f, -0.0900789f,
  +0.0695020f, -0.0429670f, -0.3683509f, +0.0657625f, +0.1688796f, +0.1107414f, +0.1350212f, +0.0407888f,
  -0.1864502f, -0.2002748f, -0.0179420f, -0.1106759f, +0.1009656f, -0.0885318f, -0.1135159f, -0.0186468f,
  -0.0842187f, -0.0517056f, -0.2170005f, -0.1093985f, +0.2783681f, -0.1338133f, -0.0763221f, -0.1426068f,
  +0.1331572f, +0.0905268f, +0.0120619f, +0.0615783f, -0.3150601f, -0.0033501f, -0.1074450f, -0.0615180f,
  -0.1146418f, +0.1320628f, +0.0574693f, -0.0667364f, -0.1319850f, +0.0328913f, +0.0580160f, +0.1176135f,
  +0.2891613f, -0.0767481f, -0.0261957f, +0.1368161f, -0.1057748f, -0.1830001f, -0.0246402f, -0.0597541f,
  +0.0602268f, +0.0416948f, +0.2847393f, -0.4102588f, -0.2955713f, -0.1370297f, +0.0030632f, +0.0782112f,
  -0.0386429f, -0.1607519f, -0.0533950f, -0.1655371f, -0.1607082f, -0.1648211f, +0.0370134f, +0.1357146f,
  +0.0405266f, +0.0582070f, +0.1126905f, +0.0194710f, +0.0532348f, -0.3284998f, +0.2444601f, +0.1169595f,
  +0.1071125f, +0.0612420f, +0.5091923f, +0.2258687f, -0.1180041f, -0.2526478f, -0.1836440f, -0.0739546f,
  +0.0195402f, +0.1521851f, +0.0689088f, +0.0377493f, -0.2594238f, +0.1347184f, -0.0268823f, +0.1449340f,
  -0.1144526f, +0.0231292f, -0.1851874f, -0.0929521f, -0.0814987f, -0.2200713f, +0.3301693f, -0.2478023f,
  +0.1001459f, +0.1971426f, +0.0470369f, -0.2103772f, +0.1919783f, -0.0809038f, +0.1509146f, -0.0245662f,
  +0.0446480f, +0.0162942f, -0.0123049f, -0.1180997f, -0.0588492f, -0.1270833f, +0.0285265f, -0.0192136f,
  +0.3886096f, +0.1580652f, +0.2986109f, +0.0422001f, +0.0951028f, +0.0545917f, +0.0838145f, -0.0698216f,
  +0.0295432f, -0.0736324f, +0.3675717f, +0.2792806f, +0.1345101f, +0.1562855f, +0.0220916f, -0.3011117f,
  -0.0618067f, -0.0669419f, +0.1502597f, -0.1597267f, +0.2363812f, +0.2273851f, +0.0376229f, +0.0758666f,
  -0.1288015f, -0.1530579f, +0.0044572f, -0.1313090f, +0.0666019f, +0.0310477f, +0.1004956f, +0.0398662f,
  -0.0201433f, -0.2590203f, -0.1709189f, -0.3180992f, -0.0234388f, +0.1201058f, +0.0050482f, +0.1613427f,
  +0.0245830f, -0.2015011f, +0.1964399f, -0.0110080f, +0.0454803f, +0.0659442f, +0.0481051f, -0.2712225f,
  -0.0739371f, -0.0750554f, +0.0643889f, -0.0302176f, +0.0964103f, -0.0573768f, +0.0738825f, -0.3599896f,
  +0.0162253f, +0.1205967f, +0.0895447f, -0.3187811f, +0.1919552f, -0.2274809f, +0.0495114f, -0.1135628f,
  +0.2012163f, -0.1123127f, +0.0287239f, +0.0852549f, -0.0570558f, -0.0400684f, -0.1108437f, -0.1042631f,
  -0.0179040f, -0.0862699f, -0.0671311f, -0.0126720f, +0.1856968f, +0.2109894f, +0.1603798f, -0.0874444f,
  -0.0945465f, -0.3972706f, -0.2290105f, +0.0230258f, +0.0449158f, +0.3097923f, -0.0269853f, +0.2025020f,
  +0.1464827f, +0.1729930f, +0.0712408f, -0.1640270f, +0.1951319f, +0.2248722f, +0.0643458f, -0.1922442f,
  -0.2716983f, -0.0572032f, +0.2104760f, +0.1345221f, -0.2050913f, -0.1418190f, +0.0171411f, -0.1432234f,
  -0.0145187f, -0.0810257f, +0.0777035f, -0.0563626f, +0.1239150f, +0.1299163f, -0.0043426f, -0.0971561f,
  +0.2698995f, -0.1673928f, -0.0357730f, -0.2355097f, +0.0426482f, +0.2067535f, -0.1840901f, -0.0873562f
);

const float biases[4] = float[4](
  -0.0184502f, -0.0164955f, -0.1698973f, -0.0263696f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer94 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1391902f, -0.2140407f, -0.0980461f, -0.1303940f, -0.0497968f, -0.0837871f, +0.1526290f, -0.1200613f,
  +0.0354059f, -0.1186837f, +0.0056532f, -0.1077007f, -0.0543720f, -0.1375770f, +0.1410639f, +0.2467282f,
  +0.0672096f, -0.1529608f, -0.1568882f, -0.0835852f, -0.0411628f, +0.3034952f, +0.1165558f, +0.1995433f,
  +0.2085668f, +0.0009693f, -0.1257797f, +0.1249321f, +0.0738530f, -0.1061568f, +0.0699486f, -0.1500122f,
  -0.0059825f, -0.2897683f, -0.1241983f, +0.1233691f, +0.0851674f, +0.0183921f, -0.1953922f, +0.1245881f,
  -0.1906468f, -0.0276624f, -0.2636955f, +0.2446950f, +0.1685726f, -0.1925150f, -0.4773954f, +0.2561119f,
  -0.1587480f, +0.1690717f, +0.0356008f, -0.2575090f, +0.0569274f, -0.1524635f, +0.0169567f, -0.0699835f,
  -0.3184585f, -0.1810112f, -0.1031633f, -0.0486348f, -0.0499498f, -0.0381853f, +0.0563247f, +0.1467801f,
  +0.1538470f, -0.0316620f, -0.1859480f, +0.0016331f, -0.1270429f, +0.0242843f, +0.2905232f, +0.1013608f,
  -0.0989093f, -0.2431376f, +0.0000894f, -0.0607472f, -0.0071716f, +0.0388942f, -0.0741361f, -0.0935596f,
  +0.2876743f, +0.1608391f, +0.0982527f, +0.0899092f, -0.0167542f, +0.1973962f, +0.1679457f, +0.0949737f,
  -0.1796103f, -0.0169646f, +0.1681857f, +0.1128805f, -0.2034264f, -0.0718007f, +0.0381520f, +0.1688092f,
  -0.0691226f, +0.2473649f, +0.0444224f, -0.0919009f, -0.1947531f, +0.1580216f, -0.0913418f, -0.4219478f,
  +0.2429140f, +0.0195297f, -0.0296190f, +0.1250635f, -0.1409621f, +0.3699940f, +0.0984701f, +0.0472300f,
  -0.2839751f, +0.1271356f, +0.2841539f, +0.0202643f, +0.1731384f, +0.0543374f, -0.2070202f, +0.2159020f,
  -0.1562792f, +0.2288896f, -0.1375588f, -0.1009752f, +0.1516395f, +0.2797238f, +0.0715820f, +0.2903941f,
  +0.0966128f, +0.0367236f, -0.0408578f, +0.1226576f, +0.0903987f, +0.2788791f, -0.1198191f, -0.1147473f,
  -0.2063305f, -0.1031365f, -0.1400884f, -0.2055363f, -0.0317021f, +0.0840632f, -0.2546791f, +0.0058560f,
  +0.3320960f, -0.2625892f, +0.0207335f, -0.3531563f, +0.0209123f, +0.2027646f, -0.1625264f, +0.1706616f,
  -0.1127120f, -0.1296023f, -0.0752287f, -0.2668100f, +0.0194552f, +0.0266356f, +0.4697601f, -0.0232101f,
  -0.1661471f, -0.0169833f, -0.1177222f, +0.0637636f, -0.0652854f, +0.0346942f, -0.0590971f, -0.0446057f,
  +0.0293646f, -0.1250580f, +0.0137868f, -0.3063389f, +0.0337526f, -0.0179911f, -0.2210317f, -0.0379978f,
  +0.0000951f, +0.1465338f, -0.3078066f, +0.1714417f, -0.1801005f, -0.0886754f, -0.1229286f, +0.2168480f,
  -0.0879831f, -0.0613963f, +0.1863700f, +0.0866188f, +0.1738810f, +0.0395432f, -0.2990401f, +0.1512317f,
  -0.0728197f, -0.2540625f, -0.0182158f, +0.0500907f, -0.0776415f, -0.0199942f, -0.1670227f, -0.0436357f,
  +0.1987745f, +0.2679417f, +0.2038388f, +0.0841256f, -0.1823454f, -0.0093984f, -0.1056253f, -0.0243229f,
  +0.0939455f, +0.0055785f, -0.1062616f, -0.0788110f, -0.0893180f, -0.0035373f, -0.1197539f, -0.1243116f,
  +0.1096038f, -0.3126277f, -0.0706125f, -0.0694225f, +0.1700013f, +0.1288428f, +0.0494387f, +0.1697939f,
  -0.1218047f, -0.0240135f, +0.1021465f, +0.3730213f, -0.1196209f, +0.2720708f, -0.0781985f, -0.0959667f,
  -0.0488527f, -0.0836433f, +0.1549827f, +0.0236947f, +0.0069612f, -0.1473006f, +0.0564587f, -0.2203207f,
  -0.1627578f, -0.0587050f, -0.0520067f, +0.0258601f, +0.0712165f, +0.0599607f, +0.1167666f, -0.1673128f,
  +0.0736040f, +0.1488744f, +0.1580791f, -0.0368653f, +0.5096435f, -0.0169199f, +0.2741650f, +0.1506757f,
  +0.0637787f, -0.2114325f, +0.1752109f, -0.1282326f, +0.1395032f, +0.0527446f, -0.1591392f, -0.0828997f,
  -0.0389434f, +0.0152983f, -0.1044468f, -0.2567067f, +0.2329349f, +0.2214849f, +0.1177109f, +0.1279491f,
  -0.1072668f, -0.1390965f, -0.0000023f, +0.1723238f, +0.0273888f, +0.0259101f, +0.1642265f, -0.0017058f,
  +0.0430432f, -0.4360051f, +0.1111165f, +0.2044710f, -0.1866345f, +0.0968025f, +0.2450729f, +0.1085187f
);

const float biases[4] = float[4](
  -0.0234731f, -0.0298009f, +0.0175147f, +0.1075282f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer94 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1310868f, -0.0827883f, +0.1654527f, +0.0338100f, -0.0722806f, -0.0447675f, -0.3248443f, -0.1303508f,
  -0.0335031f, -0.0051550f, -0.0643052f, -0.2626837f, +0.1687011f, +0.1201045f, +0.0772191f, -0.0987028f,
  -0.1123088f, +0.1997026f, -0.0567725f, -0.2724268f, +0.0093917f, -0.0979140f, -0.2086442f, -0.3297412f,
  -0.5328417f, -0.2983076f, -0.0137544f, -0.0935833f, -0.0022435f, +0.0185500f, -0.0749321f, -0.0053264f,
  +0.0229857f, -0.2220207f, +0.0877265f, +0.3987060f, -0.2092956f, +0.0211550f, -0.3754899f, -0.1130102f,
  +0.0439976f, +0.1318989f, -0.0863273f, -0.1678137f, +0.1840025f, +0.0039583f, -0.0626826f, -0.3955194f,
  +0.3391684f, -0.4409301f, -0.0691211f, +0.0654164f, +0.0613823f, -0.0919106f, -0.0681690f, -0.3295486f,
  +0.2509913f, +0.0420755f, +0.1425109f, -0.2636065f, +0.3900714f, -0.2746730f, -0.2303080f, -0.3182763f,
  +0.0481989f, -0.0974408f, -0.2199448f, -0.3056615f, -0.0447141f, +0.0056284f, +0.0886277f, -0.3394864f,
  +0.0824648f, +0.1271415f, +0.1946411f, +0.1536392f, -0.0162660f, +0.1973364f, +0.1906819f, -0.1352522f,
  -0.2346957f, +0.0459875f, +0.0328026f, -0.3607825f, +0.1273831f, +0.2429464f, +0.0396473f, -0.0455286f,
  +0.1046761f, -0.1337490f, +0.0068756f, +0.4107392f, +0.0912133f, +0.0333104f, -0.1826701f, +0.3050278f,
  -0.0437377f, +0.0623679f, -0.0144651f, +0.0202283f, +0.0493783f, +0.2680379f, -0.0604638f, -0.1580575f,
  -0.2404736f, -0.3639971f, -0.1259443f, +0.1113035f, +0.0625729f, -0.1361105f, -0.0505410f, -0.1499669f,
  -0.1198764f, -0.2196441f, +0.0823976f, +0.2197126f, +0.0274218f, +0.2968731f, -0.2041122f, -0.1350066f,
  +0.0987855f, +0.0162965f, -0.0327471f, +0.1751385f, -0.0395178f, +0.1174468f, +0.0104440f, -0.0224515f,
  -0.0925572f, -0.2747342f, -0.3123765f, -0.1744379f, -0.3310324f, +0.1266047f, +0.0585532f, +0.1075519f,
  +0.0698856f, -0.1174427f, -0.1264089f, +0.1215046f, -0.0593294f, +0.0971051f, +0.0690417f, +0.0865519f,
  +0.0966832f, -0.2335122f, +0.0104250f, -0.1957573f, -0.0480559f, -0.0084382f, -0.0454330f, -0.0871263f,
  +0.0642665f, -0.1373120f, -0.2761127f, -0.0154114f, +0.2975592f, -0.0367074f, -0.1499716f, -0.0028621f,
  -0.0637892f, +0.0331156f, -0.2135417f, +0.1114397f, +0.0357690f, +0.2805509f, -0.1160311f, -0.1812460f,
  +0.0694073f, -0.0633800f, -0.0843979f, -0.2058375f, +0.1063461f, +0.0766835f, +0.1168418f, +0.1613373f,
  +0.1430916f, +0.2820105f, +0.0828881f, +0.1452270f, -0.1440011f, +0.0641813f, +0.1907943f, -0.0617160f,
  -0.0497811f, +0.2241179f, -0.2660280f, +0.0916142f, -0.0460627f, +0.0090432f, -0.4340919f, -0.3893650f,
  +0.2267236f, -0.2261669f, -0.1122005f, -0.0622991f, -0.1566672f, +0.2436532f, -0.0294062f, -0.1516026f,
  -0.1261593f, -0.2176934f, +0.1565450f, +0.1668992f, -0.3898287f, +0.1111517f, -0.3109416f, -0.1036131f,
  -0.0856860f, -0.2102541f, +0.0054272f, +0.0413871f, -0.3379698f, +0.1599223f, -0.2677934f, -0.0578104f,
  -0.1400288f, +0.3706002f, -0.1939795f, +0.1731271f, -0.0387556f, -0.0299505f, +0.0648139f, +0.0514059f,
  -0.0239389f, +0.0100874f, +0.1148211f, +0.1949972f, -0.2002028f, +0.0757461f, +0.0801444f, -0.1351231f,
  -0.1627752f, -0.0908349f, +0.2101133f, +0.0490964f, -0.1107654f, +0.1481776f, -0.1289026f, +0.1968034f,
  +0.0694381f, -0.2630692f, -0.2154511f, +0.0042410f, +0.0699280f, -0.1016177f, +0.0513374f, +0.0927437f,
  +0.0513208f, +0.0765534f, +0.1821721f, -0.1277263f, -0.2837370f, -0.0696568f, +0.2208711f, +0.1290746f,
  -0.0970878f, +0.1268790f, -0.3605228f, +0.1593651f, -0.0202956f, -0.0671487f, -0.0613071f, +0.2130056f,
  +0.1171423f, +0.3623983f, +0.1172297f, +0.0234992f, +0.2822266f, -0.1429341f, +0.1960794f, +0.0282679f,
  -0.0721010f, -0.0013027f, +0.1362133f, +0.0996748f, -0.1636714f, -0.1533335f, -0.0608993f, -0.1761946f,
  +0.3380397f, +0.3885545f, -0.2479866f, -0.0446409f, -0.0958618f, -0.0848676f, +0.0472520f, +0.1657454f
);

const float biases[4] = float[4](
  +0.0234443f, +0.0222458f, -0.0049749f, -0.0400067f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer95 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1310675f, +0.1019824f, -0.2344425f, -0.1201182f, +0.2883987f, -0.0503861f, +0.2836419f, +0.0443429f,
  -0.0526129f, -0.1558169f, -0.1626950f, -0.0023962f, +0.1356650f, +0.0929683f, -0.0459588f, +0.2972364f,
  +0.2313791f, -0.1216841f, +0.0592304f, -0.1227422f, +0.2721394f, -0.0333761f, -0.3192806f, -0.0237271f,
  -0.2295779f, +0.0618973f, +0.0616219f, -0.0606731f, -0.0563272f, +0.1071752f, +0.0434047f, +0.0348613f,
  -0.1123499f, -0.0939793f, -0.0168987f, +0.0296151f, +0.1566999f, +0.0749639f, +0.1439449f, +0.0484457f,
  +0.1560686f, -0.0999772f, -0.0295560f, -0.1550195f, -0.0675438f, -0.0573170f, +0.1037550f, +0.0128668f,
  +0.0303542f, +0.4539388f, -0.2573030f, +0.0618522f, -0.1660003f, -0.2940066f, -0.0971632f, -0.1836441f,
  -0.1011319f, +0.1659081f, +0.2093473f, +0.0948138f, +0.1161824f, -0.0488815f, -0.0490437f, -0.0076805f,
  -0.0788801f, -0.0250969f, -0.0987678f, -0.2126198f, -0.2010865f, -0.0091342f, -0.0985319f, -0.1712798f,
  -0.0569903f, +0.1427640f, +0.0984651f, +0.1338603f, -0.1381227f, -0.0595803f, +0.0930169f, -0.0494833f,
  +0.1001604f, -0.1919055f, -0.0811984f, -0.0934280f, +0.3652644f, -0.3764419f, +0.0754329f, +0.0894077f,
  -0.2057718f, -0.5085115f, -0.1083310f, +0.2998599f, -0.1078185f, +0.1174438f, -0.0135445f, -0.2363292f,
  -0.0919653f, -0.2008523f, -0.0281644f, -0.0126943f, +0.1704353f, +0.1130087f, -0.2450503f, +0.0732008f,
  -0.2666948f, +0.1138296f, -0.0965300f, +0.1169904f, +0.2238618f, -0.3083146f, -0.1198622f, -0.3143983f,
  +0.1875048f, +0.0890393f, -0.0335613f, -0.1665744f, -0.0883233f, +0.2368084f, +0.2325644f, +0.2927944f,
  +0.0905940f, -0.1542199f, +0.2537753f, -0.0906199f, +0.0230738f, +0.2656012f, -0.1779556f, +0.0854678f,
  +0.3020579f, +0.1790391f, +0.0081744f, +0.1400051f, -0.0315840f, +0.0079369f, -0.1391524f, -0.2905106f,
  +0.1230613f, -0.1470620f, +0.1034880f, -0.0667991f, +0.1451145f, +0.0684613f, +0.1771013f, -0.0793693f,
  +0.0925719f, -0.2354982f, -0.0690084f, +0.0529703f, -0.2334028f, -0.1291261f, +0.1172935f, -0.1629079f,
  +0.0464143f, +0.2346436f, -0.0786323f, -0.0230102f, +0.0219168f, +0.1474833f, -0.0545641f, +0.1628994f,
  -0.2058139f, +0.1995090f, +0.0858949f, +0.0117603f, -0.2844221f, +0.0021303f, -0.1126266f, -0.1023752f,
  -0.1506206f, -0.1893170f, -0.2492462f, +0.0541007f, -0.0545344f, +0.0398707f, -0.1062539f, -0.2297355f,
  -0.0710901f, -0.0268035f, +0.0689685f, +0.0410804f, -0.2036089f, +0.3787455f, +0.0046684f, +0.1756811f,
  +0.0737948f, +0.0151841f, +0.0384625f, +0.2852669f, -0.1948022f, +0.0092938f, +0.2126172f, -0.1525252f,
  +0.1308119f, +0.0239871f, -0.0311767f, +0.2084903f, -0.0395163f, -0.1645668f, -0.0999119f, +0.2172781f,
  +0.0685379f, -0.0280212f, -0.0141003f, -0.0379474f, -0.3257749f, +0.0419088f, +0.0305493f, +0.2445840f,
  +0.0211224f, +0.0361984f, +0.1249369f, +0.1978535f, +0.0221882f, +0.3895577f, -0.1572019f, +0.0136596f,
  +0.2643919f, +0.0935635f, -0.1118563f, -0.0041226f, +0.0937023f, +0.0517876f, +0.1373948f, -0.0393032f,
  -0.3518956f, +0.0264974f, -0.0942989f, +0.0049632f, +0.0639052f, +0.0474930f, -0.0190486f, -0.2161378f,
  -0.0568672f, -0.2878817f, -0.2975818f, +0.0380687f, -0.0413282f, +0.0833945f, -0.1123427f, +0.0236430f,
  +0.1119090f, -0.0335652f, -0.0537120f, -0.1041744f, +0.2313020f, +0.0915307f, +0.1525470f, -0.0549175f,
  +0.0483460f, +0.1024235f, +0.2192326f, +0.1069096f, +0.3893344f, -0.1358636f, -0.0129125f, -0.2252459f,
  -0.6388898f, +0.1108745f, -0.1542155f, -0.2620312f, -0.0707737f, +0.0790679f, +0.1849367f, -0.2484368f,
  +0.1034328f, -0.1630256f, -0.0520321f, -0.0321835f, +0.1954523f, +0.0950474f, +0.0269933f, -0.0037539f,
  +0.0404604f, +0.0750973f, -0.0152640f, +0.1802005f, +0.1867304f, -0.1684924f, +0.0717532f, +0.1324244f,
  -0.1292220f, +0.0392894f, +0.3056715f, +0.1643654f, -0.0439192f, +0.4002691f, +0.0045444f, -0.1882699f
);

const float biases[4] = float[4](
  -0.0036043f, +0.0094417f, +0.0713963f, -0.0650789f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer95 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0467642f, +0.0281086f, -0.0709855f, -0.4045286f, +0.1000044f, -0.2602789f, +0.0864994f, +0.1009800f,
  -0.2372714f, -0.1204547f, -0.0516177f, +0.0894822f, -0.0223669f, +0.4431351f, -0.2214066f, +0.0542990f,
  -0.1288674f, -0.0063514f, +0.0568243f, -0.0649606f, +0.0135590f, +0.1277960f, +0.1517619f, -0.0625857f,
  +0.1904774f, -0.0452379f, -0.2182122f, -0.3854815f, +0.1346386f, -0.0252808f, +0.1480257f, -0.1585599f,
  -0.0884131f, -0.1658787f, +0.3854579f, +0.3563983f, +0.4495044f, +0.4329608f, +0.2676163f, +0.2025413f,
  +0.3290193f, +0.1431220f, -0.2143671f, +0.0897002f, -0.0050920f, +0.3176435f, +0.2296566f, +0.2743251f,
  +0.3422279f, -0.2222764f, -0.8298135f, -0.5735778f, +0.3936493f, -0.1289294f, +0.0312834f, -0.2070714f,
  -0.2525887f, -0.3865786f, +0.2455882f, +0.3669477f, +0.2605677f, -0.0123703f, +0.5768434f, +0.2948453f,
  -0.0215991f, -0.0566044f, +0.1589685f, +0.0171146f, +0.0071307f, +0.0543017f, +0.0399943f, +0.1034734f,
  -0.2318998f, +0.0344362f, -0.1063040f, +0.1126396f, +0.1083080f, +0.0787776f, +0.0591237f, -0.1690335f,
  +0.1325612f, +0.1085133f, -0.0302351f, -0.0530686f, +0.2185591f, +0.0924158f, +0.1358856f, +0.1080421f,
  -0.0971983f, -0.1063477f, -0.0304404f, -0.1614502f, +0.3105141f, -0.1870422f, +0.0264276f, -0.2704997f,
  +0.2921391f, +0.1434955f, -0.1409816f, +0.0885345f, -0.0286421f, +0.0462537f, +0.1830868f, +0.2538078f,
  -0.0883775f, -0.0385710f, -0.2416124f, -0.0679485f, -0.0508299f, +0.0116351f, +0.1312212f, -0.2327257f,
  -0.2660339f, +0.0525145f, +0.0611977f, -0.0584205f, -0.0715102f, +0.1393654f, -0.0000394f, +0.0609974f,
  -0.1586422f, +0.1492791f, +0.0189948f, +0.0667163f, +0.0097100f, +0.1840647f, +0.1211093f, -0.0301081f,
  -0.0945912f, +0.2105859f, +0.1677615f, -0.0803282f, -0.3735185f, -0.2702182f, +0.0134336f, +0.1703681f,
  -0.3021663f, -0.0071019f, +0.0658038f, +0.2620944f, -0.1589391f, -0.0474108f, +0.2491618f, +0.0877435f,
  +0.0810365f, -0.2885329f, +0.1329547f, +0.1264405f, -0.1759115f, +0.1672795f, +0.0940953f, +0.1059932f,
  -0.0280426f, -0.4483668f, -0.1820057f, +0.0724576f, -0.1788581f, -0.1486185f, +0.0656054f, -0.0048715f,
  +0.1199519f, -0.2040318f, -0.0307780f, +0.0680512f, +0.2044623f, +0.2779009f, -0.1072730f, +0.3645451f,
  -0.2507749f, +0.0832094f, +0.0983831f, +0.1756547f, +0.1337764f, +0.0124304f, -0.0394528f, +0.1566160f,
  +0.3403539f, -0.0727234f, +0.1126719f, +0.3652368f, -0.3305929f, -0.0071747f, +0.2554615f, -0.0082485f,
  +0.1263767f, -0.1339560f, -0.1307065f, -0.0355552f, +0.2398997f, +0.1200672f, +0.0510868f, +0.1174460f,
  -0.1325401f, +0.0161089f, -0.0132943f, -0.0376643f, +0.1257575f, -0.0276716f, -0.0156322f, +0.0528132f,
  +0.1566786f, -0.0000520f, -0.0125411f, +0.2501651f, -0.0781016f, +0.2101886f, +0.2544582f, -0.3487466f,
  +0.0305267f, -0.2274598f, +0.3682208f, +0.2487672f, -0.0620469f, -0.1248602f, -0.0656298f, -0.0482803f,
  -0.1312651f, -0.0238297f, +0.1631650f, +0.2496920f, +0.0750833f, +0.2019985f, +0.2324507f, +0.0659712f,
  +0.1713772f, +0.0342771f, -0.0213275f, -0.0144259f, -0.0792179f, -0.3730479f, +0.1430306f, -0.0263175f,
  +0.0737199f, -0.2623681f, -0.2076265f, -0.2536380f, -0.0245375f, -0.1630783f, +0.0254873f, -0.2009099f,
  -0.1249626f, +0.0201034f, +0.3224506f, +0.0374773f, +0.0767919f, +0.2316577f, +0.0144665f, -0.0557594f,
  +0.0203372f, +0.0517950f, +0.1831833f, -0.0747887f, +0.0320770f, +0.1353093f, +0.1712312f, -0.0200742f,
  +0.3847553f, +0.0331161f, -0.1787246f, -0.1467089f, -0.1408624f, +0.2325079f, -0.0393565f, +0.1530850f,
  -0.1080602f, -0.1529237f, +0.2376302f, -0.2874529f, -0.2088042f, -0.3583569f, -0.1434342f, -0.0703512f,
  +0.2626417f, -0.0964311f, +0.0146805f, +0.0627067f, +0.2223831f, +0.0790664f, -0.3602709f, +0.2016563f,
  +0.2750978f, -0.1249781f, +0.0928161f, -0.0962030f, +0.0121662f, +0.0957747f, -0.2336145f, +0.0884950f
);

const float biases[4] = float[4](
  -0.0136254f, +0.0006633f, +0.0231236f, -0.0373925f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer96 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0738102f, -0.0573178f, -0.0251132f, -0.1272868f, -0.0101639f, +0.1835385f, -0.1100162f, -0.1630854f,
  -0.1887677f, -0.1035457f, +0.1264638f, -0.0649042f, +0.0116185f, -0.0000370f, -0.0822027f, -0.3612260f,
  +0.0786097f, +0.0224210f, -0.1942096f, +0.0706599f, -0.0640390f, -0.0650286f, -0.0969346f, +0.1664397f,
  -0.0791105f, +0.0267319f, -0.0349424f, +0.0144798f, -0.0446227f, +0.1580888f, -0.2673740f, -0.1754581f,
  +0.0518789f, -0.2659145f, -0.1071423f, +0.0120322f, +0.4151374f, -0.0394931f, -0.0223562f, -0.1825832f,
  -0.1249774f, -0.0422037f, -0.0475089f, +0.1106191f, -0.3224943f, -0.0992186f, -0.1645493f, -0.1351206f,
  -0.0702066f, +0.0833911f, +0.0366395f, -0.0893103f, -0.1180240f, +0.2079545f, +0.0353068f, -0.2805000f,
  +0.1119865f, -0.2242586f, -0.1004762f, -0.2113772f, -0.0376943f, -0.0735604f, -0.1438255f, -0.0696530f,
  -0.0265953f, -0.0733986f, -0.0976423f, -0.0427865f, -0.0132508f, +0.0352228f, -0.0860431f, -0.1461071f,
  +0.0256168f, +0.0633072f, -0.1551932f, -0.0048080f, +0.2890692f, +0.2221401f, +0.0719785f, +0.0369923f,
  -0.0532582f, +0.0276832f, -0.0123594f, +0.2148619f, +0.1890513f, -0.1935952f, +0.0487730f, -0.4678049f,
  -0.0550576f, -0.1363860f, +0.0342023f, -0.2119466f, -0.1383645f, -0.1364712f, -0.1090557f, -0.0516623f,
  +0.1897056f, +0.1201249f, -0.1979291f, -0.3637741f, +0.0885203f, +0.2224407f, +0.2148758f, -0.0333480f,
  -0.1432193f, +0.1240724f, +0.0721326f, +0.4112958f, +0.1239248f, +0.0369008f, +0.0276641f, +0.0270605f,
  +0.1485874f, -0.1326365f, +0.0836914f, -0.0874058f, -0.1010286f, +0.0539744f, -0.2133483f, +0.0972216f,
  -0.1030540f, +0.1922461f, -0.0207332f, -0.1620218f, +0.0380052f, +0.1263898f, +0.1784587f, -0.0234635f,
  +0.0150668f, +0.2567213f, +0.1473365f, +0.2000348f, -0.2139860f, -0.0882739f, +0.0274103f, -0.0996799f,
  +0.0212021f, +0.0797518f, +0.3582471f, -0.0263382f, +0.0269081f, -0.1877542f, +0.2263801f, -0.0095944f,
  +0.0891549f, -0.0720809f, -0.2000092f, +0.1516611f, +0.0088537f, +0.0218774f, -0.3563182f, +0.1319288f,
  -0.0806590f, +0.1928782f, +0.0449747f, +0.1011614f, -0.0439512f, -0.0746965f, +0.2292077f, -0.1014009f,
  -0.2468370f, +0.0748245f, -0.1569298f, +0.0340327f, +0.2245573f, -0.1915375f, +0.1423146f, -0.2055505f,
  +0.0922188f, +0.2683915f, -0.1983891f, -0.1391624f, -0.0404974f, -0.1844112f, +0.0975498f, +0.0569323f,
  -0.1983406f, +0.0192729f, +0.0416966f, +0.5868884f, -0.0017406f, -0.0183563f, +0.0161658f, -0.1879550f,
  -0.0582333f, +0.0168610f, +0.1360421f, +0.2400603f, -0.0772154f, -0.0713866f, -0.1580501f, +0.0085128f,
  -0.0078806f, +0.0492759f, +0.0994617f, -0.2219263f, -0.4852098f, +0.1106735f, +0.0443909f, +0.0871000f,
  +0.0232893f, +0.0521525f, +0.0164495f, -0.0415095f, +0.2805188f, +0.1642458f, +0.0189283f, -0.0198608f,
  -0.0351557f, +0.1542080f, +0.2587062f, +0.0757581f, -0.3777404f, +0.3047285f, +0.0139038f, -0.0377034f,
  +0.1498208f, -0.0029801f, -0.1401985f, +0.2314365f, -0.0763065f, +0.1091070f, -0.2233829f, +0.3748183f,
  -0.2011438f, +0.3020729f, +0.1313870f, +0.0584122f, +0.0267634f, -0.1232677f, +0.1011230f, +0.0939944f,
  -0.1118004f, -0.0523782f, -0.0691608f, -0.0141524f, +0.1633218f, +0.1326329f, +0.1171335f, +0.1582331f,
  +0.2203441f, +0.0401232f, -0.1519706f, -0.6697479f, +0.2798061f, +0.2968221f, -0.2942871f, +0.1764796f,
  -0.0377395f, +0.1879491f, -0.1460458f, +0.1350916f, +0.1093669f, +0.1974057f, -0.1543031f, +0.1236558f,
  +0.1204152f, +0.0806059f, -0.0552634f, -0.1664087f, +0.0835218f, -0.2489615f, +0.1045089f, +0.1264048f,
  +0.1162096f, -0.1338948f, +0.1169152f, +0.2018922f, -0.0828781f, +0.1200133f, -0.0619289f, -0.0731478f,
  +0.2170676f, +0.0716312f, +0.2298683f, -0.0129473f, -0.4192061f, -0.1831672f, +0.1760109f, -0.0549103f,
  +0.1165285f, +0.0803308f, +0.1815235f, +0.0024254f, +0.2221698f, +0.1206060f, +0.1970820f, +0.0530233f
);

const float biases[4] = float[4](
  -0.0445501f, -0.0045638f, -0.0003582f, +0.0318651f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer96 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0564417f, +0.0478646f, +0.3293561f, +0.0692571f, -0.0760992f, +0.0357180f, -0.1403400f, -0.0265198f,
  -0.0917075f, -0.1206741f, +0.1139974f, +0.1350510f, -0.0548095f, +0.3682323f, -0.0069219f, -0.0930379f,
  -0.0000708f, +0.0452827f, +0.2023913f, +0.0433381f, -0.0760223f, -0.0371713f, +0.0659821f, +0.0140407f,
  -0.2398224f, +0.0625003f, -0.0615401f, -0.3876882f, -0.0398996f, -0.1293301f, -0.0333578f, +0.0742478f,
  -0.1657210f, -0.0760702f, -0.1407014f, +0.3660940f, -0.3991014f, +0.1134150f, +0.0589548f, -0.0323960f,
  +0.0002613f, +0.0167031f, -0.0332632f, -0.0198735f, -0.0181288f, -0.0995840f, +0.0441002f, +0.1420784f,
  -0.0634624f, +0.2419982f, +0.2078456f, +0.0716674f, -0.3468291f, -0.2349405f, -0.1295888f, -0.1183811f,
  -0.1292383f, -0.0657676f, +0.1575492f, +0.0784985f, -0.1972253f, +0.2128816f, -0.1218644f, -0.1059991f,
  -0.1079744f, +0.0314465f, +0.0059411f, +0.0668286f, -0.1154896f, -0.3048438f, +0.1365849f, -0.0208435f,
  +0.0776277f, +0.0474800f, -0.2103633f, +0.3546532f, +0.2583716f, +0.0487358f, -0.2225498f, +0.0208752f,
  -0.2059065f, -0.0784548f, -0.0000116f, -0.1909615f, -0.0427988f, +0.2408137f, +0.0369629f, -0.2080738f,
  -0.1222070f, +0.0759580f, +0.1755758f, +0.0104351f, +0.5187371f, -0.0655821f, +0.0361555f, +0.3916141f,
  +0.0313047f, -0.2480861f, -0.1044392f, -0.1351464f, +0.2933249f, -0.0258124f, +0.0052500f, -0.0838729f,
  -0.1919234f, +0.1363978f, -0.2166097f, +0.0838066f, -0.3191319f, +0.4243216f, +0.1338424f, +0.0486875f,
  -0.1547449f, +0.0541639f, -0.1888413f, -0.0755520f, +0.0688780f, -0.1549509f, +0.0140555f, +0.1112498f,
  +0.0244615f, -0.1528024f, -0.0327237f, +0.1749800f, +0.0741325f, +0.2650027f, +0.2253169f, -0.0473609f,
  -0.0087471f, +0.0778813f, -0.1302260f, -0.1222553f, -0.6075960f, -0.0426739f, +0.2421602f, +0.0836526f,
  -0.0998582f, +0.1459282f, +0.3167821f, +0.0444059f, +0.1943236f, +0.1610635f, -0.1291902f, -0.2528628f,
  -0.0389186f, +0.0483815f, +0.1537656f, +0.1613513f, +0.0188316f, -0.4443551f, -0.0668575f, +0.0278156f,
  +0.0377474f, +0.3105771f, -0.0887301f, -0.1019479f, +0.0946716f, -0.0483066f, -0.0593161f, +0.1325370f,
  -0.2464741f, -0.0028306f, +0.1478630f, +0.0568800f, +0.0053321f, -0.0370378f, +0.0480019f, +0.2369739f,
  -0.0461194f, -0.0394049f, -0.0556108f, +0.0184607f, -0.0856840f, -0.0081771f, -0.2065577f, -0.0044936f,
  -0.1185745f, +0.2742875f, -0.0848259f, +0.3490989f, +0.2416741f, -0.0758066f, +0.0353056f, -0.0362840f,
  +0.0433495f, +0.0923182f, +0.1261035f, +0.0140859f, -0.0897931f, +0.1028868f, +0.0102954f, -0.1914619f,
  +0.1635140f, -0.2100487f, -0.0849918f, -0.0815888f, +0.1693310f, -0.1147441f, +0.1777514f, -0.1240513f,
  +0.0351329f, +0.3279668f, +0.0542392f, -0.0295919f, +0.5233356f, +0.1889760f, +0.0754418f, +0.1194782f,
  -0.1991433f, +0.2110183f, -0.1998797f, +0.1776148f, +0.1611546f, +0.1043874f, +0.1039683f, +0.0464116f,
  -0.1359341f, +0.1273064f, -0.1301741f, +0.0186832f, +0.1010264f, -0.0153085f, -0.1624382f, +0.2646953f,
  +0.3528853f, +0.1400256f, -0.3700585f, +0.0884524f, -0.1236145f, -0.0172078f, +0.0335356f, -0.0990571f,
  +0.1003860f, +0.2566433f, -0.2464906f, +0.0261656f, +0.0734218f, +0.2023782f, -0.3141291f, -0.1011508f,
  -0.0730319f, +0.0607117f, -0.1761340f, -0.2564217f, +0.1312291f, +0.1018921f, +0.3548949f, +0.2104027f,
  +0.5093810f, -0.3701783f, -0.0426650f, +0.2068670f, -0.2621047f, -0.0173968f, +0.0516251f, -0.2380256f,
  -0.1892399f, -0.2281293f, -0.1939346f, +0.2502373f, -0.0279686f, +0.1121887f, -0.0284731f, -0.0552305f,
  -0.0073771f, -0.0313329f, +0.3487574f, +0.2775850f, +0.2682346f, +0.0430081f, -0.3218045f, +0.1273903f,
  -0.1163014f, -0.0087110f, -0.2273934f, +0.1005705f, +0.1859523f, -0.1782762f, -0.3114187f, +0.0250225f,
  -0.1145533f, +0.1013924f, +0.1436099f, -0.1337766f, -0.3076682f, -0.1150606f, -0.1817790f, +0.1658436f
);

const float biases[4] = float[4](
  +0.0521849f, +0.0296103f, -0.0077504f, -0.0590387f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer97 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0935872f, +0.0906307f, +0.0623830f, +0.0140483f, -0.1609803f, +0.0041093f, +0.1806049f, +0.0773081f,
  -0.2514427f, +0.1527935f, -0.0839533f, -0.2034823f, +0.1057112f, -0.0766360f, -0.0979978f, +0.1757656f,
  +0.1296203f, -0.0641530f, +0.1324781f, +0.0355230f, -0.0604622f, +0.0078571f, -0.1832045f, +0.2048888f,
  +0.0445605f, -0.0839225f, +0.2176785f, -0.2762411f, -0.0897615f, -0.0655963f, -0.0291440f, +0.0889918f,
  -0.0186834f, -0.3687573f, +0.3687845f, -0.1058870f, +0.0912566f, +0.0417635f, -0.3995351f, +0.3470433f,
  +0.2137579f, +0.2140597f, +0.1392293f, +0.1354762f, -0.1671304f, +0.0051534f, +0.0258911f, +0.0873855f,
  -0.2063358f, +0.1159129f, -0.0314536f, -0.1112873f, -0.0840264f, -0.0725777f, -0.1051491f, +0.0341531f,
  -0.0839246f, -0.2464443f, -0.1078736f, -0.2417799f, -0.1981554f, +0.1031285f, +0.1009513f, +0.3206140f,
  +0.0377866f, -0.1677541f, -0.1583849f, -0.0506877f, -0.1100795f, -0.3112689f, +0.0201827f, +0.3336398f,
  -0.1363320f, +0.0175696f, -0.1070179f, +0.1108994f, -0.2414760f, +0.1266631f, -0.0632179f, -0.2684180f,
  +0.0236840f, +0.1254283f, -0.0595700f, -0.1051833f, -0.1027976f, +0.2338704f, -0.1354388f, +0.1664321f,
  -0.2130227f, +0.0668004f, +0.0443291f, -0.0040252f, +0.0389899f, +0.1178234f, +0.0510572f, -0.0702458f,
  +0.0260982f, +0.3670958f, +0.1603867f, -0.1592602f, -0.1168955f, -0.1354553f, +0.3681675f, -0.2578239f,
  +0.1588283f, +0.1085970f, +0.3053162f, -0.2231980f, -0.0831601f, -0.1317484f, +0.2696426f, -0.3787645f,
  +0.1729203f, +0.1802402f, -0.2041765f, -0.0161113f, +0.0276817f, +0.2500308f, -0.0680002f, -0.0146070f,
  +0.0373863f, +0.2042248f, +0.1632572f, +0.1125623f, -0.0624459f, -0.0851302f, +0.3639331f, -0.0295756f,
  -0.2226485f, -0.0163384f, +0.4377050f, +0.3717941f, +0.0062503f, +0.2949893f, +0.1072658f, -0.4701183f,
  -0.2031859f, -0.0832343f, +0.0602097f, +0.0550155f, -0.0859744f, +0.0071535f, -0.0491842f, +0.3480227f,
  -0.0995525f, -0.0975301f, +0.0610785f, +0.0682005f, +0.1301485f, -0.0412743f, -0.0966095f, +0.0730883f,
  +0.6159334f, +0.1223638f, +0.0592831f, +0.2107553f, -0.0554479f, -0.1045687f, +0.2229984f, -0.0936303f,
  -0.1191483f, +0.0939132f, +0.3290703f, -0.2342806f, +0.1744400f, -0.3541075f, +0.2268892f, -0.6606516f,
  -0.3020953f, +0.1872872f, -0.1297628f, -0.0579603f, +0.1127470f, +0.1233176f, +0.0420118f, +0.1988007f,
  -0.2206194f, -0.4707558f, -0.1482805f, -0.0782939f, -0.2595657f, +0.3470387f, +0.1973958f, +0.0530477f,
  -0.3093241f, -0.0745509f, +0.4201153f, +0.1954313f, +0.0298229f, +0.0292956f, +0.1405377f, +0.1155903f,
  +0.1564446f, +0.0264217f, -0.1729853f, -0.1637793f, +0.0316429f, +0.0461542f, -0.1235229f, -0.0582110f,
  +0.0317397f, +0.1114882f, +0.0127050f, -0.1487889f, -0.0029198f, +0.2812423f, -0.1970891f, +0.0281708f,
  +0.1315528f, -0.0758461f, +0.0161202f, +0.0369867f, +0.0302900f, -0.2046961f, +0.1305382f, -0.1868196f,
  -0.0036348f, -0.0227853f, +0.0493477f, -0.1321303f, +0.2538342f, +0.0766202f, -0.0940442f, -0.1501096f,
  +0.0958505f, -0.2798681f, +0.1099683f, -0.0006750f, -0.2513829f, -0.0612867f, -0.0491015f, -0.2205120f,
  +0.0262377f, -0.1098773f, +0.1272907f, -0.0420607f, +0.1084752f, +0.0418462f, +0.0070869f, -0.0681638f,
  -0.2172123f, +0.1172597f, -0.0154265f, -0.0745588f, -0.1392841f, +0.1571345f, +0.1258019f, +0.1452583f,
  -0.0481006f, -0.3914959f, +0.0425595f, +0.3320752f, -0.2070663f, -0.2136934f, +0.0840905f, +0.0789422f,
  -0.2693908f, -0.0240354f, +0.0741067f, -0.0058640f, -0.0386190f, +0.2093665f, -0.0976366f, +0.0507905f,
  -0.3070772f, -0.0744223f, +0.1108801f, -0.1552215f, -0.2307289f, -0.0979389f, +0.1128788f, +0.0735499f,
  -0.1640972f, +0.1961665f, -0.0490297f, -0.0288836f, +0.0550914f, +0.0530627f, +0.1474598f, -0.0705100f,
  -0.0388466f, -0.0317318f, -0.0402917f, +0.1281582f, -0.0365856f, -0.2338190f, +0.1558284f, +0.0563517f
);

const float biases[4] = float[4](
  -0.4029853f, -0.0988711f, -0.0352494f, +0.0674618f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer97 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0431884f, +0.0197413f, -0.0360826f, -0.0435003f, -0.0314286f, +0.0792511f, -0.1795809f, +0.0847166f,
  +0.1637745f, -0.1169066f, -0.1666464f, -0.0381979f, +0.2115313f, -0.0973253f, +0.0918489f, -0.1011114f,
  -0.0059659f, +0.0150933f, -0.1816188f, +0.0081393f, +0.1208540f, +0.0974837f, +0.1505679f, -0.0341028f,
  +0.0407244f, -0.0050740f, +0.0334214f, +0.1883954f, -0.1470292f, -0.0603604f, -0.0108806f, -0.0752708f,
  +0.0280813f, -0.0680707f, +0.1197238f, +0.1346852f, -0.2241477f, +0.2294466f, +0.0862448f, -0.1266451f,
  +0.0772516f, +0.0594652f, +0.1135608f, +0.1810349f, -0.1763602f, -0.0401338f, +0.2278526f, -0.0784195f,
  +0.0697058f, -0.0667374f, +0.0562935f, +0.0138394f, -0.0088603f, -0.0595747f, +0.0015124f, +0.0671758f,
  -0.1179974f, +0.0878870f, -0.0657240f, -0.0158100f, +0.0658386f, +0.1005520f, +0.0124500f, -0.1473328f,
  +0.0440540f, +0.0877146f, +0.1306948f, +0.1827591f, +0.1988814f, -0.0076266f, +0.0034636f, -0.0452032f,
  -0.0883968f, -0.0363202f, +0.0228681f, -0.0552265f, -0.0172937f, -0.0119486f, -0.1887530f, +0.0960138f,
  +0.0843544f, +0.2037895f, -0.1023911f, +0.0146976f, +0.0384463f, +0.1636544f, +0.1697488f, -0.1035309f,
  -0.0156667f, -0.0780743f, -0.1335983f, +0.0495741f, +0.1727781f, +0.1997106f, +0.0608221f, -0.0125047f,
  -0.3523751f, +0.1191039f, -0.1099292f, +0.1192869f, -0.1209914f, -0.0101924f, -0.1363394f, -0.2117898f,
  -0.0101162f, -0.1607319f, +0.1211162f, +0.1141189f, -0.0413864f, -0.0266958f, -0.1247621f, -0.1069862f,
  -0.1591088f, -0.0237437f, +0.1534276f, -0.0595229f, -0.0568256f, -0.0100071f, -0.0390210f, +0.0520073f,
  +0.1142931f, -0.0465492f, -0.0322469f, -0.0325167f, +0.0354009f, -0.0566918f, +0.0269358f, -0.0698788f,
  +0.0219025f, +0.1170418f, +0.0695313f, +0.1324530f, +0.1153583f, +0.0516894f, +0.0093148f, -0.0615897f,
  -0.0396728f, +0.1026594f, -0.0788480f, +0.0942202f, +0.1527340f, -0.1090040f, -0.0888316f, -0.0297528f,
  +0.1170892f, +0.1937890f, -0.2242167f, -0.0298897f, -0.0138054f, +0.1152140f, -0.0622780f, -0.1168169f,
  -0.2552831f, -0.0106810f, +0.3228223f, -0.0520409f, -0.0094195f, -0.0813421f, -0.0056498f, +0.1073401f,
  -0.0893355f, +0.0521368f, -0.1450706f, -0.0779392f, +0.0115451f, +0.0914386f, -0.0421781f, -0.0508795f,
  +0.2361396f, +0.2212797f, -0.1438252f, -0.2232422f, -0.0027096f, +0.2528763f, -0.2128155f, +0.0127336f,
  +0.0565857f, +0.0218605f, -0.0294337f, -0.1176211f, +0.1896669f, -0.1083671f, +0.0912797f, -0.0813329f,
  -0.0476539f, -0.1568036f, -0.1124948f, -0.0384072f, +0.0431028f, -0.2709417f, -0.0707719f, +0.1294698f,
  +0.0239168f, +0.2107781f, -0.2800038f, -0.1454826f, -0.1027523f, +0.0221185f, -0.3507664f, -0.0883288f,
  +0.0561742f, +0.0850503f, +0.2364215f, -0.1298564f, -0.1347022f, +0.1356457f, +0.1488416f, +0.2269699f,
  -0.0482052f, +0.1755250f, -0.3749555f, -0.1769304f, +0.0303833f, +0.0044139f, -0.1914753f, +0.0335613f,
  +0.1272515f, +0.1328150f, -0.1461718f, -0.1406577f, +0.0536037f, +0.3048348f, -0.0844349f, -0.0418776f,
  +0.2369930f, -0.3846921f, +0.4371256f, -0.2215634f, +0.5357309f, -0.2323408f, +0.1650494f, +0.0799742f,
  +0.0172048f, -0.1410232f, -0.1477015f, +0.0370538f, +0.3779126f, +0.2063015f, -0.0089381f, +0.2882213f,
  +0.0341796f, -0.0870100f, +0.0240787f, -0.2097225f, -0.3013961f, -0.1560362f, -0.2784759f, -0.0967349f,
  -0.0334031f, +0.0930947f, -0.1499228f, -0.2239677f, -0.3412912f, -0.2500541f, -0.0091584f, -0.1765312f,
  -0.0521150f, +0.1463172f, +0.0137497f, -0.0881374f, +0.1351583f, +0.0047055f, +0.1605642f, +0.3198765f,
  -0.1444507f, +0.0923253f, +0.0475495f, +0.4008511f, +0.2702965f, +0.1287554f, +0.2583417f, +0.0086503f,
  -0.0019789f, -0.0542148f, +0.2202217f, +0.1519401f, +0.0734409f, +0.0607707f, +0.1988715f, -0.0542063f,
  +0.1656386f, +0.0202583f, -0.0929015f, -0.1197142f, +0.0504242f, +0.0047068f, +0.2068802f, +0.2494286f
);

const float biases[4] = float[4](
  -0.0791069f, -0.0238933f, -0.0042420f, -0.0207828f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer98 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1068618f, +0.0388774f, -0.1395939f, -0.1548414f, +0.1013020f, +0.0825752f, -0.1027939f, +0.0037746f,
  +0.0007210f, +0.0849652f, +0.0708927f, +0.1279747f, +0.3394505f, -0.0409074f, -0.1028491f, +0.0851301f,
  +0.1392877f, +0.1864892f, -0.1077804f, +0.1399775f, +0.0819845f, -0.1107764f, -0.1505188f, -0.0834602f,
  -0.3415267f, -0.0302737f, -0.2012039f, -0.2110819f, +0.2778902f, +0.1890035f, -0.1079664f, +0.2619509f,
  -0.0539101f, -0.0492422f, +0.0610864f, +0.0384980f, +0.0387286f, +0.0131212f, -0.0560559f, +0.2940794f,
  -0.0013871f, +0.2105932f, -0.2391083f, -0.1808950f, +0.0097281f, +0.1648468f, +0.1114940f, -0.0321764f,
  -0.0805649f, +0.1223779f, +0.2021851f, -0.0824642f, -0.0219087f, +0.1146890f, +0.1278568f, +0.1771930f,
  +0.0920891f, +0.0498638f, +0.2715467f, -0.0476267f, -0.0300711f, -0.1049414f, +0.1191860f, -0.0591869f,
  +0.0676491f, +0.0849962f, +0.0193881f, -0.1879096f, +0.2542108f, -0.0147893f, -0.1453671f, +0.1337102f,
  +0.1134365f, -0.0733292f, -0.0189984f, +0.0692614f, -0.0382202f, +0.0236083f, -0.0239602f, +0.1161597f,
  +0.5185943f, +0.1889892f, -0.2534985f, -0.3720044f, -0.1201754f, +0.0573915f, -0.1933215f, -0.0692997f,
  -0.0779889f, +0.0321253f, -0.0422177f, +0.1194172f, +0.1989869f, +0.0483536f, -0.1436255f, +0.1976438f,
  +0.2425075f, -0.0145900f, -0.2122100f, -0.0938316f, +0.3095273f, +0.0584144f, -0.1695159f, +0.1914322f,
  +0.6447220f, -0.0155481f, -0.3275544f, +0.1981985f, +0.0623342f, -0.0183509f, -0.1203224f, -0.2907077f,
  -0.1675947f, +0.4014643f, +0.1815524f, -0.2772036f, -0.0715106f, +0.0155094f, +0.2996609f, +0.3433440f,
  -0.0719094f, +0.0173272f, +0.1194646f, -0.0891067f, +0.4017559f, -0.4059575f, -0.1728468f, -0.2561286f,
  +0.1073333f, +0.0506699f, -0.0714939f, +0.2129733f, +0.1033892f, +0.0917051f, +0.0760307f, -0.1929377f,
  +0.2053300f, +0.1214589f, -0.1227190f, +0.1173783f, -0.2031981f, -0.1663649f, +0.0866269f, -0.0438306f,
  +0.4141083f, +0.0423989f, +0.1465083f, -0.1384261f, -0.0707601f, +0.1421648f, +0.2297202f, -0.0796084f,
  +0.2802188f, +0.0865327f, +0.1316533f, -0.0375617f, +0.0039350f, -0.0539692f, +0.0813819f, -0.0136601f,
  +0.3532046f, +0.0856451f, +0.0670758f, -0.2976887f, +0.2018401f, -0.0127020f, +0.1226147f, -0.0492935f,
  +0.4451790f, +0.2616636f, +0.0254847f, +0.0152007f, -0.0313546f, -0.2587622f, -0.0141578f, +0.0948994f,
  +0.0677849f, +0.0567933f, -0.0093277f, -0.0419197f, -0.2329687f, +0.0157465f, -0.2341970f, -0.0380951f,
  +0.1536150f, +0.2967121f, +0.0725325f, -0.1567236f, -0.2034962f, +0.1617181f, -0.1632144f, +0.0117404f,
  -0.0173243f, -0.0119216f, +0.1577700f, -0.2094735f, -0.1798104f, +0.2017222f, -0.1819323f, -0.0004278f,
  -0.0077250f, +0.0241618f, +0.0456468f, +0.1179361f, +0.2184411f, -0.0437176f, -0.2635221f, -0.4020475f,
  -0.0935748f, +0.0310518f, +0.0546176f, -0.0157675f, +0.1033838f, +0.2399549f, +0.1098628f, +0.2119641f,
  -0.0017497f, +0.1659697f, +0.1612146f, +0.0538727f, -0.2261808f, -0.1100007f, +0.1513781f, +0.0349474f,
  -0.0360851f, +0.0192902f, +0.1170605f, -0.0470123f, +0.1845199f, -0.1737661f, -0.1397021f, +0.0531155f,
  -0.0303228f, -0.1102431f, +0.1580336f, -0.2278708f, -0.2420179f, +0.1896220f, +0.3181888f, -0.2224691f,
  +0.0479012f, -0.1070665f, +0.1777559f, +0.1270141f, -0.2714989f, -0.0204018f, +0.0721188f, -0.3018319f,
  -0.2825869f, -0.4578168f, -0.4371977f, +0.2846233f, +0.1435378f, -0.0717713f, +0.2217142f, +0.3367599f,
  +0.1714332f, -0.4094906f, +0.3682632f, +0.1309831f, +0.0184086f, +0.2081080f, +0.0755612f, -0.1303419f,
  +0.1287132f, -0.0316818f, -0.0537518f, +0.2059426f, +0.2135670f, -0.2848309f, -0.3745953f, -0.0542547f,
  +0.0383173f, -0.2629928f, +0.1658345f, +0.0080563f, +0.2106251f, +0.1565812f, +0.0838966f, -0.4376757f,
  -0.1610646f, -0.2730067f, +0.1730992f, -0.0846359f, +0.1226303f, +0.3640615f, +0.1876238f, -0.2189546f
);

const float biases[4] = float[4](
  -0.0568564f, +0.0307331f, +0.0769745f, -0.0316075f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer98 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3591548f, -0.0549192f, -0.1125256f, +0.1090464f, -0.3264741f, -0.1280639f, +0.0403681f, +0.1815804f,
  +0.5574732f, +0.0169163f, -0.1760474f, +0.2110255f, +0.0232519f, +0.2929837f, +0.0098247f, +0.1679010f,
  -0.0518354f, +0.0470028f, -0.0292565f, +0.1331814f, +0.0937566f, +0.0569286f, -0.0938604f, +0.0087401f,
  +0.2620467f, -0.0037934f, -0.1113435f, -0.0840180f, +0.0279692f, +0.0358504f, +0.0771700f, -0.1588987f,
  -0.1515058f, +0.1433198f, -1.0566510f, +0.0883593f, +0.0474141f, -0.1082948f, +0.3543453f, -0.2702464f,
  +0.0248734f, -0.0581685f, -0.0424161f, +0.0277467f, +0.3453101f, +0.1047292f, +0.2346955f, -0.1291426f,
  +0.0772388f, +0.0569214f, +0.1294253f, +0.2096583f, -0.2256526f, +0.2079214f, +0.0602019f, -0.1609868f,
  -0.1222253f, +0.0043495f, -0.0909274f, -0.1770265f, -0.2051820f, +0.0264375f, -0.2204142f, -0.2542783f,
  -0.0764138f, -0.0769528f, -0.0471702f, +0.0384255f, +0.1856540f, +0.0479563f, -0.0327209f, -0.1459747f,
  +0.3758738f, +0.0403139f, -0.2151888f, -0.2756366f, +0.1543116f, -0.1492204f, -0.0764189f, -0.0402222f,
  +0.4948356f, +0.1245485f, +0.0488226f, +0.0523555f, -0.0488787f, -0.0855507f, -0.0205337f, -0.2285640f,
  -0.0123070f, +0.0038608f, +0.0805715f, +0.0065043f, +0.1493715f, -0.0618471f, -0.1670969f, -0.2764700f,
  +0.0126112f, +0.2975681f, +0.2545865f, +0.1529832f, +0.1495487f, +0.0861665f, +0.2466788f, +0.0732304f,
  +0.1331000f, +0.0868229f, -0.3275334f, -0.2721051f, -0.3419744f, -0.2939347f, +0.0253319f, +0.0772624f,
  +0.0104349f, +0.0444777f, -0.0799277f, -0.0725346f, +0.1807838f, +0.1148103f, -0.2688937f, -0.1395125f,
  -0.0448719f, +0.1080101f, +0.2170902f, -0.3054973f, +0.1950313f, -0.1694399f, -0.0319525f, -0.0097528f,
  -0.0572023f, -0.1210867f, -0.0503353f, -0.0251505f, -0.3815063f, +0.0553840f, -0.0902297f, +0.1456557f,
  -0.1994219f, +0.0081758f, -0.0772992f, +0.0742252f, +0.1249813f, +0.0793239f, -0.0948504f, -0.2308483f,
  +0.1834433f, +0.1477992f, -0.1013010f, -0.0733343f, +0.3264603f, +0.1796404f, +0.2125676f, -0.1653504f,
  +0.2204134f, +0.2058395f, +0.0991885f, +0.1661255f, -0.0270662f, +0.0763607f, +0.0973166f, -0.2577165f,
  +0.1844398f, +0.2074982f, +0.0544506f, -0.0934480f, +0.0423593f, +0.0847370f, -0.0740926f, -0.0423284f,
  +0.2680899f, +0.2209968f, +0.4797828f, +0.2246867f, -0.1653887f, +0.2157055f, +0.1722140f, -0.1283804f,
  +0.5007749f, -0.1167915f, +0.0852666f, +0.0268839f, -0.0007552f, -0.1176180f, +0.1193439f, -0.2157694f,
  -0.1033004f, +0.3166931f, +0.1456240f, -0.0697384f, +0.0555799f, +0.1379265f, +0.0267743f, +0.2775574f,
  +0.2419896f, +0.0222019f, -0.0646696f, -0.0705397f, +0.1283416f, -0.0722444f, -0.0837543f, -0.3863597f,
  +0.0712167f, -0.0127445f, +0.1694838f, +0.0873857f, -0.0119666f, +0.0612156f, -0.0277130f, -0.0493193f,
  -0.0427792f, -0.1342368f, -0.1610898f, +0.2265931f, +0.2844432f, -0.4300222f, +0.1258386f, +0.3006353f,
  -0.3627924f, +0.2192405f, +0.1152250f, -0.3677797f, +0.4609138f, -0.0643842f, -0.1489761f, -0.0466911f,
  -0.4972189f, +0.1750209f, +0.0373193f, +0.2202666f, -0.1053072f, -0.0909182f, -0.1704271f, -0.1144846f,
  +0.1560038f, -0.0701291f, +0.1285848f, +0.0915160f, +0.1570097f, -0.0555694f, -0.1072705f, +0.1056990f,
  -0.5459501f, +0.1426263f, +0.4599602f, -0.1209171f, -0.2385905f, -0.0799422f, +0.2238549f, -0.1162762f,
  -0.0361582f, -0.1319839f, -0.0819817f, -0.2439297f, +0.1504929f, -0.1891087f, +0.1621818f, -0.2058736f,
  -0.1400963f, +0.2447290f, -0.1344340f, +0.1314821f, -0.1056344f, +0.2154946f, +0.2130692f, -0.0966556f,
  -0.4496984f, +0.1695062f, +0.0033285f, +0.1236238f, -0.2497334f, -0.1590804f, +0.0677378f, -0.0615391f,
  -0.4181463f, +0.0267302f, -0.4945892f, -0.0476430f, -0.1732123f, -0.1043928f, +0.1066826f, -0.2007285f,
  -0.2340711f, +0.0679008f, +0.1564336f, +0.1515244f, +0.2967818f, -0.0398593f, -0.1069978f, -0.4377219f
);

const float biases[4] = float[4](
  -0.0154023f, +0.0166705f, +0.0074541f, +0.0357609f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer99 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0919793f, -0.1154565f, -0.0270567f, -0.2556611f, +0.0905660f, -0.2709807f, -0.1923022f, +0.1356000f,
  +0.0975036f, -0.0770895f, +0.1075867f, -0.0615800f, -0.0790842f, -0.0731545f, -0.2694981f, +0.1567920f,
  -0.1204305f, +0.0968930f, -0.0919845f, -0.0588273f, -0.1032824f, -0.0176944f, -0.1066110f, -0.1111304f,
  +0.0101808f, -0.3335983f, -0.1232609f, +0.1703063f, -0.0522676f, +0.0693956f, -0.0299713f, -0.2052172f,
  -0.1695463f, -0.3807583f, +0.1750981f, +0.1382468f, -0.2163095f, +0.1935380f, -0.0110796f, -0.1566802f,
  -0.2284221f, -0.0622670f, +0.0626864f, +0.0918903f, -0.0448181f, +0.2311081f, -0.0751328f, +0.1202253f,
  +0.3569627f, -0.0571094f, +0.0344724f, +0.1898749f, -0.0708172f, -0.2917739f, +0.2841952f, +0.0080607f,
  +0.0227485f, +0.0300858f, +0.2958920f, +0.2227128f, -0.2862322f, +0.2074847f, +0.0474913f, +0.1400556f,
  +0.3071418f, +0.0478204f, +0.1048772f, +0.3348497f, +0.1176600f, +0.0400107f, -0.0374959f, +0.2259623f,
  +0.0757638f, +0.0200706f, -0.3566924f, +0.0838686f, +0.0972608f, -0.5073166f, +0.0792250f, -0.1173739f,
  +0.1176778f, -0.2583070f, -0.0619103f, -0.0250049f, +0.1706411f, +0.0655312f, -0.0871823f, +0.1087170f,
  +0.2757794f, -0.3567336f, +0.3150361f, -0.2791606f, +0.0402548f, +0.0665550f, +0.3443037f, +0.3151037f,
  -0.1617481f, -0.2826660f, +0.1135432f, +0.0290392f, +0.3214055f, +0.3084297f, +0.0952382f, -0.4045568f,
  -0.1383033f, -0.3049918f, +0.2951396f, +0.0021041f, -0.0252214f, +0.1358504f, +0.1621522f, +0.0823160f,
  +0.1906597f, -0.2283001f, +0.0473333f, +0.0587301f, +0.1122449f, -0.1750270f, +0.3087057f, +0.1337642f,
  -0.1841583f, -0.0927371f, -0.1326569f, +0.1094362f, +0.1014966f, -0.0744302f, +0.2174276f, -0.1924912f,
  +0.1533053f, +0.0449503f, -0.2944954f, +0.2172229f, +0.2903932f, -0.0119374f, +0.0889968f, -0.0285150f,
  +0.0565321f, -0.0678110f, -0.1291624f, -0.0490312f, +0.3780409f, -0.2554094f, +0.0720894f, +0.0740583f,
  -0.1411229f, +0.0632069f, -0.0205250f, -0.0362350f, +0.1553175f, -0.2071513f, -0.2320535f, +0.2009969f,
  +0.2416332f, -0.0954851f, +0.0116887f, +0.4025060f, -0.1135521f, +0.0078677f, -0.2061814f, -0.1469559f,
  -0.0144805f, +0.0151694f, +0.1728754f, +0.1233682f, -0.0174584f, +0.2493083f, -0.1506615f, -0.0639367f,
  -0.0626993f, +0.0105572f, +0.0587551f, +0.1629987f, +0.2289592f, +0.0732649f, -0.0569987f, +0.2404488f,
  +0.1100747f, -0.0457785f, -0.0280045f, -0.3790753f, -0.2375301f, +0.2709023f, -0.1431727f, +0.1694353f,
  +0.0349081f, -0.0463052f, +0.1546621f, +0.1026379f, -0.2554911f, -0.1236612f, +0.0359921f, +0.1643710f,
  -0.0543821f, -0.1647763f, -0.0951445f, -0.2139610f, +0.1646244f, +0.1443362f, -0.0919997f, -0.1624442f,
  +0.4074414f, -0.2680764f, -0.1615048f, -0.2588624f, +0.3848281f, +0.1575658f, -0.0953250f, -0.1059906f,
  -0.0577761f, -0.1719385f, -0.0485004f, -0.1487268f, +0.1368628f, -0.2016100f, +0.1332008f, +0.0393772f,
  -0.0297979f, -0.2455692f, +0.1471421f, -0.1249618f, +0.2176749f, +0.1298137f, +0.3352058f, +0.0230465f,
  -0.0577792f, -0.3059510f, -0.0977329f, +0.3231121f, +0.0472554f, +0.2940521f, -0.0181091f, +0.3191384f,
  +0.0624271f, -0.3689910f, +0.0000929f, -0.0610780f, +0.1981226f, -0.0941161f, +0.0197818f, -0.0241890f,
  +0.0393383f, -0.3860376f, -0.0746553f, -0.0953416f, -0.0091194f, -0.1993233f, +0.3597684f, -0.1466460f,
  -0.0453800f, -0.2156223f, +0.5249890f, +0.2893748f, -0.0272615f, +0.0405967f, +0.3541928f, +0.0563279f,
  +0.0069697f, +0.0835985f, +0.3191755f, +0.2950661f, -0.0003777f, -0.0632194f, -0.2143401f, -0.1562935f,
  +0.1267497f, +0.2353237f, -0.0093980f, +0.0883692f, +0.0167952f, -0.2124759f, +0.2500436f, +0.1383340f,
  +0.0526990f, +0.1382166f, +0.0458729f, +0.0675396f, +0.0162644f, +0.1079255f, -0.2301596f, -0.0084418f,
  -0.1252332f, +0.1421535f, +0.0123867f, -0.1759170f, +0.0629487f, -0.0969424f, -0.2980136f, -0.1350958f
);

const float biases[4] = float[4](
  -0.0162951f, -0.0095702f, -0.0329469f, -0.0401976f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer99 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0184610f, -0.1380385f, +0.0335752f, -0.1664157f, +0.4424724f, -0.0784339f, -0.1157781f, -0.0154967f,
  +0.2583035f, -0.1203199f, +0.1060328f, -0.0877223f, +0.3741636f, +0.2273835f, +0.1779198f, +0.4001780f,
  +0.2522128f, +0.0391233f, -0.3509778f, -0.1769446f, -0.1617664f, -0.2436374f, -0.2090361f, +0.0065202f,
  +0.2588641f, -0.3720836f, -0.0657341f, -0.0349431f, -0.0878837f, -0.2308243f, +0.2480562f, +0.1812418f,
  +0.0522393f, -0.2001440f, +0.0431312f, +0.1018576f, +0.3463695f, -0.2128477f, +0.0240459f, +0.0318472f,
  -0.0304317f, +0.0460992f, -0.0759129f, -0.0672635f, -0.3089450f, +0.1064607f, -0.3672779f, +0.2289103f,
  +0.1129943f, -0.1078241f, +0.3084987f, +0.0005372f, +0.1111659f, -0.2963454f, -0.2564557f, -0.4031156f,
  +0.0358609f, -0.3353059f, -0.2693262f, -0.0772745f, +0.0056117f, -0.3519624f, +0.3297841f, +0.2296767f,
  +0.1633850f, -0.1215655f, +0.0508631f, +0.2194371f, +0.1346596f, +0.2448515f, +0.1173189f, +0.0492355f,
  +0.2533472f, +0.1370530f, -0.2949465f, -0.1356906f, -0.0553592f, -0.0495260f, +0.0572484f, +0.0132567f,
  -0.1202330f, -0.0730290f, -0.1303066f, -0.1959777f, +0.3348548f, -0.1284817f, -0.2480641f, -0.0099827f,
  +0.0063151f, +0.0291917f, +0.1405555f, -0.0014422f, -0.0776837f, +0.0143191f, -0.1300797f, -0.1567170f,
  +0.1117222f, +0.0768125f, -0.0914408f, +0.0132276f, +0.1348977f, +0.0651916f, +0.0716825f, -0.2996157f,
  -0.1513885f, -0.0204561f, -0.2470399f, -0.3890887f, +0.0199642f, +0.3078940f, -0.3492966f, +0.0680531f,
  +0.0539268f, +0.1270352f, -0.1165760f, -0.0041357f, +0.1886486f, +0.1933400f, -0.1009287f, +0.3128594f,
  -0.0681181f, -0.2434702f, -0.0822505f, -0.1145486f, -0.0584123f, -0.1294119f, +0.1611836f, +0.0340233f,
  -0.0392204f, +0.0313666f, -0.0199976f, +0.2160019f, +0.0642984f, +0.0199742f, +0.3182517f, +0.0526190f,
  +0.1093121f, -0.0431905f, -0.1627659f, -0.1514698f, +0.0461948f, +0.1690229f, -0.0608442f, +0.1955261f,
  +0.0709569f, +0.0263673f, +0.1235585f, -0.0696435f, +0.1364307f, -0.1354869f, -0.1811759f, +0.1186957f,
  -0.0636488f, +0.2014279f, -0.1232305f, -0.0930581f, -0.1076340f, -0.0612931f, -0.2823734f, +0.1744328f,
  -0.0027212f, -0.0343987f, -0.0377303f, -0.0568912f, +0.0825306f, -0.0548468f, -0.1320104f, -0.0205326f,
  +0.1330840f, -0.0657984f, -0.0200590f, -0.0719713f, -0.1072613f, +0.0698426f, -0.1235460f, +0.1610606f,
  -0.1523283f, -0.0841483f, +0.2396823f, +0.1634560f, -0.0165727f, -0.0389258f, -0.1429003f, -0.0043979f,
  -0.0896214f, +0.0131862f, +0.0343473f, -0.0014031f, +0.0863946f, +0.1183456f, -0.0163892f, -0.0303965f,
  +0.1804537f, +0.1171376f, -0.0768936f, +0.0218140f, -0.1951513f, +0.0556182f, +0.0042594f, -0.1403230f,
  -0.3205431f, +0.1632680f, +0.1528160f, +0.1744576f, +0.0498075f, +0.1772191f, -0.1096710f, +0.0025958f,
  -0.0540395f, +0.0508797f, -0.0667751f, +0.0085964f, +0.1096476f, -0.1329165f, -0.1189165f, -0.0906637f,
  +0.0984279f, +0.1416232f, -0.0898111f, -0.1475439f, -0.2700849f, -0.0301464f, +0.1542783f, -0.1032777f,
  +0.1525177f, -0.0538877f, -0.0610065f, -0.0557981f, -0.0344194f, -0.0270940f, +0.0068888f, -0.0931583f,
  +0.1096003f, -0.1505308f, -0.0707425f, +0.0727114f, +0.1292076f, +0.2127766f, +0.0758381f, +0.1101690f,
  -0.0850087f, +0.0479858f, -0.0163614f, -0.0092373f, -0.1205625f, -0.2643290f, -0.1758762f, -0.3187493f,
  -0.2239345f, +0.0133090f, +0.1555864f, -0.2462646f, +0.3016813f, +0.0462507f, -0.0867035f, -0.4423095f,
  +0.1673022f, +0.0584684f, -0.1171362f, +0.1232934f, +0.0255864f, +0.0072285f, +0.2950820f, +0.1275951f,
  -0.1047504f, -0.0289545f, +0.2049549f, +0.4086159f, +0.0828956f, -0.0007428f, +0.4146631f, +0.0122298f,
  +0.1614420f, -0.1907747f, +0.0979337f, +0.2500495f, +0.0132145f, +0.5411873f, +0.1597918f, +0.1021501f,
  -0.2076876f, -0.0862367f, +0.0600930f, -0.0229807f, +0.0210079f, +0.1921887f, -0.0212457f, -0.0960331f
);

const float biases[4] = float[4](
  -0.0167179f, +0.0819198f, +0.0050520f, -0.1874935f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer100 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1508277f, +0.0631450f, +0.0150881f, -0.1887819f, +0.1426237f, -0.1328245f, -0.1002428f, -0.1139529f,
  +0.0185980f, +0.1706349f, -0.2361066f, -0.1304746f, -0.2600456f, +0.1473819f, +0.0382979f, -0.2172158f,
  +0.1512139f, -0.3983279f, +0.2240968f, +0.0373091f, -0.0504541f, -0.1587977f, -0.1843464f, -0.1233405f,
  -0.0773404f, +0.0115493f, +0.1748689f, -0.0277650f, +0.1180058f, -0.0914128f, +0.0574470f, +0.0230914f,
  +0.1804685f, -0.0464745f, +0.1984809f, -0.0139605f, +0.2235951f, +0.0456831f, -0.1902156f, -0.1931581f,
  +0.0693849f, +0.2551686f, +0.1640520f, -0.0151672f, -0.1233444f, -0.0517108f, -0.1672409f, -0.2937205f,
  -0.0094343f, +0.0183589f, -0.1126170f, +0.0471260f, +0.0700209f, +0.0083835f, -0.0606646f, +0.0738458f,
  -0.2376890f, -0.1686422f, -0.1104120f, -0.0393465f, -0.2532915f, -0.0377165f, +0.0434541f, +0.0599278f,
  +0.0298630f, +0.1068014f, +0.2074939f, -0.0003413f, +0.0397374f, +0.0140310f, -0.0456475f, +0.0303195f,
  +0.0542535f, +0.0629468f, +0.1250038f, -0.0077052f, +0.1392449f, +0.0841425f, +0.0798454f, +0.0750866f,
  -0.3019350f, +0.0592148f, +0.2682688f, +0.0184403f, +0.0772436f, -0.2284456f, -0.2129923f, +0.0426413f,
  -0.1240123f, -0.0478483f, -0.1784754f, +0.0962639f, +0.0600907f, +0.2621692f, -0.1710609f, +0.0384766f,
  -0.1321562f, +0.0300195f, -0.1856042f, -0.1549542f, -0.2137970f, -0.0614160f, -0.2550369f, +0.1762771f,
  +0.2750921f, -0.0698549f, +0.2381846f, -0.2165132f, -0.0371894f, -0.1162553f, -0.1045248f, -0.2225640f,
  +0.0848743f, -0.1941870f, +0.0393476f, +0.0037609f, +0.2408465f, -0.1478868f, -0.0379547f, -0.0194070f,
  -0.0190619f, +0.0523928f, +0.1818213f, -0.1377852f, +0.0154472f, -0.1429980f, -0.0605294f, +0.0720801f,
  -0.1623563f, +0.0628566f, +0.2691953f, -0.0533859f, +0.0172486f, -0.0180772f, -0.1871774f, +0.0259239f,
  +0.0947523f, +0.0831046f, -0.1155722f, -0.2320194f, -0.0459924f, -0.0352486f, +0.1541167f, -0.4095173f,
  -0.1837834f, +0.3454939f, -0.1319273f, +0.3080859f, +0.2169739f, +0.0632998f, -0.0576062f, -0.1091133f,
  -0.2780866f, +0.2695499f, +0.0140451f, +0.1241027f, +0.0965936f, +0.0358428f, -0.2275248f, +0.0076852f,
  -0.1612923f, +0.1352810f, -0.1271846f, -0.0199181f, -0.0047178f, +0.0404150f, +0.0071717f, -0.1714530f,
  -0.3053988f, +0.3376195f, -0.6042203f, +0.3256706f, +0.1976522f, +0.1240859f, -0.1132612f, -0.0649442f,
  -0.1967646f, +0.0213625f, -0.0372005f, -0.1168754f, +0.3038214f, -0.2195666f, -0.1022091f, -0.3168167f,
  -0.1273056f, -0.1954594f, -0.0441676f, +0.1761755f, -0.0527887f, +0.0301532f, +0.1293614f, -0.3179468f,
  +0.0252913f, -0.1119862f, -0.2038352f, +0.1020199f, +0.1240111f, +0.0041603f, -0.0088273f, +0.0156529f,
  -0.0957337f, -0.1230219f, -0.0249176f, +0.2126763f, -0.2095392f, +0.2119200f, +0.2344103f, +0.0594864f,
  +0.3206310f, -0.1225026f, -0.0353022f, -0.1084295f, -0.0621755f, -0.0039828f, -0.2175227f, -0.0618052f,
  -0.1341133f, -0.0625232f, +0.1160962f, +0.0879652f, -0.0033140f, +0.0081521f, -0.1363285f, +0.0723641f,
  +0.2118837f, -0.4698518f, -0.0222300f, +0.2962726f, +0.1066439f, -0.0706847f, -0.1250112f, -0.0922356f,
  -0.0157089f, -0.0239709f, -0.3341865f, +0.1130101f, -0.0004794f, -0.1048658f, +0.1587965f, -0.0994681f,
  -0.1177263f, -0.0723094f, -0.2331236f, +0.1580089f, -0.0121623f, -0.0855775f, +0.0758900f, +0.2440144f,
  +0.1923873f, -0.1866505f, +0.3652558f, -0.1109274f, +0.0263454f, +0.1112781f, +0.0495093f, -0.0338478f,
  +0.0885115f, +0.1571988f, -0.2311777f, -0.0837383f, -0.1373128f, -0.1447674f, +0.2398417f, +0.4310454f,
  -0.2428613f, -0.0162034f, -0.3588374f, -0.0880396f, -0.0833002f, -0.1894963f, -0.0111409f, +0.3455659f,
  +0.0327975f, +0.1592830f, -0.3046784f, +0.0424746f, -0.0235611f, -0.0551909f, +0.1412218f, +0.3566409f,
  +0.0988911f, -0.2282492f, -0.1176258f, +0.0689167f, +0.1917037f, +0.0154046f, +0.1857366f, +0.0618302f
);

const float biases[4] = float[4](
  -0.0333699f, +0.0116891f, +0.0752502f, -0.0122919f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer100 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1892160f, -0.0750735f, -0.1308466f, +0.0202833f, +0.2485885f, +0.0631990f, -0.0629083f, -0.0441279f,
  +0.0507487f, -0.0743537f, +0.0128813f, -0.3273664f, +0.1070378f, -0.1676718f, -0.1870732f, -0.1091960f,
  +0.0988969f, +0.1093920f, -0.1513867f, +0.0557338f, +0.0522151f, -0.0241596f, -0.0173610f, -0.1532081f,
  -0.2606749f, -0.1597402f, +0.0955982f, +0.1501915f, +0.0428177f, -0.0182795f, -0.2431410f, -0.1867799f,
  -0.5109236f, +0.0452357f, +0.2950731f, -0.0458494f, -0.3771681f, -0.0346568f, +0.0595778f, -0.4816572f,
  -0.1050647f, -0.0010399f, -0.1101212f, -0.1669323f, -0.2083779f, -0.0421668f, -0.0603375f, -0.2351827f,
  -0.1721525f, -0.2060508f, +0.0141491f, -0.1530963f, +0.1041284f, +0.1319729f, -0.1144417f, -0.1303740f,
  -0.1966292f, +0.0100760f, -0.0745715f, -0.1921455f, -0.2942425f, -0.2071962f, +0.0801802f, -0.1121514f,
  -0.1806260f, -0.0599456f, -0.0267292f, -0.1114106f, -0.0914311f, +0.0671908f, +0.0622601f, +0.0629668f,
  -0.1052603f, -0.2938451f, +0.0520091f, +0.2221297f, -0.1727276f, -0.0034847f, +0.0875858f, +0.1006110f,
  +0.1861574f, -0.1332950f, -0.3006931f, -0.0041033f, +0.4915592f, +0.1896994f, -0.0162880f, -0.3480807f,
  +0.3599390f, -0.1296262f, -0.1163700f, +0.1578452f, +0.0890677f, -0.0055821f, -0.0325314f, -0.2328556f,
  -0.1826773f, +0.0184794f, +0.1234798f, -0.0470682f, +0.1058823f, +0.0029316f, +0.0571163f, -0.2116891f,
  -0.2232092f, -0.0676396f, +0.2391181f, -0.0527507f, +0.0039167f, -0.2562403f, -0.0201610f, -0.1319799f,
  -0.0100468f, -0.3462575f, -0.0104204f, +0.1987160f, -0.0492392f, +0.2043056f, +0.1948634f, -0.1002645f,
  -0.2103135f, +0.0069971f, -0.1759377f, +0.2600970f, +0.1738641f, -0.0440612f, +0.0755006f, -0.3078793f,
  -0.0573936f, -0.0544872f, +0.0155158f, -0.3023357f, -0.2197529f, +0.1888359f, -0.0742271f, +0.0127576f,
  -0.1787723f, -0.0734441f, -0.0218139f, -0.1128163f, -0.0366113f, +0.0594917f, -0.0269825f, -0.0728103f,
  -0.2276929f, +0.0447779f, -0.1714403f, +0.2384901f, -0.0694026f, +0.1454194f, +0.0913269f, -0.0036519f,
  +0.1427567f, -0.1300394f, +0.0140101f, -0.0330989f, +0.0439626f, -0.0688241f, -0.0442146f, -0.0439844f,
  -0.0373268f, -0.1234501f, -0.2367195f, +0.2528218f, -0.1641910f, -0.0036843f, -0.2490822f, -0.0855158f,
  -0.2264778f, +0.0587411f, +0.0301174f, +0.1954130f, +0.2545836f, +0.0992672f, -0.0496868f, -0.0574283f,
  +0.2781181f, -0.1319215f, +0.2231699f, -0.0791152f, -0.2566174f, +0.3472354f, -0.0065807f, +0.0097298f,
  +0.4320921f, -0.2504746f, -0.1231571f, +0.1653363f, -0.1831862f, -0.1058831f, +0.2764655f, -0.1800637f,
  -0.0134732f, +0.1440036f, +0.1093561f, +0.2874895f, -0.1438651f, +0.1247577f, +0.2398748f, -0.1708859f,
  +0.2633444f, -0.1814187f, +0.0418734f, -0.0966471f, +0.0318958f, +0.2127484f, +0.0955541f, -0.0216578f,
  +0.2303284f, +0.0046174f, +0.2175417f, -0.0741623f, -0.0726042f, +0.1418096f, +0.1660682f, -0.1708464f,
  -0.1960529f, +0.0220635f, +0.0607570f, -0.4174855f, -0.0319779f, -0.0896124f, +0.0877214f, -0.2121966f,
  -0.0731583f, -0.2128896f, -0.1435464f, +0.0907100f, -0.0842330f, -0.1829315f, -0.0274403f, -0.0065925f,
  -0.1560747f, -0.0074955f, +0.1585694f, -0.4151666f, +0.1951178f, -0.1939515f, -0.4059249f, -0.0647856f,
  -0.5998810f, -0.2118297f, +0.0761181f, -0.2274882f, -0.1234803f, -0.1454567f, +0.1290752f, -0.1491946f,
  -0.1033308f, -0.1331981f, -0.4397105f, -0.2514629f, +0.0233826f, -0.1466081f, -0.1226648f, +0.4684837f,
  -0.0898829f, +0.2886328f, +0.2113094f, -0.0832307f, -0.0532961f, +0.2268805f, -0.1269500f, -0.1248628f,
  -0.1774543f, -0.1471897f, +0.2030983f, +0.1212587f, -0.1886793f, +0.0948745f, -0.2193597f, -0.1986497f,
  +0.1642138f, +0.1168738f, +0.0509993f, -0.0245602f, -0.0300646f, +0.0630622f, +0.0161096f, -0.0766772f,
  +0.0850693f, -0.0064257f, +0.1719055f, -0.1199855f, +0.0012275f, -0.0789232f, +0.0149193f, +0.0263943f
);

const float biases[4] = float[4](
  +0.0154047f, +0.0079066f, +0.0283147f, +0.0367466f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer101 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0054665f, -0.0311843f, +0.1083096f, +0.0200301f, +0.0287034f, +0.0460445f, +0.3530891f, +0.0357833f,
  -0.0340532f, +0.2609026f, +0.0376849f, -0.1239302f, +0.2493036f, -0.1469058f, -0.1256083f, -0.0668680f,
  +0.2133293f, +0.0093277f, +0.2744833f, +0.1566262f, -0.1760706f, +0.2125383f, -0.0963870f, +0.0855068f,
  +0.4092555f, -0.1515599f, +0.0563477f, -0.2402043f, -0.0825029f, +0.0386497f, +0.4707743f, +0.0638328f,
  -0.0125241f, -0.3970191f, +0.2900841f, +0.0565966f, +0.4207004f, -0.3822078f, -0.1087984f, -0.0928921f,
  -0.0384986f, -0.0507484f, -0.1096835f, -0.0017756f, -0.0837312f, -0.0118218f, -0.0080452f, -0.0172762f,
  +0.1996109f, +0.1246047f, +0.1376206f, -0.2277368f, -0.1428619f, -0.3798815f, +0.3709325f, -0.2932616f,
  +0.0672116f, -0.0746646f, -0.0225634f, +0.1407973f, +0.0365971f, +0.1373632f, -0.1551882f, -0.2669831f,
  -0.1480488f, -0.0886991f, +0.2328797f, -0.0189717f, -0.0252875f, +0.3998241f, -0.0467857f, +0.2777769f,
  +0.1158160f, +0.1992808f, +0.0494265f, -0.1064349f, -0.2418709f, +0.0840717f, -0.0971463f, +0.0414682f,
  +0.1179260f, +0.1771583f, +0.0648285f, -0.1191840f, -0.0643306f, +0.0620211f, +0.1182070f, +0.2340220f,
  -0.2392961f, +0.1194707f, +0.0630379f, -0.0230669f, -0.0733265f, -0.1294575f, +0.1627642f, +0.0483558f,
  +0.0345240f, -0.0024730f, +0.1328027f, -0.0388798f, -0.4271193f, +0.0281625f, -0.1818034f, -0.2244384f,
  -0.3851326f, +0.0329853f, +0.0319361f, -0.2039545f, +0.1724357f, -0.1520634f, -0.1438344f, +0.0867474f,
  +0.1921427f, +0.0575682f, -0.1074015f, +0.0500542f, +0.1374204f, -0.2256082f, -0.2959294f, +0.2842181f,
  -0.1505094f, +0.2259148f, -0.0333594f, +0.1144894f, -0.0184095f, -0.1737694f, -0.2063138f, -0.1890464f,
  -0.2530213f, +0.1233285f, +0.2443985f, -0.0112920f, -0.0236775f, -0.1679775f, -0.2014786f, +0.0457837f,
  +0.1635559f, +0.1112012f, -0.0398660f, +0.1923844f, +0.1071481f, -0.0780130f, -0.0701572f, -0.1082927f,
  -0.0345770f, +0.1316751f, +0.0235220f, -0.0635791f, +0.0869028f, +0.1978814f, +0.1101446f, +0.3640414f,
  -0.1162423f, +0.0503519f, -0.0154828f, +0.0712989f, -0.0740400f, -0.0255570f, -0.1358694f, +0.4995606f,
  -0.0713068f, +0.0394507f, -0.0702999f, +0.0969682f, +0.0545580f, -0.2545013f, +0.1325778f, +0.3562829f,
  -0.4388950f, +0.0776568f, -0.0112225f, -0.0832690f, +0.0940152f, -0.0133620f, +0.0793233f, +0.0801574f,
  +0.2131968f, -0.0545294f, -0.0598390f, +0.0665258f, -0.1449365f, -0.2889062f, +0.0017409f, +0.1528412f,
  +0.0350228f, +0.0316516f, +0.1447602f, -0.0162011f, -0.1486684f, -0.1424353f, +0.0850578f, +0.1261388f,
  -0.0066565f, +0.0504177f, -0.1472068f, -0.0339699f, -0.0513144f, -0.0067364f, +0.0426370f, +0.0265464f,
  +0.0756726f, +0.1994523f, +0.0982983f, -0.1064380f, +0.0324339f, +0.0768439f, +0.1287707f, +0.1933979f,
  -0.0987026f, +0.1064075f, +0.0117920f, -0.4324867f, +0.1119454f, -0.0348961f, -0.3287686f, -0.2312478f,
  +0.1058484f, -0.1090723f, +0.1234269f, +0.0503873f, -0.1444167f, -0.0487147f, -0.2242889f, -0.2264505f,
  +0.0414690f, +0.2366497f, -0.0720845f, +0.1142447f, -0.2059181f, +0.3336980f, -0.1488037f, -0.1330319f,
  +0.1730019f, +0.0959110f, -0.0421424f, +0.1639663f, -0.1863222f, +0.1310384f, +0.0738366f, +0.0830102f,
  +0.2769824f, +0.0385154f, -0.1487685f, -0.1419760f, -0.2420738f, +0.1371284f, -0.0064095f, -0.2363657f,
  +0.1156937f, +0.0552511f, +0.1128412f, -0.2131660f, -0.1070755f, +0.2019499f, -0.0715849f, +0.3281044f,
  +0.2234681f, -0.1808268f, +0.0711353f, -0.0092243f, +0.0199067f, -0.0346057f, -0.1637773f, +0.3568111f,
  -0.0654527f, -0.3019478f, +0.0039652f, -0.0095400f, +0.0607507f, +0.2888504f, -0.3012271f, +0.1046021f,
  +0.2316483f, -0.2286368f, -0.1822737f, -0.5593482f, +0.2391241f, -0.1832873f, -0.0525928f, +0.2368519f,
  +0.1699668f, +0.0320706f, -0.4110253f, -0.2258587f, +0.0933042f, +0.1274333f, +0.1932318f, -0.0218563f
);

const float biases[4] = float[4](
  -0.0083939f, +0.0339592f, +0.0584365f, +0.0385446f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer101 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0574416f, +0.0727533f, +0.0776397f, +0.0129467f, +0.0862038f, +0.0398564f, -0.0686393f, +0.0954208f,
  -0.4380446f, -0.1702507f, +0.1845913f, +0.1047776f, +0.1801364f, -0.0988184f, +0.1379109f, +0.0029647f,
  -0.3550545f, -0.0258738f, +0.0378214f, +0.0578409f, -0.1007215f, -0.0833856f, +0.0217969f, +0.2187881f,
  +0.2076584f, -0.0274441f, -0.1236595f, -0.0784988f, +0.0939929f, -0.0529363f, +0.2002655f, +0.1330654f,
  +0.0671397f, +0.0590966f, +0.0463486f, +0.2225722f, +0.3405113f, +0.2436595f, -0.0106366f, +0.0608850f,
  +0.0416163f, -0.2593593f, +0.2793505f, -0.0757916f, -0.0697001f, -0.0523590f, +0.1096901f, -0.0782856f,
  -0.0040523f, +0.0723547f, +0.1136546f, +0.0920692f, -0.0952366f, -0.1306880f, +0.3776329f, +0.1456139f,
  -0.1719097f, +0.3385183f, -0.1185613f, +0.2855021f, -0.1149814f, +0.0878236f, -0.0652113f, -0.0795929f,
  +0.1609719f, -0.0661119f, +0.1583647f, +0.1114056f, -0.0125936f, +0.0530320f, +0.1529312f, -0.1514987f,
  +0.3270446f, -0.1807662f, +0.2135658f, -0.1091428f, +0.3065602f, +0.1989335f, -0.4602022f, +0.5503378f,
  +0.1210681f, -0.1721431f, +0.1405559f, -0.0397757f, +0.0156271f, -0.0967121f, +0.0275012f, -0.0015051f,
  -0.0508294f, -0.1328560f, -0.2617481f, +0.1588539f, +0.1171718f, +0.2716406f, -0.0190231f, +0.0130291f,
  +0.1386727f, -0.1958070f, +0.0875290f, +0.0727887f, +0.0279252f, +0.2286385f, +0.3224419f, -0.2766910f,
  +0.0356487f, -0.1928552f, +0.2044160f, -0.1489232f, +0.0073149f, +0.0781393f, -0.0136833f, -0.0644778f,
  -0.1235739f, -0.2608598f, -0.0538009f, +0.0412312f, -0.0407500f, -0.1307482f, -0.0824299f, +0.2169582f,
  +0.0791905f, -0.0291037f, -0.1155186f, +0.2171223f, -0.0338698f, -0.0678260f, +0.0523624f, +0.1152988f,
  -0.0680082f, -0.2504816f, +0.1749613f, +0.2030338f, +0.1401104f, +0.2224148f, +0.4478201f, +0.0942007f,
  +0.0913807f, +0.0453360f, -0.0805621f, +0.1622883f, -0.1323550f, +0.0559759f, +0.1526890f, -0.0486841f,
  +0.0698639f, -0.1974059f, +0.2528437f, +0.1604865f, +0.1643921f, -0.0928934f, +0.1111981f, +0.0572028f,
  -0.1478351f, +0.1244141f, +0.1204659f, +0.2407778f, -0.4237105f, -0.2399195f, +0.3083411f, -0.4166050f,
  -0.2331515f, -0.1190955f, -0.2050430f, -0.1302450f, +0.0972130f, -0.1598399f, +0.1688159f, -0.1527793f,
  +0.0922656f, -0.3363541f, +0.1707528f, +0.0856025f, +0.1805024f, +0.0504331f, +0.2833638f, +0.2323113f,
  +0.1220395f, +0.3763971f, +0.0822674f, +0.5215379f, +0.0044313f, -0.2225849f, +0.4114528f, -0.0292293f,
  -0.0492592f, +0.0691373f, +0.2712994f, -0.1567435f, -0.1456350f, +0.1786143f, -0.2919903f, -0.3329414f,
  +0.1143665f, +0.0369106f, +0.0796749f, +0.0988389f, +0.0807493f, +0.0784961f, -0.0824257f, +0.2316961f,
  +0.0419431f, -0.1631320f, -0.0232628f, -0.1724215f, -0.1593033f, -0.0550158f, +0.2069255f, +0.0528837f,
  +0.1008975f, -0.0071654f, +0.0583056f, -0.0228751f, -0.1510603f, +0.1318916f, +0.0400389f, -0.0889259f,
  -0.1605956f, +0.0141542f, -0.0745527f, -0.1151576f, +0.1976884f, +0.0434549f, +0.0707635f, +0.1059986f,
  +0.0871634f, -0.2603962f, +0.0236407f, +0.1728580f, -0.1111210f, -0.1926820f, -0.2823615f, -0.0147754f,
  -0.0433139f, +0.1342094f, +0.0993308f, -0.0823903f, +0.2183996f, -0.0673749f, -0.1139835f, +0.0666754f,
  +0.1618134f, +0.0687218f, +0.0384729f, -0.2081047f, -0.1448910f, -0.0544450f, +0.0959346f, +0.1881494f,
  +0.4019648f, -0.1934237f, +0.1467118f, -0.3330818f, +0.0175402f, +0.1287193f, +0.1014582f, -0.0652691f,
  +0.1169450f, -0.2578684f, +0.5171664f, -0.0713091f, +0.0217328f, -0.3115190f, +0.3262387f, +0.0320402f,
  -0.3067937f, +0.0829536f, +0.0767300f, -0.0921918f, +0.1563828f, +0.3359326f, +0.0069668f, -0.1395153f,
  +0.0144240f, -0.0517886f, +0.1409025f, +0.1927766f, +0.2321507f, +0.1971648f, -0.0275433f, -0.0845212f,
  +0.0336697f, +0.0160095f, -0.0279018f, +0.0923846f, +0.1081758f, -0.0253797f, +0.1372192f, -0.0197723f
);

const float biases[4] = float[4](
  +0.0029650f, -0.0313797f, -0.0052537f, +0.0124445f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer102 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1397230f, -0.0483883f, -0.1504985f, +0.1829365f, +0.0152462f, +0.1243718f, +0.1399317f, +0.0016056f,
  +0.1190502f, -0.0526913f, -0.0609832f, -0.0204509f, -0.0041379f, +0.4051821f, -0.0631058f, +0.1163245f,
  +0.1889433f, +0.1600858f, -0.0024377f, +0.0232002f, -0.0930632f, +0.0202323f, -0.2119778f, +0.2820941f,
  +0.0019200f, -0.1616921f, -0.1188209f, -0.3456265f, +0.2232874f, -0.0883960f, +0.1562716f, -0.0288894f,
  +0.0669761f, +0.1639244f, -0.0416127f, -0.1189312f, +0.1274869f, +0.0080499f, -0.0730803f, -0.1697810f,
  +0.1994863f, -0.0332894f, +0.2278692f, -0.1702840f, -0.0567001f, +0.1091680f, -0.0728374f, +0.2221254f,
  -0.0719634f, -0.0130420f, -0.0589008f, +0.1333947f, -0.2403448f, -0.0227079f, -0.1336038f, +0.0209614f,
  -0.0512366f, -0.0231566f, -0.0227572f, +0.0960531f, -0.0563448f, -0.2592749f, +0.0454200f, -0.1496167f,
  +0.0060022f, -0.0886421f, +0.0605377f, -0.0940606f, -0.1222680f, -0.1714714f, -0.0299135f, -0.0131734f,
  -0.1099974f, -0.0214718f, +0.0161858f, -0.1560803f, -0.1281248f, -0.3056630f, +0.0422594f, +0.2504689f,
  +0.1088893f, -0.0774667f, +0.0532226f, +0.1115819f, -0.1480381f, -0.4027570f, +0.3872453f, -0.1091458f,
  +0.4457099f, -0.0511382f, -0.0598612f, -0.1764054f, -0.0058221f, -0.1515241f, +0.0346235f, -0.1950960f,
  +0.0016961f, -0.1520800f, -0.1203056f, -0.1433212f, +0.0650915f, -0.1520251f, +0.1449688f, +0.3869417f,
  +0.3300090f, -0.1038750f, +0.1671790f, +0.3571766f, +0.0017308f, -0.2380437f, +0.4682696f, +0.0013018f,
  +0.3425348f, -0.1226703f, -0.2890770f, -0.1356219f, +0.2458299f, +0.2479613f, -0.0365459f, -0.1074362f,
  +0.1051102f, +0.1914578f, -0.1196062f, -0.2756041f, +0.0925993f, -0.2070628f, -0.2460319f, +0.0881990f,
  +0.2992353f, +0.1877466f, -0.0762689f, -0.5571017f, -0.0527950f, -0.1247780f, +0.2889596f, -0.0410528f,
  +0.1733562f, -0.2206927f, -0.0860924f, +0.1827630f, -0.1553742f, -0.1494865f, -0.0740164f, +0.0828739f,
  -0.0418611f, +0.0914325f, -0.0322916f, +0.1390458f, -0.1530390f, -0.0000615f, +0.2814456f, +0.2191200f,
  +0.2995934f, -0.2291758f, -0.1168068f, +0.0974725f, -0.1127805f, +0.0330976f, +0.0939254f, +0.0592743f,
  +0.0959244f, -0.0788755f, +0.0480867f, +0.1158475f, -0.0652882f, +0.3201270f, -0.2206652f, +0.1948218f,
  -0.1661126f, +0.0449794f, -0.1557245f, +0.0428299f, -0.2673465f, -0.2563824f, +0.7074882f, +0.1785490f,
  +0.3729424f, -0.0236093f, +0.0261242f, -0.0943786f, -0.1043730f, +0.1584846f, -0.2896695f, +0.1648531f,
  +0.2440350f, +0.0139472f, -0.1673536f, -0.1089001f, +0.1683722f, -0.2433756f, +0.0438408f, +0.0201508f,
  +0.0611914f, -0.1105365f, -0.1602358f, -0.1899547f, -0.2875722f, -0.1665417f, -0.1219047f, -0.0375552f,
  +0.1539095f, +0.0530939f, -0.1363985f, +0.1699453f, -0.0950778f, -0.0772659f, +0.2656515f, -0.1032036f,
  +0.1756039f, +0.0881502f, +0.0241464f, +0.0769878f, +0.0986651f, +0.2049630f, +0.1262121f, -0.0787453f,
  -0.0936714f, +0.3343397f, +0.1421477f, +0.2601885f, -0.1669867f, +0.0176201f, +0.2214310f, +0.1883521f,
  +0.0190395f, +0.1618485f, -0.0267898f, +0.1887812f, -0.0074380f, +0.0428428f, -0.0991668f, +0.0947526f,
  -0.2161495f, -0.1070994f, -0.0946886f, -0.0654347f, +0.0638619f, +0.3098217f, -0.1486159f, +0.0879049f,
  -0.0646733f, +0.2077120f, -0.0070569f, +0.0288475f, +0.0176808f, +0.2647758f, -0.1355072f, -0.2102988f,
  -0.1661217f, +0.0998322f, -0.4029749f, +0.0325627f, -0.3932322f, -0.0463087f, +0.0046918f, -0.1419830f,
  -0.1848462f, -0.1162242f, -0.1238372f, -0.1957236f, +0.0201451f, +0.0835848f, -0.0928742f, -0.3101414f,
  +0.0154784f, -0.0404980f, -0.0531589f, +0.0741046f, -0.0340592f, +0.2152215f, +0.1134617f, -0.0235394f,
  -0.1335575f, +0.1006423f, +0.2904769f, +0.0857981f, -0.0823895f, +0.0704148f, -0.4110390f, -0.2076248f,
  -0.0495409f, -0.0298896f, -0.2090525f, -0.4396109f, +0.1591042f, +0.1366898f, +0.1302825f, +0.0113691f
);

const float biases[4] = float[4](
  -0.0261506f, -0.0241682f, +0.0534087f, +0.0104861f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer102 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0748698f, +0.0174577f, -0.2062967f, +0.2177626f, -0.2534633f, -0.0877975f, -0.0307838f, +0.0268022f,
  -0.2179364f, -0.0343328f, -0.2201480f, -0.0648076f, +0.1239878f, -0.0895965f, -0.0353280f, +0.0652092f,
  -0.0082838f, +0.0437382f, +0.0567786f, +0.1579634f, -0.0125440f, -0.1263869f, +0.2018165f, +0.0127621f,
  +0.0733598f, -0.0191489f, +0.0230303f, +0.0464457f, +0.0847957f, -0.0474449f, +0.2426252f, -0.0517127f,
  +0.1366651f, -0.1375688f, -0.1550283f, +0.1842601f, -0.1589863f, +0.0585841f, +0.3394212f, +0.0999787f,
  -0.0187822f, -0.0287711f, -0.2106302f, +0.1609346f, -0.0115860f, +0.2914706f, +0.1114128f, -0.1425536f,
  +0.0219919f, +0.0457697f, -0.3111659f, +0.3164265f, -0.1597951f, +0.0785785f, +0.3271627f, +0.0188575f,
  +0.3145943f, -0.2509904f, -0.1727162f, +0.0855929f, -0.1084642f, -0.1378141f, -0.0374816f, +0.0340952f,
  -0.0558656f, +0.0495327f, +0.0928784f, +0.3184907f, +0.0336418f, +0.1524695f, +0.0407083f, -0.1010084f,
  -0.0006088f, +0.0696355f, -0.0497115f, +0.0642267f, -0.2633740f, -0.0749035f, +0.1683864f, -0.1261960f,
  +0.0143206f, -0.0514654f, -0.2390531f, -0.0283351f, +0.1966227f, +0.3546542f, -0.1986585f, +0.1641286f,
  +0.0128458f, -0.0333599f, +0.0686848f, -0.1454142f, +0.1207743f, -0.1234760f, +0.0352622f, -0.0449439f,
  -0.0554727f, +0.0058134f, +0.0361808f, +0.0701771f, -0.2114721f, +0.1576090f, -0.1345018f, +0.3000669f,
  -0.0143908f, -0.3404951f, -0.0773318f, -0.0386412f, -0.0300659f, +0.0554288f, +0.1621197f, -0.0139935f,
  -0.0241386f, -0.1300796f, -0.0732560f, -0.2062123f, +0.0110378f, +0.1919247f, -0.0535512f, +0.0729186f,
  +0.2322384f, +0.1410786f, +0.1703421f, -0.0583396f, +0.1043720f, -0.1117260f, -0.2329381f, +0.0514318f,
  -0.0168203f, +0.1803914f, -0.0764805f, -0.3205996f, +0.2608493f, -0.1133202f, +0.0456026f, -0.0727490f,
  +0.0514836f, +0.1274671f, -0.0226854f, -0.0442497f, +0.0030154f, +0.0679441f, -0.0373220f, +0.0639650f,
  -0.0918605f, +0.1143591f, -0.0648785f, -0.0556944f, -0.3956095f, -0.1864657f, +0.1074031f, +0.1304106f,
  -0.0641782f, +0.0879240f, -0.0267010f, -0.0797875f, -0.0176925f, -0.1723156f, +0.1031033f, +0.1583556f,
  +0.0210677f, -0.0143888f, +0.0278494f, +0.4759948f, -0.0283097f, -0.0621820f, -0.0784123f, +0.0007904f,
  -0.0680281f, +0.3835742f, -0.0371501f, +0.1188755f, +0.2939828f, +0.1436165f, -0.0113289f, +0.1574187f,
  -0.2094768f, -0.0967742f, -0.0399490f, -0.0262974f, +0.2211075f, -0.0608852f, +0.1911712f, +0.1395555f,
  +0.4007158f, -0.0565674f, +0.0472040f, -0.0763600f, -0.1286303f, +0.0239292f, -0.2118258f, +0.1352403f,
  +0.0804309f, +0.2200353f, +0.0323172f, +0.3735024f, -0.0015872f, -0.0030343f, +0.1488007f, +0.1792280f,
  +0.0792657f, -0.0140795f, +0.2810562f, +0.0337256f, -0.0046697f, -0.1823116f, +0.3220945f, +0.0318233f,
  +0.2860673f, +0.0720346f, +0.0277923f, +0.1140981f, -0.1997712f, +0.0319848f, +0.0220851f, -0.0254681f,
  -0.2053504f, -0.2408458f, +0.7108687f, +0.2099675f, -0.0223326f, +0.1558967f, +0.0129125f, +0.0679983f,
  -0.0707857f, +0.1715351f, -0.0140434f, +0.0083768f, -0.0096938f, +0.0688680f, -0.0942915f, +0.0069432f,
  +0.0011836f, +0.0325906f, -0.0908993f, +0.1356394f, -0.2247557f, -0.4006011f, +0.0321526f, +0.0017322f,
  +0.0557362f, -0.3088949f, -0.0794219f, +0.3628629f, -0.0928907f, +0.0226540f, -0.5159119f, -0.0761417f,
  +0.0480266f, -0.0023283f, +0.0305667f, -0.0309109f, -0.1788556f, +0.1974089f, -0.3290311f, +0.1968784f,
  +0.1380884f, -0.0175795f, -0.1777165f, -0.0270656f, -0.0251354f, -0.3485890f, +0.3134680f, -0.1187214f,
  -0.0489618f, -0.1636401f, -0.1324056f, +0.0151675f, +0.0044225f, +0.1866753f, +0.1975097f, +0.0320893f,
  -0.0339041f, -0.0682952f, -0.2974773f, +0.1301037f, +0.1669479f, -0.0552403f, +0.6308151f, -0.1790387f,
  -0.1049822f, -0.0139034f, +0.0006495f, +0.2232613f, +0.0137187f, -0.0382629f, +0.0393002f, -0.1917475f
);

const float biases[4] = float[4](
  +0.0152005f, +0.0219702f, +0.0112068f, -0.0301392f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer103 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0293361f, -0.0213798f, +0.0372215f, +0.0343334f, -0.0599620f, +0.0132499f, +0.2901598f, -0.3394098f,
  -0.1560098f, +0.0381524f, -0.0605434f, -0.0649068f, +0.0727635f, -0.0929736f, -0.1409404f, -0.1939956f,
  -0.1444388f, +0.3202748f, -0.1369058f, +0.0772144f, -0.0838140f, +0.1056967f, +0.0050265f, -0.1520270f,
  -0.0167337f, +0.4195327f, +0.0861565f, +0.2233233f, -0.2386226f, -0.1636790f, +0.0958247f, -0.3779994f,
  -0.2073025f, +0.1013439f, -0.0013069f, +0.0890960f, +0.0678810f, +0.0946132f, +0.2178716f, -0.2044533f,
  +0.1161693f, -0.0803709f, -0.0564351f, -0.1060406f, +0.0037090f, +0.3818993f, +0.0985389f, -0.1475691f,
  -0.0664250f, +0.0783760f, +0.1427990f, +0.3186665f, -0.0291213f, +0.1263041f, +0.1551906f, -0.2505503f,
  +0.2843507f, -0.0247595f, +0.3336294f, +0.5376185f, -0.0390374f, +0.3436337f, +0.2904037f, -0.1058084f,
  +0.0711173f, -0.1451008f, +0.1845697f, +0.3298215f, -0.0645893f, +0.1696568f, +0.0926332f, +0.1256167f,
  -0.1758223f, +0.0786380f, -0.0367458f, +0.0341730f, +0.0280742f, +0.1466944f, +0.1981443f, +0.1665475f,
  -0.1546849f, +0.0348821f, +0.0537444f, +0.1798602f, +0.0070318f, -0.1720185f, +0.4138699f, +0.3016230f,
  +0.0717478f, +0.1428070f, +0.1697354f, -0.2166873f, -0.1305545f, -0.4341308f, -0.2322665f, +0.1373122f,
  -0.0148250f, +0.1837400f, +0.0957377f, -0.0579503f, -0.0121454f, +0.0869086f, +0.3016573f, +0.0550666f,
  -0.0510891f, +0.2327810f, +0.2893356f, +0.1334102f, +0.1541493f, +0.3584352f, -0.1248173f, -0.0999769f,
  +0.1941979f, +0.1152315f, -0.3041241f, -0.0577703f, -0.1293715f, -0.1933422f, -0.0512026f, +0.0184915f,
  -0.1554326f, -0.0449134f, +0.0999836f, +0.0297842f, +0.2685797f, +0.2431004f, -0.1563924f, -0.0103640f,
  -0.2157782f, +0.0191402f, -0.0759056f, -0.1441911f, -0.2063060f, -0.1966152f, -0.0821252f, +0.2048888f,
  +0.0152667f, -0.0424538f, -0.0167872f, -0.0198949f, -0.2305461f, -0.0998993f, -0.1102231f, -0.0781869f,
  -0.1572809f, +0.0959423f, -0.0517670f, -0.0107147f, -0.1003532f, +0.0900784f, +0.0634151f, -0.0855591f,
  -0.0511052f, +0.0304734f, -0.1017333f, -0.1192437f, +0.1949550f, +0.0336259f, -0.1071986f, +0.3217583f,
  +0.0944349f, -0.1018985f, -0.0030202f, -0.0300572f, +0.0376014f, -0.1702623f, +0.0195277f, -0.1295057f,
  -0.2551744f, -0.0740648f, -0.1480077f, -0.0454644f, -0.0177858f, -0.1998878f, +0.2262127f, -0.0882995f,
  -0.1031404f, +0.0239210f, -0.0285983f, +0.0898922f, +0.0954601f, +0.2645073f, +0.0388449f, +0.3700453f,
  +0.2202310f, +0.0089633f, -0.0428057f, +0.0632527f, -0.0397156f, -0.1747509f, +0.0641276f, -0.2464104f,
  +0.0125425f, +0.0772776f, -0.1089330f, +0.1728994f, -0.1338149f, -0.0672037f, +0.2328039f, -0.0882316f,
  -0.1211548f, -0.1141303f, +0.0902660f, +0.0117858f, -0.2448375f, +0.0308829f, +0.0825283f, +0.0446010f,
  -0.0624069f, +0.1304105f, -0.1443973f, -0.0936869f, +0.0703025f, +0.0224652f, -0.1104567f, +0.0320975f,
  +0.1355654f, -0.0169313f, -0.0827631f, +0.1479627f, +0.0486069f, +0.0341404f, -0.0123747f, -0.0880665f,
  +0.1229861f, +0.4040793f, -0.1159180f, -0.2890549f, -0.1748928f, -0.2232120f, +0.4946086f, -0.0876502f,
  +0.0816975f, -0.0757717f, -0.1927416f, -0.1383763f, +0.1738920f, -0.0993363f, +0.0071662f, +0.0454757f,
  +0.3346157f, -0.2763486f, +0.2666043f, +0.0145946f, -0.0755767f, -0.1621773f, +0.2453988f, +0.1430373f,
  +0.7025733f, +0.5912194f, +0.0865647f, +0.4882478f, +1.0086707f, -0.1647866f, +0.0483566f, -0.1528540f,
  +0.2937593f, +0.0788017f, +0.0828487f, +0.1222733f, +0.2396934f, +0.3300031f, +0.1016137f, -0.1122290f,
  +0.2614650f, -0.0547629f, +0.1596761f, +0.1648005f, +0.0014846f, +0.1068545f, +0.0991436f, +0.1405395f,
  -0.0320551f, +0.1689683f, -0.1599529f, +0.3090228f, -0.1127028f, -0.1431371f, +0.1304140f, +0.3143171f,
  +0.1497402f, -0.0968889f, +0.0506688f, +0.0193806f, -0.0799827f, +0.2314042f, +0.1407276f, -0.0624258f
);

const float biases[4] = float[4](
  +0.0333311f, +0.0559112f, -0.0427843f, -0.1449652f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer103 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.4852624f, -0.0759761f, -0.1882746f, -0.1192571f, -0.0096364f, -0.3247705f, -0.1584137f, -0.1555216f,
  -0.0525931f, +0.0143934f, -0.2519961f, +0.0520948f, +0.0316760f, +0.3397971f, +0.4164588f, -0.0281408f,
  -0.0452286f, -0.1039826f, -0.0476707f, -0.1304525f, +0.4238249f, +0.1827361f, -0.1251388f, +0.1676896f,
  +0.1714112f, -0.1360354f, -0.1076441f, +0.0952718f, +0.0885609f, -0.1011155f, -0.0337039f, -0.2023152f,
  -0.0503659f, +0.0333672f, -0.1010836f, -0.1407208f, -0.4324393f, +0.3943407f, +0.4487318f, -0.0046555f,
  +0.2837202f, -0.1992907f, +0.1447129f, -0.1085064f, +0.2103706f, -0.1448030f, +0.1584811f, -0.2150189f,
  +0.2049987f, -0.2276506f, +0.1427996f, +0.0439789f, +0.0362184f, -0.0964548f, +0.1706505f, -0.0382285f,
  -0.0130424f, +0.0299126f, +0.0350331f, +0.0200835f, -0.3581760f, +0.0820866f, -0.0367159f, -0.0241849f,
  +0.0435411f, -0.1042477f, +0.1553707f, +0.1472746f, +0.1150826f, +0.0735964f, +0.0054136f, -0.0993921f,
  +0.3720991f, +0.3647895f, -0.2591999f, -0.1066968f, -0.2715525f, +0.0789309f, +0.3690130f, -0.2424289f,
  +0.1498698f, +0.0096908f, -0.1300972f, -0.3622082f, +0.3876255f, -0.3492647f, -0.0660618f, +0.0699510f,
  +0.0789677f, +0.0782441f, -0.1619048f, +0.0782080f, -0.2294948f, +0.3293317f, -0.0504221f, +0.2582550f,
  +0.5877052f, +0.0485093f, +0.1271672f, -0.0233978f, +0.3299517f, -0.1657562f, +0.1192070f, -0.3581248f,
  +0.6345404f, +0.4600522f, +0.6014190f, +0.5128372f, +0.6157619f, +0.2989332f, -0.0788044f, -0.1896156f,
  +0.2827443f, -0.1379070f, -0.0404856f, +0.2533642f, -0.1200527f, -0.0910782f, +0.2580337f, +0.3585263f,
  +0.1389900f, +0.0825647f, -0.0070151f, +0.3120294f, -0.0527626f, -0.1363998f, +0.2161106f, +0.2062930f,
  +0.2606846f, -0.1533800f, +0.1176499f, +0.2114395f, -0.1632027f, +0.0763724f, +0.0684871f, +0.2027403f,
  +0.0737108f, +0.0249624f, -0.0397704f, -0.1183456f, -0.0732140f, -0.0123721f, -0.1344243f, +0.0608852f,
  -0.0801320f, -0.1345282f, -0.0304144f, +0.1190511f, -0.0277686f, +0.1917667f, +0.3079909f, +0.0252714f,
  +0.2322219f, -0.2457608f, -0.2879811f, +0.1786736f, -0.2547669f, -0.2477918f, -0.0387922f, +0.0699500f,
  +0.0236802f, -0.2199365f, +0.1496380f, -0.0326038f, -0.0946533f, -0.0580607f, +0.0374385f, +0.0973496f,
  +0.1611209f, -0.2290719f, +0.1266793f, +0.0066987f, -0.0494923f, -0.0518575f, +0.2308120f, +0.3580945f,
  +0.0236490f, -0.0250008f, -0.0099476f, +0.2349508f, +0.1390967f, -0.3251227f, -0.1873687f, -0.2309663f,
  +0.1237217f, -0.1864554f, +0.0798042f, -0.1018056f, -0.1340386f, -0.0156747f, -0.0497325f, -0.1106241f,
  +0.2372370f, +0.1490326f, -0.0912848f, -0.1512959f, +0.1793588f, +0.0885699f, -0.2722905f, +0.1860900f,
  +0.3712672f, -0.1238311f, -0.2654061f, -0.1972079f, -0.3243319f, -0.1081940f, -0.0344907f, -0.2530695f,
  +0.1236084f, -0.1956142f, +0.0655154f, +0.1190219f, -0.0353835f, +0.0629429f, +0.0387453f, +0.0796500f,
  -0.0299645f, -0.1424803f, +0.1802166f, +0.0014590f, +0.2649009f, -0.1212105f, -0.0408847f, +0.1199967f,
  -0.0211826f, -0.1560079f, +0.0442473f, +0.1334882f, -0.1729362f, +0.1821524f, -0.1766284f, -0.1270669f,
  +0.1513733f, +0.0406696f, -0.0780162f, -0.0442314f, -0.1033074f, -0.0273678f, -0.0428087f, -0.0074553f,
  -0.2237027f, -0.1329301f, -0.3419282f, +0.0733013f, -0.2358469f, +0.0369303f, -0.2321100f, -0.0461626f,
  -0.0185190f, -0.1664224f, -0.0821552f, -0.4813520f, -0.4549390f, -0.2446575f, +0.2533192f, +0.2721437f,
  -0.1037239f, +0.0438129f, +0.0086464f, -0.4180301f, -0.0224162f, -0.0626748f, -0.2185680f, -0.1939513f,
  +0.2805516f, +0.0773839f, +0.0760028f, -0.1308000f, -0.0101060f, +0.1256026f, +0.0504237f, -0.0374316f,
  +0.3524720f, +0.3117263f, +0.2223817f, +0.0158319f, +0.0583863f, -0.0870732f, -0.2300767f, -0.2444475f,
  +0.0387881f, +0.0340894f, +0.1079467f, +0.1027558f, +0.1460415f, +0.0015137f, -0.0210542f, -0.0309612f
);

const float biases[4] = float[4](
  -0.0197489f, -0.0989444f, -0.0240814f, +0.0212013f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer104 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0796727f, +0.0467811f, +0.1614050f, -0.0790450f, -0.2359528f, -0.1396306f, -0.0293595f, -0.0294306f,
  +0.0999056f, +0.1081083f, +0.1776310f, +0.4017734f, -0.3787970f, -0.1874220f, -0.0159806f, +0.3122035f,
  +0.1225782f, +0.2309496f, -0.0806368f, +0.3481740f, -0.3725485f, -0.4472343f, +0.1805194f, +0.0594120f,
  +0.0561657f, -0.1657075f, -0.1104104f, +0.0633445f, -0.1620892f, -0.0713377f, -0.0119090f, -0.2486476f,
  +0.0005394f, -0.1102285f, -0.2821509f, +0.1746694f, -0.3132409f, -0.7216145f, +0.1918717f, -0.1534604f,
  -0.0499850f, -0.0033390f, -0.0174389f, -0.2244401f, +0.0237553f, -0.4718215f, -0.1890405f, -0.3546350f,
  +0.0256952f, -0.1926316f, +0.2083860f, -0.2460627f, +0.0130250f, +0.2569440f, +0.0737684f, +0.0579193f,
  -0.0084930f, +0.2416513f, +0.0145423f, +0.0312499f, +0.0126933f, -0.0818268f, -0.1003260f, +0.1164053f,
  -0.0121904f, -0.0325599f, -0.0336930f, +0.0630274f, -0.1107666f, -0.1714538f, -0.2960370f, -0.0737431f,
  +0.3945158f, +0.1219787f, -0.0142754f, +0.1146768f, +0.0649317f, -0.0608162f, -0.2758422f, +0.0660424f,
  +0.1862128f, +0.0539333f, -0.0424225f, -0.3851255f, +0.1317158f, +0.0469820f, +0.1124516f, +0.0774896f,
  -0.0804171f, -0.0617425f, -0.0223826f, +0.1537709f, +0.1378056f, +0.0253656f, -0.2835283f, +0.0603510f,
  +0.2267214f, -0.2238569f, +0.1306523f, +0.1477786f, +0.0845980f, +0.0543953f, -0.0019001f, -0.0349850f,
  +0.1531991f, -0.2154223f, +0.1693592f, -0.3797610f, -0.2082179f, -0.2753911f, -0.4084969f, +0.2445461f,
  -0.0613548f, -0.2326954f, -0.0007692f, +0.0416702f, -0.2800250f, -0.3020355f, -0.1311808f, -0.2553126f,
  +0.0384336f, -0.0192601f, -0.0778258f, +0.0255788f, -0.0077700f, +0.0196917f, -0.1382256f, -0.1967175f,
  +0.0149686f, +0.0524573f, -0.1936113f, -0.3004224f, +0.1111610f, -0.0599080f, +0.0836770f, -0.3386076f,
  +0.2679585f, +0.1805780f, -0.3314806f, +0.2373006f, +0.3394313f, -0.7683436f, -0.1351632f, -0.1260356f,
  +0.0641699f, +0.0900318f, +0.2420369f, -0.1893520f, +0.1670318f, +0.2378833f, -0.2034495f, -0.0286954f,
  -0.0353641f, -0.0471412f, -0.1596647f, -0.0974325f, -0.2103205f, -0.1096944f, +0.2192376f, +0.1135588f,
  +0.0779799f, +0.2338925f, -0.1011070f, +0.0284540f, +0.0526861f, +0.0569449f, -0.0700317f, +0.2384506f,
  +0.2292252f, +0.1925900f, +0.3463038f, -0.1964623f, +0.2250800f, -0.1420271f, -0.1816159f, +0.0594578f,
  +0.1392939f, -0.0142917f, +0.0799467f, -0.2027842f, -0.1788239f, -0.5501295f, +0.0515423f, -0.3055570f,
  +0.0078813f, +0.0428849f, -0.3118061f, +0.0241614f, +0.0729698f, -0.3015504f, -0.0160058f, -0.1977642f,
  +0.0435586f, -0.1068405f, -0.0584915f, -0.0684841f, -0.0283508f, +0.0810990f, -0.3136434f, -0.2663010f,
  +0.1141230f, +0.1106606f, +0.2811783f, -0.2777683f, -0.1616967f, +0.4476307f, +0.1914761f, -0.2167867f,
  -0.0290984f, -0.0422380f, +0.0453974f, -0.2316084f, +0.0681614f, +0.2819267f, -0.1016113f, -0.0799387f,
  -0.3505971f, +0.1216556f, -0.0121332f, -0.1306079f, -0.1639413f, +0.2178621f, -0.0679329f, -0.0447215f,
  -0.2492529f, +0.1147780f, -0.2739805f, -0.2581437f, +0.0972134f, +0.0135536f, -0.0291457f, -0.0330164f,
  -0.2488149f, +0.1764395f, -0.1510058f, -0.0807139f, +0.0222290f, +0.0894477f, +0.0602002f, -0.0006123f,
  -0.2214223f, +0.3114389f, +0.0158327f, +0.3240312f, -0.0933820f, -0.1666693f, -0.0091566f, -0.2828464f,
  -0.6226084f, +0.0739089f, +0.2247510f, -0.2684142f, -0.3539190f, -0.7019580f, -0.3164101f, -0.2237740f,
  -0.3253622f, +0.0466915f, +0.0304780f, +0.2707783f, +0.1207085f, +0.1364795f, +0.0317751f, +0.5044437f,
  +0.0267951f, +0.0402909f, +0.1383854f, +0.2340744f, +0.1495410f, +0.2562569f, +0.0386671f, -0.0122348f,
  -0.0760598f, -0.1433575f, -0.1811297f, +0.1273734f, +0.0371026f, +0.3735312f, -0.0693657f, +0.1929404f,
  -0.1746178f, -0.1363627f, +0.0924792f, +0.0362893f, +0.0715684f, +0.4617719f, -0.0585487f, +0.0845706f
);

const float biases[4] = float[4](
  +0.0254215f, -0.0157878f, +0.0248745f, +0.0548908f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer104 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0881106f, +0.1466770f, -0.0191725f, +0.0255959f, +0.0747875f, -0.0169183f, -0.0145669f, +0.1864496f,
  -0.0875798f, +0.2413199f, +0.1999719f, -0.2693941f, +0.5414247f, +0.0575253f, -0.5845193f, +0.2920999f,
  -0.0384655f, -0.1026969f, +0.0312572f, -0.2102690f, +0.3248233f, +0.1889305f, +0.0724698f, +0.0037560f,
  -0.0619127f, -0.1184356f, +0.0390130f, -0.1001975f, -0.0957104f, +0.0830756f, +0.0997237f, +0.0448794f,
  -0.0236114f, -0.0462672f, +0.1462531f, -0.5677819f, +0.3147999f, -0.0933521f, -0.0357604f, -0.3118069f,
  +0.0450347f, -0.1060264f, +0.0709877f, +0.0330350f, -0.2000229f, +0.1813115f, -0.0127046f, +0.1487976f,
  -0.0116488f, -0.0906865f, -0.1317746f, -0.4374778f, +0.0885767f, +0.2724552f, -0.1438334f, +0.1947210f,
  +0.0441125f, +0.0842202f, -0.1936128f, +0.1805119f, +0.1003664f, -0.4282993f, +0.2284815f, -0.3010229f,
  -0.0413374f, +0.0260180f, -0.0483368f, -0.1075998f, +0.0948018f, +0.2020546f, +0.0136072f, +0.1124237f,
  -0.1335468f, +0.0659079f, -0.3506903f, -0.2893639f, -0.0010054f, +0.1077276f, +0.2434105f, -0.1452918f,
  -0.1722513f, +0.2670013f, -0.2433005f, +0.4450197f, +0.0748978f, -0.2479193f, +0.0463491f, +0.3132541f,
  +0.0082915f, -0.2051189f, +0.0657043f, +0.0345075f, +0.1939212f, +0.0374290f, -0.0752174f, +0.1074917f,
  -0.1257926f, +0.1444602f, -0.0195440f, -0.3511640f, -0.2505474f, +0.2022146f, -0.0038054f, +0.2296933f,
  -0.1090917f, -0.3880729f, -0.1780838f, -0.1730687f, +0.1293097f, -0.3186892f, -0.0578982f, -0.8242466f,
  +0.0704901f, -0.0223807f, -0.0570649f, +0.0611864f, -0.0631341f, -0.1648888f, -0.0319977f, -0.2875192f,
  -0.0428445f, +0.3540635f, -0.1004949f, +0.3636594f, -0.1089046f, -0.6019925f, +0.1213521f, -0.2798506f,
  +0.0640502f, +0.0658031f, -0.1507945f, +0.1699546f, -0.1814522f, +0.2384328f, -0.4284012f, -0.0156094f,
  -0.0128445f, -0.2424095f, -0.0873496f, +0.0576814f, -0.0335800f, +0.1492127f, -0.1020868f, -0.1328563f,
  -0.1217875f, +0.1491099f, +0.2753769f, -0.1309873f, -0.1088756f, +0.2449261f, +0.1473825f, +0.2577998f,
  -0.2172306f, +0.1463068f, -0.0637108f, -0.0530330f, -0.0656174f, +0.1473448f, -0.2858315f, -0.1080948f,
  +0.0418416f, +0.2524627f, -0.2278338f, +0.1364296f, -0.0373775f, -0.1589425f, +0.1651990f, +0.1737851f,
  -0.3579008f, +0.1181826f, -0.1558579f, -0.1161135f, +0.1446225f, -0.0662539f, -0.0796813f, +0.0881972f,
  -0.2336649f, -0.1308130f, -0.1105020f, -0.0159809f, -0.1359747f, +0.0212422f, -0.2609642f, +0.3274235f,
  -0.1264983f, -0.2552448f, -0.2229456f, +0.0816045f, -0.1356545f, -0.0482381f, -0.0695008f, -0.1393026f,
  -0.1110251f, +0.2247063f, +0.0946430f, -0.1790229f, +0.1621746f, +0.0378023f, -0.2482054f, +0.0880833f,
  -0.1131345f, -0.1489915f, -0.0746172f, +0.0743669f, +0.0844219f, +0.2420008f, -0.3516272f, +0.0442891f,
  -0.0790758f, -0.1921931f, +0.0729809f, +0.1237009f, +0.1700205f, -0.1923145f, -0.2318090f, -0.1595819f,
  -0.0409188f, +0.0738439f, +0.0673574f, -0.0594374f, +0.0359341f, -0.0920866f, -0.0822181f, -0.0661369f,
  +0.1876596f, -0.2046024f, -0.1834934f, -0.1705901f, +0.0971931f, -0.1175800f, -0.1862805f, +0.0670756f,
  +0.2620761f, +0.2561487f, -0.0322554f, +0.0225502f, +0.0166367f, -0.0353336f, -0.0179737f, +0.1116816f,
  +0.0468480f, -0.2075023f, +0.3230105f, +0.1713561f, -0.3625055f, -0.0283287f, -0.0794372f, -0.0524784f,
  -0.0077211f, -0.0742257f, -0.0856346f, -0.1135682f, +0.2344070f, +0.0056025f, +0.1892692f, +0.0438894f,
  +0.1434616f, +0.2114156f, -0.1939159f, -0.3828850f, +0.0014052f, +0.1773043f, +0.1315991f, -0.1904785f,
  +0.0619579f, -0.3136885f, +0.0074439f, -0.1923994f, +0.1395684f, -0.2916833f, +0.1665595f, -0.2206650f,
  +0.2494054f, +0.1793869f, -0.0853892f, -0.2360592f, +0.0258505f, -0.1573057f, -0.3775641f, -0.3748085f,
  +0.2020790f, -0.0283408f, -0.0837165f, +0.0281656f, -0.2319617f, +0.2134250f, +0.0295238f, -0.1794522f
);

const float biases[4] = float[4](
  +0.0094406f, +0.0108062f, +0.0402967f, +0.0155352f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer105 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0230692f, -0.1258051f, -0.0815085f, +0.1130012f, -0.0824010f, +0.0376296f, -0.1090036f, -0.1655543f,
  +0.1630133f, -0.1013246f, -0.0662883f, -0.0103009f, -0.0411503f, +0.1356020f, +0.1890757f, -0.1549613f,
  -0.1398266f, -0.2171351f, -0.2547926f, +0.0194939f, -0.0720944f, -0.2006442f, +0.0896805f, +0.1420179f,
  +0.0505805f, -0.0914935f, -0.1967636f, +0.2078502f, +0.0073156f, -0.0876276f, +0.0769170f, -0.2691560f,
  +0.0025154f, +0.0789850f, -0.2139894f, -0.0157390f, +0.0164903f, -0.0102525f, -0.0071576f, -0.2268620f,
  +0.0501250f, +0.0163857f, -0.1891796f, +0.3497746f, +0.1433092f, +0.1032309f, +0.2097589f, +0.1097140f,
  -0.0310960f, +0.0825598f, -0.1459081f, +0.2662438f, +0.0992154f, +0.2243199f, -0.0922065f, +0.0044250f,
  +0.0099371f, -0.1895526f, +0.0460513f, +0.3626534f, +0.1395293f, +0.0011197f, +0.1702107f, -0.3449835f,
  -0.1940806f, -0.5213387f, +0.1194226f, +0.2011067f, -0.0155574f, -0.0401325f, -0.1041001f, +0.2153454f,
  +0.0905119f, +0.1421349f, -0.0817714f, +0.0059917f, -0.0898607f, +0.1133419f, -0.0456576f, -0.1471822f,
  +0.1815124f, +0.0159846f, -0.1381780f, -0.1439514f, +0.0450413f, -0.0749929f, -0.0613701f, +0.2034734f,
  +0.0116691f, -0.0142438f, -0.1300303f, -0.0377328f, +0.0134077f, +0.0050309f, -0.0730459f, +0.1667993f,
  -0.0866963f, +0.0346862f, +0.2943425f, -0.0773057f, +0.2006828f, -0.0662629f, -0.2944620f, +0.1564789f,
  +0.4079715f, +0.0088052f, +0.4709630f, +0.3018408f, +0.4754624f, -0.2886448f, +0.0041799f, -0.3306633f,
  +0.2558359f, +0.0313189f, +0.2252948f, +0.0760758f, +0.0547706f, -0.0643414f, +0.0876797f, -0.0698928f,
  +0.0704494f, -0.0624791f, +0.0210763f, +0.2260656f, -0.0692570f, +0.0264226f, +0.1749832f, +0.1364500f,
  -0.6489528f, -0.2174228f, -0.2005263f, -0.0554649f, -0.2877810f, -0.0719572f, +0.0384092f, +0.3991026f,
  -0.2377337f, -0.1528033f, -0.0428943f, -0.1424188f, +0.0372092f, +0.1168120f, +0.0113698f, +0.0930720f,
  -0.0156448f, -0.0939879f, +0.1798963f, +0.0716173f, -0.0671073f, -0.2198174f, +0.0282761f, +0.0815454f,
  -0.0852583f, +0.2323036f, -0.1370912f, -0.0528086f, -0.0519706f, -0.0326100f, +0.1739017f, -0.1070146f,
  +0.0763689f, -0.0055287f, -0.1453725f, -0.1598101f, +0.3641225f, -0.3963772f, +0.1062725f, +0.2716774f,
  +0.2078003f, -0.0243431f, +0.0532054f, -0.2093146f, +0.0972285f, +0.0005438f, +0.0518509f, +0.3910959f,
  +0.1031589f, -0.1064747f, +0.0712474f, +0.3864728f, +0.3018860f, -0.0412010f, -0.5407820f, -0.3605495f,
  +0.2265453f, +0.0600356f, +0.2834093f, +0.3002127f, +0.1134304f, +0.4768870f, +0.0731161f, -0.3802232f,
  -0.1104831f, -0.0336791f, -0.2459125f, +0.1214250f, +0.1623843f, -0.0330461f, -0.0461484f, -0.2392031f,
  -0.1665992f, -0.1125449f, +0.2432410f, +0.0401792f, -0.1334973f, +0.1269214f, +0.1737496f, +0.4537548f,
  -0.1620025f, -0.3363356f, +0.0555394f, -0.2682874f, -0.2774329f, +0.0938453f, -0.1652922f, -0.0400061f,
  -0.0716186f, +0.0071052f, -0.1373987f, +0.0403758f, +0.0815114f, +0.3501654f, -0.0481625f, -0.0366635f,
  -0.2791435f, +0.0400117f, +0.0701796f, +0.0082213f, +0.0147530f, +0.0441673f, -0.0697497f, -0.2060691f,
  -0.0284378f, -0.0162321f, +0.0666825f, +0.0548604f, +0.1195824f, +0.2007487f, -0.0025584f, -0.0790119f,
  +0.2704525f, +0.1376955f, -0.0465424f, -0.0545663f, +0.0544791f, -0.1434653f, -0.0154471f, -0.0551173f,
  +0.0467315f, +0.1319892f, -0.0023124f, -0.1902690f, -0.0440383f, -0.2908194f, -0.3477263f, +0.2569784f,
  +0.1566246f, +0.1670961f, -0.1727503f, -0.0138696f, -0.1535749f, -0.0681993f, -0.0102885f, -0.0154367f,
  -0.2319525f, -0.1100435f, +0.0104675f, -0.1628046f, +0.2168060f, +0.1690069f, +0.0050888f, +0.1420487f,
  -0.0081148f, +0.0716565f, -0.2316650f, +0.0109685f, -0.0339166f, -0.2692864f, +0.1898098f, -0.0287560f,
  -0.0123766f, +0.0345763f, -0.1024733f, -0.1234796f, -0.1278254f, +0.0829681f, -0.0013157f, +0.0191346f
);

const float biases[4] = float[4](
  +0.0279346f, -0.0342862f, -0.0528322f, +0.0060817f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer105 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0447091f, +0.0559008f, -0.1132333f, +0.1580678f, +0.0796119f, +0.0311286f, -0.0084479f, -0.2525126f,
  -0.2377595f, -0.0796386f, +0.1633470f, -0.1276125f, -0.0531916f, -0.0493220f, -0.2812676f, +0.3538778f,
  +0.2139860f, -0.2929457f, -0.0706055f, +0.2162100f, +0.0675423f, +0.1885220f, +0.3136717f, -0.1600283f,
  +0.0878672f, +0.0355987f, +0.0046260f, +0.0928760f, +0.0338882f, +0.1214550f, -0.1791680f, -0.2597473f,
  -0.1981068f, +0.2797435f, +0.0512289f, -0.0627457f, -0.0689300f, -0.2797792f, -0.0163314f, +0.0434290f,
  +0.0017260f, +0.0569127f, -0.0583057f, +0.3357680f, +0.1899083f, +0.1935079f, +0.3220465f, -0.2925980f,
  +0.0171823f, +0.0280684f, +0.0298577f, -0.0424396f, +0.0730744f, -0.0041602f, -0.0451510f, -0.0979400f,
  +0.0388549f, +0.0321064f, +0.0745920f, +0.1650890f, -0.1290046f, -0.2059386f, -0.0014177f, -0.1219073f,
  +0.1483366f, +0.0748323f, +0.1435334f, -0.0627617f, +0.2921657f, +0.4073765f, -0.0812924f, -0.1424285f,
  +0.0840106f, +0.1350155f, -0.1103247f, +0.1372262f, +0.1441018f, -0.2229488f, +0.1084327f, -0.6499378f,
  +0.1866635f, -0.1439320f, +0.1232780f, +0.1067068f, +0.1515474f, +0.3065458f, +0.1749091f, -0.1864600f,
  +0.0888719f, -0.2515635f, -0.1447691f, -0.1162815f, +0.2295772f, +0.0948153f, +0.1775029f, -0.3357848f,
  +0.0215175f, -0.1504702f, +0.0755481f, +0.0757909f, +0.2993641f, +0.0367671f, -0.1318618f, -0.0872662f,
  -0.1730564f, -0.2108169f, +0.3242609f, -0.2727932f, -0.0765352f, -0.3871534f, -0.1317894f, -0.0060016f,
  +0.1454797f, +0.0561535f, +0.0551490f, +0.0601067f, +0.0111421f, +0.1571249f, -0.0912246f, -0.2624789f,
  +0.1613153f, -0.0284878f, -0.0053247f, +0.1788085f, +0.1877908f, -0.1101294f, +0.0335803f, -0.1068993f,
  -0.0816110f, -0.0647182f, -0.0727356f, +0.2126492f, -0.2125365f, +0.1594207f, -0.0510709f, +0.0107652f,
  -0.1726154f, -0.0580009f, -0.0534853f, +0.1848481f, +0.0227790f, +0.2493577f, -0.1514321f, +0.0557654f,
  +0.0961625f, +0.3013544f, -0.2327629f, +0.0758090f, +0.0424229f, -0.1986109f, -0.0933140f, -0.2065663f,
  -0.1148774f, +0.3508020f, -0.1048872f, +0.0265612f, +0.1855302f, -0.0064876f, +0.0518306f, +0.1508417f,
  -0.0659610f, +0.1649193f, -0.0045714f, -0.0190733f, +0.0590886f, -0.1079194f, -0.0156280f, -0.0785142f,
  -0.2203426f, +0.2027065f, -0.1430808f, -0.0382635f, +0.0793249f, -0.0038539f, -0.1950276f, -0.1865279f,
  +0.0191038f, +0.0638961f, -0.0383719f, +0.0896105f, +0.0741337f, +0.0591719f, -0.0597917f, -0.0744847f,
  -0.0091957f, -0.0678283f, -0.2465720f, -0.0444141f, +0.1847963f, -0.0912369f, +0.1885646f, +0.1910172f,
  -0.0816642f, +0.1287059f, -0.1504808f, -0.0233720f, +0.0074065f, +0.0057423f, -0.0722248f, -0.2694077f,
  -0.2312984f, +0.0280871f, +0.0496067f, +0.1244582f, +0.1699698f, +0.0652907f, +0.2619547f, -0.0697732f,
  +0.0576246f, +0.0207582f, +0.0355263f, +0.0520429f, +0.0573320f, +0.0588893f, -0.1756710f, +0.0938898f,
  +0.1676794f, +0.0514910f, -0.2175295f, +0.1920699f, -0.2717676f, +0.0157185f, +0.2326635f, -0.3431357f,
  -0.2559928f, +0.0749940f, -0.0481236f, -0.2148919f, +0.2458189f, -0.0380160f, -0.0241572f, -0.0697730f,
  +0.0669149f, +0.0980529f, -0.1077767f, +0.0904652f, -0.1788687f, +0.1849017f, -0.2564377f, +0.0919387f,
  +0.0249563f, +0.1506903f, -0.0524193f, -0.0094766f, +0.0348970f, +0.0344866f, +0.0881376f, -0.2927454f,
  -0.0418205f, +0.0519826f, +0.0878136f, -0.1269905f, +0.2500950f, +0.3799624f, -0.1102377f, -0.1715643f,
  +0.1286189f, +0.0967300f, -0.0262000f, +0.1900588f, -0.0977244f, -0.1653320f, -0.2585307f, +0.2314128f,
  +0.0004696f, -0.1055836f, -0.0857265f, +0.0239136f, -0.0912043f, -0.0828520f, +0.0217483f, +0.0529317f,
  -0.0530361f, +0.1719610f, -0.0552549f, +0.2127819f, +0.0763787f, -0.0060652f, +0.0359639f, -0.0045842f,
  +0.2401174f, +0.1112337f, +0.0419626f, +0.0275813f, +0.0177606f, -0.0613034f, -0.1826368f, -0.1709132f
);

const float biases[4] = float[4](
  -0.0263798f, -0.0350774f, +0.0258370f, -0.0691210f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer106 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0651837f, -0.3020530f, +0.1859597f, -0.0579910f, -0.3670378f, +0.2065431f, -0.0818719f, +0.1008082f,
  +0.2158620f, -0.2057770f, -0.0083481f, -0.0798974f, -0.4104397f, +0.1260740f, -0.0238276f, +0.1975593f,
  +0.0233353f, -0.2872532f, +0.0476221f, -0.0144633f, +0.1527963f, -0.0614776f, +0.0703122f, +0.0817219f,
  +0.1485395f, +0.2578501f, +0.4059607f, -0.0630456f, +0.3596173f, -0.3487746f, +0.0774086f, +0.0328782f,
  +0.1148888f, +0.4107356f, -0.5965384f, -0.1874422f, -0.0406590f, -0.1502880f, -0.3169481f, +0.4362685f,
  -0.0192452f, +0.1365588f, +0.1304984f, -0.1896744f, +0.0683403f, -0.0573327f, -0.2523423f, -0.2234141f,
  -0.0024678f, -0.0864310f, +0.0091782f, +0.0228521f, +0.0177717f, -0.1467423f, -0.1380135f, -0.1097664f,
  -0.0712347f, -0.0711487f, -0.0437909f, +0.2946722f, +0.0942823f, +0.0535394f, -0.0492210f, +0.0681989f,
  +0.0693263f, +0.0670301f, -0.0286990f, +0.2117162f, +0.1235660f, -0.2171445f, +0.0242981f, -0.0919704f,
  +0.1321388f, +0.0256643f, +0.2174746f, -0.0853863f, -0.0759026f, +0.0480824f, -0.0233453f, -0.1279452f,
  +0.1592841f, -0.1745285f, +0.2773587f, -0.0602256f, +0.0557227f, +0.1111456f, -0.1630540f, -0.2141248f,
  -0.0629197f, -0.0886135f, -0.0507880f, +0.1513703f, -0.2015959f, -0.0269127f, -0.0629833f, +0.1321723f,
  -0.1243718f, -0.0855660f, +0.1098668f, -0.1574518f, +0.2098416f, -0.0099090f, +0.0197665f, -0.0845511f,
  +0.1677561f, +0.1075218f, -0.0929314f, -0.1561301f, -0.1493614f, +0.1093215f, -0.1445945f, -0.0775202f,
  +0.1276360f, +0.1561265f, -0.0155496f, -0.0693879f, +0.0362171f, -0.0322816f, -0.0489679f, -0.0281723f,
  +0.2974072f, +0.0584217f, -0.0006185f, -0.1430531f, +0.2605579f, -0.1048181f, +0.1460571f, -0.1198478f,
  +0.0372470f, +0.2581077f, -0.0403825f, +0.0354398f, +0.0709771f, -0.0706392f, -0.1947164f, +0.0436920f,
  -0.0027608f, +0.0007394f, +0.0029067f, -0.0944911f, +0.1806715f, +0.0191787f, -0.0525662f, -0.1902667f,
  +0.0820921f, -0.0502674f, -0.0737431f, -0.0892007f, -0.1347344f, +0.1499067f, +0.1457209f, -0.2973103f,
  +0.0701480f, -0.2435729f, +0.0602692f, -0.0197079f, -0.1175273f, -0.0929178f, +0.0927032f, +0.1090927f,
  +0.0365393f, +0.0208275f, -0.0649145f, -0.0884903f, +0.1299176f, -0.1525952f, +0.2051279f, -0.1160286f,
  +0.2822744f, +0.2117288f, -0.1461961f, +0.1895441f, +0.2271796f, -0.0710154f, +0.3697876f, +0.0194164f,
  +0.1480199f, +0.2081540f, -0.3885306f, -0.0945526f, -0.0429147f, -0.1400628f, +0.3518805f, -0.4434626f,
  +0.1119801f, -0.0528810f, +0.0533699f, +0.0403077f, +0.1284612f, -0.1589037f, +0.0282936f, -0.1676295f,
  +0.2226072f, -0.1031465f, +0.0010421f, +0.0218724f, +0.2706677f, +0.0582249f, +0.1322300f, -0.1411108f,
  +0.2396706f, +0.0446870f, -0.1019733f, +0.0887710f, +0.0624070f, -0.0083198f, +0.0188689f, -0.1376495f,
  +0.1455117f, +0.0751568f, +0.0151317f, +0.1223654f, -0.0770580f, +0.1470863f, +0.0925581f, -0.0031622f,
  -0.0841352f, +0.0002074f, -0.3108772f, +0.0870969f, +0.2084602f, -0.0868664f, -0.3987120f, +0.0986942f,
  -0.3499526f, -0.3085760f, -0.3087803f, +0.1721916f, +0.1483731f, +0.0335818f, -0.0627566f, -0.0558750f,
  -0.2009376f, +0.4162387f, -0.1272201f, -0.0228898f, -0.0243259f, -0.1305592f, +0.1244501f, +0.1645768f,
  -0.2262537f, +0.1070727f, +0.3562608f, +0.0341582f, -0.1998311f, -0.2288178f, -0.0434301f, +0.1416373f,
  -0.4352331f, +0.1946053f, +0.1775266f, +0.1510559f, +0.1740932f, -0.1385436f, +0.0208974f, +0.0945989f,
  -0.2524753f, -0.3624306f, -0.0715296f, -0.3531092f, +0.0853284f, -0.1851857f, +0.3281705f, -0.0628334f,
  -0.1230560f, +0.0820445f, +0.0170359f, +0.0025389f, -0.1020137f, +0.0551919f, +0.1261840f, +0.0523273f,
  -0.1283944f, -0.1366333f, +0.1424790f, +0.1119710f, -0.0120121f, +0.2674849f, -0.1419597f, +0.1044119f,
  -0.1091621f, +0.0559534f, +0.0457329f, +0.0223233f, -0.0239941f, -0.0942963f, -0.0186677f, +0.0515349f
);

const float biases[4] = float[4](
  -0.0163354f, -0.0027359f, +0.0134908f, -0.0043528f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer106 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1032514f, -0.1798593f, +0.0274283f, +0.1481509f, -0.1930500f, +0.2724542f, -0.0952616f, +0.0904305f,
  +0.0618294f, -0.4442624f, +0.1389381f, +0.0892371f, +0.1544468f, +0.1070479f, +0.0538328f, -0.1187687f,
  -0.0239088f, +0.0370858f, -0.0632531f, -0.0061060f, +0.0070800f, +0.2830434f, -0.1217932f, -0.1007194f,
  -0.0000330f, -0.0298445f, +0.1199919f, -0.0272655f, +0.1077959f, +0.0628438f, +0.3824600f, +0.0340578f,
  -0.0229650f, +0.3309544f, -0.3112018f, -0.1538295f, +0.0006603f, +0.0143480f, -0.1158915f, -0.3792814f,
  +0.0290481f, -0.0787227f, +0.0641845f, -0.0475586f, +0.0117131f, -0.1279405f, -0.0052351f, +0.1960335f,
  +0.0153691f, +0.1303997f, +0.2135000f, -0.0979797f, -0.2184017f, +0.2403438f, -0.0810157f, -0.0353902f,
  +0.0229652f, +0.1622702f, -0.0693365f, -0.1658203f, -0.1468014f, +0.1761573f, +0.0485909f, +0.1301998f,
  -0.0619018f, -0.0073022f, +0.0918837f, +0.0322908f, +0.0051895f, +0.1982867f, +0.0272003f, -0.0364371f,
  -0.0715277f, +0.1757063f, +0.0565189f, +0.0365170f, +0.0161472f, -0.0236018f, +0.0302920f, +0.0273487f,
  -0.0576031f, -0.2558298f, +0.0792637f, +0.2018038f, +0.2486277f, +0.4380445f, +0.2943794f, +0.4028524f,
  +0.0398452f, -0.1622795f, -0.0949317f, -0.0543445f, +0.2381329f, +0.2078989f, +0.0827205f, +0.0175398f,
  -0.0985729f, +0.0750591f, -0.1285112f, +0.1722499f, +0.3259885f, +0.4238668f, +0.1517967f, -0.1251267f,
  +0.0797620f, +0.6062872f, +0.1471708f, +0.0731603f, +0.2388902f, +0.3612536f, -0.1854080f, -0.1254804f,
  -0.0120638f, -0.0407807f, +0.0406508f, +0.0430299f, +0.1482636f, +0.0540794f, +0.1104880f, +0.2941346f,
  -0.0290135f, +0.0773365f, -0.2393034f, -0.0512651f, +0.0634370f, -0.1444995f, +0.1069567f, +0.0388387f,
  +0.0469343f, -0.0404943f, +0.1217811f, +0.1003293f, +0.2165329f, -0.0502345f, +0.1174052f, -0.1241193f,
  -0.0133129f, +0.0718204f, -0.0076199f, -0.0891789f, +0.1640015f, +0.2933643f, +0.0001543f, -0.0746362f,
  -0.0745339f, +0.2000440f, -0.1965918f, +0.0711288f, +0.1677584f, +0.0116851f, +0.2164031f, +0.0517604f,
  -0.0377853f, -0.0293952f, +0.1243860f, -0.1880563f, -0.0120784f, +0.2171303f, +0.0330820f, +0.2732544f,
  +0.0501418f, +0.0633733f, -0.1633699f, +0.3529163f, +0.0824621f, +0.0468133f, +0.1567410f, -0.0002951f,
  -0.1426959f, -0.0108112f, -0.3978212f, +0.2011810f, +0.3616402f, +0.1950689f, +0.2308737f, +0.0354660f,
  -0.1506304f, -0.3007694f, -0.5519478f, +0.2854678f, +0.1078021f, +0.1626053f, -0.0683459f, -0.2881977f,
  +0.0723562f, -0.0463085f, +0.2727891f, +0.2522360f, +0.1380454f, -0.1105855f, +0.1135936f, -0.3479317f,
  -0.0860473f, -0.0527145f, +0.0808534f, +0.0729151f, +0.0920873f, -0.1272697f, +0.0309370f, +0.0042891f,
  -0.1071283f, +0.1333917f, -0.2383671f, +0.1369020f, +0.2139001f, -0.0544042f, +0.2302227f, -0.1498401f,
  -0.0182062f, +0.0050606f, +0.0038326f, +0.0904382f, +0.2236730f, +0.0821978f, +0.0844996f, -0.0464114f,
  +0.0485747f, -0.0394877f, +0.0939753f, -0.0803074f, +0.3410765f, -0.2984995f, -0.0645519f, -0.0307412f,
  +0.0940705f, +0.0509368f, +0.1079489f, -0.0200054f, +0.1119303f, -0.3598940f, -0.0691321f, -0.2184722f,
  +0.1254173f, +0.0965769f, +0.0029441f, +0.0655003f, +0.0063095f, -0.0245905f, -0.0212497f, -0.0947620f,
  -0.0465421f, -0.0374601f, +0.5884902f, -0.1788806f, +0.1268468f, +0.0894489f, -0.0781332f, -0.1627533f,
  +0.0937504f, +0.0147124f, -0.5533512f, -0.2002184f, -0.3123223f, -0.1858242f, -0.1351662f, -0.2324618f,
  +0.1517249f, +0.2611144f, -0.1022684f, +0.2992023f, +0.0950694f, +0.0939643f, +0.2374720f, -0.1554835f,
  +0.1586402f, +0.1036319f, -0.1709269f, +0.1908867f, -0.0730112f, +0.1348551f, -0.0928269f, -0.2413078f,
  +0.2744866f, +0.1873284f, -0.0770282f, +0.0491886f, +0.0110856f, -0.3109168f, -0.0530464f, -0.2852786f,
  +0.1531037f, -0.1207510f, +0.3448361f, +0.0723174f, +0.1149942f, -0.1734924f, -0.1020791f, -0.3595547f
);

const float biases[4] = float[4](
  -0.0244183f, -0.0072916f, +0.0291729f, -0.0138809f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer107 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0335214f, -0.1047448f, -0.0473248f, -0.0654619f, +0.1090692f, +0.1724567f, +0.0837804f, -0.0759790f,
  -0.0103587f, +0.0590765f, +0.1285029f, +0.0421657f, +0.0825721f, -0.0206594f, -0.0182690f, +0.1446203f,
  -0.3566640f, -0.1326326f, +0.0059508f, -0.0065068f, +0.0828824f, +0.2548096f, +0.1299928f, -0.0932207f,
  -0.1098078f, -0.1108669f, -0.1018980f, +0.0099588f, -0.0079314f, +0.0266250f, -0.2431662f, -0.0945651f,
  -0.1740032f, -0.0421950f, +0.0049140f, +0.0553001f, -0.1210443f, +0.2057065f, +0.3139663f, +0.0340859f,
  -0.0404584f, +0.1612073f, +0.1572197f, +0.0480372f, -0.0007030f, +0.0134890f, +0.1772838f, -0.2246728f,
  -0.1845831f, -0.0603118f, +0.1274749f, -0.0402590f, +0.0013584f, -0.0702801f, +0.0821895f, +0.0307567f,
  -0.2623116f, -0.0036795f, +0.1283816f, +0.0928605f, -0.2047417f, -0.1834490f, -0.1135671f, +0.1408162f,
  +0.2135922f, -0.1429320f, +0.0255696f, +0.0603962f, -0.1185805f, +0.0504388f, +0.0755384f, -0.0022267f,
  -0.0341492f, -0.2012995f, +0.2131370f, +0.0468577f, -0.1240758f, -0.0965397f, +0.2123965f, -0.1141044f,
  -0.0934241f, +0.1252236f, +0.0770289f, -0.0090442f, -0.1597460f, +0.0677468f, +0.0713353f, -0.1029258f,
  -0.0966393f, -0.0244373f, +0.0876743f, +0.1409890f, +0.1014564f, +0.0009181f, -0.1015552f, +0.2474773f,
  -0.0524995f, -0.0359316f, -0.0907319f, +0.0047692f, +0.1028917f, +0.0341435f, -0.0282003f, -0.1167380f,
  +0.2083474f, +0.2463156f, -0.1165191f, +0.2507877f, +0.4354445f, -0.2921129f, +0.2253142f, +0.1948984f,
  +0.2296114f, +0.3041655f, -0.1291361f, -0.0288134f, +0.1350417f, +0.0577106f, -0.2280155f, +0.0229719f,
  +0.0833774f, -0.0321333f, +0.1661789f, +0.2448665f, -0.0445721f, +0.0455246f, +0.1602795f, +0.0868319f,
  -0.2198805f, +0.0348211f, -0.1291111f, -0.0316745f, +0.0054425f, +0.2647763f, +0.0186072f, +0.0457082f,
  +0.3176466f, -0.1855065f, -0.0701719f, -0.0859045f, +0.0323124f, +0.0866538f, +0.0040930f, -0.0718275f,
  -0.0309133f, +0.0332868f, +0.0504538f, +0.2161250f, -0.0310163f, -0.0488741f, -0.0502534f, +0.1052736f,
  +0.0976519f, -0.0004557f, -0.0597150f, +0.2999321f, -0.0926100f, +0.1422297f, +0.0645598f, +0.1380966f,
  -0.0648467f, -0.0663641f, +0.0677449f, -0.1169135f, +0.0525863f, -0.1696564f, +0.0793883f, -0.2021818f,
  -0.1210759f, -0.1154780f, +0.0666654f, -0.1275285f, +0.0129312f, -0.0556443f, +0.1582800f, +0.2145543f,
  -0.0175277f, +0.1778347f, -0.1015378f, -0.0191417f, -0.0111658f, +0.2485486f, -0.1515459f, -0.1666837f,
  +0.0591958f, -0.0259072f, +0.0485252f, +0.0840870f, +0.0803244f, -0.3825233f, -0.0869316f, +0.0383681f,
  -0.2355622f, +0.2144418f, +0.0833962f, +0.2846244f, -0.1987613f, -0.2039353f, +0.0205031f, -0.0176029f,
  -0.1002772f, +0.2518350f, +0.0462359f, +0.0825212f, +0.0231087f, +0.2783997f, -0.1342292f, -0.1525707f,
  +0.1508435f, +0.0997793f, -0.2088008f, +0.0651753f, +0.0286310f, +0.2268989f, +0.0345053f, -0.0196458f,
  +0.0992916f, +0.0132531f, -0.0583429f, -0.0199580f, +0.2736915f, -0.0415943f, -0.0809311f, +0.3520621f,
  -0.0345817f, -0.1647124f, -0.2703883f, +0.3074716f, -0.3365650f, +0.1402676f, +0.0795769f, -0.2476968f,
  -0.0350403f, -0.0674937f, +0.1193281f, -0.1115146f, +0.3029607f, -0.2590924f, +0.1104077f, -0.0445114f,
  -0.1271624f, +0.0222833f, -0.1390668f, +0.0497715f, +0.1347450f, +0.0664064f, +0.0104940f, -0.0307283f,
  +0.0497539f, +0.0082285f, +0.0366878f, -0.0927396f, +0.2682561f, -0.1202714f, +0.1341980f, -0.0510158f,
  +0.0249391f, +0.0594927f, -0.0369576f, +0.3082316f, -0.0124799f, +0.2068042f, -0.1400985f, +0.0476852f,
  +0.0123229f, -0.1909838f, +0.0335986f, -0.2407047f, +0.2103253f, +0.1381989f, +0.0718281f, -0.2876599f,
  +0.1384737f, +0.0794278f, -0.0627207f, +0.1183388f, +0.1109606f, +0.0037176f, +0.0256597f, +0.2163179f,
  -0.0839611f, +0.0215782f, +0.1680747f, +0.0946245f, +0.0037580f, +0.0501989f, -0.2359529f, -0.0323715f
);

const float biases[4] = float[4](
  +0.0325475f, -0.0176104f, +0.0696862f, -0.0203858f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer107 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1327150f, -0.1974789f, +0.0415437f, +0.0036938f, +0.0698155f, +0.1671354f, +0.0513535f, -0.0145207f,
  +0.2810042f, +0.1937897f, +0.0058095f, +0.0150684f, -0.3952477f, -0.0511199f, +0.1353520f, +0.3013017f,
  +0.0464620f, -0.0010324f, +0.2920631f, -0.0401395f, +0.2187613f, -0.5400730f, +0.0336315f, +0.1996746f,
  +0.0419651f, +0.1298492f, -0.0208523f, -0.1280520f, -0.0686013f, -0.2051318f, +0.0685828f, -0.0423686f,
  +0.2996215f, +0.0563118f, +0.4170964f, +0.2433917f, +0.5563219f, +0.1309661f, -0.3280474f, -0.3829468f,
  +0.0229325f, -0.2596764f, -0.1367332f, +0.1923718f, -0.3299609f, +0.4743421f, +0.1125578f, -0.0067460f,
  +0.0615658f, +0.3004633f, -0.0915554f, +0.1221207f, +0.0521539f, +0.1976313f, -0.1266595f, -0.0629174f,
  -0.1929937f, -0.2349692f, +0.0126126f, +0.0570682f, -0.0619826f, +0.1005542f, +0.0290867f, +0.1618570f,
  -0.0477286f, -0.3319712f, +0.0298859f, -0.4157585f, -0.0103321f, +0.1642649f, -0.0288308f, -0.1334107f,
  -0.0540433f, +0.1941570f, -0.3392515f, -0.0946643f, -0.1797287f, -0.0705691f, -0.1135530f, +0.0894746f,
  +0.3750016f, -0.3018954f, -0.0832810f, -0.1043130f, -0.1868191f, +0.0689544f, -0.0631847f, -0.2613076f,
  -0.1981751f, +0.0753890f, +0.0718680f, +0.0590804f, +0.1694552f, +0.0541910f, +0.2046537f, -0.1430010f,
  +0.0045095f, +0.2486635f, +0.0201079f, +0.0460440f, -0.2740599f, -0.0618127f, +0.1282525f, +0.0177417f,
  -0.3261355f, +0.1086740f, +0.2210123f, +0.1260851f, -0.0476064f, +0.0386401f, +0.0246368f, -0.1164152f,
  -0.0459188f, -0.0321062f, +0.1752591f, +0.0158185f, +0.0477119f, -0.0834674f, -0.1261730f, -0.1784776f,
  +0.1810843f, -0.0889647f, +0.0856791f, +0.0956723f, -0.2953895f, -0.1805288f, -0.0093810f, +0.1659124f,
  +0.2094835f, +0.0101085f, +0.0106830f, +0.0193042f, -0.2277403f, +0.2236630f, -0.0148999f, +0.1511753f,
  -0.1649775f, +0.1977766f, -0.2428428f, -0.0673423f, +0.1986165f, +0.0096011f, -0.1154989f, -0.0153734f,
  +0.0533140f, -0.0657176f, -0.2805001f, +0.0215259f, +0.1103531f, +0.0203160f, -0.0677701f, -0.2030972f,
  +0.2744137f, -0.0034890f, -0.0848929f, +0.1203981f, -0.0712019f, +0.3241296f, -0.1801548f, +0.0099668f,
  +0.1400340f, -0.0239305f, -0.1216421f, -0.0769808f, -0.0470990f, +0.2544996f, -0.0026861f, +0.2519436f,
  +0.1835359f, +0.0209215f, +0.1262915f, +0.1423691f, -0.0647903f, +0.1001568f, +0.1492286f, +0.2002215f,
  -0.2845562f, +0.1007716f, +0.3879310f, -0.3696557f, -0.5453001f, -0.3005441f, +0.1323490f, +0.0546191f,
  +0.3187850f, -0.2244486f, +0.1588808f, -0.1392807f, -0.4362806f, -0.1355647f, -0.2760995f, -0.0984364f,
  -0.0458049f, +0.1648791f, -0.2578844f, -0.2078144f, +0.3093511f, +0.0889611f, -0.1989382f, +0.0943113f,
  +0.2005200f, +0.1477836f, -0.0645675f, -0.0702872f, +0.4216107f, -0.2777751f, -0.0261588f, -0.0839596f,
  +0.4114848f, +0.0352481f, -0.1527112f, +0.1714899f, +0.3761292f, -0.2125202f, +0.0337588f, +0.1361334f,
  +0.1137668f, +0.1497610f, -0.1585924f, -0.0655760f, -0.2307946f, +0.0174303f, -0.1813729f, +0.1712170f,
  +0.1346791f, -0.1193128f, +0.0228272f, +0.1084354f, -0.1634307f, -0.0052784f, +0.2668829f, -0.2334741f,
  +0.0092566f, +0.1216838f, +0.0344555f, +0.0013959f, +0.1210112f, +0.0473642f, +0.1696324f, -0.0590880f,
  +0.0276984f, -0.0644516f, -0.0035960f, -0.1411908f, +0.0364253f, +0.0766789f, -0.1575225f, +0.0543515f,
  -0.4104467f, +0.0440965f, -0.1500047f, -0.0993691f, -0.1571217f, +0.1833249f, -0.0869571f, -0.1425152f,
  -0.1863678f, +0.0905247f, -0.0162094f, +0.0562834f, -0.2701417f, +0.0975228f, -0.0904047f, -0.0721824f,
  +0.0162167f, +0.0306653f, -0.0588804f, +0.0772418f, -0.0300326f, -0.1148394f, -0.0265538f, +0.1550869f,
  -0.0691813f, +0.0027649f, +0.0715678f, -0.1070807f, +0.0364244f, -0.0083785f, -0.0344574f, -0.1232534f,
  -0.1760532f, -0.0549548f, -0.1040788f, -0.1482859f, +0.0350797f, +0.0870623f, -0.0184496f, +0.0302399f
);

const float biases[4] = float[4](
  -0.0407851f, +0.0275982f, -0.0616702f, +0.0378889f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer108 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0141094f, -0.1006022f, -0.0493847f, +0.0464728f, +0.2349190f, -0.2414169f, -0.3582713f, +0.3435959f,
  -0.1575097f, -0.0429731f, +0.0447512f, +0.0212277f, -0.2300064f, +0.0167215f, -0.2892716f, -0.2043788f,
  +0.1330037f, +0.1683940f, -0.0204048f, -0.0269819f, -0.0647713f, -0.1017482f, +0.0845445f, +0.0577412f,
  +0.2323791f, -0.1452844f, -0.0733664f, +0.2538449f, +0.0919790f, -0.1480536f, -0.3677730f, -0.0126564f,
  +0.2024423f, -0.3018494f, -0.1374293f, -0.1003778f, -0.1946924f, +0.2243791f, -0.1379059f, +0.2045559f,
  -0.0544503f, +0.1608530f, -0.1160009f, -0.2640106f, +0.2262626f, +0.0558464f, -0.0727311f, -0.2304734f,
  +0.0935591f, +0.0130110f, +0.0310302f, -0.1605892f, -0.0666456f, +0.1004461f, -0.0483319f, -0.0940786f,
  -0.0024579f, +0.0342646f, -0.2033966f, -0.1528690f, -0.0098359f, +0.0496402f, +0.1551839f, -0.0090653f,
  -0.0482095f, +0.0664050f, -0.0125565f, +0.1243038f, -0.0638090f, +0.0650480f, -0.0000621f, -0.1988173f,
  +0.1119421f, +0.1420334f, +0.0496871f, -0.0647883f, -0.1135401f, -0.2693962f, +0.0781014f, +0.2638634f,
  +0.2440767f, -0.1176124f, -0.2865381f, -0.0666674f, +0.0074767f, +0.1203219f, +0.0301508f, -0.1370850f,
  -0.0414328f, +0.0158584f, -0.0332616f, -0.0570157f, -0.0557468f, -0.0987522f, -0.1789564f, +0.0631908f,
  -0.1712171f, -0.0201242f, -0.2122375f, +0.2974443f, +0.0268847f, +0.2621228f, -0.1881770f, +0.0061192f,
  +0.1400271f, -0.0590126f, +0.0539953f, -0.0090108f, +0.1156434f, +0.1135922f, -0.2043655f, +0.0741927f,
  -0.1740436f, +0.0493116f, +0.1950810f, -0.0243884f, +0.0029163f, -0.1407068f, +0.0174716f, +0.2059204f,
  +0.1616518f, +0.0582949f, +0.0656317f, +0.0630936f, +0.0894035f, +0.1263339f, -0.0237603f, -0.1944607f,
  -0.2418537f, -0.0342303f, -0.0514266f, +0.1883124f, +0.1057934f, -0.0157457f, -0.0453102f, +0.0834669f,
  +0.3886399f, +0.1349096f, +0.1458980f, +0.0972520f, -0.1019196f, +0.0132319f, +0.1126739f, -0.2235055f,
  +0.0015661f, -0.0144867f, +0.1012613f, +0.2330829f, +0.0693025f, +0.0708088f, +0.2294431f, -0.0907800f,
  -0.1637096f, +0.1143270f, +0.0251322f, +0.0601221f, +0.2128215f, +0.1065585f, -0.0208470f, -0.1466752f,
  -0.1867245f, +0.0348458f, +0.0737131f, -0.0905744f, -0.0952103f, -0.1044252f, +0.0330093f, -0.0092055f,
  -0.1107378f, +0.0677960f, -0.0764946f, +0.0353477f, -0.2618667f, -0.1841356f, +0.0106912f, +0.0765563f,
  -0.1794637f, +0.1312417f, +0.1662961f, +0.2308573f, -0.0373929f, -0.0803993f, +0.1373359f, +0.0923023f,
  +0.0248511f, +0.2891048f, -0.0103100f, +0.2326224f, -0.0136707f, +0.0364272f, +0.1928741f, -0.0694855f,
  -0.0656673f, -0.0204742f, -0.0538456f, -0.1862986f, +0.0982209f, +0.2930281f, +0.0421755f, -0.3122417f,
  -0.0502676f, +0.1003389f, +0.1874443f, +0.1562458f, +0.0147460f, -0.0361228f, -0.0232538f, +0.0690511f,
  -0.0628960f, +0.1090608f, -0.1106565f, +0.0946234f, +0.0330728f, +0.0458158f, -0.1488517f, +0.1496990f,
  -0.1735169f, -0.1580332f, +0.1299399f, -0.0478905f, -0.0275584f, +0.0324789f, +0.0408582f, +0.1585378f,
  -0.1366874f, +0.0121545f, -0.1519107f, -0.0637534f, +0.1993612f, -0.0973244f, -0.2379489f, +0.3186626f,
  +0.2555433f, -0.0776963f, -0.1292719f, -0.1500271f, -0.0447698f, +0.2963427f, +0.0416610f, -0.2291726f,
  +0.3275168f, +0.0575008f, -0.2717813f, +0.0648560f, +0.3823155f, +0.1219881f, -0.1482907f, +0.0474892f,
  +0.2405954f, -0.3825368f, -0.1409942f, -0.2644042f, +0.0344353f, +0.0231876f, -0.0092201f, +0.1372527f,
  -0.0405565f, -0.0445643f, +0.2340194f, -0.0588772f, -0.1348841f, +0.0837465f, +0.0001319f, +0.0002894f,
  -0.1952985f, +0.0458148f, -0.0137742f, -0.0620253f, -0.0038203f, -0.1994083f, +0.0824723f, -0.0485413f,
  +0.0847632f, -0.1408347f, -0.0174375f, -0.1276537f, -0.1564231f, -0.0924985f, -0.0056669f, -0.0223393f,
  +0.1749587f, -0.1875714f, +0.0485855f, -0.0359033f, +0.0461430f, -0.0408910f, +0.0348767f, +0.2395605f
);

const float biases[4] = float[4](
  -0.0027722f, +0.0025426f, +0.0201245f, -0.0121836f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer108 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1476516f, -0.0928358f, +0.0539417f, -0.1244399f, +0.0202573f, -0.0526385f, -0.3802178f, +0.0872503f,
  +0.2135589f, -0.1762692f, +0.1703097f, -0.0341074f, +0.0265435f, -0.1601671f, -0.5929844f, +0.0162128f,
  -0.0082560f, -0.0763417f, +0.1576401f, -0.1147360f, +0.0987268f, +0.0114520f, -0.1375037f, +0.0560360f,
  -0.0675964f, -0.0855827f, -0.1774985f, -0.1521660f, -0.1648995f, +0.1246479f, -0.3806014f, -0.0617116f,
  +0.0010171f, -0.2541706f, -0.2111616f, +0.1453355f, +0.3016701f, -0.1679379f, -0.2881022f, -0.2036643f,
  +0.0320913f, -0.1192394f, -0.2566460f, +0.0739596f, -0.0150179f, +0.0938463f, -0.0349157f, +0.0871766f,
  +0.0664129f, -0.1278355f, -0.0852219f, +0.1283819f, -0.0301851f, -0.0558939f, -0.3774364f, -0.1435249f,
  -0.1730521f, +0.2431379f, +0.0256720f, +0.0263421f, +0.0211172f, +0.0300390f, +0.1389214f, -0.0756741f,
  +0.0051374f, -0.0284032f, -0.2048116f, +0.0250355f, -0.0035003f, -0.1154024f, -0.0174571f, +0.3374212f,
  +0.1043013f, +0.0858200f, -0.0328263f, +0.0339961f, +0.2475310f, -0.0261932f, +0.1966762f, +0.1553385f,
  +0.1777699f, -0.1470474f, -0.2648691f, -0.1239735f, -0.3397050f, +0.0802870f, -0.3107984f, -0.2238557f,
  +0.0155913f, +0.0126575f, -0.0630129f, -0.0372178f, +0.0089648f, -0.0655513f, -0.0454273f, +0.2945677f,
  +0.1295387f, +0.0564982f, +0.2242754f, -0.1605967f, -0.0929463f, -0.1259348f, +0.2679705f, -0.2676164f,
  -0.1771013f, -0.1710757f, -0.1007021f, -0.1071110f, +0.4719757f, -0.0384392f, -0.1214392f, -0.2188610f,
  -0.0824982f, +0.0619540f, +0.0778847f, -0.0392509f, +0.1979481f, -0.0743937f, -0.1820734f, +0.2281092f,
  -0.1492553f, +0.1635312f, -0.0513571f, +0.1002595f, +0.1244120f, +0.0474721f, +0.2414717f, +0.2121015f,
  -0.1460980f, +0.0234032f, -0.0152310f, +0.0293502f, +0.0789082f, +0.0441901f, -0.1005520f, +0.0076858f,
  -0.1552920f, +0.1069763f, -0.1861700f, +0.0633200f, -0.0088749f, -0.0431797f, -0.0083497f, -0.0109478f,
  -0.2268507f, -0.0343748f, +0.0159613f, -0.0119168f, -0.2020014f, +0.0463425f, +0.1098752f, -0.1792176f,
  +0.2993533f, +0.0916160f, -0.0210558f, +0.1465775f, +0.3079959f, -0.0899465f, +0.0967880f, +0.1546452f,
  -0.2141367f, -0.0677981f, -0.2650795f, +0.0463424f, -0.0505026f, +0.1157065f, +0.0550842f, +0.1121439f,
  -0.1248745f, +0.0593554f, +0.1644688f, -0.0122341f, +0.2506320f, +0.0894726f, +0.2392018f, -0.1566061f,
  +0.1670671f, -0.0389392f, +0.0745313f, -0.2955404f, -0.5344648f, +0.1015810f, +0.0867445f, +0.4126505f,
  +0.2814717f, +0.0129195f, -0.3196011f, -0.2541119f, +0.2589900f, +0.0351868f, +0.1720286f, -0.0620245f,
  -0.2098984f, -0.0858906f, -0.2884153f, -0.0122513f, +0.0189465f, +0.0396264f, +0.1781296f, -0.0652912f,
  +0.0446774f, -0.2974112f, +0.4291081f, -0.2556502f, +0.0784709f, -0.0636959f, +0.2857669f, -0.0501375f,
  -0.0013621f, -0.0229866f, +0.0809259f, +0.1593872f, -0.0877251f, -0.2008516f, +0.0688407f, +0.3468609f,
  -0.3127576f, -0.0903630f, +0.0875021f, -0.0011771f, -0.0966238f, -0.0691606f, -0.4219753f, +0.3197086f,
  -0.0782247f, +0.2562587f, +0.0661002f, +0.1813063f, -0.0138591f, -0.1542943f, -0.0214883f, -0.1871970f,
  -0.1924465f, -0.1944110f, -0.2400982f, +0.1570333f, -0.0355485f, -0.3359154f, +0.2524628f, +0.0681113f,
  -0.1475709f, +0.0618656f, -0.2290615f, -0.0820412f, +0.3328458f, +0.3118984f, +0.0716143f, -0.0167970f,
  -0.0467660f, +0.0489964f, +0.3068483f, +0.7478074f, +0.1610371f, +0.2437345f, +0.1902514f, +0.0734900f,
  +0.0754507f, -0.1553392f, -0.0305280f, +0.0507287f, +0.2255913f, +0.0772572f, +0.0556367f, +0.1764393f,
  -0.2518323f, +0.0220968f, +0.2250725f, +0.1496173f, -0.1070968f, +0.1511271f, +0.0303826f, -0.2805240f,
  +0.2188460f, -0.0583160f, -0.1055400f, -0.3282294f, -0.1704514f, +0.2400934f, +0.0446976f, +0.3420307f,
  +0.0670112f, +0.1462467f, -0.1894242f, -0.2321651f, +0.1214988f, -0.0616648f, +0.0232100f, -0.1762882f
);

const float biases[4] = float[4](
  -0.0252498f, -0.0042594f, +0.0198887f, -0.0086930f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer109 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1038765f, +0.3134077f, -0.0133712f, +0.0849249f, -0.0716573f, +0.0321940f, -0.1133235f, -0.1330778f,
  +0.0214448f, -0.1339845f, +0.0429099f, -0.0835013f, -0.2777097f, -0.0190184f, +0.1216280f, -0.3922771f,
  +0.1791144f, +0.0989712f, +0.1326994f, +0.0264279f, -0.1178954f, -0.2439626f, -0.1607843f, +0.0906213f,
  +0.4102165f, -1.0006514f, +0.3117401f, +0.0076342f, -0.3691058f, -0.1231909f, -0.4174598f, +0.3274943f,
  -0.0059315f, +0.5810396f, +0.5484039f, +0.3174089f, -0.1667787f, +0.0004124f, -0.1552620f, -0.1834545f,
  -0.0638730f, -0.2613669f, -0.6272657f, -0.5011815f, +0.2651776f, +0.1032270f, +0.1382340f, +0.1059258f,
  -0.0188691f, +0.1818226f, +0.0554180f, +0.2478127f, +0.2688363f, +0.1707884f, +0.3042954f, -0.0065804f,
  -0.1151458f, +0.2422477f, +0.0933689f, +0.1645702f, -0.0991749f, -0.1970465f, -0.1923464f, -0.0270389f,
  -0.0731268f, -0.1294712f, -0.0299112f, -0.3317854f, -0.0182605f, +0.1340165f, +0.0184508f, -0.1890106f,
  +0.0004420f, -0.2848979f, +0.3079986f, +0.0593117f, +0.1242675f, -0.0199002f, +0.3395971f, +0.2919618f,
  +0.0060718f, -0.2786702f, -0.1080247f, +0.1635088f, +0.1544278f, +0.0899361f, +0.2281424f, +0.1767252f,
  -0.0226568f, -0.2851679f, +0.1476763f, -0.0233479f, +0.2805356f, -0.1695456f, +0.1761258f, +0.0600516f,
  +0.1384376f, +0.0254299f, +0.0993221f, +0.0583630f, -0.0400036f, +0.0572276f, +0.4514340f, +0.1099571f,
  -0.0848412f, -0.0824576f, +0.1375641f, +0.1187307f, +0.1149578f, +0.0429401f, +0.0002512f, -0.1620005f,
  +0.0464574f, -0.1180787f, +0.1610087f, -0.0588681f, -0.1524865f, -0.1205813f, +0.0967510f, -0.0241254f,
  +0.0802818f, +0.1304664f, -0.0652812f, -0.1580450f, -0.1477140f, +0.0696471f, +0.0780067f, -0.2154487f,
  -0.2721120f, +0.0628394f, +0.5067071f, +0.0237505f, +0.1128252f, -0.1342385f, +0.2351374f, -0.3383060f,
  +0.0781419f, -0.0092738f, -0.0817574f, -0.1572187f, -0.0351964f, +0.1149244f, -0.1806723f, +0.1406330f,
  -0.0217795f, -0.0777962f, +0.0558868f, -0.2121832f, -0.1511587f, -0.0490758f, -0.1750118f, +0.3383463f,
  +0.0081435f, -0.3192325f, -0.1731687f, -0.1315931f, +0.1708325f, +0.0837092f, +0.2585672f, -0.1366540f,
  -0.0081433f, +0.0311998f, -0.0716199f, +0.1507304f, +0.2260310f, +0.3226449f, -0.0500648f, -0.0425520f,
  +0.3315763f, +0.0301609f, -0.3101122f, +0.0165156f, -0.3492773f, +0.1274916f, -0.1774960f, -0.1860385f,
  +0.0164633f, -0.1282544f, +0.1023307f, +0.1274895f, -0.1836125f, +0.2359273f, +0.0766709f, -0.2709040f,
  +0.0225470f, +0.1845254f, -0.0304533f, -0.0935367f, +0.1163581f, +0.1888252f, +0.0016599f, -0.1811781f,
  +0.2725152f, +0.0732405f, -0.2423782f, -0.0375229f, -0.0953864f, -0.0422174f, -0.0632408f, -0.4255033f,
  -0.0632505f, +0.0340137f, +0.2163607f, +0.4032438f, +0.1736279f, -0.2191161f, -0.3127420f, -0.0917814f,
  +0.0628107f, -0.4713501f, +0.3150395f, +0.1060692f, -0.1175133f, -0.0140173f, -0.4279450f, -0.1437920f,
  +0.2291311f, +0.0887514f, +0.1348252f, -0.0255431f, +0.0853967f, -0.0625238f, +0.0525798f, +0.2492559f,
  -0.1301135f, -0.1985372f, +0.1930451f, -0.0791512f, -0.0238116f, +0.0420579f, -0.2471063f, -0.1057636f,
  -0.1693164f, -0.1480010f, -0.1923309f, -0.0943414f, +0.0565326f, +0.0628087f, -0.0276515f, -0.2533916f,
  +0.1589101f, -0.4513392f, -0.1218895f, +0.3673242f, -0.1102111f, -0.2251522f, -0.0688237f, -0.0306799f,
  +0.2960154f, -0.0352960f, -0.3601843f, -0.1326282f, -0.0618383f, -0.4681282f, +0.5833898f, +0.2824267f,
  +0.2582261f, -0.0166820f, +0.2307588f, -0.3393906f, +0.1218220f, -0.0715404f, +0.0037210f, +0.0906773f,
  -0.0209158f, +0.2198023f, +0.0924272f, -0.4256186f, -0.1393472f, +0.2587017f, +0.0220409f, -0.2044801f,
  -0.0646088f, +0.1372541f, +0.3466204f, +0.1270040f, +0.1995851f, +0.6816177f, -0.2064693f, -0.5271257f,
  -0.0957074f, -0.1232748f, +0.1290344f, +0.3015527f, +0.2684973f, -0.3531354f, +0.1069121f, +0.3037592f
);

const float biases[4] = float[4](
  -0.0504247f, -0.0312845f, -0.0377673f, -0.0253283f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer109 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1104375f, -0.0661568f, +0.1107296f, -0.0488758f, -0.2109143f, -0.0138671f, -0.1347488f, +0.1345200f,
  -0.0717851f, +0.3770423f, -0.0722990f, +0.0194979f, -0.1847103f, -0.0024163f, +0.1469949f, +0.0707766f,
  -0.0442929f, -0.0127596f, -0.1107993f, +0.0249857f, -0.1396896f, -0.3213468f, -0.1416379f, +0.2270612f,
  +0.0580290f, +0.0266443f, +0.1903628f, +0.1296400f, -0.2178057f, -0.4073067f, -0.0047878f, +0.1865504f,
  -0.0786084f, -0.3182661f, +0.0140530f, -0.4007640f, +0.2284048f, -0.0926957f, +0.1339571f, -0.0837183f,
  +0.1540059f, +0.0771345f, +0.0300298f, +0.2140864f, -0.0166200f, -0.1563165f, -0.1609897f, +0.1161432f,
  +0.1791023f, +0.2975608f, +0.1520772f, +0.0851624f, -0.1713960f, +0.0681269f, -0.1485718f, -0.0700709f,
  -0.1698330f, -0.0760663f, +0.1116494f, +0.0090626f, -0.1067665f, -0.0042840f, -0.0294509f, -0.2053023f,
  -0.3854493f, +0.0111920f, +0.2213991f, -0.1322418f, +0.1516415f, +0.1117942f, -0.0108214f, -0.2574987f,
  -0.0961004f, +0.0001854f, -0.1044928f, +0.0269564f, -0.0387538f, -0.1283134f, -0.0156966f, -0.1164481f,
  +0.1007713f, -0.0851576f, -0.0135682f, +0.0421490f, -0.2134649f, +0.1602085f, +0.0030053f, -0.0212410f,
  +0.0344666f, -0.1415554f, +0.0068555f, +0.1258956f, -0.1101362f, +0.2216229f, +0.0169679f, -0.1782379f,
  +0.3038692f, +0.2800848f, -0.2565622f, -0.0841632f, +0.0878184f, +0.1067469f, -0.1636268f, +0.1093801f,
  -0.0775436f, +0.2423233f, -0.1696433f, -0.2300248f, -0.0434729f, -0.2416046f, +0.0073989f, +0.0651773f,
  -0.2128132f, +0.2360774f, -0.0590936f, -0.1128270f, +0.0152670f, +0.1008317f, +0.0595022f, -0.1065351f,
  -0.1699179f, +0.0198506f, -0.0053272f, -0.0048160f, +0.1042526f, -0.0427912f, +0.0825711f, -0.0259318f,
  +0.1707410f, +0.0455767f, -0.1553019f, +0.0735625f, +0.0340739f, -0.0849696f, -0.1549003f, -0.0242648f,
  -0.0360933f, +0.0348042f, +0.0417910f, +0.0040226f, +0.0139868f, -0.0939640f, -0.0871781f, -0.0286935f,
  +0.0383530f, +0.2463157f, -0.0228962f, -0.0995893f, +0.0958030f, +0.0122209f, -0.3281386f, +0.0002812f,
  +0.3274786f, +0.1974074f, +0.0978832f, -0.2524293f, +0.2387918f, -0.7305964f, -0.3927476f, +0.0881160f,
  +0.0221869f, +0.0300096f, -0.1389080f, -0.0115575f, -0.1482486f, -0.1682199f, -0.0547084f, +0.2333228f,
  -0.1161509f, +0.1184342f, -0.0510299f, +0.5537130f, +0.4650146f, +0.5126618f, -0.3697768f, -0.2303814f,
  +0.2757961f, +0.2384589f, +0.0284607f, +0.2381113f, +0.2120125f, +0.3259590f, -0.0961827f, -0.2537850f,
  +0.1757644f, +0.0998119f, +0.0323512f, +0.3476314f, +0.0846145f, -0.3079637f, +0.2232790f, +0.0149813f,
  -0.2157508f, +0.0926578f, +0.0144917f, -0.0556659f, +0.2490853f, +0.3681280f, +0.4680213f, -0.2662719f,
  -0.0148207f, -0.2604448f, +0.2332297f, -0.1938515f, -0.0419737f, +0.5273010f, +0.2621976f, -0.1712179f,
  +0.0889810f, -0.0391257f, -0.1512415f, +0.0658514f, +0.0175572f, -0.1698772f, +0.0762137f, +0.1328893f,
  -0.0607222f, -0.0239013f, -0.0329260f, +0.0533735f, +0.1957994f, +0.1355542f, -0.1743197f, -0.0690441f,
  -0.2756036f, -0.1868675f, +0.0038123f, +0.1477456f, -0.1782585f, +0.2993528f, -0.0919999f, -0.1495417f,
  +0.0833160f, -0.0235904f, -0.0874105f, +0.1065130f, +0.1001867f, +0.0521277f, +0.0399538f, -0.0651067f,
  -0.0706654f, -0.3090696f, -0.1108916f, +0.2464287f, -0.1160809f, -0.0954664f, +0.0737645f, -0.0492850f,
  +0.1289470f, +0.1661338f, -0.4641412f, -0.4500306f, -0.2001226f, -0.2908729f, +0.1759104f, +0.3103024f,
  -0.1093018f, +0.2291098f, +0.1064658f, -0.1205144f, -0.0826488f, +0.0586268f, -0.0590162f, -0.0572532f,
  +0.0154011f, -0.0474312f, +0.0112364f, -0.2577066f, +0.0277661f, +0.0893478f, -0.1441275f, -0.0427922f,
  +0.1870045f, +0.1222165f, +0.1575644f, -0.0387775f, -0.0241050f, -0.2655200f, +0.0271890f, -0.2224889f,
  +0.1870359f, +0.1330334f, +0.1130659f, +0.1690102f, -0.0034454f, -0.0842824f, -0.0287560f, -0.0384914f
);

const float biases[4] = float[4](
  +0.0267553f, +0.0352573f, -0.0949224f, +0.0355098f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer110 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1066517f, +0.1454123f, -0.2809125f, +0.1334445f, +0.1960757f, +0.0653471f, -0.0067131f, -0.0877228f,
  -0.3335206f, -0.0019950f, -0.2467691f, +0.1012886f, -0.1346516f, -0.0746508f, +0.2304641f, -0.2701617f,
  +0.0426056f, +0.1366865f, +0.0193990f, +0.0945354f, -0.0500331f, -0.0421530f, +0.2668438f, -0.0367726f,
  +0.0767287f, +0.0514081f, -0.1314572f, -0.0496581f, +0.2240533f, +0.1772744f, -0.0470036f, +0.1615819f,
  +0.5746275f, +0.0323684f, +0.0061729f, -0.0073677f, -0.1450202f, -0.0898972f, +0.5091384f, +0.2262400f,
  -0.0967691f, -0.0235978f, +0.0927074f, -0.1822016f, -0.0754587f, -0.0223107f, +0.0529136f, +0.1733191f,
  -0.1097388f, +0.0823127f, -0.0385415f, +0.0398390f, +0.1359782f, -0.1605814f, -0.0669827f, -0.1237641f,
  -0.1522061f, +0.0143264f, +0.0858583f, -0.0000111f, -0.0055942f, -0.0177919f, +0.0342379f, +0.0089392f,
  +0.2000696f, -0.0504599f, -0.0533085f, -0.0608350f, -0.0520500f, +0.0285133f, +0.0027192f, +0.0549801f,
  +0.0526711f, +0.0496859f, +0.3869136f, -0.0606671f, -0.1264362f, +0.0183127f, -0.0429471f, -0.0414556f,
  -0.0423217f, +0.2088417f, +0.0661216f, -0.2068970f, +0.0323483f, +0.1227245f, +0.1907863f, -0.0047116f,
  -0.0353738f, +0.1632452f, -0.1722218f, +0.0903284f, -0.2511325f, +0.1192594f, -0.0097562f, +0.1535584f,
  -0.0004618f, +0.1112844f, -0.1257881f, +0.0926515f, -0.0068191f, -0.2452951f, +0.1836611f, -0.1118561f,
  -0.0855463f, -0.1720539f, -0.0932329f, +0.0276643f, +0.0789840f, -0.1835608f, -0.2206765f, -0.3551439f,
  +0.0180667f, +0.3187951f, +0.2450603f, +0.0070166f, -0.1010714f, -0.1505977f, +0.0604157f, +0.0779275f,
  +0.1080756f, -0.0584942f, -0.1286801f, -0.0064605f, +0.3384508f, +0.0800025f, +0.0889269f, +0.0495569f,
  -0.0134976f, -0.1284380f, +0.0222049f, -0.0775362f, +0.0935171f, +0.0712876f, +0.2517882f, +0.1812855f,
  -0.2821441f, +0.1590420f, +0.1742037f, +0.1224430f, +0.0113920f, -0.1069210f, -0.1585469f, +0.0939626f,
  -0.1111042f, +0.2129402f, -0.1087636f, +0.0790550f, +0.0313029f, +0.0536976f, -0.1308804f, -0.1777207f,
  -0.0353975f, -0.0072530f, +0.2087497f, -0.0118647f, -0.0101600f, +0.2324740f, -0.1913706f, +0.1273098f,
  -0.0210625f, +0.2167007f, -0.2779176f, +0.3449087f, -0.1009463f, -0.0357282f, +0.0019442f, -0.0938471f,
  -0.0970083f, +0.3357894f, -0.0688788f, +0.2391625f, +0.0105581f, -0.0307950f, -0.1888426f, -0.2293320f,
  -0.0878612f, +0.1068697f, +0.3084114f, -0.3499485f, -0.1450374f, +0.0211944f, -0.1911970f, +0.0535072f,
  -0.0120466f, +0.1323975f, -0.1241907f, -0.1136292f, +0.0461057f, +0.0019950f, -0.0062529f, +0.1496208f,
  +0.1604801f, +0.1614629f, +0.0816332f, +0.0539192f, -0.0139503f, +0.1166097f, +0.0940246f, +0.0336272f,
  +0.0985981f, +0.0436690f, -0.0267447f, +0.0539520f, -0.0694093f, +0.0770891f, +0.0564083f, +0.0606320f,
  +0.1479703f, +0.0643724f, -0.2225562f, +0.0618492f, -0.1836611f, +0.2573153f, +0.0986103f, +0.0124159f,
  -0.0437407f, -0.2751313f, +0.1273148f, +0.0030609f, +0.1334479f, +0.0168879f, -0.0517093f, +0.0869159f,
  +0.1096926f, -0.3995363f, -0.1718098f, -0.1867149f, -0.2500312f, -0.2076856f, +0.2502943f, +0.0688717f,
  +0.1407892f, -0.0894000f, +0.1865283f, -0.4411846f, -0.0258778f, -0.0619276f, -0.0711058f, +0.3384764f,
  -0.1018943f, -0.1256493f, +0.1432778f, -0.3448445f, +0.1213031f, +0.2360134f, -0.2274635f, +0.2117104f,
  +0.1055870f, -0.1801041f, -0.1192201f, +0.1465437f, -0.0578608f, +0.1175716f, +0.1860665f, +0.5002881f,
  -0.0567420f, -0.1989727f, -0.0291954f, +0.3234406f, +0.0943665f, +0.0259724f, +0.1581756f, -0.2409796f,
  +0.0720914f, -0.0282344f, +0.3142482f, -0.0001758f, +0.0003160f, -0.2519697f, -0.3287665f, +0.0149832f,
  -0.0683757f, -0.0641320f, -0.0627499f, +0.0548240f, -0.0158693f, +0.0972329f, +0.0929813f, -0.1140769f,
  -0.0317299f, -0.0928464f, +0.3334627f, -0.1316863f, +0.1434211f, +0.0844977f, +0.1959400f, -0.0258661f
);

const float biases[4] = float[4](
  +0.0008251f, -0.0032010f, +0.0209173f, -0.0064516f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer110 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1141384f, -0.0141331f, +0.0593185f, +0.1429871f, -0.2107431f, +0.0285147f, -0.0364592f, -0.0943382f,
  +0.0921216f, -0.0536069f, +0.3246244f, +0.0312888f, +0.0078753f, +0.0032153f, +0.2684247f, -0.1386213f,
  -0.0480786f, -0.2414057f, +0.1375552f, -0.3279416f, +0.0768267f, +0.0307807f, +0.2231848f, +0.0401569f,
  +0.1420430f, -0.0815108f, -0.0312739f, +0.0662678f, +0.1692638f, +0.0594072f, +0.1981156f, +0.1157568f,
  +0.3855263f, +0.0557696f, -0.3068991f, +0.1571598f, -0.3143459f, +0.0812941f, +0.3730631f, -0.0247487f,
  -0.0544568f, -0.1437242f, +0.1147049f, +0.1545838f, -0.1026718f, -0.1558131f, +0.2913949f, +0.0278358f,
  -0.0326240f, +0.0489294f, -0.1687972f, +0.0969771f, -0.0544923f, +0.1332283f, +0.0599469f, -0.2332082f,
  +0.0863299f, -0.0285759f, -0.1858585f, +0.0102982f, +0.3731427f, +0.1079982f, +0.0577888f, +0.1835621f,
  +0.1588203f, -0.1125857f, -0.0370810f, -0.0312388f, +0.0274786f, +0.2703519f, -0.0447109f, -0.1192693f,
  +0.1290037f, +0.1097987f, +0.3915147f, -0.2100230f, -0.0020192f, +0.1825680f, -0.0483017f, +0.0274112f,
  +0.0227758f, +0.1886957f, +0.1406002f, +0.6176029f, +0.0715263f, +0.0846195f, -0.0668628f, -0.0738459f,
  +0.0454494f, -0.0344806f, +0.2148323f, +0.0305055f, +0.0866415f, +0.1211428f, +0.3073952f, -0.2035494f,
  -0.2732687f, -0.0169072f, +0.3449467f, -0.0297288f, -0.1602393f, -0.1445527f, -0.1876303f, -0.2373328f,
  +0.1043639f, -0.0496044f, -0.1225412f, -0.3562641f, +0.1869587f, +0.3143767f, -0.1314912f, +0.1745943f,
  -0.0910998f, +0.0896284f, +0.2554860f, -0.0216671f, +0.2329307f, +0.2337937f, +0.2103042f, +0.1677372f,
  +0.1433967f, -0.1268736f, +0.0107415f, -0.1022817f, +0.0249533f, -0.2593580f, -0.1288026f, +0.2180908f,
  +0.3143439f, -0.0273018f, +0.1079705f, -0.0213302f, +0.0481246f, +0.1178079f, +0.0590524f, -0.0076604f,
  +0.0984302f, -0.0405115f, +0.3366205f, -0.0896990f, -0.0830435f, +0.1709120f, +0.1256574f, -0.0050008f,
  +0.0595724f, +0.0266031f, +0.1221584f, +0.1558159f, -0.1529788f, +0.1311902f, +0.0338542f, -0.1459374f,
  -0.0186024f, +0.1204606f, +0.2856326f, -0.2718164f, +0.0182083f, +0.0385035f, -0.0509652f, +0.0142219f,
  -0.1079409f, -0.0671493f, -0.0857620f, +0.1184880f, -0.0646547f, -0.0162012f, -0.1162901f, +0.0291328f,
  +0.0394656f, -0.2297286f, -0.0866604f, -0.0555521f, +0.0136030f, -0.1672420f, +0.0759146f, +0.0103562f,
  +0.0495862f, -0.1632548f, +0.0356931f, +0.0777359f, +0.2053418f, -0.0118135f, -0.2502974f, -0.2252418f,
  -0.2435314f, -0.1352333f, +0.0016068f, -0.1560468f, +0.0897156f, -0.1201505f, +0.0833722f, +0.0135505f,
  -0.0734932f, -0.1178049f, -0.1999023f, +0.0479943f, +0.0344225f, +0.0498081f, -0.2645525f, -0.1242267f,
  -0.0621172f, -0.0073306f, -0.0839855f, -0.0382762f, -0.1165016f, +0.1803369f, -0.3238321f, -0.0640823f,
  +0.2828745f, -0.2797433f, +0.0430440f, +0.0170688f, +0.0888488f, +0.0541733f, -0.1630144f, +0.0119123f,
  +0.0332599f, +0.0418916f, +0.0391560f, +0.1618215f, +0.2538438f, +0.1874923f, -0.0188152f, -0.0142728f,
  +0.0180061f, +0.2181956f, +0.2665770f, -0.1078560f, +0.2813088f, -0.0502664f, +0.1512391f, +0.1537894f,
  +0.2450245f, -0.0115884f, +0.1462009f, +0.1585363f, -0.1318752f, -0.0586222f, +0.1049975f, -0.1869137f,
  -0.1137759f, +0.0518741f, +0.4238146f, +0.0661982f, +0.5088961f, +0.1760305f, -0.1507471f, +0.0315337f,
  +1.2408061f, +0.2161976f, -0.2673969f, +0.2102149f, +0.0772668f, -0.1322340f, +0.1465763f, -0.3701085f,
  +0.1408000f, -0.0820386f, -0.0418352f, -0.0839836f, -0.2582566f, +0.0422384f, -0.0602952f, +0.1532547f,
  +0.1265961f, -0.0380211f, -0.0238069f, +0.0370808f, -0.1676935f, -0.0519416f, -0.4433016f, +0.0383828f,
  -0.6525134f, +0.1018265f, +0.0389728f, -0.0179919f, -0.1467470f, +0.0606876f, +0.3223909f, +0.2926183f,
  -0.4507515f, -0.0223720f, -0.0435208f, -0.0783106f, -0.2549622f, +0.0789965f, -0.0288619f, +0.0891826f
);

const float biases[4] = float[4](
  -0.0235286f, -0.0165202f, +0.0389884f, -0.0007262f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer111 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0121218f, +0.1943055f, +0.0102508f, +0.0077906f, -0.2819308f, +0.2437487f, -0.2529585f, -0.0138929f,
  +0.1365445f, +0.0734551f, +0.0103312f, +0.0823913f, -0.2495990f, +0.0270284f, +0.2097231f, -0.3974963f,
  +0.0790480f, -0.0522483f, -0.0378924f, +0.0773560f, -0.3523023f, -0.2892534f, +0.1383879f, -0.3902849f,
  +0.0370096f, +0.1881719f, -0.2153662f, -0.2002386f, +0.2035311f, +0.0455077f, -0.1876924f, +0.2218613f,
  -0.3509337f, +0.0394787f, +0.2708051f, +0.0126923f, -0.0359062f, +0.0292030f, +0.0095137f, -0.1559217f,
  -0.1587367f, +0.0015794f, +0.1041238f, +0.0106288f, -0.1772992f, -0.0786875f, +0.1666892f, -0.3251479f,
  -0.1570991f, +0.1833098f, +0.1280849f, +0.0595825f, +0.0968760f, +0.0599230f, +0.3607732f, +0.0323531f,
  +0.1196467f, +0.1961097f, +0.1195403f, -0.0998708f, -0.1671717f, -0.1053452f, +0.1112067f, -0.0773559f,
  +0.0613501f, -0.1229523f, +0.1413553f, +0.0867417f, -0.1991767f, -0.2070416f, -0.1386281f, -0.1738167f,
  -0.1417044f, -0.2363860f, +0.1119000f, +0.0522599f, -0.0184296f, +0.0111763f, -0.2504769f, +0.3891191f,
  -0.0802081f, -0.0760354f, +0.1245560f, -0.0348734f, +0.2037957f, -0.0358550f, -0.0124452f, +0.1789805f,
  +0.1268117f, +0.0376195f, -0.0158641f, -0.1191339f, -0.0789123f, -0.1333511f, -0.2895729f, +0.2320494f,
  -0.1415256f, -0.3162549f, -0.1694015f, +0.1071167f, -0.0406455f, +0.0849145f, -0.1931327f, +0.3552786f,
  +0.0114546f, -0.2543012f, -0.1199929f, -0.0319961f, -0.0726597f, -0.2058164f, -0.0082606f, +0.1618688f,
  +0.0881654f, -0.0109281f, +0.0782941f, -0.1183480f, -0.0431995f, -0.0955096f, -0.1126952f, -0.1951046f,
  +0.1829815f, -0.3352545f, -0.1029240f, -0.0691978f, -0.1735160f, +0.1368414f, +0.1549540f, +0.3531918f,
  -0.0373276f, -0.0170096f, -0.1378053f, -0.0928602f, +0.1001345f, -0.0697887f, +0.1763784f, +0.3170504f,
  +0.0853449f, -0.0225611f, -0.0528844f, -0.1370429f, +0.0873006f, -0.3023932f, +0.0623818f, -0.1485616f,
  -0.1869211f, +0.0215991f, -0.0362531f, +0.0948115f, +0.0807796f, +0.0417619f, -0.1681289f, +0.0590992f,
  -0.1812796f, -0.1495057f, +0.0816343f, -0.1658949f, +0.1920826f, -0.1548727f, -0.1424820f, +0.1640165f,
  -0.0858350f, +0.2881886f, -0.1263725f, +0.0152784f, -0.0558227f, +0.2541345f, -0.0728709f, +0.0380287f,
  +0.2872832f, -0.0294218f, +0.0168889f, -0.0523444f, -0.2635582f, -0.1596693f, -0.2545229f, +0.2909431f,
  -0.1339769f, +0.3669192f, +0.0109566f, +0.2090103f, +0.0028364f, +0.2823879f, +0.0239860f, +0.0199917f,
  +0.0764050f, -0.1111708f, +0.0923225f, +0.1269241f, -0.3099454f, +0.0419615f, +0.2058688f, -0.1357238f,
  +0.1385552f, -0.0802839f, +0.0160445f, +0.0307874f, -0.1828582f, -0.0243236f, +0.0697907f, -0.0109764f,
  -0.1716049f, +0.2712400f, +0.0786415f, +0.0298541f, +0.0376424f, -0.1455530f, -0.0876230f, -0.0264701f,
  -0.0737426f, +0.0185655f, +0.0195742f, +0.0882750f, -0.1430545f, -0.0428015f, +0.1904765f, +0.0204279f,
  -0.1771417f, -0.2508305f, +0.0444343f, +0.0778616f, +0.0085114f, -0.0069815f, +0.1969730f, +0.0111169f,
  +0.1118865f, +0.2456906f, +0.2058536f, -0.0501544f, +0.0141739f, -0.2817708f, -0.2871657f, -0.4883545f,
  -0.2026265f, +0.1009603f, -0.1629362f, +0.0475884f, -0.0456077f, +0.1764032f, +0.0912660f, +0.2390928f,
  +0.2231616f, -0.2639482f, -0.1433397f, +0.0182278f, -0.3962737f, -0.0464138f, +0.3089520f, +0.1874602f,
  -0.1271424f, +0.3249010f, +0.3522372f, +0.1591156f, +0.1709160f, -0.0898782f, -0.0422884f, -0.1927022f,
  +0.0864767f, -0.0656949f, -0.1444437f, +0.0013138f, +0.0727031f, -0.1094158f, +0.0521338f, +0.0335769f,
  -0.1185958f, -0.2085461f, +0.1832301f, +0.0103740f, +0.0216804f, +0.0461499f, +0.0740559f, +0.0263013f,
  +0.0040732f, +0.0921196f, -0.1997109f, -0.0687364f, -0.0134191f, -0.1624491f, -0.1803970f, -0.0940879f,
  -0.0103426f, +0.0790420f, +0.0233561f, +0.0897212f, +0.0579660f, +0.1101872f, +0.1122055f, +0.0062013f
);

const float biases[4] = float[4](
  +0.0129423f, -0.0142487f, +0.0235041f, +0.0068383f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer111 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1170716f, -0.0900709f, +0.1395925f, -0.0500823f, -0.1248890f, -0.1968614f, +0.2303359f, +0.1166156f,
  -0.0587371f, +0.2050952f, -0.0053650f, +0.0878397f, -0.2290963f, -0.0642804f, +0.1190571f, +0.1654578f,
  -0.1165709f, -0.0153507f, -0.1215956f, -0.0746250f, -0.0889318f, -0.1228084f, +0.0806920f, +0.1738935f,
  +0.0303330f, -0.0430587f, -0.0885676f, +0.0468490f, +0.0708594f, -0.1116964f, +0.2650285f, -0.0431524f,
  +0.1265670f, +0.0065372f, +0.0231872f, +0.1278884f, -0.0242656f, +0.2396351f, -0.1709668f, +0.3519298f,
  +0.1182823f, -0.3078361f, -0.2714577f, -0.0180063f, -0.1384417f, -0.0116785f, +0.0826394f, +0.2101139f,
  -0.2316788f, -0.0235150f, -0.0044924f, -0.0054362f, -0.0789296f, -0.1919258f, -0.0851364f, +0.1944594f,
  +0.0480178f, +0.0886836f, -0.1506748f, +0.0719047f, +0.0882499f, -0.0594826f, +0.1949726f, +0.2294059f,
  -0.2112190f, +0.1751132f, +0.1286734f, +0.2146860f, +0.1341675f, +0.1523117f, -0.0082527f, +0.0923891f,
  +0.0226262f, +0.0218523f, +0.0244423f, +0.0519219f, -0.1068477f, +0.0382144f, -0.2686960f, +0.3096743f,
  -0.0095311f, -0.0681003f, -0.1208682f, -0.0649338f, +0.0624560f, -0.1392671f, +0.2988576f, +0.3196974f,
  -0.0710835f, +0.0743785f, -0.0362150f, +0.2252271f, -0.0937716f, +0.0153278f, +0.2249069f, +0.1152738f,
  +0.0155032f, +0.0839197f, -0.0239075f, -0.1274904f, +0.0082547f, -0.1248907f, +0.0577633f, +0.1969674f,
  -0.2989361f, +0.1181256f, +0.1464370f, +0.0618603f, +0.2636801f, -0.5181460f, +0.1140573f, -0.1251769f,
  -0.1322551f, +0.0169435f, -0.0360895f, -0.1065006f, -0.0917666f, -0.1452936f, +0.1221357f, +0.0412460f,
  +0.1474742f, -0.1081800f, -0.0768962f, -0.0077188f, -0.0763863f, -0.0259465f, +0.0084643f, +0.1172127f,
  -0.0339593f, +0.2135104f, -0.1519305f, +0.3198189f, +0.0343375f, +0.2670172f, +0.2721160f, +0.1506332f,
  -0.1527460f, +0.1448801f, -0.1627372f, +0.0317778f, -0.1947863f, -0.1835353f, +0.1438781f, +0.3354543f,
  +0.1752059f, -0.2947026f, +0.1811469f, -0.1774528f, +0.3633697f, -0.1417450f, -0.1320759f, -0.3590063f,
  -0.1216661f, -0.2225930f, -0.2463039f, +0.1860099f, +0.0754180f, +0.2261131f, +0.1161439f, -0.1667977f,
  +0.1428993f, -0.0331722f, -0.1565063f, +0.3036925f, +0.0118702f, +0.3031680f, -0.0330506f, +0.1891788f,
  +0.2095279f, -0.3009148f, +0.0079913f, +0.1402404f, +0.4814954f, -0.0911948f, -0.0159663f, +0.3856929f,
  +0.0348104f, -0.4352923f, +0.2329270f, -0.1293014f, +0.0880533f, -0.2172862f, +0.3740558f, +0.2205206f,
  +0.0771862f, +0.0851204f, -0.0365151f, -0.0415041f, -0.0173221f, +0.1661873f, -0.0340168f, +0.1139927f,
  +0.1997541f, -0.0557995f, -0.1271042f, +0.2713287f, +0.0957776f, +0.1471956f, -0.3264195f, -0.0152170f,
  -0.0837122f, -0.3424535f, +0.0191827f, +0.0436465f, -0.1427273f, +0.2199154f, +0.2995279f, +0.0444477f,
  +0.0515807f, -0.2262694f, +0.1919797f, -0.0223374f, -0.0387831f, -0.2405731f, +0.1460008f, +0.1755851f,
  +0.1282783f, +0.0405255f, +0.0124607f, +0.0185033f, -0.0223567f, +0.1305046f, +0.1671578f, -0.1861248f,
  -0.2192585f, -0.0026970f, +0.1993560f, -0.2122921f, -0.1758104f, +0.0666555f, -0.0748227f, -0.0502476f,
  -0.0487252f, +0.0540536f, +0.0834498f, +0.0938725f, -0.0897030f, -0.0705521f, +0.0270317f, -0.2371983f,
  -0.0238689f, -0.1526058f, +0.1119155f, +0.0346818f, -0.1048267f, +0.0258414f, +0.0077002f, +0.0264445f,
  +0.1300036f, -0.2904481f, +0.0533794f, -0.0628209f, -0.1985176f, -0.3928212f, -0.0882939f, +0.3191082f,
  -0.3716925f, +0.1476973f, +0.2759766f, -0.0948921f, -0.0824169f, +0.0051590f, -0.1458302f, -0.1708794f,
  -0.0617543f, +0.1515121f, +0.2463952f, +0.1139691f, +0.1630438f, +0.0893614f, +0.3882090f, -0.1678386f,
  -0.0305476f, +0.0840399f, +0.0267144f, +0.0155380f, +0.0398932f, +0.2689802f, -0.0480479f, -0.0986960f,
  -0.2596561f, +0.2053536f, +0.0084801f, +0.1386046f, +0.1129143f, -0.1726419f, -0.0284608f, -0.2177504f
);

const float biases[4] = float[4](
  +0.0347244f, +0.0525876f, -0.0157795f, +0.0245338f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer112 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1675565f, -0.0428542f, +0.1209811f, +0.0929651f, -0.1257581f, +0.1087438f, +0.0442366f, +0.0612387f,
  +0.0210469f, -0.0783085f, +0.0048957f, +0.0106959f, -0.1248277f, +0.2708385f, +0.2845967f, +0.0316055f,
  +0.1394092f, +0.0116478f, +0.2360198f, -0.1066508f, -0.0010755f, +0.0151246f, +0.2733470f, +0.0889869f,
  -0.0227404f, -0.0137837f, -0.1522416f, -0.1367901f, +0.1480072f, -0.1942660f, -0.0463699f, -0.1908788f,
  +0.0125845f, +0.1079274f, -0.0117529f, -0.4810318f, -0.3250131f, +0.0620278f, -0.2538018f, +0.0396909f,
  +0.1481686f, +0.0800412f, -0.1549849f, -0.0292736f, -0.1151242f, +0.2208459f, -0.1327774f, -0.0687858f,
  +0.0568590f, -0.0392492f, +0.0025523f, +0.2231469f, -0.2974859f, +0.0092467f, +0.2113731f, -0.1374779f,
  -0.0516179f, +0.0370448f, +0.0961480f, -0.0727795f, -0.0455021f, -0.0330007f, -0.2694425f, +0.0625464f,
  -0.0639305f, -0.0738510f, +0.0786448f, -0.2182201f, -0.0021030f, -0.0307970f, +0.3044518f, +0.0672167f,
  -0.0511913f, -0.0620805f, -0.0958225f, +0.0149221f, -0.0053350f, -0.2159868f, +0.0374552f, -0.0830112f,
  -0.1128817f, +0.1008773f, -0.2319556f, +0.1165172f, -0.1348543f, +0.0073512f, -0.0965717f, -0.1119688f,
  -0.0884637f, -0.1002499f, -0.1822640f, +0.1594743f, -0.1951999f, +0.2640073f, -0.1040750f, -0.1082140f,
  +0.0869589f, -0.2321397f, +0.0198488f, +0.1874682f, +0.2683610f, +0.1986640f, +0.1433445f, -0.2724414f,
  -0.2623485f, -0.2828579f, -0.0702030f, +0.0011004f, -0.0234699f, -0.0343512f, +0.0057996f, +0.1018034f,
  -0.1589234f, -0.2727098f, -0.0563730f, +0.1962991f, +0.0312494f, +0.0521834f, +0.0752881f, +0.1968824f,
  -0.0023170f, -0.0528323f, -0.4259724f, -0.2106531f, +0.1372485f, +0.2196237f, -0.0117200f, -0.0035794f,
  -0.1625424f, -0.0731468f, +0.2254935f, -0.0904401f, +0.0154280f, +0.1907094f, -0.3115050f, +0.0452202f,
  +0.0305479f, -0.3292445f, +0.0105983f, +0.1060056f, +0.3104101f, +0.1187007f, +0.0379425f, -0.0850553f,
  -0.2874298f, -0.0207817f, +0.0855305f, +0.1874463f, +0.4376396f, +0.1163088f, +0.2022956f, +0.2628959f,
  -0.3441250f, +0.0314136f, -0.0864154f, +0.0419581f, -0.1581498f, +0.1897380f, -0.1646970f, -0.0223285f,
  +0.1521652f, -0.1943185f, +0.0806584f, +0.2086604f, +0.0155140f, -0.0245708f, +0.0036084f, -0.1315319f,
  -0.0415399f, -0.0807121f, +0.1402581f, +0.2262726f, +0.2462205f, -0.0765214f, +0.0872862f, -0.1912829f,
  +0.0276623f, -0.0978627f, +0.0926477f, -0.4456931f, +0.0331664f, -0.0589245f, +0.0190243f, -0.1213105f,
  +0.0358893f, -0.2295200f, +0.0691306f, -0.1099040f, +0.1825152f, +0.3129210f, +0.0789922f, +0.0295390f,
  +0.2625609f, -0.1565710f, -0.1823531f, +0.1793419f, +0.1869944f, -0.1121406f, +0.1537723f, -0.1939498f,
  +0.0035291f, -0.3201265f, -0.1103228f, -0.1791764f, -0.2641331f, +0.1507778f, -0.0415459f, -0.1145288f,
  +0.0967300f, -0.1140845f, +0.2395579f, -0.0209632f, +0.0192071f, +0.1752460f, +0.0688465f, -0.0219186f,
  -0.1131486f, +0.1548005f, +0.2007315f, -0.1055165f, +0.1293191f, -0.1840290f, -0.1412557f, -0.1654094f,
  +0.1178357f, +0.2653851f, -0.2509064f, -0.0958613f, -0.0660654f, +0.2436883f, -0.2581404f, -0.0362897f,
  -0.0868060f, +0.4260411f, -0.0859795f, +0.0425036f, -0.2303417f, +0.0602890f, +0.1626269f, -0.0176961f,
  -0.0565698f, +0.1514405f, -0.2625287f, +0.0987524f, +0.0030639f, +0.3590390f, -0.0039143f, -0.2050257f,
  +0.0705581f, +0.3488534f, -0.0513817f, -0.2304162f, +0.2031268f, -0.3088283f, -0.2967108f, +0.3099632f,
  +0.0495413f, +0.2717582f, -0.1058463f, +0.3238254f, -0.1206871f, +0.1278972f, +0.0560877f, +0.1499660f,
  +0.1524348f, +0.1836336f, +0.3534288f, -0.1929127f, -0.0394960f, +0.0574770f, +0.1353690f, +0.0985797f,
  -0.1225687f, +0.5369007f, -0.1742192f, +0.2422826f, -0.3092261f, -0.0602347f, +0.0541322f, +0.1748748f,
  +0.1847906f, +0.3600940f, -0.1065759f, +0.1836457f, -0.3231390f, +0.2227066f, +0.1066073f, +0.1524188f
);

const float biases[4] = float[4](
  +0.0582532f, -0.0064323f, +0.0134317f, -0.0078419f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer112 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0675538f, +0.0287430f, -0.1050673f, -0.0550741f, +0.0878187f, +0.0240425f, -0.1191327f, +0.0933244f,
  +0.1094357f, +0.0419874f, -0.0415094f, +0.0819072f, +0.1200959f, +0.0423070f, +0.1826611f, -0.3401842f,
  -0.1682607f, +0.1580512f, -0.0306813f, -0.0500891f, -0.0189105f, +0.3357290f, +0.0992172f, -0.1335609f,
  +0.2612736f, +0.0112386f, -0.0854885f, -0.0513544f, +0.0994162f, +0.1556841f, +0.1794525f, -0.2516725f,
  -0.0758122f, -0.1583118f, +0.0448388f, -0.0154236f, +0.1674205f, +0.1477539f, -0.5181032f, +0.0008752f,
  +0.1101299f, +0.1783923f, +0.1334999f, -0.0443655f, -0.0573504f, -0.3113097f, -0.0283807f, +0.1208574f,
  +0.0821707f, +0.0875306f, +0.1121365f, +0.0846704f, -0.0190347f, -0.0652475f, +0.0104035f, +0.3100849f,
  +0.1737229f, +0.2678158f, +0.0364382f, -0.1816899f, -0.1713346f, -0.1032106f, +0.0079016f, -0.1367819f,
  +0.0693405f, +0.3229989f, -0.2630824f, +0.0574438f, -0.1003008f, +0.0389931f, -0.1996130f, +0.0256092f,
  -0.1706459f, +0.1090399f, -0.0619242f, -0.0638136f, -0.1351179f, -0.1653161f, -0.1938573f, +0.0988489f,
  +0.0697469f, -0.0184089f, -0.1547792f, +0.0507392f, -0.2003945f, +0.1662949f, -0.3296039f, -0.1963718f,
  -0.0316595f, -0.0120850f, -0.0341795f, +0.0338635f, -0.2696367f, +0.1259512f, -0.0036701f, +0.0762783f,
  -0.2599219f, +0.0089415f, -0.3294761f, +0.1961847f, -0.0677283f, +0.0949685f, -0.1349194f, +0.1742985f,
  +0.1631754f, -0.0659177f, -0.0903080f, +0.0541555f, -0.0312029f, +0.3727984f, +0.2386599f, +0.2213276f,
  -0.0334142f, -0.0132320f, +0.1418099f, +0.1535816f, -0.1024154f, +0.3362835f, -0.4631837f, -0.0570724f,
  -0.0354591f, -0.0220192f, +0.2254921f, -0.2762451f, +0.0430221f, +0.0100959f, -0.4205616f, -0.0136543f,
  +0.1567402f, -0.0433439f, -0.1692716f, +0.2310529f, +0.1084460f, -0.0876642f, -0.3329645f, -0.0143189f,
  +0.0182837f, -0.0843783f, +0.1279665f, +0.0167329f, +0.1227774f, +0.1090815f, -0.0566130f, -0.0294890f,
  +0.1780066f, +0.0260799f, +0.0430724f, +0.0416096f, -0.1688399f, -0.2255459f, +0.1354186f, -0.0050331f,
  +0.1368325f, +0.0095685f, +0.1905108f, +0.0530319f, -0.1157952f, -0.0890806f, -0.1068778f, -0.2787052f,
  -0.0708061f, -0.0058841f, -0.2906986f, -0.0521453f, -0.1000930f, +0.1252593f, +0.1684072f, -0.1830557f,
  +0.0352471f, +0.0762610f, -0.1100979f, -0.0007329f, -0.1012091f, +0.0755821f, +0.0472835f, +0.1435395f,
  +0.1939628f, -0.0007848f, +0.1470392f, -0.1098501f, -0.0338996f, +0.0468099f, -0.2434010f, +0.1375540f,
  +0.0961509f, +0.1198179f, +0.2345552f, -0.3786247f, -0.1576817f, +0.1994941f, -0.1073072f, -0.1225875f,
  +0.0102538f, +0.0844397f, -0.0834733f, +0.0191207f, -0.2875142f, -0.1461937f, +0.1247638f, -0.0414747f,
  -0.0869374f, +0.2191904f, -0.1146428f, +0.0539664f, +0.0020730f, -0.1478709f, +0.1634297f, +0.1306207f,
  +0.1301672f, +0.3166332f, +0.1382799f, +0.0621644f, -0.0571645f, -0.1964499f, +0.0536152f, -0.0745045f,
  -0.0108579f, +0.0761647f, -0.1322021f, -0.0625730f, -0.2059367f, -0.3023579f, +0.0943610f, -0.2642064f,
  -0.0082879f, -0.1529460f, +0.0121450f, -0.1054724f, +0.1450167f, -0.0483039f, -0.1127125f, -0.0234909f,
  +0.2846383f, +0.0105845f, -0.0123741f, -0.0626965f, -0.0261737f, -0.0917913f, -0.1992337f, -0.0171570f,
  +0.1253339f, -0.1075672f, -0.0713069f, +0.3238135f, -0.2007955f, -0.3053636f, -0.0779997f, -0.1687829f,
  +0.3274602f, -0.3797327f, -0.3642234f, -0.0644053f, +0.0466693f, +0.1623373f, -0.3377595f, +0.3392776f,
  -0.1267766f, +0.0540612f, -0.1427286f, +0.1952646f, -0.2236870f, -0.0203999f, -0.1772943f, +0.3541540f,
  +0.0640259f, -0.1316689f, -0.3337372f, -0.1300634f, -0.2235063f, -0.1565563f, -0.4847653f, +0.1310885f,
  -0.0582093f, -0.1265445f, -0.3069830f, +0.6793659f, +0.0260090f, +0.0766719f, -0.0227994f, -0.2129926f,
  +0.2427489f, -0.2008310f, -0.1730762f, +0.1906849f, -0.0637613f, +0.3741686f, -0.0711597f, -0.2708638f
);

const float biases[4] = float[4](
  +0.0147686f, +0.0292813f, -0.0034128f, -0.0211769f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer113 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0355040f, +0.1111386f, -0.0722503f, +0.1311197f, -0.0481219f, -0.0169161f, -0.0802964f, -0.1995299f,
  -0.0485508f, +0.1979550f, -0.0228503f, -0.1925057f, -0.0274613f, +0.2409003f, -0.0717858f, -0.0087016f,
  +0.2789875f, -0.1677350f, -0.0814775f, +0.0327371f, -0.1781253f, -0.1270741f, +0.2031632f, +0.0165266f,
  -0.1303895f, -0.1529755f, +0.1760685f, -0.0009514f, +0.0604625f, +0.0049471f, -0.1160962f, +0.0320733f,
  -0.1597210f, -0.2255489f, -0.1009541f, +0.0297281f, +0.1399631f, -0.2344047f, -0.0167903f, +0.0850809f,
  -0.0879595f, +0.1350388f, +0.2191396f, +0.0023761f, +0.1965856f, -0.1350490f, +0.1644510f, +0.0460453f,
  -0.1352607f, +0.0670665f, +0.0586647f, +0.0553973f, +0.0152950f, +0.1559508f, -0.1148574f, -0.0525280f,
  -0.1625965f, +0.1509597f, +0.1250391f, -0.1236359f, -0.1485066f, -0.1428308f, -0.0076892f, -0.1311557f,
  -0.0450258f, +0.0842634f, +0.0034550f, +0.0877357f, -0.1456178f, -0.2079479f, +0.0526817f, +0.0127081f,
  +0.0718822f, -0.1124531f, -0.0415669f, +0.1237654f, +0.1534390f, -0.0078791f, +0.1409458f, -0.0834690f,
  -0.1608778f, +0.0390878f, +0.3788794f, +0.0760986f, +0.2080277f, +0.2548047f, -0.0852835f, -0.0054433f,
  -0.3931327f, +0.1360648f, +0.2170444f, +0.0404350f, +0.0141853f, +0.1179490f, -0.0160844f, -0.0426570f,
  +0.0246151f, +0.0841421f, -0.0906689f, +0.1476740f, +0.1196096f, +0.2547248f, -0.0996470f, +0.1185892f,
  +0.0114985f, -0.0071827f, +0.1234371f, +0.0128018f, -0.0628116f, +0.0910527f, -0.0780884f, -0.0164889f,
  -0.1175539f, -0.1223667f, +0.0765972f, +0.0843035f, -0.2675581f, -0.0833308f, +0.2367402f, -0.1834728f,
  +0.1294406f, +0.1194092f, +0.1220537f, +0.1829614f, -0.1753216f, +0.1508665f, -0.0085923f, -0.1442354f,
  +0.0600532f, -0.0234675f, +0.1829819f, +0.1043453f, -0.4682750f, +0.1062638f, +0.1361767f, +0.1513926f,
  +0.0033911f, +0.0694821f, +0.1260950f, +0.2586284f, +0.0765469f, -0.0008710f, +0.2154525f, +0.0976936f,
  -0.0276498f, -0.0362195f, -0.0706634f, +0.0356183f, +0.0124331f, +0.1345818f, +0.1336475f, -0.1370466f,
  -0.1901021f, -0.0763196f, +0.0606953f, -0.0711517f, -0.1289502f, +0.0807304f, -0.1722530f, +0.0156637f,
  -0.2195767f, -0.2091252f, +0.3623672f, +0.0538516f, -0.0010559f, +0.1604393f, +0.2542744f, -0.1163963f,
  +0.0897670f, +0.1310159f, -0.2638799f, -0.0637553f, +0.1268788f, -0.0498014f, -0.0217923f, +0.0348336f,
  +0.0036368f, +0.2067098f, +0.1022332f, +0.1608212f, +0.1244687f, +0.0555933f, -0.0257736f, -0.0404118f,
  -0.2455165f, +0.2449634f, +0.1228142f, +0.0383109f, -0.0025538f, +0.0650361f, +0.1650829f, -0.2596278f,
  -0.0726515f, -0.1024509f, +0.0431197f, +0.0320572f, +0.1214496f, -0.1173570f, +0.1363105f, -0.0775067f,
  -0.0440804f, +0.1495947f, -0.0372203f, +0.0535956f, -0.2989642f, -0.1082572f, -0.1317861f, +0.1805378f,
  +0.0676593f, -0.1502124f, -0.2279709f, -0.0110461f, -0.0206107f, +0.2706953f, +0.1836948f, -0.1504653f,
  -0.3068865f, -0.0009819f, +0.0419205f, -0.0187212f, -0.1758755f, +0.1330591f, +0.1151279f, -0.0632565f,
  +0.0342401f, +0.0569186f, -0.0005774f, +0.0014822f, -0.0412408f, -0.0551721f, -0.1602789f, -0.0870967f,
  -0.2029085f, -0.0542462f, +0.1905103f, +0.1329335f, +0.0644505f, -0.0087216f, +0.0405168f, -0.0774693f,
  +0.0052114f, -0.1220444f, -0.0650016f, -0.0413389f, +0.0946010f, +0.0478783f, -0.1795352f, -0.0380701f,
  +0.2841490f, -0.0458130f, +0.0003484f, -0.1300599f, +0.1071538f, +0.1679635f, -0.3122062f, +0.0482372f,
  -0.1801937f, +0.2738027f, -0.1540100f, +0.0071689f, +0.1201408f, +0.0694201f, -0.1164806f, -0.0940805f,
  -0.0103362f, +0.1260538f, +0.0190729f, +0.0256491f, -0.0236525f, -0.1578645f, +0.0926934f, -0.0038343f,
  +0.1749783f, +0.0090869f, +0.0438225f, +0.0505337f, -0.1319589f, -0.0681076f, +0.0135336f, +0.0006425f,
  +0.1484846f, -0.0144771f, +0.0297676f, +0.0602817f, -0.0339884f, -0.1634497f, -0.0388908f, +0.0110785f
);

const float biases[4] = float[4](
  -0.0054582f, +0.0024161f, -0.0007926f, +0.0356609f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer113 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0632459f, -0.1184794f, +0.1113349f, -0.2077978f, -0.3024882f, -0.0082657f, -0.0927015f, +0.1260257f,
  +0.0813864f, +0.0216242f, -0.3241850f, -0.3056671f, -0.7158984f, -0.1351087f, -0.1090701f, -0.0189708f,
  +0.0261316f, -0.2173501f, -0.3252289f, +0.0982615f, +0.0168659f, -0.0156804f, +0.1347279f, +0.1805410f,
  -0.0624104f, +0.1267705f, -0.0607352f, -0.0262969f, +0.1919868f, +0.1328059f, -0.0000873f, -0.2264347f,
  +0.1313421f, +0.0049905f, +0.2936565f, +0.2184484f, +0.5710132f, +0.1288805f, +0.1540418f, -0.3801872f,
  +0.0915231f, +0.1922653f, +0.4590402f, +0.2620679f, +0.2399656f, +0.1192988f, -0.2110376f, +0.1167351f,
  +0.0860970f, -0.0552375f, +0.1445462f, -0.1368595f, -0.1885888f, +0.0138059f, +0.0276119f, -0.0478157f,
  +0.2061498f, -0.0655038f, -0.0440581f, +0.0407387f, -0.0217500f, -0.1333732f, +0.0994399f, -0.1900996f,
  -0.0087538f, -0.1133324f, +0.1689931f, +0.0928850f, +0.1082813f, +0.0625368f, -0.0006687f, -0.1366492f,
  +0.0030825f, -0.0290856f, -0.0286583f, -0.1308454f, -0.1116590f, +0.1665403f, -0.0649139f, +0.0648830f,
  +0.1773402f, +0.0646300f, -0.0372253f, +0.3010647f, -0.0815098f, +0.1097338f, +0.2518401f, -0.0017337f,
  +0.0151682f, +0.1105778f, -0.0777250f, -0.1847678f, +0.0122326f, -0.1220544f, -0.2302722f, +0.0883757f,
  -0.2087501f, +0.0464530f, -0.1405369f, -0.2467356f, +0.1721653f, +0.0124445f, -0.1256332f, -0.1890740f,
  -0.0413673f, -0.2188746f, +0.3426171f, +0.1540657f, -0.1382200f, -0.0107008f, -0.0490353f, -0.2917677f,
  +0.2695637f, -0.2375783f, +0.0517428f, -0.1342887f, +0.2112062f, -0.1371488f, -0.0858982f, +0.0274242f,
  -0.1043610f, +0.1940558f, -0.2489825f, -0.1989748f, +0.1345839f, -0.0186138f, +0.0043098f, +0.0551799f,
  +0.1108602f, -0.1709339f, +0.2945832f, +0.0787155f, -0.0679141f, +0.1508874f, +0.2896303f, -0.4713808f,
  +0.1506398f, +0.1619310f, -0.1428438f, +0.1763483f, +0.0399672f, +0.1363327f, -0.1570909f, +0.0813342f,
  +0.0120086f, +0.1071434f, -0.0422031f, +0.1396337f, -0.0718348f, -0.2638277f, +0.2068104f, -0.2615852f,
  +0.1287426f, +0.0944581f, +0.0160003f, +0.1127480f, -0.1111569f, +0.0946368f, -0.0831049f, +0.1963255f,
  -0.1871153f, +0.0049318f, -0.0030739f, -0.1044120f, -0.0202520f, -0.0090306f, +0.1163662f, +0.0040446f,
  +0.1605861f, +0.1906566f, +0.1348511f, +0.1665589f, -0.2252401f, +0.0752619f, -0.0689033f, +0.1159400f,
  +0.1049399f, -0.0269907f, -0.1141041f, +0.1495395f, -0.3391111f, +0.0118446f, -0.0348170f, +0.0840690f,
  -0.1332618f, -0.0228492f, +0.2012422f, +0.0369405f, -0.2090622f, +0.1611774f, -0.1791099f, -0.0454386f,
  -0.1119621f, +0.0175266f, +0.0075269f, +0.0700454f, -0.2503531f, -0.0616786f, +0.0268179f, -0.0676297f,
  -0.1221007f, +0.0496773f, -0.0456649f, +0.0664395f, -0.1636070f, +0.2816734f, +0.1637370f, -0.0491078f,
  -0.2036773f, +0.0520385f, -0.0532624f, +0.0589927f, -0.1776856f, +0.0809359f, -0.0645146f, -0.0010969f,
  +0.3503886f, +0.1440984f, -0.4630664f, +0.0248668f, -0.0617428f, -0.0404179f, +0.2322178f, -0.0560264f,
  -0.3065031f, -0.2491285f, +0.3225961f, +0.1981625f, +0.1757229f, +0.1769674f, +0.0560145f, +0.0061255f,
  -0.1032032f, -0.1029736f, -0.0013629f, -0.1146524f, +0.1072578f, -0.0522314f, -0.0640781f, +0.1534246f,
  +0.2500969f, -0.3812286f, -0.1849779f, -0.2174888f, -0.0025419f, +0.2286985f, +0.6290613f, +0.2768464f,
  -0.0886502f, +0.1892163f, +0.1173383f, +0.1546503f, +0.1632162f, -0.0389144f, +0.0811386f, +0.0340645f,
  +0.0733591f, -0.0860432f, -0.1031163f, -0.1453418f, -0.0278608f, +0.0308640f, -0.0497894f, +0.0304620f,
  +0.1371893f, -0.0723596f, -0.3538629f, -0.1289994f, +0.3313906f, +0.1552514f, +0.0196848f, +0.0184994f,
  +0.2131564f, -0.0455142f, +0.1408519f, +0.1282937f, -0.0924359f, -0.3708517f, -0.0657605f, +0.0327253f,
  -0.0088300f, +0.0254253f, +0.1064279f, -0.0835223f, -0.0179002f, +0.0686758f, -0.1375580f, +0.0806635f
);

const float biases[4] = float[4](
  -0.0457771f, -0.0605694f, +0.0289977f, -0.0038558f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer114 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1334179f, -0.0781464f, +0.0632714f, -0.1018553f, +0.2035233f, +0.0194040f, +0.1919276f, -0.0826692f,
  +0.1140719f, -0.0223487f, +0.3432778f, -0.4756746f, -0.1585767f, +0.3176334f, +0.3510312f, -0.2501417f,
  +0.0774686f, -0.0252231f, +0.0293842f, +0.0199757f, +0.0489825f, -0.0554121f, +0.0716708f, +0.0480781f,
  +0.0814450f, -0.1037837f, +0.0877337f, +0.0062390f, +0.2086935f, +0.0771910f, +0.1300979f, +0.0459689f,
  -0.0230886f, -0.2207112f, -0.0172589f, -0.1377082f, +0.0502384f, +0.1703105f, -0.1048346f, +0.2216839f,
  -0.1568667f, +0.1411607f, -0.1149822f, -0.0961613f, +0.2982447f, +0.2574494f, -0.3690461f, +0.0862359f,
  -0.2052441f, +0.0900932f, -0.0142650f, +0.0186928f, +0.0898848f, -0.0957237f, -0.0444747f, -0.0981039f,
  -0.1183790f, -0.1068907f, +0.1761617f, -0.1119103f, -0.4262385f, +0.0474408f, -0.2431882f, +0.1112157f,
  +0.0298418f, +0.0884307f, +0.0476071f, +0.1793106f, +0.1231877f, -0.0243253f, +0.0811099f, -0.1723318f,
  +0.0530153f, +0.1103875f, +0.0025875f, +0.0041932f, +0.0308933f, -0.1572398f, -0.1727730f, +0.0754319f,
  -0.1213001f, -0.0784514f, +0.0727750f, +0.0844981f, -0.0072087f, +0.2069614f, +0.0271199f, -0.0661511f,
  +0.1376615f, -0.1700435f, +0.2778656f, +0.0018532f, +0.0160319f, +0.0915569f, +0.1784917f, -0.0248079f,
  -0.2813521f, +0.1416810f, -0.2733355f, -0.2803965f, +0.0386504f, -0.0975412f, -0.1665348f, +0.1300959f,
  +0.1097417f, +0.0553944f, -0.3384333f, -0.1447891f, +0.1647894f, +0.0731967f, -0.0556720f, +0.1611760f,
  +0.1990894f, +0.0181358f, -0.0557435f, -0.0197308f, -0.1561222f, -0.0859671f, +0.1980759f, -0.0040712f,
  +0.2552424f, -0.3155655f, +0.0962276f, -0.0111563f, +0.0446315f, +0.0527964f, +0.0673244f, -0.1314078f,
  -0.0725753f, +0.0832349f, +0.1398975f, +0.2503555f, -0.1118382f, -0.2546672f, -0.0348305f, +0.1000956f,
  +0.0300355f, +0.2929159f, +0.0562965f, +0.0368318f, -0.0728026f, -0.1003861f, +0.0565303f, -0.1885415f,
  +0.0711641f, +0.1329424f, +0.1121914f, +0.0018169f, -0.0287543f, -0.0282702f, -0.0056004f, -0.0754999f,
  -0.1428817f, -0.2017683f, -0.1282646f, +0.1107998f, +0.0705821f, +0.1577563f, -0.1166870f, +0.3835795f,
  +0.0544480f, +0.1982732f, +0.1414986f, +0.1303476f, -0.0354060f, +0.1485890f, -0.0789705f, +0.1442824f,
  +0.0201338f, +0.1018021f, +0.0670288f, +0.0475797f, +0.1724483f, -0.1298226f, -0.0436980f, -0.1613076f,
  +0.0223421f, +0.2341855f, -0.2513055f, -0.3984420f, +0.2020297f, +0.0176840f, -0.0998523f, +0.1667433f,
  -0.1021496f, +0.3677758f, +0.0780192f, -0.0688572f, -0.2541460f, +0.0748117f, +0.0985189f, +0.0325228f,
  +0.1483799f, -0.1642911f, -0.3868841f, +0.1441009f, -0.0390499f, -0.2310235f, +0.1599031f, -0.0516310f,
  -0.0752803f, -0.1239953f, -0.3691200f, +0.1101627f, +0.0372157f, +0.1237976f, -0.1216123f, +0.0397671f,
  -0.1537473f, +0.0445711f, +0.0950786f, -0.2383805f, +0.1987285f, +0.0531207f, -0.1880180f, -0.1083242f,
  +0.0359639f, +0.0944776f, +0.1652933f, +0.0598088f, -0.0749907f, -0.1153416f, -0.0276171f, +0.0721040f,
  +0.0764384f, -0.0424731f, +0.0740995f, +0.0189268f, +0.0054005f, -0.1590188f, +0.0093444f, +0.0329159f,
  +0.2462815f, -0.1733546f, -0.0702666f, +0.1868638f, +0.0122144f, +0.0982508f, +0.1153640f, -0.1867930f,
  -0.1167777f, +0.3337475f, -0.1821801f, +0.1130997f, -0.0240837f, +0.2517793f, +0.1207201f, -0.0643777f,
  +0.1018766f, +0.3752612f, -0.0811778f, -0.0849808f, +0.1839030f, -0.0593232f, -0.1781167f, +0.1843223f,
  +0.4708082f, +0.0513281f, +0.0135937f, -0.1437440f, -0.1295402f, +0.0204191f, -0.1542084f, -0.1188063f,
  -0.0146918f, +0.1475678f, +0.3329707f, -0.2719642f, +0.0126732f, -0.0619463f, +0.2983739f, -0.0071411f,
  +0.0768794f, -0.2169995f, -0.2079978f, -0.3237617f, -0.0969943f, -0.0918625f, -0.2650206f, -0.1570371f,
  -0.1883875f, -0.0791411f, -0.1789317f, +0.1162741f, -0.1992540f, +0.0562101f, -0.3570814f, -0.0603061f
);

const float biases[4] = float[4](
  +0.0182532f, -0.0195778f, +0.0127011f, -0.0077838f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer114 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1305795f, +0.0302092f, -0.0739805f, -0.1593778f, +0.0713863f, -0.0861984f, +0.3672723f, -0.0844202f,
  -0.0393941f, +0.1461470f, -0.0269789f, -0.1017635f, +0.1755867f, -0.1725669f, -0.0107467f, -0.0970790f,
  -0.0137577f, +0.0693463f, -0.1199094f, -0.1306526f, -0.0168540f, -0.1923737f, +0.2508974f, -0.0168526f,
  -0.1156445f, +0.0715560f, -0.0319023f, -0.0077042f, +0.2110436f, -0.1483335f, +0.2146091f, -0.0544751f,
  -0.2039399f, -0.0825838f, -0.1913182f, -0.0965481f, +0.1362792f, -0.2244111f, +0.2637416f, -0.0778362f,
  -0.0907795f, -0.0564107f, -0.4146058f, +0.0655434f, -0.1344872f, -0.1744312f, -0.0132514f, +0.1325252f,
  -0.2603398f, +0.0858356f, +0.0657483f, -0.0692262f, +0.0806868f, +0.0389492f, +0.0017349f, +0.0898116f,
  +0.0230745f, -0.0586905f, +0.1087879f, +0.1870765f, -0.3127252f, -0.0642271f, +0.0222088f, -0.1947491f,
  -0.0329918f, -0.2847689f, -0.2077555f, +0.1350750f, +0.0592773f, -0.0659343f, -0.0561140f, +0.2684636f,
  +0.1992935f, +0.1180147f, -0.2590267f, -0.0441396f, -0.0438456f, -0.0617208f, -0.0168572f, -0.0510511f,
  +0.0894914f, -0.0536041f, -0.0475577f, -0.0135432f, +0.0675714f, -0.1633017f, -0.1294297f, -0.0335880f,
  +0.0742733f, -0.0451859f, +0.1965631f, -0.0595661f, -0.1028330f, -0.1778768f, +0.3954130f, -0.4426106f,
  +0.0247766f, -0.2629626f, +0.0974638f, -0.1096291f, -0.0398828f, +0.1106087f, +0.0024870f, +0.1317728f,
  -0.1446075f, +0.1921299f, -0.1862697f, +0.0385883f, +0.0035083f, -0.1928061f, -0.1097113f, +0.0698395f,
  -0.0003881f, +0.0235930f, -0.0848218f, -0.3506087f, +0.0583737f, -0.1945623f, -0.0184128f, +0.2251779f,
  +0.2366291f, -0.3537052f, +0.0059080f, +0.0771990f, -0.0104174f, -0.0300267f, -0.1395527f, +0.1246637f,
  +0.0664417f, +0.0290200f, -0.2655318f, +0.1238330f, +0.1100866f, -0.0707815f, +0.0517116f, -0.1884336f,
  +0.0476530f, +0.0939423f, -0.1593902f, +0.0461988f, +0.0578134f, +0.1145697f, +0.0632290f, +0.0620584f,
  -0.1154561f, +0.0957317f, -0.0105596f, +0.0304431f, -0.2155378f, -0.1933572f, +0.1346275f, -0.1389485f,
  +0.0092838f, -0.0415577f, +0.0215673f, -0.1096567f, -0.0375176f, -0.2014570f, +0.0144874f, +0.0007833f,
  +0.0835031f, +0.0952354f, -0.1337976f, +0.1138205f, -0.1203738f, +0.1360962f, -0.0197245f, +0.2427442f,
  +0.0424919f, +0.0648571f, +0.2288992f, +0.3262027f, -0.2405450f, +0.1287381f, +0.1806056f, -0.0102256f,
  +0.0437117f, +0.2123732f, +0.2236376f, +0.2612824f, -0.4549819f, +0.3196761f, -0.0686935f, +0.1080186f,
  -0.0396992f, +0.1747106f, -0.0910993f, +0.3833685f, +0.2020736f, +0.2265020f, +0.0220407f, +0.0803703f,
  -0.2734784f, +0.1431631f, +0.0107854f, +0.2260912f, -0.0119259f, -0.4471674f, +0.1837522f, -0.0734790f,
  -0.3090765f, -0.0821653f, +0.0359206f, +0.1171288f, +0.1404070f, -0.0926014f, +0.0868405f, -0.2446914f,
  -0.1053368f, -0.0106568f, -0.0000774f, +0.0470892f, +0.3098336f, +0.0144025f, -0.0976502f, -0.0690267f,
  +0.1201650f, +0.1734261f, -0.1104933f, -0.0152506f, -0.0615948f, -0.3812592f, -0.1003526f, -0.1236392f,
  +0.1317918f, +0.0093779f, -0.3392470f, +0.0017900f, -0.0701817f, -0.6456475f, -0.1552537f, -0.0180805f,
  +0.0716689f, +0.0381895f, +0.2716586f, +0.1021707f, +0.0092759f, -0.4363666f, -0.0274383f, +0.0524753f,
  -0.0928859f, -0.2004599f, +0.2726105f, +0.0145409f, +0.1014527f, -0.2377051f, -0.0021967f, -0.0182956f,
  +0.2940292f, -0.2089767f, +0.1200221f, +0.0112301f, -0.0722402f, -0.2770805f, -0.2868647f, -0.0657611f,
  +0.1022814f, -0.1457730f, +0.0231497f, -0.1602050f, -0.0092788f, -0.0694827f, -0.1133873f, +0.0681435f,
  +0.0585506f, +0.1695151f, +0.1031742f, +0.3072051f, -0.0050126f, -0.3024852f, +0.1430278f, +0.2337231f,
  -0.1087769f, +0.1723476f, +0.1955430f, -0.1437685f, +0.3300222f, -0.3251726f, -0.2005350f, -0.1627387f,
  -0.0166606f, -0.0811234f, +0.1131225f, +0.1705610f, -0.0335185f, +0.1711619f, +0.3621142f, +0.0827656f
);

const float biases[4] = float[4](
  +0.0182202f, +0.0596158f, -0.0131748f, -0.0321183f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer115 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2097866f, -0.0978010f, -0.1646486f, -0.1452140f, -0.1324526f, -0.0197868f, +0.1375223f, +0.1805138f,
  -0.0436940f, -0.1001650f, +0.0740633f, -0.3979273f, -0.0466398f, -0.1734668f, -0.4573820f, +0.0120568f,
  +0.0031785f, -0.0993311f, +0.0252151f, +0.1005200f, -0.1347879f, +0.1094944f, +0.1331369f, -0.1105663f,
  +0.0971407f, +0.2817723f, +0.0417895f, +0.1202837f, -0.4379805f, +0.0757375f, -0.0123809f, -0.1193962f,
  +0.2198652f, -0.1941175f, -0.3345090f, +0.0866890f, -0.2609835f, -0.0437041f, +0.1374886f, -0.0211634f,
  -0.0963809f, +0.2829417f, -0.0356955f, +0.0100685f, -0.2931846f, -0.2741415f, +0.2660355f, -0.0646280f,
  -0.1955673f, -0.2099652f, -0.0016508f, -0.1698199f, -0.0923573f, -0.1077044f, -0.2254501f, +0.0476468f,
  -0.2681032f, +0.0496863f, +0.0171459f, +0.0219942f, +0.3388087f, -0.0839858f, +0.5282521f, -0.1454955f,
  -0.1015242f, -0.0212655f, +0.0376103f, +0.0532782f, +0.1997997f, -0.0848162f, +0.1305786f, -0.0678458f,
  +0.1530272f, -0.0872590f, +0.1666472f, -0.0282042f, -0.1599558f, +0.0394717f, -0.3693666f, +0.1725824f,
  +0.3569162f, -0.3469151f, -0.2474700f, -0.0350926f, -0.4338332f, +0.1249558f, -0.3620893f, -0.1367647f,
  +0.0643515f, +0.0029953f, +0.1464342f, -0.0114634f, -0.2832553f, +0.1438411f, -0.4092315f, -0.0010983f,
  +0.1559539f, +0.3871649f, +0.1139094f, +0.0609588f, +0.0432887f, +0.0821608f, +0.2471973f, -0.2583674f,
  -0.0394758f, -0.0704277f, +0.2011328f, +0.0886468f, +0.0630756f, +0.0510970f, +0.1340623f, -0.0806562f,
  -0.0603746f, -0.1485509f, -0.2204054f, -0.1578643f, +0.0602399f, -0.0317521f, -0.2877440f, -0.1909389f,
  +0.1446186f, -0.1065792f, +0.1781120f, +0.0986434f, -0.0380812f, -0.0390049f, +0.0962218f, +0.0659715f,
  +0.0976396f, +0.1003940f, +0.0978566f, +0.0853439f, -0.1505229f, +0.0805790f, +0.1210086f, -0.1211951f,
  +0.1344062f, -0.0564461f, +0.1938197f, +0.0010209f, -0.0113890f, -0.0213308f, +0.2853550f, -0.1942420f,
  -0.0366767f, -0.1952570f, -0.0110080f, -0.2125253f, +0.0243746f, -0.0486512f, -0.0131565f, +0.0255765f,
  +0.0452012f, -0.1820866f, -0.0461104f, -0.1345451f, +0.0677154f, -0.1806290f, -0.0438325f, -0.1126504f,
  -0.3631795f, +0.0745004f, -0.0585718f, -0.0131857f, -0.0865285f, +0.0555651f, +0.0948367f, -0.2005438f,
  +0.1250841f, -0.0690574f, +0.1952022f, -0.0973020f, -0.0611636f, -0.0769146f, -0.1596310f, +0.0572034f,
  +0.0247770f, -0.1708930f, +0.1248144f, -0.1379755f, +0.0885564f, +0.0702440f, +0.2562582f, -0.2973609f,
  -0.3444955f, -0.0914439f, +0.1056458f, -0.0892354f, -0.1122700f, -0.2057575f, -0.1012571f, -0.1899574f,
  -0.1975417f, +0.0736986f, -0.0373995f, +0.0816255f, -0.0300032f, +0.0623117f, +0.0728898f, -0.0623484f,
  -0.1746113f, +0.1143379f, +0.2340462f, +0.0803402f, +0.0228752f, +0.1773023f, +0.0379000f, -0.0915452f,
  -0.0595388f, +0.1169316f, +0.0440281f, -0.0057124f, +0.0879090f, -0.0370708f, -0.0575599f, -0.1963743f,
  -0.0226454f, -0.0328479f, +0.1480254f, +0.0009919f, -0.1510285f, +0.1569466f, +0.0272809f, -0.1620569f,
  -0.1703314f, -0.2042579f, -0.0139940f, -0.0377376f, -0.0320453f, +0.0415921f, +0.0738060f, -0.2036192f,
  -0.0326141f, +0.1895506f, -0.0714349f, -0.0110973f, -0.0457181f, -0.0965692f, -0.0590903f, -0.0021768f,
  +0.1353605f, -0.1216357f, -0.1599902f, -0.1864877f, +0.1379374f, -0.0199799f, -0.1113124f, +0.1105260f,
  -0.2666836f, +0.4071044f, -0.0717219f, +0.0382998f, +0.0638525f, +0.0990751f, -0.1753812f, -0.3846330f,
  +0.0399205f, +0.0336110f, +0.1377832f, +0.0323778f, +0.1026089f, -0.1250280f, +0.0522547f, -0.0412412f,
  -0.1179900f, +0.1955400f, -0.0149020f, +0.2865078f, -0.2648412f, -0.0001230f, -0.1753462f, +0.0276055f,
  -0.2279994f, +0.1719883f, +0.1906148f, +0.0605503f, -0.0382618f, +0.1942649f, -0.1726745f, -0.0062525f,
  +0.1379594f, +0.0768556f, -0.1069982f, +0.1298016f, -0.1420551f, +0.0523916f, -0.1356369f, -0.1186067f
);

const float biases[4] = float[4](
  +0.0802672f, -0.0117130f, +0.0141884f, +0.0178674f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer115 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0903069f, -0.0328120f, -0.0593420f, -0.0592683f, +0.1742170f, +0.3678803f, -0.1878631f, -0.0586589f,
  -0.1150490f, +0.1851824f, -0.0564834f, +0.0952023f, -0.2979260f, +0.2083287f, +0.1218005f, -0.1494960f,
  +0.2320066f, +0.0397305f, +0.0387856f, -0.0895415f, -0.0403301f, -0.0862219f, +0.0701469f, +0.2290415f,
  -0.1265047f, +0.1013637f, +0.0854208f, -0.0028105f, +0.1144161f, +0.0123524f, +0.3910866f, -0.1967346f,
  -0.1453656f, +0.0228389f, -0.1498151f, +0.1539978f, +0.1557862f, -0.2157712f, +0.1223229f, +0.0010779f,
  +0.1400206f, -0.0808660f, +0.0625593f, +0.0432910f, -0.1746897f, +0.0417684f, -0.0002723f, +0.1167545f,
  -0.0478727f, -0.2315887f, +0.1735338f, +0.1360848f, +0.0337038f, +0.0148322f, +0.3245959f, -0.1006037f,
  -0.2110491f, -0.0467398f, +0.2700837f, +0.1649924f, -0.2921776f, +0.0983805f, +0.1504142f, +0.1931709f,
  +0.0587906f, -0.0456750f, -0.0681537f, +0.0339478f, -0.0250775f, -0.1738177f, +0.1725869f, +0.1307643f,
  +0.0431582f, -0.0511864f, +0.1012333f, +0.0365391f, +0.0112784f, +0.0365779f, -0.0070496f, -0.1238219f,
  -0.0465853f, +0.1012725f, -0.1320032f, -0.1097372f, -0.0146380f, +0.0727907f, +0.0246348f, +0.0492879f,
  +0.0316420f, +0.0367669f, -0.0415688f, -0.0114181f, -0.0534283f, -0.0801492f, +0.0117310f, -0.0585110f,
  -0.0861666f, +0.0238154f, +0.0546252f, -0.0047183f, -0.3454662f, -0.1473549f, -0.0436710f, -0.0699653f,
  -0.1010600f, -0.1146129f, +0.0263049f, +0.1122662f, -0.0099446f, +0.0337194f, +0.0538800f, -0.0467685f,
  +0.2292856f, -0.0229849f, -0.1059556f, +0.2416946f, +0.0875176f, +0.0892063f, +0.2871324f, +0.1728590f,
  -0.0448477f, +0.0994419f, +0.0542049f, +0.0038897f, -0.0761618f, -0.1630300f, +0.0153784f, -0.1148615f,
  +0.1606048f, +0.0888466f, +0.0152050f, +0.0867477f, -0.1016475f, +0.1809890f, -0.1603610f, -0.0747941f,
  -0.1777059f, -0.0786602f, +0.1034205f, -0.0251232f, +0.1651416f, +0.1113139f, +0.0719693f, -0.0847232f,
  -0.3354101f, +0.2120968f, -0.1979492f, +0.0753163f, +0.2805341f, -0.1352204f, +0.3683860f, +0.1881225f,
  +0.0043044f, +0.2847664f, +0.0557241f, -0.1795028f, +0.1861302f, -0.2246827f, +0.0382122f, -0.0932323f,
  +0.2041262f, -0.1491486f, +0.0437080f, +0.0630590f, -0.2191075f, -0.1430270f, -0.0514044f, -0.0448307f,
  +0.1419675f, +0.1675626f, -0.0463654f, +0.2623306f, -0.1126929f, -0.0593705f, +0.2268413f, -0.2034097f,
  -0.2937155f, -0.3657708f, +0.2681560f, -0.0521659f, -0.0738892f, -0.1272220f, +0.2361080f, +0.2403865f,
  +0.1945584f, +0.1514173f, -0.1694908f, -0.1250015f, -0.0965006f, -0.2193593f, +0.2719409f, +0.1673166f,
  -0.0640644f, +0.0684684f, +0.0314236f, -0.1721434f, +0.1759094f, -0.1027192f, -0.1077498f, -0.0636474f,
  -0.0807599f, +0.1553218f, -0.0148826f, +0.1663791f, +0.0369118f, -0.2179876f, +0.3829281f, -0.2142409f,
  -0.1802006f, -0.2261717f, +0.0256538f, -0.1198465f, -0.1060165f, +0.0753734f, +0.1017211f, -0.2058558f,
  +0.2938823f, -0.2170958f, -0.0881015f, -0.0441401f, -0.0672317f, -0.2561954f, -0.1766278f, +0.2226969f,
  -0.2252127f, -0.0902015f, +0.0583311f, -0.1712622f, +0.0509087f, +0.1324501f, +0.2193968f, +0.1686319f,
  -0.0131058f, +0.0880150f, -0.1579373f, +0.0102302f, +0.0312308f, -0.0701841f, +0.0586124f, +0.0073757f,
  -0.2100101f, +0.2909489f, +0.0883174f, +0.2650802f, -0.0812257f, -0.2015677f, -0.1201948f, -0.0980887f,
  +0.1006725f, +0.0661018f, -0.3623262f, -0.2430514f, -0.3455083f, -0.0055656f, -0.1136022f, +0.1238041f,
  +0.2010692f, +0.1029717f, -0.0922636f, -0.0469951f, -0.2140360f, -0.0757471f, -0.0669252f, +0.0496805f,
  +0.0120851f, +0.0261518f, +0.0929890f, +0.1341244f, +0.0955969f, +0.0642531f, -0.0687361f, +0.0299201f,
  -0.3528245f, -0.0711669f, +0.0448003f, -0.1780011f, +0.0866864f, +0.0150466f, -0.1077109f, -0.1763341f,
  -0.0978896f, -0.0921968f, -0.0604669f, -0.0748140f, -0.0768829f, +0.0248985f, +0.0374399f, +0.0584252f
);

const float biases[4] = float[4](
  +0.0093517f, +0.0215543f, +0.0175275f, -0.0280684f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer116 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1206086f, +0.0200541f, +0.0148047f, -0.0547367f, +0.0545528f, -0.1110750f, +0.0542241f, +0.0468891f,
  +0.1282139f, +0.1718296f, -0.2071955f, +0.3108545f, -0.0341149f, -0.1934473f, -0.0788363f, -0.0199398f,
  +0.0954465f, -0.2257469f, +0.0157593f, +0.0332319f, -0.0571192f, -0.1846699f, +0.0511388f, -0.0460793f,
  +0.2315141f, -0.4127103f, +0.1616670f, -0.2493230f, -0.0825839f, -0.1160553f, +0.0484785f, +0.0284711f,
  -0.0561321f, +0.1961621f, +0.0643563f, -0.1777116f, -0.1050205f, +0.0864470f, +0.0099283f, +0.1933107f,
  -0.2955601f, +0.1002215f, -0.0381608f, +0.2420492f, +0.0953645f, -0.1465720f, -0.1567394f, +0.0453795f,
  -0.0317764f, -0.2847010f, +0.2510324f, -0.1905905f, -0.0991008f, -0.1474706f, +0.0269862f, +0.0823569f,
  +0.1724360f, +0.2447936f, +0.0289315f, +0.2081942f, -0.0567218f, -0.1235930f, -0.1057538f, -0.0500127f,
  -0.0977416f, -0.0181804f, +0.0826136f, -0.0566472f, -0.0383956f, +0.2155329f, +0.1379626f, +0.0132214f,
  +0.3948498f, +0.1661566f, -0.0366710f, -0.2718940f, +0.2477932f, +0.0654074f, -0.1001263f, +0.0790618f,
  +0.0407484f, -0.0187615f, +0.0539991f, -0.1034704f, +0.0671855f, -0.0418091f, -0.0642026f, +0.1601817f,
  +0.0090716f, -0.1228243f, +0.0813869f, -0.2273856f, -0.2396209f, -0.1000830f, -0.1049866f, +0.0193230f,
  -0.0942718f, +0.0156313f, +0.2794153f, +0.1048391f, -0.1272119f, -0.0286409f, -0.0186335f, +0.1486223f,
  -0.2997035f, +0.0028558f, +0.0460804f, -0.4334982f, +0.0907905f, -0.0054477f, +0.1420162f, -0.1280700f,
  +0.1135099f, -0.0634047f, -0.0492376f, +0.0966837f, -0.1616714f, -0.0472739f, +0.1294747f, +0.0471543f,
  -0.0240560f, +0.1832890f, -0.0615173f, +0.0268059f, -0.0932531f, -0.0081974f, -0.0377279f, +0.0418810f,
  +0.0823642f, +0.0188496f, +0.1423443f, +0.2865931f, -0.3329707f, -0.1140231f, +0.0414781f, -0.0771325f,
  +0.0487117f, +0.1672992f, +0.1797380f, +0.1033196f, +0.0571834f, -0.0766371f, -0.0338165f, +0.0466640f,
  +0.1345816f, +0.0277299f, -0.3452792f, +0.1068315f, +0.0349752f, -0.0590673f, -0.1100877f, +0.0688871f,
  -0.0262725f, -0.0143677f, +0.0110881f, -0.0514801f, +0.1044651f, +0.0376340f, -0.0713890f, +0.0251475f,
  -0.2542914f, -0.0423200f, -0.1883564f, -0.0958416f, -0.0284454f, -0.0904679f, -0.0672908f, +0.1229746f,
  -0.1030257f, -0.3212380f, -0.2339736f, -0.0898229f, +0.0887929f, -0.1414895f, +0.0013369f, +0.1570504f,
  +0.1677858f, -0.1854093f, -0.0476782f, +0.1271539f, +0.1515469f, +0.2780206f, +0.2119353f, +0.2036223f,
  -0.2985478f, -0.2084910f, -0.2475015f, +0.2278365f, -0.0797779f, -0.1130030f, +0.1306029f, -0.1038149f,
  -0.2338395f, +0.1300067f, +0.0890262f, +0.0392012f, +0.0540477f, -0.1746300f, -0.0100099f, +0.2127301f,
  -0.2153834f, +0.1652904f, -0.0809184f, +0.1277107f, -0.0664805f, +0.0541786f, +0.2144966f, +0.1579475f,
  +0.0339212f, +0.0681477f, -0.1517909f, -0.0536807f, +0.1042295f, -0.0817037f, -0.1632967f, +0.0451986f,
  -0.2978636f, +0.0603455f, +0.0969286f, +0.0788127f, +0.0165249f, -0.0259644f, -0.1946007f, +0.0049406f,
  -0.2272579f, -0.1097720f, -0.2090826f, -0.1525695f, -0.0131328f, -0.2242774f, +0.0511172f, -0.1538635f,
  +0.0102207f, +0.1232944f, +0.1589701f, +0.1857241f, -0.1638846f, -0.1534180f, +0.0864301f, +0.0655203f,
  +0.0771154f, +0.0739137f, -0.1431196f, +0.1095577f, -0.1064683f, -0.1959267f, -0.0492233f, -0.1259724f,
  +0.1956478f, -0.2839175f, -0.2325603f, -0.0811962f, -0.0301201f, +0.0640839f, +0.1482311f, +0.0286637f,
  -0.2114277f, -0.1003611f, -0.0147859f, +0.0342719f, -0.1776605f, -0.0300940f, -0.0288981f, -0.2349448f,
  +0.1014799f, +0.1973094f, +0.0976903f, +0.1863775f, +0.0545871f, -0.0720002f, +0.1680024f, -0.0063211f,
  +0.1618951f, +0.1204813f, -0.0979539f, +0.0382560f, +0.1915746f, -0.1253536f, +0.1459401f, -0.0036136f,
  -0.1705173f, -0.2740621f, +0.0394608f, -0.1486579f, +0.2539636f, +0.0052235f, -0.0674031f, -0.1319009f
);

const float biases[4] = float[4](
  +0.0038907f, -0.0081368f, +0.0094637f, -0.0092374f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer116 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2223412f, +0.0220642f, -0.0758649f, +0.0735961f, +0.1801430f, +0.0141500f, +0.2460555f, -0.0113194f,
  -0.2252504f, +0.0471866f, -0.0267110f, -0.0253355f, -0.3662978f, -0.0888364f, +0.0590317f, +0.1147914f,
  +0.0943632f, -0.0593196f, -0.1155666f, +0.0458534f, -0.0302670f, -0.1600824f, +0.0266947f, -0.0490815f,
  +0.1587725f, -0.0233403f, +0.0379450f, -0.1430580f, -0.0425875f, -0.1393715f, +0.0126657f, -0.0590223f,
  +0.0992516f, +0.0117557f, -0.1075422f, -0.1877650f, -0.1083405f, -0.4634394f, -0.2646828f, +0.1216765f,
  +0.1583790f, +0.2729912f, -0.6019452f, -0.1561586f, -0.2082218f, +0.0969335f, +0.0958067f, -0.0310652f,
  -0.0969262f, -0.1351234f, +0.1185139f, -0.0146264f, +0.0567138f, -0.0075473f, +0.1012711f, +0.0302029f,
  +0.2135851f, +0.2875410f, -0.0423164f, -0.0628856f, +0.0167827f, +0.0849005f, -0.1899562f, -0.0789710f,
  +0.0551846f, +0.1520459f, -0.2949382f, +0.1411082f, +0.0926779f, +0.1936983f, -0.0906323f, -0.0510323f,
  +0.0064566f, -0.0515329f, -0.0636675f, +0.2646991f, +0.2140405f, -0.0529998f, +0.1843800f, +0.0324794f,
  +0.1207002f, +0.0092539f, -0.1399484f, -0.3146718f, -0.1293929f, +0.1402273f, +0.2301820f, -0.0575472f,
  -0.0491987f, -0.0902648f, +0.0498039f, +0.0740269f, -0.0818006f, +0.2273566f, +0.1317056f, -0.0065808f,
  -0.0608976f, -0.3437564f, +0.0184601f, +0.1398631f, -0.0824652f, -0.3262961f, +0.1562979f, +0.0803995f,
  -0.2235894f, +0.0279290f, -0.1279746f, -0.0533040f, -0.2817836f, -0.2157315f, -0.0176686f, -0.0316170f,
  -0.1891841f, +0.1595438f, +0.0332128f, +0.0210570f, -0.2724147f, +0.0698745f, +0.0332049f, +0.0347127f,
  -0.0153880f, -0.1064291f, -0.0621195f, +0.1212839f, +0.1526356f, -0.0421087f, +0.2007137f, -0.0770842f,
  +0.1173534f, +0.0246647f, -0.0045982f, -0.0469570f, -0.0420563f, +0.0349354f, -0.0006323f, +0.0709914f,
  -0.1784806f, -0.1305969f, +0.0223859f, +0.1663651f, +0.1060266f, +0.0055471f, +0.0912081f, +0.0962555f,
  -0.0019823f, +0.0377685f, +0.0282173f, +0.0154233f, -0.0026529f, +0.1712752f, +0.0029838f, -0.1453411f,
  -0.0490654f, -0.1000482f, -0.0770371f, +0.2471689f, -0.0343800f, +0.2368662f, -0.0139318f, -0.0549310f,
  +0.1708524f, -0.1018585f, -0.1158908f, +0.3774958f, -0.1219837f, +0.0058728f, +0.0098185f, -0.0146729f,
  +0.0223859f, +0.2676180f, +0.1348986f, -0.0553157f, +0.1699767f, +0.0603018f, -0.2356341f, -0.0840013f,
  +0.1266503f, -0.0731141f, +0.0955711f, -0.1354416f, -0.1450069f, +0.4916973f, -0.0141180f, -0.0764551f,
  +0.3112711f, -0.0185738f, +0.0738003f, +0.1382341f, +0.0125582f, -0.0200588f, -0.0709897f, -0.0495567f,
  +0.0735402f, +0.1815325f, -0.0388269f, -0.0113043f, -0.1468363f, -0.0426623f, +0.0806700f, -0.1518389f,
  +0.0160022f, -0.0006746f, +0.0536205f, -0.2238736f, -0.1974198f, +0.0312882f, -0.2106964f, -0.1713755f,
  +0.1205110f, -0.2955116f, -0.3829218f, -0.0555233f, +0.0914920f, -0.0322053f, -0.1753094f, -0.0233648f,
  +0.0799942f, +0.2079316f, +0.2900250f, +0.0628333f, +0.0734951f, +0.3170303f, +0.2988324f, +0.0391577f,
  +0.2546042f, +0.2169807f, +0.1148871f, +0.2516571f, -0.1193611f, +0.2590150f, +0.0427626f, +0.0655016f,
  +0.1140387f, -0.1614915f, +0.2048218f, +0.1606286f, -0.1803792f, +0.2510489f, +0.0458871f, +0.0611335f,
  -0.1298271f, -0.1354742f, +0.0339565f, -0.1356826f, -0.1321555f, -0.3635216f, -0.1563298f, +0.0575895f,
  -0.1338271f, +0.0071506f, +0.1252509f, +0.0405611f, -0.4249299f, +0.1210757f, -0.2047716f, +0.0539919f,
  +0.2299146f, +0.0559097f, -0.1082328f, -0.1319977f, -0.0285585f, -0.2775546f, +0.1882353f, -0.0513700f,
  +0.0506953f, -0.2029546f, +0.0012734f, -0.2058515f, -0.3412484f, +0.1709944f, -0.0555476f, +0.1159207f,
  -0.2115310f, -0.2705133f, +0.1836769f, +0.2795254f, -0.1227254f, -0.2376935f, +0.0020973f, +0.1791514f,
  -0.1487590f, +0.3090217f, -0.1050577f, -0.1410015f, -0.0976713f, -0.1255968f, -0.0968775f, +0.0166177f
);

const float biases[4] = float[4](
  -0.0119825f, +0.0409380f, -0.0542227f, -0.0111572f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer117 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0887028f, -0.1382232f, -0.0661182f, +0.1220976f, -0.3132848f, +0.1299312f, -0.0113348f, -0.0386272f,
  -0.1277669f, -0.2202725f, +0.0239391f, -0.0709820f, -0.0790867f, +0.1074109f, -0.0883320f, +0.0520229f,
  -0.0393632f, -0.1476360f, -0.0775539f, -0.1325101f, +0.0148943f, -0.1173516f, +0.0644445f, -0.1359087f,
  -0.1146713f, +0.2125878f, -0.0250776f, +0.0058790f, -0.0062507f, +0.0787639f, -0.0606106f, -0.0655137f,
  -0.0859222f, +0.0542699f, +0.2973655f, +0.1885549f, -0.1014969f, +0.1047270f, +0.1812702f, -0.1012304f,
  -0.0000389f, -0.3945583f, +0.1812478f, -0.0216019f, +0.0241587f, -0.0923009f, +0.2492483f, +0.1590921f,
  +0.2500057f, +0.1491333f, -0.0334949f, +0.0255760f, -0.2795763f, -0.1454161f, -0.0919413f, +0.0196792f,
  +0.0313659f, +0.2626938f, +0.0288327f, +0.2357462f, -0.0586686f, -0.0438714f, -0.2997091f, +0.0225763f,
  -0.0701753f, +0.0822025f, -0.1989655f, -0.0763252f, -0.0448781f, +0.1373945f, -0.2170130f, -0.0742095f,
  -0.0970741f, -0.0243488f, -0.0399263f, +0.1621546f, +0.0722205f, -0.0006351f, +0.0779952f, +0.0592437f,
  -0.0010945f, +0.0626091f, -0.0350494f, +0.1289330f, +0.0303759f, +0.0996398f, +0.2718372f, +0.0846925f,
  +0.0925678f, +0.0309443f, -0.1643115f, +0.0449820f, +0.0177730f, +0.1128665f, -0.0017564f, +0.0397480f,
  -0.1137545f, +0.1628557f, +0.2772207f, +0.0655475f, -0.1001379f, -0.0364181f, -0.1216782f, +0.0419078f,
  +0.0557833f, -0.2144839f, +0.0475359f, +0.2721286f, -0.1150324f, +0.2500460f, -0.0575063f, -0.1097860f,
  -0.5616652f, +0.0098967f, +0.0154003f, -0.0856861f, +0.0783819f, +0.4167462f, +0.0059892f, +0.2400468f,
  +0.0033303f, -0.0620289f, -0.0466657f, -0.1994666f, +0.0867376f, +0.0003593f, -0.0283138f, +0.0001282f,
  +0.0608951f, +0.3075507f, -0.0149278f, +0.0843377f, +0.0606622f, -0.1662730f, +0.1472384f, -0.1163841f,
  -0.0248622f, -0.2458090f, -0.0104572f, -0.0388211f, +0.1050147f, +0.0248765f, +0.1055058f, +0.0700030f,
  +0.0151334f, -0.4574169f, +0.1255341f, +0.0305340f, +0.0754067f, -0.1211884f, -0.0187596f, +0.1609844f,
  +0.0117263f, +0.4501879f, -0.0285587f, +0.1599317f, -0.0012946f, -0.1303341f, -0.1183576f, +0.0257600f,
  -0.0858544f, -0.1264545f, -0.0092480f, -0.2010431f, -0.0024099f, +0.1111205f, +0.0032968f, -0.0049791f,
  +0.0964779f, -0.1960348f, +0.1482551f, +0.0562154f, -0.1154918f, -0.0431521f, +0.0528482f, +0.1311764f,
  -0.1889844f, +0.1302301f, +0.0882300f, +0.3093863f, +0.3110725f, -0.2594199f, +0.0297473f, -0.0671514f,
  -0.0901859f, -0.3778194f, -0.0821998f, -0.4219361f, +0.0169999f, +0.2293878f, -0.1296725f, +0.0208513f,
  +0.2511891f, -0.0081773f, +0.0857185f, -0.0382678f, +0.0739695f, -0.0253235f, +0.0471719f, +0.0127272f,
  -0.2247896f, +0.5141801f, +0.0053001f, +0.2669613f, +0.0724052f, -0.2895185f, +0.1658940f, -0.2961647f,
  -0.0757365f, -0.1745908f, +0.1936000f, -0.1214719f, +0.0451927f, +0.1968757f, +0.0283416f, -0.1448291f,
  -0.0917365f, +0.0128527f, +0.0137778f, +0.0552778f, -0.1535872f, +0.2815607f, -0.0062561f, +0.0217552f,
  +0.0425774f, -0.1884812f, +0.0734214f, +0.1238761f, +0.0505417f, +0.1768421f, +0.0264085f, +0.3048311f,
  -0.0823700f, -0.0854916f, +0.0218190f, +0.0318838f, +0.0784481f, -0.1520613f, -0.0356079f, +0.2187668f,
  -0.1127921f, -0.2681973f, +0.0522657f, +0.0098312f, -0.2139526f, -0.2098634f, -0.2083616f, +0.2341911f,
  -0.0476871f, +0.0663423f, +0.2216468f, +0.0422028f, -0.1700048f, +0.1566353f, -0.0901787f, -0.0217516f,
  -0.1390013f, -0.0303880f, +0.2211955f, +0.0541857f, -0.1343118f, +0.0230112f, -0.0669374f, -0.1215050f,
  +0.0399989f, +0.0054626f, +0.0629706f, +0.0084044f, +0.0656042f, -0.0565800f, +0.0351195f, -0.0362722f,
  -0.0417297f, -0.0388414f, +0.1702404f, +0.0890269f, -0.0750907f, -0.1895955f, +0.2560549f, -0.0163803f,
  -0.0807966f, +0.1709163f, +0.1923760f, +0.1563426f, +0.0044482f, +0.1857211f, +0.0087176f, -0.0528452f
);

const float biases[4] = float[4](
  +0.0147313f, +0.0126752f, -0.0369384f, +0.0021425f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer117 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1832196f, +0.1144351f, +0.0387726f, -0.1806787f, -0.0677642f, +0.1307447f, -0.1873454f, +0.0435871f,
  +0.3254903f, -0.1102696f, -0.0169396f, -0.0170792f, +0.2663708f, -0.3137141f, -0.2335215f, +0.1295014f,
  -0.0756387f, -0.1778855f, -0.4102355f, -0.2170123f, +0.2915449f, -0.2093769f, +0.1041749f, -0.4508356f,
  +0.1204483f, -0.2245028f, +0.0592807f, -0.0980176f, -0.1289146f, -0.1232574f, -0.0638838f, -0.1112086f,
  -0.2192655f, -0.0974020f, -0.1810060f, -0.1134416f, +0.0788841f, -0.0320574f, -0.1116242f, +0.0734031f,
  +0.2736053f, +0.1433426f, -0.1957092f, -0.0986155f, +0.0413692f, +0.0723617f, -0.3026972f, +0.4375408f,
  +0.1098911f, +0.0574913f, +0.0791444f, +0.1408664f, +0.0312443f, +0.0910602f, +0.0149449f, +0.1445447f,
  +0.0051367f, -0.0670612f, -0.0850110f, -0.2068855f, +0.1701283f, -0.1084963f, -0.0205907f, +0.0513113f,
  -0.0793294f, -0.1795057f, -0.2972680f, +0.0574280f, +0.2301753f, +0.1190584f, -0.0149733f, +0.0348695f,
  +0.4090753f, -0.1822997f, +0.3263527f, -0.0435373f, +0.0153486f, -0.1348249f, -0.0837210f, +0.0478653f,
  +0.0503489f, -0.2165329f, +0.0961353f, -0.0017051f, -0.2205717f, -0.0158744f, -0.2299994f, +0.5045368f,
  +0.2684619f, -0.2212000f, +0.3446039f, -0.0059245f, +0.1646385f, -0.3844681f, -0.0019190f, -0.0804152f,
  +0.3396769f, -0.1535643f, +0.0705290f, -0.0478210f, -0.0635252f, +0.0117054f, -0.0009751f, +0.4115782f,
  +0.0269512f, -0.7127485f, -0.1334035f, -0.1566218f, -0.1234006f, +0.0417366f, +0.2849229f, -0.1271123f,
  -0.0728074f, +0.0565649f, +0.1160584f, +0.0140745f, +0.1179869f, -0.0273950f, -0.3284437f, -0.1080619f,
  -0.1159718f, -0.1063294f, -0.3211564f, -0.0625486f, +0.1364285f, +0.2000865f, -0.2434834f, -0.0494262f,
  +0.2854354f, -0.0187423f, +0.0411710f, -0.4109764f, -0.0889813f, -0.0188911f, -0.0878687f, -0.0159945f,
  -0.0311308f, +0.2282599f, -0.1824523f, -0.0173846f, +0.0835702f, +0.1840992f, +0.0609108f, -0.2989918f,
  -0.3577838f, +0.1192620f, +0.1312726f, +0.1412420f, +0.2613451f, +0.4100443f, +0.3033291f, -0.0687126f,
  -0.0682856f, +0.2999545f, +0.0664189f, +0.3557020f, -0.2100083f, -0.0419205f, +0.0995943f, -0.1505025f,
  -0.0206203f, +0.0013829f, -0.0333160f, +0.0724559f, +0.1346561f, +0.2095386f, -0.2747975f, -0.0710308f,
  +0.1475485f, +0.2008911f, +0.0221977f, +0.0647696f, -0.0235609f, +0.0811538f, -0.1091077f, -0.0877256f,
  -0.1197220f, -0.0525552f, -0.1319068f, +0.1872873f, -0.0081495f, +0.0442644f, +0.3429914f, +0.1389357f,
  -0.0719065f, +0.1772036f, +0.0571554f, +0.1076765f, -0.1212700f, -0.1864575f, +0.0853380f, +0.1597287f,
  -0.0668725f, +0.0965277f, -0.0814819f, +0.2308593f, -0.1260729f, +0.0540726f, +0.0815536f, -0.0641399f,
  -0.0829074f, +0.1109117f, +0.0037379f, +0.1776034f, -0.1530168f, +0.1525666f, +0.0313479f, +0.1139378f,
  +0.2594475f, -0.1666747f, +0.0674184f, +0.2673893f, -0.0959424f, +0.0448242f, +0.4466863f, +0.1650141f,
  +0.1822287f, -0.1990449f, -0.0051923f, -0.2574972f, +0.2846828f, +0.0460119f, -0.3748723f, +0.2378083f,
  +0.0684868f, -0.1446256f, +0.1524603f, -0.1530046f, +0.1221322f, -0.1786858f, -0.2208836f, +0.0001268f,
  +0.0221679f, -0.2228596f, -0.0451912f, -0.0824377f, +0.2811688f, +0.0235962f, -0.0478467f, +0.2446606f,
  -0.0561229f, -0.3679160f, +0.2457662f, -0.1268518f, +0.2275359f, +0.3847859f, +0.1671411f, +0.2833373f,
  -0.1443173f, +0.1633215f, -0.3275700f, -0.1018483f, +0.1219405f, +0.2884682f, +0.3665707f, -0.3842490f,
  -0.0760581f, -0.1867253f, +0.4782764f, -0.0435588f, +0.2454755f, -0.0909686f, +0.2916455f, -0.2096022f,
  +0.2928474f, -0.2527730f, -0.1575001f, -0.1106175f, -0.1097298f, -0.1744521f, +0.4090889f, +0.2301387f,
  -0.0944734f, -0.1188106f, +0.0173327f, -0.0634502f, +0.1026349f, -0.1335038f, +0.3208911f, +0.0720498f,
  +0.0894862f, +0.0822698f, +0.2520077f, +0.0624247f, -0.1047626f, +0.0657827f, -0.1675538f, -0.1601652f
);

const float biases[4] = float[4](
  -0.0310191f, -0.0501460f, -0.0192476f, -0.0281965f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer118 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0764525f, +0.1041188f, +0.0354411f, -0.0724742f, +0.0852014f, +0.0515533f, +0.0687553f, +0.0508080f,
  -0.1492975f, -0.0453756f, -0.0612041f, +0.1397537f, +0.0877579f, +0.1136742f, -0.0296383f, -0.3235238f,
  +0.1643732f, +0.1417268f, +0.0573926f, -0.0005935f, +0.2019867f, +0.1211413f, -0.0308025f, +0.0708388f,
  -0.0074903f, +0.1151247f, -0.0698938f, +0.0560434f, -0.2169553f, -0.2002817f, +0.1684192f, +0.2700876f,
  -0.2162900f, +0.0145820f, -0.2931851f, +0.1252538f, +0.0563656f, +0.2166044f, +0.1164393f, -0.0858785f,
  +0.0624981f, +0.1060038f, +0.1011555f, +0.1841773f, +0.2453645f, -0.2010958f, -0.0934173f, -0.0181875f,
  +0.0333459f, +0.0317318f, +0.1331698f, -0.1987730f, +0.2376088f, -0.0569192f, +0.0944118f, +0.0933292f,
  -0.0963823f, +0.1467475f, -0.1607596f, +0.0892953f, -0.0500096f, -0.2590536f, +0.1075452f, +0.0319002f,
  +0.1876705f, -0.1437459f, -0.2187376f, -0.0220634f, +0.0895430f, -0.0169951f, -0.0087184f, +0.0546454f,
  -0.2367899f, -0.1071405f, -0.0144807f, -0.1592298f, -0.0077123f, +0.1926072f, -0.1775510f, -0.0345832f,
  -0.0757329f, -0.1167096f, +0.0973579f, -0.0937341f, +0.0317747f, -0.1884246f, +0.1409382f, +0.0225102f,
  +0.1446096f, -0.2775474f, +0.0494315f, -0.2676730f, +0.0850605f, -0.0830244f, +0.2316341f, +0.0332991f,
  +0.2544173f, +0.0576964f, +0.0151261f, -0.1509037f, +0.1901519f, -0.1004962f, -0.0125756f, -0.0254438f,
  +0.1186339f, +0.1660248f, -0.0587084f, +0.0284018f, +0.0824479f, +0.3900789f, +0.0947594f, -0.1313348f,
  +0.1082470f, +0.0643298f, +0.0594042f, -0.1201145f, +0.2173437f, -0.1774826f, +0.0757018f, +0.0431804f,
  -0.0790951f, +0.1291938f, +0.1116960f, +0.0562494f, +0.1107670f, +0.0237150f, -0.3715044f, +0.0702851f,
  -0.2187285f, +0.2837367f, -0.0574553f, +0.1258495f, +0.0379508f, +0.0311846f, -0.3157782f, -0.0528552f,
  -0.0333066f, +0.0271181f, -0.1728564f, -0.1225634f, -0.0292380f, +0.0779418f, -0.0815922f, +0.0425067f,
  -0.0118116f, +0.1445965f, +0.2712278f, -0.0434049f, +0.2181333f, +0.0815533f, -0.0663468f, +0.0108464f,
  +0.0001384f, -0.0552255f, +0.0247546f, -0.2523513f, -0.3852988f, +0.1528504f, -0.0644074f, -0.0699656f,
  -0.1528750f, -0.0774778f, +0.3277106f, -0.0704854f, -0.1580638f, +0.0730129f, -0.0596803f, +0.1467656f,
  -0.1715589f, -0.2095356f, +0.0728500f, -0.1291362f, +0.1227232f, -0.0846680f, -0.0033668f, -0.0019830f,
  +0.2932237f, -0.0110758f, -0.0611241f, -0.0149994f, -0.0002323f, +0.1027727f, -0.1026429f, +0.1606585f,
  -0.3092545f, -0.0955990f, +0.0309909f, +0.0829696f, -0.0686003f, +0.0898108f, +0.0307964f, +0.1214171f,
  +0.0171771f, +0.1836068f, +0.0665539f, -0.0523257f, +0.2851672f, +0.1626669f, +0.0031347f, -0.1705681f,
  +0.0379038f, -0.0128872f, +0.0513708f, +0.0293418f, +0.3194917f, -0.1487781f, +0.0743597f, +0.0596056f,
  +0.1005236f, +0.1370252f, -0.1229899f, +0.1078495f, +0.0258694f, +0.0120065f, -0.0631727f, -0.1081213f,
  +0.1549969f, -0.0881546f, +0.1812056f, -0.0186457f, +0.0570379f, +0.2261803f, -0.0899818f, -0.1517890f,
  +0.1655457f, -0.1146141f, +0.2384314f, +0.2284774f, +0.0257773f, -0.0869565f, -0.0359025f, -0.2117551f,
  -0.0560819f, +0.1731958f, -0.0523588f, -0.1438053f, -0.2719251f, +0.0543854f, -0.0096715f, +0.0800018f,
  -0.1141983f, +0.2431003f, -0.1189948f, +0.2105725f, -0.0705523f, -0.3314569f, -0.0621735f, -0.1802015f,
  -0.2246891f, +0.0792563f, +0.5913497f, +0.0327356f, +0.0758096f, +0.0907600f, +0.1316624f, +0.2377200f,
  +0.0172675f, +0.1341413f, +0.1300366f, -0.0524143f, +0.0299428f, +0.2146669f, -0.1228853f, +0.5045731f,
  +0.4382571f, +0.0111492f, +0.0294175f, -0.0685623f, +0.1016179f, -0.1612695f, -0.0812455f, +0.1877472f,
  -0.1819795f, -0.1195946f, +0.1484342f, -0.1218172f, +0.3129978f, +0.1029932f, -0.0174529f, +0.1923699f,
  +0.0832671f, -0.1131112f, +0.1874033f, -0.0061461f, +0.2999726f, +0.2148852f, +0.0031591f, +0.3312720f
);

const float biases[4] = float[4](
  -0.0060309f, -0.0071874f, +0.0028589f, -0.0219962f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer118 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1265049f, -0.0564974f, -0.0632364f, +0.0370320f, +0.0086502f, -0.1040663f, +0.0716684f, -0.0149168f,
  +0.0678957f, +0.1517588f, +0.1273926f, -0.0200556f, -0.0320569f, -0.0293148f, +0.0342537f, -0.0805455f,
  -0.0199908f, +0.1216427f, +0.0013020f, -0.0162307f, -0.0453378f, +0.3572818f, +0.0340176f, +0.1992278f,
  -0.0561420f, -0.0528009f, -0.1189080f, -0.2478104f, -0.1130655f, +0.0516137f, +0.3104399f, -0.2596401f,
  -0.2853148f, +0.1375781f, +0.2713777f, +0.1116216f, +0.1436043f, -0.1140726f, +0.1339532f, +0.3055426f,
  +0.0159823f, +0.1164786f, -0.4636267f, +0.1369366f, +0.0150441f, -0.0172307f, -0.0714654f, +0.0172158f,
  +0.0671795f, -0.0057556f, +0.0023398f, -0.0568490f, +0.0490478f, -0.0149470f, -0.0193326f, +0.1139024f,
  -0.2750842f, +0.0336159f, +0.2390566f, -0.1442211f, -0.1170117f, +0.0284508f, +0.0740091f, +0.0335225f,
  -0.0007649f, -0.2531846f, +0.1308877f, -0.1534009f, +0.0126073f, -0.0225089f, +0.1456082f, -0.1718626f,
  -0.0240527f, -0.1299466f, +0.0931447f, -0.0920552f, +0.1410768f, +0.2945104f, -0.2073917f, +0.0189992f,
  +0.1202412f, +0.1058891f, -0.0176059f, -0.0358419f, +0.1930372f, +0.0529726f, -0.0887085f, -0.2507153f,
  +0.1037751f, +0.0114868f, +0.1286026f, +0.0708945f, +0.1010203f, -0.0956564f, +0.0071278f, +0.2896671f,
  +0.1587191f, -0.2141332f, +0.1845583f, +0.2943763f, -0.1186423f, +0.1080832f, -0.1936839f, +0.0844927f,
  -0.2128774f, -0.0713773f, +0.2161583f, +0.1817310f, +0.2834179f, +0.1751959f, -0.0475361f, -0.0328712f,
  +0.0663204f, -0.0279849f, +0.2099778f, -0.1020624f, -0.0016036f, +0.2907105f, +0.0031339f, +0.1713925f,
  -0.1494284f, -0.0882047f, -0.0742182f, +0.1370775f, +0.2036296f, -0.3959737f, -0.1435844f, +0.1397928f,
  +0.0424128f, -0.1059285f, +0.0349336f, -0.2264658f, -0.1491197f, -0.1088923f, -0.0583554f, +0.2200740f,
  -0.2093199f, -0.1418180f, +0.0998672f, -0.0046515f, -0.3481105f, -0.0460770f, -0.3263437f, -0.1862299f,
  +0.0857694f, -0.0041174f, +0.0334014f, -0.0798089f, -0.0735152f, +0.0611428f, -0.1289102f, -0.0327779f,
  +0.2596661f, +0.0447846f, +0.1195950f, +0.0758154f, -0.0601448f, +0.3847931f, +0.1357665f, +0.0486960f,
  -0.2086438f, -0.1275288f, -0.0184030f, -0.2484443f, +0.1887189f, -0.0569185f, -0.0798142f, +0.1281736f,
  +0.0577248f, -0.0485261f, -0.3222556f, +0.3079365f, -0.0144312f, -0.0885924f, -0.1427947f, -0.0826417f,
  +0.0240200f, -0.2103698f, +0.0448671f, +0.0713547f, -0.0428063f, +0.0100463f, +0.2966345f, +0.0218011f,
  +0.2505243f, +0.0859854f, +0.1001930f, +0.2881007f, +0.0753348f, -0.0428100f, -0.0685129f, +0.1314416f,
  +0.0079907f, -0.0331917f, -0.0256077f, +0.0167389f, +0.1140329f, -0.1823980f, +0.0022164f, -0.1126168f,
  +0.0537606f, +0.2177760f, +0.0466874f, -0.0391094f, -0.1487110f, -0.0631918f, +0.1237000f, +0.1113186f,
  +0.1820275f, -0.0217622f, -0.1472460f, +0.1285214f, +0.1581714f, -0.2289820f, -0.1019520f, +0.2063863f,
  -0.0093553f, -0.3807775f, -0.4146203f, +0.1861567f, -0.0453320f, +0.0200243f, -0.1476927f, -0.1301253f,
  -0.2796401f, +0.2770069f, -0.1792791f, -0.2308823f, -0.0894739f, +0.1638028f, -0.0899532f, -0.2256458f,
  -0.0729826f, +0.0930680f, -0.0448114f, +0.2052724f, -0.0976513f, +0.0899674f, +0.0919820f, -0.1153998f,
  -0.1715841f, -0.1737755f, -0.1810947f, -0.1222945f, -0.1717658f, -0.1834155f, -0.0211716f, +0.0418488f,
  -0.2220525f, +0.1356748f, +0.7733823f, -0.1941542f, +0.1012471f, -0.0324070f, +0.2136226f, -0.0545364f,
  +0.2832192f, +0.1776605f, +0.3423001f, -0.1897416f, -0.0757635f, -0.2007276f, +0.0103379f, +0.1665630f,
  +0.0660636f, +0.0056644f, -0.0149474f, -0.2598633f, +0.3152344f, +0.0691820f, -0.0297929f, -0.2642378f,
  -0.1339465f, +0.2277421f, +0.8938359f, -0.1809694f, -0.1402289f, -0.5820376f, -0.2514671f, -0.0377318f,
  +0.1581022f, -0.0342196f, +0.0158993f, +0.0122364f, -0.3001654f, -0.2358055f, +0.1655480f, -0.2174316f
);

const float biases[4] = float[4](
  -0.0153900f, +0.0018093f, -0.0049137f, -0.0139682f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer119 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0653756f, -0.0267858f, +0.2183066f, +0.0743987f, +0.3361760f, -0.0825147f, +0.0183831f, +0.1177863f,
  -0.0718313f, +0.0258745f, -0.0209905f, -0.1829821f, +0.2666299f, +0.0929728f, -0.1285175f, +0.1610845f,
  -0.0194753f, +0.2740119f, -0.0315253f, +0.0508508f, -0.0977150f, +0.1281074f, -0.3344907f, -0.3254530f,
  +0.1524085f, -0.2024166f, -0.2738703f, +0.1471319f, +0.0997461f, +0.1847964f, -0.2830413f, +0.1728685f,
  +0.1252893f, +0.0968408f, -0.3725968f, +0.0368212f, -0.0112070f, -0.1964965f, -0.1207441f, +0.2988205f,
  +0.1297350f, +0.0655100f, -0.0639908f, -0.2558149f, +0.0681284f, -0.1429256f, -0.3183163f, +0.2208578f,
  +0.0015048f, +0.1895640f, -0.0669244f, -0.0929646f, +0.3469030f, +0.0136917f, +0.0547450f, -0.5646127f,
  -0.1034073f, +0.0480799f, -0.0289750f, +0.1417809f, +0.1580520f, +0.2356931f, -0.1769150f, -0.1558620f,
  +0.0452439f, -0.0572312f, -0.2912964f, -0.2314487f, +0.1793018f, -0.1572454f, +0.1054890f, -0.1454673f,
  -0.1127134f, -0.0748105f, +0.0836041f, -0.1865460f, -0.0913120f, +0.0052899f, -0.1339007f, -0.0314088f,
  +0.2309024f, +0.1892775f, -0.1500565f, -0.3771067f, -0.0745017f, -0.2441090f, +0.2816481f, -0.2524187f,
  -0.2048426f, +0.1913692f, -0.0904849f, -0.2146995f, +0.2424881f, -0.2951328f, -0.1091168f, +0.1216912f,
  +0.0659717f, -0.3049445f, +0.0331918f, +0.0065776f, -0.0145794f, +0.2469409f, -0.2641147f, +0.1617563f,
  -0.0020224f, -0.0243494f, +0.1762263f, +0.8158654f, -0.0870352f, +0.2694692f, -0.2999471f, -0.3623672f,
  +0.0073115f, -0.1130645f, +0.3095240f, -0.0735436f, +0.1339314f, +0.0869763f, -0.2120110f, -0.1567737f,
  -0.3443792f, +0.1501249f, -0.0501177f, -0.0410091f, +0.3386758f, +0.0780006f, +0.0636394f, -0.0418698f,
  +0.1266813f, -0.2849541f, +0.1414278f, -0.1106795f, -0.1087926f, +0.1687052f, +0.3585138f, -0.0758580f,
  -0.0184037f, -0.0663609f, +0.0238697f, +0.2870602f, -0.1502804f, +0.0389880f, +0.1076377f, +0.2888491f,
  +0.1680947f, -0.1264833f, +0.1295305f, +0.2776921f, +0.2528443f, +0.1081754f, -0.0588470f, +0.0170059f,
  -0.2321526f, +0.1391656f, -0.0235429f, +0.0264493f, -0.0713408f, +0.0452857f, -0.0325734f, -0.1344624f,
  -0.0249317f, +0.0001835f, -0.0710147f, -0.2268576f, +0.0352166f, -0.1652314f, +0.1318446f, +0.2643612f,
  +0.1789956f, -0.4101896f, +0.2614624f, -0.1880601f, -0.0374266f, -0.0542034f, +0.1062752f, +0.0724342f,
  -0.0686568f, -0.1809546f, +0.0687515f, -0.0558622f, +0.2233693f, -0.0246758f, -0.0777793f, -0.1134800f,
  +0.1991663f, +0.0190375f, +0.0948497f, -0.0896529f, -0.0150376f, +0.1793049f, +0.0305391f, -0.2759472f,
  -0.2148878f, +0.1043358f, -0.0765446f, +0.0392802f, +0.1685197f, +0.2054791f, -0.0260746f, +0.1386978f,
  -0.0004704f, -0.1011668f, -0.0529316f, -0.0920440f, +0.2575083f, +0.0008320f, +0.0297307f, +0.0369024f,
  +0.0208957f, -0.1212675f, -0.0637723f, +0.0100639f, -0.0685835f, +0.1015667f, +0.1723372f, +0.2936406f,
  +0.1757204f, +0.0699833f, -0.2302849f, -0.0115714f, -0.0003322f, -0.0933496f, -0.0384033f, -0.0501467f,
  -0.0289028f, -0.0162065f, +0.1094468f, +0.2713758f, +0.2567682f, +0.3041957f, +0.0617556f, -0.0702918f,
  +0.1768567f, +0.2637905f, -0.1190208f, +0.2036020f, +0.1359231f, +0.3991455f, -0.0197778f, -0.0140055f,
  +0.0633243f, -0.1534494f, -0.0461585f, -0.0022317f, +0.0435220f, +0.2963174f, -0.0075779f, +0.0005485f,
  +0.2270169f, +0.1555801f, +0.0117018f, +0.0418848f, +0.1776354f, +0.0964292f, -0.1989153f, +0.1346587f,
  +0.1529438f, -0.0522940f, +0.1991450f, +0.0669521f, +0.0753185f, +0.1062075f, -0.1792632f, -0.1961912f,
  -0.0607935f, +0.0928981f, -0.1312924f, -0.1120637f, +0.1391659f, +0.1539734f, +0.0256615f, +0.1047529f,
  -0.1343933f, -0.0695961f, -0.2087946f, +0.0423640f, -0.1628843f, -0.2854048f, +0.0622980f, -0.0031376f,
  -0.1729979f, +0.3149659f, +0.0984486f, -0.0783742f, +0.0150753f, -0.1746170f, -0.1201815f, +0.0068153f
);

const float biases[4] = float[4](
  -0.0391900f, -0.0245711f, -0.0683128f, -0.0232329f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer119 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1717298f, +0.0670405f, -0.0594947f, -0.0644246f, +0.0437371f, +0.1517781f, +0.1443189f, -0.2563129f,
  +0.0765184f, -0.1531115f, -0.1380224f, +0.0419385f, -0.0644422f, -0.0280624f, +0.0332303f, -0.3391506f,
  -0.0214446f, -0.0485483f, -0.0629730f, -0.1001642f, -0.1306915f, -0.0269000f, +0.2137384f, -0.4322608f,
  +0.2534949f, +0.3300431f, -0.0239942f, +0.1931887f, -0.1273109f, +0.1662375f, -0.2334824f, -0.0425080f,
  +0.0039173f, +0.0094336f, +0.2537723f, +0.0199461f, +0.2222971f, +0.4233696f, -0.5408399f, +0.7163649f,
  +0.2140300f, +0.1511226f, +0.2632878f, -0.0386826f, +0.2070248f, +0.0104114f, -0.3553656f, +0.2237591f,
  +0.1486408f, +0.0842188f, -0.1406333f, -0.0009407f, -0.0007184f, -0.1021417f, +0.4781578f, -0.1161817f,
  +0.2166615f, +0.2458505f, -0.2634090f, +0.4526869f, +0.0625451f, -0.1699148f, +0.0992148f, +0.0714587f,
  +0.1038615f, -0.1490471f, +0.0488565f, +0.1055377f, +0.0567697f, +0.1388036f, +0.1743374f, +0.1139922f,
  -0.0756021f, -0.0201942f, +0.1417056f, +0.1451649f, -0.0494296f, +0.0169141f, -0.0879229f, +0.0565882f,
  +0.0732657f, +0.1516548f, -0.0221265f, +0.0223876f, -0.0427253f, +0.0553852f, +0.2553054f, -0.1053837f,
  -0.0276129f, +0.0077154f, +0.0522933f, +0.0453348f, -0.0387453f, -0.0332227f, -0.1338518f, -0.0149066f,
  -0.0772114f, +0.0172093f, +0.1540834f, -0.1373114f, +0.1068978f, -0.1532888f, -0.2147758f, -0.0396067f,
  -0.1216538f, +0.3129214f, -0.1796324f, -0.0914498f, +0.0101025f, -0.1512297f, -0.0245584f, -0.3688386f,
  -0.0962206f, +0.1842307f, -0.0275635f, -0.1335623f, -0.0867043f, -0.1665309f, -0.1502929f, -0.2924752f,
  +0.0541168f, +0.0419762f, +0.0235331f, -0.0062944f, -0.0342791f, -0.0917797f, +0.0635594f, +0.0621462f,
  -0.1637835f, -0.0822750f, +0.0372539f, -0.0735194f, +0.1284644f, -0.1816874f, +0.2570563f, -0.0505445f,
  +0.0663945f, -0.3035245f, +0.0160125f, -0.1096293f, +0.1537728f, +0.1304432f, +0.1930340f, +0.0171042f,
  -0.0323271f, +0.0067107f, +0.1061982f, -0.0696600f, -0.1128733f, -0.1850462f, +0.1680831f, +0.0208188f,
  -0.2703287f, +0.0384048f, +0.0432366f, -0.1295449f, +0.1480524f, -0.1245369f, +0.2383424f, +0.1239801f,
  -0.1039648f, +0.2716344f, +0.0233753f, +0.0410174f, +0.1243852f, -0.1299122f, -0.0740126f, +0.0892335f,
  -0.0372529f, +0.0311439f, -0.1423601f, -0.0732276f, -0.0690035f, -0.0817022f, +0.0107472f, +0.1191498f,
  -0.0765019f, +0.0658369f, +0.2462560f, -0.0319434f, -0.0347472f, -0.0739741f, -0.2274947f, -0.0397871f,
  -0.1088458f, +0.2912171f, +0.0417139f, +0.0840338f, -0.1825966f, -0.1321278f, +0.0870361f, -0.1063923f,
  -0.0773790f, +0.0306981f, -0.0345865f, +0.1794172f, -0.1760993f, -0.1689003f, -0.0464014f, +0.0153330f,
  +0.0605802f, +0.0467187f, -0.0281222f, -0.0270003f, +0.1919007f, +0.0143502f, -0.0008913f, +0.1262197f,
  +0.0738066f, -0.0467969f, +0.0453543f, +0.0168908f, +0.0428182f, -0.0547965f, +0.1078270f, +0.0357294f,
  +0.0108142f, +0.0165938f, -0.0494695f, +0.0524820f, -0.1591565f, +0.1973727f, +0.0673532f, +0.2250390f,
  +0.0357457f, -0.1430377f, +0.0141738f, -0.1144679f, -0.1447833f, +0.0871463f, +0.3790843f, +0.3418360f,
  +0.1803881f, +0.1187442f, -0.1205917f, -0.0924907f, -0.0840465f, +0.1494362f, -0.0469620f, +0.2591421f,
  -0.1228117f, +0.0287635f, +0.1087385f, -0.1712867f, -0.1051473f, -0.1980831f, +0.1556824f, -0.1733362f,
  -0.1659962f, -0.0694576f, +0.1474452f, -0.1265230f, -0.0570830f, -0.2493796f, +0.2360137f, -0.1193787f,
  +0.1587458f, -0.2944458f, -0.2143332f, -0.0965554f, +0.0106283f, -0.0085015f, -0.1581044f, +0.0280768f,
  -0.2618317f, -0.1309889f, -0.0934355f, -0.1294681f, +0.1334492f, -0.1190360f, +0.0237456f, -0.0325200f,
  +0.0862524f, +0.0099454f, +0.0014810f, -0.1362291f, +0.0382583f, -0.0528210f, +0.2479144f, -0.0445020f,
  -0.0883373f, -0.1032332f, -0.0640327f, -0.1307393f, -0.0309506f, -0.1462677f, -0.0031850f, -0.0296313f
);

const float biases[4] = float[4](
  -0.0309243f, -0.0005548f, +0.0170375f, +0.0282327f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer120 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.3244739f, -0.0481902f, +0.1136991f, +0.4754569f, +0.1705752f, -0.0137574f, +0.0296995f, +0.0784677f,
  +0.3242855f, +0.0496082f, -0.0422037f, -0.0589002f, -0.1404763f, +0.0683691f, -0.0343165f, +0.0349152f,
  -0.0605434f, -0.0008962f, +0.2598488f, +0.3218917f, +0.1099687f, +0.0730937f, +0.0113201f, +0.0281279f,
  -0.1060113f, +0.0073241f, +0.0872389f, -0.1594120f, +0.3495544f, +0.0345272f, -0.0576107f, -0.2518843f,
  +0.2702408f, +0.0340469f, -0.3361721f, -0.1406772f, -0.1165187f, +0.1444616f, +0.1693370f, +0.0550474f,
  +0.0279233f, -0.0213329f, +0.1785752f, -0.0044345f, -0.0669311f, +0.1164503f, -0.1632972f, -0.2839553f,
  -0.1192422f, +0.0391657f, +0.2620105f, -0.0672985f, +0.1356367f, -0.1608741f, +0.1448336f, +0.0066640f,
  +0.1052492f, -0.0403833f, -0.1162690f, -0.0971744f, -0.1387680f, -0.0888899f, -0.0968598f, +0.0148335f,
  -0.1317335f, +0.0003748f, +0.0794529f, -0.0444635f, +0.0478105f, -0.0349853f, -0.0952889f, -0.0181450f,
  -0.0167185f, +0.1250039f, -0.1787790f, -0.0977488f, +0.2082993f, +0.3084073f, +0.0731090f, +0.0691537f,
  +0.1767971f, +0.1483445f, +0.2381550f, +0.0382306f, +0.2521458f, +0.1354372f, -0.0323152f, -0.2747654f,
  -0.1599293f, +0.1810997f, -0.0387834f, -0.2749448f, +0.1604232f, +0.0035512f, +0.2447985f, +0.1585876f,
  +0.2357859f, +0.1694479f, +0.0026186f, -0.1379904f, +0.2212170f, -0.2205525f, -0.4119467f, +0.3112446f,
  +0.0781219f, -0.0229211f, -0.2254799f, +0.1295294f, +0.1358482f, +0.0052565f, -0.1300871f, +0.0748833f,
  -0.1214201f, -0.0019996f, -0.0206133f, -0.0264302f, +0.1650780f, +0.0676440f, -0.0386791f, +0.2650771f,
  -0.0514803f, +0.0254780f, -0.2895184f, -0.0688988f, +0.1370999f, -0.3036089f, -0.0243628f, -0.0470536f,
  +0.1017066f, +0.2273210f, -0.0827643f, +0.1441045f, +0.0340740f, -0.1190001f, +0.1193394f, +0.1880450f,
  -0.1035802f, +0.1273574f, +0.2083429f, -0.2183095f, +0.2894953f, +0.0112908f, -0.0548425f, +0.1198111f,
  +0.1000987f, -0.0588517f, +0.0411995f, +0.1636232f, +0.0025946f, +0.1380987f, -0.1955579f, -0.1139903f,
  -0.2161825f, +0.0684266f, +0.0573000f, +0.4234437f, -0.0276558f, -0.1166232f, -0.0761941f, +0.1209621f,
  +0.0914375f, -0.0469454f, -0.1848320f, +0.0714872f, -0.0636389f, +0.0898989f, +0.0072397f, -0.0909094f,
  -0.0257753f, +0.0122387f, +0.0740115f, +0.0635427f, -0.1273541f, +0.0390453f, -0.0751502f, -0.1283228f,
  +0.1043642f, -0.2116717f, -0.2464579f, -0.0741232f, +0.0081079f, +0.1865479f, -0.0684645f, +0.2193711f,
  +0.0216112f, -0.1191382f, +0.0800330f, +0.0071954f, -0.1914390f, -0.2239170f, +0.0164380f, -0.1896696f,
  -0.2120983f, +0.1277415f, +0.0565040f, -0.1005540f, +0.1283747f, +0.0736974f, -0.0062347f, -0.2206220f,
  +0.2464551f, +0.0361401f, +0.0638071f, -0.0772773f, -0.1610224f, -0.0999904f, -0.1389965f, +0.0502917f,
  -0.0226863f, +0.0929044f, -0.1052260f, +0.0836570f, -0.1123378f, +0.0015254f, -0.0949946f, +0.0166716f,
  -0.0684539f, +0.1785876f, -0.1187451f, -0.4036806f, +0.1153337f, +0.1278320f, -0.0255007f, +0.2886828f,
  +0.0001820f, +0.0181593f, -0.0171531f, +0.4175565f, -0.0066972f, +0.0668438f, -0.0380120f, -0.1007010f,
  -0.4042294f, -0.0613842f, -0.1616869f, -0.0000350f, -0.1126425f, -0.0968203f, -0.0653312f, -0.0670351f,
  +0.2126452f, +0.0357904f, -0.1025843f, -0.2467393f, +0.3923700f, +0.1941739f, +0.1191326f, +0.2750939f,
  -0.2915769f, +0.2328764f, +0.1619251f, +0.0594479f, +0.2484446f, -0.1046570f, +0.2187699f, +0.1635319f,
  -0.0642570f, -0.0342132f, -0.0164034f, +0.2793798f, -0.0517737f, +0.1123400f, +0.0900355f, +0.0903908f,
  -0.1495363f, -0.0166454f, +0.2276880f, -0.2323921f, +0.0524928f, +0.2828273f, -0.0923867f, +0.2726140f,
  +0.0700693f, -0.2254111f, -0.0444207f, +0.1583856f, +0.1091880f, +0.0736377f, -0.2079367f, -0.0739942f,
  -0.1588175f, -0.0507582f, +0.2481775f, +0.0624581f, -0.1461437f, -0.0704719f, +0.1687115f, -0.1044767f
);

const float biases[4] = float[4](
  -0.0273407f, -0.0071949f, -0.0009096f, -0.0178936f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer120 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0209236f, +0.1684068f, -0.2380537f, +0.1364533f, +0.0548658f, +0.3705400f, -0.0208091f, +0.0465639f,
  +0.0029389f, +0.2507225f, -0.0169404f, +0.2046336f, +0.1247120f, +0.0979756f, -0.0545176f, +0.0690740f,
  -0.3281105f, +0.0767587f, +0.2030426f, +0.1948880f, -0.0311000f, -0.0810266f, +0.0651875f, -0.0844912f,
  -0.2713645f, +0.2499492f, +0.0867205f, -0.1549480f, +0.2997267f, -0.1026617f, -0.2753609f, +0.2138776f,
  +0.0102827f, +0.1031323f, -0.0657222f, +0.1144285f, +0.4028355f, +0.1501092f, -0.1254133f, -0.2245110f,
  -0.0441326f, +0.0202666f, -0.3681128f, -0.2741132f, +0.1852534f, -0.2159780f, +0.0769818f, +0.1673640f,
  +0.2737276f, +0.0533734f, -0.1291135f, -0.0184931f, +0.0883157f, +0.2541688f, +0.1410773f, +0.0249440f,
  -0.1881563f, -0.0143230f, -0.1260129f, +0.0460298f, +0.2750306f, +0.3252060f, +0.0558642f, +0.2773950f,
  +0.0168243f, +0.0928219f, +0.1618087f, -0.1561414f, +0.1090948f, +0.0130695f, -0.1342883f, +0.0665764f,
  +0.0272442f, -0.2412827f, +0.2232895f, +0.2889832f, -0.0183112f, +0.1717432f, -0.0790480f, +0.0321983f,
  +0.1907877f, +0.1625920f, -0.0396996f, +0.1518957f, +0.1357083f, -0.0365371f, -0.0757411f, +0.1122832f,
  -0.2878102f, -0.0097861f, +0.0986549f, +0.1736856f, +0.0415288f, +0.0882625f, +0.1440890f, +0.0920265f,
  -0.0031741f, -0.2466867f, -0.0313435f, -0.0438453f, -0.1414656f, -0.0469258f, +0.1161973f, -0.2770618f,
  +0.0330191f, -0.2154020f, +0.0742213f, -0.0599670f, -0.0602303f, +0.2655998f, +0.1912438f, -0.2174956f,
  +0.0681670f, -0.1408692f, +0.1253632f, +0.1858223f, +0.2708020f, +0.0817606f, -0.0705992f, +0.0956668f,
  +0.0785480f, -0.2198634f, -0.1036686f, +0.1318131f, -0.2040922f, -0.2363877f, +0.1805571f, -0.2944224f,
  +0.2208869f, +0.0278628f, -0.4096181f, -0.0089828f, +0.0886557f, +0.0396556f, -0.1850646f, -0.2322623f,
  +0.2898702f, -0.1051370f, +0.1390666f, +0.2247415f, +0.0090226f, -0.0283561f, +0.0452026f, -0.1694169f,
  +0.0237324f, -0.0657884f, +0.0148887f, -0.0471375f, +0.0109958f, -0.0577633f, -0.0618308f, +0.0762884f,
  +0.1311206f, -0.2787378f, -0.0464358f, +0.1874512f, +0.1090394f, +0.0671055f, +0.2823242f, +0.1302180f,
  +0.0982986f, -0.0898713f, -0.0770092f, -0.2174528f, -0.1225604f, +0.1002087f, -0.0825396f, +0.0509986f,
  -0.2736332f, -0.2040325f, -0.0507111f, +0.0381374f, -0.2180096f, -0.0432311f, +0.1514504f, +0.0058582f,
  -0.2361937f, +0.0955512f, +0.0731673f, -0.2549770f, -0.1887730f, +0.1454908f, +0.2945599f, -0.0766757f,
  +0.0614850f, +0.0716530f, +0.2674618f, +0.0961176f, -0.0355711f, -0.0778422f, +0.1965173f, -0.0790592f,
  +0.0231204f, +0.0490341f, -0.2809159f, +0.0801357f, -0.1224860f, +0.1749356f, +0.0835570f, -0.2398828f,
  +0.2517563f, -0.0372789f, -0.0548171f, +0.1301248f, -0.1746054f, +0.0024848f, -0.1239458f, -0.1498160f,
  -0.2129329f, +0.0319188f, +0.1071362f, -0.0775360f, -0.0831891f, +0.1757647f, -0.2752777f, -0.0084771f,
  -0.1769399f, +0.1548561f, +0.1686046f, +0.1078604f, +0.0805375f, -0.1145292f, -0.1588480f, +0.1412410f,
  -0.5266436f, -0.1637994f, -0.1767039f, -0.1289239f, -0.1177218f, +0.0672645f, +0.0706311f, -0.1428462f,
  -0.0009666f, +0.0499728f, +0.0050409f, +0.0531210f, +0.0715171f, -0.0187144f, -0.0189522f, +0.2686380f,
  -0.2377753f, +0.1502399f, +0.1836222f, +0.0102241f, -0.0094446f, +0.3484535f, +0.3255008f, -0.0210645f,
  +0.1882957f, -0.4391395f, -0.0210987f, +0.0363032f, -0.4523197f, +0.4527167f, -0.1209629f, -0.0023679f,
  -0.1137693f, -0.0058622f, -0.2276443f, +0.0910624f, +0.0514932f, -0.0551205f, -0.1166330f, -0.0049334f,
  -0.1517571f, +0.0243006f, -0.2502614f, +0.2412335f, +0.0818137f, -0.1354125f, -0.2021895f, -0.0358687f,
  -0.3246756f, +0.3186257f, +0.0579418f, +0.1823404f, +0.1010740f, +0.2769721f, +0.2911548f, +0.1485152f,
  -0.3161024f, +0.0436018f, +0.0080218f, -0.1646003f, -0.0790728f, +0.1904340f, +0.1819041f, +0.1721418f
);

const float biases[4] = float[4](
  -0.0110302f, -0.0171636f, -0.0027628f, -0.0130533f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer121 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0166748f, -0.0887045f, -0.1396109f, +0.1940456f, -0.1350501f, -0.0468145f, +0.0857149f, +0.0023471f,
  -0.1082313f, -0.2846785f, -0.1289950f, +0.2126056f, -0.1470428f, +0.0024263f, +0.0880237f, -0.0063819f,
  -0.2270878f, +0.1123231f, -0.1299493f, -0.0268641f, -0.1155246f, -0.1516840f, -0.1472813f, -0.2100938f,
  -0.0523161f, -0.0380867f, +0.0017834f, +0.0249741f, -0.0217738f, -0.0726761f, -0.2351596f, +0.0371742f,
  +0.1725205f, -0.1929372f, +0.2220532f, -0.1979716f, +0.0688644f, +0.0410371f, +0.0345632f, +0.0734474f,
  +0.1865739f, +0.1333153f, -0.0620798f, +0.1945127f, -0.0854730f, +0.2895482f, -0.1813975f, -0.0528806f,
  +0.1571730f, +0.1000653f, +0.0772257f, -0.1006527f, -0.0181318f, +0.0678394f, +0.0752136f, +0.0848128f,
  +0.1018557f, +0.2591938f, +0.1273676f, +0.0715214f, -0.0468061f, -0.0504790f, +0.0425520f, +0.0323100f,
  -0.1387382f, +0.0720609f, -0.3420196f, -0.1238614f, +0.0600163f, +0.0330280f, +0.2036271f, -0.1702379f,
  +0.2038455f, -0.1240589f, +0.1122547f, -0.2868228f, +0.1266715f, +0.0547230f, -0.1376858f, -0.1219329f,
  +0.2053494f, -0.1758712f, -0.0916682f, +0.1359230f, -0.0111676f, +0.1646417f, -0.3416020f, +0.1017521f,
  +0.0536700f, -0.1815464f, +0.0274045f, +0.1452520f, +0.1470747f, +0.3347396f, -0.0613994f, -0.1959510f,
  +0.0522080f, +0.4329689f, -0.0465210f, -0.0497488f, +0.0628201f, +0.1888777f, -0.3744579f, +0.2209813f,
  +0.1685863f, -0.0970523f, +0.3422024f, +0.0215322f, -0.3159467f, -0.2609477f, -0.1402559f, +0.0539483f,
  +0.0343557f, -0.0200321f, -0.0433101f, -0.0270657f, -0.1572834f, +0.0281316f, +0.1284767f, +0.1677824f,
  +0.0862398f, -0.0977272f, -0.2182761f, -0.1511932f, +0.1812836f, +0.0504174f, -0.2329360f, -0.0048011f,
  -0.2049552f, +0.0966392f, -0.2578383f, -0.1558637f, +0.1749579f, -0.1820463f, -0.0891831f, -0.1197010f,
  -0.2479853f, -0.1603734f, +0.1652057f, -0.1349320f, -0.1056667f, +0.2591544f, -0.2402074f, -0.2986510f,
  -0.2612359f, +0.1775835f, +0.0251484f, -0.1452371f, +0.0217265f, -0.1024914f, +0.0051002f, -0.0567158f,
  -0.2249298f, -0.4263725f, +0.1014343f, -0.0694384f, +0.2847773f, -0.1595771f, +0.0433809f, +0.0597381f,
  +0.2409826f, +0.0217893f, -0.1637374f, +0.0829903f, +0.0601060f, +0.1600629f, +0.0791022f, +0.1420004f,
  +0.0282782f, +0.0254796f, -0.1524547f, -0.0562977f, +0.2429284f, +0.0875382f, +0.1195832f, -0.1343709f,
  +0.0028136f, -0.0860469f, +0.0042375f, +0.0441243f, -0.3046569f, +0.1588869f, +0.0406166f, +0.2987331f,
  +0.1540873f, +0.4277701f, +0.1364719f, +0.2725628f, -0.0558091f, -0.0935492f, +0.0084781f, -0.1261309f,
  -0.1804464f, -0.0929840f, +0.0930783f, -0.0657315f, +0.0185833f, +0.0309647f, +0.0595574f, +0.1015161f,
  +0.2719339f, -0.2214600f, -0.0575817f, -0.0899134f, -0.1078417f, -0.0121803f, -0.2281384f, -0.0490617f,
  +0.0177451f, +0.1096411f, -0.0914451f, +0.0377476f, +0.0052229f, -0.1111414f, +0.0184437f, -0.0013389f,
  +0.0089500f, -0.1698775f, +0.0535461f, +0.0308554f, +0.0151305f, +0.0119732f, -0.0268735f, +0.1982611f,
  +0.1040340f, -0.0638887f, -0.0376630f, +0.2564288f, +0.0425873f, +0.1903402f, -0.1927163f, +0.3278725f,
  -0.1005324f, -0.2261821f, -0.1500104f, +0.0378434f, +0.0737830f, +0.1817013f, +0.1095776f, -0.0487435f,
  +0.0837416f, -0.0188629f, -0.0802957f, -0.1335903f, -0.0828529f, -0.1509951f, +0.1716553f, -0.0267429f,
  +0.0406310f, -0.0109739f, +0.3216091f, +0.2354721f, -0.1137996f, -0.1283491f, -0.0369467f, -0.0006328f,
  -0.2476296f, -0.1316967f, +0.2566514f, +0.0065791f, -0.0184568f, +0.1374848f, +0.2158236f, +0.1174596f,
  +0.4461791f, -0.1835914f, +0.0027564f, +0.0336922f, -0.1307091f, -0.0288219f, +0.2478019f, -0.0011120f,
  -0.0044784f, +0.1576960f, +0.0359222f, +0.1902458f, +0.0467524f, +0.0456352f, -0.0101063f, +0.1561761f,
  -0.2576931f, +0.2825539f, +0.0279719f, +0.1512583f, +0.0876108f, +0.1327314f, -0.0791662f, -0.0969295f
);

const float biases[4] = float[4](
  +0.0163507f, -0.0249689f, +0.0155088f, -0.0453804f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer121 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0298010f, +0.0388741f, +0.2649471f, +0.1931213f, -0.1887076f, -0.0086769f, +0.0784884f, +0.0921126f,
  +0.0285707f, +0.0473175f, -0.1774772f, -0.0190547f, +0.1045068f, +0.0107779f, +0.2145856f, +0.0456777f,
  +0.0000068f, +0.0444585f, -0.2278944f, -0.0104209f, +0.0128403f, -0.1688696f, -0.0025945f, +0.1628288f,
  -0.4170200f, +0.1944536f, +0.1074054f, -0.0373118f, -0.0720705f, +0.0454693f, -0.3059537f, -0.1457142f,
  -0.3528250f, +0.1073684f, +0.0807847f, -0.0930878f, -0.0682760f, -0.0623878f, -0.0771837f, -0.1708360f,
  +0.1285161f, +0.1700614f, -0.2367458f, +0.0125559f, +0.1393292f, -0.2237980f, +0.2150810f, -0.2382527f,
  +0.0958507f, +0.2770928f, +0.0189289f, +0.1176623f, -0.0089561f, +0.2584292f, +0.0701566f, -0.1574520f,
  +0.1165356f, -0.1139051f, +0.1364016f, +0.0753488f, -0.0645213f, -0.0162213f, +0.0805081f, -0.1616869f,
  -0.0876948f, -0.0797160f, +0.1179006f, -0.0286457f, +0.0741145f, -0.0336131f, +0.0102217f, -0.0723555f,
  -0.0575892f, -0.2111379f, -0.0799671f, +0.0264861f, +0.0693743f, +0.2270728f, -0.2219614f, +0.2861527f,
  -0.1552333f, -0.1520299f, +0.4605411f, +0.0940427f, +0.1100275f, +0.0842574f, +0.0305802f, -0.0724446f,
  +0.1264041f, -0.0343074f, +0.1739803f, -0.1088616f, +0.3944304f, +0.3197772f, -0.2989705f, +0.1621199f,
  -0.1979630f, -0.1422016f, -0.1188719f, -0.1646178f, +0.0234020f, -0.1661260f, -0.4362315f, +0.1098236f,
  -0.0121767f, -0.2197687f, -0.0515821f, +0.0623731f, +0.0307351f, +0.0348405f, -0.3774885f, -0.1210821f,
  +0.3276244f, -0.1136957f, -0.0840101f, -0.2721073f, -0.0483553f, +0.1635109f, -0.1405474f, +0.0849258f,
  -0.4963306f, -0.0993948f, +0.3035725f, +0.1532853f, -0.1811702f, +0.0260564f, -0.0156447f, -0.0161516f,
  -0.0674276f, -0.3391050f, +0.0361729f, -0.0273887f, +0.0501415f, +0.3769601f, -0.0151631f, -0.4102625f,
  +0.1690821f, +0.0552286f, -0.1225952f, -0.1186463f, +0.1043557f, +0.0640007f, -0.1047061f, +0.0655596f,
  +0.0631392f, +0.0362669f, +0.1900949f, +0.0335254f, +0.1392184f, -0.0649461f, -0.2832902f, +0.3044672f,
  +0.1713256f, -0.2915287f, +0.0508392f, -0.2068015f, -0.2864214f, -0.0042432f, +0.0747497f, +0.1733601f,
  +0.0658364f, -0.1593661f, -0.0697376f, +0.1955783f, +0.2036688f, -0.3166147f, +0.1184608f, -0.2798954f,
  +0.2597823f, -0.1459206f, -0.0504951f, -0.1341480f, +0.1849939f, -0.1194910f, -0.1149894f, -0.2088788f,
  -0.0687284f, -0.0166762f, +0.0681985f, -0.2230723f, -0.0284933f, -0.0303507f, +0.0419699f, +0.1202460f,
  -0.0580039f, +0.0247173f, +0.0786510f, -0.1775886f, +0.2592698f, +0.0146296f, -0.0246412f, -0.2600559f,
  +0.4421371f, +0.1600033f, -0.2699082f, -0.0072383f, +0.4136467f, -0.1203275f, +0.0069162f, +0.0346553f,
  +0.1390055f, +0.1486008f, +0.2476001f, +0.1269080f, +0.0817003f, -0.0401170f, -0.1856336f, +0.1131336f,
  -0.2456229f, +0.0609700f, -0.1658128f, -0.0005198f, +0.1372245f, +0.4099000f, -0.1545032f, -0.2466485f,
  -0.1679875f, +0.1650598f, +0.0043004f, -0.0287347f, +0.0817887f, -0.0371722f, -0.0456389f, -0.0980656f,
  +0.1306703f, +0.3310443f, -0.4120556f, -0.0473546f, +0.0499015f, -0.1140718f, +0.1488022f, -0.1307356f,
  +0.0190315f, +0.0726470f, +0.0517678f, -0.0265710f, +0.0183323f, -0.0558861f, -0.1156208f, +0.0089675f,
  -0.0716115f, +0.0628563f, +0.0017481f, +0.0184172f, -0.0304516f, -0.1100751f, +0.1394174f, +0.2528979f,
  -0.1171759f, -0.0026408f, +0.0422837f, +0.0571998f, -0.0843875f, -0.1042770f, +0.1215125f, +0.3445248f,
  -0.1362664f, +0.0326385f, +0.2229398f, +0.0224503f, -0.1045882f, -0.0352954f, -0.0293795f, -0.0021894f,
  +0.1417782f, +0.1589285f, -0.0648955f, +0.1669728f, -0.0733865f, -0.1585141f, -0.0188388f, +0.1530941f,
  +0.2252883f, -0.2152370f, +0.0032084f, +0.1601093f, -0.2096789f, -0.0521257f, +0.1240970f, +0.2028964f,
  +0.2774482f, +0.0766860f, -0.1204949f, +0.0101421f, +0.0254190f, +0.2371349f, -0.1761295f, +0.1540439f
);

const float biases[4] = float[4](
  +0.0017696f, -0.0164426f, -0.0106893f, +0.0520905f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer122 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0083087f, +0.0618641f, -0.0450136f, +0.0084479f, -0.0615763f, -0.0117051f, +0.1097127f, -0.2513755f,
  -0.1476072f, +0.3297673f, -0.2303675f, -0.1236653f, -0.0318284f, +0.1610460f, +0.0076623f, +0.1288290f,
  -0.0630530f, -0.0883672f, +0.0696353f, -0.0700492f, -0.0259988f, +0.1305326f, +0.2968469f, +0.0653738f,
  -0.1011882f, -0.1769141f, -0.0962644f, +0.0134861f, +0.1223857f, +0.0963165f, -0.2545647f, -0.1639214f,
  +0.0979420f, +0.0741262f, -0.0704760f, -0.0051307f, +0.1661807f, +0.2847361f, +0.1679793f, -0.3961914f,
  -0.0020434f, -0.1132681f, +0.0271422f, -0.0577776f, +0.1129810f, +0.0040950f, +0.2158847f, -0.0812524f,
  -0.0826496f, +0.0862923f, -0.0660538f, +0.0936170f, +0.1206379f, +0.3478961f, +0.3411053f, +0.1913498f,
  +0.0419182f, -0.1884521f, +0.0512136f, +0.0693354f, +0.0442032f, +0.1015418f, +0.2040898f, +0.3370481f,
  +0.0245959f, +0.2159821f, +0.0582141f, -0.0548605f, +0.0449653f, -0.2347577f, +0.0543463f, +0.1873223f,
  +0.0234433f, +0.0272699f, -0.0657316f, -0.1816440f, +0.2715176f, +0.3193543f, +0.0239667f, +0.1945833f,
  -0.0418337f, -0.0198535f, +0.1804246f, +0.0392749f, +0.1586909f, -0.1782575f, +0.0279076f, +0.4504821f,
  -0.1069920f, -0.0202427f, -0.1146728f, +0.0521330f, -0.2558027f, +0.1294363f, -0.2286873f, -0.1506749f,
  -0.0594363f, +0.0730084f, -0.2138129f, -0.1323584f, -0.0503490f, -0.1662782f, +0.1197910f, +0.1064292f,
  +0.1040186f, -0.0442283f, -0.2296062f, -0.0295519f, -0.2737241f, -0.2461045f, +0.2349600f, -0.0485983f,
  -0.0601073f, -0.0245805f, -0.1755234f, -0.1060086f, -0.0166041f, -0.1641861f, +0.0553711f, -0.2340882f,
  +0.0515915f, -0.3037417f, -0.1214314f, -0.2837578f, -0.0977885f, +0.2355829f, +0.0349980f, -0.1615503f,
  +0.2169912f, +0.1630009f, +0.4066671f, -0.1661610f, -0.0456635f, -0.2240528f, +0.0767902f, -0.0068605f,
  +0.0355729f, +0.1062951f, +0.1565459f, -0.0254608f, -0.2387435f, +0.0076038f, +0.0630886f, +0.1109862f,
  -0.0660272f, -0.3959453f, +0.2095497f, +0.1546488f, +0.0028163f, +0.2260372f, +0.1984488f, -0.0576941f,
  +0.0202500f, +0.2059227f, +0.0653370f, -0.0623085f, +0.2830911f, +0.2500171f, +0.2244500f, +0.0381392f,
  -0.1090893f, -0.3064165f, +0.1216409f, +0.0953280f, -0.0865559f, -0.1611249f, +0.5206238f, -0.0255874f,
  +0.0319143f, +0.0043005f, -0.0407977f, +0.1536423f, +0.0723785f, +0.0226441f, -0.1105473f, -0.1965414f,
  +0.2953299f, +0.2017727f, -0.0209717f, -0.1357682f, +0.0461675f, -0.0065500f, -0.1113768f, -0.2169816f,
  -0.0783737f, -0.0285587f, +0.0044880f, -0.0595375f, -0.2754215f, -0.0679743f, -0.0353450f, -0.1205638f,
  -0.0666395f, +0.1666021f, +0.1293733f, +0.1642629f, +0.0728256f, -0.1577174f, +0.0881449f, +0.0810619f,
  -0.0328276f, +0.1316044f, -0.0564167f, -0.1131040f, -0.1701958f, -0.1013021f, -0.3653702f, +0.2344284f,
  +0.1396832f, +0.1458947f, -0.1583411f, -0.0748624f, +0.1973655f, +0.0390819f, +0.0013335f, +0.2048804f,
  +0.0965179f, -0.1869022f, +0.0349011f, -0.0582177f, +0.0801262f, -0.1384980f, +0.1622573f, +0.0771045f,
  +0.0022745f, -0.0238369f, +0.2210400f, +0.0676448f, -0.0621987f, +0.2987999f, +0.1432686f, -0.0861147f,
  +0.1401706f, +0.3604764f, +0.1178985f, +0.1522719f, -0.0194934f, +0.0685431f, -0.0564120f, -0.1056991f,
  -0.0752523f, -0.1079216f, +0.0621567f, -0.2773470f, -0.0287987f, -0.0822185f, -0.1234750f, -0.0677760f,
  +0.1300080f, +0.0986436f, -0.0539317f, +0.0298332f, +0.0784245f, +0.4407466f, -0.0225867f, +0.0317860f,
  -0.0188879f, -0.0165277f, +0.1741111f, -0.0285199f, +0.0086046f, +0.0792470f, -0.0218397f, +0.1468074f,
  -0.0967516f, +0.2292195f, -0.0151060f, +0.0516570f, +0.2612056f, -0.0120873f, -0.0352434f, +0.0761937f,
  -0.0712574f, -0.1325302f, -0.1322873f, +0.0631264f, +0.0236741f, -0.0867499f, -0.0767224f, -0.1972115f,
  +0.1120463f, +0.3733969f, +0.0756678f, +0.0067787f, -0.1124075f, -0.0708863f, +0.1846096f, +0.0452801f
);

const float biases[4] = float[4](
  -0.0096204f, -0.0065228f, -0.0055667f, -0.0142831f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer122 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0222776f, +0.0010159f, -0.1679147f, +0.0038812f, -0.1708053f, +0.2444956f, -0.0606422f, -0.1574267f,
  -0.0435250f, +0.2820963f, +0.1832830f, -0.0173428f, -0.1514601f, -0.1111118f, -0.0300145f, +0.0565057f,
  -0.0025600f, -0.0703119f, -0.1124441f, -0.0494486f, -0.2234425f, +0.1601934f, +0.0722695f, +0.1097878f,
  -0.1425884f, -0.1929937f, -0.0105730f, -0.0476844f, +0.0529458f, +0.0824504f, -0.0892537f, +0.2051485f,
  -0.1887753f, -0.0736334f, +0.3956169f, -0.0912784f, +0.0018063f, -0.0252795f, +0.1922928f, -0.0312907f,
  +0.2726852f, -0.1045712f, -0.2292424f, -0.0284330f, -0.1646365f, +0.0090172f, +0.2589899f, +0.2627407f,
  +0.0009469f, -0.1031994f, -0.0485919f, -0.0154157f, +0.2782093f, -0.0976106f, -0.1756935f, +0.0179002f,
  -0.0676025f, +0.0707094f, -0.1169436f, -0.0297507f, -0.1077523f, -0.1440955f, +0.0228134f, -0.0467584f,
  +0.0481289f, -0.2480292f, +0.0565574f, +0.1405415f, -0.0088413f, -0.1823027f, +0.1554222f, +0.0864329f,
  -0.0833967f, +0.2293396f, +0.0559289f, +0.0976371f, +0.0141799f, -0.0444235f, +0.0715338f, -0.0935502f,
  -0.0767380f, -0.0410967f, -0.2126510f, -0.0700565f, +0.1727415f, -0.0500739f, +0.1874542f, +0.0238735f,
  -0.1264089f, +0.0909599f, -0.0248561f, +0.0403753f, +0.0810690f, -0.0315319f, +0.0443899f, -0.0649031f,
  -0.0154021f, +0.1823927f, +0.0422143f, +0.2869761f, -0.1093892f, +0.2175132f, +0.0633870f, +0.1210121f,
  +0.0311121f, -0.1077900f, -0.1454872f, +0.1597548f, +0.0326503f, -0.0068256f, +0.1427614f, -0.0696879f,
  -0.0365483f, +0.1841703f, +0.0642871f, +0.0176645f, +0.1139431f, -0.2682622f, +0.1028748f, -0.1248819f,
  -0.0666226f, -0.0539829f, -0.0594825f, +0.2638304f, -0.0911752f, +0.0296047f, -0.0380179f, +0.2453023f,
  -0.0132912f, +0.2228161f, +0.1470373f, +0.0639394f, +0.0064491f, +0.1184322f, +0.1793752f, +0.0176835f,
  -0.0459521f, -0.1400452f, +0.1040806f, -0.0862929f, +0.0241764f, -0.1290370f, -0.2559369f, -0.1545572f,
  -0.0235031f, -0.0387395f, +0.0958925f, +0.2366599f, -0.0100932f, +0.1847267f, +0.0283970f, +0.2949832f,
  -0.0867348f, -0.2142961f, +0.5466231f, +0.1234302f, +0.1632668f, +0.1155029f, -0.2178599f, -0.0858070f,
  -0.0994410f, +0.1417940f, -0.1956581f, +0.0187507f, -0.0731725f, +0.1851794f, -0.0228664f, +0.0389670f,
  -0.0070589f, +0.1299536f, +0.1020991f, +0.3504020f, -0.1478535f, -0.0941741f, +0.1666488f, +0.2478159f,
  +0.0046826f, -0.2123760f, +0.0977271f, -0.0682073f, +0.0729804f, +0.4756301f, +0.1456769f, -0.0026026f,
  -0.0367702f, -0.0638863f, -0.0825312f, -0.0753186f, +0.2597415f, +0.0572907f, -0.1780998f, -0.1373407f,
  +0.0873244f, -0.0745969f, -0.1281272f, +0.0883730f, -0.0419704f, +0.0146187f, -0.1065618f, -0.1154815f,
  -0.0343260f, +0.2665770f, +0.0610535f, -0.0569804f, -0.1226195f, +0.2205721f, -0.3881333f, -0.0864356f,
  +0.0560156f, +0.1248870f, +0.0408257f, -0.1209335f, -0.1274147f, -0.1629570f, +0.0351310f, -0.2391257f,
  +0.0198101f, +0.0406346f, -0.1919031f, +0.0774665f, +0.0841356f, -0.0811920f, +0.3601567f, +0.0514279f,
  +0.1124093f, -0.0860938f, -0.0796085f, -0.0983023f, +0.1591561f, -0.0671327f, -0.0050412f, -0.3042390f,
  -0.1017663f, -0.3497240f, -0.0590388f, +0.0927785f, -0.2465183f, -0.1147052f, +0.0949122f, -0.0129416f,
  +0.1273689f, -0.1405522f, -0.1239618f, +0.2846517f, -0.1335880f, +0.0150345f, +0.2774483f, +0.0788396f,
  -0.1157914f, -0.0371087f, -0.0242918f, -0.0303919f, -0.0760011f, -0.1002466f, +0.5780125f, +0.1146667f,
  -0.0816835f, +0.0693934f, +0.0818923f, +0.0499108f, +0.1340827f, +0.1314158f, +0.0659418f, -0.3006921f,
  -0.0324167f, +0.1882103f, -0.1789587f, +0.0430082f, +0.2090724f, -0.1290271f, -0.2701621f, +0.1609544f,
  +0.0700215f, -0.2412869f, +0.0074296f, -0.1126075f, +0.0483151f, -0.2177379f, +0.0575563f, -0.0568238f,
  +0.0325778f, +0.0754722f, +0.0670658f, -0.0521267f, +0.2187993f, -0.1260742f, +0.0295678f, +0.1057314f
);

const float biases[4] = float[4](
  -0.0122779f, -0.0035162f, -0.0043519f, +0.0150019f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer123 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0611952f, -0.0509869f, -0.0133639f, -0.0321420f, -0.1402041f, +0.0548642f, -0.0504473f, +0.0701475f,
  +0.0905204f, +0.0120422f, +0.1603058f, +0.0451842f, -0.0125476f, -0.1667985f, -0.0189847f, +0.1039047f,
  -0.1136337f, +0.0882826f, +0.0565328f, -0.1738452f, +0.1001453f, +0.0995404f, -0.1825913f, -0.1482274f,
  +0.2286060f, -0.2323720f, -0.0520177f, -0.0767959f, -0.2496025f, -0.0203045f, +0.0350958f, -0.1208816f,
  +0.0787055f, -0.0747721f, -0.0783976f, -0.1265035f, -0.1629239f, -0.3177338f, -0.1631745f, -0.2728349f,
  -0.0470941f, +0.0833823f, -0.1377986f, +0.1150070f, +0.1239311f, -0.0194009f, -0.2863050f, -0.2763846f,
  -0.0288849f, +0.3467854f, -0.2938970f, +0.2055173f, -0.1825168f, +0.1427747f, -0.2828742f, -0.2291397f,
  +0.3056450f, -0.1251254f, +0.1514245f, +0.0364223f, +0.1591520f, +0.3575429f, -0.2086325f, +0.1929134f,
  +0.2719157f, -0.2855925f, +0.0136038f, -0.0904104f, -0.0294515f, -0.0924242f, -0.0077872f, +0.0695761f,
  -0.0582521f, -0.0763529f, -0.2809650f, -0.0231069f, -0.1641499f, -0.0477358f, -0.3101626f, +0.0813841f,
  +0.0953212f, +0.2718087f, -0.1479470f, +0.2091173f, -0.0678836f, +0.1694082f, +0.3139977f, +0.0806481f,
  +0.3078769f, +0.0242065f, +0.1907304f, +0.0716577f, -0.2250175f, -0.0919235f, -0.3352176f, +0.1323804f,
  +0.0125168f, -0.1517799f, -0.1715815f, -0.1366761f, -0.0233092f, -0.0379965f, -0.0495539f, -0.1176756f,
  +0.3542797f, +0.1307656f, -0.0101146f, +0.0069775f, +0.3712075f, +0.1747443f, -0.3444816f, -0.1706905f,
  -0.0398865f, -0.2365559f, -0.1975696f, +0.2051979f, +0.1595468f, +0.1037544f, -0.1006299f, +0.3062986f,
  -0.0366175f, -0.1004731f, +0.0536096f, -0.0840517f, +0.0252921f, +0.1453112f, +0.2730235f, -0.1619925f,
  +0.3507332f, -0.1454364f, -0.0717449f, +0.1048232f, +0.0456129f, +0.0233076f, -0.0900278f, +0.0526150f,
  +0.1308115f, +0.4496932f, -0.1242296f, +0.1355799f, +0.1409044f, -0.0265068f, -0.2668565f, +0.0762478f,
  +0.2268012f, -0.1747035f, -0.2778058f, +0.0848653f, +0.1211748f, -0.0504840f, -0.2287391f, +0.0318868f,
  +0.0962732f, -0.0660903f, -0.0401395f, -0.0553470f, +0.0289020f, -0.0954517f, +0.2905297f, +0.1161779f,
  +0.0448073f, +0.1422368f, +0.1113220f, +0.0401957f, -0.1224268f, +0.0167808f, -0.0662492f, -0.1303012f,
  +0.3431504f, -0.0461429f, +0.1712932f, +0.2343161f, -0.1810480f, +0.0407944f, +0.0852915f, -0.0572593f,
  +0.1479415f, -0.0540331f, +0.3542722f, -0.2325166f, +0.1067342f, +0.1183498f, +0.0613701f, +0.1725336f,
  +0.0167540f, +0.2426120f, -0.2081774f, -0.0128240f, +0.0880153f, -0.1390662f, -0.1753265f, -0.2653979f,
  +0.2523771f, +0.2410973f, +0.0806776f, +0.0397824f, +0.1021900f, +0.1023342f, +0.0314221f, -0.1113537f,
  +0.0922827f, -0.0645993f, -0.2075807f, +0.0333859f, +0.0305360f, -0.2232015f, +0.1726440f, -0.0353648f,
  -0.0225321f, +0.1135391f, +0.0201014f, -0.0058626f, +0.0481766f, +0.0197018f, +0.0123177f, -0.0250566f,
  +0.1920250f, +0.3100572f, -0.1568788f, -0.2440253f, +0.0366867f, -0.1815629f, +0.1649280f, +0.1282578f,
  +0.0008446f, -0.1823529f, -0.0335162f, -0.2496714f, +0.2208999f, -0.2629601f, +0.0582162f, -0.1071435f,
  +0.1897628f, -0.0915585f, +0.0803434f, -0.0898315f, +0.0682061f, -0.0557569f, +0.0812554f, -0.1048775f,
  +0.1067422f, +0.0110854f, +0.0438001f, -0.0582552f, -0.1179245f, -0.1133433f, -0.0246311f, +0.0875025f,
  +0.0836736f, -0.1680559f, +0.1256917f, -0.1588155f, +0.0268838f, +0.0725988f, -0.2787005f, +0.0050494f,
  +0.0298406f, +0.1484231f, +0.0561387f, -0.0267596f, -0.0474625f, -0.0572631f, -0.1222467f, -0.1045928f,
  -0.0430468f, -0.0724741f, -0.1487003f, -0.0193651f, +0.0060409f, +0.0339379f, -0.0575978f, +0.0240831f,
  -0.1878940f, -0.1681954f, -0.1162466f, -0.1996418f, +0.0774247f, -0.0251276f, +0.0568121f, +0.1106891f,
  +0.0834499f, +0.2096997f, -0.2009347f, -0.0055097f, -0.0213992f, +0.0399872f, -0.3088302f, +0.0250193f
);

const float biases[4] = float[4](
  +0.0249655f, -0.0149713f, -0.0082419f, -0.0247991f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer123 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0609190f, +0.0932208f, -0.0577898f, -0.0360737f, -0.0473392f, +0.0234972f, +0.1015303f, -0.0228432f,
  +0.1869059f, -0.2652656f, +0.0386503f, +0.0839696f, +0.0955273f, -0.0524900f, +0.2386805f, +0.3270150f,
  +0.0054266f, +0.3064968f, -0.1131632f, +0.0296316f, -0.0874544f, -0.2178089f, -0.2217120f, -0.1099192f,
  -0.2088048f, +0.1922217f, +0.1898762f, +0.0542924f, +0.0964001f, +0.0888532f, +0.1218390f, -0.0442673f,
  +0.0598381f, +0.1554316f, -0.0009477f, +0.1792440f, +0.1173668f, -0.3145819f, -0.0640593f, -0.0314123f,
  -0.0424336f, -0.0430028f, -0.1091372f, +0.0590623f, +0.1173594f, +0.0623420f, -0.1150331f, +0.1284993f,
  -0.2440174f, -0.3122335f, +0.0815504f, -0.0560641f, -0.0441410f, +0.1274953f, +0.1084111f, +0.1614444f,
  -0.1131332f, +0.1954347f, -0.0472087f, -0.0656081f, -0.0197364f, -0.0919064f, -0.0670033f, -0.0067221f,
  -0.0686826f, +0.1158053f, -0.0072730f, +0.1179777f, +0.0354254f, +0.1027498f, +0.2206558f, -0.1114750f,
  -0.2828058f, +0.0684046f, -0.1177498f, -0.0569658f, +0.0997010f, +0.0344986f, +0.0668985f, +0.0138993f,
  +0.2568297f, -0.1787450f, -0.0328664f, +0.0301748f, -0.0778874f, +0.0089538f, +0.0939232f, +0.2495028f,
  +0.2226336f, -0.0122890f, +0.1404413f, +0.0307339f, -0.0219560f, -0.2132154f, +0.1348647f, -0.0390154f,
  -0.1652353f, -0.1017363f, +0.1236407f, -0.0264747f, +0.3039627f, +0.2263236f, +0.0876278f, -0.0653609f,
  -0.1203257f, +0.0395414f, -0.0507007f, +0.1389636f, +0.0592330f, +0.1404845f, +0.0481957f, -0.0154216f,
  -0.1018897f, -0.0748244f, -0.1242540f, -0.1455818f, +0.0972737f, +0.0211715f, -0.0441680f, +0.0589258f,
  -0.1652699f, +0.1342966f, -0.0115100f, -0.0237332f, +0.0345166f, +0.0036946f, -0.2208803f, -0.0089844f,
  +0.0613610f, -0.0905142f, -0.0874879f, -0.1275671f, -0.0302663f, +0.1196899f, -0.0732602f, +0.0986420f,
  -0.0123340f, +0.0819197f, +0.0434000f, +0.0238574f, -0.2316990f, -0.2501535f, +0.1480025f, -0.0943307f,
  +0.2397799f, +0.2629533f, -0.1115859f, -0.0734818f, -0.0222096f, +0.0733503f, +0.0948543f, -0.0184377f,
  -0.0334543f, -0.4117234f, -0.0674909f, +0.0359590f, -0.1096674f, +0.0073938f, -0.1607005f, -0.1200928f,
  +0.2774838f, -0.0978095f, +0.0723817f, +0.1444219f, -0.1300157f, +0.0672574f, +0.1385461f, +0.3289102f,
  -0.0297192f, +0.1116263f, -0.1095445f, -0.2019814f, +0.0293490f, +0.0278418f, +0.1533259f, -0.2274911f,
  +0.1432140f, -0.0006595f, +0.3200678f, -0.0837946f, -0.0769014f, -0.0906270f, -0.2214464f, -0.1597353f,
  -0.0678174f, -0.2363780f, -0.1819702f, +0.0128154f, +0.0612349f, +0.0427714f, +0.1626570f, +0.2013224f,
  +0.0918145f, +0.1586525f, -0.0831733f, +0.0192765f, -0.0027253f, +0.0668532f, +0.0048858f, -0.0718162f,
  -0.1123935f, -0.0192477f, -0.1130013f, -0.1369431f, +0.2555418f, -0.0531289f, -0.0736199f, -0.1203727f,
  -0.2434698f, -0.3100172f, +0.0834664f, -0.3298962f, +0.1080167f, -0.0567883f, +0.2013752f, -0.0482143f,
  +0.0109347f, +0.1125093f, -0.3767279f, -0.1557580f, -0.1045217f, -0.0669740f, +0.3219224f, +0.0776129f,
  +0.1754348f, +0.3009793f, -0.1313811f, +0.0123656f, +0.3020206f, -0.1124494f, -0.1215017f, +0.0566292f,
  -0.1008404f, +0.1008416f, +0.0023817f, +0.1425909f, +0.0776855f, -0.0183097f, -0.0948444f, +0.0404304f,
  +0.0675119f, -0.0195052f, -0.1676746f, +0.1322016f, +0.1461156f, -0.0602221f, +0.1623656f, -0.0423852f,
  -0.1205197f, +0.3570857f, -0.1484454f, +0.2728788f, -0.1021515f, +0.2108129f, +0.2387234f, +0.0893458f,
  +0.0646750f, +0.1064798f, -0.0012798f, -0.1673709f, -0.3015205f, -0.0785344f, +0.0083630f, -0.0116260f,
  -0.0336957f, +0.1718431f, +0.2115306f, +0.0651597f, -0.2276925f, +0.0190921f, -0.0488294f, -0.0461177f,
  -0.1606998f, -0.2588506f, +0.1029297f, +0.0591686f, -0.0812170f, -0.0893916f, -0.0163193f, +0.0904105f,
  +0.0607714f, -0.0945454f, -0.0386738f, -0.0430926f, -0.0619222f, +0.0292127f, +0.0223277f, +0.0456137f
);

const float biases[4] = float[4](
  +0.0048050f, -0.0115603f, -0.0204620f, +0.0359719f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer124 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2437045f, -0.0625607f, +0.1263412f, -0.0138023f, +0.1245583f, -0.0764200f, -0.0150568f, -0.0459322f,
  -0.0977884f, +0.2058589f, -0.0935225f, +0.0252365f, +0.2110693f, +0.0942258f, +0.1025300f, -0.1285704f,
  -0.1691362f, +0.0943685f, +0.0534819f, -0.0267551f, -0.0754496f, +0.0497311f, +0.0986824f, +0.1991493f,
  +0.1119307f, -0.1597908f, +0.2806659f, +0.0821314f, -0.0455408f, -0.0310339f, -0.2374168f, -0.2030161f,
  -0.0473984f, -0.0241412f, +0.0692862f, +0.0050928f, +0.0760771f, +0.2316381f, +0.1125929f, -0.0053066f,
  +0.0694107f, +0.0009780f, +0.1085945f, -0.2603288f, -0.3238070f, -0.0102958f, +0.0603081f, -0.0627219f,
  +0.2068355f, +0.0557225f, -0.0862889f, +0.0831027f, -0.0630971f, -0.2117008f, -0.1033957f, +0.0425993f,
  -0.2438316f, -0.1150888f, +0.1928566f, +0.1377227f, -0.0729549f, -0.0869080f, +0.2103134f, +0.0157272f,
  -0.0991605f, -0.0768617f, -0.0246837f, -0.0717113f, +0.1365841f, +0.1092195f, +0.1548029f, +0.2566047f,
  +0.1338514f, +0.0762978f, -0.0407640f, -0.1772266f, +0.0148379f, -0.0843548f, -0.0256186f, +0.0082259f,
  +0.1452960f, +0.2396886f, +0.1875112f, +0.0559534f, -0.0265687f, +0.0988711f, -0.0700673f, -0.0401220f,
  -0.4771563f, -0.0216495f, -0.0087228f, -0.1760202f, +0.1994682f, -0.1617017f, -0.1066687f, +0.0264059f,
  -0.1801505f, -0.1083349f, -0.1451749f, +0.0624535f, -0.2210357f, +0.0782877f, +0.1085996f, +0.4509331f,
  +0.2990388f, -0.0534962f, +0.0403201f, +0.0159840f, -0.1673769f, +0.1990386f, +0.2699402f, -0.2621297f,
  -0.0445960f, +0.1217387f, -0.0326771f, +0.0368583f, +0.1112703f, +0.0571730f, +0.2426065f, +0.1985233f,
  -0.1432839f, +0.2001010f, -0.0636931f, +0.0134455f, -0.0085601f, +0.0736773f, -0.0513576f, -0.0890072f,
  -0.2382057f, -0.0961409f, -0.2197152f, +0.0678648f, +0.0226426f, +0.1209912f, -0.0481393f, +0.0264121f,
  +0.2342863f, -0.1376593f, +0.2408878f, +0.0489692f, +0.0853540f, -0.0363708f, +0.1438771f, +0.3038887f,
  +0.3167600f, +0.2374762f, -0.1676466f, +0.1921428f, +0.0804126f, -0.2373419f, -0.0800534f, -0.0399210f,
  +0.0430583f, +0.4414604f, +0.2521008f, +0.0386927f, -0.0312840f, +0.0801092f, +0.0588524f, -0.4106127f,
  +0.0671789f, +0.0225666f, +0.0052566f, -0.1476840f, -0.1022603f, +0.0122063f, -0.2408901f, -0.1253849f,
  +0.0395119f, +0.0499183f, +0.1153327f, -0.1628814f, -0.1357887f, +0.0034684f, -0.0058288f, +0.0300129f,
  -0.3023631f, +0.0412972f, -0.0842124f, -0.1078481f, +0.2608780f, +0.0078931f, -0.2756793f, +0.1171587f,
  -0.0803799f, -0.1318242f, +0.2315574f, -0.0973519f, -0.0776084f, -0.0368608f, +0.0711308f, +0.2499479f,
  -0.1564998f, +0.1167874f, +0.2432878f, +0.1208761f, +0.1415703f, -0.0518006f, -0.2364471f, -0.0987037f,
  +0.0795042f, +0.0367431f, -0.0329610f, -0.0906181f, +0.0886406f, -0.0050986f, +0.0727094f, -0.2591889f,
  -0.1287694f, +0.3002474f, +0.2548275f, -0.2385644f, -0.2347276f, +0.0709324f, -0.0014680f, +0.1307150f,
  -0.0507523f, -0.1036481f, -0.0522019f, +0.0259111f, -0.1294322f, +0.0671532f, +0.0046452f, +0.2567810f,
  -0.0010418f, -0.1985975f, +0.0714219f, -0.1522350f, -0.0628551f, +0.3773920f, +0.1966381f, +0.1276673f,
  -0.3853648f, -0.0600646f, -0.3344907f, +0.1141351f, +0.2304251f, -0.1559514f, -0.0753438f, -0.0322081f,
  +0.0883882f, -0.1132663f, +0.0950051f, +0.0064299f, +0.2415642f, +0.1547729f, +0.0369359f, -0.3400936f,
  +0.0132095f, -0.0417574f, +0.1370207f, +0.2169148f, +0.0870163f, -0.0481418f, -0.1188216f, +0.2328257f,
  +0.0098397f, -0.0825053f, +0.1722569f, +0.0406064f, +0.1357139f, -0.0662025f, -0.2096667f, -0.2157065f,
  -0.0511059f, -0.1393235f, -0.0413870f, -0.1151737f, -0.1726369f, +0.1389328f, -0.0978565f, +0.0474091f,
  -0.2178493f, +0.0382822f, -0.0233069f, +0.1291066f, +0.1948643f, +0.0859502f, -0.0416712f, +0.0202008f,
  +0.0302538f, +0.0490325f, +0.0412605f, +0.2569120f, -0.0992502f, -0.0128580f, -0.1973353f, -0.0460512f
);

const float biases[4] = float[4](
  -0.0009780f, -0.0009623f, -0.0080708f, -0.0009295f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer124 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0244373f, -0.1032355f, +0.1519398f, -0.0777988f, -0.0429805f, -0.0523789f, +0.0288465f, +0.0100329f,
  -0.0165154f, +0.2712235f, +0.2655363f, -0.0595691f, -0.0430149f, +0.0785551f, -0.0256613f, +0.1897866f,
  +0.2600061f, -0.1510535f, -0.0124916f, +0.0736471f, -0.0042200f, -0.0805840f, -0.0272082f, -0.0586534f,
  -0.0264800f, +0.0485531f, +0.2487741f, +0.0035532f, -0.1745370f, -0.0441174f, -0.0964666f, +0.0486390f,
  +0.0373883f, -0.1865204f, -0.1880640f, -0.0405955f, -0.0568920f, -0.0070370f, -0.2461423f, -0.2113645f,
  -0.3489193f, +0.1242188f, +0.0480460f, +0.0052121f, -0.0942117f, -0.0282447f, +0.0780298f, -0.1066119f,
  -0.1435176f, +0.0144386f, -0.0718920f, +0.0354663f, +0.0612689f, +0.0539136f, -0.1147838f, +0.1273058f,
  +0.0650896f, +0.1399870f, +0.0688379f, +0.0537982f, +0.2354362f, +0.0393955f, -0.0788848f, -0.0688898f,
  +0.2923281f, +0.0517487f, +0.0067055f, +0.0931839f, -0.1284158f, -0.1303406f, -0.1103038f, +0.1080646f,
  +0.1187192f, +0.3292366f, -0.3010489f, +0.1045057f, +0.0229075f, +0.1225908f, +0.0081611f, +0.0395789f,
  +0.1987562f, +0.0001898f, +0.2809911f, +0.3556477f, -0.0310739f, +0.0919460f, -0.0547296f, +0.2192659f,
  -0.2838797f, -0.1173223f, +0.1041175f, +0.0051199f, -0.1992620f, -0.1213337f, -0.1534028f, -0.0984480f,
  +0.1523856f, +0.1457999f, -0.0258888f, -0.0105914f, -0.2315614f, -0.1052048f, -0.2125475f, -0.1181623f,
  -0.1785504f, +0.1938051f, +0.0084652f, +0.0225349f, +0.1174392f, -0.2571448f, -0.0229544f, +0.0882254f,
  +0.1261091f, +0.0789462f, -0.0196794f, +0.0656127f, -0.2691016f, -0.2029673f, -0.0406460f, +0.1008767f,
  +0.2729794f, +0.0774861f, +0.1688798f, -0.1726563f, +0.1051867f, -0.0840146f, +0.2173070f, +0.0277576f,
  -0.0699628f, +0.1956970f, +0.3317446f, +0.0416758f, -0.0150552f, -0.1661147f, +0.0660083f, +0.0531509f,
  +0.0920644f, -0.1877208f, -0.2236231f, -0.0739151f, +0.0787530f, -0.3087373f, -0.0085812f, -0.1573829f,
  -0.0952880f, -0.3033138f, -0.0307050f, +0.1913062f, -0.1155221f, +0.0562623f, -0.0373981f, -0.0688787f,
  -0.0388821f, -0.2921112f, -0.2191960f, +0.0382632f, -0.1225205f, -0.1583619f, -0.0682170f, -0.0854454f,
  +0.2661079f, +0.1106791f, -0.4211273f, -0.1078016f, -0.0437089f, +0.0829001f, +0.0495691f, -0.1019676f,
  +0.2662183f, -0.1846507f, +0.2500524f, -0.1278010f, +0.0666020f, +0.0860208f, +0.1408828f, -0.2034083f,
  -0.1162098f, +0.0866635f, -0.2559560f, -0.0870355f, +0.1616723f, +0.2000495f, -0.3626507f, +0.0521978f,
  +0.0424978f, +0.0223649f, +0.0620820f, +0.0053107f, -0.0529182f, +0.0460537f, +0.1631234f, -0.1161720f,
  +0.0907565f, +0.0375212f, -0.0771948f, +0.0737065f, +0.1720565f, -0.1561406f, +0.1171578f, -0.1553211f,
  -0.0705878f, +0.1383764f, -0.0650705f, +0.1503301f, +0.1837702f, +0.0262190f, -0.0754433f, +0.1960491f,
  -0.0710076f, -0.2068030f, -0.1027079f, -0.1744478f, -0.1291405f, -0.1080224f, +0.1857904f, +0.1737265f,
  -0.0804417f, -0.1158323f, -0.1743663f, +0.0287373f, +0.1007302f, -0.0497119f, +0.0291480f, +0.0121750f,
  +0.0318839f, +0.1368772f, -0.1704200f, +0.2031091f, +0.0512783f, +0.1356417f, +0.0315407f, +0.1892940f,
  +0.1494395f, +0.1019749f, +0.1930690f, +0.0976153f, -0.2216657f, -0.1142596f, -0.1951938f, +0.0687366f,
  -0.2257459f, +0.0210508f, +0.3290666f, -0.0505472f, +0.0147444f, -0.0444608f, -0.0041484f, +0.1742790f,
  -0.3306134f, +0.0235266f, -0.2432926f, -0.1394605f, +0.3008828f, +0.1900116f, -0.0146892f, -0.0782251f,
  -0.2834693f, -0.0788631f, -0.0641394f, +0.0064062f, +0.0030079f, -0.0373141f, -0.1116889f, +0.1586306f,
  +0.1036833f, -0.2028208f, +0.3122167f, +0.0500480f, +0.0367053f, -0.0396846f, -0.3142725f, -0.2682367f,
  +0.0667371f, +0.1395384f, +0.2766628f, -0.0265363f, -0.2120638f, -0.1808817f, -0.6409182f, -0.1718744f,
  +0.0682673f, +0.2203798f, -0.0482601f, -0.1566457f, +0.2829508f, +0.1367475f, -0.0659199f, +0.0834512f
);

const float biases[4] = float[4](
  -0.0223158f, -0.0084176f, -0.0072510f, +0.0258031f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer125 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1075612f, +0.1669370f, +0.0611216f, +0.0089918f, -0.0934536f, -0.1584833f, +0.1616719f, -0.0544709f,
  +0.1110217f, +0.0089617f, -0.0657962f, -0.1127399f, +0.1016251f, -0.1538490f, +0.0533052f, +0.2715776f,
  +0.0976939f, -0.1189509f, +0.3992824f, -0.0165916f, -0.1162864f, -0.2049857f, +0.0240967f, +0.0072889f,
  +0.1968394f, -0.0850613f, +0.2015184f, -0.0334555f, -0.3148223f, -0.0666359f, +0.2192660f, -0.0565207f,
  +0.0668361f, -0.1240561f, +0.1509582f, +0.0115246f, +0.0691331f, +0.0674715f, +0.1471522f, +0.3434226f,
  -0.3961823f, -0.0883501f, +0.1307221f, +0.0557689f, -0.1181087f, -0.3081454f, +0.3242917f, +0.2443736f,
  -0.1036649f, +0.1021781f, -0.0764507f, +0.1488831f, -0.0954762f, -0.1239202f, +0.0401662f, +0.2679217f,
  +0.2085519f, +0.0437503f, -0.0842333f, +0.0384628f, -0.2238589f, +0.1762905f, -0.0252815f, -0.1712104f,
  +0.1396581f, +0.1263407f, +0.1194262f, +0.0968981f, -0.0381941f, +0.1264453f, +0.0359648f, +0.2102686f,
  +0.0598259f, -0.0404860f, +0.2128880f, -0.0981964f, -0.0678736f, -0.0590902f, -0.1479901f, +0.1933120f,
  -0.0963827f, -0.3862408f, +0.2151238f, +0.0595842f, -0.0014906f, +0.1081248f, -0.0918764f, +0.0269615f,
  -0.2217613f, -0.0745850f, -0.0481553f, +0.0561438f, +0.1108367f, -0.3197659f, -0.0230495f, +0.1161437f,
  +0.3419414f, -0.2464068f, -0.0827347f, +0.1775305f, -0.0710975f, -0.1857053f, -0.0897729f, -0.0385673f,
  -0.1706975f, -0.2512792f, +0.1365553f, -0.2571523f, +0.1825341f, -0.3136639f, +0.0536585f, -0.1708528f,
  +0.1925422f, -0.3419413f, -0.0224103f, -0.1207575f, -0.1987363f, -0.0007247f, +0.1453974f, +0.0324392f,
  +0.0621606f, -0.0846359f, -0.1255236f, +0.0462777f, -0.0321255f, +0.0138003f, +0.1292762f, +0.0065891f,
  -0.0738540f, -0.3511802f, +0.1473489f, -0.1163858f, +0.2946422f, -0.0659010f, +0.2143131f, -0.0070443f,
  +0.0674883f, -0.0235119f, -0.1273937f, -0.2066179f, +0.2906605f, +0.0319230f, -0.1062475f, +0.1171024f,
  +0.2539847f, +0.1064226f, +0.0337757f, -0.3327577f, +0.1303370f, -0.2185416f, -0.3264071f, +0.0237902f,
  +0.0884001f, +0.0770005f, +0.3803671f, -0.6280175f, +0.1447127f, -0.3370218f, -0.0377956f, -0.1369822f,
  +0.1614686f, +0.0792031f, -0.0594771f, -0.0418616f, -0.0006522f, -0.0613855f, +0.0487403f, +0.0387240f,
  -0.3925826f, -0.0004458f, +0.1330392f, +0.4247229f, -0.2297660f, +0.1053503f, +0.0037093f, +0.2393842f,
  -0.1489797f, -0.1017749f, -0.1897280f, +0.4921722f, -0.1957113f, -0.0644445f, +0.2472828f, +0.1060217f,
  -0.1948143f, +0.0859807f, +0.2016866f, -0.0330655f, +0.1600839f, -0.0883970f, +0.0362601f, -0.1942716f,
  +0.1621035f, -0.2265773f, -0.0993201f, -0.1163279f, +0.2052763f, +0.1505985f, +0.0213118f, -0.0498929f,
  -0.1409263f, -0.1473091f, -0.1191826f, -0.1854977f, +0.0354590f, -0.0179641f, -0.2231246f, -0.0025092f,
  +0.0999060f, -0.1241569f, +0.0455724f, -0.0267259f, +0.0913713f, +0.0755056f, -0.0924277f, +0.1563321f,
  -0.1330042f, -0.1454480f, +0.1222730f, +0.0846597f, -0.1884303f, -0.0183519f, +0.0431035f, +0.0105106f,
  +0.0072384f, -0.0623460f, -0.0077028f, -0.1155487f, -0.0487157f, -0.0596217f, +0.1940035f, -0.1438638f,
  +0.1209608f, -0.0565349f, -0.1977417f, -0.1109122f, -0.0818956f, -0.2191481f, +0.2029058f, -0.0061661f,
  +0.0130739f, -0.1179741f, -0.0184448f, -0.0350391f, +0.0252402f, +0.1924886f, +0.0790211f, -0.0555905f,
  -0.0764949f, -0.0387806f, -0.1467196f, -0.0829465f, -0.0808396f, +0.0557942f, +0.0303973f, +0.1305774f,
  -0.2068577f, -0.1000734f, +0.0122496f, -0.0024192f, +0.0744353f, +0.1354845f, +0.1075365f, +0.0612266f,
  -0.1336955f, -0.1485222f, -0.1289592f, -0.0164743f, +0.0007502f, +0.0478452f, +0.3282418f, +0.1291071f,
  +0.1516854f, +0.0180944f, -0.0967950f, -0.0179358f, +0.1984316f, +0.0356755f, +0.1452252f, +0.0157143f,
  -0.0354919f, -0.2134282f, +0.2174546f, -0.0595384f, +0.0360313f, -0.1726008f, +0.0840011f, -0.0619593f
);

const float biases[4] = float[4](
  -0.0032914f, -0.0140628f, -0.0217687f, +0.0446793f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer125 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0586359f, -0.0390261f, +0.2844199f, +0.0795772f, +0.1288891f, +0.0041961f, +0.0946762f, +0.1956082f,
  -0.1318844f, -0.1493666f, +0.0676425f, -0.1517645f, -0.1461576f, +0.3163110f, -0.1560303f, +0.0940592f,
  -0.4032581f, -0.2649180f, +0.3427484f, -0.0747693f, +0.1531130f, +0.1137744f, -0.1075754f, +0.1982564f,
  +0.0654949f, -0.0380253f, +0.2450033f, -0.0305720f, +0.0583868f, +0.0093649f, +0.0757174f, +0.0268465f,
  +0.1466724f, -0.2967567f, -0.1814618f, +0.0679212f, +0.0188574f, +0.1768009f, -0.0243343f, +0.2484799f,
  +0.2375947f, +0.1385757f, -0.0218720f, -0.0060549f, -0.0162841f, +0.1531182f, -0.0183805f, -0.0414923f,
  -0.0688334f, +0.1820454f, -0.1097038f, +0.1228382f, -0.0648361f, +0.2317108f, -0.0987822f, +0.0249529f,
  +0.1548603f, -0.0797620f, +0.1596009f, +0.1570967f, -0.2803690f, +0.0272009f, +0.0911327f, +0.0916587f,
  +0.2857632f, -0.1981775f, +0.1595746f, -0.0392778f, -0.0627504f, -0.0358671f, -0.0253914f, +0.0271870f,
  -0.0415646f, +0.0685252f, -0.0521834f, +0.0618676f, -0.2413837f, +0.1760101f, -0.0332378f, +0.0473423f,
  -0.3478125f, -0.1525096f, +0.1066405f, -0.2052706f, +0.0655179f, +0.1347328f, -0.0737378f, +0.1040272f,
  +0.1150686f, +0.0433612f, -0.0560690f, +0.0632903f, +0.2311121f, -0.1480925f, -0.0112266f, -0.0651657f,
  -0.0351230f, -0.1508439f, +0.0715263f, -0.0476433f, -0.1091028f, -0.2207780f, -0.0335184f, +0.0430219f,
  +0.1678421f, -0.0036558f, -0.0859376f, +0.0577169f, -0.2168177f, -0.1991912f, +0.1728937f, +0.1767566f,
  -0.3727877f, +0.1507574f, +0.2138080f, +0.2316456f, -0.1256265f, +0.2130372f, -0.1879376f, +0.0228638f,
  -0.0204024f, +0.1316114f, +0.0006646f, +0.1050857f, -0.0316959f, -0.1030687f, -0.0419082f, +0.0320120f,
  +0.0473735f, +0.2588930f, -0.1391278f, +0.1110018f, -0.0698386f, +0.1268803f, -0.1979118f, -0.1240790f,
  +0.0003890f, +0.0279719f, +0.1409106f, +0.1682698f, -0.0786607f, +0.2242615f, -0.0184983f, +0.0625990f,
  -0.0485342f, -0.0283062f, +0.1944564f, -0.3156255f, +0.0881829f, +0.5541317f, -0.0912316f, -0.1295312f,
  +0.2542618f, -0.1357473f, +0.0087993f, -0.0580576f, +0.0460921f, -0.0162109f, +0.2231286f, +0.3450703f,
  +0.1466219f, -0.2209956f, +0.1133586f, -0.0181085f, +0.0746050f, +0.0653145f, -0.1259751f, +0.0793669f,
  -0.2747065f, -0.0956213f, +0.2591792f, -0.1099663f, -0.0191456f, -0.0515608f, +0.0246091f, -0.0774122f,
  +0.0306156f, +0.0678591f, -0.1799390f, -0.0675815f, +0.2634357f, +0.0322208f, -0.1546584f, +0.2224997f,
  +0.0918618f, -0.1360192f, +0.0846765f, -0.0516881f, -0.1697108f, -0.2907488f, +0.0145574f, -0.1696961f,
  +0.0946458f, -0.1648516f, +0.1697292f, -0.0181454f, +0.1220422f, -0.0504316f, +0.0140147f, +0.1612831f,
  +0.0100504f, -0.5408893f, +0.0850151f, -0.2977542f, +0.1784474f, +0.1256876f, +0.1576944f, +0.0762696f,
  +0.2776271f, +0.0812496f, -0.2087578f, -0.1161203f, +0.2658682f, -0.3570513f, +0.0012777f, +0.2190724f,
  +0.1052457f, +0.0949920f, +0.1755304f, +0.1473886f, -0.0359138f, +0.0401401f, +0.0580283f, -0.1103630f,
  -0.2704264f, +0.0082180f, +0.0778331f, +0.2188596f, +0.0353728f, +0.0038514f, +0.1912569f, +0.0366448f,
  -0.1349815f, +0.1119480f, +0.0693500f, +0.0892062f, -0.1365042f, +0.0415156f, -0.1730089f, +0.1346463f,
  -0.1389811f, -0.0865516f, +0.0350872f, -0.1491056f, +0.0720277f, +0.0094987f, +0.0219394f, -0.0103296f,
  +0.1166787f, +0.0305419f, -0.2465727f, +0.0716780f, +0.0993800f, -0.0561818f, +0.2189964f, -0.0925403f,
  +0.0137379f, -0.1495605f, +0.2681593f, -0.0242106f, +0.0584866f, +0.0256063f, -0.0146284f, +0.1077405f,
  +0.1202556f, -0.0189124f, +0.0956603f, +0.0355503f, -0.1719092f, -0.1543334f, +0.0264683f, +0.1084593f,
  +0.0441524f, +0.0632155f, +0.1327836f, +0.1553691f, -0.0441064f, +0.2763825f, +0.1328237f, +0.0841800f,
  -0.1752750f, -0.0191010f, -0.2077524f, +0.0608309f, +0.0567908f, +0.0258128f, +0.0477877f, +0.1351778f
);

const float biases[4] = float[4](
  -0.0173351f, +0.0396380f, -0.0370285f, +0.0138453f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer126 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0285608f, -0.0669643f, -0.0484947f, -0.3498796f, +0.0175826f, +0.0223467f, +0.4626721f, +0.0616575f,
  -0.0369351f, +0.0681001f, +0.0998206f, -0.0648832f, +0.0725160f, -0.2258753f, +0.1059734f, +0.0290873f,
  -0.0153903f, +0.0244017f, +0.1920754f, -0.0869445f, -0.0141405f, -0.0972135f, +0.1367825f, +0.0111589f,
  +0.0084335f, +0.0462005f, -0.0464823f, -0.1035750f, +0.1355006f, +0.1015025f, +0.2683407f, -0.3373454f,
  -0.0831038f, +0.1174022f, -0.3021173f, -0.3267028f, -0.1178550f, +0.1045877f, -0.2742451f, +0.1415183f,
  +0.0526290f, +0.0262059f, -0.2411691f, -0.0563711f, +0.1768748f, -0.1090259f, +0.1309402f, +0.0510163f,
  +0.1981567f, -0.0190868f, -0.0982357f, -0.0547298f, +0.2240770f, -0.1463132f, -0.0127630f, -0.0700088f,
  -0.1303466f, -0.0736153f, -0.2444156f, +0.1419647f, +0.0846777f, -0.0878201f, -0.0501842f, -0.1291539f,
  -0.1685421f, +0.0780137f, +0.2080031f, +0.0764825f, +0.4206805f, +0.0163504f, +0.1563690f, -0.0299981f,
  +0.2509835f, -0.0179358f, +0.0055664f, +0.0695166f, +0.0280026f, -0.0934157f, +0.0263338f, -0.0001246f,
  -0.2158331f, -0.0159960f, -0.0134066f, +0.2501288f, -0.2081048f, -0.0131767f, +0.0943768f, +0.0597495f,
  -0.1286346f, -0.0589210f, +0.1520640f, +0.2027396f, -0.1075111f, -0.0468050f, +0.1704093f, -0.0856756f,
  -0.1961558f, +0.0106403f, +0.0069506f, -0.1613291f, -0.2039631f, -0.3093838f, +0.0842169f, +0.2665858f,
  -0.1977181f, -0.0531056f, -0.4139051f, +0.2239365f, -0.0197332f, +0.0594759f, -0.1206323f, +0.2243641f,
  +0.0881670f, -0.0430112f, -0.0814837f, +0.1438066f, -0.0806349f, -0.0175896f, +0.0206028f, +0.0121024f,
  -0.0212987f, -0.0015107f, +0.0431075f, +0.0821011f, +0.0555860f, -0.1384901f, +0.1447212f, +0.3394250f,
  +0.0655145f, -0.0380808f, -0.1289107f, +0.0324734f, +0.1091556f, +0.2257640f, -0.0579048f, -0.1406948f,
  +0.0256561f, +0.0716939f, +0.1763613f, +0.1042363f, -0.1746913f, -0.0730183f, -0.0283034f, -0.1518012f,
  -0.0540613f, -0.0902962f, +0.1382679f, -0.0277768f, +0.1796418f, +0.0111732f, -0.0082184f, +0.1339168f,
  -0.0829612f, +0.0515226f, -0.0777513f, +0.0287666f, +0.0282951f, -0.1452073f, +0.0795247f, -0.0095926f,
  -0.2088341f, -0.0968173f, -0.0077271f, +0.1514052f, -0.0201800f, -0.3519849f, +0.1382175f, -0.0307598f,
  +0.0398517f, -0.1803370f, -0.0101461f, +0.0218442f, +0.1991939f, +0.1324648f, -0.1854044f, -0.4572163f,
  +0.1675725f, -0.1580176f, -0.0892604f, -0.0610714f, +0.0067786f, +0.0957825f, -0.0919619f, +0.1667089f,
  -0.2115842f, -0.1683584f, -0.0556218f, +0.0222688f, -0.3669717f, +0.0826297f, -0.0442597f, +0.0108432f,
  -0.0530749f, -0.1727156f, -0.2388152f, -0.3051647f, +0.0453764f, +0.1545551f, +0.1121949f, -0.1471432f,
  -0.0213658f, -0.1521485f, +0.1214981f, -0.0660396f, -0.0171083f, -0.2498889f, -0.0783205f, +0.0441942f,
  -0.1810118f, -0.0678797f, +0.0152811f, -0.0673901f, -0.1342365f, +0.1557266f, -0.4526728f, -0.1381726f,
  -0.2925588f, +0.0687265f, -0.0227648f, +0.1060846f, +0.1308173f, -0.3535426f, -0.0641998f, +0.0486353f,
  +0.0896385f, -0.0471552f, -0.0549016f, +0.2923794f, -0.1343405f, -0.3765125f, -0.0155467f, -0.0479934f,
  +0.3275789f, +0.0560352f, -0.1672062f, -0.2709523f, +0.0133634f, -0.1089133f, -0.0743490f, -0.0253229f,
  -0.0029769f, -0.0472696f, -0.2332032f, +0.2626326f, -0.0428542f, -0.0512373f, +0.0604956f, -0.0442355f,
  -0.1547612f, -0.1115843f, +0.3072214f, -0.1582025f, +0.0725050f, -0.1842795f, +0.0992922f, -0.1620105f,
  -0.0426992f, +0.2809198f, +0.2442754f, +0.0407807f, +0.1752361f, +0.1425477f, -0.0384496f, +0.0632262f,
  +0.1860430f, +0.1951568f, -0.0522355f, +0.0778938f, +0.0124118f, +0.0649884f, +0.0140278f, -0.4138262f,
  +0.0202088f, +0.0826354f, -0.1100412f, +0.0692282f, +0.1667390f, -0.1205299f, +0.1008511f, +0.1319900f,
  +0.0559558f, -0.0804893f, -0.2173561f, -0.0330153f, -0.1609822f, +0.1066894f, +0.0344793f, -0.0444247f
);

const float biases[4] = float[4](
  -0.0161791f, -0.0071670f, -0.0054114f, -0.0019222f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer126 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0533609f, -0.0825555f, -0.1133016f, -0.1732655f, +0.0342167f, +0.0409470f, +0.1633198f, +0.0735110f,
  +0.0038555f, -0.0011230f, +0.0520163f, -0.2492626f, +0.0410602f, +0.0570529f, +0.0163076f, -0.0406550f,
  -0.0381493f, +0.0344165f, -0.0158044f, -0.0157137f, +0.1868362f, -0.0681109f, +0.0988459f, +0.0301523f,
  -0.0242717f, +0.0258979f, -0.0971977f, +0.1324168f, +0.0429454f, -0.2281817f, -0.0306421f, +0.0860669f,
  +0.0776372f, -0.0730023f, +0.1493852f, +0.0750056f, +0.2637307f, +0.1352227f, +0.2696102f, +0.0340016f,
  +0.0313592f, -0.0243224f, -0.2161360f, +0.1433371f, +0.1443739f, -0.0049651f, +0.0788836f, +0.0837029f,
  +0.0727110f, +0.2299924f, -0.0233123f, +0.1001057f, -0.0603833f, +0.1502656f, +0.1062728f, -0.0978632f,
  -0.1060813f, +0.1699848f, -0.3319378f, +0.1223421f, -0.1151428f, -0.1027225f, +0.3474327f, -0.0380140f,
  -0.1071432f, -0.0398734f, -0.0674975f, +0.1327772f, -0.0066490f, +0.1133562f, -0.0954062f, -0.0589070f,
  -0.0325853f, -0.0169634f, +0.0975755f, -0.0815237f, +0.0517447f, -0.1294543f, +0.1617777f, -0.2119533f,
  +0.3353134f, +0.0464247f, +0.1492096f, +0.0457326f, -0.0838677f, -0.1364549f, -0.1448337f, -0.0589944f,
  -0.1473176f, +0.0433377f, +0.2353698f, +0.1005948f, -0.1493501f, +0.0742614f, +0.0083690f, +0.1410951f,
  -0.0668538f, +0.0328221f, +0.1252583f, -0.1025602f, -0.3681974f, +0.1508529f, -0.0495938f, +0.2057025f,
  -0.0826405f, +0.2521490f, -0.5551408f, -0.4137398f, -0.0170321f, +0.1095056f, +0.0857640f, +0.1415916f,
  +0.2796307f, +0.0472495f, -0.1543274f, +0.1067450f, -0.3482893f, -0.0237121f, +0.1834876f, +0.0248220f,
  -0.1838007f, -0.0047849f, +0.0504563f, +0.0657636f, -0.0361180f, -0.0832561f, +0.0891885f, -0.0402010f,
  +0.0244023f, +0.0591622f, +0.1063443f, +0.0570385f, -0.0312392f, -0.2939293f, +0.0802514f, -0.0692455f,
  +0.1356183f, +0.0276746f, -0.0357122f, -0.1783186f, +0.2170689f, -0.0332846f, -0.0673178f, +0.0402825f,
  -0.1756561f, -0.0448142f, -0.0038090f, +0.4246644f, +0.0212332f, +0.0608665f, +0.0701239f, -0.1330464f,
  -0.0966117f, +0.0262027f, +0.1191021f, -0.1066379f, -0.0028059f, +0.1376521f, -0.2137903f, +0.0893067f,
  -0.2482048f, -0.1107446f, -0.1282965f, +0.1475606f, -0.0485582f, +0.1025243f, -0.0711986f, +0.1412869f,
  -0.0966704f, -0.0289345f, +0.0086657f, +0.0975581f, +0.0072424f, +0.0106175f, -0.3579521f, -0.2103254f,
  +0.2109395f, +0.1784345f, +0.3295152f, -0.1132465f, -0.3514184f, +0.1053802f, -0.1227650f, +0.1020350f,
  -0.0895957f, +0.0007237f, -0.0261277f, -0.2282249f, +0.3838440f, +0.0536327f, +0.0377193f, -0.1664166f,
  +0.0678584f, -0.0730390f, +0.0486386f, +0.0483410f, -0.1210010f, +0.0047902f, +0.1321878f, +0.1952447f,
  +0.1026032f, +0.1240045f, -0.0501035f, -0.0495180f, -0.1042206f, +0.0348375f, +0.0520827f, +0.0329053f,
  -0.1780040f, +0.1617764f, +0.0053959f, -0.0197939f, +0.1675186f, -0.0977513f, -0.0128423f, +0.0653953f,
  +0.0030100f, +0.0481313f, -0.0488378f, +0.1186226f, -0.0180119f, -0.0912969f, -0.0995158f, +0.0212892f,
  -0.0846692f, +0.0041216f, -0.0150483f, +0.0264703f, +0.0325171f, -0.1994202f, -0.1926714f, -0.1232552f,
  -0.0388783f, -0.0584519f, +0.0211023f, -0.0950885f, +0.1916599f, +0.1419279f, +0.0618356f, -0.0222869f,
  -0.2121547f, -0.1665013f, -0.0770104f, -0.1081523f, +0.2462377f, -0.1468948f, -0.0413780f, -0.1787332f,
  -0.0066000f, -0.2453341f, -0.1208195f, +0.1779445f, +0.0263123f, -0.4411843f, +0.0039621f, +0.2323345f,
  -0.0361533f, -0.1230360f, +0.1996217f, -0.0625337f, -0.2111439f, +0.0547194f, -0.0641242f, +0.1031661f,
  +0.2644842f, -0.0814384f, +0.1495279f, -0.0347373f, -0.1408997f, -0.1228657f, -0.0411529f, -0.0790025f,
  +0.0925537f, -0.0437035f, -0.0776798f, +0.0540753f, -0.2735426f, -0.0515486f, -0.1189436f, +0.0877706f,
  -0.0951101f, -0.0388209f, +0.1524331f, -0.0417667f, -0.2706524f, +0.0128853f, +0.1573359f, +0.0573729f
);

const float biases[4] = float[4](
  -0.0172498f, -0.0338244f, +0.0057587f, +0.0216377f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer127 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0209777f, -0.0592816f, +0.1806204f, +0.1172935f, -0.0386230f, +0.0658176f, -0.0683933f, +0.0975251f,
  -0.3905299f, -0.1570006f, -0.0013522f, +0.0218823f, -0.1417446f, +0.2533697f, -0.0289184f, +0.0967929f,
  -0.1422076f, -0.1281314f, -0.0856117f, -0.0505576f, +0.0016671f, -0.0630773f, +0.0663136f, +0.0705232f,
  -0.0170827f, -0.0509606f, +0.0434687f, -0.0979043f, -0.2364945f, -0.0372562f, -0.0803296f, +0.0545201f,
  -0.1246199f, +0.0733052f, -0.2222639f, -0.0925269f, +0.0564935f, -0.0172894f, +0.1822710f, -0.1835743f,
  -0.1948154f, +0.2092493f, +0.0472326f, +0.1548505f, +0.1256261f, +0.1318671f, +0.0175748f, -0.1898337f,
  -0.0666569f, -0.1188175f, -0.2156138f, -0.0005575f, +0.1664228f, -0.0517205f, +0.0655102f, +0.0726469f,
  -0.1092430f, +0.0116702f, +0.1628864f, +0.1178100f, +0.0747617f, +0.0264651f, -0.1299380f, -0.0574576f,
  -0.2599513f, +0.0763550f, +0.2334124f, +0.0238263f, +0.0182660f, +0.1106539f, -0.2136855f, -0.0112923f,
  -0.0550590f, -0.5489413f, +0.0244501f, +0.1744254f, -0.0490853f, +0.0143469f, -0.2484974f, +0.2013651f,
  +0.2394737f, +0.4057404f, +0.0568346f, +0.2752053f, -0.3117733f, +0.2455019f, +0.3277313f, -0.1686715f,
  -0.1393916f, -0.1810465f, -0.0194451f, -0.3140158f, +0.0126717f, -0.1478805f, -0.0691310f, -0.0316214f,
  +0.0240147f, -0.4756056f, +0.0886707f, +0.1020382f, -0.1299915f, -0.3322835f, -0.1173525f, +0.1031745f,
  +0.0073782f, +0.3077778f, +0.2538033f, -0.0395100f, -0.0025395f, +0.0958998f, +0.3208065f, +0.1583537f,
  -0.2638068f, +0.1619943f, +0.0239340f, +0.1615946f, +0.4130312f, +0.1892960f, -0.0485670f, -0.1728782f,
  +0.2306757f, -0.1068674f, +0.0401458f, +0.0857276f, +0.1544914f, +0.1586737f, +0.1166506f, +0.1587779f,
  -0.0468500f, +0.1415358f, -0.1322060f, +0.1292438f, -0.0669695f, +0.0217565f, +0.2726811f, +0.0451749f,
  -0.0573851f, +0.0588548f, +0.0943396f, +0.0239675f, +0.1093326f, +0.1015455f, +0.0028754f, -0.0066538f,
  -0.0995618f, +0.0493831f, +0.0273772f, +0.0717435f, -0.0226989f, +0.0942909f, +0.0652046f, -0.0838513f,
  -0.0996700f, +0.0552030f, -0.0758032f, -0.2164170f, -0.1120624f, +0.0741981f, +0.0618803f, -0.0070049f,
  -0.1542086f, -0.1344735f, +0.1513457f, +0.0739668f, -0.0874584f, -0.1007963f, -0.0883450f, -0.2455106f,
  +0.1966455f, -0.2313265f, +0.0759542f, -0.0483987f, -0.0971939f, -0.1762095f, -0.1032618f, +0.2636285f,
  +0.2245119f, +0.3232149f, -0.1710736f, -0.3660858f, +0.2617539f, +0.0448585f, +0.2823069f, -0.5157175f,
  +0.1131624f, +0.0168715f, +0.0423833f, +0.1403718f, -0.2094472f, -0.0646551f, -0.1254188f, -0.5005974f,
  +0.2734241f, -0.2497953f, -0.0111468f, +0.0566497f, +0.0244134f, -0.1497205f, -0.0968738f, +0.2231249f,
  +0.0459671f, +0.3470794f, -0.1765155f, +0.0322283f, +0.0920623f, +0.1621699f, +0.0950069f, +0.1264029f,
  -0.1867962f, +0.0553551f, +0.0624587f, +0.0692206f, -0.1190942f, +0.0417215f, +0.0023795f, -0.2925857f,
  +0.0214889f, -0.0205846f, -0.1298480f, +0.1232212f, +0.0013467f, +0.0977161f, -0.1325764f, -0.2071748f,
  +0.1934849f, +0.0266298f, -0.0311730f, -0.1221242f, -0.0946256f, -0.2449644f, -0.0720496f, -0.2391229f,
  +0.3403706f, +0.0874299f, +0.0178342f, +0.0435006f, +0.5437503f, -0.0548105f, -0.3142590f, -0.6051598f,
  +0.1002376f, +0.1203249f, -0.0344634f, -0.1316907f, +0.2336906f, +0.2160329f, +0.1116193f, -0.2489252f,
  -0.1705403f, +0.3002057f, -0.1467856f, +0.1120297f, +0.0062529f, +0.1269106f, -0.0945724f, -0.0755418f,
  -0.0147062f, +0.0395922f, -0.0211247f, -0.0757298f, +0.1013789f, -0.0136896f, +0.0569150f, +0.0120557f,
  -0.1585798f, +0.1240118f, +0.1082741f, +0.0074615f, +0.0771195f, +0.1156050f, -0.1000711f, +0.3686988f,
  +0.0687883f, +0.0039471f, -0.2385600f, -0.2548269f, +0.0892413f, +0.1061609f, -0.1642241f, -0.2076157f,
  -0.0861255f, -0.0799888f, -0.0561192f, -0.2821165f, +0.2721165f, -0.3413453f, -0.4057382f, -0.2107820f
);

const float biases[4] = float[4](
  +0.0110114f, -0.0175899f, +0.0008647f, -0.0607752f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer127 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1345893f, +0.1771920f, -0.0176069f, -0.1212153f, -0.0716401f, +0.0613935f, +0.0140332f, +0.1597648f,
  +0.0295932f, +0.0914395f, +0.0611452f, -0.0873077f, -0.0787155f, -0.0179041f, -0.1695941f, +0.1408425f,
  +0.2420055f, -0.1469809f, +0.0333515f, -0.1326176f, -0.2226599f, -0.1522952f, -0.2203084f, -0.0137816f,
  -0.0155131f, -0.0278600f, +0.0241785f, -0.2112583f, -0.0680805f, +0.1440873f, -0.3407744f, -0.1920449f,
  +0.1543347f, -0.0858799f, +0.1360409f, -0.0246225f, -0.0588459f, +0.0802665f, -0.0209225f, +0.2682825f,
  +0.1971847f, -0.2071661f, +0.2395318f, -0.0395997f, +0.0486214f, +0.0689597f, -0.0212675f, +0.0090996f,
  -0.3189038f, -0.1746452f, +0.0950908f, -0.2425931f, -0.2435254f, -0.0645255f, +0.0514488f, +0.0893042f,
  +0.0011381f, -0.2623129f, -0.2154936f, -0.2217728f, -0.2345783f, +0.2471770f, +0.1453680f, -0.1561685f,
  +0.0502532f, +0.0532378f, +0.2383905f, -0.0905782f, +0.1009437f, -0.0193659f, -0.2054908f, +0.1982221f,
  -0.2134187f, +0.1535731f, +0.3091896f, -0.0921543f, -0.2047296f, +0.0945685f, -0.2814418f, +0.1692672f,
  +0.0947472f, +0.0598056f, +0.2504986f, -0.1786247f, +0.2711104f, +0.0339065f, -0.1399667f, -0.2010237f,
  +0.2637093f, +0.2579483f, -0.1088779f, +0.1728519f, -0.0120994f, -0.0417810f, -0.0434923f, +0.1201986f,
  +0.1948359f, +0.2315426f, +0.1793754f, +0.1573147f, -0.0537523f, +0.2647026f, -0.1822727f, +0.0986662f,
  +0.1134569f, -0.1274227f, +0.1002523f, -0.0222771f, +0.1119435f, -0.1047947f, -0.0912988f, +0.0609044f,
  +0.0928383f, -0.1655267f, +0.1039777f, -0.1678801f, +0.1363844f, -0.1128090f, -0.1208477f, -0.2636352f,
  -0.2147210f, -0.1928114f, -0.0388385f, -0.1745439f, -0.3147270f, -0.1394887f, -0.0311131f, -0.3546512f,
  +0.0044882f, -0.0972754f, -0.0608704f, -0.2480735f, +0.0932129f, +0.1748873f, -0.0262138f, +0.3695982f,
  +0.1002228f, +0.0060016f, +0.0583501f, -0.0741483f, -0.0607210f, +0.0420889f, +0.2494340f, -0.0678940f,
  -0.2270243f, +0.0334679f, -0.1059330f, -0.1068458f, +0.0996846f, -0.0139111f, +0.0774001f, -0.0423674f,
  -0.3414339f, -0.0008766f, -0.1256059f, -0.1264099f, -0.1392739f, +0.0608407f, -0.0956934f, +0.0475156f,
  +0.0910851f, +0.2181232f, +0.0718655f, +0.1364983f, +0.1774392f, +0.1560716f, -0.1595660f, -0.2030160f,
  +0.1274409f, -0.0090794f, -0.3357063f, +0.1130118f, -0.0219329f, +0.0509155f, -0.1678414f, +0.0760663f,
  -0.1133353f, -0.0477795f, -0.1802839f, -0.0101888f, -0.0809260f, -0.0036588f, -0.0157430f, +0.0188364f,
  -0.0456264f, +0.0269657f, +0.0517134f, +0.0882752f, +0.0775182f, -0.0070873f, +0.0124745f, +0.0155530f,
  +0.0619361f, -0.1288071f, -0.0259655f, -0.0440306f, +0.0598000f, -0.0331665f, +0.0806376f, -0.0293802f,
  -0.1765233f, +0.0018007f, +0.0544498f, +0.0071319f, +0.0082223f, +0.1019060f, -0.0965147f, +0.0469737f,
  -0.0332276f, +0.0855887f, -0.0637685f, +0.0529065f, -0.1565612f, -0.0107659f, +0.0146478f, -0.1544698f,
  +0.1772442f, +0.0443347f, -0.0606672f, +0.1264153f, -0.3055760f, +0.0169579f, -0.0304514f, +0.0430903f,
  -0.1653230f, -0.0235459f, +0.1176392f, +0.0226815f, +0.0272724f, -0.1842229f, +0.0121719f, +0.3800065f,
  -0.1763812f, +0.0041485f, -0.1511160f, +0.0228102f, +0.0801727f, -0.0799920f, +0.1500008f, -0.0785639f,
  +0.0714557f, +0.1277119f, +0.2919026f, +0.0830685f, +0.1915322f, -0.0256601f, +0.2930869f, -0.1201446f,
  +0.0609150f, +0.0404477f, +0.4703612f, +0.2371498f, -0.2199215f, +0.0676595f, +0.0350868f, -0.0159089f,
  -0.3246860f, +0.1297145f, +0.0653834f, +0.1061126f, -0.1228209f, +0.0689369f, +0.0077230f, -0.1448674f,
  +0.0114345f, +0.1433335f, +0.2427768f, -0.0341557f, -0.2184558f, -0.2133798f, +0.0974031f, -0.3148742f,
  +0.0894398f, +0.1324712f, +0.2639461f, +0.1358316f, -0.1175554f, -0.1106910f, -0.1674193f, +0.1209744f,
  -0.2068708f, -0.0245051f, -0.0149040f, -0.0185444f, +0.0702036f, -0.0014060f, +0.2723519f, -0.1599445f
);

const float biases[4] = float[4](
  -0.0463464f, -0.0431167f, -0.0028034f, -0.0059502f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer128 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!BIND FEAT_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

#define TEX_BIND_L3_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L3_TEX FEAT_L0_tex
#define TEX_BIND_L3_POS FEAT_L0_pos
#define TEX_BIND_L3_SIZE FEAT_L0_size
#define TEX_BIND_L3_PT FEAT_L0_pt

const float kernels[288] = float[288](
  -0.0501924f, +0.2451133f, +0.1360251f, -0.1030067f, +0.0814845f, +0.2159186f, +0.0558635f, +0.0232524f,
  -0.0329482f, -0.0800563f, -0.0194489f, -0.0481453f, -0.0531765f, +0.2831410f, +0.0240842f, -0.0066420f,
  -0.0787392f, +0.0166998f, +0.0106976f, +0.0327999f, -0.0723731f, -0.0284705f, -0.2145787f, -0.0864608f,
  +0.2159741f, -0.0130945f, +0.2858837f, -0.0642816f, +0.3072115f, +0.2876183f, -0.2869925f, +0.0160028f,
  -0.1020106f, +0.1419558f, +0.1551045f, -0.1292597f, +0.0574432f, +0.0130187f, -0.1266087f, +0.3161023f,
  +0.2029402f, -0.2373567f, -0.1561119f, +0.0325453f, +0.0933025f, +0.0776649f, +0.1738962f, +0.0624722f,
  -0.2197210f, -0.0168083f, -0.0445724f, -0.0086029f, +0.0781812f, +0.0473694f, -0.0191260f, -0.0913973f,
  +0.1183158f, +0.2180608f, +0.0686853f, +0.0492109f, -0.1353633f, -0.1040363f, -0.4099213f, +0.2407672f,
  -0.0565550f, -0.0290853f, +0.0533540f, +0.1896996f, +0.0715419f, -0.0466411f, -0.2202196f, -0.2259987f,
  -0.0661641f, -0.0932440f, -0.0617380f, +0.1305283f, -0.2605368f, -0.2836724f, +0.0237157f, -0.0682320f,
  +0.0509754f, -0.0899545f, -0.0925155f, +0.0245170f, +0.1680899f, -0.0224537f, +0.2452437f, +0.1358931f,
  +0.1620448f, +0.0332604f, +0.0157386f, -0.1852467f, +0.0412974f, +0.1884974f, +0.1634818f, -0.2176504f,
  +0.0417184f, -0.0209882f, +0.0010903f, -0.0005805f, -0.0870043f, +0.1811570f, +0.1397398f, -0.3847773f,
  -0.2003795f, +0.1772047f, -0.0286637f, +0.1070478f, -0.1872520f, -0.1180567f, +0.0347116f, -0.1304557f,
  -0.1941929f, -0.1202286f, +0.0330588f, +0.1682883f, -0.1284328f, +0.0386653f, -0.2128914f, -0.0488340f,
  -0.0873407f, +0.3424990f, -0.1751081f, -0.1061401f, -0.0207951f, -0.0100198f, -0.2228263f, -0.2535092f,
  +0.1949341f, +0.1419619f, +0.0178344f, -0.0588136f, +0.0677046f, +0.0785488f, -0.0745378f, +0.1727239f,
  +0.0521187f, -0.2408114f, +0.1441563f, -0.0867996f, -0.0786751f, -0.1893806f, +0.0306732f, -0.1043362f,
  -0.0233337f, +0.1291915f, +0.0835310f, +0.1979033f, -0.2858776f, -0.0954413f, +0.0416769f, -0.0279986f,
  +0.0668735f, -0.0192790f, +0.3220231f, +0.0298212f, +0.0546272f, -0.0459264f, -0.0339824f, +0.0806272f,
  +0.1218194f, +0.1738680f, -0.0886572f, +0.1005709f, +0.3153276f, -0.1745327f, -0.0065587f, -0.1731266f,
  +0.0978511f, +0.2457587f, +0.3166580f, -0.3331495f, +0.0627235f, +0.3278548f, -0.1590502f, +0.0970921f,
  -0.2504794f, -0.1691234f, -0.1245411f, +0.5138889f, +0.0756061f, +0.0824499f, -0.1643117f, -0.0211964f,
  -0.2010610f, +0.1463057f, -0.0433720f, +0.0438017f, +0.0717089f, -0.3489997f, -0.0722893f, -0.1405258f,
  +0.0061068f, -0.0975181f, +0.0441159f, +0.1133285f, -0.0396745f, +0.0034662f, +0.0097218f, +0.0980351f,
  -0.2248254f, +0.0234333f, -0.0566591f, -0.1750990f, -0.3124327f, +0.2373562f, -0.3013501f, -0.1441734f,
  +0.0295280f, -0.0433351f, +0.1154533f, +0.1231166f, +0.0519552f, -0.2121575f, -0.1278909f, +0.0254113f,
  +0.0955989f, +0.0852747f, -0.0977996f, +0.1755150f, +0.0921550f, -0.1486849f, -0.0434773f, +0.0953927f,
  +0.2911418f, -0.1155244f, -0.0073293f, +0.2726243f, -0.0761287f, -0.0243825f, -0.1494233f, -0.1770579f,
  +0.2483385f, -0.1118368f, -0.2543920f, +0.3519427f, +0.1236701f, +0.0159691f, -0.0622369f, +0.2608424f,
  -0.1707104f, +0.2484429f, -0.0623759f, -0.1119606f, -0.1824106f, +0.0054174f, +0.0247908f, +0.1200712f,
  -0.2721249f, -0.5828341f, -0.1667551f, +0.0071081f, +0.2450304f, +0.2484182f, -0.1209577f, +0.1104541f,
  +0.0610962f, +0.3396072f, +0.1967420f, +0.1446462f, -0.1792652f, +0.1092485f, -0.0469305f, -0.0784054f,
  -0.0574704f, -0.3511859f, +0.0218496f, -0.2004773f, -0.1250936f, -0.0863760f, -0.0887887f, -0.0255507f,
  +0.1976185f, -0.0988829f, -0.0538853f, -0.2022911f, +0.1443013f, -0.1025420f, +0.2027765f, +0.0357149f,
  +0.1119138f, +0.1099061f, -0.2644559f, +0.0497119f, -0.1483997f, +0.2267206f, +0.0149974f, +0.2065105f
);

const float biases[4] = float[4](
  -0.0525007f, -0.0018727f, -0.0057737f, +0.0000082f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)) + TEX_BIND_L3_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer128 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!BIND FEAT_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

#define TEX_BIND_L3_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L3_TEX FEAT_L1_tex
#define TEX_BIND_L3_POS FEAT_L1_pos
#define TEX_BIND_L3_SIZE FEAT_L1_size
#define TEX_BIND_L3_PT FEAT_L1_pt

const float kernels[288] = float[288](
  -0.0176449f, +0.0876560f, -0.0858598f, -0.0999994f, +0.0220154f, +0.3186058f, +0.0460169f, +0.0636686f,
  +0.0931823f, +0.0314204f, +0.0859362f, +0.0951546f, +0.0651025f, +0.0989470f, +0.1776412f, -0.1057523f,
  +0.1832151f, +0.0046546f, +0.1565730f, -0.0619912f, +0.1498704f, +0.3020367f, +0.0548162f, +0.0882542f,
  -0.3139546f, -0.0158798f, +0.0458623f, -0.1013098f, -0.1155776f, +0.1673643f, +0.1303496f, -0.0462716f,
  -0.0164975f, +0.1055123f, -0.0508543f, +0.0069461f, +0.1840295f, +0.0819091f, -0.1152002f, -0.0035934f,
  +0.1293205f, -0.1635858f, -0.0060126f, +0.0105469f, -0.0240095f, +0.1993726f, -0.0659888f, +0.0652659f,
  +0.1640117f, +0.0770225f, -0.2199716f, -0.0401409f, +0.3038704f, +0.0748239f, -0.2566803f, -0.1677829f,
  +0.0728590f, -0.1322581f, -0.0956964f, -0.0394833f, +0.4015766f, +0.0611056f, -0.0298782f, -0.0053173f,
  -0.0992289f, -0.1082394f, -0.1872580f, +0.2020650f, +0.0368698f, -0.2833790f, -0.0152158f, +0.0144663f,
  -0.1559968f, +0.1359508f, -0.0638730f, +0.0607729f, -0.0758884f, +0.0787231f, -0.1622010f, -0.0087088f,
  +0.0035421f, -0.1367412f, -0.0413889f, +0.2178262f, -0.0664302f, +0.2534408f, +0.0866190f, +0.1331510f,
  -0.0631102f, +0.1659581f, +0.1079209f, -0.0281417f, -0.2198285f, +0.2153267f, -0.1225203f, -0.1673090f,
  +0.0484198f, -0.0019676f, +0.0776115f, -0.0790409f, -0.1948219f, +0.1155374f, -0.2137708f, -0.0681623f,
  -0.1428163f, +0.1011159f, +0.2392102f, -0.0007786f, -0.0730556f, -0.0018566f, +0.1944610f, +0.1987244f,
  -0.2088675f, -0.2350032f, -0.1576952f, +0.0625963f, -0.1626408f, -0.2790278f, -0.4163571f, -0.0620258f,
  -0.0336658f, -0.0766187f, +0.1084051f, +0.3711778f, +0.2395329f, -0.1043888f, -0.1097847f, +0.1218949f,
  -0.3855129f, +0.1106764f, +0.0006083f, +0.2357946f, -0.2731643f, +0.2310411f, -0.3984756f, -0.0312344f,
  -0.2754092f, -0.0755987f, -0.0137370f, +0.0281972f, -0.0545285f, -0.0448519f, +0.1731451f, -0.1381631f,
  +0.2958365f, -0.0475414f, +0.0113191f, +0.0465506f, -0.1098751f, +0.1019827f, +0.0441594f, -0.0308397f,
  +0.0701891f, -0.2198913f, -0.2521705f, -0.2247347f, -0.1222043f, +0.1334639f, +0.3454245f, +0.1619486f,
  -0.0575583f, +0.0248678f, -0.0000215f, +0.0167224f, -0.0835109f, -0.1303049f, +0.0235359f, -0.0617548f,
  -0.0261153f, -0.2234811f, +0.1010546f, +0.0115950f, -0.0493370f, +0.0492091f, +0.0044100f, +0.0176665f,
  -0.1107394f, +0.1746908f, +0.1208076f, -0.1597949f, -0.0328203f, -0.1069209f, +0.0750141f, -0.0004188f,
  +0.1252086f, -0.3066724f, -0.1351945f, -0.0706360f, -0.1015113f, +0.2345470f, -0.0497145f, +0.1006612f,
  +0.1714063f, -0.1030711f, -0.0666897f, -0.1321974f, +0.1997303f, -0.0365514f, +0.2181483f, -0.0738847f,
  +0.0863198f, +0.2977462f, -0.2490451f, +0.0434369f, +0.0425769f, +0.1526116f, +0.0107908f, +0.0132652f,
  -0.0480707f, -0.2019162f, +0.1482679f, -0.0751384f, +0.1020720f, +0.0331514f, +0.1776018f, -0.0222345f,
  +0.2201749f, -0.0530565f, +0.0036596f, +0.2846904f, -0.3639769f, +0.1227129f, +0.0117413f, +0.0100369f,
  -0.0968747f, +0.0833051f, +0.0379198f, -0.1150935f, +0.2181595f, -0.0135931f, -0.0520163f, -0.0175308f,
  +0.1811045f, -0.0291263f, -0.0519278f, -0.1055196f, -0.1218793f, +0.0748103f, -0.2002067f, -0.0137693f,
  +0.1914898f, +0.0988913f, -0.3680757f, +0.0476200f, -0.0253410f, +0.0145954f, +0.1784138f, -0.2752982f,
  +0.2808168f, -0.0897950f, -0.2694041f, +0.2299800f, +0.1357107f, -0.2094612f, +0.2583733f, +0.1077295f,
  -0.0470951f, +0.0575384f, -0.0505599f, -0.0329378f, +0.1805424f, -0.0547184f, +0.0538678f, +0.0201527f,
  -0.2392636f, +0.1395853f, -0.1051552f, +0.1716412f, -0.1338576f, -0.0921521f, +0.1892070f, -0.0795343f,
  +0.1808265f, -0.1766102f, +0.0635822f, +0.0827039f, -0.0166022f, +0.0629426f, +0.2821243f, -0.0266560f,
  -0.0506985f, -0.0700912f, +0.0006724f, +0.0573297f, -0.2185592f, +0.0275415f, +0.0455767f, -0.2717258f
);

const float biases[4] = float[4](
  -0.0284128f, -0.0392471f, +0.0090374f, +0.0243230f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)) + TEX_BIND_L3_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer129 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0470572f, -0.0423245f, -0.1638436f, +0.1384484f, +0.1014695f, +0.1504491f, -0.0580979f, +0.0006565f,
  +0.1975976f, -0.0777859f, -0.0906047f, +0.1622429f, -0.2900846f, +0.0531088f, +0.0337155f, +0.1935748f,
  +0.2079387f, +0.0120262f, +0.1269517f, -0.0227280f, +0.1328934f, -0.1697502f, -0.1096044f, -0.1062023f,
  -0.1059104f, -0.1100367f, +0.0674629f, +0.0780944f, +0.0957645f, +0.0485565f, +0.0400671f, +0.0111349f,
  -0.2118189f, -0.4460456f, -0.3891508f, -0.1828524f, +0.0184827f, +0.0081204f, +0.1014743f, +0.1120219f,
  +0.0201763f, +0.0434987f, -0.1678278f, +0.0197502f, -0.1061577f, +0.1576607f, -0.0979516f, +0.0865350f,
  -0.0360360f, -0.0328434f, +0.0737497f, -0.0889511f, +0.1499899f, +0.1446062f, -0.0893292f, +0.0357032f,
  +0.0556802f, +0.0764866f, -0.0086249f, -0.0824481f, +0.0059125f, -0.1178558f, +0.0797827f, +0.0258598f,
  -0.0676978f, -0.0018411f, +0.0511477f, -0.0294451f, +0.0458715f, -0.0530470f, +0.1028054f, -0.1284012f,
  +0.0771278f, +0.1599437f, -0.1341054f, +0.0750977f, -0.1118253f, -0.0634176f, -0.0832572f, -0.1151210f,
  +0.0331527f, -0.1629517f, +0.0982320f, +0.1033891f, -0.0611498f, -0.0327077f, -0.1235949f, -0.0646774f,
  +0.0002826f, -0.0987615f, -0.0534574f, +0.0320455f, +0.1392818f, +0.1290684f, -0.0066867f, -0.0957457f,
  -0.2094840f, +0.0010633f, +0.0403703f, -0.0587016f, +0.3275339f, +0.0441565f, +0.0187651f, -0.1813449f,
  +0.1470214f, -0.1701008f, -0.2708917f, -0.1588492f, -0.4635960f, -0.2547387f, +0.0950074f, +0.0504499f,
  -0.1000027f, +0.2363732f, -0.0826541f, +0.0904481f, -0.0882429f, +0.0533812f, -0.0233987f, -0.0814037f,
  -0.0507403f, +0.0549514f, +0.0632825f, -0.0030432f, +0.0957981f, +0.2151809f, +0.1925413f, +0.0272898f,
  +0.3098438f, -0.3333741f, -0.1920710f, -0.1846698f, +0.0509828f, -0.0405199f, -0.0218034f, +0.1250871f,
  +0.0697570f, -0.0430711f, -0.0576762f, -0.0941635f, +0.1377137f, -0.1754705f, -0.0658289f, +0.0673162f,
  -0.2098376f, -0.1544994f, +0.1099221f, -0.0683977f, +0.1509297f, +0.1049867f, -0.1427619f, -0.0642118f,
  -0.1851701f, +0.0205046f, -0.0760897f, +0.0059691f, +0.0108401f, +0.1102148f, +0.0353359f, -0.1514625f,
  +0.0109721f, +0.0797069f, -0.0188716f, -0.0052000f, +0.1488029f, -0.1188486f, -0.0006452f, +0.0035352f,
  -0.1606330f, -0.1854706f, -0.1284609f, +0.0245050f, +0.0696185f, +0.0674441f, -0.1400650f, +0.1307501f,
  +0.0589379f, -0.0488339f, -0.2433466f, +0.2103411f, -0.0356149f, -0.0574963f, +0.0345356f, +0.0359940f,
  +0.0533859f, +0.0718735f, +0.1486932f, -0.0308823f, -0.0473582f, -0.0714158f, -0.1795285f, -0.1268098f,
  -0.0180283f, +0.1597354f, +0.0409232f, +0.1528566f, -0.0338904f, +0.0982306f, -0.0695396f, +0.0577381f,
  +0.0035403f, +0.0757950f, -0.0866255f, +0.0651188f, +0.0307543f, +0.2599845f, -0.0399207f, +0.0673494f,
  +0.1335392f, -0.0117843f, -0.1236666f, +0.0631835f, -0.0366069f, -0.0146358f, +0.0420655f, +0.0564130f,
  +0.0311141f, +0.1152291f, -0.0656254f, +0.0186605f, -0.0724302f, -0.0601404f, -0.0621576f, -0.1065364f,
  +0.0408113f, -0.2707306f, +0.0537940f, -0.0497412f, -0.1015813f, -0.0238707f, +0.0001556f, +0.1730956f,
  -0.0011552f, -0.0169719f, -0.0067292f, -0.0097096f, +0.1213962f, -0.0237833f, -0.0233568f, -0.0816825f,
  -0.0626741f, -0.0560068f, -0.0300449f, -0.0935868f, +0.1427154f, +0.1096861f, +0.0778610f, -0.0930612f,
  +0.0123249f, -0.0206674f, -0.3028975f, +0.2161102f, -0.2439568f, -0.1552397f, +0.0123076f, -0.3456039f,
  +0.0957033f, +0.1897889f, +0.0266300f, +0.1595887f, +0.0388421f, +0.0285393f, -0.1378885f, +0.0970856f,
  -0.1226147f, -0.0784146f, +0.0699662f, -0.0879814f, +0.1468904f, -0.0053289f, -0.0207437f, +0.0452117f,
  -0.0177502f, +0.0938826f, +0.0323982f, -0.1622957f, +0.1428765f, +0.1158990f, -0.2218289f, -0.1151837f,
  +0.0101895f, +0.1904608f, -0.1759169f, +0.1017063f, +0.0656495f, -0.1444678f, -0.0051691f, -0.1439036f
);

const float biases[4] = float[4](
  +0.0322403f, +0.0317123f, +0.0459396f, +0.0363482f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ACNet b64 Layer130 L0
//!WIDTH LUMA.w 2 *
//!HEIGHT LUMA.h 2 *
//!BIND TMP1_L0
//!COMPONENTS 1

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

vec4 hook() {
    vec2 fcoord = fract(TEX_BIND_L0_POS * TEX_BIND_L0_SIZE);
    vec2 pos = TEX_BIND_L0_POS + (vec2(0.5f) - fcoord) * TEX_BIND_L0_PT;

    ivec2 icoord = ivec2(fcoord * vec2(2.0f));
    int index = icoord.y * 2 + icoord.x;

    vec4 r = TEX_BIND_L0_TEX(pos);

    return vec4(clamp(float[4](r.x, r.y, r.z, r.w)[index], 0.0f, 1.0f), 0.0f, 0.0f, 1.0f);
}
