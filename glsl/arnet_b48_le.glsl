//!HOOK LUMA
//!DESC ARNet b48 Layer0 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND LUMA
//!SAVE FEAT_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF LUMA_texOff
#define TEX_BIND_L0_TEX LUMA_tex
#define TEX_BIND_L0_POS LUMA_pos
#define TEX_BIND_L0_SIZE LUMA_size
#define TEX_BIND_L0_PT LUMA_pt

const float kernels[36] = float[36](
  +0.4758474f, -0.3814002f, -0.7573712f, -0.2236167f, +0.1652899f, +0.0766040f, -0.1979388f, -0.1729580f,
  +0.0269158f, +0.4296201f, -0.9378613f, -0.6641483f, -0.1309036f, -0.2473832f, +0.8809382f, -0.0588489f,
  +0.3537969f, +0.3607767f, +0.2839728f, +0.1861719f, +0.0330013f, -0.4403201f, -0.4079302f, -0.0617130f,
  -0.0979359f, +0.1815654f, +0.2578514f, +0.1961733f, -0.0037457f, +0.3166386f, +0.4566724f, -0.0442393f,
  +0.0479415f, -0.0493590f, -0.6115813f, -0.2176555f
);

const float biases[4] = float[4](
  +0.0250916f, -0.0074024f, -0.0035397f, -0.0405225f
);

vec4 hook() {
    const vec4 r0 = vec4(
        TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)).x
    );
    const vec4 r4 = vec4(
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)).x
    );
    const float r8 = TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)).x;

    float sum[4] = biases;
    for(int n = 0; n < 4; n++) {
        const vec4 k0 = vec4(kernels[n * 9 + 0], kernels[n * 9 + 1], kernels[n * 9 + 2], kernels[n * 9 + 3]);
        const vec4 k4 = vec4(kernels[n * 9 + 4], kernels[n * 9 + 5], kernels[n * 9 + 6], kernels[n * 9 + 7]);
        const float k8 = kernels[n * 9 + 8];
        sum[n] += (dot(r0, k0) + dot(r4, k4) + r8 * k8);
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer0 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND LUMA
//!SAVE FEAT_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF LUMA_texOff
#define TEX_BIND_L0_TEX LUMA_tex
#define TEX_BIND_L0_POS LUMA_pos
#define TEX_BIND_L0_SIZE LUMA_size
#define TEX_BIND_L0_PT LUMA_pt

const float kernels[36] = float[36](
  +0.2057650f, -0.6265209f, +0.1720704f, -0.2295296f, +0.0490876f, +0.6312726f, +0.0512887f, -0.3043693f,
  -0.2168423f, +0.3076087f, -0.1907409f, +0.4368629f, +0.0776876f, +0.2264347f, -0.5279742f, +0.0962372f,
  -0.9759935f, +0.4845568f, -0.6420950f, +0.5353405f, +0.2452768f, +0.1744081f, -0.5223592f, +0.0554369f,
  +0.2262591f, -0.5767692f, +0.4595722f, -0.5438531f, -0.0363106f, +0.5815998f, -0.3863454f, +0.1991683f,
  -0.1065348f, +0.1835341f, -0.4792379f, +0.1635661f
);

const float biases[4] = float[4](
  +0.0312811f, +0.0104972f, +0.0079762f, +0.0209107f
);

vec4 hook() {
    const vec4 r0 = vec4(
        TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)).x
    );
    const vec4 r4 = vec4(
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)).x
    );
    const float r8 = TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)).x;

    float sum[4] = biases;
    for(int n = 0; n < 4; n++) {
        const vec4 k0 = vec4(kernels[n * 9 + 0], kernels[n * 9 + 1], kernels[n * 9 + 2], kernels[n * 9 + 3]);
        const vec4 k4 = vec4(kernels[n * 9 + 4], kernels[n * 9 + 5], kernels[n * 9 + 6], kernels[n * 9 + 7]);
        const float k8 = kernels[n * 9 + 8];
        sum[n] += (dot(r0, k0) + dot(r4, k4) + r8 * k8);
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer1 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND FEAT_L0
//!BIND FEAT_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L0_TEX FEAT_L0_tex
#define TEX_BIND_L0_POS FEAT_L0_pos
#define TEX_BIND_L0_SIZE FEAT_L0_size
#define TEX_BIND_L0_PT FEAT_L0_pt

#define TEX_BIND_L1_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L1_TEX FEAT_L1_tex
#define TEX_BIND_L1_POS FEAT_L1_pos
#define TEX_BIND_L1_SIZE FEAT_L1_size
#define TEX_BIND_L1_PT FEAT_L1_pt

const float kernels[288] = float[288](
  -0.0462686f, +0.0507240f, +0.2950077f, -0.2300901f, -0.1087879f, +0.1098050f, +0.1320128f, -0.0106180f,
  +0.1504911f, +0.1323632f, +0.2830886f, -0.2521436f, -0.2446860f, -0.2565244f, +0.1069092f, -0.1421749f,
  -0.0755481f, +0.0296633f, +0.1888832f, -0.2539332f, -0.2281593f, +0.2342123f, +0.0612040f, +0.1235092f,
  -0.1693294f, +0.1681250f, +0.1495717f, +0.1313057f, -0.0217701f, -0.0506990f, -0.1346028f, -0.0477598f,
  +0.1885096f, +0.2334997f, -0.1745460f, -0.0177470f, -0.2071914f, -0.0265880f, +0.0317671f, +0.0146460f,
  +0.0237641f, +0.3350999f, +0.1454447f, +0.2137976f, -0.2356444f, +0.3957053f, -0.1595246f, -0.1659524f,
  -0.0944475f, +0.5450269f, -0.1702986f, -0.0230231f, +0.0169707f, +0.0342478f, +0.0170939f, -0.0677375f,
  +0.1951005f, -0.2748855f, -0.0421074f, -0.0927677f, +0.0470340f, +0.1127320f, -0.1377441f, -0.0969317f,
  +0.1799215f, -0.0001549f, -0.0595563f, -0.0953475f, -0.1498259f, -0.2589204f, -0.0223417f, -0.0261396f,
  -0.0795069f, -0.0739423f, -0.2927183f, -0.2113964f, -0.2156567f, -0.2085868f, +0.2574750f, -0.0798443f,
  +0.5077218f, +0.0612038f, -0.1186147f, -0.0648405f, +0.2200254f, -0.4166137f, -0.4759296f, +0.2622959f,
  +0.2187079f, -0.1943721f, -0.2744550f, +0.0486304f, +0.1200636f, +0.1194810f, -0.1028467f, +0.0205366f,
  +0.2789114f, -0.0020235f, -0.1901519f, +0.1530807f, +0.1089997f, -0.0468678f, -0.0831293f, +0.2135154f,
  +0.0500542f, -0.1641441f, +0.0116159f, -0.2039301f, -0.1814276f, +0.1524281f, -0.0696731f, -0.3421623f,
  -0.0574970f, -0.0542783f, -0.0054167f, -0.2479749f, +0.0135552f, -0.1747030f, -0.0555405f, +0.0787510f,
  +0.3103967f, -0.1433330f, -0.4429887f, -0.4746668f, +0.0913451f, +0.0600626f, -0.0546093f, -0.2441442f,
  -0.0112211f, -0.2362696f, +0.1042000f, -0.0125783f, +0.2145086f, +0.0014291f, +0.1040109f, +0.0761536f,
  +0.0972665f, -0.5210791f, +0.0548387f, -0.2435726f, +0.3286051f, +0.4634742f, +0.2001096f, +0.0281857f,
  +0.0662976f, -0.0622851f, +0.0999080f, -0.0151975f, +0.0272003f, +0.1211990f, +0.1227106f, +0.3505059f,
  -0.0629201f, -0.0597048f, +0.0905424f, +0.5152873f, -0.0653751f, +0.1564909f, +0.1031337f, -0.1074862f,
  -0.0004407f, -0.2834498f, +0.0269274f, +0.0512916f, -0.1673675f, -0.2453032f, -0.1382592f, -0.0675467f,
  -0.3045094f, +0.0278050f, +0.0047346f, +0.0712798f, +0.4133715f, +0.1705088f, -0.3291258f, -0.0803101f,
  +0.0459268f, +0.3154525f, -0.2247682f, +0.1086183f, -0.0941872f, -0.2966368f, -0.0592088f, +0.1568434f,
  -0.0751481f, +0.0290943f, -0.2191133f, -0.1019529f, +0.0725128f, -0.2364174f, +0.3916425f, +0.0200585f,
  -0.0614703f, -0.0447548f, +0.1341333f, -0.0294466f, -0.0917357f, +0.0736171f, +0.2078204f, +0.1058936f,
  +0.1300435f, -0.0457913f, +0.1732227f, +0.0139683f, +0.0274935f, +0.1209088f, +0.0333659f, +0.3076081f,
  -0.1096834f, -0.2958261f, +0.4660725f, +0.1368365f, -0.0237572f, +0.0158551f, +0.1851514f, +0.0566376f,
  +0.0731996f, -0.0545691f, +0.1025042f, +0.0348364f, -0.0225912f, -0.3969890f, -0.3716541f, +0.2296331f,
  -0.1837322f, -0.2510391f, -0.3516652f, +0.3335809f, +0.2298982f, +0.1714203f, -0.3537222f, +0.1344166f,
  +0.3712992f, -0.0214951f, -0.4925268f, +0.3651048f, +0.1130275f, +0.6349697f, +0.1373376f, -0.3125497f,
  -0.0495451f, +0.1081823f, -0.1143559f, +0.0184597f, -0.2144565f, +0.2436122f, -0.0332877f, -0.0388689f,
  +0.1553089f, -0.1963187f, -0.0948647f, +0.1737041f, -0.1173812f, +0.2999822f, +0.6523555f, +0.0491419f,
  +0.1859844f, +0.1743654f, +0.2314700f, +0.2784570f, -0.0334680f, -0.0211212f, +0.1220576f, -0.0939247f,
  -0.2048648f, +0.1076721f, -0.0556327f, +0.1650729f, +0.1010018f, -0.0058140f, -0.1755254f, +0.1587001f,
  +0.0149471f, +0.2456169f, +0.4886648f, +0.1766925f, -0.0692727f, +0.0291243f, -0.1729904f, +0.1811960f,
  -0.1942199f, +0.2699566f, +0.1388925f, -0.0049288f, +0.3151226f, -0.0895687f, -0.1422109f, +0.1021186f
);

const float biases[4] = float[4](
  +0.0624411f, -0.1255392f, +0.0269002f, -0.0371197f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer1 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND FEAT_L0
//!BIND FEAT_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L0_TEX FEAT_L0_tex
#define TEX_BIND_L0_POS FEAT_L0_pos
#define TEX_BIND_L0_SIZE FEAT_L0_size
#define TEX_BIND_L0_PT FEAT_L0_pt

#define TEX_BIND_L1_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L1_TEX FEAT_L1_tex
#define TEX_BIND_L1_POS FEAT_L1_pos
#define TEX_BIND_L1_SIZE FEAT_L1_size
#define TEX_BIND_L1_PT FEAT_L1_pt

const float kernels[288] = float[288](
  +0.1471789f, +0.0197789f, -0.4834110f, +0.4023594f, +0.2439097f, +0.0340845f, +0.1011203f, +0.0251927f,
  +0.1059100f, +0.1231599f, -0.2229081f, +0.0480272f, +0.0412557f, +0.1977441f, -0.2286229f, -0.1260544f,
  -0.1067825f, -0.2802421f, -0.1212777f, +0.0180135f, -0.0147541f, +0.2928029f, -0.5545530f, -0.1698417f,
  -0.2387488f, -0.0971723f, +0.2975588f, -0.1855242f, +0.1451273f, +0.1191381f, +0.2782435f, +0.0966160f,
  +0.0013505f, -0.0905989f, +0.5699359f, +0.1436837f, +0.1701507f, +0.1490787f, +0.0978188f, +0.0108219f,
  -0.0223650f, -0.0697828f, +0.3506766f, +0.2887988f, -0.0621519f, +0.2086923f, +0.0663285f, +0.1966159f,
  -0.0516138f, +0.0592122f, +0.2168278f, -0.0869249f, -0.1547996f, +0.1138375f, +0.0280666f, -0.0711549f,
  -0.0987208f, -0.1406171f, +0.0933580f, -0.0087922f, +0.3065129f, +0.0027662f, -0.0441225f, -0.1162059f,
  -0.0947947f, -0.1503819f, +0.3624738f, -0.2301226f, +0.2777676f, +0.1985511f, +0.2012803f, -0.1576803f,
  +0.1524712f, -0.0900448f, +0.0708155f, +0.1688156f, +0.1095371f, +0.0073083f, -0.0941451f, +0.2538739f,
  -0.0186377f, +0.2758006f, +0.3397553f, -0.0353924f, -0.0449183f, +0.3484243f, +0.3361599f, +0.0168021f,
  -0.1383069f, +0.3011840f, +0.0769745f, -0.2282229f, -0.1567498f, +0.0730382f, +0.6288011f, -0.2637521f,
  -0.0283657f, -0.1560302f, +0.2206274f, +0.3824079f, +0.2530609f, +0.0411975f, +0.0725461f, -0.0453818f,
  -0.0559698f, +0.1803594f, +0.2477459f, +0.6024582f, +0.2290657f, +0.2981662f, +0.5982928f, +0.1053320f,
  -0.2404140f, +0.3978483f, +0.2888038f, -0.2438006f, +0.0844632f, +0.0122267f, +0.4034497f, +0.2833640f,
  +0.1098305f, +0.1457271f, -0.0748424f, +0.1004949f, -0.0635703f, -0.0510620f, +0.1433741f, +0.2227693f,
  -0.0935068f, +0.2388444f, -0.1837960f, +0.1615470f, -0.0578629f, -0.0022833f, +0.7980278f, -0.1241315f,
  -0.4105779f, -0.0980994f, -0.3042328f, +0.1623666f, +0.2249544f, -0.2393367f, +0.8384418f, +0.3346084f,
  -0.0566138f, -0.1760057f, -0.1139840f, +0.2178300f, +0.1000401f, -0.0497810f, -0.0109242f, -0.0811239f,
  +0.0362582f, +0.2260806f, +0.1688557f, +0.0435426f, +0.0517838f, +0.1950735f, +0.4673204f, +0.2049246f,
  +0.0003333f, +0.3361708f, +0.0262200f, +0.0837762f, -0.2442167f, +0.1097735f, +0.1736549f, +0.1898847f,
  -0.0437026f, -0.2827011f, +0.2023684f, +0.0479572f, +0.0945846f, -0.2967749f, +0.1488118f, +0.0846935f,
  -0.1869940f, +0.2435401f, +0.3294787f, +0.4230395f, +0.3242959f, +0.6865013f, +0.7086594f, +0.2930755f,
  -0.2698970f, +0.6467116f, +0.1100800f, +0.0432416f, +0.4290658f, -0.2139253f, +0.5218181f, +0.2318239f,
  -0.0738137f, +0.1406319f, +0.0391138f, +0.0467831f, +0.0625427f, +0.1915193f, -0.1215940f, +0.0303501f,
  -0.2647795f, +0.1169397f, +0.2159095f, +0.2521208f, -0.0020044f, -0.0101610f, +0.1690852f, +0.2588336f,
  -0.1377867f, -0.1179866f, -0.0709023f, +0.1141073f, +0.1342210f, -0.6424221f, +0.8316443f, +0.4621760f,
  -0.1020579f, -0.2056659f, +0.3324216f, +0.0662378f, +0.1473095f, -0.2668217f, +0.0555790f, -0.1132263f,
  +0.2406351f, -0.0901772f, +0.5382977f, +0.0243510f, +0.2902910f, +0.1569400f, -0.0503897f, +0.0790044f,
  -0.1151775f, +0.2418733f, -0.0080230f, +0.0818814f, -0.0082834f, -0.1262936f, -0.7447108f, +0.0323013f,
  -0.2207420f, -0.0314579f, -0.0180706f, -0.1134120f, -0.2620947f, +0.2864887f, -0.2654368f, +0.3071987f,
  -0.3134952f, -0.4749290f, +0.2718784f, +0.0926366f, -0.0586691f, -0.1976722f, +0.4808240f, +0.0016935f,
  +0.0204482f, -0.1154396f, +0.2163082f, -0.2393493f, +0.3163918f, +0.0845670f, -0.0305017f, +0.1914687f,
  -0.0520306f, +0.2204499f, +0.0107200f, -0.0921343f, +0.3502611f, +0.1451950f, -0.1175151f, -0.0603879f,
  -0.2650137f, +0.2573726f, -0.3306266f, -0.1152245f, +0.1951312f, +0.2465471f, -0.2108386f, +0.0098243f,
  +0.3923389f, -0.1498848f, +0.0787777f, -0.1348694f, -0.0731324f, -0.1162006f, +0.4376844f, +0.2456801f
);

const float biases[4] = float[4](
  +0.0734857f, +0.0507436f, -0.0438590f, -0.1104396f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer2 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND FEAT_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L2_TEX FEAT_L0_tex
#define TEX_BIND_L2_POS FEAT_L0_pos
#define TEX_BIND_L2_SIZE FEAT_L0_size
#define TEX_BIND_L2_PT FEAT_L0_pt

const float kernels[288] = float[288](
  +0.0004773f, -0.3151467f, +0.2126366f, -0.2188255f, -0.1426309f, +0.2150160f, -0.1440551f, +0.0624816f,
  +0.2149812f, -0.2533950f, -0.0333462f, -0.1417142f, +0.0392839f, +0.0697763f, +0.2503222f, +0.1168734f,
  -0.0146704f, -0.1455003f, -0.2272531f, +0.0713903f, +0.0299301f, -0.1937889f, +0.1444440f, -0.2278080f,
  -0.0763419f, +0.0136133f, -0.0034150f, +0.0052796f, +0.0762497f, -0.0371993f, -0.1387495f, -0.1603400f,
  -0.3032028f, -0.1397957f, -0.1216670f, -0.0838949f, -0.0734763f, +0.0160051f, -0.1344800f, +0.0563985f,
  +0.0693096f, -0.0867838f, +0.0927782f, +0.0235672f, +0.0852323f, +0.1293077f, -0.1027147f, -0.0732096f,
  -0.0458419f, -0.2791308f, -0.1274334f, -0.1701255f, -0.0330984f, -0.3210518f, +0.2463803f, -0.2022430f,
  +0.0538943f, -0.4257390f, +0.1940516f, -0.0736281f, -0.0464460f, +0.1635393f, -0.0378433f, -0.2503279f,
  +0.1765415f, -0.0681728f, +0.0924259f, -0.0102735f, +0.0189353f, +0.1195485f, -0.1878537f, +0.2128685f,
  +0.2017421f, -0.2179107f, -0.1069958f, -0.5586527f, -0.0142071f, +0.0059364f, +0.0659427f, +0.0425822f,
  +0.3346723f, +0.0186413f, +0.0118011f, -0.3168166f, -0.2496703f, -0.0323490f, +0.3448755f, +0.0993668f,
  +0.1482723f, -0.2807975f, -0.3310515f, -0.0528279f, +0.1314495f, -0.1003985f, -0.1392073f, -0.2003540f,
  -0.1461241f, -0.0769561f, +0.1275157f, +0.1150737f, -0.2301224f, +0.2508635f, +0.0040922f, -0.0174112f,
  -0.0820414f, -0.1649691f, -0.0235380f, +0.0341786f, -0.2564021f, +0.3158877f, -0.1076965f, +0.3765430f,
  +0.0388967f, +0.0625466f, -0.3006932f, +0.2930703f, -0.2853081f, +0.2481870f, -0.3234680f, +0.2733147f,
  -0.1051148f, -0.0307115f, +0.0021389f, +0.1113726f, -0.1350662f, +0.1140948f, -0.1165797f, -0.0066671f,
  -0.0200311f, -0.0312322f, -0.0591508f, +0.3896534f, +0.0426402f, -0.0227859f, -0.1203153f, +0.1161090f,
  -0.2531277f, -0.2045536f, -0.0504823f, +0.2993062f, -0.3282943f, +0.0056152f, -0.1166546f, +0.0984065f,
  -0.1292264f, +0.1285808f, +0.0280034f, -0.1544988f, -0.0735358f, +0.3037132f, -0.1108928f, +0.0771468f,
  -0.0543334f, +0.0214578f, +0.3337424f, -0.3203299f, +0.0070214f, -0.0658203f, +0.0553253f, -0.1664059f,
  +0.1263458f, -0.2907507f, -0.2378527f, -0.0689933f, +0.2710101f, -0.0983177f, +0.0648742f, -0.1600409f,
  -0.2822641f, +0.2265674f, +0.0487706f, +0.0610939f, -0.4122642f, +0.6951054f, -0.6820594f, -0.3247847f,
  +0.0674024f, +0.0281556f, +0.3220345f, -0.1774431f, +0.3307987f, +0.3225224f, -0.4400709f, -0.2302550f,
  -0.0979617f, -0.0955830f, +0.2491254f, -0.0106965f, +0.2409436f, +0.1034177f, -0.1543246f, +0.1272715f,
  -0.0554425f, -0.2988786f, +0.0498749f, -0.0390397f, -0.1733859f, +0.0400651f, -0.1860961f, -0.0878005f,
  +0.1624652f, -0.0143519f, +0.0577510f, +0.0841249f, +0.1345253f, +0.1154859f, -0.5031119f, -0.4897639f,
  -0.1020422f, +0.2124523f, +0.1943261f, +0.2577739f, -0.0390084f, -0.0862960f, -0.1683213f, -0.3514566f,
  -0.2134014f, -0.1716564f, +0.2059969f, -0.2835266f, -0.1345954f, -0.0674438f, +0.4249718f, -0.0556238f,
  +0.0974733f, -0.1241589f, +0.0984225f, -0.1233665f, +0.1041910f, -0.3631389f, +0.2685782f, -0.0840627f,
  -0.0632923f, +0.0039424f, -0.1692858f, -0.0227446f, -0.1341356f, +0.0602611f, -0.1494996f, -0.1495807f,
  -0.0551994f, -0.2818810f, +0.1303809f, -0.5414318f, +0.1532457f, -0.2117263f, +0.3144301f, -0.1354657f,
  +0.0176082f, -0.0477244f, +0.0954485f, -0.2579608f, -0.1472306f, -0.1925597f, +0.1006800f, -0.2463824f,
  -0.0930962f, -0.2062347f, +0.0318617f, -0.1434685f, +0.2364718f, +0.2987904f, -0.3881441f, -0.2715282f,
  -0.3654718f, -0.0204234f, +0.1618714f, -0.1191225f, +0.0862775f, +0.1185717f, +0.0781061f, -0.1625538f,
  +0.0229442f, -0.1421116f, -0.2212394f, -0.1262391f, +0.2365110f, -0.0547438f, +0.1643425f, -0.2967933f,
  -0.1996605f, +0.0938445f, -0.0150150f, -0.1142983f, +0.2001724f, +0.0210459f, -0.1220724f, -0.3432600f
);

const float biases[4] = float[4](
  +0.1921273f, +0.0156419f, -0.0434058f, -0.1064226f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer2 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND FEAT_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L2_TEX FEAT_L1_tex
#define TEX_BIND_L2_POS FEAT_L1_pos
#define TEX_BIND_L2_SIZE FEAT_L1_size
#define TEX_BIND_L2_PT FEAT_L1_pt

const float kernels[288] = float[288](
  +0.2766944f, +0.0334343f, +0.0766083f, +0.1272869f, -0.0107862f, +0.2803275f, -0.4579853f, +0.0313394f,
  -0.1875125f, -0.1262251f, -0.1265076f, -0.1431396f, -0.0325870f, +0.2075047f, -0.3428853f, +0.1255311f,
  -0.0502871f, -0.0206012f, +0.3026920f, +0.0286305f, -0.0967418f, -0.0935520f, +0.0389007f, -0.0490971f,
  -0.0112734f, -0.2015204f, -0.1946532f, +0.0517768f, -0.0477578f, +0.5800400f, -0.5051482f, -0.0401275f,
  -0.0922985f, -0.1666632f, -0.0719804f, -0.2580099f, +0.1336441f, +0.4535634f, -0.7459331f, -0.0814523f,
  -0.1396705f, +0.1068843f, +0.2270259f, -0.1626590f, -0.1221434f, +0.2931885f, -0.2942895f, -0.0482403f,
  +0.0187780f, +0.0286093f, +0.0942725f, +0.1862813f, +0.2178039f, -0.0286582f, +0.0137197f, -0.3932472f,
  -0.0506187f, -0.1695878f, +0.2559445f, -0.2337915f, +0.1009807f, +0.1810157f, -0.1074610f, -0.1382504f,
  +0.0621691f, -0.1186305f, +0.2364789f, -0.2031943f, +0.0753692f, -0.1742361f, +0.2383365f, -0.0775509f,
  -0.0366766f, +0.0511438f, -0.0805371f, -0.1213773f, -0.1362945f, -0.0239807f, +0.1144014f, +0.0240523f,
  +0.3167243f, -0.0021316f, +0.1651759f, -0.2003603f, +0.1927601f, +0.2173719f, -0.4716943f, -0.1011860f,
  -0.1175807f, -0.1735135f, +0.0925448f, +0.1183659f, -0.1431753f, +0.0660696f, -0.0101149f, +0.3595257f,
  +0.1592332f, -0.1586968f, +0.2622183f, -0.4206338f, +0.2459154f, +0.3767939f, -0.1593846f, +0.1170412f,
  +0.3358149f, -0.0065353f, -0.0387806f, -0.1805896f, -0.0623249f, -0.0459025f, +0.0348595f, +0.1989671f,
  -0.0392225f, +0.0000010f, -0.0275956f, +0.0584220f, -0.1597325f, +0.1930839f, -0.2401632f, +0.3543690f,
  -0.0916967f, -0.0165558f, -0.1092088f, +0.0557127f, +0.0827488f, +0.6555144f, -0.4358063f, -0.0793108f,
  -0.0510181f, -0.1492636f, +0.0269193f, +0.1067239f, -0.0433626f, -0.0767171f, -0.1920265f, -0.2792765f,
  -0.1221611f, -0.1103769f, -0.1826280f, +0.2643667f, +0.3365532f, +0.3196004f, -0.3462028f, -0.1990243f,
  +0.1281200f, -0.1524080f, +0.2044417f, +0.3754822f, +0.0132917f, +0.0530664f, +0.3072342f, +0.0378509f,
  -0.0384096f, +0.0296296f, -0.0016957f, -0.1215605f, -0.1035910f, +0.2400418f, +0.2937489f, -0.0532888f,
  -0.1867472f, +0.4884347f, +0.3450046f, +0.1491310f, +0.0922424f, +0.2393090f, -0.1640289f, +0.0295199f,
  -0.2240285f, +0.0184762f, +0.0120658f, +0.2591656f, +0.1156455f, +0.1059455f, +0.1554994f, +0.2106846f,
  -0.0457657f, +0.2923350f, +0.1366705f, -0.0536802f, -0.4883755f, +0.3613721f, +0.1030930f, +0.0166130f,
  +0.2562269f, +0.1153388f, -0.2766627f, +0.2682368f, -0.3368082f, +0.0344622f, +0.0310623f, -0.2712235f,
  +0.0881688f, +0.1408122f, +0.0195914f, +0.0702957f, -0.0322327f, +0.0265262f, -0.0952607f, +0.0898793f,
  +0.0319178f, +0.0404909f, -0.0368694f, -0.0597113f, -0.3762086f, +0.0130163f, -0.0947898f, -0.0760828f,
  +0.0216256f, +0.1339720f, -0.0055452f, +0.0847753f, +0.0144881f, +0.0690906f, -0.1194318f, +0.1156293f,
  -0.0760764f, -0.0737753f, -0.0098332f, +0.0632579f, -0.2323107f, -0.1081114f, -0.0335775f, -0.0308422f,
  -0.1765241f, -0.0620901f, -0.1819229f, -0.1339429f, +0.1309520f, -0.1013119f, -0.1516067f, -0.2260437f,
  +0.1081503f, -0.0835558f, -0.0722943f, -0.0693743f, -0.1620143f, +0.0755264f, -0.1615547f, +0.0474525f,
  -0.4283583f, -0.1845816f, +0.0049735f, +0.1446790f, +0.0350792f, -0.5200767f, +0.2503838f, -0.1593935f,
  +0.1553160f, -0.0770942f, +0.0459736f, -0.2397443f, +0.3023360f, +0.0112257f, +0.0507734f, +0.0369178f,
  -0.2115555f, -0.2171607f, -0.1412106f, -0.2143491f, +0.0759313f, +0.0925378f, -0.1501903f, -0.1047552f,
  -0.1018747f, -0.0243834f, +0.0419713f, -0.2529379f, -0.1689083f, +0.2151675f, +0.0317086f, -0.0176835f,
  -0.0810881f, -0.0315870f, +0.1635656f, +0.0145461f, +0.2416539f, -0.0487188f, +0.2160146f, -0.1662618f,
  -0.0213656f, +0.0593009f, -0.0827492f, +0.0378799f, +0.1591076f, +0.0930710f, +0.0210419f, -0.1169552f
);

const float biases[4] = float[4](
  -0.0422803f, -0.0697681f, +0.0503021f, +0.1405572f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer3 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0897619f, +0.0586554f, -0.1679850f, +0.0655909f, -0.0693423f, -0.1879146f, +0.0782631f, -0.1793446f,
  -0.0703647f, +0.0903689f, -0.2895060f, -0.0454071f, -0.1154167f, -0.0048232f, -0.0586785f, -0.0110655f,
  -0.0616703f, -0.2941596f, -0.2463544f, +0.2928373f, +0.4263428f, -0.0631818f, -0.0513151f, +0.0127139f,
  -0.1321856f, -0.0442736f, -0.0694316f, +0.0825596f, +0.1935467f, +0.1740836f, +0.0391815f, +0.1875323f,
  -0.0543891f, -0.0217468f, -0.2791335f, -0.0982389f, +0.0772505f, -0.6227741f, +0.0106826f, -0.0182929f,
  +0.1448158f, -0.0309497f, +0.1947919f, -0.0279775f, -0.1238775f, -0.2793439f, -0.0079152f, +0.0389503f,
  +0.0386220f, +0.1060193f, -0.3563611f, -0.3091666f, -0.0614748f, +0.2657521f, +0.1767050f, +0.3116022f,
  -0.2043598f, -0.0868292f, -0.0549559f, +0.1755914f, -0.0962203f, -0.1250349f, +0.0242202f, +0.0861346f,
  +0.0382581f, +0.0155251f, -0.0962995f, +0.2576927f, -0.0586091f, +0.0061826f, +0.2825239f, -0.0860708f,
  +0.1622532f, +0.1054314f, -0.1262359f, +0.0990041f, -0.0401880f, -0.0098352f, -0.0247142f, -0.0041209f,
  +0.0151823f, +0.1077119f, -0.1860046f, -0.3581571f, -0.1321005f, -0.5101742f, -0.0575825f, +0.1883617f,
  -0.0280815f, -0.0332624f, +0.0474379f, +0.1326153f, +0.5266420f, +0.2724063f, -0.2014238f, +0.0445648f,
  +0.0432882f, -0.2406143f, -0.0541250f, -0.1325394f, -0.3947825f, -0.4524723f, -0.0510718f, +0.1834066f,
  +0.0055207f, +0.0223764f, -0.1774236f, -0.0850546f, +0.0714058f, -0.5905717f, -0.0242335f, +0.3751118f,
  +0.1969027f, -0.0187258f, -0.1053891f, +0.2412410f, -0.0442667f, +0.2375917f, -0.2554239f, -0.0593413f,
  +0.1073920f, -0.0944584f, +0.0454440f, -0.0740219f, +0.1732233f, +0.0585029f, -0.1614297f, -0.1576914f,
  -0.0151423f, +0.0473047f, +0.2774291f, -0.1391692f, -0.1309827f, +0.1558119f, +0.0042649f, +0.1098633f,
  +0.0155695f, +0.0956633f, +0.4579127f, +0.1893016f, +0.0632033f, +0.1693479f, -0.2048755f, -0.1023564f,
  +0.1506293f, -0.0851851f, +0.2804269f, +0.2584906f, +0.0624928f, -0.1146574f, +0.0676345f, -0.1839474f,
  -0.1258239f, +0.2749482f, +0.1333879f, -0.1609652f, -0.1474911f, +0.0844407f, +0.1694536f, -0.0345293f,
  -0.1615026f, -0.3247705f, -0.1913957f, -0.3231696f, -0.0006905f, +0.0990526f, +0.2405008f, -0.0221971f,
  +0.1365849f, -0.2306051f, +0.1155419f, +0.1065591f, +0.0465861f, -0.2610881f, +0.0850879f, -0.0443837f,
  +0.0840121f, +0.0028858f, +0.4378786f, +0.2219965f, +0.3382315f, -0.6019734f, +0.0605513f, -0.0392337f,
  -0.1197577f, -0.2443496f, -0.3468907f, +0.0142009f, +0.2367132f, +0.0733870f, +0.1023070f, -0.0243428f,
  -0.0969397f, +0.2111467f, -0.1221121f, +0.1438865f, -0.0551167f, -0.1825712f, -0.0212335f, +0.1001470f,
  +0.3180559f, -0.2062677f, +0.1095886f, -0.0313378f, -0.1120574f, -0.2111780f, -0.1702839f, -0.1687725f,
  -0.1523734f, +0.0530470f, -0.2190332f, -0.0489849f, +0.0760263f, -0.1678979f, -0.2021322f, +0.0677746f,
  +0.0536579f, +0.1958628f, -0.1974026f, +0.3535217f, +0.1642875f, -0.4942679f, +0.0337907f, +0.0260952f,
  -0.0139256f, -0.1354802f, -0.2951826f, +0.4815096f, +0.3007847f, -0.1391823f, -0.5163115f, +0.3787593f,
  -0.0923075f, -0.3401789f, -0.0532359f, +0.2570523f, -0.0287721f, +0.0810469f, -0.1019880f, +0.1500804f,
  +0.0225295f, -0.1126993f, +0.1594259f, +0.0557459f, -0.3288168f, +0.0385420f, -0.0845345f, +0.1693531f,
  -0.2441855f, -0.3172254f, +0.6545021f, -0.0306101f, -0.2721883f, +0.4108286f, +0.0461153f, +0.0528486f,
  -0.0621891f, +0.0765097f, +0.4186696f, -0.1390969f, -0.2776295f, +0.2412586f, +0.0874071f, -0.2270304f,
  +0.1626104f, -0.0140060f, -0.1497912f, -0.1581358f, -0.0055572f, +0.1744087f, -0.2188496f, +0.0374094f,
  +0.1640693f, -0.0405686f, +0.1029287f, -0.2023693f, +0.2371722f, +0.1003196f, -0.2292043f, -0.1159897f,
  +0.2094302f, +0.3574191f, -0.0801332f, +0.0339475f, +0.0444276f, +0.0675033f, +0.0379188f, +0.0311033f
);

const float biases[4] = float[4](
  +0.0385642f, -0.1087008f, +0.0327448f, -0.0560324f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer3 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.3130468f, +0.0261850f, -0.0503909f, -0.0804397f, +0.1188230f, -0.0204596f, -0.1067517f, -0.1424115f,
  -0.0223207f, -0.0494485f, -0.1510818f, -0.2303996f, -0.0498605f, +0.1234896f, +0.0759602f, +0.0164476f,
  +0.2660684f, -0.0642359f, +0.0100809f, +0.1129148f, -0.0202614f, +0.2266857f, -0.3173126f, -0.1342703f,
  +0.0152081f, -0.1537262f, -0.2810880f, -0.1186857f, +0.2686782f, +0.2288120f, +0.0968547f, +0.0552262f,
  -0.0183360f, +0.0935921f, +0.2169725f, +0.0314373f, +0.3962750f, -0.4433815f, +0.1171994f, -0.1568773f,
  -0.1355932f, +0.1349690f, +0.3479256f, +0.0269768f, +0.4507832f, -0.0557560f, -0.0402941f, -0.1215633f,
  -0.2362231f, -0.0021313f, -0.3089342f, -0.1909237f, +0.2137693f, -0.0608363f, -0.0773977f, -0.0294406f,
  +0.0119869f, -0.2073273f, -0.0230979f, -0.1479217f, +0.0231324f, -0.4052418f, +0.1540824f, -0.0105166f,
  -0.0156908f, -0.1008867f, +0.2897903f, +0.0275993f, +0.5392138f, -0.2034555f, +0.1399947f, -0.0033240f,
  +0.0377950f, +0.0899127f, +0.0068920f, -0.2507235f, +0.0420997f, +0.0476270f, +0.0608086f, -0.0279005f,
  +0.0290397f, +0.1154859f, -0.0879189f, +0.1964229f, -0.3424925f, -0.1803397f, -0.2369142f, +0.0396912f,
  -0.0700207f, -0.1659204f, +0.2505493f, -0.0581926f, -0.1265407f, +0.0626376f, -0.2467145f, +0.0743883f,
  -0.0303483f, -0.0809969f, -0.0897440f, +0.1633581f, -0.1308133f, -0.3197767f, -0.2010066f, +0.0470277f,
  +0.0330410f, +0.4210553f, -0.3640080f, +0.3287572f, -0.3563186f, +0.0919639f, +0.0181390f, +0.0072631f,
  +0.5197201f, -0.0175730f, -0.3539854f, -0.2134742f, -0.1386304f, -0.0974072f, -0.1581894f, +0.3444348f,
  +0.1154675f, +0.0573762f, +0.0348029f, +0.1695598f, +0.1328153f, -0.1693271f, +0.2505339f, -0.2394116f,
  -0.2230546f, +0.1357584f, -0.3324197f, +0.1682308f, -0.2831737f, -0.0293954f, -0.1004300f, +0.0307367f,
  -0.1382333f, +0.0436241f, -0.0522207f, -0.0709309f, +0.1576005f, +0.2832883f, -0.2630119f, +0.1594988f,
  +0.0557504f, -0.1168550f, -0.0875914f, +0.2748307f, +0.1213700f, +0.0768970f, +0.0029089f, -0.0367259f,
  +0.2018297f, +0.1829244f, -0.1912529f, -0.3140691f, +0.2567182f, +0.1408635f, -0.0166799f, -0.1665642f,
  -0.2077496f, -0.1403108f, -0.0738002f, +0.1098713f, +0.2187676f, +0.1079284f, -0.0236505f, -0.3185343f,
  -0.0875202f, -0.1111502f, +0.1759129f, -0.3656739f, +0.0449565f, +0.0983977f, +0.1222763f, +0.0086866f,
  +0.1988997f, +0.0532919f, +0.1568196f, +0.1284334f, +0.2261947f, +0.1880753f, -0.0928048f, +0.2054780f,
  +0.1468609f, +0.1123801f, -0.1816718f, -0.1108875f, +0.4709171f, +0.3898005f, -0.0448029f, -0.5259821f,
  -0.1378824f, -0.1006134f, -0.0887782f, +0.1301486f, -0.0908198f, -0.0562695f, -0.0659825f, +0.0792152f,
  -0.1672900f, -0.1357514f, +0.2509402f, -0.0441578f, -0.0508219f, +0.0759769f, +0.2826885f, +0.0776100f,
  -0.1124123f, +0.0798001f, -0.2820615f, -0.2974169f, +0.0006732f, +0.3550550f, -0.0658870f, -0.0406873f,
  +0.0301931f, -0.1779988f, +0.0851140f, +0.0565614f, -0.0697761f, +0.0593336f, +0.1659218f, +0.0526242f,
  -0.2050499f, +0.1041944f, -0.2095677f, -0.1633584f, +0.0120136f, -0.3452765f, +0.0889259f, -0.0634124f,
  -0.0184242f, -0.0674122f, -0.0819270f, -0.0408284f, -0.0493425f, +0.1782622f, -0.0459286f, +0.2010895f,
  -0.3465235f, +0.2126239f, +0.0309024f, -0.3273227f, +0.0862430f, +0.4014114f, -0.0317624f, -0.1056604f,
  +0.0692020f, -0.3452555f, -0.0435038f, +0.1231967f, -0.0888111f, +0.3831151f, -0.2168670f, -0.0179517f,
  +0.0144566f, +0.1621380f, +0.3612985f, +0.0445020f, -0.2915924f, -0.1461125f, +0.2994500f, -0.0925169f,
  +0.0186903f, -0.0591854f, +0.0572593f, +0.1431600f, +0.3616950f, -0.0212321f, -0.0753369f, +0.3662109f,
  +0.2528419f, +0.4749586f, -0.0954093f, -0.0869602f, +0.1219872f, -0.1035642f, -0.0651874f, -0.0506677f,
  -0.1076567f, +0.0586484f, -0.3358129f, +0.1408095f, +0.1656375f, -0.4296072f, -0.1498100f, -0.2218123f
);

const float biases[4] = float[4](
  -0.0472724f, +0.0461607f, -0.0570598f, -0.2895088f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer4 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0141841f, -0.0491222f, +0.2969080f, +0.1548624f, -0.0090874f, +0.0938676f, +0.0780316f, -0.1808619f,
  -0.0174531f, -0.0554395f, -0.0011659f, +0.1605196f, -0.0348511f, -0.1285275f, +0.0443344f, -0.3487171f,
  +0.0493206f, +0.1601933f, +0.4128057f, +0.0622856f, +0.1652612f, +0.2367419f, +0.0638846f, -0.1945340f,
  +0.2452381f, +0.0331086f, -0.3500255f, +0.2755059f, -0.1350607f, +0.2477955f, -0.0345976f, +0.2973407f,
  -0.0980088f, -0.1181763f, -0.3619058f, +0.3375759f, -0.0409473f, -0.4064415f, -0.2105211f, +0.2170904f,
  +0.0540753f, -0.4628753f, -0.0711635f, +0.0130454f, -0.0451873f, +0.0536384f, +0.1354764f, -0.1446632f,
  -0.2174504f, +0.0180231f, +0.0566602f, +0.0989136f, +0.3505443f, +0.2020855f, +0.2014164f, -0.0601761f,
  +0.2693573f, -0.2713942f, +0.0702755f, +0.1121390f, +0.1100802f, -0.2245400f, -0.0724528f, +0.0022516f,
  +0.0594801f, +0.1028862f, -0.0870136f, -0.2646693f, +0.1112335f, +0.2033161f, -0.0000445f, +0.0224743f,
  +0.1321651f, +0.0929324f, +0.0718161f, +0.1379129f, -0.1417907f, +0.0814743f, +0.0979254f, -0.0728463f,
  +0.0580211f, -0.0111471f, -0.1256849f, +0.1895139f, +0.0528565f, +0.3751388f, -0.0833776f, -0.1261155f,
  +0.0231228f, +0.2523391f, -0.0252290f, +0.2005201f, +0.4219742f, -0.1778334f, -0.1793471f, -0.1049920f,
  +0.0270997f, -0.0624050f, +0.0639568f, +0.4687388f, +0.0730259f, -0.4249129f, +0.0522956f, +0.2429613f,
  +0.1473478f, -0.2623394f, -0.0284379f, +0.0789276f, +0.2283681f, -0.1083819f, -0.0268175f, +0.1976242f,
  +0.0346982f, -0.0325846f, +0.1617660f, +0.1109583f, +0.1710491f, -0.3012350f, -0.1635000f, +0.1044772f,
  -0.2421566f, -0.1061390f, +0.0566277f, -0.1411022f, -0.1343433f, -0.2611912f, -0.0457205f, -0.1915878f,
  -0.1937387f, +0.1262650f, -0.0866427f, +0.3890725f, -0.3838876f, +0.1650093f, -0.0579361f, +0.2338552f,
  +0.1313399f, +0.1611367f, +0.0948202f, +0.2110705f, +0.0733450f, -0.1061784f, -0.3429197f, +0.1169705f,
  -0.0227036f, +0.1451497f, -0.0271389f, -0.2700216f, -0.2740454f, -0.0450278f, +0.0202018f, -0.0470670f,
  -0.0511497f, -0.0964420f, -0.3342886f, -0.1095207f, +0.0857405f, -0.0144815f, +0.2072171f, +0.0487160f,
  +0.0183902f, -0.2800649f, -0.3132312f, -0.0218190f, -0.0077672f, -0.0882488f, -0.3633261f, +0.1645272f,
  +0.1423697f, -0.2211691f, +0.1187324f, -0.0979850f, +0.2960151f, +0.0780527f, +0.1327950f, -0.0643885f,
  +0.0810564f, +0.0266785f, -0.0878102f, -0.3521661f, +0.2862242f, +0.1504353f, +0.4260731f, -0.0022863f,
  +0.1429182f, -0.0807478f, +0.1640331f, -0.2111454f, +0.2639329f, +0.1128936f, -0.0414858f, +0.2643203f,
  -0.2677673f, +0.1188439f, +0.0931130f, -0.1713505f, -0.1311648f, +0.3057666f, +0.2644449f, -0.0889640f,
  +0.0305895f, -0.0766780f, -0.1239449f, +0.1224684f, +0.0923637f, +0.1610976f, -0.0317408f, +0.1951856f,
  +0.1053531f, -0.1062750f, -0.1636755f, -0.1048852f, +0.3750106f, +0.0557328f, -0.2317273f, +0.1904239f,
  +0.1338220f, +0.1371838f, -0.1929731f, -0.1524266f, -0.2147024f, +0.1659763f, +0.0373564f, +0.0859871f,
  +0.1882038f, +0.1199288f, +0.0478421f, -0.0874265f, -0.0352478f, -0.1705376f, -0.0978261f, +0.0956842f,
  -0.1351331f, -0.0382768f, -0.1078965f, +0.0087628f, +0.0280610f, -0.0430804f, +0.0497391f, -0.1653785f,
  +0.0954186f, +0.2725899f, +0.1022070f, -0.0849227f, -0.2383858f, +0.0741663f, -0.1312386f, -0.0712307f,
  +0.2537961f, +0.2022434f, +0.0244842f, -0.0266420f, -0.0127535f, +0.2535864f, -0.0200890f, +0.2851314f,
  -0.1914369f, -0.1402880f, -0.2247639f, -0.2171353f, +0.2360903f, -0.0156877f, -0.0578223f, -0.0148895f,
  +0.0959820f, -0.0169914f, +0.1116829f, -0.0097896f, +0.1101028f, -0.5083710f, +0.0633785f, +0.2168794f,
  +0.1559695f, +0.1161287f, +0.0602790f, -0.1096901f, +0.2328250f, +0.1514086f, +0.2377464f, -0.0518687f,
  -0.1344775f, -0.1308341f, -0.0720649f, -0.0885952f, +0.0984001f, -0.0062161f, +0.2296157f, +0.1085276f
);

const float biases[4] = float[4](
  +0.1420173f, +0.0345557f, -0.0318803f, -0.1091491f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer4 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1506090f, +0.1227186f, +0.2728050f, +0.2949930f, +0.2594771f, +0.0764306f, +0.0299403f, -0.0674606f,
  -0.0886017f, -0.1553360f, +0.0041320f, +0.2024962f, -0.0118847f, +0.0888131f, +0.1599286f, -0.2080991f,
  +0.1268360f, +0.1399828f, +0.1996255f, +0.0863671f, +0.2772383f, -0.0310574f, +0.2983324f, +0.1853260f,
  +0.4666505f, -0.1953459f, +0.0519810f, +0.2690567f, +0.2064482f, +0.5101089f, +0.2687344f, +0.0168729f,
  -0.1296985f, -0.0333373f, +0.0229558f, +0.0345258f, +0.3209061f, +0.3974116f, +0.4312212f, +0.1771112f,
  +0.0408959f, -0.0014958f, +0.0459304f, +0.3117209f, +0.1002725f, -0.1000220f, +0.3593399f, +0.2726865f,
  +0.1900346f, -0.0837889f, +0.0908134f, +0.4153654f, -0.0262736f, +0.0201446f, +0.0620170f, +0.0563264f,
  -0.1091815f, -0.0569537f, +0.2458348f, +0.4069470f, +0.0625954f, -0.0746121f, -0.2308847f, -0.0838502f,
  +0.2878720f, +0.2700544f, -0.2520394f, +0.2579609f, +0.1501777f, -0.2270515f, -0.2562237f, -0.0384193f,
  -0.1289938f, +0.0427947f, -0.0173434f, +0.0373779f, +0.0074615f, -0.0736626f, -0.1467205f, +0.2515145f,
  +0.1004557f, +0.2215241f, -0.2605563f, +0.0185519f, +0.1006151f, +0.0187464f, -0.0940255f, -0.0660175f,
  +0.1385392f, +0.1764632f, -0.0162861f, +0.0866406f, -0.2047638f, -0.2074983f, -0.3670088f, -0.1186850f,
  -0.3463247f, +0.3080586f, -0.0191596f, -0.0110982f, +0.3006025f, +0.0441832f, -0.1901893f, +0.0153238f,
  -0.0478569f, +0.3007012f, +0.1165619f, -0.3643163f, +0.2872391f, +0.0652125f, -0.2436569f, +0.0734105f,
  +0.2187330f, -0.0690352f, +0.1527023f, -0.0633908f, +0.0134221f, -0.2717466f, -0.1572395f, -0.0199825f,
  -0.0027344f, -0.1916688f, +0.1924504f, +0.2715569f, +0.1130821f, -0.1170944f, -0.2296265f, +0.0372060f,
  -0.0942732f, -0.2339229f, -0.2357465f, -0.1928220f, +0.1224961f, -0.1452605f, -0.0788986f, +0.3595157f,
  +0.0121563f, +0.4402692f, -0.0773919f, +0.1104190f, -0.1567123f, -0.0486123f, -0.2532027f, +0.0694999f,
  +0.0227128f, +0.1159032f, +0.0183013f, +0.0054147f, -0.2114343f, -0.0029665f, +0.0076511f, -0.0707920f,
  -0.1906589f, +0.0971420f, -0.1291927f, +0.0596339f, +0.2954049f, -0.2502456f, -0.0231055f, -0.0666289f,
  -0.0013794f, +0.1050787f, +0.3125602f, +0.0217385f, +0.1603656f, -0.0393628f, -0.0363013f, +0.0229109f,
  -0.0449393f, +0.1415313f, -0.2699577f, +0.1387013f, +0.0413786f, +0.2167277f, -0.0533666f, +0.2402669f,
  +0.1909836f, +0.0248063f, +0.0548286f, +0.3170301f, -0.0062355f, -0.0600066f, +0.2612760f, -0.1227965f,
  -0.1172670f, +0.2425141f, +0.1455748f, +0.2412309f, -0.2560208f, -0.0746283f, -0.1996752f, +0.0184443f,
  +0.2072626f, -0.1926072f, +0.1895323f, +0.4397215f, +0.0108565f, +0.0726560f, +0.0808890f, -0.1410977f,
  -0.0192199f, +0.0412751f, +0.1980070f, +0.3691071f, -0.0609806f, -0.0832407f, +0.2772987f, -0.1792201f,
  +0.0443677f, -0.2363115f, -0.1747076f, +0.1903612f, +0.1274993f, -0.0256290f, +0.1636840f, +0.0038101f,
  +0.2212357f, -0.1776179f, +0.0284842f, +0.0903252f, +0.0505263f, -0.1802915f, +0.0571141f, +0.1704876f,
  +0.1959001f, -0.4144347f, -0.2196899f, -0.0938807f, +0.0407617f, +0.2036565f, -0.0833249f, +0.0581787f,
  +0.0982066f, -0.2235848f, -0.0188354f, +0.0791972f, +0.2073565f, -0.1451436f, +0.0214468f, +0.1765414f,
  -0.0638314f, -0.3114547f, +0.1356567f, -0.2394812f, +0.0288614f, -0.1385591f, -0.1523118f, +0.0985822f,
  +0.2553318f, +0.0436464f, +0.1850452f, -0.2669678f, -0.1030110f, +0.1184621f, -0.2147039f, -0.0640584f,
  -0.1073584f, -0.0300963f, -0.0294569f, +0.0445895f, -0.2133850f, -0.0024994f, +0.2612778f, +0.0490458f,
  -0.2650151f, -0.1075298f, +0.1802063f, -0.4751114f, -0.0551530f, -0.1888010f, -0.0496796f, -0.1876997f,
  -0.3800851f, -0.0639022f, -0.1889822f, -0.1179581f, -0.3127973f, +0.0368020f, +0.0611022f, +0.1880008f,
  +0.1224789f, -0.2026616f, +0.1965796f, -0.0467217f, -0.2486747f, -0.0637733f, -0.0660686f, +0.1316212f
);

const float biases[4] = float[4](
  -0.0768296f, -0.0213684f, +0.0339325f, +0.0743060f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer5 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1386251f, -0.1632111f, -0.2754260f, -0.0383739f, -0.2283029f, +0.3714999f, +0.2278094f, -0.1015561f,
  +0.1860154f, +0.1544853f, -0.3046821f, -0.1252535f, -0.6268756f, -0.3064333f, +0.2213886f, -0.0774096f,
  -0.3033964f, +0.0750506f, +0.3294451f, +0.0068367f, -0.3521683f, -0.1766881f, +0.1250446f, -0.2941030f,
  -0.2539488f, -0.2497383f, -0.0762324f, +0.1402092f, +0.3957430f, +0.1823428f, -0.5365599f, +0.3634866f,
  +0.1408338f, -0.0042641f, -0.2650656f, +0.0651712f, +0.0760091f, +0.3716649f, -0.2800446f, +0.2289296f,
  +0.1837426f, +0.0249653f, -0.1932501f, +0.3128400f, -0.5514636f, +0.3381964f, +0.0195930f, +0.0209959f,
  +0.0563402f, -0.0489512f, -0.0891492f, -0.2161388f, -0.0723094f, -0.2683595f, -0.1495865f, +0.2230366f,
  +0.0158642f, -0.1345906f, +0.2201131f, -0.2076945f, +0.3889201f, +0.0519127f, -0.1346876f, -0.0194157f,
  -0.0492706f, +0.0614293f, +0.3977364f, +0.2314694f, -0.0930527f, +0.1259145f, +0.0849150f, +0.0397578f,
  +0.1942545f, -0.1220971f, -0.0383266f, +0.3314270f, +0.1966491f, -0.3944854f, -0.1025435f, -0.0139281f,
  +0.0377939f, -0.0793600f, +0.0585003f, +0.2799461f, +0.2911440f, +0.2216769f, +0.0474202f, +0.2477168f,
  +0.2969773f, -0.0907250f, +0.0193062f, +0.2385955f, -0.0763345f, +0.1063653f, -0.0538921f, +0.2798232f,
  -0.0872860f, +0.0874579f, +0.1081140f, +0.1392406f, +0.0297447f, -0.1449972f, +0.1197573f, -0.0950172f,
  -0.1164901f, -0.3978044f, +0.1325576f, +0.2416063f, -0.0796935f, -0.0841424f, -0.2197646f, +0.2083427f,
  -0.0687384f, -0.0676738f, +0.1412379f, -0.1806050f, -0.1158151f, +0.2985795f, -0.0586681f, +0.1156006f,
  +0.0820422f, -0.1701913f, +0.0555691f, +0.0211556f, -0.2006746f, +0.0082434f, -0.0459725f, +0.0339915f,
  +0.0336544f, -0.1144947f, +0.1929400f, +0.4402227f, -0.1643679f, +0.0218693f, +0.0131826f, -0.0358289f,
  -0.0911755f, +0.0337515f, +0.2894236f, +0.2505763f, -0.0569010f, +0.0731191f, -0.0412298f, -0.2383908f,
  -0.0820003f, -0.1770341f, -0.1020158f, -0.1342630f, +0.3563940f, +0.0879284f, +0.0784535f, -0.1499340f,
  -0.1005730f, -0.1148339f, -0.1328137f, +0.0907110f, +0.0540119f, +0.2623489f, -0.0187027f, -0.5133981f,
  +0.0824663f, -0.0261047f, +0.3928361f, -0.3878472f, -0.2445732f, -0.1477491f, +0.1657090f, +0.4665063f,
  -0.1854505f, -0.0904525f, -0.0414362f, +0.1190737f, -0.1982642f, +0.5160277f, -0.2947321f, -0.0649834f,
  +0.2669326f, -0.1837209f, +0.3745506f, +0.1866916f, -0.1814052f, +0.2835401f, -0.3635105f, +0.0717854f,
  -0.0014971f, -0.1639397f, +0.3582104f, +0.0371975f, +0.1007986f, -0.0172628f, +0.1719885f, +0.3729939f,
  -0.1324573f, +0.1333745f, -0.1699384f, -0.1141520f, -0.0405118f, -0.1523743f, -0.0418137f, -0.0073083f,
  +0.0827036f, +0.4333922f, -0.0126686f, +0.2217957f, -0.1736436f, -0.1212641f, -0.1206599f, +0.2077594f,
  +0.2002789f, +0.2298370f, -0.2366376f, +0.1562165f, -0.2840559f, -0.0398897f, -0.1322661f, +0.4114806f,
  -0.1469550f, +0.2552078f, +0.2324928f, -0.1334700f, -0.0087363f, +0.3132679f, +0.0424691f, -0.1103582f,
  +0.0797990f, -0.2123742f, -0.2509128f, +0.0429958f, +0.1855021f, -0.2202126f, -0.2032841f, +0.0275292f,
  +0.0557340f, -0.0690654f, -0.2024780f, +0.0014756f, +0.4067206f, +0.2125596f, +0.1906003f, -0.0762433f,
  -0.0875798f, +0.0158162f, -0.0382343f, -0.1056190f, +0.0019337f, +0.0028610f, -0.1049640f, +0.2745872f,
  -0.1038782f, -0.5478125f, -0.6142609f, +0.1981128f, -0.2644294f, -0.2467185f, -0.5674834f, -0.0491670f,
  -0.0794139f, -0.1311451f, -0.5802371f, -0.0087502f, -0.2140604f, -0.1858628f, -0.1622029f, +0.1810126f,
  -0.0481880f, -0.1479760f, +0.2406985f, -0.0822728f, -0.1267839f, +0.2126262f, -0.0508631f, -0.0761940f,
  +0.1684158f, -0.4804587f, -0.2264593f, -0.0850499f, -0.5133376f, -0.0188910f, +0.0393510f, -0.1155656f,
  +0.2921526f, +0.1029392f, +0.2331664f, +0.3107170f, +0.1492252f, -0.1772476f, +0.0434911f, -0.1839197f
);

const float biases[4] = float[4](
  -0.0342340f, +0.0940026f, -0.0264931f, +0.0565736f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer5 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1726160f, +0.1437075f, +0.3664869f, -0.2052498f, +0.0441023f, +0.3811256f, +0.0315013f, -0.0952441f,
  +0.1090521f, -0.1658476f, +0.5119747f, -0.1976491f, +0.2805359f, -0.2066047f, +0.1366124f, -0.1483482f,
  -0.1747204f, +0.1043340f, +0.0350093f, -0.2420867f, -0.1187835f, -0.1941101f, +0.0005664f, +0.0396018f,
  +0.2698852f, -0.1007420f, -0.0742661f, +0.0919782f, +0.1191438f, -0.1820992f, -0.1411644f, -0.0492936f,
  +0.1727481f, -0.0804902f, -0.1295282f, +0.2327776f, +0.2778152f, -0.0011394f, -0.3621035f, -0.2330423f,
  +0.0767180f, -0.0865685f, +0.0438471f, -0.1924171f, -0.1340839f, +0.3752425f, -0.1545863f, +0.3127568f,
  -0.1191109f, +0.1074244f, -0.1848046f, -0.1657911f, -0.2139462f, -0.0391046f, -0.4673512f, +0.0923493f,
  +0.1067902f, +0.3700431f, -0.2912444f, +0.0286795f, -0.0676203f, +0.1468988f, +0.1445839f, +0.0470521f,
  +0.1951720f, +0.0461814f, -0.0541992f, -0.0831501f, +0.1182306f, +0.3182736f, -0.0297419f, -0.0672036f,
  -0.0478057f, +0.1444095f, -0.2520449f, -0.1697399f, +0.1797604f, +0.1913854f, +0.3290623f, -0.1793916f,
  +0.0365998f, +0.2952353f, +0.0878587f, -0.2342049f, +0.0267664f, +0.0858336f, -0.1280879f, -0.1444913f,
  -0.1498432f, +0.1878378f, +0.2122433f, +0.0904440f, -0.3030189f, +0.2247311f, -0.2258501f, -0.0019776f,
  -0.0463587f, +0.0272097f, -0.0674798f, -0.2255067f, +0.1647016f, -0.0481800f, +0.0914338f, +0.0717749f,
  -0.0302423f, +0.2009072f, -0.2005821f, -0.0249182f, +0.0341849f, +0.2132775f, -0.1041723f, +0.1165261f,
  +0.0854779f, +0.0513409f, +0.0730795f, -0.0849269f, -0.1310984f, +0.2896708f, -0.1129872f, +0.1120761f,
  -0.0930367f, -0.1132957f, +0.0943935f, -0.2448405f, +0.4635589f, +0.1757417f, -0.1213357f, -0.1786375f,
  -0.0808924f, -0.3759510f, +0.0862293f, -0.3050576f, -0.0595276f, -0.0999974f, -0.0544566f, -0.0294164f,
  +0.0731775f, +0.0362433f, +0.3951255f, +0.1963958f, -0.1756718f, +0.4290373f, -0.3841647f, +0.1523000f,
  -0.0323871f, +0.0976344f, +0.0010860f, +0.0381648f, +0.2288388f, +0.2053648f, +0.0011015f, +0.2575463f,
  +0.1617669f, -0.1016908f, -0.0176288f, +0.1853373f, -0.1222772f, -0.0367168f, -0.3123314f, -0.0833987f,
  +0.1497945f, +0.0044484f, +0.0459651f, +0.2400649f, +0.0003454f, +0.2534815f, +0.1427277f, +0.4669785f,
  -0.0509072f, +0.2439576f, -0.3054412f, +0.1202731f, +0.2204773f, -0.0267134f, +0.0325964f, -0.0023186f,
  +0.1411626f, +0.2107327f, -0.4046727f, +0.0526435f, -0.2706148f, -0.2307436f, -0.5138174f, +0.1066409f,
  +0.4387601f, +0.1291741f, -0.2234664f, -0.1237054f, -0.2034886f, -0.2417428f, -0.2014263f, +0.2653184f,
  -0.2753558f, -0.2562042f, +0.4208695f, +0.3460019f, -0.1632602f, +0.0236542f, +0.1426352f, -0.1009094f,
  -0.2326010f, -0.3724366f, +0.3822609f, +0.0181762f, -0.4666361f, +0.0417840f, +0.1222434f, +0.1679707f,
  -0.1394422f, +0.0826482f, +0.4132733f, +0.1029830f, -0.1163511f, +0.2432895f, -0.0153682f, +0.0733643f,
  +0.0328371f, +0.1181703f, +0.1845397f, +0.1278719f, -0.0617049f, -0.1701258f, -0.2058842f, +0.2066773f,
  +0.1914040f, -0.2126907f, -0.3284008f, +0.0933196f, -0.1103929f, +0.0250874f, +0.0557021f, +0.0426238f,
  +0.2419215f, -0.1330115f, -0.0877653f, +0.1493025f, -0.2850385f, +0.4403636f, +0.2023025f, +0.1305942f,
  -0.0317432f, -0.0136108f, -0.1449196f, -0.0250796f, +0.2493086f, -0.3159212f, +0.1082759f, -0.3022782f,
  -0.0928046f, -0.1953237f, -0.4766015f, +0.1337889f, -0.2862087f, -0.2660309f, +0.2941481f, -0.2484457f,
  +0.2171524f, +0.2192161f, +0.2509212f, -0.2768867f, -0.3063771f, -0.2863275f, -0.0212992f, +0.3555812f,
  -0.1760773f, +0.0722558f, +0.1690638f, -0.1240846f, -0.1015524f, +0.3947678f, +0.3104772f, -0.0903067f,
  -0.2555961f, -0.3886528f, +0.0151575f, +0.1974409f, -0.3407201f, -0.1176019f, -0.1295664f, +0.1155914f,
  +0.0728879f, -0.0457769f, +0.5513735f, +0.1385279f, -0.1621359f, -0.0039846f, +0.4256484f, +0.1334245f
);

const float biases[4] = float[4](
  -0.1787972f, +0.0035254f, -0.0768463f, -0.0199426f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer6 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2234036f, -0.1446734f, -0.2253184f, +0.1537937f, +0.0055590f, -0.0771714f, +0.1384476f, +0.2590959f,
  -0.1424902f, +0.0005676f, -0.3862746f, -0.0701389f, -0.1836036f, -0.0495492f, -0.2494891f, -0.2198814f,
  +0.1857825f, -0.0108875f, +0.0648616f, -0.0280494f, -0.1126706f, +0.0827023f, +0.0362382f, +0.0258812f,
  +0.0237580f, +0.2644368f, +0.1148434f, +0.4462547f, +0.0326614f, +0.4268180f, -0.1147049f, +0.1013553f,
  -0.1285436f, -0.2128529f, -0.1935666f, +0.0539793f, +0.0372020f, +0.1167541f, -0.4047522f, -0.3164132f,
  -0.0304787f, +0.0555901f, +0.0089767f, -0.1712966f, -0.1697522f, -0.1997589f, -0.0044811f, -0.2520280f,
  +0.1104877f, -0.0321137f, +0.0062378f, +0.1755220f, -0.0528120f, +0.1130558f, +0.0816764f, -0.0662840f,
  -0.3286240f, +0.1361334f, -0.2496232f, +0.0968152f, +0.1618230f, -0.1064009f, +0.0396876f, -0.0166544f,
  -0.0990641f, +0.0158548f, +0.1264579f, -0.1019712f, -0.2234179f, +0.0228697f, +0.2813195f, +0.2045477f,
  -0.3422811f, +0.0247822f, -0.2004761f, -0.1728896f, -0.3589297f, -0.2182043f, +0.0257450f, -0.0639736f,
  -0.0719454f, -0.1750826f, +0.2547408f, +0.1184619f, -0.1248948f, +0.3511711f, -0.2745991f, +0.3207036f,
  -0.0053211f, +0.0340697f, -0.1617560f, +0.1967170f, -0.1595348f, +0.2600390f, -0.2947609f, +0.2396124f,
  -0.0989665f, -0.1900109f, -0.1549804f, +0.0439854f, +0.3300760f, -0.2895972f, -0.3791937f, -0.7291690f,
  +0.0397270f, -0.1880330f, +0.0170166f, -0.0031383f, +0.0420387f, -0.0050800f, -0.1024607f, +0.0545422f,
  +0.1134423f, -0.1832033f, +0.1860366f, -0.2228687f, -0.2032050f, +0.2746283f, -0.2501135f, -0.1370317f,
  -0.1240522f, -0.0756692f, -0.1938655f, -0.1019556f, +0.0870112f, +0.0984180f, +0.2909285f, +0.1591584f,
  +0.2368185f, -0.3627081f, +0.1019727f, -0.0431531f, +0.1444760f, +0.1255774f, +0.4646862f, +0.2894303f,
  +0.3638706f, +0.0025789f, -0.3161043f, -0.1316343f, -0.1657046f, +0.0306033f, +0.2483129f, +0.0409120f,
  -0.1466079f, +0.1311725f, -0.3347440f, -0.3482159f, -0.5565741f, +0.0191632f, +0.2027739f, -0.4671247f,
  -0.0946219f, -0.2584742f, -0.2656169f, -0.2397846f, -0.1984165f, +0.1941393f, +0.0007599f, +0.3680951f,
  +0.2182946f, +0.0223460f, +0.1552251f, -0.1238156f, -0.2858553f, +0.1639467f, +0.0937026f, -0.1053768f,
  +0.0737154f, +0.0729649f, +0.1425417f, -0.2957066f, -0.3365662f, +0.0494788f, -0.1021808f, +0.1167359f,
  -0.0823011f, -0.0028937f, -0.1203737f, -0.5265865f, -0.2195841f, -0.0555699f, +0.2082156f, +0.6360794f,
  +0.2090721f, -0.1894086f, +0.1331605f, -0.4727162f, -0.0288692f, -0.0103891f, +0.1375998f, +0.0318842f,
  -0.2119291f, +0.1922856f, -0.2540900f, +0.0689919f, +0.2750942f, +0.0203616f, +0.1148086f, +0.2244734f,
  +0.2231703f, -0.2012001f, +0.3426239f, -0.2461971f, -0.0345887f, -0.0250818f, -0.1319067f, +0.3372240f,
  +0.2227122f, -0.3607030f, -0.1423911f, -0.1758725f, -0.2099085f, +0.0615809f, +0.1501140f, -0.1417954f,
  -0.1265188f, +0.0647519f, +0.0452663f, +0.1772269f, -0.0559522f, +0.1374061f, +0.0007624f, -0.1924480f,
  +0.1738154f, +0.0865149f, -0.1714329f, +0.2372353f, -0.2641358f, +0.1358673f, -0.0415766f, +0.1290039f,
  +0.1885020f, +0.1073690f, -0.2194485f, -0.0885785f, +0.2995856f, +0.2177763f, -0.0806343f, +0.0010978f,
  -0.2096883f, -0.0464111f, -0.5757902f, +0.0506177f, -0.1364764f, +0.2061119f, +0.0573985f, +0.0464460f,
  -0.2359937f, +0.2113732f, -0.2131095f, +0.3165771f, +0.0351100f, +0.1542413f, +0.0887668f, +0.0737306f,
  -0.1192656f, +0.0389645f, -0.2252090f, -0.2644774f, +0.0218932f, +0.1853701f, +0.3178301f, +0.1144227f,
  +0.0886720f, +0.1872531f, -0.0293018f, +0.1391774f, -0.3640289f, -0.1477793f, -0.4102711f, -0.3548012f,
  -0.2518554f, +0.0670894f, -0.1974905f, +0.1264520f, -0.0635134f, -0.0890233f, +0.1147539f, +0.0031576f,
  -0.0311711f, +0.1034294f, -0.1658496f, -0.0018362f, -0.1095085f, +0.2731938f, +0.2443317f, -0.2745560f
);

const float biases[4] = float[4](
  +0.1426332f, +0.0225446f, +0.0437545f, -0.0950544f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer6 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0398028f, +0.0696256f, +0.0011056f, -0.0909539f, -0.0340397f, +0.1245725f, -0.1615974f, -0.4806863f,
  -0.3186768f, -0.0152805f, -0.0989193f, +0.0559045f, +0.0173298f, -0.2740731f, +0.2606664f, +0.0430132f,
  +0.0264091f, -0.1660016f, +0.1059838f, +0.0945367f, +0.2726057f, +0.1313855f, -0.0036232f, +0.1775072f,
  -0.2185680f, +0.0047538f, -0.1278609f, -0.1683988f, -0.1811078f, -0.1311481f, +0.0169198f, -0.0761946f,
  -0.1897403f, +0.3485674f, -0.1185539f, -0.1835882f, -0.0923051f, +0.3100840f, -0.1793519f, +0.2433241f,
  -0.0908477f, -0.0079232f, -0.1010714f, -0.2001755f, -0.0719463f, +0.2903343f, +0.2045051f, +0.0992943f,
  +0.1131926f, +0.0603984f, +0.0557990f, +0.0289178f, -0.2655180f, +0.2794777f, -0.0883700f, -0.0938458f,
  -0.2823205f, -0.2459285f, -0.2699554f, -0.0025315f, -0.0989213f, +0.1162225f, +0.2467210f, +0.0001444f,
  -0.0821108f, -0.0631102f, +0.1322007f, +0.1092810f, -0.2227437f, +0.0271587f, -0.2618181f, -0.1629184f,
  +0.1930002f, -0.3611090f, +0.0286326f, +0.2437866f, -0.2378088f, +0.0883878f, -0.0933283f, -0.0866017f,
  +0.1910071f, -0.1472526f, +0.0585675f, +0.0116261f, -0.1195979f, +0.0725765f, +0.3574586f, -0.0824016f,
  -0.1412106f, -0.0190517f, -0.0974213f, -0.0041334f, +0.1250356f, +0.1185475f, -0.0151169f, -0.1152658f,
  -0.4258175f, -0.1011533f, -0.2286970f, -0.2240387f, -0.1428206f, -0.1424378f, +0.2577263f, +0.0890205f,
  -0.1385886f, +0.1332774f, -0.1011694f, -0.1778984f, -0.3780523f, +0.1526661f, +0.2632027f, +0.4627595f,
  -0.1759468f, +0.2355611f, -0.1240351f, +0.0503595f, +0.0187476f, +0.1447125f, +0.3382664f, +0.0400829f,
  -0.0508411f, +0.3778118f, -0.1765796f, +0.1436357f, -0.0656957f, -0.4334841f, -0.0915992f, +0.0670861f,
  -0.0348013f, +0.1394049f, +0.0938464f, +0.4536204f, +0.0240249f, -0.1983192f, +0.0183714f, +0.2185300f,
  -0.3968545f, -0.0868271f, +0.1368861f, -0.0161053f, -0.1945136f, +0.0307423f, -0.6088834f, +0.1545735f,
  +0.3853285f, +0.2700689f, +0.2633699f, +0.2528040f, -0.0361458f, +0.1131245f, +0.3009342f, -0.2192690f,
  +0.5230994f, -0.1874972f, +0.2196893f, +0.5324173f, +0.4306922f, +0.2193199f, +0.1008478f, +0.0061122f,
  +0.3225574f, -0.1429261f, +0.1893615f, +0.2356363f, +0.4454646f, +0.0493547f, +0.0079358f, -0.0410033f,
  -0.4155551f, +0.1627977f, +0.5061245f, +0.3108143f, +0.0752338f, +0.0082661f, -0.1773468f, -0.2216538f,
  -0.2589057f, +0.1364386f, -0.4035279f, +0.3766412f, -0.0509421f, +0.0404328f, +0.1911010f, -0.2833593f,
  -0.0225902f, -0.2059081f, +0.0068837f, +0.0528566f, +0.0750219f, -0.1767792f, -0.0409755f, +0.0035583f,
  +0.2192521f, +0.1210014f, -0.0639326f, +0.0109175f, +0.0681789f, +0.2360408f, -0.0594129f, -0.0613448f,
  -0.3029467f, -0.2501744f, -0.2189454f, +0.1368975f, +0.1068674f, +0.1388564f, +0.1998156f, -0.0832120f,
  -0.1784456f, -0.2589419f, -0.0232817f, +0.0013050f, -0.2693572f, -0.1592739f, -0.0802587f, -0.1012416f,
  -0.0644726f, -0.0323126f, +0.0163945f, -0.0706635f, -0.2050929f, -0.0031519f, -0.0404877f, -0.0399073f,
  +0.2835447f, +0.2375611f, +0.1196211f, +0.1320194f, -0.0938176f, -0.0205215f, +0.1957594f, +0.2852602f,
  -0.0866083f, -0.1536384f, +0.0836171f, +0.0025153f, +0.1056625f, -0.0585104f, +0.0630479f, +0.0414846f,
  -0.1561968f, +0.2630405f, -0.0138096f, +0.0558840f, -0.1145984f, -0.0730087f, -0.1522891f, +0.1675391f,
  -0.1031266f, +0.0888381f, +0.4062392f, -0.0240995f, +0.0484592f, +0.0422009f, -0.1277671f, +0.1035636f,
  +0.0356987f, +0.2822193f, -0.1112669f, -0.0304914f, +0.1687571f, +0.4152105f, +0.1335459f, +0.0844588f,
  -0.2717217f, +0.2043037f, -0.0992511f, -0.1588961f, +0.4312199f, -0.0768777f, +0.1281942f, -0.0384034f,
  -0.0962177f, +0.0572032f, +0.4335396f, +0.0488699f, +0.3032369f, +0.2343903f, +0.1672637f, -0.1614266f,
  -0.1212263f, +0.2369147f, -0.2073102f, -0.0067899f, -0.1139193f, -0.1001796f, +0.0355774f, +0.0151812f
);

const float biases[4] = float[4](
  -0.1376152f, -0.0485656f, +0.0245173f, +0.0856224f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer7 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0610999f, -0.0492041f, +0.1516044f, -0.2175561f, +0.0195624f, +0.0645677f, -0.0101969f, -0.0323213f,
  +0.0647812f, +0.0763139f, +0.5227705f, -0.0041037f, +0.0500895f, +0.1338849f, -0.1367332f, +0.0195732f,
  -0.1130461f, -0.0408722f, -0.0454320f, -0.0079506f, -0.1139173f, -0.0006255f, -0.0438272f, -0.1276261f,
  +0.1507636f, -0.0104880f, -0.0965427f, +0.1227106f, -0.1209490f, -0.1186041f, +0.0153126f, -0.2547246f,
  +0.3189670f, +0.0396053f, -0.1299821f, -0.0377970f, +0.1255054f, +0.1897593f, -0.1354597f, -0.0359356f,
  -0.1017533f, +0.0432816f, +0.1769263f, +0.0910023f, -0.1809399f, -0.0434601f, -0.0104670f, +0.0837908f,
  +0.0008672f, +0.0751950f, -0.0937609f, -0.3113915f, -0.4668698f, +0.0521500f, +0.2074956f, -0.3649057f,
  -0.0765264f, -0.0388062f, -0.4778191f, +0.1125890f, +0.0460482f, -0.1893696f, -0.1297885f, -0.0352895f,
  -0.0461539f, -0.0350750f, +0.0368269f, -0.2451927f, +0.0819513f, -0.0724632f, +0.2974304f, -0.3196648f,
  -0.3166857f, +0.2093326f, +0.1749416f, +0.0810286f, -0.0353536f, +0.2980353f, -0.1757726f, -0.2940499f,
  +0.1869267f, +0.3295018f, -0.1450561f, -0.0058475f, -0.0927851f, +0.1126491f, +0.2011131f, +0.0461998f,
  +0.0754025f, -0.2673374f, +0.1323882f, -0.0300875f, +0.2287846f, -0.1054068f, -0.1292022f, -0.4181154f,
  -0.0743620f, +0.1612100f, +0.1573645f, +0.0858515f, -0.0129588f, -0.1207682f, +0.1350474f, -0.1587869f,
  +0.3210560f, +0.1312425f, +0.1615752f, +0.0884591f, +0.2586374f, +0.2347238f, -0.1341054f, -0.1221697f,
  -0.0455184f, -0.0819500f, -0.0121899f, +0.3220577f, -0.0304164f, -0.3257493f, +0.1170799f, -0.0281352f,
  +0.0818960f, +0.1526492f, -0.0980310f, -0.0072018f, -0.0530032f, +0.0236319f, +0.2435679f, +0.1813004f,
  +0.1366644f, -0.0736459f, -0.1242806f, -0.0302872f, +0.2552187f, -0.1265857f, +0.1189735f, -0.2042988f,
  +0.0042327f, -0.0764627f, +0.0581749f, -0.1157147f, +0.1306586f, -0.0012314f, +0.1874143f, -0.1349995f,
  +0.1535509f, +0.2036861f, +0.2268955f, -0.0953467f, -0.1547221f, +0.2594967f, -0.1383042f, +0.1488223f,
  -0.0455556f, -0.1946258f, -0.1270093f, +0.2201383f, -0.1870930f, -0.1575845f, -0.1228317f, +0.0589696f,
  +0.1133800f, +0.1406409f, -0.0946434f, +0.0597575f, +0.0330744f, +0.0775322f, -0.0070042f, +0.1439215f,
  -0.0746889f, +0.1663211f, -0.0095782f, +0.0977245f, +0.1045039f, -0.3076169f, -0.0309848f, +0.0066364f,
  +0.1645550f, -0.8951232f, -0.6507533f, +0.2135157f, -0.2764263f, -0.1778336f, +0.1507468f, +0.0192167f,
  +0.0703357f, -0.0301389f, -0.4845619f, +0.1235882f, +0.0268402f, +0.2370621f, +0.2127026f, -0.0937779f,
  +0.0160613f, +0.1387672f, -0.1592406f, +0.0359149f, -0.4167020f, +0.1870775f, +0.3066652f, +0.1183210f,
  -0.0191502f, -0.1867521f, -0.1455784f, +0.2634949f, -0.5823544f, +0.0526874f, -0.1173372f, -0.2411691f,
  +0.0054143f, +0.6210771f, +0.3259666f, +0.2146391f, +0.3420932f, -0.0214044f, -0.3775647f, +0.0715926f,
  +0.1141357f, +0.0496370f, +0.2248466f, -0.0649812f, -0.0616013f, +0.2186479f, -0.2009154f, -0.1649812f,
  -0.0947746f, +0.0717393f, -0.1084330f, -0.1811405f, -0.2790654f, -0.2621059f, -0.0280768f, +0.0428626f,
  -0.1208846f, +0.2638291f, +0.1174002f, +0.2972075f, -0.3916083f, +0.1753276f, +0.1551699f, -0.1672923f,
  +0.0534302f, +0.3023307f, +0.5444504f, -0.0240858f, -0.1444771f, -0.2182256f, +0.2105232f, +0.1595087f,
  -0.1031406f, -0.2759166f, +0.3987504f, -0.2448374f, -0.0573667f, -0.4604201f, +0.1513246f, +0.2517011f,
  +0.1687184f, +0.1548179f, -0.1032910f, +0.0399997f, -0.0799979f, +0.3403742f, -0.0455073f, -0.1960631f,
  +0.3170423f, -0.2350515f, -0.2970872f, -0.0926796f, +0.0907469f, -0.1828623f, -0.0497661f, -0.0581448f,
  +0.1743704f, -0.1730863f, +0.1979261f, +0.0524540f, -0.0979122f, +0.2943998f, +0.0029179f, +0.0440169f,
  +0.0001547f, +0.0362468f, -0.1901623f, +0.0207732f, +0.0656137f, -0.2144126f, -0.0384499f, +0.0422385f
);

const float biases[4] = float[4](
  +0.0333469f, +0.0459879f, -0.0076562f, -0.1869960f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer7 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1929885f, -0.3737809f, +0.1036876f, +0.1556443f, +0.1605494f, +0.0516674f, +0.2857382f, -0.0557703f,
  -0.2738513f, -0.2375267f, -0.0370316f, +0.2277094f, -0.0922139f, +0.2132907f, +0.0503701f, -0.0801940f,
  +0.1478482f, -0.0081555f, +0.1960035f, +0.2226600f, +0.1965654f, +0.3324939f, -0.0418044f, -0.0707205f,
  +0.0066063f, +0.1077691f, -0.3903743f, +0.1356261f, +0.0203993f, +0.2846698f, -0.0156248f, -0.0678421f,
  +0.5398992f, +0.3207387f, -0.0417019f, -0.2509428f, +0.4685115f, +0.0236368f, -0.0681413f, -0.0043845f,
  -0.1531781f, -0.0217850f, -0.1641255f, -0.1276783f, +0.0032187f, -0.1081170f, -0.3542660f, +0.0634636f,
  -0.0880816f, -0.0743182f, +0.1632952f, -0.1817789f, -0.1748897f, +0.1762771f, +0.1447570f, -0.1892045f,
  +0.0857855f, +0.0472649f, -0.0612394f, +0.2596150f, -0.5726669f, -0.0162769f, -0.6635155f, -0.1750799f,
  +0.1601530f, -0.0202798f, +0.3800479f, +0.2220493f, -0.1452398f, +0.1286737f, -0.0835768f, +0.2190849f,
  +0.1597176f, -0.1472107f, +0.0728352f, -0.4554787f, +0.2760126f, -0.0967930f, -0.3035034f, -0.0432949f,
  +0.0266425f, +0.0997951f, -0.2898169f, -0.0101128f, +0.3463885f, +0.2529532f, -0.2444559f, -0.2219047f,
  +0.2059343f, -0.2268655f, -0.0639682f, +0.0152965f, -0.1372178f, -0.2239368f, +0.1296154f, +0.1916701f,
  -0.2316343f, -0.0217014f, -0.4556677f, +0.0483577f, +0.2255687f, +0.0426819f, +0.0527112f, -0.1222566f,
  -0.0824645f, -0.3317633f, +0.2156778f, -0.0555738f, -0.2272113f, +0.1746209f, +0.1057258f, +0.0553246f,
  -0.2286648f, +0.2442864f, +0.2153715f, +0.0311212f, +0.0373922f, -0.0554073f, -0.1972064f, -0.0680954f,
  -0.1974562f, +0.1322274f, +0.0784360f, -0.3131351f, +0.2107404f, +0.1415059f, -0.2095029f, -0.2403167f,
  +0.0974687f, +0.0030492f, +0.1262000f, -0.1117704f, -0.0737439f, +0.1661553f, -0.0374360f, +0.2678571f,
  +0.0113435f, +0.1689914f, +0.0339216f, -0.0954289f, +0.2927862f, +0.5300656f, -0.2123838f, +0.2432744f,
  +0.0389559f, -0.2712339f, -0.3688080f, +0.0627018f, +0.0772442f, -0.0696375f, +0.0666342f, +0.1648266f,
  -0.0819186f, -0.0223425f, -0.1144397f, +0.0105896f, -0.1926369f, +0.3627687f, -0.0937669f, +0.0044086f,
  -0.0556622f, +0.0640395f, -0.0944883f, +0.1469501f, +0.0191126f, +0.3442835f, -0.1920760f, +0.3221141f,
  -0.0794227f, +0.3206368f, +0.0913494f, +0.0538287f, +0.0191875f, -0.0449856f, +0.2385829f, -0.1398800f,
  +0.1046637f, +0.2820434f, +0.2468266f, -0.0366942f, -0.4032409f, -0.8375715f, +0.0841073f, -0.2750117f,
  +0.1387033f, -0.1895491f, +0.2620629f, -0.2533148f, -0.0598150f, -0.0256887f, +0.2732474f, +0.3089414f,
  -0.0216142f, +0.0589705f, +0.0349339f, +0.0387006f, +0.4847389f, -0.2540496f, +0.0376991f, -0.0662054f,
  +0.0199327f, +0.2301372f, +0.0277838f, -0.0942852f, +0.0561067f, -0.5033378f, -0.4557150f, -0.2073274f,
  -0.0793643f, -0.0486883f, -0.1724569f, +0.0329171f, -0.1706693f, +0.1645959f, -0.2377268f, +0.0072581f,
  -0.0554419f, -0.1826355f, -0.1388216f, -0.1350240f, -0.0871885f, +0.0364237f, +0.3856133f, -0.2069006f,
  -0.1038555f, +0.1243176f, -0.2762959f, -0.1896281f, -0.2461785f, +0.0739767f, +0.5135760f, -0.4326101f,
  +0.2557420f, +0.1992367f, -0.1167718f, -0.1230866f, -0.3637916f, +0.3357131f, +0.1595349f, +0.0482643f,
  -0.0646354f, +0.0318073f, +0.2283984f, +0.1808853f, -0.1283856f, +0.2351599f, -0.0270657f, +0.1318658f,
  +0.0620524f, -0.1334730f, +0.4029182f, +0.1967048f, +0.3951065f, +0.1836760f, -0.1328382f, +0.0260704f,
  -0.1717991f, +0.1733011f, +0.2437159f, +0.1519864f, +0.2769229f, +0.3388915f, -0.1271385f, -0.1694301f,
  +0.3270758f, +0.0293529f, +0.1088045f, +0.2370736f, -0.1947433f, -0.4289729f, -0.1289590f, -0.1065568f,
  +0.1142676f, -0.2359114f, -0.0141183f, -0.1274280f, +0.1652300f, -0.3959652f, -0.1678185f, +0.1739573f,
  -0.0431016f, +0.0393876f, -0.0052324f, -0.1203695f, +0.1788102f, -0.0571319f, -0.4757518f, -0.2004715f
);

const float biases[4] = float[4](
  -0.0193698f, -0.0775703f, -0.0497324f, +0.0377350f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer8 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0412749f, +0.2514621f, -0.1427706f, -0.2389216f, -0.1374340f, +0.1517144f, +0.4161703f, +0.4128942f,
  -0.2143573f, -0.0302544f, +0.2243784f, -0.0577966f, +0.0689962f, -0.1696128f, -0.0616126f, -0.0510263f,
  +0.1034978f, -0.0978159f, +0.0983765f, -0.0383311f, +0.1678016f, +0.0119684f, -0.1346414f, -0.0812324f,
  -0.1071803f, -0.2051982f, +0.1177441f, -0.0270533f, +0.0568061f, -0.1354348f, +0.3651466f, -0.1112351f,
  +0.0297566f, -0.0272965f, -0.1396036f, +0.0218727f, -0.1620902f, -0.2796110f, +0.1402569f, +0.0038036f,
  -0.1349082f, -0.2433692f, -0.2052418f, +0.0684729f, -0.0415086f, +0.2832302f, -0.2771469f, -0.3117587f,
  +0.1132360f, +0.2327499f, +0.0255297f, +0.0235395f, +0.1509838f, -0.2700435f, +0.3013284f, +0.0722890f,
  +0.0761722f, +0.0352503f, +0.0536031f, -0.3208209f, +0.0776505f, -0.1014466f, +0.1444550f, -0.0269740f,
  -0.0735019f, +0.4338772f, +0.1231629f, -0.0275025f, +0.0403204f, +0.0233948f, +0.0470785f, +0.1214410f,
  -0.1082367f, +0.1101322f, +0.0834276f, +0.0318147f, -0.1239985f, -0.3391798f, +0.0857158f, +0.0295932f,
  +0.1974976f, +0.1178054f, -0.0696486f, +0.0926988f, -0.0862902f, +0.1462367f, +0.2910154f, +0.0284271f,
  +0.0191770f, +0.0617633f, -0.0377847f, +0.5074515f, +0.0432503f, +0.2213296f, +0.1763752f, +0.2045933f,
  +0.0164121f, +0.0301929f, +0.0809790f, +0.1759797f, +0.0437216f, -0.3196875f, +0.0062762f, +0.2610487f,
  +0.1745429f, +0.1139288f, +0.2810493f, -0.1632679f, -0.4278039f, -0.3805270f, +0.0545337f, +0.3075997f,
  -0.2830912f, +0.0952526f, +0.4447007f, -0.0584042f, +0.3339962f, -0.0142045f, -0.1220576f, +0.3898233f,
  -0.1187158f, -0.1617390f, -0.1285944f, +0.0296840f, +0.0188803f, +0.1191746f, -0.0167353f, -0.1201263f,
  -0.1913890f, +0.0151957f, -0.0239441f, -0.0828872f, +0.3894099f, -0.1614080f, -0.0685635f, -0.1298160f,
  -0.2566561f, -0.0097596f, +0.0677881f, +0.1280589f, +0.2676150f, -0.0589273f, +0.0986094f, -0.1913967f,
  +0.0040940f, +0.2039899f, +0.0418203f, -0.0094120f, -0.0608631f, -0.2483614f, -0.0670126f, +0.1087381f,
  +0.1814186f, +0.1506691f, -0.0497474f, +0.0637272f, +0.0406453f, -0.1596099f, -0.1317673f, +0.0106681f,
  -0.0035787f, -0.1287749f, +0.2307337f, +0.3023893f, +0.1505295f, -0.2653420f, -0.1378272f, -0.0491304f,
  +0.1062225f, -0.0680969f, +0.2321398f, -0.0718265f, +0.1586220f, -0.2410791f, -0.0842594f, +0.2169596f,
  +0.1567151f, +0.0864532f, +0.5242559f, -0.3947181f, +0.1367157f, -0.1460809f, +0.0769255f, -0.1204993f,
  +0.2989359f, -0.1132651f, +0.4476223f, +0.1952085f, +0.2531032f, +0.0403523f, -0.2747295f, -0.0062013f,
  +0.1245905f, -0.1104187f, -0.3571866f, -0.2857876f, +0.1991180f, -0.2322318f, -0.0465790f, -0.3657685f,
  -0.0995471f, +0.0841345f, +0.2126780f, +0.0674271f, +0.1405755f, -0.0798874f, -0.2286787f, -0.3535649f,
  -0.0920905f, -0.3208352f, +0.1904670f, -0.1716946f, -0.0516513f, +0.1644098f, +0.1529072f, -0.1975605f,
  -0.0396733f, +0.0858125f, -0.3599374f, -0.1629076f, -0.2318985f, -0.2027517f, +0.1094961f, -0.2300859f,
  +0.2292394f, +0.0185823f, -0.4220929f, +0.2920983f, -0.0588585f, +0.1387867f, -0.0134701f, +0.1606227f,
  +0.0947280f, +0.3067487f, -0.1208810f, +0.0599036f, +0.0954477f, -0.0582046f, +0.1571252f, -0.1014051f,
  -0.1459104f, +0.1136690f, -0.1852652f, +0.0547337f, +0.0347757f, -0.3936298f, +0.3800092f, +0.2568540f,
  +0.1850653f, +0.1065320f, -0.0964098f, +0.2423454f, +0.0368941f, -0.0091438f, +0.0205259f, -0.0528540f,
  +0.3741133f, -0.3120314f, +0.2027217f, +0.2039207f, +0.1743347f, +0.0455425f, +0.2923609f, +0.0467464f,
  +0.3077265f, +0.0325428f, +0.0915240f, -0.4240941f, -0.1080189f, -0.0684066f, -0.0007712f, +0.0827516f,
  -0.1708665f, +0.0754519f, -0.2242863f, +0.1236423f, +0.1544694f, +0.0772729f, -0.0691097f, -0.0667593f,
  -0.0462228f, +0.0680584f, +0.0331011f, -0.4666197f, -0.0399512f, -0.1012702f, +0.1496247f, -0.0924306f
);

const float biases[4] = float[4](
  +0.1251902f, +0.0209467f, +0.0190635f, -0.0894912f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer8 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0124954f, +0.0385857f, +0.1541524f, +0.0337747f, +0.0539916f, +0.2780993f, +0.3539107f, +0.1042099f,
  -0.1134208f, -0.1513876f, +0.5117711f, +0.0757296f, +0.0821804f, +0.3320506f, +0.2268082f, -0.3202100f,
  +0.0226385f, -0.1151439f, +0.1580941f, +0.5176015f, -0.1458849f, +0.2070482f, +0.1442309f, -0.0233830f,
  +0.1183297f, +0.2264322f, +0.4478624f, -0.0635831f, -0.2524688f, -0.0831556f, +0.1657784f, -0.0606199f,
  +0.0597605f, +0.0315727f, +0.3913722f, -0.5294267f, -0.2464788f, -0.0630627f, +0.3899868f, -0.2383124f,
  -0.1859579f, -0.1467001f, +0.1058834f, -0.2255212f, -0.2308010f, -0.0479579f, +0.1866782f, +0.0929749f,
  -0.0113982f, +0.1786433f, +0.1854023f, +0.0274942f, -0.1206698f, -0.2738894f, +0.1776613f, +0.0858226f,
  -0.0647881f, +0.2019574f, +0.1611714f, -0.0355297f, -0.0531497f, -0.0049677f, +0.2854757f, +0.1330425f,
  -0.1085535f, -0.1624666f, +0.0851804f, +0.0187260f, +0.0865236f, -0.1404407f, +0.0380381f, -0.1109817f,
  -0.1818059f, -0.1418473f, -0.2919544f, +0.1572832f, +0.1356530f, +0.2342921f, -0.1073785f, -0.0883086f,
  +0.0542893f, +0.0659370f, +0.2871729f, +0.0218670f, -0.2504880f, +0.1646333f, +0.0554326f, +0.6073634f,
  +0.0732044f, -0.0477158f, +0.3837517f, +0.2372220f, -0.0794569f, +0.0159686f, +0.1343978f, +0.2884586f,
  -0.0886852f, +0.1095025f, +0.2316739f, +0.1686914f, +0.2793100f, +0.0053248f, +0.3258270f, -0.3019354f,
  -0.0196598f, -0.1060941f, +0.0874047f, +0.3366246f, -0.1616117f, +0.1016293f, +0.1373466f, -0.1275074f,
  -0.1195052f, +0.1122021f, +0.1429407f, -0.1604615f, +0.0134254f, +0.1951740f, +0.0049946f, +0.2082506f,
  -0.2458592f, +0.1117326f, +0.0669326f, -0.0396719f, +0.0297545f, -0.0062126f, +0.1182145f, -0.2715354f,
  -0.2860592f, +0.2934050f, -0.1974488f, -0.2185612f, -0.6618323f, -0.6116150f, +0.1654473f, +0.1020945f,
  -0.3902157f, -0.0937567f, +0.0159471f, -0.1493099f, +0.0813233f, +0.0769658f, -0.0148728f, -0.0751019f,
  -0.0839118f, +0.0470913f, +0.1156035f, +0.1712127f, -0.1442477f, +0.2499269f, +0.2992136f, +0.1393707f,
  +0.3639866f, -0.1166493f, +0.1093348f, +0.0889187f, +0.3154554f, +0.0857931f, +0.1348558f, +0.2616457f,
  +0.1515780f, -0.1543426f, +0.0832060f, -0.0993964f, -0.0360817f, -0.0850237f, -0.1210013f, +0.1315137f,
  +0.0944666f, +0.1065012f, +0.1345661f, -0.1503122f, -0.0446561f, +0.3475478f, +0.2588741f, +0.1930342f,
  -0.0455757f, -0.1039212f, +0.2858113f, +0.0579899f, -0.1685464f, -0.1469166f, +0.3834370f, +0.0168804f,
  -0.0790963f, +0.1968827f, +0.2413488f, +0.3004254f, -0.3912070f, -0.2184791f, -0.0106359f, -0.0416227f,
  +0.2555090f, -0.2182935f, +0.2529958f, -0.1693996f, +0.0818266f, -0.0038786f, +0.2436066f, +0.0481471f,
  -0.1169525f, +0.2161417f, +0.2002303f, +0.0224916f, -0.2773730f, -0.4005923f, +0.2422744f, +0.2002061f,
  -0.0499807f, -0.3736245f, -0.0859454f, -0.0479401f, -0.1916943f, -0.2754741f, -0.1705553f, -0.1802918f,
  +0.3032987f, +0.1487202f, +0.0399315f, +0.0918053f, -0.3128367f, -0.0836003f, -0.2126299f, +0.0826536f,
  +0.2575557f, +0.2049661f, -0.3384932f, -0.4550951f, -0.0229893f, +0.0538336f, +0.4725402f, -0.2109245f,
  -0.1931513f, +0.1235016f, -0.3056229f, +0.0603273f, -0.1320459f, +0.1226399f, +0.1854841f, +0.1650715f,
  -0.2761551f, -0.0786476f, -0.2412242f, -0.0951528f, -0.3492635f, +0.2406215f, -0.0911540f, +0.0258534f,
  +0.0864163f, +0.2804391f, -0.5482913f, -0.0419535f, +0.3696298f, -0.1250728f, -0.0618315f, -0.1210560f,
  -0.0403320f, +0.1436710f, +0.0506109f, +0.1129467f, +0.0794518f, +0.1491316f, +0.0912683f, +0.1608615f,
  +0.1038027f, +0.2618567f, -0.0803234f, -0.0922363f, -0.0124203f, +0.0589984f, -0.1326583f, -0.1354938f,
  +0.0718684f, -0.0348325f, +0.0135736f, -0.0845305f, +0.2184319f, +0.1897064f, +0.1202319f, +0.1275812f,
  -0.1075061f, -0.3328871f, +0.0438591f, -0.0175503f, +0.2482165f, +0.0168400f, +0.1387728f, -0.0010971f
);

const float biases[4] = float[4](
  -0.0996115f, +0.0228651f, +0.0208685f, +0.0683941f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer9 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3427385f, -0.2267610f, -0.1207711f, +0.1252792f, -0.3030141f, +0.2706289f, +0.0707536f, +0.1194151f,
  -0.0941261f, +0.0451459f, -0.1954389f, -0.1892691f, -0.3291142f, -0.4796938f, +0.0718627f, +0.0060641f,
  -0.1500799f, +0.1662413f, +0.0310164f, +0.0120217f, -0.4476135f, +0.0639419f, -0.0644953f, +0.0952568f,
  +0.0699278f, +0.2160981f, +0.1361917f, -0.1310671f, +0.0438992f, +0.0902117f, +0.2087545f, +0.1199903f,
  -0.1731745f, -0.3268619f, -0.0510489f, +0.0793887f, -0.2162859f, -0.4186151f, +0.2298848f, +0.1507673f,
  +0.1151896f, +0.0750263f, -0.5543621f, +0.0144307f, -0.0157347f, -0.0989745f, -0.1975427f, -0.5020510f,
  -0.3383245f, -0.1999572f, +0.1839947f, -0.3407739f, -0.1515647f, +0.5350196f, -0.2461497f, -0.0518423f,
  -0.0027618f, +0.0112409f, +0.1111910f, -0.2444314f, -0.0774961f, -0.1130791f, -0.0701256f, +0.1942296f,
  +0.0767453f, -0.0830745f, +0.1129755f, +0.0183621f, -0.2229073f, +0.2725609f, -0.1758810f, +0.0597118f,
  +0.1324694f, +0.2801755f, -0.0856085f, +0.0442789f, -0.0705922f, -0.0677710f, +0.1078074f, -0.0790473f,
  -0.0414008f, +0.2102257f, +0.2419791f, -0.0426913f, -0.3089585f, -0.1076056f, -0.3195382f, +0.2084749f,
  +0.0845037f, -0.1107850f, +0.0957879f, -0.1123070f, -0.1296498f, -0.1507716f, -0.0409929f, -0.0649575f,
  -0.0584865f, +0.0726677f, -0.0562706f, +0.0423738f, +0.0194044f, +0.0565764f, -0.0123542f, +0.0372720f,
  -0.0572977f, +0.3094895f, -0.0544450f, -0.1934600f, +0.4301588f, +0.0293206f, -0.1202503f, -0.2826457f,
  -0.1575904f, -0.0573128f, -0.1302162f, +0.0078258f, +0.4105456f, +0.1614707f, -0.0884461f, -0.1316876f,
  +0.1256245f, -0.0649740f, -0.0034088f, -0.1223325f, +0.0943146f, +0.0879627f, +0.3286697f, +0.2078313f,
  -0.2532059f, -0.0616741f, +0.2178624f, -0.0106344f, +0.2778622f, -0.1118195f, +0.3193851f, -0.1751521f,
  +0.0926818f, -0.0789398f, -0.4044176f, -0.1834142f, +0.2849699f, -0.1468764f, -0.1826013f, +0.0575391f,
  +0.1158099f, +0.0895232f, +0.2332377f, +0.1405143f, -0.1662345f, +0.0384488f, +0.2412620f, +0.0654110f,
  -0.1901093f, -0.0642571f, -0.0653578f, -0.1295390f, +0.2485791f, +0.0441661f, -0.0455169f, -0.3381786f,
  -0.0431687f, +0.0374097f, -0.2835854f, +0.1157212f, +0.1694954f, +0.3086611f, +0.1585426f, +0.1555908f,
  +0.0084005f, +0.0474549f, +0.1121207f, -0.0807940f, -0.2874478f, +0.3250463f, -0.0049978f, -0.0682345f,
  +0.2567978f, +0.1979550f, +0.1001498f, -0.1159822f, +0.0446576f, -0.2591495f, +0.2880710f, -0.1237330f,
  +0.3416934f, +0.6915302f, -0.2541317f, -0.1099822f, +0.1930141f, -0.1649098f, -0.0370723f, -0.1377498f,
  -0.1080543f, -0.2635942f, +0.0746297f, -0.0414124f, -0.1367904f, +0.4705003f, -0.1824656f, +0.0281005f,
  -0.0312687f, +0.2028856f, -0.1862628f, -0.1248667f, -0.0404545f, -0.0416318f, +0.0752888f, -0.0224363f,
  -0.0808966f, +0.0058064f, -0.2305459f, +0.0377537f, +0.1544235f, -0.1119775f, -0.0465287f, -0.3970037f,
  +0.0584797f, +0.1746743f, +0.1684933f, +0.2100253f, +0.0315914f, -0.2306519f, +0.1837432f, -0.1304090f,
  +0.0487472f, -0.0061216f, -0.0402650f, -0.1759904f, -0.3522578f, +0.1092744f, -0.2352791f, -0.2437727f,
  +0.3622500f, +0.0465216f, +0.1350883f, +0.0755554f, -0.0892107f, +0.1461394f, -0.0311684f, +0.1227218f,
  -0.3001923f, -0.0263678f, -0.0809947f, -0.1900872f, +0.2425500f, +0.0920308f, -0.0667223f, +0.0160755f,
  +0.1159459f, -0.1252409f, +0.0076957f, -0.2151778f, -0.3534612f, +0.5200484f, -0.4699708f, -0.2381919f,
  -0.0723801f, -0.3299777f, +0.0897759f, +0.0049395f, +0.1876248f, -0.2092556f, +0.2976716f, -0.1418525f,
  -0.0553953f, +0.2612823f, +0.4169852f, -0.0643022f, +0.5893620f, -0.0209369f, -0.0047022f, -0.0145818f,
  -0.0005866f, -0.2698345f, -0.0201593f, -0.2126251f, -0.2659934f, +0.0050193f, -0.3377088f, -0.1855806f,
  +0.1168017f, -0.0470571f, +0.0139758f, -0.1858838f, +0.2850265f, +0.0343309f, +0.0191745f, +0.0072431f
);

const float biases[4] = float[4](
  -0.0908867f, +0.0154552f, -0.0851966f, -0.0528025f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer9 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0944432f, +0.1348208f, +0.1818161f, -0.1186698f, -0.5449023f, -0.2783156f, -0.0849423f, -0.1413721f,
  -0.1302203f, -0.4160318f, +0.1350981f, +0.1587952f, +0.4205239f, -0.2901247f, -0.1375400f, -0.0219540f,
  +0.3305664f, -0.1391621f, +0.0223975f, +0.0491683f, +0.0547365f, +0.3557951f, +0.0223897f, -0.0783924f,
  +0.2633942f, +0.0676178f, -0.0940526f, -0.0220528f, -0.3816435f, -0.3013862f, +0.0418246f, -0.0744954f,
  -0.0531820f, +0.2614442f, -0.1376547f, +0.0559965f, -0.1376600f, -0.7153655f, -0.2130231f, +0.1735416f,
  -0.2569222f, -0.0846228f, +0.0475571f, +0.3081822f, +0.3937005f, -0.3329564f, +0.2773601f, +0.3139760f,
  +0.0700659f, +0.4109179f, +0.0746705f, +0.3303221f, -0.0279527f, +0.4566911f, +0.1867613f, +0.0916573f,
  +0.0523174f, +0.2964138f, -0.5692883f, -0.1147521f, -0.0997195f, +0.0357674f, -0.2751262f, +0.0333133f,
  +0.1524280f, +0.1847111f, -0.4881511f, +0.1022791f, -0.2161178f, -0.1546344f, -0.3871146f, -0.0739270f,
  -0.2950219f, -0.0487521f, -0.3504123f, -0.1761883f, +0.2956638f, -0.1620722f, +0.2145624f, -0.3753839f,
  +0.2164853f, -0.1098994f, +0.0507364f, +0.0592426f, +0.0054907f, -0.0562357f, +0.0126668f, -0.0143224f,
  +0.1501897f, +0.1760895f, +0.0315972f, +0.1229937f, +0.0640114f, -0.0392259f, -0.0113158f, -0.1121602f,
  -0.0671821f, +0.2721245f, -0.1325644f, +0.1821621f, -0.1577857f, -0.0570947f, +0.1580646f, +0.1493668f,
  -0.4545749f, +0.1875975f, -0.0640344f, -0.0390128f, -0.2747340f, +0.0814443f, +0.1868704f, +0.1343429f,
  +0.2008874f, +0.1164466f, +0.0056972f, +0.1484873f, -0.2603516f, +0.1246808f, +0.2452714f, +0.1004588f,
  +0.2353136f, -0.1056636f, -0.0044844f, -0.0261281f, -0.0749187f, -0.1092474f, +0.3193334f, -0.0106017f,
  +0.1158297f, +0.2373070f, +0.2020034f, +0.0246705f, -0.2439137f, +0.0889739f, +0.1695387f, -0.2316571f,
  +0.0641656f, -0.1895069f, +0.3496612f, +0.4009588f, -0.0226477f, +0.4293362f, +0.0482619f, +0.1080542f,
  -0.1564037f, +0.0083492f, +0.0834643f, -0.3388168f, -0.2480471f, -0.0772501f, -0.3229452f, -0.1259078f,
  -0.0681242f, -0.2950881f, +0.0764843f, +0.2759077f, -0.1599922f, -0.0970350f, -0.2741387f, +0.2116859f,
  -0.2062351f, -0.0436391f, -0.1934765f, +0.2819917f, +0.3112448f, -0.0755128f, +0.0540551f, -0.3207009f,
  +0.2980919f, -0.1223793f, -0.1993775f, +0.0303351f, -0.4361492f, +0.0687497f, -0.3433023f, -0.0379915f,
  -0.1015097f, +0.2192521f, -0.1919721f, -0.0901316f, -0.4486515f, +0.1917606f, -0.3564195f, +0.1810995f,
  -0.0424113f, +0.0563088f, +0.1818888f, +0.0963070f, -0.5082253f, -0.2809651f, -0.0528022f, +0.4517435f,
  -0.0544977f, +0.0192482f, -0.1490827f, -0.0683184f, +0.5486352f, -0.3112217f, -0.1368708f, +0.0055637f,
  +0.1042159f, +0.3714723f, -0.3041288f, -0.3654790f, +0.3068052f, -0.1613045f, -0.2246872f, -0.0529101f,
  +0.3629335f, +0.0231597f, -0.0370963f, -0.1409391f, +0.6062280f, -0.3916140f, -0.4083697f, +0.0120798f,
  -0.0637960f, -0.0161112f, -0.2562892f, -0.0978770f, +0.0475119f, -0.0172544f, +0.2287473f, -0.0717495f,
  -0.2130525f, +0.0878286f, -0.1766712f, -0.1086879f, -0.0206570f, -0.1685907f, +0.1252697f, +0.3224676f,
  -0.0126734f, -0.0269842f, -0.3182953f, +0.1344474f, +0.1063030f, -0.0233374f, +0.0623417f, +0.0482101f,
  -0.1662908f, +0.0522740f, +0.2357019f, +0.2281609f, +0.0545578f, +0.0456852f, +0.0155629f, +0.2811758f,
  +0.1334837f, -0.4377896f, -0.0932592f, -0.0072153f, -0.2533741f, +0.2197837f, +0.0117996f, -0.3182091f,
  +0.0238366f, -0.3521691f, -0.2076751f, -0.0520301f, -0.0315680f, +0.0933816f, +0.1867067f, +0.0923735f,
  +0.0896303f, +0.2576312f, +0.1574976f, +0.1660096f, +0.2620801f, -0.0629108f, -0.0479062f, -0.0370983f,
  -0.2010710f, +0.0239529f, -0.0681114f, -0.0919489f, -0.0365037f, +0.0692290f, -0.0093676f, +0.0505679f,
  -0.1230377f, +0.0140698f, +0.0189168f, +0.1408507f, -0.0179997f, -0.0520480f, -0.0054633f, -0.0255277f
);

const float biases[4] = float[4](
  -0.0002164f, +0.0108875f, -0.0159471f, +0.0556649f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer10 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0939569f, -0.0474174f, -0.1770809f, +0.0430471f, +0.2427896f, +0.0955504f, -0.3234236f, +0.1889509f,
  -0.0180488f, -0.1022923f, -0.2585021f, -0.1551542f, +0.2445861f, -0.0041440f, +0.1569517f, +0.0851583f,
  +0.1985202f, +0.0638196f, +0.0628181f, +0.1421577f, -0.0686866f, +0.1073828f, -0.0638980f, +0.0153053f,
  +0.0060934f, -0.1236966f, +0.0098287f, +0.0044357f, -0.2149342f, +0.1666030f, +0.2596286f, -0.3187263f,
  +0.0803471f, -0.3638074f, +0.0244884f, -0.0391396f, +0.2569375f, +0.0457744f, -0.0611195f, +0.0873762f,
  +0.2156765f, -0.2719708f, -0.0006891f, +0.0611479f, -0.0323937f, -0.0152206f, +0.1202404f, +0.2833858f,
  +0.1188820f, +0.0857464f, -0.0922174f, -0.0171202f, +0.0202293f, -0.0114320f, -0.1129214f, +0.0497018f,
  -0.0624830f, +0.3190522f, -0.0375507f, -0.0963777f, +0.2513286f, +0.0719371f, +0.2223440f, +0.1692323f,
  +0.0651981f, -0.2431870f, -0.0070297f, -0.1818351f, +0.0724233f, -0.0023543f, +0.0070401f, +0.3163649f,
  -0.0797467f, +0.1667315f, -0.0543012f, +0.1386351f, -0.4679936f, -0.0672012f, -0.0985460f, +0.4087628f,
  -0.0435616f, -0.0673813f, +0.0015076f, +0.1306141f, -0.3568267f, -0.0971237f, -0.0448504f, -0.0812896f,
  -0.2440877f, +0.0899073f, -0.2038911f, +0.0081107f, -0.0677416f, +0.0813882f, +0.1069611f, -0.1714185f,
  +0.2479791f, -0.0182291f, -0.3558930f, +0.1422046f, +0.1041352f, +0.0793898f, -0.0368585f, +0.2717629f,
  -0.1941893f, -0.2250165f, -0.5564953f, +0.0575491f, -0.2122075f, -0.2862191f, +0.1291591f, -0.1319531f,
  -0.1500245f, +0.0828411f, -0.0253296f, +0.0772598f, -0.1469132f, +0.0214604f, +0.1437960f, +0.1522872f,
  +0.1892638f, -0.1409722f, -0.0991162f, -0.2665754f, -0.0452186f, -0.2478802f, -0.0803814f, -0.1891735f,
  +0.3484592f, +0.1857512f, +0.0509509f, +0.3333650f, -0.0727409f, +0.0277697f, -0.0742719f, -0.0807637f,
  +0.2112926f, -0.1312656f, -0.3959842f, +0.1537786f, -0.2028023f, -0.2109382f, -0.2266098f, -0.0412928f,
  +0.0072468f, -0.0095049f, +0.1954179f, +0.2623888f, +0.2446957f, -0.2761075f, -0.1418840f, -0.0042537f,
  +0.0969918f, +0.1196391f, -0.0748888f, +0.4465133f, +0.1683339f, -0.1716885f, +0.0355402f, +0.0179587f,
  -0.1610147f, +0.0389501f, +0.0147163f, -0.0311620f, +0.3439321f, +0.1315034f, +0.1674972f, -0.0809625f,
  -0.1600006f, -0.1964165f, -0.0716772f, -0.1464144f, +0.4388196f, -0.2674690f, +0.0021332f, +0.2217477f,
  -0.3434507f, +0.1291048f, -0.1223423f, +0.4671981f, -0.1258379f, +0.0140406f, -0.5062474f, -0.0163406f,
  +0.0639664f, -0.1310545f, -0.2187341f, +0.0328597f, +0.5070671f, +0.0503799f, -0.2101887f, +0.0759707f,
  +0.1478540f, -0.1405698f, +0.0201620f, -0.3425580f, -0.0829056f, -0.3238250f, +0.1581449f, +0.1064246f,
  -0.0481527f, -0.2423490f, +0.1401651f, +0.1184484f, -0.4829101f, -0.3537670f, -0.2035587f, -0.0354615f,
  +0.2204066f, -0.3435614f, -0.2361854f, -0.0962212f, +0.0152241f, +0.1708734f, -0.1316385f, +0.0224631f,
  +0.0390530f, +0.1594778f, +0.1017845f, +0.1954924f, +0.0356187f, +0.0696860f, -0.2747138f, -0.2431509f,
  +0.1661280f, +0.1264062f, +0.0350210f, +0.1554081f, +0.2961629f, -0.2897857f, -0.0430228f, +0.0177263f,
  +0.1164936f, -0.2223228f, +0.0229482f, +0.0968970f, +0.3545368f, +0.2284062f, -0.1107805f, -0.0203550f,
  -0.1130479f, -0.0858528f, +0.0382986f, -0.1009373f, +0.2433910f, +0.1839886f, +0.0445049f, -0.1477677f,
  +0.3626539f, +0.1181059f, +0.4050995f, +0.3587773f, -0.0397402f, -0.0312540f, -0.0589454f, +0.0102516f,
  -0.0430558f, +0.0061179f, +0.1013160f, +0.0027298f, +0.3209424f, -0.0332736f, +0.0165644f, +0.1056890f,
  +0.1005683f, -0.1093454f, +0.0095492f, -0.1361240f, +0.3396183f, +0.1348194f, -0.0971056f, +0.2791396f,
  +0.1421475f, -0.0493041f, -0.0671661f, -0.0037554f, +0.1826348f, -0.0341039f, +0.0664575f, +0.2421958f,
  -0.0244039f, -0.1907087f, -0.0610332f, -0.0128217f, +0.1408151f, +0.2944125f, +0.0216994f, -0.0368858f
);

const float biases[4] = float[4](
  +0.0830173f, +0.0318073f, +0.0414508f, -0.0973677f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer10 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0945532f, +0.0725738f, -0.0716695f, -0.1005543f, +0.2071961f, +0.0467705f, -0.5005271f, +0.1521256f,
  +0.0739599f, -0.1522779f, +0.2799031f, +0.0988108f, +0.4449207f, +0.2434324f, -0.0872179f, +0.2531289f,
  +0.0770406f, +0.1450705f, +0.1583724f, -0.0755320f, +0.0166611f, +0.2567298f, -0.0438227f, +0.1362973f,
  +0.1290572f, -0.4058826f, +0.1833240f, -0.0284401f, -0.6033480f, +0.3152436f, -0.1857294f, -0.0561501f,
  +0.4070584f, -0.0101413f, +0.1072555f, +0.0620189f, +0.2555133f, -0.3299800f, -0.3379612f, +0.3016171f,
  -0.1406634f, -0.1407723f, -0.0436749f, -0.1414157f, +0.3531858f, -0.0520004f, -0.0629302f, -0.1148976f,
  +0.0713915f, -0.2208227f, -0.2257321f, +0.3611479f, -0.2107210f, -0.2407935f, +0.0263766f, +0.0531653f,
  +0.0558892f, -0.0464890f, +0.0457789f, +0.3863973f, -0.1867971f, +0.1482905f, -0.1598225f, +0.1686226f,
  +0.1035096f, +0.3810653f, -0.0046160f, +0.0128271f, +0.1336007f, -0.2017203f, -0.1698576f, +0.0954305f,
  -0.2779843f, +0.0739962f, -0.0164915f, -0.1089956f, -0.2307990f, -0.1848317f, +0.3842147f, -0.0743995f,
  +0.0939034f, -0.2531121f, -0.1509486f, +0.3878480f, +0.1695657f, -0.2022212f, -0.0162519f, -0.0333218f,
  -0.2943577f, +0.0167810f, -0.2680781f, -0.0944564f, -0.0914510f, +0.1530838f, +0.0429340f, -0.1851001f,
  +0.0087526f, -0.0430152f, -0.0380390f, -0.4047123f, -0.3516811f, +0.0045363f, +0.7054174f, +0.1934855f,
  +0.4288620f, +0.1783769f, +0.1705893f, -0.0911513f, +0.1773673f, -0.1922682f, +0.0250882f, -0.0117748f,
  -0.0646636f, +0.1849423f, -0.1595511f, -0.0769025f, -0.1871321f, -0.1370103f, -0.1787559f, -0.1541297f,
  +0.1057062f, -0.0335258f, -0.4621385f, +0.0909297f, +0.5062608f, -0.0559266f, -0.5601823f, +0.1515974f,
  -0.4774269f, +0.0908060f, +0.0849578f, -0.2296061f, +0.4724814f, +0.3057956f, -0.1495707f, -0.0185324f,
  -0.2244836f, +0.1444452f, -0.1856355f, +0.0338074f, -0.1176642f, -0.1096798f, -0.0332667f, -0.0245787f,
  -0.1443537f, +0.1883356f, -0.1459697f, -0.0587900f, +0.2117376f, -0.0873942f, +0.1223433f, -0.0184063f,
  -0.0945195f, +0.0482455f, -0.0624514f, +0.0752232f, -0.3319170f, -0.3103353f, +0.0897694f, -0.0626025f,
  +0.1057893f, +0.0917163f, +0.0112372f, -0.0217019f, +0.2565746f, -0.2141398f, -0.0245007f, -0.1032110f,
  -0.0374041f, -0.1546288f, +0.0114178f, +0.5140765f, +0.2056409f, -0.0628837f, -0.2535891f, -0.2306802f,
  -0.3820454f, +0.0174414f, +0.1938013f, +0.0075689f, +0.0731865f, +0.0843380f, -0.0524726f, -0.4557042f,
  -0.1619860f, +0.0472088f, -0.0045009f, +0.1025040f, +0.1014840f, -0.0845326f, -0.2066474f, +0.0151905f,
  -0.1050307f, +0.0189629f, -0.1744760f, +0.3378990f, +0.0337260f, +0.0919491f, -0.4420980f, -0.1273765f,
  -0.1530623f, +0.3573222f, -0.0206747f, +0.1721946f, +0.2349937f, +0.0960922f, -0.3115541f, -0.3285966f,
  +0.1797422f, +0.0787303f, -0.2220362f, +0.0889829f, +0.1825576f, -0.0288169f, -0.1717013f, -0.2781502f,
  +0.0736292f, -0.0467018f, +0.0063236f, +0.1559259f, +0.1031634f, -0.1897280f, -0.2016645f, -0.0070926f,
  +0.1412833f, -0.0367105f, -0.0581048f, +0.2250449f, -0.1230613f, +0.2143433f, -0.0239744f, +0.0979149f,
  -0.0592974f, -0.0099981f, +0.0474369f, +0.0518449f, +0.2444805f, +0.1157412f, -0.3208218f, -0.0605259f,
  +0.2072471f, +0.0526422f, +0.4801777f, +0.2724259f, +0.3689355f, -0.0792544f, -0.5805658f, +0.1072170f,
  +0.0038282f, +0.0860239f, +0.2528011f, +0.0893162f, -0.1561457f, -0.0940007f, +0.2521183f, -0.1281820f,
  -0.1844804f, -0.0748920f, +0.0182764f, +0.0180602f, +0.1039734f, -0.3790044f, +0.0605077f, -0.1381344f,
  -0.1734424f, +0.0809122f, -0.0170608f, -0.0433274f, +0.2468366f, -0.0077771f, +0.3645099f, +0.1079438f,
  +0.1095919f, +0.0903347f, +0.0715227f, +0.1418288f, +0.1218301f, +0.4969516f, +0.1121477f, -0.0017494f,
  +0.0415077f, +0.0443075f, +0.0261051f, -0.1281920f, -0.1089995f, -0.1188247f, +0.1083894f, +0.1172909f
);

const float biases[4] = float[4](
  -0.1128196f, -0.0085107f, +0.1043288f, +0.0506211f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer11 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1274099f, -0.1139677f, -0.1303092f, -0.0606408f, -0.3204706f, -0.0076423f, +0.0583947f, -0.2922290f,
  -0.0051869f, +0.3066598f, -0.0007214f, -0.2049228f, +0.0474876f, +0.0510118f, +0.1488565f, -0.1620102f,
  -0.0410199f, +0.0696343f, -0.0790660f, +0.0663170f, +0.1520644f, +0.0975728f, -0.1044980f, +0.0524677f,
  -0.2134258f, +0.1663251f, +0.1376758f, -0.2687249f, -0.2346072f, +0.1800509f, +0.2059890f, -0.4128769f,
  +0.0762591f, +0.3194175f, -0.0079232f, +0.0511724f, +0.0134320f, +0.4868461f, -0.2199084f, -0.1889108f,
  -0.0405733f, -0.0913205f, -0.0537202f, -0.0799196f, -0.0222512f, -0.1785169f, +0.1093117f, -0.1186939f,
  +0.0644003f, -0.0689539f, -0.0825428f, -0.2673282f, -0.0133295f, -0.1773393f, -0.1421600f, -0.2197138f,
  +0.1157296f, -0.0467515f, -0.0338964f, +0.0788904f, +0.1145742f, +0.0771683f, -0.3284714f, -0.1018382f,
  +0.0611371f, +0.1708554f, -0.0448151f, -0.1272127f, +0.1553691f, -0.1510781f, -0.0174556f, +0.0895656f,
  -0.1250861f, +0.3328416f, +0.4360275f, +0.1734039f, -0.3131678f, -0.0967038f, +0.1747800f, +0.0684358f,
  +0.0372289f, -0.1285495f, +0.1981042f, -0.2574141f, -0.4075203f, -0.0348831f, -0.0359295f, -0.2364563f,
  -0.1367483f, +0.2202244f, +0.0232757f, -0.1591693f, -0.3736011f, +0.1621087f, -0.1117159f, -0.0481380f,
  +0.2444187f, -0.0955008f, +0.0885574f, -0.1415341f, +0.2028586f, +0.0787180f, +0.1187984f, -0.1014531f,
  +0.1547466f, +0.2567672f, +0.3108828f, +0.2004494f, +0.2230391f, +0.5245697f, -0.0264226f, -0.1821705f,
  +0.0221420f, -0.1186783f, +0.2250228f, -0.0109222f, +0.1544260f, -0.1403379f, +0.1119139f, -0.1396986f,
  -0.1425697f, -0.2463118f, -0.1842418f, -0.0908316f, +0.0531866f, -0.1401765f, +0.0819100f, -0.2755118f,
  -0.1164197f, -0.1101739f, -0.0292604f, -0.0079827f, +0.1263650f, -0.1801833f, +0.4997146f, +0.3343533f,
  +0.1268185f, +0.1191932f, +0.0506081f, +0.0377524f, -0.1344840f, +0.0061042f, -0.0388674f, -0.0887457f,
  -0.0138188f, -0.3110220f, -0.1978880f, -0.0390836f, +0.0362415f, -0.0962501f, -0.3638162f, +0.4202679f,
  +0.0264339f, +0.0418267f, +0.1632009f, -0.0140632f, +0.0876953f, +0.2478340f, +0.0170329f, +0.2181929f,
  +0.1954791f, -0.0900660f, -0.0347550f, +0.0687049f, -0.1698412f, -0.4477335f, -0.2525325f, +0.2191392f,
  +0.0545402f, +0.0838084f, -0.0270202f, +0.2674468f, +0.0187248f, +0.1954082f, -0.0383087f, +0.1082381f,
  +0.1334690f, +0.1434055f, +0.5174330f, +0.1241840f, +0.0802815f, +0.2394878f, +0.2473602f, +0.2234633f,
  +0.0920552f, +0.4160662f, +0.3281871f, +0.2838274f, +0.0198565f, +0.1831216f, +0.0252226f, -0.0544346f,
  -0.0061799f, +0.3095380f, +0.0396619f, -0.0185689f, -0.2820065f, +0.1972815f, -0.0428725f, -0.2148760f,
  -0.1279747f, +0.1306395f, +0.8324174f, +0.1641533f, -0.0812499f, -0.3530922f, -0.1785572f, -0.0276015f,
  +0.1284542f, +0.0022145f, +0.6555716f, -0.0607711f, -0.1427987f, -0.0287998f, -0.3028220f, +0.0019466f,
  -0.1026411f, +0.3274566f, +0.3209083f, -0.2281590f, -0.1112565f, -0.1912268f, -0.0910566f, -0.0854926f,
  -0.0793125f, +0.1587872f, -0.1789488f, -0.0874247f, +0.0214157f, +0.0388307f, +0.1256283f, -0.1010588f,
  -0.1087404f, -0.1363342f, +0.1332788f, -0.1796498f, +0.4335845f, -0.3565432f, +0.3214880f, -0.0516678f,
  -0.2660542f, +0.0274685f, +0.1121347f, +0.1472773f, -0.2188844f, +0.2614568f, +0.2327317f, +0.2537144f,
  +0.3913324f, -0.0092896f, -0.2042529f, +0.2135523f, -0.3083785f, +0.0766265f, -0.3750344f, -0.2265114f,
  +0.0627682f, +0.0336633f, +0.0052403f, -0.0487679f, +0.2192894f, -0.0521954f, +0.0463348f, -0.1460951f,
  +0.0254098f, -0.2516056f, +0.0127700f, +0.0478638f, -0.1147475f, +0.2124552f, -0.1929160f, -0.0230034f,
  +0.0295475f, +0.0600706f, +0.1844077f, -0.4882072f, +0.2408016f, +0.0467582f, +0.1366550f, +0.0091083f,
  -0.3179558f, -0.1917311f, -0.1945398f, -0.1762366f, +0.2833323f, -0.0918467f, +0.1731614f, +0.0341550f
);

const float biases[4] = float[4](
  +0.1064048f, -0.0132411f, -0.0697386f, +0.0133652f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer11 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0602403f, +0.2539451f, -0.0146901f, +0.2216986f, +0.2643263f, +0.1774902f, +0.1955052f, +0.1545421f,
  +0.1247034f, -0.5355545f, -0.0119823f, -0.0405087f, +0.1451887f, -0.2353591f, -0.6213566f, -0.1971031f,
  +0.0928641f, +0.0556208f, +0.0989258f, +0.1972973f, +0.0292179f, -0.0804446f, -0.2089387f, -0.2897902f,
  -0.0431668f, -0.1003315f, +0.1912906f, -0.0760845f, -0.1230775f, +0.0221474f, -0.0689905f, -0.0611742f,
  +0.1988123f, -0.4227090f, +0.0921748f, +0.0088938f, -0.3487266f, +0.2410967f, -0.6726407f, -0.2173430f,
  -0.0787031f, -0.1024235f, +0.0203769f, +0.1398365f, -0.4513517f, +0.0986902f, -0.2672563f, -0.0569357f,
  +0.1167095f, -0.0480361f, -0.0577911f, +0.0950311f, +0.0087618f, +0.0153315f, +0.1185404f, +0.1267268f,
  +0.1845954f, -0.2819867f, +0.0475197f, +0.0384339f, +0.1193757f, -0.1765340f, +0.0037884f, +0.2041255f,
  +0.2238810f, -0.0682308f, -0.1361293f, -0.2661744f, +0.0700110f, -0.1451580f, +0.0481305f, -0.2205446f,
  -0.0176575f, +0.2188802f, +0.1616973f, +0.1100350f, +0.3207473f, +0.2701922f, +0.3789137f, +0.0347648f,
  +0.3182484f, -0.1372412f, -0.2573116f, +0.1043378f, +0.3898568f, -0.2043148f, +0.1072479f, -0.0627285f,
  +0.1420382f, -0.0843186f, -0.2842412f, +0.2289382f, +0.0352460f, +0.0770470f, -0.0906152f, +0.3553452f,
  -0.1689251f, -0.1397900f, +0.0181962f, -0.3016468f, +0.4059161f, -0.0444454f, -0.0494577f, -0.1440701f,
  +0.0938867f, +0.0047852f, -0.1263737f, -0.0922430f, -0.2408798f, +0.2134591f, -0.1519489f, +0.1708373f,
  -0.1493141f, +0.1831716f, -0.0360846f, +0.2048596f, -0.3173106f, +0.1098589f, -0.2077487f, +0.4127137f,
  -0.0030050f, +0.1111814f, +0.0733659f, -0.2006765f, +0.0498348f, -0.0745416f, -0.3918962f, -0.2389343f,
  -0.0705769f, +0.4053095f, +0.0895952f, +0.1564694f, +0.2167402f, -0.0258170f, -0.1445283f, -0.0578308f,
  -0.0381141f, -0.0259940f, +0.2069774f, +0.0604670f, -0.4247496f, +0.2819558f, -0.1720212f, -0.0911743f,
  +0.0182399f, +0.0678652f, +0.0375021f, +0.1558715f, +0.0727016f, -0.0952345f, +0.2609193f, -0.1126538f,
  +0.0015417f, -0.0691813f, -0.1860269f, +0.0907499f, +0.0147687f, -0.2795373f, +0.1207783f, +0.1581334f,
  +0.0818753f, +0.0473929f, -0.0579971f, +0.0250088f, +0.0706741f, -0.2329464f, +0.1022311f, +0.0060992f,
  -0.2202416f, +0.0819943f, +0.1238945f, -0.0640011f, -0.0288632f, +0.0187085f, +0.3855816f, +0.1062950f,
  +0.0923339f, -0.0211493f, -0.0325745f, +0.1206605f, -0.6365914f, -0.0204394f, +0.0436697f, -0.0672772f,
  -0.0962433f, -0.0214018f, -0.0117898f, +0.3175794f, -0.0310401f, -0.1437922f, +0.2286405f, -0.2044009f,
  +0.0314303f, +0.3213716f, +0.0630331f, +0.0827874f, +0.4472608f, +0.1870354f, +0.1294619f, +0.3163455f,
  +0.2136691f, -0.0689197f, -0.0384653f, -0.1125867f, +0.0688089f, +0.3926015f, -0.4091245f, -0.0815581f,
  -0.2449963f, +0.0940021f, -0.3655936f, -0.0703750f, -0.1076311f, -0.0422110f, -0.1636794f, -0.1141786f,
  +0.2755587f, -0.0086185f, -0.1643641f, -0.1601222f, -0.1251449f, -0.0416396f, +0.0755867f, -0.1258915f,
  -0.0271570f, -0.0497424f, -0.0396154f, +0.0364052f, +0.1370858f, +0.1164438f, +0.0281966f, -0.2458482f,
  +0.1461394f, -0.0096242f, +0.2746827f, +0.0913793f, +0.1479935f, +0.3461663f, -0.2003954f, -0.1633807f,
  -0.0479462f, -0.1735629f, -0.2048588f, -0.1508218f, -0.1174665f, +0.3042437f, -0.0275755f, -0.1336724f,
  -0.2409910f, +0.2243714f, +0.0990575f, +0.0228315f, -0.2108658f, +0.2695598f, -0.0183825f, -0.1647869f,
  -0.0598439f, +0.1006037f, +0.4022144f, +0.1372888f, +0.2359711f, +0.2821565f, -0.0307230f, +0.0115825f,
  +0.0556184f, -0.0630958f, +0.0290137f, +0.1170067f, -0.2990242f, -0.0747213f, +0.1622019f, -0.0810257f,
  +0.1682841f, +0.1560808f, -0.1853170f, +0.1696767f, -0.0362659f, -0.2257908f, -0.0588618f, -0.0857892f,
  -0.2558683f, +0.1385146f, +0.0094929f, +0.0498134f, -0.0918679f, -0.0814501f, +0.2385828f, -0.2537766f
);

const float biases[4] = float[4](
  +0.0854133f, +0.1027655f, +0.0413709f, +0.1121955f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer12 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0861253f, -0.0489379f, -0.0677605f, -0.2335393f, +0.0706894f, -0.0314626f, -0.0956859f, +0.1345313f,
  -0.0719831f, -0.1964390f, -0.2070154f, +0.1754289f, -0.0956269f, +0.2637662f, -0.0123670f, +0.1501780f,
  -0.0462646f, -0.2394893f, +0.1895694f, -0.0477455f, -0.1228046f, -0.0046879f, +0.2374620f, -0.3830395f,
  +0.2852432f, +0.1179920f, -0.1301506f, +0.0195639f, +0.2854217f, +0.2515652f, -0.0801656f, +0.2890849f,
  -0.0940350f, -0.0328921f, -0.3376931f, -0.0412121f, -0.3287593f, -0.0941074f, +0.0558760f, +0.3300508f,
  +0.1033150f, -0.1746199f, -0.0655964f, -0.3311841f, -0.3793602f, -0.0416891f, +0.2484373f, +0.1888788f,
  -0.0872105f, -0.0480962f, +0.1957769f, -0.1127770f, -0.0097742f, -0.0675418f, -0.1267275f, +0.0056007f,
  +0.0923663f, -0.0373990f, -0.0728573f, -0.2135710f, +0.1899733f, -0.2107409f, +0.0457118f, +0.0599485f,
  +0.1344955f, +0.0973906f, +0.0446909f, -0.1113471f, +0.2726793f, +0.2316186f, +0.0358624f, +0.0807824f,
  -0.0767991f, -0.2141006f, -0.0566796f, +0.1259071f, -0.3347472f, +0.1266662f, +0.1452847f, -0.3318307f,
  +0.1776925f, -0.2947497f, -0.1682187f, -0.0856613f, -0.1272804f, +0.2651697f, -0.1739963f, +0.2448113f,
  +0.0464149f, +0.1518428f, +0.1289718f, -0.2664104f, -0.0206900f, +0.0719614f, -0.0539243f, +0.0111031f,
  -0.0960030f, +0.2317826f, -0.0856482f, +0.0697363f, -0.1080210f, +0.0044655f, +0.0495473f, +0.0822013f,
  +0.3076570f, -0.0437964f, -0.2493907f, +0.1221159f, -0.2565708f, +0.3365970f, -0.0887033f, -0.0722529f,
  +0.0194504f, -0.2821359f, -0.0916786f, -0.1682719f, -0.0183523f, -0.1662305f, -0.2890579f, -0.1585416f,
  -0.2577221f, -0.2065331f, +0.1102994f, +0.1265858f, -0.2917826f, +0.3497165f, -0.0479030f, -0.1680064f,
  +0.2360029f, +0.1171739f, +0.1058217f, +0.0575515f, -0.2924671f, +0.0025091f, -0.1485057f, +0.2088825f,
  -0.0510047f, -0.3074519f, +0.0338292f, -0.0005432f, -0.3352644f, -0.0173344f, -0.2533804f, -0.1981765f,
  -0.2930322f, -0.0756487f, -0.5176862f, -0.2634115f, -0.1996462f, +0.0400316f, +0.0221639f, -0.0065849f,
  -0.2077068f, +0.3292503f, +0.4059176f, +0.0176897f, -0.0258398f, +0.3026223f, +0.1827019f, -0.0205617f,
  -0.0056788f, -0.3779381f, +0.3935215f, +0.1293328f, +0.1794870f, -0.2943763f, -0.0826023f, +0.1325144f,
  +0.1760284f, -0.0584013f, -0.3559148f, -0.0014404f, -0.2418457f, +0.1122509f, -0.0709248f, -0.1323380f,
  +0.1549789f, -0.2603309f, +0.1686749f, -0.1267529f, -0.2901690f, -0.1299143f, +0.0249971f, -0.0835320f,
  -0.1657850f, -0.3804597f, +0.0840249f, -0.0023801f, +0.1243701f, -0.0244655f, -0.2088781f, -0.2619963f,
  -0.3206004f, -0.1084953f, +0.0452380f, -0.0499997f, -0.1830344f, -0.1923110f, -0.1015377f, +0.0596555f,
  -0.0221851f, +0.0109903f, +0.0569326f, -0.1815308f, -0.2742576f, -0.1028113f, -0.1608809f, +0.1107662f,
  -0.1544153f, -0.4078768f, +0.0934843f, -0.1070145f, +0.0402708f, -0.0069164f, -0.1291249f, +0.2318365f,
  +0.1664067f, +0.0232998f, -0.0075026f, -0.1298890f, -0.0224232f, +0.1729866f, -0.0134800f, +0.1366926f,
  +0.0176100f, -0.0014191f, +0.0796026f, -0.1704768f, -0.1419176f, +0.0621038f, +0.2193569f, -0.1659347f,
  -0.1333174f, +0.0200519f, +0.3551379f, -0.1454643f, +0.0018276f, +0.0311184f, +0.0288882f, -0.1885924f,
  -0.0363040f, -0.1713940f, -0.1330901f, -0.1983710f, -0.0308436f, -0.0743645f, -0.3101757f, +0.0718528f,
  +0.0086013f, -0.1314079f, -0.1526569f, -0.1019753f, -0.0730538f, -0.3882258f, +0.1005711f, +0.0754489f,
  -0.1486204f, +0.0623348f, -0.1919306f, +0.1685763f, +0.1146450f, +0.2013980f, -0.1437589f, -0.1629927f,
  -0.2918922f, +0.0207041f, +0.0294468f, -0.0851764f, +0.1235696f, -0.1222464f, +0.2239893f, +0.0787561f,
  -0.2049063f, -0.0143047f, -0.0833346f, -0.1127211f, +0.0554097f, -0.1101533f, +0.2741684f, +0.0970038f,
  +0.0672243f, -0.0433364f, +0.0889292f, -0.0674439f, +0.1833963f, +0.1843689f, +0.2073260f, +0.0714544f
);

const float biases[4] = float[4](
  +0.0554983f, -0.0255671f, +0.0974522f, -0.0937294f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer12 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1607757f, -0.2673331f, +0.3738837f, -0.2037288f, +0.2566074f, -0.1057311f, -0.2793878f, +0.3806999f,
  +0.1347925f, -0.3487433f, +0.0533371f, -0.1535909f, -0.0457796f, +0.1128919f, +0.1038739f, +0.2735746f,
  +0.1126920f, +0.0191321f, +0.1774312f, -0.0557405f, -0.1974059f, -0.1663677f, +0.1606825f, +0.0579382f,
  +0.1487000f, -0.1440844f, +0.1691094f, -0.0897183f, +0.1271805f, -0.1692814f, -0.1507587f, +0.0520448f,
  +0.0805808f, +0.1800122f, -0.3636685f, -0.0650217f, +0.0183152f, -0.2526858f, -0.1745521f, -0.0201544f,
  -0.0309728f, +0.1530745f, -0.5011309f, -0.2022072f, -0.3682714f, -0.4375252f, +0.4737855f, +0.1463607f,
  +0.2285030f, +0.3391093f, +0.0855560f, -0.2202584f, -0.0512415f, -0.0401372f, -0.0352565f, +0.1257656f,
  +0.4485642f, +0.2248711f, +0.0355975f, -0.1855983f, -0.1117751f, -0.0222009f, +0.1709978f, +0.1448154f,
  -0.3939199f, +0.2738005f, +0.0149193f, -0.3476791f, -0.4017168f, -0.2204647f, +0.0881277f, -0.1703514f,
  -0.0773820f, +0.1481370f, -0.0366542f, +0.0808737f, -0.1136877f, -0.1072404f, -0.2267630f, -0.0852477f,
  -0.0439011f, +0.4607260f, +0.1456977f, -0.0055406f, +0.1424443f, -0.2517819f, -0.0057743f, -0.0618048f,
  -0.0687514f, +0.6848493f, -0.1476339f, -0.1417632f, -0.0518908f, +0.0358250f, -0.1198741f, +0.1137078f,
  +0.1311984f, -0.1192241f, -0.0852931f, +0.1597461f, -0.1714524f, -0.0187927f, +0.1773928f, -0.1625573f,
  -0.0639776f, -0.2254797f, -0.1214114f, -0.0180645f, +0.4665154f, +0.2627061f, +0.0660249f, -0.0502531f,
  +0.1378160f, +0.0688455f, +0.0685483f, -0.1460925f, +0.0469637f, +0.1057146f, +0.2436274f, +0.0134110f,
  +0.2025776f, -0.2536355f, +0.1760591f, +0.1821946f, +0.2295321f, +0.3329108f, -0.2587296f, -0.0263469f,
  +0.1369261f, +0.0167373f, -0.2120169f, -0.2147011f, +0.4920984f, +0.4132145f, +0.1252911f, +0.0052710f,
  +0.1748596f, -0.1795293f, +0.1006480f, -0.0099896f, -0.2197245f, -0.0118984f, -0.0190287f, -0.0238546f,
  -0.0526466f, +0.0399838f, +0.1883245f, +0.2841998f, -0.0283147f, -0.1381734f, +0.5121782f, +0.2372095f,
  -0.0117812f, +0.3408624f, +0.4466239f, +0.2924074f, +0.0426381f, -0.0083134f, +0.2092150f, +0.1010169f,
  -0.2798760f, +0.1105911f, +0.0478157f, +0.2856747f, +0.0480845f, -0.0988463f, +0.0136677f, -0.1402110f,
  +0.0328471f, +0.1354151f, -0.0865460f, -0.0747869f, +0.0335535f, +0.1546308f, -0.2584280f, -0.0274940f,
  -0.1346844f, -0.1282806f, +0.0759193f, -0.2856436f, -0.1889733f, +0.0405463f, +0.0643421f, +0.0629393f,
  -0.3381592f, -0.0766949f, -0.0954981f, +0.0264196f, +0.0691580f, -0.0887689f, -0.0076287f, -0.1073532f,
  -0.1822612f, +0.2504945f, +0.1347994f, +0.1596543f, -0.0408662f, +0.0168268f, -0.1565099f, -0.0041226f,
  -0.2554217f, +0.2406884f, -0.1548609f, -0.2168304f, -0.1231653f, -0.0246549f, +0.1659417f, -0.0164719f,
  -0.2592858f, +0.1156701f, -0.1531518f, +0.2238051f, -0.3574306f, -0.0040976f, +0.0376387f, -0.2480201f,
  +0.1402816f, -0.0588406f, -0.0945502f, -0.0429201f, +0.0025675f, -0.0122036f, -0.0165760f, +0.2390733f,
  +0.0836778f, +0.0587564f, -0.0395776f, +0.0667668f, -0.2420065f, +0.1794454f, -0.1885501f, +0.0584144f,
  -0.2177305f, +0.1721328f, +0.0950693f, -0.0417429f, +0.1626202f, -0.0226370f, +0.0320671f, +0.0391485f,
  -0.0856537f, +0.1711216f, -0.1512469f, -0.2647719f, +0.1050547f, -0.0304349f, +0.1066986f, +0.2165617f,
  -0.0875563f, +0.0312983f, -0.0761937f, -0.4597391f, +0.1255176f, -0.1188531f, -0.0972681f, +0.0000065f,
  +0.0126605f, +0.1747429f, -0.1110293f, +0.1895700f, +0.2377333f, +0.0998990f, -0.0458283f, -0.2737293f,
  +0.0363662f, +0.1108599f, +0.0061466f, +0.1540778f, +0.1220180f, -0.1408710f, +0.0686398f, -0.0311432f,
  +0.0446836f, -0.1813754f, +0.0297168f, +0.0699216f, +0.2659424f, +0.0334331f, -0.3119605f, -0.0366484f,
  -0.2336318f, +0.0230310f, +0.0089345f, -0.0361837f, -0.1249779f, -0.0934101f, -0.0001133f, +0.0003209f
);

const float biases[4] = float[4](
  -0.0358440f, -0.0774991f, +0.1717685f, +0.0664471f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer13 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0269932f, +0.1378593f, +0.0930147f, +0.1905210f, -0.0553831f, +0.0936108f, +0.1534318f, -0.1182888f,
  +0.0791903f, -0.1469085f, -0.1180292f, +0.0983338f, +0.0136709f, -0.0822730f, +0.0284951f, -0.1524634f,
  +0.0138105f, -0.0785051f, +0.2718814f, -0.0166339f, -0.1292519f, -0.1999295f, -0.1019151f, +0.1174799f,
  -0.0786186f, +0.0036713f, -0.0465735f, -0.3268588f, +0.0272189f, -0.1555017f, +0.2274266f, -0.1107155f,
  -0.3693297f, -0.0772864f, +0.1596035f, -0.3029149f, -0.2583297f, -0.2203467f, +0.0787169f, -0.1492868f,
  -0.0717555f, +0.1450634f, +0.0550424f, -0.0685653f, -0.0603391f, +0.2753706f, +0.2006209f, +0.1084440f,
  +0.2696818f, +0.0185768f, +0.0353557f, +0.1405579f, -0.2041166f, -0.0345377f, +0.0853357f, -0.1574344f,
  -0.1529783f, +0.1134852f, -0.3079186f, +0.2816089f, -0.2165826f, +0.0299926f, -0.2286807f, -0.0817192f,
  +0.0389910f, -0.0448138f, +0.3010118f, -0.0741200f, -0.0912762f, +0.0283429f, +0.2074420f, -0.1327252f,
  -0.0481203f, -0.2434628f, +0.1541029f, -0.0272299f, +0.1703866f, -0.0450723f, -0.1830515f, -0.1267727f,
  -0.1592463f, -0.2891813f, -0.2939356f, +0.0273455f, +0.0307911f, -0.4269589f, -0.0124220f, -0.1607062f,
  -0.0966999f, -0.1155534f, -0.2598378f, +0.1325002f, +0.1047831f, +0.1131910f, +0.0640324f, +0.0448520f,
  +0.1141902f, +0.0182568f, -0.0054295f, -0.1852424f, +0.4214184f, -0.1477644f, -0.3652485f, +0.2703733f,
  -0.3289533f, -0.0407846f, +0.0441529f, -0.1668839f, +0.0378936f, -0.1883256f, -0.0759207f, -0.0104407f,
  +0.0935276f, -0.0688324f, -0.0577497f, -0.0124477f, +0.0647883f, -0.0796585f, +0.0208613f, +0.3378304f,
  +0.1915438f, -0.1061981f, -0.0682349f, -0.1794632f, +0.3859934f, -0.1256175f, -0.3089160f, +0.2596394f,
  +0.2967041f, -0.0504826f, -0.0624653f, +0.0022403f, -0.1479940f, +0.1562627f, -0.1162678f, -0.0443850f,
  -0.0048841f, +0.1295462f, +0.1071483f, +0.1882551f, +0.2352953f, -0.1025961f, +0.2493493f, +0.1795051f,
  -0.0670309f, -0.1668235f, -0.0681580f, -0.2607451f, -0.2130725f, -0.0305405f, -0.1511524f, -0.3126845f,
  -0.1039439f, +0.0316857f, -0.1286878f, -0.1666178f, -0.3740205f, -0.0300513f, +0.1920296f, -0.2751887f,
  +0.1125609f, -0.0132040f, +0.4798216f, -0.1209584f, +0.4721114f, +0.3741321f, +0.3954369f, -0.0531884f,
  +0.1233166f, -0.2322944f, -0.1348392f, -0.2421518f, -0.3753327f, -0.1700034f, -0.4580824f, -0.3867041f,
  +0.0562228f, +0.4181180f, -0.0251515f, -0.2451998f, -0.2593838f, -0.2654790f, -0.2817609f, +0.0511056f,
  -0.1488288f, +0.2700038f, +0.0850702f, +0.1457267f, -0.1904024f, -0.2579381f, +0.0383413f, +0.1087067f,
  +0.1322106f, +0.1405686f, -0.3087002f, +0.1023817f, -0.3215019f, +0.1063429f, -0.2219632f, +0.0346606f,
  -0.0554345f, +0.0809540f, -0.0305797f, -0.3875567f, -0.2132479f, +0.0005215f, -0.1745756f, -0.1953787f,
  +0.2687444f, -0.0179834f, +0.0078201f, +0.1326621f, +0.3799764f, +0.0152907f, -0.1591553f, -0.2485568f,
  +0.0483392f, +0.5629777f, +0.2053086f, +0.2853589f, +0.0243895f, -0.2454450f, +0.1728911f, +0.1124728f,
  +0.1057050f, -0.2572025f, -0.2513832f, +0.2761937f, +0.0756173f, -0.2096224f, +0.0103005f, +0.1818921f,
  -0.0618570f, +0.0131840f, +0.2608080f, +0.1777090f, +0.0661979f, +0.2080982f, -0.0311250f, +0.0893747f,
  +0.2335705f, -0.1798934f, -0.0603434f, +0.2145319f, -0.1733560f, -0.0921403f, -0.1224854f, +0.1589842f,
  -0.1244771f, -0.3136674f, -0.4802745f, -0.2274427f, -0.2296193f, +0.3353646f, +0.2783409f, +0.0018309f,
  -0.0259942f, +0.0054838f, -0.3519146f, +0.0199603f, -0.3676367f, -0.2090573f, +0.0635998f, -0.1091311f,
  -0.3955902f, -0.5376599f, -0.1458734f, +0.0263924f, -0.5633253f, -0.2157188f, -0.2681924f, +0.1238317f,
  -0.2369821f, -0.2963573f, +0.2146317f, -0.3207628f, +0.0606094f, +0.0903243f, +0.1391553f, -0.1502439f,
  +0.0582343f, +0.1983880f, +0.2827095f, -0.0208431f, -0.0031886f, -0.2072825f, -0.0469958f, +0.1391651f
);

const float biases[4] = float[4](
  +0.1008741f, +0.0412451f, -0.0297310f, +0.0022008f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer13 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0134520f, +0.1601045f, +0.2589781f, +0.1608788f, -0.2483045f, +0.0826220f, -0.0239435f, -0.1111503f,
  -0.0251412f, -0.2376900f, +0.1448820f, -0.2066337f, -0.2041922f, -0.4462220f, -0.0391007f, +0.1010259f,
  +0.0308927f, +0.2690204f, +0.0197070f, +0.0789274f, -0.1063735f, +0.5041826f, -0.3017838f, +0.3744723f,
  +0.4086391f, -0.0373084f, +0.0550220f, +0.2380220f, -0.0806635f, -0.1940074f, +0.1721525f, -0.1092966f,
  -0.1767761f, -0.7827083f, -0.2719317f, +0.2240795f, -0.3134010f, -0.4860858f, -0.2991792f, -0.0668343f,
  +0.2548751f, -0.1915733f, -0.4452822f, +0.2327119f, -0.0247400f, +0.0026849f, -0.3116447f, -0.0116986f,
  +0.3052356f, +0.1164196f, +0.1746431f, +0.3562681f, -0.0927732f, +0.1656030f, -0.0362531f, -0.0289677f,
  -0.1586011f, -0.0130102f, +0.2576679f, +0.1771815f, -0.4596762f, -0.0315130f, +0.0528674f, +0.2539136f,
  -0.0710417f, +0.0008827f, -0.3430369f, +0.1036723f, -0.5412445f, +0.0809285f, -0.0890777f, +0.0085834f,
  +0.1938807f, +0.0624816f, +0.0346299f, -0.0472777f, -0.0923870f, -0.5147124f, -0.0496724f, -0.0167934f,
  -0.0683400f, -0.0615330f, -0.0017502f, +0.1235206f, +0.0648433f, -0.1465824f, -0.2181275f, -0.1769840f,
  -0.1713914f, -0.0220255f, -0.0562113f, +0.0054413f, +0.1866712f, -0.2318616f, +0.0689222f, +0.1850269f,
  +0.1355587f, -0.0892380f, +0.1507170f, +0.1642978f, -0.2045704f, -0.3020956f, -0.0395079f, +0.0177938f,
  +0.0374518f, -0.3434466f, +0.5227834f, +0.0086898f, +0.2322147f, -0.0865346f, -0.1098145f, -0.1767750f,
  +0.1452587f, -0.3315805f, -0.1094269f, -0.1606784f, +0.2123712f, -0.0533574f, -0.1967826f, +0.0578484f,
  +0.0988880f, -0.1168628f, +0.0067780f, +0.1747958f, -0.0002916f, -0.1320108f, -0.0797766f, +0.1507352f,
  +0.1777375f, -0.1177692f, +0.0151552f, +0.0344811f, -0.3602275f, -0.0542862f, +0.0161703f, +0.3188730f,
  -0.4398392f, +0.0928292f, -0.3320881f, -0.0213709f, -0.0153175f, -0.1026824f, +0.2018473f, -0.0655415f,
  -0.0735556f, -0.0542853f, +0.0261209f, +0.1559483f, -0.0524595f, -0.1377977f, +0.0256617f, +0.1254154f,
  -0.0504791f, -0.1952510f, +0.0030759f, +0.2044083f, -0.1987012f, -0.1623145f, +0.2795089f, -0.1878482f,
  -0.2402144f, +0.3529380f, -0.3377761f, +0.1599912f, +0.0012344f, -0.0096267f, +0.0042737f, -0.1236164f,
  -0.0164749f, +0.0296795f, +0.0340005f, -0.2886842f, +0.0882212f, +0.1656903f, -0.1895290f, +0.0090647f,
  -0.0903023f, +0.1588260f, +0.3241857f, -0.2164152f, -0.0004473f, +0.0346020f, -0.0418684f, -0.0759016f,
  -0.1774122f, -0.3709672f, -0.0018706f, -0.3069401f, +0.1437203f, -0.0833059f, +0.1024193f, +0.0329605f,
  +0.0278702f, +0.1297141f, -0.0590439f, -0.1598669f, +0.3808475f, -0.0888548f, -0.0388997f, +0.0042001f,
  +0.2202256f, +0.1048904f, +0.0223588f, -0.2429298f, +0.4712359f, -0.2352139f, +0.1244548f, +0.0512000f,
  +0.0645492f, -0.2440375f, -0.0171570f, -0.0967199f, +0.1172001f, +0.0638105f, -0.0831831f, +0.0423674f,
  -0.0229451f, +0.0499156f, +0.0052438f, +0.0494477f, +0.2475102f, +0.1371026f, +0.1841815f, +0.0424978f,
  +0.0147353f, -0.0227437f, +0.1911105f, +0.0317743f, +0.3165334f, +0.4578224f, +0.1226334f, -0.1060299f,
  -0.0805860f, -0.0155631f, +0.2200867f, -0.0666760f, -0.0327777f, -0.4015071f, +0.3055858f, -0.2023072f,
  -0.1020095f, -0.3544825f, +0.0128591f, -0.3245075f, -0.1755459f, -0.1695966f, -0.1555168f, -0.2000371f,
  +0.1660326f, -0.2281150f, +0.1675656f, +0.0245376f, -0.2137470f, +0.0227840f, +0.0194077f, +0.1117610f,
  +0.0179272f, -0.0481427f, -0.0059165f, -0.0755169f, +0.2394871f, -0.0354190f, +0.1125394f, -0.2233495f,
  +0.2142134f, +0.1115654f, -0.1209459f, -0.3439347f, -0.0786641f, +0.2010487f, +0.0062447f, -0.2208734f,
  -0.2804005f, +0.0359360f, -0.2035820f, +0.1250430f, +0.1048049f, +0.0944282f, -0.1276277f, -0.1613853f,
  -0.1688328f, -0.0994281f, -0.1752651f, +0.0347253f, -0.0711717f, -0.2816197f, -0.1603320f, +0.1268285f
);

const float biases[4] = float[4](
  -0.0245793f, +0.0681756f, +0.0494587f, +0.0897947f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer14 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0164055f, -0.0257425f, -0.0890331f, +0.2839983f, -0.2580327f, -0.0407082f, +0.1721925f, +0.1778800f,
  -0.1693328f, -0.2809650f, +0.3486646f, +0.1639538f, +0.0301728f, +0.1187283f, -0.0423517f, +0.1822155f,
  -0.2279411f, +0.0762189f, +0.1746496f, +0.2073654f, +0.2049560f, -0.0788370f, -0.1878781f, +0.0107728f,
  -0.0413142f, -0.1828891f, +0.1094272f, +0.3078493f, +0.0076946f, +0.0234525f, +0.3988911f, +0.0784295f,
  +0.1631689f, -0.0022139f, -0.1066709f, +0.0905367f, -0.2196592f, -0.1193298f, +0.0131519f, -0.0383182f,
  +0.2230221f, +0.1093978f, +0.0766050f, -0.0782523f, -0.2408203f, -0.1100237f, +0.4209181f, +0.1872607f,
  +0.0875906f, +0.1726625f, -0.1264035f, +0.1011148f, +0.0022625f, -0.1345325f, +0.1077782f, -0.1657602f,
  +0.0113952f, +0.0545304f, -0.0394411f, -0.0047666f, +0.0733152f, +0.1597120f, -0.1021095f, -0.1378782f,
  +0.0426848f, +0.0006274f, -0.0458090f, +0.0252368f, +0.1650537f, +0.0075830f, +0.0158635f, +0.1956892f,
  +0.2104418f, -0.1415049f, +0.1229487f, -0.0678465f, -0.3858358f, +0.1744591f, +0.0481496f, +0.1218213f,
  +0.3359330f, +0.3557015f, +0.3535181f, +0.0794879f, +0.3623439f, +0.2777471f, +0.2520864f, +0.1489321f,
  -0.1412478f, +0.0140780f, -0.1210527f, +0.4621683f, -0.0847971f, +0.1613641f, -0.0094697f, +0.3090392f,
  -0.0731226f, +0.0764531f, +0.0278162f, -0.0734556f, -0.2163379f, +0.1924765f, +0.2633527f, +0.1374542f,
  +0.1213120f, +0.1042095f, -0.4462552f, +0.1128965f, +0.2434858f, +0.0012075f, +0.2229244f, +0.1931622f,
  -0.1139594f, +0.2448903f, +0.1334144f, -0.0047813f, -0.3912040f, -0.0484107f, -0.2056951f, -0.0353204f,
  -0.0873372f, -0.1307918f, -0.0554606f, +0.0702649f, -0.0894634f, +0.0850183f, -0.2471061f, -0.1953081f,
  +0.0895496f, +0.0552040f, +0.0332834f, +0.1600604f, -0.0220642f, -0.0285885f, -0.0931337f, -0.0886724f,
  -0.3048450f, +0.1505257f, -0.1335084f, -0.2356336f, +0.0029294f, +0.2098983f, +0.1232422f, -0.0920739f,
  +0.0703227f, +0.3258289f, -0.0703457f, -0.0759121f, -0.2045293f, +0.3958723f, -0.3083776f, -0.1451208f,
  -0.2555817f, -0.0233374f, +0.1163426f, +0.1435939f, -0.2071883f, +0.0154306f, -0.0073572f, +0.0652874f,
  +0.0818407f, +0.2797725f, -0.1618545f, -0.2020636f, +0.1081486f, -0.0229346f, -0.1552907f, -0.2658497f,
  -0.0276387f, +0.1716467f, -0.2183247f, -0.1463838f, -0.1227467f, +0.2543853f, +0.1292062f, -0.0272991f,
  +0.1723735f, +0.2748837f, -0.1005097f, -0.1188392f, -0.1130223f, -0.1069752f, +0.1877843f, +0.1199199f,
  +0.2634350f, +0.1428612f, +0.1529112f, -0.2277598f, +0.0884011f, -0.1035827f, -0.1222206f, +0.0067319f,
  -0.0606080f, +0.1794522f, +0.1582749f, +0.0647092f, -0.0701742f, +0.5790114f, -0.0516503f, -0.0882371f,
  +0.1277501f, +0.2521018f, -0.1768592f, -0.1577874f, +0.0018378f, -0.2051548f, +0.2617713f, -0.0154785f,
  -0.0565236f, -0.0006696f, +0.0569950f, -0.1757257f, -0.1773286f, +0.1457140f, -0.0286313f, +0.1004991f,
  +0.2020396f, -0.1431140f, -0.1751229f, +0.0220914f, -0.0390755f, -0.2584487f, +0.3641222f, -0.0620305f,
  -0.0325952f, -0.0878948f, +0.4268478f, +0.2195126f, -0.1310598f, +0.0395125f, +0.1572170f, +0.2334114f,
  -0.0302685f, -0.0195503f, -0.0834949f, -0.0191860f, -0.1255187f, +0.1382502f, +0.1855576f, +0.1355719f,
  +0.2287406f, -0.0515690f, -0.0792077f, +0.1994419f, +0.2444184f, +0.0696374f, +0.2130223f, +0.0888033f,
  +0.1745521f, -0.1336145f, +0.3194507f, +0.3518615f, -0.2781515f, -0.1414139f, +0.3044890f, +0.1716590f,
  -0.0404968f, +0.2623045f, +0.1342097f, -0.1102220f, -0.2002227f, -0.0128336f, +0.0673005f, -0.1885029f,
  +0.1820433f, -0.1085603f, -0.0018651f, -0.1282446f, -0.1137725f, -0.2028557f, +0.1332219f, -0.0930630f,
  +0.0382282f, +0.1986299f, +0.1356676f, +0.0955977f, +0.0878469f, -0.1108581f, -0.0750487f, +0.0972559f,
  -0.1176632f, -0.0335353f, -0.0203672f, -0.2295478f, +0.0615419f, +0.0465713f, -0.1987165f, +0.2525274f
);

const float biases[4] = float[4](
  +0.0679263f, -0.0072778f, +0.0515893f, -0.0523575f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer14 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0364009f, -0.1558345f, +0.2213700f, +0.1026760f, +0.0827787f, -0.2763328f, -0.1668190f, +0.2245941f,
  +0.1103481f, -0.0609879f, +0.6078152f, -0.1083906f, +0.4380583f, -0.0268552f, -0.0599021f, +0.0197895f,
  -0.0859434f, -0.1069751f, +0.3086775f, +0.3417319f, +0.2487890f, +0.0638232f, +0.0164747f, +0.1691959f,
  -0.0564932f, -0.1203683f, +0.3855802f, +0.0535744f, +0.0204711f, -0.3820688f, +0.0064949f, +0.0695974f,
  +0.1330931f, -0.0563491f, -0.1985292f, +0.0831178f, +0.0483820f, -0.2055836f, -0.0138327f, -0.2300030f,
  +0.1211335f, -0.3081377f, +0.1408073f, +0.1861251f, -0.0147489f, +0.1106607f, -0.1757399f, -0.1490084f,
  -0.0725254f, +0.2035216f, +0.1348540f, -0.1330170f, -0.0002212f, -0.1400711f, +0.0960801f, +0.3142344f,
  +0.0602407f, -0.1934042f, +0.2964815f, +0.1164641f, -0.0940176f, +0.0970217f, -0.2087261f, -0.0588603f,
  +0.0286162f, -0.0292304f, +0.2214812f, +0.2002691f, +0.1133913f, -0.1896543f, +0.2673739f, -0.0137424f,
  -0.0543933f, -0.0211600f, -0.1818170f, +0.2948308f, -0.0588560f, -0.1992771f, +0.0711517f, +0.0005942f,
  -0.2498844f, +0.1035793f, -0.3084317f, +0.1149141f, +0.0294510f, +0.0368389f, +0.1599524f, -0.1877761f,
  -0.1875509f, +0.0442600f, -0.1580605f, +0.1686817f, -0.3522006f, -0.1502774f, -0.2047714f, -0.0053421f,
  -0.0926829f, -0.1833867f, +0.0963058f, +0.0357399f, -0.2195341f, +0.1328272f, +0.3420205f, -0.4748982f,
  +0.0113192f, +0.0832881f, -0.1719657f, -0.1947989f, -0.2005398f, +0.3989321f, -0.2147771f, +0.2382143f,
  -0.3943414f, +0.0363398f, -0.1263759f, +0.1388700f, -0.1317819f, +0.1574727f, +0.1470895f, +0.1073398f,
  +0.2175988f, -0.1224382f, -0.0926557f, +0.0207304f, +0.0192444f, +0.3350559f, +0.3447923f, -0.0027111f,
  +0.2126049f, +0.2880881f, -0.4703449f, +0.5700887f, +0.7907679f, -0.1307286f, +0.6166196f, +0.0086284f,
  -0.0044057f, -0.0847084f, -0.0297413f, +0.1689555f, -0.0370234f, -0.1139709f, +0.5058643f, +0.0931379f,
  -0.0654662f, +0.3878475f, -0.0488113f, -0.2614070f, +0.2451131f, -0.2554833f, -0.1985055f, -0.0507513f,
  -0.2077143f, -0.0601201f, -0.0081626f, -0.0310237f, -0.2134792f, -0.2051864f, +0.1161181f, -0.0907184f,
  -0.1699239f, +0.0885579f, +0.3199183f, -0.0053672f, +0.2111640f, +0.2595037f, +0.3979409f, -0.1353619f,
  +0.0950261f, +0.1748843f, -0.0922377f, -0.0999518f, +0.5000984f, +0.0803375f, -0.0186673f, -0.0160600f,
  -0.0771842f, -0.0229294f, -0.0709816f, -0.0184968f, -0.3661610f, -0.0901328f, +0.4288260f, +0.1237357f,
  -0.1405548f, -0.0868492f, +0.3309124f, -0.1178667f, +0.1879155f, +0.1554834f, -0.0087273f, -0.0735211f,
  -0.2430959f, +0.0654461f, -0.0396742f, -0.0708415f, -0.0422820f, +0.0575870f, -0.0481962f, -0.0857729f,
  -0.0647522f, +0.1331500f, -0.0997776f, +0.2972893f, -0.2261960f, -0.0863638f, +0.1941153f, -0.3226387f,
  +0.0990660f, +0.0582752f, +0.0661496f, +0.0212881f, +0.0299508f, +0.0684667f, -0.0662565f, -0.0084247f,
  +0.0106048f, +0.0646216f, +0.3326769f, -0.2097782f, +0.0828529f, +0.1131629f, +0.0206654f, +0.1863807f,
  -0.1488609f, -0.0664925f, -0.1261038f, +0.2308410f, -0.2998731f, +0.0792091f, +0.1240461f, +0.1539511f,
  -0.1391070f, +0.0644809f, -0.1513713f, -0.1729991f, -0.1739811f, -0.0955942f, +0.0363736f, -0.1714668f,
  +0.1124200f, -0.3262673f, -0.3158253f, -0.0290617f, +0.4825232f, +0.0951034f, +0.0046832f, +0.3770205f,
  +0.3853810f, -0.2145802f, +0.0957890f, +0.2448825f, -0.2628941f, +0.0431353f, -0.0599599f, +0.3000575f,
  +0.1348421f, -0.0036336f, +0.0299487f, -0.1145189f, -0.0122333f, -0.0114614f, -0.2085365f, -0.2890106f,
  -0.0318944f, -0.1238869f, +0.2837489f, -0.0756961f, -0.1440142f, -0.1157882f, -0.0219513f, +0.2734229f,
  +0.0105634f, +0.0312682f, +0.3962515f, -0.0094838f, +0.2113903f, -0.0706711f, +0.0478488f, -0.1043710f,
  -0.1351405f, -0.0552936f, +0.0269614f, +0.0431922f, +0.0116080f, -0.1808807f, -0.0195527f, -0.1325566f
);

const float biases[4] = float[4](
  -0.1073804f, -0.0759370f, +0.1301543f, +0.0610363f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer15 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2020657f, +0.0016095f, -0.0004839f, +0.0280585f, -0.1930129f, +0.1539306f, -0.0758437f, -0.1968066f,
  +0.1568267f, -0.1920272f, +0.2602243f, -0.1338035f, +0.0775245f, +0.3663239f, -0.0781789f, -0.0017320f,
  -0.0566366f, +0.1483273f, +0.2767213f, -0.2874613f, -0.1957885f, -0.0273072f, -0.0165545f, +0.0225960f,
  +0.0145942f, -0.1767344f, +0.0786241f, +0.0584991f, -0.1388848f, -0.0878672f, -0.1131518f, -0.3935885f,
  +0.1292533f, +0.0482462f, +0.1775294f, -0.2592880f, +0.1105592f, -0.0188040f, +0.1606124f, -0.4380974f,
  -0.0963768f, +0.1269140f, +0.3478127f, -0.2277436f, -0.3716431f, -0.1097676f, -0.1717552f, -0.1496083f,
  -0.0698626f, -0.2764934f, -0.1724358f, -0.0067944f, -0.3830394f, -0.3896590f, -0.1274527f, +0.0175671f,
  +0.2504187f, +0.2309597f, -0.0837504f, +0.0643165f, +0.1792282f, +0.1148210f, -0.2973464f, -0.3074222f,
  -0.1751356f, -0.1149725f, -0.2389359f, +0.0970253f, -0.3092987f, +0.0788916f, +0.1946246f, -0.1598079f,
  -0.1581265f, -0.1838328f, +0.3779183f, -0.0170146f, -0.1747572f, -0.0961863f, -0.1683862f, +0.2313382f,
  -0.3971027f, -0.0693271f, -0.0411780f, -0.1591292f, -0.2109867f, -0.3826360f, -0.0346146f, -0.1872912f,
  -0.1923504f, -0.2746387f, +0.0177633f, -0.1933277f, -0.1953041f, -0.0144879f, -0.1978231f, -0.0222343f,
  +0.3668838f, -0.3468300f, +0.0496058f, +0.1156197f, +0.3228285f, +0.0392012f, +0.1970307f, +0.3712156f,
  +0.0920604f, -0.0850889f, +0.1574938f, +0.0537251f, +0.4084356f, +0.1123926f, -0.1859843f, -0.1652513f,
  -0.1334121f, +0.0262829f, -0.0007634f, +0.0717930f, +0.1725724f, -0.0590675f, -0.1195769f, +0.1968628f,
  +0.2434361f, +0.0227090f, +0.1043800f, +0.2049336f, -0.1159006f, +0.1384517f, +0.4273010f, +0.2019684f,
  +0.2385112f, -0.2687446f, -0.0426188f, +0.2135428f, +0.0714379f, +0.1914224f, +0.1704243f, -0.2055796f,
  -0.0429690f, -0.0469031f, -0.0869007f, -0.0700229f, -0.0290770f, -0.0933031f, -0.1191805f, +0.0771446f,
  +0.0143037f, -0.0008775f, +0.1312163f, +0.0855570f, -0.0512040f, +0.0257152f, -0.1545718f, +0.0079288f,
  -0.3613212f, -0.2287484f, +0.0426325f, +0.1957108f, +0.2248764f, +0.2010130f, +0.0922324f, +0.1474971f,
  -0.1020191f, +0.0304288f, -0.0621464f, +0.2184176f, +0.2878906f, +0.0168617f, +0.5392146f, -0.0143608f,
  -0.0406246f, -0.1086787f, +0.1444957f, -0.2127767f, +0.1223685f, -0.2466594f, -0.0234239f, -0.3024018f,
  -0.0285838f, +0.2177278f, +0.1643628f, +0.0000017f, +0.2652240f, +0.1565971f, +0.1126251f, +0.1591011f,
  +0.1867408f, -0.2745921f, +0.2253789f, +0.2697704f, -0.2878928f, -0.1636193f, +0.0088460f, +0.4381749f,
  +0.0893412f, +0.0264089f, -0.1176788f, -0.1476183f, -0.0115399f, +0.0193971f, -0.1734432f, -0.0141756f,
  +0.2074950f, +0.2825931f, +0.3145328f, -0.0689545f, -0.0030969f, +0.3075306f, -0.0229594f, +0.1785765f,
  -0.1118749f, -0.3658169f, +0.4319596f, +0.1331817f, -0.1124221f, -0.4594931f, +0.0260076f, +0.2367929f,
  -0.1712271f, -0.0123512f, +0.3117978f, -0.1970742f, +0.1798949f, -0.3249008f, +0.0694197f, -0.1591974f,
  +0.1531337f, -0.0653305f, +0.1391431f, -0.0065802f, -0.0415919f, -0.5655259f, -0.4500045f, +0.0371433f,
  +0.1190524f, +0.1540807f, +0.1112827f, -0.0630181f, -0.3259251f, -0.0754842f, -0.0561298f, -0.1079236f,
  +0.0827401f, +0.2289613f, -0.0112316f, +0.0528807f, -0.2159862f, +0.0359220f, +0.1310017f, +0.1684940f,
  +0.1149191f, +0.0258048f, -0.1059608f, +0.0653303f, -0.3250308f, -0.3788657f, -0.3122567f, +0.0023240f,
  -0.0202020f, +0.0646537f, +0.2295178f, +0.0126906f, -0.5935953f, +0.0344639f, -0.0307766f, -0.3382573f,
  -0.0408790f, +0.2780567f, -0.0104262f, +0.3229381f, +0.1162556f, +0.0376911f, +0.2045724f, +0.1717795f,
  -0.0800420f, -0.4241483f, -0.0589247f, +0.0081652f, -0.0195834f, -0.1314195f, +0.0400317f, -0.2808818f,
  +0.1982774f, +0.1554333f, -0.4113024f, +0.0468643f, -0.0815824f, +0.1227280f, -0.1042307f, +0.0016646f
);

const float biases[4] = float[4](
  +0.0533511f, -0.0573017f, -0.0831004f, +0.0393450f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer15 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1128669f, -0.2446294f, +0.0387823f, -0.2352703f, -0.1525868f, +0.1062507f, +0.0432461f, -0.1432093f,
  +0.0600967f, -0.1762442f, +0.0677702f, +0.0407585f, +0.2857344f, +0.1846842f, -0.0043488f, -0.0264300f,
  -0.1685566f, +0.2765907f, +0.2879567f, -0.4146185f, -0.2107658f, +0.1590255f, -0.0619070f, -0.4094693f,
  +0.0772996f, +0.0042046f, -0.2521670f, -0.1331398f, -0.3342579f, +0.0407115f, -0.2330820f, -0.2961472f,
  +0.0962805f, +0.3953724f, +0.2373295f, -0.4549109f, -0.4030840f, -0.2822309f, -0.0773917f, -0.0053782f,
  -0.2885503f, +0.0028230f, +0.2239940f, -0.2733700f, -0.3088115f, +0.3084129f, +0.1841685f, +0.0361478f,
  +0.1109623f, +0.2535352f, -0.2865824f, +0.0043366f, +0.0967207f, -0.0948810f, -0.0458863f, -0.2834703f,
  +0.1386076f, +0.3330335f, -0.1951698f, -0.2772490f, +0.2480627f, -0.1263220f, -0.0283976f, -0.0267124f,
  -0.3300195f, -0.0268527f, -0.0176311f, +0.1228336f, -0.4275244f, +0.1931459f, +0.2537342f, -0.1505970f,
  -0.0910908f, -0.1309262f, +0.2498602f, +0.0797654f, +0.0622171f, -0.1638481f, +0.0300390f, -0.0414740f,
  -0.1460935f, -0.1085214f, +0.1447401f, -0.0716805f, +0.1152511f, -0.2377348f, +0.2985657f, +0.1722335f,
  -0.0511911f, -0.4010392f, +0.0571351f, +0.2460975f, +0.2034329f, +0.0242879f, +0.2574924f, +0.2376207f,
  -0.2115565f, +0.1099158f, +0.2268548f, -0.2908369f, -0.0093920f, +0.0383836f, +0.1413526f, -0.2491105f,
  -0.1280864f, +0.0660509f, +0.2939569f, -0.2367610f, +0.1004290f, +0.1637549f, +0.4591842f, -0.1075766f,
  +0.0810599f, +0.0023621f, +0.0259472f, +0.0725474f, -0.0799442f, +0.1248424f, -0.3058130f, -0.1015665f,
  +0.1069825f, +0.1117111f, +0.2234805f, -0.0568520f, +0.4217467f, -0.0253562f, -0.0266349f, -0.1723417f,
  +0.0716707f, -0.4270982f, +0.3477576f, +0.0175800f, -0.1601415f, -0.1517981f, +0.0185514f, +0.1825560f,
  +0.0007118f, -0.0371913f, +0.3942243f, +0.1148221f, -0.1874340f, +0.0617419f, -0.2911933f, +0.1824147f,
  +0.0233903f, +0.3359770f, -0.0930077f, +0.3055858f, -0.1903522f, +0.1536468f, -0.0475258f, +0.2777368f,
  -0.2829007f, +0.0289791f, -0.6024670f, +0.0852692f, +0.0618434f, +0.3486370f, -0.0528765f, +0.0112695f,
  -0.0378337f, -0.1746113f, -0.1828432f, -0.1294764f, -0.0824562f, +0.2173708f, +0.0844963f, +0.0876123f,
  +0.0640592f, +0.2447660f, -0.3501015f, -0.1005134f, +0.1620302f, +0.0823495f, -0.0285867f, +0.3582925f,
  +0.0584901f, -0.2645832f, -0.5187314f, -0.1785668f, -0.2113349f, +0.4756964f, +0.1847224f, -0.3616827f,
  -0.3051249f, +0.1409885f, +0.0417988f, -0.0775758f, +0.1056461f, -0.0171090f, -0.0827291f, -0.3189987f,
  -0.1107913f, +0.1059703f, -0.2063806f, +0.0031167f, +0.0079965f, +0.2135199f, -0.1203018f, +0.2773271f,
  +0.3292237f, +0.1622443f, -0.1576086f, -0.3418974f, +0.3386348f, +0.0677692f, -0.1340922f, -0.1707585f,
  +0.1012211f, +0.0940994f, +0.2082394f, -0.4171304f, +0.5709259f, -0.2884122f, -0.2495814f, +0.2820710f,
  -0.0589834f, +0.0505492f, +0.1565199f, +0.2455897f, +0.0957621f, -0.1830422f, -0.0518567f, +0.0620986f,
  +0.4674001f, +0.1739608f, +0.2406727f, +0.2710592f, +0.0899121f, -0.4144664f, +0.3449796f, -0.0011655f,
  +0.1242327f, -0.1740650f, +0.1767349f, +0.1495107f, +0.1415871f, +0.4036523f, +0.0464624f, +0.1586677f,
  +0.0542167f, +0.1618440f, +0.0775696f, -0.0226106f, +0.0539593f, +0.0487254f, -0.3665763f, +0.1749744f,
  -0.1677530f, +0.2958367f, -0.1612642f, -0.1521826f, +0.0331071f, -0.0785605f, -0.2438814f, +0.0969833f,
  -0.0328987f, -0.0937992f, -0.1703888f, -0.1659626f, +0.3238163f, -0.0918392f, -0.0444694f, +0.2956461f,
  -0.0798018f, +0.0820362f, +0.1315255f, -0.1883654f, -0.1262377f, +0.1052297f, -0.4497686f, +0.1040688f,
  +0.3186736f, +0.2486897f, -0.2187638f, -0.0617958f, +0.1152676f, +0.0450905f, -0.4810100f, -0.0748623f,
  +0.3759327f, -0.2122081f, -0.2745700f, +0.0143612f, +0.5736615f, -0.2403330f, -0.4756427f, -0.0532387f
);

const float biases[4] = float[4](
  -0.0769679f, +0.0109217f, -0.0996266f, -0.0707506f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer16 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0843261f, -0.1060756f, -0.0653664f, -0.1226829f, -0.2694329f, -0.2324660f, -0.2341259f, +0.2240879f,
  -0.0504519f, -0.2574589f, +0.0088036f, +0.0368444f, -0.2830870f, -0.1492510f, +0.2182741f, -0.2485657f,
  +0.0929557f, +0.2171316f, -0.1622816f, +0.1535167f, +0.1853036f, +0.1042669f, +0.0359125f, +0.0332101f,
  -0.0636941f, -0.1394751f, -0.0402315f, +0.0117856f, +0.1130868f, -0.0775433f, +0.1189923f, -0.0087790f,
  +0.0367811f, -0.1584310f, +0.0731154f, -0.1363423f, +0.0680102f, +0.1190520f, -0.1856682f, +0.2152859f,
  -0.0640889f, -0.0885777f, -0.0478001f, -0.2830813f, -0.0584605f, +0.0220355f, +0.2546373f, +0.2224218f,
  +0.0181917f, -0.1185151f, -0.1507351f, +0.0623802f, -0.1752727f, +0.0986898f, -0.1995411f, +0.1798269f,
  -0.0709283f, -0.1773132f, -0.0710446f, -0.1473021f, -0.1370241f, +0.0867048f, -0.0255394f, -0.0317571f,
  +0.0638529f, -0.0953190f, -0.0212747f, +0.0822654f, -0.1623765f, +0.1419733f, +0.1510386f, -0.0252437f,
  +0.3611458f, -0.0637139f, -0.0150444f, -0.1429212f, +0.2225109f, -0.2338409f, -0.1306353f, +0.0443915f,
  +0.0414577f, +0.3996563f, +0.0368003f, +0.4073187f, +0.1018999f, +0.1017435f, +0.4199015f, -0.1451005f,
  +0.0794974f, +0.2674329f, -0.0175094f, +0.1884785f, -0.0214175f, -0.1965770f, -0.1659902f, -0.0580178f,
  +0.1058630f, +0.0168170f, -0.0457413f, -0.0621366f, +0.0064811f, -0.2536792f, +0.4434170f, -0.0184855f,
  -0.0106686f, +0.0888973f, +0.1603606f, -0.1823749f, -0.6640156f, -0.1830488f, +0.0923467f, +0.0841099f,
  -0.0777772f, +0.3406968f, -0.0089669f, +0.0944230f, +0.2755463f, +0.1758116f, +0.0984457f, -0.1871475f,
  -0.0817438f, +0.0308447f, -0.0119837f, -0.2460096f, +0.0741564f, -0.1614236f, +0.0482038f, +0.1342239f,
  -0.1930391f, +0.0938174f, -0.2400089f, -0.0543054f, +0.0504244f, +0.1528293f, -0.0438029f, +0.0599501f,
  -0.2321392f, -0.0597857f, -0.2261413f, +0.1902232f, +0.3159816f, -0.0063451f, +0.0407538f, +0.1229423f,
  +0.0480718f, +0.2358461f, -0.0407260f, -0.1742222f, -0.2038513f, +0.0110679f, -0.0955723f, -0.0780929f,
  -0.1503131f, -0.2711486f, +0.0559396f, -0.3496232f, -0.0186210f, -0.0420994f, -0.2226682f, +0.2112159f,
  +0.0605832f, -0.1732247f, +0.1495856f, -0.0363511f, +0.0387919f, -0.1739605f, +0.3118514f, +0.0588688f,
  +0.3107046f, +0.1443888f, -0.7869812f, -0.5550480f, +0.2376399f, -0.2314020f, -0.4033419f, -0.1021905f,
  -0.0043849f, -0.0135302f, -0.4550230f, -0.1649641f, +0.1079976f, -0.2008343f, +0.3977998f, +0.3819070f,
  -0.1614679f, +0.1002322f, +0.0340755f, +0.2583619f, -0.0858874f, +0.0371746f, +0.2082052f, -0.0120802f,
  +0.1980451f, +0.0705869f, -0.2677445f, -0.1611349f, +0.5207344f, +0.1161884f, -0.0525171f, -0.2336785f,
  -0.1146331f, +0.2140187f, -0.3187724f, +0.1522532f, +0.3510946f, +0.0336539f, +0.3404333f, +0.3194878f,
  -0.2215693f, +0.2825712f, -0.0490837f, +0.1695464f, +0.0522522f, +0.0779558f, +0.0464974f, +0.1890323f,
  +0.1113719f, +0.0654317f, -0.2021995f, -0.1126681f, -0.3104132f, -0.1704462f, +0.4206236f, +0.3206618f,
  +0.2350084f, -0.1437715f, +0.0334163f, -0.0159381f, +0.0249513f, +0.0123492f, +0.0094236f, +0.0656266f,
  +0.0025991f, -0.0054172f, +0.1684026f, +0.2359004f, +0.0170143f, -0.0915969f, +0.1207029f, -0.0036254f,
  -0.0222480f, -0.3137234f, -0.1799919f, +0.0890549f, -0.0246243f, -0.2234802f, -0.1328501f, +0.3308541f,
  +0.0377685f, -0.1594921f, -0.3122405f, +0.2984380f, +0.3178087f, -0.0784351f, -0.0905185f, +0.1630544f,
  -0.1053727f, +0.0084653f, -0.1253418f, +0.2104660f, +0.1134958f, +0.2493330f, +0.2430080f, +0.0360002f,
  -0.0682441f, -0.1765065f, +0.0019501f, -0.1032937f, -0.0752042f, -0.0474497f, -0.0762603f, -0.0311009f,
  +0.0232227f, -0.1210658f, -0.1850834f, -0.1631705f, -0.0853540f, +0.0266710f, -0.0472803f, -0.0526211f,
  +0.0027374f, -0.0681066f, +0.0672413f, +0.1352294f, +0.0316008f, -0.0437960f, -0.1624519f, +0.0731063f
);

const float biases[4] = float[4](
  +0.0628165f, -0.0381905f, +0.0423934f, -0.0215256f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer16 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1873862f, -0.3712109f, -0.2187315f, -0.0633005f, +0.2140687f, +0.3252108f, -0.2768250f, -0.2546562f,
  +0.1574926f, +0.3493807f, -0.1883301f, -0.1129424f, -0.1781900f, +0.1666397f, +0.0621125f, -0.7907923f,
  +0.2635880f, +0.0421426f, -0.0577896f, -0.0644077f, -0.2786642f, +0.1236424f, -0.0226046f, -0.4090960f,
  -0.2057061f, -0.3446601f, -0.2702213f, +0.2681579f, +0.0432194f, +0.4919501f, +0.2075126f, +0.1168049f,
  -0.3904257f, -0.1647473f, -0.5241523f, +0.1049126f, +0.4075609f, +0.0805923f, +0.2514715f, -0.1294064f,
  +0.1475348f, -0.0095752f, -0.2665440f, -0.0571077f, -0.2653923f, +0.0328890f, -0.0395873f, -0.4518551f,
  -0.2920190f, -0.2708286f, -0.1254523f, +0.2466566f, -0.3681790f, +0.2452447f, +0.2145106f, +0.0812601f,
  -0.0504482f, -0.2117866f, -0.5428860f, +0.1212298f, -0.2446226f, +0.0373469f, -0.0197007f, -0.0180210f,
  -0.1233970f, -0.3802979f, -0.1350397f, -0.0692653f, -0.4345544f, +0.1320558f, -0.2860131f, -0.2368280f,
  -0.0342535f, +0.0447834f, +0.1465182f, -0.1101888f, +0.0940119f, -0.1360661f, +0.2584019f, -0.1331122f,
  -0.2716680f, +0.1028142f, -0.1201654f, -0.0527411f, -0.0790651f, -0.1689098f, +0.0888092f, +0.0856630f,
  +0.0866184f, -0.3289100f, +0.0484516f, -0.0614965f, -0.3178501f, +0.2352475f, -0.0250914f, -0.0700444f,
  +0.0385723f, -0.0072950f, +0.0552338f, -0.4816606f, -0.1191388f, -0.1520542f, +0.0263325f, +0.0406947f,
  -0.2848572f, -0.1835752f, +0.0826991f, -0.2474484f, +0.5276569f, -0.1077465f, -0.2845788f, +0.0450784f,
  +0.0726019f, -0.2408462f, -0.1490508f, +0.0783076f, -0.0658042f, +0.0249147f, +0.3376192f, +0.0586118f,
  -0.1318808f, +0.0707937f, -0.2293695f, -0.3319296f, +0.1249457f, -0.3973079f, +0.0999875f, +0.0816114f,
  +0.0825890f, +0.1450463f, -0.4296439f, -0.3385646f, -0.4582517f, -0.3003736f, -0.6362832f, +0.2594807f,
  +0.0704047f, -0.0688822f, -0.1369201f, -0.0934289f, +0.0328598f, +0.1602605f, +0.0086474f, +0.2278485f,
  +0.0352747f, +0.2358990f, -0.2022064f, -0.1694492f, +0.0836027f, +0.2337095f, -0.0860094f, -0.1053829f,
  -0.1774438f, +0.1553657f, -0.2765084f, -0.3069723f, -0.0523617f, +0.0646543f, -0.1960714f, +0.1539736f,
  -0.2730398f, +0.1242211f, +0.2134428f, -0.0404368f, +0.1070749f, -0.0302388f, +0.0381381f, -0.2459601f,
  +0.1879131f, +0.1587000f, -0.1433710f, +0.1378469f, -0.0849999f, -0.1320905f, -0.3155169f, +0.1165658f,
  -0.1143047f, -0.1423869f, +0.0254084f, -0.3129588f, -0.0101092f, -0.1980206f, -0.4718945f, +0.0581481f,
  -0.3762378f, -0.1822714f, -0.2454265f, +0.3127678f, +0.2235530f, +0.3488623f, +0.1774071f, -0.3086388f,
  +0.1046818f, +0.2229373f, -0.1470925f, +0.1396543f, +0.4941364f, -0.2702053f, +0.0318683f, +0.1239911f,
  -0.0141525f, +0.0692043f, -0.1675122f, +0.1619843f, +0.2537430f, +0.0623567f, -0.1675121f, +0.0225019f,
  -0.4122236f, -0.1828638f, -0.0131918f, +0.0183700f, +0.2433253f, +0.1325200f, +0.0972023f, -0.1603966f,
  +0.3255767f, -0.0398922f, -0.1778689f, +0.1119935f, +0.4809948f, +0.1786095f, +0.3309284f, -0.1373135f,
  +0.4808510f, +0.0678002f, -0.1125112f, +0.2330205f, +0.0618328f, +0.0723493f, +0.1769264f, +0.0243929f,
  +0.0224618f, -0.0723003f, +0.1141778f, +0.0315607f, -0.0089940f, +0.1402788f, +0.1274461f, -0.1163990f,
  -0.0860206f, -0.1926896f, -0.2253241f, +0.0554558f, +0.1521417f, -0.2502489f, +0.4662354f, -0.0082943f,
  +0.1332880f, -0.0670568f, -0.0604131f, +0.2738778f, -0.2852831f, -0.0244779f, -0.1664122f, -0.0615822f,
  -0.0680420f, +0.0050126f, +0.1192753f, +0.0815731f, +0.0902714f, -0.1712126f, +0.0169948f, -0.1607668f,
  -0.0599679f, -0.0811933f, +0.0172364f, +0.1236283f, -0.0697160f, +0.1809427f, +0.0204049f, -0.0912559f,
  +0.1056325f, -0.0623759f, +0.0355043f, -0.1215629f, -0.0993750f, -0.1772650f, -0.0667899f, -0.1734736f,
  +0.0625726f, -0.2907984f, +0.0503059f, -0.0601578f, -0.0799463f, -0.1085822f, -0.2701276f, -0.1962482f
);

const float biases[4] = float[4](
  -0.0861508f, -0.0379217f, +0.1366287f, +0.0684694f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer17 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0957652f, -0.4737947f, +0.1165857f, -0.2640867f, +0.5975174f, +0.0963089f, -0.0375214f, -0.3393552f,
  +0.0524746f, -0.2388815f, -0.0741925f, -0.2337200f, +0.8285265f, +0.3284316f, +0.1522499f, +0.3811371f,
  +0.1061253f, -0.1736929f, -0.1022864f, -0.1691329f, +0.4261928f, -0.0594472f, -0.1841888f, +0.0339025f,
  -0.0064500f, -0.1819296f, +0.1792877f, +0.0196445f, -0.0700161f, +0.3756225f, -0.2989514f, -0.0382931f,
  +0.0637298f, +0.2392204f, +0.1265513f, -0.0801948f, +0.6212261f, +0.3942570f, +0.2549570f, +0.1005131f,
  +0.1531208f, +0.1220533f, -0.2389677f, +0.1779974f, +0.2293531f, +0.1772352f, +0.0439282f, +0.2869548f,
  +0.0248095f, +0.0004290f, +0.2524504f, +0.2802926f, +0.1206756f, +0.0606817f, +0.0588933f, -0.0824132f,
  -0.0614610f, +0.2850541f, -0.1953013f, +0.0363597f, +0.2116582f, -0.0393159f, -0.1435543f, -0.2282586f,
  +0.2157167f, -0.0106895f, +0.1345162f, -0.2435046f, +0.0223328f, -0.1711080f, -0.1013242f, +0.2567265f,
  +0.0822194f, -0.0031866f, +0.0915886f, -0.0308400f, +0.2485237f, +0.1446161f, +0.2287104f, -0.2974864f,
  -0.0920326f, +0.2538452f, -0.0054468f, +0.0404475f, +0.4708640f, +0.0287536f, +0.2042646f, -0.0094357f,
  -0.0575999f, +0.1008957f, +0.2554812f, -0.1057359f, +0.1567820f, -0.0497523f, +0.0274016f, -0.0917956f,
  -0.0994869f, +0.5642854f, -0.0734305f, -0.4983723f, -0.1831193f, +0.1035352f, +0.3369192f, +0.1431222f,
  -0.1404325f, +0.1820200f, +0.1078472f, +0.1088700f, +0.2589475f, +0.1189385f, -0.1123820f, +0.4378664f,
  -0.1585027f, -0.1762274f, -0.0948492f, -0.3607605f, +0.3421672f, -0.1323490f, -0.0817940f, -0.1558527f,
  -0.0049390f, +0.3505302f, -0.1831137f, +0.0362355f, +0.0629235f, +0.4843533f, -0.1479076f, +0.2252259f,
  +0.3448886f, +0.0821986f, +0.1279543f, -0.0943565f, +0.2587759f, +0.3058643f, -0.0067305f, -0.1392048f,
  +0.1349250f, -0.0514119f, +0.0852318f, +0.0059770f, +0.4197586f, -0.3317288f, -0.3676806f, -0.0344286f,
  +0.0587286f, +0.1862647f, +0.0671975f, -0.1554157f, +0.1755423f, +0.1199761f, +0.0005390f, -0.1705979f,
  -0.2954108f, +0.2572926f, +0.3581749f, -0.2645692f, -0.2015558f, -0.0006277f, -0.3118319f, +0.0134240f,
  +0.0966404f, -0.1776885f, +0.0640972f, -0.0317799f, +0.2630479f, -0.0660932f, +0.1388589f, -0.0712260f,
  +0.0738252f, -0.0697276f, -0.2019035f, +0.0557552f, +0.0657901f, +0.1057837f, -0.1650620f, +0.0572441f,
  +0.0952687f, +0.0269839f, -0.0412295f, -0.3309344f, -0.4159357f, +0.0634048f, -0.3957443f, +0.0472918f,
  -0.0045816f, -0.0029211f, -0.1053741f, +0.2028021f, +0.1453481f, -0.0985844f, +0.1311672f, +0.0654227f,
  +0.1905674f, +0.4620455f, +0.0465071f, -0.0943277f, +0.2257881f, -0.1303730f, -0.0654192f, -0.1318132f,
  -0.5183531f, -0.5721814f, -0.3356375f, -0.3057084f, -0.3191418f, +0.2740668f, +0.2073599f, +0.0730726f,
  +0.3515397f, +0.1630013f, +0.1183404f, +0.2304525f, +0.3437098f, -0.2102705f, -0.0377651f, -0.1272166f,
  -0.0495512f, -0.0629934f, +0.0815949f, -0.0919978f, +0.1827333f, -0.0133212f, -0.0500910f, +0.0111598f,
  +0.1325523f, +0.2388929f, -0.1417803f, +0.0220504f, +0.1408443f, -0.0946081f, -0.2652711f, +0.0229627f,
  -0.1947174f, -0.0224949f, +0.0450123f, -0.0123606f, -0.4326361f, -0.3124657f, +0.0431468f, -0.0392295f,
  +0.1448726f, -0.0197647f, +0.5282745f, -0.1327192f, +0.2077338f, +0.0213038f, -0.1084906f, +0.0677110f,
  -0.0783212f, +0.0227049f, +0.3980736f, -0.1459227f, -0.3246716f, +0.1742465f, -0.2333989f, -0.2696214f,
  +0.0254340f, +0.1322593f, -0.6647016f, -0.0677259f, +0.4785066f, +0.6219152f, -0.3325792f, +0.0369897f,
  +0.0003871f, +0.0729974f, -0.3339837f, +0.1862539f, -0.2777980f, -0.1706108f, -0.3486512f, +0.3852988f,
  +0.0312917f, -0.2099225f, -0.2948886f, -0.1863513f, +0.0458586f, -0.2797749f, +0.1132160f, -0.0320247f,
  -0.1574948f, -0.3688788f, +0.3134507f, -0.2368428f, -0.0108503f, -0.7252151f, +0.2305517f, +0.4032142f
);

const float biases[4] = float[4](
  +0.0098689f, -0.0757939f, +0.0171097f, -0.0695157f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer17 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0312803f, -0.0642586f, +0.2392814f, -0.0305902f, -0.0730055f, -0.1282089f, -0.1477504f, -0.0147047f,
  +0.1767610f, +0.1453050f, -0.2629973f, +0.2763441f, -0.4015065f, -0.0035822f, +0.3118875f, +0.1975570f,
  +0.2098722f, -0.2604489f, -0.0424891f, -0.0385873f, -0.1257762f, -0.0787233f, +0.2251538f, -0.1018900f,
  +0.1013344f, +0.2150300f, -0.1311991f, +0.2806343f, -0.2179397f, +0.1995151f, +0.3819494f, -0.0009705f,
  -0.3071537f, -0.0856852f, -0.0895275f, +0.3822311f, -0.0951453f, -0.3070045f, +0.2660624f, +0.0994720f,
  +0.0627147f, -0.1079338f, +0.1719888f, -0.0373371f, -0.1084198f, +0.2246550f, -0.1505322f, -0.2335802f,
  -0.2022827f, -0.0969407f, +0.0110544f, -0.0980484f, -0.1354551f, -0.0333504f, +0.2250038f, +0.0719661f,
  -0.2190885f, +0.3032224f, -0.2336170f, +0.4022715f, -0.1705861f, -0.1236683f, +0.1682344f, +0.0811524f,
  -0.1677831f, +0.0473043f, -0.0085267f, +0.1889577f, -0.0473798f, -0.0124651f, +0.1573244f, -0.0308702f,
  -0.1150304f, -0.1457373f, -0.0747954f, -0.0990117f, +0.1271330f, +0.2732931f, +0.0504134f, -0.2471184f,
  -0.0596462f, +0.1081596f, -0.0272197f, +0.1391432f, +0.3790676f, -0.3270116f, +0.3973758f, -0.0898671f,
  -0.0871111f, -0.1141800f, -0.0425313f, -0.2041222f, +0.0144138f, -0.1542777f, +0.0181061f, +0.1305948f,
  -0.0447695f, +0.2735014f, +0.0808833f, -0.0860499f, +0.1305000f, +0.5730428f, +0.2823013f, -0.1431102f,
  +0.0317952f, +0.3189042f, +0.5726375f, +0.1639432f, +0.4096085f, -0.0082082f, +0.1150682f, +0.0680213f,
  -0.0373487f, +0.1175206f, +0.0748709f, -0.0021790f, +0.5353822f, -0.3779964f, -0.1344420f, -0.0652892f,
  -0.0847036f, -0.0292685f, +0.3113217f, +0.0817300f, +0.4798287f, +0.0530203f, +0.2087611f, +0.0251294f,
  +0.4243101f, -0.1917924f, +0.1947602f, +0.1839674f, -0.0389911f, -0.0753673f, +0.0833793f, +0.1863264f,
  +0.0639123f, -0.0637075f, +0.0936463f, -0.3498441f, +0.1396602f, +0.2197144f, -0.3445383f, +0.0435781f,
  -0.1661532f, +0.0799655f, -0.1515176f, -0.1561373f, -0.0285432f, +0.1179980f, -0.2058542f, +0.0079440f,
  -0.0020824f, -0.1298032f, -0.1369307f, +0.2725414f, +0.4294219f, +0.4636697f, +0.3246381f, -0.0384185f,
  +0.0084874f, +0.0829804f, +0.0150776f, +0.0395602f, +0.3276662f, -0.0210989f, -0.0610673f, -0.1242120f,
  -0.0290612f, +0.0361431f, +0.0771941f, +0.2156186f, +0.2890223f, +0.2078068f, +0.0699719f, +0.0934300f,
  +0.0194815f, -0.6430924f, +0.1416134f, +0.0004678f, -0.0420146f, +0.3804752f, +0.2324382f, +0.1027474f,
  +0.1066812f, -0.3415042f, +0.0899331f, +0.3867751f, -0.3893861f, +0.2490896f, +0.0578503f, +0.2142375f,
  +0.0119522f, +0.1621054f, +0.1639143f, -0.2110663f, +0.2013669f, +0.0085977f, -0.1534117f, -0.0140811f,
  +0.1174874f, -0.2811763f, +0.5573918f, +0.1842374f, -0.2529452f, -0.2278118f, +0.1009014f, +0.3597572f,
  -0.0893444f, +0.1000525f, +0.2307276f, -0.0007872f, +0.0749464f, -0.0704586f, +0.0998440f, +0.0379408f,
  +0.0309169f, -0.0545564f, +0.1283839f, +0.0487326f, +0.1322558f, -0.1297269f, -0.0435631f, +0.0698311f,
  -0.2519357f, +0.3484077f, +0.6171863f, +0.2668421f, +0.2881196f, +0.0853228f, -0.3729920f, +0.1044476f,
  -0.0926702f, +0.1422526f, +0.1079911f, +0.2724790f, +0.4347198f, +0.1190295f, -0.4330485f, +0.0263619f,
  +0.0547942f, +0.0673193f, -0.1317807f, -0.2573937f, -0.2153533f, -0.4243893f, -0.1389113f, +0.1020598f,
  +0.1938216f, -0.3904724f, +0.2970402f, -0.0736786f, -0.0326462f, +0.0455048f, +0.0663619f, +0.1196767f,
  -0.0490225f, -0.1601207f, +0.2168667f, -0.2334453f, +0.1554052f, +0.1946915f, -0.2628746f, +0.2033899f,
  +0.0753987f, -0.0867120f, -0.4310798f, -0.0852351f, -0.0173384f, -0.0838600f, +0.0466237f, +0.0590830f,
  +0.1803078f, -0.1455002f, -0.1990769f, -0.1858553f, -0.0480912f, +0.1157406f, +0.0305196f, -0.2083818f,
  +0.1560495f, +0.2654241f, -0.2984031f, +0.0769334f, -0.2480871f, -0.0338007f, +0.2331658f, -0.2415696f
);

const float biases[4] = float[4](
  -0.0370361f, +0.0606073f, +0.0328165f, +0.0213662f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer18 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0822251f, -0.0361433f, +0.1830187f, +0.2292216f, +0.0667697f, +0.1422850f, +0.1102842f, -0.2433673f,
  -0.1406408f, -0.0862238f, +0.1496764f, -0.0829701f, -0.0485495f, -0.1615318f, -0.0211159f, +0.0420530f,
  -0.0934739f, -0.0946543f, +0.0310246f, -0.0647399f, -0.0225260f, -0.0474835f, +0.0661955f, +0.2603257f,
  -0.1280947f, +0.0593537f, +0.0418632f, +0.1945581f, -0.1866790f, +0.0249133f, +0.1121733f, +0.2871483f,
  -0.3855141f, +0.3502989f, +0.2258158f, -0.0339490f, +0.0683717f, -0.0670424f, +0.1298290f, -0.2403903f,
  -0.2820452f, +0.2249782f, +0.1637182f, +0.3460175f, +0.2958434f, -0.0453666f, -0.1085124f, +0.1264176f,
  -0.1492646f, -0.0245664f, +0.2786539f, +0.1643498f, +0.0186610f, -0.0098017f, -0.0440154f, -0.0920730f,
  +0.0370149f, +0.0773079f, +0.4126766f, +0.0366395f, -0.0846572f, +0.0112616f, +0.0963506f, -0.1717061f,
  -0.0028530f, -0.0967210f, +0.1181284f, -0.0352697f, +0.1886716f, +0.2010731f, -0.0133564f, -0.1455152f,
  -0.0251931f, +0.3752899f, -0.0099973f, -0.2131461f, +0.1790896f, -0.2013642f, -0.1048766f, +0.0308843f,
  +0.0549849f, -0.2376413f, -0.3127034f, -0.0079711f, -0.2342107f, -0.2210008f, -0.5701808f, -0.1261599f,
  +0.3119210f, -0.3307055f, +0.0790015f, -0.1715163f, -0.1404275f, -0.0077117f, -0.1259828f, +0.0535736f,
  -0.0976110f, +0.0606983f, -0.0366420f, -0.0119791f, +0.1088796f, +0.1948009f, -0.0198139f, -0.1109453f,
  +0.1177365f, -0.4494400f, -0.1306459f, -0.2049564f, +0.1868644f, +0.1913396f, +0.0703935f, -0.0447199f,
  +0.2206033f, -0.2530414f, +0.3318234f, +0.0154706f, -0.2613745f, -0.0506098f, -0.1296206f, +0.1001491f,
  +0.0861425f, -0.0709966f, +0.0099970f, -0.1792654f, +0.3469996f, +0.0419559f, +0.0457504f, +0.2478454f,
  +0.0514340f, -0.4466152f, +0.3557024f, -0.0513794f, +0.4369648f, +0.2343295f, +0.1918335f, +0.1019372f,
  +0.3673097f, -0.4901009f, +0.2965866f, +0.2043685f, +0.3816007f, +0.0070493f, -0.2750817f, +0.2424644f,
  +0.1204130f, +0.3667144f, +0.2678943f, +0.4832920f, -0.1127494f, -0.1910327f, +0.3122734f, -0.1493136f,
  -0.1001970f, +0.2756627f, +0.0964910f, +0.1387829f, +0.2663147f, -0.2702628f, +0.0842039f, -0.0521520f,
  -0.2224838f, +0.2164543f, -0.0358898f, +0.0646093f, +0.1362861f, +0.0012300f, -0.1518217f, +0.0793209f,
  +0.0383925f, +0.2707965f, -0.1434598f, -0.0005674f, -0.1770539f, -0.1251264f, +0.2647637f, +0.0081260f,
  -0.0663140f, -0.0173357f, +0.1378610f, +0.1455962f, +0.0802678f, -0.1603500f, +0.2734227f, -0.0702726f,
  +0.0169830f, -0.0346132f, -0.0439200f, +0.2414221f, +0.0885280f, -0.2529452f, -0.0480755f, -0.2992057f,
  +0.4375042f, +0.1746668f, -0.2449267f, +0.1927557f, -0.2331923f, -0.2895772f, +0.1843526f, +0.2647070f,
  +0.3345205f, -0.0745993f, -0.0032230f, +0.2082980f, +0.2192965f, -0.1483916f, +0.1702062f, +0.1188070f,
  +0.0463131f, +0.1102368f, +0.3557138f, +0.2607959f, +0.0561269f, -0.1568050f, -0.0978669f, -0.0450045f,
  -0.0096036f, +0.0212712f, +0.1359172f, +0.1523281f, -0.0034220f, -0.2164648f, +0.1597819f, -0.1115122f,
  -0.1873091f, -0.0680609f, +0.4088932f, +0.4213378f, -0.2878606f, -0.2977645f, -0.1870351f, +0.0644346f,
  +0.0134907f, -0.0511620f, -0.1576863f, -0.0369697f, +0.1274685f, -0.1984515f, -0.2487819f, -0.0146824f,
  -0.1093460f, +0.4952714f, +0.2648088f, +0.1684130f, -0.1271957f, -0.1026890f, -0.1745075f, +0.0190270f,
  -0.0209375f, +0.2175127f, +0.5587741f, -0.0871338f, +0.0975485f, -0.1645653f, -0.2242294f, +0.1167815f,
  +0.2225541f, +0.1028112f, -0.1708883f, +0.1670620f, -0.2705870f, -0.4764227f, +0.1076796f, -0.0546120f,
  -0.0805718f, -0.1157972f, +0.0715424f, +0.3659655f, +0.2377822f, -0.2730649f, +0.1712340f, -0.0686350f,
  -0.0365627f, -0.1883918f, +0.2651458f, +0.3385482f, +0.0360756f, +0.0045191f, -0.0874694f, -0.0233747f,
  +0.1358411f, +0.2707754f, +0.1749221f, +0.0757248f, +0.0710703f, -0.1881855f, +0.2046418f, -0.0225206f
);

const float biases[4] = float[4](
  +0.0457951f, -0.0495281f, -0.0185093f, +0.0323316f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer18 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.3200789f, -0.4427606f, -0.1168393f, -0.1276209f, +0.4355799f, +0.2484069f, +0.1915376f, +0.0510994f,
  -0.1949763f, -0.3147893f, +0.4930457f, -0.0015079f, -0.0329086f, +0.2100824f, +0.3233361f, +0.2440758f,
  -0.0205881f, +0.1304835f, -0.0224398f, -0.0589871f, -0.2536825f, +0.1072005f, +0.0301882f, +0.2795230f,
  -0.4995139f, -0.0514152f, +0.1649683f, +0.4293846f, +0.0297564f, +0.0823829f, +0.3952433f, +0.0337670f,
  -0.3338268f, -0.3380784f, -0.0243306f, +0.2454332f, -0.1804434f, -0.0801417f, +0.2875119f, +0.3618959f,
  -0.2473760f, +0.2302170f, -0.0307794f, +0.3403082f, -0.0802827f, +0.1720288f, +0.1104023f, +0.1291283f,
  -0.2711294f, -0.2240999f, -0.1704513f, -0.0630193f, +0.2624538f, +0.3474233f, -0.2774634f, -0.0504359f,
  -0.0510485f, -0.0115470f, +0.0448727f, +0.1259097f, -0.1414513f, -0.0078665f, +0.1192214f, -0.0081634f,
  -0.3570325f, -0.0662614f, -0.0817809f, +0.2394101f, +0.2880282f, +0.2434600f, +0.0195148f, +0.2027139f,
  +0.1310485f, -0.0367009f, -0.3236990f, -0.5084507f, -0.0417755f, +0.1320327f, +0.1066059f, -0.0273061f,
  -0.0961615f, -0.0260920f, +0.1650304f, -0.5255029f, -0.1168397f, +0.3797988f, +0.2929346f, -0.0333752f,
  -0.0614110f, -0.0297739f, -0.0493045f, +0.1546699f, +0.0841295f, +0.0756513f, -0.0627681f, -0.1637154f,
  -0.0661103f, +0.0696684f, +0.4217373f, +0.2480115f, +0.0291558f, -0.1548011f, +0.3025784f, +0.0445830f,
  -0.1425519f, -0.0629575f, -0.2712414f, +0.2265953f, -0.0429126f, -0.1793192f, +0.4341182f, +0.2320482f,
  -0.1512076f, -0.1769660f, -0.0527442f, -0.0378038f, -0.0403587f, -0.2087962f, -0.0237606f, +0.3939515f,
  +0.0544825f, -0.0114077f, +0.0603773f, -0.2950433f, -0.1711236f, -0.0796625f, +0.0493027f, +0.0509640f,
  -0.4881523f, +0.1416698f, -0.3368931f, -0.3560605f, +0.1882152f, +0.3481646f, +0.3222046f, -0.0100156f,
  -0.2250670f, -0.0085290f, +0.0231341f, -0.0635429f, -0.0832182f, +0.2327102f, +0.1412947f, -0.1416961f,
  +0.0466249f, -0.1450389f, +0.1924358f, +0.0901076f, -0.3273082f, -0.0339100f, +0.0689306f, +0.1226310f,
  +0.1591987f, +0.0060375f, -0.1136720f, +0.0869787f, -0.0633369f, -0.0667876f, -0.0904587f, +0.2305036f,
  +0.1364000f, -0.1665866f, +0.0240883f, +0.1185728f, -0.2432340f, +0.1132466f, +0.2183810f, +0.0965527f,
  +0.1010126f, +0.1387186f, -0.0392609f, -0.2881181f, -0.0352336f, +0.0202182f, +0.0956760f, +0.1485387f,
  +0.0300463f, -0.2519300f, -0.1591995f, +0.2915890f, -0.0364191f, +0.0753631f, -0.1208012f, +0.3363018f,
  +0.1685583f, -0.0809250f, +0.2267521f, -0.2129112f, -0.2323679f, +0.2856210f, -0.2483599f, +0.2097194f,
  -0.0526555f, -0.1039017f, -0.2301175f, +0.2254512f, -0.1775624f, -0.0764064f, +0.0582257f, +0.0513185f,
  -0.0973661f, -0.3822431f, -0.0191310f, -0.1772451f, +0.0351113f, +0.0458524f, -0.0170023f, +0.2133020f,
  -0.0328341f, -0.2814545f, +0.0076159f, -0.3542212f, +0.1610075f, -0.3013752f, +0.1016314f, +0.3487847f,
  -0.2676999f, -0.2051380f, +0.0220966f, +0.5829130f, +0.0619994f, -0.1632128f, +0.0949621f, +0.1382378f,
  +0.2031807f, -0.2453424f, -0.3630687f, +0.0450241f, -0.2767199f, +0.0072060f, -0.2796238f, +0.0394627f,
  -0.1362242f, -0.0423338f, +0.3661471f, +0.1091739f, -0.1969143f, -0.0172306f, +0.0511602f, +0.0746077f,
  -0.0787355f, -0.1680342f, -0.0332915f, +0.0079076f, -0.0966485f, +0.0843156f, +0.2009753f, +0.1146558f,
  +0.1437940f, -0.1151934f, -0.2898104f, +0.0764108f, -0.1304572f, +0.1326787f, +0.0969854f, +0.0177208f,
  +0.0999911f, -0.1431239f, +0.1065507f, -0.0147069f, -0.1888298f, -0.1941545f, -0.0121548f, -0.0523271f,
  -0.0671411f, +0.1236911f, -0.1671139f, +0.0898373f, +0.0097344f, -0.1359916f, +0.0868613f, -0.1395303f,
  -0.2572415f, +0.0811689f, -0.3333993f, +0.1455950f, -0.1092545f, -0.0678040f, +0.0378234f, -0.1873297f,
  +0.0344942f, +0.4518652f, -0.0310910f, +0.2367124f, -0.1213941f, +0.0027015f, -0.0549300f, +0.0032109f
);

const float biases[4] = float[4](
  -0.1289755f, -0.0331944f, +0.1146810f, +0.0659649f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer19 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3565601f, +0.0564756f, +0.1563617f, -0.1078141f, -0.3099761f, -0.0079127f, -0.0627426f, -0.0707783f,
  -0.1238172f, +0.1903740f, +0.1285151f, +0.1288546f, -0.9363121f, -0.0830666f, -0.2289780f, +0.0822376f,
  +0.2418847f, -0.2532254f, +0.4895726f, +0.3653418f, -0.7773508f, -0.0764107f, +0.1432756f, -0.1345158f,
  -0.1169981f, -0.0185369f, -0.1275021f, +0.1556722f, -0.0311041f, -0.1433661f, +0.0745311f, -0.1266647f,
  -0.0555782f, +0.4165087f, +0.0570522f, -0.2654671f, -0.2563084f, -0.1267628f, +0.1257956f, +0.2469727f,
  -0.2664294f, -0.1511679f, +0.4079394f, +0.1024675f, -0.0983006f, +0.0061596f, +0.0120709f, +0.1230154f,
  -0.0127789f, +0.0942561f, -0.0869515f, +0.0563518f, -0.0010329f, +0.1205233f, +0.2179551f, -0.1682774f,
  -0.2803217f, +0.0903783f, +0.2873207f, +0.0559054f, -0.2795312f, -0.1053675f, +0.0755919f, +0.2295069f,
  -0.3251564f, +0.3607976f, +0.1344684f, +0.4954643f, -0.3521348f, +0.1746406f, +0.0270941f, -0.0975753f,
  -0.1488861f, +0.1449688f, -0.1749973f, -0.1082179f, +0.4198450f, -0.0351168f, -0.0611068f, +0.0915561f,
  -0.4600318f, -0.1575476f, -0.1821192f, -0.2348473f, +0.6156414f, +0.2610424f, +0.0764324f, -0.0418596f,
  +0.0873856f, +0.3442121f, +0.1118131f, +0.2079172f, -0.0345500f, -0.1998249f, +0.1674368f, -0.0171716f,
  +0.0142883f, -0.6444309f, -0.2821075f, -0.2643439f, +0.2164862f, -0.2881010f, -0.3150628f, +0.2958786f,
  +0.3701388f, -0.5393539f, -0.0438839f, -0.1485989f, +0.0184004f, -0.0595977f, -0.0780573f, +0.2038955f,
  +0.0469210f, +0.1176663f, -0.1179775f, -0.1802232f, -0.0624271f, -0.1438654f, -0.1210914f, -0.1279208f,
  +0.1673474f, -0.1867980f, -0.1780028f, +0.2236540f, -0.0986163f, -0.0361375f, -0.1598766f, -0.0620652f,
  +0.0993086f, -0.1551636f, +0.0914493f, -0.3251941f, +0.5567516f, +0.3776939f, -0.1961929f, +0.0119788f,
  -0.0414093f, +0.2497803f, -0.1615919f, +0.0001074f, -0.1590762f, -0.1200534f, +0.0341766f, -0.0508323f,
  +0.1247456f, +0.1508564f, -0.0583981f, -0.0992412f, +0.0121990f, -0.0255580f, +0.1456911f, -0.3570255f,
  -0.1276368f, -0.0306674f, +0.1095570f, +0.2779857f, -0.0136056f, +0.0386309f, -0.0266427f, -0.2251344f,
  +0.0236073f, +0.0668021f, -0.2181408f, +0.1459069f, +0.0550372f, +0.2902236f, -0.0834885f, +0.1241782f,
  -0.1491481f, +0.0575920f, -0.1321196f, -0.0251198f, +0.0465154f, +0.0507734f, -0.0275834f, +0.0577179f,
  +0.0474952f, +0.3471352f, +0.3499599f, -0.2678999f, +0.0723070f, -0.2016713f, -0.2071784f, +0.1914255f,
  +0.0934507f, +0.0366130f, +0.2793411f, +0.4145173f, -0.0936412f, +0.0088191f, +0.0234405f, +0.3273531f,
  -0.0124193f, +0.1575971f, +0.0719242f, -0.1824688f, -0.2460584f, +0.3681619f, -0.1430635f, -0.0291849f,
  +0.0345616f, -0.1256143f, +0.3522533f, -0.1602273f, -0.0658297f, +0.1033855f, +0.0112581f, +0.3380473f,
  -0.1086867f, -0.0606161f, +0.1938894f, +0.3233277f, +0.1513765f, -0.1592001f, +0.1048263f, +0.0837546f,
  +0.0672082f, +0.1488045f, +0.1127975f, -0.1935713f, -0.0153261f, +0.0690446f, +0.1034213f, -0.4524722f,
  -0.1837773f, -0.2101888f, -0.0824656f, -0.1877224f, +0.0702592f, +0.0882054f, +0.4786107f, +0.1180974f,
  -0.0864424f, +0.0269239f, +0.1249994f, -0.0005657f, +0.3261864f, +0.2154262f, -0.1395365f, -0.1051730f,
  +0.0510608f, +0.1147342f, +0.0200064f, -0.0261861f, -0.2018977f, -0.1073681f, -0.4353901f, +0.0345052f,
  +0.0126480f, -0.2750460f, -0.0630621f, -0.1187495f, +0.3366626f, +0.0488012f, -0.1024025f, +0.1436287f,
  -0.0709358f, +0.0158847f, -0.3786594f, +0.1383008f, +0.0372810f, +0.1658479f, +0.1775789f, +0.1894113f,
  +0.0851593f, +0.1511551f, -0.0134303f, +0.1130193f, -0.5423613f, -0.4014234f, -0.1960582f, -0.0411964f,
  -0.1070352f, +0.2231351f, +0.2136228f, -0.1478704f, -0.1142132f, +0.0901854f, -0.4136862f, +0.2708796f,
  +0.1605380f, +0.0716924f, +0.0243985f, -0.0522249f, +0.0139356f, +0.3201325f, -0.1942273f, +0.2431233f
);

const float biases[4] = float[4](
  -0.0090972f, -0.0301427f, +0.0789087f, -0.0208261f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer19 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0864079f, -0.2675627f, +0.1575218f, -0.1962821f, -0.5008641f, -0.2732006f, -0.1557842f, -0.1544317f,
  -0.0440619f, -0.1990110f, -0.2096773f, -0.3647653f, -0.5654020f, -0.0557620f, -0.1503522f, -0.1626020f,
  -0.2689542f, +0.1567223f, +0.0519597f, -0.1278278f, -0.2825195f, -0.1942756f, -0.0660424f, -0.0802902f,
  +0.3650739f, -0.1301815f, +0.0577491f, -0.2196632f, +0.0257102f, -0.2806751f, -0.2719680f, +0.3264832f,
  +0.1250328f, -0.1817434f, +0.0148756f, +0.0206697f, +0.1765332f, +0.3285044f, -0.1743709f, -0.4381351f,
  -0.0408240f, -0.5138402f, +0.0309080f, -0.1601847f, -0.1463039f, -0.2766590f, -0.3883006f, -0.0625645f,
  +0.1292335f, -0.4090783f, +0.2831338f, +0.0541884f, +0.2558552f, +0.0563650f, -0.2950431f, +0.0010577f,
  +0.0606365f, +0.2599034f, +0.1448748f, -0.1860238f, +0.1150078f, -0.2119059f, -0.4282329f, -0.0220192f,
  -0.0788645f, -0.3567413f, -0.3607071f, -0.2406117f, +0.0539225f, +0.0307266f, -0.2091127f, -0.0569255f,
  -0.2682271f, -0.0162908f, -0.1841807f, +0.2875461f, +0.2499150f, +0.3256627f, +0.1088892f, +0.1005336f,
  -0.0647041f, -0.1630812f, +0.0626006f, -0.0204605f, +0.9062853f, +0.4007852f, -0.0856538f, -0.0041030f,
  +0.1948777f, +0.1351499f, +0.2350654f, +0.0818665f, +0.2985114f, -0.0692950f, -0.2871609f, -0.2066108f,
  +0.1840256f, -0.1140474f, +0.4925898f, +0.0795613f, +0.1182900f, -0.1294000f, -0.0707233f, -0.0488611f,
  -0.0206718f, +0.0317453f, +0.0314372f, -0.1673696f, -0.1444821f, +0.1506467f, +0.3129653f, +0.2937542f,
  -0.0392926f, +0.0684890f, +0.1805790f, -0.1173288f, -0.1045089f, +0.2447032f, -0.0372740f, +0.1800437f,
  +0.2449460f, +0.1624286f, -0.1444183f, -0.1583580f, -0.2497055f, -0.1129750f, -0.3037805f, +0.0486464f,
  +0.1319333f, +0.0146434f, +0.0456620f, -0.0530424f, +0.0802683f, +0.0111928f, -0.2200112f, -0.2589371f,
  +0.2506386f, -0.0706136f, +0.0153483f, +0.0314653f, +0.2068807f, -0.0644283f, +0.0202583f, +0.1751139f,
  +0.3200074f, -0.2314829f, +0.1443490f, -0.0349024f, -0.2317629f, +0.3465050f, -0.3942979f, +0.1071153f,
  +0.0322485f, -0.0074579f, -0.4835995f, -0.1097921f, -0.2700037f, -0.3308178f, +0.0163641f, +0.2134601f,
  +0.0395344f, -0.5535233f, +0.2586177f, -0.0341340f, -0.0205105f, -0.3274270f, -0.3429801f, +0.0378383f,
  +0.0452403f, -0.1468370f, +0.0162861f, +0.1651114f, +0.1272495f, +0.0825401f, -0.2454388f, +0.3248964f,
  -0.0536523f, +0.2078685f, -0.2740444f, +0.1652609f, +0.2173966f, -0.4938922f, -0.1942031f, +0.0273839f,
  -0.1429940f, +0.2756356f, +0.0878999f, -0.0543349f, -0.1666412f, -0.0982343f, +0.4814566f, +0.1154043f,
  -0.0372761f, +0.0287504f, +0.0326893f, +0.0920314f, -0.0263028f, +0.2533761f, +0.0736785f, -0.1571241f,
  +0.0490613f, -0.0924990f, +0.1221093f, -0.0156801f, +0.3103440f, +0.1128871f, -0.2554132f, +0.1959022f,
  -0.0921995f, -0.0608941f, -0.0715893f, +0.2177888f, +0.2425987f, -0.1263814f, +0.2134368f, +0.1628539f,
  -0.0507769f, +0.4173663f, -0.0233294f, +0.0379414f, -0.5987667f, -0.4247916f, -0.1212845f, +0.2229587f,
  -0.2008088f, +0.1333732f, +0.1618017f, +0.0936063f, -0.5171291f, -0.3964820f, -0.0075420f, -0.1354400f,
  -0.1123502f, +0.0323562f, +0.1695614f, -0.0502149f, +0.1106698f, +0.1601360f, +0.1203743f, -0.1292374f,
  +0.0406661f, -0.2903274f, +0.0561813f, +0.1206359f, -0.3698233f, +0.0685201f, -0.2546487f, +0.3148443f,
  -0.0290735f, -0.2662005f, +0.1258917f, +0.0335475f, +0.2432466f, -0.1386638f, +0.0678694f, -0.2072875f,
  +0.0592738f, +0.0853153f, -0.0935792f, +0.1494280f, -0.1652844f, +0.0422835f, -0.0562868f, -0.1828662f,
  -0.0504086f, -0.1724244f, +0.0094221f, +0.0033714f, -0.0159575f, -0.0870158f, +0.1976984f, -0.0501620f,
  -0.2086433f, -0.1772477f, -0.2222049f, +0.0860755f, -0.1215262f, +0.1238854f, +0.3719288f, -0.2875143f,
  +0.0060665f, -0.0371418f, -0.0046986f, -0.2994037f, -0.0392818f, +0.1786885f, +0.0270747f, +0.0088595f
);

const float biases[4] = float[4](
  -0.0147472f, -0.1127992f, -0.0911093f, +0.0935837f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer20 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0371337f, +0.0060688f, +0.1209907f, -0.2330243f, +0.0701094f, +0.0223060f, +0.1362849f, +0.1108507f,
  +0.3083487f, +0.2467029f, +0.0561285f, +0.2615702f, -0.1632092f, +0.4156536f, -0.0154531f, +0.0806539f,
  +0.1130494f, +0.0479179f, -0.0283953f, -0.0870826f, +0.0619138f, -0.1682433f, -0.0546674f, +0.1043830f,
  -0.1754439f, +0.1378491f, +0.0363136f, -0.0489986f, +0.1684579f, -0.3600484f, -0.2756976f, -0.1334272f,
  -0.0632654f, +0.1924986f, -0.0328430f, +0.2661841f, -0.2584460f, -0.2252022f, +0.4694295f, +0.0074410f,
  +0.0315590f, +0.2192549f, +0.0677941f, +0.0261589f, -0.0714810f, +0.3171488f, -0.0855699f, +0.2439945f,
  -0.2534879f, +0.1434454f, +0.1636526f, +0.1243317f, +0.3027520f, -0.1655259f, +0.0528070f, -0.2827504f,
  -0.0188524f, +0.3919915f, -0.0193727f, +0.2592798f, +0.0915869f, -0.2177470f, -0.0798654f, -0.2701006f,
  -0.2918161f, -0.0042170f, -0.0072659f, +0.1328796f, +0.0063062f, -0.0441693f, +0.0568032f, -0.3687554f,
  +0.2107944f, +0.0688406f, +0.1543610f, -0.5064226f, -0.1127544f, -0.1493784f, +0.3784295f, -0.0254649f,
  -0.1584209f, -0.0902997f, +0.0220689f, -0.3037336f, +0.0143805f, +0.0574705f, -0.0068177f, -0.3096589f,
  -0.3145042f, +0.0265639f, +0.1504333f, -0.0593586f, -0.1787025f, -0.0859815f, -0.3810548f, -0.0374009f,
  +0.4587450f, +0.1312079f, +0.0036688f, +0.0015621f, +0.0248442f, +0.0072148f, -0.0597997f, -0.1914187f,
  +0.1499176f, +0.2147863f, +0.0300640f, +0.0433715f, +0.3173848f, +0.3821867f, -0.3940006f, -0.0893108f,
  +0.2520596f, +0.1578339f, +0.0987467f, +0.1112273f, -0.3194419f, -0.1817227f, -0.1688871f, +0.1539173f,
  +0.2449289f, -0.0195773f, -0.1649500f, +0.2570827f, -0.1443788f, +0.0888956f, +0.5053406f, -0.0198716f,
  +0.2863208f, -0.2385871f, -0.0808631f, -0.0775983f, -0.1489319f, +0.2422175f, +0.0649459f, +0.2994536f,
  +0.2888132f, +0.1235443f, -0.1360552f, -0.1462985f, -0.2290323f, -0.0774976f, -0.0553094f, -0.2048939f,
  -0.3184337f, -0.0736561f, +0.0183442f, +0.2165429f, -0.2240810f, +0.2095624f, -0.0017642f, +0.2261870f,
  +0.0788418f, -0.3709768f, +0.2569166f, +0.0537522f, -0.0713356f, +0.2619238f, -0.6055630f, +0.0250504f,
  +0.1807774f, +0.0015417f, +0.0139769f, +0.1238413f, -0.1673208f, -0.2098067f, -0.1954400f, +0.1053476f,
  -0.0421416f, -0.1488364f, +0.2848774f, +0.0398671f, -0.3333996f, -0.2046801f, +0.2189480f, +0.0350680f,
  +0.2523762f, -0.2362891f, -0.1615849f, +0.1672117f, -0.2237186f, -0.0948981f, -0.3169896f, +0.3028334f,
  +0.2166477f, +0.2192722f, -0.0342710f, +0.0878116f, -0.0465148f, -0.1110020f, -0.3577541f, +0.0648853f,
  -0.0587714f, -0.2502115f, +0.2992613f, +0.0265954f, -0.5010157f, -0.3833028f, -0.1976928f, -0.0691082f,
  -0.0409996f, -0.1978644f, +0.0029097f, +0.3078620f, +0.0763007f, -0.3108929f, +0.4986367f, -0.1397814f,
  +0.3284765f, +0.1766557f, -0.1370843f, +0.3108858f, -0.4203159f, +0.1208725f, -0.2072761f, -0.0071183f,
  -0.2023072f, -0.3507197f, -0.0611552f, -0.3987153f, +0.2489656f, -0.1010897f, +0.1651958f, +0.1461261f,
  -0.1953566f, -0.1628145f, -0.1881151f, -0.2957029f, -0.2373771f, +0.3224503f, +0.1110970f, +0.1898663f,
  -0.0766379f, +0.0036199f, -0.0816915f, +0.1146526f, +0.0103504f, +0.0023428f, +0.0477036f, -0.1502370f,
  -0.1879040f, +0.1274176f, -0.3063708f, -0.3509122f, +0.0480156f, -0.2489266f, +0.3828308f, -0.2438653f,
  -0.1645962f, -0.0006380f, -0.0198082f, -0.1309676f, +0.2018261f, +0.3536536f, +0.0079565f, -0.1026390f,
  +0.0276679f, +0.2288217f, -0.2374993f, +0.0493019f, +0.0659213f, +0.1137176f, -0.3563106f, -0.2988136f,
  -0.2142383f, -0.0982705f, -0.0819347f, -0.3814960f, +0.0710622f, -0.3294201f, +0.2307000f, -0.2697738f,
  -0.0378277f, -0.2188210f, -0.2687234f, +0.0444869f, +0.1228075f, +0.1569860f, +0.3378316f, -0.1895284f,
  +0.1090445f, +0.1513450f, -0.2556410f, +0.1455685f, +0.2067807f, -0.2892562f, -0.2405906f, -0.1542776f
);

const float biases[4] = float[4](
  +0.0472862f, +0.0023160f, -0.0193733f, +0.0547684f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer20 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1329203f, +0.1843877f, -0.1709740f, -0.2740706f, -0.1635796f, -0.0375793f, -0.0295586f, -0.2071862f,
  +0.1791756f, +0.2475312f, -0.0842881f, +0.2227159f, -0.0889025f, -0.0438550f, +0.1993284f, +0.0235017f,
  -0.1576200f, +0.0009727f, +0.2068803f, +0.1886111f, -0.3663609f, -0.1147109f, +0.0587933f, -0.0607483f,
  -0.1868170f, +0.3730581f, -0.0791454f, -0.1825765f, -0.2189635f, +0.0924033f, +0.3310037f, +0.0796826f,
  -0.0445701f, +0.2606060f, +0.3648835f, +0.3096015f, -0.0566219f, -0.4489401f, +0.3198080f, -0.3604946f,
  -0.0762467f, +0.1418685f, +0.1795965f, +0.0089125f, +0.0874891f, +0.0224409f, +0.0807755f, +0.0315110f,
  +0.0871938f, +0.1146342f, +0.1136264f, +0.2495321f, +0.3212633f, +0.4201804f, -0.0615622f, +0.0235639f,
  +0.2011272f, -0.2239779f, +0.1308895f, +0.2158237f, +0.3285120f, -0.0263737f, +0.0696715f, +0.0452354f,
  -0.1326586f, -0.0782356f, +0.2351638f, -0.0437739f, +0.0223699f, +0.0557669f, +0.2279260f, +0.0900915f,
  -0.1408098f, -0.1619119f, +0.1862471f, -0.0684272f, +0.2440208f, +0.0224274f, +0.0932975f, -0.1526954f,
  +0.3436983f, -0.0441935f, +0.4305962f, -0.1846114f, +0.0530160f, -0.0890800f, +0.4834847f, +0.2555533f,
  -0.1598876f, +0.2761205f, +0.0594730f, +0.1572634f, -0.0727415f, +0.1944043f, +0.2754370f, +0.0736246f,
  +0.0789668f, +0.0393828f, +0.1887277f, -0.2878199f, +0.2748443f, -0.1395389f, -0.1005817f, -0.2635417f,
  +0.0108786f, +0.5315498f, -0.1019887f, -0.1986104f, -0.3146569f, -0.8172929f, +0.3314706f, -0.0255496f,
  +0.0730079f, +0.2747929f, -0.3062109f, +0.0632083f, +0.2095695f, -0.1116240f, +0.0083884f, -0.1437829f,
  +0.0704031f, +0.2326131f, -0.0392947f, -0.3732326f, +0.2197430f, -0.3717084f, -0.0096732f, -0.0395397f,
  -0.4703735f, +0.5035935f, +0.0061695f, -0.1012062f, -0.3133667f, -0.4431506f, +0.4030040f, -0.2660013f,
  -0.2711893f, +0.1394268f, +0.1759348f, -0.0388481f, -0.2270620f, -0.2353892f, -0.0810987f, -0.4441507f,
  -0.0045070f, -0.0833331f, -0.1143807f, +0.0109298f, +0.2013175f, +0.0693659f, -0.0543275f, +0.1138977f,
  +0.1190712f, +0.3296336f, -0.1352543f, +0.0292982f, +0.3608604f, -0.2797145f, +0.1408107f, -0.3474507f,
  -0.1581290f, +0.1952729f, -0.2840193f, +0.1875548f, -0.1477555f, -0.0912682f, +0.0822013f, -0.1760968f,
  -0.2065681f, +0.0150957f, -0.1850083f, -0.0683582f, +0.1426551f, -0.0815271f, -0.1309594f, +0.1733317f,
  -0.0019428f, +0.2967997f, -0.2247504f, -0.0813836f, -0.0046902f, -0.0711068f, +0.1499036f, -0.2556331f,
  +0.0420410f, +0.0707685f, +0.0439946f, +0.2073036f, -0.1131236f, +0.0536843f, +0.0841788f, -0.1098957f,
  -0.0479499f, -0.3230030f, -0.0151538f, -0.3587454f, -0.0554484f, +0.1707370f, +0.2040838f, +0.1531806f,
  +0.2437237f, +0.1667300f, +0.0748954f, -0.0600083f, -0.0111705f, -0.0105122f, +0.1649959f, +0.0347608f,
  +0.1938947f, -0.2118767f, -0.3137099f, -0.0113692f, +0.0409380f, +0.0401974f, +0.1349947f, +0.3494838f,
  +0.0282066f, -0.2982489f, -0.1121863f, -0.1120191f, -0.1173609f, -0.0153697f, +0.2464131f, +0.0090995f,
  -0.0817907f, -0.2264645f, -0.0597159f, -0.0526193f, +0.3373568f, -0.0051221f, -0.2119697f, +0.1770933f,
  -0.0478951f, -0.1015091f, +0.2104638f, -0.0106774f, -0.0512025f, -0.0981198f, +0.2574843f, +0.0544057f,
  -0.1843302f, +0.1283672f, -0.0977414f, -0.0752130f, +0.3349184f, +0.0432488f, +0.1392248f, +0.1161645f,
  -0.1714232f, -0.0901670f, +0.0077436f, -0.3053318f, +0.3048507f, +0.1052490f, -0.0021198f, +0.2511287f,
  +0.0079106f, -0.0017514f, -0.0857465f, -0.1706572f, -0.0325514f, -0.0049262f, +0.1664712f, -0.0814288f,
  +0.0113010f, -0.2452784f, -0.0132869f, -0.2632898f, +0.6034661f, -0.0772441f, -0.1281965f, -0.1381409f,
  -0.1032242f, -0.1671884f, -0.0979974f, -0.0733162f, +0.1037903f, -0.0675516f, +0.0701378f, -0.3544890f,
  -0.1096390f, +0.0360126f, +0.1323735f, -0.1927081f, -0.0152343f, +0.2150427f, +0.0308154f, -0.3328363f
);

const float biases[4] = float[4](
  -0.1070763f, +0.0244855f, +0.1090952f, +0.0608259f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer21 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1013259f, +0.0496968f, -0.0149168f, -0.1402351f, +0.1451962f, +0.0363595f, -0.0701833f, +0.1442917f,
  +0.1212722f, -0.1168071f, +0.1886171f, -0.0252756f, +0.2587487f, +0.2630625f, -0.1275095f, +0.0270973f,
  -0.1171944f, -0.0499086f, +0.0842598f, -0.0641752f, -0.2256023f, -0.1066250f, -0.5353583f, +0.0968640f,
  +0.1323521f, +0.0715025f, -0.2277925f, -0.1524253f, +0.5233662f, -0.0398121f, +0.1372279f, -0.1219378f,
  -0.0500129f, +0.3170381f, -0.6094251f, -0.2708723f, +0.2357879f, +0.1738197f, -0.0286540f, +0.1366441f,
  -0.0433380f, +0.0229042f, -0.6044837f, -0.0212132f, -0.1325384f, -0.0558866f, -0.0513314f, +0.3798928f,
  +0.2411525f, +0.0963460f, -0.0838624f, -0.1645349f, +0.4040029f, -0.3735097f, +0.0624204f, -0.2479764f,
  -0.0654075f, +0.1721113f, -0.0621296f, +0.0244234f, +0.3673496f, +0.3563272f, +0.0957909f, +0.0517814f,
  -0.1233931f, -0.0657808f, +0.2310217f, +0.1007232f, +0.0050240f, -0.2781914f, -0.1752383f, +0.2489541f,
  +0.1208033f, -0.2940578f, -0.1518511f, +0.2104296f, +0.0697785f, -0.2805747f, -0.1193332f, +0.1694522f,
  +0.1298402f, -0.2800277f, -0.5255995f, +0.1337336f, +0.2535682f, +0.3055962f, +0.0216285f, +0.0890083f,
  -0.1349053f, -0.1437501f, -0.1229220f, -0.1894936f, +0.6059616f, -0.1552439f, +0.1270878f, +0.2315062f,
  -0.0874832f, -0.0572042f, -0.2197427f, +0.2775331f, -0.1546948f, +0.0822398f, -0.2916967f, +0.0243968f,
  +0.1678058f, +0.3873526f, -0.4259679f, +0.0269855f, +0.4500955f, -0.0669469f, -0.0965618f, -0.4239180f,
  +0.2718836f, +0.1604733f, -0.0902104f, -0.1471520f, +0.1287057f, -0.2009883f, +0.2568030f, +0.0756064f,
  +0.1520039f, -0.2274408f, +0.0174578f, +0.0179834f, -0.1078337f, +0.0985956f, +0.0266644f, -0.0051433f,
  +0.0075088f, -0.2232065f, -0.3569598f, -0.0002365f, +0.0363236f, -0.0898315f, -0.1681853f, +0.0700210f,
  -0.1257843f, -0.3381878f, -0.0809698f, +0.1286638f, -0.2072522f, -0.2031475f, -0.0049649f, +0.0011124f,
  +0.0464140f, -0.2781918f, -0.0674863f, -0.2772690f, +0.2505200f, -0.0956320f, -0.4494414f, +0.1835104f,
  +0.0891913f, -0.2801681f, -0.0267351f, -0.0977380f, -0.0772631f, -0.0687698f, +0.0553620f, +0.0441772f,
  -0.0793165f, -0.4120750f, +0.0609975f, -0.0209242f, -0.1235597f, +0.1605899f, +0.1573567f, +0.0252122f,
  +0.0449802f, +0.2454122f, +0.0994980f, +0.1167420f, +0.4019096f, +0.2744093f, -0.1725121f, -0.3230195f,
  -0.3957237f, -0.1123841f, +0.1176768f, -0.2158671f, +0.1496945f, +0.3204145f, +0.1277693f, +0.2345158f,
  -0.0893081f, -0.1317296f, +0.3346780f, +0.0096662f, +0.1449975f, +0.0930023f, +0.0482496f, -0.1317783f,
  +0.0232235f, +0.2280552f, -0.0530993f, -0.0801902f, -0.0332617f, -0.3130029f, -0.1266473f, +0.1328883f,
  -0.0212216f, -0.2678681f, +0.1969693f, -0.2870812f, -0.2499833f, +0.0737521f, -0.0845318f, +0.2951364f,
  +0.0036524f, -0.0425350f, -0.0057296f, -0.3464315f, +0.1114831f, +0.0841151f, +0.1198380f, +0.0501727f,
  +0.2937635f, -0.0375281f, -0.2889840f, -0.0524367f, +0.1339305f, +0.2092019f, -0.2205463f, +0.0115362f,
  +0.0125843f, -0.5457299f, -0.1634425f, -0.0789144f, +0.1867317f, +0.0079318f, -0.2591029f, +0.0996054f,
  +0.1895489f, -0.0769092f, +0.1155529f, -0.0894937f, +0.0601837f, -0.0975286f, -0.3238923f, -0.0181234f,
  +0.0047555f, +0.2829319f, -0.1285201f, +0.0012741f, +0.1465032f, -0.0392533f, -0.2226784f, -0.0367998f,
  +0.2494207f, -0.0766552f, +0.3271023f, -0.1678345f, -0.0511918f, -0.3417736f, +0.0696899f, +0.2128613f,
  +0.0627676f, -0.0609974f, +0.1621491f, +0.0714991f, +0.3656157f, -0.0331631f, -0.4557653f, -0.0814683f,
  +0.3751378f, -0.3736283f, -0.0458677f, +0.0664126f, -0.0747105f, -0.1799987f, -0.0450911f, -0.3273445f,
  +0.0095186f, -0.2207661f, +0.1025198f, +0.0526960f, +0.2655091f, -0.2833892f, -0.2340246f, -0.0635965f,
  +0.0338277f, -0.2085352f, +0.0028011f, +0.2046293f, -0.2825031f, -0.0037875f, -0.1328019f, +0.2586243f
);

const float biases[4] = float[4](
  -0.0226002f, -0.0296742f, -0.1297587f, -0.0135313f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer21 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0679039f, -0.1583541f, +0.0744675f, -0.0279057f, -0.0808337f, -0.0370777f, -0.0655523f, -0.0028825f,
  -0.0832466f, -0.1281040f, +0.0242204f, +0.1093908f, +0.2115006f, +0.0290861f, +0.1852602f, -0.2617305f,
  +0.0011638f, -0.1518344f, -0.0914168f, -0.0994557f, +0.2510626f, +0.0675534f, +0.0658670f, -0.2208181f,
  +0.2260415f, -0.0829162f, -0.1353434f, +0.0071110f, +0.2335352f, +0.3406998f, -0.1393957f, +0.1150604f,
  -0.0769942f, -0.5617236f, -0.2045584f, +0.1975880f, +0.3803213f, +0.2576571f, -0.2091406f, +0.0936159f,
  +0.0242171f, -0.0546159f, -0.3985934f, +0.0040267f, +0.1112267f, +0.2241831f, -0.3642457f, +0.3747266f,
  +0.2690566f, +0.0159774f, -0.1131382f, +0.1063579f, -0.4545857f, +0.2419445f, -0.2184225f, -0.0388876f,
  +0.1058034f, -0.1012388f, -0.1000269f, +0.0011460f, +0.0087590f, +0.2051240f, -0.1827721f, -0.2180874f,
  +0.1946807f, -0.0039339f, +0.0507986f, +0.0451388f, -0.2342368f, +0.0629327f, +0.0534019f, +0.3954492f,
  +0.1115766f, +0.0685863f, +0.2353016f, +0.1118404f, +0.2545952f, -0.2443206f, -0.1526475f, -0.3710579f,
  +0.1203891f, -0.0604424f, +0.3698989f, -0.2827881f, +0.2694343f, +0.0745740f, -0.3441124f, -0.0662988f,
  +0.4164461f, -0.0877925f, +0.3935804f, +0.2066886f, +0.0947596f, -0.1708636f, -0.0318722f, -0.1826370f,
  +0.0109444f, +0.0253863f, -0.0148190f, +0.0184154f, -0.2747025f, -0.2611500f, -0.0145351f, -0.2421354f,
  +0.1301671f, +0.2141834f, -0.1258972f, -0.0482132f, -0.1564732f, +0.3429831f, -0.2013112f, +0.0868979f,
  +0.1309915f, -0.0998580f, -0.0387690f, +0.0532688f, -0.1759044f, -0.1172803f, +0.1068107f, +0.2314957f,
  -0.1789799f, -0.2336635f, -0.0106564f, +0.0407348f, -0.1411390f, -0.3133759f, -0.0409983f, +0.0869109f,
  -0.1717318f, +0.0941451f, -0.0184187f, -0.1131176f, -0.0815100f, -0.0102366f, -0.1296733f, +0.2240732f,
  +0.0977488f, +0.1669468f, +0.2964837f, +0.3118929f, -0.0708781f, +0.0196180f, +0.1828743f, -0.1097440f,
  +0.0125735f, -0.1283272f, +0.1698154f, -0.0477063f, -0.4342936f, -0.2043210f, -0.3896488f, -0.1544205f,
  +0.1161614f, -0.2380010f, +0.0628808f, +0.0660993f, -0.1126047f, -0.2866563f, +0.2860591f, +0.3794309f,
  +0.2177002f, -0.0081793f, -0.0716106f, +0.2973490f, +0.0055651f, +0.1010356f, +0.3556988f, +0.2634285f,
  -0.3127326f, +0.3197291f, +0.3113476f, -0.0890331f, -0.2184366f, -0.1903791f, -0.2207150f, -0.0696913f,
  -0.3153880f, +0.0808998f, +0.1006367f, -0.2353172f, +0.4410861f, -0.0517607f, -0.0564167f, -0.0912076f,
  -0.0039958f, +0.0526424f, +0.1161693f, +0.2327420f, -0.2624933f, +0.0180256f, +0.2541561f, +0.0929251f,
  -0.2698183f, +0.1965443f, +0.2096274f, +0.0818870f, -0.2319349f, +0.3070553f, +0.1048879f, +0.2859303f,
  -0.0155335f, +0.1724590f, -0.1116815f, -0.0529251f, -0.1270506f, +0.1454375f, -0.1534092f, +0.2197201f,
  +0.1855580f, +0.0162797f, -0.0336902f, -0.0258980f, +0.2492973f, +0.2828797f, -0.2037574f, -0.0980841f,
  -0.2262222f, -0.3928603f, +0.3089046f, +0.2072355f, +0.2441350f, +0.1997182f, +0.2828997f, -0.0216268f,
  -0.2957355f, -0.2767377f, +0.1805099f, +0.0766162f, +0.2196209f, +0.2769253f, +0.4020850f, +0.4419298f,
  +0.0529197f, -0.0448127f, -0.1526944f, -0.1045882f, +0.1175042f, +0.2987005f, +0.0213913f, +0.1431887f,
  +0.2158650f, +0.2807600f, -0.0043115f, +0.1079525f, +0.1382043f, -0.2009997f, -0.1932586f, -0.0468473f,
  -0.0910003f, -0.0599189f, +0.2862228f, -0.0560908f, -0.1940053f, -0.4800172f, +0.1228971f, -0.0026950f,
  +0.1393812f, -0.0066050f, +0.0771718f, +0.3668533f, -0.0827654f, -0.1355370f, -0.0469602f, +0.1380178f,
  -0.1433155f, -0.1379445f, +0.0175973f, -0.0889520f, -0.1694649f, +0.2394718f, -0.0310240f, +0.0814506f,
  +0.3050006f, -0.2550787f, +0.0056264f, +0.0922800f, +0.3459560f, -0.1326119f, -0.1823682f, -0.0274284f,
  +0.0488079f, -0.1938109f, +0.1353061f, +0.0264341f, -0.0062016f, -0.0564511f, +0.1322869f, -0.2618544f
);

const float biases[4] = float[4](
  +0.0039471f, +0.0167547f, -0.1424218f, -0.0556222f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer22 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0455164f, +0.0940424f, -0.1676233f, +0.1241555f, -0.1840771f, -0.0499963f, -0.3422675f, +0.2601425f,
  +0.2294931f, +0.0764400f, -0.2152297f, -0.2075725f, +0.2440985f, -0.1124356f, -0.1224467f, +0.1309007f,
  +0.0097617f, +0.0508133f, -0.2486434f, +0.0025428f, -0.0851858f, +0.0087347f, +0.3695304f, -0.1647554f,
  -0.2430687f, -0.2381038f, +0.0881147f, +0.0993553f, -0.2256467f, -0.2074711f, -0.1200016f, -0.2714772f,
  -0.0419921f, -0.2851240f, +0.0591558f, -0.0085642f, +0.0411383f, -0.3523217f, -0.1865007f, +0.2218215f,
  -0.1082399f, -0.0515519f, -0.0647249f, -0.1967420f, +0.1608595f, -0.2243235f, +0.0618184f, +0.2717830f,
  -0.2142426f, -0.0767908f, -0.0521085f, -0.1254096f, +0.0639107f, -0.2949224f, +0.2225394f, -0.2463466f,
  +0.1704352f, -0.0591335f, -0.1421158f, -0.1669267f, +0.0413590f, +0.2821937f, -0.0445893f, -0.2435285f,
  -0.0620001f, -0.0924444f, +0.1134431f, -0.1401908f, +0.0347632f, +0.1636479f, -0.1274437f, +0.0686922f,
  -0.0120734f, +0.0473212f, +0.0298048f, -0.1608985f, +0.3764651f, -0.0712191f, -0.2493428f, -0.1234795f,
  +0.1197713f, +0.0026120f, +0.2957192f, -0.2681397f, -0.2121646f, +0.2090045f, +0.0494981f, +0.2457408f,
  +0.0979944f, +0.0011133f, -0.0337765f, +0.0349947f, -0.1470770f, +0.1395203f, +0.4509448f, -0.0454033f,
  -0.2402522f, -0.0196498f, +0.1771807f, -0.0183529f, -0.1934178f, +0.1480969f, -0.1288787f, +0.4429680f,
  -0.1856544f, +0.1912605f, +0.2341045f, -0.1794540f, +0.2651696f, -0.0401532f, +0.0483931f, +0.7168142f,
  -0.1258586f, -0.4925102f, -0.1933812f, +0.0519909f, -0.0300260f, -0.4312242f, +0.0260468f, +0.5987843f,
  +0.1741589f, +0.1916754f, +0.0292267f, -0.0769180f, +0.1466419f, -0.1406540f, +0.1143869f, +0.0497130f,
  -0.1388636f, -0.0240961f, +0.3898157f, +0.1803927f, +0.1558959f, -0.4143041f, +0.4029949f, +0.0267118f,
  +0.2148819f, +0.4320464f, +0.3481528f, +0.1010638f, +0.1687248f, -0.1737645f, -0.1305681f, -0.0435391f,
  +0.1676025f, -0.1412893f, +0.0572023f, +0.1264725f, -0.1082636f, -0.0934654f, +0.4499147f, -0.0811508f,
  -0.0286832f, +0.0031406f, +0.0096329f, +0.1169509f, +0.0182679f, -0.1592186f, +0.1040503f, -0.1629750f,
  -0.1898797f, +0.2687420f, -0.1141375f, +0.0079241f, -0.1604301f, +0.2513817f, +0.0320468f, -0.0259981f,
  +0.2492787f, +0.0207771f, -0.0452341f, +0.3503620f, -0.0602648f, +0.3522639f, +0.2777595f, -0.0491339f,
  +0.3011558f, +0.5913305f, +0.0636040f, +0.1756880f, +0.0594878f, -0.1062834f, -0.3200496f, +0.0481136f,
  +0.0985021f, +0.0665429f, -0.1957962f, -0.1388720f, -0.0189329f, -0.0351312f, +0.1436148f, -0.4007007f,
  +0.3485259f, -0.0832299f, -0.2294942f, -0.1513358f, -0.0959011f, +0.2487292f, -0.1236802f, -0.5042160f,
  +0.3101491f, +0.2658246f, -0.0955229f, +0.0793527f, +0.1834546f, -0.2384641f, -0.0811959f, -0.2686335f,
  +0.1918942f, +0.2610582f, +0.0553918f, -0.1305631f, -0.0855099f, +0.1260353f, -0.2922216f, -0.0334426f,
  +0.0667621f, -0.1466065f, -0.0256639f, +0.2756288f, +0.1190391f, -0.0672976f, +0.0066380f, +0.0831963f,
  -0.1958238f, +0.1450237f, -0.0328935f, +0.0732295f, -0.3523011f, -0.0303808f, -0.0199313f, -0.1613365f,
  -0.1142465f, +0.0067547f, -0.0520919f, +0.3049554f, -0.0549637f, +0.2191547f, +0.0744377f, +0.0554843f,
  -0.1721250f, +0.1858247f, -0.1011030f, -0.0117097f, -0.0056628f, -0.0651579f, -0.1367594f, -0.2269405f,
  +0.0237947f, -0.4517011f, +0.0866431f, +0.2833472f, -0.1292619f, -0.1428879f, +0.0970090f, +0.0361604f,
  +0.0696889f, -0.0307528f, +0.0167421f, +0.1089057f, -0.1589004f, +0.4252298f, -0.0987303f, +0.0804713f,
  +0.0046364f, -0.1006667f, -0.0557924f, +0.1290363f, +0.2014473f, -0.2931524f, +0.1497831f, -0.2571479f,
  -0.0457863f, -0.5532361f, +0.2224551f, -0.0776790f, -0.0356259f, -0.0139724f, +0.1597344f, -0.0299541f,
  +0.1204515f, +0.1297353f, +0.3885441f, -0.3138718f, -0.0899219f, +0.2097941f, -0.2648861f, -0.2668034f
);

const float biases[4] = float[4](
  +0.0574623f, -0.0094476f, -0.0180550f, +0.0001981f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer22 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2724923f, -0.0790259f, -0.3363874f, +0.0738841f, -0.1788808f, -0.0005140f, -0.1652250f, -0.0533067f,
  -0.3170255f, -0.0433100f, -0.1960819f, +0.0378371f, +0.0523270f, -0.0092663f, -0.0086941f, -0.0723784f,
  +0.1294375f, -0.0815334f, +0.1791184f, +0.0473921f, -0.0092259f, -0.2883830f, +0.1084515f, -0.2501312f,
  -0.6063385f, -0.1353927f, -0.0421126f, -0.3071168f, -0.1308783f, -0.3256106f, -0.4075730f, +0.1710169f,
  +0.0238500f, -0.0897658f, +0.2338663f, +0.0505758f, -0.0328642f, -0.0510519f, +0.0090452f, -0.0334918f,
  -0.2769320f, -0.1884094f, -0.3506917f, -0.1020799f, +0.1135342f, -0.1207870f, +0.2176297f, -0.1201176f,
  -0.3078795f, -0.3415479f, +0.0620834f, -0.0342901f, +0.0913544f, -0.1799766f, +0.0676609f, -0.0315590f,
  -0.1001294f, +0.0134962f, -0.1035135f, -0.3204784f, +0.4552765f, -0.0215879f, -0.4157079f, -0.0365551f,
  -0.0948268f, -0.0264236f, -0.1975946f, -0.2230942f, +0.3310814f, -0.0664655f, +0.5490929f, -0.2469548f,
  -0.1006577f, -0.0498224f, -0.1302658f, +0.1106433f, +0.0153470f, +0.0120938f, -0.4396396f, -0.1040966f,
  +0.0527745f, +0.0999735f, -0.0006800f, +0.0481373f, -0.3417767f, -0.3003474f, -0.2270495f, +0.3185234f,
  +0.1097456f, +0.0792264f, -0.3142515f, -0.1508519f, +0.0173985f, -0.0108160f, -0.2415793f, +0.4765540f,
  -0.2268150f, +0.1397813f, -0.0083398f, +0.1890192f, -0.2342718f, +0.0680661f, +0.2271627f, -0.1951777f,
  +0.0410496f, +0.2691449f, +0.0289610f, +0.3470643f, -0.2580287f, -0.1477842f, +0.0087750f, -0.2684979f,
  -0.1513194f, +0.1935666f, +0.1284785f, +0.2913966f, -0.1061060f, +0.0460140f, +0.0157242f, +0.1406406f,
  -0.0912166f, +0.0330573f, -0.1056915f, +0.3801453f, -0.2280934f, +0.0859479f, +0.0872549f, +0.0603744f,
  -0.0661373f, +0.3485107f, +0.2135404f, -0.2896247f, -0.3892109f, +0.2380772f, +0.5768922f, -0.0461640f,
  +0.0438848f, -0.3662137f, +0.2626401f, -0.3736814f, -0.0457918f, +0.0685736f, -0.1110502f, -0.2832492f,
  +0.0920535f, -0.1016483f, -0.0937486f, +0.1628337f, +0.1930464f, -0.0691530f, +0.2144011f, -0.1819688f,
  -0.2365358f, +0.0924412f, +0.2337698f, +0.3073850f, -0.0070163f, +0.2314158f, +0.0498220f, -0.1960517f,
  -0.0510581f, -0.0037394f, +0.1442135f, +0.0006888f, +0.1460927f, -0.1057547f, -0.1546399f, +0.0426187f,
  +0.1101271f, -0.1447800f, -0.0772994f, -0.0210438f, +0.1719423f, +0.2800819f, -0.0924122f, -0.0848121f,
  +0.1710433f, +0.0701346f, +0.0321378f, -0.0827431f, +0.0100450f, -0.0415158f, +0.3449998f, -0.0284897f,
  +0.0040005f, -0.0351405f, +0.1629139f, +0.2269995f, -0.0487014f, +0.1386140f, +0.0393420f, -0.2600337f,
  +0.1946421f, +0.0183908f, -0.2191278f, +0.3264996f, +0.0611854f, +0.2529505f, +0.0980065f, -0.2442003f,
  -0.0600432f, -0.0422183f, +0.3222229f, -0.0350088f, -0.1235374f, -0.0606853f, +0.3344047f, -0.2338128f,
  +0.0951346f, -0.0145562f, +0.0669320f, +0.1099279f, +0.2640656f, -0.1185184f, +0.1919156f, -0.2659366f,
  -0.1601945f, -0.2579997f, +0.1928840f, -0.0029499f, -0.3517233f, +0.0415274f, +0.0884510f, +0.1581948f,
  -0.2589003f, +0.1405504f, +0.2078011f, +0.1465035f, -0.2206984f, -0.0805074f, +0.0842002f, +0.0420180f,
  -0.0584551f, -0.0231911f, +0.0459793f, +0.1052501f, +0.1254978f, -0.0999052f, -0.1090373f, +0.0459978f,
  -0.3509560f, +0.1536458f, +0.0131121f, +0.0974226f, -0.0455829f, -0.0164623f, -0.3745258f, +0.0152005f,
  -0.0913879f, +0.3727176f, +0.0201822f, -0.1615654f, -0.2995909f, -0.0623947f, -0.1657782f, +0.1358606f,
  -0.1567189f, -0.2082452f, -0.0039954f, +0.3154760f, -0.0942586f, -0.0324517f, -0.0767470f, -0.1802608f,
  -0.0448036f, -0.0107219f, -0.1507509f, +0.1241278f, -0.1858367f, +0.1217500f, -0.3061602f, +0.2516165f,
  -0.2104792f, -0.2910363f, +0.0017764f, +0.0644367f, +0.0103648f, -0.0643182f, +0.1471704f, -0.1998927f,
  -0.2453881f, -0.1207240f, -0.0307971f, -0.1205361f, +0.0857322f, +0.2590687f, +0.1150207f, -0.0701352f
);

const float biases[4] = float[4](
  -0.0716436f, -0.0370781f, +0.0990283f, +0.0690267f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer23 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0005181f, +0.4031208f, -0.0140622f, -0.1286611f, +0.2292876f, -0.0546408f, -0.0561490f, +0.2227353f,
  +0.1501390f, -0.2046046f, -0.1514077f, -0.0304371f, +0.3584626f, +0.4075854f, +0.1825655f, +0.0452882f,
  +0.2091972f, +0.1673546f, -0.0512550f, -0.1022889f, +0.0541648f, +0.0121764f, +0.1576892f, +0.2254051f,
  -0.0201536f, -0.3725109f, +0.0659556f, +0.4425540f, +0.1333099f, +0.0146330f, -0.0004118f, +0.3191777f,
  -0.0308871f, -0.2950321f, +0.1384086f, +0.0682897f, +0.0171354f, +0.0949623f, -0.0554797f, -0.1395561f,
  +0.0806238f, +0.1714882f, +0.3802760f, +0.0291013f, +0.1500681f, -0.0524460f, -0.1295167f, +0.3084867f,
  +0.0313581f, +0.1852002f, +0.0458149f, +0.1008917f, +0.1489725f, -0.1982287f, -0.1245369f, -0.0225140f,
  +0.0662852f, +0.1432288f, +0.3025919f, +0.2707324f, -0.0718873f, +0.1590492f, -0.0749910f, -0.0468164f,
  -0.1951451f, +0.0645942f, -0.1318395f, +0.0393771f, +0.0860553f, +0.2390306f, -0.1044136f, -0.0600819f,
  -0.1118484f, +0.1195903f, -0.4390379f, +0.1809857f, +0.0209650f, +0.1217258f, -0.0975395f, +0.3147560f,
  +0.0875187f, -0.3557771f, -0.1200409f, -0.0940615f, +0.2784218f, +0.9014850f, -0.4430214f, +0.1572953f,
  +0.0472081f, +0.0906745f, -0.1303686f, +0.0792612f, +0.1717692f, +0.2501397f, -0.3109241f, +0.0211997f,
  -0.0147691f, -0.5584503f, +0.0412199f, -0.0328172f, -0.0233155f, +0.5679407f, +0.0356583f, -0.2865618f,
  +0.2221402f, -0.6139322f, -0.3323030f, -0.2645918f, -0.0285160f, +0.7839370f, +0.1243380f, +0.0173711f,
  +0.1574762f, +0.1893686f, -0.1174679f, +0.1859699f, -0.1013291f, +0.1972878f, -0.0314427f, +0.0237158f,
  +0.1025285f, -0.3171386f, +0.1350906f, +0.0540086f, +0.2434379f, +0.0211588f, -0.0507855f, -0.2815019f,
  -0.0863433f, +0.3714745f, +0.4063992f, +0.0453928f, +0.0272052f, -0.0777719f, +0.1299203f, +0.1409834f,
  +0.1873164f, -0.3471860f, +0.4078747f, +0.3484989f, +0.1221066f, -0.1247407f, +0.0512115f, +0.2436097f,
  -0.0860043f, -0.3174122f, +0.0974654f, +0.1552712f, +0.0198281f, -0.1450838f, +0.1533711f, +0.0742138f,
  +0.1206742f, -0.2869021f, +0.3285450f, +0.0958686f, -0.1438215f, +0.2893032f, +0.0113962f, -0.2900550f,
  -0.0605857f, -0.2477345f, -0.0404010f, +0.3226957f, -0.0680595f, -0.0081414f, +0.0616625f, -0.0187389f,
  -0.1131227f, -0.4689603f, +0.1894429f, +0.0234239f, -0.0733367f, -0.0219455f, +0.1163978f, -0.1824749f,
  -0.1064199f, -0.4263911f, +0.2799953f, -0.0052459f, -0.2331500f, +0.3606033f, +0.0859033f, +0.2580998f,
  -0.1285346f, -0.0752993f, +0.3605498f, +0.1272145f, -0.1374058f, +0.0103602f, +0.3418199f, +0.1567979f,
  +0.1582328f, -0.2943736f, -0.0488002f, -0.0125914f, -0.2120392f, +0.2526632f, +0.0233570f, -0.2449128f,
  -0.3364275f, -0.3044604f, +0.1452363f, -0.0851882f, -0.1768741f, +0.3737873f, +0.1387047f, -0.0059330f,
  +0.1084640f, -0.0714366f, +0.4333850f, +0.1313577f, +0.0083290f, +0.2989061f, +0.1140889f, -0.1676471f,
  +0.0537189f, -0.1091925f, -0.0856747f, -0.0580248f, +0.2992322f, +0.0498179f, +0.0122537f, +0.1095861f,
  -0.0675090f, -0.1542931f, -0.1819720f, +0.1796989f, +0.2791391f, +0.1555000f, +0.0055388f, +0.3059997f,
  -0.0687550f, -0.0813459f, -0.2136388f, +0.0820709f, +0.3770141f, +0.3830934f, +0.1425726f, +0.0455218f,
  +0.0306771f, +0.2134377f, +0.1553186f, +0.2890978f, +0.0174140f, +0.1704552f, -0.1431768f, +0.0567544f,
  +0.3704958f, -0.4155604f, -0.0414757f, +0.0866277f, +0.3269158f, +0.0410317f, -0.0236428f, -0.0769607f,
  -0.0136475f, +0.0243852f, -0.2826160f, -0.2560398f, +0.2144996f, +0.1003485f, +0.3132733f, +0.2906317f,
  -0.0946648f, +0.0618293f, +0.0282945f, +0.1705960f, +0.1184196f, +0.1788826f, -0.0564023f, +0.1350672f,
  +0.1561629f, +0.2988665f, +0.1686817f, +0.0432693f, +0.4493071f, -0.2159503f, -0.2345399f, -0.2105125f,
  +0.3417366f, +0.3434746f, -0.0981751f, -0.1955341f, -0.0289480f, -0.3594423f, +0.0639847f, +0.3419583f
);

const float biases[4] = float[4](
  +0.0559583f, -0.0148720f, +0.0486197f, -0.1549360f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer23 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2382527f, -0.1334334f, -0.0106848f, +0.0701754f, -0.7529837f, -0.0734842f, -0.5216768f, +0.2283756f,
  -0.0922563f, -0.2008374f, +0.0898289f, +0.2479056f, -0.4266635f, -0.0131710f, -0.3319420f, +0.2164001f,
  -0.1542276f, +0.0547763f, +0.0942843f, -0.0413999f, -0.4600862f, +0.1928425f, -0.0020866f, -0.0864432f,
  -0.1121406f, +0.1642053f, -0.1313637f, +0.0118852f, -0.3448553f, -0.1245428f, -0.1057519f, +0.0307045f,
  -0.0815870f, -0.2531112f, -0.2048652f, +0.0733679f, -0.4015002f, +0.3674940f, +0.2967003f, -0.4807291f,
  -0.0574580f, +0.0755198f, +0.0501436f, -0.0835161f, -0.2972435f, +0.1731312f, +0.3420296f, -0.1558463f,
  +0.0895317f, -0.1006182f, +0.0749849f, +0.0505192f, -0.4326121f, -0.1296587f, -0.0874938f, +0.1047728f,
  -0.3246491f, -0.1220386f, -0.2312931f, -0.1306909f, -0.0013264f, +0.3877717f, +0.1973700f, -0.0616958f,
  +0.2654728f, +0.0514872f, +0.3223103f, -0.0065191f, +0.0617592f, +0.0945631f, +0.1763588f, +0.0897105f,
  -0.0556233f, +0.0411796f, +0.1153646f, +0.0565569f, -0.0386897f, +0.2628612f, -0.4890347f, +0.1839203f,
  +0.1096545f, -0.4748636f, -0.2396487f, -0.1163633f, -0.0561707f, +0.2416030f, +0.2502232f, -0.0878694f,
  -0.0286295f, -0.2276085f, -0.4713762f, -0.1059618f, +0.2669004f, -0.2751179f, -0.1235887f, +0.1766372f,
  +0.2222679f, -0.0767609f, +0.1009968f, -0.0937230f, +0.0170370f, +0.0832960f, -0.2713407f, -0.0701457f,
  +0.4306970f, +0.3885932f, -0.1490487f, -0.0852261f, -0.2626801f, -0.2926689f, +0.0810822f, +0.0138627f,
  -0.1615847f, -0.0119190f, +0.3221709f, +0.1170785f, -0.0756002f, -0.3999983f, +0.2329622f, +0.1987514f,
  -0.1251433f, +0.1261769f, +0.1789118f, -0.0380030f, -0.0185272f, +0.1628929f, -0.0206784f, -0.2729526f,
  +0.2409663f, +0.1307309f, -0.3347295f, -0.0097599f, +0.0115138f, +0.0721838f, -0.4121608f, +0.1846485f,
  -0.1901318f, -0.0782667f, +0.0258886f, -0.3012920f, -0.0047395f, -0.1580855f, -0.1516729f, -0.1763725f,
  +0.0887771f, +0.0641196f, -0.3249140f, +0.0820676f, -0.1400205f, +0.1142547f, -0.3603253f, +0.2020717f,
  +0.1209707f, -0.3618679f, -0.3200029f, -0.2167913f, +0.1991210f, -0.1498618f, +0.2163860f, +0.0420020f,
  +0.1491017f, +0.1191334f, +0.0742674f, -0.1652200f, +0.1635596f, +0.0225526f, -0.2208561f, -0.0723569f,
  +0.0513605f, -0.4654406f, -0.2788344f, -0.1397971f, -0.2681353f, -0.2731762f, -0.4289698f, +0.1904068f,
  +0.0473926f, -0.3646952f, +0.1044270f, -0.0926670f, +0.1768832f, +0.0617000f, +0.1854561f, -0.3609044f,
  +0.1018350f, +0.1624413f, +0.0625529f, -0.2473157f, +0.1554933f, +0.0859454f, -0.1413330f, -0.1588831f,
  +0.0059454f, +0.0462645f, +0.1869451f, +0.1951875f, +0.2433632f, -0.0025913f, -0.1486300f, -0.0491042f,
  -0.1478486f, -0.3921701f, +0.0458804f, -0.3885353f, +0.0578161f, -0.1155286f, -0.1713323f, +0.0313253f,
  +0.0991155f, +0.1547483f, -0.3224892f, +0.0422438f, +0.0817325f, -0.1382119f, +0.1042967f, -0.1767030f,
  -0.0258585f, +0.0746433f, -0.2351892f, +0.0550283f, +0.0930711f, +0.1230632f, -0.0339960f, +0.0753215f,
  -0.0070409f, +0.0745404f, -0.1482054f, +0.2211536f, +0.2718056f, -0.0533298f, +0.2967561f, +0.0901263f,
  +0.1182308f, +0.0116304f, +0.0518034f, -0.0848880f, +0.0893762f, -0.0642919f, +0.1403264f, -0.2986098f,
  -0.1818068f, +0.2463274f, -0.1872790f, -0.1489379f, -0.1577022f, -0.0550530f, -0.1569207f, -0.1318035f,
  -0.0825723f, -0.4171776f, +0.0248594f, +0.0369435f, +0.0145163f, -0.1571448f, +0.3223338f, +0.2722719f,
  +0.0144267f, -0.2729467f, -0.4203679f, +0.1698820f, +0.0680164f, -0.0421181f, +0.0322793f, +0.1790174f,
  -0.1416123f, +0.1265650f, -0.1509632f, -0.1004706f, -0.1880430f, +0.0745015f, -0.1988822f, +0.0238845f,
  +0.0999612f, +0.1754375f, -0.0964433f, -0.0133105f, +0.4979523f, -0.1060008f, +0.1596821f, +0.0903569f,
  -0.3122383f, +0.0889133f, -0.0071290f, -0.1073316f, +0.2757823f, +0.0693798f, +0.3757836f, +0.0574409f
);

const float biases[4] = float[4](
  -0.0592595f, -0.0744974f, -0.0293246f, +0.0312241f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer24 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2674578f, -0.0835578f, +0.0257513f, -0.0837789f, +0.2381126f, -0.0656482f, -0.1368055f, -0.0091594f,
  +0.0327006f, -0.0613403f, -0.1429826f, -0.0437986f, -0.1681784f, -0.0660285f, +0.1461555f, +0.0842509f,
  +0.2375364f, +0.0155337f, -0.2466604f, -0.0526648f, +0.0988677f, +0.0785140f, -0.0245286f, +0.1044602f,
  +0.0750733f, -0.1748321f, +0.3332253f, -0.0213899f, +0.2727051f, +0.4033022f, +0.1366819f, -0.0719230f,
  -0.0862699f, -0.2411998f, +0.3226082f, -0.1226896f, +0.1580276f, -0.0215783f, +0.1386377f, -0.0039589f,
  +0.0838255f, +0.0042230f, -0.1899377f, -0.0238516f, +0.1435007f, -0.2486460f, +0.2374448f, +0.1571802f,
  +0.1463070f, -0.0418873f, -0.2965136f, -0.0059456f, +0.1137034f, +0.2019200f, -0.0733524f, +0.0461526f,
  +0.1835710f, +0.0316746f, -0.1837656f, -0.0126918f, -0.1575003f, +0.0421793f, -0.2178845f, -0.2463469f,
  -0.1872514f, -0.1783263f, +0.0440598f, -0.0394371f, +0.1971748f, -0.0116193f, +0.0285084f, -0.0303330f,
  +0.0055568f, -0.0858582f, +0.0379889f, -0.3279406f, +0.0834185f, -0.0132288f, +0.4529894f, -0.1478134f,
  -0.0599059f, +0.3515452f, -0.3185030f, -0.1154967f, -0.4204547f, -0.3025913f, +0.3786055f, -0.0797351f,
  +0.0501867f, -0.2215883f, +0.2350156f, -0.2328078f, +0.2452751f, -0.0952246f, +0.5233716f, +0.0723844f,
  -0.0703904f, -0.0390545f, -0.2064411f, -0.2303211f, -0.3835416f, -0.1226456f, +0.2478580f, +0.3107954f,
  +0.1079575f, +0.1059136f, -0.2831156f, +0.2576990f, +0.1304959f, -0.1391165f, +0.0979701f, +0.2261336f,
  +0.0172038f, +0.0065494f, +0.1935134f, -0.3410257f, -0.1400168f, +0.1174568f, +0.2508858f, -0.2998456f,
  -0.2198310f, -0.0072698f, +0.0110368f, -0.1265910f, -0.0382809f, -0.1489893f, +0.0109644f, +0.1346496f,
  -0.4807628f, +0.1328683f, -0.0427091f, +0.0409584f, -0.3208537f, +0.2522729f, +0.0608123f, +0.2703199f,
  +0.0436526f, +0.0861107f, +0.1757257f, -0.1148852f, -0.1197057f, +0.1240537f, +0.2611291f, +0.1787897f,
  -0.2420489f, +0.0051710f, -0.0135718f, -0.1859815f, -0.0272268f, -0.3718908f, +0.0633833f, +0.1259641f,
  -0.1810334f, -0.1940846f, +0.1022830f, +0.0460484f, +0.3215621f, -0.1873648f, -0.0365716f, -0.2308064f,
  -0.2289619f, +0.2298731f, +0.1595290f, +0.1740185f, -0.1589747f, -0.3065379f, -0.5444291f, -0.1981404f,
  -0.0940135f, +0.0976714f, +0.1253900f, +0.0631784f, +0.0780865f, -0.1953521f, -0.0204490f, +0.3888879f,
  -0.2767968f, -0.3186698f, +0.0586334f, +0.1014777f, -0.0717538f, -0.2032890f, -0.0512439f, -0.0669692f,
  -0.1128980f, +0.4112590f, -0.3189920f, -0.0640112f, -0.2742850f, -0.2563449f, -0.0894102f, +0.0403256f,
  -0.1191091f, -0.2214730f, +0.3275767f, +0.2166979f, +0.0123173f, +0.0214015f, +0.1792221f, -0.1081532f,
  +0.0540534f, -0.1071480f, -0.1514233f, +0.1492634f, -0.2556764f, -0.2453334f, +0.4772794f, -0.1431347f,
  +0.0157409f, +0.1117946f, -0.0875369f, -0.0719891f, -0.1870566f, -0.2726257f, +0.2026999f, -0.1767637f,
  +0.2064688f, -0.0861793f, +0.1857127f, -0.2245649f, -0.2123574f, -0.1724716f, -0.0244910f, +0.1025029f,
  +0.1124345f, -0.0871171f, -0.0086310f, +0.1549879f, +0.1290274f, -0.1359909f, +0.3140674f, +0.0799110f,
  -0.0004572f, +0.0488425f, +0.2448635f, -0.1144655f, -0.0893026f, -0.2951417f, -0.0799370f, +0.1507084f,
  -0.2054012f, -0.3411477f, -0.0640132f, +0.2670453f, +0.1280639f, -0.0343300f, +0.2072604f, +0.0836958f,
  -0.2713731f, -0.1592011f, -0.3260589f, -0.0424953f, +0.0557260f, -0.0970958f, +0.0170705f, +0.0302713f,
  -0.1806735f, +0.0516282f, +0.0517278f, -0.0553450f, -0.0016859f, -0.3224001f, +0.0750818f, -0.1176880f,
  -0.1616730f, -0.0583682f, -0.1062030f, -0.1347092f, -0.0321409f, +0.0730699f, -0.1653228f, +0.0226784f,
  +0.0075665f, +0.0716711f, -0.0508492f, -0.0976389f, -0.2209093f, -0.0516956f, +0.0042866f, -0.1667914f,
  +0.0539246f, +0.0553338f, +0.0903529f, +0.1205912f, +0.0910105f, -0.2790907f, -0.1058049f, +0.0624814f
);

const float biases[4] = float[4](
  +0.1020345f, +0.0450520f, -0.0273023f, -0.0235116f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer24 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1416030f, -0.0011092f, -0.0024898f, -0.0590737f, +0.2942535f, +0.2266114f, -0.2058549f, -0.2127540f,
  +0.3046926f, +0.3146199f, +0.3230665f, -0.3414431f, -0.2402409f, +0.0328165f, +0.1700797f, -0.1296372f,
  +0.1190614f, +0.0799125f, +0.0182253f, -0.1328343f, -0.1700144f, +0.1144198f, -0.2073528f, +0.1176349f,
  +0.3113674f, +0.0731932f, -0.1737597f, -0.3382148f, +0.4345416f, +0.1584513f, +0.0919968f, -0.2491020f,
  +0.2608138f, +0.0068978f, +0.0099837f, -0.2558746f, -0.1360180f, -0.1172800f, -0.0380130f, +0.3027844f,
  +0.2409128f, -0.1922654f, +0.1306785f, -0.1458305f, -0.2677135f, -0.1106245f, -0.0520003f, -0.0223140f,
  +0.1749267f, +0.2699964f, -0.2932033f, -0.2305330f, +0.2424569f, +0.0047094f, -0.0957326f, +0.0667834f,
  +0.0912012f, +0.2882118f, -0.2378883f, -0.4509444f, +0.0756013f, -0.1326719f, +0.2074669f, +0.1573626f,
  +0.0699066f, +0.0573015f, -0.0120990f, -0.0788982f, -0.0601313f, +0.1355609f, -0.4410872f, +0.1201934f,
  -0.1044885f, -0.2574681f, -0.0849807f, +0.5725372f, +0.2293707f, +0.1014959f, +0.0738558f, -0.0415950f,
  +0.0773215f, -0.6007690f, +0.3650718f, +0.0238753f, +0.0243626f, -0.5002708f, +0.0690671f, -0.0045643f,
  -0.0743542f, -0.3457718f, -0.0983935f, -0.0484423f, -0.2534392f, -0.3026912f, +0.4838597f, -0.2542012f,
  -0.2331258f, -0.3680311f, +0.3041138f, +0.0403491f, -0.2038459f, +0.2760153f, -0.1606849f, +0.1421259f,
  +0.2220147f, -0.4966551f, +0.3173026f, +0.3067752f, -0.1615092f, +0.2225224f, +0.1441667f, +0.2228034f,
  +0.3013630f, -0.5614027f, +0.1315307f, +0.1521486f, -0.1434488f, -0.0749358f, +0.1154463f, -0.1227541f,
  -0.1271693f, -0.3204824f, +0.2128180f, -0.3699611f, -0.2395604f, +0.0805083f, +0.2461496f, +0.0821487f,
  +0.0201691f, -0.2909370f, +0.2008377f, +0.1153121f, +0.0873449f, -0.2159097f, +0.0396654f, +0.1140048f,
  -0.3664725f, -0.4204302f, +0.5853596f, +0.1210500f, +0.0336725f, -0.1887671f, +0.1849433f, -0.0690316f,
  -0.0181989f, -0.0454323f, -0.0113104f, +0.1524884f, +0.0139248f, +0.1489671f, +0.0434179f, +0.0186273f,
  +0.0174179f, +0.2553008f, -0.0006772f, +0.1908850f, +0.0505813f, +0.3262684f, +0.0055851f, +0.0511952f,
  +0.0358560f, -0.0540321f, +0.2029816f, -0.1039360f, -0.0907548f, -0.1782118f, +0.1496021f, -0.0480476f,
  +0.0616544f, -0.1963453f, -0.2099049f, -0.4204203f, -0.1659158f, -0.0685683f, +0.0958673f, -0.1963360f,
  +0.0546900f, +0.1846934f, +0.2258306f, -0.1888262f, +0.0554015f, -0.1011741f, -0.2322742f, -0.1169240f,
  +0.0986880f, +0.5480129f, -0.0622577f, -0.1148470f, -0.1094904f, +0.1170216f, +0.0836825f, +0.2601379f,
  -0.1632291f, -0.0324883f, -0.0067090f, -0.2301470f, -0.1349432f, -0.0224167f, +0.2638339f, -0.0757864f,
  -0.0852746f, +0.1850933f, -0.0111408f, +0.1727373f, +0.1511654f, -0.1833465f, -0.2809116f, -0.2301898f,
  +0.0830095f, +0.3219658f, -0.2265669f, -0.0630454f, +0.1034217f, +0.2963393f, +0.1230054f, -0.1193323f,
  -0.0165683f, +0.1855566f, -0.0352556f, -0.2087741f, -0.4516562f, -0.1942550f, -0.1042962f, +0.2794307f,
  -0.0355591f, +0.3213186f, +0.0853708f, -0.0360102f, -0.0598920f, +0.1122233f, -0.2071269f, +0.0094901f,
  +0.0201491f, -0.1593626f, +0.2501970f, -0.0164096f, -0.2868058f, -0.0747229f, -0.1050565f, +0.0786646f,
  +0.0781383f, +0.1317186f, -0.2154063f, +0.0805028f, -0.2826800f, -0.1702513f, +0.1928090f, +0.0990421f,
  -0.0492192f, -0.4416383f, -0.1736855f, +0.1898589f, +0.0589018f, -0.1642936f, +0.1084194f, +0.0053419f,
  -0.0736604f, -0.4185421f, +0.1927413f, -0.0202205f, -0.0301918f, +0.0258787f, -0.0554126f, -0.0850433f,
  +0.1145650f, +0.0441537f, +0.1054742f, -0.0615046f, +0.1150852f, -0.0773556f, +0.0405072f, +0.1808434f,
  -0.0671252f, -0.3051962f, +0.2973485f, -0.2620930f, -0.0008660f, -0.2342917f, -0.2003724f, -0.0064420f,
  +0.0653462f, +0.0021612f, -0.1155571f, +0.0260392f, -0.0231132f, -0.2495932f, -0.3274023f, +0.1445238f
);

const float biases[4] = float[4](
  -0.0791554f, -0.0094276f, +0.1114507f, +0.0967467f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer25 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1489899f, +0.1028037f, -0.0680005f, +0.0716449f, +0.0833999f, -0.0793330f, -0.1516231f, +0.0890155f,
  -0.1304819f, +0.0645550f, +0.1512097f, -0.1014936f, +0.3638814f, -0.0134068f, -0.5867710f, +0.1908566f,
  -0.0202486f, +0.0773145f, -0.0870816f, +0.0126932f, +0.3523560f, +0.0070180f, -0.0114930f, -0.1748580f,
  -0.0377771f, +0.0046423f, -0.1084199f, -0.0162384f, +0.1660695f, -0.0079933f, -0.0025173f, -0.1164641f,
  -0.2748897f, -0.5310863f, +0.4351941f, +0.2553445f, -0.4093139f, +0.0430422f, -0.0190274f, -0.0244894f,
  -0.0477477f, +0.2620027f, -0.1840414f, +0.0182726f, -0.0371845f, +0.1369898f, -0.1742496f, -0.4602844f,
  +0.0772600f, +0.1825863f, -0.0767420f, +0.0490996f, -0.0764219f, -0.0178776f, -0.1101298f, -0.0926253f,
  -0.0794020f, -0.0782687f, +0.0105098f, -0.0227643f, -0.1919640f, -0.0384814f, -0.0410876f, +0.0046040f,
  -0.1454945f, +0.1321009f, -0.0135660f, +0.1009937f, +0.0411522f, +0.0352042f, +0.0902060f, -0.1287296f,
  -0.0144958f, -0.0955871f, +0.0883568f, -0.0981679f, -0.1787109f, +0.0265000f, -0.4851904f, +0.2144679f,
  +0.0192390f, -0.2095563f, +0.0768689f, +0.0319214f, -0.0758417f, -0.1310195f, +0.0117884f, +0.0515858f,
  +0.1598818f, -0.0215745f, +0.1147257f, -0.0663931f, +0.1289198f, +0.0008588f, +0.1505324f, -0.2435452f,
  -0.0137474f, -0.0660615f, -0.1033861f, -0.1790588f, +0.0796970f, -0.1743070f, +0.0762447f, -0.1727995f,
  +0.0595637f, -0.1537982f, +0.0282735f, -0.2032822f, +0.1593794f, -0.2348148f, +0.3215240f, +0.0629151f,
  +0.0668093f, -0.0679045f, -0.0053170f, -0.2611565f, +0.2386815f, -0.0712784f, -0.2007476f, +0.0605003f,
  -0.0212183f, +0.4042454f, -0.0197393f, +0.0349603f, +0.3818294f, -0.5253937f, +0.1778247f, +0.1363483f,
  -0.0931325f, +0.6162955f, -0.0968340f, +0.1118964f, +0.6046918f, -0.8872638f, -0.0627977f, +0.0124332f,
  +0.1859009f, -0.0682107f, -0.0809875f, +0.1826445f, +0.3058219f, -0.2531587f, +0.3452196f, -0.0511070f,
  +0.0998868f, +0.2806366f, +0.4082830f, -0.0168279f, -0.1018371f, -0.9040301f, -0.0377363f, -0.0731670f,
  -0.0492125f, +0.2013810f, +0.0282712f, +0.1533203f, +0.0037557f, -0.8530716f, +0.3155057f, +0.3851249f,
  -0.1674550f, -0.0955516f, +0.0765228f, +0.0730112f, +0.0265767f, -0.2785442f, +0.0924352f, -0.0034015f,
  -0.0214001f, +0.4073934f, -0.3639987f, -0.0070497f, +0.3367945f, -0.5443020f, +0.0164390f, +0.1283187f,
  +0.3162238f, +0.3061225f, -0.6024472f, -0.2716989f, +0.3862769f, -0.7148775f, -0.2869545f, +0.1888108f,
  -0.0906403f, -0.2935985f, -0.3147928f, -0.2747298f, +0.1405067f, -0.1996192f, +0.0508018f, +0.0904551f,
  -0.0903455f, -0.3237762f, -0.0586998f, +0.1251771f, -0.1300238f, +0.1779288f, +0.0222483f, +0.1339538f,
  -0.2500407f, -0.0775489f, -0.1181317f, -0.0061825f, -0.1255580f, +0.0428269f, -0.1968670f, -0.3427228f,
  -0.0340013f, +0.1982786f, -0.0416758f, -0.4019105f, -0.0645322f, -0.1200571f, +0.0097668f, -0.2521448f,
  +0.4397359f, -0.2816389f, +0.2294186f, -0.0763789f, +0.4611238f, -0.1620967f, -0.1069119f, -0.1820711f,
  +0.2842284f, +0.2357194f, +0.3473327f, +0.0838648f, +0.0112855f, -0.1287669f, -0.2468609f, +0.0238901f,
  +0.1398467f, -0.6162902f, +0.0543365f, +0.0528667f, +0.3380224f, -0.3562838f, +0.1238005f, -0.2183555f,
  +0.1287156f, -0.1441575f, -0.0695703f, +0.0583004f, -0.1032254f, +0.0137132f, -0.2033927f, -0.2458172f,
  +0.3700486f, +0.1203066f, +0.1805037f, -0.0824676f, +0.1345121f, +0.3751625f, -0.3180884f, +0.1917112f,
  +0.2494612f, -0.5075545f, -0.2859065f, -0.1455008f, +0.2156708f, -0.1703481f, +0.0020736f, +0.1562879f,
  -0.0467994f, +0.2784377f, +0.0636818f, +0.0466314f, +0.0057935f, +0.1846143f, -0.4906040f, -0.1397444f,
  -0.0591122f, +0.1952498f, +0.1748841f, -0.6080148f, +0.2447396f, +0.1829460f, -0.0056002f, +0.2331816f,
  -0.0943514f, -0.1221722f, -0.0841995f, -0.0181914f, +0.0285526f, -0.1081558f, -0.2083566f, -0.0094480f
);

const float biases[4] = float[4](
  -0.4528564f, -0.1368433f, -0.0534959f, -0.1229601f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer25 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0748936f, +0.3626962f, -0.0318796f, -0.4864814f, -0.1969848f, -0.0518880f, -0.1672506f, +0.2800550f,
  -0.0219476f, +0.1657703f, +0.3424485f, -0.0743830f, -0.2809659f, -0.0322320f, -0.2275036f, -0.0359190f,
  -0.0999118f, +0.2919550f, -0.0550085f, -0.0683071f, +0.1462524f, +0.2266282f, +0.0820769f, -0.1351767f,
  -0.4294218f, +0.1977761f, +0.1170140f, -0.0951347f, -0.1558881f, +0.2121876f, -0.0186680f, +0.1496226f,
  -0.0244400f, -0.1036139f, +0.2552463f, +0.1785197f, +0.3098373f, +0.2464631f, +0.0700591f, -0.4099232f,
  +0.3754345f, +0.0152732f, -0.0409302f, +0.2825057f, +0.0477485f, -0.0755064f, -0.0844944f, -0.1358972f,
  +0.0132152f, +0.1870391f, +0.1082141f, -0.1563050f, -0.3685310f, +0.1295370f, +0.2349912f, +0.0260688f,
  +0.0624564f, -0.0045977f, +0.1343474f, -0.2449128f, +0.0051609f, +0.1198109f, +0.0126686f, -0.1100094f,
  +0.0946115f, -0.3547213f, -0.1457641f, +0.0756172f, +0.2085389f, +0.0960039f, +0.0249260f, -0.0017020f,
  +0.3238790f, -0.2132478f, -0.1700655f, -0.1152016f, +0.1283622f, +0.2152049f, -0.3228713f, +0.0393929f,
  -0.1603055f, +0.3153227f, -0.2125626f, +0.2036627f, +0.2711607f, -0.1441125f, +0.1773655f, +0.2741109f,
  +0.0707256f, -0.2032378f, +0.0803721f, +0.1127256f, +0.3255111f, -0.0983449f, -0.1468144f, +0.1234412f,
  +0.1926627f, -0.2946350f, -0.4450524f, +0.0958790f, +0.0587671f, +0.4361955f, -0.2732464f, -0.0038246f,
  +0.0277231f, +0.4661177f, +0.2780155f, -0.0707675f, +0.5155088f, -0.3806824f, +0.4662591f, +0.2934363f,
  +0.1371779f, -0.0796585f, +0.0428561f, +0.0750394f, -0.0620875f, -0.1248620f, -0.0603063f, -0.1137569f,
  -0.0225094f, -0.0094202f, -0.2959137f, -0.0207185f, +0.1235420f, +0.3467208f, -0.1540798f, +0.0467715f,
  +0.1010215f, +0.1388658f, +0.1263042f, -0.0919748f, +0.2212346f, +0.0431222f, +0.2225725f, +0.1137512f,
  -0.1652591f, -0.1349812f, +0.0794930f, +0.0941055f, -0.0377288f, -0.1928693f, +0.0063468f, -0.0153869f,
  -0.1075017f, +0.0345604f, -0.0426450f, +0.2557413f, -0.3795480f, +0.1924384f, -0.0994125f, +0.2998527f,
  -0.3047199f, -0.0663158f, +0.6126696f, +0.0041811f, -0.2383752f, -0.1270172f, -0.3922234f, +0.0917780f,
  +0.0379575f, +0.0109504f, -0.0598572f, -0.0277000f, -0.3133974f, -0.2018978f, +0.0332732f, +0.1499771f,
  -0.0881969f, +0.0869321f, -0.0193976f, -0.0886214f, -0.2315794f, +0.2643472f, -0.0512310f, +0.0528261f,
  -0.2790946f, +0.6026058f, +0.3584144f, +0.4190728f, -0.2156396f, -0.2120039f, +0.1035084f, +0.0421950f,
  +0.0824387f, +0.2825969f, -0.0312925f, -0.0489172f, -0.3775403f, -0.4537066f, -0.2436396f, -0.0729427f,
  +0.1084329f, +0.0426321f, -0.0759616f, -0.2725708f, -0.0306195f, +0.2893718f, +0.1482743f, -0.0119726f,
  +0.0799985f, +0.1084991f, +0.1480828f, +0.1250499f, +0.0660703f, -0.2312135f, +0.1163019f, +0.1543709f,
  +0.0307099f, +0.2023583f, +0.0124812f, +0.0125767f, -0.1123390f, -0.2711148f, +0.0024770f, +0.1198146f,
  +0.1874097f, -0.0575985f, -0.0740813f, -0.2427247f, +0.2952923f, +0.2172463f, +0.0374744f, -0.2711176f,
  +0.1795907f, +0.0959256f, +0.0052869f, -0.1684183f, -0.3583931f, -0.4946668f, +0.0038943f, -0.2899020f,
  +0.0672177f, -0.1135523f, +0.2438314f, -0.0500990f, +0.1570947f, +0.1405060f, -0.2671964f, -0.1108586f,
  +0.2832285f, -0.0489172f, +0.0600350f, -0.0139421f, +0.0634314f, +0.0656255f, +0.1620145f, -0.2189610f,
  -0.0127688f, +0.3509444f, -0.1232866f, +0.1159207f, -0.2583805f, -0.5003103f, -0.5426782f, +0.0315301f,
  -0.0588369f, -0.2253437f, +0.3819924f, +0.0385378f, -0.0178709f, +0.3207265f, -0.1063834f, +0.0870746f,
  +0.0845193f, -0.1896750f, +0.0382584f, +0.0256046f, -0.1345045f, +0.1483253f, +0.0591887f, -0.0709532f,
  +0.0507640f, -0.2471976f, -0.0644436f, +0.2395704f, -0.4106502f, +0.1191228f, -0.4565268f, +0.0285426f,
  -0.1023452f, +0.0176109f, -0.0294711f, -0.2218896f, -0.4710189f, +0.4406036f, -0.3434691f, +0.2037471f
);

const float biases[4] = float[4](
  +0.0640009f, -0.1140259f, -0.0514954f, +0.0138169f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer26 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.4201951f, +0.0675895f, +0.0175149f, -0.0755268f, -0.2270458f, -0.0384074f, -0.0772178f, +0.0297854f,
  +0.1906734f, +0.2402798f, -0.0388320f, +0.0177053f, -0.2916038f, +0.1459084f, -0.0088819f, +0.1421832f,
  -0.1421734f, +0.2814752f, -0.0536485f, +0.0203758f, -0.2481433f, +0.1830832f, -0.0831586f, +0.3462562f,
  +0.1467678f, -0.1331714f, +0.3791046f, -0.1770856f, -0.0083227f, -0.1177514f, -0.1509501f, -0.5473977f,
  -0.0040506f, -0.1931521f, +0.3312474f, -0.1771540f, -0.0887482f, +0.1676522f, -0.1317252f, -0.2558064f,
  -0.0315637f, +0.0824538f, -0.1526167f, -0.0578471f, -0.0101627f, +0.2038460f, -0.1321411f, +0.2232404f,
  -0.4749708f, -0.2466636f, -0.3824167f, -0.3180965f, +0.0260429f, +0.1273695f, +0.1911070f, +0.1039013f,
  -0.1529353f, +0.0089852f, +0.2435721f, +0.0751695f, -0.1156788f, +0.1587231f, -0.0264754f, +0.0040442f,
  +0.2025864f, -0.0402703f, -0.0061104f, -0.1223048f, -0.1137334f, -0.2413361f, -0.0708094f, -0.0861425f,
  -0.1380540f, -0.3752619f, +0.0030688f, +0.2871909f, +0.0045742f, -0.1667220f, +0.1090163f, +0.0780271f,
  -0.2461878f, +0.0357856f, -0.4905596f, +0.0415676f, -0.1686544f, -0.0418450f, +0.1736090f, -0.0032893f,
  -0.2041964f, -0.0316380f, -0.2677713f, -0.2220953f, -0.2120409f, -0.1365173f, -0.2733448f, +0.1555195f,
  -0.3931160f, -0.1259762f, -0.1570238f, +0.3723608f, -0.1546571f, -0.5804114f, +0.2297511f, +0.0819858f,
  +0.4252892f, +0.2972698f, -0.8579357f, +0.1843562f, -0.3684757f, +0.1287152f, -0.2820633f, -0.3334171f,
  -0.1017224f, +0.0613129f, -0.5368071f, +0.0449703f, +0.3248563f, -0.0198427f, +0.1172922f, -0.1998807f,
  -0.2806246f, -0.2160080f, -0.1979193f, +0.2763817f, -0.2367200f, -0.1033404f, -0.2740878f, +0.0182525f,
  -0.0246399f, -0.0220154f, -0.1522671f, +0.0802153f, -0.1233746f, +0.2122345f, -0.4176249f, -0.4118820f,
  -0.1853002f, +0.0996894f, -0.3892682f, -0.0832682f, +0.0265562f, -0.1148622f, -0.1568778f, +0.4376377f,
  -0.0706358f, +0.0506066f, -0.0226610f, +0.0844454f, -0.0724279f, -0.0516633f, -0.2707223f, +0.0060971f,
  -0.0761535f, +0.2998678f, -0.1086079f, +0.1258803f, +0.0553891f, -0.5054374f, -0.0741288f, +0.0477319f,
  +0.2069129f, -0.1636663f, +0.1781918f, -0.5498740f, +0.0754761f, -0.0322939f, -0.0859803f, -0.1191470f,
  +0.5381316f, -0.0382339f, +0.3611165f, +0.2499268f, -0.1363515f, -0.0699615f, -0.0908014f, -0.7633529f,
  +0.0269204f, -0.3485403f, +0.7369815f, +0.1326764f, +0.1189751f, -0.5659595f, +0.1084530f, -0.1513510f,
  +0.0410424f, +0.1999509f, +0.4112408f, -0.3098249f, -0.0566378f, +0.0636620f, +0.0871384f, +0.1805580f,
  -0.2699639f, -0.0852509f, +0.0360153f, -0.3961051f, +0.0324399f, -0.3420899f, -0.0146587f, -0.0632545f,
  -0.3867757f, -0.0183728f, +0.4725201f, -0.0491869f, -0.3051763f, -0.2716212f, +0.0761845f, +0.2697079f,
  +0.1814185f, +0.0811328f, -0.2134231f, -0.1976239f, +0.1435873f, +0.0241654f, -0.1211011f, +0.3215394f,
  -0.1300570f, -0.2388364f, +0.0011545f, +0.1236536f, -0.1278814f, -0.2235141f, -0.1364594f, -0.0858898f,
  -0.1457386f, -0.1809636f, -0.1758730f, +0.3942262f, -0.0835319f, -0.0920020f, +0.1388350f, -0.1539563f,
  -0.0545582f, -0.2999198f, +0.1588883f, -0.2015752f, -0.0621370f, -0.1045320f, +0.2102811f, -0.1947654f,
  +0.1823103f, -0.0656784f, +0.1290480f, -0.0853841f, -0.2781944f, -0.0540550f, -0.0874402f, -0.2209375f,
  -0.0587740f, -0.0619398f, -0.2671326f, -0.1553093f, +0.1825818f, -0.2219494f, -0.0167877f, -0.1366898f,
  -0.2043987f, +0.1265420f, -0.0645867f, -0.2455581f, +0.0192035f, -0.0524012f, +0.2155399f, -0.1069446f,
  -0.0215223f, -0.0460325f, -0.1050235f, +0.1018832f, +0.0495256f, -0.5107257f, -0.0777675f, +0.0216321f,
  +0.0105769f, +0.1391279f, -0.1687652f, -0.0279169f, -0.0953192f, -0.3067205f, -0.1947162f, -0.0880022f,
  -0.0214853f, +0.0195545f, -0.3589581f, -0.0473702f, -0.0099559f, +0.0155470f, -0.1483666f, +0.0942778f
);

const float biases[4] = float[4](
  +0.0839352f, +0.1164418f, -0.1112631f, -0.0130396f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer26 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3406120f, -0.4185775f, +0.1111709f, -0.1578235f, -0.1382777f, +0.0290253f, +0.1819281f, +0.0764671f,
  +0.2626611f, -0.0187829f, +0.1785223f, +0.0131197f, -0.0851880f, +0.2955608f, +0.2403365f, +0.0418771f,
  +0.0169830f, +0.2885685f, -0.4339921f, -0.2459522f, -0.3368829f, +0.0233449f, -0.2343317f, +0.1639183f,
  -0.0358519f, +0.2340274f, +0.0902131f, -0.1503245f, +0.0034527f, +0.0573811f, +0.2277599f, +0.1057567f,
  +0.8414216f, -0.1823726f, +0.5163904f, +0.0246121f, +0.0986061f, -0.4132685f, +0.1558751f, +0.2110038f,
  +0.1798118f, -0.1670890f, +0.2080273f, -0.1062964f, +0.0076799f, +0.0936747f, -0.1912791f, +0.0125016f,
  -0.0800643f, -0.1113226f, +0.0074893f, -0.2664533f, -0.0411810f, +0.3549384f, -0.0629097f, +0.3272518f,
  -0.3917322f, +0.0355059f, -0.4592169f, -0.1767896f, +0.1241384f, -0.0083271f, +0.0801155f, +0.4657204f,
  -0.0065814f, +0.2754602f, -0.0444746f, +0.0301609f, -0.1794991f, +0.2045967f, -0.1267890f, +0.0225908f,
  +0.1051226f, -0.2580190f, -0.2009878f, +0.2570327f, -0.1097127f, -0.1435909f, +0.2530450f, -0.1651000f,
  +0.3013755f, +0.2322871f, +0.3615196f, +0.0193635f, +0.3711794f, -0.6713417f, -0.0369856f, +0.0744002f,
  +0.2620014f, +0.1477152f, -0.1344209f, +0.0622002f, +0.3163861f, -0.1531507f, +0.1070814f, -0.0776788f,
  -0.2469486f, +0.0975516f, -0.0581652f, +0.5602503f, +0.1664525f, -0.3894871f, +0.3337804f, +0.0216991f,
  +0.6332261f, +0.4062817f, +0.1481081f, -0.1223105f, +0.2166238f, -0.1857188f, -0.1847158f, +0.0903532f,
  +0.0347203f, +0.0679087f, +0.1409494f, -0.1494831f, +0.0451117f, +0.1183579f, +0.2201528f, +0.0067963f,
  +0.0328829f, -0.2971376f, -0.1287981f, +0.7218002f, -0.1872265f, -0.9398713f, +0.2563437f, +0.0913169f,
  +0.1515024f, +0.0519765f, -0.5069401f, -0.0946747f, -0.4611681f, +0.5097615f, -0.1490353f, -0.2142206f,
  -0.0424892f, -0.1965871f, -0.0570130f, -0.1113617f, +0.0573982f, -0.2185044f, +0.0438619f, -0.1441500f,
  -0.2642563f, -0.2239916f, +0.0731288f, +0.2430318f, +0.0545771f, -0.0902077f, +0.2906087f, +0.2363180f,
  -0.4066821f, -0.3762424f, +0.0683361f, +0.2865670f, +0.3331336f, -0.0583695f, +0.1478215f, -0.0204218f,
  +0.1334845f, -0.1288044f, +0.1135359f, -0.1111315f, -0.0277305f, -0.0042717f, +0.0447471f, -0.2464455f,
  -0.2682747f, +0.0248325f, -0.2284984f, +0.0673210f, -0.0556524f, -0.1853553f, +0.1568782f, +0.3133152f,
  -0.5135606f, +0.2333765f, +0.0213439f, +0.2681809f, -0.1372240f, +0.1959694f, -0.1200397f, +0.3977568f,
  +0.0009099f, -0.1164235f, +0.0734100f, +0.0165577f, -0.1108642f, -0.0175927f, +0.1476083f, -0.1348083f,
  +0.0814005f, +0.1469903f, +0.1093925f, +0.0942841f, -0.1194278f, -0.1352998f, +0.1422442f, +0.1419265f,
  +0.2464225f, -0.0366912f, +0.3764215f, +0.0466921f, +0.2210770f, +0.3041217f, +0.1282191f, +0.0105317f,
  +0.2272534f, +0.2389374f, +0.1350127f, -0.0292881f, +0.0806375f, +0.1455367f, +0.1090638f, +0.1330040f,
  -0.1053475f, +0.0625209f, -0.0616017f, -0.1214966f, +0.0210234f, +0.0950443f, +0.1645051f, +0.1679138f,
  -0.5086427f, +0.1133665f, -0.5077906f, +0.1190758f, +0.1505171f, -0.0680963f, -0.1248321f, +0.0014661f,
  -0.0859564f, -0.2200327f, +0.0714699f, +0.0288437f, +0.0450894f, -0.1125526f, +0.0844707f, -0.0812299f,
  +0.0345563f, -0.3815334f, -0.0786051f, -0.0657049f, +0.0785557f, -0.3309042f, -0.1723787f, -0.0343754f,
  -0.3448675f, -0.2443328f, -0.2136905f, -0.0807897f, -0.2967276f, -0.0445845f, +0.4110864f, -0.3370678f,
  -0.1290606f, -0.1971350f, -0.1299013f, +0.0465153f, +0.0881952f, -0.1276400f, -0.1135676f, -0.2426032f,
  +0.0123140f, +0.1575159f, -0.0330081f, -0.0608434f, +0.0641301f, -0.0873002f, -0.2253830f, +0.3605642f,
  -0.3060945f, +0.0267340f, +0.1021400f, -0.1725679f, +0.1168916f, -0.1253454f, -0.2524816f, +0.1821784f,
  -0.4805938f, +0.0927088f, -0.2780684f, -0.0216279f, -0.1151870f, -0.0069804f, +0.0617097f, -0.0307269f
);

const float biases[4] = float[4](
  -0.0344427f, -0.0952917f, +0.0319079f, +0.0559064f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer27 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0732563f, +0.2096054f, +0.0480760f, +0.0386075f, +0.0619782f, +0.1067339f, -0.1241839f, -0.1406020f,
  -0.1177016f, -0.1818077f, -0.1224848f, -0.1596617f, +0.0503644f, +0.2058861f, -0.1432011f, -0.2781177f,
  -0.2534419f, +0.2580343f, -0.0432982f, +0.0968686f, -0.0039688f, +0.0176080f, +0.1515881f, -0.2433146f,
  -0.0020879f, -0.0929083f, +0.1755175f, -0.0210854f, +0.0733486f, +0.0155795f, -0.1931177f, -0.1159388f,
  -0.2262237f, -0.2121092f, -0.0911237f, -0.1446329f, +0.1000800f, -0.0403370f, -0.1164598f, +0.1195747f,
  -0.0827981f, +0.0657270f, +0.1116301f, +0.1020332f, -0.3134062f, -0.0623648f, -0.1057813f, +0.0514253f,
  +0.0115396f, -0.0885081f, -0.0053493f, -0.0808474f, +0.0525704f, +0.0121410f, -0.1521353f, -0.0224921f,
  +0.1905076f, +0.0000912f, -0.0001360f, -0.0811294f, +0.0722305f, +0.0299413f, -0.3579194f, -0.1718280f,
  -0.1049314f, -0.2363514f, -0.0251957f, -0.0741170f, +0.1191897f, +0.0383463f, +0.0973424f, -0.1252970f,
  +0.2070041f, -0.2223484f, -0.1250528f, +0.0879922f, -0.1089114f, -0.2694919f, -0.2456187f, +0.1762615f,
  +0.2059109f, -0.0926403f, -0.4130571f, +0.1490134f, -0.0155040f, -0.6394390f, +0.1495209f, -0.0748517f,
  -0.1420869f, +0.1071507f, -0.0029347f, +0.2883754f, -0.1042792f, +0.1431564f, +0.0817374f, +0.1419186f,
  -0.1755946f, +0.1164734f, -0.1915496f, +0.0080041f, -0.0799266f, -0.0633563f, -0.4601195f, -0.0378921f,
  +0.5057444f, +0.2719604f, -0.6620306f, -0.1982794f, +0.4358797f, -0.2386016f, -0.5783249f, -0.2022231f,
  +0.3480484f, +0.0657884f, +0.2109254f, +0.2151674f, -0.1106393f, -0.1523231f, +0.0608279f, +0.0222779f,
  -0.2767759f, +0.0243487f, -0.0222243f, +0.0454602f, -0.3649806f, -0.4519230f, +0.0125655f, -0.0044960f,
  -0.2986082f, -0.1304210f, -0.4725222f, -0.1818604f, +0.3442960f, -0.2188405f, -0.1008788f, -0.0491176f,
  +0.1087566f, -0.0457577f, +0.1337780f, -0.0186418f, +0.0598701f, +0.1438234f, +0.0792945f, -0.0280017f,
  -0.0291283f, +0.0817288f, +0.0645569f, +0.0709934f, -0.0717527f, +0.1714344f, -0.1610729f, +0.0855782f,
  +0.0910431f, -0.0465889f, +0.2267404f, -0.1538046f, +0.1770386f, -0.0034616f, -0.1010714f, -0.2906340f,
  -0.2127557f, +0.0732207f, -0.0780179f, -0.1356269f, -0.0507702f, -0.0098385f, +0.0164798f, -0.0026040f,
  +0.2872587f, +0.1827118f, +0.1988252f, -0.1930225f, +0.0624644f, -0.0127483f, -0.1932653f, -0.0930446f,
  +0.0558884f, +0.1609189f, +0.3317836f, -0.4955850f, -0.2012367f, -0.2167044f, -0.0893497f, -0.2531991f,
  +0.0821548f, -0.1255519f, -0.2307997f, -0.2169019f, -0.0393464f, +0.1711662f, +0.1821113f, -0.2518975f,
  +0.1076513f, -0.3467169f, -0.0751411f, +0.1485983f, -0.1627897f, +0.3096871f, -0.1105408f, +0.0879811f,
  +0.0244212f, -0.1812214f, +0.0342305f, -0.0448150f, +0.0387887f, +0.1709259f, +0.0909726f, -0.1287200f,
  -0.2948580f, -0.1982426f, -0.0676064f, -0.1478411f, +0.0025125f, -0.0055933f, +0.0885582f, +0.1366346f,
  -0.0235097f, +0.2241624f, -0.0892271f, -0.1105313f, +0.3486874f, -0.0864716f, -0.0689586f, +0.0575738f,
  +0.1561185f, +0.0842474f, -0.0772664f, +0.2609640f, +0.4721842f, +0.0423250f, -0.1673030f, -0.0548261f,
  +0.1957877f, -0.1371498f, -0.1271332f, -0.1630170f, +0.1249544f, -0.0639632f, -0.0982478f, +0.0499112f,
  -0.1401984f, -0.0220785f, +0.1774538f, -0.2927130f, -0.2802580f, -0.1146324f, +0.1083544f, -0.2364027f,
  -0.0884783f, -0.1486079f, +0.3428902f, -0.0234840f, -0.5395362f, +0.3482305f, +0.1549091f, +0.0278493f,
  -0.1329158f, +0.2111508f, -0.0938297f, -0.3048212f, -0.0472234f, +0.3398543f, -0.0826422f, -0.2528354f,
  +0.1576352f, -0.1326183f, -0.0226028f, +0.0456117f, +0.2687671f, +0.0780600f, +0.1454648f, -0.0604858f,
  +0.3396443f, +0.0414452f, -0.0801161f, +0.1650883f, +0.1941585f, +0.0333323f, -0.0875650f, -0.0789347f,
  -0.1457887f, -0.0724230f, +0.0369942f, +0.3177868f, -0.1922853f, -0.1833068f, +0.1667659f, +0.2274176f
);

const float biases[4] = float[4](
  -0.2600994f, -0.0121602f, +0.1334254f, +0.0786125f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer27 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0395253f, -0.1464016f, +0.1077095f, -0.1049455f, -0.0426439f, -0.1179963f, +0.2015410f, +0.0913583f,
  +0.0846371f, +0.2412950f, +0.1838157f, +0.2184733f, +0.4579482f, +0.0977562f, -0.0089387f, -0.3583690f,
  +0.0254780f, -0.0206012f, -0.0871312f, -0.1009686f, +0.4763318f, +0.4981811f, -0.0775726f, +0.0351049f,
  +0.1512850f, -0.1435240f, +0.0868503f, -0.0806105f, -0.1476970f, +0.0859023f, -0.0945444f, -0.0099020f,
  +0.2252890f, +0.1642100f, -0.3634856f, -0.0179089f, -0.2406308f, -0.3657053f, -0.2518016f, -0.0816678f,
  +0.0842943f, +0.0730077f, -0.3591489f, -0.3287653f, +0.3203646f, -0.2345808f, -0.0794071f, +0.0139307f,
  -0.1002991f, +0.1156120f, -0.2044598f, -0.0368529f, -0.1024404f, +0.1507803f, -0.0712219f, +0.0651383f,
  -0.1274479f, +0.0143904f, -0.0337569f, -0.2420833f, -0.1383528f, -0.0199559f, -0.0706655f, +0.0764062f,
  -0.1114951f, -0.4343542f, +0.1029066f, -0.2291802f, -0.1439200f, +0.2158348f, -0.2578145f, -0.1227537f,
  +0.1455792f, +0.1492349f, +0.2903315f, -0.1386624f, -0.1277605f, -0.0560780f, +0.1743741f, -0.1315391f,
  -0.0190731f, +0.1449935f, +0.0726126f, +0.0303284f, -0.0560639f, +0.1543134f, +0.1900972f, +0.0691677f,
  -0.0218161f, -0.0050189f, +0.2046085f, +0.0040675f, +0.1124015f, +0.0677025f, -0.0573930f, +0.0002890f,
  +0.0676118f, -0.0330785f, -0.1950817f, +0.2558424f, -0.3174826f, +0.3330409f, -0.2784143f, -0.2022580f,
  -0.0506474f, -0.2370949f, -0.3321826f, +0.5056872f, -0.3316895f, -0.3071774f, +0.1851162f, +0.2286299f,
  +0.0629848f, +0.0330984f, -0.0757220f, +0.1212547f, +0.0733517f, -0.0022215f, +0.0111713f, +0.2601344f,
  -0.2296482f, -0.2670413f, +0.1240171f, -0.0449180f, -0.0178827f, +0.7854416f, -0.3308794f, +0.1807397f,
  +0.3473399f, -0.0758652f, +0.4505482f, +0.1014377f, -0.1297280f, -0.1503965f, -0.1344261f, -0.0479758f,
  +0.0072536f, +0.0564790f, +0.0969338f, -0.2391228f, +0.1106250f, +0.0756031f, -0.2117031f, -0.0435436f,
  -0.0018530f, +0.1105725f, +0.0724401f, -0.0821436f, +0.0460857f, +0.0181618f, -0.3945614f, +0.2770523f,
  -0.2492434f, +0.1221958f, -0.2726804f, +0.1723340f, +0.3016016f, -0.0760611f, +0.0786119f, +0.2985608f,
  +0.3651821f, +0.1249024f, -0.0721766f, +0.0156429f, +0.0481829f, +0.1582622f, +0.0451828f, -0.0477379f,
  -0.0888657f, +0.5228296f, -0.3423454f, +0.0915554f, +0.0530009f, +0.0635910f, +0.3155539f, -0.0032147f,
  -0.1037228f, +0.5098570f, +0.2157386f, +0.2937465f, -0.2143464f, +0.3443887f, -0.2061429f, +0.0386745f,
  +0.4600294f, +0.0409650f, +0.5083650f, +0.2151524f, +0.1999068f, -0.0913904f, -0.2763423f, +0.0394013f,
  -0.2774293f, -0.1292882f, -0.1194191f, -0.1038593f, +0.1370327f, -0.1439884f, -0.0340706f, -0.4050339f,
  -0.0361279f, +0.1379843f, -0.0055119f, -0.1967404f, -0.1659444f, -0.0885196f, +0.2670453f, +0.0254979f,
  +0.2057328f, +0.3530753f, -0.1291374f, +0.0727402f, -0.0878612f, -0.1606592f, +0.0309675f, +0.0236839f,
  -0.0743381f, +0.3226239f, -0.0749299f, -0.0167177f, -0.0039311f, -0.1194024f, -0.1228389f, -0.2862300f,
  -0.3160853f, -0.1780499f, -0.3298903f, -0.2378925f, -0.1617813f, -0.3564223f, +0.1142650f, -0.0555456f,
  -0.1393828f, -0.1995163f, +0.1133191f, -0.2042931f, +0.3038429f, -0.2665132f, -0.2707112f, +0.1062133f,
  +0.0263528f, -0.0878953f, +0.0666382f, -0.1302899f, -0.0006978f, -0.0404090f, +0.0511620f, -0.0940192f,
  +0.3403284f, -0.4084610f, +0.3358731f, -0.0006925f, -0.1091256f, +0.0798686f, +0.0005704f, -0.0742412f,
  +0.2533789f, +0.0949699f, +0.0105339f, -0.0542187f, -0.0671218f, -0.1553067f, -0.2453434f, +0.0405610f,
  -0.0518844f, -0.0424603f, -0.1664646f, -0.1242032f, +0.1805992f, +0.1269646f, +0.2289207f, +0.0960695f,
  +0.0487179f, -0.4490906f, +0.2409532f, +0.0615516f, +0.1326714f, +0.0785854f, +0.0995388f, -0.1568366f,
  +0.2021911f, -0.1217628f, +0.3797379f, +0.2414414f, +0.2836772f, +0.1953785f, +0.1088416f, +0.1209890f
);

const float biases[4] = float[4](
  -0.0202078f, -0.0933260f, -0.1105451f, +0.0569828f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer28 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1360986f, -0.2182633f, +0.1092677f, -0.0418008f, +0.0644615f, -0.0494612f, +0.2513358f, -0.0917163f,
  -0.0118182f, -0.2645351f, -0.0911611f, -0.3089468f, +0.0236060f, +0.1869921f, +0.0144082f, -0.2135372f,
  +0.0326475f, -0.1383186f, -0.0590432f, -0.2225691f, -0.0927757f, +0.3238739f, -0.0652390f, +0.0953698f,
  +0.1131095f, +0.1660646f, -0.0331032f, +0.1712617f, -0.1834355f, +0.3131157f, +0.0950157f, -0.1983171f,
  +0.0518079f, +0.0422838f, -0.2615134f, -0.0541200f, -0.0404523f, +0.0856141f, -0.0727077f, -0.1371151f,
  +0.1841186f, -0.1377124f, -0.0787125f, +0.0352850f, -0.2857924f, -0.2660245f, +0.2145066f, -0.1368022f,
  -0.0204520f, -0.2820719f, +0.0165730f, +0.3228781f, -0.0081308f, -0.0670720f, -0.1335366f, +0.0216275f,
  -0.2483415f, +0.0854099f, +0.1513244f, +0.0580003f, -0.0672367f, -0.0341211f, +0.1001293f, +0.0769708f,
  +0.0309396f, -0.1477957f, -0.1312522f, +0.0539556f, -0.1501527f, -0.0929480f, +0.2987541f, +0.0240702f,
  +0.0509424f, -0.2314480f, -0.0007259f, -0.1846658f, -0.1693038f, +0.3182060f, +0.1063647f, +0.1933568f,
  -0.1918522f, -0.0409833f, -0.0114872f, -0.3807394f, -0.1156233f, +0.3900489f, -0.1247397f, +0.5037833f,
  -0.0005181f, -0.1081976f, +0.1076023f, -0.2412696f, +0.1995454f, +0.5752913f, +0.6679679f, -0.0575187f,
  -0.2949691f, -0.4275445f, +0.0406575f, -0.2853181f, -0.1149763f, +0.3605334f, -0.0292560f, +0.0356533f,
  -0.3650922f, -0.5140377f, -0.2302966f, -0.3958249f, -0.1069221f, +0.7921468f, -0.1744257f, +0.2461117f,
  +0.3238531f, -0.6821979f, -0.2666568f, -0.2149927f, +0.0490463f, +0.4120735f, +0.0784354f, +0.0651878f,
  -0.1708098f, -0.1490258f, -0.1033855f, +0.1016061f, -0.3071003f, +0.2335650f, +0.2164223f, +0.2392536f,
  +0.0392189f, -0.1430506f, -0.0575294f, -0.1845459f, +0.0358402f, +0.5389895f, +0.0501295f, +0.6184351f,
  -0.0537861f, -0.3193465f, -0.2820410f, -0.2309609f, +0.1828548f, +0.3978813f, +0.2018935f, +0.2570819f,
  -0.0206831f, -0.0452697f, +0.0971395f, +0.0577137f, +0.1275382f, +0.0493846f, -0.1352224f, -0.1029363f,
  -0.0941257f, -0.0393917f, +0.0014480f, +0.0779780f, -0.1333685f, -0.2123156f, +0.1465885f, -0.0928462f,
  -0.0680607f, -0.0219480f, -0.0982196f, +0.0190577f, +0.1567238f, -0.0332307f, -0.3513628f, -0.0512082f,
  -0.2238530f, -0.0425412f, +0.1484845f, +0.2142368f, +0.2823392f, -0.0373712f, +0.0862542f, -0.1506725f,
  -0.0948819f, +0.0322357f, +0.0956214f, +0.1687534f, +0.2459964f, -0.2854486f, -0.2941797f, -0.2046188f,
  -0.1610586f, +0.1455312f, -0.0050928f, -0.0731391f, +0.2968904f, -0.4149126f, -0.4434529f, +0.0515378f,
  -0.1248270f, +0.0607418f, -0.0520866f, +0.0824460f, +0.2470692f, +0.0482547f, +0.0130471f, -0.2871692f,
  -0.0594402f, +0.1514501f, -0.0371495f, -0.1466839f, -0.0322477f, +0.0109606f, -0.1730985f, +0.1071009f,
  -0.0302315f, +0.2112384f, +0.0229571f, -0.0134114f, +0.1185275f, -0.0967125f, -0.0126136f, -0.1574792f,
  +0.0197932f, -0.0916822f, +0.4943935f, -0.0088233f, +0.0350021f, +0.0032383f, +0.1656853f, -0.0900394f,
  -0.0231375f, +0.0438634f, -0.1274867f, -0.1207538f, +0.2716713f, -0.0448175f, +0.1603267f, +0.0682539f,
  +0.0405983f, +0.0676750f, -0.2405917f, +0.1416499f, +0.0177727f, +0.2887491f, +0.1818967f, +0.1010277f,
  -0.0979176f, -0.1290131f, +0.1450579f, +0.2116668f, +0.1067471f, +0.1063178f, +0.0270041f, +0.1733689f,
  +0.0988484f, -0.2757940f, +0.3737888f, -0.1359794f, -0.0074233f, -0.0992604f, +0.0414861f, -0.0672431f,
  -0.0804874f, -0.0019731f, -0.0325589f, +0.1677497f, +0.2888927f, -0.1835999f, +0.1488842f, +0.0803600f,
  -0.2131462f, -0.3431414f, +0.0043440f, +0.2034402f, -0.1701749f, +0.1696329f, +0.0990810f, -0.0236648f,
  -0.1805673f, -0.4356603f, +0.1328651f, -0.3023380f, -0.2061164f, +0.0436560f, +0.0497618f, +0.1845741f,
  -0.1687868f, +0.1036952f, +0.0015253f, -0.1194794f, +0.1436517f, +0.3231556f, +0.0480712f, +0.2219121f
);

const float biases[4] = float[4](
  +0.0984326f, +0.1195298f, -0.0361218f, +0.0688562f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer28 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0322394f, +0.0969777f, -0.0488984f, +0.1632453f, -0.1963315f, -0.0544793f, +0.1237608f, -0.0965476f,
  -0.0468758f, +0.1283950f, -0.0645997f, -0.1708683f, +0.0767761f, +0.2575401f, +0.0597709f, -0.2186935f,
  -0.1483061f, -0.0676922f, +0.1002936f, -0.0835437f, +0.0533510f, -0.1468621f, +0.0859351f, -0.1195302f,
  +0.2702022f, +0.0585637f, -0.2393462f, -0.1602404f, -0.2466479f, +0.2186793f, -0.0417021f, -0.0800011f,
  +0.0228940f, +0.6582897f, +0.0014926f, +0.4199560f, +0.0782544f, +0.0820079f, +0.3866171f, -0.3140599f,
  -0.1678327f, +0.4487163f, +0.1814482f, +0.2078927f, +0.0906271f, -0.3894798f, +0.0806596f, +0.0766881f,
  +0.1264188f, +0.0437914f, -0.0058250f, -0.0679538f, -0.5487880f, +0.1337946f, -0.1813426f, +0.0040672f,
  +0.1146993f, +0.1834601f, -0.0704563f, -0.2855673f, -0.1051541f, -0.1300916f, +0.0609882f, +0.2741825f,
  +0.0868926f, +0.3525846f, +0.0031533f, -0.2203744f, +0.0058176f, -0.1916869f, +0.1774472f, +0.1424021f,
  -0.0277745f, -0.0615342f, -0.2883645f, +0.0019224f, +0.0772048f, -0.0999885f, -0.5274194f, -0.1462728f,
  +0.0021901f, +0.1557242f, -0.2717479f, -0.0008845f, +0.1866739f, -0.0233496f, -0.1430146f, -0.1363925f,
  +0.0056465f, +0.2482768f, -0.0991964f, +0.1366931f, -0.0164176f, -0.7537277f, -0.0838589f, -0.0020518f,
  -0.1185375f, -0.1453887f, -0.2717442f, -0.3094696f, +0.0629524f, +0.1424670f, -0.0979044f, +0.0812469f,
  +0.2594101f, +0.1007346f, -0.0374491f, -0.0864760f, -0.0487354f, -0.1772691f, -0.3222388f, +0.1592194f,
  +0.0580412f, +0.2960655f, +0.1006235f, -0.3425142f, -0.4421127f, +0.0321650f, +0.1849177f, +0.1740333f,
  +0.2053252f, +0.0528009f, -0.0430240f, -0.2427447f, +0.1194459f, +0.1713136f, -0.0967343f, +0.1543003f,
  -0.5314099f, +0.3070446f, -0.0928440f, -0.1305730f, -0.0451049f, -0.0598476f, -0.1819344f, +0.3632716f,
  +0.1725219f, +0.0252566f, -0.1247894f, -0.0543609f, -0.1714393f, +0.0171164f, -0.1153107f, +0.1921833f,
  +0.0037144f, +0.1064161f, -0.2419439f, -0.0303842f, +0.1027423f, +0.0798075f, +0.0139601f, +0.0130056f,
  +0.1730718f, +0.0380826f, -0.3287277f, +0.1689234f, +0.1429132f, +0.0218044f, +0.0155947f, +0.0780608f,
  +0.0672046f, +0.1410858f, +0.1132454f, +0.0637577f, +0.2561780f, -0.2090285f, -0.0295033f, -0.0569694f,
  -0.0202953f, +0.1081279f, -0.0054521f, -0.1293078f, -0.0452108f, +0.2644776f, -0.0407739f, +0.0515034f,
  -0.2721532f, +0.3236567f, +0.2005663f, -0.1036200f, +0.1176075f, -0.4306296f, +0.1189476f, +0.0562808f,
  +0.0547108f, +0.3938853f, +0.1481160f, -0.0506214f, +0.1418207f, +0.0411924f, -0.2942733f, -0.1804885f,
  -0.2089921f, +0.0993022f, +0.0462521f, -0.1224561f, -0.1059972f, +0.0177417f, +0.0195053f, +0.2953129f,
  -0.1565689f, +0.2151437f, +0.3230009f, -0.0985084f, -0.0964408f, -0.2847423f, +0.0930497f, -0.1677923f,
  -0.1070674f, +0.4056439f, +0.2295457f, +0.0031015f, +0.1719730f, -0.0618172f, -0.0097629f, -0.1478901f,
  -0.1768784f, +0.1030329f, +0.1610894f, -0.0353113f, -0.1639988f, -0.1481399f, -0.5673515f, -0.0881308f,
  +0.2091742f, +0.0880577f, -0.1853165f, +0.1161032f, +0.1579895f, -0.1883990f, -0.0548202f, +0.3137572f,
  -0.1184833f, +0.1942146f, +0.1337039f, +0.2446671f, -0.2109208f, +0.3565570f, +0.4570515f, -0.1312141f,
  -0.2504057f, +0.3220027f, +0.3354117f, +0.4137377f, +0.0370935f, +0.0422807f, +0.0264685f, -0.1202824f,
  -0.6084067f, -0.1177791f, +0.0937842f, +0.3718604f, +0.0277471f, -0.1823467f, +0.1099545f, -0.1563786f,
  +0.0372176f, -0.0558650f, +0.2286166f, +0.0289924f, +0.2218268f, -0.0621361f, +0.1398094f, +0.4940468f,
  -0.0479125f, +0.2647549f, +0.0074750f, -0.0545117f, -0.1289634f, +0.0384605f, -0.0333829f, +0.1802607f,
  +0.0932435f, +0.1133594f, +0.1577003f, +0.1452437f, +0.0812577f, -0.1952393f, +0.0180662f, +0.0248253f,
  +0.0963235f, +0.0098168f, -0.0469932f, -0.2011710f, -0.0836674f, -0.0617267f, -0.0940922f, +0.3655797f
);

const float biases[4] = float[4](
  -0.0594198f, -0.0948891f, +0.0265587f, +0.0918034f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer29 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0438328f, +0.3128527f, -0.1080491f, -0.1174078f, -0.1747377f, -0.1717716f, -0.3572078f, +0.0555796f,
  +0.0222984f, +0.2119596f, +0.4585109f, +0.1228161f, +0.2323043f, -0.2505436f, +0.1610207f, +0.0527538f,
  +0.3958881f, +0.0029751f, +0.2443835f, +0.1988441f, +0.1139354f, -0.3493112f, +0.0378493f, -0.1669935f,
  -0.0295897f, +0.6373270f, -0.3558053f, -0.1581108f, -0.4371534f, -0.5643159f, -0.0970838f, +0.0805906f,
  -0.0390664f, +0.4632935f, -0.6625733f, +0.1902840f, -0.0958721f, +0.1909084f, -0.2224431f, -0.1944141f,
  +0.0027451f, +0.3980023f, -0.2151765f, +0.0735346f, +0.0293935f, +0.0271200f, +0.1929672f, -0.0702158f,
  +0.0441841f, +0.8136573f, -0.1687368f, -0.1408368f, -0.0245046f, -0.0562708f, -0.2483566f, +0.0867633f,
  +0.0413602f, +0.6728459f, -0.0900635f, +0.5190207f, +0.0876562f, +0.0113662f, -0.1889585f, -0.0923061f,
  -0.1643532f, +0.0888946f, +0.1464255f, +0.2051442f, -0.1127861f, -0.0999027f, +0.0759192f, -0.2455433f,
  +0.1248341f, +0.0145874f, +0.0015117f, +0.1654280f, +0.0877264f, +0.2562955f, +0.0872069f, -0.0206544f,
  -0.0427725f, +0.2108757f, -0.1565589f, +0.1266646f, +0.0957860f, +0.5671400f, +0.0677714f, +0.1399335f,
  +0.0333882f, -0.1013812f, +0.0202446f, -0.0231316f, +0.1268714f, -0.0765774f, +0.0109115f, +0.1314588f,
  +0.1281052f, -0.6573124f, -0.0943669f, -0.0507489f, +0.4514832f, +0.2852476f, +0.0889003f, -0.4916375f,
  +0.2532622f, -0.0573164f, -0.1160145f, -0.0652021f, -0.0452958f, +0.0109066f, +0.1829122f, -0.0433456f,
  -0.0470400f, +0.1500000f, -0.0299147f, -0.0726101f, -0.3254645f, -0.2211160f, -0.0562268f, +0.0535281f,
  -0.0312181f, -0.2052195f, -0.1809786f, +0.1311592f, +0.3148573f, +0.2444906f, -0.0402008f, -0.3236110f,
  +0.1447473f, +0.1408667f, -0.2474483f, -0.1731416f, +0.0957571f, -0.1691537f, +0.0409249f, +0.0785995f,
  +0.2246160f, -0.0199895f, +0.1977239f, -0.0834516f, -0.0313522f, -0.0489312f, -0.2219007f, +0.0804178f,
  -0.0420399f, -0.0732396f, -0.0965732f, +0.0820394f, -0.0666096f, -0.3923096f, +0.0074561f, +0.1128583f,
  +0.1394450f, -0.2475291f, -0.0768152f, -0.0366997f, -0.0395398f, -0.1270538f, -0.0845067f, +0.1276719f,
  +0.0295286f, +0.0103941f, -0.1093851f, +0.1730668f, +0.0445828f, -0.1466347f, +0.0585446f, -0.0921951f,
  -0.0437282f, +0.2364971f, -0.1805959f, -0.1440521f, -0.0194914f, -0.0518324f, -0.0125332f, +0.2283610f,
  -0.0586272f, -0.1141048f, +0.2378299f, -0.0679559f, -0.0034043f, -0.1857170f, -0.0977666f, -0.0195918f,
  +0.0319859f, +0.1966727f, -0.0115480f, +0.1037915f, +0.0056446f, +0.0107074f, +0.1021614f, +0.0118353f,
  -0.0267596f, +0.1733547f, -0.2609651f, -0.2615834f, -0.1312348f, -0.2907181f, +0.0544499f, +0.0461768f,
  +0.0017269f, +0.1189893f, +0.2182454f, +0.0874937f, -0.0517982f, +0.1450989f, +0.0989995f, -0.0676484f,
  +0.0180092f, -0.0325975f, -0.0143305f, +0.0104722f, -0.0790339f, -0.1099562f, -0.0387221f, +0.0757563f,
  +0.0411894f, +0.2234229f, -0.1230154f, +0.1496882f, -0.2372140f, -0.1128462f, -0.2979740f, +0.2408905f,
  -0.0427407f, -0.1791047f, +0.1373841f, +0.3651780f, -0.0911686f, +0.1807657f, -0.0665948f, +0.0250643f,
  +0.2119739f, +0.0110792f, +0.4827148f, +0.1092223f, +0.0371836f, +0.0432095f, -0.1384779f, +0.0469540f,
  -0.1197534f, -0.3097825f, -0.2530432f, +0.2511488f, -0.2362556f, +0.0880832f, -0.0096160f, -0.1017369f,
  -0.0749774f, -0.1810239f, +0.0610739f, -0.2034795f, -0.0828013f, +0.2835741f, +0.1626429f, +0.0665559f,
  +0.0427281f, -0.1552050f, -0.0776722f, -0.2696984f, -0.1071157f, +0.1419245f, +0.3028288f, -0.0121725f,
  -0.1539521f, +0.4250597f, +0.2395013f, +0.0354057f, -0.0447783f, -0.1354659f, -0.0935832f, -0.0627048f,
  +0.1619358f, -0.2983794f, -0.2254235f, +0.0858559f, +0.2949401f, +0.0253938f, +0.3310458f, +0.0843596f,
  -0.0331708f, -0.4781341f, +0.2421953f, -0.3069840f, +0.2190652f, +0.3017853f, -0.0959980f, +0.0844046f
);

const float biases[4] = float[4](
  +0.0015478f, -0.0336988f, +0.0568458f, +0.0381257f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer29 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0056575f, +0.1069065f, +0.2175791f, +0.2789264f, +0.2084488f, +0.1603751f, -0.0656429f, -0.2764639f,
  -0.2480783f, -0.0197403f, +0.0526521f, +0.0253481f, +0.0180717f, +0.1325606f, +0.0665851f, -0.0945882f,
  -0.0384152f, -0.0724658f, -0.0072101f, +0.0685770f, +0.0169280f, +0.0732405f, -0.2097738f, +0.1012848f,
  -0.2199391f, -0.2987122f, +0.0862565f, +0.0351295f, +0.4571119f, +0.0775802f, -0.3349494f, -0.2965605f,
  -0.0497699f, -0.2200799f, -0.2138375f, -0.2363380f, +0.3209471f, +0.0379388f, -0.4438195f, -0.2704960f,
  +0.0762437f, +0.1266300f, +0.1164093f, -0.0868695f, +0.0857874f, +0.0028566f, -0.0188108f, -0.2897803f,
  -0.1036749f, -0.1049080f, +0.1499729f, -0.0219040f, -0.1202173f, +0.2053227f, -0.0550302f, -0.2989910f,
  -0.0828812f, +0.1915988f, -0.2107628f, -0.0263058f, +0.2309793f, +0.0734678f, -0.0877789f, -0.1289905f,
  -0.0995630f, -0.0476510f, +0.0221316f, -0.0070589f, -0.1608978f, +0.0480511f, +0.1386825f, -0.0046065f,
  +0.2729163f, +0.1770338f, -0.2981953f, +0.1115827f, +0.0986843f, +0.1392253f, -0.4300387f, +0.0072408f,
  -0.0292649f, +0.2601897f, -0.4833336f, +0.2364673f, -0.0190331f, +0.2254757f, -0.1688302f, +0.1572732f,
  -0.0179841f, +0.1117673f, +0.0020135f, +0.1231855f, +0.1558322f, +0.2187305f, +0.0713791f, +0.2676169f,
  +0.0509195f, +0.4846135f, -0.0332268f, +0.0527012f, -0.2380740f, -0.5445742f, -0.0330921f, -0.1142858f,
  -0.3260918f, +0.5171136f, +0.0524589f, +0.0124937f, -0.2318211f, -0.0688900f, +0.0585129f, +0.1012293f,
  -0.1145433f, +0.0784400f, -0.0428372f, +0.1256144f, -0.0361867f, -0.4136459f, -0.0082182f, -0.1204199f,
  -0.0751876f, +0.1317231f, +0.1518171f, +0.0432363f, +0.0805117f, -0.3474632f, +0.0425913f, +0.2099570f,
  +0.1415468f, +0.2401014f, +0.0626821f, +0.1852065f, -0.2812937f, -0.3055712f, +0.1259761f, -0.1791929f,
  +0.0139284f, +0.2421996f, -0.2925409f, +0.3367107f, +0.1944284f, -0.3825307f, -0.0289523f, -0.1276580f,
  -0.0021952f, -0.1838825f, +0.1661694f, +0.0626381f, -0.0377416f, -0.0524189f, +0.1288070f, +0.0739575f,
  -0.1186069f, +0.0943712f, -0.1137312f, +0.0431270f, -0.1015177f, +0.0904225f, +0.1166301f, +0.0377185f,
  +0.0565430f, -0.0309062f, -0.0686744f, -0.0165989f, -0.2560371f, +0.1115379f, +0.0474465f, -0.0760306f,
  -0.1280399f, +0.0982633f, +0.0218036f, +0.1656316f, +0.0734608f, -0.1747918f, +0.1990912f, -0.0247384f,
  -0.4428988f, -0.0652121f, -0.1423238f, +0.1231837f, -0.0982031f, -0.6124358f, +0.3832033f, -0.0301885f,
  -0.2892812f, -0.2833115f, +0.0577145f, +0.0737658f, -0.1399179f, -0.2109521f, +0.2333571f, +0.1593868f,
  +0.1246425f, +0.4093369f, +0.0156710f, -0.1329174f, +0.0998293f, +0.4567965f, -0.0265997f, -0.0694669f,
  +0.3280137f, +0.5332137f, -0.2487318f, +0.2681287f, +0.3222608f, +0.1920247f, -0.2576191f, -0.2314166f,
  +0.1576777f, +0.4383648f, -0.0078672f, +0.3023464f, +0.0636363f, -0.1111654f, +0.0729272f, -0.1700427f,
  +0.0055750f, -0.1206512f, -0.2401390f, +0.0535831f, -0.0089648f, -0.0686860f, +0.1004131f, +0.0289984f,
  +0.0326957f, +0.0954843f, -0.1915691f, -0.0214782f, -0.2210458f, +0.2650076f, +0.1323088f, -0.0609030f,
  +0.0247538f, +0.0073951f, -0.1135869f, -0.1092794f, -0.3106335f, +0.0025960f, +0.2231868f, +0.1006612f,
  +0.0397923f, -0.1118912f, -0.1197776f, +0.3251403f, -0.0126865f, +0.5187470f, -0.1380524f, -0.1041335f,
  -0.2308508f, +0.1475528f, +0.2004209f, +0.1479053f, -0.0186272f, +0.1573546f, +0.0865495f, +0.0133191f,
  -0.3585141f, +0.1356846f, -0.2454946f, -0.1385835f, -0.1542038f, +0.2168064f, +0.1743407f, +0.1966083f,
  -0.0729809f, +0.1108926f, +0.2058400f, -0.1219760f, -0.1427502f, -0.3358902f, +0.1357857f, +0.0657254f,
  -0.0699569f, +0.2622193f, -0.0934445f, +0.1320405f, +0.0545820f, +0.0967198f, -0.2129886f, -0.1029209f,
  -0.1677376f, +0.1746644f, -0.3355010f, +0.1643909f, -0.4197662f, -0.1856229f, +0.0949689f, -0.2478148f
);

const float biases[4] = float[4](
  -0.4922116f, -0.1207557f, -0.0062318f, -0.0242310f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer30 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1098273f, -0.0994629f, +0.0934307f, +0.1473829f, +0.2837664f, +0.0041848f, -0.4112362f, +0.0149658f,
  -0.2654998f, -0.1222796f, +0.0030985f, -0.2062389f, +0.5607943f, -0.0400425f, -0.5077807f, +0.2516656f,
  -0.0990766f, -0.1500958f, +0.1506577f, +0.1475512f, +0.2745412f, +0.1801393f, +0.0591687f, -0.0758898f,
  +0.0162688f, -0.0912705f, +0.0288683f, -0.2729771f, -0.1603636f, +0.3423758f, +0.2921476f, +0.4834206f,
  -0.1569206f, -0.2491825f, +0.1762426f, -0.0210883f, -0.0545030f, +0.0046993f, +0.2792293f, +0.1347412f,
  +0.0683402f, +0.0416918f, -0.0176813f, +0.1942797f, -0.3354735f, -0.3860222f, +0.1574761f, -0.2592682f,
  +0.2286670f, +0.1402909f, -0.0965159f, -0.1272378f, +0.1012516f, +0.2462161f, -0.1430605f, -0.2401095f,
  +0.3257512f, +0.0728977f, -0.1140862f, +0.0743217f, +0.0331305f, -0.0173575f, -0.2817975f, -0.2614619f,
  +0.1219375f, +0.0465805f, -0.2037008f, -0.0376970f, +0.1111134f, +0.0100888f, -0.0153274f, -0.0851924f,
  +0.1858842f, +0.1505029f, -0.0348742f, +0.2124793f, -0.1922950f, +0.0046981f, -0.2750407f, -0.0732450f,
  +0.1740014f, -0.2202234f, -0.0448889f, +0.1689252f, -0.5199131f, +0.4133263f, -0.0196158f, -0.2445169f,
  +0.3033178f, +0.0348251f, +0.1199987f, -0.2608811f, +0.5029051f, +0.4071778f, -0.0834522f, -0.0482197f,
  +0.4784746f, -0.1409855f, -0.1122216f, +0.3134622f, +0.0569798f, -0.0846120f, -0.1243654f, -0.2680986f,
  +0.2992340f, +0.2593788f, -0.2161580f, -0.1240680f, -0.3341423f, +0.0366629f, -0.3165622f, -0.1602554f,
  +0.3813839f, +0.3813892f, +0.2765802f, -0.1381438f, +0.1911332f, -0.2912087f, -0.1093867f, +0.3561605f,
  +0.0081395f, +0.0194567f, -0.1296939f, +0.0656769f, -0.1679164f, +0.2998573f, +0.0679594f, -0.2203210f,
  +0.0382110f, +0.0697612f, +0.0321994f, -0.0303150f, -0.1510122f, +0.4546849f, -0.0112682f, +0.1297364f,
  +0.1920288f, +0.0871784f, -0.0926345f, -0.4047989f, -0.1175276f, +0.2282421f, +0.0678908f, -0.1961505f,
  -0.2662341f, -0.2962717f, -0.0418400f, +0.1535793f, -0.0928184f, -0.2359912f, -0.1539836f, -0.0225547f,
  +0.0930210f, +0.6217269f, +0.2958961f, +0.1753823f, +0.2827983f, -0.0259835f, -0.2170099f, -0.4058296f,
  +0.0733567f, -0.0117195f, +0.0218380f, -0.0273617f, +0.0349187f, +0.1308759f, +0.0096433f, +0.0031865f,
  +0.0951355f, -0.1710556f, -0.1635409f, +0.1332056f, +0.0246954f, +0.3543551f, -0.0516768f, +0.3029169f,
  +0.1378070f, +0.2308957f, -0.0630571f, +0.2625996f, -0.1878605f, +0.2929221f, -0.1105319f, -0.4697580f,
  +0.3674614f, +0.5226429f, +0.0426125f, -0.1494849f, -0.5756636f, +0.3362482f, +0.0674025f, -0.0754331f,
  -0.3525974f, -0.0788657f, -0.1574275f, -0.2292745f, -0.1001944f, +0.1253784f, -0.0316297f, +0.1447134f,
  -0.0959887f, -0.0217500f, +0.2704206f, -0.1692111f, -0.1125117f, +0.2700214f, -0.0102293f, -0.1162573f,
  +0.1196840f, -0.0714027f, -0.2014300f, -0.0985912f, -0.5930752f, -0.2338655f, +0.1698486f, -0.2691940f,
  -0.0552446f, +0.0634875f, -0.2216054f, +0.4025363f, -0.2780646f, -0.2090691f, -0.2947283f, -0.2682000f,
  -0.0974283f, -0.1808627f, -0.1788963f, -0.0275765f, -0.1258117f, +0.1081359f, -0.1190071f, -0.2135870f,
  +0.5038115f, -0.0428052f, -0.0437543f, -0.0167965f, -0.1348382f, +0.3316859f, -0.1401189f, +0.0980907f,
  +0.1665826f, -0.0006567f, -0.0885323f, +0.2212328f, +0.1809934f, -0.3478382f, -0.0001423f, -0.0830141f,
  +0.4548664f, -0.2657012f, +0.0360254f, -0.1903360f, -0.1396779f, +0.3354041f, -0.0975326f, +0.3224452f,
  +0.5038435f, +0.2941166f, +0.1127994f, -0.1294996f, -0.2003648f, +0.1321558f, -0.1669227f, -0.2112949f,
  +0.6987735f, +0.1787757f, -0.1401969f, -0.0600643f, -0.1095238f, -0.0854683f, -0.1110265f, +0.0386085f,
  +0.3359314f, -0.0988366f, -0.1175460f, -0.2399379f, +0.0348152f, -0.0845248f, -0.0266293f, +0.0953485f,
  +0.1374303f, -0.1703977f, -0.0101509f, -0.1041655f, +0.1095680f, +0.0984017f, +0.0099277f, +0.1428163f
);

const float biases[4] = float[4](
  -0.0375083f, -0.0537977f, +0.0035814f, +0.0528696f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer30 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1746864f, -0.0186360f, +0.2809112f, -0.1086279f, +0.2020509f, +0.1855269f, +0.0041939f, +0.2567511f,
  -0.0158390f, -0.3300188f, -0.1581006f, -0.2113357f, +0.1333798f, +0.1530398f, -0.3252628f, -0.0549271f,
  -0.2057090f, -0.2713428f, -0.0598926f, +0.0079881f, +0.0201571f, -0.1203016f, -0.0953273f, +0.2042411f,
  +0.1039573f, +0.1144581f, -0.0310488f, -0.1831425f, +0.1710362f, +0.0959078f, +0.1867628f, +0.1581860f,
  -0.3439669f, -0.4746182f, +0.3405257f, -0.2745288f, -0.4329740f, +0.0067500f, +0.4543661f, +0.0269077f,
  -0.1614187f, +0.1487863f, -0.4247171f, -0.1457000f, -0.6433200f, +0.1005346f, -0.1505346f, +0.0724266f,
  -0.2159880f, +0.0202351f, +0.0579322f, +0.0326206f, +0.0641124f, +0.2101041f, -0.0101240f, +0.0333255f,
  -0.1966098f, -0.2307139f, -0.2670705f, +0.1332094f, -0.0120066f, +0.2108267f, +0.3484763f, +0.0020420f,
  -0.0749732f, +0.1279586f, -0.0647132f, -0.0500781f, -0.4482355f, -0.0615062f, +0.0305372f, -0.1467855f,
  +0.1521115f, +0.1014628f, -0.3948597f, -0.1750073f, -0.5148799f, +0.0869313f, +0.0431150f, +0.1794483f,
  -0.0580238f, +0.3682252f, -0.3324453f, -0.3254420f, -0.7402892f, -0.1822614f, -0.3464550f, +0.0102298f,
  -0.3140275f, +0.1601928f, -0.4643134f, +0.0492065f, -0.3294671f, -0.1549779f, -0.0301682f, +0.3248709f,
  +0.1214599f, +0.1047915f, -0.2223268f, -0.1283216f, -0.3743561f, -0.1119704f, +0.0202202f, -0.1546036f,
  -0.0245481f, +0.0091682f, -0.1541433f, -0.0166757f, -0.7837924f, +0.1693988f, +0.4208390f, -0.4167861f,
  -0.0248838f, -0.0406373f, -0.3191890f, +0.0041200f, -0.7057633f, -0.0007214f, +0.0228226f, -0.2111746f,
  -0.0914711f, -0.0484201f, -0.1104458f, -0.0125665f, -0.2456376f, +0.2423799f, +0.2485977f, -0.0498464f,
  -0.0088874f, -0.2078495f, -0.3370606f, -0.0747297f, -0.3123522f, +0.1750614f, +0.0444573f, -0.1127655f,
  -0.3410436f, -0.1682832f, +0.1322664f, +0.0541107f, +0.0729133f, -0.2209295f, +0.1864706f, -0.0037491f,
  +0.0236005f, +0.0164957f, -0.1316622f, +0.0163918f, -0.1468088f, +0.1486904f, +0.0523365f, -0.3051055f,
  +0.1057527f, -0.0795005f, -0.0566860f, +0.0152391f, -0.1223646f, +0.1556878f, +0.0530769f, -0.0669893f,
  +0.0363063f, -0.1493294f, -0.0408030f, -0.1378454f, -0.2574802f, -0.0892025f, -0.1428066f, +0.1884976f,
  +0.0641851f, +0.0355921f, -0.0533362f, -0.1847998f, -0.4129098f, -0.2264512f, +0.0489469f, -0.0992819f,
  +0.0894726f, -0.0748052f, +0.1046401f, -0.1250665f, +0.3350310f, -0.0227232f, -0.2809982f, -0.1300334f,
  +0.1149715f, -0.4401010f, -0.1378122f, -0.2351770f, +0.1486719f, -0.1036932f, -0.3898338f, -0.0262590f,
  -0.0583617f, +0.0231982f, -0.1743080f, +0.0143949f, +0.1120722f, -0.0433591f, +0.2645513f, +0.1419056f,
  -0.0733638f, -0.1466936f, -0.0727885f, -0.0455985f, +0.1772835f, +0.0453365f, +0.2293370f, +0.0654698f,
  +0.0390679f, +0.0186444f, +0.1403783f, +0.0433578f, -0.1842023f, +0.3297697f, +0.0721121f, +0.2053962f,
  +0.0531131f, -0.0414776f, +0.0897115f, +0.1590827f, +0.1587349f, -0.0462871f, -0.0869415f, +0.2167773f,
  +0.1759276f, +0.3618487f, -0.0047534f, +0.0145698f, +0.1431530f, +0.3185554f, +0.2669911f, -0.0864706f,
  +0.2370196f, +0.1000317f, +0.3346416f, -0.0899557f, +0.4154055f, -0.0042662f, -0.0404967f, +0.2608529f,
  +0.0145618f, -0.0119719f, -0.0237450f, +0.0856366f, +0.5072838f, -0.2770025f, +0.0719955f, +0.0723126f,
  -0.3315099f, +0.0969585f, -0.2102385f, -0.3796844f, +0.4316323f, +0.1060285f, +0.2102771f, +0.0861276f,
  +0.0585991f, +0.2141759f, -0.1380379f, -0.2378313f, +0.8095385f, +0.2408397f, +0.0523282f, +0.0139512f,
  -0.0157765f, -0.1463583f, +0.0535184f, -0.0194543f, +0.0733941f, -0.1780633f, +0.1865228f, -0.0406842f,
  -0.2100892f, -0.3106533f, +0.0367955f, +0.2578412f, +0.1822676f, -0.1034209f, +0.1317973f, -0.0759223f,
  -0.1362550f, +0.0514668f, +0.1485034f, -0.0353812f, +0.4217529f, -0.0921890f, -0.0563728f, +0.0168035f
);

const float biases[4] = float[4](
  +0.0954366f, -0.0369132f, -0.1896918f, -0.1496341f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer31 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1582076f, -0.2417132f, +0.0940608f, -0.1855644f, +0.2580258f, +0.1431169f, -0.0403021f, -0.1434993f,
  -0.0772883f, -0.1052426f, +0.0107733f, -0.0518817f, +0.0614572f, +0.1353960f, +0.2109457f, -0.5042670f,
  +0.0914112f, +0.1058021f, +0.2100156f, -0.0677940f, +0.0100966f, +0.0597368f, -0.3003592f, -0.1926145f,
  -0.1644271f, +0.0733875f, +0.0451926f, -0.1471715f, -0.1541699f, -0.0562839f, -0.2176122f, +0.1881597f,
  +0.0036025f, -0.1810365f, +0.4138160f, -0.0852922f, +0.0806614f, +0.0620459f, -0.1267609f, +0.0397018f,
  +0.0973497f, +0.0346264f, +0.2227213f, +0.0034861f, -0.0292542f, +0.2254346f, -0.3576370f, -0.1432589f,
  +0.0231092f, -0.0076240f, -0.0633085f, +0.1450162f, -0.2223141f, +0.4273658f, +0.1074607f, +0.2683673f,
  -0.0857370f, +0.1050139f, +0.0574364f, +0.0163081f, -0.4483648f, +0.3406670f, +0.2581014f, -0.1023672f,
  +0.0323384f, +0.2354488f, +0.0311362f, -0.0386822f, -0.1695743f, +0.1076036f, +0.0254645f, -0.0584130f,
  +0.3316262f, +0.0564272f, -0.0768733f, -0.0187176f, +0.0273609f, -0.1800901f, +0.0947879f, -0.1961070f,
  -0.1905956f, +0.2099266f, -0.0684733f, +0.0162377f, -0.1050094f, -0.1220064f, +0.3497383f, +0.3190034f,
  -0.1961012f, -0.0297476f, -0.0908712f, -0.2473328f, -0.1129157f, -0.0714134f, +0.1994378f, +0.0752358f,
  -0.0742483f, +0.1391037f, +0.0373554f, -0.0203036f, -0.2920716f, -0.1747844f, +0.0903014f, -0.2967283f,
  +0.0189538f, +0.2797576f, -0.3160388f, +0.2899744f, -0.1870269f, -0.1958921f, +0.2274551f, -0.0614613f,
  +0.1717296f, +0.1659614f, +0.0667418f, +0.2767560f, +0.1875109f, +0.1362551f, +0.1107160f, -0.0448481f,
  -0.2270479f, -0.1160718f, -0.1381306f, +0.2220545f, +0.3555385f, +0.2113560f, +0.1752159f, +0.2774750f,
  -0.2190636f, -0.1547389f, -0.1104723f, +0.2046371f, +0.5169705f, -0.0876942f, +0.1389825f, -0.2021237f,
  +0.0028709f, -0.1979526f, -0.0347611f, -0.2132253f, +0.1197459f, -0.1563153f, +0.0606276f, -0.0743145f,
  +0.3708310f, +0.1892713f, -0.3569634f, -0.3044491f, +0.0612760f, -0.0877069f, -0.1419230f, -0.2478940f,
  -0.0324085f, -0.2001261f, +0.0066826f, -0.5674149f, +0.0199194f, +0.3270296f, -0.0244809f, +0.5485163f,
  -0.0722384f, -0.2957192f, -0.0735303f, +0.0255239f, +0.0464062f, +0.5225375f, -0.0766768f, -0.0800925f,
  +0.1347852f, +0.2250620f, -0.2732578f, -0.1671010f, +0.2584690f, -0.1619021f, -0.2547819f, -0.1052442f,
  +0.0984938f, +0.3335243f, -0.3604897f, +0.0699437f, -0.1551236f, -0.0711068f, -0.1987406f, +0.1727629f,
  +0.2323136f, +0.0362811f, -0.0803103f, +0.0016180f, +0.3935624f, +0.6540425f, +0.2265366f, -0.1511983f,
  +0.0149410f, +0.0850573f, +0.0957349f, +0.1565600f, -0.1017494f, -0.1706648f, +0.1252556f, +0.0098765f,
  -0.1032253f, +0.6087961f, +0.0736966f, +0.5936304f, -0.1995129f, +0.0416812f, -0.1758808f, +0.1509921f,
  -0.1801110f, +0.1910350f, -0.0122059f, +0.4198620f, -0.0225747f, +0.2915211f, +0.0518397f, -0.0668030f,
  +0.0718424f, +0.2547733f, -0.2442610f, +0.3517594f, -0.2237955f, +0.2030725f, -0.2701378f, +0.4248967f,
  +0.1978307f, +0.2976130f, +0.0934796f, -0.0989908f, +0.0292907f, +0.2832335f, -0.2552943f, -0.1071378f,
  -0.0726492f, +0.1013404f, -0.2404880f, +0.2460252f, +0.4065536f, +0.3514017f, +0.1806410f, -0.1290096f,
  -0.2717456f, +0.1995629f, -0.3121843f, -0.2593305f, +0.0275651f, +0.4064899f, -0.1406629f, +0.5068049f,
  -0.0822180f, +0.3755225f, -0.2049707f, -0.1904176f, +0.2108284f, +0.2895736f, +0.0263526f, +0.1115718f,
  +0.1918043f, +0.2582715f, -0.0120211f, -0.1653229f, +0.0044130f, -0.2173695f, -0.2725307f, -0.1709127f,
  -0.1974297f, -0.4779541f, +0.0510681f, -0.1844860f, +0.4586164f, -0.0424472f, +0.2631088f, +0.1534613f,
  +0.0747066f, -0.0236353f, -0.1953321f, -0.4367501f, +0.3379779f, +0.1070181f, +0.2451825f, -0.0097981f,
  +0.0090384f, -0.0614581f, +0.2765122f, -0.1934561f, -0.0024539f, +0.1007801f, +0.1473780f, -0.1466912f
);

const float biases[4] = float[4](
  +0.0551791f, -0.0330263f, -0.0463830f, +0.0044909f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer31 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0219762f, +0.0240268f, +0.0549722f, +0.1173376f, +0.0937198f, -0.1885800f, +0.0615715f, +0.0851618f,
  -0.0545755f, +0.2427830f, +0.0378950f, +0.3529324f, -0.0399188f, -0.1526506f, +0.0345009f, -0.0049636f,
  -0.1471266f, +0.0425436f, -0.0581356f, +0.3212669f, -0.1391037f, -0.2694846f, -0.1741421f, +0.1364596f,
  -0.0061145f, +0.0934647f, -0.2144949f, -0.0312889f, -0.0316386f, +0.0403441f, -0.1592038f, -0.2549785f,
  -0.1105865f, +0.4297328f, -0.1056367f, -0.2354066f, -0.1001994f, +0.3287359f, +0.3737353f, -0.1591735f,
  +0.0208024f, +0.2756657f, +0.3048702f, +0.2671727f, -0.2118965f, +0.0803461f, +0.0901976f, +0.0960254f,
  +0.1392578f, -0.0352795f, -0.0704636f, -0.3888682f, +0.0569868f, -0.1722882f, +0.0109227f, -0.2309841f,
  +0.2793052f, +0.0966543f, -0.0214259f, -0.0793953f, +0.4984097f, -0.0339924f, -0.0389121f, -0.3326312f,
  +0.1115091f, -0.3121356f, +0.3761524f, +0.0312768f, +0.0344274f, -0.2120687f, -0.2060629f, +0.1677424f,
  +0.0980136f, -0.1579345f, -0.1754073f, -0.1013437f, +0.0883536f, +0.3201197f, +0.0247845f, +0.0953719f,
  +0.2195568f, -0.0485805f, -0.0095223f, +0.0479566f, +0.1385881f, +0.5050219f, -0.1023809f, -0.0990243f,
  -0.0213059f, +0.3687805f, +0.1009862f, -0.0295859f, +0.1191418f, +0.0193246f, -0.0866249f, -0.3174136f,
  -0.1074463f, -0.4536788f, -0.0550107f, -0.1857001f, +0.3635209f, -0.2021136f, +0.1121796f, -0.1133696f,
  +0.0513810f, -0.2764077f, -0.0408378f, -0.3211459f, -0.1098634f, +0.0587265f, +0.0568171f, -0.3628334f,
  +0.0890547f, +0.1194974f, -0.0707672f, +0.1648107f, -0.0303992f, -0.3430892f, -0.0252083f, -0.0908121f,
  +0.1247350f, -0.0633319f, -0.1052482f, -0.0707060f, +0.2457474f, -0.1893572f, +0.0132797f, -0.0518951f,
  +0.1076302f, +0.0815748f, -0.0165939f, -0.1580591f, +0.2265178f, -0.0045480f, -0.1473209f, -0.0384506f,
  -0.0896574f, +0.2714562f, -0.1353091f, +0.1022195f, -0.2727924f, -0.1630773f, +0.0114071f, +0.1966328f,
  +0.2841743f, -0.0293663f, -0.0886611f, -0.2142282f, -0.0257235f, -0.1695565f, -0.0113403f, +0.0396813f,
  -0.1149530f, -0.0498621f, -0.0774801f, +0.0608759f, +0.5542612f, -0.5295902f, -0.1232818f, +0.2349285f,
  -0.0557677f, +0.0508765f, -0.0432384f, +0.3335035f, +0.1436806f, -0.0575367f, +0.0832048f, -0.0616962f,
  +0.2212880f, +0.2707855f, -0.0493688f, +0.0945402f, -0.0447026f, +0.0307634f, -0.0990080f, -0.2362576f,
  +0.2720600f, -0.1045054f, -0.2660455f, -0.0571199f, -0.3043790f, +0.0244422f, -0.2117229f, +0.1128382f,
  -0.1694650f, +0.4760975f, -0.0634827f, -0.2839729f, +0.1521374f, -0.3285027f, +0.1266168f, -0.3624777f,
  +0.1955449f, -0.0806057f, -0.3451321f, +0.1154116f, +0.2449642f, +0.0700621f, +0.3853205f, -0.2331679f,
  -0.1407050f, +0.1377440f, -0.1642424f, -0.0214956f, +0.2414671f, +0.0018767f, +0.0444039f, -0.2062563f,
  -0.0093056f, +0.1597283f, +0.0330446f, +0.1531711f, -0.0264678f, -0.0686492f, -0.0181913f, +0.0834288f,
  -0.0367943f, -0.0783917f, -0.0247568f, +0.1740918f, +0.0484324f, -0.1598071f, -0.0825375f, +0.0069654f,
  -0.0566404f, -0.1106658f, +0.1838710f, +0.3499273f, +0.1099487f, -0.0461345f, +0.1554433f, -0.0623530f,
  -0.0933136f, +0.2972392f, -0.2709102f, +0.2009096f, -0.2654884f, -0.2134287f, +0.1442700f, -0.1756052f,
  -0.1274051f, +0.1849968f, -0.0182974f, +0.0771919f, +0.1118395f, +0.1104430f, -0.0528536f, -0.0957903f,
  +0.1268524f, +0.2280745f, -0.1466668f, +0.1248927f, -0.1986713f, -0.2227798f, +0.0745616f, +0.1952253f,
  -0.2263242f, -0.1000540f, -0.1317509f, -0.0638867f, +0.2999701f, -0.2354061f, +0.3265036f, -0.0755563f,
  +0.3371413f, -0.0998490f, -0.4677649f, -0.0265266f, +0.2804854f, +0.2113802f, +0.0330707f, +0.0296362f,
  +0.2153484f, -0.3990695f, -0.2263443f, +0.3385361f, -0.1704027f, +0.2011200f, +0.3937671f, +0.0346002f,
  +0.0280251f, +0.1085538f, -0.0986268f, +0.1497922f, -0.0392136f, -0.3328760f, +0.0991672f, +0.0773397f
);

const float biases[4] = float[4](
  -0.0776258f, +0.0737713f, +0.0958139f, -0.0021782f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer32 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1015335f, -0.2794161f, -0.0099721f, +0.1893720f, -0.1454867f, +0.0944164f, -0.1836047f, -0.1637822f,
  -0.0265990f, -0.0569299f, -0.1569099f, +0.1783851f, -0.0632492f, +0.0598877f, +0.1399828f, -0.1867940f,
  -0.1081130f, -0.0308135f, +0.0741893f, +0.1250259f, +0.2025461f, +0.0836141f, +0.0055124f, +0.0980502f,
  -0.0372935f, -0.1261250f, -0.2659255f, -0.1555441f, +0.2659908f, -0.2373341f, +0.0425764f, +0.1257581f,
  -0.0731472f, -0.2932016f, -0.3672917f, +0.0867076f, -0.1012183f, -0.0811370f, -0.3388889f, -0.1579413f,
  -0.1080358f, -0.0068212f, +0.0769165f, +0.2368608f, +0.1416336f, +0.1277907f, +0.0705754f, +0.0186400f,
  +0.0130913f, +0.0520292f, +0.1116803f, +0.1918485f, -0.1414762f, -0.0908128f, +0.1395137f, -0.1336714f,
  +0.1419143f, +0.0863061f, +0.3333736f, -0.0620684f, +0.0389207f, +0.0035901f, +0.2512549f, +0.1600240f,
  -0.1982172f, -0.1763646f, -0.1254728f, +0.0185864f, +0.2716224f, -0.1205598f, -0.2347699f, -0.0738788f,
  -0.0783724f, +0.0021025f, -0.2589607f, +0.3411504f, +0.3246353f, +0.0932106f, +0.0127471f, -0.0235301f,
  +0.2197537f, +0.3291155f, -0.4786794f, +0.1305142f, -0.2421248f, +0.3830282f, +0.2361060f, +0.1854921f,
  -0.1210584f, +0.4841398f, -0.0280664f, +0.0650471f, +0.3879484f, +0.1921204f, +0.0495221f, -0.0308781f,
  -0.2697287f, -0.3384752f, -0.0009777f, +0.1487466f, -0.0831759f, -0.1907249f, -0.0452349f, +0.3782323f,
  -0.2001786f, +0.0593593f, -0.3467879f, -0.0184509f, -0.3682077f, +0.3824522f, -0.0214241f, -0.0058449f,
  +0.0820222f, +0.0933073f, +0.1580072f, +0.0682269f, +0.0614680f, +0.2223789f, -0.1189728f, -0.1377279f,
  -0.2246139f, -0.1741123f, +0.2961715f, -0.1880631f, +0.1896592f, -0.0970185f, -0.1381718f, -0.3075795f,
  -0.3205625f, -0.3706893f, +0.0973446f, -0.0355145f, +0.1844959f, +0.0395870f, -0.0142787f, +0.1638999f,
  -0.0845404f, +0.0777678f, +0.1786478f, -0.2198790f, -0.1635319f, +0.3661531f, +0.0304209f, -0.0951648f,
  +0.1796967f, -0.0644044f, +0.1609662f, +0.0527813f, -0.4203604f, -0.1685670f, +0.0683817f, +0.1012921f,
  +0.1205770f, +0.0937927f, -0.1632076f, +0.1435380f, +0.0896954f, +0.1036735f, +0.0457561f, -0.3815357f,
  +0.0061923f, -0.0669516f, -0.1288138f, -0.0305876f, -0.0149975f, +0.0057655f, +0.0948374f, -0.2495158f,
  -0.2030910f, -0.4554771f, +0.0398073f, -0.1985219f, -0.1067221f, +0.0431046f, -0.1178266f, -0.0110437f,
  -0.2283790f, -0.1699091f, -0.0458727f, -0.1362584f, +0.0706758f, +0.1349421f, -0.0025797f, -0.1836736f,
  +0.0166724f, -0.0879834f, +0.0072285f, -0.2607270f, -0.0185348f, +0.3435452f, +0.1041336f, -0.2215299f,
  -0.0104329f, +0.0958029f, -0.0218080f, -0.1888909f, +0.2928172f, +0.0054029f, -0.5367355f, -0.3438989f,
  +0.2562054f, +0.1445780f, -0.2967688f, +0.0906385f, -0.1721674f, +0.1677575f, -0.0860772f, -0.1579321f,
  -0.1646063f, -0.1959315f, +0.2233013f, +0.0930218f, -0.1614438f, +0.3159391f, -0.0571936f, -0.4181196f,
  -0.0011067f, +0.1034934f, -0.2518106f, +0.2764605f, +0.2139110f, +0.0628916f, +0.0820695f, -0.1815684f,
  +0.0602184f, -0.1405044f, -0.0910245f, +0.0563719f, +0.1491759f, -0.0175825f, -0.2255501f, -0.0003094f,
  -0.0033625f, +0.1980593f, -0.1405896f, +0.0549746f, +0.4027782f, +0.1506735f, +0.1523011f, -0.2620506f,
  +0.2683191f, +0.0164651f, +0.2610114f, +0.3971946f, -0.1090767f, -0.6127197f, -0.2821517f, +0.2115956f,
  -0.0390382f, +0.0325160f, +0.1135666f, +0.5093665f, +0.2845629f, +0.1030110f, -0.0375263f, -0.2643283f,
  +0.2220991f, +0.1746159f, -0.0182455f, -0.0216320f, +0.2775545f, +0.2827031f, +0.0257010f, -0.0081755f,
  -0.0073336f, +0.0820071f, +0.3642470f, +0.2393515f, -0.2767165f, -0.3675421f, +0.1123520f, +0.1247798f,
  -0.1017722f, -0.0030006f, +0.5790945f, +0.2556742f, +0.0379295f, -0.3557717f, +0.0262442f, +0.1030121f,
  +0.3829915f, -0.0950285f, +0.2010621f, -0.1122528f, +0.3529752f, -0.0947850f, +0.1964944f, +0.3425691f
);

const float biases[4] = float[4](
  -0.0307498f, -0.0496190f, +0.0098103f, +0.0710967f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer32 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0303295f, +0.0846555f, -0.0282253f, -0.2147017f, -0.0165485f, -0.1848579f, +0.1880673f, +0.0548931f,
  +0.0945068f, -0.4016276f, +0.1692473f, +0.0111353f, +0.0048538f, -0.4504781f, +0.2893376f, +0.4680673f,
  -0.0541064f, +0.0491150f, +0.3536073f, -0.2624893f, -0.0090942f, +0.0502673f, +0.1140227f, -0.2841950f,
  -0.0775070f, -0.0299632f, -0.1527172f, -0.2008881f, +0.2230636f, +0.1785711f, +0.2437615f, +0.1086365f,
  +0.0843962f, +0.2356285f, -0.0094401f, -0.2729966f, +0.1452387f, +0.1459782f, +0.0730302f, -0.2166821f,
  +0.0438544f, +0.2648648f, +0.0225417f, -0.1834572f, -0.0366747f, -0.0666283f, +0.2136143f, -0.2442523f,
  -0.1200125f, -0.2443938f, -0.0701852f, -0.3074008f, +0.0772251f, +0.0442005f, +0.1084628f, -0.0210735f,
  +0.0211003f, +0.0949885f, -0.1321915f, -0.1946805f, +0.1770799f, +0.4642956f, -0.1490342f, -0.0995248f,
  -0.0851583f, -0.1454482f, +0.0470806f, -0.0048990f, -0.2475692f, +0.1179924f, -0.0056620f, -0.1465421f,
  +0.3180795f, +0.2097238f, +0.5077831f, -0.0392080f, +0.3080587f, -0.1559282f, -0.0666372f, +0.0632604f,
  +0.2154877f, -0.1775741f, -0.2372800f, +0.3362487f, +0.1579480f, -0.1387608f, -0.2586026f, -0.1337872f,
  +0.2545462f, -0.0749918f, +0.1846888f, -0.1609181f, +0.1681694f, +0.1592578f, +0.0224169f, +0.1074695f,
  +0.1841746f, -0.1257564f, +0.2698587f, +0.0646867f, +0.0979697f, -0.1347920f, +0.2527760f, +0.1580900f,
  +0.3839189f, +0.0702846f, +0.0521768f, +0.3207405f, -0.0530771f, +0.1205015f, -0.0443976f, +0.2034667f,
  +0.1041904f, +0.1735307f, -0.2010866f, -0.0048333f, +0.0772618f, +0.2419846f, -0.3159329f, +0.0464100f,
  +0.0483997f, -0.2055638f, -0.6100287f, +0.2617664f, -0.0677450f, +0.1675204f, +0.1343523f, -0.1049880f,
  -0.2220383f, +0.2658551f, -0.3032534f, +0.2019206f, +0.0219317f, +0.3031298f, +0.1906074f, +0.1675870f,
  +0.0307543f, +0.2003644f, -0.1033504f, -0.1806851f, +0.1941682f, -0.0107349f, -0.2101333f, +0.0620357f,
  +0.2141195f, +0.1655669f, -0.0704058f, -0.1089781f, +0.0715382f, -0.2204434f, +0.1579765f, +0.1842108f,
  +0.0753201f, -0.0475896f, -0.2103781f, -0.1494661f, +0.0517540f, -0.0387821f, -0.1570656f, +0.0077723f,
  -0.0793627f, -0.0473900f, +0.1397954f, -0.4166793f, -0.1311671f, -0.1329688f, -0.1530560f, -0.0388708f,
  +0.1256275f, -0.0393826f, -0.1092700f, +0.1474176f, -0.1079969f, -0.0834144f, +0.4357255f, +0.0143187f,
  +0.0611125f, -0.0143013f, +0.1373230f, -0.0661823f, -0.1489040f, +0.0374633f, +0.1878967f, +0.2064534f,
  +0.2344243f, +0.1627348f, +0.1174044f, -0.3635236f, +0.0588540f, -0.0530509f, +0.0688346f, -0.0418018f,
  +0.1968081f, +0.1257202f, +0.3017346f, +0.0248355f, +0.2266674f, -0.1155277f, -0.4001623f, -0.0413883f,
  -0.1077729f, -0.0548929f, -0.0824918f, +0.1509984f, -0.1052484f, -0.0965385f, +0.0727209f, -0.0088493f,
  +0.1310094f, +0.0281995f, +0.2062830f, -0.1244531f, -0.1456866f, -0.0211566f, +0.4158985f, -0.1031783f,
  -0.0722571f, -0.0538959f, +0.3567255f, -0.1817732f, -0.2319341f, -0.4138891f, +0.1643675f, +0.1208616f,
  +0.0383300f, +0.3548391f, +0.1990149f, -0.3708810f, +0.2363880f, +0.0471966f, +0.2992453f, -0.1537773f,
  -0.0483316f, -0.1737146f, -0.0708127f, +0.1371690f, -0.0031572f, +0.2406470f, +0.1589683f, -0.2588200f,
  +0.1227007f, +0.3056930f, +0.0574812f, -0.2249140f, +0.1271470f, +0.3265392f, -0.3184845f, +0.1265798f,
  +0.0559423f, +0.1846207f, +0.0337441f, -0.0347179f, +0.3508004f, +0.2853184f, -0.2118834f, -0.0932312f,
  +0.0800275f, +0.1637674f, -0.0195394f, +0.1790314f, +0.0673229f, -0.1331659f, +0.0458383f, +0.0034808f,
  +0.0083060f, +0.1480944f, +0.4090129f, -0.0676897f, -0.0220768f, +0.2282099f, +0.0549196f, +0.0864151f,
  +0.1619874f, -0.0987935f, -0.2644422f, +0.0799474f, +0.0471831f, -0.2416347f, -0.0571224f, +0.0279386f,
  -0.0056408f, +0.0918149f, +0.1771092f, -0.1083517f, -0.0593407f, -0.1001875f, -0.0469768f, -0.0039561f
);

const float biases[4] = float[4](
  +0.0679836f, -0.0045218f, -0.1246800f, -0.1275808f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer33 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0264816f, +0.0743963f, +0.0127865f, +0.0217494f, -0.0158727f, +0.3314093f, +0.0370122f, +0.0569426f,
  +0.4913051f, -0.3349908f, -0.4967556f, +0.1628259f, +0.5967190f, -0.1391286f, +0.0497729f, -0.1550854f,
  -0.1707213f, -0.0927949f, +0.1485921f, -0.2983694f, -0.1457373f, +0.2330460f, +0.0384960f, +0.5114355f,
  -0.1802971f, +0.0393362f, +0.1620793f, +0.1539877f, -0.2257773f, -0.1966328f, +0.1817430f, +0.0325368f,
  +0.4223866f, -0.0972049f, -0.3724691f, -0.0128319f, +0.5724041f, +0.1727956f, -0.4141731f, -0.2516908f,
  -0.2169305f, +0.3803045f, -0.1982136f, -0.1724212f, -0.1865588f, +0.2344045f, +0.1092737f, +0.2433683f,
  +0.1351241f, +0.1541462f, +0.1172592f, -0.1885574f, -0.1962404f, +0.1438736f, -0.0956610f, +0.0378632f,
  +0.1028989f, -0.4254635f, +0.3543923f, +0.1085800f, +0.1965488f, -0.1946606f, -0.0766330f, -0.1278951f,
  +0.2123330f, -0.0008966f, -0.2427661f, -0.1828602f, +0.3683610f, +0.2792822f, -0.1913697f, +0.1532228f,
  -0.1164114f, -0.1903391f, +0.1256203f, -0.1234206f, +0.4407947f, -0.0509247f, +0.2988806f, -0.2213452f,
  +0.1114408f, +0.3052694f, -0.1612305f, +0.3087146f, +0.0095952f, +0.1200403f, +0.1804502f, -0.0136094f,
  +0.0565791f, -0.1230867f, +0.1696167f, +0.5065570f, -0.0631403f, -0.1708646f, +0.0417622f, +0.1151597f,
  +0.0648734f, -0.3818105f, +0.0351233f, -0.3082456f, +0.1359786f, -0.0435446f, +0.1448078f, -0.1892878f,
  +0.1513583f, +0.0303876f, -0.1067058f, +0.1351247f, -0.0392381f, +0.2078434f, -0.1830011f, -0.0401182f,
  +0.1314422f, -0.2320091f, +0.0544693f, -0.1457029f, -0.0743269f, +0.1786933f, -0.3657629f, +0.3303500f,
  +0.2288842f, -0.0402119f, +0.1762438f, -0.3992423f, -0.0263653f, +0.0498640f, -0.3255876f, +0.2356421f,
  -0.1459393f, +0.3119926f, -0.0489202f, +0.2654785f, -0.1643885f, +0.1710125f, +0.0505267f, -0.1993140f,
  -0.1116322f, +0.0563212f, -0.0644170f, +0.0038156f, +0.0586462f, -0.0153265f, -0.0963354f, +0.0311744f,
  +0.0623757f, -0.0328022f, +0.1738531f, +0.0957745f, -0.0999503f, -0.2603580f, -0.1392934f, -0.0271371f,
  -0.0243622f, +0.1730671f, +0.0592494f, +0.3096361f, -0.0993555f, -0.0526542f, +0.0065812f, -0.0966577f,
  +0.1063320f, -0.1200659f, +0.2411384f, +0.0625112f, +0.0941437f, -0.1139814f, -0.0082894f, +0.0278171f,
  -0.1489335f, +0.0404057f, +0.2056080f, +0.0206821f, +0.0134646f, -0.0966236f, +0.0818591f, +0.1099065f,
  -0.2245946f, +0.1688569f, -0.2601328f, +0.1891214f, -0.1485746f, -0.3076420f, -0.0213567f, +0.4038596f,
  +0.1246245f, +0.0796184f, -0.1951634f, -0.2027624f, +0.2264979f, +0.4256169f, +0.0605928f, +0.1615033f,
  +0.1070675f, +0.2157165f, -0.0908752f, -0.1132991f, +0.2124937f, +0.2661698f, -0.1303449f, -0.0994238f,
  -0.0315506f, -0.0893089f, -0.3589780f, -0.0086562f, +0.1768900f, +0.5435048f, -0.1198310f, -0.2345440f,
  +0.0144328f, -0.3275055f, +0.4059099f, -0.3139143f, -0.1924324f, +0.4498017f, +0.3410786f, -0.2458923f,
  +0.1285045f, -0.1641728f, +0.3337374f, +0.2750720f, +0.1199566f, -0.1739331f, +0.0259473f, -0.1204908f,
  +0.0779650f, +0.1954200f, +0.2436677f, -0.1155833f, +0.1433377f, +0.2744760f, -0.2225699f, -0.1510696f,
  -0.0868692f, +0.3161910f, +0.1044291f, -0.1222684f, -0.0115337f, +0.3316156f, -0.0266922f, +0.1879288f,
  -0.1104386f, -0.1833292f, +0.1528882f, +0.2221614f, +0.0370428f, -0.1386486f, +0.0184935f, +0.0810612f,
  +0.1728124f, +0.5005956f, -0.2515770f, -0.3529925f, +0.3744023f, -0.2556371f, +0.0544909f, +0.1281454f,
  -0.1029513f, -0.0322444f, +0.4318302f, -0.2744282f, -0.1208727f, -0.4166879f, +0.2715778f, +0.3750631f,
  -0.0866299f, +0.0189941f, +0.1111666f, -0.1184317f, +0.2215190f, +0.2216904f, -0.1213801f, +0.0699681f,
  -0.0489041f, -0.2282564f, -0.1582101f, +0.1253576f, +0.3397441f, +0.1508965f, +0.0722165f, +0.0883831f,
  +0.2585734f, -0.1846792f, +0.1374914f, -0.2597922f, +0.1488047f, -0.1545286f, -0.1733457f, -0.1073389f
);

const float biases[4] = float[4](
  -0.0769000f, +0.0881182f, +0.0103223f, -0.1313346f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer33 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1647309f, -0.0269831f, +0.0022902f, +0.0381834f, -0.1116974f, +0.0852419f, -0.1021670f, -0.0849391f,
  -0.0268205f, +0.2033018f, -0.0558977f, -0.0350595f, -0.1664530f, -0.2833450f, +0.1325498f, +0.0218429f,
  +0.0192014f, -0.0722404f, -0.1349519f, -0.1679062f, +0.0693542f, -0.0021991f, +0.0876850f, -0.0036627f,
  +0.2037819f, -0.0367968f, -0.1163022f, +0.1821330f, -0.2481501f, +0.0660182f, -0.2913267f, -0.1389932f,
  -0.4482063f, -0.0491883f, +0.1268063f, +0.2863579f, -0.7428782f, -0.2125445f, +0.0216067f, -0.0613507f,
  +0.0380883f, +0.1957291f, +0.1696715f, +0.0897235f, -0.0201478f, -0.0554081f, -0.1941208f, +0.1335212f,
  -0.3505003f, +0.1819315f, +0.2479549f, +0.0059176f, -0.2220241f, -0.2481567f, +0.1061843f, -0.0654083f,
  +0.1373468f, +0.0177383f, +0.0378321f, +0.0839563f, +0.3313522f, -0.1435103f, +0.1330485f, +0.0170907f,
  -0.1452836f, +0.2095601f, -0.0238772f, -0.2988279f, +0.1902801f, -0.0282411f, -0.2431350f, -0.0743634f,
  +0.0833699f, +0.2236605f, -0.3578404f, -0.0098324f, -0.2171578f, -0.0832558f, +0.2056259f, -0.2941128f,
  -0.1934288f, +0.3450186f, +0.0165280f, +0.2895482f, -0.1559376f, -0.5527124f, +0.1745387f, +0.2466492f,
  +0.1230936f, +0.1142282f, +0.1443975f, +0.4046470f, -0.1412565f, -0.0897330f, +0.0892545f, -0.0585437f,
  -0.2571127f, -0.0417442f, -0.1259978f, +0.3586859f, +0.1095459f, +0.1598070f, +0.0319289f, -0.2287855f,
  +0.2617930f, -0.1912814f, +0.0503034f, +0.2280439f, -0.0522070f, +0.0695979f, -0.0566518f, -0.0619313f,
  +0.0075467f, +0.0538123f, -0.0790592f, +0.4704749f, -0.2187895f, -0.2021638f, +0.2527198f, -0.0452814f,
  -0.1343988f, +0.0659749f, -0.4568155f, -0.1237923f, +0.0387066f, +0.0665313f, +0.1666567f, -0.1164463f,
  +0.0055681f, -0.2034361f, -0.0868760f, -0.1148011f, +0.2654701f, -0.1311075f, -0.1601385f, +0.0868148f,
  +0.2093134f, +0.0872633f, +0.1636949f, -0.1249460f, -0.0709751f, -0.4028606f, -0.0442402f, +0.0639303f,
  -0.0305214f, -0.1944140f, +0.2277624f, +0.2519662f, -0.0371276f, -0.2840790f, -0.0437130f, -0.1830168f,
  +0.0480135f, -0.2118459f, -0.1897958f, +0.1195352f, -0.2326856f, -0.2085028f, +0.0704795f, +0.1321816f,
  +0.1512855f, +0.0509158f, -0.0911114f, +0.0412130f, -0.1114805f, -0.1829562f, -0.1232877f, +0.0226120f,
  +0.0453619f, +0.1149156f, -0.0559818f, +0.0541557f, +0.0705567f, +0.1653716f, -0.0154346f, -0.0079377f,
  -0.0428288f, -0.0387453f, -0.2250075f, -0.0941690f, +0.1916412f, +0.0959843f, -0.0239726f, +0.2541220f,
  +0.3005123f, -0.0763676f, -0.0179432f, +0.2514502f, -0.1636681f, -0.1825903f, +0.1863908f, +0.1581448f,
  -0.2605275f, +0.1944834f, -0.1120197f, +0.0905277f, -0.0543191f, -0.0980465f, +0.0026262f, +0.2979319f,
  +0.1015318f, +0.0517452f, -0.1302120f, +0.0723712f, -0.0753415f, +0.1242680f, +0.2030446f, +0.1052545f,
  -0.0377819f, -0.0637635f, +0.2094979f, +0.2429547f, +0.1015325f, +0.0924843f, +0.2150158f, -0.0094195f,
  -0.0885698f, +0.3496723f, +0.0070925f, -0.0170844f, -0.5119075f, +0.1559564f, -0.3022770f, +0.4199207f,
  +0.0911379f, +0.1019499f, -0.6377472f, +0.5924993f, -0.5617851f, -0.5030641f, -0.2826951f, +0.0734162f,
  +0.2895778f, +0.1255804f, -0.2577295f, +0.3649588f, -0.0756254f, -0.1836624f, +0.1173324f, -0.1889913f,
  -0.1161541f, -0.2711609f, +0.1523473f, -0.0473468f, +0.1646246f, -0.1692306f, -0.0457590f, +0.1490773f,
  -0.3664658f, -0.0972473f, -0.0706248f, -0.0623708f, -0.2977447f, -0.0640596f, -0.4575823f, +0.1495099f,
  +0.1759277f, -0.0122880f, +0.1222618f, +0.2980426f, -0.2622843f, -0.3007479f, +0.0270382f, -0.0642268f,
  +0.2276949f, +0.0528781f, -0.1253959f, -0.0464806f, +0.3733568f, +0.0674486f, -0.0109440f, +0.0272035f,
  +0.1210662f, -0.3688472f, +0.0369204f, -0.0771387f, +0.2741884f, -0.0592045f, +0.1487442f, +0.2301464f,
  -0.1572316f, -0.0328897f, -0.0203031f, +0.0815040f, -0.1595360f, -0.1849166f, +0.2009988f, +0.0661656f
);

const float biases[4] = float[4](
  +0.0849719f, +0.0540684f, +0.0570483f, -0.1795829f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer34 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1181437f, +0.1085458f, +0.2242435f, -0.0005454f, +0.1522229f, -0.0572444f, +0.0964696f, -0.1481010f,
  -0.2291749f, +0.1847124f, +0.5428573f, +0.2460791f, +0.1450295f, +0.3646880f, +0.1241830f, +0.0216508f,
  -0.1868955f, -0.1210740f, +0.2263799f, +0.0561626f, +0.3243394f, -0.0700130f, +0.0201763f, -0.1568043f,
  +0.0715766f, -0.2711453f, -0.0243418f, -0.0676334f, -0.0212295f, +0.1426570f, -0.2288714f, -0.1029302f,
  -0.4603481f, +0.0091454f, +0.1549971f, -0.4023353f, +0.2061525f, -0.2291321f, +0.1027353f, +0.3144109f,
  -0.0006352f, +0.2791840f, +0.0217501f, +0.1187081f, -0.2871276f, +0.2188338f, -0.1318662f, -0.2913992f,
  +0.1624420f, -0.2122329f, +0.0144837f, +0.1731548f, +0.0780442f, -0.1187171f, -0.0651148f, +0.0283201f,
  +0.0611644f, -0.1431246f, +0.2431047f, +0.0915375f, +0.1198957f, +0.0411635f, +0.1641675f, -0.1990478f,
  -0.2476861f, +0.2880449f, +0.0691677f, -0.0111162f, -0.2111354f, -0.1050635f, -0.0024417f, -0.2191775f,
  -0.1965186f, -0.2052471f, +0.2598990f, -0.1253493f, -0.2280321f, +0.0121577f, -0.1181227f, -0.0686973f,
  -0.1074966f, -0.0127182f, +0.0676778f, -0.4283817f, -0.2924405f, +0.2375759f, -0.0060292f, +0.0269595f,
  +0.1111704f, -0.2392842f, +0.0088438f, -0.0435921f, +0.1168420f, -0.1199348f, -0.2710922f, +0.1691926f,
  -0.2267659f, +0.1849230f, -0.0711400f, -0.0042168f, -0.1136517f, +0.0413128f, +0.1372908f, -0.1516771f,
  -0.1106298f, +0.2131717f, +0.0636859f, -0.2631805f, +0.1825332f, +0.1349802f, +0.2211598f, -0.2100819f,
  -0.0579617f, +0.2540349f, -0.0147020f, +0.1639087f, +0.5745562f, +0.4363942f, -0.2007161f, +0.1648183f,
  -0.3400430f, +0.0587344f, +0.1366141f, -0.2693474f, -0.2911177f, +0.2359413f, -0.1006531f, -0.1315309f,
  -0.0924006f, -0.0472902f, -0.0377895f, +0.1131463f, -0.4637340f, +0.0451359f, -0.1414020f, -0.2554054f,
  +0.2231765f, -0.0318798f, -0.1385635f, -0.1832769f, -0.2418755f, +0.2662045f, -0.1274583f, +0.0006002f,
  +0.1599148f, +0.1559907f, -0.1989146f, -0.0305979f, +0.0763033f, -0.3168225f, -0.1291913f, +0.1067060f,
  +0.2668676f, -0.0140103f, -0.0047610f, -0.0982889f, +0.1077317f, -0.0673226f, +0.0764290f, +0.1846770f,
  -0.1813307f, +0.3860730f, +0.1423150f, -0.0461615f, +0.2191029f, +0.1315901f, +0.0581729f, +0.0177322f,
  +0.2251979f, +0.1620529f, +0.6788803f, -0.3182307f, -0.3425511f, -0.0260664f, +0.0790011f, -0.0535243f,
  +0.4567113f, -0.0785006f, +0.4721530f, -0.0637228f, -0.1213554f, -0.6690812f, -0.1042113f, +0.3295402f,
  -0.2095808f, -0.0804315f, +0.3079324f, -0.0797249f, -0.0744171f, -0.2922570f, -0.2330782f, -0.0727815f,
  -0.4164341f, -0.0398405f, +0.0300258f, -0.2943209f, -0.0770941f, +0.1294431f, -0.1443907f, +0.0772290f,
  +0.1788208f, -0.1195272f, +0.0256630f, -0.1143204f, -0.0077414f, -0.2236238f, -0.3433141f, +0.0012542f,
  +0.1467521f, -0.1112325f, +0.2443158f, -0.0766985f, -0.1189567f, -0.1899828f, -0.4233907f, -0.1009432f,
  +0.1402183f, +0.1156223f, +0.1515903f, +0.0321226f, +0.0556621f, +0.3891867f, +0.0346421f, +0.0974599f,
  -0.0575690f, -0.1319381f, -0.2454140f, -0.2213276f, -0.1878262f, +0.0212821f, +0.1877410f, +0.2567292f,
  -0.2563419f, +0.3805200f, -0.1420234f, +0.1954754f, +0.0787957f, -0.4552726f, -0.1070065f, -0.1167595f,
  +0.5363935f, -0.0378625f, -0.1380766f, -0.2793644f, +0.1284920f, -0.1293874f, -0.1381132f, +0.0712937f,
  -0.3078493f, -0.0208017f, -0.2151335f, +0.1673221f, +0.1060570f, -0.0735746f, +0.2114739f, +0.2588909f,
  +0.1512880f, +0.0402745f, -0.2403676f, +0.0013617f, +0.0570688f, -0.0345350f, +0.2578982f, -0.1856829f,
  +0.3518703f, -0.2645029f, -0.1521511f, +0.1772631f, +0.1214708f, +0.0809117f, -0.1463662f, -0.0611459f,
  -0.3322952f, -0.3540917f, -0.1569178f, +0.4298527f, -0.0904561f, +0.2476496f, -0.0808375f, -0.0035656f,
  +0.0214717f, -0.1293305f, -0.1090877f, -0.2415435f, +0.3409638f, +0.0117728f, +0.1653379f, -0.0534575f
);

const float biases[4] = float[4](
  -0.0700000f, -0.0344648f, +0.0197851f, +0.0329741f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer34 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1076735f, +0.1591746f, -0.0003307f, -0.3690714f, -0.0456582f, -0.0480226f, +0.1127325f, -0.2591091f,
  -0.3198722f, +0.2378636f, +0.0725106f, -0.2742615f, +0.2191962f, -0.1011912f, +0.0183288f, -0.4026538f,
  -0.2152751f, -0.3001829f, +0.0362095f, -0.0282107f, +0.0265891f, +0.0187902f, +0.0413592f, -0.2173630f,
  -0.3260392f, +0.1876561f, -0.0633511f, -0.0564760f, -0.1678137f, +0.0149642f, -0.1158236f, -0.1125282f,
  +0.4528066f, -0.1782604f, +0.2746791f, -0.6638152f, +0.4371206f, +0.1300252f, -0.3555270f, -0.0472765f,
  -0.3706579f, -0.3018466f, +0.1659950f, -0.1912779f, +0.1334843f, +0.0373001f, -0.1763752f, -0.4321368f,
  -0.1568580f, +0.1518392f, +0.0556859f, +0.0812996f, -0.0631302f, +0.0755196f, +0.1829620f, -0.0416947f,
  +0.0888442f, +0.0545698f, +0.1226328f, -0.2977250f, +0.1798777f, +0.1003047f, +0.0101238f, -0.4984319f,
  -0.1213116f, -0.2605381f, +0.1010632f, -0.0317991f, +0.0757466f, -0.0955800f, -0.0736910f, -0.1248982f,
  +0.2398750f, +0.0001546f, -0.0926864f, +0.2245211f, +0.1558360f, -0.1893797f, +0.1952179f, +0.4363425f,
  +0.4078275f, -0.2730733f, -0.2967677f, +0.3154561f, +0.1163775f, -0.0716169f, -0.1911800f, +0.1818813f,
  +0.1722131f, +0.1664300f, -0.1160308f, -0.2797923f, +0.1409962f, -0.0630416f, -0.0150746f, +0.3149572f,
  -0.3872770f, +0.0452683f, -0.1475221f, +0.3117675f, +0.0618188f, +0.0710274f, -0.1710509f, +0.1454964f,
  +0.4222561f, +0.0632905f, +0.1542833f, +0.1658801f, -0.2098112f, +0.0384340f, -0.1219886f, -0.3794016f,
  -0.2351453f, +0.3246773f, -0.1371856f, -0.1467939f, +0.0579393f, -0.1291640f, +0.0963323f, +0.4081993f,
  -0.0033625f, -0.0157830f, +0.1607757f, -0.2208580f, -0.0864540f, +0.1406614f, -0.0481381f, +0.0693305f,
  +0.1076088f, -0.1323978f, +0.3077282f, -0.0854968f, +0.1605614f, -0.0489909f, -0.0711151f, +0.0737025f,
  -0.3270394f, +0.3411705f, -0.0210028f, +0.2490511f, -0.2722262f, -0.3531742f, -0.2588522f, -0.0135946f,
  -0.1155020f, +0.0838249f, -0.2882206f, -0.1032680f, +0.1084036f, +0.0233112f, +0.0312347f, -0.0509719f,
  -0.0100855f, -0.1807236f, -0.2517213f, -0.2118800f, -0.3001313f, +0.1656164f, -0.1493726f, -0.1768317f,
  -0.4758126f, +0.0530253f, -0.0528035f, -0.1043197f, -0.0579008f, -0.1306462f, +0.2415920f, +0.1129564f,
  +0.0893995f, +0.1110242f, -0.2416603f, -0.0587476f, +0.0950727f, +0.1269540f, -0.0162646f, -0.0790186f,
  +0.1573145f, +0.1816131f, +0.0008844f, -0.0925422f, +0.0453321f, -0.2011968f, -0.2541116f, -0.1733874f,
  -0.1698842f, -0.3488555f, -0.0718312f, -0.1613304f, +0.1705720f, -0.2146989f, +0.1223613f, +0.0352550f,
  +0.2779868f, -0.2153450f, -0.0254934f, -0.0574298f, -0.0191461f, +0.0454791f, +0.1818277f, +0.0181076f,
  +0.0845402f, -0.4733207f, +0.0414243f, +0.0563648f, +0.0806365f, +0.0068622f, -0.0494683f, +0.0836305f,
  -0.0579792f, -0.3413744f, -0.1071281f, -0.1415116f, +0.0799145f, -0.2375533f, -0.1785251f, +0.0441528f,
  +0.0059098f, +0.2154790f, +0.1984785f, -0.1493109f, -0.1379599f, -0.0913315f, -0.0997290f, -0.0564541f,
  +0.0012514f, -0.0047991f, -0.1481459f, +0.0652492f, -0.1128439f, -0.4160214f, +0.0483829f, -0.3456643f,
  -0.0176271f, -0.1760335f, -0.1306956f, -0.0255181f, +0.0278383f, -0.0856994f, -0.0571407f, -0.4430789f,
  +0.3939940f, +0.1303712f, -0.3052082f, -0.2410562f, -0.0653481f, +0.0161544f, +0.1066755f, -0.0720600f,
  -0.0352203f, -0.2067811f, -0.0640978f, -0.0504064f, +0.1393658f, +0.1563628f, +0.0937205f, +0.3512856f,
  +0.1316868f, +0.0442467f, -0.2804420f, +0.0237128f, +0.1243520f, -0.0643202f, +0.1076167f, -0.1680066f,
  +0.2943830f, -0.0123702f, -0.0507903f, +0.1421978f, +0.0395798f, +0.0051440f, -0.0370924f, -0.0327481f,
  +0.2470966f, +0.2550637f, -0.0770965f, +0.1215201f, +0.0479074f, +0.1079679f, +0.3510906f, +0.1669403f,
  -0.2210968f, -0.0115425f, -0.0873646f, +0.0308376f, +0.0418878f, +0.2136556f, +0.1601209f, -0.2114065f
);

const float biases[4] = float[4](
  +0.0330299f, +0.0322409f, -0.0978374f, -0.1227893f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer35 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2163885f, +0.2168516f, +0.0659244f, +0.0701291f, -0.0677915f, -0.1379724f, +0.2042588f, -0.1918410f,
  +0.0909467f, +0.2242193f, +0.1925776f, -0.0165605f, +0.0506979f, -0.2029399f, -0.0338840f, -0.3892201f,
  -0.1245372f, +0.2686642f, +0.2201227f, -0.0149417f, +0.0710463f, +0.4044406f, +0.0956474f, -0.2773249f,
  +0.2563053f, -0.1159109f, +0.0838692f, +0.2047242f, +0.1251078f, +0.0062420f, +0.1101809f, -0.0870511f,
  +0.4512759f, -0.4384469f, +0.0501221f, -0.0536304f, -0.1550158f, -0.2308977f, -0.1003065f, -0.2147449f,
  +0.2148516f, +0.0433115f, -0.0926039f, +0.1249912f, +0.2382295f, -0.1519101f, -0.0060819f, -0.2726291f,
  -0.1318539f, +0.3648748f, +0.0921724f, +0.0252840f, +0.0460445f, -0.0404152f, +0.2508965f, -0.0252669f,
  +0.0300214f, +0.1037050f, -0.1993650f, +0.0124429f, -0.3070749f, -0.4837978f, -0.4117947f, -0.1262847f,
  +0.1829131f, +0.3731524f, -0.5641530f, +0.0180734f, +0.0579147f, -0.2142560f, -0.0123890f, -0.2632677f,
  -0.2878745f, +0.0058000f, +0.1161337f, +0.1957279f, +0.0067962f, +0.2542222f, +0.0689011f, +0.3882942f,
  +0.1800293f, +0.3556891f, +0.4537438f, +0.0273086f, -0.1286144f, -0.0615282f, -0.4264945f, -0.3055421f,
  +0.1156091f, +0.0230309f, -0.2650433f, +0.1212268f, -0.0038579f, -0.4499746f, +0.0747070f, -0.1550537f,
  +0.0580802f, -0.3681046f, -0.2840370f, +0.0128158f, +0.1386646f, -0.1701982f, +0.0662238f, +0.4547034f,
  -0.2808228f, -0.3488561f, +0.9012181f, -0.3623763f, -0.1870620f, +0.6089525f, +0.2094190f, +0.6177683f,
  -0.0400600f, +0.1068218f, -0.0171226f, -0.1856494f, +0.0856348f, -0.0043452f, -0.3405305f, -0.5618078f,
  +0.2914182f, +0.3305334f, -0.3818154f, -0.0617376f, +0.4001612f, +0.0491177f, -0.3657553f, -0.1043266f,
  +0.0516036f, -0.1222743f, +0.1392671f, +0.1614227f, -0.4167547f, -0.0788920f, +0.0758183f, +0.6139063f,
  -0.0804551f, -0.0672838f, +0.1691641f, -0.2228052f, +0.0538128f, +0.2105995f, -0.0608170f, +0.2474116f,
  +0.0353043f, -0.0744144f, -0.0058091f, -0.1106522f, +0.0354526f, -0.4237585f, +0.0411242f, -0.0008112f,
  +0.0910057f, -0.0924110f, +0.0755431f, -0.0283087f, +0.1325474f, -0.0371169f, +0.1295096f, -0.2796159f,
  -0.0786009f, +0.1117787f, -0.0391869f, -0.1469303f, -0.3381050f, +0.3206899f, -0.2086072f, -0.2071076f,
  +0.3709098f, +0.1505345f, -0.2079110f, +0.1435851f, +0.0389395f, +0.1872262f, +0.0508904f, +0.0565917f,
  +0.2989929f, -0.1506895f, -0.2560892f, +0.0197951f, +0.3114841f, +0.3374002f, -0.2243025f, -0.1506009f,
  +0.0873822f, +0.1603356f, -0.3970191f, -0.1635074f, -0.2124266f, -0.0163840f, -0.1376482f, -0.1856238f,
  -0.1298831f, -0.0995069f, +0.0536767f, +0.3242722f, +0.0411097f, -0.2462519f, +0.1928610f, -0.0415192f,
  -0.1359414f, +0.0878079f, -0.2232327f, -0.1733967f, +0.1942159f, +0.2574044f, +0.2663183f, -0.0250959f,
  -0.0167836f, +0.0186266f, +0.1290095f, +0.1949894f, +0.0972575f, -0.1800222f, +0.1563757f, -0.2907187f,
  -0.1078067f, +0.0185363f, +0.0167287f, -0.2126985f, +0.0794476f, -0.0646144f, +0.1129935f, +0.3795211f,
  +0.1029198f, -0.0291528f, -0.0611513f, -0.1274221f, -0.0035969f, +0.0854030f, -0.2997555f, +0.1429021f,
  +0.0621343f, -0.1059192f, -0.0490078f, -0.0514224f, -0.0728169f, -0.3198611f, +0.1067395f, -0.0367480f,
  -0.1269591f, +0.4827378f, +0.1160662f, -0.0189551f, +0.3863826f, -0.2826768f, -0.2865681f, +0.2845087f,
  +0.0299436f, +0.1997641f, +0.0010825f, -0.1016233f, +0.1304141f, +0.1162029f, -0.0767253f, +0.1513855f,
  +0.1890655f, +0.1131769f, -0.1082134f, +0.2945210f, -0.0583878f, +0.0152380f, -0.2599515f, +0.1521785f,
  -0.0627673f, +0.0672486f, +0.2197018f, -0.2825485f, +0.0342640f, +0.3426842f, +0.0644104f, -0.1033758f,
  +0.3924751f, +0.0406761f, -0.0855640f, -0.3064815f, +0.3424581f, +0.0602411f, -0.1860295f, -0.3404919f,
  +0.0896975f, +0.2141654f, -0.2803522f, +0.0184717f, +0.3554844f, -0.2213617f, +0.0706628f, -0.4568975f
);

const float biases[4] = float[4](
  -0.1335137f, -0.0896065f, +0.0159666f, -0.0129476f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer35 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1219391f, +0.0711111f, -0.1279595f, -0.0812263f, +0.1438719f, +0.3310895f, -0.2525226f, +0.2453885f,
  -0.2265224f, +0.4113075f, +0.0172062f, -0.0823501f, +0.0230992f, -0.1517565f, -0.3002525f, -0.0947861f,
  +0.0336509f, -0.0692900f, -0.1424394f, +0.0948162f, +0.0979086f, +0.0236054f, +0.0610909f, -0.0066521f,
  -0.0237782f, -0.3309506f, +0.2034669f, +0.0094726f, +0.1871107f, +0.5535187f, +0.3090866f, -0.1420921f,
  -0.0189067f, -0.2869872f, +0.2914301f, -0.1547993f, -0.1447285f, +0.4990952f, +0.1279558f, +0.0708422f,
  +0.0744057f, -0.1085478f, +0.2422118f, +0.0101396f, +0.0923644f, +0.1186457f, +0.0576465f, -0.0879865f,
  +0.3322587f, -0.2920794f, +0.2290698f, +0.3008910f, -0.0075407f, -0.0847229f, +0.1306365f, +0.4596868f,
  +0.0562876f, -0.2082457f, +0.3075514f, +0.0920668f, -0.3355038f, +0.1001665f, -0.1792397f, +0.4267146f,
  +0.0065902f, -0.0154815f, +0.1855552f, +0.2207406f, +0.0069839f, -0.1763531f, -0.0678827f, +0.2505751f,
  +0.0331465f, -0.0679523f, -0.0702967f, -0.2209750f, -0.0812389f, +0.0844431f, -0.5536449f, +0.5037321f,
  +0.0622933f, -0.1342584f, -0.3862855f, +0.3484390f, +0.1891965f, +0.0078374f, -0.3202531f, -0.2995966f,
  +0.1652104f, -0.0990338f, -0.0420589f, +0.0857163f, -0.0781999f, -0.1504473f, +0.0702767f, +0.1234901f,
  +0.1022773f, -0.3467346f, +0.2021801f, +0.2069560f, -0.4584168f, +0.3152931f, +0.0813582f, -0.2827262f,
  -0.0397849f, -0.1430699f, -0.0894607f, -0.3396434f, -0.0103854f, +0.2755647f, -0.2913767f, +0.1127335f,
  +0.2058345f, -0.0026721f, +0.1966884f, -0.1247374f, -0.0008126f, -0.5713036f, -0.2249891f, -0.0068683f,
  +0.0933662f, +0.2131922f, +0.0141995f, +0.2986283f, -0.1060499f, +0.0596897f, -0.2042706f, +0.1178029f,
  +0.1562320f, -0.0574109f, +0.1876986f, +0.2973575f, -0.1246285f, -0.2981107f, -0.0190218f, +0.3290771f,
  -0.0740354f, -0.0323455f, +0.1811527f, +0.2086585f, +0.1474025f, +0.0966045f, +0.0960161f, +0.1915682f,
  +0.0788676f, +0.1291870f, +0.1285592f, +0.0602047f, -0.0430842f, -0.4429930f, +0.0716541f, +0.0363945f,
  +0.0595747f, -0.0668587f, -0.0018888f, -0.1272563f, -0.0132369f, -0.0638962f, -0.0817496f, +0.0995777f,
  -0.0539798f, -0.1690444f, +0.1895146f, +0.0306843f, -0.0474791f, -0.1533048f, +0.0542548f, +0.4063648f,
  -0.1371295f, -0.4888212f, +0.1620014f, +0.0469609f, +0.1210756f, -0.3808106f, +0.0096356f, -0.0585624f,
  +0.0251691f, -0.4543863f, +0.2894734f, +0.1761708f, +0.1266378f, -0.0561651f, +0.2615150f, +0.2476569f,
  -0.0085901f, -0.0808960f, +0.0085071f, -0.0105249f, -0.2475557f, +0.0570154f, +0.0170981f, +0.0793741f,
  +0.0116341f, +0.2793185f, -0.4394021f, +0.1306670f, +0.1734533f, -0.1522582f, +0.0288473f, -0.1477467f,
  -0.1737607f, +0.0152444f, -0.1388908f, +0.2435490f, -0.2440875f, +0.1646585f, +0.0281637f, +0.2270298f,
  +0.0080010f, -0.1868991f, -0.1218362f, +0.1228279f, +0.3265728f, +0.1176096f, +0.1241309f, -0.2014998f,
  +0.0698034f, +0.1000474f, -0.1196635f, +0.0862937f, +0.0210841f, +0.1405775f, +0.0467135f, -0.0604776f,
  -0.0789989f, -0.0370664f, -0.0681692f, +0.3083642f, -0.2613289f, -0.1441115f, -0.0549868f, -0.3469565f,
  -0.3528205f, +0.0111000f, +0.0857350f, +0.2648395f, +0.0197861f, +0.1870781f, +0.1420064f, -0.2982839f,
  -0.1103188f, +0.0624854f, -0.0575214f, -0.2009074f, +0.2476924f, -0.1512365f, +0.1684810f, +0.1289611f,
  +0.0081233f, -0.0772488f, +0.0131757f, -0.1136354f, -0.1494004f, +0.1556146f, -0.1547455f, +0.0666966f,
  -0.0004910f, +0.1627237f, +0.2106664f, +0.2834335f, -0.2418800f, +0.1328540f, -0.0253367f, -0.2266565f,
  +0.1940673f, +0.2504326f, -0.0194175f, -0.1297112f, +0.3026011f, -0.0891998f, +0.1135445f, +0.2230611f,
  +0.1327941f, -0.0426112f, -0.0480984f, -0.3619405f, -0.1195786f, -0.1455438f, +0.2841891f, +0.1895027f,
  -0.1166160f, +0.1762518f, -0.2151220f, +0.0344955f, -0.0943702f, +0.0718925f, -0.0135476f, -0.0235636f
);

const float biases[4] = float[4](
  -0.0389019f, -0.0616458f, +0.0290539f, +0.0177275f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer36 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1384351f, -0.0596878f, -0.0732354f, +0.0814271f, -0.0927686f, -0.1180889f, +0.0844488f, -0.0944676f,
  +0.0087381f, +0.1554686f, -0.1118100f, -0.1678923f, -0.1333542f, -0.1437113f, +0.0337091f, +0.1041028f,
  +0.0875773f, -0.1331278f, +0.0360678f, -0.1543076f, +0.0531167f, -0.0765184f, -0.0771459f, -0.2554673f,
  +0.0095209f, +0.2620898f, -0.0753597f, -0.0698208f, -0.1780909f, +0.0470370f, +0.1151650f, +0.0154917f,
  +0.2610008f, +0.0414612f, +0.0102770f, -0.0321013f, -0.0596445f, -0.1037849f, +0.0641063f, -0.1254674f,
  -0.1303545f, +0.3138123f, -0.1098153f, +0.0067039f, -0.1291537f, +0.1315104f, -0.0368338f, -0.0670677f,
  +0.0800252f, +0.2683175f, -0.0108699f, +0.0319638f, +0.1828936f, -0.1933870f, +0.1631597f, -0.0483063f,
  -0.2764073f, -0.0396673f, +0.0543011f, -0.1492568f, +0.1433933f, -0.2141172f, +0.0488864f, -0.0649491f,
  -0.2656903f, -0.0860097f, +0.0336071f, -0.1536070f, -0.0680501f, -0.1528317f, +0.1535038f, -0.2763070f,
  -0.4793285f, -0.1990506f, -0.0368226f, -0.2583491f, -0.0590972f, -0.0342025f, -0.0087120f, -0.1341412f,
  -0.1453593f, -0.5048742f, -0.2158731f, +0.1552632f, -0.2535823f, -0.1289586f, -0.0065880f, -0.0222311f,
  +0.2003903f, -0.1413001f, -0.0824301f, -0.3976795f, +0.3543333f, -0.1915286f, -0.0825113f, -0.2640845f,
  -0.2869326f, +0.0228790f, +0.0719567f, +0.1825161f, +0.0022685f, +0.0712113f, -0.0844422f, +0.2365518f,
  -0.0377562f, -0.7405227f, +0.0711815f, +0.0207250f, -0.3832937f, -0.3698691f, +0.4707330f, +0.0637376f,
  +0.0329678f, +0.1654662f, +0.0680920f, -0.3768117f, -0.0944009f, +0.1332527f, +0.0995892f, -0.0134698f,
  -0.0896433f, -0.0970151f, -0.0925602f, +0.1747057f, +0.2646363f, -0.1130733f, +0.1067855f, +0.1239820f,
  -0.0699029f, -0.4041038f, -0.3227572f, +0.0620106f, -0.1910609f, +0.0871681f, +0.1000671f, +0.0584362f,
  -0.2933803f, -0.2053482f, +0.0235683f, +0.2546756f, +0.3240048f, +0.3411250f, -0.2613553f, +0.0057342f,
  +0.1111123f, -0.2452423f, -0.0923295f, +0.3097794f, -0.1452435f, +0.0425848f, +0.0148673f, +0.0933083f,
  +0.3346554f, +0.1003408f, +0.0364644f, +0.0126093f, -0.1029411f, -0.0893724f, -0.0227440f, +0.0055156f,
  +0.0093249f, +0.0810194f, -0.0530621f, +0.2585332f, -0.2458514f, -0.0538975f, +0.1010026f, +0.1417852f,
  -0.4907717f, -0.4813223f, -0.0916323f, -0.0661728f, -0.1982979f, -0.1133234f, +0.2104254f, -0.0496856f,
  +0.0901414f, -0.3743977f, +0.1708894f, -0.2006685f, -0.4171929f, -0.0666033f, +0.1637639f, +0.4225586f,
  +0.0704894f, -0.4998235f, +0.1823507f, -0.1477036f, +0.0683672f, -0.2368143f, -0.0008087f, +0.1876914f,
  +0.4131260f, +0.0903594f, -0.0596162f, +0.3203877f, -0.0507088f, -0.0204757f, +0.1094506f, +0.1507806f,
  +0.4817106f, -0.1025500f, +0.0134863f, +0.2533400f, -0.0061008f, +0.0824096f, -0.1042236f, +0.3005331f,
  -0.1568115f, -0.0483105f, +0.0789879f, +0.1949796f, +0.1110091f, -0.4125974f, -0.0459458f, -0.0909763f,
  +0.1538397f, -0.0527231f, +0.2545750f, -0.2955528f, -0.0805362f, +0.0140770f, +0.0552615f, +0.1009027f,
  -0.0568717f, +0.3609041f, -0.0231483f, +0.2608482f, -0.0614231f, +0.0148887f, -0.1655344f, +0.0953220f,
  +0.0841129f, -0.0071572f, -0.4266867f, +0.0553848f, -0.0526515f, -0.1291112f, -0.1790477f, -0.2714598f,
  -0.0463213f, -0.3405329f, +0.1639366f, -0.2042241f, +0.0259287f, -0.3324341f, +0.1705526f, +0.0560695f,
  +0.4221248f, -0.1122632f, -0.1490673f, -0.1944336f, -0.2721678f, -0.2675239f, -0.0056343f, +0.1863688f,
  +0.3094418f, +0.0019850f, +0.0647936f, -0.1205065f, -0.0495965f, -0.2159520f, +0.0272914f, -0.0701550f,
  -0.4043170f, -0.1019041f, +0.2024212f, -0.0460459f, +0.2096997f, -0.5155426f, +0.2340729f, -0.1584233f,
  -0.1768826f, -0.1025338f, -0.1055436f, -0.1638732f, +0.2864487f, -0.3575456f, +0.1928758f, -0.1539551f,
  -0.1182548f, +0.0037076f, +0.0113793f, -0.1009487f, +0.3396632f, -0.2400848f, -0.0147106f, +0.0739602f
);

const float biases[4] = float[4](
  -0.0570595f, -0.1331624f, +0.0592088f, +0.0833299f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer36 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2138773f, +0.0560393f, -0.1645316f, -0.0166195f, -0.1745922f, +0.1454517f, +0.0037452f, -0.2232049f,
  -0.0892244f, +0.3171379f, -0.2897991f, +0.0786387f, +0.0738674f, +0.2607547f, +0.0575540f, -0.3025589f,
  -0.4196979f, +0.4107759f, -0.3697226f, +0.3304881f, +0.0461473f, +0.0373418f, +0.1852329f, +0.0079130f,
  +0.3254243f, +0.4847089f, +0.1726860f, +0.3200873f, -0.2285806f, +0.3576437f, -0.0197047f, +0.0074708f,
  -0.0425709f, -0.1464227f, +0.1019223f, +0.0598260f, -0.0794742f, +0.5738476f, -0.1306802f, -0.0901231f,
  -0.1452064f, -0.0970097f, -0.2464053f, -0.5133995f, -0.5044275f, +0.4871379f, -0.1001999f, -0.0690699f,
  +0.2112087f, +0.0739547f, +0.2444115f, +0.1581484f, +0.0250382f, +0.0340652f, -0.2411938f, +0.0116255f,
  -0.1760876f, +0.8628567f, -0.0384459f, +0.1399662f, +0.4038073f, +0.0829381f, -0.1067461f, -0.0240206f,
  -0.3409417f, +0.1589554f, +0.0025038f, +0.1917195f, +0.0908135f, +0.3765440f, +0.0428226f, -0.0282625f,
  -0.1166786f, -0.0096047f, -0.3907057f, -0.2377789f, +0.0667078f, -0.3747659f, +0.1615813f, +0.0995625f,
  -0.5259826f, -0.4321556f, -0.0732678f, -0.1863995f, -0.2971065f, -0.0065591f, +0.0426475f, +0.5401127f,
  +0.1907010f, +0.2882784f, -0.0700011f, +0.1557054f, -0.4543581f, +0.1907409f, +0.3669636f, +0.2742475f,
  -0.0564779f, +0.5309919f, -0.1776264f, -0.3333791f, -0.4308146f, +0.3940073f, -0.0701204f, -0.0089045f,
  +0.1825082f, -0.3250046f, +0.1733001f, -0.1412908f, -0.2080230f, -0.3100663f, +0.1258510f, +0.4474682f,
  +0.0661188f, -0.3448171f, -0.0987734f, -0.1633629f, -0.5478631f, -0.2745988f, +0.3801580f, +0.1007995f,
  -0.0966957f, +0.2649317f, +0.1956917f, -0.1086236f, +0.0554804f, -0.2186198f, -0.1027592f, +0.1017200f,
  +0.1101775f, +0.2082955f, +0.1725060f, -0.0477931f, +0.1341643f, -0.2867481f, +0.1412412f, +0.3352627f,
  -0.1843812f, +0.3671200f, -0.0728138f, +0.1690906f, -0.2511121f, +0.3960118f, -0.1606200f, -0.2005959f,
  +0.0919354f, +0.1078574f, -0.1692163f, +0.1871533f, -0.0744234f, +0.2745847f, -0.1814865f, +0.0380905f,
  +0.3450808f, -0.1423200f, -0.0173832f, +0.2095092f, +0.1240460f, +0.0023560f, +0.0093208f, -0.1239409f,
  -0.2458928f, -0.1814693f, -0.0236019f, -0.2199838f, +0.0954160f, +0.2529641f, -0.1649897f, -0.1580786f,
  -0.0080874f, -0.1802721f, +0.1099327f, -0.1029582f, -0.1046324f, +0.0555794f, +0.0389186f, -0.1061296f,
  +0.3064374f, +0.3781649f, +0.0206686f, +0.3024161f, +0.2845750f, +0.1532481f, -0.0914088f, -0.0207023f,
  -0.2206717f, +0.1472387f, -0.3830831f, +0.1183967f, +0.2471634f, +0.1110684f, +0.1227655f, -0.0744532f,
  +0.1754245f, +0.1046165f, +0.3263783f, -0.2025520f, -0.0959172f, -0.0362871f, -0.1830857f, +0.1056752f,
  +0.2008220f, +0.0403113f, +0.1034284f, -0.0796271f, +0.0600180f, +0.1980385f, -0.2653282f, -0.0543574f,
  -0.1636461f, +0.0779045f, +0.1394252f, +0.3090102f, +0.1882440f, +0.4369386f, -0.2239060f, -0.0690446f,
  +0.1339522f, +0.5690767f, +0.2078131f, +0.0600672f, +0.0695078f, +0.1929124f, +0.0779352f, -0.1192694f,
  -0.0787925f, +0.5473804f, -0.3335365f, -0.0323762f, +0.2108371f, +0.1168055f, -0.0613341f, +0.3970675f,
  -0.3042541f, -0.3004366f, +0.0359204f, +0.3304530f, +0.1445656f, -0.2940672f, +0.0592414f, +0.2234661f,
  -0.2370764f, -0.1658507f, -0.0246216f, +0.0116164f, -0.2263151f, -0.0295945f, -0.0867975f, +0.0871258f,
  -0.0535430f, +0.1217318f, -0.5373959f, +0.0427376f, -0.5088417f, +0.2631004f, +0.0065217f, +0.3672376f,
  -0.1406816f, +0.1742508f, -0.1842001f, +0.2182227f, -0.3381982f, +0.0864792f, +0.0758237f, +0.2137388f,
  -0.4625978f, +0.4250917f, +0.1905939f, -0.0523169f, +0.0964485f, -0.0401281f, -0.1477167f, +0.0051206f,
  +0.1040452f, +0.1401110f, +0.0815972f, -0.1960182f, +0.0204008f, +0.2159933f, +0.0322178f, +0.1746500f,
  +0.2604959f, +0.0261673f, -0.1224070f, -0.3304102f, +0.0049472f, +0.0629471f, -0.0099813f, -0.0198393f
);

const float biases[4] = float[4](
  +0.0421120f, -0.0035644f, -0.0975032f, -0.0744266f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer37 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2103018f, +0.0766320f, +0.3597216f, +0.1580222f, -0.0745914f, -0.0002494f, -0.0455970f, +0.0620738f,
  +0.3507041f, -0.0499209f, -0.0680408f, +0.1622975f, +0.0560493f, -0.0327917f, +0.1259168f, -0.1872236f,
  +0.1004067f, +0.0176238f, -0.4796344f, -0.1220191f, +0.1012868f, +0.0628087f, +0.2881625f, +0.0025541f,
  -0.0566651f, -0.0729856f, +0.2003717f, +0.3613740f, +0.0733112f, -0.2390429f, +0.1099593f, +0.3692249f,
  +0.0565018f, -0.5246213f, -0.3425877f, +0.0886271f, -0.0261044f, -0.0489261f, -0.0156032f, -0.3029774f,
  +0.0147894f, +0.4375782f, -0.5337592f, -0.3528723f, +0.0251125f, -0.2454259f, +0.0215343f, +0.1575878f,
  -0.1563080f, -0.0030582f, +0.2961217f, -0.0884045f, +0.2063679f, -0.4581605f, -0.0255355f, +0.1802203f,
  +0.0327485f, -0.1534835f, +0.2808151f, -0.0263571f, -0.1161711f, +0.1069179f, -0.2606394f, -0.4033891f,
  +0.0687337f, +0.1487059f, -0.2931457f, -0.1698414f, +0.0932415f, +0.1855405f, +0.0639493f, -0.0334592f,
  +0.1404382f, -0.0638807f, +0.0956877f, +0.1273678f, +0.1579966f, +0.4079027f, -0.0779966f, +0.0544722f,
  -0.2161315f, +0.0037294f, -0.2010574f, +0.1059956f, +0.1550134f, +0.1937672f, +0.1269329f, +0.0716781f,
  -0.0486876f, +0.0726482f, +0.1291512f, +0.0299073f, +0.2428445f, +0.1947745f, +0.2165047f, -0.0856281f,
  +0.2558900f, -0.2165129f, -0.0060690f, -0.1334638f, +0.0464638f, +0.0838725f, +0.2264148f, -0.5213761f,
  +0.1327441f, -0.0577934f, -0.0254359f, -0.1138971f, -0.2851071f, -0.5382956f, +0.1591567f, +0.6319962f,
  +0.0001272f, -0.1184253f, +0.2027477f, -0.0194880f, +0.0059908f, -0.1092487f, +0.1402170f, +0.1970834f,
  +0.2867326f, -0.2261408f, +0.1055050f, -0.0817285f, +0.5406953f, +0.2093945f, +0.0544052f, -0.0799979f,
  +0.0430016f, +0.3942372f, -0.0705556f, +0.2379985f, +0.2040650f, -0.6929176f, -0.0718870f, +0.5106204f,
  -0.0276168f, -0.4831539f, +0.1584645f, +0.3015652f, +0.0535059f, -0.0021721f, +0.0765643f, +0.2663927f,
  -0.1760723f, -0.1561169f, +0.0235990f, +0.1315821f, +0.2297074f, -0.1781644f, -0.0305041f, -0.0672668f,
  -0.0705042f, -0.1322409f, +0.2565684f, -0.3942889f, +0.1636545f, -0.1243566f, +0.1497885f, -0.0077958f,
  -0.0935426f, -0.0101950f, +0.1622975f, -0.0333801f, +0.1786786f, +0.0676969f, +0.1624227f, -0.3332261f,
  +0.0647741f, -0.1508550f, -0.1749407f, +0.2862107f, -0.4063855f, +0.2974522f, +0.3035241f, -0.2241834f,
  +0.0112710f, +0.3889261f, +0.5347646f, -0.4557694f, +0.1489596f, -0.1071756f, +0.0625772f, -0.2284505f,
  -0.1332998f, +0.1266278f, -0.2775055f, -0.4059904f, -0.0227081f, +0.2071214f, -0.0334161f, -0.1410638f,
  +0.0816493f, +0.1849537f, +0.2159848f, +0.0228986f, -0.0834290f, +0.2136310f, -0.0829455f, -0.2671714f,
  +0.0631145f, +0.3891067f, +0.1155767f, -0.0433593f, -0.0740458f, -0.0283926f, -0.0321927f, -0.0385020f,
  +0.1537915f, +0.3519642f, -0.1076837f, +0.0652971f, -0.0293349f, +0.0015200f, -0.1210967f, -0.2039850f,
  -0.1191817f, -0.3409736f, +0.1549394f, -0.1431632f, -0.0613122f, -0.0508834f, -0.1435942f, +0.1349110f,
  +0.0565784f, -0.0516212f, -0.0051792f, +0.4224428f, -0.0367861f, +0.0483923f, +0.2471222f, +0.2135724f,
  -0.2344277f, -0.0092406f, +0.0652858f, +0.0223219f, +0.0806258f, +0.2040001f, +0.2454266f, -0.0714119f,
  -0.0131532f, +0.1839377f, +0.3100318f, +0.1405507f, +0.0119635f, -0.0885219f, -0.1204277f, +0.2052978f,
  +0.1115079f, +0.7256664f, +0.4583309f, -0.0032703f, -0.2395191f, +0.2222998f, -0.0819387f, -0.1799299f,
  -0.0139053f, -0.2570474f, +0.2895633f, +0.0335861f, +0.1697125f, +0.1296777f, +0.2018897f, +0.0905805f,
  +0.0578539f, +0.2215875f, -0.0543639f, +0.0270634f, +0.1250928f, -0.0898029f, -0.4689529f, +0.1920418f,
  +0.1903318f, +0.2167763f, +0.0664975f, -0.2615051f, -0.1320744f, +0.1683618f, -0.1056215f, -0.0258169f,
  -0.0804212f, -0.2509168f, +0.1414990f, -0.1747556f, +0.0019876f, +0.1551124f, -0.2079194f, -0.1131526f
);

const float biases[4] = float[4](
  -0.0331717f, -0.2044231f, +0.1170768f, -0.0528141f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer37 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2149038f, -0.2140079f, +0.6176015f, +0.0655951f, -0.0068174f, -0.1042970f, -0.2067446f, +0.3553193f,
  +0.0640047f, +0.2991753f, -0.0490743f, -0.0426201f, +0.2197572f, +0.1889099f, +0.0541755f, -0.0694173f,
  -0.1009718f, -0.1283470f, -0.0219127f, -0.2402683f, +0.2283118f, +0.1489283f, +0.3947048f, -0.2080201f,
  +0.1135159f, +0.2322443f, +0.0070158f, +0.1882672f, -0.1454769f, -0.1867967f, -0.1391434f, +0.3388978f,
  +0.1612112f, +0.0052094f, +0.2043624f, +0.3746122f, +0.4168142f, +0.3473606f, +0.3325039f, -0.2799900f,
  -0.2419950f, -0.1175685f, +0.1718587f, +0.0177969f, +0.1280938f, +0.1581556f, +0.1686306f, -0.0328300f,
  +0.0845861f, +0.0766797f, +0.1267234f, +0.0621647f, -0.2146635f, -0.1425924f, -0.0093382f, +0.1880250f,
  +0.0919964f, -0.0314657f, -0.1180067f, -0.1099318f, -0.2613791f, -0.2778265f, -0.1293023f, -0.2070113f,
  -0.2365034f, -0.1937916f, -0.0824636f, -0.0884668f, +0.0211407f, +0.2335579f, -0.1231640f, -0.1207525f,
  +0.1521251f, +0.0688235f, -0.0931230f, -0.3326130f, -0.0798479f, -0.1263462f, -0.0826579f, -0.0841335f,
  -0.0596609f, -0.1065854f, -0.0275561f, -0.2610930f, +0.0811397f, -0.0437540f, -0.4200935f, +0.2319742f,
  +0.0224003f, -0.0864153f, -0.1529913f, +0.1264782f, +0.0944865f, +0.1730704f, -0.0901438f, +0.0201674f,
  -0.0406331f, +0.3149961f, -0.2716304f, +0.2424247f, +0.3019701f, +0.1458308f, -0.1515474f, +0.1815666f,
  +0.0032781f, -0.5333657f, -0.6980277f, +0.1380512f, -0.1882077f, +0.4728532f, -0.4111850f, +0.1309520f,
  -0.0752961f, -0.2407402f, -0.4332010f, +0.2987753f, -0.2338421f, +0.3937605f, -0.0554875f, -0.1465257f,
  +0.2237524f, +0.1561721f, -0.0125906f, -0.0766925f, -0.1757325f, +0.0022855f, -0.0266481f, +0.1038324f,
  +0.0789751f, -0.1892214f, -0.1232720f, +0.2645704f, -0.3775336f, +0.1317618f, -0.2038174f, +0.3700730f,
  +0.1356893f, +0.2679924f, +0.3137409f, -0.1582823f, -0.2150146f, -0.0207471f, +0.0748490f, -0.0327298f,
  +0.0968498f, -0.4142307f, -0.0356963f, +0.0685055f, +0.2028565f, +0.2304186f, -0.0814945f, -0.1513018f,
  +0.0856205f, +0.1902827f, -0.2596346f, +0.1169580f, -0.0665206f, +0.1591575f, +0.1175533f, -0.0801215f,
  +0.0799994f, -0.0764349f, +0.0108452f, -0.1905420f, +0.1309931f, +0.0639428f, +0.1343629f, +0.2383985f,
  +0.1195572f, -0.7145460f, -0.2431125f, +0.2712926f, +0.0228798f, +0.1939564f, -0.2742338f, -0.5906914f,
  +0.1648323f, +0.3951751f, -0.6047028f, -0.0361907f, +0.0529892f, -0.1572946f, +0.1932958f, -0.0698727f,
  +0.2664070f, +0.2830034f, -0.0861217f, -0.0854776f, +0.0091281f, -0.0739546f, +0.3631676f, +0.1584100f,
  -0.0354852f, -0.4076049f, -0.1016457f, +0.0120250f, +0.1940209f, +0.1066804f, +0.0299688f, -0.2513960f,
  -0.1154205f, +0.1297379f, +0.0100421f, +0.0694425f, -0.0805834f, -0.0672013f, +0.0630930f, -0.2772833f,
  +0.4374530f, +0.1122463f, +0.1594204f, +0.3390540f, +0.0441834f, -0.0800650f, -0.2558427f, +0.0127247f,
  -0.1440454f, -0.0713830f, -0.1748041f, +0.0506331f, -0.0398834f, +0.0418566f, -0.0099945f, -0.0171361f,
  +0.2934269f, +0.2580041f, -0.1257461f, +0.0729685f, -0.1010872f, +0.0796376f, -0.2202314f, +0.1164653f,
  +0.0803975f, -0.0974402f, -0.0372463f, -0.1876787f, +0.1026290f, -0.0516401f, -0.0958197f, +0.1283486f,
  +0.0569310f, +0.0999527f, -0.0413875f, -0.0811387f, -0.1345842f, +0.0650589f, +0.0204666f, -0.1051105f,
  +0.0099392f, -0.0938798f, -0.1753141f, -0.1407816f, -0.1327140f, +0.4013002f, +0.2373607f, +0.0628037f,
  +0.1061916f, -0.0591988f, +0.0042341f, -0.2760919f, +0.4847873f, +0.2930252f, +0.1236823f, -0.0667367f,
  -0.0003615f, -0.1784648f, +0.1997032f, -0.0616951f, +0.1481008f, -0.2085825f, -0.1101973f, -0.0972209f,
  +0.2581725f, +0.4019324f, -0.2105116f, -0.3518572f, -0.0799228f, -0.3706087f, +0.1564356f, +0.3484837f,
  +0.0378215f, -0.0287044f, -0.0267044f, -0.2366327f, +0.1004386f, -0.1756295f, -0.0938462f, +0.2587730f
);

const float biases[4] = float[4](
  -0.0108134f, -0.0136096f, -0.0961210f, -0.1789176f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer38 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0807103f, +0.1461061f, -0.2869758f, +0.0722100f, -0.0199508f, +0.1591366f, -0.0572450f, -0.1189587f,
  +0.1036023f, -0.2995376f, +0.2356671f, -0.1381782f, +0.0303672f, +0.4133795f, -0.2152701f, +0.0626552f,
  +0.1254317f, -0.0310772f, -0.0274134f, -0.1056921f, -0.0442048f, -0.2409835f, +0.0569999f, -0.0150028f,
  +0.2877142f, -0.0141275f, +0.1109248f, -0.3338106f, +0.0132356f, +0.1333823f, +0.1681164f, -0.0672504f,
  -0.3451589f, +0.0551351f, -0.2166108f, -0.1649387f, +0.0050701f, +0.0283051f, +0.1116958f, +0.0528916f,
  +0.1438623f, +0.1505481f, -0.0149057f, +0.0582326f, +0.0354374f, -0.1294278f, -0.0848886f, -0.0285908f,
  +0.0414375f, +0.0386631f, +0.0059689f, -0.2339005f, +0.0109516f, -0.0455355f, +0.1027875f, -0.1359353f,
  -0.1176550f, +0.2024720f, +0.2349102f, +0.0940381f, -0.3547208f, -0.0882665f, -0.0781197f, -0.0808942f,
  -0.1669959f, -0.0048915f, -0.0354413f, -0.2734153f, -0.0097766f, -0.2696282f, -0.0019258f, +0.0496798f,
  -0.0185728f, +0.1957810f, +0.0140676f, +0.0228276f, +0.2653732f, -0.3351878f, -0.1094376f, -0.0209534f,
  +0.0273627f, -0.0215089f, +0.2168566f, +0.1452177f, -0.0322234f, +0.0623982f, +0.2692971f, -0.4124215f,
  -0.0127523f, +0.1164529f, +0.2060923f, -0.2145266f, -0.3018920f, +0.2710993f, +0.1188673f, +0.3424045f,
  +0.0394330f, +0.2230535f, +0.0603127f, +0.3330569f, +0.1145714f, -0.2426878f, -0.2092726f, +0.0759421f,
  +0.1227204f, +0.3078170f, +0.4751331f, -0.1254330f, -0.0818856f, +0.4199216f, +0.5232439f, +0.1332821f,
  +0.2738382f, +0.1840193f, +0.2235888f, -0.2087201f, -0.0866992f, -0.0987387f, -0.4280950f, -0.1332559f,
  +0.1150189f, +0.0514694f, -0.0398156f, -0.1158079f, -0.2831548f, +0.1377733f, -0.2171402f, -0.0140048f,
  +0.1321034f, +0.0021367f, +0.4186833f, +0.2894467f, -0.3719090f, +0.1629059f, +0.2079737f, -0.2709713f,
  -0.0276516f, +0.1107337f, +0.2709276f, -0.0635214f, +0.0255425f, -0.0249667f, +0.2039278f, -0.2074236f,
  -0.2824015f, +0.2727654f, +0.0244978f, -0.1878463f, +0.0551366f, +0.1439311f, -0.1929972f, +0.0321375f,
  -0.0909915f, +0.3665180f, +0.1230346f, +0.0056634f, -0.0907834f, +0.1607764f, -0.2352665f, +0.1212160f,
  -0.0416214f, -0.0611114f, -0.1550554f, -0.0185692f, -0.2666112f, +0.0543792f, -0.0625805f, -0.0047939f,
  +0.0407064f, +0.1736946f, +0.1883288f, -0.1481982f, +0.0584674f, +0.3330476f, +0.3452897f, +0.3900698f,
  +0.0196128f, +0.0914576f, -0.2973360f, -0.2580370f, -0.1777770f, +0.0771838f, +0.3000696f, +0.0149307f,
  -0.3500535f, +0.1238179f, -0.0820034f, -0.3919267f, +0.0393933f, -0.0814900f, +0.1223528f, -0.1631236f,
  +0.1906090f, +0.1556750f, -0.1587431f, -0.3787290f, +0.2130218f, +0.2443261f, -0.3057505f, -0.0399673f,
  +0.1007749f, +0.1736596f, -0.4208886f, -0.2290412f, +0.1588195f, -0.3314132f, +0.2530125f, +0.0746409f,
  -0.2023085f, +0.0172439f, +0.0364817f, -0.1159111f, -0.1127576f, +0.0316633f, +0.4191970f, -0.0473929f,
  -0.0923184f, +0.1127770f, +0.1742118f, +0.0153030f, +0.3997830f, -0.1028410f, +0.0205503f, -0.0697960f,
  +0.0349525f, -0.1004299f, +0.1966150f, +0.0712023f, +0.3104295f, -0.1896084f, +0.0060300f, +0.0792606f,
  -0.0231448f, -0.0462676f, +0.0268467f, -0.0339287f, -0.0611094f, +0.1608777f, +0.1462819f, +0.0256187f,
  -0.1072562f, +0.2548601f, +0.3976002f, -0.0599383f, -0.0078852f, -0.3263301f, -0.1077811f, +0.1942065f,
  -0.1300144f, +0.3951864f, +0.3370858f, +0.0037935f, +0.1148717f, -0.1479173f, -0.3927399f, +0.0329808f,
  +0.0580593f, -0.0233295f, -0.1021927f, -0.2604467f, -0.0073155f, -0.2614737f, +0.0614219f, +0.1763925f,
  -0.2484978f, +0.2004567f, -0.0603904f, -0.3317408f, +0.1925831f, -0.0362280f, +0.3919235f, +0.0304596f,
  -0.5182590f, -0.2422468f, +0.2205666f, -0.0648487f, +0.2296366f, +0.1015789f, +0.1487632f, -0.0862591f,
  -0.1503512f, -0.0566757f, -0.0565493f, -0.0151825f, +0.0399679f, +0.0863187f, -0.1245896f, -0.0605408f
);

const float biases[4] = float[4](
  -0.0108456f, -0.0474896f, -0.0600008f, -0.0004569f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer38 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0216559f, +0.0720573f, +0.1115261f, +0.1363465f, +0.0557250f, +0.0590320f, +0.0055808f, -0.1423465f,
  +0.3249865f, -0.0970349f, -0.1669749f, +0.1809648f, +0.1993089f, +0.1722976f, -0.0401558f, -0.3542798f,
  +0.0586291f, -0.2251087f, +0.2529868f, -0.1106722f, +0.1617404f, +0.1924266f, -0.1915081f, -0.1917202f,
  +0.1444465f, -0.1968262f, +0.0186053f, +0.0830238f, -0.0170615f, +0.1895329f, -0.1154613f, -0.3543563f,
  +0.3244121f, -0.0167408f, -0.3736825f, +0.0047255f, -0.2249815f, -0.0370385f, +0.3539367f, -0.2019680f,
  +0.0790597f, -0.2034852f, +0.0879499f, -0.2110345f, +0.0036778f, -0.0594295f, +0.3561335f, -0.1889372f,
  +0.1918686f, -0.1681480f, -0.2481115f, +0.3666816f, -0.0962512f, -0.0316137f, -0.0978360f, -0.1611181f,
  +0.3873797f, -0.2912513f, +0.0081799f, +0.2588574f, -0.3202811f, -0.1612666f, +0.0149006f, +0.0345819f,
  +0.0460721f, -0.0981967f, +0.1693546f, +0.0469017f, -0.3042158f, -0.2667261f, +0.1710697f, +0.0336975f,
  -0.0999621f, +0.3202276f, -0.0206917f, +0.0136590f, -0.2658551f, -0.0006796f, +0.1681718f, -0.0529484f,
  +0.2765064f, +0.1529980f, -0.4953866f, -0.0419368f, -0.0119233f, +0.0656873f, -0.0202443f, +0.1581837f,
  +0.2583948f, +0.0908566f, -0.2493417f, +0.1414527f, -0.0347000f, -0.0933962f, +0.1588940f, -0.0226895f,
  +0.0391336f, +0.1213069f, -0.1212614f, -0.2413174f, -0.0167743f, -0.5273589f, -0.5337037f, +0.1313580f,
  +0.1286550f, +0.2096298f, -0.0184688f, +0.1992837f, +0.0162800f, -0.0197520f, +0.5290202f, -0.4639748f,
  +0.0953248f, +0.0986019f, -0.0348821f, +0.3104993f, +0.1857514f, -0.1882167f, +0.4130147f, -0.1452248f,
  +0.3235896f, -0.1374798f, +0.2995640f, -0.3115544f, -0.2400171f, -0.0901725f, +0.2990620f, +0.1374912f,
  +0.3206333f, -0.2225161f, +0.2235559f, -0.0772024f, -0.4241308f, +0.1589360f, +0.1914717f, -0.1237901f,
  +0.0377739f, -0.1028833f, +0.0245838f, +0.1353392f, +0.0246220f, -0.0588908f, +0.1518314f, +0.0888029f,
  -0.0782351f, +0.0067657f, +0.1738723f, +0.2716563f, +0.1420147f, -0.3102637f, +0.0484660f, -0.0525526f,
  +0.1317689f, +0.1880513f, -0.1729625f, +0.2811819f, +0.2598727f, +0.1189735f, +0.3045498f, +0.0673642f,
  +0.0208053f, +0.0098817f, +0.1639873f, +0.2351131f, +0.2009228f, +0.3890066f, +0.0722610f, -0.0511180f,
  +0.2127055f, +0.0823878f, +0.0146501f, +0.2498267f, +0.0838220f, -0.1311901f, +0.0532870f, +0.3289820f,
  +0.1442028f, -0.6388654f, +0.0646551f, +0.0158661f, -0.1878272f, -0.0068753f, +0.1181992f, -0.1124401f,
  +0.0062726f, -0.1609733f, -0.0768142f, +0.1944183f, +0.1588189f, +0.0202176f, -0.1028966f, -0.0304494f,
  +0.0913965f, -0.1540478f, -0.0636095f, +0.3761996f, -0.0630822f, -0.0087410f, +0.2128395f, -0.1497522f,
  +0.0522592f, -0.2682271f, -0.1281335f, +0.2398518f, -0.0581450f, +0.1526907f, +0.3688198f, +0.1637234f,
  +0.2339495f, -0.1795670f, -0.0971443f, +0.1236150f, +0.0191132f, -0.0685047f, -0.1017206f, +0.0310169f,
  +0.1864553f, -0.0330537f, -0.3636344f, -0.0399120f, -0.0615007f, -0.3799640f, +0.0304790f, -0.1310662f,
  +0.1401402f, -0.2750712f, -0.1186143f, -0.1468482f, -0.2530712f, -0.2135811f, +0.0271369f, -0.3803572f,
  -0.0778165f, -0.0742923f, +0.0757418f, -0.3071425f, -0.0326726f, -0.1996359f, -0.2558611f, +0.1303479f,
  +0.1141599f, +0.0348714f, -0.0328442f, -0.0506446f, +0.0179322f, +0.0926076f, +0.3573523f, +0.2081145f,
  +0.0055352f, +0.0787669f, +0.3091748f, +0.2403542f, +0.0889409f, +0.2000331f, -0.0190777f, -0.0823719f,
  -0.0116325f, +0.1102307f, -0.1156731f, -0.2424513f, +0.2608157f, +0.0479764f, -0.1924033f, +0.0979873f,
  +0.0972172f, +0.0223119f, +0.0080452f, +0.2110231f, +0.0462129f, -0.1595427f, -0.0111150f, -0.1318147f,
  -0.1813908f, -0.0321469f, +0.0609589f, -0.1543737f, -0.1613387f, -0.4357233f, -0.1891632f, -0.0888739f,
  -0.2889166f, -0.0501574f, -0.0927572f, -0.0119192f, +0.0979655f, +0.1054184f, -0.0199312f, +0.0771448f
);

const float biases[4] = float[4](
  +0.0174085f, +0.0211024f, -0.0275291f, -0.0227091f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer39 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0480746f, -0.0463101f, -0.0329216f, +0.1302083f, -0.1696696f, +0.0663022f, -0.2367853f, +0.0471514f,
  -0.0444210f, -0.0119743f, +0.1793114f, -0.0167377f, -0.1876009f, -0.2654494f, +0.0655394f, -0.0741360f,
  +0.0537018f, -0.0115943f, -0.4678083f, +0.2281040f, +0.0469342f, +0.1151860f, +0.2885574f, -0.2418739f,
  -0.0083558f, +0.2006448f, +0.1100584f, +0.1759037f, -0.1775227f, -0.0255756f, -0.0216968f, +0.4872485f,
  -0.2222266f, -0.2992763f, -0.0548210f, -0.0163509f, -0.1561414f, +0.2805122f, -0.1031755f, -0.5153837f,
  +0.3151246f, +0.0346280f, -0.2174389f, +0.0180333f, +0.1254482f, -0.3615460f, -0.0170221f, -0.0297935f,
  +0.1036558f, +0.1348314f, +0.1882027f, +0.2596092f, -0.3439113f, -0.1669896f, -0.2736496f, +0.2911784f,
  -0.0918207f, -0.3426457f, +0.1710211f, +0.1629770f, -0.0888147f, +0.0242963f, +0.1072599f, -0.3751572f,
  +0.0541429f, +0.1169896f, -0.0218308f, +0.0064126f, +0.0333530f, -0.2937808f, -0.1157905f, -0.1754189f,
  +0.2363665f, -0.4041038f, -0.0605442f, +0.1194136f, -0.0493503f, +0.1012310f, -0.2696463f, +0.0184204f,
  +0.2675251f, +0.0787555f, -0.0409505f, +0.3468013f, -0.1113749f, +0.2035734f, +0.1226080f, -0.2599516f,
  +0.0171506f, +0.1397399f, -0.1107527f, -0.0758858f, -0.1503383f, -0.4462163f, +0.0897096f, -0.1469777f,
  +0.1181910f, -0.0775764f, -0.2108072f, -0.0035691f, +0.0834095f, +0.0341004f, -0.4571066f, -0.0661274f,
  +0.2293795f, +0.0887498f, -0.0307866f, +0.0823801f, +0.2470815f, +0.3369867f, +0.1289160f, -0.1509059f,
  +0.0835433f, -0.2934911f, +0.0868686f, -0.2234799f, -0.2504184f, -0.4460469f, -0.1650251f, +0.3296727f,
  +0.2644655f, +0.2368127f, -0.2014407f, +0.0037358f, +0.1638437f, +0.1868362f, -0.1045664f, -0.0149834f,
  +0.0000232f, +0.3089750f, -0.0183763f, +0.0641766f, -0.2498592f, +0.0358177f, -0.0539688f, -0.0460534f,
  -0.0160967f, +0.0644732f, +0.1636184f, -0.0188407f, +0.0672911f, -0.3540504f, -0.3732106f, -0.0499951f,
  +0.0677080f, +0.0256572f, +0.1423538f, +0.1202486f, +0.2193487f, +0.5582413f, +0.2736916f, +0.5453038f,
  -0.1183800f, -0.2977407f, +0.4667185f, -0.0679985f, +0.3246114f, -0.1058391f, -0.2024032f, -0.1603415f,
  -0.0122948f, +0.0986546f, -0.0665939f, +0.1216694f, -0.2656232f, -0.0473803f, -0.0978149f, +0.0347739f,
  +0.3514398f, +0.4940569f, +0.0789793f, -0.1365703f, -0.1688018f, +0.2372444f, +0.2787462f, +0.4493771f,
  -0.1669812f, -0.6633471f, -0.0952278f, -0.2824876f, +0.2259635f, +0.2889060f, -0.2940169f, -0.0844554f,
  +0.1484337f, +0.2937086f, +0.1326048f, +0.1364522f, -0.1620821f, -0.1808889f, -0.2430671f, +0.0840527f,
  +0.2755916f, +0.2577412f, +0.0229012f, -0.0916063f, +0.3465076f, +0.1722321f, -0.1474108f, +0.1545707f,
  -0.2028290f, -0.2304976f, +0.0741652f, +0.0624541f, +0.0339707f, +0.1672266f, +0.2767918f, +0.2648153f,
  -0.1795363f, +0.2282263f, +0.1081747f, +0.1388468f, -0.1012622f, +0.0273951f, -0.1998016f, -0.1917874f,
  +0.1559536f, -0.0320966f, +0.1447716f, +0.1767832f, +0.0098073f, -0.0800385f, -0.2075341f, -0.0560306f,
  +0.0049159f, +0.1609576f, +0.3117575f, -0.1268199f, -0.0640435f, +0.1724067f, -0.1378590f, -0.2140604f,
  -0.1097035f, +0.3572222f, +0.3823191f, -0.1070427f, -0.1986676f, +0.2055817f, -0.1633356f, -0.0338628f,
  -0.0255590f, -0.1430550f, +0.2120976f, -0.2163428f, -0.0884949f, -0.2510449f, -0.0305903f, +0.2079892f,
  +0.1035244f, -0.3474671f, +0.0639385f, -0.3103696f, -0.0384962f, +0.1105994f, -0.1215646f, -0.2676491f,
  +0.0498145f, +0.1984637f, +0.2489296f, +0.3050945f, -0.0296345f, -0.0319851f, -0.2062578f, -0.3406682f,
  +0.1057577f, +0.0289232f, -0.1097474f, +0.0882061f, +0.2930681f, +0.1444474f, +0.2711559f, -0.1585774f,
  -0.1547898f, -0.0493328f, -0.0646644f, -0.2198590f, -0.0072839f, -0.0159510f, +0.2156484f, -0.1561068f,
  +0.0551401f, +0.0775019f, +0.0987813f, +0.1355000f, -0.0778766f, -0.0567550f, -0.1713470f, +0.0572660f
);

const float biases[4] = float[4](
  +0.0236634f, -0.1406612f, -0.0850175f, +0.0750288f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer39 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0203481f, +0.2848889f, -0.2649282f, -0.0454286f, +0.0920216f, -0.0805641f, -0.0534156f, -0.0964736f,
  -0.1162351f, +0.0683522f, -0.2572605f, +0.1177331f, +0.1519840f, -0.3717375f, +0.0738521f, +0.1449786f,
  +0.0941584f, -0.3355423f, -0.1506649f, -0.1988397f, -0.1383584f, -0.1191396f, +0.3061881f, -0.0033174f,
  -0.1019814f, +0.0431711f, +0.2635213f, -0.1657697f, -0.2731248f, -0.1004642f, +0.1760832f, -0.4506327f,
  -0.3304213f, +0.0051417f, +0.2565003f, +0.0405453f, +0.1483912f, +0.2092844f, +0.1013449f, -0.3065214f,
  +0.1859177f, +0.6230119f, -0.1143152f, +0.4247547f, +0.3544995f, -0.1479715f, -0.2132306f, -0.2670471f,
  +0.0181431f, +0.0206000f, +0.0509696f, -0.2371626f, -0.0462968f, +0.1937196f, -0.0658592f, +0.0712103f,
  +0.0640955f, -0.0346886f, +0.1560853f, -0.1548287f, -0.1338917f, +0.1227583f, -0.0425829f, +0.3213943f,
  -0.1069621f, +0.0312634f, +0.0086921f, -0.0508021f, +0.1520305f, +0.1551957f, +0.1525662f, +0.2424341f,
  +0.0481601f, -0.1650269f, -0.2410014f, +0.1532247f, -0.0784347f, -0.0181791f, -0.0301622f, +0.0245714f,
  -0.1754037f, +0.1426769f, +0.0679585f, -0.0932843f, -0.3071739f, +0.1621960f, -0.3943535f, +0.3474010f,
  +0.0069696f, -0.0819166f, +0.1217161f, -0.0245110f, -0.2165870f, +0.1502280f, -0.2600390f, +0.0419384f,
  -0.1423117f, +0.2638668f, -0.0588922f, +0.3753421f, +0.3664928f, +0.2621430f, +0.0308544f, +0.1950365f,
  +0.0703360f, -0.1635409f, -0.0962706f, -0.0672111f, -0.0735979f, +0.3023176f, -0.1207088f, -0.1598563f,
  -0.0187654f, +0.1557482f, +0.3834200f, -0.4662081f, -0.0105907f, +0.2378786f, +0.1180062f, -0.3896639f,
  +0.3219610f, +0.1937947f, +0.2236718f, +0.0963629f, +0.1098464f, -0.0949714f, +0.0410484f, -0.2416866f,
  -0.0850910f, +0.4790232f, +0.3843862f, -0.3894844f, -0.0170112f, -0.2976441f, +0.0915438f, -0.0725232f,
  +0.2604920f, +0.1589111f, +0.5852618f, +0.2004264f, +0.0721829f, -0.8888456f, +0.0466875f, -0.1473654f,
  +0.1214516f, -0.0211127f, -0.0224570f, +0.0936006f, -0.2748974f, +0.1230945f, -0.0691526f, -0.0570869f,
  +0.1245421f, +0.0552274f, +0.1987602f, +0.1392301f, -0.0698979f, +0.0260020f, -0.1504661f, -0.0382311f,
  -0.1415142f, +0.0483134f, +0.3491034f, -0.2515582f, -0.2478082f, +0.1646966f, -0.0256722f, -0.0242948f,
  -0.0120844f, -0.0854134f, -0.1114627f, +0.1869180f, -0.0884688f, -0.1103972f, +0.1511646f, -0.0477193f,
  +0.0169179f, +0.6022239f, +0.2745491f, -0.0965051f, -0.1355455f, -0.1716380f, +0.1141812f, -0.0040022f,
  +0.0570234f, -0.0170803f, +0.2552186f, -0.2616813f, -0.0753742f, -0.1801979f, -0.0757331f, +0.2086087f,
  +0.1055489f, +0.1114854f, -0.0718892f, +0.1329842f, +0.0790882f, -0.2073419f, -0.0758290f, -0.0666658f,
  +0.1146816f, -0.1715485f, -0.1086745f, -0.3968362f, -0.0885641f, -0.0317811f, +0.0432948f, +0.0586896f,
  -0.0075286f, +0.2974271f, +0.4775640f, +0.0740809f, +0.0242274f, -0.0160795f, -0.0391082f, -0.0940506f,
  -0.2660013f, -0.1719308f, +0.1883460f, -0.2483479f, +0.3228503f, -0.3959865f, +0.1201575f, +0.0608028f,
  +0.0029103f, -0.0554006f, +0.2691483f, -0.2417990f, -0.2827320f, +0.0707495f, -0.1615703f, -0.3680475f,
  +0.0597998f, -0.0743201f, +0.2496414f, +0.0862071f, +0.0605858f, +0.3008397f, -0.0809065f, -0.5055283f,
  +0.0618898f, +0.2661302f, -0.2735682f, +0.2868699f, +0.2093555f, -0.0274434f, +0.1361608f, +0.0363218f,
  +0.3201504f, +0.6214482f, +0.0369324f, +0.0310668f, +0.0366614f, -0.1502100f, -0.1436741f, -0.0031426f,
  +0.1721473f, -0.3149276f, +0.2601203f, +0.0345705f, -0.0443346f, -0.5513362f, +0.0877926f, +0.1549876f,
  +0.3032767f, +0.4102699f, +0.2537334f, +0.0482532f, +0.1267551f, +0.0644305f, +0.0595791f, +0.0554410f,
  +0.3879090f, +0.3313254f, -0.1188875f, +0.0240248f, +0.0509495f, -0.4390174f, -0.5341349f, -0.1613550f,
  -0.0188288f, -0.1233600f, +0.1094336f, +0.0380584f, +0.0580974f, +0.1149211f, -0.2440836f, +0.0502158f
);

const float biases[4] = float[4](
  +0.0814198f, -0.0777727f, -0.2262378f, -0.0611335f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer40 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1579916f, +0.3036903f, +0.1905241f, -0.0893499f, +0.0376390f, -0.1279590f, -0.1385284f, +0.0623074f,
  +0.4754763f, +0.2099692f, +0.1410745f, +0.0154920f, -0.1859483f, -0.1595889f, -0.1122875f, -0.3657017f,
  +0.1725360f, -0.0079951f, +0.1766035f, -0.1675728f, +0.0092216f, -0.0408426f, -0.1496488f, -0.0454923f,
  +0.0539534f, +0.1139576f, +0.0680711f, -0.0134846f, -0.3137538f, -0.0648822f, +0.0774591f, +0.1455507f,
  +0.0190183f, +0.2518764f, -0.0749803f, -0.3287899f, +0.4582231f, -0.2579257f, +0.0590029f, +0.0032644f,
  -0.1937583f, -0.0185985f, +0.2564761f, -0.1488045f, +0.2149425f, -0.1583788f, -0.1234313f, +0.1605177f,
  +0.1437936f, +0.0843048f, +0.0185207f, +0.0679885f, +0.3305057f, +0.2023609f, +0.3083329f, -0.3978859f,
  +0.0877794f, +0.0970373f, +0.1383133f, -0.0436892f, +0.1111594f, +0.0003842f, +0.1101488f, -0.1285690f,
  +0.0733290f, -0.2000070f, +0.3362723f, -0.0155328f, +0.0707840f, +0.0225055f, -0.0193090f, +0.0242365f,
  +0.0793183f, +0.1977517f, -0.0843894f, +0.0113122f, -0.0545443f, +0.3247822f, -0.0179105f, -0.3029293f,
  +0.1200170f, +0.0672389f, +0.2009878f, +0.2362292f, -0.1542385f, +0.0719177f, +0.1897405f, -0.2142990f,
  +0.0830722f, +0.1266683f, +0.2291302f, +0.3238225f, -0.0571916f, -0.0023884f, -0.0945438f, -0.0287622f,
  -0.1643186f, -0.0320155f, +0.0388334f, -0.0081862f, -0.3173196f, +0.1904016f, +0.1685415f, +0.0899355f,
  -0.0167013f, +0.6071141f, +0.1154369f, +0.3563727f, -0.2707050f, -0.3273513f, -0.4651885f, -0.1974362f,
  -0.1610991f, -0.1905179f, -0.0359087f, +0.0993936f, -0.0428776f, +0.2756931f, +0.1875689f, +0.1417614f,
  -0.1819306f, +0.1233518f, +0.1296239f, -0.1317740f, +0.2562337f, +0.1212901f, -0.0483875f, +0.2362243f,
  -0.0030367f, -0.0591304f, +0.0812628f, -0.0478734f, -0.3114649f, -0.3120562f, -0.1403815f, -0.0652267f,
  +0.1822745f, -0.2777934f, -0.3319895f, +0.3114723f, -0.1425648f, -0.0459566f, +0.1714446f, -0.0606264f,
  -0.1336397f, -0.1576347f, +0.2438891f, -0.0022819f, +0.1162089f, +0.0094700f, -0.0310837f, -0.0431323f,
  -0.1368610f, -0.1903124f, -0.0080295f, -0.1412055f, +0.2937836f, -0.0075498f, +0.1085830f, +0.2126051f,
  +0.0474770f, +0.1789591f, +0.1423292f, -0.1726223f, -0.0049158f, +0.2380099f, -0.1473518f, +0.2501563f,
  -0.0556341f, +0.4210019f, +0.0255313f, -0.0523000f, +0.0417212f, +0.4534006f, +0.0793016f, +0.0503119f,
  -0.0927077f, -0.2739404f, -0.0530451f, +0.0883960f, -0.1019263f, +0.2983424f, -0.5050244f, +0.1598010f,
  +0.3426136f, +0.3090272f, -0.2002579f, +0.0322204f, -0.1332924f, +0.1069285f, -0.0688254f, +0.0043278f,
  +0.1241241f, +0.0118508f, -0.1223680f, -0.0308960f, +0.3435425f, +0.1820239f, -0.4197861f, +0.0272909f,
  -0.3221197f, +0.1888246f, +0.3104028f, -0.2235721f, +0.1709295f, +0.0092714f, -0.1842794f, +0.0201914f,
  +0.2111764f, -0.1564828f, -0.1622610f, -0.0875590f, +0.2378972f, -0.0043307f, +0.0485018f, +0.0917836f,
  -0.1289921f, +0.1581760f, +0.1230421f, +0.0295359f, +0.0672097f, -0.3415133f, +0.2140814f, -0.0005815f,
  -0.0987052f, -0.2264949f, -0.4166993f, +0.1524560f, +0.4301275f, -0.1814750f, +0.3815588f, +0.1762206f,
  -0.0562513f, +0.4082280f, -0.2960293f, +0.1073119f, +0.2706317f, -0.1212269f, -0.3063931f, -0.1572643f,
  -0.1445774f, -0.0388680f, +0.2096676f, -0.1992148f, -0.3372731f, +0.2962618f, +0.2620296f, +0.1272732f,
  +0.1394070f, -0.4112797f, -0.4704762f, -0.0241531f, -0.1369089f, +0.5367741f, +0.2434104f, -0.4440703f,
  -0.1204173f, +0.0659168f, +0.0890884f, -0.2349246f, +0.0670599f, -0.0974988f, +0.0889453f, -0.3780839f,
  +0.0315177f, -0.3916631f, +0.2515149f, +0.1086400f, -0.2677898f, +0.1172335f, +0.2450924f, -0.1461731f,
  +0.1848312f, -0.1783196f, -0.2412539f, -0.0578419f, -0.3481949f, +0.0176991f, +0.2557847f, -0.0933373f,
  -0.2420894f, -0.0372036f, +0.0372258f, +0.1084644f, -0.2428411f, -0.2366291f, +0.0956528f, +0.1802532f
);

const float biases[4] = float[4](
  +0.0007252f, -0.0491443f, -0.0577710f, +0.0458722f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer40 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0665552f, -0.2797854f, +0.0256827f, -0.0542207f, +0.0377984f, -0.6836012f, +0.0548607f, +0.0438249f,
  +0.0987098f, -0.0790131f, -0.0084259f, +0.0168682f, +0.1067485f, -0.0643265f, -0.0643770f, -0.1653748f,
  +0.2490742f, -0.1739727f, +0.1545277f, -0.5006505f, -0.2736558f, -0.2406621f, -0.3459001f, -0.2538932f,
  +0.0303989f, -0.0333264f, -0.0619896f, -0.0275106f, -0.0382963f, -0.0758842f, +0.0166704f, +0.0925814f,
  -0.1793796f, -0.1275186f, +0.1385545f, -0.0141112f, -0.0790003f, -0.3114282f, +0.0031301f, -0.1147192f,
  +0.3010865f, +0.0834756f, -0.2100481f, -0.1624209f, +0.4151568f, -0.1949397f, -0.0545734f, -0.0359479f,
  -0.0525070f, -0.2100984f, +0.0490543f, +0.1849775f, +0.0638977f, -0.2000445f, -0.1605861f, -0.0495977f,
  -0.1008868f, -0.2044015f, +0.1417559f, +0.1115607f, +0.0611499f, -0.1108685f, +0.1086547f, +0.2786675f,
  -0.0004969f, -0.2296222f, -0.0390529f, +0.1500316f, -0.1661224f, -0.3459889f, +0.0288250f, -0.0864670f,
  +0.1456692f, +0.1124308f, -0.0298414f, -0.0962796f, -0.2202931f, -0.2245023f, +0.0366209f, -0.0090822f,
  -0.1504041f, +0.1346790f, +0.1938321f, +0.1219187f, -0.1064578f, +0.1870070f, +0.2455122f, -0.0671968f,
  +0.2368066f, +0.0193673f, +0.1944198f, -0.0691929f, -0.2468654f, +0.2528891f, +0.2346102f, -0.1113032f,
  +0.3555733f, -0.1430319f, -0.1799377f, +0.0912112f, +0.0203979f, -0.0698022f, +0.3568713f, -0.2656114f,
  -0.4396067f, +0.2946526f, +0.4977672f, +0.0727477f, -0.1066713f, +0.2337646f, +0.1632621f, +0.0514708f,
  +0.3002180f, -0.0357310f, -0.3008576f, +0.1784218f, +0.2617285f, -0.1566158f, -0.1125422f, +0.3611072f,
  +0.1385710f, +0.3106203f, +0.0703774f, -0.0816935f, +0.1808827f, -0.3199943f, +0.0991614f, -0.5426027f,
  +0.2194799f, -0.0411226f, +0.1015358f, +0.0916172f, +0.2919491f, -0.3089533f, -0.0365636f, -0.0121741f,
  -0.0818537f, -0.2985063f, +0.4293832f, +0.1470840f, -0.0832131f, -0.1344680f, -0.0298748f, +0.3347123f,
  +0.0388083f, -0.0515263f, -0.1731927f, -0.0060282f, -0.0559265f, -0.4270884f, +0.2473765f, +0.2013557f,
  -0.1538096f, -0.3706482f, -0.3156272f, +0.0598728f, +0.1007191f, +0.0974616f, -0.0881269f, +0.2043498f,
  +0.1354897f, +0.0534629f, -0.2925915f, -0.4759122f, -0.0739555f, -0.2953901f, -0.1016654f, -0.1416281f,
  -0.1466206f, -0.0859938f, -0.0114182f, +0.0803807f, +0.3323655f, +0.1228043f, -0.0694868f, -0.3748175f,
  +0.0842745f, -0.1723832f, -0.3248544f, -0.0528983f, -0.1213743f, -0.4088392f, +0.0993225f, +0.0195913f,
  +0.0399348f, +0.1130570f, -0.0546587f, +0.0954365f, -0.0845483f, -0.2431842f, +0.0082923f, -0.1732915f,
  -0.3459654f, -0.5146845f, +0.0894068f, -0.0152228f, -0.2984322f, -0.3018024f, +0.0479140f, -0.0130887f,
  -0.2618295f, -0.1465244f, -0.1731352f, +0.1741835f, -0.1956369f, -0.0331228f, +0.4302706f, +0.4459279f,
  -0.0466731f, +0.1262666f, -0.1330278f, +0.0127969f, +0.1148059f, -0.2797033f, +0.1089547f, -0.0561928f,
  -0.1790180f, -0.2213285f, +0.0082966f, -0.0022011f, +0.2362526f, +0.2378364f, +0.0788143f, +0.1371602f,
  +0.1187352f, -0.1082884f, +0.0567637f, +0.1408736f, -0.3386142f, +0.0358769f, -0.1404338f, -0.0103472f,
  -0.1589141f, -0.0296368f, +0.1173730f, +0.2699209f, +0.0566469f, +0.0501815f, +0.0451146f, -0.1706864f,
  +0.0466629f, -0.2384583f, +0.1175097f, +0.2165274f, +0.2739579f, -0.0641806f, -0.2073889f, -0.1340208f,
  +0.4267870f, -0.1940744f, -0.4316736f, +0.2190360f, +0.2910192f, +0.0009705f, +0.0471902f, -0.2471932f,
  -0.2470029f, -0.3578353f, +0.1346213f, -0.0706418f, +0.4019455f, +0.2844454f, +0.2589082f, -0.0686812f,
  +0.2895614f, -0.1606588f, +0.0240994f, -0.2782018f, -0.2428635f, -0.2210439f, -0.0412268f, +0.2819621f,
  +0.0927520f, -0.4475927f, -0.3009388f, +0.0531721f, -0.3057467f, +0.1434522f, +0.3101927f, +0.0130112f,
  -0.1369903f, +0.0525660f, +0.1402329f, +0.0031348f, -0.0385765f, +0.1820173f, -0.1484871f, +0.0274922f
);

const float biases[4] = float[4](
  -0.0300672f, +0.0006064f, -0.0248116f, -0.0040101f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer41 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1039937f, -0.2443164f, -0.1462483f, +0.2302974f, -0.3368562f, +0.0969317f, -0.0611321f, -0.3900430f,
  -0.1286003f, -0.2094399f, -0.0538517f, -0.1195585f, -0.3642147f, -0.2920459f, -0.0677559f, +0.1686005f,
  +0.0880221f, -0.1057116f, -0.2409511f, -0.1117578f, -0.1311781f, -0.0407189f, +0.0415244f, +0.0605320f,
  +0.2006590f, +0.2516192f, -0.4175356f, -0.0605329f, +0.1537043f, +0.5166617f, -0.1180052f, +0.1719104f,
  -0.2103027f, -0.4035851f, +0.0797475f, +0.4555385f, +0.0994587f, -0.0228688f, -0.1312843f, +0.2656775f,
  +0.0529622f, -0.0327165f, -0.1584300f, +0.2267532f, +0.0739718f, +0.2126803f, +0.1346279f, +0.1099348f,
  -0.1610703f, +0.0363888f, -0.0843677f, -0.0183070f, -0.0922034f, +0.0521774f, -0.1304288f, +0.0968032f,
  +0.0243314f, -0.2084645f, -0.0711325f, +0.1504680f, +0.2491227f, +0.5911867f, +0.1043758f, +0.0612862f,
  +0.0192135f, +0.2734701f, -0.1689604f, -0.1250537f, +0.0864289f, -0.0479700f, +0.0676989f, +0.0957550f,
  +0.0817289f, +0.1864222f, +0.1019351f, -0.0051024f, -0.0379516f, +0.1422630f, +0.1033260f, +0.2008149f,
  +0.2093152f, -0.1381552f, -0.3075755f, +0.1570383f, -0.0344778f, -0.0363356f, -0.0643020f, +0.1303895f,
  -0.0277801f, +0.1003178f, -0.0548252f, +0.1113664f, -0.1328587f, -0.2468911f, -0.2425494f, -0.1424377f,
  +0.0413762f, +0.0216426f, +0.0736628f, -0.0806503f, +0.0432125f, -0.1849563f, +0.2071039f, +0.1851463f,
  -0.4433113f, -0.1971422f, +0.1366410f, +0.0574881f, -0.1259457f, +0.2720600f, -0.0847849f, +0.4630556f,
  +0.0310857f, -0.1186965f, -0.0026347f, +0.2177271f, -0.1569225f, -0.1102300f, +0.0557641f, +0.2433854f,
  -0.1336561f, +0.2503069f, +0.2088049f, -0.2033941f, +0.0469247f, -0.0436544f, +0.0990974f, +0.2755405f,
  -0.3458335f, -0.2388216f, +0.4926923f, +0.2601256f, -0.0698065f, -0.1725823f, +0.1037687f, +0.3987113f,
  -0.0884256f, -0.0267380f, +0.2501281f, +0.2946461f, -0.0412803f, +0.0324812f, -0.2497918f, +0.1423243f,
  +0.1087715f, +0.0495921f, -0.0561911f, -0.0965054f, -0.1468611f, +0.0043321f, -0.1851525f, -0.1896316f,
  +0.0020658f, -0.0593033f, +0.1907434f, -0.3714067f, -0.0151719f, +0.3086838f, -0.1250174f, +0.1292660f,
  -0.0710509f, -0.0472840f, -0.0861266f, +0.0429392f, -0.0774652f, +0.1019729f, +0.0703945f, -0.0407025f,
  -0.1458049f, +0.3985103f, +0.0413666f, +0.0835528f, +0.3737334f, +0.1246765f, +0.2546914f, +0.5054142f,
  -0.1214087f, -0.0183518f, +0.5585235f, -0.2360656f, +0.4066946f, +0.6208954f, -0.1521491f, +0.0619477f,
  +0.0651667f, +0.0148487f, -0.2743695f, +0.0640705f, +0.3414930f, -0.0237316f, -0.1872070f, -0.1176990f,
  +0.3837653f, -0.0508035f, -0.0157713f, -0.0210476f, +0.3999557f, +0.1258867f, +0.2522659f, -0.1057585f,
  +0.1321938f, -0.3103569f, +0.4597577f, +0.1445708f, -0.6832270f, -0.2089151f, +0.1152961f, +0.3433853f,
  -0.0809872f, -0.1256346f, -0.0698472f, -0.1565498f, +0.2460040f, +0.2000963f, -0.0642428f, +0.1582778f,
  +0.1375628f, +0.1044943f, +0.3546767f, +0.0979256f, +0.0206105f, +0.1643768f, -0.3406238f, -0.3342769f,
  +0.0171464f, +0.0924817f, +0.4666506f, -0.1203366f, -0.3718824f, +0.1312218f, -0.0682424f, -0.2605832f,
  +0.0735869f, +0.3371063f, +0.2615498f, -0.2820505f, -0.0122863f, +0.0449499f, -0.0571572f, -0.1197211f,
  +0.1042039f, -0.0797947f, +0.5116194f, -0.1230758f, -0.0744753f, -0.1117499f, +0.3128512f, +0.1628877f,
  -0.0598207f, +0.0084611f, +0.1159147f, -0.1853971f, +0.2043577f, -0.6978490f, +0.0284276f, +0.5923783f,
  -0.2641577f, +0.0639259f, -0.0269789f, +0.1841869f, +0.1050460f, +0.0165118f, -0.0240257f, +0.3329729f,
  +0.0329632f, -0.1693155f, +0.0317169f, +0.3610568f, +0.1243580f, -0.3329191f, -0.1849235f, +0.1368198f,
  -0.0516080f, +0.0593961f, -0.4782752f, +0.1145156f, -0.0304162f, +0.2326825f, +0.1170024f, -0.4310399f,
  +0.0341100f, +0.1492661f, -0.2496715f, -0.1259456f, -0.0045926f, +0.1687384f, +0.2053197f, -0.2336136f
);

const float biases[4] = float[4](
  +0.0393091f, -0.0762504f, -0.0379544f, -0.0876582f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer41 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1118254f, +0.1237474f, -0.0154966f, -0.0068243f, +0.3158137f, -0.2872916f, +0.0763033f, +0.2509167f,
  +0.0317258f, +0.1266891f, +0.1910060f, -0.0574154f, -0.0920712f, -0.0492720f, -0.0602476f, +0.1453762f,
  +0.1919567f, +0.3559411f, -0.0837787f, -0.1289039f, -0.0843954f, -0.1472324f, +0.1031178f, -0.2489339f,
  +0.0128400f, -0.1341347f, +0.1522091f, -0.1429262f, +0.1281969f, -0.0507365f, +0.2525938f, -0.1056063f,
  -0.2390792f, +0.1228254f, +0.2468145f, -0.0103387f, -0.0030638f, +0.0254944f, +0.0176563f, +0.1511164f,
  -0.1681930f, +0.2331715f, -0.1138881f, +0.0341525f, +0.0281926f, +0.0553021f, +0.1034470f, -0.0843232f,
  -0.0322079f, +0.0808492f, -0.2310650f, -0.3567138f, +0.0546449f, +0.1318894f, +0.1513118f, -0.0453988f,
  -0.5224706f, +0.0329476f, -0.0615066f, -0.0074324f, +0.3476700f, -0.0784226f, +0.3065636f, +0.1396978f,
  +0.3553036f, -0.0916021f, +0.0141687f, -0.1140977f, +0.3766667f, -0.1120648f, +0.4192972f, -0.0716242f,
  +0.1785457f, -0.0551010f, +0.1011960f, -0.0662938f, -0.1199267f, +0.0900549f, -0.1479155f, -0.1428736f,
  -0.2142704f, +0.2512312f, +0.1284818f, +0.1705643f, +0.1632345f, -0.0164662f, +0.0822935f, +0.0339601f,
  -0.0346319f, +0.1476362f, -0.0814016f, -0.1733321f, -0.3427803f, +0.1072668f, -0.2124613f, -0.2497017f,
  -0.0284435f, -0.2621076f, -0.1665542f, +0.1243438f, +0.0988258f, -0.2317643f, -0.1060875f, +0.0639916f,
  -0.0050603f, +0.1193414f, +0.1584215f, -0.1262275f, +0.0221914f, -0.1159751f, +0.1468091f, +0.0614580f,
  +0.0364404f, +0.1324700f, -0.1879117f, -0.1271591f, -0.1862171f, -0.1849814f, -0.2545971f, +0.1500379f,
  +0.1730557f, -0.3680130f, -0.2563497f, +0.3888077f, -0.1953243f, +0.3063234f, -0.3439085f, +0.0292227f,
  +0.1288514f, -0.4334871f, +0.0914089f, -0.0027199f, +0.2368365f, +0.7228729f, +0.0799431f, -0.0768732f,
  +0.3025262f, -0.0251927f, +0.0801894f, +0.1445962f, -0.0409708f, +0.0941617f, -0.1599710f, +0.1758729f,
  +0.0732113f, -0.3042605f, -0.0805319f, +0.0788256f, +0.0754821f, +0.1140695f, +0.0018715f, -0.0797740f,
  +0.2411934f, -0.2196938f, -0.2217490f, +0.1096706f, +0.0338659f, +0.0515583f, +0.0153216f, -0.1044692f,
  +0.3108181f, +0.0971414f, -0.0065487f, +0.0670308f, +0.0181162f, -0.0634762f, +0.2615031f, -0.1604470f,
  -0.1303563f, -0.2363023f, +0.0524156f, -0.0463064f, -0.0327743f, +0.1578657f, +0.3086228f, +0.5147793f,
  -0.1871754f, +0.3071378f, -0.1481681f, +0.1857891f, +0.0229746f, -0.4705728f, +0.4115854f, +0.5769907f,
  -0.0526246f, -0.0137479f, -0.1398207f, +0.2838717f, +0.1721013f, +0.0134345f, -0.1015457f, +0.0694329f,
  -0.0045950f, +0.2415099f, -0.3535074f, +0.0634717f, +0.0386433f, +0.1354430f, -0.1430033f, +0.0646395f,
  -0.2261055f, +0.0078694f, -0.6371476f, -0.0117363f, -0.0937008f, +0.5419542f, -0.1609130f, -0.3328340f,
  +0.0250753f, +0.0007271f, -0.4161236f, -0.1974024f, +0.0170223f, +0.1020015f, -0.0169309f, -0.1632025f,
  +0.0190648f, -0.0189083f, -0.1781792f, +0.1413727f, +0.1276533f, -0.0657394f, +0.2316674f, +0.1834247f,
  -0.0731396f, +0.1117966f, -0.1532726f, -0.3116359f, +0.0515005f, -0.0794600f, -0.0480612f, -0.0766262f,
  -0.1752505f, -0.0357684f, -0.1055865f, +0.0434398f, -0.1532584f, -0.0226874f, +0.2449375f, +0.1023507f,
  -0.0825850f, +0.0658447f, -0.2162706f, -0.3040818f, -0.2471732f, +0.1550436f, -0.1508251f, -0.2642130f,
  +0.0013306f, +0.0783195f, -0.4523298f, +0.6072082f, -0.1833555f, -0.2197709f, -0.3803274f, -0.2000753f,
  +0.0900837f, +0.1573897f, +0.3271646f, +0.2472106f, -0.2923724f, -0.2762095f, +0.0930027f, -0.1596336f,
  -0.0851834f, -0.1619817f, +0.2222095f, +0.2991108f, +0.0438642f, -0.2652359f, +0.2105645f, +0.0027184f,
  -0.1034922f, -0.2601609f, -0.3220981f, -0.2103009f, -0.2285835f, -0.4366658f, -0.1083899f, -0.3662041f,
  +0.0230255f, +0.2206895f, +0.1244542f, +0.3141389f, -0.1698413f, +0.1346248f, -0.0653871f, +0.1047985f
);

const float biases[4] = float[4](
  +0.0773203f, -0.0670717f, +0.0321809f, +0.0443534f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer42 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1348876f, +0.1797381f, -0.1199971f, -0.0381350f, -0.1792006f, +0.0278190f, -0.1103140f, -0.0377597f,
  -0.2725792f, +0.0951881f, +0.2464125f, -0.1581236f, +0.4256754f, +0.1698906f, -0.0058758f, +0.0411360f,
  -0.0165266f, -0.2572116f, +0.0791607f, -0.1213043f, -0.1476442f, +0.0535517f, +0.0165356f, +0.0493996f,
  +0.0998681f, -0.0267121f, +0.1925630f, +0.2625433f, -0.0060154f, -0.0436198f, -0.1155550f, -0.1097863f,
  +0.0383576f, +0.0072371f, +0.1374568f, +0.2353237f, +0.1014309f, -0.0796939f, +0.2164443f, -0.0931217f,
  -0.2798968f, -0.1374439f, -0.1125096f, -0.0057004f, -0.0783769f, -0.0422865f, +0.1081640f, -0.1025067f,
  +0.0145514f, -0.0348103f, +0.0009158f, -0.0451789f, +0.0251754f, +0.0585698f, +0.1887268f, +0.0996955f,
  +0.0946202f, -0.1396737f, +0.2266758f, -0.0607120f, -0.0507873f, -0.0584054f, -0.0524135f, +0.0247839f,
  -0.1770171f, +0.0076643f, +0.1167921f, -0.1236764f, +0.0699116f, +0.0984847f, +0.0274987f, -0.0305407f,
  +0.0168334f, -0.1585337f, +0.2848719f, +0.1827877f, -0.2055670f, +0.0741047f, -0.5053524f, -0.0478592f,
  +0.0855020f, -0.0455672f, -0.6075418f, -0.5897863f, +0.0004867f, +0.6338152f, +0.3014393f, -0.0284615f,
  -0.2329629f, -0.3713883f, +0.6382408f, +0.1647741f, +0.0174876f, +0.6364802f, -0.3918587f, -0.1203615f,
  +0.2213344f, +0.0442174f, +0.0856786f, +0.0071683f, -0.1505103f, +0.0792163f, -0.2709524f, -0.0509154f,
  +0.2320102f, +0.3477317f, -0.7491526f, +0.1625785f, -0.1653800f, -0.0018335f, -0.4358974f, -0.1423217f,
  -0.1126175f, -0.0998428f, +0.2020439f, +0.1764953f, +0.0625821f, -0.0961313f, -0.0166430f, -0.1919932f,
  +0.1652810f, -0.1047263f, -0.1490996f, -0.4595807f, -0.2507960f, -0.0170131f, +0.0182441f, -0.1236400f,
  +0.1574859f, +0.2691251f, -0.3794289f, -0.1442207f, -0.3110012f, -0.1484384f, -0.2986958f, -0.3225586f,
  +0.4239264f, +0.0459473f, -0.0412343f, -0.2271484f, -0.0044447f, -0.0503568f, -0.0023486f, -0.0320660f,
  -0.2587743f, -0.1563997f, -0.1433828f, -0.0789307f, -0.1102363f, +0.1505244f, +0.1188654f, -0.0971257f,
  -0.1773976f, -0.2260967f, -0.2552902f, -0.0914641f, +0.3807147f, +0.2514204f, +0.1618306f, +0.1492265f,
  +0.0963790f, -0.1551961f, -0.1988226f, -0.1209521f, +0.2006502f, +0.0185724f, +0.1354668f, -0.1854460f,
  -0.0109494f, +0.2501332f, -0.0525683f, -0.0333303f, +0.2313377f, -0.2706075f, +0.2030398f, -0.0154065f,
  -0.4311996f, -0.0547713f, +0.0557263f, +0.1079657f, +0.0778711f, +0.2590150f, +0.4393698f, -0.4064841f,
  +0.2597767f, +0.3004289f, -0.0227147f, -0.1087700f, -0.0023168f, -0.2495680f, +0.2813777f, -0.2053891f,
  +0.0810667f, +0.0211266f, +0.0955959f, +0.1095889f, -0.2208543f, +0.0431745f, +0.0805039f, +0.0464494f,
  -0.1781709f, -0.2016907f, +0.0013507f, -0.0596039f, -0.2016824f, -0.2450275f, +0.1111209f, -0.1395358f,
  -0.1742910f, +0.0569330f, -0.1507333f, +0.1496497f, -0.0855957f, -0.1946444f, -0.2064915f, -0.2009237f,
  +0.3807435f, +0.1241534f, -0.1864833f, +0.0202175f, -0.2487264f, +0.1062142f, +0.1566786f, -0.4582237f,
  +0.1351242f, -0.1002014f, -0.4667847f, +0.0490622f, -0.0299284f, +0.0053219f, -0.2296893f, +0.2349300f,
  -0.1775066f, +0.0964465f, -0.4108445f, -0.3046077f, +0.0680281f, +0.0019013f, -0.0046207f, -0.2201426f,
  +0.0338661f, -0.0177728f, -0.0178474f, +0.4026937f, -0.0933410f, +0.1830367f, -0.4143752f, -0.4365740f,
  +0.0022804f, +0.0007746f, +0.1278615f, -0.1595666f, +0.2407891f, -0.1650962f, -0.1570864f, -0.0776326f,
  +0.2308811f, -0.0079036f, -0.0606729f, -0.5529497f, +0.2603829f, +0.1114201f, +0.2158786f, +0.0818311f,
  -0.0207289f, -0.1468397f, -0.2164837f, -0.3295789f, -0.3319528f, +0.1920209f, -0.0263142f, -0.2560769f,
  +0.3341292f, +0.1040247f, +0.2548673f, -0.1846167f, -0.1162998f, +0.1291029f, -0.0239148f, +0.5445489f,
  +0.3962355f, -0.2374105f, -0.0465568f, +0.2588651f, -0.0806283f, -0.0813194f, -0.0898973f, +0.0732021f
);

const float biases[4] = float[4](
  -0.0669110f, -0.0416187f, +0.0410132f, +0.0111158f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer42 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2944666f, -0.0539938f, -0.1574083f, -0.3761106f, -0.0561191f, +0.0236538f, -0.0346181f, -0.0495282f,
  -0.4024353f, -0.1239101f, +0.0495753f, -0.1595035f, -0.1514121f, +0.0465605f, +0.0659657f, -0.2086540f,
  -0.1602012f, -0.1060674f, +0.2049241f, -0.3416115f, -0.1963226f, -0.0218457f, +0.1895939f, +0.0486651f,
  -0.1163163f, -0.1211004f, +0.1189231f, +0.1456374f, +0.1149290f, -0.1780492f, -0.0975577f, +0.2196377f,
  -0.2459893f, +0.1833916f, +0.2911424f, +0.0003560f, +0.0306112f, -0.4233839f, -0.1574972f, +0.2201746f,
  -0.3149408f, +0.1637369f, +0.1083988f, +0.2805606f, -0.2390953f, -0.1320508f, -0.0098071f, -0.0570636f,
  +0.0280062f, -0.0429934f, +0.1002499f, -0.1307316f, +0.1330846f, -0.3283883f, +0.0443491f, -0.0714693f,
  -0.0286532f, -0.2915743f, +0.0825919f, +0.0686826f, +0.1662616f, -0.7597983f, -0.0035946f, -0.1770404f,
  +0.1295887f, -0.2502781f, +0.0151449f, +0.1652265f, +0.0223114f, -0.2643663f, +0.0488604f, -0.1002082f,
  +0.3143390f, +0.1647767f, +0.2663750f, +0.2292024f, -0.0294248f, -0.3194010f, -0.3131533f, -0.1902435f,
  -0.1876033f, +0.5426114f, +0.1145286f, +0.5699853f, -0.1020437f, +0.0701775f, -0.4500751f, +0.0721471f,
  -0.0484163f, +0.2798792f, +0.4614037f, -0.0305986f, -0.1377272f, -0.0492065f, -0.0955559f, -0.0374255f,
  -0.2714785f, +0.1706376f, +0.0068416f, -0.1104249f, -0.2555790f, -0.0080545f, -0.0397038f, +0.2662440f,
  +0.0494746f, +0.2020784f, +0.0579543f, -0.4644344f, -0.1083832f, +0.2511652f, +0.2838787f, +0.2348799f,
  -0.3885552f, +0.1473807f, +0.2771457f, +0.0323581f, -0.0949434f, +0.4176643f, -0.0371408f, -0.0258376f,
  -0.0083651f, +0.1900349f, -0.0519282f, -0.1300704f, -0.0678987f, -0.0649613f, +0.2184134f, +0.1186040f,
  +0.2776005f, -0.2286981f, -0.0736232f, +0.2904196f, -0.0769526f, -0.1270241f, -0.2247484f, -0.0471399f,
  -0.1407783f, +0.0043162f, +0.2666860f, +0.0197228f, +0.0844115f, +0.0860244f, +0.0147050f, +0.1030107f,
  -0.0444451f, +0.1820968f, +0.0361925f, -0.2250493f, -0.2405124f, -0.1761880f, +0.1073081f, -0.1460988f,
  -0.4127215f, -0.1095034f, +0.2623972f, -0.0609710f, +0.0377806f, -0.2240461f, +0.0319603f, +0.1650761f,
  +0.1710047f, +0.1159241f, -0.3079562f, -0.2548034f, -0.0154447f, -0.1991115f, +0.2825384f, -0.1941402f,
  +0.0067900f, +0.1371959f, +0.2290132f, -0.4107363f, -0.3167762f, -0.1089235f, +0.2439665f, +0.1255472f,
  +0.3319269f, -0.3633048f, -0.1619318f, -0.0549971f, -0.0889233f, -0.3575591f, -0.4705030f, +0.0902227f,
  -0.3244747f, +0.2527737f, +0.3877892f, +0.1840462f, +0.1374903f, -0.1000903f, +0.0205545f, +0.3577215f,
  -0.1501272f, +0.1173875f, +0.0356251f, -0.1184182f, +0.1471935f, -0.1339727f, -0.0779005f, +0.0733092f,
  +0.0558486f, -0.0463297f, -0.0530587f, +0.1668730f, +0.3007254f, -0.3543010f, -0.0731638f, -0.0189809f,
  +0.1488426f, -0.2322028f, -0.0863389f, +0.1103915f, +0.2118598f, -0.1198685f, +0.0807399f, -0.0536739f,
  -0.1751502f, -0.1581012f, -0.2936460f, +0.2287643f, -0.1069180f, -0.1054166f, +0.0859998f, -0.2831762f,
  -0.1950797f, -0.1739278f, +0.2665924f, -0.2967584f, -0.2944930f, -0.2055967f, +0.2875921f, +0.1986140f,
  +0.1350769f, +0.0863440f, +0.1011475f, +0.1647620f, +0.0028631f, +0.0108987f, -0.0920361f, -0.1193823f,
  -0.2136745f, -0.3148111f, -0.1313366f, +0.2029129f, -0.2824276f, -0.2724207f, -0.1637485f, -0.2618685f,
  -0.2026433f, -0.1140261f, +0.2498415f, +0.3710004f, -0.2112330f, -0.2624766f, -0.5198476f, -0.0684821f,
  +0.0401286f, +0.0954343f, -0.0439334f, +0.2373681f, -0.0929797f, -0.1181561f, -0.3062614f, -0.2743348f,
  +0.0539092f, +0.0291210f, -0.1278183f, +0.0998679f, +0.3104827f, +0.1071387f, -0.1069969f, +0.1254793f,
  +0.1001764f, -0.1869302f, +0.3218697f, -0.1125153f, -0.1317333f, +0.0727887f, +0.0531851f, +0.3128991f,
  +0.3303512f, -0.1993169f, +0.0463653f, -0.2747116f, -0.3887714f, +0.0226300f, +0.1430039f, +0.2013045f
);

const float biases[4] = float[4](
  -0.0013064f, -0.0445643f, -0.0357228f, +0.0415385f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer43 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2125068f, +0.0741103f, +0.1424699f, -0.0673807f, +0.0104444f, -0.0393959f, -0.1325498f, -0.1692040f,
  -0.0237623f, -0.1789269f, +0.0888033f, +0.0023867f, -0.0717246f, +0.0438067f, -0.0552120f, +0.1327840f,
  -0.1411350f, +0.0923227f, -0.1204332f, -0.0455083f, -0.1798882f, -0.0619660f, -0.1448559f, +0.0963780f,
  -0.1005344f, +0.0277279f, +0.2450985f, -0.0720305f, -0.1234889f, +0.0748052f, +0.1411765f, -0.2993028f,
  -0.3021762f, +0.1591504f, +0.1207774f, +0.0599883f, -0.0437872f, +0.3915393f, +0.2055840f, -0.0958562f,
  -0.1359797f, -0.0377041f, +0.0452361f, +0.0387119f, +0.2839400f, -0.1118011f, -0.2002989f, -0.0355684f,
  -0.1858173f, -0.0427455f, -0.0802518f, -0.1769813f, -0.0257632f, -0.1084473f, +0.4175352f, -0.3867760f,
  -0.0926077f, +0.0457412f, -0.0243941f, +0.0474441f, +0.1084662f, -0.0571872f, +0.0684870f, -0.0964158f,
  +0.0184780f, +0.0104997f, -0.1321507f, -0.2922859f, +0.1574629f, +0.1137422f, -0.1291813f, +0.1258737f,
  -0.0084459f, -0.0370250f, +0.2129070f, +0.0399195f, -0.2121990f, +0.1200712f, -0.0762530f, -0.2013191f,
  +0.1650816f, -0.1296495f, +0.5481057f, +0.1426688f, +0.1362855f, +0.2608068f, +0.0477231f, -0.0229047f,
  +0.1422746f, +0.0546296f, +0.1636217f, +0.0360788f, -0.0045764f, +0.2015680f, +0.1388165f, -0.0799172f,
  +0.1006268f, +0.2011715f, +0.2325325f, -0.0680265f, +0.3052025f, -0.1784345f, -0.2008608f, -0.0496194f,
  +0.1756528f, -0.2907518f, +0.4770431f, -0.1761662f, +0.0415880f, +0.3233620f, -0.1690070f, +0.3854911f,
  +0.0619630f, -0.1768000f, +0.4169218f, -0.1231404f, -0.2192890f, +0.0433191f, -0.0747430f, +0.0970027f,
  +0.1266806f, -0.1787902f, -0.2083671f, +0.3188061f, -0.0870695f, -0.4782697f, +0.0538990f, -0.2341451f,
  -0.3143405f, -0.0417965f, +0.0494912f, -0.1045406f, -0.1817705f, +0.2530206f, -0.3583655f, -0.1797014f,
  -0.0336542f, -0.0737921f, +0.0868027f, -0.0446679f, +0.1068255f, +0.0129688f, -0.1531443f, -0.0921786f,
  -0.0597465f, +0.1839665f, +0.3186392f, +0.2622132f, -0.0535727f, +0.0696010f, +0.2719275f, -0.1385776f,
  +0.0823615f, -0.0257795f, +0.2248097f, -0.0428980f, +0.0458246f, +0.0883527f, -0.2374376f, +0.0309177f,
  +0.1091915f, +0.0753439f, -0.1862460f, +0.0717700f, +0.0414600f, -0.0540747f, +0.0127272f, +0.0969751f,
  +0.0627660f, -0.4183091f, -0.4099756f, +0.0522074f, -0.0373196f, -0.2324772f, -0.0772416f, +0.0458272f,
  +0.0688570f, +0.2320939f, -0.0960399f, -0.0843060f, -0.1664884f, -0.0486281f, -0.2948115f, +0.0967817f,
  +0.0987798f, +0.4359089f, +0.1555417f, +0.0730491f, -0.0356029f, +0.0236479f, -0.2404095f, +0.1768580f,
  -0.1816353f, -0.2861378f, -0.1998475f, -0.2124525f, +0.2063006f, -0.0002517f, -0.2539765f, -0.3018853f,
  +0.0321730f, +0.2647533f, -0.5083867f, -0.4701134f, +0.0234698f, +0.1253301f, +0.3888513f, +0.0964507f,
  +0.1839609f, +0.1516264f, +0.0625358f, +0.2477454f, +0.0230301f, -0.3818828f, -0.3120398f, +0.0193093f,
  -0.0256428f, +0.2161589f, -0.0107006f, +0.2321629f, -0.0605152f, +0.2465182f, -0.2664962f, +0.4761158f,
  -0.1184726f, +0.0078296f, +0.1249647f, +0.0160126f, +0.0054168f, -0.1752379f, -0.2550783f, +0.1770641f,
  +0.3118523f, -0.0958134f, +0.4493220f, +0.0433240f, +0.3939725f, -0.2788779f, +0.0144467f, +0.3128725f,
  -0.1601074f, +0.6380150f, -0.7808891f, +0.0679055f, +0.1779526f, -0.1120099f, +0.0447022f, -0.0390161f,
  +0.0861642f, +0.2115247f, -0.3583399f, +0.0187522f, +0.1498088f, +0.0770696f, +0.0034922f, +0.0105314f,
  +0.0298835f, +0.0753670f, -0.3275480f, -0.0012502f, -0.0975309f, -0.1758008f, +0.0381798f, -0.0877418f,
  +0.1862374f, +0.2054943f, -0.1004092f, +0.3280624f, -0.1155928f, +0.0788709f, +0.0077748f, +0.1699077f,
  +0.0629392f, +0.2856601f, -0.1099186f, -0.0620515f, +0.1693185f, +0.1946065f, -0.0852671f, -0.0770482f,
  +0.4112298f, -0.3018789f, +0.4245133f, +0.1371479f, -0.1598071f, -0.2775074f, -0.0005503f, -0.1068008f
);

const float biases[4] = float[4](
  -0.0020093f, -0.0557190f, -0.0054955f, -0.1202771f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer43 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1472145f, -0.0633651f, +0.2089974f, +0.1209988f, +0.1320208f, +0.1520186f, -0.0877871f, -0.1136344f,
  +0.1478933f, -0.1226869f, +0.2886642f, -0.0129327f, -0.1315576f, +0.2522485f, +0.0618028f, -0.0545703f,
  -0.3709475f, +0.1643257f, +0.0920406f, -0.1266017f, -0.2577606f, +0.0796842f, -0.3434319f, +0.0085120f,
  +0.0780059f, -0.2601539f, +0.0323066f, -0.1774228f, +0.1963977f, +0.0831348f, -0.2693628f, +0.2255930f,
  +0.1095916f, +0.0634741f, +0.1315000f, +0.1969146f, +0.4752902f, -0.1074564f, -0.0984172f, +0.3043065f,
  +0.1386445f, +0.1021545f, +0.4869069f, +0.0718180f, -0.3237688f, -0.1579431f, -0.2039787f, +0.0996999f,
  -0.1215335f, -0.2424781f, +0.0363541f, -0.2732143f, -0.2588575f, -0.4339553f, +0.1516105f, -0.1756605f,
  -0.0784709f, -0.1835622f, +0.1583479f, -0.1079467f, +0.0123464f, +0.0175000f, +0.0173982f, +0.0549724f,
  -0.0280605f, -0.1179244f, +0.0620882f, -0.1307684f, -0.1169370f, +0.4218380f, -0.0430116f, +0.0371247f,
  +0.1572033f, +0.1376688f, -0.1556002f, -0.0242140f, -0.2347052f, +0.1737999f, -0.2536809f, +0.1279752f,
  +0.1617595f, +0.2909369f, -0.1764846f, -0.4416240f, -0.3289341f, +0.3864051f, -0.0909729f, -0.0795309f,
  -0.0210118f, -0.2287223f, -0.0362548f, +0.1273485f, -0.1496148f, +0.1603860f, -0.2121164f, +0.0424286f,
  +0.0806195f, -0.2131711f, -0.2443895f, +0.3704801f, -0.1116094f, +0.0012604f, -0.2394038f, +0.1586358f,
  -0.2573410f, +0.2342523f, -0.0942050f, +0.0886027f, -0.0918661f, -0.1027035f, +0.0434932f, +0.0494579f,
  -0.1497742f, -0.2112813f, +0.3093941f, +0.3448922f, -0.1768145f, -0.4424472f, -0.1633353f, +0.0746946f,
  -0.0686968f, -0.3058745f, +0.0544157f, +0.0090972f, +0.1548980f, +0.0841757f, +0.1002242f, -0.1819226f,
  -0.2795590f, +0.2145929f, +0.0688385f, -0.0611432f, +0.2013915f, -0.1289271f, +0.3556803f, +0.3555711f,
  -0.0292421f, -0.3344624f, +0.3864128f, +0.0020968f, -0.0081884f, -0.1830629f, +0.1849304f, -0.0744331f,
  -0.1865454f, -0.2182673f, +0.2807367f, +0.0528919f, +0.1560155f, -0.1898542f, +0.1481748f, -0.0280770f,
  +0.0277869f, -0.3517509f, -0.0555608f, -0.0863787f, +0.1848428f, +0.0311264f, -0.0481598f, -0.2230492f,
  +0.0438258f, -0.1320928f, -0.0225666f, +0.1856703f, +0.1704861f, -0.0777597f, -0.1252965f, +0.0118232f,
  +0.1205613f, -0.0453039f, +0.0643910f, -0.0597912f, +0.3522937f, -0.1168546f, +0.1271155f, -0.1031755f,
  +0.2115176f, -0.4190073f, +0.1715962f, +0.1526098f, -0.4688727f, -0.0707783f, +0.3040476f, +0.2939025f,
  -0.2181861f, +0.2809023f, +0.1451366f, +0.0509319f, -0.2986577f, +0.2203955f, -0.1792321f, +0.2950763f,
  -0.1547994f, +0.3910179f, -0.2030884f, -0.2213831f, +0.0979278f, -0.1908815f, +0.0359921f, +0.1822674f,
  +0.1119631f, +0.2939281f, +0.1079039f, +0.3343614f, -0.2978385f, -0.4518312f, -0.3282267f, +0.2804006f,
  +0.0736514f, +0.1429731f, +0.2506225f, +0.2319190f, -0.2252021f, -0.1521348f, -0.0912377f, -0.2294248f,
  -0.0089103f, -0.0261875f, +0.0572102f, +0.0997839f, +0.2278567f, -0.0501084f, -0.1103249f, +0.2375344f,
  +0.0698474f, +0.1418680f, +0.0809473f, +0.0213337f, -0.1256074f, +0.3424165f, +0.2105383f, +0.1791014f,
  +0.1109368f, -0.1121217f, +0.1207709f, -0.2299225f, +0.4361517f, +0.0382598f, -0.1587421f, -0.3438320f,
  +0.0792617f, +0.1943129f, +0.2867188f, -0.0360435f, -0.2107882f, -0.0166925f, -0.2287433f, -0.1358978f,
  -0.0072119f, +0.0414494f, +0.2975980f, -0.1527077f, +0.1052362f, -0.1029533f, +0.0592221f, +0.0613215f,
  -0.3297854f, -0.5357314f, +0.0033808f, -0.4485667f, +0.2588631f, -0.1695807f, +0.1923527f, +0.2414812f,
  +0.1610161f, +0.5828696f, +0.0127685f, +0.2034824f, +0.0114307f, +0.0112759f, +0.1011554f, +0.0179231f,
  +0.0154057f, +0.5276620f, -0.0246508f, -0.0750198f, -0.2153702f, +0.0307887f, -0.4031465f, +0.1072766f,
  +0.0302931f, -0.1279220f, -0.0112190f, -0.2521200f, +0.1425019f, +0.2655485f, -0.4986893f, +0.1909267f
);

const float biases[4] = float[4](
  -0.0440660f, +0.0281844f, -0.0708658f, -0.0801120f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer44 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0706015f, +0.2020105f, -0.0178475f, -0.1217143f, +0.1673348f, +0.2512212f, +0.1240652f, -0.3442821f,
  -0.0798658f, +0.2130937f, -0.0658829f, +0.2241547f, +0.1939810f, +0.0949188f, -0.0141416f, +0.0187585f,
  +0.1439548f, +0.1028132f, +0.3247379f, +0.1011908f, +0.0909053f, +0.1623934f, +0.0908246f, -0.0522769f,
  +0.0120611f, -0.2110681f, -0.0011483f, -0.0114521f, -0.3764243f, -0.1231415f, +0.0382396f, +0.0740931f,
  +0.1100165f, +0.1078335f, +0.1056507f, +0.1339542f, +0.1195669f, -0.0936203f, -0.2293513f, +0.1241342f,
  +0.0672275f, +0.1884334f, +0.2612015f, +0.0659286f, -0.0820299f, -0.0800051f, -0.0555769f, -0.1183114f,
  +0.1878404f, -0.0815323f, +0.0792440f, +0.0002385f, +0.1092598f, +0.0116263f, -0.0118001f, -0.0013292f,
  -0.2788545f, -0.1267563f, +0.0458987f, +0.2595118f, -0.0420625f, +0.1819263f, +0.0521706f, -0.1212159f,
  +0.0504056f, +0.1128528f, +0.0999445f, +0.3419793f, -0.1035668f, -0.1880043f, +0.1604230f, -0.0930036f,
  -0.0223672f, -0.0011164f, +0.1794554f, -0.1813384f, +0.1092601f, +0.2841531f, -0.2270199f, +0.1285204f,
  +0.1433632f, -0.2652860f, +0.1897733f, -0.1429819f, -0.0530364f, +0.0192689f, -0.3440942f, -0.5058402f,
  +0.0824963f, +0.0155064f, +0.0630091f, -0.4892163f, +0.1270173f, +0.3774974f, -0.2959478f, -0.5806906f,
  +0.1270472f, +0.0520273f, +0.0617992f, -0.1908489f, +0.2463551f, +0.1414062f, -0.3764674f, -0.0576238f,
  +0.0861343f, +0.0367754f, +0.3727105f, -0.3310054f, +0.2718587f, -0.4031763f, +0.2134260f, +0.0570907f,
  -0.0484881f, +0.0933401f, +0.2224736f, -0.8502535f, +0.2952428f, +0.0137188f, -0.6044371f, -0.2845963f,
  -0.1522078f, +0.1238414f, -0.0549036f, -0.0275477f, -0.1804025f, +0.1295869f, -0.0595804f, +0.1913105f,
  +0.1702910f, +0.1248303f, +0.2136783f, -0.0761788f, -0.2161878f, -0.2413949f, +0.2487802f, +0.2369214f,
  -0.0118511f, -0.0030213f, +0.0185873f, -0.2203954f, +0.2304948f, -0.0340599f, +0.1678678f, +0.1881784f,
  +0.0243101f, -0.1750914f, +0.0403409f, -0.1981660f, +0.0889157f, -0.1031768f, +0.0504233f, -0.1685937f,
  +0.0405378f, -0.1892605f, +0.0056225f, -0.2287200f, -0.1706015f, -0.1401138f, -0.0437065f, -0.2229621f,
  -0.1133257f, +0.0339196f, -0.0009357f, +0.1361686f, -0.3093984f, -0.0784624f, -0.0391583f, +0.1843852f,
  +0.0662206f, -0.0192272f, +0.0224814f, +0.0010276f, +0.0060589f, -0.1840763f, +0.4037328f, -0.3354996f,
  -0.1872935f, +0.3955017f, -0.0523922f, +0.3821191f, +0.5949394f, +0.1895888f, -0.0438968f, -0.1846947f,
  +0.2077098f, -0.1100624f, -0.0942699f, +0.7048520f, +0.1839180f, -0.0813476f, -0.4209055f, -0.0460305f,
  +0.0806682f, +0.0042707f, -0.0800092f, -0.5130506f, -0.1238567f, +0.1409322f, -0.1679770f, +0.0760203f,
  +0.1309415f, -0.1022523f, +0.0270618f, +0.0440485f, +0.0443273f, +0.0821719f, +0.2606442f, -0.1180967f,
  +0.0414582f, +0.0858255f, -0.1775822f, +0.0037980f, +0.0405820f, +0.0874536f, -0.3054628f, +0.0258644f,
  +0.0513463f, +0.0965123f, +0.0656689f, +0.0563351f, -0.1506336f, +0.2186324f, +0.0707508f, +0.0131922f,
  +0.0044970f, +0.2026182f, +0.0240271f, +0.0938678f, -0.3700438f, +0.0423657f, +0.0936838f, +0.4459864f,
  -0.0815816f, -0.1046503f, +0.0795669f, +0.2888965f, -0.1307137f, +0.0224454f, +0.0240702f, +0.0755104f,
  -0.2291230f, +0.1274401f, -0.2916911f, +0.1339733f, +0.0921260f, -0.0897975f, -0.0237986f, +0.0259857f,
  -0.1310569f, -0.0742542f, -0.1673158f, -0.3020360f, +0.0297026f, +0.0149294f, -0.1654664f, +0.1259370f,
  +0.1068749f, -0.2288796f, -0.0431253f, -0.0662710f, -0.2865144f, -0.0631687f, -0.0499085f, +0.3375494f,
  -0.3308442f, +0.0803615f, -0.2242876f, -0.1479559f, -0.2548299f, -0.0597572f, -0.3624731f, +0.4439429f,
  -0.0307771f, -0.2251511f, -0.2107970f, -0.1397074f, +0.0563373f, +0.4541650f, -0.3588229f, +0.2379080f,
  -0.1228391f, -0.0561150f, -0.0428006f, -0.0662121f, -0.2666088f, +0.2011549f, -0.0012313f, +0.1142717f
);

const float biases[4] = float[4](
  -0.0738833f, -0.0607207f, +0.0481392f, +0.0130276f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer44 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1223491f, -0.0523025f, +0.1480494f, +0.1468077f, +0.0817001f, -0.1062723f, +0.0347146f, +0.0049880f,
  -0.3275348f, +0.2250185f, -0.0095507f, +0.0701025f, -0.0945439f, -0.1670280f, +0.1871199f, -0.0099427f,
  +0.3881216f, -0.1297603f, -0.0307070f, +0.0150245f, +0.1724117f, -0.1219667f, -0.1458586f, -0.1561952f,
  -0.0282358f, -0.1443009f, +0.1767115f, -0.0187225f, +0.0566240f, -0.0746596f, +0.0257224f, +0.0700278f,
  +0.1011095f, -0.0448707f, +0.1395926f, +0.0107399f, -0.1565922f, +0.0055597f, +0.0798510f, +0.1862228f,
  +0.1794896f, +0.1365309f, +0.2510073f, -0.0016567f, +0.2099836f, -0.1161802f, -0.2282932f, -0.0214756f,
  +0.3213207f, -0.0771483f, +0.2813334f, +0.0630348f, +0.2728699f, +0.2752887f, +0.0175483f, -0.2021557f,
  +0.0845138f, -0.1027300f, +0.3758724f, -0.0606297f, -0.1434447f, -0.0367154f, -0.0982825f, +0.0311264f,
  +0.1393308f, +0.1170006f, +0.1743127f, +0.1372174f, -0.1207202f, +0.1860641f, -0.1093797f, -0.0871485f,
  +0.2786700f, -0.0990765f, -0.1682162f, -0.1861004f, -0.2776445f, +0.3164480f, -0.1150165f, -0.2113042f,
  +0.1467561f, +0.0351266f, -0.2040806f, +0.1142684f, -0.0299821f, +0.0912432f, +0.2099976f, -0.2562958f,
  +0.1042321f, +0.1905263f, -0.3179532f, -0.2942868f, +0.0111750f, +0.2069511f, -0.0275529f, -0.1686663f,
  +0.2668597f, -0.1769490f, -0.1915368f, +0.3724472f, +0.2378167f, +0.2353755f, -0.0394199f, -0.1337585f,
  -0.1600722f, -0.1727795f, +0.1771631f, +0.2445075f, -0.2727135f, +0.0413517f, +0.0551310f, -0.3038625f,
  -0.1160718f, +0.1258409f, -0.0240777f, +0.1255444f, +0.0726792f, -0.0669504f, +0.3021264f, -0.0853581f,
  +0.1697059f, -0.1579287f, -0.1244033f, +0.3198699f, +0.0252552f, +0.0051263f, -0.0650944f, -0.0297545f,
  +0.1345345f, +0.2750367f, -0.0335907f, -0.0378661f, +0.0810023f, -0.3562393f, -0.0023388f, -0.3034819f,
  +0.0841052f, +0.1459976f, -0.1648386f, -0.1252086f, +0.1133786f, -0.3900613f, +0.0261095f, -0.1089041f,
  +0.1890409f, -0.0198412f, +0.0061845f, +0.0257867f, -0.4731579f, -0.3558043f, +0.1088544f, +0.4219329f,
  -0.2823583f, +0.3968020f, -0.0150112f, +0.1139747f, -0.1175420f, -0.1334485f, +0.2131109f, +0.2425701f,
  -0.1341335f, -0.0519962f, +0.3071328f, +0.2323785f, -0.2121755f, -0.3013496f, -0.0661956f, -0.0718292f,
  -0.2049293f, +0.1014543f, +0.0086178f, +0.0553766f, +0.0155778f, +0.3007804f, +0.1334500f, +0.2223549f,
  +0.0480887f, +0.3871798f, +0.1476781f, -0.2157602f, -0.0761999f, +0.2698489f, -0.0901887f, -0.0761182f,
  +0.1008190f, -0.1526924f, +0.2002004f, -0.0560157f, -0.1371027f, -0.0238232f, -0.1572153f, +0.3311437f,
  +0.0365290f, -0.3284992f, +0.2147239f, -0.1779824f, -0.1291945f, -0.0268066f, -0.0183618f, +0.0504366f,
  +0.2498636f, -0.0575370f, +0.4124908f, +0.3133320f, -0.1044150f, +0.1550136f, -0.1556377f, -0.2566462f,
  +0.0851977f, -0.0167873f, -0.1524860f, +0.2325145f, -0.2167042f, +0.2740677f, -0.1141424f, +0.0149360f,
  -0.2516169f, -0.3120146f, +0.0474221f, -0.0237623f, +0.0908478f, -0.1157514f, -0.0583619f, -0.3543373f,
  +0.1095583f, -0.3305494f, -0.0512039f, -0.2064535f, +0.1163132f, -0.1570454f, -0.3711795f, -0.0543153f,
  +0.1899962f, -0.1519676f, +0.2253402f, -0.0907331f, +0.2048855f, +0.2073134f, -0.0968377f, -0.0097071f,
  -0.1036428f, +0.1951554f, -0.2058525f, -0.0310221f, -0.0139698f, +0.1897511f, +0.1072481f, +0.0114469f,
  +0.1560380f, -0.0393951f, -0.3350538f, -0.1166969f, +0.1569054f, +0.0489309f, +0.3444131f, -0.2571422f,
  +0.1647280f, +0.2105401f, -0.1671441f, +0.0216702f, -0.0742721f, -0.1298122f, +0.3183376f, +0.2781710f,
  -0.0758457f, -0.1072191f, -0.1385078f, -0.0309284f, +0.1654737f, -0.1900260f, -0.2434388f, +0.1034368f,
  -0.1657471f, -0.2450376f, -0.2596109f, -0.1275216f, -0.0473060f, +0.1006447f, -0.2073760f, +0.0807409f,
  +0.1045427f, -0.1777360f, -0.1438890f, -0.4667878f, +0.1407768f, -0.0380978f, +0.0761457f, -0.1869470f
);

const float biases[4] = float[4](
  +0.0247415f, -0.0450343f, -0.0377998f, +0.0863699f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer45 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1207361f, +0.4616657f, +0.1155308f, -0.1309706f, +0.0026902f, -0.0965199f, +0.1187822f, -0.0886964f,
  -0.0154107f, +0.2481127f, -0.3175976f, +0.0427235f, -0.1910180f, +0.0925090f, -0.0292063f, -0.0092790f,
  +0.0766540f, +0.0547700f, +0.2260366f, -0.0200202f, -0.0107426f, +0.0667011f, -0.0094227f, +0.0005160f,
  -0.0075854f, +0.1411362f, +0.1681693f, +0.0180381f, -0.0421563f, +0.1352679f, -0.2610720f, +0.1012466f,
  +0.1381695f, -0.2452433f, +0.2260921f, -0.3128967f, -0.0669677f, +0.2313640f, +0.3109336f, +0.1065262f,
  +0.0316123f, -0.1063843f, +0.0061342f, +0.1085371f, +0.1636029f, +0.0799554f, -0.0646874f, -0.0812415f,
  -0.1357502f, +0.0907131f, -0.0481544f, +0.2213606f, +0.1160468f, -0.4278364f, -0.0130218f, -0.0903512f,
  +0.0327265f, +0.0664443f, +0.3417508f, -0.1016991f, +0.1635622f, -0.2409119f, -0.1714866f, -0.3063458f,
  -0.2957491f, -0.3076902f, -0.0595419f, -0.2467163f, +0.0998583f, -0.0272227f, +0.2437557f, +0.0397438f,
  -0.3507928f, +0.2490167f, +0.1079955f, +0.2114360f, -0.2129502f, -0.0150017f, -0.0268182f, +0.2268257f,
  -0.3162419f, -0.4458632f, +0.4629045f, +0.5975151f, +0.0428231f, +0.3730316f, -0.1245374f, -0.1399709f,
  +0.0759970f, -0.2091253f, +0.1220396f, +0.2162968f, -0.2539199f, -0.1778693f, -0.1373496f, -0.1046491f,
  -0.0570770f, +0.3189383f, -0.0677026f, +0.1996954f, -0.1502896f, -0.3684055f, -0.0736882f, +0.1194445f,
  +0.0800067f, -0.0277456f, +0.2312167f, +0.0975446f, -0.2201276f, -0.3615158f, -0.0193868f, +0.3316251f,
  +0.1096341f, -0.0428169f, +0.2209176f, -0.4689839f, -0.2209756f, +0.0508525f, +0.0276132f, -0.0379523f,
  +0.0607960f, +0.1449471f, -0.0279715f, +0.3117526f, -0.1737381f, -0.1373506f, -0.2978086f, -0.0840178f,
  +0.0043176f, -0.1673180f, +0.0792407f, -0.2605079f, +0.0073867f, -0.0008360f, -0.1800752f, +0.0314404f,
  +0.0244611f, -0.0583553f, +0.4174813f, -0.0199951f, -0.1892639f, +0.0119087f, -0.2603268f, +0.0612791f,
  +0.1714210f, +0.0100439f, +0.0885150f, -0.2434999f, -0.0661477f, -0.0798878f, +0.2523227f, -0.1865127f,
  +0.0680336f, -0.2776278f, -0.0612959f, -0.1929315f, +0.0838953f, -0.0015002f, +0.1171590f, -0.1918507f,
  -0.1594688f, -0.0281555f, +0.0018727f, +0.0992621f, +0.0405925f, +0.0221111f, +0.2019797f, -0.2194011f,
  +0.2623549f, -0.1236101f, +0.0011099f, +0.0362917f, -0.1250824f, +0.2551175f, -0.1081737f, -0.1973467f,
  -0.4098576f, +0.1441904f, -0.0099016f, -0.0389191f, +0.0543641f, -0.1320194f, -0.1753070f, +0.0440239f,
  -0.0910377f, +0.1052130f, +0.0444574f, -0.0480048f, -0.1178069f, +0.3701044f, +0.0649142f, +0.0380271f,
  +0.0130813f, -0.4122730f, +0.2294637f, -0.1665999f, +0.0375942f, +0.1995390f, +0.2257481f, -0.2386510f,
  +0.1050165f, +0.1321514f, -0.0113077f, +0.3572856f, +0.0391607f, -0.0782222f, -0.0225956f, -0.2128092f,
  -0.0803025f, +0.1416756f, -0.0852773f, +0.1493229f, -0.0251908f, +0.1465637f, -0.0843708f, -0.0265428f,
  +0.2068892f, -0.0404944f, +0.0895170f, -0.0624058f, +0.0683030f, -0.1479639f, +0.0494202f, -0.0616622f,
  +0.2862500f, +0.5057931f, -0.1330542f, +0.1357761f, +0.1002863f, -0.2180876f, +0.3739025f, -0.6752607f,
  -0.1941028f, +0.3792565f, +0.0146688f, -0.2055283f, -0.0201273f, -0.2739339f, -0.2001071f, +0.5849586f,
  +0.2306308f, -0.3064822f, +0.0026680f, +0.0670994f, -0.1562321f, +0.0872532f, +0.1187259f, +0.1472778f,
  -0.0259142f, +0.7469538f, -0.3073779f, +0.0239670f, +0.2785399f, -0.1777870f, +0.1694017f, -0.2153111f,
  -0.2120566f, +0.0270574f, +0.1419232f, +0.0582720f, +0.1289980f, -0.1141013f, -0.3624195f, +0.3891311f,
  +0.1103143f, +0.1595550f, -0.1189107f, +0.0143275f, +0.2557593f, +0.2092513f, +0.2376258f, +0.0111318f,
  -0.0755128f, +0.9814550f, -0.0704185f, +0.0179857f, -0.4267856f, -0.3311266f, +0.1014313f, +0.0916470f,
  -0.2134068f, -0.1081393f, +0.1218262f, +0.0774674f, +0.0359939f, +0.0822023f, -0.1367875f, -0.0392295f
);

const float biases[4] = float[4](
  +0.0444733f, -0.0838191f, +0.0650279f, -0.0899890f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer45 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.4269304f, -0.0632754f, -0.0743003f, +0.3295661f, -0.2381499f, +0.1872936f, -0.4025992f, -0.1089167f,
  +0.4507760f, +0.1482332f, +0.3443976f, -0.3807101f, -0.1110491f, +0.3507770f, +0.2406346f, +0.0878462f,
  -0.0674421f, -0.1581618f, +0.0022396f, -0.0322160f, +0.0654049f, +0.0605346f, -0.0091481f, -0.1007496f,
  +0.0963741f, +0.1315354f, +0.0189721f, +0.5020908f, -0.3257374f, +0.0629480f, -0.1671786f, -0.0325712f,
  +0.2068786f, +0.0105892f, -0.1502603f, -0.3525455f, -0.1608950f, -0.2766035f, +0.0944868f, -0.0420066f,
  -0.1943115f, -0.3373975f, +0.0952829f, -0.3959585f, +0.3353376f, -0.0400234f, -0.0945823f, +0.0913483f,
  -0.0593061f, -0.0026274f, +0.1456302f, +0.2745388f, +0.2426534f, +0.0781366f, -0.3882088f, +0.1815360f,
  -0.1791665f, +0.1404913f, +0.1718921f, +0.0548015f, +0.1193104f, -0.0033799f, -0.2746792f, +0.3088403f,
  +0.1325212f, -0.0378352f, +0.2694228f, -0.2076516f, -0.0510371f, -0.3360815f, -0.2588718f, -0.0069333f,
  +0.1300966f, -0.0686566f, +0.0268065f, +0.3249857f, +0.3631141f, -0.3197106f, +0.0746179f, -0.1654465f,
  +0.1965833f, -0.0494340f, +0.6678421f, -0.1035068f, +0.1623576f, +0.1847133f, +0.1503845f, +0.2960911f,
  -0.0747707f, -0.4210016f, +0.1926639f, -0.2777504f, +0.1563312f, -0.0427255f, -0.1464365f, -0.3295153f,
  -0.1873987f, -0.0773490f, +0.4597116f, -0.0570202f, +0.5189974f, -0.4516064f, +0.1999544f, +0.4115765f,
  +0.1661997f, +0.1920721f, +0.0576592f, +0.2819528f, -0.2149156f, +0.0010364f, -0.1670378f, -0.2130746f,
  -0.1994581f, -0.1338354f, -0.0809155f, +0.0269185f, -0.0527771f, +0.2174269f, +0.1530708f, -0.0223587f,
  -0.0532409f, +0.2690973f, +0.0840274f, -0.2674100f, +0.1116526f, +0.0194020f, -0.1331108f, +0.4098728f,
  +0.2903388f, +0.0510745f, -0.2551339f, -0.1427361f, -0.0967577f, -0.0363381f, +0.0566464f, -0.0412140f,
  +0.2067792f, +0.1592288f, -0.3312253f, -0.1688968f, +0.0248525f, -0.2542875f, +0.0849767f, -0.0247442f,
  -0.0464889f, -0.1055526f, -0.0436649f, -0.0273365f, +0.2511483f, -0.3954769f, -0.0164784f, -0.2567400f,
  -0.2850459f, -0.2017125f, -0.0307035f, +0.2538128f, +0.0034643f, -0.1865265f, +0.0686017f, -0.0965306f,
  -0.3029587f, -0.1709792f, +0.6278636f, +0.2375670f, +0.2721788f, -0.1103553f, +0.0813564f, +0.1752724f,
  -0.0140125f, -0.1507777f, +0.0640574f, +0.1121011f, -0.0091913f, +0.0970012f, -0.1428819f, +0.0015552f,
  -0.0118636f, -0.2557261f, +0.2001992f, +0.0495532f, -0.1260014f, +0.0344784f, -0.0210713f, +0.0919196f,
  -0.1121297f, -0.1309466f, +0.2149105f, -0.1854794f, -0.1062407f, -0.0615684f, +0.0721221f, -0.0049065f,
  +0.1801569f, +0.1334457f, +0.1834960f, -0.0605479f, -0.0820570f, +0.2468659f, -0.2956053f, -0.0224916f,
  +0.1907884f, -0.1598657f, +0.1435530f, -0.3483941f, -0.0582470f, +0.2458362f, +0.1133320f, -0.1021301f,
  +0.0945141f, -0.2250855f, +0.1417023f, -0.0411811f, +0.0280221f, -0.0458104f, +0.1520818f, -0.0542130f,
  -0.1611675f, -0.0041253f, +0.0997338f, +0.1315447f, +0.1235524f, -0.3125227f, +0.0775953f, -0.3035436f,
  +0.0497839f, +0.1136124f, -0.0294427f, -0.1233003f, +0.0903233f, +0.3522036f, -0.0592917f, -0.2002906f,
  -0.0584464f, -0.0068559f, -0.1243116f, -0.2731567f, +0.1615530f, +0.0013769f, -0.1960186f, +0.1104174f,
  +0.1241350f, +0.1586810f, +0.1745426f, -0.1748834f, +0.1610930f, -0.1739313f, +0.0172743f, +0.1039491f,
  -0.1195816f, +0.0790530f, -0.1481203f, -0.1771622f, +0.0971054f, -0.1738496f, +0.4846646f, -0.0174968f,
  -0.1920172f, +0.4444051f, +0.1858804f, -0.2517641f, -0.1132265f, +0.3922097f, -0.1645134f, +0.2413179f,
  -0.0171683f, -0.0253226f, +0.2048957f, +0.2784375f, -0.1560590f, -0.3491940f, +0.0728473f, -0.3085779f,
  +0.0460634f, -0.2436322f, -0.1802669f, -0.1165898f, -0.1006391f, -0.0956149f, +0.0156689f, +0.0826250f,
  +0.0046456f, +0.2080715f, -0.1623981f, +0.2273060f, -0.1503862f, +0.0189570f, +0.0007627f, +0.0684256f
);

const float biases[4] = float[4](
  -0.1599729f, -0.0821586f, +0.0792989f, +0.1071627f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer46 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2136453f, -0.0246991f, -0.0141689f, -0.0329511f, -0.2663507f, -0.1377451f, +0.1550124f, -0.0577329f,
  +0.0093558f, -0.1445637f, -0.1929257f, +0.3620596f, +0.1390278f, -0.3816121f, -0.0226716f, -0.0079649f,
  +0.0457301f, +0.2859663f, -0.0909471f, -0.0130966f, +0.0138290f, +0.2890710f, +0.0731847f, +0.1613155f,
  -0.0715184f, -0.1756759f, -0.0744612f, +0.1333764f, +0.0335063f, -0.2115879f, -0.1061274f, +0.0739006f,
  -0.1786833f, -0.2859887f, +0.2134070f, +0.3428963f, +0.1269189f, -0.0091766f, +0.1316796f, -0.0970841f,
  -0.0436015f, +0.0604547f, -0.1076986f, -0.5766128f, -0.2526358f, +0.3286287f, +0.1429409f, -0.2891540f,
  +0.1456175f, -0.0246351f, +0.2840564f, -0.0118168f, -0.0673602f, -0.1565034f, +0.1245804f, +0.0348969f,
  +0.0043536f, +0.1284757f, -0.3174325f, -0.1614881f, -0.1625781f, -0.0329067f, +0.0205177f, -0.1808975f,
  +0.1007033f, -0.3289595f, -0.3449784f, -0.1239398f, -0.1097261f, +0.0791159f, -0.1270406f, +0.0447964f,
  -0.0109916f, -0.1415903f, -0.1300943f, -0.2887293f, -0.2553867f, -0.1833197f, +0.2558700f, +0.1010836f,
  +0.0356636f, -0.0639298f, -0.2560455f, +0.4149409f, -0.1962426f, -0.1249274f, +0.4184299f, -0.1286350f,
  +0.1819256f, +0.0235068f, +0.2552117f, +0.3811689f, -0.2741386f, -0.1624924f, +0.2069559f, -0.2850182f,
  -0.2110393f, +0.0807687f, -0.1547223f, -0.4446444f, -0.5741338f, -0.0006880f, +0.2520531f, -0.1561481f,
  +0.2415934f, +0.1375688f, -0.2134006f, +0.6578287f, -0.3658703f, -0.0542159f, +0.2250569f, -0.0629282f,
  -0.4592537f, -0.4362223f, +0.0938484f, -0.0059121f, -0.2039086f, +0.1249895f, +0.3421625f, -0.3255816f,
  -0.1975879f, +0.3781468f, -0.0363100f, -0.1100711f, -0.3784824f, +0.0520232f, +0.1166867f, +0.0970056f,
  +0.1204592f, +0.6145574f, +0.0701355f, +0.2748856f, -0.2772086f, +0.0854902f, +0.1462463f, +0.0384028f,
  -0.1911132f, -0.1081751f, -0.3814869f, +0.2687039f, -0.1423151f, -0.3698541f, +0.1108105f, -0.0284276f,
  +0.1247050f, +0.1869093f, -0.0034827f, +0.0564041f, +0.1337096f, -0.2326463f, -0.0896359f, -0.1160278f,
  -0.0717012f, +0.0260780f, +0.1011196f, +0.2998943f, +0.0473179f, -0.2055562f, -0.3613462f, -0.0843678f,
  +0.2322420f, +0.0150212f, +0.1913219f, +0.2323630f, +0.1357608f, -0.0203582f, -0.1586625f, -0.0803270f,
  +0.1871793f, +0.4485461f, +0.0375959f, +0.3631900f, -0.0381611f, -0.3639583f, +0.1106695f, -0.2651896f,
  -0.1989191f, -0.1503578f, -0.0262743f, -0.0043814f, +0.1410460f, +0.0235679f, -0.0752214f, -0.1146279f,
  -0.0477775f, -0.2383252f, +0.3202850f, +0.0537958f, -0.0072126f, -0.0345209f, +0.0241422f, +0.1145361f,
  -0.2084730f, -0.0832893f, -0.0504082f, -0.0079065f, +0.1654755f, -0.0404355f, -0.3694643f, -0.0860025f,
  -0.0218331f, -0.3047621f, +0.3274208f, -0.0332496f, -0.1950676f, -0.1766455f, -0.0335251f, +0.3953017f,
  -0.1410582f, -0.0088034f, +0.4380005f, +0.0016662f, +0.3109709f, +0.0439979f, +0.1643152f, +0.3261378f,
  +0.2172768f, -0.0142043f, -0.0240620f, -0.1316928f, +0.2920614f, -0.2803600f, -0.0875553f, -0.0653720f,
  -0.0179574f, +0.2201728f, -0.1383850f, -0.1048842f, +0.2447005f, +0.0435655f, +0.0236800f, -0.0633099f,
  -0.0273888f, -0.0541877f, +0.3333850f, -0.4036293f, +0.3564129f, +0.2994947f, -0.0154010f, -0.2301219f,
  -0.2818339f, +0.2614176f, -0.0814343f, -0.0087152f, +0.4586264f, -0.4349490f, +0.1529788f, +0.3609897f,
  +0.0786430f, -0.0270557f, -0.2061156f, -0.2315899f, +0.3220530f, +0.0613122f, -0.1966421f, +0.0798919f,
  -0.0081219f, -0.0051172f, -0.0260395f, -0.1486704f, +0.1697752f, +0.3074589f, -0.0364899f, +0.1691348f,
  -0.0052209f, +0.0816379f, -0.0410360f, -0.1086403f, +0.0639557f, -0.1317160f, -0.0638407f, -0.0684794f,
  +0.2323125f, -0.1634689f, +0.0427336f, +0.1593638f, -0.1729070f, -0.0801237f, -0.3039432f, -0.1823876f,
  +0.3318530f, -0.2699874f, +0.0119080f, -0.0545847f, -0.2239391f, +0.0520991f, +0.1732754f, -0.1104368f
);

const float biases[4] = float[4](
  -0.0549128f, -0.1108677f, +0.0728660f, +0.0340581f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer46 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1191235f, +0.0486276f, +0.1932265f, -0.2430499f, -0.0646382f, +0.1619975f, +0.0654672f, +0.2508186f,
  -0.0447964f, -0.1440010f, +0.0341727f, -0.1176622f, +0.0025716f, +0.3299631f, +0.1284351f, -0.1261735f,
  +0.1295022f, +0.1661998f, -0.1921103f, +0.0424028f, +0.0428412f, -0.0582489f, +0.2663643f, -0.0026400f,
  -0.1724152f, -0.2373562f, +0.2048316f, -0.2489551f, -0.1763695f, +0.2860983f, +0.0517322f, -0.1517441f,
  -0.1158019f, -0.0275388f, -0.0709252f, -0.0511115f, +0.2788847f, +0.6819452f, +0.0421245f, -0.1491047f,
  +0.0737776f, +0.0465449f, +0.2688998f, -0.0170893f, +0.0945532f, -0.0127781f, +0.3509946f, -0.3584201f,
  +0.0051462f, -0.2355268f, -0.0549550f, -0.1243853f, -0.1192054f, +0.3149450f, -0.0418549f, -0.0445201f,
  +0.3252721f, -0.4151918f, -0.0743113f, +0.3339812f, -0.3461932f, +0.0574483f, +0.0889547f, -0.0180176f,
  +0.0853388f, +0.1712565f, -0.0497826f, -0.2426772f, -0.0371738f, -0.1547657f, +0.1855757f, -0.1553088f,
  +0.1108497f, +0.1508253f, -0.0648744f, +0.3312300f, -0.2446690f, -0.1014345f, -0.1416494f, -0.0276806f,
  +0.2439410f, -0.2257045f, +0.0196523f, +0.1210411f, -0.4929527f, -0.0545072f, -0.0388725f, +0.0977589f,
  +0.2011354f, +0.0185471f, +0.1713711f, +0.3480411f, -0.4846810f, -0.0415104f, -0.0628242f, +0.3284067f,
  +0.1186784f, -0.1458444f, -0.1725466f, -0.3126229f, +0.1342875f, +0.0930833f, -0.0303919f, -0.2582017f,
  +0.0586425f, +0.1123850f, -0.1195320f, +0.3505882f, +0.1712173f, -0.3456622f, -0.2227022f, -0.1011483f,
  +0.1444386f, +0.0996448f, -0.3105151f, +0.1564014f, -0.4438415f, +0.1906671f, -0.0585425f, +0.0163213f,
  -0.0481689f, -0.2306309f, +0.1166276f, -0.1375317f, +0.2535694f, +0.1939209f, -0.0365443f, +0.1130058f,
  -0.2787130f, +0.0046195f, +0.1313020f, +0.3078536f, +0.0709441f, -0.4602525f, -0.0034522f, -0.0607082f,
  -0.0886653f, +0.4840039f, +0.0392855f, -0.1786642f, +0.1325121f, +0.1774303f, +0.2696982f, -0.0129361f,
  -0.2364720f, +0.0737987f, +0.0266736f, -0.2652918f, -0.0896432f, +0.2272226f, +0.0088939f, +0.1104923f,
  -0.0018171f, -0.0371480f, -0.1111476f, -0.2056256f, +0.0934269f, +0.3770159f, -0.1395966f, -0.1881050f,
  +0.2653582f, +0.1298710f, -0.1136629f, -0.0823609f, +0.2029970f, +0.0965837f, +0.2799656f, -0.2599415f,
  -0.0176163f, -0.1960290f, +0.1873867f, -0.7008108f, +0.0008377f, +0.6737026f, -0.1699700f, +0.2477191f,
  -0.1862461f, -0.0689393f, +0.5313888f, -0.3418173f, -0.1764727f, +0.2460362f, +0.0678980f, -0.0770772f,
  +0.2097231f, +0.2794959f, +0.0867289f, -0.1286409f, -0.0831232f, +0.1375026f, +0.1316907f, +0.2524515f,
  -0.1467444f, -0.4270453f, -0.1192469f, +0.0935369f, -0.0496755f, +0.1854603f, -0.0038986f, +0.2706091f,
  -0.0340226f, -0.1143926f, +0.0510559f, -0.2826978f, -0.0145137f, +0.4446205f, -0.0873420f, -0.1846496f,
  -0.0276349f, +0.1778006f, -0.0959510f, -0.2745204f, +0.1456643f, -0.0716866f, -0.0195583f, -0.2520740f,
  -0.0161054f, +0.2266484f, -0.2177369f, -0.3767431f, +0.0938992f, +0.0565322f, +0.0911884f, -0.1225414f,
  +0.5232257f, -0.0940843f, -0.0712220f, +0.1166988f, -0.3478081f, -0.0626047f, -0.0232737f, +0.0216534f,
  -0.1207503f, -0.1191123f, +0.1434719f, -0.1315500f, -0.1399133f, -0.2883985f, +0.0723606f, +0.2415949f,
  +0.0682094f, +0.0384479f, -0.1213549f, +0.3295212f, +0.2662781f, +0.3006654f, -0.0690336f, -0.2415426f,
  +0.1098171f, +0.2622009f, -0.0865038f, +0.3505472f, +0.0276520f, -0.0828587f, -0.0471167f, +0.2220973f,
  +0.0335784f, +0.0664632f, +0.0642591f, +0.2230607f, -0.0741757f, -0.0188161f, +0.1507428f, +0.2381604f,
  -0.1021311f, -0.0170514f, -0.1374432f, -0.0652138f, +0.3934357f, +0.2379626f, -0.1584349f, -0.0455597f,
  +0.2160467f, +0.0702819f, -0.2258466f, +0.2453026f, +0.2247017f, -0.2944221f, -0.2880726f, -0.0306999f,
  -0.0263274f, -0.1278059f, -0.0798182f, +0.2303844f, -0.1532713f, -0.1399101f, +0.1089261f, -0.0633232f
);

const float biases[4] = float[4](
  +0.0500929f, -0.0359619f, -0.0178171f, +0.0948769f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer47 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0126567f, +0.1421193f, +0.0717962f, -0.3146560f, +0.0265291f, +0.0184807f, +0.2931359f, -0.2478326f,
  +0.0592821f, +0.2368705f, +0.0748371f, -0.1877245f, +0.2428863f, +0.2443374f, +0.3041085f, -0.0370675f,
  -0.2644553f, +0.1292416f, +0.0839078f, -0.0539147f, +0.3542617f, +0.0302195f, +0.0275169f, +0.2298088f,
  +0.0741485f, +0.0943492f, +0.2001213f, -0.2496345f, -0.0489283f, +0.0357733f, +0.2439587f, -0.0649180f,
  +0.1608726f, +0.0348322f, +0.3906059f, +0.0928781f, -0.2978870f, +0.1552349f, +0.3418986f, +0.1830263f,
  -0.4891877f, +0.1274457f, -0.0254599f, -0.1530486f, +0.2402502f, -0.0169077f, +0.2603062f, +0.2445899f,
  -0.0702916f, +0.3576845f, -0.2236370f, +0.1093680f, +0.0150766f, +0.1778910f, -0.1547926f, +0.0319684f,
  -0.0004366f, -0.2025927f, +0.3567983f, +0.4356043f, -0.0442343f, +0.0506230f, +0.1732418f, +0.0489166f,
  -0.1931486f, -0.2452909f, -0.1078344f, -0.0095119f, +0.2432097f, +0.0657428f, +0.2180920f, +0.0340126f,
  +0.1508403f, -0.3147755f, -0.3837012f, +0.1846023f, +0.1933473f, -0.2658078f, -0.1486828f, +0.0442770f,
  -0.1332296f, +0.2066785f, +0.1494958f, -0.1386937f, +0.0798735f, -0.2651351f, +0.1905084f, -0.1284863f,
  +0.0647111f, +0.0016933f, -0.0074455f, +0.1791726f, +0.2852545f, -0.0072701f, +0.1801566f, -0.1252873f,
  +0.1103850f, -0.4551720f, -0.0591267f, +0.5353562f, -0.1184367f, +0.0850259f, +0.0353485f, -0.1933115f,
  -0.0457067f, +0.1331268f, +0.1484162f, +0.1346932f, -0.2236539f, -0.0136892f, +0.0606755f, -0.1723521f,
  -0.1606057f, +0.1417834f, +0.2484638f, +0.1818101f, -0.0036105f, -0.2214312f, -0.1356711f, +0.1737617f,
  +0.1584909f, -0.1250695f, +0.0473242f, +0.0663636f, -0.3327027f, -0.0834227f, -0.1467124f, -0.0992823f,
  -0.1739760f, +0.2048004f, +0.2790813f, +0.0090463f, -0.2877172f, -0.0277634f, -0.2667212f, -0.0815822f,
  -0.3129554f, -0.0713200f, +0.0446939f, -0.1308316f, -0.3838179f, +0.0257780f, -0.3931578f, +0.1671313f,
  +0.1326318f, -0.1923904f, -0.0384804f, +0.2939789f, +0.0545109f, +0.2048978f, -0.0438548f, +0.2821724f,
  +0.0714067f, -0.2093448f, -0.0160549f, -0.1218605f, -0.1628208f, -0.3521127f, +0.0889554f, -0.0761383f,
  -0.2345924f, -0.1506723f, +0.0974400f, +0.0443832f, +0.2093212f, -0.0170720f, +0.0698061f, +0.3212344f,
  +0.0049519f, -0.1385604f, +0.0954246f, +0.1450257f, +0.0594149f, -0.2196034f, -0.1632886f, -0.1171139f,
  +0.0395255f, -0.1989458f, +0.1788890f, -0.0163934f, +0.0941785f, -0.0076203f, +0.1087822f, -0.2647436f,
  -0.2823281f, -0.1874366f, +0.2324655f, -0.2884106f, +0.0921058f, +0.4950465f, +0.0186061f, +0.1736235f,
  -0.2404864f, +0.1941776f, +0.1717294f, -0.0001109f, -0.2186931f, -0.2704839f, +0.0801434f, +0.3094850f,
  -0.0218589f, +0.0897822f, -0.0217211f, -0.0519245f, -0.2077820f, -0.0660858f, -0.0497793f, -0.1119589f,
  -0.4063668f, -0.0420647f, +0.1527727f, -0.2425300f, -0.1678266f, +0.2776799f, -0.0157108f, +0.1621396f,
  +0.0657712f, +0.0138896f, -0.1603525f, -0.0771741f, -0.1772212f, +0.1479501f, -0.0661855f, -0.0591741f,
  -0.0985795f, +0.0171790f, +0.2193938f, -0.0135133f, -0.1340871f, +0.0992371f, +0.0899250f, -0.1142602f,
  +0.0374045f, -0.1230798f, +0.0979303f, +0.0189051f, +0.0108003f, +0.0862901f, -0.0643881f, -0.0989481f,
  -0.0930192f, +0.1796453f, -0.1910129f, +0.3367669f, +0.1690186f, -0.0542179f, -0.0703654f, +0.1650538f,
  -0.1774669f, +0.0449212f, +0.0449871f, +0.0685021f, +0.2199281f, -0.1715221f, -0.2341000f, +0.0155586f,
  +0.0969912f, -0.0482756f, -0.1319031f, +0.2598403f, +0.0604631f, -0.0653544f, -0.0341427f, +0.0464791f,
  -0.2079524f, +0.2298849f, -0.1127062f, +0.0349704f, -0.1037810f, -0.2744296f, +0.0105971f, +0.1679161f,
  -0.1502644f, -0.1478857f, -0.1303765f, -0.1156001f, +0.1875447f, +0.5297245f, -0.2802226f, -0.3208812f,
  +0.2380273f, -0.1758091f, -0.2264514f, -0.3847726f, +0.0610689f, -0.1771178f, -0.3156299f, +0.0402876f
);

const float biases[4] = float[4](
  +0.0028948f, +0.1155665f, +0.0449519f, -0.4294534f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer47 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1226108f, +0.0713589f, -0.1975362f, +0.1537705f, +0.0953008f, -0.3289973f, +0.3390845f, -0.2630549f,
  +0.0306497f, +0.1034855f, -0.0661522f, +0.1069572f, +0.5509399f, -0.3761089f, +0.3855832f, -0.1085283f,
  -0.0196751f, +0.2347586f, -0.1658401f, +0.2452513f, +0.2583865f, -0.0974030f, +0.1038490f, +0.0466179f,
  +0.2204108f, +0.1164212f, -0.0321187f, -0.1766736f, +0.0854109f, +0.3735573f, +0.2332952f, -0.0252716f,
  +0.1719346f, +0.0798604f, -0.1245700f, -0.1511875f, -0.0161998f, +0.1584435f, +0.1963817f, +0.3718956f,
  +0.1618466f, +0.0971428f, +0.0600232f, +0.1909046f, -0.0539498f, +0.0428387f, -0.4764128f, +0.1950495f,
  +0.1065458f, +0.4929564f, -0.0997189f, -0.5663062f, +0.0620083f, +0.4986882f, +0.1661449f, -0.2114992f,
  +0.2094013f, -0.0216354f, +0.1775457f, +0.1551560f, +0.0702638f, +0.0731438f, -0.1611378f, +0.1814877f,
  -0.0862135f, -0.0918641f, -0.1849164f, +0.2281338f, -0.0659044f, -0.1733605f, -0.2637041f, +0.1378665f,
  -0.1202939f, +0.1337409f, -0.0373670f, +0.4038550f, -0.1235443f, +0.0900205f, -0.2304022f, -0.0363003f,
  -0.1325581f, -0.2104863f, +0.3395074f, +0.1330762f, -0.2740374f, +0.1895706f, -0.0369187f, +0.0028506f,
  -0.0152088f, -0.3338813f, +0.0067386f, -0.0843136f, -0.0964798f, +0.0638559f, -0.2330757f, +0.1787696f,
  +0.1434061f, -0.3764541f, -0.0711854f, +0.2669815f, +0.1055657f, -0.3324975f, -0.3092372f, +0.0247147f,
  -0.3481724f, -0.1335115f, +0.2021061f, -0.0173522f, +0.1082182f, -0.1654122f, -0.3706483f, -0.0183571f,
  -0.0363896f, +0.0074094f, -0.1083751f, +0.1590772f, -0.0813127f, -0.1916619f, +0.2310417f, +0.1108955f,
  -0.1569011f, -0.0007205f, +0.1682858f, +0.1004846f, -0.0802680f, -0.3312543f, -0.0688858f, -0.0899806f,
  -0.0800527f, -0.0307127f, +0.2590493f, -0.2143653f, +0.2630744f, -0.0003806f, -0.0003841f, +0.0942856f,
  -0.0747815f, +0.1943377f, +0.1325941f, -0.1736092f, -0.1858118f, -0.1909825f, -0.1291952f, -0.0021671f,
  +0.1615097f, +0.5564392f, -0.2352590f, -0.0222639f, -0.0176699f, +0.3763622f, +0.4500704f, +0.2935231f,
  +0.1853541f, +0.1169913f, -0.2068628f, -0.3806293f, -0.2340590f, -0.0370576f, +0.0990131f, +0.1572467f,
  +0.0010527f, +0.0821036f, +0.1600459f, -0.0549946f, +0.2752584f, -0.1891530f, -0.1480077f, -0.0272108f,
  +0.0575703f, +0.4529649f, +0.0739873f, -0.0069274f, +0.0251011f, -0.1829971f, -0.2219564f, +0.5267000f,
  +0.4314591f, -0.4110131f, -0.1225756f, -0.0531760f, -0.1200225f, -0.1859863f, +0.0602441f, +0.1567214f,
  -0.0356993f, +0.0637323f, +0.0005631f, +0.1910563f, +0.2133237f, -0.0715440f, -0.0896652f, -0.0828380f,
  +0.0568721f, +0.1387171f, +0.1155770f, -0.0102397f, +0.3372635f, +0.1994027f, +0.0984925f, -0.0372293f,
  +0.0018673f, -0.0251815f, +0.0660985f, +0.0713646f, +0.0406960f, +0.1356461f, -0.0425248f, +0.0207688f,
  +0.2119477f, +0.0115349f, -0.1520206f, -0.1417297f, +0.2134525f, -0.0436895f, +0.0284406f, -0.0544026f,
  +0.0495804f, +0.1178475f, +0.0832030f, -0.2200867f, -0.0477278f, -0.1348650f, +0.3054845f, -0.1250946f,
  -0.0738253f, +0.1385072f, -0.1687407f, -0.1130357f, +0.0776034f, -0.3955921f, -0.0572149f, -0.2676578f,
  -0.1074997f, +0.2698884f, -0.6748831f, +0.2290203f, -0.1448716f, -0.1335015f, +0.0980067f, -0.0260367f,
  +0.2195498f, -0.1945765f, -0.2382030f, -0.1480047f, -0.1498231f, +0.0868335f, +0.2111791f, -0.2134273f,
  -0.0304081f, +0.0692779f, -0.2499000f, -0.0100900f, +0.3563919f, +0.1495852f, +0.1481502f, -0.2428499f,
  -0.0097933f, +0.0172081f, -0.1027894f, +0.6329329f, -0.1417575f, +0.0302398f, +0.5435984f, -0.0991452f,
  -0.1006196f, -0.2316828f, +0.0112514f, -0.2081487f, +0.2430843f, +0.2033770f, +0.0537547f, +0.0817430f,
  +0.2479512f, +0.1066766f, -0.0574114f, +0.1179741f, +0.0732814f, +0.0433245f, -0.0759747f, +0.1212042f,
  +0.3496366f, -0.0686796f, +0.2397418f, +0.6000178f, +0.0090511f, -0.0750009f, +0.0882617f, -0.1486075f
);

const float biases[4] = float[4](
  -0.1115017f, +0.1192180f, -0.2386936f, +0.0365008f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer48 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1034603f, -0.0976791f, +0.1521213f, -0.3651270f, -0.1673817f, +0.0465656f, -0.0827340f, -0.4434620f,
  +0.1955595f, +0.1059748f, -0.0926113f, +0.0259071f, -0.3147246f, -0.0386871f, +0.0046768f, -0.2037562f,
  -0.0954392f, -0.1828728f, -0.0157481f, -0.4007022f, +0.1414290f, +0.1331757f, -0.1084045f, -0.1877135f,
  +0.1900555f, +0.1996345f, +0.2752330f, -0.3835012f, -0.0357890f, -0.0256730f, +0.0560047f, +0.0781546f,
  -0.2249687f, -0.4305635f, +0.1744796f, +0.1672370f, -0.2729746f, +0.0340258f, -0.2459449f, -0.1446069f,
  -0.1851258f, +0.1174670f, +0.0716637f, -0.2668451f, +0.1772288f, -0.0910000f, -0.2731635f, -0.2892906f,
  +0.0137536f, +0.1269053f, +0.1505003f, -0.1975320f, +0.1004563f, +0.0155396f, +0.0624340f, -0.2827028f,
  +0.0554114f, -0.0732917f, -0.0475762f, +0.2067246f, -0.0056986f, +0.2031453f, +0.2392289f, -0.1405999f,
  -0.3526236f, -0.1845676f, -0.2043444f, -0.0302346f, +0.3610805f, +0.2364608f, -0.1766276f, -0.3115213f,
  -0.2398864f, -0.0445909f, -0.0139743f, +0.0268630f, +0.1898807f, +0.1843820f, +0.0717727f, +0.1742865f,
  -0.1417872f, -0.0279261f, -0.1167699f, +0.4612388f, -0.0136441f, +0.2384542f, +0.0452073f, +0.0368544f,
  +0.2674503f, -0.3521469f, -0.1588620f, -0.4223550f, -0.4707719f, +0.0214764f, +0.1117333f, -0.2583988f,
  -0.1043424f, -0.3477173f, +0.2942027f, -0.4465875f, -0.1138495f, -0.2234527f, +0.1469613f, +0.1930117f,
  +0.0134662f, +0.1284655f, +0.5458351f, -0.9345500f, -0.0434914f, -0.1375580f, +0.7633365f, +0.6002441f,
  +0.3521878f, +0.1518813f, +0.2661258f, -0.2060499f, -0.1681380f, +0.2696983f, -0.3251163f, -0.0330459f,
  -0.1231858f, -0.1779019f, +0.3966344f, -0.1368097f, -0.1075212f, -0.0328973f, -0.0101873f, -0.1866132f,
  -0.2178782f, -0.1255616f, +0.2487926f, -0.0152956f, -0.0075370f, -0.2138973f, +0.3219059f, -0.1182231f,
  -0.0869908f, +0.0508934f, +0.1543107f, +0.1748134f, -0.1784291f, -0.1036242f, +0.0583916f, +0.0292654f,
  +0.2722198f, +0.0885017f, +0.1417684f, +0.2326588f, -0.1203676f, -0.1226609f, +0.0400918f, -0.3417696f,
  -0.0068034f, +0.2770959f, +0.2368585f, -0.0089899f, +0.0529142f, -0.1788910f, -0.0747802f, -0.0505358f,
  +0.1069954f, -0.0014621f, +0.0960428f, +0.2846609f, -0.0498849f, -0.0030962f, +0.0130041f, -0.1611510f,
  -0.0570093f, -0.2587882f, -0.0220942f, +0.0248941f, -0.0301268f, -0.0369061f, -0.1753309f, +0.0122117f,
  -0.0233753f, -0.1727302f, -0.1482581f, -0.6757156f, +0.1336436f, -0.3102381f, -0.1581677f, -0.0885914f,
  -0.2334135f, -0.0702213f, -0.0201407f, +0.1000143f, -0.2385004f, +0.0094643f, +0.3728474f, +0.3607512f,
  +0.2873249f, -0.1731983f, +0.1850270f, +0.0715839f, -0.0303476f, -0.0307477f, -0.1348755f, -0.0443653f,
  -0.0584834f, -0.1736230f, -0.1636895f, -0.3717554f, +0.2970105f, +0.0792473f, -0.1935446f, +0.1177308f,
  +0.0366036f, +0.3210085f, -0.1924279f, +0.0997857f, +0.2246112f, -0.0815401f, +0.1691386f, +0.0586300f,
  -0.1348917f, +0.0251928f, +0.4028013f, -0.0683901f, +0.3903444f, -0.0587940f, +0.2747590f, -0.2071343f,
  -0.0985723f, +0.0000635f, +0.1787727f, +0.2341943f, +0.1486455f, +0.0176748f, +0.0004308f, +0.1077947f,
  -0.0868520f, -0.0238989f, +0.0686174f, -0.0697243f, +0.2519554f, +0.0076586f, +0.0768994f, +0.0428378f,
  -0.3841210f, +0.1760431f, +0.5429744f, -0.6826317f, +0.2390426f, -0.2150479f, +0.2909735f, -0.0190589f,
  -0.2930519f, +0.1519012f, +0.2475632f, +0.0663515f, +0.1029625f, +0.0135908f, -0.0418769f, -0.1874555f,
  -0.0761411f, -0.0921163f, +0.0535098f, -0.0825966f, +0.0178553f, +0.0739292f, +0.1573430f, -0.1494990f,
  -0.5143801f, +0.1229109f, +0.2934604f, -0.3823689f, -0.0975730f, +0.0299267f, +0.1724218f, -0.2840589f,
  -0.0483246f, +0.2320414f, +0.1983056f, +0.0822165f, -0.2191664f, -0.1958667f, +0.4793117f, +0.0391260f,
  +0.1180083f, -0.1542891f, -0.0548765f, -0.0844457f, -0.1584429f, -0.3327417f, +0.1756563f, +0.1228765f
);

const float biases[4] = float[4](
  -0.0641149f, +0.0488967f, +0.0793758f, -0.0888608f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer48 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0022644f, -0.0317117f, +0.0161294f, -0.0366286f, +0.0242636f, -0.1465972f, -0.0913229f, +0.1414510f,
  +0.0677594f, +0.0765000f, +0.0365297f, -0.2164606f, -0.3376929f, -0.2249137f, +0.0259044f, -0.1114621f,
  +0.1533014f, +0.0748134f, +0.0864736f, +0.2651601f, -0.4994828f, -0.4472360f, -0.0902864f, +0.0836340f,
  +0.1175762f, -0.0905665f, -0.0026685f, -0.3135333f, -0.0210877f, +0.0497107f, +0.0397905f, +0.0004155f,
  -0.1448461f, +0.3809358f, +0.1067021f, -0.1753219f, -0.1729867f, -0.0516201f, -0.2735256f, -0.3304638f,
  +0.0209396f, -0.0609677f, -0.0824015f, -0.3370345f, -0.4469627f, -0.3988452f, -0.1172183f, +0.0332319f,
  +0.0060037f, -0.3337659f, -0.2019137f, -0.1217517f, +0.0246539f, +0.0075436f, -0.0285411f, +0.0767654f,
  -0.1559346f, -0.2152270f, +0.0381704f, +0.0568403f, -0.0743191f, +0.1251318f, -0.1040004f, +0.0839461f,
  -0.0203753f, -0.7449704f, -0.0511532f, +0.1604761f, +0.1125418f, -0.0023663f, +0.0524365f, +0.2483086f,
  +0.0373987f, -0.0060146f, -0.2501253f, +0.0495549f, -0.1759365f, -0.1217097f, -0.0908393f, +0.0200313f,
  -0.0639156f, -0.0501231f, -0.1108771f, -0.8410103f, -0.3086676f, +0.1518892f, -0.3281715f, -0.3119856f,
  +0.0605213f, -0.0624902f, -0.0681835f, +0.1886665f, -0.4355476f, +0.0646704f, -0.2074051f, -0.0655228f,
  +0.2338931f, +0.2826805f, -0.2600847f, -0.0713427f, -0.1851808f, +0.0476804f, -0.1160336f, +0.0062391f,
  -0.5348152f, +0.0770873f, +0.3760769f, -0.1859165f, -0.2767377f, -0.1143644f, +0.1638010f, -0.2594858f,
  -0.1797190f, +0.2239740f, +0.3871527f, -0.0120311f, -0.1944419f, -0.0614772f, -0.4174073f, +0.0906202f,
  -0.0569542f, -0.1174891f, -0.0101793f, -0.0068177f, +0.0650767f, -0.1878703f, +0.1466205f, -0.1697354f,
  -0.2739938f, +0.0964558f, +0.3132303f, -0.2128426f, +0.1404991f, -0.0468381f, +0.0853736f, +0.2624420f,
  -0.1167124f, -0.0776156f, -0.0110567f, +0.0826198f, +0.3989709f, -0.1422054f, -0.1982069f, -0.0621746f,
  -0.0704582f, +0.0960129f, -0.0195455f, +0.2613020f, +0.2007007f, +0.0033750f, -0.0019980f, +0.2851282f,
  -0.1415473f, +0.1213506f, +0.2598754f, +0.1770205f, -0.0986249f, +0.0524873f, +0.0154978f, -0.0849118f,
  -0.1407105f, +0.1528829f, -0.3403505f, -0.0189532f, -0.3029931f, -0.1507897f, +0.2759365f, +0.2113377f,
  -0.1897444f, +0.2342265f, +0.0902885f, -0.3276567f, +0.3324284f, +0.1040241f, +0.1756221f, +0.1354148f,
  +0.0189153f, -0.0115826f, -0.3378820f, +0.0578826f, -0.1693031f, +0.2353120f, -0.1620308f, -0.0100082f,
  -0.1251235f, -0.2334934f, -0.1563783f, -0.0782265f, -0.1497061f, -0.0488889f, +0.2193655f, +0.0433248f,
  -0.3754555f, +0.1919918f, -0.1274271f, -0.0294321f, -0.2377097f, +0.4005924f, +0.1511572f, +0.0481143f,
  -0.1359763f, -0.1089823f, +0.1061983f, -0.1191141f, -0.2633758f, -0.0601550f, +0.1015528f, +0.0640395f,
  -0.1419662f, -0.2778033f, -0.0631181f, +0.1733651f, -0.3213424f, -0.0920448f, -0.0305789f, +0.0130683f,
  +0.1692897f, -0.1942621f, +0.0742401f, -0.3664677f, -0.1054317f, -0.1160820f, +0.1658027f, -0.0321843f,
  +0.2266281f, +0.1498312f, +0.2250953f, +0.5702385f, -0.0308835f, -0.5945707f, -0.2307337f, -0.0463109f,
  +0.0655550f, +0.1472260f, +0.0220737f, +0.0482615f, -0.1022068f, -0.1349022f, +0.0544289f, +0.2478026f,
  -0.1758736f, +0.1327192f, -0.2157039f, -0.1192415f, +0.0269356f, -0.4263422f, -0.0841389f, +0.1243648f,
  -0.0282559f, -0.2315616f, -0.1151819f, +0.1195204f, -0.0970726f, -0.1332322f, +0.0265268f, +0.0654574f,
  +0.2755544f, +0.2136308f, +0.2260317f, -0.0921844f, -0.0761255f, -0.0678279f, +0.0948060f, +0.1795224f,
  -0.0268951f, -0.3058119f, -0.0867899f, -0.0357187f, +0.1223941f, -0.1766447f, +0.0180776f, +0.0584908f,
  +0.1563061f, +0.0450190f, +0.1650547f, +0.0358309f, +0.0474836f, -0.2578976f, -0.1783226f, -0.0379821f,
  +0.1217781f, -0.0656411f, +0.0569989f, +0.1205606f, +0.1834201f, -0.1235619f, +0.1694319f, +0.3105755f
);

const float biases[4] = float[4](
  +0.0724857f, +0.0377987f, +0.0063393f, +0.0268796f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer49 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2599341f, +0.1106458f, -0.0036149f, -0.3016243f, +0.1600761f, -0.2574653f, -0.0639433f, +0.1046524f,
  +0.2452208f, -0.3948807f, -0.0427936f, +0.2766857f, -0.0255764f, +0.1483085f, +0.0610811f, -0.2434704f,
  +0.0799413f, +0.1816594f, +0.4261010f, +0.4330389f, -0.0649622f, -0.2567474f, +0.0341820f, +0.1383902f,
  -0.2437629f, -0.0867919f, -0.1275275f, -0.3734797f, +0.2480796f, +0.0482985f, -0.0080451f, +0.0656370f,
  -0.0312649f, -0.3457226f, +0.0692361f, +0.2148082f, +0.2157725f, +0.0009612f, +0.3578922f, +0.0457673f,
  +0.0475376f, -0.0435448f, +0.2076149f, +0.1250418f, +0.4757679f, -0.0050873f, +0.1708419f, -0.1002685f,
  +0.1751288f, +0.2427495f, +0.0511274f, +0.0170239f, +0.3338144f, +0.1538793f, +0.0618050f, +0.1883053f,
  -0.0214623f, +0.3218589f, -0.0036074f, -0.1412821f, +0.3503900f, -0.0027831f, +0.2861226f, +0.0803008f,
  -0.1162282f, +0.1500347f, +0.0674342f, +0.0705617f, +0.0975718f, -0.1855451f, +0.1977769f, +0.0768524f,
  -0.2039781f, -0.0628800f, +0.0901112f, -0.2056257f, +0.2522045f, -0.1742616f, +0.1536897f, +0.1148508f,
  -0.1523006f, -0.2520608f, -0.1599959f, -0.3530066f, +0.1537019f, +0.0932556f, -0.3410028f, +0.1139201f,
  +0.1504876f, +0.1725601f, -0.2677036f, +0.2300748f, -0.2014649f, +0.1293399f, +0.0280396f, +0.0398790f,
  -0.1068380f, +0.1105347f, +0.1269640f, -0.2964222f, +0.2283577f, -0.1268020f, +0.0332548f, +0.1123915f,
  +0.1439416f, -0.1008564f, -0.1537589f, -0.3436855f, -0.3137954f, +0.1274651f, -0.2751152f, -0.2936273f,
  +0.2104863f, +0.0299872f, +0.1812381f, +0.1914164f, +0.0876299f, -0.2266458f, -0.3997741f, -0.0873050f,
  +0.0033965f, +0.1237608f, +0.1053378f, -0.0197651f, +0.1720589f, -0.0483119f, +0.1116355f, -0.0936012f,
  -0.0620003f, +0.1417010f, -0.0463506f, -0.3046657f, -0.2422912f, -0.0265537f, -0.0290793f, -0.0738456f,
  +0.4576139f, +0.2713651f, +0.2129610f, +0.2259858f, -0.1293828f, +0.1760470f, -0.0936921f, -0.1041296f,
  +0.2225376f, +0.2700805f, -0.3259302f, +0.1627991f, -0.4226379f, -0.0765345f, -0.0811326f, -0.4064069f,
  +0.4914150f, +0.0040791f, +0.0418563f, -0.0972705f, +0.3531907f, +0.1803386f, +0.5903445f, -0.1853333f,
  +0.0853755f, -0.1099719f, -0.0910117f, -0.2085268f, +0.3853145f, +0.2473411f, +0.4218484f, -0.0238912f,
  -0.1591997f, +0.0082987f, -0.1411128f, +0.3466916f, -0.4359469f, -0.0550421f, -0.0568104f, -0.1490952f,
  -0.1101128f, +0.5387426f, -0.0313988f, -0.1388951f, +0.3509072f, +0.2904269f, -0.1535590f, +0.1303286f,
  +0.0550416f, +0.2127024f, -0.1645001f, -0.3090179f, -0.0161640f, +0.2671510f, +0.0244161f, +0.3881693f,
  -0.0808948f, +0.1813700f, +0.1759646f, -0.0641156f, -0.3282318f, -0.1064711f, +0.0941525f, -0.2357790f,
  +0.0934039f, +0.1496459f, -0.1750150f, -0.0080617f, +0.2668701f, -0.4315772f, -0.0921274f, +0.0180172f,
  +0.0361977f, -0.0803796f, +0.0001945f, +0.3547600f, +0.0999061f, +0.1481563f, +0.1376571f, -0.0004693f,
  -0.2959379f, +0.0100768f, +0.1556846f, +0.2322648f, +0.3249143f, -0.4556884f, -0.0919887f, -0.1365643f,
  -0.4637737f, -0.4512779f, +0.0225239f, -0.1583339f, +0.1351606f, -0.2467017f, -0.0975055f, +0.3833958f,
  -0.2035463f, -0.0008461f, -0.2828063f, +0.2158830f, -0.1092615f, -0.2020391f, +0.2715330f, -0.1591013f,
  -0.3393517f, -0.0795318f, +0.1877937f, -0.0885606f, +0.0219392f, +0.0049696f, +0.0388803f, +0.1672983f,
  +0.1609729f, -0.2577047f, +0.3019658f, +0.0938009f, +0.1960283f, +0.3346359f, -0.0750968f, +0.1262547f,
  +0.3391296f, -0.1260502f, +0.2377223f, -0.1418228f, -0.0299760f, -0.0593327f, -0.0239063f, -0.0766580f,
  +0.0037467f, +0.0010654f, -0.2404885f, -0.1151853f, -0.1627438f, +0.0952476f, -0.2415859f, -0.0070135f,
  +0.2083541f, -0.0225519f, +0.1483516f, +0.0480424f, -0.0652073f, +0.2279296f, -0.0519326f, +0.1969412f,
  +0.1356074f, -0.1415920f, -0.0765173f, +0.1097811f, -0.1497293f, +0.0465219f, +0.0811088f, +0.0552125f
);

const float biases[4] = float[4](
  -0.0190883f, +0.0666022f, -0.1136037f, +0.0891293f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer49 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0360254f, -0.0540127f, +0.2115625f, -0.2880374f, -0.1796076f, +0.1304125f, -0.1019073f, -0.1641379f,
  -0.0120062f, -0.1861365f, -0.3955985f, +0.0394269f, +0.2403396f, +0.2062224f, -0.0259678f, -0.1186844f,
  -0.0356601f, +0.0305660f, -0.1703699f, -0.2226113f, -0.1726587f, +0.1832049f, +0.1818295f, +0.1444115f,
  +0.0458705f, -0.0273800f, -0.2207590f, -0.0508278f, -0.1055267f, +0.2860838f, +0.1196194f, -0.0833111f,
  -0.0855791f, +0.3342620f, -0.2318943f, -0.0289730f, +0.0843485f, -0.2093025f, +0.0613499f, -0.0418340f,
  +0.0554005f, +0.1795868f, +0.3255359f, -0.0030344f, +0.1715233f, -0.3416754f, -0.0287086f, +0.0147295f,
  +0.0451734f, +0.2718948f, +0.1204677f, +0.1472157f, +0.0367923f, +0.0036409f, +0.0195740f, +0.1267291f,
  +0.0219006f, -0.1602463f, +0.7302867f, +0.1158932f, -0.2813710f, -0.4800235f, -0.1289471f, -0.0205255f,
  +0.0075373f, -0.1099505f, +0.0028073f, +0.1554888f, +0.1049123f, +0.3619047f, -0.1513347f, -0.0213957f,
  -0.1664943f, -0.0589874f, -0.0502115f, +0.1504355f, +0.0105735f, -0.0712263f, -0.4403360f, +0.1692886f,
  +0.1552984f, +0.3153152f, +0.2143493f, -0.0006994f, +0.1384488f, +0.2252539f, +0.5010729f, +0.2245713f,
  -0.2149463f, -0.3213397f, +0.6994737f, +0.0319174f, +0.3980951f, +0.3451876f, -0.0859319f, -0.0205858f,
  -0.0282410f, -0.0517601f, -0.0433248f, +0.4127486f, +0.1171070f, -0.2865830f, -0.2824764f, +0.0010971f,
  +0.4216326f, +0.6042794f, -0.1749940f, -0.2276928f, -0.0493002f, -0.0949552f, +0.1063304f, +0.2316955f,
  -0.0666568f, -0.5567635f, +0.0325947f, -0.1096167f, +0.1722591f, +0.2231254f, -0.0453656f, +0.3408366f,
  -0.0083994f, +0.1269680f, -0.0666338f, +0.3189221f, -0.2550170f, -0.2652105f, +0.0418883f, -0.2217781f,
  +0.0055004f, +0.3175415f, +0.0703073f, +0.1319776f, +0.1035184f, -0.0424350f, -0.2131936f, -0.0138288f,
  +0.0815160f, -0.3337823f, -0.0829514f, -0.0711779f, +0.0459696f, +0.3143343f, -0.2191820f, +0.0329722f,
  +0.1254529f, -0.2519678f, +0.3104144f, +0.0373158f, +0.0109969f, -0.0097991f, +0.0967378f, -0.5032358f,
  -0.1332086f, +0.1354655f, -0.1729181f, +0.1011471f, -0.1521230f, -0.0424021f, +0.2524506f, +0.0051112f,
  +0.2503709f, -0.0773631f, -0.1697684f, +0.3932289f, -0.0858857f, +0.0301435f, -0.0450303f, +0.2388757f,
  -0.0025907f, -0.1646990f, -0.0956970f, -0.6635762f, +0.0534172f, +0.4567454f, +0.0542261f, -0.0773101f,
  +0.0561576f, +0.2321454f, +0.4664564f, -0.0816803f, -0.1328686f, -0.0474744f, -0.1505071f, +0.5040653f,
  -0.0195764f, +0.3694372f, +0.1470657f, +0.2211466f, -0.0302322f, +0.2190486f, +0.0356394f, +0.0341746f,
  -0.0210230f, -0.0341039f, -0.3382844f, -0.4074652f, +0.1670898f, +0.1637295f, +0.2172280f, -0.0325728f,
  +0.0345778f, +0.0301144f, -0.4488372f, +0.1155867f, +0.0135869f, -0.2154209f, -0.0251922f, -0.2110229f,
  +0.1315385f, +0.1329518f, -0.1052807f, +0.3169841f, +0.1571697f, -0.2892125f, -0.0372408f, -0.2079099f,
  -0.0974827f, -0.0363241f, -0.2972521f, -0.0537471f, -0.2927170f, -0.0683196f, -0.2760793f, +0.0872355f,
  +0.0625364f, -0.0376346f, +0.4653836f, -0.1366678f, -0.0454292f, +0.2321991f, +0.1936309f, +0.0459592f,
  -0.1267053f, +0.2467326f, -0.0084629f, +0.4443241f, -0.2132764f, -0.1893698f, -0.1338851f, -0.2861938f,
  +0.0875813f, +0.1432452f, +0.0585668f, +0.2387273f, +0.2489814f, +0.1152494f, -0.0651065f, +0.2572313f,
  -0.1156725f, +0.0955106f, -0.3712780f, -0.1263385f, -0.3511630f, -0.1901938f, -0.0452546f, -0.1408349f,
  +0.0291772f, +0.0001135f, +0.2872510f, +0.2844774f, -0.4598521f, -0.2502257f, -0.1065462f, -0.0643460f,
  +0.0426306f, -0.0275902f, +0.0066540f, -0.3345903f, +0.1569471f, +0.0086160f, +0.0372463f, +0.0185897f,
  -0.1543084f, +0.0934461f, -0.1589976f, -0.1129239f, -0.1287710f, +0.4635705f, +0.1194509f, +0.2010779f,
  +0.1308064f, -0.0991457f, -0.1168051f, -0.2963916f, -0.1255171f, +0.0345834f, +0.0873649f, -0.2563242f
);

const float biases[4] = float[4](
  +0.0453506f, -0.0234571f, -0.1113976f, -0.1244532f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer50 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1619908f, -0.4071494f, +0.3392745f, -0.0496583f, -0.1266308f, -0.0416827f, +0.0973654f, -0.0889513f,
  +0.2307399f, +0.0004412f, +0.0615419f, -0.2458623f, +0.0206662f, -0.0494426f, -0.0863715f, -0.0185191f,
  -0.0718219f, +0.1625173f, +0.3860700f, -0.0148928f, +0.0582103f, -0.0856555f, -0.0372666f, +0.0123299f,
  -0.1992242f, -0.2547574f, +0.3354816f, -0.1227298f, -0.1093194f, +0.1035418f, +0.0861521f, -0.1626981f,
  +0.2651285f, +0.0847290f, -0.2162468f, -0.1996752f, -0.0792030f, +0.0605107f, -0.3034754f, +0.1677578f,
  -0.1247326f, -0.0314641f, +0.4595091f, +0.3129797f, +0.1325701f, -0.0851849f, -0.0081301f, +0.0836548f,
  -0.2329009f, +0.0428991f, +0.2677351f, +0.3154943f, +0.1001576f, +0.2171629f, -0.1167228f, +0.0067148f,
  -0.1746063f, -0.0592718f, +0.0145266f, +0.3039842f, +0.1650701f, +0.2710011f, -0.2402763f, -0.2747028f,
  +0.2289567f, +0.1793872f, +0.1524452f, +0.2583534f, +0.0261558f, +0.2286096f, -0.0309924f, +0.1980839f,
  -0.0864258f, -0.3672043f, +0.2528910f, -0.0452841f, +0.0798965f, -0.0000002f, +0.0827170f, -0.1767741f,
  -0.3476893f, -0.1431485f, +0.1942041f, -0.0294724f, +0.0070463f, +0.1341248f, +0.0154588f, -0.2882407f,
  -0.1096904f, +0.0710621f, -0.0748260f, -0.2463287f, -0.0859830f, -0.0131064f, -0.0290354f, -0.2795763f,
  +0.2758186f, -0.0302217f, -0.0744094f, -0.0060340f, -0.1254984f, -0.5953093f, +0.0270117f, +0.0614955f,
  +0.1589922f, +0.2183599f, -0.3103179f, +0.1332025f, -0.4490200f, +0.4845748f, -0.3263443f, -0.3201858f,
  +0.0488212f, -0.0926715f, +0.0016907f, -0.1374577f, +0.2463306f, -0.1527609f, +0.1645188f, +0.0344645f,
  +0.2395507f, +0.0175505f, +0.1347909f, -0.0720473f, +0.0379566f, -0.4611957f, +0.1213390f, -0.0675172f,
  +0.2610275f, +0.1559248f, -0.0129961f, +0.3442270f, -0.2753242f, +0.0732940f, -0.1925375f, -0.0713593f,
  +0.0222386f, +0.0176233f, -0.0037842f, -0.1225464f, +0.1704580f, -0.3687015f, -0.1774369f, +0.2933561f,
  -0.0796892f, -0.2313877f, +0.0901652f, -0.0140138f, -0.0254773f, +0.0958829f, -0.2049742f, +0.1245948f,
  +0.1983101f, +0.1229139f, +0.2012479f, -0.0219204f, -0.2856608f, +0.0453153f, +0.2313385f, +0.0415107f,
  +0.1528342f, -0.1734466f, -0.0515253f, +0.1474377f, +0.0282564f, -0.0278885f, -0.0602689f, +0.2565645f,
  -0.1772242f, -0.2370491f, +0.3535466f, -0.1323844f, -0.2929331f, +0.2464682f, -0.3125660f, -0.0877579f,
  +0.0276444f, -0.0066267f, +0.1141712f, -0.3049672f, +0.4618466f, -0.2215561f, -0.2272640f, +0.0156182f,
  +0.0014441f, -0.1283151f, -0.2412675f, -0.1264006f, +0.0204538f, -0.1517126f, +0.0291862f, -0.0122184f,
  -0.5855424f, +0.1097881f, +0.2070771f, +0.0354429f, -0.0998747f, -0.1479096f, -0.2101315f, +0.0259710f,
  -0.0385871f, +0.2098804f, +0.2290092f, +0.0469287f, +0.1927287f, -0.4689316f, -0.5306068f, -0.2059938f,
  +0.1318414f, -0.1579206f, -0.1837141f, -0.1112757f, -0.1156283f, +0.0189478f, +0.1105813f, -0.0577651f,
  +0.4407563f, -0.0465638f, -0.2739868f, +0.1802679f, -0.2682909f, +0.0611474f, +0.1882770f, +0.1105186f,
  +0.1893865f, +0.2122167f, -0.0905034f, +0.1436019f, -0.2099977f, -0.0013940f, +0.2244697f, +0.2809414f,
  -0.2604280f, +0.0730772f, -0.2355889f, -0.0054530f, +0.0789337f, +0.3055901f, +0.0882782f, +0.0407455f,
  +0.2792048f, -0.4918996f, +0.0003793f, -0.0157919f, -0.1902460f, -0.1915119f, +0.0823885f, -0.3199881f,
  +0.0847804f, +0.3133909f, -0.0832961f, -0.2701803f, +0.0079303f, +0.0121617f, +0.0050859f, +0.3327628f,
  -0.0099434f, +0.1225669f, +0.0170414f, -0.1169753f, +0.0170949f, +0.3643072f, -0.0434645f, -0.0855705f,
  -0.1393885f, -0.1783726f, -0.1565734f, -0.0350909f, +0.2340233f, -0.6053923f, +0.1479587f, -0.3745890f,
  -0.1381238f, +0.2984476f, -0.1151494f, +0.3771448f, -0.2043388f, -0.1035061f, +0.0532758f, +0.1913975f,
  -0.0580458f, +0.1598876f, -0.1939128f, -0.1090317f, +0.0751534f, -0.0226410f, +0.1091057f, -0.2151052f
);

const float biases[4] = float[4](
  -0.0597725f, +0.1300209f, +0.0492099f, -0.0265032f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer50 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1169904f, -0.1451929f, +0.0812128f, +0.0027594f, -0.0405636f, -0.0690160f, +0.1789899f, +0.1061640f,
  -0.1446612f, +0.0271784f, -0.1594885f, -0.0554465f, +0.3201781f, -0.0128236f, +0.0885192f, -0.1126852f,
  -0.2415773f, -0.3687843f, -0.1533477f, +0.0195877f, +0.1357826f, +0.0280033f, -0.1642028f, +0.0197218f,
  -0.1995574f, +0.1690572f, +0.1572816f, -0.2089119f, -0.0270753f, -0.2135374f, +0.1087883f, +0.3418175f,
  +0.0077634f, +0.0377904f, -0.1315281f, -0.0614164f, +0.1056502f, +0.3882830f, +0.2521459f, +0.2326282f,
  +0.1771842f, -0.1623487f, -0.1131263f, -0.0741901f, +0.1407353f, -0.3674884f, +0.1262618f, -0.1118484f,
  +0.1727982f, +0.2570551f, +0.0183623f, +0.1486716f, +0.1476017f, -0.0326110f, +0.1349838f, +0.1226627f,
  +0.0474289f, +0.0103700f, -0.1152294f, -0.0178602f, -0.0970525f, -0.2372718f, +0.0851202f, -0.0194921f,
  +0.4227353f, -0.4085924f, +0.0119249f, -0.2198075f, +0.3469494f, -0.3566206f, -0.0505566f, +0.2926513f,
  +0.3394873f, -0.1164463f, +0.1575883f, -0.0817199f, +0.0954563f, +0.1111205f, -0.1042712f, -0.2059001f,
  -0.2343529f, +0.1934564f, -0.0549125f, -0.2448244f, +0.3162090f, -0.0022530f, -0.0509650f, -0.3209807f,
  -0.2794166f, +0.1538723f, -0.2029716f, -0.4649595f, +0.0495750f, -0.0698128f, -0.0471041f, +0.0129262f,
  -0.0680032f, +0.1547582f, -0.0115469f, +0.1056840f, +0.3493317f, -0.0617896f, +0.0433692f, +0.2222665f,
  -0.1521660f, +0.1159128f, -0.3618169f, +0.1991380f, +0.1691352f, +0.1962744f, -0.0970033f, +0.0160101f,
  +0.0322918f, +0.0796480f, -0.0305222f, -0.3013468f, -0.0107915f, +0.0034640f, +0.3763502f, -0.1357353f,
  +0.1054401f, -0.0950901f, +0.4574064f, +0.1117146f, -0.1828823f, +0.0751080f, -0.3234366f, +0.1809421f,
  -0.1200727f, -0.1927449f, -0.1042282f, +0.1462294f, +0.0677722f, -0.2528470f, -0.2565338f, +0.0941779f,
  -0.0873936f, -0.1720900f, -0.1758284f, +0.1668350f, +0.0589536f, -0.0227978f, -0.1092531f, +0.0170776f,
  +0.1427695f, +0.2447669f, -0.3883975f, +0.0827688f, -0.1256666f, -0.0843179f, +0.4164652f, -0.1008564f,
  -0.2293213f, -0.1944108f, -0.2032137f, +0.1017026f, +0.2106051f, +0.0490126f, +0.1671628f, +0.1603014f,
  +0.2098009f, -0.1677186f, +0.0282772f, +0.2444024f, -0.1172384f, +0.3314072f, -0.0837959f, -0.0580335f,
  +0.0448807f, +0.5717298f, -0.1335446f, -0.0079622f, -0.1731295f, +0.1902590f, +0.3343014f, +0.0460252f,
  -0.1862054f, +0.1827997f, +0.1549672f, -0.0464080f, +0.1633395f, -0.4188666f, +0.1859315f, +0.4657728f,
  -0.0164887f, -0.1442087f, +0.0337688f, -0.0813628f, -0.2140990f, -0.0678186f, +0.1821789f, -0.2394039f,
  +0.3614235f, +0.2628304f, -0.1473325f, -0.0671446f, -0.0940084f, -0.1357250f, +0.3034697f, +0.3123780f,
  +0.0659702f, -0.0715193f, -0.5874842f, +0.0583206f, +0.2962393f, -0.1446945f, -0.0252520f, -0.1203279f,
  +0.2483581f, -0.4064893f, +0.0552053f, -0.1339291f, +0.0583077f, -0.0365322f, +0.0798489f, +0.5384112f,
  +0.0671573f, +0.0675536f, -0.2142189f, +0.0127639f, +0.1805868f, +0.0836591f, -0.2956620f, +0.1906272f,
  -0.0775313f, +0.0979055f, -0.1592563f, +0.1410070f, +0.1579181f, -0.3919902f, -0.1404998f, -0.0904187f,
  -0.2963106f, -0.0395906f, -0.2760208f, -0.1669898f, -0.0441564f, +0.0752731f, +0.0639168f, -0.1776907f,
  -0.0085058f, +0.0466133f, +0.1339466f, -0.0815531f, +0.1445606f, +0.1215941f, -0.3410475f, -0.0181409f,
  +0.2236462f, +0.0403925f, -0.4605756f, -0.1323664f, +0.2513848f, -0.1554657f, -0.1339892f, +0.0799396f,
  -0.1976276f, -0.0546081f, -0.1942291f, -0.4176138f, +0.1589998f, -0.3417413f, -0.0164044f, -0.3532830f,
  +0.1920877f, +0.1010352f, +0.1992086f, +0.1213310f, -0.0868172f, +0.2965066f, -0.2583764f, +0.1883917f,
  +0.1584432f, -0.2516668f, -0.2887648f, -0.4788773f, -0.0074841f, +0.0247876f, +0.3070171f, -0.0966129f,
  -0.0650961f, -0.0408663f, -0.1271250f, -0.0431987f, +0.0432927f, -0.1252930f, +0.3932119f, +0.0019399f
);

const float biases[4] = float[4](
  +0.0365732f, +0.0349696f, -0.0078248f, +0.0307898f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer51 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3303751f, +0.0159070f, -0.1408199f, +0.0554508f, -0.3865564f, +0.3171158f, -0.2781349f, -0.0095340f,
  +0.0002106f, -0.0267359f, +0.0991207f, -0.0798067f, -0.0990497f, -0.1061154f, -0.1533179f, -0.1184137f,
  +0.2067640f, -0.0175300f, +0.4584514f, +0.0156637f, -0.2523206f, +0.3788013f, +0.0312257f, -0.1773745f,
  +0.0422882f, -0.2906205f, -0.3529054f, +0.1173962f, +0.1026827f, -0.0437097f, +0.0115345f, +0.1346920f,
  +0.1040484f, +0.2724217f, -0.2173459f, -0.3470815f, -0.0392883f, +0.0684600f, -0.2393167f, +0.2720265f,
  +0.3397738f, +0.1120677f, +0.0047793f, -0.2173786f, +0.1351731f, -0.0514875f, -0.1081977f, +0.1128301f,
  -0.6274523f, +0.3230773f, -0.1659171f, -0.0091430f, +0.5210838f, -0.0381185f, +0.3773211f, +0.1387049f,
  -0.4341551f, +0.3842329f, +0.0253790f, +0.1339406f, +0.1736457f, +0.0380664f, +0.4733456f, -0.0212584f,
  -0.1202363f, -0.0296715f, +0.0540227f, +0.0873092f, +0.3101567f, -0.1794251f, +0.3792418f, -0.1576933f,
  +0.0925092f, -0.4812427f, -0.0177629f, -0.1657649f, -0.3121810f, -0.0051351f, -0.0539805f, -0.3874143f,
  +0.0127556f, -0.0204886f, +0.0000279f, -0.0744462f, -0.2309586f, +0.4295659f, +0.0180262f, -0.0707484f,
  +0.0364777f, -0.2564090f, +0.1806390f, +0.4956945f, -0.1768277f, +0.0809215f, -0.1089745f, +0.3113904f,
  +0.0483384f, -0.4103118f, -0.2111974f, -0.3085027f, -0.5354381f, +0.2058823f, -0.1388183f, -0.1358515f,
  +0.1375870f, +0.0967174f, +0.2070526f, +0.0444831f, +0.1669193f, +0.3755038f, +0.0336504f, +0.0107702f,
  +0.1467643f, -0.0402392f, +0.1672206f, -0.1811569f, +0.1374282f, -0.1366155f, -0.2351267f, -0.0367787f,
  +0.4812539f, +0.0308577f, +0.0473422f, -0.2244161f, -0.0999994f, +0.0698608f, +0.0978087f, -0.1958005f,
  -0.0039395f, +0.2483372f, +0.0289874f, +0.0537446f, -0.0731306f, -0.1397255f, -0.2204906f, +0.2143965f,
  -0.1425826f, -0.0010328f, -0.0591144f, +0.0139489f, -0.0611786f, -0.2570657f, -0.0523856f, -0.0087556f,
  +0.5233351f, -0.0516047f, +0.1294762f, -0.4470637f, -0.2444191f, +0.3273904f, +0.2220342f, -0.2262411f,
  +0.1626824f, +0.3222100f, +0.1395621f, +0.0390552f, +0.2804757f, +0.4089145f, -0.1278178f, +0.1540616f,
  -0.2541859f, +0.0288216f, -0.3933287f, -0.1425243f, +0.2679012f, +0.2136262f, -0.2897320f, +0.3560235f,
  +0.2929185f, -0.0559989f, -0.1567141f, +0.2266920f, -0.0482226f, +0.0219589f, -0.1776283f, -0.0469087f,
  +0.2098595f, +0.1310511f, -0.5920295f, -0.2145322f, +0.4123598f, +0.0317503f, +0.0777823f, +0.1993467f,
  -0.3567526f, +0.1424523f, -0.0198009f, +0.0465180f, +0.1986341f, -0.2829672f, +0.0248358f, +0.1746378f,
  +0.0686482f, +0.0496223f, +0.4379078f, +0.3517288f, -0.1994771f, -0.2772101f, +0.1283471f, -0.1214044f,
  -0.2088995f, -0.3281505f, -0.0578475f, +0.1108326f, +0.0953864f, -0.0938216f, -0.0667966f, -0.5390928f,
  +0.1885497f, +0.1370861f, +0.0042301f, +0.2522264f, +0.0633717f, -0.3885234f, -0.0804178f, +0.0403149f,
  +0.1855612f, +0.0669895f, +0.2581098f, -0.0347086f, +0.1680217f, -0.0231616f, -0.0854438f, +0.0982163f,
  -0.0517710f, +0.1405075f, -0.1423874f, -0.4959907f, -0.0303524f, +0.1381862f, +0.1631827f, +0.2423039f,
  +0.1619998f, +0.1631603f, -0.4031669f, -0.2139782f, -0.1676912f, +0.2197316f, +0.1048414f, +0.1803391f,
  -0.1172591f, +0.0609742f, +0.1117554f, +0.2852906f, -0.0156126f, -0.1921700f, +0.0596422f, -0.0880054f,
  -0.1812549f, -0.1322532f, +0.3246344f, +0.2963122f, -0.2116431f, -0.1160372f, +0.0743233f, -0.4905042f,
  -0.1246958f, +0.2772536f, -0.2275747f, -0.4635633f, +0.0828354f, +0.3064727f, -0.1086057f, -0.1248798f,
  +0.1054326f, +0.0554375f, +0.1211560f, +0.3941242f, -0.0634462f, -0.2981866f, -0.0309888f, +0.1064207f,
  +0.2174853f, -0.1006325f, +0.0924850f, +0.2040174f, +0.1840703f, -0.5491244f, -0.0705397f, -0.1192207f,
  -0.2190040f, +0.3448437f, +0.1365687f, +0.2481729f, -0.0817140f, -0.2953252f, -0.0560966f, +0.0220212f
);

const float biases[4] = float[4](
  +0.0935580f, -0.1560435f, -0.2499526f, -0.0654495f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer51 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0972373f, +0.1201427f, +0.1748075f, +0.1398136f, +0.1666266f, -0.1734696f, +0.0055981f, -0.0347728f,
  -0.0232472f, -0.2101251f, +0.3679153f, -0.3053195f, -0.1889987f, -0.0320092f, +0.0874333f, -0.1146195f,
  +0.1434065f, +0.0853669f, -0.0463350f, +0.1512501f, -0.0880810f, +0.1211763f, +0.0800109f, -0.2836212f,
  -0.4437498f, +0.0957288f, +0.3793004f, -0.1252788f, -0.3588996f, -0.0285013f, -0.1003189f, +0.1171379f,
  +0.0395105f, +0.3121619f, -0.0841188f, -0.1732732f, +0.0449739f, -0.4601828f, -0.1253536f, -0.0212541f,
  +0.1635611f, -0.0060725f, -0.0914959f, -0.0177144f, -0.1217680f, +0.1362814f, +0.1306814f, -0.0447538f,
  -0.4719514f, -0.0527068f, +0.0772035f, +0.0053635f, -0.0054375f, -0.0759937f, -0.2362689f, +0.2644719f,
  -0.0582861f, +0.0426786f, +0.2037941f, -0.3722304f, -0.1781310f, -0.0404453f, -0.0180429f, +0.0345072f,
  -0.1336638f, +0.3592117f, +0.0073473f, +0.2271363f, +0.0155034f, +0.2033492f, +0.0670779f, -0.1923628f,
  +0.0409174f, +0.2434462f, -0.0706322f, +0.0022191f, -0.2446059f, +0.0355459f, +0.0572645f, +0.2137919f,
  -0.1096249f, +0.2321206f, -0.2016670f, +0.2305672f, +0.1134857f, -0.4945419f, -0.0248324f, -0.2655079f,
  -0.1075565f, -0.1031413f, -0.1053359f, -0.1303922f, -0.0485553f, -0.2366334f, +0.0572633f, -0.0043976f,
  +0.0570882f, +0.2295808f, -0.0126629f, +0.2765461f, +0.0876687f, +0.1690795f, +0.0362836f, +0.2594278f,
  -0.2601743f, -0.4422074f, +0.3718255f, -0.1586427f, -0.1565743f, -0.3383371f, +0.0974716f, -0.2417032f,
  +0.0069216f, +0.0214962f, +0.1260111f, -0.2618527f, -0.0679550f, -0.4775499f, -0.0573818f, -0.2487491f,
  -0.0763857f, +0.0675995f, -0.0819668f, -0.0047415f, +0.1719902f, +0.2360369f, +0.0184985f, +0.0000495f,
  +0.0762519f, +0.0720513f, +0.2194982f, -0.0190283f, -0.1449362f, +0.0888921f, +0.2848657f, +0.2217221f,
  -0.2907085f, +0.1865830f, -0.1820367f, -0.2905323f, +0.1090475f, +0.0195240f, +0.0156710f, -0.2567210f,
  -0.2096242f, -0.0635376f, -0.0601675f, +0.1360896f, +0.1178606f, +0.0164980f, -0.5070125f, +0.2660672f,
  +0.1321547f, +0.2494702f, +0.2060889f, -0.0308304f, -0.2389172f, +0.1195793f, +0.2368674f, -0.3025578f,
  -0.2352758f, +0.0813773f, -0.1185712f, +0.1045163f, +0.1712833f, +0.0646688f, +0.0586424f, -0.2289841f,
  -0.0514567f, -0.5251557f, -0.1140503f, -0.1893641f, -0.1455862f, +0.0050900f, -0.0329959f, -0.0347894f,
  -0.1761041f, -0.0015636f, +0.0477120f, -0.4041948f, +0.0126199f, -0.1745827f, +0.0529188f, -0.1793511f,
  -0.0743010f, +0.1141163f, -0.2088422f, +0.0077934f, +0.0175774f, -0.0386735f, -0.0734665f, +0.0915781f,
  -0.2233440f, +0.0240628f, +0.2316422f, -0.0379029f, -0.0346706f, -0.0930328f, -0.0030621f, -0.0741374f,
  +0.1340240f, -0.0901744f, +0.1916355f, +0.1752931f, +0.0286030f, -0.0882088f, -0.1701059f, +0.2178869f,
  -0.1391530f, +0.0296244f, -0.2168545f, -0.1038169f, +0.0784687f, +0.0337583f, +0.0316688f, -0.0292304f,
  -0.2279379f, +0.2527819f, -0.1305343f, +0.1859216f, +0.4752814f, +0.2494452f, -0.1351595f, +0.3488774f,
  +0.3303582f, +0.5536608f, -0.1485051f, +0.6270993f, +0.1133704f, +0.0720542f, -0.0841623f, -0.1577298f,
  +0.1998160f, +0.1176886f, -0.0085503f, -0.0779444f, -0.0539121f, +0.1098941f, -0.0646196f, -0.0633861f,
  +0.2882617f, -0.2180986f, +0.2745878f, -0.1785765f, -0.0171397f, -0.1065767f, -0.0490685f, -0.2475989f,
  +0.0602311f, +0.1009250f, -0.0816171f, -0.6984063f, +0.1786295f, +0.4408109f, -0.3685586f, -0.3077846f,
  +0.2853374f, -0.0781399f, -0.3470585f, -0.3688732f, -0.1018143f, -0.2307897f, -0.2951509f, +0.1611946f,
  +0.1530949f, -0.1916586f, +0.2708482f, +0.1158242f, +0.3480541f, -0.5615897f, +0.2299643f, -0.0578815f,
  +0.2826098f, -0.0473827f, -0.1360086f, -0.0474084f, +0.0712748f, -0.3210370f, +0.0799720f, +0.2779836f,
  +0.0939597f, +0.1463385f, -0.0948654f, +0.1327394f, -0.2513529f, -0.0708637f, -0.1801592f, -0.0962576f
);

const float biases[4] = float[4](
  +0.0273506f, +0.0983573f, -0.3356234f, -0.1513434f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer52 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0047370f, +0.1138351f, -0.0122203f, +0.2268001f, +0.0367163f, +0.1406679f, -0.0425906f, +0.1596067f,
  +0.3842497f, -0.2166159f, -0.0427397f, -0.1715573f, +0.0965592f, -0.3115687f, -0.1656965f, +0.1637110f,
  +0.3379247f, -0.2739059f, -0.0092037f, -0.1288926f, +0.3201510f, +0.1646528f, +0.1222230f, +0.0589049f,
  -0.1227900f, -0.2347118f, +0.0454307f, +0.1658466f, -0.1954082f, +0.0119772f, +0.1007101f, +0.2356758f,
  -0.1639626f, -0.1707866f, +0.0239105f, +0.1785350f, -0.2677802f, +0.3793502f, +0.0454905f, +0.3907802f,
  -0.0698347f, -0.3563957f, -0.1847600f, -0.0314163f, +0.0540768f, -0.0012581f, +0.0082492f, +0.2185619f,
  -0.1354375f, -0.3149581f, +0.2516969f, -0.0560877f, -0.1939351f, +0.0513132f, +0.1652476f, +0.1351592f,
  +0.0687241f, -0.0588242f, +0.1437869f, +0.1906445f, +0.2144721f, +0.0888608f, -0.0509629f, -0.0785781f,
  -0.4262136f, -0.0023186f, -0.1563593f, -0.0002607f, -0.1642206f, +0.0139279f, +0.1214247f, +0.1221844f,
  -0.0708014f, -0.1901165f, -0.2515985f, +0.0957487f, -0.1094377f, -0.2258396f, +0.1010781f, +0.1988837f,
  -0.0557470f, -0.0826901f, -0.1718024f, +0.1444131f, -0.2966057f, +0.1323599f, +0.2198655f, +0.3448651f,
  -0.2187099f, -0.0265375f, +0.0245594f, +0.2237034f, -0.0435301f, -0.1583073f, +0.2005851f, +0.4913123f,
  -0.1525322f, -0.2457624f, -0.4687418f, +0.0488309f, +0.0249058f, +0.0306174f, -0.1391505f, -0.0779721f,
  -0.2211929f, -0.0696502f, +0.3260080f, +0.0686686f, -0.3186235f, +0.4266528f, +0.0535495f, -0.3391177f,
  +0.1146948f, +0.2368196f, +0.0216053f, -0.1675404f, -0.1022338f, -0.1514098f, +0.3738257f, -0.0913985f,
  +0.1008959f, +0.2157888f, +0.0732273f, +0.0373699f, +0.1581347f, +0.1316609f, -0.1347094f, -0.0302303f,
  -0.0057746f, +0.3755333f, -0.3656435f, -0.0776675f, +0.0329477f, -0.3743224f, -0.1514442f, -0.2901987f,
  +0.0118379f, +0.2463164f, -0.1534164f, -0.3175718f, -0.1636050f, -0.3642630f, -0.1333793f, -0.1049822f,
  -0.0113818f, +0.0914076f, +0.0670152f, +0.0994864f, +0.3342064f, -0.0654043f, +0.1500334f, +0.0562754f,
  +0.0631737f, +0.1944463f, -0.1899294f, +0.1339279f, +0.1548332f, -0.0295441f, -0.0028040f, -0.0308096f,
  +0.1953177f, +0.0420327f, -0.2013144f, -0.0889041f, -0.0620795f, -0.1284974f, +0.0850544f, -0.1965431f,
  -0.0252590f, -0.1503859f, +0.2648427f, +0.1679314f, +0.2809976f, -0.1166897f, +0.0993983f, +0.0236767f,
  -0.0338235f, -0.0317589f, +0.1884870f, -0.1375254f, +0.0692095f, -0.1988383f, +0.1545404f, +0.0772563f,
  -0.1398425f, +0.2434357f, +0.0551846f, -0.0045540f, -0.3987291f, -0.0009579f, -0.0770469f, -0.3772516f,
  -0.5151994f, -0.2979924f, -0.1763802f, +0.3148029f, -0.0336702f, +0.0433432f, +0.3230526f, -0.1067796f,
  -0.0992812f, -0.1187111f, +0.0023339f, +0.0790557f, -0.0868130f, +0.1770868f, +0.0392507f, +0.0443059f,
  -0.0255493f, -0.0345831f, +0.1060593f, -0.3129979f, -0.0605214f, +0.0781533f, -0.6431136f, -0.2327238f,
  +0.0203358f, +0.1826740f, -0.3958669f, -0.1653047f, -0.0710506f, +0.1902580f, +0.1247475f, -0.0682541f,
  -0.1038759f, -0.1668689f, +0.1978257f, -0.0594732f, +0.3072695f, +0.1357967f, -0.0909734f, -0.0660104f,
  -0.0772979f, +0.1644062f, -0.4132021f, -0.0048421f, +0.1136945f, -0.0843816f, -0.0912777f, +0.2920226f,
  +0.1862541f, +0.3119390f, -0.5394467f, +0.1309811f, -0.2241656f, -0.0350987f, -0.1524937f, -0.2332709f,
  +0.2923252f, -0.0067384f, +0.3170021f, -0.1507701f, -0.2365215f, -0.0112282f, -0.0443304f, +0.3073783f,
  +0.1090900f, -0.0371332f, +0.1374848f, +0.1311000f, -0.0661947f, -0.1588709f, +0.2912460f, -0.1243090f,
  +0.2116922f, -0.3598604f, +0.1782662f, -0.0370798f, +0.0509308f, +0.2206449f, +0.0494075f, +0.0603406f,
  +0.2273983f, -0.0814662f, -0.2793849f, +0.2223879f, +0.2605010f, -0.1614123f, +0.0721704f, -0.0366970f,
  -0.4651083f, -0.0389668f, +0.0109940f, +0.1543118f, -0.1356276f, +0.0855103f, +0.2486873f, +0.2118693f
);

const float biases[4] = float[4](
  -0.0867545f, +0.0582799f, +0.0523844f, +0.0244706f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer52 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2526035f, -0.0363446f, +0.0286987f, -0.1475423f, +0.0954557f, +0.0465735f, -0.0775093f, +0.0930476f,
  -0.2220714f, +0.1568763f, -0.2219057f, -0.2497907f, +0.2722490f, +0.4430895f, -0.2524681f, -0.1726100f,
  -0.3998611f, -0.0779891f, +0.0965642f, -0.3012062f, +0.0124501f, -0.1430158f, +0.0602354f, -0.1951608f,
  -0.2950990f, -0.2211423f, +0.0288030f, -0.1638409f, -0.0432487f, -0.0008910f, -0.0491890f, +0.1189067f,
  -0.0878055f, -0.0875224f, +0.0837341f, -0.2036708f, -0.0651276f, +0.0132090f, +0.0636656f, -0.0972542f,
  -0.2710347f, +0.5393957f, +0.0134848f, -0.2607228f, -0.0062244f, -0.1010971f, +0.3580334f, -0.2363835f,
  +0.2311345f, +0.1338344f, +0.0462967f, +0.1848984f, -0.2664948f, -0.1627374f, -0.2691022f, -0.0412002f,
  +0.2451122f, +0.1777705f, -0.2082563f, -0.3767602f, +0.0682523f, -0.1299646f, +0.3022969f, -0.3027448f,
  +0.3258442f, +0.2848693f, +0.3855182f, -0.4595654f, -0.1734926f, +0.1367540f, -0.1727001f, -0.4436185f,
  +0.2128563f, +0.1158610f, +0.4523458f, +0.1406990f, -0.0389703f, -0.0381545f, +0.0962710f, +0.1648307f,
  -0.2261667f, +0.1269855f, +0.1112174f, +0.3409876f, +0.0803191f, +0.0832496f, +0.1126510f, -0.0013681f,
  +0.1385720f, -0.1073449f, +0.2754620f, +0.3118898f, +0.1010152f, -0.1949885f, -0.1588465f, +0.0846470f,
  +0.0140574f, -0.2663375f, +0.5103701f, -0.0366775f, -0.1167754f, +0.3065033f, -0.0636294f, +0.2085719f,
  -0.0495857f, -0.1956914f, +0.1688986f, +0.2085242f, +0.1179339f, +0.2495826f, +0.1444523f, +0.1721957f,
  +0.1173645f, -0.3604487f, -0.0826228f, +0.2238285f, -0.2842356f, -0.2849697f, +0.0553289f, +0.1812941f,
  -0.2357860f, -0.0671697f, -0.0946603f, -0.1217334f, +0.0954355f, +0.1045958f, +0.3145960f, -0.0739239f,
  -0.0176487f, -0.1033122f, +0.2276828f, +0.0130025f, +0.1838520f, +0.1144757f, +0.1951167f, -0.3816155f,
  -0.3384271f, -0.2048197f, +0.0473003f, -0.1835525f, +0.1277844f, -0.2973176f, -0.4108776f, +0.1240143f,
  -0.2666576f, +0.0126353f, -0.1833852f, -0.2209032f, +0.1445442f, +0.1202916f, -0.0928463f, +0.0826041f,
  -0.4080674f, +0.1831673f, -0.1030998f, -0.1768739f, +0.0712317f, -0.1314844f, -0.0441441f, -0.5572528f,
  -0.1846080f, -0.0342961f, -0.3546072f, -0.0612090f, +0.0695240f, +0.0664931f, -0.2028025f, -0.3447245f,
  -0.0325667f, +0.0086872f, +0.1046254f, -0.0352057f, -0.1948088f, +0.2309307f, -0.3490940f, -0.0617177f,
  +0.0816003f, +0.1844075f, -0.1567977f, -0.0338308f, +0.1508839f, -0.1769400f, +0.0435674f, -0.0145631f,
  +0.1314963f, +0.2642097f, +0.0078693f, -0.0040232f, +0.0257441f, -0.1166789f, -0.2096213f, -0.1816956f,
  +0.4402969f, +0.2303936f, +0.0956118f, -0.2246585f, -0.3062260f, -0.2503280f, -0.2441680f, +0.0322591f,
  +0.2916320f, -0.0968747f, -0.1282350f, -0.1828227f, +0.0090027f, -0.1092085f, +0.1143712f, +0.4350442f,
  +0.4880923f, +0.0997600f, +0.0806655f, -0.1485414f, +0.1679064f, +0.0499066f, +0.4440791f, +0.3843253f,
  -0.1420628f, -0.0009156f, -0.0796026f, -0.0492162f, +0.0766189f, +0.3326553f, +0.0263862f, -0.0970700f,
  -0.0577710f, +0.0192483f, +0.4420114f, -0.0981778f, -0.0082426f, -0.0121187f, -0.2698599f, -0.0428094f,
  -0.3278596f, +0.1168652f, +0.3796423f, -0.1973756f, -0.4728378f, +0.0385700f, -0.0571219f, +0.2323226f,
  +0.0628342f, +0.2291461f, -0.0561463f, -0.4684860f, +0.0540667f, +0.1805512f, +0.1403680f, -0.1901007f,
  -0.3452549f, +0.0390923f, -0.1928308f, +0.0309870f, +0.1726315f, +0.0811366f, +0.2998443f, -0.0263672f,
  -0.1470837f, +0.1551715f, +0.1961969f, -0.1408933f, -0.3482751f, -0.1266001f, +0.1573664f, -0.0636204f,
  +0.0373269f, -0.0126331f, -0.3252926f, -0.2312060f, +0.2191274f, +0.0244642f, +0.0050303f, -0.1139186f,
  +0.1107000f, +0.0769978f, +0.0183476f, +0.0689139f, +0.1936410f, +0.3118669f, +0.2250087f, -0.0732285f,
  -0.0312784f, +0.2353794f, +0.1134646f, -0.0587593f, -0.0381170f, -0.1260806f, -0.0282057f, -0.2097697f
);

const float biases[4] = float[4](
  +0.0303112f, +0.0298158f, -0.0348028f, -0.0001804f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer53 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1437530f, -0.3742958f, -0.3151232f, -0.2856082f, +0.5611748f, -0.0234007f, -0.0685997f, -0.0414910f,
  +0.3510627f, +0.0536914f, -0.0993709f, -0.1163524f, -0.0977175f, +0.5742607f, +0.3654440f, +0.4514369f,
  -0.0291608f, +0.1923878f, +0.0618348f, +0.5843235f, -0.0859997f, +0.2738656f, +0.2006175f, +0.0186491f,
  -0.2014796f, -0.2716746f, +0.1129891f, -0.1776422f, +0.2693404f, -0.0248174f, -0.1610395f, -0.1928973f,
  +0.4236361f, +0.2485233f, -0.6203304f, -0.2195398f, +0.4947559f, +0.2208284f, -0.6289963f, +0.0672945f,
  +0.4942735f, +0.1241480f, +0.0441912f, +0.5075573f, -0.2245386f, -0.0141964f, +0.2204776f, +0.6254451f,
  +0.1615628f, -0.2534281f, +0.2341775f, +0.2627773f, -0.1898707f, -0.6539759f, +0.2067342f, -0.2081054f,
  -0.1789311f, -0.2948384f, -0.2264336f, -0.0320162f, -0.0407622f, +0.3146189f, -0.3837296f, -0.3241143f,
  +0.1931066f, -0.3464119f, -0.0522174f, +0.2142992f, +0.2027728f, +0.2174364f, -0.1450183f, +0.1616432f,
  +0.1305387f, -0.3002495f, +0.0880751f, -0.2055846f, +0.2012592f, +0.0632478f, -0.1472901f, -0.0043396f,
  -0.0088138f, +0.1126109f, +0.0081754f, -0.1665385f, +0.1054068f, +0.4284164f, +0.1899318f, -0.1581510f,
  -0.1937879f, +0.2175147f, -0.2899548f, -0.0641515f, -0.1300519f, +0.4241874f, -0.0736598f, +0.3148683f,
  +0.2040336f, -0.0743931f, +0.1616839f, -0.2558262f, +0.2514512f, -0.1092258f, +0.2188585f, -0.1646843f,
  +0.5429974f, +0.3218713f, +0.4452049f, -0.6802270f, +0.1851428f, -0.0670484f, -0.1423624f, +0.2159982f,
  -0.3079195f, +0.0284874f, +0.0659956f, +0.0258949f, +0.1302889f, +0.0618032f, +0.1381655f, +0.2842136f,
  +0.0520181f, -0.1392929f, +0.1648512f, -0.0938984f, +0.1871462f, -0.1880502f, +0.0833374f, -0.2618691f,
  +0.0230760f, -0.0425158f, +0.1947512f, +0.0438887f, -0.0648206f, -0.3542053f, +0.0763830f, -0.1196381f,
  -0.1536314f, -0.0677960f, +0.3397662f, +0.0327103f, +0.0006489f, -0.0919395f, -0.2053340f, +0.1384673f,
  -0.0564277f, +0.1340830f, +0.2026761f, +0.2865673f, +0.0404238f, -0.3333153f, +0.0904098f, -0.0916167f,
  -0.0895000f, -0.3664609f, +0.3837913f, -0.2390631f, -0.0146664f, -0.0217564f, -0.0972906f, -0.2152145f,
  +0.2370118f, -0.1786454f, +0.0801995f, +0.1795268f, +0.1861360f, +0.1261353f, +0.2135163f, -0.2549322f,
  -0.2455906f, -0.1701166f, -0.0948050f, +0.1240643f, -0.0469728f, -0.1709722f, -0.0661936f, +0.2378587f,
  -0.0668586f, +0.0314790f, -0.1480864f, -0.0523429f, -0.1978047f, +0.0630611f, -0.1164761f, +0.0509065f,
  +0.3419119f, -0.1898601f, -0.0496881f, +0.1055441f, -0.1974892f, +0.0138838f, +0.1839948f, -0.0346638f,
  +0.4518206f, +0.1832486f, +0.0389224f, +0.1239877f, +0.0249337f, +0.1834631f, -0.2863905f, +0.3632741f,
  +0.2117069f, +0.0800415f, -0.3562189f, -0.3813547f, +0.0907591f, -0.1395151f, -0.1005455f, +0.0758372f,
  +0.3608583f, +0.2752789f, -0.4152957f, -0.0072965f, -0.1798779f, +0.0948381f, -0.2818547f, -0.2033665f,
  +0.1097047f, -0.1240373f, +0.4375152f, -0.1708291f, +0.2316691f, -0.1789981f, -0.1015857f, -0.0847902f,
  +0.1552848f, -0.1297137f, +0.1185936f, -0.1789900f, +0.0922106f, -0.1431850f, -0.0784336f, -0.3384251f,
  -0.1667239f, +0.1546617f, -0.5211125f, +0.1944095f, +0.0777336f, +0.1313153f, +0.2824320f, -0.0899827f,
  +0.3311184f, -0.5247263f, +0.1865466f, -0.4116714f, -0.0587988f, +0.1431486f, -0.0569368f, -0.0480682f,
  -0.2502826f, -0.1225423f, -0.3742111f, +0.0634987f, +0.1986133f, +0.0197708f, -0.0518635f, +0.0380213f,
  +0.0479588f, +0.1573586f, -0.1661847f, +0.0666560f, +0.0317175f, -0.1008433f, +0.1533713f, -0.1615638f,
  +0.2967178f, +0.1999971f, +0.1900284f, -0.1712792f, -0.3224812f, +0.1578840f, -0.0020641f, +0.0091687f,
  -0.2079383f, +0.1665187f, +0.0229980f, +0.2903117f, -0.1429489f, +0.0922478f, -0.0316767f, +0.1007877f,
  -0.0921969f, +0.1220668f, +0.0407317f, -0.0659766f, -0.1619965f, +0.3484910f, +0.0086150f, +0.0261610f
);

const float biases[4] = float[4](
  -0.0713299f, -0.0322670f, -0.0706334f, +0.0450949f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer53 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1789317f, +0.1633411f, +0.1592357f, +0.5027738f, +0.0377451f, -0.5588637f, +0.3985196f, -0.0327388f,
  -0.1424975f, -0.1121427f, -0.0300665f, -0.2966247f, +0.2760364f, +0.1178135f, -0.1998092f, +0.1092390f,
  +0.2427542f, +0.1446386f, +0.0297169f, -0.0426233f, +0.0453944f, +0.2302307f, +0.0271133f, +0.1659070f,
  -0.0315117f, +0.2510425f, +0.0984091f, +0.3200016f, -0.0361842f, -0.1759323f, +0.2389027f, -0.0352766f,
  -0.7319923f, +0.2120316f, +0.0784160f, -0.2121784f, -0.2449229f, -0.0066748f, -0.2013303f, +0.0368038f,
  +0.0317014f, +0.2184712f, +0.0280301f, -0.1646582f, -0.1042146f, -0.0471934f, -0.0709772f, +0.0185648f,
  -0.1417447f, -0.0872914f, +0.0814226f, +0.0355782f, -0.1214430f, -0.2239390f, +0.2468575f, -0.1742918f,
  +0.0562539f, +0.1820702f, +0.1044553f, +0.1230255f, -0.2811324f, -0.1266251f, -0.1190777f, -0.0000616f,
  -0.2423124f, -0.0237551f, +0.0190989f, -0.1874180f, -0.0765830f, +0.1622087f, -0.0688599f, -0.2253282f,
  -0.1727433f, -0.2775440f, +0.1654842f, +0.0408747f, -0.0835491f, +0.0288365f, -0.3020368f, +0.3676830f,
  +0.0772090f, -0.0400708f, +0.0436544f, +0.1197292f, +0.0691557f, -0.1366163f, -0.0352936f, +0.3424042f,
  +0.1460807f, -0.1661381f, +0.1827312f, -0.0432818f, +0.2482578f, -0.3270757f, +0.1666916f, +0.0618467f,
  -0.3435064f, -0.3505011f, -0.0353884f, -0.1113962f, +0.0355053f, -0.0716235f, -0.3301457f, +0.2389200f,
  +0.0380737f, +0.1522201f, +0.0360060f, +0.1365082f, +0.1839029f, +0.0685086f, +0.1701447f, +0.0342621f,
  -0.1652220f, -0.0528603f, +0.1466484f, +0.1304528f, +0.0776914f, -0.3206120f, +0.1532143f, -0.0917641f,
  +0.0573950f, -0.3693595f, -0.5170326f, +0.0514168f, -0.0256697f, +0.4633501f, +0.1212666f, -0.1928874f,
  +0.0000801f, +0.0187423f, -0.2924137f, +0.0181908f, +0.0926936f, +0.0021814f, +0.3895024f, +0.1551740f,
  +0.0614920f, -0.1669408f, +0.0112804f, -0.0089365f, +0.1532365f, -0.0854343f, -0.1339853f, +0.1264428f,
  -0.0751039f, -0.1773698f, +0.2171984f, -0.0247896f, -0.0532622f, -0.0182087f, +0.0939473f, -0.1785394f,
  +0.1682586f, -0.2334935f, +0.0709573f, +0.0011463f, -0.0528570f, +0.0981651f, -0.0985130f, +0.0684430f,
  -0.1358197f, +0.0837422f, -0.0407608f, -0.1518482f, +0.1916747f, -0.1267292f, -0.1162794f, -0.0117776f,
  +0.3442468f, +0.0672784f, +0.0362654f, -0.1879314f, -0.0674255f, -0.0451187f, -0.0002784f, +0.0101793f,
  +0.2473419f, +0.1606003f, +0.1409084f, -0.1638939f, +0.0218622f, +0.1012253f, -0.1311769f, -0.1823702f,
  +0.0329098f, +0.2436598f, +0.0345589f, +0.0823733f, -0.0268932f, +0.0721081f, -0.1909639f, -0.0141982f,
  +0.1173456f, +0.3336579f, +0.2458183f, +0.0408443f, +0.3244081f, +0.0535152f, +0.0279719f, +0.2782049f,
  +0.0343674f, -0.2324988f, +0.1051841f, -0.1457919f, +0.1207458f, -0.0816258f, -0.4431906f, +0.0899011f,
  -0.0895671f, +0.0114601f, -0.2195193f, +0.2303940f, +0.1140493f, +0.2436173f, -0.3254960f, +0.1559817f,
  -0.0161734f, +0.3590161f, +0.1362557f, +0.2877861f, -0.1106439f, -0.2004654f, +0.1311771f, +0.0702945f,
  +0.0268000f, -0.0577179f, +0.1855897f, -0.4056000f, +0.2452778f, -0.4271094f, -0.2340233f, -0.1689433f,
  +0.2333377f, +0.1833004f, -0.1601084f, +0.1426098f, -0.0483166f, +0.3236715f, -0.2123813f, +0.0686977f,
  -0.0736569f, +0.0362013f, -0.2664421f, +0.1981021f, +0.0847990f, -0.2281968f, -0.0504118f, -0.1031988f,
  -0.0058613f, -0.3440944f, -0.4847782f, -0.4294502f, -0.2487393f, +0.3612114f, +0.4072086f, -0.0917416f,
  -0.1036037f, +0.2862911f, -0.2410445f, +0.2533620f, -0.1276430f, -0.1940228f, +0.3181235f, +0.1781620f,
  -0.4385931f, -0.4267598f, -0.3093163f, +0.1991815f, +0.1170168f, +0.0114658f, +0.2859345f, +0.1147301f,
  -0.1190811f, +0.1913587f, -0.1465573f, +0.1185118f, +0.3438189f, -0.0523788f, +0.6412654f, +0.2326757f,
  +0.1026393f, +0.0944238f, +0.2237075f, +0.2363620f, +0.0256334f, -0.4198778f, +0.0990171f, +0.0599050f
);

const float biases[4] = float[4](
  -0.0134327f, +0.0640979f, +0.0666232f, -0.0846723f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer54 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2146100f, +0.0655072f, -0.1949112f, +0.0389533f, +0.3495262f, -0.0323392f, +0.1278950f, -0.1110319f,
  -0.2017752f, +0.2755629f, -0.1038653f, +0.1261726f, -0.1951047f, -0.0294575f, -0.0146191f, +0.2866905f,
  +0.1301991f, -0.1877220f, -0.2551060f, -0.3387449f, -0.0314232f, +0.0732962f, +0.0694481f, +0.0469508f,
  -0.0854503f, +0.0266896f, -0.3417462f, -0.0527664f, -0.1202668f, +0.0848650f, -0.0043172f, +0.0629339f,
  +0.2762907f, -0.2509985f, +0.2116085f, +0.0257083f, +0.3596140f, +0.0161472f, -0.0566475f, +0.2203993f,
  -0.2229146f, -0.3957979f, +0.2977392f, -0.1392854f, -0.0628341f, +0.1522329f, -0.0288706f, +0.2331691f,
  +0.0995350f, +0.1969318f, -0.1903536f, -0.0477925f, +0.0164996f, -0.1197616f, +0.1073679f, +0.1518607f,
  +0.1448712f, +0.1554869f, +0.1707732f, +0.0177407f, +0.0246978f, +0.0976508f, -0.1165644f, +0.0404295f,
  -0.0170647f, -0.1063934f, +0.1045363f, -0.1477711f, -0.0968126f, -0.1780544f, -0.1015330f, +0.0158367f,
  -0.3005417f, -0.0353581f, -0.1234814f, +0.0271079f, -0.0756042f, -0.0688349f, +0.3333802f, +0.0031907f,
  +0.4455288f, -0.0990051f, -0.1058913f, -0.0027639f, -0.0885743f, -0.0758888f, +0.0210170f, +0.3727423f,
  +0.2471750f, +0.0155506f, -0.2140650f, +0.0485571f, +0.0401543f, +0.6261855f, +0.2878218f, +0.1243315f,
  -0.1006112f, -0.0091244f, +0.1040616f, -0.0551371f, -0.1644609f, -0.1292748f, -0.0521057f, -0.2505263f,
  +1.1259460f, +0.0000258f, -0.1647116f, -0.0186254f, -0.2571348f, -0.1770759f, -0.1882022f, -0.0503713f,
  -0.3341017f, -0.1078871f, +0.1069150f, +0.0675684f, -0.0956938f, +0.2684641f, -0.0186852f, -0.0488246f,
  -0.3010252f, -0.2555031f, -0.1235581f, -0.0731057f, -0.0427124f, -0.1385360f, +0.0625141f, -0.1032434f,
  -0.5384868f, -0.0890273f, +0.0923257f, -0.0950891f, -0.3155701f, -0.2584092f, -0.0477682f, -0.1400314f,
  +0.1776249f, -0.0431814f, -0.0201420f, +0.1203896f, +0.0880651f, -0.0364046f, +0.0340324f, +0.1453073f,
  -0.0729753f, -0.0905917f, +0.3598604f, +0.0443001f, -0.0335108f, +0.0210958f, -0.0197502f, +0.1185407f,
  +0.0353285f, +0.0548397f, +0.2426218f, -0.0486800f, -0.0880061f, +0.2620120f, +0.0067000f, -0.0948820f,
  -0.1597435f, +0.1023571f, +0.2252499f, -0.0731663f, +0.0214161f, +0.0818166f, +0.0221590f, +0.0742561f,
  -0.1647882f, +0.1545534f, -0.1995516f, +0.0589474f, -0.2405079f, -0.0295354f, +0.1148706f, -0.2092390f,
  +0.5439800f, -0.4741829f, +0.0149242f, -0.1373369f, -0.0924989f, +0.0365622f, +0.3730879f, -0.3203895f,
  +0.2201700f, -0.2123383f, +0.0272166f, -0.1687955f, +0.1859051f, +0.0391201f, +0.1347073f, +0.2564765f,
  -0.0195405f, +0.3315705f, -0.3021862f, +0.1996488f, +0.0678476f, +0.0309277f, +0.0998231f, +0.0340986f,
  +0.1622788f, -0.0642672f, -0.3647330f, -0.0223771f, -0.1797068f, +0.0950607f, +0.2816142f, +0.2213141f,
  +0.1519516f, +0.0130963f, -0.2099327f, +0.0065275f, +0.1031684f, +0.1676470f, +0.0142577f, -0.1228331f,
  +0.0197205f, +0.1356454f, +0.1801104f, +0.2653843f, -0.1316585f, -0.0163385f, +0.0904488f, +0.0418251f,
  -0.0636827f, +0.1833021f, +0.1120555f, -0.0134001f, -0.0686985f, -0.1743560f, +0.0417071f, -0.4868507f,
  +0.1980200f, +0.0512290f, -0.0998374f, +0.0241026f, +0.0869831f, -0.5989528f, -0.3186516f, -0.0112956f,
  -0.5293005f, -0.1767856f, +0.3292295f, +0.2141232f, -0.1504035f, -0.0553419f, +0.0000909f, +0.1099345f,
  -0.0116409f, +0.1195761f, +0.2278436f, +0.0017196f, -0.0131044f, -0.1373583f, -0.2681269f, +0.2908584f,
  +0.4657063f, -0.0021326f, -0.2938108f, -0.0897412f, +0.0155624f, +0.1205980f, +0.1493247f, -0.1423282f,
  +0.1780305f, +0.0642942f, -0.0211364f, -0.1497544f, +0.1476034f, +0.2734852f, +0.1702479f, -0.1887517f,
  -0.6245444f, +0.1882242f, +0.2860257f, +0.3106824f, +0.0984776f, +0.0000990f, +0.2203462f, +0.1799055f,
  +0.1925243f, +0.0710836f, -0.2825036f, -0.1576098f, -0.1002908f, -0.0201414f, +0.1429244f, -0.0468637f
);

const float biases[4] = float[4](
  -0.1159934f, -0.0088002f, +0.0117602f, +0.0787400f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer54 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0767266f, -0.2142637f, +0.1179486f, -0.1953394f, +0.2841477f, -0.0167078f, -0.2095369f, -0.0870413f,
  +0.1210537f, +0.0557685f, -0.2358311f, -0.0727688f, +0.5966573f, +0.0496226f, -0.3428390f, -0.4155563f,
  -0.2702893f, -0.2984284f, -0.2739011f, +0.2052385f, +0.0573098f, +0.3946199f, -0.1085838f, -0.0107570f,
  -0.0456617f, -0.0811441f, +0.1948913f, -0.0860951f, +0.1402862f, +0.2146953f, -0.1156541f, -0.1860993f,
  +0.3136714f, -0.4423799f, -0.1104366f, -0.3225993f, +0.1139236f, -0.1685563f, +0.0023865f, -0.0996772f,
  -0.3720509f, +0.0417046f, +0.0708212f, -0.5112895f, -0.0619423f, +0.0613195f, +0.2714828f, -0.0228458f,
  +0.0610616f, -0.3645428f, -0.1995104f, -0.1733658f, +0.1256839f, -0.0468894f, -0.1777653f, +0.3859544f,
  -0.2794386f, +0.0215668f, -0.3546074f, -0.3448755f, -0.3413750f, +0.0406931f, +0.0301864f, -0.0560364f,
  -0.0591169f, -0.1837853f, -0.1820009f, -0.0820697f, -0.0290620f, +0.2376799f, +0.0111037f, +0.4363227f,
  -0.0198801f, +0.1688114f, -0.1337316f, -0.1390907f, +0.0291304f, -0.2899954f, -0.1346850f, +0.3504905f,
  -0.3888126f, +0.3846865f, +0.2731047f, -0.0487301f, -0.0150427f, -0.2874950f, +0.0939236f, +0.0934850f,
  -0.3669711f, +0.3210948f, -0.0487216f, -0.1945153f, -0.1589859f, -0.4418671f, +0.1205473f, -0.0374907f,
  -0.0540673f, +0.0115898f, -0.0786238f, +0.0485041f, +0.0687156f, +0.1361915f, +0.2205928f, -0.2828311f,
  +0.4382306f, -0.0025940f, +0.0274378f, +0.3144834f, -0.2649887f, +0.0159747f, -0.1156785f, -0.0594591f,
  +0.0783500f, +0.1399807f, +0.1181794f, +0.4259520f, +0.2966277f, -0.0698559f, +0.1089529f, +0.3342766f,
  +0.0809778f, -0.1776708f, -0.2110705f, +0.0595567f, -0.4306549f, +0.0723061f, -0.0983926f, -0.1622251f,
  +0.4541788f, -0.0306454f, +0.2043485f, +0.0410418f, -0.2640809f, -0.1082585f, +0.0451719f, +0.3192659f,
  +0.0105068f, +0.0310803f, +0.2549455f, +0.3184569f, +0.4833820f, -0.1460119f, +0.1351849f, +0.0862859f,
  +0.1885999f, -0.0751103f, +0.0683399f, -0.0168441f, -0.0553261f, +0.0859201f, +0.0542341f, +0.2357038f,
  +0.1414210f, -0.1744026f, +0.0591658f, -0.1239497f, +0.1705171f, +0.0637661f, +0.0787572f, -0.5857294f,
  +0.0921388f, +0.0551754f, +0.1630869f, +0.2006751f, -0.1128274f, +0.0304512f, -0.2599957f, -0.1473908f,
  +0.2451152f, -0.2478560f, +0.1554428f, -0.1624918f, +0.0799005f, -0.0060990f, +0.0476960f, -0.3264010f,
  -0.5563757f, +0.2410659f, +0.2327557f, -0.2450925f, +0.7471020f, -0.1216807f, +0.2623079f, +0.0306544f,
  +0.1473701f, +0.0691376f, -0.1899720f, +0.2561959f, -0.2023625f, +0.1659361f, -0.1884677f, -0.1832650f,
  -0.8702688f, -0.3634045f, -0.0309346f, -0.0411609f, -0.1557764f, -0.0635038f, -0.0672794f, +0.2360834f,
  +0.2680931f, -0.0643673f, +0.0510992f, -0.3231644f, +0.3468966f, +0.1490668f, -0.0764096f, +0.0474382f,
  -0.2541677f, +0.1769428f, -0.3518973f, -0.0306042f, -0.2194297f, +0.1036565f, -0.3788610f, +0.1214608f,
  -0.1286921f, +0.0198059f, +0.1838406f, -0.1624167f, +0.4194455f, +0.0024324f, -0.2389574f, -0.2666458f,
  -0.3818362f, -0.1253518f, -0.1915110f, -0.1072531f, +0.0754386f, -0.0052358f, -0.1475385f, -0.1695703f,
  +0.2577098f, -0.0392882f, -0.1609741f, +0.0937690f, +0.3644975f, -0.1361258f, +0.0276749f, +0.0858696f,
  +0.2588711f, -0.1432312f, +0.0030241f, +0.0835268f, -0.1586792f, +0.1402180f, -0.0370124f, +0.1685456f,
  -0.2414947f, +0.3327208f, -0.1006195f, -0.3449532f, -0.2348568f, -0.0819168f, +0.1573611f, +0.0291394f,
  +0.0120605f, +0.0385820f, -0.1978061f, -0.1817333f, -0.1553227f, -0.2823835f, +0.0426300f, -0.0458623f,
  -0.1836001f, -0.1619474f, +0.5035787f, -0.0722002f, -0.0842616f, +0.0772894f, -0.0861128f, -0.0001831f,
  +0.4167852f, -0.0221454f, +0.0575932f, +0.1094515f, -0.0798512f, +0.0361449f, -0.2277004f, +0.2021633f,
  -0.3327556f, +0.1743773f, +0.0742508f, +0.4124912f, +0.2051623f, -0.3582348f, +0.2533730f, +0.2042317f
);

const float biases[4] = float[4](
  +0.0763533f, -0.0166879f, -0.0224019f, -0.0567341f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer55 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0797733f, +0.1131379f, -0.1903125f, +0.0488003f, +0.0683250f, +0.0320700f, -0.0031146f, +0.1061758f,
  +0.1176466f, +0.2173691f, -0.2373744f, -0.0867309f, -0.0057287f, +0.1295808f, -0.3487302f, +0.0647841f,
  +0.3775583f, +0.0932884f, +0.2147612f, -0.0987709f, +0.1226044f, -0.1935297f, -0.1571776f, -0.1252850f,
  +0.0645246f, -0.2957689f, -0.4029204f, +0.1680957f, +0.0084300f, +0.3944027f, +0.0910152f, -0.1229580f,
  +0.2215277f, -0.0950603f, -0.1227041f, -0.0833432f, -0.4287885f, +0.4319593f, +0.0031933f, +0.2259885f,
  +0.2114902f, -0.4687884f, +0.2282458f, -0.1115461f, -0.2411964f, +0.0781582f, -0.2105739f, +0.1543100f,
  +0.0744724f, +0.1004100f, +0.1816990f, +0.3972929f, -0.0179477f, -0.0436177f, +0.0915933f, -0.1391246f,
  +0.0240533f, +0.1394167f, +0.1182706f, -0.2086831f, +0.0548601f, +0.1869415f, -0.2858898f, +0.3055083f,
  +0.1630574f, -0.1655210f, -0.0558343f, -0.1930272f, -0.1927023f, +0.0959590f, -0.3355450f, +0.1020860f,
  +0.4063734f, -0.0108604f, -0.5402416f, +0.3154537f, -0.7038245f, +0.3408333f, +0.0034005f, +0.2591620f,
  -0.1240005f, -0.1719465f, +0.1396965f, +0.1282662f, +0.1383303f, -0.0200438f, -0.1376515f, -0.0731819f,
  -0.0847809f, +0.0134189f, -0.0284688f, +0.1952944f, -0.0273657f, -0.1814087f, -0.1988906f, -0.0365587f,
  -0.1460471f, +0.2227057f, +0.0310721f, +0.3149363f, -0.2956702f, -0.4932962f, -0.0036626f, +0.5644053f,
  -0.0868490f, -0.1133261f, +0.0751961f, +0.3392781f, +0.1969425f, +0.3003275f, +0.1766452f, +0.0362391f,
  +0.0713568f, -0.1321818f, +0.0185638f, +0.0397562f, +0.4224077f, -0.4349110f, +0.0673236f, -0.0034942f,
  -0.0316285f, -0.3161684f, -0.0896367f, +0.0830073f, +0.3238899f, +0.3083940f, -0.0166777f, -0.0289676f,
  +0.1029222f, +0.0399427f, -0.2821332f, -0.0630515f, +0.4045465f, +0.1896381f, +0.3160991f, -0.0418418f,
  -0.0774750f, -0.0712700f, +0.0631162f, -0.0529037f, +0.1578727f, -0.3180043f, +0.3924209f, -0.1449223f,
  -0.0556106f, +0.3202079f, +0.0926796f, +0.0687627f, +0.0041586f, -0.0017203f, -0.1451626f, +0.0098322f,
  -0.1045550f, -0.4992595f, -0.1932825f, +0.3285864f, +0.0947464f, +0.2044931f, -0.1607102f, +0.3037184f,
  +0.0330554f, +0.1686569f, -0.0550421f, +0.1464765f, +0.1239565f, -0.0460521f, +0.0220925f, +0.1744027f,
  -0.2180024f, +0.1885056f, +0.0901421f, -0.1498859f, +0.0025387f, +0.0259645f, -0.0541729f, +0.0398025f,
  +0.0005665f, -0.2561984f, +0.3884645f, +0.1863455f, -0.1805208f, +0.0438643f, +0.1453406f, -0.0077083f,
  +0.1793157f, -0.0619747f, -0.0760267f, -0.1453290f, +0.2002869f, +0.2843196f, +0.1078770f, -0.2029721f,
  -0.1402528f, +0.3148368f, -0.1672308f, -0.2841433f, -0.0542359f, +0.0509159f, +0.1935103f, -0.0115155f,
  -0.1497018f, +0.2003622f, +0.2288363f, +0.0727599f, -0.2932183f, -0.4726246f, +0.1871016f, -0.1199624f,
  -0.0834450f, +0.2877857f, -0.0843527f, -0.1885901f, -0.0624569f, -0.0337765f, -0.1303616f, -0.2575415f,
  -0.0101385f, -0.1405215f, -0.2984726f, -0.0653781f, +0.2936173f, -0.1494996f, +0.0993062f, +0.0403079f,
  -0.1382822f, -0.0130323f, -0.0062740f, -0.3287515f, +0.4387414f, +0.2174826f, -0.2112366f, +0.1672636f,
  -0.0206950f, +0.3058840f, -0.1093600f, -0.2061685f, +0.3149399f, -0.1891006f, +0.0696881f, -0.1439443f,
  -0.1160415f, -0.4399103f, +0.0692173f, +0.1782603f, +0.2699033f, +0.2386767f, +0.3959778f, -0.1617973f,
  -0.0387602f, -0.0370256f, +0.0084062f, -0.0729798f, -0.0839707f, -0.4042264f, +0.0372489f, +0.1240651f,
  -0.0769812f, +0.0021737f, +0.3818205f, -0.0345942f, +0.0080431f, -0.0177733f, +0.3840670f, -0.0043176f,
  +0.2718572f, -0.0101749f, +0.1254325f, -0.0367271f, +0.1363891f, +0.2126028f, -0.0348775f, +0.1314633f,
  -0.0334803f, +0.1858142f, +0.0475834f, +0.1249215f, +0.2533310f, -0.2048880f, -0.0313265f, +0.0977528f,
  -0.1493996f, +0.1983135f, -0.0365326f, -0.0185919f, +0.0725076f, +0.2572138f, +0.0218516f, -0.0035497f
);

const float biases[4] = float[4](
  -0.1941039f, -0.0367509f, +0.0354898f, +0.0941225f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer55 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0778526f, +0.0974099f, -0.0193358f, +0.0269456f, +0.0492557f, -0.0042634f, +0.0703530f, -0.2118934f,
  +0.2019368f, -0.3065540f, -0.1532293f, +0.3635008f, -0.1329828f, -0.0629732f, -0.2880193f, +0.0057671f,
  +0.1029815f, -0.1696416f, +0.1460389f, +0.0886770f, +0.1196108f, -0.3672781f, +0.3341755f, -0.0284819f,
  -0.0886590f, +0.1570989f, +0.0348101f, +0.1533221f, -0.2659184f, +0.2240339f, +0.0172522f, +0.0732231f,
  -0.0256612f, +0.4728740f, -0.3838256f, +0.0441693f, +0.1291098f, +0.3719693f, -0.0995246f, +0.0778397f,
  -0.0822770f, +0.2110946f, -0.2743224f, +0.0502807f, +0.4669502f, -0.1831072f, +0.5793983f, -0.3386877f,
  +0.0690196f, +0.4093300f, -0.1779010f, -0.0339680f, -0.1675948f, +0.2496469f, +0.0563172f, +0.1072881f,
  +0.1235297f, -0.0193540f, +0.0131531f, -0.3778704f, +0.1595605f, +0.2847977f, +0.0019068f, +0.0446841f,
  +0.1318186f, +0.0827023f, +0.0648165f, -0.2375261f, +0.4339195f, -0.7329802f, +0.0865230f, -0.1007247f,
  -0.2405670f, +0.5533631f, +0.0562200f, +0.1725811f, +0.2699773f, -0.0955762f, -0.0930761f, -0.0632803f,
  +0.1808506f, -0.0492914f, -0.0431911f, +0.3758478f, -0.1005048f, -0.3214408f, -0.1543845f, -0.2213522f,
  +0.1165139f, +0.0867765f, +0.1046466f, +0.3631263f, -0.3378202f, +0.1230787f, -0.1323168f, -0.0654536f,
  -0.2026237f, +0.1309364f, -0.2577763f, +0.1123873f, +0.3987439f, -0.0190101f, +0.1166053f, +0.0320990f,
  -0.1224319f, -0.2540815f, -0.3510040f, +0.0752079f, +0.6884774f, -0.0871448f, +0.0731178f, +0.0416269f,
  +0.1739668f, +0.1188614f, +0.0173265f, -0.1419600f, -0.2283710f, -0.0439279f, -0.1977794f, +0.1031824f,
  +0.4989250f, +0.1270693f, +0.2346672f, -0.2198821f, +0.2147203f, +0.0219712f, +0.0118866f, -0.1734120f,
  +0.2103254f, +0.2765038f, -0.0003800f, +0.1053602f, -0.0935382f, -0.3910967f, +0.0284012f, +0.0691399f,
  +0.3783659f, -0.0654225f, +0.1141517f, +0.0064355f, -0.1563685f, +0.5734168f, -0.1057564f, +0.2993600f,
  -0.0950373f, -0.0953136f, +0.2658710f, -0.0990129f, -0.0468487f, -0.0570377f, -0.0751148f, -0.1121783f,
  +0.2024581f, -0.0473542f, -0.2255565f, +0.0861690f, -0.1486233f, -0.0069158f, +0.1585407f, +0.0949089f,
  -0.1638770f, +0.0709264f, +0.0549476f, +0.1371512f, +0.1635123f, +0.0073265f, -0.0881445f, +0.1741884f,
  -0.3581349f, -0.1379059f, +0.3555422f, +0.0541801f, -0.0972323f, +0.0032603f, +0.0143846f, +0.0756771f,
  +0.0232940f, -0.2583332f, -0.4145821f, +0.0642569f, -0.2187388f, -0.1308342f, +0.6397428f, +0.0550762f,
  -0.4317101f, +0.2149502f, +0.0647356f, +0.0668867f, -0.0129891f, +0.0536989f, -0.1223139f, -0.0776684f,
  +0.2175636f, +0.1096119f, +0.3253283f, -0.0637268f, -0.2267574f, -0.0250166f, -0.0182814f, +0.0823228f,
  +0.1315171f, -0.0673759f, -0.0694907f, -0.0047408f, -0.1650138f, -0.0485564f, -0.1733266f, -0.1631071f,
  -0.0704569f, +0.0915594f, +0.0717456f, +0.3406331f, +0.2839262f, +0.1391719f, -0.3198521f, +0.0502645f,
  -0.0473212f, +0.2756569f, +0.0295940f, +0.1475617f, +0.0862639f, -0.0665257f, -0.1248297f, +0.0110844f,
  +0.1622483f, -0.0131109f, +0.2711355f, +0.3913093f, +0.5693485f, +0.4860336f, -0.1028536f, -0.0866704f,
  +0.4721322f, +0.0482975f, +0.2718377f, -0.4389422f, +0.0651294f, +0.2103929f, +0.0966275f, -0.1140575f,
  +0.0808879f, +0.0339507f, -0.1994359f, -0.0587932f, -0.1103561f, -0.4189214f, -0.2146001f, +0.1075969f,
  +0.1191529f, -0.1424989f, -0.1962367f, +0.3874788f, -0.4231294f, -0.2358112f, -0.1122062f, +0.1282211f,
  +0.1787591f, -0.0905037f, +0.1157986f, -0.3520831f, -0.1409827f, -0.2151380f, -0.1308080f, -0.2327034f,
  -0.0107044f, -0.0303864f, +0.0050236f, -0.0811300f, +0.0194334f, +0.0834847f, -0.1644993f, -0.0123805f,
  -0.0494234f, +0.0254378f, -0.0607691f, -0.1495403f, +0.0670285f, -0.0613237f, -0.2813857f, -0.0682224f,
  +0.1112528f, +0.2237348f, -0.0534008f, +0.0386931f, -0.0475001f, +0.0774512f, -0.0508298f, +0.0973407f
);

const float biases[4] = float[4](
  -0.0371688f, -0.1019854f, +0.0099299f, -0.0784222f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer56 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.4086562f, -0.0007529f, +0.0240648f, -0.1384396f, -0.0760011f, -0.3454671f, -0.3543849f, +0.1148827f,
  -0.2129231f, -0.0285809f, +0.1740030f, -0.1432231f, +0.0683564f, -0.1096278f, +0.0379330f, +0.2099230f,
  -0.2274872f, -0.0252825f, +0.1773788f, -0.0964409f, +0.2967584f, -0.0044285f, -0.2457702f, +0.0334548f,
  -0.3331751f, -0.3011568f, -0.0980053f, -0.1045603f, +0.2199881f, -0.1858778f, +0.3031119f, -0.1991877f,
  -0.4714474f, -0.0719591f, +0.1068972f, -0.1700215f, +0.2825847f, +0.1554869f, -0.0944284f, -0.0069492f,
  +0.0224223f, -0.0512438f, +0.0457290f, -0.1055209f, -0.0595168f, +0.4516332f, +0.1347607f, -0.2594142f,
  -0.2861648f, -0.0408114f, -0.2045622f, -0.0449302f, +0.0215695f, -0.0522396f, -0.0774451f, -0.4002073f,
  -0.0850219f, -0.0201928f, +0.0051138f, +0.0410931f, -0.1369950f, +0.1187574f, -0.1027723f, -0.1276320f,
  -0.1885138f, -0.4612207f, -0.0007725f, +0.1500998f, +0.2653022f, +0.0690264f, +0.1211339f, +0.1105013f,
  +0.2647854f, -0.0302291f, -0.2600860f, +0.1045442f, +0.2924603f, -0.2859730f, +0.1001709f, -0.0293005f,
  -0.1264979f, -0.1158014f, -0.0959771f, +0.0069123f, -0.0862516f, -0.2222593f, -0.0084297f, -0.1179956f,
  +0.1514223f, +0.2807682f, +0.0329814f, +0.2561694f, -0.0677343f, -0.2204070f, +0.1790768f, -0.2666565f,
  +0.3515970f, -0.0149328f, +0.1339314f, +0.1681378f, -0.1506777f, +0.2816866f, -0.1838619f, +0.1709274f,
  +0.0439304f, -0.0146534f, +0.5107309f, +0.2758505f, -0.0366505f, -0.0480404f, +0.0160891f, +0.1178522f,
  +0.0084697f, -0.0059226f, -0.0045319f, +0.2592048f, -0.3072042f, +0.0524032f, +0.1391172f, +0.0402286f,
  +0.0313409f, -0.0685297f, -0.1420186f, -0.2203393f, +0.3445635f, +0.1257180f, -0.0146424f, +0.1025132f,
  +0.0868003f, -0.0311301f, +0.2283558f, -0.1487803f, +0.2228470f, +0.0728327f, +0.1049827f, -0.3538269f,
  +0.2007865f, +0.1798459f, -0.1503771f, +0.1054595f, +0.0175817f, -0.2190801f, -0.1906832f, -0.0563503f,
  +0.0801684f, +0.0316729f, -0.1301807f, -0.0949179f, +0.1300140f, -0.3273386f, +0.0863530f, +0.1321190f,
  -0.0401739f, +0.1602287f, -0.2718367f, -0.0600065f, -0.2664972f, -0.0668729f, +0.2414809f, -0.2001509f,
  -0.1271937f, +0.1395902f, -0.1004013f, +0.0545198f, +0.2346223f, -0.0575824f, -0.1007122f, +0.0080882f,
  +0.1043228f, -0.0038628f, +0.2016072f, -0.0664913f, -0.0501560f, -0.0481665f, -0.1743806f, -0.4315983f,
  +0.3672341f, +0.1534479f, -0.0788644f, +0.2843913f, +0.3406468f, +0.2319303f, +0.4753758f, -0.2260667f,
  -0.0248059f, +0.1510879f, -0.0809723f, +0.2229338f, +0.1942575f, -0.0054339f, -0.1054054f, -0.1026118f,
  -0.0418988f, -0.0603348f, -0.0499059f, +0.3347753f, -0.3710711f, +0.0330997f, -0.0926708f, +0.0392969f,
  +0.1404125f, +0.0953410f, +0.2362352f, -0.1841787f, -0.0305379f, +0.0596587f, +0.0413070f, -0.2700749f,
  -0.0656288f, +0.1997020f, -0.0636925f, +0.4064454f, +0.2776457f, -0.2291026f, -0.1990220f, +0.2583861f,
  +0.1626157f, +0.1915708f, -0.2203893f, +0.2770265f, -0.0835092f, -0.1524049f, +0.0712817f, +0.1516289f,
  -0.0638788f, +0.1530907f, -0.2810775f, -0.0215221f, -0.0184326f, -0.4600876f, +0.4641225f, +0.1069824f,
  +0.0166169f, -0.0935530f, +0.0996066f, -0.0205821f, -0.0786519f, +0.1109962f, -0.0058807f, +0.1397858f,
  -0.3162291f, -0.0462149f, +0.0272866f, +0.0194718f, +0.3654596f, +0.0569096f, +0.3691989f, +0.2042575f,
  -0.0779713f, -0.3038119f, -0.3859835f, -0.1906904f, +0.0256459f, +0.0235825f, +0.0489571f, -0.0156117f,
  +0.0066338f, +0.0739390f, +0.1282385f, +0.0913073f, -0.3643971f, +0.0441510f, -0.3247944f, -0.3290874f,
  -0.1601144f, -0.1549008f, -0.2821028f, -0.0620794f, -0.0319731f, -0.1727490f, +0.2243154f, +0.3553281f,
  -0.2525909f, -0.2352788f, -0.3282927f, -0.0393883f, -0.1889808f, +0.1638902f, +0.0891174f, -0.1592785f,
  -0.0303503f, -0.0189695f, -0.0725435f, -0.0620507f, -0.6546851f, +0.2937369f, +0.1383187f, -0.1303613f
);

const float biases[4] = float[4](
  -0.0839763f, -0.0015894f, -0.0120279f, +0.0708571f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer56 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0977794f, -0.1479029f, +0.0011549f, +0.2748198f, -0.2989841f, +0.0274853f, -0.0634988f, +0.1927573f,
  -0.2257587f, -0.2981385f, +0.2963798f, +0.0594746f, -0.0426750f, +0.0989993f, +0.0617465f, +0.2815935f,
  -0.0678976f, -0.0446108f, +0.0214627f, +0.1921209f, +0.1264377f, -0.0263123f, +0.0766156f, -0.1294291f,
  +0.1180431f, -0.2220624f, -0.1874745f, +0.0763222f, -0.0747448f, +0.2017566f, +0.1067805f, +0.0602976f,
  +0.3421871f, -0.4296643f, +0.0911172f, +0.0124030f, +0.0215782f, -0.1283152f, -0.1733945f, +0.1977300f,
  -0.1827576f, +0.1713678f, -0.1870714f, -0.2291761f, -0.1477669f, +0.1308557f, -0.1316231f, +0.0508577f,
  -0.2026140f, +0.2050228f, -0.1112130f, +0.2307908f, +0.2256309f, +0.2867508f, -0.2115218f, -0.3715787f,
  +0.0879722f, +0.0751178f, -0.0837150f, +0.1561982f, +0.1911815f, +0.0374245f, -0.0406702f, -0.5307335f,
  +0.1387290f, +0.2444610f, +0.1221093f, +0.1199017f, -0.0160315f, -0.0542715f, -0.0724220f, -0.0698046f,
  +0.1225750f, +0.0297918f, +0.1321124f, -0.1080289f, +0.2726085f, -0.3196568f, -0.0289372f, -0.0118242f,
  -0.1969280f, -0.0047997f, +0.2738720f, -0.1750405f, +0.0943434f, +0.5154628f, -0.0334049f, +0.2448622f,
  -0.2653435f, -0.4237807f, -0.0991538f, -0.2893768f, -0.5292511f, +0.0527432f, +0.0102403f, -0.0480088f,
  +0.0318137f, -0.0384122f, +0.0377736f, -0.2883404f, -0.0635405f, -0.0269067f, -0.3399285f, -0.2172406f,
  -0.2451020f, -0.0639789f, +0.0438518f, -0.0088211f, -0.1643354f, +0.7348983f, -0.1551142f, -0.2245625f,
  -0.2606406f, +0.5012391f, -0.0397857f, -0.2895405f, -0.1122539f, +0.3572779f, +0.0710673f, +0.0023205f,
  +0.1651373f, -0.1555027f, +0.0091551f, +0.0531693f, -0.0889527f, +0.0038912f, +0.1315233f, -0.1779200f,
  -0.0310946f, -0.0474621f, +0.0396497f, +0.0412046f, +0.2041432f, +0.2505368f, +0.1045274f, -0.2543879f,
  +0.0174137f, -0.4615072f, -0.1254484f, -0.0290727f, -0.2159071f, -0.1489694f, -0.0997783f, +0.0926151f,
  +0.1998381f, -0.1915251f, +0.1640510f, +0.2860613f, -0.3097250f, -0.0765036f, -0.1262622f, +0.0332536f,
  +0.4348673f, -0.2863046f, +0.2025597f, +0.0843021f, -0.0277420f, +0.1816873f, +0.0797747f, -0.0596668f,
  +0.0462019f, -0.0759156f, -0.0163870f, +0.1685472f, +0.1742929f, -0.2635110f, -0.0618913f, +0.0979963f,
  +0.4118585f, -0.0179045f, -0.1675263f, +0.0312849f, -0.4132183f, +0.3521938f, -0.1023565f, +0.1349460f,
  -0.1525122f, -0.1895911f, -0.3025870f, +0.2067471f, -0.1998374f, -0.1537713f, -0.0718701f, +0.4717301f,
  +0.0849617f, +0.0067390f, +0.1079351f, -0.4222667f, -0.3067023f, -0.1991267f, -0.2437494f, +0.0603231f,
  +0.2188705f, +0.0810769f, -0.2474889f, -0.0540348f, +0.1117742f, +0.2239805f, -0.2391238f, -0.1047190f,
  +0.2675381f, +0.4025013f, +0.0799089f, -0.0877824f, -0.2445233f, -0.0442414f, -0.0846348f, -0.0613006f,
  +0.0483945f, +0.3196795f, +0.1192769f, -0.0855703f, +0.0541128f, -0.3703808f, -0.0457616f, -0.0974988f,
  +0.0851002f, -0.0059800f, +0.1827673f, +0.2517716f, -0.1744600f, +0.0238825f, -0.3157539f, -0.1414666f,
  -0.1299005f, -0.0297376f, +0.0218961f, -0.0314077f, +0.0803517f, +0.4021558f, +0.2945301f, -0.0259973f,
  +0.0932020f, +0.0166774f, +0.1584464f, +0.1704683f, -0.2559168f, +0.0823950f, +0.0686946f, -0.1596361f,
  -0.0881730f, +0.2075945f, +0.0872248f, +0.2257557f, +0.1493449f, -0.0899861f, +0.2050846f, -0.0951508f,
  -0.3230442f, -0.0220665f, -0.2863941f, +0.0677863f, +0.0366307f, -0.0713329f, +0.1682331f, +0.1567930f,
  +0.1409825f, -0.4320940f, -0.0246628f, +0.0392557f, -0.0464235f, -0.0605844f, +0.0658744f, -0.1061775f,
  +0.0225058f, -0.0988495f, -0.0821435f, +0.1510988f, +0.0755190f, -0.2173359f, -0.0542933f, -0.2257748f,
  -0.2505257f, +0.0829216f, -0.2913959f, -0.3194503f, -0.1546710f, +0.3363396f, +0.1011636f, +0.2600477f,
  -0.0298342f, +0.0360251f, +0.0160199f, -0.0188745f, -0.0925607f, +0.0224785f, +0.1718656f, +0.0086168f
);

const float biases[4] = float[4](
  +0.0648991f, +0.0473362f, -0.0419002f, -0.0636694f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer57 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0617324f, -0.0415476f, -0.2024282f, +0.1353489f, -0.1289794f, +0.0962133f, +0.0115013f, +0.0825474f,
  -0.1199538f, -0.0188734f, +0.1063179f, +0.0864123f, -0.1574629f, -0.0591465f, +0.2135667f, +0.0036229f,
  -0.1025314f, -0.0965140f, -0.1412160f, +0.1597361f, -0.2664393f, -0.2334894f, +0.0177073f, -0.0388086f,
  -0.0285298f, +0.1127131f, -0.1256941f, +0.1491449f, -0.0280523f, +0.1139354f, -0.1004579f, +0.0158445f,
  -0.1708077f, -0.0970526f, +0.1449253f, +0.2745569f, -0.0558974f, +0.2869320f, +0.0144575f, -0.0203541f,
  +0.1066625f, -0.1664402f, -0.0736129f, -0.0261749f, +0.1877895f, +0.0380560f, -0.1014597f, -0.5690370f,
  +0.0925569f, +0.1253328f, -0.0745457f, -0.0527882f, +0.2428812f, +0.0017882f, +0.0231978f, +0.0753064f,
  +0.1434980f, -0.1938491f, -0.0072757f, -0.0459290f, +0.0382087f, -0.1535737f, -0.0627724f, +0.0355115f,
  +0.2663572f, +0.1084695f, +0.0487239f, +0.0351404f, -0.1216244f, -0.4513866f, -0.0407166f, -0.0026081f,
  -0.0020014f, -0.0912398f, +0.4192178f, -0.2042584f, +0.2991193f, -0.0450725f, +0.2411708f, -0.2245225f,
  +0.0201100f, -0.2473252f, -0.1745648f, -0.2903469f, -0.0446634f, -0.3650738f, +0.1159908f, -0.1652171f,
  -0.1160934f, +0.0485439f, -0.1540344f, +0.0597539f, +0.0282817f, -0.0571171f, -0.0391878f, +0.0964573f,
  -0.0696784f, -0.1850442f, +0.0152651f, +0.1510563f, +0.1679754f, -0.3672974f, -0.0737809f, +0.1649207f,
  -0.1088086f, +0.1000493f, -0.0973007f, +0.1812955f, +0.2903829f, +0.0108426f, -0.1561662f, +0.1361744f,
  -0.0391139f, +0.0213334f, -0.2106739f, +0.1468479f, -0.1456235f, +0.2050468f, +0.1181002f, +0.0138532f,
  -0.1391516f, -0.2753511f, +0.2030692f, +0.2533791f, -0.0120098f, -0.1479734f, +0.1675538f, -0.0145738f,
  -0.0634630f, -0.2638526f, -0.2148478f, -0.1642222f, +0.1404224f, +0.1107904f, -0.0817860f, +0.0587349f,
  -0.0780890f, -0.0595732f, -0.1440093f, +0.1052856f, -0.1776023f, -0.0666067f, -0.2819335f, +0.2121301f,
  +0.3352827f, +0.6201699f, +0.1693936f, -0.0331401f, -0.6001027f, -0.4345472f, +0.4730420f, +0.3277796f,
  -0.1698108f, +0.0141759f, +0.1962110f, +0.1218498f, -0.0613441f, +0.2980390f, +0.1520297f, +0.1743948f,
  -0.1262173f, +0.1512323f, +0.1179169f, +0.1512009f, +0.0080547f, +0.0399639f, -0.1024001f, +0.0417827f,
  +0.5179970f, +0.2947437f, -0.3984174f, -0.0480208f, +0.0894881f, +0.1685834f, -0.0376504f, -0.0723756f,
  -0.2336027f, -0.0488353f, -0.2319197f, +0.1571261f, +0.0399466f, -0.0266351f, -0.2385833f, -0.0410221f,
  +0.0365253f, +0.0709401f, +0.0571755f, +0.0215405f, -0.0183949f, -0.1876018f, -0.2761415f, +0.0873689f,
  -0.0650442f, -0.2513997f, -0.0049750f, -0.0888548f, +0.3302992f, +0.0453092f, +0.3109013f, -0.2932541f,
  -0.2809666f, -0.1524384f, +0.0015216f, +0.0361346f, +0.2936532f, -0.2169381f, +0.0867538f, -0.0642937f,
  +0.1563478f, -0.2005927f, +0.2369078f, +0.0220941f, +0.1403037f, -0.2620294f, +0.0752743f, -0.1027570f,
  +0.0533402f, +0.2447430f, +0.1646695f, -0.0278197f, +0.2371121f, +0.0715012f, +0.1734843f, +0.0241172f,
  +0.1627710f, +0.2487153f, +0.1590830f, +0.1519708f, +0.2727499f, -0.3666500f, -0.0380066f, -0.2387077f,
  -0.3675512f, +0.2356980f, -0.0307972f, -0.1423643f, +0.0804018f, -0.0270315f, +0.3941469f, +0.0462257f,
  -0.0799114f, -0.1605642f, +0.1739565f, +0.1607670f, -0.3270473f, -0.4014188f, -0.2428486f, -0.1631082f,
  -0.1810235f, -0.0608134f, +0.0915162f, +0.0785514f, -0.1866079f, -0.0605918f, -0.0680119f, +0.3138612f,
  -0.3262779f, +0.0651348f, +0.1207067f, -0.1237216f, -0.0518460f, -0.1765708f, +0.0179711f, -0.0562850f,
  +0.1839717f, +0.2000044f, -0.0595833f, +0.0824648f, -0.5371302f, -0.1289405f, -0.0969420f, -0.0984695f,
  -0.0133964f, +0.0803593f, -0.0707247f, -0.0416254f, -0.1385662f, +0.1938828f, -0.3239565f, +0.0374334f,
  -0.2293277f, -0.0715842f, +0.0945662f, -0.1758606f, -0.2776138f, +0.0783107f, -0.0776050f, +0.0622425f
);

const float biases[4] = float[4](
  -0.0015355f, +0.1073981f, -0.1118580f, +0.0558975f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer57 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1513709f, +0.2760592f, -0.1786810f, +0.2482454f, -0.1235846f, +0.2395177f, +0.1692884f, +0.2516581f,
  +0.0745416f, -0.0291424f, +0.1342572f, +0.0083273f, +0.0874602f, -0.0425150f, -0.1143177f, +0.0246383f,
  -0.0484800f, -0.0164876f, -0.0307813f, -0.0236056f, +0.0536153f, -0.0858526f, +0.1824518f, +0.0233074f,
  +0.1285702f, -0.0192427f, +0.1277249f, -0.2158920f, -0.3841416f, -0.5143859f, +0.8337663f, +0.7465876f,
  +0.1192915f, -0.0469764f, +0.0469073f, -0.0216810f, -0.2230994f, +0.2049280f, -0.0763945f, +0.0422002f,
  -0.1387522f, +0.1090075f, +0.0650672f, -0.0051025f, -0.0459432f, -0.0678497f, +0.0153069f, +0.0475891f,
  +0.4069028f, -0.1847774f, +0.0403548f, +0.1362584f, -0.0737905f, +0.1816463f, -0.2074596f, +0.0663270f,
  -0.0808857f, -0.1343060f, -0.0129351f, -0.1399096f, +0.2434464f, +0.0779722f, +0.0107699f, -0.0110487f,
  -0.0796940f, -0.1270209f, -0.0168350f, -0.0482884f, +0.0925747f, +0.0808548f, +0.0685923f, +0.0739664f,
  -0.1825037f, +0.2968293f, -0.2309748f, +0.0044073f, +0.0843991f, +0.3414381f, +0.0529897f, +0.0357339f,
  +0.2391285f, -0.2941852f, -0.1849042f, -0.1138818f, -0.1525702f, +0.0968136f, -0.3040015f, +0.0062017f,
  -0.0471358f, +0.2459843f, +0.0850607f, +0.2629353f, -0.0777096f, +0.2700747f, -0.1587263f, +0.0309446f,
  -0.2036968f, +0.3126881f, -0.0824578f, -0.1937967f, +0.2761594f, +0.2118698f, +0.1665496f, +0.0922600f,
  +0.2649701f, -0.2607166f, -0.1366580f, +0.1128334f, +0.1461017f, -0.2864080f, -0.2947194f, +0.1085417f,
  -0.1086870f, +0.2505246f, -0.0773452f, -0.1189957f, +0.0538524f, +0.0743626f, +0.1756784f, +0.1838815f,
  +0.0847170f, -0.1030646f, -0.0606446f, +0.1714683f, +0.1211190f, +0.0069381f, -0.2106137f, -0.0165352f,
  +0.2289740f, -0.2407536f, -0.0308552f, -0.2275227f, +0.0307618f, +0.3616071f, +0.2362165f, -0.1919764f,
  +0.1413574f, -0.1454945f, +0.0887842f, +0.1891935f, +0.1191394f, +0.0030675f, +0.1785357f, -0.1035441f,
  -0.1796291f, +0.0559251f, +0.0102684f, +0.0568451f, +0.0718502f, +0.0406728f, -0.0235025f, +0.1781938f,
  -0.2283261f, -0.0928238f, +0.0361793f, -0.0689051f, +0.1899786f, +0.2110808f, -0.0114553f, -0.0435844f,
  +0.1205914f, -0.1061900f, -0.0492566f, +0.2988475f, +0.1384565f, +0.0969770f, +0.0258588f, +0.0166399f,
  -0.3770331f, -0.2927262f, +0.3109274f, +0.0180275f, +0.0780650f, -0.1704800f, +0.1712246f, -0.0140046f,
  -0.0341140f, +0.1685859f, -0.0847857f, -0.0061365f, +0.1217618f, -0.1029972f, +0.0274832f, -0.1284308f,
  -0.0474877f, +0.2737910f, +0.2730851f, +0.0093225f, -0.2022808f, -0.1605505f, +0.3782500f, +0.3294145f,
  -0.3742274f, -0.0658357f, -0.0674630f, -0.1937990f, -0.1031058f, -0.0463464f, +0.1925463f, +0.0297256f,
  -0.1177923f, +0.1629591f, -0.0916627f, -0.1616872f, -0.0482189f, +0.0386425f, -0.0462411f, -0.1159039f,
  +0.2211309f, +0.2332635f, +0.3021169f, +0.2659813f, -0.0411685f, -0.0679514f, +0.1413666f, -0.1243812f,
  +0.1694200f, -0.0496711f, +0.4440538f, -0.0325892f, +0.1965438f, -0.0368827f, -0.2482020f, +0.0033611f,
  -0.0761225f, -0.1746207f, +0.1595526f, +0.1713813f, -0.2362230f, -0.0376173f, -0.1543054f, +0.1054822f,
  -0.1375495f, +0.3084724f, +0.3547108f, +0.0356855f, -0.2696139f, -0.1481028f, -0.0441642f, -0.2599545f,
  +0.2424596f, -0.1070229f, +0.1039333f, -0.2184194f, -0.1286225f, +0.0561111f, -0.2475177f, -0.4102767f,
  +0.2785489f, -0.0787015f, -0.2559934f, -0.2315610f, -0.1529973f, -0.4284911f, +0.0253791f, +0.0200734f,
  -0.0039927f, +0.1295320f, -0.2390362f, -0.1158983f, -0.0113242f, -0.0548093f, -0.0283850f, -0.1572470f,
  -0.1978139f, -0.3927848f, +0.0707485f, -0.1382117f, -0.0273506f, -0.0506146f, +0.1386463f, -0.0969045f,
  +0.0426767f, -0.0957158f, -0.0843481f, -0.1418218f, -0.0822074f, +0.2152355f, -0.1244946f, -0.1547856f,
  -0.0640437f, +0.4987605f, +0.2016088f, -0.1238474f, -0.5044643f, -0.1536123f, +0.2317721f, -0.1559047f
);

const float biases[4] = float[4](
  -0.2679450f, +0.1620893f, +0.0235149f, -0.0751409f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer58 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0433048f, +0.0379079f, -0.0582422f, -0.0647499f, -0.0616808f, +0.0811646f, +0.0104687f, +0.1857246f,
  -0.3877075f, -0.0827400f, +0.0469849f, -0.1329414f, -0.0452333f, +0.0630690f, +0.1559078f, +0.0090060f,
  -0.0051285f, +0.1678395f, +0.0376683f, -0.1105251f, -0.4743042f, -0.0687978f, -0.1184429f, -0.0397192f,
  -0.1551253f, -0.0723891f, -0.0452356f, -0.1167473f, +0.1319493f, -0.0575946f, +0.0490806f, +0.2284178f,
  +0.0774735f, -0.0835195f, +0.1124400f, +0.2021820f, -0.1608947f, -0.0577414f, +0.0051460f, -0.2042785f,
  +0.2060618f, -0.1546836f, -0.4463556f, +0.4163558f, +0.1219585f, +0.1031643f, -0.1199556f, -0.1444287f,
  +0.1022295f, +0.0225468f, +0.0680317f, +0.2294598f, +0.0528122f, -0.1777356f, -0.1451264f, +0.0516236f,
  -0.0370366f, +0.1077611f, -0.1008943f, -0.0236888f, -0.0072463f, -0.3405820f, +0.2154470f, +0.0216538f,
  +0.0317547f, +0.1031725f, +0.1229556f, +0.1163792f, +0.0962019f, +0.2864107f, -0.0364304f, -0.1880305f,
  +0.1410480f, -0.0420843f, +0.0968245f, +0.0289298f, +0.0806898f, +0.3908558f, +0.1984313f, +0.0447024f,
  +0.3046007f, +0.0201335f, +0.0309537f, +0.0684083f, +0.2405824f, +0.2804798f, +0.1359135f, -0.0726162f,
  -0.2924402f, -0.2904371f, -0.0115935f, -0.1618000f, +0.1507311f, +0.3500806f, +0.0191204f, -0.1152197f,
  +0.0050101f, +0.1387572f, +0.0743547f, -0.0514746f, -0.1007210f, -0.1722063f, +0.1059461f, +0.0705552f,
  -0.1128692f, +0.1133178f, +0.1148335f, -0.1303872f, +0.0753673f, +0.1456366f, +0.4943452f, -0.1124402f,
  -0.1480900f, -0.0451132f, +0.2231642f, -0.0245845f, +0.3567001f, -0.3287512f, -0.0700216f, -0.0093075f,
  -0.5442970f, -0.1257174f, -0.0083237f, -0.2333342f, +0.0849141f, -0.2872773f, +0.1236269f, -0.0294165f,
  -0.3466375f, -0.0999443f, +0.2079010f, -0.4485697f, +0.0787426f, -0.1082076f, +0.0913573f, +0.0335438f,
  +0.1709890f, -0.1270413f, -0.3184298f, -0.3388624f, -0.3504851f, +0.2880751f, -0.2172370f, +0.0192237f,
  +0.1325928f, -0.3602656f, -0.1317663f, -0.1897247f, -0.0808854f, -0.4419649f, -0.0003791f, -0.0380400f,
  -0.0197041f, -0.1787715f, -0.1854912f, +0.1146326f, +0.3163065f, -0.1856516f, +0.0303418f, +0.0288649f,
  +0.1581702f, +0.1405885f, -0.1793236f, -0.0830126f, +0.4207585f, +0.0392636f, +0.0569030f, -0.0485157f,
  -0.1747396f, +0.0646231f, -0.1665534f, -0.0378968f, -0.0841409f, +0.0837113f, +0.0074271f, +0.2802553f,
  -0.2454358f, -0.1713432f, +0.1806014f, -0.2337549f, -0.0061124f, +0.2780408f, -0.2629615f, -0.0117019f,
  -0.0296634f, +0.1531086f, +0.3423700f, -0.1205436f, +0.5454789f, +0.1293006f, -0.2585016f, -0.3140560f,
  +0.1308234f, +0.0824272f, +0.3506154f, +0.0983574f, -0.0840770f, -0.2190373f, -0.3280630f, -0.0545264f,
  +0.0587174f, +0.1747024f, +0.2845291f, +0.1285220f, +0.1930407f, -0.0856386f, -0.1726932f, -0.0893760f,
  +0.0588971f, +0.0576428f, +0.2892255f, +0.0281072f, +0.5692573f, -0.0662834f, -0.0009943f, -0.1284053f,
  -0.2281122f, +0.1994813f, -0.0648811f, +0.1236975f, +0.0038701f, -0.4383889f, -0.1230765f, -0.0551660f,
  -0.0925681f, +0.1852548f, -0.1372729f, +0.1736926f, +0.3224896f, +0.0270464f, +0.0685855f, +0.2751837f,
  +0.0550652f, -0.0693362f, -0.0078302f, -0.0969395f, +0.0931503f, -0.0001742f, +0.1367156f, +0.1068925f,
  +0.0350261f, +0.0732167f, -0.0333619f, +0.2006248f, -0.0209582f, -0.0611949f, +0.0739020f, +0.4080694f,
  -0.0662960f, -0.0432826f, -0.2584887f, -0.0581719f, +0.0199211f, -0.0841046f, -0.2321032f, +0.0211679f,
  +0.3261579f, +0.2000255f, -0.0458272f, -0.1425017f, +0.1097931f, +0.0299618f, -0.0728645f, +0.0876687f,
  -0.2766916f, +0.0060428f, +0.0509926f, +0.0974387f, +0.0358761f, -0.1856660f, -0.0721052f, -0.0416983f,
  -0.0621362f, -0.0515503f, +0.0442648f, +0.0590422f, +0.1497071f, +0.1319469f, -0.0949831f, +0.0025906f,
  -0.0781602f, +0.1237825f, +0.0347706f, +0.4433389f, -0.4229342f, -0.2541280f, -0.0673337f, -0.2123184f
);

const float biases[4] = float[4](
  -0.0704518f, +0.0338982f, +0.0185877f, +0.0146566f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer58 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1807068f, +0.1755347f, +0.0464708f, -0.0117903f, -0.1252298f, +0.0258717f, +0.5782468f, +0.1844733f,
  +0.0556345f, -0.4182558f, +0.0319807f, +0.2015389f, -0.3602729f, -0.1294437f, +0.2687640f, +0.0301017f,
  -0.0708090f, -0.1399813f, +0.0832233f, +0.3581573f, -0.4424087f, -0.2452918f, +0.1031105f, +0.0189337f,
  -0.0284904f, +0.0361936f, +0.0756816f, -0.2022850f, -0.0640580f, +0.0405705f, +0.0436059f, -0.0437533f,
  -0.2628823f, -0.0196703f, +0.2443630f, +0.0230643f, -0.2038285f, -0.0151260f, -0.3133229f, -0.1075947f,
  -0.1404701f, -0.2118227f, +0.0277329f, +0.0281805f, +0.4306239f, -0.0741120f, -0.3271856f, +0.1228567f,
  -0.0010862f, +0.1593290f, +0.0929696f, -0.0780436f, +0.0475676f, -0.0756613f, -0.2114435f, +0.2862408f,
  -0.0119542f, +0.0911922f, +0.3155099f, -0.0995332f, -0.2524885f, -0.1874975f, -0.1875847f, +0.3193595f,
  +0.1136703f, -0.1558451f, +0.5495738f, +0.1944313f, -0.2878139f, -0.0778193f, +0.0025426f, +0.0425396f,
  +0.0971613f, +0.1502626f, +0.0339782f, -0.0571599f, -0.0237540f, -0.1350223f, +0.1516854f, +0.2423197f,
  -0.0595649f, +0.2923617f, +0.0091610f, -0.0604746f, +0.2191527f, -0.0738322f, +0.2304432f, -0.0295802f,
  -0.0054198f, +0.1374421f, -0.1042352f, +0.2311044f, -0.3602238f, -0.0912664f, +0.1894981f, +0.0552544f,
  -0.2415167f, -0.0755772f, -0.1679616f, -0.0281614f, +0.0117746f, +0.0519000f, -0.3224913f, +0.2681255f,
  -0.0564033f, -0.0172933f, -0.1448902f, -0.0674852f, +0.0687068f, +0.4818263f, -0.0934576f, +0.1689144f,
  -0.0871294f, +0.5463377f, -0.3893059f, +0.1136893f, +0.6762969f, -0.0144312f, +0.1741159f, -0.0501713f,
  -0.0969487f, -0.1533905f, -0.1576499f, -0.0274632f, +0.2548003f, -0.2222681f, +0.0344346f, +0.0820191f,
  -0.1763513f, +0.1143048f, -0.2169814f, +0.2679894f, +0.0972343f, +0.3049878f, -0.1275239f, -0.0356640f,
  -0.0374541f, +0.1593733f, +0.2782929f, -0.0495918f, +0.0224439f, -0.0772510f, -0.3454824f, +0.0896558f,
  +0.1474869f, +0.5054559f, +0.1768878f, -0.1454870f, +0.0998811f, -0.2898279f, +0.0044632f, -0.1421907f,
  +0.2626627f, +0.0475436f, +0.0451497f, +0.2889754f, +0.0991856f, -0.2361803f, -0.0949352f, +0.0211509f,
  +0.1512032f, -0.1053669f, -0.1898667f, +0.0063010f, +0.2088156f, +0.0243246f, +0.0209888f, +0.0280508f,
  +0.3523114f, +0.0525357f, +0.1717452f, -0.1227799f, +0.0162738f, +0.1083847f, +0.3187841f, -0.0569457f,
  -0.2600665f, +0.0015383f, +0.2871390f, +0.3292924f, +0.2262876f, +0.1386517f, +0.1431904f, +0.0511582f,
  +0.0487071f, -0.4547470f, +0.0644654f, +0.3397112f, -0.6498428f, -0.1932043f, -0.1176275f, +0.2971863f,
  +0.1111204f, +0.0104373f, +0.0724605f, -0.5427148f, -0.0604612f, -0.0170950f, +0.2371750f, +0.2012662f,
  -0.1633309f, +0.1643474f, +0.3562899f, +0.0328748f, +0.0641365f, +0.4204406f, +0.0147777f, +0.2192225f,
  +0.0323327f, +0.0927961f, -0.2637876f, -0.1126274f, +0.2517080f, -0.0169254f, +0.2103057f, +0.3044539f,
  +0.0789515f, +0.1836685f, -0.1362569f, +0.1817685f, -0.1870548f, -0.1250144f, +0.0352741f, +0.2093794f,
  -0.2148089f, -0.0747625f, +0.1282693f, +0.0379156f, +0.0966827f, +0.2115678f, +0.0700975f, +0.0638937f,
  +0.0091294f, +0.1263523f, +0.3563170f, +0.3616751f, +0.0499630f, -0.0760463f, -0.1142250f, -0.0566700f,
  +0.0775811f, +0.0906910f, -0.1521149f, +0.1129394f, +0.0468586f, -0.3650953f, +0.0171719f, +0.0549872f,
  -0.3802923f, -0.1964538f, -0.0235693f, -0.6038727f, +0.0798126f, -0.1081492f, -0.1474158f, -0.0195785f,
  -0.1250673f, +0.1922967f, +0.2992104f, +0.2340570f, -0.3562520f, +0.0895592f, -0.1608223f, +0.0374349f,
  +0.2168437f, +0.0072966f, -0.2743533f, +0.1926562f, +0.0376857f, -0.0908529f, -0.0995995f, +0.0567003f,
  +0.0106281f, +0.1685435f, -0.1403428f, +0.1941065f, +0.0428363f, +0.1520156f, -0.0894806f, +0.0850258f,
  -0.0634563f, -0.0053593f, -0.3378816f, -0.1053835f, -0.3055611f, -0.1991001f, -0.0835159f, +0.0064844f
);

const float biases[4] = float[4](
  +0.0192124f, +0.0257539f, +0.0123911f, +0.0030294f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer59 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0723682f, -0.0521965f, -0.0251902f, +0.3425758f, +0.1193998f, -0.0657372f, -0.0636877f, +0.1609274f,
  +0.1676737f, -0.0493345f, +0.0597431f, -0.2297826f, +0.0976013f, -0.0957577f, +0.4365689f, -0.0917108f,
  +0.2939946f, -0.1547783f, -0.0850234f, +0.2633539f, +0.1341009f, +0.0595268f, +0.1834010f, -0.0646596f,
  +0.0582405f, +0.3912046f, +0.1289783f, +0.1206651f, -0.0652034f, +0.3562716f, +0.1107898f, +0.5158942f,
  -0.3515984f, -0.1341173f, -0.1827085f, +0.2482476f, -0.0251630f, -0.0768076f, -0.1094639f, -0.0835147f,
  +0.0476295f, -0.1986671f, -0.0347668f, -0.3406720f, +0.4858089f, -0.3361760f, +0.0693557f, -0.0879752f,
  -0.3189409f, +0.1488478f, -0.1664521f, -0.0190333f, -0.1300370f, -0.1387230f, +0.0596177f, +0.1435559f,
  +0.0405992f, +0.3590136f, -0.2529258f, -0.3464617f, +0.0764364f, +0.1731363f, +0.0127726f, -0.0685536f,
  -0.3203081f, +0.0666239f, +0.0106881f, -0.4881962f, +0.1188626f, -0.4605159f, +0.1271088f, -0.1336039f,
  -0.0715407f, +0.2770452f, -0.1243603f, -0.0206312f, +0.2422390f, -0.0767902f, +0.2058028f, +0.1112217f,
  -0.2048291f, +0.3922020f, -0.0310397f, -0.2737333f, +0.1017858f, -0.1145950f, +0.2645608f, -0.1032252f,
  -0.1813041f, +0.1756763f, -0.1640303f, +0.1502009f, -0.0619739f, +0.1972689f, -0.2441810f, +0.1758171f,
  -0.3893245f, +0.0282265f, -0.1791564f, -0.1759854f, -0.0694384f, +0.0574295f, +0.3327571f, -0.0861579f,
  -0.4239756f, +0.1966420f, -0.0489510f, -0.1321476f, -0.0136442f, -0.0716832f, +0.2671878f, -0.2485048f,
  +0.0304758f, +0.0611949f, -0.0033239f, +0.3903734f, -0.1904855f, -0.1484029f, -0.2200441f, +0.0572542f,
  +0.0352836f, +0.2867083f, +0.0581227f, +0.1632430f, +0.1588581f, -0.0909581f, +0.1123230f, +0.0420856f,
  -0.0606608f, -0.0142145f, +0.2748546f, +0.1966897f, -0.4718238f, +0.0239210f, +0.2220862f, -0.1285042f,
  -0.0828357f, +0.2225188f, +0.1668689f, +0.4650333f, -0.0483741f, +0.1307070f, -0.3214309f, +0.2035157f,
  +0.0714534f, +0.2392369f, -0.0013743f, +0.0879991f, -0.0235853f, -0.0527664f, +0.0762279f, -0.0182589f,
  -0.2945253f, +0.0671388f, +0.0024583f, +0.0652902f, +0.1550883f, +0.0792893f, -0.3544007f, +0.1508249f,
  +0.2390966f, -0.0778479f, -0.0231846f, +0.2207772f, -0.0125073f, -0.0109788f, -0.1592960f, +0.1277383f,
  +0.1744016f, +0.1921267f, -0.0552757f, -0.0805629f, -0.0965924f, +0.0087544f, +0.1804958f, -0.1451347f,
  -0.1831456f, +0.0631938f, -0.0595019f, -0.0198249f, -0.1000952f, -0.1636984f, -0.2156295f, -0.0840204f,
  +0.0934662f, -0.0131253f, +0.2361605f, +0.0276893f, -0.0356374f, +0.1176849f, -0.2575157f, -0.0334433f,
  +0.0876797f, +0.2605783f, +0.1274865f, -0.4206924f, -0.0057468f, -0.1588389f, +0.2681801f, +0.1109538f,
  -0.1424723f, -0.2506078f, +0.2619459f, -0.5660421f, -0.3168728f, -0.0559902f, +0.0902288f, +0.2011047f,
  +0.2097301f, +0.0527056f, +0.1944036f, +0.0171387f, +0.1084594f, -0.2197537f, -0.0342527f, -0.2394892f,
  -0.1240341f, -0.5219633f, +0.1742731f, -0.0914394f, +0.2296846f, +0.1518795f, -0.0032313f, +0.1109014f,
  -0.0039959f, +0.0228897f, -0.2011922f, +0.1441102f, +0.1830909f, -0.2689016f, -0.0533727f, +0.1229402f,
  +0.0264387f, -0.2528581f, -0.0330220f, +0.0603159f, -0.1393040f, -0.0841726f, -0.0004932f, +0.0160219f,
  -0.1570805f, -0.1251849f, -0.0619827f, -0.1630544f, -0.1306190f, +0.2285288f, +0.2355210f, +0.2274308f,
  -0.0402203f, +0.1094370f, +0.0271904f, -0.0270258f, +0.0540047f, +0.4601490f, -0.1548041f, +0.0762880f,
  +0.0675501f, +0.0931675f, +0.2626530f, -0.0616099f, -0.1650648f, -0.1026102f, -0.0709122f, +0.0529861f,
  +0.3977329f, +0.1920059f, -0.0213163f, +0.1211289f, +0.0181118f, +0.1783425f, +0.0250991f, +0.0510528f,
  -0.2143742f, -0.0011071f, -0.0757641f, -0.0620860f, -0.1197135f, +0.3884601f, +0.3206061f, -0.1075118f,
  +0.1324911f, -0.5566880f, -0.1084981f, -0.0309342f, +0.1168827f, +0.0959665f, -0.0909020f, -0.1020340f
);

const float biases[4] = float[4](
  +0.0230630f, +0.0357965f, -0.1019515f, -0.0827708f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer59 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0752487f, +0.0658528f, +0.1904327f, -0.5537081f, -0.3361839f, -0.0398180f, +0.4130311f, +0.4769871f,
  -0.0755475f, -0.2670042f, +0.0987646f, -0.4547021f, -0.1832568f, -0.0762729f, -0.2699405f, -0.1062467f,
  +0.0430523f, +0.1542235f, +0.0754488f, +0.2267473f, -0.0015011f, -0.0586726f, -0.2873395f, +0.1028808f,
  +0.2054564f, +0.3467674f, +0.2146212f, -0.1583063f, +0.0679270f, -0.4523121f, +0.2936271f, +0.0342323f,
  -0.1918338f, +0.0070626f, +0.1287415f, -0.0182276f, -0.0434638f, +0.0638263f, -0.2423546f, -0.1189104f,
  -0.0658508f, +0.1380902f, +0.1959805f, +0.1768453f, -0.1344342f, -0.1656324f, -0.0771545f, +0.0795308f,
  +0.1023503f, -0.0549798f, +0.0582977f, +0.0937200f, -0.0190065f, -0.1673016f, -0.1375956f, -0.2890861f,
  -0.0468005f, +0.0600824f, -0.2089032f, -0.0921935f, -0.1035411f, -0.2195441f, -0.0773651f, -0.2146827f,
  +0.0384459f, -0.0596492f, +0.1307144f, +0.0657839f, +0.1057818f, -0.2852443f, -0.1432210f, -0.0067506f,
  +0.1966450f, -0.1771952f, -0.0473779f, +0.0963978f, +0.0709459f, -0.0428720f, +0.2689078f, +0.0256950f,
  -0.0584493f, +0.1202985f, -0.0901620f, +0.2767876f, -0.3327602f, -0.1558752f, -0.3358104f, +0.2249341f,
  -0.2956875f, -0.0780572f, +0.0405645f, -0.0922089f, -0.1316073f, -0.2735111f, -0.4286722f, +0.1739760f,
  +0.1719904f, +0.1146508f, -0.1666931f, -0.0015079f, -0.0184812f, +0.0482656f, +0.0268643f, -0.0905859f,
  +0.1307729f, -0.2647757f, +0.1285116f, -0.0475348f, -0.2591583f, -0.2619306f, +0.3371095f, +0.1021479f,
  -0.3310107f, +0.1480036f, +0.0751767f, -0.0114681f, -0.2725703f, -0.2272114f, -0.0973125f, -0.1596883f,
  -0.0376860f, +0.0807607f, -0.1685534f, +0.0650970f, +0.0630900f, -0.2048875f, +0.1010318f, +0.0029137f,
  -0.0852210f, +0.2061652f, -0.2242469f, +0.2860166f, -0.0552885f, +0.0097739f, +0.1985683f, -0.1170590f,
  -0.1394947f, +0.0586684f, -0.0034535f, +0.1081719f, +0.0483295f, -0.0508269f, -0.1924108f, -0.0425259f,
  +0.1298986f, -0.0876453f, +0.2240903f, -0.1663594f, +0.2514302f, +0.2040335f, -0.1701146f, +0.0876076f,
  -0.0932405f, -0.1285030f, -0.1891662f, -0.0743396f, +0.1019041f, +0.1101900f, -0.0495787f, -0.1835583f,
  -0.0608031f, -0.1150467f, -0.1298238f, -0.0630685f, -0.3096989f, -0.0222127f, -0.0123111f, +0.1532195f,
  +0.1096320f, -0.0267936f, +0.1152774f, -0.3863136f, -0.0442057f, +0.0535888f, -0.1428096f, -0.1013384f,
  -0.0886642f, +0.0142158f, -0.0916463f, +0.0775422f, +0.2232480f, +0.0339552f, +0.5041045f, +0.2387945f,
  -0.1074450f, +0.0038875f, +0.0420564f, +0.2516642f, +0.0354892f, -0.1843015f, +0.0972771f, -0.0516287f,
  -0.0301946f, -0.1256917f, +0.0809273f, +0.0756421f, +0.2001829f, -0.1010422f, -0.1439921f, +0.1986407f,
  +0.1332818f, -0.1132828f, -0.1245074f, +0.1568190f, -0.0038156f, +0.1071364f, +0.0410695f, +0.1640856f,
  -0.1080179f, +0.0255304f, -0.2775971f, +0.0481125f, -0.1186647f, -0.0054835f, +0.2678993f, -0.4102063f,
  -0.0007528f, +0.3308214f, -0.0620316f, -0.2859001f, -0.0140745f, +0.0042556f, -0.0404037f, -0.0501185f,
  -0.1016779f, +0.0760256f, -0.2034428f, +0.1312829f, -0.0602604f, -0.2792699f, +0.1643485f, -0.1513808f,
  -0.0351933f, +0.2215058f, +0.0969243f, +0.2304805f, -0.2084577f, +0.1255837f, +0.1469411f, +0.2308034f,
  +0.0927717f, -0.0931340f, -0.0798086f, -0.2233848f, +0.1055942f, -0.3499292f, -0.1489359f, -0.2416928f,
  +0.0491956f, -0.1198254f, -0.0896317f, +0.1724761f, -0.1448238f, -0.1763901f, +0.0697603f, -0.0972944f,
  -0.0244370f, +0.0547002f, -0.1308442f, +0.1108151f, -0.0984539f, +0.2845064f, -0.1132665f, +0.1782070f,
  +0.0930209f, +0.0488241f, -0.3091900f, -0.0750989f, +0.0764149f, +0.1236913f, -0.1467033f, -0.3459639f,
  +0.1107437f, -0.2098508f, +0.0022789f, +0.2364713f, +0.1412206f, -0.2210499f, +0.1388847f, -0.2234161f,
  -0.0599271f, +0.0236524f, +0.1441612f, +0.4369023f, -0.1966407f, +0.3060243f, +0.1146637f, +0.2297473f
);

const float biases[4] = float[4](
  -0.1045428f, -0.0939502f, +0.0440439f, -0.0563113f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer60 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1561127f, +0.0005048f, -0.0170172f, +0.0240175f, -0.1384239f, -0.0398495f, +0.1274042f, -0.0173448f,
  -0.0962141f, +0.0386861f, -0.2492400f, +0.1990981f, +0.0068606f, +0.0523292f, -0.2799842f, +0.0303699f,
  -0.1762480f, +0.2730721f, +0.0423082f, +0.0543765f, -0.1927152f, -0.0963420f, +0.0372548f, +0.0950492f,
  -0.0264896f, -0.2496057f, -0.0429497f, -0.0515183f, -0.0855340f, +0.2360990f, +0.1897240f, +0.0620616f,
  +0.0585561f, +0.0601996f, -0.1713325f, +0.1969042f, -0.2015217f, -0.0283508f, +0.0622560f, +0.2537205f,
  -0.4727621f, +0.2996724f, +0.0226895f, +0.0345002f, -0.1658328f, -0.1907652f, -0.1067128f, +0.0090204f,
  -0.3399985f, -0.0317434f, -0.1596718f, +0.1131568f, -0.1034136f, +0.1181647f, +0.1098884f, +0.1168576f,
  -0.1998777f, -0.0199028f, +0.0193465f, +0.2202393f, -0.1091337f, +0.0330433f, +0.2543494f, +0.3735061f,
  -0.0341961f, -0.0010057f, -0.1024184f, +0.0011042f, -0.1166908f, -0.0303651f, -0.1618460f, +0.1324217f,
  -0.2678068f, -0.1762622f, +0.2517082f, +0.1045336f, -0.0222743f, -0.1965939f, -0.1295128f, +0.0186464f,
  -0.4122947f, +0.2683709f, +0.2262148f, -0.1367304f, -0.0825320f, +0.0317630f, -0.1344962f, +0.0170501f,
  -0.1748596f, +0.0182024f, -0.3872037f, -0.0895885f, -0.0839576f, -0.0236961f, +0.1164759f, +0.1475599f,
  +0.1808993f, +0.0081748f, -0.1345049f, +0.0354821f, +0.0229897f, -0.0274337f, -0.0724273f, +0.0115539f,
  -0.0750718f, -0.0099554f, -0.1096181f, +0.3576583f, -0.0799252f, +0.5304964f, -0.0874103f, +0.1205589f,
  -0.1031462f, +0.3421651f, -0.0594502f, -0.0914293f, -0.0388883f, -0.1332774f, -0.0640855f, -0.0118331f,
  +0.0323116f, +0.0094309f, -0.1542931f, +0.1304356f, -0.0493419f, -0.0138525f, -0.0299926f, -0.0787183f,
  +0.2608258f, +0.1892014f, +0.1222695f, +0.2816295f, +0.0472746f, +0.0003494f, +0.0110657f, -0.2299569f,
  +0.1668550f, -0.0037842f, -0.0994070f, +0.1869229f, +0.4638403f, +0.0697902f, +0.0175057f, -0.1905218f,
  -0.1004205f, -0.5045946f, -0.1372892f, +0.1372537f, -0.2149857f, -0.1780162f, +0.0581627f, -0.3836287f,
  +0.1026063f, -0.3643482f, -0.0341848f, -0.0029701f, +0.0052156f, +0.0673676f, +0.2709215f, -0.3236506f,
  +0.1738566f, +0.0302933f, -0.1286197f, -0.0195335f, -0.2471405f, +0.1642377f, -0.0930446f, -0.2647898f,
  -0.0114677f, -0.1917303f, -0.2913386f, -0.3108493f, -0.0738722f, +0.2532717f, +0.0181250f, -0.0211890f,
  +0.1475017f, +0.0954867f, -0.0944981f, +0.0543375f, -0.3012172f, +0.2211455f, +0.1826257f, +0.0044718f,
  -0.0112428f, -0.0267690f, -0.1390054f, +0.3374472f, -0.0569528f, +0.1587960f, +0.0153051f, -0.0970441f,
  -0.1164840f, +0.0737857f, -0.1869054f, -0.2511545f, -0.0609976f, -0.3377518f, +0.0226786f, -0.0473704f,
  -0.3012481f, -0.0946914f, -0.2884476f, -0.0117741f, -0.1818347f, -0.1265070f, +0.0747228f, +0.3017721f,
  -0.0602672f, +0.1803796f, -0.0079091f, +0.0160664f, -0.0161362f, +0.0170215f, -0.2979849f, +0.2287495f,
  +0.3134169f, -0.2134527f, +0.0125220f, +0.1090776f, +0.0433321f, +0.1100314f, +0.0425715f, -0.0390683f,
  +0.2822575f, +0.0612138f, +0.3421167f, +0.0053272f, +0.3526748f, -0.0125806f, -0.0615654f, +0.0176361f,
  +0.4256401f, -0.2801969f, +0.1010249f, +0.1920577f, +0.0136806f, +0.0835904f, -0.1735331f, +0.1528421f,
  +0.0680396f, -0.1137964f, +0.0291803f, +0.1218063f, +0.1373153f, -0.0611964f, +0.1780097f, -0.0047671f,
  -0.2817413f, +0.3393486f, +0.3175161f, +0.0546609f, +0.1365248f, +0.1634874f, -0.1615075f, -0.1004749f,
  +0.0416327f, +0.0016767f, +0.2593183f, +0.1329114f, +0.0068409f, +0.2768493f, +0.1627277f, +0.0047705f,
  +0.0978339f, -0.0985943f, -0.0277195f, +0.1041759f, +0.1987161f, +0.0027194f, -0.0341662f, -0.2082997f,
  +0.0143363f, +0.2240947f, +0.1562174f, -0.2097845f, +0.3001757f, -0.3461641f, +0.0788321f, -0.1339718f,
  +0.0577784f, -0.1582396f, +0.0123935f, -0.1641313f, +0.6172031f, -0.1341380f, +0.2436950f, -0.0903165f
);

const float biases[4] = float[4](
  -0.0474903f, -0.0022260f, +0.0359303f, +0.0034674f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer60 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0414674f, +0.0263799f, -0.0055890f, -0.2072328f, -0.0867871f, -0.1180784f, +0.0645473f, +0.2002706f,
  -0.1619704f, +0.4372956f, -0.0384116f, +0.1354986f, +0.0489496f, +0.0541390f, -0.1345806f, +0.1251423f,
  +0.0875217f, -0.0153435f, -0.1667536f, +0.4545496f, -0.0101569f, -0.1624701f, +0.1278675f, +0.0614848f,
  -0.1113103f, +0.0877454f, +0.0799747f, +0.0371945f, +0.1290533f, +0.0370809f, -0.2171072f, -0.0399000f,
  +0.1977342f, +0.0439826f, +0.0804653f, +0.4832061f, -0.2777181f, +0.0585360f, -0.4048257f, +0.1139048f,
  +0.1918473f, +0.0521122f, +0.2490718f, -0.0436520f, -0.5302153f, -0.0278934f, +0.0072732f, +0.0714355f,
  -0.0152038f, +0.1572175f, +0.1569702f, +0.0375792f, +0.1213169f, -0.1129894f, -0.0008361f, +0.1134562f,
  -0.0744867f, +0.0206351f, +0.0313491f, +0.0854282f, -0.1035268f, +0.2933487f, -0.0804041f, +0.2219675f,
  +0.1031478f, +0.1717122f, +0.3222426f, -0.2235509f, +0.1927419f, +0.1491630f, -0.0109749f, +0.4835359f,
  +0.2764814f, -0.1614992f, +0.0318522f, +0.0368565f, +0.1260524f, +0.1487438f, +0.0747670f, -0.3375182f,
  -0.0882312f, -0.2311940f, +0.1077691f, -0.0340556f, +0.1300127f, +0.1149339f, -0.1030839f, +0.0962413f,
  -0.2337433f, -0.2026424f, +0.2350277f, -0.2634027f, +0.0775102f, -0.1243701f, +0.1368325f, -0.2683526f,
  +0.2966693f, +0.1336046f, -0.0918364f, -0.1805888f, +0.0758583f, +0.0963073f, +0.1828065f, -0.1121109f,
  +0.0482822f, +0.0354073f, +0.2757498f, -0.1102640f, +0.0298765f, +0.0618591f, -0.2480451f, -0.0005201f,
  -0.1588295f, -0.1154862f, -0.0273725f, -0.2026203f, +0.2650270f, -0.1209841f, -0.1627511f, -0.2460967f,
  +0.1118856f, -0.0227031f, +0.1097283f, +0.0141700f, +0.1578606f, +0.3092843f, -0.0377848f, -0.0574302f,
  +0.3438068f, +0.1308081f, +0.3794922f, +0.0633886f, +0.4971684f, +0.2981144f, -0.0944104f, +0.1560877f,
  +0.0906193f, -0.0234091f, -0.0016097f, -0.1423347f, -0.0258896f, +0.1256172f, -0.1725648f, -0.0304126f,
  -0.0364961f, +0.2340233f, +0.0727449f, -0.2677494f, -0.0208550f, +0.0704853f, -0.0280321f, +0.0083030f,
  -0.0379222f, -0.1676178f, +0.0113019f, -0.1489041f, +0.0402173f, +0.0350267f, +0.1001823f, +0.2045425f,
  +0.2004586f, -0.1844739f, -0.4206402f, +0.0434575f, +0.0064522f, -0.1166191f, -0.0681018f, +0.0861875f,
  -0.3844312f, +0.0061454f, +0.0277870f, -0.1208890f, +0.0744261f, -0.0994854f, -0.1896894f, +0.1476164f,
  -0.0083487f, -0.1131430f, +0.1377065f, -0.0673155f, +0.0413176f, -0.2205081f, -0.3872033f, +0.1091040f,
  +0.5736312f, -0.0313783f, +0.1212880f, +0.1049986f, +0.0955857f, +0.0119892f, +0.1409037f, +0.3194411f,
  +0.0192632f, +0.1748739f, +0.2870996f, -0.0042470f, +0.0767177f, -0.1005288f, +0.0724437f, -0.1578936f,
  -0.1204355f, -0.2801693f, +0.2868665f, +0.1242152f, +0.3320104f, +0.3021520f, +0.2219618f, +0.0055300f,
  +0.3305439f, -0.3382846f, +0.2663805f, -0.3736233f, -0.3996101f, -0.1799833f, +0.1015091f, +0.2210649f,
  +0.3688966f, -0.0088217f, +0.0471461f, +0.0825124f, +0.1443589f, +0.2071985f, +0.1214891f, +0.0217821f,
  -0.0738961f, +0.2489109f, +0.0096182f, +0.1322758f, +0.0777836f, +0.1659175f, -0.0277764f, -0.1808573f,
  +0.0692430f, +0.1518472f, -0.1418344f, +0.2237886f, +0.0118322f, +0.0991694f, -0.0313799f, -0.0483218f,
  +0.2585881f, +0.3538921f, +0.0629556f, +0.1939461f, +0.0919317f, +0.2522768f, +0.0433600f, +0.0283335f,
  -0.0229413f, +0.0418522f, +0.2882668f, -0.2476890f, -0.0762458f, -0.0815594f, -0.0823970f, +0.0365499f,
  -0.1291526f, +0.2275263f, +0.1543572f, -0.0548125f, -0.0836984f, -0.0245038f, -0.1250587f, -0.1569634f,
  +0.2214059f, +0.0107086f, +0.1234193f, +0.0424614f, +0.1882544f, -0.0142665f, -0.2170199f, -0.0689892f,
  +0.2163308f, +0.0282577f, +0.1828220f, -0.3000605f, +0.2341197f, +0.0656820f, -0.0494896f, +0.0414358f,
  -0.0890027f, -0.0447067f, +0.0382454f, -0.1827156f, -0.0601237f, +0.2737212f, -0.1685952f, -0.0462349f
);

const float biases[4] = float[4](
  +0.0162108f, +0.0266222f, -0.0264563f, -0.0263853f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer61 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1431155f, +0.0358394f, -0.0407556f, -0.0411868f, -0.0820731f, -0.0321424f, +0.2261386f, -0.0887786f,
  -0.2464648f, +0.1241134f, +0.1040722f, -0.0885984f, +0.1554120f, -0.1015795f, -0.0344742f, +0.0989879f,
  -0.1934015f, -0.1131418f, -0.3896616f, +0.0183773f, +0.2429726f, -0.0860167f, -0.1514957f, +0.1848576f,
  -0.0577373f, -0.0697292f, -0.1142873f, -0.2825754f, +0.0006007f, -0.0482565f, +0.1545054f, -0.0973367f,
  -0.5558077f, -0.1707376f, -0.0929578f, +0.0994892f, +0.2665572f, -0.0777403f, -0.0581503f, +0.1616050f,
  -0.1450006f, +0.3225608f, -0.2224356f, -0.0882053f, +0.0379441f, -0.0138287f, +0.0470037f, +0.0982308f,
  +0.2732780f, -0.1991609f, -0.1412015f, -0.0199739f, -0.1226346f, +0.3650862f, +0.1369274f, -0.0879957f,
  +0.1853059f, +0.1790044f, +0.0495577f, -0.1387006f, -0.0570354f, -0.1547992f, +0.2685552f, -0.1676901f,
  -0.0724389f, -0.1476598f, +0.6550902f, +0.5053627f, -0.0788679f, +0.1091097f, +0.2288754f, +0.1007605f,
  -0.1780826f, -0.0712020f, -0.0483406f, +0.1385598f, +0.0344870f, +0.2899651f, -0.0641168f, +0.2252297f,
  +0.3630231f, -0.1657272f, +0.2095653f, +0.0207400f, +0.0732474f, -0.0417881f, -0.1014734f, +0.0040444f,
  +0.0653307f, -0.3803294f, +0.1927490f, +0.4544616f, +0.3700010f, -0.2674935f, +0.2668830f, -0.1976620f,
  -0.3387369f, -0.0683851f, -0.0791912f, +0.2544747f, +0.0831434f, +0.2883436f, +0.1149744f, +0.1203830f,
  -0.1595754f, +0.3181830f, -0.1079276f, -0.1198106f, +0.3705078f, +0.2150059f, +0.0791890f, +0.1042844f,
  +0.4160424f, +0.0985775f, +0.0526681f, +0.2075802f, +0.0384390f, -0.1999839f, +0.3463845f, -0.2718937f,
  -0.0139814f, +0.4810173f, -0.0244298f, -0.1432473f, -0.0422885f, +0.0135823f, -0.0720693f, +0.1562190f,
  -0.0848617f, +0.1043297f, +0.0925746f, -0.0173639f, +0.2825105f, -0.1485998f, -0.0253393f, +0.0044551f,
  -0.0708403f, +0.0084898f, -0.1810723f, -0.1794149f, +0.0261784f, -0.2380041f, +0.2662852f, -0.2257950f,
  +0.1247495f, -0.0665672f, +0.0309363f, -0.0044418f, -0.0954624f, -0.0053206f, +0.0764057f, -0.0122461f,
  -0.0049683f, -0.1039075f, -0.1447010f, +0.2086588f, -0.0175219f, +0.2490373f, -0.0483573f, +0.2929336f,
  +0.2158737f, -0.0540764f, +0.0756391f, -0.0690601f, -0.2247205f, +0.1614396f, +0.0488982f, -0.0398650f,
  -0.1083297f, +0.0448221f, -0.0008426f, -0.1751627f, +0.0171596f, -0.0231430f, +0.0434526f, -0.1011570f,
  +0.1271155f, +0.1702486f, -0.1788384f, +0.0149176f, -0.2911810f, -0.2404744f, +0.7100782f, +0.3422178f,
  +0.0540300f, -0.0415439f, +0.1928219f, -0.0403647f, -0.0260260f, -0.1917299f, +0.2604219f, +0.1039863f,
  -0.0079600f, -0.0499431f, -0.0945219f, -0.1283322f, +0.2851371f, +0.0436353f, +0.0642312f, -0.0033323f,
  -0.1306242f, -0.0345546f, +0.0257916f, +0.1839702f, +0.3580533f, +0.3178337f, -0.6664155f, -0.6131830f,
  -0.2845506f, +0.0111394f, -0.0566216f, +0.1031453f, +0.1201880f, -0.0488152f, -0.1943106f, -0.0834590f,
  -0.1812142f, +0.1333052f, +0.1442467f, -0.2329122f, +0.2283014f, -0.1913088f, -0.2373249f, -0.1094459f,
  +0.0420949f, +0.1423156f, +0.0919077f, +0.2395440f, +0.2427918f, +0.0210426f, -0.2096232f, -0.3236845f,
  +0.0218930f, +0.0481164f, -0.2612908f, -0.0549677f, -0.1516895f, +0.3953947f, -0.0444237f, -0.0820499f,
  +0.1822328f, -0.0685826f, +0.2998979f, -0.1279315f, -0.1421244f, +0.0796235f, +0.2083982f, +0.1235297f,
  -0.0965258f, +0.1989256f, +0.0283702f, -0.3199920f, -0.2459806f, -0.5651164f, +0.3960437f, +0.2983195f,
  +0.1266073f, +0.0633814f, -0.1965471f, -0.2737042f, -0.0950154f, -0.3385016f, -0.1227293f, +0.2741611f,
  +0.1393144f, -0.0891323f, +0.3346098f, +0.0581655f, -0.0501581f, -0.1356253f, -0.0602367f, +0.0143580f,
  +0.1906674f, -0.2260990f, +0.1379595f, +0.1480931f, -0.0576950f, -0.1352349f, -0.4737753f, -0.0771461f,
  +0.1812182f, -0.0540010f, -0.0496329f, +0.0861804f, +0.1359390f, +0.0395534f, -0.0579888f, -0.1285214f
);

const float biases[4] = float[4](
  +0.0519912f, +0.0362010f, +0.0534745f, -0.0580402f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer61 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1640442f, -0.1385141f, -0.1328389f, -0.2537557f, +0.0389199f, +0.0533045f, -0.0809960f, -0.2019376f,
  +0.1081616f, +0.3607099f, +0.0749424f, +0.0976164f, -0.0929840f, +0.4129014f, -0.0452070f, +0.0135885f,
  -0.0609559f, +0.0124584f, -0.0095525f, -0.2106077f, -0.1208468f, +0.1406526f, -0.0309042f, -0.0665152f,
  -0.0853990f, +0.0167692f, +0.3706490f, -0.1803572f, +0.2670397f, -0.1724463f, -0.0153556f, -0.2903321f,
  -0.2268821f, +0.3446261f, +0.5038355f, -0.1834064f, -0.3210678f, +0.1586491f, -0.0151834f, +0.4607950f,
  +0.0822290f, -0.0747665f, -0.0268835f, +0.1516848f, +0.0000854f, +0.0316391f, -0.0467073f, +0.0222419f,
  +0.0896272f, -0.0270717f, +0.1659039f, +0.1434696f, +0.0440472f, -0.4925519f, -0.1887871f, -0.1435314f,
  +0.2483124f, -0.0894229f, +0.1598619f, -0.0938705f, -0.0669638f, -0.1560332f, -0.1796462f, +0.0965479f,
  -0.0145872f, -0.0263134f, -0.0374280f, +0.0148556f, -0.0914382f, +0.0394073f, -0.0455516f, +0.0070030f,
  +0.0526313f, -0.1413191f, -0.1491075f, +0.4624994f, -0.4141191f, +0.0975204f, +0.0879316f, -0.0798228f,
  +0.1677720f, +0.1113078f, -0.1437749f, +0.1809920f, +0.0395530f, -0.0356098f, +0.0170993f, +0.0223176f,
  -0.4057408f, -0.0563864f, -0.0397760f, +0.0493587f, +0.0395679f, +0.4209345f, +0.1686435f, +0.4859329f,
  +0.0079544f, +0.2020617f, +0.1269844f, -0.0263172f, -0.2980380f, -0.2848216f, +0.1503309f, -0.1877796f,
  +0.2284626f, +0.3217285f, -0.1932769f, -0.2674411f, -0.0518383f, +0.0265035f, +0.0747862f, -0.1271973f,
  -0.2148148f, +0.1453928f, +0.1154288f, +0.2888637f, +0.2146304f, -0.0502689f, -0.0449422f, -0.1303752f,
  +0.1442476f, +0.1357031f, +0.0256429f, -0.0004965f, -0.2914541f, -0.0890046f, -0.1441319f, +0.0094174f,
  +0.1083418f, +0.0878801f, +0.0071454f, -0.3753915f, -0.1921534f, -0.0976066f, -0.1577631f, -0.2461430f,
  -0.0687273f, -0.0560816f, -0.0150374f, -0.2707364f, +0.0090596f, -0.3430544f, -0.2809637f, -0.2170794f,
  +0.1003131f, -0.0277857f, +0.0614691f, -0.1260714f, -0.0408794f, +0.0043322f, +0.0742391f, -0.3831543f,
  -0.0430207f, +0.3998515f, -0.1732552f, +0.3521306f, +0.2191654f, -0.4085266f, -0.1906697f, -0.0327493f,
  +0.2081900f, -0.0827953f, -0.2832594f, -0.2161414f, +0.0703849f, +0.0865683f, +0.0511874f, -0.0363845f,
  +0.0175101f, -0.0803348f, -0.0938930f, +0.3094623f, -0.0074676f, -0.2672140f, +0.0972164f, -0.1886221f,
  +0.2006102f, +0.0454415f, -0.0037389f, -0.1359207f, -0.0607533f, -0.1188463f, -0.0101690f, -0.0425132f,
  +0.1507401f, +0.0125307f, +0.1196361f, -0.3540645f, -0.0893808f, +0.0807439f, +0.0519363f, +0.1562923f,
  -0.1940362f, -0.0413314f, +0.0990033f, +0.0706871f, -0.0520892f, +0.1294963f, +0.1105420f, -0.0249293f,
  +0.4026854f, +0.1320728f, -0.0503904f, -0.0041729f, +0.0300349f, -0.1184463f, -0.1978186f, +0.1684991f,
  +0.2362985f, +0.0928606f, -0.0912207f, -0.1897527f, +0.1268705f, -0.2212358f, +0.0185020f, +0.1746792f,
  +0.3116433f, -0.1762920f, +0.0313688f, -0.0481444f, -0.4585663f, +0.0446486f, +0.1706715f, +0.0350303f,
  -0.3077670f, -0.0622578f, +0.0402085f, +0.1046799f, -0.0513048f, -0.2243839f, -0.2449880f, -0.0144062f,
  +0.1582424f, +0.4576266f, -0.1286112f, +0.1763199f, -0.1614738f, -0.1182018f, +0.0785404f, -0.0895638f,
  -0.2433251f, -0.2309162f, -0.0193790f, -0.0928550f, -0.0800188f, +0.1517214f, +0.0502369f, +0.0031679f,
  -0.3143603f, +0.2659009f, -0.1713860f, -0.4379785f, -0.2076401f, -0.4326639f, +0.0975130f, +0.0653560f,
  -0.3252374f, +0.2401496f, -0.2009860f, +0.2480178f, +0.1580546f, +0.1820847f, +0.1071742f, -0.1312754f,
  -0.0661669f, +0.0299459f, +0.0875892f, -0.0532385f, +0.0439061f, -0.0393781f, +0.0924025f, +0.0068130f,
  -0.3039495f, -0.2399880f, +0.0324273f, -0.0702016f, +0.0960750f, -0.1592884f, +0.1639048f, -0.1898469f,
  -0.3129975f, +0.1553570f, -0.0467830f, +0.1643354f, -0.0141695f, -0.0708641f, +0.1413416f, +0.1646668f
);

const float biases[4] = float[4](
  -0.1759165f, -0.1235651f, -0.1056409f, +0.0473412f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer62 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0674694f, -0.0140980f, -0.1430265f, -0.0960772f, -0.0770817f, +0.1658964f, -0.1091421f, +0.1743843f,
  +0.2849886f, -0.1515356f, -0.5012985f, +0.2506709f, -0.3226984f, +0.1802237f, -0.0959225f, -0.0017972f,
  +0.3064247f, -0.1937567f, -0.3783755f, +0.0075848f, -0.1299927f, +0.2354875f, -0.2544536f, +0.0565276f,
  +0.1917666f, -0.0873375f, +0.2362690f, -0.1130453f, +0.2243522f, -0.0404828f, -0.2626547f, +0.0324738f,
  +0.1390329f, -0.1502611f, +0.1917875f, -0.2333450f, +0.1251900f, -0.0727807f, -0.1533281f, +0.0790348f,
  +0.2591845f, -0.1182660f, +0.2464088f, +0.2515680f, +0.0242873f, -0.0061303f, -0.2865328f, +0.1316775f,
  +0.1772392f, +0.0615970f, -0.0226238f, +0.3966748f, -0.1522142f, -0.0004646f, -0.0728652f, -0.1637633f,
  +0.1545361f, +0.0274436f, +0.2504271f, +0.2095220f, -0.0035182f, -0.0616876f, -0.1148557f, +0.0803408f,
  +0.0194086f, -0.0848526f, -0.0679200f, -0.0627925f, -0.1977291f, +0.0139697f, -0.3158109f, -0.2540761f,
  -0.0388136f, -0.3729767f, -0.1936054f, +0.1183193f, +0.0378608f, -0.2100815f, -0.1458496f, +0.2428878f,
  +0.0317650f, -0.0102276f, +0.0096567f, -0.3118364f, -0.2174218f, -0.4343310f, +0.1247990f, +0.2912763f,
  -0.1333214f, -0.2427651f, -0.1113014f, +0.0439271f, +0.0094524f, -0.2002283f, +0.1085657f, +0.2658218f,
  -0.1536487f, -0.3373864f, +0.1497458f, +0.1222258f, +0.0074343f, -0.0108018f, -0.2710342f, -0.1443212f,
  +0.2989022f, -0.3459210f, -0.2194817f, +0.2633518f, -0.2981032f, -0.1056174f, +0.0172519f, -0.1381225f,
  -0.1502998f, +0.0595785f, -0.2306568f, +0.0184796f, -0.5038263f, -0.1912032f, +0.3113347f, +0.0247065f,
  +0.0702587f, -0.0021807f, +0.0594154f, -0.0373391f, +0.1327696f, +0.1571758f, -0.1470087f, -0.3429234f,
  -0.0167104f, -0.1424090f, -0.1323093f, +0.1073135f, +0.0250060f, -0.2090434f, +0.2012195f, +0.1380131f,
  -0.0755173f, +0.0235519f, -0.0866340f, +0.3250230f, -0.0856383f, +0.2286250f, +0.2974116f, -0.0011596f,
  -0.3755490f, +0.0565846f, -0.0418062f, -0.0655844f, -0.0024454f, +0.2977652f, +0.0771695f, +0.2433337f,
  -0.3179046f, -0.0614022f, +0.0104446f, -0.0860800f, +0.0279922f, -0.2383324f, +0.2344862f, +0.1536780f,
  -0.2210344f, -0.1136550f, +0.2066257f, -0.0972395f, -0.1307771f, -0.2520584f, +0.0498076f, -0.1665077f,
  -0.0774869f, +0.1863011f, +0.0466551f, +0.4394960f, +0.0449962f, -0.1616428f, +0.0710270f, +0.0737933f,
  -0.0410995f, -0.0083015f, +0.0702452f, +0.2159808f, -0.5279158f, +0.0276380f, +0.1507431f, +0.3370835f,
  +0.0065040f, -0.4777123f, +0.0230337f, +0.1425379f, -0.2390270f, -0.0474704f, -0.0512298f, -0.1239758f,
  +0.1791461f, -0.1163562f, -0.1007039f, +0.4763811f, -0.1533570f, +0.3120558f, +0.1198445f, +0.0558745f,
  -0.2250899f, +0.0483958f, +0.1710595f, -0.0628778f, -0.0267204f, +0.2168087f, -0.1283045f, -0.0159169f,
  +0.0402313f, -0.0571317f, +0.0984766f, +0.2832471f, +0.0557499f, +0.0082243f, -0.1339731f, -0.1339659f,
  -0.3921350f, +0.0679464f, -0.1405839f, -0.2745104f, +0.0399461f, +0.4134923f, -0.1549787f, -0.1589890f,
  -0.1648640f, -0.1029342f, -0.1763864f, +0.2941790f, +0.1443900f, +0.5095341f, -0.0262580f, +0.1783889f,
  -0.2425760f, +0.2172541f, -0.0388213f, -0.2089253f, +0.2502986f, +0.1631485f, -0.0419478f, +0.0359691f,
  +0.1693094f, -0.2025242f, +0.0578065f, -0.0075678f, +0.0197065f, -0.0978002f, +0.0077340f, +0.0538254f,
  +0.0490922f, +0.0782087f, -0.1589342f, +0.0116983f, +0.2373589f, +0.3022440f, +0.2927371f, +0.1218957f,
  -0.0381852f, +0.0094887f, +0.3755169f, -0.1203938f, +0.4300244f, -0.0082589f, +0.0283913f, +0.1228589f,
  -0.0317593f, +0.0064479f, -0.0241287f, -0.2686656f, +0.3430336f, +0.0668136f, -0.1309854f, -0.3539225f,
  -0.1546482f, +0.1760737f, -0.2108143f, +0.0373249f, +0.0064007f, +0.0314446f, -0.0055725f, -0.0752054f,
  +0.0372291f, -0.0196596f, -0.0309832f, -0.0644943f, +0.3616421f, -0.2147509f, +0.2586023f, +0.2373360f
);

const float biases[4] = float[4](
  -0.0837666f, -0.0259110f, -0.0100023f, +0.0434113f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer62 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0965714f, +0.0175428f, +0.2180317f, +0.0020978f, +0.0594631f, +0.0843026f, -0.0947123f, +0.1437484f,
  -0.2044597f, -0.1706665f, -0.1446176f, +0.0719796f, +0.0105114f, +0.1369649f, +0.1278458f, +0.1070193f,
  -0.0974694f, -0.0634671f, +0.0318958f, -0.1640335f, -0.1422332f, +0.2474709f, -0.0727975f, +0.1014102f,
  -0.0702245f, -0.0627026f, +0.0786481f, -0.0536956f, +0.0982728f, -0.0652473f, +0.0770018f, -0.3159218f,
  +0.0092242f, -0.4202941f, +0.3767563f, +0.1668536f, +0.1233710f, +0.2594655f, -0.3392876f, +0.0505955f,
  -0.0958401f, -0.1969998f, +0.2802908f, +0.0635141f, -0.5066898f, +0.2394100f, +0.0136948f, +0.1563891f,
  +0.0273388f, +0.1725772f, +0.2289178f, +0.2354055f, -0.1800185f, -0.3474339f, -0.0340693f, +0.0692186f,
  -0.0042115f, -0.0293500f, +0.0058759f, -0.0845450f, +0.0336361f, -0.2836443f, -0.0194954f, -0.0250629f,
  -0.0157969f, -0.0808100f, +0.0537344f, -0.0481131f, -0.2940198f, +0.2433472f, +0.0397796f, +0.2193902f,
  -0.2736431f, +0.2562679f, +0.1301776f, -0.0955721f, -0.0976066f, +0.1325687f, +0.0490962f, -0.0681368f,
  -0.1713203f, +0.2402104f, -0.3115184f, +0.0689428f, +0.2578392f, +0.1576009f, -0.0544120f, +0.0623778f,
  +0.1566423f, +0.0255583f, +0.0605402f, -0.1602389f, +0.0595280f, -0.0535654f, -0.3134830f, -0.0561218f,
  -0.0089167f, +0.3058313f, -0.0600435f, -0.0144197f, +0.1571440f, -0.0104475f, -0.1409300f, -0.2021657f,
  +0.0557492f, +0.0823533f, +0.0501073f, +0.0760037f, +0.3315404f, +0.1244512f, +0.1296094f, +0.3308622f,
  +0.1143137f, +0.0976070f, -0.0141531f, -0.0799902f, +0.0547970f, +0.2158948f, +0.0555673f, -0.0258077f,
  -0.0396040f, +0.1094204f, +0.0223873f, -0.1740057f, -0.0144831f, -0.0819658f, -0.0598461f, +0.1619558f,
  -0.0908675f, +0.2693225f, +0.1145213f, +0.0525953f, -0.0166794f, +0.2112384f, +0.2723075f, +0.0586130f,
  +0.1321152f, +0.1755256f, +0.0665794f, +0.2619219f, +0.0373233f, +0.1881659f, -0.2275499f, -0.0965976f,
  -0.0695789f, +0.3613877f, +0.3124486f, -0.0074761f, -0.0292805f, -0.0212823f, +0.0155040f, -0.0945717f,
  +0.2409438f, +0.0302505f, +0.5164543f, +0.1520103f, +0.3377592f, +0.0787137f, +0.1515577f, -0.1935551f,
  +0.0681989f, +0.1766948f, -0.1428196f, -0.2775719f, +0.0670492f, +0.1045615f, +0.0714753f, -0.1540897f,
  +0.1801917f, +0.0284639f, -0.1298519f, +0.0061118f, +0.2946789f, -0.2504618f, +0.2446724f, -0.1110535f,
  +0.1611280f, -0.0399867f, -0.2839437f, +0.2691979f, +0.0931383f, +0.0532898f, +0.1033231f, -0.0614708f,
  -0.0054033f, +0.0310103f, +0.2560379f, +0.1153891f, -0.1768664f, +0.2090403f, -0.1066892f, -0.0206390f,
  +0.1353011f, +0.1476114f, +0.1821129f, +0.0158472f, +0.1877820f, -0.1927377f, +0.0505755f, -0.1079668f,
  -0.0760111f, -0.0133383f, +0.2365316f, -0.4612950f, +0.2091829f, +0.0151325f, +0.3714625f, +0.3349694f,
  +0.0295678f, -0.0620473f, +0.0235490f, -0.3375760f, -0.0243538f, +0.0572552f, -0.1676994f, -0.1333294f,
  -0.1062370f, +0.2290623f, +0.0002997f, -0.1355402f, -0.2526517f, +0.3578912f, +0.2043647f, -0.2742323f,
  -0.1059309f, -0.1458389f, +0.5780503f, -0.0112061f, -0.3156019f, +0.2209721f, -0.1003075f, +0.0451155f,
  +0.0151285f, -0.1036456f, +0.0052892f, +0.0883824f, -0.2137140f, +0.2506841f, -0.2496541f, -0.0914539f,
  +0.0890421f, +0.0403058f, -0.0887369f, -0.0067356f, -0.0888131f, +0.2067153f, +0.1299554f, -0.0375743f,
  -0.4741240f, -0.0826235f, -0.1411731f, +0.1073932f, -0.0809093f, +0.2987568f, -0.3715752f, +0.1039263f,
  +0.0798226f, +0.0499988f, +0.1342996f, -0.0534955f, +0.0129016f, +0.2722915f, +0.0106046f, +0.0668760f,
  -0.2328080f, +0.0525231f, +0.0812939f, -0.3508529f, -0.2717955f, -0.2849497f, +0.0387605f, +0.0055891f,
  -0.0651510f, +0.2108850f, -0.2128834f, -0.0687165f, -0.0553941f, +0.0539591f, -0.0827617f, +0.2081076f,
  +0.2532957f, +0.1726700f, +0.0733080f, +0.2167588f, -0.1203979f, +0.2451405f, -0.1706277f, +0.0588686f
);

const float biases[4] = float[4](
  +0.0119616f, +0.0358461f, -0.0594913f, -0.0626392f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer63 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0872708f, -0.3715121f, -0.2376707f, +0.7789941f, -0.1752626f, +0.1084921f, -0.5231333f, +0.0743380f,
  +0.0104279f, +0.2059702f, +0.2236563f, +0.5444623f, -0.2582218f, +0.5697983f, +0.3165364f, +0.3458590f,
  -0.2241398f, -0.0316685f, -0.1159942f, -0.1108973f, +0.0136777f, +0.2420466f, +0.3167763f, -0.0863077f,
  +0.1860497f, -0.1145291f, +0.1427167f, +0.2513150f, -0.2548989f, -0.2448170f, -0.3126707f, -0.0096911f,
  +0.0478012f, +0.3402873f, +0.0822881f, -0.0722962f, +0.4720367f, -0.1891934f, -0.0064403f, +0.0580641f,
  +0.3477810f, +0.4236335f, -0.5416323f, -0.1392174f, -0.2258689f, -0.3143370f, -0.0000527f, +0.0207364f,
  +0.0698191f, +0.1380162f, +0.1430017f, +0.2053885f, -0.2799919f, -0.3677247f, -0.3693675f, -0.2001883f,
  -0.1156592f, -0.1121047f, +0.3424398f, +0.2202095f, -0.1624654f, -0.0403168f, -0.3097288f, -0.1322798f,
  -0.3107377f, +0.2147564f, +0.2593708f, +0.0925438f, -0.1368833f, -0.2915801f, +0.2232822f, -0.0817572f,
  -0.1554389f, +0.1163309f, -0.1107943f, -0.0918996f, +0.1000308f, -0.1014113f, -0.0931386f, -0.0573948f,
  -0.1287735f, -0.0462142f, +0.0905095f, -0.3468863f, +0.0978611f, +0.0534895f, +0.1670684f, -0.0953264f,
  +0.1198965f, +0.1529084f, +0.0723026f, +0.1022990f, +0.1268484f, +0.2526408f, +0.2333963f, +0.0024329f,
  -0.1253952f, -0.0828394f, +0.1731171f, +0.1346489f, +0.1670767f, -0.1114606f, +0.1258431f, +0.0453698f,
  -0.1530831f, -0.5194681f, +0.0034516f, +0.3299969f, +0.4403391f, +0.3655873f, -0.5855809f, -0.3067852f,
  +0.6534365f, +0.4764314f, +0.0619017f, -0.7182438f, -0.0948691f, +0.0381066f, +0.4623450f, +0.2228652f,
  -0.0037123f, +0.2672971f, +0.0923612f, -0.0066359f, +0.0251300f, -0.0171661f, +0.0848336f, -0.0229307f,
  +0.0960162f, -0.2207400f, +0.1231913f, +0.4766324f, -0.2643525f, -0.0886877f, -0.1079606f, -0.0405203f,
  +0.2563872f, +0.3403167f, -0.0860731f, -0.3135326f, +0.2304747f, +0.0401482f, -0.1282767f, -0.0076758f,
  +0.3192453f, +0.0407798f, +0.4801631f, -0.1204208f, -0.1686267f, +0.3907578f, -0.0256449f, +0.0185109f,
  +0.2145718f, -0.0793024f, +0.2491215f, -0.1908897f, -0.1901080f, +0.3031358f, +0.0334721f, -0.1257890f,
  +0.3377954f, +0.0238644f, +0.0249552f, -0.1585711f, -0.0695897f, +0.1888568f, -0.4111130f, -0.2793694f,
  -0.2327846f, +0.2850860f, +0.1167243f, +0.2369881f, +0.5645755f, -0.3656826f, -0.3094245f, +0.0282161f,
  +0.2405785f, +0.1602275f, -0.0772204f, +0.0329530f, +0.4287871f, -0.3127930f, -0.3284116f, +0.1668738f,
  +0.2569022f, -0.1482385f, +0.0785885f, +0.0571668f, +0.2038233f, -0.3436562f, +0.3478387f, +0.2784254f,
  -0.0215973f, -0.0667569f, -0.0496548f, -0.3496636f, -0.1138174f, -0.1850672f, +0.1669187f, +0.0109170f,
  +0.0841218f, -0.1729391f, +0.0200832f, +0.2533093f, -0.1686470f, +0.0948234f, +0.1880086f, -0.2106619f,
  -0.1000449f, +0.0887192f, +0.0454745f, +0.1306876f, -0.1032386f, -0.1112692f, -0.2023741f, -0.1548324f,
  -0.1032128f, -0.2847013f, -0.1413711f, +0.0888672f, -0.1368239f, -0.1971836f, +0.0521244f, +0.0406523f,
  +0.4174612f, -0.1804316f, -0.1917908f, -0.1941039f, -0.3686520f, -0.3158945f, +0.1336381f, +0.3022470f,
  -0.4187320f, -0.1603004f, +0.1072295f, +0.0869344f, -0.4492509f, -0.2712587f, +0.1082727f, +0.3771318f,
  -0.1994467f, -0.0070604f, -0.2205289f, +0.1016045f, +0.0540651f, +0.0962100f, -0.0583176f, +0.0922424f,
  +0.0571115f, +0.3786900f, -0.0292858f, -0.1102127f, +0.1313733f, -0.1208401f, -0.2444059f, -0.1241411f,
  -0.0971883f, -0.1166167f, +0.1212212f, -0.0640268f, +0.0916822f, -0.2166957f, +0.1526206f, -0.0482738f,
  -0.1642251f, +0.2018853f, -0.1219059f, -0.1979134f, +0.2559110f, +0.0163500f, -0.0052994f, +0.2020652f,
  -0.0372674f, +0.0574143f, +0.1075575f, +0.0732711f, +0.1331714f, -0.2106344f, +0.0397470f, -0.2675477f,
  +0.0622585f, +0.0102234f, +0.1589388f, +0.1795984f, +0.0983454f, -0.2042838f, +0.0985081f, -0.1472042f
);

const float biases[4] = float[4](
  -0.1785058f, -0.0465518f, -0.0459496f, -0.0225786f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer63 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1408769f, -0.2328758f, +0.0306561f, -0.1733121f, +0.1174451f, +0.0445757f, +0.1344142f, +0.0412332f,
  +0.0360418f, -0.2371729f, -0.0901306f, -0.0748975f, +0.0902782f, -0.1683315f, +0.3786347f, -0.0897603f,
  -0.2240169f, -0.3036804f, +0.1869745f, -0.2468642f, +0.1975914f, +0.2158167f, +0.0258931f, +0.0912607f,
  +0.1402157f, +0.0252413f, +0.4415861f, -0.0449451f, -0.0163209f, -0.0741299f, +0.0220348f, -0.1429289f,
  -0.0855863f, +0.1132722f, -0.0224618f, +0.1778192f, -0.0420335f, +0.2204984f, -0.1912419f, -0.1277172f,
  -0.1650518f, +0.1388374f, -0.0357086f, -0.1496798f, -0.0064489f, +0.1001233f, +0.0474220f, -0.1143941f,
  +0.2769355f, +0.1291986f, -0.0391121f, -0.3294367f, -0.4982808f, +0.1081400f, -0.0976974f, -0.0337560f,
  +0.0266474f, +0.1133364f, -0.1735617f, +0.0586971f, +0.1408848f, -0.2572994f, -0.1517101f, -0.2880282f,
  -0.2235399f, +0.3282269f, -0.1700433f, -0.0964012f, -0.1212532f, -0.0046604f, +0.0531090f, +0.2014443f,
  +0.1911146f, -0.0700046f, +0.2346142f, -0.2267828f, -0.1238071f, +0.2754816f, -0.0778692f, -0.1013637f,
  +0.1560797f, +0.2055888f, -0.1684551f, +0.3052320f, -0.1176514f, +0.3012888f, -0.1953720f, +0.0325290f,
  +0.2817120f, +0.2864820f, -0.1089040f, +0.1909821f, -0.1642055f, +0.2796602f, -0.1129378f, -0.2066571f,
  -0.1799705f, +0.0670353f, +0.2583548f, +0.1106437f, +0.3100536f, -0.2197276f, -0.1565783f, +0.0093969f,
  +0.3094399f, +0.0545706f, +0.4097981f, -0.2926158f, +0.1209775f, -0.4194602f, +0.3936520f, +0.5047562f,
  +0.3039730f, -0.1554308f, +0.2877297f, +0.2135468f, -0.0437255f, -0.3045404f, +0.2203692f, -0.0147863f,
  +0.1914593f, -0.1655690f, -0.4462874f, +0.0698277f, +0.2025880f, +0.1278033f, +0.0545063f, +0.0877230f,
  +0.0561569f, -0.2670866f, -0.3128937f, +0.0327147f, +0.1373823f, +0.4067681f, -0.3224381f, -0.3081871f,
  -0.0686366f, -0.1868894f, -0.0157629f, -0.2725638f, +0.1126947f, -0.0201725f, -0.1364307f, -0.0435307f,
  +0.0034570f, +0.3164661f, -0.0638317f, -0.1266843f, +0.1481448f, -0.0044060f, +0.0135045f, -0.0122767f,
  -0.0642173f, +0.3122636f, -0.0934158f, -0.0854798f, -0.1120866f, +0.3978099f, -0.0945380f, -0.1434309f,
  -0.0836303f, +0.2694048f, +0.1575305f, +0.0757441f, -0.1122812f, +0.2270606f, -0.3209782f, +0.0617399f,
  -0.2000234f, -0.1161588f, +0.1871329f, -0.0570279f, -0.0147482f, -0.2523053f, -0.0486183f, -0.3173622f,
  +0.2818391f, +0.1430245f, -0.0274675f, -0.1907482f, +0.0581426f, +0.0094538f, +0.1653284f, +0.0146362f,
  -0.1329467f, +0.0573542f, +0.3623609f, -0.0923862f, -0.1509057f, +0.1149016f, -0.1686204f, -0.1013540f,
  -0.0587609f, -0.1485986f, +0.1469005f, +0.1320227f, -0.0124421f, -0.4245263f, -0.0604067f, -0.1601764f,
  +0.1199464f, +0.3701325f, +0.2443445f, -0.2566730f, +0.0730494f, -0.1186368f, -0.1232647f, +0.0517252f,
  +0.0289371f, -0.2643793f, +0.3864054f, -0.2198159f, -0.2901348f, -0.2025280f, -0.2230447f, +0.3326737f,
  -0.0012981f, +0.2126052f, -0.0091030f, -0.2532314f, -0.1174783f, -0.2989365f, +0.1811452f, -0.0868805f,
  -0.2979978f, +0.5043769f, -0.3120915f, +0.4068522f, -0.2504609f, -0.0922687f, -0.1095681f, -0.0540230f,
  +0.0310580f, -0.1010703f, +0.0595844f, +0.4026394f, +0.0855057f, -0.0125082f, -0.1630438f, +0.0236936f,
  +0.0814855f, +0.0779150f, -0.3780100f, +0.3935035f, -0.1264108f, +0.0643242f, -0.1452306f, -0.2794813f,
  +0.0657666f, +0.4876696f, +0.1783670f, +0.5215231f, +0.2528650f, -0.2813800f, +0.2248241f, +0.0724546f,
  +0.2200630f, +0.1985486f, +0.0065910f, +0.1619001f, -0.3819225f, +0.0059677f, +0.0455306f, +0.0046950f,
  -0.0766777f, -0.2860125f, -0.0184672f, -0.1386939f, +0.0739440f, +0.2052406f, +0.2165697f, -0.1777457f,
  -0.0505921f, +0.3244705f, +0.0083979f, +0.0147885f, +0.1207632f, -0.1715280f, +0.0192833f, -0.1401207f,
  +0.2106135f, -0.1731229f, +0.1940157f, +0.2332685f, +0.0624215f, +0.0518247f, -0.0701897f, +0.0735253f
);

const float biases[4] = float[4](
  +0.0675306f, -0.0765397f, +0.0107178f, +0.0407334f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer64 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.4605137f, +0.1316707f, +0.0143427f, +0.0569140f, -0.1572150f, +0.0743076f, -0.1453608f, -0.1631206f,
  +0.2997059f, -0.2412912f, -0.2272380f, +0.0968454f, -0.2415600f, +0.3541866f, +0.2378444f, -0.0150193f,
  -0.1834878f, +0.0884177f, -0.0768489f, -0.0154536f, -0.4620386f, +0.2094884f, -0.2035284f, +0.4008370f,
  -0.2013612f, -0.0054786f, -0.2338049f, +0.0815996f, -0.0360393f, -0.3670270f, -0.1054323f, +0.1424349f,
  -0.0151522f, -0.4694074f, -0.2105392f, -0.0275941f, +0.1231318f, -0.3536401f, +0.1834762f, +0.1271147f,
  -0.4228541f, +0.0833783f, -0.1465595f, +0.2833763f, +0.0465110f, -0.1469940f, -0.0028870f, +0.2249089f,
  +0.0762997f, -0.1522502f, +0.1626986f, +0.3100690f, -0.0355130f, +0.0554291f, +0.2269272f, -0.0702052f,
  +0.1902972f, -0.0936607f, +0.0637092f, -0.3557593f, +0.1112330f, -0.0859955f, +0.0437607f, +0.3199094f,
  -0.0225505f, -0.1109372f, +0.2224637f, +0.1940985f, +0.0284609f, -0.0940075f, +0.2147452f, +0.1848644f,
  -0.5315910f, +0.3831241f, -0.1172907f, +0.0060064f, +0.0223525f, -0.2301235f, +0.0247977f, +0.0933940f,
  -0.3724252f, -0.4660212f, -0.3174128f, -0.0458347f, -0.0025898f, -0.1272462f, +0.6356951f, -0.1471987f,
  -0.0172003f, +0.1142336f, +0.2681887f, -0.0685590f, -0.3524330f, -0.4790713f, +0.0967182f, +0.1723381f,
  -0.3734881f, +0.3142968f, +0.1608202f, +0.2436640f, +0.0088628f, +0.1356082f, -0.0925603f, +0.0687545f,
  -0.1594430f, -0.4181781f, +0.8437113f, -0.3387524f, -0.0536899f, +0.3180012f, +0.2972742f, -0.1363393f,
  +0.3187207f, +0.2069787f, -0.1991818f, +0.3024175f, -0.1247559f, +0.3992469f, +0.2441170f, +0.0046849f,
  -0.2624854f, +0.3237780f, +0.0884326f, +0.2816973f, +0.1144971f, +0.0086843f, +0.1109348f, +0.3191314f,
  +0.0987028f, -0.0477055f, -0.3014336f, +0.2152042f, -0.1151779f, +0.1218659f, +0.0677043f, -0.0223492f,
  +0.1944810f, +0.0015540f, -0.2381160f, +0.1304706f, +0.0076970f, +0.2185379f, +0.0764248f, -0.3447429f,
  +0.0006734f, -0.2817761f, +0.2518452f, -0.1898558f, +0.4166248f, -0.1644649f, +0.2525898f, +0.0886735f,
  -0.3366100f, +0.1520041f, -0.0274160f, -0.0803467f, +0.0295235f, -0.2729006f, +0.0140658f, +0.0660971f,
  +0.0032655f, -0.1863969f, +0.2267508f, +0.0267758f, -0.1189048f, -0.1880043f, +0.4404382f, -0.1852031f,
  +0.3977265f, +0.4574081f, +0.3838855f, -0.3001899f, +0.1881685f, -0.0151091f, +0.1931699f, +0.1129967f,
  +0.2233592f, +0.1269038f, +0.3135723f, -0.4722057f, -0.1101712f, +0.1561712f, +0.0776866f, -0.1002898f,
  +0.1299466f, -0.1423575f, -0.1318046f, -0.1744822f, -0.3274651f, -0.0628325f, +0.1585120f, -0.2723656f,
  +0.2852718f, -0.1411292f, -0.0828785f, +0.0608587f, +0.0589035f, +0.0981239f, -0.0061345f, +0.0603215f,
  -0.3737749f, +0.2352973f, +0.0385922f, +0.1044652f, +0.1235555f, -0.1032447f, +0.2977077f, +0.1578183f,
  +0.2575321f, +0.1700073f, +0.0499151f, -0.0806130f, -0.1353323f, +0.1996401f, +0.0747124f, +0.0962617f,
  +0.0260784f, -0.0948549f, -0.1252447f, +0.0089350f, -0.3169431f, +0.1563143f, +0.1209776f, +0.0804488f,
  -0.0567188f, +0.1353012f, -0.3561528f, +0.0339754f, -0.1229279f, +0.0946848f, -0.1180387f, +0.1165992f,
  -0.0534690f, -0.1944822f, +0.1562440f, +0.1900703f, +0.1383047f, +0.0495536f, +0.2313882f, +0.0141078f,
  +0.2552159f, +0.5261053f, -0.2696996f, -0.0571441f, +0.1033581f, -0.3414593f, -0.4352187f, +0.0748391f,
  -0.0343867f, +0.3132089f, +0.0486288f, -0.0240797f, -0.0861352f, -0.1631819f, -0.2809005f, -0.3551200f,
  +0.0215276f, -0.0327927f, +0.2330199f, -0.1106481f, -0.0662020f, -0.5231961f, +0.0092256f, -0.0270014f,
  -0.0287562f, +0.2577473f, -0.0135171f, +0.1854572f, -0.0623173f, -0.0705233f, +0.1430912f, +0.0834196f,
  -0.3119813f, -0.1324600f, -0.5444422f, +0.2461349f, -0.0551508f, +0.2331521f, +0.2499615f, -0.2241461f,
  -0.1400136f, +0.0789811f, -0.2651471f, -0.1332800f, -0.1159685f, +0.0948718f, -0.1858984f, +0.0330470f
);

const float biases[4] = float[4](
  +0.0034669f, -0.0025898f, -0.0557159f, +0.0512516f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer64 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3292269f, +0.1602883f, +0.1966668f, -0.1453378f, +0.1408610f, +0.0843085f, -0.0270311f, -0.2162403f,
  +0.0109277f, -0.0226019f, -0.3266535f, -0.0327412f, -0.1430181f, +0.2336154f, +0.2524690f, +0.2263245f,
  +0.0170444f, -0.0797611f, -0.1202032f, +0.0009681f, -0.1803391f, -0.2481610f, +0.5512818f, +0.0269073f,
  +0.0382809f, -0.3095286f, -0.2308019f, +0.1228885f, -0.1281721f, +0.0292929f, +0.0805458f, +0.2585985f,
  -0.5854253f, +0.1690316f, -0.0117691f, -0.1159279f, +0.3298796f, -0.5273502f, -0.1005308f, +0.2263786f,
  -0.1012522f, -0.0531561f, +0.0181597f, -0.1892399f, -0.3816371f, +0.1714602f, +0.1191125f, +0.3883950f,
  -0.1351949f, -0.3634228f, +0.3692117f, +0.2315731f, -0.0700706f, +0.0040642f, -0.1539380f, -0.2719168f,
  +0.1179068f, +0.1650627f, +0.0339589f, -0.1234247f, -0.0147939f, +0.2275914f, -0.0774765f, +0.2888098f,
  +0.1112957f, +0.1584053f, +0.1017417f, +0.1536364f, -0.1823852f, +0.0114188f, -0.1081408f, +0.0152920f,
  +0.0235739f, +0.2436693f, -0.0624560f, +0.1778741f, -0.1022032f, -0.0914894f, -0.4737530f, -0.0354982f,
  +0.0718068f, -0.2044951f, -0.0248538f, +0.2006114f, +0.2599244f, +0.4331950f, -0.3429008f, +0.1413676f,
  -0.0809335f, -0.0053966f, -0.0630332f, +0.1522886f, +0.3515650f, +0.1053211f, -0.5710528f, -0.0312579f,
  +0.2601801f, -0.2830856f, +0.0767808f, +0.1520929f, +0.0016445f, +0.1661858f, -0.1329869f, +0.0373258f,
  +0.1586449f, +0.0093050f, -0.5553077f, +0.1778046f, -0.3850008f, -0.2320338f, -0.2062237f, +0.4395754f,
  +0.3237659f, +0.1660142f, -0.2127390f, -0.0431764f, +0.1505506f, -0.0612179f, -0.2727893f, -0.1015429f,
  +0.2504113f, +0.0564285f, +0.1903229f, -0.2972124f, -0.1911396f, +0.0235177f, -0.2320474f, +0.0819779f,
  -0.4072313f, -0.1089184f, +0.3120642f, -0.1880546f, +0.0882555f, -0.1536104f, -0.1726402f, -0.1051138f,
  -0.0169324f, -0.2283248f, +0.1382652f, -0.0414442f, -0.0428219f, +0.0895381f, -0.2098336f, -0.0818132f,
  -0.4455458f, -0.4420919f, +0.3705824f, -0.1342699f, +0.0822308f, -0.0374149f, -0.0286762f, +0.0371567f,
  -0.1115528f, +0.3534590f, +0.2272762f, +0.0175247f, +0.0149619f, -0.1041680f, +0.1367958f, +0.5205212f,
  -0.0105535f, +0.0485550f, +0.1288847f, +0.0589769f, -0.1393997f, +0.0022663f, +0.1617546f, -0.0506276f,
  -0.0455118f, +0.5613509f, +0.1122804f, +0.1922606f, +0.1152829f, +0.0084416f, -0.3711281f, +0.1460579f,
  +0.0329198f, -0.4462822f, -0.3658665f, +0.3924846f, -0.2198848f, +0.3497471f, +0.1064234f, -0.1940224f,
  +0.5047523f, -0.0865330f, -0.1776932f, -0.2321959f, -0.1573722f, -0.3203515f, -0.2213248f, +0.3364469f,
  -0.6713313f, -0.0841075f, -0.1622856f, -0.0736166f, -0.0908827f, -0.0220068f, -0.2792883f, +0.0231241f,
  +0.0514442f, +0.0923553f, +0.3282340f, -0.2070793f, +0.0317201f, -0.1724666f, -0.2984877f, +0.3680649f,
  +0.1894870f, -0.0504633f, +0.0546898f, +0.0179587f, -0.0809930f, -0.3412583f, -0.0598292f, -0.1605614f,
  +0.0102557f, -0.1008364f, +0.0125075f, -0.1544904f, +0.0683572f, +0.1827805f, -0.0785916f, -0.1172179f,
  -0.2268385f, +0.1695700f, -0.2191180f, +0.0121150f, +0.2145734f, -0.2791298f, +0.2135909f, -0.0667727f,
  -0.1611106f, -0.1148457f, -0.1545809f, -0.1179264f, +0.2585839f, -0.0618230f, +0.0294302f, -0.0325676f,
  +0.0914754f, +0.0549594f, +0.0406670f, -0.0241891f, +0.0611612f, -0.1165101f, -0.0158995f, -0.0209043f,
  -0.1099970f, -0.3159847f, +0.1142885f, -0.1650670f, -0.0690780f, +0.5063054f, +0.0484334f, -0.5713615f,
  +0.0694958f, +0.2428419f, +0.2791544f, -0.1216074f, +0.1359834f, +0.0516695f, -0.1533722f, -0.0442239f,
  -0.0210865f, +0.0143471f, -0.0876919f, -0.2340032f, -0.2597011f, -0.0089547f, -0.1587154f, -0.2045905f,
  -0.4399444f, +0.1492308f, -0.0467386f, +0.1711858f, +0.0222825f, -0.1231569f, -0.0362475f, -0.0427978f,
  -0.0142657f, -0.0186590f, -0.1004184f, -0.0111090f, -0.0406144f, +0.0835132f, -0.2653308f, +0.0387150f
);

const float biases[4] = float[4](
  +0.0572075f, +0.0740552f, -0.0125364f, -0.0638086f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer65 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.4658147f, -0.0325305f, -0.4157197f, +0.0929279f, -0.1437709f, +0.4815015f, +0.0218060f, +0.3829634f,
  -0.0854446f, +0.0515471f, +0.0258911f, -0.2329293f, +0.1508962f, +0.3148175f, -0.1817872f, +0.0033714f,
  -0.0182565f, +0.0723333f, -0.2516753f, -0.1813697f, +0.2010569f, +0.2233894f, +0.3092251f, -0.0303630f,
  +0.1536952f, -0.0120174f, -0.2103334f, -0.0439522f, -0.5346380f, -0.0584835f, +0.0306477f, -0.0194685f,
  +0.1220062f, -0.1019209f, +0.2902873f, -0.0505968f, -0.0191783f, +0.1539304f, -0.1629457f, -0.2523462f,
  +0.0215867f, -0.2305939f, -0.3315261f, -0.3466062f, +0.2533998f, -0.2267430f, +0.0837800f, -0.0872948f,
  +0.0393174f, -0.0815351f, -0.2590490f, -0.1325346f, -0.2341476f, +0.4253720f, -0.1318021f, +0.2732618f,
  +0.0358236f, -0.0496519f, -0.0699497f, +0.0431554f, +0.3636457f, +0.2446932f, +0.1276013f, -0.0801583f,
  -0.0407305f, +0.0192055f, -0.1380489f, -0.5386321f, +0.1924772f, -0.0209972f, +0.0079520f, -0.1352677f,
  -0.2331309f, +0.2944885f, +0.0219363f, -0.0277613f, -0.1257254f, -0.2191450f, -0.2473289f, -0.1017198f,
  -0.1381990f, -0.1891497f, -0.0652790f, +0.1906227f, +0.0734893f, -0.1555644f, -0.2729815f, -0.0753677f,
  -0.1633006f, -0.0479407f, -0.1007539f, -0.1875066f, +0.0756577f, +0.3552406f, -0.1235039f, +0.3145859f,
  +0.3748538f, +0.2699941f, +0.3102770f, -0.1455871f, -0.0495932f, -0.1040342f, +0.0346312f, -0.1803880f,
  -0.1906859f, +0.0971648f, +0.0479022f, +0.0627103f, +0.0479403f, +0.1307668f, +0.0927801f, -0.0149815f,
  +0.0134101f, -0.0291187f, -0.1706646f, +0.1587462f, +0.2624943f, +0.1438882f, +0.2149002f, +0.0620902f,
  +0.0229059f, +0.1048407f, +0.2690154f, -0.0214123f, -0.2782587f, -0.0960697f, +0.2439443f, -0.2582521f,
  -0.0380900f, -0.1922615f, +0.0983640f, +0.2679760f, +0.1242200f, +0.2530569f, +0.1637454f, -0.1697568f,
  +0.0158792f, -0.2093529f, +0.0048790f, +0.0531504f, +0.3879281f, +0.2361898f, +0.0430126f, +0.3096114f,
  +0.0404396f, +0.1292118f, -0.1664797f, +0.1247332f, -0.1558895f, -0.0272574f, +0.0695369f, -0.0002614f,
  -0.2129719f, +0.3077984f, +0.0094091f, +0.0792745f, -0.0313380f, +0.1624668f, -0.0881861f, +0.1077496f,
  +0.1564257f, -0.0159045f, +0.0233476f, -0.0222257f, +0.2716531f, +0.0622678f, -0.1980360f, -0.2730934f,
  -0.0263023f, -0.0881890f, +0.0954075f, +0.2808289f, +0.0579419f, -0.5065050f, +0.1249748f, -0.2775770f,
  -0.1500497f, +0.6536628f, +0.1856315f, -0.2882626f, +0.0617373f, -0.3306196f, +0.1807846f, -0.1739886f,
  -0.2493030f, -0.1279377f, -0.1034143f, +0.1267873f, -0.5535265f, +0.0629194f, -0.3961833f, +0.2765526f,
  -0.0140494f, -0.0509426f, +0.2183138f, +0.2930271f, -0.2858361f, -0.1937268f, -0.0168145f, +0.0105445f,
  -0.0591293f, -0.0702127f, -0.0277166f, +0.3630928f, -0.0763068f, -0.4705968f, +0.0697789f, -0.0742402f,
  +0.0959436f, -0.1956846f, -0.1566307f, +0.3078829f, -0.1041233f, -0.0588771f, -0.0890273f, -0.2988368f,
  -0.1601651f, -0.1453498f, +0.3396289f, +0.1886957f, -0.0967139f, +0.0329358f, +0.0369115f, +0.1892994f,
  +0.2423865f, -0.4148780f, +0.3117193f, +0.0686075f, -0.0109399f, -0.0250135f, +0.1754488f, -0.0253818f,
  +0.2311976f, -0.3006048f, -0.1041483f, -0.0522871f, -0.0281084f, +0.1267411f, -0.1640346f, +0.1519622f,
  +0.2956558f, +0.0482139f, +0.1003446f, +0.0388042f, -0.3450825f, -0.2077289f, -0.1390110f, +0.0071946f,
  -0.0576784f, -0.1707034f, +0.2069151f, -0.2512213f, +0.0464735f, +0.1807817f, -0.1473636f, +0.0959342f,
  +0.1214589f, +0.1814789f, -0.0922700f, +0.0090509f, +0.3166045f, -0.0771626f, -0.0593051f, +0.2272570f,
  -0.0227550f, +0.1700775f, +0.2750080f, +0.1826502f, -0.0320646f, -0.1236161f, +0.0275676f, +0.1129910f,
  +0.3730119f, +0.0861278f, -0.1481892f, -0.1216457f, +0.3842737f, +0.0514066f, +0.3170619f, -0.2059214f,
  -0.0172050f, -0.0970734f, +0.2385594f, +0.0797742f, +0.3244766f, -0.4180698f, +0.0158529f, -0.2908421f
);

const float biases[4] = float[4](
  -0.0001598f, +0.0637921f, -0.2148981f, -0.2181379f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer65 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2868219f, -0.1768691f, -0.0026786f, -0.0333182f, -0.1295417f, -0.0181701f, +0.0190191f, -0.0313186f,
  +0.4089014f, +0.4553422f, +0.0889969f, -0.0846263f, -0.3116833f, -0.1117494f, +0.8910106f, +0.0847565f,
  +0.0847145f, -0.1291418f, +0.1837681f, -0.3589832f, -0.0781584f, +0.2360211f, +0.1761115f, +0.1667642f,
  -0.1500267f, -0.1093275f, +0.1662742f, +0.1290951f, +0.1702166f, +0.0200102f, +0.0885994f, +0.1821429f,
  +0.1713308f, +0.7767197f, +0.0665108f, -0.4032919f, +0.1689484f, -0.1968530f, -0.2273827f, +0.2877978f,
  -0.0451886f, +0.1070085f, +0.3971179f, +0.2712417f, -0.2531428f, +0.0300103f, +0.0719302f, +0.1638553f,
  -0.0296749f, +0.0615357f, +0.1022627f, -0.0345864f, +0.0294957f, -0.0508694f, -0.1211243f, +0.0507289f,
  +0.0970426f, -0.1356960f, +0.0664596f, +0.1583570f, +0.1277745f, -0.0646334f, +0.0764249f, -0.0005481f,
  +0.0219893f, -0.0653594f, -0.1224943f, +0.0719245f, +0.2479368f, +0.1923604f, +0.1439762f, -0.0018925f,
  +0.2029456f, -0.2585541f, +0.1966010f, -0.1790640f, -0.0508809f, +0.1375575f, -0.0821340f, -0.1425577f,
  +0.2154514f, -0.1040683f, +0.1183985f, +0.0093071f, -0.1609161f, -0.0649635f, -0.0557543f, +0.0444265f,
  +0.1448722f, +0.0758275f, -0.1348942f, +0.0607152f, -0.0799442f, -0.0457986f, +0.0662708f, +0.0081748f,
  -0.0497401f, -0.2518803f, -0.2618075f, +0.1197127f, -0.0414031f, +0.3763718f, -0.3913343f, +0.0258223f,
  +0.2197836f, +0.2174644f, -0.0907853f, -0.1904054f, +0.1155691f, -0.3158863f, +0.2050240f, -0.0691290f,
  +0.2205106f, -0.2391350f, -0.1047874f, -0.1380918f, +0.1751474f, -0.0516683f, +0.2966554f, +0.0942557f,
  -0.1740304f, -0.0644631f, -0.0438902f, +0.0765765f, +0.0462959f, +0.1294387f, -0.1961446f, -0.1146941f,
  +0.2303474f, +0.0260215f, -0.2914091f, -0.1310552f, +0.0692146f, -0.1339872f, -0.2186065f, -0.0538273f,
  +0.0538048f, +0.0648092f, +0.0937828f, -0.0919175f, +0.1761173f, -0.0727903f, +0.3046067f, -0.0639751f,
  -0.0016402f, +0.1383255f, -0.0921466f, +0.0470496f, +0.0443001f, -0.1451913f, +0.1551063f, +0.0054776f,
  -0.1738255f, +0.3369983f, -0.1274135f, +0.1988816f, +0.0494483f, +0.0532913f, +0.0841004f, -0.0541761f,
  -0.2624031f, -0.1606817f, +0.0862736f, -0.0872555f, +0.0661135f, +0.0200813f, -0.2051610f, +0.1962302f,
  -0.0159144f, +0.1651699f, -0.0739622f, +0.0435013f, +0.0260940f, -0.2575972f, +0.1610460f, -0.1463414f,
  +0.0886295f, +0.3307485f, +0.3528267f, +0.1140832f, -0.1191327f, -0.0913554f, +0.3237916f, +0.5560510f,
  -0.1837864f, -0.4545556f, +0.1792660f, +0.3680554f, +0.0010427f, +0.2443549f, -0.5937778f, -0.1204700f,
  -0.0365543f, +0.0244775f, +0.0410546f, -0.1304260f, +0.1227356f, +0.0675657f, -0.1260459f, +0.0121875f,
  +0.4628479f, +0.1300270f, +0.2273515f, +0.0793362f, +0.1061370f, -0.2833365f, -0.2365790f, +0.1155451f,
  -0.1721438f, -0.3811477f, -0.0788553f, +0.2587406f, -0.3137384f, +0.1334434f, +0.0382026f, -0.1082153f,
  +0.2281528f, +0.2119126f, +0.0374444f, +0.0899892f, +0.0217454f, +0.0481673f, -0.0064501f, -0.0571797f,
  +0.0781780f, +0.0015351f, +0.4657791f, -0.1219863f, +0.1458987f, +0.2126063f, +0.1982371f, +0.7279651f,
  -0.1229894f, +0.0626582f, -0.0254959f, +0.0316348f, +0.0692365f, -0.0026878f, +0.3674006f, -0.1994126f,
  -0.4128878f, +0.0047639f, -0.0717081f, -0.0180981f, +0.1875518f, +0.1723411f, -0.1050527f, +0.0457034f,
  -0.1458229f, +0.0577458f, +0.2454998f, +0.1939199f, -0.0314696f, -0.2549846f, +0.3233318f, +0.1615971f,
  -0.1997327f, +0.0230845f, -0.1017996f, +0.0359946f, -0.1712040f, -0.0961014f, +0.0545869f, -0.1401124f,
  -0.0214076f, +0.1485674f, +0.0670301f, -0.0462160f, +0.1236722f, -0.2497091f, +0.0570652f, +0.0782597f,
  +0.0299234f, -0.0424406f, +0.0000398f, -0.0126752f, -0.1612993f, -0.2683190f, -0.0772590f, -0.1561364f,
  +0.1068404f, +0.0812146f, -0.0103800f, -0.0567036f, +0.0133320f, -0.1680199f, -0.1302459f, -0.0092245f
);

const float biases[4] = float[4](
  -0.2974209f, -0.0071669f, -0.0372814f, -0.0762800f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer66 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0052839f, +0.2802466f, +0.1167661f, +0.1375567f, +0.0265736f, -0.0964326f, -0.0877939f, +0.1938245f,
  +0.1238878f, +0.0628799f, +0.1367211f, -0.0439965f, +0.1396054f, -0.1040520f, -0.0025089f, -0.0173518f,
  +0.0727863f, +0.2237036f, +0.0747006f, +0.1236333f, +0.0954674f, +0.0308377f, -0.0460816f, -0.0032394f,
  -0.1617918f, +0.1496958f, +0.0203315f, -0.0632880f, -0.2083863f, -0.1554592f, -0.2876615f, +0.1722121f,
  +0.0403895f, -0.0446250f, +0.0229994f, -0.0737477f, -0.2842625f, +0.0135176f, +0.2059506f, -0.0263192f,
  -0.1307977f, -0.0660381f, -0.0495517f, +0.1628687f, +0.0188098f, +0.1500459f, -0.0200052f, -0.0790405f,
  -0.0995903f, +0.0385200f, -0.0902353f, -0.0258108f, +0.0019602f, -0.2908092f, +0.0783297f, +0.0709242f,
  -0.0359502f, +0.1344397f, -0.0776413f, +0.1678944f, -0.0639295f, +0.0176173f, +0.2245110f, +0.0980854f,
  -0.2001567f, +0.1983309f, -0.1558943f, +0.2456451f, -0.0754238f, +0.1982014f, +0.0870261f, +0.1672793f,
  -0.0238549f, +0.0454864f, +0.2986076f, -0.3710940f, -0.1660951f, -0.0310451f, -0.0857307f, +0.1238896f,
  +0.2933392f, -0.0915606f, +0.0018937f, +0.0495141f, +0.1313806f, -0.4001226f, +0.0762362f, +0.0249933f,
  +0.0454533f, +0.0697110f, +0.1100268f, -0.3929184f, +0.0819722f, +0.1132268f, -0.1085917f, -0.0094662f,
  +0.1426207f, +0.0087253f, -0.1715516f, -0.3099008f, -0.1082256f, +0.0250418f, -0.0098672f, -0.0466742f,
  +0.2455013f, -0.1019914f, -0.0870216f, -0.0495063f, -0.7137700f, -0.3651890f, +0.2325819f, +0.3679782f,
  -0.1256923f, -0.1168058f, +0.0452216f, -0.2053680f, -0.2313657f, +0.0577637f, -0.1811314f, -0.0435828f,
  +0.0761341f, -0.0306350f, -0.1748948f, -0.3107667f, +0.5775142f, +0.1305428f, -0.2004959f, -0.1622928f,
  +0.1326811f, -0.1155737f, -0.0899846f, +0.0078567f, +0.0064097f, -0.0273233f, -0.0720114f, +0.0475988f,
  +0.1224737f, -0.1112265f, -0.0445016f, -0.3241071f, +0.1171597f, +0.0353762f, -0.0033955f, -0.3966104f,
  -0.0300885f, +0.1390934f, -0.3607287f, -0.0227573f, -0.0169476f, -0.0786792f, +0.1493385f, +0.1701147f,
  -0.0647851f, +0.1061597f, -0.1585693f, +0.2193571f, -0.1778498f, +0.2655665f, -0.0312864f, -0.0158041f,
  -0.0404146f, -0.0312033f, -0.2761860f, -0.0469648f, -0.0694738f, -0.1622016f, +0.2485301f, -0.0232127f,
  +0.0747653f, +0.2412237f, -0.3206032f, +0.1759270f, -0.2179798f, +0.0086809f, +0.1805190f, +0.2104410f,
  -0.1124600f, -0.0924615f, -0.1131198f, -0.1189945f, +0.2038961f, +0.2019887f, +0.0979216f, +0.1046138f,
  +0.0411319f, -0.5700970f, -0.2199058f, +0.4965557f, -0.2160638f, -0.0990931f, +0.0540223f, +0.0034414f,
  -0.0060263f, +0.3195471f, -0.1921230f, +0.1856408f, +0.2756201f, +0.1792790f, +0.1475946f, -0.1342139f,
  -0.2605951f, -0.2132501f, +0.4796065f, -0.0344023f, +0.3142720f, -0.1202915f, -0.4645160f, -0.5103286f,
  +0.2531591f, +0.0353707f, -0.0328088f, +0.1166512f, -0.1490865f, -0.0885365f, +0.0005576f, -0.0696215f,
  +0.1286726f, -0.1084116f, -0.2209749f, -0.2834511f, +0.0007881f, -0.0886607f, -0.0770721f, -0.0574842f,
  -0.1168642f, -0.0606178f, -0.1946588f, +0.5175316f, -0.2730778f, -0.1272392f, -0.0651387f, -0.1148047f,
  +0.0301116f, -0.0471694f, -0.1584465f, -0.2024374f, -0.1335510f, -0.2142119f, +0.0002791f, -0.0116519f,
  +0.1564028f, -0.4632910f, +0.0486228f, +0.2887575f, -0.0939999f, +0.0678961f, -0.1150836f, +0.0715080f,
  +0.0229420f, -0.1842636f, +0.1585202f, +0.2288875f, +0.3087755f, -0.1610680f, -0.8627466f, -0.0122276f,
  +0.0866638f, +0.1120114f, -0.1934663f, +0.1789774f, -0.1789312f, -0.0539274f, -0.0655507f, +0.0547745f,
  +0.1844621f, -0.1015774f, +0.4056550f, +0.1483520f, +0.5347251f, -0.1297761f, -0.3050513f, +0.0199271f,
  +0.3231437f, +0.2094572f, +0.0009071f, +0.3735330f, -0.0263010f, -0.1014460f, +0.4681968f, -0.0846174f,
  +0.0661148f, +0.0705300f, +0.1265108f, -0.0803329f, -0.2487487f, +0.1497335f, -0.1163030f, +0.0202071f
);

const float biases[4] = float[4](
  +0.0138092f, +0.0263281f, -0.0095411f, +0.0238049f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer66 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0629000f, -0.0719523f, -0.0982615f, +0.1920406f, +0.0094307f, -0.0572911f, -0.2591623f, +0.1683456f,
  +0.0207490f, +0.1070502f, -0.1429867f, -0.2791791f, -0.0725138f, -0.0720710f, +0.0670539f, +0.1451592f,
  +0.0395796f, +0.2274296f, +0.0564057f, -0.2404757f, -0.0479852f, -0.0246338f, -0.0784923f, +0.1037789f,
  +0.1400497f, -0.0192140f, +0.2204124f, +0.0838934f, -0.1657378f, +0.0824791f, -0.0215924f, +0.2065657f,
  +0.0491591f, -0.2663275f, +0.0103359f, +0.1484638f, -0.2276918f, +0.1907385f, -0.3032847f, -0.1825866f,
  +0.4512600f, -0.0793169f, -0.3499599f, +0.0217861f, -0.4778107f, -0.2040625f, +0.2677039f, -0.0662976f,
  -0.0771183f, +0.0925348f, +0.0182872f, -0.0113816f, -0.1413395f, -0.0649480f, -0.0692627f, +0.0127359f,
  -0.0678134f, +0.1575078f, -0.1685650f, -0.0234738f, -0.1083388f, +0.0269867f, -0.3224482f, +0.3461745f,
  -0.0016548f, +0.2330844f, +0.0853694f, -0.0835428f, +0.0598988f, -0.0901279f, +0.0546066f, -0.8197677f,
  +0.1937905f, -0.0706313f, +0.1356747f, +0.4752488f, -0.1613254f, +0.0771689f, +0.0041548f, -0.0128274f,
  -0.1730980f, -0.1401561f, +0.2419127f, -0.1547906f, -0.0638851f, -0.1737918f, -0.0660924f, +0.2105672f,
  +0.0096131f, +0.1820039f, +0.2357108f, +0.2104605f, -0.1551554f, +0.0960197f, -0.0270390f, +0.1340424f,
  +0.1338796f, -0.2751714f, +0.0870170f, +0.0825436f, -0.0050717f, +0.2099477f, +0.3491375f, +0.3258452f,
  +0.1580988f, +0.1305556f, +0.5779299f, -0.0029799f, +0.0062671f, +0.2511260f, -0.2513152f, +0.0003872f,
  -0.0128728f, +0.0429965f, +0.4556665f, -0.1210041f, +0.2296013f, -0.1226132f, -0.2164698f, -0.2313678f,
  +0.0165816f, -0.0593817f, -0.3017706f, +0.1553518f, -0.1968860f, -0.0119987f, -0.1031554f, -0.2778287f,
  -0.2445557f, +0.1246830f, -0.0034112f, +0.1585723f, +0.2879655f, +0.1410510f, +0.1635589f, -0.2338632f,
  -0.1682166f, +0.2529046f, +0.1185884f, +0.2263375f, +0.1375273f, +0.0109861f, -0.0292231f, -0.1189440f,
  -0.0501646f, -0.0423358f, +0.1300246f, -0.5986469f, -0.0702443f, -0.1384480f, -0.0329662f, -0.1223168f,
  -0.2065431f, +0.0979286f, +0.1646550f, -0.2269298f, -0.1136390f, +0.1373507f, -0.0610336f, +0.0782607f,
  +0.1621483f, -0.2090831f, -0.1832780f, -0.2790284f, -0.1013247f, -0.1321850f, -0.0873945f, -0.1548054f,
  -0.0429890f, -0.3081735f, +0.2506212f, +0.1739059f, +0.0457131f, -0.2732085f, -0.6386414f, -0.1602975f,
  +0.2009168f, -0.2888894f, -0.0878061f, +0.0177844f, +0.7710895f, -0.1102586f, +0.3542631f, -0.4089230f,
  -0.0580804f, -0.1249894f, -0.1938736f, +0.1661633f, -0.2058261f, +0.2440542f, -0.0114708f, -0.1383805f,
  -0.2310732f, -0.1700790f, +0.1058216f, +0.1973219f, +0.4822549f, -0.0211811f, -0.2310675f, -0.0505823f,
  -0.0768764f, +0.1213600f, +0.0662370f, -0.2160254f, -0.5996469f, -0.1069305f, -0.1289331f, -0.3442349f,
  +0.0448483f, +0.2437211f, +0.0346011f, -0.3617262f, +0.1105359f, +0.0211759f, -0.0519514f, -0.1078004f,
  +0.2731394f, -0.1062116f, -0.2117162f, +0.2195270f, -0.0842544f, +0.0461297f, +0.0175578f, +0.0920370f,
  +0.0662549f, +0.0646164f, -0.2103187f, +0.1176122f, -0.0039890f, +0.3190266f, -0.1004140f, +0.0884180f,
  -0.1389546f, +0.2706660f, +0.1230791f, +0.0375601f, -0.0855166f, +0.2003414f, +0.0171143f, -0.0265116f,
  +0.0218750f, +0.0668636f, -0.3269679f, +0.2133154f, -0.2932759f, -0.0050827f, -0.2100459f, +0.0770422f,
  +0.2776909f, +0.0472734f, +0.1332383f, -0.0601434f, +0.1097006f, +0.1491197f, +0.3821824f, +0.1525842f,
  +0.3012415f, +0.1514984f, +0.2584153f, +0.2835962f, -0.0730262f, +0.0614979f, -0.2520226f, -0.1175956f,
  +0.1452738f, -0.3155395f, +0.1833557f, +0.0681991f, -0.1075232f, -0.0461056f, +0.0663254f, +0.0002285f,
  +0.1203656f, +0.1268920f, -0.2214222f, +0.4064193f, +0.2073089f, -0.0635870f, +0.0646598f, -0.4890727f,
  -0.1226297f, +0.2394670f, +0.1951212f, -0.0667731f, +0.2675951f, -0.0258259f, -0.1217801f, -0.0127577f
);

const float biases[4] = float[4](
  +0.0693282f, +0.0316803f, +0.0425685f, -0.0587712f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer67 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0851179f, +0.1274037f, -0.1227012f, -0.1987047f, -0.0175719f, -0.2148640f, -0.2154032f, -0.2620099f,
  +0.1848394f, +0.3109335f, -0.2462904f, +0.1514051f, +0.2713635f, +0.3741879f, +0.0513581f, -0.2645079f,
  +0.0386410f, +0.3102996f, +0.1864538f, -0.2717119f, -0.2645602f, -0.3276176f, +0.1333302f, +0.0702469f,
  -0.0179977f, -0.2555464f, +0.0412439f, -0.0851425f, -0.0652038f, -0.3628452f, +0.0378883f, -0.3290014f,
  -0.2897761f, +0.1211981f, -0.0007036f, -0.1210339f, -0.1777170f, -0.0699601f, +0.1604721f, +0.1224233f,
  -0.2206895f, +0.0579949f, +0.1903804f, +0.1228799f, +0.1153000f, -0.7061196f, -0.2624283f, +0.2159612f,
  -0.0354995f, +0.1216484f, +0.3809410f, -0.0829893f, -0.0451130f, -0.0347608f, +0.1298626f, -0.1687138f,
  +0.1193234f, -0.3654162f, +0.3569399f, +0.4341561f, -0.3467844f, -0.2161369f, -0.3576581f, +0.1015613f,
  +0.2263370f, -0.1678866f, +0.2180335f, +0.6230795f, -0.1068938f, +0.1516144f, -0.1555061f, -0.0678892f,
  -0.1540871f, +0.1504523f, -0.0684730f, +0.0185798f, -0.0516723f, -0.0035983f, -0.0177753f, +0.0122758f,
  +0.0591133f, +0.1268589f, +0.0123714f, +0.0023754f, -0.1118963f, -0.0278892f, -0.2045429f, +0.1002133f,
  +0.1685929f, -0.0312507f, -0.0711230f, +0.2207993f, -0.0313000f, +0.2003050f, -0.0946239f, +0.1723520f,
  -0.3208062f, +0.4142951f, -0.2794992f, -0.2280039f, -0.0767873f, +0.1976815f, +0.1100876f, -0.0985768f,
  -0.2197608f, -0.1983328f, -0.0525001f, +0.2151799f, +0.1483583f, +0.0594757f, -0.1367174f, -0.1954533f,
  +0.2604852f, -0.1006984f, +0.1632514f, +0.2572553f, -0.1476281f, +0.1959617f, -0.2500980f, -0.0112865f,
  -0.1536846f, -0.1363203f, +0.0193391f, -0.1545205f, +0.1814143f, +0.2189094f, +0.3701746f, -0.0379072f,
  +0.3673180f, -0.2249938f, -0.0023445f, +0.4186293f, +0.1660050f, +0.0316843f, +0.1855396f, -0.2577880f,
  +0.2102103f, -0.1587443f, -0.1143524f, +0.2080825f, -0.1566035f, -0.0355078f, -0.3027864f, -0.0899317f,
  +0.0693015f, -0.1006155f, +0.2482666f, +0.2183024f, +0.0258657f, -0.1938493f, -0.3038266f, +0.0428939f,
  +0.0167443f, -0.0873138f, +0.2244633f, -0.2099810f, +0.2002025f, +0.0427549f, -0.2139366f, -0.1914098f,
  -0.0303297f, +0.0589791f, -0.0024319f, -0.0851809f, +0.0395609f, -0.1579102f, -0.0098597f, -0.0399512f,
  +0.1524389f, -0.2972936f, -0.0655315f, +0.0529229f, -0.1251794f, -0.0902954f, -0.0587440f, +0.1637317f,
  +0.0476256f, +0.0503291f, -0.2262463f, -0.4780078f, +0.3128867f, -0.0286819f, +0.0995643f, -0.0149400f,
  -0.1407963f, -0.2218530f, +0.1415626f, -0.4021153f, +0.2132366f, +0.2475596f, +0.3781937f, -0.0704778f,
  +0.1533839f, +0.0289078f, +0.0919306f, +0.0148173f, +0.1507065f, +0.1139921f, -0.1589219f, +0.1435624f,
  -0.0802997f, +0.1229818f, -0.2162123f, -0.1661386f, +0.0555412f, +0.3646255f, -0.0246815f, +0.4454153f,
  -0.0569064f, -0.0540334f, -0.0193347f, -0.0914425f, -0.0848168f, +0.0172188f, +0.3236080f, +0.2915709f,
  +0.0082884f, -0.1612744f, -0.2467837f, +0.0831229f, -0.1435804f, -0.1013890f, -0.0896067f, +0.0263124f,
  -0.2611390f, +0.2605266f, +0.2409653f, -0.2563173f, -0.0670071f, -0.6127145f, +0.0647847f, -0.0727542f,
  -0.1546075f, -0.1711479f, +0.3158660f, +0.6345763f, +0.3498945f, +0.0751421f, +0.0750536f, -0.0346773f,
  -0.0637187f, -0.1311920f, +0.1057268f, +0.3451293f, +0.0077254f, +0.2353835f, +0.2073401f, -0.0581203f,
  -0.0938123f, +0.2597149f, +0.2105960f, +0.0161757f, -0.0025518f, -0.4403537f, -0.1851029f, -0.0305618f,
  +0.1123751f, -0.4366159f, +0.3841230f, +0.0112030f, +0.0410130f, -0.4957304f, -0.0466314f, -0.0231801f,
  -0.0828492f, +0.1626128f, +0.0082281f, +0.1955218f, +0.2744518f, +0.1909461f, -0.0528219f, +0.2888410f,
  -0.0919537f, +0.7008181f, -0.2658017f, +0.1226475f, -0.0608224f, +0.0347776f, +0.1107642f, +0.0354261f,
  +0.0953864f, -0.0662840f, +0.2110621f, -0.0410981f, -0.1981279f, -0.3125391f, +0.0288386f, -0.0590753f
);

const float biases[4] = float[4](
  -0.0040928f, +0.0199422f, +0.0114762f, -0.0810006f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer67 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1552119f, +0.0392010f, +0.3952580f, +0.0352977f, -0.0295730f, +0.1001236f, +0.0034546f, +0.0131500f,
  +0.2866628f, -0.1988547f, +0.2471609f, -0.0784414f, +0.0426401f, -0.2087491f, +0.3148265f, -0.0661419f,
  +0.0805505f, -0.2665573f, +0.0269183f, +0.0336968f, +0.0911734f, -0.0156147f, -0.0839541f, +0.0862308f,
  -0.3211114f, +0.3483770f, +0.0230924f, -0.0083538f, -0.1317133f, +0.0727446f, +0.0365467f, +0.3032260f,
  -0.2098225f, +0.3636974f, -0.2240668f, +0.0043584f, -0.1506508f, -0.0595254f, -0.0448236f, +0.0591181f,
  +0.0839088f, +0.3683431f, -0.2043320f, +0.0438501f, +0.2378935f, +0.4046939f, -0.0196488f, -0.4487877f,
  -0.0100997f, -0.1138332f, +0.0190449f, +0.1551129f, +0.4965585f, +0.3143114f, -0.0246131f, +0.3158081f,
  +0.2140945f, -0.1634904f, -0.1704534f, +0.1979704f, -0.1106182f, -0.0712374f, +0.1100062f, -0.2151725f,
  -0.2765730f, +0.2663350f, -0.0663026f, -0.2976421f, +0.1742678f, -0.1253221f, -0.0103579f, +0.2149184f,
  +0.0162104f, -0.0891087f, +0.0252159f, +0.1375024f, -0.1122512f, -0.2662737f, -0.0219700f, -0.1652578f,
  +0.0973637f, +0.2805066f, +0.1799812f, +0.2593680f, -0.2307192f, -0.2198075f, +0.2328825f, +0.1913338f,
  -0.0588227f, -0.0082775f, +0.1489456f, -0.1923139f, +0.1718446f, -0.0258968f, +0.3310100f, +0.1559426f,
  +0.0382324f, +0.0264777f, -0.0660306f, +0.1441172f, +0.1204725f, +0.2997473f, -0.1481934f, +0.3999512f,
  -0.1191374f, -0.1464562f, +0.2173322f, -0.0498648f, +0.2073978f, -0.1885036f, -0.0513891f, +0.2072042f,
  -0.1482153f, -0.0191090f, +0.0262964f, +0.1626711f, -0.1436128f, +0.2442561f, +0.1148710f, -0.0259231f,
  -0.0207038f, +0.1040356f, -0.0910251f, -0.3143038f, +0.0842035f, -0.1415565f, -0.1501806f, +0.0357538f,
  +0.1022609f, -0.1490385f, -0.0871199f, -0.0645602f, -0.2826444f, -0.1370003f, -0.0205096f, -0.1392372f,
  -0.1202123f, +0.0054881f, -0.1720784f, -0.1872313f, -0.3636307f, -0.0724164f, +0.1208054f, -0.1696549f,
  +0.3783829f, -0.1711117f, +0.1461980f, -0.0093368f, +0.1812581f, -0.1241630f, -0.1514409f, -0.2952783f,
  +0.0583125f, -0.1274873f, +0.1175333f, +0.1130486f, +0.0859534f, +0.1809778f, +0.0099186f, -0.1715501f,
  -0.0198888f, -0.0916677f, -0.1193618f, -0.2059787f, -0.0639996f, -0.0364149f, -0.0339327f, -0.0732090f,
  +0.1708594f, -0.1881103f, +0.1098255f, +0.0651801f, +0.0828518f, +0.2063541f, -0.4896364f, +0.1747330f,
  +0.2881630f, -0.4294330f, +0.1681437f, +0.3565226f, -0.2285632f, +0.0774642f, -0.0798127f, +0.2648845f,
  -0.2967771f, +0.1181881f, -0.2145443f, +0.2185940f, -0.1788283f, -0.4826477f, +0.3242106f, -0.3029450f,
  -0.0685344f, +0.0065077f, +0.0741743f, +0.0940744f, +0.0126099f, -0.5603830f, +0.0110416f, -0.0806779f,
  +0.5534596f, +0.4583468f, -0.0218159f, -0.1394105f, +0.2675605f, -0.3705808f, -0.0089663f, -0.0835694f,
  -0.0445802f, +0.8123374f, -0.1520447f, +0.0071057f, -0.3380563f, -0.7363703f, +0.1084960f, -0.4832083f,
  -0.1628063f, -0.3117919f, +0.0492989f, +0.3708695f, +0.0030033f, -0.0263481f, -0.2164040f, +0.2277843f,
  -0.0231859f, -0.1377034f, +0.2137403f, +0.3300164f, +0.1532625f, -0.2738239f, -0.0132708f, -0.0806800f,
  +0.1261650f, -0.1534639f, -0.0856618f, +0.0140265f, -0.1182950f, +0.1156841f, +0.2633035f, -0.0384679f,
  -0.0213132f, -0.0084568f, -0.1123922f, +0.0827048f, -0.0401036f, -0.2267067f, -0.0741991f, +0.0837144f,
  +0.0791262f, +0.0661850f, -0.1729031f, -0.0281938f, +0.1786817f, -0.1518517f, +0.1991642f, -0.1014944f,
  -0.1409441f, +0.0117456f, -0.2141109f, +0.1107554f, +0.0488328f, -0.0988346f, +0.3567567f, -0.1328448f,
  -0.0412253f, +0.0842300f, +0.1147362f, +0.0362781f, -0.0645526f, -0.0900290f, -0.1572724f, +0.0813675f,
  -0.0947389f, +0.1183060f, -0.1514755f, -0.0112913f, +0.1957141f, +0.1137553f, +0.2505438f, -0.2277474f,
  +0.0584517f, +0.0618952f, +0.1095866f, +0.1271383f, -0.0308046f, -0.0817919f, +0.0362448f, -0.1059715f
);

const float biases[4] = float[4](
  +0.0226201f, -0.0687576f, -0.1393943f, -0.0112991f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer68 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1634142f, -0.0718338f, -0.1479848f, -0.1246458f, +0.2556811f, +0.2777519f, +0.1642452f, -0.2463070f,
  +0.0932410f, -0.1664423f, +0.1136794f, +0.1310736f, +0.1079663f, -0.0673936f, -0.2838939f, -0.1273559f,
  -0.0970100f, +0.3690320f, +0.0226991f, -0.1903139f, -0.0599646f, -0.0040255f, -0.2099559f, -0.1305603f,
  -0.0321269f, +0.1355655f, +0.0609525f, -0.0792144f, -0.1053493f, -0.0216704f, +0.1649904f, +0.0996181f,
  -0.0274298f, +0.0953837f, -0.0204828f, -0.0061838f, +0.1990392f, -0.1151987f, -0.3420840f, +0.0055596f,
  +0.0278557f, +0.2129199f, -0.1035280f, +0.1088625f, +0.2365977f, -0.1555093f, -0.5660729f, -0.1227081f,
  +0.1548824f, +0.0429523f, -0.2064147f, -0.0147973f, +0.0641720f, -0.0248222f, -0.1420619f, +0.2003871f,
  -0.0854767f, +0.0756030f, +0.1049620f, +0.2848898f, -0.0943998f, +0.0600676f, -0.3926858f, -0.0116087f,
  +0.0337080f, +0.3411356f, -0.0052667f, -0.2603270f, +0.1156005f, +0.0010031f, -0.4401211f, +0.0057433f,
  -0.0728008f, +0.2409123f, -0.0000410f, +0.2451236f, -0.3601030f, +0.0945897f, -0.3481075f, +0.1616720f,
  +0.0752354f, -0.0141103f, -0.0419087f, +0.0986454f, +0.1733340f, -0.2426676f, -0.1476882f, +0.0699772f,
  +0.2679607f, -0.0264179f, -0.0876518f, +0.1181123f, +0.1935020f, -0.0709703f, -0.0958574f, +0.2419757f,
  -0.0791791f, +0.0752613f, -0.0656547f, +0.0329116f, -0.1448054f, +0.2064283f, -0.2549914f, +0.0204130f,
  +0.5366817f, -0.1240866f, +0.2313127f, -0.0577778f, -0.4259239f, +0.3915702f, +0.2362476f, +0.0317692f,
  +0.0440924f, -0.1365053f, +0.0278096f, +0.0551508f, -0.0956088f, -0.3002152f, +0.0958224f, +0.2705142f,
  -0.0852610f, +0.0155373f, -0.1797882f, -0.1916016f, +0.0573228f, -0.0956469f, +0.0280369f, +0.0801860f,
  +0.3934849f, -0.0898438f, +0.2147048f, +0.0649965f, +0.0535678f, -0.1706139f, +0.2103145f, -0.2613389f,
  -0.1302218f, -0.0273353f, +0.0453101f, -0.1434772f, -0.0572599f, +0.0806614f, +0.1432237f, +0.1534065f,
  -0.3599903f, -0.2329690f, +0.3472447f, -0.0269056f, -0.0830359f, +0.0975445f, +0.3700894f, -0.1969362f,
  -0.1399443f, -0.3294449f, -0.0026506f, +0.1852484f, +0.1887788f, +0.1848425f, +0.1633894f, +0.0744770f,
  +0.1607470f, -0.1558212f, -0.0397780f, +0.1892807f, +0.2161546f, +0.0984393f, -0.1265722f, -0.1734744f,
  +0.1273073f, -0.2197259f, -0.0880710f, -0.0535210f, +0.2525382f, +0.4651489f, +0.3204296f, +0.1949115f,
  +0.1368842f, -0.2288079f, +0.2296422f, -0.3093686f, +0.2064560f, +0.1921264f, +0.0356280f, +0.4382811f,
  +0.3572819f, -0.0596434f, -0.0365248f, -0.0750967f, +0.1447319f, +0.1573209f, -0.2936759f, +0.0472085f,
  +0.3405391f, -0.0269217f, -0.0251145f, +0.0521150f, -0.4160309f, +0.1097938f, +0.0601201f, +0.2173606f,
  +0.3240075f, -0.2213965f, -0.1791651f, -0.0836528f, -0.1906312f, -0.1223164f, -0.1336707f, -0.2154963f,
  +0.1422731f, +0.0922786f, -0.0296340f, -0.1473922f, -0.3353378f, -0.0134104f, -0.2126096f, -0.0240565f,
  -0.1660707f, -0.0017854f, -0.1914505f, +0.0987424f, +0.1887195f, -0.1605210f, +0.1000997f, -0.1343633f,
  -0.0564870f, -0.1762327f, -0.2237169f, -0.0844523f, -0.3773732f, +0.0234304f, +0.1159450f, -0.0909916f,
  -0.0023865f, -0.1357279f, -0.1210521f, -0.0260183f, -0.1630696f, -0.2013609f, -0.0311692f, +0.3721157f,
  -0.2191254f, -0.1383880f, -0.0166136f, +0.3077391f, +0.0985803f, -0.2508357f, -0.3918429f, -0.1618793f,
  -0.1956475f, -0.1117832f, -0.0323631f, +0.2721226f, +0.1529285f, -0.0225503f, +0.0522947f, -0.3149731f,
  +0.1733368f, +0.1809101f, -0.0342661f, -0.1685148f, +0.1225260f, +0.0434063f, +0.1363425f, +0.2395199f,
  -0.4007328f, -0.0405887f, +0.0687153f, +0.0471162f, +0.1808323f, -0.1535526f, +0.0951758f, -0.1801524f,
  +0.2765961f, +0.0610022f, +0.1164002f, +0.2063564f, +0.2193269f, -0.2173610f, +0.0028865f, -0.1648741f,
  +0.0046578f, +0.2612257f, +0.1344417f, +0.1584975f, +0.0321458f, -0.2764714f, +0.1714575f, +0.0442533f
);

const float biases[4] = float[4](
  +0.0068716f, +0.0018083f, -0.0535946f, +0.0543594f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer68 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0372922f, +0.1852843f, -0.1366113f, +0.2220602f, -0.0098075f, +0.2513386f, +0.1517914f, -0.0874163f,
  +0.1097409f, -0.1862024f, -0.0871617f, +0.0814212f, -0.0043343f, +0.2208175f, -0.2654581f, -0.1834933f,
  +0.1209248f, -0.2862696f, -0.4053321f, -0.2591805f, -0.1699352f, -0.0311087f, -0.1887767f, +0.0808648f,
  +0.1737881f, +0.2953864f, -0.4204001f, +0.0666869f, -0.2669877f, +0.0602739f, -0.0948616f, -0.1196673f,
  +0.4421794f, -0.1516429f, -0.2725457f, -0.0482697f, +0.1670533f, -0.2094465f, -0.2476576f, -0.3274706f,
  +0.0083838f, +0.4202179f, +0.1862475f, +0.0156677f, +0.1856406f, -0.1889490f, -0.2717617f, -0.1760393f,
  +0.2376073f, +0.1239686f, +0.1042754f, -0.3984526f, -0.0462802f, -0.1214699f, -0.0450277f, +0.1608157f,
  +0.4607372f, +0.1759709f, -0.2435754f, -0.1500721f, -0.1252474f, +0.0582124f, -0.2729800f, +0.0961635f,
  +0.2952882f, +0.1884663f, +0.0224204f, +0.0141673f, +0.0159143f, +0.0093792f, -0.0126884f, -0.0157791f,
  -0.0592243f, +0.2780181f, -0.1200532f, +0.4382646f, -0.0185135f, -0.3546123f, +0.2448804f, +0.0354919f,
  -0.2372693f, -0.1469931f, -0.2503535f, -0.1951083f, -0.0356869f, -0.1907900f, -0.0171407f, +0.0336479f,
  -0.2912586f, +0.2644300f, +0.0615463f, -0.3656358f, -0.2908068f, -0.0458608f, +0.0666959f, +0.0706191f,
  -0.3207087f, -0.0958014f, -0.0943248f, +0.1524295f, +0.0092213f, -0.0541544f, +0.1723953f, +0.1473853f,
  -0.0840314f, -0.0901208f, +0.1824855f, +0.2809485f, +0.2890407f, +0.1665331f, -0.2321272f, +0.0063862f,
  -0.0721790f, -0.3067235f, +0.2209646f, -0.4001055f, +0.0690200f, -0.1627451f, -0.4227964f, -0.0465127f,
  +0.1302654f, -0.0353449f, +0.0673925f, +0.1413179f, +0.0928403f, -0.1097974f, -0.0586174f, -0.3930627f,
  -0.3180614f, +0.0517972f, +0.1576431f, +0.2371733f, +0.2998443f, -0.1284140f, -0.2043125f, +0.0777389f,
  -0.2597280f, +0.0116581f, +0.1640927f, -0.0478120f, -0.0270141f, +0.1346021f, -0.0914891f, -0.0688954f,
  +0.1543921f, +0.2801579f, -0.2172033f, -0.0627712f, -0.0902923f, +0.1162457f, -0.2486553f, -0.2477522f,
  -0.0309039f, -0.0234999f, -0.2483273f, -0.1848558f, -0.2239794f, +0.2195561f, -0.2203369f, -0.2379837f,
  -0.2895193f, -0.1467508f, -0.1036870f, -0.3000449f, -0.1316574f, +0.1700059f, -0.1505755f, -0.0183530f,
  +0.0524187f, +0.3468163f, -0.0390912f, -0.1240698f, -0.2281920f, +0.0048530f, +0.0382972f, -0.2020849f,
  +0.5777781f, -0.0132731f, +0.0309137f, -0.3785806f, +0.3122655f, -0.0355769f, +0.0331022f, +0.0290697f,
  +0.0592276f, -0.1229847f, +0.1744213f, -0.2155060f, -0.0574095f, +0.2895074f, +0.0375677f, +0.0546170f,
  +0.4304109f, +0.1613588f, -0.1267204f, -0.0477980f, -0.0010013f, -0.1867969f, -0.1056781f, -0.2181345f,
  -0.0703059f, +0.1348645f, +0.0600532f, -0.4087391f, -0.2180443f, -0.6257279f, -0.2858059f, -0.1072311f,
  -0.1769112f, +0.1206763f, +0.0872530f, -0.0447815f, -0.0665326f, +0.1050683f, -0.0484702f, -0.1144603f,
  -0.4273452f, +0.0588219f, -0.0191498f, +0.3077180f, -0.2822365f, +0.1390193f, +0.2014890f, -0.1761073f,
  +0.1339834f, +0.0165526f, -0.4288734f, -0.2453733f, +0.0966556f, +0.1402308f, +0.2467855f, -0.0505053f,
  +0.2849613f, +0.0848423f, -0.0554397f, +0.0624940f, -0.2219139f, +0.0002735f, +0.1614594f, +0.0285445f,
  +0.3121471f, -0.0367488f, +0.1204562f, +0.4017700f, +0.1705758f, -0.0646475f, +0.2002912f, +0.2989660f,
  +0.4624654f, +0.0289970f, -0.2101793f, -0.2280536f, +0.1025129f, -0.1023610f, -0.3869914f, +0.1410807f,
  -0.0787407f, +0.1740824f, -0.0434766f, -0.0849934f, -0.2331287f, -0.4907293f, -0.3437130f, -0.2912473f,
  +0.0214032f, +0.0426424f, +0.2019079f, +0.2313327f, -0.0740736f, +0.0034020f, +0.0269301f, +0.1197217f,
  -0.4138900f, -0.0792408f, -0.1626280f, +0.0769441f, +0.1634312f, -0.0159326f, +0.1760796f, +0.0859158f,
  +0.1079425f, -0.0197849f, +0.1481500f, +0.1815610f, +0.0701076f, -0.0624048f, +0.0456074f, -0.1762303f
);

const float biases[4] = float[4](
  +0.0730529f, +0.0481538f, +0.0234163f, -0.0719883f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer69 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0858245f, +0.0343383f, +0.1021471f, -0.1344954f, +0.0629874f, -0.1260258f, +0.0556746f, -0.1200845f,
  +0.3524663f, +0.3629151f, +0.2891286f, -0.1510028f, -0.4075967f, +0.0638407f, +0.2769015f, -0.2895352f,
  +0.0322296f, +0.1450777f, +0.0369799f, -0.0284791f, -0.0144321f, +0.1020145f, -0.1895690f, +0.2427647f,
  -0.1724700f, -0.4865246f, +0.2844753f, +0.2538804f, -0.1194578f, -0.2916707f, +0.0669848f, -0.1134171f,
  +0.3609009f, +0.9044576f, +0.4489312f, -0.4446267f, -0.1139561f, -0.3614810f, +0.1716907f, +0.5875311f,
  -0.2411010f, +0.0899566f, +0.6641313f, +0.0641064f, -0.3955438f, -0.2482510f, -0.0762254f, +0.5729007f,
  +0.0161207f, -0.0281285f, +0.0307056f, -0.0402291f, +0.0336309f, -0.0951971f, +0.0809619f, -0.0098730f,
  +0.0514861f, -0.1406030f, -0.1904620f, -0.0456737f, -0.0517693f, -0.1563176f, -0.1132134f, -0.2605596f,
  +0.0270860f, -0.0904257f, +0.0135627f, +0.1165894f, +0.0159757f, -0.0851972f, +0.0320816f, -0.1896519f,
  +0.0584378f, -0.4390755f, +0.1217868f, +0.3694495f, +0.2148156f, +0.2197754f, +0.1886314f, +0.3612328f,
  -0.2211741f, -0.1473287f, +0.1229558f, -0.1469425f, -0.1149733f, +0.4348408f, +0.1455132f, +0.3619176f,
  +0.1062762f, -0.1200056f, +0.0091079f, +0.0403550f, +0.0786596f, +0.1650183f, +0.3667294f, -0.0114397f,
  +0.0852908f, +0.1221451f, -0.3346283f, +0.0212763f, -0.5454779f, +0.2452496f, -0.2765736f, +0.1828174f,
  -0.0290760f, +0.2852870f, -0.2383102f, -0.4310613f, +0.0436258f, -0.3390605f, +0.2186346f, +0.0835341f,
  +0.1154973f, -0.1535818f, -0.0642698f, -0.2625784f, +0.1372531f, -0.0682356f, +0.2288888f, +0.0062107f,
  -0.0761125f, -0.2507740f, -0.1132865f, +0.2940499f, +0.1983792f, +0.0376202f, +0.0869704f, +0.2333061f,
  +0.0489400f, +0.0882514f, -0.0700885f, -0.1426926f, -0.0902145f, -0.3538626f, -0.2617815f, -0.3259116f,
  -0.0792834f, +0.1976007f, -0.3342630f, +0.0232736f, +0.3723930f, +0.1126167f, -0.1683265f, -0.0608608f,
  +0.0629464f, -0.1689330f, -0.0067481f, +0.1122832f, +0.0108963f, +0.2412094f, -0.0982733f, +0.2554474f,
  +0.2390825f, -0.1069536f, -0.1116433f, +0.1149591f, +0.0129296f, -0.1628372f, -0.0154401f, +0.1098853f,
  -0.0899204f, -0.1267385f, -0.0221025f, +0.0036909f, +0.2809698f, +0.0271752f, -0.0614859f, +0.0367840f,
  +0.1120495f, +0.1978358f, +0.0902125f, +0.3481089f, +0.0116487f, +0.1376007f, +0.1705575f, +0.0461532f,
  +0.2195924f, -0.2638724f, -0.0557448f, -0.0570915f, +0.1897402f, -0.1341737f, +0.3062386f, +0.1765929f,
  +0.0859823f, -0.1579185f, +0.1893102f, -0.2521465f, +0.2154621f, -0.0340587f, -0.1848868f, +0.0344262f,
  -0.0984134f, -0.1317354f, -0.0459609f, +0.0091530f, -0.2911563f, -0.0973028f, -0.2629320f, -0.1432717f,
  -0.1309002f, +0.0820724f, +0.4715672f, -0.0684159f, -0.1486780f, -0.1419073f, -0.0974150f, -0.0907685f,
  -0.3541373f, +0.1095974f, -0.1106230f, -0.1494064f, +0.1168423f, +0.1847126f, +0.1942981f, -0.1431086f,
  +0.4198453f, +0.1836755f, +0.1716088f, -0.1658693f, -0.0874790f, -0.0094421f, +0.5045248f, +0.1990949f,
  +0.2579016f, -0.0954805f, +0.1222656f, -0.0806985f, -0.1631903f, -0.1820100f, +0.3033466f, +0.0947669f,
  +0.0405551f, +0.1243082f, +0.1177048f, +0.1585514f, +0.0920251f, +0.0679004f, +0.0734709f, +0.0323396f,
  -0.0062624f, -0.0648297f, +0.3146325f, +0.0033183f, +0.0771147f, -0.1924127f, -0.2747517f, +0.0641311f,
  +0.0384340f, +0.0772504f, +0.4225374f, -0.0856176f, +0.2118014f, +0.2088605f, +0.0929035f, +0.1630969f,
  -0.2491080f, +0.2625194f, +0.0323969f, +0.1545471f, -0.1345690f, -0.1529783f, -0.0241370f, -0.0770790f,
  -0.2611862f, -0.3013076f, -0.0077424f, +0.2327960f, +0.3451608f, +0.1407694f, -0.2379014f, -0.3251954f,
  -0.2853599f, -0.0768696f, -0.3656182f, -0.1686430f, +0.1469096f, +0.1981285f, -0.1848878f, -0.2274628f,
  +0.0796843f, -0.1468489f, -0.1384404f, +0.0479575f, +0.2558793f, -0.0382232f, +0.0291005f, -0.0622801f
);

const float biases[4] = float[4](
  -0.2486155f, -0.0229242f, +0.0672356f, -0.0679583f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer69 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0978100f, +0.1893054f, +0.2815565f, -0.1880119f, -0.0885322f, -0.1689788f, -0.0654789f, -0.3395295f,
  +0.1896923f, +0.0990893f, +0.1019775f, +0.0165807f, +0.0374156f, -0.0197164f, +0.3929133f, -0.2419011f,
  -0.0539298f, +0.0529754f, +0.1415279f, -0.1270710f, +0.1009070f, +0.0290563f, -0.2098738f, -0.1387384f,
  -0.1668298f, +0.2249455f, -0.1314909f, -0.2927039f, -0.1372029f, -0.0416180f, +0.1243624f, +0.0571230f,
  -0.6024310f, -0.0621936f, -0.2331270f, -0.6017139f, +0.2290080f, -0.0799596f, +0.1474663f, -0.4142102f,
  +0.0435678f, -0.2718592f, -0.0717302f, -0.0329735f, +0.0035866f, +0.5223831f, -0.0229184f, +0.0214647f,
  +0.0343774f, -0.0114439f, +0.1159359f, +0.0513868f, +0.3015014f, +0.1281409f, +0.4031473f, -0.0493256f,
  +0.2419752f, +0.0019661f, -0.1906125f, +0.1172937f, +0.2805597f, +0.3993031f, +0.2240894f, +0.0753233f,
  +0.0537136f, -0.2546720f, -0.0006150f, +0.2455173f, +0.3467802f, +0.2344422f, +0.0857221f, +0.2223189f,
  -0.1126224f, +0.1344099f, +0.0712579f, +0.3888906f, +0.1003262f, -0.5164264f, -0.1703665f, -0.1206043f,
  +0.2067389f, -0.1139241f, +0.2148476f, +0.0828222f, +0.0891583f, -0.0420203f, +0.1294805f, +0.0841768f,
  -0.0709599f, -0.1817968f, -0.0830899f, -0.1905447f, -0.2019660f, +0.0326679f, -0.1859203f, -0.0302001f,
  +0.1225334f, +0.5534279f, -0.0032702f, -0.0840111f, +0.3078547f, -0.3080318f, -0.0089752f, -0.0686897f,
  -0.3755841f, -0.2312964f, +0.5423902f, +0.2591771f, -0.2293891f, +0.2000402f, -0.1875924f, +0.4112489f,
  -0.0302530f, +0.1933375f, -0.3067061f, +0.0222701f, +0.0488650f, +0.0925232f, +0.1540795f, -0.1743358f,
  -0.1311331f, +0.2927299f, +0.1426736f, -0.2057440f, +0.2652286f, -0.0888854f, +0.0110708f, +0.0582637f,
  +0.0727037f, -0.6323864f, +0.1371391f, +0.3173640f, -0.1069468f, -0.0868601f, +0.0334767f, -0.2264547f,
  -0.1335087f, -0.0627642f, -0.2428946f, -0.0978830f, -0.1072913f, -0.3144918f, -0.0048620f, +0.2978863f,
  -0.2480299f, -0.0513010f, -0.0360730f, +0.4671174f, +0.1999291f, -0.0433908f, -0.2223220f, +0.2408225f,
  -0.2064068f, -0.1428423f, +0.0068513f, -0.1662719f, -0.2899643f, +0.2164012f, -0.0436774f, +0.0632767f,
  -0.0124254f, -0.0408916f, -0.0501479f, -0.0023720f, -0.0125611f, -0.1118921f, -0.0601368f, +0.0059995f,
  -0.3107941f, -0.3235117f, +0.0626960f, +0.1653076f, -0.0629222f, -0.3087095f, -0.1301138f, +0.2195794f,
  -0.1621792f, -0.1353939f, -0.1869893f, +0.0674893f, -0.1179961f, -0.2010998f, -0.1441497f, +0.1121936f,
  -0.2565603f, -0.1015717f, -0.0428355f, -0.1659975f, +0.0278554f, -0.1497961f, -0.1854930f, -0.0972387f,
  +0.0655301f, +0.0713026f, -0.0390949f, -0.2217114f, -0.1571855f, -0.2229029f, -0.0521464f, -0.2409139f,
  -0.4635771f, -0.1248977f, +0.0171532f, -0.2467007f, -0.2010102f, -0.0905504f, +0.1554786f, -0.1747751f,
  -0.0448389f, -0.1327758f, -0.0582639f, -0.2331989f, -0.0776331f, -0.1236989f, -0.1373941f, +0.1541173f,
  +0.0622897f, +0.1371707f, -0.0795125f, +0.4189788f, -0.1250597f, +0.1125680f, +0.1247481f, +0.2429708f,
  -0.1043357f, -0.3064769f, +0.0136813f, +0.3296451f, +0.1305473f, -0.4325434f, -0.0906111f, +0.1375770f,
  +0.1089888f, -0.1181825f, +0.2633145f, +0.3549702f, -0.2445003f, -0.1601201f, -0.0354901f, -0.1257099f,
  +0.2928651f, +0.4128926f, -0.0010903f, +0.1569636f, -0.1813767f, +0.1538675f, -0.0766937f, +0.2909152f,
  +0.0265986f, -0.4476837f, -0.3843121f, +0.7655336f, -0.1368852f, -0.1951646f, -0.1281085f, -0.5175352f,
  +0.0227644f, +0.1587857f, -0.2288934f, +0.1237339f, +0.0299907f, +0.0762793f, -0.0408892f, -0.4013463f,
  +0.2899579f, +0.0613096f, +0.0155944f, +0.0634540f, +0.1187204f, -0.2406627f, -0.2435734f, +0.0081143f,
  -0.0402824f, +0.1666329f, +0.0036867f, +0.0491884f, -0.1654581f, -0.0816183f, +0.0504299f, +0.0695224f,
  -0.0814635f, +0.1515532f, -0.0287254f, -0.1867585f, -0.1411467f, -0.1259595f, +0.0330000f, -0.0520309f
);

const float biases[4] = float[4](
  +0.0015537f, -0.0391882f, -0.3028814f, -0.0394708f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer70 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1537560f, +0.2017547f, +0.1358417f, -0.1697798f, -0.0623112f, -0.0918086f, +0.2009084f, +0.1064635f,
  -0.0551896f, -0.0316827f, -0.2440061f, +0.4482680f, -0.0205712f, +0.0342307f, +0.5115356f, +0.1664564f,
  +0.0625379f, +0.1357810f, -0.0853085f, +0.1142297f, -0.1380717f, +0.1022398f, +0.2781131f, -0.1128111f,
  +0.2449321f, -0.0435319f, -0.2983576f, -0.0452625f, -0.0878691f, +0.2995921f, +0.5236079f, -0.1037350f,
  +0.0237458f, +0.0764901f, +0.0479906f, -0.1102953f, +0.3900123f, -0.4676091f, +0.6906304f, -0.0199091f,
  +0.2660604f, -0.0990361f, -0.0302099f, +0.1450212f, -0.2502904f, +0.2703314f, +0.6045513f, -0.2170908f,
  -0.0531785f, -0.1717736f, +0.0646424f, -0.0326520f, +0.0979830f, +0.0449689f, +0.2129901f, -0.0465603f,
  +0.0574481f, +0.0203600f, -0.0181661f, +0.0973211f, +0.1342379f, -0.1897122f, +0.1555724f, +0.0666156f,
  +0.0250996f, +0.0758439f, +0.1110759f, +0.1259415f, -0.2010651f, +0.0516988f, +0.2539689f, -0.1974196f,
  -0.1400848f, -0.0900654f, +0.0121972f, -0.0350162f, +0.4430471f, -0.2378429f, +0.1463885f, -0.1036221f,
  +0.1394071f, -0.1541158f, +0.3060765f, +0.0060961f, +0.1246912f, +0.1480687f, +0.0703012f, -0.2309057f,
  -0.0820358f, -0.1336659f, -0.0061927f, -0.1338263f, +0.1846932f, +0.2729787f, +0.0826019f, +0.0827807f,
  -0.3247148f, +0.1423149f, +0.0256682f, +0.0169311f, +0.2744231f, +0.0368872f, +0.1935461f, -0.1165688f,
  -1.2343855f, +0.0320807f, +0.1193780f, +0.1122255f, +0.1832219f, -0.2169558f, +0.1052359f, +0.5662745f,
  +0.6043872f, -0.1790090f, -0.0048797f, +0.3219152f, -0.1358614f, +0.4070340f, +0.1990963f, -0.1037617f,
  +0.1369667f, +0.0948038f, +0.0474567f, +0.0456962f, -0.0802488f, +0.1968722f, -0.0548479f, -0.0922957f,
  +0.0853539f, +0.2254377f, +0.0314082f, -0.2865045f, -0.2499952f, -0.0599625f, +0.1991293f, +0.1887470f,
  +0.1529051f, +0.1861348f, -0.1508740f, +0.0175117f, -0.1259283f, -0.0457797f, -0.0325489f, +0.2091304f,
  +0.0776278f, -0.0424671f, +0.0195220f, -0.0453595f, +0.1722093f, -0.2036469f, +0.0856250f, -0.0896952f,
  +0.1558600f, +0.2252759f, -0.3561392f, +0.1829284f, -0.0931745f, +0.2314616f, +0.1360048f, -0.0404442f,
  -0.0690056f, +0.0756192f, -0.0725608f, +0.0765223f, +0.0662717f, -0.0350816f, +0.0131036f, +0.1933478f,
  -0.1553808f, -0.2789509f, -0.3427244f, +0.1715432f, +0.0340047f, +0.1443397f, -0.2666909f, +0.0045691f,
  -0.2120714f, +0.2150266f, +0.0327668f, +0.1794255f, +0.1267912f, -0.1321507f, -0.0840377f, +0.1537542f,
  -0.3046089f, +0.2769139f, -0.1976750f, +0.0472031f, +0.0854689f, -0.1021157f, +0.0331277f, +0.3633209f,
  +0.0422767f, -0.0867144f, +0.0239723f, -0.0105586f, -0.1682024f, +0.1179850f, +0.1212766f, -0.2731743f,
  -0.3053033f, -0.1267410f, -0.0129914f, -0.0265928f, +0.0382082f, -0.0475353f, -0.2137624f, -0.0465942f,
  -0.3650621f, +0.0835518f, +0.0531114f, -0.0841962f, -0.1924011f, +0.1241813f, -0.0454189f, +0.4544454f,
  -0.1977885f, +0.3499153f, +0.0845373f, -0.0483125f, -0.1066528f, -0.1077940f, +0.1548606f, +0.0334784f,
  -0.1241921f, +0.2705007f, +0.0659691f, +0.1487987f, +0.0243361f, +0.2257440f, -0.0494221f, -0.0091085f,
  -0.0287565f, +0.0349229f, +0.0718465f, +0.0109253f, +0.0137779f, +0.2011454f, -0.1816961f, -0.1046293f,
  +0.1008574f, +0.2610807f, +0.0220588f, -0.0143074f, -0.1610203f, +0.3769785f, +0.1454966f, -0.0489673f,
  +0.5218554f, +0.3167723f, -0.1139514f, -0.2268466f, +0.2496799f, -0.0511519f, +0.0597962f, -0.1178013f,
  -0.2397096f, +0.0810407f, -0.1896346f, -0.3563081f, +0.3508428f, +0.4250439f, -0.2071960f, -0.1215882f,
  +0.3307016f, +0.0374234f, -0.1873343f, -0.1246878f, -0.1189366f, +0.3158964f, -0.0989396f, -0.2271376f,
  +0.5670073f, +0.1587667f, -0.0007121f, -0.2141810f, +0.1502863f, -0.3112386f, +0.3110572f, +0.1247681f,
  -0.1934379f, -0.1426576f, -0.2784560f, -0.1409761f, +0.4213601f, -0.1931214f, -0.1485835f, -0.1572374f
);

const float biases[4] = float[4](
  -0.0516218f, -0.0931465f, +0.0035266f, -0.0246503f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer70 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0574216f, -0.1435389f, -0.2523077f, -0.0829046f, +0.0109233f, +0.0216154f, +0.4386871f, -0.0395043f,
  -0.1932549f, +0.0829210f, +0.1689459f, +0.0567933f, -0.0287050f, +0.0589702f, +0.3538339f, +0.0964807f,
  +0.0097411f, +0.0216029f, +0.1148826f, +0.1531408f, +0.0218816f, -0.2184534f, +0.2510161f, +0.0857930f,
  -0.1283630f, -0.0907577f, -0.1455953f, -0.0656769f, +0.2690987f, -0.0977198f, +0.3655838f, -0.2124428f,
  +0.0142219f, -0.1053987f, -0.2136802f, -0.0415238f, -0.0663791f, -0.0118704f, +0.5298157f, -0.0678631f,
  +0.1002187f, +0.3121635f, -0.3430904f, +0.2323812f, -0.0387423f, +0.2739151f, +0.2045386f, +0.1947019f,
  -0.2646060f, -0.0141300f, -0.0244198f, +0.0426746f, +0.2853365f, -0.0320300f, +0.2049902f, +0.1511036f,
  +0.3055286f, -0.0117389f, +0.0686350f, -0.3186124f, -0.1102090f, +0.3036245f, +0.1048612f, -0.1956152f,
  -0.1817843f, +0.0125090f, +0.0386159f, +0.0943936f, +0.1693377f, -0.0041339f, +0.0757889f, +0.4184200f,
  -0.0058384f, -0.0080717f, -0.0637656f, +0.0574852f, -0.0695213f, -0.2298028f, +0.1806106f, +0.2503725f,
  +0.2490051f, +0.2923415f, -0.2075085f, +0.2902665f, -0.0917543f, +0.4504794f, +0.2502607f, +0.0864282f,
  +0.0383153f, -0.0219799f, -0.0386594f, +0.4209454f, +0.1040917f, +0.1232159f, +0.1656861f, +0.0475234f,
  +0.2135540f, -0.0287143f, -0.1615557f, +0.0442112f, -0.0399815f, -0.1258076f, -0.1065245f, -0.1874130f,
  +0.0358049f, +0.4625782f, -0.1117248f, -0.1803618f, +0.2732734f, -0.2822810f, +0.0412166f, -0.1337860f,
  +0.3920474f, -0.1543368f, -0.3046876f, -0.0566893f, +0.1416354f, +0.1544665f, -0.1071727f, -0.1423992f,
  +0.1180510f, -0.3301336f, -0.2823319f, -0.1165257f, -0.0824582f, -0.0354497f, -0.0218678f, -0.2389891f,
  +0.0807689f, -0.2595868f, -0.0703616f, +0.1976234f, +0.2361101f, -0.0626803f, -0.1093522f, -0.1740806f,
  +0.1755723f, -0.2315815f, -0.0916216f, +0.3693994f, +0.2762547f, +0.1902739f, +0.0354719f, -0.0614234f,
  +0.1226659f, -0.0548498f, -0.0318599f, -0.0780890f, +0.0660532f, +0.0999126f, +0.0629270f, -0.0027337f,
  +0.1068980f, +0.2404139f, +0.1360526f, -0.3028448f, -0.2019831f, +0.2171816f, +0.0294956f, -0.2638595f,
  -0.0143280f, -0.1392452f, +0.0459134f, -0.1092799f, -0.2513849f, -0.3640258f, +0.0648652f, +0.1666592f,
  +0.0490842f, -0.2232713f, +0.1028795f, -0.0489729f, +0.1978867f, +0.0677656f, +0.2078166f, +0.1114600f,
  +0.0031535f, -0.0658231f, +0.0802383f, -0.2832579f, -0.0887699f, -0.1649079f, +0.3347155f, +0.1186986f,
  +0.0186395f, +0.1607671f, -0.1727634f, -0.3185739f, -0.0543704f, +0.4387907f, -0.2047379f, +0.0312109f,
  +0.3545986f, -0.2740248f, +0.1173960f, -0.0890452f, +0.2770132f, -0.1313155f, -0.0668111f, +0.0985842f,
  +0.2323380f, +0.1345566f, -0.0050895f, -0.0178542f, -0.4587032f, +0.2673195f, -0.1714859f, +0.0283856f,
  -0.0723799f, -0.0321533f, -0.1205154f, +0.1267156f, -0.0793450f, -0.2575143f, -0.0121731f, +0.1481788f,
  +0.0354051f, +0.0147516f, -0.0800629f, +0.0816721f, -0.0478314f, +0.2633275f, -0.0363227f, -0.2017438f,
  -0.1521236f, +0.4597509f, +0.0731247f, -0.3463527f, +0.0768914f, +0.0314930f, +0.1531146f, -0.3573344f,
  -0.1244682f, -0.0911809f, +0.1983519f, -0.2062265f, +0.0626835f, -0.0400916f, +0.1033957f, -0.0587043f,
  -0.2708334f, -0.1912231f, +0.1085147f, +0.0579951f, +0.1010825f, -0.0284668f, -0.1119672f, +0.2503716f,
  -0.4568288f, +0.2884732f, -0.0437384f, -0.0489002f, +0.3017790f, +0.1741951f, -0.0303057f, +0.2558943f,
  -0.0103915f, -0.0306520f, -0.1502539f, +0.0753745f, +0.0545004f, -0.1068662f, -0.0429058f, -0.0925818f,
  -0.1490515f, -0.0609792f, -0.2673087f, -0.0610741f, +0.0722136f, -0.1580386f, +0.0008249f, -0.0056909f,
  +0.1989136f, -0.2549918f, -0.0085729f, +0.2137007f, +0.4384622f, +0.1122642f, -0.1366615f, -0.3413669f,
  +0.1598249f, -0.2942245f, -0.0192632f, +0.1675428f, +0.4395560f, -0.2379860f, +0.0656232f, -0.2081757f
);

const float biases[4] = float[4](
  +0.0225938f, -0.0246819f, +0.0144764f, -0.0259981f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer71 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1582714f, +0.1725148f, -0.0003170f, +0.2152987f, -0.0066706f, -0.0124200f, +0.1634278f, -0.0586802f,
  -0.2529777f, +0.0503989f, +0.1190263f, -0.2037104f, -0.3111835f, +0.1307327f, -0.0376007f, -0.0600946f,
  +0.1926225f, +0.0203758f, +0.1785890f, -0.2239380f, -0.4249012f, -0.2166217f, +0.0332955f, -0.1133923f,
  +0.1873197f, +0.2783000f, -0.0214443f, -0.3219098f, +0.2466015f, -0.1612866f, -0.0297151f, +0.0514785f,
  -0.1377072f, +0.0314815f, -0.0259570f, +0.0836060f, +0.0287088f, -0.1239749f, -0.1856333f, -0.1402306f,
  +0.1340842f, -0.0116418f, +0.3065620f, +0.3919509f, -0.0970589f, -0.0913678f, -0.2034448f, -0.0270552f,
  -0.1350556f, +0.0575059f, -0.1860727f, -0.1825995f, +0.1805348f, +0.2793172f, +0.2147751f, -0.0335530f,
  -0.2205883f, -0.1769831f, +0.2654974f, -0.0890962f, -0.3179116f, -0.0560184f, +0.3741196f, -0.1828267f,
  +0.0884924f, -0.2807358f, -0.1644028f, -0.0535409f, -0.2086974f, +0.0926914f, -0.2108103f, +0.2609686f,
  -0.0127199f, +0.2078896f, -0.2211380f, -0.1554697f, +0.1028137f, +0.1360510f, +0.1379746f, +0.1203134f,
  -0.1023291f, -0.3111580f, -0.1831948f, +0.2199106f, +0.0629462f, -0.1340260f, -0.0572524f, +0.0333463f,
  -0.0768805f, -0.0791881f, -0.1937666f, +0.0972115f, +0.0693413f, -0.0715785f, -0.2088683f, +0.0940247f,
  -0.1312882f, -0.0356644f, +0.0285855f, -0.2129620f, +0.0481787f, +0.1153523f, +0.2517877f, -0.2305565f,
  +0.0838014f, +0.1839522f, -0.4173262f, +0.2447086f, -0.3834769f, -0.1044309f, -0.0989891f, +0.1736456f,
  +0.1097692f, +0.0147029f, -0.0705694f, +0.0370260f, +0.0524362f, +0.2126970f, +0.1093170f, +0.0661161f,
  -0.0563797f, -0.3059928f, -0.0770118f, +0.0400963f, +0.1938218f, +0.1857476f, +0.2064508f, +0.0908730f,
  +0.2626503f, +0.0661262f, -0.0900290f, +0.2637000f, -0.0892623f, +0.2627648f, -0.1246927f, -0.4094315f,
  -0.0797342f, -0.0612408f, +0.1693314f, +0.1916491f, +0.0952147f, +0.1369382f, +0.0574635f, -0.0393128f,
  +0.3539625f, +0.1048298f, +0.0400908f, -0.2509707f, -0.3654020f, -0.1846100f, +0.3125126f, +0.0468530f,
  +0.2881963f, -0.0722787f, +0.1008842f, +0.0161253f, -0.0640333f, -0.1402706f, +0.1861228f, -0.0455599f,
  +0.0030558f, -0.0479366f, +0.0475682f, +0.0660011f, -0.0396659f, +0.0492434f, -0.0423230f, +0.0050091f,
  +0.1785057f, +0.1494035f, +0.0488086f, -0.0280622f, +0.1676858f, -0.3715827f, +0.0713557f, +0.0527326f,
  -0.0044655f, -0.0681181f, +0.0743534f, +0.1129180f, +0.1482419f, -0.0499247f, +0.2845350f, -0.0347224f,
  +0.0111145f, -0.0118965f, -0.0166909f, +0.0292500f, -0.0447399f, +0.0546016f, +0.0016793f, +0.0110376f,
  -0.2870094f, -0.1791169f, -0.2041489f, +0.0609982f, +0.2682358f, +0.4620889f, -0.1421684f, -0.5092867f,
  -0.0743295f, -0.1046105f, -0.0914709f, +0.0799543f, +0.3355341f, +0.3459249f, -0.1216989f, -0.1983589f,
  -0.0052904f, -0.0946752f, -0.0467549f, -0.1042600f, +0.1654256f, -0.0443233f, -0.0849293f, +0.0772653f,
  -0.2708863f, -0.0002722f, +0.1075098f, +0.3834074f, -0.1184891f, -0.1867692f, -0.0488354f, +0.0226931f,
  -0.0240695f, -0.1076596f, +0.2922036f, +0.0785919f, +0.1896289f, -0.1999449f, +0.0151166f, -0.1822050f,
  +0.0722144f, -0.0696942f, +0.0812223f, +0.2588257f, -0.2052877f, +0.0597487f, +0.2163571f, -0.0781595f,
  +0.1166084f, +0.0333897f, -0.1783317f, +0.1309591f, +0.0229570f, -0.2238403f, -0.2063308f, +0.2059508f,
  +0.2097076f, -0.2846111f, +0.2801011f, +0.0079888f, -0.1710376f, -0.2936841f, -0.5761854f, -0.1820649f,
  +0.1475758f, -0.2848927f, -0.0304976f, -0.2828194f, -0.0044865f, +0.1485568f, -0.0357771f, -0.0535318f,
  +0.1418737f, -0.0691254f, -0.1999841f, -0.0202382f, +0.0767080f, -0.1017434f, +0.0193416f, -0.0129264f,
  -0.1050101f, +0.1075598f, -0.0772329f, -0.0005717f, +0.2221403f, +0.0293126f, -0.0149034f, +0.1755786f,
  +0.1667249f, -0.2449806f, +0.0458724f, -0.0556567f, +0.1280259f, +0.2657569f, +0.1824827f, +0.1603094f
);

const float biases[4] = float[4](
  -0.0704979f, -0.0089411f, +0.0596756f, +0.1054354f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer71 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0962991f, +0.0301933f, +0.0382990f, -0.4515786f, +0.2287148f, +0.0189158f, -0.2369716f, -0.2358309f,
  -0.0358561f, +0.4660209f, +0.3182769f, -0.0961472f, -0.1251347f, +0.0218987f, +0.1438923f, +0.1122903f,
  -0.0035744f, +0.2138115f, +0.2948360f, -0.1283934f, -0.3056000f, -0.2329168f, -0.2479068f, +0.0087699f,
  +0.3948955f, +0.1980152f, +0.1810082f, -0.0830205f, +0.2082953f, +0.1529900f, -0.1792297f, -0.3706331f,
  -0.0634312f, +0.0113192f, +0.5841080f, -0.4301007f, -0.0533164f, -0.3229870f, +0.1735142f, +0.3952351f,
  -0.0015096f, +0.1046836f, +0.0961262f, +0.1932872f, -0.0035193f, +0.1257100f, -0.2761068f, -0.3590577f,
  +0.2916507f, +0.3495221f, +0.3159322f, -0.2571308f, +0.1921533f, -0.3612611f, +0.0377521f, -0.4257632f,
  +0.2050981f, +0.1313306f, +0.3264034f, +0.0850107f, -0.3414716f, -0.1744000f, +0.0334357f, +0.4504090f,
  +0.0221455f, +0.0003393f, +0.0016012f, -0.0997558f, -0.1243932f, -0.2482123f, -0.1492566f, -0.3001473f,
  +0.1642175f, +0.0842852f, +0.0242264f, -0.3166715f, -0.2387111f, -0.0299376f, +0.2242259f, -0.2023272f,
  -0.0388378f, +0.0647388f, +0.1478023f, -0.4668153f, +0.2780420f, +0.0378371f, +0.4461672f, -0.0669526f,
  -0.0490084f, +0.0703934f, -0.1034248f, +0.1813580f, +0.0763298f, +0.0122621f, +0.0992793f, -0.0927428f,
  -0.0828670f, -0.1156544f, -0.4139973f, -0.3431914f, -0.1240481f, +0.1815381f, +0.1081865f, -0.1987366f,
  -0.2360987f, -0.3263172f, -0.4703150f, +0.1588405f, +0.0432362f, +0.0399849f, -0.0617712f, -0.1096988f,
  -0.1857116f, -0.0564579f, -0.1245718f, -0.0263732f, +0.1992030f, +0.0450921f, +0.0861016f, +0.0873143f,
  -0.0834536f, -0.1034833f, -0.2615921f, -0.0594474f, -0.3377091f, +0.0331702f, +0.1498748f, -0.0544780f,
  -0.2019548f, -0.0260016f, +0.2105629f, -0.1452581f, -0.3268234f, +0.0174007f, +0.0653477f, +0.0448569f,
  -0.2966379f, +0.0913755f, -0.1989254f, -0.1178183f, +0.0137517f, +0.2381333f, -0.0150731f, +0.1060882f,
  +0.0425420f, +0.1443930f, -0.1284074f, +0.0510606f, +0.0046601f, +0.0583445f, -0.1530529f, +0.1137998f,
  -0.0390190f, -0.0596150f, -0.2733814f, +0.2413874f, +0.1285446f, +0.1342620f, -0.3528821f, +0.3321157f,
  +0.4750870f, -0.3127866f, +0.1082088f, +0.1482390f, -0.2975927f, -0.0028918f, +0.1927985f, +0.0389546f,
  +0.0686123f, -0.1174766f, +0.1796532f, +0.0474278f, +0.0798026f, -0.1029769f, -0.0757754f, -0.1716055f,
  -0.5643849f, +0.1129294f, -0.3746733f, -0.0340011f, +0.1434058f, +0.2639683f, +0.0530423f, +0.3544548f,
  +0.0531030f, -0.4720348f, +0.1119702f, +0.1701912f, -0.2368773f, +0.2503675f, +0.2452540f, -0.0253427f,
  -0.0922817f, -0.1001270f, +0.0117780f, -0.0186291f, -0.1436967f, -0.1505533f, +0.0061918f, -0.0385258f,
  -0.1968213f, +0.2579460f, -0.1851568f, -0.1534034f, +0.0450678f, -0.0616081f, +0.0680717f, -0.0031785f,
  +0.0678386f, +0.1134691f, +0.0168058f, -0.2445853f, +0.0805299f, +0.0555000f, -0.1671831f, -0.0027338f,
  +0.0344215f, +0.1044770f, +0.0936677f, -0.3254531f, +0.0086833f, +0.3124435f, -0.0873181f, -0.0546742f,
  -0.0438552f, +0.5197503f, +0.0683969f, -0.3186746f, +0.0863460f, +0.3608862f, -0.2016867f, +0.0046356f,
  +0.0625965f, +0.4069209f, +0.2374689f, -0.0535011f, +0.1281334f, -0.0205227f, -0.3808424f, -0.4229630f,
  +0.0311091f, -0.4136544f, +0.1940860f, -0.1473537f, -0.0685724f, -0.1302881f, +0.2635624f, -0.1806483f,
  +0.3133501f, +0.1113936f, +0.2808011f, -0.4925531f, -0.1309301f, -0.1353198f, +0.3870906f, +0.2840987f,
  -0.0806529f, -0.0203232f, +0.2929772f, -0.4018066f, -0.2494328f, +0.1181333f, -0.1958788f, +0.4768541f,
  -0.0018598f, -0.1956537f, +0.2732913f, +0.0119818f, -0.0654475f, -0.3336277f, +0.1468540f, -0.2027703f,
  +0.2131680f, -0.0362835f, -0.1209875f, +0.0256622f, +0.2071739f, -0.2019765f, -0.1765848f, -0.4297819f,
  +0.0508537f, +0.0209873f, +0.0863708f, -0.0560889f, -0.0569322f, -0.1665558f, +0.0781134f, -0.0797649f
);

const float biases[4] = float[4](
  -0.0510870f, +0.1975776f, +0.0332019f, -0.0028785f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer72 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0131489f, +0.0559793f, +0.0958042f, -0.3620109f, +0.1190119f, +0.3051079f, +0.0877995f, +0.4465683f,
  -0.0382177f, -0.2096430f, -0.2126842f, -0.0387911f, +0.1118642f, +0.3053795f, +0.2396809f, +0.6102404f,
  +0.0794214f, -0.0130460f, -0.0973824f, -0.0862222f, -0.0345463f, +0.1678550f, -0.0574092f, -0.0025731f,
  +0.0142107f, +0.1663819f, +0.0028494f, -0.0973988f, +0.0856833f, +0.1934748f, -0.1979375f, +0.0585455f,
  -0.0317391f, +0.0540877f, +0.0030588f, -0.3169734f, -0.0030271f, -0.1526148f, +0.1628403f, +0.1282560f,
  +0.1410760f, +0.1415588f, -0.0592774f, -0.0131607f, -0.0667137f, -0.2054789f, -0.1560771f, +0.0700787f,
  -0.1332757f, +0.0904957f, -0.0135011f, +0.0982478f, -0.0662082f, +0.0022922f, -0.1549646f, +0.0714425f,
  -0.3388917f, +0.1959158f, -0.2252519f, +0.0769977f, -0.0436357f, +0.1010546f, +0.1399292f, +0.1860818f,
  +0.0220009f, +0.0148444f, -0.0992948f, +0.4485456f, +0.0539636f, -0.2714776f, +0.2046646f, +0.0275312f,
  -0.1136535f, +0.1506669f, +0.1455852f, +0.0877449f, +0.0257976f, +0.1049266f, -0.2488305f, -0.1190031f,
  -0.0301875f, -0.0450046f, +0.2755828f, +0.0830457f, -0.1359565f, -0.1123749f, -0.3208475f, +0.0470376f,
  +0.0429644f, +0.1253468f, +0.4890301f, -0.1151268f, +0.1066477f, +0.3645681f, +0.0475819f, -0.1129266f,
  -0.0530698f, -0.1101476f, +0.0252886f, +0.1135344f, +0.0109406f, +0.0656487f, +0.0411170f, -0.1959474f,
  -0.2411706f, -0.0528137f, -0.1310667f, -0.1958643f, -0.0994011f, +0.0359966f, -0.0470643f, +0.2816498f,
  -0.1687021f, -0.0132043f, -0.4315105f, -0.1276574f, +0.2223032f, +0.4076849f, +0.0698102f, -0.2452654f,
  -0.1689652f, +0.0845860f, -0.0760161f, -0.2939139f, -0.1916077f, -0.1519197f, +0.0994699f, +0.0710852f,
  -0.0160704f, +0.3196364f, +0.0529824f, -0.1890418f, +0.0933227f, +0.0617058f, -0.1872171f, +0.1078310f,
  -0.3046634f, -0.0310588f, -0.0266145f, -0.1751936f, +0.0218421f, +0.3275427f, -0.0940981f, +0.0822815f,
  +0.3424234f, -0.2078827f, -0.0257833f, -0.1146964f, -0.0441655f, -0.2210155f, -0.0861348f, +0.1130759f,
  +0.0488410f, +0.0272220f, -0.0822110f, -0.2175129f, +0.1832131f, -0.1576357f, +0.1337553f, -0.1037985f,
  -0.1757040f, +0.1005104f, -0.2027711f, +0.1052682f, -0.1357468f, +0.0452409f, -0.1108080f, +0.1004847f,
  -0.3157204f, +0.0759894f, -0.0741811f, -0.0783500f, +0.1149648f, +0.1877527f, +0.0001896f, +0.1171533f,
  +0.0664289f, +0.2929130f, -0.1509373f, -0.2662203f, -0.2240545f, +0.0766707f, +0.2822482f, +0.1539942f,
  -0.0507087f, -0.0470025f, +0.0762933f, +0.1234856f, -0.0136546f, +0.4102282f, -0.2092960f, +0.5050430f,
  -0.2656801f, +0.1332392f, +0.0898746f, +0.1692689f, +0.1209434f, -0.0194809f, +0.0332447f, -0.1176478f,
  -0.3478528f, +0.0553647f, -0.0448465f, -0.3482047f, -0.4402460f, -0.0170099f, +0.1761159f, +0.1429430f,
  -0.3992516f, +0.1103249f, +0.0679245f, -0.0548766f, +0.0787279f, -0.0829043f, -0.1365902f, +0.0946973f,
  +0.2453984f, -0.2614747f, -0.0315443f, -0.2073816f, -0.0555293f, +0.1574930f, +0.1318854f, +0.2226061f,
  +0.1979456f, -0.2552699f, +0.0369546f, -0.1872440f, +0.2383807f, -0.1812737f, -0.0799339f, -0.1063991f,
  -0.1863011f, +0.1490034f, -0.1664474f, -0.1272889f, +0.0391076f, -0.2968316f, -0.1866734f, +0.0185046f,
  -0.3921727f, -0.1756984f, +0.0618895f, +0.0738864f, +0.1843884f, -0.0713234f, +0.0190906f, -0.0606695f,
  -0.0576356f, -0.3909825f, -0.1018259f, -0.0256303f, +0.0933305f, +0.1130410f, -0.1005464f, +0.0081527f,
  +0.0221574f, +0.2220108f, +0.4485433f, -0.0228393f, -0.1026011f, +0.0097560f, +0.0210172f, +0.0264543f,
  -0.0817784f, -0.0539074f, -0.0382000f, -0.4600688f, +0.1056569f, -0.0538673f, -0.3015299f, +0.0333043f,
  -0.1678951f, -0.2592498f, +0.1708082f, -0.0470607f, +0.9064472f, +0.3575824f, -0.3687649f, -0.0366668f,
  -0.2406802f, -0.1152554f, +0.4607983f, -0.1464132f, -0.1711007f, +0.1234304f, -0.3392124f, -0.1156251f
);

const float biases[4] = float[4](
  -0.0445049f, -0.1244419f, -0.0650466f, -0.0416546f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer72 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1102173f, +0.0411172f, +0.0543749f, -0.3299566f, +0.0643048f, +0.0966604f, -0.0477060f, +0.3247628f,
  +0.3241698f, +0.0770530f, +0.0203079f, -0.1296850f, -0.0154921f, +0.1492008f, -0.0556630f, +0.3500546f,
  +0.1298163f, -0.0742785f, -0.2325903f, -0.0685486f, +0.1224366f, +0.0306654f, -0.1574175f, +0.0552575f,
  +0.1558555f, -0.0042817f, +0.0926190f, -0.1085853f, -0.0596654f, +0.1656490f, +0.2773130f, +0.1723159f,
  -0.0668152f, +0.1337489f, -0.1500462f, +0.0606978f, -0.0911599f, +0.0475591f, -0.0955138f, +0.2422431f,
  -0.1437227f, +0.0146233f, +0.0372797f, +0.0430343f, +0.1868181f, +0.1439297f, -0.1729673f, +0.2949030f,
  +0.2095505f, -0.0314226f, +0.1007933f, +0.0035408f, +0.0928600f, -0.0149369f, +0.0637448f, +0.1424017f,
  +0.0333015f, +0.0138627f, +0.0332755f, -0.1595055f, -0.1038178f, -0.1189910f, +0.0686068f, -0.1839699f,
  +0.0879375f, -0.2454825f, -0.0085477f, +0.0666407f, +0.2519170f, -0.1272402f, -0.1262006f, +0.3089170f,
  -0.0916821f, -0.2130823f, -0.0228395f, -0.0634625f, +0.1113013f, -0.3328843f, -0.0073667f, -0.1331473f,
  +0.0084869f, -0.3191204f, -0.0976034f, +0.1322184f, -0.0051833f, -0.0357393f, -0.1610312f, +0.1327337f,
  -0.1563474f, +0.0101006f, -0.4252225f, +0.3813149f, +0.0463297f, +0.0784274f, +0.2244428f, -0.1863397f,
  -0.2296503f, -0.2772294f, -0.0606918f, -0.0301332f, -0.0475753f, -0.0268963f, -0.2709407f, -0.1443371f,
  -0.3511789f, +0.1118976f, +0.2235845f, +0.1926860f, -0.4814028f, +0.3816484f, -0.3764560f, -0.5322964f,
  +0.4510362f, +0.2883959f, +0.1951256f, +0.1576570f, +0.0448580f, +0.2085876f, +0.1353022f, -0.3951389f,
  +0.3147877f, +0.1012505f, +0.0573911f, +0.0122844f, -0.1653277f, -0.0058612f, -0.1275975f, +0.0075739f,
  +0.3000068f, +0.1425489f, +0.1157818f, +0.2049805f, -0.1366224f, -0.0987462f, -0.1476939f, -0.2431047f,
  +0.1712509f, -0.0317921f, -0.0027022f, +0.2633585f, -0.1066407f, +0.0161603f, -0.0585887f, -0.2956327f,
  +0.2181450f, -0.1067647f, +0.1775349f, -0.0750074f, -0.1073761f, +0.1405965f, +0.2014121f, -0.0014167f,
  +0.2782884f, -0.0749809f, +0.1483275f, +0.2851141f, -0.0604444f, -0.1828831f, -0.2403234f, -0.1508999f,
  +0.0052983f, -0.1034229f, -0.0862476f, -0.0548415f, +0.1319712f, +0.1118970f, -0.0575777f, +0.0032555f,
  -0.0087620f, -0.0460281f, +0.0584151f, +0.0988564f, -0.0609647f, -0.0320736f, -0.2576787f, +0.2250419f,
  +0.0035968f, +0.3422390f, -0.0075999f, +0.3611344f, +0.0680669f, -0.1930922f, -0.1021170f, +0.8763891f,
  -0.0752173f, -0.0751413f, +0.1971838f, +0.0695175f, +0.4947879f, -0.2961836f, +0.0778904f, +0.2774040f,
  +0.1170772f, +0.0243085f, +0.1204898f, -0.1274779f, +0.0283977f, +0.0336243f, +0.1968697f, +0.0687922f,
  +0.1643502f, +0.2757234f, -0.1674184f, +0.1084507f, +0.3341879f, -0.4235809f, +0.3569036f, -0.0084565f,
  -0.3081087f, -0.0236126f, -0.1751870f, +0.0849364f, +0.3344654f, -0.1182589f, +0.0266735f, +0.1554568f,
  +0.2731004f, -0.0983312f, -0.0859549f, -0.0548419f, +0.0351893f, -0.1688957f, -0.0607289f, +0.3652225f,
  +0.2963745f, +0.3645758f, +0.0927114f, -0.1663973f, +0.3863167f, +0.2342475f, +0.0289327f, -0.3099140f,
  -0.1264735f, -0.1437787f, +0.4202723f, +0.2813562f, +0.0601849f, +0.0426290f, -0.0820433f, +0.2397323f,
  +0.2035509f, +0.1040493f, -0.0090138f, -0.0104375f, -0.0754699f, +0.0653773f, -0.1488260f, +0.1509339f,
  +0.2238398f, -0.0636660f, -0.0146713f, +0.0526423f, +0.5050436f, -0.2771807f, -0.3017057f, +0.3819676f,
  +0.0359638f, +0.1526155f, +0.0238406f, -0.0831353f, -0.2950138f, -0.0149167f, +0.1006177f, -0.0901442f,
  +0.5515608f, -0.0827231f, +0.1012315f, +0.2106834f, +0.1731972f, +0.0268194f, +0.2181281f, -0.0277793f,
  +0.4315904f, -0.1324045f, +0.0482941f, +0.1272796f, +0.3114931f, +0.1363807f, -0.3792544f, -0.0510540f,
  +0.2658318f, -0.1599530f, +0.1724706f, +0.0529220f, -0.0362700f, +0.1427627f, -0.0436224f, -0.2072658f
);

const float biases[4] = float[4](
  -0.0079479f, -0.0350874f, -0.0216950f, +0.0397524f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer73 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0115736f, +0.1461134f, -0.0827311f, +0.0412763f, +0.2112297f, -0.0023366f, +0.0977925f, +0.1333714f,
  +0.0388235f, +0.1338596f, +0.1008480f, +0.0498042f, -0.0441234f, -0.0719065f, -0.2007470f, -0.3114739f,
  +0.0856410f, -0.0234857f, +0.0694779f, -0.1027583f, +0.0581841f, -0.1551903f, -0.0895840f, -0.1491962f,
  -0.2946833f, +0.0214649f, -0.1552454f, +0.1154375f, +0.3698462f, -0.2566461f, -0.0989094f, +0.0695063f,
  +0.0242357f, -0.1058958f, -0.2742790f, +0.0153122f, +0.3134483f, -0.1098322f, -0.3449486f, +0.0328509f,
  +0.0470764f, -0.3240148f, -0.0078996f, -0.1743562f, -0.0658249f, -0.1436076f, -0.2664300f, -0.0515489f,
  -0.0194212f, -0.1367215f, +0.2204688f, +0.1676573f, +0.2940324f, +0.2103430f, +0.1673342f, -0.0226111f,
  -0.0505602f, -0.1530426f, -0.1806921f, -0.0789413f, +0.0010373f, +0.3093823f, +0.3907155f, -0.0426107f,
  +0.2585949f, -0.0953893f, +0.0453268f, -0.0180588f, +0.0663216f, +0.2351621f, -0.1000367f, +0.0759931f,
  +0.3406609f, +0.0408761f, +0.1135674f, -0.0127296f, -0.2815226f, -0.1006947f, -0.1130064f, -0.1254073f,
  -0.2762374f, +0.1190129f, +0.2241208f, +0.1825635f, -0.0248220f, +0.1307366f, -0.0413147f, -0.0774861f,
  +0.0615626f, -0.1581559f, +0.1501836f, -0.2308202f, +0.1550914f, +0.0359237f, -0.0895776f, +0.0701140f,
  +0.1241028f, +0.3738062f, +0.2371350f, +0.1154953f, -0.3101121f, +0.0754791f, +0.1389583f, +0.0788327f,
  +0.1245296f, +0.1592891f, +0.0356754f, +0.2315431f, +0.2567886f, +0.0549416f, -0.0192798f, -0.1299811f,
  -0.0586528f, +0.1523874f, -0.2785747f, -0.2120182f, +0.0473047f, -0.1531911f, -0.2412817f, +0.2321473f,
  +0.1388037f, +0.3180073f, +0.0709617f, -0.0767776f, +0.1930199f, -0.0729039f, -0.1006216f, +0.0601518f,
  +0.1203175f, -0.0031432f, +0.0483420f, -0.1071807f, +0.2287738f, -0.0239060f, +0.0254158f, -0.3216692f,
  +0.0125877f, -0.0230862f, +0.1108289f, -0.0694218f, +0.3128356f, +0.0938080f, -0.0658566f, -0.0815333f,
  +0.0982483f, -0.0605667f, +0.0315429f, +0.0802888f, -0.0097474f, -0.2044030f, +0.0083868f, -0.2328512f,
  +0.5393600f, +0.0781306f, +0.3489771f, +0.0311293f, -0.5082266f, +0.3006529f, -0.0343428f, -0.0667068f,
  +0.1243965f, +0.1626151f, +0.0171276f, +0.3922231f, -0.1005390f, -0.2831806f, -0.1748619f, -0.1323682f,
  -0.3306210f, -0.4230343f, +0.1720730f, -0.1440746f, +0.2789944f, -0.0472429f, -0.2029499f, -0.0028109f,
  +0.2411735f, +0.2960357f, -0.1853911f, -0.1788326f, -0.0329611f, +0.2559212f, -0.0371774f, +0.5327246f,
  -0.3994705f, +0.2951334f, -0.1048415f, -0.1188815f, +0.4197918f, +0.0531792f, -0.1767071f, -0.1272826f,
  -0.1312391f, +0.1536352f, -0.0558515f, -0.0141884f, +0.0931442f, -0.1131266f, +0.1672623f, +0.2056356f,
  +0.2445572f, -0.0380989f, -0.0301469f, -0.0851042f, +0.0062447f, +0.1968152f, -0.1285196f, +0.0503763f,
  -0.0829629f, -0.1668940f, +0.1717687f, +0.0529955f, +0.0238959f, -0.0862986f, +0.0567577f, +0.0026602f,
  +0.1952032f, -0.0156551f, -0.0764085f, -0.0632470f, +0.1246287f, +0.2551710f, +0.0426957f, -0.0130618f,
  -0.0713339f, +0.0751081f, +0.1486681f, +0.0613921f, -0.0700810f, -0.0146204f, +0.2018156f, -0.2933841f,
  +0.1958302f, -0.2577385f, +0.2436803f, -0.1260887f, +0.0654874f, +0.1182007f, -0.0718596f, -0.0205770f,
  +0.1736245f, -0.2148102f, +0.1278302f, +0.2388216f, +0.0852602f, +0.0897517f, +0.0668995f, -0.0765215f,
  -0.2270199f, -0.1697081f, +0.1572619f, -0.0731491f, +0.0247861f, -0.1771160f, -0.2086358f, -0.1042087f,
  +0.1045603f, -0.1702427f, +0.0892933f, +0.9838297f, -0.2173862f, -0.2049997f, -0.3530498f, -0.4070352f,
  +0.0113478f, -0.1154602f, -0.0412972f, -0.0452961f, +0.1464996f, +0.0385795f, -0.0109543f, +0.0555651f,
  -0.2072692f, -0.1152922f, -0.1810282f, +0.0287626f, -0.3743494f, -0.1107660f, +0.0121779f, +0.1401029f,
  +0.0169093f, +0.0434593f, +0.1366279f, +0.1707320f, -0.1545884f, +0.0760987f, -0.0345600f, -0.3773657f
);

const float biases[4] = float[4](
  -0.0249037f, +0.0717945f, +0.0425207f, +0.0308163f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer73 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1263545f, +0.0901169f, -0.0400442f, +0.1305950f, +0.0917857f, -0.1509555f, +0.1152650f, -0.0569821f,
  +0.0374153f, -0.0050205f, +0.0570520f, +0.0404999f, -0.1195880f, -0.1560093f, -0.2767152f, -0.2008145f,
  +0.0335413f, +0.1739493f, -0.2745351f, +0.1793623f, +0.0613679f, -0.4210754f, -0.1029438f, -0.1071031f,
  +0.2040898f, -0.0871169f, +0.0089672f, -0.0284726f, +0.0630997f, +0.0397895f, -0.0073744f, +0.0153162f,
  -0.0542091f, -0.1043463f, +0.3236269f, -0.0263184f, +0.1621528f, +0.1870113f, +0.3622082f, -0.2678808f,
  -0.1376815f, -0.2656743f, +0.1071091f, -0.2855245f, -0.0067703f, +0.4398886f, -0.0747468f, +0.1789876f,
  -0.1334344f, -0.0730281f, -0.0723085f, +0.0304082f, -0.1099435f, +0.0836020f, +0.2334848f, -0.1554344f,
  -0.0228427f, +0.0869868f, +0.0405211f, +0.0919783f, +0.2899395f, -0.4640168f, -0.5160136f, +0.1036576f,
  -0.0652508f, -0.1107915f, -0.1052680f, -0.0660672f, -0.1213889f, -0.2723547f, +0.0594984f, +0.2928396f,
  -0.0713527f, -0.0266710f, -0.0535606f, -0.1020480f, +0.0495506f, -0.2107485f, -0.1047827f, +0.0184185f,
  -0.2472670f, -0.0804127f, -0.1042355f, -0.9268972f, +0.0916675f, -0.0848268f, +0.1389338f, -0.1704614f,
  +0.0018841f, -0.1063020f, +0.1866890f, -0.2322973f, -0.0380149f, +0.1021831f, -0.1516498f, +0.0180779f,
  +0.0173639f, -0.0419473f, +0.1051279f, -0.0110327f, +0.1107010f, +0.1681214f, +0.1015942f, -0.0267931f,
  +0.0644727f, -0.2323325f, +0.0720530f, -0.0026485f, -0.1328983f, +0.0174180f, +0.2380840f, -0.0573541f,
  +0.0951029f, +0.0254177f, +0.0505699f, +0.1775299f, -0.1139865f, +0.0555618f, +0.0122112f, -0.1149466f,
  -0.0793777f, +0.1647336f, +0.0888001f, +0.0322280f, +0.0994188f, +0.0181038f, -0.0922017f, +0.0467160f,
  +0.0222787f, +0.0715730f, +0.0735161f, -0.1221682f, -0.3311091f, +0.0545122f, -0.3798063f, +0.2840612f,
  +0.0812997f, +0.0396264f, +0.0692336f, -0.3317810f, -0.2341561f, +0.1859910f, -0.3207313f, +0.1021897f,
  -0.0315209f, +0.2456681f, +0.2194201f, +0.1908861f, -0.0105568f, +0.3207947f, +0.1161277f, +0.1348237f,
  +0.0711701f, +0.1818034f, +0.0831452f, +0.0385474f, -0.0733434f, -0.2585034f, +0.0482276f, +0.0765545f,
  -0.0848078f, -0.2033568f, -0.0404939f, +0.1911079f, +0.3742368f, +0.1340615f, -0.0251081f, +0.1342002f,
  +0.2204949f, +0.1800755f, +0.1469488f, -0.0793496f, +0.0415140f, +0.2096108f, +0.1958726f, +0.4249530f,
  +0.0016698f, -0.1806951f, +0.2140151f, -0.1427589f, -0.2154364f, -0.6523702f, -0.2660666f, -0.0104729f,
  -0.2526011f, -0.0626613f, -0.1079885f, +0.4713916f, +0.0590736f, -0.0481028f, -0.3895476f, -0.1085356f,
  -0.0118937f, -0.0328701f, +0.1828651f, +0.0691754f, -0.0057028f, -0.3053366f, +0.1606067f, -0.1258381f,
  -0.0195200f, -0.1003547f, -0.0897517f, -0.0174052f, +0.0778131f, -0.2418746f, -0.0134342f, +0.0293066f,
  -0.1629273f, -0.1811277f, -0.1264743f, +0.1257694f, +0.0499082f, +0.0107621f, +0.1076176f, -0.0584028f,
  -0.0681678f, +0.1959355f, -0.0743257f, -0.1694000f, +0.0746241f, -0.0742104f, -0.2583257f, +0.0422713f,
  -0.0803308f, +0.3782749f, +0.1663193f, +0.1334386f, +0.0551756f, -0.1175586f, -0.0420420f, -0.2601535f,
  +0.1222066f, +0.2324077f, +0.2298255f, +0.1395365f, +0.0612249f, -0.1594227f, -0.1892208f, -0.1847428f,
  +0.2683297f, -0.2480703f, +0.0664875f, -0.0167083f, +0.0553652f, +0.3345163f, +0.2184171f, -0.0803494f,
  +0.4227247f, -0.4138864f, +0.2188090f, -0.4375811f, -0.0689513f, +0.6114751f, +0.0279469f, -0.1397789f,
  +0.1192713f, -0.0118676f, +0.3131164f, +0.0299906f, +0.1925409f, +0.0602195f, -0.0491588f, +0.0819973f,
  -0.0113772f, -0.2132532f, +0.4525767f, +0.4010235f, +0.3405119f, -0.2993433f, +0.1303117f, +0.0222123f,
  +0.0068688f, +0.2077731f, +0.4040154f, -0.0694594f, +0.0754692f, -0.5740980f, -0.1900313f, +0.6355991f,
  -0.0522862f, +0.0258057f, +0.2651505f, +0.0845559f, -0.0097055f, -0.5246830f, +0.2214087f, -0.1991393f
);

const float biases[4] = float[4](
  -0.2492784f, +0.0057574f, -0.0301468f, -0.0477965f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer74 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0236434f, +0.1786674f, +0.1208844f, -0.0742995f, +0.1143310f, +0.0835210f, -0.0733453f, +0.1871288f,
  +0.2450575f, -0.1293534f, -0.2229511f, -0.0374774f, +0.0414084f, -0.0732527f, +0.3198328f, -0.0009909f,
  -0.0977391f, -0.1736897f, +0.1856695f, -0.0684771f, -0.0201680f, +0.1732583f, +0.1748707f, +0.1003833f,
  -0.0690555f, +0.0421471f, -0.0003658f, -0.0908096f, -0.0540316f, +0.2882140f, +0.1705024f, -0.1375112f,
  -0.0501200f, -0.2039045f, -0.1300959f, -0.3501058f, +0.1766087f, -0.1523591f, +0.0357360f, +0.3336255f,
  -0.1182362f, -0.0987323f, -0.0936806f, -0.2371170f, -0.3343453f, -0.0270892f, -0.0125043f, +0.2763460f,
  +0.0539548f, +0.0578347f, -0.0282287f, -0.2349002f, +0.0060945f, -0.2640758f, +0.0972835f, -0.0545852f,
  +0.2471001f, +0.0922027f, -0.2182306f, -0.0286446f, -0.0514362f, -0.0526455f, +0.0091690f, +0.1463551f,
  +0.1740618f, -0.2754603f, -0.1532246f, -0.2276914f, +0.0228465f, +0.0556889f, +0.1014945f, -0.1410730f,
  +0.1718187f, +0.0069302f, -0.0690949f, +0.0036384f, +0.0987706f, +0.1187717f, +0.0329106f, -0.1825280f,
  +0.0150978f, -0.1329269f, -0.0143931f, -0.1602778f, +0.1066317f, -0.0400044f, -0.1291242f, +0.2286762f,
  +0.1733596f, -0.3287306f, -0.1200228f, +0.0551252f, +0.1499740f, +0.1266843f, -0.0682255f, +0.0981445f,
  +0.2096875f, -0.2776990f, -0.2593500f, -0.0563007f, +0.0354373f, +0.0757715f, -0.0309370f, +0.1839623f,
  +0.0686313f, -0.2777786f, -0.1735063f, -0.0357435f, -0.0313463f, +0.0725384f, -0.0647934f, -0.3013399f,
  -0.1864168f, -0.3598405f, +0.1343451f, +0.0343898f, +0.2551673f, +0.2403220f, -0.0052798f, -0.1205402f,
  -0.1077238f, +0.0460605f, -0.1893636f, +0.0461681f, +0.0087777f, +0.1175829f, -0.1078279f, -0.0114148f,
  -0.3870398f, -0.2335215f, -0.1647123f, -0.1793915f, -0.1150957f, +0.2094019f, -0.2320687f, -0.0563093f,
  -0.2336276f, +0.1550030f, +0.0334638f, +0.0320123f, -0.0667817f, +0.1305837f, -0.0392285f, +0.1199909f,
  -0.0788286f, -0.3545711f, -0.0911418f, -0.0642843f, +0.1505955f, -0.2843788f, -0.1932068f, +0.4299830f,
  -0.0426484f, -0.1729460f, +0.0358135f, -0.1287604f, -0.4929486f, -0.2067571f, -0.1768476f, +0.1821732f,
  -0.3048978f, -0.1380961f, +0.0052641f, +0.0466237f, +0.1957706f, -0.2404335f, +0.1218617f, +0.0008028f,
  +0.1662624f, +0.1494832f, -0.2366192f, -0.4820610f, +0.0456568f, -0.0456416f, -0.0564312f, -0.0420649f,
  -0.0730396f, -0.1204313f, +0.4014672f, -0.1842007f, -0.3404356f, -0.1486340f, +0.0552246f, -0.1376798f,
  +0.1379534f, -0.0287492f, -0.1843521f, -0.1445982f, -0.0123830f, -0.2131683f, +0.2876754f, +0.2110110f,
  +0.0316395f, +0.0762860f, +0.1133802f, -0.3152970f, +0.0088008f, -0.2424078f, +0.1853248f, -0.1334013f,
  +0.0259221f, -0.2204956f, -0.2891055f, -0.1365384f, -0.2283747f, -0.1385506f, +0.0224256f, -0.3316295f,
  +0.3174257f, +0.0661893f, -0.0239166f, -0.1570800f, +0.2478276f, +0.0223159f, -0.0519737f, +0.0516608f,
  +0.2346271f, +0.2172085f, +0.1315109f, -0.2982916f, +0.3346790f, +0.0864689f, -0.0482121f, -0.1197606f,
  +0.0487310f, -0.0342648f, +0.0784964f, +0.0991478f, -0.3044816f, +0.1521131f, -0.1065316f, -0.3831056f,
  -0.0869952f, +0.1616918f, -0.0688448f, -0.0031424f, +0.0282196f, +0.0470484f, +0.1926831f, -0.3065068f,
  +0.1093966f, -0.0257093f, +0.3047821f, -0.0509243f, -0.1915361f, -0.1360745f, +0.2188877f, -0.0155424f,
  +0.3352459f, -0.1759485f, -0.0288739f, +0.0144415f, +0.2762063f, +0.0742733f, -0.1572362f, -0.4221636f,
  +0.0172723f, -0.2073917f, +0.0119187f, +0.1757709f, +0.3384907f, -0.0689868f, -0.0347667f, -0.3593813f,
  -0.1314077f, +0.1012427f, -0.3517171f, +0.1934567f, +0.1795477f, +0.1221410f, -0.1544344f, +0.0066720f,
  -0.3633832f, +0.0551308f, +0.1774676f, +0.0044137f, +0.8724751f, +0.7126796f, -0.1626419f, +0.6497796f,
  +0.0333266f, +0.1846255f, -0.1515363f, +0.0506166f, +0.0066649f, +0.1929776f, +0.1009972f, +0.1685635f
);

const float biases[4] = float[4](
  -0.0325865f, -0.1031443f, -0.0344586f, -0.1776706f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer74 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3332216f, +0.1027373f, +0.0337033f, -0.2040987f, -0.0156423f, +0.1331915f, -0.0166403f, +0.0699281f,
  +0.0269308f, -0.0692479f, +0.1677417f, +0.2409495f, -0.2877829f, -0.0857269f, -0.2013470f, -0.2122048f,
  -0.1753016f, -0.1015374f, +0.1242506f, -0.0281732f, +0.1506917f, -0.0047546f, +0.1089825f, +0.1484081f,
  +0.1391353f, -0.0060661f, -0.3053280f, +0.0535301f, +0.0038305f, +0.1301265f, +0.0052292f, +0.0635742f,
  -0.2322183f, -0.2420813f, -0.3195719f, -0.3822652f, +0.0200990f, +0.0221361f, -0.1304065f, +0.4422840f,
  -0.2247910f, -0.0475514f, -0.1237048f, -0.0569762f, +0.0832319f, -0.0406643f, -0.1716208f, +0.1463839f,
  +0.0442835f, -0.2497962f, -0.0844692f, -0.0518325f, -0.1797640f, -0.0845549f, +0.1386424f, -0.0301132f,
  +0.1278755f, +0.1853305f, +0.2547160f, +0.1395380f, +0.1033776f, -0.2001584f, -0.1180865f, -0.1720063f,
  -0.1513025f, -0.0770400f, +0.1258108f, -0.1574062f, -0.3051240f, +0.0349860f, -0.0916101f, +0.1801651f,
  -0.1625261f, -0.0789538f, +0.2379514f, -0.0929645f, -0.1907956f, -0.0807512f, -0.1335609f, +0.0074978f,
  -0.5394933f, -0.1172067f, -0.0898946f, +0.1227471f, +0.3225346f, +0.0393027f, +0.1568545f, -0.5762736f,
  -0.1864284f, +0.1331225f, -0.0074013f, +0.2274858f, -0.2077047f, +0.1498166f, +0.1081151f, -0.0743108f,
  +0.1690037f, +0.0295579f, -0.0211274f, -0.1068383f, +0.2377655f, +0.0724470f, -0.1819191f, -0.1199928f,
  +0.1523917f, -0.0461369f, -0.4857254f, +0.2332545f, -0.1289891f, +0.1496210f, +0.3293941f, -0.1562461f,
  +0.4115057f, +0.0496633f, +0.1936832f, +0.1232021f, -0.0733194f, +0.0432262f, -0.1167180f, -0.3643470f,
  +0.3457775f, +0.0952437f, -0.1844703f, -0.1648609f, +0.2452089f, +0.0996709f, -0.2485901f, +0.0252059f,
  +0.2524574f, +0.0192839f, -0.0099776f, -0.0085747f, +0.2544975f, +0.0355628f, +0.1659703f, -0.0233899f,
  +0.1029628f, +0.1591756f, +0.2299783f, +0.0381727f, +0.1523047f, +0.0578157f, -0.0073836f, -0.0089867f,
  +0.2210615f, +0.2550651f, +0.1336471f, -0.2873569f, -0.1110612f, +0.2164600f, +0.0460607f, -0.0608739f,
  +0.0031275f, -0.0333175f, +0.3203606f, +0.0913668f, -0.0134385f, +0.3318934f, -0.0875864f, -0.1798463f,
  -0.1490576f, +0.2585569f, -0.0839888f, -0.0155498f, -0.1221997f, -0.1024633f, +0.0046400f, +0.0173059f,
  +0.1625749f, +0.1657900f, +0.0992918f, +0.1826220f, -0.0930707f, +0.0810417f, -0.3222155f, +0.0333410f,
  -0.1507613f, -0.2133008f, +0.1080500f, -0.0750031f, +0.0203385f, -0.0299014f, -0.3036235f, +0.7081010f,
  -0.1044384f, -0.2299901f, +0.0891198f, -0.0944177f, +0.1128015f, +0.0630626f, +0.0205883f, +0.2008519f,
  +0.3439915f, +0.1554970f, +0.2569514f, -0.1372202f, +0.2430919f, -0.1871992f, -0.1587733f, -0.0940410f,
  +0.0993841f, -0.0462629f, -0.0060854f, -0.0181725f, -0.1303550f, -0.0088379f, -0.0864532f, +0.0822109f,
  +0.1656617f, -0.0810392f, -0.1285002f, -0.0984335f, +0.0321527f, -0.0213557f, -0.0693929f, -0.0824746f,
  -0.1142361f, -0.0187582f, -0.3081325f, +0.1656308f, -0.3239704f, -0.2801816f, +0.0251669f, +0.3801399f,
  +0.2201590f, +0.3240985f, +0.1075298f, -0.1716267f, -0.7641111f, -0.2138414f, +0.0312370f, +0.5208914f,
  -0.1265055f, +0.0502382f, -0.0136145f, +0.0668782f, -0.0239967f, +0.0660506f, -0.0871956f, +0.0892741f,
  -0.1924140f, +0.0435036f, -0.0488274f, -0.1646020f, -0.1161540f, +0.1072207f, -0.0411776f, +0.0658224f,
  -0.2200492f, +0.0347420f, +0.0140131f, -0.3752156f, +0.1318181f, -0.2375063f, +0.2561029f, -0.2923701f,
  +0.2345397f, +0.0256746f, -0.2190976f, -0.0999906f, -0.1889339f, +0.1300265f, +0.2803454f, +0.0599680f,
  +0.0457437f, -0.1113148f, +0.0180633f, -0.0430141f, -0.1800989f, -0.2201935f, +0.0088843f, +0.1070620f,
  -0.0562711f, +0.0419621f, +0.1084351f, +0.1989435f, +0.3602753f, +0.0384339f, +0.2043848f, +0.0692737f,
  -0.0285365f, -0.0785441f, +0.2887191f, +0.0902833f, -0.2341738f, +0.1569229f, -0.0206359f, +0.2162983f
);

const float biases[4] = float[4](
  +0.0310076f, -0.0120381f, -0.1256339f, +0.0326867f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer75 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1826857f, +0.1778646f, +0.0561127f, +0.0045575f, -0.1755459f, +0.1061116f, +0.0925462f, -0.0889176f,
  +0.1422707f, +0.1747697f, +0.1550936f, +0.0815580f, -0.0737487f, +0.0139840f, +0.0806230f, +0.0041068f,
  +0.2061529f, +0.4709502f, -0.1714480f, +0.9751741f, -0.2404884f, -0.0038865f, +0.1679046f, -0.0080484f,
  +0.1379277f, -0.1223836f, +0.1600405f, -0.0243359f, +0.0360071f, -0.0101792f, +0.0576260f, -0.0685719f,
  +0.2416582f, +0.2040963f, +0.0175493f, -0.2026327f, +0.0888269f, -0.3386104f, +0.3439786f, -0.2972769f,
  +0.0788955f, -0.2827497f, +0.4123363f, -0.2547066f, -0.1757965f, +0.0156547f, +0.8177190f, +0.5487169f,
  +0.1183489f, +0.0642886f, -0.0218591f, -0.0925075f, -0.2560989f, +0.2304080f, +0.0219248f, +0.0409372f,
  +0.0743700f, +0.2618124f, +0.0166406f, -0.2783065f, -0.1202916f, +0.0972132f, -0.0168367f, -0.0650434f,
  -0.0528882f, -0.0710575f, +0.1961874f, +0.0597032f, -0.1200690f, -0.1445143f, -0.1163965f, +0.1116042f,
  -0.0217418f, -0.0646157f, -0.2047889f, -0.0914085f, +0.1309771f, +0.1375291f, -0.2741344f, +0.0322994f,
  -0.1895624f, -0.1028153f, +0.2002348f, -0.2189294f, +0.2863915f, +0.1719643f, +0.0321250f, +0.0776603f,
  -0.1759676f, +0.0249235f, -0.2342215f, +0.0556574f, +0.1000858f, +0.1797193f, +0.0409871f, -0.0104464f,
  +0.1542763f, -0.0261579f, +0.0600884f, +0.0353186f, +0.0250941f, +0.0865099f, -0.3631607f, +0.0812059f,
  +0.1547043f, -0.1263861f, +0.3168209f, -0.0553922f, -0.2286580f, -0.1292625f, +0.0016887f, +0.0361323f,
  +0.0787489f, +0.0507317f, +0.1521336f, +0.0084188f, -0.0374342f, +0.0144698f, -0.1869425f, -0.0113087f,
  -0.1755911f, +0.0332179f, +0.0615108f, +0.0236630f, +0.0876516f, +0.0734598f, -0.1009925f, +0.0761280f,
  +0.1049462f, +0.0572603f, +0.1962873f, +0.1591238f, -0.1019640f, +0.1135668f, -0.1504198f, +0.0211148f,
  +0.0132501f, -0.0115569f, +0.0474433f, +0.3106958f, +0.1516170f, +0.2898737f, +0.2648580f, +0.0611816f,
  +0.0007706f, +0.3653942f, +0.3876264f, -0.0650638f, +0.3748480f, +0.0564204f, +0.0520691f, +0.0037993f,
  -0.0178028f, -0.3367425f, -0.1559778f, -0.0577728f, -0.0383256f, +0.3331784f, -0.5486142f, -0.3249979f,
  -0.1728553f, +0.3440121f, -0.1270016f, +0.1501865f, +0.1359811f, -0.3931124f, -0.1557375f, +0.2284241f,
  +0.0201941f, -0.1091194f, +0.4920885f, +0.0542412f, -0.2192670f, -0.1920660f, +0.3418970f, +0.2017668f,
  +0.1218221f, -0.1192454f, +0.0036927f, -0.0128002f, -0.2559652f, +0.1406855f, -0.1215055f, +0.0282066f,
  -0.1907098f, -0.2880600f, -0.0765351f, -0.1580999f, +0.1075304f, -0.1691021f, +0.0781453f, -0.0200246f,
  -0.1526588f, +0.1718168f, +0.0758426f, +0.1027278f, +0.1071469f, -0.0414220f, +0.1306457f, +0.0613619f,
  -0.0978667f, -0.1216192f, -0.1055161f, -0.0930876f, -0.0122509f, +0.0717870f, -0.1370268f, -0.1305219f,
  +0.1917152f, -0.1318192f, +0.0492486f, -0.0341470f, -0.0228133f, -0.1616179f, +0.0377868f, +0.1275013f,
  -0.0425328f, +0.1688398f, +0.3285778f, -0.1706726f, +0.1721102f, -0.0568965f, -0.0400855f, -0.2236973f,
  -0.0377916f, +0.3550058f, +0.1089647f, +0.0675704f, -0.1180071f, -0.1548204f, +0.0610123f, -0.0552917f,
  +0.2094285f, -0.1062278f, -0.0816891f, -0.0185012f, -0.0974492f, +0.0834814f, -0.0699891f, +0.0609450f,
  -0.1245942f, +0.3513151f, +0.0112301f, +0.0125936f, -0.0258351f, +0.0557317f, -0.1972183f, +0.2973865f,
  -0.1693114f, -0.2469415f, -0.1303391f, -0.1071845f, +0.0581601f, +0.1335094f, +0.2947089f, +0.1086975f,
  +0.1104066f, -0.2581057f, -0.1377882f, -0.1098093f, -0.0280167f, +0.1178158f, +0.0519425f, -0.0019039f,
  +0.0459221f, -0.0259562f, -0.0170403f, +0.0528111f, -0.1425440f, +0.0908734f, -0.0772585f, -0.0715521f,
  +0.0665784f, -0.0250902f, -0.2623091f, +0.0156340f, +0.0461306f, +0.0275375f, -0.0208991f, -0.1965527f,
  +0.0938859f, -0.1007806f, -0.0395516f, +0.0328840f, -0.1242902f, +0.1230769f, -0.0778840f, -0.1325690f
);

const float biases[4] = float[4](
  -0.1620273f, +0.1142514f, -0.0663144f, +0.0077884f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer75 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0388447f, +0.3126165f, +0.2805254f, +0.0677059f, -0.1280896f, +0.2807940f, -0.0059830f, +0.1233528f,
  +0.1436588f, -0.0089122f, -0.2708779f, +0.9846010f, +0.0927447f, -0.4786162f, -0.2091079f, -0.1175408f,
  -0.1100254f, -0.0648303f, -0.1293925f, +0.0600666f, -0.0509076f, +0.0734215f, +0.0146505f, +0.0135753f,
  +0.0171655f, +0.1043396f, -0.0937939f, +0.0462681f, +0.0106970f, +0.0055820f, +0.0258777f, +0.1747906f,
  +0.1753921f, -0.0755095f, -0.4916930f, +0.1559241f, -0.3843478f, -0.0264700f, +0.0999643f, +0.0920940f,
  +0.2452952f, +0.0687907f, -0.0107799f, +0.0836022f, +0.2447325f, -0.1165288f, -0.0487291f, +0.0981910f,
  +0.0760544f, +0.2489587f, +0.0026074f, +0.0069542f, -0.0722214f, +0.4661524f, +0.0188724f, +0.0110702f,
  -0.0277835f, -0.0696294f, +0.2076145f, +0.0855727f, +0.3546548f, +0.2147209f, +0.0211752f, -0.1970602f,
  +0.0875922f, +0.0165910f, +0.1055020f, +0.1352275f, +0.0138253f, +0.1300717f, +0.1103523f, -0.0428391f,
  -0.0344774f, -0.0343847f, +0.0913547f, -0.0731013f, +0.0452668f, -0.1597676f, +0.1816455f, -0.1392685f,
  -0.0522969f, +0.0881586f, -0.0617995f, -0.2193488f, +0.0206067f, -0.1103946f, +0.0366550f, -0.0899684f,
  +0.1345055f, +0.2727247f, -0.3790495f, +0.6520045f, -0.3678430f, -0.3752401f, -0.0085013f, +0.0276901f,
  +0.0472194f, -0.1091949f, -0.0581614f, +0.2613417f, -0.2648347f, +0.1456236f, +0.1219225f, +0.0125507f,
  +0.3073139f, -0.0747458f, +0.2693991f, -0.0815089f, -0.1552047f, +0.1720571f, +0.3961506f, -0.3402608f,
  +0.1286376f, -0.2068287f, +0.1959497f, -0.0710138f, -0.1473423f, +0.3816952f, +0.5443565f, +0.2366195f,
  -0.0117743f, +0.1820886f, +0.0751362f, -0.0179350f, +0.0373858f, -0.0866340f, -0.1487190f, +0.0533890f,
  -0.0937026f, +0.1219823f, -0.1171474f, -0.0531405f, -0.0092278f, +0.1700634f, +0.1109164f, +0.0403217f,
  +0.1734083f, +0.0441628f, +0.4379110f, +0.0836954f, -0.3660685f, -0.5580539f, -0.0961361f, +0.5250004f,
  -0.0386268f, +0.0314818f, -0.0356599f, +0.0987754f, +0.0343123f, -0.0111259f, -0.0220049f, -0.0127742f,
  +0.1376680f, +0.0187465f, +0.0553048f, +0.2465377f, -0.1560516f, -0.3034126f, -0.0357875f, -0.2112788f,
  +0.1361460f, -0.0568713f, +0.0283068f, +0.1909295f, -0.0137071f, -0.0910030f, -0.0243376f, -0.0989808f,
  +0.0543176f, -0.0535211f, +0.0266375f, +0.1201376f, +0.1266752f, -0.2054940f, -0.1124286f, -0.0936813f,
  +0.1072677f, -0.2320686f, +0.2475232f, +0.2814836f, +0.1104847f, -0.4064349f, +0.0628685f, -0.2071946f,
  +0.0830594f, -0.2548280f, +0.3255993f, -0.1972181f, +0.1219096f, +0.1833621f, -0.1683444f, -0.0355946f,
  +0.1360805f, +0.2443810f, +0.2005454f, -0.0943498f, +0.2322350f, +0.2201544f, +0.0758870f, +0.0061017f,
  -0.0591385f, -0.2810084f, +0.0667766f, +0.2333301f, -0.2876968f, +0.1330801f, +0.1172123f, -0.2455371f,
  +0.3818832f, +0.1582648f, -0.2665939f, +0.1390253f, +0.2887676f, -0.0047407f, -0.3952885f, -0.4428785f,
  +0.2666428f, +0.1122038f, +0.0251270f, +0.1728685f, +0.1414299f, -0.1429736f, +0.1930098f, +0.0210284f,
  -0.1710807f, -0.1968744f, -0.0453999f, -0.0895878f, -0.0889810f, -0.1497560f, +0.1226283f, +0.0665649f,
  -0.1544402f, -0.1480580f, +0.0035589f, -0.2082938f, -0.1396456f, -0.0047089f, -0.2907935f, -0.0518394f,
  -0.1803543f, +0.3740386f, +0.0704544f, -0.1217513f, +0.1719456f, -0.0622671f, -0.1540960f, +0.1379909f,
  -0.2949785f, -0.5722873f, +0.3060126f, +0.2925601f, -0.1260078f, -0.1990952f, +0.0793261f, +0.2077578f,
  +0.1765330f, -0.1039296f, -0.1999975f, -0.0565149f, -0.1098585f, +0.3671209f, +0.0206797f, -0.4166278f,
  +0.0613816f, -0.1214989f, -0.0001348f, +0.0638547f, +0.1976366f, -0.0055710f, -0.0578368f, +0.0120388f,
  -0.2279133f, -0.0007962f, -0.0234797f, +0.0801813f, -0.1930725f, -0.3175616f, +0.1189765f, +0.0470443f,
  +0.0130589f, +0.0025211f, -0.0653228f, -0.0686543f, -0.1342058f, -0.0321999f, -0.0455801f, -0.0068224f
);

const float biases[4] = float[4](
  +0.1149004f, -0.1838250f, -0.0085611f, -0.0802943f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer76 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1667860f, -0.0049173f, -0.0205809f, -0.0285474f, -0.0665215f, -0.0474947f, -0.4378826f, +0.0266756f,
  -0.0831011f, -0.1510020f, +0.2819656f, -0.1462984f, +0.1080662f, +0.0619812f, +0.4332474f, -0.0322567f,
  -0.0467375f, -0.0872591f, +0.1729861f, -0.0458047f, -0.0661780f, +0.0808823f, -0.0990050f, -0.0894376f,
  +0.0873922f, -0.2009545f, -0.0872230f, +0.1701142f, -0.1995696f, -0.0163481f, +0.0793708f, +0.5062580f,
  +0.0104983f, +0.0496464f, +0.0178975f, -0.0165111f, +0.1729939f, +0.0244687f, -0.2952967f, -0.1240377f,
  -0.1224078f, -0.2267111f, +0.0295776f, +0.0709623f, -0.0103184f, +0.0625837f, -0.2624453f, +0.0648318f,
  -0.2837398f, +0.3786663f, -0.1432040f, +0.0345829f, -0.1698956f, -0.0807370f, -0.0142446f, +0.2167664f,
  -0.0620200f, -0.0917280f, +0.0402195f, -0.1284436f, +0.2188244f, -0.0857447f, -0.1282347f, -0.3325450f,
  -0.1831143f, -0.1135750f, +0.1200543f, +0.1326911f, -0.1091687f, +0.1151419f, +0.0208061f, +0.2689889f,
  +0.2606093f, +0.1214544f, -0.0735603f, -0.0002782f, +0.0542236f, +0.4133743f, -0.2147236f, +0.1293627f,
  -0.0111831f, +0.2746653f, +0.0319747f, +0.1163273f, -0.1259125f, +0.3639683f, +0.0790782f, +0.0916268f,
  +0.0968769f, +0.2820902f, +0.0934775f, +0.0636687f, -0.2962725f, -0.1343806f, -0.0933213f, -0.0261456f,
  +0.2221426f, -0.1116929f, -0.0719520f, +0.1645751f, +0.0193300f, +0.4066026f, +0.1405430f, +0.2847081f,
  -0.0562023f, -0.2128743f, -0.1824308f, +0.0428169f, +0.1717554f, +0.4685721f, +0.0015016f, -0.1233611f,
  +0.0589093f, -0.0373844f, +0.3193614f, -0.3384313f, -0.2106814f, +0.1982341f, +0.1485292f, +0.1561773f,
  -0.0624233f, -0.1544922f, +0.1087697f, +0.0115065f, +0.0696429f, -0.1100612f, -0.0149736f, +0.1570887f,
  -0.0304831f, -0.0780676f, +0.2421873f, -0.1605970f, -0.1503593f, -0.0553647f, +0.0156285f, -0.1190826f,
  +0.1068230f, +0.1272267f, +0.1447906f, -0.3843349f, -0.3133801f, -0.0690846f, -0.0233672f, +0.3039888f,
  +0.2356818f, -0.1850161f, +0.0787636f, +0.0014067f, +0.1228191f, -0.0661545f, -0.7390842f, +0.0188858f,
  -0.0259887f, -0.2097103f, +0.1410151f, +0.0865911f, +0.0390815f, +0.0147939f, -0.2336620f, -0.1257733f,
  -0.0584039f, -0.0759313f, +0.1028436f, +0.1259632f, +0.1030168f, -0.0647902f, -0.0917576f, -0.1615824f,
  -0.5152875f, -0.3590544f, +0.0149449f, -0.0652187f, -0.0733950f, -0.1455955f, -0.2001244f, +0.1525985f,
  -0.1096798f, -0.6164726f, +0.2061337f, +0.0484256f, +0.3243342f, +0.1478696f, -0.1557235f, -0.1611751f,
  -0.1390178f, -0.1106720f, +0.0231641f, +0.2635344f, -0.0412508f, +0.2222514f, -0.1258511f, -0.0210346f,
  +0.3844055f, +0.0866206f, -0.2388209f, +0.0153589f, +0.1194126f, +0.1997232f, -0.1433289f, +0.3133506f,
  -0.2395894f, -0.2470057f, +0.4626504f, -0.2254546f, +0.1609249f, -0.1578924f, -0.1788639f, -0.5109594f,
  -0.0658149f, +0.2963722f, -0.2977284f, -0.0650143f, -0.4914010f, +0.0070168f, -0.1228045f, +0.0276364f,
  +0.0732235f, -0.3298905f, -0.0387611f, +0.2243548f, +0.0645696f, -0.1101115f, -0.1917103f, -0.1455834f,
  +0.1234733f, -0.2605387f, +0.0771888f, -0.0976319f, -0.1038584f, -0.0864787f, -0.1666882f, -0.1215205f,
  -0.0090701f, -0.0016343f, +0.0478703f, -0.1892361f, +0.2192488f, +0.0321301f, -0.0720495f, -0.1223043f,
  +0.0235377f, -0.0940858f, -0.0549719f, +0.1417883f, -0.2385991f, +0.1426232f, +0.0391776f, +0.1224034f,
  +0.0427378f, -0.0276401f, +0.3744457f, +0.3386938f, -0.2080875f, +0.2239653f, -0.0211223f, -0.2403528f,
  +0.0208654f, +0.0524766f, +0.0530473f, +0.0519976f, +0.0189560f, -0.2841460f, -0.0503435f, -0.0770914f,
  -0.8190726f, -0.0997863f, -0.1916847f, -0.1809373f, -0.1472470f, -0.4450364f, -0.0536084f, +0.1366550f,
  +0.0820073f, +0.0703415f, +0.2122209f, -0.3190731f, -0.4344545f, +0.0552966f, -0.2160827f, -0.1563691f,
  +0.1193716f, +0.0890200f, +0.0251347f, +0.2282136f, -0.2927277f, +0.0377293f, -0.1150353f, -0.0143432f
);

const float biases[4] = float[4](
  -0.0293999f, +0.0047109f, -0.0183067f, -0.0992850f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer76 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2347537f, -0.1928619f, +0.0298688f, +0.0218059f, +0.0010271f, +0.3091989f, +0.1538067f, -0.1549756f,
  +0.0479031f, -0.0926430f, +0.3088160f, +0.0236219f, -0.0271365f, -0.0689979f, +0.0127583f, +0.0096847f,
  +0.1368453f, +0.1080295f, +0.1669089f, +0.0284506f, +0.1913359f, -0.1736591f, -0.1395564f, -0.0469310f,
  -0.1054074f, -0.0573486f, -0.0616280f, +0.0826182f, -0.1012835f, -0.4789443f, -0.2114164f, +0.2103644f,
  -0.5150692f, +0.1062100f, -0.0093712f, -0.1354725f, +0.5060807f, -0.2402090f, -0.3412651f, -0.0603461f,
  +0.0245643f, -0.2020541f, -0.3070358f, -0.0852061f, -0.0846482f, -0.1951350f, -0.2457355f, -0.0726720f,
  +0.1321947f, +0.2255461f, +0.0296910f, +0.0730570f, -0.1927594f, -0.0458119f, +0.0800049f, -0.1742515f,
  -0.2336149f, -0.2476806f, +0.1278676f, +0.2195209f, -0.1261234f, -0.0690394f, +0.0785404f, +0.0219060f,
  -0.0630055f, -0.0593749f, -0.2572280f, -0.3756698f, -0.1833830f, +0.0216150f, -0.0620577f, +0.1013562f,
  +0.1829550f, -0.0694420f, -0.0467567f, -0.0525632f, -0.0529258f, +0.5603167f, -0.1600520f, +0.0875862f,
  -0.0115400f, +0.0707478f, +0.1762109f, -0.2727785f, -0.5315779f, +0.0362646f, -0.1050909f, +0.1127270f,
  +0.0085028f, +0.1788259f, -0.0632093f, -0.4397092f, -0.3500732f, -0.1799467f, +0.0234360f, -0.0361597f,
  -0.2246332f, -0.1324862f, +0.0980406f, +0.0007612f, +0.2508236f, -0.4582361f, -0.3170561f, +0.2953198f,
  +0.3491852f, -0.2040819f, -0.1017479f, -0.2103678f, +0.1588182f, +0.2307885f, +0.6143917f, +0.2890709f,
  +0.1276940f, +0.2280635f, -0.3443109f, -0.2093127f, -0.0856220f, -0.0723736f, +0.3552803f, +0.0100140f,
  +0.1351900f, -0.1518922f, -0.0486791f, -0.1264587f, +0.0427460f, -0.0989811f, -0.0494790f, -0.0808119f,
  +0.2766540f, -0.3429084f, +0.1728379f, -0.0245678f, +0.3963912f, +0.3983707f, +0.1752127f, +0.3268805f,
  +0.0671476f, +0.0336399f, +0.0277848f, +0.0071065f, -0.0846691f, +0.0874580f, +0.1736790f, -0.0429786f,
  -0.0206689f, -0.3007434f, -0.1125198f, +0.1044264f, +0.0511950f, -0.0817676f, +0.4236909f, -0.0976342f,
  +0.1094839f, +0.1145858f, -0.2104890f, +0.0412474f, +0.2093672f, -0.2021499f, -0.1925008f, +0.0510541f,
  +0.0740358f, -0.0845019f, -0.2773450f, +0.0847450f, +0.0377157f, +0.0863280f, -0.1904671f, +0.0285072f,
  -0.4416225f, -0.0369123f, +0.0151904f, +0.2853380f, +0.2410377f, -0.4092823f, +0.0673849f, -0.1693580f,
  -0.1896034f, +0.2327727f, +0.1719307f, -0.2539330f, -0.1127194f, -0.1746568f, -0.2339339f, -0.1509222f,
  -0.0399505f, -0.0657912f, +0.0509659f, -0.2544205f, +0.0162595f, -0.0791821f, +0.0175428f, -0.3102485f,
  +0.0269437f, +0.1254733f, -0.0494339f, +0.0602432f, +0.1402843f, -0.0476744f, +0.0691913f, -0.0919994f,
  +0.0005846f, -0.0591267f, -0.2580023f, -0.3602532f, +0.4285570f, -0.1134482f, -0.0567410f, +0.2501604f,
  +0.0353874f, +0.0912555f, +0.0270633f, +0.0028207f, -0.1148148f, -0.0986788f, -0.0373848f, +0.1448409f,
  -0.3882255f, -0.2319279f, +0.0489807f, +0.0752480f, -0.0041084f, -0.2314088f, +0.2090539f, -0.0187614f,
  -0.1060084f, -0.1996239f, -0.1766531f, +0.2081596f, +0.3568019f, +0.0078074f, +0.1003399f, +0.0349603f,
  -0.0641762f, +0.0138870f, +0.0708534f, -0.0373308f, -0.0025106f, +0.0390254f, -0.0436572f, -0.1565004f,
  -0.6184375f, +0.2089535f, +0.1130964f, +0.1376050f, -0.0999206f, -0.3262191f, +0.0946623f, -0.4187755f,
  +0.1396307f, -0.2366588f, -0.0853118f, +0.0533452f, -0.0134656f, +0.1145384f, +0.1359896f, +0.2299818f,
  -0.0934863f, -0.0315355f, +0.0714970f, -0.1059164f, -0.0335483f, -0.2560072f, -0.0626762f, +0.0991958f,
  -0.0467429f, +0.0424431f, +0.0143798f, -0.0336043f, +0.0528243f, +0.0680554f, +0.0957048f, -0.1872302f,
  +0.0367793f, -0.1457365f, -0.1312062f, -0.1317283f, +0.1977992f, +0.2961289f, +0.1695368f, +0.3856626f,
  +0.0317760f, +0.0945059f, +0.0789147f, +0.2956012f, -0.2799545f, +0.1926100f, -0.0074766f, -0.1707255f
);

const float biases[4] = float[4](
  -0.0156655f, -0.0164563f, -0.0583582f, +0.0111119f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer77 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0270388f, -0.1791074f, +0.2478809f, -0.5063670f, +0.0644828f, +0.0115204f, -0.0260975f, -0.1931581f,
  -0.1318704f, -0.2443730f, +0.2650290f, -0.1970759f, -0.1737135f, -0.2361072f, +0.2927474f, -0.4481182f,
  +0.0920794f, -0.0963536f, -0.2389089f, +0.0720793f, -0.0049946f, -0.1219052f, -0.2176646f, -0.1323912f,
  -0.1365213f, -0.0193601f, -0.1158269f, -0.2170540f, +0.1943622f, -0.2384154f, -0.1051487f, -0.1298565f,
  -0.3134902f, +0.0849060f, -0.1968205f, +0.2121499f, +0.2617516f, -0.1317433f, -0.1742601f, +0.0070742f,
  +0.0852684f, +0.1352643f, -0.3201145f, +0.2881760f, -0.2188815f, -0.1932160f, -0.1468072f, -0.0110120f,
  +0.0625777f, -0.1398165f, +0.3536580f, +0.1675723f, +0.2169238f, +0.2086253f, +0.1133911f, -0.0481446f,
  +0.1597658f, +0.2316626f, +0.6636526f, +0.4194319f, -0.2818742f, +0.2188518f, +0.2260118f, -0.0342925f,
  +0.3844172f, -0.1108832f, +0.5598459f, +0.9030529f, -0.1067715f, +0.0426562f, -0.2131869f, -0.2237195f,
  -0.0752823f, -0.0992009f, +0.0998606f, -0.0909378f, -0.1137721f, -0.1022203f, -0.0289345f, -0.1764130f,
  +0.5554297f, +0.4602772f, +0.2777990f, +0.0229787f, +0.0248656f, -0.3766991f, +0.7573366f, +0.0123938f,
  -0.1780918f, -0.2451683f, +0.4455933f, -0.0753488f, -0.1639628f, +0.2553576f, +0.0106421f, +0.3714573f,
  -0.0569945f, -0.1097746f, -0.0564727f, +0.0907309f, +0.2199962f, -0.1954331f, +0.1282185f, -0.0379956f,
  +0.1386389f, +0.1228538f, +0.0761032f, -0.2123219f, +0.0108079f, -0.2766761f, -0.3510366f, -0.2732144f,
  +0.0720862f, -0.2297015f, +0.6511689f, +0.1689753f, -0.1756097f, -0.1648308f, -0.3494803f, -0.1034542f,
  +0.0380642f, +0.0037854f, +0.0313234f, +0.0237189f, -0.0900399f, +0.1328662f, +0.1349455f, -0.0058161f,
  +0.0163741f, +0.0542861f, -0.0033846f, -0.1521999f, -0.0980410f, +0.1941354f, +0.0149510f, -0.0865444f,
  +0.0591341f, -0.0070661f, +0.0301123f, -0.0972431f, +0.0225748f, +0.0671532f, -0.0531100f, -0.0062726f,
  +0.0529000f, -0.0124320f, -0.0070051f, -0.2163565f, +0.0814191f, +0.2774640f, -0.0545141f, +0.0515023f,
  +0.2389238f, -0.0006150f, -0.2312269f, +0.0405752f, -0.2660420f, +0.3371322f, -0.2076493f, +0.2183514f,
  -0.0273473f, +0.0379711f, -0.2192173f, +0.2835617f, -0.1366857f, +0.2339971f, +0.0316282f, +0.2996058f,
  +0.0287908f, +0.0895752f, +0.0688675f, +0.1087684f, +0.0549449f, -0.0123764f, +0.0653064f, -0.0280786f,
  -0.1672882f, +0.2343625f, -0.0864199f, +0.4252796f, +0.1949537f, -0.2758115f, +0.0762843f, +0.1360992f,
  -0.0922519f, +0.1930636f, +0.2280145f, -0.1202680f, +0.3317528f, +0.2863798f, -0.1142287f, -0.2307986f,
  +0.1536231f, -0.0235089f, +0.1327615f, -0.0516875f, -0.0891145f, -0.0011871f, -0.1672252f, +0.0033309f,
  +0.0288228f, +0.1583319f, +0.1024651f, -0.0471057f, +0.2950277f, +0.0609809f, +0.0023673f, -0.0390516f,
  -0.0445512f, +0.0629216f, -0.1378702f, -0.1917932f, +0.0225801f, -0.1257668f, -0.2928778f, +0.0513531f,
  +0.1606104f, +0.0687513f, -0.0927345f, +0.0992121f, -0.3062839f, +0.2030610f, +0.1839505f, +0.0241104f,
  -0.0718672f, +0.2330585f, +0.0535141f, +0.5550864f, -0.0936163f, +0.0584568f, -0.1100776f, +0.1200891f,
  +0.0236799f, -0.0734770f, +0.1737106f, -0.0023528f, +0.0408993f, -0.0891384f, +0.1197138f, +0.0454992f,
  +0.3508434f, +0.2623158f, -0.0631058f, +0.1397440f, -0.3632667f, +0.0873737f, +0.1779946f, +0.0039391f,
  +0.1594017f, +0.0520406f, -0.2979742f, -0.5367309f, -0.1668137f, -0.1070723f, +0.3772037f, +0.5312384f,
  +0.1139094f, +0.0629284f, +0.2459349f, -0.0026969f, -0.2628301f, -0.0287206f, -0.0617118f, +0.0104527f,
  -0.1813338f, +0.0228160f, +0.0771320f, +0.0487706f, +0.1021846f, +0.1601291f, +0.0438055f, -0.2030130f,
  -0.0580904f, +0.1083259f, +0.4467956f, -0.0770666f, -0.1031665f, -0.5343320f, -0.1874470f, +0.4768803f,
  +0.1664535f, -0.0188329f, +0.3068176f, +0.1186220f, -0.2858255f, +0.3907747f, +0.1240015f, -0.0244652f
);

const float biases[4] = float[4](
  +0.0820609f, -0.1426365f, +0.1194362f, -0.2009061f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer77 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1081444f, +0.2228816f, +0.0716020f, +0.0001958f, -0.0178687f, +0.1379800f, +0.0973388f, +0.0166682f,
  -0.1317012f, +0.1910001f, +0.1846313f, +0.2896315f, +0.0532107f, +0.1947789f, +0.0788160f, +0.1466137f,
  -0.1023817f, +0.1979050f, +0.0758886f, -0.0530627f, -0.0083415f, +0.0519925f, +0.1385295f, +0.0816877f,
  -0.0127240f, +0.0237073f, +0.3380150f, -0.1994987f, -0.1263464f, -0.1390986f, -0.0527419f, -0.4005488f,
  +0.7462916f, +0.1155531f, -0.1429429f, -0.2128204f, -0.4543836f, -0.2212814f, +0.4652847f, +0.1646185f,
  +0.0053075f, -0.0715237f, -0.0176181f, -0.1872596f, -0.3018725f, +0.2716279f, +0.4216642f, +0.0379566f,
  +0.0092226f, -0.0029793f, +0.0114873f, +0.1326486f, -0.0669503f, +0.1213296f, +0.1361610f, +0.0631253f,
  +0.2198230f, +0.1381594f, +0.1754774f, +0.0150540f, -0.0389896f, -0.1359303f, -0.0325984f, -0.1390677f,
  -0.0085669f, -0.1257930f, +0.1888213f, -0.0257308f, -0.2964345f, -0.0629377f, -0.1441121f, +0.2504768f,
  -0.0331191f, +0.1706587f, +0.0730821f, -0.0505483f, -0.0635694f, +0.0300537f, +0.0572645f, -0.1043697f,
  +0.1003910f, -0.0344327f, +0.0126533f, +0.1561194f, -0.1017236f, +0.1639473f, -0.0016162f, +0.2173910f,
  -0.0055199f, +0.0578496f, +0.2092375f, -0.0436054f, -0.0325642f, -0.0903991f, -0.0090963f, -0.0331513f,
  +0.1079464f, +0.1234697f, +0.1933199f, +0.1822664f, +0.0969136f, +0.0740021f, +0.3393172f, -0.0852487f,
  -0.0919177f, +0.1987130f, +0.2942619f, -0.1225954f, -0.8336653f, -0.7281868f, +0.2862572f, +0.8862922f,
  +0.2651443f, -0.1049243f, +0.5525207f, +0.1986736f, -0.3061745f, +0.1681395f, -0.0518937f, +0.0853438f,
  -0.0646408f, -0.0760000f, -0.0704108f, -0.0090870f, +0.0160858f, +0.0579410f, -0.0210830f, -0.1583092f,
  +0.0493330f, -0.0415193f, +0.2472609f, +0.2142214f, +0.0654466f, +0.2425698f, -0.0389247f, -0.0283581f,
  +0.1070379f, +0.0471945f, +0.1277768f, +0.0306586f, +0.0813427f, +0.1333789f, +0.0045378f, -0.0229061f,
  -0.0228085f, -0.1691420f, -0.0309998f, -0.0928703f, +0.0784871f, -0.0160685f, -0.1925442f, +0.0382704f,
  +0.0674392f, -0.0555670f, -0.4243020f, +0.2738431f, +0.5306979f, +0.3012209f, -0.1568839f, -0.5486539f,
  -0.1599252f, -0.0360760f, -0.2486521f, -0.0989511f, +0.2413479f, -0.0846598f, -0.0350097f, +0.0844616f,
  +0.0577595f, +0.2390490f, +0.0321680f, +0.0715578f, -0.0972359f, -0.0123935f, +0.1455044f, +0.0879401f,
  +0.1347411f, +0.0763617f, +0.0569134f, +0.0573996f, -0.2232440f, -0.1649493f, -0.0024599f, -0.1497946f,
  +0.0124859f, +0.0332621f, +0.1003230f, +0.1257753f, -0.0217922f, -0.0215701f, -0.1123648f, +0.0708016f,
  -0.0630277f, +0.0552512f, +0.0273360f, +0.0211200f, +0.0487509f, -0.0043639f, -0.0392061f, -0.0221825f,
  +0.0788719f, -0.1265204f, -0.0191789f, +0.0774862f, +0.0524650f, +0.1413679f, +0.0780535f, -0.0755267f,
  -0.0278820f, +0.0224233f, -0.0367168f, +0.0512759f, +0.0605712f, -0.0262037f, -0.0113126f, -0.0285930f,
  +0.0600901f, +0.0418160f, +0.1724040f, +0.2923393f, +0.1308701f, -0.0887075f, +0.2661283f, +0.1194590f,
  -0.0853214f, -0.1064086f, +0.0220904f, +0.1766027f, +0.1749799f, -0.2619614f, +0.3332107f, +0.1196481f,
  -0.0300419f, -0.1527166f, +0.0423016f, -0.0474640f, -0.0603225f, -0.2498492f, +0.2707821f, -0.0194746f,
  +0.0419907f, +0.1662402f, -0.0936448f, -0.1727885f, -0.0742848f, +0.2585467f, -0.0642969f, +0.1812766f,
  +0.0058691f, -0.0194937f, -0.1142992f, +0.0613756f, -0.0115265f, -0.1186149f, -0.1356678f, +0.2033524f,
  +0.0935981f, -0.0643550f, -0.2059916f, +0.3709991f, -0.0270887f, -0.1837533f, +0.1460160f, +0.0927968f,
  -0.0491078f, +0.0492134f, -0.0594574f, +0.0103880f, +0.1272096f, +0.0723591f, +0.0825335f, +0.0297716f,
  -0.0375665f, -0.2402469f, -0.1064573f, +0.0021173f, +0.0940137f, +0.0916544f, +0.1014372f, -0.0405160f,
  -0.0796051f, -0.2795096f, +0.1637157f, +0.2263522f, +0.0740418f, -0.0340331f, +0.0262192f, -0.0377563f
);

const float biases[4] = float[4](
  -0.1617020f, -0.1445311f, -0.5480080f, -0.0540279f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer78 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0265608f, -0.1467252f, -0.1721370f, -0.1464649f, -0.1544299f, +0.0417748f, +0.0432549f, +0.0095063f,
  -0.0195869f, -0.0773356f, -0.1593326f, -0.0075258f, -0.2527618f, +0.0823003f, +0.1016341f, +0.0399900f,
  +0.0900228f, -0.1480874f, -0.1775140f, +0.1520047f, -0.2553971f, -0.2035898f, -0.1261925f, -0.0085038f,
  -0.1024288f, -0.2925210f, +0.1196260f, -0.2104943f, -0.1646398f, -0.1757861f, +0.3348412f, -0.1917054f,
  +0.0675157f, -0.1350347f, +0.1748843f, +0.0304731f, -0.2644209f, +0.1909725f, +0.3703049f, -0.0371572f,
  +0.1161948f, -0.0105184f, +0.0148335f, -0.1255433f, -0.1130001f, -0.0498672f, -0.1133951f, -0.2153266f,
  +0.0845968f, +0.1712241f, +0.0133495f, +0.0362582f, -0.0733437f, +0.0246812f, +0.1023596f, -0.1340248f,
  -0.2437063f, -0.1858179f, -0.1000000f, +0.0719739f, +0.0447291f, +0.1490225f, -0.1138339f, -0.1286848f,
  +0.3201272f, +0.1083469f, -0.0847391f, -0.0250386f, -0.2566974f, +0.2579799f, -0.0778262f, -0.0714645f,
  -0.1026587f, +0.0597339f, +0.0308935f, +0.0630592f, +0.2697514f, -0.0617581f, -0.0275490f, -0.0683194f,
  -0.1175826f, +0.0377778f, -0.1161192f, +0.3265359f, -0.3559925f, -0.1709084f, +0.0937688f, -0.0735774f,
  +0.0525549f, -0.1588608f, +0.1386869f, +0.1518521f, -0.0434080f, -0.2207711f, -0.0394468f, +0.2024163f,
  +0.3410703f, +0.0927794f, -0.0434578f, -0.0747407f, +0.1418240f, +0.3477075f, +0.0585344f, -0.0223363f,
  +0.2111299f, -0.1403272f, -0.1562321f, -0.0780002f, +0.0624938f, +0.0502365f, +0.2241200f, -0.0330020f,
  +0.0689510f, +0.1989119f, -0.1237492f, -0.2150916f, -0.0481338f, -0.1997499f, +0.1090983f, +0.0070028f,
  +0.2739618f, +0.0457878f, -0.0534019f, -0.1667903f, +0.2149267f, +0.0577216f, +0.1011645f, +0.0644016f,
  +0.1999697f, -0.5494259f, +0.0862318f, -0.2254191f, -0.1894937f, -0.0864902f, -0.5020477f, -0.1373194f,
  -0.2790162f, +0.0010141f, +0.2026583f, -0.1240750f, -0.0118226f, -0.2486859f, +0.0648931f, +0.0318538f,
  -0.0086643f, -0.0017307f, -0.0680625f, -0.1648621f, -0.0571204f, +0.1086431f, -0.0523187f, +0.1202136f,
  -0.0422396f, -0.0063805f, +0.1704071f, -0.1258822f, +0.1855347f, -0.3587310f, -0.1594325f, +0.1998498f,
  -0.1126614f, +0.0241719f, -0.0301420f, +0.0389328f, +0.0733604f, +0.0579356f, -0.0909990f, -0.0572003f,
  +0.3861178f, -0.3678798f, -0.0715105f, -0.1001450f, -0.0119495f, -0.7621405f, +0.1821888f, +0.0734292f,
  +0.0213353f, +0.0490040f, +0.1503495f, +0.2697568f, -0.2826160f, -0.1577709f, -0.2369845f, -0.0814623f,
  -0.3618107f, -0.2364752f, -0.0638173f, +0.4639291f, -0.0799848f, -0.3402434f, -0.0118554f, +0.0619697f,
  -0.0344561f, -0.1837513f, -0.2758560f, -0.0764413f, -0.2390640f, -0.1550126f, +0.2178631f, +0.1167672f,
  +0.1575554f, -0.6266530f, +0.1193757f, +0.1450757f, +0.0834641f, +0.2857524f, -0.5004456f, +0.1114595f,
  -0.0804259f, -0.2668201f, +0.0358990f, +0.0985923f, +0.0651727f, +0.3822374f, -0.1692153f, +0.2003559f,
  -0.3514141f, +0.0128335f, +0.1890792f, -0.3034496f, +0.1590781f, +0.1309919f, -0.0825505f, -0.0097007f,
  -0.1790317f, +0.0465934f, +0.1651970f, -0.1373752f, +0.2779324f, -0.3241872f, -0.0894053f, +0.0320122f,
  -0.2520452f, +0.0611561f, +0.1275969f, -0.1038609f, -0.0537155f, +0.0335666f, -0.0206856f, -0.0031760f,
  +0.0675152f, -0.0340818f, +0.0273726f, -0.2919423f, +0.3182098f, -0.1064750f, +0.0368395f, -0.1241367f,
  +0.0633553f, +0.3650705f, -0.0993813f, +0.3016840f, -0.0043665f, -0.2274684f, +0.0007625f, -0.0951683f,
  +0.2186886f, -0.1013112f, -0.0182169f, +0.1195115f, +0.1177084f, -0.2263399f, +0.1664389f, +0.0548863f,
  -0.0015440f, -0.0676641f, -0.2976048f, -0.2170774f, +0.6400724f, +0.0675202f, +0.1926866f, -0.0171810f,
  +0.1714638f, -0.0901211f, -0.0358244f, -0.7308095f, -0.2265189f, -0.2705538f, -0.5811486f, +0.0194663f,
  -0.0122579f, -0.2406729f, +0.0383445f, +0.0711193f, +0.0117964f, -0.1559881f, +0.2938282f, -0.0170904f
);

const float biases[4] = float[4](
  +0.0189822f, +0.0649028f, +0.0504009f, +0.0586238f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer78 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0880556f, -0.0818290f, +0.0377918f, +0.1654813f, +0.0109808f, -0.1604242f, -0.1286971f, +0.2428944f,
  +0.2423208f, -0.0121713f, -0.0354937f, +0.3577603f, +0.0031579f, -0.4670455f, +0.0081050f, +0.1134173f,
  +0.1283271f, -0.1185220f, -0.0267444f, +0.1151733f, -0.1522023f, +0.0033156f, -0.1103034f, +0.0821336f,
  -0.3898371f, -0.1016251f, -0.2217861f, -0.0119984f, -0.1830335f, +0.2344165f, +0.0043094f, -0.0569894f,
  -0.5526304f, -0.1362447f, -0.1238654f, +0.0011078f, +0.3371606f, +0.8560305f, +0.4273491f, -0.1624303f,
  -0.2505692f, -0.5711077f, -0.0198005f, -0.2375504f, -0.0915749f, -0.6356665f, -0.2038596f, +0.1507434f,
  -0.1476063f, -0.2670353f, +0.1279875f, +0.1484649f, -0.0600457f, -0.0360369f, -0.2716112f, -0.1414644f,
  +0.1529054f, -0.3985991f, +0.1034503f, +0.2058920f, -0.0466094f, +0.2794446f, -0.3278788f, -0.0478891f,
  +0.1295892f, +0.0387514f, -0.1665372f, +0.1002118f, -0.1558873f, +0.1348650f, +0.4787942f, -0.1914795f,
  +0.1596725f, -0.0830586f, +0.2325509f, -0.0047067f, +0.4869698f, -0.0783250f, +0.0713839f, +0.3308966f,
  -0.2016558f, -0.1349331f, +0.2095884f, +0.4627336f, +0.1807454f, -0.4805858f, +0.0603908f, +0.1571864f,
  -0.0646351f, -0.1055551f, +0.0282007f, -0.3815101f, +0.1025636f, -0.1978221f, +0.1263370f, +0.0613742f,
  +0.4073054f, -0.0368850f, -0.1741023f, +0.2438964f, +0.0144711f, -0.2339038f, +0.2580127f, +0.2013084f,
  +0.2006197f, +0.1795192f, +0.2497535f, -0.5759761f, +0.3464613f, +0.4683130f, +0.8460702f, +0.4392734f,
  +0.6281885f, +0.4263858f, -0.0112663f, +0.0463322f, +0.1313325f, -0.0966273f, +0.4091166f, -0.0450971f,
  +0.1604414f, -0.0796079f, -0.4043317f, +0.0917295f, -0.2705357f, -0.0014317f, +0.1477545f, +0.1264049f,
  +0.2688059f, +0.4461013f, -0.1420091f, -0.3076240f, -0.0922980f, +0.0094698f, -0.8628661f, +0.1850296f,
  +0.0237277f, +0.1708122f, -0.2424539f, -0.2190731f, +0.1639608f, -0.3622665f, +0.2804348f, -0.0261414f,
  -0.1118419f, -0.0494330f, +0.3828302f, +0.1781749f, +0.2055013f, -0.0351595f, -0.1279515f, -0.0166739f,
  -0.3936885f, -0.1296510f, -0.0426543f, +0.0256812f, +0.0998384f, +0.0392700f, -0.0642773f, -0.1373084f,
  -0.2682846f, -0.0806884f, +0.1488685f, -0.1251304f, -0.1620138f, +0.1355821f, -0.1443730f, +0.0622183f,
  +0.0946076f, +0.2970397f, -0.0175654f, -0.0750553f, -0.1066062f, +0.1420262f, +0.0103482f, -0.1586197f,
  -0.3944863f, +0.3071342f, -0.0937910f, -0.3464932f, -0.1217762f, -0.0488772f, +0.2313981f, +0.0024716f,
  -0.3280470f, +0.1563968f, -0.1657846f, +0.0258207f, -0.0757139f, -0.0516539f, +0.0012962f, -0.0748637f,
  +0.0930575f, +0.3371325f, +0.0452900f, -0.0591987f, -0.0880469f, +0.0017997f, -0.1605073f, +0.1829935f,
  -0.2330634f, -0.3389540f, -0.0078316f, -0.1547465f, -0.0452993f, +0.0317117f, +0.5029827f, -0.0892000f,
  +0.0385969f, -0.0114285f, +0.0969834f, +0.0553791f, -0.1127385f, +0.1640366f, +0.2260761f, -0.0160348f,
  +0.4261888f, -0.0928460f, -0.1422483f, -0.0695393f, -0.2019196f, +0.1323094f, +0.0381764f, +0.2006799f,
  -0.2019078f, -0.0253286f, +0.2370431f, -0.0957457f, +0.2095639f, +0.0098568f, +0.0390252f, +0.0798330f,
  -0.0821823f, -0.0987082f, -0.0682292f, +0.1223813f, -0.1193278f, -0.0375264f, -0.0415251f, +0.0359781f,
  +0.1898806f, -0.1309737f, +0.3135078f, -0.1710061f, +0.0269413f, -0.1977700f, +0.0660523f, +0.0588736f,
  -0.4038084f, +0.1284331f, -0.0075493f, -0.5095950f, +0.3217225f, -0.4947570f, +0.2962016f, +0.1364141f,
  -0.1439373f, -0.3094499f, +0.0659717f, -0.3517751f, +0.1859739f, +0.0990069f, -0.1428455f, +0.1422252f,
  +0.0413857f, -0.0771128f, -0.2220405f, +0.0710564f, +0.0001439f, -0.0590545f, -0.1024487f, +0.0371727f,
  +0.2700312f, +0.0516932f, -0.0452478f, -0.3166085f, +0.0364858f, -0.0611306f, +0.8900334f, +0.1921931f,
  +0.2483796f, +0.2237946f, -0.2104246f, -0.0660286f, +0.0592122f, -0.1361453f, +0.4668936f, +0.0048762f
);

const float biases[4] = float[4](
  -0.0326215f, +0.0560885f, +0.0018033f, -0.0258150f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer79 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0333740f, -0.0090668f, +0.0240986f, +0.3081451f, +0.0479507f, +0.1724155f, -0.0068159f, +0.2094605f,
  -0.1899312f, +0.4020807f, -0.2946601f, +0.6175612f, -0.0984885f, -0.1055009f, +0.1923539f, +0.2088212f,
  +0.1363651f, -0.0048771f, -0.0916031f, +0.0861448f, -0.0623257f, -0.1450675f, -0.0288760f, +0.1232564f,
  +0.2352159f, +0.2216908f, -0.0985095f, -0.0961059f, +0.0241323f, +0.0310812f, +0.2142359f, +0.0995815f,
  -0.0402638f, +0.0026976f, -0.0057497f, +0.1514649f, -0.2456548f, +0.2596592f, +0.0268255f, +0.1415172f,
  +0.1071840f, +0.1353074f, -0.0688656f, -0.0055819f, +0.0533587f, -0.0267982f, -0.1308121f, +0.0892021f,
  -0.0952821f, -0.1473906f, -0.1164415f, +0.2302572f, -0.0180551f, +0.2613146f, +0.2565958f, +0.0583446f,
  -0.3428046f, +0.0141790f, -0.0931224f, +0.1639052f, +0.1670559f, -0.1659558f, +0.3158384f, +0.2201036f,
  +0.0757998f, -0.0452462f, -0.1086353f, -0.0824535f, -0.0540013f, +0.1635725f, -0.0130180f, +0.3331917f,
  -0.1160764f, +0.3336831f, -0.1384194f, -0.0719471f, +0.1795980f, +0.1130190f, -0.1409914f, +0.1095120f,
  -0.0644207f, +0.1021168f, +0.1125347f, +0.0841848f, +0.1127880f, -0.0340641f, +0.1173296f, +0.1091836f,
  -0.0287223f, +0.1602941f, +0.1567264f, +0.2883914f, +0.1132003f, +0.0228368f, -0.0002019f, -0.0267404f,
  +0.1625359f, -0.1934362f, -0.3409267f, -0.0436107f, +0.0562418f, +0.1908827f, -0.1682877f, -0.1065649f,
  +0.1906108f, -0.0484801f, +0.2222983f, -0.2008817f, +0.0314161f, +0.1635477f, +0.2638407f, +0.1164611f,
  +0.1847560f, +0.0747126f, -0.2054143f, -0.1081275f, -0.1093873f, +0.4545111f, +0.2188574f, -0.1254091f,
  +0.1133218f, -0.1636828f, +0.0732466f, -0.1565855f, -0.0568692f, +0.0177364f, -0.2269802f, +0.0458256f,
  +0.1671184f, +0.1716257f, -0.0489640f, +0.1156214f, -0.0134342f, -0.2006548f, +0.0186533f, +0.1750380f,
  +0.2393736f, +0.0061248f, -0.0416945f, +0.0466345f, -0.2337340f, -0.0474666f, -0.2608397f, -0.2222848f,
  +0.0181164f, -0.1341383f, +0.1865489f, +0.1102968f, -0.1457284f, +0.2569268f, +0.0572689f, -0.0729056f,
  -0.1992771f, -0.2138570f, +0.3456082f, -0.0483854f, +0.2021129f, -0.1787573f, +0.1902519f, -0.0869423f,
  -0.0163497f, +0.2319183f, +0.2169815f, +0.4254887f, -0.4274215f, +0.2566041f, +0.1272187f, -0.2259358f,
  +0.0162350f, -0.3691964f, -0.0463114f, +0.1184658f, -0.1438400f, -0.2706235f, -0.2493088f, -0.1278413f,
  +0.1849790f, -0.1422190f, +0.0317493f, +0.4367172f, +0.1035280f, +0.3025516f, +0.0411298f, +0.2597071f,
  -0.0060463f, -0.1229218f, +0.0982007f, +0.0832441f, -0.4471982f, -0.1308620f, -0.2077511f, -0.0725474f,
  -0.2223630f, +0.1332351f, +0.1110110f, -0.1343510f, -0.2456459f, -0.0581926f, +0.0886326f, -0.1065723f,
  +0.1190353f, -0.0345736f, -0.0546374f, -0.1944289f, -0.3487365f, -0.1078672f, -0.2184144f, -0.0721233f,
  +0.0186150f, -0.0332142f, +0.1390544f, +0.0552272f, -0.1254024f, +0.1915504f, +0.0303726f, -0.0487971f,
  -0.0440277f, -0.0730637f, +0.0717343f, -0.0448166f, +0.1283662f, -0.1203430f, +0.0667220f, -0.0505392f,
  -0.1355406f, -0.0804642f, -0.1143842f, -0.0613739f, +0.0378260f, +0.0498083f, -0.0652195f, +0.0848179f,
  +0.0306475f, -0.3354078f, +0.0979438f, -0.3186077f, +0.1033002f, +0.0773843f, +0.0619174f, +0.0043576f,
  -0.1745432f, +0.0436692f, -0.1280063f, +0.0338774f, -0.0247418f, -0.1587414f, +0.0979501f, +0.0549897f,
  -0.1840829f, -0.0714008f, -0.2972586f, -0.0378327f, +0.0915960f, -0.0396584f, -0.4657210f, +0.0597620f,
  +0.0580108f, +0.2780907f, -0.2943927f, +0.4488297f, -0.0451880f, -0.1010365f, -0.2974452f, -0.2646838f,
  +0.0452397f, +0.0407848f, -0.0287334f, -0.0453671f, -0.1617465f, +0.0456342f, +0.0929668f, -0.0850612f,
  +0.1578315f, +0.2441237f, +0.0051310f, -0.0206012f, -0.2596988f, -0.2114152f, +0.1087615f, -0.1138807f,
  +0.1219674f, +0.1822066f, -0.2321689f, -0.0876588f, -0.1355016f, +0.0712115f, +0.6206074f, +0.1780310f
);

const float biases[4] = float[4](
  +0.0141157f, -0.1413500f, -0.0736088f, +0.0127309f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer79 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0460311f, +0.1168339f, -0.0242846f, -0.2434621f, +0.1006478f, +0.1255657f, +0.0046684f, +0.0551876f,
  -0.0359430f, +0.2609260f, +0.0615072f, +0.5302997f, +0.1557244f, -0.3313351f, -0.0789395f, -0.0815521f,
  +0.0532357f, -0.0438038f, -0.0232742f, -0.0014408f, -0.0896727f, -0.1724029f, +0.0090109f, -0.0627147f,
  +0.0214922f, +0.1567070f, +0.2853599f, -0.3610625f, +0.1608949f, +0.4435064f, +0.0658075f, -0.5255442f,
  -0.0332420f, -0.0684654f, +0.0263702f, +0.1285683f, -0.0903142f, -0.2300422f, -0.2623179f, +0.5135792f,
  +0.1716091f, -0.0165491f, -0.0920769f, +0.1984477f, -0.1654294f, -0.0668441f, +0.0594557f, -0.0573608f,
  +0.0437274f, -0.0052529f, -0.3786693f, -0.3574586f, -0.0267522f, +0.3529653f, +0.1833270f, -0.4753874f,
  -0.1292204f, -0.2565793f, +0.4915334f, +0.2512041f, +0.1448651f, -0.2646681f, -0.3117072f, +0.0867232f,
  +0.1062123f, +0.0033410f, -0.0580210f, +0.0890641f, -0.1590722f, +0.2317755f, +0.1765853f, +0.0599462f,
  -0.0991737f, -0.1854726f, -0.1040537f, -0.1891861f, +0.1645539f, +0.0191679f, -0.1584874f, +0.2564286f,
  +0.2862779f, +0.6275548f, +0.2742977f, +0.7259643f, -0.0685735f, +0.1692282f, +0.2690669f, -0.5331439f,
  -0.0722678f, -0.0681897f, +0.1946317f, -0.3482061f, +0.1675342f, -0.1285992f, -0.2002157f, +0.0842116f,
  +0.1206043f, -0.4732275f, +0.0989345f, +0.1409445f, +0.1920719f, +0.0422894f, -0.1064531f, -0.1959887f,
  +0.2865731f, +0.8521685f, +0.2237791f, -0.5322621f, -0.3096480f, +0.0354688f, +0.1991499f, -0.0514468f,
  +0.0186670f, -0.2481513f, +0.3499738f, +0.0820281f, +0.0408494f, -0.1618421f, -0.6222408f, +0.0043213f,
  -0.1290262f, +0.4899559f, -0.0972483f, -0.2530009f, +0.1539454f, +0.3738153f, +0.3402326f, +0.0556561f,
  -0.0635147f, -0.5649830f, +0.1274412f, +0.3608287f, +0.1339420f, -0.3525596f, -0.1331328f, +0.1048750f,
  +0.0245326f, -0.1073799f, -0.2455979f, +0.0049692f, -0.2008865f, -0.0803510f, -0.0378542f, -0.2095362f,
  -0.1491863f, -0.0387828f, +0.0099153f, +0.3880185f, +0.1435789f, +0.0115457f, -0.1138328f, +0.0606206f,
  +0.2643038f, +0.0450032f, +0.2902499f, -0.0417177f, -0.0102249f, -0.2210717f, +0.3232702f, +0.2765405f,
  +0.3094218f, -0.2097730f, +0.1513754f, -0.0372187f, -0.1494688f, +0.4404119f, +0.2150689f, +0.2912623f,
  +0.0695752f, -0.0276768f, -0.1166265f, +0.1018149f, -0.1327905f, -0.0883746f, +0.1574169f, -0.0484731f,
  -0.3052951f, -0.0451756f, -0.2617371f, +0.4411649f, +0.6412735f, +0.0546310f, -0.4568562f, -0.5305321f,
  +0.0588435f, -0.0334734f, +0.4431610f, +0.1667536f, +0.0834869f, -0.3269965f, +0.2507200f, +0.0393657f,
  -0.0325065f, +0.0608301f, -0.1217160f, -0.1820240f, -0.0985531f, -0.0112240f, -0.0798627f, -0.0212678f,
  -0.3286784f, -0.0924318f, +0.0154351f, -0.0489009f, -0.2896320f, -0.2486116f, -0.0464970f, +0.1273577f,
  -0.0450263f, -0.0483775f, -0.0302738f, +0.0795400f, +0.0623720f, +0.0728522f, +0.2057058f, -0.1309813f,
  +0.1484712f, -0.1320726f, +0.1829659f, -0.3188763f, +0.0415532f, -0.1132640f, -0.0564373f, +0.0799171f,
  -0.0447508f, +0.1087193f, +0.1942919f, +0.1745036f, +0.1231245f, +0.0090135f, +0.0509980f, -0.0760250f,
  +0.0152049f, -0.2597568f, +0.0072869f, -0.2480021f, +0.1076329f, +0.1832577f, -0.1634101f, +0.0102560f,
  -0.1930283f, -0.0995076f, -0.0388235f, -0.0332867f, -0.2567753f, -0.0022980f, -0.1663264f, +0.0658372f,
  -0.1633967f, +0.2590951f, -0.2308150f, +0.0282558f, -0.0838177f, -0.2327063f, +0.0921012f, -0.0113140f,
  -0.2219998f, +0.0106596f, +0.3250766f, -0.4175514f, +0.2527264f, +0.2804419f, -0.1115510f, +0.1776706f,
  -0.0391054f, +0.0220120f, -0.0601176f, -0.1313097f, +0.0272017f, -0.2723983f, -0.3885685f, +0.1387642f,
  -0.0119198f, +0.2524821f, -0.2603390f, -0.3290034f, +0.2010443f, -0.2801661f, -0.0431518f, +0.1451487f,
  -0.0639710f, -0.0757632f, +0.1427740f, +0.0158164f, +0.3465309f, -0.1481905f, -0.0020482f, -0.0973530f
);

const float biases[4] = float[4](
  +0.0055855f, -0.0554249f, -0.0552810f, -0.0420803f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer80 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1211190f, -0.1871543f, -0.1937650f, +0.0991432f, -0.0712054f, +0.0559274f, +0.2020333f, -0.0250576f,
  +0.2327750f, -0.0034780f, -0.1830908f, +0.0194392f, -0.1828115f, -0.2681006f, +0.0067036f, -0.0926181f,
  +0.0313537f, -0.0735075f, +0.0999924f, +0.0729861f, +0.1328288f, -0.1756160f, -0.0298827f, +0.0370248f,
  +0.3529688f, +0.0055214f, -0.1319170f, +0.0351531f, +0.1547552f, +0.1214112f, +0.2217936f, +0.0654356f,
  +0.1794817f, -0.1150956f, -0.0538245f, -0.2853372f, -0.0516295f, +0.1627628f, +0.5346487f, +0.2388357f,
  -0.0708703f, -0.0231763f, +0.0026803f, +0.0064622f, +0.4373038f, -0.1340789f, -0.0316934f, +0.2882130f,
  +0.1211958f, -0.1632973f, -0.1052251f, +0.0448328f, +0.0195212f, +0.0910908f, -0.1536745f, +0.1324382f,
  +0.1863118f, -0.2661290f, -0.1639041f, +0.0709453f, -0.0590735f, +0.3868875f, -0.0670465f, +0.0413325f,
  -0.0583925f, +0.0464015f, -0.0538276f, +0.0641081f, -0.0170740f, -0.0972771f, -0.2468071f, -0.1685833f,
  -0.0629771f, -0.0385363f, +0.2640493f, +0.1523486f, +0.0360474f, +0.0500440f, +0.2286412f, +0.1142763f,
  -0.1873930f, -0.5414853f, -0.0990203f, +0.3525489f, -0.1500689f, -0.1390879f, -0.2165219f, -0.0114068f,
  -0.0783821f, -0.0650881f, -0.3564326f, -0.0654950f, +0.3068939f, -0.1175308f, +0.0825760f, +0.1723967f,
  -0.0993839f, +0.0811768f, -0.2051187f, -0.0686593f, +0.0652303f, +0.2372166f, +0.1794172f, -0.0298495f,
  -0.2392334f, -0.1910436f, -0.2810595f, +0.1759432f, -0.1156688f, +0.3083248f, +0.1958121f, +0.1074396f,
  -0.3655780f, +0.0164491f, -0.0719243f, +0.1121009f, +0.0156806f, -0.6544390f, +0.3018712f, -0.1034026f,
  +0.0130356f, -0.0870160f, -0.1760173f, +0.1019467f, -0.0038113f, -0.0338431f, +0.0158155f, +0.0237613f,
  -0.2895704f, -0.1646438f, +0.3270698f, -0.0479827f, -0.2220216f, +0.1705796f, +0.3403242f, -0.0611659f,
  -0.0365458f, -0.0687008f, -0.1879665f, +0.0416769f, +0.2729711f, +0.1589676f, +0.2445548f, -0.0182821f,
  -0.0352313f, +0.2289411f, -0.2271891f, +0.2255438f, +0.0667215f, +0.2142467f, +0.0291941f, -0.2525512f,
  -0.1358755f, +0.1291687f, -0.0898894f, -0.1222178f, +0.1004342f, +0.0637571f, -0.0095493f, +0.1391343f,
  -0.0652662f, -0.2603385f, +0.1457938f, -0.0001409f, -0.0147833f, +0.1483370f, +0.0036412f, -0.0062628f,
  -0.1562705f, -0.0169707f, -0.2088277f, -0.1112760f, +0.0936048f, -0.0574432f, +0.1764263f, -0.3838645f,
  -0.2614446f, +0.2775296f, -0.0862041f, +0.1920737f, -0.7626207f, -0.3048714f, -0.1013022f, +0.2035837f,
  -0.0988609f, +0.0151423f, -0.2254631f, -0.0472215f, +0.2855981f, +0.0181797f, -0.1881813f, +0.2475495f,
  -0.0790829f, -0.1729073f, +0.0262083f, -0.0709032f, +0.0627988f, -0.1999519f, +0.2485291f, -0.1830200f,
  -0.1011300f, +0.2336473f, +0.0396046f, +0.1175542f, -0.2969060f, +0.8082602f, -0.0792318f, -0.0628481f,
  +0.0957767f, -0.2979924f, +0.0805395f, -0.1358428f, +0.0151672f, -0.2437211f, -0.1123540f, -0.1121571f,
  -0.0595366f, +0.0854180f, +0.0792099f, +0.0739261f, -0.0066413f, +0.0909708f, -0.1396949f, -0.3548162f,
  -0.1154480f, +0.2671479f, +0.1399777f, -0.1641051f, +0.1417810f, +0.1007345f, +0.1078972f, +0.1223291f,
  -0.2467846f, +0.0839550f, +0.0194025f, +0.0986167f, -0.1029705f, +0.2760901f, -0.0577127f, +0.0471710f,
  -0.0521012f, +0.2560169f, -0.0552768f, -0.3208932f, +0.0806494f, +0.1800347f, -0.0595260f, +0.0862737f,
  -0.3897718f, +0.1597442f, -0.0938153f, +0.1176657f, -0.8240114f, -0.1596296f, -0.4356215f, -0.0278932f,
  -0.1694734f, -0.1876008f, -0.2603422f, +0.0001208f, +0.5501122f, -0.2149290f, +0.1764607f, +0.2693044f,
  -0.0771430f, +0.2580582f, -0.0909294f, +0.1163519f, +0.0735037f, -0.1951862f, -0.1207122f, +0.0401763f,
  -0.1762584f, +0.2848368f, -0.1100939f, +0.0172398f, -0.0115103f, +0.5217078f, +0.0290061f, +0.0278560f,
  -0.2871788f, -0.1291239f, -0.3594084f, +0.0665930f, -0.2586205f, +0.2393023f, -0.2082031f, +0.2234981f
);

const float biases[4] = float[4](
  +0.0340989f, +0.0724037f, +0.0111287f, -0.0123186f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer80 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0148027f, -0.1621491f, -0.0687049f, +0.1656060f, -0.0531301f, +0.1634162f, +0.1079401f, -0.1961231f,
  -0.1174171f, -0.0791532f, +0.0200745f, +0.1033035f, -0.0683377f, -0.0252772f, -0.0265321f, -0.1471511f,
  -0.0528825f, +0.0852139f, -0.1532605f, +0.1752232f, -0.1193868f, +0.1089357f, -0.0459207f, +0.1362979f,
  -0.0033816f, +0.1265882f, +0.0696977f, +0.0793396f, -0.0427068f, +0.2503420f, -0.0001087f, +0.1238039f,
  -0.0846486f, -0.1500965f, +0.0779356f, +0.0115813f, +0.4438378f, -0.2918863f, +0.1696814f, -0.0554612f,
  -0.1096641f, -0.1599850f, -0.4605271f, +0.0045760f, +0.1740815f, -0.1303368f, +0.2236487f, +0.1250698f,
  +0.0683153f, -0.3490643f, +0.4233684f, -0.0665010f, -0.0989865f, +0.0687138f, -0.1443758f, -0.2739173f,
  +0.0295221f, -0.0962582f, +0.0516218f, -0.0667723f, -0.1122487f, -0.3020582f, -0.1404523f, -0.3739487f,
  -0.1167423f, +0.3024523f, +0.6171516f, -0.0093809f, -0.1426115f, -0.2818995f, -0.1530350f, -0.0555723f,
  -0.1561253f, +0.1468507f, +0.1169836f, -0.0753953f, +0.0542408f, +0.0367630f, -0.0087866f, +0.2962486f,
  +0.0494915f, -0.1429846f, +0.3332686f, +0.0074724f, +0.3671361f, +0.1209079f, +0.0911165f, +0.2492323f,
  -0.0743111f, +0.1061865f, +0.1225226f, -0.0457424f, +0.2131696f, +0.2128085f, +0.0310976f, +0.0993047f,
  -0.1010815f, +0.2373791f, +0.1755304f, +0.0074594f, -0.0777158f, +0.0533032f, -0.1144912f, -0.0406381f,
  +0.1768399f, +0.0282686f, -0.0260397f, +0.0059508f, +0.1961472f, +0.3701211f, +0.8601997f, -0.0155782f,
  +0.0203993f, +0.2246476f, -0.0434875f, -0.1041671f, -0.4228100f, -0.1286586f, +0.1076763f, -0.0062325f,
  -0.1086391f, -0.0008921f, -0.3693014f, +0.0032497f, +0.0352792f, +0.0529354f, +0.0897395f, -0.0538705f,
  -0.1723581f, +0.0144735f, -0.0038486f, +0.0148050f, +0.3271624f, -0.1973914f, -0.0230647f, +0.0518484f,
  -0.0430380f, -0.2208720f, -0.2241385f, -0.1162790f, +0.2571433f, +0.1967295f, +0.1503571f, +0.0264609f,
  +0.1302902f, -0.3308986f, -0.2255855f, -0.3933454f, +0.0218541f, -0.0666661f, -0.1355586f, -0.0525920f,
  +0.0176097f, +0.0014218f, +0.1890044f, -0.1761402f, +0.4756329f, -0.0835952f, +0.2434016f, -0.0339062f,
  +0.0246160f, -0.0552911f, +0.1317897f, -0.1585812f, -0.0813710f, +0.2967329f, -0.1620936f, +0.1921757f,
  +0.1922894f, -0.1917830f, -0.0128434f, +0.3859069f, +0.0661985f, +0.0459988f, -0.4088733f, -0.1327224f,
  +0.2066469f, +0.2345358f, +0.0079933f, +0.3145311f, +0.2874126f, +0.1165751f, -0.2082714f, +0.1998892f,
  +0.1379328f, +0.0601970f, +0.4757168f, -0.1751194f, -0.0748553f, -0.4072351f, +0.1261430f, -0.0492564f,
  +0.0791312f, -0.0058111f, -0.3750085f, +0.0230816f, +0.0451647f, -0.1230618f, +0.0876235f, -0.1182148f,
  -0.0373898f, +0.0571362f, -0.2107296f, +0.0779649f, +0.1706155f, -0.1460202f, -0.0269034f, -0.1596575f,
  +0.0474806f, -0.0773804f, -0.0085940f, -0.0133252f, -0.0267139f, +0.1489200f, -0.0437003f, -0.0721915f,
  +0.0553932f, -0.1038851f, -0.0960969f, -0.2298436f, +0.0799939f, +0.1561956f, -0.0280023f, -0.0842675f,
  +0.1550870f, -0.2094471f, +0.1082080f, +0.0699401f, +0.2382463f, +0.0030018f, +0.0282973f, -0.0196285f,
  -0.0943038f, -0.1169601f, +0.2596918f, +0.1675241f, +0.0468837f, +0.1855370f, -0.1114106f, -0.1793539f,
  +0.0707357f, -0.1516939f, +0.1685881f, +0.0244510f, -0.0580846f, -0.0787568f, +0.0047533f, -0.1019518f,
  +0.0784974f, -0.2436567f, -0.1724469f, -0.0878547f, +0.1454645f, +0.6678462f, -0.6353044f, -0.0278716f,
  +0.1612733f, -0.3524227f, -0.1038629f, -0.0962547f, -0.0599036f, -0.1834027f, +0.1729846f, -0.1330062f,
  -0.0082670f, -0.1129248f, +0.0912173f, +0.0714938f, -0.0008172f, -0.0672488f, +0.1311498f, -0.0243187f,
  -0.0804478f, +0.0665583f, -0.0055529f, -0.0330964f, +0.2147788f, -0.4022644f, +0.0975771f, -0.1542095f,
  -0.2882526f, -0.0377218f, +0.0124695f, +0.0358109f, +0.0707260f, -0.0223391f, -0.2166469f, -0.1252983f
);

const float biases[4] = float[4](
  +0.0375905f, +0.0204314f, +0.0263087f, +0.0431160f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer81 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2015230f, -0.2548969f, -0.1159937f, +0.2349142f, +0.0299602f, -0.0243180f, -0.0716843f, +0.1061627f,
  +0.0349504f, -0.1392987f, -0.0333235f, +0.1042117f, +0.1657586f, +0.0743500f, +0.0397923f, +0.0943513f,
  -0.0617553f, +0.0604253f, +0.1412084f, -0.0228030f, +0.2390659f, +0.1192594f, +0.2265584f, +0.0518306f,
  -0.1075432f, -0.1448352f, -0.0773427f, +0.1911378f, -0.0491997f, -0.0994750f, -0.0794391f, +0.1702767f,
  +0.1310330f, +0.0061563f, +0.0944425f, +0.1994773f, -0.0434457f, +0.4478881f, -0.1258488f, +0.2743621f,
  -0.0156151f, -0.0460267f, +0.1279055f, +0.1204362f, -0.0477112f, -0.1251463f, -0.0608383f, +0.0363989f,
  +0.1341189f, -0.1405057f, -0.0138412f, +0.0438387f, -0.1933250f, -0.3670416f, -0.2921801f, -0.0148075f,
  +0.3047690f, +0.1041414f, +0.0402547f, +0.2805740f, -0.2449667f, -0.4520327f, +0.0084334f, +0.1028061f,
  +0.1594459f, +0.3739290f, -0.4478899f, +0.2559619f, +0.1949448f, -0.1855882f, +0.4123916f, -0.1151674f,
  +0.2558156f, -0.0964596f, +0.0541308f, +0.0564264f, -0.0170471f, +0.1569172f, -0.1701063f, -0.0636971f,
  -0.3456671f, -0.0117526f, +0.2589111f, +0.0027220f, +0.1840242f, +0.1521280f, +0.0819035f, -0.1864343f,
  -0.1258076f, +0.1133673f, +0.4396281f, +0.3467184f, +0.1670361f, +0.2887124f, +0.0438541f, +0.0658729f,
  -0.0825269f, -0.0530905f, +0.2875817f, +0.0971778f, -0.0266508f, -0.0700000f, -0.3628539f, +0.1184061f,
  -0.0968952f, +0.5314715f, +0.3467330f, -0.2682572f, -0.3584238f, +0.1255754f, -0.0553068f, +0.1245936f,
  -0.1384116f, +0.2664838f, +0.1318934f, +0.2745849f, -0.1473379f, -0.0988877f, +0.0585604f, -0.0929935f,
  +0.2773947f, -0.0754620f, +0.1109767f, +0.5114887f, +0.0853412f, -0.5582545f, +0.0535076f, -0.0040658f,
  -0.0808297f, +0.2502492f, +0.1098056f, +0.2377260f, +0.1103467f, +0.0216350f, -0.1539426f, -0.1864922f,
  -0.1750254f, +0.0174245f, -0.1198050f, +0.2998776f, +0.0284729f, -0.1153455f, +0.2519058f, -0.1501589f,
  -0.2646909f, +0.2242423f, -0.2105340f, +0.4454892f, +0.0572474f, -0.0435399f, -0.1415433f, +0.0651555f,
  -0.1173181f, +0.2643199f, -0.1121513f, +0.5815998f, -0.0863589f, -0.1550300f, +0.0242565f, +0.0936081f,
  +0.1742058f, +0.0138724f, +0.0037769f, +0.2463747f, -0.1116325f, -0.1790025f, +0.0907250f, -0.0384118f,
  +0.1636890f, -0.3552195f, +0.1484906f, -0.4325307f, +0.2054671f, +0.0992807f, +0.1101007f, -0.1036079f,
  +0.0137665f, +0.1267778f, -0.1612071f, +0.0219577f, +0.2100119f, +0.5857397f, -0.0195529f, -0.2041357f,
  -0.1292297f, -0.1172944f, +0.0355932f, -0.2573483f, +0.1580915f, -0.0895700f, -0.0038457f, +0.0440316f,
  +0.2033478f, +0.1539388f, +0.1986269f, -0.1218798f, +0.0538474f, +0.1068972f, -0.0222128f, +0.1674405f,
  -0.2905216f, +0.0224891f, -0.0085114f, -0.2690647f, -0.2682732f, -0.7493839f, -0.1371049f, +0.1410857f,
  +0.0129433f, -0.0330319f, +0.1554783f, -0.0656016f, +0.0089660f, +0.1307112f, -0.1257383f, +0.0818519f,
  +0.1526570f, -0.0468777f, +0.1545790f, +0.0537049f, +0.1188666f, +0.1303978f, +0.2887505f, +0.1874985f,
  +0.1552305f, +0.0747303f, -0.1563966f, +0.3542786f, +0.0920649f, -0.1858525f, +0.0557852f, -0.1569151f,
  -0.1257068f, +0.1093354f, +0.2145593f, +0.2833664f, -0.0506735f, +0.2741539f, +0.1034259f, +0.0553674f,
  +0.0088264f, +0.0290019f, +0.0527455f, -0.0769303f, +0.0454998f, +0.2066314f, -0.0091724f, +0.2710120f,
  -0.0841421f, +0.2787289f, +0.1082403f, +0.0262369f, +0.1140951f, -0.3424596f, +0.3256640f, -0.0459164f,
  -0.2184876f, +0.3794598f, -0.2447857f, +0.3397312f, +0.0257486f, +0.0464487f, +0.2660929f, -0.1050349f,
  +0.0083223f, -0.2330896f, +0.0034808f, +0.0906922f, +0.0589284f, +0.3204289f, -0.1094097f, +0.0989312f,
  +0.1163445f, -0.0545569f, -0.1927156f, +0.1215764f, -0.1491009f, -0.2215349f, -0.2453207f, +0.0669520f,
  -0.1272915f, +0.1907606f, +0.0849317f, +0.1671539f, +0.2388634f, -0.2271627f, +0.0261626f, -0.0424563f
);

const float biases[4] = float[4](
  +0.0651979f, -0.0235225f, -0.0865166f, +0.0541538f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer81 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0780003f, -0.0068706f, -0.0497439f, +0.0031387f, +0.0006617f, -0.0236884f, -0.0568401f, -0.0362407f,
  +0.1731054f, -0.2647405f, -0.1938693f, +0.0562477f, -0.0184398f, -0.0039884f, -0.0349561f, +0.0828659f,
  -0.0167079f, -0.0725816f, +0.1228403f, -0.0753112f, +0.0890646f, +0.0584859f, +0.1718229f, +0.0181678f,
  -0.0162278f, -0.0165956f, +0.0435559f, +0.1332374f, +0.1825114f, -0.0578513f, -0.0407181f, +0.1419218f,
  -0.2648734f, -0.0164323f, -0.5007410f, +0.4883542f, +0.3134799f, +0.2229624f, -0.3712283f, +0.1730667f,
  +0.0095282f, +0.1437557f, +0.1177855f, +0.2833985f, -0.2021316f, -0.2295944f, -0.0099932f, +0.0007470f,
  -0.0622952f, +0.1833020f, +0.0330719f, +0.0894007f, +0.0963972f, +0.0320579f, +0.0139176f, +0.0628273f,
  +0.0303215f, -0.3666223f, -0.0965860f, +0.0009577f, -0.0457417f, +0.1241723f, +0.0760645f, -0.2333924f,
  +0.2169642f, +0.1557148f, -0.1283650f, +0.1771845f, +0.2322186f, +0.1667553f, +0.1982972f, -0.1673408f,
  -0.1741424f, +0.1499472f, -0.0304640f, +0.0703455f, +0.2735144f, -0.2045255f, +0.0266649f, +0.0949463f,
  -0.0146736f, +0.0569463f, -0.1506142f, +0.1200015f, +0.1558324f, -0.2014932f, -0.0461979f, +0.0070862f,
  -0.1373831f, -0.0765179f, -0.0920345f, +0.0667226f, +0.2108094f, -0.0940656f, -0.1364760f, +0.0013905f,
  -0.2148241f, -0.0237067f, -0.2645633f, +0.4080361f, -0.1208416f, +0.2130169f, -0.0720799f, +0.3920032f,
  -0.2473501f, -0.0699390f, -0.1354213f, +0.1947150f, -0.2821417f, +0.0157844f, +0.2776687f, +0.1025760f,
  -0.3740653f, +0.1571231f, -0.1029854f, +0.1809170f, -0.2737288f, +0.1329664f, -0.1343794f, +0.0441948f,
  +0.0362926f, +0.1182189f, +0.2264480f, +0.1480003f, -0.1638921f, -0.1040255f, +0.1712431f, -0.0661787f,
  +0.0573200f, -0.1268926f, +0.4969063f, +0.2133735f, +0.0301391f, +0.1375733f, +0.3127492f, -0.0816633f,
  -0.2679185f, -0.1276394f, +0.1025821f, +0.1329169f, -0.0500993f, -0.2200550f, -0.0063549f, -0.0447963f,
  +0.1767066f, +0.0128179f, +0.0230034f, -0.0545064f, -0.1829565f, -0.0258456f, -0.1148598f, -0.0320078f,
  -0.1202089f, +0.2162228f, +0.0265592f, -0.0636247f, -0.2731943f, +0.4604463f, +0.2342881f, -0.0435507f,
  -0.2211427f, +0.3129806f, +0.1921341f, +0.2219827f, +0.2587940f, -0.2838109f, -0.0523353f, -0.0233312f,
  -0.2817412f, -0.0916241f, +0.0549241f, +0.2650766f, +0.1004288f, +0.1933439f, +0.0505767f, +0.3311000f,
  +0.0626392f, +0.2779766f, +0.4564146f, -0.1919062f, +0.2972874f, +0.8214083f, -0.2322230f, -0.1503370f,
  +0.0190933f, -0.3575085f, +0.2730412f, -0.0176335f, +0.1497009f, +0.2284990f, +0.0435657f, +0.3034993f,
  -0.1190740f, -0.1738335f, +0.2296675f, +0.3372777f, +0.1006991f, -0.1607928f, +0.3787179f, -0.0166528f,
  -0.0086892f, +0.0668027f, +0.0975261f, +0.4255766f, -0.6789979f, +0.0328218f, +0.0563366f, +0.2595379f,
  +0.1151487f, +0.0534925f, -0.0112345f, +0.4244309f, -0.2020838f, -0.1159566f, -0.0025718f, +0.1104800f,
  +0.0305901f, +0.2854224f, +0.0885030f, +0.2289196f, +0.0564087f, -0.2861601f, +0.0095609f, -0.0281585f,
  -0.0195864f, +0.3472854f, +0.0795875f, -0.0680519f, -0.0530747f, -0.0739576f, +0.3217391f, -0.2399314f,
  +0.0812156f, +0.1951376f, +0.0574533f, +0.4498475f, -0.5791693f, -0.4048698f, -0.2413800f, -0.2227973f,
  +0.0414907f, -0.0517104f, +0.0566712f, -0.1004733f, +0.0366401f, +0.1264828f, +0.0421478f, -0.1278161f,
  -0.0325587f, -0.4965295f, +0.3853493f, +0.0312552f, +0.0395401f, +0.2393732f, +0.0252058f, -0.3768006f,
  +0.2078593f, -0.5634448f, +0.1744693f, +0.1436529f, -0.2479862f, +0.1747683f, -0.1395980f, -0.1213979f,
  -0.0567287f, +0.0465476f, +0.0052379f, +0.0761785f, +0.2090294f, +0.0769804f, +0.0767394f, +0.0304040f,
  -0.0606616f, +0.2659551f, -0.1910989f, -0.0559040f, +0.0737324f, +0.2725227f, +0.2478088f, -0.0044164f,
  -0.0529606f, -0.1927902f, -0.1680290f, -0.1527149f, +0.0111300f, -0.2515020f, -0.2329403f, +0.0235913f
);

const float biases[4] = float[4](
  -0.5007257f, -0.0358716f, +0.0034206f, +0.0516715f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer82 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0646752f, +0.0520039f, +0.1600141f, +0.1566592f, -0.1577293f, +0.4214741f, +0.1182285f, +0.0011134f,
  -0.1246170f, +0.3877165f, +0.0501190f, +0.0134517f, +0.4426229f, +0.1981366f, +0.2038799f, +0.3329837f,
  -0.0779584f, +0.0877553f, -0.0702832f, +0.0719723f, -0.0007830f, +0.3820364f, +0.1144395f, +0.5803070f,
  -0.2705757f, -0.0342900f, +0.0025921f, -0.0681776f, +0.1837715f, +0.5501354f, -0.1224506f, -0.2563489f,
  -0.1638976f, -0.2330197f, -0.1593314f, +0.0065651f, +0.7754552f, +0.0899100f, +0.1368522f, -0.1832315f,
  -0.0432415f, -0.0425860f, -0.2347129f, -0.2577486f, +0.0846377f, +0.1521301f, -0.1572018f, +0.0498644f,
  -0.3505861f, -0.0145371f, -0.0169312f, +0.1056544f, +0.1856955f, +0.1958213f, +0.0107947f, -0.0825215f,
  -0.0715377f, -0.0169750f, -0.0686481f, -0.2621486f, +0.1409212f, +0.0656964f, +0.3726079f, +0.0354519f,
  -0.3883317f, -0.0375307f, +0.2961298f, -0.3496217f, +0.0184459f, -0.1455809f, -0.4257360f, +0.0431812f,
  -0.2929052f, -0.0883855f, +0.0105249f, +0.0143759f, +0.1673583f, +0.2699854f, -0.2790377f, +0.1740432f,
  -0.0069064f, -0.3135860f, -0.1980313f, -0.0290486f, +0.6831198f, -0.0097403f, -0.2321840f, +0.0603110f,
  -0.0217943f, +0.0986375f, -0.0747020f, +0.2022489f, -0.0222454f, +0.0197758f, -0.1981013f, +0.1814060f,
  +0.3078198f, +0.0746543f, -0.1365396f, -0.2249832f, -0.2241479f, -0.1266535f, -0.1285992f, -0.1839172f,
  -0.1560673f, -0.3131469f, -0.4446370f, -0.1206051f, -0.4662040f, -0.0940840f, +0.7899376f, -0.6009389f,
  +0.1024927f, -0.0688890f, -0.1325378f, -0.2029534f, -0.2075333f, -0.0300225f, +0.2145984f, -0.5599293f,
  +0.0385889f, -0.0486792f, -0.2389134f, -0.1775832f, +0.0731643f, -0.0664060f, +0.1642085f, +0.0762044f,
  +0.1041407f, -0.3186381f, -0.1356098f, -0.2562556f, +0.3149309f, -0.0914880f, -0.0026282f, +0.1783195f,
  +0.0702148f, +0.0661018f, -0.5871488f, -0.2425531f, +0.0025521f, +0.0455596f, +0.0420159f, +0.0181701f,
  +0.2954007f, +0.2697911f, +0.0207832f, +0.0899491f, +0.1983661f, -0.2359355f, -0.1456460f, -0.3268341f,
  -0.0805112f, -0.0892802f, -0.1150708f, +0.0441701f, +0.3475215f, -0.2556992f, +0.0279323f, +0.0260259f,
  +0.0106709f, -0.0383554f, +0.0126798f, -0.0670204f, +0.1251201f, +0.0438339f, -0.0657190f, -0.0894089f,
  -0.3236929f, -0.0837851f, -0.1126792f, +0.3400184f, -0.4060041f, -0.3442244f, +0.0268518f, +0.2204290f,
  -0.0499335f, -0.1620898f, +0.0002159f, +0.0507448f, +0.6464329f, -0.0707917f, +0.0990772f, +0.0830578f,
  +0.0073303f, -0.0717242f, +0.0100327f, +0.1049827f, +0.2773903f, -0.2563903f, -0.1065087f, -0.0733969f,
  +0.1254203f, -0.1329744f, -0.0338416f, -0.1138101f, -0.2427779f, -0.0317813f, -0.2572218f, -0.0589443f,
  +0.0476116f, +0.1513681f, +0.2323420f, +0.1407442f, +0.0468559f, -0.2765851f, -0.0607436f, -0.4156268f,
  +0.1315991f, -0.0949289f, -0.1488589f, +0.0459298f, +0.0786878f, +0.1729162f, -0.1271434f, -0.0911281f,
  +0.0125799f, -0.1889218f, +0.0975512f, +0.1627720f, -0.1647178f, -0.0680388f, +0.1058475f, +0.1602320f,
  +0.0878125f, -0.1380708f, -0.1274144f, -0.0047150f, -0.0910121f, -0.0213885f, -0.1499727f, +0.1523756f,
  +0.1942142f, -0.0989981f, +0.0691338f, -0.0728698f, -0.1457617f, -0.0647371f, -0.0151007f, -0.0522370f,
  -0.0570224f, +0.2543215f, -0.0664726f, +0.1416216f, -0.4900974f, -0.0410226f, -0.1961584f, -0.1981175f,
  -0.0021823f, -0.0211765f, +0.2508897f, -0.0605883f, +0.0439349f, -0.0856900f, +0.4614229f, +0.3004295f,
  -0.1510115f, -0.0991517f, -0.2329162f, +0.0912936f, -0.3731418f, -0.4020515f, +0.1583394f, +0.6209356f,
  -0.0576685f, -0.0261031f, +0.0290688f, +0.1497760f, -0.0814751f, -0.0513689f, +0.0066825f, +0.0564829f,
  +0.0592889f, -0.0587496f, -0.4108402f, +0.0549827f, +0.1077384f, +0.1519605f, -0.4604219f, +0.2564906f,
  -0.0115068f, -0.2732094f, -0.0792323f, +0.1651381f, -0.2358923f, -0.0376778f, -0.1461208f, -0.0511998f
);

const float biases[4] = float[4](
  +0.0185755f, +0.0475335f, +0.0076822f, +0.1467108f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer82 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.4220549f, -0.2401544f, +0.0545920f, +0.2788478f, +0.1883382f, +0.1519740f, -0.0264051f, +0.3163106f,
  +0.1561155f, -0.3245758f, -0.0913252f, +0.1807291f, +0.2254062f, +0.0807726f, -0.0768297f, +0.4260250f,
  +0.1355108f, -0.0646858f, -0.0960930f, +0.0254881f, -0.0719934f, +0.0271167f, +0.0464848f, +0.3520330f,
  -0.0739778f, -0.2732291f, -0.1549584f, +0.1819445f, +0.2131198f, +0.4316292f, -0.2347675f, +0.3277421f,
  -0.0964822f, -0.2174868f, +0.4896291f, +0.1574709f, -0.3723181f, +0.1633102f, -0.3521034f, +0.0026291f,
  +0.0761557f, +0.1193900f, -0.1966917f, -0.1667520f, -0.3884789f, +0.0038893f, +0.0997985f, +0.2342331f,
  -0.2095752f, -0.3060609f, -0.0815566f, +0.0934607f, +0.0835925f, +0.0121810f, +0.0059150f, -0.1098283f,
  -0.0378534f, -0.2677939f, -0.1980782f, -0.1339240f, -0.0607063f, -0.1867604f, +0.2553402f, +0.3565467f,
  -0.1347172f, +0.0770290f, -0.2432020f, -0.3196927f, +0.2053407f, +0.0438515f, -0.1137554f, +0.0683966f,
  -0.1734485f, +0.0274482f, -0.0188077f, +0.0393082f, -0.1861644f, +0.0345875f, -0.1973255f, -0.2019918f,
  +0.1892664f, +0.0468915f, -0.2797437f, -0.0868568f, -0.1014250f, +0.0502550f, -0.2189942f, -0.2399057f,
  +0.0783281f, +0.2319018f, -0.0334717f, +0.0916693f, -0.0153372f, -0.0697864f, +0.4423528f, -0.1335094f,
  -0.0046701f, +0.2345625f, -0.0077860f, +0.0721535f, -0.1113066f, -0.0424893f, -0.1688796f, -0.2170365f,
  -0.2370635f, -0.2069049f, +0.3565249f, +0.0151675f, -0.6648604f, -0.0432645f, -0.3560297f, -0.3341704f,
  +0.0436168f, +0.1163907f, +0.1388791f, -0.0153104f, +0.3819969f, -0.0567375f, -0.2429824f, +0.0136364f,
  -0.0563479f, +0.0543749f, +0.0631067f, +0.1284634f, -0.0430011f, +0.0466498f, -0.1173305f, +0.2983190f,
  -0.1422775f, -0.2536075f, +0.1218009f, +0.1039910f, -0.0050047f, +0.0777865f, -0.1814688f, -0.0429412f,
  +0.2799810f, -0.1567538f, +0.0042530f, +0.2623236f, -0.1276309f, +0.0719630f, -0.2745560f, -0.1383614f,
  -0.3889818f, -0.2091015f, -0.0585184f, +0.1158894f, +0.0228125f, +0.1672413f, -0.1532951f, +0.6102841f,
  +0.0922045f, -0.3188006f, -0.0237357f, +0.2304824f, -0.1365424f, +0.2731013f, -0.5305175f, +0.2829129f,
  +0.1736609f, -0.0398708f, +0.1561005f, -0.0548100f, +0.2096063f, -0.0682466f, -0.2332112f, -0.1204840f,
  -0.0486726f, +0.0569288f, +0.1037468f, +0.0012945f, +0.0411965f, +0.1642913f, +0.0321019f, -0.1096898f,
  -0.1258478f, -0.3187630f, -0.0504312f, -0.0815362f, +0.3759819f, -0.0052534f, -0.5225905f, -0.2815894f,
  -0.1633273f, -0.0798816f, +0.2413816f, +0.1598393f, +0.1748774f, -0.2268668f, +0.3337605f, +0.0982514f,
  -0.0440240f, -0.0664021f, -0.0973705f, +0.0630842f, +0.1117217f, -0.0126135f, -0.0519291f, -0.0095408f,
  +0.0576428f, -0.3098442f, +0.1615689f, -0.0110268f, +0.0476349f, +0.1518260f, -0.0045114f, +0.2268468f,
  -0.1338861f, +0.0661329f, +0.0495782f, -0.0700322f, +0.1278940f, -0.1963695f, -0.0019105f, -0.1989148f,
  +0.0397208f, -0.1673629f, -0.0544690f, -0.0081735f, +0.0716746f, +0.0188391f, -0.0111715f, -0.1507561f,
  -0.0616597f, -0.1485673f, +0.1072298f, -0.0092095f, +0.1884958f, +0.2087957f, -0.0991368f, +0.0456151f,
  +0.1762189f, -0.0152013f, -0.1201609f, -0.1843974f, -0.2364437f, +0.3944780f, +0.3045440f, +0.0981063f,
  -0.2956064f, -0.1033935f, -0.1110796f, +0.2525222f, +0.0934084f, +0.1188794f, -0.1797617f, +0.4008174f,
  -0.1117543f, -0.0806987f, -0.0678451f, +0.0560098f, -0.2099798f, +0.0358437f, -0.2883212f, +0.1367192f,
  +0.0007392f, -0.3034587f, -0.5706131f, -0.3347109f, -0.4642875f, -0.0047038f, -0.1046693f, +0.2189317f,
  -0.0785300f, -0.2442323f, -0.0206426f, +0.0382750f, +0.0010053f, -0.0204994f, +0.1201259f, +0.0857158f,
  -0.0541344f, -0.2516909f, -0.0815653f, -0.0292411f, -0.0612970f, +0.0190307f, +0.0992176f, +0.3318915f,
  -0.0928897f, -0.2680590f, -0.0931853f, -0.0683702f, -0.0901385f, +0.1213528f, -0.0850380f, +0.1055555f
);

const float biases[4] = float[4](
  +0.0189009f, +0.0057050f, -0.0398957f, -0.0199952f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer83 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0194219f, +0.0189835f, +0.0056788f, +0.0860235f, +0.0546050f, -0.1247517f, +0.0402629f, +0.0577242f,
  -0.0580613f, +0.3032832f, -0.0187470f, +0.3146247f, +0.0555273f, -0.1477371f, -0.0355169f, -0.1088984f,
  +0.0588351f, -0.1194820f, +0.0449541f, +0.1004005f, +0.1008033f, +0.0679051f, -0.0671369f, +0.0024260f,
  +0.0316702f, +0.0058891f, -0.2172988f, -0.1940134f, -0.3234428f, +0.0164779f, +0.0555430f, -0.1635591f,
  +0.0119585f, -0.4753780f, +0.1746616f, -0.8839183f, +0.5662679f, +0.3485695f, +0.5203210f, +0.2012719f,
  -0.3240708f, -0.0780905f, +0.0618316f, -0.2089280f, +0.0197592f, +0.0378926f, -0.3364299f, +0.2071588f,
  +0.0051483f, -0.1358030f, +0.2853775f, +0.0110727f, -0.1072563f, -0.0183419f, +0.1592290f, -0.0914153f,
  -0.1642377f, -0.1594633f, +0.3419822f, +0.0728536f, -0.3186134f, -0.4253971f, -0.3170492f, -0.4615292f,
  +0.1327996f, -0.1558738f, -0.0522128f, +0.4217706f, +0.1666910f, -0.2218586f, -0.0333200f, -0.3396489f,
  +0.1450184f, -0.3315547f, +0.3553328f, -0.2992603f, +0.2868347f, -0.1723828f, +0.1082454f, +0.0677733f,
  +0.0170445f, -0.3646874f, +0.0966119f, -0.7417617f, +0.2102962f, +0.1252685f, +0.2847893f, +0.0060832f,
  -0.1095890f, -0.0066751f, -0.0314257f, -0.1905889f, +0.0433260f, -0.0529926f, +0.0016751f, -0.1268918f,
  -0.2260462f, +0.2132770f, +0.1632985f, -0.0266735f, -0.0294979f, -0.0318724f, -0.2940251f, -0.1013594f,
  -0.0122210f, +0.3702518f, +0.1703906f, +0.5959971f, +0.0981842f, -0.4331824f, -0.5347564f, -0.1770131f,
  +0.1224101f, +0.0048975f, +0.3689811f, +0.3457546f, -0.3048623f, -0.0195284f, -0.0597350f, +0.0136339f,
  -0.1280611f, +0.0629388f, -0.1243399f, +0.1325712f, +0.2626597f, -0.0620089f, +0.1274847f, +0.1305693f,
  -0.0912142f, -0.1817531f, -0.1049122f, +0.0204291f, -0.0094887f, -0.3274507f, +0.3369977f, +0.1054409f,
  +0.0841151f, -0.1309831f, -0.2505231f, +0.1852401f, -0.1303883f, +0.1806682f, +0.0443451f, -0.0758801f,
  +0.0085841f, +0.1563666f, -0.0672336f, -0.2086983f, -0.0097804f, +0.1074351f, -0.0422564f, +0.2042097f,
  -0.2975279f, +0.1494131f, -0.0262945f, -0.0142300f, +0.2537741f, +0.0193372f, -0.2556941f, +0.0144117f,
  -0.1811257f, +0.0566941f, -0.0465085f, -0.0668185f, +0.0880443f, -0.3705739f, -0.0011851f, -0.1358690f,
  +0.3512322f, +0.1234070f, +0.1624813f, -0.2691848f, +0.2086088f, +0.0858032f, +0.3345550f, -0.0505941f,
  -0.2235578f, -0.5001084f, +0.0819612f, +0.0635462f, -0.3796616f, +0.5078616f, -0.0336448f, -0.0270800f,
  +0.0892275f, +0.1975212f, -0.2469319f, +0.5459861f, +0.1599266f, -0.0685024f, -0.3877604f, -0.0674238f,
  +0.0269675f, -0.0513178f, +0.0639097f, -0.2238833f, +0.0892757f, +0.2011298f, +0.0567294f, -0.0718485f,
  +0.3161884f, -0.0353803f, +0.4048576f, -0.3812867f, -0.3405942f, +0.0829384f, -0.0830072f, +0.2167702f,
  +0.2139487f, +0.0163374f, +0.0667740f, -0.0418994f, -0.0066802f, +0.1419250f, +0.0435274f, -0.1188046f,
  -0.0444628f, +0.0045726f, +0.2033051f, -0.3113587f, -0.1468458f, +0.1510738f, +0.2898493f, -0.0309163f,
  +0.0570574f, -0.1225075f, +0.0272031f, -0.4297137f, -0.1146057f, -0.4717542f, -0.2089952f, -0.2750046f,
  -0.0432128f, -0.1339431f, +0.0115379f, -0.2258748f, +0.2635458f, +0.0832471f, +0.1839949f, +0.0051725f,
  -0.1010081f, -0.0937500f, -0.0087755f, -0.3326874f, -0.4208272f, -0.0364982f, -0.0634195f, -0.0384882f,
  +0.2202945f, +0.0870821f, -0.1148085f, +0.3500206f, +0.3760892f, -0.4028288f, +0.4050083f, -0.7002171f,
  -0.2779267f, -0.0520048f, -0.4212490f, -0.2724664f, +0.0179123f, +0.0813220f, +0.0429505f, +0.1363126f,
  -0.0958184f, -0.2293897f, +0.0574450f, -0.0992908f, +0.0438301f, -0.0072548f, -0.0583662f, -0.0978238f,
  +0.2483398f, +0.1441063f, -0.0750902f, -0.0892013f, +0.0568843f, +0.0220807f, -0.1355874f, +0.0089602f,
  -0.0360128f, +0.0445018f, +0.0413924f, +0.0262639f, +0.0125602f, +0.1470938f, -0.1225877f, +0.1078575f
);

const float biases[4] = float[4](
  -0.0967884f, -0.0582525f, +0.0415092f, +0.1153484f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer83 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1292588f, +0.0532442f, +0.0305248f, -0.0210904f, +0.1443274f, -0.1251203f, +0.2054954f, +0.0432962f,
  -0.0628649f, -0.1282585f, -0.1633150f, -0.2425611f, +0.3333438f, -0.0547412f, -0.1022838f, +0.0749705f,
  +0.1184230f, -0.0587128f, -0.2047423f, -0.0797138f, +0.1416368f, -0.1260798f, -0.0894742f, +0.0376006f,
  -0.1674103f, +0.0197159f, -0.0509325f, +0.1678123f, -0.1034441f, -0.1305465f, -0.1386634f, +0.1001167f,
  +0.1250169f, +0.3040327f, -0.2173961f, -0.2405494f, +0.1931011f, +0.0452347f, +0.2361147f, +0.1899053f,
  -0.0864316f, +0.0716807f, -0.2976373f, -0.1330987f, +0.0102766f, -0.2777681f, -0.0053936f, +0.0606241f,
  -0.1923941f, +0.0536914f, +0.0727681f, -0.3808042f, -0.5172260f, +0.0650505f, +0.0105183f, -0.1288892f,
  -0.1406590f, +0.0400509f, -0.1381660f, -0.0236308f, -0.0569678f, -0.0023259f, +0.0365361f, -0.1813039f,
  -0.0531383f, +0.0879290f, -0.0605509f, -0.1065198f, +0.0022393f, +0.2127906f, +0.0201670f, +0.0099662f,
  +0.2211544f, -0.0581076f, +0.0322510f, +0.0967672f, +0.1561534f, -0.2697101f, -0.1148129f, +0.1560613f,
  +0.1759949f, -0.3348082f, +0.0632844f, -0.1520604f, -0.0690804f, +0.0763672f, +0.4239516f, -0.1474901f,
  -0.0471234f, +0.1007437f, -0.1899351f, +0.0641232f, +0.1719837f, -0.0737218f, -0.1527600f, -0.1623937f,
  -0.3535402f, +0.0356607f, +0.0207140f, -0.1325165f, -0.0515804f, +0.1351152f, -0.2380701f, +0.0211448f,
  -0.0550826f, -0.1423340f, -0.0603185f, -0.0962914f, +0.3354494f, +0.2684123f, +0.3022531f, -0.1332499f,
  -0.0759360f, +0.1915903f, -0.0551997f, +0.0699891f, -0.0382197f, -0.4693254f, +0.1583229f, +0.1648804f,
  -0.0072457f, +0.0359290f, +0.1349782f, +0.0467331f, +0.2156257f, -0.0811305f, +0.0808546f, +0.2150381f,
  -0.0070344f, +0.1428920f, -0.2033640f, -0.1091325f, -0.1042714f, -0.0086062f, +0.1096963f, -0.0933272f,
  -0.0797971f, -0.1188039f, +0.0104108f, -0.0779261f, -0.0381504f, -0.0815200f, -0.1667117f, +0.0046201f,
  +0.0283806f, -0.1435640f, -0.0467642f, -0.2156128f, +0.1726451f, +0.0729671f, -0.1590404f, +0.1419840f,
  -0.2285362f, +0.0608716f, -0.4188375f, +0.5280585f, +0.2510891f, -0.0136272f, -0.4754111f, +0.2352351f,
  -0.0544070f, -0.1539115f, +0.0970908f, -0.0734164f, +0.0288832f, -0.2354485f, +0.3394362f, +0.0447781f,
  +0.2854800f, +0.2873272f, +0.3090704f, -0.2095059f, -0.1011772f, -0.0095750f, +0.2055191f, -0.2686307f,
  -0.0815524f, -0.3428953f, +0.6058103f, -0.4018873f, -0.6426457f, -0.1248643f, +0.4009444f, -0.3132471f,
  +0.3211606f, -0.0346483f, +0.0789550f, +0.2485410f, +0.3457603f, +0.3468483f, -0.6376294f, -0.0084437f,
  -0.1031703f, -0.2353568f, -0.1182507f, +0.2567475f, +0.0070228f, -0.0294307f, +0.0965390f, +0.0754758f,
  +0.1721048f, +0.3186108f, -0.1152582f, -0.3439778f, +0.3519085f, +0.0336071f, -0.0593791f, -0.0821793f,
  +0.0374335f, -0.1829304f, +0.3487926f, +0.0076894f, -0.2481164f, -0.3042336f, -0.0302676f, -0.0913729f,
  -0.2095638f, +0.0365170f, +0.0672041f, -0.0158966f, +0.0054433f, +0.2264185f, -0.2354429f, +0.1864431f,
  -0.0082470f, -0.0058014f, -0.2026730f, +0.2038337f, -0.1819826f, +0.2714019f, -0.1110969f, +0.2776844f,
  -0.0838662f, -0.0106006f, -0.0375240f, -0.2455952f, +0.1461364f, -0.0858217f, +0.0313788f, -0.0259191f,
  -0.1726646f, -0.0804342f, +0.0356307f, -0.2525384f, -0.1236023f, +0.1361983f, -0.2259047f, -0.0508238f,
  +0.0785260f, -0.4467953f, -0.1138228f, +0.1015550f, +0.2042987f, -0.4187041f, -0.0212454f, -0.1432544f,
  +0.0554814f, +0.0589493f, +0.0331544f, -0.3821606f, +0.2002716f, +0.2372383f, -0.1243661f, +0.1848157f,
  -0.2162981f, -0.1585384f, +0.0120352f, -0.2314315f, -0.1866135f, +0.1669989f, +0.0899712f, -0.1235442f,
  +0.2769474f, -0.0304683f, -0.0078722f, +0.0226908f, -0.2337362f, +0.1758759f, +0.2968693f, -0.0853413f,
  +0.0373078f, +0.0277139f, +0.3383833f, +0.0091631f, +0.1182917f, +0.0417058f, -0.0775476f, +0.1388172f
);

const float biases[4] = float[4](
  -0.0092099f, -0.0028068f, -0.0412864f, +0.0650199f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer84 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0755691f, -0.0237744f, +0.0307703f, -0.1473201f, +0.1582420f, -0.0745449f, -0.4038653f, +0.0490474f,
  +0.3509075f, -0.1673081f, -0.1660365f, -0.4437475f, +0.0577762f, -0.0384036f, +0.0587298f, -0.0385066f,
  -0.2772144f, -0.0657649f, +0.1475907f, +0.1432075f, +0.3930808f, -0.0320534f, -0.3321424f, +0.1230967f,
  -0.1862979f, -0.2174377f, -0.0459175f, +0.1823187f, -0.2119741f, +0.3346169f, +0.2904814f, -0.3024013f,
  +0.1561862f, +0.0596075f, +0.1258672f, -0.1543785f, -0.1553309f, +0.2026313f, -0.0831900f, +0.1648051f,
  -0.2408029f, +0.0259577f, -0.0428505f, +0.0722875f, +0.1356657f, +0.2574266f, +0.0162726f, -0.0213820f,
  -0.1467114f, +0.1379256f, -0.0892051f, +0.0295723f, +0.0330757f, +0.1408667f, +0.1989512f, +0.1138355f,
  +0.0189794f, +0.1028289f, -0.0205621f, -0.0446182f, -0.1053182f, -0.0878593f, +0.2902640f, +0.1012577f,
  -0.0135819f, +0.1712204f, -0.0987595f, -0.1725568f, +0.0313445f, -0.2823914f, -0.0828951f, +0.2590000f,
  +0.1440582f, -0.1096710f, -0.0816843f, +0.1350646f, -0.3149412f, +0.1916383f, +0.0912349f, -0.0765075f,
  -0.1523474f, -0.0416043f, -0.1545922f, +0.0832328f, -0.2282397f, +0.2020359f, +0.0520887f, +0.1250477f,
  +0.0310597f, -0.1323917f, +0.0570933f, +0.2661902f, -0.2888098f, -0.0767633f, -0.2120737f, +0.1102159f,
  -0.1158987f, -0.0913619f, +0.0794029f, +0.2331693f, +0.0415418f, +0.0561618f, -0.0119148f, -0.1349526f,
  +0.0659834f, -0.0866239f, -0.0227605f, -0.0652283f, -0.6487790f, +0.4273559f, -1.0954230f, +0.5262823f,
  -0.1905543f, -0.3152360f, +0.2355312f, -0.1411178f, +0.0613111f, +0.2716196f, +0.2329504f, +0.2902867f,
  +0.1597352f, +0.0067894f, +0.0595660f, +0.0563449f, -0.0193529f, +0.0047160f, -0.1921549f, +0.0315624f,
  +0.1329374f, -0.4999661f, -0.0684294f, -0.0810985f, -0.0218188f, +0.5409817f, -0.0245206f, -0.0587776f,
  -0.0344827f, -0.1386359f, +0.3105820f, -0.0853495f, -0.1291839f, +0.0489833f, +0.0279227f, +0.0041865f,
  -0.1014248f, -0.0419640f, +0.1502851f, -0.0222275f, +0.0656497f, +0.1107326f, -0.2249673f, -0.2946111f,
  -0.3880542f, -0.0317092f, +0.2929600f, +0.1122731f, +0.2679235f, +0.0159879f, -0.2935176f, +0.0767009f,
  -0.1777456f, -0.1830837f, +0.0643424f, +0.0306826f, -0.0745905f, +0.0926404f, +0.0115711f, -0.1560932f,
  -0.3716204f, -0.0547582f, +0.0904267f, +0.3814494f, -0.0046041f, +0.2905615f, -0.0926067f, -0.2543925f,
  -0.1074393f, +0.0329986f, -0.2995351f, -0.2379438f, -0.1776985f, +0.0963949f, +0.4648775f, -0.1536856f,
  +0.0315283f, -0.0926730f, -0.0395576f, +0.0530671f, -0.1299508f, -0.0177367f, +0.1029190f, -0.1535268f,
  +0.2558610f, -0.1306492f, +0.1337151f, +0.2300308f, -0.1476599f, +0.3435719f, +0.0678733f, -0.0140857f,
  -0.0053929f, -0.1825829f, +0.0546787f, -0.2970836f, +0.2558548f, -0.2578450f, -0.6456951f, -0.0264272f,
  +0.0294724f, -0.2529579f, +0.0256576f, -0.1363049f, -0.1722065f, -0.0177675f, +0.0854820f, -0.2152879f,
  -0.0510250f, +0.0033493f, +0.2087286f, -0.0710226f, +0.1423279f, +0.0495717f, -0.0281907f, -0.2903673f,
  -0.2316288f, -0.1197273f, +0.2020930f, +0.2106017f, +0.1077155f, +0.0219338f, -0.1623630f, +0.0488754f,
  -0.0305955f, -0.0780567f, +0.0219600f, -0.0092119f, +0.3417722f, +0.1057454f, +0.0666350f, +0.0008586f,
  +0.2522619f, +0.0880499f, +0.2787441f, +0.0634929f, +0.0245899f, -0.0597380f, -0.0227411f, +0.0125406f,
  +0.4852643f, -0.4714456f, +0.1288988f, -0.3869495f, +0.1290495f, -0.0740646f, +0.3825203f, -0.2104795f,
  -0.1240541f, -0.1058496f, +0.2281865f, +0.1316966f, -0.2547202f, +0.1465915f, -0.1961377f, +0.0713032f,
  +0.0153055f, +0.2509602f, +0.1208057f, +0.3756031f, -0.0463502f, +0.0256096f, -0.4935471f, -0.1371409f,
  +0.2602675f, -0.3628168f, +0.2560519f, +0.6051227f, +0.2133889f, +0.2725269f, +0.5714660f, -0.1530541f,
  +0.0267851f, +0.1166311f, +0.1514030f, +0.0532126f, +0.0863597f, +0.0206986f, -0.0648962f, +0.0969027f
);

const float biases[4] = float[4](
  +0.0086912f, +0.0193069f, +0.0067302f, +0.0597060f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer84 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0580997f, +0.0829314f, -0.1260774f, -0.1211846f, +0.0164581f, +0.0453591f, -0.0351162f, -0.0070284f,
  -0.0027451f, -0.2833949f, -0.0872409f, -0.0008821f, -0.0545768f, +0.2346976f, +0.1882283f, +0.1060589f,
  +0.0314994f, -0.0150286f, -0.1365636f, -0.0030973f, +0.2596564f, -0.0094762f, +0.0179203f, -0.0028797f,
  -0.2998431f, +0.0037513f, -0.0907586f, -0.0104240f, +0.2066286f, +0.1169404f, +0.1674628f, +0.0008001f,
  +0.1818229f, +0.1667169f, +0.1691901f, -0.2582234f, -0.2359492f, -0.2049927f, -0.5287060f, -0.0546528f,
  -0.0264373f, +0.0078168f, +0.1173454f, +0.2760118f, +0.0669152f, -0.0839584f, +0.0338492f, +0.0193779f,
  -0.1818510f, +0.0730962f, -0.1858796f, -0.2738918f, -0.0560102f, -0.1638767f, -0.0605867f, -0.0667385f,
  -0.0127235f, +0.1837140f, +0.0246000f, -0.1124149f, -0.4268558f, +0.0388965f, -0.0372603f, +0.1812080f,
  -0.0175409f, -0.1841491f, -0.1082274f, +0.0454769f, -0.1293140f, -0.2733001f, -0.0997635f, +0.0552395f,
  +0.2347021f, -0.1622986f, +0.1428867f, +0.0418163f, -0.1182587f, -0.1164429f, +0.0185046f, -0.1302750f,
  -0.4220542f, -0.3399755f, -0.0461334f, +0.1875879f, -0.1017835f, -0.1040652f, +0.1351801f, -0.2579085f,
  -0.2106290f, -0.0075267f, +0.1660088f, +0.1384671f, -0.0084139f, -0.0335117f, +0.1172914f, -0.0575320f,
  -0.1035259f, -0.4403920f, +0.0082820f, +0.1003934f, -0.0365727f, +0.2041800f, +0.1175158f, -0.0870942f,
  +0.4252546f, +0.2784425f, +0.0629523f, +0.1444290f, -0.0977001f, -0.1687860f, -0.0293895f, +0.0233040f,
  -0.2083102f, -0.3623720f, -0.0459319f, -0.0811207f, +0.2094994f, +0.0980293f, +0.0650959f, +0.0315111f,
  -0.0453352f, -0.2179044f, +0.0892469f, +0.0575871f, +0.1415947f, +0.1061642f, +0.1187945f, -0.1485422f,
  +0.0922525f, +0.0870130f, +0.1321452f, +0.4033554f, -0.0526351f, +0.1706400f, -0.1689603f, -0.3501377f,
  -0.1195354f, -0.2565481f, +0.0693274f, -0.0147125f, +0.0537584f, +0.3093486f, +0.0527475f, -0.0338845f,
  -0.2101755f, -0.0905945f, -0.1282632f, +0.0675644f, +0.1422242f, +0.1073075f, +0.2193846f, -0.2526654f,
  -0.3301964f, +0.0884529f, -0.0381026f, +0.1305075f, +0.0135503f, -0.0983854f, +0.3354785f, -0.0537670f,
  -0.1252093f, -0.0517173f, -0.0312769f, +0.0657054f, +0.1073958f, -0.0858484f, +0.1782462f, -0.2758942f,
  -0.0676815f, -0.2281116f, -0.0995820f, -0.1629360f, +0.0080265f, -0.0719377f, -0.1637167f, -0.0289217f,
  +0.4259828f, -0.2856512f, -0.3526199f, -0.4635791f, -0.1251370f, -0.2015882f, +0.5678426f, -0.0282350f,
  -0.4095027f, -0.3304625f, +0.1223003f, +0.0325500f, +0.0571356f, -0.1395659f, -0.1487298f, -0.2091016f,
  -0.0159534f, -0.1397882f, +0.0596993f, -0.1918898f, +0.1122579f, +0.2936040f, +0.3901401f, -0.0634634f,
  -0.0589862f, +0.4149888f, -0.0810227f, +0.2184330f, -0.0018617f, -0.2240945f, -0.1622975f, -0.1375085f,
  +0.1049281f, -0.1541307f, +0.2268567f, -0.2226014f, -0.0258249f, +0.0090208f, -0.1848149f, -0.1030403f,
  -0.1575885f, +0.0792075f, -0.0790564f, +0.0215349f, +0.1904320f, -0.0565768f, +0.0795390f, -0.0616326f,
  -0.2899644f, +0.3577472f, +0.1105765f, -0.1151596f, -0.0308722f, -0.0499650f, -0.0719859f, -0.1081290f,
  +0.1680989f, +0.0221692f, -0.1828297f, +0.0273872f, +0.2372232f, +0.0082282f, +0.1401705f, +0.0120844f,
  +0.0733391f, +0.1658790f, -0.2111968f, +0.1682734f, +0.0819860f, -0.1578384f, -0.1140668f, -0.1592627f,
  +0.2146169f, -0.2281314f, -0.5087467f, +0.3358456f, -0.2701870f, +0.0745233f, -0.0523817f, +0.1853541f,
  -0.2870932f, -0.1568874f, +0.1914614f, +0.1535017f, -0.0865038f, -0.0222503f, +0.0366108f, +0.0350521f,
  -0.1208243f, +0.0692095f, +0.0281741f, -0.0986328f, +0.0858831f, +0.0409787f, +0.2200851f, -0.0466878f,
  +0.0367421f, +0.1567564f, +0.0100695f, +0.2540089f, -0.1285135f, +0.1100963f, +0.2407894f, -0.1935515f,
  -0.0377177f, +0.0974753f, -0.0637420f, +0.1088861f, -0.0720061f, -0.0271518f, -0.1068026f, -0.1536407f
);

const float biases[4] = float[4](
  -0.0006070f, +0.0362097f, -0.0027404f, -0.0188905f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer85 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1110542f, +0.0166963f, -0.1062892f, +0.0975210f, -0.0243013f, -0.0180390f, +0.0466253f, +0.2262029f,
  -0.0101101f, +0.0344838f, -0.1946105f, -0.0599002f, +0.0358422f, +0.2008404f, +0.1792342f, +0.1802619f,
  -0.2396500f, +0.0377154f, -0.1047386f, +0.1012633f, -0.2180535f, +0.2017711f, +0.1071891f, -0.0391203f,
  +0.0504733f, +0.0951134f, -0.0409201f, +0.4031917f, -0.0871469f, +0.0851182f, +0.2256849f, +0.0627028f,
  -0.2156697f, +0.2712776f, -0.1978604f, -0.0129065f, +0.2369540f, +0.0449080f, +0.3609568f, -0.0683510f,
  -0.2143261f, +0.0958669f, +0.0423081f, +0.0936397f, -0.0188571f, +0.0555643f, +0.4056105f, +0.0088365f,
  +0.2629936f, -0.0313981f, +0.3084721f, -0.0177594f, +0.0906410f, +0.1165137f, -0.1028307f, +0.1704746f,
  -0.0950663f, +0.2243912f, -0.0370097f, -0.2079416f, +0.1900944f, +0.2761352f, -0.1626868f, +0.0852762f,
  +0.1473447f, -0.0878861f, -0.1406329f, -0.1121476f, +0.1194727f, +0.0234295f, -0.1193714f, +0.1422997f,
  -0.0558144f, +0.0206106f, +0.0622400f, -0.0624999f, -0.0703378f, -0.0631698f, +0.0568126f, -0.0668030f,
  +0.0241180f, +0.0796576f, +0.1378809f, +0.0202079f, -0.0910103f, +0.0132427f, +0.1029501f, +0.0301351f,
  +0.0019819f, +0.0789357f, +0.0483002f, +0.0296971f, -0.0763062f, -0.0113120f, +0.0213561f, -0.0112962f,
  +0.1540111f, +0.0085182f, +0.1342626f, -0.1856303f, -0.2361192f, +0.0444103f, +0.1514636f, -0.0639313f,
  +0.1338255f, +0.3567562f, +0.5384511f, -0.2307442f, -0.5088113f, -0.1568208f, +0.1799390f, -0.4643185f,
  -0.1505877f, +0.0449456f, -0.1338071f, -0.1284536f, +0.0944912f, +0.0086278f, +0.0053413f, -0.1246922f,
  -0.0224267f, -0.1979329f, +0.0937335f, -0.4006702f, -0.4328640f, +0.0329441f, +0.1175305f, -0.3595007f,
  +0.4149240f, +0.3641276f, +0.5129418f, -0.2142675f, -0.4203619f, -0.2208009f, +0.4207511f, +0.5682850f,
  -0.3554271f, -0.3018561f, -0.0292974f, -0.2940336f, -0.4943924f, +0.0005190f, +0.0468775f, +0.4212155f,
  +0.0520032f, -0.1304486f, +0.1481928f, -0.1529635f, -0.1546157f, -0.0745469f, +0.0484126f, -0.0691868f,
  +0.1986700f, -0.2497236f, +0.1954827f, -0.0787429f, +0.0725016f, -0.0785567f, +0.3386272f, +0.4941917f,
  -0.1085505f, -0.3351915f, +0.1458015f, -0.2398456f, -0.1798470f, +0.2313643f, +0.0703250f, +0.3736523f,
  -0.0492683f, -0.1743769f, +0.0421618f, +0.1858005f, +0.2119797f, -0.0860361f, +0.0450500f, +0.0133940f,
  -0.5505787f, -0.3307109f, +0.1450535f, -0.0630360f, +0.1233573f, +0.0424626f, -0.3727276f, +0.0951669f,
  -0.0894857f, -0.0733074f, +0.0371954f, +0.4832146f, +0.2769490f, +0.2286824f, -0.2787803f, -0.3676011f,
  -0.1343337f, +0.0769206f, +0.0049198f, -0.0388286f, -0.0142238f, +0.0732168f, -0.0245808f, +0.0475024f,
  -0.0653821f, -0.2796429f, -0.0121502f, +0.0221272f, -0.1683079f, -0.0605319f, +0.1227990f, -0.1488777f,
  -0.0201588f, +0.2817095f, -0.2073011f, -0.0041669f, -0.0784447f, -0.1772035f, +0.1628341f, -0.1595064f,
  +0.3093733f, +0.0196625f, +0.0078168f, -0.0810636f, -0.1227254f, +0.0207931f, -0.0456434f, -0.0836738f,
  -0.0937354f, -0.0782170f, +0.2877930f, -0.3377114f, +0.0415293f, +0.2213835f, +0.0054315f, -0.0368406f,
  -0.0186600f, -0.0066758f, -0.0362282f, +0.1198802f, +0.3025776f, -0.0051182f, +0.0006582f, -0.0461240f,
  -0.0253841f, -0.1192390f, +0.0310453f, -0.0578264f, +0.2260740f, -0.0739205f, -0.0733449f, -0.1267382f,
  +0.0427338f, -0.0328205f, +0.1813160f, -0.0914487f, -0.0313665f, +0.2953877f, +0.2469504f, -0.1103019f,
  +0.0840407f, +0.0247648f, -0.2244740f, -0.0245528f, -0.0600240f, +0.0417534f, +0.0338899f, -0.1068826f,
  +0.2041560f, +0.0624450f, -0.0725175f, +0.1359940f, +0.0064903f, +0.2089975f, -0.1215610f, +0.2298816f,
  -0.1037614f, -0.0069513f, -0.1679534f, -0.0596862f, +0.2969062f, -0.0347607f, +0.1877159f, -0.0247421f,
  +0.0222622f, +0.0247942f, -0.2923647f, +0.1532216f, +0.2332366f, +0.0426127f, -0.0539434f, +0.0932507f
);

const float biases[4] = float[4](
  +0.0101903f, -0.1230530f, -0.0473274f, -0.0356777f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer85 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1498670f, +0.1089837f, +0.0439084f, -0.2847723f, -0.1167097f, -0.0536055f, -0.1214068f, +0.0578283f,
  -0.1314295f, -0.0683147f, +0.2387824f, +0.1054329f, +0.3890748f, -0.0156021f, +0.2894019f, -0.2389316f,
  +0.3188513f, +0.0438101f, +0.3313579f, -0.0981005f, -0.0648825f, -0.4857396f, -0.0008145f, -0.1143971f,
  +0.1122891f, -0.0927986f, +0.1198645f, +0.0099343f, -0.1145035f, +0.0504887f, +0.0129570f, -0.0005196f,
  -0.0433300f, +0.0252656f, -0.0778534f, +0.2927993f, -0.0313863f, -0.2338262f, +0.3240484f, +0.0896878f,
  -0.4346450f, -0.0656756f, -0.4987578f, -0.4949477f, +0.2164056f, -0.2178916f, -0.0087630f, -0.4789124f,
  +0.1540653f, +0.1633342f, -0.0294391f, -0.0274615f, +0.1149546f, +0.1434896f, +0.0869080f, +0.1101075f,
  -0.0685748f, -0.1795399f, +0.0033411f, -0.0371587f, +0.2179562f, -0.0307108f, +0.1283018f, -0.1937705f,
  -0.2263558f, -0.0118866f, -0.1640911f, -0.0190762f, -0.0522252f, -0.1880661f, +0.0902090f, +0.0133782f,
  -0.0284388f, +0.1974766f, +0.0467520f, -0.0783844f, +0.0444843f, -0.0552662f, -0.0410658f, -0.0208064f,
  -0.1849914f, +0.0459111f, +0.1560457f, -0.2106762f, +0.1007783f, +0.3231237f, -0.2384679f, +0.0706822f,
  -0.1376133f, +0.1261971f, -0.0824312f, -0.0916865f, -0.0552882f, -0.1251651f, -0.1628821f, +0.0087164f,
  +0.0040499f, +0.0017356f, +0.1157743f, -0.2086129f, +0.1489805f, -0.1795640f, +0.1017422f, -0.0400581f,
  -0.3072752f, +0.0224482f, -0.2094718f, +0.1435786f, +0.0326535f, +0.1839500f, -0.1106338f, +0.1442560f,
  -0.0435293f, +0.3172112f, -0.1823470f, -0.0340034f, +0.1185730f, -0.4574285f, -0.0986355f, +0.3010538f,
  -0.2057372f, +0.1687787f, -0.1016309f, +0.1731927f, +0.0222996f, +0.2697385f, +0.1730232f, +0.0910818f,
  +0.0406309f, -0.1259302f, -0.2589320f, -0.1526703f, +0.2479428f, +0.2192658f, +0.0877432f, +0.1266371f,
  -0.0982733f, +0.0053135f, -0.1347012f, -0.0267968f, -0.0428708f, -0.0218551f, +0.0939284f, -0.0016773f,
  +0.1079446f, +0.0237075f, +0.1987812f, +0.1738120f, +0.1159876f, -0.1267610f, +0.1061055f, -0.0163690f,
  +0.2695012f, -0.1249065f, -0.1554555f, +0.2998529f, +0.1567102f, -0.5003915f, +0.2434692f, -0.1080263f,
  +0.2138369f, -0.2338049f, +0.0011855f, +0.3075842f, -0.0518339f, -0.1746660f, +0.0925769f, +0.1357457f,
  -0.0002024f, -0.1050556f, +0.1763501f, -0.1273829f, +0.0861535f, +0.1620021f, -0.1141605f, +0.1601436f,
  -0.1146078f, +0.1690785f, -0.0651199f, +0.2988834f, +0.3972747f, -0.0655852f, +0.2818039f, +0.0125100f,
  -0.1792839f, -0.0959922f, +0.1756650f, -0.0476696f, -0.2143050f, +0.0176763f, +0.1897105f, +0.0480384f,
  -0.0056622f, +0.0314746f, +0.0532301f, +0.0720020f, -0.0360996f, +0.1128724f, +0.0953826f, -0.0621884f,
  -0.1173660f, -0.2318667f, +0.2257184f, +0.1632407f, +0.0516565f, +0.0192471f, -0.2198274f, +0.2270760f,
  -0.3249768f, -0.2844478f, -0.1176415f, -0.0513637f, -0.0850216f, +0.1856471f, -0.1048416f, +0.0632701f,
  +0.0091128f, +0.1501385f, -0.1917046f, +0.0927897f, +0.0551768f, -0.0238971f, -0.0833901f, +0.0349126f,
  +0.0279795f, +0.1272719f, +0.1601924f, +0.4748524f, -0.1139554f, +0.2359391f, -0.1161739f, +0.1605650f,
  +0.0720659f, -0.1884641f, -0.0833671f, +0.0627795f, +0.0889352f, -0.3603311f, -0.0126918f, -0.0983309f,
  +0.0374323f, +0.1963058f, -0.4697590f, +0.0498990f, +0.3789616f, -0.1932705f, +0.1007189f, -0.0995233f,
  -0.4714498f, -0.5232986f, +0.6238482f, -0.1311275f, -0.2293497f, +1.0019058f, +0.3073779f, +0.3685683f,
  +0.3714467f, -0.0492520f, +0.2135911f, +0.2859176f, -0.1868280f, -0.1240176f, -0.1695835f, -0.1892351f,
  +0.0588663f, -0.0394566f, -0.0769034f, +0.1991961f, -0.0372219f, +0.0647416f, +0.1912867f, -0.5119086f,
  -0.1354596f, -0.1849686f, +0.4264220f, +0.3305137f, -0.4494766f, -0.2192848f, +0.2406641f, +0.2412212f,
  +0.3621460f, +0.0452079f, +0.0399389f, +0.1384950f, -0.1462552f, +0.1500521f, -0.3201505f, -0.0902847f
);

const float biases[4] = float[4](
  +0.0026774f, -0.0023339f, +0.0068973f, -0.0584818f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer86 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0743545f, +0.0056948f, +0.0209894f, -0.1965563f, +0.0409861f, -0.0070766f, +0.2797970f, +0.3867210f,
  +0.1963695f, -0.1302650f, -0.0670216f, -0.1332121f, +0.1432573f, +0.0693151f, +0.1816808f, -0.4657987f,
  -0.3334058f, +0.0727227f, +0.0681657f, -0.1194583f, -0.0516954f, +0.0033533f, +0.2860186f, -0.1582745f,
  +0.2491654f, +0.1451732f, +0.0817302f, +0.0793388f, +0.1190615f, -0.1494930f, +0.1314604f, +0.1629065f,
  +0.1333662f, -0.0814809f, +0.4443360f, +0.0233316f, +0.2806767f, +0.1728294f, +0.1716211f, -0.2256260f,
  -0.0723281f, -0.2054351f, -0.1263322f, +0.0661243f, +0.0097632f, -0.1222289f, +0.0915549f, +0.0614306f,
  +0.2020575f, -0.0680051f, -0.1649930f, +0.2113714f, +0.0773716f, +0.3588960f, +0.0849195f, +0.2585820f,
  -0.2059616f, -0.0799981f, -0.2676653f, +0.1514229f, +0.0558502f, +0.2113924f, +0.0328030f, +0.0135529f,
  -0.0164733f, +0.0429406f, -0.1976921f, +0.0656219f, +0.2335855f, +0.1977779f, +0.0619214f, -0.1539928f,
  +0.1662464f, -0.0494845f, -0.1311108f, -0.0707243f, +0.1056391f, +0.1548612f, +0.3447286f, -0.0076126f,
  -0.1609127f, -1.2619272f, -0.2355791f, -0.0577428f, +0.0071340f, +0.0826145f, +0.4615739f, -0.0968020f,
  -0.1357622f, +0.0645204f, -0.0317515f, +0.0227105f, -0.0359585f, +0.2132073f, -0.0044022f, -0.0259246f,
  -0.1313325f, +0.2557706f, +0.0239427f, +0.0400089f, -0.0677255f, -0.3047434f, +0.2496490f, -0.0555445f,
  -0.1074932f, -0.3311611f, -0.1043580f, -0.1060565f, +0.2989976f, -0.3236444f, +0.0058097f, +0.0956151f,
  -0.0108366f, +0.0573134f, -0.1284241f, +0.3673866f, +0.0464904f, +0.1550666f, +0.0800608f, -0.2486468f,
  -0.0778062f, +0.0020562f, -0.1048085f, +0.0161030f, +0.4229624f, -0.1994057f, +0.1006141f, -0.1546898f,
  -0.1463375f, +0.0563201f, -0.0205007f, +0.1044957f, -0.3762044f, -0.2185267f, +0.1327442f, +0.0327027f,
  -0.0583700f, -0.0628593f, -0.1277362f, +0.0936013f, +0.0160918f, +0.0260536f, +0.1998201f, +0.1305333f,
  -0.1219558f, +0.0585300f, +0.0292039f, -0.0400175f, -0.1780611f, +0.1082007f, -0.0689317f, -0.1451618f,
  -0.0618534f, -0.3687618f, +0.0887658f, +0.1396704f, -0.1654487f, -0.0247675f, -0.3213549f, +0.0119274f,
  -0.0328349f, -0.2376445f, -0.0587242f, +0.1173949f, -0.0876406f, -0.1845021f, -0.1932689f, +0.1234312f,
  -0.0721057f, +0.0971005f, +0.2046378f, +0.3615112f, +0.1482494f, -0.3027849f, -0.1725301f, +0.2576306f,
  -0.0798346f, -0.3527347f, -0.6268306f, -0.1423902f, -0.2933442f, +0.0745947f, -0.0181822f, -0.3940988f,
  -0.0047863f, +0.0411181f, +0.0541834f, +0.0022062f, +0.0273756f, +0.0841619f, -0.0320484f, -0.4115813f,
  +0.1737863f, -0.1154338f, +0.2349837f, +0.0126823f, -0.6144935f, +0.0573200f, -0.1413820f, -0.0192247f,
  +0.1430483f, -0.1170096f, -0.0654909f, +0.1278484f, +0.0726389f, +0.0211424f, +0.0550801f, -0.3614720f,
  +0.1277555f, -0.0175019f, +0.1415167f, -0.0885869f, -0.0028184f, -0.0542078f, -0.0127067f, +0.1513369f,
  -0.2334080f, +0.1200519f, +0.1099698f, -0.0041704f, -0.2890820f, -0.2707445f, -0.0140224f, -0.0495719f,
  -0.1347807f, +0.0688044f, +0.0456124f, +0.0874633f, -0.2570281f, +0.0035957f, -0.0953672f, +0.0578277f,
  +0.0356452f, +0.1500767f, -0.0394942f, -0.0356977f, -0.0211950f, -0.3944738f, -0.0500480f, +0.2075106f,
  -0.0372111f, +0.2231115f, +0.1751048f, +0.0904508f, +0.0304986f, -0.0599943f, +0.0129372f, -0.0113194f,
  -0.1284406f, +0.9358382f, -0.4221618f, +0.2405260f, -0.2844185f, -0.2532583f, -0.0277869f, -0.3425336f,
  -0.2565101f, -0.0938074f, +0.0572389f, +0.1332595f, -0.0863602f, +0.0128705f, +0.1110067f, +0.1401690f,
  -0.1203158f, -0.0212112f, -0.1688634f, +0.0412390f, +0.3536625f, -0.0750966f, -0.1799365f, +0.1759860f,
  +0.3074022f, +0.2267694f, -0.1509022f, +0.4381386f, +0.0172178f, -0.1478439f, +0.0846393f, +0.4361249f,
  +0.0133445f, -0.0549035f, -0.1053354f, +0.1457882f, -0.2005640f, -0.0101064f, +0.0597358f, +0.0430762f
);

const float biases[4] = float[4](
  +0.0160258f, -0.1131374f, +0.0115736f, +0.0756055f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer86 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0459795f, -0.1584395f, -0.1353114f, -0.0804809f, -0.1716194f, -0.1027356f, +0.1250353f, +0.2215393f,
  -0.0810011f, +0.0155655f, +0.1430666f, -0.2572121f, -0.2125286f, +0.0960156f, +0.1143555f, -0.0021708f,
  -0.0278494f, +0.4595429f, -0.0606988f, -0.1243748f, -0.0085812f, +0.0341551f, +0.1535486f, +0.1290119f,
  +0.2555268f, +0.1170304f, +0.3332518f, +0.0654998f, +0.0353373f, -0.1666969f, +0.2506270f, -0.1035665f,
  -0.0633505f, +0.4249609f, -0.3769023f, +0.0583844f, +0.1672408f, +0.2442110f, +0.1614039f, -0.0215013f,
  +0.0188995f, +0.2597708f, -0.0031073f, -0.1906926f, -0.0375435f, -0.3827327f, -0.0421016f, +0.6551046f,
  +0.0961792f, -0.1071081f, +0.0385370f, -0.0342410f, -0.1920433f, -0.0250135f, -0.1199473f, +0.0388141f,
  -0.0294493f, +0.0613263f, +0.0218062f, -0.1752533f, -0.1473311f, +0.0433087f, +0.0165120f, +0.2132339f,
  -0.0248926f, +0.1377651f, -0.0319786f, +0.1772746f, -0.0660013f, -0.0399633f, +0.0705865f, +0.0391715f,
  -0.1151077f, +0.3697636f, -0.1196172f, -0.0713307f, -0.1241581f, +0.0573076f, -0.1851718f, -0.0386409f,
  +0.0422215f, +0.1900770f, -0.1371164f, -0.0331894f, +0.3148517f, +0.1151539f, -0.0740445f, -0.2916105f,
  -0.0360879f, +0.1733053f, -0.0112847f, -0.1120489f, -0.0138185f, -0.4002461f, -0.1683470f, -0.0873992f,
  +0.0009581f, +0.0133137f, +0.1063710f, -0.1289120f, +0.3065072f, +0.0680363f, -0.2512278f, +0.0849726f,
  +0.0113532f, -0.5663858f, +0.0932345f, -0.3226382f, +0.3912251f, -0.1445452f, -0.2047989f, +0.2696189f,
  +0.0055640f, -0.0411702f, +0.0827407f, +0.0345938f, +0.1319785f, +0.0454762f, +0.0561430f, +0.0442806f,
  -0.1256007f, +0.1117536f, +0.0659651f, +0.0580170f, -0.5177833f, +0.0591907f, -0.0111337f, +0.0220061f,
  -0.1159288f, -0.0961668f, -0.0913922f, +0.1330780f, +0.1068207f, +0.1592722f, +0.2155345f, +0.0490217f,
  -0.1813186f, -0.1596361f, -0.0923309f, -0.0085297f, +0.0322899f, -0.1497281f, +0.0722388f, +0.0321798f,
  +0.0455093f, -0.1406311f, +0.0378285f, +0.2046969f, +0.1852207f, +0.1312736f, +0.3695332f, -0.1015451f,
  -0.2483840f, -0.8988800f, -0.1414970f, -0.2639545f, -0.1508893f, +0.0750491f, +0.3707468f, +0.2036419f,
  +0.0474740f, +0.0225965f, -0.0002267f, -0.0350722f, -0.0023297f, -0.0277584f, -0.0016129f, +0.1330110f,
  -0.1762155f, -0.1508275f, -0.5693694f, -0.1075171f, +0.0945310f, -0.0439415f, +0.0940818f, -0.0996416f,
  -0.2393381f, -0.0918008f, -0.4222097f, -0.1481834f, -0.3842037f, -0.2601642f, -0.0674485f, +0.4875416f,
  -0.0145820f, -0.1374333f, -0.0939825f, -0.1415587f, -0.1544886f, -0.0894825f, -0.0236710f, -0.3322374f,
  -0.1426848f, +0.0597385f, +0.0108444f, +0.0307429f, -0.1600760f, +0.2136857f, +0.1359908f, +0.0777087f,
  -0.2289141f, -0.0719996f, +0.1686954f, -0.0589631f, -0.3740565f, +0.0064230f, -0.1518759f, -0.0658594f,
  +0.0374562f, +0.0183386f, -0.1174838f, +0.1073936f, -0.0487207f, -0.0405228f, +0.0288802f, -0.1021608f,
  +0.0064621f, -0.1858519f, -0.0761085f, +0.1625394f, +0.0447228f, +0.0613881f, -0.0781461f, -0.0768985f,
  +0.0058608f, -0.4456600f, -0.0010486f, -0.0027352f, +0.0712893f, -0.1590018f, -0.2422271f, +0.1031697f,
  -0.2269145f, +0.4494683f, +0.0969039f, -0.1732926f, +0.1102468f, -0.1662132f, +0.1517828f, -0.1646802f,
  +0.0204364f, +0.0242850f, -0.2628099f, +0.1001486f, +0.0737903f, -0.2858268f, -0.0822458f, +0.1209350f,
  -0.0123845f, -0.0391342f, +0.1519769f, -0.0260745f, +0.2829547f, -0.2854147f, +0.0801019f, +0.3404114f,
  -0.0703587f, -0.2689836f, +0.0161953f, -0.1269426f, +0.1694538f, +0.0617186f, -0.1653775f, +0.7100016f,
  +0.1358592f, -0.0066885f, +0.1942099f, +0.0490432f, -0.1305159f, +0.0105496f, -0.0886838f, +0.0944805f,
  +0.0019418f, +0.0215064f, +0.2844500f, +0.0125210f, -0.1167747f, -0.1969602f, -0.0277405f, +0.0856104f,
  -0.2461239f, -0.0212224f, -0.1419653f, -0.0791968f, -0.1265005f, -0.0329267f, -0.0853277f, -0.1089842f
);

const float biases[4] = float[4](
  +0.0396703f, +0.0412347f, -0.0278268f, -0.0262112f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer87 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0994658f, +0.0919009f, +0.0095330f, +0.0127372f, -0.1311021f, +0.0176599f, +0.0661453f, +0.0744523f,
  -0.1201958f, +0.3910150f, +0.0289777f, +0.2943909f, +0.1647529f, -0.2847742f, -0.0323706f, +0.0299791f,
  +0.0230733f, +0.1735869f, +0.1119348f, +0.2262654f, -0.0805138f, -0.2741549f, -0.0723124f, -0.1629189f,
  -0.0595569f, -0.1793747f, +0.0086413f, -0.0612670f, -0.0229465f, -0.1855842f, +0.0857800f, -0.0088093f,
  -0.0391869f, -0.6141763f, -0.1225224f, -0.2496551f, +0.1974329f, -0.0934810f, +0.3378161f, +0.0987326f,
  -0.2143910f, -0.1860353f, -0.0212944f, -0.5613611f, +0.1231724f, +0.1997882f, +0.1665840f, +0.2087056f,
  -0.2538014f, -0.3624103f, +0.3609436f, +0.2946512f, +0.3406274f, -0.2914136f, +0.1563579f, -0.2717775f,
  +0.1888957f, -0.2451459f, +0.1681298f, -0.3017997f, -0.2585782f, -0.0173493f, -0.4387720f, -0.4387895f,
  +0.1540343f, -0.2257170f, +0.2436101f, +0.2561105f, -0.0031388f, -0.1970799f, -0.3025159f, -0.3002080f,
  -0.2820549f, -0.0928117f, -0.0791331f, +0.1074361f, +0.2896949f, +0.1198432f, +0.0420280f, -0.0198243f,
  +0.0432045f, +0.2088517f, -0.1419928f, -0.1543756f, -0.1101593f, -0.0079290f, -0.0756908f, +0.0574324f,
  -0.1204347f, +0.3177470f, +0.1449182f, +0.0862267f, -0.1490891f, -0.1514020f, -0.3781515f, +0.0640720f,
  -0.0004919f, +0.0259243f, +0.1405108f, -0.0517855f, +0.1159950f, +0.3583311f, -0.1706035f, +0.3077075f,
  +0.0750765f, +0.1505707f, -0.0818941f, +0.0259376f, -0.0932342f, -0.0228643f, -0.0038894f, -0.0287000f,
  -0.0620665f, -0.0197707f, +0.0288367f, -0.3339950f, +0.1739845f, -0.1428218f, -0.1095383f, +0.1146722f,
  +0.0434804f, -0.0117952f, +0.1360413f, -0.0939850f, +0.1752939f, -0.0045134f, -0.0198880f, +0.0240829f,
  +0.1676539f, -0.1247538f, -0.0567833f, +0.0418734f, +0.0169524f, -0.0444550f, -0.1106985f, -0.0931972f,
  -0.0652494f, +0.0415745f, -0.1450585f, -0.1835371f, -0.1367874f, -0.1833380f, -0.0981848f, -0.1501594f,
  +0.1054401f, -0.1911410f, -0.0785526f, -0.1528516f, +0.0569637f, +0.0273890f, +0.0374420f, -0.0014621f,
  -0.0475543f, +0.1425802f, +0.0180325f, +0.1152938f, -0.0593383f, +0.2025703f, +0.1148430f, +0.1624314f,
  -0.0555945f, -0.0328929f, +0.0194050f, -0.1568469f, +0.1352013f, +0.0826798f, +0.0636137f, -0.0074679f,
  -0.0940407f, -0.4321503f, -0.5605033f, -0.0483580f, -0.1298015f, +0.0305541f, -0.2323269f, -0.3340121f,
  -0.1064686f, +0.3613152f, -0.0130952f, -0.2760722f, -0.1483908f, -0.3850867f, +0.3685001f, +0.1782211f,
  +0.3338141f, -0.0432262f, +0.1447600f, +0.0200801f, +0.2008840f, +0.0430920f, -0.0278691f, +0.0890708f,
  -0.0575483f, -0.4654640f, -0.0325267f, +0.1279036f, -0.0182089f, -0.0804373f, +0.0645088f, -0.1884689f,
  -0.0045891f, +0.1532871f, -0.2374938f, -0.1565649f, +0.0679085f, -0.2454424f, +0.1959436f, -0.2389190f,
  +0.0055590f, +0.0434359f, -0.0206088f, -0.1346227f, +0.0129192f, -0.0485800f, -0.0805702f, +0.0318255f,
  +0.2080012f, -0.1287996f, -0.0383096f, +0.0204660f, -0.0712203f, -0.0815012f, -0.0388069f, +0.1350358f,
  +0.1324592f, -0.1715686f, +0.3902426f, -0.4334375f, +0.1449044f, +0.0368181f, +0.2563301f, -0.0004862f,
  -0.1144836f, -0.1161583f, -0.0919185f, -0.3555248f, +0.1362103f, +0.0177166f, +0.0602879f, -0.0727655f,
  -0.2299362f, -0.2327300f, +0.2978319f, +0.2153513f, +0.1879972f, -0.1527247f, +0.0479591f, -0.0041137f,
  -0.5444588f, +0.4178011f, +0.2619267f, +0.1091475f, +0.4210207f, -0.3700094f, -0.2705828f, +0.7208787f,
  -0.1003072f, +0.0214215f, +0.4619991f, +0.0961782f, -0.0828690f, -0.1707238f, -0.3318033f, +0.4281120f,
  -0.2261565f, +0.0061812f, +0.0407701f, -0.0316688f, -0.0106375f, -0.1156682f, -0.1557427f, +0.0467463f,
  -0.0056711f, -0.6329845f, -0.1022350f, +0.1536717f, +0.1017887f, +0.0998326f, +0.0476701f, -0.6267862f,
  +0.0754212f, -0.2028870f, -0.3656482f, -0.0038125f, +0.2384999f, +0.2038929f, +0.1282106f, -0.3734809f
);

const float biases[4] = float[4](
  -0.0361618f, +0.0322635f, +0.0457743f, -0.0641659f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer87 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0605064f, +0.0800496f, +0.0831730f, -0.1350242f, +0.0202095f, -0.1320802f, -0.0102457f, -0.1103018f,
  -0.2038971f, +0.0792463f, -0.1219348f, +0.0449680f, -0.1449475f, -0.1149429f, +0.0053388f, -0.2731646f,
  -0.0268346f, +0.0965652f, +0.0277541f, -0.0488375f, -0.0595907f, +0.0018789f, -0.0420387f, +0.0039402f,
  -0.0018166f, -0.0622613f, -0.3451993f, -0.0574383f, +0.1024738f, -0.0469000f, -0.0140923f, +0.0977368f,
  +0.2131528f, -0.6323940f, +0.0099641f, -0.2076086f, +0.3877728f, +0.1496844f, -0.0023896f, -0.0622786f,
  -0.0005210f, -0.1747418f, -0.0471865f, -0.0784038f, -0.0072932f, +0.0225175f, +0.1010357f, -0.0341505f,
  -0.0284818f, +0.0113155f, +0.2347779f, -0.0785813f, +0.2820677f, +0.0195575f, -0.1198120f, -0.0473635f,
  -0.1247325f, -0.5164540f, +0.2937204f, +0.1832392f, -0.0952569f, +0.2001272f, -0.0796155f, -0.0159716f,
  +0.1066058f, +0.0153670f, +0.1425218f, -0.2019126f, -0.0220821f, -0.1053740f, -0.0116699f, -0.0515551f,
  +0.1009068f, -0.1413991f, +0.3132949f, -0.0946295f, +0.0574442f, -0.0058594f, +0.0047814f, +0.1456917f,
  +0.1051096f, -0.2652938f, -0.1109910f, -0.0165754f, +0.0807634f, -0.3815424f, +0.0374079f, -0.2028151f,
  +0.0080925f, +0.1327507f, +0.3747908f, -0.0669493f, +0.0358400f, +0.1572358f, +0.3481227f, -0.2242377f,
  -0.2644670f, -0.0653299f, -0.0624019f, +0.0730022f, -0.3265905f, +0.1096339f, +0.0318792f, -0.1463263f,
  -0.2257244f, -0.3809945f, -0.0635210f, +0.4064886f, +0.0688073f, -0.2573449f, +0.1624257f, +0.0167957f,
  +0.2314334f, -0.0366764f, -0.0478130f, -0.0385499f, +0.0552765f, -0.3761869f, -0.0629586f, -0.4067803f,
  -0.0154460f, +0.0628998f, +0.0497382f, -0.0210987f, -0.0862613f, -0.1107129f, -0.1027221f, +0.0824821f,
  +0.1745529f, -0.2492055f, -0.2104319f, -0.0602177f, -0.1044912f, -0.2834177f, -0.0385521f, -0.1259774f,
  +0.1640275f, +0.0763805f, +0.2156732f, +0.0887273f, +0.1665817f, -0.2897936f, +0.3561959f, -0.3567831f,
  -0.3250123f, +0.1302605f, -0.0801003f, -0.0357951f, -0.1440197f, +0.2540787f, -0.2937200f, +0.0269918f,
  +0.0047258f, -0.2084034f, +0.0112062f, -0.2021902f, +0.1563635f, +0.2670211f, -0.2574805f, +0.1427370f,
  -0.1534213f, +0.2006356f, -0.1390071f, -0.0572676f, +0.0617773f, -0.0592445f, +0.3040023f, -0.0737881f,
  +0.0130519f, +0.2743857f, -0.3330766f, -0.2881753f, +0.1295036f, +0.0108293f, -0.2742464f, +0.4224814f,
  +0.0233216f, -0.2667585f, -0.2398565f, -0.0110780f, +0.0826490f, +0.3234209f, -0.2317564f, +0.0415487f,
  -0.0555230f, -0.0281311f, +0.1263209f, -0.1154542f, -0.0494521f, -0.0423490f, +0.0422778f, +0.3774862f,
  +0.1671398f, +0.2427180f, -0.0178919f, +0.1146486f, +0.0427799f, +0.1312342f, +0.0652237f, +0.1961286f,
  -0.2956813f, -0.1138833f, -0.0791072f, +0.2717871f, +0.0942821f, -0.1187963f, +0.1454223f, +0.0087176f,
  -0.0477939f, +0.2069643f, +0.0937455f, -0.0020430f, +0.1007501f, +0.0667992f, +0.2486892f, +0.0936506f,
  +0.0376891f, +0.0101647f, -0.0107180f, +0.1975982f, -0.0413004f, -0.0770742f, -0.0425172f, +0.0663160f,
  -0.1630601f, -0.1274955f, -0.0179278f, -0.3961459f, +0.2406884f, -0.1486226f, -0.0271485f, -0.2175765f,
  -0.0395844f, +0.2303906f, +0.0929594f, +0.1991981f, +0.0230770f, +0.1165042f, +0.0499085f, +0.0508173f,
  -0.0026352f, -0.0376093f, -0.0000301f, +0.5511299f, +0.3111585f, -0.2783315f, +0.0320211f, +0.3222884f,
  -0.3771549f, -0.3269359f, -0.1704871f, -0.5731132f, +0.2690234f, +0.1202796f, -0.3024422f, -0.3394378f,
  -0.0563150f, -0.0306887f, +0.2083617f, -0.2469110f, -0.0140978f, +0.3204468f, +0.4282150f, +0.2745839f,
  -0.0783385f, -0.0561149f, -0.0928480f, +0.0907280f, -0.0462699f, -0.2081150f, -0.1646686f, +0.0245025f,
  -0.0531581f, +0.0112994f, -0.0521920f, +0.1605352f, -0.0745436f, +0.0927283f, +0.5088813f, -0.3119206f,
  -0.0583663f, +0.0500542f, -0.0438852f, -0.0585246f, +0.0210761f, -0.2135739f, +0.1833424f, +0.2762252f
);

const float biases[4] = float[4](
  +0.0751628f, -0.0315932f, +0.0454659f, -0.0452668f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer88 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.4126664f, -0.0936015f, -0.3124878f, +0.1289097f, -0.2923667f, +0.1030170f, -0.0640117f, +0.3038051f,
  +0.2509849f, -0.1107715f, -0.2724567f, -0.0576896f, +0.0606735f, -0.3216569f, +0.1690388f, -0.6151381f,
  +0.0361615f, +0.1244026f, +0.4574256f, -0.0083213f, -0.1722225f, -0.1861185f, +0.2082909f, +0.0203779f,
  +0.3868682f, +0.0436092f, -0.1615384f, -0.2070217f, +0.1841123f, +0.1157621f, -0.1692415f, -0.0018946f,
  +0.1079503f, +0.1292381f, +0.0285473f, +0.0248944f, -0.0652723f, +0.1600787f, -0.1662512f, -0.4338665f,
  -0.0419440f, +0.0998584f, +0.2607029f, -0.0203925f, -0.0847241f, +0.1051584f, -0.0479237f, -0.0156962f,
  +0.0314194f, +0.3365473f, -0.1302455f, -0.2655864f, +0.2287737f, +0.3865781f, -0.0148001f, +0.1258605f,
  +0.1868114f, -0.0819787f, +0.1096832f, -0.3696860f, +0.1578318f, +0.0255748f, +0.1962222f, +0.0251482f,
  -0.1893958f, +0.2754138f, -0.0804429f, -0.0269401f, -0.0849013f, -0.1323736f, +0.1922057f, -0.2876922f,
  -0.2978030f, +0.0768365f, +0.0578844f, +0.0573908f, +0.1037815f, -0.2375558f, +0.0063099f, +0.2505237f,
  -0.6397614f, -0.1121778f, -0.0639957f, -0.0162731f, +0.5202262f, -0.0434997f, -0.1716474f, -0.1864996f,
  -0.0112875f, +0.1107998f, +0.4215026f, +0.1092813f, +0.2520617f, -0.1657343f, -0.1209118f, +0.3569235f,
  -0.4725824f, -0.0424464f, +0.1384584f, +0.2680387f, +0.0697891f, -0.0767823f, +0.1929247f, -0.0845004f,
  -0.6117160f, -0.0919652f, -0.1278314f, +0.7560376f, +0.5949441f, -0.1216505f, -0.2144815f, -0.1226873f,
  +0.0154463f, +0.3415726f, -0.1861248f, +0.0517566f, -0.1176366f, -0.0766521f, -0.1085565f, +0.0052187f,
  -0.1568817f, -0.2318437f, -0.0831389f, +0.0698063f, +0.0149442f, +0.0507604f, -0.1770026f, +0.1711323f,
  -0.0596543f, -0.0824615f, -0.2478213f, -0.1710664f, +0.0468282f, -0.0105296f, -0.0743191f, -0.0101060f,
  +0.0114163f, -0.0680855f, +0.0477568f, -0.0490734f, -0.0650472f, +0.0961805f, +0.0223313f, +0.3539087f,
  -0.0519017f, +0.0767046f, +0.0929340f, -0.3042320f, +0.0338732f, +0.2740484f, +0.1522354f, -0.1089517f,
  -0.0210126f, -0.0134570f, +0.1722708f, -0.0833993f, -0.1789978f, +0.2216984f, +0.0130204f, +0.3354129f,
  -0.0841392f, -0.0022279f, -0.2002020f, +0.0897347f, -0.0767792f, +0.0829710f, -0.0597607f, +0.0323941f,
  +0.1419838f, -0.0359577f, -0.0082741f, +0.2991661f, +0.1092521f, +0.0344924f, -0.3207313f, +0.4914994f,
  +0.2499447f, -0.0828950f, -0.0324715f, -0.2418650f, -0.0550388f, +0.1623898f, -0.0656587f, -0.2829947f,
  +0.1871243f, -0.1740162f, +0.4367705f, +0.1339320f, +0.2296263f, -0.0453726f, +0.1942109f, -0.1227752f,
  -0.0835221f, -0.2123532f, +0.0299955f, -0.0708408f, +0.0098466f, +0.0460209f, +0.0792622f, +0.1973685f,
  -0.1694363f, -0.0243245f, +0.2975594f, +0.2819347f, +0.0067319f, +0.3185873f, +0.2581945f, -0.4285182f,
  +0.1055062f, -0.1129254f, +0.1138422f, -0.0700634f, +0.1232479f, +0.0328246f, +0.1117932f, -0.0348515f,
  +0.1693228f, -0.0981639f, +0.0139213f, -0.1557801f, -0.1298085f, +0.2100245f, +0.1478699f, -0.2567010f,
  +0.2056252f, +0.0028630f, +0.0742416f, -0.0929450f, -0.1972829f, +0.1705449f, -0.1303619f, +0.4457184f,
  +0.0380102f, -0.0243667f, -0.2922227f, -0.0045295f, -0.1720851f, -0.0097654f, -0.1577418f, +0.0960887f,
  +0.1071344f, -0.0276410f, -0.0903636f, -0.0105487f, -0.0391388f, -0.3247895f, +0.0160938f, +0.1553462f,
  +0.4550775f, -0.1369990f, +0.2081823f, -0.0216774f, +0.2854417f, -0.1486848f, +0.1319966f, -0.3605021f,
  -0.0633076f, -0.0150076f, +0.0768415f, +0.2152787f, +0.0402498f, -0.0114251f, -0.0593345f, +0.0875379f,
  +0.1680516f, -0.0743076f, -0.0836632f, +0.0092406f, -0.0392133f, +0.1509875f, +0.0583867f, +0.2636566f,
  +0.2397823f, -0.0383206f, -0.3480420f, -0.4669726f, -0.1024609f, +0.0083442f, +0.0820163f, +0.3942867f,
  -0.1788863f, -0.2180175f, +0.1081019f, -0.0271541f, +0.0343827f, -0.1346259f, +0.0414625f, +0.2215953f
);

const float biases[4] = float[4](
  +0.0068017f, -0.0533778f, +0.0406474f, +0.1107728f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer88 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3038606f, +0.0003149f, -0.0505946f, +0.0288933f, +0.0063175f, -0.1542937f, -0.0514687f, -0.1426859f,
  +0.2567575f, +0.0909142f, -0.0402968f, +0.0105948f, -0.0659683f, -0.1824117f, -0.0653162f, +0.0254484f,
  +0.2982755f, -0.0581445f, +0.0657820f, -0.2035973f, -0.0945798f, -0.2966148f, -0.0114253f, +0.1213363f,
  +0.2619208f, -0.0782286f, -0.1075768f, -0.4777586f, +0.0310877f, -0.3332389f, +0.0407324f, +0.1218652f,
  +0.2365453f, -0.2754431f, +0.2648735f, -0.7307529f, -0.2920191f, -0.1448576f, -0.3820571f, +0.0650340f,
  +0.1659949f, +0.2249626f, -0.1309923f, +0.0190244f, -0.1842764f, -0.0674003f, -0.1769168f, +0.2917572f,
  -0.1106717f, +0.3361368f, -0.0051419f, +0.0593092f, +0.2752428f, -0.1209742f, -0.0727282f, +0.0383064f,
  -0.1428303f, +0.1257989f, -0.1558042f, +0.0327073f, +0.2863095f, -0.1321626f, -0.1710922f, -0.1204069f,
  +0.0863059f, -0.0248735f, -0.2502097f, +0.0022601f, +0.0133258f, -0.0656212f, +0.2364146f, -0.1350774f,
  +0.3272859f, -0.0083600f, -0.0392719f, +0.0337756f, +0.0668578f, +0.3289097f, +0.0155052f, +0.2938718f,
  +0.0437092f, +0.0594099f, -0.1287022f, -0.0010768f, +0.1613902f, +0.2814418f, -0.1379286f, +0.1757348f,
  -0.0773203f, +0.2853622f, +0.1687884f, +0.2397115f, -0.1200723f, +0.0761241f, +0.0240503f, +0.1190258f,
  +0.5661305f, +0.1600855f, +0.0179405f, -0.4624582f, -0.0852330f, +0.4055972f, -0.0827883f, +0.1376278f,
  -0.1654631f, -0.0986709f, +0.2198048f, +0.6229120f, -0.0211389f, +0.1994031f, -0.3622686f, +0.4425286f,
  -0.0514942f, +0.1786680f, -0.1725453f, +0.0635278f, -0.0402520f, -0.0484023f, +0.0721936f, -0.0493307f,
  +0.0529249f, +0.2044374f, +0.0384603f, -0.2120071f, +0.0272168f, -0.1810261f, +0.0096420f, +0.1005622f,
  -0.1275585f, -0.1619405f, +0.0463589f, -0.0437688f, -0.1105646f, +0.3483886f, -0.1200535f, +0.1187235f,
  -0.0464078f, -0.1327647f, +0.0547735f, +0.0000138f, -0.0673538f, +0.0945067f, -0.0982459f, +0.1256954f,
  +0.0735380f, +0.2038642f, +0.0956789f, +0.1020608f, +0.2538945f, -0.1360051f, -0.1469679f, +0.0262435f,
  -0.2252474f, -0.1492369f, +0.1690030f, +0.2354493f, -0.2541378f, +0.2341940f, -0.2992790f, +0.3703187f,
  +0.0958662f, -0.0913751f, +0.0215142f, -0.0773361f, +0.1479756f, +0.0541953f, -0.1564759f, +0.2797165f,
  +0.0290518f, +0.0259131f, +0.1123497f, -0.0728691f, +0.0157832f, +0.0512386f, -0.1505469f, -0.0088432f,
  +0.2239602f, +0.2272971f, +0.0310924f, -0.3481420f, -0.2140391f, +0.1400591f, +0.2359283f, -0.3119230f,
  +0.0441043f, -0.0724000f, +0.5098097f, +0.1537554f, +0.0629191f, +0.1539296f, +0.1209056f, -0.0766305f,
  -0.1610833f, +0.1823501f, -0.1337699f, -0.0750338f, +0.1734727f, -0.0944104f, -0.1873834f, -0.0053832f,
  +0.3081475f, +0.1114312f, -0.0323843f, -0.3071617f, -0.0542604f, -0.0061158f, +0.1272120f, +0.0500169f,
  -0.0749490f, +0.0342895f, +0.1639754f, -0.0900383f, -0.0588140f, -0.0210093f, +0.2617846f, -0.0541605f,
  +0.0628791f, +0.0958818f, +0.0124100f, -0.1634388f, -0.0433330f, +0.0019533f, -0.0795588f, +0.0411534f,
  -0.0828334f, +0.2912785f, +0.1568020f, -0.2454045f, -0.1469431f, -0.0502285f, -0.0435208f, -0.2815049f,
  +0.0966624f, -0.0666054f, +0.2018169f, +0.1147625f, -0.0694001f, +0.0090531f, -0.0619052f, -0.0404335f,
  +0.0489234f, -0.1430109f, -0.0615303f, +0.1414916f, +0.0819833f, -0.0228764f, -0.3029864f, +0.2915899f,
  -0.2891620f, -0.1763180f, -0.2421391f, +0.4720307f, -0.1366742f, +0.1198612f, -0.3133861f, -0.0265439f,
  -0.0963676f, -0.2817060f, +0.2090338f, +0.0548346f, -0.1011659f, -0.0723977f, -0.1851657f, +0.4623897f,
  -0.0273693f, -0.0134491f, +0.0013904f, -0.0767658f, +0.0696395f, -0.3974190f, +0.0777424f, +0.0697656f,
  -0.0068000f, -0.0894760f, -0.0092182f, -0.1534823f, +0.2278053f, -0.1589316f, -0.1472787f, -0.0666751f,
  -0.1852864f, -0.0939273f, -0.0860882f, +0.0511274f, +0.1172305f, -0.0885397f, +0.0471552f, -0.0625429f
);

const float biases[4] = float[4](
  +0.0660058f, +0.0595663f, -0.0106584f, -0.0187687f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer89 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1568708f, -0.1319942f, +0.0159032f, -0.0637280f, -0.2211525f, +0.0547285f, +0.0677483f, -0.0122022f,
  +0.1563174f, -0.1501495f, -0.0505796f, -0.2139329f, +0.0656876f, +0.2967302f, +0.0092969f, +0.0182562f,
  -0.1021531f, +0.0272948f, -0.1361635f, -0.0315874f, -0.0939980f, +0.1424177f, +0.1167705f, -0.0241195f,
  -0.0764136f, +0.0013722f, -0.0203396f, +0.1201607f, -0.0950666f, -0.0690873f, -0.0380925f, +0.0669536f,
  -0.0175527f, +0.1085928f, -0.0032176f, +0.2361147f, +0.4923571f, +0.1700365f, -0.1484455f, +0.0671349f,
  +0.1088431f, +0.0491055f, +0.0684328f, -0.0107864f, +0.0499916f, +0.1128491f, +0.0704590f, +0.1797089f,
  +0.1690699f, +0.1109472f, -0.2577193f, -0.1082889f, -0.1422002f, -0.1539557f, +0.1610140f, -0.1203317f,
  +0.0411829f, +0.0450560f, -0.0518460f, -0.1464444f, +0.1532498f, +0.0021090f, -0.0425136f, -0.0573894f,
  +0.0122509f, +0.0677112f, -0.0359019f, +0.0630393f, +0.0143093f, +0.1496890f, -0.0357620f, +0.0019780f,
  +0.1389603f, +0.0212138f, +0.1904577f, -0.0626622f, -0.2661972f, +0.2223484f, +0.1383478f, +0.1336521f,
  -0.3566890f, +0.2718874f, -0.1593850f, -0.3853097f, +0.1434787f, -0.1501349f, -0.0885641f, -0.2066102f,
  +0.1198855f, -0.0084034f, +0.1265059f, +0.0913261f, -0.2677027f, +0.2857671f, -0.0205093f, +0.1122045f,
  -0.0441386f, -0.2277929f, -0.0361508f, +0.3409218f, -0.1709263f, +0.0095744f, +0.0879885f, +0.0700301f,
  -0.2885001f, +0.9291806f, +0.5580015f, -0.2611673f, +0.6085283f, -0.1674583f, +0.3359444f, +0.0827239f,
  -0.0068875f, -0.0518469f, +0.0082227f, +0.2968695f, -0.2540485f, +0.0632626f, -0.4034376f, -0.1617067f,
  -0.1531450f, -0.1541140f, +0.0688308f, +0.3315726f, +0.3660416f, -0.0316671f, -0.0995387f, +0.1360465f,
  -0.2919385f, +0.1090991f, +0.1276417f, -0.2918733f, +0.0503339f, -0.2397697f, -0.3316499f, +0.2737541f,
  +0.3899920f, -0.1186084f, +0.0690091f, +0.3096156f, -0.0812948f, -0.0023312f, -0.2317484f, -0.2203878f,
  -0.1025086f, +0.1151095f, -0.0403710f, +0.0621579f, +0.0345143f, -0.0479438f, -0.0887412f, -0.1157335f,
  +0.1238467f, +0.1014872f, +0.1227448f, +0.3238607f, -0.0423974f, +0.0102803f, -0.1442052f, +0.0070667f,
  +0.0283655f, +0.0003028f, -0.0154212f, +0.0528936f, +0.0068111f, +0.0317434f, -0.0263316f, +0.0736442f,
  -0.2249113f, +0.2861007f, -0.0442898f, -0.2743321f, -0.1234163f, -0.1363361f, +0.0107530f, -0.2522522f,
  +0.0277575f, -0.1719042f, -0.1661256f, -0.1357384f, -0.0201306f, -0.1085211f, +0.0789277f, -0.1593345f,
  +0.1473642f, -0.1320093f, -0.0334990f, -0.1475505f, -0.0858141f, +0.1155068f, -0.0785152f, -0.0206308f,
  +0.0355838f, +0.1615889f, -0.1204432f, -0.3147980f, +0.1392649f, -0.1605261f, +0.0393232f, -0.0509904f,
  +0.2819870f, -0.0225005f, -0.0955515f, -0.2504219f, +0.2047216f, +0.0169864f, -0.0420312f, +0.0237809f,
  +0.2683119f, -0.0305932f, -0.3000932f, -0.3773751f, +0.0830143f, -0.1896266f, +0.1090377f, -0.0580541f,
  +0.2287182f, -0.1875215f, +0.0199115f, +0.1418882f, -0.0805038f, -0.1813912f, +0.0422570f, +0.1892561f,
  +0.0267071f, -0.2943067f, +0.3246654f, -0.3204411f, +0.2469836f, +0.0261046f, +0.0755820f, +0.0557331f,
  +0.0024598f, +0.0385080f, -0.0623553f, +0.1492293f, +0.0338160f, -0.1418778f, +0.1227688f, -0.0729415f,
  -0.7122105f, +0.2072765f, -0.2122587f, +0.5223693f, +0.2399454f, +0.2284185f, -0.1818321f, +0.2050701f,
  -1.1160173f, +0.9229326f, -0.0716267f, -0.0534436f, +0.3211140f, -0.1102520f, -0.6637948f, -0.3925589f,
  -0.3136488f, +0.3958962f, -0.0299826f, -0.1372061f, +0.2769244f, -0.1249975f, -0.0127363f, -0.0579208f,
  +0.4047844f, -0.1045404f, +0.2377933f, -0.3446108f, +0.0307861f, -0.1987807f, -0.0253119f, -0.1131499f,
  +0.5450147f, +0.1540998f, +0.0149539f, -0.4443249f, -0.4340020f, -0.4733815f, +0.1969686f, +0.3675827f,
  +0.1092635f, -0.0611358f, +0.1791158f, +0.0460107f, -0.0676843f, -0.1753411f, -0.1260136f, +0.1161292f
);

const float biases[4] = float[4](
  +0.0602793f, -0.0607892f, +0.0660840f, -0.1244006f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer89 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1053308f, +0.0191003f, +0.0180178f, -0.0798890f, +0.0658312f, +0.0708048f, -0.0085365f, -0.0410091f,
  +0.0164514f, +0.0885666f, -0.1280078f, +0.1394173f, -0.0465924f, -0.0508409f, -0.0445937f, +0.0016819f,
  -0.1308899f, +0.0377633f, +0.0312352f, -0.1696424f, +0.0405123f, +0.0813105f, -0.0029478f, -0.0280139f,
  +0.0798359f, +0.0574441f, -0.0069089f, -0.0141550f, -0.0648318f, +0.0866291f, +0.0244164f, -0.1047278f,
  +0.2212759f, -0.1306256f, +0.3194038f, +0.1329436f, +0.2701833f, +0.0518840f, +0.0606999f, +0.1602467f,
  -0.0985670f, +0.0390616f, -0.1151342f, -0.2209877f, +0.0266136f, -0.0067246f, -0.1720318f, +0.0458553f,
  +0.0672471f, -0.1923440f, +0.0968881f, -0.0077527f, +0.3157522f, +0.3548560f, -0.1157707f, +0.1336329f,
  +0.2633580f, -0.3168255f, -0.0512036f, +0.1157138f, +0.0785252f, +0.2162327f, -0.0999025f, -0.0393406f,
  +0.1590164f, -0.1040033f, -0.0720769f, +0.0437691f, +0.1350455f, -0.1653735f, -0.2989159f, +0.1310838f,
  -0.3230211f, +0.4323691f, -0.1607732f, +0.0372354f, +0.0541030f, +0.0592837f, -0.1965614f, -0.4353046f,
  -0.2351593f, +0.4208507f, -0.1366619f, +0.2178548f, +0.2104658f, -0.0669014f, -0.3525742f, -0.2925021f,
  -0.0943980f, +0.1469231f, +0.0460773f, -0.0299601f, +0.0629824f, -0.1196717f, +0.0161363f, -0.0476339f,
  +0.2664900f, +0.2766101f, -0.1219715f, -0.0759458f, -0.1136094f, +0.1266206f, +0.4960258f, -0.1683041f,
  +0.0883176f, +0.1596913f, -0.0067451f, -0.5792482f, -0.3294273f, -0.2328246f, +0.0343055f, +0.4055559f,
  +0.0146801f, -0.0164980f, +0.0775641f, -0.0151744f, -0.2673616f, -0.0404938f, -0.0570469f, +0.0545593f,
  +0.2149282f, +0.1507093f, -0.0991812f, -0.1851043f, -0.0918656f, +0.0483484f, -0.0975066f, +0.1970783f,
  -0.0520757f, +0.0076184f, +0.1363291f, -0.0645303f, -0.0189841f, -0.0247829f, -0.2096850f, +0.3090843f,
  +0.1398120f, -0.0251212f, +0.0673754f, -0.0170472f, +0.0313153f, -0.0589775f, +0.0317032f, +0.0532535f,
  -0.1693646f, +0.0489041f, -0.1516549f, +0.1717594f, +0.0249689f, +0.0082239f, -0.0981457f, +0.0431448f,
  +0.1567587f, -0.0633064f, -0.1501322f, +0.0502471f, +0.0429014f, -0.2537242f, +0.0327532f, +0.0075693f,
  +0.0719569f, -0.0689486f, +0.0925369f, +0.0515164f, -0.2125979f, +0.0104077f, -0.0609173f, -0.0231728f,
  +0.2692919f, +0.0313529f, -0.0506460f, -0.0147727f, +0.5232837f, -0.4223287f, -0.1676179f, +0.1439499f,
  -0.1857256f, +0.0089139f, +0.0440301f, -0.0065232f, +0.0482493f, -0.2870906f, +0.0759847f, -0.2004396f,
  +0.0290739f, +0.2322686f, -0.1320771f, +0.1413067f, +0.0993705f, -0.0219673f, +0.1182669f, -0.0147705f,
  +0.0072848f, +0.0106622f, -0.2034619f, -0.0397843f, +0.1022295f, +0.1707623f, +0.1484246f, -0.1570044f,
  -0.0117475f, -0.1849952f, -0.0539978f, -0.0213369f, +0.2468025f, -0.1956868f, -0.0251097f, -0.1102837f,
  -0.1262028f, -0.1496740f, -0.0362402f, -0.0367879f, -0.1998545f, +0.1875660f, -0.1786854f, -0.0738561f,
  -0.2503948f, +0.1141086f, -0.4029250f, -0.0286828f, -0.1035258f, -0.0893475f, -0.3150935f, -0.1815358f,
  -0.2744628f, +0.2483583f, -0.2571732f, -0.0906614f, +0.0538279f, -0.3491527f, -0.2408036f, -0.0863534f,
  +0.0252102f, -0.0695032f, +0.0926132f, -0.2111846f, +0.0424444f, +0.0474117f, +0.0145321f, -0.0197816f,
  +0.1765381f, +0.2799247f, -0.3520147f, -0.3296541f, -0.2361193f, +0.2558115f, +0.2328503f, +0.0606982f,
  +0.1732073f, +0.2296920f, -0.1297480f, -0.0829225f, +0.0970203f, -0.5169746f, -0.3207900f, +0.1272436f,
  +0.1812619f, +0.0623630f, -0.0811469f, -0.0210282f, +0.0402359f, -0.1830744f, +0.1558320f, +0.0234756f,
  +0.0703613f, +0.2349509f, -0.0341172f, -0.2444921f, -0.0621932f, -0.0466062f, +0.0605292f, -0.0524431f,
  +0.1029793f, -0.0238921f, -0.1078797f, +0.0616639f, +0.0458011f, +0.1055089f, -0.0911154f, +0.1140943f,
  -0.0425275f, +0.0951086f, +0.1339587f, +0.0747585f, +0.0942420f, +0.2007041f, +0.0456544f, +0.0507955f
);

const float biases[4] = float[4](
  +0.1008831f, -0.0343080f, +0.0066316f, +0.0502100f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer90 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1642130f, -0.1235755f, -0.1443859f, -0.0560158f, -0.0231656f, +0.0592238f, -0.0134887f, +0.0650462f,
  +0.0833851f, +0.2374938f, -0.2921109f, -0.3825080f, -0.2674547f, +0.0855441f, +0.0204243f, -0.0470317f,
  -0.2081801f, -0.0037115f, -0.0499443f, +0.1502527f, +0.0183635f, +0.0273693f, -0.0458017f, +0.2040067f,
  -0.2046320f, +0.3216757f, +0.1451059f, -0.1128375f, +0.0358498f, +0.0612675f, +0.2315799f, -0.0859872f,
  -0.0124075f, +0.2858478f, +0.0651059f, +0.4487592f, -0.1159191f, -0.2047192f, +0.0448409f, -0.1722313f,
  +0.1175777f, -0.0960478f, +0.1746207f, +0.1672329f, -0.2694389f, -0.2140830f, -0.2266596f, +0.0051265f,
  +0.2676221f, -0.0852470f, +0.2356671f, -0.1128799f, +0.2166572f, +0.0376831f, -0.0944220f, -0.2116956f,
  -0.0501464f, +0.0943312f, +0.0527889f, -0.2168541f, -0.0468190f, +0.1479602f, -0.0618271f, -0.0023237f,
  -0.1856940f, +0.0627427f, +0.1015558f, -0.0530579f, +0.2479120f, +0.0877073f, -0.1314929f, +0.0687545f,
  +0.0028925f, +0.0558482f, +0.2535760f, +0.2412990f, +0.0795206f, +0.1881794f, +0.0336110f, -0.1098095f,
  -0.0705126f, -0.3477801f, +0.2399012f, +0.5116662f, +0.5783423f, +0.1356329f, +0.0392975f, -0.1695259f,
  -0.0601057f, -0.2609093f, -0.0272886f, +0.0518142f, +0.4517275f, +0.1071358f, +0.1945420f, -0.1721938f,
  -0.1696567f, +0.1539350f, +0.1027255f, +0.2466256f, +0.1884385f, +0.0130445f, -0.1390833f, -0.1502280f,
  +0.1237811f, -0.1573061f, +0.2863224f, +0.7647121f, +0.3554914f, -0.1393473f, +0.0098872f, -0.4640612f,
  +0.0415584f, +0.3423924f, -0.1467564f, +0.2840940f, -0.1519991f, -0.1390772f, -0.1359469f, -0.3323612f,
  +0.0555212f, -0.0083583f, +0.0544451f, +0.0796508f, +0.0209501f, +0.0050416f, -0.1504029f, -0.0715923f,
  +0.3477264f, -0.2512286f, -0.0608884f, +0.0976513f, +0.1313441f, +0.2526980f, -0.3143147f, -0.3884265f,
  +0.2613544f, -0.2571769f, -0.1655260f, +0.0456040f, -0.0032140f, +0.1664428f, -0.0214530f, -0.4988535f,
  -0.0919491f, +0.1974513f, +0.0402492f, -0.0641897f, +0.0795826f, -0.0536548f, -0.0235986f, -0.0759873f,
  -0.0797092f, -0.2435825f, +0.0643183f, +0.3508199f, +0.0813884f, -0.0868745f, -0.1208555f, +0.1128982f,
  +0.0926291f, -0.0039819f, -0.1026591f, +0.2327278f, +0.1201428f, +0.0248862f, +0.1292474f, -0.0529500f,
  -0.0321093f, -0.0097586f, +0.0732378f, +0.0926386f, +0.1410181f, -0.0215086f, +0.0448577f, -0.0493680f,
  -0.0600424f, +0.2810925f, -0.0160758f, -0.3584764f, -0.4206287f, -0.0787562f, -0.0070289f, -0.1204352f,
  +0.1354040f, +0.1112695f, -0.1071741f, -0.2226150f, +0.0304586f, +0.4713106f, +0.0682849f, +0.0773484f,
  +0.0428648f, +0.3151318f, +0.1293034f, +0.1027385f, +0.2273483f, -0.1593002f, +0.0007035f, +0.0769251f,
  +0.0985040f, +0.4291266f, -0.1235316f, +0.0593599f, +0.1309156f, -0.2323926f, +0.3713835f, +0.1718628f,
  -0.0279974f, -0.0166103f, -0.0209632f, -0.0090495f, +0.0494912f, -0.0012764f, +0.0783155f, +0.2754824f,
  -0.1145895f, -0.1036653f, +0.0634905f, -0.0983755f, -0.1395581f, -0.0409427f, +0.0007629f, -0.0554891f,
  +0.2286914f, -0.4386682f, +0.2628151f, -0.0125271f, -0.4902504f, -0.0009665f, -0.1826687f, -0.0382430f,
  +0.0262826f, -0.1409224f, +0.0695952f, +0.0098216f, -0.1446882f, +0.0173205f, +0.1726989f, +0.0371457f,
  +0.1458630f, +0.4006335f, -0.0603885f, +0.0114566f, -0.0443738f, +0.1102171f, -0.1924063f, -0.1202594f,
  -0.0857620f, +0.9294946f, +0.0248225f, -0.1323441f, +0.0625889f, +0.4290326f, -0.0466914f, -0.1312491f,
  -0.2538455f, -0.1449405f, -0.0724768f, +0.2816517f, -0.0718397f, +0.2965935f, +0.1078679f, -0.0737685f,
  +0.0705869f, -0.1474736f, +0.0772185f, -0.0752442f, -0.0322481f, +0.2027471f, -0.2431595f, -0.1532446f,
  -0.2046816f, -0.0720351f, +0.0659913f, -0.3877772f, -0.1891634f, +0.5291433f, -0.1785606f, -0.1261805f,
  +0.0500152f, -0.1315064f, -0.1275786f, +0.0345165f, +0.0621621f, -0.0434359f, +0.0104540f, -0.2961467f
);

const float biases[4] = float[4](
  +0.0146256f, -0.0505908f, +0.0251937f, +0.1089128f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer90 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1299168f, +0.1901082f, -0.0851201f, -0.3009174f, -0.0634176f, +0.0132576f, +0.1306943f, +0.0934263f,
  -0.1641568f, -0.7418911f, -0.1941604f, +0.0862596f, +0.0350925f, +0.0518579f, -0.3923584f, -0.0046619f,
  -0.0073690f, -0.0836464f, -0.3292839f, -0.3656882f, +0.0169323f, -0.0577093f, -0.1256384f, -0.1105553f,
  -0.1709537f, -0.1216619f, +0.1013054f, -0.2324031f, -0.1724445f, -0.0729635f, +0.2453585f, +0.0762091f,
  -0.4070349f, -0.3819197f, -0.1137228f, -0.8443420f, -0.0655527f, +0.1494254f, +0.2143145f, -0.1735070f,
  -0.2277316f, -0.2474951f, +0.0985002f, -0.0896259f, +0.0955892f, +0.4169534f, -0.4496906f, +0.1464610f,
  -0.0172439f, +0.1700319f, +0.0824495f, +0.0122706f, -0.1141824f, -0.0501287f, +0.0630650f, -0.2109628f,
  -0.1321397f, +0.0409688f, -0.0186034f, +0.0800336f, -0.0962307f, +0.0898446f, -0.0502168f, +0.1505708f,
  -0.2395571f, -0.0029919f, -0.3335597f, +0.0543921f, +0.0562214f, +0.1256837f, -0.2005894f, -0.0944689f,
  -0.0662937f, +0.1103199f, -0.1986918f, -0.3655368f, -0.0046884f, +0.0601869f, +0.0154004f, -0.1064289f,
  -0.0307298f, -0.1626898f, -0.1031725f, +0.1490821f, -0.0605014f, -0.0224293f, +0.0685889f, +0.0152146f,
  -0.1056667f, -0.1678169f, -0.1506300f, +0.2137264f, +0.0216765f, +0.1673066f, +0.1174346f, -0.0743506f,
  -0.0543268f, -0.1600322f, -0.0667750f, -0.3801270f, +0.0665244f, -0.0098005f, -0.0514876f, +0.1814945f,
  +0.0249693f, +0.0264909f, -0.2049646f, -0.7956386f, -0.0808919f, -0.1056529f, +0.1237530f, -0.0829853f,
  +0.3122002f, +0.3305458f, +0.0304313f, +0.5338160f, +0.0338920f, -0.2394293f, +0.2792959f, +0.0683007f,
  -0.2016651f, +0.0276038f, +0.0236884f, -0.0581694f, -0.0004629f, -0.0326542f, -0.1054213f, +0.0736431f,
  +0.0141171f, +0.0952874f, +0.2686729f, -0.1052439f, +0.1702109f, -0.0798626f, +0.3890132f, +0.3884044f,
  +0.0399282f, -0.0874842f, +0.0513446f, +0.1544842f, +0.0349099f, +0.1242289f, +0.2215719f, +0.0149572f,
  +0.3049684f, -0.0610349f, +0.0555572f, +0.1191540f, +0.3781299f, +0.0467587f, +0.4410232f, +0.0663341f,
  -0.3213485f, -0.6129228f, -0.0439642f, +0.2358062f, +0.0864317f, -0.0480221f, +0.2415718f, -0.2015848f,
  +0.0718090f, -0.0128946f, -0.0775414f, -0.1355956f, -0.0103612f, +0.1151503f, -0.1013926f, -0.0712785f,
  -0.0169344f, -0.2437118f, +0.2729264f, -0.0997481f, +0.2784570f, +0.0966887f, +0.0442238f, -0.0978093f,
  -0.1169203f, +0.5628818f, -0.1536631f, -0.7603054f, -0.2464174f, +0.4083877f, -0.0153025f, +0.2697930f,
  +0.3126186f, -0.2270971f, -0.0891621f, +0.2458256f, -0.4550589f, +0.2162819f, +0.1838815f, -0.0210432f,
  -0.0955693f, -0.1979622f, +0.1736891f, +0.1853032f, +0.1058043f, -0.0859519f, +0.0278498f, +0.2099520f,
  +0.0601769f, +0.4218521f, +0.0776605f, -0.3634431f, +0.1186545f, +0.0634414f, +0.2627852f, +0.1232802f,
  -0.0754526f, -0.0232059f, +0.0282357f, -0.0419746f, -0.0382694f, -0.1789323f, +0.0328576f, +0.4293272f,
  -0.1284627f, +0.2550207f, +0.0257513f, +0.0190044f, +0.1237201f, -0.0742092f, +0.1627544f, +0.0612826f,
  -0.0814076f, -0.0534911f, +0.1587474f, +0.5888314f, -0.0733801f, +0.2073298f, -0.0514645f, -0.1120561f,
  +0.1438270f, +0.1723947f, -0.0001402f, -0.3124245f, +0.0238973f, -0.0521788f, +0.1800366f, -0.0164660f,
  +0.1033958f, -0.3960486f, +0.0441905f, -0.0107247f, +0.0337595f, +0.0059687f, +0.0479677f, +0.0498959f,
  -0.2337138f, -0.3309020f, +0.2703319f, -0.1350265f, -0.0555802f, +0.2954823f, +0.0211016f, -0.1020361f,
  +0.1435790f, -0.3610133f, +0.3282184f, +0.0456327f, +0.1355206f, -0.3619539f, +0.0013572f, +0.1572158f,
  +0.0289740f, -0.0930530f, +0.0477355f, +0.0227484f, +0.0947385f, -0.0732062f, -0.0220465f, +0.0913352f,
  -0.0186035f, -0.0193401f, -0.0746558f, -0.1369475f, -0.0316335f, -0.3624320f, +0.2238456f, +0.2490639f,
  +0.1255739f, -0.0671424f, +0.1465771f, +0.1218198f, +0.0804108f, -0.1564799f, +0.0552218f, +0.0377606f
);

const float biases[4] = float[4](
  +0.0594696f, -0.0484464f, -0.0323701f, -0.0055500f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer91 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1274074f, -0.1053174f, -0.1285716f, +0.2812599f, +0.1124767f, -0.1828614f, +0.1099682f, -0.0291227f,
  +0.0767530f, +0.0526612f, +0.5157673f, +0.0283171f, -0.1714953f, +0.0998692f, +0.0890709f, -0.2204251f,
  +0.1634286f, -0.3511182f, -0.0116738f, +0.0652003f, +0.0976159f, +0.1629543f, -0.3262618f, +0.1014819f,
  +0.0841944f, -0.4691914f, -0.0738461f, -0.0197139f, +0.2032285f, -0.3047959f, -0.0737022f, +0.0312789f,
  -0.2781510f, +1.0190771f, -0.0330171f, +0.2567503f, -0.1060333f, +0.0909964f, +0.3310957f, -0.2950893f,
  +0.2990673f, -0.1548594f, +0.1833670f, -0.0457958f, +0.0732052f, +0.0100821f, -0.1919193f, +0.1807060f,
  +0.0369218f, +0.1702835f, -0.0280287f, +0.1242883f, +0.1394917f, +0.1115030f, +0.0366295f, +0.0935576f,
  -0.3345825f, +0.1145777f, -0.0982260f, -0.1392570f, +0.1398839f, +0.1407254f, +0.1746284f, -0.2980588f,
  +0.1116236f, -0.2798433f, +0.0754575f, +0.1348876f, -0.2007774f, +0.0076130f, -0.3417723f, +0.1537111f,
  +0.0672391f, +0.0509883f, -0.0463380f, +0.0309068f, -0.0816285f, +0.0096701f, +0.0476481f, +0.0466745f,
  -0.0662190f, +0.0082441f, -0.0783113f, +0.0908347f, -0.0622662f, +0.1972421f, -0.1029167f, +0.0530691f,
  -0.0220109f, +0.0181870f, +0.0227830f, +0.0055395f, -0.0055818f, -0.1174486f, -0.0185428f, -0.0477469f,
  -0.1300691f, +0.3297818f, +0.0578314f, +0.2668484f, +0.3573071f, -0.2559903f, -0.0901949f, +0.1670951f,
  -0.3605355f, +0.1773422f, -0.2230519f, +0.0409455f, +0.0764513f, +0.4110887f, -0.2163044f, +0.2274213f,
  +0.1527034f, +0.0898265f, +0.1450625f, -0.1024337f, -0.0724406f, -0.1476832f, +0.0355199f, +0.0195947f,
  -0.0413508f, +0.4044856f, +0.2238841f, +0.1249189f, +0.7056996f, -0.1551488f, -0.0479167f, +0.1070561f,
  -0.4564962f, -0.5525498f, +0.1948825f, +0.1600862f, -0.5034813f, +0.2162297f, -0.4428200f, +0.3222133f,
  +0.4656620f, +0.0554284f, +0.1013789f, +0.1311861f, +0.1471518f, -0.0489063f, -0.2736093f, -0.0665067f,
  +0.0166847f, -0.1496663f, +0.0780190f, +0.0810587f, +0.0908213f, +0.1803307f, -0.0145590f, +0.1571901f,
  +0.1731668f, -0.0904527f, -0.0028481f, -0.1502856f, +0.0208744f, +0.1634801f, +0.1115495f, +0.1393670f,
  -0.0067354f, -0.0601839f, +0.1751797f, -0.0068432f, +0.1088212f, -0.0805374f, +0.1568379f, +0.1881679f,
  +0.2318130f, -0.0840418f, -0.1060709f, -0.0784698f, +0.1668658f, -0.1606233f, -0.0673222f, +0.0891076f,
  +0.3119144f, +0.2647744f, -0.1554015f, +0.0025485f, +0.2203067f, -0.0333454f, -0.0620257f, +0.1068409f,
  +0.2282028f, +0.0231840f, +0.0533350f, -0.1345830f, +0.2532542f, -0.1324414f, +0.2321000f, -0.0527610f,
  +0.1540140f, +0.0632435f, +0.0144251f, +0.1805688f, -0.1734648f, +0.2030696f, +0.0738670f, +0.1322905f,
  +0.1122815f, -0.1070116f, -0.1355316f, -0.0643912f, +0.1614901f, -0.0400893f, -0.1001941f, +0.0320614f,
  +0.0749243f, +0.0315962f, -0.0222701f, -0.2202103f, +0.1285427f, -0.2900483f, -0.0227202f, +0.0199470f,
  -0.2894813f, +0.1599869f, -0.1304106f, -0.1713207f, -0.1585694f, -0.0745266f, -0.0099517f, -0.2234979f,
  -0.1869347f, +0.1983731f, -0.0927911f, +0.1304100f, -0.0301140f, -0.0508849f, -0.2187326f, -0.2136627f,
  +0.0519638f, +0.0113871f, -0.1208834f, +0.1403326f, +0.0027457f, -0.1357886f, -0.0911296f, -0.0881531f,
  -0.2205933f, -0.1622689f, +0.2194490f, -0.1180187f, +0.1832712f, -0.1287325f, +0.1684284f, -0.2885054f,
  -0.2732547f, -0.1510736f, +0.0271769f, -0.3493287f, -0.3413734f, +0.0456987f, +0.0405529f, -0.2249873f,
  -0.3396187f, +0.4122812f, +0.1309584f, +0.0502010f, -0.0586587f, +0.1270563f, -0.0986282f, -0.0213166f,
  -0.1425167f, -0.5459078f, -0.0410280f, +0.0421446f, +0.1755028f, +0.1643292f, -0.1151024f, -0.2724058f,
  +0.0053047f, -0.2977690f, +0.0829300f, +0.2290289f, -0.1076811f, -0.2369187f, -0.1825109f, +0.0004547f,
  -0.3338595f, +0.1147989f, -0.0846575f, +0.2527860f, +0.1734883f, +0.1324208f, -0.0362142f, -0.0774218f
);

const float biases[4] = float[4](
  -0.0293071f, -0.0456465f, +0.0546591f, +0.0424779f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer91 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0387814f, +0.0628154f, +0.0213702f, +0.0537541f, -0.0377405f, +0.0589302f, +0.0050934f, +0.0364932f,
  +0.1478648f, -0.0137633f, -0.1067194f, -0.0280383f, +0.0770844f, -0.0278462f, +0.0793572f, +0.0066725f,
  +0.0006679f, -0.0181129f, +0.0378935f, -0.0583916f, +0.0867403f, -0.0676856f, -0.0252766f, +0.0680848f,
  +0.2088561f, -0.2270144f, -0.2289768f, +0.2320950f, +0.1128529f, -0.0646244f, +0.1934514f, +0.0588888f,
  -0.1729733f, -0.0419529f, -0.3456267f, -0.1350354f, -0.3050891f, +0.0539410f, -0.1059120f, +0.3171855f,
  +0.1180193f, -0.0853440f, -0.0233832f, +0.3232418f, -0.3259696f, -0.0456109f, -0.0533930f, -0.0107962f,
  -0.0783980f, +0.1182435f, -0.1039056f, -0.1320118f, -0.1169241f, +0.1872269f, -0.2422719f, +0.0091642f,
  +0.0855481f, +0.0638411f, +0.3081855f, +0.1274310f, +0.2259183f, +0.2174708f, +0.0075650f, -0.1657958f,
  -0.0524372f, +0.1092836f, -0.0509733f, -0.1305582f, -0.0044162f, +0.1244321f, +0.0927759f, -0.0566156f,
  -0.1234912f, -0.0705376f, +0.0040613f, -0.0360683f, -0.1685029f, +0.0663370f, -0.1002892f, -0.0671654f,
  -0.0713870f, -0.1643842f, +0.3182182f, -0.2651635f, +0.0872573f, -0.3359825f, -0.2172632f, -0.2409141f,
  +0.0273784f, -0.0044834f, -0.0393291f, +0.0529693f, +0.1125454f, +0.0244746f, -0.1576720f, -0.1260913f,
  -0.4249976f, -0.1388990f, +0.0121458f, +0.0701465f, -0.0871103f, -0.1437305f, -0.1766593f, -0.3607767f,
  -0.3042646f, +0.1076511f, +0.0455146f, -0.0777940f, -0.1440138f, +0.1699195f, -0.0933863f, -0.2525929f,
  -0.2258219f, +0.3891031f, -0.1430213f, -0.1965917f, -0.1758668f, +0.0176798f, +0.2537775f, -0.0708873f,
  -0.2686289f, -0.3466996f, -0.0839178f, +0.2093334f, +0.0802614f, +0.0836441f, -0.1815383f, -0.1185386f,
  -0.1750287f, -0.0128226f, +0.1552378f, +0.1290975f, -0.0468529f, +0.0517582f, +0.1028002f, +0.0460646f,
  -0.0744290f, +0.0528044f, -0.0634665f, +0.1812588f, -0.0166789f, +0.0989612f, +0.1163132f, -0.0471187f,
  +0.2198031f, +0.0245835f, -0.0366928f, +0.0202785f, -0.2305566f, -0.0042278f, +0.0948215f, +0.1189001f,
  -0.0963184f, -0.1099850f, +0.0568995f, -0.1731567f, -0.0967766f, -0.0070287f, +0.1384829f, -0.0665948f,
  -0.0216665f, -0.0361285f, +0.0549015f, +0.0402547f, +0.0060867f, +0.0675263f, +0.0211956f, -0.0585988f,
  +0.1047774f, +0.1138967f, +0.1961336f, +0.0275970f, -0.0079525f, -0.0733748f, -0.0681297f, +0.1983151f,
  -0.3087903f, -0.1507083f, +0.0075719f, +0.0470771f, +0.1627695f, -0.1569718f, +0.2484510f, -0.0872521f,
  -0.0390404f, -0.1791050f, -0.3042440f, -0.1301040f, +0.0221175f, +0.1829749f, +0.0456688f, +0.1067877f,
  -0.0597972f, +0.1548196f, +0.1259295f, +0.1548315f, -0.1157573f, +0.0110615f, -0.0666974f, +0.2128491f,
  -0.1931445f, -0.4127517f, +0.0660891f, +0.1047792f, +0.2499464f, +0.0296077f, +0.2338425f, -0.1805208f,
  -0.2026006f, +0.0106458f, +0.1334334f, +0.0124022f, +0.1686408f, +0.1299542f, +0.0808936f, +0.0536728f,
  +0.3134315f, +0.0261646f, +0.2075483f, +0.0019750f, +0.1285179f, -0.0507380f, +0.2196829f, +0.2538532f,
  -0.4813605f, -0.0443768f, +0.0178396f, -0.3213177f, -0.0733213f, +0.5702323f, -0.0543282f, -0.2403803f,
  -0.2984344f, +0.2736667f, -0.2831930f, +0.1138427f, +0.2081120f, -0.4198998f, -0.4862204f, -0.0571208f,
  +0.0641113f, -0.2412946f, +0.1895889f, +0.1090686f, +0.0670750f, -0.0789528f, -0.2023725f, -0.0508556f,
  -0.0011645f, +0.5406400f, +0.1740325f, -0.0771862f, -0.1072499f, -1.0135157f, +0.2971653f, +0.4086451f,
  +0.0866280f, -0.3365770f, +0.0032148f, +0.2344078f, +0.0977199f, +0.5793564f, -0.1998373f, -0.0230926f,
  -0.0444577f, -0.0173688f, -0.0253782f, -0.0194686f, +0.0262943f, +0.1710941f, +0.1347486f, -0.0884720f,
  +0.0870361f, -0.1469254f, +0.1283123f, +0.0084538f, +0.3593801f, -0.0295196f, -0.1635327f, -0.1903137f,
  -0.0218738f, -0.0142937f, -0.1078571f, +0.1010901f, -0.2308075f, -0.1274028f, +0.0117913f, +0.1225894f
);

const float biases[4] = float[4](
  +0.0494173f, -0.0559606f, -0.0478818f, -0.0716470f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer92 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0735121f, -0.0533818f, -0.0572404f, +0.1546256f, -0.0904372f, -0.1597438f, +0.0669267f, -0.1195396f,
  +0.0319041f, +0.1556550f, -0.0870252f, +0.1850803f, -0.0206752f, -0.1316940f, +0.0407057f, +0.1731832f,
  +0.1351438f, +0.1057370f, -0.0527422f, +0.1438945f, +0.1158423f, +0.0147771f, -0.0194899f, -0.0561925f,
  -0.1851646f, -0.1397189f, -0.2490678f, +0.2637319f, -0.1863449f, -0.2609949f, -0.0513250f, -0.0084270f,
  +0.3831443f, +0.1402735f, -0.3437431f, +0.2818143f, -0.1955981f, -0.1976552f, -0.0390560f, -0.1710041f,
  -0.0489979f, -0.0182948f, +0.0136651f, +0.2332747f, +0.0094211f, -0.0879559f, -0.2224011f, +0.1992177f,
  -0.0788717f, +0.0868659f, -0.0127748f, -0.0294260f, +0.1234270f, +0.0238780f, -0.0417127f, -0.0243616f,
  +0.1000543f, +0.1596800f, +0.0375266f, +0.1273688f, +0.0080217f, -0.0874772f, -0.1375912f, -0.1487609f,
  +0.1770127f, +0.0443216f, +0.0103238f, +0.0854930f, -0.1618362f, -0.1147327f, +0.0155243f, +0.0888551f,
  -0.0807581f, -0.0744118f, -0.0166294f, +0.0434458f, -0.1511814f, -0.0300351f, +0.3291572f, -0.1178635f,
  -0.3646864f, +0.4118099f, -0.1485022f, +0.2536632f, -0.0653688f, -0.0064582f, +0.0139423f, -0.0046196f,
  -0.0871857f, +0.3029417f, -0.0091525f, +0.0107544f, +0.1668782f, +0.2173039f, +0.3999406f, +0.0683964f,
  +0.0167986f, +0.1507479f, -0.1877218f, +0.0281209f, -0.3237993f, -0.0450435f, +0.3034903f, +0.3767122f,
  +0.2708779f, +0.1628051f, -0.1489154f, +0.2408728f, -0.7082375f, -0.2027215f, +0.1624544f, -0.0599912f,
  -0.1534733f, -0.1127401f, +0.2379347f, -0.1080574f, +0.4557289f, +0.3315867f, +0.0486788f, -0.2830962f,
  -0.1603763f, +0.0100939f, +0.0698518f, -0.0319569f, -0.0951239f, -0.0173787f, -0.2088712f, -0.1446496f,
  -0.0627002f, -0.0299601f, -0.0748649f, -0.1395920f, -0.0129525f, -0.1674246f, +0.0333919f, +0.0419727f,
  -0.1260041f, +0.0869630f, +0.0421702f, -0.1395240f, -0.1405261f, -0.0414404f, +0.0632672f, +0.0591183f,
  +0.0246137f, -0.0138724f, +0.0509829f, -0.0888686f, +0.1959904f, +0.1756498f, +0.1021673f, -0.1699647f,
  -0.0048530f, -0.3093818f, +0.0080763f, -0.0700138f, -0.2868187f, +0.0561198f, +0.0159317f, -0.0006823f,
  +0.0061940f, +0.0637810f, -0.0439970f, -0.0103303f, +0.2438272f, -0.0228442f, -0.0418669f, +0.0534479f,
  -0.2989629f, +0.2299258f, -0.0929908f, +0.0264715f, +0.1747578f, -0.1417448f, -0.0541297f, -0.0119616f,
  -0.0375518f, -1.0832502f, +0.1777556f, -0.1732867f, +0.0188463f, +0.0556678f, +0.0508379f, -0.1345222f,
  -0.0678902f, +0.0620624f, -0.0789635f, -0.0678060f, +0.0449271f, +0.0996885f, -0.2599781f, +0.1569178f,
  -0.0102672f, +0.1309683f, -0.1121968f, +0.1435695f, -0.1146256f, -0.1014834f, +0.0686978f, -0.0645904f,
  +0.5432763f, +0.1764560f, +0.0388640f, +0.0129312f, +0.1307165f, -0.0171038f, -0.3612556f, +0.2776591f,
  +0.1804883f, +0.1622472f, -0.2072740f, +0.0008806f, +0.0652029f, -0.0977106f, +0.1134133f, -0.0603260f,
  +0.0010143f, +0.0744156f, +0.1893168f, -0.0593845f, -0.0447700f, +0.1174577f, +0.0021490f, -0.1201159f,
  +0.0126362f, -0.2713373f, +0.0066607f, -0.0309103f, -0.1695008f, +0.0021618f, -0.1959942f, -0.1207466f,
  -0.1198858f, -0.1269435f, -0.0142720f, +0.0134944f, +0.1611546f, -0.0161660f, -0.1114381f, +0.0364577f,
  +0.1328844f, -0.1061729f, -0.0238586f, -0.0752912f, -0.0556827f, +0.0332931f, +0.0261367f, +0.0854155f,
  -0.1626821f, +0.2500378f, -0.2516862f, +0.0399106f, +0.4908012f, -0.1010630f, +0.1524830f, +0.3698153f,
  -0.0551138f, -0.1115746f, +0.0313623f, -0.0348601f, -0.1119453f, +0.0525625f, -0.0107974f, -0.1768202f,
  -0.1263903f, -0.0792592f, +0.1414551f, -0.1767359f, +0.1212565f, +0.1047786f, +0.1825172f, +0.2039909f,
  -0.5288691f, +0.0775465f, +0.0855620f, -0.0857331f, +0.1701537f, +0.1757985f, +0.0773845f, -0.4282989f,
  -0.1614299f, +0.0132704f, +0.1852532f, -0.0182879f, -0.0929006f, +0.1175991f, -0.2667949f, -0.0611573f
);

const float biases[4] = float[4](
  -0.0173245f, +0.0240426f, -0.0174599f, -0.0063710f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer92 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0381201f, -0.0661052f, -0.0401049f, +0.0349082f, +0.1758080f, -0.0829634f, +0.1674139f, +0.1005166f,
  -0.0862801f, +0.3655342f, -0.0175667f, +0.0127950f, -0.7069448f, +0.0012371f, +0.2242728f, +0.0009141f,
  -0.1456184f, +0.1874630f, +0.0881715f, +0.0160086f, +0.2807240f, +0.0945876f, +0.1371555f, +0.0624943f,
  -0.2957405f, +0.0367907f, -0.2348982f, +0.0802639f, +0.2984649f, +0.0534445f, +0.1112265f, +0.4055684f,
  -0.1847245f, +0.7372194f, -0.1489493f, +0.1465387f, +0.4424003f, -0.2267665f, +0.3709550f, -0.4706332f,
  -0.5005070f, +0.2090857f, -0.1649534f, -0.1724715f, -0.0238574f, +0.1478119f, +0.3695039f, -0.0554684f,
  -0.1900009f, -0.0658279f, +0.0779500f, -0.0745590f, -0.0061865f, +0.0811005f, -0.0380839f, -0.2729217f,
  -0.4880823f, -0.0576469f, +0.0849154f, -0.0675051f, +0.0904743f, -0.0350276f, +0.0587362f, -0.1790160f,
  -0.4129102f, -0.0051364f, +0.1121193f, -0.1284108f, +0.3721803f, +0.1283899f, +0.0133024f, +0.1122760f,
  -0.1541301f, -0.0030732f, +0.1227263f, -0.0615285f, +0.1831446f, +0.0950675f, +0.2916693f, -0.1611079f,
  -0.0839323f, -0.3389678f, -0.1774431f, +0.0460348f, -0.2624561f, -0.0043379f, +0.0582578f, -0.0180537f,
  -0.1027461f, +0.1276618f, -0.0250993f, -0.0871519f, -0.0458587f, +0.1254136f, +0.1836924f, -0.0818931f,
  -0.1742456f, +0.1147835f, -0.0937965f, +0.1495188f, +0.2397471f, -0.1248797f, +0.1034381f, +0.2385761f,
  +0.1196645f, +0.2533005f, +0.1820068f, +0.0299753f, +0.1367812f, +0.0390984f, +0.3419508f, -0.3912854f,
  -0.0674450f, -0.0542909f, +0.0128522f, -0.0570690f, +0.2020160f, +0.1819231f, +0.0839980f, -0.0529483f,
  -0.0812892f, +0.1066821f, +0.0399109f, +0.0477838f, +0.0819473f, -0.0273879f, +0.1121194f, -0.1592619f,
  -0.3466920f, +0.1856291f, -0.0727760f, +0.1217537f, +0.2277024f, -0.0461100f, -0.0732933f, +0.1273807f,
  -0.1026523f, +0.0412998f, +0.0722697f, +0.0728590f, -0.1132006f, -0.0145705f, -0.0074839f, -0.0733630f,
  -0.2418888f, +0.1553382f, -0.2248574f, +0.0710232f, +0.0499584f, -0.1992609f, -0.4028870f, +0.1656763f,
  -0.1464823f, -0.0780714f, +0.1111626f, +0.0486563f, -0.0664534f, +0.0354973f, -0.0214948f, -0.2108361f,
  -0.1561373f, +0.2151927f, -0.1919864f, +0.0092714f, +0.1274444f, -0.0605816f, -0.1345504f, +0.0383560f,
  +0.3148519f, +0.5953390f, -0.0608732f, +0.1449068f, +0.0525368f, -0.1318264f, -0.0058272f, +0.2162713f,
  +0.2268020f, +0.0595014f, -0.1105606f, +0.1464492f, +0.0585619f, -0.0376765f, -0.3352020f, -0.1091102f,
  -0.0282255f, -0.0138703f, +0.0702863f, +0.0567511f, -0.1841396f, -0.0846958f, -0.0600441f, +0.0620169f,
  -0.1340018f, +0.1021310f, -0.0838038f, +0.0797148f, +0.0655122f, -0.0774822f, -0.1407477f, -0.0035426f,
  +0.0491034f, +0.0712495f, +0.0024939f, +0.1543418f, +0.1608248f, +0.0776480f, +0.0734266f, +0.0838511f,
  +0.1427166f, +0.1559086f, -0.0212096f, +0.0833196f, -0.0339651f, -0.0458431f, -0.0423069f, +0.0301522f,
  +0.1903868f, +0.1469432f, -0.1244941f, +0.0781445f, +0.2020802f, -0.0948796f, -0.1966161f, +0.0632375f,
  +0.0016399f, +0.1535668f, +0.0316469f, -0.1690784f, +0.1148395f, -0.0885577f, +0.2367868f, -0.0746628f,
  +0.0634424f, +0.0778960f, -0.1435239f, +0.2236761f, -0.0042948f, -0.1848877f, -0.1396271f, +0.0937148f,
  -0.1512284f, +0.2792203f, +0.0386700f, +0.1049798f, +0.2145104f, -0.0125735f, -0.0149379f, -0.0396589f,
  +0.1424064f, +0.2198147f, -0.0228747f, +0.0211313f, -0.1332598f, -0.1963638f, +0.1729328f, +0.6692689f,
  -0.0199656f, +0.3564310f, -0.2372234f, +0.0728126f, -0.1546489f, -0.1362634f, +0.1188067f, -0.2783264f,
  -0.0736030f, -0.0312830f, -0.0467579f, +0.0405018f, +0.0177755f, -0.0758017f, +0.0490835f, -0.0475756f,
  -0.4141259f, +0.0377613f, -0.0227523f, +0.1653698f, -0.0084040f, -0.0218469f, -0.2314733f, -0.1745735f,
  -0.2346645f, -0.0155113f, -0.1036911f, +0.1457326f, +0.0531679f, -0.0819316f, +0.0793370f, +0.0574605f
);

const float biases[4] = float[4](
  -0.0080233f, +0.0539349f, +0.0047624f, +0.0022500f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer93 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2773154f, -0.1919272f, +0.0219104f, +0.1597914f, +0.0965946f, -0.0286638f, +0.0247633f, -0.0001356f,
  -0.5711132f, +0.3885963f, +0.4599403f, -0.4507221f, +0.1386289f, -0.2240376f, -0.3832586f, -0.0952078f,
  -0.0336425f, +0.1114148f, -0.2513623f, +0.3212894f, +0.0962289f, -0.3230706f, -0.1040446f, -0.1482103f,
  +0.2108140f, +0.0183141f, -0.1909425f, -0.0921538f, -0.0928269f, -0.2242477f, +0.1229734f, -0.0188443f,
  -0.2205730f, -0.3863084f, +0.1928967f, -0.3992085f, +0.4674018f, -0.4602121f, -0.1546813f, +0.0597382f,
  -0.4934689f, +0.0850356f, +0.1493481f, -0.0746357f, +0.7366934f, +0.1698688f, -0.2654612f, -0.1714477f,
  -0.2015720f, +0.0410153f, -0.0848192f, +0.0213574f, +0.1158858f, -0.0914279f, -0.1211851f, -0.2135296f,
  -0.0278668f, -0.2834852f, +0.0330180f, +0.3441334f, -0.1529608f, -0.2253887f, -0.0475040f, -0.0343811f,
  +0.3153481f, -0.1444234f, +0.1037840f, -0.2191195f, +0.0907598f, -0.2884026f, +0.1123068f, +0.1255186f,
  +0.1039509f, -0.0833843f, -0.0537767f, +0.1728650f, +0.1091267f, +0.0888049f, +0.1462671f, +0.1600640f,
  +0.0554183f, +0.0014559f, -0.0810508f, +0.0984850f, +0.2380160f, -0.4477303f, -0.0622807f, -0.2428558f,
  -0.1208077f, +0.0686502f, -0.0493834f, -0.0256354f, -0.1158169f, +0.1068876f, +0.1040849f, -0.1324061f,
  +0.0227610f, +0.0125213f, +0.2034031f, -0.1415427f, +0.2076656f, +0.0491051f, +0.1128819f, -0.0388471f,
  +0.1847429f, -0.3201097f, +0.1450692f, -0.6759167f, -0.0007985f, -0.0999711f, +0.0907613f, -0.0348231f,
  -0.3789505f, -0.1084601f, +0.1813373f, -0.3033413f, +0.3062406f, +0.0022140f, -0.0157801f, -0.0591190f,
  +0.0137174f, -0.1066342f, -0.0394818f, +0.0341013f, -0.0697846f, -0.0073289f, -0.1055891f, +0.0841325f,
  +0.1306908f, -0.1738356f, +0.0618983f, -0.2150672f, -0.4931479f, -0.1011869f, -0.0708823f, +0.1026076f,
  +0.1417242f, -0.3361644f, +0.0925028f, -0.0299103f, -0.1376945f, -0.1473364f, -0.0515967f, -0.0036783f,
  +0.2862345f, -0.0732220f, -0.0645574f, +0.0680395f, -0.0502659f, -0.0618483f, +0.1352498f, +0.0304786f,
  +0.0446153f, -0.2139143f, +0.0234455f, -0.0922361f, -0.0150995f, +0.0086639f, -0.0885808f, +0.0834960f,
  -0.1174401f, -0.1751959f, -0.0214286f, -0.1383054f, +0.0995595f, +0.2869036f, -0.0757484f, +0.1203032f,
  +0.0355050f, +0.2342919f, +0.1244489f, +0.0531999f, +0.0536010f, +0.0456677f, -0.0342084f, +0.2652908f,
  +0.0747855f, +0.0184682f, +0.0311254f, -0.1952900f, -0.2577755f, +0.1935308f, -0.1038723f, +0.4283927f,
  +0.0658630f, +0.0509332f, +0.0895367f, +0.2042569f, -0.0552251f, +0.2834498f, -0.2060009f, +0.0321211f,
  -0.0403846f, +0.0397638f, +0.0843323f, +0.1202866f, +0.0622577f, -0.0838427f, -0.0477064f, +0.0291171f,
  +0.2073521f, -0.0929571f, +0.0325987f, -0.0945926f, -0.1701177f, +0.1282966f, -0.0100644f, +0.1661515f,
  -0.2753153f, +0.0866274f, -0.0470251f, +0.1157341f, -0.0271196f, +0.1478107f, +0.1490298f, -0.2581291f,
  -0.2442175f, +0.0363800f, -0.3274861f, +0.1027173f, +0.3356197f, +0.0776717f, -0.2315355f, +0.1119741f,
  -0.1393705f, +0.2645855f, +0.0660927f, +0.0496474f, +0.0182156f, -0.0882247f, -0.0589741f, -0.1614988f,
  -0.0118446f, +0.1541562f, -0.0934191f, +0.1325706f, +0.0324723f, -0.0734597f, -0.0654957f, -0.1376993f,
  +0.2510453f, +0.2095054f, +0.2528258f, +0.3980392f, +0.2322543f, -0.4504717f, +0.3893164f, -0.9051364f,
  +0.1745447f, -0.1168099f, +0.1765392f, -0.6070593f, +0.7786537f, +0.4709690f, -0.1541922f, -0.0925265f,
  +0.1889073f, +0.1727923f, -0.2484803f, -0.0680426f, +0.0579647f, -0.2455164f, -0.0386203f, -0.1138691f,
  +0.0695546f, -0.1404702f, -0.2628423f, -0.2098461f, -0.1453027f, -0.5028015f, -0.1940562f, +0.2885356f,
  +0.2160326f, -0.5287311f, +0.0404535f, +0.0314272f, +0.0030193f, -0.5754830f, -0.1526725f, +0.3398597f,
  +0.0272260f, +0.0119950f, -0.0190568f, +0.1500673f, -0.3013053f, -0.0782279f, -0.0606206f, -0.0728940f
);

const float biases[4] = float[4](
  -0.0453625f, +0.0105986f, +0.0112059f, +0.0014208f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer93 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2007654f, -0.1020204f, -0.0212078f, +0.0205896f, -0.1987805f, +0.1647997f, +0.0210326f, +0.1215028f,
  +0.0631429f, -0.0238685f, +0.0064002f, -0.1530129f, -0.1875639f, +0.0835596f, +0.1203448f, +0.0921872f,
  +0.0179286f, -0.0606301f, +0.0716657f, -0.0094718f, -0.1076182f, +0.0620288f, +0.2141955f, +0.0224198f,
  +0.1391606f, -0.0700493f, -0.0623652f, +0.0548336f, -0.0327760f, +0.0567697f, -0.1293639f, +0.0749695f,
  -0.4026408f, +0.2608560f, -0.1945597f, +0.1348503f, +0.1759578f, +0.0546685f, +0.0373524f, +0.1039408f,
  +0.0825048f, +0.1650247f, -0.2495172f, +0.2783318f, -0.0070727f, -0.0608645f, +0.1979580f, -0.0785265f,
  -0.3503389f, +0.2597381f, +0.0316147f, +0.0350974f, -0.1389924f, +0.0817196f, -0.0762018f, +0.0098610f,
  +0.1303691f, +0.0988137f, +0.2481117f, -0.1431577f, +0.1087828f, +0.2953501f, -0.4117339f, +0.1014991f,
  +0.4926460f, -0.0991394f, +0.0483283f, +0.0334048f, -0.0006866f, +0.0991394f, -0.1585113f, +0.1394349f,
  -0.0136634f, +0.0741856f, +0.1344880f, -0.0770455f, -0.0100197f, -0.0189683f, +0.1528320f, +0.0314567f,
  -0.1348537f, +0.0060359f, +0.0572869f, -0.3089034f, +0.1006330f, -0.2540245f, +0.0707422f, -0.1556731f,
  -0.1763156f, +0.0251111f, -0.0303775f, +0.1427893f, +0.0459622f, -0.0887007f, -0.1798297f, -0.0265832f,
  -0.1176310f, -0.1571981f, -0.1744156f, +0.0355166f, +0.0023844f, -0.0412994f, -0.1693559f, +0.1358830f,
  -0.0443971f, +0.0160802f, -0.1057894f, -0.2427711f, +0.1204332f, -0.2292705f, +0.2716796f, -0.3748000f,
  -0.2277910f, +0.0634467f, -0.0011607f, +0.0533218f, -0.3060381f, +0.3748325f, -0.0384793f, -0.0142481f,
  -0.0270332f, +0.2050385f, +0.1562454f, +0.3350055f, +0.4930463f, -0.0023883f, +0.1679168f, -0.0139223f,
  -0.6994390f, +0.3709323f, +0.4278481f, +0.1022868f, -0.2071377f, +0.6235024f, -0.6007927f, +0.9167499f,
  +0.1046319f, +0.1697965f, +0.3771186f, +0.1373357f, -0.2212255f, -0.2654473f, -0.1615113f, +0.0631729f,
  +0.1985689f, -0.0702229f, -0.0444385f, +0.0703975f, +0.1417143f, -0.1632321f, +0.0072682f, -0.0190553f,
  -0.0025721f, +0.0657994f, +0.1220055f, +0.1734371f, -0.1495801f, -0.0762011f, -0.0419187f, -0.0097331f,
  -0.1051358f, -0.0186217f, -0.1378808f, -0.2575423f, -0.0449365f, -0.0244434f, +0.0160963f, -0.1205106f,
  -0.2146992f, +0.3590462f, -0.0895054f, -0.1835683f, -0.0923334f, +0.1340250f, +0.1134859f, -0.2729051f,
  +0.3232079f, -0.5404314f, +0.3107814f, +0.2848768f, -0.1507850f, +0.1635629f, -0.0222957f, +0.3009831f,
  -0.0611616f, +0.1598297f, -0.3179353f, -0.1463741f, -0.1558486f, +0.2506552f, -0.0059741f, -0.1344917f,
  +0.1868772f, -0.2747756f, +0.0624880f, -0.1820610f, +0.0867073f, -0.0382734f, +0.0081029f, -0.0623587f,
  +0.1551517f, +0.0650169f, +0.0640486f, +0.1321316f, -0.2397117f, -0.2462566f, -0.1769313f, +0.2773428f,
  +0.2122342f, -0.0723422f, +0.1745119f, +0.1150406f, -0.0540434f, +0.2480941f, -0.1166197f, -0.0382404f,
  -0.0554083f, +0.0367577f, +0.1217451f, -0.1501898f, +0.1289497f, +0.1880332f, +0.0635465f, +0.0811246f,
  -0.0380893f, +0.2887912f, +0.1404459f, +0.0901084f, +0.1997197f, +0.0825780f, -0.1283696f, +0.0632656f,
  +0.1056938f, -0.0058575f, +0.1827850f, +0.2679157f, -0.0541126f, +0.0859222f, -0.0505597f, +0.0427301f,
  -0.2789811f, +0.1265009f, +0.0587256f, -0.0231073f, -0.0906247f, -0.0355733f, -0.1897570f, -0.2302527f,
  -0.2194892f, +0.2693998f, -0.0113688f, -0.0092090f, -0.0106184f, +0.2514562f, +0.2404945f, +0.3452501f,
  +0.0144778f, -0.0040693f, +0.1591185f, +0.0648329f, -0.1024311f, -0.0738920f, -0.1946890f, +0.2674278f,
  -0.1412146f, -0.2728609f, -0.0141542f, +0.1215486f, +0.0720827f, +0.1468141f, +0.2473046f, -0.5770843f,
  +0.0714267f, +0.2273943f, +0.1153193f, -0.2164355f, +0.0509545f, -0.2960231f, -0.1209747f, +0.3296607f,
  -0.0292200f, -0.0511249f, +0.3129018f, +0.3039125f, +0.0124580f, -0.0961252f, -0.2916485f, +0.1344358f
);

const float biases[4] = float[4](
  +0.0414473f, -0.0821923f, +0.0430432f, -0.0429464f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer94 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0751540f, +0.0920621f, +0.0076942f, +0.0414736f, -0.2284737f, +0.0656228f, +0.0112716f, +0.1294676f,
  -0.1438018f, +0.1020567f, -0.0377519f, -0.0389644f, +0.2416907f, -0.2805423f, -0.0263001f, -0.0117497f,
  +0.0807033f, +0.1040008f, +0.0310218f, -0.2370752f, +0.1760803f, -0.0343912f, -0.0377905f, +0.0954110f,
  +0.2577247f, +0.1406336f, -0.0129863f, +0.0993987f, +0.0177799f, -0.0883052f, -0.0139391f, +0.0905137f,
  -0.1121385f, +0.0880142f, +0.1349841f, -0.0480165f, +0.0106489f, +0.1549521f, -0.0768850f, -0.0609439f,
  -0.0708242f, -0.0491990f, +0.0533771f, -0.0724333f, -0.1130536f, -0.0898007f, +0.0812320f, +0.3607369f,
  +0.0466935f, +0.0750998f, +0.1363556f, +0.0602576f, +0.1700946f, +0.0285011f, +0.0909598f, -0.0186420f,
  +0.1582113f, +0.0356751f, +0.0596384f, -0.0484917f, -0.0281566f, -0.0431856f, +0.0130640f, +0.0318877f,
  -0.4277968f, -0.0107941f, -0.0421884f, +0.0938134f, -0.1200725f, +0.0400258f, -0.0800630f, +0.1179425f,
  -0.2373547f, +0.0885288f, +0.1062723f, +0.0339055f, +0.1078448f, -0.0298964f, +0.0392311f, +0.0860540f,
  +0.3094777f, +0.0386203f, +0.2343172f, +0.0934232f, -0.0563039f, +0.8587760f, +0.0455478f, -0.0122511f,
  -0.2929483f, +0.0253565f, -0.0378665f, -0.1991997f, +0.0338067f, -0.5113590f, +0.1598104f, -0.1466316f,
  +0.0905693f, +0.0508864f, +0.0701697f, -0.0222721f, -0.0650801f, +0.1427466f, +0.1404173f, +0.0520451f,
  +0.9308443f, +0.1274463f, -0.2728951f, -0.1974677f, -0.4730791f, +0.2403068f, +0.4922395f, +0.1049733f,
  -0.0422317f, -0.0912351f, +0.1366655f, -0.6575462f, +0.4377104f, +0.1415565f, -0.1863687f, -0.0587051f,
  -0.4128547f, -0.0435183f, +0.1031729f, -0.0014068f, -0.0086640f, -0.0215485f, +0.0066872f, +0.0923672f,
  -0.0950729f, -0.0358399f, +0.0638737f, +0.0158960f, -0.1554416f, +0.0780610f, -0.0308196f, +0.1569519f,
  -0.1293114f, -0.1171159f, +0.0687584f, +0.0298244f, +0.1334082f, +0.0361852f, +0.0969838f, -0.1263010f,
  +0.1705932f, -0.0915583f, -0.0701070f, +0.0134908f, +0.0199899f, +0.2807669f, -0.1098243f, +0.0189872f,
  -0.1760518f, -0.2642397f, -0.0213436f, +0.1679158f, -0.2857307f, -0.0881734f, +0.0132200f, -0.3126777f,
  -0.0307498f, -0.0862270f, -0.0238894f, +0.1385994f, -0.1199829f, -0.0907757f, +0.0932813f, +0.0212950f,
  +0.1887309f, +0.1032244f, +0.0481585f, +0.2639069f, -0.2323072f, +0.0535367f, +0.1112130f, +0.1138284f,
  -0.2194516f, +0.0898971f, +0.0863088f, -0.0801107f, -0.4944497f, -0.0879154f, -0.4379788f, +0.3302741f,
  -0.0293562f, +0.0773264f, -0.1063844f, +0.0239241f, -0.2532557f, +0.1556254f, -0.1540279f, -0.3272568f,
  +0.0206499f, -0.0274172f, -0.1371184f, -0.1084807f, +0.0886284f, +0.0411673f, -0.0094939f, +0.0416945f,
  -0.0298846f, -0.0525385f, +0.2405956f, +0.2533981f, +0.0057607f, -0.0904325f, -0.0080955f, +0.1267837f,
  -0.0273524f, +0.0277902f, -0.1827925f, -0.0114580f, +0.1009549f, -0.0686204f, +0.2025585f, +0.0025633f,
  +0.1636046f, -0.0950093f, -0.0430611f, -0.0182628f, +0.0078707f, +0.2246113f, -0.0337172f, -0.0268729f,
  +0.0186858f, -0.0237704f, -0.0522979f, +0.1820323f, -0.0298193f, +0.0935870f, +0.0742812f, -0.1841665f,
  +0.0185881f, -0.1320145f, -0.0130061f, +0.1085583f, -0.0604679f, +0.0379183f, +0.0045724f, +0.0073127f,
  +0.0158053f, -0.0325918f, -0.0689734f, +0.0883172f, -0.1248066f, -0.1007305f, +0.1586526f, -0.1453395f,
  -0.4579687f, -0.0110385f, +0.2414163f, +0.0809580f, -0.2792352f, -0.3871202f, -0.0884021f, +0.0413523f,
  +0.1660896f, -0.1343666f, +0.1042165f, -0.1533070f, -0.1169048f, +0.1295984f, -0.0632907f, -0.0793715f,
  +0.3542437f, -0.0512812f, -0.0007398f, +0.0507397f, -0.0002972f, -0.1022022f, +0.1545010f, -0.0632658f,
  -0.4910871f, -0.0944359f, +0.0904114f, -0.1049280f, +0.0210640f, -0.0736837f, -0.1843177f, -0.1008386f,
  +0.2071767f, -0.0227453f, +0.2283254f, +0.3189001f, -0.2117433f, -0.0240363f, -0.1110929f, +0.0492874f
);

const float biases[4] = float[4](
  -0.0083997f, +0.0093348f, -0.0127968f, +0.0404909f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer94 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2185432f, +0.1180826f, -0.0850506f, +0.1065046f, +0.0447289f, -0.1687902f, +0.0620762f, +0.0980821f,
  -0.0790253f, +0.0283029f, +0.0551086f, +0.0149388f, -0.2716787f, -0.0776446f, +0.4286007f, -0.0494661f,
  -0.0676256f, +0.1444349f, -0.0804058f, -0.0332093f, +0.0282022f, -0.3973683f, -0.0956004f, +0.0716007f,
  +0.0671316f, +0.0212706f, +0.0442609f, +0.0434552f, +0.2515560f, +0.2181004f, +0.0753309f, -0.0531095f,
  -0.1815183f, +0.1236134f, +0.0889212f, +0.5506676f, -0.2668054f, -0.2977850f, +0.6438004f, +0.2797151f,
  -0.3840247f, +0.0729599f, +0.1296259f, +0.2161575f, -0.1901690f, -0.3828267f, +0.0399987f, +0.2233080f,
  -0.1538985f, -0.0437759f, -0.1388911f, +0.0398577f, +0.0653771f, -0.0624548f, -0.0380626f, -0.0977673f,
  +0.0381361f, -0.0172547f, -0.1332860f, -0.0246928f, +0.0621657f, -0.0089119f, -0.0998410f, +0.0488031f,
  -0.3196170f, +0.0101177f, -0.0045810f, -0.0808975f, -0.0412152f, -0.0297227f, -0.1287861f, +0.0571071f,
  +0.3150777f, +0.0851603f, -0.0433318f, +0.0987606f, -0.0033914f, -0.3983565f, -0.0312678f, +0.1013779f,
  -0.2176748f, -0.1379512f, -0.0408366f, +0.1522268f, -0.4622742f, +0.2422938f, +0.2445360f, -0.3724653f,
  -0.0172489f, -0.1417008f, +0.0611774f, -0.2058598f, +0.1950258f, -0.0629895f, +0.2084739f, -0.0894991f,
  +0.4751617f, +0.0942569f, -0.1136276f, +0.1673102f, -0.0246879f, +0.2071651f, -0.1422475f, +0.0650349f,
  +0.6807246f, +0.2435327f, -0.0856496f, +1.0143093f, -0.3190511f, -0.9789843f, +0.4962120f, +0.1075295f,
  +0.1663598f, +0.1305400f, -0.0419765f, -0.7448586f, +0.1940700f, +0.5585430f, +0.0173403f, -0.3706849f,
  +0.0790340f, +0.1373745f, -0.1158275f, -0.1289921f, +0.1184727f, +0.0785900f, +0.1601721f, -0.0850359f,
  +0.3808143f, -0.0176673f, +0.1580821f, +0.2434229f, +0.0203852f, -0.1250512f, +0.0472014f, +0.0354967f,
  +0.1198897f, +0.0840434f, +0.1094154f, +0.0423062f, +0.0411359f, -0.0250063f, +0.0552887f, +0.1082007f,
  +0.2773861f, +0.1911724f, +0.0456943f, +0.0595141f, +0.1986533f, -0.1343591f, +0.0374754f, +0.0797875f,
  -0.1009927f, +0.1469904f, -0.0138217f, +0.1223954f, -0.0191584f, +0.2265748f, -0.0109654f, +0.2011297f,
  -0.1039662f, +0.2070444f, -0.0580168f, +0.1015579f, +0.0078835f, +0.1096553f, -0.0301792f, +0.1192050f,
  +0.3568592f, +0.1041609f, +0.2168831f, +0.0444390f, -0.0390749f, +0.0291434f, +0.1566824f, +0.0963538f,
  +0.1877203f, +0.0357600f, +0.0649218f, +0.0935084f, -0.2524295f, -0.2915013f, -0.1376537f, +0.3158599f,
  -0.0676514f, +0.1316479f, -0.1520779f, -0.1837705f, -0.0564277f, +0.1974087f, -0.0083861f, -0.0597256f,
  +0.0271153f, +0.0749936f, +0.1680805f, -0.1209724f, +0.0930840f, +0.1824477f, +0.1797044f, -0.0373626f,
  +0.1310520f, +0.0498084f, -0.1856695f, +0.0331686f, +0.1976189f, -0.1241725f, -0.0383638f, +0.0778412f,
  -0.1277978f, +0.0851374f, -0.0026909f, +0.1695560f, -0.0865899f, -0.0045984f, +0.0024538f, +0.0704966f,
  -0.0870466f, -0.0293830f, +0.1881874f, +0.0204794f, +0.0578609f, +0.1558446f, -0.0784957f, +0.0242024f,
  -0.0676228f, -0.0131810f, -0.0498887f, +0.1561999f, -0.1237996f, +0.4180410f, -0.0199043f, +0.2683236f,
  +0.0986426f, +0.0828994f, +0.0233508f, +0.2429203f, +0.0685989f, +0.2489824f, -0.2467194f, -0.1314023f,
  -0.1564675f, -0.0364798f, +0.0145304f, +0.0248439f, +0.0405827f, -0.1152164f, +0.2934458f, +0.0191434f,
  +0.2350129f, +0.0886995f, -0.2323308f, -0.2449952f, -0.3031646f, +0.0996234f, +0.1890697f, +0.3349106f,
  +0.2866911f, -0.0135457f, -0.2569656f, -0.1995608f, +0.1634542f, +0.0773407f, +0.3424291f, -0.2309114f,
  -0.0489879f, -0.0766258f, +0.0097791f, -0.0804330f, +0.1605261f, +0.0429868f, +0.0176615f, -0.0696164f,
  +0.0378179f, +0.0012897f, -0.0676527f, +0.0687093f, -0.0001789f, -0.0589661f, -0.1062533f, +0.0577551f,
  +0.2138797f, +0.0446624f, -0.0469026f, +0.0069998f, -0.0510901f, +0.0899559f, -0.0065322f, +0.0698992f
);

const float biases[4] = float[4](
  -0.0345500f, +0.0497628f, +0.0168085f, +0.0067576f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer95 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2232870f, -0.1844748f, -0.0081590f, +0.2977601f, +0.1640512f, -0.0868938f, +0.2371375f, -0.0571180f,
  -0.2117990f, +0.2233456f, +0.5710186f, -0.5031600f, -0.2911563f, +0.0592201f, -0.0012178f, -0.1677981f,
  +0.1001272f, +0.0045514f, -0.0853766f, -0.0261784f, +0.3388455f, -0.1266662f, -0.0597415f, +0.0161197f,
  -0.2231793f, -0.4432058f, +0.1443411f, +0.0040161f, -0.2036249f, -0.0158619f, -0.0867967f, -0.3028230f,
  +0.2516132f, +0.7264546f, +0.4239345f, +0.1907975f, -0.1709783f, -0.1132408f, +0.3685354f, -0.7224212f,
  -0.2152505f, -0.2558255f, -0.2610506f, -0.2747369f, +0.1139351f, +0.1644987f, +0.0488157f, +0.3783929f,
  -0.1190712f, -0.1575135f, -0.0312711f, +0.1131108f, +0.0108320f, +0.0097680f, +0.0030532f, -0.0674424f,
  -0.0170524f, -0.0261413f, -0.0566645f, -0.3109550f, +0.1688037f, -0.0725763f, -0.1683008f, -0.1474774f,
  +0.1988970f, -0.0535809f, +0.1437771f, +0.1224536f, +0.1221292f, -0.1783836f, -0.1042676f, +0.1961876f,
  +0.0517518f, -0.0353715f, +0.0632194f, -0.0856323f, -0.0701432f, +0.1525584f, -0.0126478f, +0.0869404f,
  +0.1926972f, -0.0069337f, -0.0794580f, +0.0553029f, -0.1512933f, +0.1389831f, +0.3071216f, -0.0751909f,
  -0.2697725f, +0.0766522f, +0.1020354f, -0.0389602f, +0.1251631f, +0.0145030f, -0.2096290f, +0.0294334f,
  +0.1426731f, +0.0852739f, +0.0891906f, -0.1823499f, +0.2188538f, -0.1347697f, +0.0785492f, +0.1047652f,
  -0.5097411f, +0.0925167f, -0.1408217f, -0.0029536f, +0.0541060f, +0.1745770f, +0.2733010f, -0.1836052f,
  +0.1032376f, -0.1046564f, -0.0878660f, -0.0089151f, -0.1794634f, -0.0274264f, +0.0700530f, -0.0049571f,
  +0.4423759f, -0.1433846f, -0.0587209f, -0.1206192f, -0.2656037f, +0.1003829f, +0.0616669f, +0.0482400f,
  +0.3655905f, -0.0099047f, -0.0869848f, -0.0944894f, -0.2640426f, +0.2165273f, +0.2709222f, +0.0865522f,
  +0.0613079f, +0.0677633f, +0.0911605f, +0.0613128f, +0.1395916f, +0.0078353f, +0.1470575f, -0.0015413f,
  -0.0242803f, -0.0169717f, -0.0984884f, -0.0132644f, -0.0421324f, +0.1251583f, -0.0784439f, +0.0461733f,
  +0.3595198f, -0.0963695f, -0.0692180f, +0.4499134f, -0.0180182f, +0.0003222f, +0.2710515f, +0.0127287f,
  -0.0428795f, +0.0183051f, +0.0816927f, -0.1138246f, +0.0248234f, +0.1317542f, -0.0586129f, +0.0698148f,
  +0.1243971f, -0.0711462f, -0.0537827f, +0.0110179f, -0.1801072f, +0.2617561f, -0.2676609f, -0.0228271f,
  +0.2333042f, +0.1758737f, -0.0460722f, +0.0110400f, -0.0370751f, +0.0498722f, +0.3323177f, +0.0393941f,
  +0.1090294f, -0.0148556f, +0.0930507f, +0.1620712f, -0.0387859f, -0.0414051f, -0.0473023f, +0.0953306f,
  -0.0301627f, +0.2286476f, -0.0071198f, -0.0570579f, -0.1306967f, +0.1345842f, -0.0107463f, +0.0927875f,
  +0.1089966f, -0.0300637f, -0.0636938f, -0.1066702f, +0.0074402f, +0.0589674f, +0.0702843f, +0.1181165f,
  -0.0771703f, -0.0136648f, -0.0688908f, +0.1304689f, -0.1181921f, +0.0022451f, +0.0791471f, -0.0941874f,
  -0.1941977f, +0.0531375f, +0.0061640f, -0.2280584f, -0.3038545f, +0.1534083f, -0.1005516f, -0.1036364f,
  +0.4744057f, -0.1431375f, +0.0940099f, +0.1203117f, -0.1158120f, -0.0737716f, +0.2516707f, -0.2564897f,
  +0.2119800f, -0.1029939f, +0.1004863f, +0.1647379f, -0.0295288f, +0.1382513f, +0.1704228f, -0.0381399f,
  +0.1446283f, +0.0249265f, -0.1168698f, +0.1099384f, +0.2386092f, -0.1854544f, +0.3237600f, -0.1997691f,
  -0.1488189f, +0.2567255f, -0.1586636f, -0.1674367f, -0.3530860f, +0.2716363f, -0.1667085f, +0.1863492f,
  +0.1769314f, -0.1004915f, +0.2006488f, +0.1286101f, +0.0988880f, +0.1577007f, -0.0432397f, +0.0841101f,
  +0.1294066f, +0.1471225f, -0.0765914f, -0.0740928f, -0.1132334f, -0.0222672f, +0.0452425f, +0.0101154f,
  -0.0351824f, -0.0522614f, -0.0296360f, -0.0974557f, -0.1693610f, +0.0791443f, +0.0978688f, +0.0379689f,
  -0.0163116f, -0.0138184f, -0.0042446f, -0.0840269f, -0.0072067f, +0.0180079f, +0.0517257f, +0.0021110f
);

const float biases[4] = float[4](
  -0.0162761f, +0.0229883f, -0.0034502f, +0.0229455f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer95 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0093030f, -0.1073867f, -0.0225384f, +0.0566171f, +0.2337938f, -0.2933761f, -0.1788761f, +0.0719331f,
  -0.2059762f, -0.0094286f, -0.3084700f, +0.3606308f, +0.0000045f, -0.1272264f, -0.1803122f, +0.1708342f,
  +0.1389784f, +0.0203121f, -0.1692687f, +0.1208367f, -0.2608296f, -0.1935005f, +0.0316781f, -0.0018434f,
  -0.4690653f, +0.4237137f, +0.3705947f, -0.0807870f, +0.4980998f, -0.2814527f, +0.0120987f, -0.3844507f,
  -0.2447325f, +0.2076982f, +0.4205220f, +0.2506686f, +0.7039839f, +0.1869112f, -0.2246384f, -0.5646219f,
  -0.0883605f, +0.1535106f, -0.1030847f, -0.1851173f, +0.2508615f, +0.0115703f, -0.1692104f, -0.1235811f,
  +0.0660603f, -0.3629297f, -0.0375214f, -0.1006202f, -0.0531666f, +0.0433402f, -0.1713529f, +0.0228842f,
  +0.3323092f, -0.2818995f, -0.0888538f, -0.2546824f, -0.3044449f, -0.1053547f, -0.2306698f, +0.2168996f,
  +0.1994103f, -0.0786871f, +0.0603114f, +0.0944156f, -0.2402640f, -0.1426854f, -0.1771134f, +0.0947799f,
  +0.0027225f, -0.0448286f, -0.1105309f, -0.0176607f, +0.0615745f, -0.0752757f, +0.0694156f, -0.0399887f,
  +0.0971212f, +0.0641804f, -0.1307519f, +0.2356245f, -0.3067786f, -0.0852524f, +0.1437230f, -0.0212916f,
  -0.2089341f, +0.0986137f, -0.0712247f, +0.0467320f, -0.0439712f, -0.0495119f, -0.0082314f, -0.0223093f,
  +0.4842342f, -0.0911209f, -0.2694020f, +0.1556445f, -0.1635825f, +0.0489275f, +0.2495584f, -0.0366541f,
  -0.5074993f, +0.1344755f, -0.1049435f, +0.0748619f, -0.0462102f, -0.1185994f, +0.1471289f, -0.2434563f,
  -0.1572959f, +0.0664535f, -0.0057310f, -0.0867537f, -0.2673405f, +0.1427046f, +0.0224774f, -0.0641591f,
  -0.0134328f, +0.3706397f, -0.1474859f, -0.0850226f, -0.1941982f, +0.1867349f, +0.2239651f, -0.1057589f,
  -0.0693194f, +0.0315774f, -0.0585169f, -0.1724988f, +0.0591862f, +0.1490345f, +0.0778007f, +0.0515674f,
  -0.1268041f, +0.0068109f, -0.0378649f, -0.1436667f, -0.0712164f, +0.1735142f, +0.0479016f, -0.0229781f,
  +0.1453990f, +0.0496273f, -0.0069932f, -0.0065627f, +0.0497190f, -0.0451080f, +0.1874543f, -0.0162821f,
  +0.1195244f, -0.0508704f, +0.0014324f, +0.0993512f, -0.0304597f, +0.0077807f, +0.0834217f, -0.0498893f,
  +0.1336692f, -0.0853218f, -0.0245550f, +0.0610348f, -0.0289756f, +0.0839060f, -0.0184843f, +0.0437476f,
  -0.0281850f, +0.1425174f, +0.0059238f, -0.1237903f, -0.0970396f, +0.0257886f, +0.0250777f, -0.0445604f,
  -0.2283992f, -0.0842114f, -0.1833810f, -0.0316194f, -0.3574390f, +0.0777009f, +0.0271927f, -0.1670805f,
  -0.3041873f, -0.0458920f, -0.2962297f, +0.0047116f, -0.0621268f, -0.1169946f, +0.0586720f, -0.0743426f,
  -0.0668580f, +0.0935088f, -0.0274091f, -0.0816746f, -0.0338419f, +0.0315053f, +0.0351865f, -0.0687538f,
  -0.0665984f, -0.3948473f, -0.0178354f, -0.0479812f, -0.1046800f, +0.0059500f, -0.0164238f, -0.0810368f,
  -0.0518568f, -0.0740704f, -0.0575253f, +0.0761866f, +0.0315682f, -0.0669892f, +0.0129547f, -0.0538262f,
  +0.2209312f, -0.1579009f, -0.0280598f, +0.0305572f, +0.1143643f, -0.1332667f, -0.0130441f, +0.0986679f,
  +0.4727024f, -0.1072542f, -0.2341240f, +0.5851762f, -0.0986912f, -0.1368691f, +0.2926703f, -0.0339502f,
  +0.1996009f, -0.2684075f, -0.0839654f, +0.1174743f, -0.0623909f, +0.0656560f, -0.0350066f, +0.0689469f,
  -0.4536927f, +0.3195421f, -0.0388781f, -0.0021157f, -0.0208064f, +0.0983819f, +0.0320279f, -0.1619517f,
  +0.0423709f, -0.0646371f, -0.2764198f, -0.0381314f, +0.0551930f, +0.1138915f, +0.2848310f, -0.1673008f,
  -0.1684654f, +0.1881856f, -0.4689452f, -0.4304732f, +0.1713556f, -0.1259773f, +0.1963982f, -0.2281696f,
  +0.1922756f, +0.0026837f, -0.0585908f, -0.0979350f, +0.0270281f, +0.1069088f, +0.1109102f, -0.0564028f,
  -0.1344792f, +0.0579429f, +0.2523471f, +0.1736101f, +0.0208982f, -0.0524542f, -0.2357059f, +0.1610320f,
  -0.0016402f, +0.0658703f, +0.2006342f, +0.0297906f, -0.0570614f, +0.0531478f, -0.2831516f, +0.1941343f
);

const float biases[4] = float[4](
  +0.0082503f, +0.0243614f, +0.0189919f, +0.0320074f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer96 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!BIND FEAT_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

#define TEX_BIND_L3_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L3_TEX FEAT_L0_tex
#define TEX_BIND_L3_POS FEAT_L0_pos
#define TEX_BIND_L3_SIZE FEAT_L0_size
#define TEX_BIND_L3_PT FEAT_L0_pt

const float kernels[288] = float[288](
  -0.0709557f, -0.0092130f, -0.0531426f, -0.0220954f, +0.0304602f, -0.0796330f, +0.0453378f, +0.0717971f,
  +0.1207849f, -0.1246732f, -0.0303721f, +0.0455517f, -0.1205091f, +0.0781024f, +0.2418862f, +0.2040807f,
  -0.0470429f, -0.2587113f, +0.2302696f, -0.2256348f, +0.0521768f, +0.0361884f, +0.0954186f, +0.0061835f,
  -0.2190351f, -0.2108578f, -0.1870601f, -0.2184519f, -0.0343128f, -0.1613346f, +0.2216608f, +0.0497839f,
  +0.0888114f, +0.2681149f, -0.2061066f, +0.0545619f, +0.2629808f, +0.3278754f, +0.1059932f, -0.0821005f,
  -0.1224508f, -0.0021290f, +0.0985920f, +0.0177079f, -0.0673844f, -0.2809054f, -0.1217670f, +0.0660115f,
  +0.0094280f, +0.1086049f, -0.0926274f, -0.1866279f, +0.1001858f, +0.3401256f, +0.0278339f, -0.2029946f,
  -0.0605862f, -0.1006921f, -0.1874021f, -0.0370228f, +0.0493620f, -0.0779820f, +0.0331829f, -0.1864721f,
  +0.0084593f, -0.1424594f, -0.0048660f, +0.3176372f, +0.1204418f, -0.0233839f, -0.0236054f, -0.0129188f,
  -0.0002053f, +0.0750535f, -0.1545463f, +0.0262583f, -0.0646890f, -0.1408449f, +0.0353566f, +0.1934503f,
  -0.0551010f, -0.2014049f, -0.1284326f, -0.1386561f, -0.4528008f, -0.0351834f, +0.1041987f, +0.5410261f,
  -0.0588993f, -0.0482981f, -0.1856422f, -0.0794403f, +0.0845915f, +0.0526324f, +0.2213372f, +0.0453990f,
  -0.1171552f, -0.0312955f, -0.3496540f, +0.1826140f, -0.2481511f, -0.1423832f, -0.0021281f, +0.3648607f,
  -0.3969839f, +0.0726503f, -0.4341384f, -0.1110935f, -0.9243394f, -0.1581041f, -0.2675003f, +0.6010451f,
  -0.1949646f, -0.2362364f, -0.1669328f, -0.0957483f, +0.1580014f, +0.0455595f, -0.2636569f, -0.5696731f,
  -0.1719923f, +0.0874984f, -0.0694795f, -0.0811927f, -0.1184896f, +0.1169730f, +0.0301781f, +0.1872973f,
  -0.1431294f, +0.0071439f, -0.3207438f, +0.1287229f, -0.4716889f, +0.2937926f, -0.1441680f, +0.1696245f,
  -0.0117084f, -0.0002268f, -0.4502422f, +0.2057674f, -0.0315177f, +0.2350875f, -0.0438610f, -0.0792714f,
  -0.0636122f, -0.0849840f, +0.0559531f, +0.0716568f, +0.1952422f, -0.0172807f, +0.0553118f, -0.1853096f,
  +0.0280444f, +0.1420506f, +0.0360789f, -0.0881364f, -0.0146183f, +0.1058640f, +0.0455174f, -0.0843503f,
  -0.0218260f, -0.0319179f, -0.0826139f, -0.0050022f, -0.1940990f, +0.2168935f, -0.0613833f, +0.2445825f,
  -0.3356987f, +0.1818080f, +0.0334101f, -0.0857918f, -0.2179202f, +0.2413485f, +0.1075882f, +0.1648131f,
  +0.2330600f, +0.1852904f, +0.1580971f, +0.2628396f, +0.4498650f, -0.0471545f, -0.2034619f, +0.2140005f,
  +0.1676091f, -0.1521123f, +0.2163021f, +0.0676560f, +0.0199507f, -0.2756132f, -0.0135991f, +0.0042769f,
  -0.0380216f, +0.0287971f, -0.0368940f, +0.3150492f, -0.0249524f, -0.2183141f, -0.1337366f, -0.0837839f,
  +0.5647290f, +0.4040056f, +0.1288778f, +0.0979387f, +0.0952711f, -0.0019903f, +0.0267410f, -0.0657775f,
  +0.2053902f, -0.2120985f, +0.0007387f, +0.1724074f, -0.2198818f, +0.0513980f, -0.1234429f, -0.1226473f,
  -0.0749865f, +0.0036390f, -0.0333235f, -0.0084629f, +0.1795980f, -0.0975073f, +0.0279616f, -0.1742878f,
  -0.1149375f, +0.2165946f, -0.0663913f, +0.0698257f, +0.0826868f, -0.0489317f, -0.2533436f, -0.2522840f,
  -0.0081041f, +0.3367977f, -0.2384497f, +0.1954025f, -0.0545286f, +0.0190086f, -0.0336723f, -0.0067923f,
  -0.0895859f, -0.1058447f, -0.2210085f, +0.0814095f, -0.2729872f, -0.0663255f, -0.0676757f, +0.0670239f,
  +0.2446197f, +0.0231334f, -0.1290807f, +0.1231773f, -0.2106616f, -0.1175751f, +0.1232975f, +0.0179023f,
  +0.0573311f, +0.1976662f, -0.0738029f, -0.2177565f, -0.0961301f, -0.0480332f, -0.0622893f, +0.0828071f,
  +0.1373794f, +0.0665102f, +0.0898245f, +0.1214353f, +0.0069851f, -0.0756465f, +0.0762018f, +0.0759513f,
  -0.3750493f, -0.1624659f, -0.2543527f, -0.3105393f, +0.4724397f, -0.0010228f, +0.1604792f, -0.4331294f,
  -0.2364235f, +0.1609848f, -0.2112020f, -0.0811834f, +0.1189357f, +0.1143990f, +0.1953972f, +0.1788930f
);

const float biases[4] = float[4](
  -0.0012303f, +0.0184847f, -0.0107553f, +0.0489651f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)) + TEX_BIND_L3_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer96 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!BIND FEAT_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

#define TEX_BIND_L3_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L3_TEX FEAT_L1_tex
#define TEX_BIND_L3_POS FEAT_L1_pos
#define TEX_BIND_L3_SIZE FEAT_L1_size
#define TEX_BIND_L3_PT FEAT_L1_pt

const float kernels[288] = float[288](
  +0.0035134f, -0.0111139f, +0.0573007f, +0.0523228f, +0.1804467f, -0.2621498f, +0.1480461f, +0.0165565f,
  -0.1528701f, +0.2230291f, +0.1535960f, +0.0310961f, -0.0932716f, +0.0189202f, +0.0463527f, -0.0151205f,
  +0.0180552f, +0.1758971f, +0.0007379f, +0.1587144f, +0.3012324f, +0.0920233f, +0.0516495f, -0.1968755f,
  +0.2429091f, +0.0256489f, +0.1516854f, +0.0719589f, +0.2960644f, +0.2109104f, +0.1998388f, -0.3114859f,
  -0.0633820f, +0.3765635f, +0.1729805f, +0.2974053f, +0.2383976f, -0.0533694f, -0.1986594f, -0.3545487f,
  -0.2196471f, +0.0246234f, -0.1312964f, -0.2590901f, +0.4078020f, -0.0685276f, +0.1119419f, -0.0136891f,
  +0.0362476f, +0.1901017f, +0.0241093f, -0.0336842f, +0.0927362f, -0.0420761f, -0.1007797f, -0.0352798f,
  -0.0388681f, +0.0482087f, +0.0200590f, -0.1193466f, +0.1182235f, +0.0035077f, +0.1261087f, +0.0016344f,
  +0.1129396f, -0.0025667f, +0.2665740f, -0.2264970f, +0.2878507f, +0.0426045f, -0.2025148f, -0.1427834f,
  -0.1286419f, -0.1679731f, +0.0933780f, +0.0190772f, +0.1416751f, -0.0444548f, +0.1679178f, -0.2478647f,
  -0.0310641f, +0.2601666f, +0.2828355f, -0.0557144f, -0.1976621f, -0.0642885f, -0.1186147f, -0.0790329f,
  -0.1523888f, +0.0572724f, -0.1703842f, -0.1704753f, -0.1582541f, -0.0189014f, +0.1035950f, +0.2573758f,
  +0.1330500f, +0.1297842f, +0.1263896f, +0.1858818f, -0.0419658f, -0.2782344f, +0.2103580f, -0.5373241f,
  -0.2978340f, +0.3212769f, -0.1498944f, -0.0562989f, +0.8591226f, -0.1175473f, -0.1798829f, +0.0338684f,
  +0.3307946f, -0.0753748f, -0.0928767f, +0.0185625f, -0.1866404f, -0.2312280f, -0.2405922f, -0.0698254f,
  +0.2334088f, -0.0151522f, -0.0305193f, +0.2871803f, +0.0193503f, -0.2284785f, -0.0330207f, -0.4656108f,
  -0.4191136f, +0.0237991f, +0.3864286f, -0.7508312f, +0.5619149f, +0.0044599f, -0.0820770f, +0.0050828f,
  -0.1506927f, +0.1829133f, -0.2872005f, -0.2645356f, -0.3239056f, -0.0945596f, -0.0218985f, +0.0577724f,
  +0.0867499f, -0.0490736f, +0.1931382f, -0.0016546f, -0.1145806f, +0.0545817f, +0.0839530f, +0.2361200f,
  -0.2428822f, -0.2022902f, +0.2070950f, -0.1890543f, +0.0351951f, -0.0956295f, -0.0559021f, +0.2257847f,
  -0.1367580f, -0.1455132f, -0.1967443f, -0.0175206f, +0.1012213f, -0.0970219f, -0.0389510f, +0.0115805f,
  +0.5367302f, +0.3442365f, +0.1642798f, +0.3308131f, -0.0367672f, +0.0805002f, -0.0118749f, -0.0257926f,
  -0.0946323f, -0.0211018f, -0.2612664f, +0.0822621f, -0.4842257f, -0.1104026f, -0.0851137f, -0.3047341f,
  +0.2247613f, -0.1743945f, +0.0686884f, -0.3859307f, +0.1249638f, -0.1329424f, -0.0829994f, -0.0595163f,
  +0.1237444f, -0.0732506f, +0.1655960f, -0.0740305f, -0.0218646f, +0.0767101f, +0.0028244f, -0.1294921f,
  +0.1282679f, +0.1328339f, +0.0863717f, -0.3645411f, +0.0835152f, +0.1868690f, -0.0419470f, -0.2548056f,
  +0.1027295f, -0.1589359f, -0.3442852f, +0.1174292f, -0.0340707f, -0.0416265f, -0.0278851f, -0.0717986f,
  -0.0728380f, -0.0917251f, +0.1382923f, -0.0703822f, +0.0653821f, -0.0966932f, -0.0214121f, +0.0090752f,
  +0.0297256f, -0.2218181f, +0.0128699f, +0.1427004f, -0.0387925f, +0.0572123f, +0.1302422f, +0.1566072f,
  +0.0724266f, -0.1422206f, -0.1215828f, +0.1274492f, -0.0078255f, +0.1364933f, +0.0829429f, -0.1454158f,
  +0.2313084f, +0.0220533f, +0.1310300f, -0.0613514f, +0.1157047f, +0.2669279f, +0.3955118f, +0.0490333f,
  -0.3930224f, +0.2667453f, -0.0910051f, -0.0076646f, -0.5666019f, +0.2786407f, -0.0565284f, +0.0873762f,
  +0.0209507f, -0.1274723f, -0.1278853f, +0.2161285f, -0.0652709f, -0.1583416f, +0.2244429f, +0.0430109f,
  +0.0503580f, -0.0678902f, +0.1034247f, +0.0207166f, +0.1196231f, +0.0669342f, -0.1643412f, +0.0478610f,
  -0.1164569f, +0.0955421f, +0.0482649f, -0.0561614f, -0.1165059f, +0.1078080f, +0.1910512f, +0.0880192f,
  -0.0397641f, +0.1293848f, -0.2042996f, -0.1568613f, +0.0508457f, -0.0142993f, -0.1777488f, -0.0211011f
);

const float biases[4] = float[4](
  +0.0357340f, +0.0201115f, +0.0139343f, +0.0026590f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)) + TEX_BIND_L3_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b48 Layer97 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0369991f, -0.0048817f, -0.0142239f, +0.0705379f, +0.0315565f, -0.0739945f, +0.0639468f, -0.0587732f,
  -0.1067213f, +0.0080974f, +0.1405246f, -0.1705332f, -0.0096638f, -0.0009862f, -0.0352055f, -0.0341146f,
  -0.0130625f, -0.0191484f, -0.0252783f, +0.0211843f, -0.0411537f, +0.0018508f, -0.0550087f, -0.0213492f,
  -0.1139912f, +0.0786603f, -0.0889300f, -0.0221596f, -0.1914123f, +0.1921742f, -0.0891159f, +0.0913505f,
  +0.1249810f, -0.2717834f, +0.0307885f, +0.0974750f, +0.1352223f, +0.0629218f, -0.1039229f, -0.3722182f,
  -0.3286691f, +0.0550845f, -0.1488727f, -0.1488823f, -0.0264521f, +0.0118790f, -0.0123706f, -0.1599086f,
  +0.0948696f, -0.0826988f, +0.0259190f, +0.0290029f, +0.0281771f, -0.0790522f, +0.0169562f, +0.0270609f,
  -0.2508941f, +0.0205580f, -0.0135400f, +0.1249200f, -0.0595238f, -0.0768016f, +0.0704735f, -0.0965002f,
  -0.0785053f, -0.0021269f, -0.0171858f, -0.0442566f, +0.0262689f, -0.0076959f, +0.0223471f, -0.0324849f,
  -0.2219902f, +0.0572687f, -0.0031742f, -0.0438608f, +0.0261975f, +0.0321329f, -0.0711733f, -0.0506129f,
  -0.0556631f, +0.0007070f, -0.1872510f, +0.1397413f, +0.0836555f, +0.0053939f, -0.0386137f, -0.0755117f,
  -0.0970861f, +0.0586987f, +0.1392230f, -0.1030861f, +0.0161348f, -0.0341775f, -0.0819609f, +0.0353067f,
  +0.1203725f, +0.0605993f, -0.1033804f, +0.0189918f, +0.0302307f, +0.0506137f, +0.0268911f, +0.1476994f,
  -0.0994059f, -0.1946840f, -0.1878188f, -0.1852397f, +0.0261053f, +0.1041410f, -0.2035098f, -0.1550295f,
  -0.0599412f, -0.0424146f, +0.0548354f, +0.0226275f, -0.0026826f, -0.0005623f, -0.1559025f, -0.1449668f,
  +0.1458246f, +0.0035583f, -0.0213645f, +0.0141836f, -0.0503097f, +0.0005506f, +0.0328755f, +0.0306159f,
  -0.2671484f, -0.0414474f, +0.0133404f, +0.1666881f, +0.0938028f, -0.1029296f, +0.1454709f, -0.0910507f,
  -0.2298791f, +0.0772312f, -0.0655819f, -0.0024208f, +0.0142883f, -0.0285179f, +0.0648624f, -0.1201357f,
  -0.1335811f, +0.0235828f, +0.0004937f, +0.0151687f, +0.0381950f, +0.0120586f, -0.0167673f, -0.0256257f,
  -0.1601056f, +0.0296125f, +0.1156107f, -0.2281696f, +0.1447864f, -0.0405889f, -0.0805474f, -0.0106675f,
  -0.0806934f, +0.0393906f, +0.0029807f, -0.0215847f, -0.0076985f, -0.0061261f, -0.0311786f, -0.0134102f,
  +0.1190949f, -0.0529825f, -0.0545733f, +0.0688214f, -0.0963029f, +0.0858462f, +0.0560393f, +0.0293588f,
  -0.0483526f, +0.0042410f, -0.0091397f, +0.0844938f, -0.2218682f, -0.1457901f, -0.3380953f, -0.0829752f,
  -0.1055576f, +0.0286414f, +0.0284380f, +0.0121417f, -0.0852559f, -0.0516666f, -0.0451215f, -0.0774863f,
  +0.0444749f, -0.0192856f, -0.0552818f, -0.0461827f, -0.2529508f, +0.0800295f, -0.0879013f, +0.1096556f,
  -0.0751962f, -0.0784717f, -0.0304748f, +0.1366609f, +0.1715141f, -0.0433629f, +0.2756459f, -0.3706369f,
  -0.1847246f, +0.0226642f, -0.1704202f, -0.1022082f, -0.0130719f, -0.0057694f, +0.1092530f, -0.1361059f,
  -0.1747651f, +0.0793871f, -0.0133256f, +0.0009052f, -0.0138438f, +0.0184710f, -0.0204423f, -0.0666779f,
  -0.1574619f, -0.0157930f, -0.0271581f, -0.1392142f, +0.1260109f, +0.0361271f, -0.0969527f, -0.0505834f,
  -0.0302421f, +0.0562350f, +0.0887539f, +0.0084887f, +0.0307624f, -0.0184102f, -0.0320694f, +0.0282538f,
  +0.1192163f, -0.0985402f, -0.0762108f, +0.0636643f, -0.0190612f, +0.0644091f, -0.0145158f, +0.1866113f,
  -0.0897476f, +0.1161420f, -0.3038221f, -0.1627028f, -0.0969310f, +0.1720594f, -0.2065060f, -0.0102775f,
  -0.0624703f, +0.0811421f, +0.1655405f, +0.1798408f, -0.1820085f, -0.1290224f, -0.0953537f, -0.0165856f,
  +0.0489793f, +0.0848766f, +0.0056336f, +0.0657821f, -0.1037927f, +0.0304153f, -0.0219049f, +0.0989631f,
  -0.2511240f, -0.1083459f, -0.0715126f, +0.0664044f, +0.0646361f, +0.0068948f, +0.1700358f, -0.2357435f,
  -0.1558875f, +0.0161435f, -0.1440008f, -0.0316862f, +0.0008765f, -0.0313104f, +0.1765683f, -0.2208466f
);

const float biases[4] = float[4](
  +0.0557610f, +0.0387310f, +0.0552489f, +0.0374338f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ACNet b48 Layer98 L0
//!WIDTH LUMA.w 2 *
//!HEIGHT LUMA.h 2 *
//!BIND TMP1_L0
//!COMPONENTS 1

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

vec4 hook() {
    vec2 fcoord = fract(TEX_BIND_L0_POS * TEX_BIND_L0_SIZE);
    vec2 pos = TEX_BIND_L0_POS + (vec2(0.5f) - fcoord) * TEX_BIND_L0_PT;

    ivec2 icoord = ivec2(fcoord * vec2(2.0f));
    int index = icoord.y * 2 + icoord.x;

    vec4 r = TEX_BIND_L0_TEX(pos);

    return vec4(clamp(float[4](r.x, r.y, r.z, r.w)[index], 0.0f, 1.0f), 0.0f, 0.0f, 1.0f);
}
