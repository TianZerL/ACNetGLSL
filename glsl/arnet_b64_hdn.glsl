//!HOOK LUMA
//!DESC ARNet b64 Layer0 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND LUMA
//!SAVE FEAT_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF LUMA_texOff
#define TEX_BIND_L0_TEX LUMA_tex
#define TEX_BIND_L0_POS LUMA_pos
#define TEX_BIND_L0_SIZE LUMA_size
#define TEX_BIND_L0_PT LUMA_pt

const float kernels[36] = float[36](
  +0.5997199f, +0.5028014f, +0.2099489f, -0.1192092f, -0.1549968f, +0.6351255f, +0.4272860f, +0.2607346f,
  -0.2575624f, +0.2155108f, -0.1194326f, +0.1236475f, +0.1537626f, +0.3050138f, -0.6298802f, +0.0843010f,
  -0.5176905f, -0.2842433f, -0.2507153f, -0.5530488f, +0.7630386f, +0.3595548f, -1.0332599f, +0.0808585f,
  +0.3276629f, +0.1762160f, -0.1451764f, -0.5904214f, -0.3269348f, -0.2270674f, +0.3901585f, +0.1765438f,
  +0.6761936f, -0.4001245f, +0.3603297f, -0.1582081f
);

const float biases[4] = float[4](
  -0.0024239f, +0.0197310f, +0.0023922f, -0.0019516f
);

vec4 hook() {
    const vec4 r0 = vec4(
        TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)).x
    );
    const vec4 r4 = vec4(
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)).x
    );
    const float r8 = TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)).x;

    float sum[4] = biases;
    for(int n = 0; n < 4; n++) {
        const vec4 k0 = vec4(kernels[n * 9 + 0], kernels[n * 9 + 1], kernels[n * 9 + 2], kernels[n * 9 + 3]);
        const vec4 k4 = vec4(kernels[n * 9 + 4], kernels[n * 9 + 5], kernels[n * 9 + 6], kernels[n * 9 + 7]);
        const float k8 = kernels[n * 9 + 8];
        sum[n] += (dot(r0, k0) + dot(r4, k4) + r8 * k8);
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer0 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND LUMA
//!SAVE FEAT_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF LUMA_texOff
#define TEX_BIND_L0_TEX LUMA_tex
#define TEX_BIND_L0_POS LUMA_pos
#define TEX_BIND_L0_SIZE LUMA_size
#define TEX_BIND_L0_PT LUMA_pt

const float kernels[36] = float[36](
  +0.5708708f, -0.3072510f, +0.3770191f, +0.1871088f, +0.8963163f, -0.0017291f, -0.8567980f, +0.0829397f,
  +0.6093163f, +0.6595881f, +0.1969225f, +0.0906054f, +0.2414252f, -0.5088215f, -0.2130669f, +0.2253460f,
  +0.5223520f, +0.5938783f, -0.2501416f, -0.7458108f, +0.9764857f, +0.1144481f, -0.5707516f, -0.5124575f,
  -0.2409874f, +0.0871149f, -0.0081724f, -0.2266866f, -0.2194143f, +0.0286638f, +0.6779221f, -0.0517963f,
  -0.3805060f, -0.0948434f, -0.5300411f, -0.1973340f
);

const float biases[4] = float[4](
  -0.0136524f, -0.0076428f, +0.0135599f, +0.0196454f
);

vec4 hook() {
    const vec4 r0 = vec4(
        TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)).x
    );
    const vec4 r4 = vec4(
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)).x
    );
    const float r8 = TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)).x;

    float sum[4] = biases;
    for(int n = 0; n < 4; n++) {
        const vec4 k0 = vec4(kernels[n * 9 + 0], kernels[n * 9 + 1], kernels[n * 9 + 2], kernels[n * 9 + 3]);
        const vec4 k4 = vec4(kernels[n * 9 + 4], kernels[n * 9 + 5], kernels[n * 9 + 6], kernels[n * 9 + 7]);
        const float k8 = kernels[n * 9 + 8];
        sum[n] += (dot(r0, k0) + dot(r4, k4) + r8 * k8);
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer1 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND FEAT_L0
//!BIND FEAT_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L0_TEX FEAT_L0_tex
#define TEX_BIND_L0_POS FEAT_L0_pos
#define TEX_BIND_L0_SIZE FEAT_L0_size
#define TEX_BIND_L0_PT FEAT_L0_pt

#define TEX_BIND_L1_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L1_TEX FEAT_L1_tex
#define TEX_BIND_L1_POS FEAT_L1_pos
#define TEX_BIND_L1_SIZE FEAT_L1_size
#define TEX_BIND_L1_PT FEAT_L1_pt

const float kernels[288] = float[288](
  +0.1500155f, +0.0366336f, -0.0748165f, +0.0059887f, -0.3457071f, +0.0327474f, +0.1449894f, +0.1655340f,
  -0.0490287f, -0.0424755f, +0.1011571f, -0.0066076f, -0.0573765f, +0.3527058f, +0.2386284f, +0.1658898f,
  -0.0278027f, +0.1045591f, -0.1661959f, -0.1670624f, -0.2151532f, +0.1681598f, +0.1967718f, -0.1591619f,
  -0.0527643f, -0.1602918f, +0.1378175f, -0.1833960f, +0.1239028f, -0.0624188f, -0.0308969f, +0.1082391f,
  -0.2200779f, +0.0469368f, -0.0297889f, -0.4149295f, +0.0561056f, -0.0057881f, +0.3133903f, -0.1298243f,
  -0.2057043f, +0.1350241f, +0.1490294f, -0.1296350f, -0.0075623f, +0.0619729f, +0.0391433f, +0.1908203f,
  +0.0615650f, -0.1915395f, -0.2990540f, -0.2065877f, +0.0472775f, -0.1318461f, -0.0047987f, +0.3308735f,
  +0.0518169f, -0.1098383f, +0.5990644f, -0.1623843f, +0.1105400f, -0.1625267f, +0.1648040f, +0.1606554f,
  -0.0307460f, -0.2703970f, +0.0536057f, +0.2254257f, +0.1856932f, +0.0420825f, -0.0060703f, +0.1610833f,
  -0.0358750f, -0.1122477f, -0.0901818f, +0.0301080f, +0.1751729f, -0.1903187f, -0.1269461f, -0.2354305f,
  -0.0596303f, +0.3318146f, -0.0417732f, +0.1163904f, +0.1701280f, -0.1546805f, +0.2144451f, +0.2884455f,
  -0.4179775f, +0.1619549f, +0.1546886f, -0.1417077f, -0.2692203f, +0.1358462f, -0.2766235f, +0.1559826f,
  +0.2604270f, -0.0602636f, +0.1962934f, +0.3139334f, -0.0812971f, -0.0771336f, +0.0963103f, -0.0865519f,
  +0.1894145f, +0.1745023f, -0.1801946f, +0.3281518f, +0.0085283f, +0.0261634f, +0.3161906f, +0.0346569f,
  +0.0815377f, -0.1043947f, -0.0747268f, -0.0348041f, -0.1358873f, -0.2456494f, -0.0856052f, -0.1474656f,
  -0.2409347f, +0.2007284f, +0.1897028f, -0.2918248f, +0.2156828f, +0.1424912f, +0.1623890f, +0.0981113f,
  -0.0785513f, +0.0462876f, -0.1567325f, +0.5222328f, -0.0972610f, +0.3042760f, +0.3319379f, -0.3205721f,
  +0.0180356f, -0.1503751f, +0.0081741f, -0.3937503f, +0.0617221f, -0.2348543f, +0.2491233f, +0.2340830f,
  +0.0172307f, -0.0764463f, +0.2357446f, -0.0573912f, +0.0165726f, +0.0977366f, -0.0030866f, -0.1877620f,
  +0.0995837f, -0.2864439f, +0.3563075f, -0.0861676f, +0.3512835f, -0.0146154f, +0.0656595f, +0.2579517f,
  -0.1664891f, +0.2777511f, +0.2394431f, +0.0527902f, -0.0988980f, +0.1599434f, -0.1507177f, +0.0514623f,
  +0.2583998f, +0.0228512f, -0.0281346f, +0.2209705f, +0.1808030f, +0.0556671f, +0.1246054f, +0.0949845f,
  +0.0056095f, -0.0884488f, -0.3092090f, +0.0272333f, +0.0427827f, -0.1275707f, +0.1679286f, +0.1719227f,
  +0.2340681f, +0.0993195f, +0.0424416f, +0.0794441f, +0.0120418f, +0.0704703f, +0.0693688f, +0.0347905f,
  -0.1033275f, -0.1557393f, +0.2204725f, +0.1148665f, +0.0279066f, -0.1451722f, -0.0316480f, -0.1306461f,
  +0.1222223f, +0.1184445f, -0.0872729f, +0.1610797f, +0.2963808f, +0.3016481f, -0.0378358f, +0.1722387f,
  +0.1594643f, +0.0986169f, +0.0583764f, -0.0330883f, -0.0507056f, -0.0232583f, +0.0064014f, -0.0136789f,
  +0.1554544f, +0.0407536f, +0.0412559f, +0.0664955f, -0.1624209f, -0.0849149f, -0.1675364f, +0.0995843f,
  -0.0227809f, +0.1650734f, +0.0298082f, +0.0722922f, +0.0559961f, -0.1950070f, +0.1759328f, +0.2081664f,
  -0.0214962f, +0.2418797f, +0.0342990f, +0.0783663f, +0.1986172f, +0.1401584f, +0.0265035f, +0.0127340f,
  +0.1841311f, +0.0849060f, +0.2478693f, +0.1445448f, +0.2668828f, +0.0996860f, +0.0632712f, -0.3370772f,
  +0.1373312f, +0.2517927f, +0.1490358f, -0.0902566f, +0.0604070f, +0.0227760f, +0.1701161f, -0.1442334f,
  -0.1727425f, +0.0006380f, +0.0180805f, +0.0463110f, -0.0873592f, +0.1729981f, +0.0475158f, -0.2714237f,
  +0.0196989f, +0.0912370f, -0.2451010f, -0.2035585f, -0.0358781f, +0.1051364f, +0.5756462f, -0.1674170f,
  -0.0173655f, -0.2473783f, -0.2969195f, +0.3971849f, -0.1355717f, -0.0776624f, -0.0515846f, +0.1662767f,
  +0.1853714f, -0.0094484f, +0.1203520f, +0.0778275f, -0.1421803f, +0.0087187f, -0.0949057f, +0.1002263f
);

const float biases[4] = float[4](
  -0.2101214f, -0.1531174f, +0.0159066f, +0.1519865f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer1 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND FEAT_L0
//!BIND FEAT_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L0_TEX FEAT_L0_tex
#define TEX_BIND_L0_POS FEAT_L0_pos
#define TEX_BIND_L0_SIZE FEAT_L0_size
#define TEX_BIND_L0_PT FEAT_L0_pt

#define TEX_BIND_L1_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L1_TEX FEAT_L1_tex
#define TEX_BIND_L1_POS FEAT_L1_pos
#define TEX_BIND_L1_SIZE FEAT_L1_size
#define TEX_BIND_L1_PT FEAT_L1_pt

const float kernels[288] = float[288](
  +0.1199366f, -0.0047444f, -0.2048738f, +0.2398446f, -0.1964307f, -0.0925169f, -0.0013382f, -0.3167127f,
  -0.2350592f, -0.0502313f, +0.1082121f, -0.0237400f, +0.3200418f, +0.1048173f, -0.2115427f, +0.0577896f,
  +0.1155420f, +0.2037784f, -0.0004922f, -0.1782326f, +0.0779553f, +0.0524555f, -0.1031151f, +0.1957649f,
  +0.2607357f, +0.0794970f, -0.0236202f, +0.1881888f, +0.0739699f, -0.1030054f, -0.0448038f, +0.0653446f,
  -0.5278420f, -0.0245680f, +0.0415768f, +0.2852267f, -0.2203228f, +0.1528583f, +0.1019900f, -0.0054676f,
  +0.1802115f, -0.0614963f, -0.1533347f, +0.2304558f, +0.3606218f, +0.1388067f, +0.2040820f, +0.3658769f,
  -0.1672155f, -0.2813130f, +0.0908088f, +0.1280068f, -0.2015741f, +0.1384462f, +0.0851128f, +0.1223893f,
  -0.0680372f, -0.0090454f, +0.0124040f, +0.1210645f, -0.2691094f, -0.2126943f, +0.1575035f, +0.1774229f,
  -0.3101852f, -0.0636516f, +0.1512478f, -0.1480891f, -0.2253132f, -0.1370300f, -0.0498298f, -0.0854190f,
  +0.1251324f, +0.0283448f, +0.0575439f, +0.0822510f, -0.3185772f, +0.0498974f, +0.1699026f, +0.1109124f,
  -0.1131191f, +0.2345456f, -0.0829108f, +0.0412847f, -0.2377832f, +0.2378928f, -0.0755211f, +0.4166385f,
  -0.0458392f, -0.1821470f, -0.1138278f, +0.1947506f, +0.1212803f, -0.0209299f, +0.0988878f, -0.0895517f,
  -0.1201153f, +0.0589755f, +0.2194091f, -0.1985827f, -0.0127931f, -0.0749583f, +0.3765117f, -0.1242308f,
  -0.2490773f, -0.1049259f, +0.0447483f, -0.2518774f, +0.1406006f, +0.0330980f, -0.0117842f, +0.0626768f,
  -0.0348701f, +0.2627421f, -0.0547722f, -0.2155994f, +0.0594109f, -0.0063685f, -0.2714577f, +0.2274282f,
  +0.1881149f, +0.1238541f, -0.3174525f, +0.0502848f, +0.0375750f, -0.0580565f, -0.2453626f, -0.2991984f,
  -0.1392394f, -0.0388197f, -0.0631725f, +0.1589003f, +0.0884954f, +0.1798207f, +0.2203025f, -0.0505188f,
  +0.1703189f, +0.0418733f, -0.1758243f, -0.4278542f, +0.2325723f, -0.1635924f, +0.0221602f, -0.0207939f,
  +0.0242078f, +0.1750292f, -0.0492116f, -0.2679018f, +0.1168882f, -0.2819794f, +0.0833759f, -0.0463757f,
  +0.1820892f, +0.0220856f, +0.1789802f, +0.3345706f, -0.4605261f, +0.0486104f, -0.0755008f, -0.0426170f,
  -0.0419600f, +0.2580913f, +0.0235618f, -0.1284273f, -0.4600850f, +0.1478727f, -0.0088615f, +0.0548496f,
  -0.3783602f, +0.2516798f, -0.0786953f, -0.2789815f, -0.1768485f, -0.1983002f, +0.0507857f, +0.2826628f,
  -0.3277850f, +0.1087059f, +0.2725874f, +0.0659371f, -0.0425478f, +0.0589087f, +0.4431901f, +0.0544149f,
  +0.1508637f, -0.0799646f, -0.0000455f, -0.0572397f, -0.1758514f, +0.0650450f, +0.1198094f, +0.0678622f,
  +0.0020357f, -0.1631431f, -0.0876629f, -0.0567719f, -0.2130072f, -0.1802492f, -0.0636976f, -0.0179325f,
  -0.2477518f, -0.1145412f, +0.2390354f, -0.0869743f, -0.1050150f, +0.0710167f, -0.0016711f, -0.0591787f,
  +0.1366082f, +0.0700287f, +0.4068284f, +0.0605250f, -0.0235247f, +0.0043098f, +0.0498132f, -0.1875536f,
  -0.1612996f, +0.0365973f, -0.1440859f, -0.3565931f, -0.0402338f, -0.0870210f, +0.1134033f, +0.1863465f,
  -0.1712189f, +0.0037069f, +0.0398988f, -0.3144932f, +0.1163949f, -0.1283336f, -0.0210274f, +0.1716873f,
  -0.2860012f, +0.0349477f, +0.2157926f, -0.3072547f, +0.1942656f, -0.0611860f, -0.0543015f, +0.1091321f,
  +0.0265176f, +0.2702013f, -0.1585969f, -0.2990775f, +0.1530743f, -0.4613888f, -0.1401267f, +0.5344257f,
  +0.0508346f, -0.1366118f, +0.1180241f, -0.2570929f, +0.0411731f, -0.1534211f, +0.1439924f, -0.2703292f,
  +0.2529345f, -0.1639768f, +0.1263651f, -0.0728395f, -0.1350390f, +0.3303491f, +0.1420229f, -0.0606405f,
  -0.1031633f, +0.0536949f, -0.0464183f, +0.0650998f, -0.0447524f, -0.1404937f, -0.3743326f, -0.1026030f,
  -0.2087508f, -0.1747604f, +0.3229066f, -0.0952085f, +0.4085511f, -0.2227997f, +0.1716075f, -0.0269570f,
  +0.0327101f, +0.1516708f, -0.0743924f, +0.0182117f, -0.1649073f, +0.0198271f, -0.1758114f, +0.1626452f
);

const float biases[4] = float[4](
  -0.0901924f, -0.0398190f, -0.0899217f, -0.0221825f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer2 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND FEAT_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L2_TEX FEAT_L0_tex
#define TEX_BIND_L2_POS FEAT_L0_pos
#define TEX_BIND_L2_SIZE FEAT_L0_size
#define TEX_BIND_L2_PT FEAT_L0_pt

const float kernels[288] = float[288](
  +0.3246680f, -0.4330482f, -0.1497334f, -0.0717803f, +0.0797832f, +0.0864059f, +0.0700243f, -0.0615878f,
  +0.1432975f, -0.0266432f, -0.0452278f, +0.0663435f, +0.1481715f, -0.3084791f, +0.3219845f, +0.3096054f,
  +0.1741193f, +0.3417157f, -0.1428968f, -0.2725313f, -0.0100170f, +0.0504347f, +0.4700411f, +0.0600495f,
  +0.0727523f, +0.1668120f, -0.2704808f, -0.0764544f, -0.2962228f, +0.0896115f, +0.2706893f, -0.2578986f,
  +0.2465928f, -0.1473684f, -0.0636158f, -0.2012870f, +0.1873410f, -0.3085799f, +0.2308772f, +0.4086711f,
  +0.3018960f, +0.0839262f, -0.0562998f, -0.0818547f, +0.0252544f, +0.1356035f, +0.2842375f, +0.3403648f,
  +0.0317252f, +0.1807021f, -0.0613781f, +0.1271557f, +0.0063518f, +0.1720787f, +0.1410306f, +0.3396986f,
  -0.4649706f, -0.1776981f, -0.2732348f, -0.0347950f, -0.1460972f, +0.0054148f, +0.2882689f, +0.0331998f,
  -0.0810414f, -0.2746630f, -0.1675919f, -0.0028796f, +0.1250285f, -0.0716599f, +0.1170232f, -0.0855401f,
  -0.0131494f, +0.1318123f, -0.3246531f, +0.1816577f, +0.2030278f, -0.1355244f, +0.1063844f, +0.0910831f,
  +0.0204043f, +0.0760568f, +0.0181986f, -0.2584282f, +0.0061577f, -0.0317930f, -0.0579487f, -0.1487632f,
  -0.0556125f, +0.1261060f, +0.3486459f, -0.0689074f, +0.1252182f, -0.0701544f, -0.0910795f, +0.1205705f,
  +0.0660885f, -0.0867075f, +0.1310805f, -0.0930114f, -0.0970723f, -0.1665410f, -0.0833472f, +0.0565501f,
  +0.0656734f, -0.1009847f, +0.0457689f, +0.0686845f, -0.2693368f, +0.0131185f, -0.0421832f, +0.3080471f,
  -0.1597372f, +0.1509478f, +0.1636416f, +0.1495160f, -0.2317518f, +0.2691531f, +0.1189321f, +0.0509748f,
  -0.1936597f, +0.0804561f, +0.0225295f, +0.0146901f, -0.0774838f, -0.1099273f, +0.1149398f, -0.1043316f,
  +0.0611680f, +0.0839870f, +0.0764092f, -0.2882420f, +0.1913235f, -0.0434876f, -0.1015661f, +0.1760411f,
  +0.0082516f, -0.2357365f, -0.0988826f, -0.0902914f, -0.1831919f, +0.0183656f, -0.0440037f, -0.0026588f,
  -0.2109806f, +0.2344800f, +0.0527216f, -0.1765424f, +0.3720178f, +0.2207099f, -0.2185834f, -0.3468544f,
  -0.0560342f, +0.2409910f, +0.1133878f, -0.0652312f, -0.2256108f, -0.1785321f, -0.1000736f, +0.0833081f,
  -0.0458947f, +0.0878544f, +0.0333768f, +0.1491530f, +0.0547544f, -0.0657236f, +0.2001375f, +0.0651285f,
  +0.1008629f, +0.0972544f, +0.0150529f, +0.2461920f, +0.2823359f, -0.1105668f, +0.1173618f, +0.0891861f,
  -0.2352851f, -0.0982485f, -0.2936054f, -0.0915171f, -0.0977809f, -0.0512121f, -0.0251262f, +0.0906423f,
  +0.0670289f, +0.0312497f, +0.2291221f, +0.0928588f, +0.1019650f, -0.2604213f, -0.1856830f, -0.0972087f,
  -0.0492534f, -0.0800323f, -0.1034008f, -0.0120890f, -0.1368999f, -0.0083056f, +0.0840547f, -0.3019075f,
  -0.0779093f, +0.1635224f, +0.0961950f, -0.1380389f, +0.0714642f, +0.0349543f, +0.0099206f, -0.0653260f,
  -0.1321874f, -0.1502594f, +0.0333666f, -0.0398525f, +0.1501724f, -0.2325660f, +0.0438390f, -0.0162656f,
  +0.0804488f, -0.0155247f, -0.1912149f, +0.1812410f, -0.0351259f, -0.3206991f, +0.0209563f, -0.2995723f,
  -0.0879604f, -0.0161693f, +0.1636722f, -0.1477474f, -0.0036788f, -0.0112158f, -0.2037816f, -0.0430466f,
  -0.1893340f, +0.0313940f, +0.2515807f, +0.0899499f, +0.1015387f, +0.0398985f, +0.0368116f, +0.0377522f,
  -0.0284910f, -0.0900610f, -0.0525738f, -0.0414680f, +0.2527077f, +0.1140078f, -0.0676846f, -0.0677879f,
  +0.0544674f, -0.4679472f, -0.1262074f, -0.1035736f, +0.0291302f, +0.1540550f, -0.1595749f, +0.0462375f,
  -0.1999803f, +0.0582600f, -0.1166226f, -0.0605381f, +0.0650730f, +0.0924236f, -0.0128209f, -0.2666356f,
  +0.3926656f, -0.2215984f, -0.0499340f, -0.1378366f, -0.0115084f, -0.2049588f, +0.1090105f, +0.0417128f,
  -0.0277384f, +0.1204396f, +0.0907585f, +0.2321973f, -0.0395361f, +0.0061736f, +0.0262520f, -0.0000208f,
  -0.0255729f, +0.1151737f, +0.0014768f, -0.1387794f, +0.1152003f, -0.2397239f, +0.0118763f, -0.0096553f
);

const float biases[4] = float[4](
  +0.0082331f, +0.0380103f, +0.0962612f, -0.0840790f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer2 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND FEAT_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L2_TEX FEAT_L1_tex
#define TEX_BIND_L2_POS FEAT_L1_pos
#define TEX_BIND_L2_SIZE FEAT_L1_size
#define TEX_BIND_L2_PT FEAT_L1_pt

const float kernels[288] = float[288](
  +0.1089636f, -0.0166366f, -0.1440780f, +0.1197662f, +0.2509786f, +0.0188462f, +0.1257295f, +0.0922469f,
  +0.2136395f, -0.0977249f, -0.1164493f, +0.0275611f, +0.2498494f, -0.0262572f, +0.0667919f, +0.0763661f,
  +0.1118044f, +0.0407867f, -0.0138703f, -0.0172245f, -0.1034430f, -0.0600929f, +0.1732515f, +0.1233796f,
  +0.0768274f, -0.0351205f, +0.2941228f, +0.0210076f, -0.2866764f, +0.0842449f, +0.1355487f, -0.0575380f,
  +0.0560146f, +0.1136804f, +0.1300724f, -0.2638873f, -0.0890682f, -0.1110388f, -0.1178574f, -0.2254383f,
  +0.2767628f, +0.0952360f, -0.0540661f, -0.0283811f, +0.1420179f, +0.0228797f, +0.1840228f, -0.0049565f,
  -0.2144330f, -0.0981380f, -0.4148985f, -0.1064768f, -0.1190481f, -0.0563108f, +0.0911642f, +0.1317772f,
  +0.0547061f, -0.0058824f, -0.3244666f, +0.0257268f, -0.3147567f, -0.0232108f, -0.0823352f, +0.0113637f,
  +0.0499245f, +0.1687703f, -0.0578976f, +0.2306453f, +0.0991700f, +0.3004014f, +0.0488294f, +0.2210916f,
  -0.0482253f, -0.0004244f, -0.0304170f, +0.1207268f, -0.2244360f, +0.1292721f, +0.1352397f, +0.0832150f,
  +0.0661279f, -0.1029897f, -0.0994677f, -0.1349969f, -0.0828241f, +0.0143223f, +0.0954433f, -0.0253513f,
  -0.1228030f, -0.0978276f, -0.0997209f, -0.1811409f, +0.3276658f, +0.1299217f, +0.1751291f, +0.0409652f,
  +0.0653783f, -0.1694014f, -0.4648843f, +0.1184463f, -0.0629520f, +0.1039012f, +0.5128747f, +0.0134084f,
  +0.0663587f, -0.0608482f, -0.0700156f, -0.1747292f, +0.0953108f, -0.1014287f, +0.1743845f, -0.0657547f,
  +0.0042071f, +0.3626856f, -0.2688339f, +0.0897736f, +0.2009152f, +0.1057328f, +0.1569986f, +0.0108806f,
  +0.1356459f, +0.1789654f, -0.3032290f, +0.0046426f, -0.0144189f, +0.0698819f, -0.0507372f, -0.2617021f,
  -0.0399283f, +0.1561856f, -0.0178943f, +0.0958458f, -0.0069578f, -0.3660768f, +0.0527537f, +0.1132044f,
  -0.0120534f, +0.0808768f, -0.1330270f, +0.1693524f, +0.0275048f, +0.2178327f, +0.2475094f, +0.1090641f,
  -0.0047339f, +0.0250846f, +0.0639593f, +0.0741913f, +0.2152209f, -0.1526076f, +0.0718934f, -0.1804613f,
  +0.0571070f, -0.1330036f, +0.0775194f, +0.0882741f, +0.0336697f, +0.0055181f, -0.1299837f, -0.2987411f,
  +0.1146530f, -0.0261104f, -0.2397125f, -0.0296109f, +0.0167190f, +0.0625663f, +0.0987078f, +0.4138569f,
  -0.1993177f, -0.2991182f, +0.1268162f, -0.0841258f, -0.2185222f, +0.0697693f, -0.0351494f, -0.2055949f,
  +0.1135083f, +0.2096846f, +0.1085095f, +0.2032188f, -0.0248022f, +0.0028439f, +0.0206574f, +0.1161099f,
  +0.0908866f, +0.1073468f, -0.0649507f, -0.1454146f, -0.3178610f, -0.1910708f, -0.0597937f, +0.1040540f,
  -0.2395730f, -0.3960627f, -0.1859490f, +0.0810659f, -0.2128497f, -0.0879972f, +0.1509352f, +0.1701488f,
  -0.1093859f, -0.2471723f, +0.1604669f, -0.1047967f, +0.1438992f, -0.0048869f, -0.1458437f, -0.1180553f,
  -0.3215861f, +0.0591564f, -0.0886396f, +0.1213093f, -0.0001569f, +0.0773849f, -0.0781695f, -0.1312067f,
  +0.2695848f, +0.2418508f, -0.0597927f, -0.1057792f, -0.0632822f, +0.0360510f, -0.0458580f, -0.0538596f,
  -0.2288379f, +0.0803587f, +0.2202116f, +0.0844541f, -0.1472843f, -0.0550269f, -0.2387501f, +0.1435177f,
  +0.0231062f, -0.0869498f, +0.0366117f, +0.0631967f, -0.1506991f, +0.1607980f, -0.1328047f, -0.2507196f,
  +0.1382383f, +0.2954732f, +0.0828345f, +0.1829103f, +0.1947375f, -0.0490674f, -0.1176405f, +0.0211226f,
  -0.1265828f, -0.1876701f, +0.0535876f, -0.2107611f, -0.1978420f, +0.1384108f, -0.2008466f, +0.1142695f,
  -0.3645025f, +0.0338077f, +0.0546060f, -0.0433738f, -0.1402470f, -0.1163986f, -0.1910683f, -0.3759681f,
  +0.2127938f, +0.2542035f, -0.0068013f, +0.0403881f, -0.1160361f, -0.1384872f, -0.0573545f, -0.0400947f,
  +0.2187480f, -0.2952910f, +0.0221302f, -0.1550885f, -0.3057577f, +0.0992191f, +0.0934804f, -0.1767898f,
  -0.0798855f, +0.0972253f, +0.1786789f, -0.1583787f, -0.0346431f, -0.2904846f, +0.1425698f, -0.2037223f
);

const float biases[4] = float[4](
  -0.0490665f, +0.0831673f, +0.0430334f, -0.0457082f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer3 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2327400f, +0.1679307f, +0.1309296f, +0.1036542f, -0.0605897f, -0.2290727f, -0.0026488f, -0.1644417f,
  -0.1968518f, -0.0595959f, +0.1148821f, -0.3239691f, +0.1532443f, -0.0192263f, +0.2279278f, +0.0387535f,
  +0.0190172f, +0.0888244f, -0.2703270f, +0.2536090f, +0.4151342f, -0.0166377f, +0.0952162f, -0.0768265f,
  +0.1852382f, +0.3012777f, -0.2248198f, -0.2913571f, -0.0011152f, -0.1662574f, +0.1304093f, +0.0001776f,
  -0.0326679f, -0.3387719f, +0.3324492f, +0.2621264f, -0.1123206f, +0.2044940f, +0.1559066f, +0.0293057f,
  -0.1064265f, -0.0993837f, -0.1392653f, +0.1192271f, +0.0980206f, -0.0401205f, -0.2012751f, -0.1731247f,
  +0.0040803f, -0.5359344f, -0.0020524f, +0.0997213f, -0.0085175f, +0.0284980f, -0.4276694f, +0.0425237f,
  -0.3931696f, -0.1377124f, +0.5191722f, +0.5756153f, +0.0330455f, -0.1362059f, +0.4770863f, +0.0702064f,
  +0.0854235f, -0.2442110f, -0.0686827f, -0.0422662f, -0.0453188f, -0.1251335f, -0.1071751f, +0.2720810f,
  +0.0095836f, +0.2110990f, -0.0014242f, -0.0759794f, +0.0225913f, -0.0272418f, -0.0194932f, -0.3023100f,
  +0.0065610f, +0.2093840f, -0.1325597f, -0.0306549f, +0.0639160f, +0.0311099f, +0.0937720f, -0.1224280f,
  -0.0262357f, -0.0759095f, -0.0741892f, +0.0404593f, -0.0578248f, -0.0226036f, -0.0167401f, -0.0889631f,
  -0.0126497f, +0.1376384f, -0.2884197f, +0.2768914f, +0.0777768f, +0.0013716f, +0.1394977f, +0.3012522f,
  -0.1076667f, -0.1561644f, -0.1734770f, -0.1451936f, -0.0808006f, -0.0008289f, -0.0486953f, +0.0956652f,
  +0.1951049f, -0.2679811f, +0.1182339f, -0.0244352f, +0.0237190f, -0.3592527f, -0.1001234f, -0.3236807f,
  +0.0337221f, -0.1319636f, -0.3249379f, +0.1629933f, +0.0698760f, -0.0901636f, +0.5510313f, +0.0881276f,
  -0.0431806f, +0.4261244f, -0.2874433f, -0.1219332f, +0.0735209f, -0.1303831f, -0.0498786f, -0.0803804f,
  -0.1906044f, -0.0870720f, -0.2945475f, +0.1613255f, -0.1702228f, -0.0242819f, +0.1124560f, -0.1123149f,
  -0.0398861f, +0.0967410f, -0.0369420f, +0.1622986f, -0.0276368f, -0.0058056f, +0.2051598f, +0.2929663f,
  -0.0548205f, -0.0636761f, -0.3086199f, -0.0622260f, +0.0202742f, +0.0675662f, -0.0993238f, -0.0636117f,
  +0.0825229f, -0.0846437f, -0.0013782f, -0.1404110f, +0.0293719f, -0.1044249f, -0.1376432f, -0.0709353f,
  +0.0533632f, -0.2656174f, -0.1308853f, +0.1898806f, -0.1486354f, +0.2390706f, -0.2262329f, +0.0394342f,
  +0.1989906f, +0.0436056f, +0.0117170f, -0.0770658f, +0.1014096f, +0.0584312f, -0.2138163f, +0.0081720f,
  -0.3000432f, -0.4732479f, +0.2458969f, +0.1604069f, +0.1319887f, +0.3475453f, -0.1218323f, -0.1927844f,
  +0.1276673f, +0.1767050f, -0.3473199f, -0.0522196f, -0.0678085f, -0.0655135f, -0.1222401f, -0.1523364f,
  -0.0532043f, +0.0125843f, -0.3565927f, +0.0582298f, -0.1406720f, +0.4210011f, -0.0221107f, -0.0114825f,
  +0.1265723f, +0.0987435f, -0.3520693f, -0.1219027f, -0.1965379f, +0.1186832f, +0.0415556f, +0.3028716f,
  +0.0717467f, +0.0581336f, +0.0974377f, -0.1256011f, +0.0816384f, -0.0709120f, -0.0823126f, +0.0875461f,
  -0.2257827f, -0.2291187f, -0.0796816f, +0.2818273f, +0.1139251f, +0.2681933f, -0.0374421f, +0.2520961f,
  -0.0730651f, +0.0551067f, +0.1844228f, -0.0518080f, +0.1134514f, +0.0295878f, -0.0946389f, +0.0817223f,
  -0.3790738f, -0.0395969f, -0.0517984f, -0.0653164f, +0.0778384f, +0.0426607f, -0.0253693f, -0.1582682f,
  +0.2518712f, -0.0053463f, +0.0280557f, +0.1774042f, -0.0372449f, -0.0816434f, -0.1274988f, +0.1137528f,
  -0.0662747f, +0.3274017f, +0.0746254f, +0.1343293f, -0.0615071f, -0.0169778f, +0.0585865f, +0.4599947f,
  +0.0793017f, +0.1707833f, -0.1587939f, +0.0206940f, +0.1157579f, +0.0249539f, +0.2094339f, +0.0078549f,
  -0.3063409f, +0.2870263f, -0.0298703f, -0.0632539f, -0.0517293f, -0.0459330f, +0.1665714f, +0.2119536f,
  -0.2390550f, +0.0516067f, -0.0958000f, -0.1867160f, -0.2527868f, -0.0861677f, -0.2058751f, +0.3680734f
);

const float biases[4] = float[4](
  -0.0439127f, +0.0021326f, +0.0706755f, -0.0429360f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer3 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0597385f, +0.3210375f, -0.0851926f, +0.1703428f, +0.1278585f, -0.1402463f, -0.0147314f, -0.0393331f,
  -0.0530914f, -0.0421282f, -0.1460075f, +0.1211578f, -0.3186789f, +0.3334464f, +0.0226359f, +0.0867072f,
  +0.1173991f, +0.1850247f, +0.0723592f, -0.2655767f, +0.2945903f, -0.0999291f, -0.1963472f, +0.0755005f,
  -0.1153964f, +0.0633461f, +0.2748142f, -0.2205403f, +0.1544354f, -0.1927627f, +0.1063850f, -0.1080873f,
  +0.0983211f, -0.0118578f, -0.1888597f, +0.1319793f, +0.0457366f, +0.0860520f, +0.1761249f, -0.0997928f,
  +0.1659338f, +0.0997185f, -0.2171608f, -0.2955658f, +0.1511054f, -0.0653255f, +0.1388487f, -0.1440240f,
  -0.1420409f, -0.0241847f, -0.1240156f, -0.0563096f, +0.0078140f, -0.0145445f, -0.2492635f, -0.0324714f,
  +0.2051367f, +0.1392671f, -0.0221208f, +0.0098345f, -0.0411848f, +0.0256387f, -0.0220830f, +0.1946154f,
  +0.0612371f, +0.0603687f, +0.1331146f, -0.3290549f, +0.1234304f, -0.0716911f, -0.0853607f, -0.2489549f,
  +0.0920646f, -0.1760845f, -0.1569220f, -0.0789498f, -0.0482763f, +0.1154328f, +0.0950069f, +0.1128835f,
  -0.0932131f, +0.0146065f, +0.0907771f, -0.0438498f, +0.0983732f, +0.0008197f, -0.0738832f, -0.5504982f,
  -0.0924273f, -0.0572457f, +0.2134665f, +0.0401425f, -0.1922041f, -0.0447481f, -0.1389234f, -0.0109376f,
  -0.0130017f, +0.0698279f, -0.1516581f, +0.0215726f, -0.1459266f, +0.0360965f, -0.3242944f, -0.0961270f,
  -0.0619868f, +0.1416648f, +0.3318810f, -0.2564272f, -0.2386310f, +0.0636129f, -0.1710420f, +0.2812591f,
  +0.3109767f, +0.0696333f, -0.2826401f, -0.0658191f, +0.1733935f, -0.1337833f, -0.0227460f, +0.0873769f,
  +0.1084491f, +0.1419952f, -0.1129893f, +0.0411281f, +0.0710436f, -0.1357929f, +0.0275661f, -0.0825291f,
  -0.2006761f, -0.0717856f, +0.0001029f, +0.2058052f, -0.1096644f, -0.2524250f, -0.1197136f, -0.2772316f,
  +0.0290089f, -0.0749253f, -0.1966476f, +0.1421097f, +0.0416939f, -0.0482699f, +0.1349815f, +0.0003564f,
  +0.1475497f, -0.0141448f, -0.3491635f, +0.0024507f, -0.1753329f, -0.0867865f, +0.0126535f, +0.0517968f,
  -0.2649610f, +0.0006407f, -0.2683876f, -0.0854932f, -0.0737812f, -0.2820439f, +0.0533532f, +0.1414548f,
  +0.2310309f, -0.2567399f, +0.1122028f, -0.0258966f, +0.1490278f, +0.0791170f, -0.0810919f, +0.2108464f,
  +0.1167659f, +0.1139084f, +0.0932208f, -0.3093497f, -0.1351191f, +0.0190052f, +0.2404890f, +0.2871384f,
  +0.0429308f, -0.0468669f, -0.1031185f, -0.0395766f, -0.0358666f, -0.1395835f, +0.1085834f, +0.3804953f,
  -0.0461900f, -0.0829081f, -0.3558334f, -0.0057113f, +0.0610985f, -0.2076909f, +0.2119979f, -0.0173795f,
  -0.1893914f, -0.1448749f, +0.0760753f, -0.0265226f, +0.0810652f, +0.0192372f, +0.1038397f, -0.1969184f,
  -0.0882041f, -0.0985612f, +0.2757359f, +0.0669520f, -0.0752821f, -0.0663930f, +0.1595609f, +0.2465753f,
  -0.0398054f, +0.1138381f, +0.0059003f, +0.0123671f, -0.0937933f, -0.1027356f, -0.4551383f, +0.0813940f,
  -0.3173095f, +0.0299545f, +0.4097385f, +0.1735006f, +0.1976701f, +0.2904610f, -0.2476224f, -0.3962168f,
  +0.1241131f, -0.0367963f, +0.2594258f, -0.0703906f, +0.0400491f, +0.1162201f, -0.1789323f, +0.0308539f,
  -0.0343969f, -0.0691530f, +0.0504636f, +0.1636514f, -0.0552050f, +0.0389145f, -0.0148476f, +0.2040215f,
  +0.1568869f, +0.3223138f, -0.4142892f, +0.1954312f, -0.2051041f, +0.0594936f, -0.2781083f, -0.0063568f,
  -0.0125402f, +0.0048144f, +0.1525762f, +0.1477785f, -0.2324818f, +0.0469996f, +0.0342715f, +0.0208783f,
  -0.0068238f, +0.0140929f, -0.0640315f, +0.2444918f, -0.0166747f, -0.0309129f, -0.3782066f, -0.0572469f,
  -0.0920664f, -0.2092647f, -0.3031622f, -0.1740044f, -0.0536773f, -0.0365144f, -0.1135115f, -0.1440589f,
  -0.3096282f, +0.0617810f, +0.2146255f, +0.0119020f, -0.4117091f, -0.2177868f, -0.0971972f, +0.1556032f,
  -0.3148131f, -0.1269601f, +0.0315105f, +0.2442181f, -0.2224400f, +0.1006527f, -0.1027227f, +0.0403415f
);

const float biases[4] = float[4](
  +0.0327193f, +0.0364101f, +0.0406128f, -0.0696028f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer4 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.3092692f, -0.0088996f, +0.0047236f, -0.0910447f, -0.0881001f, -0.2680343f, +0.0984593f, +0.0523922f,
  +0.0557235f, -0.0972701f, -0.0622914f, +0.1193797f, -0.0745549f, +0.0207891f, -0.1752457f, -0.4006968f,
  +0.0358064f, -0.1504517f, -0.2688062f, -0.1042476f, +0.0434777f, +0.0717072f, +0.1442026f, -0.3718067f,
  +0.0928385f, -0.0105488f, +0.0025928f, +0.1199535f, -0.1894550f, +0.0298403f, -0.0342035f, +0.2273899f,
  +0.0978553f, +0.1462550f, -0.3886399f, -0.2112131f, -0.2564059f, -0.1975223f, -0.0207023f, +0.0093839f,
  -0.0403529f, -0.1631205f, -0.0750164f, -0.1150182f, -0.0530665f, -0.0071976f, -0.2112297f, -0.1897113f,
  -0.0289363f, -0.1166266f, +0.1120156f, +0.3426909f, +0.2045624f, -0.0862980f, +0.1384237f, +0.0045193f,
  +0.1670621f, -0.2899036f, -0.0862552f, +0.0090490f, +0.0712913f, -0.2135062f, +0.0249308f, -0.1017448f,
  +0.0723183f, -0.0881988f, +0.0807433f, +0.1691829f, -0.1031943f, +0.0452177f, +0.0273258f, -0.1221033f,
  +0.2644484f, -0.0601515f, -0.1485636f, +0.0721444f, +0.2139411f, -0.0069183f, +0.0848831f, +0.1902092f,
  +0.0943895f, +0.3513449f, +0.0453959f, +0.0684417f, -0.0547511f, -0.0237649f, +0.0103531f, +0.0234960f,
  +0.2859463f, -0.0730610f, -0.0695390f, -0.0113739f, -0.0702646f, +0.0403367f, +0.1520550f, -0.0556371f,
  +0.0733564f, -0.1002341f, -0.0982305f, -0.1560410f, +0.1910877f, -0.0066827f, -0.1818873f, +0.0209299f,
  +0.1187255f, -0.2627551f, +0.0554841f, -0.1038893f, +0.0955088f, +0.1279412f, +0.2025442f, -0.1555799f,
  +0.3824213f, +0.1159972f, -0.0368663f, +0.0979876f, -0.2540591f, -0.0744711f, +0.0747342f, -0.1528798f,
  +0.0369961f, -0.0324092f, -0.1830798f, -0.2640710f, -0.0835337f, -0.1189951f, -0.0425319f, -0.1328591f,
  +0.2504871f, +0.1054230f, +0.0396074f, +0.0935009f, -0.0299875f, +0.1055022f, +0.0343128f, +0.0494321f,
  -0.0097988f, +0.0074280f, +0.1674266f, -0.0848581f, +0.1806211f, -0.0292439f, -0.0457554f, -0.0583754f,
  -0.1185130f, -0.2220084f, +0.0209460f, +0.3471001f, +0.0232889f, -0.1388437f, -0.0544978f, +0.1048104f,
  -0.3627142f, +0.0144389f, +0.3200976f, -0.2399318f, -0.1129404f, +0.1137079f, -0.2859031f, -0.1129780f,
  -0.0788717f, +0.0995719f, +0.0036077f, -0.0428104f, +0.1463944f, -0.1391868f, +0.2369941f, +0.3737702f,
  -0.0789928f, +0.0414816f, +0.2330126f, -0.0939581f, -0.0176115f, +0.1310336f, +0.0513913f, -0.0666655f,
  -0.4542791f, +0.4090234f, -0.0725882f, -0.4216033f, +0.1781522f, +0.0298449f, +0.3389337f, +0.0619693f,
  -0.1911730f, +0.3962650f, -0.0562483f, +0.1226042f, +0.1444018f, -0.2650261f, +0.0074597f, +0.0974139f,
  -0.0151641f, +0.0224637f, +0.0785778f, -0.0250429f, -0.2380051f, -0.1602113f, +0.1555420f, -0.0414748f,
  -0.1509432f, +0.4412424f, +0.1652877f, -0.0688198f, -0.2969598f, +0.0914082f, -0.1010324f, -0.0968569f,
  -0.0691548f, -0.0614744f, +0.1266764f, -0.0764441f, +0.0496567f, -0.1598707f, -0.3212382f, -0.0313029f,
  -0.0075389f, -0.1150597f, -0.1777371f, -0.1471917f, -0.0337219f, +0.0828649f, -0.3291631f, -0.0736562f,
  -0.2092979f, -0.1479329f, +0.1117908f, -0.0934315f, +0.0303953f, +0.0743610f, +0.0325786f, +0.1875627f,
  -0.0229166f, +0.0418039f, +0.0273940f, -0.1525241f, -0.1455196f, -0.0991672f, -0.0387929f, -0.0383252f,
  -0.1537960f, +0.2763232f, -0.3119254f, -0.1439400f, +0.3668874f, -0.0416347f, +0.0455123f, -0.1277865f,
  -0.1448567f, -0.0238170f, -0.1411109f, +0.0234113f, +0.0810880f, -0.1837212f, -0.1851612f, -0.0896929f,
  +0.0118430f, -0.2381920f, -0.0540568f, -0.0390726f, +0.0425713f, +0.0943791f, -0.0494770f, +0.0335449f,
  -0.0271612f, -0.0953119f, -0.1014458f, -0.1166774f, +0.3575578f, -0.2411402f, -0.0137227f, +0.1001340f,
  +0.0202682f, +0.0459653f, -0.1626227f, +0.0279336f, -0.1540699f, +0.1424083f, +0.2614219f, +0.0023511f,
  -0.0048677f, +0.1523376f, -0.1408244f, -0.0898942f, -0.0451765f, -0.1399903f, -0.0477440f, -0.1668408f
);

const float biases[4] = float[4](
  -0.0085199f, +0.0111378f, +0.1179416f, -0.0312776f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer4 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.4132478f, -0.0142230f, -0.1066216f, +0.1146863f, -0.0194358f, -0.2020156f, +0.1699476f, +0.0777503f,
  -0.1040653f, +0.1845345f, -0.0001036f, -0.1569580f, -0.2501079f, +0.0608002f, -0.0627790f, -0.3212592f,
  -0.0366520f, -0.1683429f, -0.0935246f, -0.0795920f, -0.1053453f, -0.0905343f, +0.1628154f, +0.0588489f,
  +0.2868217f, -0.1146622f, -0.0524651f, +0.0158487f, -0.0327870f, -0.0296473f, +0.4107090f, +0.0744701f,
  -0.5154766f, +0.0209286f, -0.2019525f, -0.0509320f, +0.0103081f, -0.0712404f, -0.4146626f, -0.0476491f,
  -0.0554583f, -0.0139733f, -0.1545692f, -0.2502628f, +0.0520386f, -0.2312787f, +0.1864440f, +0.1066814f,
  -0.1712949f, +0.1074283f, +0.2077785f, +0.1262337f, +0.1873726f, +0.1803499f, +0.1347627f, -0.1507821f,
  -0.3859005f, +0.1338617f, +0.1032866f, +0.0465804f, -0.2850125f, +0.2940779f, -0.3042304f, -0.0723042f,
  -0.0762113f, -0.0804262f, -0.2148154f, +0.0737146f, -0.1868732f, -0.2893395f, +0.3128969f, -0.1191054f,
  +0.3391450f, +0.2048328f, -0.0085782f, +0.1567184f, +0.1362456f, +0.0229987f, +0.1609833f, +0.1164392f,
  +0.3774487f, -0.0998050f, -0.1416587f, +0.2747660f, -0.0173001f, +0.1202326f, +0.1471814f, +0.1419552f,
  +0.1137643f, -0.1591538f, -0.0374487f, +0.0099866f, +0.2453451f, +0.0995976f, +0.2961151f, -0.1176175f,
  +0.2484017f, +0.2847620f, -0.3520661f, -0.0206507f, -0.2850795f, +0.0695914f, -0.0508074f, +0.0023626f,
  +0.1494056f, -0.1997610f, +0.0583957f, +0.2292107f, -0.1473933f, +0.3133005f, -0.3786487f, +0.1338289f,
  +0.2400760f, +0.2131614f, -0.2143832f, +0.2748483f, -0.1332411f, -0.1584830f, +0.0490219f, +0.1323870f,
  -0.0321977f, -0.0970709f, -0.1014050f, -0.2233703f, -0.1032868f, -0.1006488f, +0.1913151f, -0.0997211f,
  -0.0016446f, -0.0121510f, -0.0815971f, -0.0857993f, -0.0584960f, -0.1073293f, +0.0544457f, -0.1863376f,
  +0.2340559f, +0.1584002f, +0.2824927f, +0.3104712f, +0.0304170f, +0.0995069f, +0.2448814f, +0.1029712f,
  -0.0612633f, +0.1662217f, -0.0956331f, +0.4445521f, -0.0218521f, +0.2190713f, +0.2092355f, -0.2366895f,
  -0.1204483f, -0.0197171f, +0.1437354f, -0.0562875f, +0.0151913f, -0.2125784f, -0.1125833f, -0.1725738f,
  -0.0542159f, -0.2691631f, +0.0604104f, +0.0784354f, +0.1175616f, -0.0676291f, -0.0344012f, +0.0421584f,
  -0.1625908f, -0.0487114f, +0.0153405f, -0.2373561f, +0.2158205f, +0.2354377f, +0.3587079f, -0.0213495f,
  -0.2471744f, +0.0625686f, +0.3869894f, +0.2351003f, -0.0768835f, +0.1285015f, -0.0815986f, +0.0427746f,
  -0.2331276f, -0.0329410f, +0.1012961f, +0.0043554f, -0.2973520f, +0.2279841f, +0.0477457f, +0.0727746f,
  -0.1278203f, +0.1532975f, +0.2069383f, +0.0444093f, -0.0500024f, +0.0353938f, -0.0713118f, -0.0886303f,
  -0.0562531f, +0.1913548f, -0.0673302f, +0.0523963f, -0.2688141f, +0.1545444f, -0.0461206f, +0.1453371f,
  -0.0042480f, +0.0539595f, -0.2263470f, -0.0098022f, -0.2321143f, -0.2771546f, +0.0246158f, -0.1270297f,
  -0.1766619f, -0.0853190f, -0.1144934f, -0.4276806f, +0.0538545f, -0.0106554f, +0.0066973f, -0.2516979f,
  -0.3060562f, +0.1387337f, -0.2339095f, -0.1185906f, +0.0716599f, -0.0098367f, +0.1836061f, -0.2697963f,
  -0.0327306f, -0.0156254f, -0.0272910f, +0.3096663f, +0.0449267f, -0.0439219f, -0.1470078f, -0.0236581f,
  -0.0112759f, -0.2358535f, +0.0553732f, -0.0059018f, +0.3029204f, +0.2384191f, -0.1863327f, -0.2439501f,
  -0.4341906f, +0.1999071f, +0.1432753f, +0.1417024f, +0.0855430f, +0.1972229f, -0.1923178f, -0.2747094f,
  -0.2945929f, -0.2477717f, +0.1641884f, -0.0690131f, +0.1865863f, +0.2018882f, -0.3722114f, +0.0707504f,
  -0.0579877f, +0.1285402f, -0.2052392f, +0.4111966f, -0.1553049f, -0.1184728f, +0.0966962f, +0.1642329f,
  -0.3216389f, +0.2294144f, +0.1543645f, -0.0222625f, +0.2068100f, +0.1504280f, -0.1176060f, +0.0038029f,
  -0.1585428f, +0.1290378f, +0.0006986f, -0.0935803f, +0.0164981f, +0.0047660f, +0.0274087f, -0.0893916f
);

const float biases[4] = float[4](
  -0.0447459f, +0.0404579f, +0.0343119f, -0.0566073f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer5 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.3134154f, +0.3686752f, -0.2029723f, -0.0605343f, -0.0570267f, -0.2118102f, -0.0073991f, +0.1386956f,
  +0.0584874f, +0.0773386f, +0.0949700f, -0.0625561f, -0.1771344f, -0.2891051f, +0.1084539f, +0.1205806f,
  +0.1188680f, -0.0603440f, -0.3461060f, -0.2053351f, -0.1615940f, -0.2651123f, +0.0067050f, +0.0186977f,
  -0.1520887f, +0.1122312f, +0.1128024f, +0.0286390f, +0.2709489f, -0.0831356f, -0.1780316f, -0.2441376f,
  -0.0532734f, +0.2370994f, -0.1595122f, -0.1725143f, -0.1777746f, -0.0376975f, +0.0115878f, +0.0420786f,
  -0.1957481f, -0.1515275f, -0.0396188f, +0.1791448f, +0.0663275f, +0.4160451f, +0.1450514f, -0.0564286f,
  -0.1408204f, -0.0039448f, -0.0598392f, -0.0194721f, +0.1333204f, -0.1225225f, -0.1846724f, -0.0832371f,
  -0.0789912f, +0.2733955f, -0.0691768f, -0.0142218f, -0.0556175f, -0.0716350f, +0.0124826f, -0.2206751f,
  -0.0781341f, -0.0694835f, -0.2596312f, +0.0508269f, -0.1027430f, -0.0001139f, +0.3069232f, +0.0108731f,
  +0.0151996f, +0.4221676f, +0.2983436f, -0.2142491f, +0.1446237f, -0.3277331f, -0.1725168f, -0.0091382f,
  +0.0548122f, +0.0147969f, +0.3101162f, +0.1713139f, +0.0479500f, -0.0391582f, +0.0898221f, +0.0234637f,
  -0.1946222f, +0.1979100f, +0.1273705f, -0.2512289f, -0.0570423f, +0.2042726f, +0.1405545f, -0.0602024f,
  -0.2279665f, -0.1550535f, -0.1173382f, -0.0295506f, +0.0817847f, -0.1879371f, +0.1113403f, +0.1014771f,
  +0.2040666f, +0.3675786f, -0.2767323f, -0.3377548f, +0.0252173f, -0.0904105f, +0.2580257f, -0.1547736f,
  +0.0907208f, -0.0318829f, +0.7342445f, -0.1597047f, -0.2348772f, +0.2108395f, -0.2343207f, +0.2530275f,
  +0.1498729f, -0.1470326f, -0.0098228f, +0.0693029f, -0.0674795f, -0.0335340f, -0.0740254f, +0.0602434f,
  -0.0239347f, -0.0889007f, -0.0176129f, +0.2338690f, -0.2905613f, -0.0430688f, +0.2500162f, +0.2434897f,
  -0.0952240f, -0.1502161f, +0.2518993f, -0.1592383f, +0.1701737f, -0.0170282f, +0.4271388f, +0.1702587f,
  -0.4354756f, +0.4305609f, +0.2013939f, +0.0120032f, -0.1542321f, +0.0083133f, -0.2323684f, -0.1649712f,
  -0.1174534f, +0.3647371f, -0.1407278f, +0.1164921f, -0.1289602f, +0.3189659f, +0.0864107f, +0.0974940f,
  -0.0912475f, -0.0296118f, -0.0574993f, +0.0946686f, +0.1766858f, +0.0179947f, -0.1425407f, +0.0802703f,
  -0.0518239f, +0.0891877f, -0.1849901f, +0.3194352f, -0.1787547f, -0.1452830f, -0.1189884f, +0.0494316f,
  +0.2296423f, +0.1233491f, -0.0951845f, -0.0185674f, +0.5308493f, +0.1620294f, -0.1286857f, +0.3007516f,
  -0.0143829f, -0.0492628f, -0.2688438f, +0.1387150f, -0.2048192f, -0.1872347f, +0.2482649f, -0.0742561f,
  -0.1769830f, -0.5345902f, +0.1063445f, -0.0476956f, +0.1040816f, +0.0520200f, +0.0070495f, +0.3070426f,
  -0.0577540f, -0.0083586f, -0.1378865f, -0.0400223f, +0.1112735f, -0.0466219f, +0.0715520f, +0.1658139f,
  -0.1117023f, +0.0214906f, +0.2630939f, +0.1963865f, -0.2093132f, -0.2614704f, +0.3324343f, +0.2631565f,
  +0.2749483f, -0.0304037f, -0.1638416f, +0.2170929f, +0.0859144f, -0.1380248f, +0.0096374f, -0.0701644f,
  +0.1469497f, +0.0289874f, +0.2050778f, -0.2858402f, +0.0901191f, +0.2755936f, -0.0717232f, -0.0276316f,
  +0.0063949f, +0.0107810f, +0.2598670f, +0.1649376f, -0.0144331f, -0.0222332f, +0.0428351f, -0.3144907f,
  -0.3178007f, +0.0330871f, +0.1640983f, -0.0208219f, +0.1562138f, -0.0353189f, -0.0287498f, -0.2117478f,
  -0.0985139f, +0.0152127f, +0.1618455f, +0.1133161f, +0.0450374f, -0.0638856f, +0.1620530f, -0.3723803f,
  -0.2273548f, +0.0726820f, -0.0301651f, -0.2044546f, -0.0291813f, -0.0090460f, -0.1688229f, +0.0950024f,
  +0.0601967f, +0.0088227f, +0.0134669f, +0.1228810f, +0.0901702f, +0.1226732f, -0.0340158f, -0.0072566f,
  -0.1089549f, -0.0037823f, +0.3333789f, -0.1922119f, +0.2981325f, -0.0215134f, -0.0182082f, +0.0306464f,
  -0.1370922f, -0.1528895f, +0.0639951f, -0.0667367f, -0.0262059f, +0.0478273f, +0.1838544f, +0.0189749f
);

const float biases[4] = float[4](
  -0.0284390f, -0.1496890f, +0.0200708f, +0.0805243f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer5 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2145151f, -0.0556434f, +0.1226929f, -0.0083410f, -0.0780597f, +0.0687434f, -0.2212708f, +0.0100942f,
  +0.2334862f, -0.0863724f, -0.0336893f, -0.0541567f, +0.2613275f, +0.3866827f, +0.1137759f, +0.1699634f,
  +0.0545278f, -0.1130669f, -0.2138949f, +0.3194698f, -0.0274226f, +0.1484389f, +0.0766873f, -0.1215235f,
  -0.2526953f, -0.1832707f, +0.1433763f, -0.0071605f, +0.1541429f, +0.2036912f, +0.0054992f, +0.2685775f,
  +0.0787158f, -0.0658897f, -0.3272942f, +0.1299670f, -0.0349155f, +0.0233753f, +0.0564742f, -0.2561203f,
  -0.2919612f, +0.1180966f, +0.0084860f, +0.2363484f, -0.1455900f, -0.4237855f, -0.0116323f, -0.3118784f,
  -0.2146767f, -0.3741636f, +0.1990653f, +0.2239259f, -0.2523303f, +0.0410712f, -0.2515559f, +0.2421514f,
  -0.0005004f, -0.0044544f, -0.0342241f, +0.1782034f, +0.0877287f, -0.0317403f, -0.0673937f, -0.0380207f,
  +0.0421064f, +0.1530727f, -0.1302178f, +0.2438078f, -0.2010417f, +0.1991946f, +0.0240275f, +0.0696291f,
  -0.0817962f, -0.0123367f, -0.1735739f, +0.1074212f, +0.1162470f, +0.0914765f, +0.1270633f, -0.1374357f,
  +0.0624717f, -0.0931516f, +0.2415921f, -0.0386241f, +0.2472981f, -0.2038617f, -0.0649372f, -0.1598290f,
  +0.1099241f, -0.1598042f, +0.1557819f, +0.0036593f, -0.0012320f, +0.1367402f, +0.1103709f, -0.2642245f,
  -0.1219875f, -0.0624720f, -0.1455269f, -0.0606269f, -0.0810088f, -0.1333963f, +0.1013643f, +0.0970993f,
  +0.1594080f, -0.4484257f, +0.1262752f, -0.0542078f, -0.0599566f, -0.1450972f, +0.0584149f, +0.2072888f,
  +0.2358670f, -0.0641354f, -0.0812035f, +0.0248528f, +0.1826168f, -0.2032565f, -0.0662113f, -0.1049383f,
  +0.2515949f, -0.1425995f, +0.2166057f, -0.1009641f, +0.1346000f, -0.0484367f, -0.0441507f, -0.0247165f,
  -0.0770143f, +0.0075920f, +0.2590891f, +0.1131558f, +0.1355646f, -0.0057516f, +0.0654630f, -0.1999231f,
  -0.0234883f, -0.0065695f, +0.0679416f, -0.1258699f, +0.1827573f, -0.1249473f, +0.1803794f, -0.1274894f,
  -0.0226629f, +0.0141103f, -0.1383356f, +0.1098614f, -0.0498421f, +0.0676022f, +0.0081235f, -0.0629231f,
  -0.2828437f, +0.0753468f, -0.0651122f, -0.0378789f, -0.3050219f, +0.0567609f, -0.1225167f, -0.1844544f,
  +0.1545484f, +0.2371184f, -0.2579842f, -0.1745047f, -0.0349633f, +0.1697591f, -0.1203721f, +0.0943843f,
  -0.2524888f, +0.0047619f, -0.1932359f, -0.1571961f, +0.0211642f, +0.0465546f, -0.1296377f, -0.0860201f,
  +0.2729267f, +0.0112795f, -0.0810370f, -0.0307582f, -0.1443316f, +0.2396203f, -0.1192235f, +0.3341043f,
  -0.2174447f, +0.1344474f, -0.0170662f, -0.1866412f, +0.0781701f, +0.1263532f, -0.0312290f, +0.1791819f,
  +0.1286013f, +0.1787628f, -0.1936458f, -0.1259405f, +0.1553624f, +0.3935635f, +0.2112111f, +0.1619177f,
  +0.0387507f, +0.2012947f, +0.1012226f, +0.0071482f, +0.2030445f, -0.3171291f, +0.0416529f, -0.0803782f,
  -0.0045091f, -0.1234060f, +0.0036767f, -0.1106806f, +0.0111891f, +0.1161482f, +0.0755834f, -0.1557164f,
  -0.0216407f, +0.0613822f, +0.1318955f, +0.0385014f, -0.1400666f, +0.2042952f, +0.0119174f, -0.2855019f,
  -0.0210483f, -0.2138588f, -0.0532131f, -0.0697670f, +0.0229892f, +0.1276618f, -0.0580961f, -0.1214322f,
  +0.0327423f, +0.2022574f, +0.1198277f, +0.1259963f, -0.4020774f, -0.1068452f, -0.0168992f, -0.2437481f,
  +0.1287217f, +0.1043631f, +0.1707508f, -0.1153682f, +0.0519470f, -0.1374355f, -0.1510651f, -0.2369081f,
  -0.2092505f, +0.1535254f, -0.0211196f, +0.0775486f, +0.0064016f, +0.1436277f, +0.1394736f, -0.1135121f,
  +0.1207545f, -0.2047995f, -0.2343105f, -0.0189835f, +0.2111702f, -0.2031515f, -0.0013329f, +0.2374180f,
  -0.2795074f, +0.0373498f, -0.0548593f, -0.0316279f, -0.0466257f, -0.0777148f, -0.1151258f, +0.0621895f,
  +0.2546844f, +0.0233682f, +0.0600637f, +0.0978571f, +0.0407746f, +0.1175143f, -0.0329961f, -0.0667206f,
  -0.0592710f, +0.3128854f, +0.2183229f, +0.2350558f, +0.0486087f, +0.0786359f, -0.0774997f, -0.0127149f
);

const float biases[4] = float[4](
  +0.1031105f, +0.0595663f, +0.1363840f, +0.0178943f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer6 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0190553f, +0.1421475f, -0.0728408f, +0.0144582f, -0.0552188f, -0.1933444f, -0.1287799f, -0.2015641f,
  +0.1057877f, +0.1071794f, -0.1949024f, +0.2237065f, -0.1468416f, -0.2509491f, +0.0270212f, +0.0596209f,
  +0.0895610f, +0.0616676f, +0.1740803f, -0.0256797f, +0.0393004f, -0.0269001f, -0.2543056f, -0.0408523f,
  +0.3638959f, +0.1793603f, +0.0751331f, -0.1032077f, +0.0148570f, -0.2745319f, +0.0664742f, +0.1891343f,
  -0.1691892f, +0.2291378f, -0.1270769f, +0.0953800f, -0.1632351f, +0.0673189f, +0.2960406f, -0.0652975f,
  +0.2119662f, +0.0928478f, -0.3255185f, -0.0019871f, -0.0712780f, +0.0869187f, +0.1298620f, -0.0008119f,
  -0.1732159f, -0.0097542f, +0.2058306f, +0.2425268f, +0.2563935f, -0.3183462f, +0.1345983f, +0.1453833f,
  -0.2325734f, -0.0086265f, +0.0865185f, -0.2141576f, -0.0178794f, +0.0756183f, +0.1100441f, -0.1709648f,
  -0.1434497f, +0.0702113f, +0.0215906f, +0.1508716f, -0.1710119f, -0.1220424f, -0.0245409f, -0.1229015f,
  -0.1126209f, -0.0995143f, +0.3524576f, -0.1103895f, +0.0382008f, +0.3217701f, -0.0341494f, +0.1041282f,
  -0.0612026f, +0.2817106f, +0.0196235f, -0.2057146f, +0.0674112f, +0.1500832f, -0.1054790f, +0.0764014f,
  -0.2383034f, +0.0439226f, -0.1464569f, -0.1110430f, +0.0277548f, -0.0902697f, +0.0802593f, +0.0073973f,
  -0.0603149f, +0.1878979f, +0.1447292f, +0.0246346f, +0.0480501f, -0.1265370f, +0.1941597f, -0.3463032f,
  -0.0166566f, +0.0309009f, -0.1274649f, -0.1116954f, -0.1008917f, -0.0719200f, -0.1089187f, +0.0701977f,
  -0.0255090f, -0.3106168f, -0.3306164f, +0.1573336f, -0.0244688f, -0.0499791f, +0.0457591f, -0.2369945f,
  +0.2683879f, +0.0428711f, -0.0000328f, -0.0780709f, -0.0762241f, +0.1238095f, +0.0296148f, -0.0899172f,
  -0.0516633f, -0.1787768f, -0.1806437f, +0.0459843f, -0.1622187f, -0.0233769f, -0.0028099f, -0.1248789f,
  +0.0175228f, -0.2750939f, -0.0600070f, +0.2314692f, +0.1446367f, -0.0370733f, +0.0203305f, +0.1794682f,
  +0.2521372f, -0.0949495f, -0.0281554f, -0.2180707f, -0.0088226f, -0.2933926f, -0.0058714f, -0.0587393f,
  +0.0459156f, -0.2071717f, +0.0430684f, -0.0849113f, -0.0678657f, +0.0428950f, +0.0601072f, +0.0365254f,
  -0.0544449f, +0.0927449f, +0.2914293f, +0.2570360f, +0.1241175f, -0.0769881f, -0.1184740f, +0.1102674f,
  -0.0834082f, +0.0475217f, -0.0494553f, -0.3001148f, -0.1242611f, -0.1636304f, -0.0010614f, +0.0520809f,
  -0.1488245f, -0.3268446f, +0.1307480f, -0.0837720f, +0.3169512f, -0.0801472f, -0.0575186f, +0.0093286f,
  +0.1024112f, +0.3264247f, -0.1212101f, -0.0842926f, +0.2136261f, +0.1027607f, -0.3166457f, -0.0670110f,
  -0.1038585f, -0.0772883f, +0.0320606f, -0.0874528f, +0.2064115f, -0.0791914f, -0.0467260f, +0.0990618f,
  -0.0934169f, -0.1482833f, +0.1491087f, +0.0211297f, +0.1657830f, +0.1270169f, -0.1539818f, +0.0760364f,
  -0.3572013f, -0.3859212f, +0.1421035f, -0.0953063f, -0.0367650f, +0.1045778f, -0.0260893f, +0.0887636f,
  -0.0906398f, -0.0433199f, -0.0811439f, +0.0267370f, -0.0109945f, +0.2545416f, +0.2247858f, +0.1702974f,
  +0.0289998f, -0.0444442f, +0.0629767f, -0.0226780f, +0.2367670f, +0.1316578f, +0.0109430f, -0.3382286f,
  -0.0671629f, -0.0407943f, +0.1131297f, -0.0796404f, -0.0153227f, -0.0215800f, +0.1182280f, -0.2637894f,
  +0.1016001f, -0.1101399f, +0.1587761f, +0.3015231f, -0.0221728f, +0.0992424f, -0.0214222f, -0.1069826f,
  -0.1303741f, +0.3126055f, -0.1897910f, +0.0844011f, -0.0096757f, -0.0491578f, -0.1079740f, +0.3412497f,
  -0.1702116f, +0.0884324f, -0.1569695f, +0.0803069f, -0.0138773f, -0.0918836f, +0.0268151f, +0.2090218f,
  +0.0721948f, +0.1169456f, +0.0070938f, +0.2069282f, -0.1281771f, -0.0724440f, -0.0316724f, -0.0547839f,
  -0.0392095f, +0.1204931f, -0.2762273f, +0.1219104f, +0.1437795f, +0.1038168f, -0.1882538f, -0.0687451f,
  +0.0257960f, -0.0256177f, +0.0553201f, -0.1380933f, -0.0417883f, +0.0034323f, +0.0212104f, +0.0966398f
);

const float biases[4] = float[4](
  +0.0456446f, +0.0178796f, +0.0290682f, -0.0343981f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer6 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0374478f, -0.1633023f, -0.0674051f, -0.2180394f, -0.1200268f, -0.2244270f, -0.0315440f, -0.0310855f,
  +0.2506063f, +0.0914965f, +0.1783388f, +0.0008812f, +0.0626584f, +0.1108832f, -0.0568251f, +0.0481329f,
  +0.0429785f, +0.2021039f, -0.0680221f, -0.2191786f, +0.1182754f, -0.0805415f, -0.0345416f, +0.1043001f,
  +0.0336654f, -0.2049682f, -0.1851566f, +0.0286526f, -0.1367767f, -0.1169957f, +0.3285440f, -0.1445089f,
  +0.0868280f, -0.2435838f, +0.1972021f, +0.0583912f, +0.0086288f, +0.0578813f, -0.1195496f, +0.1550277f,
  -0.3266476f, +0.2048006f, -0.1140198f, -0.1071484f, +0.2251003f, +0.1731125f, -0.1378900f, +0.1600639f,
  +0.0300856f, -0.2645252f, -0.3354070f, +0.0088794f, -0.1425490f, -0.0634464f, -0.0097230f, -0.0356311f,
  +0.0288588f, -0.1827257f, +0.4147519f, +0.1442249f, +0.1706976f, -0.1341164f, +0.0772749f, -0.1519812f,
  -0.0904586f, -0.0039212f, +0.0776182f, +0.0133510f, +0.0958761f, -0.0907555f, -0.0624001f, -0.1248195f,
  -0.0767150f, +0.0014748f, +0.1456156f, -0.1025239f, +0.0568640f, -0.2428303f, +0.0246152f, +0.2083880f,
  +0.2771579f, +0.1306123f, +0.1946937f, -0.1007388f, +0.1553517f, -0.0898130f, -0.1045651f, -0.0714863f,
  +0.0236428f, +0.0847774f, -0.0652003f, +0.3277822f, +0.0904458f, -0.1811839f, -0.1168775f, -0.0972287f,
  +0.0822330f, +0.0668658f, +0.3415414f, -0.0117113f, +0.1931119f, +0.0970633f, +0.0638085f, -0.0897699f,
  +0.1992398f, +0.1580306f, -0.0459185f, -0.0441905f, -0.0615004f, +0.2770284f, -0.0361914f, +0.0501154f,
  -0.1269488f, -0.0264218f, +0.0382633f, +0.0407633f, -0.1256874f, +0.0179390f, +0.0595478f, +0.0987962f,
  +0.1068473f, +0.0242528f, -0.1535533f, +0.0683834f, -0.1328811f, +0.2155385f, +0.1049538f, +0.0146493f,
  +0.2261513f, +0.2670881f, -0.4160385f, +0.0323901f, +0.1304357f, -0.1070843f, +0.1249651f, -0.1478256f,
  +0.0228700f, +0.2103872f, +0.0642472f, -0.0769272f, +0.1193090f, -0.0951703f, -0.0918231f, +0.1101094f,
  +0.1704468f, +0.2295051f, -0.0482494f, +0.0202033f, +0.0012085f, -0.1025284f, +0.0102362f, +0.0033266f,
  +0.0125158f, -0.2328799f, -0.0628499f, +0.1558029f, +0.0493052f, -0.2001681f, +0.0544703f, -0.0499487f,
  +0.0771199f, +0.0448005f, -0.0610116f, +0.0280717f, +0.0221426f, -0.0759350f, -0.0256317f, +0.2872405f,
  -0.1789712f, -0.0623727f, -0.0139140f, +0.0206146f, -0.2035725f, -0.2230360f, +0.1778816f, +0.1636994f,
  +0.1605967f, -0.1165187f, -0.0503028f, +0.0188511f, -0.0870838f, +0.1849642f, +0.0617391f, -0.1347704f,
  -0.0034307f, +0.1550878f, -0.0910117f, -0.0864076f, +0.2078529f, +0.1482275f, +0.0370286f, -0.2040289f,
  +0.0467969f, -0.0700775f, +0.0260091f, -0.0250654f, +0.0066357f, +0.1525146f, +0.0589027f, +0.0183002f,
  -0.2351907f, -0.1221095f, -0.0891467f, +0.1105838f, +0.1320819f, +0.2111744f, -0.0763487f, +0.2241243f,
  -0.0041223f, -0.1571034f, -0.0223128f, -0.0839333f, +0.1495139f, +0.0290371f, -0.0130652f, -0.0991900f,
  -0.1433903f, +0.0380435f, -0.2458674f, +0.0672474f, +0.2816185f, -0.1722964f, +0.0317768f, -0.1277783f,
  -0.2419641f, -0.1252724f, -0.2059186f, -0.0004632f, +0.0951770f, +0.1506964f, -0.0874021f, +0.0162555f,
  -0.0007763f, -0.1074593f, -0.0810451f, +0.0181494f, -0.1943985f, +0.1235047f, -0.0871332f, -0.0349574f,
  +0.1836780f, +0.0625454f, +0.1293732f, +0.0774496f, +0.0364444f, +0.1415848f, -0.3693905f, -0.1299921f,
  -0.3035224f, -0.2681897f, -0.2253215f, +0.1455128f, +0.2260644f, +0.1155326f, -0.1989011f, -0.0466654f,
  +0.1718646f, +0.2557886f, +0.1747889f, -0.0091431f, -0.2961325f, -0.0822068f, +0.1943126f, +0.1522028f,
  +0.0870237f, -0.1943523f, +0.0135383f, +0.0804991f, +0.1043858f, +0.3416447f, -0.0387809f, -0.1165552f,
  -0.2063141f, -0.1961682f, -0.0660263f, -0.1449823f, +0.0460506f, +0.2069581f, -0.0107822f, -0.0280914f,
  -0.1242292f, +0.1990560f, +0.1611387f, -0.0892048f, -0.0448100f, +0.0199808f, -0.2954686f, -0.0190737f
);

const float biases[4] = float[4](
  -0.0225167f, +0.0145659f, +0.0613495f, -0.0882549f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer7 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1569199f, +0.1247019f, -0.1576749f, -0.1630580f, +0.0385780f, -0.0900984f, +0.1577832f, -0.1108862f,
  -0.0735268f, -0.1219723f, -0.1167633f, -0.2386614f, +0.1554354f, +0.2377166f, -0.0382631f, +0.0598457f,
  +0.1332446f, -0.0280245f, +0.0356633f, +0.0158501f, +0.0668630f, -0.0480952f, -0.1155284f, -0.2026400f,
  +0.1882085f, -0.0648577f, -0.0332297f, -0.0454075f, -0.0074698f, -0.0330146f, +0.1045778f, -0.3049670f,
  +0.0316368f, +0.4167123f, -0.2206389f, -0.0213164f, -0.0057009f, +0.0221824f, -0.0434667f, +0.0126043f,
  -0.0327002f, -0.3093643f, -0.0887039f, -0.0488268f, +0.0673985f, -0.0868956f, +0.0218266f, +0.1105408f,
  +0.1312774f, +0.0928901f, -0.0871287f, -0.0183865f, +0.1145046f, +0.2530262f, +0.1800430f, +0.0742657f,
  +0.1066436f, -0.1286932f, +0.1075095f, +0.1530173f, -0.0987393f, +0.1067050f, -0.0470125f, -0.1573966f,
  -0.0528330f, -0.1232652f, -0.0628822f, -0.2434634f, +0.0187221f, +0.0531201f, +0.0855001f, +0.0828401f,
  +0.1065038f, +0.0621475f, +0.0365748f, +0.0363834f, -0.0486802f, -0.1925778f, -0.0913922f, -0.1021674f,
  +0.1780636f, +0.0304146f, -0.2722640f, +0.0376799f, -0.1227887f, +0.1522820f, -0.0172425f, -0.4373830f,
  -0.0163020f, -0.1008800f, -0.1700244f, +0.0139692f, +0.1953606f, +0.0475131f, +0.1803263f, -0.0346627f,
  -0.0444693f, -0.2250288f, -0.1811412f, +0.2919062f, +0.0192454f, +0.3579162f, +0.0727249f, -0.3018295f,
  +0.1686598f, +0.3316297f, -0.0143658f, +0.0127478f, +0.3211094f, -0.1439859f, +0.0779452f, -0.0628987f,
  -0.1482019f, +0.0689306f, +0.0628204f, +0.0790488f, -0.0258053f, +0.1629081f, +0.0831802f, +0.0396285f,
  -0.0306448f, +0.2375818f, +0.1944498f, -0.1060371f, +0.3113897f, +0.0159618f, -0.0283243f, -0.2283264f,
  -0.0043600f, +0.0534571f, -0.1638782f, +0.0380461f, -0.0435489f, +0.0493276f, +0.1090377f, -0.1127906f,
  -0.0297251f, -0.0088271f, -0.3192615f, -0.1782252f, +0.0562845f, +0.1667140f, +0.0055206f, +0.0310149f,
  -0.2365655f, +0.0499339f, -0.1027534f, +0.0122117f, -0.1776016f, +0.3190858f, -0.1267934f, -0.1931737f,
  +0.1145805f, +0.2285490f, +0.0562328f, +0.0162537f, +0.0221532f, +0.0797845f, -0.0877050f, -0.1029240f,
  -0.0529555f, +0.1040569f, +0.1502568f, +0.0462670f, +0.1862705f, +0.0806206f, +0.0068952f, +0.0734514f,
  +0.0341305f, +0.0699424f, -0.1860032f, -0.0643334f, -0.0384117f, -0.0195006f, +0.0772548f, -0.1763830f,
  +0.2342721f, -0.2147896f, -0.1463765f, -0.3267403f, -0.1456967f, +0.1590772f, +0.1952868f, +0.1867699f,
  -0.4120440f, +0.1203433f, -0.1719657f, -0.1160266f, +0.1229447f, +0.0497059f, +0.0414868f, -0.0786220f,
  +0.0343495f, -0.1042387f, +0.0423822f, +0.0244973f, +0.0338105f, +0.0067917f, -0.1544123f, +0.2936151f,
  +0.0309106f, -0.1810456f, -0.3147221f, -0.1005915f, -0.0152975f, -0.0256811f, -0.1710411f, -0.3294694f,
  -0.0767751f, +0.0479936f, +0.2820606f, -0.1806277f, -0.1491459f, -0.0154835f, -0.0107431f, +0.1879427f,
  -0.1940109f, +0.0853700f, -0.0807335f, -0.0987208f, -0.1287877f, -0.0029334f, -0.1231017f, +0.1890271f,
  -0.0128960f, -0.0849347f, -0.1026453f, +0.1443902f, +0.2562168f, -0.1593033f, +0.1600838f, +0.3596433f,
  +0.1279077f, -0.0633520f, +0.0799311f, -0.0045935f, +0.0865976f, -0.0530687f, +0.0266797f, -0.2580513f,
  -0.1958054f, -0.0266183f, +0.3927290f, -0.0033988f, -0.2354430f, +0.2277421f, -0.0257054f, +0.4420846f,
  +0.0549906f, -0.0950240f, -0.0819836f, -0.1449662f, -0.1288186f, -0.1135377f, +0.1725728f, -0.0972065f,
  -0.0293906f, +0.0427090f, +0.0823320f, +0.0769220f, -0.0061526f, +0.0074778f, -0.2362741f, +0.0597898f,
  -0.1205325f, -0.2064673f, +0.4409231f, +0.0823860f, +0.0349358f, -0.0499798f, -0.1219718f, -0.3385136f,
  -0.0429105f, +0.0072229f, +0.1332406f, +0.3052364f, -0.2081044f, -0.3648395f, +0.2696406f, -0.2580124f,
  -0.0259322f, -0.0218026f, -0.0138492f, -0.0345690f, -0.0494867f, +0.1731391f, +0.0607940f, -0.2900122f
);

const float biases[4] = float[4](
  +0.0578048f, +0.1108623f, +0.0092128f, -0.0402059f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer7 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0537672f, +0.0764300f, +0.1732671f, -0.2572833f, -0.1650681f, +0.1991524f, -0.1133323f, +0.0535319f,
  +0.1105081f, -0.1512312f, +0.1336774f, +0.2679437f, +0.1967237f, +0.0423661f, -0.0030433f, +0.0928598f,
  -0.1680466f, +0.0594052f, +0.2079495f, -0.0649203f, +0.0879465f, -0.1268342f, -0.1799263f, +0.0085900f,
  +0.1382407f, -0.5100796f, -0.0710387f, -0.1529166f, -0.0572906f, +0.0533747f, -0.0919629f, -0.0014785f,
  -0.1083221f, +0.0377253f, -0.0693660f, +0.0760119f, +0.2591329f, -0.0147537f, -0.0685492f, +0.2329443f,
  -0.0299396f, -0.2352522f, -0.0152699f, -0.3770809f, +0.2753385f, +0.1382224f, +0.0835451f, +0.0672297f,
  -0.2153418f, -0.0722773f, -0.0333176f, +0.1836374f, -0.0071561f, +0.0316130f, +0.2152528f, -0.1792528f,
  +0.2505060f, +0.0156809f, -0.0918259f, +0.2536368f, -0.1505586f, +0.0098585f, -0.0833684f, -0.0124442f,
  +0.0394045f, +0.1380429f, +0.1813678f, -0.0845196f, -0.0005965f, -0.0467840f, -0.0593931f, -0.2976186f,
  +0.2466617f, -0.1485750f, +0.1070924f, -0.0356910f, -0.0807191f, +0.1357985f, -0.0875274f, -0.0577934f,
  +0.0572555f, +0.0759484f, -0.0882370f, -0.0268025f, +0.1682894f, +0.0921380f, -0.1917570f, -0.1772538f,
  +0.3483455f, +0.1936181f, +0.1388745f, +0.1085521f, -0.1765801f, -0.2782991f, +0.0342418f, -0.0798525f,
  -0.0177623f, -0.3457691f, +0.0374188f, +0.1379313f, -0.0710953f, -0.0845743f, +0.1015736f, -0.3280082f,
  +0.0681655f, -0.0767812f, -0.3089562f, +0.1746954f, +0.3486622f, -0.0640624f, -0.1030585f, -0.1522613f,
  -0.1338565f, -0.1419390f, +0.0334681f, +0.1195210f, -0.1068724f, -0.0946368f, +0.0064842f, -0.0008053f,
  -0.0916914f, -0.0729960f, +0.1243688f, -0.1248485f, +0.1597130f, +0.0467594f, -0.0832566f, +0.2192500f,
  -0.2384637f, +0.0706445f, +0.0818680f, -0.0525547f, +0.0388481f, +0.0456018f, -0.2150223f, -0.0951240f,
  -0.0826548f, +0.0429397f, +0.1429942f, +0.0124466f, +0.0228087f, -0.0214632f, -0.1683493f, +0.0077186f,
  -0.4469956f, -0.1776082f, +0.0086870f, -0.3285611f, +0.0301972f, -0.5265406f, +0.0273304f, +0.4540024f,
  +0.1905927f, -0.2189732f, +0.2779968f, +0.2182515f, +0.0069629f, +0.1439141f, -0.1235069f, -0.1740893f,
  +0.2466266f, -0.0716494f, +0.0066899f, -0.0440007f, +0.1383768f, +0.0669532f, +0.2201993f, +0.1246297f,
  -0.5560716f, +0.4263624f, -0.0539292f, -0.0325832f, -0.1975546f, -0.0955963f, +0.0941656f, +0.2790630f,
  -0.2500205f, -0.3712513f, -0.0033929f, -0.0405366f, +0.1468731f, -0.3223449f, -0.3455233f, -0.1070187f,
  -0.0595768f, +0.1166185f, -0.2080838f, +0.1432437f, -0.0770659f, +0.1636798f, +0.1377949f, +0.1104726f,
  -0.2401469f, +0.1162277f, -0.2426955f, +0.2471856f, -0.1762192f, -0.0728537f, +0.0167006f, +0.2805723f,
  -0.1982565f, -0.0621522f, -0.4581201f, +0.1897387f, +0.1532924f, +0.1533476f, -0.0992755f, -0.3043833f,
  -0.0272486f, +0.2021943f, +0.5231205f, +0.2700906f, +0.2643754f, -0.0528562f, +0.0443630f, +0.1271853f,
  -0.1922508f, -0.0304203f, +0.0630995f, +0.1398692f, -0.0636087f, -0.1959316f, -0.0426439f, -0.0731215f,
  +0.0192329f, +0.1895805f, -0.2365299f, -0.0590910f, -0.1680878f, -0.3159525f, -0.0091402f, -0.3861264f,
  +0.0279697f, +0.1110320f, -0.1490615f, +0.1018564f, +0.1624281f, -0.0884700f, +0.5258091f, -0.0353475f,
  -0.0539977f, -0.0515088f, -0.0079981f, +0.1435132f, +0.0836851f, +0.0245153f, -0.0208933f, -0.1425463f,
  +0.0391953f, +0.1211200f, -0.1028462f, -0.0913252f, -0.2519794f, +0.0742191f, +0.3223371f, +0.1740703f,
  -0.0796271f, +0.0425181f, +0.3037377f, +0.0455121f, +0.1640088f, -0.1165417f, -0.0179065f, +0.2268064f,
  -0.1291848f, +0.2577524f, -0.3092208f, -0.3080052f, +0.0692951f, +0.1787683f, +0.2424381f, -0.0438558f,
  +0.1730511f, -0.0668371f, -0.2884735f, -0.0375723f, +0.0354507f, -0.2128328f, +0.2607200f, -0.0929147f,
  -0.0311782f, +0.1891501f, +0.0737116f, -0.0393196f, -0.0498425f, +0.0059835f, -0.0522290f, -0.1155795f
);

const float biases[4] = float[4](
  +0.0199828f, +0.0639967f, -0.0409079f, -0.1807340f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer8 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.3005046f, +0.1968253f, +0.0759890f, -0.1652527f, +0.0803279f, -0.0694764f, +0.0066229f, +0.2340778f,
  +0.0306496f, -0.2425117f, +0.0302962f, -0.0768693f, +0.0227960f, -0.1323584f, -0.0481142f, +0.1185585f,
  +0.0213699f, -0.0188142f, -0.0798661f, +0.0707229f, -0.0619320f, -0.2124542f, +0.1128290f, +0.0218138f,
  +0.1463768f, -0.1644387f, +0.2696240f, +0.0471264f, +0.0009000f, +0.0155632f, +0.1171478f, -0.0094745f,
  -0.0814261f, -0.0993612f, +0.3276533f, +0.0810830f, -0.2898811f, -0.6309531f, -0.1834763f, +0.3418493f,
  -0.3021562f, +0.0788235f, -0.0391727f, -0.3339851f, -0.1852121f, -0.2726423f, +0.0775429f, +0.2144586f,
  -0.1544280f, +0.0805059f, +0.1507913f, +0.0652590f, -0.0507390f, +0.1397435f, +0.2348888f, -0.0397324f,
  -0.0596548f, -0.4063388f, +0.0933408f, -0.1672769f, -0.0003643f, -0.1257452f, +0.1876616f, -0.2702376f,
  +0.1937865f, +0.0403231f, +0.1731638f, -0.1878469f, +0.0097891f, -0.0791423f, -0.1497314f, -0.1562168f,
  -0.0137570f, -0.1186236f, +0.0953043f, +0.1029100f, -0.3135877f, +0.2247625f, +0.0555942f, +0.0331544f,
  +0.2607600f, -0.0134026f, +0.0365313f, -0.1360901f, +0.1049387f, -0.1064361f, -0.0289510f, -0.1384036f,
  +0.1514836f, +0.0555737f, -0.1280165f, -0.1834618f, +0.0724837f, +0.1415150f, +0.0661815f, -0.1014822f,
  +0.1811365f, +0.2057949f, +0.1204836f, +0.0232466f, +0.0293573f, -0.1849307f, -0.1506952f, -0.1552536f,
  -0.1091845f, +0.0039957f, +0.0829243f, +0.0899965f, -0.1622078f, -0.3494814f, +0.0063066f, -0.0985136f,
  -0.2221843f, +0.1179868f, +0.1864568f, -0.1930289f, +0.0081242f, +0.3415084f, -0.0930506f, -0.2461605f,
  +0.0655757f, -0.1058604f, -0.2201966f, +0.0227719f, +0.1888762f, -0.1773017f, -0.0708604f, -0.0918341f,
  -0.1384334f, -0.2440136f, -0.2157648f, -0.1229327f, -0.0073796f, -0.1075938f, +0.1179915f, -0.1418833f,
  -0.0705022f, +0.0815942f, -0.1144676f, +0.2754494f, -0.0000179f, +0.2022476f, +0.2310485f, -0.0291830f,
  -0.0085809f, +0.2447221f, +0.1178326f, +0.0956496f, +0.0426080f, +0.0113603f, +0.0376366f, -0.0419904f,
  +0.3342920f, +0.0297410f, -0.0738491f, +0.2689849f, -0.0188949f, +0.0758139f, -0.1364841f, +0.1963480f,
  +0.0940357f, -0.2183264f, +0.1591704f, -0.0318413f, -0.0554957f, -0.2155224f, +0.3690936f, +0.1463132f,
  +0.1468677f, +0.0995002f, +0.2442648f, +0.2571102f, -0.0809438f, +0.0882274f, -0.1045448f, +0.3293115f,
  +0.0397017f, -0.1544967f, +0.2000590f, +0.1919419f, -0.2081709f, +0.1648673f, +0.0377888f, +0.1545935f,
  -0.1462297f, +0.0874142f, -0.2506091f, +0.0776082f, +0.2889666f, +0.0683498f, +0.2409566f, -0.0380047f,
  +0.2838263f, +0.2369695f, -0.1164886f, +0.1454663f, -0.3762818f, +0.1554327f, +0.0159885f, +0.1663427f,
  +0.2031399f, +0.3892248f, -0.0639828f, +0.0693394f, +0.0591425f, -0.2127180f, +0.2424091f, +0.0046660f,
  -0.0100677f, -0.0387287f, -0.0989624f, +0.0315567f, +0.0782223f, +0.1858876f, +0.0816402f, +0.3291043f,
  -0.1077378f, +0.1075339f, -0.0623062f, +0.0658167f, +0.0886026f, -0.1057457f, +0.0642769f, +0.0348639f,
  +0.1210868f, -0.0888190f, -0.0847974f, +0.1500725f, -0.3262055f, -0.0921405f, -0.5498601f, +0.0026455f,
  +0.0642145f, +0.1591221f, +0.0117507f, +0.1718878f, +0.2189968f, -0.0659506f, -0.2777492f, -0.3392344f,
  +0.1903664f, -0.2123504f, +0.3117273f, +0.0818596f, +0.0738536f, -0.2315586f, -0.1143022f, -0.0293361f,
  +0.2279017f, -0.1004264f, +0.1011245f, +0.2976139f, -0.4281010f, +0.0575814f, -0.1052619f, +0.0963325f,
  -0.0058085f, +0.2442386f, +0.1899747f, -0.1153118f, +0.0060848f, -0.0755635f, -0.2137963f, +0.0869488f,
  +0.1570299f, -0.0726183f, -0.1779513f, -0.1639370f, +0.0922131f, +0.2472797f, +0.0720218f, -0.2538490f,
  -0.0881395f, -0.0416428f, -0.2421857f, +0.0695404f, +0.3343013f, +0.0246061f, -0.1900707f, +0.4207262f,
  +0.1870824f, -0.1713796f, -0.1099634f, -0.0418393f, -0.2813655f, +0.1448774f, +0.0211808f, +0.2456823f
);

const float biases[4] = float[4](
  -0.0002055f, +0.0369631f, +0.0549910f, -0.0377940f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer8 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0753986f, +0.4666885f, +0.0756057f, +0.0362741f, -0.0721579f, -0.2334386f, -0.1170079f, +0.1787089f,
  +0.0374856f, +0.1111761f, +0.1878253f, +0.1660221f, -0.1226771f, +0.1113610f, +0.0395708f, +0.1845617f,
  -0.0389804f, +0.1313556f, +0.0321452f, -0.2721522f, -0.1242904f, +0.0036173f, +0.1361912f, -0.1616710f,
  +0.0086181f, +0.1598343f, +0.1571125f, -0.0128789f, -0.0070013f, -0.0424612f, -0.0468144f, -0.0471982f,
  -0.1063966f, +0.1737658f, -0.0890369f, -0.3386633f, +0.1350614f, -0.0802602f, -0.2567373f, -0.0088178f,
  +0.0852473f, -0.0463931f, -0.1097331f, +0.2349927f, -0.0894685f, -0.1029124f, +0.2715529f, -0.1017350f,
  +0.0296538f, +0.0131923f, -0.1684020f, +0.1855336f, -0.2378477f, +0.0446646f, +0.0632991f, -0.2253850f,
  -0.2495959f, -0.0422747f, -0.1313342f, +0.0020545f, -0.1785295f, +0.1796162f, -0.3986358f, +0.1030329f,
  +0.2345818f, -0.2326610f, -0.0938909f, +0.1975189f, +0.0904501f, -0.4714737f, -0.0853873f, +0.2124898f,
  +0.0499476f, -0.0632449f, +0.0310187f, +0.2057676f, -0.3172997f, -0.0644521f, -0.4008284f, +0.0017345f,
  +0.0112415f, +0.0491620f, +0.3534425f, +0.3174573f, +0.0689656f, +0.1476375f, -0.0478368f, +0.1172632f,
  -0.1369421f, -0.0616365f, +0.0247177f, +0.2272476f, -0.1547952f, +0.0260203f, +0.1595839f, -0.1365535f,
  +0.1813736f, +0.3127640f, -0.1214118f, +0.2367093f, -0.1512825f, +0.0382435f, +0.0414119f, +0.2226681f,
  -0.2599892f, -0.1437140f, +0.0919601f, +0.1122275f, +0.1547287f, -0.1932673f, +0.0320032f, +0.3497344f,
  +0.1095525f, +0.0649213f, -0.1903781f, +0.1735167f, -0.0514342f, +0.2042271f, -0.1764304f, -0.0009382f,
  -0.0964775f, -0.0672674f, -0.0494881f, +0.0708006f, -0.0975550f, +0.0709106f, -0.0530064f, +0.0056288f,
  +0.1607173f, -0.1724846f, -0.1584641f, +0.1838307f, +0.0852526f, -0.0105952f, -0.1452297f, +0.0078430f,
  +0.1180239f, +0.0266969f, -0.1413219f, +0.1384915f, +0.0060478f, -0.1192578f, -0.1477037f, -0.0209364f,
  +0.0186400f, +0.2402922f, -0.1545378f, -0.1898987f, -0.0429166f, -0.0363157f, +0.1059628f, -0.1962967f,
  +0.0347492f, -0.0081339f, +0.0581190f, +0.1532994f, +0.1040327f, +0.1396958f, -0.1372773f, +0.0999576f,
  -0.0989324f, -0.1864055f, -0.1246890f, +0.2864788f, +0.1485236f, -0.1614339f, +0.1081079f, -0.1087563f,
  -0.2136454f, -0.0701828f, +0.1373047f, -0.1503563f, +0.2116379f, -0.0779927f, +0.2376931f, -0.1788610f,
  +0.0234709f, -0.0826325f, -0.2512833f, +0.1034966f, +0.1503449f, +0.2426052f, -0.0013948f, -0.0550291f,
  -0.0378752f, -0.0325686f, +0.0147700f, +0.0774713f, +0.3447579f, -0.0139811f, +0.1429286f, -0.1992010f,
  +0.0378402f, +0.0222543f, +0.2289064f, +0.0487537f, +0.0347196f, +0.1708338f, -0.2447205f, -0.0728507f,
  +0.0646125f, -0.1572986f, -0.2119262f, +0.0886186f, -0.1880180f, +0.0428114f, +0.1048963f, -0.0694987f,
  +0.0526446f, +0.0176806f, +0.0989694f, +0.0132974f, +0.1197338f, +0.0834604f, +0.2458224f, +0.1433833f,
  +0.0096013f, +0.1134359f, -0.0217100f, -0.0808851f, +0.0098921f, -0.3117886f, -0.1592796f, -0.0840199f,
  +0.0640717f, -0.2103272f, +0.0749246f, -0.2415213f, -0.1529218f, +0.0737033f, +0.2797545f, -0.1308685f,
  +0.3654475f, -0.0520802f, -0.0937965f, -0.2368337f, +0.0210341f, -0.0448130f, +0.1099456f, +0.0536504f,
  -0.2761770f, -0.1971981f, -0.0920496f, +0.2092195f, +0.1988253f, +0.0476046f, -0.2580061f, -0.3224775f,
  +0.1347560f, +0.1685254f, -0.0883689f, +0.2238043f, +0.1398708f, +0.0882278f, +0.4171232f, -0.2177516f,
  +0.0894175f, +0.1621178f, +0.1822087f, -0.2505128f, -0.0276957f, +0.1676620f, +0.0163938f, +0.0838418f,
  +0.0165057f, +0.2162610f, +0.2002352f, +0.0904031f, -0.0784605f, +0.0545932f, +0.2015420f, -0.2169363f,
  -0.0695050f, -0.0644691f, -0.3555226f, +0.0206055f, +0.2812545f, +0.2489946f, +0.2378220f, -0.1031071f,
  -0.0138490f, -0.1678281f, +0.0609146f, -0.1384975f, -0.0010568f, +0.0475191f, +0.1301250f, +0.1395163f
);

const float biases[4] = float[4](
  -0.0358672f, -0.0235490f, +0.0493985f, -0.0083018f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer9 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1099197f, -0.2945866f, +0.1914955f, -0.0014602f, -0.1216541f, +0.0405218f, -0.1661322f, -0.0658097f,
  +0.0741371f, -0.0700611f, +0.0673406f, +0.0100156f, -0.0280437f, +0.0043742f, -0.0857818f, +0.2273214f,
  +0.2467554f, -0.1523640f, -0.1806994f, +0.0101898f, +0.0352122f, -0.0493611f, +0.0219433f, +0.3681729f,
  +0.0212285f, -0.3446249f, -0.1526454f, +0.0867394f, -0.1404870f, -0.0444185f, -0.3663647f, +0.1028759f,
  +0.1291969f, +0.5172836f, -0.3638706f, +0.1008291f, +0.0070245f, -0.3475894f, -0.1708052f, -0.0652508f,
  +0.0961027f, +0.2289779f, +0.0235966f, -0.1377447f, +0.0803968f, +0.0673659f, +0.0916715f, +0.0620567f,
  +0.0997932f, +0.2116742f, -0.1973866f, -0.1317607f, +0.0659393f, -0.1460476f, -0.0148052f, +0.1576555f,
  -0.0761343f, +0.3638321f, -0.2743599f, -0.1031859f, -0.2867007f, +0.0081344f, +0.1800399f, -0.0077952f,
  +0.3622061f, +0.0290239f, +0.7391399f, -0.1893718f, +0.0392455f, +0.1305694f, +0.0668807f, -0.0363067f,
  -0.1499137f, -0.3194740f, +0.1487072f, +0.0570810f, -0.1400925f, +0.1588832f, +0.1125023f, -0.2378035f,
  -0.2319120f, -0.3760395f, +0.0448977f, -0.3198964f, +0.1161349f, +0.1946787f, -0.1502483f, -0.0034343f,
  -0.2713464f, +0.1399279f, -0.0717582f, -0.0676462f, -0.0126014f, -0.0212378f, -0.1443112f, +0.0805158f,
  +0.0602824f, +0.0078897f, +0.0453904f, -0.0127452f, +0.0242323f, -0.0934595f, -0.0235944f, -0.3115839f,
  +0.0484212f, +0.0662834f, -0.1128164f, -0.4759417f, +0.0390554f, +0.0221126f, -0.0277559f, -0.1790459f,
  -0.0987117f, -0.2528619f, +0.1464848f, -0.1252749f, -0.1479158f, +0.1198600f, -0.1787192f, -0.1592420f,
  -0.1134045f, +0.0980827f, -0.0630670f, -0.3832262f, +0.0372865f, +0.0172363f, +0.1094680f, +0.2384065f,
  +0.0451636f, +0.1675881f, -0.1894781f, -0.0660745f, -0.0293302f, +0.0643210f, -0.1691983f, -0.4180876f,
  -0.0377857f, +0.1282774f, -0.0898503f, -0.1460236f, -0.1773492f, -0.1411529f, -0.0094806f, -0.0762475f,
  -0.1438979f, -0.0494724f, +0.0652717f, -0.1090804f, +0.0507055f, -0.1515694f, +0.0242072f, +0.2355014f,
  -0.1750099f, -0.0225345f, -0.0515284f, -0.2825419f, -0.0243706f, +0.0241919f, +0.2823347f, -0.1728866f,
  -0.1653042f, +0.1282738f, -0.1780389f, +0.0728722f, +0.0123257f, -0.1409360f, +0.0568199f, -0.0199919f,
  -0.0535452f, +0.2991385f, +0.2076119f, -0.0062648f, -0.0244250f, +0.0981520f, -0.2175691f, +0.1009597f,
  +0.1485428f, +0.0059661f, +0.2643356f, -0.0590778f, -0.2119324f, +0.0453726f, +0.1354057f, -0.0588784f,
  -0.0836832f, +0.1502102f, -0.2017401f, +0.1218451f, -0.0943264f, -0.2983196f, +0.0444155f, -0.2848591f,
  -0.1783068f, -0.0251797f, +0.1237640f, +0.0899745f, -0.1581903f, -0.1786237f, -0.0730197f, -0.1784786f,
  +0.0008203f, +0.0801055f, +0.0753431f, +0.2708533f, +0.0927327f, -0.2605343f, +0.3952492f, +0.2270743f,
  -0.2465233f, -0.1157541f, +0.0268472f, +0.0115024f, -0.0868478f, -0.3459719f, -0.1413717f, +0.0313761f,
  +0.0218218f, +0.0396975f, +0.2118976f, +0.1298575f, +0.1170536f, +0.0203337f, -0.2090151f, +0.4054488f,
  +0.1940785f, +0.0198425f, +0.0088445f, -0.0404999f, -0.0499772f, +0.0422612f, +0.2044266f, +0.1643274f,
  +0.0465930f, +0.2200982f, +0.0234110f, +0.3875522f, -0.0326983f, -0.0048417f, +0.0695542f, -0.2938805f,
  -0.1980949f, +0.3299426f, +0.1040249f, +0.2521045f, -0.0583501f, -0.3073866f, -0.1287998f, +0.1196204f,
  -0.0578219f, +0.0618517f, +0.1415438f, +0.1199044f, -0.1213992f, +0.2595291f, -0.1545706f, +0.0927420f,
  -0.0514320f, -0.0101071f, +0.0248354f, -0.0665401f, -0.1958254f, -0.1281115f, -0.1385602f, +0.0555733f,
  +0.0582593f, -0.0970758f, +0.2013786f, -0.1316749f, +0.1162350f, +0.1848935f, -0.2757761f, +0.2282375f,
  +0.0354191f, +0.2725371f, +0.0719161f, -0.2122018f, +0.1378737f, +0.2976964f, -0.2422777f, -0.0898681f,
  +0.1523086f, +0.1329756f, +0.1565444f, -0.1420205f, +0.1723068f, +0.0502554f, -0.2868165f, +0.0290066f
);

const float biases[4] = float[4](
  +0.0249279f, +0.0187064f, -0.1066447f, +0.0310086f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer9 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0066666f, -0.2120140f, -0.2383602f, -0.0144149f, -0.1454240f, +0.0476885f, +0.0096222f, -0.1525715f,
  -0.1913546f, -0.1817436f, +0.2960440f, -0.2351521f, +0.2468613f, -0.0372480f, -0.3390220f, +0.1084109f,
  +0.1208084f, +0.0749160f, -0.0684103f, +0.0009612f, -0.2989372f, +0.0520095f, -0.0024749f, +0.0775755f,
  -0.0448429f, +0.1347409f, -0.0795876f, -0.3362827f, -0.0187409f, +0.2178197f, +0.3325015f, -0.1934584f,
  +0.2145957f, -0.1979353f, +0.3248531f, +0.2416105f, +0.2695513f, +0.0346086f, -0.0989781f, -0.0839758f,
  +0.0638692f, +0.2239219f, +0.2560798f, +0.1339581f, +0.0890130f, +0.1019318f, -0.1385548f, +0.2688558f,
  -0.0034249f, -0.0183468f, +0.0460309f, -0.3719462f, +0.1037811f, +0.1415739f, -0.4596880f, +0.3377556f,
  +0.0260783f, +0.2263336f, +0.1834738f, +0.2007871f, -0.2342342f, -0.0147787f, -0.3700088f, -0.1045079f,
  +0.1856195f, +0.0592875f, +0.1655304f, -0.0014599f, -0.0050753f, +0.1366093f, +0.2940503f, +0.0716106f,
  -0.0566146f, -0.2843242f, +0.1508347f, -0.0350246f, +0.1144498f, +0.0003486f, -0.1881763f, -0.1426941f,
  -0.1110877f, +0.1727342f, +0.0780923f, -0.1535132f, -0.0921592f, -0.0199695f, +0.0160424f, +0.1824436f,
  +0.0270648f, +0.0643313f, +0.1153038f, +0.1952249f, -0.0182929f, -0.0907486f, -0.1992244f, -0.0448208f,
  +0.0011383f, -0.0085089f, -0.1444237f, +0.0644201f, +0.1158875f, -0.0315806f, -0.0893352f, +0.1907950f,
  -0.1601977f, +0.1939907f, -0.0327978f, -0.1223782f, +0.4147261f, -0.2704082f, -0.2459127f, +0.2898453f,
  -0.0288520f, -0.1471191f, -0.0148846f, -0.1826074f, +0.3008343f, -0.1685468f, -0.2143207f, -0.1647261f,
  +0.1939023f, +0.3443868f, -0.1134487f, -0.1710392f, +0.0613559f, -0.0694501f, +0.2622505f, -0.1058860f,
  +0.0774765f, +0.3402662f, +0.1556371f, -0.1992389f, -0.2611662f, -0.0769435f, -0.0488990f, -0.3132770f,
  +0.1827349f, +0.1533494f, -0.0900434f, +0.0483095f, -0.1325212f, +0.1281201f, +0.1557023f, -0.0371873f,
  -0.0167992f, +0.2302107f, -0.1693412f, +0.0130898f, +0.1148277f, +0.0330826f, +0.0090239f, -0.3153622f,
  +0.0120626f, +0.0501869f, -0.0348476f, +0.0989368f, -0.1525199f, +0.1804050f, -0.0355719f, -0.0497259f,
  -0.1559107f, +0.1145166f, -0.0556947f, -0.1496310f, -0.0613287f, +0.0262288f, +0.0151489f, -0.0155296f,
  +0.1450754f, -0.1721063f, -0.1668619f, -0.0708356f, -0.1860183f, +0.0685183f, +0.2333574f, -0.1884758f,
  +0.2198940f, +0.2288232f, +0.0981023f, -0.0885176f, +0.0143178f, -0.2745049f, -0.1153814f, +0.1557729f,
  -0.0008986f, -0.1285762f, +0.0603103f, -0.1498338f, +0.2725260f, -0.2331311f, +0.2129821f, -0.0133007f,
  -0.1816639f, +0.3554083f, +0.0039738f, -0.0260361f, +0.4271963f, -0.1613317f, -0.1320678f, +0.2829687f,
  +0.3470405f, -0.3504476f, -0.3063575f, +0.0389126f, +0.0153923f, -0.0281205f, +0.4113988f, +0.3373481f,
  -0.1495497f, -0.0242379f, -0.1708938f, +0.0934794f, +0.0314899f, -0.1907011f, +0.0541036f, +0.0218016f,
  +0.2215777f, -0.0958383f, +0.3766091f, -0.1886885f, -0.1785355f, +0.2744369f, -0.3263644f, -0.0727404f,
  -0.0123559f, -0.1995281f, -0.0494689f, -0.1162104f, +0.1053518f, -0.0899587f, +0.2314782f, -0.2962948f,
  -0.2136445f, +0.1395879f, +0.0611884f, -0.0714514f, -0.0075147f, +0.0695638f, -0.1868605f, -0.2414737f,
  +0.0919266f, -0.2617137f, -0.1817865f, -0.2320877f, +0.0844913f, +0.1015412f, +0.0522261f, +0.1477154f,
  +0.1020474f, -0.2648340f, -0.2082165f, -0.4340685f, +0.2395705f, +0.1475113f, -0.0420761f, -0.2879893f,
  +0.0495871f, -0.0797327f, -0.5153127f, -0.0039165f, -0.0909541f, +0.4416247f, +0.1915821f, +0.0693445f,
  +0.0209207f, +0.1057654f, -0.1228216f, -0.0872837f, +0.0761021f, +0.0255562f, +0.0308897f, -0.0587422f,
  -0.0498828f, +0.0759824f, -0.0717740f, -0.0583585f, +0.0841308f, +0.2350190f, +0.1317853f, -0.2729157f,
  +0.0988372f, +0.1687068f, +0.1164793f, +0.1067284f, -0.0147446f, +0.0890197f, +0.0117516f, +0.0959555f
);

const float biases[4] = float[4](
  +0.0553489f, +0.0673819f, -0.0261359f, +0.0155137f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer10 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.4908587f, +0.2248543f, +0.1622920f, +0.1631844f, -0.0071415f, -0.0780912f, +0.0676780f, +0.0690949f,
  -0.3290815f, +0.1041285f, +0.1737567f, +0.0715978f, -0.1398559f, +0.1223895f, +0.0515129f, +0.2374008f,
  -0.1247857f, +0.1258138f, -0.1727287f, -0.1341307f, +0.1405910f, +0.5212502f, -0.0876922f, +0.0966980f,
  -0.3876172f, +0.2681260f, -0.0805634f, +0.4005831f, -0.2812014f, -0.2893395f, +0.0941937f, +0.2481334f,
  -0.3743062f, -0.4427987f, +0.2023855f, +0.1194099f, -0.0961682f, +0.1520942f, -0.0249389f, -0.1647249f,
  -0.1344888f, +0.1677837f, -0.0866016f, -0.0448169f, +0.0512106f, -0.0792807f, +0.2636089f, +0.0690259f,
  -0.2376933f, +0.1305556f, +0.0742743f, +0.0982264f, -0.2147105f, -0.1581552f, -0.1138219f, +0.0875627f,
  -0.2886145f, -0.1889557f, -0.2262556f, -0.2671627f, +0.3363092f, +0.2426377f, +0.2514274f, -0.4232218f,
  -0.2056396f, +0.3128237f, -0.2422667f, +0.1242082f, -0.0077804f, +0.1613572f, -0.0961111f, +0.1604089f,
  -0.2542330f, +0.0147130f, -0.1067800f, +0.0815062f, -0.0925628f, +0.1758522f, -0.1724724f, -0.1925860f,
  -0.1997036f, +0.1671573f, -0.1699756f, -0.1675585f, -0.1008347f, +0.3323134f, +0.0305194f, -0.1303898f,
  -0.1056473f, -0.0706035f, -0.2581240f, -0.0030215f, +0.0173807f, +0.3857266f, -0.1351366f, +0.0050667f,
  +0.3869226f, -0.2484228f, -0.2463819f, -0.0943156f, -0.1200094f, -0.0789139f, -0.1211581f, +0.2805684f,
  +0.2010293f, -0.0229026f, +0.0454577f, -0.2516715f, -0.0516795f, -0.0144118f, +0.0042308f, -0.0754626f,
  +0.1920718f, +0.0551250f, +0.1083138f, -0.0000312f, -0.0235870f, +0.0302161f, -0.0386097f, +0.0817070f,
  +0.0176186f, +0.2145730f, -0.0581314f, -0.1293219f, +0.1582706f, +0.0336251f, +0.0254349f, -0.1082811f,
  -0.0981928f, +0.0866674f, +0.1335329f, +0.0956305f, -0.2080123f, +0.2856680f, +0.0681032f, -0.2084324f,
  +0.1298579f, +0.0800214f, +0.0902798f, -0.2198391f, +0.0196962f, -0.0757136f, -0.0609812f, +0.0410480f,
  -0.3823274f, -0.1417977f, -0.1101956f, +0.2169960f, +0.2422094f, +0.1783664f, -0.0379746f, +0.3483239f,
  -0.1002968f, +0.4058298f, -0.0741672f, -0.0089944f, -0.2274414f, +0.2229325f, +0.1365291f, +0.1235599f,
  -0.1446896f, -0.2612432f, +0.1223663f, +0.0070705f, -0.4804707f, +0.2473630f, +0.0458316f, -0.0248120f,
  -0.0768919f, -0.0656650f, -0.2459918f, -0.0838091f, -0.1575812f, -0.0978876f, +0.0173328f, +0.0895031f,
  +0.0222376f, +0.1445040f, -0.0352045f, -0.1412257f, +0.0950256f, -0.0559172f, -0.1388980f, +0.3135870f,
  +0.0074598f, -0.1024249f, -0.2466825f, +0.0096852f, -0.0677252f, -0.1204259f, -0.0787360f, -0.1799597f,
  +0.1747322f, -0.4215198f, +0.1334692f, -0.2829076f, -0.0506720f, +0.0610140f, -0.0499771f, +0.2096837f,
  +0.3754455f, -0.1269259f, -0.0641428f, -0.0046850f, -0.0628688f, -0.2202116f, -0.0462800f, +0.0076568f,
  +0.1435872f, +0.0109694f, +0.1242934f, -0.0526170f, -0.0638863f, -0.0794769f, +0.1178371f, -0.3141134f,
  +0.1873299f, -0.0754686f, -0.6303031f, +0.0977257f, -0.1051191f, +0.0117087f, -0.0259360f, -0.0607073f,
  -0.0865187f, +0.3337528f, -0.0838711f, +0.3025557f, +0.0102212f, +0.1029798f, +0.0634129f, +0.2604138f,
  -0.2778172f, -0.1244890f, -0.1288670f, +0.0032653f, +0.1229395f, +0.3432524f, -0.1471847f, -0.0149608f,
  +0.0586616f, +0.1146558f, -0.0240812f, -0.0744922f, +0.1247495f, -0.0067861f, +0.1652836f, +0.1449623f,
  -0.0837363f, +0.0781477f, +0.0353631f, -0.1007612f, +0.1731233f, -0.3856647f, -0.0518167f, +0.0081533f,
  -0.0843563f, +0.2556432f, +0.0136481f, -0.3495915f, -0.0973245f, -0.0873006f, +0.0551299f, -0.1288268f,
  -0.3319554f, +0.0522475f, +0.2335290f, -0.1152559f, -0.1796189f, +0.1020878f, -0.0371423f, -0.1103974f,
  -0.2645902f, +0.1428222f, -0.1087312f, +0.0346684f, +0.2299501f, +0.1764555f, +0.0420405f, +0.2537658f,
  -0.0306574f, +0.0216998f, +0.2610021f, -0.2462980f, -0.1805229f, +0.0596892f, +0.0162156f, -0.2119232f
);

const float biases[4] = float[4](
  +0.0131536f, +0.0396728f, +0.0238603f, -0.0274606f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer10 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0126229f, +0.0950905f, -0.1639349f, +0.0000700f, -0.2154245f, +0.0081144f, -0.1741878f, -0.0018137f,
  +0.2126598f, +0.0272462f, -0.0700507f, -0.1596782f, -0.1033522f, +0.1440085f, -0.0492642f, +0.1213919f,
  +0.0832469f, +0.0752001f, -0.1844764f, +0.0487732f, -0.0544052f, -0.1743086f, -0.0712278f, +0.1184336f,
  +0.0355076f, -0.0114332f, +0.1886068f, -0.1105349f, -0.2079680f, -0.0613317f, -0.0633236f, +0.0268075f,
  +0.0573044f, +0.0543108f, -0.1385178f, +0.1207740f, +0.0429889f, +0.0226352f, -0.1726325f, -0.2039767f,
  +0.0471130f, +0.0009975f, +0.1381295f, -0.0108450f, -0.0604264f, -0.3435819f, +0.0549189f, +0.0213193f,
  +0.2697232f, +0.0582778f, +0.2667426f, -0.1483042f, -0.2215023f, +0.0889227f, -0.0404790f, -0.1840277f,
  +0.2696827f, +0.0778961f, -0.0773398f, +0.1060217f, -0.0913868f, -0.0042155f, -0.2886340f, -0.2550090f,
  +0.1475205f, +0.0292776f, -0.2242780f, +0.1589669f, +0.0967079f, -0.1606352f, -0.0447147f, -0.0309255f,
  +0.2984388f, +0.3528752f, +0.2942854f, -0.0625737f, +0.0457897f, +0.0315124f, +0.0972679f, -0.1231534f,
  +0.2420748f, -0.2966433f, -0.1965523f, -0.3701915f, +0.0123535f, +0.1404873f, +0.1030765f, -0.1602582f,
  +0.1065133f, -0.0805282f, +0.1726315f, -0.3522091f, +0.0496778f, +0.0092232f, -0.2191136f, +0.2800744f,
  +0.1021101f, -0.2435624f, +0.3039280f, +0.0527873f, -0.3210216f, +0.3197682f, +0.1084603f, -0.2423984f,
  +0.0507869f, +0.0569537f, -0.0300272f, +0.1596153f, -0.3314968f, +0.3453579f, -0.3481581f, -0.0725838f,
  -0.0038512f, -0.2698500f, +0.1596145f, +0.1487165f, -0.0125783f, +0.3145553f, +0.0382163f, -0.3124669f,
  +0.0758632f, -0.0848833f, +0.3946622f, +0.1205314f, -0.1802849f, +0.0149444f, +0.1378447f, +0.0323888f,
  +0.1729006f, -0.2427503f, -0.1705819f, +0.1409711f, +0.1035989f, -0.0117084f, -0.0417032f, +0.1431568f,
  +0.1173246f, +0.1123151f, -0.0954159f, +0.1909533f, +0.0836822f, +0.0191258f, -0.0795488f, +0.1337738f,
  +0.0451865f, +0.1278046f, +0.1208120f, +0.0965868f, +0.0822470f, +0.0055668f, +0.2601827f, -0.0115423f,
  -0.1171804f, -0.0170517f, -0.1123869f, -0.0550730f, +0.1333748f, +0.1776296f, +0.1000147f, +0.0571794f,
  -0.0608059f, -0.1280846f, +0.1723760f, +0.0325015f, -0.2003339f, -0.1551919f, -0.0868279f, +0.0384658f,
  -0.0525294f, +0.0695063f, -0.0394285f, -0.1401979f, +0.1663941f, +0.0932002f, -0.2759682f, -0.1921094f,
  +0.0769413f, -0.1242069f, +0.2261793f, +0.1327510f, +0.1627684f, -0.0941484f, -0.0740772f, +0.0245226f,
  +0.0926057f, -0.0496622f, -0.0388573f, +0.2573638f, -0.1078737f, -0.1810695f, -0.0507629f, -0.1594668f,
  +0.1476690f, +0.0383520f, -0.0073794f, +0.0925436f, -0.1249063f, -0.0591974f, -0.1630522f, +0.2284985f,
  +0.1413789f, +0.2234906f, -0.3616698f, +0.1819659f, -0.0098403f, -0.2201319f, -0.0482880f, -0.0157121f,
  +0.0938740f, -0.0334396f, -0.1553887f, +0.2580619f, -0.2977168f, -0.0630570f, -0.1786706f, -0.1500387f,
  -0.5613933f, -0.1202820f, -0.1814236f, -0.0987154f, +0.0567344f, +0.1913722f, -0.1729188f, -0.0727427f,
  -0.3556577f, +0.0369773f, -0.1377463f, -0.0822029f, -0.3634591f, +0.3714843f, -0.2330192f, -0.0017081f,
  -0.4018024f, +0.1027634f, -0.2063906f, -0.0564266f, +0.0408205f, +0.3974290f, +0.2437125f, -0.0476314f,
  +0.1073981f, +0.0372797f, +0.6672027f, -0.1585634f, +0.0308026f, +0.1673732f, +0.1699267f, -0.1430781f,
  -0.1203838f, +0.0869806f, -0.1157500f, -0.4968280f, +0.1048027f, -0.1005008f, +0.2310725f, +0.0028422f,
  -0.1402310f, +0.1225568f, -0.0103478f, -0.0625803f, +0.0790742f, -0.1097499f, +0.1417153f, -0.0392564f,
  -0.1127998f, -0.2113100f, -0.0154874f, -0.1638844f, -0.1006366f, -0.0760622f, -0.0525932f, -0.0861362f,
  -0.2040522f, -0.0446031f, -0.0311436f, +0.1182221f, +0.0847540f, +0.0981414f, -0.0054573f, +0.3236972f,
  -0.0161718f, +0.1722967f, -0.1565228f, -0.0229811f, +0.0740004f, -0.0411988f, +0.1687268f, +0.1045068f
);

const float biases[4] = float[4](
  -0.0041257f, +0.0135617f, +0.0463463f, -0.0309687f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer11 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0335651f, -0.0963401f, +0.0071429f, +0.0414589f, -0.0860968f, +0.0681619f, -0.0547612f, -0.1718401f,
  -0.0210285f, -0.0780373f, -0.1726759f, -0.1446447f, -0.0816263f, +0.1086209f, +0.1783141f, +0.0471338f,
  +0.1274877f, +0.1734632f, -0.1784595f, -0.0847167f, -0.0622645f, -0.0634648f, -0.0511921f, +0.0454310f,
  +0.1016991f, +0.1793452f, +0.0511247f, -0.2355035f, -0.1229965f, -0.0699982f, +0.0082066f, +0.3318386f,
  -0.1180174f, +0.1046295f, +0.0132700f, -0.1502435f, +0.1249473f, +0.1195183f, +0.1204090f, +0.1192922f,
  +0.1083761f, -0.0197834f, +0.1296918f, +0.1104137f, +0.1882076f, +0.0966928f, -0.3084133f, -0.0814086f,
  -0.3951276f, +0.0110170f, +0.1239782f, +0.1037819f, +0.0127789f, +0.0911572f, -0.1605835f, +0.1092586f,
  +0.0332233f, -0.1336490f, +0.1708810f, -0.3383887f, +0.0521835f, +0.0664112f, -0.0921221f, +0.1158784f,
  +0.1885987f, -0.1197440f, -0.1068088f, -0.0207528f, +0.0348271f, +0.1390283f, -0.0416330f, -0.1031109f,
  +0.4273366f, -0.0547215f, -0.0863966f, +0.1398333f, -0.3064372f, -0.0684074f, -0.0844667f, -0.1578868f,
  -0.0105691f, +0.1014436f, +0.0654876f, -0.1454262f, +0.0767709f, -0.1500818f, +0.1774075f, +0.0944600f,
  -0.1361192f, -0.1044929f, +0.0283588f, +0.0460365f, +0.1233117f, -0.0161672f, -0.0262573f, -0.0895559f,
  +0.2418574f, -0.1828352f, -0.1231550f, -0.2677121f, -0.2556358f, +0.0739564f, -0.2798757f, -0.0682949f,
  +0.2314493f, +0.0798865f, +0.1895076f, -0.1985712f, -0.5003750f, -0.0673411f, +0.2723624f, +0.0350184f,
  -0.2035567f, +0.0212558f, -0.0002413f, +0.0659430f, -0.2371348f, +0.0173672f, -0.0135802f, -0.1841897f,
  +0.6117076f, +0.1370254f, -0.3634000f, -0.0015154f, +0.4355005f, +0.0003618f, -0.7790079f, -0.0008973f,
  +0.1756696f, -0.0911167f, +0.2040508f, +0.0155091f, -0.1404440f, +0.1034496f, +0.4387654f, -0.0454908f,
  +0.0211137f, -0.0818520f, +0.0262209f, -0.0828606f, -0.0933812f, -0.2486747f, +0.1057456f, +0.1238283f,
  -0.1460608f, -0.3254279f, -0.0584775f, +0.0192966f, -0.1468479f, -0.1066206f, -0.0933328f, -0.0107521f,
  +0.0098613f, -0.1943167f, +0.1641867f, -0.0033197f, -0.3250550f, -0.0332072f, -0.2387687f, +0.2944579f,
  -0.0050843f, +0.1402757f, +0.0907300f, -0.1321469f, +0.0674268f, +0.0040938f, -0.0457234f, +0.0282405f,
  -0.2504523f, +0.1814180f, -0.3044983f, -0.1505818f, +0.2500443f, -0.0861380f, +0.0153821f, +0.0683783f,
  -0.0905949f, -0.1912778f, +0.1034562f, +0.3752998f, +0.0293604f, +0.1127987f, +0.0336671f, +0.5477493f,
  +0.1660570f, -0.0215512f, -0.1936572f, +0.1064243f, +0.0194173f, -0.1696327f, +0.4415251f, -0.1417142f,
  -0.1171212f, +0.1987472f, +0.0489087f, -0.0877418f, -0.2222215f, -0.0876810f, -0.0793584f, +0.3342242f,
  +0.1746353f, +0.0506774f, -0.1645415f, +0.0927335f, -0.2095650f, -0.2123406f, +0.2002715f, +0.3920630f,
  -0.1044475f, -0.2422116f, -0.0973221f, +0.0783158f, -0.1196653f, -0.0157960f, +0.1069399f, -0.0775562f,
  +0.1725251f, -0.0321380f, -0.2084590f, -0.0955793f, +0.0906014f, -0.0209276f, +0.0389895f, -0.1463715f,
  -0.0675828f, +0.0139662f, -0.1484276f, +0.1871676f, -0.3045676f, -0.2785344f, -0.0651711f, +0.3047700f,
  +0.2899507f, +0.2400762f, +0.1115553f, +0.0512488f, -0.3051510f, +0.0476245f, -0.1310316f, -0.3693076f,
  +0.2323315f, -0.2118599f, -0.2105578f, +0.2591273f, -0.2848765f, +0.0694576f, -0.0806152f, -0.0583650f,
  -0.1263193f, +0.1200986f, -0.3249613f, -0.1815053f, +0.4362354f, -0.0138929f, +0.0828518f, +0.1732355f,
  +0.1469368f, +0.0089490f, +0.4817921f, -0.0121243f, +0.0197273f, +0.0323099f, -0.0040235f, +0.0824175f,
  +0.0174256f, +0.0781840f, -0.2503698f, -0.0448752f, +0.0449605f, +0.0422064f, +0.1668813f, +0.0860517f,
  -0.0356610f, -0.1954471f, -0.1486531f, +0.3725457f, -0.1469471f, -0.1281202f, +0.1683553f, +0.3799168f,
  -0.0244796f, -0.1144882f, +0.1468231f, -0.2305465f, +0.0618854f, +0.0450192f, +0.0709420f, +0.1265634f
);

const float biases[4] = float[4](
  +0.0938679f, -0.0193904f, +0.0056519f, -0.0415286f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer11 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1235238f, -0.2707452f, -0.0683120f, +0.0998938f, +0.2363349f, +0.0144493f, +0.1619182f, +0.0482276f,
  -0.1574816f, -0.0579909f, -0.0596763f, +0.1010308f, +0.1931153f, +0.1508965f, +0.1272866f, -0.0161718f,
  -0.2389141f, +0.0627460f, +0.0166801f, +0.0814122f, +0.2822111f, +0.0762633f, -0.0078632f, -0.0102847f,
  -0.0839732f, -0.0448707f, -0.2106189f, +0.2271592f, -0.1299035f, +0.0332771f, -0.3727577f, +0.0971350f,
  -0.2114222f, +0.1230379f, -0.0797076f, +0.0360650f, -0.1525484f, +0.2386727f, -0.0057528f, +0.0394780f,
  +0.1924158f, -0.0937040f, +0.2834136f, +0.0100219f, +0.3043343f, +0.1000942f, -0.2986986f, +0.2498302f,
  +0.0405262f, -0.1644428f, +0.1252684f, -0.1693900f, +0.0943003f, +0.1572197f, -0.1107102f, +0.0765814f,
  +0.2746990f, -0.0968165f, -0.0894209f, +0.0112537f, -0.1164457f, +0.0263690f, +0.1073197f, +0.0884599f,
  +0.0334919f, -0.1203227f, +0.1463922f, +0.0724284f, -0.0605413f, +0.1123648f, -0.1385390f, -0.2403918f,
  +0.0169485f, +0.0768720f, +0.0312758f, +0.1301408f, +0.2107110f, -0.1336352f, +0.2676267f, -0.2237872f,
  -0.1413913f, -0.2630834f, +0.1990606f, +0.1134159f, +0.2389771f, +0.2550566f, -0.0331570f, -0.2406788f,
  +0.0838711f, +0.0225005f, -0.1282079f, +0.2204459f, -0.3307643f, +0.3330870f, +0.1329137f, -0.2446043f,
  +0.1598204f, -0.0096649f, +0.0667245f, +0.0763146f, +0.0170630f, -0.0178000f, +0.0976754f, -0.1528187f,
  -0.0501821f, -0.1137368f, +0.0413010f, +0.3363248f, -0.0002826f, -0.0357830f, -0.1017018f, +0.1759492f,
  -0.0870538f, +0.1947957f, -0.6106931f, -0.1885899f, +0.4351143f, -0.1076758f, -0.0568829f, +0.1829429f,
  +0.2247161f, +0.0221217f, +0.0041260f, +0.0441443f, +0.1227448f, +0.2927964f, -0.0569475f, -0.2061983f,
  -0.1914870f, -0.0071483f, +0.0904794f, -0.1932044f, +0.0839968f, +0.2309083f, +0.0238195f, -0.0664061f,
  -0.0933502f, +0.1539905f, -0.1141700f, -0.0201570f, +0.0668912f, +0.0465592f, -0.0447552f, -0.1341791f,
  +0.0031748f, -0.0117190f, +0.0136091f, +0.0216656f, +0.0428728f, +0.2887307f, -0.0450365f, -0.1502146f,
  +0.1226180f, +0.1866324f, -0.4833524f, -0.0368995f, +0.3338437f, -0.4458593f, -0.1769388f, +0.7552814f,
  -0.0425512f, +0.0001951f, -0.0049445f, +0.0424707f, +0.0238967f, +0.0252272f, -0.1511354f, -0.2077130f,
  +0.0122771f, +0.2065749f, +0.0733458f, +0.0958690f, +0.0834666f, +0.0782216f, +0.1534563f, -0.4168105f,
  -0.1254315f, -0.0830124f, +0.1055076f, -0.0107845f, -0.1249872f, -0.1797373f, -0.1251720f, +0.1120817f,
  +0.1002581f, -0.1232914f, +0.2747051f, +0.0521327f, +0.0894055f, -0.3661834f, +0.1326595f, +0.0502357f,
  +0.1238984f, +0.1911250f, -0.3275555f, +0.1947898f, -0.4118798f, +0.0827553f, -0.1521658f, -0.3118451f,
  -0.0494643f, -0.0805970f, +0.1055776f, +0.0526369f, +0.1906292f, +0.0608784f, +0.0304518f, -0.1852010f,
  -0.0239552f, +0.1193688f, +0.2566455f, +0.1047221f, -0.0427816f, -0.3450214f, -0.0572902f, +0.1072801f,
  +0.0228736f, +0.1830724f, +0.0411074f, +0.2082451f, -0.0300970f, +0.0900877f, -0.0008249f, -0.1020010f,
  +0.3557714f, -0.2383581f, +0.0229436f, +0.1155464f, +0.1177917f, +0.0563617f, -0.0495908f, +0.1469259f,
  +0.0705229f, +0.0283222f, +0.1210800f, +0.1253402f, -0.2557218f, -0.0688346f, -0.0917120f, -0.1680940f,
  +0.1756660f, -0.1124865f, +0.0731442f, -0.3832855f, +0.0569341f, -0.1090510f, -0.1811836f, -0.0788390f,
  -0.1207387f, -0.0204781f, -0.2891181f, +0.1682269f, +0.0570543f, -0.0849850f, +0.0463299f, +0.1868979f,
  -0.0204387f, -0.0538672f, -0.2405261f, +0.2100309f, -0.1172067f, -0.0426554f, -0.0942564f, +0.4386148f,
  +0.0522241f, -0.0596455f, -0.0414205f, +0.2272371f, +0.0533337f, +0.1119154f, -0.0802819f, +0.0030900f,
  -0.1957972f, -0.1745798f, -0.0169899f, -0.3380161f, +0.1270507f, -0.1619387f, -0.0219951f, +0.0014271f,
  +0.0897834f, +0.0067344f, -0.1226867f, -0.1328431f, +0.0444112f, -0.1050772f, +0.0778214f, -0.0251380f
);

const float biases[4] = float[4](
  +0.1665035f, +0.0297367f, +0.0232374f, -0.4642557f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer12 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0619230f, -0.1724189f, -0.0815656f, -0.0430193f, -0.0096179f, -0.1837869f, -0.1231755f, +0.3625476f,
  +0.4461399f, -0.3420720f, +0.2363801f, +0.4428512f, +0.0142003f, -0.0178727f, -0.0855104f, -0.2397516f,
  -0.0641074f, -0.5444527f, +0.1240089f, -0.2911771f, +0.0988400f, -0.2120070f, -0.1214757f, +0.3710949f,
  +0.0171516f, -0.1817340f, +0.1218309f, +0.0959515f, -0.0277232f, -0.0940966f, +0.1781476f, -0.6558607f,
  -0.3162745f, -0.2933659f, +0.2534041f, -0.0489209f, -0.0679475f, -0.2043390f, +0.2469755f, -0.2198652f,
  -0.0472768f, -0.0187499f, -0.0429466f, -0.1881147f, -0.2207218f, -0.1729202f, -0.0571057f, -0.4569536f,
  -0.0644966f, -0.0878197f, +0.1103118f, -0.2880038f, +0.0548777f, -0.2114999f, -0.1647298f, -0.1512536f,
  -0.1583961f, -0.2789107f, +0.1946628f, +0.0057670f, -0.0472373f, -0.6464068f, -0.3102664f, +0.0319098f,
  -0.2042951f, -0.0881568f, +0.1182634f, -0.3070199f, -0.1421075f, -0.1830334f, -0.1455814f, -0.0881605f,
  -0.1454407f, -0.0509582f, -0.0115759f, -0.1826074f, -0.2089588f, -0.0827100f, -0.0346854f, -0.0082696f,
  +0.3211716f, -0.0448843f, +0.0300428f, +0.0215975f, -0.1056894f, +0.1086328f, -0.0317820f, +0.1212018f,
  +0.3176374f, -0.0201016f, +0.3004610f, +0.0613573f, +0.2567128f, +0.0683995f, -0.0172447f, -0.1235854f,
  +0.0874441f, +0.0885047f, -0.0555221f, +0.1228800f, -0.0155748f, +0.0484506f, +0.0563212f, -0.2507130f,
  +0.0926892f, +0.3925471f, -0.2996629f, -0.3344193f, +0.3315702f, -0.0152918f, +0.0496564f, +0.2604870f,
  +0.0515265f, +0.3550048f, -0.1538677f, +0.1968342f, -0.1343543f, +0.0041880f, -0.0234095f, +0.1639177f,
  -0.0377048f, +0.0778568f, -0.0564288f, -0.0489604f, -0.0496528f, -0.1041433f, -0.0123203f, -0.2511015f,
  +0.2813453f, +0.2951739f, -0.1096478f, +0.0582758f, +0.0988406f, +0.0607008f, -0.1854075f, +0.0901795f,
  -0.1478954f, +0.1085227f, -0.1057959f, +0.2091569f, +0.0297216f, +0.0604461f, +0.2373872f, -0.0498863f,
  -0.0354946f, -0.1441328f, +0.1754405f, -0.0885148f, +0.0546621f, +0.0791018f, -0.0538898f, -0.4260716f,
  +0.2718942f, -0.2020260f, -0.0550740f, +0.1277804f, -0.1100436f, -0.1492472f, +0.0695466f, -0.1822506f,
  -0.0192602f, +0.3829131f, +0.0342533f, +0.0315859f, -0.1114597f, -0.0229619f, +0.0684420f, -0.0762090f,
  +0.0494182f, -0.1441918f, -0.0691546f, -0.0100541f, +0.1786793f, -0.0780910f, -0.2038114f, +0.1391221f,
  +0.1014304f, -0.5848953f, +0.1752298f, -0.0307053f, -0.2679701f, -0.0311340f, +0.2875997f, -0.2870341f,
  -0.1094000f, +0.2356988f, -0.1258083f, +0.1094468f, +0.2179728f, +0.1427579f, +0.0409344f, +0.2262244f,
  +0.0199894f, +0.0461139f, -0.3085826f, -0.1082002f, +0.1519285f, +0.2701159f, -0.0293634f, +0.1431498f,
  +0.1987891f, -0.1499732f, -0.2826746f, +0.3300895f, -0.1454709f, -0.0023619f, +0.2498766f, +0.1873360f,
  +0.0706537f, -0.1382899f, -0.2780774f, -0.0460052f, +0.0454890f, -0.0402400f, +0.2127200f, -0.0743368f,
  +0.1874079f, -0.0372264f, -0.0111657f, -0.0569750f, +0.1139442f, -0.0272646f, +0.0138044f, -0.4077212f,
  -0.0657301f, +0.1999610f, -0.1310548f, +0.2220059f, +0.2149452f, -0.1216709f, -0.2774870f, -0.0257171f,
  +0.2645139f, -0.1277043f, +0.0830179f, -0.1058864f, -0.0099569f, -0.1517213f, -0.1089792f, +0.1679429f,
  -0.0570521f, -0.0961914f, -0.0529691f, -0.2170228f, -0.0674136f, -0.4373342f, -0.0820482f, -0.2723931f,
  -0.0233901f, +0.6816528f, -0.1560972f, -0.1265608f, +0.1307214f, -0.0732407f, -0.4676516f, -0.2055171f,
  -0.2050840f, -0.1301139f, +0.1345557f, -0.1482207f, -0.2681268f, -0.1925903f, -0.1294508f, +0.1708226f,
  +0.0655672f, +0.0665293f, +0.1379892f, -0.4635180f, -0.2012804f, -0.3356526f, -0.1320088f, -0.1990913f,
  -0.2354190f, -0.0132757f, -0.2477672f, -0.1555292f, -0.1328876f, -0.2355070f, -0.2522976f, -0.1060747f,
  +0.2144305f, -0.0171140f, +0.0222871f, -0.1041229f, -0.0811828f, -0.2695738f, -0.0871736f, -0.1078208f
);

const float biases[4] = float[4](
  +0.0101476f, +0.0056547f, -0.0558516f, -0.0234195f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer12 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1219128f, -0.2330857f, +0.3507840f, -0.2518552f, +0.0638644f, -0.3794686f, -0.0525793f, -0.0585679f,
  -0.3135900f, +0.0883145f, -0.0297996f, -0.0391965f, +0.0480662f, -0.3072543f, -0.1692309f, +0.2046995f,
  -0.0958152f, -0.0301510f, +0.2160209f, -0.0181248f, -0.0888230f, -0.1719052f, -0.1893004f, +0.0696905f,
  -0.1442376f, +0.2546211f, +0.0845251f, -0.2122896f, +0.0775050f, -0.3861252f, +0.0166564f, -0.1212166f,
  -0.0798564f, +0.5159277f, +0.0032144f, -0.2854547f, -0.2073721f, -0.0403650f, -0.2162244f, -0.6670915f,
  +0.0120965f, +0.2069543f, -0.5841257f, +0.0297677f, +0.0989735f, -0.1819640f, -0.1178824f, +0.0220448f,
  +0.0517196f, +0.0022328f, -0.0143357f, +0.2313769f, +0.1662613f, -0.2802205f, +0.0071817f, -0.0881212f,
  +0.2099609f, +0.0829701f, -0.2149430f, -0.0860842f, +0.0518444f, -0.1141140f, -0.2534869f, -0.0906850f,
  +0.1856878f, -0.1108132f, +0.1717470f, -0.0764164f, -0.0404573f, -0.0880116f, -0.1538258f, +0.1407703f,
  +0.1192764f, -0.0655851f, +0.3879876f, -0.0208824f, -0.0256647f, +0.0868079f, +0.1229657f, -0.0404120f,
  -0.1328092f, -0.2322075f, +0.1588606f, -0.1585129f, +0.0691961f, +0.2269854f, +0.2473884f, -0.1270003f,
  +0.2218302f, -0.1582408f, +0.1652985f, +0.0624455f, +0.0747997f, -0.0663442f, +0.1018703f, +0.3160708f,
  +0.0846583f, +0.3008232f, -0.2744898f, +0.2024967f, -0.0339884f, -0.2905617f, +0.2202211f, +0.4650381f,
  +0.2076836f, +0.5277010f, +0.3751058f, -0.1906875f, +0.1520488f, +0.2615253f, +0.2338458f, +0.4414821f,
  -0.0164064f, -0.0874549f, +0.1976175f, +0.0172745f, +0.2850246f, +0.0701861f, +0.0179068f, +0.1278229f,
  +0.0471769f, -0.0611038f, +0.0752477f, +0.0276006f, +0.0201339f, -0.1810216f, +0.3348908f, +0.2886598f,
  -0.0425995f, -0.1108405f, +0.1783790f, -0.0211494f, -0.4111204f, +0.0673538f, +0.3180971f, -0.2867877f,
  +0.1728000f, +0.0370193f, +0.1096080f, -0.1829356f, -0.1815847f, -0.0205239f, +0.0333581f, +0.0369082f,
  +0.0053693f, +0.1448096f, +0.0844682f, -0.0295796f, -0.0834809f, +0.0552473f, -0.0570519f, +0.0192425f,
  -0.2514589f, +0.3629269f, +0.1045890f, -0.1089515f, +0.1431053f, -0.0295166f, +0.1471081f, -0.1265950f,
  +0.1352773f, -0.4955529f, -0.1879481f, -0.1455336f, -0.0520109f, -0.1020127f, +0.2112163f, +0.0065498f,
  -0.1149499f, -0.2863466f, +0.1051106f, -0.0636914f, +0.2238347f, +0.0089796f, -0.0373710f, +0.4192083f,
  -0.1356620f, +0.4879858f, -0.0253608f, -0.0806448f, -0.0449427f, +0.0044774f, -0.0649887f, +0.0725140f,
  -0.0545931f, -0.2878612f, +0.2585669f, +0.0407858f, +0.1850976f, -0.1303886f, -0.0549981f, +0.0637969f,
  +0.1111642f, -0.0675618f, +0.1114778f, +0.1567571f, -0.2116808f, -0.0544470f, +0.0607123f, +0.0254863f,
  +0.1137808f, -0.0968436f, +0.1282352f, -0.0214276f, -0.0945505f, -0.2096169f, +0.0847306f, -0.1124536f,
  +0.0704210f, +0.0460329f, +0.2522039f, +0.0140628f, -0.1066155f, +0.0153124f, -0.0128748f, -0.0559962f,
  +0.0789173f, +0.1400961f, +0.0639388f, -0.0443752f, +0.0149040f, +0.3548768f, -0.0189447f, -0.1236350f,
  +0.0470243f, +0.2181378f, -0.3409963f, +0.0126676f, +0.0711391f, -0.3754809f, +0.0760410f, +0.2088021f,
  +0.2219590f, +0.3424184f, -0.2111145f, +0.0214540f, -0.0350837f, -0.0001288f, -0.1295746f, -0.0042993f,
  -0.0366163f, +0.2661238f, -0.1767460f, -0.0024477f, -0.2116770f, +0.4215457f, -0.0392823f, +0.1251886f,
  +0.0551446f, +0.1734929f, -0.2331612f, +0.0047290f, +0.0748521f, -0.1234181f, +0.2701376f, -0.0172644f,
  +0.0296380f, -0.2963423f, -0.1760372f, +0.0654358f, -0.0276954f, +0.0344094f, -0.0695545f, +0.0599688f,
  -0.1389649f, -0.1041158f, -0.0684967f, +0.1705980f, +0.0649209f, -0.1425203f, -0.0514290f, -0.2141130f,
  -0.2942223f, +0.1719107f, -0.1011365f, -0.0830830f, +0.0464057f, -0.0770008f, +0.2078001f, -0.2741151f,
  +0.0507778f, +0.3297862f, -0.1024166f, +0.2631339f, +0.0510701f, +0.0063507f, +0.2528035f, -0.0168650f
);

const float biases[4] = float[4](
  -0.0570104f, +0.0143712f, +0.0225088f, +0.0645513f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer13 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0043084f, -0.1730143f, -0.0327608f, -0.1705124f, -0.0761138f, +0.2191163f, +0.1001448f, +0.0790862f,
  +0.0532754f, -0.0438639f, -0.6880540f, +0.1638865f, -0.3413788f, -0.1636817f, -0.0193908f, -0.0457290f,
  +0.0851758f, +0.0096541f, +0.0922127f, -0.0403044f, -0.0506117f, -0.0529052f, -0.0404554f, +0.0506319f,
  -0.1340500f, -0.2035726f, -0.0470785f, +0.0543091f, -0.2467347f, +0.0817422f, +0.0389296f, +0.1702856f,
  +0.0243497f, +0.0516667f, -0.4647576f, -0.6206530f, -0.3764552f, +0.3705443f, +0.1118839f, +0.0783656f,
  +0.0046892f, +0.1751446f, +0.3694982f, +0.2030502f, +0.1541821f, -0.1371467f, +0.0069384f, +0.0920250f,
  +0.1100550f, +0.2951735f, +0.0912931f, +0.0995892f, -0.0145581f, +0.1486068f, -0.0743373f, +0.0660459f,
  +0.2644019f, -0.1997292f, -0.0974422f, -0.2459541f, -0.0142331f, +0.0239345f, -0.2150039f, +0.0551695f,
  -0.0110088f, +0.0263982f, +0.2121721f, -0.1265008f, +0.1949067f, +0.1314560f, +0.0254805f, -0.2579796f,
  -0.2608699f, -0.2919059f, -0.1376007f, -0.1983592f, -0.0121430f, +0.5469233f, +0.0337966f, +0.0598164f,
  +0.0796329f, -0.0703118f, +0.0487055f, -0.2827976f, -0.3464397f, +0.0292547f, -0.1909181f, -0.0382257f,
  +0.2715847f, -0.1715640f, -0.1422891f, +0.2054304f, +0.0724059f, +0.2153547f, -0.0323241f, +0.1016524f,
  +0.0438007f, -0.0224221f, +0.1940749f, +0.1396796f, +0.1145151f, +0.0821097f, +0.2973386f, +0.4689650f,
  -0.1939720f, -0.0199120f, +0.0377857f, +0.1072952f, +0.0476078f, +0.0626899f, -0.0545971f, +0.0891224f,
  +0.1112522f, -0.0824869f, +0.1745625f, +0.1042723f, +0.0374180f, -0.0276468f, +0.0911778f, +0.2287127f,
  -0.1564706f, +0.2129687f, -0.0383471f, +0.1492633f, -0.0428444f, +0.1888075f, -0.2229099f, -0.0079451f,
  -0.0144580f, -0.0677472f, +0.0476478f, +0.0490105f, +0.0708092f, -0.0084330f, +0.0619669f, -0.0835013f,
  -0.1476343f, -0.0352009f, +0.1979224f, -0.1217905f, -0.1708094f, +0.1192420f, +0.0093512f, +0.1693659f,
  -0.0043376f, -0.1549251f, +0.1048899f, -0.2501761f, -0.2194378f, -0.1713775f, -0.0652102f, -0.2570284f,
  +0.0011486f, -0.0291771f, +0.5050858f, +0.0731916f, -1.0497317f, +0.0914739f, -0.0269614f, -0.4112964f,
  -0.0005645f, -0.0326153f, +0.0482850f, -0.1195034f, -0.3729220f, -0.1834414f, +0.0906067f, +0.1145903f,
  -0.1809269f, -0.4240072f, -0.4608076f, -0.2876232f, +0.1434178f, -0.2377045f, -0.0317999f, -0.5121584f,
  -0.1257190f, -0.3264293f, -0.3010875f, +0.1713788f, +0.0003260f, -0.1263269f, +0.1556895f, -0.1609760f,
  -0.0996783f, -0.0255679f, +0.0271966f, +0.0958040f, +0.0019441f, -0.2565495f, -0.1276139f, -0.0807869f,
  +0.0942788f, +0.0689553f, -0.0978830f, -0.3534506f, +0.1777801f, +0.0542983f, +0.1243985f, -0.2728033f,
  +0.0904944f, -0.2195503f, -0.3379900f, -0.3768345f, +0.1043810f, +0.1327349f, -0.0141347f, -0.1083153f,
  -0.0829026f, -0.1122802f, -0.1002443f, -0.0441800f, -0.0070307f, -0.0791151f, +0.0798983f, -0.0640561f,
  +0.1969407f, +0.0228195f, -0.3154036f, +0.1539243f, -0.1346892f, -0.0901584f, -0.1359173f, +0.0595015f,
  -0.0588459f, +0.0972598f, -0.2509439f, +0.1238070f, -0.2117042f, -0.0027254f, +0.1632838f, -0.0433311f,
  +0.0999185f, +0.1980132f, -0.3405322f, +0.2816803f, -0.1891603f, -0.0653614f, +0.0940163f, +0.0284346f,
  -0.1223421f, +0.0093019f, +0.0959237f, +0.1758269f, -0.1104290f, -0.1122616f, +0.0406069f, -0.2625699f,
  +0.1193283f, -0.3113246f, +0.1472681f, +0.2081998f, +0.1218581f, +0.1577576f, -0.1426044f, +0.1214298f,
  -0.2573357f, -0.4542014f, -0.2238948f, -0.2484103f, +0.3282788f, -0.0114213f, +0.0580120f, -0.1326844f,
  +0.0838146f, +0.1347583f, -0.0518800f, -0.0946442f, +0.1527733f, +0.0558808f, +0.0982318f, -0.0733525f,
  +0.4159488f, +0.1118356f, +0.0381461f, -0.1621636f, -0.0569370f, +0.0383877f, -0.0789962f, +0.4290253f,
  +0.0114022f, -0.0144087f, +0.2823684f, +0.0654847f, -0.0948327f, +0.2585006f, +0.2271069f, +0.3480927f
);

const float biases[4] = float[4](
  +0.0439368f, +0.1296670f, +0.0690577f, -0.0472060f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer13 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1463851f, -0.1582745f, +0.1275328f, +0.0522300f, +0.1962220f, -0.2105859f, +0.1449740f, +0.2823649f,
  +0.2577132f, +0.2864564f, -0.2566224f, +0.2340500f, +0.0182163f, -0.1656253f, +0.1424380f, -0.4870749f,
  +0.1556341f, -0.2422511f, +0.0032042f, -0.1274747f, +0.0267941f, +0.1130759f, +0.4455341f, -0.0154619f,
  -0.0982063f, -0.1087728f, -0.1312709f, +0.3527072f, -0.2487386f, +0.3845696f, -0.2083350f, +0.0102350f,
  +0.0951590f, -0.0855953f, +0.0626697f, -0.0771281f, +0.0205726f, -0.2154496f, -0.0386263f, +0.0388114f,
  -0.0666839f, +0.0365082f, -0.2673096f, +0.1704894f, +0.1092031f, -0.0340172f, -0.0003946f, -0.1657166f,
  +0.0791728f, -0.0867641f, -0.1138123f, -0.1180956f, -0.1021688f, -0.0730576f, -0.0768286f, +0.0713371f,
  -0.0497344f, -0.2050020f, +0.0938272f, -0.0437292f, +0.0884799f, +0.0185049f, +0.1419161f, +0.1157468f,
  -0.0935169f, +0.0423515f, +0.2486258f, -0.1971456f, +0.0206779f, -0.0080236f, +0.0454283f, -0.1445557f,
  +0.1396749f, -0.0807063f, +0.2686320f, -0.0482722f, -0.0083630f, +0.0368850f, -0.2414731f, -0.1101389f,
  -0.1286005f, -0.1942584f, +0.0868017f, -0.1202877f, -0.3931524f, -0.1554090f, +0.1219393f, +0.0347746f,
  +0.0709963f, +0.0355978f, +0.2579282f, +0.0033341f, -0.1594235f, +0.1780815f, -0.0896357f, -0.0425062f,
  -0.0421404f, +0.0655072f, +0.1258223f, -0.1177712f, +0.0543229f, +0.2782789f, -0.0294986f, -0.1214005f,
  +0.1589383f, -0.1105189f, +0.2769981f, +0.1533397f, +0.1240344f, +0.1174501f, -0.1635082f, -0.0599194f,
  +0.0492955f, +0.0168504f, +0.0617032f, -0.3076694f, -0.1547792f, -0.0455017f, -0.0975345f, -0.0269949f,
  -0.0198636f, -0.2185291f, +0.0967512f, -0.2243897f, +0.0087379f, -0.1178630f, +0.1533885f, +0.1853190f,
  +0.2097153f, +0.2112957f, +0.0492560f, +0.0770366f, +0.0159029f, +0.3259969f, -0.0014134f, +0.0166597f,
  -0.2275759f, -0.1274832f, +0.1426575f, -0.2530101f, +0.0635194f, -0.0471937f, +0.0820986f, +0.1193538f,
  +0.4096483f, -0.0163192f, +0.2523073f, -0.0374433f, -0.2131337f, +0.1927553f, -0.1394946f, +0.2432551f,
  +0.0186245f, -0.0988726f, -0.0224330f, -0.0166214f, -0.0788507f, -0.0914377f, +0.2674968f, -0.1015052f,
  +0.4480404f, -0.0636946f, +0.1169745f, +0.0492745f, +0.0104947f, -0.0638597f, -0.0457046f, -0.0666355f,
  -0.0194031f, -0.2140491f, +0.3043304f, +0.0683994f, +0.0542220f, -0.4650467f, +0.1621332f, -0.0047243f,
  -0.0945872f, -0.1795426f, -0.1502849f, +0.0414180f, +0.2640174f, -0.0551079f, +0.2896628f, -0.3290068f,
  +0.3427517f, -0.0886824f, +0.0691013f, -0.0906854f, +0.2307825f, -0.1064205f, +0.0341820f, +0.0704897f,
  +0.1096538f, +0.1507441f, +0.3730244f, -0.0990721f, -0.1214802f, -0.1607486f, +0.1411419f, +0.0282265f,
  -0.0665687f, -0.0307214f, -0.2068771f, +0.1868326f, +0.2834083f, +0.0938584f, +0.3284340f, +0.1316868f,
  +0.3924178f, -0.0369920f, +0.0931062f, +0.3206936f, +0.0356539f, -0.0299631f, +0.1494728f, -0.1932300f,
  -0.1454454f, +0.2285333f, +0.0246274f, -0.2293845f, +0.0839400f, -0.1758881f, +0.0124134f, +0.0221677f,
  -0.2884267f, -0.0049099f, +0.4042759f, +0.1131421f, +0.4861076f, +0.2651967f, -0.1364153f, -0.0834097f,
  -0.0056136f, -0.0892642f, -0.1455746f, +0.0869446f, -0.2876107f, -0.0888933f, +0.0968499f, +0.1237997f,
  -0.1815156f, -0.0686964f, +0.3083808f, +0.3072804f, +0.1874130f, +0.2216266f, -0.0810940f, -0.0936382f,
  -0.0220050f, -0.0978581f, +0.1826984f, +0.3375341f, +0.1135667f, -0.2110402f, +0.1214211f, -0.3245676f,
  -0.0908236f, +0.3044027f, -0.1501540f, -0.0902095f, -0.2281043f, -0.2074089f, -0.1789441f, +0.1430122f,
  -0.0204802f, -0.1478713f, +0.2124582f, -0.1094081f, +0.0157770f, -0.1798833f, +0.0714791f, +0.3510238f,
  -0.1450160f, -0.0426723f, -0.3665238f, +0.1243737f, -0.3598951f, +0.0370697f, -0.1276001f, -0.1224422f,
  +0.1314143f, +0.0656263f, -0.1504487f, -0.1065198f, +0.0722595f, +0.0897361f, -0.0269734f, +0.0106067f
);

const float biases[4] = float[4](
  -0.0154308f, +0.0186384f, -0.1095619f, +0.0271588f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer14 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1080806f, +0.0033146f, +0.0814225f, -0.2645477f, -0.0343049f, +0.0112818f, -0.3178637f, +0.0611339f,
  +0.1680621f, +0.1880200f, +0.1096076f, +0.0187770f, +0.1112670f, -0.3563260f, +0.0590972f, -0.1749681f,
  -0.0360253f, -0.1538335f, -0.0544705f, +0.0103828f, -0.0398534f, +0.2085031f, -0.0732214f, +0.0078432f,
  +0.1804545f, -0.0177086f, -0.0679342f, -0.2641639f, +0.2952658f, -0.3110754f, -0.1311838f, -0.1267044f,
  +0.0617800f, +0.1151602f, +0.0682658f, -0.3040005f, +0.1177354f, +0.1944752f, -0.0031665f, -0.1004486f,
  +0.1732031f, -0.1167267f, -0.0739080f, -0.0520377f, +0.0666439f, +0.2675250f, -0.0916812f, -0.1316906f,
  +0.2299097f, -0.1872112f, -0.0691613f, +0.0449234f, -0.1212658f, +0.1665781f, +0.0954838f, -0.1680866f,
  +0.3103674f, +0.0272038f, +0.2499257f, +0.0491029f, +0.0242447f, -0.1857220f, -0.0328026f, +0.0441545f,
  +0.0271876f, +0.2732020f, +0.4593630f, -0.0361127f, +0.1119549f, -0.0077153f, -0.0115960f, -0.0104140f,
  +0.1366354f, +0.0363536f, +0.0069630f, +0.1053943f, -0.0021356f, +0.1498128f, -0.0246820f, -0.0113728f,
  -0.1409950f, +0.1452047f, +0.1214909f, -0.1957120f, +0.3296874f, -0.1412918f, -0.2234927f, -0.0318796f,
  -0.0646534f, +0.0544443f, +0.0510708f, +0.0642965f, +0.1388272f, -0.0219409f, +0.0321240f, -0.1025197f,
  +0.0036166f, +0.0644024f, -0.0012824f, +0.2550998f, -0.2390835f, +0.0516097f, +0.1594131f, -0.1579203f,
  -0.1989225f, +0.0141141f, -0.1626504f, +0.3217542f, -0.2524139f, +0.1932945f, -0.0326857f, -0.1349882f,
  +0.0046530f, -0.0259439f, +0.2179735f, +0.1243928f, +0.2385972f, -0.0758561f, +0.1353307f, +0.0910409f,
  -0.0245691f, +0.1497382f, -0.0050657f, -0.2873909f, -0.1455970f, -0.0504713f, +0.0136281f, +0.0478262f,
  -0.3687409f, +0.1122392f, +0.0427123f, -0.1652007f, +0.2082979f, +0.3418657f, -0.1660870f, +0.1073206f,
  +0.0818908f, +0.0698270f, -0.3612253f, -0.0936578f, -0.2400059f, -0.1069713f, +0.0988153f, +0.0640329f,
  +0.2264315f, -0.2211455f, -0.0840470f, -0.0915593f, +0.0849110f, -0.0005371f, +0.4221457f, -0.3346144f,
  -0.1693727f, +0.1525955f, -0.0459528f, -0.4184788f, +0.1537538f, +0.2468833f, +0.1439336f, +0.2381751f,
  -0.0899440f, -0.1266975f, -0.1680691f, +0.2625318f, -0.3167233f, -0.1437465f, -0.2874840f, -0.0002224f,
  -0.1081178f, -0.4166887f, -0.0263132f, -0.1142906f, +0.0320194f, +0.2007436f, -0.0171617f, -0.2007928f,
  +0.2385620f, -0.3009713f, +0.5668513f, -0.0249168f, -0.2263255f, +0.0369185f, -0.1506936f, -0.0360415f,
  +0.0288537f, -0.2297202f, +0.1786514f, +0.0593424f, +0.1631631f, -0.2302743f, -0.0846738f, +0.0528122f,
  -0.0562282f, -0.1349242f, +0.0112475f, -0.0697142f, +0.0295524f, -0.1397602f, +0.0750496f, -0.0816965f,
  -0.1366954f, -0.2489494f, +0.3453294f, +0.2123349f, +0.0876668f, -0.0899578f, -0.3546895f, +0.1596710f,
  -0.1327519f, -0.0028118f, -0.0875706f, +0.1142825f, +0.1935006f, +0.0538114f, -0.2440170f, +0.2187265f,
  +0.2291310f, -0.0677818f, +0.0929050f, -0.1829303f, +0.0169315f, +0.0326002f, -0.1169495f, -0.0423241f,
  -0.1072109f, -0.0354084f, -0.0431639f, +0.2700892f, -0.0235794f, -0.2118812f, +0.0463714f, +0.0289707f,
  -0.1266039f, -0.1282791f, +0.0740950f, +0.2210366f, -0.2161514f, -0.2989532f, +0.0531114f, -0.1603958f,
  -0.2472913f, +0.0716412f, +0.0614379f, -0.1371434f, -0.0550075f, +0.0621643f, -0.1790085f, +0.1553050f,
  +0.2792472f, +0.1308877f, -0.0801644f, -0.3495315f, -0.4120987f, -0.2651457f, -0.1238905f, -0.1105864f,
  -0.0944904f, +0.1394148f, +0.1562496f, +0.0686378f, -0.2266094f, -0.0260797f, +0.1122833f, -0.1351857f,
  -0.0159237f, -0.1374965f, +0.0868513f, +0.2475421f, -0.0371060f, -0.0024876f, -0.1850672f, +0.0930803f,
  +0.1454737f, +0.1777201f, -0.1609421f, -0.0828115f, -0.0804669f, +0.0457481f, -0.3279175f, -0.1778399f,
  +0.0161712f, -0.1377168f, -0.0890264f, +0.2461358f, -0.1375492f, -0.1802535f, +0.2350342f, +0.1532087f
);

const float biases[4] = float[4](
  +0.0159224f, +0.0269109f, -0.0307403f, -0.0233499f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer14 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0151827f, +0.1322374f, -0.0999861f, +0.0206052f, -0.0337737f, -0.1912673f, +0.0489683f, +0.0733999f,
  -0.0181523f, +0.0967203f, +0.1084813f, +0.0894047f, -0.3033405f, +0.1671476f, -0.1255604f, +0.1686597f,
  -0.0309507f, -0.0270586f, -0.0404290f, -0.0358462f, -0.0475712f, +0.0115172f, -0.0367001f, -0.0447403f,
  -0.2284980f, -0.4941309f, -0.0630850f, +0.0255552f, +0.0173603f, -0.0921384f, -0.1021404f, +0.2324004f,
  +0.2281403f, -0.0919637f, +0.2247479f, -0.1561918f, -0.1799938f, +0.0170160f, -0.0625870f, -0.0831159f,
  +0.0005142f, -0.0621949f, -0.3238631f, +0.2086746f, -0.1080187f, -0.0190952f, +0.1757172f, +0.1260446f,
  -0.3138936f, +0.0588433f, -0.2526837f, +0.1827809f, -0.1206679f, -0.1682299f, -0.4290895f, +0.3716162f,
  -0.1379558f, +0.1493643f, +0.3329891f, -0.2461246f, -0.2795658f, +0.0816207f, +0.0974815f, +0.0324016f,
  +0.1810016f, -0.0897733f, +0.0817164f, +0.0589548f, -0.2672985f, -0.0025561f, +0.1518804f, +0.1641971f,
  -0.0664141f, +0.2009381f, +0.0926690f, -0.0047086f, +0.0936812f, -0.2569700f, +0.1547680f, +0.0808003f,
  +0.2828287f, -0.0738501f, +0.1040292f, -0.0963250f, -0.0843302f, -0.0584045f, +0.2771922f, +0.2748592f,
  -0.1247565f, -0.0303922f, +0.0451386f, +0.1208455f, -0.1127634f, -0.1710535f, +0.0230253f, +0.1269601f,
  -0.2026266f, +0.1020507f, +0.2900577f, +0.3261777f, +0.0060509f, +0.1541659f, +0.4317032f, +0.5139502f,
  +0.3253408f, +0.1897744f, +0.4061061f, -0.0131938f, -0.4497648f, +0.0650535f, +0.1133543f, +0.0579861f,
  +0.2483223f, -0.0004736f, +0.1646523f, +0.0928822f, -0.1966983f, -0.1358452f, +0.1460905f, -0.0680677f,
  +0.1283883f, +0.1189751f, -0.1329116f, +0.0323307f, +0.1109901f, -0.0035590f, -0.0993026f, +0.2900461f,
  +0.1969594f, +0.1261041f, -0.4145140f, -0.0408383f, +0.0488191f, +0.0693176f, +0.2368688f, -0.0876326f,
  -0.1069213f, +0.0138397f, -0.2156091f, -0.1576424f, -0.0580882f, -0.0114005f, +0.1239776f, +0.0974229f,
  +0.0148431f, -0.1195424f, -0.0036807f, -0.1946923f, +0.0712768f, -0.2097283f, +0.1003646f, +0.0719861f,
  +0.1076082f, -0.1122854f, +0.1091989f, +0.0137538f, -0.2133083f, -0.1579213f, +0.0884434f, +0.1346875f,
  +0.1186001f, -0.0051549f, -0.0061252f, -0.0759998f, -0.1366672f, +0.1043138f, +0.0227649f, -0.1060879f,
  -0.2274894f, +0.0842010f, +0.0254043f, +0.1242675f, -0.0173950f, +0.0564204f, -0.0551672f, +0.2383592f,
  +0.2538759f, +0.1340600f, +0.2098262f, +0.0907433f, -0.3430713f, +0.1669101f, -0.2281719f, +0.0439443f,
  -0.1524625f, -0.2210331f, +0.2113548f, +0.1223726f, +0.1154404f, -0.2684999f, -0.1307393f, +0.2845971f,
  -0.0288800f, -0.0608522f, +0.0454973f, -0.1137438f, -0.2202614f, +0.0422951f, -0.0287835f, +0.0850180f,
  +0.0209884f, +0.0692671f, -0.3413467f, -0.1375229f, -0.1396922f, -0.2461621f, +0.0337983f, +0.0619745f,
  -0.0283029f, +0.0786515f, +0.4478042f, +0.2058849f, -0.0269862f, -0.1039259f, +0.1725775f, -0.0606564f,
  +0.4584574f, -0.1672577f, +0.1224126f, -0.2860480f, +0.0283425f, -0.0144001f, +0.0616273f, -0.3324387f,
  -0.1359043f, +0.0113535f, +0.1808629f, -0.0009664f, +0.0940711f, +0.1468155f, -0.0590585f, +0.1526028f,
  +0.0437497f, +0.0936115f, +0.1713648f, +0.4329050f, -0.1092747f, -0.0473392f, -0.0690091f, -0.2943239f,
  -0.0311150f, +0.0802521f, +0.1267799f, -0.0795890f, -0.0205467f, +0.2441331f, +0.2090492f, -0.2395841f,
  -0.0221952f, +0.0675354f, +0.3750859f, -0.0838151f, +0.2949506f, +0.1027418f, -0.0072930f, +0.1499103f,
  -0.2130735f, -0.1557494f, +0.2246734f, +0.1585969f, -0.0870056f, -0.2949337f, -0.4191610f, -0.1228051f,
  -0.1941804f, +0.0822953f, -0.1002555f, -0.3799628f, +0.5264480f, +0.1142928f, +0.1985766f, -0.0651436f,
  -0.0885178f, +0.0166421f, +0.6940671f, +0.0905221f, +0.0988984f, +0.0559631f, +0.0398331f, +0.0242717f,
  -0.2885098f, -0.1477361f, +0.4196915f, +0.3029465f, +0.0242107f, +0.1039639f, +0.1427713f, +0.0132077f
);

const float biases[4] = float[4](
  -0.0581235f, +0.0032693f, +0.0070737f, +0.0364722f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer15 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0188410f, -0.3994960f, -0.3131205f, +0.3237683f, +0.0350102f, +0.1377394f, -0.3094723f, +0.1351861f,
  +0.2664566f, +0.1624681f, -0.3543846f, -0.0521876f, -0.5044791f, -0.0344183f, +0.1744265f, -0.0186392f,
  +0.0982504f, -0.0203669f, +0.2142731f, -0.1263232f, -0.0942266f, +0.0666450f, -0.0373784f, +0.1112940f,
  -0.1607303f, +0.3054643f, -0.2089682f, -0.0704223f, +0.0745941f, +0.1983686f, -0.1620725f, +0.0913635f,
  +0.3499599f, +0.4049312f, -0.1903238f, -0.0829093f, -0.3066657f, -0.1495050f, -0.0275106f, +0.1594272f,
  +0.1823659f, -0.1418336f, +0.3712264f, -0.3615465f, -0.1280155f, -0.1874758f, -0.0649630f, +0.0728690f,
  -0.1093648f, +0.0183210f, -0.0461922f, -0.2857408f, -0.0048901f, -0.2536709f, -0.0157738f, -0.0311442f,
  +0.1533970f, +0.0588332f, -0.0463980f, -0.0272127f, -0.1247559f, -0.1281714f, -0.0412563f, +0.1109981f,
  -0.0554658f, +0.0680387f, +0.1539202f, +0.0699071f, -0.0187771f, -0.0228085f, -0.1029985f, -0.0350487f,
  +0.0547891f, -0.2141777f, -0.1466500f, +0.3262041f, -0.1914435f, +0.1390991f, -0.0609921f, +0.0147731f,
  +0.0994698f, -0.1223702f, -0.4604253f, -0.0548215f, -0.1990548f, +0.0123599f, -0.0056589f, +0.3795224f,
  -0.3783742f, +0.2448676f, +0.1819981f, -0.2425726f, +0.0170959f, +0.3266375f, -0.2742291f, +0.0668602f,
  +0.1737988f, -0.0284313f, +0.1153025f, +0.0673745f, -0.0093310f, +0.2355306f, -0.0888269f, +0.0513702f,
  -0.0085474f, +0.1949571f, -0.0006795f, -0.0254219f, -0.1383109f, -0.0484244f, +0.0367871f, +0.1850213f,
  -0.3166711f, +0.1704053f, -0.0835695f, -0.0986006f, +0.1492646f, +0.0755611f, +0.0950019f, +0.0376743f,
  -0.1960592f, -0.0010598f, -0.1877576f, -0.1835725f, -0.0616425f, +0.0982578f, +0.2350423f, -0.2033456f,
  -0.0418698f, +0.3208857f, +0.1416082f, -0.1259238f, -0.1237664f, +0.0458612f, -0.0452869f, +0.4370058f,
  +0.0965345f, -0.0119161f, +0.1432099f, +0.0159375f, +0.0470016f, -0.1240159f, +0.0230758f, -0.0012797f,
  -0.1471538f, -0.2330959f, -0.1036678f, +0.1118310f, +0.0140703f, -0.0672102f, +0.0327670f, -0.2687158f,
  +0.1498821f, +0.4050104f, -0.1102451f, -0.1222094f, -0.2117691f, +0.2506867f, +0.0692009f, +0.2401658f,
  -0.0383306f, -0.1416185f, -0.2518465f, +0.2646086f, +0.3102721f, -0.0400333f, +0.1297683f, -0.4898750f,
  -0.0219934f, -0.2942171f, -0.1964056f, +0.0170580f, -0.1599911f, +0.1588528f, +0.0935514f, +0.0049519f,
  +0.0825595f, -0.2281186f, -0.2145976f, -0.1772150f, -0.0014381f, -0.0859019f, -0.1001801f, -0.2198779f,
  -0.1543007f, -0.1246810f, +0.0970926f, +0.0268603f, +0.1921887f, -0.1601627f, +0.0047113f, -0.3168124f,
  +0.2796155f, +0.0287877f, -0.3116620f, +0.0231995f, +0.0097147f, +0.2143634f, +0.0329521f, -0.1009102f,
  -0.2703879f, -0.3069913f, -0.0741648f, +0.1562570f, +0.0806686f, -0.0999113f, +0.1466935f, -0.2999628f,
  -0.0964438f, +0.0094160f, +0.0471596f, +0.2714351f, +0.0572954f, -0.1238414f, +0.5309604f, +0.0161276f,
  -0.2757287f, -0.0712980f, -0.1104725f, +0.1178811f, -0.2171771f, +0.1918682f, +0.0460831f, -0.0770344f,
  +0.0106387f, -0.0505095f, -0.0569072f, -0.0088413f, +0.0553080f, -0.1662681f, +0.0192655f, +0.2661232f,
  +0.1539980f, +0.1160653f, +0.1256898f, -0.0985353f, -0.1736590f, +0.2109461f, -0.0318993f, -0.1559710f,
  -0.0241186f, -0.0639950f, +0.1406498f, -0.0236247f, +0.0725120f, -0.0791001f, -0.2330720f, +0.2827280f,
  -0.2912941f, -0.0936114f, -0.1117822f, -0.1624400f, -0.0489868f, +0.0141774f, +0.2493706f, +0.2681441f,
  +0.0152144f, -0.0346081f, -0.0716302f, -0.2622932f, -0.0634483f, +0.2151949f, -0.2035578f, -0.0089835f,
  +0.1097060f, +0.2615688f, +0.3768179f, -0.2176772f, +0.0356372f, +0.0157026f, -0.0449401f, +0.4345287f,
  -0.1401312f, -0.1211666f, -0.1132568f, -0.1874129f, +0.2211222f, -0.1217559f, +0.0975663f, -0.2758634f,
  -0.0379014f, -0.0555040f, +0.2657629f, +0.0801641f, -0.1538306f, -0.0673579f, -0.0190805f, -0.0434936f
);

const float biases[4] = float[4](
  -0.0232979f, -0.0318111f, +0.0004134f, +0.1750387f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer15 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1042796f, -0.0520100f, +0.1444600f, +0.0137620f, -0.1080493f, -0.1475901f, +0.0284209f, +0.1140153f,
  +0.2635391f, -0.3068080f, +0.2578283f, +0.0837535f, -0.1811309f, +0.1569179f, +0.0921750f, -0.2588456f,
  +0.1211268f, -0.1691419f, -0.2313730f, -0.2061470f, +0.0607666f, -0.0784158f, +0.2521260f, -0.1689260f,
  +0.1900122f, -0.1167710f, -0.0086780f, +0.0680486f, +0.2878042f, -0.1119039f, -0.0528270f, +0.1484864f,
  +0.0753911f, -0.3133098f, -0.2969098f, -0.0051763f, -0.0420346f, -0.4552160f, -0.3269566f, -0.3686488f,
  -0.0359505f, +0.2007156f, -0.0466087f, +0.0301979f, +0.0564073f, +0.2364706f, -0.2152112f, +0.2323482f,
  -0.2582092f, -0.1598586f, +0.0633608f, +0.0606889f, +0.1130774f, +0.1716796f, -0.0025222f, -0.6221482f,
  -0.5826116f, -0.0543826f, -0.2545193f, -0.0043240f, -0.1871532f, -0.1374002f, -0.1186672f, -0.2087628f,
  +0.2443284f, +0.0895568f, +0.4863579f, +0.2573193f, +0.3391293f, -0.0377035f, -0.0162041f, +0.1207960f,
  +0.1245797f, -0.0179658f, -0.0606907f, -0.1064394f, -0.0773929f, +0.0761164f, +0.2005355f, +0.0976762f,
  +0.1131020f, -0.1860702f, +0.2222723f, -0.0427271f, +0.0700485f, +0.1141548f, -0.0489754f, -0.1843276f,
  +0.3798318f, +0.0515033f, +0.1331325f, -0.1180531f, -0.0939408f, +0.0861745f, +0.1537437f, +0.1132999f,
  -0.0300291f, +0.1611193f, +0.3420236f, +0.1766113f, +0.0747955f, +0.1685765f, -0.0761632f, +0.1162204f,
  -0.0564906f, +0.1711688f, +0.0612371f, -0.4791023f, +0.1506567f, +0.0496483f, -0.1217301f, -0.0333473f,
  +0.2110919f, +0.0618481f, +0.0586678f, -0.3355607f, +0.2008367f, +0.2675391f, -0.2433667f, +0.0979198f,
  +0.0008431f, +0.0573374f, +0.0170186f, +0.2585018f, -0.0768360f, -0.2486614f, +0.1245463f, +0.0459678f,
  -0.0976081f, -0.1116507f, +0.0993658f, -0.0377799f, -0.1639093f, -0.1665881f, -0.3774501f, -0.0425890f,
  +0.1991670f, +0.0226480f, +0.3038081f, -0.1449667f, +0.0216438f, +0.0188495f, -0.0410740f, -0.1059196f,
  +0.1418964f, +0.0238323f, +0.2418604f, +0.0713001f, +0.1340729f, -0.0371546f, -0.2537879f, +0.1045253f,
  -0.1158268f, +0.4165911f, -0.0598889f, +0.1125923f, +0.0290871f, -0.1032977f, -0.0149347f, +0.2239127f,
  -0.3550616f, -0.0098116f, -0.1764747f, +0.0999407f, -0.0326233f, -0.2181414f, +0.0761292f, -0.2737958f,
  -0.0598843f, -0.4274684f, -0.3331788f, +0.0325385f, +0.5490132f, -0.4485801f, -0.2491684f, +0.4750729f,
  +0.5989742f, +0.2248498f, +0.6045634f, -0.0981215f, -0.5886963f, -0.0991911f, -0.1176409f, +0.1197553f,
  -0.2669364f, +0.0108093f, -0.1613740f, +0.3685058f, -0.1075685f, -0.1960984f, +0.0705270f, -0.1078415f,
  +0.0215417f, +0.0117557f, -0.3355523f, +0.0719399f, +0.1692137f, +0.2193914f, -0.1153071f, +0.0397729f,
  +0.3458515f, +0.4187210f, +0.3709050f, -0.0091482f, -0.1743275f, -0.1786527f, -0.0778031f, +0.5454943f,
  -0.0082440f, -0.1035212f, -0.0657021f, +0.0419405f, -0.0571427f, -0.1386871f, +0.1060256f, -0.1681212f,
  +0.2747405f, +0.0988889f, -0.0662729f, +0.1241034f, +0.0127910f, +0.0975032f, +0.1870600f, -0.1748320f,
  +0.1693863f, +0.0329470f, +0.0477201f, +0.1475927f, +0.2680891f, +0.1793847f, -0.1717126f, +0.3134992f,
  -0.2566793f, +0.1200943f, -0.0568275f, +0.1288384f, -0.0631485f, +0.1097259f, +0.0537185f, -0.1848687f,
  +0.2384111f, +0.0661187f, -0.1320468f, +0.2288110f, -0.0550160f, +0.4116668f, +0.2485046f, +0.0956949f,
  -0.0136610f, -0.0807600f, +0.0017021f, +0.0479672f, +0.2637247f, +0.0970272f, -0.2633349f, +0.0443123f,
  -0.0714099f, +0.1957676f, -0.1599820f, +0.0167238f, -0.1291574f, +0.0537052f, +0.0577348f, +0.0614671f,
  -0.0941275f, -0.1463048f, -0.2131443f, +0.0341394f, +0.0016066f, +0.2129207f, +0.0206044f, -0.3605416f,
  +0.2330450f, +0.1054622f, +0.1158901f, +0.1072125f, +0.0572660f, +0.2703765f, +0.0146713f, +0.2318989f,
  -0.0797977f, -0.0819258f, -0.0643005f, -0.0240795f, +0.0011767f, +0.3623281f, -0.1502336f, -0.1900832f
);

const float biases[4] = float[4](
  -0.3045092f, +0.0385478f, -0.0286743f, +0.0546000f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer16 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1674105f, -0.0308432f, +0.1763269f, -0.2162756f, -0.0907789f, +0.2154778f, -0.0006619f, -0.0246586f,
  -0.0615172f, +0.2658557f, -0.0141126f, -0.2661425f, +0.1839444f, -0.1392309f, -0.2436924f, -0.1470502f,
  -0.1606938f, +0.1419247f, +0.3464722f, -0.0703245f, -0.0540506f, -0.0970732f, +0.0365640f, -0.1701563f,
  +0.1140383f, +0.1180804f, +0.3405996f, -0.0617648f, +0.0463534f, +0.0341643f, -0.0745798f, +0.1229916f,
  +0.1585589f, -0.0004958f, -0.2566946f, +0.3160564f, -0.3195412f, -0.5987362f, +0.0705607f, -0.2644595f,
  +0.0981281f, +0.1650966f, +0.3702002f, -0.2777162f, -0.2579111f, +0.0879389f, -0.4421676f, +0.2392340f,
  -0.0728632f, +0.2324466f, +0.1317360f, -0.1099207f, +0.0662824f, +0.3070241f, -0.0735037f, +0.0117818f,
  +0.0314491f, +0.0073025f, +0.0746046f, -0.0765365f, +0.0646366f, +0.1360698f, -0.1997527f, -0.3693992f,
  +0.0325743f, +0.0065760f, -0.0977926f, +0.0927624f, -0.1654307f, +0.1019643f, -0.0728746f, -0.1065055f,
  -0.1877417f, +0.1099271f, -0.0359472f, -0.1529548f, +0.1633408f, -0.2044612f, +0.0500819f, +0.0552314f,
  -0.0560078f, -0.0589936f, +0.1163117f, -0.0835910f, -0.1375354f, +0.0413753f, +0.2576678f, -0.0995464f,
  -0.0249480f, +0.1380615f, +0.1758599f, -0.0682456f, -0.0284600f, -0.3840867f, -0.4721757f, +0.1643038f,
  +0.1692886f, -0.1076106f, +0.2404447f, +0.2861205f, +0.0554858f, +0.0103326f, +0.2460068f, -0.0153734f,
  +0.0928115f, +0.2273947f, +0.1907565f, -0.0935405f, -0.3471038f, -0.2785051f, +0.3868055f, -0.0616079f,
  +0.0462008f, -0.1197259f, +0.1723381f, +0.0905343f, -0.0365187f, -0.0162564f, -0.2767895f, +0.2129466f,
  -0.0871398f, -0.1141541f, +0.1524528f, +0.0570312f, -0.0489613f, -0.1904675f, +0.1386247f, +0.0457075f,
  -0.5154958f, +0.1921920f, -0.1317015f, +0.0242512f, -0.2829047f, -0.0302535f, +0.1268110f, +0.0931531f,
  -0.1233027f, +0.0161400f, +0.1729960f, +0.1795860f, -0.0183227f, -0.2441704f, -0.1484934f, -0.1929475f,
  +0.0274309f, +0.1545018f, +0.0559249f, -0.0485766f, +0.2376897f, -0.0072658f, -0.2851091f, +0.0576335f,
  -0.0895713f, +0.0756615f, -0.1405608f, +0.1980621f, +0.3815491f, -0.0868827f, +0.2440147f, -0.2113966f,
  -0.0980619f, +0.0578107f, +0.1606146f, -0.2954488f, -0.0825381f, +0.2662879f, -0.0375756f, -0.1164556f,
  -0.1484730f, +0.1238107f, +0.0922054f, +0.1210299f, +0.2146896f, +0.1790508f, -0.2140916f, -0.1435027f,
  +0.7603757f, +0.0150556f, +0.1267733f, +0.1638390f, +0.0413472f, -0.1720891f, -0.3577673f, +0.1133981f,
  +0.1909516f, +0.2096789f, +0.1710743f, -0.0552209f, -0.1713165f, +0.2313068f, +0.2319403f, +0.2079626f,
  +0.4030165f, -0.1960257f, +0.0655751f, -0.1382629f, +0.0690505f, +0.2870581f, -0.0425666f, -0.1254297f,
  +0.5301018f, +0.1405563f, +0.0605371f, -0.2233487f, +0.1339755f, -0.1210751f, -0.2722104f, +0.0553162f,
  -0.2708862f, +0.1084800f, +0.1984224f, +0.0939157f, +0.0641150f, +0.1863265f, -0.0286854f, +0.2114047f,
  -0.0458859f, -0.0226839f, -0.0175902f, -0.0005795f, -0.0036443f, +0.1139669f, -0.1113794f, +0.2790441f,
  -0.1207280f, -0.0029261f, -0.1349263f, -0.0635848f, +0.3878188f, +0.2486118f, +0.3187838f, -0.1114784f,
  +0.0046338f, +0.1414897f, +0.0552847f, -0.0249146f, +0.1574031f, -0.0915054f, -0.0995897f, +0.1473568f,
  -0.0981342f, -0.0595608f, +0.1867508f, -0.0366135f, -0.0460562f, +0.0680038f, -0.1437764f, -0.0727533f,
  -0.6257133f, -0.1801268f, +0.2630890f, -0.0987945f, +0.1224163f, -0.0595032f, +0.5003374f, +0.0652578f,
  +0.0351992f, -0.0087884f, -0.1479707f, +0.0487484f, -0.2735468f, +0.2749366f, -0.2234645f, +0.1392868f,
  -0.1866010f, -0.0523183f, -0.0890651f, +0.1961158f, +0.0851929f, +0.0851139f, -0.0316030f, +0.3399549f,
  -0.3747696f, +0.0926420f, +0.0764116f, -0.0158121f, -0.0318109f, -0.0950698f, -0.0655800f, -0.0430547f,
  -0.0849500f, -0.0138998f, +0.1233117f, -0.1491958f, +0.1465069f, +0.0572156f, -0.0446712f, +0.2097612f
);

const float biases[4] = float[4](
  +0.0510300f, +0.0102283f, -0.0782052f, +0.0227787f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer16 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0263514f, +0.0797899f, +0.1440293f, -0.1861681f, +0.1103986f, +0.0055636f, +0.3142503f, +0.2484879f,
  +0.0419280f, -0.1736699f, +0.2176757f, -0.1634214f, +0.1337331f, -0.1219351f, -0.0498346f, +0.1525271f,
  +0.0909002f, -0.0410225f, +0.1505767f, -0.0289339f, -0.0005829f, -0.1861941f, +0.1337988f, +0.0101035f,
  -0.0376491f, +0.0221097f, -0.3510496f, +0.1815235f, -0.2169205f, -0.2554761f, +0.1670862f, +0.0615410f,
  +0.3030517f, -0.0219705f, +0.1521560f, +0.1590337f, -0.1728505f, -0.0008227f, +0.0980125f, -0.2026827f,
  +0.1455726f, +0.0503866f, +0.2113872f, -0.0702875f, +0.0610499f, -0.0928418f, +0.1920628f, -0.0574376f,
  -0.2481572f, +0.0839462f, -0.0347989f, +0.3539840f, +0.0320199f, +0.1576304f, -0.0256083f, +0.2310723f,
  +0.0389793f, +0.1568109f, +0.2200563f, +0.3198890f, +0.0913606f, +0.1579781f, +0.2196990f, -0.1861839f,
  -0.3726151f, +0.1592771f, +0.2720096f, -0.1996955f, -0.0625862f, -0.0458634f, +0.0128716f, +0.3131528f,
  +0.1153271f, +0.0713848f, -0.1975735f, +0.1599034f, +0.2425354f, +0.0077281f, +0.1544514f, -0.1960932f,
  +0.1185410f, +0.0247082f, +0.2033895f, -0.1545929f, +0.0429820f, -0.1014589f, +0.0018232f, +0.0784510f,
  +0.1348353f, -0.1074305f, -0.1024640f, +0.0481161f, +0.2422920f, -0.1301601f, +0.1056134f, -0.0082096f,
  +0.0717471f, +0.0618837f, -0.3088359f, -0.0479542f, -0.1182596f, -0.0704767f, +0.2021620f, -0.2901357f,
  -0.1224003f, -0.1342235f, +0.1292691f, +0.0865693f, +0.1426085f, +0.0450343f, +0.1917374f, +0.0811655f,
  +0.2358121f, -0.1539197f, -0.0492183f, -0.1487950f, +0.2733651f, +0.1170688f, -0.0302142f, +0.1673653f,
  -0.1317969f, +0.1157230f, -0.2610614f, -0.1833263f, -0.0403660f, -0.1717946f, -0.1669031f, +0.2137825f,
  +0.5084037f, -0.2138770f, +0.1168640f, +0.1281067f, +0.0646055f, -0.1619076f, +0.2266678f, -0.1808545f,
  +0.2046057f, +0.0973233f, -0.2329147f, -0.2331250f, +0.0592423f, +0.1460434f, -0.0504058f, +0.2548168f,
  -0.0413050f, +0.0202749f, -0.1677056f, -0.2633756f, -0.0344502f, +0.3379769f, +0.0244102f, -0.0277585f,
  +0.3986366f, -0.1085403f, -0.3609901f, +0.0180844f, +0.4263227f, +0.1821334f, -0.2994622f, +0.0116013f,
  +0.1983754f, -0.1669431f, -0.2084158f, -0.2222778f, -0.0522718f, +0.2220328f, +0.5782958f, -0.2003331f,
  +0.0826121f, +0.0257780f, -0.1072935f, -0.1921746f, +0.1642071f, -0.1150987f, -0.3349512f, -0.3188509f,
  +0.0252477f, -0.0917947f, +0.2086606f, -0.0167387f, +0.4750735f, -0.0504395f, +0.2077728f, +0.3457259f,
  -0.2384564f, -0.0248152f, -0.1749510f, +0.1766476f, +0.0934998f, +0.0726508f, +0.1619480f, -0.2464310f,
  +0.1637570f, -0.0782781f, -0.0743235f, +0.3652461f, +0.0544528f, +0.0390295f, +0.1009334f, +0.2162189f,
  -0.2364693f, +0.0409737f, -0.1293693f, -0.0505530f, +0.0368175f, +0.0986559f, -0.0589453f, +0.3269887f,
  -0.0685920f, -0.0827437f, +0.0410276f, -0.1821018f, -0.0154945f, +0.0684600f, +0.2693760f, -0.0492245f,
  -0.0018026f, -0.0216342f, -0.1234367f, -0.0092377f, +0.0312648f, -0.0343085f, -0.1780325f, -0.0782740f,
  -0.3214191f, +0.1164954f, -0.0283550f, +0.2028663f, -0.1156392f, +0.0409523f, +0.5403528f, -0.1499370f,
  -0.0747151f, +0.0487019f, -0.1544346f, -0.4375027f, -0.0284662f, -0.1754732f, -0.2354984f, +0.2713085f,
  +0.2423866f, -0.1865902f, +0.4316437f, -0.1796450f, +0.2130998f, -0.0005400f, +0.2598755f, +0.0760603f,
  -0.1316879f, +0.3522103f, +0.1179243f, -0.2092476f, +0.2889999f, -0.0801804f, -0.2222700f, +0.2431076f,
  -0.0425865f, -0.1542200f, -0.3088404f, -0.0784490f, -0.1397702f, +0.0409242f, -0.0676192f, +0.2926144f,
  -0.0857996f, +0.1632184f, -0.0473030f, -0.0214427f, +0.0620642f, +0.1613546f, -0.0879403f, +0.0254603f,
  -0.3321935f, +0.0116229f, -0.0699817f, -0.0206871f, +0.1856843f, +0.0118665f, -0.1379168f, -0.0306685f,
  -0.1407533f, -0.1200705f, -0.0638320f, -0.0633546f, -0.0377305f, +0.1655466f, +0.1299991f, -0.1135846f
);

const float biases[4] = float[4](
  -0.0507300f, +0.0061708f, +0.0038659f, -0.0125337f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer17 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1180288f, +0.1788168f, +0.0276382f, -0.0348930f, -0.1493423f, +0.1249032f, +0.0783750f, +0.0630713f,
  -0.0098197f, +0.0149921f, -0.0375633f, -0.2139929f, +0.3412012f, +0.1898015f, +0.2559423f, -0.3448528f,
  -0.3212481f, +0.1331960f, -0.0398742f, +0.0571266f, -0.0052265f, -0.0031967f, -0.0694021f, +0.1314254f,
  +0.0853596f, +0.0407308f, -0.0618859f, +0.1260915f, -0.1125854f, +0.1234310f, +0.1881372f, +0.2966219f,
  +0.0750462f, +0.0988410f, +0.3467522f, +0.2407901f, +0.2862643f, +0.0408807f, +0.0811787f, +0.4663738f,
  -0.1703501f, -0.0289496f, -0.3037691f, +0.0826980f, +0.0242713f, +0.0691086f, +0.0046616f, +0.0796584f,
  -0.2242460f, -0.1909100f, -0.0552680f, -0.0316421f, -0.0408344f, +0.0182615f, +0.0726010f, +0.1769102f,
  -0.0875992f, -0.0578856f, -0.2279234f, +0.0240803f, -0.1385996f, +0.0741143f, -0.1969256f, +0.0469080f,
  -0.0261039f, +0.1769543f, -0.0270089f, -0.0174119f, +0.0033880f, -0.0613514f, +0.0905591f, +0.0088550f,
  +0.0624989f, -0.0491907f, -0.0137844f, +0.0285850f, +0.2704061f, +0.0318067f, -0.0233492f, +0.0370660f,
  +0.2808812f, -0.1157429f, +0.2172296f, +0.0420451f, +0.1540121f, -0.0543151f, +0.0171296f, +0.2612984f,
  -0.0659692f, -0.2189476f, +0.1817092f, +0.2704471f, +0.0741581f, -0.1078829f, +0.0897096f, -0.2149473f,
  -0.0885501f, -0.1563473f, +0.2088061f, +0.0666153f, +0.0511179f, +0.0288150f, -0.0007634f, +0.2030383f,
  -0.1545356f, +0.2262543f, -0.2676112f, +0.1192113f, +0.1701108f, -0.0934006f, -0.2178837f, +0.0454281f,
  +0.1588010f, -0.1632052f, -0.0208476f, +0.0137704f, -0.1266588f, -0.4104280f, +0.1556715f, -0.2623908f,
  +0.3165883f, -0.0617217f, -0.1641914f, +0.0609601f, +0.0643388f, +0.1160145f, -0.0542442f, -0.2750795f,
  -0.0318712f, -0.1535189f, -0.0093741f, -0.1918810f, +0.1710053f, +0.2762379f, +0.2567195f, -0.1313319f,
  -0.0462138f, +0.0048435f, +0.0721560f, +0.4774713f, -0.0737634f, -0.1820746f, +0.4438238f, +0.1476071f,
  -0.0638125f, +0.0935118f, +0.0558412f, +0.0777852f, +0.2507256f, +0.3061865f, +0.1168664f, -0.1746609f,
  +0.2123842f, -0.0387494f, -0.2148253f, -0.0187114f, -0.0749614f, +0.2834045f, +0.0644273f, +0.0629747f,
  -0.3169620f, +0.1067545f, -0.0279330f, +0.0953324f, +0.0474371f, +0.1790372f, -0.3262252f, -0.0364115f,
  +0.1741747f, -0.1500523f, +0.0423152f, +0.0472437f, +0.0663113f, -0.0537831f, -0.2520942f, +0.3658160f,
  +0.1339184f, +0.0772501f, +0.0338954f, +0.1054591f, -0.0244352f, +0.2727140f, +0.0747435f, +0.1186429f,
  -0.1047820f, -0.2312715f, +0.0178009f, -0.0002330f, -0.0713637f, +0.2415900f, +0.3499987f, +0.2207601f,
  +0.0522640f, +0.1394441f, +0.1778992f, +0.0081449f, -0.0016757f, +0.0853155f, +0.0368204f, +0.2151369f,
  -0.0259741f, -0.0147479f, -0.1572200f, +0.2257224f, +0.1851677f, +0.2404529f, +0.1248576f, +0.0519432f,
  +0.0899462f, -0.0961717f, -0.0274861f, -0.2067925f, -0.2885947f, +0.0930324f, -0.0980292f, +0.0821559f,
  +0.0518964f, +0.0977304f, -0.0395779f, +0.1359377f, -0.1150743f, -0.0661409f, +0.0043430f, -0.2556305f,
  +0.0669305f, -0.0032280f, +0.3656333f, +0.0076116f, +0.1137312f, +0.1577144f, -0.0724971f, +0.2030941f,
  +0.1672411f, +0.2039013f, +0.1579538f, -0.0713087f, -0.0767416f, -0.0020006f, -0.0136095f, -0.0464061f,
  -0.0007550f, -0.1005425f, -0.1190102f, -0.0718908f, -0.4388872f, +0.0715815f, -0.1039769f, +0.1363032f,
  +0.1392368f, -0.0866479f, +0.0874825f, -0.1866888f, +0.1556391f, +0.3849388f, -0.2106799f, +0.3769286f,
  -0.0030680f, +0.2031090f, -0.3868021f, -0.3001579f, -0.2616030f, -0.0299754f, -0.1787745f, -0.0257670f,
  +0.1343324f, +0.0072463f, +0.1743539f, +0.0660780f, -0.1223133f, +0.0024323f, -0.1661164f, -0.2994836f,
  -0.0257849f, +0.1400142f, +0.2971229f, +0.3749259f, +0.0546426f, +0.1238738f, +0.0099525f, +0.2012589f,
  +0.1212456f, -0.0773725f, -0.1150070f, -0.0064630f, +0.2553370f, -0.0390586f, +0.0990943f, +0.0895053f
);

const float biases[4] = float[4](
  +0.1106072f, +0.0213709f, +0.0407427f, -0.0172521f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer17 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0977174f, +0.1245232f, -0.0808401f, +0.2157348f, +0.0758449f, +0.1090466f, -0.3400170f, -0.3306135f,
  -0.1982908f, +0.1172618f, -0.2442274f, +0.2719097f, +0.0682283f, -0.1806459f, +0.3234881f, +0.2850218f,
  +0.1430436f, +0.1011320f, -0.1530204f, +0.0124496f, +0.1820628f, -0.0240415f, -0.1148253f, +0.2699296f,
  +0.5294157f, -0.0510928f, -0.0293683f, +0.2614816f, -0.4303168f, -0.1228917f, -0.0947846f, +0.5733998f,
  +0.2528079f, -0.1459990f, -0.3207390f, -0.0148452f, +0.2968448f, -0.1309283f, +0.2002308f, +0.3405744f,
  -0.3632211f, -0.1264000f, -0.0786053f, -0.0498379f, -0.1196958f, -0.0323541f, +0.0842998f, -0.2527201f,
  -0.1702153f, +0.0311342f, +0.1333977f, +0.2886293f, -0.1432893f, -0.1174706f, -0.0316786f, +0.5246783f,
  +0.0272281f, +0.1609704f, +0.3827071f, +0.0382458f, -0.0119256f, -0.1992943f, -0.0428702f, +0.1025869f,
  +0.4181163f, +0.3822768f, +0.2442063f, -0.2354028f, +0.1200342f, -0.1358871f, -0.3344283f, +0.0971576f,
  +0.0501612f, -0.1022715f, -0.2072478f, -0.0677108f, +0.2660753f, +0.0515602f, -0.2287709f, +0.1241762f,
  +0.3501772f, +0.0003968f, +0.4665167f, -0.3255414f, -0.5444334f, -0.1430610f, +0.2818155f, +0.0288001f,
  +0.0009030f, -0.1148140f, +0.2128156f, -0.0857038f, +0.0140071f, -0.1382706f, -0.0265544f, -0.1216184f,
  +0.0383128f, +0.0819432f, -0.5382006f, -0.7156077f, +0.3438471f, +0.2044093f, -0.1315951f, +0.5085078f,
  +0.6351499f, -0.1269468f, +0.4625061f, +0.0778864f, +0.1928039f, +0.0801416f, +0.1154422f, +0.1754340f,
  -0.0438224f, +0.0150930f, +0.2474331f, -0.0209387f, -0.0387071f, -0.1128092f, +0.2640021f, -0.0517621f,
  +0.2853969f, -0.0599775f, -0.1736842f, -0.2463635f, -0.0334422f, +0.0241107f, -0.1072912f, +0.2152309f,
  +0.1628536f, +0.0639917f, +0.2052568f, -0.0842368f, -0.0123670f, -0.0057008f, +0.0568425f, -0.1630623f,
  +0.0072139f, -0.0180904f, -0.0690105f, +0.0331622f, +0.0508650f, +0.0793429f, -0.0162967f, +0.0530720f,
  +0.1225128f, -0.1679606f, -0.0095583f, -0.0718815f, +0.2059647f, +0.0712635f, +0.0913799f, -0.0295187f,
  +0.1158389f, +0.2761742f, -0.2979955f, +0.1760471f, -0.0473857f, -0.1964730f, -0.1380343f, -0.0807788f,
  +0.0378166f, -0.0993316f, +0.0480934f, +0.2857177f, +0.3163352f, +0.0102259f, -0.1588974f, +0.0161129f,
  -0.0845888f, +0.1025794f, -0.4515200f, -0.2198563f, +0.1222900f, +0.0175414f, +0.4430035f, +0.1241776f,
  +0.5145350f, +0.3455724f, -0.0959408f, +0.0587212f, -0.2872415f, -0.1245972f, -0.1507310f, -0.0035344f,
  +0.1910643f, -0.1137313f, +0.1055067f, +0.3052972f, +0.1607639f, -0.0888892f, -0.1753192f, -0.1190488f,
  +0.0166933f, -0.0325815f, -0.0159921f, -0.0695688f, +0.1833441f, -0.0621338f, -0.1716198f, -0.1997665f,
  -0.1511614f, -0.1868895f, +0.1518893f, +0.0363025f, -0.2663046f, -0.0285936f, -0.0611247f, +0.3562430f,
  -0.1900790f, -0.0467437f, -0.0138871f, +0.4828551f, -0.0843176f, +0.0146760f, +0.3934158f, -0.0600839f,
  +0.2184446f, +0.0877334f, +0.0588068f, -0.2905134f, -0.1187636f, -0.1641590f, +0.0698008f, -0.0000451f,
  +0.0167767f, -0.1094481f, +0.1955670f, +0.1050633f, -0.0759462f, +0.0741770f, -0.0771788f, +0.1710440f,
  -0.1638557f, -0.1845096f, +0.0224444f, +0.1283109f, -0.0723766f, +0.2056330f, -0.1615850f, -0.0278765f,
  +0.0476007f, -0.0397818f, -0.0331187f, -0.1759878f, -0.0440523f, +0.0926630f, -0.0012251f, +0.2655836f,
  -0.0312014f, -0.2126183f, +0.0121234f, -0.1583332f, +0.0225174f, +0.2765220f, -0.1570228f, -0.2837555f,
  -0.0223341f, +0.2009648f, -0.0946833f, +0.0563903f, +0.0433533f, +0.0652104f, +0.1099824f, -0.1121475f,
  +0.1531376f, +0.1313419f, -0.1166237f, +0.0312386f, -0.0260802f, -0.0252070f, -0.0109263f, -0.0743590f,
  -0.0755240f, -0.0603054f, +0.3513290f, -0.1048007f, +0.0953975f, +0.0943436f, -0.2223453f, -0.0365332f,
  -0.0325170f, -0.0539929f, -0.1541373f, +0.1153555f, -0.1048703f, +0.1123863f, +0.0311175f, -0.1134535f
);

const float biases[4] = float[4](
  -0.0024148f, +0.0652818f, +0.0093068f, +0.0190645f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer18 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0174032f, +0.1647927f, +0.0420165f, +0.0723485f, +0.0573090f, -0.0302730f, -0.2364199f, -0.0856355f,
  -0.0445713f, -0.2338149f, -0.0658163f, -0.2058991f, +0.0522837f, -0.0588687f, +0.1863819f, -0.2151263f,
  +0.1211742f, +0.1564690f, -0.2049116f, -0.0905701f, -0.2800726f, -0.2929209f, +0.0189573f, -0.0987118f,
  +0.2407139f, -0.0714881f, -0.0214453f, +0.1092241f, -0.1207418f, +0.1944182f, +0.3384705f, +0.0204941f,
  -0.1078177f, +0.0209633f, -0.1722028f, -0.1750887f, -0.5841524f, +0.0968624f, -0.2716369f, -0.0592987f,
  -0.0162268f, -0.3127862f, -0.1745307f, -0.0322009f, -0.3092983f, +0.1508978f, +0.1118800f, +0.1035084f,
  +0.0332790f, +0.2925787f, +0.2440166f, -0.1016312f, -0.1640668f, +0.1381175f, -0.2781228f, +0.1825786f,
  -0.2108695f, +0.0138266f, +0.0042918f, -0.0908329f, -0.2063900f, +0.0896862f, -0.3477272f, -0.0987448f,
  -0.0650123f, -0.1434248f, -0.0620795f, -0.0172057f, -0.5948995f, -0.0738837f, -0.1971975f, +0.0257088f,
  +0.0550428f, +0.1867012f, +0.1019923f, +0.1694063f, -0.0678761f, -0.0649178f, -0.0273662f, +0.1896600f,
  -0.1282203f, +0.0748496f, +0.0983107f, -0.0908290f, +0.0814806f, -0.0161308f, +0.1863951f, -0.1237796f,
  +0.1617059f, +0.0309244f, -0.0518182f, +0.0901419f, -0.1433179f, +0.0777535f, +0.0694091f, -0.2240635f,
  +0.1109639f, -0.0174502f, -0.0606547f, -0.3035558f, +0.0952322f, -0.1699909f, +0.1118828f, -0.0323745f,
  +0.3184405f, -0.2483516f, -0.0316522f, -0.0187792f, -0.1172917f, -0.0959279f, -0.0750001f, +0.0495091f,
  -0.0130030f, -0.0452623f, -0.1723640f, +0.0103459f, +0.2888062f, +0.5664004f, -0.0572463f, -0.2116634f,
  +0.0319959f, +0.0770923f, -0.1514951f, -0.1470148f, -0.0086293f, -0.1687599f, -0.0201888f, +0.0513338f,
  +0.1833560f, -0.0947844f, +0.0696398f, -0.0923426f, -0.0270872f, -0.3440288f, -0.0147151f, -0.1303200f,
  +0.0718368f, -0.0058379f, +0.0348525f, -0.1298848f, +0.1503820f, -0.3135434f, +0.0789194f, +0.1229596f,
  +0.0273548f, +0.0097170f, +0.2049783f, -0.0925126f, -0.0461426f, -0.0583499f, +0.3770187f, +0.1813123f,
  +0.0400239f, +0.1256995f, +0.1937773f, +0.1350355f, +0.0029380f, -0.1654331f, +0.1084196f, -0.0245533f,
  -0.0694234f, +0.0002886f, -0.1286275f, +0.2158058f, -0.0979854f, +0.1432984f, -0.1425963f, +0.0844314f,
  +0.0929318f, +0.0803370f, +0.0870779f, +0.1289020f, -0.1063845f, -0.1075566f, -0.0372176f, +0.2527437f,
  +0.2117586f, -0.1210321f, +0.0332014f, +0.0867891f, +0.1364284f, -0.3113554f, +0.3432010f, +0.2670110f,
  -0.1187353f, -0.2697243f, -0.3202295f, +0.2809442f, +0.0308706f, +0.4497946f, +0.1816383f, -0.2282854f,
  +0.0652243f, -0.0128332f, -0.1155987f, -0.1636473f, +0.0987584f, +0.0273675f, +0.0756370f, +0.1839900f,
  +0.0979624f, +0.1298943f, +0.3584392f, +0.2047749f, +0.0109636f, +0.3387886f, +0.1887731f, +0.1302166f,
  -0.0385728f, +0.0648807f, -0.0773326f, +0.0685355f, +0.1993827f, +0.0557103f, +0.0298381f, -0.1752825f,
  -0.0416026f, +0.0217395f, +0.1387917f, -0.1927913f, -0.1560655f, -0.0087233f, -0.1852561f, +0.0263236f,
  -0.0452700f, +0.2420395f, +0.0324821f, -0.2249148f, -0.1092648f, +0.0636473f, -0.0801147f, -0.2458792f,
  +0.0667801f, -0.1108779f, +0.0447258f, +0.0116990f, +0.1238494f, +0.0476609f, -0.0043609f, +0.2755367f,
  -0.1021438f, +0.1551619f, -0.0823191f, -0.2760265f, -0.3541646f, +0.0016335f, -0.0464519f, -0.1629289f,
  +0.0235940f, -0.1102754f, -0.0333927f, +0.2207419f, -0.2477856f, -0.6230307f, -0.2615125f, +0.1816213f,
  -0.1099013f, -0.1050561f, -0.1610189f, +0.1764849f, -0.2867181f, +0.4237498f, +0.1503527f, +0.2609166f,
  -0.1262462f, -0.0566035f, -0.0685469f, +0.2444285f, -0.1512712f, +0.0121336f, -0.0094711f, +0.0336233f,
  -0.0397406f, -0.1471362f, -0.0732144f, -0.2377697f, -0.1586853f, -0.5448759f, -0.2135969f, -0.3119605f,
  +0.0344886f, +0.1781396f, +0.0110669f, +0.0306155f, -0.1042807f, +0.0858120f, -0.0618767f, +0.1343269f
);

const float biases[4] = float[4](
  +0.0347254f, +0.0159337f, -0.0465174f, +0.0257711f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer18 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0596647f, -0.0051781f, -0.0373091f, +0.0833794f, +0.0442931f, -0.1745572f, -0.2529595f, -0.1871496f,
  +0.0761961f, -0.3394637f, +0.0856220f, -0.1398471f, -0.0630401f, -0.1192873f, +0.1043501f, -0.2528854f,
  -0.0405204f, +0.1824201f, +0.0967336f, +0.1400507f, -0.2253077f, -0.1322594f, -0.0437620f, -0.3018282f,
  -0.0903875f, -0.1164634f, +0.0654480f, -0.1857087f, -0.3387970f, +0.0107785f, -0.5472317f, -0.0075609f,
  +0.2026510f, -0.5854387f, +0.1700308f, -0.0010268f, -0.1449389f, -0.2572280f, +0.4242706f, -0.0995163f,
  -0.2019488f, +0.1446828f, -0.0694400f, +0.2831738f, -0.1152140f, +0.1024010f, -0.1037158f, -0.1883350f,
  -0.1108855f, +0.1046396f, +0.1746434f, +0.0062599f, -0.3843747f, -0.0082937f, -0.1868242f, -0.0221746f,
  +0.1472023f, -0.2188521f, -0.1958201f, -0.0394371f, -0.1385083f, -0.0374756f, -0.0980671f, +0.1108133f,
  +0.0115215f, -0.0603911f, -0.1649232f, +0.0809438f, -0.0184433f, -0.1895034f, -0.2230201f, +0.0573226f,
  +0.0386000f, +0.2165536f, -0.1214362f, -0.0747766f, +0.2566726f, -0.0128258f, +0.2184904f, +0.0622118f,
  +0.2476922f, -0.0708321f, +0.0579629f, +0.1825939f, +0.1720973f, -0.0557615f, +0.3508042f, -0.3240122f,
  +0.1776778f, +0.0638440f, -0.1203488f, -0.0508664f, +0.3025448f, +0.1082923f, +0.2362279f, -0.1083212f,
  +0.0256136f, -0.1827429f, -0.0104193f, -0.0922927f, +0.0869613f, +0.1568852f, -0.0328713f, +0.2533897f,
  -0.1762809f, -0.1055885f, +0.1088402f, -0.1782950f, +0.4167069f, +0.0753952f, +0.2977142f, -0.0725567f,
  +0.2906427f, -0.1412514f, -0.0534059f, +0.0772414f, +0.3458780f, +0.0423014f, +0.3475214f, -0.0882031f,
  -0.0803370f, -0.2453740f, -0.0456911f, +0.1452735f, -0.1349013f, -0.0450577f, +0.1516311f, +0.0158682f,
  +0.1997081f, -0.1845738f, +0.0615093f, +0.1185016f, -0.2622732f, -0.0915380f, +0.3461843f, +0.0409064f,
  +0.0604788f, -0.0160994f, -0.0275300f, -0.1952094f, -0.2671609f, +0.1748269f, -0.0674497f, -0.2954535f,
  -0.0338263f, +0.1017076f, -0.1180102f, -0.2052371f, +0.1723769f, -0.0877844f, -0.2038783f, -0.2033382f,
  +0.2340849f, -0.0266987f, -0.0607826f, -0.0136327f, -0.0062920f, +0.2091737f, +0.0202673f, +0.0452540f,
  +0.0389940f, +0.1822042f, +0.3260282f, +0.0088167f, -0.1408476f, -0.0954473f, +0.0431592f, +0.0502306f,
  -0.1566134f, -0.0055000f, -0.0721598f, +0.2837967f, -0.0504875f, -0.1684051f, +0.1234849f, -0.2264739f,
  +0.0004057f, -0.0550213f, +0.1232561f, +0.1222493f, +0.3737879f, +0.2807724f, -0.2573286f, +0.1422119f,
  -0.1126952f, +0.1992388f, -0.1295955f, +0.2026034f, -0.0528598f, +0.0309656f, -0.2353898f, -0.1601203f,
  +0.0550173f, +0.0105727f, -0.0053857f, +0.1819530f, -0.0879101f, +0.1227554f, +0.1094568f, +0.2700360f,
  +0.0689685f, +0.1746292f, +0.1072038f, -0.1508782f, +0.0215124f, -0.1352836f, +0.1525288f, +0.2186033f,
  +0.0350906f, -0.0673742f, +0.0669765f, +0.1330830f, -0.1669432f, +0.2429453f, -0.0766665f, -0.1462960f,
  +0.2519733f, +0.0765076f, +0.0486207f, -0.0103788f, -0.1798670f, -0.0519191f, +0.4162770f, +0.2047878f,
  -0.1962762f, +0.1624327f, +0.2140344f, -0.1750052f, -0.1331816f, +0.1142921f, -0.4000435f, -0.1424333f,
  -0.0135098f, +0.1644575f, -0.0834135f, +0.1333272f, -0.3652456f, +0.1556207f, +0.1089494f, +0.1767275f,
  +0.0575065f, -0.0760474f, -0.0668767f, -0.1531678f, +0.6618254f, -0.1432412f, +0.2477337f, +0.0933418f,
  -0.3231032f, +0.0253772f, +0.1319736f, -0.1129591f, +0.5151941f, -0.0595530f, -0.2318644f, +0.0682445f,
  +0.2259841f, -0.0924052f, -0.4606684f, +0.0599394f, +0.1767295f, +0.4102285f, -0.1203216f, -0.1064964f,
  +0.3151785f, -0.3829786f, -0.0987536f, -0.0426826f, -0.0609031f, -0.2724503f, +0.2292845f, +0.0710381f,
  +0.0497315f, +0.1751280f, +0.2440649f, +0.1598504f, -0.3554876f, -0.0821367f, -0.1118716f, +0.0605705f,
  +0.0937294f, -0.0097760f, +0.1835434f, -0.0239860f, -0.2254552f, +0.4574959f, -0.0032814f, +0.1027002f
);

const float biases[4] = float[4](
  -0.0319038f, -0.0251270f, +0.0045748f, -0.0375843f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer19 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0317434f, -0.1845545f, -0.0953633f, -0.1276677f, -0.1997897f, +0.0666696f, +0.0025031f, -0.0220279f,
  -0.0030398f, +0.0327125f, -0.0451948f, -0.0022581f, +0.2045428f, -0.0349253f, -0.0971514f, -0.0845078f,
  -0.2049903f, -0.0422217f, +0.1723512f, +0.0363669f, -0.2635752f, +0.1069768f, -0.1328536f, -0.0417976f,
  -0.0943381f, +0.0798971f, -0.1082842f, -0.0536506f, +0.1723370f, +0.1235950f, -0.1055893f, -0.0270182f,
  -0.1280469f, +0.1216678f, +0.2423934f, -0.0040358f, -0.0067181f, -0.1164600f, +0.0176336f, -0.0499472f,
  -0.1026879f, -0.1848885f, +0.1082519f, +0.0892845f, -0.1505841f, +0.1305388f, +0.0021132f, -0.0000050f,
  -0.2152100f, +0.0768746f, +0.0841785f, +0.0595724f, -0.0665033f, +0.0188567f, +0.0744825f, -0.1445574f,
  +0.0845174f, -0.0170057f, +0.0294582f, -0.0673550f, -0.0786403f, -0.1251167f, -0.3124320f, -0.1364571f,
  +0.1419773f, -0.1502122f, -0.1381563f, -0.2114513f, -0.0443255f, -0.0103916f, +0.0789847f, -0.1928901f,
  -0.1982875f, +0.0348995f, +0.1054027f, -0.0802814f, -0.2533908f, -0.0858247f, +0.0543767f, -0.1606826f,
  -0.0442426f, -0.0317184f, -0.0081773f, +0.1591660f, +0.2544870f, +0.1387414f, -0.1194015f, -0.0620276f,
  +0.1872819f, -0.1044189f, -0.1426427f, +0.1136093f, +0.0195106f, +0.2146365f, -0.0286318f, -0.0973212f,
  +0.0714192f, +0.0564510f, +0.1962833f, -0.0937346f, -0.1840045f, -0.0292057f, -0.0192523f, +0.1859000f,
  -0.2191020f, -0.3106899f, +0.0406116f, -0.1702209f, -0.0907458f, +0.1668220f, -0.1999113f, -0.5089150f,
  -0.0607812f, -0.0230520f, +0.1293699f, -0.0777935f, -0.0913702f, -0.3031564f, +0.0568445f, -0.1833971f,
  -0.1314062f, +0.1386055f, -0.4729462f, -0.0950046f, +0.4629665f, -0.1957846f, +0.1331650f, +0.2640379f,
  +0.1217531f, -0.1001387f, +0.2586675f, -0.0458650f, -0.2550066f, +0.2236473f, +0.4040502f, +0.2050251f,
  -0.1175668f, -0.0941851f, +0.0435429f, -0.1420456f, -0.2305342f, +0.1871551f, -0.0128425f, +0.2008716f,
  -0.1837136f, -0.0849782f, +0.1608329f, -0.0146111f, -0.0794334f, -0.0929108f, +0.1722632f, -0.0129922f,
  +0.1098878f, -0.0017953f, -0.0985443f, -0.3798777f, +0.2165591f, +0.2965169f, +0.0354605f, -0.1132113f,
  +0.0586824f, +0.1451218f, -0.2965125f, -0.0305892f, -0.0532520f, +0.2825139f, +0.1070923f, +0.1659903f,
  -0.0866855f, +0.1728436f, +0.4176727f, +0.1715886f, +0.1877049f, +0.0398034f, +0.1756165f, +0.0110327f,
  -0.0902749f, +0.1303076f, -0.0735841f, -0.2779174f, +0.2335677f, +0.0940708f, -0.0920679f, +0.0877526f,
  -0.2327195f, +0.1011243f, -0.0179079f, -0.0410154f, +0.2590896f, +0.0124614f, -0.1001174f, +0.0071620f,
  -0.1403087f, +0.0845698f, -0.0443175f, +0.1959112f, +0.0159745f, +0.1311284f, +0.0995755f, -0.0595240f,
  -0.2469491f, -0.2074527f, -0.0345485f, -0.2185834f, -0.0100678f, -0.0773548f, -0.0382683f, -0.2012835f,
  -0.1332715f, +0.0281551f, +0.1833210f, -0.0449086f, -0.1739887f, +0.0365333f, -0.1109047f, -0.0007341f,
  -0.0667623f, +0.0525867f, -0.2256823f, -0.2719657f, -0.1707368f, -0.0489695f, +0.0683230f, -0.1574881f,
  -0.3265568f, -0.0615734f, +0.0942174f, +0.0599458f, -0.2003979f, +0.0903615f, -0.1309165f, -0.0459120f,
  +0.0827903f, +0.0222089f, +0.2847311f, +0.0009499f, +0.1249190f, +0.2486645f, +0.0075345f, +0.2464472f,
  +0.3734656f, -0.0627697f, -0.4241759f, +0.4252668f, +0.1777550f, -0.1840898f, -0.2974790f, -0.1222888f,
  +0.2106894f, -0.0447571f, +0.2209549f, +0.0546248f, -0.0303842f, -0.0110628f, +0.3279866f, +0.1123448f,
  +0.0962749f, +0.0191799f, +0.3228412f, -0.3608949f, -0.3827093f, -0.4564019f, -0.2026762f, +0.0462135f,
  +0.5925749f, -0.0581114f, -0.1502839f, +0.2428732f, +0.3585204f, -0.2366807f, +0.2020180f, -0.0643700f,
  +0.2245903f, -0.1887462f, -0.1229081f, +0.0528403f, +0.2533969f, -0.4996572f, -0.0345452f, -0.1386896f,
  +0.1130630f, -0.0113019f, +0.1729328f, +0.1359834f, +0.1890967f, -0.0117991f, -0.1752042f, -0.4627315f
);

const float biases[4] = float[4](
  +0.0119614f, +0.0081867f, +0.0100764f, +0.0746738f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer19 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0889053f, +0.0356514f, -0.0532336f, -0.0243330f, -0.0510668f, -0.1927120f, -0.0104459f, -0.2693902f,
  +0.0925671f, -0.0936605f, -0.0749385f, +0.0780633f, +0.0592958f, -0.1972156f, -0.1544560f, +0.0035515f,
  -0.1158706f, -0.2262359f, +0.1157282f, +0.1870244f, -0.0087117f, -0.1250974f, +0.3170463f, -0.5659677f,
  +0.2460746f, -0.0947083f, -0.0252277f, +0.0840384f, +0.3217611f, +0.1658686f, -0.0641148f, -0.0257999f,
  +0.1858864f, +0.1614229f, -0.2916912f, -0.1957847f, -0.2428779f, +0.0162754f, -0.1199311f, -0.3335558f,
  -0.0445656f, -0.0698602f, -0.0467506f, -0.1719410f, +0.2518913f, -0.0923710f, +0.4597145f, -0.1920963f,
  -0.1089872f, -0.0423454f, -0.0556678f, +0.0915546f, -0.0115001f, +0.0469713f, -0.1771388f, -0.2625587f,
  -0.1767256f, -0.0448062f, -0.3450202f, -0.0550813f, -0.2744963f, +0.2480670f, -0.0364422f, -0.0471438f,
  -0.2130133f, -0.2495331f, -0.2259486f, +0.0983826f, +0.0254408f, -0.1477797f, +0.1640301f, -0.0558965f,
  -0.1272285f, +0.1526926f, +0.0659057f, -0.0986267f, +0.0369372f, -0.1561435f, +0.0695631f, +0.0839986f,
  -0.1209766f, +0.0541245f, +0.2269263f, +0.0371954f, +0.1606799f, +0.1991136f, -0.1411099f, -0.1445827f,
  +0.1033999f, -0.1200215f, +0.3822440f, -0.0467156f, -0.0251140f, +0.0845143f, +0.0393183f, +0.1473865f,
  +0.1013864f, -0.0870161f, -0.0639259f, +0.0493619f, +0.0921089f, -0.0681761f, -0.2286438f, -0.0229256f,
  -0.3503727f, -0.1603102f, -0.0557716f, +0.0320615f, -0.0896471f, +0.0496904f, -0.0334697f, -0.1704334f,
  +0.0530246f, -0.0794190f, +0.2403786f, -0.2474248f, -0.4325928f, -0.0336224f, +0.1250278f, -0.2355958f,
  -0.0752150f, -0.0742274f, +0.1911989f, +0.1356281f, -0.1588776f, +0.0008576f, -0.2268444f, -0.0382547f,
  +0.1722515f, +0.2391993f, -0.2682712f, +0.1105105f, -0.0921093f, +0.1513326f, -0.0145621f, -0.2018247f,
  +0.0263429f, -0.0868649f, +0.1728137f, -0.1402090f, -0.1453038f, +0.1572931f, -0.1035964f, -0.0571922f,
  -0.0595229f, +0.0992093f, +0.1082806f, +0.1050557f, +0.1739133f, -0.0314269f, +0.0521327f, -0.1196440f,
  -0.1928778f, +0.1422956f, -0.1996220f, -0.0994710f, -0.2753227f, +0.2369927f, -0.1317047f, +0.0098743f,
  -0.0658243f, -0.0243640f, -0.0704497f, +0.0951259f, -0.2044788f, -0.1818058f, -0.1196888f, -0.1107744f,
  -0.0660871f, -0.1777724f, -0.0336700f, +0.0992627f, +0.0943009f, +0.0533220f, +0.0679240f, -0.0337817f,
  +0.2054335f, -0.2957701f, -0.1658727f, -0.0894105f, -0.2135291f, +0.0042216f, +0.0074973f, -0.0477717f,
  -0.4427935f, -0.0372037f, -0.2293376f, +0.0055445f, -0.1617854f, +0.0136311f, -0.3033217f, +0.0936243f,
  +0.0202214f, +0.1636797f, +0.0717663f, -0.1407656f, +0.0696477f, +0.0688360f, +0.0720348f, -0.1010687f,
  +0.2383973f, -0.0575593f, +0.1441926f, +0.0876264f, -0.0972328f, +0.0924870f, -0.2457752f, -0.0110356f,
  -0.2565209f, +0.0601978f, -0.2701613f, +0.2674652f, -0.1139311f, +0.2429653f, +0.1547682f, -0.0291558f,
  +0.0392573f, +0.0130468f, +0.1551598f, +0.1019001f, +0.1212683f, -0.0335295f, -0.1498624f, +0.0291819f,
  +0.0741588f, +0.0345242f, +0.0624312f, -0.1744739f, +0.3043506f, +0.0827417f, +0.0837866f, +0.0915964f,
  -0.0760625f, -0.0070717f, +0.0437875f, -0.1395629f, +0.2209840f, -0.1713266f, +0.1302945f, -0.1284755f,
  -0.1401474f, -0.1353640f, -0.0969586f, -0.2282638f, +0.1523555f, -0.0541245f, +0.0564207f, +0.1930759f,
  -0.0694083f, -0.1029479f, -0.0295544f, -0.2316210f, +0.2283517f, +0.2002543f, -0.1407893f, +0.1546444f,
  -0.0876303f, +0.2275467f, +0.1745511f, +0.0303699f, -0.0721625f, +0.0350730f, -0.0823759f, +0.0863727f,
  -0.2050182f, +0.0124304f, -0.0245510f, +0.0078143f, -0.1612536f, +0.0104079f, +0.1267132f, +0.1030866f,
  -0.0109468f, +0.1614069f, -0.1999541f, -0.0396302f, +0.1255357f, +0.1488977f, +0.1930351f, +0.1491882f,
  -0.1164244f, +0.0762590f, -0.2089593f, -0.0868279f, -0.0878796f, +0.0192806f, +0.0903939f, +0.0154743f
);

const float biases[4] = float[4](
  +0.0221478f, -0.0214477f, +0.0419359f, +0.0132175f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer20 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0040497f, -0.1476204f, +0.1089674f, +0.2092628f, +0.0391562f, +0.0819752f, +0.2080281f, +0.0072689f,
  -0.3812814f, -0.5251196f, +0.3380885f, -0.1279156f, -0.0418125f, +0.0707468f, +0.0730733f, -0.0818846f,
  +0.1804569f, +0.0727461f, +0.0142034f, -0.3848001f, +0.1087122f, -0.0140715f, -0.2790948f, +0.1394561f,
  +0.1457605f, -0.1722420f, +0.0390254f, +0.2470902f, -0.1397804f, +0.1566563f, +0.1699309f, -0.0265470f,
  +0.0192663f, +0.3274022f, -0.1868706f, +0.1596782f, -0.2873802f, +0.0618210f, +0.2541249f, -0.0649456f,
  +0.2028664f, -0.1976644f, -0.0149798f, +0.0969603f, -0.1625622f, +0.0434270f, +0.0388540f, +0.1031721f,
  +0.3172647f, +0.0129645f, -0.1375749f, -0.3410196f, -0.1147410f, -0.2364082f, -0.0243007f, -0.0347518f,
  -0.2483235f, -0.1126082f, +0.0728322f, -0.2808784f, -0.2427829f, +0.0295436f, +0.0269295f, -0.0553173f,
  -0.1460387f, +0.0019354f, +0.0246930f, +0.0774380f, -0.2445949f, +0.0502602f, -0.1455829f, +0.1241899f,
  +0.0522430f, +0.0597552f, -0.0131139f, +0.0349778f, -0.1877326f, +0.0273180f, -0.0943234f, +0.0037121f,
  +0.0567788f, +0.0638731f, +0.1314836f, +0.0797922f, +0.0181900f, -0.1062999f, -0.0599400f, +0.0169065f,
  -0.1719292f, +0.3879471f, -0.0528525f, +0.1818257f, -0.1566444f, +0.1181230f, -0.1574831f, -0.1795567f,
  +0.0437974f, -0.0074467f, +0.0452682f, +0.2236214f, -0.0853513f, +0.2135873f, -0.0334519f, -0.0671807f,
  +0.1002742f, +0.3333583f, -0.1843606f, -0.1925929f, +0.0741095f, -0.2080251f, +0.0678382f, +0.0134612f,
  -0.0738352f, -0.0787293f, +0.1202577f, +0.0919443f, -0.1492400f, +0.3562178f, +0.1119190f, -0.0788549f,
  +0.2572820f, -0.0587393f, -0.1868426f, -0.1844690f, -0.2192330f, +0.1161824f, +0.0688579f, +0.0012031f,
  +0.0047029f, -0.0421224f, -0.1553938f, +0.0741332f, -0.1227246f, +0.1518350f, +0.1673814f, -0.0154587f,
  -0.0088802f, +0.0836059f, -0.0544009f, -0.0767878f, -0.0819537f, +0.1076035f, +0.0434346f, -0.0918946f,
  +0.0892922f, -0.1950875f, +0.0473458f, +0.0015612f, -0.1328610f, +0.1020941f, -0.0142587f, -0.0558456f,
  -0.3196073f, -0.0480300f, +0.3241182f, +0.4526825f, +0.3732339f, +0.0836135f, +0.1343583f, +0.1900794f,
  -0.0039684f, +0.3184900f, +0.1863268f, +0.4079882f, +0.1240987f, +0.0270585f, +0.0906166f, +0.0647757f,
  +0.0019661f, -0.0298829f, +0.0557602f, -0.0823920f, +0.0951047f, -0.2522832f, -0.0504495f, +0.0046628f,
  +0.1378423f, -0.3934127f, -0.1216154f, +0.6031165f, +0.3016663f, -0.0971138f, +0.0542728f, +0.0507823f,
  -0.0838151f, +0.2755559f, +0.0502838f, +0.0157707f, +0.1476624f, -0.1327478f, -0.0561301f, +0.3275420f,
  -0.0895675f, +0.0259579f, -0.2221610f, +0.0877079f, +0.3119352f, +0.0007280f, -0.3979741f, -0.0440687f,
  +0.1217475f, -0.0589396f, -0.0155493f, +0.3826104f, +0.0804366f, -0.2647854f, +0.0430834f, +0.0800937f,
  +0.1413317f, +0.0002922f, +0.2787148f, +0.0624583f, +0.1160144f, -0.0068270f, +0.1627855f, -0.1034353f,
  -0.0447498f, +0.0525404f, +0.1641598f, -0.0195179f, -0.0754144f, +0.0146901f, +0.0253168f, +0.1512922f,
  -0.0056676f, -0.3970003f, -0.2089023f, +0.0626539f, +0.1707947f, -0.0656467f, -0.0258536f, +0.2489907f,
  -0.3816913f, +0.0071202f, -0.1686083f, -0.0845368f, -0.2181177f, -0.1218892f, -0.0315585f, -0.0252593f,
  +0.0404177f, +0.0587446f, +0.0290967f, -0.0095341f, +0.1995658f, -0.0142489f, +0.1071958f, +0.0840224f,
  -0.0357088f, +0.2744479f, +0.2095349f, -0.1081315f, -0.1187307f, +0.0500844f, +0.0233294f, -0.0481415f,
  -0.0254529f, -0.2182274f, +0.2448965f, -0.1070412f, -0.0431988f, +0.1047247f, +0.0771515f, +0.0911825f,
  -0.0258853f, -0.0127066f, -0.4984956f, +0.1358494f, +0.0063128f, +0.1876156f, +0.0189519f, +0.2087103f,
  -0.0287649f, +0.1494491f, -0.2546438f, -0.0808488f, +0.1217512f, +0.1643250f, -0.1752622f, -0.0206488f,
  +0.1299928f, -0.0203773f, +0.0623079f, -0.1208505f, -0.1022061f, +0.0186461f, -0.1119956f, -0.1095231f
);

const float biases[4] = float[4](
  +0.0141847f, -0.0055019f, -0.0226378f, +0.0055530f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer20 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0345226f, +0.0377823f, +0.1495431f, -0.2551313f, +0.2846801f, +0.1413173f, +0.0317931f, -0.1640662f,
  -0.2158222f, +0.2360981f, -0.0474836f, -0.2876877f, +0.0239226f, +0.0294697f, +0.2105741f, -0.0313311f,
  -0.0235104f, -0.1905126f, -0.0477216f, -0.1361314f, +0.3471481f, +0.1740951f, -0.0223373f, -0.0861721f,
  +0.2166277f, +0.0266300f, +0.0086118f, +0.1431551f, +0.0298348f, +0.1314829f, -0.0231209f, -0.1823417f,
  -0.1563646f, -0.2238871f, -0.2187669f, +0.2893368f, +0.0383777f, +0.0529295f, +0.2114698f, +0.0451223f,
  -0.0145387f, +0.2094997f, -0.1116309f, +0.1313348f, -0.2039847f, +0.0990607f, -0.0844572f, +0.2607935f,
  +0.2931920f, -0.0907055f, -0.1848047f, -0.4796351f, -0.0245383f, -0.0497272f, -0.1102392f, -0.2435606f,
  -0.1883146f, -0.1599013f, +0.1459512f, -0.0101984f, -0.2288507f, -0.0786286f, +0.1777621f, -0.0230992f,
  -0.0778938f, +0.1131788f, -0.1134678f, -0.0490494f, -0.3053277f, +0.0685309f, -0.0647050f, -0.1932014f,
  +0.0276032f, -0.0196482f, -0.1708259f, +0.0159459f, +0.5202816f, +0.1569872f, +0.2483139f, -0.2364145f,
  -0.0040767f, +0.4935856f, -0.0718236f, +0.1016476f, -0.1468997f, +0.1700626f, -0.0851549f, -0.0499782f,
  -0.1109678f, -0.2309770f, -0.0281333f, -0.1909992f, -0.0010976f, +0.1098660f, -0.1650249f, -0.0975105f,
  +0.1900350f, +0.0526725f, -0.1791755f, -0.5294065f, +0.4214273f, -0.1760764f, +0.3374451f, -0.0528277f,
  +0.0582298f, -0.0629002f, -0.1281799f, -0.3069282f, -0.0440745f, -0.0411968f, +0.0521576f, -0.1072823f,
  +0.1750676f, +0.1853253f, -0.0911360f, +0.0532295f, -0.0798336f, +0.2913272f, -0.1078074f, -0.1723449f,
  -0.0679809f, -0.0520186f, +0.2390938f, +0.3307614f, -0.0007724f, +0.2180096f, +0.0530820f, -0.0901143f,
  -0.0727048f, +0.1249409f, -0.0861829f, -0.0416270f, +0.0462366f, +0.0717769f, +0.0367769f, -0.0419490f,
  -0.0035156f, -0.2000224f, +0.2254377f, +0.1599115f, +0.0680624f, +0.0337800f, -0.0157102f, +0.1010472f,
  -0.2095219f, +0.0476490f, -0.1445037f, -0.1751850f, +0.0453012f, -0.1122208f, -0.1973437f, +0.1825380f,
  +0.2554418f, -0.2622626f, +0.1170474f, -0.0334635f, +0.1624554f, +0.0717310f, +0.2541173f, -0.0296944f,
  -0.0319001f, +0.1987244f, +0.0697328f, -0.1120588f, +0.4273902f, +0.0372794f, +0.0475921f, +0.1049865f,
  -0.4507634f, +0.0783241f, +0.0605006f, -0.0646973f, +0.2675260f, +0.1529842f, -0.0966419f, +0.0304148f,
  +0.0665693f, +0.2269356f, +0.1293528f, -0.2563148f, +0.2992248f, -0.0319197f, -0.1677821f, -0.1412825f,
  +0.1812897f, -0.1806101f, -0.1101600f, -0.2117441f, -0.1560468f, -0.2324013f, -0.0348950f, +0.0298752f,
  +0.3796967f, -0.0088920f, -0.2807094f, +0.2825066f, +0.1172268f, +0.0565959f, +0.0219814f, -0.1454104f,
  +0.0976533f, +0.0449579f, +0.1946679f, -0.0044181f, -0.0486514f, +0.0285733f, -0.0964650f, +0.2167774f,
  -0.1263405f, -0.0889276f, -0.1906074f, -0.0268043f, -0.2463743f, -0.1570150f, +0.0075325f, +0.1522893f,
  -0.1619427f, -0.0885847f, -0.2298093f, +0.2327819f, -0.2535140f, +0.2216309f, -0.3274868f, +0.0787703f,
  +0.0548820f, +0.3521615f, +0.2363289f, -0.1272349f, +0.3745418f, -0.0816702f, -0.0350843f, +0.1492255f,
  -0.1052224f, +0.1338132f, +0.1830020f, +0.0561077f, -0.1306175f, +0.1404676f, -0.1664106f, -0.1911182f,
  +0.1939208f, +0.0190818f, -0.1593301f, -0.1855140f, -0.0256991f, +0.4775246f, -0.0133440f, +0.1375212f,
  -0.1226344f, +0.1574629f, -0.0480475f, +0.0482744f, +0.3133141f, -0.0325656f, -0.0153355f, +0.0000161f,
  -0.4619273f, -0.1132911f, +0.0014358f, -0.1846099f, +0.0041151f, +0.4578388f, +0.1559635f, +0.3121306f,
  +0.1020395f, +0.2108735f, -0.1487183f, -0.0731088f, +0.0400322f, +0.1180090f, +0.0451283f, -0.0707700f,
  -0.2071626f, +0.0008122f, +0.3344249f, -0.1933439f, -0.1435774f, -0.2659424f, +0.1537269f, +0.1386778f,
  -0.0745540f, +0.0275339f, +0.0263573f, +0.0244773f, -0.1012562f, -0.0217211f, -0.0833204f, -0.1400634f
);

const float biases[4] = float[4](
  -0.0168310f, +0.0062871f, +0.0041206f, -0.0154944f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer21 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0303329f, -0.0170106f, -0.1650863f, +0.1114544f, -0.1060784f, +0.0234421f, +0.1905001f, -0.1854721f,
  +0.0008403f, -0.0797039f, +0.2680132f, -0.0180312f, +0.2875252f, -0.0842070f, -0.0237144f, -0.0419614f,
  +0.1862547f, -0.2652779f, +0.1891600f, +0.0170590f, -0.0642355f, +0.2317138f, +0.0153246f, -0.2362091f,
  -0.2222626f, +0.2371211f, +0.0348176f, -0.0410348f, +0.4125430f, +0.1641179f, +0.1103336f, -0.1135706f,
  +0.1563509f, -0.1874592f, -0.0846875f, -0.0736758f, -0.0987075f, -0.1090726f, +0.2434430f, -0.1373969f,
  +0.0920583f, -0.3775206f, -0.2622856f, +0.3211987f, +0.0259255f, -0.1732552f, -0.0555310f, -0.6349386f,
  -0.0614684f, +0.0012646f, -0.0764683f, +0.0770356f, -0.3157768f, +0.0434935f, -0.1406474f, -0.1212495f,
  +0.2595558f, +0.0549293f, -0.2956158f, -0.0852640f, +0.1093229f, +0.2018210f, -0.1368644f, -0.1163797f,
  +0.2459075f, -0.2042615f, +0.4562156f, +0.0144658f, +0.0384348f, -0.2624921f, +0.2611195f, -0.0893822f,
  -0.1358698f, -0.0475568f, +0.0879528f, -0.0599687f, +0.0479814f, -0.0317413f, +0.0224296f, +0.0849183f,
  -0.1037716f, -0.4556050f, +0.0069247f, -0.0677236f, -0.1671518f, +0.4892835f, -0.0696860f, +0.1641171f,
  -0.0183561f, -0.0366815f, +0.1970800f, -0.0770284f, +0.3525332f, -0.1522040f, +0.0430611f, -0.2365524f,
  -0.0865285f, +0.0245771f, -0.0830052f, -0.0050639f, -0.2137848f, -0.1673961f, +0.1667483f, -0.0473603f,
  -0.0366139f, +0.0765634f, -0.2950768f, -0.3522027f, -0.0006080f, +0.1331439f, +0.1706135f, -0.0160577f,
  -0.5254365f, -0.1635720f, +0.1165847f, -0.0518592f, -0.6067739f, +0.1393252f, -0.0153862f, -0.1091544f,
  +0.2197404f, +0.1004384f, +0.1136605f, -0.0727760f, -0.1522098f, -0.1114900f, -0.1026626f, +0.1396277f,
  +0.0678635f, +0.0932510f, +0.2285673f, -0.0983977f, +0.0661958f, +0.2042409f, -0.1231381f, -0.2073407f,
  +0.2416796f, +0.0594963f, -0.2602348f, -0.1310075f, -0.0584916f, -0.1814112f, -0.0137571f, -0.0202044f,
  +0.0642738f, +0.1281902f, -0.0193139f, +0.1207507f, +0.1497525f, +0.0472621f, +0.0883304f, -0.1309186f,
  -0.0679708f, -0.0535851f, -0.0709395f, -0.2091111f, -0.1031579f, +0.1955475f, +0.2324264f, -0.0873859f,
  -0.0879532f, +0.3888730f, -0.0151699f, +0.0631856f, +0.3253874f, -0.0384248f, +0.0408922f, +0.0472452f,
  +0.1428476f, +0.0184788f, +0.2565320f, +0.0969245f, +0.1148774f, +0.0393885f, -0.0917027f, -0.1859526f,
  +0.2301846f, +0.0256120f, -0.1163882f, +0.2035106f, -0.2059880f, -0.0099167f, -0.1844187f, -0.0124071f,
  +0.0752828f, -0.1029055f, -0.1833218f, +0.0405187f, +0.1521136f, -0.1312524f, +0.1488705f, -0.0732057f,
  +0.2215128f, -0.0057402f, +0.1331110f, +0.4150842f, -0.0215096f, +0.2316254f, -0.0083486f, -0.2214352f,
  +0.0525810f, +0.1497900f, +0.0603084f, +0.1002607f, -0.2243999f, -0.1734205f, +0.0252522f, +0.2639612f,
  +0.2113516f, -0.0104742f, +0.0908263f, +0.3801242f, +0.0273204f, -0.1087897f, -0.2609492f, -0.0954606f,
  +0.0124659f, -0.0926983f, +0.0561721f, -0.2924068f, -0.2118018f, -0.3265266f, +0.1685245f, -0.0203183f,
  +0.2589960f, -0.2433218f, -0.2314284f, +0.0746446f, +0.0512772f, -0.1167695f, -0.0589811f, -0.3052078f,
  +0.0092617f, +0.2717929f, +0.3921076f, +0.2118542f, -0.1510473f, -0.2902091f, +0.0346293f, -0.1356374f,
  -0.0303831f, -0.0900130f, -0.1198765f, -0.1402441f, +0.3560299f, -0.0243983f, -0.1427881f, +0.3732907f,
  +0.4123849f, -0.0933886f, -0.2545477f, -0.1047411f, -0.0477028f, -0.3446919f, +0.2140221f, +0.0248793f,
  +0.3216579f, +0.1441737f, -0.2000476f, +0.0484873f, -0.0399308f, -0.2226918f, -0.0161407f, -0.0230281f,
  -0.0927064f, -0.0394529f, -0.1338146f, +0.1899903f, -0.0348894f, +0.3790888f, -0.2236355f, +0.1154770f,
  -0.1233541f, -0.0299771f, +0.1578100f, -0.0622402f, +0.2025871f, -0.0358518f, +0.5218812f, -0.1009382f,
  +0.1062877f, -0.0553809f, -0.1225029f, +0.1855011f, +0.0501402f, +0.2091456f, -0.2887065f, +0.2544690f
);

const float biases[4] = float[4](
  +0.0356415f, -0.0109455f, -0.0478234f, +0.0030231f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer21 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0853490f, +0.0098792f, +0.0031391f, +0.0933258f, -0.1463986f, +0.0685885f, -0.0767172f, +0.0054232f,
  +0.0423875f, -0.0946431f, -0.0502743f, +0.0841384f, +0.4228903f, +0.0364367f, +0.0495781f, +0.2983305f,
  +0.0252279f, -0.0159434f, +0.1291954f, -0.0866160f, -0.1540938f, +0.0590760f, +0.1868445f, -0.1129014f,
  +0.1003921f, +0.3463154f, +0.1250433f, -0.0585746f, +0.2164740f, +0.1381108f, +0.0464282f, -0.0096035f,
  -0.1835402f, +0.0052153f, +0.1001974f, -0.1378662f, -0.3754437f, +0.0333652f, +0.2805108f, -0.0712377f,
  +0.1400125f, +0.2615091f, -0.0098585f, +0.0643939f, -0.1455043f, -0.1372960f, -0.2025299f, +0.5313966f,
  -0.1215762f, -0.0416914f, -0.1651170f, -0.0326896f, -0.0990978f, +0.0089265f, -0.2351875f, +0.0041061f,
  +0.2559154f, +0.0185853f, +0.0952360f, -0.2021546f, -0.0804982f, +0.2049425f, -0.1857309f, -0.1682827f,
  +0.0573092f, -0.0548416f, -0.1096368f, -0.0543098f, -0.1773487f, -0.2012535f, -0.5245991f, +0.3361008f,
  -0.0326641f, -0.0552271f, +0.1404327f, +0.0522110f, -0.1021176f, +0.1100939f, -0.0667076f, -0.0546740f,
  -0.0591604f, +0.0036001f, +0.0820514f, -0.0392773f, -0.1251204f, +0.1702257f, +0.1118734f, -0.3879668f,
  -0.0460816f, -0.1864765f, +0.2487409f, -0.2321891f, -0.0204124f, -0.1247201f, +0.1245074f, +0.1259342f,
  -0.1632451f, +0.2570019f, +0.0925912f, -0.1073906f, -0.1236839f, +0.1899242f, -0.0041690f, +0.0323189f,
  +0.0315224f, -0.0689446f, -0.4042162f, +0.0597369f, +0.0442337f, +0.0919249f, -0.2318983f, -0.1148559f,
  +0.2480292f, +0.0340505f, +0.0112853f, -0.1554063f, -0.2288103f, -0.0942396f, -0.2303244f, -0.1715624f,
  -0.0215630f, +0.0794203f, +0.0706918f, -0.3094746f, -0.1312800f, -0.0294228f, +0.0036423f, -0.0570304f,
  -0.0310262f, +0.0815537f, -0.0061597f, +0.1016393f, +0.2508971f, +0.0131414f, -0.1401940f, +0.2619203f,
  +0.0767482f, -0.1105546f, -0.1036040f, +0.0126838f, -0.0580010f, +0.2486700f, -0.0410043f, -0.1113450f,
  +0.1968666f, +0.3083566f, -0.1357920f, +0.2817642f, -0.2997763f, -0.2429489f, -0.0533965f, -0.0903487f,
  -0.2211270f, -0.1501052f, +0.0449251f, +0.1651529f, +0.0432880f, +0.0240464f, -0.0655272f, +0.1151242f,
  +0.1566093f, +0.0443313f, +0.0183253f, -0.0629335f, +0.2124433f, -0.1169357f, -0.0324377f, +0.1562807f,
  +0.2074505f, -0.2248061f, +0.0328570f, +0.4146287f, -0.2608581f, -0.5189421f, -0.2262302f, -0.0420892f,
  +0.0285489f, +0.0832612f, +0.1312379f, +0.2037861f, +0.1584844f, -0.0197067f, -0.1514657f, +0.1040871f,
  -0.0287740f, +0.2968252f, +0.1191305f, +0.2275819f, +0.1067374f, +0.0968178f, +0.0827282f, +0.1395107f,
  +0.1295600f, -0.1835920f, -0.1467907f, +0.1334435f, +0.2409373f, -0.3181588f, -0.0277362f, -0.1507529f,
  +0.1165341f, +0.1061434f, +0.1313504f, +0.0646069f, -0.2584329f, +0.0630653f, -0.1652340f, +0.1784367f,
  +0.0006003f, -0.0798016f, +0.0488922f, -0.1057376f, -0.0327425f, +0.0340638f, +0.0201105f, -0.0904090f,
  -0.1457076f, -0.1170089f, -0.0112899f, +0.0332199f, +0.1969394f, +0.0343087f, -0.0077492f, +0.0617057f,
  +0.3663544f, +0.2141010f, +0.0377345f, +0.1175241f, +0.2993255f, -0.0914582f, -0.0364772f, -0.1189400f,
  -0.0398001f, +0.1136665f, -0.0585000f, +0.1215420f, +0.1168184f, +0.1244205f, -0.0762014f, -0.0427436f,
  -0.2941582f, +0.1546948f, +0.2283712f, +0.0341968f, +0.2031040f, -0.2927278f, +0.2137007f, +0.2559259f,
  +0.0147707f, +0.0823913f, -0.2685407f, +0.1511151f, -0.0131614f, -0.2462916f, -0.1419874f, -0.1567768f,
  +0.2151394f, +0.2156039f, +0.1008775f, +0.3975560f, +0.2639360f, -0.1873650f, +0.0960630f, +0.0225959f,
  +0.1692737f, +0.0197168f, -0.1503092f, -0.1317893f, +0.1810071f, +0.0909555f, -0.1637661f, -0.2887121f,
  -0.3250318f, -0.0768300f, -0.1882704f, +0.1482907f, +0.0877985f, +0.0123088f, +0.2858250f, +0.1105547f,
  +0.0006272f, +0.0274156f, +0.0141831f, -0.1050073f, -0.0682805f, +0.0192768f, +0.1577234f, +0.1377960f
);

const float biases[4] = float[4](
  -0.0133417f, -0.0206344f, +0.0437852f, +0.0107560f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer22 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1320885f, -0.0709096f, -0.4568201f, +0.2252523f, +0.0216058f, -0.3163182f, +0.0130679f, +0.0228468f,
  +0.1364037f, +0.0223000f, -0.0799681f, -0.1479568f, +0.1142034f, +0.0325398f, +0.1411881f, -0.2228864f,
  -0.1931295f, -0.3319885f, +0.0919171f, -0.2555284f, -0.1017497f, +0.0051634f, +0.2837584f, -0.2735149f,
  -0.0018152f, +0.0898193f, -0.2606958f, +0.1136568f, -0.1719219f, -0.2604964f, -0.1900781f, -0.2799171f,
  -0.1904388f, +0.2459275f, +0.2748553f, -0.4234661f, +0.2980645f, -0.2224996f, +0.2574860f, +0.1590012f,
  +0.1623651f, -0.0117936f, +0.1277624f, -0.4439022f, -0.0825164f, +0.1532889f, +0.1286582f, +0.2018100f,
  +0.1429268f, -0.0388759f, -0.2580467f, +0.0726416f, -0.0641615f, -0.0572736f, +0.0726076f, +0.2214533f,
  -0.2448793f, +0.2029494f, -0.0422860f, -0.0914217f, -0.1880340f, -0.2589085f, +0.2052090f, -0.2457927f,
  -0.0420371f, -0.2188842f, -0.1077253f, -0.0135601f, -0.1081666f, +0.4135585f, +0.1748367f, +0.2176351f,
  +0.0057493f, -0.1685160f, +0.0101623f, -0.0091678f, +0.0309047f, -0.0110350f, +0.0498399f, -0.0997875f,
  -0.2363409f, -0.0044426f, -0.0595893f, +0.2068665f, +0.0650866f, -0.1111756f, +0.1471667f, +0.4086578f,
  +0.0450939f, -0.1273265f, +0.0019297f, +0.1362009f, -0.0722973f, -0.1131890f, -0.0435210f, +0.2027851f,
  -0.1715769f, +0.1120787f, +0.0128213f, +0.2139755f, +0.0944129f, -0.1118429f, +0.0344175f, -0.2105754f,
  -0.1845588f, +0.0162204f, -0.1575819f, +0.3732605f, +0.1748703f, -0.0649587f, +0.0218794f, -0.0942945f,
  -0.2178621f, -0.1892105f, -0.2961155f, +0.5922104f, -0.1551404f, +0.0116796f, +0.1698255f, +0.0208538f,
  -0.1111048f, -0.1935399f, -0.3243214f, +0.0638630f, +0.3073301f, +0.1059248f, -0.0507058f, +0.0833121f,
  -0.2656580f, -0.0804581f, +0.1543309f, +0.2050099f, -0.1290015f, -0.0528564f, -0.0805969f, -0.4229859f,
  +0.0845436f, +0.0262537f, +0.0318760f, +0.4003284f, -0.2595389f, -0.1271313f, +0.1675380f, -0.0220730f,
  -0.2164092f, +0.0913080f, -0.0721274f, +0.3662972f, -0.0576845f, +0.2266452f, +0.0939924f, -0.1796306f,
  -0.0288320f, +0.0294756f, +0.1502606f, -0.1837754f, +0.3360692f, -0.0394885f, -0.1308393f, +0.2221566f,
  +0.0492030f, +0.0701645f, -0.2638299f, -0.2405537f, -0.3424604f, +0.0257242f, +0.1608597f, +0.0525633f,
  +0.3276558f, -0.0130523f, -0.0106674f, +0.2356625f, -0.1426998f, +0.1415115f, +0.2286973f, -0.2241824f,
  +0.3720499f, +0.2295778f, +0.2880150f, +0.0630224f, +0.0461067f, +0.0621043f, -0.3300077f, -0.0584733f,
  -0.0098208f, -0.1060571f, -0.1118463f, -0.0242055f, +0.0460823f, +0.0504824f, -0.2797091f, -0.0887874f,
  -0.1456598f, +0.0127552f, -0.0129224f, +0.2830214f, -0.1304481f, -0.0065862f, +0.0456810f, +0.0807912f,
  -0.1533792f, +0.1982925f, -0.0401477f, +0.1150431f, +0.0335998f, +0.0761812f, +0.1770313f, +0.0352161f,
  +0.3807686f, +0.0961862f, -0.2014294f, -0.2722303f, -0.1455727f, -0.1659979f, -0.1214570f, +0.0573331f,
  +0.5837575f, -0.0161503f, +0.0601046f, -0.3497912f, -0.2036820f, -0.0641094f, -0.1597942f, -0.1389150f,
  +0.1061105f, -0.0196431f, -0.0449916f, +0.2204210f, +0.0736061f, -0.2719349f, +0.2169906f, -0.0475907f,
  -0.1751507f, +0.0749712f, -0.1001563f, -0.0544661f, -0.0829492f, -0.1355930f, +0.0337679f, -0.2231648f,
  -0.0285261f, +0.3774090f, -0.3003669f, +0.0088085f, +0.2274033f, +0.0379662f, -0.1540311f, +0.1221749f,
  -0.2057942f, +0.2399101f, -0.4140618f, +0.2486952f, +0.0675159f, -0.0148146f, +0.1048893f, +0.4893665f,
  -0.1119758f, +0.1272508f, +0.3266920f, +0.1326689f, +0.1365320f, -0.0114455f, -0.1237523f, -0.0606256f,
  +0.1376495f, +0.0063151f, -0.2336624f, +0.0398563f, +0.0363240f, -0.1894895f, -0.0075612f, +0.1344389f,
  -0.2196922f, -0.1901472f, -0.2900093f, +0.2843810f, -0.3054072f, +0.1142011f, +0.3431332f, +0.3049931f,
  +0.1925276f, -0.0593639f, +0.1536562f, +0.1074680f, -0.1514127f, -0.1636539f, +0.1492856f, -0.0601320f
);

const float biases[4] = float[4](
  -0.0207581f, -0.0008350f, -0.0130102f, -0.0206195f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer22 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1304795f, +0.0277103f, +0.1220055f, +0.0040717f, +0.2436276f, -0.2288675f, +0.0130617f, +0.1215615f,
  -0.2675328f, +0.0389500f, +0.1091021f, +0.1091733f, +0.0774595f, -0.2498853f, +0.2745622f, +0.2258635f,
  +0.3394502f, -0.0881757f, -0.0850226f, +0.1486543f, -0.0514822f, +0.0854011f, +0.2160351f, -0.0024410f,
  +0.0555802f, +0.1452805f, -0.1389996f, -0.1117231f, +0.1755636f, +0.1529801f, +0.0299293f, -0.4427636f,
  +0.2431706f, -0.1813140f, +0.1683324f, +0.2464410f, +0.2182381f, +0.1626582f, +0.0330653f, -0.2330660f,
  -0.3570420f, -0.0869830f, +0.0853727f, +0.0079091f, -0.0179416f, +0.1318541f, +0.1692663f, -0.1098528f,
  +0.0727141f, -0.2679324f, -0.0401725f, -0.0901662f, +0.1655661f, -0.1780189f, +0.0180945f, -0.2827969f,
  -0.1764368f, +0.0104704f, +0.1905580f, +0.0030223f, -0.3018116f, +0.1547696f, +0.3136592f, -0.0053635f,
  +0.1021267f, -0.2611603f, +0.2865729f, +0.0648903f, -0.1418467f, -0.1188278f, +0.0602404f, +0.1669485f,
  -0.2658172f, -0.0829855f, +0.4534492f, -0.1134239f, +0.2782000f, +0.0701312f, +0.0929304f, +0.1507971f,
  +0.1769620f, -0.1687219f, +0.0928263f, +0.0882237f, +0.0693702f, +0.0732461f, +0.2164450f, +0.0980478f,
  -0.3205084f, +0.2046842f, -0.0855283f, -0.0767362f, +0.0698050f, -0.3599948f, +0.0480242f, +0.2493053f,
  -0.0219993f, +0.0843356f, -0.0628883f, -0.2658930f, +0.1195969f, -0.0367410f, +0.0595736f, +0.1234570f,
  -0.1214641f, +0.3889329f, +0.0397233f, +0.3301417f, -0.0335994f, -0.0193605f, +0.5126718f, +0.1536599f,
  +0.1003340f, +0.2313807f, +0.1883837f, +0.2057082f, -0.0742018f, -0.2394826f, -0.0226396f, -0.3350569f,
  +0.0555445f, -0.1813149f, +0.1353982f, -0.4303345f, -0.1673359f, -0.0761955f, +0.0729472f, -0.2418265f,
  -0.0946690f, -0.0974139f, -0.1153457f, -0.0001050f, +0.1356818f, +0.1974048f, +0.2046263f, +0.0853594f,
  +0.2770900f, +0.1117491f, -0.1577746f, -0.0667305f, +0.0666808f, +0.2348597f, -0.1712044f, -0.0072575f,
  -0.0525412f, +0.2506667f, -0.1466574f, -0.0740059f, +0.1319165f, +0.0992685f, +0.0686425f, -0.0548095f,
  +0.1722510f, -0.2085032f, -0.0961454f, -0.3811664f, +0.0574660f, -0.0565911f, -0.1832508f, +0.0654420f,
  +0.0714869f, +0.2957640f, +0.2576285f, -0.0740965f, +0.0618430f, +0.1637130f, +0.0593997f, -0.0130367f,
  +0.2997693f, +0.0914919f, +0.2185720f, +0.1354927f, +0.0955926f, +0.2016729f, -0.1835994f, +0.2673812f,
  -0.2180680f, +0.0488737f, +0.2611622f, -0.4574690f, -0.4251696f, -0.0793631f, +0.1765287f, -0.0557658f,
  +0.1063173f, -0.0832333f, +0.0997470f, -0.2529926f, +0.3580130f, +0.1292166f, +0.1317336f, +0.1144342f,
  -0.1314157f, +0.1557274f, +0.0064269f, +0.2316322f, -0.2014791f, +0.0447080f, +0.1075143f, -0.0153678f,
  +0.5411032f, -0.3098985f, -0.3286479f, -0.1136649f, -0.2187186f, -0.1561223f, -0.0698175f, +0.0100709f,
  -0.1521390f, -0.2230802f, +0.2851183f, -0.2981361f, +0.1498673f, +0.1595562f, +0.2041332f, -0.2449023f,
  -0.2483736f, -0.0646047f, +0.0264563f, +0.2916015f, +0.1268990f, +0.0623242f, +0.0575681f, +0.1227461f,
  +0.3130166f, -0.0065725f, -0.1519897f, -0.4336183f, -0.1051752f, -0.0382560f, -0.1984857f, +0.1321224f,
  -0.0120760f, +0.2222782f, +0.1476329f, +0.0451698f, +0.1920155f, -0.0719586f, +0.1774549f, +0.2612436f,
  -0.0910902f, -0.0350393f, +0.1410623f, +0.4287571f, +0.1332523f, +0.1615993f, +0.0416267f, +0.1276020f,
  +0.2137022f, +0.1651539f, +0.0820528f, -0.4837724f, -0.2725620f, +0.2728125f, -0.2002805f, +0.1217699f,
  +0.1180000f, -0.2226435f, +0.0570310f, +0.3155743f, +0.0975535f, -0.2568628f, +0.5248495f, -0.1496915f,
  +0.2317882f, +0.1442164f, +0.3595440f, +0.3022783f, -0.0325938f, +0.0757806f, -0.1566668f, -0.0638320f,
  -0.0218201f, +0.1661479f, +0.3108574f, -0.1924795f, +0.0775060f, +0.0242189f, +0.0520738f, -0.0549588f,
  -0.1351809f, +0.0299618f, +0.1212807f, +0.0491832f, -0.1731601f, +0.1138516f, +0.4102273f, -0.0231149f
);

const float biases[4] = float[4](
  +0.0078286f, +0.0279394f, +0.0268202f, -0.0417002f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer23 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1795875f, +0.0793905f, -0.0618103f, +0.1237521f, -0.0024267f, -0.1757706f, -0.0782970f, -0.2907721f,
  +0.0657716f, +0.2180711f, +0.0912296f, -0.0177018f, -0.0635536f, -0.0957372f, +0.0057525f, -0.0069010f,
  +0.3828513f, +0.0879122f, -0.1216568f, +0.2493529f, -0.1121541f, -0.1489707f, -0.1644735f, -0.0513215f,
  +0.4292203f, -0.1339973f, -0.0411625f, -0.0988733f, +0.0942704f, -0.1389956f, +0.0256477f, -0.1518085f,
  -0.1945219f, +0.2761266f, -0.0651481f, +0.0982893f, +0.1952977f, -0.2414842f, -0.0091364f, -0.2523359f,
  -0.0271488f, -0.1516566f, +0.1468649f, +0.0500757f, -0.1975685f, +0.1347603f, -0.2770268f, +0.0805657f,
  +0.2820773f, -0.2015786f, +0.1732159f, +0.1389435f, +0.0219296f, +0.0011722f, -0.0105540f, -0.2197548f,
  +0.0916897f, +0.0781403f, -0.2641452f, +0.4226580f, +0.0340449f, -0.0095072f, +0.1777807f, -0.1071717f,
  +0.4587845f, +0.0833889f, +0.0774845f, -0.2956591f, +0.3783430f, +0.2570688f, +0.0078964f, -0.1585629f,
  +0.0980033f, +0.0129926f, +0.1954292f, +0.0581263f, -0.2087126f, -0.1749561f, +0.0236042f, -0.0390916f,
  +0.1347328f, -0.3965480f, +0.2537982f, -0.1077137f, -0.1564999f, -0.1771815f, +0.1093391f, -0.2565246f,
  -0.1301620f, -0.1228434f, +0.1699299f, -0.0685696f, -0.2165767f, -0.0569516f, +0.2308265f, -0.0326059f,
  +0.1606169f, -0.3012028f, -0.0365757f, +0.2933513f, +0.1883274f, -0.1061957f, -0.0040611f, -0.1007340f,
  -0.1054386f, +0.1097136f, -0.5705733f, +0.0224673f, +0.2574508f, -0.0153883f, -0.0623377f, -0.2063733f,
  +0.0880899f, +0.0130087f, -0.2325089f, -0.1981445f, +0.0488408f, -0.2749624f, -0.1413570f, -0.1523771f,
  +0.0690626f, -0.1355703f, -0.0458169f, +0.0466133f, +0.0583237f, +0.2732212f, +0.2776620f, +0.0243287f,
  +0.0103617f, +0.1705377f, -0.0527575f, +0.2429932f, +0.0885418f, -0.0877180f, -0.1137396f, +0.0644066f,
  +0.1880320f, -0.0095453f, +0.1743131f, -0.2374615f, +0.0859322f, -0.2338562f, +0.0138654f, -0.1169956f,
  +0.0390142f, +0.1112477f, +0.3022689f, +0.0043935f, -0.0671027f, -0.1247222f, -0.1510177f, +0.2140722f,
  -0.1850704f, -0.2374759f, -0.2213012f, -0.0225826f, -0.1722974f, -0.0590622f, +0.1354972f, +0.0001590f,
  -0.0491723f, -0.0398124f, -0.0045249f, -0.2378927f, -0.0500987f, +0.1689697f, +0.0504871f, -0.0464167f,
  -0.0380230f, -0.1013821f, -0.2280730f, -0.0298334f, -0.0935979f, +0.0934460f, -0.2264493f, -0.0222057f,
  -0.1362435f, +0.3892291f, +0.1104607f, +0.2549942f, -0.0696121f, -0.3320776f, +0.2665467f, +0.0929356f,
  -0.3476070f, -0.0677851f, +0.0334510f, -0.0944532f, +0.0205984f, +0.3386630f, +0.1061381f, -0.2411201f,
  +0.1127985f, -0.1722842f, -0.1953725f, +0.0817820f, -0.1074413f, +0.1325633f, -0.1236117f, -0.1653647f,
  -0.0235080f, -0.2540497f, -0.1668474f, -0.1321605f, -0.0615597f, -0.0931044f, -0.1558202f, +0.0874368f,
  -0.0418342f, -0.0494029f, -0.0563202f, -0.3363068f, +0.0587748f, +0.1656297f, +0.0234411f, -0.1443733f,
  -0.1795747f, +0.0464684f, +0.2626799f, -0.1372648f, -0.0067441f, -0.1435360f, +0.0017191f, +0.1808748f,
  -0.0150129f, -0.0438204f, -0.0309068f, -0.0785874f, +0.1898239f, -0.1826752f, -0.0949329f, -0.1284057f,
  -0.0133071f, +0.1450831f, +0.0772568f, +0.1766536f, -0.0699631f, -0.1058606f, -0.0127239f, -0.2227716f,
  -0.1389961f, -0.2148674f, +0.0366191f, -0.1064524f, -0.2699799f, -0.0716439f, +0.0385531f, -0.0167462f,
  +0.3235391f, +0.0349724f, -0.0204418f, +0.1267013f, -0.0020067f, +0.2694570f, -0.1140791f, +0.0206040f,
  +0.0151728f, -0.0116723f, +0.0628686f, -0.1195850f, +0.0955350f, +0.0466666f, +0.0768091f, -0.0253086f,
  -0.1157675f, -0.0072480f, +0.0842956f, +0.1782253f, -0.0948323f, +0.1538598f, -0.1102044f, +0.2488422f,
  +0.1770591f, +0.0812502f, +0.0090351f, +0.1347371f, -0.0696052f, +0.0760877f, -0.1524875f, +0.1681628f,
  -0.1093663f, -0.0556195f, +0.1074728f, +0.0344421f, -0.2716697f, +0.1055135f, -0.1242143f, +0.0833681f
);

const float biases[4] = float[4](
  -0.0249200f, +0.0089540f, +0.0098627f, +0.0159363f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer23 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0991278f, +0.1136041f, -0.1517505f, +0.0600082f, -0.1776887f, +0.1571230f, +0.0144256f, -0.3129248f,
  -0.1949628f, +0.2429585f, +0.0047528f, -0.2335794f, +0.0961051f, -0.2708524f, +0.0511017f, -0.1806982f,
  -0.1402913f, +0.0557453f, +0.0177823f, +0.0889228f, +0.1108426f, -0.1790864f, -0.1000933f, -0.2011266f,
  -0.0227329f, +0.1150793f, +0.0556190f, -0.1242999f, -0.0297815f, +0.0105660f, -0.0968219f, -0.1680917f,
  +0.0000812f, +0.0025673f, +0.2273897f, -0.2250244f, -0.0945860f, +0.1321564f, +0.0716704f, +0.1865443f,
  -0.1579767f, +0.0035144f, -0.1321660f, +0.0791406f, +0.2264273f, +0.0090508f, -0.0884188f, +0.1641892f,
  +0.0448421f, +0.0352034f, -0.0186889f, -0.1297237f, +0.1790949f, -0.1278672f, +0.0760186f, +0.1408599f,
  -0.0386265f, +0.2023157f, +0.0428718f, -0.0901691f, +0.1139715f, +0.0067739f, -0.1384141f, +0.1461492f,
  -0.1580874f, +0.0584721f, +0.1053704f, +0.0185120f, -0.3858532f, -0.0332659f, -0.0259118f, +0.1107701f,
  +0.3338634f, -0.0308899f, -0.3436745f, -0.0441209f, -0.1883264f, +0.1505712f, +0.2100559f, +0.1472628f,
  -0.1422993f, +0.1610598f, -0.2760257f, -0.1805243f, +0.0869894f, -0.1238436f, +0.1320828f, +0.0957235f,
  +0.2687616f, -0.3191678f, -0.2594098f, -0.2782532f, +0.1020332f, +0.0590175f, -0.0492920f, -0.0449296f,
  -0.0517254f, +0.0192106f, -0.2669905f, +0.1602832f, +0.2785182f, -0.0670946f, +0.0319957f, +0.3327700f,
  -0.0433609f, +0.0554221f, +0.0515588f, +0.0020613f, +0.1758705f, -0.1205440f, -0.2516150f, +0.0979382f,
  -0.0125253f, -0.0098955f, +0.0925633f, +0.3098654f, -0.1328047f, -0.3303065f, +0.1253094f, +0.1579609f,
  +0.0109243f, +0.0193821f, +0.0768512f, -0.2649254f, +0.0455586f, -0.4426752f, -0.0580323f, -0.1380816f,
  -0.0469556f, +0.0216629f, -0.2799717f, +0.0964013f, -0.0124569f, -0.2657450f, +0.1207868f, -0.4168856f,
  -0.1274932f, +0.1733375f, +0.0935391f, +0.2069727f, -0.0488998f, -0.0127395f, +0.1867329f, -0.3078549f,
  -0.0922767f, -0.0212222f, -0.1413026f, +0.0359371f, +0.0128666f, +0.0591467f, +0.0795531f, +0.2820323f,
  -0.1388454f, -0.0430635f, +0.2655835f, -0.1713630f, -0.1521723f, -0.1516718f, -0.0359595f, -0.0591032f,
  +0.0979400f, +0.0054851f, -0.1285620f, +0.0289215f, -0.1104684f, +0.0724460f, -0.0281790f, +0.2578878f,
  +0.1235502f, +0.1149931f, +0.0557314f, -0.0273738f, -0.0709184f, -0.0151539f, -0.0237058f, -0.1038750f,
  -0.0466568f, -0.0270663f, -0.1600955f, -0.2065469f, +0.0560370f, +0.3847905f, +0.2010790f, +0.0464903f,
  -0.3440033f, +0.0338003f, -0.1361413f, +0.0549478f, -0.0707057f, +0.0046323f, -0.1293249f, +0.1275572f,
  -0.1305151f, +0.0747507f, +0.0264698f, +0.1384900f, -0.1923387f, -0.0346618f, -0.0305258f, -0.3224884f,
  -0.0800981f, -0.0563581f, -0.2096303f, -0.0755331f, -0.0333233f, +0.2155281f, -0.0768126f, +0.1120183f,
  -0.2227021f, -0.0491272f, -0.0340268f, +0.0759837f, -0.4438305f, +0.1714921f, -0.2218009f, +0.0620379f,
  +0.1613056f, +0.1418073f, +0.3110215f, +0.0376873f, -0.1602552f, -0.1715374f, +0.2505927f, +0.2784581f,
  -0.0195833f, -0.1079076f, -0.1098545f, +0.0240423f, +0.4472994f, +0.1949497f, -0.2601750f, +0.2555975f,
  -0.2204621f, +0.0700029f, +0.0151069f, +0.0890704f, -0.3428202f, +0.0693465f, -0.0612094f, -0.2958829f,
  -0.0795933f, +0.1819754f, +0.1414505f, -0.1881369f, -0.0575717f, -0.3300926f, +0.0229190f, +0.3411247f,
  +0.3979805f, +0.1027806f, -0.1627245f, +0.2237214f, +0.4230831f, +0.1257691f, -0.1815679f, -0.5727482f,
  -0.0389977f, -0.0989125f, -0.1466024f, +0.2409697f, -0.1122496f, -0.3228436f, +0.2867250f, -0.0033573f,
  -0.2179005f, -0.0210868f, -0.1314633f, -0.1884235f, +0.0754280f, -0.1915165f, +0.1114731f, +0.0400808f,
  +0.5257046f, +0.2755919f, -0.1214877f, -0.2522641f, -0.0978174f, -0.1609527f, -0.0926532f, -0.5983557f,
  -0.1332092f, -0.2295643f, -0.1610083f, -0.2878872f, +0.0702013f, +0.1620791f, -0.2527139f, +0.2834288f
);

const float biases[4] = float[4](
  +0.1238758f, -0.0001372f, -0.0553485f, -0.0248773f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer24 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0921210f, -0.2530411f, -0.1381656f, -0.0063624f, +0.3052407f, -0.0192535f, +0.0628218f, -0.0074820f,
  -0.4272899f, -0.2718972f, -0.3012674f, -0.1771769f, +0.1360656f, +0.0633545f, -0.6217738f, -0.0557476f,
  -0.0697855f, -0.0063108f, +0.1037480f, +0.1172813f, -0.3902559f, -0.0601816f, +0.0927099f, -0.0627291f,
  +0.1201907f, +0.2562857f, +0.0456432f, -0.0977658f, +0.1985345f, +0.1852393f, +0.0171003f, +0.2318401f,
  -0.3992174f, +0.0247275f, +0.2097103f, -0.1356933f, +0.2160227f, -0.0625490f, +0.0082364f, -0.7078456f,
  +0.0657781f, -0.2437977f, -0.0891865f, +0.2178216f, -0.2071714f, -0.0054508f, -0.0668312f, -0.3442762f,
  +0.0217344f, +0.1888148f, +0.1099204f, +0.1161782f, +0.2891666f, +0.1269798f, -0.2369725f, -0.2369065f,
  +0.0125115f, +0.0506466f, +0.0327682f, -0.2766703f, +0.2784103f, -0.3734735f, +0.2121825f, -0.3953279f,
  +0.2065367f, +0.1138476f, +0.1178757f, +0.0279272f, -0.1206945f, -0.1389898f, +0.0486778f, -0.1299062f,
  -0.1703686f, -0.0069920f, -0.1338886f, +0.1393234f, -0.0093172f, -0.1339090f, +0.0017540f, +0.3232639f,
  -0.3791388f, -0.0370950f, -0.0158380f, +0.0007876f, -0.2375913f, -0.0073283f, +0.0712226f, +0.1610641f,
  +0.3322904f, -0.0658601f, +0.0499609f, -0.1432931f, +0.0685186f, -0.2648413f, +0.1541812f, -0.1901438f,
  +0.2575920f, -0.0410212f, +0.1451282f, -0.2133506f, +0.0572656f, -0.0137367f, +0.0338390f, +0.2551554f,
  -0.4103991f, -0.2119287f, +0.0609852f, +0.0371433f, -0.1975582f, -0.0451117f, -0.1687752f, -0.2136340f,
  +0.1861345f, +0.0852468f, -0.1797327f, -0.1261182f, +0.1333181f, -0.0402555f, +0.0969181f, +0.4139139f,
  +0.3160874f, -0.0358730f, -0.0487910f, -0.0565427f, +0.2338839f, +0.1231229f, -0.1148703f, +0.1691925f,
  -0.3465627f, +0.0061374f, -0.0775750f, -0.2095694f, -0.1741825f, -0.1799855f, +0.0883829f, -0.1400186f,
  -0.4945272f, +0.1404295f, +0.1180684f, -0.0004903f, -0.1164994f, +0.2729469f, +0.0755626f, -0.0860863f,
  -0.0288430f, -0.0214542f, -0.2992027f, +0.0035633f, +0.1695618f, +0.0476252f, -0.1568270f, -0.0448089f,
  -0.1407358f, +0.3170754f, +0.3303785f, -0.1059514f, +0.0224449f, -0.3214708f, -0.0645934f, +0.0817459f,
  -0.2170906f, -0.0017674f, +0.2386847f, +0.0330031f, +0.0128375f, -0.0934720f, -0.0828891f, -0.2828068f,
  -0.2644629f, +0.0247164f, -0.1699751f, -0.0827628f, +0.1021096f, +0.0406230f, -0.0906053f, +0.0486710f,
  +0.0008284f, +0.1654985f, -0.0449456f, +0.0586068f, -0.0048263f, +0.0703702f, +0.1093684f, -0.1311961f,
  -0.2982078f, -0.0247779f, +0.0176336f, +0.0165553f, -0.1571745f, +0.0858722f, +0.1827131f, -0.3371309f,
  +0.2087869f, -0.0112011f, +0.2005158f, +0.2079139f, +0.1001865f, +0.3208708f, +0.1600511f, +0.1443663f,
  -0.1980205f, +0.0596528f, +0.0787030f, -0.0202936f, +0.0971441f, +0.0842239f, +0.2811725f, +0.0208073f,
  -0.2654176f, -0.3400593f, -0.0002686f, +0.2384790f, +0.1715380f, +0.1309889f, +0.1595797f, -0.2172957f,
  +0.3346837f, +0.1349638f, +0.0998243f, +0.1062887f, -0.1774229f, -0.2798029f, -0.1896444f, -0.0663597f,
  -0.1420618f, +0.0399132f, -0.1824262f, +0.0469295f, +0.2298066f, -0.1084608f, +0.0220973f, +0.5790411f,
  +0.1046028f, -0.0666425f, -0.0661928f, -0.0627939f, -0.1485322f, -0.1266422f, -0.2221977f, -0.2324650f,
  -0.3567552f, -0.0233817f, -0.0829975f, -0.0912383f, -0.1873780f, -0.0685026f, -0.0044006f, -0.0337979f,
  +0.1947980f, -0.0175586f, -0.1962086f, -0.1094443f, +0.1500998f, +0.0808586f, -0.0648003f, +0.0222659f,
  -0.0610414f, -0.2623847f, -0.3221472f, +0.2277660f, -0.0417843f, -0.0857178f, -0.1123573f, +0.0265411f,
  +0.0675608f, -0.0515930f, -0.0459043f, -0.0719210f, +0.3015364f, -0.0111089f, -0.0996797f, +0.1160468f,
  -0.1151260f, +0.0218360f, +0.0043625f, +0.2201789f, -0.0190101f, +0.0905489f, -0.0244250f, -0.3131968f,
  +0.0322943f, +0.2097520f, -0.0346921f, +0.0250301f, -0.1347098f, -0.1540846f, +0.1314255f, +0.2782721f
);

const float biases[4] = float[4](
  +0.0118469f, +0.0127362f, +0.0199854f, -0.0073585f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer24 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1085713f, -0.3343880f, -0.2350503f, +0.0627926f, -0.0154964f, -0.0548113f, +0.1153055f, -0.2232227f,
  +0.0486595f, +0.1349275f, -0.0252171f, -0.1285162f, -0.0082150f, -0.0151274f, +0.1856921f, -0.0421522f,
  -0.0043472f, -0.2773594f, -0.0328610f, -0.0707479f, -0.0387480f, -0.3189941f, +0.1133172f, -0.0346393f,
  +0.0968100f, -0.0349183f, -0.0715142f, +0.1350365f, -0.0743762f, -0.0344259f, +0.0482719f, -0.4039946f,
  -0.0763366f, -0.2794143f, -0.1342537f, +0.0644849f, +0.1869168f, -0.0502659f, -0.0263032f, +0.3229562f,
  +0.0712477f, -0.2290455f, -0.0145569f, -0.0179965f, +0.2352502f, -0.1920918f, +0.1733614f, -0.3014805f,
  +0.1172974f, +0.0919915f, +0.2025692f, -0.0092410f, -0.1284064f, +0.0845134f, +0.0083454f, -0.3392590f,
  +0.1063475f, +0.2010175f, +0.1485527f, -0.1732382f, -0.0667989f, -0.2769736f, +0.0747893f, +0.1237034f,
  +0.2210850f, -0.0559011f, -0.2127926f, +0.0125358f, +0.0408677f, +0.0800496f, +0.1484299f, -0.6511018f,
  -0.1868378f, +0.1695079f, -0.0486865f, -0.0543729f, +0.0077085f, +0.1509320f, -0.0035353f, -0.2247281f,
  +0.4380825f, +0.0179398f, -0.0160655f, -0.2410550f, +0.0120385f, -0.1077927f, +0.3107801f, +0.7751086f,
  -0.1030833f, +0.0684511f, +0.0348887f, +0.1433723f, +0.1220803f, -0.2222627f, -0.0632531f, +0.1120617f,
  +0.0707081f, -0.1058840f, -0.0447505f, -0.1980447f, -0.0261318f, +0.1183270f, -0.1797581f, -0.0234167f,
  -0.3092203f, -0.0972194f, -0.0189149f, +0.2562568f, -0.0761407f, -0.0541186f, -0.0264054f, +0.4363320f,
  +0.0589296f, -0.0256055f, -0.1097259f, -0.0524050f, -0.1873011f, +0.4294769f, -0.1721100f, +0.0269098f,
  +0.1496795f, +0.2538776f, -0.1380900f, +0.1103625f, -0.1535154f, -0.2869782f, -0.1892244f, -0.1671774f,
  -0.0435870f, +0.0862836f, -0.1948202f, -0.0940111f, -0.0240870f, -0.0977689f, +0.0487746f, +0.5782151f,
  +0.1266095f, -0.0024581f, +0.0723231f, -0.1220057f, -0.3009444f, -0.3695883f, -0.0567675f, -0.0481051f,
  +0.1413741f, +0.0189348f, -0.1322320f, +0.0889495f, +0.0533191f, +0.2737378f, +0.0316107f, -0.1247211f,
  -0.1433728f, +0.2900283f, +0.1199636f, -0.0788065f, +0.1858439f, -0.0730904f, +0.0253799f, -0.1572956f,
  +0.1809357f, -0.0891525f, +0.0918111f, +0.1026055f, -0.1796943f, +0.1578440f, +0.0781097f, +0.1262380f,
  +0.0555937f, +0.3194336f, -0.0925402f, +0.0145373f, -0.3017194f, +0.0222144f, +0.2715189f, -0.1072173f,
  +0.1177879f, -0.0590905f, -0.1201900f, +0.1967231f, -0.0017899f, +0.0614728f, -0.0553230f, +0.1920154f,
  +0.0268526f, +0.1274970f, -0.1100535f, +0.2528085f, +0.2532347f, -0.2381565f, -0.1450130f, +0.0278581f,
  -0.1284716f, -0.0020119f, -0.0283730f, +0.0696193f, +0.0170246f, +0.0589425f, +0.0204907f, -0.0141650f,
  -0.1870212f, +0.1048414f, +0.0057681f, -0.1003031f, -0.1609301f, -0.0451943f, +0.0350635f, +0.0328312f,
  -0.2479677f, +0.0039971f, +0.3000052f, +0.4361095f, +0.0974693f, -0.1387365f, -0.1183614f, +0.1893975f,
  -0.0577927f, +0.1564493f, -0.1223330f, +0.0603017f, -0.0082760f, -0.2026148f, +0.0329134f, -0.1094886f,
  -0.0450622f, -0.0313059f, -0.1817939f, +0.1873877f, -0.0586360f, -0.0577142f, +0.0557817f, +0.3618500f,
  +0.0743373f, -0.0956717f, +0.0794881f, +0.0076726f, -0.0296566f, +0.2031630f, +0.0160208f, -0.2052829f,
  -0.0940166f, -0.1695231f, -0.0487150f, -0.2375321f, +0.0236483f, -0.1774828f, +0.0409827f, +0.5415896f,
  +0.1740408f, +0.0354025f, +0.1785591f, -0.0176207f, -0.1628648f, -0.1998283f, -0.0680469f, -0.4785802f,
  +0.1002279f, +0.0488923f, -0.0316354f, -0.0512382f, -0.0506195f, +0.0109052f, -0.1014352f, +0.5364475f,
  +0.0796146f, +0.3599902f, +0.1389443f, +0.1948246f, +0.2028502f, +0.0384877f, +0.2102342f, +0.1899813f,
  +0.0578649f, +0.3325675f, +0.1239249f, -0.1856968f, +0.2380821f, -0.1347384f, -0.1234011f, -0.1181746f,
  +0.1072045f, +0.0316467f, +0.1806358f, -0.1239582f, -0.0905236f, +0.3045502f, +0.0438239f, +0.3694503f
);

const float biases[4] = float[4](
  +0.0398333f, +0.0272676f, +0.0349298f, +0.0078327f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer25 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1297364f, -0.1202531f, -0.3987031f, +0.1587435f, -0.1166667f, -0.4805200f, -0.1179828f, -0.0182251f,
  +0.1516053f, -0.0762955f, -0.1079415f, +0.2552493f, -0.2870475f, -0.0955541f, +0.1477314f, -0.1013647f,
  -0.3482280f, +0.1361480f, -0.0803849f, -0.1323445f, +0.0520296f, -0.1196476f, +0.1753191f, -0.3277494f,
  +0.2906868f, +0.0381194f, +0.0261126f, -0.1422702f, -0.3595230f, -0.0699373f, -0.0042326f, -0.2371431f,
  -0.1348492f, -0.2176584f, -0.0066969f, +0.2380031f, +0.0259055f, +0.2793482f, -0.2762621f, -0.2459545f,
  -0.0713238f, +0.1502521f, -0.1001014f, +0.0124045f, +0.2040462f, +0.0679177f, +0.2602197f, -0.1436022f,
  -0.0812674f, -0.0455872f, -0.2149019f, +0.0293891f, +0.1842447f, +0.0905761f, +0.0415488f, -0.2529934f,
  +0.1049732f, +0.0967353f, +0.1164526f, -0.2169687f, +0.0666569f, +0.0908810f, -0.2870494f, -0.1842027f,
  -0.1059231f, -0.2598332f, -0.2140359f, -0.2331722f, -0.1002643f, +0.0908757f, +0.0743103f, +0.0365589f,
  -0.2016855f, +0.0688418f, -0.0657768f, -0.0041716f, +0.0038696f, -0.1100395f, +0.0718353f, +0.1323267f,
  +0.0012457f, -0.1327229f, +0.0759668f, -0.0862863f, -0.2417196f, +0.0731005f, +0.1338731f, -0.1414644f,
  -0.0683712f, +0.2085908f, +0.1175630f, +0.0418239f, -0.0137168f, -0.1075429f, -0.1361536f, +0.1110704f,
  -0.0230046f, -0.0626228f, +0.0119916f, -0.1685816f, +0.1278385f, -0.2246906f, +0.0656532f, -0.1187087f,
  -0.1491348f, +0.3229566f, +0.3044374f, -0.0237761f, +0.1476392f, -0.0815906f, -0.0993677f, -0.0732616f,
  -0.0019808f, +0.0048986f, -0.0373384f, -0.1651618f, +0.1131899f, -0.1537670f, +0.0136235f, +0.0840629f,
  +0.0727746f, -0.0821618f, +0.0795309f, +0.0823052f, -0.3471627f, +0.2470905f, -0.1434627f, -0.1866233f,
  -0.0552290f, +0.1124033f, +0.1633409f, -0.1120163f, +0.2395988f, +0.1727469f, -0.0334042f, +0.1220730f,
  +0.1285840f, +0.1052303f, +0.1260412f, -0.1174097f, +0.0914662f, -0.0262369f, -0.2129999f, +0.0914008f,
  -0.1053962f, +0.0242873f, -0.2062585f, +0.1255038f, -0.0412069f, +0.1115922f, -0.0837898f, -0.0075017f,
  -0.2165769f, +0.0393590f, -0.0472437f, +0.0970364f, -0.0167064f, -0.0867501f, +0.1724805f, -0.2196624f,
  -0.0167763f, +0.1532264f, -0.1603421f, -0.1428737f, -0.2940154f, -0.2237442f, -0.1374526f, -0.1603384f,
  +0.0966546f, +0.0567880f, +0.1682634f, -0.0765968f, +0.0572032f, -0.0556646f, +0.1083970f, -0.1176852f,
  -0.1919354f, -0.0678999f, +0.2596613f, +0.0072228f, +0.3979482f, +0.2635900f, +0.0234249f, +0.2425418f,
  -0.1225466f, +0.1527199f, +0.0007445f, -0.0719235f, -0.0882252f, +0.2446915f, -0.1443762f, +0.3905799f,
  -0.0887298f, +0.0405882f, -0.1522589f, -0.2952389f, -0.0542507f, +0.0043444f, +0.1570263f, +0.1857034f,
  -0.0552474f, -0.3280314f, +0.0353103f, +0.2229704f, -0.0072081f, -0.0656607f, +0.0614829f, -0.0563308f,
  +0.2624580f, +0.0987063f, +0.1411573f, -0.1811045f, -0.1081616f, +0.4027898f, -0.1348406f, +0.0288209f,
  +0.1658989f, +0.0585690f, +0.0072461f, +0.0190584f, +0.1594426f, -0.1521616f, -0.1444276f, -0.0530997f,
  -0.1620415f, +0.1628174f, +0.2186212f, +0.0277330f, +0.1124454f, +0.1536692f, -0.2256555f, +0.1041536f,
  -0.2433708f, +0.0774544f, -0.0378152f, -0.0927926f, -0.0152159f, -0.0898681f, +0.0896009f, +0.0960246f,
  -0.1121443f, +0.2451556f, +0.0107757f, +0.0196378f, +0.0326895f, -0.2368515f, +0.0821205f, +0.0420346f,
  -0.2202622f, +0.1680863f, +0.2990920f, +0.0786878f, +0.0262640f, +0.2690131f, +0.0437281f, +0.1750560f,
  -0.2073836f, +0.0871133f, +0.3770567f, +0.0991842f, +0.1265199f, +0.3478203f, +0.1428107f, +0.2489813f,
  +0.0811974f, -0.1077825f, +0.0709406f, -0.3083780f, +0.0271108f, -0.1180974f, +0.0131066f, -0.0843719f,
  +0.1998284f, +0.0434423f, -0.1305070f, -0.1874951f, +0.4445521f, +0.0535700f, -0.1562999f, +0.1765898f,
  -0.0063399f, +0.0638907f, -0.0044947f, +0.1699877f, -0.0209770f, +0.1302523f, -0.0169208f, +0.0053970f
);

const float biases[4] = float[4](
  +0.0085812f, -0.0054870f, -0.0068107f, +0.0144036f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer25 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1071618f, -0.0479796f, -0.0765463f, -0.0396359f, -0.0068327f, -0.0278323f, +0.1947885f, +0.0710920f,
  +0.0464560f, +0.1097468f, -0.2087774f, -0.0232573f, +0.0656847f, -0.1616748f, -0.1401883f, +0.3725225f,
  +0.0296989f, +0.0660706f, +0.1517229f, -0.2658132f, -0.0287151f, -0.1095361f, -0.0344075f, -0.1193416f,
  -0.1566357f, +0.0209158f, +0.0460003f, -0.1918962f, -0.1700690f, +0.1113790f, +0.0393775f, +0.1177360f,
  -0.1736756f, -0.0188241f, +0.0735139f, -0.2714523f, +0.0881990f, +0.0802378f, +0.2806545f, -0.0837860f,
  -0.1768102f, -0.0080231f, +0.1348278f, -0.0978521f, -0.0640626f, -0.1958358f, -0.2090148f, -0.1578166f,
  +0.0604272f, -0.1736033f, +0.2462389f, -0.0849574f, +0.0507082f, -0.0965931f, -0.0410796f, -0.0835158f,
  -0.2531639f, +0.0686318f, -0.0936108f, -0.1594284f, +0.0808064f, -0.3013345f, +0.0424710f, -0.1544724f,
  -0.1246002f, -0.0389389f, -0.2557227f, -0.0326971f, +0.0970424f, -0.1084418f, -0.1422352f, +0.0643646f,
  -0.0363801f, +0.0650266f, -0.0716972f, -0.1448193f, -0.0780122f, +0.1931159f, -0.1323851f, -0.2140022f,
  -0.0151743f, +0.0509016f, -0.0962952f, -0.0705599f, -0.0076491f, +0.2783473f, +0.1143902f, -0.0115098f,
  -0.1035217f, -0.0389478f, +0.0920024f, -0.0748303f, -0.4334657f, -0.1086134f, -0.1016697f, +0.0334627f,
  -0.2477139f, -0.2870711f, +0.2032277f, -0.1584940f, -0.2484008f, -0.0208934f, +0.1394387f, -0.3738999f,
  -0.0660260f, +0.3607996f, +0.2509725f, -0.2909447f, +0.4759378f, +0.1209245f, -0.0911255f, -0.1133241f,
  +0.0563689f, +0.0449758f, -0.0312011f, +0.0763796f, -0.0423633f, -0.0515276f, +0.0669863f, -0.2667415f,
  +0.0599634f, +0.1933204f, -0.0908968f, +0.0980286f, +0.0966094f, +0.0091958f, +0.1941305f, +0.3445846f,
  -0.0166128f, -0.2930722f, +0.1716782f, -0.1645873f, -0.0926311f, +0.2062356f, -0.0800250f, +0.2803587f,
  -0.2578674f, -0.0060659f, +0.0320570f, -0.0316681f, +0.2017975f, -0.0722634f, -0.0551888f, -0.1255307f,
  +0.1678623f, +0.1832356f, +0.3359213f, -0.2568681f, -0.0301284f, -0.3926938f, -0.0373584f, +0.3307382f,
  +0.1040538f, -0.3990463f, +0.1733196f, +0.3288410f, +0.2626243f, -0.1180832f, +0.2843581f, -0.6288280f,
  -0.0353612f, -0.0546071f, -0.1578045f, -0.1485285f, -0.1244705f, +0.1665835f, +0.0556628f, +0.0640896f,
  +0.6223850f, -0.3714550f, +0.3190704f, +0.2855030f, +0.3836485f, -0.4067622f, +0.0348334f, -0.2218893f,
  -0.2396262f, -0.1441710f, -0.4357308f, -0.1036523f, +0.0295620f, -0.0194628f, +0.2824537f, -0.1688956f,
  -0.1414673f, +0.0442932f, +0.0472444f, +0.0248807f, -0.0198319f, -0.1366213f, -0.0941754f, -0.0341457f,
  -0.1630063f, -0.2199615f, +0.0649236f, +0.0095623f, +0.2461581f, +0.3183038f, +0.5452535f, -0.3025678f,
  -0.0475574f, +0.0434192f, -0.5027063f, +0.1685814f, -0.1982818f, +0.0873258f, -0.0382769f, +0.1265777f,
  +0.2032315f, -0.0256113f, +0.1845483f, -0.1453319f, +0.3780330f, -0.2161188f, -0.0222288f, -0.0583395f,
  -0.2108033f, +0.2224146f, +0.0168001f, +0.0601150f, -0.0772239f, -0.3113869f, +0.1087777f, -0.0697903f,
  +0.0105561f, +0.0723042f, -0.0688349f, -0.1797519f, +0.1629092f, +0.0561836f, +0.0969947f, -0.4262832f,
  +0.0011950f, -0.1069044f, -0.1243402f, -0.3985956f, +0.0004571f, +0.1196437f, +0.1096364f, -0.3295420f,
  +0.0409385f, +0.1077383f, +0.0790375f, -0.1267797f, +0.1361615f, -0.1006819f, +0.0192535f, -0.0056144f,
  +0.0196815f, -0.0976342f, +0.2408355f, -0.1832100f, -0.0572546f, +0.0337855f, -0.1226968f, +0.4381195f,
  -0.3329128f, -0.0875728f, -0.0605123f, -0.3400043f, +0.2656913f, +0.2056454f, -0.0307192f, -0.1368240f,
  -0.1706721f, +0.0302440f, +0.0000469f, -0.1208748f, +0.1961646f, -0.1887671f, +0.1255750f, +0.0697988f,
  +0.2660040f, -0.0213552f, +0.0216209f, -0.2057199f, -0.0701421f, -0.1540091f, -0.2407512f, +0.1324193f,
  +0.2173186f, +0.0806862f, +0.0773939f, +0.0563956f, -0.0214783f, -0.3669669f, +0.1458949f, +0.0773529f
);

const float biases[4] = float[4](
  +0.0256509f, -0.0215098f, -0.0045724f, -0.0368228f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer26 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1584834f, +0.0616602f, -0.2413637f, +0.0683796f, -0.1802244f, -0.0843527f, -0.0719034f, +0.0807709f,
  +0.2239368f, -0.3669022f, +0.0809117f, -0.1200590f, -0.1192947f, +0.1192020f, -0.0066422f, -0.1407938f,
  +0.0194466f, +0.2710612f, +0.1436242f, +0.1820420f, -0.1595735f, +0.0117355f, +0.0153900f, +0.0714714f,
  +0.1521769f, +0.0590676f, +0.0523491f, +0.1964954f, +0.2907473f, +0.0551148f, -0.1987948f, +0.1492654f,
  +0.0971253f, -0.2724413f, -0.3630522f, +0.2395180f, +0.1400488f, -0.2478581f, +0.3848437f, +0.1391011f,
  -0.0078777f, -0.0469693f, -0.1427874f, +0.0400073f, +0.2547267f, +0.0316336f, -0.0094394f, -0.0719515f,
  +0.2204005f, -0.0416768f, +0.0382831f, +0.2551166f, -0.4101035f, -0.1060601f, -0.2177262f, -0.0620796f,
  +0.0364390f, -0.0828174f, +0.1141856f, -0.1747272f, -0.0181861f, -0.2604104f, +0.2318388f, +0.0585318f,
  -0.2123614f, +0.0274548f, +0.1209708f, +0.2155131f, -0.0624746f, -0.0812024f, +0.1795876f, -0.0328389f,
  +0.2049158f, -0.0835604f, -0.1176936f, -0.2567707f, +0.0714017f, +0.0706813f, -0.0719908f, -0.1508552f,
  +0.0897506f, +0.1024695f, +0.0173103f, -0.1251269f, -0.0137673f, +0.4857634f, +0.0136686f, +0.0222767f,
  -0.0022657f, -0.0332860f, -0.2712199f, +0.2669510f, -0.0675596f, -0.0243873f, +0.2459308f, -0.1026744f,
  -0.2762254f, -0.3336110f, -0.0598858f, +0.2812248f, +0.1066860f, +0.2241142f, -0.2209236f, +0.0519774f,
  -0.3126452f, +0.0853347f, +0.4623249f, +0.0489707f, +0.0395036f, +0.0287016f, +0.2618827f, -0.0073687f,
  +0.3072377f, +0.3694128f, +0.2150921f, -0.1439417f, +0.1922182f, -0.0202793f, +0.1816914f, -0.0323954f,
  -0.0619298f, -0.0237542f, +0.0300338f, +0.0341822f, +0.2716242f, +0.2571278f, +0.0862916f, +0.2189892f,
  -0.1702131f, +0.0259060f, +0.1351986f, +0.0889836f, -0.0553529f, +0.0521029f, -0.1210309f, -0.1109133f,
  -0.2087141f, +0.0413893f, -0.0288704f, -0.1484614f, +0.0686892f, +0.1054691f, +0.3421197f, -0.0480514f,
  -0.0668605f, +0.1497859f, -0.1070856f, -0.1010845f, -0.1607928f, +0.0617439f, +0.0918731f, +0.2677866f,
  +0.0419601f, -0.0329999f, +0.3147212f, -0.0926815f, +0.1068087f, -0.3203038f, -0.0308796f, +0.1985432f,
  +0.4724808f, +0.0065356f, +0.0369784f, -0.0519438f, +0.1434915f, +0.0267340f, +0.3179325f, -0.2531762f,
  -0.1361340f, +0.2548776f, -0.0336069f, -0.0359616f, +0.0215950f, -0.0254969f, +0.0976470f, +0.0415085f,
  +0.0735288f, -0.0893094f, -0.2409648f, -0.2125805f, -0.0778207f, +0.2075672f, -0.0503916f, -0.1060270f,
  +0.2684767f, +0.0143942f, +0.1995293f, -0.1025396f, +0.2710634f, -0.0708952f, +0.3194219f, +0.0942446f,
  -0.0021210f, -0.0725818f, +0.1556521f, +0.0769732f, +0.0002994f, -0.0049495f, +0.2331504f, +0.1086301f,
  -0.0663845f, -0.1028451f, -0.0330385f, -0.1011067f, -0.0126562f, -0.2304969f, +0.3352696f, +0.3875710f,
  +0.0418931f, -0.0579842f, -0.0183901f, +0.1043358f, -0.0091087f, -0.0530676f, -0.3230336f, +0.0292929f,
  -0.2417449f, -0.1271640f, -0.1418969f, +0.0218560f, -0.3025054f, -0.2199664f, -0.2153511f, -0.3624849f,
  -0.0631682f, +0.2294586f, -0.1543918f, +0.0736524f, -0.2174173f, +0.1396914f, +0.0478302f, +0.2113757f,
  -0.1685666f, -0.2057565f, -0.0046602f, +0.2657315f, +0.1455642f, -0.0987325f, +0.0263893f, +0.2283658f,
  -0.3702469f, +0.2110792f, -0.1239522f, +0.0745553f, -0.1019818f, +0.1864443f, -0.1154736f, +0.5513834f,
  +0.3878093f, +0.1182971f, -0.0951638f, +0.0782667f, +0.0257376f, +0.2153069f, -0.6523103f, -0.0007239f,
  -0.1999387f, +0.0205555f, -0.0083796f, +0.0924266f, +0.0823605f, -0.0230840f, +0.3284400f, -0.1342441f,
  -0.0258156f, -0.1612224f, +0.0643979f, -0.1636281f, +0.0078956f, +0.0421930f, +0.0384218f, +0.1268776f,
  -0.0067947f, -0.0659917f, -0.0190364f, +0.1721217f, +0.0484443f, +0.0022778f, +0.1973507f, -0.0059507f,
  -0.0374556f, +0.0298453f, +0.0270981f, +0.0500694f, -0.0315197f, -0.0023519f, +0.0211372f, +0.0919251f
);

const float biases[4] = float[4](
  -0.0244988f, -0.0083086f, +0.0252675f, -0.0356864f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer26 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1621993f, -0.1217345f, +0.0618273f, -0.0367942f, -0.1722499f, -0.1893273f, -0.0353573f, +0.1118811f,
  -0.0042439f, +0.2849934f, -0.1271476f, -0.0121419f, +0.0827350f, -0.2547684f, -0.3289470f, -0.1102369f,
  -0.1082462f, +0.2904728f, -0.0069120f, +0.3953696f, -0.1877894f, -0.0141174f, +0.0193929f, +0.0355553f,
  +0.0417168f, -0.0497222f, +0.0051019f, +0.0955782f, +0.1468007f, +0.1652866f, +0.2012057f, +0.0066707f,
  -0.0841794f, -0.1696604f, -0.3055917f, -0.1490508f, -0.2219533f, -0.0979471f, -0.0095701f, +0.1564099f,
  +0.1267016f, -0.0018699f, +0.1313056f, +0.1455627f, +0.1787988f, +0.2262515f, -0.0552140f, -0.1428311f,
  +0.1274864f, +0.1480469f, +0.0427698f, +0.0487808f, +0.3990802f, +0.0552521f, -0.2712419f, -0.1079231f,
  -0.0718911f, +0.0925618f, -0.1356959f, +0.3499892f, +0.0271704f, -0.1324499f, +0.4423595f, +0.0694523f,
  -0.1841052f, +0.0836580f, +0.0777900f, +0.0692021f, +0.1488638f, +0.2078443f, -0.1892038f, -0.0460246f,
  +0.1620492f, -0.0988681f, +0.0733778f, -0.0718196f, -0.3293545f, +0.0718336f, +0.0594122f, -0.0639868f,
  +0.2355394f, +0.0604919f, +0.1145939f, -0.1800602f, -0.1743986f, -0.0388510f, +0.1913518f, -0.2072217f,
  -0.1892353f, -0.0724804f, -0.1275975f, -0.0006740f, +0.1107617f, +0.1499300f, +0.2103447f, +0.0465772f,
  -0.1038654f, +0.0064191f, +0.1156069f, +0.0312451f, -0.1913292f, +0.0364590f, +0.2424236f, -0.0942838f,
  -0.2770966f, -0.2856654f, -0.1428426f, -0.1444842f, -0.2155632f, +0.0448305f, -0.1070144f, +0.0919505f,
  -0.0869668f, -0.1245610f, -0.1942052f, -0.0166710f, +0.3308227f, -0.0528231f, +0.4571884f, +0.1222931f,
  +0.0500555f, +0.1301271f, -0.0099552f, -0.2256778f, +0.2908463f, +0.0807602f, -0.1203995f, -0.1782112f,
  +0.0194222f, +0.0821908f, +0.0096109f, -0.0902441f, +0.1037200f, +0.2702358f, +0.6748890f, +0.0829562f,
  +0.0156428f, +0.0196598f, -0.0286308f, -0.4176895f, +0.1192999f, -0.1641565f, -0.1880212f, +0.0792456f,
  +0.0052035f, -0.0491802f, +0.2427123f, -0.2339821f, +0.0352183f, -0.0945495f, -0.0060437f, +0.1398920f,
  +0.0077262f, -0.1433030f, -0.1675421f, +0.0134722f, -0.1119422f, +0.1642887f, +0.0650746f, +0.0150029f,
  +0.0916659f, +0.0113247f, +0.2127978f, +0.1189719f, -0.0017704f, +0.0437420f, -0.2545700f, -0.1104200f,
  -0.1508471f, -0.0816563f, +0.0525613f, -0.1045945f, -0.0370768f, -0.1564831f, +0.1510736f, -0.1567705f,
  +0.4060033f, +0.0807833f, -0.3297084f, +0.2390609f, +0.2050661f, +0.1465772f, -0.1608197f, +0.0992867f,
  +0.0591523f, -0.1293036f, +0.0061889f, +0.1272931f, +0.0787565f, +0.0753307f, -0.7353708f, -0.0306704f,
  +0.0554553f, +0.1413774f, -0.0415989f, -0.3074582f, -0.1038659f, +0.0337194f, +0.0224535f, -0.0481050f,
  +0.1546327f, -0.2178500f, +0.0072880f, +0.1262342f, +0.1259619f, -0.2340037f, -0.0550226f, -0.0299805f,
  +0.0955187f, +0.0679967f, -0.0819203f, -0.0331057f, -0.0276070f, -0.0675053f, -0.3067391f, -0.0179651f,
  +0.0162794f, -0.3015008f, -0.1970886f, -0.0516457f, +0.0951770f, +0.1033836f, -0.0155646f, -0.0290665f,
  +0.0176194f, +0.1417950f, +0.0582430f, +0.0492685f, +0.1272622f, +0.2907124f, +0.2125802f, -0.3094247f,
  +0.1442759f, -0.0123240f, -0.1191214f, +0.0636570f, +0.2278426f, +0.2038092f, -0.3309512f, -0.0136129f,
  -0.2227909f, +0.1033486f, -0.1097959f, +0.0669288f, +0.1357979f, +0.3430258f, -0.0514152f, +0.1555606f,
  +0.3806837f, -0.0738668f, +0.2869100f, -0.1227714f, +0.0707173f, +0.1773013f, -0.2399622f, -0.0367444f,
  +0.5208635f, +0.1229254f, +0.0898249f, -0.0617761f, -0.2953612f, +0.3134247f, +0.2355028f, -0.1593676f,
  -0.0200248f, +0.0783634f, +0.3108189f, +0.0172856f, +0.1125116f, -0.1471627f, +0.1248194f, -0.1549560f,
  +0.1805382f, -0.1698383f, +0.1648777f, +0.0497395f, -0.0358135f, +0.0240700f, -0.3647095f, +0.0554629f,
  -0.0766879f, +0.0661496f, +0.0060716f, -0.1310828f, +0.0130261f, -0.0966660f, -0.1630204f, +0.0486857f
);

const float biases[4] = float[4](
  +0.0310404f, +0.0253903f, +0.0283150f, -0.0084625f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer27 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1158681f, -0.0819156f, +0.0421012f, +0.2064503f, +0.0729891f, -0.0230804f, -0.1119547f, -0.0898620f,
  -0.0310972f, -0.0265813f, -0.1964550f, -0.0306985f, +0.0027190f, -0.1193308f, -0.0707436f, +0.1745756f,
  +0.0310430f, +0.1847119f, -0.1339432f, +0.0988948f, +0.4652936f, -0.0864745f, +0.1388717f, +0.2330500f,
  +0.1066056f, +0.0208660f, -0.0965570f, +0.0099606f, +0.1280912f, -0.3956461f, -0.0742521f, -0.2266379f,
  +0.3578088f, -0.3038454f, +0.0859599f, +0.0422820f, -0.1056577f, -0.6603142f, +0.0502601f, -0.0226686f,
  -0.0042669f, -0.1032574f, -0.0557813f, +0.0997811f, +0.0359326f, +0.3112017f, -0.1641854f, +0.1737383f,
  +0.2637096f, +0.0539342f, -0.2063595f, +0.3648008f, -0.1055775f, -0.0962757f, -0.2676601f, -0.1614819f,
  +0.4452015f, +0.0388788f, +0.1309178f, +0.1063598f, +0.2397161f, -0.2570434f, +0.2448662f, -0.0062277f,
  +0.3391770f, +0.1644950f, +0.1955641f, +0.0286072f, -0.1180834f, -0.3588080f, -0.1697294f, -0.1847276f,
  +0.1005080f, -0.0751824f, +0.0499858f, -0.0429054f, -0.0089269f, -0.1137965f, +0.0783538f, -0.2745145f,
  -0.0603017f, -0.2493966f, -0.0016244f, -0.0772137f, -0.2664230f, +0.0567169f, +0.1513222f, +0.0125201f,
  +0.0248922f, -0.2447158f, +0.0156387f, -0.0408781f, +0.3077569f, -0.0167959f, -0.0327723f, +0.0187004f,
  -0.1145074f, +0.0428972f, +0.3407052f, +0.0009262f, -0.0761107f, +0.0656599f, -0.1910732f, +0.2997263f,
  +0.1359174f, +0.0100168f, -0.1554894f, -0.2215012f, -0.2175899f, +0.1805887f, -0.0130543f, +0.0770381f,
  -0.0727383f, -0.0566011f, +0.3731359f, -0.0643992f, -0.1590499f, +0.1936862f, +0.1575381f, +0.1555714f,
  +0.0043342f, +0.0004861f, +0.2081695f, +0.0389098f, +0.0902602f, -0.0917412f, +0.1723484f, -0.0992893f,
  -0.1376615f, -0.1206678f, +0.3449273f, -0.2366665f, +0.0574004f, +0.2738608f, +0.1456636f, +0.0210726f,
  -0.2199732f, +0.0925819f, -0.0592281f, -0.0096265f, +0.2684322f, -0.1122359f, +0.0585661f, -0.0809981f,
  +0.0956357f, -0.1056808f, +0.0023930f, +0.0258607f, -0.1881099f, -0.0209307f, -0.0127616f, +0.1523758f,
  +0.0733456f, +0.1028760f, -0.1726358f, -0.2217613f, -0.0496227f, -0.1394655f, +0.1853323f, -0.0849792f,
  -0.0859701f, +0.0127685f, -0.0964093f, +0.1460657f, -0.0349192f, +0.0422926f, -0.0109749f, +0.1431248f,
  -0.3155279f, +0.0850291f, +0.1140970f, -0.0057525f, -0.1473048f, -0.0641721f, -0.0901368f, +0.1732834f,
  -0.1319846f, +0.1638643f, -0.3087106f, +0.1061846f, -0.0868922f, -0.0888269f, -0.2847898f, -0.1769379f,
  -0.0583806f, +0.2930686f, -0.0475085f, +0.2261052f, -0.0887820f, -0.1434524f, -0.2990369f, +0.0811540f,
  -0.1357110f, -0.1948003f, -0.0275726f, +0.0040278f, -0.0185812f, -0.4360544f, +0.3620783f, -0.1953795f,
  -0.0649538f, -0.1159340f, -0.3293040f, +0.1139489f, -0.0011210f, -0.2062336f, -0.1435746f, -0.2864485f,
  +0.1081888f, +0.1078002f, -0.1033369f, +0.2841845f, +0.1141251f, +0.2535567f, -0.0754329f, -0.2373518f,
  -0.0474186f, +0.0304986f, +0.2544515f, +0.0804319f, +0.0392132f, -0.0791826f, -0.0235146f, +0.1280104f,
  +0.0569231f, +0.1133332f, +0.0350676f, -0.1199174f, +0.0888711f, -0.1551215f, +0.0226954f, -0.0655789f,
  -0.0544441f, -0.0300283f, +0.0479297f, +0.1455435f, -0.1156243f, +0.2189461f, -0.2392943f, +0.1989166f,
  -0.0693953f, +0.1104910f, +0.1422964f, +0.1205763f, -0.0749266f, -0.2003521f, -0.1499657f, -0.2228043f,
  +0.1188533f, -0.3201520f, -0.0188930f, -0.2387617f, -0.1266167f, +0.0947062f, +0.0916866f, +0.2917999f,
  -0.1755216f, -0.2726179f, +0.0328183f, +0.0696972f, +0.2142767f, -0.1652217f, -0.0993653f, -0.0943296f,
  +0.0848959f, -0.1373689f, -0.0281960f, -0.0353745f, -0.0521175f, +0.0568143f, +0.1457095f, -0.0314896f,
  -0.0791540f, -0.1376862f, +0.1834683f, +0.0114272f, +0.1930466f, +0.1448966f, +0.0910236f, -0.1290979f,
  -0.1774998f, +0.0631435f, -0.1321745f, -0.1472843f, -0.0983735f, -0.3383193f, +0.0658914f, -0.1778853f
);

const float biases[4] = float[4](
  +0.0549440f, -0.0019156f, -0.0217184f, +0.0617695f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer27 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1267078f, -0.0549569f, +0.1605339f, -0.1821541f, +0.1680164f, -0.1338069f, +0.0630163f, +0.0302850f,
  -0.1982850f, +0.2298918f, +0.0386837f, +0.0255015f, -0.0454657f, -0.0870719f, +0.0083651f, -0.1169856f,
  +0.1935282f, +0.2320694f, -0.0034899f, -0.1149334f, -0.0730636f, +0.1521219f, -0.1458523f, +0.2161417f,
  +0.1848193f, -0.2005647f, +0.1710836f, -0.2260950f, -0.0159376f, +0.0163512f, +0.0232628f, -0.1891911f,
  -0.2941930f, +0.1491319f, +0.1169627f, -0.0639622f, -0.0424183f, -0.0945156f, -0.0935032f, -0.1977763f,
  +0.1402889f, +0.1672999f, +0.1858569f, -0.0950045f, +0.2033202f, -0.0105734f, -0.0852021f, -0.0183258f,
  -0.0196741f, +0.1737541f, -0.2530907f, +0.1599264f, -0.1650397f, +0.0182417f, +0.0154618f, +0.0777701f,
  +0.0198191f, +0.1494907f, +0.2432943f, -0.2069508f, +0.2947637f, -0.1324214f, -0.3390023f, -0.2613242f,
  +0.0255765f, +0.0273836f, +0.0238579f, -0.1601675f, -0.1067608f, -0.0619974f, -0.0500366f, +0.0140527f,
  -0.0258122f, +0.4233139f, -0.1649702f, +0.1248465f, -0.0578523f, -0.0090219f, -0.0383961f, +0.0324970f,
  +0.0783084f, -0.2755949f, -0.1385298f, +0.2567278f, -0.1965830f, +0.0860485f, +0.0145626f, +0.1390085f,
  -0.0481440f, +0.2555460f, -0.1086366f, +0.1168927f, -0.0162272f, -0.0497177f, -0.0698111f, +0.0372957f,
  +0.0973745f, +0.0445782f, +0.1675972f, +0.5292504f, -0.1142458f, +0.0394861f, -0.1980981f, +0.0712264f,
  +0.1105139f, -0.0647657f, -0.1874659f, +0.2166281f, +0.0146729f, +0.0356471f, -0.0302493f, +0.2157489f,
  +0.2175390f, +0.0223631f, +0.0134044f, -0.1876987f, -0.2139231f, +0.2014461f, +0.1710606f, -0.1438931f,
  +0.1232723f, -0.0314759f, +0.0627758f, -0.1149604f, +0.1845803f, +0.1057799f, -0.1270877f, +0.3204202f,
  +0.2333996f, +0.0294038f, +0.0223342f, +0.0551196f, +0.0837447f, +0.0107428f, -0.1429169f, -0.2387943f,
  +0.0149832f, -0.0142688f, +0.0287361f, +0.0170513f, +0.1645585f, -0.0376043f, -0.0326051f, +0.0895924f,
  +0.1509889f, -0.1325881f, +0.0765755f, -0.1609164f, +0.1097190f, -0.1638332f, +0.0482697f, +0.1828240f,
  +0.0415406f, -0.1268749f, -0.3014491f, +0.2534192f, +0.1964390f, +0.0300287f, -0.0990585f, +0.1705975f,
  +0.1697285f, -0.0502422f, -0.0434228f, -0.0305554f, -0.2097019f, -0.2572334f, -0.0022801f, -0.1421037f,
  +0.2159882f, -0.0492156f, +0.1900951f, +0.0137457f, -0.0313153f, -0.1113206f, +0.0156069f, +0.0939328f,
  +0.0305290f, -0.1309506f, -0.4684440f, +0.2937137f, +0.0946886f, +0.6509267f, -0.0998492f, +0.2999888f,
  +0.1367460f, +0.2044658f, +0.2003809f, +0.2288749f, -0.3774162f, -0.4378339f, +0.0720715f, -0.0183955f,
  +0.2012862f, +0.0173140f, +0.0303157f, -0.0777062f, +0.0178563f, -0.0813240f, +0.0335675f, -0.1862042f,
  +0.0743242f, -0.0855992f, -0.1195577f, +0.1169100f, +0.2038529f, +0.4717986f, -0.1163385f, +0.1506456f,
  +0.0638445f, +0.2763397f, -0.0727253f, +0.1489611f, -0.3103837f, -0.4839963f, -0.0998132f, +0.1462548f,
  -0.1675829f, +0.2457760f, +0.0111050f, +0.0948303f, -0.2183560f, -0.0194791f, +0.0809363f, -0.0275775f,
  +0.0119794f, -0.0302361f, -0.2134432f, -0.0317323f, -0.0327182f, +0.1777716f, +0.2980345f, +0.0493439f,
  -0.0723649f, +0.2472357f, -0.1250746f, +0.0011050f, -0.0803306f, -0.1662700f, -0.2298514f, -0.1305423f,
  -0.0229839f, +0.4113988f, -0.0411768f, +0.3727630f, +0.1577937f, -0.0178389f, +0.0457783f, +0.0535645f,
  +0.0720512f, -0.1846240f, -0.3405488f, +0.3025250f, +0.0540725f, +0.1912413f, -0.1266918f, -0.1930452f,
  -0.2810377f, -0.1639438f, -0.2909975f, -0.0543063f, -0.2154502f, -0.0122001f, -0.1711578f, -0.0132283f,
  +0.2628136f, -0.0966022f, -0.1286085f, -0.1166989f, +0.1348770f, -0.0282394f, -0.1603654f, +0.1312034f,
  +0.0236217f, -0.2088903f, +0.1034379f, -0.0771455f, -0.0106784f, -0.1367446f, +0.0649779f, -0.0936628f,
  +0.0580890f, -0.1479888f, +0.1874183f, -0.1319384f, -0.1002464f, +0.0458416f, -0.0239503f, +0.0285313f
);

const float biases[4] = float[4](
  -0.0040710f, -0.0555947f, +0.0031305f, -0.0195089f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer28 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1194841f, +0.0781618f, -0.0247755f, +0.0567018f, +0.0940145f, -0.1081966f, -0.0402751f, +0.5554749f,
  -0.1723887f, +0.0950584f, +0.2229601f, -0.0277607f, +0.2098420f, -0.1435218f, -0.1123983f, -0.0758951f,
  +0.0458026f, +0.1533785f, +0.1232542f, -0.0765338f, -0.1157785f, +0.0222999f, +0.0888122f, -0.1048961f,
  -0.1441161f, -0.0237257f, +0.2078462f, +0.0807251f, -0.0473855f, -0.2647445f, -0.1483141f, -0.0361907f,
  -0.0445033f, +0.0038470f, +0.1841519f, -0.2132095f, +0.2933237f, -0.0137757f, -0.1082115f, -0.1421502f,
  +0.0104336f, +0.1937143f, -0.0100355f, -0.0372192f, -0.0530439f, +0.2455105f, +0.2047181f, +0.1659387f,
  -0.1613726f, +0.0032043f, -0.2094384f, -0.0354208f, +0.2082343f, -0.0217890f, -0.0970134f, +0.1042734f,
  -0.0585901f, -0.0547000f, +0.1161378f, +0.0746559f, +0.1905897f, +0.2750339f, +0.2298149f, +0.0193025f,
  -0.0172602f, +0.3335359f, +0.0672450f, -0.0637293f, -0.0659019f, -0.1052164f, +0.2408023f, +0.4605719f,
  -0.0540817f, -0.2071459f, -0.5023240f, -0.1161385f, -0.0334844f, +0.1715956f, +0.0026961f, +0.0236748f,
  +0.0621924f, -0.0370757f, +0.0171612f, -0.0767726f, -0.1783134f, -0.1337317f, -0.1961160f, +0.0994329f,
  +0.0322648f, -0.1647854f, -0.1497381f, -0.0811518f, -0.0381727f, +0.0496458f, -0.1949085f, -0.0658478f,
  -0.0654078f, +0.1335871f, -0.1897870f, -0.0414810f, +0.0586851f, +0.0338049f, +0.0406387f, +0.0161407f,
  +0.1907432f, +0.2291212f, -0.1266199f, +0.2769204f, -0.2174671f, +0.1025597f, -0.1262354f, -0.1418351f,
  -0.1475586f, +0.1848943f, +0.3326862f, -0.2106257f, +0.0373996f, -0.3326666f, -0.0075582f, +0.3028372f,
  -0.0725733f, -0.1057877f, +0.2295475f, +0.0413185f, -0.2190566f, +0.0110917f, -0.0599925f, +0.0535305f,
  +0.0028829f, +0.3935296f, -0.1659287f, -0.0910405f, +0.0172930f, -0.0014251f, -0.0715016f, -0.0018314f,
  -0.0024057f, -0.1438114f, -0.1232962f, +0.0345241f, +0.2434565f, -0.3211565f, +0.1091459f, -0.0618819f,
  +0.1317102f, -0.1413152f, +0.0047263f, +0.0441562f, +0.0198570f, -0.2251482f, -0.1313402f, -0.1584685f,
  +0.0839053f, -0.1819972f, -0.1118948f, -0.1736937f, +0.0066159f, +0.0847585f, +0.3492858f, -0.0797589f,
  +0.1863378f, -0.2729587f, +0.0237800f, +0.1103534f, +0.0487855f, -0.0579645f, -0.1417024f, +0.0868722f,
  +0.4635208f, -0.0368994f, +0.0798845f, +0.0819537f, -0.0552460f, -0.2148029f, +0.0824105f, +0.0308027f,
  +0.0612784f, +0.1316671f, -0.0848752f, +0.0636417f, +0.0814175f, -0.4048683f, +0.2261471f, +0.0267084f,
  -0.0104250f, -0.0483400f, -0.0109525f, -0.1475573f, +0.0616437f, +0.0161097f, +0.0150988f, -0.1011552f,
  +0.0865283f, -0.0180389f, -0.0226054f, -0.0433302f, -0.0248778f, -0.2944197f, +0.0914825f, -0.2479841f,
  +0.1715408f, +0.2803940f, -0.0361771f, +0.0356351f, -0.0759466f, -0.2281721f, -0.0232278f, +0.0049435f,
  +0.0758500f, +0.2061628f, +0.1458589f, -0.0843627f, -0.1716859f, +0.0727548f, -0.1287969f, -0.0421191f,
  +0.1757193f, -0.3479339f, +0.1910227f, -0.0212759f, -0.0938550f, +0.0025553f, -0.0499524f, -0.0252723f,
  +0.5954089f, -0.0726881f, +0.0876841f, +0.1999523f, +0.0518653f, +0.1741330f, -0.2171023f, -0.0183855f,
  +0.2048123f, -0.0674195f, +0.1576365f, -0.0332870f, -0.0008906f, +0.2163951f, -0.1402661f, +0.0265127f,
  +0.3469987f, +0.2996464f, +0.1549743f, +0.0434703f, +0.2249691f, +0.2378346f, +0.1128064f, -0.2159079f,
  +0.0337780f, -0.0968629f, -0.0642990f, +0.1822358f, -0.1211721f, -0.3007228f, -0.3592053f, -0.1755681f,
  +0.1706597f, +0.2016421f, +0.0129838f, -0.2259879f, -0.0525976f, +0.0141311f, -0.1438691f, -0.1565771f,
  -0.0370523f, +0.0216478f, +0.1990767f, -0.0159660f, +0.0737366f, +0.0065147f, +0.0471529f, +0.3245364f,
  +0.0212650f, -0.1206059f, +0.2036401f, +0.0211810f, +0.0624935f, -0.1066447f, -0.1335325f, +0.0152923f,
  -0.0778897f, +0.0640792f, -0.0834275f, +0.0961564f, +0.3162795f, +0.0067019f, +0.0583871f, -0.2084406f
);

const float biases[4] = float[4](
  -0.0032601f, +0.0074702f, +0.0152363f, +0.0000576f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer28 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1706060f, -0.1805002f, +0.1356072f, -0.0682024f, -0.4800338f, -0.0572973f, +0.0057847f, +0.0398735f,
  +0.1244025f, +0.0575071f, -0.0767508f, -0.2192288f, +0.0223274f, +0.3270111f, -0.0180564f, -0.2138514f,
  +0.0500073f, -0.0631867f, -0.0743058f, -0.1103047f, +0.0559606f, +0.0015241f, -0.0952617f, -0.3079578f,
  -0.2827237f, +0.1342718f, -0.0256067f, -0.1959476f, -0.0056717f, +0.2592208f, +0.1590749f, +0.0409408f,
  +0.1445065f, +0.2852014f, -0.2488879f, -0.1890466f, -0.1143916f, -0.0697138f, +0.7058175f, +0.3125623f,
  -0.2040664f, +0.0864405f, +0.1137986f, +0.0731182f, +0.1121939f, +0.2292785f, +0.0735626f, -0.2373950f,
  +0.1485841f, -0.0173829f, -0.1138127f, -0.1381057f, +0.1090902f, +0.2247459f, +0.1385569f, -0.0422135f,
  +0.3590085f, -0.0422299f, +0.0167953f, +0.2208039f, -0.0650612f, -0.0158436f, +0.2893039f, +0.1718605f,
  +0.0465950f, +0.0012871f, +0.0681718f, +0.0498144f, -0.1255527f, -0.1506463f, -0.1696155f, +0.0722532f,
  -0.0573719f, -0.1373307f, -0.3311577f, -0.1297785f, -0.2525508f, +0.1000407f, +0.2789646f, +0.0291310f,
  +0.1971051f, -0.0822210f, -0.1578987f, +0.0161779f, +0.6468682f, +0.2662101f, +0.2645375f, -0.0554138f,
  -0.0630998f, +0.3841105f, +0.0333876f, +0.1134522f, +0.1776384f, +0.0502285f, -0.0246482f, -0.2541210f,
  +0.2203513f, -0.1565598f, +0.2912121f, -0.3566772f, -0.1077351f, -0.1366426f, +0.4709107f, +0.0402410f,
  +0.1292640f, +0.1139173f, -0.0183747f, +0.1490752f, +0.1897377f, -0.1685455f, +0.0457209f, -0.2144016f,
  +0.0408097f, +0.2107341f, -0.0754772f, -0.1391302f, +0.0872762f, +0.0788227f, -0.2657456f, +0.1026723f,
  +0.0634224f, -0.0462787f, -0.0091039f, +0.1023118f, +0.0606211f, +0.1111036f, +0.1813535f, +0.0246666f,
  -0.0929090f, -0.1100496f, +0.2460286f, -0.1107194f, -0.1113979f, -0.0556494f, +0.2919926f, +0.3337840f,
  +0.0005147f, +0.0077063f, +0.0234519f, -0.1975288f, +0.0725519f, +0.0325101f, -0.0968242f, -0.2138498f,
  +0.2070053f, +0.1727538f, +0.1009399f, +0.0763403f, -0.0237688f, -0.1979455f, -0.0966284f, -0.0804697f,
  -0.1993635f, -0.1509499f, +0.3911906f, -0.1245281f, +0.1531969f, +0.1901643f, +0.3795215f, +0.0975666f,
  +0.1166777f, -0.2615015f, -0.0800722f, +0.1452077f, +0.2146443f, +0.0113374f, +0.0765256f, +0.1708655f,
  +0.5205396f, -0.0906080f, -0.0528224f, -0.0456910f, +0.0037618f, +0.0386294f, +0.1225732f, -0.0239076f,
  +0.0384144f, -0.0558104f, +0.2060336f, -0.1345566f, -0.0965466f, -0.0405875f, +0.1006830f, -0.0119283f,
  -0.0489164f, -0.2240922f, +0.1313560f, +0.2393423f, -0.0481516f, +0.0507127f, +0.0875448f, -0.2213740f,
  +0.0348626f, -0.1180691f, +0.2613846f, -0.1567932f, -0.0216411f, -0.1791358f, +0.1293550f, +0.1656552f,
  +0.0965130f, +0.1371700f, -0.0312531f, +0.0462302f, +0.0473671f, -0.0538463f, +0.1673867f, +0.1962129f,
  +0.1493237f, +0.0217229f, +0.0533157f, -0.0344409f, -0.2210685f, -0.0190116f, -0.0921505f, +0.0455924f,
  +0.4991038f, -0.1739681f, +0.1557774f, -0.0294396f, -0.0431674f, +0.2324872f, +0.0795604f, -0.0169261f,
  -0.0713024f, +0.0197856f, -0.0310914f, +0.2514898f, +0.0345504f, -0.0441725f, -0.5235453f, -0.0505652f,
  +0.1752807f, +0.0483286f, +0.0593054f, +0.1589047f, +0.0156648f, -0.0177950f, -0.1033890f, +0.0882764f,
  +0.2323358f, +0.1570279f, -0.1175760f, -0.3017085f, +0.0387660f, -0.1185884f, -0.1370461f, +0.1625191f,
  -0.0939908f, -0.0712501f, -0.0165289f, -0.1316349f, +0.4202976f, -0.1756634f, -0.1769712f, -0.0441873f,
  +0.1702760f, +0.0018652f, +0.0986349f, +0.1444612f, +0.0324535f, -0.2304310f, -0.0210258f, +0.0262546f,
  +0.5508418f, -0.0664267f, +0.1455639f, +0.0768114f, -0.1567807f, -0.1082847f, +0.1626651f, +0.0860316f,
  +0.1384616f, -0.1134914f, -0.1977825f, +0.1630952f, +0.0583405f, -0.1644149f, +0.0840316f, +0.0553816f,
  +0.0414023f, -0.0318321f, -0.0572542f, +0.1731181f, +0.0183724f, +0.1046957f, -0.0653896f, +0.2004659f
);

const float biases[4] = float[4](
  +0.0049788f, -0.0308165f, +0.0136725f, +0.0006735f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer29 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0072192f, -0.0987332f, +0.1035874f, +0.1194807f, -0.1599511f, -0.0663312f, +0.1838312f, -0.0163401f,
  +0.1066246f, +0.2655329f, +0.0838263f, +0.1795987f, +0.0727470f, -0.7248212f, -0.0492318f, +0.1616141f,
  -0.0395908f, -0.0002374f, -0.0593975f, +0.2890303f, +0.2424609f, -0.1943347f, +0.0577040f, -0.0085425f,
  -0.3178417f, +0.0240320f, -0.0742237f, -0.0743571f, +0.1981609f, -0.4447441f, +0.2000183f, -0.3200965f,
  -0.0054450f, +0.0021313f, +0.2424680f, +0.4027097f, -0.3582880f, -0.8138187f, -0.3766422f, +0.0585175f,
  +0.1028231f, -0.1433372f, -0.1517938f, -0.0043220f, -0.1195033f, +0.0033275f, -0.0142192f, +0.0822161f,
  +0.0330727f, -0.0768013f, +0.0190440f, +0.2164361f, +0.2138293f, -0.2768230f, +0.0540825f, +0.0928009f,
  -0.0247944f, -0.1372689f, +0.0802794f, +0.2263918f, -0.0511183f, -0.2279335f, +0.0012563f, -0.0580452f,
  +0.0064801f, +0.0227496f, -0.1547128f, +0.1099009f, +0.0717557f, +0.3478683f, -0.1191505f, +0.1027912f,
  +0.0550197f, -0.0387493f, -0.1734609f, +0.0747802f, -0.1191687f, +0.0518616f, +0.0328188f, -0.0403776f,
  +0.0026397f, +0.0758092f, -0.0543111f, -0.0388988f, -0.1345724f, +0.0094871f, +0.0447831f, -0.0244265f,
  -0.1278362f, -0.2468809f, +0.0880105f, +0.0532117f, -0.1850711f, -0.1617689f, -0.0391145f, -0.2604822f,
  +0.2573513f, -0.5300860f, +0.1020777f, -0.0010398f, -0.1136340f, +0.0764627f, -0.0750905f, -0.1752261f,
  -0.0678045f, -0.1332128f, -0.0982486f, -0.1881296f, -0.0524577f, -0.0014066f, -0.1327540f, -0.2524194f,
  -0.1979073f, +0.1804707f, -0.2136559f, +0.0596927f, +0.1371266f, +0.2291469f, +0.1550847f, +0.1698731f,
  +0.0784255f, +0.1857606f, -0.0835940f, -0.2468157f, +0.4039254f, +0.2397479f, +0.2436693f, -0.1137804f,
  -0.1297407f, +0.1299326f, +0.1306919f, +0.0023240f, +0.2169503f, +0.0227449f, +0.1388345f, -0.1662796f,
  +0.1132596f, +0.1651776f, -0.0020624f, -0.1031159f, +0.1438811f, -0.0629349f, -0.1444514f, +0.1342746f,
  +0.0273760f, -0.0737952f, +0.1637417f, +0.0598209f, +0.0213748f, +0.0376756f, +0.1857245f, +0.1429686f,
  +0.3142240f, -0.0100314f, +0.0143753f, -0.1155990f, -0.2587322f, +0.0817961f, +0.1893818f, -0.2144591f,
  -0.2223207f, +0.0111777f, -0.4594979f, +0.1665298f, -0.1467397f, +0.0771735f, +0.1497913f, -0.1263519f,
  +0.0379819f, -0.0056370f, -0.1507214f, +0.1422709f, -0.0134456f, -0.0962617f, -0.0732644f, -0.0762151f,
  +0.0007606f, -0.0564575f, -0.3883442f, -0.3344575f, +0.3333305f, +0.1329757f, -0.2344657f, +0.0621766f,
  -0.0626331f, -0.0636257f, -0.1161122f, +0.3251384f, +0.2129864f, +0.4574630f, +0.1032523f, -0.2289651f,
  -0.1327031f, -0.1278149f, +0.1752057f, +0.0280975f, +0.0864462f, -0.0862572f, +0.3338045f, +0.1545036f,
  +0.1715319f, +0.0004251f, +0.1207925f, +0.0038851f, -0.0459642f, -0.0410557f, -0.0998949f, -0.0623241f,
  -0.4073552f, +0.2416537f, -0.2591121f, +0.5321037f, +0.0736391f, -0.1744877f, +0.2367379f, -0.0254967f,
  -0.1562883f, -0.1311350f, -0.0524805f, -0.0111792f, -0.1493640f, +0.2229860f, -0.0624210f, -0.2635437f,
  +0.1249753f, -0.1220449f, +0.2900956f, +0.1660083f, -0.5707631f, +0.0336728f, -0.1291127f, +0.0339380f,
  +0.2623671f, -0.0844132f, -0.0251223f, -0.1798851f, -0.0018828f, -0.0457654f, -0.0776509f, -0.1757384f,
  -0.0650439f, -0.0057926f, -0.0983279f, +0.1158521f, -0.1284229f, -0.0616314f, +0.1063710f, -0.2042246f,
  -0.2384367f, -0.2387472f, -0.0218606f, -0.1146821f, -0.1567810f, -0.1411096f, +0.1006758f, +0.1658844f,
  +0.2247492f, +0.0467047f, +0.1016422f, +0.2241761f, -0.0976010f, -0.1820479f, +0.1522083f, -0.0246237f,
  -0.0728481f, -0.1177857f, -0.1125227f, +0.0102684f, -0.0950873f, -0.0141122f, +0.0298157f, +0.0517586f,
  +0.2472126f, -0.0209804f, -0.1074187f, +0.0329153f, +0.2421843f, -0.0798538f, -0.1759766f, +0.0183403f,
  -0.4797268f, -0.0289782f, +0.0942499f, -0.2960455f, -0.3116404f, -0.2555790f, -0.0552859f, -0.1420666f
);

const float biases[4] = float[4](
  +0.0325881f, +0.0017263f, -0.0070629f, -0.0079917f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer29 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0225086f, +0.1006296f, +0.0430896f, +0.0928582f, -0.2431805f, -0.0398577f, +0.1889265f, -0.1133118f,
  +0.4548492f, +0.3070209f, -0.0602845f, -0.0380323f, +0.0161397f, -0.2613682f, -0.0633141f, +0.5145439f,
  +0.0531612f, -0.0215080f, -0.5188888f, -0.0071879f, -0.0182694f, -0.0823781f, -0.1141717f, +0.3936211f,
  +0.1141321f, -0.1024245f, -0.2153717f, -0.1697671f, +0.0803372f, -0.1616240f, +0.2774561f, +0.0951151f,
  +0.3816887f, +0.0146193f, -0.0425841f, +0.0371676f, -0.0092234f, -0.3325487f, -0.0005726f, -0.0182429f,
  +0.1627275f, -0.0311045f, -0.1995910f, +0.0792724f, -0.1692165f, +0.1120959f, -0.0462971f, -0.1895007f,
  -0.1315343f, -0.2089456f, -0.0324132f, -0.0441100f, +0.0079620f, -0.2081188f, +0.0828300f, -0.0616011f,
  -0.0433004f, +0.1295306f, +0.0689620f, +0.2895780f, +0.0185836f, -0.1216547f, -0.1179112f, +0.1403847f,
  +0.1782923f, +0.0642531f, -0.0024658f, +0.1453197f, +0.0764986f, +0.1486076f, -0.0756790f, +0.3532135f,
  +0.0650156f, +0.0684827f, +0.1604672f, -0.1132229f, +0.0039906f, -0.1181192f, +0.1339706f, +0.1650272f,
  +0.0942890f, -0.1827967f, +0.1758792f, +0.0661010f, +0.2102165f, -0.1186033f, -0.2944847f, +0.0779223f,
  +0.1330181f, +0.0156147f, -0.1383975f, -0.0335355f, +0.0298615f, -0.0562621f, +0.1177780f, +0.1286953f,
  +0.0283322f, +0.0572385f, -0.0296521f, -0.0693385f, -0.0651213f, +0.0255497f, +0.0267568f, -0.0309157f,
  -0.2167199f, +0.1339994f, -0.0775010f, -0.1689587f, -0.1059354f, -0.1722895f, -0.1101452f, +0.1902689f,
  +0.1136185f, +0.0320645f, +0.2002066f, -0.2247211f, -0.2439977f, -0.2053399f, -0.1363084f, +0.0017580f,
  -0.1866338f, -0.0403931f, -0.0566708f, -0.0975118f, -0.0422808f, -0.1012495f, -0.0893297f, -0.2645243f,
  -0.0104178f, +0.1324874f, +0.0789757f, -0.0025061f, -0.1907388f, +0.1275609f, +0.3076730f, +0.1502443f,
  +0.0128664f, -0.0072143f, +0.0329437f, -0.1266838f, -0.1160261f, +0.0607504f, -0.0063751f, +0.1171514f,
  +0.0803230f, -0.0827907f, +0.1853050f, -0.1865809f, -0.0543440f, +0.0880107f, -0.1327969f, +0.2512897f,
  -0.3026381f, -0.0773163f, +0.2709003f, +0.0016570f, +0.1178082f, +0.0307877f, -0.0286433f, +0.2434664f,
  +0.3493884f, +0.1829316f, -0.0375927f, +0.0458161f, +0.1229591f, -0.1413459f, -0.0479589f, +0.1653511f,
  -0.2882993f, -0.2435297f, -0.0234750f, +0.1762786f, -0.0938604f, +0.2519782f, -0.1094026f, -0.3317877f,
  +0.1044722f, +0.2139187f, -0.0319451f, +0.1487965f, -0.0381165f, -0.0248157f, +0.2841839f, +0.1917272f,
  -0.0168366f, +0.0776262f, +0.1060800f, +0.0398419f, +0.0124528f, -0.0555231f, +0.0302926f, -0.0515062f,
  -0.2961353f, +0.0216046f, +0.0752553f, -0.2551101f, -0.2574370f, +0.2495276f, +0.0544536f, +0.0801731f,
  -0.1990206f, -0.1304231f, -0.0021178f, -0.0819861f, -0.3484451f, +0.1676754f, +0.0472363f, -0.2289465f,
  -0.1377956f, +0.0210308f, +0.1331759f, -0.2015998f, +0.2171430f, -0.1166456f, -0.1622761f, -0.0846140f,
  -0.0623934f, +0.1204013f, +0.1584987f, +0.2279335f, +0.1138473f, -0.0681166f, -0.1062584f, -0.0775074f,
  -0.3667511f, -0.1111333f, -0.0247327f, -0.0052758f, -0.2047871f, -0.2798920f, +0.3436099f, -0.3700500f,
  -0.1522525f, +0.3359204f, +0.0677646f, +0.0107876f, +0.0772909f, -0.3299705f, +0.1652232f, -0.2442295f,
  +0.0215783f, +0.2613046f, -0.1637932f, +0.1832298f, -0.1177383f, -0.0465415f, +0.1149193f, -0.2261941f,
  -0.0186267f, +0.0457248f, -0.0732126f, +0.0600267f, -0.0442510f, +0.2001359f, +0.1915241f, -0.0700722f,
  +0.1450821f, -0.2777311f, +0.0015250f, +0.0703026f, +0.1656208f, -0.4091896f, -0.2449394f, -0.0188746f,
  -0.2761946f, +0.0041317f, +0.2544112f, -0.0304123f, -0.2907958f, -0.5775847f, +0.3376798f, -0.2154362f,
  -0.3234237f, -0.0284664f, -0.2775086f, -0.2620455f, +0.2152205f, -0.0782065f, +0.1541770f, +0.0066847f,
  -0.1911299f, +0.1705900f, -0.2397571f, +0.2624242f, -0.1382988f, -0.2219609f, -0.1559561f, -0.0798956f
);

const float biases[4] = float[4](
  -0.0986473f, -0.0088666f, -0.0127747f, -0.1370648f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer30 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1514410f, -0.0052861f, +0.2959404f, +0.0448996f, +0.0600498f, +0.0547940f, -0.1041420f, +0.0964228f,
  +0.3778073f, +0.2923357f, -0.2605508f, -0.1758644f, +0.2857034f, +0.1068323f, +0.2420410f, +0.3108491f,
  +0.2569220f, +0.2143851f, +0.0121859f, -0.2269818f, -0.0987899f, +0.1413257f, +0.5379645f, -0.0449738f,
  +0.0631629f, +0.0595544f, +0.1390273f, +0.0642797f, +0.0296101f, +0.2863469f, -0.3047665f, -0.1689769f,
  +0.7457758f, -0.0500162f, -0.2140206f, -0.0899161f, -0.0812451f, +0.1591008f, +0.1521342f, +0.1268685f,
  +0.2879210f, +0.2048568f, -0.1730107f, +0.3232843f, +0.2841810f, -0.1009918f, -0.0613931f, +0.0417182f,
  +0.0723170f, +0.1255019f, +0.0929223f, -0.2778126f, -0.0617603f, -0.1425850f, -0.0278559f, +0.3955548f,
  +0.1856145f, -0.0355040f, +0.0424834f, -0.1637646f, +0.1552267f, -0.1924413f, +0.0926194f, +0.1840956f,
  +0.1132451f, +0.1758160f, +0.0544767f, -0.1871315f, +0.0035006f, -0.3074449f, -0.1228847f, +0.0165633f,
  -0.0619094f, +0.0104526f, -0.2450475f, -0.0900356f, -0.0680477f, +0.2587748f, -0.0841766f, +0.0468808f,
  -0.1117723f, -0.0412098f, -0.0518470f, +0.3095822f, -0.0526493f, +0.1187199f, +0.0112059f, +0.1169672f,
  -0.1348519f, +0.0309864f, +0.0222179f, +0.1756754f, +0.0389585f, +0.0248110f, -0.0343236f, +0.1788278f,
  -0.2394899f, +0.2762382f, +0.0635722f, +0.2652912f, -0.0237731f, +0.0761962f, +0.1946745f, +0.1727957f,
  -0.2953895f, +0.2313683f, +0.2670073f, -0.0562020f, +0.0416082f, -0.0478945f, -0.1966169f, +0.2472334f,
  +0.0135281f, +0.0471733f, -0.1918283f, -0.0560829f, +0.1328751f, -0.0410207f, -0.0430365f, -0.2081798f,
  -0.0705177f, +0.0449128f, -0.0017428f, -0.2120819f, -0.0953212f, +0.0905586f, +0.0973877f, +0.1019215f,
  -0.0611258f, +0.1977634f, +0.0048882f, +0.2260630f, -0.0566665f, -0.1072842f, +0.0286249f, -0.0635641f,
  -0.1799042f, +0.0166577f, -0.0650635f, -0.0385045f, -0.1990771f, -0.1099088f, +0.1138214f, -0.0575857f,
  -0.0318761f, +0.0722542f, -0.0120061f, +0.0543877f, -0.2040800f, -0.0686262f, -0.0566816f, +0.1944424f,
  -0.0643614f, -0.0962654f, -0.0460654f, -0.1903356f, -0.0342910f, -0.0984277f, +0.3384278f, +0.0023949f,
  -0.1104883f, -0.2263632f, -0.1930751f, +0.0852513f, +0.1105445f, -0.1253278f, +0.1563824f, +0.0318077f,
  +0.2990355f, -0.0211249f, +0.2501242f, -0.3320147f, -0.2889392f, +0.1805455f, +0.0058907f, +0.0195242f,
  -0.4252901f, +0.1607399f, -0.0633538f, -0.1107045f, +0.1404808f, -0.1933996f, -0.2608351f, -0.1973224f,
  -0.0958319f, -0.0451081f, +0.0080975f, -0.3034972f, +0.2303753f, +0.1784199f, -0.0408729f, -0.2588234f,
  -0.0991181f, +0.2126815f, +0.1122174f, +0.3264202f, +0.1026210f, +0.1561631f, +0.1967945f, -0.2770553f,
  -0.0479782f, -0.2431852f, +0.0494247f, -0.0085507f, +0.2721998f, -0.0824385f, +0.0084507f, +0.1732269f,
  +0.0298774f, -0.1561294f, +0.0644663f, +0.2582851f, +0.0926955f, -0.1919736f, -0.0893117f, -0.3473856f,
  -0.3245088f, +0.2107452f, -0.0890531f, +0.0813779f, -0.1455593f, +0.1722987f, -0.0554076f, -0.0631910f,
  +0.0333113f, -0.0910070f, -0.2535134f, +0.2195661f, -0.0872807f, +0.1731881f, +0.0629160f, +0.0075535f,
  -0.0547539f, -0.0915309f, +0.3406731f, +0.1432586f, -0.2021857f, -0.0042596f, +0.0405365f, -0.1421801f,
  -0.2429971f, -0.0095878f, -0.0178827f, +0.0615639f, -0.2054083f, +0.3501982f, -0.1705920f, +0.0796535f,
  +0.0536020f, +0.1763949f, -0.1893725f, -0.2506392f, +0.2769847f, +0.1297147f, -0.1418554f, +0.0553625f,
  +0.2654000f, +0.0970524f, -0.0777069f, -0.1292292f, +0.2355620f, -0.1169771f, +0.1422130f, -0.0636705f,
  +0.0049056f, +0.0860967f, +0.0068960f, +0.1081299f, -0.0745475f, +0.1968268f, +0.2077038f, -0.1893739f,
  +0.0251355f, +0.0850186f, +0.1457108f, +0.1253669f, -0.1007994f, +0.0736977f, +0.2115943f, +0.0311982f,
  -0.0198843f, -0.0092576f, -0.0173352f, +0.1409494f, +0.0264854f, -0.0095258f, +0.3025422f, +0.0853744f
);

const float biases[4] = float[4](
  -0.0114313f, +0.0192596f, -0.0050496f, -0.0058151f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer30 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0348718f, -0.3396635f, -0.1788167f, +0.1387922f, +0.0235736f, +0.1262203f, -0.0087866f, +0.0499568f,
  -0.0581821f, -0.3066123f, +0.1519819f, +0.0293910f, +0.3434732f, +0.2353723f, +0.0340841f, +0.1075835f,
  -0.0785073f, -0.1565240f, -0.0598190f, -0.0385401f, -0.0186891f, +0.0862575f, +0.2058717f, +0.2253275f,
  +0.1504472f, -0.0646951f, -0.3135499f, +0.0141592f, +0.0011188f, -0.0450286f, -0.1414257f, +0.2256653f,
  -0.1030478f, +0.3343729f, -0.1651736f, -0.2138378f, -0.0471600f, +0.0091135f, +0.2166291f, +0.4369950f,
  +0.1384874f, +0.2434494f, +0.0746384f, -0.0811926f, +0.1582059f, -0.3132879f, -0.0305259f, +0.2291459f,
  +0.0494337f, +0.2054834f, +0.1078443f, -0.0491382f, +0.2398734f, -0.0863601f, +0.1414199f, -0.1242462f,
  -0.1693937f, -0.0658071f, -0.0816868f, +0.2741103f, -0.3830971f, -0.1037097f, +0.1036849f, -0.0281184f,
  +0.0274547f, +0.0745568f, -0.0891164f, +0.0103961f, +0.0158995f, +0.1357495f, +0.1622665f, -0.1716311f,
  +0.0062371f, +0.2237068f, +0.0634554f, -0.1950967f, -0.2267631f, -0.0889627f, +0.1343400f, +0.0473299f,
  -0.0484779f, +0.2768565f, -0.2232594f, -0.1075040f, -0.2078191f, +0.0567556f, +0.0749820f, -0.4102812f,
  +0.3860101f, +0.0537825f, -0.0566749f, +0.0307889f, -0.1838377f, +0.1495133f, -0.0925686f, +0.2994427f,
  +0.2348707f, -0.1309238f, -0.1221698f, -0.0489678f, +0.0745460f, +0.0905076f, +0.0209876f, +0.1878591f,
  +0.4902742f, -0.1442229f, -0.2000504f, -0.2163797f, +0.1633985f, +0.2321452f, +0.0697092f, -0.0490734f,
  +0.3003177f, +0.0388707f, +0.1197494f, -0.0814141f, +0.2238557f, -0.4576784f, -0.1931998f, -0.0007132f,
  +0.3050439f, +0.0467421f, +0.1799578f, -0.0786552f, +0.2374307f, -0.1593178f, -0.1166329f, -0.1720661f,
  +0.3522491f, +0.0095480f, -0.4825146f, -0.0102429f, +0.2422738f, +0.0186327f, +0.2733277f, +0.2319723f,
  +0.5781248f, +0.0573742f, +0.2303566f, -0.2178468f, +0.1142074f, +0.1458116f, -0.1018544f, +0.3122280f,
  -0.0182339f, -0.1630544f, -0.1724109f, -0.0441049f, +0.0690291f, -0.1298535f, -0.0405164f, +0.1114186f,
  +0.0678498f, -0.0105220f, +0.2549143f, -0.0659943f, +0.0670371f, -0.0129259f, +0.1258825f, +0.2077569f,
  -0.0184696f, +0.0132630f, +0.2935933f, -0.0838347f, -0.0481524f, -0.1747897f, -0.0548841f, -0.3397776f,
  -0.0323061f, -0.1368535f, -0.0990085f, +0.1781782f, +0.0700776f, +0.1063722f, +0.0988749f, +0.0482635f,
  +0.1142396f, -0.3456735f, -0.0662885f, -0.0639367f, -0.2054189f, +0.1389933f, +0.0217457f, +0.1822945f,
  -0.0520824f, -0.0159663f, -0.0794475f, +0.1759639f, -0.1475573f, +0.0905848f, +0.0477739f, -0.2326420f,
  +0.1709188f, -0.2415364f, -0.2364049f, +0.0351712f, +0.0189172f, -0.1868759f, -0.1689163f, -0.1197265f,
  +0.2639387f, +0.0230157f, -0.0656450f, +0.1878529f, +0.1894491f, -0.1130556f, -0.1015397f, +0.0016759f,
  -0.0409197f, +0.1118223f, +0.1127253f, +0.1149353f, -0.2095427f, +0.0827075f, +0.1977932f, -0.0306450f,
  -0.1250873f, +0.2683265f, -0.2183738f, -0.0842595f, -0.1247375f, +0.0802380f, +0.1400101f, -0.4337752f,
  +0.3717963f, +0.0972429f, +0.0771779f, +0.2509221f, -0.1254548f, -0.1909020f, -0.0058902f, -0.2015837f,
  -0.0879310f, +0.3727055f, +0.2368892f, +0.2267252f, -0.1331000f, +0.2832034f, -0.1253642f, +0.1556045f,
  +0.1599756f, +0.1335386f, +0.0766312f, +0.0410295f, +0.1519530f, -0.0036791f, +0.0634705f, +0.3294448f,
  +0.3759217f, +0.5241720f, -0.2003216f, -0.0038510f, +0.0917870f, +0.0532451f, -0.0733625f, -0.0224375f,
  +0.2713082f, +0.1677579f, +0.2233625f, -0.0261281f, +0.2006528f, +0.0017304f, +0.1517171f, -0.1282865f,
  +0.1995903f, +0.0275565f, -0.1270633f, -0.1061745f, -0.1878827f, -0.1616463f, +0.1065120f, +0.0104516f,
  +0.2131200f, +0.1714914f, +0.1202662f, -0.0458139f, -0.0351771f, +0.2466952f, -0.2999484f, -0.1863744f,
  -0.1842326f, -0.0353021f, +0.0089394f, +0.0131778f, -0.2093672f, -0.1068632f, -0.1178786f, +0.0544369f
);

const float biases[4] = float[4](
  +0.0110019f, -0.0192783f, +0.0052577f, +0.0040675f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer31 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0735052f, +0.0535521f, -0.0077844f, -0.1594922f, +0.0499448f, +0.0601580f, -0.1291870f, +0.0778876f,
  +0.0860454f, -0.0866639f, -0.0047924f, +0.0534023f, +0.0389464f, +0.2535793f, -0.0438112f, -0.1488776f,
  +0.1243196f, +0.0981081f, -0.0593070f, +0.2891937f, -0.0063440f, -0.0931336f, +0.0354409f, -0.0233034f,
  -0.1019871f, -0.2015830f, -0.0303547f, -0.2829901f, +0.1687787f, +0.0556809f, -0.0165989f, +0.3662920f,
  +0.0880054f, -0.0867250f, -0.1473469f, +0.1448118f, +0.0184328f, +0.4060574f, -0.0342748f, +0.1871080f,
  -0.0927472f, +0.3443912f, -0.0885101f, +0.0617640f, -0.3215772f, -0.2668980f, -0.2057189f, +0.3276785f,
  +0.0304289f, +0.0979776f, +0.1880302f, -0.0679252f, -0.1907624f, +0.0531757f, +0.1106849f, +0.2614183f,
  -0.1396041f, +0.0322281f, +0.2484691f, +0.1702940f, -0.1096242f, -0.0158195f, -0.0721360f, +0.1519217f,
  +0.0487226f, +0.0968361f, -0.1359466f, +0.0366732f, -0.0047088f, +0.1879319f, +0.0946520f, +0.1619106f,
  +0.1559922f, +0.1296445f, -0.0974584f, -0.1441218f, -0.2058924f, +0.0420768f, -0.1258754f, -0.0035820f,
  -0.0670587f, -0.1413845f, -0.0420970f, -0.0086658f, -0.2334618f, +0.0935382f, +0.2226360f, +0.1629472f,
  -0.0192660f, -0.0530729f, -0.0798865f, +0.1550254f, +0.1332185f, -0.1370777f, -0.0507581f, +0.1741066f,
  -0.0050669f, -0.1212674f, -0.2604426f, -0.0752081f, +0.0741904f, +0.1573437f, -0.1082073f, -0.3380782f,
  +0.0647643f, +0.1402099f, -0.2324129f, +0.1009097f, -0.4382035f, -0.2393397f, +0.1649461f, -0.1883008f,
  +0.0967637f, +0.1550962f, +0.1481968f, -0.2113633f, -0.1471033f, -0.0332768f, -0.0268207f, -0.1952989f,
  -0.0570068f, +0.2112980f, +0.0222289f, -0.0388594f, +0.1523465f, -0.1592106f, -0.0604153f, -0.1350736f,
  +0.1176204f, +0.0691480f, +0.0797126f, +0.2238100f, +0.2832935f, -0.0885472f, -0.0037177f, +0.1831613f,
  -0.0670561f, +0.0679744f, +0.0221235f, -0.0172267f, +0.0885543f, -0.1910979f, +0.0467453f, +0.1110875f,
  +0.2179632f, +0.1336515f, +0.0624244f, -0.0616058f, +0.1980317f, +0.0333971f, -0.1920137f, +0.2509869f,
  +0.0643118f, -0.4293432f, +0.2147327f, -0.0874366f, -0.2094894f, +0.1699039f, +0.0597064f, +0.0789398f,
  +0.4901448f, +0.0692205f, -0.0391571f, +0.0828302f, -0.1023213f, +0.1373571f, -0.0440281f, +0.1318545f,
  -0.0352562f, -0.0121154f, -0.1752380f, -0.3074387f, -0.1355438f, -0.5447257f, +0.0702983f, -0.3445271f,
  +0.0765240f, +0.1946222f, -0.0788353f, +0.0468634f, +0.0748433f, -0.3842625f, +0.1062217f, -0.2425440f,
  +0.1179057f, +0.2278493f, -0.3663803f, -0.0177648f, -0.1475256f, +0.1189539f, -0.1520716f, -0.0572646f,
  -0.0231277f, +0.0634468f, +0.0374855f, -0.0493757f, +0.4147439f, -0.3723941f, -0.1415653f, -0.2331160f,
  +0.1746249f, -0.1968974f, -0.3728592f, +0.1713304f, -0.0916447f, -0.2289690f, +0.1342276f, -0.4276243f,
  -0.0833572f, -0.3134384f, +0.0350808f, +0.0695773f, -0.2137291f, -0.2948223f, +0.1280616f, -0.2168959f,
  +0.0427772f, -0.0287306f, -0.1998231f, +0.0356244f, +0.0338509f, +0.0618600f, -0.0417980f, +0.0378013f,
  +0.0948829f, +0.0154228f, -0.0059072f, -0.1732081f, -0.0031628f, +0.1315216f, -0.0159446f, +0.1057440f,
  -0.0468480f, +0.0180026f, -0.1555670f, +0.1819287f, +0.1128935f, +0.1679380f, +0.0267573f, -0.0797064f,
  -0.0411101f, +0.1362394f, -0.2996943f, -0.1368122f, +0.0129957f, -0.1065094f, +0.1070819f, -0.0962945f,
  -0.1684440f, +0.1099996f, +0.0444348f, +0.1327398f, +0.1245873f, +0.2124737f, -0.1139104f, -0.5076295f,
  +0.0323098f, +0.1023812f, -0.0079528f, +0.3880013f, +0.2017633f, +0.0584361f, -0.1106215f, -0.1178132f,
  +0.1378804f, +0.1851788f, +0.0308102f, -0.2223556f, +0.1229802f, -0.2056194f, +0.1999065f, +0.1143696f,
  +0.6223490f, +0.0157533f, +0.4004476f, +0.2795750f, -0.0738444f, +0.5391921f, -0.0662102f, -0.2005518f,
  -0.0186321f, -0.2347982f, -0.3315805f, -0.0393111f, -0.3158972f, -0.3295287f, +0.1792324f, +0.0639602f
);

const float biases[4] = float[4](
  +0.0141245f, -0.0470331f, +0.0189494f, -0.0113900f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer31 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0797316f, -0.1656891f, +0.0107213f, +0.0973491f, -0.1475997f, -0.5288788f, +0.0503737f, -0.1456679f,
  -0.1951591f, -0.3477090f, +0.1058228f, -0.0593042f, -0.5549132f, -0.2627071f, -0.1399594f, +0.0222887f,
  +0.4947394f, +0.0937496f, -0.2424250f, -0.1739881f, +0.0209494f, -0.0732110f, +0.1740395f, +0.3385067f,
  -0.2196700f, +0.0213157f, -0.0209603f, +0.1621786f, +0.0722153f, +0.1206171f, +0.1034174f, -0.1899024f,
  +0.3332610f, +0.0133848f, -0.1113969f, -0.1355956f, -0.3753576f, +0.1258082f, +0.0932760f, +0.2894583f,
  +0.0335849f, +0.1043898f, -0.3338415f, +0.3550215f, -0.0058831f, +0.2306029f, -0.1367105f, -0.1436037f,
  -0.0478620f, +0.1909253f, +0.0968300f, +0.3538315f, +0.1818966f, -0.0023924f, +0.0490764f, +0.1604947f,
  +0.2762617f, -0.1892395f, -0.2444537f, -0.3421921f, +0.0666363f, -0.2865742f, -0.1591545f, -0.4130803f,
  +0.1485004f, -0.0312160f, -0.2339612f, -0.3044347f, -0.1190317f, -0.0692738f, +0.0510584f, +0.0566418f,
  +0.0804335f, +0.2523096f, -0.1755552f, +0.1702411f, +0.1138793f, -0.0560413f, +0.0452110f, +0.0745346f,
  +0.0756507f, +0.0197658f, -0.1344590f, +0.0279164f, +0.1154078f, +0.1782429f, -0.2720854f, -0.0197312f,
  +0.0189074f, +0.0117687f, +0.2560189f, -0.0082732f, -0.1400493f, +0.1295680f, -0.0001553f, +0.2835271f,
  -0.1171766f, +0.1439105f, +0.0251551f, +0.1604069f, +0.3189158f, -0.2514578f, -0.0042779f, +0.1169193f,
  -0.0246944f, +0.3097335f, -0.1186588f, +0.1529136f, +0.1858311f, -0.0035700f, -0.2777070f, -0.2333748f,
  +0.0309004f, -0.1047755f, +0.0599902f, -0.1634281f, +0.1565518f, -0.1352069f, +0.3277176f, +0.1825297f,
  -0.1321724f, +0.1689717f, -0.0262429f, -0.2862846f, +0.0324854f, -0.1908306f, -0.1161864f, -0.0200057f,
  -0.0003042f, +0.0210512f, +0.1331006f, +0.0861065f, -0.0860391f, +0.0539647f, +0.0484757f, -0.3190874f,
  -0.1895943f, +0.0102820f, +0.0807415f, -0.0867751f, -0.0472289f, +0.0568603f, -0.1517707f, +0.0133885f,
  +0.0899837f, -0.1373484f, +0.0348367f, -0.0126229f, +0.2959351f, -0.1139595f, +0.1307692f, -0.2100077f,
  -0.0556839f, +0.1025965f, +0.0377168f, +0.0950513f, -0.0053569f, +0.0704877f, -0.1251947f, +0.0647638f,
  +0.1609673f, -0.0549895f, +0.1528335f, -0.0730576f, +0.0950399f, -0.1242494f, -0.0064073f, -0.0488512f,
  -0.1252123f, +0.2050134f, +0.1118096f, -0.0613731f, -0.3984050f, +0.2033032f, +0.0754021f, +0.0816576f,
  -0.2356056f, +0.0180384f, +0.1872631f, -0.2788067f, +0.2659140f, +0.0426591f, -0.1147491f, +0.1885093f,
  +0.2057294f, -0.0952193f, +0.2461887f, +0.0909677f, +0.0569325f, +0.1859698f, +0.0315831f, +0.2016556f,
  -0.1424076f, +0.0303607f, -0.1569106f, -0.2230279f, +0.1352244f, -0.1380738f, -0.3796036f, -0.0235871f,
  +0.2470837f, +0.1471097f, +0.2352948f, -0.1303661f, -0.0986585f, +0.0790542f, -0.0427840f, -0.2663845f,
  +0.0283974f, +0.2516873f, +0.0592291f, +0.3031694f, +0.1595430f, -0.0912065f, +0.0151606f, -0.0035945f,
  +0.1155165f, +0.0379187f, -0.4410403f, +0.1758535f, -0.1796874f, +0.0045745f, -0.0235303f, -0.2545659f,
  -0.3268239f, -0.0145866f, -0.1781511f, -0.4252929f, +0.0169152f, -0.0580060f, +0.1675994f, +0.1897903f,
  -0.0235334f, -0.2462524f, -0.1699080f, -0.2108499f, -0.0319276f, -0.1430292f, -0.0456226f, -0.0386985f,
  -0.1576413f, +0.1923295f, -0.2841924f, -0.0889390f, -0.1939276f, +0.0678460f, -0.1137306f, +0.1308805f,
  -0.4455937f, -0.1112254f, +0.3920301f, -0.1086224f, -0.2846552f, -0.1395832f, -0.1263749f, -0.2448347f,
  -0.2728620f, -0.2561089f, +0.1690526f, -0.0225126f, -0.2293012f, +0.2327132f, +0.2074544f, -0.2286394f,
  +0.1817337f, -0.4180544f, -0.2884378f, -0.0905658f, -0.1871661f, -0.1486516f, +0.2273887f, -0.2363897f,
  -0.1351351f, +0.0066296f, +0.1760332f, +0.1748216f, +0.0897875f, -0.3802914f, +0.3221532f, +0.1542480f,
  -0.0668282f, +0.1977410f, -0.2710358f, +0.3181792f, +0.1890865f, +0.1023328f, +0.1356504f, +0.1078146f
);

const float biases[4] = float[4](
  -0.0309524f, -0.0294031f, -0.0143828f, +0.0274826f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer32 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0990640f, +0.0535838f, -0.3069946f, -0.3062327f, -0.3238513f, -0.1091261f, +0.0740447f, -0.2739922f,
  +0.1067921f, -0.1525520f, -0.0805433f, +0.0740579f, -0.1428513f, +0.0141833f, +0.0150235f, -0.1836098f,
  -0.2145694f, -0.0711522f, -0.2903972f, +0.0106554f, +0.0366531f, -0.1144941f, +0.2798274f, +0.1219469f,
  +0.0673892f, +0.1421317f, +0.0775450f, -0.2993503f, +0.0583544f, -0.3277330f, -0.0931218f, -0.1678748f,
  +0.0745739f, +0.1766116f, -0.0850907f, -0.1844494f, -0.0888641f, -0.0396382f, +0.2627873f, +0.3374059f,
  -0.2202889f, +0.3411745f, +0.0418282f, +0.1285101f, -0.1962901f, -0.0235945f, -0.0193678f, +0.2716340f,
  +0.2696494f, +0.0215912f, +0.1054678f, -0.0436234f, -0.1764374f, -0.2370613f, -0.0548831f, -0.0853521f,
  -0.0709785f, +0.0816725f, -0.2682910f, -0.1757006f, +0.2605528f, -0.0481742f, +0.0163582f, -0.0206497f,
  -0.1479913f, -0.1282040f, -0.1187174f, +0.0437974f, +0.0829755f, -0.0397499f, -0.1957561f, +0.0239000f,
  +0.2054274f, -0.0353267f, +0.1986374f, +0.0760605f, +0.1693375f, -0.0220562f, -0.2326378f, +0.0665281f,
  -0.1895346f, +0.2000604f, -0.0792543f, +0.4410079f, +0.1395386f, -0.0116494f, -0.1025490f, -0.1798019f,
  -0.0896108f, +0.1633704f, -0.1209280f, +0.0328318f, +0.1129711f, +0.0942898f, -0.0746141f, +0.1466064f,
  +0.0987910f, -0.1649273f, -0.0143082f, +0.0432198f, -0.5081208f, +0.1022539f, +0.1713266f, +0.1749551f,
  -0.0762123f, -0.1134635f, -0.2600825f, +0.0702351f, +0.0141285f, +0.1138626f, -0.0139937f, +0.2538204f,
  +0.1602266f, +0.0397234f, -0.4512580f, +0.0279368f, +0.2071662f, -0.0856660f, -0.1207019f, -0.1636990f,
  +0.0192798f, +0.1103118f, -0.0851290f, +0.0051283f, -0.2358770f, +0.0831535f, -0.0799516f, -0.0171506f,
  +0.0301689f, +0.2827888f, +0.0968591f, -0.0218301f, +0.1812322f, +0.0860905f, -0.0734908f, +0.0335985f,
  +0.1438469f, +0.2253698f, +0.1635763f, +0.0615203f, +0.0065420f, +0.0296939f, +0.0133625f, -0.1322760f,
  -0.2430254f, -0.3612231f, -0.0776741f, +0.2079618f, +0.3236419f, +0.0384609f, -0.1166469f, -0.0950932f,
  +0.1299587f, -0.1995688f, +0.3010735f, -0.2736079f, +0.5462602f, +0.0016289f, +0.1171887f, +0.0422978f,
  +0.0679142f, -0.0782568f, -0.2842700f, +0.2401181f, -0.4436330f, -0.0690107f, +0.1398897f, +0.1346103f,
  +0.3233134f, +0.0496445f, +0.0336133f, -0.0391824f, +0.2735192f, -0.0057760f, +0.2637162f, -0.0234147f,
  +0.1977869f, +0.2566258f, +0.0511688f, +0.1086644f, +0.0933981f, +0.0261308f, -0.5188353f, +0.1048243f,
  -0.0617451f, +0.0163156f, +0.1931151f, +0.0935749f, -0.0892779f, -0.1709665f, -0.0845225f, +0.1046701f,
  -0.0463260f, +0.1309929f, -0.0457423f, +0.1745666f, +0.3299740f, -0.2440143f, -0.0275091f, -0.0363192f,
  -0.0171461f, +0.3995595f, +0.1098202f, +0.1634918f, +0.0070524f, -0.2113494f, +0.2746873f, +0.1067962f,
  -0.0393369f, -0.0296507f, -0.0701995f, +0.2993267f, +0.6361139f, -0.1001908f, +0.1576826f, +0.2576861f,
  -0.0835858f, +0.2433610f, +0.1437025f, +0.1006259f, +0.1303286f, -0.1754557f, -0.0724692f, -0.1446465f,
  -0.0642438f, -0.2755665f, -0.1311965f, -0.0968467f, +0.2088528f, -0.0353757f, +0.1329589f, -0.1052798f,
  -0.1674110f, -0.0416837f, +0.3615006f, +0.2718883f, +0.0417994f, +0.0251554f, -0.0539261f, +0.3484353f,
  -0.0315918f, -0.1320177f, -0.0747729f, -0.1188623f, -0.1512223f, -0.2281978f, +0.0494874f, -0.0755797f,
  +0.1140687f, -0.3189702f, -0.2280255f, -0.1431726f, +0.0936301f, -0.2463626f, +0.0572063f, +0.1947913f,
  +0.1094517f, +0.1569411f, +0.1071923f, -0.2378103f, +0.0802178f, -0.0814772f, -0.0675916f, +0.2315170f,
  -0.0572203f, +0.0243740f, -0.0670652f, -0.0248320f, +0.2544080f, -0.0567241f, -0.0285604f, +0.2432060f,
  -0.0404169f, -0.0545928f, +0.2464392f, +0.0954774f, -0.1546719f, -0.3517466f, -0.0054378f, +0.4948877f,
  -0.0452612f, -0.1770472f, +0.1359293f, +0.0028544f, -0.0792807f, -0.1328495f, +0.0628328f, -0.0431515f
);

const float biases[4] = float[4](
  +0.0108186f, +0.0011594f, -0.0092104f, +0.0106063f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer32 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2795480f, +0.2059370f, +0.1102621f, +0.1436754f, +0.0161320f, -0.0655852f, +0.1633859f, -0.3802720f,
  +0.1232915f, +0.1165501f, -0.1072267f, -0.0042785f, +0.1652422f, -0.1768879f, -0.1462950f, -0.1754387f,
  -0.1242939f, +0.3935682f, -0.2340512f, -0.1287411f, -0.0945108f, +0.0554760f, -0.0172887f, +0.1620632f,
  +0.2103729f, +0.0549181f, -0.1690336f, +0.0857246f, -0.0233901f, +0.0471331f, +0.0590062f, +0.1839261f,
  +0.1011353f, +0.3058364f, -0.4263867f, -0.3547599f, +0.3440211f, -0.3197879f, -0.0269537f, -0.5356573f,
  +0.1602416f, -0.3762858f, -0.3209248f, +0.0435889f, -0.0755603f, -0.2432993f, -0.0067856f, -0.0655211f,
  +0.0038531f, +0.2037764f, +0.2449374f, +0.0156841f, -0.0270707f, +0.1049382f, +0.0058384f, +0.1818019f,
  +0.1631138f, +0.1117592f, +0.2170158f, -0.0801398f, -0.0596475f, -0.0913419f, -0.0352104f, +0.3496045f,
  -0.3924647f, -0.2023058f, -0.2497803f, +0.0594096f, -0.0232466f, -0.0656550f, +0.0555723f, -0.2695464f,
  +0.1116997f, +0.2068522f, -0.0720952f, -0.1340091f, -0.3700744f, +0.0950366f, -0.0298355f, +0.0370867f,
  -0.1673393f, -0.0794115f, +0.1823726f, -0.3510533f, -0.1043299f, -0.1420998f, -0.2509235f, +0.0014254f,
  +0.0386377f, +0.2028785f, +0.2266920f, +0.1638858f, +0.1369572f, +0.2751081f, -0.0658823f, -0.0861350f,
  +0.4126010f, +0.1238272f, -0.0428469f, -0.1804085f, -0.1865463f, -0.0263139f, -0.0070155f, +0.0897283f,
  -0.1645476f, +0.2096340f, +0.0205733f, -0.2536061f, -0.0333513f, -0.3209870f, -0.0495296f, +0.0736785f,
  +0.3377471f, +0.0852688f, +0.3243858f, +0.0228467f, +0.1794644f, -0.0695415f, -0.0193615f, +0.0870696f,
  +0.2407750f, -0.0026685f, -0.1099990f, -0.1696954f, -0.3121863f, +0.0770324f, +0.1991936f, +0.2126757f,
  +0.0988531f, +0.1689588f, -0.0897835f, -0.1504657f, +0.0949622f, -0.0820898f, +0.0255251f, -0.0555927f,
  -0.0192590f, +0.0003024f, +0.2178448f, -0.0716456f, +0.2425182f, -0.0086730f, +0.0175253f, -0.0632268f,
  -0.0836749f, +0.2785338f, +0.0460520f, +0.0522024f, -0.0020731f, +0.3896853f, -0.0344610f, -0.3958015f,
  +0.1986637f, +0.0375508f, +0.0045769f, -0.2594977f, -0.1097365f, -0.1539926f, -0.0048176f, +0.0868139f,
  -0.1915779f, -0.1142750f, +0.3313309f, -0.2379449f, -0.0525218f, +0.1201797f, +0.0387981f, +0.0609877f,
  +0.2051788f, +0.1304267f, +0.2423652f, +0.0062126f, +0.1636484f, +0.0525997f, -0.2228833f, -0.1270678f,
  +0.2372007f, -0.1162870f, -0.0817085f, +0.4152878f, +0.1945297f, -0.0655466f, -0.0508716f, +0.3537084f,
  +0.0558140f, -0.1487520f, -0.3840010f, -0.1764677f, -0.1377024f, -0.1092864f, +0.1395108f, -0.0553960f,
  -0.0801929f, -0.0401737f, -0.1743432f, -0.1072096f, +0.1645610f, -0.0950189f, +0.1667709f, -0.0699075f,
  -0.0403590f, -0.0629624f, -0.0663838f, -0.1225441f, -0.1783281f, +0.1858342f, +0.1212238f, +0.2971120f,
  -0.0576797f, -0.2245560f, +0.0406774f, -0.1311248f, -0.2273200f, +0.1850916f, -0.1408040f, -0.0262119f,
  -0.0999948f, +0.1615602f, +0.0740891f, -0.1016997f, +0.0929461f, +0.0904880f, +0.1302537f, -0.1256466f,
  -0.3520452f, +0.1917240f, +0.0164037f, +0.3782107f, +0.1107470f, +0.0591417f, -0.0781606f, +0.0508100f,
  -0.2771511f, +0.1374474f, -0.3666804f, +0.2383082f, -0.1639049f, +0.0723535f, +0.2790516f, +0.1374131f,
  -0.0005017f, -0.2630740f, +0.0464216f, +0.2273595f, +0.1590498f, +0.0840925f, -0.0945791f, +0.0441085f,
  -0.0135211f, +0.1341724f, -0.1457391f, +0.1047556f, -0.1498080f, -0.1138475f, +0.0683825f, -0.0353415f,
  -0.1062810f, -0.0332599f, +0.2092370f, -0.1251547f, +0.2759230f, +0.2012045f, -0.0076099f, +0.0436133f,
  +0.2498811f, +0.1357705f, -0.0042381f, -0.1678711f, -0.0410834f, +0.2006684f, -0.1131268f, -0.0553486f,
  +0.0787944f, +0.0305933f, -0.0975645f, -0.0532832f, +0.0350600f, +0.0637674f, -0.0584580f, -0.3119696f,
  -0.1816898f, +0.0608063f, +0.0308216f, +0.1673882f, +0.0529635f, +0.0088497f, -0.1253765f, +0.0763494f
);

const float biases[4] = float[4](
  +0.0057265f, -0.0378112f, -0.0058975f, -0.0291527f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer33 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0666228f, -0.1033939f, +0.1534942f, -0.1536279f, -0.2391155f, +0.2499447f, -0.1951258f, +0.1606737f,
  +0.0210772f, -0.1898656f, +0.2354940f, +0.1989078f, +0.0275683f, +0.4759361f, +0.1367887f, +0.0757543f,
  -0.0780765f, -0.1056957f, -0.0023869f, +0.0411480f, +0.0599268f, -0.2431876f, +0.1440078f, +0.2388643f,
  -0.1924883f, -0.0145025f, +0.1987145f, -0.0945702f, +0.0336392f, +0.0782675f, +0.1108920f, +0.0127879f,
  +0.0536855f, -0.1168608f, +0.0880951f, -0.3335824f, +0.0074838f, +0.0760521f, +0.0515827f, -0.0139714f,
  -0.1551925f, -0.0604788f, -0.0120614f, +0.1111369f, -0.3248967f, +0.0535904f, -0.0657480f, -0.0479413f,
  -0.2752115f, -0.0137849f, -0.0114940f, -0.0904411f, +0.0361738f, +0.0644491f, +0.1106243f, +0.0574514f,
  -0.0029881f, +0.2178559f, +0.0928800f, -0.2911121f, +0.0519139f, +0.4075960f, -0.1526591f, +0.0058142f,
  -0.1393304f, -0.0174354f, -0.0356335f, +0.0817452f, +0.0434306f, -0.0415974f, +0.2975068f, -0.0401593f,
  -0.0460961f, -0.3677214f, -0.0051568f, +0.1728261f, -0.1498795f, +0.1030121f, +0.0614438f, +0.1017657f,
  -0.1451383f, +0.2536620f, -0.1255046f, +0.0695047f, -0.1059163f, -0.2164661f, +0.0054175f, -0.0084312f,
  -0.1040013f, -0.1118264f, -0.0518700f, +0.1349042f, -0.3401234f, +0.3265201f, +0.0685353f, +0.0711730f,
  +0.1544719f, -0.0199498f, -0.1454378f, +0.1038461f, -0.1211157f, -0.3390016f, -0.1783344f, -0.1024099f,
  +0.1103374f, +0.1378704f, -0.1231849f, +0.1285319f, -0.2491382f, +0.3469144f, +0.2774363f, -0.0573014f,
  -0.1225003f, -0.0582840f, +0.1959314f, +0.1798183f, -0.1016200f, +0.1539963f, +0.0043539f, -0.1121367f,
  -0.4444627f, +0.0492646f, +0.1763206f, +0.0888626f, -0.2968563f, -0.1185839f, +0.1240644f, -0.3229401f,
  -0.2492400f, -0.1459813f, -0.2136841f, +0.1933861f, +0.3056989f, -0.1906841f, +0.2895796f, -0.0365857f,
  -0.2832583f, +0.0473840f, +0.1444161f, -0.1726758f, -0.0877908f, -0.0912586f, +0.1192166f, -0.0432142f,
  +0.0551907f, -0.3041616f, +0.0738241f, -0.0982466f, +0.1589388f, +0.1419813f, +0.2987428f, +0.0742414f,
  +0.0997514f, +0.1119734f, -0.0614497f, +0.1040033f, +0.0586725f, -0.1591441f, -0.0693908f, +0.1203660f,
  +0.1388596f, +0.0684412f, -0.1996037f, -0.0148774f, +0.2542701f, -0.3149520f, +0.0953294f, +0.1304206f,
  -0.0248457f, -0.0990841f, +0.0669420f, +0.1676264f, +0.4969835f, +0.1186701f, +0.0131582f, -0.1102645f,
  +0.1541791f, +0.0285728f, +0.1321864f, -0.1289857f, +0.0145418f, -0.0924699f, -0.2807796f, +0.2832854f,
  -0.0974442f, +0.1526378f, -0.1146234f, -0.0511854f, +0.0610918f, -0.0239577f, +0.0866100f, -0.0647614f,
  -0.2450500f, +0.1299785f, +0.0174501f, -0.0191972f, +0.0106428f, -0.1340436f, +0.2193005f, +0.3091114f,
  +0.1100194f, +0.2267833f, -0.2343872f, -0.0851028f, -0.1478749f, -0.2404723f, -0.2500663f, +0.0532601f,
  +0.1268531f, +0.0250350f, +0.0981284f, +0.0424581f, +0.3885305f, +0.0794223f, +0.1836124f, -0.0094904f,
  +0.0473022f, -0.1124401f, -0.2874487f, +0.2013498f, -0.1160898f, +0.2199786f, +0.0620265f, -0.4373996f,
  +0.3119614f, +0.0267471f, -0.4558238f, +0.2676094f, -0.1146519f, -0.1534240f, +0.2033673f, +0.1522172f,
  +0.2107912f, -0.2678408f, +0.0144389f, +0.3175021f, -0.1724160f, +0.1441250f, +0.2075209f, +0.0977612f,
  -0.0252289f, +0.0918371f, +0.0941367f, -0.1356211f, +0.2451808f, +0.1205597f, -0.1684384f, -0.1309050f,
  -0.3860448f, +0.0910236f, -0.2319928f, +0.3216106f, -0.1151588f, -0.1115906f, +0.2478025f, +0.0698410f,
  +0.0886590f, +0.1427323f, -0.0705074f, +0.4084203f, +0.1977479f, +0.1055757f, +0.0008635f, -0.2170882f,
  +0.2821720f, -0.0823035f, -0.1051915f, -0.0979245f, +0.1935897f, +0.1489299f, -0.2984005f, +0.0622886f,
  +0.2511337f, -0.0991032f, -0.1417886f, -0.1126447f, -0.0067555f, +0.4028796f, -0.1446863f, -0.0438572f,
  -0.1004950f, +0.0516392f, -0.1867876f, +0.0434283f, +0.2435024f, -0.1803317f, +0.0488008f, +0.1371892f
);

const float biases[4] = float[4](
  +0.0078962f, -0.0443494f, +0.0417601f, +0.0423379f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer33 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0500830f, -0.1032208f, +0.3213001f, -0.0513495f, -0.0665505f, +0.1030411f, -0.1361651f, -0.0906704f,
  +0.0048777f, +0.1600490f, -0.0054580f, -0.0900423f, -0.2039829f, -0.0700927f, -0.0087512f, +0.2210425f,
  -0.0971346f, -0.1638729f, +0.2265659f, -0.1380530f, +0.0207867f, -0.0368785f, +0.1079152f, -0.1711029f,
  -0.2131879f, +0.0058803f, +0.2183065f, -0.2250182f, -0.1292685f, +0.0520020f, -0.1199740f, +0.2790060f,
  -0.1096411f, +0.1469624f, -0.1857785f, +0.1634160f, -0.1883484f, +0.1391172f, -0.1734565f, +0.1265774f,
  +0.0667139f, -0.0326472f, -0.0106876f, +0.1965243f, +0.1556388f, +0.1607370f, +0.2526822f, +0.0165688f,
  -0.0108769f, -0.1584748f, +0.2018779f, +0.0216566f, +0.0964329f, +0.1840506f, -0.0199378f, +0.0924368f,
  +0.1247268f, +0.0364919f, -0.2354839f, -0.0541131f, +0.1672007f, -0.1057051f, +0.1075770f, +0.1292039f,
  +0.1249041f, +0.0013407f, -0.1456171f, -0.1124673f, +0.1215674f, -0.0171273f, +0.1892847f, -0.2057648f,
  -0.1593030f, +0.0577908f, +0.1548117f, -0.0366633f, +0.0193586f, -0.0173924f, -0.1187919f, -0.0399163f,
  -0.1536092f, -0.0092934f, -0.0486335f, -0.0067081f, -0.0155102f, +0.0771236f, -0.1264098f, -0.0661089f,
  +0.0257385f, +0.0419959f, +0.1830139f, -0.0901363f, +0.0004709f, -0.0236226f, -0.1504954f, -0.1544420f,
  +0.1534511f, +0.0047561f, +0.1347155f, +0.0007012f, +0.0832794f, -0.0846558f, +0.1294135f, +0.0266536f,
  -0.2833948f, +0.2274114f, +0.2009621f, +0.0708510f, +0.0585272f, -0.0904117f, -0.0247893f, -0.2625591f,
  -0.1028598f, -0.0889520f, +0.0903272f, +0.0600600f, +0.1207538f, -0.0437172f, -0.1283534f, -0.2729053f,
  +0.0390785f, -0.0145988f, -0.0762947f, +0.0802665f, +0.0075496f, -0.0149125f, +0.1715154f, +0.0741708f,
  +0.0270759f, -0.0327711f, +0.0308057f, -0.0679420f, +0.2423075f, +0.1713942f, -0.2155712f, -0.1484701f,
  -0.1452635f, +0.0142192f, +0.1501364f, +0.0846491f, +0.0124498f, -0.0127490f, -0.1431913f, -0.0829248f,
  +0.0184125f, -0.0712330f, +0.0751265f, +0.1033496f, -0.0296503f, +0.0497323f, -0.2921306f, -0.1780968f,
  -0.2248953f, +0.2415762f, -0.2029145f, +0.0086144f, -0.0681727f, -0.1528172f, +0.4115694f, +0.4821721f,
  +0.4335231f, -0.0344585f, -0.2766015f, -0.0161514f, +0.1851003f, -0.0631593f, -0.2177148f, -0.2237093f,
  +0.0933752f, +0.0236695f, +0.0193059f, +0.0205330f, -0.1873168f, -0.5647109f, +0.1955353f, +0.1393337f,
  -0.0363654f, -0.0350035f, -0.5702988f, -0.0604678f, +0.0945339f, +0.1454173f, +0.0244766f, +0.1810547f,
  +0.1700883f, -0.0315948f, +0.1566524f, +0.0724904f, -0.0080345f, -0.5047120f, -0.0998646f, -0.2991088f,
  +0.1179958f, -0.0762440f, -0.1988069f, +0.0320210f, +0.2001486f, -0.2778463f, +0.0719692f, -0.0960102f,
  +0.2770644f, +0.0133598f, +0.0251692f, -0.1054906f, +0.2037200f, -0.4207941f, -0.0520445f, -0.1833933f,
  -0.1569740f, +0.0284186f, +0.0001965f, +0.0897145f, +0.0392741f, +0.1057335f, +0.1363119f, +0.3890575f,
  +0.1696891f, +0.1832469f, -0.1575439f, +0.1647286f, +0.0286296f, +0.0337503f, +0.1980646f, -0.0955166f,
  -0.1557516f, +0.0066960f, -0.2038104f, +0.1719860f, +0.1429967f, -0.3186996f, -0.0837132f, -0.0471348f,
  -0.0038617f, -0.0016513f, +0.1142697f, +0.1600834f, +0.1594883f, -0.1414199f, -0.0081124f, +0.0474756f,
  +0.0935915f, -0.1219334f, -0.6296659f, -0.0258288f, +0.2822881f, -0.2283158f, +0.1646511f, +0.0553234f,
  +0.0070563f, +0.1867326f, +0.1046185f, -0.1311083f, +0.2254894f, -0.1278265f, +0.0066541f, -0.0121976f,
  -0.1708878f, -0.0639779f, +0.1830723f, -0.3307998f, -0.0461154f, -0.1487613f, -0.2009910f, -0.2031870f,
  +0.1576612f, -0.2457895f, -0.0179978f, -0.2017475f, +0.1115443f, -0.1650480f, +0.2288997f, -0.0887538f,
  -0.3527637f, +0.1034080f, -0.2102918f, +0.2194729f, -0.1518477f, -0.1583924f, -0.2883484f, +0.1145263f,
  +0.1036779f, +0.1107404f, +0.0573539f, +0.0941403f, -0.2183259f, -0.1337890f, +0.2096993f, +0.0934359f
);

const float biases[4] = float[4](
  +0.0293136f, +0.0515620f, -0.0089701f, +0.0034376f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer34 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0134779f, +0.1683212f, -0.2141429f, +0.1322591f, -0.2186751f, -0.0670236f, +0.0049194f, +0.3741552f,
  -0.0080157f, +0.1131633f, -0.1750122f, +0.1094267f, -0.1001966f, -0.0355787f, -0.1501233f, -0.0380142f,
  +0.0689554f, +0.1631161f, -0.1915687f, +0.1790345f, +0.0320307f, -0.1193710f, -0.1155886f, -0.1925648f,
  +0.0192506f, +0.0799376f, +0.3985762f, +0.0243430f, -0.0654822f, +0.1400936f, +0.0597674f, +0.2344722f,
  -0.2169499f, +0.2385331f, -0.0821201f, +0.2281989f, -0.0891596f, +0.1986264f, -0.5410513f, -0.1767869f,
  +0.0559753f, +0.2094333f, -0.0230463f, -0.1648572f, +0.0644620f, -0.3447439f, -0.1718657f, -0.3299752f,
  -0.2171949f, +0.0849928f, +0.0171201f, +0.2656215f, +0.1603975f, +0.0791482f, -0.1791351f, +0.1250119f,
  -0.0574558f, +0.1109927f, +0.0377191f, -0.1395449f, +0.1267762f, +0.1225451f, -0.5894240f, -0.3106485f,
  +0.0575389f, +0.0828249f, +0.0539298f, +0.3269810f, +0.0366739f, +0.0527801f, +0.1858464f, -0.1477346f,
  -0.1061290f, +0.2084226f, -0.1094188f, -0.1470205f, +0.0866576f, +0.2460129f, +0.0474226f, -0.1160636f,
  -0.1848582f, -0.2280039f, +0.2141261f, -0.2165113f, +0.1385065f, +0.1029658f, -0.0556216f, -0.1440808f,
  +0.0182555f, +0.0350984f, -0.0963707f, +0.1721690f, -0.1375667f, +0.1440074f, -0.0731797f, +0.1367432f,
  -0.1036559f, -0.1388205f, -0.2978943f, +0.1558119f, -0.2893956f, +0.1434730f, +0.1567024f, -0.0121442f,
  +0.1322122f, +0.1283528f, +0.2258592f, -0.2173119f, +0.0491874f, -0.0614103f, -0.3312612f, +0.1092170f,
  -0.1419542f, -0.2815018f, +0.0429128f, +0.0277117f, +0.0026410f, -0.0349846f, +0.5036030f, -0.3258949f,
  +0.0714549f, +0.2775131f, -0.2857422f, -0.2991229f, -0.2500731f, -0.1316610f, -0.1170807f, +0.0124648f,
  +0.1565608f, -0.0212295f, -0.2072609f, -0.0526791f, -0.0184555f, -0.0698556f, +0.4118287f, -0.3701245f,
  +0.0429631f, +0.0688924f, +0.0218491f, -0.0952802f, -0.2868057f, +0.0185237f, -0.0329957f, +0.0132076f,
  +0.1348090f, +0.1243438f, -0.0015630f, -0.0115894f, +0.2767408f, -0.0691355f, -0.1234943f, -0.0508425f,
  +0.0978285f, -0.1851470f, -0.0407353f, -0.0789793f, -0.1952597f, -0.1196138f, +0.0374582f, -0.0290653f,
  -0.0072957f, +0.1026575f, -0.0391045f, -0.0735237f, -0.1371695f, +0.0175432f, -0.2148803f, +0.2916959f,
  -0.0399156f, -0.1866846f, -0.0752794f, +0.1430000f, -0.1254080f, -0.0180730f, +0.0930227f, +0.0070253f,
  +0.1149962f, +0.0393848f, -0.0365048f, -0.0890706f, +0.0735878f, +0.0268702f, +0.0301627f, -0.1222094f,
  +0.0221890f, +0.0014868f, +0.1137126f, -0.0309613f, +0.0616480f, +0.2028439f, -0.3765905f, +0.1547044f,
  -0.1702517f, -0.2809262f, +0.1973021f, -0.1595124f, +0.1899877f, +0.0187772f, +0.1194527f, -0.0442378f,
  +0.0925927f, -0.0155300f, +0.0198215f, +0.2512486f, +0.0066793f, -0.2704741f, -0.1394683f, -0.1161368f,
  -0.0562259f, -0.0487803f, +0.3470671f, +0.1353080f, -0.0726763f, -0.0359036f, +0.0455812f, -0.2683747f,
  +0.2009553f, +0.2737229f, +0.0105054f, +0.2664197f, +0.0901714f, +0.0105982f, +0.0573649f, -0.0452271f,
  +0.1785840f, -0.0111065f, -0.0177292f, +0.2654932f, +0.4685132f, -0.0438028f, +0.0458835f, +0.0919065f,
  +0.0484027f, +0.0851979f, -0.0193932f, -0.2095891f, +0.1361283f, -0.2374962f, -0.1695768f, +0.1118526f,
  -0.0882444f, -0.0591413f, -0.0825076f, -0.3757941f, -0.0374246f, +0.1327527f, -0.1057044f, +0.4301841f,
  -0.0068336f, -0.1505234f, +0.0860709f, -0.5120260f, -0.1659501f, -0.0544915f, -0.1107802f, +0.0328565f,
  -0.1530855f, +0.1062531f, -0.1668332f, +0.3924089f, +0.0015245f, +0.2704765f, +0.1240655f, -0.0638531f,
  +0.0926097f, -0.0688297f, +0.0653092f, -0.1959178f, +0.0767337f, +0.0667572f, +0.1005448f, +0.0709954f,
  -0.0638666f, -0.3492164f, -0.0606124f, -0.2818889f, +0.1543583f, +0.0524752f, -0.1498199f, -0.3573072f,
  -0.0256292f, -0.0960805f, +0.0234926f, -0.0790172f, +0.2371629f, +0.0132515f, +0.1157977f, -0.2776699f
);

const float biases[4] = float[4](
  +0.0106731f, -0.0034604f, -0.0362582f, +0.0288467f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer34 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1818653f, +0.1882083f, -0.1060849f, +0.0139112f, -0.3446806f, -0.1611074f, -0.2729000f, +0.1251260f,
  -0.1199864f, -0.0783391f, -0.1108279f, -0.0186299f, -0.2450996f, +0.0782297f, +0.0746147f, +0.0349624f,
  -0.0795332f, -0.0142969f, -0.2136619f, -0.0469558f, -0.0829939f, +0.0394627f, -0.0046318f, +0.1489865f,
  +0.2405681f, -0.0912309f, +0.0107913f, -0.3401220f, -0.0724559f, -0.3145703f, -0.1600625f, +0.2563920f,
  +0.1796835f, -0.0112203f, -0.1076928f, -0.2285229f, +0.0189658f, -0.0819168f, +0.0338709f, -0.2149859f,
  -0.0777296f, +0.2468636f, -0.1896220f, +0.0443873f, +0.1017208f, -0.1097745f, +0.0186399f, -0.0738788f,
  +0.4457652f, -0.3610775f, +0.0651253f, +0.3106854f, +0.1382748f, -0.0670160f, +0.2254863f, +0.2625019f,
  -0.0053461f, +0.3833969f, -0.0265854f, -0.2366415f, +0.2213207f, +0.0115198f, +0.0074972f, -0.1505977f,
  +0.1966269f, -0.0988919f, -0.0200435f, +0.2066117f, -0.1400416f, -0.0755245f, -0.2330204f, -0.2290219f,
  -0.0554474f, +0.0514743f, +0.0783077f, +0.1311368f, -0.0283522f, -0.2725928f, -0.1000017f, -0.0419185f,
  -0.0215358f, -0.2838455f, +0.0992236f, +0.0334901f, +0.0749942f, -0.1568393f, +0.0813545f, -0.0548714f,
  +0.1221696f, -0.2050702f, +0.1568310f, +0.1668272f, -0.0547247f, +0.1355949f, -0.0158438f, +0.0151725f,
  +0.0334146f, -0.2439336f, -0.0915887f, +0.2197986f, +0.2837358f, +0.0151310f, -0.1554874f, -0.0887377f,
  -0.1727423f, +0.0806420f, -0.1780317f, +0.2801488f, -0.0520203f, +0.2010657f, -0.2864590f, +0.0075177f,
  +0.1531021f, -0.1663066f, -0.0678933f, -0.0573414f, -0.0548903f, +0.2352156f, +0.4179871f, +0.0611184f,
  +0.1242506f, -0.1452961f, +0.0351068f, +0.0903144f, +0.0743258f, +0.1165618f, -0.3334925f, +0.0202779f,
  -0.1809291f, -0.0668592f, +0.1741249f, +0.0985163f, -0.0667814f, -0.0000420f, +0.1127614f, +0.1356099f,
  -0.0662685f, -0.2659277f, -0.0662848f, -0.0949691f, +0.1129025f, -0.2455937f, -0.0719974f, -0.0605631f,
  +0.1565523f, +0.0039399f, -0.0492827f, +0.0088220f, -0.0509700f, +0.0157833f, -0.0340978f, -0.1092055f,
  -0.0774601f, -0.0655499f, +0.1796598f, +0.0906319f, -0.1504204f, -0.1377830f, +0.2088158f, -0.1752470f,
  +0.1726643f, +0.0435925f, +0.1010500f, +0.1704899f, +0.0417376f, -0.0181297f, +0.1082215f, +0.1792823f,
  +0.2513622f, -0.2420065f, +0.0513804f, -0.0695057f, -0.0767143f, +0.0015524f, +0.0913126f, +0.1013770f,
  -0.1623280f, -0.0327536f, -0.2094034f, +0.1696322f, +0.3303729f, -0.0064984f, -0.0199253f, +0.2484580f,
  +0.1572472f, +0.2051719f, +0.0684077f, +0.0302419f, +0.0884187f, +0.1456571f, +0.0563114f, +0.0575503f,
  +0.2200551f, -0.1368495f, +0.2126759f, +0.0848662f, +0.0578821f, +0.0152735f, -0.0683308f, +0.2107944f,
  -0.0233455f, +0.0247965f, +0.1364550f, +0.2301739f, +0.3353009f, +0.0186877f, -0.0120586f, -0.1231993f,
  -0.0455821f, +0.1237516f, +0.0121296f, -0.0146524f, -0.1681411f, -0.1197403f, +0.0904982f, +0.3672822f,
  +0.1352585f, -0.2545677f, -0.1282143f, -0.0800859f, -0.1377769f, +0.2897682f, +0.1700873f, -0.0422973f,
  -0.0025938f, +0.1119648f, +0.2062688f, +0.0890692f, +0.2224457f, -0.2318271f, +0.0900039f, -0.0251552f,
  +0.0303236f, +0.0060194f, -0.0859889f, +0.1353843f, -0.0316214f, +0.1210120f, +0.1347763f, -0.1088676f,
  -0.0014342f, +0.2247325f, -0.1635698f, +0.2261580f, -0.4332165f, +0.2529494f, +0.0099936f, +0.1345981f,
  -0.1814770f, +0.1035228f, +0.1992077f, +0.1302367f, +0.2769344f, +0.1435691f, -0.1715912f, -0.1148063f,
  -0.0766444f, -0.2865437f, -0.0281668f, +0.1582951f, -0.1581604f, -0.0984334f, +0.1780191f, -0.0908817f,
  +0.1543063f, -0.1200713f, -0.0340578f, -0.1113365f, +0.2820902f, -0.0176874f, -0.4130103f, -0.0940644f,
  +0.1573808f, -0.1348679f, +0.0903522f, -0.2180010f, -0.2039327f, +0.1467842f, +0.0739532f, -0.1285702f,
  +0.0079385f, +0.1360206f, +0.0252129f, -0.2035956f, -0.0249395f, -0.0294121f, +0.2094233f, -0.0451013f
);

const float biases[4] = float[4](
  +0.0104392f, -0.0055398f, +0.0086658f, -0.0052427f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer35 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1291535f, -0.2282075f, -0.0058713f, +0.0963629f, +0.0458264f, +0.1282343f, -0.0729912f, -0.0094419f,
  -0.1588978f, -0.1518416f, +0.1709689f, -0.0088112f, -0.4487560f, +0.0989959f, -0.1313341f, -0.1017484f,
  +0.0478766f, +0.0405150f, +0.3310173f, +0.2240729f, +0.0818383f, -0.0584969f, -0.1453820f, +0.2402703f,
  +0.0827853f, +0.1899575f, -0.1546704f, -0.0302125f, +0.1128342f, -0.1465398f, -0.0257609f, +0.3030456f,
  -0.3460937f, +0.1236808f, +0.0479152f, -0.0582582f, -0.4238793f, -0.0026824f, -0.1058107f, +0.0058756f,
  -0.1007185f, +0.0295848f, -0.1356781f, -0.2776324f, +0.0437120f, +0.0741970f, +0.0955273f, +0.0403080f,
  -0.1483817f, -0.0089529f, +0.0403088f, +0.3015428f, -0.1529518f, +0.0509021f, +0.3732127f, -0.0194029f,
  +0.0998362f, +0.1101607f, +0.0609298f, -0.1869031f, -0.0329333f, -0.2814700f, -0.1073614f, +0.0762032f,
  -0.1740503f, +0.1149755f, +0.0598566f, -0.0338793f, +0.0941663f, -0.2237646f, +0.0192144f, +0.0527796f,
  -0.0780387f, -0.0895673f, -0.0866243f, +0.0331999f, -0.2257900f, -0.1999646f, -0.0774812f, -0.0097524f,
  +0.2288383f, +0.1047122f, +0.0005910f, -0.1654114f, -0.1766487f, -0.3857585f, -0.3508163f, -0.2086090f,
  +0.2009138f, +0.2197487f, -0.2647579f, +0.1726203f, -0.1950603f, -0.0086970f, -0.2021179f, -0.2014399f,
  -0.0502129f, -0.2391388f, +0.0623634f, -0.1153695f, -0.1198271f, +0.0356847f, -0.0094460f, +0.1528822f,
  +0.0948344f, -0.3316279f, -0.0245082f, +0.1944477f, +0.1297289f, +0.0673061f, -0.1244869f, +0.1441797f,
  +0.3023974f, -0.0486075f, +0.0679415f, +0.3144945f, -0.3504055f, +0.1365587f, +0.0559249f, -0.1608884f,
  -0.0327586f, +0.3228222f, -0.1473846f, +0.2051797f, +0.0148863f, -0.1836070f, -0.2375225f, +0.0714913f,
  +0.0563347f, -0.0727190f, +0.3050530f, -0.1715181f, -0.0485376f, -0.0165129f, +0.1727894f, +0.0577896f,
  -0.1396581f, -0.1987444f, +0.0708774f, +0.3239303f, -0.0925881f, +0.1858105f, +0.2236294f, +0.1326440f,
  +0.2061737f, -0.0448782f, -0.0776240f, -0.0272404f, -0.1365805f, -0.0992183f, +0.2852148f, +0.3697588f,
  -0.2207497f, +0.0574268f, +0.0764555f, -0.2479502f, -0.1454869f, +0.2553410f, -0.1690071f, +0.1174921f,
  +0.1813934f, +0.0299430f, -0.1220065f, -0.1142722f, +0.0001257f, +0.0822959f, -0.1009678f, +0.0827469f,
  +0.1112438f, +0.0048786f, -0.1632503f, -0.0541996f, +0.3662007f, +0.1135160f, -0.0944516f, -0.2928598f,
  -0.1877706f, +0.0395304f, +0.1762785f, -0.1512325f, +0.1680107f, +0.6189499f, -0.0016685f, +0.1217840f,
  -0.1783221f, +0.0688067f, -0.1249823f, +0.1001636f, -0.1335860f, +0.0858104f, +0.1543677f, +0.1579358f,
  +0.0567851f, +0.0349502f, -0.0044309f, -0.1607650f, -0.0647410f, -0.0136603f, +0.1573316f, +0.1089393f,
  +0.0317907f, +0.2736420f, -0.0338145f, +0.1158741f, +0.0686417f, +0.1784771f, -0.0877187f, +0.0135218f,
  +0.1295408f, +0.0781108f, +0.0961803f, +0.0252529f, +0.0833027f, +0.2932640f, -0.2429554f, +0.1180499f,
  -0.1442975f, +0.2578649f, -0.0027009f, +0.0912449f, -0.0185824f, +0.0912181f, -0.0154068f, -0.2312265f,
  +0.2084813f, -0.2406630f, +0.0033078f, +0.1228827f, -0.4755738f, -0.1083625f, -0.0194752f, -0.1691643f,
  +0.2268978f, -0.1107945f, -0.0808939f, -0.1898358f, +0.1332754f, +0.1685321f, -0.0721444f, +0.2059505f,
  +0.1262061f, -0.3311265f, +0.0559055f, +0.1366442f, -0.4968346f, +0.0705447f, -0.4333539f, -0.2128933f,
  +0.0608015f, -0.0484511f, +0.0346492f, -0.4991704f, +0.3976730f, +0.0449204f, +0.0665954f, +0.0215875f,
  +0.0284667f, +0.2068606f, -0.0518455f, -0.2697735f, -0.2137740f, -0.2233025f, -0.0247918f, +0.0425339f,
  +0.0953841f, +0.1248222f, -0.2812762f, -0.1844251f, -0.0060272f, +0.0467780f, +0.0116824f, +0.0894849f,
  -0.2143370f, +0.1496127f, +0.2617383f, +0.1466676f, +0.0626717f, -0.3233306f, +0.1193750f, -0.1119701f,
  -0.0462236f, -0.3495578f, +0.1060395f, +0.1703654f, -0.2309757f, -0.3208325f, +0.1048891f, -0.1042271f
);

const float biases[4] = float[4](
  -0.0143229f, -0.0276660f, +0.0231858f, -0.0150281f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer35 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1122954f, +0.1724548f, +0.0259260f, +0.1171859f, -0.0722008f, -0.0044141f, -0.1128030f, -0.0466687f,
  +0.0161500f, +0.2313535f, -0.0858481f, +0.0494292f, -0.0842642f, +0.0789941f, -0.2811075f, +0.0352431f,
  -0.0109599f, -0.1292317f, -0.0151446f, +0.0320118f, +0.0261402f, +0.1659949f, -0.0368957f, +0.0655161f,
  +0.0343444f, -0.0572135f, +0.0806551f, -0.2682258f, +0.0268899f, +0.0127010f, +0.0567302f, +0.1780339f,
  -0.1473436f, -0.0747683f, +0.0134947f, +0.0677373f, +0.0719662f, +0.1066075f, -0.0576626f, -0.3106326f,
  +0.0509114f, -0.0504482f, +0.1238533f, -0.1387800f, +0.0287457f, -0.0481112f, +0.1529883f, +0.0310358f,
  -0.0667218f, +0.0392945f, +0.0641031f, -0.1692967f, -0.1362404f, +0.1043262f, +0.1747828f, +0.1702920f,
  +0.0259204f, +0.1434014f, -0.0295869f, -0.1447089f, +0.2855262f, -0.1027510f, -0.1300161f, +0.0466681f,
  +0.1035313f, -0.0844486f, -0.0080985f, +0.0062074f, +0.2124276f, -0.1547088f, +0.1948730f, -0.1367519f,
  +0.2331516f, -0.1472108f, -0.3580065f, +0.0693196f, +0.0916793f, -0.1630131f, +0.1637540f, +0.0383838f,
  +0.1637718f, -0.1722959f, -0.4904526f, -0.1267474f, +0.2140978f, +0.0001800f, -0.0954560f, -0.0338176f,
  -0.0996818f, -0.0401991f, +0.0772883f, +0.2666913f, -0.0969424f, -0.0249831f, -0.2131027f, -0.0345715f,
  +0.0185267f, -0.0174469f, -0.2613697f, -0.1678065f, +0.0822515f, -0.2084178f, +0.1875564f, +0.0564811f,
  +0.0502244f, +0.0011864f, -0.1847702f, -0.0220142f, -0.3813818f, -0.0752065f, +0.0467630f, -0.1514202f,
  +0.3389273f, +0.1447694f, -0.2865611f, -0.0370241f, +0.3063553f, +0.0413280f, +0.2168988f, -0.1269893f,
  -0.0370821f, -0.0608213f, -0.0457980f, -0.2556634f, +0.0121017f, -0.1510445f, +0.1671101f, +0.1511603f,
  -0.0756405f, +0.0814432f, +0.0498999f, -0.0623113f, -0.0761527f, -0.2096755f, -0.0176101f, +0.2442544f,
  +0.0828034f, +0.1557242f, +0.0942663f, +0.0930257f, +0.0820840f, -0.2149311f, +0.0476255f, -0.2050570f,
  -0.2156138f, +0.0237646f, +0.0770388f, +0.1410446f, -0.0436416f, -0.2947729f, +0.1386641f, -0.1625889f,
  +0.2216373f, -0.2176678f, -0.1491047f, -0.0986209f, +0.1101789f, -0.1100649f, -0.0183427f, -0.1023365f,
  +0.1031004f, +0.0139925f, +0.1387491f, +0.1181415f, +0.0497804f, +0.0540189f, -0.0636095f, +0.1315218f,
  -0.0010182f, +0.0095634f, +0.2064330f, -0.2521084f, -0.0389110f, -0.2982455f, -0.1416653f, -0.0204179f,
  -0.0366082f, -0.0163240f, +0.1432649f, +0.0228091f, -0.1326337f, +0.0292585f, +0.0220206f, +0.0154861f,
  -0.0083984f, +0.1021287f, +0.1630636f, -0.1153921f, +0.1057684f, +0.2781942f, -0.0937250f, +0.0026816f,
  -0.4426054f, -0.0178148f, +0.1372565f, +0.0036583f, -0.3082667f, -0.2503553f, +0.0906367f, +0.2004661f,
  -0.1061319f, +0.0754510f, +0.2269057f, -0.1560321f, -0.2963207f, -0.1178165f, +0.0906560f, +0.1475885f,
  -0.1021052f, -0.0314643f, -0.1386097f, +0.0478053f, -0.2507268f, -0.0831693f, +0.0658111f, +0.2177232f,
  -0.1498506f, +0.0392306f, +0.0838986f, +0.2050204f, -0.1101826f, -0.0383736f, +0.0815398f, +0.2423215f,
  +0.4484998f, +0.0297925f, -0.0001681f, +0.2100552f, +0.0087396f, +0.1489863f, +0.0122867f, -0.2011192f,
  -0.2359643f, +0.0425570f, -0.0977673f, +0.2225538f, +0.0006379f, -0.1670351f, -0.2658470f, -0.1134872f,
  -0.2175077f, +0.0480458f, -0.0493724f, -0.0886863f, -0.0229794f, +0.0612825f, -0.1025075f, -0.0264810f,
  -0.2806355f, +0.0267090f, +0.1814627f, -0.1912610f, -0.2103053f, +0.1426596f, +0.1493114f, +0.3155470f,
  +0.3508178f, -0.0509375f, +0.0395988f, +0.2985175f, +0.1352513f, -0.1950762f, -0.1600525f, +0.0001102f,
  +0.0532737f, +0.0194711f, -0.0672558f, +0.0232613f, -0.0784654f, -0.0204452f, -0.1377936f, -0.1335503f,
  -0.2112857f, -0.1504957f, +0.0088554f, -0.2484329f, -0.1287855f, +0.0630519f, +0.0296563f, +0.0328260f,
  +0.1323184f, +0.0608479f, +0.2964326f, -0.1468664f, -0.0631673f, +0.0342875f, +0.0612442f, -0.0702093f
);

const float biases[4] = float[4](
  +0.0324658f, -0.0937023f, +0.0692008f, +0.0182089f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer36 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0103041f, +0.0038096f, +0.0747196f, -0.0778641f, -0.1141534f, -0.0972174f, -0.1821014f, -0.2304760f,
  -0.0910183f, -0.0397202f, +0.0689457f, +0.1584051f, -0.0611962f, +0.2992792f, +0.3034961f, +0.1575754f,
  +0.1352767f, +0.0717799f, +0.1546288f, +0.2090351f, -0.2823094f, +0.0463298f, +0.1040465f, -0.0095257f,
  +0.1136608f, -0.1926661f, +0.1001556f, +0.1611265f, +0.1499035f, -0.0318446f, -0.2986440f, -0.2151409f,
  -0.1474622f, -0.3627923f, +0.2048706f, +0.2705064f, -0.0114775f, -0.0661010f, +0.1210182f, +0.1521905f,
  +0.0102722f, +0.0962656f, -0.0204911f, -0.0100186f, -0.2158291f, -0.0931191f, +0.1446217f, +0.2518398f,
  +0.0774332f, -0.1332028f, -0.1556648f, -0.0503285f, +0.0357439f, -0.1069774f, -0.0149314f, +0.2931036f,
  -0.0347450f, -0.0428193f, +0.4495606f, +0.1508750f, -0.3417749f, -0.5064136f, -0.1779434f, -0.2294359f,
  -0.0511277f, +0.0217256f, -0.0397404f, -0.0164985f, +0.2360296f, -0.1396457f, +0.0376069f, +0.3153704f,
  -0.0612994f, +0.1321945f, -0.0359555f, -0.0243119f, +0.0039246f, -0.0738399f, -0.0165196f, +0.0655211f,
  -0.0891113f, -0.3113945f, -0.1824262f, -0.3185103f, +0.0923002f, -0.2178531f, +0.0455470f, -0.0416560f,
  -0.2260888f, -0.1573754f, +0.2254661f, -0.0089756f, +0.0456852f, +0.1462867f, -0.0287134f, -0.1596176f,
  +0.0538506f, +0.3125960f, +0.0410370f, +0.0765371f, -0.1611051f, +0.1611266f, +0.0865181f, +0.1412787f,
  +0.0726952f, +0.4325862f, +0.3280462f, +0.1372933f, -0.1495515f, -0.0308741f, +0.0615989f, -0.1791669f,
  +0.1528450f, +0.0705210f, -0.0920383f, -0.0458543f, +0.3622310f, -0.1194076f, +0.2268256f, +0.0618141f,
  +0.0781229f, -0.1274827f, -0.0198690f, +0.1907821f, -0.1186976f, -0.0424974f, -0.1011937f, -0.0874710f,
  -0.0980781f, -0.0204719f, +0.1529045f, -0.2692267f, +0.3499094f, +0.1643333f, -0.1314492f, -0.1467437f,
  -0.0903305f, +0.0913633f, -0.0641859f, +0.1499791f, +0.0378913f, -0.0918417f, -0.0945593f, -0.1914885f,
  +0.2050352f, +0.2127912f, -0.0001872f, +0.2119282f, -0.0075224f, +0.0798003f, -0.1981272f, -0.1440493f,
  -0.0468119f, +0.0968426f, -0.3035735f, +0.2436975f, -0.0591839f, -0.2611184f, +0.0779356f, +0.3071490f,
  +0.0828558f, -0.0341733f, -0.0509558f, -0.5050239f, +0.1439088f, +0.1403936f, -0.0624609f, +0.0131800f,
  +0.2871632f, +0.1640250f, -0.0822719f, -0.0396519f, -0.2182710f, +0.0156783f, -0.0509257f, -0.2004754f,
  +0.0387264f, +0.3266736f, +0.0531635f, -0.3056533f, -0.0233151f, +0.2302785f, -0.2649880f, +0.0665420f,
  -0.2596273f, +0.1251050f, -0.1292749f, -0.0121132f, +0.0495543f, +0.0628573f, -0.1313878f, -0.0729685f,
  -0.1245155f, +0.1012961f, +0.0348906f, -0.0076738f, +0.0864410f, +0.1292089f, -0.0288889f, -0.0095952f,
  -0.0748957f, +0.2839833f, -0.0371300f, -0.0001353f, -0.1119526f, -0.1937553f, -0.1135081f, +0.1246066f,
  +0.0605531f, +0.1379285f, +0.2087933f, -0.1896992f, +0.0897930f, +0.2680079f, +0.0176256f, -0.0813832f,
  +0.1904093f, -0.1490761f, -0.0643576f, +0.2682690f, +0.2123133f, +0.0459398f, +0.0817185f, +0.1608361f,
  +0.1432670f, +0.2526013f, +0.0597645f, -0.4294091f, +0.1007349f, +0.3875051f, +0.0299475f, +0.0772424f,
  +0.0674583f, +0.1158887f, +0.0943988f, -0.2503542f, +0.2363720f, +0.1553642f, +0.1033054f, -0.0956192f,
  +0.0700719f, -0.1495489f, -0.3281427f, -0.1039225f, +0.0548121f, -0.0511993f, -0.1219509f, -0.1437266f,
  -0.0640732f, -0.0167534f, +0.0516073f, +0.0494037f, +0.0918285f, +0.1580922f, +0.0430309f, -0.0840771f,
  -0.0532158f, +0.0256638f, -0.2082786f, +0.2863017f, +0.0602131f, +0.0259634f, +0.2365108f, -0.0773799f,
  +0.2620167f, +0.0443311f, -0.0116196f, -0.0219257f, -0.0544414f, -0.1754549f, -0.1243806f, +0.0519382f,
  -0.0663588f, -0.0441102f, +0.0398724f, +0.1213146f, -0.1132177f, +0.0354797f, +0.1496026f, -0.2320571f,
  -0.0730266f, +0.0539898f, -0.0206194f, -0.0224768f, -0.0118961f, +0.0676809f, +0.1751883f, -0.0077603f
);

const float biases[4] = float[4](
  +0.0298248f, +0.0021640f, -0.0244423f, +0.0294898f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer36 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0344081f, -0.0099958f, -0.2080443f, +0.2022430f, +0.0376556f, -0.1034344f, +0.0747023f, -0.1030530f,
  -0.1922141f, -0.1533470f, -0.1457656f, -0.3319243f, -0.1561807f, +0.0566581f, +0.3679646f, +0.0628186f,
  -0.2921104f, +0.0059182f, +0.1899621f, +0.2761467f, -0.1544143f, -0.2403955f, +0.0450006f, -0.1735496f,
  -0.0306313f, +0.0999122f, +0.1294068f, -0.0973649f, +0.0049169f, -0.0617495f, -0.0836136f, -0.0664352f,
  +0.0750427f, -0.4677479f, -0.0003973f, +0.0184929f, +0.0758428f, -0.4419384f, +0.1220599f, +0.0815829f,
  +0.1800998f, +0.0583199f, -0.3284111f, +0.0583987f, -0.1160612f, +0.1787573f, +0.2414149f, -0.0116148f,
  +0.2907920f, +0.1507251f, -0.2536153f, -0.0134166f, -0.0371967f, +0.1037235f, +0.0794495f, -0.0519536f,
  +0.2857569f, +0.0147184f, +0.1976355f, +0.4269038f, +0.0530974f, -0.2075585f, +0.1977767f, +0.2391082f,
  +0.0708631f, +0.0243659f, +0.3162551f, +0.1287019f, -0.0357728f, +0.0571841f, +0.3026068f, +0.1444437f,
  -0.1007094f, -0.1776251f, +0.1983392f, -0.1400853f, -0.0619393f, +0.1136086f, -0.0961190f, -0.0052867f,
  +0.1344041f, -0.1286334f, -0.1630305f, +0.4851172f, -0.0474562f, -0.1878909f, +0.1394843f, -0.2070408f,
  -0.0446047f, +0.0408264f, +0.0497243f, -0.1623645f, +0.1041940f, +0.0758466f, +0.0421568f, -0.2034190f,
  -0.0141082f, -0.3490761f, +0.1921458f, +0.2054120f, -0.1659002f, -0.1486923f, -0.1303613f, +0.2971085f,
  -0.0731652f, -0.2616923f, -0.1047928f, -0.3515526f, -0.1163535f, +0.0377742f, -0.3047461f, -0.0887955f,
  -0.1105896f, -0.0164511f, -0.0559060f, -0.0102362f, -0.0416958f, +0.0176325f, +0.1281784f, +0.0409450f,
  -0.2373895f, -0.0839818f, -0.1121374f, -0.3682540f, -0.0082167f, -0.0592712f, -0.1232332f, -0.1438787f,
  +0.0409892f, +0.0539133f, +0.1331114f, +0.1900434f, +0.1054821f, -0.0024272f, -0.0797170f, +0.0766634f,
  -0.1812770f, -0.1782099f, +0.1443583f, -0.1289084f, +0.1941655f, -0.3456542f, -0.2110812f, -0.0526701f,
  +0.1177738f, -0.0249645f, -0.0600741f, -0.2498900f, +0.1870421f, -0.2903163f, -0.2114160f, -0.0357167f,
  -0.1560647f, +0.0171970f, -0.0512135f, -0.4480627f, +0.0334548f, -0.2508506f, +0.0197707f, +0.0465254f,
  +0.0222112f, +0.0998667f, -0.0095040f, +0.0926898f, -0.0438976f, -0.2905347f, -0.0773406f, -0.1602190f,
  +0.0743432f, -0.3683290f, -0.2131870f, -0.2949024f, -0.1094148f, -0.0855761f, +0.2949438f, -0.0568212f,
  +0.0934190f, +0.1395293f, -0.2175499f, +0.1876593f, -0.0506986f, +0.0592865f, -0.0531544f, -0.1130440f,
  +0.0989879f, -0.0512715f, -0.0198878f, +0.1109264f, -0.2274681f, +0.1621767f, +0.0258295f, +0.1014468f,
  -0.0336537f, +0.0387067f, +0.4121474f, +0.2940685f, +0.0068071f, -0.1257702f, +0.0291773f, +0.1596181f,
  +0.1415795f, +0.3182151f, -0.0692244f, -0.0470221f, -0.1229255f, -0.1109333f, -0.1194287f, -0.0288197f,
  +0.1346480f, +0.0226362f, -0.0566939f, +0.1145283f, +0.0810840f, +0.0193028f, +0.2790278f, +0.2713895f,
  +0.1276325f, -0.2733930f, +0.2277278f, +0.0347013f, +0.2337064f, +0.1210456f, +0.3402752f, +0.0592440f,
  +0.0454589f, +0.0386594f, -0.0991750f, +0.0847799f, -0.1005239f, +0.2624257f, -0.0361628f, -0.1661216f,
  +0.2244630f, +0.1430231f, -0.1612572f, -0.2852629f, +0.0881835f, -0.0966137f, +0.0949040f, -0.0539199f,
  +0.0190985f, -0.1351433f, -0.0582743f, +0.2106674f, -0.2525454f, -0.0563931f, -0.1885104f, -0.1139013f,
  +0.1051836f, +0.4227865f, +0.0698623f, -0.1726013f, +0.4223766f, -0.0065891f, -0.1590002f, +0.0393513f,
  -0.1021006f, +0.1561852f, +0.4819440f, +0.1069467f, -0.2351817f, +0.0824117f, +0.1817779f, +0.1557574f,
  -0.1668807f, -0.0254485f, -0.1248488f, +0.1374863f, -0.0346042f, +0.1211001f, +0.0550590f, +0.0255618f,
  -0.0046231f, +0.1696990f, -0.0573223f, +0.0917670f, -0.0128158f, +0.1343134f, -0.0236954f, -0.1431802f,
  +0.1015116f, +0.1571361f, -0.0094409f, +0.1622460f, -0.2069062f, +0.0739945f, -0.1698091f, +0.1023401f
);

const float biases[4] = float[4](
  +0.0052245f, +0.0046668f, -0.0032016f, -0.0044531f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer37 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0492110f, +0.2452466f, +0.3720993f, +0.0519121f, -0.0939582f, -0.0116928f, +0.0962605f, -0.1320244f,
  +0.0019561f, -0.2678387f, +0.2921160f, -0.1238195f, +0.2510014f, +0.0189886f, +0.0211697f, -0.1315403f,
  +0.1531743f, -0.1218443f, +0.1247785f, -0.1120392f, -0.0026973f, +0.0788340f, +0.1253646f, -0.1230057f,
  -0.0602209f, +0.0606321f, +0.1287671f, -0.0801471f, +0.0645853f, +0.0391366f, -0.3746496f, +0.2466835f,
  +0.3178170f, -0.0959598f, -0.0184784f, -0.0718739f, -0.2893400f, +0.0649860f, +0.1936241f, +0.2314576f,
  +0.0827290f, +0.0371819f, -0.0103478f, -0.0573902f, +0.0167466f, +0.2141553f, +0.0527726f, -0.0505562f,
  -0.0765508f, -0.1713885f, +0.0663139f, +0.0019894f, -0.1942679f, -0.1856406f, -0.0383247f, -0.1217409f,
  -0.0835172f, +0.0364695f, +0.2866592f, +0.0845074f, -0.1002020f, -0.0693469f, -0.1644779f, +0.2569222f,
  +0.2358724f, -0.0948729f, -0.0037153f, -0.0853864f, +0.1327849f, +0.1972882f, +0.0789285f, -0.0600554f,
  -0.0730345f, -0.0583549f, -0.0169593f, -0.0258359f, +0.1748155f, +0.0258486f, +0.0884915f, +0.0456408f,
  +0.1542696f, -0.0473345f, +0.2289149f, -0.2184175f, -0.1255540f, -0.0641223f, +0.1263468f, +0.2191899f,
  +0.1649379f, -0.1462857f, +0.0898086f, -0.5805866f, -0.0024345f, +0.1634472f, -0.0152970f, +0.0442341f,
  +0.1709865f, +0.1885517f, +0.2319097f, -0.0286267f, +0.1919228f, -0.1841666f, +0.0467428f, -0.2224973f,
  -0.0207830f, -0.0183365f, +0.2774113f, -0.0475456f, -0.0181510f, +0.2855098f, +0.0199361f, +0.0443580f,
  -0.0167260f, -0.1911472f, -0.1596300f, -0.2351544f, -0.0104054f, +0.1924764f, +0.0972194f, +0.0249923f,
  +0.0252298f, +0.2190714f, +0.0182754f, +0.1282411f, -0.0298297f, +0.0904668f, -0.0983558f, -0.1045674f,
  -0.1281500f, -0.0852258f, -0.1186603f, -0.2277783f, +0.1558281f, +0.3121323f, -0.0720733f, -0.0565416f,
  +0.0684991f, -0.0744560f, +0.3373472f, -0.0861953f, -0.0588821f, +0.0235476f, -0.0008117f, -0.4960861f,
  -0.1975865f, +0.0107144f, -0.0241458f, +0.2179200f, +0.1081755f, +0.1292483f, -0.0548134f, +0.0079476f,
  +0.0780251f, -0.4227709f, +0.1118754f, -0.1126318f, -0.1204449f, -0.1418270f, +0.0799041f, -0.0968126f,
  -0.0195662f, +0.0499125f, +0.0836762f, +0.3030373f, +0.1616712f, +0.4536000f, -0.0024241f, -0.2950020f,
  +0.0343678f, +0.0586848f, -0.1462068f, -0.2146796f, -0.2663422f, -0.1494962f, +0.0236959f, +0.0365043f,
  -0.0587115f, +0.0770442f, -0.3121070f, +0.4525593f, -0.0143340f, -0.1371083f, +0.2003183f, -0.1529106f,
  -0.0688004f, +0.2109010f, -0.1049891f, +0.0140212f, +0.0114751f, -0.1386668f, +0.2625582f, +0.0119120f,
  -0.2650292f, -0.0580448f, +0.1953333f, -0.0418322f, +0.0340600f, -0.1847279f, -0.0153742f, -0.2927056f,
  -0.1635987f, +0.0076552f, -0.3912263f, +0.1532445f, +0.0353793f, +0.0025315f, -0.1041096f, +0.0869562f,
  +0.0327507f, -0.2452521f, +0.1031158f, -0.0275078f, -0.4092444f, +0.4623813f, -0.1273044f, -0.1734152f,
  +0.0725949f, -0.1431394f, +0.0407553f, +0.1404047f, +0.1000311f, -0.0949509f, -0.1888278f, +0.1598509f,
  +0.0071552f, -0.0787294f, -0.1375541f, -0.0196939f, +0.0267096f, +0.2733703f, +0.0204788f, -0.0413621f,
  +0.0900015f, -0.0394610f, +0.1672257f, -0.1881841f, +0.1974166f, +0.1279497f, +0.0587046f, +0.0926838f,
  -0.0887992f, -0.0744931f, +0.2989080f, -0.2090601f, +0.0050398f, +0.0078619f, +0.0551796f, +0.0266479f,
  -0.2177079f, +0.0879807f, -0.1116671f, -0.0596277f, -0.0509988f, +0.1651891f, +0.0847339f, +0.0080700f,
  -0.2199512f, -0.1947226f, +0.1714954f, +0.2363730f, +0.1051218f, -0.0891058f, +0.3017671f, -0.0656954f,
  +0.2232249f, +0.0278630f, -0.0655070f, +0.0568219f, +0.1200792f, +0.0806419f, -0.3017992f, +0.0008832f,
  -0.3310280f, +0.2153474f, -0.0646817f, +0.2829927f, +0.0419033f, +0.2649258f, -0.0202773f, +0.0602042f,
  -0.2386410f, +0.0603511f, +0.1609003f, +0.1253448f, +0.1492332f, -0.0215744f, +0.1669622f, -0.2149681f
);

const float biases[4] = float[4](
  +0.0150816f, +0.0311996f, -0.0475892f, +0.0185297f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer37 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0522159f, -0.1477725f, +0.0453690f, -0.1384186f, +0.0827053f, +0.0524838f, -0.0238678f, +0.3429262f,
  +0.0576951f, +0.0627451f, -0.1793795f, -0.2181105f, +0.2656858f, +0.1168836f, -0.0139795f, +0.2781984f,
  -0.0510794f, -0.0450386f, -0.2581296f, -0.2966194f, -0.0957256f, +0.1544042f, +0.0625750f, -0.2459870f,
  +0.0962861f, +0.2782820f, -0.0892491f, +0.0685760f, +0.0577671f, +0.0392847f, +0.1055961f, +0.1885906f,
  +0.1266956f, -0.0066756f, +0.0709014f, +0.0875270f, +0.0257615f, +0.3217536f, +0.0216836f, -0.0387145f,
  -0.0368989f, +0.1279245f, +0.3534316f, -0.0200259f, +0.1530840f, +0.1620316f, -0.2329545f, -0.0524898f,
  +0.0531896f, +0.1100772f, -0.0308540f, +0.2182842f, +0.2027065f, -0.0786427f, -0.0967108f, +0.0062463f,
  +0.0205558f, -0.1515800f, -0.0015197f, +0.2027370f, +0.3255946f, +0.0181063f, +0.1671367f, +0.0139253f,
  +0.1177700f, -0.0345702f, -0.1775613f, +0.1566118f, +0.0609470f, +0.0136663f, +0.1846700f, +0.0071309f,
  +0.2476388f, -0.0762771f, +0.2507423f, +0.0931163f, -0.1262962f, +0.0867004f, +0.1076530f, +0.0429395f,
  -0.1460574f, -0.0164453f, +0.2579027f, -0.1700551f, +0.1084285f, -0.0882237f, +0.2545320f, +0.1725989f,
  -0.0986905f, -0.0686005f, +0.1620184f, -0.1050808f, -0.0980188f, +0.1612200f, -0.1943294f, +0.1637246f,
  +0.2287433f, -0.1921906f, -0.3984398f, -0.0792518f, +0.0868353f, +0.0684156f, -0.0368481f, -0.2222987f,
  -0.1895141f, -0.1271304f, -0.1581855f, +0.0286256f, -0.2267011f, +0.1179705f, +0.1058161f, +0.1535383f,
  +0.1643136f, -0.1278291f, +0.2300361f, -0.1092167f, -0.2566493f, +0.1123602f, -0.0105289f, +0.0915888f,
  -0.2349737f, +0.1583063f, +0.0415807f, -0.1797872f, -0.1904903f, +0.0266245f, -0.0959797f, +0.0386063f,
  -0.1281979f, +0.2764780f, +0.2923028f, -0.0050090f, +0.1145222f, -0.1842707f, -0.1691915f, +0.1244592f,
  +0.4133021f, -0.0282958f, -0.0325952f, -0.1015551f, -0.1635842f, -0.0457202f, +0.0250808f, +0.0357252f,
  -0.0995613f, +0.1431685f, +0.0569211f, -0.0559308f, -0.1522364f, +0.1844854f, +0.1488746f, +0.1082375f,
  -0.1096306f, -0.1666841f, +0.1776789f, -0.0568895f, -0.1772777f, +0.2004528f, -0.0820756f, +0.0396127f,
  +0.0090894f, +0.0017668f, +0.0627822f, +0.0123024f, -0.0121793f, +0.1314394f, +0.1784426f, +0.0724539f,
  -0.1449315f, -0.0032295f, +0.1086020f, -0.1446237f, -0.0714882f, -0.0683276f, -0.0862836f, -0.0116270f,
  -0.0239012f, -0.2372309f, -0.4829783f, +0.1265127f, -0.2327787f, +0.0263872f, +0.4088471f, -0.0982938f,
  -0.0565145f, -0.1739798f, -0.1687887f, +0.2145460f, -0.3249362f, -0.0111157f, +0.0371656f, +0.1235089f,
  -0.0719121f, -0.0828411f, -0.2864504f, +0.0400654f, +0.2543477f, +0.0096260f, +0.0461780f, -0.1281719f,
  +0.0581927f, -0.0564268f, -0.2830756f, +0.0145600f, -0.0454050f, -0.0936716f, +0.1055492f, +0.2339727f,
  +0.1078857f, -0.2748413f, +0.0343159f, -0.0524303f, +0.0941327f, -0.6328136f, +0.1062672f, -0.1595653f,
  +0.1545259f, +0.0556021f, -0.0444763f, -0.0156046f, -0.0106028f, -0.0064948f, -0.2423050f, -0.1029413f,
  +0.1878984f, +0.2493812f, -0.0616533f, +0.1745651f, -0.0252359f, +0.2044872f, +0.1298561f, +0.1810954f,
  -0.1217823f, -0.0455240f, +0.2087379f, -0.0426525f, +0.1629629f, -0.0764183f, -0.0877076f, +0.1000208f,
  +0.0886174f, +0.0498913f, +0.0134592f, -0.0689840f, +0.5454783f, -0.0427531f, +0.2305463f, -0.0084594f,
  -0.1989999f, -0.3392822f, +0.1060152f, -0.0717898f, -0.0186411f, +0.1582066f, -0.1317547f, +0.0603442f,
  +0.0516900f, +0.3709394f, +0.0716239f, -0.1205664f, +0.1759868f, +0.0153249f, -0.0830434f, +0.1127425f,
  +0.1448086f, +0.0522819f, -0.0467440f, +0.0833397f, +0.1564472f, -0.0536490f, +0.0544846f, +0.0127727f,
  +0.1057067f, +0.0252126f, +0.0467940f, +0.1795289f, -0.1003532f, +0.1916956f, +0.0187979f, -0.0273124f,
  +0.0335539f, -0.0366167f, -0.0325256f, +0.1455194f, -0.1022729f, +0.0004353f, +0.0642223f, +0.0441628f
);

const float biases[4] = float[4](
  -0.0305308f, +0.0221768f, +0.0204090f, +0.0180503f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer38 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1529500f, +0.1566156f, -0.2300750f, +0.0458985f, +0.2011470f, -0.1847418f, -0.1508796f, +0.1350906f,
  +0.0262850f, +0.2529803f, +0.0432987f, +0.0102167f, -0.0405890f, -0.0591608f, +0.2008203f, +0.2431902f,
  -0.0031107f, -0.1605623f, +0.2946525f, -0.2632950f, -0.1253042f, +0.0441610f, -0.0599490f, -0.1987613f,
  +0.0907230f, -0.0586420f, +0.2978971f, +0.0991442f, +0.0146181f, +0.0795471f, +0.0119251f, +0.0164995f,
  +0.2611221f, -0.0373208f, -0.0069289f, +0.2342553f, +0.0016384f, +0.0739350f, +0.1959478f, +0.0056300f,
  +0.0754460f, -0.1041313f, -0.2210532f, -0.0881692f, +0.0544513f, -0.1460401f, -0.0663335f, -0.1608872f,
  +0.1157480f, +0.1446584f, -0.0991471f, -0.3319578f, -0.1133090f, +0.2009946f, +0.0433548f, +0.1475629f,
  +0.0071312f, -0.0548790f, +0.1484411f, +0.1147121f, -0.1820445f, +0.2125421f, -0.1042138f, +0.1233644f,
  +0.2093059f, +0.0310612f, +0.0500059f, -0.0893189f, +0.0450462f, -0.0706054f, +0.0025781f, +0.2053244f,
  +0.0174040f, +0.0245749f, +0.2133949f, -0.0865099f, -0.0616378f, +0.1258249f, +0.3392951f, -0.0528425f,
  -0.1062830f, -0.1271563f, +0.0908833f, -0.0259667f, +0.1237039f, +0.1292251f, +0.0965079f, -0.2101137f,
  +0.1880632f, +0.0116770f, +0.0620622f, -0.0822241f, -0.0788118f, +0.0621247f, +0.0043689f, -0.0371231f,
  -0.0020100f, +0.3847449f, +0.0918586f, -0.0768583f, -0.0778359f, -0.1622982f, +0.2203189f, +0.0410504f,
  +0.3801373f, +0.0769906f, +0.0386012f, +0.2881400f, +0.0042440f, -0.2480488f, +0.3339964f, +0.3213894f,
  -0.0992464f, +0.1377401f, -0.0123792f, -0.0756587f, +0.1706077f, +0.0646476f, +0.4521399f, +0.0176573f,
  -0.1786215f, +0.1207063f, -0.0175897f, +0.1395504f, +0.0513144f, -0.0732072f, +0.2405767f, -0.0849231f,
  -0.0078645f, +0.1189504f, +0.0255587f, -0.1336989f, -0.1998091f, -0.0025705f, +0.2392932f, -0.0510267f,
  +0.1092932f, +0.0925091f, +0.0309330f, +0.0099716f, +0.0320395f, +0.0687890f, +0.0012082f, -0.0760513f,
  +0.2619949f, -0.0060447f, +0.1075352f, +0.0515815f, +0.2179785f, +0.0982656f, +0.1935489f, -0.3416136f,
  -0.1246816f, -0.0076494f, +0.3047752f, -0.1211271f, +0.1478126f, +0.0744072f, +0.1740291f, -0.2594863f,
  -0.0067536f, +0.1240165f, -0.2833718f, +0.0845316f, +0.0868866f, +0.1013788f, -0.0968510f, +0.0267400f,
  +0.1450549f, -0.0292343f, -0.3730481f, -0.0160413f, +0.1336747f, -0.1055310f, +0.1765039f, +0.0732736f,
  +0.0283109f, +0.1500963f, +0.3719744f, -0.1279585f, -0.0137347f, +0.0758439f, +0.1641881f, -0.2663035f,
  +0.0158960f, -0.1853836f, +0.0434941f, +0.2221898f, -0.1188720f, +0.0870656f, +0.0564700f, -0.1344767f,
  +0.1772814f, +0.0271704f, +0.1929128f, +0.0600192f, +0.0164088f, -0.2573327f, +0.1170894f, +0.0858078f,
  +0.2696640f, +0.0187261f, +0.0066016f, +0.0211168f, +0.0407481f, +0.1466757f, +0.2785779f, -0.1303777f,
  -0.1752968f, -0.1060940f, -0.2283730f, +0.2655653f, -0.1075353f, +0.1079667f, +0.4215949f, -0.0830163f,
  -0.0203937f, -0.0645266f, +0.1443555f, -0.0454819f, -0.1900625f, +0.0451173f, +0.0962318f, -0.2146460f,
  +0.0029706f, +0.0964136f, -0.1221810f, -0.1944039f, -0.1026213f, +0.2558890f, +0.2283774f, -0.0061342f,
  +0.1639512f, -0.0732382f, +0.0241032f, +0.0615815f, -0.1309112f, +0.0482656f, +0.0533010f, -0.2697001f,
  -0.1454762f, +0.1193019f, -0.0084174f, -0.0730650f, +0.0476971f, +0.2330008f, +0.1964954f, -0.0906515f,
  +0.0257577f, -0.0014773f, -0.1108758f, -0.0910951f, +0.0266771f, -0.3034093f, +0.5306765f, +0.3030189f,
  -0.1403061f, -0.0412078f, +0.0943549f, +0.2052056f, -0.4295625f, +0.0197591f, +0.3994036f, +0.1210134f,
  +0.0544809f, +0.3306200f, -0.2121508f, +0.0099621f, +0.0810910f, +0.2857127f, +0.0968911f, -0.0728235f,
  -0.0945273f, -0.0466581f, -0.1409722f, -0.2585147f, +0.0774328f, +0.0704579f, +0.0210638f, -0.1088313f,
  +0.0958034f, +0.1986345f, -0.2005988f, -0.1258101f, -0.1608064f, +0.1617271f, +0.2722210f, +0.0413199f
);

const float biases[4] = float[4](
  +0.0013002f, -0.0091752f, -0.0262822f, +0.0194938f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer38 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0353206f, -0.0772394f, +0.0886324f, -0.0932946f, -0.0490475f, +0.0234169f, +0.1809154f, -0.1514350f,
  +0.2836169f, -0.1568307f, +0.0195501f, +0.1323965f, -0.1149357f, +0.0012700f, +0.3471520f, +0.1024089f,
  +0.1214816f, -0.0719534f, -0.0514931f, -0.2694262f, -0.5081081f, -0.2605100f, -0.0684892f, -0.1439524f,
  +0.2530794f, +0.1903440f, -0.0312647f, -0.3106224f, -0.2296786f, -0.1518964f, +0.3168491f, -0.1878527f,
  +0.3681921f, +0.2111572f, -0.0468815f, -0.0728573f, -0.1633348f, +0.0583733f, -0.0668256f, +0.1983048f,
  +0.2933014f, +0.0702258f, +0.1718738f, +0.0370223f, -0.1484766f, +0.1706126f, +0.5875099f, -0.0886069f,
  +0.1457020f, +0.0975732f, +0.1126691f, -0.0124011f, -0.1511910f, +0.0555532f, +0.2532542f, +0.0021477f,
  +0.0707102f, +0.3094575f, +0.1111734f, -0.0162713f, +0.1734590f, +0.0622373f, +0.1615829f, -0.3788418f,
  -0.1538631f, -0.2410837f, +0.1578929f, +0.1312952f, +0.0658858f, -0.1570029f, -0.2624227f, +0.0345881f,
  -0.2877783f, +0.1389641f, -0.1637394f, -0.0373400f, +0.0808436f, +0.0031933f, -0.1229242f, +0.2228760f,
  -0.1152507f, -0.0723080f, -0.1217357f, -0.0051892f, +0.0458590f, +0.0379208f, -0.0442486f, -0.0994708f,
  +0.2641592f, +0.1300052f, +0.0129512f, +0.0356652f, +0.1128846f, +0.1364061f, +0.1500100f, -0.2020535f,
  -0.2386688f, -0.1278857f, +0.2756494f, -0.0054902f, +0.0356994f, +0.0928576f, -0.0128764f, +0.0916328f,
  -0.3230087f, -0.0125443f, -0.1357587f, +0.1602455f, -0.1486328f, +0.2965921f, +0.2590812f, -0.1149107f,
  -0.1814571f, +0.1487471f, +0.3015220f, -0.0517947f, +0.0001088f, -0.2987475f, -0.3952216f, -0.0368885f,
  +0.0518711f, +0.0269019f, -0.0330083f, -0.1530007f, -0.0755258f, +0.0381067f, -0.2093003f, -0.0250081f,
  -0.0116300f, +0.1178746f, +0.0147245f, +0.0769909f, +0.0666706f, -0.0855399f, -0.3234420f, +0.0479889f,
  -0.0828745f, -0.0299562f, -0.1230299f, -0.0908106f, +0.0243598f, -0.2148035f, +0.0523698f, -0.0582415f,
  -0.2928685f, -0.0898475f, -0.0652087f, -0.0374458f, -0.1472013f, -0.0451151f, +0.0530745f, -0.0351910f,
  +0.1315561f, -0.1123700f, +0.1260297f, +0.0695504f, -0.1135872f, +0.2116393f, -0.1457085f, -0.0068382f,
  +0.1074113f, -0.0681505f, +0.0405231f, +0.1002412f, -0.2591792f, -0.0846300f, -0.2136336f, +0.0227131f,
  +0.0154624f, +0.0266600f, -0.2449434f, -0.1448282f, -0.0660288f, -0.2486814f, +0.1606326f, +0.2045771f,
  +0.1336616f, -0.0181879f, +0.0585878f, +0.0518089f, -0.0112728f, -0.0309664f, +0.1760107f, -0.2623671f,
  -0.1125942f, +0.0419770f, +0.0579665f, -0.0537976f, +0.0045055f, -0.1056997f, -0.0623934f, -0.2209554f,
  +0.0791278f, +0.1013797f, -0.1496488f, -0.0855662f, -0.1132784f, +0.1531546f, -0.0583269f, -0.1873186f,
  -0.0709922f, -0.2926536f, +0.2095651f, +0.0516574f, -0.1245573f, -0.2162189f, +0.0240987f, -0.0358970f,
  -0.2752976f, +0.1366664f, -0.2196901f, +0.1922202f, +0.1029141f, -0.0645175f, -0.1675871f, +0.2016708f,
  -0.1867187f, +0.1077817f, -0.2175407f, -0.0560766f, -0.0779148f, -0.1310396f, +0.2458428f, -0.0632359f,
  -0.0636826f, -0.2074949f, -0.1494226f, -0.1502959f, -0.1263389f, +0.0554353f, +0.2552828f, -0.3053282f,
  -0.0277861f, +0.0110497f, +0.0576112f, -0.3154692f, -0.1565389f, +0.0871265f, -0.1492922f, +0.1339910f,
  +0.1015944f, +0.2290003f, -0.2198193f, -0.2235037f, -0.1201057f, +0.0857563f, +0.1980893f, +0.0287881f,
  +0.1337989f, -0.3733039f, -0.2050945f, +0.3451985f, +0.1546676f, -0.0808074f, +0.4249868f, +0.1134674f,
  +0.1287231f, +0.1949018f, -0.2055447f, -0.0663226f, +0.0151574f, -0.1786249f, +0.0721374f, -0.0181686f,
  +0.0419280f, +0.2026970f, +0.1329452f, -0.0557336f, -0.2150046f, +0.0618809f, +0.3129326f, +0.0848627f,
  +0.0035445f, -0.0185242f, +0.0870343f, +0.2014602f, +0.0906374f, -0.0161473f, +0.1690942f, -0.0750278f,
  -0.1189624f, +0.1699854f, -0.1965265f, -0.1254280f, -0.1574852f, -0.1958794f, +0.3889481f, +0.0649720f
);

const float biases[4] = float[4](
  +0.0120030f, +0.0155161f, -0.0153620f, +0.0181182f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer39 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0095926f, -0.1739037f, -0.1912162f, +0.0235241f, -0.1016807f, +0.0922657f, -0.0891622f, -0.1483346f,
  +0.1578184f, +0.3231986f, +0.1146659f, +0.0473042f, +0.1708503f, +0.0774328f, -0.0279163f, -0.0387295f,
  -0.0670550f, -0.1439587f, -0.0322651f, -0.2867744f, +0.2090444f, +0.2272576f, +0.1119179f, +0.2943784f,
  -0.0569839f, +0.1069706f, +0.1266367f, +0.2176092f, +0.0426313f, +0.1982290f, -0.2524138f, +0.2728885f,
  +0.2877108f, -0.0480318f, +0.1585204f, +0.2186847f, -0.0333873f, -0.0764019f, -0.2113990f, +0.0226250f,
  +0.1852148f, +0.3104067f, +0.0273211f, +0.1090487f, +0.0101071f, -0.1067512f, -0.2477876f, +0.2188865f,
  +0.1031242f, +0.2017239f, +0.0541262f, -0.0363437f, +0.0691457f, +0.1114941f, -0.0153921f, -0.0518766f,
  +0.3182521f, +0.0179215f, -0.0818845f, +0.0350982f, +0.3461662f, -0.1633032f, -0.1400057f, -0.2493806f,
  +0.1937421f, +0.0366159f, -0.1988280f, +0.0448526f, +0.1739399f, +0.1173982f, -0.0965503f, +0.1025372f,
  -0.0343964f, -0.0154219f, +0.0367863f, +0.0395432f, -0.0711893f, +0.1024429f, -0.0628609f, +0.0933458f,
  -0.0674303f, +0.0752824f, +0.2890909f, +0.2281918f, +0.0162051f, +0.1773650f, +0.4805835f, -0.0700966f,
  -0.0058112f, -0.0937528f, -0.1089774f, +0.1010858f, -0.1539263f, -0.0795858f, -0.1654461f, +0.0711354f,
  -0.2019231f, -0.0168148f, +0.0361763f, +0.4346073f, -0.1407719f, +0.3117574f, +0.1500455f, -0.2621427f,
  -0.5577664f, +0.0269862f, +0.0203628f, -0.1418929f, +0.1285978f, +0.3205891f, +0.1178821f, -0.0793231f,
  +0.1413213f, +0.0938673f, +0.2442594f, +0.1373385f, +0.1308002f, -0.2028789f, -0.2201769f, -0.2971919f,
  -0.1787680f, +0.1699765f, +0.1583691f, +0.0131672f, -0.0121869f, +0.0384948f, -0.3485723f, +0.1238125f,
  -0.2304553f, +0.0365453f, +0.0663214f, -0.0212215f, -0.0226420f, +0.2853615f, +0.0259535f, +0.2258531f,
  -0.0208787f, -0.0150756f, +0.1516455f, +0.0193706f, +0.0012267f, -0.6424932f, -0.1271768f, -0.1739507f,
  -0.2003674f, -0.1520311f, -0.0494763f, +0.1544407f, -0.2814201f, +0.1637816f, +0.0190168f, +0.0284753f,
  +0.1471664f, -0.2074683f, +0.2285139f, -0.0689168f, -0.0860527f, -0.1398140f, +0.1174463f, -0.0124117f,
  -0.3307355f, -0.0046764f, +0.2319093f, -0.2838061f, -0.3034198f, +0.1569090f, +0.0051105f, -0.1335917f,
  -0.2396637f, -0.0054209f, -0.1242038f, -0.1029540f, -0.3348268f, +0.1572705f, -0.0685628f, +0.1188715f,
  +0.2068333f, -0.0071333f, -0.0952056f, -0.0160398f, +0.3095833f, +0.0817278f, +0.1899954f, -0.3544883f,
  -0.0482778f, -0.0212175f, -0.1431953f, +0.0653361f, +0.1579668f, -0.0195899f, -0.1492000f, +0.2301444f,
  -0.0786768f, +0.0730504f, -0.1285781f, +0.0493978f, -0.2494721f, +0.0682773f, +0.1423241f, +0.1856281f,
  -0.3328246f, -0.1252656f, +0.0052134f, +0.0681018f, -0.1594537f, +0.1687752f, +0.0885300f, -0.2148651f,
  -0.1024114f, +0.2269400f, -0.2737696f, +0.2400321f, -0.1463124f, -0.0114602f, +0.1062803f, +0.0134343f,
  -0.0031597f, +0.1205894f, -0.0950677f, +0.0257567f, -0.0243872f, +0.0219238f, +0.0853360f, -0.0274922f,
  -0.1440389f, +0.2132025f, +0.2652507f, -0.1885692f, +0.0908925f, -0.0645290f, +0.0761613f, -0.1441219f,
  -0.2224637f, -0.1027654f, -0.0715639f, -0.3172793f, -0.1261238f, +0.0213583f, +0.0787752f, +0.0531564f,
  -0.0895199f, +0.0957536f, +0.1023748f, -0.1312836f, +0.0532530f, -0.1230572f, -0.1356409f, +0.0592945f,
  +0.0102521f, +0.0347964f, -0.0626535f, -0.0717235f, +0.0016869f, +0.3280295f, -0.2285200f, -0.0320892f,
  +0.1146923f, -0.1323796f, +0.1645343f, +0.2216322f, -0.0065962f, +0.1331014f, -0.0243054f, +0.1660850f,
  +0.0900699f, -0.1875094f, +0.0843519f, -0.2572586f, +0.1360172f, -0.2719108f, -0.0132550f, +0.1061823f,
  +0.0904554f, -0.0116993f, -0.0144220f, +0.2055318f, -0.0294478f, +0.3114818f, +0.0699527f, +0.0479677f,
  +0.0754690f, +0.0229481f, +0.0853140f, +0.0174259f, -0.1254898f, +0.3228106f, -0.1928541f, +0.0130013f
);

const float biases[4] = float[4](
  -0.0342925f, -0.0755366f, -0.1675876f, +0.0484860f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer39 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0458540f, +0.0775587f, -0.1539252f, -0.0981974f, -0.0471779f, -0.1111505f, +0.3166938f, -0.1555906f,
  -0.1933216f, -0.0622472f, +0.0693446f, +0.3791422f, +0.1559132f, -0.0999843f, +0.1579926f, -0.2783078f,
  -0.1325609f, +0.0645574f, -0.2035435f, -0.0335704f, -0.1494456f, -0.1844358f, -0.1261155f, +0.1011636f,
  +0.2498882f, -0.3521535f, -0.1825466f, -0.4126633f, -0.2634883f, -0.0317157f, -0.1471701f, -0.0762498f,
  +0.1767020f, +0.2942350f, +0.0897954f, +0.1169546f, -0.2289092f, -0.2892501f, +0.3936369f, +0.1079988f,
  -0.5578215f, -0.1053024f, -0.4246039f, -0.3435641f, +0.0323239f, +0.1311859f, -0.1556506f, +0.1126720f,
  +0.3469736f, -0.2332397f, -0.1662098f, -0.0981006f, -0.1113533f, -0.1563274f, -0.0135311f, -0.0225664f,
  -0.2315738f, -0.1298662f, +0.0647961f, +0.0193185f, -0.1543367f, -0.0823996f, +0.1056448f, +0.1665369f,
  -0.1169059f, +0.0256758f, -0.0479618f, +0.0200145f, +0.1868140f, +0.0177461f, -0.1054122f, -0.2010492f,
  -0.0517137f, -0.1515698f, +0.0116824f, +0.1873321f, -0.0110690f, -0.0547956f, -0.1855077f, -0.1272263f,
  -0.1388537f, +0.0228527f, -0.3283419f, -0.0274686f, -0.0072641f, +0.3016292f, -0.3064762f, +0.1178397f,
  +0.1067957f, +0.2123858f, -0.0721542f, -0.0677642f, -0.0701739f, +0.2399482f, -0.0302165f, +0.0843392f,
  -0.1327691f, +0.1142230f, -0.2602846f, -0.0253627f, -0.2036376f, +0.0539838f, -0.0551706f, -0.1695953f,
  +0.1048799f, -0.0308786f, -0.1002142f, +0.2901744f, -0.4498168f, -0.1710335f, -0.0976508f, -0.3581472f,
  +0.0738814f, +0.1448673f, +0.0835152f, -0.0810216f, +0.0298658f, +0.3185700f, +0.1677149f, -0.3191991f,
  -0.0436121f, +0.1308451f, -0.0251697f, -0.0475224f, -0.1680657f, -0.0662113f, -0.1172173f, +0.0130276f,
  +0.1295135f, +0.0306368f, +0.0818604f, +0.3776864f, -0.0948318f, -0.0949235f, -0.3204543f, -0.0704435f,
  +0.0842571f, -0.2871652f, +0.0931027f, +0.0225938f, -0.2096317f, -0.1238735f, +0.0750576f, +0.0300334f,
  -0.1967491f, +0.2242899f, +0.1647021f, +0.2402772f, -0.1069928f, -0.1409893f, +0.1559808f, -0.0814615f,
  +0.0885250f, +0.0512456f, +0.1319975f, +0.0566847f, +0.0621260f, +0.0581844f, +0.1943149f, +0.0275447f,
  +0.1919956f, -0.2770307f, +0.0561758f, +0.1247851f, -0.0009357f, +0.0920038f, +0.2732933f, +0.2703247f,
  -0.0955462f, +0.1510313f, -0.1544006f, +0.2614254f, +0.1221884f, -0.0719007f, -0.2553882f, -0.0676974f,
  -0.2117347f, +0.1481568f, -0.0988419f, +0.3251376f, +0.1033859f, -0.3452814f, -0.0559120f, +0.0130329f,
  +0.0756434f, -0.0178267f, -0.1310676f, -0.0197014f, +0.3179502f, -0.1444174f, -0.0840403f, +0.0358110f,
  -0.1775979f, +0.1051326f, +0.1090805f, +0.0954042f, +0.1381134f, -0.1338855f, +0.0847866f, +0.0945714f,
  -0.0152930f, -0.0379277f, -0.0400413f, -0.2594903f, +0.4395771f, -0.1778530f, +0.0536360f, -0.0839250f,
  -0.1060753f, +0.0704276f, -0.1879466f, -0.3628910f, +0.1447444f, +0.0171037f, -0.2597369f, +0.2222579f,
  -0.1629153f, +0.1822890f, -0.0226141f, -0.1776987f, -0.0690723f, -0.5256930f, -0.0241214f, -0.2474590f,
  -0.1552069f, +0.2448764f, +0.1155684f, +0.1007594f, +0.2404802f, +0.0992067f, +0.0751470f, -0.0994042f,
  +0.0888460f, +0.1194893f, +0.2724653f, -0.1091066f, +0.1114253f, +0.0963455f, +0.1596061f, +0.0919202f,
  +0.0326959f, -0.1046216f, +0.1034612f, +0.1840351f, -0.0084976f, +0.0046553f, -0.4405307f, -0.1815227f,
  +0.2910694f, -0.0997397f, -0.0360300f, -0.0846848f, -0.2166910f, -0.0811141f, +0.0854063f, -0.2704740f,
  -0.2586430f, -0.1640587f, +0.0675308f, +0.2152242f, +0.1592521f, +0.2651676f, +0.1337807f, -0.1942331f,
  -0.3016045f, -0.0122401f, +0.0934125f, +0.0748464f, -0.1145893f, +0.0666410f, -0.0882646f, +0.0464328f,
  +0.0677336f, -0.1403852f, +0.0075171f, +0.0475642f, +0.0257362f, -0.4302349f, -0.1107746f, -0.1240408f,
  +0.0277523f, -0.0435106f, +0.0011470f, +0.1503256f, -0.1528714f, -0.1061244f, -0.1103522f, +0.1334190f
);

const float biases[4] = float[4](
  -0.0482177f, -0.0168056f, -0.0062953f, +0.0120022f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer40 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1318659f, -0.0606809f, -0.1299107f, -0.1713573f, -0.0618937f, +0.0239926f, +0.0293046f, -0.0576695f,
  -0.2403318f, +0.1210579f, +0.4739063f, -0.1455005f, -0.1375283f, +0.1078812f, +0.1212459f, -0.1496343f,
  -0.0329489f, +0.0087559f, -0.0062689f, -0.2482834f, -0.0223213f, +0.0099804f, +0.0259452f, +0.0444796f,
  +0.0711491f, -0.3038686f, -0.1986928f, -0.3329126f, -0.0896495f, -0.0477823f, +0.0870301f, -0.1858533f,
  -0.2391525f, +0.3019945f, -0.1994938f, -0.0372054f, +0.2079396f, -0.0824347f, -0.1693278f, -0.0086280f,
  +0.0528560f, -0.0491417f, +0.2629646f, -0.1407939f, +0.0917775f, +0.1298730f, -0.2067210f, +0.0181286f,
  -0.0927705f, -0.1055814f, +0.0094964f, +0.3863241f, +0.3610048f, +0.0992953f, +0.0504044f, +0.1253620f,
  -0.3396184f, +0.1631592f, -0.0436986f, -0.0802260f, -0.0705605f, -0.0920227f, -0.3107081f, +0.1010715f,
  -0.1166480f, +0.0408000f, +0.1866809f, +0.1085330f, -0.1486858f, +0.0644011f, -0.1670867f, +0.2910711f,
  +0.2566099f, +0.0468967f, -0.1093406f, +0.0052008f, -0.1516999f, +0.0049538f, +0.1595419f, +0.1763535f,
  -0.2702731f, -0.1061995f, -0.1422033f, +0.1422695f, +0.0892536f, +0.0698494f, +0.1236920f, +0.3224676f,
  -0.1190291f, +0.0018173f, -0.2353350f, -0.0019697f, +0.3445734f, +0.0371259f, -0.0917538f, +0.1777404f,
  -0.4044742f, +0.1334387f, +0.1073522f, +0.0143916f, +0.4393493f, -0.1035402f, +0.0483520f, +0.4026493f,
  +0.0848448f, -0.0591939f, -0.0685355f, +0.1180209f, +0.1082985f, +0.0765967f, +0.0233030f, +0.3909550f,
  +0.0573378f, -0.1394821f, +0.2699380f, -0.1081006f, -0.1456309f, -0.0942371f, +0.0224083f, +0.4075325f,
  -0.0589794f, +0.0388543f, -0.0685029f, +0.1111448f, +0.1029666f, -0.0320605f, +0.0177828f, -0.0419820f,
  -0.0948327f, -0.0484730f, -0.0766563f, -0.3396120f, -0.2158575f, -0.0133972f, +0.2560460f, +0.0134204f,
  +0.1923141f, -0.0780368f, +0.1813161f, -0.0724749f, -0.0394909f, -0.1695627f, +0.2714381f, -0.0254645f,
  +0.1346745f, +0.2346038f, -0.0805674f, -0.2094403f, -0.1055069f, +0.0557418f, -0.3277409f, -0.1764714f,
  +0.0944310f, +0.1170794f, +0.1523263f, -0.0235159f, +0.0714874f, -0.0197517f, -0.2453582f, -0.0733577f,
  +0.0066032f, +0.0079128f, -0.2649339f, +0.2463437f, +0.0696469f, +0.1029412f, -0.0666861f, -0.1532884f,
  +0.0169085f, -0.1161051f, +0.0302659f, -0.0800972f, -0.1376094f, +0.3589657f, -0.0579361f, +0.0451667f,
  +0.2742053f, -0.0907913f, +0.0836210f, -0.1551158f, -0.5715140f, +0.2861429f, -0.0455520f, -0.0592348f,
  -0.2997034f, +0.0215767f, -0.0990325f, -0.1772493f, +0.2390889f, +0.3547287f, -0.0752190f, +0.0250166f,
  +0.0687641f, -0.2309693f, +0.1139342f, +0.2953835f, -0.1297158f, +0.1679239f, -0.0007711f, -0.0252585f,
  +0.2873444f, +0.2341751f, +0.0637316f, +0.0281660f, +0.2905133f, +0.0212398f, +0.0731066f, +0.0451488f,
  +0.0620473f, +0.2236645f, -0.1674008f, -0.0811044f, +0.0702684f, +0.3549386f, -0.2028299f, -0.0616307f,
  -0.0416222f, +0.0510676f, -0.2178244f, +0.0843158f, +0.1095503f, -0.0851925f, +0.1758734f, +0.4635181f,
  +0.4009772f, -0.0360785f, +0.0517019f, -0.0008520f, +0.1051712f, +0.1165451f, +0.4005564f, +0.0936787f,
  +0.0056796f, +0.0047340f, +0.2885422f, +0.1212680f, +0.2232856f, +0.0607142f, +0.2087663f, +0.1398150f,
  +0.0398896f, -0.1358708f, -0.0555520f, -0.0140514f, +0.4907194f, +0.0022407f, +0.2432109f, -0.0153619f,
  +0.0234553f, -0.2247686f, -0.0189572f, +0.2005059f, +0.5118614f, -0.0897324f, +0.4088931f, +0.4513991f,
  -0.1610368f, +0.3142737f, -0.0414251f, +0.3605590f, +0.2474723f, -0.0732054f, +0.0816972f, +0.1175140f,
  +0.0047346f, +0.0180611f, +0.0614730f, +0.2017866f, +0.2420893f, +0.2592998f, -0.0587535f, -0.0524712f,
  +0.2161510f, -0.1148993f, +0.0162197f, -0.0040248f, -0.0416065f, -0.0057304f, +0.1564835f, -0.0791008f,
  -0.0917181f, -0.3129775f, -0.3365070f, -0.1283648f, -0.0611105f, -0.0449278f, +0.1584930f, -0.0889052f
);

const float biases[4] = float[4](
  -0.0014255f, +0.0168909f, -0.0096439f, +0.0361405f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer40 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1052050f, -0.0659779f, -0.0455308f, -0.0556686f, -0.2030459f, +0.2102181f, +0.3566847f, +0.1188857f,
  -0.0955663f, -0.0129367f, +0.1384044f, +0.1273935f, -0.0054514f, +0.0555086f, +0.3120696f, +0.1826865f,
  -0.0358657f, +0.0440303f, +0.2715721f, +0.0555911f, +0.0468984f, +0.1173508f, +0.2760089f, +0.0927919f,
  -0.0610934f, +0.1706964f, -0.1502494f, -0.0987074f, +0.0859480f, -0.0150884f, +0.1193337f, +0.2207706f,
  +0.1394355f, -0.0596663f, -0.0370801f, -0.0530095f, -0.0552813f, -0.0879471f, +0.0875309f, +0.2662243f,
  -0.1609959f, +0.3278521f, +0.4709363f, +0.0484024f, +0.0826454f, -0.1543464f, -0.0003615f, +0.0529735f,
  +0.0937035f, +0.2668073f, -0.0645540f, +0.0480316f, -0.0176543f, -0.2180251f, -0.1219876f, +0.1490163f,
  +0.1233010f, -0.2908606f, +0.1542692f, +0.0163307f, +0.0624205f, -0.0012988f, -0.1202339f, +0.1295182f,
  +0.1076134f, -0.2082338f, -0.3289493f, -0.0989641f, -0.0101951f, +0.0913041f, -0.0265710f, +0.1198000f,
  -0.0468920f, -0.0132258f, -0.1576646f, +0.0641544f, +0.1193094f, +0.1134885f, +0.2356496f, +0.0422403f,
  -0.1429814f, -0.0463198f, -0.2993648f, -0.1390860f, +0.0826356f, +0.0973324f, +0.0801470f, +0.0763818f,
  +0.1593375f, +0.0805256f, +0.1539849f, -0.0049329f, -0.0220959f, +0.0443022f, +0.0214293f, +0.1476713f,
  -0.1856785f, +0.1047204f, +0.1756480f, -0.0534452f, +0.1503933f, -0.0864742f, -0.0930156f, -0.0301894f,
  +0.0859025f, -0.2319917f, -0.1579878f, -0.1380826f, +0.2147754f, +0.1550633f, +0.0362618f, -0.0077634f,
  -0.0456462f, -0.1047936f, +0.0366606f, -0.1341404f, +0.0614512f, -0.1315458f, +0.0317305f, +0.0383853f,
  -0.0619951f, -0.1259690f, -0.1537308f, -0.0934517f, -0.0404017f, -0.2050682f, +0.1212314f, +0.0711482f,
  +0.1934271f, -0.0802578f, +0.0801590f, +0.1152429f, -0.2411576f, -0.2352315f, -0.1231293f, +0.0270618f,
  -0.0464433f, -0.1074462f, +0.2621032f, +0.2249066f, +0.0158740f, +0.1663752f, +0.0964818f, +0.0219458f,
  +0.0871602f, -0.0501524f, +0.0474034f, +0.0384188f, +0.0819223f, +0.1658092f, +0.0371677f, -0.1476073f,
  +0.0866900f, -0.1016449f, +0.2106376f, +0.0563690f, -0.2112602f, -0.0495916f, +0.0020538f, -0.0636926f,
  +0.1558626f, +0.1148563f, +0.1438328f, -0.0264358f, -0.1317534f, +0.1928019f, +0.1062213f, -0.0353476f,
  +0.3084897f, -0.1072076f, +0.3131842f, -0.0972336f, -0.0726806f, +0.1791887f, +0.0473767f, +0.0017509f,
  +0.2461511f, +0.1787621f, -0.2178837f, +0.0203979f, -0.1377119f, +0.0402464f, +0.0499318f, +0.0492721f,
  -0.3305800f, +0.1374673f, +0.0223066f, +0.1158898f, +0.0666012f, +0.0319411f, +0.1104042f, -0.0593424f,
  +0.2303348f, -0.0954843f, +0.0365589f, +0.2634740f, +0.0762878f, +0.0584985f, +0.1128190f, -0.1696672f,
  -0.1675625f, -0.1491232f, -0.1663950f, +0.1403504f, -0.0136417f, +0.0339378f, +0.2193698f, -0.0261853f,
  +0.1906918f, -0.1058608f, -0.0064611f, -0.0014989f, -0.1693880f, +0.0016731f, +0.0325841f, +0.0107820f,
  -0.1005087f, -0.1415235f, -0.2771303f, +0.3863772f, +0.1927228f, -0.0606316f, +0.2917822f, +0.1129857f,
  +0.2700227f, +0.0334455f, -0.1835078f, -0.1569175f, +0.0165621f, +0.0732456f, +0.0794614f, +0.3204034f,
  +0.0175058f, -0.0416463f, -0.0356247f, +0.0316218f, +0.2159968f, +0.0198006f, +0.1561598f, +0.3362059f,
  -0.1217441f, +0.2860980f, -0.0464841f, -0.0318850f, +0.0181242f, +0.1093926f, +0.1427584f, +0.1607517f,
  -0.2182485f, +0.1841333f, +0.0925834f, -0.0395509f, +0.1995581f, +0.1852233f, +0.1204446f, +0.3269078f,
  -0.2678961f, +0.0106340f, -0.0653294f, -0.1818902f, +0.4376427f, +0.0275500f, +0.3765574f, +0.4554995f,
  +0.1505276f, -0.2571843f, +0.0290261f, +0.0071872f, +0.5059676f, -0.0951553f, +0.2497663f, +0.1893710f,
  +0.0321906f, -0.0197553f, +0.1740421f, +0.1786785f, -0.2392221f, +0.0007429f, +0.3009202f, +0.3793748f,
  +0.1046241f, -0.0933577f, -0.0290823f, -0.0551570f, -0.4314106f, +0.0280330f, +0.1291280f, +0.3362822f
);

const float biases[4] = float[4](
  -0.0080758f, -0.0140577f, -0.0175817f, -0.0095858f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer41 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1750816f, -0.0354234f, -0.0025527f, -0.1282955f, -0.0562599f, -0.0832066f, +0.3921944f, +0.0668713f,
  +0.4201339f, +0.0766706f, -0.3252054f, +0.1339077f, -0.4526533f, -0.0215148f, +0.1061195f, +0.0929325f,
  -0.6106991f, +0.0795584f, -0.5233057f, -0.2897816f, +0.0652012f, +0.0857132f, -0.4840058f, +0.1176868f,
  +0.0717142f, -0.2154612f, -0.0109086f, -0.1610531f, +0.0020355f, -0.0179281f, -0.2505142f, -0.1224418f,
  +0.0687339f, +0.3069792f, +0.3048763f, -0.5122700f, +0.0919971f, -0.0900502f, +0.4970639f, +0.0407870f,
  -0.2932909f, -0.0187048f, +0.0082182f, +0.0530186f, +0.2065168f, -0.1158285f, -0.0194010f, -0.0623172f,
  +0.1561582f, -0.0071377f, -0.1951703f, +0.2177420f, +0.1005123f, -0.0878344f, -0.0328041f, -0.0842578f,
  -0.1385649f, -0.4195841f, -0.2261891f, -0.2605502f, +0.0977958f, -0.0902549f, +0.0753245f, +0.1554762f,
  +0.0013394f, +0.1397013f, +0.2317796f, +0.0192740f, -0.2505369f, +0.1423163f, +0.1901205f, -0.0551565f,
  +0.3441808f, -0.1885951f, -0.1254620f, -0.2655751f, -0.0738353f, -0.0162123f, +0.1981733f, +0.0336447f,
  +0.0415204f, +0.5166299f, -0.0992601f, -0.4561432f, -0.0711549f, +0.0845603f, +0.1943438f, -0.0298395f,
  -0.3192427f, -0.1042516f, -0.1819008f, -0.0797402f, -0.0279788f, +0.0689128f, -0.0748431f, -0.0771237f,
  +0.0444193f, -0.2413905f, -0.2192445f, -0.2709196f, -0.1637241f, +0.1555544f, +0.0819966f, -0.1285169f,
  +0.6204316f, +0.2766234f, +0.2239970f, +0.5785333f, +0.0164824f, +0.1539127f, +0.3933671f, -0.1624944f,
  +0.2681350f, -0.2356669f, +0.1100857f, +0.1691987f, +0.1137117f, -0.1102881f, +0.0910987f, -0.2072914f,
  -0.0096115f, -0.0106052f, +0.0015226f, -0.1289239f, +0.0184329f, -0.0244933f, -0.0622374f, -0.0060615f,
  -0.2911178f, -0.3994015f, -0.1392677f, -0.1713402f, +0.1285457f, +0.4976119f, +0.4878559f, +0.0105998f,
  -0.0207879f, -0.1369505f, -0.0924469f, +0.1856954f, -0.0419731f, +0.3404846f, +0.1252517f, -0.0225023f,
  -0.0643594f, -0.0520508f, +0.0924928f, +0.0621979f, +0.1182040f, +0.0404152f, -0.1343858f, -0.1453926f,
  -0.0769877f, +0.1787514f, -0.0654079f, +0.1387544f, -0.2061190f, -0.0621009f, -0.0094273f, -0.0310650f,
  +0.1362422f, +0.0495870f, -0.0314898f, -0.1182859f, +0.2489062f, +0.0986986f, -0.0657415f, -0.1651777f,
  -0.1726042f, +0.0319539f, -0.1259734f, +0.0544166f, +0.0572603f, +0.2770031f, -0.0342856f, -0.1487601f,
  -0.2495908f, -0.1858211f, -0.2053384f, -0.0439317f, -0.0266952f, +0.0763756f, +0.0811235f, -0.2367838f,
  -0.3561411f, -0.4038212f, +0.1507277f, +0.0946672f, +0.1474857f, +0.0964790f, +0.3890492f, -0.0805116f,
  -0.1512032f, +0.1366929f, -0.0108619f, -0.0139100f, -0.1946186f, -0.1200752f, +0.0078698f, -0.2376565f,
  +0.3417263f, -0.2016275f, +0.1565504f, +0.1360903f, -0.3086924f, -0.0342329f, +0.0137688f, +0.0612260f,
  +0.2314333f, +0.0785029f, +0.1558567f, +0.3161493f, -0.1708405f, -0.0907237f, -0.0996885f, +0.0435017f,
  +0.1301760f, -0.3240938f, +0.0103881f, -0.0129361f, -0.1437309f, -0.4295762f, +0.3097256f, -0.3890162f,
  -0.2337459f, -0.0464974f, -0.2245301f, -0.0648015f, +0.1287301f, +0.0515364f, -0.0092712f, -0.0337121f,
  -0.0519100f, +0.1778387f, +0.1395968f, -0.1396075f, +0.0206424f, -0.0911089f, +0.1029752f, +0.0025863f,
  -0.1078538f, -0.1348404f, +0.1156173f, +0.0430689f, -0.1567389f, -0.0259986f, +0.1200194f, -0.3466484f,
  -0.2531867f, +0.0789613f, +0.2059219f, +0.3753097f, +0.0115930f, -0.1941160f, -0.1048261f, -0.3869671f,
  +0.0883290f, +0.0626250f, +0.0994434f, -0.1112719f, +0.2186633f, +0.2908089f, -0.1587019f, -0.0229762f,
  -0.1319850f, -0.2343245f, +0.0337576f, -0.1135118f, +0.1234111f, +0.2311977f, -0.1677219f, -0.2335466f,
  +0.1760083f, +0.1075874f, -0.2107497f, +0.2788863f, +0.0700994f, +0.0243233f, -0.0219785f, +0.1039465f,
  +0.0364982f, -0.1254805f, +0.0391228f, -0.0713889f, -0.0603936f, -0.0215206f, +0.1901788f, -0.0944966f
);

const float biases[4] = float[4](
  -0.0044522f, -0.0395729f, +0.0265128f, -0.0168381f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer41 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.3673100f, +0.3899740f, -0.4178829f, +0.0255593f, +0.1272149f, +0.0490336f, -0.0216042f, -0.2483004f,
  +0.1450550f, -0.2092495f, -0.2237402f, -0.0518334f, +0.0476078f, +0.1572569f, +0.0243091f, -0.2011527f,
  +0.1866833f, -0.2155105f, -0.0355764f, -0.4849758f, +0.2497060f, +0.1998869f, +0.1306535f, -0.5293854f,
  +0.1306133f, -0.0050578f, -0.0521450f, +0.2838018f, +0.1514898f, -0.0077894f, -0.0520948f, +0.0251349f,
  +0.1923966f, -0.0352245f, -0.0044937f, -0.2157457f, +0.0723798f, -0.2045805f, -0.1228218f, -0.0591194f,
  +0.0970781f, -0.2204873f, +0.0233519f, +0.3728202f, +0.2112599f, +0.1794384f, -0.0955388f, -0.1386444f,
  -0.0196869f, +0.0708376f, -0.2888584f, +0.0772229f, -0.0262893f, +0.0232244f, +0.1097110f, +0.0778918f,
  -0.0019075f, -0.1721142f, -0.1593473f, -0.0192357f, -0.0736147f, +0.1106146f, +0.2445323f, -0.1271095f,
  +0.0331591f, +0.3265114f, +0.0183799f, +0.2613556f, +0.0724769f, +0.1498483f, -0.1940914f, +0.0490008f,
  -0.0032502f, -0.1111900f, +0.0249009f, +0.0377311f, +0.0991802f, +0.0397786f, +0.0772948f, -0.0449922f,
  -0.1744158f, -0.0567537f, -0.0345154f, -0.0509498f, -0.0662096f, +0.0393468f, +0.0816238f, -0.1461063f,
  -0.0027338f, -0.1232243f, +0.0523970f, -0.0203468f, -0.0786500f, +0.0360553f, +0.1256614f, -0.1334045f,
  +0.1016658f, -0.2030792f, +0.0068070f, +0.3129307f, -0.0969702f, -0.0736977f, -0.1169666f, +0.0708607f,
  -0.0445233f, +0.3095308f, -0.0777696f, -0.1123164f, -0.2573624f, +0.1333124f, +0.3263224f, -0.2184499f,
  -0.1073248f, +0.0864954f, +0.1479245f, +0.0416746f, -0.1878380f, -0.0680186f, +0.0111407f, -0.1650752f,
  +0.0755628f, +0.0834055f, -0.0102407f, -0.0097432f, -0.0040134f, -0.0092557f, +0.1141407f, +0.1011758f,
  +0.1801610f, +0.0328460f, +0.1810898f, -0.1598047f, -0.3993345f, +0.3976432f, +0.1108634f, +0.1896988f,
  +0.2818887f, +0.0661983f, +0.2018057f, +0.4066733f, +0.2262148f, -0.2008307f, -0.1648230f, -0.1499352f,
  -0.0806361f, +0.1869776f, +0.0595045f, +0.0706326f, -0.0943587f, -0.0248760f, +0.3188014f, +0.1054668f,
  +0.2717261f, -0.1507053f, -0.1722294f, +0.1147287f, -0.0261971f, +0.0831690f, -0.1317607f, -0.1159235f,
  -0.1565560f, -0.0761927f, +0.2272442f, +0.0194652f, -0.0382142f, +0.1341660f, +0.0803993f, +0.0390205f,
  -0.1849906f, +0.2448712f, +0.1619646f, +0.0006818f, +0.0488425f, -0.0723139f, -0.2635283f, -0.1085165f,
  -0.1986132f, -0.0701868f, -0.5496599f, +0.3643020f, +0.0723835f, -0.2009964f, +0.1107300f, -0.0058001f,
  +0.2311729f, +0.0351246f, +0.0615329f, +0.0668805f, -0.3106841f, -0.1021469f, +0.0060071f, +0.0536985f,
  -0.4159249f, -0.2038263f, -0.0153028f, +0.0146080f, +0.0013842f, -0.2518096f, -0.1582181f, -0.0410521f,
  +0.0858764f, -0.1569688f, +0.1217208f, -0.0069885f, -0.0777407f, -0.5743601f, -0.0934484f, -0.1920613f,
  +0.0326291f, +0.0489646f, -0.0075534f, -0.1822179f, +0.0335912f, -0.2251797f, +0.0960638f, -0.0780751f,
  -0.0563491f, +0.0910311f, -0.1034344f, -0.0844560f, +0.0406221f, -0.0730855f, +0.1143719f, +0.2207690f,
  +0.0557503f, -0.0755189f, +0.0692291f, +0.2320174f, +0.0176547f, -0.0373841f, +0.2588520f, -0.0985724f,
  +0.1680663f, -0.1957940f, +0.3408100f, -0.0431738f, -0.1505819f, +0.0507708f, -0.2151354f, +0.1247971f,
  -0.2478047f, -0.0998595f, -0.1977314f, +0.0109699f, -0.0837125f, +0.0029858f, +0.1383067f, +0.0412738f,
  +0.0703785f, -0.1426867f, -0.1955747f, -0.1022037f, +0.1557562f, -0.0317355f, -0.2598672f, -0.1728363f,
  +0.0678954f, +0.0852700f, +0.3265035f, +0.2261050f, +0.2630834f, -0.0324544f, +0.1528055f, +0.2707129f,
  -0.0383762f, +0.1984355f, +0.2079373f, -0.1124538f, +0.1035324f, -0.1573680f, +0.2557848f, +0.0204712f,
  -0.0742844f, -0.0418801f, -0.0983763f, -0.1933205f, +0.1402669f, -0.1551272f, -0.0548454f, -0.2325903f,
  -0.1324800f, -0.0296496f, +0.1205951f, +0.1456944f, +0.0151572f, -0.1225275f, +0.0711839f, +0.0773585f
);

const float biases[4] = float[4](
  -0.0526005f, -0.0809158f, -0.0224304f, +0.0223758f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer42 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0765400f, +0.1685858f, +0.1972956f, -0.2741861f, -0.3028986f, +0.0522811f, +0.0748020f, +0.0060095f,
  +0.0955679f, +0.2006751f, +0.0391094f, -0.3286998f, -0.2458967f, -0.0118098f, -0.1416239f, -0.0260639f,
  +0.0337349f, +0.2168294f, +0.2772470f, +0.1343650f, -0.2169012f, -0.1817425f, -0.1577204f, +0.0108176f,
  -0.0895481f, +0.1587302f, -0.0934147f, -0.1149226f, -0.1437000f, +0.3728858f, +0.1110692f, +0.1301651f,
  +0.4377134f, -0.1067822f, +0.0148173f, -0.2144585f, +0.0211271f, -0.1079634f, +0.1154931f, -0.0603817f,
  -0.0705764f, +0.0220155f, +0.1207920f, +0.3858399f, +0.0002238f, +0.0357579f, -0.1604670f, +0.1700667f,
  -0.1288111f, +0.1069840f, -0.0780874f, -0.1849868f, +0.0466600f, +0.1715902f, +0.1946770f, +0.1091620f,
  +0.1616623f, +0.0131364f, -0.2183114f, -0.0108735f, -0.0913605f, +0.0505118f, +0.0131050f, +0.0315436f,
  -0.1820817f, +0.0940801f, +0.0721874f, +0.0442079f, -0.0448742f, -0.0213648f, -0.1177808f, +0.0544291f,
  -0.2760477f, -0.0118751f, -0.0491188f, +0.1890090f, +0.0296045f, -0.0244161f, -0.1298113f, +0.0242912f,
  -0.0112757f, -0.0792286f, +0.1148454f, +0.0786024f, +0.2005357f, +0.0642152f, +0.2070505f, +0.0188338f,
  +0.0518548f, -0.3219254f, -0.0785106f, -0.0462667f, +0.4112848f, +0.0575286f, +0.0125423f, -0.1146155f,
  +0.0674342f, -0.1017871f, -0.0034374f, +0.0877713f, +0.2494648f, -0.1225264f, +0.0633607f, +0.2292308f,
  +0.1594723f, -0.0317630f, -0.0925649f, -0.1771258f, +0.1975187f, -0.0828026f, -0.0535259f, -0.0278045f,
  -0.4557948f, +0.3544279f, -0.3121538f, +0.1049243f, -0.0553094f, +0.1099801f, +0.2469787f, -0.1002034f,
  -0.0599945f, +0.0087587f, +0.0821840f, -0.5849294f, -0.1537962f, -0.1177901f, +0.0136355f, +0.1269759f,
  +0.2200953f, -0.0014767f, -0.0214212f, -0.0123930f, +0.0868374f, -0.0142875f, +0.2040143f, +0.0460242f,
  +0.1013816f, +0.0617154f, -0.0307062f, +0.0049627f, -0.0350540f, -0.0326308f, -0.0097403f, +0.0076465f,
  -0.0937731f, -0.0080523f, -0.3783962f, -0.1486578f, -0.0616778f, -0.1554722f, +0.1234931f, -0.0640331f,
  -0.3765958f, -0.1604427f, -0.2799766f, -0.1223680f, -0.0140091f, -0.1455986f, -0.0518118f, +0.0813495f,
  +0.1766845f, -0.3388545f, -0.1248667f, +0.0070791f, +0.1895176f, -0.0011202f, +0.1263023f, +0.1760415f,
  +0.3498833f, -0.1154297f, -0.0151691f, +0.0519466f, +0.0614375f, -0.1271533f, +0.0406058f, -0.0861569f,
  -0.5881365f, -0.5810669f, -0.0396990f, -0.2476974f, -0.0343876f, +0.2216051f, -0.2640814f, -0.3037216f,
  +0.1637193f, -0.1908297f, +0.0878827f, +0.1909196f, +0.0962572f, -0.0331721f, +0.3585738f, +0.0802964f,
  +0.0614278f, -0.0993664f, -0.1064451f, -0.0705062f, +0.0476568f, +0.2327473f, +0.1389308f, -0.0986887f,
  +0.0190760f, -0.0117819f, -0.1148207f, +0.0188510f, +0.2545948f, +0.0106743f, +0.0459755f, +0.0613115f,
  +0.0263058f, -0.1153746f, -0.1709420f, -0.0662601f, +0.0098506f, +0.0753976f, +0.3924349f, -0.0245514f,
  -0.1181365f, -0.0107406f, -0.1151550f, +0.0671308f, -0.1138885f, +0.0045390f, +0.0221351f, +0.0048073f,
  -0.0792150f, +0.0296469f, +0.3367772f, +0.1382795f, +0.0587485f, +0.0252370f, +0.3285908f, +0.0256759f,
  -0.0232716f, -0.2896406f, -0.0966782f, +0.0379228f, +0.2623931f, -0.1527170f, +0.0014722f, -0.0772228f,
  -0.4332538f, +0.1745764f, -0.0629303f, +0.2321741f, -0.1691376f, +0.0460531f, -0.0217961f, +0.0167203f,
  +0.3239024f, -0.3384121f, -0.0099441f, -0.3463217f, +0.1583443f, +0.0928991f, +0.2251022f, +0.1731131f,
  +0.1220349f, +0.1021738f, -0.1755953f, +0.0489997f, -0.0691472f, -0.2581963f, -0.0006388f, -0.0988340f,
  -0.1687536f, -0.0668306f, +0.0481319f, +0.1497462f, +0.1772865f, +0.0084470f, +0.1871153f, +0.1380413f,
  -0.2225488f, +0.1960803f, -0.0826212f, -0.2233293f, +0.0219095f, +0.0069300f, +0.4237186f, +0.0901586f,
  -0.1136502f, -0.0719152f, -0.1401317f, -0.1125969f, +0.0999547f, -0.0355037f, -0.0262472f, -0.1093379f
);

const float biases[4] = float[4](
  -0.0084576f, +0.0186976f, +0.0013427f, +0.0270223f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer42 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1294667f, -0.0068501f, +0.1005282f, -0.0561412f, +0.0050714f, -0.0975074f, -0.0445868f, -0.1200547f,
  -0.0921249f, +0.0394783f, +0.0836669f, +0.0581947f, +0.0392509f, +0.6499818f, -0.0609559f, -0.2464811f,
  +0.2045662f, -0.0931817f, +0.0916279f, +0.2664319f, +0.2712241f, -0.1040742f, -0.1281040f, -0.2502999f,
  +0.6584636f, +0.1922818f, +0.1848968f, -0.1116251f, -0.2993134f, -0.1272799f, +0.0591745f, -0.0598005f,
  -0.1415971f, +0.6389863f, -0.0128413f, +0.0963642f, -0.2124522f, +0.3616922f, -0.1842395f, -0.2008189f,
  +0.1111855f, +0.3246521f, +0.1410936f, -0.0226520f, +0.0187090f, +0.0751993f, -0.3323689f, -0.1343182f,
  +0.5311773f, -0.0473264f, -0.0803835f, -0.1224692f, +0.0875626f, +0.0582854f, +0.0719637f, -0.1283304f,
  -0.1660342f, -0.1325932f, +0.1187001f, +0.3594221f, +0.0299047f, +0.0160431f, -0.1448980f, -0.0905357f,
  +0.1558484f, -0.0714184f, -0.2308931f, +0.0732815f, -0.0292604f, +0.0139566f, -0.0332361f, +0.0509081f,
  +0.0809943f, -0.1202480f, +0.2696169f, +0.1705311f, +0.0401042f, +0.1442060f, +0.2999961f, +0.0627452f,
  -0.0118570f, -0.1489121f, +0.1564436f, +0.2233895f, -0.0731165f, -0.4604968f, +0.0490686f, +0.0566637f,
  +0.0775605f, +0.2358653f, +0.0481714f, -0.1438670f, -0.1841349f, -0.0902502f, +0.0357956f, +0.0642846f,
  +0.0237380f, +0.0633288f, -0.1648146f, -0.2169658f, +0.0502896f, +0.0871161f, +0.1371546f, +0.0943081f,
  -0.0843903f, -0.2634590f, -0.1317995f, +0.1989694f, -0.0072776f, +0.3301206f, +0.2522900f, +0.1471807f,
  -0.1017706f, +0.1997434f, -0.4568139f, +0.0842263f, +0.2808765f, +0.0243388f, +0.1432202f, +0.2008936f,
  -0.0338032f, -0.1154703f, -0.0489690f, +0.2827341f, -0.0489230f, +0.0905236f, -0.0219741f, +0.2183547f,
  +0.0041270f, -0.0221863f, +0.0235235f, -0.1731010f, +0.0056091f, -0.0819365f, -0.1169426f, +0.0313260f,
  -0.0798811f, +0.0716902f, -0.0659809f, +0.0705153f, +0.0583619f, +0.1397389f, +0.1284958f, +0.0945302f,
  +0.3417713f, -0.2109998f, +0.1385583f, +0.2497872f, +0.1255650f, +0.1413456f, +0.0042958f, -0.0167697f,
  -0.2072503f, -0.1343074f, +0.0197031f, +0.3257067f, -0.0588832f, +0.0449683f, -0.0677490f, +0.0266167f,
  +0.2744246f, -0.0261429f, -0.1808060f, +0.2191887f, +0.0947182f, -0.1136358f, -0.1126299f, +0.0604334f,
  +0.2935114f, -0.0642079f, -0.1416683f, +0.1557214f, -0.3150529f, +0.0607471f, +0.0148760f, -0.2130102f,
  -0.1573217f, -0.0101661f, +0.0738859f, +0.4144961f, +0.4831903f, -0.0131988f, +0.0472906f, -0.0287894f,
  +0.1294152f, -0.0092791f, +0.1472189f, -0.0143438f, +0.2395175f, +0.1138569f, -0.3804298f, -0.1241470f,
  -0.3254706f, +0.0155894f, +0.1148474f, +0.1572786f, -0.0369236f, -0.1378189f, -0.1044289f, -0.2138695f,
  +0.3052306f, -0.0801215f, +0.0655057f, +0.0618815f, -0.0093335f, -0.1068490f, +0.0667180f, +0.0896378f,
  -0.0138881f, -0.0865927f, +0.2751258f, -0.2663179f, -0.0042613f, -0.0920754f, -0.3108701f, -0.1002540f,
  -0.0526824f, +0.0210028f, -0.0660617f, +0.1530075f, +0.0114695f, +0.2449318f, -0.0417168f, +0.0913605f,
  +0.2890736f, +0.0528417f, +0.3293183f, -0.2401063f, -0.0033369f, -0.3518474f, +0.1133360f, +0.1098428f,
  +0.0552111f, -0.0127938f, +0.1306636f, +0.1755458f, +0.1003590f, -0.2079811f, -0.1641326f, -0.0623239f,
  +0.0979521f, +0.3211987f, +0.0823915f, -0.3646253f, +0.2008927f, +0.0695552f, -0.0379461f, +0.0221752f,
  -0.5240344f, -0.0433152f, +0.0963046f, +0.1977471f, -0.0815960f, +0.0195757f, +0.2146386f, -0.0314409f,
  +0.1851992f, +0.0338481f, -0.0651962f, +0.0514473f, +0.0864327f, -0.1692604f, -0.2953475f, +0.0359012f,
  +0.3790184f, +0.0200242f, +0.0141270f, -0.2989789f, +0.2861519f, -0.1003291f, +0.1926022f, +0.1424941f,
  +0.9309189f, -0.3685746f, +0.0051427f, +0.0699371f, -0.1019990f, +0.0969803f, +0.1124228f, +0.0658127f,
  +0.0241785f, +0.1548954f, +0.0987332f, +0.1320317f, +0.0760159f, -0.0313005f, -0.0772836f, +0.0821522f
);

const float biases[4] = float[4](
  -0.0129130f, -0.0255756f, -0.0176842f, -0.0103216f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer43 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2258217f, +0.1297126f, +0.0017684f, -0.1580353f, +0.4130966f, -0.1412393f, -0.2257206f, -0.2879822f,
  -0.0713511f, -0.1278980f, +0.0608018f, -0.1153514f, +0.3430243f, +0.2281566f, +0.1399518f, -0.2522382f,
  -0.1119795f, -0.0206764f, +0.2256399f, +0.0576013f, +0.0372924f, +0.0083738f, +0.1147078f, -0.3477997f,
  +0.1100795f, +0.0865995f, -0.0872352f, +0.0387152f, +0.1415330f, -0.0529536f, -0.0087872f, +0.0711988f,
  +0.2106660f, +0.0872978f, -0.3124739f, -0.1587163f, +0.0623551f, +0.0022053f, -0.1676635f, -0.0146268f,
  -0.0712982f, -0.1307384f, +0.0152018f, -0.0847397f, +0.2273635f, +0.2685631f, +0.0342830f, -0.0608388f,
  -0.0239015f, +0.0347514f, +0.0343644f, +0.3484778f, +0.1176413f, -0.2236968f, +0.1099630f, +0.0628523f,
  +0.0554254f, +0.1091284f, -0.0318111f, -0.0642071f, -0.0824514f, -0.3336885f, -0.2674679f, +0.0371854f,
  +0.0338406f, -0.2255014f, -0.0084501f, +0.0044111f, -0.0463837f, +0.0425509f, +0.1629552f, +0.0303697f,
  -0.1954602f, +0.0415126f, +0.1091514f, +0.1486925f, -0.2558415f, +0.2413824f, +0.1575023f, +0.1097140f,
  +0.1056591f, +0.0153494f, -0.2409948f, -0.1989306f, -0.0285986f, -0.1479521f, +0.1211506f, -0.1110633f,
  -0.0306683f, +0.0205902f, -0.0896660f, +0.1211170f, +0.1407704f, -0.0356030f, -0.0847445f, -0.2387940f,
  +0.1931350f, +0.0834047f, -0.1525688f, +0.0118727f, -0.4475237f, -0.0370592f, -0.1199549f, -0.0945627f,
  +0.0683965f, +0.0327919f, -0.1833100f, -0.4642330f, +0.2854705f, +0.0273825f, +0.0459942f, +0.3563062f,
  -0.0039885f, -0.1214462f, +0.0610754f, +0.0176964f, -0.0176401f, +0.0458351f, -0.2232330f, -0.1983258f,
  +0.1658521f, +0.0599854f, +0.0711660f, -0.1985887f, +0.0584068f, -0.1513577f, -0.1740412f, +0.0521254f,
  +0.1024046f, -0.2066980f, +0.0022707f, +0.0468558f, +0.2619798f, -0.1167431f, +0.0554044f, -0.1522865f,
  +0.0215616f, +0.1195673f, -0.0049522f, +0.1227256f, -0.0543115f, -0.2378916f, -0.0992759f, -0.3193594f,
  -0.0144554f, +0.4307882f, +0.0375550f, -0.0454734f, +0.0246708f, -0.2188549f, +0.4369813f, +0.0070239f,
  +0.0385333f, +0.3650584f, +0.1244061f, +0.2226539f, -0.2877065f, -0.2345043f, +0.4432401f, +0.2650852f,
  +0.1303072f, -0.1843367f, -0.0802087f, +0.0273007f, -0.0402429f, +0.0509416f, +0.2006635f, +0.0377543f,
  -0.0573180f, -0.1734672f, -0.0362645f, -0.1313254f, +0.0292828f, -0.0442257f, -0.2362526f, +0.0822974f,
  -0.2837117f, -0.5394598f, +0.0404013f, +0.5725637f, +0.5422643f, -0.3468388f, -0.0411633f, +0.1061932f,
  -0.0463028f, +0.0579828f, -0.2324590f, +0.0002540f, +0.1488339f, +0.0063507f, -0.1669180f, +0.0483871f,
  +0.1109633f, -0.0539267f, -0.0919005f, +0.0290926f, +0.0534180f, -0.0223459f, +0.1761711f, +0.0751781f,
  -0.0961475f, -0.0476614f, -0.0849588f, -0.0491032f, +0.1450276f, +0.1946936f, -0.0156729f, -0.0548455f,
  +0.0516063f, +0.0071481f, -0.1428030f, -0.0871554f, +0.2914768f, +0.3624445f, -0.1715827f, +0.0419607f,
  +0.1416595f, -0.0283709f, -0.2651546f, -0.2639017f, -0.1059864f, -0.1844880f, -0.1067436f, +0.1462423f,
  +0.3091967f, -0.1377386f, +0.0400937f, -0.1824120f, -0.1448636f, -0.2349704f, -0.0720816f, +0.2604905f,
  +0.0971868f, +0.1373387f, -0.0443901f, +0.0604737f, -0.1996130f, -0.1842736f, -0.0380136f, -0.0076524f,
  -0.0757444f, -0.0594482f, -0.2903457f, +0.1954832f, +0.1114275f, -0.0995647f, -0.1108304f, -0.0389933f,
  +0.1840649f, -0.1218816f, -0.3923837f, +0.1981366f, +0.2413234f, +0.1205019f, -0.2186639f, -0.1158208f,
  +0.1718179f, +0.1598536f, -0.0875925f, +0.2247383f, +0.0811633f, -0.0230843f, -0.0586773f, -0.0918773f,
  -0.0899794f, -0.0949887f, -0.0253117f, -0.0799665f, +0.1561939f, -0.0644881f, +0.0550912f, -0.3085268f,
  +0.0032709f, +0.0023000f, +0.0637226f, +0.1640581f, -0.1330759f, +0.1255305f, +0.0266786f, -0.3635624f,
  -0.0385023f, -0.1024000f, -0.1027315f, -0.1838778f, -0.0589128f, +0.0874202f, +0.2085367f, +0.0632473f
);

const float biases[4] = float[4](
  +0.0196337f, -0.0199330f, -0.0204624f, -0.0664740f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer43 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1227823f, +0.2982268f, -0.0720418f, +0.1697824f, +0.1406492f, +0.0160351f, -0.1906510f, +0.0120268f,
  -0.3441471f, +0.1599010f, +0.0208868f, -0.1795937f, +0.0061008f, +0.0351629f, -0.0392068f, +0.2053745f,
  -0.0934955f, -0.0660985f, -0.2216872f, +0.1048900f, +0.1855465f, +0.3450437f, -0.1902111f, -0.0632408f,
  -0.1408053f, -0.0973743f, +0.0113917f, +0.1088792f, -0.0035355f, -0.2240486f, +0.0707908f, -0.3019992f,
  +0.1543151f, +0.0317797f, +0.2516122f, -0.1844964f, -0.2130521f, -0.2613269f, +0.0494397f, +0.0199545f,
  +0.2837037f, +0.0487970f, +0.0092599f, -0.0158460f, +0.1545742f, -0.1112820f, +0.1589702f, +0.0407159f,
  -0.0840200f, +0.1444936f, +0.0447855f, +0.0417450f, +0.0712616f, -0.1235466f, -0.0585803f, +0.1148867f,
  -0.0379160f, -0.1078257f, +0.1184344f, -0.1224407f, +0.1424357f, +0.0536636f, -0.0889434f, -0.1056976f,
  -0.0493106f, -0.0497984f, -0.0408286f, +0.1633949f, -0.0791332f, +0.2198171f, +0.0902251f, +0.0194453f,
  +0.0292056f, -0.0430275f, -0.4666530f, +0.1355104f, -0.2526013f, +0.0471093f, -0.1615410f, +0.0818546f,
  +0.1616184f, -0.2049884f, -0.5118294f, +0.0001755f, -0.2611097f, -0.3332620f, -0.0991166f, -0.3619548f,
  -0.0937099f, +0.0289172f, +0.2547061f, +0.0157187f, -0.0684399f, +0.0487586f, +0.1790739f, -0.1818254f,
  +0.0855860f, -0.0797689f, -0.0686902f, +0.0004338f, +0.1155070f, +0.1538729f, +0.1175200f, -0.0824953f,
  -0.1024823f, -0.0246740f, -0.2067214f, +0.1808341f, +0.0384462f, +0.0920336f, -0.3576732f, -0.4425613f,
  -0.1421087f, +0.0139873f, -0.0610483f, +0.1626259f, +0.1682293f, +0.0627789f, +0.0796774f, -0.1695698f,
  -0.0319460f, -0.0817337f, -0.0570816f, -0.0668749f, +0.1508963f, +0.1604152f, +0.1906463f, -0.0068806f,
  +0.1760372f, +0.0088747f, -0.1123953f, +0.2749056f, +0.1490609f, +0.1918815f, -0.0851255f, +0.0174763f,
  -0.0330010f, +0.1790916f, +0.2043707f, +0.0061601f, -0.1241771f, -0.1680075f, -0.0645737f, -0.0170151f,
  +0.1741595f, -0.0618897f, -0.1200301f, -0.0038960f, +0.1587249f, -0.0995673f, -0.0195982f, +0.0531957f,
  -0.1669084f, +0.0893034f, +0.2553028f, -0.0749176f, -0.0295987f, -0.0243749f, -0.0500372f, +0.0634111f,
  -0.0468369f, -0.0727851f, -0.0893171f, -0.1003583f, +0.0792226f, +0.1015868f, -0.0471251f, +0.0600101f,
  +0.1177185f, +0.1094280f, -0.1727899f, -0.2818843f, +0.2103101f, -0.1352124f, +0.1710452f, -0.2631748f,
  -0.3423887f, -0.1384666f, +0.3351458f, +0.2942314f, +0.0001950f, +0.3352356f, -0.1278793f, +0.1169473f,
  +0.2062288f, +0.1728121f, -0.3030263f, +0.1537732f, -0.0583858f, +0.0761419f, +0.0588359f, +0.1801776f,
  +0.0861651f, +0.0789433f, -0.2167638f, -0.1408509f, +0.0005943f, -0.1210779f, -0.1053803f, -0.0167886f,
  -0.2882793f, -0.2366048f, +0.1226158f, +0.2182215f, +0.1049396f, -0.0205647f, +0.3123926f, -0.0026732f,
  +0.2265212f, +0.2922134f, +0.0106659f, +0.0228197f, +0.1857219f, -0.0631258f, -0.1477143f, +0.2763395f,
  +0.1209818f, +0.1373696f, +0.1841742f, +0.3705490f, +0.1684057f, -0.1502485f, +0.1698255f, +0.3459010f,
  -0.2219735f, +0.2308351f, +0.3686548f, -0.0441926f, +0.1604016f, +0.0910499f, -0.0660866f, +0.2916437f,
  +0.2262896f, -0.0180040f, -0.0768983f, +0.0715419f, -0.0113764f, -0.1159232f, +0.1850796f, -0.1769815f,
  -0.2118856f, +0.0975077f, +0.1881375f, +0.0276722f, -0.0278301f, -0.0643296f, -0.1416469f, +0.0134411f,
  -0.1960296f, +0.2836156f, +0.1194729f, -0.1115755f, -0.0688027f, +0.0805843f, -0.0228651f, +0.1440714f,
  -0.0395822f, -0.2725255f, +0.2328489f, +0.0002171f, -0.1129519f, -0.0242885f, +0.1245195f, -0.0108296f,
  -0.1109471f, -0.1672424f, +0.0053592f, +0.1595767f, -0.2154728f, +0.1624656f, +0.0281241f, -0.0550241f,
  +0.0055983f, -0.0067996f, +0.0101048f, +0.1744908f, -0.1073192f, +0.0724259f, -0.1531501f, +0.2147549f,
  -0.0422075f, +0.0091016f, -0.0405934f, -0.0439979f, -0.0495252f, +0.0596426f, -0.0040487f, -0.1518296f
);

const float biases[4] = float[4](
  +0.0421843f, -0.0333081f, +0.0199812f, +0.0237185f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer44 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0157977f, +0.1200942f, -0.0866722f, -0.0619108f, -0.0080762f, +0.1857025f, +0.0154149f, +0.0512908f,
  -0.0074618f, -0.1824093f, -0.2342268f, -0.2078754f, -0.0995925f, -0.1835885f, -0.2337754f, +0.1872123f,
  +0.1434407f, +0.0364753f, -0.0269364f, +0.2114721f, -0.0103551f, +0.0053074f, -0.0564239f, +0.0850260f,
  +0.1560710f, -0.1713859f, -0.3902192f, -0.1110517f, -0.3698610f, -0.4738587f, -0.3766923f, +0.4493600f,
  -0.1447396f, -0.0855352f, -0.1386650f, -0.2512935f, -0.0438418f, -0.1226283f, -0.0284909f, +0.1467881f,
  -0.0268478f, +0.1723218f, +0.0224605f, -0.0778754f, -0.1860665f, -0.0811797f, +0.1124924f, +0.1693096f,
  +0.1461282f, -0.1367556f, +0.1063479f, +0.0723797f, -0.1517353f, -0.0842497f, -0.1121539f, +0.0958011f,
  +0.2062478f, +0.0011713f, +0.1037597f, +0.1188215f, +0.0338656f, -0.3011995f, +0.3468909f, +0.2802628f,
  +0.0126580f, +0.2035339f, +0.2066842f, +0.1455239f, -0.1181831f, -0.0396226f, -0.0400753f, +0.0023141f,
  +0.1915073f, -0.0276848f, -0.0818135f, +0.2940291f, +0.0388764f, -0.3811911f, +0.0629255f, +0.0520213f,
  +0.0789367f, +0.0080671f, -0.1195513f, +0.0836610f, -0.1514171f, -0.0160907f, +0.1487564f, +0.1013111f,
  -0.2806293f, +0.0318395f, -0.0608696f, -0.0768430f, -0.0058886f, -0.0018955f, -0.0187608f, +0.1012019f,
  +0.0350910f, -0.2212415f, -0.3102946f, +0.3310047f, +0.2391485f, -0.0859236f, +0.1568285f, -0.0810856f,
  -0.0055692f, +0.1035377f, +0.2164880f, +0.0653458f, +0.0643475f, +0.0991935f, +0.0405806f, -0.1472364f,
  +0.1423468f, -0.0470877f, +0.0357615f, -0.1416261f, +0.1062306f, -0.1831665f, -0.0245888f, +0.0215962f,
  +0.2396396f, -0.0810529f, -0.0085173f, +0.1029348f, +0.1752116f, -0.0411115f, -0.0272284f, -0.1888878f,
  -0.0590382f, +0.0299400f, +0.0187822f, +0.0654972f, -0.0458036f, +0.0425973f, -0.1516243f, -0.1225170f,
  -0.0045047f, +0.0350890f, -0.4157412f, +0.0478877f, -0.1004938f, +0.1204349f, +0.0388272f, +0.2413280f,
  +0.0738018f, +0.0378371f, +0.1727837f, +0.3760789f, -0.0596381f, +0.1587507f, -0.1379714f, -0.1172612f,
  -0.0519775f, +0.1355443f, +0.1789063f, -0.2321755f, -0.1401796f, -0.1693953f, +0.0626269f, +0.0214484f,
  +0.1499986f, -0.1696549f, +0.2285476f, -0.4691998f, +0.0131085f, +0.3186504f, +0.1043898f, -0.1729996f,
  +0.2589105f, +0.2185903f, +0.2149725f, +0.1709832f, +0.0674230f, +0.1626396f, +0.0078614f, -0.0983375f,
  +0.0572574f, +0.0849326f, +0.3000488f, +0.0926526f, +0.0287671f, -0.1165760f, +0.0095626f, +0.0473677f,
  +0.0194815f, -0.1329277f, +0.2656702f, +0.2906860f, -0.2726595f, +0.0756670f, -0.1086589f, -0.1269226f,
  -0.0260204f, -0.0354272f, +0.0058342f, +0.5110208f, +0.0663052f, -0.1387229f, -0.0039502f, +0.0559885f,
  +0.1332791f, -0.0595876f, -0.0075269f, +0.2418681f, -0.0785660f, -0.0955336f, -0.0782191f, -0.1619700f,
  -0.2599275f, -0.0895645f, +0.3906643f, +0.0501727f, -0.0505346f, +0.0218502f, +0.1623549f, +0.2492481f,
  +0.1088850f, -0.0691906f, +0.0183366f, +0.1737727f, -0.1711005f, +0.0171492f, -0.2190867f, +0.0620922f,
  -0.1193307f, -0.3076406f, -0.1297146f, -0.1503762f, +0.1055907f, -0.0208457f, +0.2585915f, -0.2821167f,
  -0.1020206f, -0.1070347f, -0.0048944f, -0.1532975f, +0.0159647f, +0.2514009f, +0.4221315f, -0.1522302f,
  +0.1219126f, -0.1372811f, -0.2170210f, -0.3577367f, -0.0960378f, -0.0894892f, +0.0715427f, -0.0789028f,
  -0.1533244f, -0.2190104f, -0.6252906f, -0.2412630f, +0.1815557f, +0.0502861f, -0.2402317f, +0.1301128f,
  +0.0036519f, +0.1574676f, -0.3209598f, +0.0247706f, -0.1680420f, +0.1103190f, +0.0962575f, -0.1355024f,
  +0.0620055f, -0.1575937f, +0.0887791f, +0.1331213f, -0.0255274f, -0.1702193f, -0.1369381f, +0.0656204f,
  +0.0876486f, +0.0165604f, -0.3587329f, -0.0424266f, +0.0042286f, +0.1771118f, +0.0030914f, -0.2799518f,
  +0.0309668f, +0.1547581f, +0.0090342f, -0.0295897f, +0.2386116f, +0.1138866f, +0.1671100f, -0.2961042f
);

const float biases[4] = float[4](
  -0.0024506f, +0.0238503f, -0.0006237f, +0.0446675f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer44 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1651610f, +0.1856331f, -0.1745556f, +0.2233161f, +0.0354001f, -0.0078016f, -0.1748807f, -0.0147513f,
  -0.1167103f, -0.1067574f, -0.3197089f, +0.2343594f, +0.1262567f, +0.0811712f, -0.3399957f, +0.1703541f,
  -0.0673232f, -0.0332697f, -0.0622493f, -0.0684057f, +0.2076335f, -0.0621423f, +0.2790587f, +0.0335812f,
  +0.1694643f, +0.0275547f, -0.2480906f, +0.1615524f, -0.3837600f, -0.1243253f, +0.2773486f, -0.0201980f,
  -0.0621892f, +0.1851874f, -0.7349414f, -0.1048573f, -0.1221438f, -0.1100886f, +0.1095632f, +0.2379207f,
  +0.1241506f, +0.1563175f, -0.1054396f, -0.2535760f, +0.1422555f, +0.3688748f, -0.0594730f, +0.0867702f,
  -0.0566989f, +0.1530478f, -0.0300497f, -0.2813045f, -0.2717969f, +0.1892759f, -0.0339637f, -0.2069665f,
  -0.1658992f, -0.1694097f, -0.2018728f, -0.1486523f, -0.0867897f, -0.0824598f, -0.0714734f, +0.1051880f,
  -0.1872924f, +0.0060261f, -0.0578446f, +0.0268739f, -0.0606612f, +0.0334214f, +0.0670644f, +0.1100766f,
  -0.2950144f, -0.2254744f, -0.1825900f, +0.0455287f, +0.1318683f, +0.1939657f, -0.2084367f, +0.0210272f,
  -0.0346641f, +0.1523879f, -0.1291708f, +0.0013749f, -0.0240309f, -0.1823932f, +0.4071606f, +0.0565996f,
  +0.2162999f, +0.0555560f, -0.0638215f, +0.1532609f, +0.0962215f, -0.1576396f, -0.0548866f, -0.0296165f,
  -0.4939715f, -0.2008940f, +0.2924380f, -0.0819952f, +0.1947584f, +0.0552838f, -0.0106972f, -0.0576797f,
  +0.0739765f, +0.0323823f, +0.1188957f, -0.2285989f, +0.2537589f, +0.0410849f, -0.1235458f, -0.1546698f,
  +0.2356644f, -0.1192520f, -0.1751299f, +0.0956578f, +0.1272649f, +0.0534877f, +0.0861578f, -0.1016728f,
  -0.4096897f, -0.0832741f, -0.1811990f, +0.1171031f, -0.0254132f, +0.0136934f, +0.0257929f, +0.4676358f,
  -0.0987927f, +0.0781336f, -0.4577272f, +0.0033438f, -0.0413319f, +0.0592287f, +0.0659524f, +0.2091797f,
  +0.0223364f, -0.1530490f, -0.2200677f, +0.1529994f, +0.0094728f, -0.1652028f, +0.0843929f, +0.0296351f,
  -0.0277118f, -0.0396795f, -0.0275117f, -0.0866977f, -0.1554975f, +0.3019375f, +0.0580589f, +0.0467038f,
  +0.0127377f, +0.0381186f, -0.0552057f, -0.1832141f, +0.0475102f, +0.0938533f, +0.1382637f, -0.0351568f,
  -0.0044366f, +0.3184732f, -0.0872293f, +0.0593289f, +0.0451569f, +0.0502214f, +0.2885899f, -0.0200289f,
  -0.1643892f, -0.0690013f, +0.0749801f, -0.0275390f, +0.0375926f, +0.3452193f, +0.1164053f, -0.1366726f,
  +0.1541065f, -0.1534749f, +0.2637381f, -0.0287049f, +0.2942803f, -0.0117224f, -0.0179200f, +0.0969273f,
  -0.2267996f, -0.2064607f, -0.1532602f, -0.0167853f, -0.0613553f, -0.0263628f, -0.2388888f, +0.0380234f,
  -0.2547144f, +0.1555858f, -0.2923790f, +0.2939286f, -0.1266797f, -0.0147151f, -0.1361632f, +0.0035538f,
  +0.0188275f, +0.0865565f, -0.0843225f, -0.1727523f, +0.0829142f, -0.0965406f, +0.3095160f, -0.1036723f,
  -0.1202961f, -0.0703237f, +0.0275146f, -0.0140191f, +0.1441619f, +0.0237250f, +0.0819505f, +0.1942808f,
  -0.0880398f, -0.2001837f, -0.2269826f, -0.0835054f, -0.0567597f, -0.0768753f, -0.2600955f, +0.0868804f,
  +0.2739074f, -0.0539443f, -0.0093688f, -0.1723870f, -0.2766219f, +0.0129616f, +0.0505016f, +0.1157611f,
  -0.2094781f, +0.1108762f, -0.2820177f, +0.1735237f, -0.0015615f, +0.0097647f, +0.1545595f, +0.0035694f,
  +0.2008845f, -0.0972720f, -0.1782438f, -0.0015088f, +0.3350284f, -0.0061678f, +0.0623128f, +0.0628394f,
  +0.0517091f, -0.3929798f, -0.1812208f, +0.1689140f, -0.0039377f, -0.1335384f, -0.0841941f, -0.0365347f,
  +0.1412635f, +0.0252210f, -0.1131631f, +0.1642890f, +0.0744282f, -0.0460885f, +0.0854409f, -0.1340742f,
  +0.3131222f, -0.2356427f, -0.2005769f, +0.0903314f, -0.0356229f, +0.2288892f, +0.0365586f, -0.1356323f,
  +0.1749946f, -0.0973290f, -0.1177712f, +0.0611884f, -0.1646303f, +0.3072465f, +0.0654281f, +0.1541188f,
  +0.0777023f, +0.1230391f, -0.1226293f, -0.1181818f, -0.2004395f, -0.2919692f, +0.0919547f, -0.2105659f
);

const float biases[4] = float[4](
  -0.0026610f, -0.0342438f, -0.0373712f, +0.0308116f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer45 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0280820f, +0.0318009f, +0.0869680f, +0.1702065f, +0.1769852f, -0.0684952f, -0.0676751f, -0.0003237f,
  -0.0904588f, -0.1180577f, -0.0951856f, -0.2096667f, -0.1229188f, -0.1150558f, -0.0182079f, +0.0738414f,
  -0.0341923f, -0.0073117f, +0.2285834f, -0.1078714f, +0.1481908f, -0.0456121f, +0.1760285f, +0.2815669f,
  -0.0102665f, -0.0193921f, +0.0060180f, -0.0905640f, -0.0694058f, -0.1523536f, +0.0663809f, -0.0468872f,
  +0.0013241f, +0.3479508f, -0.0684386f, -0.1914840f, -0.1531257f, -0.1028865f, -0.0814349f, +0.0342322f,
  +0.0370219f, +0.1725937f, +0.1475520f, -0.0674866f, +0.4277109f, -0.0978560f, -0.1603281f, +0.0749019f,
  +0.1078911f, -0.1942241f, +0.1413732f, +0.0918943f, +0.1227240f, -0.0237773f, +0.1666339f, +0.2100567f,
  +0.0344898f, +0.0913803f, -0.1105239f, -0.0323572f, +0.0383572f, -0.3066823f, -0.1339566f, +0.0014372f,
  -0.0223747f, +0.1937836f, +0.0775243f, +0.0631735f, +0.1979060f, +0.3127416f, -0.2432319f, -0.0524512f,
  +0.0405249f, -0.1367925f, -0.1169408f, +0.1259096f, -0.1185709f, +0.0897508f, -0.0465105f, -0.1344033f,
  -0.1589807f, +0.0870502f, +0.1659702f, -0.4338310f, +0.0340227f, -0.0886242f, +0.2044419f, -0.3552583f,
  -0.0431236f, +0.1742088f, +0.0202956f, +0.1156545f, +0.1120859f, -0.2029008f, -0.1569457f, -0.2654379f,
  +0.0452315f, -0.1225184f, -0.0497123f, +0.0238699f, +0.1756530f, -0.0205973f, -0.0608160f, -0.3712090f,
  +0.0552441f, +0.0239227f, +0.0555821f, -0.4360101f, -0.1395499f, +0.3274443f, +0.2273823f, +0.0807098f,
  -0.1572256f, +0.0937585f, +0.0077839f, +0.0564146f, +0.1328838f, -0.0250670f, -0.1435731f, -0.2095909f,
  -0.0742430f, +0.0469915f, -0.0312495f, -0.0759299f, -0.2618225f, +0.0626010f, -0.3352044f, -0.1080620f,
  +0.1445832f, -0.1300358f, +0.0812350f, +0.3372691f, +0.3587814f, +0.0812256f, -0.0742040f, -0.0270505f,
  -0.1085292f, -0.1949124f, +0.0195887f, +0.1510407f, -0.2661871f, -0.0336743f, +0.2430472f, -0.1326016f,
  -0.1132466f, -0.0651021f, +0.0609247f, -0.0659562f, +0.1137734f, +0.1080144f, +0.0491238f, +0.1727292f,
  -0.0848113f, +0.2179141f, -0.0853722f, -0.0076048f, +0.0722457f, -0.1167589f, +0.1571101f, +0.4034838f,
  -0.2198076f, +0.0329156f, +0.2087768f, -0.0975196f, +0.0696520f, -0.0004183f, +0.0989617f, +0.2104214f,
  +0.0711456f, +0.1046998f, -0.0843740f, +0.0749822f, +0.0799361f, +0.0131585f, -0.1326693f, +0.0227376f,
  +0.0767519f, -0.1813138f, +0.0367247f, +0.0138039f, +0.0253355f, -0.1682382f, -0.1574336f, +0.1396704f,
  -0.0356417f, +0.1961547f, -0.1347814f, -0.0219258f, -0.0309294f, +0.0801845f, +0.0364508f, +0.2003888f,
  -0.0273917f, +0.0831802f, -0.2506732f, -0.0994511f, +0.1269675f, -0.1390295f, +0.1878082f, +0.3533557f,
  +0.0477254f, -0.0683271f, +0.1182419f, +0.2173590f, +0.3485155f, -0.1332384f, +0.0227612f, +0.0577206f,
  +0.1251489f, +0.1901244f, -0.1905112f, +0.1481564f, +0.2812368f, +0.0283598f, -0.1718349f, -0.0486770f,
  -0.3856604f, -0.3527383f, -0.1479938f, -0.1778025f, +0.0522622f, -0.1723040f, -0.2796110f, +0.1209396f,
  +0.2246605f, -0.0179546f, +0.0598305f, +0.1268055f, -0.1335355f, -0.1503358f, +0.0107680f, -0.0934275f,
  +0.4997913f, -0.3923744f, +0.0136581f, +0.0900641f, -0.1262688f, -0.0777363f, -0.1075449f, -0.2234438f,
  +0.0708431f, +0.0691677f, +0.0286089f, +0.1125243f, -0.3963585f, -0.1714547f, +0.0621827f, -0.2369285f,
  -0.2057658f, -0.2998921f, -0.4967546f, +0.0478412f, -0.0615074f, -0.2679240f, +0.3501358f, -0.0105134f,
  -0.0067402f, +0.0272260f, +0.0922014f, -0.1159325f, -0.0116333f, -0.1391773f, +0.3425612f, -0.0246399f,
  -0.0501667f, +0.0624511f, -0.1132845f, -0.1603731f, -0.0820696f, -0.2129924f, +0.1271754f, -0.0706385f,
  +0.0809056f, -0.0789098f, +0.2153440f, +0.1260485f, -0.3490141f, -0.1341331f, +0.0212822f, -0.1644494f,
  -0.1150188f, -0.0429934f, -0.0854641f, -0.1582291f, -0.1470264f, -0.0196298f, -0.2051587f, -0.0558234f
);

const float biases[4] = float[4](
  +0.0044724f, +0.0240127f, -0.0063111f, +0.0294287f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer45 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1761191f, +0.0874943f, -0.0685866f, -0.2047952f, -0.1738696f, -0.0475306f, +0.1377085f, -0.0079619f,
  -0.0684859f, -0.3415231f, +0.0022880f, +0.0589876f, +0.0184632f, -0.1024176f, -0.0186210f, -0.0441716f,
  +0.0404350f, -0.0530757f, +0.0830371f, +0.0667389f, -0.0503335f, +0.1906095f, +0.0816720f, +0.1438213f,
  -0.0091385f, -0.0100014f, +0.1413311f, -0.0348631f, -0.0922354f, -0.0305982f, -0.1604777f, +0.1125369f,
  -0.2504181f, -0.2950433f, -0.3662833f, +0.0212221f, +0.4253524f, +0.1411658f, -0.1792173f, +0.0827195f,
  -0.1922953f, +0.2988520f, -0.1589028f, -0.1175785f, +0.1094085f, -0.0965214f, -0.0907818f, +0.0173843f,
  +0.0119320f, +0.0257273f, -0.0730654f, -0.2126635f, +0.0914679f, +0.0030946f, -0.0481175f, -0.0777147f,
  +0.2988485f, -0.1982554f, -0.0347150f, +0.0912505f, +0.1273670f, +0.1001973f, +0.1920277f, -0.3475451f,
  +0.0520425f, -0.2370058f, +0.0759453f, -0.0552314f, -0.0036768f, -0.0096307f, -0.1505727f, +0.0180517f,
  +0.0187593f, +0.0283467f, +0.1861588f, +0.0031653f, -0.1443790f, -0.1739718f, -0.1080134f, -0.1086429f,
  -0.0521354f, +0.1264712f, -0.2073788f, +0.0352400f, -0.1348540f, -0.0060127f, -0.2495580f, -0.2628613f,
  -0.1226870f, -0.0417662f, -0.1065954f, -0.1029232f, -0.4341486f, -0.0558136f, -0.1941728f, -0.3975972f,
  +0.0370321f, -0.0105286f, -0.0231171f, -0.1166731f, +0.1316003f, -0.1147124f, +0.1886004f, -0.0721744f,
  -0.2567262f, +0.2161481f, -0.0905761f, -0.0068370f, -0.0492563f, -0.1071224f, -0.0147507f, -0.0075690f,
  -0.0303423f, -0.0786062f, +0.2625979f, -0.3771981f, -0.1650006f, -0.3076110f, -0.0855672f, -0.1441801f,
  +0.3204221f, -0.3153161f, -0.0306953f, +0.0012002f, -0.0114400f, +0.1272012f, +0.0970065f, -0.1017195f,
  -0.0220024f, -0.1763855f, -0.0001681f, +0.0521965f, -0.0847751f, +0.0208014f, -0.2208112f, +0.0832614f,
  -0.0750227f, +0.2151012f, -0.1202515f, +0.1888268f, -0.2187132f, -0.1311528f, +0.0833657f, -0.2249531f,
  +0.0765957f, -0.1596430f, +0.1433819f, -0.0696062f, +0.1430774f, +0.1797414f, +0.2750802f, +0.2238601f,
  -0.1241810f, -0.0196905f, +0.2150788f, +0.1261531f, -0.3067592f, -0.0946977f, -0.0115965f, -0.0165291f,
  +0.0440641f, -0.1640102f, -0.0093612f, +0.0379861f, -0.1227918f, +0.1829482f, -0.0442008f, +0.0023516f,
  -0.0172791f, +0.1372323f, -0.1139853f, -0.1772329f, -0.2139041f, -0.0863993f, -0.2068956f, +0.0059925f,
  +0.0345643f, +0.0992297f, -0.1905570f, +0.0479028f, +0.2211158f, -0.0551065f, -0.1177690f, +0.5535152f,
  -0.1492821f, +0.1849303f, +0.2303330f, +0.0173227f, +0.0065469f, -0.0961626f, -0.0864231f, +0.0076237f,
  +0.1745062f, +0.1527380f, -0.0752074f, +0.2788352f, +0.2017006f, -0.0442467f, -0.0881092f, +0.0760803f,
  -0.1149726f, +0.0291072f, +0.1331083f, +0.1725659f, +0.4446672f, +0.0079787f, +0.1294818f, -0.0257164f,
  +0.1254834f, -0.0716210f, -0.0083084f, +0.2988421f, +0.1029928f, -0.0041001f, +0.0854938f, +0.0273035f,
  +0.0407807f, +0.1530194f, -0.1998570f, -0.0064683f, +0.0038556f, +0.0032414f, -0.0515519f, +0.2375098f,
  -0.0731386f, -0.0205010f, -0.2364598f, -0.0720058f, +0.0469811f, -0.0880499f, +0.0830480f, +0.0344271f,
  -0.0273171f, +0.0665328f, -0.1015172f, +0.0179788f, +0.0412045f, -0.1065837f, -0.0278017f, +0.2892567f,
  +0.0912682f, -0.2674728f, -0.0372545f, +0.3208859f, +0.1556396f, -0.0300230f, -0.0463091f, -0.1440539f,
  +0.2257190f, +0.2851955f, +0.0426891f, +0.1761694f, +0.0172288f, -0.2929086f, -0.0058582f, +0.4038579f,
  +0.0756775f, +0.1247553f, -0.0158999f, -0.0511011f, +0.0724004f, -0.0736169f, -0.1408845f, +0.1862353f,
  -0.2446686f, +0.0619818f, +0.2327620f, +0.0014431f, -0.1031419f, +0.0316979f, -0.2039897f, -0.0845543f,
  +0.0981550f, -0.0769019f, +0.1684522f, -0.0609591f, -0.0797952f, +0.1235961f, +0.2343332f, +0.0757838f,
  -0.0640959f, +0.1064054f, -0.0736263f, -0.2771606f, -0.1442666f, +0.0245908f, -0.2658965f, +0.1005513f
);

const float biases[4] = float[4](
  -0.4087528f, -0.1026764f, -0.0020989f, -0.0194491f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer46 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1133197f, -0.0951380f, +0.0226589f, -0.0464597f, -0.0158181f, -0.1044043f, -0.1264651f, -0.1703504f,
  +0.0056182f, -0.2280802f, +0.0497187f, -0.0250376f, -0.3636926f, -0.2942128f, +0.1724144f, -0.1315761f,
  -0.1500807f, +0.0650958f, +0.1626581f, -0.2345683f, -0.1500019f, -0.0592859f, +0.0653302f, +0.2130225f,
  -0.2672952f, +0.2670667f, -0.0926874f, -0.1019693f, +0.2304432f, -0.1739736f, +0.3254902f, +0.0023057f,
  +0.0083950f, -0.1746915f, -0.2655318f, -0.2876278f, -0.0616120f, +0.1068308f, -0.0675466f, -0.1522712f,
  +0.1130169f, -0.3390216f, -0.1038768f, -0.0544211f, -0.0125682f, +0.1296004f, -0.2697365f, -0.1928929f,
  +0.0793652f, +0.3232206f, +0.2737507f, -0.3084195f, +0.1346434f, +0.0503480f, -0.0457934f, +0.1253555f,
  -0.0733687f, -0.1337293f, +0.1138542f, +0.0524025f, -0.0850377f, +0.0106687f, +0.2074656f, +0.2166577f,
  -0.0480082f, -0.1824248f, +0.0664779f, -0.2249635f, +0.0127593f, -0.2562570f, -0.1955369f, -0.0103792f,
  +0.0575423f, +0.0652655f, +0.0051956f, -0.1223524f, +0.0680273f, -0.1579759f, +0.0516554f, -0.0131933f,
  +0.0453096f, +0.1994449f, +0.2213423f, -0.0434587f, +0.3487815f, -0.0240769f, -0.0447092f, +0.1501681f,
  +0.1278340f, -0.1108704f, +0.0053573f, -0.2602792f, +0.3189578f, -0.0483933f, -0.1947289f, +0.0344998f,
  +0.0663584f, +0.0956851f, -0.0823883f, -0.0898071f, -0.2230418f, -0.0448951f, +0.1119408f, +0.0026790f,
  +0.0841577f, +0.1994110f, +0.0980448f, -0.3104587f, +0.2786472f, -0.2461158f, -0.2093120f, -0.1953313f,
  -0.1013039f, +0.0710329f, +0.1373297f, -0.0284200f, -0.1212738f, +0.1241542f, +0.0108396f, +0.3350177f,
  +0.0382775f, -0.2849758f, -0.0765695f, +0.0133537f, +0.0652326f, +0.0518594f, -0.0372751f, -0.0716313f,
  -0.2669095f, +0.0512263f, +0.0600042f, +0.2669258f, -0.0426168f, +0.0256883f, -0.2413608f, +0.0000940f,
  +0.2286903f, +0.2617427f, +0.0251305f, +0.0516215f, +0.0434734f, -0.0511702f, +0.1237257f, -0.0876816f,
  -0.1427158f, -0.2118737f, +0.1940511f, +0.2331093f, -0.0458463f, -0.0290387f, +0.0503874f, +0.1293087f,
  +0.2933927f, -0.2469736f, -0.0871452f, -0.2568281f, +0.0990178f, +0.3579752f, -0.3082503f, +0.1713332f,
  -0.1121140f, -0.0787250f, -0.0566622f, +0.0353045f, +0.0455058f, +0.3661709f, -0.0463686f, -0.1989795f,
  -0.2889619f, -0.2708745f, -0.1161989f, -0.0511005f, -0.1994868f, -0.1856689f, +0.0354586f, -0.1992687f,
  +0.1502765f, -0.3986217f, +0.1231412f, -0.1560442f, -0.0065585f, +0.0714924f, +0.2273549f, +0.1084470f,
  -0.0798625f, -0.0177669f, +0.1003384f, -0.0466203f, +0.0196474f, +0.2858232f, +0.1242532f, -0.0935440f,
  -0.1674328f, -0.3193207f, -0.1337877f, -0.3452441f, -0.0345999f, -0.0033494f, +0.1453422f, -0.0170091f,
  +0.0791589f, +0.2497458f, -0.0080372f, +0.1000780f, -0.3141577f, -0.0566868f, -0.0320704f, -0.1378293f,
  -0.0026140f, -0.3173886f, -0.0506856f, +0.2065966f, +0.2138795f, -0.0624405f, -0.1562331f, -0.4503630f,
  +0.1266311f, -0.0045007f, +0.1144722f, -0.4566700f, +0.0304811f, +0.0148641f, -0.0016998f, +0.0695981f,
  -0.1544750f, -0.1356113f, +0.0398701f, -0.0050951f, +0.0216354f, -0.1090273f, +0.1492232f, -0.3080623f,
  -0.1579762f, -0.0272200f, +0.1419276f, -0.1233600f, +0.2688616f, -0.2009553f, -0.1580225f, +0.0338739f,
  +0.1830267f, +0.0372402f, +0.1905961f, -0.1251844f, +0.1249863f, +0.1346337f, +0.1876991f, -0.0809171f,
  -0.1376487f, +0.2492523f, +0.0906227f, -0.4099694f, +0.5739027f, +0.0259881f, -0.0981942f, -0.3279912f,
  +0.0727935f, +0.2046638f, +0.1724388f, -0.1011484f, +0.1352020f, -0.0392871f, +0.0324449f, +0.0169895f,
  +0.0436693f, +0.1049096f, -0.0027095f, -0.2804549f, -0.1142266f, +0.2547320f, +0.1088112f, +0.1793780f,
  +0.1531638f, +0.1697970f, -0.0767355f, -0.1150832f, +0.0216581f, -0.1216783f, +0.0156836f, +0.0408970f,
  +0.1127101f, -0.1948287f, -0.0320172f, -0.2704844f, +0.1415724f, +0.2973634f, -0.0730471f, -0.0390379f
);

const float biases[4] = float[4](
  -0.0192620f, -0.0046709f, +0.0179204f, -0.0221193f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer46 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3592547f, +0.1013118f, +0.0524811f, -0.0105718f, -0.4132411f, -0.1757984f, +0.1057964f, -0.1508469f,
  +0.1003642f, +0.1222401f, -0.1157774f, +0.0940943f, -0.3554387f, +0.1461659f, +0.0438380f, +0.0172444f,
  -0.1825456f, +0.0209903f, -0.1864363f, -0.2614610f, +0.0330130f, +0.0135398f, -0.1939178f, +0.1496714f,
  -0.0633511f, -0.1609152f, +0.0916310f, +0.0255149f, +0.0252762f, +0.0188563f, -0.0990692f, -0.1096038f,
  -0.0990125f, +0.1759551f, +0.3036747f, -0.1463923f, -0.3121378f, -0.1627899f, -0.1439397f, +0.1746647f,
  +0.0645282f, -0.2856005f, +0.3444503f, +0.0156668f, -0.2171368f, +0.2529148f, -0.1027950f, -0.2723491f,
  -0.0584272f, -0.1795230f, +0.0436205f, +0.0809473f, +0.1754881f, +0.0566597f, +0.0254704f, +0.0018780f,
  +0.0484481f, +0.1399809f, -0.0185654f, -0.0031440f, -0.1467234f, -0.1161451f, -0.1229226f, -0.0226439f,
  -0.2214501f, -0.1371123f, -0.0580582f, +0.0041897f, +0.0829233f, +0.1296239f, -0.1790202f, -0.0059608f,
  -0.1894849f, +0.1707706f, +0.0733758f, -0.1441410f, +0.1651720f, -0.1071829f, +0.1312237f, +0.0079293f,
  +0.1652514f, +0.1231239f, -0.2273273f, -0.0520095f, -0.0356617f, -0.2518477f, +0.0082410f, -0.1129384f,
  -0.1536944f, +0.0417067f, +0.0949577f, -0.1640621f, -0.1888546f, -0.0591733f, +0.2363323f, -0.1497329f,
  +0.0230970f, -0.1761694f, +0.2348370f, -0.1160261f, +0.1482603f, +0.0570111f, -0.0671469f, +0.1390817f,
  -0.0272627f, +0.1499861f, +0.2245195f, +0.0655754f, +0.1848665f, +0.1578293f, +0.0666575f, +0.0761161f,
  +0.2377735f, +0.4139754f, +0.3478465f, +0.0430453f, +0.0279928f, -0.0970326f, +0.0408542f, +0.2680899f,
  -0.2113457f, +0.3935887f, +0.1792714f, +0.2723006f, +0.1350435f, -0.0705342f, +0.0418440f, -0.1247584f,
  +0.2602174f, +0.1555104f, +0.0207994f, -0.0129468f, -0.1745826f, -0.0187474f, +0.2157063f, +0.1149677f,
  -0.0540175f, +0.3626098f, +0.0363429f, -0.2066173f, +0.0728464f, -0.2672176f, +0.0700151f, +0.1524183f,
  -0.0805653f, -0.3160738f, +0.1461145f, +0.1503602f, +0.1662898f, -0.0305923f, +0.0308065f, +0.1298331f,
  -0.0795332f, +0.0625024f, -0.0916649f, +0.2362519f, +0.0564353f, -0.0030769f, +0.0330822f, -0.1025578f,
  -0.1966391f, -0.1439006f, -0.1944072f, +0.0520809f, -0.0580095f, -0.1504991f, +0.1330606f, +0.1357159f,
  -0.1205405f, -0.1416042f, +0.1509531f, +0.1616221f, -0.0749724f, -0.0175403f, -0.2752148f, +0.0256740f,
  -0.3489902f, -0.4051342f, -0.1552993f, -0.0509446f, -0.0121229f, -0.2025916f, +0.0707226f, -0.1547294f,
  -0.0106721f, -0.1169237f, +0.1880673f, +0.5914943f, -0.1228045f, +0.1262438f, +0.0328423f, -0.0268914f,
  +0.0621445f, +0.1754371f, +0.0708797f, +0.0777873f, -0.2737618f, +0.2480122f, +0.1541852f, +0.0974278f,
  +0.1888914f, +0.0451398f, -0.0295749f, +0.1896819f, +0.2343567f, +0.1633111f, +0.1368966f, -0.2671269f,
  -0.0412757f, -0.0010200f, -0.0149906f, -0.0361794f, -0.2810493f, +0.0092561f, -0.1614437f, -0.0031239f,
  +0.0830198f, +0.2410614f, +0.2484277f, -0.1450675f, +0.1352534f, -0.1865621f, -0.1028157f, +0.0868988f,
  -0.2438516f, -0.2295818f, -0.0719728f, -0.0114885f, +0.5515095f, +0.3031074f, -0.1947072f, +0.1854042f,
  -0.1992087f, -0.2270983f, +0.0434442f, -0.2554169f, +0.2049318f, -0.3448013f, -0.0599680f, -0.1633130f,
  -0.2166354f, -0.1426907f, -0.1567010f, -0.0346794f, -0.3363623f, +0.1084017f, +0.0021680f, +0.0002206f,
  +0.0062460f, -0.4570838f, +0.0685205f, -0.2755225f, -0.1272409f, -0.0321753f, -0.1163168f, -0.2204371f,
  -0.0591833f, -0.1013069f, +0.0975203f, -0.1688479f, -0.2357158f, -0.0705024f, -0.0587602f, +0.1166478f,
  -0.1790956f, +0.0683858f, -0.1058222f, +0.2215433f, +0.1213305f, -0.1271546f, +0.0433414f, +0.0160155f,
  +0.0292526f, -0.0423414f, -0.0789244f, +0.0194495f, +0.1108796f, +0.1732190f, -0.0211475f, -0.1488721f,
  -0.1429158f, +0.0563638f, +0.0524069f, -0.1655199f, -0.1016761f, -0.3951005f, -0.1353459f, -0.0426148f
);

const float biases[4] = float[4](
  +0.0192265f, +0.0204297f, -0.0296241f, -0.0115434f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer47 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0563469f, -0.0667046f, -0.0457626f, -0.0877891f, +0.1906203f, -0.0919209f, +0.2035206f, +0.2003405f,
  -0.0354427f, +0.0107819f, -0.2350066f, -0.1558706f, -0.1506570f, -0.4012787f, +0.1476620f, -0.2046936f,
  +0.0809706f, -0.1766319f, -0.0842560f, -0.0332052f, -0.3308804f, -0.0410824f, -0.2673773f, -0.1072029f,
  -0.2396718f, -0.2270193f, -0.0635548f, -0.2000315f, -0.1655502f, +0.0009636f, +0.2817920f, +0.4177727f,
  -0.0022761f, -0.2234516f, +0.3109465f, +0.2685969f, -0.2995933f, +0.2160068f, +0.1869899f, -0.3306517f,
  +0.1645951f, +0.0469293f, -0.1403700f, -0.1768373f, +0.0906403f, -0.1777005f, -0.1356903f, -0.3914100f,
  -0.1310509f, -0.1258987f, -0.0873400f, +0.3170363f, +0.0473660f, -0.0907845f, -0.1008347f, -0.0094782f,
  +0.0076907f, +0.0624692f, -0.0761951f, +0.3357558f, -0.1763040f, +0.0690633f, +0.3532662f, -0.0312972f,
  -0.0661716f, -0.0082625f, -0.1141769f, +0.0405045f, -0.0004658f, -0.1102270f, +0.1632163f, -0.0825310f,
  -0.0555870f, +0.0850101f, -0.0840487f, -0.3807286f, +0.1032849f, +0.0018496f, +0.0828756f, -0.1606099f,
  -0.1639526f, +0.0443561f, +0.0194191f, -0.0839698f, -0.2108017f, -0.0978346f, +0.1173436f, -0.3358247f,
  -0.0797874f, +0.0194021f, -0.2792129f, +0.0191187f, +0.0290351f, +0.2031278f, +0.1157897f, +0.0735437f,
  +0.4153113f, +0.0283944f, -0.4341046f, -0.4425630f, +0.0979292f, -0.2093507f, -0.0168132f, -0.1837922f,
  -0.3154216f, -0.3455475f, +0.5199763f, +0.1085668f, +0.4757243f, -0.3379858f, -0.0701826f, -0.0094561f,
  -0.0820365f, +0.0929357f, -0.3187729f, -0.0277223f, -0.2731744f, +0.3391407f, -0.0259700f, +0.2641927f,
  +0.0789059f, +0.0028161f, +0.0998624f, -0.0789586f, -0.0197304f, -0.1377804f, +0.0155908f, -0.1011243f,
  -0.0875328f, -0.1329370f, -0.0061967f, -0.0503606f, +0.0707572f, +0.1232959f, +0.0074467f, -0.2034658f,
  +0.0291034f, +0.1008668f, +0.2241123f, +0.1561606f, -0.0445421f, +0.0089168f, -0.0063989f, +0.0855583f,
  -0.0164394f, -0.1807632f, -0.0422956f, +0.0060950f, -0.1765990f, -0.2763018f, -0.2234205f, +0.3566572f,
  +0.0084002f, +0.2981866f, -0.0202488f, +0.5053765f, +0.3130546f, -0.1990599f, +0.1466250f, +0.4187574f,
  +0.1674273f, +0.0908696f, -0.1780938f, -0.1617908f, +0.0886039f, -0.2232904f, +0.1080938f, -0.0154231f,
  +0.4121865f, -0.0947302f, -0.0480741f, +0.1295441f, -0.1767292f, -0.2743495f, +0.2750044f, -0.2227302f,
  -0.2756940f, -0.1187988f, -0.1849099f, +0.2616569f, +0.0453625f, -0.3467400f, +0.0945170f, -0.1237682f,
  +0.0084668f, -0.1262953f, +0.1607138f, +0.0374142f, +0.1029861f, +0.1653848f, +0.0425031f, -0.0499909f,
  -0.2532908f, +0.1529518f, -0.4211527f, -0.0834624f, +0.0696061f, -0.2880168f, -0.1008223f, -0.1262572f,
  +0.2559935f, -0.4314132f, -0.0452277f, +0.0579559f, +0.0460305f, +0.2184072f, -0.2021313f, -0.1541688f,
  -0.0310954f, -0.1051956f, +0.1005962f, +0.1264579f, +0.0895558f, -0.3231832f, -0.0582096f, -0.3227882f,
  +0.0438104f, -0.2157892f, +0.2174884f, +0.1120445f, +0.0265831f, +0.3891474f, -0.1785465f, +0.1028173f,
  +0.1768206f, -0.1913519f, +0.2902431f, +0.1190433f, -0.1007792f, -0.0555840f, +0.1381833f, +0.1434164f,
  -0.0082802f, +0.0582873f, +0.1826129f, -0.0560907f, +0.0676319f, +0.0437363f, +0.0094445f, -0.0871311f,
  -0.2193697f, +0.0667949f, +0.0861000f, +0.0736811f, -0.2160396f, +0.3438934f, -0.3084508f, -0.0186765f,
  -0.4682128f, -0.1317582f, -0.4667582f, -0.1081374f, -0.0493617f, -0.0154604f, -0.0086224f, -0.1468036f,
  -0.1254797f, +0.0788958f, -0.1976391f, +0.1934174f, +0.1115632f, +0.1598985f, -0.0767649f, +0.0328847f,
  +0.1267763f, +0.3905929f, +0.0193130f, +0.4420881f, +0.2737523f, +0.1348956f, +0.2120412f, -0.1064330f,
  +0.2487131f, +0.4156400f, -0.1791233f, +0.4300780f, -0.0080195f, +0.1612371f, -0.1885691f, -0.3485180f,
  -0.0407576f, +0.0355073f, -0.0631268f, +0.0233535f, -0.0645606f, -0.1677528f, +0.0376206f, +0.0154013f
);

const float biases[4] = float[4](
  +0.0176177f, -0.0211180f, -0.0445426f, +0.0054231f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer47 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1124415f, -0.1703102f, -0.1854094f, +0.0515234f, -0.1079118f, -0.3050996f, +0.0092016f, -0.0409621f,
  +0.2647739f, +0.2112959f, +0.0951560f, +0.0957897f, +0.1695260f, +0.1062772f, +0.0904439f, -0.0227593f,
  +0.1017415f, -0.0782076f, -0.1521084f, -0.0048956f, -0.0668383f, +0.0142452f, -0.1865246f, -0.0633488f,
  -0.1721423f, -0.1466308f, -0.2550031f, +0.5362775f, -0.1094981f, -0.1343973f, -0.1294458f, +0.2628958f,
  +0.1982253f, +0.0336932f, -0.0274017f, -0.1573235f, +0.1461265f, +0.2009872f, -0.0078167f, +0.2235681f,
  -0.2033705f, +0.1224600f, +0.1324957f, +0.0601216f, -0.1231771f, -0.1457958f, -0.0346404f, -0.3553915f,
  -0.1581187f, -0.1330655f, -0.2098864f, +0.6000643f, +0.1301266f, -0.2967161f, +0.0767165f, -0.2245624f,
  +0.1007624f, +0.0032375f, +0.0928845f, -0.0616122f, +0.1706150f, +0.0549044f, +0.1432859f, -0.1455719f,
  -0.2445125f, -0.0648351f, +0.1818188f, -0.1576390f, -0.1201268f, -0.0866441f, +0.2713094f, -0.0423159f,
  -0.0382576f, +0.0122220f, +0.0707736f, +0.1694314f, -0.0626880f, -0.0384390f, -0.1810863f, +0.0915011f,
  +0.0022883f, -0.1664718f, +0.0764485f, +0.2387915f, -0.0975760f, -0.0133257f, -0.1471913f, +0.1974383f,
  -0.1101061f, +0.2317805f, +0.0566329f, +0.1844778f, +0.1799114f, +0.2114018f, -0.2405662f, +0.1758212f,
  -0.0505090f, +0.1420987f, -0.1308866f, -0.0693408f, +0.0662225f, -0.1642754f, +0.1052181f, -0.0051301f,
  -0.0616522f, -0.0868708f, -0.2308292f, -0.1132144f, +0.0538340f, +0.0528238f, -0.1716491f, -0.1992237f,
  -0.1023100f, -0.1983144f, +0.0332072f, -0.1055213f, -0.0886795f, +0.3839129f, +0.1651103f, +0.2313788f,
  +0.0344551f, +0.0977681f, -0.0581658f, +0.2116169f, +0.0710189f, +0.0685957f, +0.0219532f, +0.0182739f,
  +0.0787795f, +0.0892091f, +0.0870644f, +0.0775215f, +0.2952987f, +0.1535949f, -0.0967586f, +0.0376571f,
  -0.0621490f, +0.0432815f, +0.0566959f, -0.2428260f, -0.0479288f, -0.0912013f, -0.0119800f, +0.1773585f,
  +0.0328493f, -0.0577970f, -0.0470542f, +0.2693247f, +0.1266228f, +0.1293914f, -0.0025694f, +0.0260607f,
  +0.1690480f, -0.0982214f, +0.1578611f, -0.0085302f, +0.1460027f, +0.0107776f, -0.3065168f, +0.0987994f,
  -0.1097134f, +0.1913233f, -0.0078989f, -0.1952313f, -0.1225621f, -0.0511316f, +0.0256436f, +0.0038127f,
  -0.2252941f, -0.0650753f, -0.2087705f, +0.1264344f, +0.0085179f, +0.3160929f, +0.0995246f, +0.1473326f,
  +0.0522119f, +0.0638062f, +0.5635442f, -0.3408315f, +0.4124209f, -0.3326173f, -0.0467930f, -0.2887791f,
  -0.0132633f, +0.5157332f, +0.0885159f, -0.0786218f, +0.2153547f, -0.1170147f, -0.1581868f, +0.0645714f,
  +0.1165087f, -0.2043628f, +0.0781379f, -0.0903093f, +0.0017925f, -0.2514479f, -0.0355617f, -0.1328679f,
  -0.2607503f, -0.0747103f, +0.3008887f, -0.1806072f, -0.1238503f, +0.0204685f, +0.2655114f, -0.2316761f,
  -0.1489909f, +0.0991077f, +0.1326814f, -0.2166965f, -0.1601277f, +0.1213351f, -0.0898378f, +0.0248050f,
  +0.1183701f, -0.1117904f, -0.0542549f, +0.0215483f, -0.3897810f, +0.0967981f, +0.1844904f, +0.0130507f,
  +0.1805032f, -0.0957636f, -0.3028009f, -0.1372549f, +0.1297515f, -0.3533902f, +0.1400593f, -0.2410901f,
  -0.1126671f, -0.1051849f, +0.1402530f, -0.1595924f, -0.1746981f, -0.2265332f, +0.0679862f, -0.2319176f,
  -0.1134891f, +0.0327446f, -0.0012750f, -0.1822502f, +0.0038687f, +0.0015453f, +0.2000799f, +0.1672636f,
  -0.0745034f, -0.1354026f, +0.1053273f, -0.2362535f, -0.2568233f, -0.1428026f, -0.1234416f, +0.0444670f,
  +0.2939588f, -0.0916139f, -0.1979195f, -0.1311804f, +0.0822261f, +0.1067134f, +0.0185039f, -0.0305528f,
  -0.1405045f, -0.0792435f, +0.0786495f, +0.0933920f, +0.0928013f, +0.2573405f, -0.0307664f, -0.1077861f,
  +0.1190517f, +0.0012060f, -0.1384710f, +0.2342259f, +0.2159104f, -0.0187813f, +0.0323924f, -0.0376986f,
  -0.0270796f, -0.1901177f, -0.4489627f, +0.4638275f, +0.3545126f, -0.1214607f, +0.0028046f, -0.0580250f
);

const float biases[4] = float[4](
  -0.0280852f, +0.0551647f, +0.0495442f, -0.0082253f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer48 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2498866f, +0.0955288f, +0.0113628f, +0.0807991f, +0.0014750f, -0.0724557f, +0.0265206f, -0.1646014f,
  +0.1500450f, +0.0877990f, +0.1316143f, +0.0228320f, +0.3322569f, -0.0478309f, -0.0585747f, -0.1495758f,
  +0.2070163f, +0.0846965f, +0.0840707f, +0.1048701f, -0.0530779f, -0.3730852f, -0.0343410f, -0.1601651f,
  -0.1453549f, +0.3329847f, -0.0569861f, -0.3092250f, -0.1100671f, -0.0832194f, +0.1026276f, +0.1314462f,
  +0.0815411f, -0.1294995f, +0.0338714f, +0.0274823f, +0.3359550f, +0.0368029f, +0.2108136f, +0.1527027f,
  +0.1921487f, +0.0460302f, -0.3772492f, +0.0289229f, -0.1657391f, -0.0477290f, -0.1267118f, +0.0130329f,
  -0.3344940f, +0.1464423f, +0.2918108f, +0.1269500f, +0.0211406f, -0.0153729f, -0.0643668f, -0.0425600f,
  +0.2887135f, +0.0432620f, -0.0103102f, -0.1300611f, +0.1827595f, -0.1776645f, -0.0782321f, -0.0819721f,
  +0.1422565f, -0.0699094f, +0.0157051f, +0.1303015f, +0.0899558f, -0.0171406f, +0.0290919f, +0.0125644f,
  +0.0820107f, -0.1502930f, +0.4107271f, -0.0022553f, +0.0171896f, +0.1006785f, -0.0245716f, +0.1011460f,
  -0.0309522f, -0.0148092f, +0.0938566f, -0.0895390f, -0.2645958f, -0.0493020f, -0.0625958f, +0.0869267f,
  +0.0795520f, -0.2482919f, -0.0107480f, -0.3976364f, +0.0667981f, -0.0551479f, -0.0951242f, +0.2539924f,
  -0.1704700f, -0.1510224f, -0.1096497f, -0.0389510f, +0.0432667f, +0.1895434f, -0.0690063f, -0.0026397f,
  -0.0419054f, -0.0274358f, -0.3451527f, +0.0770134f, -0.1642487f, -0.3159474f, +0.0067559f, -0.0124467f,
  -0.1999936f, -0.0849933f, +0.1410382f, -0.0867668f, +0.0011349f, +0.0348685f, -0.1225867f, -0.0798439f,
  +0.0809057f, -0.2796826f, -0.2447155f, -0.1476648f, +0.0032167f, +0.3211129f, -0.2146814f, -0.1471884f,
  -0.1236121f, -0.0606946f, +0.0713034f, -0.1068301f, -0.0089231f, +0.1288735f, +0.1668051f, -0.0383299f,
  +0.0638394f, +0.0867320f, +0.4761989f, +0.0328734f, -0.0869359f, +0.2756087f, -0.0264420f, +0.0588055f,
  +0.1392106f, -0.1102435f, +0.3543989f, -0.0481141f, -0.1330022f, +0.1203203f, -0.2800188f, +0.2742127f,
  +0.0385732f, +0.0269305f, -0.0533339f, -0.3569454f, +0.0561940f, -0.0435007f, +0.1619227f, +0.3628030f,
  +0.0863790f, -0.4474693f, +0.1862071f, +0.0443760f, -0.0103033f, +0.0657783f, -0.1199419f, -0.1129073f,
  +0.1060176f, +0.0554784f, +0.0432149f, -0.1122931f, -0.0301512f, +0.0321279f, -0.2218799f, +0.1667797f,
  -0.0395350f, +0.1478572f, -0.3753020f, -0.1185935f, -0.0371696f, +0.1398380f, -0.1411777f, -0.0960375f,
  -0.0973705f, -0.2958163f, +0.3016683f, -0.3293209f, -0.0101666f, -0.0619069f, +0.0015507f, -0.3747256f,
  +0.0285597f, +0.1324976f, +0.1342533f, +0.0194262f, -0.0856821f, +0.0807213f, -0.0016971f, +0.2412500f,
  +0.0467000f, -0.2565169f, -0.1319556f, +0.0783637f, -0.2159676f, +0.0621433f, -0.1730181f, -0.0893782f,
  +0.0044257f, -0.1876035f, -0.1437147f, -0.0800463f, -0.1252461f, +0.0056180f, +0.2185399f, -0.0530971f,
  -0.1758842f, +0.2530118f, +0.0341183f, +0.1510684f, -0.0910265f, +0.0144406f, +0.0385929f, -0.1853352f,
  -0.3141350f, -0.6517745f, +0.1616331f, +0.0032876f, +0.1945735f, -0.2322848f, +0.0444647f, +0.1164983f,
  -0.2051542f, -0.1598953f, +0.1999350f, +0.0537993f, +0.2994761f, +0.0190284f, -0.0126771f, -0.0952147f,
  +0.1901810f, -0.1391438f, -0.3536820f, -0.2059482f, -0.1172228f, +0.0869404f, +0.0394430f, +0.1651588f,
  +0.1678944f, +0.2634531f, -0.2633405f, -0.2068025f, -0.0764888f, +0.0849701f, +0.5669751f, +0.1843823f,
  +0.1512226f, -0.2505992f, -0.2199690f, -0.1250130f, +0.3406777f, +0.0590277f, -0.1654065f, +0.1402722f,
  -0.0344480f, +0.1379238f, -0.1121430f, +0.1319621f, -0.0466307f, +0.1057324f, +0.1465462f, +0.1616274f,
  +0.1295740f, -0.2990577f, +0.3277590f, -0.0688700f, -0.1121271f, +0.2928196f, +0.0831774f, +0.0363017f,
  +0.0253829f, -0.0145515f, -0.0398428f, -0.0718105f, +0.1465206f, +0.1791464f, +0.0598013f, -0.0476266f
);

const float biases[4] = float[4](
  -0.0188401f, -0.0180977f, -0.0173446f, +0.0015230f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer48 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0195759f, -0.0594155f, -0.0743990f, +0.0807664f, -0.0687045f, +0.1259087f, -0.0848428f, +0.1912036f,
  -0.0647454f, -0.3637612f, +0.0893885f, +0.0500084f, +0.0462466f, -0.0320025f, -0.3440627f, -0.0054009f,
  +0.2613415f, -0.0662889f, +0.0392653f, +0.2333477f, -0.0905776f, +0.0180006f, -0.2119246f, +0.0568019f,
  +0.2843252f, -0.3392293f, +0.0978174f, -0.1540551f, -0.0375226f, +0.0174561f, -0.1383398f, +0.2400748f,
  -0.0474490f, -0.1693231f, -0.2096460f, -0.5433710f, +0.2400261f, +0.0154177f, -0.8663796f, +0.1139648f,
  -0.0126085f, -0.1545611f, -0.1172732f, -0.0762229f, -0.3477821f, -0.2212168f, -0.0574155f, -0.2287695f,
  +0.1569720f, -0.2608711f, -0.0571649f, -0.1717669f, -0.1107669f, -0.1193930f, -0.0145114f, +0.0479376f,
  -0.0515905f, +0.2018170f, -0.2819115f, +0.1445092f, +0.3283058f, +0.0480648f, -0.3212784f, +0.0713917f,
  -0.2386743f, +0.0031720f, -0.0830348f, -0.2380264f, +0.1128657f, -0.0852174f, -0.1083511f, -0.0337246f,
  -0.1028850f, +0.0069978f, -0.0543747f, -0.1933619f, -0.2023364f, +0.1079665f, +0.1693744f, -0.0870050f,
  +0.0025285f, +0.0708607f, -0.0018363f, -0.4146999f, -0.1598928f, +0.0019165f, +0.1817190f, +0.1161925f,
  -0.0904031f, +0.2034115f, +0.1977533f, -0.0199885f, +0.0590940f, +0.0570906f, +0.4106108f, +0.0473734f,
  -0.2059579f, -0.0212950f, +0.0605457f, +0.1047867f, -0.0897895f, -0.1593935f, +0.0246414f, -0.1974933f,
  +0.0017407f, -0.0910402f, +0.3391384f, +0.3930655f, -0.3452328f, +0.0205273f, +0.1680227f, +0.0936535f,
  -0.1505866f, +0.1851862f, +0.3019788f, -0.0023950f, -0.1863864f, -0.0583256f, -0.1029448f, +0.0639147f,
  -0.1417115f, -0.1203318f, +0.1260727f, +0.0120275f, -0.2766020f, +0.0808136f, +0.1662472f, +0.4388101f,
  +0.2040097f, +0.1340517f, -0.1792035f, -0.1107890f, +0.0203699f, +0.2964624f, +0.0301092f, +0.2741841f,
  +0.0303225f, -0.1544932f, +0.2157180f, -0.0186291f, +0.2154776f, +0.2273509f, -0.0379492f, +0.2594683f,
  -0.1798963f, +0.0157918f, -0.2263892f, -0.0244933f, -0.2160969f, +0.2239733f, -0.0729413f, +0.1915133f,
  -0.2530998f, -0.1154231f, +0.0000815f, -0.2823339f, -0.0461824f, +0.1542553f, +0.0123439f, +0.0510860f,
  +0.0298627f, -0.0164056f, -0.1490366f, -0.0747632f, +0.0872448f, +0.0087299f, -0.0361461f, -0.0953039f,
  +0.3122182f, -0.1185259f, -0.0928290f, -0.0705542f, -0.1061875f, +0.1751921f, -0.1776995f, -0.3600039f,
  +0.0005189f, +0.0458349f, +0.0215873f, +0.1845750f, -0.0888399f, +0.4906515f, -0.0625265f, +0.2546746f,
  +0.0320880f, +0.4092019f, -0.1004829f, -0.2272216f, +0.3837682f, -0.0739992f, -0.1236096f, -0.0440142f,
  -0.0149597f, +0.2383843f, -0.1268257f, -0.1293716f, -0.0684799f, +0.0717146f, +0.1070918f, +0.0584584f,
  -0.0282784f, -0.1429080f, +0.0352233f, +0.1156407f, -0.1193397f, +0.2589121f, +0.2352974f, -0.3630475f,
  -0.3669809f, +0.0831161f, +0.2119906f, -0.0292634f, +0.3020834f, +0.0900304f, -0.1248980f, -0.0322135f,
  -0.2011041f, +0.0734821f, +0.2546836f, +0.0221682f, +0.0614479f, +0.0521843f, +0.0864372f, -0.0611681f,
  -0.0632021f, +0.0111967f, +0.3068618f, +0.1140965f, -0.3444154f, +0.0269231f, -0.0082304f, +0.2576033f,
  +0.1016459f, +0.1775493f, -0.1797929f, -0.0363298f, +0.1195405f, -0.0342235f, -0.0599967f, -0.2355864f,
  -0.3547879f, -0.0538198f, +0.2824249f, -0.0325442f, -0.0530936f, -0.1832680f, -0.1986958f, -0.1506705f,
  +0.0056318f, +0.1315520f, +0.1638111f, +0.1281037f, -0.0486795f, +0.3047130f, +0.2889756f, -0.0467613f,
  -0.1975798f, +0.1846357f, -0.0536848f, -0.1250461f, +0.0521001f, -0.0399647f, -0.2545597f, +0.0205526f,
  +0.0857854f, -0.0469006f, +0.0149841f, -0.1483429f, +0.0694298f, +0.1173833f, -0.1239065f, +0.0748544f,
  -0.0727139f, +0.2393407f, -0.4274005f, -0.1655787f, +0.0371005f, +0.3082974f, +0.0610003f, +0.0673831f,
  +0.0713605f, -0.1243498f, +0.0555453f, +0.0184643f, +0.0669997f, -0.0009208f, -0.0612136f, -0.0762060f
);

const float biases[4] = float[4](
  +0.0143770f, +0.0253839f, -0.0218352f, -0.0250507f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer49 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0962087f, -0.0126332f, +0.1926164f, +0.0818821f, -0.0335545f, +0.0459907f, -0.1426928f, +0.2855275f,
  -0.0778029f, +0.2245605f, +0.1568426f, -0.1175655f, -0.0972509f, -0.0359608f, -0.0390069f, -0.2483518f,
  +0.1009470f, +0.0458452f, -0.1789998f, -0.0208330f, +0.0805437f, +0.0056105f, -0.0303516f, -0.0132726f,
  +0.2148661f, -0.0086525f, -0.2411012f, +0.0933826f, +0.3719073f, +0.1442636f, +0.1360574f, -0.2810764f,
  +0.4190972f, -0.0693338f, -0.0081698f, +0.1098641f, +0.1689853f, +0.5092388f, +0.3447599f, +0.1641302f,
  -0.0832626f, +0.1055960f, +0.2738242f, +0.0802750f, +0.0184630f, +0.0120507f, +0.0711681f, -0.0189314f,
  -0.1831109f, +0.0531390f, -0.0229628f, +0.1564058f, -0.3897959f, +0.0527710f, -0.1220433f, +0.1492583f,
  -0.0752726f, -0.1477094f, -0.0242899f, +0.3235313f, +0.0047231f, +0.2590034f, -0.0384973f, +0.1088708f,
  +0.2020308f, -0.1714320f, -0.1560776f, +0.2153892f, +0.0167615f, +0.2250646f, -0.0797231f, +0.0929939f,
  -0.0996353f, +0.0205714f, -0.0801811f, -0.1823041f, -0.0122513f, -0.1946654f, +0.2316024f, +0.0024072f,
  +0.0306107f, +0.0573175f, -0.3521250f, -0.2424245f, +0.1502429f, +0.2570334f, -0.0904385f, +0.0630134f,
  +0.0629921f, +0.0388272f, -0.2133501f, +0.2671946f, -0.2285866f, +0.1096173f, +0.1079590f, -0.0485536f,
  +0.0609983f, -0.1530879f, +0.0515944f, -0.2402484f, +0.0457190f, +0.0485109f, +0.2432585f, +0.1608749f,
  -0.0925713f, +0.0318891f, -0.2735533f, -0.3039669f, -0.5376828f, +0.1489680f, -0.1067655f, +0.0194585f,
  +0.0385555f, -0.1205302f, -0.1544467f, -0.2312204f, -0.3230226f, +0.1203113f, -0.1652550f, +0.0852507f,
  -0.0596385f, +0.0959721f, +0.2823863f, +0.0812680f, +0.0310416f, -0.0574166f, -0.0161101f, +0.0316609f,
  -0.0087845f, +0.1132431f, -0.2577736f, -0.1020702f, +0.0145449f, +0.0096614f, +0.0393225f, -0.0293053f,
  -0.3070371f, -0.0699484f, -0.0226915f, -0.0385210f, -0.1050902f, -0.0835901f, +0.0882811f, +0.0343707f,
  +0.0326590f, -0.3047062f, +0.1365615f, +0.0390062f, -0.2357811f, +0.1834214f, -0.1805437f, +0.0150391f,
  -0.0677682f, +0.0703270f, -0.2953168f, -0.4502321f, +0.1581049f, -0.3481939f, -0.1332654f, -0.2011085f,
  -0.1708574f, -0.1967862f, +0.0569873f, +0.2238104f, +0.5129492f, -0.1166065f, +0.4040450f, +0.0243276f,
  -0.0434580f, +0.0782858f, -0.0553864f, -0.2451945f, -0.1796712f, -0.0433909f, -0.1771252f, -0.0530607f,
  +0.2472111f, -0.2817546f, +0.0410305f, -0.2265355f, +0.8238232f, -0.2367191f, +0.2670627f, +0.1473616f,
  -0.3095975f, -0.1657093f, +0.0063967f, -0.1690563f, +0.2978172f, -0.2701187f, +0.2165894f, -0.0727398f,
  -0.0784538f, -0.0940983f, -0.0138966f, -0.2693052f, -0.2116468f, -0.1097164f, -0.2955641f, -0.2516844f,
  +0.1911277f, +0.1215449f, -0.0175791f, -0.0091029f, +0.2588169f, +0.1353280f, +0.0513571f, +0.0702267f,
  +0.1045439f, -0.2115848f, +0.0742398f, -0.2313207f, +0.2400447f, -0.1301740f, +0.2978196f, -0.3092477f,
  -0.0483095f, +0.0784866f, +0.0486129f, -0.3238823f, -0.0157384f, -0.1343432f, +0.1047336f, +0.0280825f,
  -0.0176150f, -0.0358352f, -0.0100719f, -0.0821735f, -0.0992377f, -0.0892999f, +0.0203970f, +0.1370249f,
  -0.1149695f, -0.2210532f, +0.2589405f, -0.2103056f, -0.0596739f, -0.0574375f, -0.0533959f, -0.1441475f,
  -0.0741108f, -0.1317719f, +0.1260025f, -0.2777517f, -0.0619838f, -0.0908811f, -0.3113340f, -0.1753643f,
  -0.1194543f, +0.0913274f, -0.0264204f, -0.1608356f, +0.3591869f, -0.0405866f, -0.3411935f, -0.1520200f,
  -0.1772520f, -0.1504482f, -0.2972019f, -0.1673952f, +0.0669085f, +0.0755334f, +0.1109866f, -0.0290542f,
  +0.1302731f, +0.1973687f, +0.1448730f, -0.1049624f, +0.0650213f, -0.0971845f, +0.0449235f, -0.1602688f,
  +0.2144939f, -0.2989567f, -0.2475958f, -0.3097024f, +0.1953695f, -0.2038391f, +0.1130627f, -0.2725021f,
  +0.1353796f, -0.1037047f, +0.1467586f, +0.0864671f, +0.2231711f, -0.0525331f, +0.3313692f, +0.0235939f
);

const float biases[4] = float[4](
  -0.0466868f, +0.0404901f, +0.0260187f, +0.0504983f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer49 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2912446f, +0.1253015f, +0.0636455f, -0.2248162f, -0.0527111f, -0.3836007f, -0.0549632f, -0.1529928f,
  -0.3271619f, +0.1622636f, +0.0042137f, +0.0805707f, -0.1730055f, -0.1004281f, -0.2352685f, -0.2419019f,
  +0.0158868f, +0.0238536f, +0.1248673f, +0.0406817f, -0.2309597f, -0.0868817f, -0.0830847f, -0.0436340f,
  +0.0180815f, +0.0307155f, +0.0452679f, -0.1717589f, -0.0218833f, -0.1295858f, -0.2024643f, -0.1481218f,
  -0.0759396f, -0.3367905f, +0.2986841f, +0.2836639f, -0.3880475f, -0.1520048f, +0.0401653f, -0.2094926f,
  +0.0623077f, -0.2140780f, +0.1678345f, -0.0523542f, -0.0300498f, +0.0664239f, +0.1528940f, +0.0150957f,
  +0.1169343f, +0.0241473f, -0.2535349f, +0.1603182f, +0.3852519f, -0.0550345f, +0.1642741f, -0.0956630f,
  +0.0071599f, -0.3451077f, -0.1910006f, -0.5851017f, +0.2348296f, +0.0460610f, +0.0385174f, -0.0882552f,
  +0.0475435f, -0.0464201f, -0.1911361f, +0.0967314f, +0.2396126f, +0.2360865f, -0.0829071f, +0.1328535f,
  -0.1277170f, -0.3653024f, -0.1279601f, -0.3178337f, -0.0300692f, +0.0041443f, -0.4264764f, +0.0886581f,
  -0.0982297f, +0.0024380f, -0.2725520f, -0.1914698f, -0.0950377f, +0.0828144f, +0.2117409f, -0.1347712f,
  +0.3716275f, -0.2897883f, +0.1505662f, +0.0671467f, +0.0062273f, -0.0695024f, -0.2986994f, -0.2331203f,
  +0.0962683f, +0.1713507f, +0.2974894f, -0.1045000f, +0.0736932f, -0.0644959f, +0.0626613f, -0.0256898f,
  +0.1168001f, -0.1421150f, -0.5012488f, +0.0243560f, -0.0464880f, -0.0860222f, +0.0980593f, -0.1152886f,
  +0.2498087f, -0.1944866f, -0.0910070f, -0.1400955f, +0.1035831f, -0.0937478f, -0.1296039f, -0.1482436f,
  -0.0579461f, -0.0198849f, -0.1833339f, +0.1699812f, -0.1513790f, -0.0751133f, -0.0124613f, +0.0717066f,
  +0.0686409f, +0.0202906f, -0.1442751f, +0.0387569f, +0.0569579f, +0.0581445f, +0.1012622f, +0.0957536f,
  +0.2590524f, -0.1318152f, -0.2951242f, +0.2806526f, +0.3045411f, -0.0348323f, +0.0858256f, -0.0384915f,
  +0.0920067f, -0.0062992f, +0.0563754f, -0.2644187f, +0.0691944f, +0.0326860f, +0.3484695f, -0.0584438f,
  -0.1447343f, -0.1371750f, -0.3712180f, +0.1614213f, -0.3666835f, +0.0902436f, -0.0949080f, +0.0011568f,
  +0.0752394f, +0.0536980f, -0.0340309f, -0.1392523f, +0.0992671f, +0.0180960f, -0.1679264f, -0.0411404f,
  +0.3078737f, -0.1211398f, +0.2540455f, +0.0303184f, -0.3352786f, +0.0252038f, +0.2850921f, -0.1438500f,
  -0.3266639f, -0.1763292f, -0.7060042f, -0.0599367f, +0.2235005f, -0.1072476f, +0.1362040f, -0.1922431f,
  -0.3674927f, +0.0921590f, +0.2312755f, -0.0192576f, +0.0520563f, -0.0275369f, +0.1685397f, +0.0670172f,
  -0.1000967f, +0.2339686f, +0.3736773f, -0.1022069f, -0.1855648f, -0.1617351f, +0.0365033f, -0.1093033f,
  -0.0256547f, -0.3305670f, -0.4988141f, -0.1483126f, +0.1838727f, -0.0207536f, -0.0436854f, +0.0374249f,
  -0.2119789f, -0.0614155f, +0.4204546f, -0.2073859f, +0.0562124f, -0.1247663f, +0.2788390f, -0.1375485f,
  +0.2945265f, +0.1429832f, -0.1717022f, -0.1581045f, -0.0611043f, -0.0364040f, +0.5304022f, -0.0478554f,
  -0.3888654f, -0.3379802f, -0.2292576f, +0.1285390f, -0.0135089f, +0.0234363f, -0.3308069f, -0.0893128f,
  -0.3015917f, +0.1459235f, -0.2889251f, -0.0000262f, -0.3603360f, -0.1985879f, -0.0179792f, +0.0733965f,
  +0.3128333f, -0.0877112f, +0.0118249f, -0.2176632f, +0.0742494f, -0.0393963f, +0.3668923f, -0.0903165f,
  +0.1169919f, +0.1058097f, +0.1806026f, +0.2136957f, -0.1420396f, +0.0109953f, +0.2291169f, -0.2558234f,
  -0.7115096f, +0.0194019f, -0.3389703f, -0.4718866f, -0.1151044f, +0.1581052f, -0.1440548f, +0.1107521f,
  +0.0714929f, -0.0003548f, +0.0183833f, -0.0031260f, +0.2033904f, -0.1836672f, +0.0431660f, +0.1055345f,
  -0.1942232f, -0.1094769f, +0.1251653f, +0.2119683f, -0.2356633f, -0.1417856f, +0.0798647f, -0.2104073f,
  -0.2097068f, +0.1624880f, +0.1395124f, -0.0054131f, +0.1384078f, -0.1243027f, -0.1196844f, +0.0722501f
);

const float biases[4] = float[4](
  +0.0150614f, +0.0189606f, -0.0318451f, -0.0066171f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer50 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0752843f, +0.1630545f, +0.0988371f, -0.1309080f, -0.1434007f, -0.2039912f, +0.0383295f, +0.1108392f,
  -0.3331415f, +0.0279445f, +0.1932184f, +0.0022609f, -0.1741969f, +0.1654799f, -0.0718634f, +0.0078713f,
  -0.0436432f, -0.0469603f, -0.2610332f, -0.0159334f, -0.0764326f, -0.0065232f, +0.0426801f, +0.1179956f,
  +0.0530088f, +0.2466722f, -0.2274551f, +0.0312989f, -0.0784548f, -0.1528013f, -0.1488548f, +0.0662968f,
  +0.0859041f, +0.3180755f, -0.3333929f, +0.0042016f, -0.1993374f, +0.2293806f, +0.0681617f, -0.1738605f,
  -0.0926011f, +0.1128951f, -0.1404851f, -0.4330007f, -0.1968171f, +0.0569224f, +0.1390467f, -0.0062701f,
  +0.0173667f, +0.0713113f, +0.2132723f, -0.0837161f, -0.1098733f, -0.2607805f, -0.1496836f, +0.4157032f,
  +0.0746138f, +0.0643330f, +0.0376570f, +0.0488652f, +0.0418128f, +0.0542620f, +0.2490197f, -0.1340601f,
  -0.0220661f, +0.0896291f, -0.1263471f, -0.0990731f, -0.2055614f, +0.1476148f, +0.1023428f, -0.0221569f,
  -0.0134380f, +0.1742236f, -0.2284041f, +0.1309019f, +0.0190535f, +0.0581184f, -0.0374402f, -0.1032078f,
  +0.0355884f, +0.1673966f, -0.1087588f, -0.2115354f, +0.2526758f, -0.0917463f, +0.1199594f, -0.1688145f,
  -0.1111030f, +0.0951268f, -0.0652419f, -0.1166653f, -0.0645081f, +0.0222527f, +0.2400734f, -0.1132955f,
  -0.1649278f, -0.0086301f, -0.1463139f, +0.1983217f, -0.0614942f, +0.0110017f, -0.1381296f, +0.1598274f,
  +0.3880854f, +0.0631669f, +0.1221626f, -0.2300646f, +0.3363684f, -0.0629046f, +0.1686129f, +0.3329071f,
  +0.2278760f, -0.0080192f, -0.0421252f, -0.0574916f, +0.1292320f, -0.0700980f, +0.1745853f, +0.1334635f,
  -0.0005933f, +0.0598522f, -0.0650189f, +0.0897809f, +0.0610343f, +0.0152719f, -0.1448674f, -0.1876311f,
  -0.1949954f, -0.0184781f, -0.2832169f, -0.0191949f, +0.0425475f, +0.3456827f, +0.0699804f, -0.2487103f,
  +0.2086650f, -0.1659272f, -0.1276177f, +0.0244928f, +0.0364987f, -0.0618172f, -0.2516173f, +0.2344237f,
  -0.1415148f, -0.0951376f, -0.0440567f, -0.1297091f, +0.1314576f, -0.0506023f, -0.0052634f, -0.0134025f,
  +0.0488111f, +0.0649588f, -0.1544894f, -0.0458570f, -0.0493459f, -0.0964036f, +0.2704746f, -0.0636836f,
  -0.1448258f, -0.0646772f, -0.1103045f, -0.1393969f, +0.0767935f, +0.1851137f, -0.0250354f, -0.0925799f,
  -0.1215992f, +0.0541246f, +0.1210177f, +0.0372882f, -0.2586751f, +0.0618584f, +0.1860474f, +0.1720541f,
  -0.0977921f, +0.3027892f, -0.2492452f, +0.0620503f, -0.4893562f, +0.0934386f, +0.0282613f, +0.3465506f,
  -0.1492411f, -0.5153779f, +0.0697985f, -0.0316898f, -0.2021845f, +0.0086241f, +0.0686969f, +0.3057311f,
  +0.0882487f, -0.0517509f, -0.0009460f, +0.0642533f, -0.2421847f, +0.0566771f, +0.0172956f, +0.3874825f,
  -0.2168990f, +0.3385203f, -0.0247034f, +0.2290246f, -0.2922007f, +0.3813737f, +0.1300813f, +0.3957081f,
  +0.0107694f, -0.0115651f, -0.0299383f, -0.0178670f, -0.2109147f, +0.1419923f, +0.1567229f, +0.1200285f,
  -0.0379481f, +0.0857400f, -0.3509385f, +0.0900945f, -0.0248469f, +0.0570960f, -0.0827768f, -0.0449981f,
  +0.0716780f, +0.1075953f, +0.1671246f, +0.4017514f, +0.1736477f, +0.0144999f, -0.1732953f, -0.3262524f,
  +0.1124186f, +0.0326472f, +0.0264587f, +0.1367328f, -0.1530893f, -0.0874054f, +0.4760016f, -0.1682278f,
  +0.2738152f, +0.0917985f, -0.0408363f, +0.0113723f, -0.1009542f, +0.0278764f, +0.0455736f, -0.3623585f,
  +0.1060832f, +0.1189479f, -0.0263333f, +0.1254279f, -0.0170818f, +0.0218384f, -0.4895702f, -0.2665147f,
  -0.1506310f, +0.0497402f, +0.2925542f, -0.1194038f, -0.1499955f, +0.0924232f, +0.3926032f, -0.3013099f,
  +0.1420638f, -0.2397208f, -0.3473235f, -0.0776137f, +0.0199469f, +0.1035710f, +0.0535954f, +0.1470610f,
  +0.1577357f, -0.0484278f, +0.1943578f, +0.0904140f, +0.1302010f, -0.0276940f, -0.0964752f, -0.3729251f,
  -0.0623116f, +0.2561919f, -0.1291834f, -0.1532770f, -0.0317066f, -0.2747077f, -0.0121693f, -0.2261899f
);

const float biases[4] = float[4](
  +0.0177407f, -0.0356086f, +0.0101193f, -0.0341103f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer50 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0806464f, +0.0837589f, -0.2499989f, -0.0548003f, -0.1178909f, -0.0894920f, -0.0452234f, -0.1288587f,
  +0.1337262f, +0.0871926f, -0.3469382f, +0.2614599f, -0.0167689f, -0.0620976f, -0.3284854f, +0.1508189f,
  +0.3253286f, -0.0609082f, +0.4082880f, +0.0494909f, -0.0333623f, -0.1263449f, +0.1563542f, -0.0479159f,
  -0.1305159f, +0.1059008f, -0.0360788f, -0.0372873f, +0.1936683f, -0.0338852f, +0.0714326f, -0.1117327f,
  -0.2931171f, -0.0454533f, -0.2164708f, -0.3175169f, +0.1180363f, +0.1098384f, -0.2896059f, +0.7910512f,
  -0.2818941f, -0.1132567f, -0.1237899f, -0.1266100f, +0.3019776f, -0.2230963f, +0.1030409f, -0.0599264f,
  +0.0819401f, -0.0333997f, -0.0857303f, +0.0739683f, +0.3031499f, -0.0368591f, +0.0576766f, -0.3537976f,
  +0.1994322f, +0.1880330f, +0.1359752f, +0.0687506f, +0.1073643f, -0.1075570f, -0.3257288f, +0.8435094f,
  +0.2362517f, -0.0674599f, +0.1714137f, +0.1949043f, +0.1251130f, +0.0487299f, -0.0330386f, +0.0425808f,
  +0.0625402f, -0.0316633f, +0.2696931f, +0.1834208f, -0.0804449f, +0.1765225f, -0.0502453f, +0.0946025f,
  +0.0872890f, +0.0050638f, -0.0241581f, +0.1233499f, +0.1326316f, +0.3108746f, +0.0056062f, +0.1883717f,
  -0.0093418f, -0.0134534f, +0.1165130f, +0.1112683f, -0.0006883f, +0.1045036f, -0.1273126f, +0.0089365f,
  +0.2635564f, +0.0884157f, +0.2716963f, -0.1282501f, +0.0428857f, +0.0530937f, +0.0218583f, +0.0932050f,
  -0.0116016f, -0.0677795f, -0.2748666f, +0.0495185f, +0.1720756f, +0.2175034f, +0.0657777f, +0.3273194f,
  -0.1940455f, -0.2072172f, -0.0237766f, +0.3690098f, -0.2011080f, +0.3388819f, +0.1732574f, +0.1957144f,
  +0.0110043f, +0.2305437f, -0.1938122f, +0.1314766f, -0.0295841f, +0.0126845f, +0.0717118f, +0.0785730f,
  +0.0121985f, -0.1846897f, +0.2757396f, -0.0186172f, -0.0206223f, +0.1258391f, +0.1279598f, +0.1052586f,
  +0.1258110f, -0.0176159f, -0.2464086f, +0.1148662f, +0.0792573f, +0.0226041f, +0.0860437f, -0.0744616f,
  +0.0203299f, -0.2436940f, -0.1736382f, -0.2601519f, -0.0264586f, +0.0093355f, -0.0801022f, +0.1559947f,
  -0.2657273f, -0.0944594f, -0.0710291f, +0.0096798f, -0.3245353f, +0.0415835f, +0.0000286f, +0.1880127f,
  +0.3151595f, -0.0964316f, +0.1932342f, -0.1650206f, -0.2229170f, +0.1423640f, -0.0252545f, -0.1235306f,
  +0.2196289f, +0.3365034f, +0.0010775f, +0.0964985f, -0.0006231f, +0.2487145f, +0.1661759f, -0.3615929f,
  -0.1126786f, +0.1784437f, -0.2368663f, +0.2795278f, -0.1000122f, -0.0651832f, -0.3143126f, +0.4504009f,
  -0.1665100f, -0.2245865f, +0.0822679f, +0.1215077f, +0.3463531f, -0.1320740f, +0.0358702f, +0.0029873f,
  +0.0299849f, -0.0131924f, -0.0885994f, +0.1127776f, +0.0519924f, +0.3529990f, +0.1469043f, -0.3145860f,
  +0.0383189f, +0.0779454f, +0.2193988f, +0.1214497f, +0.4840158f, -0.2729045f, +0.2117602f, -0.0754471f,
  +0.0758692f, -0.1356997f, +0.1566325f, +0.0001239f, -0.0202224f, +0.0341836f, -0.2317407f, +0.3773985f,
  -0.0518953f, +0.1051888f, -0.0223995f, +0.0076320f, -0.2152078f, -0.0705966f, -0.1004834f, -0.0801208f,
  -0.0781818f, +0.1174747f, -0.1384858f, -0.0693616f, +0.2581687f, -0.1221552f, -0.0826974f, -0.1511302f,
  +0.0759790f, +0.1573576f, +0.1601520f, -0.2106225f, -0.2815931f, -0.0520524f, +0.1564031f, +0.0352842f,
  -0.2883905f, +0.0104612f, +0.0203194f, -0.0097454f, +0.0408545f, -0.1146095f, -0.1818214f, +0.1156173f,
  -0.0258924f, +0.2085505f, +0.0988155f, -0.1470395f, +0.2821685f, +0.1222206f, +0.0416910f, +0.1143775f,
  +0.0057881f, -0.2188697f, +0.4977875f, -0.1913462f, +0.0343772f, -0.0982540f, +0.5491163f, -0.3602536f,
  -0.0370193f, +0.1037646f, -0.2215586f, -0.0051339f, +0.0578263f, -0.1273896f, +0.0860930f, -0.3595104f,
  +0.0667853f, +0.1053447f, +0.2444641f, -0.0231905f, +0.0237635f, +0.2392456f, -0.0437011f, +0.3312590f,
  +0.2237038f, +0.0477512f, -0.1432732f, -0.1731826f, -0.0510507f, +0.1614395f, -0.0537363f, +0.3196666f
);

const float biases[4] = float[4](
  +0.0129168f, +0.0412581f, -0.0060483f, -0.0246140f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer51 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.4214948f, -0.3269073f, +0.0112362f, -0.1943916f, +0.1326304f, +0.0340283f, -0.0212576f, -0.0715122f,
  -0.2495199f, +0.1148394f, +0.1102322f, +0.2060408f, -0.0491083f, +0.2389677f, -0.1073574f, +0.0484943f,
  -0.1416085f, -0.2271577f, -0.0175202f, -0.1416740f, -0.2474458f, +0.0261573f, -0.0328942f, -0.1085910f,
  +0.0979969f, +0.1164139f, -0.0811606f, +0.0590446f, +0.0762730f, -0.0111019f, -0.1975045f, -0.0743920f,
  -0.2640685f, +0.0580860f, -0.3478556f, +0.4911997f, +0.3402090f, +0.0642402f, -0.0281419f, +0.1800638f,
  -0.0550603f, +0.1321509f, -0.4094504f, -0.0522192f, +0.1689903f, -0.2427205f, +0.0160901f, -0.0461693f,
  -0.0425930f, +0.1555322f, -0.0773468f, -0.2655273f, -0.0764008f, -0.1221571f, -0.0848858f, -0.0071675f,
  +0.1536508f, -0.0494026f, -0.0570842f, -0.2256503f, -0.1240804f, -0.3287949f, +0.0386541f, -0.1119485f,
  +0.0089747f, -0.0893584f, +0.2129751f, +0.1621390f, +0.1462501f, -0.0591419f, +0.2815852f, -0.2193937f,
  +0.0839350f, +0.0292917f, +0.2943427f, -0.0430438f, +0.1754789f, +0.0529685f, -0.1219164f, +0.0824423f,
  +0.1833519f, -0.1076426f, +0.2175755f, -0.1341094f, +0.0331718f, +0.2333190f, -0.0819458f, -0.1714614f,
  -0.1245278f, +0.2171284f, -0.1186728f, +0.0498804f, -0.0862502f, -0.0943697f, +0.1796595f, -0.0642357f,
  -0.1594763f, +0.0442250f, +0.0490179f, +0.1675311f, +0.3665050f, +0.3366167f, -0.4356846f, +0.0946412f,
  +0.0757136f, +0.2475954f, -0.3409479f, +0.0651946f, +0.2600228f, -0.1564562f, -0.1107238f, -0.0550891f,
  -0.0000667f, +0.1782990f, -0.0376897f, +0.4582807f, -0.1093820f, -0.1587286f, -0.0368990f, +0.1912743f,
  +0.0401139f, -0.0316219f, -0.2768272f, -0.0278339f, +0.2769478f, +0.1612755f, -0.1123856f, +0.0406346f,
  +0.1228291f, +0.1881651f, -0.0422576f, +0.0124751f, +0.0364793f, +0.0935194f, +0.0397358f, +0.0593762f,
  -0.0268496f, -0.1420185f, -0.0030336f, -0.1643566f, -0.0645002f, -0.0897143f, -0.0389607f, -0.1144497f,
  +0.1536499f, -0.0681084f, +0.0318210f, +0.0156749f, -0.0071221f, +0.0883252f, +0.0583776f, +0.0663887f,
  -0.0261078f, +0.3549838f, -0.2412923f, +0.6217979f, +0.1273490f, +0.2435392f, -0.2584603f, -0.0231670f,
  -0.3659318f, +0.0422187f, -0.5602072f, +0.3774737f, +0.2043380f, +0.0407519f, -0.4545748f, -0.1214469f,
  -0.0361579f, +0.0361743f, +0.0147994f, -0.0182308f, -0.1659066f, +0.1287330f, -0.0588029f, -0.0797532f,
  +0.0383185f, -0.2175797f, +0.0239322f, -0.2846707f, -0.0509855f, -0.1597146f, +0.1918083f, -0.0287928f,
  +0.1569652f, +0.3047704f, +0.0754051f, +0.5401897f, -0.2052729f, -0.0731397f, -0.1528887f, -0.0452014f,
  +0.0643160f, +0.0206333f, +0.0342954f, -0.0258212f, -0.0313942f, +0.0001073f, +0.1043752f, +0.0346803f,
  -0.0509296f, +0.0841961f, -0.0209839f, -0.0446607f, +0.0641618f, +0.0518343f, -0.0023475f, +0.0169102f,
  -0.0341548f, -0.0005473f, -0.0766510f, -0.2136008f, -0.0196542f, +0.1011949f, +0.0559264f, -0.1043296f,
  -0.2987230f, +0.0937398f, -0.0887753f, -0.1773103f, +0.0512328f, -0.0570986f, -0.2758342f, +0.0516195f,
  -0.0235601f, +0.0165301f, -0.1245395f, -0.1589872f, +0.2998163f, -0.0512957f, -0.1584783f, +0.0857397f,
  -0.2361599f, -0.1116129f, +0.1382077f, -0.2651020f, +0.0779185f, +0.1075157f, +0.1351799f, -0.0539140f,
  +0.1502655f, -0.2431748f, -0.0156708f, -0.1812078f, +0.2826370f, -0.1409313f, +0.2473094f, +0.1952921f,
  +0.1418295f, +0.5003925f, -0.4079245f, -0.2532174f, -0.1927605f, -0.0519864f, +0.4671464f, +0.0208690f,
  -0.2217916f, -0.1868009f, -0.1200610f, -0.2787842f, -0.0634395f, -0.0292301f, +0.0330896f, +0.0735284f,
  +0.1236620f, -0.1613205f, -0.3431417f, +0.3927134f, +0.1416700f, -0.2682238f, +0.0223679f, -0.0867433f,
  +0.1255804f, -0.0545311f, -0.1815608f, -0.0923597f, -0.2287547f, -0.1773181f, -0.1151129f, +0.1124514f,
  +0.1170611f, +0.2557723f, +0.2818750f, -0.0897147f, +0.1999531f, -0.1594123f, +0.0877643f, +0.0689232f
);

const float biases[4] = float[4](
  -0.0287457f, -0.0214229f, -0.0114316f, -0.0833146f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer51 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0378079f, -0.0208813f, -0.0591920f, -0.2323436f, +0.0326554f, -0.1420186f, +0.0998988f, +0.0554403f,
  +0.0850657f, +0.0882437f, -0.2418600f, +0.0111970f, -0.0088355f, +0.1620864f, -0.0877737f, +0.1165078f,
  +0.0073206f, -0.0402944f, +0.0651993f, -0.0350029f, -0.1258498f, +0.0290867f, -0.0579789f, -0.2813550f,
  -0.1366379f, +0.3195895f, +0.1207016f, -0.1626655f, +0.0146861f, +0.0572136f, +0.0075593f, +0.1278118f,
  +0.1855430f, +0.0439299f, -0.0209961f, +0.1774045f, -0.1206822f, +0.0820055f, -0.0796628f, -0.1065854f,
  -0.1129256f, +0.1747092f, +0.2642515f, -0.0808572f, -0.0178123f, +0.0232002f, -0.2005649f, +0.0805654f,
  +0.0168823f, -0.2239196f, +0.4201885f, -0.0210194f, -0.0820370f, +0.1051842f, -0.3300753f, +0.0070315f,
  -0.0421965f, +0.1612849f, +0.2550280f, -0.2590312f, -0.1886955f, -0.0994471f, +0.1109402f, +0.2934225f,
  -0.0506247f, -0.1599895f, -0.0039827f, -0.2195501f, -0.1177718f, +0.1610029f, +0.2176518f, -0.1404139f,
  -0.1639715f, +0.6014083f, -0.2743276f, +0.0372097f, +0.3151138f, -0.3632266f, +0.0487804f, +0.1093044f,
  +0.0774328f, +0.3986627f, -0.2021030f, -0.1024526f, +0.0874753f, -0.3256449f, -0.5828754f, +0.1786674f,
  +0.1458839f, +0.2557574f, -0.0731367f, -0.0691467f, -0.0097074f, -0.1858027f, -0.3434877f, +0.1365519f,
  +0.1033595f, -0.2994101f, +0.3937818f, +0.1416542f, -0.5231422f, +0.0047131f, -0.2233736f, +0.0659912f,
  -0.0893202f, -0.5032077f, +0.1399577f, +0.3850185f, -0.0455683f, -0.2147800f, +0.2521753f, -0.4735388f,
  -0.2722277f, -0.2490176f, +0.0531634f, -0.0849828f, -0.1049319f, +0.1946612f, +0.1361411f, -0.2846490f,
  -0.0367691f, -0.1092921f, -0.2021961f, -0.0357453f, -0.0306203f, +0.0579116f, +0.4275127f, -0.0125670f,
  +0.0090096f, -0.1043395f, -0.1660705f, -0.2297409f, -0.1940713f, +0.1495689f, +0.1094672f, -0.0389392f,
  +0.1172369f, +0.0026012f, -0.0188444f, +0.1816723f, +0.1520436f, +0.1344448f, -0.0207784f, +0.1480076f,
  -0.2709207f, +0.0191937f, -0.0435088f, +0.0231581f, +0.0418350f, +0.1414305f, -0.2188347f, -0.0772967f,
  +0.1439765f, -0.1433138f, +0.4637123f, +0.3313009f, -0.1882865f, +0.2572434f, +0.0780459f, +0.2477600f,
  +0.0553115f, +0.0812190f, -0.1124907f, +0.3026445f, -0.0464469f, -0.0595927f, +0.3319061f, +0.0235360f,
  -0.1412874f, +0.1155932f, +0.0575440f, -0.1535166f, +0.0002452f, -0.1108101f, -0.1444157f, -0.2816505f,
  -0.0483616f, +0.1109782f, +0.1802149f, -0.2122614f, +0.2249031f, +0.0846213f, -0.1717721f, -0.2111439f,
  +0.0881250f, +0.2564368f, -0.0035058f, +0.2272769f, +0.2847264f, -0.2347290f, -0.2689702f, +0.0132013f,
  +0.2374173f, -0.1303191f, +0.1853752f, -0.2414083f, +0.0441303f, -0.0664517f, -0.0322361f, +0.1571205f,
  -0.0204132f, +0.3608607f, +0.0141292f, -0.2117105f, -0.0154715f, +0.1411478f, -0.0985802f, +0.1396809f,
  -0.1804076f, -0.0523365f, +0.0234772f, -0.1489948f, -0.1586543f, +0.1360054f, +0.1583202f, -0.1907142f,
  -0.1856257f, +0.0144378f, +0.0049917f, +0.0083982f, +0.0543997f, -0.2624116f, -0.0332157f, +0.0495511f,
  -0.0662074f, +0.3175612f, +0.3655016f, +0.0274107f, -0.1995532f, -0.1879341f, +0.0804948f, +0.2070976f,
  -0.0896540f, +0.1164036f, +0.2747269f, +0.0811389f, +0.0011249f, +0.0920473f, +0.0043966f, +0.3306730f,
  +0.1806974f, -0.1852170f, -0.0238143f, +0.0643141f, +0.1353534f, -0.1248155f, +0.0246826f, +0.3014514f,
  +0.1232607f, -0.0144587f, -0.1245141f, -0.2637585f, -0.0816967f, +0.0566546f, -0.0402640f, -0.1989143f,
  -0.0285896f, -0.0952235f, -0.1121315f, -0.1652927f, +0.2550274f, +0.2630806f, -0.1460909f, +0.0257941f,
  +0.1303569f, +0.0943645f, +0.0696794f, +0.0188881f, +0.1578593f, -0.0935752f, -0.1032625f, +0.0288738f,
  +0.0500339f, -0.1966278f, -0.0095317f, +0.1177082f, -0.1492850f, +0.2084502f, +0.0170850f, +0.3352355f,
  +0.1561292f, +0.0575925f, -0.2088156f, +0.1806055f, +0.2017091f, +0.2999530f, -0.0742152f, +0.0084492f
);

const float biases[4] = float[4](
  +0.0549901f, -0.0130729f, +0.0784394f, +0.0227864f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer52 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.3097536f, -0.0338867f, +0.1150167f, +0.0158678f, +0.1776876f, +0.1253320f, +0.1279301f, -0.0982035f,
  +0.0552677f, +0.3372112f, -0.1198454f, +0.0739290f, +0.2506364f, +0.1292813f, +0.0167318f, +0.1165371f,
  -0.0616231f, +0.0757790f, -0.0947533f, -0.0259339f, -0.1192409f, -0.0655654f, -0.1196765f, -0.1208991f,
  +0.0985655f, +0.1976633f, -0.1246353f, -0.1425405f, -0.1433209f, +0.0863526f, -0.0147906f, -0.1128462f,
  -0.0936114f, +0.0269844f, +0.0141392f, -0.0393093f, -0.0615000f, +0.0441690f, +0.0035265f, -0.0665801f,
  -0.0698668f, -0.1039410f, -0.0890538f, +0.0531601f, +0.0656714f, +0.0242557f, +0.0729698f, -0.0636203f,
  -0.0698747f, +0.0894851f, +0.3952238f, +0.1790566f, +0.1580559f, -0.0741403f, -0.0033030f, -0.2168645f,
  -0.0809549f, +0.0835673f, +0.4154937f, +0.0205621f, +0.0774348f, -0.0977951f, +0.0620540f, +0.0179651f,
  -0.0682265f, -0.0429192f, +0.0206159f, -0.0473367f, -0.0665686f, -0.0083272f, +0.0319702f, +0.1367330f,
  -0.2244641f, -0.0764500f, +0.0071082f, -0.1569870f, -0.0187706f, +0.0359915f, +0.0390629f, +0.0729589f,
  -0.1297249f, +0.0349044f, -0.0837796f, -0.1328505f, -0.1065063f, -0.1329760f, -0.2457558f, +0.1153578f,
  +0.1011556f, -0.0724923f, +0.0157032f, +0.1252956f, +0.3564195f, +0.2639885f, +0.2249351f, +0.0526587f,
  -0.2736585f, -0.1245334f, -0.0091182f, +0.0371046f, +0.0255554f, +0.3068559f, -0.2403367f, -0.1160444f,
  -0.0539813f, -0.3709573f, +0.5955916f, -0.0503823f, +0.0172107f, +0.1953649f, -0.1659743f, +0.2104806f,
  +0.2022343f, +0.0373941f, +0.1076630f, -0.0114335f, -0.3173260f, -0.1005340f, -0.2687336f, +0.0907238f,
  +0.0861314f, -0.0875429f, +0.1657943f, -0.1307082f, -0.1933308f, -0.1527916f, -0.2615392f, -0.1372249f,
  -0.0014035f, -0.0649818f, -0.3659373f, -0.0952049f, -0.0819153f, +0.1287983f, +0.0786771f, +0.1155746f,
  -0.0783506f, +0.1098293f, +0.0563703f, +0.0134449f, -0.2043510f, +0.2623507f, +0.0140557f, +0.0215728f,
  -0.1333398f, +0.0006510f, +0.1383947f, -0.3030972f, +0.0286215f, -0.2769446f, -0.0231457f, +0.0917436f,
  +0.2923493f, +0.1204906f, +0.1265289f, -0.1068497f, -0.1322716f, -0.1338948f, +0.2085004f, -0.0075944f,
  +0.0537010f, +0.1857306f, +0.0653932f, +0.0938565f, +0.0707552f, +0.0684417f, -0.0352394f, -0.0191048f,
  +0.2275497f, +0.2477729f, +0.0465091f, -0.0673913f, -0.0383276f, +0.1482622f, +0.1136061f, +0.2628789f,
  +0.2147569f, +0.3188950f, -0.1097117f, -0.0392235f, +0.2197975f, -0.1355511f, -0.0327283f, +0.0497305f,
  +0.0587015f, -0.0327267f, +0.0123017f, -0.1152335f, -0.2389764f, +0.1795058f, +0.2575954f, -0.0180836f,
  -0.0604647f, +0.0629838f, -0.4226772f, -0.3238521f, +0.1117043f, -0.0086767f, +0.0321833f, +0.1172649f,
  -0.0731888f, -0.0892655f, +0.0792521f, -0.0511631f, -0.0373942f, +0.1033932f, -0.2457548f, +0.1048322f,
  +0.3142776f, -0.0033240f, -0.1525846f, +0.0035063f, +0.0934301f, -0.4026521f, +0.1103884f, +0.2600424f,
  +0.3152522f, -0.0285146f, +0.2703263f, +0.0612976f, -0.1332552f, +0.0551799f, -0.1233176f, +0.1676636f,
  +0.2608821f, -0.1288848f, -0.0424059f, -0.0837161f, +0.1411445f, -0.2425364f, +0.0963260f, -0.1458355f,
  +0.0049329f, -0.0861064f, +0.1821472f, -0.1372439f, -0.1179044f, -0.0161502f, +0.0919147f, +0.0249811f,
  -0.1761124f, -0.2368504f, -0.2556330f, -0.1249141f, -0.0491359f, -0.0116547f, +0.1043101f, +0.0339336f,
  -0.0264321f, -0.1445609f, +0.2152565f, +0.0586157f, -0.1025448f, +0.3978682f, -0.0892955f, +0.0898248f,
  -0.0276632f, +0.1883390f, -0.1032280f, -0.2825809f, +0.1010766f, +0.0112523f, +0.0569220f, +0.0830147f,
  +0.0414203f, +0.1543752f, +0.2786690f, +0.0864838f, +0.0823637f, -0.1829993f, -0.0822186f, -0.0971666f,
  +0.0292519f, +0.2860142f, +0.0944026f, +0.2452524f, -0.0244248f, -0.6221376f, -0.1707482f, -0.0063725f,
  +0.0305706f, +0.0589026f, -0.0777985f, -0.0047090f, -0.0314188f, -0.2453652f, -0.0853550f, +0.1202569f
);

const float biases[4] = float[4](
  +0.0192438f, -0.0410841f, -0.0022177f, -0.0369410f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer52 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.4636719f, +0.1813092f, -0.0000547f, +0.1098219f, +0.1273276f, +0.0109765f, -0.0274883f, -0.1327991f,
  -0.2581993f, +0.1481072f, -0.2397245f, +0.4782015f, +0.1062227f, -0.0876163f, +0.1080934f, -0.0258502f,
  -0.0251438f, -0.0567216f, -0.0676703f, +0.0141276f, +0.2909969f, -0.0910072f, +0.2841319f, -0.0433091f,
  -0.1617925f, -0.0439408f, +0.2393791f, -0.2892822f, -0.1726207f, +0.0454151f, -0.3044441f, -0.1584846f,
  -0.1161493f, +0.1797430f, -0.1056902f, -0.0317427f, +0.0757958f, -0.5472509f, -0.2924805f, -0.1240739f,
  -0.1126782f, -0.0207329f, +0.1032784f, -0.1792848f, +0.3250533f, -0.4737831f, +0.1064049f, +0.0635949f,
  -0.1682313f, -0.0872512f, -0.2263554f, -0.2292362f, -0.0001375f, -0.2106665f, -0.4063762f, +0.1236927f,
  +0.0939605f, +0.0886120f, +0.1133365f, -0.5122191f, -0.0149443f, -0.2316514f, +0.2228231f, -0.1500125f,
  -0.1033439f, +0.0763126f, -0.2267798f, -0.0018626f, +0.1104856f, +0.1613442f, +0.4328892f, -0.1256465f,
  +0.3779249f, +0.2088270f, -0.1725268f, -0.0166285f, -0.2988583f, +0.0307000f, -0.0014164f, -0.3362546f,
  +0.1583606f, -0.3275776f, +0.0366854f, -0.1651894f, +0.1948247f, +0.2845115f, -0.0712461f, -0.1456236f,
  +0.0969991f, -0.0636061f, +0.0282604f, +0.0925138f, -0.0200269f, -0.1656035f, -0.0650675f, -0.0241841f,
  -0.0858823f, +0.0203530f, -0.3311110f, +0.1325254f, +0.0232138f, -0.1973420f, +0.2188463f, -0.2509161f,
  -0.1185045f, +0.0442768f, -0.0821302f, -0.0896723f, +0.0283412f, -0.3703446f, -0.0958914f, -0.0587475f,
  -0.1509175f, -0.1679912f, +0.0941507f, -0.0180017f, +0.0299166f, +0.4330018f, -0.1208416f, +0.0185440f,
  +0.0223412f, +0.1465569f, +0.3647770f, -0.0103817f, -0.0634406f, -0.0232682f, +0.1054630f, -0.0988662f,
  -0.0816041f, +0.2098581f, +0.0605682f, -0.2497462f, +0.0174964f, +0.0600202f, +0.0747465f, -0.0577024f,
  -0.0358391f, +0.1878494f, +0.0947916f, +0.0038604f, +0.0772117f, -0.2400102f, -0.0145711f, +0.1905777f,
  -0.4650290f, +0.0631717f, -0.1519011f, -0.1913766f, -0.0776401f, -0.1446410f, -0.1720918f, +0.0648924f,
  +0.0357975f, -0.1142669f, +0.0384607f, +0.1901437f, -0.1483499f, +0.1120145f, +0.3104995f, -0.2277390f,
  -0.0504113f, +0.2818328f, -0.0251121f, +0.0188806f, -0.0727528f, +0.2052868f, +0.0180388f, +0.1806161f,
  +0.1752448f, -0.1934249f, -0.2356337f, -0.1559831f, +0.0676977f, -0.2907007f, -0.1408633f, +0.1278521f,
  +0.1940689f, +0.0194905f, +0.0223403f, -0.3080566f, +0.0006143f, -0.1323778f, -0.0089532f, +0.2318620f,
  -0.0031425f, +0.3335138f, -0.0181340f, -0.0283075f, -0.2784734f, -0.4510536f, -0.0633035f, +0.0173444f,
  -0.0017814f, +0.2108008f, -0.2277634f, +0.1834068f, +0.0070382f, +0.0146429f, -0.1786730f, +0.3079075f,
  -0.0287489f, +0.0526455f, -0.1902855f, +0.0318462f, -0.0796118f, +0.2868713f, -0.0025632f, +0.2823837f,
  +0.0846973f, -0.1780300f, -0.1408377f, +0.0375012f, +0.0789500f, +0.2140904f, +0.0375850f, -0.0250264f,
  -0.1857044f, -0.0428406f, -0.1024390f, -0.1796359f, -0.2164779f, +0.1518781f, +0.0182784f, +0.1014766f,
  -0.1793480f, -0.0094000f, -0.0948434f, -0.0033605f, -0.3107083f, +0.1003171f, -0.0337547f, +0.0006000f,
  -0.1966235f, +0.1164874f, -0.1342254f, -0.0740707f, -0.0007999f, +0.1303728f, +0.0996693f, +0.1214721f,
  -0.1430038f, -0.1496646f, +0.0059402f, -0.0382078f, -0.1727524f, +0.1795660f, -0.2401581f, -0.0834072f,
  +0.0166631f, -0.1457671f, -0.0665677f, -0.0571929f, +0.1247286f, +0.2217438f, -0.1751370f, +0.2770906f,
  +0.0173790f, +0.0080681f, +0.0206424f, +0.2958070f, -0.3242170f, +0.2031778f, +0.0747268f, -0.1843471f,
  -0.0877621f, +0.0212887f, +0.2161968f, +0.0775134f, -0.2747130f, -0.0927342f, -0.0720319f, -0.0123948f,
  -0.0641736f, +0.2470876f, -0.0163798f, -0.3157437f, +0.0094598f, +0.0612309f, -0.0751747f, +0.3147282f,
  -0.1168024f, +0.0640883f, +0.0709372f, -0.2286070f, -0.1272548f, -0.0062208f, +0.0836747f, +0.1830099f
);

const float biases[4] = float[4](
  +0.0131217f, +0.0186217f, +0.0017239f, +0.0039651f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer53 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0595484f, +0.0880904f, +0.2801542f, +0.0453168f, +0.0475575f, +0.1077055f, -0.2288482f, +0.0418996f,
  +0.0036042f, -0.2489650f, +0.2548568f, -0.2714969f, +0.0148628f, -0.0590771f, -0.0442174f, -0.1675680f,
  -0.0945477f, +0.0767758f, -0.0673960f, -0.0714514f, +0.2013679f, -0.0012811f, -0.1556265f, -0.0189536f,
  +0.3141874f, -0.3504528f, +0.2243850f, +0.0257469f, +0.2028577f, +0.1760538f, -0.1927223f, -0.2557245f,
  +0.2223870f, -0.1123257f, +0.0217820f, +0.0126249f, -0.3110033f, +0.0747383f, +0.0238394f, -0.0979959f,
  +0.1655001f, -0.2661829f, +0.1002864f, -0.0241140f, +0.0999180f, +0.1626076f, -0.0854928f, -0.0399775f,
  +0.1646786f, +0.0935844f, -0.0706501f, -0.1365597f, +0.0969751f, +0.2081306f, +0.1656886f, +0.2916193f,
  -0.2000057f, -0.1103007f, +0.0556972f, -0.3191898f, -0.2219611f, +0.3062819f, +0.0724858f, +0.0763265f,
  +0.0901023f, -0.1668818f, -0.0074536f, -0.0070275f, +0.0137539f, +0.1354453f, +0.3386271f, -0.0317451f,
  +0.0495094f, +0.0224832f, +0.1347207f, -0.0364010f, -0.1117065f, -0.0204526f, -0.1415101f, +0.0641521f,
  +0.1582737f, -0.1042726f, +0.2377450f, -0.1440101f, -0.0850714f, +0.2096362f, -0.2755257f, -0.0749449f,
  +0.2503150f, -0.0525657f, -0.2552897f, -0.1011970f, +0.0716608f, +0.1234332f, -0.0745625f, +0.0393395f,
  +0.0690942f, +0.3012055f, -0.1170754f, -0.0911310f, +0.3917923f, -0.0563307f, -0.0685328f, -0.0290761f,
  -0.0196830f, +0.1160342f, +0.0029408f, -0.0966254f, +0.1315714f, +0.1865801f, -0.1743688f, -0.0797510f,
  -0.0141190f, +0.0233255f, -0.1528925f, +0.1231169f, +0.0933799f, -0.0147486f, +0.0054225f, +0.3754844f,
  +0.1496590f, -0.0160375f, -0.1504778f, -0.0859270f, +0.1690576f, +0.2713815f, -0.1032552f, +0.2467673f,
  -0.0730151f, +0.1980390f, -0.1257844f, -0.0182036f, -0.0296473f, +0.0364445f, +0.0738988f, +0.0264939f,
  +0.1094494f, +0.0850143f, +0.0379650f, +0.0226387f, +0.1621329f, +0.0272344f, -0.1872843f, +0.0569955f,
  -0.0493451f, +0.2617914f, +0.1610304f, -0.1646831f, +0.0226839f, +0.2747906f, +0.0847903f, +0.1447460f,
  +0.1261759f, -0.2007232f, -0.0150352f, +0.1809189f, -0.3375150f, +0.0778876f, +0.2021428f, +0.1601848f,
  +0.0610477f, +0.1285273f, -0.0698392f, +0.0126952f, +0.0376394f, +0.0483617f, +0.0424523f, -0.0256830f,
  +0.2998289f, -0.1699787f, +0.1102993f, -0.2168308f, +0.3790954f, -0.0217612f, +0.1618349f, +0.1677385f,
  -0.1935748f, +0.1598947f, +0.1884896f, +0.0374099f, +0.0934557f, -0.2083586f, -0.4333248f, -0.0075342f,
  +0.3768358f, -0.2081190f, -0.1929325f, +0.1138308f, +0.5306664f, +0.3194697f, +0.1346786f, +0.1800573f,
  +0.2240752f, -0.2460351f, -0.2685917f, -0.1380805f, +0.3506481f, -0.1094987f, +0.0346967f, +0.1094596f,
  +0.0114895f, -0.1346144f, -0.3304678f, +0.0543977f, -0.0182197f, -0.0034509f, +0.2820339f, +0.0586105f,
  -0.0519382f, -0.0294005f, -0.0714516f, -0.0279288f, -0.2102873f, +0.1287069f, -0.1323459f, +0.0159566f,
  +0.0847495f, -0.0081955f, +0.1759444f, +0.0920350f, -0.1947586f, +0.1458266f, +0.0091510f, -0.1032499f,
  -0.1138519f, +0.1222323f, +0.0683484f, +0.0892451f, +0.3201043f, -0.0368871f, -0.0509475f, +0.0197185f,
  +0.0046335f, -0.0660484f, +0.0887624f, +0.0207352f, +0.0159529f, +0.0478936f, -0.1684807f, +0.0896901f,
  -0.0284291f, +0.0093810f, +0.0643278f, -0.2080137f, +0.1544716f, +0.1142577f, +0.1695859f, +0.1125550f,
  -0.0075176f, +0.4392712f, -0.0478075f, -0.0074971f, +0.3860804f, +0.0360358f, -0.0073343f, +0.2269945f,
  +0.0504303f, +0.2097181f, -0.2408263f, +0.0359671f, -0.5401047f, -0.1256599f, -0.1526490f, +0.1402026f,
  -0.1150827f, +0.0452683f, -0.0056567f, -0.1666343f, -0.2192550f, +0.1213373f, -0.1486602f, +0.1188512f,
  +0.1396196f, -0.0074015f, -0.0481969f, +0.0900015f, -0.0382094f, +0.0222172f, +0.1881408f, -0.0291904f,
  +0.2275212f, -0.1253915f, +0.2386293f, -0.0406705f, -0.2501265f, +0.1995214f, -0.1097294f, +0.1506067f
);

const float biases[4] = float[4](
  +0.0213342f, +0.0282075f, -0.0327824f, -0.0187976f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer53 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0789177f, -0.0482003f, -0.0146818f, -0.3375882f, -0.1070741f, -0.2691035f, +0.4338627f, -0.0358712f,
  -0.0516466f, +0.5289143f, -0.1855794f, -0.6371713f, -0.0894313f, -0.4295601f, -0.0352275f, -0.1086328f,
  -0.0218804f, -0.0410439f, +0.2875383f, -0.1077207f, -0.1079045f, -0.1866158f, +0.0021536f, -0.2715450f,
  -0.1132988f, -0.2013893f, +0.2947795f, +0.4421961f, +0.2573288f, -0.0278279f, +0.4660168f, +0.1334681f,
  -0.0771226f, +0.1514767f, -0.4539672f, -0.3757348f, +0.5383247f, -0.0193303f, -0.0572644f, -0.1712329f,
  +0.1013064f, +0.0810536f, -0.1897874f, +0.1846604f, -0.0674222f, -0.2728483f, -0.1061173f, -0.0639344f,
  -0.0288469f, +0.0165300f, -0.2089407f, +0.3264116f, +0.0188290f, -0.2287812f, -0.2509072f, -0.0415534f,
  -0.0143853f, -0.0739392f, -0.0877569f, -0.0821562f, +0.0319003f, +0.0522665f, -0.2791996f, -0.1562897f,
  +0.1010773f, -0.0206265f, -0.2538575f, +0.2294679f, +0.5196685f, -0.0724288f, -0.1009562f, -0.1731084f,
  +0.0317361f, +0.1060591f, +0.1236811f, +0.0753537f, -0.0074557f, +0.0059382f, +0.0205431f, -0.0555027f,
  -0.1258666f, -0.0208794f, +0.2697599f, +0.0723802f, -0.0020211f, +0.1441611f, -0.1096228f, +0.0649570f,
  +0.1228825f, +0.1434495f, +0.0340083f, +0.1594838f, -0.1805769f, +0.0610251f, -0.0746588f, -0.0002320f,
  +0.1169256f, +0.2794591f, -0.0842633f, -0.1453306f, -0.3642718f, -0.0932545f, -0.0469747f, +0.0600906f,
  -0.1229706f, +0.2148784f, +0.0751728f, -0.2800495f, -0.0820094f, +0.0046331f, -0.3520972f, +0.1938004f,
  +0.0258357f, -0.0402549f, -0.1625969f, -0.0881148f, -0.0715558f, +0.1380628f, -0.2097186f, -0.0075412f,
  +0.2324189f, -0.0540218f, -0.3265044f, +0.3286653f, -0.0265228f, +0.0369895f, -0.2469389f, -0.1174237f,
  -0.0690630f, -0.0129434f, -0.2220874f, -0.0517906f, -0.1155750f, +0.0098118f, -0.3666797f, +0.0166251f,
  -0.0275394f, +0.2418320f, -0.2321618f, +0.0685901f, -0.0695997f, +0.2083141f, -0.0332281f, -0.1241532f,
  -0.0112479f, +0.0562106f, -0.1458955f, -0.1492437f, -0.2248394f, -0.3199177f, -0.1132826f, -0.0289108f,
  -0.0108868f, +0.0446004f, +0.0426520f, -0.4077140f, +0.0085631f, -0.1637009f, -0.4288460f, +0.0357036f,
  -0.2159971f, +0.0091335f, +0.3960674f, -0.0388021f, +0.5434382f, +0.0729916f, +0.3735917f, -0.1153228f,
  -0.0828974f, -0.0698504f, -0.1917515f, +0.0723948f, +0.3844347f, -0.4320333f, +0.2226402f, -0.0524986f,
  +0.1629563f, +0.1237473f, -0.1811683f, -0.0375022f, +0.0207067f, -0.2388981f, -0.0817322f, -0.2618287f,
  +0.2920742f, -0.1251898f, +0.2590921f, -0.3587590f, +0.1364021f, -0.2605825f, -0.0794235f, -0.2172671f,
  -0.1394312f, -0.0199903f, -0.1424259f, -0.2686160f, +0.1834685f, +0.0227149f, +0.0521695f, -0.1940723f,
  +0.3839309f, +0.1138709f, -0.0015762f, -0.3493048f, -0.0272545f, -0.1761535f, -0.1925778f, -0.1729161f,
  +0.0059715f, +0.0629865f, -0.1452156f, -0.1390212f, +0.4503163f, -0.1274013f, +0.2701766f, +0.0839006f,
  -0.2124603f, +0.0463977f, -0.0342733f, -0.1112129f, +0.1733325f, -0.0493328f, -0.0219664f, +0.1261588f,
  +0.0948964f, +0.1361517f, +0.1758392f, -0.1375695f, -0.1502874f, +0.0821404f, -0.0637235f, -0.1157591f,
  +0.0287956f, +0.0945376f, +0.1581829f, +0.0069898f, +0.0395863f, +0.0560604f, -0.2571125f, -0.1586305f,
  +0.2300490f, +0.1669115f, +0.0410143f, -0.1230891f, +0.2039989f, +0.0621345f, -0.2684846f, +0.3185457f,
  +0.0321764f, -0.0806491f, -0.2002338f, -0.0071995f, -0.2057405f, +0.1642904f, +0.0708031f, -0.1741625f,
  +0.1033744f, +0.1408335f, +0.0742801f, +0.0390893f, -0.2589054f, -0.0388887f, -0.1359573f, -0.1317417f,
  +0.1419462f, -0.0268587f, -0.0184732f, -0.0667757f, +0.0934395f, -0.0217277f, -0.1987954f, +0.0530014f,
  -0.0080949f, -0.0611309f, +0.0600158f, -0.0929739f, -0.1516871f, +0.1907654f, -0.3118664f, +0.0893665f,
  -0.1277782f, -0.0310426f, -0.0598261f, -0.1062058f, -0.0068226f, +0.0110151f, +0.1427381f, +0.1255155f
);

const float biases[4] = float[4](
  -0.0798417f, +0.0123536f, -0.1038607f, +0.0517288f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer54 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0066766f, +0.0003735f, +0.0117078f, -0.1055944f, -0.0554053f, -0.0192677f, -0.2444862f, +0.1531533f,
  -0.1086350f, -0.0582804f, -0.1815498f, +0.0862937f, +0.2731705f, -0.1154660f, +0.1212125f, -0.0639007f,
  +0.0300564f, +0.0893740f, -0.2011893f, +0.0722041f, +0.0284828f, -0.0054512f, +0.2843513f, -0.1581623f,
  -0.2309776f, -0.2698330f, +0.0627086f, -0.1318318f, -0.1525389f, +0.0564095f, -0.1833630f, +0.0726465f,
  +0.0072599f, -0.0615350f, -0.0373331f, +0.0867401f, +0.1834121f, +0.0949019f, +0.1814034f, +0.0813675f,
  -0.3449068f, -0.0236722f, -0.4509732f, +0.0893384f, -0.2677724f, -0.0020783f, -0.0731621f, +0.0139496f,
  +0.0240747f, +0.0961555f, -0.0104695f, -0.2388883f, -0.1086736f, +0.0928807f, -0.2091787f, +0.0573919f,
  -0.4022024f, -0.2341653f, -0.3796700f, +0.0158697f, +0.1138050f, -0.0774728f, +0.2631634f, +0.0740013f,
  -0.0209720f, +0.2129015f, +0.0078628f, +0.1117312f, +0.1067730f, +0.0597648f, +0.1302882f, -0.0801435f,
  +0.0237857f, +0.0662109f, +0.2329633f, -0.0747220f, -0.0233912f, -0.1970029f, -0.1652561f, -0.1815187f,
  +0.1378370f, -0.2350502f, +0.1174438f, -0.0030464f, +0.1354281f, -0.0095314f, -0.0349927f, +0.1907591f,
  -0.0253586f, -0.1796576f, +0.3006433f, +0.1862781f, -0.1163031f, -0.0026489f, -0.0991560f, +0.0027298f,
  +0.0985243f, +0.2248858f, +0.1502800f, +0.2550713f, -0.3240791f, -0.0196872f, +0.0066902f, +0.1977524f,
  -0.0790847f, -0.0587186f, -0.0462178f, -0.3584818f, -0.3412274f, -0.2031348f, +0.1566988f, +0.2448367f,
  -0.0588168f, -0.2092805f, +0.2666298f, -0.1759079f, +0.2193203f, -0.0125076f, +0.0485847f, -0.3388358f,
  +0.0690518f, -0.0001447f, +0.1702894f, +0.3164812f, -0.1924590f, -0.0106200f, -0.1559216f, -0.1128456f,
  +0.3376127f, -0.1266542f, +0.2611830f, -0.0282727f, -0.1686758f, -0.1202148f, +0.0451101f, +0.0834904f,
  -0.1209039f, -0.0051518f, +0.1617951f, +0.0242043f, -0.2641572f, -0.0192824f, -0.2399658f, +0.1636072f,
  +0.0708669f, -0.1054973f, -0.0533121f, -0.1054389f, -0.2320531f, -0.0399652f, +0.1752862f, +0.0476563f,
  -0.0921583f, +0.0838994f, +0.1239811f, +0.1701582f, +0.0762309f, -0.3525035f, -0.1046499f, -0.0041928f,
  +0.2754762f, +0.0182525f, +0.0120280f, -0.2177688f, +0.2569142f, -0.0054703f, +0.0974246f, +0.0415525f,
  -0.0304775f, +0.0915671f, +0.1769583f, +0.1158583f, -0.0014912f, -0.1299948f, +0.0439442f, -0.2637987f,
  +0.0651585f, -0.1112740f, -0.3182922f, +0.3729159f, +0.0591594f, -0.3870020f, +0.0564410f, -0.0499822f,
  +0.1052890f, +0.3043311f, +0.0610525f, -0.2538733f, -0.2266459f, -0.1439313f, +0.3747537f, +0.2215210f,
  +0.0921959f, +0.0100948f, -0.0763000f, -0.2069366f, -0.5115635f, -0.0233190f, -0.2805265f, -0.0508658f,
  -0.3412225f, -0.1508738f, -0.1339975f, +0.2015898f, +0.5185373f, +0.0374757f, -0.1425042f, +0.2213843f,
  +0.0804929f, -0.0081001f, -0.1324800f, -0.0293821f, +0.0569143f, -0.0286539f, -0.0132128f, +0.2185401f,
  -0.1301121f, +0.0939238f, -0.0703048f, +0.0569808f, +0.1842031f, +0.0114429f, +0.0606994f, +0.0750317f,
  +0.1052215f, +0.0851887f, +0.0955385f, -0.1425461f, -0.0866464f, -0.1741510f, +0.0647290f, +0.0978318f,
  -0.2713736f, +0.2238706f, +0.0313018f, +0.2883520f, -0.0651155f, +0.3526940f, +0.1718647f, -0.1019912f,
  -0.2354777f, +0.0660102f, +0.0634607f, -0.0689443f, -0.1982191f, +0.2685353f, +0.0305753f, -0.1669139f,
  +0.1526872f, -0.1292662f, +0.3090443f, -0.1366984f, -0.0070700f, +0.3370023f, -0.2379527f, +0.0731383f,
  -0.0159715f, +0.0402032f, -0.1284089f, -0.1691749f, -0.0719067f, +0.0550580f, +0.2445606f, -0.0698232f,
  +0.0375228f, +0.2600663f, +0.1220885f, +0.0674199f, +0.0034015f, +0.0699712f, +0.0935035f, +0.0902471f,
  -0.1317264f, +0.2771029f, +0.1535747f, -0.0979752f, +0.3775629f, +0.2004288f, -0.1696972f, -0.1215130f,
  -0.0818260f, -0.2020664f, -0.0942955f, +0.0748979f, -0.0946934f, -0.0776848f, -0.1864682f, -0.1205198f
);

const float biases[4] = float[4](
  -0.0022504f, -0.0264594f, -0.0112419f, -0.0107748f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer54 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1538210f, -0.0254709f, -0.1429819f, +0.1018379f, +0.0168692f, -0.1286486f, -0.1247632f, +0.0846557f,
  -0.0379909f, +0.1654386f, +0.0212569f, +0.0646115f, -0.0606581f, +0.2430852f, +0.0125011f, +0.0564534f,
  +0.0005470f, +0.0273246f, -0.1920768f, +0.2792618f, -0.2190614f, -0.0599696f, +0.3577965f, -0.2733333f,
  +0.4361989f, -0.0905073f, -0.1239028f, -0.0840077f, +0.0277286f, -0.1118328f, +0.2537288f, +0.3235527f,
  -0.2307538f, +0.2755134f, +0.2383476f, +0.1621998f, +0.1257457f, -0.2315709f, +0.1363576f, +0.2300028f,
  -0.0674848f, -0.0639068f, +0.0554242f, -0.1740738f, -0.0962212f, -0.0470708f, +0.0487366f, -0.0108792f,
  -0.0303027f, -0.0501704f, +0.0078576f, -0.3722819f, +0.1086937f, -0.1190762f, +0.1451011f, +0.2314026f,
  -0.0880251f, +0.3446446f, +0.1807560f, -0.1081395f, -0.2826906f, -0.0458325f, +0.2524040f, -0.2326629f,
  -0.0156362f, +0.1488540f, +0.2292367f, +0.1217226f, +0.1605728f, -0.0776008f, +0.2264494f, -0.2459350f,
  +0.0360437f, -0.2052986f, +0.0483340f, +0.0396306f, -0.0070394f, +0.2012371f, -0.1199055f, +0.0162761f,
  +0.0348136f, +0.1810396f, +0.0722336f, +0.2950770f, -0.3196748f, +0.0177652f, -0.0458491f, -0.2376691f,
  +0.0492807f, -0.1443145f, +0.2484738f, -0.0327714f, +0.1688878f, -0.1469478f, +0.1158954f, +0.0396103f,
  +0.1628729f, -0.0557656f, -0.1358912f, -0.0307633f, +0.0641225f, +0.0091899f, -0.1651221f, +0.1289966f,
  +0.1109137f, -0.2267783f, -0.1211600f, -0.0961667f, -0.3670967f, +0.1936832f, +0.1869659f, -0.1196534f,
  -0.0590649f, -0.0120323f, +0.1557360f, -0.0735429f, -0.2573835f, +0.0464713f, +0.1064271f, +0.0113729f,
  +0.1659340f, -0.0162725f, -0.0534666f, -0.0457259f, +0.1094123f, -0.0578825f, -0.3604371f, -0.1445165f,
  -0.0327682f, -0.1105394f, -0.0476877f, -0.0304845f, +0.5246157f, +0.0765978f, -0.0506474f, -0.0667654f,
  +0.0515460f, +0.2122206f, -0.0243703f, -0.1417709f, +0.2804816f, -0.0285357f, +0.1142454f, -0.0827518f,
  -0.1542543f, +0.0362218f, -0.1164463f, -0.2906143f, +0.1290149f, +0.1547703f, +0.0784932f, -0.2350396f,
  -0.1428218f, -0.1098561f, -0.2114645f, +0.0010945f, +0.0598811f, +0.2531293f, -0.1575480f, +0.0094127f,
  +0.1462685f, -0.0142117f, -0.2011037f, -0.0104127f, +0.1035540f, -0.2203024f, -0.1566274f, +0.0601300f,
  -0.0502547f, -0.0089152f, -0.1370951f, +0.0621384f, +0.2721593f, +0.0812003f, -0.1219264f, -0.0473388f,
  -0.0217615f, -0.0162491f, +0.1351558f, -0.1416885f, -0.0822144f, +0.0344253f, -0.2141583f, -0.0291434f,
  -0.0069965f, +0.0353858f, -0.1131274f, +0.1526017f, -0.3248048f, +0.0691999f, -0.2590742f, +0.0119799f,
  +0.0049173f, -0.1903349f, +0.0068374f, -0.1552764f, +0.1171244f, +0.0929088f, +0.0167508f, +0.2521815f,
  +0.0762766f, -0.1236805f, -0.0468468f, +0.1108527f, -0.1142418f, +0.0393462f, +0.2682995f, -0.2686805f,
  +0.2710177f, -0.0825952f, +0.0195385f, +0.0554780f, -0.3509436f, +0.0261280f, -0.2466173f, -0.0019420f,
  +0.1100915f, -0.1970767f, +0.0546158f, +0.1846094f, -0.3032747f, +0.0395645f, -0.1031390f, -0.0115884f,
  +0.0885369f, -0.3452376f, -0.1504251f, -0.0988988f, -0.0673724f, -0.0436984f, +0.1979720f, -0.2463161f,
  -0.2467690f, -0.2291990f, -0.1299659f, +0.1196147f, -0.3219997f, -0.0891947f, -0.2183669f, +0.0642909f,
  -0.2502453f, +0.0300867f, -0.1217919f, -0.2795310f, +0.1363850f, +0.1049465f, -0.1019002f, +0.0619212f,
  -0.0754680f, +0.2279420f, -0.1750176f, -0.2167242f, +0.2074294f, -0.1640522f, -0.0877956f, +0.4875789f,
  +0.1255563f, +0.0756175f, -0.0627583f, +0.2073414f, -0.2389965f, +0.0505518f, +0.1913446f, -0.1343184f,
  -0.1146062f, -0.1241876f, +0.0570594f, -0.2878372f, +0.0707261f, +0.0179198f, +0.0278365f, +0.1144689f,
  +0.2816908f, -0.2305736f, -0.0778956f, -0.1138015f, -0.2286695f, -0.0922679f, +0.0807692f, -0.0081383f,
  -0.0287548f, +0.1818731f, -0.1685786f, +0.0208341f, -0.0822343f, +0.1092227f, +0.0471134f, +0.0852738f
);

const float biases[4] = float[4](
  +0.0279910f, +0.0152098f, +0.0053530f, +0.0168614f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer55 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3628836f, -0.2802608f, -0.3858767f, -0.1827902f, +0.2130983f, -0.2622316f, +0.0783962f, +0.1206250f,
  -0.3124762f, -0.1545547f, -0.0149417f, -0.0580040f, +0.3091070f, +0.0032826f, -0.2492027f, +0.0848407f,
  +0.1048313f, -0.0558371f, -0.1538506f, -0.0306459f, +0.4253576f, +0.2201714f, +0.0110241f, +0.2172816f,
  +0.1440920f, +0.3288012f, -0.2797942f, -0.1684822f, +0.0775744f, -0.3043743f, -0.0599881f, +0.2883382f,
  +0.2233009f, -0.0539376f, -0.0859302f, -0.3654895f, -0.0059534f, +0.0172074f, +0.2036804f, +0.2542591f,
  -0.1449471f, +0.2722523f, -0.0058894f, -0.0477568f, -0.2147957f, -0.2071797f, -0.1569644f, +0.3701195f,
  -0.0102678f, -0.0407213f, -0.0132690f, -0.2995077f, -0.1208914f, -0.1447911f, -0.0704915f, +0.2076432f,
  +0.1666623f, +0.1046273f, -0.1001138f, -0.1486504f, +0.0289656f, +0.1300537f, +0.1208830f, +0.1623804f,
  +0.0566426f, -0.2081670f, +0.0305160f, -0.2885357f, +0.0136392f, -0.3685492f, +0.0586408f, -0.0783981f,
  +0.3515375f, -0.0574458f, -0.0469747f, +0.0306212f, -0.0331417f, +0.0246071f, -0.0562640f, +0.0448495f,
  -0.1733853f, +0.0364432f, -0.0895710f, -0.0038398f, +0.0870198f, -0.0178131f, -0.1007069f, +0.3324108f,
  +0.1150330f, -0.3493090f, -0.0153977f, -0.0089409f, +0.0653527f, -0.0095256f, -0.0893039f, +0.0250480f,
  +0.2572039f, +0.3001235f, +0.2789332f, -0.3915195f, -0.0162990f, -0.2223108f, -0.0278429f, +0.1560856f,
  -0.0154484f, -0.3001750f, -0.0600771f, +0.1596948f, +0.0029886f, -0.3140267f, +0.3274331f, +0.1065033f,
  -0.0424882f, -0.2414820f, -0.0993906f, +0.0769031f, -0.1128505f, +0.1389855f, +0.1410009f, +0.1095006f,
  +0.4071794f, -0.1203286f, -0.1637341f, -0.1913555f, +0.0243400f, -0.1569641f, +0.0616756f, +0.1700966f,
  +0.0974162f, +0.0015855f, +0.0418421f, +0.3601351f, -0.0118269f, -0.1274686f, -0.0170027f, +0.4189543f,
  -0.1011159f, +0.0060728f, -0.1360907f, +0.2359207f, +0.0850187f, +0.0225756f, +0.1726808f, -0.1628219f,
  +0.1550339f, -0.0976596f, +0.0062340f, +0.0119582f, +0.3408694f, -0.1270095f, -0.0600726f, +0.2026810f,
  +0.0560701f, +0.2383530f, -0.1721583f, -0.4209245f, +0.3958323f, -0.0312979f, -0.0580380f, +0.1980389f,
  -0.1746237f, -0.0375612f, -0.2767385f, +0.0900430f, -0.0215794f, -0.1729573f, +0.2111408f, -0.1398903f,
  +0.0139616f, -0.3970076f, -0.1499717f, -0.3040317f, -0.0508928f, -0.1802318f, +0.0016397f, -0.2128698f,
  +0.4470990f, +0.0802727f, +0.0591462f, -0.1545757f, +0.2079664f, -0.0030241f, -0.0665890f, +0.1569335f,
  -0.4468763f, +0.3253106f, +0.0231718f, -0.0017485f, +0.6051425f, -0.0300118f, -0.0782933f, -0.1492549f,
  +0.1062970f, -0.0079182f, -0.0800952f, +0.2917822f, -0.1452575f, +0.1352458f, -0.0906858f, -0.2500279f,
  -0.1077422f, +0.1379373f, -0.0260231f, -0.2883891f, +0.4193208f, -0.1064747f, -0.3591164f, +0.3768596f,
  -0.2032837f, +0.0715668f, -0.2930053f, -0.0616390f, +0.2115047f, -0.0481676f, +0.0002920f, +0.0481692f,
  -0.0715463f, -0.0154035f, +0.0417105f, -0.1009425f, -0.0772380f, -0.1049444f, +0.0297312f, +0.0077802f,
  +0.1531276f, -0.1073485f, -0.4545568f, +0.4074258f, -0.1381779f, +0.3986084f, +0.0043760f, +0.0840267f,
  +0.1737091f, +0.1206147f, +0.2364049f, +0.0555362f, -0.2707022f, +0.0014812f, -0.1900690f, +0.0495327f,
  +0.2226782f, -0.2897362f, -0.0806812f, +0.0238454f, +0.0807315f, +0.0999473f, -0.2014904f, -0.1629244f,
  -0.0092953f, +0.0189661f, +0.2093425f, +0.1027129f, +0.2773455f, +0.0551939f, -0.3870448f, -0.0595970f,
  +0.1793842f, -0.3805369f, +0.2355291f, +0.0023633f, +0.2438422f, +0.0524941f, +0.0342519f, +0.0059619f,
  -0.0125991f, -0.0414005f, +0.0863532f, +0.0573488f, -0.0829886f, +0.0564268f, +0.0527317f, +0.0067069f,
  -0.1474070f, +0.1986285f, -0.0657592f, -0.1574855f, +0.2781046f, -0.0844501f, -0.0147363f, -0.0642128f,
  -0.0607807f, -0.0740403f, +0.0633217f, +0.1345572f, +0.0692655f, +0.2551424f, +0.1038337f, -0.0795742f
);

const float biases[4] = float[4](
  -0.0168143f, -0.0253349f, -0.0427594f, +0.0723632f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer55 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0220828f, -0.0986876f, +0.0820806f, -0.0114376f, -0.0454342f, +0.3720896f, -0.3672231f, -0.1498238f,
  -0.1908539f, +0.3678399f, +0.0416780f, -0.2656463f, -0.1735487f, -0.0486445f, +0.0457835f, -0.1241615f,
  -0.0831054f, +0.0579139f, -0.1277817f, -0.0621642f, -0.0004767f, +0.0873014f, +0.1396524f, -0.0721485f,
  -0.2488035f, -0.0617835f, +0.3546815f, -0.2689862f, +0.5606306f, +0.0495905f, +0.1142725f, +0.0278677f,
  +0.1704830f, +0.2229204f, +0.0070714f, +0.2905890f, -0.1598208f, -0.0235294f, -0.3413717f, -0.2601953f,
  -0.1036990f, -0.1748472f, -0.1393601f, +0.1370050f, -0.1492741f, -0.2660618f, +0.2833398f, -0.1113269f,
  +0.0294201f, +0.0616660f, -0.1053106f, -0.1885039f, +0.0273061f, +0.0867894f, +0.3183358f, +0.0212327f,
  -0.1441160f, -0.0446507f, +0.0892036f, -0.2890479f, -0.0986655f, +0.3196683f, -0.1649258f, -0.1914917f,
  +0.0796637f, +0.0225383f, -0.1488238f, +0.0841536f, +0.0609551f, +0.1053474f, -0.0530571f, +0.2951082f,
  -0.0447537f, +0.0133395f, -0.1425770f, -0.2560803f, -0.0079458f, -0.0258699f, +0.0086479f, +0.0360482f,
  -0.1047176f, +0.3560270f, -0.2521945f, +0.1712878f, +0.0020315f, +0.3888310f, -0.2772960f, +0.1335346f,
  +0.2609753f, +0.2185703f, +0.0431521f, -0.0218262f, -0.2895181f, -0.0178026f, -0.1024299f, +0.0635321f,
  +0.0815297f, +0.1238587f, +0.1087169f, -0.4656314f, +0.0911031f, +0.0323186f, +0.0675282f, +0.1065242f,
  -0.1118541f, -0.0414541f, -0.0268701f, -0.1888600f, -0.1998511f, +0.2984941f, +0.1631415f, +0.0150858f,
  -0.0489439f, -0.2160342f, -0.0796937f, +0.2183289f, +0.0884281f, +0.2351759f, +0.1361723f, -0.1557041f,
  -0.2765244f, -0.0519499f, +0.0181883f, -0.0575753f, +0.1384085f, +0.1242773f, +0.1072282f, -0.0553213f,
  -0.1142576f, +0.1793436f, +0.0468195f, -0.1518614f, -0.0343774f, +0.1956230f, +0.2181851f, -0.0061636f,
  +0.2386063f, -0.0861687f, +0.1965024f, -0.0891429f, -0.3233742f, -0.1521571f, -0.0966077f, -0.1216109f,
  +0.0728514f, +0.4085808f, -0.1652192f, -0.1556276f, +0.1006803f, -0.0890791f, +0.2732332f, +0.1110661f,
  -0.0463219f, +0.2782078f, -0.2472276f, +0.4667600f, +0.0843450f, -0.0773589f, +0.2537275f, +0.0726402f,
  -0.0417072f, +0.0080946f, -0.2160709f, +0.2279958f, -0.0710087f, -0.1861645f, +0.1702411f, +0.2397553f,
  -0.0322973f, +0.2981941f, -0.0766114f, +0.1250652f, -0.1035157f, +0.0064742f, +0.2100313f, +0.0268276f,
  -0.2558318f, -0.2989706f, -0.1288107f, +0.5393025f, -0.0481941f, -0.0363453f, +0.0743106f, +0.2010780f,
  -0.0741989f, -0.0648735f, -0.1821984f, -0.0240617f, -0.2236525f, +0.0289810f, -0.0227525f, +0.1150650f,
  -0.1378157f, +0.0195020f, +0.0443436f, +0.0947568f, -0.0422573f, +0.0632851f, +0.1979702f, -0.0492053f,
  -0.0692666f, +0.1029313f, +0.1160773f, +0.2549253f, -0.2456518f, +0.1100984f, -0.0046394f, -0.0530715f,
  +0.0619125f, +0.1689110f, +0.0027429f, +0.0118758f, -0.1459693f, +0.0954980f, -0.2539926f, +0.2920710f,
  +0.1298243f, +0.0090421f, -0.2028322f, +0.1017602f, +0.2805951f, -0.0765095f, -0.1096030f, -0.0709420f,
  -0.1108098f, +0.2841252f, +0.0116700f, -0.2251684f, -0.0663466f, +0.1079961f, -0.0341420f, -0.0043009f,
  -0.0212624f, -0.1094869f, +0.1007763f, +0.0247080f, -0.0100844f, +0.0196533f, +0.1896956f, +0.0428477f,
  +0.0759857f, +0.1072167f, +0.2817453f, -0.3508011f, +0.4091423f, -0.2901894f, -0.0867618f, -0.0666961f,
  -0.0474483f, -0.3061134f, +0.1591175f, +0.0788623f, -0.1863546f, -0.2104748f, -0.2323916f, -0.1153971f,
  -0.0715508f, -0.1251696f, +0.0323994f, +0.2739720f, -0.5520723f, -0.0906051f, +0.1874771f, -0.0111925f,
  +0.0887185f, -0.0529647f, +0.0284795f, -0.0778076f, +0.0653754f, +0.0400201f, +0.1648525f, +0.0449555f,
  -0.0090962f, +0.1295227f, -0.0658299f, +0.0850717f, -0.0604329f, -0.2406102f, -0.1370407f, -0.1493252f,
  +0.1465401f, -0.2609958f, +0.1244778f, +0.0621338f, -0.1166558f, -0.2850706f, +0.0810618f, -0.0631213f
);

const float biases[4] = float[4](
  +0.0175461f, +0.0264163f, -0.0284095f, -0.0253840f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer56 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1072832f, +0.0273702f, -0.0017917f, +0.1907770f, +0.0286491f, -0.1439586f, -0.0462421f, -0.3399335f,
  -0.0876083f, +0.0204319f, -0.0766408f, -0.1252819f, +0.0291314f, +0.1260387f, -0.2284824f, -0.1854755f,
  +0.1369407f, +0.0607962f, -0.1837468f, +0.1394581f, -0.0856475f, +0.2468591f, +0.1003022f, +0.2564742f,
  +0.0383586f, -0.0927330f, +0.0018503f, -0.0531977f, +0.0900872f, +0.0554497f, -0.0074956f, +0.0170704f,
  +0.3057291f, -0.1224135f, +0.1518853f, -0.2857903f, -0.0810148f, +0.0941358f, -0.2776379f, -0.1302503f,
  -0.1204326f, +0.1067731f, +0.0748442f, -0.2245425f, -0.0351689f, +0.1804210f, +0.0033532f, +0.3252526f,
  -0.0498796f, -0.0388604f, +0.2820747f, +0.0283675f, +0.1846118f, -0.0658767f, +0.0418754f, +0.0264110f,
  +0.1635806f, +0.0335867f, -0.1723959f, -0.0303169f, +0.0097430f, +0.0840277f, +0.0445466f, +0.3809284f,
  -0.0840671f, +0.1383150f, -0.0957587f, -0.1005676f, -0.1477923f, +0.0566703f, +0.0370245f, +0.0558570f,
  -0.1919639f, +0.1662388f, -0.1910293f, +0.1182311f, -0.0510249f, +0.0654069f, +0.0019659f, +0.4147316f,
  -0.2752076f, -0.2518161f, -0.0325295f, -0.0549026f, +0.0071741f, +0.0596996f, +0.2342449f, -0.0619870f,
  +0.2485323f, -0.2349822f, +0.2723659f, +0.0079366f, -0.0135790f, +0.0125048f, -0.0441563f, +0.1802066f,
  -0.1644261f, +0.2897645f, -0.0337662f, -0.1221696f, -0.2313163f, +0.0436010f, -0.3309086f, +0.2738303f,
  -0.1192643f, -0.0653484f, +0.0126456f, -0.2145159f, -0.1645320f, +0.2427862f, +0.1301293f, -0.0703082f,
  -0.2496179f, +0.1148334f, -0.2369819f, -0.0034488f, +0.1227986f, -0.2262488f, -0.0416071f, +0.1207709f,
  -0.3544153f, +0.1056622f, -0.0725341f, +0.0181769f, -0.2262814f, -0.1346094f, +0.0789030f, +0.2721171f,
  -0.1261541f, -0.2163338f, -0.0918923f, +0.3281542f, -0.2924418f, -0.2459705f, +0.1956035f, -0.1270082f,
  -0.1314549f, -0.0213428f, -0.0107874f, +0.2115745f, +0.1371738f, -0.2713444f, -0.1564042f, -0.0632441f,
  -0.0492185f, +0.0782446f, -0.3008705f, -0.2315486f, +0.0914641f, +0.0581729f, -0.3236114f, -0.3919778f,
  -0.3027512f, -0.0336644f, -0.0195801f, +0.2315973f, +0.0725146f, -0.0087477f, +0.1023310f, +0.1697538f,
  -0.0801123f, +0.1387727f, +0.0110901f, -0.0650236f, +0.0471497f, +0.1072710f, +0.0367593f, -0.1080267f,
  -0.1135912f, +0.0570419f, -0.1957668f, -0.1146760f, +0.0466095f, -0.0486739f, -0.3900149f, -0.3900168f,
  -0.3604855f, +0.0102331f, -0.5894461f, -0.2001899f, +0.0424098f, +0.0395879f, -0.1520917f, -0.2465322f,
  -0.0136853f, -0.2406531f, -0.0191008f, +0.2060270f, -0.2634930f, +0.0297807f, +0.0784058f, -0.0015315f,
  +0.0674915f, -0.1611563f, -0.0020998f, -0.2966626f, +0.0800020f, -0.1016004f, -0.1712389f, -0.4376477f,
  -0.2962794f, -0.0050925f, +0.2003146f, +0.0874244f, -0.0640420f, +0.0718705f, -0.1966231f, -0.0402749f,
  -0.0408036f, -0.2985974f, -0.1205257f, +0.0002954f, -0.1144944f, +0.0353247f, +0.2476496f, -0.0850238f,
  -0.0243893f, +0.2028483f, +0.0915585f, -0.0414859f, +0.0845644f, -0.2220270f, -0.0775111f, +0.0908531f,
  -0.1497992f, +0.0401150f, +0.0495177f, -0.0698368f, +0.2706349f, +0.0059907f, +0.3143728f, -0.1085942f,
  +0.3679565f, -0.3012781f, +0.2247051f, -0.0087418f, +0.1296107f, -0.0193166f, +0.2117083f, -0.0801015f,
  -0.1908300f, +0.1011119f, +0.0307533f, +0.1095065f, +0.0124044f, -0.0922657f, +0.4033320f, -0.2595436f,
  +0.0195244f, +0.1978723f, +0.3778536f, +0.1416802f, +0.2434485f, +0.1450302f, -0.1127452f, +0.1265831f,
  +0.0329120f, -0.1174185f, +0.2391855f, +0.0755797f, +0.1591543f, +0.2433029f, +0.1854301f, -0.0396404f,
  -0.1913915f, +0.0907159f, +0.1459574f, -0.1590060f, +0.3179469f, -0.0095652f, -0.0979228f, -0.0656003f,
  +0.0356898f, +0.2039375f, +0.3631569f, -0.2683438f, +0.3297920f, -0.0889018f, -0.0958687f, -0.0953488f,
  +0.1066438f, -0.2077778f, +0.1318578f, +0.0563984f, -0.0617658f, -0.0469593f, +0.3569452f, +0.0876384f
);

const float biases[4] = float[4](
  +0.0060988f, -0.0176361f, -0.0048530f, +0.0026499f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer56 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1001776f, -0.1423417f, -0.3108893f, -0.0636457f, +0.0147493f, -0.0856588f, -0.1240446f, +0.2129239f,
  -0.0368534f, -0.2973978f, -0.1674643f, -0.1311890f, -0.0086617f, +0.1268683f, +0.0576163f, -0.2628511f,
  -0.0780854f, -0.3391070f, -0.1361002f, +0.0336203f, -0.1101453f, -0.0902182f, -0.1278091f, +0.1675481f,
  +0.0741879f, -0.1907890f, -0.5184857f, -0.0596414f, -0.0577268f, -0.0324191f, -0.1912795f, +0.0618251f,
  +0.0344900f, -0.2160005f, +0.1172111f, -0.0911674f, +0.1898863f, +0.3731769f, -0.2742397f, -0.0271341f,
  -0.0497706f, -0.1139746f, -0.1802974f, -0.0939301f, -0.3107867f, +0.0712275f, +0.0107896f, +0.0416009f,
  +0.1938277f, -0.2120770f, -0.7430620f, +0.1284974f, -0.2346430f, +0.1634673f, -0.3103835f, +0.2479401f,
  -0.3125518f, -0.3122525f, -0.1475477f, -0.0134269f, +0.0027164f, -0.1979989f, -0.1405264f, +0.1525102f,
  +0.0852936f, -0.1093791f, -0.0081234f, -0.1140250f, +0.0454950f, -0.0563135f, -0.2911714f, -0.2596248f,
  +0.1819391f, -0.0112141f, +0.2742379f, +0.0016136f, -0.0649274f, +0.1071587f, +0.0765688f, -0.0339642f,
  +0.2002785f, +0.0119399f, -0.0570025f, +0.1864105f, -0.1441121f, -0.1356996f, -0.1716189f, -0.2528034f,
  +0.0157689f, +0.2204766f, +0.1476054f, -0.1790667f, -0.0734866f, +0.0098790f, +0.0166928f, -0.3848893f,
  +0.1057331f, -0.0091936f, +0.2932105f, -0.2016628f, +0.1181153f, -0.0475719f, +0.4156605f, -0.1375130f,
  +0.1342676f, -0.0440670f, -0.1218636f, -0.1592582f, +0.2560568f, -0.2263199f, +0.3245252f, +0.0337355f,
  +0.0867817f, +0.1204008f, -0.0688608f, -0.0421937f, +0.0069065f, +0.1168977f, -0.2816540f, +0.2001175f,
  +0.0800180f, -0.1237829f, +0.0843730f, -0.0436996f, +0.1189415f, +0.0747120f, +0.0799392f, +0.1408770f,
  +0.1103512f, -0.0699603f, -0.0356303f, +0.3314508f, +0.1502825f, +0.1196554f, -0.3404947f, +0.1757675f,
  +0.0193344f, -0.0342693f, -0.0035371f, +0.0315784f, -0.0100880f, +0.0305595f, -0.0827543f, -0.0626697f,
  +0.0008609f, -0.2734828f, -0.0806804f, +0.0468282f, +0.1274116f, -0.0879294f, -0.1371247f, -0.2140644f,
  -0.3856174f, -0.0351330f, -0.2640158f, +0.0972968f, +0.1231792f, -0.1664906f, +0.2065872f, +0.0378734f,
  -0.0759309f, -0.3636979f, -0.0496734f, +0.1348798f, -0.1350130f, -0.2375932f, +0.0413050f, -0.4127084f,
  +0.2397405f, -0.1965734f, -0.1918564f, -0.1351328f, -0.0423203f, +0.0369384f, +0.1187660f, -0.1021313f,
  -0.2850201f, +0.0724791f, -0.0152789f, -0.0935590f, +0.2568650f, +0.0899356f, -0.1807938f, +0.1690486f,
  -0.1458561f, -0.1886804f, +0.2451308f, +0.3100956f, +0.1607822f, -0.2052121f, +0.0466512f, +0.1002598f,
  -0.0558376f, +0.0856831f, -0.0845217f, +0.1499975f, -0.0859436f, +0.2569639f, -0.1399510f, +0.0203979f,
  -0.0188756f, -0.0944313f, -0.0833577f, -0.0369179f, +0.1123798f, +0.1018201f, -0.2660285f, +0.0411602f,
  -0.2604887f, -0.0757758f, -0.2284423f, +0.1197115f, +0.1702937f, -0.0213865f, -0.0849530f, +0.1255000f,
  -0.0008983f, +0.0615216f, -0.0778118f, +0.0665159f, -0.1395136f, +0.3060305f, -0.0762592f, +0.0312496f,
  -0.2764137f, -0.0233555f, -0.2263872f, -0.1273244f, -0.0755984f, -0.0988399f, +0.0290701f, +0.1576104f,
  +0.0123401f, -0.2226774f, -0.0431056f, +0.1829862f, +0.1016053f, +0.0576445f, -0.0047545f, +0.0931934f,
  +0.0013419f, +0.0278716f, -0.0909292f, +0.1220136f, +0.0278059f, +0.1171533f, -0.1418860f, +0.1831368f,
  +0.1552806f, -0.2572056f, +0.2157619f, +0.0129019f, -0.0366265f, +0.0952270f, +0.0023367f, -0.1197310f,
  -0.2680096f, -0.0336553f, -0.0356582f, +0.0948798f, -0.3110538f, -0.0798093f, -0.1610480f, +0.1414117f,
  -0.2103575f, -0.0140871f, -0.1317138f, +0.0891570f, -0.0861610f, -0.0414315f, -0.0665468f, +0.3638370f,
  -0.1201385f, -0.3157808f, -0.5240312f, +0.0363422f, +0.0218046f, -0.1896904f, -0.2357199f, +0.2110262f,
  -0.3972896f, -0.1566653f, -0.4145907f, +0.0519812f, +0.1758354f, -0.1224850f, -0.2111472f, +0.1514805f
);

const float biases[4] = float[4](
  +0.0157977f, +0.0209232f, -0.0295689f, +0.0410164f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer57 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0886974f, +0.1629501f, +0.0141499f, -0.1138341f, -0.1670768f, -0.0219541f, +0.0142804f, -0.1893914f,
  +0.0347900f, -0.2312535f, +0.0278286f, +0.0255393f, -0.0708720f, +0.0592480f, -0.1466192f, -0.2162164f,
  -0.0918569f, +0.0117523f, +0.1660082f, -0.2894598f, -0.2084900f, -0.1011666f, -0.0163687f, -0.0060205f,
  +0.1043809f, -0.2273876f, -0.2020111f, -0.0334645f, +0.0033168f, -0.1811206f, -0.1865793f, -0.2230098f,
  -0.0859398f, -0.2508032f, -0.3757592f, -0.0082520f, +0.2709771f, +0.1498828f, -0.3530423f, -0.0007696f,
  -0.1638606f, +0.1994714f, -0.1155007f, -0.0505003f, +0.0560258f, +0.0058477f, -0.0795560f, -0.0238559f,
  +0.0796251f, -0.0938363f, -0.1066583f, +0.0595944f, +0.1455544f, -0.0270471f, +0.1001638f, +0.0243905f,
  +0.2346409f, -0.2273048f, -0.2717898f, +0.1415325f, -0.1227065f, +0.1197226f, +0.0688860f, -0.0165140f,
  -0.0384647f, -0.0727263f, +0.0335333f, -0.1625344f, +0.0803255f, -0.1917511f, +0.0902546f, -0.1913071f,
  +0.1123696f, +0.0194062f, -0.0497158f, +0.0805741f, -0.1307081f, +0.2878940f, -0.0024671f, -0.2564726f,
  -0.0612834f, -0.0542889f, +0.0423474f, -0.0034742f, -0.0437788f, +0.2174762f, -0.1513658f, +0.0749865f,
  +0.0810789f, +0.1824613f, -0.0710517f, +0.0465639f, +0.0063679f, -0.0476408f, -0.0289467f, -0.1098255f,
  +0.1818956f, +0.0372739f, -0.0068021f, -0.1694912f, -0.1939369f, +0.2962295f, -0.3318781f, +0.1774339f,
  +0.0678846f, -0.2618106f, -0.0430048f, +0.1278673f, -0.0910844f, -0.0586371f, -0.0771202f, -0.3809293f,
  -0.1389322f, +0.2018553f, -0.0517160f, +0.0459489f, +0.3123513f, +0.2435722f, -0.4434236f, -0.0312901f,
  -0.2090670f, +0.1084327f, +0.2394350f, -0.1702345f, -0.1267041f, -0.0435219f, -0.0385047f, +0.0446868f,
  +0.0051380f, +0.3284328f, +0.0244529f, +0.1061812f, +0.2421005f, -0.0583611f, -0.1089373f, +0.1257335f,
  -0.0051026f, +0.1689789f, -0.0945628f, -0.0297623f, -0.0515744f, -0.1026228f, -0.2287967f, -0.1261074f,
  -0.0873352f, -0.2586684f, -0.0982202f, +0.1839854f, +0.1101209f, -0.0360661f, +0.0180483f, -0.2612238f,
  -0.2609307f, -0.0048306f, +0.3016298f, -0.0437886f, +0.2011880f, +0.0439629f, +0.0594166f, +0.1002752f,
  -0.0685679f, +0.0346115f, +0.2144025f, -0.1273125f, -0.1526076f, +0.0237218f, -0.2590148f, -0.1424267f,
  +0.0307913f, -0.3201505f, -0.2562959f, -0.1320581f, +0.3219252f, -0.1840283f, +0.2700238f, +0.2170413f,
  +0.2181243f, -0.2245315f, -0.1646553f, -0.5518454f, -0.1383225f, -0.1031542f, +0.3015178f, -0.1472063f,
  +0.1765237f, -0.2251908f, -0.1933014f, -0.2255369f, +0.1118794f, -0.1015663f, +0.0950477f, -0.1557302f,
  +0.1095408f, -0.0132958f, +0.1095114f, +0.1077958f, -0.0609019f, +0.0822092f, -0.2423832f, -0.0238616f,
  -0.1347456f, +0.2727054f, +0.2327688f, +0.2983572f, -0.1448741f, -0.2124739f, +0.0064891f, -0.1465898f,
  +0.0044785f, +0.1619381f, -0.1356132f, +0.3018042f, -0.0261649f, +0.0096989f, -0.0688696f, +0.2095474f,
  +0.0355427f, -0.0392643f, +0.0512415f, +0.0254815f, -0.0725293f, -0.3163934f, -0.0872468f, +0.0912837f,
  +0.0418800f, -0.2255794f, +0.1502557f, +0.1738668f, -0.3489964f, -0.1596902f, -0.3391521f, -0.1535780f,
  -0.0294328f, +0.1139982f, +0.0053131f, +0.0314445f, +0.1125348f, +0.1284175f, -0.1972955f, -0.0434297f,
  +0.0288911f, -0.1726310f, -0.2087156f, -0.0392830f, +0.0020750f, +0.1747840f, +0.0069318f, -0.0936315f,
  +0.2931727f, -0.0364953f, -0.2022940f, -0.2072804f, +0.3344249f, -0.2532014f, +0.0699353f, +0.1598053f,
  +0.3393378f, -0.3325506f, -0.2848948f, +0.0519134f, -0.4934871f, -0.1501769f, +0.4233631f, +0.2160677f,
  -0.1353061f, +0.2010184f, +0.1759046f, -0.0900874f, +0.1333027f, -0.1251341f, +0.1684196f, -0.1306129f,
  -0.1443115f, +0.0279371f, -0.1580365f, +0.0683375f, -0.2489818f, -0.0007783f, -0.1439148f, -0.1791203f,
  -0.2664988f, +0.0165984f, +0.2124432f, +0.0429440f, +0.2016130f, -0.2023131f, -0.0036579f, -0.2256000f
);

const float biases[4] = float[4](
  +0.0735509f, +0.0229284f, +0.0029625f, -0.0017222f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer57 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3265972f, -0.2418967f, -0.0465872f, +0.1825916f, +0.3411533f, +0.3117480f, -0.0743777f, +0.3801839f,
  +0.0318890f, -0.1894169f, +0.1896239f, +0.1114294f, +0.1323078f, -0.0270698f, +0.2833664f, +0.2226170f,
  +0.0380523f, -0.0267382f, +0.0492378f, +0.0289649f, +0.0138150f, +0.0507544f, +0.0188848f, +0.2868392f,
  +0.0312066f, +0.0700954f, -0.1996062f, -0.1555799f, -0.0496214f, +0.1359682f, +0.1690831f, +0.2209571f,
  -0.0465259f, +0.2636930f, -0.0919847f, +0.0956514f, -0.2558827f, -0.1957221f, +0.0156712f, -0.1261422f,
  +0.0442366f, -0.0979985f, +0.0480740f, -0.0202871f, -0.2009674f, -0.0368728f, +0.0622927f, -0.0529905f,
  -0.3682165f, +0.0933321f, +0.1653395f, -0.1481813f, -0.0714148f, -0.0345047f, -0.2122058f, -0.2517797f,
  -0.0005780f, -0.0002847f, -0.0026073f, -0.1967712f, +0.2578279f, +0.0242183f, +0.0548649f, +0.1595935f,
  +0.0366133f, +0.1848210f, +0.0716714f, -0.1716431f, -0.0727689f, +0.1631015f, -0.0832591f, +0.1462538f,
  +0.0412747f, -0.1633971f, +0.0857955f, -0.0646636f, -0.0616240f, -0.0819389f, +0.0971593f, +0.0222342f,
  -0.1258366f, -0.0789265f, -0.0861555f, +0.1524845f, +0.1568121f, +0.4398387f, -0.1650958f, +0.0621435f,
  +0.2502622f, -0.0058658f, -0.0548896f, +0.1831625f, -0.1568387f, +0.1145458f, +0.0470499f, +0.0789096f,
  +0.0218206f, -0.0929024f, +0.0885531f, +0.1508881f, +0.3337322f, +0.2077322f, -0.2815329f, -0.0939859f,
  +0.3291792f, +0.0739630f, -0.0820878f, +0.0982686f, +0.0381551f, +0.0602279f, -0.3581705f, +0.0259481f,
  -0.1210561f, -0.1906128f, +0.2050430f, +0.2039764f, -0.2994743f, +0.0899588f, +0.2499457f, +0.0663025f,
  +0.1118121f, -0.1571113f, +0.0300103f, +0.1246415f, -0.1027926f, -0.0194329f, -0.0722177f, +0.3370233f,
  -0.1314661f, -0.0646664f, +0.3021358f, -0.0340696f, -0.2183680f, -0.2907707f, -0.2191938f, +0.0746564f,
  -0.1088147f, +0.1963653f, -0.0810838f, +0.2171366f, -0.0081073f, -0.1183997f, -0.1065526f, +0.1143084f,
  +0.2260471f, +0.1566495f, -0.0940525f, -0.1489737f, -0.0152557f, -0.2364388f, +0.1701904f, +0.0463874f,
  -0.0618960f, -0.0723216f, -0.0859133f, -0.0842723f, +0.2973794f, -0.0755147f, -0.1622176f, -0.0854210f,
  +0.0506396f, +0.0580893f, +0.0027396f, -0.0775210f, -0.1254710f, +0.1093582f, -0.1473506f, +0.0322297f,
  +0.3200832f, +0.1861222f, +0.0022568f, -0.2956781f, +0.1444021f, +0.1005151f, +0.0861849f, -0.0631099f,
  +0.2869387f, +0.1619679f, +0.2941557f, -0.5500147f, -0.0550499f, -0.1960077f, +0.1030211f, +0.1261156f,
  -0.3693006f, +0.1066575f, -0.1015798f, -0.2336428f, -0.0088990f, -0.0298394f, +0.1000300f, +0.0578031f,
  -0.1650701f, -0.1158372f, +0.2382651f, -0.4279715f, -0.2341971f, +0.0685251f, -0.0115894f, +0.4523216f,
  -0.0309615f, -0.2422146f, +0.1138232f, -0.3008499f, +0.1065480f, -0.2071628f, -0.0356437f, +0.2581468f,
  -0.1343870f, -0.0776871f, +0.0743162f, -0.0443129f, +0.2645663f, +0.0963107f, +0.0860152f, +0.1042267f,
  -0.0371855f, -0.0326117f, -0.0867370f, -0.1370744f, +0.2974107f, -0.2027922f, +0.0263147f, +0.1207293f,
  -0.1576632f, +0.2694977f, -0.1943579f, -0.1165015f, -0.0121892f, -0.1960174f, +0.0114345f, +0.0940825f,
  -0.0456755f, +0.1554473f, -0.0750215f, +0.1218910f, -0.1002124f, -0.0541789f, -0.0542022f, +0.1182250f,
  -0.0183587f, -0.0387415f, +0.2752421f, -0.1052729f, -0.3284503f, -0.0968014f, -0.2077557f, +0.1158143f,
  +0.0361211f, +0.1317240f, -0.1642032f, +0.2235773f, -0.0282963f, -0.0318312f, -0.0354977f, +0.0478037f,
  +0.0161524f, +0.0304680f, +0.0105461f, -0.1697448f, -0.1817810f, +0.0381330f, -0.2063429f, -0.0555529f,
  -0.3021595f, -0.1732678f, +0.0800724f, +0.1961932f, +0.0191843f, +0.0514903f, -0.3870087f, -0.4639331f,
  -0.1562928f, -0.1814190f, +0.0596126f, -0.1866477f, -0.1570545f, +0.0445532f, -0.0279142f, -0.1047561f,
  -0.0332271f, -0.1507402f, +0.3529033f, -0.1619206f, +0.3667366f, +0.0304367f, +0.1102057f, -0.1318482f
);

const float biases[4] = float[4](
  +0.0852360f, +0.0614204f, +0.0041510f, -0.2610108f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer58 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1745790f, +0.1446796f, -0.1863041f, -0.1436210f, -0.0624494f, +0.0457655f, +0.0053741f, +0.0271290f,
  -0.3631047f, +0.0497214f, +0.0821234f, +0.1510480f, -0.1843359f, -0.2528937f, -0.0539493f, -0.2360343f,
  -0.1223698f, +0.1409777f, -0.4699977f, +0.0659593f, +0.0150841f, -0.2036328f, -0.0510525f, -0.2303783f,
  +0.0164778f, -0.1631804f, +0.0648978f, -0.3388862f, +0.0491328f, +0.1378444f, +0.0119201f, +0.1158097f,
  +0.1046794f, -0.1509049f, -0.3259914f, -0.0931579f, +0.0239860f, -0.1966159f, -0.1813661f, +0.4499485f,
  -0.0787447f, -0.0328426f, -0.3095818f, -0.0106914f, -0.0241240f, -0.0082445f, -0.3171858f, -0.1089218f,
  +0.1357284f, +0.0582798f, -0.0476601f, +0.1563274f, -0.2196427f, -0.1749097f, +0.0245644f, +0.1958998f,
  +0.0640858f, +0.0976553f, +0.0942179f, +0.0658637f, -0.1015848f, -0.0860666f, +0.2539607f, +0.0564013f,
  +0.0572434f, -0.0698124f, -0.0908886f, -0.0265220f, -0.3148821f, +0.0951181f, -0.0476199f, -0.0054921f,
  +0.1048397f, -0.0769572f, +0.0799854f, -0.2152662f, +0.0112668f, +0.0775044f, +0.0785166f, +0.3450321f,
  +0.1423033f, -0.0326184f, -0.0777858f, -0.1334484f, +0.0162127f, -0.0558491f, +0.1313580f, -0.0642268f,
  +0.0301919f, -0.0480444f, +0.1299004f, -0.5675501f, -0.2368982f, -0.0502726f, +0.0768019f, +0.5013606f,
  -0.0816557f, +0.0544325f, -0.0614921f, +0.3486217f, +0.1025868f, -0.0692717f, +0.0065167f, -0.1193478f,
  +0.1775029f, +0.1747518f, +0.2176531f, +0.0499657f, -0.0792883f, +0.0438198f, -0.1757537f, -0.1391934f,
  +0.0916238f, +0.1713378f, +0.2608307f, +0.3598955f, +0.3950347f, -0.0971355f, +0.0887120f, +0.0946406f,
  +0.0141565f, -0.1564400f, -0.0379325f, -0.0551248f, +0.1748358f, +0.0514567f, +0.0680958f, -0.1294142f,
  +0.0251746f, -0.1942160f, -0.0191504f, -0.2763162f, -0.0414174f, -0.0076332f, -0.0462752f, +0.0981699f,
  -0.1274808f, +0.1539827f, +0.1325467f, +0.1944425f, +0.1981431f, -0.1682760f, +0.0502203f, +0.0884058f,
  +0.1770542f, +0.0641710f, +0.1306084f, -0.2989949f, +0.0800836f, +0.2869731f, -0.1670621f, -0.1854181f,
  +0.4307056f, +0.0839176f, -0.2043151f, +0.0838261f, +0.2066606f, -0.2333544f, -0.2548026f, -0.0176479f,
  +0.2015615f, +0.0047955f, -0.1687033f, -0.0188197f, -0.2241126f, -0.1778782f, -0.0866113f, -0.2745525f,
  +0.0684306f, +0.0077029f, -0.2635088f, +0.0898336f, -0.0224816f, -0.1937285f, -0.1394849f, +0.1300940f,
  +0.2484061f, -0.1331473f, -0.1138036f, -0.3685851f, -0.1138213f, -0.0932614f, -0.3674780f, -0.0599691f,
  -0.0254815f, +0.0309713f, -0.0097175f, +0.1092954f, -0.0166380f, -0.0515895f, -0.2112640f, +0.2160015f,
  +0.0331417f, -0.1518259f, -0.1512980f, -0.0900720f, +0.0981416f, -0.0841817f, +0.0769305f, +0.0017863f,
  +0.3234880f, +0.0537366f, +0.0261909f, +0.1142141f, +0.1343356f, -0.1069656f, -0.0667120f, -0.0767243f,
  +0.0564836f, -0.1490980f, +0.0039079f, -0.0459197f, +0.0180652f, +0.1135509f, -0.0133154f, +0.0385837f,
  +0.3362201f, +0.0134282f, -0.1290882f, +0.1588774f, -0.0979073f, -0.2756474f, +0.1167439f, +0.2374704f,
  -0.3126498f, +0.0513870f, -0.1615041f, +0.0759370f, +0.1332304f, +0.0270234f, +0.5597512f, +0.2675137f,
  -0.0344897f, -0.0846092f, -0.1722553f, +0.1978088f, -0.0860542f, -0.0800416f, +0.2623599f, +0.0561547f,
  -0.1483531f, +0.2134223f, +0.3475285f, -0.1062348f, +0.0095315f, -0.1112601f, -0.0133004f, -0.1156353f,
  -0.3389835f, -0.0975954f, +0.3197882f, +0.3212313f, -0.0614006f, -0.2168259f, +0.3024259f, +0.0983824f,
  +0.1568221f, +0.2472133f, +0.4956427f, -0.1004204f, +0.3452497f, -0.0695426f, +0.4633195f, +0.1485522f,
  -0.0903040f, +0.0081231f, -0.0220776f, +0.0393652f, -0.0997256f, +0.0771988f, -0.0492071f, +0.0649832f,
  +0.0408293f, +0.0859373f, +0.0549084f, +0.2040581f, +0.0577637f, +0.0460867f, +0.1385830f, +0.0832782f,
  +0.2180960f, +0.1231233f, -0.0014988f, +0.3108838f, -0.2806362f, +0.0303438f, +0.0126199f, -0.1816991f
);

const float biases[4] = float[4](
  -0.0152525f, -0.0407081f, +0.0072191f, -0.0044395f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer58 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2299956f, -0.0473327f, +0.1652998f, -0.1859087f, +0.0481467f, -0.0185004f, +0.0792645f, +0.1512440f,
  -0.1057683f, -0.2457182f, +0.1742908f, -0.0498714f, +0.2124137f, -0.2857631f, +0.0280207f, +0.2334082f,
  +0.0480981f, +0.0035114f, -0.1190101f, +0.0591728f, +0.0505846f, +0.0891264f, -0.1391441f, -0.0072685f,
  -0.1287103f, -0.1871248f, -0.1682210f, +0.3151020f, +0.0133200f, +0.1258776f, -0.0363082f, +0.0475929f,
  -0.1014955f, +0.4000590f, -0.0891628f, -0.0659264f, +0.0961477f, -0.0727181f, -0.0949749f, -0.0848409f,
  +0.0644443f, +0.0969991f, -0.1436596f, +0.0139269f, -0.1868790f, -0.2128415f, +0.1734278f, -0.2208810f,
  +0.0029345f, -0.3376966f, -0.0089644f, -0.1190072f, +0.2677308f, -0.0879210f, -0.0509685f, -0.2419635f,
  -0.2540504f, +0.4055541f, -0.0368833f, +0.2242730f, -0.0421064f, +0.0732518f, -0.2897447f, +0.0218731f,
  -0.3967670f, +0.0137899f, -0.0330110f, -0.0520212f, -0.0872994f, -0.2719521f, -0.1426381f, -0.0210629f,
  +0.0595529f, -0.0037042f, +0.1738213f, +0.1017304f, -0.1245411f, +0.0464616f, -0.0610206f, +0.0731697f,
  -0.2872337f, -0.0578015f, -0.0442642f, -0.0438536f, -0.0838875f, -0.1231709f, -0.1847306f, +0.0021855f,
  -0.1813556f, +0.0199267f, +0.0513150f, +0.0240963f, +0.0129905f, +0.4124941f, -0.0709575f, +0.0621697f,
  -0.2712768f, -0.1612593f, +0.1995143f, -0.1124929f, +0.0251840f, +0.1388818f, +0.0265428f, +0.2247386f,
  -0.4863142f, +0.1290071f, -0.0042934f, -0.0377772f, -0.1080504f, +0.0566640f, +0.2425507f, +0.2144031f,
  +0.0461692f, -0.0605558f, +0.1506058f, -0.2082412f, -0.0922358f, -0.0310105f, +0.0214651f, -0.0265109f,
  -0.2048594f, +0.0765697f, +0.1454152f, +0.1015288f, +0.1562273f, +0.0955641f, -0.0010536f, +0.1717934f,
  -0.2811286f, +0.0208395f, -0.0132326f, -0.0503879f, -0.1176151f, +0.0141184f, +0.1213736f, -0.0462201f,
  -0.2052418f, -0.2491944f, -0.0715992f, +0.0903204f, +0.0526400f, -0.0135205f, +0.0802579f, +0.0899464f,
  +0.1602674f, -0.0508912f, -0.1062388f, +0.1320708f, +0.0411207f, -0.0565013f, +0.0138411f, -0.0332773f,
  +0.3015991f, -0.0900515f, +0.1689749f, -0.1020203f, +0.1150161f, -0.0309444f, -0.1072584f, +0.2313710f,
  +0.2493389f, +0.0247943f, -0.0694633f, -0.0763636f, +0.0684012f, -0.0546336f, +0.0073192f, +0.4945633f,
  +0.1233125f, +0.3599988f, -0.0150732f, -0.0389436f, -0.0331789f, -0.2987385f, -0.0703227f, -0.0290111f,
  +0.4555348f, +0.0286132f, -0.1884704f, +0.0796608f, +0.0178122f, +0.2303228f, +0.1470691f, -0.4141258f,
  -0.0168038f, +0.0219315f, +0.0918377f, -0.1111033f, -0.1713281f, +0.2120835f, -0.0789587f, -0.0318062f,
  +0.0214075f, +0.0622465f, +0.1023457f, +0.1498371f, -0.2501575f, -0.0516358f, +0.1074321f, -0.1926167f,
  -0.1146231f, -0.1076243f, +0.3102417f, +0.1458041f, -0.2608129f, +0.1024412f, -0.0429989f, -0.0411952f,
  +0.1513236f, -0.0902001f, +0.3459025f, +0.1974899f, -0.1573277f, +0.1323606f, +0.0865969f, -0.0566408f,
  +0.0202258f, +0.0324482f, +0.1442387f, +0.0726592f, -0.0429671f, -0.0340064f, -0.0373866f, -0.2231349f,
  +0.1668309f, -0.1953606f, -0.2012487f, +0.0017772f, -0.1472306f, -0.0355211f, -0.0093309f, -0.2176375f,
  +0.0056679f, +0.3801584f, -0.1028032f, +0.2736135f, +0.1070319f, -0.3577666f, -0.0230935f, -0.2915711f,
  +0.1305208f, +0.0168323f, -0.0048321f, -0.2773255f, +0.0007424f, -0.1363661f, -0.0197683f, +0.1428851f,
  +0.1254101f, -0.1091815f, -0.3086292f, +0.0004567f, -0.2047587f, +0.2336809f, -0.2014922f, +0.1097557f,
  +0.1937581f, -0.0432545f, -0.4353199f, -0.2441311f, +0.0307714f, -0.0173635f, -0.2599761f, -0.1212362f,
  +0.1316505f, +0.0730997f, -0.3657830f, +0.0574772f, -0.0661259f, +0.0131688f, +0.1799200f, -0.0187472f,
  -0.0112615f, +0.0286224f, -0.1233438f, +0.2540564f, -0.2367574f, -0.1303257f, +0.0927733f, -0.0543051f,
  -0.1602212f, +0.0249004f, -0.0383912f, -0.1355244f, -0.1370550f, +0.2672885f, +0.0453300f, +0.0217585f
);

const float biases[4] = float[4](
  +0.0086697f, +0.0048856f, -0.0089467f, -0.0021207f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer59 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1031794f, +0.0786998f, -0.2286637f, +0.0336096f, +0.0455726f, -0.0780955f, +0.1900985f, -0.1534984f,
  +0.2824163f, +0.1819231f, +0.2774123f, -0.2073328f, +0.4026284f, -0.0850746f, -0.3025597f, +0.0097013f,
  -0.1796735f, +0.1948734f, -0.2177821f, -0.0733339f, +0.2086315f, +0.0106289f, +0.1295919f, +0.2250410f,
  -0.1337174f, -0.1885775f, -0.2191115f, +0.2143072f, -0.1477244f, +0.1073659f, +0.3896354f, +0.0493042f,
  +0.1506948f, -0.1183322f, -0.2055230f, -0.3872832f, +0.1164286f, -0.1257099f, -0.4130283f, +0.1235112f,
  +0.0025725f, +0.1854191f, +0.1702698f, -0.0298719f, -0.0288531f, -0.1777458f, -0.1243815f, -0.0650146f,
  +0.0099775f, +0.0528091f, +0.2692492f, +0.3587799f, -0.0948714f, +0.3129840f, +0.0666418f, -0.4055635f,
  -0.0229505f, -0.3750259f, -0.1998732f, -0.5881255f, +0.2739377f, -0.2596538f, +0.1895678f, +0.1347618f,
  -0.1878447f, +0.0686277f, -0.0449150f, -0.2620250f, -0.2323211f, -0.2008408f, +0.0609234f, +0.2684657f,
  -0.1304791f, +0.1059824f, +0.2942928f, +0.2203804f, -0.0221034f, +0.1313782f, -0.0591690f, -0.2207863f,
  +0.0337785f, +0.2809320f, +0.4151415f, -0.2544475f, +0.2024998f, -0.0451980f, -0.0361453f, -0.1507628f,
  -0.0374159f, +0.1119824f, +0.0488975f, +0.1210087f, -0.0968640f, +0.0100379f, +0.0433469f, -0.1215948f,
  +0.0217244f, +0.0638619f, +0.0709613f, +0.1356996f, +0.2980636f, +0.1368213f, +0.2030585f, -0.3159891f,
  +0.0313874f, +0.0006470f, +0.1174285f, -0.3069386f, -0.3294351f, +0.1206734f, +0.0621493f, +0.0305777f,
  -0.0403848f, -0.1262751f, -0.0009997f, -0.1640734f, +0.1542279f, -0.0496048f, +0.0447366f, -0.1492207f,
  -0.1239823f, -0.0117829f, -0.1007479f, -0.1687114f, -0.2801016f, +0.3495129f, -0.1739616f, +0.0593219f,
  -0.1585896f, +0.1469804f, +0.1263330f, -0.2079738f, +0.1785699f, -0.0443065f, -0.0623903f, +0.5011874f,
  -0.1646981f, +0.1344175f, +0.2436161f, -0.0774455f, -0.0691869f, -0.1538772f, +0.1362779f, +0.0158430f,
  +0.0872268f, +0.0372680f, -0.4100483f, -0.1711270f, -0.3921080f, -0.2495091f, +0.1802213f, -0.1848021f,
  -0.1337585f, -0.1036909f, -0.1083367f, +0.0638095f, +0.3138954f, -0.5679900f, -0.3088968f, -0.1998837f,
  -0.0035605f, -0.0371369f, -0.1112594f, +0.1155377f, +0.0680221f, -0.0863263f, -0.3002147f, -0.3187613f,
  +0.0017646f, -0.0367905f, -0.2884414f, +0.2469239f, +0.1450125f, -0.5156183f, -0.0219303f, +0.0959272f,
  -0.1393473f, -0.3224672f, -0.1287223f, +0.1495975f, -0.1141423f, +0.0225445f, -0.0142062f, -0.2069847f,
  +0.0113947f, -0.1981870f, +0.2849399f, -0.0470237f, +0.5790229f, -0.1578633f, +0.0317503f, +0.0298662f,
  -0.2641236f, -0.0100040f, +0.0054988f, -0.1193416f, +0.1995413f, +0.1520701f, -0.0662759f, +0.2024566f,
  +0.0170097f, +0.2901325f, -0.3564817f, +0.0401085f, +0.0188646f, -0.0858749f, +0.0905221f, +0.2331480f,
  +0.0382555f, -0.0964753f, -0.3258733f, +0.5462971f, -0.0641790f, +0.0516996f, +0.0909379f, -0.0282129f,
  +0.3851551f, -0.1307033f, +0.1290157f, -0.4249023f, -0.1341434f, -0.3396761f, +0.1026278f, -0.1881444f,
  +0.3422089f, -0.2798319f, +0.0248656f, -0.2572686f, -0.0249488f, -0.2625466f, -0.1073795f, +0.3514782f,
  -0.0839952f, -0.0133005f, -0.2903808f, -0.1263546f, -0.0250033f, +0.0910256f, +0.1247347f, +0.3078811f,
  +0.1460548f, -0.2521899f, +0.2222330f, -0.3390868f, +0.2887173f, +0.3015804f, +0.2133254f, +0.2371608f,
  +0.3119933f, -0.0804499f, +0.0009227f, -0.1114483f, -0.2145521f, -0.2778772f, -0.2412862f, +0.3289809f,
  -0.0231039f, +0.2341861f, -0.3555437f, +0.5548596f, +0.0476375f, +0.0492767f, +0.1212603f, +0.0148910f,
  -0.1094849f, -0.2914176f, -0.1646612f, -0.0029176f, -0.2811707f, -0.0828640f, +0.0470486f, -0.1037010f,
  +0.0661281f, +0.2361616f, +0.0316220f, -0.1448140f, +0.1036993f, -0.2120506f, -0.2765066f, +0.2089562f,
  -0.0983308f, -0.0471613f, -0.1157577f, -0.0767951f, +0.2430203f, -0.0059484f, +0.1218625f, -0.0299507f
);

const float biases[4] = float[4](
  -0.0518023f, +0.0098435f, -0.0241167f, -0.0077137f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer59 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0066720f, -0.2679632f, -0.0810918f, +0.0429867f, +0.2128457f, +0.2420064f, -0.0517171f, +0.0284051f,
  +0.0371628f, +0.3266469f, -0.0978582f, +0.3197683f, -0.1551527f, +0.0288629f, +0.1990488f, +0.3916105f,
  -0.0161061f, +0.1380655f, +0.0503737f, -0.1294135f, +0.0320023f, -0.0086989f, +0.1008550f, +0.0421456f,
  -0.0248509f, -0.1904182f, -0.1504479f, -0.0419498f, +0.0325549f, -0.0254262f, -0.2008798f, +0.0592938f,
  +0.0622430f, -0.1081175f, +0.0547840f, +0.1630734f, +0.1949910f, -0.2280089f, +0.2552721f, +0.1740509f,
  -0.1331847f, -0.1684257f, -0.0739994f, -0.0202465f, +0.1202759f, +0.0419940f, +0.1999980f, -0.1162804f,
  -0.0512277f, -0.0241130f, -0.0035053f, +0.0069664f, +0.0959228f, -0.0748158f, +0.0785426f, -0.1431584f,
  +0.1039780f, +0.1130196f, +0.0105602f, -0.0428151f, -0.2416305f, +0.0780437f, +0.1933129f, +0.1117609f,
  -0.2136713f, -0.2143650f, +0.0111786f, -0.1918668f, +0.0835878f, -0.2779664f, +0.5016283f, -0.1947000f,
  -0.2442872f, -0.2304441f, +0.1091672f, +0.3096056f, +0.0803917f, -0.0405635f, -0.0134586f, -0.2168367f,
  +0.0670402f, -0.1644863f, -0.4269166f, +0.2331177f, +0.0304463f, -0.0082161f, -0.0497379f, -0.4765618f,
  +0.0499818f, -0.2493303f, -0.3239274f, +0.1348909f, -0.2104529f, -0.1938789f, -0.1384828f, -0.1148169f,
  +0.1236068f, -0.3372953f, -0.0939676f, +0.1278666f, +0.0161618f, +0.0626861f, +0.0585172f, -0.0045724f,
  -0.1109919f, -0.2681107f, -0.0205242f, -0.0967464f, -0.2096072f, -0.0938586f, +0.4489593f, -0.0378580f,
  -0.0647341f, +0.2470089f, -0.0896093f, +0.1135746f, +0.1430430f, -0.3265202f, -0.0689323f, +0.1396845f,
  -0.0977722f, +0.1954258f, -0.0369695f, -0.0779038f, -0.1461587f, +0.0799546f, +0.2689710f, -0.1498686f,
  +0.3621559f, -0.2869048f, -0.0929436f, -0.1527752f, +0.2729182f, -0.3666255f, -0.1304146f, +0.2320190f,
  -0.3096378f, +0.3252980f, +0.1903086f, -0.2507442f, +0.1694491f, -0.4140133f, -0.3652700f, +0.1941929f,
  -0.0883797f, -0.0068232f, -0.1282914f, -0.1769623f, -0.2980888f, -0.3310651f, +0.0683802f, -0.1638476f,
  +0.1274093f, +0.0491052f, +0.0115483f, -0.4226465f, +0.1835070f, -0.2018647f, -0.2905100f, -0.1453673f,
  -0.1447424f, +0.0820069f, -0.0630853f, +0.0751142f, +0.4133767f, +0.0861172f, -0.0102642f, +0.0938255f,
  +0.1488511f, -0.1916990f, -0.2120772f, +0.1691692f, +0.2637098f, -0.2904123f, -0.0884741f, -0.2549638f,
  -0.2512703f, -0.0788945f, -0.2316138f, -0.2418351f, +0.1877847f, +0.3132133f, +0.1914847f, +0.1337381f,
  -0.1497775f, +0.1448443f, +0.1056254f, -0.2089377f, +0.0603351f, -0.0143873f, +0.1279797f, +0.0853197f,
  +0.1011620f, -0.3217438f, -0.2171884f, -0.3930275f, +0.3003273f, -0.2039322f, +0.0732311f, -0.0615670f,
  -0.1140582f, -0.0988877f, -0.3348272f, +0.0694261f, +0.3052939f, -0.3837435f, +0.0672924f, +0.2302054f,
  +0.0124577f, -0.2033916f, +0.0069236f, +0.0221980f, +0.1705433f, -0.1963248f, +0.0212451f, +0.2287553f,
  -0.1502302f, -0.0741728f, +0.1863802f, +0.1516389f, -0.0053519f, +0.0862030f, -0.2458624f, -0.1135441f,
  +0.1280335f, +0.1810728f, +0.0091567f, +0.0512744f, -0.1344858f, -0.1046892f, +0.2784310f, +0.0873405f,
  -0.0181008f, +0.1933539f, -0.1307632f, +0.2370634f, +0.0963086f, -0.1075574f, +0.2515974f, -0.1833898f,
  +0.0965339f, -0.0756093f, +0.1507125f, -0.0208561f, +0.0340194f, +0.3487075f, +0.0262411f, +0.1990099f,
  +0.2521137f, -0.0438666f, -0.1616696f, +0.0010239f, -0.0494751f, -0.2184312f, +0.1877618f, -0.2351395f,
  +0.0466924f, -0.0016462f, -0.3256676f, +0.2161244f, +0.2710598f, +0.2507260f, +0.2964017f, -0.0475582f,
  -0.2074220f, -0.0449649f, +0.2677704f, +0.1560727f, +0.0246794f, +0.0809393f, +0.0894818f, +0.0626871f,
  -0.1426542f, +0.0054267f, -0.0753684f, +0.1288972f, +0.0031831f, -0.3200355f, -0.3047613f, +0.1447310f,
  -0.2430324f, -0.1595921f, +0.0487711f, +0.3655383f, -0.2936510f, +0.0919040f, -0.0080692f, -0.0574989f
);

const float biases[4] = float[4](
  -0.0485673f, -0.0199057f, +0.0391475f, -0.0024334f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer60 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1170491f, +0.1418181f, -0.2921811f, -0.0574466f, +0.0302771f, +0.0626277f, -0.0473221f, -0.0985601f,
  -0.0303087f, -0.0864567f, -0.1213046f, -0.0544127f, -0.1091149f, -0.2432911f, +0.0182605f, -0.1828236f,
  -0.0814492f, +0.1766461f, +0.0079369f, +0.1917758f, +0.2295913f, -0.0321417f, +0.0419312f, -0.0191508f,
  +0.0295879f, +0.1680436f, +0.2300233f, -0.1061963f, -0.1408963f, -0.0166527f, +0.2848534f, -0.0517781f,
  -0.4096285f, +0.0826196f, -0.1152487f, -0.3886279f, -0.0146803f, +0.1005764f, +0.0079258f, -0.1949104f,
  +0.1405218f, +0.1915212f, +0.0185360f, +0.0290748f, -0.0691170f, -0.1381266f, -0.1051580f, -0.3675743f,
  +0.0036768f, -0.0388745f, +0.0691577f, +0.0174975f, +0.1529044f, -0.1012458f, -0.1582540f, -0.0240574f,
  +0.0342649f, -0.0084107f, -0.1942812f, -0.0993622f, -0.1839831f, +0.2623274f, +0.0346433f, +0.1705523f,
  -0.1224043f, +0.1463418f, -0.2464778f, -0.0458146f, -0.0873281f, -0.1779190f, +0.1544957f, +0.1055035f,
  -0.1053834f, +0.0316625f, +0.3424515f, +0.0671640f, -0.3171416f, -0.2607575f, +0.0442703f, +0.1268250f,
  -0.0650324f, -0.0501977f, -0.0115245f, -0.2044557f, +0.2374082f, +0.1451131f, +0.0278059f, +0.1385472f,
  +0.0279539f, -0.2159021f, +0.2700384f, -0.1424909f, -0.0497740f, +0.1976956f, +0.2634829f, +0.0587374f,
  -0.1584873f, -0.0098431f, -0.0268313f, +0.1478816f, -0.1298830f, -0.1186098f, +0.2232222f, +0.1553356f,
  +0.2470698f, -0.1245853f, +0.1002495f, -0.0488093f, +0.4219046f, +0.1331145f, +0.0300817f, +0.3303783f,
  +0.1765729f, +0.1317517f, -0.2390549f, +0.3018905f, -0.1224437f, +0.1798090f, -0.1518386f, +0.1711056f,
  -0.3161380f, -0.0643765f, +0.0209071f, +0.5813348f, +0.0212546f, -0.0639656f, +0.1720179f, -0.0589216f,
  +0.1126844f, -0.0255551f, -0.1752261f, +0.1323119f, +0.1497529f, -0.0908101f, -0.0507150f, +0.1561062f,
  +0.1621790f, -0.0905682f, +0.1783688f, -0.1345674f, +0.2634487f, +0.2324272f, -0.3039458f, -0.1433367f,
  +0.2124249f, +0.0703944f, +0.1170723f, +0.3483992f, -0.0379088f, -0.0076202f, -0.1717844f, +0.3017170f,
  +0.4797161f, +0.1710274f, -0.1637386f, +0.4033462f, -0.1328528f, -0.0109785f, +0.2890193f, -0.0016376f,
  +0.0216010f, +0.1076577f, -0.2355419f, +0.2372640f, -0.0589555f, +0.1143458f, +0.2394282f, -0.0139549f,
  +0.1772918f, +0.2745077f, -0.2985362f, +0.2174040f, +0.1237886f, +0.0616655f, -0.1436242f, +0.2330053f,
  +0.0147648f, +0.1404508f, -0.0410902f, +0.1199555f, -0.1678812f, +0.0794178f, +0.3466063f, +0.1433945f,
  +0.0358389f, +0.3996308f, -0.1868974f, -0.0094021f, +0.0079559f, -0.2496443f, +0.4047374f, +0.2196486f,
  -0.1519166f, +0.1164972f, +0.2777748f, -0.0062873f, +0.0114889f, +0.0178103f, +0.0149463f, +0.0622533f,
  -0.1642759f, -0.1411143f, -0.0737541f, -0.1872762f, -0.0878366f, -0.3369052f, -0.0076209f, -0.0132105f,
  -0.0701744f, +0.2605247f, +0.1692546f, +0.0565577f, +0.2877920f, -0.2084299f, -0.2089594f, +0.1538506f,
  +0.0341039f, -0.1860067f, -0.2513220f, +0.0177040f, -0.1722848f, -0.0181166f, +0.0770010f, -0.0711119f,
  -0.2106804f, -0.0667870f, +0.2393046f, +0.0427207f, -0.1736341f, +0.3562095f, -0.3366279f, +0.0865254f,
  -0.1368504f, +0.0161697f, -0.1308548f, -0.2701584f, -0.0238996f, +0.0272421f, +0.0650782f, +0.1494900f,
  +0.0739971f, +0.2256109f, +0.2062017f, -0.2377604f, -0.2347474f, -0.1698923f, +0.2242284f, +0.4215132f,
  +0.1226767f, -0.0638220f, -0.0403338f, -0.1509378f, -0.0759772f, -0.0940319f, +0.0548856f, +0.3835340f,
  -0.2775754f, -0.5057216f, +0.2014112f, +0.1826781f, +0.2829359f, -0.1747725f, -0.2898501f, +0.2934823f,
  +0.0521947f, -0.1384099f, -0.2051272f, -0.0326911f, +0.0370603f, +0.1464019f, -0.2052295f, +0.0695198f,
  -0.2702785f, +0.0032016f, -0.1987247f, +0.1923075f, -0.3930569f, +0.0960557f, +0.2859451f, +0.1063238f,
  +0.0934694f, -0.0325747f, +0.3088748f, +0.0281119f, +0.2193908f, +0.0867645f, +0.0396029f, +0.1874724f
);

const float biases[4] = float[4](
  -0.0229349f, +0.0003451f, +0.0246138f, -0.0042252f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer60 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1893465f, -0.1367945f, +0.0008992f, -0.2080076f, +0.2626235f, -0.2086310f, +0.0307505f, -0.1782434f,
  -0.1706992f, -0.0137233f, +0.1140893f, -0.1155192f, +0.0999274f, -0.0712077f, +0.0364764f, -0.0422017f,
  -0.1859271f, +0.0820732f, -0.0111831f, +0.1205201f, +0.1810680f, -0.2660400f, +0.0152318f, +0.0488153f,
  -0.1615077f, +0.1375905f, -0.1870792f, -0.2688980f, +0.3187514f, -0.1643893f, +0.2720921f, -0.1474294f,
  -0.0837752f, +0.2371429f, -0.0152985f, +0.0689638f, -0.5439888f, +0.0447934f, -0.3145228f, -0.2181313f,
  -0.3373502f, -0.1870180f, -0.1430632f, -0.0473049f, +0.1854243f, +0.0062282f, +0.2869848f, +0.3486963f,
  +0.0154880f, +0.3953269f, -0.5085235f, -0.1066532f, +0.2067256f, +0.2237332f, +0.0384441f, -0.0538047f,
  +0.1288180f, -0.1671397f, -0.2505595f, +0.0604893f, +0.0477055f, -0.2895487f, -0.0738445f, -0.1553344f,
  +0.0670662f, -0.0670375f, +0.1584703f, +0.1098310f, -0.1014673f, -0.1391293f, +0.2033470f, -0.2317923f,
  +0.0671938f, +0.1404862f, -0.1457871f, +0.2129539f, -0.0406027f, -0.0499130f, +0.3117898f, -0.0461071f,
  +0.1052937f, +0.1436843f, -0.1026746f, -0.2364789f, +0.1231254f, -0.0512452f, +0.4801204f, -0.0609231f,
  +0.0301977f, -0.1537153f, -0.1931144f, -0.1868429f, +0.0320087f, -0.2499960f, +0.0831265f, -0.0665385f,
  +0.1112395f, -0.0183312f, -0.1799765f, -0.0477946f, +0.1441135f, +0.1617559f, -0.1636570f, -0.3035442f,
  -0.0093147f, -0.2598692f, +0.2276116f, -0.0992886f, +0.3751637f, -0.1162808f, -0.7872416f, +0.1201330f,
  +0.2067276f, -0.0856066f, +0.0102404f, -0.0724122f, -0.1885897f, -0.2088306f, +0.0505864f, -0.0066515f,
  +0.0812326f, -0.1917764f, +0.2109510f, +0.1453883f, +0.0766184f, -0.1087292f, -0.2400445f, -0.0505677f,
  -0.0134577f, -0.2149168f, -0.0457693f, +0.1121365f, +0.4162655f, -0.1927830f, +0.2425909f, +0.0098732f,
  -0.0255023f, +0.1530440f, -0.0468869f, +0.2731698f, -0.1939844f, -0.2257968f, +0.2197986f, -0.0438634f,
  +0.3321023f, -0.0995781f, +0.1436595f, +0.2717261f, +0.1653375f, -0.0695429f, -0.3250845f, -0.0667577f,
  +0.4706167f, +0.0766177f, +0.2688746f, +0.1693010f, -0.0303472f, -0.0715058f, +0.2770082f, -0.1056066f,
  +0.1547417f, +0.0073176f, -0.2217020f, -0.1178834f, -0.1466691f, -0.0683340f, +0.2495882f, -0.1279174f,
  +0.0220476f, -0.0503045f, -0.1163145f, -0.4129913f, -0.1564291f, +0.4959421f, -0.1876626f, +0.2326584f,
  +0.0838353f, -0.2269108f, +0.2132602f, -0.1014920f, -0.3625992f, -0.0949841f, -0.2174170f, -0.2121384f,
  +0.3865102f, +0.1650794f, -0.1245281f, +0.0291123f, +0.1031807f, +0.2470184f, +0.2344858f, -0.1793896f,
  -0.3485481f, -0.1862533f, +0.0744231f, +0.0492877f, -0.0939342f, +0.3774253f, +0.0977764f, +0.1246563f,
  +0.2418639f, +0.1900682f, +0.1112245f, -0.2662908f, -0.2273063f, -0.0533749f, +0.1932019f, +0.0786453f,
  -0.0886500f, -0.0384739f, -0.5469538f, -0.1141537f, +0.1976316f, +0.1137633f, -0.0055606f, -0.0447960f,
  +0.0545333f, +0.0512559f, +0.0716588f, +0.0912969f, -0.3652119f, -0.0841580f, -0.0350211f, -0.2258057f,
  +0.1292495f, -0.0446021f, -0.2857882f, -0.0985078f, +0.0670264f, -0.2008543f, -0.1680581f, -0.0477232f,
  -0.1263967f, +0.1134201f, +0.0452199f, +0.0131289f, +0.2060608f, +0.2464860f, +0.0646763f, -0.1206136f,
  -0.1282846f, -0.0924283f, +0.1124698f, +0.1683581f, -0.1659445f, +0.0404665f, +0.0594470f, -0.1729054f,
  -0.1035865f, +0.0523103f, +0.0648195f, -0.5506645f, +0.2928945f, +0.1033154f, -0.1292162f, -0.1476416f,
  +0.2757020f, +0.3845856f, +0.2335469f, -0.0212967f, +0.0610856f, +0.0262284f, +0.3481389f, -0.5040327f,
  -0.3277030f, +0.0201824f, +0.0468370f, -0.1290284f, -0.2768173f, +0.0815327f, +0.1545273f, -0.0305924f,
  +0.1208710f, -0.0347647f, +0.1374984f, -0.0152630f, +0.0355249f, +0.2777827f, +0.1310079f, -0.1189931f,
  -0.1136656f, +0.0282028f, -0.0609807f, -0.2479741f, +0.1608720f, +0.0945462f, +0.0957743f, -0.0094961f
);

const float biases[4] = float[4](
  -0.0197452f, +0.0167926f, -0.0067062f, +0.0125831f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer61 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1008492f, +0.0981011f, +0.1416616f, +0.1443382f, -0.0777762f, +0.2114482f, +0.1729622f, -0.0310692f,
  +0.0172489f, +0.2594040f, -0.0082147f, +0.0153292f, +0.1493319f, +0.2264877f, -0.1672363f, -0.2065316f,
  -0.2457772f, -0.0883931f, -0.0607104f, -0.0316658f, +0.1188972f, +0.3591143f, -0.0647799f, -0.2323206f,
  -0.0390302f, -0.2456322f, +0.1324616f, +0.1969986f, +0.0588753f, +0.0533580f, +0.0290621f, +0.0294271f,
  -0.3292598f, +0.1188597f, +0.1768151f, -0.1453028f, +0.1817930f, -0.2031990f, +0.0459842f, -0.0773868f,
  -0.0884190f, -0.1412728f, +0.0845583f, +0.2164945f, +0.0784398f, +0.1504972f, -0.0954320f, -0.0574090f,
  -0.0098020f, +0.0189692f, -0.0393165f, -0.0240951f, +0.0972709f, -0.0209447f, +0.0595154f, -0.0709349f,
  -0.0944131f, +0.0476468f, +0.0870100f, -0.1223271f, -0.0688219f, +0.0284777f, -0.0360762f, -0.0776805f,
  +0.1485011f, +0.1481429f, -0.1605893f, +0.0811168f, +0.1461866f, -0.0826183f, -0.0940773f, -0.1031424f,
  +0.0450332f, +0.0086803f, -0.0059193f, +0.0575362f, +0.1052120f, +0.0425053f, -0.0089676f, +0.0097220f,
  -0.1961631f, +0.1861887f, -0.1065119f, +0.0187853f, +0.2470182f, -0.2010567f, +0.1440059f, -0.0415377f,
  -0.2795604f, +0.2455820f, -0.2985516f, +0.3044996f, +0.0107522f, -0.0903153f, -0.2074890f, -0.2343557f,
  +0.0205718f, -0.0270801f, +0.1379274f, -0.2514812f, +0.3145591f, +0.0191509f, +0.0927610f, +0.0700351f,
  +0.1974146f, +0.5245708f, +0.2053184f, -0.2719747f, +0.1920286f, -0.1041240f, +0.0932448f, +0.3504466f,
  -0.4218817f, +0.2702180f, -0.1172017f, -0.0069910f, +0.6646923f, -0.1833603f, -0.0013591f, -0.2725177f,
  -0.1613917f, +0.1049224f, -0.1666345f, -0.2974939f, -0.0957002f, +0.1282504f, -0.1286813f, +0.2016547f,
  -0.2318314f, -0.2353720f, +0.2181782f, -0.5507838f, -0.1654389f, -0.0507415f, -0.2355261f, +0.4293667f,
  +0.2861094f, +0.1027512f, +0.3687373f, +0.1879881f, -0.0156308f, -0.1602736f, -0.0371462f, -0.1832640f,
  +0.1056941f, +0.0266272f, -0.1195251f, -0.2635635f, +0.0882087f, -0.3989649f, +0.3521660f, -0.1954836f,
  -0.0065360f, -0.1683748f, +0.0244885f, +0.0932304f, -0.0145077f, -0.2808545f, +0.2485477f, -0.0694697f,
  -0.1965133f, -0.0452453f, +0.1097233f, +0.1004536f, +0.0081818f, -0.0238980f, -0.0561783f, -0.0593881f,
  -0.1615083f, +0.0155615f, -0.3973037f, +0.2086645f, +0.2116280f, -0.0881438f, +0.0908982f, -0.0045536f,
  +0.1435570f, -0.1686698f, +0.0315254f, -0.5059637f, -0.0952620f, +0.0018042f, +0.3281192f, +0.0468489f,
  +0.0292243f, -0.0064895f, -0.1698363f, +0.0871920f, -0.3553586f, -0.0445451f, -0.0004094f, -0.0567886f,
  -0.2224708f, -0.0790108f, -0.4864208f, -0.1665047f, -0.0086310f, -0.1486783f, -0.0115017f, -0.1702698f,
  -0.0191271f, +0.0071746f, -0.0791284f, -0.0814677f, +0.0896104f, -0.1629528f, -0.1945271f, +0.0711877f,
  +0.0751004f, -0.0024845f, -0.2055456f, +0.1269378f, +0.0286825f, +0.0731323f, +0.0813798f, +0.2206282f,
  -0.0782579f, +0.2474454f, -0.1419628f, -0.1046905f, -0.1468645f, +0.1150723f, -0.1742120f, -0.1308899f,
  -0.1290290f, +0.1595415f, -0.1765667f, +0.0284702f, -0.1341056f, +0.0716291f, -0.0011307f, -0.1515709f,
  -0.0074403f, -0.0743318f, -0.0784279f, -0.1620220f, -0.2889837f, +0.0146723f, +0.1312566f, +0.0598347f,
  -0.0319222f, -0.0638902f, +0.0341084f, +0.1062487f, -0.1967045f, -0.0546474f, +0.1757797f, -0.1886519f,
  +0.0943765f, +0.4127557f, +0.0398229f, -0.5721813f, -0.0311107f, +0.2527079f, +0.1099847f, +0.3187502f,
  +0.1807405f, -0.0130260f, -0.0380361f, +0.0560115f, -0.2993965f, +0.1696067f, -0.0424290f, +0.2469161f,
  -0.0545318f, -0.1867613f, +0.1916131f, +0.1178303f, +0.1002345f, +0.3070986f, -0.2113038f, +0.0903266f,
  -0.1599642f, +0.0425145f, -0.0617051f, -0.2296078f, +0.0049013f, -0.0591594f, +0.4190110f, +0.2687981f,
  +0.1898046f, +0.0440768f, -0.3527550f, +0.2206294f, -0.2398782f, +0.2475305f, -0.0858462f, +0.2134733f
);

const float biases[4] = float[4](
  +0.0042654f, -0.0709702f, +0.0108287f, +0.0537713f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer61 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1324741f, -0.0092181f, +0.2036295f, +0.0201233f, +0.1125162f, +0.2738081f, +0.0544802f, +0.0764153f,
  -0.2792048f, -0.0482301f, +0.0348936f, +0.0874064f, -0.0005746f, +0.1143809f, -0.0667821f, -0.0470482f,
  +0.0227782f, +0.0199188f, +0.2223590f, -0.0337685f, +0.2904329f, +0.0894266f, +0.1242874f, -0.0410984f,
  -0.0096938f, -0.1960643f, +0.0705320f, +0.3258602f, -0.0090267f, +0.0610319f, -0.0069058f, +0.0635306f,
  +0.1270889f, +0.0077557f, -0.2881321f, +0.0589962f, -0.5178767f, -0.1719335f, -0.1377033f, -0.0167637f,
  -0.0119698f, +0.1186017f, +0.0993803f, -0.0119315f, +0.4359407f, -0.1768309f, +0.3250786f, -0.0181069f,
  -0.0436650f, +0.0841917f, -0.1310578f, +0.2144966f, +0.0890401f, -0.0728542f, -0.0291290f, +0.0332862f,
  +0.2072513f, +0.1079005f, -0.2938405f, +0.0170601f, +0.0311528f, +0.1013129f, -0.2415862f, -0.0294629f,
  -0.1817454f, -0.1810497f, +0.1872060f, +0.0433742f, +0.4039903f, -0.0897004f, +0.2932757f, -0.1731585f,
  -0.0517324f, -0.0131839f, +0.0804664f, -0.1036112f, -0.0023479f, +0.0661977f, -0.1586458f, -0.0122354f,
  +0.0315209f, -0.0204449f, -0.1107481f, +0.0030663f, -0.0720700f, +0.0265622f, +0.2129546f, +0.0914981f,
  +0.1888340f, -0.0320615f, -0.0497651f, +0.0267950f, -0.1996582f, -0.1005337f, +0.0438930f, +0.0650457f,
  -0.2394113f, -0.2386916f, +0.0403357f, +0.0563843f, +0.0039251f, +0.0484421f, -0.2547702f, -0.0484310f,
  +0.3711067f, +0.2216681f, -0.0930442f, +0.0739995f, -0.5948360f, +0.0549592f, +0.3434663f, +0.1681415f,
  -0.0943126f, -0.0972964f, +0.1673345f, -0.1750604f, +0.2715852f, +0.1070692f, -0.0459902f, -0.0493300f,
  -0.3963327f, +0.0326479f, +0.0363867f, +0.0837677f, +0.1839159f, +0.1506833f, -0.1234743f, +0.2187016f,
  +0.2470187f, +0.3733023f, -0.3052613f, +0.1965256f, -0.2490877f, -0.0148465f, -0.2443267f, +0.0091428f,
  +0.1941886f, -0.0982814f, +0.1628042f, -0.0512951f, +0.0190466f, -0.0988833f, +0.0672714f, -0.2009630f,
  +0.0037743f, -0.0231433f, +0.1397370f, +0.1752244f, -0.1215161f, +0.1065027f, -0.0726489f, -0.0697131f,
  +0.0263385f, -0.0624345f, +0.1241008f, +0.1082408f, +0.2232565f, +0.0085960f, -0.1912666f, -0.0054527f,
  +0.0589819f, +0.1489615f, +0.0317496f, +0.1114296f, +0.0139921f, +0.0851513f, -0.1364709f, +0.0758585f,
  +0.1830879f, +0.1187734f, -0.2418103f, -0.0251508f, -0.0825820f, -0.2035509f, +0.3650087f, +0.0740546f,
  -0.0794879f, +0.0786330f, -0.2186415f, -0.1042225f, -0.1916251f, +0.1240027f, -0.2376839f, -0.1552581f,
  +0.0441051f, -0.1234719f, -0.0247177f, +0.0988022f, -0.0163695f, +0.0841965f, +0.0677551f, -0.1331483f,
  +0.0578604f, -0.1291773f, -0.1573228f, -0.1598467f, -0.0840399f, -0.2549821f, -0.2169547f, -0.3046083f,
  -0.2207359f, +0.3540987f, -0.3322368f, -0.3581443f, +0.2353286f, -0.7417133f, -0.1196044f, +0.0301865f,
  -0.3156413f, -0.1012664f, -0.0937398f, -0.1667665f, +0.0602737f, -0.2541415f, -0.0407359f, -0.0839480f,
  -0.0052844f, -0.1163154f, +0.0847897f, +0.1659032f, -0.0813342f, -0.0780621f, +0.1845186f, -0.2485093f,
  -0.5246455f, -0.0546555f, +0.2171451f, -0.2527202f, -0.1220900f, +0.0352303f, +0.0101949f, -0.2234534f,
  +0.1924210f, +0.0866229f, +0.2135953f, -0.0092946f, +0.0753968f, +0.0266780f, +0.0585191f, +0.0820504f,
  -0.1373291f, +0.1556454f, -0.1678423f, +0.1141891f, +0.0206436f, +0.0583391f, +0.1326618f, -0.1871880f,
  -0.1847728f, -0.0252590f, +0.1704281f, +0.0227568f, +0.1400005f, +0.2462758f, -0.0304928f, -0.0475301f,
  +0.0336547f, +0.1216113f, +0.0126096f, -0.1266699f, +0.1648901f, +0.4474461f, -0.0909990f, -0.2009531f,
  +0.1725299f, -0.0989153f, -0.2199617f, -0.1972354f, +0.0131577f, +0.2048497f, -0.0623199f, +0.0802981f,
  -0.3022792f, +0.2300221f, +0.0813087f, +0.1906407f, -0.0931262f, -0.1431479f, -0.0836953f, +0.0295321f,
  +0.2038957f, +0.1406331f, -0.0242368f, +0.2745846f, -0.1656321f, +0.1061241f, -0.0213922f, -0.0004001f
);

const float biases[4] = float[4](
  +0.0249881f, +0.0280341f, -0.0085357f, +0.0396937f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer62 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2475669f, +0.2743157f, +0.1984386f, -0.0730120f, +0.0054253f, +0.0516202f, -0.0212770f, -0.2074219f,
  -0.2264386f, +0.0071430f, -0.0113302f, +0.2748826f, -0.0544183f, +0.0116512f, +0.0045636f, +0.3320464f,
  +0.1483352f, +0.1988791f, +0.1322941f, +0.1277136f, +0.0425242f, +0.0542926f, -0.1273830f, -0.1590816f,
  -0.0334510f, -0.3346143f, +0.0149517f, -0.1726753f, +0.0827941f, +0.2766725f, +0.0263505f, +0.0326101f,
  +0.0961613f, +0.1614502f, +0.1239810f, +0.0267411f, -0.1525573f, -0.2649563f, -0.1652052f, -0.1562425f,
  +0.0120608f, +0.2597854f, -0.1210039f, -0.0038954f, -0.0644579f, +0.0219860f, +0.1592812f, +0.0159671f,
  +0.2577766f, +0.0187122f, +0.1972289f, +0.0038915f, -0.0415194f, -0.0817117f, -0.2651884f, -0.1170061f,
  +0.2860311f, -0.0747595f, -0.0432360f, -0.0856814f, +0.0598229f, +0.1076341f, +0.0884738f, +0.1854249f,
  +0.0038536f, +0.0456552f, -0.0587502f, +0.0406235f, +0.0424977f, -0.1457420f, +0.1544788f, -0.0497967f,
  +0.0052704f, +0.0006062f, +0.0002143f, -0.0818165f, +0.1261150f, +0.1222760f, +0.1595663f, +0.0644958f,
  +0.0469401f, -0.6667579f, +0.0306139f, -0.2186991f, -0.1373042f, -0.3753563f, -0.3056313f, -0.0681979f,
  +0.0008063f, -0.2164069f, -0.0793529f, -0.0646435f, -0.1398307f, -0.2980990f, -0.2193351f, +0.0700036f,
  +0.0304214f, -0.0971627f, +0.0104767f, +0.1426108f, +0.2126846f, -0.0029805f, +0.1404050f, -0.1015109f,
  -0.0205787f, +0.5112411f, -0.0151747f, -0.2654698f, +0.0256160f, -0.1082380f, -0.1286652f, -0.1709429f,
  -0.1101283f, -0.2125092f, -0.1528130f, +0.0818766f, -0.1004414f, +0.3211014f, +0.0090722f, -0.1537885f,
  -0.0248496f, -0.0677826f, +0.0390575f, -0.0206853f, -0.1804394f, +0.0612943f, +0.0235754f, -0.0880996f,
  +0.0520071f, +0.0094920f, +0.1218146f, -0.0026848f, -0.2173461f, +0.1326774f, -0.0178794f, +0.0720076f,
  +0.2406801f, -0.0919150f, +0.0767988f, +0.2028707f, +0.0566873f, +0.0712180f, +0.1109003f, +0.2158093f,
  -0.0453931f, -0.0596551f, -0.0329062f, +0.1274615f, +0.0146762f, +0.1875853f, +0.1412569f, +0.0607927f,
  +0.0692218f, -0.2154577f, +0.2533975f, +0.0438361f, +0.0029884f, +0.2645341f, -0.1928737f, -0.1447805f,
  +0.0150911f, -0.1559436f, +0.0200014f, +0.0210248f, +0.0632450f, -0.2353468f, -0.1912133f, +0.1801957f,
  -0.0243844f, -0.4048201f, +0.0135825f, -0.2483609f, -0.1584929f, -0.0011657f, -0.3143303f, +0.0356282f,
  +0.0392184f, -0.2529914f, -0.0028038f, +0.1267486f, +0.0663879f, -0.0147627f, +0.2164696f, -0.0485483f,
  +0.0235383f, +0.0914933f, +0.2607847f, -0.0728628f, -0.0773197f, -0.3969563f, -0.0395653f, +0.0228686f,
  +0.3583817f, -0.0570333f, -0.1643355f, -0.1988122f, -0.2259073f, -0.1044682f, +0.0933484f, -0.2344794f,
  -0.0362867f, +0.1911359f, -0.0699070f, +0.0744627f, +0.1579901f, -0.0667097f, -0.0480111f, -0.0353292f,
  +0.1786235f, +0.1032432f, +0.2435631f, +0.0979348f, +0.0275447f, -0.0018841f, -0.2838182f, -0.0422131f,
  -0.1134620f, +0.4661174f, +0.1134925f, -0.3010677f, +0.3567935f, +0.1947347f, +0.1479211f, -0.0820035f,
  +0.0420788f, +0.0390853f, +0.1925844f, +0.1957292f, +0.0606711f, -0.0832195f, +0.1241939f, +0.1545068f,
  +0.0101164f, -0.0011723f, +0.1149050f, -0.1019761f, -0.0812394f, +0.0320801f, +0.1212995f, -0.1158662f,
  +0.1802154f, -0.5793944f, +0.1428637f, -0.1819867f, +0.4477856f, +0.3359661f, +0.0434482f, +0.0537020f,
  +0.0465228f, -0.0312708f, +0.1138875f, +0.3930624f, +0.1739328f, +0.1319110f, +0.1581412f, -0.0558983f,
  -0.0293994f, +0.3267226f, -0.0643834f, -0.1814771f, +0.1011567f, -0.2701802f, +0.1688902f, -0.1237948f,
  +0.1173544f, +0.0331518f, +0.2370333f, +0.0933481f, +0.2811812f, -0.0587926f, +0.3838821f, +0.0708574f,
  +0.1064663f, -0.0856642f, +0.1249386f, +0.2241752f, -0.1536023f, +0.0607369f, +0.1482932f, +0.2473751f,
  -0.1153328f, -0.0267451f, +0.2270898f, -0.2002492f, -0.2446476f, +0.0307386f, -0.0160380f, -0.0670190f
);

const float biases[4] = float[4](
  -0.0404759f, +0.0028696f, -0.0089728f, +0.0006189f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer62 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2173922f, -0.0943296f, -0.0023096f, +0.1983467f, +0.0598447f, -0.0204002f, -0.2230136f, +0.0321087f,
  +0.1476260f, -0.2323680f, +0.1551013f, -0.1515843f, +0.1332078f, +0.2565985f, -0.5694193f, +0.2242467f,
  +0.1237020f, -0.0221107f, -0.0757111f, -0.0078537f, +0.0782788f, -0.0766235f, +0.4479831f, +0.0462540f,
  -0.0801363f, +0.4134697f, -0.1505951f, +0.2019495f, -0.1202036f, -0.3196903f, +0.2075456f, -0.1040899f,
  -0.0614897f, -0.2313805f, -0.0444620f, -0.1959680f, +0.2090205f, +0.6551612f, +0.1115165f, -0.0155563f,
  -0.1158553f, +0.0240505f, -0.2242649f, -0.1704470f, +0.0508425f, +0.1759429f, +0.0956525f, -0.1686008f,
  -0.0550861f, -0.0325940f, +0.0163304f, +0.0121292f, -0.2142690f, +0.3123895f, -0.3333272f, -0.2484176f,
  -0.1989802f, +0.0231164f, -0.1960197f, +0.0013420f, +0.0520727f, -0.1084130f, +0.0530895f, +0.0381723f,
  +0.1363074f, -0.0878877f, +0.0526867f, +0.0542708f, -0.0994875f, +0.0531847f, -0.1095366f, -0.2625164f,
  -0.0307569f, -0.2337849f, +0.1996365f, +0.0438193f, -0.0675555f, -0.1332094f, -0.1734475f, -0.2034058f,
  +0.1396918f, -0.2155025f, -0.1681376f, +0.2186574f, -0.1073130f, -0.1141957f, -0.0296974f, +0.0281135f,
  +0.0059490f, -0.2761638f, -0.1119538f, -0.1232080f, -0.1300663f, +0.0738806f, -0.1083905f, -0.2140425f,
  +0.2191092f, +0.0651811f, +0.0540059f, -0.1213785f, -0.0957554f, -0.0679707f, -0.2637875f, -0.2477032f,
  +0.1669707f, +0.2184626f, +0.0094591f, -0.4200982f, +0.1768422f, -0.0397854f, -0.0780814f, +0.0679345f,
  +0.3061275f, -0.0787703f, -0.0654773f, -0.1714393f, -0.2540306f, +0.0177380f, +0.2749203f, +0.1113242f,
  -0.2972943f, -0.0159553f, +0.1874707f, +0.3103687f, +0.0980353f, +0.0336496f, +0.0570068f, +0.0482353f,
  -0.3896784f, +0.0769963f, -0.0371314f, -0.1135192f, +0.0196166f, +0.0041318f, -0.1230050f, +0.0973550f,
  +0.0635943f, -0.0362752f, -0.1876127f, -0.0868257f, -0.0969849f, +0.0532039f, -0.1180884f, +0.0367015f,
  +0.1629462f, +0.0889661f, +0.2312297f, -0.1487477f, +0.1017405f, -0.1092006f, +0.3083561f, -0.1235326f,
  -0.1428918f, -0.2651516f, +0.3850136f, -0.2248691f, +0.4003741f, +0.3665207f, +0.3215903f, -0.0113047f,
  +0.2104942f, -0.1091767f, +0.1602810f, +0.0092256f, +0.2371158f, +0.1628643f, -0.2105317f, -0.0243902f,
  -0.1667065f, +0.0783375f, +0.0049589f, -0.2463358f, -0.2500903f, +0.0027807f, -0.2644826f, +0.1369618f,
  +0.0847447f, +0.3822530f, +0.1068281f, -0.1785270f, +0.1433595f, -0.0466557f, +0.1898234f, +0.1205132f,
  +0.0483325f, -0.1566789f, +0.3166623f, -0.0547597f, +0.1128017f, +0.2713636f, -0.2328259f, -0.0416034f,
  +0.1892213f, -0.0303077f, +0.1038703f, +0.0800730f, -0.1113429f, -0.1106643f, +0.1598330f, +0.0572073f,
  -0.0909953f, -0.0133877f, +0.0015751f, +0.0737604f, +0.0494957f, -0.1194559f, -0.0046615f, +0.1583881f,
  -0.1701925f, -0.0114952f, +0.1336961f, +0.0330584f, -0.0419375f, -0.0425678f, +0.1766944f, +0.0449235f,
  +0.0515112f, +0.3949660f, +0.0090643f, +0.0868877f, +0.2269256f, +0.0858912f, +0.1124485f, -0.1077870f,
  -0.1952995f, -0.1664843f, +0.0644146f, -0.1009454f, -0.2031204f, -0.1692355f, +0.1472193f, +0.0246453f,
  +0.0726948f, +0.1162742f, +0.0303405f, +0.2253238f, -0.0333900f, -0.2612032f, +0.1270780f, +0.0858805f,
  -0.0537998f, +0.3616025f, -0.1808636f, -0.0419370f, +0.1128502f, -0.0282196f, -0.0041179f, -0.1075753f,
  -0.1399302f, +0.3722254f, +0.0726757f, -0.4328468f, +0.0776532f, -0.1873036f, +0.0046114f, +0.0058218f,
  -0.0405441f, -0.0477505f, +0.3231684f, +0.2869090f, +0.1803295f, +0.1615232f, +0.0106364f, +0.1752009f,
  +0.1151376f, +0.0086776f, -0.0429568f, -0.1177876f, -0.1179637f, +0.0646518f, -0.1025164f, -0.1361316f,
  +0.0479921f, +0.0528619f, +0.0521574f, -0.0426469f, +0.0823329f, +0.2408778f, -0.1272612f, -0.0194515f,
  +0.1779562f, +0.1212771f, -0.0190750f, +0.0466357f, +0.0508914f, +0.1000690f, +0.0896598f, +0.0133601f
);

const float biases[4] = float[4](
  -0.0165949f, +0.0060790f, -0.0491633f, +0.0238861f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer63 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1055278f, +0.0729809f, +0.0198680f, +0.0458173f, +0.0004486f, +0.1077487f, -0.1397431f, +0.1190413f,
  +0.1423386f, -0.1999061f, -0.0948708f, +0.0630834f, -0.2132568f, +0.0812092f, -0.0248718f, -0.4759579f,
  -0.0558180f, -0.0601066f, -0.0145766f, -0.0137444f, -0.0547917f, -0.1470909f, +0.2592519f, -0.0973071f,
  +0.2343553f, +0.1410069f, -0.0881985f, -0.6146091f, +0.2058977f, -0.0941984f, +0.3352247f, -0.4568118f,
  +0.2693154f, +0.1359843f, +0.1248478f, -0.6211389f, +0.3314278f, -0.0398235f, +0.1638101f, -0.0166691f,
  -0.1824288f, -0.0358426f, -0.2456633f, -0.3188172f, -0.1198467f, -0.0596984f, +0.1192326f, +0.3697024f,
  -0.1302398f, -0.0941269f, +0.0277969f, -0.4591023f, +0.1321687f, -0.1235385f, -0.1818001f, +0.1290576f,
  +0.0911052f, -0.1649381f, +0.2455479f, +0.3604041f, +0.2010156f, -0.2732292f, -0.0398855f, -0.0577402f,
  -0.1446504f, +0.0473196f, +0.0647995f, -0.1853880f, -0.0558154f, +0.2511713f, -0.1495804f, +0.0652953f,
  -0.1813817f, -0.1539990f, -0.0874982f, -0.0347400f, +0.1506202f, +0.1383957f, +0.0272153f, +0.1128155f,
  +0.0534299f, -0.0785329f, +0.1267378f, -0.1964205f, -0.1467529f, -0.0237512f, -0.0676124f, +0.0516294f,
  +0.1007288f, +0.0777355f, -0.0207041f, -0.0573373f, -0.1106235f, +0.0470999f, -0.1371539f, -0.0456590f,
  -0.1915004f, -0.2474314f, +0.1500238f, -0.0898655f, -0.0333314f, -0.2641900f, +0.2630376f, -0.2749951f,
  -0.1839868f, +0.1127099f, -0.1332963f, +0.1905884f, -0.1517049f, -0.0038049f, +0.1276401f, -0.1837652f,
  -0.1782853f, +0.0225067f, +0.1349849f, -0.1127625f, +0.0721933f, -0.0699453f, +0.1292926f, +0.0708804f,
  +0.0312146f, -0.0719257f, -0.2167301f, -0.0140893f, +0.0924660f, -0.2712486f, +0.1863670f, -0.1669273f,
  -0.1245045f, +0.1177604f, -0.0638830f, -0.1609607f, +0.4626338f, -0.1480527f, +0.0627573f, -0.0902541f,
  +0.0187539f, +0.0149440f, -0.3214814f, +0.1239337f, +0.2571386f, -0.3663948f, +0.3800294f, -0.1141919f,
  -0.0170950f, +0.0272065f, -0.0595361f, +0.1198230f, +0.0787340f, -0.0554237f, -0.2984228f, +0.1270972f,
  -0.3000406f, +0.0205721f, -0.1608017f, +0.0192329f, +0.1005056f, +0.0959369f, -0.3441232f, -0.0869665f,
  -0.2191349f, +0.2324052f, +0.1859501f, -0.2032464f, -0.1560900f, +0.1571080f, -0.0818034f, -0.0177533f,
  -0.0315562f, +0.0773873f, -0.2491384f, +0.5258493f, -0.0116367f, +0.1673411f, -0.2864487f, -0.0143597f,
  -0.2075860f, +0.3445048f, -0.0263328f, +0.1640522f, +0.4255418f, -0.0431184f, +0.0024293f, +0.1665951f,
  +0.0893039f, +0.0136774f, +0.1000772f, -0.0556420f, -0.0159554f, +0.0719673f, -0.0672021f, -0.0852957f,
  -0.0541820f, +0.1934712f, -0.1187570f, +0.1408394f, -0.0650372f, -0.0048544f, +0.1282239f, -0.0011758f,
  -0.0277224f, -0.0854486f, -0.1344214f, +0.2572381f, -0.1273426f, +0.0346374f, +0.1022694f, +0.0179909f,
  +0.0651219f, +0.1134765f, +0.0010884f, +0.0174011f, +0.0971025f, +0.0732008f, -0.0792429f, -0.0561211f,
  -0.0953530f, +0.1011597f, -0.0085067f, -0.1866065f, +0.0015372f, -0.1021322f, -0.0638055f, +0.0285352f,
  +0.0433064f, +0.1870673f, -0.1762427f, -0.3112125f, -0.0728793f, -0.1276039f, +0.1065642f, -0.1632898f,
  +0.1614224f, +0.1646485f, +0.0408949f, -0.4977521f, +0.1734338f, -0.1390073f, +0.2221106f, -0.2666423f,
  +0.0434324f, +0.0181238f, +0.0382047f, -0.1384307f, -0.1428466f, -0.0278157f, +0.0828727f, +0.1092150f,
  +0.1746084f, -0.0546056f, +0.0477014f, -0.2108120f, -0.2108793f, +0.3292473f, -0.2129727f, -0.0836332f,
  +0.0379388f, +0.1417952f, +0.0401170f, +0.1629889f, -0.0016714f, -0.0868451f, -0.2221918f, -0.0512656f,
  -0.0522756f, -0.0871998f, +0.2247006f, -0.0410862f, -0.0642610f, -0.0164564f, -0.0586544f, -0.0855679f,
  +0.0371314f, -0.1585885f, +0.0597818f, -0.0439035f, +0.1343030f, -0.0973695f, +0.0622973f, -0.1833000f,
  -0.0088349f, +0.0198457f, -0.1296066f, +0.0467259f, -0.0514924f, -0.0293422f, +0.1320762f, +0.0212008f
);

const float biases[4] = float[4](
  -0.0013662f, -0.0246730f, +0.0470830f, -0.0388693f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer63 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0245804f, +0.1170528f, -0.3184957f, +0.1946463f, -0.2441641f, +0.0917637f, -0.1108833f, +0.0745876f,
  +0.0281314f, -0.2261536f, +0.1353330f, -0.0578555f, -0.1358954f, -0.0797672f, +0.2193555f, -0.0174526f,
  -0.1084495f, +0.2932815f, +0.0183331f, +0.0831526f, +0.0933009f, +0.1225175f, -0.1828369f, -0.0966089f,
  -0.1470495f, -0.1615135f, +0.1912728f, +0.0986159f, -0.1537004f, -0.2335866f, -0.2291875f, +0.0840678f,
  +0.1543020f, +0.0183234f, +0.1231679f, -0.1584268f, +0.1687340f, -0.0726665f, +0.1197989f, +0.4976565f,
  -0.0190818f, +0.1194490f, -0.0135421f, +0.0843852f, +0.0915718f, -0.1026655f, +0.1000094f, +0.0883330f,
  +0.2996719f, +0.0895578f, -0.0260477f, +0.0990762f, -0.0412259f, -0.1532842f, -0.1049845f, -0.1182708f,
  +0.0697049f, -0.0531477f, +0.2834379f, -0.2174269f, +0.0408216f, +0.3121250f, -0.1399769f, +0.1053510f,
  -0.1319054f, -0.0404407f, -0.1450742f, -0.0203434f, -0.1157735f, -0.0294230f, -0.1222285f, +0.0645727f,
  -0.0002364f, +0.2165096f, -0.0767312f, +0.0688064f, -0.0955279f, +0.1060964f, -0.2048856f, +0.0057855f,
  +0.0475242f, -0.2669236f, -0.0414221f, +0.1196577f, -0.3061582f, +0.1081070f, +0.0971471f, -0.1501904f,
  +0.1041588f, -0.0067944f, -0.0845615f, -0.1481817f, -0.0007635f, -0.0232830f, +0.0389902f, +0.0643199f,
  +0.0714093f, -0.1534742f, +0.0923930f, +0.0341324f, -0.1052058f, +0.1650643f, -0.2807460f, -0.1676937f,
  -0.1321141f, -0.2843604f, +0.0733412f, +0.2267034f, -0.1431874f, -0.3173660f, -0.4402857f, -0.2951176f,
  +0.1615896f, +0.1565469f, +0.0531362f, +0.3088960f, -0.1666081f, -0.0765324f, +0.0240610f, -0.2522399f,
  -0.0310695f, +0.1183617f, +0.1581865f, -0.1519993f, -0.1583586f, -0.0013171f, +0.0475175f, +0.1167094f,
  +0.0308715f, -0.0421058f, +0.0634098f, -0.1166677f, -0.2283858f, -0.3047089f, +0.1787751f, -0.2891831f,
  -0.1386662f, -0.0043317f, -0.0706327f, -0.0290884f, +0.1416709f, +0.1099721f, -0.0344077f, +0.0778881f,
  -0.0752970f, +0.0260315f, +0.1436058f, -0.0291884f, -0.0644001f, +0.2523745f, -0.0200414f, +0.1270289f,
  -0.0819286f, +0.1324249f, +0.2000580f, -0.0328191f, +0.0091284f, -0.0880821f, +0.2066295f, +0.1132506f,
  +0.0171937f, +0.1868974f, +0.1781414f, +0.0890486f, -0.0328823f, +0.0432369f, -0.1005444f, +0.0688114f,
  +0.0363473f, +0.2037126f, +0.0537318f, -0.0063412f, -0.0108904f, +0.2540469f, -0.0318076f, +0.0695240f,
  +0.0377348f, +0.0282884f, +0.1739281f, -0.0420748f, -0.0354515f, -0.1536191f, +0.2382849f, +0.1665495f,
  -0.0358834f, -0.1608523f, -0.2099532f, +0.0151794f, +0.0720259f, +0.2560697f, +0.1230671f, -0.1335646f,
  -0.1672758f, -0.0248682f, -0.1031941f, +0.1012164f, +0.2595918f, -0.0419299f, -0.0793278f, +0.1077210f,
  +0.0342372f, +0.1460860f, +0.0962885f, -0.1136271f, -0.1990528f, -0.1328854f, +0.0326991f, -0.1122213f,
  -0.0944531f, +0.0403982f, +0.0849947f, +0.0433370f, +0.0104733f, -0.0020219f, +0.0868432f, +0.1332899f,
  +0.1129066f, +0.0996727f, -0.1432745f, +0.1051792f, +0.0025936f, -0.0751655f, +0.1324649f, +0.1020660f,
  +0.3385617f, -0.3161792f, +0.0983677f, +0.1288355f, -0.0314877f, +0.2413139f, +0.0612558f, +0.1663851f,
  +0.0099515f, -0.2473197f, -0.0625688f, +0.1470269f, +0.3464570f, +0.0566393f, +0.2777687f, +0.1835483f,
  -0.3841650f, +0.0295002f, +0.1211135f, +0.0003056f, +0.1527967f, -0.0247398f, -0.1569279f, +0.0188770f,
  +0.0047877f, +0.0155273f, -0.1535260f, -0.0521540f, -0.0777929f, -0.2120835f, +0.2030077f, -0.1831114f,
  -0.0054925f, +0.0066745f, -0.1579580f, +0.0671671f, +0.0213072f, +0.0509929f, -0.2177597f, +0.1712835f,
  +0.3171985f, +0.0136133f, -0.2409091f, +0.2116086f, +0.2625520f, -0.3933148f, +0.0914059f, -0.3787078f,
  +0.3817852f, -0.2156510f, +0.0003142f, -0.0192313f, +0.2701103f, -0.0652017f, +0.2385060f, -0.3415205f,
  +0.1603750f, +0.0773214f, +0.1094028f, -0.0897301f, +0.1879617f, -0.1590689f, +0.0536200f, -0.0674417f
);

const float biases[4] = float[4](
  +0.0290469f, +0.0492856f, +0.0477754f, -0.0903876f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer64 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0260711f, -0.1780523f, +0.1072146f, -0.0912172f, -0.0172323f, +0.0562351f, +0.0556698f, +0.1268232f,
  +0.0093137f, -0.2227565f, -0.2798438f, +0.0772278f, -0.0840638f, -0.0447500f, -0.3196779f, -0.3618247f,
  -0.0001697f, -0.0292524f, +0.1147214f, +0.0714624f, -0.0013597f, +0.1303311f, -0.1152617f, -0.1723166f,
  +0.1619222f, -0.0271753f, -0.0326509f, +0.0818601f, -0.1217528f, -0.0978600f, +0.0164603f, -0.2194733f,
  -0.0184971f, +0.4682750f, -0.1945462f, -0.1191164f, +0.0234489f, -0.0327157f, +0.1644462f, -0.2088483f,
  -0.1964061f, +0.1590794f, -0.0931388f, +0.0247790f, +0.0448460f, +0.0137022f, +0.0373652f, -0.0257441f,
  +0.0568892f, -0.1881955f, -0.0932460f, -0.0996824f, +0.0601795f, -0.1121458f, +0.0621254f, -0.1225007f,
  -0.1398698f, +0.0228759f, +0.1309381f, -0.2245096f, +0.1824277f, -0.0571462f, +0.1412509f, +0.2197592f,
  -0.1588306f, -0.0491519f, -0.0883037f, +0.0653823f, -0.1353511f, -0.1231529f, +0.3028439f, +0.1030046f,
  +0.0039999f, +0.0266988f, -0.3635333f, -0.1545881f, +0.0316309f, -0.0197428f, +0.1261326f, -0.0938988f,
  +0.0676250f, -0.1264956f, +0.2103038f, +0.0949811f, +0.1012548f, +0.0443735f, +0.0703386f, -0.0164869f,
  +0.3143060f, -0.0916608f, -0.0564224f, +0.0718015f, -0.3725062f, +0.3495353f, +0.2759680f, +0.2209969f,
  -0.1210800f, -0.0928759f, +0.0952199f, +0.0770877f, +0.0626825f, +0.0154287f, +0.0726662f, -0.3611050f,
  +0.0821831f, -0.1064759f, -0.3129005f, -0.0060383f, +0.0786792f, -0.1574726f, +0.3001070f, -0.1865746f,
  -0.1166436f, +0.1751525f, -0.1045491f, -0.2180481f, +0.0304081f, +0.1054492f, -0.0876432f, -0.1309989f,
  -0.0593965f, -0.0613017f, -0.1829593f, +0.0211378f, -0.1780237f, +0.3162672f, -0.1450723f, -0.2661631f,
  +0.2975963f, -0.1096444f, -0.1563578f, +0.2407254f, +0.2275586f, +0.3448026f, -0.2772302f, +0.1537897f,
  +0.1577177f, +0.1722696f, +0.0709852f, +0.0545461f, +0.0983941f, +0.1434255f, +0.0202878f, +0.0806066f,
  +0.0027324f, -0.0201087f, -0.1585134f, +0.0540000f, +0.0349703f, -0.0645279f, -0.1497802f, -0.0083809f,
  -0.0743219f, -0.0063612f, +0.0222742f, -0.0584545f, -0.0476792f, -0.1074179f, -0.1482433f, -0.2238132f,
  -0.0675508f, -0.3971593f, -0.1325217f, -0.1449193f, -0.2106628f, +0.1136031f, +0.0715944f, -0.1353222f,
  +0.1198419f, -0.0679589f, -0.2602666f, +0.0086345f, -0.0973670f, +0.2465748f, +0.1700499f, +0.0153425f,
  -0.2148142f, -0.1490095f, +0.0466357f, +0.1201488f, +0.1161495f, -0.0804511f, -0.2167771f, -0.1235431f,
  +0.2580304f, +0.0904900f, +0.0325672f, +0.1740732f, -0.2902335f, +0.1870797f, +0.0898720f, -0.0991815f,
  -0.1979956f, -0.0875793f, -0.2106015f, +0.0055757f, -0.0457127f, -0.1226830f, -0.0327966f, +0.0136828f,
  -0.0555736f, +0.1542955f, -0.0817736f, +0.1151442f, -0.0106560f, +0.0103414f, +0.1447183f, -0.4171633f,
  -0.1003826f, -0.0715291f, -0.0388733f, +0.1948245f, +0.1573943f, +0.1285781f, +0.0998134f, -0.0868923f,
  +0.1021909f, +0.0622349f, +0.0524746f, +0.1067170f, +0.1977794f, +0.2151371f, -0.0171786f, +0.2210978f,
  -0.1009308f, +0.1091687f, -0.0200637f, -0.0029473f, +0.0955095f, -0.1451975f, -0.1370736f, +0.2791712f,
  +0.2435923f, +0.2303610f, +0.1354709f, -0.0688716f, +0.0108426f, +0.1033357f, +0.1018031f, +0.0885942f,
  +0.3444636f, +0.1145440f, +0.0689944f, -0.0078915f, +0.1263819f, +0.1511777f, -0.0925833f, -0.0357111f,
  +0.5012982f, -0.2110489f, +0.0170846f, +0.0441986f, -0.2170459f, +0.2989815f, -0.2971016f, -0.0935565f,
  +0.1472580f, +0.2236300f, +0.0434838f, +0.0759410f, -0.2951636f, +0.1356103f, -0.0469491f, -0.0451551f,
  -0.0561714f, +0.1837074f, +0.0953595f, +0.6580079f, -0.0619756f, -0.1146135f, +0.0792412f, -0.0730976f,
  +0.0083845f, -0.0488925f, -0.1189089f, +0.2444898f, -0.2989517f, -0.2390846f, +0.0964532f, +0.1589459f,
  +0.0514426f, -0.3494297f, +0.2662759f, +0.1881242f, -0.1905628f, +0.0271935f, -0.0602966f, +0.1671049f
);

const float biases[4] = float[4](
  -0.0303871f, -0.0259643f, -0.0188507f, +0.0257767f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer64 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0592761f, +0.1719563f, -0.0142202f, +0.0033147f, -0.0030917f, +0.1756947f, +0.0803466f, +0.1241824f,
  -0.0713288f, -0.0801045f, +0.2165506f, +0.0007762f, -0.2605745f, +0.0412155f, -0.2149828f, -0.0248780f,
  +0.0742258f, +0.1435578f, -0.1242546f, +0.1326988f, -0.0222178f, -0.1951147f, +0.0680562f, -0.0437882f,
  -0.1667120f, +0.0646226f, +0.2894164f, +0.1244486f, -0.1901934f, -0.0698149f, +0.0067880f, +0.1617303f,
  -0.0515163f, +0.0005825f, -0.2803700f, +0.2737674f, -0.1819261f, -0.0815491f, -0.0052602f, -0.0188655f,
  -0.0514584f, -0.3310843f, +0.0411255f, +0.2599712f, -0.0649574f, +0.0932943f, +0.1588975f, +0.0237027f,
  -0.0413232f, +0.1424153f, +0.0826917f, -0.1521706f, -0.1028861f, +0.1292543f, -0.0529903f, -0.2304919f,
  -0.1298888f, +0.1419939f, -0.1606872f, -0.0114737f, +0.0790597f, -0.0081484f, +0.0031445f, -0.0427878f,
  +0.1762120f, +0.3215517f, +0.0219520f, -0.0562189f, -0.0047811f, +0.0067631f, +0.1977622f, -0.2144990f,
  +0.0267705f, -0.0420241f, -0.0422287f, +0.0608522f, -0.0750562f, +0.0818386f, -0.1598076f, -0.1429864f,
  +0.2515042f, -0.0147219f, +0.1140286f, +0.0619181f, -0.0511416f, -0.0328144f, +0.2248170f, +0.1055341f,
  +0.1807206f, +0.0832527f, -0.0292601f, -0.1537561f, +0.1014909f, +0.0889463f, +0.0439963f, -0.0212371f,
  -0.2195153f, +0.0369816f, +0.0954311f, -0.1071649f, -0.2564076f, -0.0902993f, +0.0149920f, -0.1250979f,
  -0.1954882f, -0.2545028f, +0.0009983f, -0.1313373f, -0.3193464f, +0.1527332f, +0.0605995f, -0.1000844f,
  +0.3396364f, +0.0534703f, -0.0821900f, -0.0978180f, +0.0221072f, -0.0018181f, -0.0492828f, +0.0357702f,
  -0.0055089f, +0.3188124f, +0.1743405f, -0.0480517f, +0.0344805f, -0.1389122f, +0.1194927f, +0.0808975f,
  -0.1020419f, +0.0961132f, -0.0417745f, +0.1418584f, +0.0650999f, +0.1089460f, +0.1385054f, -0.0731874f,
  +0.0423148f, +0.0003643f, -0.0934113f, +0.0526156f, -0.0059901f, -0.1450026f, -0.0268897f, +0.3184780f,
  +0.0700750f, -0.1195096f, -0.1683170f, +0.1346361f, +0.0895577f, +0.2375321f, -0.0693641f, +0.0593253f,
  +0.0399346f, +0.1238512f, -0.1071694f, +0.1396130f, -0.0810470f, +0.3082673f, -0.0496551f, +0.0736958f,
  +0.0688575f, +0.0998009f, +0.0341872f, -0.0468274f, +0.1399313f, +0.1926610f, -0.0269455f, -0.0882207f,
  +0.0990182f, +0.0633433f, +0.0002767f, +0.3165282f, -0.1029439f, -0.0284789f, -0.0418518f, +0.2205470f,
  -0.0552887f, -0.1474992f, +0.1343575f, -0.0796791f, -0.1991488f, -0.0162589f, -0.3981926f, -0.1754771f,
  -0.3714436f, -0.2311182f, -0.0954259f, -0.2002975f, -0.1602261f, -0.1977086f, +0.0426601f, +0.0240956f,
  +0.0255688f, -0.0328310f, +0.0861968f, -0.0483079f, -0.1226256f, +0.1009643f, -0.4010097f, +0.0038890f,
  +0.2547288f, -0.1176941f, +0.1888373f, -0.2660634f, -0.0651672f, +0.1338680f, -0.1644053f, +0.0466285f,
  +0.3652028f, -0.0971284f, +0.2654507f, +0.0133704f, -0.2352916f, -0.0496269f, -0.0137139f, -0.2380572f,
  -0.1296318f, +0.0134408f, -0.2815610f, +0.0234920f, +0.0047621f, +0.1490765f, -0.1676774f, +0.0041107f,
  +0.0508479f, +0.0865971f, +0.0978651f, +0.0085030f, +0.0278554f, +0.1581725f, +0.1398387f, +0.2093918f,
  -0.0111172f, +0.1542935f, +0.1006828f, +0.0461126f, -0.1330338f, +0.0102810f, +0.0052749f, +0.1546991f,
  -0.1448269f, -0.0556957f, -0.0238242f, -0.2691293f, +0.0204285f, -0.1823846f, -0.1012649f, -0.0169086f,
  -0.1994119f, +0.1136558f, +0.0116892f, -0.1349335f, -0.1563825f, -0.2777643f, -0.1705055f, +0.1675618f,
  +0.1028019f, +0.1733787f, +0.0858090f, -0.0033702f, +0.2964777f, +0.0494528f, -0.1403036f, +0.0215804f,
  +0.2546109f, -0.0393828f, -0.0462564f, +0.0196356f, -0.1619203f, +0.2853413f, -0.2196234f, -0.0502418f,
  +0.2076488f, +0.1960084f, +0.1892807f, +0.2541578f, +0.3244793f, +0.1567484f, -0.1187400f, +0.0720638f,
  -0.2057144f, +0.1919584f, -0.1962051f, +0.0337855f, -0.3294149f, -0.1048647f, +0.0081756f, -0.1484299f
);

const float biases[4] = float[4](
  -0.0152694f, +0.0163178f, -0.0237118f, +0.0102001f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer65 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0804086f, +0.1768981f, +0.1106215f, +0.0924777f, +0.1728673f, +0.2119338f, -0.1898470f, +0.1137187f,
  -0.0641913f, +0.0311605f, +0.0783725f, -0.0913092f, -0.2488908f, -0.1437240f, -0.0567713f, +0.0225111f,
  -0.2504779f, +0.1208767f, -0.0552523f, +0.1720198f, +0.2387322f, +0.1402619f, -0.1534261f, -0.0658609f,
  -0.0103555f, +0.0237584f, -0.1814383f, -0.2323835f, +0.0230571f, -0.0313457f, -0.1096035f, -0.3119689f,
  +0.1655772f, +0.2771624f, +0.3197853f, -0.3049182f, +0.1862584f, +0.0754431f, -0.1505382f, -0.2025132f,
  +0.0773229f, -0.0747636f, +0.0176075f, -0.1774121f, -0.2613495f, +0.0800267f, -0.1194389f, -0.0595920f,
  +0.0057735f, -0.1310509f, +0.0708206f, +0.2954542f, -0.1371869f, +0.2909430f, +0.2130425f, -0.0154827f,
  -0.1856455f, -0.1636096f, +0.0518724f, -0.2838762f, -0.3177995f, -0.0335577f, +0.0112585f, +0.1568350f,
  -0.0503278f, -0.1647950f, +0.3799692f, -0.0678552f, +0.3748617f, -0.1593580f, +0.2118950f, -0.0801685f,
  -0.2287403f, +0.0214446f, -0.1090060f, -0.1669151f, +0.4214999f, +0.1524176f, -0.0259688f, +0.1296902f,
  +0.1941958f, -0.0546627f, -0.4795665f, +0.0488012f, +0.1615638f, -0.0625366f, +0.1043597f, +0.0144328f,
  +0.0499277f, -0.1631432f, -0.1423926f, -0.1286963f, -0.3201549f, -0.0887080f, +0.1794346f, -0.0142495f,
  -0.1440248f, -0.3641027f, -0.1387256f, +0.3617438f, +0.2670742f, +0.0398315f, +0.1098267f, +0.2005433f,
  +0.2054467f, +0.0665709f, -0.0554366f, -0.2798148f, -0.0156329f, -0.1105480f, -0.0937132f, +0.1689738f,
  +0.2358881f, -0.0866913f, -0.2804872f, -0.2772414f, +0.0481402f, -0.1493056f, +0.1251674f, +0.0194370f,
  +0.0151221f, +0.1372515f, -0.1702055f, +0.0926856f, +0.2387072f, -0.2488505f, +0.0119915f, -0.1603305f,
  +0.0952060f, +0.0439431f, +0.0652936f, -0.2368032f, +0.1286807f, -0.0858442f, -0.0138416f, -0.0256701f,
  +0.0334384f, +0.2874159f, -0.2718088f, -0.6004832f, +0.0856181f, -0.0105028f, +0.4364156f, -0.2404619f,
  +0.1435787f, +0.1801505f, -0.0992862f, -0.0549028f, +0.1896050f, +0.0082362f, -0.0328032f, +0.3369389f,
  +0.0859252f, +0.0030924f, +0.1611486f, +0.0487993f, +0.1432407f, +0.2557532f, -0.1267473f, -0.0739145f,
  -0.1863001f, -0.0786617f, -0.0104172f, +0.4822689f, +0.0593984f, -0.0149266f, +0.1300164f, -0.0814679f,
  -0.0822194f, +0.0410720f, -0.0552557f, +0.0804252f, -0.0762391f, +0.1014791f, -0.0945120f, -0.2548037f,
  -0.0865847f, +0.0606785f, -0.0870211f, -0.1008503f, -0.0040397f, +0.1972741f, -0.1233049f, -0.2588357f,
  +0.1252525f, +0.2616781f, -0.1579884f, -0.3106712f, +0.1884143f, -0.0923528f, -0.1074420f, +0.3035038f,
  -0.0279520f, +0.0314672f, -0.0568035f, -0.0099187f, +0.2066379f, -0.1198174f, -0.0641784f, -0.1117758f,
  -0.0571455f, -0.0687906f, -0.0847188f, +0.1846048f, +0.2382296f, +0.0778402f, -0.2048845f, -0.0839434f,
  +0.0322169f, +0.0447011f, -0.0149146f, -0.1262852f, -0.1918463f, +0.3893692f, -0.0113238f, +0.0572522f,
  -0.3220368f, -0.1516465f, +0.0816075f, -0.5208492f, +0.0882191f, +0.0034926f, -0.1721447f, +0.4813544f,
  -0.2304687f, +0.1536583f, -0.2239192f, -0.4245991f, +0.0002545f, -0.1368690f, -0.1150124f, -0.2005298f,
  +0.0291639f, +0.0288161f, -0.0578998f, -0.2487304f, +0.0366182f, +0.1255377f, -0.1260861f, -0.1658884f,
  +0.3704747f, +0.4735509f, +0.3468111f, -0.3295197f, -0.1416055f, -0.0178654f, -0.1535067f, +0.0127808f,
  +0.0183476f, +0.0781654f, +0.1687500f, -0.2992162f, -0.0491422f, -0.0845423f, -0.1313027f, +0.1181898f,
  -0.0705800f, -0.0009516f, +0.0292901f, +0.0033205f, -0.2282270f, +0.0285050f, +0.0453573f, +0.1616269f,
  +0.0325661f, +0.2578122f, -0.3918072f, +0.0105432f, +0.0905369f, -0.1260406f, +0.0894637f, +0.0516051f,
  +0.1231011f, +0.0589145f, -0.1976442f, +0.2767098f, +0.2169984f, +0.1028636f, +0.0692956f, +0.0681013f,
  +0.0806417f, +0.0086019f, +0.0207443f, -0.0153514f, +0.1298462f, -0.1158405f, +0.0876799f, +0.1398869f
);

const float biases[4] = float[4](
  +0.0463182f, -0.0283017f, -0.0184720f, -0.0084747f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer65 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0222075f, +0.0049627f, -0.1571088f, +0.0472916f, -0.0398952f, -0.0613603f, +0.1247014f, -0.0462455f,
  -0.0481454f, +0.1873318f, +0.0832512f, -0.2756760f, +0.0940173f, -0.2886800f, -0.0706573f, -0.0911563f,
  -0.1053901f, +0.1119125f, +0.1182885f, -0.2191903f, +0.2502407f, +0.0296519f, -0.1300995f, -0.0950447f,
  -0.0530943f, +0.1758757f, +0.2960085f, -0.2275112f, -0.0049642f, -0.3104631f, +0.3277809f, -0.3463093f,
  +0.4248143f, +0.4140239f, +0.2383474f, -0.0111785f, +0.0214808f, -0.2369166f, -0.0274316f, +0.0337643f,
  -0.0434795f, -0.0666631f, +0.0099088f, -0.2938117f, -0.1773746f, -0.1347305f, +0.1491648f, -0.0232104f,
  +0.2229733f, -0.1234810f, +0.1786566f, -0.1537010f, -0.0919398f, +0.1473021f, -0.2486969f, +0.1957204f,
  -0.2205847f, -0.2379796f, +0.4117101f, +0.1447383f, -0.2774775f, -0.1404544f, -0.1044139f, +0.4217634f,
  -0.1514259f, -0.1555054f, -0.1227258f, -0.3709232f, -0.3792296f, +0.1176055f, -0.1025375f, +0.1191285f,
  +0.0080915f, -0.2475929f, -0.1880529f, -0.2008852f, -0.0702487f, -0.4054617f, -0.1939357f, -0.0103438f,
  +0.0054792f, -0.0613973f, +0.3260491f, -0.0656882f, -0.3852141f, -0.1032435f, -0.3318093f, +0.0606198f,
  +0.0509066f, +0.0337683f, +0.1465179f, -0.3106878f, +0.0289448f, -0.3600909f, +0.0365351f, +0.0179676f,
  +0.1946476f, -0.2438482f, +0.2393682f, +0.1396092f, -0.1610848f, -0.0514932f, +0.1240159f, +0.0441054f,
  +0.1333746f, -0.0235355f, -0.0653270f, -0.0946085f, +0.2470500f, -0.2826886f, +0.1666317f, -0.3669341f,
  -0.0411014f, -0.0240090f, -0.5861394f, +0.1284174f, +0.1654916f, -0.1976902f, -0.0445283f, +0.0476591f,
  -0.1231082f, +0.1528442f, -0.0232675f, -0.2106370f, +0.1060682f, -0.2133653f, -0.1651606f, +0.0098324f,
  +0.0543045f, +0.0141206f, -0.1612199f, +0.1571892f, -0.0123724f, +0.2447627f, +0.1120183f, +0.3302975f,
  +0.2321256f, -0.2323916f, +0.3911904f, +0.2355460f, -0.4507729f, +0.2342001f, +0.1433330f, +0.2209467f,
  +0.1615803f, -0.1229016f, -0.0868028f, -0.4715408f, +0.1027139f, -0.0965278f, +0.0389843f, -0.2109271f,
  +0.1627196f, -0.3622386f, +0.1089283f, +0.0414081f, -0.0886346f, +0.1387167f, -0.2534373f, +0.0404560f,
  -0.2493519f, +0.4304173f, -0.4466897f, -0.0872366f, -0.0799286f, -0.3613614f, +0.2104568f, -0.1202348f,
  -0.0735663f, +0.2601315f, -0.0144407f, -0.2385438f, -0.2152064f, +0.3128824f, +0.3565563f, -0.0043171f,
  +0.2137819f, +0.2763827f, +0.0230823f, -0.2208211f, -0.1398461f, -0.0684295f, -0.0182600f, +0.2487102f,
  +0.0682361f, -0.1357058f, -0.1045359f, +0.1329669f, -0.6079501f, -0.3352456f, -0.0606210f, -0.2607530f,
  +0.0120139f, -0.0591115f, -0.1856410f, -0.0130515f, -0.0238275f, -0.0041513f, -0.3236716f, -0.0825829f,
  +0.0747180f, +0.0933251f, +0.0043957f, -0.4795356f, +0.1224873f, -0.1169573f, +0.0961711f, +0.0197876f,
  +0.1822386f, -0.0650043f, -0.0552272f, +0.0467964f, +0.0966928f, +0.0096029f, -0.0384988f, +0.0733926f,
  -0.0023884f, -0.0720039f, -0.0239054f, +0.0501894f, -0.2095670f, -0.0546231f, +0.0974117f, +0.0065956f,
  +0.1381952f, +0.1742620f, +0.0597032f, +0.0810494f, -0.1027280f, -0.0324383f, +0.0392847f, -0.0352348f,
  +0.1428852f, +0.0050076f, -0.0307305f, -0.0858773f, -0.1322793f, +0.0152720f, -0.0266325f, -0.1432196f,
  -0.0677547f, +0.2144119f, -0.1911163f, +0.0780977f, -0.0087848f, +0.0383085f, -0.3008483f, +0.2304471f,
  -0.1919455f, +0.2222916f, -0.0786235f, -0.2637159f, -0.2333622f, +0.2751735f, -0.2520557f, -0.1724561f,
  -0.0127831f, -0.0744541f, +0.1270176f, -0.0543354f, +0.2309656f, -0.0980514f, +0.1772267f, +0.0181800f,
  -0.1184993f, +0.0253180f, +0.0340494f, +0.2183853f, -0.1560987f, -0.0988917f, -0.0957768f, -0.0522188f,
  -0.1535659f, +0.1300409f, -0.1736211f, +0.1977136f, -0.2450841f, +0.0254107f, -0.2200301f, +0.0269205f,
  +0.1528381f, +0.0373502f, +0.0142558f, +0.1134202f, +0.0277469f, +0.0264676f, -0.0216316f, -0.0597171f
);

const float biases[4] = float[4](
  +0.0081797f, +0.0251250f, -0.0981063f, +0.0049990f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer66 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2405607f, +0.0055595f, +0.0204732f, -0.0355883f, +0.2432427f, -0.2519447f, -0.1261422f, -0.0291218f,
  +0.3392649f, +0.0405109f, -0.0978973f, -0.1263335f, +0.0025777f, -0.1487755f, -0.0204912f, +0.1937963f,
  +0.0652468f, +0.0184252f, -0.0692406f, -0.0090693f, +0.0538745f, -0.0586788f, -0.0481276f, -0.0104591f,
  -0.2474519f, +0.1303218f, +0.3810694f, +0.1130557f, -0.2575128f, -0.1686137f, +0.0128715f, +0.0912381f,
  -0.1361058f, -0.0604898f, -0.0144025f, -0.0778880f, -0.1381361f, +0.2065774f, +0.3923077f, +0.1167831f,
  +0.0040336f, -0.1659067f, +0.1124477f, -0.0166532f, -0.0007133f, +0.2628504f, +0.1164870f, -0.1790191f,
  -0.1819887f, -0.1328107f, +0.0229955f, +0.1466308f, -0.0319980f, -0.1266942f, -0.0256825f, -0.0561177f,
  +0.0803376f, -0.0665244f, -0.1113988f, +0.2007996f, +0.1466850f, -0.1401296f, +0.0427773f, +0.1425421f,
  -0.0295889f, -0.1430999f, -0.0267498f, -0.4705519f, -0.0230154f, +0.2090757f, +0.2130968f, +0.1140356f,
  -0.0741226f, -0.1612700f, +0.0681981f, +0.0493671f, +0.0344009f, +0.0030319f, -0.1518264f, -0.0226978f,
  +0.1253602f, -0.1384310f, -0.0765536f, +0.0412954f, -0.3353430f, +0.0074985f, -0.0816637f, +0.2077513f,
  +0.1752385f, -0.2610025f, -0.1121778f, +0.1143784f, -0.2462744f, +0.2906467f, -0.2224430f, +0.0832531f,
  +0.0162736f, -0.1738866f, -0.1889982f, -0.0952548f, -0.0534865f, +0.1450983f, +0.1341883f, -0.3013871f,
  -0.0364338f, +0.0069933f, -0.0997803f, -0.2988447f, -0.0585705f, -0.1275400f, +0.0821041f, -0.3966644f,
  +0.1520156f, -0.1305581f, -0.1122499f, -0.0308263f, +0.0289062f, -0.0728468f, -0.0949719f, -0.1316591f,
  +0.1201021f, +0.0526718f, +0.0714381f, +0.0884316f, -0.0658344f, +0.0502381f, -0.1522364f, -0.1599762f,
  +0.1959752f, -0.1521087f, -0.0672077f, +0.3832142f, -0.2310218f, +0.0207781f, -0.1431025f, -0.1027475f,
  +0.0082531f, -0.0913326f, -0.0388946f, +0.0187417f, -0.1131210f, -0.2904066f, +0.1580180f, -0.2775559f,
  +0.0012225f, +0.0936317f, +0.1050724f, +0.0765466f, -0.0171144f, -0.2796994f, +0.4456953f, +0.1936420f,
  -0.1511713f, +0.1418094f, +0.1021674f, -0.0166398f, -0.5225449f, +0.1834448f, -0.1725379f, +0.0094460f,
  +0.1652666f, +0.0290127f, +0.0380539f, +0.1604657f, -0.0904943f, +0.0976531f, +0.0196621f, +0.1952091f,
  +0.3426974f, +0.1040516f, -0.0624335f, -0.1246225f, -0.0275405f, -0.2660948f, +0.0167470f, +0.1346769f,
  -0.0736069f, -0.0133258f, -0.1067442f, +0.2694003f, -0.0983649f, -0.1294099f, -0.1014097f, -0.1098695f,
  +0.1359006f, -0.0235639f, -0.2064768f, +0.0694079f, -0.3349236f, +0.0952147f, -0.0071063f, +0.2641506f,
  -0.0949725f, +0.0864414f, +0.1539067f, +0.1346610f, +0.0865464f, +0.0348553f, -0.1252992f, -0.2085658f,
  -0.0869740f, -0.2011114f, +0.0646279f, -0.3041958f, -0.1473713f, -0.3937250f, -0.3183017f, +0.0613092f,
  -0.1156996f, +0.2273259f, -0.1661428f, -0.0451566f, -0.1752116f, +0.2709742f, -0.1606331f, +0.0362033f,
  +0.0549808f, +0.2082877f, +0.0707995f, +0.0433010f, -0.0454494f, +0.2720902f, +0.2604753f, -0.0173174f,
  +0.2075281f, -0.0896813f, -0.1364755f, -0.0000621f, +0.3574013f, -0.2629836f, -0.0509830f, +0.2246739f,
  -0.0751676f, +0.2777486f, +0.0205828f, +0.0536016f, +0.2460492f, -0.1653060f, +0.0434780f, +0.1331528f,
  -0.0782620f, +0.1154983f, +0.2684134f, -0.0246498f, -0.2083459f, -0.4030939f, +0.1309804f, -0.2573370f,
  +0.2385216f, +0.3529292f, +0.2669414f, +0.3929745f, -0.0642347f, +0.1931651f, +0.0654800f, -0.3001319f,
  +0.1248358f, +0.2572412f, +0.1420924f, +0.3315192f, -0.1944106f, +0.1035037f, -0.3005275f, +0.1953557f,
  +0.0130024f, -0.5127489f, -0.4557398f, +0.0857844f, +0.0639552f, -0.2059965f, +0.2008091f, -0.1573551f,
  +0.1731020f, +0.1343917f, -0.0309934f, +0.1741057f, +0.1438679f, -0.3309953f, +0.0281541f, +0.0008277f,
  +0.1965178f, +0.0338571f, +0.0738176f, +0.2192666f, +0.1585512f, -0.5091897f, +0.1128636f, -0.0112086f
);

const float biases[4] = float[4](
  -0.0139449f, -0.0120424f, -0.0362349f, +0.0560567f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer66 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0790139f, -0.4956633f, -0.0015451f, -0.0148576f, -0.0361192f, +0.1598415f, +0.0210206f, -0.2239710f,
  +0.0797404f, +0.1970665f, -0.1132221f, -0.1749581f, +0.4079905f, -0.1606228f, +0.0979691f, +0.1349282f,
  -0.2282579f, +0.0412643f, +0.0383855f, +0.0504661f, +0.0996118f, -0.0124825f, +0.0387837f, +0.0197813f,
  +0.1613759f, +0.1911990f, +0.0069862f, -0.0465286f, +0.2241690f, -0.2100976f, +0.1795797f, +0.0733661f,
  +0.2508703f, +0.0235801f, +0.2059258f, -0.5080683f, +0.5626457f, -0.1000333f, +0.6387018f, -0.2606422f,
  -0.3337789f, +0.3502861f, +0.1127897f, -0.2965705f, +0.0956742f, -0.0075355f, +0.0264831f, -0.0141020f,
  -0.0462945f, +0.3448874f, +0.0844011f, -0.0401882f, +0.0967270f, -0.0910283f, -0.1874062f, +0.1578845f,
  +0.0540024f, +0.0039593f, +0.0109725f, -0.0759922f, -0.0472818f, +0.4514085f, -0.1143190f, -0.2045195f,
  -0.0456217f, +0.2662048f, -0.0037010f, +0.2034338f, -0.1259835f, +0.0907098f, +0.0696049f, -0.1927406f,
  +0.3194621f, -0.1280231f, -0.2735804f, -0.1005224f, -0.3936455f, -0.2788714f, +0.0614299f, +0.2929490f,
  +0.2349510f, +0.0323269f, -0.0133755f, +0.0000990f, -0.3824266f, -0.0383101f, -0.1473667f, -0.0282460f,
  +0.0272664f, +0.2694027f, -0.1790835f, -0.2279034f, -0.1269098f, -0.2000267f, -0.4011352f, +0.2066598f,
  +0.0844363f, +0.0792280f, -0.0171169f, -0.0320107f, +0.1881507f, +0.1237280f, +0.1565738f, +0.1202192f,
  -0.0126712f, -0.0299762f, +0.0002954f, +0.2635117f, +0.6320260f, -0.3046798f, +0.0075258f, +0.0016810f,
  +0.1070064f, +0.0488940f, -0.1918167f, +0.2166301f, +0.0111091f, -0.1506374f, -0.2306565f, -0.0483642f,
  -0.0813672f, +0.3496309f, -0.0115103f, +0.0388691f, -0.0468117f, -0.0209799f, +0.1663964f, -0.0175542f,
  +0.0399798f, +0.0071998f, -0.2775431f, -0.0834570f, +0.0666473f, +0.1857378f, -0.1821836f, -0.1494731f,
  -0.0710776f, +0.1787620f, -0.1252900f, -0.2276598f, -0.0485313f, +0.1732956f, +0.2030488f, +0.2039481f,
  +0.0734759f, +0.0161636f, -0.0418349f, +0.0990678f, -0.1135932f, -0.4310710f, -0.1469842f, -0.0989533f,
  +0.2293504f, -0.3211093f, +0.2258975f, +0.2767926f, -0.1934698f, +0.1385790f, +0.2688065f, +0.2823838f,
  -0.4162393f, +0.1705916f, +0.0391299f, +0.4087544f, +0.0789501f, +0.2049085f, +0.0207486f, -0.2420407f,
  +0.1293095f, +0.3028364f, -0.2923061f, -0.2004402f, +0.2122291f, +0.1129677f, -0.3227445f, -0.0513555f,
  +0.1261783f, -0.0152250f, -0.0685350f, +0.1409331f, +0.0372159f, +0.0931425f, -0.3571193f, -0.0416590f,
  +0.1336826f, -0.0229298f, +0.1267585f, -0.2796148f, +0.3039579f, -0.3100971f, -0.1860659f, +0.1319254f,
  +0.1435427f, +0.0770991f, -0.1257111f, +0.1473858f, -0.0228576f, +0.1698394f, -0.0063053f, -0.2264321f,
  +0.0964304f, +0.0347967f, -0.0669971f, +0.0140471f, -0.0301935f, +0.0220879f, -0.1142246f, +0.2269837f,
  +0.0250066f, -0.0137247f, -0.0164440f, +0.1180509f, -0.1224643f, -0.1417292f, -0.1213541f, -0.2039120f,
  -0.0153779f, -0.0580302f, +0.1754482f, +0.1553475f, +0.0517431f, +0.0928690f, -0.3004771f, -0.0919889f,
  -0.1047844f, +0.3657689f, -0.0038273f, +0.0181249f, +0.4128295f, -0.2632285f, -0.1294573f, +0.1396543f,
  +0.0601103f, +0.2320480f, +0.1676288f, +0.2784363f, +0.1293824f, -0.2453728f, -0.1894630f, +0.0651716f,
  -0.1065486f, +0.0081455f, +0.1285615f, -0.0625885f, +0.2414162f, +0.4336106f, +0.0295172f, -0.2028998f,
  +0.0422181f, +0.0063637f, -0.0045908f, -0.3322796f, +0.6119110f, +0.3209435f, -0.0814734f, -0.0491679f,
  +0.1958074f, +0.0648529f, -0.0027015f, -0.1714818f, +0.1838396f, -0.3890816f, -0.0541439f, -0.0744905f,
  +0.1107619f, +0.1715418f, +0.0934433f, +0.2025477f, -0.0110429f, -0.1759219f, -0.2330971f, -0.1476103f,
  +0.0161914f, +0.2756602f, -0.0052693f, +0.3305040f, +0.1280596f, -0.1100455f, -0.0512223f, -0.2119279f,
  +0.0130484f, -0.1706278f, +0.0783339f, -0.3544096f, +0.0774949f, +0.1406486f, +0.3140170f, -0.2688730f
);

const float biases[4] = float[4](
  -0.0255273f, +0.0306060f, -0.0477610f, +0.0346873f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer67 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0353344f, -0.0260922f, +0.2072207f, -0.1262896f, +0.1424837f, -0.0444152f, -0.0932570f, -0.0294236f,
  +0.0035506f, +0.2693778f, -0.0535641f, +0.0992685f, -0.3352845f, -0.0843979f, +0.0450373f, -0.1285446f,
  +0.1014302f, -0.0711989f, +0.0039295f, -0.1040091f, -0.0220123f, -0.0276923f, +0.0423705f, +0.0192175f,
  +0.1541568f, -0.0187323f, +0.0952484f, -0.1631221f, +0.0230060f, +0.0061229f, +0.1421088f, +0.0503765f,
  -0.1881952f, +0.3242512f, +0.1374789f, +0.3283975f, -0.4759024f, -0.0687463f, -0.2164645f, -0.2308757f,
  +0.0221675f, -0.1059304f, -0.3358352f, -0.1256985f, -0.0298287f, +0.1916786f, +0.2361374f, +0.2272031f,
  +0.0686328f, -0.0444593f, -0.0314149f, -0.0845832f, -0.0370459f, +0.1462861f, -0.1368666f, -0.0765243f,
  -0.2845046f, +0.1762626f, +0.1767077f, +0.4473930f, -0.1396947f, -0.1218403f, -0.0505416f, +0.0568803f,
  +0.0946283f, -0.1659574f, -0.2094934f, -0.4318243f, +0.1180037f, +0.0855793f, +0.2028501f, +0.1107668f,
  -0.0235906f, +0.0417495f, -0.0418237f, -0.1330663f, -0.0389019f, -0.3812224f, +0.0503069f, -0.2961290f,
  -0.0827680f, -0.0037651f, +0.1490871f, -0.1411455f, -0.0174547f, -0.1874076f, -0.1841910f, +0.0047428f,
  -0.0484827f, -0.0768860f, +0.1523069f, +0.1107429f, +0.0909740f, -0.1364718f, -0.0459814f, -0.2028068f,
  -0.1926343f, -0.0529475f, -0.0986138f, +0.1172987f, -0.1740275f, -0.3043599f, -0.2609282f, -0.0057623f,
  +0.4075543f, -0.1398583f, -0.3039317f, +0.1844244f, -0.2678056f, -0.1807826f, +0.0997845f, +0.0038497f,
  +0.2078990f, -0.0041574f, +0.0613347f, +0.0349397f, +0.1467940f, +0.1251892f, -0.2534445f, -0.2018794f,
  -0.1362353f, +0.2082219f, +0.1186718f, -0.1630878f, -0.0963072f, +0.2286128f, +0.2246926f, +0.0956521f,
  -0.1652582f, -0.1007695f, -0.1970095f, -0.6257926f, -0.0881308f, +0.2404431f, +0.1849444f, +0.0042194f,
  +0.0409963f, +0.0005952f, -0.0941926f, -0.1357616f, -0.0378148f, +0.1261711f, -0.1101701f, -0.0442982f,
  -0.3880665f, -0.1218804f, -0.0533339f, +0.1864538f, +0.0715696f, +0.0095065f, -0.0996673f, +0.1048734f,
  -0.1663563f, -0.4201144f, -0.0508838f, -0.1139756f, +0.3689117f, -0.0458400f, -0.0939430f, +0.1609417f,
  +0.0561511f, +0.5035893f, +0.3242857f, -0.3728092f, +0.4580759f, -0.0658737f, -0.1124211f, -0.2725153f,
  -0.0443290f, +0.0818686f, -0.1638874f, +0.2178570f, +0.0076550f, +0.0055131f, +0.0684219f, +0.2687771f,
  +0.1901487f, -0.7545269f, -0.1805167f, -0.5675333f, -0.0068548f, +0.1427186f, -0.3034363f, -0.1154001f,
  +0.2890305f, +0.3815921f, +0.2358320f, +0.1750757f, +0.3622955f, +0.2182359f, +0.0898208f, -0.2072951f,
  +0.0849417f, +0.1009504f, -0.0368877f, -0.0507562f, +0.0050088f, +0.0331813f, -0.0850214f, +0.1210408f,
  +0.1844327f, -0.1083358f, -0.1958770f, +0.1468630f, +0.0892446f, -0.1185734f, -0.1681842f, -0.0494358f,
  -0.1707373f, +0.0170500f, +0.1107097f, +0.2363178f, +0.2533653f, -0.0597466f, +0.1783790f, +0.0226529f,
  -0.1168525f, +0.1509847f, +0.2215859f, -0.1237850f, -0.1721684f, -0.1449081f, +0.0900057f, -0.0438001f,
  -0.2751288f, +0.0484199f, -0.0082699f, -0.2070909f, +0.1529051f, -0.3167285f, -0.3149621f, -0.3416098f,
  -0.1220666f, +0.0549199f, +0.0311016f, -0.0683201f, +0.1270595f, -0.0948746f, -0.0401093f, -0.0330771f,
  +0.0973925f, -0.0101405f, +0.0538216f, -0.0298049f, +0.1230961f, -0.0714296f, -0.2459076f, -0.0499607f,
  +0.2438252f, -0.0478294f, +0.1348173f, +0.0501000f, -0.3347479f, -0.0402745f, -0.2425566f, +0.1875400f,
  +0.0309073f, -0.0223965f, +0.1401911f, +0.0597956f, +0.0822663f, +0.0732404f, -0.1316748f, +0.1468532f,
  -0.2220928f, +0.1899788f, +0.0841626f, -0.0762530f, -0.1739314f, +0.1289522f, -0.1255277f, -0.1829762f,
  +0.1571951f, -0.0227323f, -0.0029183f, -0.1028190f, +0.2224670f, +0.1074670f, +0.0559544f, +0.1305768f,
  +0.2081930f, +0.0264902f, +0.0815049f, -0.0408422f, -0.0436577f, +0.2331526f, -0.1293119f, +0.0712231f
);

const float biases[4] = float[4](
  +0.0287131f, +0.0247398f, -0.0168208f, +0.0394021f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer67 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.3154783f, +0.0157227f, +0.1223743f, +0.0230649f, +0.2053298f, -0.0552785f, -0.2297692f, +0.0734755f,
  -0.2335455f, +0.1452454f, -0.2781028f, -0.0445260f, +0.1026446f, -0.5211423f, +0.1753219f, -0.2381286f,
  +0.2044711f, -0.2406580f, -0.2126520f, -0.0937114f, +0.0205766f, -0.0619277f, -0.1659860f, -0.0275750f,
  -0.2201431f, +0.1694118f, -0.3538111f, -0.2272099f, +0.1030973f, -0.2408888f, +0.0589766f, +0.2027590f,
  -0.1250129f, +0.4869781f, -0.0959330f, -0.1889895f, +0.0197404f, -0.0623356f, +0.2205218f, +0.2352802f,
  +0.1440681f, -0.0355493f, -0.0306135f, +0.0050051f, -0.0145322f, -0.2471067f, -0.1020118f, -0.3013332f,
  +0.0910122f, +0.1386476f, -0.2409212f, -0.0067633f, +0.0788259f, +0.1936911f, -0.2275997f, +0.1731745f,
  -0.1505522f, +0.2413725f, -0.0929124f, -0.1970824f, +0.0524347f, +0.0647878f, +0.0707144f, -0.1979813f,
  +0.0462153f, +0.1367289f, -0.1833652f, +0.0495646f, +0.2170480f, -0.4654798f, +0.2950341f, -0.1846403f,
  +0.0489259f, -0.0495112f, -0.0231978f, +0.1275572f, -0.0005301f, -0.0992819f, -0.1248846f, +0.0080950f,
  -0.1251220f, -0.0330547f, +0.1941413f, -0.0112112f, +0.0902059f, +0.0310607f, -0.0823969f, -0.0246033f,
  +0.1575851f, +0.1422858f, -0.1934330f, -0.3721887f, -0.0301949f, +0.0375509f, -0.0570545f, +0.2901503f,
  -0.1763252f, -0.0516806f, +0.0156182f, -0.1200792f, +0.1783547f, -0.2610898f, -0.2245463f, +0.1180508f,
  -0.0718052f, -0.0207197f, +0.1978235f, -0.3752422f, -0.1584846f, -0.1660679f, -0.0306176f, -0.0480229f,
  +0.0157562f, +0.3383280f, -0.1214502f, +0.2314403f, -0.0824487f, +0.1636138f, +0.0759116f, +0.1883222f,
  -0.0606736f, -0.0608380f, +0.0964433f, -0.2966456f, +0.1747384f, -0.4056712f, +0.5197978f, -0.1172141f,
  -0.0210691f, -0.1030019f, -0.1563734f, -0.1799453f, -0.0242983f, -0.0125156f, +0.0800880f, +0.0178810f,
  +0.0837132f, -0.0849103f, -0.1073273f, -0.1403200f, +0.2597998f, -0.0858962f, +0.3020929f, +0.1301993f,
  +0.0112193f, +0.0995779f, -0.0341743f, -0.2144770f, +0.2113221f, -0.0497162f, +0.0362301f, -0.0796742f,
  +0.0709593f, -0.0391123f, +0.3335355f, +0.2856537f, +0.2616748f, +0.2785585f, -0.0876501f, -0.2910266f,
  +0.0975062f, +0.0784806f, -0.0806504f, +0.1444603f, -0.2957465f, +0.0012471f, -0.0140894f, -0.1299637f,
  +0.2152940f, -0.2290004f, +0.2826537f, -0.2146070f, -0.1970296f, +0.0417038f, -0.2848589f, -0.0369144f,
  -0.0985727f, +0.0104419f, -0.0741310f, +0.1262515f, -0.1415916f, +0.1552831f, -0.0075770f, +0.1303025f,
  -0.0620983f, -0.1499295f, -0.0016154f, +0.0609046f, -0.0241195f, +0.2956969f, -0.1922515f, -0.0212940f,
  +0.1993059f, +0.1540887f, +0.0094445f, +0.0555205f, +0.0246543f, -0.0542987f, +0.0924690f, +0.0322655f,
  +0.0517538f, -0.1401420f, +0.0241994f, -0.0629894f, -0.0586859f, +0.2114334f, +0.0478860f, +0.2536811f,
  -0.1202224f, +0.0423196f, +0.0258385f, +0.2158388f, -0.0853956f, -0.1127404f, +0.0144070f, -0.1114016f,
  -0.0237216f, -0.4746416f, -0.1815179f, +0.0999786f, +0.0517925f, +0.1009719f, -0.1188042f, +0.1283092f,
  +0.0096647f, -0.1266395f, +0.0001068f, -0.0336600f, +0.0802864f, +0.0977825f, -0.0483417f, +0.0581286f,
  +0.0359356f, +0.0606823f, +0.2187194f, -0.2080905f, -0.1785250f, -0.0151533f, +0.1471218f, +0.1167272f,
  +0.0793837f, +0.3447324f, -0.1462212f, +0.2941642f, +0.0846303f, -0.2016869f, +0.0892029f, +0.3629763f,
  -0.3399986f, -0.2283511f, -0.3002735f, -0.2411448f, +0.1171996f, -0.3626103f, -0.1314670f, +0.3453090f,
  -0.2677855f, +0.0955156f, -0.2901257f, +0.0667616f, -0.0179468f, -0.0283220f, -0.1434655f, +0.1992914f,
  +0.1711662f, +0.0587421f, +0.0971723f, +0.0253521f, +0.1278925f, -0.1455848f, -0.0121457f, +0.0516545f,
  +0.4736935f, +0.1276836f, +0.1169797f, +0.5473271f, +0.0890436f, -0.0795168f, +0.0591833f, -0.0703964f,
  +0.0264605f, -0.0304695f, -0.1001800f, +0.3136982f, +0.2655448f, +0.0644231f, +0.0981469f, +0.1364851f
);

const float biases[4] = float[4](
  -0.0279635f, +0.0280927f, +0.0019141f, -0.0332623f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer68 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0254776f, +0.2093482f, -0.0633357f, -0.1037524f, +0.1807532f, -0.1683278f, -0.1330739f, +0.2227346f,
  +0.1227991f, -0.2388086f, -0.0592548f, -0.4279860f, +0.1888597f, -0.1366178f, -0.1249821f, -0.0716980f,
  +0.0156051f, -0.3680213f, -0.0386261f, -0.0306077f, -0.0134971f, -0.0425622f, -0.0256640f, -0.1173218f,
  +0.2091499f, -0.1953111f, -0.1083421f, -0.1594612f, -0.0481167f, -0.3391248f, +0.0542596f, +0.0299423f,
  +0.0984920f, -0.3594786f, +0.0645475f, -0.0929159f, +0.0123189f, +0.0928095f, -0.0395438f, -0.2117179f,
  +0.0199287f, -0.0983512f, +0.0401285f, +0.0252202f, +0.1177450f, +0.1425671f, -0.2121420f, -0.0641055f,
  +0.0010516f, -0.1404610f, +0.1367849f, -0.1060860f, +0.0042541f, -0.1686822f, +0.1931720f, -0.2164161f,
  -0.1395026f, +0.1511671f, -0.0568505f, +0.2204447f, +0.2003397f, -0.1249385f, -0.2681833f, +0.2967690f,
  +0.0615600f, -0.0110540f, +0.0606034f, -0.0563962f, -0.0747203f, -0.0092542f, +0.0463790f, -0.0125155f,
  -0.0534558f, -0.0649258f, +0.1446838f, +0.1160479f, -0.2988394f, +0.1177064f, -0.0769680f, +0.1209770f,
  -0.1740620f, +0.1914482f, +0.0638627f, +0.1572789f, +0.0071641f, -0.0591072f, -0.1165372f, +0.3676130f,
  -0.1692362f, +0.1093437f, +0.0873048f, +0.1727224f, -0.0238133f, +0.0771417f, +0.0471239f, -0.0418862f,
  -0.2410202f, +0.0760998f, +0.1717007f, -0.1354767f, -0.2124009f, -0.0990226f, -0.0652412f, +0.0352113f,
  -0.0436934f, +0.0895011f, -0.1541574f, +0.4041173f, -0.1477936f, -0.0546722f, +0.1289549f, -0.0896891f,
  +0.1326192f, +0.6179946f, +0.1539309f, +0.1004071f, -0.1417137f, -0.2364753f, +0.1423941f, +0.4112439f,
  -0.2581021f, +0.0780432f, +0.2427108f, +0.1901852f, -0.2153066f, -0.0486867f, +0.1195982f, +0.0840068f,
  -0.0016269f, -0.2086813f, +0.1879873f, +0.1065702f, -0.4500061f, -0.1006213f, -0.0455014f, -0.1412238f,
  -0.1007998f, +0.0014702f, +0.0058945f, +0.1296860f, +0.0592970f, -0.1972748f, -0.1792030f, -0.0892985f,
  +0.0753304f, +0.1592922f, +0.0923831f, +0.0967668f, +0.2759475f, -0.0138308f, -0.1370145f, +0.1822145f,
  +0.0563834f, +0.0612710f, +0.0685081f, -0.0379449f, -0.3426125f, +0.2321617f, -0.2742248f, -0.1362655f,
  -0.0966699f, -0.0403634f, -0.0706017f, +0.0663706f, -0.0766370f, -0.0490593f, +0.0576273f, -0.1684341f,
  +0.2751295f, +0.1943634f, -0.2759865f, -0.1798603f, +0.2755752f, -0.0581805f, -0.0340346f, -0.1009541f,
  -0.1144139f, +0.3505301f, -0.1721464f, +0.1847919f, -0.0922112f, -0.3326429f, +0.1700666f, -0.0189057f,
  +0.1393646f, -0.0390804f, -0.0223385f, -0.0644528f, +0.0459132f, -0.1615690f, -0.1873399f, -0.1068962f,
  +0.0691621f, +0.1937460f, -0.1365286f, -0.1399247f, +0.0541472f, +0.3030544f, +0.0219043f, -0.0605666f,
  +0.2004141f, +0.2234782f, -0.1695078f, -0.3007182f, +0.1878805f, -0.1173939f, +0.0788298f, +0.0944283f,
  +0.0000435f, +0.0707966f, +0.0272195f, -0.3032928f, -0.0837944f, +0.0572331f, +0.0787874f, -0.0489720f,
  +0.3602049f, +0.0900022f, +0.0424711f, -0.1784062f, -0.1919837f, +0.0073639f, -0.1250607f, -0.1931982f,
  -0.5501087f, +0.7565147f, -0.0367729f, -0.0130196f, +0.0349504f, +0.1558247f, +0.0596347f, +0.3708804f,
  -0.0158696f, +0.1203060f, -0.0854817f, -0.0144125f, +0.2048911f, +0.0753626f, -0.1619405f, +0.0347121f,
  +0.1792987f, -0.1269861f, +0.3738616f, +0.0324680f, -0.4296615f, -0.2427393f, +0.1305252f, +0.2088194f,
  -0.4119842f, -0.2509062f, -0.5965696f, -0.1971528f, +0.2577536f, +0.3615496f, -0.0043539f, -0.3455039f,
  -0.2198677f, -0.1982567f, -0.0480948f, -0.0781295f, +0.2092919f, +0.0086798f, -0.0206432f, -0.1011783f,
  +0.0900952f, -0.0768513f, -0.0722915f, -0.0171641f, +0.3309776f, +0.3016415f, +0.0499351f, -0.0700349f,
  -0.2043960f, +0.1672079f, +0.2848046f, +0.0174296f, +0.1705122f, -0.1725716f, -0.3106941f, +0.2717258f,
  -0.0465426f, -0.0272150f, +0.0342317f, +0.0312681f, -0.1922386f, -0.0752174f, +0.2968117f, -0.0671570f
);

const float biases[4] = float[4](
  -0.0065411f, +0.0118720f, -0.0030344f, -0.0144580f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer68 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2141858f, +0.1185386f, -0.1028854f, +0.2551558f, -0.0269982f, +0.1210235f, -0.0633039f, -0.1001266f,
  -0.0156096f, +0.2680281f, -0.1985463f, +0.2423734f, +0.1784982f, +0.1338995f, +0.2795633f, -0.1105026f,
  +0.1136738f, +0.2449441f, -0.0812025f, +0.1197806f, +0.1848906f, -0.0572071f, +0.0002510f, -0.0542065f,
  +0.2876745f, +0.2732868f, +0.1992765f, +0.0160995f, +0.1470008f, +0.2144227f, -0.2260018f, +0.2617417f,
  -0.0052367f, +0.4592593f, -0.4243205f, +0.0219369f, -0.0142594f, -0.3428207f, -0.1372222f, +0.0779898f,
  -0.1296372f, -0.0415480f, -0.0567057f, +0.0008199f, -0.0999257f, -0.1541173f, +0.1611304f, -0.0044226f,
  +0.0473495f, +0.0761950f, -0.2345754f, +0.1162565f, +0.4191116f, +0.0317855f, -0.1853043f, +0.0379084f,
  +0.2249071f, -0.0499758f, -0.3684050f, -0.2471696f, -0.6388408f, -0.0125277f, -0.1766050f, -0.0178847f,
  +0.0631406f, +0.1826907f, -0.1124037f, -0.0103214f, -0.2144500f, +0.0076504f, +0.0522871f, +0.1064012f,
  -0.0991349f, +0.1909321f, -0.1320266f, -0.0120013f, +0.1611364f, -0.2329483f, -0.0751986f, +0.2307264f,
  -0.1458534f, +0.0986516f, -0.0347958f, +0.1094381f, +0.0729274f, -0.3348913f, -0.0785949f, +0.3540909f,
  -0.0439258f, +0.1396378f, +0.0479687f, -0.0432951f, -0.1146164f, -0.0455836f, +0.0039826f, +0.2181674f,
  +0.2419323f, +0.1944998f, +0.1083427f, +0.1579363f, +0.3038251f, -0.0429212f, -0.1475988f, -0.1394899f,
  -0.0823142f, +0.1365833f, -0.2048525f, -0.1168743f, -0.0762725f, -0.1179180f, +0.0515118f, -0.3508630f,
  +0.0520331f, -0.0045077f, -0.1740121f, +0.1136972f, -0.1345371f, +0.1347517f, +0.0595186f, -0.0038500f,
  -0.0076162f, +0.0294344f, -0.1735423f, -0.0142330f, +0.3290907f, -0.0616663f, +0.0195199f, +0.0250449f,
  -0.0334725f, -0.0067190f, -0.4049433f, -0.0026170f, +0.1965412f, -0.3201855f, -0.4616339f, +0.0501182f,
  +0.0135686f, +0.0834434f, +0.0815888f, +0.0503184f, -0.0863906f, +0.0287328f, -0.0586389f, +0.0796279f,
  +0.0110230f, +0.2750553f, -0.1681212f, +0.1019860f, -0.0336910f, +0.1206833f, +0.1198161f, -0.0528026f,
  -0.0611099f, -0.0349982f, -0.1312736f, -0.1112391f, -0.3243557f, +0.2522072f, +0.0430462f, -0.1442242f,
  +0.0445710f, -0.0465770f, -0.0904626f, -0.2521756f, -0.0196511f, -0.4522265f, +0.0331058f, -0.2233176f,
  -0.1312706f, +0.2847196f, -0.2185636f, -0.0110380f, -0.1116599f, -0.0292964f, +0.0099667f, -0.2523702f,
  +0.2995053f, +0.3082784f, +0.0584277f, -0.1630230f, -0.1738330f, +0.2347057f, +0.3477752f, +0.4025707f,
  -0.3373543f, +0.5552574f, +0.0258840f, -0.2685902f, +0.3922445f, -0.1107323f, +0.0813600f, +0.3253003f,
  -0.1706544f, +0.1640615f, +0.0642222f, -0.0439060f, -0.0582637f, -0.0587662f, -0.0327290f, +0.1399898f,
  -0.0866312f, +0.0831426f, -0.1867565f, +0.1999339f, +0.0929557f, +0.0982159f, -0.2350218f, -0.2662731f,
  +0.1316141f, +0.0708605f, -0.2222212f, -0.0780568f, +0.1618574f, +0.0314090f, +0.1772736f, -0.0844941f,
  +0.0237066f, -0.1944885f, +0.1037930f, -0.1454943f, +0.0105297f, -0.1654591f, +0.0725630f, -0.2292466f,
  -0.1917914f, -0.0352776f, -0.0032796f, -0.2668615f, +0.1351564f, -0.2406574f, -0.1353786f, -0.0703090f,
  +0.0832575f, -0.0354301f, -0.0167074f, -0.1044734f, +0.1310903f, -0.0526639f, -0.0038480f, +0.2059235f,
  +0.0229246f, +0.1234748f, +0.4339862f, -0.3785415f, +0.1052686f, -0.1869781f, -0.0227657f, +0.0923164f,
  -0.2211488f, +0.2203471f, -0.3884493f, -0.4148614f, +0.0248022f, +0.0190828f, +0.0915520f, -0.2406401f,
  +0.0019650f, +0.0294692f, +0.0147585f, -0.0652272f, +0.1058910f, -0.0818530f, -0.0214615f, +0.0181447f,
  +0.0081195f, -0.0719933f, +0.1684067f, +0.0147652f, +0.4263866f, -0.2947859f, -0.1712023f, -0.1238786f,
  -0.0817719f, -0.1624763f, -0.3966138f, +0.2673054f, -0.2705485f, +0.1406127f, +0.1564420f, -0.1246622f,
  -0.0261498f, +0.0272650f, +0.0545105f, +0.1025870f, -0.2078284f, -0.1400173f, -0.0366273f, -0.1312416f
);

const float biases[4] = float[4](
  -0.0209729f, +0.0155670f, -0.0256935f, -0.0177688f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer69 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1388438f, -0.0726350f, +0.1292417f, +0.2906913f, +0.0862809f, +0.1090814f, -0.1154764f, -0.1450741f,
  +0.1616573f, +0.0483584f, +0.3217234f, +0.0806562f, +0.0074611f, +0.1901437f, +0.1504574f, +0.1400850f,
  -0.0206946f, +0.0147832f, +0.1438817f, -0.0511758f, +0.0818279f, +0.0347155f, +0.4025593f, +0.2864792f,
  -0.0548243f, -0.0347869f, +0.1246529f, +0.1078878f, -0.0172835f, -0.0500764f, -0.0900755f, -0.0843438f,
  +0.0740131f, +0.0281214f, +0.0830233f, -0.3017426f, +0.2066667f, +0.1216629f, -0.1548648f, -0.0234768f,
  -0.0187926f, -0.0728211f, +0.2672325f, +0.0080059f, -0.2036121f, -0.0849688f, -0.1010595f, -0.4182630f,
  +0.1006016f, -0.0502167f, +0.0896005f, -0.1008769f, +0.0254779f, +0.1183146f, -0.0423632f, +0.1615191f,
  +0.0308112f, -0.0090562f, -0.0459399f, -0.0047577f, -0.1579870f, +0.0713185f, +0.0784757f, +0.0877119f,
  -0.0620248f, +0.0567983f, +0.0877725f, +0.0085273f, +0.1427108f, -0.0498517f, -0.0076385f, -0.0625766f,
  +0.2159733f, +0.1305697f, -0.1827020f, -0.0501754f, +0.0654144f, +0.1955087f, +0.0706480f, -0.2905386f,
  +0.0859250f, -0.3103013f, -0.2224021f, -0.1578425f, +0.4601874f, -0.0658463f, +0.2096151f, -0.1523681f,
  -0.1803782f, +0.0552759f, -0.2039065f, +0.1325317f, +0.5053799f, +0.1460100f, +0.0146302f, -0.1207423f,
  -0.2686584f, -0.3786678f, +0.0413132f, -0.1519845f, -0.1094724f, +0.1356907f, -0.0159062f, +0.1081147f,
  -0.0405264f, -0.0792830f, +0.1307337f, -0.0996315f, +0.0415536f, +0.2332464f, -0.2897852f, -0.0657053f,
  +0.0381122f, +0.1157099f, +0.2630539f, -0.0544236f, +0.2774691f, +0.0450078f, +0.1099762f, +0.0893039f,
  +0.0883522f, +0.1007545f, +0.2102225f, +0.0496373f, -0.0313472f, -0.0921987f, +0.0911411f, -0.1270056f,
  +0.0665785f, -0.0872770f, +0.0551507f, -0.2458099f, -0.0445636f, -0.1575105f, +0.1511959f, +0.0413869f,
  +0.0069826f, -0.0905104f, +0.0995796f, +0.0211527f, -0.1548414f, +0.1842319f, +0.0120975f, +0.0212235f,
  +0.1762249f, +0.2921975f, -0.0506764f, -0.2763878f, -0.2787477f, +0.0111983f, +0.1673249f, +0.1157547f,
  +0.1353539f, -0.1904279f, -0.0331140f, +0.0315058f, -0.0515003f, +0.2623954f, -0.1176135f, +0.2663620f,
  -0.2697030f, +0.1393010f, -0.0888174f, -0.0859384f, +0.1072176f, +0.0840692f, +0.1677929f, +0.1335858f,
  +0.2184795f, +0.2610539f, -0.2929934f, -0.2416122f, -0.2885407f, +0.0149499f, +0.0407519f, +0.1514135f,
  +0.0615719f, -0.3237706f, -0.0244209f, -0.3641759f, +0.2406117f, -0.0577492f, -0.0016795f, -0.0941072f,
  -0.0529907f, +0.2813284f, +0.2506267f, -0.1781005f, +0.1203924f, -0.3364279f, +0.0560057f, +0.0010460f,
  +0.1614489f, +0.1496063f, -0.0535124f, -0.2367372f, -0.2553780f, -0.0379362f, +0.1132042f, +0.1484553f,
  +0.0509717f, -0.2355221f, -0.0082475f, -0.0891523f, -0.1521380f, +0.2803390f, -0.2268467f, -0.2490244f,
  -0.0806202f, +0.1485062f, -0.0250051f, -0.2981650f, -0.0677913f, -0.1228377f, +0.0200903f, +0.1152883f,
  -0.0848680f, -0.0137797f, +0.1570315f, +0.0631464f, -0.1992201f, -0.0282386f, +0.0130011f, -0.2608036f,
  +0.1597777f, +0.0452847f, +0.2633449f, +0.0429814f, +0.1235021f, +0.0609699f, -0.1664434f, -0.0001249f,
  -0.0174226f, +0.0063654f, -0.0768853f, +0.0627672f, +0.1905704f, +0.0684862f, +0.0912334f, -0.1459641f,
  -0.0215893f, +0.0508332f, -0.2678172f, +0.2517493f, -0.1458618f, +0.1269693f, -0.0650591f, +0.0294351f,
  +0.0583768f, +0.1523776f, +0.0702786f, +0.0047637f, +0.3354469f, -0.0505564f, -0.0487369f, -0.2498175f,
  -0.0266913f, +0.0953445f, -0.0771211f, -0.2921193f, -0.0009425f, +0.0625336f, -0.2851658f, -0.0184564f,
  -0.0063431f, +0.0432028f, -0.0353203f, +0.2680966f, +0.0084014f, +0.1048892f, -0.0360248f, +0.1349129f,
  -0.0440642f, -0.0365109f, -0.0344765f, -0.0130559f, -0.1244333f, +0.1160748f, -0.1108488f, -0.0123670f,
  +0.0855183f, +0.1882451f, +0.0647101f, +0.0446181f, -0.1988139f, +0.1187428f, -0.2244589f, +0.0182886f
);

const float biases[4] = float[4](
  +0.0581179f, -0.0148417f, -0.0144573f, +0.0050878f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer69 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0619278f, +0.1133893f, +0.1011431f, -0.1370282f, +0.0348874f, -0.1445248f, +0.2009431f, -0.0943658f,
  +0.0255946f, -0.3097916f, +0.1610479f, -0.1566798f, +0.0677472f, +0.0894888f, +0.0120725f, +0.0498847f,
  -0.1406838f, -0.1377411f, -0.0639562f, +0.1505973f, +0.0116773f, +0.1857235f, +0.3038236f, +0.0120946f,
  +0.0102476f, -0.0490143f, -0.3484868f, -0.0023329f, -0.0229955f, -0.1665011f, -0.1801158f, -0.0026483f,
  +0.1947587f, -0.2632801f, +0.0661271f, +0.1732887f, +0.0832201f, -0.2723980f, -0.1953320f, +0.2297819f,
  -0.0666832f, +0.1973902f, +0.0117490f, -0.3995587f, -0.3201739f, -0.2628739f, -0.3662458f, -0.1374473f,
  -0.0625415f, -0.0466402f, +0.0619065f, +0.0443387f, +0.0042277f, -0.1518019f, +0.0005193f, +0.1397545f,
  +0.4408977f, +0.0482166f, +0.2105799f, -0.9997545f, -0.3077266f, -0.0772355f, -0.1174430f, -0.5350257f,
  -0.0184681f, +0.1117855f, -0.1735950f, +0.2956175f, +0.0849139f, +0.0505389f, -0.0063320f, +0.4734090f,
  +0.2058035f, -0.0092116f, +0.2884477f, -0.0588136f, +0.0238680f, -0.0163301f, -0.1126442f, +0.1371039f,
  -0.1701556f, +0.0105844f, +0.1131149f, +0.0582355f, +0.0930849f, +0.1591598f, -0.4465607f, +0.1406824f,
  -0.0123347f, +0.0250202f, -0.2544174f, +0.1325555f, -0.1654440f, +0.0210546f, -0.0122929f, +0.1368248f,
  +0.1769853f, +0.1756529f, +0.1594840f, -0.4678851f, -0.1620098f, +0.2138498f, -0.0743795f, +0.3068519f,
  +0.2671819f, +0.1312670f, +0.0415591f, -0.1966889f, -0.1374231f, -0.2103900f, -0.1135572f, +0.3660229f,
  -0.2039021f, -0.0247482f, +0.3062967f, +0.3626413f, -0.1990957f, -0.0009957f, +0.1697575f, +0.2663685f,
  +0.0179368f, +0.2641436f, -0.1658989f, -0.0872402f, +0.0388208f, +0.0876982f, -0.1060797f, +0.2047636f,
  +0.2598774f, -0.0364859f, +0.2104239f, +0.1910516f, -0.3125168f, -0.0288506f, -0.0891845f, -0.3573656f,
  +0.0161482f, +0.2953952f, +0.0537983f, +0.0542455f, -0.1551443f, -0.2761699f, -0.2648032f, -0.2607223f,
  -0.0215009f, +0.0204870f, -0.0515445f, +0.0650311f, +0.0709917f, +0.1355985f, -0.0898933f, -0.1386603f,
  -0.1208996f, -0.1996521f, +0.0310837f, +0.1816630f, -0.3010421f, -0.1515820f, -0.1313923f, -0.1525879f,
  +0.0840118f, +0.1959921f, -0.2072804f, -0.2136028f, +0.1860201f, +0.2428968f, -0.0983585f, +0.1531242f,
  -0.1660113f, -0.2415878f, -0.0342805f, +0.0797165f, -0.0499727f, +0.0744125f, +0.0435712f, -0.1898574f,
  -0.3148520f, +0.0061035f, -0.2486882f, +0.4187793f, +0.1777032f, -0.0322575f, -0.1939776f, +0.0803114f,
  +0.0638016f, -0.0003094f, +0.1916297f, +0.1031980f, -0.1314401f, +0.1290672f, -0.1038742f, -0.0874011f,
  +0.2095424f, -0.1590997f, -0.1118485f, -0.0816922f, -0.1997359f, +0.2900260f, -0.0102251f, +0.1914942f,
  +0.1269038f, +0.0644385f, -0.0815732f, +0.2389491f, -0.1848511f, +0.3262373f, -0.1234060f, +0.1498652f,
  -0.0364408f, -0.0393214f, +0.2062891f, +0.2313753f, -0.1343494f, +0.0751369f, +0.0805207f, +0.0766364f,
  -0.1275845f, +0.3960782f, +0.0748450f, -0.4028930f, +0.1553200f, -0.1033385f, +0.2089182f, +0.1040607f,
  +0.1817603f, -0.0765869f, -0.0653043f, +0.1753488f, -0.0462051f, -0.0015036f, -0.2574034f, -0.0217401f,
  -0.1609822f, -0.1193316f, -0.1412107f, +0.2166644f, +0.1696334f, +0.1738403f, +0.0915848f, +0.0693773f,
  -0.0197407f, -0.5046340f, +0.0314955f, +0.2981312f, +0.1125221f, -0.1596994f, -0.0698469f, -0.1478581f,
  -0.1576771f, -0.2319969f, -0.2159330f, -0.2453440f, +0.3917710f, -0.0348341f, -0.1176154f, -0.1077438f,
  -0.0088304f, +0.2138760f, +0.2665481f, -0.2902785f, -0.2207846f, -0.1169151f, +0.0117804f, +0.2588526f,
  +0.2057558f, +0.1037356f, +0.0822758f, -0.3827958f, -0.0769702f, +0.0937597f, -0.1472096f, +0.2645727f,
  +0.4829926f, +0.0047605f, +0.1777757f, +0.0155459f, -0.4187462f, -0.0021352f, -0.0855075f, +0.0754719f,
  +0.0541914f, -0.2237047f, +0.0526369f, +0.1426702f, -0.1568984f, -0.3202276f, +0.0469976f, -0.1756787f
);

const float biases[4] = float[4](
  -0.0088476f, +0.0129420f, +0.0321466f, +0.0076640f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer70 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0810333f, -0.0626967f, -0.0065065f, +0.1157894f, -0.0135094f, -0.1812352f, -0.1664917f, +0.2672611f,
  -0.0796229f, +0.1622183f, +0.1302409f, +0.0633276f, -0.1178200f, -0.0661344f, -0.2847003f, -0.3286668f,
  +0.0559618f, -0.1802203f, -0.0072063f, -0.0365237f, -0.2771263f, -0.0992835f, -0.2776714f, -0.0351340f,
  +0.1878311f, +0.0609706f, +0.0068704f, -0.0375492f, +0.1019844f, -0.2119388f, -0.0731231f, +0.1572392f,
  +0.0167743f, +0.1565016f, -0.0989878f, -0.0876482f, -0.2442414f, +0.1686762f, +0.2212329f, +0.3521327f,
  -0.2281734f, +0.0541946f, -0.1696239f, +0.0158377f, +0.0589397f, +0.0266722f, +0.1002510f, +0.1570338f,
  -0.1392358f, -0.0508987f, +0.0818715f, +0.2297219f, -0.0831263f, -0.0368144f, -0.2336213f, -0.0647626f,
  -0.2525955f, -0.5840552f, -0.3684637f, -0.0120092f, -0.0101634f, +0.0339177f, +0.1759689f, -0.1746952f,
  +0.0080804f, +0.0249243f, +0.2841887f, +0.0842881f, -0.0164307f, -0.0255053f, -0.1124440f, -0.1262718f,
  -0.1899359f, -0.1578527f, +0.1146634f, -0.0496712f, -0.1489345f, -0.0340350f, +0.2195687f, -0.1235581f,
  +0.1780831f, -0.0041195f, -0.2669821f, +0.2549256f, +0.1764428f, -0.0776729f, -0.0592743f, +0.1842873f,
  +0.2020537f, +0.1580763f, -0.1787433f, +0.1241250f, -0.1328016f, -0.1436313f, +0.1580030f, -0.2974953f,
  -0.0639146f, -0.0401525f, +0.0266699f, -0.2657442f, +0.1062195f, +0.2760082f, -0.0393728f, -0.2580826f,
  +0.0163753f, +0.0995223f, -0.1764994f, -0.0312797f, -0.0540139f, -0.0599904f, -0.0890592f, -0.2097034f,
  -0.2005714f, -0.3527709f, +0.0322433f, -0.0515120f, -0.0366483f, -0.0472184f, +0.0194918f, +0.2724965f,
  +0.0761627f, +0.0854524f, -0.1293413f, -0.0559793f, -0.0946627f, +0.0105938f, +0.1488284f, -0.0594959f,
  +0.1424018f, -0.0229447f, +0.1341759f, +0.0697308f, +0.3867252f, +0.0192672f, -0.1579827f, +0.1678947f,
  -0.2226576f, +0.3056768f, +0.0398184f, -0.1099989f, +0.0658379f, +0.0310730f, +0.4411575f, -0.2042753f,
  -0.2124985f, -0.0092153f, -0.1826885f, -0.0932549f, -0.1065570f, +0.1386326f, -0.1557729f, -0.1801383f,
  +0.0816779f, +0.1413685f, -0.0326829f, +0.1007453f, +0.0551628f, -0.0289574f, +0.0249006f, -0.0267935f,
  +0.1404948f, +0.0721132f, -0.3684628f, -0.0628715f, -0.0375497f, -0.1275863f, -0.0468100f, +0.0022268f,
  +0.1939742f, +0.0403651f, -0.0072348f, -0.0418248f, +0.0847799f, -0.3108887f, +0.0496224f, +0.1953032f,
  -0.0603924f, -0.2764024f, +0.1868840f, +0.1077002f, +0.2240119f, +0.0445884f, -0.0887931f, -0.3433360f,
  +0.0219601f, -0.1001472f, -0.3659503f, +0.1304012f, -0.0338204f, -0.2872627f, +0.2833759f, -0.1163703f,
  -0.1709104f, +0.0877507f, +0.1307454f, +0.1738688f, +0.0329525f, -0.1054562f, +0.2154155f, +0.0289781f,
  -0.2761405f, +0.0444750f, -0.0430714f, -0.2536640f, -0.1928096f, -0.1544922f, +0.2469221f, +0.1786029f,
  +0.0634615f, -0.0398064f, -0.1071511f, -0.1433033f, -0.0134256f, -0.2192553f, +0.1241746f, -0.0378931f,
  -0.0440274f, +0.0146403f, -0.2145340f, +0.1430630f, +0.1486949f, +0.0741743f, -0.1375314f, +0.1758657f,
  -0.2568011f, -0.2284545f, -0.2020968f, +0.1784185f, +0.0536388f, -0.0678150f, -0.2011462f, +0.4770792f,
  -0.0729245f, +0.1627089f, -0.2109265f, +0.1531519f, -0.0271465f, +0.0677455f, +0.1055293f, -0.1881350f,
  -0.1140869f, +0.0362662f, -0.0188532f, +0.2155203f, +0.0116747f, +0.0355273f, +0.0383874f, -0.3116869f,
  +0.0711386f, +0.4712330f, -0.2298649f, -0.1787301f, +0.3576640f, -0.0599466f, +0.0528632f, +0.0834657f,
  +0.2230198f, +0.1216019f, -0.0611727f, -0.1299566f, -0.0472281f, -0.0414425f, -0.0577547f, +0.3697672f,
  +0.0052966f, +0.3723250f, -0.0578906f, -0.1181265f, +0.1523412f, +0.0779885f, +0.0815949f, +0.0310831f,
  -0.0733394f, -0.1501146f, -0.3184966f, -0.0991470f, -0.1026491f, +0.0046031f, +0.0550111f, -0.2753131f,
  -0.2572592f, -0.0360625f, -0.0992687f, +0.2091744f, +0.0400915f, -0.0415422f, -0.1972966f, -0.1562507f
);

const float biases[4] = float[4](
  -0.0250923f, -0.0041347f, +0.0049892f, -0.0352483f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer70 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0367561f, -0.0739291f, -0.0851854f, +0.1570931f, -0.1023429f, -0.1293306f, +0.2290291f, +0.1183271f,
  +0.0376916f, -0.1184167f, +0.3992186f, -0.1465024f, +0.3605901f, +0.0748062f, +0.2433354f, +0.2019656f,
  +0.0570340f, -0.0450830f, +0.3221960f, +0.0606397f, +0.1050751f, -0.0887377f, +0.1500527f, +0.1277486f,
  -0.2881149f, -0.0733176f, +0.0339829f, -0.0436761f, +0.3398241f, -0.1050030f, +0.0133452f, -0.0132073f,
  +0.0708671f, +0.1786471f, +0.3465018f, -0.1229913f, -0.1863270f, +0.2221821f, +0.0487215f, -0.2311913f,
  -0.0697634f, +0.0679593f, +0.3570848f, -0.0045444f, -0.0921841f, +0.1588615f, +0.1279407f, -0.3196773f,
  +0.0261714f, +0.1747651f, -0.0923642f, -0.1368355f, -0.0958296f, -0.0959975f, +0.1330402f, +0.0726826f,
  +0.1320314f, +0.2844591f, +0.5553718f, -0.1707719f, -0.0124317f, -0.2744119f, -0.0175633f, +0.2176209f,
  +0.0495613f, +0.0138679f, +0.0842123f, -0.0156990f, -0.0336253f, -0.1245365f, -0.2422155f, +0.2606460f,
  +0.2106102f, -0.0083161f, -0.1825259f, +0.0395045f, -0.2810991f, -0.0447899f, +0.1339570f, +0.1192230f,
  -0.0762555f, +0.1519328f, +0.0584167f, -0.0052171f, +0.0936935f, +0.1660038f, -0.1939772f, +0.3272809f,
  -0.0067400f, +0.0058270f, +0.1348981f, +0.0346181f, +0.0865939f, -0.0658882f, -0.0637633f, +0.3050081f,
  +0.0829966f, -0.1061168f, -0.0675753f, +0.0774875f, +0.1209727f, -0.0337579f, -0.0577875f, -0.0243799f,
  +0.1024625f, -0.0927075f, -0.4150806f, +0.1510192f, +0.1541236f, +0.1513101f, +0.0423705f, -0.3390097f,
  +0.0026030f, -0.2336624f, +0.0180408f, +0.3920572f, +0.1548744f, +0.0672570f, -0.1363788f, +0.2483832f,
  +0.0953495f, -0.1814343f, -0.0862416f, -0.2620068f, -0.0132452f, -0.1850780f, -0.2713382f, +0.1387531f,
  -0.1612039f, -0.0346762f, -0.1951384f, +0.0679554f, -0.1231453f, +0.0967000f, +0.2585266f, -0.0073417f,
  -0.0979886f, -0.2866455f, -0.0105676f, +0.0891445f, +0.0644002f, -0.0218452f, -0.1735342f, -0.0351603f,
  -0.0103290f, -0.1530830f, -0.2809007f, -0.0033499f, +0.3561681f, +0.0469989f, -0.0166856f, -0.2074933f,
  +0.0177719f, -0.0243043f, +0.1090865f, -0.1798209f, -0.1644349f, -0.1679347f, -0.0744652f, +0.1024638f,
  -0.1368558f, -0.0712947f, -0.0717511f, +0.3700156f, -0.2334587f, -0.1154587f, -0.1541030f, +0.0939764f,
  +0.1949717f, +0.0610784f, +0.1154869f, +0.0864521f, -0.3594922f, -0.1066519f, -0.2052910f, -0.1552479f,
  -0.1589500f, +0.3062491f, +0.2211241f, +0.0339510f, +0.0308343f, +0.3374117f, +0.5582905f, +0.0967372f,
  -0.0718984f, +0.1023391f, +0.1065937f, +0.3334927f, +0.2902938f, -0.0818533f, +0.1864655f, -0.3831197f,
  -0.3305405f, -0.1270687f, -0.1158081f, +0.0507039f, +0.1250791f, -0.1076493f, +0.2094938f, -0.0472618f,
  -0.0815056f, -0.1530829f, -0.2064657f, +0.0829804f, +0.0138187f, -0.0313989f, -0.0362177f, -0.1286027f,
  +0.0785800f, +0.2432649f, +0.0727997f, +0.1439092f, +0.1242749f, -0.3927874f, +0.0469698f, +0.0777055f,
  +0.1680715f, -0.1735694f, -0.0244861f, -0.1823009f, -0.0233203f, +0.2116466f, +0.0137653f, -0.0631884f,
  -0.4717987f, +0.0701796f, +0.1006498f, +0.1954419f, +0.1193014f, +0.0888345f, -0.2100711f, +0.1677154f,
  -0.1002385f, -0.0826740f, -0.1854994f, -0.0213255f, -0.1549691f, -0.2136300f, -0.0010551f, -0.0887401f,
  +0.2628821f, -0.1238737f, -0.3075499f, +0.1374455f, +0.0732124f, +0.1113428f, +0.0620562f, +0.0131320f,
  -0.2667940f, -0.1395920f, -0.3685719f, +0.0992414f, -0.2029021f, -0.0147247f, +0.1969289f, -0.1348450f,
  +0.1216761f, +0.0949624f, -0.2876498f, -0.0093505f, -0.0807451f, +0.1152400f, -0.1009026f, +0.0936023f,
  -0.0026112f, -0.0778378f, -0.1634771f, -0.0014293f, -0.0098305f, -0.2013128f, +0.1110900f, +0.0389904f,
  -0.1125394f, +0.0239582f, +0.1939311f, +0.2184653f, +0.2696259f, +0.0241602f, +0.1908322f, -0.0497225f,
  -0.1259350f, +0.3475848f, +0.1737431f, +0.0450229f, +0.0944491f, -0.0140875f, +0.1361369f, -0.1893610f
);

const float biases[4] = float[4](
  -0.0141894f, +0.0187358f, -0.0154518f, +0.0041005f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer71 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0892168f, +0.0171370f, +0.3158332f, -0.1129319f, -0.1233902f, +0.0448436f, -0.0217283f, -0.1922526f,
  +0.3572150f, +0.4627677f, +0.4954714f, -0.1384592f, -0.2337253f, +0.3330986f, +0.2798722f, +0.1767752f,
  +0.0397890f, -0.0013343f, +0.2905230f, -0.1832456f, +0.1319019f, +0.0928124f, +0.2447711f, +0.0139084f,
  -0.2825394f, -0.0127352f, +0.1107179f, -0.0178247f, +0.1371109f, -0.1276824f, +0.0439041f, +0.1391979f,
  -0.1073011f, -0.2751477f, -0.0579762f, +0.3020590f, -0.1509620f, +0.1710107f, +0.0773861f, -0.0553647f,
  +0.2000982f, -0.1258938f, +0.1427137f, -0.0104691f, -0.0224117f, -0.1197169f, +0.1144644f, -0.3038710f,
  +0.0671196f, +0.0929368f, -0.0117597f, -0.0504930f, -0.0869291f, +0.0889908f, -0.1041258f, +0.0518884f,
  -0.0606851f, -0.1314203f, -0.1141356f, -0.2090877f, +0.0385433f, +0.0305080f, -0.0584085f, +0.2007364f,
  +0.0657770f, -0.0499580f, +0.0947158f, +0.1113877f, -0.0458910f, +0.1400171f, +0.0079706f, +0.0551298f,
  -0.0037957f, -0.1531288f, -0.0907453f, +0.0757325f, -0.2517951f, +0.1382031f, -0.1162576f, -0.0173410f,
  -0.1350288f, -0.1582674f, +0.1416570f, +0.2289305f, -0.2430251f, +0.0371523f, -0.0309271f, -0.2751419f,
  +0.0917138f, -0.0334101f, +0.2859213f, -0.0282501f, -0.1283263f, +0.0446717f, -0.1374981f, +0.0461495f,
  -0.0378540f, +0.4223376f, +0.0468768f, +0.0604826f, -0.0284352f, -0.2560785f, +0.2209781f, -0.0667948f,
  -0.1921143f, +0.0386081f, -0.0845530f, -0.0960035f, +0.0849861f, +0.0578689f, +0.2242858f, +0.3156018f,
  -0.0171975f, -0.2342848f, -0.2686883f, +0.1633303f, +0.1752997f, +0.1707757f, +0.2500235f, +0.1216489f,
  -0.0277667f, -0.0817605f, -0.0343800f, +0.0071994f, -0.0934708f, -0.0341267f, -0.0190923f, +0.0587555f,
  +0.1753821f, +0.0991488f, +0.0076278f, +0.1194184f, +0.0566093f, -0.1759267f, -0.2213621f, +0.0321317f,
  +0.0479520f, +0.1385454f, -0.0536056f, +0.2796299f, +0.0180981f, -0.0562118f, -0.1684521f, -0.0062054f,
  +0.2313511f, +0.0689016f, -0.0173745f, -0.2296289f, -0.0161266f, -0.0982614f, +0.1003182f, +0.1539152f,
  +0.3882204f, +0.3142547f, +0.1503746f, -0.0985567f, +0.2035173f, -0.1510401f, +0.1914127f, -0.1485002f,
  -0.2044750f, -0.1377447f, +0.0350657f, +0.1854381f, +0.0028589f, -0.0290154f, +0.3209531f, -0.0997258f,
  +0.2420899f, -0.0252946f, -0.1786447f, +0.1484220f, +0.6343533f, -0.0536366f, +0.2522797f, -0.0747142f,
  -0.2409178f, -0.0920869f, -0.0713739f, -0.1634814f, -0.0862197f, +0.0115969f, +0.2314138f, +0.1625601f,
  -0.0331758f, -0.0486815f, -0.0495598f, +0.1101555f, +0.1194187f, -0.1036520f, +0.3630241f, +0.0252017f,
  -0.1280977f, -0.2254484f, -0.2431882f, -0.0112286f, +0.2345467f, -0.0345088f, +0.1954679f, +0.2483933f,
  +0.1204622f, -0.4410542f, -0.2827830f, -0.1588216f, -0.4142539f, -0.1877611f, +0.2300221f, -0.0930212f,
  +0.1186785f, -0.1493247f, +0.1930649f, -0.2006226f, +0.0151423f, -0.0258337f, +0.0965884f, +0.0883369f,
  -0.0822140f, +0.1764758f, +0.0595254f, -0.1056210f, +0.2402169f, +0.0822596f, +0.2337995f, -0.1250751f,
  -0.2054830f, +0.0237655f, +0.0397861f, +0.2347242f, +0.6648338f, -0.1258923f, -0.1555001f, -0.1180838f,
  -0.1122415f, -0.1191926f, -0.1569035f, -0.1950366f, +0.4732784f, -0.2008070f, +0.1941215f, +0.2869537f,
  -0.0449531f, +0.0456602f, +0.1688291f, -0.1551724f, +0.2790347f, +0.1773008f, -0.0148428f, +0.0054917f,
  -0.1224420f, -0.1807168f, -0.1366097f, -0.0759953f, +0.1553763f, -0.1244552f, -0.0873839f, -0.3542741f,
  +0.0571506f, +0.0577301f, +0.1091986f, +0.0185296f, +0.2706056f, -0.0127625f, +0.2009402f, +0.3586126f,
  +0.1150324f, +0.1065719f, -0.2441079f, +0.0742556f, +0.2825709f, +0.0353898f, -0.1270632f, +0.0238488f,
  +0.0651141f, +0.1242297f, -0.1310906f, -0.0546743f, +0.3228109f, -0.3178304f, -0.0722280f, -0.1305379f,
  +0.2876942f, -0.1746661f, +0.0563392f, +0.0594198f, +0.1432427f, -0.0110467f, +0.1466180f, +0.2247466f
);

const float biases[4] = float[4](
  +0.0088396f, +0.0220283f, +0.0058637f, -0.0338781f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer71 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1045068f, +0.0936724f, +0.1632232f, -0.0499423f, -0.0369202f, +0.0647030f, +0.0848128f, +0.0526749f,
  +0.0317195f, +0.0761334f, +0.0401731f, +0.0569073f, +0.0138743f, +0.1467735f, -0.0251809f, +0.1299796f,
  +0.1103450f, +0.0263421f, +0.1810539f, -0.1705017f, +0.0680546f, -0.0406496f, +0.2357341f, +0.1337616f,
  +0.0579325f, -0.1174878f, -0.1526626f, +0.0313985f, +0.1705331f, +0.1853487f, -0.0384956f, -0.1389045f,
  -0.0361649f, -0.2215560f, -0.0488013f, +0.1379651f, -0.2549632f, +0.0813705f, -0.0026253f, -0.0761648f,
  -0.1704204f, -0.0932719f, -0.2413918f, -0.1179235f, -0.3276263f, +0.0291953f, -0.1682623f, +0.1371122f,
  +0.0415900f, +0.1258271f, -0.1024515f, -0.2837241f, -0.0701563f, -0.0401641f, -0.0081911f, +0.1312869f,
  +0.3874360f, +0.0210595f, -0.1365044f, -0.3600072f, +0.0257668f, -0.3008114f, +0.1886663f, -0.0421997f,
  +0.1451302f, -0.0978201f, -0.2634982f, -0.3623860f, -0.0630443f, -0.0002578f, +0.1324384f, +0.4170147f,
  +0.0474835f, -0.0536628f, -0.0528984f, -0.0779002f, +0.1671616f, -0.1467824f, +0.2189977f, -0.0834725f,
  -0.1244948f, +0.0503693f, +0.2631132f, -0.1554087f, -0.3419733f, -0.3631915f, +0.1429232f, -0.1294639f,
  +0.2435366f, -0.2358372f, +0.1092474f, -0.2628745f, +0.1659302f, -0.2336227f, +0.0846772f, +0.1076362f,
  +0.0836117f, -0.1638878f, +0.1148567f, -0.3104108f, -0.2806155f, +0.1079155f, -0.1703271f, -0.2626660f,
  +0.0889915f, -0.2062671f, -0.1806722f, -0.1980627f, +0.2269950f, +0.0009647f, -0.1860182f, +0.3444519f,
  -0.0245580f, -0.0364607f, +0.0073651f, -0.4095885f, +0.1328937f, -0.3812552f, -0.0436302f, +0.2434120f,
  +0.0393798f, +0.1148649f, -0.0494133f, +0.2429801f, +0.0048497f, -0.0893963f, +0.1732845f, -0.0641769f,
  -0.0303120f, -0.0064034f, +0.0037701f, -0.0210387f, -0.0704457f, -0.3456424f, -0.0115468f, -0.0533157f,
  -0.0812014f, +0.1798071f, +0.3044250f, +0.3146850f, -0.0991828f, -0.0388488f, -0.0376881f, -0.2609580f,
  -0.0629500f, +0.1159560f, +0.1840205f, -0.1819789f, -0.1755921f, -0.0604478f, -0.3289525f, -0.0968034f,
  +0.0386997f, +0.2210497f, +0.0715104f, -0.1530618f, +0.1491579f, +0.0261089f, -0.1062668f, +0.1667130f,
  -0.1221663f, -0.0290701f, -0.0359411f, +0.0545744f, +0.1137685f, -0.0192062f, -0.0047597f, -0.0706912f,
  -0.0246179f, +0.3747536f, +0.0452176f, +0.0415727f, -0.2575044f, +0.0588003f, -0.4263884f, -0.2363002f,
  +0.2441426f, +0.2204830f, +0.0473939f, -0.2202512f, -0.1356436f, -0.0577371f, -0.0768241f, +0.0754383f,
  +0.0044371f, -0.0952548f, +0.1910883f, +0.0619744f, +0.0734776f, -0.1368942f, +0.1005820f, +0.0996769f,
  -0.0530542f, +0.0526633f, +0.0948230f, +0.2012477f, -0.1154076f, +0.0923486f, +0.0106895f, +0.1820502f,
  -0.0465468f, +0.1177705f, -0.2255731f, +0.0342164f, +0.1170730f, +0.4952839f, +0.0222523f, +0.2250561f,
  +0.1045372f, +0.0550313f, -0.0585050f, +0.1706283f, -0.1292874f, -0.1051033f, +0.0844854f, +0.1256218f,
  +0.1258848f, +0.0303448f, -0.0281861f, +0.0805485f, +0.0372310f, -0.3210053f, -0.0408174f, -0.2626909f,
  +0.0739102f, -0.1432367f, -0.0574867f, +0.0842130f, +0.0476352f, -0.1840293f, -0.0913959f, -0.0830310f,
  +0.0299075f, -0.1733337f, -0.0575122f, +0.1517694f, +0.1096779f, -0.0056992f, +0.0828520f, +0.1346850f,
  +0.1284221f, -0.3550583f, -0.1546937f, +0.2131243f, +0.1583220f, -0.2815870f, +0.1146038f, +0.0452203f,
  -0.2094730f, -0.1860009f, -0.0455365f, -0.0562754f, +0.1586452f, -0.1437014f, -0.1651147f, -0.0963757f,
  -0.0977297f, +0.0551596f, -0.0321664f, -0.2192475f, -0.3542469f, -0.1108785f, +0.0586474f, +0.2081638f,
  +0.2143349f, -0.4427193f, -0.1314973f, +0.3599674f, +0.5084054f, -0.1437897f, -0.0186008f, -0.0922836f,
  -0.3430500f, -0.0487214f, +0.1238005f, -0.3811312f, +0.0867709f, -0.0719317f, +0.0618324f, -0.0620857f,
  -0.0371163f, -0.1174619f, +0.0199339f, -0.2540229f, -0.0214249f, +0.0202348f, +0.1382657f, -0.0088501f
);

const float biases[4] = float[4](
  +0.0034014f, -0.0407482f, -0.0396972f, +0.0510064f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer72 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0118253f, +0.0169448f, -0.1623133f, -0.1517841f, +0.0107806f, +0.1403734f, -0.1320724f, +0.1007759f,
  +0.0583923f, -0.0297980f, -0.2661830f, -0.0936101f, -0.1169472f, +0.0341472f, -0.0721553f, +0.1152527f,
  -0.0101110f, -0.0293857f, +0.1608328f, -0.2285944f, -0.1195470f, +0.0654454f, -0.0563279f, -0.2151040f,
  -0.0848716f, +0.2138598f, +0.0965998f, -0.0798576f, +0.2531809f, -0.1335831f, +0.0636993f, -0.1201033f,
  -0.2180495f, +0.2020856f, -0.0177079f, +0.0942239f, +0.2478622f, -0.0966361f, -0.2565733f, +0.2514607f,
  -0.0267883f, +0.1089514f, -0.0245206f, -0.0229913f, +0.2732752f, +0.0704952f, +0.1205807f, -0.0756812f,
  +0.1036497f, +0.0519716f, +0.1171436f, +0.2505659f, -0.2258276f, +0.1291061f, +0.0234710f, +0.0169261f,
  -0.0178394f, -0.2652916f, +0.0413950f, -0.1325987f, +0.0416374f, +0.0705097f, -0.0396832f, -0.0566298f,
  -0.0006026f, -0.0630052f, -0.1597945f, +0.1605893f, -0.1862976f, +0.4807659f, -0.0244380f, +0.0771246f,
  -0.1434497f, -0.3339075f, -0.0143360f, -0.0735777f, -0.0846157f, +0.1519148f, -0.2024808f, +0.0835735f,
  -0.1634118f, -0.1932997f, -0.0340637f, -0.1516983f, +0.2202292f, +0.0356266f, +0.1773449f, -0.1383678f,
  -0.2798594f, +0.1522153f, +0.2158923f, +0.0376325f, -0.0984062f, -0.2446840f, +0.2161110f, +0.0624848f,
  +0.0366559f, +0.0647399f, -0.1600250f, -0.0500543f, -0.0201530f, -0.2648251f, -0.2853086f, +0.0583375f,
  +0.1945207f, +0.2402305f, +0.3604845f, +0.0815639f, -0.1314383f, +0.1221984f, +0.0179031f, -0.1730823f,
  +0.2922891f, -0.4528252f, -0.0597379f, +0.1161977f, +0.2131985f, -0.0612107f, -0.0917258f, +0.2990707f,
  +0.0508936f, +0.0434455f, -0.0730321f, +0.2540862f, +0.0982195f, -0.0185155f, +0.0479595f, +0.0271507f,
  -0.0916739f, -0.0667359f, +0.0500451f, -0.2414242f, -0.0224716f, -0.1851250f, -0.1440736f, -0.2767292f,
  +0.1561862f, -0.0168452f, -0.2732373f, -0.2735592f, -0.0134096f, +0.1085896f, -0.2674978f, -0.2133256f,
  +0.0558515f, -0.0617344f, +0.0960922f, -0.2031961f, +0.5106319f, +0.0685062f, -0.0795113f, -0.2336668f,
  -0.1717848f, +0.2355946f, -0.0856478f, +0.5120354f, +0.2794915f, -0.2251728f, -0.0314225f, +0.1666531f,
  +0.0388697f, +0.0221933f, -0.1079170f, +0.1210771f, +0.3675212f, +0.0345362f, +0.2133686f, -0.2347975f,
  -0.2068746f, +0.0861248f, +0.1869198f, -0.2999151f, -0.2664540f, -0.0427716f, -0.1657628f, +0.1811845f,
  +0.1477960f, -0.4272237f, -0.1027985f, +0.1547972f, +0.0355608f, -0.1398225f, -0.2746594f, +0.0607077f,
  -0.2660159f, -0.1383224f, +0.2218438f, -0.1608347f, -0.1107473f, +0.1986538f, +0.0171183f, -0.2675978f,
  -0.0936662f, -0.0367866f, +0.0919172f, +0.0191590f, +0.0006428f, +0.0029073f, -0.2061684f, +0.0818140f,
  -0.4007539f, -0.2720573f, +0.2682970f, -0.0436368f, +0.0450696f, -0.4161783f, -0.0938331f, +0.1816464f,
  -0.0988491f, -0.0049189f, -0.3196956f, -0.1346548f, -0.0511577f, +0.1210778f, -0.2470159f, -0.1838992f,
  -0.1547852f, -0.2722226f, +0.3601990f, -0.1788836f, -0.2765605f, -0.2364860f, -0.1092854f, +0.3992584f,
  +0.1096416f, +0.1558436f, +0.0329407f, -0.2559265f, -0.1595279f, -0.0784528f, -0.0974080f, +0.0301641f,
  +0.1160315f, +0.0171297f, -0.0326375f, -0.1562143f, -0.0814999f, -0.3947527f, +0.1047154f, -0.2128765f,
  -0.0187184f, -0.0803920f, +0.0631504f, -0.2516212f, +0.3628282f, +0.1068562f, -0.0190472f, +0.4937805f,
  +0.0960689f, +0.4531676f, +0.1843939f, -0.0569400f, +0.2090313f, -0.1781403f, -0.1272648f, +0.2479265f,
  +0.0248122f, +0.0897756f, +0.0096330f, -0.2693997f, -0.0345928f, +0.1779437f, +0.2896312f, +0.1141507f,
  +0.3016123f, -0.0689477f, -0.0539490f, +0.1441692f, -0.1740268f, -0.2437217f, -0.0794217f, +0.1420147f,
  +0.1742958f, -0.2331106f, -0.1699502f, -0.5136935f, -0.0674193f, +0.4070795f, +0.1478614f, -0.1538440f,
  +0.0416084f, -0.2051786f, -0.1670822f, -0.3131038f, +0.1144846f, +0.2913719f, +0.0105095f, -0.1274751f
);

const float biases[4] = float[4](
  -0.0310806f, -0.0192303f, -0.0242690f, +0.0084399f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer72 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1077807f, -0.0474249f, -0.2034106f, +0.0587677f, -0.1610476f, -0.0623864f, -0.1845500f, +0.0623750f,
  +0.0436826f, +0.0898394f, +0.0552599f, -0.0712561f, -0.1158211f, -0.1486285f, -0.2009438f, +0.0719896f,
  -0.0133683f, +0.1632636f, +0.0972813f, -0.0953181f, -0.1824767f, -0.4023773f, -0.3097630f, +0.1109568f,
  -0.0663488f, -0.0544699f, +0.2943770f, +0.0810604f, +0.0575429f, -0.2981557f, -0.0333145f, +0.0514101f,
  +0.1663949f, -0.0765518f, -0.2746801f, +0.2714627f, +0.1417360f, -0.3406158f, -0.1256108f, -0.0394714f,
  +0.0662411f, +0.0956337f, -0.1522833f, -0.0544848f, -0.1872007f, +0.0096339f, -0.1185014f, +0.1462892f,
  +0.0011601f, +0.2594243f, +0.0586702f, -0.4897399f, -0.0178523f, +0.2654883f, +0.0146898f, +0.0288026f,
  +0.2231802f, -0.0821438f, -0.2597929f, -0.2667525f, -0.1173999f, -0.0422981f, -0.2884139f, -0.2623037f,
  -0.0967759f, +0.1446390f, +0.4886611f, -0.3269849f, +0.1433095f, -0.3039343f, +0.1156626f, +0.0865026f,
  -0.2365739f, +0.1926613f, -0.0052195f, +0.1531083f, +0.0347117f, +0.1531327f, +0.1842034f, -0.0069304f,
  +0.0885642f, +0.0568269f, +0.1448920f, +0.1261172f, +0.5091566f, +0.2740374f, -0.2085378f, +0.0657726f,
  -0.2127700f, +0.0188876f, -0.1198869f, -0.0589397f, -0.0783408f, -0.0678413f, +0.1225996f, -0.2945847f,
  +0.2720308f, +0.3223317f, +0.3572077f, +0.1474768f, -0.0732679f, +0.4113637f, +0.0922858f, +0.1386191f,
  +0.3479699f, +0.1283688f, +0.1312704f, +0.1108174f, +0.2097196f, +0.0588863f, -0.0776806f, -0.0386974f,
  -0.0721848f, +0.1765244f, +0.0282007f, +0.0148274f, -0.0030458f, +0.0048678f, -0.1406658f, +0.3302864f,
  -0.0945274f, +0.0910171f, +0.1083255f, +0.0844939f, +0.0389549f, -0.1786981f, +0.0104169f, -0.1090202f,
  -0.2774273f, -0.1536187f, +0.3076789f, -0.5424400f, +0.0408537f, +0.1088006f, -0.1379689f, -0.0265283f,
  +0.1498795f, +0.0391875f, +0.2638924f, -0.3852834f, +0.0177804f, -0.0022453f, -0.1197565f, +0.0667185f,
  +0.0598794f, -0.0123439f, +0.0516240f, +0.2473584f, +0.0513417f, +0.1570078f, +0.0905970f, -0.3946824f,
  -0.0559787f, +0.5340773f, -0.0182969f, +0.0276490f, -0.0471697f, +0.1054903f, +0.0724521f, +0.4829960f,
  +0.0991985f, -0.1360413f, +0.1709164f, -0.1461972f, +0.0336313f, +0.1255003f, -0.0332515f, -0.1243731f,
  +0.0052126f, -0.0791416f, +0.0539203f, +0.0598467f, -0.0513892f, -0.2934524f, +0.1292103f, +0.1187999f,
  +0.0126573f, -0.0812609f, -0.1920263f, +0.2928485f, +0.0073806f, -0.1119684f, +0.2544978f, +0.4680138f,
  +0.0901047f, -0.2935054f, +0.0470573f, +0.1845925f, +0.0597983f, -0.0744327f, -0.0087439f, +0.0302919f,
  -0.1389281f, -0.0221735f, -0.0169670f, -0.0218378f, +0.0348122f, +0.1158952f, +0.0214381f, -0.0364625f,
  -0.2035614f, +0.0640380f, +0.1718782f, -0.1360841f, -0.0767001f, -0.0080948f, +0.0823321f, -0.0090409f,
  -0.0458617f, +0.1933787f, -0.2119848f, -0.1272440f, -0.0486314f, -0.1405669f, +0.0335457f, -0.0314644f,
  +0.1300540f, -0.0262933f, -0.1831336f, +0.2899058f, -0.0956803f, +0.1576442f, -0.2887711f, +0.2169354f,
  +0.0706175f, +0.1748423f, +0.1555685f, -0.1066710f, +0.1391608f, -0.0637532f, -0.0013365f, +0.0199555f,
  +0.0865333f, -0.1460549f, -0.0944174f, +0.0695449f, -0.0331627f, -0.2345516f, +0.0211130f, +0.2222460f,
  +0.0548700f, +0.0177454f, -0.1234578f, +0.2011126f, +0.0395620f, -0.0486192f, +0.1916974f, -0.2541221f,
  +0.1969604f, -0.0444413f, +0.1138529f, +0.1470229f, -0.0071261f, -0.0633274f, -0.3773245f, +0.2267590f,
  -0.0699285f, +0.0601069f, -0.1249113f, +0.1640412f, +0.0423916f, -0.0891895f, -0.0358577f, -0.0346645f,
  +0.0236286f, +0.1170185f, -0.1962755f, -0.3058610f, -0.0744063f, -0.0828950f, +0.2475578f, -0.1593396f,
  -0.4439985f, +0.1905469f, +0.4232049f, +0.0322169f, +0.1057223f, -0.1412343f, +0.1021980f, +0.0447001f,
  +0.2035215f, -0.0103637f, -0.0745051f, +0.0217405f, +0.0172506f, +0.1895733f, +0.0443010f, +0.1486303f
);

const float biases[4] = float[4](
  -0.0275036f, -0.0206127f, -0.0038860f, +0.0008574f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer73 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1398002f, +0.1623302f, -0.3336393f, +0.2034855f, -0.0297382f, +0.2133835f, -0.0143271f, -0.0232503f,
  -0.1347764f, -0.3836794f, +0.2484279f, -0.3365327f, +0.4550333f, +0.0995495f, -0.2623560f, +0.3714342f,
  +0.2882529f, -0.0201007f, +0.1591140f, -0.2073036f, +0.1346772f, -0.1144372f, +0.0356257f, +0.2801852f,
  -0.0700468f, +0.2651769f, -0.4322827f, -0.0111943f, +0.0688871f, +0.1965151f, -0.0398097f, +0.2394723f,
  -0.0805679f, -0.0762066f, -0.2625809f, +0.0078720f, +0.3323968f, +0.0974306f, +0.0489906f, -0.0147284f,
  +0.5144420f, -0.0680783f, +0.2604285f, -0.4307975f, -0.0150615f, -0.3428110f, +0.3239660f, +0.1176407f,
  -0.0848169f, -0.0490391f, -0.2594032f, -0.1292654f, +0.1383207f, +0.0623139f, +0.0672759f, +0.0764609f,
  -0.1729884f, -0.0811856f, +0.0277190f, +0.1813233f, +0.0935357f, +0.0073827f, +0.3330310f, +0.0190357f,
  +0.3465615f, -0.0838159f, +0.1088973f, -0.6563987f, +0.1596637f, -0.0490662f, -0.2278675f, -0.3145725f,
  +0.0360149f, -0.0028425f, +0.4781753f, -0.1815458f, -0.1400651f, +0.1180797f, -0.1283750f, -0.0458757f,
  +0.2553479f, +0.0389685f, +0.2287913f, +0.0394319f, -0.4444648f, +0.0658818f, -0.1168166f, +0.0250873f,
  +0.0643263f, +0.1145384f, +0.1532567f, -0.2472251f, +0.2398882f, +0.1471636f, -0.1861641f, -0.0396191f,
  +0.2682211f, -0.2055654f, +0.0242068f, -0.2270443f, -0.0558433f, -0.1254328f, -0.3396764f, -0.0872845f,
  +0.0844197f, -0.1023394f, +0.0997611f, +0.2579404f, +0.2689710f, -0.0114126f, -0.1192595f, +0.3194797f,
  +0.0326337f, +0.0389590f, -0.2716921f, -0.2492123f, -0.1763446f, -0.0481985f, -0.3383897f, -0.0910459f,
  +0.0713323f, -0.1351329f, +0.0341064f, -0.1764762f, +0.0733685f, -0.0308521f, +0.0068878f, +0.0199488f,
  +0.1293543f, +0.0028864f, -0.1818004f, -0.3461786f, +0.4517014f, +0.1554214f, +0.1901431f, +0.0000993f,
  +0.0952167f, -0.1709712f, +0.1351537f, -0.3207475f, +0.0155388f, +0.1159656f, +0.2596688f, +0.2855342f,
  -0.0502027f, -0.2053817f, -0.0059325f, -0.0207071f, +0.2688581f, -0.0702337f, -0.0893834f, +0.0322587f,
  +0.0695297f, -0.2997045f, -0.1535127f, +0.0015526f, +0.1919532f, +0.2432056f, +0.3056119f, +0.0950427f,
  +0.4315956f, -0.1494812f, -0.0951905f, -0.1205217f, +0.3299583f, -0.3626830f, -0.1890931f, -0.1449170f,
  +0.0328210f, -0.2611787f, +0.1778330f, +0.2365225f, +0.1234448f, -0.2413063f, -0.0028119f, -0.1621774f,
  +0.0028447f, -0.2844987f, +0.0009426f, -0.0996891f, +0.1996180f, +0.0899793f, +0.4193623f, +0.2627597f,
  +0.2659737f, -0.1345240f, +0.1642292f, +0.1856209f, -0.0926983f, +0.2160173f, +0.1950178f, -0.1208377f,
  +0.0345588f, +0.1370264f, +0.1956699f, +0.0058990f, -0.1008760f, -0.0808263f, -0.0507414f, +0.0999336f,
  -0.1129316f, +0.2073043f, +0.0166887f, -0.2028747f, -0.0066118f, +0.0228934f, -0.0326336f, +0.0923021f,
  -0.0760867f, +0.1744647f, -0.1001844f, -0.1343707f, -0.1854574f, -0.0581505f, -0.0100338f, +0.0461126f,
  -0.0376155f, +0.3354522f, -0.0733406f, +0.2137808f, +0.3843536f, -0.0299928f, +0.2112415f, +0.0435076f,
  +0.0679263f, +0.3395616f, -0.1464008f, -0.2438093f, -0.1708811f, -0.1205992f, +0.0170309f, +0.0792541f,
  +0.1715433f, +0.0586742f, +0.0700753f, -0.3570103f, -0.0044717f, +0.1467941f, +0.4129013f, -0.0978024f,
  +0.1116213f, -0.3759964f, +0.2892834f, -0.1817250f, -0.1443680f, +0.0108831f, -0.2931152f, -0.1685578f,
  -0.2093542f, +0.0271993f, +0.0812094f, -0.3327603f, -0.1263919f, -0.3574229f, -0.0295376f, -0.1191585f,
  +0.0687964f, -0.0379879f, -0.0046338f, -0.0315955f, -0.2425344f, -0.0344681f, +0.0849503f, +0.0359569f,
  +0.3444354f, -0.0405939f, -0.1691747f, -0.1006607f, -0.0398999f, -0.0385831f, -0.2570714f, +0.2287860f,
  -0.1066970f, +0.1425696f, +0.1411452f, -0.2059315f, -0.1254065f, -0.0063572f, -0.0430583f, +0.0683159f,
  -0.0244455f, -0.2175930f, -0.0917173f, -0.2603404f, +0.1254579f, -0.1090314f, +0.0671356f, -0.0498891f
);

const float biases[4] = float[4](
  +0.0066951f, +0.0291665f, +0.0036707f, -0.0564518f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer73 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1599569f, -0.0469758f, +0.0293216f, -0.0305760f, -0.0267928f, +0.1560991f, +0.2542406f, -0.0220053f,
  -0.1672603f, -0.1098713f, -0.1564049f, +0.1160124f, +0.2138635f, +0.2036041f, +0.0079039f, -0.0769471f,
  +0.1394225f, +0.0659375f, +0.0462265f, -0.2363294f, -0.2160519f, -0.0153389f, +0.0564652f, +0.0010026f,
  -0.0637940f, +0.1571763f, +0.0464687f, +0.3108930f, +0.0604762f, +0.1172709f, +0.4247949f, +0.0903725f,
  -0.2310276f, +0.1234774f, -0.1082744f, +0.0817977f, -0.0525737f, +0.3031283f, -0.5200871f, +0.2846339f,
  +0.0744015f, +0.1786395f, -0.2087789f, -0.0615704f, +0.1299031f, +0.0381717f, -0.2738408f, +0.0521227f,
  -0.1518697f, +0.1110190f, +0.0030542f, -0.0853025f, -0.1793272f, +0.0012042f, -0.1705999f, -0.2218961f,
  +0.2073143f, +0.0304891f, +0.0358766f, +0.0742584f, -0.1680683f, +0.0329960f, -0.1925722f, +0.0033544f,
  +0.1901647f, -0.0069700f, +0.0070959f, +0.1813507f, -0.0031678f, -0.0080067f, -0.0993397f, +0.0832247f,
  +0.2341724f, -0.1755410f, +0.0476683f, +0.0747342f, -0.0663075f, +0.0147750f, +0.0189813f, +0.0568659f,
  +0.1035689f, +0.1423603f, -0.2055697f, +0.1450624f, +0.3428494f, +0.0367505f, +0.1555977f, -0.0897150f,
  +0.0009920f, +0.1339685f, -0.1159812f, +0.1029671f, -0.0029375f, -0.1141927f, -0.1593633f, +0.2283717f,
  -0.4647583f, +0.4392160f, -0.3113208f, -0.0182171f, -0.1302332f, +0.1000810f, -0.2609409f, -0.1049069f,
  +0.0621190f, +0.1917260f, -0.0848366f, -0.1885110f, +0.0238320f, +0.3500103f, -0.1135950f, +0.1874777f,
  +0.0537592f, +0.1133258f, -0.1389135f, +0.1602162f, +0.1359688f, +0.2540532f, +0.0473964f, +0.1046794f,
  -0.2559610f, -0.0406094f, +0.0166743f, +0.3636932f, -0.0190333f, -0.0815023f, +0.2738655f, -0.0900548f,
  -0.1896509f, +0.1052110f, -0.1384152f, +0.0638281f, -0.0000612f, -0.0349663f, +0.1473950f, +0.0872934f,
  -0.3057494f, -0.0866214f, +0.0629479f, +0.2295662f, -0.0507283f, +0.1947848f, -0.1331305f, -0.0882158f,
  -0.1197544f, +0.1796479f, +0.0834864f, +0.0570900f, +0.2138631f, -0.0121995f, +0.2931353f, +0.3936863f,
  -0.0299753f, -0.0036647f, -0.1172451f, +0.2342787f, -0.0562179f, +0.2637364f, -0.2142281f, -0.0690669f,
  +0.1802038f, -0.1702274f, -0.0221289f, +0.0828089f, -0.1412002f, +0.0751675f, -0.0330373f, +0.0807507f,
  +0.1398912f, +0.0239168f, -0.2340217f, -0.0598054f, -0.0725009f, +0.2754991f, -0.2469890f, +0.0306423f,
  +0.1693495f, +0.1426763f, -0.0439118f, -0.0351283f, +0.1439539f, +0.1532327f, +0.0804438f, +0.1088971f,
  -0.1401601f, -0.1943008f, -0.1160939f, +0.0794621f, -0.2834983f, +0.2260733f, +0.2173598f, -0.0170228f,
  -0.0690128f, +0.0507912f, -0.0350677f, +0.0753098f, +0.1098541f, +0.1043931f, -0.0793651f, -0.1480399f,
  -0.1132046f, -0.0778634f, +0.0618617f, +0.2439784f, +0.0470112f, -0.0002446f, -0.1746031f, +0.0790887f,
  +0.2539681f, -0.0522545f, -0.0454749f, +0.1996587f, -0.0754563f, +0.1430304f, +0.1093378f, +0.1637294f,
  -0.1163259f, +0.1479014f, -0.0144814f, -0.1323896f, -0.0004888f, -0.1760929f, +0.2482448f, -0.3360074f,
  +0.0914901f, +0.0320539f, +0.0122794f, -0.1864982f, -0.1465551f, +0.1191625f, +0.3486172f, -0.0193810f,
  -0.0984023f, +0.0487551f, -0.0644835f, -0.0612125f, -0.0738106f, +0.1133208f, +0.1072182f, -0.1148021f,
  -0.2334242f, -0.0948853f, +0.0027196f, +0.0328819f, -0.0403263f, -0.1221315f, -0.0207380f, +0.1189395f,
  +0.0109678f, +0.2550964f, -0.1122363f, -0.4901057f, +0.3216669f, -0.2611885f, +0.0732921f, -0.0564877f,
  -0.3993388f, +0.0841924f, +0.2556324f, -0.6066061f, +0.6117571f, -0.0747146f, +0.0942660f, +0.2108500f,
  +0.3191099f, +0.0642071f, +0.0007216f, +0.1023168f, -0.0203822f, +0.1585913f, -0.0015842f, +0.2328078f,
  +0.1598182f, +0.1056755f, -0.2282192f, +0.3793450f, +0.1568985f, +0.0189988f, -0.2902856f, +0.3710947f,
  +0.1157824f, -0.2172168f, +0.3610038f, +0.3065551f, +0.0309776f, +0.2670170f, +0.2720477f, +0.0121453f
);

const float biases[4] = float[4](
  +0.0131727f, -0.0183114f, +0.0094151f, -0.0161769f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer74 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1345537f, +0.0185777f, -0.1582707f, -0.0743378f, -0.0929607f, +0.2466539f, +0.0468243f, +0.1974597f,
  +0.1261150f, -0.1216602f, +0.0259211f, +0.2591005f, -0.0667123f, -0.0934923f, -0.1212226f, -0.0067318f,
  +0.1078999f, +0.1310168f, -0.1121258f, +0.1414570f, +0.0422083f, +0.1929232f, +0.0877413f, -0.1450605f,
  -0.1434807f, +0.1584362f, -0.0847950f, -0.0688386f, -0.0839527f, -0.0088834f, +0.0931015f, +0.0436656f,
  +0.3223933f, +0.2417821f, +0.1105736f, +0.2071737f, +0.1005821f, -0.2203584f, -0.1148045f, -0.5698449f,
  -0.0239108f, +0.0587250f, -0.0843615f, -0.2684748f, +0.0088584f, +0.0637223f, -0.1480941f, -0.0108547f,
  -0.3612698f, -0.1536690f, -0.0787028f, +0.0151428f, -0.1954811f, -0.0660429f, -0.1133137f, +0.0578521f,
  +0.0637712f, -0.1501563f, -0.1335627f, -0.0594369f, +0.1948876f, -0.0488658f, +0.0676254f, -0.0227386f,
  -0.0660178f, +0.0360697f, +0.1738098f, +0.2813437f, -0.0415988f, -0.0135151f, +0.2653178f, +0.1326089f,
  -0.0650210f, +0.1136251f, -0.1551683f, -0.1238824f, +0.0172287f, +0.2089782f, -0.1072521f, +0.0217964f,
  -0.1543073f, -0.1291511f, -0.4114223f, +0.0172153f, +0.0075133f, +0.1566618f, +0.0759032f, -0.0275119f,
  -0.0296725f, -0.0125930f, -0.0185348f, -0.1873866f, -0.1742222f, +0.1360250f, +0.0354922f, +0.0120398f,
  +0.0625196f, +0.0346211f, -0.0032901f, +0.2860108f, -0.2498947f, +0.1681241f, +0.0285277f, +0.2014884f,
  -0.3319393f, +0.0474661f, +0.0805597f, +0.1030153f, -0.3617851f, -0.0913967f, -0.0973617f, -0.2820731f,
  +0.0547700f, +0.3155354f, +0.1161033f, -0.0142829f, -0.2043578f, -0.1741995f, +0.1279928f, +0.3899905f,
  +0.0376550f, -0.0463283f, -0.0309463f, -0.0968784f, +0.1081174f, -0.0686335f, +0.1332583f, +0.0116311f,
  -0.0682678f, -0.1338745f, -0.0119485f, +0.2139818f, -0.0556571f, -0.2454839f, +0.0439588f, +0.0851757f,
  -0.0689780f, -0.0303493f, -0.1538480f, +0.0778947f, +0.2638758f, -0.1379192f, -0.1190947f, -0.0251390f,
  +0.0830292f, +0.0137739f, -0.0774374f, -0.0047846f, +0.0854939f, -0.0204566f, +0.0406577f, -0.1510181f,
  +0.0660761f, -0.0589904f, -0.1047174f, -0.0933214f, -0.3858837f, -0.1033819f, +0.1773526f, -0.0976682f,
  +0.1234162f, -0.1485176f, +0.2192627f, +0.2386227f, +0.1630749f, +0.1159629f, -0.1191945f, -0.0555626f,
  -0.2079870f, -0.1677786f, -0.1384530f, -0.2489245f, -0.1619025f, +0.1633312f, -0.1621521f, +0.1325877f,
  +0.4357952f, -0.2526271f, +0.1252359f, -0.4178063f, -0.0793417f, +0.2156117f, +0.2399333f, +0.0469558f,
  +0.1878769f, -0.2064659f, +0.0351622f, -0.3090056f, +0.1381581f, +0.1955625f, +0.0177005f, -0.1413262f,
  -0.0478354f, +0.0528564f, -0.1400363f, +0.0957247f, -0.0661218f, +0.2223954f, +0.0488785f, +0.1527588f,
  +0.3242309f, -0.2034063f, -0.0140390f, +0.0068532f, +0.2301576f, +0.0034263f, -0.0435270f, +0.1452727f,
  +0.0389726f, -0.0801472f, -0.0163257f, +0.0748350f, +0.1287656f, -0.2269036f, +0.0405927f, +0.0118515f,
  +0.0062612f, +0.0981690f, -0.1700469f, -0.0425022f, +0.0959379f, -0.0179528f, -0.0094469f, -0.2784941f,
  -0.1144950f, +0.0499916f, -0.1022564f, +0.0930849f, -0.2360159f, +0.0490834f, -0.0411814f, -0.2101492f,
  -0.0023242f, -0.2013428f, +0.1119909f, -0.0022622f, +0.0298245f, -0.1382486f, -0.0114954f, -0.1180078f,
  -0.0798610f, +0.3575577f, -0.2769063f, +0.1808441f, -0.0294325f, +0.3089537f, -0.1875327f, +0.1663906f,
  +0.0218879f, +0.0752825f, +0.3128965f, +0.1937769f, -0.0414341f, -0.0730612f, -0.2006501f, +0.3437322f,
  +0.1737799f, +0.0544338f, +0.1551018f, +0.0772695f, -0.1842928f, +0.0099335f, -0.0371964f, -0.2491368f,
  +0.0909938f, +0.0591301f, +0.0608550f, -0.2572879f, -0.0700101f, -0.0483824f, -0.0023733f, -0.1884008f,
  +0.2566994f, +0.0002445f, -0.1612504f, -0.1124979f, +0.0165093f, -0.0475859f, +0.0764162f, -0.2582236f,
  -0.0334437f, +0.1419596f, +0.0674030f, +0.0734629f, +0.3784535f, -0.0894844f, -0.0462440f, -0.0035233f
);

const float biases[4] = float[4](
  -0.0148421f, -0.0189622f, -0.0413867f, +0.0126422f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer74 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0322182f, +0.0314396f, +0.1454435f, -0.1332987f, -0.0572556f, +0.1223585f, -0.1022948f, -0.0789406f,
  -0.0274233f, -0.0140883f, +0.2488726f, +0.1296569f, -0.2183557f, +0.0181758f, -0.0806377f, -0.0447271f,
  +0.0292750f, -0.1323254f, +0.0897015f, -0.0556500f, -0.0948415f, -0.0687662f, +0.0989800f, -0.1420874f,
  -0.1678560f, -0.0497002f, +0.0617027f, +0.2245731f, -0.3349268f, +0.0052180f, +0.1703741f, -0.4241603f,
  +0.0119003f, +0.2038008f, -0.1477321f, -0.0185781f, +0.2418084f, -0.2648213f, +0.0156575f, -0.1218825f,
  +0.0946363f, -0.2435066f, +0.0608343f, +0.1694379f, -0.3417220f, -0.1198347f, +0.0629696f, -0.1109747f,
  -0.1904400f, -0.0279896f, -0.2603886f, +0.0490750f, -0.0145283f, -0.0792150f, +0.0834574f, -0.3137745f,
  +0.3665843f, +0.2115586f, -0.0069786f, +0.0633528f, -0.2271837f, -0.0771228f, -0.1215168f, -0.1497393f,
  -0.0088181f, +0.0440630f, -0.1737931f, -0.0831898f, +0.1187903f, +0.0533400f, +0.0041552f, +0.0809696f,
  +0.0142669f, -0.1771419f, -0.1466337f, +0.0533407f, -0.0689676f, +0.0039588f, -0.0537675f, -0.1181822f,
  -0.0909467f, -0.1189553f, -0.3871505f, -0.0902516f, +0.0042204f, +0.1772788f, -0.1922297f, -0.2103480f,
  -0.2140494f, +0.0575425f, -0.1011533f, -0.0655052f, +0.0790969f, -0.0774845f, -0.0409754f, -0.1431820f,
  +0.1060480f, +0.1142829f, -0.1630728f, +0.1621562f, +0.0048263f, -0.1751692f, -0.0376940f, -0.1038341f,
  -0.2782875f, +0.1047541f, -0.0809567f, +0.2531889f, -0.2166692f, -0.2734284f, +0.0872244f, -0.5580556f,
  -0.1462328f, +0.0255159f, -0.2362493f, +0.0528133f, +0.0538096f, +0.1734936f, -0.2342012f, -0.0042092f,
  +0.1290989f, -0.2758908f, +0.0182473f, -0.0542923f, -0.1856773f, -0.1788549f, -0.1561167f, -0.0088609f,
  -0.3929709f, -0.1600631f, -0.1350080f, +0.1675456f, -0.0774137f, -0.2376753f, +0.1185675f, -0.1197489f,
  -0.1314196f, -0.0352412f, -0.0345221f, -0.0541591f, -0.4406360f, +0.1565941f, +0.1169871f, -0.1064728f,
  +0.2900271f, -0.1085577f, +0.1050963f, -0.0246146f, +0.0512189f, -0.0723284f, -0.0470188f, -0.0627879f,
  -0.2145650f, -0.0649873f, +0.0942455f, -0.0633346f, +0.1521181f, +0.0071698f, +0.4110016f, +0.1563005f,
  -0.0091822f, -0.0732486f, -0.1186350f, -0.2360571f, +0.0527006f, -0.0330532f, -0.1710579f, -0.0428299f,
  -0.0401153f, +0.1492845f, -0.3701057f, -0.0524743f, +0.1351308f, -0.1779027f, +0.0526775f, -0.0514181f,
  +0.0882436f, -0.2179549f, +0.0447231f, -0.1334109f, +0.4493623f, +0.1283543f, +0.1334294f, -0.0712859f,
  +0.0216104f, -0.1809960f, -0.2396625f, -0.2048422f, -0.1131188f, -0.0845017f, +0.2464792f, +0.1040639f,
  +0.1858227f, -0.1015783f, -0.2110616f, -0.0342072f, +0.1474807f, -0.1855347f, -0.1142596f, +0.2253910f,
  -0.0682014f, +0.0393924f, -0.2454970f, -0.1988671f, -0.0583297f, +0.0158510f, -0.2850147f, +0.2541424f,
  +0.0083304f, -0.1342028f, +0.3700419f, -0.2876293f, +0.1072034f, -0.2999758f, -0.1963485f, +0.2642251f,
  +0.4875856f, -0.0162597f, +0.1601908f, -0.0160566f, +0.0940257f, +0.1483369f, -0.0066865f, +0.1114860f,
  -0.1132270f, -0.1245254f, +0.0330005f, +0.1399227f, +0.0679302f, +0.0314309f, +0.0737767f, -0.3239248f,
  +0.1012903f, +0.1681512f, +0.1502779f, -0.1270926f, -0.1104606f, +0.0941406f, -0.0369480f, +0.1013248f,
  -0.1148043f, -0.1039218f, +0.1464710f, -0.0126834f, +0.0843705f, -0.2479416f, +0.1038497f, -0.0582551f,
  -0.3244828f, -0.1388941f, -0.1167901f, +0.1988668f, +0.0356851f, -0.1044621f, -0.2138786f, -0.3539115f,
  -0.1638137f, +0.0376403f, -0.1110108f, +0.1467314f, -0.2956908f, -0.1910039f, -0.1267652f, -0.0437925f,
  +0.1018737f, -0.0968837f, +0.0054501f, +0.0455729f, -0.0189498f, -0.1213509f, -0.2610290f, +0.1578826f,
  +0.0025935f, -0.0067853f, -0.1292385f, -0.0337381f, +0.2269351f, -0.0348304f, +0.1580704f, +0.0174532f,
  +0.0136133f, -0.1180262f, -0.1587730f, -0.0482239f, -0.1468968f, -0.1059069f, -0.0002305f, +0.0984302f
);

const float biases[4] = float[4](
  -0.0143749f, -0.0161155f, +0.0086280f, -0.0011685f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer75 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1638574f, +0.1369792f, -0.0301450f, +0.1201701f, +0.1475574f, +0.1217063f, -0.1546718f, +0.1042262f,
  +0.0993635f, +0.0626318f, +0.0653066f, +0.1744251f, +0.0672845f, +0.0404787f, -0.1588292f, +0.1001403f,
  -0.0408014f, -0.1086959f, -0.1017049f, -0.0216225f, +0.0747939f, +0.1819352f, -0.0575954f, -0.0116044f,
  +0.1793453f, -0.2888907f, +0.1236997f, +0.2942062f, -0.0706142f, +0.1435071f, +0.0449303f, +0.2041274f,
  +0.1062464f, -0.0194939f, +0.0295653f, -0.3311800f, -0.0379233f, -0.0151118f, -0.3195342f, -0.2203784f,
  -0.1546182f, +0.0256288f, +0.0993008f, -0.0904927f, -0.2853531f, -0.3503729f, -0.1578618f, +0.0883556f,
  +0.4351388f, -0.2047568f, -0.0985354f, -0.2601993f, -0.0263730f, +0.2258411f, -0.1805920f, +0.0021197f,
  +0.2588575f, -0.3794883f, +0.0231003f, -0.0064237f, -0.0381577f, -0.3297291f, -0.3563800f, -0.0597420f,
  +0.0849499f, +0.2121511f, +0.0313220f, -0.0504645f, -0.1056666f, -0.1498049f, +0.0180699f, +0.2411376f,
  -0.2430656f, -0.2470139f, -0.1081067f, +0.0263237f, -0.2218706f, -0.0510647f, -0.0074150f, +0.1112316f,
  +0.1325664f, +0.1773607f, +0.3337282f, -0.1254757f, +0.2863903f, +0.1724453f, +0.0177542f, -0.0500954f,
  -0.1606142f, +0.1501857f, -0.1447613f, +0.0169738f, -0.3301881f, -0.0762845f, +0.1935928f, -0.0509453f,
  +0.0035869f, +0.1436741f, +0.1875591f, -0.0685459f, -0.0525491f, +0.1018841f, +0.1379665f, +0.0371442f,
  +0.0683463f, -0.1914157f, +0.0785475f, +0.1847953f, +0.2538779f, +0.1572191f, -0.0202941f, +0.0200975f,
  -0.0198648f, -0.0488665f, +0.0180053f, -0.0183173f, -0.1310524f, +0.0551516f, +0.0264294f, +0.0081793f,
  -0.1629197f, +0.1748956f, -0.1094490f, -0.0999424f, -0.1332216f, -0.2032629f, -0.0485382f, -0.1565949f,
  -0.0732743f, +0.1822316f, +0.0733331f, -0.0563544f, -0.0110777f, -0.2783433f, -0.1386511f, -0.4302462f,
  -0.2267194f, +0.0819568f, -0.1025691f, +0.2033312f, -0.0216038f, +0.2493932f, -0.0007666f, -0.0201571f,
  -0.0060947f, +0.1070904f, -0.0031521f, +0.1605136f, -0.1494228f, -0.1439269f, +0.0333821f, +0.0368469f,
  +0.2319862f, -0.1641549f, +0.1586170f, +0.0553845f, -0.5535058f, +0.0119110f, -0.0283108f, +0.1962995f,
  +0.1835800f, -0.0528514f, +0.0688607f, +0.2473889f, +0.0353399f, +0.1163462f, -0.0791579f, +0.1445463f,
  -0.3428043f, +0.1375966f, -0.0587546f, -0.0401448f, +0.0021114f, -0.0432309f, -0.2333036f, +0.1616425f,
  +0.0969982f, +0.0369413f, -0.1014941f, +0.1697870f, -0.2263002f, +0.2970446f, +0.0909653f, -0.2361517f,
  -0.0013649f, -0.0743243f, +0.1501592f, -0.0038928f, +0.1282706f, -0.0945519f, +0.1593265f, -0.1933133f,
  -0.3055927f, +0.0822705f, -0.0771420f, +0.1182052f, +0.1505871f, -0.0489159f, -0.1557928f, +0.1024143f,
  +0.0608106f, +0.1714569f, +0.1267781f, +0.0003356f, -0.1346189f, -0.1050287f, +0.0629573f, +0.2496982f,
  +0.1642279f, +0.0433109f, -0.2834804f, -0.0001195f, -0.1646101f, +0.2039169f, -0.1028846f, +0.1885682f,
  -0.0322136f, -0.2303575f, +0.1286694f, +0.0681762f, +0.1391315f, -0.0110250f, -0.1315911f, +0.0091866f,
  +0.0337552f, +0.2493189f, -0.0367608f, -0.0354370f, -0.1409740f, +0.0697188f, -0.0891507f, +0.0503678f,
  +0.0565329f, -0.0555363f, -0.0195269f, +0.0592700f, +0.0251479f, -0.0757545f, -0.0510085f, -0.1091284f,
  -0.0545358f, -0.3425221f, -0.0685834f, +0.0416115f, +0.0035174f, -0.3219494f, -0.0996643f, +0.0940772f,
  -0.2069428f, +0.0487121f, -0.2048037f, -0.3073103f, +0.1161049f, -0.0139921f, -0.0753576f, -0.1565201f,
  +0.1628490f, +0.1451002f, +0.3974646f, -0.0158457f, +0.2296116f, -0.1785905f, -0.0627755f, -0.0559175f,
  +0.0066368f, -0.0458006f, -0.0156587f, -0.0530865f, -0.0034882f, +0.0393137f, -0.1736182f, -0.0228204f,
  -0.3227959f, +0.1187460f, -0.3013016f, -0.3308314f, +0.2220701f, -0.1456012f, -0.0998515f, -0.0758259f,
  +0.3074304f, +0.1029010f, +0.2072708f, +0.3195194f, +0.0483955f, -0.0880027f, +0.2115326f, -0.1119762f
);

const float biases[4] = float[4](
  +0.0251558f, +0.0166365f, +0.0613719f, -0.0020109f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer75 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1191408f, -0.1897472f, -0.0491256f, +0.2184209f, -0.0205496f, -0.0694993f, +0.0457991f, -0.0677845f,
  -0.1660532f, +0.2762685f, -0.0558725f, -0.0292529f, +0.1865860f, -0.1134739f, -0.0852782f, +0.0410755f,
  -0.0990142f, -0.0158038f, -0.1162246f, +0.0646186f, +0.0808940f, +0.1414582f, +0.0479547f, +0.1109548f,
  -0.2662667f, +0.0593041f, -0.0959726f, +0.0814930f, -0.0545092f, +0.0202028f, -0.1797723f, -0.0057608f,
  -0.0712261f, -0.1436679f, -0.0667252f, +0.3168859f, +0.1964304f, +0.0484984f, +0.1871749f, -0.0781447f,
  +0.0148616f, +0.0591959f, +0.0477823f, +0.2082642f, -0.4502098f, -0.0392392f, +0.1825083f, +0.1513433f,
  -0.3896841f, +0.1844805f, -0.1302855f, +0.0617700f, -0.0790107f, -0.1129656f, -0.1651592f, +0.2940983f,
  +0.1034689f, +0.2040578f, -0.0089301f, -0.2046274f, +0.0801072f, +0.2742409f, -0.2398601f, +0.1368662f,
  +0.1113335f, +0.0595948f, +0.0164894f, +0.1184907f, +0.1898092f, +0.2674018f, +0.0946956f, +0.1558505f,
  +0.1345981f, -0.0732120f, +0.0044374f, +0.0771704f, +0.0060111f, +0.1083007f, -0.1640762f, -0.0741252f,
  -0.0038637f, -0.0214541f, -0.0084337f, -0.1402090f, +0.1504324f, +0.1815133f, -0.0746723f, +0.3228600f,
  +0.1087111f, -0.2294751f, +0.0868957f, +0.1879021f, +0.1228984f, +0.0731290f, +0.0097998f, -0.1910400f,
  -0.1658814f, +0.0284652f, -0.0847135f, -0.0193850f, +0.1293330f, +0.1028562f, -0.0596781f, -0.0584498f,
  -0.0017976f, +0.1092146f, +0.1385623f, +0.4012864f, +0.0866919f, +0.0407034f, +0.0684180f, -0.0412084f,
  -0.0406853f, +0.1228393f, +0.1547100f, +0.0921756f, -0.1563282f, -0.0714915f, -0.0684665f, -0.1612684f,
  -0.2082079f, +0.0983565f, -0.0261492f, -0.1490340f, -0.2271768f, +0.1963241f, -0.0202989f, -0.1578864f,
  +0.1236099f, +0.0558843f, +0.1086089f, -0.0149416f, +0.0455848f, +0.1224366f, -0.0926750f, +0.0634004f,
  -0.0999925f, +0.1714293f, -0.1175653f, +0.0345745f, +0.1314431f, +0.0728762f, +0.1426280f, +0.0452006f,
  -0.0190887f, -0.0172073f, +0.0278681f, -0.1244062f, -0.1165519f, -0.0751660f, +0.0146560f, +0.1217321f,
  +0.0228606f, -0.0265977f, +0.1656664f, +0.1414629f, -0.0720103f, -0.1514288f, -0.3198075f, -0.0503766f,
  -0.1498250f, +0.1579996f, -0.1177144f, +0.0306710f, -0.0495747f, -0.2072690f, -0.0128312f, +0.1082496f,
  +0.0211737f, -0.0821505f, +0.0374221f, +0.1530693f, -0.0416380f, +0.4952216f, -0.2415306f, +0.1628294f,
  -0.0243138f, -0.0666128f, +0.3565963f, +0.2491845f, +0.2546563f, -0.0437660f, +0.2344418f, -0.0731655f,
  +0.1223831f, -0.2362725f, +0.0556518f, +0.3437876f, -0.1526138f, -0.1907135f, -0.1329064f, -0.0952554f,
  -0.0064445f, -0.0516494f, +0.2634013f, +0.0511516f, -0.1364780f, +0.1353422f, -0.0553229f, -0.1312281f,
  +0.0429928f, +0.2202044f, +0.1767882f, -0.0205851f, -0.1289867f, -0.1423572f, -0.1749880f, -0.2294724f,
  +0.0512574f, +0.4379840f, -0.0298503f, +0.3456670f, -0.3040572f, +0.0789524f, -0.3407031f, -0.0406106f,
  +0.2490538f, +0.0157484f, +0.3010679f, +0.0057967f, -0.1408171f, +0.0136819f, +0.1390598f, -0.1839137f,
  -0.3487367f, -0.0492398f, -0.1885811f, +0.1789020f, +0.0484088f, -0.0129241f, +0.1084285f, +0.0000509f,
  +0.0587550f, +0.0094573f, +0.1307824f, -0.0234539f, -0.4392673f, -0.1189811f, +0.3918013f, -0.0410102f,
  -0.1169696f, -0.2413958f, -0.0822583f, -0.1159906f, -0.0848556f, -0.1348722f, -0.1084312f, -0.0588739f,
  +0.2392926f, +0.2647779f, -0.2441983f, +0.0916599f, +0.0046899f, -0.2539315f, -0.0654398f, -0.0553242f,
  +0.1737220f, +0.0007444f, -0.1807557f, -0.1327323f, -0.0054284f, +0.3059635f, -0.0842881f, +0.3189790f,
  -0.0540941f, +0.0896646f, +0.1666622f, -0.0255212f, -0.0804292f, +0.0874877f, -0.0130633f, -0.1405238f,
  -0.1869519f, -0.2518416f, +0.0391978f, -0.1938452f, -0.1649657f, -0.0610846f, -0.1089247f, +0.1819432f,
  -0.0984256f, -0.0432195f, -0.0458225f, -0.0019639f, -0.1061641f, +0.0343049f, +0.0150280f, -0.1068193f
);

const float biases[4] = float[4](
  +0.0700725f, +0.0412792f, -0.0105642f, +0.0222810f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer76 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1446377f, +0.0141189f, -0.2088728f, +0.0215075f, -0.2577488f, -0.0536158f, +0.0370062f, +0.1032064f,
  -0.2346027f, +0.2045876f, +0.2350299f, +0.0394301f, -0.0370935f, -0.3420882f, +0.2293268f, +0.0602695f,
  +0.0349226f, +0.2349665f, +0.1961087f, -0.0503610f, -0.1701843f, +0.2831633f, -0.0100692f, +0.0155024f,
  -0.2108848f, +0.0246010f, -0.2675553f, -0.1470412f, +0.0144812f, +0.2573613f, -0.0347099f, +0.0334232f,
  +0.1614519f, +0.2451017f, -0.2502102f, +0.1731536f, +0.1127298f, -0.1355120f, -0.2588137f, -0.2621174f,
  -0.1049240f, +0.0236783f, +0.0804868f, -0.1998432f, +0.2852969f, +0.0025072f, +0.1073087f, -0.0072124f,
  +0.1179172f, +0.0561308f, -0.1812782f, -0.0094327f, -0.0499989f, +0.1203921f, -0.1381564f, -0.2144389f,
  +0.0300195f, +0.0742199f, +0.0267638f, -0.0507171f, +0.1382680f, -0.1761427f, +0.0927375f, +0.2208205f,
  +0.0437051f, +0.1042508f, -0.2168936f, +0.0090671f, -0.2482448f, -0.0284968f, +0.1599126f, -0.2264521f,
  -0.1549404f, +0.1622090f, -0.1189253f, -0.0458785f, -0.0167235f, -0.1239926f, -0.2729270f, -0.0360122f,
  +0.0149217f, +0.0617863f, -0.0040405f, -0.0688657f, -0.1712278f, -0.1304829f, -0.1655228f, +0.1417641f,
  +0.2793579f, -0.1823589f, -0.1322742f, +0.0282817f, +0.0299319f, -0.1244128f, +0.0562283f, +0.1051691f,
  -0.3336659f, +0.2868384f, +0.1793879f, -0.0999439f, -0.1992120f, +0.2121362f, -0.1936313f, +0.1921004f,
  +0.2768776f, +0.0759497f, +0.0408365f, +0.4623681f, +0.0908145f, -0.2165506f, -0.0086546f, -0.3028676f,
  -0.2212011f, -0.0794600f, -0.1133803f, -0.0189247f, +0.0237636f, +0.0558900f, +0.0388819f, +0.1161846f,
  -0.2101291f, +0.0365567f, -0.0002789f, -0.1941019f, +0.1681412f, -0.0402726f, -0.0432806f, +0.1175283f,
  -0.0865430f, -0.3117066f, -0.1980386f, +0.0587850f, +0.1219411f, -0.0745427f, -0.0047210f, +0.0062078f,
  -0.0239320f, -0.0245515f, +0.0830550f, +0.0666006f, +0.0347059f, +0.0180946f, +0.0212046f, +0.1087857f,
  +0.1179783f, +0.0213259f, -0.1374986f, -0.0081542f, -0.2641302f, +0.1104949f, +0.0700642f, +0.0913411f,
  +0.2669313f, +0.3215542f, -0.0284407f, +0.0791032f, +0.0100065f, -0.1248161f, -0.0590535f, -0.0180609f,
  +0.0682324f, -0.0424788f, +0.1412997f, +0.0326778f, +0.0421103f, +0.0425706f, -0.1489168f, +0.0222645f,
  +0.0079375f, -0.0061448f, +0.2842973f, +0.1084900f, -0.0987082f, +0.0367248f, -0.2095987f, +0.1965944f,
  -0.2994129f, -0.0068488f, -0.0636771f, -0.1985088f, -0.0244119f, +0.1074879f, +0.0057936f, +0.0131794f,
  -0.0731748f, +0.0190152f, +0.1525252f, +0.1936709f, +0.1801947f, -0.0165042f, -0.0747473f, -0.1431632f,
  -0.0608407f, +0.0726742f, -0.1444889f, +0.2066152f, +0.0327097f, -0.1458384f, -0.1439246f, -0.0386109f,
  -0.1299642f, -0.3198815f, -0.0965104f, +0.0187559f, +0.2649682f, -0.0534932f, -0.0113396f, +0.0032767f,
  -0.0574657f, -0.0490380f, -0.2297554f, +0.1078354f, +0.2640123f, +0.0026434f, -0.0816486f, +0.0008651f,
  +0.2426619f, +0.0366558f, -0.3075341f, -0.0472804f, +0.1399309f, -0.1373795f, -0.1857197f, +0.0864072f,
  +0.7424057f, -0.1326847f, +0.2682736f, -0.0904067f, -0.0031821f, -0.2391068f, +0.1280753f, +0.0488381f,
  -0.1733338f, +0.0165297f, +0.3309457f, +0.0524498f, +0.1774981f, +0.0047485f, -0.1196685f, -0.1785939f,
  +0.0545997f, +0.1448664f, -0.0474737f, -0.0796663f, -0.0767324f, -0.0742917f, +0.0487629f, +0.0902652f,
  -0.6022646f, -0.1411122f, -0.2023895f, +0.1676174f, -0.0348221f, -0.0232573f, -0.0798073f, +0.3233421f,
  -0.0775207f, -0.0103917f, +0.1280074f, +0.3139634f, +0.0479975f, -0.1048229f, -0.2170628f, +0.0230468f,
  +0.0894710f, -0.0849716f, -0.0395764f, +0.0361730f, +0.1160202f, -0.1590103f, -0.1229727f, -0.0944593f,
  +0.2784243f, -0.0066207f, -0.2990552f, -0.2156393f, +0.0191009f, +0.0614623f, -0.1444391f, +0.0019158f,
  -0.0352473f, +0.0431266f, +0.3285028f, -0.0643314f, +0.1024284f, -0.1903507f, -0.0996780f, +0.1988583f
);

const float biases[4] = float[4](
  -0.0059244f, -0.0239750f, -0.0262768f, +0.0057380f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer76 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0251327f, -0.2068278f, +0.0755579f, -0.2311384f, +0.0703315f, -0.2091326f, +0.0506432f, -0.1324610f,
  -0.0642991f, -0.3519535f, -0.1260301f, -0.0806159f, -0.2774495f, +0.1278758f, -0.2210993f, -0.0872522f,
  -0.0318055f, -0.0159281f, +0.0359497f, +0.0481580f, -0.1736941f, +0.0466221f, +0.0174391f, -0.0763078f,
  +0.0507356f, +0.1370716f, -0.1632998f, +0.1144451f, +0.1758937f, +0.2780006f, -0.1094445f, +0.3699275f,
  +0.2086229f, -0.2010965f, +0.1839401f, -0.5325888f, +0.1379591f, +0.0651963f, -0.1481420f, -0.1439434f,
  +0.0217751f, -0.0287957f, -0.3040997f, +0.1357241f, -0.0630315f, -0.0944865f, +0.0034933f, +0.0470570f,
  +0.3105362f, +0.0210054f, -0.1067470f, -0.1444454f, +0.0422899f, -0.0206081f, +0.0967602f, +0.2025672f,
  +0.0306576f, -0.0820797f, -0.0275444f, -0.2493776f, +0.0284569f, -0.0665604f, +0.1595077f, -0.3168676f,
  +0.1238960f, +0.2180594f, +0.0179590f, -0.0001239f, -0.2653212f, -0.1059753f, +0.1198922f, +0.1717000f,
  -0.0414728f, -0.0008853f, -0.0947577f, -0.0930239f, +0.0186058f, -0.1120031f, +0.0420375f, +0.2112128f,
  -0.0275551f, +0.1245790f, -0.1330153f, +0.0266260f, -0.2091881f, +0.1617589f, -0.2498949f, +0.0792857f,
  -0.0012164f, -0.0158697f, -0.1828314f, -0.0640860f, +0.3569873f, -0.2583816f, +0.0243987f, +0.0557349f,
  +0.0842000f, -0.1202395f, +0.1363011f, +0.0408185f, +0.2167178f, -0.0252585f, +0.1841722f, -0.1121200f,
  -0.0431274f, -0.3050185f, -0.1993369f, -0.2367487f, -0.1525111f, +0.1917022f, -0.3116778f, -0.2963382f,
  -0.0996877f, +0.0139642f, -0.0814679f, -0.1937470f, -0.1662654f, +0.0611314f, +0.1326348f, -0.0716714f,
  -0.2193513f, +0.0115923f, -0.0792061f, -0.0968664f, +0.0404783f, -0.0564725f, +0.2457760f, -0.0651036f,
  +0.1335652f, +0.0176313f, -0.0133416f, +0.0773129f, +0.0150697f, +0.0107622f, -0.1310630f, -0.0443124f,
  +0.1078413f, +0.1006745f, -0.1985784f, -0.1572145f, -0.0481024f, -0.0990871f, +0.1078496f, -0.2582256f,
  +0.2858218f, -0.1346411f, -0.0331719f, -0.0175753f, -0.1805960f, -0.1363472f, +0.2194114f, +0.0420188f,
  +0.2790785f, +0.1188714f, +0.0259281f, +0.2376053f, +0.1290450f, -0.0910455f, +0.0597862f, -0.1942951f,
  -0.1173427f, -0.1709893f, +0.1322889f, +0.0405273f, +0.2687936f, -0.1430448f, +0.0403812f, +0.0265949f,
  +0.2232310f, +0.1535113f, +0.1329757f, +0.2539036f, +0.0033501f, -0.0262545f, +0.0130095f, -0.0640583f,
  +0.1300488f, -0.0154676f, -0.2410870f, -0.0668942f, -0.0603028f, -0.0942007f, -0.1747654f, -0.0287973f,
  -0.1574906f, -0.0917324f, +0.1742713f, +0.0386309f, +0.0386853f, +0.1594947f, -0.0968952f, -0.1408498f,
  -0.1256998f, -0.1468717f, +0.0640460f, +0.0344922f, +0.0671651f, +0.0069998f, +0.1826963f, -0.1877629f,
  +0.1009194f, -0.0143608f, -0.1102833f, +0.2384729f, +0.0610955f, +0.1403053f, -0.0140049f, +0.2091368f,
  -0.0017741f, +0.2021757f, -0.0956730f, -0.0560223f, +0.1045076f, +0.2942942f, -0.1244745f, -0.0023242f,
  -0.0958143f, -0.0370065f, -0.1773727f, -0.0960617f, +0.0609249f, -0.1139137f, +0.1009705f, -0.0128438f,
  +0.1255043f, +0.0902474f, -0.2107484f, +0.0618009f, +0.0538545f, +0.0080330f, +0.0362872f, -0.1218635f,
  +0.0931543f, -0.1332021f, +0.0192315f, +0.0167288f, -0.2378501f, +0.1884800f, +0.0717735f, +0.0443891f,
  -0.1292464f, +0.0157805f, +0.0296093f, -0.2563129f, -0.2899092f, +0.0701068f, +0.2651750f, +0.2024871f,
  +0.1603560f, +0.1293655f, -0.1224662f, -0.1938929f, +0.1003171f, -0.0654093f, -0.1724152f, -0.4497080f,
  -0.1352089f, +0.3189917f, +0.2154479f, +0.1634080f, -0.1498371f, -0.1926856f, +0.1604616f, +0.1000641f,
  -0.1103487f, -0.1309329f, -0.0470591f, -0.1786875f, +0.1229187f, -0.2468328f, -0.0883485f, +0.0541162f,
  +0.1865595f, -0.0418827f, -0.0052225f, +0.3351760f, -0.0799697f, +0.0414239f, +0.1593806f, +0.0804040f,
  -0.0483208f, +0.0742426f, -0.1806363f, -0.1041294f, +0.0690983f, +0.0174406f, -0.0664193f, -0.1571096f
);

const float biases[4] = float[4](
  +0.0128832f, +0.0192383f, +0.0352980f, -0.0031869f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer77 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1619523f, +0.0189075f, +0.0816092f, -0.4583739f, +0.0630148f, -0.1317929f, +0.3969569f, -0.0888616f,
  +0.1268879f, -0.2923492f, +0.1485038f, +0.2071034f, -0.0150461f, +0.2325089f, +0.1412219f, +0.1991678f,
  +0.1034758f, +0.0574566f, +0.0660247f, -0.2726475f, -0.0133011f, -0.1754767f, +0.4443136f, +0.1692417f,
  +0.1101315f, -0.2378302f, +0.1256999f, -0.0525456f, +0.1775777f, +0.1340995f, +0.1957335f, +0.0409622f,
  -0.0542218f, +0.0413824f, -0.2255798f, -0.1370120f, +0.0464491f, +0.0000240f, +0.0507714f, +0.0141600f,
  -0.2209838f, -0.2868522f, -0.2294037f, +0.0682443f, -0.1543168f, +0.0640849f, +0.0725759f, -0.2285809f,
  +0.0811043f, -0.1301206f, +0.0832391f, -0.3152253f, +0.1736543f, -0.1575236f, -0.1864130f, -0.2909498f,
  +0.0960336f, -0.0124729f, -0.3253295f, -0.0877569f, +0.2880457f, +0.1237799f, -0.1093912f, -0.0107863f,
  -0.0856908f, +0.0993446f, +0.0479277f, -0.1313682f, +0.1897733f, -0.0511814f, +0.2455300f, +0.0273899f,
  -0.0008024f, -0.2544734f, +0.2652125f, +0.4082280f, +0.2527471f, +0.0742962f, -0.1755819f, +0.3382032f,
  +0.0805383f, +0.0649379f, -0.6369916f, -0.2644335f, -0.0893169f, +0.3081999f, -0.1838332f, -0.3201322f,
  -0.0443215f, +0.0469164f, -0.0148156f, -0.0234540f, +0.0591315f, -0.3140415f, -0.0180255f, -0.0884147f,
  +0.2416599f, -0.3900350f, -0.1465730f, -0.2956279f, +0.2571444f, -0.0380127f, +0.3159558f, -0.2715682f,
  -0.3880540f, +0.2518564f, +0.3617311f, -0.0662966f, +0.4098596f, +0.2147515f, -0.6874228f, +0.1635399f,
  +0.1091799f, +0.2155060f, -0.3096094f, +0.1333707f, -0.1160246f, -0.0262398f, +0.0651090f, +0.0155135f,
  +0.2359735f, +0.0524448f, -0.1052389f, -0.6101598f, -0.0762913f, +0.2080695f, -0.6086144f, -0.2234352f,
  -0.2495482f, -0.0080301f, +0.1606365f, +0.0670869f, +0.0740846f, -0.4749156f, +0.4982577f, -0.2556291f,
  -0.0781782f, -0.0536275f, +0.0984463f, +0.1071619f, +0.1599379f, +0.2944604f, +0.0565748f, +0.0165993f,
  +0.1965440f, -0.0364430f, -0.2158260f, -0.0522915f, +0.2377540f, -0.2519332f, +0.1580430f, +0.4034262f,
  -0.1694320f, +0.0190202f, -0.3407219f, +0.1342287f, +0.0520539f, +0.2313025f, -0.3181582f, +0.0359140f,
  +0.0462317f, +0.1271050f, +0.1992257f, -0.0508063f, +0.0541904f, -0.0216487f, -0.1155377f, +0.0271433f,
  -0.0779179f, -0.1055585f, -0.0016677f, +0.2248325f, +0.0350091f, +0.2368578f, -0.0286095f, -0.1369664f,
  -0.0371763f, +0.0834994f, +0.2335823f, -0.1491180f, -0.1194228f, +0.0668932f, +0.2885607f, -0.2784315f,
  +0.0142849f, -0.0721288f, -0.2221794f, -0.1203099f, +0.0939570f, -0.1367445f, +0.0460776f, +0.1730671f,
  -0.1868732f, -0.0401781f, +0.2474398f, +0.0015603f, +0.0815670f, -0.0457320f, -0.0849473f, -0.1646957f,
  -0.0758906f, +0.0025982f, -0.0902576f, -0.0470995f, -0.0451493f, +0.4224550f, +0.1608956f, +0.2210188f,
  +0.2844567f, -0.1609502f, +0.1630499f, +0.2513479f, +0.0114659f, +0.1930240f, +0.2401691f, -0.0000480f,
  -0.0600502f, +0.2409646f, -0.0741235f, -0.3017367f, -0.0383764f, -0.0976985f, +0.1382461f, -0.1763887f,
  +0.0911463f, -0.2024789f, +0.0948636f, +0.3276344f, +0.4182242f, -0.0681035f, +0.2390627f, +0.1779342f,
  +0.0318070f, +0.1712565f, -0.0292358f, -0.2101007f, +0.1827115f, +0.4076480f, -0.3862765f, +0.2269265f,
  -0.2793001f, +0.0012865f, +0.0537430f, -0.0313109f, -0.1628469f, +0.0543204f, -0.0168078f, -0.2041780f,
  +0.0583670f, -0.1405124f, +0.1179035f, +0.1263741f, +0.2860780f, -0.0590490f, -0.0604189f, -0.1208832f,
  +0.0950719f, +0.4946438f, +0.2733616f, -0.0877165f, -0.3854588f, +0.0276271f, -0.5662961f, +0.5083511f,
  -0.0170333f, +0.0842857f, +0.0129369f, +0.0059067f, -0.0185875f, +0.0903817f, +0.0712720f, -0.1842637f,
  +0.0909675f, -0.1751507f, -0.1243777f, +0.0624562f, +0.1933540f, -0.1157345f, -0.0263301f, -0.1730947f,
  +0.1322722f, +0.2439588f, +0.1866715f, -0.1530620f, +0.0094523f, +0.2333931f, -0.1934081f, +0.2708525f
);

const float biases[4] = float[4](
  -0.0110257f, -0.0030987f, +0.0101146f, -0.0075017f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer77 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1470075f, +0.2325008f, -0.0096363f, -0.0660204f, +0.1211035f, -0.1178270f, +0.0890096f, -0.0925556f,
  -0.0121361f, -0.3246132f, +0.0627104f, +0.1389338f, -0.1545971f, +0.1184007f, -0.3225932f, -0.1656590f,
  +0.0398435f, +0.0803973f, -0.1442810f, -0.0605576f, +0.1087827f, -0.0317672f, +0.1296106f, +0.1530750f,
  -0.1203541f, +0.1846257f, -0.1082633f, -0.1221235f, -0.0192012f, +0.0014337f, +0.0291581f, -0.0330652f,
  +0.1018298f, -0.3907217f, +0.2458471f, +0.4120038f, +0.1470459f, +0.1434441f, -0.2312061f, +0.4225896f,
  +0.2886531f, +0.1737012f, -0.3342181f, -0.4152331f, +0.0637627f, +0.1801701f, -0.2330044f, -0.0721366f,
  -0.0068008f, +0.0932456f, +0.0672634f, -0.1505286f, -0.0960222f, -0.0663356f, +0.2383973f, -0.1591901f,
  -0.1243457f, -0.3056291f, +0.1902667f, +0.4000982f, +0.2597929f, -0.0272746f, +0.0685632f, -0.0172723f,
  +0.1910565f, +0.2049711f, -0.2289115f, -0.6313934f, -0.0469026f, -0.2100688f, -0.6193500f, -0.0036384f,
  -0.2303278f, +0.2031677f, +0.0080817f, +0.1307781f, +0.0732191f, +0.1628638f, +0.0008377f, -0.0404674f,
  +0.1486092f, -0.0903110f, +0.0440227f, +0.1780619f, -0.0917884f, +0.0940083f, -0.2289959f, -0.1261286f,
  +0.1427766f, +0.0258917f, +0.0641053f, +0.1006011f, -0.1510768f, +0.1148716f, +0.0927179f, -0.1169905f,
  -0.0664042f, +0.1276360f, +0.0136970f, -0.0084464f, -0.1633135f, +0.4476672f, +0.0380987f, -0.1122125f,
  +0.2897151f, +0.0275528f, -0.2401966f, +0.0573806f, -0.0238626f, +0.0673094f, +0.1913473f, -0.1231763f,
  -0.1169357f, -0.0417609f, -0.1944317f, +0.2099432f, +0.1890642f, +0.4413948f, +0.0526980f, -0.1415349f,
  -0.3506735f, -0.0065118f, -0.0166890f, +0.2100617f, +0.2629350f, -0.0218715f, +0.1638885f, -0.0490067f,
  -0.1878100f, +0.0518245f, +0.0442936f, -0.0242854f, -0.1617671f, -0.0053884f, -0.1668348f, +0.0645676f,
  -0.1107132f, -0.1799279f, +0.1873975f, -0.1703432f, +0.0525092f, -0.0952519f, +0.0145616f, -0.0578128f,
  -0.1034777f, -0.1258302f, -0.0523028f, -0.1077146f, -0.1225141f, +0.0109198f, -0.1439325f, +0.0978960f,
  -0.3067812f, +0.1385950f, -0.0724090f, -0.1998898f, -0.2634112f, +0.1820759f, +0.1052795f, +0.0896589f,
  +0.1261427f, +0.1286188f, -0.0616752f, +0.1978387f, -0.2215439f, -0.0962003f, +0.1243792f, -0.2125873f,
  +0.1903130f, -0.2762522f, +0.0110455f, +0.0110102f, +0.1679381f, -0.0734085f, -0.0932187f, +0.1408449f,
  +0.0045948f, +0.0387124f, +0.2343391f, -0.2506396f, +0.1944643f, +0.4182416f, -0.1460391f, -0.2394979f,
  -0.0747423f, -0.1272570f, -0.0743069f, +0.3650768f, -0.0888824f, -0.0960258f, +0.0132879f, -0.1921336f,
  -0.0755311f, +0.0184264f, +0.3677282f, -0.2498695f, -0.2418420f, +0.2267857f, +0.0108121f, -0.1541426f,
  +0.0017870f, +0.1297700f, -0.0122225f, -0.3071701f, -0.0886842f, -0.0811452f, +0.0697151f, -0.0349379f,
  -0.0436789f, -0.1372144f, +0.0366927f, -0.1086215f, -0.3660637f, -0.3022164f, +0.0556108f, +0.2218529f,
  -0.0674565f, -0.3922521f, -0.2628760f, -0.0599576f, +0.0863099f, -0.1368310f, +0.2551005f, +0.0885447f,
  -0.0025771f, +0.3690561f, -0.2009563f, -0.2983572f, +0.4182172f, +0.0022254f, -0.1748721f, -0.1634530f,
  +0.1332994f, +0.0831631f, -0.0892502f, -0.0060675f, +0.2117963f, -0.0627930f, -0.0816719f, -0.0427592f,
  -0.3289545f, -0.0516251f, +0.1991265f, +0.0103771f, +0.1024018f, -0.0939332f, +0.1226964f, -0.2257370f,
  +0.1224270f, -0.1586010f, -0.2995346f, -0.2203736f, +0.1345668f, -0.1162424f, -0.1371102f, -0.2833110f,
  +0.1597650f, -0.0771593f, +0.3800169f, -0.1692973f, +0.4335021f, -0.0519722f, +0.3459145f, +0.3293846f,
  -0.2394938f, -0.0580591f, +0.0109848f, +0.0282326f, +0.1189754f, -0.1224001f, -0.2166277f, +0.0949486f,
  +0.1658321f, -0.0126016f, +0.0566160f, -0.1065869f, +0.3119674f, -0.0044010f, -0.0717276f, +0.1196621f,
  +0.0501574f, +0.0188754f, +0.1646154f, -0.0246355f, +0.1830702f, +0.0047809f, +0.3831259f, +0.2934211f
);

const float biases[4] = float[4](
  -0.0314777f, +0.0088008f, +0.0163768f, -0.0257645f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer78 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0694751f, -0.0067834f, -0.1825689f, -0.0594244f, -0.1502725f, -0.0581742f, +0.0274091f, -0.1100201f,
  +0.0174069f, -0.1020854f, +0.0936808f, -0.2322799f, -0.0535254f, +0.0364374f, +0.0546573f, -0.0804581f,
  +0.2454067f, +0.0318496f, +0.0400324f, -0.0135631f, +0.0040362f, +0.0254688f, +0.0252736f, +0.1609279f,
  +0.0880566f, -0.0046610f, -0.1317176f, +0.0110658f, -0.1441944f, +0.2359746f, +0.2568557f, +0.1308062f,
  +0.1190571f, +0.0397561f, +0.2848305f, -0.0265811f, -0.1591917f, -0.0843589f, -0.1745025f, +0.1631834f,
  +0.0537469f, -0.1028758f, +0.1008956f, -0.0084735f, +0.0218423f, -0.1661471f, -0.1191905f, -0.0966820f,
  -0.0755264f, -0.0708119f, +0.0048623f, +0.1444314f, +0.0320785f, -0.2013102f, -0.1636884f, -0.1499944f,
  -0.1046099f, +0.1488697f, +0.0310807f, +0.0891575f, -0.1307673f, -0.3755586f, +0.1102472f, +0.2123345f,
  -0.0172454f, -0.1410571f, -0.0638608f, -0.0704325f, -0.0867325f, +0.0938624f, -0.1615752f, -0.0081776f,
  -0.1636392f, +0.0855458f, +0.1452982f, +0.2240941f, +0.2091670f, +0.0637562f, -0.0783182f, -0.0240782f,
  +0.0207450f, +0.1325652f, -0.1363749f, +0.2649791f, +0.1511686f, -0.1544328f, -0.1474572f, -0.0968236f,
  -0.0883339f, -0.3462694f, +0.1296249f, -0.0010385f, +0.1142960f, -0.0805041f, -0.0514498f, +0.0650595f,
  +0.1221203f, +0.1794114f, +0.1136292f, -0.0463122f, +0.2233907f, +0.3980373f, +0.2061995f, -0.1693157f,
  -0.1512966f, -0.1549275f, +0.0500815f, +0.1808244f, -0.3608906f, +0.1550934f, -0.0165898f, +0.1341643f,
  +0.2077957f, +0.6672935f, -0.1431810f, -0.1059979f, -0.3014840f, +0.1498464f, -0.0268022f, -0.1675092f,
  -0.0066455f, -0.1164478f, +0.0617637f, +0.0528940f, +0.0460975f, +0.0353431f, -0.0608032f, -0.2594252f,
  +0.0382247f, -0.2943651f, +0.1891915f, -0.5077370f, +0.0173014f, +0.0136004f, -0.2447895f, -0.0796888f,
  +0.0922218f, +0.0511075f, -0.0222582f, -0.1047983f, +0.0358642f, -0.0936132f, +0.1533148f, -0.2199446f,
  -0.0734756f, +0.2918326f, -0.2295063f, +0.0680068f, -0.1709607f, -0.0637509f, -0.1053639f, -0.1529114f,
  +0.1661803f, -0.2187436f, +0.1978558f, +0.1664811f, +0.1580063f, -0.2183005f, +0.1117500f, -0.0967869f,
  +0.0197121f, -0.2067218f, +0.0188602f, +0.0550071f, +0.1740045f, -0.0230295f, +0.0407616f, +0.0108435f,
  +0.2063304f, -0.3591154f, -0.2292846f, -0.3418901f, +0.0490816f, +0.1471660f, +0.0707693f, -0.1015388f,
  -0.1648636f, +0.3769615f, -0.2225376f, -0.0269101f, +0.2233577f, +0.2581524f, +0.2344440f, +0.2447018f,
  -0.0213936f, -0.0581657f, +0.0356696f, -0.1087528f, +0.0786754f, +0.3207894f, -0.0464943f, +0.2966132f,
  +0.0029191f, +0.2296388f, -0.0024370f, -0.2531400f, -0.1986694f, -0.0577546f, +0.0029086f, -0.1260363f,
  +0.2447472f, -0.2697967f, -0.3158753f, +0.0036983f, +0.1081510f, -0.0813431f, -0.1511400f, -0.1035327f,
  +0.0673769f, -0.0837138f, +0.1137484f, -0.0146497f, -0.0030589f, +0.2972373f, -0.2989956f, +0.2951649f,
  -0.0036341f, +0.3160597f, +0.0401385f, +0.2648678f, +0.4752163f, -0.0618391f, -0.1136595f, -0.1162340f,
  -0.2923161f, -0.2959903f, -0.0659667f, +0.4199320f, +0.3082673f, +0.1176223f, +0.2972872f, -0.0200694f,
  -0.0367138f, +0.0015545f, +0.3020673f, -0.0801733f, +0.0895988f, -0.0205077f, +0.1819979f, -0.0068055f,
  +0.2084142f, -0.0551070f, -0.0839395f, +0.2339017f, +0.0502304f, -0.1090988f, -0.0485096f, -0.3154338f,
  +0.2761864f, +0.8607864f, +0.0015887f, +0.2077427f, +0.2197704f, -0.1764221f, +0.2361307f, -0.0571305f,
  +0.1411485f, -0.3991110f, +0.0903832f, +0.1185448f, +0.2093521f, -0.1823042f, +0.2166725f, -0.0394625f,
  +0.0518117f, +0.0609055f, +0.1706374f, -0.3235829f, +0.2545665f, -0.0981881f, -0.1101116f, -0.5032266f,
  -0.1300666f, -0.1880971f, +0.2718757f, +0.3012560f, +0.1820488f, -0.2258664f, +0.1929206f, +0.0924410f,
  +0.1676635f, +0.0811841f, -0.1411876f, +0.0526146f, -0.0050602f, -0.0150580f, +0.1746782f, +0.0909313f
);

const float biases[4] = float[4](
  -0.0076369f, -0.0345128f, -0.0086039f, -0.0002559f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer78 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2010312f, -0.1470427f, -0.0949824f, -0.0939219f, +0.3487296f, +0.1575191f, +0.0427504f, +0.0364316f,
  +0.0695944f, +0.1101699f, -0.2539269f, -0.1898087f, +0.0193897f, -0.0235963f, -0.0854059f, -0.1464171f,
  +0.0142747f, +0.0076160f, -0.0516372f, -0.0918114f, -0.0302293f, -0.0806877f, -0.0753480f, -0.2889482f,
  -0.0655291f, +0.1421915f, +0.0218122f, -0.3190298f, -0.1198220f, -0.3311834f, -0.3897125f, +0.0312158f,
  +0.0614501f, +0.2662012f, +0.0906980f, -0.0498470f, +0.1399758f, -0.0297050f, +0.0796161f, -0.3084956f,
  +0.1624646f, -0.4490987f, +0.0016247f, +0.1654250f, +0.1300841f, +0.2115510f, -0.0702969f, -0.2218836f,
  +0.2388846f, -0.0055431f, -0.1450896f, -0.3536345f, +0.0564681f, +0.2679115f, +0.1829424f, -0.0987489f,
  +0.0292723f, -0.0677620f, +0.3325957f, +0.0756261f, -0.1999990f, +0.2076713f, -0.1113229f, -0.0276806f,
  +0.0959368f, +0.4742440f, +0.2019613f, +0.1116181f, +0.0117242f, -0.1659424f, +0.0426645f, -0.1199818f,
  +0.3492823f, -0.0464884f, -0.0829147f, -0.0542113f, +0.7562510f, -0.0312642f, +0.1883947f, +0.1228835f,
  -0.0497526f, -0.5282300f, +0.1827282f, -0.0402303f, +0.0993111f, +0.1025510f, -0.2484406f, +0.0684688f,
  -0.1018865f, +0.2135614f, -0.1032645f, +0.0090287f, -0.0799909f, +0.0831209f, -0.0803895f, +0.0475893f,
  -0.0354505f, -0.0207049f, +0.0899018f, +0.3626430f, +0.2236642f, +0.0157041f, +0.0453659f, +0.0428766f,
  -0.0716338f, +0.3994228f, -0.0165132f, +0.1730433f, +0.4922974f, -0.1419813f, -0.0304563f, +0.0025998f,
  +0.1918046f, -0.6698568f, +0.0059392f, +0.0400415f, +0.0350784f, -0.3570918f, -0.3166347f, +0.2439244f,
  -0.0570583f, +0.1506240f, +0.1294489f, +0.2073302f, +0.1044451f, +0.0195157f, -0.0034885f, +0.1182010f,
  +0.0341518f, -0.0020743f, -0.1334569f, +0.0507930f, +0.1060680f, +0.0593943f, -0.0004779f, +0.0676999f,
  +0.0457146f, +0.1105177f, -0.0795600f, +0.0967492f, -0.0052327f, +0.1562455f, -0.0455130f, +0.1715965f,
  -0.1410940f, +0.2270546f, -0.2185277f, -0.0888861f, -0.1978345f, -0.1733024f, +0.0937129f, +0.1513961f,
  +0.2458826f, +0.0108026f, +0.0046482f, +0.1766441f, +0.1705278f, +0.0777362f, -0.0515217f, -0.1033542f,
  +0.1000761f, -0.3919235f, +0.0505179f, -0.0150148f, +0.0440033f, +0.0868600f, +0.1600700f, -0.1755345f,
  +0.0006787f, +0.0279254f, -0.0528416f, -0.1068904f, +0.1995073f, -0.0828019f, -0.3649206f, +0.2347412f,
  -0.0839822f, -0.2799849f, +0.1466108f, -0.3187171f, -0.4356145f, -0.1887939f, +0.2558259f, +0.2717187f,
  -0.3074563f, +0.5761161f, -0.2611926f, -0.0141591f, -0.1689790f, +0.1763884f, +0.1574211f, -0.2941856f,
  -0.0466792f, +0.0633274f, -0.1125416f, -0.1560848f, +0.1718245f, -0.0224962f, -0.0464190f, -0.0346324f,
  +0.3287213f, -0.2566851f, +0.1863335f, -0.4521503f, +0.0824126f, -0.1856127f, -0.0848529f, +0.0413173f,
  -0.1166698f, -0.2881887f, +0.1044083f, -0.1502420f, -0.0519092f, -0.1705350f, +0.1075063f, -0.3332945f,
  +0.2088141f, +0.1317291f, -0.1002317f, +0.0345784f, +0.1526019f, +0.2038439f, +0.0186791f, -0.4163645f,
  +0.1246824f, -0.0503448f, +0.2342708f, +0.0173549f, +0.1220380f, -0.1270779f, +0.0206964f, -0.0567601f,
  +0.0652667f, +0.0560468f, -0.0929682f, -0.0017836f, +0.1899117f, +0.1911410f, +0.0810839f, -0.0232440f,
  -0.2825448f, +0.1154406f, +0.0630518f, -0.1967602f, +0.2588803f, +0.1630246f, -0.0910983f, -0.1138162f,
  +0.0030400f, -0.2145691f, +0.0358118f, +0.2859126f, +0.0391698f, -0.1195632f, +0.2362071f, +0.3574804f,
  +0.2511923f, +0.1556875f, +0.2048912f, +0.0668058f, +0.0343857f, -0.0209801f, +0.2180524f, +0.2090953f,
  -0.1841149f, +0.0241770f, +0.0989067f, -0.0318169f, +0.1147589f, -0.0084090f, +0.1370403f, -0.3573096f,
  -0.5491777f, +0.1280334f, +0.2643394f, -0.0674302f, -0.1171201f, +0.0462316f, +0.1531327f, +0.3414489f,
  +0.0361715f, +0.3551837f, +0.1317065f, -0.0354297f, +0.0243062f, +0.4558699f, +0.1705758f, +0.0693357f
);

const float biases[4] = float[4](
  -0.0289517f, +0.0284064f, +0.0159890f, +0.0081821f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer79 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0890026f, +0.0829764f, +0.0664769f, -0.0260204f, -0.0447584f, -0.1476720f, +0.0306317f, +0.0201375f,
  -0.0830416f, -0.0518676f, -0.0679860f, -0.1983029f, -0.0890056f, -0.0098941f, -0.0904939f, -0.2963428f,
  +0.0292713f, -0.0646371f, -0.0308704f, -0.0681780f, +0.1168374f, +0.0705044f, -0.0042062f, -0.0099608f,
  +0.2246879f, -0.1811216f, +0.0318986f, +0.2016646f, -0.0795996f, -0.4342615f, -0.0475132f, +0.2106298f,
  -0.1919279f, +0.3034766f, -0.3019462f, +0.1976114f, +0.0214035f, -0.1796595f, -0.1138133f, -0.0547915f,
  +0.1213529f, -0.0871859f, -0.0325316f, +0.0187089f, -0.0447543f, +0.2150437f, +0.0130533f, +0.0134397f,
  +0.1634448f, +0.0741867f, -0.0002086f, +0.2714385f, -0.0149197f, +0.2922761f, -0.1062432f, -0.0573349f,
  -0.1363483f, +0.1372468f, +0.0446220f, +0.1637900f, +0.0267092f, +0.1668157f, -0.1993495f, +0.2023228f,
  -0.2198717f, +0.1984036f, -0.2205688f, +0.0282968f, -0.0154421f, -0.0361797f, +0.0879010f, +0.1468530f,
  -0.2799475f, +0.0271767f, -0.3158262f, +0.1810216f, -0.1363434f, -0.2129172f, -0.1188154f, -0.1117696f,
  +0.0312492f, -0.0070597f, +0.1997239f, +0.3945931f, +0.0837856f, -0.0931915f, -0.0154305f, +0.1161824f,
  +0.1756005f, +0.1172493f, +0.0534044f, +0.3683848f, -0.4497831f, +0.1075854f, +0.2350121f, +0.2228578f,
  -0.0266816f, +0.1949733f, -0.0707617f, +0.0988103f, +0.0138714f, -0.0671643f, +0.1364902f, +0.1342453f,
  +0.0788626f, +0.0486231f, -0.0038849f, +0.1051020f, +0.0106928f, +0.0113606f, -0.1691551f, -0.1654896f,
  +0.1665210f, +0.1246701f, +0.0918522f, +0.0146126f, -0.1196621f, -0.0695855f, +0.0094199f, +0.0494315f,
  +0.2397850f, -0.1410996f, +0.1691185f, +0.0966641f, -0.2507948f, +0.0976491f, -0.2568468f, +0.0440981f,
  +0.0311846f, -0.0784772f, +0.1294093f, -0.0847616f, -0.0526923f, -0.1252401f, +0.1053281f, +0.2135478f,
  +0.1467867f, +0.1013262f, -0.3396248f, -0.0728879f, +0.0011350f, +0.0701433f, -0.2216123f, +0.2564360f,
  +0.0675564f, +0.1743338f, +0.0365595f, -0.1248017f, +0.0249252f, +0.0362560f, +0.0937098f, +0.1403528f,
  -0.0353745f, +0.2374265f, +0.2096516f, -0.1336153f, +0.0062738f, -0.0651381f, +0.0740557f, -0.0967974f,
  -0.1138976f, +0.2217044f, +0.1029903f, -0.2677068f, -0.1060581f, +0.0125270f, -0.0491574f, -0.2107065f,
  -0.0093635f, +0.2771526f, +0.0889131f, -0.0113020f, -0.0350846f, +0.1040252f, -0.1369672f, +0.1030285f,
  +0.1131859f, -0.1285380f, -0.1989802f, +0.2046536f, -0.0747463f, -0.1570635f, -0.3427278f, -0.1314247f,
  -0.0423512f, +0.1639031f, +0.1450283f, -0.1616591f, +0.0137474f, -0.0543438f, +0.0822278f, +0.0140645f,
  -0.1666069f, -0.0319480f, -0.0111985f, +0.2368100f, -0.0620983f, -0.0715883f, -0.0577898f, +0.1387347f,
  -0.0170947f, -0.3579226f, -0.1040268f, +0.4004847f, +0.1555002f, -0.0691672f, +0.0270818f, -0.1981454f,
  -0.1674884f, +0.0524739f, -0.0519775f, -0.0634800f, -0.1858821f, -0.3750835f, -0.1100711f, -0.0390194f,
  +0.0803922f, +0.0449763f, +0.1009603f, +0.0269160f, -0.0139794f, -0.2264363f, +0.0069118f, +0.0488788f,
  -0.0886607f, -0.1429875f, +0.1620182f, +0.1870999f, -0.3781321f, -0.1420683f, +0.0472314f, +0.1183669f,
  -0.0827442f, +0.1930846f, +0.0902629f, -0.0163263f, -0.1895633f, +0.0419428f, +0.1043917f, -0.0958568f,
  +0.0358048f, -0.0769991f, +0.0054612f, -0.0542716f, -0.2455259f, +0.0486110f, -0.2776420f, +0.0098881f,
  +0.1422428f, +0.0047596f, -0.0018532f, +0.1301007f, -0.0661254f, +0.1411688f, -0.2846338f, +0.0813886f,
  +0.0809704f, +0.1255351f, +0.3050811f, -0.1916723f, -0.0717162f, -0.0519932f, +0.0048062f, -0.1526573f,
  -0.1361029f, +0.2021998f, +0.1047638f, +0.0323107f, +0.0357103f, +0.3238334f, +0.0851659f, -0.2637264f,
  +0.3374410f, +0.0252766f, +0.1107940f, -0.0779209f, -0.2688526f, +0.0104635f, -0.0207546f, -0.2050958f,
  -0.0536230f, +0.0159513f, -0.1686119f, +0.0971416f, -0.1424749f, +0.1232690f, -0.1670359f, -0.2143181f
);

const float biases[4] = float[4](
  +0.0211819f, +0.0704048f, +0.0089191f, +0.0211543f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer79 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1110981f, +0.1134347f, -0.3906132f, +0.2950924f, +0.1283257f, +0.0917206f, -0.0500396f, -0.0512192f,
  -0.1111236f, -0.0263361f, -0.4810334f, +0.4594958f, +0.2163421f, -0.0992600f, -0.1527371f, +0.2653086f,
  -0.2123919f, +0.1495974f, -0.2683289f, +0.1663410f, +0.1212983f, +0.0805170f, -0.3053200f, -0.1661455f,
  +0.2858001f, -0.0941818f, -0.0469515f, -0.2215381f, +0.1268584f, -0.0389667f, +0.2930118f, +0.2550665f,
  +0.7122057f, +0.4129900f, +0.2122377f, -0.2604231f, -0.0704683f, +0.1514683f, -0.2523921f, +0.0826035f,
  +0.3239177f, +0.1250504f, -0.0383924f, -0.1384370f, +0.1007912f, -0.3027568f, +0.1714502f, +0.1984490f,
  -0.1038741f, -0.1552499f, -0.0581657f, -0.1099586f, -0.0494063f, -0.0169553f, -0.2163050f, +0.0569670f,
  -0.2658477f, -0.6105844f, -0.2717778f, -0.5885748f, -0.1146586f, +0.1103809f, -0.2517286f, +0.3265849f,
  -0.3106052f, -0.2210994f, -0.0022910f, +0.0414707f, -0.1268910f, +0.2894486f, +0.1104238f, +0.1654224f,
  -0.0861975f, +0.2900710f, -0.1843465f, +0.2458134f, +0.3144484f, -0.1829980f, -0.1101201f, +0.1092767f,
  -0.2082421f, +0.0240431f, -0.5437278f, +0.2387194f, +0.2274107f, +0.1661299f, -0.3220910f, -0.0625871f,
  -0.0538215f, +0.0385677f, +0.1793930f, +0.2501387f, -0.0448109f, +0.1912012f, -0.0724699f, -0.1983472f,
  +0.1636061f, -0.2933212f, +0.0447764f, +0.1590044f, +0.1555927f, +0.3286699f, -0.2576592f, -0.3623296f,
  +0.4364150f, +0.2648691f, +0.4433088f, -0.0775459f, -0.0008852f, -0.0659129f, +0.4640739f, +0.0450397f,
  -0.4336328f, +0.0410911f, -0.6811424f, -0.2061388f, +0.4401585f, -0.3293414f, +0.0921443f, -0.0526453f,
  -0.2250337f, +0.1040782f, +0.0248922f, -0.3954956f, +0.0157383f, +0.2100748f, +0.0811528f, +0.1680823f,
  -0.1600488f, -0.1599591f, -0.2347467f, +0.0903820f, -0.0466786f, +0.0350175f, -0.3158027f, +0.0974132f,
  +0.1685943f, -0.0601754f, +0.1741313f, +0.2728382f, -0.1318657f, -0.1103296f, -0.0974082f, +0.0018043f,
  +0.3258179f, -0.0150356f, -0.0468817f, +0.2237812f, +0.6335359f, +0.2744852f, +0.2447137f, +0.2472224f,
  -0.0044037f, -0.0928255f, +0.0929759f, +0.1501733f, +0.1378711f, -0.0061479f, +0.0747185f, +0.6891319f,
  +0.0071293f, +0.0531432f, -0.0474969f, +0.2918794f, -0.0432787f, -0.0754075f, +0.1150302f, +0.0144622f,
  +0.2646938f, -0.4336405f, +0.2039811f, -0.3112492f, +0.1796882f, -0.2013829f, +0.1706599f, +0.2333033f,
  +0.1901897f, -0.2781051f, +0.1339293f, -0.1019389f, +0.0931782f, -0.0659214f, -0.0334429f, +0.0946917f,
  +0.0407306f, -0.1032375f, +0.0682261f, +0.0909541f, -0.2133818f, -0.0241491f, -0.2069534f, -0.1156677f,
  +0.0015352f, -0.0613977f, +0.0079695f, -0.5597388f, -0.1435694f, -0.3294860f, -0.2274349f, +0.1302204f,
  +0.1160817f, -0.2020350f, -0.0148078f, -0.2353911f, -0.1903668f, +0.0590517f, +0.1098223f, +0.1394556f,
  +0.0646794f, +0.1628861f, -0.0008823f, +0.1173674f, -0.2001500f, +0.0466266f, -0.2584799f, -0.3579965f,
  +0.0926056f, +0.1887186f, +0.0002833f, -0.0735864f, +0.0972797f, +0.0665153f, +0.1773603f, -0.1334210f,
  -0.0649442f, +0.0903989f, +0.0339674f, +0.0526745f, +0.1928516f, +0.1050353f, -0.1483558f, +0.1483362f,
  -0.1884083f, +0.0086917f, +0.0295015f, +0.0734208f, +0.0880407f, +0.0182717f, -0.1491929f, +0.0248985f,
  -0.0747678f, -0.0931322f, +0.2327914f, +0.1794338f, -0.0106050f, +0.4681414f, -0.1633491f, -0.0665891f,
  -0.0476465f, -0.1291842f, -0.0800693f, +0.1854310f, -0.0066546f, +0.0024471f, -0.0023348f, +0.4613326f,
  +0.0733524f, +0.1145729f, +0.1505621f, -0.0930170f, -0.0279590f, -0.2238983f, -0.2698380f, -0.0911652f,
  +0.0819566f, -0.1132069f, -0.2571674f, +0.3264262f, +0.1373606f, -0.3671026f, -0.2481188f, -0.3865173f,
  +0.1807546f, -0.1891929f, -0.2529869f, +0.2180780f, +0.2068257f, -0.0067854f, +0.1262744f, -0.1660681f,
  +0.1804792f, +0.0159837f, -0.1403235f, -0.0475517f, +0.2939720f, -0.0683128f, +0.0095592f, +0.0519540f
);

const float biases[4] = float[4](
  +0.0260465f, -0.0075346f, +0.0030436f, +0.0235372f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer80 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0049481f, -0.0088406f, +0.0695233f, +0.0887620f, -0.2259856f, +0.1901945f, -0.0542912f, -0.1161137f,
  +0.1032585f, -0.1683032f, -0.0893500f, -0.3504940f, +0.0697487f, -0.1666053f, -0.0280234f, +0.2670338f,
  +0.0248650f, +0.0410818f, +0.1481547f, -0.0162068f, +0.1500248f, +0.1415359f, -0.1328226f, -0.0614994f,
  -0.1749057f, +0.1352709f, +0.0616322f, +0.1085230f, -0.2726913f, -0.5511723f, +0.0327559f, -0.2616578f,
  +0.3535626f, -0.0416282f, -0.0885905f, +0.0390606f, +0.2857844f, +0.2481451f, -0.1127668f, +0.3807898f,
  -0.1053123f, -0.1016153f, -0.1346439f, +0.0170677f, +0.0793011f, -0.0647756f, -0.1326542f, -0.2075923f,
  +0.0980480f, -0.0250874f, -0.0079107f, +0.1229296f, +0.2285426f, +0.1336244f, -0.0966613f, +0.1004828f,
  +0.1396783f, -0.0169912f, -0.0807523f, -0.0077756f, -0.0349218f, -0.0354551f, -0.0916975f, +0.1480739f,
  -0.1346105f, +0.1367708f, -0.1673353f, -0.1827009f, +0.0140233f, +0.0029346f, -0.2531685f, -0.0063197f,
  +0.1203906f, +0.1058756f, -0.1609929f, +0.1318536f, -0.0163796f, +0.0656439f, -0.1274957f, +0.1454531f,
  +0.0307117f, +0.0104405f, +0.0658257f, -0.1213195f, -0.5698907f, -0.2256455f, -0.2417251f, -0.1573121f,
  +0.0204431f, +0.1513908f, +0.1937845f, -0.0943353f, -0.2072135f, -0.0499068f, -0.1660367f, +0.1491891f,
  +0.1415861f, +0.0329964f, -0.1284437f, -0.0070605f, -0.5043032f, +0.0189798f, +0.1429017f, -0.0208881f,
  -0.0984830f, -0.1994912f, +0.3833317f, +0.2128233f, -0.0938269f, -0.0063575f, -0.0862885f, -0.2050280f,
  -0.0425045f, -0.0204189f, -0.3149762f, +0.2257490f, -0.2245261f, -0.0845639f, -0.0253436f, +0.1916305f,
  +0.2055653f, +0.0310046f, -0.0084643f, -0.0338274f, -0.0268672f, +0.2217381f, +0.1472217f, -0.1113183f,
  -0.1642872f, -0.0099029f, +0.1023128f, +0.2378537f, -0.0072624f, -0.0913875f, -0.1971514f, -0.0830508f,
  -0.0957103f, -0.0185397f, -0.0409288f, -0.1236404f, +0.0210366f, -0.0686472f, +0.3220901f, +0.1106350f,
  -0.0456644f, +0.1580368f, +0.0987791f, +0.0876957f, +0.1396377f, +0.0601625f, +0.0516999f, +0.0352890f,
  -0.1016207f, -0.1589468f, +0.2531933f, -0.1462822f, +0.2935916f, -0.2727391f, +0.1030418f, +0.1492502f,
  -0.0856480f, -0.0497378f, +0.0783844f, +0.0366220f, +0.1574054f, +0.2659637f, -0.0327229f, -0.0103488f,
  +0.1697698f, -0.0496669f, -0.2344392f, -0.3118703f, -0.1526587f, -0.1585584f, +0.2116245f, +0.0932408f,
  +0.0716643f, -0.2622191f, -0.0739113f, -0.2022166f, +0.1487747f, +0.5301234f, -0.0607404f, +0.1984963f,
  -0.0493571f, +0.0434906f, -0.0849143f, -0.1546534f, -0.0151538f, +0.2692501f, -0.4414976f, -0.0669920f,
  -0.0129122f, -0.1978128f, +0.2442256f, +0.1312734f, -0.1115009f, +0.2507041f, +0.1991120f, +0.1441205f,
  +0.1053402f, +0.0313951f, -0.1301554f, -0.3110959f, +0.0704623f, -0.3681614f, -0.2052394f, -0.0286837f,
  -0.0911016f, -0.0061389f, +0.2241471f, -0.0149213f, +0.1391484f, -0.2122339f, -0.1316099f, -0.0935546f,
  -0.1488250f, +0.0773795f, -0.0014482f, -0.0898247f, -0.2893959f, +0.0857086f, -0.1323148f, -0.1612840f,
  -0.3603837f, -0.0359429f, -0.0023189f, +0.2404471f, -0.2676709f, -0.0541638f, -0.0356425f, -0.1477316f,
  -0.2459397f, -0.0051877f, -0.0534230f, +0.1586970f, +0.0855732f, -0.2522185f, +0.5076295f, +0.3924284f,
  -0.2542553f, -0.1930133f, -0.0059758f, -0.0709434f, -0.6157667f, -0.3949620f, +0.1032211f, +0.2716370f,
  -0.1628293f, -0.0262724f, -0.1425391f, +0.2519068f, -0.2750041f, -0.0925775f, +0.2708048f, -0.0592388f,
  -0.0625478f, -0.1274875f, +0.0410010f, +0.1130670f, -0.2047690f, +0.4033270f, +0.1883309f, -0.1320417f,
  -0.1550907f, -0.0413080f, +0.1821335f, +0.1213681f, +0.1194520f, +0.2074990f, +0.0033750f, +0.1316694f,
  +0.1994116f, -0.1995532f, +0.0426981f, +0.2292066f, +0.1571661f, +0.1987556f, -0.0432510f, +0.0163788f,
  +0.0039456f, -0.0872267f, +0.0413192f, +0.0401289f, +0.0385804f, -0.1600809f, -0.2292798f, -0.1430681f
);

const float biases[4] = float[4](
  +0.0054636f, -0.0304096f, -0.0227388f, -0.0010114f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer80 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1693615f, -0.0754324f, -0.2256356f, -0.0510683f, +0.1710219f, +0.1375610f, +0.3519717f, -0.2003283f,
  -0.2666336f, +0.1627164f, -0.1038598f, +0.0453552f, +0.1261079f, -0.1263201f, +0.0634791f, +0.1728172f,
  +0.0710393f, +0.0517539f, -0.1503670f, -0.0481728f, +0.0379455f, -0.0831174f, +0.0993261f, -0.0499565f,
  -0.0012645f, +0.2177624f, -0.1031114f, -0.0247358f, -0.3123487f, +0.3410030f, +0.0864429f, +0.0490574f,
  +0.1272988f, +0.1273114f, -0.0974819f, +0.0316628f, +0.2573168f, -0.1955649f, +0.0326696f, -0.2291026f,
  +0.0478592f, -0.1924083f, +0.2495251f, +0.1551908f, -0.0838376f, -0.1561012f, -0.1320635f, -0.0752618f,
  +0.1986620f, +0.0954050f, -0.0306632f, -0.3149165f, +0.1413917f, -0.1587812f, -0.0384723f, -0.2585223f,
  +0.2404483f, -0.0109268f, +0.1316757f, +0.2311672f, -0.0695500f, +0.2956521f, +0.0340000f, +0.0136731f,
  +0.0498946f, -0.1153250f, +0.0101577f, -0.1553586f, +0.0574298f, -0.0288855f, -0.0108507f, -0.1927033f,
  +0.0420095f, +0.0716714f, +0.0468562f, -0.0313676f, -0.1301279f, +0.0369692f, -0.1776611f, -0.1477043f,
  -0.1865425f, -0.0966273f, +0.0109674f, -0.2597881f, -0.7763726f, -0.1232400f, +0.0082439f, +0.0533851f,
  -0.1196746f, +0.2122468f, +0.0024871f, -0.0535860f, -0.0365593f, -0.2372418f, -0.0086648f, +0.1406558f,
  +0.0320558f, -0.2619308f, -0.0611388f, -0.1329848f, +0.2590699f, -0.2206506f, +0.0290281f, +0.1440763f,
  +0.1358891f, -0.2581655f, +0.3754390f, -0.1284336f, +0.2025792f, +0.2251673f, +0.1361334f, -0.1128889f,
  +0.0694116f, +0.1018101f, -0.0559591f, -0.1422229f, +0.0560578f, +0.0716758f, -0.1719098f, +0.1725693f,
  +0.0175861f, +0.0114371f, -0.0749510f, -0.0552903f, +0.0506826f, +0.1838879f, +0.1296741f, -0.1495678f,
  -0.0187255f, +0.3613880f, -0.0019408f, -0.1854715f, +0.0975607f, -0.1095301f, +0.0182938f, -0.1021460f,
  -0.1028988f, +0.0978313f, +0.0272330f, +0.3052542f, +0.0785601f, +0.0319608f, -0.1821540f, -0.1461456f,
  -0.1805383f, +0.1177630f, +0.0848852f, -0.0788438f, +0.2513540f, +0.0426960f, +0.0924053f, +0.2780292f,
  +0.1280769f, -0.1509405f, -0.1600445f, -0.1655099f, +0.4419286f, -0.3106415f, +0.2074386f, +0.0425515f,
  +0.0469503f, +0.2073780f, +0.1039266f, -0.0912024f, +0.1845990f, +0.4116952f, +0.3681366f, -0.0111152f,
  -0.0135108f, +0.0627133f, -0.3106104f, +0.1817221f, +0.0553007f, +0.0201185f, +0.2816621f, +0.0232263f,
  +0.1454147f, +0.0547140f, +0.1102396f, -0.0263529f, +0.2740907f, +0.6424767f, -0.1527113f, +0.1165795f,
  -0.1654695f, -0.1630424f, +0.0231236f, -0.0517809f, -0.0334665f, -0.4083966f, +0.2144026f, +0.0814519f,
  +0.0821577f, -0.1567940f, +0.1636223f, -0.1728165f, -0.0053246f, +0.0587404f, +0.1984272f, +0.1218589f,
  -0.3601522f, -0.0877536f, -0.0384325f, +0.1465298f, -0.1880080f, -0.2367719f, +0.2796038f, -0.2098845f,
  +0.1173136f, +0.0308884f, +0.0558246f, -0.0531527f, -0.0026282f, +0.0713012f, -0.3162512f, -0.1369343f,
  -0.0040841f, +0.0729020f, -0.2006999f, +0.2260040f, +0.1846504f, +0.2318758f, +0.0881236f, +0.0601882f,
  +0.1029148f, -0.1776322f, -0.2291961f, +0.3770097f, +0.1620744f, -0.2056232f, -0.3579645f, +0.0059511f,
  +0.1798686f, -0.0473508f, -0.2243919f, +0.0834950f, -0.2318653f, +0.1236333f, +0.0433584f, +0.3580723f,
  +0.0051545f, +0.3484702f, +0.1368026f, +0.1492660f, -0.1448480f, -0.1075284f, +0.0165480f, -0.1516146f,
  +0.1385602f, +0.1377033f, +0.0128521f, +0.0955676f, -0.0639615f, +0.4962595f, +0.4164581f, -0.0609598f,
  -0.2916108f, -0.0377353f, -0.1335483f, -0.1412202f, +0.0097578f, -0.3813126f, -0.0967019f, -0.0288428f,
  +0.1075580f, +0.2274189f, -0.1598545f, +0.2699617f, -0.0591329f, +0.1056971f, +0.0118653f, -0.1410707f,
  +0.3350859f, -0.2085869f, -0.1197164f, -0.0561308f, -0.0184461f, -0.3281285f, -0.2031251f, +0.0136779f,
  -0.1001881f, +0.1330341f, +0.0247121f, +0.0638326f, -0.0032626f, +0.0044919f, -0.0554574f, +0.1250610f
);

const float biases[4] = float[4](
  -0.0424126f, +0.0074483f, -0.0051580f, +0.0171390f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer81 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0273786f, -0.0717175f, -0.1278202f, +0.1334598f, +0.1029668f, +0.1135125f, +0.1426318f, -0.0346987f,
  -0.0444318f, -0.1146353f, +0.2794415f, +0.0511618f, -0.0977483f, -0.0765859f, +0.1522149f, +0.1722356f,
  +0.0083802f, +0.0816838f, +0.0172300f, -0.0372036f, -0.0339369f, -0.1552614f, -0.1665446f, -0.0719462f,
  -0.0381856f, +0.1167164f, -0.0372196f, -0.1807601f, +0.1365089f, -0.3456159f, -0.0256276f, +0.1215692f,
  +0.0321668f, +0.2139576f, -0.0599658f, -0.0550491f, -0.1165855f, +0.0239427f, -0.0178066f, -0.2848654f,
  +0.1403125f, +0.1572329f, -0.2283081f, +0.2432400f, -0.0300156f, -0.1283600f, -0.1806514f, +0.0255462f,
  -0.0358103f, -0.2435213f, -0.0149680f, +0.1015835f, +0.2744369f, +0.1008676f, +0.0067966f, -0.1795897f,
  -0.4845947f, +0.2668360f, +0.3242790f, +0.1247952f, -0.2214876f, +0.0810556f, +0.1624225f, +0.0487075f,
  -0.0986663f, -0.0279088f, +0.0020342f, +0.0774196f, -0.2383229f, -0.1483235f, +0.0709475f, +0.0288172f,
  -0.1549185f, +0.0135687f, -0.0649641f, +0.0659585f, -0.0110873f, +0.2221881f, +0.0104648f, +0.0694818f,
  +0.0041122f, -0.0287008f, +0.1602996f, -0.0118534f, +0.1450402f, -0.0759168f, -0.0821136f, -0.2953404f,
  -0.2580063f, +0.1261309f, +0.0494179f, -0.0448494f, -0.0379889f, +0.0528281f, -0.0213033f, +0.0514699f,
  +0.1522427f, +0.0583086f, -0.0750501f, -0.1289789f, -0.2385869f, -0.0934780f, +0.0203301f, +0.1341717f,
  -0.1863518f, -0.0705884f, -0.0715608f, -0.1072227f, +0.0103925f, +0.2730699f, +0.1635005f, +0.0135722f,
  -0.1342357f, +0.1558969f, -0.0897577f, +0.0434535f, -0.0661410f, -0.0430152f, +0.1165780f, +0.0734665f,
  -0.0232749f, -0.1049761f, +0.0463182f, -0.0437517f, -0.0030081f, -0.1195659f, -0.1835447f, -0.0630446f,
  +0.2134702f, +0.0023568f, +0.0283166f, -0.1778105f, -0.0142232f, -0.3167570f, +0.1276867f, +0.0225687f,
  +0.0661010f, +0.0506293f, +0.0138825f, -0.0751074f, -0.0283085f, -0.1885709f, -0.1814105f, -0.0932200f,
  +0.0656347f, -0.1104557f, +0.1208852f, -0.0775094f, -0.0874502f, -0.1037346f, +0.0271031f, +0.0037075f,
  +0.1314500f, -0.0581674f, -0.1026456f, -0.2985729f, -0.2030267f, +0.0305473f, -0.0648513f, +0.1176273f,
  +0.0487274f, -0.1985603f, +0.2962272f, -0.2684962f, +0.3240515f, -0.5046232f, -0.1181271f, +0.1014014f,
  -0.0909933f, -0.0563995f, +0.1059605f, +0.1438298f, +0.1287636f, -0.0706611f, -0.0638428f, +0.1088861f,
  +0.2014699f, -0.0477246f, +0.0170890f, -0.1718964f, +0.0785544f, +0.0674852f, -0.2308339f, +0.1420296f,
  +0.3385147f, -0.2560391f, -0.2468698f, -0.1075588f, +0.5075536f, -0.1661811f, -0.2723410f, +0.2213157f,
  +0.0132937f, +0.0088995f, -0.2195368f, +0.0507115f, +0.0653688f, -0.1572868f, +0.0367560f, -0.1588686f,
  -0.3530060f, +0.0870411f, -0.0524670f, -0.2045239f, +0.2134590f, -0.0696600f, +0.0513441f, -0.0949178f,
  -0.2071365f, -0.2424915f, -0.0297645f, -0.5392969f, +0.4602283f, -0.1614933f, -0.0496103f, -0.3319610f,
  -0.0029048f, -0.0378809f, +0.1165115f, -0.0981153f, -0.1926086f, -0.2365473f, +0.1567385f, -0.0492095f,
  +0.0254526f, -0.1554286f, +0.2941699f, +0.0297456f, -0.0479465f, -0.1613398f, -0.0755739f, -0.0369763f,
  +0.0755502f, -0.1211694f, -0.2458190f, +0.0305748f, -0.0413485f, +0.2445332f, +0.2775891f, +0.1162572f,
  +0.0272565f, +0.0910252f, -0.0150390f, +0.0734207f, +0.0467425f, +0.1572604f, -0.2004301f, +0.0561331f,
  +0.0995636f, +0.1415431f, -0.2218233f, +0.2769533f, -0.3882945f, +0.2249098f, +0.4127852f, -0.1024207f,
  +0.0602678f, +0.1988511f, -0.1599474f, +0.2626431f, -0.0256479f, +0.0074287f, -0.1114844f, +0.2767397f,
  -0.2077618f, -0.1872879f, -0.1854699f, +0.4038695f, +0.0011320f, -0.2667359f, -0.0173720f, +0.0066324f,
  +0.1215223f, -0.0273023f, -0.1517328f, -0.2688605f, +0.0050148f, +0.3770435f, +0.0403118f, -0.1429563f,
  -0.1557104f, -0.1399768f, +0.1315811f, -0.2858806f, +0.1841663f, -0.4024842f, -0.1630271f, +0.0697465f
);

const float biases[4] = float[4](
  +0.0533289f, +0.0321066f, +0.0283979f, +0.0214528f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer81 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0355360f, -0.2977665f, +0.2784545f, -0.0903978f, +0.1836591f, -0.1443189f, +0.0226763f, -0.0441369f,
  -0.1312739f, +0.2057163f, -0.4071763f, +0.1433204f, +0.4648132f, +0.3785259f, +0.1166393f, -0.1749295f,
  +0.1912870f, -0.1533475f, -0.1681822f, -0.0144653f, +0.1797152f, +0.3068637f, -0.0514154f, -0.0512447f,
  -0.0175563f, +0.0804691f, -0.1138181f, +0.1316909f, -0.0308750f, +0.0897215f, -0.0971627f, +0.0701717f,
  -0.0756875f, -0.0818911f, +0.2407774f, -0.0150269f, +0.3892427f, +0.0488674f, +0.5714003f, +0.1896943f,
  -0.2874388f, +0.0570838f, -0.1391748f, -0.0134430f, -0.2264960f, +0.1271451f, +0.0140930f, +0.0617571f,
  +0.1840848f, -0.1914534f, +0.0621689f, -0.2454518f, -0.0102077f, +0.0559152f, +0.2222027f, +0.1420062f,
  -0.3608363f, +0.1702614f, -0.0040600f, +0.1639289f, -0.1803431f, +0.0480607f, +0.0471184f, -0.1458951f,
  +0.0897294f, -0.0407786f, -0.0846155f, -0.0462191f, +0.0050279f, -0.2199164f, -0.0690955f, -0.0410623f,
  +0.2190032f, +0.0347392f, -0.1223855f, +0.1301064f, +0.2684414f, +0.3414779f, +0.1002108f, +0.0537622f,
  +0.2551537f, +0.1120739f, -0.1304258f, +0.0686703f, +0.1638587f, -0.0986017f, +0.1004778f, -0.2438110f,
  +0.0847669f, -0.2021340f, +0.0996477f, -0.3621385f, -0.1503753f, +0.1776777f, -0.0157958f, -0.1689893f,
  -0.1959275f, -0.0854721f, +0.0162677f, -0.0667609f, +0.1493506f, +0.3996366f, +0.3900053f, -0.1262339f,
  +0.0596225f, -0.1403307f, -0.0760079f, +0.0963272f, -0.1836109f, +0.3192940f, +0.0154837f, +0.0530612f,
  -0.0030899f, -0.0636374f, -0.0880648f, +0.0101505f, -0.0669468f, +0.3478257f, -0.0863461f, +0.0650213f,
  -0.1805670f, +0.0545534f, +0.2387394f, +0.0796104f, -0.0602559f, -0.1898805f, +0.0390493f, +0.1177022f,
  -0.1366251f, -0.1666669f, +0.1542775f, -0.1059208f, -0.1136402f, +0.0483414f, +0.3590885f, -0.1019130f,
  -0.0170039f, -0.1203505f, -0.2934567f, -0.0944484f, +0.2328725f, -0.1577436f, -0.1971193f, +0.1243365f,
  +0.0863662f, +0.0183737f, -0.1398907f, +0.1650757f, +0.0959319f, +0.0859075f, +0.3169400f, +0.1599729f,
  -0.0014997f, +0.1065129f, +0.0588380f, -0.0510962f, +0.1689592f, +0.0104164f, -0.0737010f, -0.0364002f,
  -0.0835585f, -0.1135085f, -0.1614230f, +0.2385923f, +0.0461937f, -0.0833074f, +0.0064176f, -0.0399069f,
  +0.2243813f, +0.2153425f, +0.0355966f, -0.1169406f, -0.0035539f, +0.1289568f, +0.1812139f, +0.0953253f,
  -0.0072915f, +0.1348936f, +0.1429178f, -0.0162228f, -0.2041868f, +0.1098347f, +0.0565564f, -0.0332169f,
  -0.0467470f, +0.0836488f, +0.0624084f, +0.2894301f, -0.2442481f, +0.0979069f, +0.1233806f, +0.1149005f,
  -0.2403278f, +0.1403397f, -0.2433690f, +0.0349608f, +0.0392174f, +0.1223344f, -0.2391171f, +0.2464314f,
  -0.0588497f, +0.0860487f, -0.0338721f, +0.1115206f, -0.1175677f, +0.2469147f, +0.0007730f, +0.1422592f,
  -0.0964722f, +0.1888165f, -0.0993597f, +0.0765235f, +0.0567088f, +0.2428365f, +0.0534284f, +0.0325961f,
  -0.0119574f, -0.0691718f, -0.0559813f, +0.1894613f, -0.2578457f, +0.0228978f, +0.0750733f, -0.0579294f,
  +0.2258599f, +0.0845240f, -0.0663380f, +0.0624149f, +0.1158396f, -0.4733360f, -0.2405954f, +0.1090534f,
  -0.2473824f, +0.2476178f, +0.2611462f, -0.2478015f, -0.0817064f, +0.0086831f, +0.0967286f, +0.0276957f,
  -0.1638151f, -0.0606686f, +0.1022035f, +0.0765933f, -0.0666572f, +0.2974715f, -0.2039538f, -0.1420503f,
  -0.0239244f, +0.1594518f, -0.0442835f, -0.2841539f, -0.0003301f, +0.0008946f, +0.1753149f, -0.1173471f,
  -0.0479406f, +0.2714839f, -0.0386344f, -0.0540274f, -0.0629210f, -0.1760149f, +0.0785039f, -0.1162703f,
  -0.1354471f, +0.3209906f, +0.0115377f, +0.0035096f, -0.1589036f, -0.0627887f, +0.1628463f, +0.0041060f,
  -0.3621774f, +0.0196846f, +0.1925518f, +0.1871995f, +0.0840189f, -0.0596354f, +0.4278602f, -0.0780032f,
  -0.0513743f, -0.1118469f, -0.1994306f, -0.1733542f, -0.0717981f, -0.2788484f, +0.0373534f, -0.1278849f
);

const float biases[4] = float[4](
  +0.0079575f, -0.0076994f, -0.0107420f, +0.0148103f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer82 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2352403f, -0.0319546f, +0.0091647f, +0.0695514f, +0.0409584f, -0.0728544f, +0.0745786f, +0.0113196f,
  +0.1875534f, -0.3029700f, +0.0260730f, -0.0925052f, +0.0219353f, +0.1649595f, +0.1368710f, +0.1842428f,
  +0.0852835f, +0.0784819f, -0.0352148f, +0.1445287f, +0.0741380f, +0.0692323f, -0.0102041f, +0.0091037f,
  +0.1675733f, -0.0616807f, +0.1539239f, -0.1562574f, -0.0362735f, +0.0474802f, -0.1237945f, +0.0946790f,
  +0.0665816f, +0.1171043f, -0.1013492f, +0.1860208f, -0.0828242f, +0.0749837f, +0.2374834f, -0.1195521f,
  +0.1206763f, -0.1289051f, +0.1460109f, -0.1192740f, -0.2748107f, +0.1652802f, -0.2390075f, +0.2207004f,
  -0.1295003f, +0.2112432f, -0.2186631f, -0.0954123f, -0.1049429f, -0.0278668f, +0.1602689f, +0.2462271f,
  -0.0736456f, +0.0951002f, -0.1086045f, -0.0361618f, +0.3978809f, -0.2307134f, +0.0817350f, -0.2780811f,
  -0.0102089f, -0.2734062f, -0.3184804f, +0.0157821f, +0.0927179f, +0.3504661f, +0.0178354f, -0.0095627f,
  -0.0265373f, -0.1313615f, -0.0572314f, -0.0089379f, -0.1301712f, +0.0750007f, +0.0831200f, +0.2124554f,
  +0.2334281f, -0.0325374f, -0.0913289f, +0.2742306f, -0.0674737f, +0.3902889f, -0.1950058f, -0.3203299f,
  +0.2607011f, -0.1630984f, +0.1878446f, +0.2129744f, +0.1149987f, -0.0589496f, +0.0903678f, +0.0266656f,
  +0.0677469f, -0.1310896f, +0.1427164f, -0.1716088f, -0.0709745f, -0.1949009f, +0.1896714f, -0.1135048f,
  -0.0945795f, +0.0487901f, +0.0048119f, -0.2615147f, -0.2903829f, +0.1947450f, +0.0465343f, -0.0882201f,
  -0.0625826f, +0.0270239f, +0.2322079f, -0.0233199f, +0.1043759f, -0.1721638f, +0.1444691f, -0.0060507f,
  +0.1624570f, +0.0447447f, +0.0548053f, +0.0110575f, +0.0773312f, -0.0067168f, +0.1139486f, +0.0431138f,
  +0.0854738f, +0.0569484f, +0.1164839f, -0.0226962f, +0.0839015f, -0.0789741f, -0.0503917f, +0.1452441f,
  +0.0581496f, +0.1228806f, +0.2167372f, -0.0156999f, -0.1576303f, -0.0136866f, -0.1398995f, +0.2828113f,
  -0.1410562f, +0.0206166f, -0.2298986f, +0.1111003f, +0.0825733f, +0.2505153f, +0.1393421f, +0.2063403f,
  -0.0075775f, -0.0038314f, +0.0749877f, +0.2335895f, -0.0780178f, +0.0764614f, +0.0596826f, -0.1555777f,
  -0.0716675f, -0.1872216f, +0.0394515f, +0.0201931f, -0.0997708f, +0.0105237f, +0.1215964f, +0.0947374f,
  +0.0375845f, -0.0317524f, +0.0104858f, -0.2503189f, -0.2568009f, -0.1272309f, +0.0459857f, -0.0986935f,
  +0.2483386f, +0.1115077f, -0.0790813f, +0.0006595f, +0.0451990f, +0.0326737f, +0.0262746f, +0.2001198f,
  +0.0193516f, +0.0167049f, +0.2210539f, +0.1177892f, -0.3928236f, +0.2506292f, +0.0276919f, +0.0611913f,
  -0.0226388f, +0.0903048f, -0.2417082f, +0.2290419f, +0.2332379f, -0.2950269f, -0.0765107f, +0.0762112f,
  -0.1154387f, -0.0867035f, +0.0828271f, -0.0975096f, +0.0434684f, -0.0904511f, +0.0693956f, +0.0028560f,
  +0.1886402f, +0.3369047f, -0.0464655f, -0.0410461f, -0.0646626f, -0.0227113f, -0.0516380f, -0.0607607f,
  +0.1609953f, +0.1612412f, +0.1195745f, +0.1499016f, -0.1095626f, -0.1833233f, -0.0058873f, -0.0538587f,
  -0.2244365f, +0.2642765f, -0.0164861f, -0.0529709f, +0.0806234f, +0.0710503f, +0.1223054f, -0.2636496f,
  -0.1375760f, -0.1475846f, +0.0660658f, -0.3646792f, -0.2189979f, +0.1350340f, +0.1481602f, -0.1523829f,
  -0.3051355f, +0.1780744f, +0.2851105f, -0.5758176f, +0.2857444f, +0.0890120f, +0.2507943f, -0.0706880f,
  +0.0210218f, +0.0204994f, -0.0254361f, -0.0168356f, +0.0021299f, +0.4841741f, +0.0523279f, +0.1681518f,
  +0.0956871f, -0.1547832f, -0.1124003f, +0.1647504f, +0.3135147f, +0.1757593f, +0.3103851f, -0.0370133f,
  +0.0540940f, -0.1203532f, +0.0690815f, +0.0313325f, -0.2136332f, +0.2440520f, +0.1063089f, +0.2217755f,
  -0.0197727f, +0.0152412f, +0.0451402f, +0.0061083f, +0.0734449f, -0.2193822f, +0.0560753f, +0.2684057f,
  -0.0385032f, +0.0946256f, -0.0734636f, -0.0095085f, +0.0763144f, -0.0002498f, +0.0970198f, +0.0648779f
);

const float biases[4] = float[4](
  +0.0111117f, -0.0303253f, -0.0252972f, +0.0071837f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer82 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.3124021f, +0.1072316f, -0.0791041f, +0.0447411f, -0.0793307f, -0.1240177f, -0.2435313f, +0.0397143f,
  +0.1230042f, +0.0942794f, -0.3379441f, -0.0948682f, +0.0068972f, -0.1932254f, -0.1709773f, +0.0160575f,
  -0.1209285f, +0.0483332f, -0.0002420f, -0.1431692f, +0.0644072f, +0.1005714f, -0.0495395f, -0.0334576f,
  -0.2838128f, +0.1437064f, -0.0382447f, +0.1531541f, +0.1997580f, +0.1770177f, +0.1772011f, +0.0756283f,
  -0.1140229f, +0.0867583f, -0.0259785f, +0.1465869f, +0.1273276f, +0.2228259f, +0.2433331f, +0.0696182f,
  -0.0711208f, -0.1600927f, -0.2585251f, -0.1393458f, +0.2162633f, -0.1877505f, +0.1820155f, -0.2569177f,
  -0.0005794f, +0.0122806f, +0.1585943f, -0.1030098f, -0.1623386f, +0.0035816f, -0.0799950f, +0.0928471f,
  +0.3136961f, +0.0754436f, +0.3487230f, -0.3390955f, +0.0377407f, +0.2995570f, -0.0933923f, -0.2267492f,
  -0.1777292f, -0.0540563f, -0.1605536f, +0.1233207f, -0.0496007f, -0.1928892f, -0.0685525f, +0.1652099f,
  +0.3547267f, +0.0167502f, +0.1087060f, +0.0468318f, +0.1769127f, -0.0264702f, +0.0897164f, -0.0566285f,
  +0.0065593f, -0.0142685f, -0.3541088f, -0.2688401f, +0.0215459f, +0.1267495f, +0.1608813f, +0.3152212f,
  -0.0548199f, -0.1467858f, -0.0114278f, -0.0143355f, +0.0992174f, +0.3904047f, -0.0564116f, -0.0356439f,
  +0.2000601f, +0.2233892f, +0.0267789f, -0.0709236f, -0.1356575f, -0.2239584f, +0.1110860f, +0.0585217f,
  -0.0668165f, +0.0916525f, -0.0190039f, -0.1023599f, -0.1532371f, +0.0416524f, -0.0903422f, +0.0193325f,
  +0.0305309f, +0.2207752f, +0.0060218f, +0.0720381f, +0.2318687f, +0.1383677f, -0.0273689f, +0.0243390f,
  -0.1462883f, -0.1319433f, +0.0643300f, -0.0703109f, -0.1383119f, +0.0093810f, +0.0648931f, -0.0091492f,
  +0.1047635f, -0.0392004f, +0.0519294f, +0.0549509f, -0.1942738f, +0.1563231f, -0.1558594f, +0.2519672f,
  -0.2233638f, -0.1973531f, -0.0151553f, +0.0321088f, +0.0599689f, -0.1102375f, +0.1506852f, +0.1286151f,
  -0.2057514f, +0.1825014f, +0.3682642f, +0.0142423f, +0.0328030f, +0.0106121f, -0.1587671f, +0.1151008f,
  +0.0218835f, +0.1231959f, +0.2474473f, +0.1982570f, -0.0088963f, -0.2159184f, -0.1143344f, -0.4539017f,
  -0.0432022f, +0.1584463f, +0.3735056f, +0.0622473f, -0.0009022f, +0.1874240f, -0.0364952f, -0.0350993f,
  -0.0959072f, -0.0296486f, -0.0924017f, +0.1186456f, +0.0737866f, +0.2220669f, +0.0474544f, -0.0555578f,
  -0.0933361f, +0.2416791f, -0.0727723f, -0.5612329f, +0.2945538f, -0.2892234f, +0.1586847f, -0.1945976f,
  -0.0006830f, +0.0340117f, -0.0543227f, -0.4010662f, +0.0104331f, +0.0705061f, -0.0883764f, -0.1544768f,
  -0.0028951f, +0.2849958f, -0.0332097f, -0.0312993f, +0.1659159f, +0.0601355f, -0.0673344f, -0.0119242f,
  +0.1342600f, -0.1091514f, -0.0228819f, +0.0758121f, +0.1568293f, +0.0455971f, +0.1910540f, +0.3249836f,
  +0.2020556f, -0.1122874f, -0.0731318f, +0.0702663f, +0.2895713f, +0.0495880f, -0.1142129f, -0.0792034f,
  -0.3257030f, +0.1493496f, -0.2607983f, +0.1423090f, -0.0277251f, -0.1087352f, -0.0537052f, +0.0274103f,
  -0.2482291f, -0.0753297f, -0.2655625f, +0.1208365f, +0.1235123f, -0.3483916f, -0.3126816f, +0.0206539f,
  +0.1961499f, +0.1681283f, -0.2516502f, -0.1105535f, +0.4858748f, +0.0419326f, -0.0331321f, -0.0313673f,
  -0.2356724f, +0.0330889f, -0.3838574f, -0.1777132f, +0.0305945f, +0.2828127f, -0.0230014f, -0.0588935f,
  +0.0088450f, -0.1423587f, +0.2849178f, -0.1384873f, +0.2502550f, +0.0740749f, +0.2798395f, -0.1791616f,
  -0.0308541f, +0.1150337f, +0.1993877f, -0.1122386f, -0.0052176f, -0.1509743f, -0.1943787f, +0.1550913f,
  -0.0126647f, -0.0561835f, -0.1149754f, -0.0220994f, +0.0341448f, +0.1813054f, +0.0379403f, +0.0404366f,
  -0.0753927f, +0.3364549f, +0.4125124f, -0.0918615f, +0.1804898f, -0.0070323f, -0.1725826f, -0.2399585f,
  -0.0750929f, +0.0885089f, -0.1138226f, +0.0002270f, +0.1364761f, -0.0903388f, -0.0206844f, +0.0660529f
);

const float biases[4] = float[4](
  -0.0305056f, +0.0215374f, -0.0180931f, +0.0454086f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer83 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0223965f, -0.2147716f, +0.1340284f, -0.1880737f, -0.3055508f, -0.0361585f, -0.2457801f, +0.1090781f,
  -0.1383465f, +0.1685288f, -0.1277034f, -0.1094438f, -0.0888201f, -0.0299728f, +0.0473010f, -0.1268954f,
  -0.1571157f, -0.0376392f, -0.0630224f, +0.0381141f, +0.2487944f, -0.1291597f, -0.0217691f, +0.1219838f,
  +0.1111341f, -0.0517668f, +0.1948742f, -0.2590162f, -0.3493756f, -0.1256708f, +0.0853961f, +0.0723410f,
  +0.1684369f, +0.0648218f, -0.0444200f, +0.1939119f, -0.0922452f, -0.0685187f, +0.0107033f, -0.2748298f,
  -0.0316415f, +0.1381704f, -0.1227330f, -0.0657403f, +0.0686684f, -0.0378349f, -0.0566851f, -0.0538318f,
  -0.0560833f, +0.0460129f, +0.2269918f, +0.0547939f, -0.0832145f, -0.2554596f, +0.0142482f, +0.0013504f,
  -0.1902014f, +0.0082505f, -0.0114737f, -0.2303243f, -0.0244657f, +0.1804504f, +0.1796300f, +0.0722649f,
  -0.1833872f, -0.0642938f, -0.0059071f, +0.0389210f, -0.0356171f, -0.1192655f, +0.0496467f, -0.0060561f,
  +0.0827923f, -0.2356511f, +0.0941561f, -0.0647942f, +0.2614442f, +0.1191403f, -0.2258868f, +0.3406927f,
  +0.1459361f, +0.0910353f, +0.0870599f, -0.0599780f, +0.0603092f, +0.0689453f, -0.1089254f, -0.0242877f,
  +0.0107009f, +0.0702176f, -0.0482910f, -0.1708368f, +0.0739436f, -0.0027619f, -0.2613110f, +0.0958952f,
  -0.0406677f, -0.4085457f, -0.3824434f, -0.0547678f, -0.1012622f, +0.1614118f, -0.1001316f, +0.2424344f,
  -0.2657761f, -0.2022366f, +0.0681896f, -0.0520681f, +0.2614449f, +0.2418544f, +0.1956764f, +0.0678741f,
  -0.0280523f, -0.0960140f, -0.1361102f, +0.0582866f, +0.0211851f, +0.1072569f, -0.1360960f, +0.2868069f,
  +0.0305739f, -0.1877350f, -0.0503643f, +0.1181702f, +0.1484047f, -0.0938256f, +0.0397889f, -0.1614797f,
  +0.1843570f, +0.1597158f, +0.1532724f, +0.3032012f, +0.2801420f, +0.1662324f, +0.0163959f, -0.1631236f,
  +0.1872836f, +0.0638897f, +0.1438176f, +0.0716039f, -0.0706416f, +0.0742759f, -0.0353183f, -0.0921451f,
  -0.2515918f, +0.0945296f, -0.1792801f, +0.1467383f, -0.1438145f, +0.1344111f, -0.2229643f, +0.0363506f,
  -0.0332641f, -0.1820562f, +0.2720671f, +0.0632466f, -0.1406046f, -0.0205420f, -0.1148228f, -0.2298112f,
  +0.0898686f, -0.1975240f, +0.1849177f, +0.0183829f, -0.0142817f, -0.0096679f, +0.0048181f, +0.1495040f,
  +0.0096358f, -0.0368422f, -0.1014361f, +0.1467713f, -0.2439276f, -0.3907899f, +0.2529809f, -0.0468034f,
  -0.0365734f, +0.1518195f, -0.2029189f, -0.1066125f, -0.2986811f, +0.0146772f, +0.2065994f, +0.0418617f,
  -0.0617374f, +0.0939277f, +0.1778936f, +0.1869532f, +0.2708640f, +0.0915744f, +0.2344244f, -0.0242270f,
  +0.0195443f, -0.0015676f, -0.1048766f, +0.1375963f, +0.0381215f, -0.3615482f, -0.3128808f, +0.2200459f,
  -0.1247394f, -0.0680929f, -0.0392197f, -0.0277757f, -0.2246627f, -0.1665735f, +0.3928463f, +0.1892154f,
  +0.2193184f, -0.0103999f, +0.1658377f, +0.1991397f, -0.2711788f, -0.0532180f, -0.1336132f, +0.0428286f,
  -0.0328937f, +0.0603695f, -0.1869087f, -0.0508819f, -0.1414115f, +0.2316347f, +0.2431564f, +0.0524772f,
  +0.1835364f, +0.0318085f, +0.0329429f, +0.0174708f, -0.1858595f, -0.0630908f, +0.1816562f, +0.1262682f,
  -0.0256733f, -0.0613994f, -0.2551012f, +0.0369263f, -0.1820738f, -0.1135268f, -0.0463267f, +0.3536549f,
  -0.1373089f, +0.0264748f, +0.1022428f, -0.0402596f, -0.0538816f, +0.2817934f, -0.1213008f, +0.2806357f,
  +0.1766934f, -0.2802069f, +0.0244471f, -0.1878795f, -0.1254178f, +0.0361197f, +0.2188381f, -0.1480519f,
  -0.1595970f, +0.0587703f, -0.0274289f, -0.0154687f, -0.0047179f, -0.0880482f, -0.1407349f, +0.1280835f,
  +0.0384781f, +0.0821823f, +0.1769798f, +0.1576795f, +0.0054082f, -0.0294451f, +0.2444896f, +0.1116050f,
  +0.1232647f, +0.1245462f, +0.0008738f, +0.0123222f, -0.2043606f, -0.0144321f, -0.0086070f, -0.0419469f,
  +0.0542663f, -0.0282030f, -0.0695983f, -0.0081874f, -0.0407790f, +0.0045385f, -0.0265008f, -0.0377619f
);

const float biases[4] = float[4](
  +0.0261033f, +0.0665746f, +0.0727530f, +0.0210381f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer83 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0700732f, -0.0985806f, +0.0109034f, +0.0669059f, +0.0631255f, +0.0311391f, +0.0596188f, +0.0579501f,
  -0.0219867f, +0.3848950f, -0.0762138f, -0.2138550f, +0.2395828f, +0.0071014f, -0.0902981f, +0.2831981f,
  -0.0854865f, +0.1251727f, -0.0087132f, +0.0435227f, -0.0373468f, -0.1062324f, -0.0447442f, -0.2217878f,
  -0.2296549f, -0.0073929f, +0.1878700f, -0.0980943f, -0.2566881f, +0.2465428f, -0.0730529f, +0.2841454f,
  -0.2307968f, +0.0821009f, -0.1282006f, +0.0010561f, +0.1317649f, -0.1664438f, -0.2465474f, -0.0775783f,
  +0.1097822f, +0.0666465f, +0.3913575f, +0.0625970f, +0.3353442f, -0.3320074f, +0.3270805f, -0.2276261f,
  +0.0954066f, +0.1847551f, -0.0010256f, +0.2227165f, -0.0505644f, -0.0673984f, +0.0306930f, -0.2613772f,
  +0.1980838f, -0.4513158f, +0.1086727f, -0.4960013f, +0.0160462f, +0.1950219f, +0.1715963f, +0.2402469f,
  +0.0128518f, +0.0589659f, +0.0665863f, +0.4195379f, +0.0932991f, -0.1327806f, +0.2265709f, -0.0579565f,
  -0.1374900f, +0.1327701f, -0.0711324f, +0.3760240f, +0.1521385f, +0.1451153f, +0.1518776f, +0.0198088f,
  -0.1776658f, -0.0602546f, -0.0389599f, -0.1002014f, -0.0036250f, +0.0733510f, -0.2005139f, -0.1536577f,
  -0.1000268f, -0.1881687f, +0.2044138f, +0.2784707f, -0.2710212f, +0.1752836f, +0.0708684f, +0.2610602f,
  +0.0130447f, +0.1046709f, -0.1121475f, +0.0942254f, -0.0449526f, -0.1251093f, -0.1812482f, -0.2099798f,
  +0.1721065f, -0.2067096f, +0.0635198f, +0.1194685f, +0.1140563f, -0.0120271f, -0.1894668f, +0.0637129f,
  +0.3981468f, +0.0078358f, -0.2000774f, +0.1187764f, -0.0796996f, -0.0749102f, -0.1395234f, +0.1810922f,
  -0.0195150f, -0.0886764f, +0.1133072f, -0.0905899f, -0.1114742f, +0.2003509f, +0.2247916f, +0.0174292f,
  +0.0697069f, +0.0900851f, -0.0191609f, +0.2205328f, -0.0048249f, -0.2605416f, +0.1996811f, -0.1044886f,
  -0.0417889f, -0.1595276f, +0.1370788f, -0.1952401f, -0.1152698f, -0.0422509f, +0.2020494f, +0.0207753f,
  -0.1467668f, -0.3155017f, +0.0443349f, -0.1632126f, +0.2540517f, -0.2968502f, -0.1173329f, -0.0911127f,
  +0.1335335f, +0.0729784f, -0.0307934f, -0.3332669f, +0.0305949f, +0.0912216f, -0.0658179f, -0.1703731f,
  +0.1029647f, +0.0839951f, -0.1147950f, +0.0069103f, +0.0710291f, +0.2518461f, -0.0477576f, +0.1074055f,
  -0.3344820f, +0.0357466f, -0.0137755f, -0.0838381f, +0.2570868f, +0.1133433f, -0.1403159f, +0.2039724f,
  +0.2120950f, +0.0906173f, +0.0567832f, -0.2388922f, -0.0102179f, +0.2076525f, +0.0316031f, -0.0211790f,
  +0.0594925f, +0.1637994f, +0.0134884f, +0.0641355f, +0.1785783f, +0.0866732f, +0.1549039f, +0.3439352f,
  +0.0617554f, -0.0283731f, -0.1903208f, -0.1040708f, +0.1789507f, -0.0329006f, -0.1610772f, -0.1134107f,
  +0.1232072f, +0.3798510f, +0.2329707f, +0.2401833f, +0.2706701f, -0.2714278f, +0.1153902f, -0.4717808f,
  +0.1210943f, -0.1949656f, +0.0470215f, -0.0297501f, +0.2672959f, +0.1021361f, -0.0998510f, +0.0534145f,
  -0.0445674f, -0.1225154f, +0.2119512f, -0.2005533f, +0.0639275f, +0.2382265f, -0.0086021f, -0.0254254f,
  -0.2599576f, +0.2657640f, -0.1003850f, -0.0497687f, -0.0560604f, +0.0053950f, -0.0065534f, +0.0337678f,
  -0.1071230f, +0.0515530f, -0.0056795f, -0.1481696f, -0.1445576f, +0.3882752f, +0.1677740f, +0.2265780f,
  -0.2469863f, +0.0173369f, +0.0531144f, +0.0733223f, -0.1175045f, -0.2213150f, -0.0809367f, -0.1406411f,
  -0.1026870f, +0.0682450f, +0.1033351f, -0.0996039f, -0.0771784f, -0.0220252f, -0.1244321f, -0.0418181f,
  -0.0660284f, +0.0333550f, -0.0643116f, -0.3851912f, -0.1287992f, -0.1149878f, -0.3309345f, +0.2777013f,
  +0.2184574f, +0.0469903f, -0.0555886f, -0.0284791f, -0.0883980f, -0.1538723f, -0.0686655f, -0.0532418f,
  +0.1775071f, -0.0475535f, +0.0222717f, +0.1050119f, +0.3153660f, -0.4711665f, -0.0835026f, -0.0599020f,
  +0.1138605f, +0.1742675f, -0.1960426f, +0.0532759f, -0.0605398f, -0.0530372f, -0.0918410f, -0.2058608f
);

const float biases[4] = float[4](
  -0.0103867f, +0.0318320f, +0.0160889f, +0.0090346f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer84 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.3020951f, -0.1727184f, -0.1302952f, -0.0691330f, +0.0733961f, +0.0155950f, +0.1809982f, +0.0091830f,
  +0.0674593f, -0.0753434f, -0.1182128f, -0.1180803f, +0.0207385f, +0.0407928f, -0.0643096f, -0.1359204f,
  -0.0171122f, -0.1010437f, +0.0215799f, +0.2152854f, -0.2115476f, -0.0200740f, -0.1266678f, -0.0202207f,
  +0.0467314f, -0.2332160f, +0.2228568f, +0.1117948f, -0.2807090f, -0.1301582f, -0.1534606f, +0.0374744f,
  -0.1506337f, -0.0549859f, +0.2227201f, -0.0324453f, -0.2038078f, -0.2057083f, +0.0428522f, +0.2290849f,
  +0.0880516f, +0.0371170f, -0.0878533f, -0.1245867f, +0.2031238f, +0.1352254f, +0.2861209f, -0.0208668f,
  +0.0009974f, +0.0563847f, -0.0401426f, +0.0868126f, +0.0199614f, +0.2023382f, -0.0827628f, -0.3042409f,
  -0.0615720f, -0.1079445f, +0.0338435f, +0.0107542f, -0.1537200f, +0.1389224f, +0.0118394f, +0.1279050f,
  -0.0266752f, -0.1067814f, +0.2021888f, -0.1764012f, +0.0103319f, +0.0065261f, +0.0473602f, +0.0753752f,
  +0.0619568f, -0.0490627f, +0.2451193f, -0.1992742f, -0.0998403f, -0.0120225f, +0.1517930f, -0.2046507f,
  -0.0743443f, +0.0329146f, +0.0679063f, +0.0075758f, +0.0951464f, -0.0288615f, -0.1379780f, +0.0656311f,
  -0.0238712f, +0.0951441f, -0.0124078f, -0.1671550f, +0.0419840f, +0.0546111f, -0.0380406f, +0.0817107f,
  -0.1172163f, +0.0487967f, +0.0712476f, -0.0575847f, -0.3338697f, -0.2157451f, -0.3107819f, +0.1188133f,
  -0.2703421f, -0.0303332f, -0.2781934f, +0.3887328f, +0.0998572f, -0.1625269f, -0.0490075f, -0.1190422f,
  -0.0071792f, -0.0697164f, +0.2361514f, -0.1539991f, +0.0788055f, -0.1866663f, -0.0073211f, -0.0894407f,
  +0.0069986f, +0.0167394f, +0.1163309f, +0.3151493f, -0.0651045f, +0.1505870f, -0.0514402f, +0.1974453f,
  +0.0762426f, +0.0797884f, +0.2040457f, +0.0800055f, +0.0588608f, -0.0411896f, +0.0989789f, +0.1359030f,
  +0.0001747f, +0.3390929f, +0.1863317f, -0.1178388f, -0.0805308f, +0.0017642f, -0.1858268f, +0.0001225f,
  +0.2332732f, +0.0437671f, +0.0239866f, +0.0469072f, -0.2420755f, +0.0261660f, -0.0806646f, +0.0410514f,
  -0.0978092f, -0.1117330f, +0.0172142f, +0.0594612f, +0.1516676f, +0.0678417f, +0.0031843f, -0.0207060f,
  -0.1287694f, -0.3048545f, +0.0899420f, -0.0390007f, -0.1324132f, +0.0168197f, -0.1114337f, -0.0440029f,
  +0.5153814f, -0.0450585f, -0.0139877f, -0.1447561f, +0.0556528f, +0.0624456f, -0.0873563f, +0.1135366f,
  -0.3280241f, +0.0806608f, -0.0520799f, +0.2004585f, -0.5084707f, -0.1534674f, +0.0295138f, -0.3113328f,
  +0.0169317f, -0.1527953f, -0.0063073f, -0.0210747f, -0.2421314f, +0.1742496f, +0.0932271f, -0.3429546f,
  +0.1428987f, +0.0220579f, -0.0312236f, -0.0575257f, -0.2156015f, -0.0029439f, +0.2100873f, +0.1060288f,
  -0.0951530f, +0.0327382f, -0.1735792f, -0.2671590f, -0.1042534f, -0.1542057f, +0.1824499f, +0.2925973f,
  +0.1002178f, -0.0445129f, +0.0723607f, +0.3039537f, +0.0588977f, +0.1379654f, +0.0599034f, +0.0016268f,
  +0.1670054f, +0.3233875f, +0.1030890f, -0.0947874f, -0.1241064f, +0.0611564f, +0.1938803f, +0.1039440f,
  +0.2582406f, +0.3997829f, +0.1961526f, +0.0556662f, +0.1136437f, -0.2198137f, +0.1258073f, +0.0993577f,
  -0.1697110f, +0.1384013f, +0.2215151f, +0.0436182f, +0.0107285f, +0.1346244f, +0.1533991f, +0.1896816f,
  -0.0312633f, -0.1144877f, +0.0579024f, -0.0816751f, +0.0925064f, -0.0244701f, +0.0213550f, +0.1244431f,
  -0.2014452f, -0.1213989f, -0.2195123f, -0.0596870f, -0.1189130f, -0.1887975f, +0.1655656f, -0.0436511f,
  +0.1149393f, -0.2369212f, -0.1401549f, +0.1480073f, -0.2289810f, +0.0709325f, -0.0167412f, +0.0096438f,
  +0.0893477f, +0.0239133f, +0.0037387f, +0.0427635f, -0.1058626f, +0.0759133f, -0.2456861f, +0.1109780f,
  +0.0615864f, -0.0127022f, +0.1848283f, -0.1294579f, -0.2122118f, -0.1397162f, +0.1950967f, +0.0520735f,
  +0.0202201f, -0.0115534f, -0.2814344f, +0.1326918f, -0.0215095f, -0.0867369f, -0.1334431f, +0.0931212f
);

const float biases[4] = float[4](
  +0.0153958f, -0.0276152f, +0.0024076f, +0.0052412f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer84 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0749986f, -0.0408997f, +0.2600207f, +0.0661817f, -0.2068145f, +0.0012713f, +0.2497032f, -0.0147152f,
  +0.0403674f, +0.0001886f, +0.0035525f, +0.0523226f, -0.0027078f, +0.0201238f, -0.1213595f, -0.3217726f,
  -0.0121494f, -0.0465654f, -0.0670540f, -0.0180630f, +0.0892319f, -0.0536967f, -0.1102563f, -0.1066796f,
  +0.0709142f, -0.0752716f, -0.2045553f, +0.0502482f, -0.1567011f, -0.1873322f, +0.0174152f, -0.1139247f,
  +0.0978739f, -0.3088424f, +0.0085658f, +0.2803922f, +0.1305566f, -0.1224750f, +0.0782649f, -0.0343425f,
  -0.0248282f, -0.1464448f, +0.0665229f, +0.2254978f, -0.0083566f, -0.0376894f, -0.1817089f, -0.0890208f,
  -0.1743402f, +0.0470047f, -0.0636469f, +0.1596433f, -0.0218635f, +0.0116790f, -0.1549665f, +0.0589068f,
  -0.0640419f, +0.1018623f, +0.3740960f, -0.2948246f, -0.0211474f, +0.0360107f, +0.0915221f, -0.0299751f,
  +0.3493589f, -0.1020730f, -0.0707877f, +0.0788602f, +0.0265605f, -0.1452828f, -0.0407672f, -0.1050186f,
  +0.0858061f, -0.0468396f, +0.0453444f, -0.0579168f, -0.1145236f, -0.0352044f, -0.1046827f, +0.0202441f,
  -0.0822542f, -0.2575482f, +0.1862286f, -0.0996530f, -0.0678947f, -0.1444248f, -0.1106530f, -0.2761797f,
  +0.1230196f, -0.0905794f, +0.3201853f, +0.2120123f, +0.0798533f, -0.0834481f, -0.0239166f, -0.1362239f,
  -0.1897644f, -0.3409469f, +0.0375563f, +0.0886595f, +0.2777755f, -0.0987473f, +0.2218750f, -0.0277569f,
  +0.0752370f, -0.4245423f, +0.3528193f, +0.0208260f, -0.3820092f, -0.1635334f, -0.1052603f, +0.0350084f,
  +0.0061902f, +0.1071852f, +0.2232576f, -0.1428230f, +0.0391941f, -0.0730708f, +0.4758027f, +0.2870152f,
  +0.1554337f, +0.0281563f, -0.0467215f, +0.0208692f, +0.1510843f, +0.1661342f, -0.2448021f, -0.0177300f,
  +0.3266228f, -0.1117211f, -0.1283862f, +0.0121563f, -0.1002240f, +0.0235491f, -0.2589198f, -0.0588390f,
  -0.1656075f, +0.1409267f, +0.0156992f, -0.3003784f, +0.1556592f, -0.0283758f, +0.1486597f, +0.1451024f,
  +0.2175516f, +0.0234768f, -0.1740105f, +0.0896582f, -0.0386393f, +0.1109655f, +0.0928869f, -0.0109328f,
  -0.2072105f, +0.0354039f, -0.0478338f, -0.0563573f, +0.3798298f, -0.1047043f, -0.4747070f, -0.2694410f,
  +0.0675230f, -0.1913379f, +0.0273997f, -0.0414753f, -0.0411468f, -0.1212024f, +0.4246707f, +0.0799143f,
  +0.0696479f, +0.2651697f, -0.2372221f, +0.1936982f, -0.0017684f, -0.0449322f, +0.1485163f, +0.4127413f,
  -0.0640713f, +0.2711346f, +0.4120034f, +0.0502086f, +0.4317434f, -0.1477318f, -0.0616544f, -0.0603496f,
  -0.1940231f, +0.3469772f, +0.2314941f, +0.2120269f, +0.1679408f, +0.2669608f, +0.2257325f, +0.0937725f,
  +0.0579818f, +0.0107071f, -0.1087876f, -0.1166643f, +0.4309233f, +0.1443506f, -0.0387832f, +0.1259930f,
  +0.1087204f, +0.0079670f, +0.0283951f, -0.1398369f, +0.1095534f, +0.0725285f, -0.0746651f, +0.1417006f,
  -0.0741541f, +0.0168456f, -0.3552012f, -0.1189789f, -0.1284245f, -0.0804727f, +0.3639252f, +0.1226393f,
  -0.2758032f, -0.1379009f, -0.0711741f, +0.1554344f, -0.0828456f, -0.1000587f, -0.1809458f, +0.0089544f,
  -0.1729893f, -0.2160174f, +0.2293442f, +0.1449277f, +0.0234703f, -0.0759098f, +0.0086462f, -0.2115322f,
  -0.0189081f, -0.0909721f, -0.1596917f, +0.0344647f, +0.0784166f, -0.0431892f, +0.2761839f, +0.1335006f,
  -0.0144734f, -0.1671471f, -0.3236813f, -0.0447033f, -0.2631196f, -0.0460277f, +0.1638820f, -0.1009113f,
  +0.3546969f, -0.5224180f, +0.0185952f, -0.0103156f, -0.5888399f, -0.3490196f, -0.2193402f, -0.1249256f,
  -0.3315545f, +0.0797093f, +0.0337772f, -0.3507880f, +0.1487387f, +0.1107495f, -0.0241035f, -0.1631876f,
  -0.2323554f, -0.0514296f, +0.0283248f, -0.1176625f, -0.1776791f, +0.1030857f, -0.2217793f, -0.1005894f,
  +0.0471803f, -0.0272881f, +0.4910389f, -0.3762529f, +0.0954331f, +0.2854874f, -0.1633247f, +0.1400230f,
  +0.1564053f, -0.2224183f, +0.0513715f, -0.0189014f, +0.3068551f, -0.0051096f, +0.2415206f, +0.3321362f
);

const float biases[4] = float[4](
  -0.0070572f, +0.0150178f, -0.0148774f, -0.0131305f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer85 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0309428f, +0.0784505f, -0.0974811f, +0.0789467f, -0.0224466f, +0.1124319f, -0.0999072f, -0.1922259f,
  -0.1923393f, -0.0242424f, -0.0525354f, +0.2318178f, -0.0743317f, -0.0467266f, -0.0216519f, -0.2163198f,
  -0.1079714f, +0.0742517f, +0.0171846f, +0.1485950f, -0.0080036f, +0.0033525f, -0.1499076f, -0.0941856f,
  -0.1133546f, +0.1585531f, -0.1038558f, -0.2765794f, +0.0613748f, -0.2943357f, +0.4191508f, -0.0361493f,
  -0.0211561f, -0.0992831f, +0.2339249f, -0.3837734f, +0.1914738f, -0.2159021f, -0.1115143f, +0.1470957f,
  -0.0306022f, -0.0504963f, -0.0690826f, -0.2443283f, +0.1166276f, -0.2056084f, -0.0397906f, -0.1622948f,
  -0.0437139f, -0.2782199f, -0.4373924f, +0.1096185f, +0.1182524f, +0.0364707f, -0.1588501f, -0.0628759f,
  -0.1009108f, -0.2123469f, -0.5192927f, -0.1818784f, +0.0601838f, +0.1118432f, +0.1901941f, -0.1872761f,
  -0.0275513f, +0.0797830f, -0.0618919f, +0.0672234f, -0.1699735f, +0.3689017f, -0.0692550f, -0.1322853f,
  -0.2458145f, +0.3452518f, +0.1723404f, -0.1856724f, +0.1667680f, -0.2258444f, +0.1631602f, -0.1881821f,
  +0.0670416f, -0.2743752f, +0.2947308f, +0.0963180f, -0.0789483f, -0.0488083f, +0.2957906f, -0.0407497f,
  -0.0365099f, -0.0491706f, +0.1248193f, +0.1556895f, -0.0967744f, -0.1854868f, -0.1221556f, +0.1319380f,
  +0.0720772f, -0.1891433f, +0.0966220f, +0.0894649f, -0.1298268f, +0.2092294f, -0.0722346f, -0.3805102f,
  -0.1391118f, -0.3151698f, -0.3689159f, -0.0054845f, -0.1209745f, +0.1045552f, -0.2154461f, +0.1600204f,
  +0.0758169f, -0.0186119f, +0.0905653f, +0.0490912f, -0.0576091f, +0.2101949f, -0.2124872f, +0.0259672f,
  +0.1025733f, -0.3934054f, +0.2939437f, -0.4210144f, +0.2767940f, -0.5064374f, +0.4442027f, -0.0182828f,
  +0.1182532f, -0.0341160f, -0.1415952f, -0.2189416f, +0.0448173f, -0.4008763f, +0.1085955f, +0.3375323f,
  +0.1113661f, -0.0246199f, +0.0264726f, -0.1407845f, -0.1878336f, +0.0531993f, +0.1552407f, +0.0119124f,
  -0.1863147f, +0.0703499f, +0.0469741f, +0.1437340f, -0.1506681f, +0.0752870f, -0.0592626f, +0.4431073f,
  -0.0964958f, +0.1233159f, -0.0463129f, +0.0705480f, +0.1069772f, +0.0825024f, -0.2242486f, -0.0896613f,
  +0.0400536f, +0.1432323f, +0.1254445f, +0.0201755f, -0.1533716f, -0.0817464f, +0.0025634f, -0.1150415f,
  +0.1083151f, -0.0074341f, +0.0787864f, +0.1731471f, -0.0179292f, +0.2187129f, +0.0982300f, -0.0148441f,
  -0.2415987f, -0.4920623f, +0.0185948f, -0.5126444f, +0.3719213f, -0.2224384f, -0.1813604f, -0.1924580f,
  +0.2594599f, -0.2071849f, -0.1774158f, -0.1483432f, +0.1454138f, -0.0258570f, -0.2417397f, -0.0060932f,
  +0.1598803f, -0.5375693f, +0.2851150f, +0.0116431f, +0.0715960f, -0.2569107f, -0.3630370f, -0.2563158f,
  +0.1643430f, -0.1824648f, -0.1321626f, -0.2710899f, +0.1362870f, -0.4891390f, +0.0458006f, -0.2491764f,
  -0.0845722f, -0.0310184f, -0.0688906f, -0.0975051f, +0.2544928f, +0.1598226f, +0.0413863f, +0.2859145f,
  -0.0147769f, +0.0311664f, -0.0954678f, -0.1678651f, -0.1407470f, -0.0822372f, +0.0312744f, -0.1416158f,
  -0.0556650f, -0.2347810f, -0.0132370f, -0.2216759f, +0.1812225f, +0.1799676f, -0.0765768f, +0.1658594f,
  -0.1406770f, +0.2296533f, -0.1110275f, +0.1213408f, +0.0053428f, +0.1341171f, -0.1631981f, +0.1853722f,
  +0.2545899f, -0.1631023f, +0.0363401f, -0.0473077f, -0.0069766f, -0.1535697f, -0.0925199f, -0.1069576f,
  -0.0783759f, -0.2505413f, +0.0935713f, -0.2571541f, -0.1369807f, -0.1062686f, -0.4338709f, +0.0514495f,
  +0.0496178f, +0.1525475f, -0.3859304f, +0.0798273f, -0.0253932f, -0.0255464f, -0.1399156f, +0.0819358f,
  -0.0248577f, -0.1475038f, +0.0882454f, +0.1212432f, +0.1729015f, +0.0721715f, +0.0765589f, +0.2216615f,
  +0.1607276f, +0.1542795f, -0.3208582f, -0.0565289f, -0.1611206f, -0.0771120f, -0.4637181f, -0.2078058f,
  -0.0725875f, +0.2113092f, -0.1533621f, -0.0961834f, +0.0716730f, -0.1780488f, -0.0166234f, +0.2907902f
);

const float biases[4] = float[4](
  -0.0221966f, -0.0141018f, +0.0522185f, +0.0383278f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer85 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1325875f, -0.0904974f, +0.1700498f, -0.3675821f, +0.0285483f, -0.0514039f, +0.1530526f, +0.0891046f,
  +0.1869244f, +0.0482708f, -0.0759101f, +0.1911027f, +0.1932520f, +0.1850055f, +0.5917348f, -0.2037118f,
  +0.0746411f, -0.0745292f, -0.2997242f, +0.1302420f, +0.0093042f, +0.2235911f, +0.3919221f, +0.1378269f,
  -0.0834723f, -0.0400178f, +0.0905256f, +0.1235337f, -0.3335662f, -0.1084702f, +0.0045238f, -0.1776467f,
  -0.2458450f, -0.2511207f, -0.2283044f, -0.2380988f, +0.1679697f, +0.0263621f, +0.0873612f, +0.0168762f,
  -0.2056077f, -0.1364895f, -0.2037485f, -0.0111508f, +0.2379663f, -0.1312912f, +0.0731860f, +0.1756692f,
  -0.0808862f, +0.2075004f, -0.0135104f, +0.1660091f, +0.0917042f, +0.1989779f, -0.1137068f, +0.1099526f,
  +0.1320669f, +0.1978358f, -0.1363175f, -0.0007386f, +0.1403671f, -0.0017255f, -0.0123707f, -0.1170982f,
  -0.1716463f, -0.0916049f, -0.0542030f, -0.0137032f, +0.0303090f, -0.0049368f, -0.1169619f, +0.0724554f,
  -0.0301449f, +0.1315662f, +0.1396294f, -0.1645288f, +0.0168059f, +0.0296814f, +0.2374418f, -0.0996687f,
  -0.0295386f, +0.2772228f, +0.1306963f, -0.1737913f, -0.2414335f, -0.0713082f, +0.2016397f, -0.0665295f,
  -0.0854671f, -0.2569816f, +0.0009283f, +0.0574166f, +0.0007803f, -0.1831570f, +0.1246857f, -0.3039136f,
  -0.0586620f, -0.0249106f, -0.0267239f, -0.0317666f, +0.2120478f, -0.1018447f, +0.0961921f, +0.2536053f,
  -0.2001539f, -0.1832714f, -0.0532829f, +0.1158774f, -0.1842079f, +0.3415252f, -0.0975758f, +0.0738302f,
  -0.0467054f, +0.1015619f, -0.2451504f, +0.1677566f, +0.0868246f, +0.0565828f, -0.2050903f, +0.1166419f,
  +0.1134493f, -0.0142040f, +0.1083885f, -0.0316783f, -0.0001582f, -0.0808723f, -0.3603036f, -0.2018624f,
  +0.1792531f, +0.1923991f, +0.1289140f, +0.3698603f, -0.2364134f, -0.0361441f, -0.0508762f, -0.0585491f,
  +0.1583588f, +0.2233116f, +0.1540369f, -0.0449261f, +0.0889148f, -0.0769770f, +0.0539311f, +0.0009604f,
  -0.0482154f, +0.1709021f, -0.0221702f, -0.1551993f, +0.0062946f, +0.2464669f, +0.0267571f, +0.1943615f,
  +0.1053673f, -0.0056290f, -0.1074277f, +0.1250631f, -0.0981056f, -0.0120530f, +0.2410882f, +0.0449231f,
  -0.0839341f, +0.0037097f, +0.0517237f, +0.0503885f, +0.0630077f, +0.0412904f, +0.1262268f, +0.1279640f,
  -0.3178505f, +0.3420006f, +0.1721587f, -0.0871702f, +0.1816111f, -0.1677923f, +0.0577973f, +0.0790346f,
  +0.2753410f, +0.0777385f, -0.0728597f, -0.2776495f, -0.3295538f, +0.1222368f, +0.1841876f, +0.3577132f,
  -0.0163878f, -0.1450127f, -0.2394182f, -0.4073120f, -0.1746210f, -0.0951500f, +0.0991987f, +0.1106307f,
  +0.0634435f, -0.0300473f, -0.0825688f, +0.0816444f, +0.0543274f, +0.0487923f, -0.0202182f, +0.0137107f,
  -0.1327401f, +0.0812292f, -0.1546801f, +0.1345174f, +0.0323166f, -0.0696254f, -0.4973868f, -0.3140826f,
  +0.0584082f, +0.1305669f, +0.0058441f, +0.0659827f, +0.1652018f, +0.3685543f, -0.0100380f, +0.0001046f,
  +0.0388783f, +0.0954056f, -0.0552661f, +0.1393557f, -0.0425034f, +0.1209740f, -0.0506587f, +0.0151847f,
  +0.2467483f, -0.0383595f, +0.1800898f, +0.0455071f, -0.3273692f, +0.0515444f, +0.0579022f, -0.0007673f,
  -0.1174224f, +0.0242390f, +0.0714221f, +0.0914604f, +0.0310248f, -0.2215192f, -0.0110374f, +0.0242152f,
  +0.1152983f, +0.1285019f, -0.4182414f, +0.0562203f, -0.2139800f, -0.0490844f, +0.0727962f, +0.0539927f,
  +0.0828537f, -0.2549739f, -0.1571423f, +0.0469962f, -0.1168321f, +0.0260481f, -0.0214984f, +0.4309130f,
  -0.0910723f, -0.0627701f, +0.2826543f, +0.0274212f, -0.4379610f, -0.2498284f, -0.0870816f, +0.1951151f,
  -0.2589408f, +0.0518921f, -0.0560862f, +0.3215521f, -0.0798432f, +0.0816505f, +0.1637623f, -0.0609826f,
  +0.0705945f, -0.2369783f, +0.0099852f, -0.1381113f, +0.0536943f, +0.1412263f, +0.0759767f, +0.0603869f,
  +0.2299611f, -0.0177957f, -0.0889042f, +0.1653826f, -0.1585113f, -0.1208442f, -0.0149987f, -0.1327977f
);

const float biases[4] = float[4](
  -0.0309806f, -0.0040093f, -0.0084618f, +0.0586574f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer86 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1662712f, -0.1350871f, -0.0291492f, +0.0231758f, +0.0055498f, -0.2226518f, -0.0468076f, -0.1519767f,
  +0.2014137f, +0.0648707f, -0.0595426f, -0.1484882f, +0.1264705f, -0.1534187f, +0.0077544f, +0.0893114f,
  +0.1500879f, +0.0257304f, -0.2836489f, -0.0804443f, +0.0384540f, -0.0786812f, +0.0151840f, -0.1452914f,
  -0.2418897f, -0.0118201f, -0.0427989f, +0.1289134f, -0.0281987f, -0.1229425f, -0.1065012f, -0.0092767f,
  -0.0955089f, -0.0515968f, +0.3323017f, +0.0230157f, +0.0601646f, -0.0752714f, -0.2332076f, +0.1565213f,
  -0.1836381f, -0.2228963f, -0.0092262f, -0.1052115f, -0.0722329f, -0.0025733f, +0.1130103f, +0.0604681f,
  -0.0246177f, +0.2059424f, -0.0788051f, -0.1078737f, -0.0752625f, +0.1494473f, +0.0476165f, -0.0877065f,
  -0.0188253f, -0.2738396f, +0.0661074f, -0.0081039f, -0.2204805f, +0.1235471f, -0.1398691f, -0.1287733f,
  -0.0106459f, +0.4528557f, -0.1504937f, +0.0908411f, +0.2472680f, +0.0734259f, -0.0216908f, -0.1007221f,
  +0.0209236f, -0.0737829f, -0.1870293f, -0.0494098f, +0.2556943f, +0.1188686f, +0.1538316f, +0.1395386f,
  +0.1089974f, -0.0550427f, -0.0461535f, +0.0168301f, -0.3681493f, -0.2015795f, +0.1855434f, +0.1451880f,
  +0.1756001f, +0.0157411f, +0.2564774f, -0.1666174f, -0.0846832f, -0.1910338f, -0.0133012f, -0.0894652f,
  -0.0130905f, -0.1355535f, +0.0477705f, -0.1731197f, -0.1906434f, -0.1260667f, +0.1202888f, -0.1966025f,
  -0.0069056f, -0.0839003f, -0.2583725f, +0.0627550f, -0.0588549f, -0.0190328f, -0.0047962f, -0.0233329f,
  +0.0305836f, +0.0971212f, +0.2599957f, +0.1691659f, +0.0128161f, +0.1362644f, -0.2477599f, -0.1448591f,
  +0.2279889f, -0.1062673f, -0.1757580f, +0.1021701f, -0.0320418f, +0.0470917f, +0.0426319f, -0.0658606f,
  -0.1057401f, +0.2146438f, -0.1264635f, +0.3373094f, -0.3092085f, +0.0794713f, -0.2118262f, +0.3291841f,
  +0.0822724f, -0.3096358f, -0.0258664f, -0.0045109f, +0.0030201f, -0.0514843f, -0.1712515f, -0.1947486f,
  -0.2597068f, +0.1651240f, -0.0245739f, +0.2017415f, +0.1633311f, -0.2290442f, +0.1265736f, +0.1527639f,
  -0.4336649f, +0.1035724f, -0.0390545f, +0.2598917f, +0.1496751f, -0.0240567f, +0.0796357f, -0.2398375f,
  -0.1592942f, +0.0376683f, +0.0668305f, -0.0224817f, +0.1693853f, +0.0320843f, +0.2667210f, +0.2206528f,
  -0.0837032f, -0.2387378f, +0.1437706f, +0.3914378f, -0.0057677f, +0.1026890f, +0.2241423f, -0.2733642f,
  -0.1188601f, -0.0574007f, -0.1244460f, -0.1819065f, +0.0759038f, +0.1797881f, -0.0855110f, +0.2458905f,
  -0.0031639f, -0.1266521f, -0.0294275f, -0.2570113f, -0.0851879f, -0.0095585f, -0.0550295f, +0.1269215f,
  -0.0040467f, +0.0930227f, -0.1351141f, -0.1908346f, -0.1344028f, +0.0885549f, -0.0210501f, -0.0298117f,
  +0.0002605f, +0.0366548f, -0.0153232f, -0.0516403f, +0.0174678f, -0.0125501f, -0.2602865f, -0.2916941f,
  +0.0258552f, +0.0021563f, -0.0432980f, -0.0371129f, -0.2906806f, -0.1557637f, -0.0756771f, -0.2270548f,
  -0.0379951f, +0.0354167f, +0.1184328f, +0.1100662f, -0.0126100f, -0.1063989f, -0.1062185f, +0.2555996f,
  +0.4772611f, -0.0906662f, +0.5389177f, +0.1592818f, +0.0585732f, +0.0066128f, +0.0005437f, -0.0095190f,
  +0.0435672f, -0.0948083f, -0.0599352f, -0.0408887f, +0.0018380f, +0.1521368f, -0.0293581f, -0.3313276f,
  -0.0188010f, -0.1467744f, +0.0513707f, +0.1167814f, -0.1886483f, -0.0519328f, +0.0843072f, +0.3796381f,
  -0.5174760f, +0.2171360f, -0.0531006f, +0.0165883f, +0.2219395f, -0.1134557f, +0.0327921f, +0.0940683f,
  +0.0506707f, -0.0136475f, -0.2916238f, -0.1022465f, +0.0216634f, +0.0975090f, +0.0852411f, -0.1659137f,
  +0.0694660f, +0.1806299f, -0.1765472f, -0.1011753f, -0.2170105f, +0.2498540f, +0.1664778f, -0.0265798f,
  +0.0962271f, +0.1978149f, +0.2300678f, +0.0896367f, -0.0230639f, +0.1974885f, +0.0710822f, -0.2059892f,
  -0.0811005f, +0.2459477f, +0.0320761f, -0.1512109f, +0.1897292f, +0.0475495f, -0.0806171f, -0.1416757f
);

const float biases[4] = float[4](
  +0.0072670f, -0.0157057f, +0.0337143f, +0.0386684f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer86 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0325053f, +0.0066687f, +0.0291561f, +0.2016162f, +0.1727998f, +0.0213282f, -0.0218530f, -0.1935306f,
  -0.0817071f, -0.0584714f, -0.0609890f, +0.2240932f, -0.2569188f, +0.0326568f, -0.1192441f, +0.0944084f,
  +0.1195572f, -0.0240733f, +0.1196107f, -0.0243889f, +0.0152583f, +0.0592149f, -0.1207137f, +0.0267775f,
  +0.0446547f, +0.0884427f, -0.0171402f, -0.2135132f, -0.2268493f, -0.2577506f, +0.0975727f, -0.1349264f,
  +0.2340686f, -0.1198302f, -0.4370014f, +0.0292569f, -0.2703553f, -0.0236796f, +0.1594278f, -0.0353037f,
  -0.1431729f, +0.1398964f, +0.1202622f, +0.1960313f, +0.0857607f, -0.1204163f, -0.0074852f, +0.1561973f,
  +0.1148821f, -0.1291673f, -0.1539031f, +0.1941835f, +0.0112398f, -0.1391914f, +0.0318049f, -0.1176946f,
  +0.0497317f, -0.2201676f, +0.1349142f, -0.0827410f, +0.1386320f, -0.1051175f, -0.1596071f, +0.2972599f,
  +0.0383639f, -0.1731384f, +0.1260293f, +0.0851108f, +0.4480688f, +0.0152868f, -0.0205971f, +0.1310421f,
  +0.1096812f, -0.1353624f, +0.0656026f, -0.2007942f, +0.0090326f, +0.0135886f, -0.1052911f, +0.0384393f,
  -0.3543589f, +0.1962426f, +0.3552034f, -0.0833323f, +0.1377866f, +0.0427348f, -0.1289075f, -0.3141288f,
  +0.2432954f, -0.0847000f, -0.1273823f, +0.0198938f, -0.0870332f, -0.2449538f, +0.0741893f, +0.1557861f,
  +0.0362646f, -0.2470255f, +0.0869725f, -0.1466561f, -0.1092604f, +0.1075511f, -0.1990639f, -0.0574469f,
  -0.2069583f, +0.1492918f, -0.1475699f, -0.0935182f, -0.2807282f, +0.1503011f, +0.0831160f, +0.0776036f,
  -0.1928980f, +0.0072768f, -0.0906428f, -0.0508262f, +0.0769325f, -0.0704420f, +0.0137056f, -0.0091743f,
  +0.0485950f, +0.2394571f, +0.1670862f, -0.3187629f, +0.0645233f, +0.1109470f, +0.0638538f, +0.0100172f,
  +0.0146306f, +0.0651322f, -0.0448538f, -0.1030663f, -0.1242063f, -0.0707248f, +0.1166442f, -0.1402145f,
  +0.0239413f, -0.2214861f, -0.0097613f, -0.0792082f, +0.1042801f, +0.0345463f, +0.0557840f, -0.0067826f,
  -0.1363835f, +0.1623150f, -0.0285113f, +0.1165025f, -0.0554215f, +0.0209529f, -0.2578679f, +0.0742753f,
  +0.0551421f, +0.0803092f, -0.0565005f, +0.0196714f, -0.2610104f, -0.1596450f, +0.0345480f, -0.0322664f,
  -0.1146871f, +0.5272087f, +0.2391918f, -0.0524886f, -0.0616141f, +0.2695061f, -0.1588146f, -0.0093172f,
  +0.2662874f, -0.2937554f, +0.2322246f, -0.0416125f, -0.0247397f, +0.1069914f, +0.3336861f, +0.2061225f,
  +0.1828423f, +0.1848248f, +0.3706337f, +0.3535052f, +0.1904580f, +0.0533418f, -0.0081272f, +0.0717519f,
  +0.2319041f, +0.1909554f, +0.0892663f, +0.1055887f, -0.1202996f, +0.1679138f, +0.2764967f, -0.0370358f,
  +0.0889867f, -0.1630733f, -0.1833257f, +0.1297209f, +0.0879738f, -0.0172435f, +0.0515558f, +0.0216686f,
  +0.0704074f, +0.0375410f, -0.2966668f, +0.4230449f, -0.1140967f, -0.0786800f, -0.2333323f, -0.0516801f,
  +0.0041713f, -0.1030067f, +0.1427810f, +0.1907026f, -0.0384126f, -0.0930715f, -0.0671417f, -0.1273597f,
  +0.0924903f, -0.0261909f, -0.1042448f, -0.2009358f, -0.2412756f, -0.0149330f, +0.0829064f, +0.1091784f,
  -0.1647390f, +0.1330289f, +0.2113157f, -0.0350322f, +0.0676950f, +0.0752794f, -0.0184610f, +0.0930138f,
  -0.0333602f, -0.0855240f, +0.1753404f, -0.0924384f, +0.2075604f, +0.0946089f, -0.0621524f, -0.2271339f,
  +0.0159785f, -0.3155566f, -0.1272465f, -0.0207233f, -0.0978725f, -0.3423414f, +0.0909381f, -0.2098635f,
  +0.0455862f, -0.0988059f, -0.2084930f, -0.1168796f, -0.0402184f, +0.0011394f, -0.0486157f, -0.4919272f,
  +0.0552269f, -0.0500016f, +0.0595158f, -0.1136556f, +0.0372544f, +0.0923166f, -0.0006745f, +0.0032627f,
  +0.0574783f, +0.0278738f, -0.2059698f, -0.0076380f, -0.2911873f, -0.0973492f, +0.0305899f, -0.0833374f,
  +0.0297358f, -0.2986494f, +0.0497901f, +0.0442880f, +0.0400627f, -0.0155807f, -0.2097602f, -0.1199570f,
  -0.0158439f, -0.1375277f, +0.1429711f, +0.2370909f, -0.0826610f, -0.0803533f, -0.0052927f, +0.0544466f
);

const float biases[4] = float[4](
  -0.0067076f, +0.0162788f, -0.0240217f, -0.0343636f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer87 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2724486f, -0.0164024f, -0.3635213f, -0.0352001f, +0.0030808f, +0.2263541f, -0.2162202f, +0.2498220f,
  +0.0087295f, +0.1768246f, -0.2349500f, +0.3054933f, -0.0834688f, +0.4834041f, -0.0515006f, +0.1174874f,
  +0.1140371f, +0.0453519f, +0.3243811f, -0.2131950f, -0.2528504f, +0.0528914f, -0.1204972f, -0.1895981f,
  +0.0588061f, +0.1323142f, +0.2251911f, -0.0548829f, -0.1135300f, -0.1663324f, +0.2426462f, -0.0351413f,
  +0.0880833f, -0.2354156f, +0.2556084f, -0.8255112f, +0.2458590f, -0.0994481f, +0.8855076f, +0.4536747f,
  -0.2790479f, -0.0404271f, -0.6067566f, -0.1451020f, +0.0883960f, +0.1582408f, +0.3659311f, +0.2678647f,
  +0.1890804f, +0.0946613f, +0.2610851f, -0.0125833f, +0.0706002f, -0.0703889f, +0.1969912f, +0.0907824f,
  +0.0524975f, +0.0240283f, +0.0482582f, +0.3753307f, -0.0633172f, -0.3522633f, -0.0799769f, -0.2273902f,
  -0.2151806f, +0.0975334f, +0.0598221f, +0.0120702f, +0.1524473f, -0.0785154f, +0.0284928f, -0.2207399f,
  +0.3318996f, -0.0054200f, +0.0589199f, -0.1540983f, -0.0398687f, +0.0056124f, +0.0285188f, +0.0600148f,
  -0.1004558f, -0.0207549f, -0.1116190f, -0.2521508f, +0.1779569f, +0.1233612f, +0.1575894f, +0.0914789f,
  -0.1672436f, -0.1342749f, +0.2072967f, -0.0563226f, +0.1173787f, -0.0586975f, -0.0126576f, -0.5414780f,
  +0.1890813f, +0.0754497f, -0.2347692f, -0.3799340f, +0.4782096f, -0.2614752f, -0.0564744f, +0.4462748f,
  -0.1695997f, -0.3228081f, -0.1091181f, -0.4735237f, -0.0844186f, +0.0015217f, +0.1199785f, -0.0413036f,
  +0.0520005f, -0.0549723f, +0.2584045f, +0.0095770f, -0.2637292f, +0.2465851f, +0.0130318f, -0.2522362f,
  -0.2126107f, -0.1003075f, -0.2185507f, -0.3212434f, +0.2562872f, -0.1818475f, +0.0974962f, -0.1856263f,
  -0.2382060f, +0.1416825f, +0.4346067f, -0.1114042f, +0.0518422f, +0.2289519f, +0.1424628f, -0.0025981f,
  -0.1018265f, -0.1579410f, +0.0244653f, -0.0552174f, +0.1982691f, -0.0455074f, +0.2303434f, -0.1975302f,
  +0.2735580f, +0.0928531f, -0.0331761f, +0.0671138f, -0.0230226f, +0.3067262f, +0.0242498f, +0.2153506f,
  -0.0439205f, -0.4420093f, +0.0001041f, -0.4877597f, -0.3202016f, -0.2917593f, -0.1082654f, +0.2647192f,
  +0.2951466f, -0.2300234f, -0.1570676f, -0.0386711f, +0.3057041f, +0.0406511f, +0.1353262f, +0.1637371f,
  +0.2976457f, -0.0610675f, +0.1138843f, -0.1809276f, -0.2925582f, +0.0950699f, +0.1186620f, +0.1760545f,
  -0.0895343f, +0.2261635f, +0.0232579f, -0.0038579f, -0.0709929f, -0.1151413f, +0.4065008f, -0.0304691f,
  +0.3096427f, +0.1268928f, -0.0569958f, -0.1136387f, +0.2561660f, -0.2440914f, +0.1169008f, -0.3883125f,
  +0.1066190f, +0.2122598f, +0.1423622f, +0.1179815f, -0.0097969f, +0.0139192f, -0.0319682f, +0.0752035f,
  +0.1385259f, -0.2758062f, +0.1770905f, +0.1999175f, -0.0315372f, +0.1165790f, -0.0683708f, -0.1412714f,
  -0.1701555f, +0.1481913f, -0.0730292f, -0.3970631f, +0.1458876f, -0.2651691f, +0.0677193f, -0.0178255f,
  -0.1039472f, +0.0889287f, -0.0908568f, -0.2289671f, +0.1298368f, -0.0099448f, -0.0667684f, +0.3351761f,
  +0.0340926f, -0.2250588f, +0.1090421f, -0.3944537f, +0.1617413f, -0.1684267f, -0.0920998f, +0.2203547f,
  -0.1773577f, -0.2336539f, +0.2639055f, -0.3458512f, +0.1716859f, -0.1784141f, +0.1860048f, +0.1711080f,
  -0.1180913f, +0.1288917f, +0.1818746f, -0.1073698f, +0.3271019f, +0.2139163f, +0.3120400f, -0.2872634f,
  -0.0271533f, -0.0582501f, -0.2139414f, -0.3621827f, +0.1065383f, -0.0876628f, -0.1310168f, +0.3932606f,
  +0.3397563f, -0.1692594f, +0.2671061f, -0.0276211f, -0.2190445f, +0.3341006f, -0.0116918f, -0.2222052f,
  -0.0632680f, -0.3215893f, +0.2517192f, -0.1739641f, -0.0592496f, +0.1480641f, +0.0682635f, +0.0847710f,
  +0.2871231f, +0.1198909f, -0.1436788f, -0.1298936f, +0.1346316f, -0.5134240f, -0.1075088f, -0.2084876f,
  -0.3268833f, -0.3490937f, -0.0004035f, +0.0701569f, -0.0570803f, -0.2228864f, -0.3403828f, -0.1716825f
);

const float biases[4] = float[4](
  -0.0291331f, +0.0001331f, +0.0117204f, -0.0969184f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer87 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0756452f, -0.1311604f, -0.0558619f, +0.1552056f, +0.0950736f, -0.2467989f, -0.1309811f, -0.1603051f,
  -0.1645947f, -0.1799419f, +0.0317183f, +0.0776794f, -0.0474888f, +0.1084794f, -0.0574790f, -0.1375543f,
  +0.0121257f, -0.0779657f, -0.1012838f, +0.0856610f, -0.0603600f, -0.0653328f, -0.0236813f, -0.1840404f,
  -0.1062138f, +0.1821657f, -0.1053609f, +0.0451714f, +0.1428116f, -0.1071569f, -0.2028851f, +0.0676480f,
  -0.0653911f, +0.0255230f, -0.0974034f, +0.0478949f, -0.0056305f, -0.0978422f, +0.1271777f, -0.0920589f,
  -0.2074957f, -0.2214039f, -0.0698807f, -0.1741423f, +0.0680471f, +0.1057739f, -0.0812582f, -0.0451775f,
  -0.2883587f, +0.1388138f, -0.1724489f, +0.0463908f, -0.0182834f, -0.1757420f, -0.0961220f, +0.1193320f,
  -0.0416094f, +0.1560650f, +0.1378409f, +0.1138875f, -0.2145237f, -0.1067524f, +0.1196998f, +0.0977381f,
  +0.0477485f, +0.1334884f, -0.2843658f, -0.0795529f, +0.0152242f, +0.1109701f, -0.0254109f, -0.1183969f,
  +0.0435744f, -0.3189428f, +0.2461155f, +0.0147273f, +0.2877448f, -0.0394705f, +0.0123777f, -0.3188190f,
  +0.1461452f, -0.2076202f, -0.0357540f, -0.1438090f, +0.0323790f, -0.1859138f, +0.1786067f, +0.2185904f,
  +0.0352883f, +0.0888083f, -0.0560228f, -0.0677523f, -0.0556544f, +0.0849993f, +0.0679896f, -0.2013616f,
  -0.0780020f, -0.0431773f, -0.1496251f, -0.2429610f, -0.1247663f, +0.0999342f, -0.0487749f, -0.2593797f,
  -0.0610091f, -0.1096555f, +0.4036678f, -0.4217525f, -0.0476332f, -0.0817605f, +0.2307104f, +0.2067701f,
  +0.0827144f, -0.0320784f, +0.2841727f, -0.1375867f, +0.3288873f, -0.1345667f, +0.2134823f, -0.0814080f,
  +0.0007300f, +0.0793807f, +0.2390831f, -0.2160642f, -0.0536569f, +0.0084384f, +0.1211942f, +0.3991645f,
  +0.1253476f, +0.0371195f, -0.2284692f, -0.3916836f, +0.1130150f, +0.2047973f, +0.3274853f, -0.1986108f,
  -0.1950727f, -0.0988660f, +0.2752204f, +0.1449000f, -0.0155867f, +0.0092626f, +0.1595185f, -0.5824323f,
  -0.0516332f, +0.2423598f, +0.0401473f, -0.0124784f, -0.0433400f, +0.0985428f, -0.2057643f, -0.0825927f,
  -0.0964615f, +0.1122509f, -0.1361284f, -0.1717373f, +0.0969370f, -0.0519961f, -0.0708307f, +0.0835644f,
  +0.2761464f, -0.0494417f, -0.1992618f, +0.0171216f, -0.0486211f, +0.1239321f, +0.0466474f, +0.2519127f,
  +0.1290802f, +0.1895723f, +0.0945559f, -0.0027491f, -0.0485156f, +0.3260846f, -0.1721871f, +0.2280234f,
  -0.0072283f, +0.0239308f, +0.0728031f, +0.1109564f, +0.0145242f, -0.2708589f, +0.2087308f, -0.3339760f,
  +0.2744337f, -0.2175771f, +0.1753045f, +0.0980185f, -0.0008643f, -0.0264701f, +0.0320022f, -0.0972646f,
  -0.1272135f, +0.1785299f, -0.0745199f, -0.1910955f, -0.1958703f, +0.3816111f, -0.3992084f, -0.1773178f,
  -0.1209963f, +0.1439746f, +0.1366751f, +0.0478049f, -0.0417789f, -0.1252438f, +0.1621874f, +0.0006269f,
  -0.2617770f, +0.1818645f, -0.1554850f, +0.1560749f, +0.0310511f, +0.2962979f, -0.2555693f, -0.0648708f,
  -0.0671058f, +0.3022097f, +0.0268479f, -0.2104160f, +0.0741764f, -0.1234277f, -0.0829197f, -0.0002340f,
  -0.0494436f, -0.0880354f, -0.1522088f, -0.0107834f, +0.0239447f, +0.0595029f, -0.1769881f, -0.3482248f,
  -0.0708092f, -0.1329846f, +0.0648216f, +0.0000186f, -0.2259877f, -0.0024856f, +0.0591956f, -0.1308868f,
  +0.0429127f, -0.0027281f, -0.0321194f, +0.0159083f, -0.1596790f, -0.2047451f, -0.1581823f, +0.0946875f,
  -0.4299785f, +0.2007275f, -0.1463936f, +0.0612140f, -0.0327464f, -0.0250438f, -0.1079734f, +0.0115685f,
  -0.0679696f, -0.0575097f, -0.0823406f, +0.1626665f, +0.0197061f, -0.0702570f, +0.1573299f, -0.0860490f,
  +0.0805568f, +0.2545366f, -0.0485562f, +0.0505274f, -0.0035284f, -0.2794317f, +0.0646008f, -0.0629833f,
  +0.0938002f, +0.2514090f, -0.0183436f, -0.2361434f, -0.0787143f, +0.1900015f, +0.0114664f, +0.0720414f,
  +0.0312443f, -0.1236031f, -0.1483050f, -0.1735565f, -0.0271156f, -0.0702265f, -0.0660829f, +0.1041069f
);

const float biases[4] = float[4](
  +0.0330419f, -0.0369854f, -0.0304112f, +0.0043252f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer88 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0049822f, -0.0841848f, +0.2178952f, +0.2209287f, +0.1057608f, -0.0071126f, +0.0908027f, -0.0059260f,
  -0.1322000f, +0.3254891f, +0.0933593f, -0.3047884f, -0.1904059f, -0.0352606f, +0.1104423f, -0.1422172f,
  +0.0949412f, +0.0996981f, -0.0018059f, +0.1239478f, +0.1337803f, +0.1724261f, +0.2561607f, -0.1117729f,
  +0.0593763f, +0.1494579f, -0.2610270f, -0.1416173f, +0.3622555f, +0.1243065f, -0.1350798f, -0.0630696f,
  +0.0536457f, -0.1506801f, +0.1571189f, +0.1286657f, +0.0158129f, -0.2683210f, +0.1527634f, +0.3313967f,
  -0.1322542f, +0.1698366f, -0.1176894f, -0.0684823f, +0.0022162f, +0.0270980f, +0.0256724f, -0.1710405f,
  -0.1510074f, +0.1743476f, -0.0455057f, +0.1724581f, -0.0307488f, -0.1171570f, -0.1324536f, -0.0010991f,
  +0.5584252f, -0.1393201f, +0.1066030f, -0.1098804f, +0.1206383f, -0.0856484f, -0.0213497f, -0.1196722f,
  -0.1038602f, -0.1759213f, -0.2042527f, +0.0604033f, +0.0739265f, +0.1744386f, -0.0076519f, +0.0389369f,
  -0.0309958f, -0.1315146f, -0.0700334f, +0.2367644f, -0.0512773f, -0.0233475f, -0.0400566f, -0.1184849f,
  -0.0994703f, -0.1798536f, +0.1623504f, -0.2592117f, +0.0368145f, +0.2424574f, -0.2166336f, +0.1426179f,
  -0.3083835f, +0.0801194f, +0.2488300f, +0.1491152f, +0.2037520f, -0.2346590f, -0.1430210f, -0.1697752f,
  -0.1179238f, -0.0282294f, -0.0640595f, +0.1299218f, -0.0549753f, -0.0021537f, +0.0047920f, -0.0699351f,
  -0.4650683f, -0.0623350f, -0.1001421f, +0.2346165f, +0.0675681f, +0.0207646f, -0.1832483f, +0.2310554f,
  +0.0774953f, -0.1648712f, -0.0065411f, -0.1972524f, -0.0244605f, +0.0001498f, -0.2022346f, -0.0102845f,
  -0.0182751f, +0.0823737f, -0.2683585f, +0.1438344f, -0.3998480f, -0.1306369f, +0.1575617f, +0.2036361f,
  +0.1671713f, -0.1392265f, -0.0869172f, -0.1451305f, -0.0381862f, +0.0885627f, -0.0997281f, -0.1328236f,
  -0.0397707f, -0.2371775f, -0.2174872f, -0.2074047f, -0.0100584f, -0.2466087f, +0.0487842f, +0.0518120f,
  +0.0922082f, -0.1644857f, +0.2710698f, -0.0880040f, +0.1576201f, -0.1175283f, +0.0546773f, +0.0996790f,
  +0.0075852f, -0.1004283f, -0.1819777f, -0.1153408f, -0.2229176f, +0.1982930f, +0.0410126f, +0.1449873f,
  +0.1649796f, -0.0848190f, -0.0927425f, -0.1259499f, +0.3349377f, -0.0792566f, +0.2184432f, -0.2508910f,
  -0.1063765f, -0.0741741f, -0.0899471f, -0.1671862f, -0.0761240f, -0.1412731f, -0.1099955f, -0.1444318f,
  +0.9508311f, +0.0418734f, +0.1364535f, +0.0751645f, +0.0944558f, -0.3158890f, -0.1628460f, -0.2059915f,
  +0.0031150f, +0.2734675f, -0.1122815f, +0.0264501f, +0.0383016f, +0.0102383f, +0.0492635f, -0.0078258f,
  +0.5019573f, +0.0279875f, +0.2318886f, +0.1049877f, -0.0483457f, +0.0994020f, +0.1167235f, -0.2080454f,
  +0.0449314f, +0.0411992f, -0.2613885f, +0.1147946f, -0.0506280f, -0.0276573f, +0.0607831f, -0.0091637f,
  -0.1687605f, -0.2685019f, -0.0464232f, +0.0455434f, +0.0317716f, -0.2662195f, -0.0449229f, +0.0229787f,
  +0.3382459f, +0.2430506f, +0.1208172f, +0.1113715f, +0.0543339f, -0.2922304f, +0.0131740f, +0.0410063f,
  -0.1256704f, +0.0105235f, -0.1208116f, -0.0226002f, +0.0584935f, +0.3034992f, +0.1481841f, +0.1403420f,
  +0.0820687f, -0.2195348f, -0.2129157f, -0.0726646f, -0.5387436f, -0.0828309f, -0.0705801f, -0.1261212f,
  -0.1869134f, -0.0042891f, -0.2783088f, +0.0494219f, +0.0567363f, +0.1447347f, +0.2223618f, -0.1509380f,
  -0.3774548f, -0.0272564f, -0.2761062f, +0.1942904f, +0.2542981f, +0.4248346f, -0.0642297f, -0.2472393f,
  +0.3163136f, -0.0112317f, +0.0627785f, +0.0266197f, -0.0995573f, -0.1604484f, -0.0828661f, +0.1174179f,
  -0.2050268f, -0.1378376f, -0.0726075f, +0.5178227f, -0.1297938f, -0.1659932f, +0.2005056f, -0.0513925f,
  +0.3803021f, +0.3477753f, -0.0493238f, +0.2127838f, -0.0417313f, +0.0502003f, +0.1365936f, -0.1166164f,
  +0.0294477f, -0.0946120f, -0.2161069f, -0.1956030f, -0.0218926f, -0.2140243f, -0.0713281f, -0.1049389f
);

const float biases[4] = float[4](
  +0.0004088f, -0.0118560f, +0.0218231f, +0.0272321f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer88 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0319086f, -0.2452784f, +0.1644665f, -0.1254765f, +0.0436456f, +0.1764637f, -0.0348838f, -0.0313078f,
  -0.0679544f, -0.2258804f, +0.0981235f, -0.0926354f, -0.0934819f, -0.0027380f, -0.2380810f, +0.1886170f,
  -0.1178002f, +0.0543616f, -0.0053451f, +0.1066051f, -0.2549205f, -0.1984447f, -0.2009072f, -0.1763049f,
  +0.0047712f, -0.0856157f, -0.3767174f, +0.3960806f, -0.1980945f, +0.0510198f, -0.0628004f, -0.0221582f,
  -0.3780841f, -0.1185395f, +0.0118983f, -0.1704598f, -0.2389316f, -0.2002142f, -0.1024236f, -0.3642604f,
  -0.0438166f, -0.1002889f, -0.0250642f, -0.0284053f, -0.0817380f, -0.0926555f, +0.1706563f, +0.0124207f,
  -0.2253169f, +0.0301941f, -0.0274063f, -0.1497761f, +0.2562739f, -0.3657235f, +0.0739865f, +0.2772287f,
  -0.1553522f, -0.1366557f, +0.2503279f, -0.1327249f, -0.0836401f, +0.0195327f, +0.0901182f, +0.1116031f,
  -0.0605455f, -0.4029127f, +0.0194752f, +0.0661253f, +0.0535286f, -0.1380607f, +0.0248758f, -0.1116544f,
  -0.1601250f, -0.1270921f, +0.0609557f, +0.1783621f, -0.2194601f, +0.1726550f, -0.1433769f, +0.0941082f,
  -0.0687463f, -0.0492300f, +0.0383348f, +0.1530992f, -0.1495619f, +0.0668956f, -0.1282046f, -0.0141472f,
  -0.2084545f, +0.2343395f, -0.2396467f, +0.0311253f, -0.2341480f, -0.1225294f, -0.0670045f, +0.1066767f,
  -0.2488870f, +0.0704643f, +0.2653186f, -0.0110327f, -0.0494773f, -0.1142183f, -0.0700631f, -0.1138046f,
  +0.0709669f, +0.2443262f, +0.0211982f, +0.2478464f, -0.0119401f, +0.0651992f, -0.1714624f, +0.3157448f,
  -0.0014194f, -0.2224585f, -0.1143159f, -0.1008339f, +0.0512833f, +0.0897183f, +0.0890765f, +0.1939357f,
  +0.0579931f, -0.3611641f, +0.4651316f, +0.0220739f, +0.0067969f, +0.0807403f, +0.0666574f, +0.0311172f,
  +0.2897484f, +0.2269284f, -0.1493228f, -0.1261498f, +0.1055201f, -0.0159640f, +0.0809132f, +0.0709577f,
  +0.0975440f, +0.0663042f, -0.1424217f, -0.0116415f, -0.0101222f, +0.0636809f, -0.0679225f, -0.1084424f,
  +0.0481731f, +0.0578921f, +0.1168947f, +0.0952655f, -0.0478666f, -0.2815302f, -0.0821850f, -0.0446323f,
  -0.4341814f, +0.1709220f, +0.1429940f, +0.1004742f, -0.1825202f, -0.2572938f, -0.0073577f, -0.1997571f,
  +0.2600255f, +0.3528166f, -0.2081840f, +0.1185172f, +0.0050027f, -0.2173158f, +0.2873475f, -0.1436562f,
  +0.1200421f, +0.2535653f, -0.2754099f, -0.0947488f, +0.2312160f, -0.2628926f, -0.1621000f, +0.1520060f,
  +0.0171256f, -0.2562287f, -0.1390666f, +0.1535441f, +0.2111809f, -0.1518648f, +0.0338226f, +0.0050874f,
  -0.0084033f, +0.0320786f, -0.2050340f, -0.3167317f, +0.0415993f, -0.0323134f, -0.0496275f, +0.0525190f,
  +0.1532647f, +0.2191041f, -0.2763158f, -0.1318534f, -0.0687535f, -0.0612506f, -0.0232405f, -0.3283057f,
  -0.1309720f, +0.1510710f, +0.2965843f, -0.0639208f, +0.1054828f, +0.1507402f, -0.0258576f, -0.1502885f,
  -0.2440946f, -0.2003955f, -0.1187381f, +0.4519150f, +0.0072035f, -0.0186673f, +0.0821997f, -0.3079652f,
  -0.1229617f, +0.2783549f, -0.1384443f, -0.3273058f, -0.1084615f, -0.0941289f, +0.0947499f, +0.0229680f,
  -0.1133141f, +0.0641779f, -0.0852078f, +0.1377635f, -0.2680474f, +0.4016217f, -0.3326131f, +0.0581949f,
  +0.0522084f, -0.2764946f, +0.1555218f, -0.1275165f, -0.0906961f, -0.1555329f, +0.2370864f, -0.0631049f,
  +0.1219001f, -0.0478076f, +0.0260407f, -0.0006790f, +0.2393524f, +0.0269203f, -0.0867328f, +0.0408633f,
  +0.2941642f, +0.0868689f, +0.1023098f, -0.3820260f, +0.0005178f, -0.2236709f, -0.0349675f, +0.0128441f,
  -0.2664557f, -0.2468082f, -0.1509518f, +0.2343199f, +0.1626138f, +0.2050227f, +0.0623735f, -0.1447595f,
  +0.1163594f, +0.3160121f, -0.0202966f, -0.0598149f, +0.1948115f, -0.0122874f, -0.0508468f, +0.2996810f,
  +0.2797962f, +0.0488120f, -0.3814296f, -0.1867151f, +0.2399887f, -0.0706201f, +0.1548576f, +0.1375335f,
  -0.0840773f, -0.1559535f, -0.2620701f, -0.0813212f, +0.1556493f, +0.1680845f, +0.2273418f, -0.0432894f
);

const float biases[4] = float[4](
  -0.0086521f, +0.0286253f, -0.0039848f, -0.0165448f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer89 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0225511f, -0.2433461f, -0.1047773f, +0.0769826f, +0.1280198f, -0.2843669f, -0.1711859f, -0.0378199f,
  +0.1435319f, -0.1029712f, +0.0777466f, +0.0357501f, -0.0215916f, +0.1615781f, +0.1396037f, -0.0642084f,
  -0.1441520f, +0.0250542f, -0.1299107f, -0.0750525f, +0.0864147f, -0.0913579f, -0.1293456f, +0.0328013f,
  +0.0630953f, +0.4441186f, -0.1669420f, +0.1556689f, +0.0354134f, -0.4387793f, -0.0682345f, -0.0010256f,
  -0.0259966f, +0.1724874f, +0.0544750f, +0.2383187f, +0.2198163f, -0.0601797f, +0.2054632f, -0.1228290f,
  +0.0280690f, +0.0500682f, -0.1567931f, +0.0836853f, -0.1210572f, -0.1281997f, -0.0691965f, -0.1228248f,
  -0.2225768f, -0.1017416f, -0.0166344f, -0.0654412f, -0.1716978f, -0.2023734f, +0.0134333f, -0.2071873f,
  -0.3400156f, +0.1996263f, +0.0132973f, -0.0925992f, -0.1229450f, +0.0474198f, -0.0867329f, +0.0288396f,
  -0.0841357f, -0.0317035f, +0.0130888f, -0.0121800f, -0.1447491f, -0.0017311f, -0.0076747f, -0.0533128f,
  +0.0792895f, +0.1098132f, +0.0409310f, -0.0501016f, +0.0286694f, -0.1060538f, +0.1779587f, -0.1512946f,
  +0.0330755f, +0.0286429f, -0.2430233f, +0.2802065f, +0.0601788f, -0.1036349f, -0.0360433f, +0.0234936f,
  +0.1131635f, +0.3933349f, -0.0129205f, -0.1736869f, +0.0175556f, -0.3627553f, +0.4086733f, -0.0689143f,
  -0.0608257f, +0.1082857f, +0.1547410f, -0.1209035f, -0.0617234f, -0.0302251f, -0.2214695f, -0.1598867f,
  -0.3370745f, -0.3156314f, -0.4292037f, -0.1019749f, +0.0928062f, -0.1948655f, +0.0720581f, +0.0301719f,
  +0.0770681f, +0.0732409f, +0.1608212f, -0.1580063f, +0.2323086f, -0.0262543f, +0.3983046f, +0.2548591f,
  -0.1809489f, -0.1154998f, -0.1326353f, +0.2314335f, +0.0415139f, -0.1491715f, +0.1799907f, +0.1382470f,
  -0.1356931f, -0.0446121f, -0.2082132f, +0.1573400f, +0.1482965f, -0.2902608f, +0.1735998f, -0.0317752f,
  +0.1179996f, -0.3163321f, -0.0024198f, -0.0174578f, +0.4028204f, -0.0679346f, +0.0917778f, -0.0252149f,
  +0.2782232f, -0.0316466f, +0.2673656f, -0.1528862f, -0.2553146f, -0.0586028f, +0.2683187f, +0.0877754f,
  -0.0960351f, -0.2711580f, -0.1857958f, -0.0524527f, +0.4438378f, -0.1411117f, +0.0129620f, -0.2184957f,
  +0.1232316f, -0.0562880f, +0.0480184f, +0.0714158f, +0.0776155f, +0.2309064f, +0.1229286f, +0.2722791f,
  -0.0958123f, +0.0586074f, -0.1005608f, -0.1246823f, +0.1087176f, -0.0862719f, -0.0419088f, -0.0227526f,
  +0.0274449f, +0.1200571f, -0.0487766f, +0.1859615f, +0.3076488f, +0.1109038f, -0.0112971f, +0.0306598f,
  +0.0683333f, -0.1659906f, -0.2460043f, +0.1080896f, -0.0243874f, -0.0169199f, +0.2467197f, -0.2212379f,
  +0.1063677f, -0.1459511f, +0.1880599f, +0.1844862f, +0.0214552f, +0.0724617f, +0.1977104f, -0.1770602f,
  -0.2037682f, +0.0044939f, +0.2907268f, -0.3746701f, +0.1535111f, -0.2021453f, +0.1542216f, +0.2237723f,
  +0.0661908f, -0.1432631f, -0.0592958f, +0.0543040f, -0.0294311f, -0.3421834f, -0.1246876f, -0.0133371f,
  +0.1922882f, -0.0882729f, -0.1655162f, +0.1167460f, +0.0106749f, -0.1596847f, -0.1946777f, +0.1337292f,
  +0.1218492f, +0.1918412f, -0.0506316f, -0.0277983f, +0.0148421f, +0.1290026f, -0.0954768f, +0.0276056f,
  +0.1674437f, -0.0039091f, -0.2332881f, +0.0674523f, -0.0042954f, +0.0298978f, -0.0934795f, +0.0905634f,
  -0.2376479f, +0.0284486f, +0.0607661f, -0.1263311f, +0.0103048f, -0.1297083f, -0.2646291f, -0.0400897f,
  +0.1855477f, +0.2275743f, -0.0654326f, -0.2537546f, +0.1222042f, +0.1528367f, -0.2541720f, +0.0997881f,
  -0.0296916f, -0.0775364f, +0.1056585f, +0.0558817f, -0.0696229f, +0.3117629f, -0.1937401f, -0.0841114f,
  +0.0253261f, +0.2606324f, +0.2454753f, -0.0185646f, -0.2142433f, -0.1550802f, +0.0490912f, -0.0882921f,
  -0.1355553f, +0.0772153f, +0.2681821f, -0.0214142f, -0.1365827f, +0.3963373f, +0.1276771f, -0.3571333f,
  -0.0417069f, +0.0149558f, -0.0108934f, -0.0890048f, -0.0815922f, +0.0068117f, -0.2089266f, -0.0830409f
);

const float biases[4] = float[4](
  -0.0007233f, -0.0118222f, +0.0049520f, -0.0419966f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer89 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0527772f, -0.1513093f, +0.0051861f, +0.0647074f, -0.2484149f, -0.1008855f, -0.3135859f, +0.0263933f,
  -0.0597157f, +0.1679353f, +0.0534344f, +0.0337732f, -0.1248813f, +0.1660826f, +0.3090663f, -0.1566759f,
  -0.1108726f, +0.0414251f, -0.0690214f, +0.1661323f, -0.0054738f, -0.1463862f, +0.1214703f, +0.0348144f,
  +0.0941186f, +0.0384980f, +0.1753286f, +0.1082432f, -0.1686081f, +0.1050839f, -0.1524331f, +0.1272967f,
  -0.3449832f, +0.1317493f, -0.0564170f, -0.2699957f, +0.0400606f, +0.0010723f, -0.0503370f, +0.0539478f,
  +0.1586856f, -0.0254097f, -0.1327198f, -0.2162995f, -0.0045415f, -0.1430853f, +0.0430087f, -0.0473407f,
  +0.1577982f, +0.0242746f, -0.3020722f, -0.0347301f, +0.1038680f, -0.0454239f, -0.0731685f, -0.0840465f,
  +0.0481501f, -0.0515994f, -0.0817615f, +0.0222563f, +0.0094570f, -0.1854055f, -0.4408411f, +0.0714657f,
  -0.2642135f, +0.1613875f, -0.0007664f, -0.0723341f, +0.0675152f, +0.1680944f, -0.0158000f, +0.1353928f,
  +0.0296062f, +0.0862803f, -0.2097687f, -0.0712868f, -0.0111021f, -0.1685480f, +0.1993857f, +0.1777072f,
  -0.0376115f, +0.0837789f, +0.1276594f, -0.1471644f, +0.1545927f, -0.0795362f, +0.1533580f, +0.0499565f,
  +0.1955885f, +0.3396933f, +0.1855421f, +0.3020859f, -0.0102457f, -0.0922369f, +0.2124305f, -0.1601773f,
  +0.0365743f, +0.2366111f, +0.0307617f, -0.2356583f, +0.2797133f, -0.2967516f, -0.0399896f, -0.1438260f,
  -0.0198114f, -0.2166193f, -0.0040696f, -0.1094716f, -0.0924305f, -0.2626033f, +0.2436827f, -0.2099749f,
  +0.2505365f, -0.1107282f, -0.0719238f, -0.3085742f, +0.2081991f, -0.2248623f, -0.0598129f, -0.0845762f,
  +0.1271073f, -0.0186019f, +0.0814359f, -0.2964565f, +0.1625772f, -0.1342799f, -0.0711407f, +0.1776542f,
  +0.2688949f, -0.1359760f, +0.3728468f, -0.0568382f, -0.0927416f, -0.1118791f, -0.1803217f, -0.1058406f,
  -0.1609824f, -0.0952329f, +0.0581466f, -0.0911619f, -0.4290546f, -0.1628263f, +0.1774746f, -0.4380088f,
  -0.1967728f, +0.1575705f, +0.2243026f, -0.0291315f, +0.0619443f, +0.2125896f, +0.0089004f, +0.2051807f,
  +0.1159957f, +0.0265998f, -0.0701033f, +0.1097297f, -0.0054538f, -0.1184212f, +0.3808302f, +0.1642319f,
  +0.0819226f, +0.0085270f, +0.0661433f, +0.0817282f, +0.0026630f, -0.3660637f, -0.2839179f, -0.2411617f,
  -0.0163258f, -0.0184466f, -0.0052769f, -0.1308156f, -0.1700026f, +0.1333213f, -0.4509620f, +0.0806854f,
  -0.2169263f, -0.2138563f, -0.0556523f, -0.4393615f, +0.1564336f, -0.4670307f, +0.6287611f, -0.3423574f,
  -0.0049613f, +0.0126462f, +0.1556130f, +0.4541510f, +0.0846433f, -0.0641871f, +0.0553981f, -0.4512279f,
  -0.0477457f, +0.1586194f, -0.0128696f, +0.3541310f, +0.2478020f, +0.0406254f, -0.0306292f, +0.1958118f,
  -0.1262333f, -0.2365041f, -0.3692107f, -0.2152815f, +0.3896485f, +0.3291179f, +0.1898154f, +0.0907974f,
  -0.3048044f, +0.1124577f, +0.1687443f, +0.4838939f, +0.1041905f, -0.4189596f, +0.1421699f, -0.2460415f,
  +0.1330620f, -0.2388067f, +0.0248194f, -0.2625146f, -0.2337427f, -0.0117723f, -0.0555997f, -0.1712159f,
  -0.0456331f, -0.2935208f, +0.2380516f, -0.0664166f, +0.3800723f, +0.0738062f, +0.3056411f, +0.0378218f,
  +0.1184966f, -0.0948739f, +0.0164601f, +0.0242776f, +0.0980356f, +0.2122996f, -0.3549898f, +0.0769559f,
  -0.2063030f, -0.1451605f, -0.3658787f, +0.4204155f, +0.2353162f, -0.0883059f, +0.2139883f, -0.0163421f,
  +0.0066720f, +0.2057057f, +0.1166336f, -0.1170798f, +0.4309466f, +0.0687783f, +0.1864706f, -0.1184472f,
  -0.2430996f, -0.1699516f, -0.1158652f, +0.0401140f, +0.1553244f, +0.3990242f, +0.0439016f, +0.1674950f,
  +0.2558500f, +0.1111476f, +0.1832494f, +0.0786588f, +0.1202981f, +0.0652910f, -0.2750185f, -0.1401857f,
  +0.0117993f, +0.0890726f, -0.1887796f, +0.2987835f, +0.1929281f, -0.2160685f, +0.0607622f, -0.2450254f,
  -0.0806183f, -0.0141501f, -0.0094702f, +0.0241235f, -0.0851908f, +0.1131280f, -0.1962577f, -0.0405219f
);

const float biases[4] = float[4](
  +0.0266136f, -0.0642555f, -0.0061701f, +0.0093279f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer90 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0416538f, -0.3250440f, -0.0141348f, -0.0872911f, +0.3730462f, -0.0230229f, +0.0700144f, +0.2839514f,
  +0.3555610f, +0.1571422f, -0.0002004f, -0.0719708f, +0.0617750f, -0.1483645f, +0.1397902f, -0.0546785f,
  +0.2987062f, +0.2265150f, +0.0438884f, +0.1511456f, +0.0280688f, -0.0636355f, -0.1714119f, -0.2670599f,
  -0.0937302f, -0.1873031f, -0.1919322f, -0.0494642f, -0.0282584f, -0.0797042f, +0.0796545f, +0.1807453f,
  -0.1747770f, +0.4047907f, +0.5467902f, +0.1513833f, -0.0081581f, +0.0728122f, -0.0403712f, +0.2354972f,
  -0.0539731f, -0.2228218f, +0.1257109f, -0.1438607f, -0.3726753f, -0.0066942f, +0.0208959f, +0.1713523f,
  -0.0818132f, +0.0285681f, +0.1822091f, -0.0911274f, +0.1411504f, -0.0555542f, -0.1082888f, +0.1548288f,
  +0.0512390f, -0.1893173f, +0.1906320f, +0.1471916f, +0.1642186f, +0.0983806f, -0.2426003f, +0.2616857f,
  +0.1707042f, -0.2339692f, +0.0165564f, -0.0530397f, -0.0634223f, -0.0450916f, +0.0403755f, -0.0287269f,
  +0.1463757f, +0.1940503f, -0.1697855f, -0.1261798f, -0.1493901f, -0.1698484f, -0.2817041f, -0.2198344f,
  -0.0217600f, -0.2528314f, +0.1723215f, +0.0550201f, -0.0750528f, -0.2025245f, -0.1003022f, -0.0799445f,
  -0.0979361f, +0.3166389f, +0.0287532f, -0.1864098f, +0.2098044f, -0.1330539f, -0.1774161f, +0.1070998f,
  +0.0972878f, +0.0191655f, +0.0982365f, +0.1020002f, +0.3865413f, +0.0340667f, +0.1291308f, -0.0662687f,
  +0.0726857f, +0.1185538f, -0.1111026f, -0.0680510f, -0.1973311f, +0.2850828f, +0.2913581f, +0.0528268f,
  +0.1383925f, -0.1238572f, -0.0669101f, +0.1791201f, +0.1423971f, +0.0120265f, +0.4401104f, +0.0032111f,
  +0.0726902f, -0.2885932f, -0.0194714f, -0.0219560f, +0.1416004f, -0.0854086f, +0.0683566f, +0.2475392f,
  +0.1573037f, -0.0708802f, -0.1667354f, -0.0891935f, -0.0461623f, +0.0651451f, +0.0086328f, +0.1279323f,
  +0.1155006f, +0.0092452f, -0.0166076f, +0.0822657f, +0.1762569f, -0.2044704f, +0.1937138f, +0.0108308f,
  -0.2805172f, +0.1902221f, +0.3220013f, -0.2372216f, -0.0641478f, +0.1254580f, -0.0715092f, -0.1474572f,
  -0.0223298f, -0.1197624f, +0.0106650f, -0.2646551f, -0.0463686f, -0.2233124f, +0.1486155f, +0.3679882f,
  -0.1287308f, -0.1891846f, -0.1232527f, +0.0454572f, -0.0315829f, +0.2404102f, -0.2478651f, -0.0217026f,
  +0.0822029f, -0.1134849f, +0.0449979f, -0.1163727f, +0.1007606f, +0.0421388f, -0.0145540f, +0.1243105f,
  -0.1624752f, +0.1149758f, +0.2368971f, +0.5690420f, -0.2913661f, +0.0952561f, +0.1714816f, +0.3630912f,
  -0.0526347f, +0.1339246f, +0.1377837f, +0.0349084f, -0.1297935f, +0.0299269f, -0.0744765f, +0.2623982f,
  +0.2140303f, -0.0703241f, +0.0637365f, +0.0217987f, +0.0573115f, -0.3214408f, +0.1424440f, -0.2036320f,
  +0.2685852f, +0.1179105f, -0.0376685f, +0.1519001f, +0.1378020f, +0.0783064f, +0.3272873f, +0.0346395f,
  +0.2753535f, -0.0400268f, -0.0823997f, -0.0499654f, -0.3172945f, +0.0315773f, +0.1073989f, +0.0387917f,
  -0.0718933f, +0.0265965f, -0.1471130f, -0.2035488f, +0.1086271f, -0.0194558f, -0.3174651f, +0.0848768f,
  +0.0656281f, +0.0827895f, +0.0099080f, -0.1408713f, -0.0294121f, +0.0177874f, -0.2586133f, -0.2601005f,
  -0.1439557f, +0.0949500f, +0.0679241f, +0.0476860f, -0.1964156f, +0.0855105f, +0.0377776f, -0.0439106f,
  -0.0229623f, -0.1337170f, +0.0536461f, -0.0310403f, +0.2564814f, -0.0657029f, +0.0664861f, +0.2962104f,
  +0.1180395f, +0.3413233f, +0.1258494f, +0.0864135f, +0.0153030f, +0.0432919f, -0.0732425f, -0.3539259f,
  -0.3704942f, -0.0496349f, +0.3239703f, -0.0529682f, -0.1248952f, +0.0969179f, -0.1694367f, -0.0318799f,
  -0.1308278f, +0.1539121f, +0.0213577f, +0.0733510f, -0.2784640f, +0.1156331f, +0.0408126f, -0.0047850f,
  -0.0903193f, -0.1943533f, -0.1096484f, +0.0951672f, -0.0571147f, -0.0126778f, -0.1586161f, +0.0976484f,
  -0.3682273f, -0.1093768f, +0.2213279f, -0.0285742f, -0.0200580f, +0.0160920f, -0.1532559f, +0.1627583f
);

const float biases[4] = float[4](
  +0.0153868f, -0.0072198f, +0.0060528f, +0.0237270f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer90 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0213277f, -0.2147183f, -0.0052239f, -0.0460606f, -0.0317179f, -0.3969419f, -0.0882851f, +0.0192223f,
  -0.0846525f, -0.2741337f, +0.0069498f, -0.1848100f, -0.0670769f, -0.0369695f, +0.0555118f, +0.1705438f,
  +0.1333516f, +0.1729765f, -0.0980335f, +0.1358997f, +0.1069673f, +0.1365927f, +0.0961865f, +0.1567397f,
  +0.3498907f, -0.2986952f, -0.0152356f, -0.1404369f, -0.1308102f, +0.1797268f, -0.0162796f, -0.3513421f,
  +0.0612547f, -0.0505506f, -0.1195009f, -0.0900443f, +0.1544022f, +0.0307037f, -0.4389265f, -0.1922625f,
  +0.0748456f, +0.1313251f, +0.0317751f, -0.0545807f, +0.1592964f, +0.0344562f, -0.1857675f, -0.1995185f,
  -0.1096290f, -0.0611265f, -0.1138063f, -0.0337751f, -0.0275392f, +0.0003286f, +0.2133576f, -0.1938780f,
  +0.1450932f, +0.1536697f, -0.2104154f, -0.1409309f, +0.0409935f, +0.0655698f, +0.0976057f, +0.1842513f,
  +0.1249220f, -0.2301300f, +0.3205740f, -0.0294270f, +0.1278737f, +0.1167178f, -0.1823589f, +0.0185235f,
  -0.0065214f, -0.2334372f, +0.2517265f, +0.2002888f, -0.0535055f, -0.0552899f, -0.0625499f, +0.1541204f,
  +0.2049294f, -0.2036008f, +0.2220948f, +0.0416062f, -0.3157597f, +0.2574658f, +0.0818593f, +0.1241915f,
  +0.0987614f, +0.1435901f, -0.1222825f, +0.0365312f, -0.0457239f, +0.0095066f, +0.0240524f, -0.0614704f,
  -0.1379612f, -0.0816122f, -0.1996631f, +0.0497014f, +0.1334633f, -0.0324792f, -0.1113866f, -0.2310549f,
  -0.0978071f, +0.0758768f, -0.0674844f, -0.0111859f, -0.0532748f, -0.1853207f, -0.2981576f, -0.1367009f,
  +0.3319908f, -0.1896521f, -0.0347519f, -0.1757265f, +0.0051370f, -0.2625769f, -0.1584821f, +0.2709032f,
  +0.0469459f, +0.0115413f, -0.0877567f, +0.0277383f, +0.1985680f, -0.0292936f, -0.1058567f, -0.1231735f,
  -0.2432422f, -0.1507975f, -0.2824831f, -0.0630058f, +0.2075335f, -0.0313936f, -0.3959004f, -0.0897023f,
  -0.0631073f, +0.1917999f, +0.1655458f, +0.2347839f, +0.0728035f, +0.3047640f, -0.1799404f, +0.0600738f,
  -0.1135929f, +0.0228007f, -0.2190648f, +0.1063287f, +0.1062547f, -0.2820553f, +0.1641456f, +0.2264777f,
  -0.1511847f, +0.2506557f, +0.0583015f, -0.0582568f, +0.0473951f, -0.1192150f, +0.3806351f, +0.1113638f,
  -0.1855091f, -0.0404905f, -0.0306889f, +0.0242377f, +0.0882233f, -0.1577979f, +0.0711964f, +0.0028174f,
  +0.0603803f, +0.0409783f, +0.1908889f, -0.1208234f, -0.1901843f, +0.1547234f, +0.2320451f, +0.1617402f,
  -0.4217483f, -0.1773493f, -0.2573911f, +0.0577322f, +0.0992268f, -0.1117052f, +0.4946506f, +0.2608139f,
  -0.2870449f, -0.0397162f, +0.1434996f, -0.0186564f, +0.1427561f, -0.1193114f, +0.4533189f, +0.0970919f,
  +0.0233717f, -0.1164613f, +0.1538736f, -0.0233282f, -0.1728614f, -0.1248329f, -0.2527820f, +0.1192873f,
  +0.0176902f, -0.0063237f, +0.0256188f, -0.1446667f, -0.4529125f, -0.3367559f, +0.1696190f, -0.2175484f,
  +0.1070120f, -0.3833965f, -0.2302760f, -0.0256221f, +0.0655917f, -0.1575919f, +0.2428339f, -0.1882206f,
  +0.2892863f, +0.2276277f, +0.2185754f, -0.1845501f, +0.1177846f, +0.1724168f, -0.0035037f, +0.1103118f,
  +0.2013526f, -0.1634738f, +0.0556474f, +0.2958944f, -0.0604736f, +0.2724195f, -0.2026925f, +0.1675558f,
  +0.1799897f, -0.2128419f, +0.1642805f, +0.1230294f, +0.1025973f, -0.0445190f, +0.0422171f, +0.0028212f,
  -0.1616188f, -0.0822642f, +0.0624548f, -0.2060574f, -0.1465480f, +0.2698815f, -0.1987316f, +0.2037313f,
  +0.0619307f, +0.1320421f, +0.0772703f, -0.0935471f, -0.0246210f, -0.1670659f, -0.3715464f, -0.2807604f,
  +0.0734677f, +0.3531121f, -0.0421916f, +0.0013388f, +0.3020212f, -0.1826192f, -0.1379856f, +0.0982472f,
  +0.0119544f, -0.0853745f, +0.1775026f, -0.2450865f, +0.0140084f, +0.2490010f, -0.0834412f, -0.0470600f,
  +0.1499251f, -0.1296919f, +0.2051564f, -0.0578266f, +0.0839475f, -0.0584910f, -0.2604879f, +0.2487154f,
  -0.0298639f, +0.1714721f, +0.1451207f, -0.0817248f, +0.0901457f, +0.0140868f, +0.0907479f, +0.1464432f
);

const float biases[4] = float[4](
  +0.0098366f, -0.0013137f, +0.0006257f, -0.0085090f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer91 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2807189f, +0.1139611f, -0.0101626f, -0.0792062f, +0.0129339f, -0.2585506f, -0.0151744f, -0.0352652f,
  +0.1087732f, -0.0027211f, +0.0753973f, -0.2124858f, +0.2683526f, -0.1809317f, -0.0151598f, -0.0220634f,
  +0.0964881f, -0.0653069f, -0.0513372f, -0.0468457f, -0.0599759f, +0.0553549f, +0.1157558f, +0.0282009f,
  -0.0246043f, -0.2195112f, -0.0166543f, +0.1660079f, -0.0210174f, +0.0535764f, -0.0670539f, -0.1452881f,
  -0.2487378f, -0.1016137f, -0.3600055f, +0.0730580f, -0.1390021f, +0.0225179f, -0.2479080f, -0.1477341f,
  -0.1832708f, -0.0795294f, +0.2367814f, +0.0428630f, +0.1329922f, -0.0216797f, -0.0094949f, +0.0633205f,
  +0.1128062f, +0.0332164f, -0.0035992f, +0.2243326f, +0.1859956f, +0.0955574f, -0.1387345f, -0.1110572f,
  -0.0294897f, +0.0115923f, -0.0774443f, +0.0829720f, -0.0332595f, -0.0985890f, +0.2919704f, -0.2016183f,
  -0.0028886f, -0.1866739f, +0.1624747f, -0.0050859f, +0.0333706f, -0.1620732f, +0.2464373f, -0.0644438f,
  +0.0052555f, -0.1916446f, -0.2159932f, -0.0694281f, +0.0228674f, +0.0015013f, +0.0467604f, -0.0649146f,
  -0.0561512f, +0.0702573f, +0.0185444f, -0.0264471f, -0.0297495f, -0.1214454f, +0.1508558f, -0.2146238f,
  -0.0649848f, -0.0270212f, -0.0126327f, -0.3836702f, -0.1376426f, +0.1417090f, -0.1019555f, +0.0809432f,
  +0.1883429f, -0.0989805f, +0.2211754f, +0.1465939f, +0.0698430f, -0.1465654f, +0.0183121f, +0.1732524f,
  +0.0893820f, +0.3772645f, -0.0286792f, +0.2398411f, -0.0050086f, -0.0537613f, +0.2949857f, -0.5547764f,
  +0.2715737f, -0.2554743f, +0.2540092f, -0.2171133f, -0.1700206f, -0.1130063f, -0.0492447f, -0.0928880f,
  -0.0237227f, +0.0920973f, -0.0578876f, +0.4071513f, +0.0228987f, -0.0658250f, +0.3920083f, +0.0662294f,
  -0.0872932f, -0.3567859f, +0.3650300f, -0.1376390f, +0.4975800f, +0.1818806f, +0.2184017f, -0.0280034f,
  +0.0649202f, -0.0276972f, +0.0328810f, +0.1085449f, -0.1550860f, -0.2646172f, +0.2217685f, -0.0406869f,
  -0.0102891f, -0.0903876f, +0.3631309f, +0.0134427f, -0.0627076f, -0.2517918f, +0.0242430f, +0.0573280f,
  -0.0062179f, -0.0992977f, +0.2584355f, -0.2157380f, +0.1462586f, -0.1629007f, +0.2505177f, +0.0252809f,
  -0.0116842f, -0.0110025f, +0.2674652f, +0.0425188f, -0.0521218f, +0.0430433f, +0.2606756f, +0.0860749f,
  +0.2026105f, +0.0552551f, -0.0795086f, -0.3324926f, +0.1964526f, -0.0222889f, -0.1686580f, -0.0614464f,
  -0.0725600f, +0.1132135f, -0.1006994f, -0.2169427f, +0.4069425f, -0.2018711f, +0.2462461f, +0.1753228f,
  +0.1887522f, -0.0079516f, +0.0207216f, +0.2148959f, -0.1744761f, +0.1450313f, +0.1210360f, -0.2005391f,
  +0.0738576f, -0.0138093f, -0.2927763f, -0.1873103f, +0.0851424f, +0.0336995f, +0.2117215f, -0.2009683f,
  +0.1337365f, +0.0308414f, -0.0716018f, -0.4913702f, +0.1540841f, +0.0304268f, +0.3201930f, +0.2626923f,
  -0.0074312f, -0.0843812f, +0.1520171f, -0.0637798f, +0.0503582f, -0.3443369f, -0.0193789f, -0.0630027f,
  -0.0459890f, -0.1143689f, +0.0819094f, +0.0060887f, -0.0269085f, +0.2436954f, +0.2411095f, -0.0215413f,
  +0.3165000f, -0.3244829f, -0.1292655f, -0.1443014f, +0.3262926f, -0.1559734f, -0.1641051f, -0.0957219f,
  +0.1384301f, -0.2095417f, -0.2333809f, +0.3860036f, -0.3398334f, +0.0901462f, -0.1943938f, -0.0019658f,
  -0.0708949f, +0.1219581f, +0.0067532f, +0.1915115f, +0.3440188f, +0.1606866f, +0.0350321f, +0.1093695f,
  -0.1004468f, +0.1329462f, -0.1391082f, -0.2901822f, +0.0369568f, -0.1217896f, -0.0420230f, +0.0346163f,
  -0.1934769f, -0.0976983f, +0.1538138f, -0.2632367f, +0.3249840f, +0.0831620f, +0.1500222f, -0.0978073f,
  +0.0805726f, +0.1308689f, -0.0545956f, +0.1617871f, +0.4305717f, +0.2489641f, -0.3031557f, -0.1017469f,
  -0.0528061f, -0.2555896f, -0.2498322f, -0.0658925f, -0.0003918f, -0.0171385f, +0.0749896f, +0.0631488f,
  -0.0926044f, -0.1552395f, +0.2204370f, -0.0595574f, +0.1488227f, -0.0273874f, +0.1656011f, -0.0777281f
);

const float biases[4] = float[4](
  +0.0220571f, -0.0034805f, +0.0454768f, -0.0749629f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer91 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0654168f, -0.2366693f, +0.2896945f, -0.0803590f, -0.2581659f, +0.1699612f, -0.1245165f, -0.0700560f,
  +0.0023196f, -0.1470398f, -0.0292148f, -0.0446799f, -0.1353262f, +0.0689977f, +0.0895302f, -0.0182132f,
  -0.1859032f, +0.1509280f, -0.0816822f, +0.1906269f, +0.0068379f, -0.1943192f, -0.0797961f, -0.0394466f,
  +0.1279325f, -0.0036531f, +0.0833386f, -0.1808329f, +0.0932002f, +0.0019224f, +0.0112563f, -0.1038240f,
  +0.1998111f, +0.2146921f, -0.3132500f, +0.0188801f, -0.0855186f, +0.1983289f, +0.1507860f, -0.2612400f,
  +0.2594742f, +0.1201206f, -0.0494997f, +0.1371271f, +0.1073773f, +0.1089607f, +0.0079627f, -0.1433198f,
  -0.2126058f, -0.0394473f, -0.0493743f, +0.0610865f, -0.1264378f, +0.1262089f, -0.1494081f, +0.1657782f,
  -0.1429582f, +0.4548205f, -0.0155601f, -0.0874748f, -0.0592998f, -0.0609045f, +0.0181323f, -0.0885059f,
  -0.1213396f, -0.0487234f, -0.0139582f, +0.2491842f, -0.1066883f, -0.0316732f, -0.0958872f, -0.0049928f,
  -0.0000648f, -0.0508608f, -0.1646031f, -0.3691296f, -0.0287473f, -0.1860983f, -0.1079702f, -0.0247310f,
  -0.1004490f, +0.1680944f, +0.2644940f, -0.2597451f, +0.0531448f, +0.1236678f, -0.1285239f, +0.0112443f,
  -0.0035041f, +0.0408884f, -0.0013275f, -0.1313720f, -0.0307513f, -0.0656674f, -0.0087361f, -0.0521907f,
  +0.1786219f, -0.1312396f, +0.2134652f, -0.0480680f, -0.1305679f, -0.2353573f, -0.0575249f, +0.0613775f,
  -0.0216067f, -0.3574319f, -0.2998326f, +0.1565665f, +0.0746945f, -0.1108124f, -0.3414944f, -0.1859024f,
  -0.1351040f, -0.1356632f, +0.2417388f, +0.2571305f, +0.0876007f, -0.2940117f, -0.1219892f, +0.0177527f,
  +0.2912512f, -0.2649316f, +0.1589454f, +0.3520263f, +0.0852396f, +0.2656157f, +0.0404779f, -0.1032403f,
  -0.2138636f, -0.1733824f, -0.0192124f, -0.1544221f, +0.3519219f, +0.1484114f, +0.0329894f, -0.1704057f,
  +0.0135222f, -0.0973733f, -0.0618471f, -0.3422858f, -0.1537337f, +0.1711075f, +0.0669945f, -0.0176515f,
  -0.1380927f, +0.1278293f, +0.0554828f, +0.0062024f, -0.0013829f, -0.0636020f, +0.1653320f, -0.1177815f,
  +0.0609555f, +0.1120225f, +0.0963751f, -0.4442466f, +0.0649845f, +0.0087564f, -0.0055942f, -0.2614570f,
  +0.0407309f, -0.1927038f, +0.0457120f, +0.2734141f, -0.2728373f, +0.0741383f, +0.1534379f, +0.0970659f,
  -0.0211494f, -0.0299572f, +0.0219263f, +0.1296348f, +0.0902738f, -0.1254926f, -0.3431902f, -0.2626433f,
  +0.2376015f, -0.1395791f, +0.2059287f, +0.4532081f, -0.0307979f, -0.4010602f, +0.0639711f, -0.1010569f,
  +0.0171548f, +0.0078460f, -0.0731267f, +0.4337753f, +0.2488103f, +0.2118239f, +0.1223883f, +0.3313464f,
  +0.1275989f, -0.1006413f, -0.1036103f, -0.0850158f, -0.0261072f, +0.0212427f, -0.0423146f, +0.2239284f,
  -0.0890235f, -0.0261727f, +0.0606150f, +0.0460138f, +0.0609352f, +0.2300942f, +0.1116668f, +0.0023965f,
  -0.1135278f, -0.0398281f, +0.0353652f, +0.0538152f, +0.0828730f, +0.3103490f, +0.0196129f, +0.0973169f,
  +0.0565678f, -0.0114655f, +0.0708534f, +0.2949718f, +0.2649867f, -0.0122585f, -0.0951671f, -0.1720414f,
  -0.0161310f, -0.0338380f, -0.0191341f, +0.1116171f, -0.2789171f, +0.2256687f, -0.0151200f, +0.0094122f,
  -0.2565238f, -0.0126588f, -0.0519797f, -0.0693391f, +0.1334967f, -0.0865537f, -0.2103890f, -0.0831917f,
  -0.0008023f, -0.3809831f, +0.0052455f, +0.0805772f, +0.2970553f, -0.4095396f, +0.2141975f, -0.0010991f,
  +0.1824703f, +0.0923910f, -0.1523565f, +0.1274847f, -0.0403556f, -0.1766303f, +0.0259054f, +0.1111369f,
  +0.2155345f, -0.0923480f, -0.0643616f, -0.2074015f, -0.1226186f, +0.1868559f, +0.1141546f, -0.1288707f,
  +0.1657272f, +0.1799676f, +0.0436486f, +0.2178218f, +0.0128539f, -0.1389161f, +0.0744719f, +0.0119109f,
  +0.0496030f, -0.5254132f, +0.1082833f, +0.3305951f, +0.0512082f, +0.3140472f, -0.0806714f, +0.2202903f,
  -0.2040028f, -0.0398955f, +0.2170132f, -0.0328970f, +0.0362520f, -0.1950045f, +0.1113480f, +0.1073942f
);

const float biases[4] = float[4](
  +0.0100114f, +0.0095579f, +0.0141448f, +0.0072501f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer92 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.3414298f, +0.0211137f, +0.0046279f, +0.2029070f, -0.1737119f, +0.0588901f, -0.0113757f, +0.3306008f,
  +0.2300941f, -0.1019361f, -0.1012375f, +0.0278219f, -0.0011220f, +0.0724819f, +0.0810354f, -0.1330638f,
  -0.0798998f, -0.0521909f, +0.0344242f, -0.0367127f, -0.0162440f, -0.0651967f, +0.1180153f, +0.1863741f,
  +0.0494131f, +0.0596973f, +0.1659101f, -0.0947800f, -0.1953133f, -0.1254739f, -0.0596576f, -0.2206294f,
  +0.3478691f, +0.2057695f, +0.2662340f, +0.0797207f, -0.1517095f, -0.0460320f, -0.0540451f, +0.0284172f,
  -0.0107020f, -0.0472066f, -0.1574343f, +0.0887871f, -0.0027356f, -0.1230904f, -0.1688338f, -0.0560852f,
  -0.0998952f, +0.0229132f, -0.1712815f, +0.1962510f, -0.2137886f, -0.0630479f, +0.2242001f, +0.3060777f,
  -0.2251600f, +0.0223461f, +0.0975277f, +0.0938773f, +0.0971920f, -0.1691795f, +0.0882179f, -0.2251422f,
  +0.2143179f, -0.1940407f, +0.0447159f, +0.1846916f, -0.2266856f, +0.0140933f, -0.0832863f, +0.3860488f,
  +0.0955818f, +0.3263047f, +0.0779515f, -0.1192833f, +0.2933927f, +0.1777308f, +0.1043696f, +0.1885882f,
  +0.0393026f, +0.0592857f, +0.0598047f, -0.1517219f, -0.1760667f, +0.2755843f, +0.1874509f, +0.5687250f,
  -0.2805707f, +0.0608240f, +0.2044811f, -0.2220270f, +0.1689856f, +0.2729872f, +0.2310906f, +0.0783212f,
  -0.0628840f, +0.1175652f, -0.0981431f, +0.1529786f, +0.0747083f, +0.1286382f, -0.0009363f, +0.2401273f,
  +0.1167923f, -0.3251284f, -0.1306317f, +0.0437820f, +0.1694017f, +0.0958340f, -0.0107688f, -0.1097202f,
  +0.2170902f, +0.2606255f, +0.0765545f, -0.1091519f, -0.1732049f, +0.1942654f, -0.1687145f, -0.1088932f,
  -0.0525974f, +0.0269276f, +0.1433544f, -0.2279572f, +0.0983093f, +0.1562066f, +0.0058384f, +0.1580262f,
  -0.0246422f, +0.0768920f, -0.1941438f, -0.0341484f, +0.2028909f, +0.0314741f, +0.2677838f, -0.0919061f,
  +0.0067553f, +0.2810246f, +0.1661494f, -0.0155055f, -0.0253068f, +0.0328058f, -0.2281023f, +0.0015516f,
  +0.1521271f, +0.1602507f, -0.0204979f, -0.1382835f, -0.0097601f, +0.0863397f, -0.1667495f, +0.0796148f,
  +0.0585507f, -0.0071574f, +0.1075575f, -0.0748712f, -0.0661862f, -0.2621565f, -0.1564693f, +0.3386641f,
  -0.1471701f, +0.2725904f, +0.1761923f, +0.2037967f, +0.0869181f, -0.0141313f, -0.1091492f, +0.2281040f,
  -0.1702203f, +0.0569657f, -0.0433456f, -0.2282408f, -0.0365075f, -0.0716290f, +0.2592149f, +0.2684382f,
  -0.1640922f, +0.0006989f, -0.2187887f, -0.3058518f, +0.2661650f, +0.0144618f, +0.1936518f, -0.4555194f,
  -0.1440298f, +0.0055759f, +0.0699561f, +0.2877600f, -0.0617295f, -0.1034132f, +0.1097755f, -0.0065822f,
  -0.0942342f, +0.0434984f, -0.1889297f, +0.1035207f, -0.0005543f, +0.0957754f, +0.0698563f, -0.1869447f,
  +0.0654826f, -0.0622762f, -0.4362674f, +0.2685377f, +0.1273161f, +0.0845902f, -0.1914385f, +0.0068780f,
  -0.0953625f, -0.1524554f, -0.0016013f, -0.0555537f, -0.3496876f, -0.1477870f, -0.0595360f, +0.2379446f,
  -0.1148326f, -0.0506054f, +0.2361067f, -0.2645134f, -0.1967455f, +0.2250842f, -0.2517862f, +0.2468242f,
  +0.3401512f, -0.0792479f, +0.3544945f, -0.0155533f, -0.1677520f, -0.0090320f, -0.1383787f, -0.2925691f,
  +0.1322260f, -0.0492707f, +0.1453024f, -0.0489865f, +0.1283472f, -0.1269850f, -0.2994589f, -0.2130538f,
  +0.2470509f, -0.1191648f, -0.1811696f, +0.1949391f, -0.1862265f, -0.3009067f, -0.0811279f, +0.0517864f,
  +0.3560357f, +0.0735867f, +0.1719894f, +0.1955865f, -0.1526118f, -0.1952135f, -0.2635570f, +0.0307975f,
  -0.0848271f, -0.1782698f, +0.0815264f, -0.0439177f, +0.0378180f, +0.0342445f, -0.1647698f, -0.2171161f,
  +0.1288405f, +0.0271061f, -0.2056583f, -0.3752344f, -0.3704065f, +0.1032859f, +0.1804006f, -0.1192546f,
  -0.1666487f, -0.1319690f, +0.2776330f, +0.2830025f, -0.1924120f, -0.0069776f, +0.1422107f, +0.1120843f,
  -0.2719162f, -0.0526634f, +0.1023344f, +0.2679267f, +0.0005561f, +0.1564677f, +0.2982608f, -0.1836608f
);

const float biases[4] = float[4](
  +0.0096396f, -0.0032914f, +0.0289022f, -0.0012636f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer92 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0865106f, +0.1248876f, +0.0297241f, +0.1834357f, +0.1119248f, +0.0947394f, +0.0930846f, -0.2156110f,
  +0.0592980f, +0.0022562f, +0.0852430f, -0.0431361f, +0.0974340f, +0.0919656f, -0.0756836f, -0.2211887f,
  -0.0081148f, +0.0684381f, +0.2985650f, -0.3052263f, +0.0490191f, -0.0705331f, -0.1695933f, +0.0606095f,
  +0.1504989f, -0.0189081f, -0.1571958f, +0.0395233f, +0.2317711f, -0.0090987f, -0.0639015f, -0.0437745f,
  -0.2110164f, +0.1489029f, -0.1524547f, -0.0318682f, +0.0650806f, -0.0747185f, -0.3241727f, +0.2811906f,
  -0.0893187f, +0.0992915f, +0.1151699f, -0.2221010f, +0.0732947f, -0.0406171f, -0.1529836f, -0.2942688f,
  +0.0039691f, +0.0894794f, +0.3502730f, -0.3538559f, +0.0747247f, +0.0598101f, -0.0045829f, -0.1527748f,
  -0.1811420f, +0.0905594f, -0.1546164f, -0.3390505f, +0.0677942f, +0.0004810f, -0.3402432f, -0.0863135f,
  +0.0167061f, +0.3254849f, +0.2058251f, +0.0819774f, +0.1532781f, -0.0376570f, +0.0592857f, +0.0018667f,
  +0.0619819f, +0.1670710f, -0.0748153f, -0.1001453f, +0.0081199f, +0.1206252f, -0.0834416f, -0.0640768f,
  -0.1494068f, +0.1571536f, +0.1332701f, +0.1115390f, +0.2402449f, +0.1239070f, -0.0887958f, +0.0224157f,
  +0.1777207f, -0.1692674f, -0.3567534f, +0.1158248f, -0.1261265f, +0.0774719f, +0.0764212f, -0.2324926f,
  -0.1913255f, +0.2079006f, +0.1463707f, -0.0908923f, -0.1476943f, -0.0303293f, -0.0065523f, +0.1242548f,
  -0.1549528f, +0.1035933f, +0.1673794f, -0.0831760f, -0.2319800f, +0.0610519f, -0.2901796f, +0.0041374f,
  -0.0604243f, -0.0043796f, +0.0208188f, +0.1895372f, +0.0903775f, -0.1246123f, -0.4130403f, +0.0727891f,
  -0.0695527f, -0.0408056f, -0.0778079f, +0.2181478f, +0.1117991f, -0.1815613f, -0.1229135f, -0.0678714f,
  -0.1553724f, +0.0356975f, +0.0187745f, +0.1664790f, +0.1633954f, -0.1366151f, +0.0556178f, -0.3142580f,
  +0.0957408f, -0.0189242f, +0.2091664f, -0.1897520f, +0.1437335f, -0.0213851f, +0.1932064f, -0.3453196f,
  +0.2584173f, -0.0070542f, +0.1226215f, -0.2066722f, +0.0469613f, -0.0907868f, -0.0937146f, -0.2782343f,
  +0.2459023f, -0.4185641f, -0.1064616f, +0.1590512f, -0.0370114f, -0.1342020f, -0.3009596f, +0.1546974f,
  -0.4762664f, -0.2525486f, -0.2711254f, -0.0632719f, -0.0539094f, -0.3004137f, -0.2586441f, -0.1067426f,
  -0.4079286f, -0.2190115f, -0.1400551f, +0.1612550f, -0.2391550f, -0.1759240f, +0.1105855f, +0.1026913f,
  -0.1167226f, -0.5841639f, -0.2767429f, -0.0744072f, -0.1449853f, -0.0684822f, +0.0342034f, -0.0510086f,
  +0.1327964f, +0.0343129f, +0.0302322f, -0.0482551f, -0.1300664f, +0.0258146f, +0.1826359f, -0.3238973f,
  +0.0639690f, +0.0299706f, -0.2440916f, +0.0394946f, +0.1660623f, -0.0886149f, -0.1682416f, -0.0486386f,
  +0.0399140f, +0.0421657f, -0.0672895f, -0.0880054f, +0.1908081f, -0.1272101f, -0.1792729f, +0.3193187f,
  +0.0027620f, +0.0141466f, -0.0782492f, -0.3052244f, -0.1673445f, -0.0222503f, -0.3445503f, -0.0544612f,
  -0.0658523f, +0.1782270f, -0.1211281f, +0.0689570f, -0.0274524f, -0.1441342f, -0.0734681f, -0.2082907f,
  -0.0238118f, +0.1508267f, -0.2680003f, +0.1040744f, +0.2114277f, +0.1453670f, +0.0541468f, +0.1360234f,
  -0.0729697f, +0.0723809f, -0.0170625f, +0.0042056f, +0.1637506f, +0.1257058f, -0.2472280f, +0.0339576f,
  +0.0987028f, -0.0123883f, -0.1494619f, -0.1294103f, -0.1447474f, -0.2081901f, -0.0791599f, +0.1579551f,
  -0.1504887f, +0.6435299f, +0.0752384f, -0.0752129f, -0.0604338f, +0.2766755f, +0.0606301f, +0.2389394f,
  -0.0177488f, -0.2161154f, +0.2000432f, -0.2965813f, +0.1995767f, +0.0578616f, -0.0513307f, -0.3786315f,
  -0.0238686f, +0.0349076f, -0.1318595f, +0.1572319f, -0.0263117f, -0.0294513f, +0.1824558f, +0.0276543f,
  -0.1163233f, +0.0804739f, -0.4141076f, -0.0025048f, +0.1127867f, -0.0035635f, +0.0385925f, +0.0510156f,
  +0.2551378f, -0.0706534f, -0.1619163f, -0.1141405f, -0.0971234f, -0.0592991f, -0.1134655f, -0.1190023f
);

const float biases[4] = float[4](
  +0.0293424f, -0.0032368f, +0.0150963f, +0.0053136f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer93 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0665410f, +0.1134180f, -0.2588958f, +0.0093403f, -0.1714304f, +0.0704434f, +0.0154590f, -0.1140598f,
  +0.0776107f, -0.1044001f, -0.0691024f, +0.0937169f, -0.1084987f, +0.0792706f, -0.1013377f, +0.1969037f,
  -0.1362505f, +0.1471944f, +0.0183541f, -0.1855984f, +0.1524755f, -0.2606471f, -0.2126843f, -0.2055851f,
  -0.1095459f, -0.1581894f, +0.1070288f, +0.0475186f, +0.0114074f, +0.0245575f, -0.0178808f, -0.0628397f,
  +0.0286803f, -0.1109473f, -0.2978080f, -0.0634418f, +0.0572620f, +0.0800732f, -0.0385340f, +0.1738564f,
  -0.3098378f, -0.1233085f, -0.0215453f, -0.0283245f, +0.0842720f, +0.2157040f, -0.0717208f, -0.3992314f,
  +0.0179936f, +0.2691742f, -0.0364961f, -0.1943353f, -0.1949804f, -0.2029671f, +0.0049552f, -0.0293915f,
  +0.1189865f, +0.0663930f, +0.2150748f, +0.0051645f, -0.3148294f, -0.1216839f, +0.0247431f, -0.0952826f,
  +0.1275435f, +0.0799124f, -0.2054011f, -0.1903929f, -0.1925794f, +0.1141644f, -0.0432351f, +0.0303712f,
  -0.0693191f, -0.0241485f, -0.1805137f, -0.0195896f, +0.0406343f, +0.0490972f, +0.0549480f, +0.0877469f,
  +0.3420070f, -0.0874351f, -0.0725697f, +0.7359350f, +0.2059184f, +0.2482419f, -0.0370539f, -0.1065963f,
  +0.0795269f, -0.1855356f, +0.0106559f, +0.4542729f, +0.0619650f, -0.2760085f, -0.0999200f, -0.2463752f,
  -0.1973252f, -0.1595167f, +0.1161367f, +0.3047149f, -0.1851138f, -0.0532331f, -0.0570028f, +0.1840798f,
  -0.2879678f, -0.2194642f, +0.1462414f, +0.1882958f, +0.2056637f, +0.1521420f, +0.0305473f, -0.1507433f,
  +0.0697599f, -0.1812201f, +0.0596962f, +0.1315562f, +0.1858746f, +0.3161652f, +0.2090064f, +0.2263230f,
  +0.0966668f, +0.1937770f, +0.0720338f, +0.1577199f, -0.0130156f, -0.3005996f, +0.0250855f, -0.0483975f,
  +0.0860110f, +0.0272554f, -0.1798117f, -0.0945205f, -0.1447750f, -0.1422468f, -0.2176930f, +0.0864981f,
  +0.2065043f, +0.0527108f, -0.1343147f, -0.1999548f, -0.1143097f, +0.0195786f, -0.0682167f, +0.2270729f,
  +0.2006729f, +0.0488629f, +0.0704412f, -0.1681322f, -0.0858375f, +0.0242393f, -0.0158947f, +0.0843047f,
  +0.0115664f, +0.0809030f, +0.0950033f, +0.2864052f, -0.2530697f, +0.3070939f, +0.0421695f, +0.0655706f,
  +0.1184285f, +0.0631119f, +0.1716526f, +0.2011461f, -0.0465151f, -0.0458004f, +0.0094246f, +0.1188824f,
  +0.0872053f, -0.0310807f, -0.2940520f, -0.4699333f, +0.0324777f, -0.0927971f, +0.2463205f, +0.2493307f,
  -0.1132465f, +0.2027856f, +0.0071843f, -0.2320899f, -0.1276492f, +0.1217811f, -0.0082818f, +0.2279231f,
  +0.0710723f, -0.0114399f, -0.0967194f, +0.0557616f, -0.1899678f, +0.1188791f, -0.0380962f, -0.0826980f,
  -0.1124225f, -0.0707031f, -0.0049462f, -0.1526209f, -0.1923690f, -0.1764432f, -0.2443983f, -0.0462067f,
  +0.1101816f, +0.1530934f, +0.1227153f, +0.0790128f, +0.0334819f, -0.2664792f, -0.0628873f, -0.1743435f,
  +0.0481522f, +0.1017120f, -0.1536974f, -0.1151168f, +0.0940643f, +0.1953233f, -0.2860126f, +0.1241069f,
  +0.0440841f, +0.0293465f, -0.0510094f, -0.0861104f, -0.0824418f, +0.0142594f, -0.3057544f, +0.3592207f,
  -0.1617773f, -0.0793267f, -0.1489305f, +0.4711111f, +0.2155124f, -0.1284149f, +0.0960025f, +0.1983682f,
  +0.3523997f, -0.1209241f, +0.0304569f, -0.0243111f, -0.1614558f, +0.0600148f, +0.0732169f, +0.2427230f,
  +0.2683654f, -0.2627881f, -0.0139378f, -0.1604585f, +0.0954946f, -0.1864048f, -0.4447066f, +0.2415654f,
  -0.0216287f, +0.2139392f, +0.3706762f, +0.4574250f, -0.0753655f, +0.0068459f, +0.1701610f, -0.0456482f,
  -0.1264180f, -0.1042340f, -0.2610800f, +0.1837167f, +0.1111703f, +0.2051133f, -0.0726753f, -0.1597009f,
  -0.0853999f, +0.2459583f, -0.1955534f, +0.1185532f, +0.0405725f, -0.1952551f, -0.0293049f, +0.0779143f,
  +0.0314323f, -0.1296285f, +0.1522692f, +0.1163746f, +0.3910477f, -0.0730282f, +0.0607277f, +0.0461531f,
  +0.3605506f, -0.3860522f, -0.1602419f, +0.0260179f, +0.1446716f, -0.0419928f, -0.0224398f, -0.0575008f
);

const float biases[4] = float[4](
  -0.0128116f, +0.0138100f, +0.0073309f, +0.0344001f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer93 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3060425f, -0.5605637f, +0.3084482f, +0.1465074f, +0.1575322f, -0.2618284f, +0.0555117f, +0.2774307f,
  +0.2958383f, -0.0244377f, +0.2373116f, +0.1767510f, +0.1367882f, -0.1618386f, +0.3117024f, +0.0625035f,
  -0.0721333f, -0.4943635f, -0.1106923f, +0.0899916f, -0.0965947f, +0.0207499f, -0.1441605f, +0.1099133f,
  +0.0177509f, +0.0687956f, +0.1951551f, +0.0917220f, -0.0253972f, -0.1197135f, -0.0558113f, +0.1349362f,
  -0.3913309f, +0.2032395f, -0.0865518f, -0.2042403f, +0.2477251f, -0.1572522f, -0.0322506f, -0.1867214f,
  +0.1262345f, +0.1247347f, -0.0141114f, +0.2241278f, -0.0176536f, -0.4408353f, -0.2128431f, +0.1317890f,
  +0.1340422f, +0.1369200f, -0.1303749f, -0.0512001f, +0.0277937f, -0.0513363f, -0.3240303f, +0.0008593f,
  +0.0948687f, +0.0817278f, -0.0880767f, -0.0678900f, +0.1345487f, -0.2053112f, +0.1614287f, -0.0162652f,
  -0.0333176f, -0.1232675f, +0.1628241f, -0.0039260f, +0.3586198f, -0.1050328f, -0.0565624f, +0.0782284f,
  -0.0845788f, -0.0313625f, -0.2748204f, +0.0986750f, +0.3960323f, -0.0832067f, -0.1266557f, +0.0053054f,
  +0.2905229f, -0.0661876f, +0.1364513f, -0.0368620f, -0.1367033f, -0.2326882f, -0.0577483f, -0.2688165f,
  -0.0193455f, -0.0287763f, +0.0939873f, -0.1032460f, +0.1036568f, -0.4449228f, +0.0095923f, +0.2313887f,
  +0.3083835f, -0.0654993f, +0.0946184f, +0.1684593f, -0.0670644f, -0.1725937f, -0.1189082f, -0.0259155f,
  +0.1549363f, -0.0997882f, -0.0579544f, -0.2060906f, -0.1222397f, +0.0713143f, +0.0613830f, -0.0796841f,
  +0.0465172f, +0.0835585f, +0.0220514f, +0.0835721f, -0.0523791f, -0.2352927f, +0.0464793f, +0.2477505f,
  -0.0613675f, +0.1174794f, +0.1021469f, +0.3793256f, +0.1510451f, +0.0567308f, +0.1097925f, +0.1808963f,
  +0.1279368f, -0.1604184f, +0.1505066f, +0.2849351f, -0.0466665f, -0.5516143f, -0.0371357f, -0.1726564f,
  +0.1051146f, +0.1148755f, -0.0381111f, +0.2130614f, -0.0369862f, +0.1938027f, +0.1503291f, -0.0757373f,
  -0.1061926f, -0.0649489f, -0.3046579f, +0.1228742f, -0.0404154f, +0.0880423f, -0.0487222f, +0.0964803f,
  -0.1187280f, +0.1855697f, -0.3426078f, -0.0223296f, +0.2725580f, -0.2029130f, +0.0309046f, -0.0027743f,
  +0.0463288f, +0.0583718f, +0.0632923f, -0.2241439f, +0.1586070f, -0.0871543f, -0.0489522f, -0.0379868f,
  +0.4739279f, +0.2759183f, +0.1276529f, -0.4291194f, +0.1885386f, +0.0296576f, +0.1667682f, -0.1243423f,
  +0.1049230f, -0.2403522f, +0.1761353f, +0.1264748f, +0.1919203f, +0.1970239f, -0.3307402f, -0.1027179f,
  +0.0007059f, -0.1225470f, -0.1201723f, +0.1851546f, -0.1661410f, -0.2087146f, -0.0855911f, +0.0491195f,
  -0.2889490f, -0.3838864f, +0.0629609f, -0.0337938f, -0.0308572f, -0.2803048f, -0.0084007f, +0.1454089f,
  -0.0508958f, -0.2087914f, +0.0250934f, -0.6569538f, -0.2648291f, +0.0229658f, +0.3264777f, +0.0812932f,
  -0.0513549f, -0.1433114f, +0.1107379f, -0.1286886f, -0.0660725f, +0.4971393f, +0.2654077f, -0.0920429f,
  -0.0097886f, -0.1313487f, -0.2535086f, +0.1219599f, +0.1829731f, -0.0185207f, +0.0987128f, -0.4010747f,
  +0.0079470f, -0.0422177f, +0.3458165f, -0.2562402f, +0.0899156f, -0.0077889f, +0.1324782f, -0.1391760f,
  +0.1727006f, -0.1533870f, -0.0814997f, +0.0573627f, -0.0945673f, +0.0621083f, -0.0590345f, -0.0630778f,
  +0.1320326f, -0.0319744f, -0.0639668f, +0.1176481f, +0.4457805f, +0.2386288f, +0.1800357f, +0.1605389f,
  -0.1637321f, -0.2351270f, -0.3006766f, +0.0524709f, -0.0435262f, +0.0324307f, -0.0018850f, +0.0897439f,
  +0.0831188f, +0.1389472f, +0.0520138f, +0.1899104f, -0.0195838f, +0.1805295f, -0.0896472f, +0.1211369f,
  -0.2386679f, -0.0769766f, +0.1684872f, +0.3715086f, -0.0741092f, -0.1496793f, +0.1936485f, -0.0323497f,
  -0.0545875f, -0.0518023f, +0.0559118f, -0.0277847f, +0.0026270f, +0.0854973f, +0.0208719f, -0.0287771f,
  +0.0276673f, -0.1590460f, +0.0792156f, +0.0527887f, -0.0183793f, +0.1594579f, +0.0152554f, +0.0941087f
);

const float biases[4] = float[4](
  +0.0331663f, -0.0508273f, -0.0135320f, +0.0259022f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer94 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1218893f, -0.3408960f, +0.0029100f, -0.0875732f, -0.2747366f, -0.1475457f, +0.1060013f, +0.0593345f,
  -0.0144631f, -0.1437282f, +0.1323101f, +0.0431439f, +0.0628374f, -0.1427036f, -0.3488142f, +0.2456726f,
  +0.0576952f, -0.1816841f, -0.0920766f, +0.0163881f, -0.2442403f, +0.2680992f, -0.0836427f, +0.1836437f,
  +0.2490441f, +0.1296202f, +0.0053473f, +0.2906807f, -0.0721523f, +0.1610271f, +0.5771265f, -0.1960942f,
  +0.1257381f, -0.2571529f, +0.0992572f, +0.2760069f, +0.1578515f, +0.0306102f, -0.0873603f, +0.0674433f,
  -0.1438381f, +0.0022613f, -0.1187998f, +0.0181986f, +0.1282336f, -0.3059533f, +0.0567597f, -0.0509718f,
  +0.0046215f, +0.2167493f, -0.0074067f, -0.1420252f, -0.1156789f, +0.0825800f, -0.0488863f, -0.0242573f,
  -0.2376252f, -0.3632683f, -0.1082473f, +0.0779742f, +0.4099329f, +0.0842716f, +0.0519773f, +0.0270517f,
  +0.3070225f, -0.1761110f, -0.1734568f, -0.0721788f, -0.1618493f, -0.1966365f, +0.0086536f, +0.2399332f,
  -0.3018236f, -0.0302818f, -0.0570220f, -0.0172392f, +0.1642693f, +0.0906564f, -0.1106212f, +0.0677821f,
  +0.2155685f, +0.1685616f, +0.0675796f, +0.1343202f, -0.0329066f, +0.0685126f, +0.3822356f, +0.0474844f,
  -0.2133496f, -0.0639808f, +0.2505257f, +0.2264328f, -0.0635816f, -0.2981668f, -0.0046278f, -0.0071914f,
  -0.1395858f, +0.2577529f, +0.0833933f, +0.0614493f, -0.0945313f, +0.2230373f, -0.0258146f, -0.1991929f,
  +0.2836736f, +0.1072917f, -0.0770638f, +0.0359775f, -0.1025171f, +0.3183739f, -0.2021780f, +0.1599893f,
  -0.2943456f, +0.0987142f, +0.1723350f, -0.0134712f, +0.0671540f, -0.1380089f, +0.0997147f, +0.0681767f,
  -0.0669651f, +0.3884530f, -0.0072937f, +0.0761559f, +0.1843520f, -0.0923281f, -0.0653833f, +0.1845282f,
  +0.2020178f, +0.1192834f, +0.1289760f, +0.1281414f, +0.1337798f, +0.2558374f, +0.0904592f, -0.1495436f,
  +0.0176751f, -0.0720148f, -0.1250576f, -0.2106979f, -0.0535946f, -0.0359098f, -0.2817882f, -0.0167773f,
  +0.2555405f, -0.1488878f, +0.0927151f, -0.1073159f, +0.1798709f, +0.3088306f, -0.1059392f, -0.0429838f,
  -0.2547170f, -0.0887852f, -0.1895519f, -0.3347318f, +0.1602646f, -0.0195985f, +0.5208023f, -0.2006033f,
  -0.2262557f, +0.0422649f, -0.2732163f, +0.1883755f, -0.0443775f, -0.1579911f, -0.0419379f, +0.2448653f,
  +0.0348749f, -0.3241635f, +0.0056331f, +0.0381653f, -0.0028281f, +0.0940386f, -0.0104218f, -0.0608230f,
  +0.1828920f, -0.0144439f, -0.1046550f, -0.2222453f, -0.2505364f, +0.1087985f, +0.0240526f, +0.0501254f,
  +0.0045000f, -0.2364471f, +0.0850162f, -0.2800411f, +0.1397930f, +0.1084630f, +0.0193193f, +0.2289455f,
  -0.1351919f, -0.1242221f, +0.0032879f, +0.0370239f, -0.0050908f, -0.1957155f, -0.0134135f, -0.0367027f,
  +0.2904439f, +0.2682193f, +0.1164228f, -0.2553456f, -0.1374724f, -0.3795823f, +0.0609184f, -0.1896079f,
  +0.1247335f, -0.3145666f, +0.0543052f, -0.0533279f, -0.0117610f, +0.2761359f, +0.1383530f, -0.1558201f,
  +0.2969705f, +0.0128491f, +0.0386518f, -0.0024145f, +0.0943412f, -0.1751629f, +0.1692010f, +0.1864260f,
  +0.0139179f, +0.2934558f, +0.1163681f, +0.1173325f, +0.0487809f, +0.0960064f, -0.3680599f, -0.1967226f,
  +0.0517152f, +0.1509385f, +0.0504023f, -0.1167647f, -0.0968208f, +0.0662004f, +0.1245043f, -0.2355013f,
  -0.2005743f, +0.2672844f, -0.0004400f, -0.1272218f, -0.0197808f, +0.0351594f, +0.1305390f, -0.1689646f,
  -0.0167972f, +0.3542837f, +0.2121906f, -0.2209371f, +0.3213897f, +0.3010670f, -0.0683322f, +0.2304178f,
  +0.0396580f, -0.0338610f, +0.1275065f, -0.1415219f, +0.1726348f, +0.0625156f, -0.2843998f, +0.0339515f,
  +0.0388076f, -0.0621594f, -0.2623931f, -0.1448126f, +0.3868411f, -0.1812808f, -0.0967619f, +0.1258853f,
  -0.0787792f, -0.3235714f, -0.0719939f, -0.2162191f, +0.0158017f, -0.0172268f, +0.3461390f, -0.1131153f,
  +0.0124247f, -0.1542112f, -0.0404768f, +0.2648119f, -0.1646046f, +0.2360175f, +0.0308191f, +0.3457733f
);

const float biases[4] = float[4](
  +0.0023587f, -0.0172277f, +0.0145875f, +0.0160511f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer94 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0221019f, +0.0839899f, -0.0146966f, +0.0582224f, -0.1579357f, -0.0798697f, -0.2220670f, +0.0011379f,
  -0.0257909f, -0.1340073f, -0.0918520f, -0.1288156f, +0.0800394f, +0.0994114f, +0.1068117f, -0.0560431f,
  -0.0593709f, +0.0119508f, -0.0071644f, -0.0664856f, -0.0949015f, +0.2994179f, -0.3060739f, -0.1660804f,
  -0.5487015f, +0.0529117f, +0.0071497f, -0.2011315f, -0.0541231f, -0.1919426f, +0.2399006f, -0.2035218f,
  +0.0270991f, -0.1700471f, +0.2130540f, +0.3943350f, -0.1658071f, -0.2332112f, -0.1694758f, -0.0441390f,
  +0.0349852f, +0.0375184f, +0.2030011f, -0.0212828f, +0.1656689f, +0.2228859f, -0.1141860f, -0.4431930f,
  +0.2629040f, -0.2587339f, +0.0917358f, +0.1489719f, +0.0532442f, -0.2287337f, +0.0555471f, -0.2199735f,
  +0.1269445f, -0.0035428f, +0.0974127f, -0.1425647f, +0.2221215f, +0.1046213f, -0.1606430f, -0.3793211f,
  +0.0636566f, +0.0569143f, -0.0448678f, +0.1244365f, -0.0663978f, +0.0630207f, +0.0630941f, -0.0462718f,
  +0.1571072f, -0.0728464f, +0.2077494f, +0.1206797f, -0.1694317f, +0.2357128f, +0.4062037f, -0.2675050f,
  -0.1429865f, +0.0389349f, -0.0191381f, -0.1852110f, -0.0322573f, +0.1855049f, -0.1313700f, -0.0864612f,
  +0.2658550f, +0.0274686f, -0.0910194f, +0.1281983f, +0.0042954f, +0.0777319f, -0.1316238f, +0.1753265f,
  -0.1439688f, +0.0838001f, +0.0767474f, +0.0337392f, +0.2315357f, +0.2630047f, -0.6225730f, +0.0001563f,
  -0.1351271f, -0.2512594f, +0.0105394f, -0.0164945f, -0.0935477f, -0.1857237f, +0.6658362f, -0.2304203f,
  +0.0611438f, -0.0724744f, +0.0693407f, +0.4052470f, -0.0431856f, +0.2087430f, -0.0285797f, -0.4262236f,
  +0.1740634f, +0.0348906f, -0.0760751f, +0.0869244f, -0.1126284f, +0.2411296f, -0.1050103f, +0.0582779f,
  -0.0523976f, -0.2334895f, -0.2446295f, -0.1824784f, -0.4044140f, +0.1495393f, +0.2243483f, -0.0190148f,
  +0.1107436f, +0.0976450f, -0.2111020f, +0.0495741f, +0.0263995f, -0.1050483f, +0.1123613f, +0.0342078f,
  +0.0233971f, -0.1874485f, -0.0056517f, -0.1171341f, -0.1518118f, -0.2108672f, -0.0364424f, -0.0376147f,
  -0.0030279f, -0.2814081f, -0.2918893f, -0.1706276f, +0.1576884f, -0.0550698f, +0.1116711f, -0.1199224f,
  +0.0225054f, -0.2302624f, -0.2173705f, +0.0078849f, -0.0283374f, +0.2369152f, -0.1137946f, -0.0707649f,
  +0.0633854f, +0.2087452f, -0.0249536f, +0.1380418f, +0.2001615f, -0.0956182f, +0.0207638f, +0.0731678f,
  +0.2193181f, +0.3718648f, +0.0160893f, +0.1036201f, -0.1680189f, +0.0087159f, +0.1542569f, +0.1171804f,
  -0.0224361f, +0.2223509f, -0.2107011f, +0.0244588f, -0.0879854f, -0.0441996f, -0.0595518f, -0.3044250f,
  +0.1290076f, -0.1745457f, -0.0551817f, +0.0115065f, -0.2012652f, +0.3544227f, -0.0310149f, -0.2483840f,
  +0.0136565f, -0.2420605f, -0.0038106f, +0.4244055f, -0.3690320f, -0.0477339f, -0.1530404f, +0.0926022f,
  -0.0801992f, -0.3354425f, -0.0461937f, +0.0199903f, -0.3038893f, +0.0361506f, -0.1742013f, -0.2132890f,
  -0.1569382f, +0.1462985f, +0.0020340f, +0.1852646f, -0.1965023f, +0.0285983f, -0.1529103f, +0.0620726f,
  -0.0983819f, +0.0581423f, +0.2722517f, +0.0817557f, -0.0564819f, +0.0630393f, +0.4801786f, -0.1106985f,
  -0.0757807f, +0.0451013f, -0.0084578f, -0.0965644f, -0.1612750f, +0.1774676f, -0.0765190f, -0.1791256f,
  +0.1024174f, -0.2933596f, -0.2420370f, +0.0685356f, +0.0896763f, -0.0674765f, -0.1175511f, -0.1085238f,
  -0.0404928f, -0.1247134f, +0.2072275f, +0.0255106f, -0.0652314f, -0.0191875f, -0.4916907f, +0.1945334f,
  -0.0920952f, -0.0622154f, -0.2697854f, +0.1445841f, +0.0177186f, -0.2103432f, +0.2858545f, -0.0394341f,
  +0.0798006f, +0.2507386f, +0.0808316f, +0.0461706f, +0.3089565f, +0.0679184f, +0.0711429f, +0.2889648f,
  -0.2232917f, +0.0618387f, -0.0652626f, +0.0550081f, -0.1019963f, -0.0424381f, -0.1759842f, -0.2625501f,
  +0.2912765f, +0.0292616f, -0.3011380f, -0.2689091f, -0.2017789f, +0.2115920f, -0.0368812f, +0.3989911f
);

const float biases[4] = float[4](
  +0.0212131f, +0.0124958f, -0.0053915f, -0.0080028f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer95 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1371424f, +0.1316194f, -0.0706214f, -0.0263570f, +0.2402944f, -0.0044911f, +0.2034716f, +0.0282429f,
  -0.0391323f, +0.0695032f, -0.1449827f, +0.0921249f, +0.0170835f, +0.1236698f, +0.0539518f, +0.3137159f,
  +0.1851285f, +0.1556293f, -0.0061366f, -0.0523177f, +0.0504517f, +0.0856872f, -0.2136434f, -0.0511272f,
  -0.2076910f, +0.0104510f, +0.2049536f, -0.2025126f, -0.0317792f, -0.0515167f, -0.1568186f, +0.1132287f,
  -0.0406437f, +0.0163087f, +0.1269704f, +0.1383173f, +0.0743549f, -0.0847834f, +0.1756058f, +0.0920937f,
  +0.0409707f, -0.0065554f, +0.0791684f, -0.0477645f, -0.0057496f, +0.0791487f, +0.2232652f, +0.1649943f,
  +0.1349101f, +0.5536293f, +0.0484669f, -0.1146591f, -0.1368825f, -0.1416631f, -0.1699979f, -0.3426067f,
  -0.0471663f, +0.1083235f, -0.0230797f, +0.1579890f, +0.0835294f, +0.1066121f, -0.0319223f, +0.0586097f,
  -0.0698293f, -0.2265228f, -0.0916979f, -0.2448203f, -0.1928742f, -0.0662264f, -0.2347263f, -0.2780060f,
  -0.1094100f, +0.0816571f, -0.0151090f, +0.1551306f, +0.0252261f, -0.0861005f, -0.1504684f, -0.2223536f,
  +0.1153578f, -0.0468490f, -0.3886417f, +0.0846757f, -0.0992908f, -0.2539653f, +0.1159637f, -0.0329227f,
  -0.2614227f, -0.1676007f, +0.2460240f, +0.3017832f, -0.0061655f, -0.0777619f, +0.0755792f, -0.1384840f,
  -0.1784410f, -0.2654138f, -0.1374363f, -0.1028298f, -0.1607377f, -0.0533522f, -0.0876293f, -0.1223750f,
  -0.1472328f, -0.1069249f, +0.0716008f, +0.1312484f, +0.2280872f, -0.2291048f, -0.2107466f, -0.1254627f,
  +0.0924082f, -0.0488096f, +0.1240208f, +0.0910399f, -0.1622870f, +0.5380626f, +0.3966482f, +0.0461927f,
  +0.2114141f, +0.1772989f, +0.0637725f, -0.1000206f, -0.0990675f, -0.0202959f, +0.0231208f, +0.2152587f,
  +0.3075490f, +0.0457755f, +0.1224778f, -0.0924807f, +0.0947332f, -0.0998622f, +0.0987798f, -0.2756104f,
  +0.0691018f, -0.1343054f, -0.1733533f, +0.1415541f, +0.0731261f, -0.0602775f, +0.3922139f, -0.0715817f,
  -0.0094430f, -0.1684522f, -0.0717203f, +0.1267064f, -0.2694584f, -0.0582849f, +0.1822594f, -0.0553764f,
  +0.0727277f, +0.3219775f, -0.0218345f, -0.2253437f, +0.1445747f, +0.0423566f, -0.1140757f, +0.2724504f,
  -0.1847922f, +0.0507490f, +0.2125804f, -0.2492244f, -0.1306974f, +0.0377446f, -0.0797117f, -0.1978716f,
  -0.1355775f, -0.1537174f, -0.2173892f, +0.0073705f, +0.0689148f, +0.1534020f, -0.0628742f, -0.1198138f,
  -0.0672624f, +0.0585494f, +0.1130329f, +0.0376610f, -0.0614939f, +0.3178362f, +0.0042119f, +0.0509027f,
  +0.0810074f, +0.0865923f, +0.0711201f, +0.0076907f, -0.1590514f, -0.2338369f, +0.1470881f, -0.1850423f,
  -0.0031359f, -0.1789247f, -0.0657029f, +0.1726843f, -0.0721160f, -0.1528874f, -0.0666329f, +0.2207996f,
  +0.0811348f, +0.0387345f, -0.1608482f, -0.3270421f, -0.3524836f, +0.3405656f, +0.0637743f, +0.2227372f,
  +0.0491381f, +0.0411584f, +0.0052118f, -0.1355649f, +0.0711761f, +0.1113814f, -0.0942594f, -0.0145340f,
  +0.5183507f, +0.0558972f, -0.1110942f, +0.1339230f, +0.1985622f, +0.1571823f, +0.0866554f, -0.0184002f,
  -0.2411281f, -0.1065581f, -0.3150593f, +0.1048171f, +0.2014042f, -0.0178318f, -0.1689020f, -0.6269915f,
  -0.0764250f, -0.1230336f, -0.3054641f, +0.2856582f, +0.1421427f, -0.0789889f, -0.1609837f, +0.0755190f,
  +0.1463107f, -0.0376103f, -0.3067040f, -0.2080361f, +0.0635429f, -0.0533470f, -0.0253435f, -0.0036710f,
  +0.3145982f, -0.0774678f, -0.0578494f, +0.0893430f, +0.3164329f, -0.2291330f, -0.2265577f, +0.0545264f,
  -0.2205609f, +0.2189289f, -0.3112642f, +0.1518511f, +0.1149965f, +0.0383731f, +0.1265199f, -0.1407655f,
  +0.1766142f, -0.0391360f, -0.0469036f, -0.0673427f, +0.1681613f, +0.1963778f, +0.1842164f, +0.0814374f,
  +0.0080220f, +0.1037660f, +0.0679430f, +0.1651759f, +0.3125228f, +0.1107559f, +0.0765098f, -0.0807113f,
  +0.0938610f, -0.0554473f, -0.2064642f, +0.4140723f, -0.2572957f, +0.0161088f, +0.2305650f, +0.1518687f
);

const float biases[4] = float[4](
  -0.0029011f, -0.0393074f, +0.0022247f, -0.0643352f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer95 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1005841f, +0.0718920f, -0.3618201f, +0.0000878f, +0.1913691f, -0.0648876f, +0.0577984f, -0.0650024f,
  -0.1692722f, -0.0510103f, -0.1422047f, +0.0638840f, +0.0361571f, +0.1045302f, -0.3882846f, +0.1788095f,
  -0.0136331f, -0.0263163f, +0.0653339f, -0.0592058f, +0.0781500f, +0.0320109f, +0.1094084f, -0.0607453f,
  -0.0234748f, -0.0157925f, +0.0532731f, -0.2388904f, +0.0027867f, -0.0351791f, +0.0200999f, +0.0561326f,
  -0.0362311f, +0.0744621f, +0.0873509f, -0.2155164f, +0.1242130f, +0.1120927f, +0.0130989f, +0.3405993f,
  +0.1807211f, +0.2438096f, -0.0807328f, -0.1319813f, +0.0875966f, +0.1228317f, +0.1939717f, +0.2735347f,
  +0.1005656f, -0.1373665f, -0.2819156f, -0.1551833f, +0.1602783f, +0.0811507f, -0.0176418f, -0.0270458f,
  -0.1733246f, +0.1496710f, +0.1334241f, -0.1778323f, +0.0014979f, +0.0301314f, +0.0038209f, +0.1880814f,
  -0.1880034f, +0.2270438f, +0.0621663f, +0.1667873f, -0.1312489f, +0.0709685f, -0.1408555f, -0.2067052f,
  -0.1337322f, +0.2213639f, -0.0867553f, -0.0433660f, -0.0289737f, +0.0544732f, +0.3112533f, -0.0956688f,
  +0.1638152f, +0.0775368f, -0.0377396f, -0.1030816f, +0.0245211f, -0.0538657f, -0.1583286f, +0.1848642f,
  +0.1858521f, -0.1277694f, -0.0032080f, +0.0081843f, +0.0571890f, -0.1504662f, +0.0573185f, -0.0055091f,
  +0.2306533f, -0.0487881f, -0.0529691f, +0.2172378f, -0.0612429f, -0.0202243f, -0.0598190f, +0.1799985f,
  -0.0564514f, +0.0024532f, -0.4810604f, -0.3029175f, -0.0929021f, -0.0048821f, +0.2103101f, -0.1378306f,
  -0.1119749f, +0.0909598f, -0.1428951f, -0.0746893f, +0.0734363f, +0.1036026f, +0.0272253f, -0.1265317f,
  -0.2001027f, +0.0718651f, +0.1674111f, -0.0565049f, -0.0413289f, +0.2493089f, +0.0184313f, -0.1459821f,
  -0.0587110f, +0.0459198f, -0.0029012f, +0.0047676f, -0.2876549f, -0.3670784f, -0.1919280f, +0.0618848f,
  -0.1761575f, +0.0033851f, -0.0268532f, -0.0376593f, -0.2382639f, -0.1500082f, +0.1408634f, +0.1492964f,
  +0.1724190f, +0.1260581f, -0.1753055f, -0.1603355f, +0.0401949f, +0.1125299f, +0.1498261f, +0.2311557f,
  +0.0399367f, -0.2699127f, -0.3054942f, +0.0169783f, -0.1240740f, -0.1247711f, +0.1747449f, +0.0547865f,
  +0.0488257f, -0.1609395f, +0.0953841f, +0.1046640f, +0.2413424f, -0.0149082f, -0.2867969f, +0.2229980f,
  -0.1768865f, +0.1477527f, +0.0039314f, -0.1027031f, +0.1652173f, -0.0333390f, -0.1697903f, +0.2717076f,
  +0.3831778f, -0.0778467f, +0.1632030f, +0.3026424f, -0.0334055f, +0.5101955f, +0.1860597f, -0.0724576f,
  +0.0754970f, +0.0398327f, +0.1950348f, -0.0280391f, +0.2412350f, +0.1761000f, +0.2661431f, +0.0564508f,
  -0.1897169f, -0.0157721f, -0.2657847f, -0.0467511f, +0.3167283f, -0.2777197f, +0.0689734f, +0.1789416f,
  +0.2053564f, -0.0449035f, -0.0396415f, +0.3834022f, +0.0122692f, +0.1285564f, +0.1005904f, -0.0593796f,
  -0.0255598f, -0.2112542f, +0.4073563f, +0.3343294f, +0.0006890f, -0.0721704f, +0.0369847f, -0.2425841f,
  -0.1738543f, +0.1818362f, +0.0469762f, +0.2339952f, +0.0928462f, +0.1961081f, -0.0737170f, +0.1075757f,
  +0.2318653f, -0.1266160f, -0.1190446f, -0.0651183f, -0.0245243f, -0.1267137f, +0.2331691f, +0.1086962f,
  +0.0140989f, -0.2472494f, +0.0013048f, -0.2474760f, +0.1733152f, -0.1497028f, -0.0140910f, -0.1902925f,
  -0.1728861f, +0.0920215f, +0.0882219f, +0.2155313f, +0.0068585f, +0.3122335f, +0.0390249f, -0.0750805f,
  -0.0134750f, -0.0091282f, -0.1581105f, +0.3782424f, +0.0507500f, +0.2065723f, +0.0915184f, +0.0979144f,
  +0.4439905f, -0.0479561f, +0.0228001f, +0.0110501f, +0.0492056f, +0.0902720f, -0.1765809f, +0.0823442f,
  -0.0415570f, -0.0148231f, -0.1360750f, -0.1679146f, -0.1494805f, -0.2603406f, +0.0346657f, -0.1198345f,
  +0.2698784f, -0.0526387f, -0.2126596f, +0.1328590f, +0.2516429f, +0.0767412f, -0.1463360f, -0.0293069f,
  +0.2654080f, -0.2742932f, -0.0439119f, +0.0278976f, +0.0203644f, -0.1687625f, -0.0334679f, +0.0021012f
);

const float biases[4] = float[4](
  +0.0286405f, +0.0401992f, +0.0341283f, -0.0381907f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer96 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0214812f, +0.2324038f, -0.1467798f, -0.1199190f, +0.0199887f, +0.2341175f, -0.1009403f, -0.2357779f,
  -0.3921110f, -0.1917170f, +0.1409106f, +0.0075115f, +0.1128724f, -0.0124806f, -0.1907544f, -0.2763712f,
  -0.0230098f, -0.1283230f, -0.1086482f, +0.1994984f, +0.0589237f, +0.0068702f, -0.0375051f, +0.1780934f,
  +0.0370418f, +0.2509896f, -0.0173898f, -0.1693088f, -0.0859970f, +0.2226761f, -0.1456184f, -0.1131538f,
  +0.2206609f, -0.4948815f, -0.1420624f, -0.1160261f, +0.2976843f, +0.0462815f, +0.1005746f, -0.1276220f,
  -0.3319284f, +0.0025748f, +0.1337813f, +0.1285797f, -0.0494851f, -0.1099289f, -0.0209133f, -0.0741361f,
  -0.1257275f, -0.0245934f, +0.1264369f, +0.2897568f, -0.1024817f, +0.0389226f, -0.1235103f, -0.1548944f,
  +0.0685487f, -0.2805123f, -0.1757818f, +0.0941763f, +0.0049792f, -0.1972881f, -0.1175824f, -0.0095974f,
  +0.1351122f, -0.0004030f, +0.0010515f, -0.1250923f, +0.1281690f, -0.0080921f, -0.0267701f, -0.0594182f,
  -0.0429382f, +0.0804447f, -0.1996556f, -0.1632949f, +0.1527663f, +0.1385469f, +0.0157778f, +0.1415232f,
  +0.0397272f, -0.1602635f, -0.0700970f, -0.0084707f, +0.0136361f, -0.0124108f, +0.1385753f, -0.3177420f,
  +0.0345211f, -0.1200015f, +0.0210490f, -0.2251111f, -0.0928463f, +0.0633942f, -0.1366129f, -0.1067332f,
  +0.0948564f, +0.1794924f, -0.1972729f, +0.2919887f, +0.0345084f, +0.1105657f, +0.1585414f, -0.0069244f,
  -0.0881380f, +0.1188753f, +0.0230189f, -0.2157727f, +0.0749438f, -0.0435734f, +0.1670301f, +0.1092182f,
  +0.1168823f, -0.4140514f, -0.0295590f, +0.3168177f, -0.0763584f, +0.1050550f, -0.0729906f, -0.0163741f,
  -0.2461756f, +0.2117056f, -0.0471507f, -0.2578023f, +0.0517540f, +0.0632616f, -0.0143296f, -0.0330607f,
  +0.0601172f, +0.0945749f, +0.0377896f, +0.2327928f, -0.1450759f, -0.0115699f, -0.0763806f, -0.0386132f,
  +0.1607459f, +0.2394585f, +0.2602384f, +0.0832124f, -0.0575554f, -0.1118548f, +0.2893642f, -0.0315088f,
  +0.0732280f, +0.0499573f, -0.0843117f, +0.1712813f, -0.0204824f, +0.1069445f, -0.3993116f, +0.1306454f,
  +0.0218023f, +0.0780126f, +0.1943661f, +0.1745143f, -0.0236747f, +0.1008042f, +0.2111538f, +0.0587907f,
  -0.2064688f, +0.0899765f, -0.1175844f, +0.1125765f, +0.0392042f, -0.3201159f, +0.1081187f, -0.2484190f,
  +0.1743771f, +0.2574209f, -0.1107761f, +0.0802673f, -0.0319356f, +0.1755942f, +0.0923907f, +0.0164193f,
  -0.1549090f, -0.0481529f, +0.1764821f, +0.1867027f, -0.0076694f, +0.0369816f, +0.1482789f, -0.0735186f,
  -0.0818255f, -0.1633438f, +0.1631629f, +0.3167637f, -0.0792568f, +0.0851391f, -0.2356946f, +0.0351885f,
  -0.1526844f, +0.0039385f, +0.1141698f, +0.0281609f, -0.3712870f, +0.0217983f, -0.1529949f, +0.1009809f,
  -0.0663134f, +0.1434202f, +0.1591324f, -0.0982396f, +0.1372654f, +0.0130778f, +0.0029367f, -0.0887567f,
  +0.0603293f, +0.0106938f, +0.2500512f, +0.1015122f, -0.1521556f, +0.1431010f, -0.1094069f, -0.1144264f,
  +0.1988977f, -0.0287332f, -0.1395052f, +0.1145480f, -0.2155966f, +0.0621875f, -0.3491299f, +0.3040083f,
  -0.2046744f, +0.1370826f, +0.2530899f, -0.3462627f, +0.0480073f, -0.0439451f, -0.0221167f, +0.1710445f,
  -0.0390907f, +0.0746798f, -0.1660036f, +0.3738005f, +0.0395764f, +0.0855584f, -0.1044315f, +0.3266532f,
  +0.0040036f, -0.1369364f, +0.0192988f, +0.0586875f, +0.1268305f, +0.2179611f, -0.0835383f, +0.1905185f,
  +0.0703826f, -0.2408479f, -0.1135112f, -0.0188248f, +0.1881487f, +0.0516012f, -0.0140169f, -0.0630438f,
  +0.3465242f, +0.0406974f, -0.0817308f, -0.0149659f, -0.0748541f, -0.3190255f, -0.0615827f, +0.1501278f,
  +0.0547916f, -0.0661447f, +0.2028773f, -0.3517765f, -0.2663898f, +0.0936515f, -0.0951979f, -0.0974715f,
  +0.2744754f, +0.1011361f, +0.1751896f, -0.1248047f, -0.1538200f, -0.1831785f, -0.1977630f, +0.1886765f,
  +0.0248331f, -0.0423555f, +0.1014105f, -0.1287914f, +0.0711470f, +0.1263811f, +0.1291014f, +0.0989555f
);

const float biases[4] = float[4](
  +0.0038127f, -0.0307232f, +0.0139491f, +0.0015494f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer96 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0821750f, +0.0972868f, +0.2135854f, +0.3270996f, -0.0547359f, +0.1764937f, -0.0147234f, -0.0271984f,
  +0.0115523f, +0.0472730f, -0.0292231f, +0.0443204f, -0.0181340f, +0.2873991f, +0.1329753f, -0.0257632f,
  +0.0531614f, +0.1821241f, +0.0557815f, -0.1780734f, -0.0944993f, +0.1330276f, -0.0215004f, -0.0068040f,
  -0.1774199f, +0.1753575f, -0.3065100f, +0.2885426f, -0.0541566f, -0.1338145f, +0.2068970f, +0.0484878f,
  -0.0748255f, -0.1664960f, -0.2257105f, +0.0042468f, -0.1928560f, -0.0480042f, +0.1807020f, +0.0225676f,
  -0.0085831f, +0.0120795f, -0.0767026f, -0.0054140f, -0.0097316f, -0.1699201f, +0.0669103f, +0.1340991f,
  -0.0330706f, -0.1161701f, +0.0261309f, -0.3682870f, -0.0403411f, -0.2008332f, -0.2232587f, -0.1261295f,
  -0.0595963f, -0.1549264f, +0.0697733f, -0.0861858f, -0.0687441f, +0.2522392f, -0.0590960f, -0.0496882f,
  -0.1085825f, -0.0352921f, -0.0920486f, +0.2182704f, -0.0350330f, -0.2808237f, -0.0898356f, -0.1498181f,
  +0.1093137f, +0.1013609f, -0.1843533f, +0.3292449f, +0.1584837f, +0.0082458f, -0.0191456f, +0.0303876f,
  +0.0107779f, -0.2319739f, -0.0262437f, -0.1726162f, -0.1692123f, +0.3379509f, -0.0296058f, -0.3940217f,
  -0.3698367f, -0.2740675f, -0.0342170f, -0.3057723f, +0.2541273f, -0.1016686f, -0.0610596f, +0.2374455f,
  +0.0007372f, -0.0412523f, +0.0116854f, -0.1821344f, +0.0118386f, -0.2936908f, +0.0291863f, +0.0058420f,
  -0.1749929f, -0.1937952f, -0.1804134f, +0.1946191f, -0.2296660f, +0.2685612f, -0.1324419f, +0.0917203f,
  -0.1620184f, -0.2328248f, -0.2037932f, +0.1486796f, -0.0168185f, -0.1593969f, +0.0637121f, +0.1747336f,
  +0.0085959f, +0.0215245f, +0.2269703f, -0.1111027f, -0.1767362f, +0.1657084f, +0.3267452f, +0.0664834f,
  -0.0919027f, +0.0754122f, -0.1543570f, +0.1535212f, -0.2226900f, -0.2422294f, +0.0996799f, +0.1573353f,
  -0.2001022f, +0.1036290f, +0.1762756f, +0.2111590f, +0.0369430f, +0.1930132f, -0.1176926f, -0.0868930f,
  +0.0986146f, -0.1121570f, -0.0336275f, +0.2043046f, +0.0144124f, -0.0222556f, -0.1903041f, -0.0482975f,
  +0.1228896f, -0.2324280f, -0.0490258f, -0.3606276f, +0.1529555f, +0.1202751f, +0.0237268f, +0.0476152f,
  -0.1538360f, -0.0574274f, +0.0716849f, -0.2471464f, -0.2546215f, +0.0971689f, +0.0596443f, +0.2911055f,
  -0.0811288f, -0.0529587f, -0.0193180f, -0.2366699f, -0.0479251f, -0.0832176f, +0.0211685f, +0.1575119f,
  -0.1576484f, -0.0143828f, -0.1079671f, -0.0501011f, +0.2752719f, -0.0600678f, -0.2177021f, +0.0060846f,
  +0.2075957f, -0.0608990f, +0.1460953f, +0.0128015f, -0.1848188f, +0.0001275f, +0.2438804f, -0.0943365f,
  +0.0825454f, -0.1116285f, -0.1514801f, +0.2884081f, +0.1691675f, +0.0412547f, +0.2655264f, -0.0120789f,
  +0.0155046f, +0.1779892f, -0.0604314f, +0.2538847f, +0.2937013f, +0.2540905f, -0.1074990f, +0.1039375f,
  -0.0814876f, +0.1048838f, +0.0270827f, -0.0942378f, -0.0310565f, -0.1285746f, +0.2088435f, +0.0869190f,
  -0.1200043f, -0.0215299f, -0.1099942f, -0.3023442f, +0.0600506f, -0.1492030f, +0.0828610f, +0.2295794f,
  +0.1894580f, +0.0881762f, -0.3207942f, -0.0236419f, +0.0998555f, -0.3018655f, +0.0644728f, -0.0252121f,
  -0.0477518f, +0.1212581f, -0.2261802f, +0.2145008f, +0.1505856f, +0.1222390f, -0.2321099f, -0.1007714f,
  -0.0475411f, +0.2020804f, -0.1751819f, +0.1499184f, +0.1615381f, +0.1620701f, +0.5164511f, +0.1916706f,
  +0.2557817f, -0.1133662f, -0.2198061f, -0.1628746f, -0.1057265f, -0.1269525f, +0.1159283f, -0.1420610f,
  -0.2219570f, -0.2239315f, -0.3542818f, +0.2092564f, -0.0518902f, +0.1792735f, -0.1924431f, -0.0257741f,
  +0.2269975f, -0.0800537f, +0.2929583f, +0.1930127f, +0.0643244f, +0.0850433f, -0.2477236f, -0.0603533f,
  -0.0786299f, +0.0257632f, -0.3064677f, +0.1028284f, +0.0205530f, -0.1909161f, -0.1193206f, -0.0447210f,
  -0.0384459f, -0.0231889f, +0.1290253f, -0.1307660f, -0.1034340f, -0.1172573f, -0.3518696f, +0.0877505f
);

const float biases[4] = float[4](
  +0.0171307f, +0.0097882f, -0.0158734f, +0.0171402f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer97 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1755348f, +0.3437054f, +0.0469152f, -0.0957658f, +0.0140052f, -0.0691395f, +0.4147473f, -0.0320417f,
  -0.2001028f, +0.3377585f, +0.2746815f, -0.5578703f, +0.6307451f, -0.2930740f, -0.0035561f, +0.1351440f,
  +0.1085142f, +0.0811442f, -0.0546952f, +0.0411634f, +0.1257042f, +0.0284950f, +0.0097697f, +0.2045320f,
  +0.2184715f, -0.1904802f, +0.3253120f, -0.3731298f, +0.0523087f, +0.0650696f, -0.3798783f, +0.1128952f,
  +0.0444671f, -0.3142258f, +0.1622748f, +0.3183102f, -0.1474742f, -0.4056093f, -0.5540842f, +0.1517722f,
  +0.1942608f, +0.0624671f, -0.0906883f, +0.0135032f, -0.1220877f, +0.1399683f, -0.1626929f, +0.1902294f,
  -0.1593638f, -0.0356233f, +0.0071772f, +0.0659665f, -0.0051756f, -0.0434838f, -0.0097094f, +0.1947557f,
  -0.0578362f, -0.1733430f, +0.0709892f, -0.3210839f, -0.1727038f, +0.2026470f, +0.3434915f, +0.0259747f,
  +0.0535611f, -0.0804029f, +0.0625884f, +0.0642577f, -0.1771107f, +0.2367752f, +0.1291551f, -0.0812052f,
  -0.0984973f, +0.0546746f, +0.2850703f, -0.1128858f, -0.1917814f, +0.1285061f, +0.0182958f, +0.0750786f,
  -0.0765806f, -0.0519074f, +0.1582565f, -0.0672311f, -0.0053284f, -0.1055703f, +0.0011226f, +0.1939177f,
  +0.0100027f, +0.0309036f, -0.1318956f, +0.1179203f, -0.0319625f, -0.0997226f, -0.0470696f, -0.0064753f,
  -0.0368290f, +0.3217767f, +0.1996535f, -0.2764112f, -0.2341236f, +0.0648447f, -0.2052813f, +0.0708961f,
  +0.2424008f, +0.0112150f, -0.1372488f, +0.1717398f, -0.1003638f, -0.2378769f, +0.6985531f, -0.3052735f,
  +0.3056442f, +0.2243723f, +0.0078313f, +0.4552717f, +0.2630209f, +0.0687661f, -0.2092792f, +0.0369335f,
  -0.1122438f, +0.0948003f, +0.1523002f, +0.0272277f, -0.1759629f, -0.0740253f, +0.1510516f, +0.1024725f,
  -0.0879160f, -0.1518895f, -0.1695711f, -0.2363574f, +0.0750252f, +0.4367765f, +0.1110433f, -0.0808731f,
  -0.0366401f, +0.0031804f, +0.0624431f, +0.0924953f, +0.1014098f, -0.2230537f, -0.0655865f, -0.0563762f,
  -0.1802673f, +0.0675035f, -0.2891695f, +0.0988524f, +0.1056556f, -0.1065788f, +0.1523412f, +0.1167602f,
  +0.3014376f, +0.0970011f, -0.1602153f, +0.2280852f, +0.1877812f, -0.3172748f, +0.1122241f, -0.0263485f,
  -0.1970929f, -0.0403469f, +0.0632911f, +0.4068709f, -0.0402289f, -0.1101061f, +0.0937100f, -0.3687314f,
  -0.1272090f, -0.1767538f, -0.1305118f, +0.2808072f, +0.1162600f, -0.0218821f, -0.1092817f, +0.1351100f,
  -0.0810821f, -0.1701692f, -0.0062415f, +0.2454023f, +0.1770712f, +0.2945055f, +0.2849342f, +0.0153782f,
  -0.2437944f, +0.0406614f, +0.1040819f, +0.3618165f, +0.1191261f, +0.1834968f, +0.1032490f, +0.2643945f,
  +0.1695070f, +0.0517966f, +0.1241965f, -0.1164789f, -0.0304737f, +0.0030694f, -0.0087356f, -0.1478027f,
  +0.0010677f, +0.0597477f, -0.1094166f, -0.4611522f, -0.1128342f, +0.2514482f, -0.0891241f, +0.1911253f,
  +0.1257620f, +0.1039540f, +0.0520836f, -0.0166897f, +0.1617016f, +0.1345946f, -0.0734894f, -0.0861973f,
  -0.0025331f, -0.0009054f, +0.0527342f, -0.1222616f, +0.2662482f, -0.0188642f, -0.1457319f, -0.2950747f,
  +0.0583656f, -0.3432526f, -0.0180914f, -0.2106818f, -0.2676664f, +0.0449675f, -0.0427675f, -0.2243961f,
  -0.1145090f, -0.0517928f, +0.1623741f, -0.0836746f, +0.2665703f, +0.1165917f, -0.0558590f, -0.1617530f,
  -0.0940089f, +0.1926625f, +0.1527672f, -0.1088401f, -0.0552965f, +0.0707764f, -0.1015980f, +0.0867644f,
  -0.1302132f, -0.2273581f, +0.0064489f, +0.2037192f, -0.1073295f, -0.2317827f, -0.0624382f, +0.1205390f,
  -0.4065999f, -0.0966140f, +0.0927053f, +0.1124733f, -0.1089646f, +0.0328681f, -0.3066619f, +0.0638330f,
  -0.3718324f, -0.0328597f, +0.1139972f, -0.1862412f, -0.2821411f, -0.0177293f, +0.1222270f, +0.0208033f,
  -0.2103833f, +0.2103919f, +0.0105378f, +0.0815597f, -0.0448522f, -0.0302166f, +0.3454807f, +0.1600139f,
  -0.1685254f, +0.0516017f, -0.0548413f, +0.0110382f, -0.0607461f, -0.2241181f, -0.0921830f, -0.0344588f
);

const float biases[4] = float[4](
  +0.0136273f, -0.0038750f, -0.0068467f, +0.0829531f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer97 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1233229f, +0.0130549f, -0.2684036f, -0.2392322f, +0.1231850f, +0.0738971f, +0.1590988f, -0.1642560f,
  +0.2182077f, -0.0381332f, +0.0615205f, -0.0789108f, +0.2086586f, +0.0348566f, +0.1885909f, +0.0632242f,
  +0.0186850f, -0.0406073f, -0.1167316f, -0.0382231f, +0.2592963f, -0.1110412f, +0.3467492f, -0.0578182f,
  -0.0531004f, -0.1738880f, +0.1715173f, +0.3569393f, +0.1236567f, -0.1053485f, -0.1785441f, +0.1074485f,
  +0.1522396f, +0.0645240f, -0.2651293f, +0.2246453f, -0.1062390f, +0.1257551f, -0.0004348f, +0.1649100f,
  +0.0380397f, -0.0466863f, -0.0198423f, +0.4378848f, -0.1316251f, +0.2395802f, +0.2569557f, -0.2395600f,
  -0.1089278f, -0.0702314f, +0.0660811f, +0.1193610f, -0.0500457f, +0.1154648f, +0.1391940f, -0.0125464f,
  -0.1379651f, +0.1861530f, -0.1008785f, -0.1788023f, +0.0408299f, +0.0268182f, +0.1845752f, -0.0117382f,
  -0.0243225f, -0.1183422f, +0.0511740f, -0.2073830f, +0.0500711f, +0.0432231f, +0.2723408f, +0.0085102f,
  -0.2061392f, -0.1009278f, -0.1447924f, -0.1618380f, +0.0302780f, +0.0074798f, -0.1398631f, +0.1426079f,
  +0.1669072f, +0.1229663f, -0.0231933f, -0.1409707f, -0.0321912f, +0.1426227f, +0.0715494f, -0.0216180f,
  +0.0293901f, -0.0881398f, +0.0400820f, +0.0568593f, +0.1104616f, -0.0214855f, +0.1304390f, -0.0868203f,
  -0.3142844f, +0.1202403f, -0.2890585f, -0.1105575f, +0.0194296f, -0.0581348f, -0.0877497f, -0.0619028f,
  -0.1141156f, -0.1456488f, +0.1570011f, +0.1279548f, -0.0736630f, -0.0583187f, -0.1188813f, -0.1108794f,
  -0.1939361f, -0.0769234f, +0.1020861f, -0.3643719f, -0.0051782f, +0.0348809f, -0.0330665f, +0.0962557f,
  +0.0650643f, +0.0798231f, +0.0305502f, -0.0464466f, +0.0004083f, +0.1586742f, +0.0049945f, -0.0857728f,
  +0.0195267f, +0.0615028f, +0.0724003f, +0.0343610f, +0.0561064f, -0.0408590f, +0.0335700f, -0.1413426f,
  -0.1578661f, +0.1814277f, -0.1125237f, -0.0203407f, +0.2113773f, -0.1537415f, -0.1797003f, +0.0078672f,
  +0.1257429f, -0.0721449f, -0.2368612f, -0.0169986f, +0.0426200f, -0.0742910f, -0.2653772f, -0.0205217f,
  -0.2380266f, -0.1394005f, +0.2426572f, +0.2746762f, -0.0001473f, +0.0224427f, -0.0382810f, +0.1681092f,
  -0.1738812f, +0.1705162f, -0.2503478f, +0.0837119f, -0.0549208f, -0.0545331f, -0.0893639f, -0.0258857f,
  +0.1960326f, +0.0362506f, -0.1247026f, -0.1928312f, -0.1071107f, -0.0324249f, -0.1417895f, +0.0904655f,
  +0.1689309f, -0.0730077f, -0.0844866f, +0.0215565f, +0.0279880f, +0.0032480f, +0.1658904f, -0.1479472f,
  -0.0720667f, -0.0585767f, +0.2088238f, +0.0553435f, +0.0463069f, -0.0102276f, +0.0532492f, -0.0385306f,
  -0.0553295f, +0.2638402f, -0.0266400f, +0.0726256f, -0.2282687f, -0.0563577f, -0.3108976f, -0.1567240f,
  +0.0044727f, +0.0340997f, +0.3668854f, +0.0661715f, -0.2099790f, -0.1575906f, +0.1785547f, -0.0232542f,
  -0.0059469f, +0.0614791f, -0.2027635f, -0.1828169f, -0.0276746f, +0.1873970f, -0.2036383f, +0.0001102f,
  +0.1345564f, -0.0299539f, -0.2527289f, +0.1221955f, +0.0963379f, +0.5788894f, +0.1005431f, +0.2649111f,
  +0.2034003f, -0.2947339f, -0.1741488f, +0.2834104f, +0.3219140f, -0.0254884f, +0.2798623f, +0.1835073f,
  -0.0774273f, -0.2061377f, -0.1762761f, +0.0882063f, +0.2051262f, +0.1337553f, +0.1849659f, +0.0911455f,
  +0.1595303f, -0.1079133f, -0.2607560f, -0.1505645f, -0.1164505f, -0.0737024f, -0.1905152f, +0.0214255f,
  +0.0723724f, +0.1157895f, -0.4111762f, -0.0297409f, -0.1693642f, -0.0574314f, +0.1375940f, -0.1372723f,
  -0.0843300f, +0.2715002f, -0.0614575f, -0.2457308f, +0.1740063f, -0.1921704f, +0.3499050f, +0.1577107f,
  -0.1331664f, +0.0237649f, -0.2673452f, +0.6399453f, +0.2139914f, -0.0264595f, +0.3376471f, -0.1666332f,
  -0.0093399f, -0.1278281f, -0.1826384f, +0.1138187f, -0.0923686f, +0.0585651f, +0.4370456f, -0.1394328f,
  +0.1268872f, +0.2413662f, -0.0869132f, -0.4610454f, +0.0643318f, -0.0379621f, +0.2802439f, +0.2211877f
);

const float biases[4] = float[4](
  -0.0110426f, +0.0306419f, +0.0096141f, -0.0715031f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer98 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0670712f, -0.1437995f, -0.0671598f, -0.1926475f, -0.0637618f, +0.0960570f, +0.0413633f, +0.0159570f,
  +0.0717514f, -0.0531810f, -0.0306088f, +0.1174540f, +0.1802272f, -0.0230280f, +0.0634565f, +0.0000997f,
  -0.3303399f, +0.1245704f, -0.1337554f, +0.1461300f, +0.3408405f, -0.0328809f, -0.1374429f, -0.0157387f,
  -0.0334374f, -0.1165677f, +0.1347995f, -0.2688140f, +0.0639914f, +0.1635127f, -0.1227190f, +0.0775246f,
  -0.0840618f, +0.0354317f, -0.0235578f, +0.0247687f, -0.2363598f, -0.1503808f, +0.0090143f, +0.1051557f,
  +0.3794775f, +0.0237044f, -0.0642816f, -0.1379397f, -0.2436805f, +0.2698787f, +0.1651143f, -0.0786965f,
  -0.1745160f, +0.1812188f, -0.1622348f, -0.1424183f, +0.0787837f, +0.1034986f, +0.1525523f, +0.0177941f,
  -0.0543599f, +0.0403296f, -0.0720453f, +0.0730188f, -0.1170742f, -0.1707826f, +0.0435355f, -0.1350539f,
  -0.0076770f, +0.0582711f, +0.0718416f, -0.1024962f, +0.2311747f, -0.0138773f, -0.0406117f, +0.1970679f,
  +0.1857576f, -0.1517231f, -0.0652457f, -0.0022403f, -0.0828037f, +0.0150211f, +0.0365500f, +0.1740990f,
  -0.2191170f, +0.4588121f, -0.1679034f, -0.3499570f, -0.0659490f, -0.0053408f, +0.0005954f, -0.0150017f,
  -0.0625693f, -0.1603001f, -0.3330992f, +0.0764113f, +0.0854623f, -0.0267718f, -0.1798404f, +0.2371591f,
  +0.1930100f, -0.0974884f, -0.3877167f, -0.1529251f, +0.1573198f, +0.0679471f, -0.2023014f, +0.1099766f,
  -0.0640167f, -0.2919655f, -0.0839100f, +0.1718191f, +0.0601355f, +0.0796234f, -0.1216876f, -0.2618913f,
  -0.1990884f, -0.1309675f, +0.2452672f, -0.2132300f, -0.1316023f, +0.0078736f, +0.3514484f, +0.3498452f,
  -0.1548717f, -0.0177313f, -0.1729100f, -0.0169656f, +0.3633812f, -0.3133748f, -0.1588677f, -0.2254966f,
  +0.0041937f, +0.1122606f, +0.0207812f, +0.3149126f, +0.0657297f, +0.0509669f, +0.0654714f, -0.1674700f,
  +0.1958905f, -0.1636953f, -0.0390859f, +0.1075659f, -0.1165697f, -0.1750116f, +0.1175735f, +0.0485925f,
  +0.0060363f, +0.0248657f, +0.3207572f, -0.1071405f, +0.0385080f, +0.0585528f, +0.2103130f, -0.1296022f,
  +0.1080036f, +0.0288340f, -0.0948332f, +0.0529737f, +0.0291251f, -0.0627824f, +0.2374918f, +0.0543226f,
  -0.0443454f, +0.0049102f, -0.2102698f, -0.2178203f, +0.1938864f, +0.0368853f, -0.0370689f, -0.0555504f,
  -0.1697669f, -0.2469316f, +0.0613689f, +0.0755908f, +0.1512314f, -0.1404236f, +0.1469968f, +0.0003713f,
  -0.3843963f, +0.0265969f, -0.1738121f, -0.0230309f, -0.1837530f, +0.0092250f, -0.2081320f, -0.1122132f,
  -0.1575447f, -0.1418410f, +0.2052571f, -0.1672835f, -0.3049125f, +0.2324712f, -0.0943558f, -0.0869061f,
  -0.3557709f, -0.0417249f, -0.2539332f, -0.2000117f, -0.1501443f, +0.3278746f, -0.0611589f, -0.0166453f,
  +0.2760588f, +0.1998359f, -0.1381615f, +0.1416550f, +0.1847193f, +0.0272908f, -0.1405417f, -0.2902924f,
  +0.0913467f, +0.1249257f, +0.2018608f, -0.0584565f, -0.0347728f, +0.1965781f, +0.1426754f, +0.1851663f,
  +0.1507815f, +0.0526355f, +0.1115328f, +0.0184713f, +0.2589627f, +0.0697848f, +0.1649529f, +0.0975906f,
  -0.2061250f, +0.2406993f, +0.1198127f, -0.1200269f, +0.0724061f, -0.0697048f, -0.2643209f, +0.1736178f,
  +0.1901033f, -0.0154848f, +0.0542556f, -0.2207645f, -0.0143435f, +0.2065231f, +0.1324517f, -0.2790861f,
  +0.4980797f, -0.4300059f, +0.0769718f, +0.0931056f, -0.4369812f, +0.1389892f, -0.0103574f, -0.0213731f,
  +0.6946357f, +0.0538133f, -0.0685466f, +0.0459641f, +0.1327227f, -0.1290761f, +0.1150606f, +0.2255651f,
  -0.0752371f, +0.0979110f, -0.1196096f, -0.1135878f, -0.0929570f, +0.2789155f, +0.0782237f, -0.1226828f,
  -0.2810436f, -0.1365278f, -0.1569591f, +0.1383187f, +0.1648566f, -0.2444727f, -0.3132405f, +0.0871057f,
  -0.6894232f, +0.2265788f, -0.1785805f, +0.0452298f, +0.1533745f, +0.2382785f, -0.0033583f, -0.3720421f,
  -0.2657561f, +0.0076353f, +0.1905240f, -0.0442268f, +0.2674898f, +0.2120940f, +0.0744641f, -0.1203948f
);

const float biases[4] = float[4](
  -0.0240465f, +0.0014956f, -0.0055535f, +0.0083310f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer98 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0058219f, -0.0079440f, -0.0602375f, +0.0642127f, -0.4364258f, -0.1931018f, +0.1764930f, +0.1372787f,
  -0.1315022f, +0.0002009f, -0.0112773f, +0.1735181f, +0.0746025f, +0.0734710f, -0.0671071f, +0.1909712f,
  +0.2579554f, -0.1415724f, +0.2140032f, +0.1159820f, +0.0493591f, -0.0518234f, -0.0465050f, +0.0616404f,
  -0.0476200f, -0.0914212f, -0.1805457f, -0.0029139f, +0.0419211f, -0.0881623f, -0.0568520f, -0.2858824f,
  -0.1943480f, +0.2420459f, -0.4816347f, +0.0739729f, +0.2317314f, -0.1430921f, +0.2721776f, -0.3433427f,
  +0.0497194f, +0.1002457f, -0.0878208f, -0.0475012f, -0.0403657f, +0.0525154f, +0.2235427f, -0.0736730f,
  -0.1388699f, -0.0532655f, -0.0452370f, +0.3719229f, -0.1385047f, +0.1928998f, +0.1134458f, -0.1992769f,
  -0.1483570f, -0.1149044f, -0.1951810f, -0.0217564f, -0.1733251f, +0.1784979f, -0.4117663f, -0.3032381f,
  -0.2987304f, +0.0277064f, -0.0689148f, +0.0462584f, +0.2739914f, +0.0966984f, -0.0311686f, -0.1606908f,
  -0.1311187f, +0.1993721f, -0.2058259f, -0.0667956f, +0.2407020f, -0.1182152f, -0.1953061f, -0.1385096f,
  -0.1755398f, -0.2648928f, -0.1826792f, +0.1908826f, -0.1824140f, +0.1406381f, -0.0004264f, -0.2950753f,
  -0.2488651f, +0.1007566f, -0.0441961f, +0.0646480f, +0.1574841f, -0.0636681f, -0.0258854f, -0.1792707f,
  -0.2064163f, +0.0315604f, +0.0226858f, +0.2120097f, -0.0648160f, +0.2790334f, +0.1404513f, +0.0361026f,
  -0.2141927f, +0.4520304f, -0.1633771f, -0.2116816f, -0.3111899f, -0.2198445f, +0.0354424f, -0.0639228f,
  +0.2163516f, -0.0164917f, -0.1243725f, -0.1516126f, -0.0195970f, +0.1703155f, -0.0010745f, -0.2313610f,
  -0.0369235f, -0.0876066f, +0.2117210f, -0.2958274f, +0.1919224f, -0.1148517f, +0.0511485f, +0.0323324f,
  -0.1832344f, +0.2064010f, +0.2227079f, -0.0138009f, -0.4203225f, +0.0520148f, -0.0136656f, +0.1040295f,
  -0.1506038f, +0.1669437f, -0.0218445f, +0.1176422f, +0.0524781f, +0.0724719f, -0.0188204f, -0.3324399f,
  -0.0015782f, +0.0809129f, +0.1862837f, -0.0927860f, +0.4762258f, +0.1759921f, +0.2191823f, -0.0255051f,
  +0.2589706f, +0.0477396f, +0.1511082f, +0.1388968f, -0.1353853f, -0.1671627f, -0.0572227f, -0.2541610f,
  +0.3815340f, -0.2568546f, -0.0267075f, -0.0279631f, +0.0478710f, +0.0062006f, -0.0353377f, -0.0381837f,
  +0.0385790f, +0.1191792f, +0.0934209f, +0.1374573f, -0.3121432f, +0.1237957f, -0.0210488f, -0.0274747f,
  +0.3221047f, -0.5193935f, -0.3242005f, +0.1258196f, -0.3165822f, -0.0191659f, +0.2312349f, -0.2552733f,
  -0.4661624f, -0.0154897f, -0.1196663f, +0.0354580f, +0.0610367f, +0.1571594f, -0.0850936f, +0.2528084f,
  +0.2915131f, +0.2345293f, -0.1170673f, -0.1610243f, +0.1611360f, -0.1598838f, -0.2081004f, -0.3378266f,
  +0.2980214f, -0.0868962f, -0.0209630f, +0.0637248f, +0.0308379f, -0.1694278f, +0.0381193f, -0.0550374f,
  +0.1938041f, -0.0887344f, -0.0502011f, +0.1858321f, +0.2265974f, -0.3617900f, +0.1770401f, +0.1650551f,
  +0.2307948f, -0.0627439f, -0.1389192f, -0.4008316f, +0.3065653f, -0.1483982f, -0.1811033f, -0.1546730f,
  -0.1547331f, +0.2736182f, -0.1632232f, +0.1656715f, -0.1545331f, +0.0552024f, -0.1507048f, -0.2233043f,
  +0.0402028f, -0.1161267f, +0.3460691f, +0.0941728f, +0.1524449f, -0.0872004f, -0.0275033f, +0.0019933f,
  +0.1180597f, +0.3273104f, -0.0767886f, -0.0789660f, -0.1825041f, -0.0277327f, +0.3191417f, -0.1927283f,
  -0.2736425f, +0.3089658f, -0.0192167f, -0.2604611f, +0.2228934f, -0.1262542f, +0.1995364f, -0.2488692f,
  +0.0294996f, -0.0587299f, -0.2280024f, +0.1058056f, -0.1688550f, +0.1218679f, +0.3739280f, -0.0745328f,
  +0.0136746f, -0.1469868f, +0.0204531f, +0.1726581f, -0.2082296f, -0.1577180f, +0.1297424f, -0.0255062f,
  -0.2859896f, -0.0654232f, -0.1006768f, +0.0047110f, -0.2152269f, +0.0011622f, +0.0873899f, -0.1214570f,
  -0.1552101f, +0.0878955f, +0.0811901f, +0.1588884f, +0.2457603f, -0.0133248f, -0.1944889f, -0.5257068f
);

const float biases[4] = float[4](
  -0.0030791f, -0.0053260f, -0.0156641f, +0.0242744f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer99 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0700455f, -0.1080787f, -0.0836370f, +0.1116029f, +0.0158516f, +0.0659055f, -0.0236996f, -0.0116793f,
  +0.0789617f, +0.0001045f, +0.1609458f, +0.1058385f, -0.0927340f, +0.1870802f, -0.0892599f, +0.0627216f,
  -0.1621454f, -0.0686953f, -0.0000237f, -0.0312900f, -0.1315495f, -0.0765834f, -0.1331752f, +0.0095966f,
  +0.1262251f, -0.3756495f, -0.2050134f, +0.0774970f, +0.1956267f, -0.0851814f, -0.1586160f, -0.1970895f,
  -0.0159010f, -0.2135485f, -0.0380611f, +0.1034961f, -0.0827892f, -0.1877981f, +0.1063474f, -0.2599262f,
  -0.1935885f, -0.0855678f, -0.0576661f, -0.2396498f, -0.0457966f, -0.2363460f, -0.1900466f, -0.0875016f,
  +0.4112696f, -0.1866028f, -0.0968021f, +0.0120710f, -0.0616599f, -0.1582590f, -0.1585687f, +0.0763258f,
  +0.0466748f, +0.0505856f, +0.0315772f, +0.0592364f, -0.1085994f, +0.0570985f, +0.1136513f, +0.0384515f,
  +0.2464601f, -0.1698301f, +0.0423810f, +0.0170143f, +0.0071240f, -0.0849933f, +0.0331198f, -0.2505193f,
  +0.1198013f, -0.2083899f, -0.1908544f, +0.1406849f, +0.1586905f, -0.2217268f, +0.2999734f, -0.0683767f,
  +0.0932439f, -0.1357005f, +0.0185199f, +0.2901255f, -0.1211964f, -0.0167576f, +0.1991697f, +0.2835398f,
  +0.2521450f, -0.0624993f, +0.1054388f, -0.1896021f, +0.4184842f, -0.4456639f, +0.2718637f, -0.0610066f,
  -0.1196280f, -0.0828914f, -0.2463113f, +0.1620059f, -0.0859054f, +0.1679708f, +0.0802897f, -0.0680681f,
  -0.0881229f, +0.2721868f, +0.2051856f, +0.3273513f, -0.0472973f, +0.2204318f, -0.0560635f, -0.0646157f,
  +0.1129306f, -0.3158945f, -0.0193299f, +0.1707698f, +0.3957863f, -0.2138624f, +0.1850064f, +0.1252039f,
  -0.1023274f, +0.0361512f, +0.0672933f, +0.1149516f, -0.0824632f, +0.0415553f, -0.2435341f, -0.2433561f,
  -0.0322191f, +0.0474311f, -0.2123846f, -0.1213920f, +0.3351627f, +0.0326983f, -0.2803697f, +0.0969066f,
  +0.1074006f, +0.0466848f, +0.2648379f, +0.0281686f, +0.0036523f, +0.1009908f, -0.1417509f, -0.2460154f,
  -0.1209433f, -0.0254971f, -0.5030770f, +0.1609830f, +0.5813445f, +0.0754346f, -0.1032233f, -0.1137078f,
  +0.1355112f, -0.2126297f, +0.1443536f, +0.3730538f, +0.0902312f, +0.2138357f, -0.1531112f, +0.1176483f,
  -0.0087889f, +0.0056479f, -0.0113177f, +0.0023723f, -0.1308380f, +0.1242476f, +0.2331338f, -0.2334525f,
  +0.0038697f, -0.2731256f, +0.0196963f, +0.1890962f, -0.0329267f, +0.2211631f, +0.1750683f, +0.2864448f,
  +0.0421386f, -0.1289955f, -0.1174193f, -0.2040792f, -0.3593103f, -0.0446628f, -0.2333481f, +0.0621024f,
  +0.0612646f, -0.1632589f, +0.0755776f, +0.0301240f, -0.4937020f, -0.2573575f, +0.0904387f, -0.0875407f,
  +0.0930418f, -0.4129934f, +0.0420318f, +0.0073571f, +0.0988244f, +0.1856602f, +0.0887870f, -0.0855144f,
  +0.5200920f, +0.0381796f, -0.1121726f, -0.1281721f, +0.1880755f, +0.0189978f, +0.2072132f, +0.0181652f,
  +0.0567570f, +0.1195428f, +0.0062240f, -0.0909974f, +0.2618816f, -0.0565542f, +0.1490423f, +0.0733297f,
  -0.0725986f, +0.0596242f, -0.0308312f, +0.0839787f, -0.0373941f, +0.0933705f, +0.4049337f, +0.1946454f,
  -0.0802017f, +0.1749032f, -0.1539591f, +0.4095986f, +0.0232998f, -0.0397208f, +0.1694703f, +0.2249624f,
  -0.0357846f, -0.1668605f, -0.0299663f, +0.0522137f, +0.1872029f, -0.0280606f, -0.1751145f, +0.0750312f,
  +0.1346809f, -0.3882779f, -0.2382082f, -0.1916230f, +0.1616725f, +0.0101416f, +0.1333439f, -0.3300253f,
  +0.0456792f, -0.1168930f, +0.1429221f, +0.4664192f, +0.1030283f, +0.1192074f, +0.0204775f, -0.1335265f,
  +0.0211791f, +0.0903546f, +0.0738188f, -0.0896747f, +0.1182914f, -0.0331192f, -0.1546984f, -0.2201927f,
  +0.1651741f, -0.0263739f, -0.0775099f, -0.0308192f, +0.1020627f, -0.0729498f, +0.0398492f, +0.1839625f,
  +0.0700523f, +0.1602289f, -0.0431273f, +0.3143473f, +0.2371568f, +0.0966200f, -0.2917765f, +0.0981537f,
  -0.2190878f, +0.0555526f, -0.0812089f, -0.0551947f, +0.1115276f, +0.0025365f, -0.0972992f, +0.1243285f
);

const float biases[4] = float[4](
  +0.0003047f, -0.0360338f, -0.0162534f, -0.0099341f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer99 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0312156f, -0.2616874f, -0.0572777f, -0.0728962f, +0.1900958f, -0.2347296f, +0.0840926f, +0.0584912f,
  +0.3011036f, -0.1407664f, +0.0563240f, -0.1578591f, +0.2756193f, +0.1189458f, -0.1217417f, +0.2549472f,
  +0.2845356f, +0.0675589f, -0.4118660f, -0.0174293f, -0.2601939f, -0.3842253f, -0.3907756f, +0.0487123f,
  +0.3031790f, -0.3283513f, -0.3013870f, -0.1078076f, -0.0138936f, +0.3095351f, +0.2648927f, +0.1692189f,
  +0.0780199f, -0.1395749f, -0.1316322f, +0.1613690f, +0.5064475f, +0.0513530f, -0.0218404f, +0.0631418f,
  -0.0595101f, +0.1444723f, -0.2428909f, +0.1022830f, -0.2807645f, +0.0198153f, -0.1805143f, +0.1321885f,
  +0.1010782f, -0.0765494f, +0.1374057f, +0.1256332f, +0.2843019f, -0.0934620f, -0.2541313f, -0.3923490f,
  +0.1464869f, -0.3093925f, -0.3744932f, -0.2512790f, +0.2636455f, -0.2907831f, +0.1561826f, +0.1915873f,
  +0.2161719f, -0.0154662f, -0.0248318f, +0.1454221f, +0.0058537f, +0.0250033f, +0.2504963f, +0.3061641f,
  +0.1594778f, +0.0245741f, -0.1301543f, +0.0890830f, -0.0034457f, +0.1871398f, -0.0332035f, +0.0653270f,
  -0.1758523f, +0.0767389f, -0.1863214f, +0.0567466f, +0.0124899f, +0.0257622f, -0.1035190f, +0.1439371f,
  -0.0463992f, +0.2017923f, +0.0050358f, -0.1989422f, -0.1561645f, +0.0125114f, -0.2716283f, -0.1020551f,
  +0.1023456f, -0.0599276f, +0.1815859f, -0.1089961f, +0.0253706f, +0.1230689f, -0.0155054f, -0.2970710f,
  -0.1081951f, -0.0135952f, -0.1650868f, -0.1906684f, +0.1301028f, +0.1190048f, -0.2955698f, +0.0479858f,
  +0.0138406f, +0.1770129f, -0.0081188f, -0.0064311f, +0.2418696f, +0.2564965f, -0.3306841f, +0.1075275f,
  -0.1843390f, -0.0642049f, +0.1554728f, +0.0556886f, -0.0294815f, -0.0093278f, +0.2015066f, -0.0792739f,
  -0.0783877f, +0.0271362f, +0.0547068f, +0.1197870f, -0.0530235f, +0.1298706f, +0.2163965f, -0.0907032f,
  +0.0814908f, +0.2581111f, -0.0619354f, -0.1359953f, -0.0915647f, +0.0802874f, -0.1719483f, +0.0127749f,
  +0.0295475f, -0.2028089f, +0.2236989f, -0.0432279f, +0.1626564f, -0.0909247f, -0.2054794f, +0.0310827f,
  -0.1070493f, +0.1739704f, -0.3123520f, -0.0536038f, -0.2324856f, +0.0526952f, -0.1247565f, +0.0248607f,
  -0.0215871f, +0.0173537f, -0.1968285f, -0.1936376f, -0.1553212f, -0.1245410f, -0.1173001f, +0.1168545f,
  +0.0657007f, -0.1805923f, +0.0375146f, -0.0218039f, -0.0493046f, -0.0217449f, -0.0203062f, +0.2450958f,
  -0.1007669f, -0.0904151f, +0.1236119f, +0.1755110f, +0.1857498f, -0.2009074f, -0.3417556f, -0.0377845f,
  -0.0278859f, -0.0417665f, +0.0979949f, -0.0175930f, +0.1125398f, -0.1220764f, -0.0130131f, -0.0444179f,
  +0.2654046f, +0.2581786f, -0.0973320f, +0.0444474f, -0.0882420f, +0.2002815f, -0.0207179f, -0.1885188f,
  -0.3070148f, +0.1484117f, +0.0852812f, +0.0932847f, +0.1089411f, +0.2065467f, -0.2367297f, -0.0887767f,
  -0.1193061f, +0.0804936f, -0.0931226f, -0.0395670f, +0.1623653f, -0.0751174f, -0.1095962f, -0.0534381f,
  +0.0206849f, +0.2410873f, -0.0980192f, -0.1662427f, -0.0738231f, +0.3690735f, -0.1106467f, +0.0231767f,
  +0.1845935f, -0.0055126f, -0.1175599f, +0.0617014f, -0.1979006f, +0.1166250f, -0.1948868f, -0.0534809f,
  -0.0265136f, +0.0258248f, +0.0780757f, -0.1453596f, -0.0939287f, +0.2633874f, -0.0030874f, -0.1486261f,
  -0.0507631f, -0.1795128f, +0.2735793f, -0.2648787f, +0.0711249f, -0.2278382f, -0.0198656f, +0.1141407f,
  -0.0545585f, -0.2137546f, +0.2803741f, -0.3994633f, +0.6269518f, -0.0471121f, +0.0166842f, +0.0136379f,
  +0.1713253f, -0.0678456f, -0.0268748f, -0.1677243f, +0.3561291f, -0.2371754f, +0.3092521f, +0.2173524f,
  -0.0421186f, +0.0033754f, +0.2447776f, +0.0337437f, -0.0014192f, +0.0256323f, +0.2389843f, -0.1686039f,
  +0.1956631f, -0.0412488f, +0.1051805f, +0.0769104f, -0.0679632f, +0.1611979f, +0.2174170f, +0.1159596f,
  -0.1703180f, -0.0001641f, -0.0521874f, -0.0032326f, -0.1433824f, -0.1141014f, -0.1786315f, -0.1049966f
);

const float biases[4] = float[4](
  +0.0047845f, -0.0436976f, +0.0242530f, -0.0472881f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer100 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1825312f, +0.1185791f, -0.0159181f, -0.0044425f, +0.0690706f, -0.1898675f, -0.0617938f, -0.0846334f,
  -0.3901754f, +0.0288646f, -0.2081476f, -0.0848225f, -0.2441001f, +0.1002496f, -0.0295857f, -0.0826222f,
  +0.1000877f, -0.1973607f, +0.4134675f, +0.0783645f, -0.2417463f, +0.1067531f, -0.3265343f, -0.0698330f,
  +0.0996358f, +0.1010900f, +0.1311855f, +0.0628550f, +0.0613351f, -0.1132113f, +0.2114113f, -0.0226405f,
  +0.1626564f, -0.0956863f, -0.0802061f, +0.1511657f, +0.0930186f, -0.1084331f, -0.0795349f, -0.2282040f,
  -0.0015769f, +0.1604766f, +0.0074866f, +0.1924488f, -0.0469598f, +0.0869819f, -0.0652458f, -0.0221564f,
  +0.0154494f, +0.0568984f, -0.1503552f, -0.0480344f, +0.1162422f, -0.0057752f, -0.0733677f, +0.1349786f,
  -0.1797084f, -0.2347301f, +0.0048295f, -0.1058504f, -0.3281426f, +0.0236180f, +0.2007063f, +0.0019828f,
  +0.1239128f, +0.0949701f, +0.3877885f, +0.0071747f, -0.0928463f, -0.0157350f, +0.0677516f, +0.1214686f,
  +0.0193357f, -0.2077754f, +0.0508215f, +0.1421812f, +0.1724192f, +0.0905381f, +0.1178545f, +0.0578293f,
  -0.2836192f, +0.0488647f, -0.0191248f, -0.0324270f, +0.1566921f, -0.0027054f, -0.0235060f, -0.2878492f,
  +0.0602753f, -0.0161621f, -0.0580069f, +0.0018080f, +0.0229334f, +0.2453644f, -0.0925461f, -0.0702324f,
  -0.0912504f, -0.1488480f, -0.0829124f, -0.2132731f, -0.1923949f, -0.1523866f, -0.1759758f, -0.0112384f,
  +0.2226159f, -0.0650035f, +0.0416595f, +0.0508299f, -0.0009742f, +0.1269641f, -0.0871281f, -0.1412795f,
  +0.0715134f, -0.0116106f, +0.1497356f, +0.1022588f, +0.2927967f, +0.0232572f, -0.0117154f, -0.0183610f,
  +0.1209520f, -0.0982867f, +0.1369775f, -0.0412264f, +0.0298770f, +0.0442502f, +0.0848976f, -0.1036671f,
  -0.0800181f, -0.2975591f, +0.0485715f, +0.0900553f, +0.0075640f, -0.1421349f, -0.1936054f, +0.0556658f,
  +0.1251358f, +0.0329612f, -0.2170654f, -0.1759637f, -0.0012114f, -0.1792861f, +0.1287859f, -0.1213824f,
  -0.2704238f, +0.1347281f, -0.2004759f, +0.0030521f, +0.1904606f, -0.0814163f, +0.0555772f, -0.0016298f,
  -0.1795533f, +0.2328175f, +0.0637029f, +0.0304530f, +0.1654687f, +0.0334301f, -0.0725854f, +0.3251291f,
  -0.0989572f, +0.0544164f, +0.0231692f, +0.3417374f, -0.0355458f, +0.1064468f, +0.0791113f, +0.2575417f,
  -0.4745973f, +0.3199764f, -0.6364964f, +0.0254993f, +0.0804296f, +0.1305305f, -0.1357267f, +0.1062721f,
  -0.2954849f, +0.2386415f, -0.1517898f, -0.0139329f, +0.3083109f, +0.1086028f, -0.1289489f, +0.0849719f,
  -0.3960929f, -0.2171663f, -0.0599086f, +0.0428794f, -0.0098352f, +0.0342535f, +0.0689768f, +0.1079017f,
  -0.1457251f, -0.2310750f, -0.2258701f, -0.1300122f, +0.0490889f, -0.0715367f, +0.1323385f, +0.0341722f,
  -0.0224707f, -0.2225294f, +0.0646032f, +0.4352045f, -0.1804129f, +0.1687117f, +0.3629132f, +0.0559654f,
  +0.3471570f, -0.2559060f, -0.0215613f, +0.1165911f, -0.0371882f, -0.0616488f, -0.0987319f, -0.1308258f,
  -0.0276121f, -0.0333005f, +0.1520396f, +0.0080539f, -0.0252746f, -0.0267154f, -0.0233802f, -0.0734766f,
  +0.1810926f, -0.1393329f, +0.0398889f, -0.0127756f, +0.2437799f, -0.0254391f, -0.2041769f, -0.0928803f,
  +0.0938080f, -0.0856180f, -0.3280485f, -0.0599843f, +0.0085880f, -0.0135738f, +0.0205362f, -0.1073331f,
  -0.0906489f, +0.0914330f, +0.1008040f, -0.0397580f, +0.1154006f, -0.0776900f, +0.1145234f, -0.2728769f,
  +0.0171665f, -0.3847205f, +0.2545772f, -0.1677679f, -0.0646988f, -0.0205907f, +0.0351733f, -0.3868825f,
  -0.0036823f, +0.0934637f, -0.2561749f, +0.0015915f, -0.0581056f, -0.0971444f, +0.1689498f, -0.1342680f,
  -0.1129377f, +0.1429269f, -0.3244169f, +0.1067353f, -0.0013502f, -0.0313114f, +0.0727965f, +0.1152912f,
  +0.1757712f, +0.1539831f, -0.2828401f, -0.0720545f, -0.0902006f, -0.0990734f, +0.1142974f, -0.0714275f,
  -0.0289220f, -0.0906914f, +0.0703001f, -0.0215273f, +0.2295719f, -0.0109256f, +0.0265516f, +0.1499483f
);

const float biases[4] = float[4](
  -0.0091048f, -0.0179268f, -0.0015735f, +0.0089458f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer100 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0626611f, -0.0089124f, -0.1176309f, -0.1142539f, +0.2834278f, +0.1383490f, -0.0760539f, +0.1139220f,
  -0.0848244f, -0.1661176f, -0.2304570f, -0.2505623f, +0.0861653f, -0.2246070f, -0.1703571f, -0.1294535f,
  +0.0487515f, -0.0331627f, -0.1394632f, -0.0396029f, +0.0817769f, -0.0622456f, -0.0143993f, -0.1310017f,
  -0.2527708f, -0.4334237f, -0.0922031f, -0.1420202f, +0.1070862f, -0.1968807f, -0.2917812f, -0.1289275f,
  -0.2152404f, +0.2082292f, +0.0798878f, +0.0525814f, -0.3110932f, -0.1231623f, +0.0383791f, -0.5720499f,
  -0.2520383f, +0.0282549f, -0.0343083f, -0.0048523f, -0.2496924f, -0.0081726f, -0.1740747f, -0.2792110f,
  -0.1537629f, -0.2872247f, +0.3464274f, -0.1356081f, -0.0016389f, +0.0800733f, -0.1205726f, -0.1664378f,
  +0.1054192f, -0.0950309f, -0.0753270f, -0.1009667f, -0.2775079f, -0.0499891f, +0.1491438f, -0.0856426f,
  -0.1053233f, -0.1633430f, -0.2214874f, -0.1769097f, -0.0469176f, -0.1914187f, -0.0244059f, +0.1036538f,
  -0.0169151f, +0.1861061f, +0.0718358f, -0.0540007f, -0.2800226f, +0.0093412f, -0.0484280f, +0.0145620f,
  +0.0254989f, -0.2158282f, -0.4677378f, -0.0755779f, +0.3197539f, -0.1049481f, -0.1250987f, -0.0982076f,
  +0.1942615f, -0.0460536f, -0.0837000f, -0.0858381f, +0.0566084f, -0.1649739f, -0.0993685f, -0.2416531f,
  -0.0898836f, +0.1150972f, -0.0103199f, +0.0452813f, +0.3031959f, -0.1118456f, +0.0596898f, -0.1754796f,
  +0.0764241f, +0.0611865f, -0.0462680f, -0.0189851f, -0.1904467f, +0.0247331f, -0.0152662f, -0.1700359f,
  -0.1041261f, -0.1401391f, +0.0592647f, +0.0086473f, -0.0594399f, +0.0243690f, +0.2486145f, -0.2320288f,
  -0.1008988f, +0.1561899f, -0.0843929f, +0.2673452f, +0.1808864f, +0.1881110f, +0.0484807f, -0.0650878f,
  -0.0288375f, +0.0592777f, -0.0120374f, -0.2082632f, -0.2584343f, +0.0400215f, -0.2510431f, +0.1267699f,
  +0.0298856f, -0.0714973f, -0.0371146f, +0.0146443f, +0.0558739f, -0.2890652f, -0.0892645f, -0.0315513f,
  -0.1364433f, -0.0396110f, -0.1228062f, -0.1288420f, -0.0950230f, +0.0164549f, +0.1597271f, +0.0014379f,
  -0.1470973f, +0.0433028f, -0.0994927f, -0.1921292f, +0.1777767f, -0.2030370f, -0.1180476f, +0.0187022f,
  +0.1020149f, -0.0557553f, -0.1976491f, +0.1291256f, -0.2062571f, -0.1114181f, -0.2465980f, +0.0455317f,
  +0.0185273f, +0.0104438f, -0.0658638f, +0.0224489f, +0.2081583f, +0.0749914f, -0.1007131f, -0.0261314f,
  +0.2695114f, -0.1148505f, +0.2883573f, -0.2520608f, -0.2224212f, +0.1665184f, -0.0399148f, -0.1002327f,
  +0.5461640f, -0.2944980f, -0.2087618f, +0.0433496f, -0.2242833f, +0.0421937f, +0.2734173f, +0.0275124f,
  +0.1066268f, +0.1454306f, +0.0193826f, -0.0473348f, -0.0401203f, +0.0420387f, +0.1102299f, +0.0435330f,
  +0.0517734f, -0.2233567f, +0.0819855f, -0.2058100f, -0.0440832f, +0.1378766f, -0.0622456f, +0.0130211f,
  +0.1234264f, -0.0984141f, +0.3071020f, -0.3105330f, -0.0158063f, -0.0183637f, +0.1240553f, -0.0276951f,
  +0.0745921f, +0.1053408f, -0.0713020f, -0.0317080f, +0.0533454f, +0.0637996f, +0.0123797f, +0.1183379f,
  +0.0004733f, -0.0687042f, -0.3284705f, +0.0809196f, -0.1425102f, -0.0958986f, +0.0302991f, +0.0667433f,
  +0.0174683f, +0.0427512f, +0.0739666f, -0.1067610f, +0.1881050f, +0.0240536f, -0.3151189f, +0.0519207f,
  -0.1720371f, -0.0700103f, -0.2005945f, +0.0918954f, -0.1131852f, +0.1574680f, +0.0539885f, -0.0361802f,
  +0.1113379f, -0.0501796f, -0.5408893f, -0.1350243f, -0.0035035f, -0.2233229f, -0.0633716f, +0.2203305f,
  -0.0167162f, +0.0587756f, +0.1211347f, +0.0374629f, -0.0481734f, +0.3797401f, -0.0623049f, +0.0396762f,
  -0.1455328f, -0.1171867f, +0.0107072f, +0.1043192f, -0.1468618f, -0.0301460f, -0.1685711f, +0.0776280f,
  +0.0677974f, -0.0131228f, +0.0133809f, -0.0422890f, -0.0816097f, +0.0082360f, -0.0506287f, +0.0725092f,
  -0.0832117f, +0.0867790f, +0.1583247f, -0.3279633f, -0.0790180f, -0.0564849f, +0.0412819f, -0.1663113f
);

const float biases[4] = float[4](
  -0.0080329f, +0.0065012f, -0.0066107f, +0.0176466f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer101 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0825832f, +0.0009282f, +0.0702519f, +0.0620952f, +0.1221138f, +0.0488065f, +0.1824601f, +0.0723333f,
  -0.0456556f, +0.4131049f, -0.1936056f, -0.2622346f, +0.2728601f, -0.1809756f, -0.0261945f, -0.1409459f,
  +0.1259628f, -0.0200659f, -0.2300180f, -0.0199855f, -0.1758839f, -0.0094479f, +0.1182569f, -0.0066406f,
  +0.3668632f, -0.3853337f, +0.0039475f, +0.1754090f, +0.0518210f, +0.0482518f, +0.0986339f, +0.1902006f,
  +0.0955708f, -0.3555339f, +0.2070130f, -0.0054104f, +0.2326545f, -0.0512711f, -0.1459038f, +0.0980503f,
  -0.0831265f, +0.0467192f, -0.1302280f, -0.1358202f, +0.1479531f, +0.0488292f, -0.0975139f, -0.1514003f,
  +0.0823576f, -0.0943010f, +0.0216088f, -0.3780653f, -0.0508372f, -0.1182850f, -0.0137135f, -0.0427694f,
  +0.0612223f, -0.1504145f, -0.0552497f, +0.1016143f, +0.0427648f, +0.1933566f, +0.0846563f, +0.0073698f,
  -0.2121358f, +0.0461441f, +0.0585551f, +0.1937693f, +0.0039771f, +0.1926158f, -0.1044164f, -0.0360821f,
  +0.0607102f, +0.0195714f, +0.0396821f, -0.0768491f, -0.1671313f, -0.0490158f, -0.0020340f, +0.1821855f,
  +0.1039215f, -0.0164390f, +0.1325486f, -0.2754799f, -0.0182768f, -0.0771758f, +0.2231247f, +0.1521217f,
  -0.2690189f, +0.0559962f, +0.0679822f, -0.1210653f, -0.1029199f, -0.0627080f, +0.0476358f, +0.0144239f,
  +0.1146514f, -0.0789494f, -0.1036284f, -0.0740628f, -0.2858829f, +0.0435252f, -0.1550816f, -0.1783687f,
  -0.3119847f, +0.0521597f, +0.0734446f, -0.3192191f, -0.0086802f, -0.1506112f, +0.0736705f, -0.1692939f,
  +0.1285832f, +0.0618762f, -0.1579022f, -0.1763954f, +0.2294562f, -0.1920103f, -0.2518820f, +0.0893769f,
  -0.1130620f, +0.2054956f, -0.2358788f, +0.0616114f, +0.1248314f, -0.1002510f, -0.1243070f, +0.0070466f,
  -0.2094481f, +0.0497288f, +0.2097155f, -0.1648105f, +0.3827049f, -0.0199331f, -0.2257564f, +0.1313883f,
  +0.1898417f, +0.0652735f, +0.0443442f, +0.0028459f, +0.0167416f, +0.0036518f, -0.0652857f, -0.0878767f,
  -0.0995478f, +0.0863401f, +0.0810938f, -0.1000395f, +0.1257895f, -0.0268640f, -0.0146428f, +0.1611763f,
  -0.1235971f, +0.0342299f, -0.0182483f, +0.0198820f, +0.0015704f, +0.0204506f, -0.2555316f, +0.2681005f,
  -0.1085989f, +0.0644747f, -0.0812581f, -0.0438921f, +0.0762007f, -0.1468952f, +0.0684744f, +0.1104302f,
  -0.3833512f, +0.1609126f, -0.2264076f, +0.0760270f, +0.1176703f, +0.0179492f, +0.1276068f, -0.0105854f,
  +0.2273737f, -0.2069452f, -0.2691465f, -0.1296212f, -0.1045855f, -0.0598831f, +0.0762328f, +0.1799211f,
  +0.0209625f, +0.0445753f, +0.1526200f, -0.0839527f, -0.0366514f, +0.0234043f, +0.0322607f, -0.0197896f,
  +0.0386579f, +0.0419863f, +0.0980843f, +0.0243863f, -0.0977919f, -0.0324527f, +0.0536756f, +0.0623415f,
  +0.0549047f, +0.1382968f, +0.0854653f, +0.0490973f, -0.1162330f, +0.0136722f, +0.0373546f, +0.0933403f,
  -0.0255185f, +0.1687121f, +0.2435201f, -0.0662733f, +0.1579146f, +0.0572665f, -0.1120505f, -0.0755927f,
  +0.0303357f, -0.2317241f, +0.0680617f, +0.3313929f, +0.0038030f, +0.1535349f, -0.1794759f, -0.0148066f,
  -0.0081399f, +0.1371059f, -0.0536325f, +0.0937695f, +0.2698738f, +0.0702608f, +0.0741206f, +0.0731177f,
  +0.1421346f, +0.0968809f, +0.1134676f, -0.0223543f, -0.2835714f, -0.0242802f, +0.0606294f, +0.0483506f,
  +0.2461638f, -0.0612488f, +0.1382474f, -0.0729789f, -0.0763732f, +0.3659561f, -0.0368552f, -0.1837781f,
  +0.1338675f, -0.0419470f, +0.1153775f, -0.0572898f, -0.1147006f, +0.3221955f, -0.3095527f, +0.2132018f,
  +0.2768820f, -0.3999968f, -0.0317592f, -0.0723715f, -0.0694319f, +0.4260799f, -0.0083604f, +0.0926723f,
  -0.1063280f, -0.3396114f, +0.2454937f, +0.1867623f, +0.0668344f, -0.0972740f, -0.1528346f, -0.1537808f,
  +0.2140424f, -0.3698759f, -0.2434522f, -0.4973219f, +0.0752119f, -0.0910879f, -0.1072824f, +0.2340892f,
  +0.2144682f, +0.0667928f, -0.1205629f, -0.0610504f, +0.0275426f, -0.0305831f, +0.1915587f, -0.0615628f
);

const float biases[4] = float[4](
  +0.0056448f, +0.0150353f, +0.0338113f, -0.0020988f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer101 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0003336f, +0.1398035f, -0.0734386f, -0.0993102f, -0.1366710f, +0.0305759f, +0.0390931f, +0.0207737f,
  -0.3809207f, -0.0829440f, +0.1784647f, +0.0435974f, +0.2372736f, -0.2425234f, +0.1440152f, +0.0715930f,
  -0.2679941f, +0.1684503f, +0.2115484f, -0.1442871f, +0.0415378f, +0.1181919f, -0.1224832f, +0.2513844f,
  +0.1509080f, +0.0362719f, -0.2111493f, -0.1940535f, +0.1961530f, -0.1148935f, -0.1987286f, +0.0851095f,
  +0.0512391f, +0.0657253f, +0.0618497f, +0.1054554f, +0.2438385f, +0.2944207f, +0.0695608f, +0.0808774f,
  +0.0976701f, -0.1210418f, +0.2913337f, -0.2082004f, +0.0942615f, -0.0265126f, +0.0243632f, -0.1023035f,
  -0.0181734f, +0.0302009f, +0.1717334f, +0.1621139f, -0.1846274f, -0.2402356f, +0.0542772f, +0.0470707f,
  -0.1866626f, +0.3315595f, -0.2337320f, +0.0275157f, -0.2409734f, -0.0424047f, -0.2094059f, -0.1163128f,
  +0.0597902f, +0.1761260f, +0.1778031f, +0.1593795f, -0.1458618f, +0.0218151f, +0.1667057f, +0.0107554f,
  +0.2333622f, +0.0131274f, -0.0149635f, -0.2650606f, +0.4185005f, +0.1011845f, +0.2739902f, +0.5026931f,
  +0.0941975f, -0.0164364f, +0.0202966f, -0.3293351f, +0.2255338f, +0.0178514f, +0.1618679f, +0.0041531f,
  -0.0505560f, -0.0229903f, +0.0568211f, +0.1456214f, +0.5890705f, +0.1060283f, +0.0676827f, -0.1459696f,
  +0.0804187f, -0.2204958f, -0.0717022f, +0.1119493f, +0.1907978f, +0.2049728f, -0.1215757f, -0.2654155f,
  +0.0610328f, -0.1467141f, +0.0458500f, -0.1818943f, +0.0308515f, +0.1056175f, -0.1619703f, -0.0576251f,
  -0.1227978f, -0.3772433f, -0.1215448f, -0.4142163f, +0.1659492f, -0.0318172f, -0.1135277f, +0.0028139f,
  -0.0354997f, -0.0745728f, -0.1629607f, +0.0399300f, -0.0575141f, +0.0917049f, +0.1472526f, -0.0011010f,
  -0.0690042f, -0.0957555f, +0.1136007f, +0.1530223f, +0.3262577f, +0.2690418f, +0.1122725f, +0.1317020f,
  +0.0595228f, +0.2459275f, +0.0922614f, -0.0626620f, +0.1993213f, +0.2169897f, +0.3489232f, -0.1629582f,
  +0.0148783f, +0.0872151f, -0.1023751f, +0.0474054f, +0.1039667f, +0.0343535f, +0.0470267f, -0.1818380f,
  -0.2241051f, +0.0241851f, +0.0194654f, +0.0500816f, -0.2429311f, -0.0204369f, -0.0150779f, +0.2894638f,
  -0.1708515f, -0.0285071f, +0.2054246f, -0.1213737f, +0.1850886f, -0.1767852f, -0.1177389f, -0.1230271f,
  +0.0461081f, -0.2788721f, -0.0470403f, +0.1872707f, +0.2901336f, -0.1193898f, +0.0783469f, +0.1647161f,
  +0.0926391f, -0.0194601f, -0.1761373f, -0.0171682f, +0.0563553f, -0.0404717f, +0.2201612f, +0.0754859f,
  +0.0947141f, -0.0228727f, +0.0910421f, -0.0820079f, -0.0635206f, +0.0542980f, -0.0609401f, -0.1437399f,
  +0.1253176f, +0.1279947f, +0.0247360f, +0.0442466f, -0.0109965f, -0.3149819f, -0.2753138f, +0.0187250f,
  +0.0999094f, -0.0892121f, +0.0450084f, -0.0083890f, -0.2398347f, +0.1121369f, +0.2816782f, +0.3506085f,
  +0.1600738f, -0.0356486f, +0.0049860f, +0.0351322f, -0.1022321f, +0.0494585f, -0.0594232f, -0.0474368f,
  -0.2093895f, -0.0302644f, -0.2597394f, +0.2211118f, -0.2248627f, -0.0116008f, -0.0291422f, +0.3293836f,
  +0.0516211f, -0.0463380f, +0.0282643f, +0.2416313f, +0.0662468f, -0.2237301f, -0.3531738f, -0.2004312f,
  +0.1370433f, +0.0278833f, -0.1029743f, -0.1792755f, +0.3831855f, -0.1711372f, -0.2439019f, -0.1144708f,
  +0.2571825f, -0.1404449f, +0.0953656f, +0.2425460f, +0.3325182f, +0.1435082f, -0.0897501f, -0.0982660f,
  +0.5214649f, -0.1111206f, -0.0614019f, +0.3861650f, +0.1039441f, +0.4557244f, -0.0935534f, +0.0315619f,
  +0.2961644f, -0.2886104f, +0.3527398f, -0.0131112f, +0.0801253f, -0.1755148f, +0.1757387f, +0.2473357f,
  -0.2568284f, +0.2513996f, -0.2005995f, -0.0389715f, -0.0923161f, +0.0672116f, +0.3154942f, +0.0559414f,
  -0.0470790f, -0.1146998f, +0.0975330f, +0.0084320f, +0.0987721f, -0.0619044f, -0.0306905f, +0.0950432f,
  +0.0126148f, -0.0239759f, -0.0685945f, -0.1926837f, +0.3086818f, -0.0295051f, +0.1149460f, +0.1010801f
);

const float biases[4] = float[4](
  +0.0059414f, -0.0166463f, +0.0172663f, -0.1206445f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer102 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0724940f, +0.1019198f, -0.0796466f, +0.0424959f, -0.0574507f, +0.2060398f, +0.1942820f, -0.0514787f,
  +0.2796267f, +0.0721555f, +0.0087159f, -0.0592096f, -0.0488361f, +0.3177989f, -0.2784810f, +0.2459998f,
  +0.0424356f, +0.1345309f, -0.0723398f, -0.0551601f, -0.0381424f, +0.1773595f, +0.0791448f, +0.1431197f,
  -0.2104294f, -0.0444580f, -0.2186492f, -0.3687930f, +0.1624334f, +0.0667602f, -0.0734176f, -0.0820501f,
  -0.1134322f, +0.1068202f, -0.1113541f, -0.1798270f, +0.1853009f, +0.0303621f, +0.1761954f, -0.3124313f,
  -0.1294901f, -0.0431866f, +0.1345254f, -0.2236925f, +0.0250053f, +0.1122064f, +0.0612187f, -0.0095547f,
  +0.0178670f, +0.0067390f, -0.0201149f, +0.1059850f, -0.2135311f, +0.1209493f, +0.0423118f, +0.1292778f,
  +0.2632192f, +0.0131394f, -0.0596175f, +0.0895795f, -0.0295853f, -0.1443856f, -0.0210600f, +0.0569115f,
  -0.0557071f, -0.0397299f, +0.0435381f, -0.2142102f, -0.1557005f, -0.2888517f, +0.0054434f, +0.0001480f,
  +0.0021122f, +0.0996552f, +0.0705725f, -0.1434028f, -0.1014560f, -0.2689233f, -0.0322449f, +0.2972087f,
  +0.0118245f, +0.0886413f, +0.0545128f, +0.0223550f, -0.0717250f, -0.2723520f, +0.2944045f, +0.0559296f,
  +0.4226592f, -0.1390687f, -0.1020022f, -0.2989843f, -0.0321598f, -0.0927871f, -0.0756327f, -0.1514420f,
  -0.1263057f, -0.1446641f, -0.0782240f, -0.1209027f, +0.1092335f, -0.0975840f, +0.0465252f, +0.3723535f,
  +0.1883801f, +0.0318024f, +0.1390688f, +0.3827123f, +0.0874880f, -0.2410574f, +0.1737905f, +0.0475936f,
  +0.2957115f, -0.0026385f, -0.1940004f, -0.1111120f, +0.3049983f, +0.1791606f, -0.3868830f, -0.2799456f,
  +0.1348564f, +0.2255076f, -0.1690295f, -0.1729911f, +0.1074977f, -0.1082025f, -0.1583066f, -0.0862856f,
  -0.0391236f, +0.2176421f, -0.0810220f, -0.5909579f, -0.0717721f, +0.1075580f, -0.1457469f, -0.1736135f,
  +0.0586352f, -0.1510738f, -0.0188780f, +0.1970141f, -0.1999934f, -0.2545277f, -0.1660710f, -0.0757171f,
  +0.0054517f, +0.0415225f, -0.0896645f, +0.1290091f, -0.1783753f, +0.1737198f, -0.0572484f, +0.1548607f,
  +0.0517511f, -0.1233287f, -0.1205044f, +0.2334079f, -0.1424292f, +0.1255369f, +0.2830757f, -0.2260620f,
  +0.0177900f, -0.1460529f, +0.0375869f, +0.1693416f, -0.0370443f, +0.3145471f, -0.1215872f, -0.2415773f,
  -0.0109357f, +0.0791243f, -0.0504910f, +0.0679901f, -0.1351983f, -0.1483004f, +0.1073937f, +0.1638673f,
  +0.0081386f, +0.0165817f, +0.1057721f, +0.1698053f, -0.1578419f, +0.0608342f, -0.5529892f, +0.1505409f,
  +0.1390168f, -0.1088550f, -0.0356896f, +0.0130536f, +0.1043807f, -0.3078676f, +0.1873007f, +0.2371627f,
  -0.0316666f, -0.0136035f, -0.0648675f, -0.2297436f, -0.1496136f, -0.1527375f, -0.0424206f, +0.0741082f,
  -0.1314305f, +0.0895945f, -0.1147639f, +0.0971575f, -0.1351120f, -0.0338886f, -0.0060497f, +0.1116221f,
  +0.1421964f, +0.0523057f, +0.0036508f, +0.0082331f, +0.0755152f, +0.0587955f, +0.2049478f, +0.1275879f,
  -0.0432228f, +0.1082136f, +0.3037939f, +0.1216401f, -0.1722964f, +0.1423031f, +0.1707676f, +0.2225420f,
  -0.1576059f, -0.0557810f, -0.0052933f, +0.2176659f, +0.0396219f, +0.0876620f, +0.0582085f, -0.0048627f,
  +0.0860981f, -0.0471164f, -0.0511186f, -0.1883309f, +0.0077144f, +0.0790117f, +0.0815142f, +0.0368094f,
  -0.0692004f, +0.1787210f, +0.0481882f, -0.0048409f, -0.0759815f, +0.3057439f, -0.1641742f, -0.0147286f,
  -0.3085287f, +0.0360144f, -0.3237320f, -0.0458655f, -0.3900594f, -0.1194558f, +0.2067098f, +0.0727567f,
  -0.1794306f, +0.1352960f, -0.0021641f, -0.2965220f, -0.0958135f, -0.0458890f, +0.0778463f, -0.2974161f,
  +0.0073665f, +0.0832824f, -0.2447994f, +0.1366972f, -0.0506427f, -0.1489759f, +0.0380505f, +0.1482830f,
  +0.1608094f, +0.0391364f, +0.2469130f, +0.0581567f, +0.0190478f, +0.2049906f, +0.1123606f, -0.3168772f,
  +0.0275928f, +0.0031283f, -0.1791270f, -0.2076317f, +0.1634165f, +0.1899343f, +0.1316320f, +0.0833699f
);

const float biases[4] = float[4](
  -0.0073209f, -0.0474999f, -0.0312109f, +0.0024764f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer102 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0928376f, +0.0507043f, -0.0345779f, +0.1966177f, -0.2380717f, -0.0566804f, -0.0664520f, +0.0851142f,
  -0.2038225f, -0.0488159f, -0.0109643f, -0.1166441f, +0.1380007f, -0.0441898f, -0.0325372f, -0.0528957f,
  -0.0674485f, -0.0890721f, +0.0384020f, +0.0153114f, -0.1037920f, -0.2183537f, +0.0909063f, +0.0473867f,
  -0.1010858f, -0.1154837f, +0.1253426f, -0.0546109f, +0.1282856f, -0.2445599f, +0.1379906f, +0.0675513f,
  -0.0928374f, -0.0310888f, -0.0617278f, +0.3237053f, -0.1671277f, +0.1723892f, -0.1590140f, +0.0922020f,
  +0.1247827f, +0.1217852f, -0.3612490f, +0.1655778f, -0.0886130f, +0.1093579f, -0.0808899f, -0.0728659f,
  -0.0662236f, +0.1249784f, -0.1816196f, +0.1739663f, -0.1750457f, +0.1518457f, -0.1178479f, -0.1299313f,
  +0.1630769f, -0.2261802f, -0.0523018f, -0.1536798f, -0.1406041f, -0.0629052f, -0.1137806f, -0.0580954f,
  -0.0600922f, +0.0444487f, +0.1273682f, +0.1744804f, +0.1701566f, +0.2364724f, -0.1337550f, -0.1362654f,
  +0.0090383f, +0.1159581f, -0.0358390f, -0.1295517f, -0.1627288f, -0.0196573f, +0.3128241f, +0.2577487f,
  +0.0372985f, -0.0736610f, -0.1447811f, -0.1310231f, +0.2197208f, +0.2986228f, -0.1466213f, +0.0731053f,
  +0.0852792f, +0.0056508f, +0.2375940f, -0.1836324f, +0.0470113f, -0.0375174f, +0.2979582f, -0.1927863f,
  -0.0414506f, -0.0533737f, -0.0678211f, +0.1029176f, -0.1875401f, +0.1636449f, -0.1046106f, +0.5783233f,
  +0.0045602f, -0.2349561f, -0.0901121f, +0.0900764f, +0.0639905f, +0.2139292f, +0.2193099f, +0.0089015f,
  +0.0626623f, -0.0381800f, +0.1117640f, -0.1550711f, -0.0835612f, +0.1832008f, +0.0891209f, +0.0464325f,
  +0.1625377f, +0.0738467f, +0.1286527f, +0.1275340f, -0.0781288f, -0.2179969f, +0.0336297f, +0.2106585f,
  +0.0682822f, +0.0773528f, -0.0806691f, -0.2867627f, +0.2985298f, -0.0234849f, +0.0222851f, -0.0599081f,
  -0.0784035f, +0.1791215f, +0.0753556f, +0.1284772f, -0.0886286f, +0.0617951f, -0.1549290f, -0.2642763f,
  -0.1182021f, -0.0577819f, -0.1572888f, -0.1992133f, -0.3840109f, -0.1133266f, +0.1055637f, -0.0095165f,
  -0.1200643f, -0.1474970f, -0.0497126f, -0.1569441f, +0.0719411f, -0.2350881f, -0.1539832f, +0.0003019f,
  -0.3032393f, +0.0283667f, +0.1195648f, +0.2616149f, +0.1055672f, -0.0850589f, -0.3591871f, -0.0137460f,
  +0.0394105f, +0.2221068f, -0.0996729f, +0.1169422f, +0.3433475f, +0.0745196f, +0.1176015f, +0.0559786f,
  -0.0935077f, +0.0033578f, +0.0461158f, -0.0942270f, +0.1263174f, -0.1063132f, +0.0695286f, -0.1855921f,
  +0.2121255f, -0.0091459f, +0.0160515f, -0.1126133f, +0.0693973f, -0.0006214f, -0.4546426f, +0.0841870f,
  +0.0165323f, +0.2566148f, +0.0416389f, +0.2981629f, +0.0605882f, +0.1215109f, -0.0176251f, +0.2047426f,
  -0.1819969f, +0.0089934f, +0.1366641f, -0.0205184f, +0.0629404f, -0.2198512f, +0.1957015f, -0.0603908f,
  -0.1863589f, -0.0192598f, +0.0215550f, +0.0811652f, -0.2975651f, +0.0507954f, -0.2664553f, -0.1664525f,
  -0.1099865f, +0.0670219f, +0.4461179f, +0.2205000f, +0.0095680f, -0.1076612f, +0.1464567f, -0.0394933f,
  -0.0499431f, +0.2619528f, -0.1595855f, +0.1202537f, +0.0259337f, -0.2342172f, +0.0310633f, +0.1792142f,
  +0.1046227f, -0.0556162f, -0.1472389f, +0.2380268f, -0.1675130f, -0.2634541f, +0.0044872f, -0.1239798f,
  -0.0885107f, -0.0678011f, -0.1773038f, +0.3123277f, +0.0188485f, -0.3744273f, -0.1567845f, +0.1336577f,
  +0.0921446f, +0.0344157f, -0.0108308f, -0.0204206f, -0.1228171f, +0.1641482f, +0.0178728f, +0.4087902f,
  +0.1705454f, -0.0924510f, -0.2878494f, +0.1397388f, +0.0401672f, -0.2872102f, -0.1979033f, +0.1691612f,
  -0.0131201f, +0.1046328f, -0.1403526f, -0.1699581f, -0.0559528f, +0.2374936f, +0.0673763f, +0.0875187f,
  +0.0368938f, +0.0285620f, -0.2466134f, +0.1218602f, +0.0222923f, -0.2461325f, -0.0138684f, +0.0331891f,
  -0.2239198f, +0.0438269f, -0.0025512f, +0.2284752f, -0.0329241f, -0.2000289f, -0.4472415f, -0.0376551f
);

const float biases[4] = float[4](
  -0.0049617f, +0.0171230f, -0.0171278f, +0.0083843f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer103 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0017432f, +0.0280107f, +0.2663459f, -0.0215001f, -0.0570829f, +0.0044311f, +0.0385654f, +0.0612170f,
  -0.1023221f, +0.1631772f, +0.1278171f, -0.0673942f, +0.0142445f, -0.0602572f, -0.0178663f, -0.0726188f,
  -0.1765902f, +0.5181796f, +0.0277225f, -0.1165566f, -0.1949454f, +0.1822971f, +0.0636047f, -0.1743659f,
  +0.0238900f, +0.3032578f, +0.1094781f, -0.0623956f, -0.0940405f, -0.0512943f, -0.0106582f, +0.0259206f,
  -0.1820119f, +0.1248917f, -0.0553395f, +0.2586772f, -0.0013918f, +0.1532032f, -0.0085639f, -0.0227124f,
  +0.0539542f, -0.0408509f, -0.0243541f, +0.0818523f, -0.0347221f, +0.3313048f, -0.0221754f, -0.0024254f,
  +0.0015506f, -0.0192687f, +0.0654797f, -0.0020759f, -0.0820781f, -0.0181696f, +0.1005045f, +0.0455580f,
  +0.2289158f, -0.1084987f, +0.0799822f, -0.0840391f, -0.0257204f, +0.0986949f, +0.1949330f, -0.1265500f,
  +0.0300694f, -0.1900975f, -0.0510785f, -0.1037220f, -0.0616314f, -0.0587894f, -0.0016869f, +0.1546024f,
  -0.1829874f, +0.0899546f, -0.1048368f, -0.1320870f, -0.0267348f, +0.0596687f, +0.0325830f, +0.1477177f,
  -0.1030296f, -0.0712041f, -0.0352164f, +0.2377210f, +0.1017293f, +0.0226797f, +0.2277848f, -0.1195426f,
  +0.0872097f, +0.1445722f, -0.0800514f, -0.0957491f, -0.1794309f, -0.0978373f, -0.2944790f, +0.1390921f,
  +0.0109113f, +0.1369689f, +0.0178243f, -0.0344088f, +0.0505103f, +0.0753997f, +0.3844951f, -0.1530920f,
  -0.0604664f, +0.3794892f, +0.2435955f, -0.0959393f, +0.0780848f, +0.1285535f, -0.0014347f, +0.0884886f,
  +0.2933930f, +0.0728662f, -0.2632326f, -0.0677326f, -0.0440488f, -0.1940633f, +0.1339600f, -0.0119934f,
  -0.0855821f, +0.0649587f, +0.0368219f, -0.1821854f, -0.0210054f, +0.1314593f, -0.1639362f, -0.0106460f,
  -0.1547996f, +0.1964337f, -0.0645933f, +0.0562004f, -0.3011799f, -0.1622406f, +0.0279542f, -0.0066409f,
  +0.0623519f, -0.2351603f, -0.0697386f, +0.1027369f, -0.2219846f, +0.0403801f, +0.0499771f, +0.0576143f,
  -0.0999678f, +0.1047475f, -0.0107163f, -0.0786027f, -0.0239772f, -0.1192224f, +0.0719913f, +0.0057200f,
  -0.0879267f, +0.0864069f, -0.1025658f, +0.1298706f, +0.2432481f, +0.0752059f, -0.0419912f, -0.1008801f,
  +0.0171409f, -0.0746092f, -0.0714864f, -0.2102088f, -0.0900859f, +0.0317707f, +0.0602182f, -0.0335104f,
  -0.1054449f, -0.0478102f, -0.1671353f, +0.0028531f, +0.1246001f, -0.2307097f, +0.1641746f, +0.0150440f,
  +0.0288746f, +0.1351051f, +0.2068219f, -0.0131461f, +0.1960887f, +0.2931232f, +0.1103848f, +0.1689893f,
  +0.2043318f, +0.0422922f, -0.0379387f, +0.1180854f, -0.2384285f, +0.0267421f, +0.3391103f, -0.1096465f,
  -0.0695382f, +0.1284619f, -0.1196273f, +0.0506907f, -0.0240703f, -0.2310862f, +0.0576492f, +0.1477212f,
  -0.0892241f, -0.1481997f, +0.0946799f, +0.1678161f, -0.1418523f, +0.2430423f, -0.0301167f, +0.0710309f,
  -0.1042231f, +0.0699072f, -0.1564261f, -0.0166827f, -0.1062098f, -0.1419332f, -0.1218287f, +0.1814782f,
  -0.0426791f, -0.0551158f, -0.0122330f, -0.0665966f, +0.2793451f, -0.1087432f, -0.1416150f, +0.0440752f,
  -0.1486370f, -0.1817679f, -0.2243153f, -0.0432622f, -0.0615259f, +0.1314879f, -0.4028975f, -0.1647908f,
  +0.0330958f, -0.0647340f, -0.3403344f, -0.0767996f, -0.2259499f, +0.0736888f, -0.0315855f, -0.0611263f,
  -0.0720595f, -0.4483368f, -0.4580969f, +0.0011420f, -0.1296638f, -0.0855150f, +0.3984681f, +0.2120510f,
  +0.4193631f, -0.1537088f, -0.0362266f, -0.4224685f, +0.2474195f, +0.4670210f, +0.6747364f, +0.4617389f,
  +0.0588498f, -0.0444205f, +0.3012244f, +0.1020222f, -0.0911672f, +0.1718098f, +0.1264938f, +0.2199938f,
  +0.1355572f, +0.0775671f, +0.1775466f, +0.1615067f, +0.1290111f, +0.1391095f, -0.2795116f, -0.2418001f,
  -0.0934756f, +0.0200778f, -0.0273471f, +0.3716682f, -0.0153089f, -0.5104775f, -0.4350024f, -0.2067300f,
  -0.1369956f, +0.0902182f, +0.0104516f, +0.0381329f, -0.0452706f, -0.3220752f, -0.1972550f, -0.0653096f
);

const float biases[4] = float[4](
  -0.0143753f, +0.0021537f, +0.0302797f, -0.0205726f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer103 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.4015945f, +0.0013392f, -0.1200282f, -0.0901761f, +0.3583126f, -0.0174707f, +0.0084897f, +0.3002589f,
  -0.1627661f, +0.1200844f, -0.1026410f, -0.0046291f, +0.0732240f, +0.1810808f, +0.4482223f, -0.1711032f,
  -0.0425344f, -0.1158527f, -0.1667689f, -0.0846010f, -0.1805023f, -0.0157694f, +0.0130484f, +0.0345895f,
  +0.1977356f, +0.0497703f, -0.1900458f, -0.0161202f, +0.3812779f, -0.4057020f, -0.1732827f, -0.0117192f,
  +0.0423981f, +0.1879582f, +0.1521721f, +0.0418968f, +0.0178621f, +0.0816487f, -0.0827786f, +0.0182212f,
  +0.3416412f, +0.0027247f, +0.2936392f, +0.1016101f, +0.2306931f, +0.0134869f, +0.0150909f, +0.1044702f,
  +0.1110915f, -0.2651911f, +0.0118497f, -0.1213564f, -0.0133016f, -0.2272408f, +0.1240015f, +0.2547799f,
  +0.0408908f, +0.1107490f, -0.0428327f, +0.1272937f, -0.2457672f, +0.1464055f, +0.1447617f, -0.0010226f,
  +0.0947087f, -0.0251358f, +0.0918483f, +0.2282358f, -0.0151385f, +0.0790290f, +0.0991789f, +0.0431003f,
  +0.1159158f, +0.0688389f, +0.0921405f, +0.1198371f, -0.1164235f, -0.0844975f, -0.0674181f, -0.0415500f,
  +0.1594080f, +0.1528756f, -0.0997101f, -0.0865992f, +0.1788938f, +0.1627445f, +0.1304022f, -0.0468915f,
  +0.1519943f, +0.2149188f, -0.0975655f, +0.0989558f, -0.0126001f, +0.0747057f, -0.2490303f, +0.4070158f,
  +0.1466071f, -0.3193565f, +0.1067512f, +0.2592445f, -0.1849128f, -0.0578237f, +0.0125055f, -0.2265431f,
  +0.0718877f, +0.0720809f, -0.0247420f, +0.1493214f, +0.1183414f, -0.2172575f, +0.1592205f, +0.1114341f,
  +0.0751613f, -0.0985822f, +0.2748781f, +0.2242406f, -0.0161015f, +0.0032571f, -0.2456118f, +0.0487582f,
  +0.0211483f, -0.0034696f, +0.0948011f, -0.0154344f, -0.0557118f, -0.0176825f, -0.1682365f, +0.0113063f,
  +0.1241419f, -0.2639188f, +0.2937345f, +0.0418484f, +0.0819425f, -0.1051079f, -0.0190808f, -0.1870860f,
  -0.0047713f, +0.1269182f, -0.1446565f, -0.0530343f, +0.0649495f, -0.0894743f, -0.2365362f, +0.0443734f,
  -0.1250827f, +0.1383035f, -0.0379787f, +0.0783086f, -0.1041514f, +0.1765390f, -0.0200527f, +0.1133373f,
  +0.2282990f, -0.0794476f, -0.1828556f, -0.0177991f, -0.3999166f, -0.1005276f, +0.1563434f, +0.0685488f,
  +0.0870023f, -0.3697805f, +0.5911440f, -0.3942534f, +0.1379337f, -0.0713260f, +0.0429453f, +0.0258629f,
  +0.0973465f, +0.0339601f, +0.0821571f, -0.0595205f, -0.0475565f, +0.1017177f, +0.1027261f, +0.2785225f,
  -0.0103114f, -0.1361228f, -0.3291032f, +0.1951500f, +0.2444703f, -0.2454573f, -0.2241055f, -0.0332873f,
  +0.1395626f, -0.2386313f, +0.1077776f, -0.2308045f, -0.0114108f, +0.1329843f, -0.2175142f, +0.0912568f,
  +0.2244410f, +0.2246725f, -0.0978370f, -0.0153992f, +0.2241297f, +0.0261914f, -0.1574996f, +0.1103934f,
  +0.2952784f, -0.2592061f, -0.1594501f, -0.0291086f, -0.2261918f, -0.3293362f, +0.1025492f, -0.1322770f,
  +0.1557441f, -0.3560895f, +0.0675566f, +0.0525209f, +0.2127320f, +0.0017690f, -0.0386148f, +0.1520092f,
  -0.0154218f, +0.0958778f, +0.1674548f, +0.0805977f, +0.1191132f, +0.1466568f, -0.1342729f, +0.0456061f,
  -0.1097922f, -0.2067412f, +0.1434698f, +0.2887148f, -0.2206672f, +0.3158244f, -0.1330330f, +0.0203831f,
  +0.1045791f, -0.0658319f, -0.4056441f, -0.1206403f, -0.1299872f, +0.0987847f, -0.0379705f, +0.0189191f,
  -0.3470081f, -0.1534674f, -0.0260779f, +0.0331676f, -0.2864084f, +0.0651710f, -0.0371959f, +0.1659758f,
  +0.0475042f, +0.0277534f, +0.0981410f, -0.5658723f, -0.0446587f, +0.2605814f, +0.0882359f, +0.2660980f,
  +0.0179213f, +0.0271334f, +0.1442413f, -0.1270064f, +0.0501905f, +0.0856695f, -0.1938883f, +0.1353378f,
  +0.0954565f, +0.0158556f, +0.1160862f, -0.0432039f, +0.0537390f, +0.2216407f, -0.0345950f, -0.2142681f,
  +0.1493687f, +0.1146054f, -0.1311915f, -0.0768866f, +0.1415987f, -0.2463981f, -0.2955993f, -0.0245914f,
  +0.1589750f, +0.0989736f, +0.0553885f, +0.0234041f, -0.0575863f, -0.2736655f, -0.0624853f, -0.0458825f
);

const float biases[4] = float[4](
  +0.0093785f, +0.0002166f, +0.0235478f, +0.0106362f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer104 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0075948f, -0.0187449f, +0.1474023f, -0.3070571f, -0.1083803f, +0.0498141f, +0.1780357f, +0.0388511f,
  +0.2644989f, +0.0222147f, +0.0965783f, +0.2416535f, -0.2393362f, -0.0218813f, -0.0616019f, -0.0993304f,
  -0.0327258f, +0.0559939f, +0.0897310f, +0.1070968f, -0.1630417f, -0.1607204f, +0.0326453f, -0.1896041f,
  -0.0811951f, -0.0943006f, -0.1972964f, -0.2193636f, -0.2839757f, -0.1806127f, +0.0223669f, -0.1423017f,
  -0.1242108f, -0.0005473f, -0.3966895f, -0.2394863f, -0.3739364f, +0.1039575f, +0.0472715f, -0.0802050f,
  +0.0377706f, +0.0469961f, -0.0447818f, -0.1935949f, +0.0515221f, -0.0654127f, -0.0321576f, +0.3374505f,
  +0.3253529f, -0.2667611f, +0.1726775f, +0.1738034f, +0.0829176f, -0.0320790f, +0.3138924f, -0.1846785f,
  +0.0277267f, +0.2211566f, +0.1597590f, +0.0073396f, +0.1014050f, -0.0087328f, -0.0683424f, +0.1926040f,
  +0.2028679f, -0.1456271f, -0.0343953f, +0.0814554f, +0.0462264f, -0.0196818f, -0.1157078f, -0.1402390f,
  +0.0923767f, +0.1057335f, -0.0711428f, -0.0446439f, +0.0835258f, +0.0146333f, -0.2865492f, +0.0390097f,
  +0.0827840f, +0.0398921f, -0.1553788f, -0.3128770f, +0.0136593f, +0.0917023f, +0.1926149f, +0.0741395f,
  -0.0954814f, -0.0311729f, -0.0859224f, -0.0060809f, +0.1280781f, +0.1087515f, -0.2597141f, +0.0286982f,
  +0.0582621f, -0.0994682f, +0.1389479f, -0.0245162f, +0.1368812f, +0.0405822f, +0.0584350f, +0.0004204f,
  +0.0051834f, -0.1429727f, +0.1171198f, +0.0749687f, -0.3056045f, -0.0018449f, -0.2158646f, -0.1863720f,
  -0.0887362f, -0.2266358f, +0.0742725f, -0.2808656f, -0.2067609f, -0.1223494f, -0.0441349f, +0.1803189f,
  +0.0989552f, -0.0666459f, -0.0956439f, +0.1047884f, +0.1618969f, +0.1672232f, +0.0272095f, -0.0644326f,
  -0.2188491f, -0.0507001f, -0.1592469f, -0.0798719f, +0.0458829f, -0.0586490f, +0.1550068f, +0.0347447f,
  +0.2000525f, +0.1375670f, -0.2180209f, +0.2388841f, +0.3521570f, -0.6458432f, -0.2440886f, -0.1840188f,
  -0.0705362f, +0.0319910f, +0.0945061f, +0.1772240f, +0.0887062f, +0.2652165f, -0.3333582f, -0.1565642f,
  -0.0739068f, -0.0111191f, -0.1452352f, -0.2400163f, -0.1416308f, -0.0529232f, +0.2293224f, +0.1730861f,
  +0.1014235f, +0.1191392f, +0.0304509f, +0.1315506f, +0.0793357f, -0.1334183f, -0.0361276f, +0.0246945f,
  +0.1124163f, +0.1809402f, +0.2176532f, +0.3903056f, +0.0092586f, -0.3696280f, -0.0622674f, -0.0927942f,
  -0.0540617f, -0.1620092f, -0.0108761f, +0.3736657f, -0.0956873f, +0.2587019f, +0.1686035f, -0.3587792f,
  -0.0335172f, +0.0399098f, -0.2193122f, -0.0360429f, +0.1281422f, -0.1118316f, +0.1266718f, -0.0016474f,
  -0.0193240f, -0.1912212f, +0.0000944f, +0.1501822f, -0.0336556f, -0.0968800f, -0.3658027f, -0.0829255f,
  +0.0140485f, +0.1501624f, +0.3894519f, +0.0381344f, -0.0068020f, +0.2612054f, +0.2749441f, +0.0025208f,
  -0.2628795f, -0.0284334f, +0.1495530f, -0.0867071f, +0.0381510f, +0.0885071f, -0.0048214f, +0.1500614f,
  -0.0908077f, -0.1600023f, +0.0774795f, -0.1218265f, -0.0043198f, +0.2221293f, +0.0333092f, +0.0566347f,
  -0.0323892f, +0.1005222f, -0.2977746f, +0.4126486f, +0.0269238f, +0.1056242f, +0.0550441f, -0.1237634f,
  +0.0655946f, +0.1757377f, -0.2135885f, -0.0855933f, -0.1140469f, +0.1576768f, +0.1107682f, +0.1487589f,
  -0.1572952f, +0.3275151f, +0.1475011f, -0.3172549f, +0.0388529f, -0.2511294f, +0.1209539f, +0.0367295f,
  -0.1107904f, +0.1229898f, +0.2183646f, -0.7011492f, -0.4361522f, -0.0571815f, +0.0903648f, +0.5444968f,
  -0.1073524f, +0.1510518f, -0.0668379f, +0.1502823f, +0.0664310f, -0.1172887f, +0.1473818f, -0.1358268f,
  +0.2554976f, +0.1530469f, +0.1735289f, +0.1571243f, -0.0048853f, +0.1251172f, +0.0226865f, -0.2127384f,
  +0.0129760f, -0.1499898f, -0.2332050f, +0.0377671f, +0.0834329f, -0.1056422f, +0.0086421f, -0.1915027f,
  -0.1698354f, +0.0479124f, +0.0488232f, +0.0165083f, +0.2411055f, +0.3207399f, +0.0917140f, +0.0632502f
);

const float biases[4] = float[4](
  +0.0136320f, -0.0305497f, +0.0154114f, +0.0069788f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer104 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0179747f, +0.2339576f, +0.0080779f, -0.0658462f, +0.1057710f, -0.0747013f, -0.0316664f, +0.0890496f,
  -0.0492497f, +0.2282716f, +0.2353439f, -0.1728764f, +0.4765300f, +0.1523769f, -0.5564455f, +0.0272250f,
  +0.0523909f, +0.0109146f, +0.0164834f, +0.1764982f, +0.1022296f, +0.0138268f, +0.2335133f, +0.0004861f,
  -0.0346437f, +0.1000460f, +0.0579881f, -0.4344826f, +0.0589823f, +0.0489213f, +0.0131291f, +0.1533370f,
  +0.0469811f, +0.1056290f, +0.1717247f, -0.2683566f, +0.1274294f, +0.1893546f, +0.0182813f, -0.0024991f,
  +0.0414359f, -0.1813727f, +0.1533192f, -0.2364379f, -0.3233444f, +0.1920070f, -0.1027903f, +0.1533061f,
  -0.0211305f, -0.0978827f, -0.0620027f, -0.0240013f, -0.0070442f, +0.1283635f, -0.4174389f, -0.2942862f,
  -0.1000511f, +0.0906465f, -0.0975783f, +0.0890800f, +0.1330369f, +0.2803392f, +0.4478115f, +0.0776547f,
  -0.0632911f, -0.1370878f, +0.0124320f, +0.0523007f, +0.0617625f, +0.1508389f, +0.1655726f, -0.1444140f,
  +0.0760400f, +0.0163470f, -0.2759886f, -0.2350022f, -0.0557390f, +0.1066991f, +0.2338947f, -0.0417321f,
  +0.0246304f, +0.2838310f, -0.2418103f, -0.2293615f, +0.0827634f, +0.0272934f, +0.1330769f, +0.1480327f,
  -0.0045593f, +0.0198200f, +0.0584282f, +0.0221468f, +0.2179140f, +0.1138609f, -0.1884345f, -0.0340588f,
  -0.0050652f, -0.0597969f, -0.0933627f, +0.5135412f, -0.1922671f, +0.1111417f, -0.1008193f, -0.2469002f,
  -0.2719170f, -0.3043048f, -0.2178735f, -0.4535158f, +0.1519476f, -0.1719478f, -0.0562334f, +0.1399875f,
  +0.0095007f, +0.1545117f, -0.0568416f, -0.1730263f, -0.3246636f, -0.0292434f, -0.1372875f, +0.2318455f,
  +0.0123156f, +0.1290138f, -0.0778186f, -0.0452803f, +0.0445706f, -0.1975667f, +0.2223871f, +0.2321092f,
  -0.0069962f, +0.0321925f, -0.0737281f, +0.1508682f, -0.0761221f, -0.1914616f, -0.0336385f, -0.1676867f,
  +0.1814005f, -0.1915885f, +0.1122328f, +0.0606987f, -0.0999259f, +0.2146734f, -0.0494376f, -0.1097913f,
  +0.2416555f, +0.0496622f, +0.4058725f, +0.1747401f, -0.1732821f, +0.1379965f, +0.1701089f, -0.1620702f,
  -0.0994552f, +0.0210649f, -0.0159307f, -0.0069812f, -0.1799521f, -0.0669015f, -0.2083404f, +0.0784103f,
  -0.0427196f, +0.2154157f, -0.2401419f, +0.0555935f, +0.0953645f, -0.1945744f, +0.0893757f, +0.0896442f,
  -0.0794308f, +0.0724495f, -0.2080418f, +0.0852153f, +0.1835093f, -0.1340152f, -0.0093837f, +0.1750826f,
  +0.0738174f, -0.3172434f, -0.1774681f, -0.0755477f, -0.0357672f, -0.0465592f, -0.1463016f, +0.1320280f,
  +0.1661926f, -0.2333981f, -0.2548280f, +0.2082439f, -0.0115608f, -0.1119084f, -0.0851246f, -0.0685718f,
  -0.0908523f, +0.3386561f, +0.0801973f, -0.0167585f, +0.1978799f, +0.1436882f, -0.2442108f, +0.1292848f,
  -0.0280398f, -0.1343330f, -0.0848791f, +0.0758672f, -0.0984932f, +0.2023219f, -0.2436438f, -0.0442444f,
  +0.0410057f, -0.0713400f, +0.0797313f, -0.0900502f, +0.1239819f, -0.1133444f, -0.1370089f, +0.1176350f,
  -0.0015594f, +0.1886301f, +0.0014110f, +0.0685747f, +0.0124144f, +0.3259373f, -0.1575063f, +0.0491846f,
  +0.2268135f, -0.0265292f, -0.2690557f, -0.0135481f, +0.1763949f, +0.1133405f, -0.1931581f, -0.1528491f,
  +0.1003424f, +0.1223398f, -0.1255530f, +0.1320295f, +0.0306961f, +0.1954649f, -0.1251414f, +0.0201397f,
  +0.1042034f, +0.0508572f, +0.4062556f, -0.1404800f, -0.0385887f, +0.3963313f, -0.0789667f, +0.1335580f,
  -0.1307265f, -0.0502994f, -0.0952658f, +0.2543279f, +0.1517174f, -0.0079792f, +0.1290995f, -0.3116947f,
  -0.0732507f, +0.0531641f, -0.1357519f, -0.0780033f, -0.0138936f, +0.1415783f, +0.0158129f, +0.1632000f,
  +0.0915103f, -0.2565178f, +0.0533602f, +0.3498093f, +0.1246401f, +0.0185337f, +0.1383994f, -0.2200815f,
  +0.2088550f, +0.1308675f, -0.0387434f, +0.1144896f, +0.2521462f, -0.1775405f, -0.4594300f, -0.0643028f,
  +0.0035568f, -0.1649938f, -0.0066818f, +0.0608536f, -0.1750956f, -0.0394975f, -0.0961745f, -0.0231837f
);

const float biases[4] = float[4](
  -0.0169141f, +0.0194427f, +0.0038035f, +0.0106892f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer105 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0656069f, -0.2538036f, -0.4629080f, +0.0019981f, +0.0529531f, -0.1795181f, -0.1346443f, +0.2158954f,
  +0.1979193f, -0.3879365f, -0.6570720f, +0.2196235f, -0.3260580f, +0.1451483f, +0.1267546f, +0.0860259f,
  -0.0767096f, -0.0773609f, -0.2766066f, -0.1461514f, -0.1927408f, +0.0258594f, -0.0596094f, -0.2077438f,
  +0.0165992f, -0.1627231f, -0.0851567f, +0.2639425f, -0.1142845f, -0.2235671f, +0.3575624f, -0.1824598f,
  -0.0572250f, +0.1275460f, -0.0330428f, -0.4879447f, +0.0062429f, +0.2016374f, +0.5292050f, -0.0485941f,
  -0.0346006f, -0.0612853f, -0.0227856f, +0.1054892f, -0.0068307f, -0.0778948f, +0.2502213f, -0.0361565f,
  +0.0850077f, +0.0244199f, -0.1560566f, -0.0337545f, +0.1106584f, +0.1335832f, -0.0980291f, -0.1703828f,
  +0.0200260f, +0.0902109f, +0.0680109f, +0.2687595f, +0.2601044f, -0.2392109f, -0.2295302f, -0.0989616f,
  -0.0525453f, +0.0285189f, -0.0381018f, +0.1144680f, +0.1231837f, -0.1381476f, -0.0650554f, +0.1104265f,
  +0.1644379f, -0.0579488f, -0.3318795f, +0.0125985f, -0.2501486f, +0.0516837f, +0.0349103f, -0.1913608f,
  +0.0840169f, -0.2538752f, -0.0746640f, -0.1270567f, -0.1524401f, +0.1003750f, -0.3820775f, +0.0123890f,
  -0.1478722f, +0.0382182f, -0.2572186f, -0.0439737f, -0.0847160f, +0.2263876f, -0.1712753f, +0.1239525f,
  -0.0460966f, -0.1093505f, +0.1779396f, +0.1600030f, +0.1844850f, +0.1657128f, -0.0869341f, +0.1540421f,
  +0.3511036f, -0.1882540f, +0.2005005f, +0.0823580f, -0.0289099f, +0.1663920f, +0.3808112f, +0.0363470f,
  +0.2987777f, +0.0190570f, +0.0627507f, +0.1740594f, +0.0348983f, +0.1808393f, +0.0292861f, +0.3052429f,
  +0.2067004f, -0.1549994f, +0.1683608f, -0.0931727f, -0.1564368f, +0.0142673f, +0.2020794f, -0.1848628f,
  -0.4513233f, -0.0333136f, +0.0391286f, +0.1164864f, +0.0309044f, -0.1507459f, -0.1327401f, -0.0967414f,
  -0.1357360f, -0.0066376f, +0.1072495f, -0.0566942f, +0.0022677f, +0.0068806f, -0.1214960f, -0.1941445f,
  +0.1822626f, +0.0232506f, +0.4169508f, +0.0352434f, +0.0976623f, -0.0188825f, +0.0111603f, -0.1427778f,
  +0.0219930f, +0.0689538f, -0.0490104f, +0.0594809f, +0.0006348f, -0.2389438f, -0.3087587f, -0.0869449f,
  +0.2689345f, -0.0969890f, +0.2711884f, -0.0057909f, +0.1837236f, -0.2332144f, +0.2764966f, -0.0817207f,
  +0.0454429f, +0.1433198f, -0.0575555f, +0.0614204f, -0.0651094f, -0.1364198f, +0.1520325f, -0.1403909f,
  +0.0440732f, +0.0141787f, -0.1413997f, +0.1526331f, -0.0006874f, +0.1309109f, +0.1928908f, -0.0964797f,
  +0.1278586f, -0.1321293f, +0.1042506f, -0.2764622f, +0.1463812f, -0.2563278f, +0.1069212f, -0.0873708f,
  +0.0311135f, -0.1264384f, +0.0576406f, +0.0732923f, +0.2365470f, -0.2211816f, -0.1985878f, -0.1761726f,
  +0.0051052f, -0.2884197f, +0.2529812f, -0.3456087f, +0.0850864f, +0.2575907f, -0.0785012f, -0.0802580f,
  -0.1030814f, -0.3464223f, +0.1117251f, -0.1695614f, +0.2518243f, +0.4611268f, -0.3970585f, -0.0265465f,
  -0.1074999f, +0.1835250f, -0.0526675f, +0.0380044f, +0.0634707f, +0.0219236f, +0.0107932f, +0.3030974f,
  -0.3360838f, +0.0643772f, +0.0029496f, -0.2796564f, +0.0651653f, -0.1035591f, -0.0643159f, +0.0769987f,
  -0.0754490f, -0.0342577f, -0.1852008f, -0.0854559f, +0.1107314f, +0.0606995f, +0.0521980f, +0.1852708f,
  +0.2543368f, +0.0340738f, -0.1681626f, -0.1086790f, +0.1002683f, -0.1883285f, -0.1158058f, -0.0578630f,
  -0.0111240f, +0.0446065f, -0.0872505f, -0.0733465f, -0.0300192f, -0.1113574f, -0.3424788f, +0.1599652f,
  +0.0585136f, +0.1394330f, -0.3290495f, -0.1463430f, -0.1399536f, -0.2254252f, -0.0426308f, +0.1612077f,
  -0.2538593f, +0.1229289f, -0.3246394f, -0.0529130f, +0.0556414f, +0.0455539f, +0.0293690f, +0.3038109f,
  +0.0357711f, +0.1354741f, -0.0449974f, +0.1241294f, +0.0738400f, +0.1292874f, +0.0175472f, -0.0298591f,
  +0.0048480f, +0.0662275f, -0.1499453f, -0.2060293f, +0.0262503f, +0.0220792f, -0.1524005f, -0.0620750f
);

const float biases[4] = float[4](
  -0.0171367f, -0.0316730f, -0.0162558f, +0.0290303f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer105 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0237631f, -0.0635561f, -0.1555593f, +0.0041878f, -0.0361211f, -0.1417753f, -0.1408183f, +0.1318031f,
  -0.1511235f, +0.1295229f, +0.0563780f, +0.1707610f, +0.1396582f, +0.0072429f, -0.3282886f, +0.1006923f,
  +0.1441030f, -0.5314918f, -0.5296503f, +0.1262590f, +0.1711560f, -0.4010394f, +0.2075750f, -0.0484063f,
  +0.0755108f, -0.0002616f, -0.0761084f, +0.0821004f, +0.1818123f, -0.0380284f, -0.0204275f, -0.0288297f,
  -0.1364163f, +0.0946020f, -0.0540099f, +0.0555635f, +0.0368752f, -0.1208548f, -0.0464982f, +0.2224734f,
  -0.0887429f, -0.2376951f, -0.0730934f, +0.0765830f, +0.2362318f, -0.0046359f, +0.1797342f, +0.0148406f,
  +0.0170977f, -0.0547946f, -0.0767294f, -0.0430681f, +0.1009255f, -0.1579196f, +0.1027556f, -0.2468489f,
  +0.0680712f, -0.0912964f, +0.1814873f, +0.0623009f, +0.0309441f, -0.0901718f, +0.0442315f, +0.0073194f,
  +0.1933821f, +0.0659212f, -0.0608665f, -0.2938722f, +0.3552388f, -0.0637723f, -0.0165807f, +0.0709697f,
  +0.0037268f, +0.0896632f, -0.1927346f, -0.0664602f, +0.1702670f, -0.2362674f, +0.0979016f, -0.0932991f,
  +0.1213361f, -0.0709703f, -0.4665481f, -0.2276587f, +0.0997910f, -0.1782887f, +0.1724907f, +0.0611474f,
  +0.0394522f, -0.1459778f, -0.4711502f, -0.1824922f, +0.0616788f, -0.1260981f, -0.0241513f, +0.0115705f,
  +0.1149614f, -0.3097137f, -0.0183239f, -0.1517139f, +0.1026181f, +0.0135401f, -0.2367240f, +0.3204986f,
  -0.0057638f, -0.3608966f, -0.0051002f, +0.2575584f, +0.0296524f, -0.3255436f, -0.5428054f, -0.0911411f,
  +0.1584941f, +0.0243001f, +0.0569299f, -0.1729170f, -0.0569742f, -0.0511936f, -0.3050832f, -0.1293230f,
  +0.0703149f, +0.0428617f, +0.0461066f, -0.0185549f, -0.0564607f, -0.1368385f, +0.2310910f, +0.0172763f,
  -0.1426132f, +0.1582825f, +0.3214309f, -0.3482778f, -0.0115135f, +0.3811389f, +0.3438142f, +0.0838623f,
  -0.2367357f, -0.0638117f, +0.1327321f, -0.0232485f, +0.0458034f, +0.4325523f, +0.2351080f, -0.1432521f,
  +0.1918172f, -0.0003593f, -0.0334274f, +0.0213744f, +0.0099976f, -0.1430050f, +0.0180444f, -0.1335160f,
  -0.0809102f, +0.3323857f, -0.2089794f, -0.0235059f, +0.1313460f, +0.1088207f, -0.0837755f, +0.3182286f,
  -0.0257922f, +0.0485824f, +0.0803149f, -0.1771230f, -0.0287724f, -0.1893117f, +0.0809708f, -0.2835691f,
  -0.1901150f, +0.2295073f, -0.1065517f, +0.0735267f, +0.0394684f, -0.1549398f, -0.1703550f, -0.0614524f,
  -0.0231184f, +0.1932791f, +0.0550244f, -0.0356702f, -0.0590106f, +0.1251401f, +0.0881355f, +0.0537591f,
  -0.0403618f, +0.0597868f, -0.3458080f, +0.0179641f, +0.0950798f, -0.0113302f, +0.1021159f, +0.1079167f,
  -0.0303418f, +0.0369376f, -0.1028445f, +0.0280620f, +0.0941273f, -0.0623879f, +0.0178524f, -0.1883612f,
  -0.2122705f, -0.0217688f, +0.1676970f, +0.2062513f, +0.0748382f, +0.1040998f, +0.4121011f, +0.1149578f,
  -0.0293346f, +0.0400579f, -0.0638939f, +0.1132867f, +0.0071116f, -0.0482349f, -0.1200111f, -0.0345103f,
  +0.1713539f, -0.5904977f, -0.4893166f, -0.0429646f, -0.2997688f, -0.1529146f, +0.4093593f, -0.0988549f,
  -0.2030720f, -0.2130365f, -0.5290842f, -0.4396639f, +0.0792064f, +0.0782423f, +0.0361115f, -0.2468259f,
  -0.1022907f, +0.0176316f, -0.0892281f, +0.0517723f, -0.2374471f, +0.0582518f, -0.0395005f, -0.0102311f,
  +0.1528297f, +0.1355655f, -0.0878536f, +0.1536732f, +0.2149522f, +0.1392061f, -0.4345447f, -0.1885710f,
  +0.0297135f, +0.1190956f, +0.1370403f, +0.4305055f, +0.1429468f, -0.1895079f, +0.0226966f, +0.2094762f,
  +0.1458553f, +0.1055346f, +0.0995070f, +0.4013583f, +0.0919121f, +0.1355308f, +0.0909407f, +0.3282946f,
  -0.1093608f, -0.0557627f, -0.0435004f, +0.0663429f, -0.0056169f, -0.0837022f, -0.0015842f, +0.0050731f,
  -0.0831776f, +0.0294214f, +0.0278148f, -0.0418958f, -0.0642744f, +0.0474544f, +0.0049682f, -0.0568856f,
  +0.0612079f, -0.1097060f, +0.0802694f, +0.0107315f, -0.0339051f, +0.0338547f, +0.0687764f, -0.0112833f
);

const float biases[4] = float[4](
  -0.0216515f, -0.0470471f, -0.0186041f, -0.0221686f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer106 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0974009f, -0.0506723f, -0.2475791f, -0.0871455f, -0.2527294f, +0.2990416f, +0.0973464f, -0.0367941f,
  +0.0441088f, -0.0142574f, -0.0028502f, -0.1299898f, -0.2627108f, +0.0569024f, -0.0144631f, +0.0029612f,
  +0.2507101f, -0.0186158f, -0.0395979f, -0.0418690f, +0.1594036f, +0.0207235f, -0.1429242f, -0.1872137f,
  -0.2773260f, +0.0104700f, +0.2013624f, -0.0393454f, +0.3634755f, +0.0757057f, +0.1238770f, +0.1924905f,
  -0.0830901f, +0.1178702f, +0.1140964f, -0.1880787f, +0.0241557f, +0.1748662f, -0.1414828f, +0.4822321f,
  -0.2253230f, +0.1728964f, +0.2631680f, -0.2949579f, +0.0260035f, -0.0127735f, -0.1934254f, +0.1930709f,
  +0.1574965f, +0.1603474f, -0.2702360f, -0.0049292f, +0.0967774f, +0.0904817f, -0.0870331f, +0.0192634f,
  +0.0919830f, -0.1517019f, +0.0447040f, +0.3187061f, -0.0234870f, +0.0596794f, -0.0957355f, -0.2041429f,
  -0.0275317f, +0.2093564f, +0.0100883f, +0.2258700f, -0.0610763f, -0.0267956f, -0.0000134f, -0.2054572f,
  -0.2008785f, -0.0597021f, +0.0698675f, -0.0649543f, -0.0687472f, -0.0368759f, -0.0648287f, +0.1293517f,
  +0.1049375f, -0.0296760f, -0.0554458f, +0.0430267f, -0.0806446f, -0.0279423f, -0.2314331f, -0.0441400f,
  -0.0366679f, -0.0082127f, +0.0896999f, +0.0836388f, -0.2199782f, +0.0901786f, -0.0036004f, +0.1846582f,
  -0.1164661f, -0.0462911f, +0.0345323f, +0.0694467f, +0.0656444f, -0.1459397f, -0.1387190f, -0.0179379f,
  +0.1807315f, -0.0253197f, -0.1386124f, -0.0839091f, -0.1270125f, +0.3064234f, -0.0275944f, +0.2137700f,
  +0.1474891f, +0.0776322f, -0.1998134f, +0.0268157f, -0.0550314f, +0.4626413f, +0.0846655f, +0.3785887f,
  +0.1907774f, +0.1151679f, -0.0169995f, -0.0653461f, +0.2505756f, +0.0549958f, +0.1040858f, -0.1408408f,
  +0.0492784f, +0.1571599f, -0.1106643f, -0.0034737f, +0.0740811f, -0.0196005f, -0.0191248f, -0.1648424f,
  -0.1533417f, +0.1943250f, -0.0157126f, -0.1225170f, +0.1225972f, -0.1479006f, -0.0905372f, +0.0403027f,
  +0.2127389f, +0.0055028f, -0.1905991f, -0.1208595f, -0.0615062f, -0.2217580f, -0.0436781f, -0.1967096f,
  +0.2591355f, -0.1469492f, +0.0505232f, +0.0550477f, -0.1049663f, -0.0186157f, +0.1602461f, +0.1089542f,
  +0.0926313f, +0.1013010f, +0.1240276f, +0.1822271f, +0.0948004f, -0.0073855f, +0.1882596f, +0.0113681f,
  -0.2015988f, +0.1284782f, -0.1847360f, +0.2173734f, +0.2770894f, -0.0531791f, +0.2352706f, -0.0141358f,
  +0.0894641f, -0.1493631f, +0.0129706f, -0.0345705f, -0.0691783f, -0.5469372f, +0.1987165f, +0.0140337f,
  +0.0893412f, -0.2611851f, +0.0922414f, +0.0164680f, -0.0366219f, -0.2010190f, +0.0322293f, +0.1268305f,
  +0.1601584f, -0.1059995f, +0.0621259f, +0.0918536f, +0.4806949f, -0.0399980f, -0.0046214f, -0.0867273f,
  -0.1435542f, +0.0940764f, -0.2211311f, +0.1217066f, -0.1597535f, -0.0141870f, -0.0563963f, -0.3172419f,
  -0.1008634f, +0.1528000f, -0.1192198f, +0.1415437f, +0.1047573f, +0.1199973f, +0.0636106f, -0.1228385f,
  -0.1917469f, +0.0637280f, -0.4924894f, +0.1668074f, +0.1966189f, -0.0752348f, -0.2867904f, +0.0770610f,
  +0.0145489f, -0.2925464f, -0.1559313f, +0.1307102f, +0.1333976f, +0.0879758f, -0.0916188f, +0.0330457f,
  -0.2178863f, +0.1294418f, -0.2643982f, +0.0251526f, +0.0525184f, -0.2719940f, +0.2653357f, +0.2270569f,
  -0.3458740f, +0.0031964f, +0.1161974f, -0.0174591f, -0.2048305f, +0.0432198f, -0.0173731f, +0.0773291f,
  -0.7868172f, +0.1124230f, +0.0104470f, +0.1194235f, +0.1958910f, +0.1258216f, +0.0229809f, +0.0156907f,
  +0.0422633f, +0.4941595f, +0.0295399f, -0.1262573f, +0.0784210f, -0.1045207f, +0.0803054f, -0.2009701f,
  +0.1759695f, +0.1612777f, -0.0681513f, -0.0705670f, -0.0520935f, +0.1130176f, +0.1455479f, +0.1410342f,
  +0.3982553f, +0.0019938f, +0.1017464f, +0.2277159f, -0.2220800f, +0.4054285f, -0.1056433f, +0.1240103f,
  +0.1446586f, +0.2395350f, +0.0006339f, +0.0997064f, +0.0165056f, -0.0075752f, +0.0113171f, +0.0998605f
);

const float biases[4] = float[4](
  -0.0246729f, +0.0226834f, +0.0435361f, +0.0141072f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer106 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0635388f, -0.0149398f, +0.0800395f, +0.0470029f, -0.3258548f, +0.0718417f, -0.0645313f, -0.0649938f,
  +0.2445689f, -0.2143474f, -0.2083418f, +0.1665956f, -0.0452413f, +0.2158092f, +0.0629933f, -0.0648104f,
  -0.1797427f, -0.0120410f, -0.3521208f, -0.1638065f, -0.0370114f, +0.0739494f, -0.1511570f, -0.0740799f,
  -0.0594180f, -0.2403914f, -0.0705329f, -0.0405470f, -0.1192259f, +0.3867350f, +0.2409630f, +0.1781812f,
  -0.2033056f, +0.1311015f, +0.0225919f, -0.1552716f, +0.0172373f, +0.6737333f, -0.0275550f, +0.2869852f,
  -0.1884570f, -0.0457358f, +0.0779679f, +0.0113943f, -0.0684749f, +0.2762256f, +0.0361633f, +0.4207784f,
  +0.1530741f, -0.0190758f, +0.0671783f, -0.1920515f, -0.3975810f, +0.3287365f, -0.1786163f, -0.1114688f,
  +0.0700750f, +0.3393414f, -0.1467262f, -0.1323856f, -0.0960991f, +0.3234612f, -0.0198301f, +0.5250447f,
  +0.3038222f, +0.1279570f, +0.1012580f, +0.0163187f, +0.1184584f, +0.1327009f, +0.1512650f, -0.2004686f,
  +0.1232223f, -0.0879180f, -0.1185405f, -0.0656212f, -0.0653162f, -0.0698327f, -0.1785756f, -0.0195700f,
  +0.2724316f, -0.1226984f, +0.2228835f, +0.1675800f, +0.0760580f, +0.3429226f, +0.3200628f, +0.0149074f,
  +0.1898214f, +0.0482855f, -0.0653733f, -0.0670537f, +0.0016051f, +0.3479518f, +0.0100119f, -0.0953865f,
  +0.2097967f, +0.0277245f, -0.1542595f, +0.2542917f, +0.3257735f, -0.0449650f, -0.0792013f, -0.1365113f,
  +0.0145421f, +0.2764306f, -0.1992099f, +0.2232120f, +0.0980030f, +0.2019563f, -0.0622965f, -0.1238917f,
  -0.1705586f, +0.0844525f, +0.2266808f, +0.1010028f, +0.0735479f, +0.1597217f, +0.1664783f, +0.7152137f,
  -0.0309522f, +0.0598868f, -0.0572623f, +0.0313791f, -0.0966506f, +0.0673057f, +0.1829721f, +0.1228613f,
  +0.0202144f, +0.0685089f, +0.2670230f, +0.1587218f, +0.0520423f, +0.0031603f, +0.0065704f, -0.1736241f,
  +0.0039192f, +0.3557407f, -0.0632148f, +0.1114435f, +0.0013043f, +0.1285319f, +0.0233106f, -0.3229958f,
  +0.0594198f, +0.1100404f, -0.1971225f, +0.0720628f, +0.0173456f, -0.1650812f, +0.0946692f, -0.0540770f,
  -0.0095136f, -0.0672068f, +0.0374948f, -0.4064305f, -0.2898705f, -0.0182866f, -0.0198070f, +0.0233721f,
  -0.1301873f, +0.2149239f, -0.3230174f, +0.1876556f, +0.0638283f, -0.1448825f, -0.0737813f, -0.0616843f,
  -0.1398352f, -0.0317422f, -0.0687305f, +0.2449672f, +0.2366631f, -0.2212170f, +0.1646048f, +0.1963749f,
  -0.3345053f, -0.1706143f, -0.3117538f, +0.1604882f, -0.0204654f, +0.4069834f, -0.1100763f, -0.0459047f,
  +0.3550910f, -0.2041325f, +0.2124194f, +0.1449675f, -0.0942606f, -0.1449784f, +0.0427720f, -0.4352512f,
  -0.1164927f, -0.0591221f, -0.0416602f, -0.0986305f, -0.0504254f, -0.0208418f, -0.0931331f, -0.0411578f,
  -0.0433953f, +0.0203151f, -0.0910818f, -0.1210022f, +0.2439386f, -0.0685915f, +0.1812811f, -0.2132425f,
  -0.1601160f, -0.0277980f, +0.2521150f, -0.2115818f, +0.2129720f, -0.1289177f, +0.0013037f, +0.4952823f,
  -0.1415842f, +0.0541101f, +0.0822323f, -0.0928518f, +0.0448635f, -0.0210635f, -0.1960511f, +0.0763377f,
  +0.2479617f, -0.0607226f, +0.2710263f, -0.0409915f, +0.0486768f, -0.1511215f, -0.1186789f, -0.1655917f,
  -0.0495457f, -0.0255172f, -0.0369270f, -0.1182952f, +0.0013069f, +0.0742502f, +0.0075548f, +0.1490985f,
  -0.0396575f, +0.0863120f, -0.1106185f, -0.0670842f, -0.1168446f, +0.1479368f, -0.0993877f, -0.0409617f,
  +0.1970574f, -0.0436805f, -0.1788982f, -0.2946147f, -0.1521804f, -0.2068160f, -0.2405828f, -0.2969746f,
  -0.0583301f, -0.0934922f, -0.0928490f, +0.0697479f, +0.0711249f, +0.0552794f, +0.1344735f, -0.0911444f,
  +0.0104739f, -0.0856835f, +0.0499125f, +0.0298307f, -0.1993642f, +0.1228713f, -0.1295687f, -0.1043805f,
  +0.1923835f, -0.0831291f, +0.0243889f, -0.0706839f, +0.1697262f, -0.3207810f, +0.0648917f, +0.1175669f,
  -0.0401772f, -0.0754038f, +0.3674089f, -0.0163506f, +0.0179389f, +0.2264843f, +0.1011068f, -0.0898629f
);

const float biases[4] = float[4](
  +0.0143629f, +0.0005580f, +0.0053468f, +0.0082884f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer107 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0940078f, -0.2663627f, -0.0846704f, +0.0187007f, -0.0158379f, +0.1233593f, -0.0483794f, -0.0017660f,
  +0.0715730f, -0.1571862f, +0.1027989f, -0.0518169f, -0.0572290f, -0.0916992f, -0.2090485f, +0.0552320f,
  -0.2769416f, -0.0426686f, -0.0606084f, -0.1344829f, -0.0595536f, +0.0233965f, -0.0976934f, +0.0059797f,
  +0.0109778f, +0.1593056f, -0.1440689f, +0.1055131f, -0.1174954f, +0.1254911f, -0.1227267f, +0.0416195f,
  -0.1729536f, +0.0926285f, -0.1007590f, +0.0248925f, -0.0968950f, -0.0139178f, +0.2715052f, +0.1139072f,
  -0.0118087f, +0.1510811f, +0.2122292f, +0.0648667f, +0.0741136f, -0.0782162f, +0.3442827f, -0.1307275f,
  -0.1195129f, +0.0311512f, +0.1675730f, +0.0215808f, +0.0501443f, +0.0136901f, +0.1568167f, -0.1229076f,
  -0.2037555f, +0.0384734f, +0.1940099f, +0.2042764f, -0.1220774f, -0.0701186f, -0.1047082f, +0.1998185f,
  +0.2760694f, +0.1253667f, -0.0254439f, -0.0570591f, -0.1215673f, +0.1302641f, +0.0211052f, +0.1229772f,
  +0.0211884f, +0.0217184f, -0.0923120f, -0.0394526f, +0.1752917f, +0.0887272f, +0.0802806f, +0.1295112f,
  +0.0135008f, +0.1540575f, +0.0386429f, +0.2093599f, -0.0469882f, +0.0209599f, -0.0755273f, -0.1999939f,
  +0.0036736f, -0.2734478f, +0.1785056f, -0.0918550f, -0.0814491f, -0.2558494f, +0.1708666f, -0.3682403f,
  -0.0950360f, +0.0779630f, -0.2410115f, +0.2216320f, +0.1057286f, -0.1056402f, +0.2180286f, +0.0198015f,
  +0.1319700f, +0.0196740f, -0.0137025f, +0.2408864f, +0.1582203f, -0.1043684f, +0.2707646f, +0.0450189f,
  +0.2666021f, +0.0250616f, -0.2056374f, +0.1090093f, +0.0003371f, -0.2765597f, -0.3252656f, +0.0392627f,
  +0.0336986f, +0.0568309f, +0.0120894f, -0.1368993f, +0.0290579f, -0.1917478f, -0.0833465f, +0.0666924f,
  -0.2323797f, +0.0371530f, -0.0011806f, +0.2734189f, -0.0059145f, +0.2541988f, +0.0758337f, -0.0596550f,
  +0.3543685f, -0.6030480f, +0.2614656f, +0.0457016f, -0.0069397f, -0.0855021f, +0.0535710f, +0.0721177f,
  -0.0393808f, +0.0380736f, +0.2727394f, +0.2097068f, +0.0960419f, +0.0488631f, +0.0345229f, -0.1427816f,
  +0.1424389f, +0.0119101f, -0.2082043f, +0.4037502f, +0.1840165f, +0.1186644f, +0.0379943f, -0.0523247f,
  -0.1723265f, +0.0095515f, +0.0545574f, -0.1025883f, -0.1131015f, -0.1220130f, +0.0371686f, -0.3053201f,
  -0.1431177f, +0.0685889f, +0.1506665f, +0.0748655f, +0.0669947f, +0.0744660f, +0.1120676f, -0.1745644f,
  -0.0016876f, +0.2052361f, +0.0618739f, -0.1892301f, -0.0959174f, -0.1160227f, -0.0831319f, -0.1793447f,
  -0.0061651f, +0.0271479f, -0.0259547f, +0.1261223f, -0.0495006f, -0.3687559f, -0.0939541f, +0.0518574f,
  -0.1494824f, +0.1656627f, +0.0225356f, +0.2519160f, -0.0870443f, -0.0539131f, +0.1686418f, -0.0149875f,
  -0.1963187f, +0.2937871f, -0.0372032f, +0.0967405f, +0.0926486f, -0.0243079f, -0.1294442f, +0.0161863f,
  +0.0987945f, +0.3488671f, -0.2500973f, -0.0867570f, +0.0024031f, +0.1074142f, -0.0105374f, -0.0996186f,
  +0.0463757f, +0.2708866f, +0.0716484f, +0.1095591f, +0.1601600f, -0.1149800f, -0.2151000f, -0.1117022f,
  -0.0579285f, -0.2443743f, -0.2566197f, -0.1157889f, -0.2017014f, -0.0033286f, -0.0704480f, -0.1546187f,
  -0.1120507f, +0.0913007f, -0.0750515f, -0.0256112f, +0.0493380f, -0.1272143f, +0.0734383f, +0.0359448f,
  -0.0815334f, -0.1333157f, -0.1926703f, -0.1338915f, +0.2504671f, +0.1714166f, +0.0803036f, -0.0779801f,
  +0.0984022f, +0.0842027f, +0.2379149f, +0.2399958f, -0.0919425f, -0.2595282f, -0.0224609f, +0.1184165f,
  +0.0503656f, +0.1005472f, -0.2593920f, +0.0397559f, +0.0223880f, +0.2070330f, +0.2598226f, +0.2751480f,
  -0.0268578f, -0.3553838f, -0.0124649f, -0.0430564f, +0.1268622f, +0.2738749f, +0.0385864f, +0.1618313f,
  +0.0805390f, +0.4880398f, -0.1051650f, +0.1348573f, +0.0176981f, -0.2329519f, -0.2632788f, +0.1993734f,
  -0.0974357f, -0.2559765f, -0.1725152f, -0.1785731f, -0.0306317f, +0.1326546f, +0.1433700f, +0.0210893f
);

const float biases[4] = float[4](
  +0.0430417f, +0.0130633f, +0.0057007f, -0.0224317f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer107 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1235575f, -0.1869716f, +0.0377933f, +0.0786700f, +0.1895869f, -0.0180671f, -0.2937120f, -0.1033438f,
  +0.1702987f, -0.0477820f, +0.0713907f, +0.2103056f, +0.1043405f, -0.1058910f, +0.3158367f, +0.1545085f,
  +0.3124619f, -0.1488038f, -0.0228595f, +0.0570908f, +0.1651051f, +0.3520101f, +0.1208556f, +0.2960986f,
  -0.1523781f, -0.0367263f, -0.0228368f, -0.3291945f, +0.3085499f, -0.1508148f, -0.1481745f, +0.0871039f,
  +0.1482229f, -0.0300495f, -0.1181597f, +0.1676640f, +0.1783970f, -0.0289883f, +0.2941080f, +0.0225741f,
  +0.1155063f, -0.2370322f, -0.0408524f, -0.1659679f, -0.3273717f, +0.1533441f, +0.1282035f, +0.1667235f,
  +0.0598401f, +0.0576185f, -0.1941220f, -0.1666169f, -0.0691804f, +0.0867063f, -0.1968657f, +0.0893930f,
  +0.0270023f, -0.5097264f, -0.2163377f, +0.3134535f, -0.1813826f, -0.2107433f, +0.2619537f, +0.1056326f,
  -0.0900678f, -0.0404598f, +0.0702646f, +0.2829562f, +0.0790880f, -0.3199905f, -0.2622167f, +0.1489481f,
  -0.0852382f, +0.1363292f, -0.1217501f, +0.1428522f, -0.1566380f, +0.0988605f, +0.1345314f, +0.0527858f,
  +0.3574715f, -0.3304866f, -0.0808857f, -0.0644141f, +0.1038340f, -0.3413477f, -0.0253108f, -0.0025970f,
  -0.3489665f, +0.0706959f, +0.1107228f, +0.0119279f, +0.2543806f, -0.1565756f, +0.1951223f, -0.2916691f,
  +0.2070173f, +0.1574132f, +0.3721152f, +0.0839960f, -0.0351391f, +0.1364136f, -0.1429355f, -0.2439718f,
  -0.3306901f, -0.0817496f, +0.1758026f, +0.1703961f, +0.1370881f, +0.1744241f, -0.2285577f, -0.2181414f,
  +0.0596818f, +0.0690559f, +0.3039028f, +0.3182216f, +0.0239140f, +0.1458329f, -0.4276505f, -0.1189718f,
  +0.1129900f, -0.0807195f, +0.1274226f, +0.2134147f, -0.1468157f, -0.1195472f, +0.1943541f, -0.0833090f,
  +0.0734094f, +0.0155340f, +0.1988399f, -0.1469043f, -0.1196323f, +0.1167659f, +0.0198574f, +0.0059355f,
  -0.1991617f, +0.1237222f, -0.0875029f, -0.0332096f, +0.1263947f, +0.3253109f, -0.0134739f, -0.0948299f,
  -0.0646788f, -0.0256317f, +0.1651579f, +0.0564237f, -0.2313811f, -0.2005175f, +0.2460286f, -0.1267229f,
  +0.1261673f, -0.1557423f, +0.1273766f, -0.2124727f, -0.1450328f, +0.1045593f, +0.2354519f, +0.2123390f,
  +0.0589635f, -0.1135546f, -0.3735840f, -0.4081914f, +0.3378445f, -0.3819089f, +0.0722086f, +0.0676407f,
  +0.1592499f, +0.1734576f, -0.2761200f, -0.1981878f, +0.0450100f, +0.1411636f, +0.0408719f, -0.1356382f,
  -0.1477956f, +0.0456514f, +0.1185201f, -0.1919659f, -0.0149175f, -0.1316883f, +0.0013480f, -0.0908311f,
  +0.3654887f, -0.2534707f, -0.1244228f, -0.0965528f, -0.2092527f, -0.3331977f, -0.1715672f, -0.0645380f,
  -0.1023105f, +0.0144758f, -0.3735318f, +0.0268389f, +0.3633953f, +0.2776955f, +0.1773637f, +0.1073553f,
  +0.1534733f, -0.2183796f, +0.0233809f, +0.0271755f, -0.0834209f, -0.0137070f, -0.1945915f, +0.0838536f,
  +0.4862190f, -0.0743975f, -0.0789542f, -0.0315799f, +0.0507575f, -0.0349392f, -0.0508876f, -0.0062553f,
  +0.1099635f, +0.0120966f, -0.0694058f, +0.0400584f, -0.1285976f, +0.0441328f, -0.1964011f, +0.0539670f,
  +0.0888408f, +0.0665312f, -0.0102192f, +0.1302488f, -0.1221870f, -0.0573126f, +0.1393775f, -0.0956452f,
  -0.0323643f, +0.0840744f, +0.1284720f, +0.0446194f, +0.1986161f, -0.0536174f, -0.0981773f, -0.0731515f,
  +0.1201753f, -0.0809868f, +0.1382525f, -0.1172640f, +0.1346538f, +0.0634239f, -0.3496914f, +0.0592461f,
  -0.3317488f, +0.0338880f, -0.0897519f, +0.1696262f, +0.2188784f, +0.2704850f, -0.6093774f, -0.2038361f,
  -0.1687654f, -0.0816632f, -0.0118678f, +0.1065018f, +0.0355719f, +0.1383208f, +0.0455468f, -0.1718395f,
  -0.0953649f, +0.1366741f, -0.0033481f, +0.2476253f, +0.0750239f, -0.1926460f, +0.1156549f, -0.0860739f,
  +0.0132091f, +0.0514271f, -0.0442758f, -0.0123463f, +0.0574651f, +0.0146665f, +0.0324448f, -0.1823583f,
  -0.1540907f, +0.0513578f, +0.0922437f, +0.0077138f, +0.0836826f, +0.1754886f, +0.0177457f, -0.0140395f
);

const float biases[4] = float[4](
  +0.0281018f, -0.0127863f, +0.0058189f, -0.0285358f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer108 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0215599f, -0.0476023f, -0.0126597f, -0.0558668f, +0.2214228f, -0.1477959f, -0.0592660f, +0.0607932f,
  -0.1204798f, +0.0117618f, +0.1672301f, -0.2849236f, +0.0114677f, +0.2479802f, -0.3021400f, -0.1934539f,
  -0.0630811f, +0.1064978f, -0.0545964f, +0.1590639f, +0.1939228f, -0.2464377f, -0.1088049f, +0.0797547f,
  +0.1751522f, +0.0578027f, -0.0544129f, +0.2920590f, -0.0574817f, -0.2633719f, -0.2395839f, -0.1466386f,
  +0.2222324f, -0.0027884f, -0.0170071f, +0.1789745f, -0.2708786f, +0.2761668f, +0.1386630f, +0.2316789f,
  -0.0948864f, -0.0664648f, -0.0960000f, -0.2020509f, +0.0278132f, +0.0774071f, +0.0400693f, -0.1684028f,
  +0.0289444f, -0.1316462f, +0.1174589f, -0.2277148f, -0.0967481f, -0.0847639f, +0.2279603f, -0.1267359f,
  -0.0008972f, +0.0306367f, -0.0760894f, -0.1554172f, +0.0527948f, -0.0756779f, -0.0781882f, +0.0626530f,
  -0.0940833f, +0.0942463f, +0.0146390f, +0.0762489f, -0.1028129f, +0.0040058f, -0.0114493f, -0.1001750f,
  +0.1816054f, +0.3937587f, +0.0939773f, +0.0426507f, -0.0151412f, -0.1556952f, +0.1919806f, +0.2070252f,
  +0.2561108f, +0.0419828f, -0.3147119f, +0.2154854f, +0.0907865f, +0.0344096f, +0.1988323f, -0.1547916f,
  -0.0889944f, +0.2734005f, -0.0718839f, -0.3279474f, +0.0561523f, -0.0363550f, -0.0773138f, +0.1879961f,
  -0.1796281f, +0.1357234f, -0.2025613f, +0.2172669f, +0.0094374f, +0.0317481f, -0.1621331f, -0.0664761f,
  +0.0602949f, +0.0509184f, +0.0587200f, -0.0116276f, +0.1877504f, +0.0826981f, -0.1987770f, +0.0813568f,
  -0.2042946f, +0.2166030f, +0.2035726f, -0.0835988f, +0.1404682f, -0.2294788f, +0.0321205f, +0.1639847f,
  +0.1612217f, +0.0391395f, +0.0460593f, +0.0653868f, +0.1100272f, -0.1190130f, -0.0563309f, -0.1862972f,
  -0.1476983f, +0.0427238f, +0.1259561f, -0.0683661f, +0.0650034f, -0.0944384f, -0.1322266f, +0.1098567f,
  +0.3579664f, +0.2140474f, +0.1399152f, +0.0350181f, -0.1671529f, -0.0478898f, +0.2009583f, -0.2668679f,
  +0.0969996f, -0.0556717f, +0.0705103f, -0.1492765f, +0.2370590f, -0.1309605f, +0.2045477f, -0.0472494f,
  -0.0882677f, +0.0772321f, +0.2573661f, -0.0895479f, +0.0147148f, -0.0169479f, +0.0313115f, -0.0564632f,
  -0.1918930f, +0.1054877f, +0.1482341f, -0.2320414f, -0.0571103f, -0.0707828f, +0.1247572f, +0.1296061f,
  -0.0728820f, -0.0148759f, -0.1884885f, -0.0783321f, -0.0984767f, -0.2856760f, -0.2074318f, +0.1977979f,
  -0.1699178f, -0.2763427f, -0.0818159f, +0.2267330f, -0.0739846f, -0.1450053f, -0.0417122f, +0.0578264f,
  +0.0592351f, +0.3682386f, +0.1372205f, +0.1216722f, +0.0026306f, +0.0088970f, -0.0109023f, -0.0689442f,
  -0.0189985f, +0.0095458f, -0.1061419f, -0.1140888f, -0.2029357f, +0.2467956f, +0.0011853f, -0.2134946f,
  -0.0839841f, -0.0200679f, +0.2147551f, -0.0429780f, -0.1854087f, -0.1115152f, -0.0188865f, +0.0489373f,
  +0.0036148f, +0.2004222f, -0.1973322f, -0.1171333f, -0.2136310f, +0.0826147f, -0.0409410f, -0.0137129f,
  -0.0458074f, +0.0306227f, +0.2694019f, -0.1819545f, +0.0322574f, +0.0147374f, +0.0442564f, +0.0010829f,
  -0.1268919f, -0.1335065f, -0.1213417f, +0.2194073f, +0.1454753f, -0.0090137f, -0.3029330f, +0.5061054f,
  +0.2359058f, -0.2892803f, -0.1166802f, -0.0960473f, +0.1095641f, +0.2952327f, +0.0497327f, -0.2573592f,
  +0.3795226f, +0.0410328f, -0.1733475f, -0.0071590f, +0.0368499f, -0.1347080f, -0.0713739f, -0.1673577f,
  +0.3330783f, -0.0668524f, +0.0175145f, +0.0401362f, +0.0154030f, +0.1402171f, +0.2243545f, +0.0699992f,
  -0.0519054f, +0.0362851f, +0.1365253f, +0.0931603f, -0.0183091f, +0.0559507f, +0.1041392f, -0.1194907f,
  -0.1544524f, -0.0363934f, +0.0528651f, +0.2164005f, -0.0393281f, -0.1766442f, +0.2384435f, -0.0900130f,
  -0.0352475f, -0.1936825f, +0.0879701f, -0.0931453f, -0.0968863f, -0.1582365f, +0.0308944f, -0.0888998f,
  +0.0262855f, -0.1638630f, -0.0562210f, +0.1405811f, +0.2294931f, -0.0446281f, +0.0149993f, +0.1113077f
);

const float biases[4] = float[4](
  -0.0163677f, +0.0140305f, +0.0295968f, -0.0070280f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer108 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0884530f, +0.0929033f, +0.0259139f, +0.0280094f, +0.1023054f, -0.1229234f, -0.1472562f, +0.0446352f,
  +0.1935371f, +0.0797476f, +0.1906283f, +0.0535847f, +0.1865509f, +0.0076378f, -0.1781812f, +0.1781619f,
  -0.1826959f, +0.0996641f, +0.2154561f, -0.0880723f, -0.0122019f, +0.1510200f, -0.0464326f, +0.0577069f,
  -0.0630821f, +0.1383113f, -0.0717274f, +0.1355307f, +0.0117904f, +0.3418182f, -0.2396258f, -0.0373424f,
  -0.0858826f, -0.1610926f, -0.0550542f, -0.0408654f, +0.0972881f, -0.0434838f, +0.0761788f, -0.0406394f,
  +0.1118849f, -0.0516239f, -0.1286163f, +0.1498946f, -0.1408737f, +0.1781426f, +0.1219802f, +0.0263575f,
  +0.0163350f, +0.0210549f, +0.1447853f, -0.2222092f, +0.1643065f, -0.2156748f, -0.0656031f, -0.1382895f,
  -0.1202339f, +0.1531395f, +0.2480112f, +0.1202992f, +0.1805872f, -0.1011917f, +0.3820213f, +0.0232972f,
  -0.1039551f, -0.0762363f, -0.1146766f, +0.0185996f, -0.1636220f, -0.1597540f, -0.0396953f, +0.2570080f,
  +0.0209637f, +0.0778449f, +0.1480246f, -0.0885208f, +0.0810299f, -0.2616532f, -0.0583523f, +0.0732641f,
  +0.1627757f, -0.1916885f, +0.1154201f, +0.1217245f, +0.0129453f, -0.1456001f, -0.0947915f, -0.0420763f,
  -0.0863201f, +0.0497710f, -0.2059048f, +0.0989460f, +0.2016036f, -0.0497373f, -0.0961016f, +0.4689665f,
  +0.0520705f, -0.0656481f, +0.1800352f, -0.1763020f, -0.0119264f, -0.2365651f, +0.0473623f, +0.0327849f,
  -0.1477840f, -0.3383043f, -0.0892340f, +0.3286861f, +0.0801858f, -0.0225457f, -0.0160350f, -0.0883004f,
  -0.0573397f, +0.0596523f, +0.2631132f, +0.0543719f, +0.3215217f, +0.0615475f, -0.1261511f, +0.1246720f,
  -0.0501269f, +0.0893984f, -0.2558835f, +0.1911974f, +0.0160036f, +0.1330348f, +0.2483705f, +0.1760759f,
  -0.1289345f, -0.1996219f, -0.1352765f, -0.0258010f, -0.1472676f, +0.2117209f, +0.0544956f, +0.0353556f,
  -0.1717455f, -0.0078309f, -0.1392349f, +0.0328896f, -0.0123436f, -0.0998930f, -0.0313193f, -0.1513897f,
  -0.2020094f, -0.2141022f, +0.0472960f, -0.1927896f, +0.0204876f, -0.1229783f, +0.2657954f, -0.1058205f,
  +0.2850480f, +0.0396485f, +0.0448094f, -0.0511522f, +0.2852803f, +0.1153956f, +0.1052705f, +0.0669160f,
  -0.2611462f, +0.0219579f, -0.0831965f, -0.0585496f, +0.2643976f, +0.1181445f, -0.0621993f, -0.0628714f,
  -0.0901865f, +0.0042565f, +0.2852594f, -0.3141043f, +0.0184459f, +0.2990348f, +0.0448057f, -0.0872372f,
  +0.1764043f, -0.0498795f, +0.1598925f, -0.2881489f, -0.0887361f, +0.3395539f, -0.0408062f, +0.4250967f,
  +0.2730375f, -0.1327696f, -0.2139913f, -0.1758840f, +0.0387294f, +0.0666071f, -0.0030797f, +0.0321552f,
  -0.2204269f, -0.2413870f, -0.1853637f, -0.0555189f, -0.0405194f, +0.1163806f, +0.1367726f, -0.0134225f,
  +0.0993398f, -0.1978040f, +0.2512205f, -0.1470628f, +0.2938993f, -0.0813724f, +0.0067307f, -0.0300794f,
  +0.0434507f, -0.1318121f, +0.0961196f, +0.0749233f, -0.1669775f, -0.0910686f, -0.0119831f, +0.1323381f,
  -0.2932761f, -0.1338839f, +0.0397347f, -0.2433308f, +0.0599044f, +0.0774673f, -0.2593609f, +0.0254123f,
  +0.0287475f, +0.1177837f, +0.0678400f, +0.3755247f, -0.4452102f, -0.1866861f, -0.1442573f, -0.2326133f,
  -0.0710460f, +0.0032303f, -0.0273954f, +0.1069040f, +0.1176127f, -0.0495838f, +0.2280572f, -0.0779050f,
  -0.1719489f, -0.1035820f, -0.2263700f, +0.4308381f, +0.2163362f, +0.3172247f, +0.0495352f, +0.0114618f,
  -0.0696025f, -0.1651741f, +0.2572720f, +0.6391259f, -0.0131589f, +0.1122390f, +0.2536079f, -0.1796100f,
  +0.0437237f, -0.0601381f, +0.0627154f, -0.1414260f, +0.5193056f, +0.0109273f, +0.0168489f, +0.0104463f,
  -0.2275479f, +0.3213540f, +0.2149390f, +0.0699242f, -0.3635878f, -0.0428748f, -0.0279766f, -0.3060226f,
  +0.2707791f, -0.1507645f, -0.0132537f, -0.5276285f, -0.0670222f, +0.1474336f, -0.0341629f, -0.0099375f,
  +0.0349814f, +0.0437929f, -0.1521652f, -0.0548937f, -0.0021827f, +0.0258160f, -0.0198114f, -0.1384777f
);

const float biases[4] = float[4](
  +0.0186810f, -0.0062098f, -0.0171394f, +0.0101459f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer109 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1570126f, -0.2469475f, -0.1658501f, +0.1302730f, +0.1713978f, +0.0136756f, +0.1785001f, -0.1460343f,
  -0.0174841f, +0.1849947f, +0.3934676f, +0.0222765f, -0.0577882f, -0.0512567f, +0.0907364f, +0.0602045f,
  +0.2256177f, -0.0195918f, -0.1409155f, -0.0887360f, -0.0597127f, +0.1908764f, -0.2166314f, +0.0114515f,
  +0.3119839f, -0.6229779f, -0.1112259f, +0.1299500f, -0.1769430f, +0.1822007f, +0.1943884f, +0.0603744f,
  -0.1770728f, +0.3254171f, +0.1967910f, +0.2393517f, +0.2759264f, -0.4070114f, -0.1022830f, +0.4816312f,
  +0.0035874f, +0.1219262f, -0.4543726f, -0.3269361f, +0.0050731f, +0.2297067f, -0.1374872f, -0.1556258f,
  -0.1349282f, -0.0478329f, -0.1638988f, -0.0244912f, +0.0916766f, +0.1130988f, +0.0975260f, -0.2387633f,
  -0.0159486f, +0.2036247f, +0.0890729f, +0.1885079f, +0.2770465f, -0.3971657f, +0.1287794f, +0.1141407f,
  -0.0936359f, -0.0250502f, -0.0229713f, -0.0693445f, +0.0125895f, +0.1536765f, -0.0158971f, +0.0346076f,
  +0.0984285f, -0.2703124f, +0.0394736f, +0.2130320f, +0.3212979f, +0.1564972f, +0.0526853f, +0.1152085f,
  +0.0464767f, +0.0457966f, +0.1700557f, +0.0942363f, +0.0227527f, +0.1255841f, +0.1494075f, -0.0165793f,
  -0.0495409f, -0.0689901f, +0.0833988f, +0.0421025f, +0.1180693f, +0.0465531f, -0.0457363f, -0.1396534f,
  +0.2855108f, +0.0044853f, -0.0658333f, +0.2159216f, +0.1774403f, -0.0428498f, +0.3279307f, -0.0831623f,
  -0.1609131f, -0.0600970f, +0.2209043f, +0.3467994f, +0.2086114f, +0.3624268f, +0.0844197f, -0.1202881f,
  +0.1701777f, -0.1902891f, +0.0452634f, -0.0667970f, -0.0129372f, +0.1552216f, -0.0282059f, +0.0067499f,
  +0.1911895f, +0.1000116f, -0.2105192f, -0.0000845f, -0.1143425f, -0.2403248f, -0.0070472f, +0.0070691f,
  -0.3574198f, -0.2641536f, +0.2841996f, +0.1831237f, +0.1149768f, +0.1494020f, +0.4314111f, +0.0967545f,
  +0.1390734f, -0.1467719f, +0.0903116f, +0.1124155f, -0.0765492f, -0.0012659f, -0.0846608f, +0.1950918f,
  +0.0631680f, +0.0244129f, +0.0277067f, +0.1908480f, -0.1200940f, -0.0271637f, -0.2698433f, -0.0257265f,
  +0.2175209f, -0.0127168f, +0.3558637f, +0.0686196f, +0.2480670f, +0.0576359f, -0.1974886f, +0.0785527f,
  +0.0103026f, +0.0213475f, -0.2697293f, -0.0068967f, +0.2101733f, +0.0262283f, -0.3274179f, +0.3195702f,
  +0.3424127f, -0.0541395f, -0.2072302f, -0.1105919f, -0.0169214f, -0.0120480f, -0.0577951f, -0.2059890f,
  +0.0239298f, -0.1335628f, +0.0583325f, +0.0989332f, +0.0809753f, +0.2460152f, -0.0572317f, -0.0191228f,
  -0.0808969f, -0.0110536f, -0.1865998f, -0.1544837f, +0.1121854f, +0.0396974f, -0.0110191f, -0.1176174f,
  +0.3296925f, -0.1381100f, -0.1985071f, -0.0789633f, -0.0489721f, +0.1308612f, +0.1496834f, -0.0705454f,
  +0.1608297f, +0.0793458f, +0.0561029f, +0.3690234f, +0.0107089f, -0.4173638f, -0.1145164f, +0.1634717f,
  +0.1420190f, -0.2239145f, +0.2756178f, -0.1045673f, -0.2064693f, -0.2888312f, -0.0202347f, +0.0838753f,
  +0.3136288f, -0.0059761f, -0.1067035f, -0.1437230f, -0.0894476f, +0.2532393f, -0.0518779f, +0.0681546f,
  -0.1462536f, -0.3509091f, +0.0600396f, -0.1787626f, +0.0184734f, +0.0213422f, +0.2856022f, +0.4248599f,
  -0.2606396f, +0.2536707f, -0.1242483f, -0.0363665f, +0.1161295f, -0.2194537f, -0.1754657f, +0.0645372f,
  +0.1454862f, -0.1942981f, -0.0695477f, +0.0505460f, -0.0602323f, -0.2116313f, -0.2202791f, +0.3099964f,
  +0.1903743f, -0.2298322f, -0.0300951f, +0.1187414f, +0.0127328f, -0.3553917f, -0.0901602f, -0.2132308f,
  +0.3457561f, +0.1437417f, +0.1021885f, -0.2013739f, +0.2586263f, +0.1421485f, +0.0910918f, -0.1882185f,
  +0.0181752f, -0.2403542f, -0.0218503f, +0.1745861f, +0.1862704f, +0.0378868f, -0.1383535f, +0.1217435f,
  -0.0730668f, -0.1628710f, -0.0578514f, -0.1629408f, +0.2745276f, +0.1323346f, +0.2363153f, -0.2183721f,
  -0.1207852f, -0.1075039f, +0.0392843f, +0.1114056f, +0.0770053f, -0.0287149f, +0.1541883f, -0.0290534f
);

const float biases[4] = float[4](
  -0.0170619f, -0.0171163f, -0.0507107f, +0.0015718f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer109 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0903285f, +0.0430255f, +0.1456553f, -0.0999815f, -0.0864848f, +0.0099347f, +0.0919915f, +0.1754401f,
  -0.0837048f, +0.2836730f, +0.1723623f, -0.0370337f, +0.0667726f, +0.0297567f, +0.2912356f, +0.0285146f,
  +0.0122754f, -0.0305914f, +0.0760713f, -0.0713296f, -0.0159854f, -0.0008618f, +0.0850333f, +0.0777639f,
  +0.0546147f, +0.0731096f, +0.1976147f, -0.2005240f, -0.1727088f, -0.1905845f, +0.0113438f, +0.2045927f,
  -0.1849661f, -0.2414340f, +0.2402300f, -0.3049550f, +0.2692768f, +0.1286413f, +0.1586722f, -0.1768366f,
  +0.2442576f, -0.1938437f, +0.2353714f, +0.0495537f, -0.1725993f, +0.1864949f, -0.0507182f, +0.0068222f,
  +0.1255556f, +0.4267332f, +0.2563057f, -0.0095948f, -0.2945999f, -0.0657712f, -0.1684367f, -0.1353551f,
  -0.1113946f, +0.1545602f, +0.1546563f, -0.0222121f, -0.3625093f, +0.0716922f, -0.1362225f, -0.1759980f,
  -0.2276768f, -0.0781274f, -0.0423919f, -0.1744907f, +0.1004045f, +0.1030170f, -0.0363841f, -0.1996707f,
  -0.1718674f, -0.1198476f, -0.1388223f, +0.1549781f, -0.1989573f, +0.0146383f, +0.3885940f, -0.3173184f,
  +0.0439807f, -0.3232628f, -0.4229968f, -0.1213419f, -0.2380791f, +0.0563755f, +0.2192509f, -0.1165293f,
  -0.0501655f, -0.1156172f, +0.1132332f, +0.0429818f, -0.1453314f, +0.1435631f, -0.0987183f, -0.2592528f,
  +0.2596195f, +0.2365504f, -0.3154211f, -0.0858943f, +0.1815568f, +0.1717282f, -0.3783650f, -0.0154633f,
  -0.0950892f, +0.3193408f, -0.1147708f, +0.3615808f, +0.2608818f, -0.3059535f, -0.0217647f, +0.2241204f,
  -0.1265013f, +0.2134818f, -0.0314224f, +0.2490178f, +0.1896554f, +0.0338468f, +0.1518802f, +0.1091262f,
  -0.2406775f, +0.0343111f, -0.0611268f, +0.0217099f, +0.1118399f, -0.0303324f, +0.0927291f, +0.0649184f,
  +0.1782857f, +0.0833565f, +0.0171690f, +0.0588655f, -0.0102000f, +0.0791992f, -0.1515035f, -0.0578090f,
  -0.0020858f, -0.0383345f, -0.0559884f, +0.0142327f, +0.0713693f, -0.1173944f, +0.0905669f, +0.1337381f,
  +0.0328719f, +0.0516423f, -0.1733921f, -0.1748942f, -0.3134215f, -0.2436082f, -0.0514039f, +0.0124999f,
  +0.0043594f, +0.2707659f, -0.1386265f, -0.5298185f, -0.1866409f, -0.5436528f, +0.2182926f, +0.0803602f,
  -0.1625685f, +0.0352491f, -0.6458218f, -0.2632329f, -0.2206508f, -0.2730128f, +0.5183486f, +0.0728536f,
  -0.0061134f, -0.1406762f, +0.0742303f, +0.0896346f, +0.2180179f, -0.0650558f, -0.1813515f, -0.0370526f,
  +0.1089790f, -0.1318486f, -0.1195673f, +0.1483338f, +0.2025155f, -0.0923376f, -0.2775126f, +0.0635356f,
  +0.2587430f, +0.1000864f, +0.1417200f, +0.4433224f, +0.1177110f, -0.0785533f, -0.4452606f, +0.2665087f,
  -0.1273248f, -0.0227317f, -0.1466447f, -0.0017086f, +0.1076386f, +0.2048131f, +0.1200748f, +0.1223144f,
  -0.0422128f, -0.1150260f, +0.1560056f, -0.1891468f, +0.1148737f, +0.2184234f, +0.1603048f, +0.1329462f,
  -0.0186858f, -0.0890517f, +0.3270452f, -0.2559426f, +0.0356977f, +0.3208644f, +0.2227706f, -0.1687612f,
  -0.0498600f, -0.0675158f, -0.0373556f, -0.0074190f, -0.0056888f, -0.1565029f, -0.1241681f, -0.0720506f,
  -0.2066338f, +0.0361585f, +0.0140594f, -0.1363569f, -0.1393881f, -0.0113363f, +0.0613285f, -0.1393057f,
  -0.0340839f, +0.0099275f, +0.0311102f, +0.0224136f, -0.0283807f, -0.0536020f, -0.0588879f, -0.1580281f,
  -0.0010345f, +0.0350806f, -0.0545693f, +0.3021644f, -0.2018581f, -0.0067335f, -0.0023734f, +0.1973554f,
  +0.0926413f, +0.2872962f, -0.0688179f, -0.0357303f, -0.1417832f, +0.0041996f, +0.0701641f, +0.0443415f,
  -0.1395164f, -0.0060551f, -0.0420095f, +0.0059009f, -0.0044038f, +0.0402861f, +0.0851781f, +0.1733433f,
  -0.0879770f, -0.1690351f, -0.1092744f, -0.1567172f, +0.1085397f, +0.1693795f, +0.0911553f, +0.0663689f,
  +0.1804030f, -0.0429369f, +0.2465554f, -0.1038673f, -0.0493716f, -0.0300083f, +0.0719162f, -0.0303743f,
  +0.0926173f, +0.0171016f, +0.1230824f, -0.0298875f, +0.0515626f, -0.1185723f, +0.0236812f, -0.1435440f
);

const float biases[4] = float[4](
  +0.0285283f, -0.0119177f, +0.0088874f, +0.0739282f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer110 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1121154f, +0.0539668f, -0.2283855f, -0.0099842f, +0.2153237f, +0.0296180f, -0.0112102f, -0.0135151f,
  -0.2391420f, -0.1859280f, -0.1552326f, +0.2004314f, -0.1255226f, -0.1285804f, -0.2786617f, -0.1941724f,
  +0.0424299f, +0.3521771f, +0.2679721f, +0.1963320f, +0.2120517f, +0.2706621f, -0.0677741f, +0.1921158f,
  -0.0701042f, -0.0366363f, +0.2281910f, +0.0984690f, +0.2583438f, -0.0867866f, +0.1271843f, +0.0712552f,
  -0.1225811f, +0.0530423f, +0.0897653f, -0.1680862f, +0.0541033f, -0.2562741f, +0.1950959f, +0.1056439f,
  +0.0941100f, -0.0168017f, +0.2561680f, -0.0269393f, -0.0065866f, -0.1329125f, -0.0249342f, +0.0283927f,
  -0.0076706f, +0.1215643f, +0.1459965f, +0.0295245f, +0.2219035f, +0.0701762f, -0.2712204f, +0.0875519f,
  -0.0342587f, -0.1385553f, +0.2380592f, -0.0567669f, -0.0254344f, +0.2919596f, -0.1143442f, -0.1385477f,
  -0.0146663f, +0.1708840f, -0.1758434f, -0.0682947f, -0.0011161f, +0.0068794f, +0.0095736f, -0.1316460f,
  -0.0187801f, +0.0665486f, +0.2880448f, -0.3524955f, -0.1600450f, -0.1413289f, +0.0380611f, +0.0708183f,
  +0.2204403f, +0.1402231f, +0.0425111f, -0.1952670f, +0.0362309f, +0.0955822f, +0.2347535f, +0.1298880f,
  -0.0577866f, -0.0721639f, -0.2101132f, +0.2885038f, -0.1725657f, -0.2246649f, +0.1403014f, +0.2437360f,
  -0.1021490f, +0.2589216f, -0.1912183f, -0.0537221f, +0.0357494f, +0.0121928f, +0.3040843f, +0.0119790f,
  -0.0170159f, -0.3784017f, -0.1236890f, +0.0290253f, +0.0812517f, -0.4213032f, -0.0517679f, -0.2692222f,
  -0.1385548f, +0.3508854f, +0.3236726f, +0.0066259f, -0.0466375f, -0.4239577f, -0.0878450f, -0.0022975f,
  -0.0041362f, +0.0651399f, -0.2459600f, +0.0311331f, +0.3122816f, +0.1549798f, -0.1455287f, -0.0562845f,
  +0.0165571f, -0.3785103f, -0.0112310f, +0.0821505f, -0.0379655f, +0.3240227f, -0.1613357f, +0.2174184f,
  -0.2727044f, +0.3660293f, +0.1306327f, +0.1705952f, -0.0579537f, -0.0848950f, +0.1434853f, +0.0650811f,
  +0.2693720f, -0.0348047f, -0.2092215f, +0.1866443f, +0.0958214f, +0.1264802f, -0.0664871f, +0.0177167f,
  +0.1115026f, -0.3485613f, +0.1237031f, -0.0628170f, -0.0148939f, -0.1322173f, -0.0198720f, +0.0229566f,
  +0.1446478f, -0.1665169f, -0.2797326f, -0.0968831f, -0.0389189f, +0.0095361f, -0.0481056f, -0.0695857f,
  -0.0075591f, +0.2634315f, -0.0642776f, +0.4534802f, -0.1054837f, +0.0560876f, -0.1063837f, +0.0194510f,
  -0.3510426f, +0.0467716f, +0.2082093f, -0.2697432f, -0.2055230f, -0.0158016f, -0.3020924f, +0.1655107f,
  +0.0250680f, -0.0207139f, -0.1763444f, -0.0513639f, -0.0043142f, -0.0070976f, +0.0056714f, +0.2929714f,
  +0.0740497f, +0.0519875f, +0.1490955f, +0.2227924f, -0.1267414f, +0.0571477f, -0.0623349f, +0.1347061f,
  -0.0139367f, -0.3396662f, +0.0650475f, -0.1057940f, -0.1153253f, +0.4535104f, +0.1176796f, +0.2219608f,
  +0.1814152f, +0.1185606f, -0.2025195f, +0.0605920f, -0.1155023f, -0.0575153f, +0.0413654f, -0.0117170f,
  +0.1082469f, +0.0535925f, +0.1347166f, +0.0310266f, +0.0977622f, -0.0004871f, -0.0370925f, +0.0123714f,
  +0.2572648f, -0.1490403f, -0.3092715f, +0.0045400f, -0.3105721f, -0.0660440f, +0.0414754f, +0.1008448f,
  +0.0953795f, -0.2661405f, +0.1389581f, -0.4623605f, -0.0232029f, -0.0486111f, -0.0130850f, +0.3717109f,
  -0.2426891f, +0.4733925f, +0.1494343f, -0.1532499f, +0.1434510f, -0.0056282f, +0.4133353f, -0.0315093f,
  +0.2381344f, -0.2363873f, -0.1169800f, -0.1961759f, -0.1172306f, +0.0758251f, +0.0573784f, +0.2316008f,
  +0.0598681f, -0.1941580f, -0.0459499f, +0.1065544f, -0.0707829f, +0.1541117f, +0.0663550f, -0.0399105f,
  +0.0982555f, +0.0720555f, +0.2681038f, +0.1019177f, +0.0981955f, -0.0466874f, -0.2266381f, -0.0165877f,
  +0.2948061f, -0.1843689f, -0.0983658f, +0.1460223f, +0.0756911f, +0.4807613f, -0.2751013f, -0.0305473f,
  +0.0010886f, +0.1914860f, +0.2450774f, +0.2335984f, +0.1189375f, +0.2018634f, -0.0821777f, -0.0163326f
);

const float biases[4] = float[4](
  -0.0089009f, -0.0056502f, +0.0233485f, +0.0373317f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer110 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0430113f, +0.1121647f, -0.0164845f, -0.1376594f, -0.0245535f, +0.0392381f, -0.0743183f, -0.1872738f,
  +0.0232122f, +0.0496882f, +0.3355108f, -0.1994407f, +0.1446038f, +0.0819180f, +0.1533775f, +0.1070562f,
  -0.0879967f, +0.0721540f, +0.0895145f, -0.2577626f, +0.2005931f, +0.0169234f, -0.0072240f, +0.1193676f,
  -0.0339429f, +0.3772376f, -0.0496649f, +0.0482315f, +0.0357977f, -0.1547860f, +0.5194910f, -0.1025414f,
  +0.0998421f, -0.2582047f, +0.0133919f, +0.0135941f, -0.3687333f, -0.2236443f, +0.2486917f, +0.0092858f,
  -0.1366948f, +0.1165808f, +0.1018348f, +0.1562980f, -0.2252460f, -0.3853579f, -0.0724248f, +0.2395125f,
  -0.1300042f, -0.1083921f, -0.0446991f, -0.0088303f, +0.0185843f, +0.2022633f, -0.2609107f, -0.2204134f,
  -0.1257822f, +0.1584681f, -0.0886519f, +0.1880195f, +0.2738422f, +0.0728378f, -0.1805000f, +0.0960765f,
  +0.0012787f, -0.0996615f, +0.0176524f, +0.0113707f, -0.0554081f, +0.3782389f, -0.1295948f, +0.1247502f,
  +0.0592270f, +0.1485072f, +0.3059993f, +0.0382504f, -0.0407748f, +0.1163461f, +0.0686684f, -0.2282898f,
  +0.1276585f, +0.2549284f, +0.1217349f, +0.1926843f, +0.0475480f, -0.0958166f, +0.0222362f, -0.2277458f,
  +0.2049891f, +0.2066811f, +0.1953627f, +0.0014436f, -0.0302138f, +0.1461927f, +0.0068564f, +0.0046008f,
  +0.1851950f, -0.0122828f, +0.2285105f, -0.0910252f, -0.2317229f, +0.0842115f, -0.2647821f, +0.0146372f,
  +0.4633656f, -0.1672183f, -0.0894369f, +0.0956630f, +0.0479244f, +0.1454016f, -0.0611890f, -0.0995672f,
  +0.0284177f, +0.1625660f, -0.0330228f, -0.0935297f, +0.1278611f, -0.2216236f, -0.0548055f, +0.0934812f,
  +0.2276086f, -0.0057672f, +0.0178757f, -0.0559395f, +0.0648677f, -0.1100937f, -0.0026065f, +0.1322444f,
  +0.3882845f, +0.0099235f, +0.1271607f, -0.0233076f, +0.0293951f, +0.1618793f, +0.1347322f, +0.2142345f,
  +0.0146663f, -0.1741445f, +0.1075099f, -0.3927987f, +0.1018956f, +0.3767067f, -0.0822136f, +0.0276818f,
  +0.0518214f, -0.2832333f, +0.0667455f, +0.0851629f, +0.0252934f, +0.1054048f, -0.0587067f, -0.2065014f,
  -0.0196398f, +0.1061912f, +0.1088850f, -0.2814404f, +0.1252633f, +0.0220837f, +0.0050634f, -0.1524186f,
  -0.0078437f, +0.1400400f, -0.0758516f, +0.2031049f, +0.0249171f, +0.0272608f, -0.0612818f, +0.0132019f,
  -0.3367867f, -0.3671398f, -0.1080308f, +0.2161367f, +0.0188021f, -0.1569849f, -0.0042990f, +0.0112701f,
  -0.4579844f, +0.1933861f, -0.0623298f, +0.3253146f, +0.1871857f, +0.0638185f, -0.0863843f, +0.0718832f,
  -0.2741793f, -0.1939888f, -0.1580420f, +0.3009115f, +0.0702180f, +0.0914995f, +0.0030143f, -0.0320145f,
  -0.1137053f, +0.0430492f, +0.0131246f, +0.3361298f, -0.0456359f, +0.0698614f, +0.1027870f, +0.0189829f,
  -0.2598372f, +0.1440962f, +0.1462093f, +0.1299379f, -0.0534905f, -0.0154774f, -0.0797748f, +0.0371360f,
  -0.2082018f, +0.0665968f, +0.1991939f, -0.1080988f, -0.0779925f, -0.4726453f, +0.0430572f, +0.0458109f,
  -0.2097866f, -0.2078402f, +0.0928611f, -0.0832825f, +0.0230725f, -0.0643161f, -0.0698634f, +0.0704255f,
  +0.0079917f, +0.1458960f, +0.1832551f, +0.1411242f, +0.2812610f, +0.1562536f, +0.0646579f, +0.1230324f,
  +0.1447152f, -0.0975218f, +0.0665043f, -0.0128920f, -0.0604730f, -0.1071885f, -0.0395870f, +0.0266261f,
  -0.0969727f, +0.2815373f, +0.2967009f, +0.0638383f, +0.3332756f, +0.0720201f, -0.1332528f, -0.1030879f,
  +0.7014899f, +0.1649295f, -0.1463794f, +0.3979734f, +0.0845269f, +0.1283082f, -0.0442761f, +0.0633643f,
  -0.0024874f, +0.0892096f, +0.0013535f, -0.0915087f, -0.1666027f, -0.0036801f, -0.0832070f, -0.0238415f,
  +0.1154842f, +0.1888081f, -0.0739412f, +0.1032701f, -0.0697279f, +0.0922415f, -0.3358020f, +0.1541201f,
  +0.2999927f, -0.0800408f, -0.0121536f, -0.1472460f, -0.1734191f, +0.2295405f, +0.2872237f, +0.1844713f,
  -0.3789414f, -0.3212583f, -0.0133182f, +0.0747665f, -0.0848219f, -0.0291165f, -0.0376841f, +0.3888615f
);

const float biases[4] = float[4](
  +0.0256976f, -0.0055995f, -0.0137884f, +0.0142714f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer111 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0276861f, +0.1281490f, +0.1105572f, +0.1672568f, -0.2224043f, -0.0102406f, -0.1274536f, -0.0110550f,
  +0.1428631f, +0.0081119f, +0.1292944f, -0.1501857f, -0.2037256f, -0.2128128f, +0.1509125f, -0.3513802f,
  +0.0549185f, -0.0598397f, +0.0156076f, +0.0141823f, -0.5115338f, -0.2984170f, +0.1331014f, -0.2018339f,
  +0.0802106f, +0.1844834f, +0.1496002f, -0.1115718f, +0.4050080f, -0.0649368f, -0.1166567f, +0.2326298f,
  -0.3196748f, +0.0482501f, +0.3504537f, +0.1497580f, +0.0272103f, -0.1655712f, +0.0198878f, +0.0721986f,
  -0.1462256f, +0.0374708f, +0.0266869f, -0.0504630f, -0.2674832f, +0.1032786f, +0.0450219f, +0.1256582f,
  -0.1379770f, +0.1294970f, +0.3077634f, +0.0731821f, +0.0682289f, +0.0160566f, +0.1845611f, -0.0329505f,
  +0.1573357f, +0.3032633f, +0.2272376f, -0.1920367f, -0.2066220f, -0.1339680f, +0.0218511f, -0.2020909f,
  +0.0808659f, +0.0392181f, +0.2132916f, +0.2730097f, -0.3151159f, -0.0637877f, -0.2313954f, -0.0897664f,
  -0.0846032f, -0.2008210f, +0.0156240f, +0.1531174f, +0.1129588f, +0.0029314f, -0.1410356f, +0.0214491f,
  -0.0658031f, +0.1971302f, -0.0449304f, -0.0905728f, -0.0825332f, -0.0015633f, +0.2692447f, -0.1702809f,
  +0.0830459f, -0.0068805f, +0.0798623f, -0.0702647f, +0.0293660f, -0.0612449f, -0.2063073f, +0.1362169f,
  -0.1428144f, -0.3505203f, -0.0051933f, +0.3387644f, +0.2278678f, +0.2285456f, -0.0488106f, +0.2013792f,
  +0.0063297f, +0.3701254f, +0.0962068f, +0.0839246f, -0.0468229f, +0.0020296f, +0.2962255f, +0.1199721f,
  +0.0216777f, -0.1510744f, +0.1253688f, -0.3073553f, +0.1026858f, -0.0773332f, -0.2163326f, -0.3956862f,
  +0.1875661f, -0.2192113f, -0.0514159f, +0.0449161f, +0.0078620f, +0.0938563f, +0.1641869f, +0.0291419f,
  -0.0568290f, +0.3338932f, -0.0229013f, -0.0585817f, +0.2460883f, -0.0857450f, +0.0358458f, +0.1359766f,
  -0.0353000f, -0.0312502f, -0.0184748f, -0.2967115f, -0.0964707f, -0.1035460f, -0.0286214f, -0.4397892f,
  -0.1825848f, +0.1440312f, +0.0806378f, +0.0653273f, +0.0400764f, +0.0921818f, -0.0963493f, +0.0983426f,
  -0.1934216f, -0.3504894f, +0.1926024f, -0.2616546f, +0.0619603f, -0.2831706f, -0.0105867f, +0.1383638f,
  -0.0906087f, +0.1709397f, +0.1966981f, -0.1433306f, -0.0819995f, +0.2371998f, +0.0693543f, -0.1676637f,
  +0.2619004f, +0.0019217f, -0.0801718f, -0.1312461f, -0.2346545f, -0.0806051f, -0.2890710f, +0.0748479f,
  -0.1412733f, +0.1403871f, +0.0164660f, +0.0240081f, -0.0350319f, +0.0423865f, +0.1732218f, +0.0943900f,
  +0.0578412f, -0.0408628f, +0.1580431f, +0.2194431f, -0.4202331f, +0.1452381f, +0.2913937f, -0.0557357f,
  +0.0349024f, +0.0152361f, -0.1114144f, +0.0431845f, -0.2022090f, +0.0281568f, +0.1145958f, -0.1674794f,
  -0.2086041f, +0.0700475f, +0.0226018f, -0.1291270f, +0.1425544f, -0.0449850f, -0.2528008f, -0.0324692f,
  -0.1156579f, +0.0639914f, +0.0922848f, -0.2160743f, -0.1720719f, +0.0139217f, +0.1968962f, +0.0818100f,
  -0.1750537f, +0.0296524f, +0.3868438f, +0.0399885f, +0.0009564f, -0.1128328f, -0.0678395f, -0.0584588f,
  -0.0236988f, +0.2789706f, -0.0006088f, +0.0154551f, -0.2469092f, -0.3103810f, -0.3155653f, -0.0416671f,
  -0.2438989f, +0.1302867f, -0.3020901f, -0.0077618f, +0.1660912f, -0.1617136f, -0.0472188f, +0.1558005f,
  +0.2518918f, -0.1350470f, +0.0955570f, -0.0723054f, -0.1506347f, -0.1265773f, +0.2257195f, +0.1104386f,
  -0.2893876f, +0.0462966f, +0.2429359f, +0.0624006f, -0.0447775f, +0.0213079f, -0.1099117f, -0.0365912f,
  +0.1752732f, -0.1352108f, -0.2190717f, -0.0276632f, -0.2042863f, -0.0393329f, +0.0294301f, -0.1803995f,
  -0.0871522f, +0.0863443f, +0.2493371f, -0.1956352f, -0.1645674f, -0.0772860f, -0.0393581f, -0.1149923f,
  -0.0448534f, +0.1422180f, -0.2835448f, +0.0436437f, +0.0971676f, -0.1186011f, +0.0738539f, +0.0907175f,
  -0.0049299f, +0.1728012f, +0.0405514f, -0.0369131f, -0.0065844f, +0.1315016f, +0.0775219f, +0.1336448f
);

const float biases[4] = float[4](
  +0.0094900f, -0.0200325f, +0.0439932f, +0.0304866f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer111 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1507461f, -0.0006532f, +0.0664621f, +0.0286307f, -0.0812431f, -0.1337879f, +0.0913070f, -0.1579477f,
  -0.0598562f, +0.0993365f, -0.0182700f, -0.0149133f, -0.1358939f, -0.1478198f, -0.1028457f, -0.0637165f,
  -0.1120657f, -0.1422432f, -0.0949406f, -0.1583950f, -0.0724213f, -0.0690369f, +0.0681034f, +0.0350814f,
  -0.0265652f, +0.0622035f, -0.0806407f, +0.1119281f, +0.0309740f, -0.0341486f, +0.2500529f, -0.0456750f,
  +0.1029058f, +0.0319014f, +0.1180886f, -0.0227632f, +0.0272113f, +0.1966556f, -0.2176239f, +0.0976191f,
  +0.0806011f, -0.2304111f, -0.2330499f, -0.0228830f, -0.1867369f, -0.0345240f, +0.1536143f, +0.1203496f,
  -0.2970883f, -0.0342410f, +0.0088984f, +0.0593150f, -0.0025104f, -0.0092184f, -0.1729545f, +0.1373177f,
  +0.0426084f, +0.0205937f, +0.0234862f, -0.0069103f, +0.1730739f, -0.0697311f, +0.1338618f, +0.0949499f,
  -0.1954983f, +0.0939447f, +0.0576283f, +0.1354819f, +0.1640314f, +0.1168130f, +0.1544595f, +0.0898883f,
  -0.0545521f, -0.1301052f, +0.1243206f, +0.0953864f, -0.0688438f, -0.0818541f, -0.3852741f, -0.0471998f,
  -0.1971381f, -0.0408755f, +0.0491601f, -0.1135250f, +0.0763315f, -0.1046523f, -0.0101661f, +0.1871103f,
  -0.0602223f, -0.0433775f, +0.0475392f, +0.0290228f, -0.1139651f, +0.0365013f, -0.0046312f, -0.1842075f,
  -0.0387712f, +0.1041432f, +0.1678517f, -0.0290819f, +0.0874774f, -0.0581188f, +0.2333940f, -0.0997999f,
  -0.3699263f, +0.0297893f, +0.0777909f, +0.1121516f, +0.1645939f, -0.4502158f, -0.0561172f, -0.2563154f,
  -0.1102438f, +0.0463779f, +0.0063730f, +0.0381615f, +0.1042781f, -0.0747565f, -0.0633295f, -0.1387257f,
  +0.1193407f, -0.1985164f, +0.1226489f, +0.3060252f, +0.0112056f, -0.0108433f, -0.0006320f, -0.0558347f,
  -0.0838313f, +0.0842420f, -0.1279153f, +0.2227216f, +0.1013918f, +0.2008914f, +0.1723118f, +0.1570280f,
  -0.1699025f, +0.0065566f, +0.0783801f, -0.1804609f, +0.0399700f, -0.0429544f, +0.0693062f, +0.1982524f,
  +0.1041718f, -0.1810309f, -0.0803357f, -0.3087958f, +0.4150061f, +0.3459415f, -0.4527063f, -0.0372606f,
  -0.0641254f, -0.1820791f, -0.4272919f, +0.0269013f, -0.0968264f, +0.3048744f, -0.0094856f, +0.1259081f,
  +0.1807607f, +0.1699717f, +0.0622357f, +0.1190253f, +0.3112717f, +0.1018061f, -0.1115057f, +0.0619205f,
  +0.1166248f, -0.4177905f, -0.3457148f, -0.0929855f, +0.3994766f, -0.1794294f, -0.0574960f, +0.1248758f,
  -0.0525754f, -0.2661126f, +0.3021140f, +0.0324921f, +0.0958833f, -0.1907098f, +0.2076220f, +0.0844645f,
  -0.0187578f, -0.0693345f, +0.0604890f, -0.2379043f, -0.1589304f, -0.0528962f, -0.2287179f, -0.0490853f,
  +0.1517937f, +0.1622023f, -0.1690078f, -0.1536992f, +0.3297816f, +0.0669026f, -0.0659995f, -0.0958236f,
  -0.1377326f, -0.2892516f, -0.0096673f, +0.2219155f, -0.0887464f, +0.1183508f, +0.2075043f, +0.0512771f,
  -0.0128879f, -0.2031738f, +0.0811877f, +0.2447898f, +0.1350744f, -0.1261292f, -0.0298111f, -0.0325783f,
  +0.0331775f, +0.1848105f, +0.0535591f, +0.0259706f, +0.0070761f, +0.0082742f, -0.1147924f, -0.1373253f,
  -0.2614037f, -0.2572910f, +0.1904006f, +0.0426431f, -0.0305984f, +0.1942986f, -0.2276064f, -0.1441342f,
  -0.0310141f, -0.0066453f, +0.2126813f, +0.1596781f, -0.0753500f, -0.1963566f, +0.1453432f, -0.2251074f,
  -0.0469179f, -0.0573801f, +0.0130446f, +0.1163440f, -0.0706575f, +0.0026815f, -0.1745763f, +0.0495185f,
  +0.1493488f, -0.3921977f, -0.1290555f, -0.2214572f, -0.2722761f, -0.4274676f, -0.1275200f, +0.1975783f,
  -0.4165236f, +0.2526227f, +0.1930561f, -0.0759476f, -0.0758530f, +0.0309088f, -0.3340749f, -0.1379932f,
  -0.0273035f, +0.3308282f, +0.1586508f, +0.0509162f, +0.1315433f, +0.1380622f, +0.3200717f, -0.0714181f,
  +0.0366697f, -0.0305944f, +0.1020110f, -0.0057085f, -0.0271529f, +0.2296843f, -0.0536320f, -0.1512881f,
  -0.2450884f, +0.3196181f, -0.0231941f, +0.3906426f, +0.0024388f, -0.1629493f, -0.0333893f, -0.1706714f
);

const float biases[4] = float[4](
  +0.0304755f, +0.0057902f, -0.0058072f, +0.0520479f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer112 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1701688f, +0.1207625f, +0.1492617f, +0.0716157f, -0.0954253f, +0.0904977f, -0.0401540f, +0.2538744f,
  -0.1154623f, -0.1195123f, +0.1005574f, +0.1953986f, -0.1641160f, +0.2584632f, -0.0219892f, +0.0126141f,
  +0.0650426f, +0.0544392f, +0.0291371f, +0.1818111f, -0.1096696f, -0.0559324f, +0.0636579f, +0.1001856f,
  +0.0993958f, +0.1778149f, -0.1331807f, -0.1923636f, +0.0756877f, -0.3038696f, +0.0211427f, -0.1854365f,
  +0.1200765f, +0.1878276f, +0.0199327f, -0.1827949f, -0.3287449f, -0.0596618f, -0.2664398f, +0.0197284f,
  -0.0268576f, -0.0187147f, -0.2424004f, -0.0864659f, -0.1060139f, +0.1968245f, -0.2546386f, -0.0582914f,
  -0.0063987f, -0.0471153f, -0.1448508f, +0.1329872f, -0.2139923f, -0.0887822f, -0.0121340f, -0.1868425f,
  -0.0943746f, -0.0379207f, +0.0606635f, -0.1994183f, -0.1389328f, -0.0840449f, -0.3596085f, +0.1000711f,
  +0.0474183f, +0.0871992f, -0.1063487f, +0.0394909f, -0.0311805f, +0.0009952f, +0.2057980f, +0.1133853f,
  -0.0687400f, -0.2516595f, -0.1353602f, +0.0016928f, +0.1032975f, -0.2011310f, -0.0989159f, -0.1626067f,
  -0.0432947f, +0.2198204f, -0.1924584f, -0.0415870f, -0.0591120f, +0.0232459f, -0.2023990f, -0.1131400f,
  -0.0603111f, -0.1424239f, -0.2460484f, -0.0452770f, -0.1471352f, +0.2445570f, -0.0791347f, -0.0927271f,
  -0.0308156f, -0.2498689f, +0.0568318f, +0.2390358f, +0.3155209f, +0.1458768f, -0.0396122f, -0.3672705f,
  -0.2575997f, +0.0205831f, -0.0136682f, +0.0431294f, -0.0134689f, -0.0435940f, -0.1457256f, +0.1693084f,
  -0.2363174f, -0.1542262f, -0.1191996f, +0.1550519f, -0.1159407f, +0.0310054f, +0.2482230f, +0.1931271f,
  -0.1114579f, -0.0840390f, -0.3812170f, -0.2328600f, +0.1705066f, +0.2154347f, -0.0242758f, -0.0316869f,
  -0.2130766f, +0.0796788f, +0.2280578f, -0.2252116f, +0.0050323f, +0.1348498f, -0.3309325f, -0.0371251f,
  -0.0084875f, -0.1789661f, +0.0266925f, +0.1067201f, +0.1924295f, +0.1135456f, +0.1422533f, -0.1309912f,
  -0.2797122f, +0.2513114f, +0.1530773f, +0.0482141f, +0.4987334f, +0.1118811f, +0.0461593f, +0.2989839f,
  -0.4561752f, -0.1301277f, -0.1063285f, +0.0355145f, -0.1990017f, +0.1745707f, -0.2498467f, -0.0314179f,
  +0.1526026f, -0.1253994f, +0.0499685f, +0.1600671f, +0.0087816f, -0.0692860f, -0.1346771f, -0.1006412f,
  -0.0595847f, +0.2832992f, +0.1833981f, +0.2383249f, +0.2934414f, -0.0294751f, -0.0016633f, -0.1660400f,
  -0.1251372f, -0.0901390f, +0.0583332f, -0.3593163f, +0.0734068f, -0.0413229f, -0.0630896f, -0.0930342f,
  -0.0227580f, -0.0858761f, +0.0224738f, -0.2152168f, +0.2028018f, +0.2835845f, +0.0303831f, +0.0589077f,
  +0.1766027f, +0.0125073f, -0.1669972f, +0.0642666f, +0.2526493f, -0.0736358f, -0.0166880f, -0.1975611f,
  -0.1102574f, -0.0271277f, -0.1740625f, -0.2389684f, -0.1971916f, +0.0955470f, -0.0543512f, -0.0788537f,
  +0.0280055f, -0.0359429f, +0.1513578f, -0.0793732f, +0.1082740f, +0.1356334f, +0.1714988f, +0.0071788f,
  -0.1730160f, -0.2332520f, +0.2124611f, -0.0064056f, +0.1448186f, -0.3083458f, -0.1378252f, -0.1315361f,
  -0.0403651f, -0.0270576f, -0.3783603f, +0.0129173f, -0.0217874f, +0.0895087f, -0.2620629f, -0.0478560f,
  -0.0625678f, +0.0830240f, -0.0385274f, -0.1031019f, -0.2181273f, -0.0718204f, +0.1614177f, -0.0180136f,
  -0.1401470f, -0.2633210f, -0.3027755f, +0.1353467f, -0.0809793f, +0.3517935f, +0.1309649f, -0.1929878f,
  +0.0893407f, -0.0263249f, -0.1226577f, -0.2970129f, +0.1547397f, -0.3377063f, -0.2503121f, +0.2542618f,
  +0.0566287f, -0.0274640f, +0.0002368f, +0.1560735f, -0.1568725f, +0.2555293f, +0.1125850f, +0.1671321f,
  +0.1716543f, +0.0039021f, +0.2459611f, -0.0631805f, -0.0014935f, +0.0932633f, +0.1851803f, +0.1011623f,
  -0.1379852f, +0.2030966f, -0.1888672f, +0.1989879f, -0.2919321f, -0.0694244f, +0.1319256f, +0.2250027f,
  -0.0648355f, -0.0900545f, -0.0179744f, +0.1998187f, -0.2717618f, +0.1425604f, +0.1541450f, +0.1398904f
);

const float biases[4] = float[4](
  +0.0446652f, -0.0110602f, +0.0067385f, +0.0027435f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer112 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0669774f, +0.0235722f, -0.1084661f, -0.0083850f, +0.0993189f, -0.0363746f, -0.1839164f, +0.0703389f,
  +0.1840595f, +0.2011373f, -0.0047293f, +0.0772327f, +0.1277842f, -0.0138826f, +0.1320484f, -0.2861978f,
  -0.1692069f, -0.0817845f, -0.0137293f, -0.0762501f, -0.0268039f, +0.3560795f, -0.0256212f, -0.1148196f,
  +0.2391464f, +0.3370734f, -0.0087536f, +0.1753153f, +0.0461763f, +0.1657743f, +0.0755448f, -0.2714960f,
  -0.1701327f, -0.3557847f, +0.0408252f, -0.1751513f, +0.1270870f, +0.2004713f, -0.4054827f, +0.0636003f,
  -0.0238140f, +0.1017683f, +0.1959476f, -0.2832316f, -0.1309409f, -0.2818591f, -0.0048198f, +0.1325831f,
  +0.0999577f, +0.0933744f, +0.1141036f, -0.1835971f, +0.1236131f, +0.1291557f, -0.0414990f, +0.3132115f,
  +0.1004405f, -0.1342158f, +0.0780582f, -0.1623111f, -0.1532698f, -0.0092165f, +0.1842529f, -0.1672472f,
  -0.0347099f, +0.1866501f, -0.1962561f, -0.1377234f, +0.0064222f, +0.1095350f, -0.1996522f, +0.0371253f,
  -0.1405314f, -0.0512112f, -0.1274532f, -0.3293321f, -0.1438849f, -0.1421100f, +0.0265226f, +0.1177465f,
  +0.0803118f, +0.1328916f, -0.3250065f, +0.0214566f, -0.2754813f, +0.2272680f, -0.1032313f, -0.0870522f,
  -0.1563936f, +0.0569202f, -0.1035785f, +0.1294326f, -0.2560149f, +0.2035450f, +0.1648919f, +0.1170236f,
  -0.1503810f, -0.4607666f, -0.3728170f, -0.1115572f, -0.2410248f, +0.0279971f, +0.0809315f, +0.2817698f,
  +0.0879228f, +0.0997194f, +0.0315044f, -0.1826163f, -0.0700702f, +0.3814898f, +0.1256709f, +0.2856143f,
  -0.2882040f, +0.0127549f, +0.2756900f, +0.1311820f, -0.1182497f, +0.0858728f, -0.3717026f, -0.0228558f,
  -0.0499804f, -0.1097455f, +0.0631997f, -0.0176460f, +0.0971514f, +0.1777507f, -0.3057345f, +0.1291104f,
  +0.0413401f, +0.2222694f, -0.0900846f, +0.1164273f, +0.2059664f, +0.0360408f, -0.2554548f, +0.0063278f,
  -0.0158719f, -0.0142089f, +0.0627874f, -0.2304796f, +0.2540269f, +0.1079002f, +0.0962894f, -0.1446847f,
  +0.1109270f, +0.4717241f, -0.0587207f, -0.0911260f, -0.2224060f, -0.3226575f, +0.1119706f, -0.0483698f,
  -0.1037540f, +0.1126561f, +0.1386646f, +0.0014466f, -0.0735277f, +0.0012676f, +0.1406177f, -0.2847798f,
  -0.1188238f, +0.0005570f, -0.2937504f, -0.2247843f, -0.0861725f, +0.1683045f, +0.2414669f, -0.1240202f,
  -0.0594571f, +0.1357645f, -0.0914539f, +0.2035482f, -0.1091290f, -0.0189584f, +0.0671125f, +0.0923148f,
  +0.1781506f, +0.0045806f, +0.2302726f, -0.0389783f, +0.0155927f, +0.0228907f, -0.2507131f, +0.1038646f,
  -0.0377598f, -0.2092948f, +0.2198540f, -0.2943166f, -0.1839795f, +0.0436866f, -0.1220076f, -0.0734750f,
  +0.0012762f, -0.0771340f, -0.2546790f, +0.0788210f, -0.1995793f, +0.0374145f, +0.3587881f, -0.0939230f,
  -0.0597837f, +0.0798239f, -0.1034023f, -0.0536164f, +0.1351776f, +0.1097495f, +0.2441263f, +0.0637399f,
  -0.0033274f, -0.0472470f, +0.0976873f, +0.2294472f, +0.1359376f, +0.1039855f, +0.1117579f, +0.0250737f,
  +0.0728269f, -0.2421519f, -0.1639683f, +0.0258145f, -0.2434818f, -0.2566462f, +0.2208557f, -0.3244158f,
  -0.0500918f, -0.0797680f, +0.0499836f, -0.0735358f, +0.2544108f, -0.0019544f, -0.2567773f, -0.0831986f,
  +0.0380659f, +0.0620285f, +0.0502095f, -0.0055552f, +0.0055381f, -0.0431068f, -0.1051548f, -0.0365320f,
  +0.1399101f, -0.4162103f, -0.0099708f, +0.3238844f, -0.1237457f, -0.2744084f, +0.2297536f, -0.1915047f,
  +0.3790544f, +0.2377282f, -0.3357345f, -0.2610566f, +0.1197362f, +0.0682065f, -0.3696650f, +0.2642159f,
  -0.2539793f, -0.0296945f, -0.0510673f, +0.1164357f, -0.1795634f, -0.0900660f, -0.0683087f, +0.1967477f,
  +0.0841456f, +0.0635550f, -0.3172051f, -0.0687433f, -0.0936398f, -0.0909504f, -0.2036512f, +0.0970221f,
  +0.0157146f, -0.0794110f, -0.1812178f, +0.1671521f, +0.0245345f, +0.0669639f, +0.0283347f, -0.2430561f,
  +0.0986521f, -0.1224162f, -0.1073252f, -0.1111669f, +0.0202056f, +0.3992943f, -0.0809049f, -0.3405108f
);

const float biases[4] = float[4](
  +0.0229850f, -0.0053198f, -0.0002719f, -0.0247397f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer113 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0195518f, -0.0537744f, -0.1249953f, +0.0853823f, -0.0682072f, +0.2007814f, -0.1389145f, -0.0151830f,
  -0.0445945f, +0.2467645f, -0.0406549f, -0.1566569f, -0.1205869f, +0.3586823f, -0.0262433f, +0.0152502f,
  +0.2349507f, -0.1451995f, -0.0963808f, +0.0619668f, -0.2976617f, -0.1038511f, +0.1142943f, -0.0348321f,
  -0.1303159f, -0.1381685f, +0.1996517f, +0.1241063f, +0.0007017f, +0.1782609f, -0.0377476f, -0.0594025f,
  -0.1651600f, -0.2510732f, -0.0817505f, +0.0546523f, +0.2152020f, -0.1070911f, +0.0988119f, +0.2174642f,
  -0.1130302f, -0.0990223f, +0.1628633f, +0.0071920f, +0.1225244f, +0.0726004f, +0.0652816f, +0.0377171f,
  -0.0586673f, -0.1445209f, -0.0190102f, +0.0939550f, -0.1091854f, +0.1952758f, -0.0015536f, +0.1100525f,
  -0.1441963f, +0.1001043f, +0.1570394f, -0.0617633f, +0.0051828f, -0.0887690f, -0.0411649f, -0.2196582f,
  -0.1290144f, +0.1143704f, +0.1151053f, +0.1009593f, -0.1335700f, -0.1531453f, +0.0796376f, +0.0877086f,
  +0.0147434f, -0.1800413f, +0.0651513f, -0.0780865f, +0.0572987f, -0.0278337f, +0.0070332f, -0.1378750f,
  -0.1272580f, +0.1543469f, +0.2301125f, -0.0390760f, +0.0935002f, +0.1632485f, +0.0688000f, -0.0804416f,
  -0.3616199f, +0.1283440f, +0.1411706f, -0.1704693f, -0.0029927f, -0.1233368f, +0.1209803f, -0.2134506f,
  -0.0065425f, +0.1454753f, -0.1915101f, +0.0897637f, +0.1935754f, +0.1421258f, -0.1075242f, +0.0899496f,
  +0.0183495f, +0.1569040f, -0.0992205f, +0.0117510f, +0.2257220f, -0.0436708f, -0.1865465f, -0.1039073f,
  -0.1228276f, -0.0937709f, -0.1120379f, +0.0534923f, -0.1550086f, -0.1720524f, +0.2136659f, +0.0853175f,
  +0.0055270f, -0.1777943f, +0.1879279f, +0.2305157f, +0.0961131f, +0.1466447f, +0.1513464f, -0.2396706f,
  +0.0453791f, -0.3245464f, +0.0014986f, +0.0897413f, -0.2143473f, -0.1235690f, +0.0772748f, +0.0115752f,
  -0.0318521f, +0.0747394f, +0.2332600f, +0.0968501f, +0.1890601f, -0.1091204f, +0.0384488f, +0.1936543f,
  -0.0097981f, +0.1319000f, -0.0475338f, +0.1421270f, -0.0049617f, +0.1975045f, +0.0223789f, -0.0674531f,
  -0.1319792f, -0.0107558f, +0.0752680f, -0.1357041f, -0.0344769f, +0.0559988f, +0.0198100f, +0.1031651f,
  -0.1458556f, -0.0327387f, +0.5285193f, -0.0934667f, +0.2054972f, +0.1026837f, -0.2157179f, -0.2699908f,
  +0.0928497f, -0.0083942f, -0.3435979f, +0.1567914f, +0.0596478f, +0.0395952f, -0.1767228f, +0.1589304f,
  +0.0840191f, +0.2156600f, +0.1958838f, +0.1022485f, -0.0121225f, +0.0607150f, +0.1936436f, +0.0631038f,
  -0.1794942f, +0.3250962f, +0.0198685f, +0.0174201f, +0.0809317f, +0.1329875f, -0.1075330f, -0.2170541f,
  -0.0667468f, -0.1215049f, -0.0907223f, +0.1910735f, +0.2069902f, +0.0978620f, +0.0223145f, -0.0325693f,
  -0.0043153f, +0.1097419f, +0.1299485f, +0.0487780f, -0.1692048f, -0.1142991f, +0.0202598f, +0.1854888f,
  +0.0553340f, -0.0974876f, -0.1245920f, -0.0285412f, +0.0926104f, +0.0925182f, +0.0690576f, -0.1263606f,
  -0.2901431f, +0.0910070f, +0.0482327f, +0.0782324f, -0.2150756f, +0.1867017f, +0.1205025f, -0.1945606f,
  +0.0092860f, +0.1048840f, +0.0635686f, -0.0932192f, -0.1489046f, -0.1901130f, -0.2372178f, -0.0898100f,
  -0.2881474f, -0.0417643f, +0.1818499f, +0.0082783f, -0.0390862f, -0.0196655f, +0.0240466f, -0.2255487f,
  -0.0943346f, -0.1793082f, -0.0721796f, +0.0366711f, -0.0697577f, +0.1977825f, +0.0339068f, +0.0929984f,
  +0.2566162f, -0.0120980f, +0.1804492f, -0.2594497f, +0.0148258f, +0.3805642f, -0.0233752f, +0.3166985f,
  -0.2266130f, +0.2820357f, +0.0473840f, -0.0749904f, +0.3068719f, -0.0941156f, +0.0650057f, -0.0115643f,
  +0.0313690f, +0.1568510f, +0.0491818f, +0.0967039f, -0.0816368f, +0.0769087f, +0.1197214f, -0.1215924f,
  +0.0630953f, +0.0815094f, +0.0832705f, -0.0562172f, -0.0631990f, -0.1347942f, +0.0498894f, -0.0643376f,
  +0.1225051f, -0.0042780f, +0.1015150f, +0.0543604f, +0.0720669f, -0.2757668f, +0.0745605f, -0.0857373f
);

const float biases[4] = float[4](
  +0.0407914f, +0.0554579f, +0.0234200f, +0.0029207f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer113 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0310543f, +0.0043336f, -0.2135211f, +0.0166495f, -0.1044832f, +0.0364835f, +0.1482532f, -0.2609784f,
  +0.4060470f, +0.1094698f, -0.4954855f, +0.1358274f, +0.0372052f, +0.0147462f, +0.0867783f, -0.1708480f,
  +0.1487888f, -0.1757616f, +0.0106557f, +0.0106233f, -0.3095387f, +0.1395141f, +0.4106982f, +0.0609668f,
  -0.1541992f, +0.0818260f, +0.0363690f, -0.3456065f, +0.3993338f, +0.2230810f, -0.2123965f, +0.1401907f,
  +0.2073994f, -0.1581547f, +0.0673221f, -0.0474556f, +0.2361249f, +0.0367837f, +0.0541736f, -0.0173397f,
  -0.0103818f, -0.0979751f, +0.2275674f, +0.1569377f, -0.0898727f, -0.1003958f, +0.1972897f, +0.2419522f,
  +0.0692462f, +0.1438795f, -0.0655617f, -0.0119683f, +0.0593998f, -0.2017086f, -0.0400182f, +0.1479314f,
  +0.2396219f, +0.0498100f, -0.0490330f, +0.2407746f, +0.1460238f, -0.0368712f, -0.2017851f, +0.0458888f,
  -0.2183315f, -0.1316262f, -0.0311707f, +0.1251696f, -0.0284267f, -0.0135388f, -0.0885313f, -0.0804984f,
  +0.0283679f, -0.1262957f, -0.2536345f, +0.2739419f, -0.2311387f, +0.2774919f, -0.1587328f, +0.1101358f,
  +0.2647082f, +0.2113889f, +0.0887622f, +0.2885003f, +0.1690255f, +0.2258221f, +0.1327532f, +0.2087658f,
  +0.0303132f, -0.2225407f, -0.2057489f, +0.0342560f, +0.3181505f, +0.0518781f, -0.2128577f, +0.2157992f,
  -0.1268469f, +0.1993218f, -0.1671602f, -0.2588435f, +0.2555650f, -0.0173227f, -0.0086467f, -0.2125516f,
  -0.0297185f, +0.0925851f, +0.0473643f, -0.0482406f, +0.3373510f, -0.0017589f, -0.1471579f, -0.1312121f,
  +0.3034959f, -0.2582103f, +0.2230321f, -0.0071734f, +0.1917532f, +0.0328110f, +0.1784659f, +0.1080993f,
  -0.1673909f, +0.3693513f, +0.0273839f, -0.4087918f, -0.0568752f, -0.0682182f, +0.2907096f, +0.4350385f,
  -0.0819302f, +0.0810054f, -0.1466496f, -0.1907299f, +0.1923537f, +0.2616263f, +0.2307744f, -0.1310787f,
  +0.1210186f, +0.0428589f, -0.0253438f, +0.0393906f, +0.2990719f, -0.1408827f, +0.2709528f, +0.0384045f,
  -0.0114110f, +0.0732447f, -0.0537555f, +0.1170111f, +0.0714541f, -0.2191619f, +0.2067260f, -0.2252074f,
  +0.0385875f, +0.0976430f, -0.0141684f, +0.2463397f, -0.2523544f, +0.1190537f, -0.0553725f, +0.1459622f,
  -0.2303508f, -0.0016929f, -0.0236773f, -0.1218551f, -0.0990979f, -0.1074485f, +0.1923296f, +0.1025307f,
  +0.1600408f, +0.0581226f, +0.0834024f, +0.0853479f, +0.0099894f, +0.1011669f, +0.0190917f, +0.0410970f,
  +0.1430466f, -0.1230373f, +0.0051563f, +0.1956132f, -0.2318949f, +0.0379656f, +0.0051371f, -0.0072733f,
  -0.1145125f, -0.2121424f, +0.1015370f, +0.1809717f, -0.0611197f, +0.1534125f, -0.1089687f, -0.1398629f,
  -0.0789026f, -0.0012014f, -0.0320995f, +0.1870940f, -0.2819484f, -0.2120506f, +0.0842431f, -0.2122651f,
  -0.0925934f, +0.0352680f, +0.0148710f, +0.0502559f, -0.1263551f, +0.1368937f, +0.1343319f, -0.0993431f,
  -0.1635068f, +0.0165509f, -0.0602446f, +0.0011295f, -0.1754699f, +0.0424238f, -0.0891202f, +0.0890450f,
  +0.3317759f, +0.1036545f, -0.1746440f, -0.1008543f, -0.3138358f, -0.1521187f, +0.0797263f, -0.0526451f,
  -0.3953781f, -0.2388238f, +0.5011842f, -0.0668090f, -0.0687259f, -0.2503347f, +0.0745389f, +0.0341941f,
  -0.0986324f, -0.0112431f, +0.1794169f, +0.1883927f, +0.3798205f, -0.0735343f, -0.0133173f, +0.0401521f,
  +0.2846335f, -0.3185715f, -0.1551980f, +0.0724000f, -0.0172839f, +0.0421639f, +0.1649968f, +0.1492155f,
  -0.0443389f, +0.1701452f, -0.1247641f, -0.0933604f, -0.0642525f, -0.4571717f, +0.1312829f, -0.0966618f,
  +0.0714187f, -0.2317913f, -0.2741426f, -0.1933277f, +0.1656501f, -0.2088151f, -0.2226139f, -0.1634748f,
  +0.1679012f, +0.1834768f, -0.2751725f, -0.5114997f, +0.3758575f, -0.2030313f, -0.1451781f, +0.1953859f,
  +0.3016036f, +0.1925323f, +0.1615803f, +0.1686359f, +0.2325691f, -0.1771976f, +0.0975717f, -0.0858447f,
  +0.0725583f, +0.2052289f, -0.1759480f, -0.6433406f, +0.4946925f, +0.0368090f, +0.3976484f, +0.3433590f
);

const float biases[4] = float[4](
  -0.0029622f, -0.0729411f, -0.0029755f, +0.0262921f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer114 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0510203f, -0.0988614f, +0.0871456f, +0.0111265f, +0.2467578f, +0.1200909f, +0.3054503f, +0.0941271f,
  +0.0539169f, -0.0286686f, +0.2229762f, -0.2422089f, +0.0467672f, +0.1405868f, +0.3095574f, -0.1026943f,
  +0.0251336f, -0.1038408f, -0.0287405f, +0.0820238f, +0.2353580f, -0.0288064f, +0.0773430f, +0.0992573f,
  +0.0321185f, -0.0876560f, +0.0501772f, +0.1419246f, +0.0256202f, +0.2138803f, +0.3015887f, +0.2356310f,
  -0.1896272f, -0.2063292f, -0.0735183f, +0.0640680f, -0.0267937f, -0.1547059f, -0.1086859f, +0.3552691f,
  -0.3818170f, +0.0697272f, -0.1632169f, +0.0265979f, +0.2574500f, +0.2682513f, -0.2455125f, -0.0581870f,
  -0.2046703f, -0.0011628f, -0.0696909f, +0.0121281f, -0.0775342f, -0.0950372f, -0.0446451f, -0.1877441f,
  -0.0744133f, -0.1866472f, +0.0294293f, -0.0826928f, -0.1311161f, +0.1465375f, -0.2288876f, +0.1328139f,
  +0.0791859f, -0.0048530f, -0.0429162f, +0.1560622f, -0.1042353f, -0.1327003f, -0.0003389f, -0.0305121f,
  +0.0917857f, +0.0797360f, +0.0193988f, +0.0700594f, +0.0291932f, -0.1497971f, -0.1193495f, -0.0022983f,
  -0.0834370f, -0.0632451f, -0.0306397f, +0.0309982f, +0.1355055f, +0.3613727f, +0.0623680f, -0.1331363f,
  +0.2081066f, -0.1736724f, +0.2039905f, +0.1079438f, +0.1448379f, +0.0511824f, +0.1479481f, +0.0026797f,
  -0.2478159f, +0.1812671f, -0.1198248f, -0.1211594f, -0.0070394f, +0.0576828f, -0.1287377f, +0.1382895f,
  +0.0693705f, +0.1308562f, -0.3436435f, -0.1106179f, +0.2258752f, +0.0426527f, -0.0628471f, +0.1567099f,
  +0.1372945f, +0.0632045f, +0.1163679f, +0.1320416f, -0.1242835f, -0.2258436f, +0.1443322f, -0.1037542f,
  +0.3028998f, -0.2272796f, +0.2144536f, +0.0301760f, -0.0176996f, +0.1907798f, +0.1478738f, -0.2126051f,
  -0.0422732f, +0.1055387f, +0.0815803f, +0.2876726f, -0.0326961f, -0.1834105f, -0.0743391f, +0.0705723f,
  -0.0120380f, +0.3164020f, +0.0394111f, +0.0249480f, -0.0202826f, -0.1823342f, +0.1224068f, -0.2638898f,
  +0.0233036f, +0.0981933f, +0.0628789f, -0.1245032f, +0.0528456f, -0.1680795f, +0.0875834f, +0.0132977f,
  -0.1592302f, -0.2227380f, -0.0390365f, +0.1871951f, -0.0018938f, +0.0428317f, -0.0570731f, +0.3397359f,
  +0.0646618f, +0.1729897f, +0.1536782f, +0.2074898f, +0.0160909f, +0.1287262f, -0.1242557f, +0.2031695f,
  +0.0190618f, +0.1664145f, +0.0698176f, +0.0714302f, +0.1503873f, -0.2263593f, +0.0210228f, -0.2664252f,
  -0.0322836f, +0.2312664f, -0.0861410f, -0.2790874f, -0.0031396f, -0.0773099f, -0.1590794f, +0.0489946f,
  -0.1610911f, +0.3901919f, +0.1153615f, -0.0030453f, -0.1983834f, +0.0281373f, +0.0571531f, +0.0014342f,
  +0.1523867f, -0.1498257f, -0.4016362f, +0.1312778f, -0.0950115f, -0.2900548f, +0.2082065f, -0.0355111f,
  +0.0067658f, -0.1605463f, -0.3538921f, +0.2381920f, +0.2718530f, +0.1965743f, -0.1464706f, -0.1363528f,
  -0.1829529f, -0.0267914f, +0.1440443f, -0.0547908f, +0.2202071f, +0.2128266f, -0.2006084f, -0.1079295f,
  +0.0745759f, +0.0669265f, +0.0689820f, +0.1586517f, -0.1493317f, -0.0640570f, -0.1139660f, +0.1052437f,
  +0.1063430f, -0.0108281f, +0.1409285f, -0.0694761f, +0.1480084f, -0.0724966f, -0.0956660f, +0.0948877f,
  +0.1195476f, -0.0562355f, +0.0392382f, +0.1277354f, -0.0281077f, +0.1124045f, -0.0252190f, -0.1217090f,
  -0.0377472f, +0.2516094f, -0.3863007f, +0.1719470f, -0.0566403f, +0.2207463f, +0.0767870f, -0.0415591f,
  +0.1565764f, +0.2343183f, -0.1684075f, -0.1654026f, +0.1907091f, -0.1032715f, -0.2123105f, +0.2188594f,
  +0.5135836f, -0.0201901f, +0.0251597f, -0.2533592f, -0.0003471f, -0.0368633f, -0.1582883f, -0.0167809f,
  -0.0141334f, +0.2764646f, +0.0956381f, -0.2252265f, -0.1210506f, -0.0109775f, +0.1741147f, +0.0978895f,
  +0.0461405f, -0.2718722f, -0.3270698f, -0.3312408f, +0.0006834f, -0.2443904f, -0.2377613f, -0.2085197f,
  -0.1752772f, -0.0726284f, -0.0889971f, +0.0627383f, -0.1259090f, -0.1002539f, -0.2868646f, -0.1982139f
);

const float biases[4] = float[4](
  +0.0379117f, -0.0149674f, +0.0055480f, -0.0150841f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer114 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0792651f, +0.0711434f, -0.0562950f, -0.2224194f, +0.3143925f, +0.2341349f, +0.2791471f, -0.1788535f,
  -0.0214149f, +0.1073915f, -0.0589963f, -0.1423491f, +0.1702259f, -0.1045209f, +0.0227867f, -0.1202444f,
  +0.0658374f, +0.0629633f, -0.2221870f, -0.1878544f, -0.0767001f, -0.3560843f, +0.2613984f, -0.0644065f,
  -0.0488406f, +0.0463209f, +0.0079759f, -0.1285511f, +0.2474962f, -0.0954778f, +0.2142374f, -0.0408328f,
  -0.1322719f, -0.1085069f, -0.0836672f, -0.0643683f, +0.2332579f, -0.3364875f, +0.3053388f, -0.1723219f,
  -0.0671438f, -0.0498073f, -0.4339721f, +0.1101148f, -0.1450323f, -0.0007725f, +0.1003742f, +0.0460614f,
  -0.1227271f, +0.0685350f, +0.0287842f, -0.1997053f, +0.0595804f, +0.0887297f, +0.0155179f, -0.0031188f,
  +0.1183962f, +0.0201555f, +0.0279076f, +0.3107768f, -0.0470590f, -0.1446411f, +0.0688268f, -0.3297167f,
  +0.0595772f, -0.3060291f, -0.2830519f, +0.1097093f, +0.0130212f, +0.0809404f, -0.0328379f, +0.1529043f,
  +0.2248693f, +0.2424085f, -0.1121882f, +0.1189086f, +0.0406091f, -0.1294498f, +0.0843900f, +0.0071843f,
  +0.0364540f, -0.1213772f, +0.0521782f, +0.0258658f, +0.1834431f, +0.1850815f, -0.1015485f, +0.1219286f,
  +0.0358619f, -0.0368889f, +0.0876542f, -0.0282848f, +0.2557484f, +0.3814577f, +0.3398821f, -0.2106232f,
  +0.1378152f, -0.1767378f, +0.0794136f, -0.0634484f, +0.1188954f, -0.0227215f, -0.0593298f, +0.1410339f,
  -0.2417298f, +0.0947316f, -0.1829525f, +0.0136495f, -0.1060699f, +0.1755856f, -0.0424042f, -0.0272915f,
  +0.0863834f, +0.0142790f, -0.1774528f, -0.2611164f, +0.1482126f, +0.2386455f, -0.1294393f, -0.0227123f,
  +0.1369488f, -0.3358616f, +0.0706569f, +0.1743721f, -0.0026214f, +0.0356612f, -0.1858870f, +0.0439357f,
  +0.0567109f, +0.0839998f, -0.3038984f, +0.1647560f, +0.3414575f, -0.1498449f, +0.0918933f, -0.0285227f,
  -0.0113113f, -0.0026658f, -0.1764389f, +0.0552002f, +0.1208547f, +0.1109046f, -0.0426380f, +0.1869887f,
  -0.0915164f, -0.0753696f, -0.0252883f, -0.1036666f, -0.1208944f, -0.0217602f, +0.0257665f, -0.0722320f,
  +0.0213970f, +0.0071610f, -0.0176073f, -0.1475573f, +0.0259823f, -0.1453689f, -0.0158427f, +0.0266962f,
  +0.1411351f, +0.0114623f, -0.2052590f, -0.0189491f, -0.0226565f, -0.1830251f, +0.0514917f, +0.3075495f,
  -0.0484464f, +0.0203747f, +0.1549828f, +0.1383937f, -0.1008296f, +0.1198528f, +0.1822637f, -0.1068642f,
  +0.0812458f, +0.2689772f, +0.1572210f, +0.0451729f, -0.2680185f, +0.1720458f, +0.0299324f, +0.1300395f,
  +0.0664268f, +0.2019797f, -0.1170869f, +0.2624575f, +0.2250377f, +0.1623726f, +0.0435009f, +0.0621083f,
  -0.1864157f, -0.0000245f, -0.0027758f, +0.1567784f, -0.1682219f, -0.4394246f, +0.0266283f, -0.0331906f,
  -0.2567950f, -0.2297208f, -0.0342833f, -0.0562136f, +0.0780250f, -0.1515395f, -0.0192890f, -0.0882927f,
  +0.1059835f, -0.1000992f, +0.0548547f, +0.0352803f, -0.0431875f, +0.0580257f, -0.1683364f, -0.1249969f,
  +0.0889871f, +0.2310226f, +0.1674127f, -0.0383245f, +0.1543844f, +0.0244760f, -0.0189958f, +0.0655927f,
  +0.1884821f, +0.0094518f, -0.3104662f, -0.0746446f, -0.0080464f, +0.0464789f, -0.1120693f, +0.0525742f,
  +0.1074440f, -0.0511212f, +0.1729016f, +0.0867226f, -0.1551458f, -0.3030542f, +0.0246091f, -0.0720431f,
  -0.1626669f, -0.1172995f, +0.1604720f, -0.1174072f, +0.0697784f, +0.1336584f, +0.0844626f, -0.2219895f,
  +0.1311990f, -0.1231852f, -0.0677246f, +0.1027857f, +0.0774495f, +0.2577189f, -0.2309188f, -0.1549713f,
  +0.1286978f, -0.2467142f, -0.0375239f, -0.1265237f, -0.2382548f, -0.0323789f, -0.0584460f, +0.0896517f,
  -0.0491020f, +0.1460408f, +0.1908086f, +0.2646629f, -0.2184896f, -0.3158026f, +0.1773177f, +0.1174519f,
  -0.0997170f, +0.3081306f, -0.0210186f, -0.2633881f, +0.0889268f, -0.1222564f, -0.0885932f, -0.2260666f,
  -0.0704002f, -0.0832869f, +0.0175018f, +0.0812597f, -0.1618780f, -0.1783749f, +0.3938033f, +0.0249814f
);

const float biases[4] = float[4](
  -0.0008095f, -0.0013607f, +0.0082527f, -0.0217900f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer115 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1877356f, +0.0128654f, -0.1135453f, -0.0340433f, -0.0117080f, +0.1912423f, -0.1162448f, +0.1529021f,
  +0.0006642f, -0.0617838f, +0.0432543f, -0.2928542f, +0.2479967f, -0.0201549f, -0.3133138f, -0.0235645f,
  +0.0368797f, -0.0075958f, -0.0414522f, +0.1146038f, -0.0162436f, +0.1497575f, +0.0346982f, -0.0058422f,
  +0.1154757f, +0.0913415f, -0.0908734f, +0.0297398f, -0.0563365f, +0.0032163f, -0.2710353f, -0.2090589f,
  +0.2335474f, -0.3145777f, -0.2474695f, +0.0217147f, -0.0842641f, +0.1233589f, +0.1462036f, +0.0630871f,
  -0.0923902f, +0.1489194f, +0.0175994f, +0.0099108f, +0.0193786f, -0.3355772f, -0.0508777f, -0.3109110f,
  -0.2370668f, -0.1716556f, -0.0589891f, -0.0949580f, -0.0802657f, +0.0243080f, -0.3234162f, -0.1684248f,
  -0.3405108f, -0.0558609f, -0.0619664f, -0.1630424f, +0.2634855f, -0.0125655f, +0.1174141f, +0.0346243f,
  -0.1905274f, +0.1295579f, +0.0362443f, +0.0236055f, +0.1011065f, -0.0720817f, -0.1843288f, -0.1094328f,
  +0.0432608f, -0.2593652f, +0.0555754f, +0.0963631f, -0.0492751f, +0.2550624f, -0.0794226f, +0.0748590f,
  +0.3663339f, +0.0207566f, +0.0192305f, +0.2145845f, +0.0412890f, -0.1318635f, -0.1745298f, +0.0199875f,
  +0.0675197f, +0.0497372f, +0.2854149f, -0.0140567f, +0.0786095f, +0.0068382f, -0.0452926f, -0.0173916f,
  +0.1568037f, +0.2713090f, -0.1060162f, -0.2548566f, +0.1761395f, +0.0690775f, +0.0241109f, -0.1664090f,
  -0.0658669f, -0.0901066f, +0.1755302f, -0.3029355f, +0.2189819f, +0.0343478f, +0.3074802f, -0.2839464f,
  -0.0048088f, -0.1877281f, -0.0531267f, -0.0657754f, +0.2442328f, -0.0212081f, -0.0000347f, -0.2578326f,
  +0.0984278f, +0.0701957f, +0.0872807f, -0.0798781f, -0.0161350f, -0.1870127f, +0.0997545f, -0.1673355f,
  +0.0165338f, +0.0896917f, +0.1734612f, +0.1005066f, -0.2025511f, +0.0642290f, +0.2476167f, +0.0608805f,
  +0.0507346f, -0.2937746f, +0.4230205f, +0.0517122f, -0.1913235f, +0.1783868f, +0.1497012f, +0.0951993f,
  -0.0063021f, -0.1963340f, +0.0325398f, -0.0585591f, -0.0426499f, -0.0483751f, +0.0930368f, +0.1225044f,
  +0.0754893f, -0.2392006f, +0.0373738f, -0.0048799f, +0.1424194f, -0.1461635f, +0.0357689f, +0.0038036f,
  -0.4050038f, -0.0411892f, +0.0536304f, +0.0705413f, -0.1091488f, +0.0451581f, +0.1225983f, -0.1500750f,
  +0.2147648f, -0.1243829f, +0.2179858f, -0.0637099f, -0.0126503f, -0.0092762f, -0.0503127f, -0.0116696f,
  +0.0695409f, -0.0827289f, +0.1695532f, +0.0785267f, +0.2050869f, +0.0313545f, +0.1741211f, -0.3221524f,
  -0.3276062f, -0.1990484f, +0.0940050f, -0.2005201f, -0.1062344f, -0.3388756f, -0.0592303f, -0.0292089f,
  -0.1421514f, +0.1424406f, -0.0129256f, +0.2443407f, +0.1643119f, +0.0966555f, -0.0029959f, -0.0808266f,
  -0.1479034f, +0.1497168f, +0.1659340f, +0.1248612f, +0.0537367f, +0.0637955f, +0.2160652f, -0.1571771f,
  -0.0384873f, -0.0520528f, +0.0847236f, +0.0883615f, +0.0048566f, -0.0129990f, +0.1867173f, -0.0849629f,
  -0.0092957f, -0.0649817f, +0.1593263f, +0.1007569f, -0.1854721f, +0.1881515f, -0.0715670f, -0.1486922f,
  -0.0617001f, -0.1814595f, -0.1130928f, -0.0805859f, -0.1381888f, -0.0629746f, -0.0162435f, -0.0653567f,
  +0.0647488f, +0.2527224f, -0.0642041f, +0.0069714f, -0.0759012f, -0.1038473f, +0.0345197f, -0.0007635f,
  +0.1166284f, -0.0673379f, -0.1232331f, -0.2455253f, +0.2505326f, +0.0374666f, -0.1314450f, -0.0479347f,
  -0.2578083f, +0.3401787f, -0.1821874f, +0.0894165f, -0.0549860f, -0.0813707f, -0.1263168f, -0.1625284f,
  +0.0376432f, +0.1294014f, +0.0959826f, +0.0447505f, -0.0763630f, -0.1235155f, +0.2058215f, +0.1270504f,
  -0.1292916f, +0.0195336f, -0.1040366f, +0.3183646f, -0.2048812f, +0.0258370f, +0.0393816f, +0.0393295f,
  -0.1469188f, -0.0873905f, +0.0795396f, +0.1598702f, -0.1066687f, +0.0503618f, -0.3672861f, +0.0639301f,
  +0.0744955f, +0.0674737f, -0.2904352f, -0.0936527f, -0.3459442f, -0.1654353f, -0.1934903f, -0.0851285f
);

const float biases[4] = float[4](
  +0.0050455f, -0.0695477f, +0.0197470f, -0.0040383f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer115 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0832625f, -0.3376265f, -0.0596982f, +0.1515274f, +0.0956144f, +0.1413613f, +0.0664695f, +0.1569484f,
  -0.0615116f, +0.0523556f, -0.0522466f, -0.0419158f, -0.1239483f, -0.0604756f, +0.3493131f, -0.0144929f,
  +0.2171053f, +0.0969041f, +0.0871902f, -0.0721557f, -0.1434035f, +0.1775169f, +0.3085743f, +0.3001336f,
  -0.0793124f, -0.0332343f, -0.1436716f, +0.1806095f, +0.1883720f, +0.0628962f, +0.2320267f, +0.0253676f,
  -0.1024209f, -0.2247391f, -0.1493235f, +0.2847720f, +0.0989436f, +0.0157338f, +0.0790962f, +0.1787650f,
  +0.1326440f, -0.2094608f, -0.1016292f, +0.1368103f, -0.0143379f, +0.1624794f, +0.1086109f, +0.3300244f,
  +0.0448169f, -0.2221840f, +0.0223984f, +0.1388721f, +0.1224957f, -0.0346633f, +0.0122722f, -0.1578206f,
  -0.1545333f, +0.0863219f, +0.0520340f, -0.0309881f, -0.0402295f, +0.0496348f, +0.0002593f, +0.1730977f,
  +0.0861995f, +0.0210096f, -0.0687194f, -0.0419065f, -0.0540690f, -0.0753455f, +0.0684062f, +0.1532203f,
  -0.0237985f, +0.0128377f, -0.0262382f, +0.1878882f, -0.2108416f, +0.0940691f, -0.0179369f, +0.0559630f,
  -0.0370493f, +0.1160954f, -0.0358715f, -0.0355870f, -0.0872459f, -0.1030317f, +0.0743940f, +0.0858955f,
  +0.0081733f, +0.0605014f, -0.0056999f, +0.0417311f, +0.0176638f, -0.0587446f, -0.1067888f, -0.0540465f,
  -0.1308802f, -0.1141928f, +0.0253151f, +0.0808701f, -0.3714338f, -0.0035016f, -0.0192245f, -0.1424639f,
  -0.1121893f, -0.1086851f, -0.1144500f, -0.0511428f, -0.0558602f, -0.1161964f, -0.0336659f, -0.0687532f,
  +0.2114191f, +0.0951364f, -0.1153106f, +0.2584471f, +0.0778482f, +0.0112688f, -0.0588643f, +0.1871108f,
  -0.1744274f, +0.2296378f, +0.1507210f, -0.0006581f, -0.0571176f, -0.2936150f, -0.0578437f, -0.1966886f,
  +0.1202615f, +0.0503778f, -0.0515266f, -0.0323227f, -0.1345335f, +0.3271843f, +0.0357145f, +0.0963725f,
  -0.2244516f, -0.0815770f, -0.0254549f, -0.0670608f, +0.0217918f, +0.0880088f, -0.0887760f, -0.1381526f,
  -0.3571240f, +0.1526829f, -0.3309574f, +0.0758853f, +0.1434334f, -0.0793984f, +0.2484309f, +0.1359175f,
  -0.0207162f, +0.3633673f, +0.0755848f, -0.1907005f, +0.1483665f, -0.1862687f, -0.0327065f, -0.3711706f,
  +0.2051212f, +0.0629749f, +0.1141539f, +0.0214513f, -0.1795800f, -0.0365634f, +0.1781470f, -0.1709674f,
  +0.1728574f, +0.2147353f, -0.1210169f, +0.2039927f, -0.0759585f, -0.0348964f, +0.3917507f, -0.2605989f,
  -0.3165494f, -0.2045253f, +0.1906443f, -0.0442751f, -0.1302872f, -0.0959720f, +0.3935624f, +0.1809035f,
  +0.1724465f, +0.1193179f, -0.1032390f, -0.2242256f, -0.0805227f, -0.0755310f, +0.2562581f, +0.2248358f,
  -0.0306388f, +0.0533427f, +0.1877478f, -0.2407105f, +0.1608627f, +0.0425548f, -0.1181400f, +0.0405299f,
  -0.0892625f, +0.0510533f, -0.0886651f, +0.2137080f, +0.0759962f, -0.2733594f, +0.1354453f, -0.3749723f,
  -0.1944119f, -0.2534457f, +0.0959269f, +0.0380103f, -0.0821602f, -0.0179513f, -0.0447096f, -0.0723854f,
  +0.3091584f, -0.1716189f, -0.1771102f, -0.0250097f, -0.1113589f, -0.0430738f, +0.0283691f, +0.3079663f,
  -0.1920095f, +0.1477422f, +0.0019322f, -0.1685057f, -0.0029517f, +0.1464588f, +0.1611629f, -0.1221061f,
  +0.0174269f, +0.0395688f, -0.1077361f, -0.0456030f, -0.0857706f, -0.0564501f, +0.1926174f, -0.1265871f,
  -0.1893408f, +0.4549509f, -0.0143075f, -0.0654199f, -0.0908433f, -0.1114738f, -0.3928742f, -0.3205899f,
  +0.1365933f, +0.1192718f, -0.2558095f, +0.1211070f, -0.2294800f, +0.1283687f, -0.2262011f, -0.0064309f,
  +0.2450632f, -0.0300250f, -0.0107271f, -0.0756589f, -0.1798246f, +0.1518990f, -0.1441447f, +0.0309496f,
  -0.0190283f, +0.0143911f, +0.0909929f, -0.0404560f, -0.0023677f, +0.2252202f, +0.0044468f, -0.1101891f,
  -0.3561294f, -0.1916184f, +0.0297224f, +0.0861040f, -0.0064994f, -0.1194422f, -0.1612685f, -0.1961987f,
  -0.0674614f, -0.1404061f, +0.1277108f, -0.1273688f, -0.1789447f, +0.1982503f, -0.0242706f, -0.0814360f
);

const float biases[4] = float[4](
  +0.0118547f, +0.0010229f, +0.0586448f, +0.0102519f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer116 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0648408f, +0.2403163f, +0.1374426f, +0.0758927f, +0.1495243f, -0.0957569f, +0.1199477f, +0.0342109f,
  +0.1368694f, +0.1376719f, -0.2769584f, +0.3159534f, +0.1811236f, -0.0149235f, +0.0026350f, +0.1311206f,
  +0.2579908f, -0.0392384f, -0.0716048f, -0.0472597f, +0.0826485f, -0.2442170f, +0.0654981f, +0.0328275f,
  +0.1368990f, -0.3976426f, +0.1651607f, -0.0450476f, +0.0244857f, -0.1636492f, -0.1333817f, +0.0601162f,
  -0.1207549f, +0.2122176f, +0.0741064f, -0.0170258f, +0.0079488f, +0.2589402f, -0.0003206f, +0.1043126f,
  -0.2739317f, +0.1237793f, +0.0244300f, +0.2845010f, +0.0344641f, +0.0567673f, -0.0305485f, +0.0239738f,
  -0.1590971f, -0.2041532f, +0.1969607f, -0.2124196f, +0.0226450f, -0.2274754f, -0.0087585f, +0.2449414f,
  +0.1888076f, +0.2354308f, -0.0480232f, +0.1451757f, -0.0646595f, -0.1830589f, -0.0055392f, -0.1426014f,
  -0.0767866f, +0.0078367f, +0.1469664f, -0.0586279f, -0.0343638f, +0.3674721f, +0.1760726f, -0.0647443f,
  +0.2757772f, +0.1882720f, -0.0192042f, -0.3121470f, +0.0182366f, +0.0976906f, -0.0362407f, -0.0073831f,
  +0.0045451f, +0.0382612f, +0.0784137f, -0.0593174f, -0.0859602f, +0.0332286f, -0.1024621f, +0.1630275f,
  +0.0152426f, -0.0915599f, +0.0822968f, -0.2817678f, -0.2427376f, -0.0948749f, -0.1373624f, -0.0336231f,
  -0.0883766f, +0.0624928f, +0.2969988f, +0.0357871f, -0.2931550f, +0.0093377f, +0.1190432f, +0.2232308f,
  -0.2689699f, +0.0603151f, +0.0761347f, -0.4787727f, +0.0162485f, -0.0302776f, +0.1600031f, -0.2086878f,
  +0.1320849f, +0.0279549f, -0.0206075f, -0.0908873f, -0.1584727f, -0.1158113f, +0.1617531f, -0.0111548f,
  -0.0427593f, +0.1938225f, +0.0063128f, -0.0445282f, -0.0639786f, -0.0060100f, -0.0324072f, +0.1294864f,
  +0.0829235f, +0.1189348f, +0.1588522f, +0.2083411f, -0.2924655f, -0.1887451f, +0.0697569f, -0.0624766f,
  +0.0256900f, +0.3083281f, +0.2240148f, -0.0332299f, +0.0755057f, -0.1588248f, -0.0729885f, +0.0119356f,
  +0.0241970f, -0.0588122f, -0.3134491f, +0.1649316f, -0.0236369f, -0.0912879f, -0.1192372f, +0.0403816f,
  -0.0557214f, -0.1144905f, +0.0208316f, +0.0103761f, +0.0843381f, +0.0185110f, -0.0786772f, +0.0733110f,
  -0.2981513f, -0.0748489f, -0.1920114f, -0.0395228f, -0.0135003f, -0.0026177f, -0.1182440f, +0.1890225f,
  -0.1307687f, -0.3252507f, -0.2217907f, -0.0196466f, +0.2611735f, -0.2206195f, -0.0436807f, +0.1248470f,
  +0.2109287f, -0.1833515f, -0.0726542f, +0.1771350f, +0.2476161f, +0.2294956f, +0.1828971f, +0.2823266f,
  -0.3370963f, -0.2406489f, -0.2589110f, +0.2046520f, -0.1226815f, -0.1465202f, +0.0568565f, -0.0838439f,
  -0.2147783f, +0.0817519f, +0.1320553f, +0.0446247f, +0.0950868f, -0.2154596f, +0.0837164f, +0.2421314f,
  -0.2457017f, +0.1774798f, -0.1108897f, +0.2061904f, -0.1443096f, +0.0192542f, +0.1971703f, +0.1216906f,
  +0.0092205f, +0.1288298f, -0.1288849f, +0.0227407f, -0.1273473f, -0.1241479f, -0.1461601f, -0.0107047f,
  -0.2120208f, +0.1067564f, +0.0173539f, +0.0717198f, -0.0786475f, +0.0525347f, -0.1477682f, -0.0485451f,
  -0.0744881f, -0.0608926f, -0.2507041f, -0.0970166f, -0.2019663f, -0.0979405f, +0.1424048f, -0.1043472f,
  +0.0696827f, +0.0391482f, +0.1035871f, +0.0929882f, -0.0459049f, -0.1329792f, +0.0703018f, +0.1621387f,
  +0.0787751f, +0.1452647f, -0.1537671f, +0.1013509f, -0.1063674f, -0.1395666f, +0.0458141f, -0.0291628f,
  +0.1878671f, -0.1580065f, -0.2642382f, +0.0730368f, -0.1376326f, +0.0994231f, +0.1115357f, -0.0724731f,
  -0.3466926f, -0.0054328f, -0.0995896f, +0.1253923f, -0.1399123f, -0.1041802f, -0.0100430f, -0.0980330f,
  +0.0472971f, +0.1887588f, +0.1313480f, +0.1089368f, +0.1025756f, +0.0341029f, +0.1646811f, +0.0062187f,
  +0.0926376f, +0.1353349f, -0.1442662f, +0.0582018f, -0.0344399f, +0.0193378f, +0.0916450f, +0.0621894f,
  -0.2001261f, -0.3554690f, +0.0227566f, -0.0519030f, +0.1503817f, +0.0629419f, -0.0778170f, +0.0769115f
);

const float biases[4] = float[4](
  -0.0048672f, -0.0327129f, +0.0252164f, -0.0240684f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer116 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1608904f, +0.1198021f, -0.0294029f, +0.1003642f, -0.0605249f, +0.0402819f, +0.3087094f, +0.0557745f,
  -0.1996697f, +0.0884893f, +0.0204582f, +0.0916792f, -0.2213216f, -0.0588719f, +0.0130066f, +0.3189561f,
  +0.1160718f, +0.0250099f, -0.1527026f, +0.0826053f, -0.0764804f, -0.2254457f, +0.0471042f, -0.1151146f,
  +0.1543793f, +0.2631440f, +0.0425836f, -0.0817199f, -0.1169456f, +0.0341650f, +0.0148861f, +0.3486376f,
  +0.0470706f, +0.0786617f, -0.0715017f, -0.0841000f, -0.1242823f, -0.4606884f, -0.1925949f, +0.0706725f,
  +0.1349989f, +0.1749955f, -0.6276748f, -0.1666940f, -0.1668449f, +0.1050760f, +0.0533330f, +0.0009622f,
  -0.0230277f, +0.0967219f, +0.1921626f, +0.0528611f, +0.0394024f, +0.1234386f, +0.0331410f, +0.1260702f,
  +0.1987321f, +0.2537864f, -0.0350301f, -0.0171986f, -0.0647074f, +0.1888830f, -0.1877695f, +0.1099541f,
  +0.0054068f, +0.1401100f, -0.2863677f, +0.1709833f, -0.0456676f, +0.2810511f, -0.1668304f, +0.2066822f,
  +0.0496765f, -0.0891274f, -0.0831985f, +0.2473481f, +0.1848698f, -0.1452038f, +0.0934498f, -0.0626618f,
  +0.2706616f, +0.0845630f, -0.1226568f, -0.2324728f, -0.0088945f, +0.0043148f, +0.1063206f, +0.2330965f,
  -0.0129083f, -0.0913504f, +0.0185078f, +0.0087333f, -0.1679314f, +0.2836147f, +0.0506474f, -0.0236068f,
  +0.0121077f, -0.2753271f, +0.0334819f, +0.0699343f, -0.1428818f, -0.4933690f, +0.1093202f, +0.0509640f,
  -0.1171000f, +0.1518252f, -0.1842818f, +0.0475800f, -0.2533999f, -0.0977568f, -0.0451410f, -0.1703487f,
  -0.1048944f, +0.2082837f, +0.0381476f, -0.0665966f, -0.1408361f, +0.2865867f, -0.0872567f, -0.0599316f,
  +0.0084091f, +0.0454860f, -0.0228706f, +0.0499656f, +0.0041705f, +0.1020033f, +0.1307200f, -0.1211035f,
  +0.1927281f, -0.0010356f, -0.0271662f, -0.0272836f, -0.0200016f, +0.0644175f, -0.0796666f, +0.1118411f,
  -0.2365520f, +0.0226270f, -0.0727690f, +0.0726790f, +0.0636091f, +0.0005165f, -0.0186838f, +0.2610230f,
  +0.0576086f, -0.0879552f, +0.0665997f, +0.0877552f, +0.1806041f, +0.1345396f, -0.0376958f, -0.1111520f,
  +0.0186696f, -0.0624671f, -0.0934835f, +0.1947615f, +0.0966646f, +0.3555557f, +0.1326824f, +0.1571110f,
  +0.1465065f, -0.0854783f, -0.0024228f, +0.4219838f, -0.1712391f, -0.0166750f, +0.0577600f, +0.0484043f,
  +0.0486238f, +0.2733058f, +0.0946872f, -0.0519257f, +0.2184068f, +0.1117806f, -0.2699124f, +0.0016948f,
  +0.1762656f, -0.1070678f, +0.0969948f, -0.1740448f, +0.1417439f, +0.3686929f, +0.0989326f, +0.0431840f,
  +0.3763430f, -0.0594032f, +0.0982087f, +0.1273445f, -0.0022365f, -0.0865849f, -0.0386580f, +0.3900048f,
  +0.0325021f, +0.1294217f, +0.0004678f, +0.0907094f, -0.1603609f, -0.1045727f, +0.0620280f, -0.1824506f,
  +0.0283093f, -0.0324891f, +0.1691068f, -0.0957014f, +0.0188438f, -0.0714059f, -0.0686632f, -0.0691250f,
  +0.1104864f, -0.2558413f, -0.3320794f, +0.0302946f, +0.0293329f, -0.1535674f, -0.1674093f, +0.0079534f,
  +0.0773600f, +0.2558727f, +0.2272606f, +0.1765289f, +0.0480474f, +0.3378286f, +0.3443238f, +0.0832791f,
  +0.2115846f, +0.0665457f, +0.1266898f, +0.0937593f, -0.0385432f, +0.2320191f, +0.0059783f, +0.2050028f,
  +0.2654378f, -0.0731096f, +0.1981575f, +0.0053683f, -0.1064990f, +0.2522734f, -0.0042309f, -0.0638492f,
  -0.1709119f, -0.0379480f, +0.0060778f, -0.2120026f, -0.2293749f, -0.2682290f, -0.2338041f, -0.0068351f,
  -0.1821321f, -0.0670821f, +0.1165733f, +0.0779233f, -0.1823707f, +0.1546143f, -0.2374139f, +0.2493083f,
  +0.1811018f, +0.2038724f, -0.1751878f, -0.0618371f, +0.0019066f, -0.1862640f, +0.1483428f, -0.0875161f,
  +0.0118349f, -0.4017852f, +0.1169794f, -0.1515763f, -0.1565660f, +0.3382756f, -0.0757350f, +0.3000053f,
  -0.0223214f, -0.0704979f, +0.2060038f, +0.2555135f, -0.0611419f, -0.1098545f, -0.0220429f, +0.1142343f,
  -0.1080961f, +0.0641261f, -0.1482161f, -0.0791485f, +0.2187025f, -0.0140284f, -0.0085210f, +0.0075608f
);

const float biases[4] = float[4](
  -0.0083694f, +0.0213189f, +0.0045094f, +0.0033770f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer117 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0289904f, -0.1017068f, -0.2800721f, -0.0395192f, -0.3102774f, +0.0568205f, +0.0095205f, -0.0803752f,
  -0.1542044f, -0.2342676f, +0.1400669f, -0.1489094f, -0.0721147f, -0.1232144f, -0.3148603f, +0.0588597f,
  -0.0843971f, -0.0812082f, -0.2243904f, -0.1286298f, +0.0523932f, +0.0257334f, +0.1164289f, -0.0318611f,
  -0.2546835f, +0.1144102f, -0.1897490f, +0.0312344f, -0.1746019f, +0.0118140f, -0.0159449f, -0.0489364f,
  -0.1082780f, -0.0523360f, +0.1774851f, +0.2020550f, -0.1956650f, -0.0136368f, +0.2642542f, +0.0168225f,
  +0.0222640f, -0.0763965f, +0.2928027f, -0.0605752f, +0.0726927f, -0.0409617f, +0.0308430f, +0.0186454f,
  +0.2036668f, +0.1859560f, -0.0428638f, +0.0262987f, -0.2748376f, -0.3016094f, -0.0820248f, -0.0694229f,
  -0.0139694f, -0.0771284f, +0.0873065f, +0.2025457f, +0.0515714f, -0.0699756f, -0.1282903f, +0.1577624f,
  -0.0893469f, +0.1473639f, -0.3173648f, -0.0279223f, -0.0264546f, +0.0600637f, -0.2348220f, -0.1436417f,
  -0.0526525f, -0.0340427f, -0.1863932f, +0.1572198f, +0.1586938f, +0.1904649f, -0.0876804f, +0.0537645f,
  -0.0473513f, +0.0018121f, -0.1644327f, -0.0109179f, +0.0281282f, +0.2371721f, -0.1126126f, +0.0893389f,
  +0.0981203f, +0.0054544f, -0.3196186f, -0.0775105f, +0.0953786f, +0.1362227f, -0.1951337f, -0.1121989f,
  -0.1125005f, +0.2283977f, +0.1985706f, -0.0238363f, -0.0466282f, +0.0261949f, -0.0836097f, -0.1229787f,
  -0.0552897f, -0.1687694f, -0.1450260f, +0.1118269f, -0.2111935f, +0.2598814f, -0.2229735f, +0.0210550f,
  -0.5567228f, +0.0544610f, -0.0644701f, -0.0497890f, -0.0619109f, +0.1062645f, -0.1000790f, +0.1402712f,
  -0.0176401f, -0.1678564f, -0.0786329f, -0.1486505f, +0.1124443f, +0.0692835f, +0.1164000f, +0.1405751f,
  -0.0774944f, +0.1924110f, -0.0143250f, +0.0242431f, +0.0310848f, -0.0965512f, -0.0032058f, -0.1882470f,
  -0.0959488f, -0.3264257f, -0.0884918f, -0.1318222f, -0.0175350f, -0.0021388f, -0.1046647f, -0.0687917f,
  +0.0304557f, +0.0732713f, +0.1281836f, -0.0640163f, -0.0133852f, -0.2398318f, +0.0346378f, -0.1785766f,
  +0.0326260f, +0.1190957f, -0.1367389f, -0.0005869f, +0.0660578f, +0.0524188f, -0.1825259f, +0.1944246f,
  -0.0407500f, -0.1836943f, -0.0499954f, -0.1162253f, +0.2208816f, -0.1580192f, -0.2261055f, -0.3127670f,
  +0.0284814f, -0.1359518f, +0.1816973f, -0.1000611f, -0.0044136f, -0.1655941f, +0.0487656f, +0.0464351f,
  -0.0838192f, -0.1519881f, +0.0416883f, +0.1122452f, +0.1544889f, +0.0149567f, -0.0675906f, -0.3471974f,
  +0.0614544f, -0.1001020f, -0.4000683f, +0.2166976f, -0.1663995f, +0.1507195f, -0.1307948f, -0.0753987f,
  +0.2301433f, -0.0805696f, -0.1265647f, -0.0343168f, +0.2226672f, -0.0584716f, +0.1612512f, +0.1595938f,
  -0.1090902f, +0.0322522f, +0.1055424f, -0.1171215f, +0.1206245f, +0.2550971f, +0.0675669f, +0.0679493f,
  -0.0139501f, -0.3383375f, -0.1812562f, -0.0177217f, +0.2856460f, -0.0817955f, +0.1629606f, +0.0123291f,
  -0.1330823f, +0.0389292f, -0.2605814f, -0.0307648f, -0.1406668f, +0.1602431f, +0.0784098f, +0.0765291f,
  +0.0482778f, -0.0561338f, +0.1199178f, +0.1429332f, +0.1323988f, +0.1179172f, -0.0074584f, +0.2813047f,
  -0.0559155f, -0.1132291f, +0.1945844f, +0.0252188f, +0.0612005f, -0.1960753f, -0.0603659f, +0.0227606f,
  -0.0588085f, -0.0741884f, -0.0044494f, +0.0235067f, -0.1218228f, -0.2592468f, -0.1205797f, -0.0235475f,
  -0.0198964f, +0.0982049f, +0.2857260f, +0.0284127f, -0.1006083f, +0.1991560f, -0.0343048f, +0.0341921f,
  -0.1190001f, +0.1355480f, +0.1391460f, -0.0833468f, -0.0556176f, +0.2074435f, +0.0398856f, -0.1488822f,
  +0.0478434f, +0.0565993f, -0.0379922f, -0.1429980f, +0.0668310f, +0.0547510f, +0.0864213f, +0.0569071f,
  -0.0207828f, -0.0785194f, +0.1846501f, -0.1230835f, -0.0798856f, -0.2670282f, +0.3284109f, -0.1280123f,
  -0.0426329f, +0.1687223f, +0.1675715f, +0.2542068f, -0.0132727f, +0.1145127f, +0.0224987f, -0.0071797f
);

const float biases[4] = float[4](
  +0.0493217f, +0.0513475f, +0.0190834f, +0.0208593f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer117 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1435159f, +0.3247257f, -0.0777877f, +0.1187232f, -0.0437662f, +0.0548473f, -0.0518106f, -0.0510998f,
  +0.3264440f, -0.1994014f, -0.6044294f, +0.0633201f, +0.3155673f, -0.1680656f, -0.2557221f, +0.0098314f,
  -0.0859208f, +0.0460385f, -0.6904992f, -0.1954014f, +0.2828130f, -0.3295268f, +0.0959892f, -0.0477924f,
  +0.1044922f, -0.2630279f, +0.2420348f, -0.0016930f, -0.0851814f, -0.0615472f, +0.0890122f, -0.1552998f,
  -0.2363282f, -0.1550673f, -0.1059279f, +0.0543118f, +0.1058621f, +0.1815548f, +0.0724319f, -0.0866387f,
  +0.2766436f, +0.0083153f, -0.1446233f, -0.0001252f, -0.0395214f, +0.1045718f, -0.1917261f, +0.2286490f,
  +0.0792326f, +0.1382227f, -0.1275732f, +0.2443360f, +0.0947925f, -0.0989020f, +0.1224147f, -0.0072307f,
  +0.0113688f, -0.4799089f, -0.1394434f, -0.1108033f, +0.1852092f, -0.1393068f, -0.0363367f, +0.2609650f,
  -0.1171067f, -0.2810241f, -0.2136287f, +0.1205392f, +0.1957147f, +0.1247126f, +0.0220447f, +0.1417592f,
  +0.4521815f, +0.1262527f, +0.0342785f, -0.0451061f, +0.0962593f, +0.0117774f, -0.1004344f, +0.0546615f,
  +0.1032030f, -0.2105431f, +0.2002233f, +0.5943096f, -0.1172641f, +0.3340915f, -0.0576301f, +0.3023824f,
  +0.3527247f, -0.3559802f, +0.0378172f, +0.2526526f, +0.2087896f, -0.1697848f, +0.2130932f, -0.0571377f,
  +0.3425076f, -0.0280130f, +0.0554888f, +0.2286860f, -0.0317522f, -0.0136351f, +0.2445828f, +0.0186701f,
  +0.0824725f, -0.2731170f, -0.1114083f, -0.1333031f, -0.0244124f, -0.0019822f, -0.0745180f, -0.1164829f,
  -0.0815439f, -0.1281013f, -0.0446773f, +0.1372559f, +0.0931877f, +0.1969574f, -0.0564295f, -0.0684452f,
  -0.1681982f, +0.1619160f, +0.0480067f, +0.0560386f, -0.0818414f, +0.2319895f, -0.0741228f, -0.0491716f,
  +0.2365402f, +0.1741876f, +0.0972433f, +0.1889694f, -0.0889832f, +0.2407756f, -0.0567297f, -0.1161163f,
  +0.1191863f, +0.2191438f, -0.5723427f, +0.1997847f, +0.2485726f, +0.1549034f, +0.0342968f, -0.1512159f,
  -0.3317841f, +0.2295453f, +0.0090475f, +0.0011161f, +0.2516589f, +0.3693569f, +0.3275191f, -0.1146504f,
  -0.0878306f, +0.1593116f, +0.2644053f, +0.3540733f, -0.1608208f, -0.2352363f, +0.2276462f, -0.1762181f,
  -0.0463309f, +0.1510882f, +0.2778120f, +0.0602109f, +0.1272945f, +0.0421376f, -0.3352008f, -0.2554680f,
  +0.1449529f, +0.2530709f, +0.0643148f, +0.0427061f, +0.0268286f, -0.1493348f, -0.1959496f, -0.1186317f,
  -0.1283826f, -0.1051901f, -0.1346634f, +0.1945442f, -0.0172607f, +0.0796258f, +0.3199470f, +0.2351384f,
  -0.0907222f, +0.3409145f, +0.1618434f, +0.0759131f, -0.0716553f, +0.0260840f, -0.0186137f, -0.0311925f,
  -0.0713279f, -0.0734113f, -0.0154773f, +0.1965479f, -0.1196431f, +0.0442992f, +0.0105729f, +0.0213146f,
  -0.1033358f, +0.2119333f, -0.0860816f, +0.2155643f, -0.1882195f, -0.0741104f, -0.0278377f, -0.0237906f,
  +0.2484992f, -0.0928500f, +0.2151176f, +0.0819143f, -0.0721916f, +0.1875984f, +0.3669703f, +0.0920876f,
  +0.4011311f, +0.0944122f, -0.0882961f, -0.1267444f, +0.2294835f, +0.0706489f, -0.3063769f, +0.0487110f,
  +0.2123135f, -0.1097839f, +0.1333035f, -0.1320333f, +0.0301011f, -0.0623345f, -0.1098101f, -0.2583798f,
  +0.2028269f, +0.0308720f, -0.2387554f, -0.0801447f, +0.4333760f, +0.1396420f, +0.0712383f, +0.0866957f,
  -0.0691497f, -0.1899385f, +0.2843732f, +0.0350890f, +0.1946858f, +0.0975592f, +0.2361216f, +0.2284527f,
  -0.3095210f, +0.3231688f, -0.2467720f, -0.1245933f, -0.2307413f, +0.0601329f, -0.0338496f, +0.0387002f,
  -0.1483985f, -0.3085458f, +0.6042644f, -0.0531919f, +0.0887022f, +0.2393304f, +0.5154483f, -0.0488439f,
  +0.2300466f, -0.2184427f, +0.0985091f, +0.0013236f, -0.0684685f, -0.1288859f, +0.0521998f, -0.0231305f,
  -0.0990462f, -0.1900595f, -0.0573735f, +0.0048285f, +0.0750407f, -0.0974603f, +0.0434765f, -0.0495892f,
  +0.1064725f, -0.0620928f, +0.4003423f, +0.0562303f, -0.2119443f, -0.1283380f, -0.0280288f, -0.0575368f
);

const float biases[4] = float[4](
  -0.0870631f, -0.1060250f, +0.0013622f, -0.0590643f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer118 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0191793f, +0.0168905f, +0.1671762f, -0.1590074f, -0.0045638f, +0.1663065f, +0.0595523f, +0.1445207f,
  -0.1778398f, -0.2489934f, +0.2207269f, +0.1119096f, +0.0668838f, +0.0545308f, -0.0712794f, -0.0040761f,
  +0.0707221f, +0.0637370f, +0.0843960f, +0.0402366f, +0.1292349f, +0.0800915f, +0.0093973f, +0.1489782f,
  +0.0330259f, +0.0975926f, -0.0262738f, -0.0231289f, -0.2181377f, -0.0024758f, +0.0849191f, +0.2355311f,
  -0.1309486f, -0.0814499f, -0.0328776f, +0.1464764f, +0.0320028f, +0.2840868f, +0.1577208f, -0.1537478f,
  +0.0985031f, -0.0537047f, -0.0478342f, +0.2831343f, +0.1688965f, -0.1368713f, -0.0459162f, -0.0075547f,
  +0.1051391f, -0.0202328f, +0.0940694f, -0.2147388f, +0.3016481f, -0.0367723f, +0.1183543f, +0.1277717f,
  -0.0598165f, +0.1046432f, -0.1230167f, -0.0352346f, +0.0207787f, -0.2626303f, +0.2462822f, +0.1399085f,
  +0.2548492f, -0.2511027f, -0.1186911f, +0.0780217f, +0.0724926f, -0.0100161f, -0.0189400f, -0.0019788f,
  -0.2584938f, -0.0230860f, +0.0184507f, -0.1542873f, +0.0054786f, +0.1888845f, -0.1293467f, -0.1130747f,
  -0.0602492f, -0.0275408f, +0.0080297f, -0.0582033f, +0.0371335f, -0.2194150f, +0.1304552f, +0.0127891f,
  +0.1484664f, -0.2396813f, -0.1372031f, -0.3499976f, +0.1490494f, -0.1012357f, +0.2226784f, -0.0283247f,
  +0.2065555f, +0.0798570f, +0.1161680f, -0.1252370f, +0.1625782f, -0.1258797f, +0.0335524f, +0.0605881f,
  +0.1286508f, +0.1770793f, +0.1301024f, +0.0118545f, +0.1161226f, +0.3640859f, +0.0993080f, -0.0938039f,
  +0.0913766f, +0.0749475f, -0.0403703f, -0.1346262f, +0.1996388f, -0.1594370f, +0.0974054f, +0.0488595f,
  -0.1093181f, +0.1614037f, +0.0892729f, +0.0908726f, +0.1120698f, -0.0279937f, -0.2749199f, +0.1058854f,
  -0.1921187f, +0.2904656f, -0.0066394f, +0.0913728f, +0.1071082f, +0.0220645f, -0.3174237f, -0.0469887f,
  +0.0074125f, -0.0212569f, +0.2348072f, -0.2074476f, +0.0321459f, +0.0962975f, -0.1266375f, +0.0667184f,
  -0.0343485f, +0.1424123f, +0.3288712f, +0.0074272f, +0.1908631f, +0.0389575f, -0.0407385f, +0.0608155f,
  +0.0163145f, -0.0622052f, -0.2238086f, -0.3113014f, -0.3966412f, +0.1507792f, -0.0436963f, -0.1730835f,
  -0.1343712f, -0.0625385f, +0.1507048f, -0.1393498f, -0.1528701f, +0.0575786f, -0.0866974f, +0.1500925f,
  -0.1790769f, -0.1196162f, -0.0023258f, -0.1071071f, +0.0577078f, -0.1289348f, +0.0137048f, +0.0045738f,
  +0.3122614f, -0.0146177f, -0.2409291f, +0.0008360f, -0.0223671f, +0.0686876f, -0.0487367f, -0.0121895f,
  -0.2884390f, -0.0692624f, -0.0796767f, +0.0421039f, -0.0464847f, +0.0743838f, +0.0263988f, +0.1312953f,
  +0.0130346f, +0.2021590f, -0.1476561f, -0.0456121f, +0.3456693f, +0.0965198f, -0.0034112f, -0.1788974f,
  +0.0476316f, +0.0525034f, -0.0096619f, +0.0265421f, +0.3491233f, -0.1683744f, +0.0872468f, +0.1054075f,
  +0.0858948f, +0.1321378f, -0.1985941f, +0.0813860f, +0.0544153f, -0.0095567f, -0.0531382f, -0.1661006f,
  +0.0957133f, -0.0887699f, +0.1102124f, -0.0910131f, +0.0814769f, +0.2483211f, -0.0876116f, -0.1177588f,
  +0.1204199f, +0.0154824f, -0.0754088f, +0.1669352f, +0.0590064f, -0.1116967f, -0.1448741f, -0.3161466f,
  -0.0329515f, +0.1598957f, -0.1705070f, -0.1698768f, -0.1523540f, +0.0864626f, -0.0331709f, +0.0076111f,
  -0.2390035f, +0.2594177f, -0.0518484f, +0.1701244f, -0.0264083f, -0.2197998f, -0.0187959f, -0.0256336f,
  -0.2315459f, +0.0631936f, -0.1013256f, -0.0249061f, +0.1584791f, +0.0238968f, +0.1483752f, +0.1541470f,
  +0.0393602f, +0.0701485f, -0.0987232f, -0.1365201f, +0.0159544f, +0.1929800f, -0.0924738f, +0.5467399f,
  +0.3681968f, -0.1007802f, -0.1888795f, -0.0038092f, +0.0164867f, -0.1585876f, -0.0355975f, +0.1730629f,
  -0.0898570f, -0.1781235f, -0.1088342f, -0.0867827f, +0.3404751f, +0.0723374f, -0.1090081f, +0.2549945f,
  +0.1255901f, -0.0342694f, +0.2786936f, +0.0757577f, +0.2659743f, +0.3115128f, -0.0450445f, +0.2496603f
);

const float biases[4] = float[4](
  +0.0039140f, -0.0242141f, +0.0139287f, -0.0495749f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer118 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0917839f, -0.2134610f, -0.0668692f, -0.0437014f, +0.0730064f, -0.0962062f, -0.0907585f, +0.0053301f,
  +0.0514477f, +0.0499410f, +0.0610022f, -0.0450005f, -0.0149330f, -0.0300287f, +0.0854954f, -0.0052652f,
  -0.0416182f, +0.0530550f, -0.1015083f, +0.0038505f, -0.0668790f, +0.3660055f, +0.0203934f, +0.0817931f,
  -0.0505998f, -0.0037573f, +0.1651064f, -0.2575532f, -0.1354783f, +0.1260878f, +0.2591805f, -0.4009089f,
  -0.2967009f, +0.1134856f, +0.0405085f, +0.1571135f, +0.0841978f, -0.1296926f, +0.1581686f, +0.2285928f,
  -0.0121724f, +0.1214039f, -0.3131127f, +0.1101024f, -0.0584988f, -0.0053870f, -0.0353200f, -0.0499605f,
  +0.0106466f, +0.1017897f, +0.0182559f, -0.0119929f, +0.0636383f, -0.0640348f, -0.0841931f, +0.1248241f,
  -0.2430142f, +0.0718953f, +0.0982743f, -0.0715509f, -0.1385298f, -0.0342416f, +0.0143459f, +0.0766262f,
  +0.0404243f, -0.2236622f, +0.0261164f, -0.0520034f, -0.0176066f, -0.0091478f, +0.1507388f, -0.1579916f,
  -0.0050250f, -0.1253576f, +0.1355808f, -0.1116670f, +0.1844270f, +0.2885368f, -0.1388461f, +0.0829428f,
  +0.1912249f, +0.1178576f, -0.1338437f, -0.0481083f, +0.2356873f, +0.0208684f, -0.0346439f, -0.3029594f,
  +0.0666872f, +0.0522232f, +0.1082749f, +0.0609653f, +0.1179783f, -0.0859980f, -0.0688855f, +0.2498740f,
  +0.1880939f, -0.1116552f, +0.0826898f, +0.3189554f, -0.1220873f, +0.1812936f, -0.2321305f, +0.0589943f,
  -0.2057005f, +0.0131548f, -0.0233368f, +0.1853356f, +0.2585832f, +0.1671150f, +0.0490073f, +0.0333467f,
  +0.0132629f, +0.0138845f, +0.0601724f, -0.1140322f, +0.0715296f, +0.2832180f, +0.0557892f, +0.0979674f,
  -0.1200076f, -0.0676191f, -0.0555690f, +0.0963272f, +0.2389805f, -0.3956752f, -0.1453280f, +0.1137597f,
  +0.0703898f, -0.0886444f, -0.2477126f, -0.1849485f, -0.1440513f, -0.1462424f, +0.0878261f, +0.2062720f,
  -0.2175970f, -0.0810363f, +0.1967015f, -0.0099079f, -0.2875216f, -0.0687294f, -0.3517166f, -0.1616870f,
  +0.0286858f, +0.0239836f, -0.1049324f, -0.0946677f, -0.0250836f, +0.0952477f, -0.0457179f, +0.1354105f,
  +0.0977160f, +0.0537761f, -0.2978934f, +0.0547859f, -0.0290910f, +0.4248528f, +0.1572908f, +0.1614169f,
  -0.2380680f, -0.0821467f, -0.3657846f, -0.2791329f, +0.2255160f, -0.0340881f, -0.0910039f, +0.1324000f,
  +0.0265291f, -0.0392001f, +0.1890379f, +0.3094840f, +0.0764642f, -0.0859542f, -0.0815307f, -0.2411823f,
  -0.0851830f, -0.2196236f, +0.1858065f, -0.0109483f, +0.0050723f, +0.0463994f, +0.2076227f, -0.0695180f,
  +0.2651100f, +0.1556672f, +0.1198541f, +0.1391563f, +0.1232309f, -0.1194570f, -0.1373789f, +0.0205652f,
  -0.0084179f, +0.0376096f, +0.1584568f, +0.0898214f, +0.1440102f, -0.1778489f, +0.0194500f, -0.1338546f,
  +0.0988548f, +0.3044078f, -0.0819181f, -0.0594127f, -0.1898596f, -0.0881850f, +0.1424043f, +0.1173862f,
  +0.1696889f, +0.1015117f, -0.0620529f, +0.1053286f, +0.1539679f, -0.2901990f, -0.1372571f, +0.2150081f,
  -0.2693545f, -0.1322421f, -0.3150593f, +0.2146786f, -0.1836368f, -0.0394257f, -0.1270663f, -0.1632570f,
  -0.4125206f, +0.3243280f, -0.0483993f, -0.2238861f, -0.2644841f, +0.1077777f, +0.0482571f, -0.1757951f,
  +0.0285486f, +0.1734909f, +0.0689120f, +0.3185164f, -0.0075492f, -0.0074607f, -0.0581568f, -0.1305898f,
  -0.1871960f, -0.0235175f, -0.2672747f, +0.0194775f, -0.0654981f, -0.1484133f, -0.0017919f, +0.2194485f,
  -0.3765721f, +0.2145852f, +0.3243633f, -0.0829597f, +0.0614523f, -0.1836519f, +0.1863505f, +0.0834280f,
  +0.3471270f, +0.2902038f, -0.0021165f, +0.0398586f, +0.0304247f, -0.1755603f, +0.0199578f, +0.4590867f,
  -0.0884000f, +0.0402658f, -0.0166199f, -0.1053864f, +0.3371133f, +0.0632205f, -0.0650034f, -0.2361790f,
  -0.0779552f, +0.2884157f, +0.1882538f, -0.1530292f, -0.0210939f, -0.5308160f, -0.3200628f, +0.1935313f,
  +0.1905958f, +0.0722507f, +0.0975029f, -0.0323876f, -0.1489549f, -0.3741581f, +0.1907121f, -0.1597267f
);

const float biases[4] = float[4](
  -0.0098976f, +0.0056100f, +0.0044117f, -0.0003000f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer119 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0139106f, -0.3240777f, +0.1019645f, -0.0622269f, +0.2657954f, -0.0392647f, +0.1276855f, +0.2106340f,
  -0.1104229f, -0.1395220f, -0.0476582f, -0.0883288f, +0.2514725f, +0.0769667f, +0.0634416f, -0.0370630f,
  -0.0277873f, +0.3235920f, -0.0543271f, +0.1214048f, +0.0101845f, +0.0978523f, -0.2230510f, -0.4086314f,
  +0.1287670f, +0.0343363f, -0.1896576f, +0.0285592f, -0.0496324f, +0.0597716f, -0.1759179f, +0.2877078f,
  +0.0779155f, +0.1902672f, -0.1940478f, -0.0045314f, +0.0008499f, -0.0196363f, +0.0256352f, -0.1671615f,
  +0.1147415f, -0.0294632f, -0.0657071f, -0.2131792f, +0.1863860f, -0.0335088f, -0.2301143f, -0.0614513f,
  +0.0161220f, +0.2824687f, -0.0710823f, -0.1299551f, +0.2019533f, +0.0890453f, +0.0275850f, -0.3309858f,
  -0.1232937f, +0.1135826f, -0.1100190f, +0.1172466f, +0.1537088f, +0.2379173f, +0.0011413f, +0.1447929f,
  +0.0176619f, +0.0834987f, -0.2290570f, -0.1747881f, +0.2349464f, -0.1275466f, +0.1826054f, -0.0235936f,
  -0.0031434f, +0.0493904f, -0.2490021f, -0.0037745f, -0.0168264f, -0.0486450f, -0.0400572f, -0.1893245f,
  +0.3961407f, +0.0953979f, -0.0056330f, -0.2806061f, +0.1991784f, -0.0222089f, +0.1195288f, -0.1024309f,
  -0.0908304f, +0.0402428f, -0.0579584f, -0.1113681f, +0.1825574f, -0.2793847f, +0.0687824f, +0.1643139f,
  +0.0244877f, +0.0372476f, -0.0367903f, +0.0942497f, +0.1596100f, +0.0472155f, -0.4557717f, +0.1303042f,
  -0.0640730f, -0.1432719f, -0.0176735f, -0.0344876f, -0.0583222f, -0.0291020f, -0.0249806f, +0.0107635f,
  -0.0242561f, -0.2939728f, +0.1651598f, +0.2125302f, -0.0219960f, +0.1116211f, +0.0107022f, -0.0525926f,
  -0.4055701f, +0.0158750f, +0.0213060f, +0.1514313f, +0.3021334f, -0.0783727f, -0.0097316f, -0.1253943f,
  +0.1785273f, -0.1663467f, +0.0132656f, +0.0884316f, +0.2950916f, +0.1682942f, +0.1118346f, +0.2157213f,
  +0.2537551f, +0.0178360f, +0.0918987f, +0.1982906f, -0.0227101f, +0.1252032f, +0.1955580f, +0.0662981f,
  +0.1464476f, -0.1156387f, +0.0385299f, +0.4770363f, +0.1244873f, +0.1179501f, -0.1314544f, +0.0529803f,
  -0.2367637f, +0.0085482f, +0.0469940f, -0.0359172f, -0.0450708f, +0.0449811f, +0.0233007f, +0.0347152f,
  -0.0230763f, +0.0264474f, -0.1464800f, +0.1376119f, -0.0131192f, -0.0942316f, -0.0501523f, +0.1530334f,
  +0.2115929f, -0.5231277f, +0.2373721f, +0.0041480f, -0.0345587f, +0.0443583f, +0.0198839f, -0.0563694f,
  -0.0938710f, -0.3736745f, +0.1007755f, +0.0363551f, +0.1174580f, +0.0936911f, +0.0515006f, +0.0157669f,
  +0.1778688f, +0.1037422f, +0.2688984f, +0.1084196f, -0.0817811f, +0.0685014f, +0.0638082f, +0.1391970f,
  -0.1388911f, +0.1463340f, -0.1331015f, -0.1066812f, +0.2239867f, +0.1462831f, +0.0302900f, +0.0187577f,
  +0.0232197f, -0.0383027f, -0.0788845f, -0.1090348f, +0.1649806f, -0.0763595f, -0.0006870f, -0.0153497f,
  -0.0302296f, -0.1357128f, -0.1089119f, -0.1533814f, -0.0300492f, -0.1929432f, +0.2692619f, -0.0877654f,
  +0.1856868f, +0.0408191f, -0.1741531f, -0.0424047f, +0.0510144f, -0.1275006f, -0.0873746f, +0.0041461f,
  +0.0149673f, -0.0700968f, -0.0478648f, -0.0308062f, +0.3240885f, +0.4073650f, +0.1225911f, -0.1208831f,
  +0.1331958f, +0.1758147f, -0.0060804f, +0.1100219f, +0.1287512f, +0.2625171f, -0.1487527f, -0.0873520f,
  +0.0788371f, -0.1638450f, -0.0515984f, +0.0349457f, -0.0061144f, +0.2868508f, +0.2279071f, -0.0257390f,
  +0.1421081f, +0.0613936f, -0.2651473f, +0.2186067f, +0.0544862f, +0.1687762f, -0.0458722f, +0.1839329f,
  +0.0493662f, -0.2078826f, +0.0208747f, +0.1248321f, -0.0084511f, -0.1151392f, -0.1182305f, -0.0904942f,
  +0.0952700f, -0.0076064f, +0.0708521f, +0.0166076f, +0.1196211f, +0.1755752f, +0.0680300f, +0.0939749f,
  -0.1554434f, -0.0549305f, -0.1429477f, +0.1108930f, -0.1678827f, -0.0195461f, +0.0032273f, -0.0352584f,
  -0.1562602f, +0.0728728f, +0.0196264f, -0.0513052f, +0.0615863f, -0.0470106f, -0.0818874f, -0.0934988f
);

const float biases[4] = float[4](
  -0.1272957f, -0.1451055f, -0.0451043f, -0.0085525f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer119 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2927683f, +0.1660613f, +0.1309844f, +0.0392882f, -0.0384099f, +0.1319634f, +0.1128514f, -0.0998797f,
  +0.0048935f, +0.1081262f, +0.1512089f, +0.2117032f, +0.0550441f, +0.1772428f, -0.1049018f, -0.0039170f,
  -0.1325295f, +0.1877821f, +0.0650788f, -0.0837073f, -0.1703480f, +0.0006119f, +0.1095410f, -0.0355617f,
  +0.1302460f, +0.2561212f, +0.1790179f, +0.0542892f, -0.2433179f, +0.2487342f, -0.1837626f, +0.3297495f,
  -0.1662898f, -0.1837285f, -0.0260282f, +0.0276882f, +0.1342681f, -0.0007943f, -0.1514169f, +0.2140735f,
  +0.0958371f, +0.0604644f, +0.2721119f, -0.3617794f, +0.1769834f, -0.1115610f, -0.0041208f, +0.0654322f,
  +0.0922625f, +0.1089918f, +0.0109904f, -0.2484081f, -0.0303992f, -0.1687699f, +0.3206926f, +0.1588541f,
  +0.0518692f, -0.1661142f, -0.0936234f, +0.0152769f, -0.0692801f, -0.2543132f, -0.0857479f, +0.1897018f,
  -0.0703540f, +0.0255076f, +0.1371894f, -0.1000910f, +0.0689001f, +0.0515942f, +0.0655902f, +0.0742907f,
  -0.0856932f, +0.0211712f, +0.0989165f, -0.0101685f, -0.1499791f, +0.0695865f, +0.0485806f, +0.1780166f,
  +0.0272848f, +0.2329707f, -0.0061158f, -0.2386227f, +0.0232237f, +0.0009391f, +0.2776271f, +0.0724229f,
  -0.0712024f, +0.0287510f, +0.0386754f, +0.1454991f, +0.0001928f, -0.0103027f, -0.1483811f, +0.1218449f,
  -0.0795319f, +0.1123011f, +0.0956134f, -0.2188019f, +0.1040201f, -0.1832783f, -0.1463085f, +0.0192876f,
  -0.1639471f, +0.3119028f, -0.1818339f, +0.2491219f, -0.0449209f, -0.0543231f, -0.0975651f, -0.1799286f,
  -0.0963114f, +0.1488542f, -0.0723497f, +0.0535708f, -0.0492972f, -0.2016699f, -0.0979430f, -0.2550065f,
  +0.0193957f, +0.1400505f, +0.0316785f, +0.0371040f, -0.0440634f, -0.0362771f, +0.0420162f, +0.1836713f,
  -0.1564672f, -0.3096369f, -0.0145496f, +0.0332934f, +0.0196965f, -0.0728581f, +0.3009638f, +0.0660221f,
  +0.0510779f, -0.1747539f, +0.0743881f, -0.0474020f, +0.2090903f, +0.1758022f, +0.1090287f, -0.0536786f,
  -0.0111482f, +0.0136374f, +0.1546083f, -0.1393530f, -0.1770019f, -0.2184642f, +0.1191973f, +0.0739225f,
  -0.2804882f, +0.2155658f, +0.0710130f, -0.2442952f, +0.1808753f, -0.1545731f, +0.1663051f, +0.1635111f,
  -0.1361034f, +0.2862964f, +0.0542605f, -0.0842185f, +0.1336473f, -0.0762397f, -0.1041114f, -0.0030735f,
  -0.0464747f, -0.0015209f, -0.0728895f, -0.1261500f, -0.0733484f, -0.1375469f, +0.0577813f, +0.2814004f,
  -0.0616935f, +0.1959912f, +0.3482594f, +0.2019190f, -0.0032438f, -0.1049597f, -0.1993149f, +0.0678430f,
  -0.0863276f, +0.2745128f, +0.1460408f, +0.0140615f, -0.1238555f, -0.0570396f, +0.0609703f, +0.0508022f,
  -0.0783258f, -0.0006076f, -0.0310084f, +0.2797117f, -0.1817295f, -0.1368821f, -0.0671109f, +0.0392831f,
  +0.0719009f, +0.0445539f, -0.0387925f, -0.0608885f, +0.2030825f, +0.0373041f, +0.0411853f, +0.1218355f,
  +0.0887169f, +0.0301559f, +0.0645039f, +0.0205364f, +0.0899171f, -0.0301531f, +0.0285981f, -0.0842189f,
  +0.0241202f, -0.0408651f, -0.0909325f, +0.0133517f, -0.1578469f, +0.1845580f, -0.0287313f, +0.0369479f,
  +0.0368567f, -0.2072589f, +0.0144854f, +0.0041132f, -0.1403332f, +0.0507132f, +0.3158176f, +0.0772290f,
  +0.1859011f, +0.0525585f, -0.1520528f, -0.2188036f, -0.0719898f, +0.0926109f, +0.0969892f, +0.0416448f,
  -0.1092146f, -0.0465091f, +0.1203313f, -0.0493053f, -0.0604488f, -0.0647637f, +0.1668579f, -0.0652268f,
  -0.1247960f, -0.0654941f, +0.1728124f, -0.1270980f, -0.0411193f, -0.2123771f, +0.2296972f, -0.1257577f,
  +0.1958559f, -0.2548268f, -0.1355918f, -0.1253991f, +0.0172825f, +0.0207075f, -0.1309400f, +0.0867583f,
  -0.2444940f, -0.1795703f, -0.0148991f, +0.0443410f, +0.1930771f, -0.0387843f, +0.0588385f, +0.1308891f,
  +0.1801577f, -0.0936821f, +0.1313900f, -0.2263581f, -0.0056154f, +0.1407839f, +0.4130014f, -0.0227490f,
  -0.0824022f, -0.1602305f, -0.1253313f, -0.0072942f, -0.0290327f, -0.1246715f, +0.0459957f, +0.1742114f
);

const float biases[4] = float[4](
  +0.0290261f, +0.0389805f, -0.0053208f, +0.0318611f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer120 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2109321f, -0.0658976f, +0.0400580f, +0.3589967f, +0.0348966f, -0.0086925f, +0.0965589f, +0.0829437f,
  +0.3063714f, +0.2760196f, -0.0287708f, +0.0418568f, +0.0334810f, +0.2065773f, -0.0625095f, -0.0024860f,
  -0.0085083f, -0.0776329f, +0.1218690f, +0.3162824f, +0.1528688f, +0.0958892f, -0.0397449f, +0.0814778f,
  -0.1818598f, +0.0217227f, +0.0564100f, -0.1017883f, -0.0011542f, +0.0337882f, -0.0095850f, -0.2435152f,
  +0.2439210f, -0.0288160f, -0.1041440f, -0.1408954f, -0.0709145f, +0.2376027f, +0.1494526f, -0.0830334f,
  -0.0403270f, -0.1460456f, +0.0382875f, +0.0878425f, +0.0432692f, +0.0359005f, -0.1671427f, -0.2960458f,
  -0.1569941f, -0.0757282f, +0.1760710f, +0.0476861f, -0.0468536f, -0.2001512f, +0.1257997f, +0.0198574f,
  +0.1182679f, +0.1073961f, -0.2131254f, -0.1709510f, -0.1501314f, +0.0524009f, -0.1042061f, -0.0371726f,
  -0.1165094f, +0.0043150f, -0.0324485f, -0.0140116f, -0.0882274f, +0.0954692f, -0.0445460f, -0.0140273f,
  -0.0039309f, +0.0792097f, -0.2295243f, -0.0581291f, +0.0057496f, +0.2511027f, +0.0287885f, +0.0763580f,
  +0.1785565f, +0.0271717f, +0.1916451f, +0.0660138f, +0.1536851f, +0.0412390f, -0.0794202f, -0.2804882f,
  -0.1675285f, +0.2523560f, -0.1197321f, -0.2394003f, +0.0713980f, -0.0710470f, +0.1975994f, +0.1557673f,
  +0.2495455f, +0.0100956f, +0.0325167f, -0.1043058f, +0.0324962f, -0.2267533f, -0.4532233f, +0.2994550f,
  +0.0867345f, +0.0738942f, -0.1486690f, +0.1477395f, -0.0420982f, -0.0087164f, -0.1637871f, +0.0655101f,
  -0.1119652f, -0.1376511f, +0.0968215f, -0.0227470f, -0.0017085f, +0.0395651f, -0.0478640f, +0.2632324f,
  -0.0359847f, +0.0981628f, -0.1783679f, -0.0408132f, +0.0124216f, -0.3240551f, -0.0455688f, -0.0550243f,
  +0.1081056f, -0.0339094f, +0.0101697f, +0.1429114f, -0.0120333f, -0.1449678f, +0.0692574f, +0.1968943f,
  -0.1017452f, +0.0620601f, +0.3334601f, -0.2144379f, +0.3494218f, -0.0532990f, -0.0893219f, +0.1167863f,
  +0.1269822f, -0.2263739f, +0.1498936f, +0.1742034f, +0.0745462f, +0.1232198f, -0.2432966f, -0.0923316f,
  -0.1660401f, -0.1642166f, +0.0075302f, +0.4323585f, -0.0990068f, -0.1308264f, -0.1230980f, +0.1173444f,
  +0.1018142f, -0.2326636f, -0.0989203f, +0.0571264f, -0.1192569f, +0.0526265f, -0.0474488f, -0.0140060f,
  -0.0144715f, -0.0415856f, +0.1007222f, +0.0595622f, -0.1929159f, +0.0493228f, -0.0781883f, -0.1354063f,
  +0.0987613f, +0.1210845f, -0.2921412f, -0.0998800f, -0.0258031f, +0.2016221f, -0.0794007f, +0.2348143f,
  +0.0126628f, -0.1772783f, +0.0652187f, +0.0068770f, -0.1912613f, -0.2308443f, -0.0037592f, -0.1285226f,
  -0.2023231f, +0.0684009f, -0.0604616f, -0.1040294f, +0.0792656f, +0.0906189f, -0.0164893f, -0.1734535f,
  +0.2398228f, +0.1358035f, -0.1610872f, -0.0802111f, -0.1890530f, -0.1322317f, -0.1182293f, +0.0724699f,
  -0.0119753f, +0.2924704f, +0.0371630f, +0.0762485f, -0.1351963f, +0.0165701f, -0.1023187f, +0.0816184f,
  -0.1178215f, +0.0318013f, -0.0430651f, -0.3077874f, +0.1532219f, +0.1204535f, -0.0165266f, +0.2493435f,
  -0.0255550f, -0.1823617f, +0.0052492f, +0.3305132f, +0.0452335f, +0.0482973f, -0.0575031f, -0.1388736f,
  -0.3656007f, -0.2654974f, +0.1251352f, +0.0095667f, -0.1973719f, -0.0416263f, -0.0303383f, -0.1032769f,
  +0.1550208f, -0.0309444f, +0.0320309f, -0.1330000f, +0.3016594f, +0.0963282f, +0.0972120f, +0.2353028f,
  -0.3540114f, -0.3165142f, -0.0027797f, +0.0640458f, +0.0473645f, -0.2058116f, +0.2684534f, +0.0616219f,
  -0.1243480f, -0.0800159f, -0.0750961f, +0.3639351f, -0.0481371f, +0.1253487f, +0.1429552f, +0.0523933f,
  -0.1644448f, +0.1974981f, +0.1745100f, -0.2261201f, +0.0274389f, +0.2350064f, -0.0829993f, +0.2074184f,
  +0.0027832f, -0.1781974f, -0.1742063f, +0.1689568f, -0.0274458f, +0.0998760f, -0.1331441f, -0.1423374f,
  -0.1876404f, -0.0470960f, +0.1818780f, +0.0555695f, -0.0899635f, -0.0988020f, +0.1911780f, -0.1200864f
);

const float biases[4] = float[4](
  -0.0283145f, -0.0087467f, +0.0076065f, -0.0055554f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer120 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0180249f, -0.1200288f, -0.2323561f, +0.1363306f, +0.0032807f, +0.5450616f, +0.0107000f, -0.0395456f,
  +0.0004520f, +0.0151109f, -0.0802117f, +0.1567248f, +0.0630039f, +0.0924470f, -0.0663660f, +0.0832999f,
  -0.3596740f, +0.0861991f, +0.0387907f, +0.1329357f, -0.1163599f, -0.2134404f, +0.1182086f, -0.1317667f,
  -0.2534214f, +0.1281617f, +0.1857121f, -0.1553439f, +0.1390391f, -0.0846780f, -0.2706831f, +0.1749704f,
  -0.0591119f, +0.0257239f, -0.0879306f, +0.0643993f, +0.1576340f, +0.0762637f, -0.1085835f, -0.2088975f,
  -0.0626834f, -0.0742693f, -0.3859615f, -0.3039131f, +0.0080774f, -0.2706500f, +0.0794505f, +0.1422877f,
  +0.2129113f, +0.1128848f, +0.0644059f, -0.0466862f, -0.0478993f, +0.2727087f, +0.1912932f, -0.0154863f,
  -0.2396104f, +0.2984074f, -0.1091523f, +0.0706006f, +0.1006164f, +0.3257585f, +0.1061507f, +0.2597455f,
  -0.0192472f, +0.1460705f, -0.0282949f, -0.1968218f, -0.1210568f, +0.0628758f, -0.1716164f, +0.0515586f,
  -0.0554903f, -0.1380937f, +0.1642144f, +0.1863641f, +0.1456498f, +0.1368724f, -0.1457032f, +0.0376912f,
  +0.1749001f, +0.1602462f, -0.1227731f, +0.1019911f, +0.0946136f, -0.1663347f, -0.0353367f, +0.1600331f,
  -0.2547684f, -0.2098189f, +0.0332323f, +0.1869922f, -0.0816701f, +0.1665259f, +0.1797625f, +0.1663312f,
  -0.0955978f, -0.0418049f, +0.0528255f, -0.0384331f, +0.0812300f, -0.1004864f, +0.1400038f, -0.2117520f,
  -0.0143130f, -0.0183668f, -0.0570557f, -0.0853365f, -0.3564810f, +0.2133894f, +0.1780190f, -0.1101557f,
  +0.0899438f, -0.1449678f, +0.1452889f, +0.1530347f, +0.1967639f, +0.0573580f, -0.0850276f, +0.0893897f,
  +0.0484940f, -0.2266110f, -0.0698068f, +0.1443852f, +0.0293600f, -0.2507451f, +0.1394238f, -0.2729588f,
  +0.1981350f, +0.1850971f, -0.2894117f, +0.0103010f, +0.0094978f, +0.0507281f, -0.2189279f, -0.1131500f,
  +0.2914245f, -0.1316365f, -0.0360771f, +0.1892236f, -0.1666014f, +0.0153415f, -0.0150426f, -0.1299882f,
  +0.0982613f, +0.2502250f, +0.0581723f, +0.0977383f, +0.1095315f, -0.0988526f, -0.1012063f, +0.0771583f,
  +0.1642499f, +0.0295138f, +0.0440755f, +0.2681207f, +0.2537011f, +0.1393825f, +0.1670937f, +0.1453890f,
  +0.0292908f, -0.1146535f, -0.2354043f, -0.1808426f, -0.0442454f, +0.1779304f, -0.0660465f, +0.0569460f,
  -0.2564120f, -0.1878237f, -0.1074981f, +0.1003497f, -0.1208979f, +0.0105109f, +0.1578072f, -0.0030580f,
  -0.1368563f, -0.0914130f, +0.2395174f, -0.1912054f, -0.0323222f, +0.2433568f, +0.2415597f, -0.0429683f,
  +0.0938014f, -0.0874961f, +0.0646748f, +0.1212860f, +0.1170857f, -0.1411143f, +0.1989743f, -0.0747340f,
  +0.0200272f, +0.0695954f, -0.0623068f, +0.1212892f, +0.0108317f, +0.1032427f, +0.1394257f, -0.1963924f,
  +0.2923898f, -0.4339081f, +0.0132995f, +0.1737929f, +0.0555304f, +0.0965536f, -0.1603563f, -0.0499151f,
  -0.2468590f, -0.0538362f, +0.0769891f, -0.0496388f, +0.0324614f, +0.0517199f, -0.2374037f, -0.0179350f,
  -0.1402590f, +0.3458753f, +0.0407133f, +0.0568998f, -0.2156747f, -0.2543615f, -0.2650798f, +0.1464729f,
  -0.5478036f, -0.0510969f, -0.0654206f, -0.0923700f, -0.1872578f, -0.0943153f, +0.0804009f, -0.2379114f,
  -0.0299825f, +0.0395125f, +0.0374057f, -0.0318852f, +0.0192391f, -0.0130874f, +0.0643413f, +0.2275958f,
  -0.1766615f, -0.1920359f, -0.0172706f, -0.0206442f, -0.0843860f, +0.0986136f, +0.2001473f, +0.0479070f,
  +0.2397501f, +0.0539558f, -0.0368693f, +0.0404978f, -0.1680947f, +0.1995060f, -0.1791366f, -0.1091487f,
  -0.0979324f, +0.1534765f, -0.0149950f, -0.0103022f, +0.1064664f, -0.0520517f, -0.0882824f, -0.0584478f,
  -0.1907895f, -0.0463825f, -0.0356508f, +0.2053130f, -0.0362707f, -0.2217506f, -0.3288580f, +0.0276824f,
  -0.2515494f, -0.0687384f, +0.0897525f, +0.2127052f, +0.2105934f, +0.0948865f, +0.1778104f, +0.1197882f,
  -0.2473848f, +0.3618220f, +0.1441354f, -0.1695770f, -0.1565210f, +0.1066932f, +0.1164135f, +0.1378158f
);

const float biases[4] = float[4](
  +0.0039400f, -0.0128660f, -0.0132238f, -0.0063748f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer121 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0039809f, -0.0078728f, -0.1896716f, +0.0530935f, -0.2373413f, -0.0221949f, +0.0706217f, +0.0036706f,
  -0.1525973f, -0.2595130f, -0.1067569f, -0.1011636f, +0.0714172f, -0.0090138f, -0.0664119f, +0.0983058f,
  -0.3144037f, +0.0561709f, -0.2932434f, +0.0951449f, -0.1992203f, -0.1698537f, +0.0253092f, -0.2695933f,
  -0.0814545f, -0.1169798f, -0.1237374f, +0.1476614f, +0.0013403f, -0.0545426f, -0.2693053f, +0.0577376f,
  +0.0987175f, -0.3162497f, +0.1699723f, -0.1747782f, +0.1761187f, -0.1211640f, +0.0294017f, +0.1095265f,
  +0.1674641f, +0.0210715f, -0.1013930f, -0.0294649f, -0.0784734f, +0.2842135f, -0.1927466f, +0.0256069f,
  +0.1595995f, +0.0774050f, +0.1135828f, -0.0854869f, +0.0631517f, +0.0822946f, +0.0018294f, +0.1470696f,
  +0.1027297f, +0.1894557f, +0.1116577f, -0.0368466f, +0.1495730f, -0.0926307f, +0.0660820f, +0.0586164f,
  -0.1399163f, -0.1274437f, -0.4510490f, -0.0428300f, +0.0226230f, -0.0854650f, +0.2316049f, -0.0671238f,
  +0.1392341f, -0.1567275f, +0.1862641f, -0.2810212f, +0.2192553f, +0.0400920f, -0.2072502f, -0.0255514f,
  +0.1572998f, -0.1069936f, -0.0315007f, -0.0828504f, -0.0413372f, +0.1564812f, -0.1777214f, -0.0356659f,
  +0.4398625f, -0.2766671f, +0.0365962f, -0.1848130f, +0.2000172f, +0.3856901f, +0.0065799f, -0.0766093f,
  -0.0048180f, +0.1766290f, -0.2075986f, +0.2150172f, -0.1306743f, -0.0341649f, -0.0541799f, +0.0111534f,
  +0.0580423f, -0.0937313f, +0.3647684f, +0.0711594f, -0.1892384f, -0.2389829f, +0.2054223f, +0.1648562f,
  +0.0273226f, -0.1331007f, +0.0252201f, +0.1398938f, -0.0915417f, -0.2331139f, +0.1170542f, +0.1929502f,
  +0.0823977f, -0.0010976f, -0.2523815f, -0.1515304f, -0.0699339f, +0.1414568f, -0.1259953f, +0.0810109f,
  -0.0515361f, +0.1303196f, -0.0790093f, -0.0524408f, +0.2073557f, +0.1006349f, +0.0256865f, -0.0730951f,
  -0.1792301f, -0.0053716f, +0.0352677f, -0.1903612f, +0.1052206f, +0.1169963f, -0.0336511f, -0.1510595f,
  -0.2488749f, -0.1393274f, +0.0419910f, -0.3362150f, -0.0234984f, -0.0433911f, +0.0810949f, -0.0105822f,
  -0.3321086f, -0.2593799f, -0.2690261f, +0.0096452f, +0.0441964f, +0.0614494f, +0.0272310f, -0.0349819f,
  +0.2616967f, -0.1631472f, -0.2272851f, -0.1556008f, -0.0521450f, +0.0379273f, +0.1516734f, +0.1587108f,
  -0.0015918f, -0.0417395f, -0.1322710f, +0.1407869f, +0.1522751f, +0.0676456f, -0.0446490f, +0.0200084f,
  -0.1899436f, +0.0098069f, -0.0253782f, -0.1315324f, -0.0849729f, +0.2861112f, -0.0476568f, +0.2659011f,
  +0.2692526f, +0.1441572f, -0.0100025f, -0.0786725f, -0.1769826f, -0.0014858f, +0.1293504f, -0.0102441f,
  -0.2800741f, -0.0912812f, +0.0236721f, -0.0059460f, +0.0403874f, +0.1366265f, +0.0696608f, +0.0407438f,
  +0.0768893f, -0.0447806f, -0.0322274f, -0.0112683f, -0.0562874f, +0.1146125f, +0.0886105f, +0.0057701f,
  +0.0739299f, -0.2368542f, +0.0354114f, +0.0464243f, -0.0745529f, -0.0079704f, +0.0712088f, +0.1586028f,
  +0.0791827f, -0.0726936f, -0.0141255f, +0.0191709f, -0.0360334f, -0.2146985f, +0.1038019f, +0.0692710f,
  +0.1504426f, -0.2665272f, -0.1266964f, -0.1179953f, +0.3382483f, +0.0989223f, -0.0098359f, +0.1908844f,
  -0.0719759f, -0.0603347f, -0.2103862f, +0.1033557f, +0.2977190f, +0.0806052f, +0.2002759f, -0.0232440f,
  +0.0479637f, +0.0317396f, -0.1489781f, +0.0887750f, -0.0674317f, -0.2675796f, +0.1660053f, +0.2785502f,
  +0.0393525f, -0.0766842f, +0.3179639f, -0.0819431f, -0.1200538f, -0.1336514f, +0.1247588f, -0.1852152f,
  -0.2712195f, -0.1840700f, +0.1472527f, -0.0749595f, +0.0012383f, +0.0562017f, +0.1423029f, +0.0230245f,
  +0.3267118f, -0.3163406f, -0.0714304f, +0.1672283f, +0.0495842f, -0.0765412f, +0.2449488f, +0.0622801f,
  +0.0253818f, +0.0409558f, -0.1860288f, -0.0224011f, +0.1426206f, +0.0436501f, -0.1556847f, -0.0891732f,
  -0.1638739f, +0.1865179f, -0.1728044f, +0.0002556f, +0.0092273f, -0.0403321f, -0.1789218f, +0.0073251f
);

const float biases[4] = float[4](
  +0.0509497f, -0.0180313f, +0.0467876f, +0.0564102f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer121 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0169359f, -0.1168743f, +0.3128130f, +0.1934710f, -0.1397368f, -0.0460710f, +0.0601763f, +0.1153215f,
  +0.0570374f, +0.0810694f, -0.2487110f, +0.1463814f, +0.0740696f, -0.0374707f, +0.1651591f, +0.0867017f,
  -0.0202126f, +0.0968167f, -0.3079663f, +0.0836791f, +0.0270596f, -0.2381687f, -0.0223325f, +0.0199942f,
  -0.3947518f, +0.1527911f, +0.0366345f, -0.0055320f, -0.0560826f, -0.0064703f, -0.2662222f, -0.0349808f,
  -0.3636311f, +0.1245715f, +0.0549130f, +0.0873878f, -0.1275532f, -0.1083573f, -0.2068084f, -0.1315218f,
  +0.1193180f, +0.1749274f, -0.2861507f, +0.1139136f, +0.1340270f, -0.2497517f, +0.2287432f, -0.3132115f,
  +0.0921005f, +0.2973541f, -0.0303305f, -0.0097125f, -0.0507732f, +0.2641750f, +0.1544550f, -0.1441035f,
  +0.0961008f, -0.0494276f, +0.0535292f, -0.0356781f, -0.0970808f, -0.0380021f, +0.0330612f, -0.1237693f,
  -0.1135893f, +0.0397197f, +0.0726644f, +0.0129822f, +0.0413924f, -0.0262646f, -0.1091368f, -0.0691585f,
  -0.0104840f, -0.0327772f, -0.0378767f, +0.0008427f, -0.0346711f, +0.4062822f, -0.2619866f, +0.3333724f,
  -0.0956978f, -0.0747487f, +0.4157332f, -0.0442963f, +0.1101322f, +0.0831846f, +0.0684133f, +0.1845457f,
  +0.1235270f, -0.1069974f, +0.1323486f, -0.1429368f, +0.3175986f, +0.3761251f, -0.2150489f, +0.0116819f,
  -0.1477692f, -0.0367354f, -0.1059107f, -0.1740426f, +0.0158760f, -0.0909777f, -0.3416395f, +0.0248240f,
  +0.0622152f, -0.0759754f, -0.0117115f, -0.3548804f, -0.0900875f, +0.0892672f, -0.3951392f, -0.0124110f,
  +0.2690302f, -0.1344699f, -0.1047516f, -0.1932146f, -0.1124697f, +0.1404921f, -0.1538048f, +0.0961336f,
  -0.4861566f, -0.1070408f, +0.3990489f, -0.1161309f, -0.2479030f, +0.0407865f, +0.0570301f, -0.0203319f,
  -0.0721771f, -0.1485322f, +0.1249128f, -0.0985073f, -0.0338655f, +0.3410178f, -0.0942919f, -0.1657092f,
  +0.0776047f, -0.0309286f, -0.0427860f, +0.0164933f, +0.0357401f, +0.0522743f, -0.0209993f, +0.1562501f,
  +0.0504718f, +0.2161369f, +0.2033434f, +0.1674201f, +0.0880959f, -0.0872739f, -0.1156282f, +0.1454137f,
  +0.2193481f, -0.2076415f, +0.1060238f, -0.2808532f, -0.2198964f, -0.0248047f, +0.0435640f, -0.1286035f,
  +0.0720654f, +0.0287322f, -0.0557741f, +0.2417810f, +0.3067608f, -0.2575266f, +0.2572114f, -0.0260262f,
  +0.2167001f, -0.1687503f, -0.1328596f, -0.3717332f, +0.0977474f, -0.0442606f, -0.0015841f, -0.1643380f,
  -0.0585560f, +0.0166088f, +0.1290047f, -0.2878465f, +0.0167519f, -0.0485152f, -0.0750916f, +0.0700550f,
  -0.0485276f, -0.1091609f, +0.0781056f, -0.3299308f, +0.3712081f, +0.0551136f, -0.1073769f, -0.0208744f,
  +0.4914615f, +0.3945777f, -0.1477829f, -0.0328955f, +0.3162389f, -0.1970679f, +0.1206078f, +0.0409641f,
  +0.1468007f, +0.2062121f, +0.2341239f, +0.1918878f, +0.0607918f, -0.0897347f, -0.1606589f, +0.2186252f,
  -0.2283696f, +0.0467892f, -0.2101315f, -0.0167868f, +0.1301155f, +0.3099404f, -0.1067196f, -0.1835310f,
  -0.0621307f, +0.1023775f, -0.1047528f, +0.0238648f, +0.0521921f, -0.0851362f, -0.1409492f, -0.1290670f,
  +0.1801351f, +0.2744885f, -0.4933649f, +0.0323659f, -0.0321231f, -0.0697344f, -0.0227997f, -0.0743788f,
  +0.0478641f, +0.0721749f, +0.0228096f, +0.0659718f, -0.2660739f, +0.0111130f, -0.1781496f, -0.0322705f,
  -0.1160172f, +0.1320187f, +0.0223684f, -0.1066144f, -0.0333950f, -0.2325816f, +0.3060952f, +0.1195220f,
  -0.0538173f, -0.0464459f, -0.0315527f, +0.2048469f, -0.0568297f, -0.0677141f, +0.0847827f, +0.2422328f,
  -0.1202602f, +0.0620075f, +0.0033830f, +0.0332320f, -0.0463542f, -0.1132963f, -0.0676232f, -0.1322742f,
  +0.0646849f, +0.1977168f, -0.0767753f, +0.2688287f, -0.1129310f, -0.2414749f, -0.0272163f, +0.1332103f,
  +0.0601649f, -0.0285222f, +0.0407493f, +0.1516232f, -0.1966949f, +0.0715604f, -0.0196319f, +0.1213546f,
  +0.1702695f, +0.0533541f, -0.1137762f, +0.2086968f, -0.1802171f, +0.2400016f, -0.2226516f, +0.0607417f
);

const float biases[4] = float[4](
  +0.0158490f, -0.0439423f, -0.0261764f, +0.0264991f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer122 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0097628f, -0.0317074f, -0.0668517f, -0.3096682f, -0.0856441f, -0.0541919f, +0.0823258f, -0.2005904f,
  -0.0674024f, +0.2787313f, -0.1240683f, +0.0568747f, -0.0365925f, -0.0353891f, +0.0289565f, +0.0744414f,
  +0.0680322f, -0.1377008f, -0.0022232f, -0.0598892f, +0.0499789f, +0.1492720f, +0.3387938f, +0.0380573f,
  -0.2482623f, -0.2446903f, +0.0091554f, -0.0841992f, +0.0929739f, +0.0889302f, -0.3507629f, -0.1387329f,
  +0.0352762f, -0.0459054f, -0.0851085f, +0.0128291f, +0.1706130f, +0.2644349f, +0.0854103f, -0.3070845f,
  -0.1340302f, -0.2209242f, -0.0150750f, -0.2848694f, +0.0935739f, +0.1069591f, +0.2331840f, -0.1176064f,
  -0.0989620f, +0.0630873f, -0.1792259f, +0.2983725f, +0.1533954f, +0.3425317f, +0.3072405f, +0.1711782f,
  +0.1138956f, -0.2252233f, -0.1769114f, +0.0937568f, +0.0009480f, +0.2516560f, +0.1503327f, +0.3162466f,
  +0.0204288f, +0.1760024f, +0.1443125f, -0.1236131f, -0.0316252f, -0.0923614f, +0.0424143f, +0.1697712f,
  +0.0255762f, +0.0610077f, -0.0002987f, -0.0056158f, +0.2406127f, +0.3234040f, +0.0356757f, +0.1592281f,
  -0.1311046f, +0.0043110f, +0.0317807f, -0.0729757f, +0.1365386f, -0.1133059f, +0.0481891f, +0.3857811f,
  -0.1061175f, +0.0124945f, -0.2179251f, +0.3748435f, -0.2657954f, +0.0793671f, -0.2260312f, -0.1680318f,
  -0.1482461f, +0.0967829f, -0.0881674f, -0.1361291f, -0.0946770f, -0.2008281f, +0.1636458f, +0.0785613f,
  +0.1518145f, -0.0379972f, -0.2668150f, -0.0367970f, -0.3078769f, -0.1353220f, +0.2610869f, -0.0653857f,
  -0.1017606f, +0.0162148f, -0.0406369f, -0.0139591f, -0.0588205f, -0.2246643f, +0.0763285f, -0.2176715f,
  +0.0263183f, -0.2936014f, -0.1844931f, -0.0422697f, -0.1279102f, +0.2707891f, +0.0756334f, -0.1793170f,
  +0.3085921f, +0.1437173f, +0.3691810f, -0.1176753f, -0.0614144f, -0.1383813f, +0.0979720f, -0.0292301f,
  +0.0913193f, +0.0887489f, +0.3455474f, +0.1466071f, -0.2679982f, +0.0516526f, +0.0649236f, +0.0423251f,
  -0.0542462f, -0.3985367f, +0.1493339f, +0.0755953f, -0.0088869f, +0.2177871f, +0.2010732f, -0.0289394f,
  +0.0194101f, +0.1874191f, -0.0483642f, -0.1040673f, +0.3115426f, +0.1925853f, +0.2173882f, +0.0773960f,
  -0.0533401f, -0.3089976f, +0.0796466f, -0.1655316f, -0.0555427f, -0.2055944f, +0.4925608f, +0.0273208f,
  +0.0665822f, +0.0035529f, +0.0084513f, -0.0061447f, +0.0523141f, +0.0085693f, -0.1130294f, -0.1142247f,
  +0.3796083f, +0.1988942f, +0.0142189f, -0.0608066f, +0.0788598f, -0.0214052f, -0.1047832f, -0.1539384f,
  -0.0701483f, +0.0030427f, -0.0006205f, +0.0072376f, -0.2649013f, -0.1535960f, -0.0489693f, -0.0731451f,
  -0.0210543f, +0.1561702f, +0.0730792f, +0.1558901f, +0.0634077f, -0.1766951f, +0.0736439f, +0.1351729f,
  -0.0644731f, +0.1125870f, -0.0201250f, -0.2662127f, -0.1685018f, -0.0971836f, -0.3431886f, +0.3137480f,
  +0.2223058f, +0.1467708f, -0.3107053f, +0.1445607f, +0.1928246f, -0.0626355f, +0.0074083f, +0.2486634f,
  +0.0382478f, -0.1365823f, -0.0815234f, -0.1245292f, +0.1308251f, -0.1448183f, +0.2453878f, +0.0300221f,
  +0.1481799f, -0.0173524f, +0.0685830f, +0.0594751f, -0.0346523f, +0.1521803f, +0.2331483f, -0.0862724f,
  +0.2120213f, +0.2137698f, +0.2086114f, +0.2586960f, -0.0461182f, -0.0949651f, -0.0122291f, -0.1477780f,
  -0.0038904f, +0.0159076f, +0.0795547f, -0.1172773f, -0.0102675f, -0.1792342f, -0.1389225f, -0.0697943f,
  -0.0114531f, +0.0617629f, +0.0540410f, -0.1280194f, +0.0808398f, +0.3787508f, +0.0285707f, +0.0769900f,
  -0.0314241f, -0.0441409f, +0.1820275f, +0.2230956f, +0.0335585f, +0.0288131f, -0.0447856f, +0.0957296f,
  -0.0107667f, +0.2430742f, -0.1026886f, +0.0257362f, +0.2677124f, +0.0433713f, -0.0592420f, +0.1416500f,
  -0.0484862f, -0.1342119f, +0.0715204f, +0.0461473f, +0.0529179f, -0.0201723f, -0.0790802f, -0.2403833f,
  +0.0327430f, +0.3719023f, +0.2196835f, -0.1943769f, -0.0473623f, +0.1168299f, +0.1229205f, -0.1196891f
);

const float biases[4] = float[4](
  -0.0054286f, -0.0114647f, +0.0157593f, -0.0410478f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer122 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0886213f, -0.0023623f, -0.2359257f, -0.0589335f, -0.2036046f, +0.1334629f, -0.0408025f, -0.1836562f,
  +0.0618224f, +0.2627854f, +0.1566332f, +0.1441780f, -0.1917879f, -0.0309993f, -0.0054103f, +0.0352877f,
  +0.1219833f, -0.0233106f, -0.1972567f, +0.0631954f, -0.2581064f, +0.2278454f, +0.0377281f, +0.1260580f,
  -0.3057907f, -0.1943501f, +0.2617877f, +0.0143147f, +0.0535313f, +0.1349322f, -0.0483844f, +0.1433038f,
  -0.2826042f, -0.0563848f, -0.0937212f, -0.0467742f, +0.0629319f, +0.0434834f, +0.1435824f, -0.0619460f,
  +0.1721039f, -0.1257580f, +0.0258753f, +0.1483777f, -0.2009528f, +0.1292771f, +0.1717814f, +0.2099064f,
  +0.0730115f, -0.0707488f, +0.0305190f, +0.0893387f, +0.2042901f, -0.0059453f, -0.2638844f, +0.0641352f,
  -0.2170424f, +0.0224416f, -0.1708314f, -0.2081495f, -0.0841944f, -0.0480537f, -0.0029360f, -0.0390915f,
  +0.0553160f, -0.2314231f, +0.0804844f, -0.2410300f, +0.0203152f, -0.1138982f, +0.0852693f, +0.0960893f,
  -0.0676916f, +0.2214969f, -0.1976181f, -0.0636840f, +0.0404068f, -0.1218666f, +0.1025284f, -0.0567426f,
  -0.0313675f, -0.0321919f, -0.3563889f, -0.2143633f, +0.1664108f, -0.0797960f, +0.1784701f, +0.1339039f,
  +0.0547105f, -0.0054354f, +0.0417284f, +0.0041212f, +0.0593338f, -0.0948086f, -0.0030046f, -0.0625397f,
  -0.1040330f, +0.1454272f, +0.0016751f, +0.1011199f, -0.0755313f, +0.1422554f, +0.0401803f, +0.0877751f,
  +0.0247063f, -0.2093363f, -0.3332092f, +0.1985291f, +0.1081461f, +0.0066305f, +0.0977475f, -0.0943743f,
  +0.0151698f, +0.0709582f, +0.1707471f, -0.0465362f, +0.1877435f, -0.3234538f, +0.0722349f, -0.0601622f,
  +0.1411052f, -0.0014624f, +0.1139616f, +0.2664988f, -0.0972425f, -0.0483657f, -0.0448300f, +0.2680773f,
  +0.0409575f, +0.2067637f, +0.2655264f, +0.0340641f, -0.0130085f, +0.0049393f, +0.2121760f, +0.0157237f,
  -0.0736159f, -0.1245937f, +0.1780082f, -0.1070099f, +0.0221281f, -0.1352074f, -0.2397882f, -0.1052193f,
  +0.0249550f, -0.0065796f, +0.0831816f, -0.0602630f, -0.0406562f, +0.2022890f, +0.0496171f, +0.3150692f,
  -0.0309285f, -0.1681583f, +0.4567147f, +0.3395171f, +0.1367805f, -0.0242617f, -0.2401904f, +0.0197210f,
  -0.0187553f, +0.1508126f, -0.2568249f, +0.0346655f, -0.1414265f, -0.0014938f, -0.0325060f, +0.1853916f,
  -0.0285541f, +0.1191218f, +0.1275904f, +0.2872236f, -0.1189537f, -0.0582193f, +0.1687875f, +0.1968843f,
  -0.0916151f, -0.3086353f, +0.0576580f, -0.1655595f, +0.0243007f, +0.3241790f, +0.1366176f, -0.0137615f,
  -0.1939770f, -0.2146192f, -0.0625690f, -0.1803050f, +0.2568473f, -0.0394223f, -0.2191323f, -0.0657604f,
  +0.1234121f, -0.0825571f, -0.1472019f, +0.0988135f, -0.0197666f, -0.0264920f, -0.0627433f, -0.1063431f,
  +0.0281215f, +0.2291821f, +0.0311353f, +0.1218455f, -0.0770587f, +0.0071165f, -0.3731674f, -0.1460993f,
  +0.1048560f, +0.0755964f, +0.0659497f, -0.2672659f, -0.0798973f, -0.2025309f, -0.0268889f, -0.1847380f,
  +0.0511589f, +0.0375534f, -0.1661715f, +0.1901413f, -0.0413614f, +0.0305419f, +0.3538697f, -0.1184148f,
  +0.3757972f, -0.0372458f, +0.1940088f, +0.0021208f, +0.1585426f, -0.0740340f, -0.0138626f, -0.3493324f,
  -0.0061793f, -0.2729305f, -0.1445030f, +0.0599723f, -0.2128840f, -0.2299204f, +0.1653744f, -0.0368587f,
  +0.3845294f, -0.2266844f, -0.0861338f, +0.0702487f, -0.1870939f, +0.1308735f, +0.2324686f, +0.0178577f,
  +0.0901185f, -0.0569377f, +0.0327178f, -0.0178811f, -0.1291204f, -0.0962665f, +0.5135976f, +0.0904184f,
  -0.0843788f, +0.0925926f, +0.0034615f, -0.1445065f, +0.1028702f, +0.0220185f, +0.1090169f, -0.2423640f,
  +0.0649348f, +0.1628679f, -0.1760073f, -0.3185346f, +0.2300402f, -0.1258345f, -0.2320664f, +0.1146251f,
  +0.0440670f, -0.2168375f, +0.1340545f, -0.1063900f, -0.0153454f, -0.3147911f, +0.0813133f, -0.0920773f,
  +0.0480084f, +0.1604502f, +0.2750739f, -0.0502893f, +0.1652439f, -0.2417870f, +0.0546112f, -0.0040947f
);

const float biases[4] = float[4](
  +0.0156954f, +0.0032409f, -0.0112392f, +0.0185930f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer123 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1086178f, +0.0877783f, -0.0178330f, +0.0177215f, -0.3016576f, -0.0471587f, -0.1182697f, -0.0641273f,
  +0.0820357f, -0.0861965f, +0.1091237f, -0.1098911f, +0.0958529f, -0.4127255f, +0.0806075f, +0.1929750f,
  -0.1120693f, -0.1088054f, -0.0785011f, -0.0456330f, +0.0762810f, +0.0463658f, -0.1161192f, +0.0831612f,
  +0.2491879f, -0.0293508f, -0.1962734f, -0.4209185f, -0.3161826f, -0.0151364f, -0.0143896f, -0.1599517f,
  +0.0589145f, +0.0615789f, +0.0443897f, -0.3315299f, -0.1497537f, -0.4220982f, -0.0427179f, -0.2643053f,
  -0.0325202f, +0.0238874f, -0.2481124f, -0.0091234f, +0.1739342f, -0.1211697f, -0.0783893f, -0.0931408f,
  -0.0474269f, +0.3284672f, -0.2317093f, +0.0746373f, -0.3479612f, +0.0865007f, -0.0714763f, -0.1731042f,
  +0.1669297f, +0.0973166f, +0.1682022f, +0.1106469f, +0.1502612f, +0.1546708f, -0.2034169f, +0.0995535f,
  +0.2359054f, +0.0635885f, +0.0281019f, +0.1093939f, -0.2182313f, +0.2240243f, -0.0863085f, -0.0357687f,
  -0.0413812f, -0.1941071f, -0.2158205f, +0.2055630f, -0.1047115f, -0.0597843f, -0.3319672f, +0.1704748f,
  +0.0816585f, +0.1861909f, -0.0956423f, +0.2311413f, -0.1018092f, -0.0343103f, +0.3418757f, +0.0274797f,
  +0.2944061f, +0.0147793f, +0.1085493f, +0.0346049f, -0.2420620f, -0.2598635f, -0.2940674f, +0.0432853f,
  -0.0017056f, -0.2378933f, -0.1578165f, -0.0589447f, -0.0138853f, -0.0171993f, -0.0578030f, +0.0414632f,
  +0.3463224f, +0.0752890f, -0.0216372f, +0.0944694f, +0.2555963f, -0.0718756f, -0.2946973f, -0.2311234f,
  -0.0411633f, -0.2258482f, -0.1530454f, +0.1096047f, +0.1310171f, -0.0757167f, -0.0395303f, +0.1652738f,
  -0.0400786f, -0.0752263f, +0.0790121f, +0.0831421f, +0.0527369f, +0.0815259f, +0.2438014f, +0.0482337f,
  +0.3239107f, -0.1963711f, -0.0634880f, +0.1819579f, -0.0337320f, +0.0748874f, -0.0771743f, +0.0849461f,
  +0.1378120f, +0.4220955f, -0.0901480f, +0.2167339f, +0.0945396f, -0.1044765f, -0.1620228f, +0.0410140f,
  +0.0581851f, -0.0972799f, -0.1370100f, +0.0927409f, -0.0995476f, -0.1266638f, +0.0340746f, +0.0399943f,
  +0.1124866f, +0.0464781f, +0.0049375f, -0.1515195f, +0.1183040f, -0.0297387f, +0.1083662f, -0.0555722f,
  +0.0269680f, +0.0597254f, -0.0879613f, +0.0902982f, -0.0074054f, -0.2363161f, +0.1739957f, -0.1029078f,
  +0.2299503f, +0.1061551f, +0.2450634f, -0.0128797f, +0.0534299f, -0.2580103f, +0.1025126f, -0.0787992f,
  +0.2600733f, +0.0270227f, +0.2262199f, -0.1559828f, +0.1555463f, +0.0364585f, +0.3416135f, -0.0678709f,
  -0.0772077f, -0.0158966f, -0.2344194f, +0.2228803f, +0.1088870f, +0.0218125f, -0.0967810f, -0.1049683f,
  +0.0220222f, +0.3148209f, +0.3305014f, -0.1993111f, +0.2994354f, -0.0734571f, -0.0565760f, -0.0537179f,
  +0.0680061f, +0.2214312f, +0.3058324f, -0.0344596f, +0.1350273f, -0.1399150f, +0.1995664f, -0.1113566f,
  -0.1767172f, -0.1437647f, -0.0366923f, -0.0554440f, -0.0515520f, +0.0520522f, -0.0533485f, -0.1329826f,
  +0.2219765f, +0.4019022f, -0.0515363f, -0.3316659f, +0.0855808f, -0.1641624f, +0.0834366f, +0.1456812f,
  -0.0042911f, -0.1476799f, +0.0615828f, -0.3144688f, +0.2133903f, -0.1522593f, +0.0549605f, +0.0234761f,
  +0.1903424f, -0.1065881f, +0.1461210f, -0.0642976f, +0.0840708f, -0.0990471f, +0.1634346f, -0.0978045f,
  +0.0824684f, -0.0073572f, +0.1177634f, +0.0027437f, -0.1529055f, -0.1176067f, +0.1062800f, +0.2016077f,
  +0.0559578f, -0.1190168f, +0.1540200f, -0.2457315f, +0.0665038f, +0.2631603f, -0.2815313f, +0.0729882f,
  +0.0470909f, +0.1662120f, +0.0611980f, +0.0406968f, -0.0676328f, +0.0342869f, -0.1314821f, +0.1329602f,
  -0.0390528f, -0.0584097f, -0.0199422f, +0.0284953f, -0.0419135f, -0.0524870f, +0.0642648f, -0.1334532f,
  -0.2249119f, -0.1118963f, -0.0572852f, -0.1157645f, +0.1290952f, -0.0618027f, +0.0362413f, +0.1083280f,
  +0.1185813f, +0.1711942f, -0.1868640f, -0.2054375f, -0.0624510f, -0.0013792f, -0.3545181f, +0.0841388f
);

const float biases[4] = float[4](
  -0.0333394f, -0.0065166f, -0.0513596f, -0.0599772f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer123 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0747389f, +0.1548668f, -0.1025101f, -0.0198600f, -0.0928647f, +0.0080369f, +0.0209948f, +0.0905754f,
  -0.0372851f, -0.2898016f, -0.0414365f, +0.0701414f, +0.0351063f, +0.0563252f, +0.1133114f, +0.2567680f,
  -0.0832271f, +0.2956128f, -0.1111310f, +0.0469882f, -0.1238587f, -0.0855301f, -0.2463790f, -0.1116837f,
  -0.2698486f, +0.2023886f, +0.0533979f, +0.1423933f, +0.0372080f, +0.0767731f, +0.0979256f, -0.0905925f,
  -0.0502783f, +0.0826278f, -0.0297355f, +0.0850612f, -0.0021530f, -0.0896963f, -0.1196543f, -0.1548771f,
  -0.0433339f, +0.0436326f, -0.0981472f, +0.0495878f, +0.1861076f, +0.1289410f, -0.1552177f, -0.0329781f,
  -0.3300202f, -0.0873718f, -0.0193751f, -0.0897417f, -0.0700472f, +0.1478505f, +0.0246592f, +0.0658207f,
  -0.0949824f, +0.1957949f, -0.0089232f, -0.1883703f, -0.0215084f, +0.0862437f, -0.1498383f, -0.0967525f,
  +0.0023944f, +0.0377243f, +0.0720729f, -0.0318688f, +0.0348204f, +0.0352261f, +0.1117944f, -0.0930387f,
  -0.2748852f, +0.1850883f, -0.0424637f, +0.0657540f, -0.0348306f, +0.0428393f, +0.2175137f, +0.0692125f,
  +0.2674942f, -0.1488850f, +0.1077238f, +0.1028895f, +0.0475519f, +0.0912641f, +0.0567719f, +0.0487708f,
  +0.2356425f, -0.0984986f, +0.0674512f, +0.0718773f, +0.0308456f, +0.0255733f, +0.2749448f, -0.2211156f,
  -0.0700729f, -0.1687308f, +0.1329004f, +0.1945447f, +0.1794329f, +0.3621597f, +0.0945606f, -0.1129557f,
  -0.0851397f, +0.0540661f, -0.0128362f, +0.1856634f, +0.1778366f, +0.2351289f, +0.0116959f, +0.0310504f,
  -0.1601076f, -0.1335670f, -0.2223955f, +0.0578994f, +0.1437590f, -0.0395949f, -0.0498372f, +0.1997639f,
  -0.0698783f, +0.1110558f, -0.0115571f, +0.0185794f, +0.1148780f, +0.0836515f, -0.1345398f, +0.0654263f,
  -0.0290016f, +0.0040184f, -0.0458889f, -0.0670296f, -0.0176704f, +0.2274005f, -0.0013421f, +0.2800144f,
  -0.0237519f, +0.1486228f, -0.0180146f, -0.1682701f, -0.1887504f, -0.1511774f, +0.2011509f, +0.1283204f,
  +0.0771846f, -0.0344934f, +0.0163120f, +0.0214410f, -0.1570148f, -0.0098757f, -0.0306294f, +0.3401113f,
  +0.0333030f, -0.2293833f, +0.1042352f, -0.0706893f, +0.1006171f, +0.1380094f, -0.0964751f, +0.1086535f,
  +0.4026069f, -0.1577832f, -0.0676487f, +0.0230951f, -0.0737348f, +0.0984456f, +0.0711287f, +0.1314944f,
  -0.1009117f, +0.1038371f, +0.1382266f, -0.1502249f, -0.1298582f, +0.0592198f, +0.0926045f, -0.1679894f,
  +0.1387890f, +0.0417495f, +0.3098246f, -0.2881602f, +0.0995303f, +0.1270359f, +0.0396698f, +0.0004587f,
  -0.0268725f, -0.0015240f, -0.2404145f, -0.1061077f, +0.0505262f, -0.0890817f, +0.0007499f, -0.0560692f,
  +0.1340018f, +0.0640424f, -0.0046738f, -0.1820700f, +0.0736646f, +0.3338151f, +0.1130541f, +0.1103714f,
  -0.0577953f, -0.2467209f, -0.1956788f, -0.2863804f, +0.3266849f, -0.2517258f, +0.0301348f, +0.0246163f,
  -0.1703001f, -0.0555710f, +0.2653361f, -0.1712934f, +0.3309096f, +0.0661636f, +0.1539929f, -0.1037152f,
  +0.0220722f, +0.0429058f, -0.3402961f, +0.0315028f, -0.0264613f, -0.0257991f, +0.2955892f, +0.0567318f,
  +0.1714299f, +0.2554653f, -0.0012840f, -0.0763824f, +0.3244186f, -0.0745530f, -0.0429389f, +0.1356545f,
  -0.1718350f, -0.0922863f, +0.0834038f, +0.2247786f, +0.1025128f, +0.1643305f, -0.0379858f, -0.0495126f,
  +0.0196438f, -0.1513266f, -0.0532888f, +0.1517158f, +0.1502576f, -0.0663945f, +0.0011485f, +0.0741575f,
  -0.1509759f, +0.3981790f, -0.0758734f, +0.1522259f, +0.0166321f, +0.2769517f, +0.1958118f, +0.0304402f,
  +0.0394979f, -0.0035088f, -0.0117873f, -0.0329876f, -0.3019461f, -0.0291898f, -0.0490490f, -0.0024032f,
  +0.0495820f, +0.0083323f, +0.2261864f, +0.0024438f, -0.1313768f, -0.0082707f, -0.0572676f, +0.0408716f,
  -0.1017484f, -0.0488209f, +0.0552530f, +0.1444640f, -0.1570506f, +0.0783794f, -0.0426123f, -0.0171732f,
  +0.0589465f, +0.0048672f, -0.0856299f, +0.0905291f, -0.0434439f, +0.0224391f, +0.0149684f, -0.0290830f
);

const float biases[4] = float[4](
  +0.0111959f, +0.0054201f, -0.0574655f, +0.0230386f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer124 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1832170f, -0.0294578f, +0.0928818f, +0.0324503f, +0.1658214f, -0.1388055f, +0.2234652f, +0.0268736f,
  +0.0215903f, +0.2148525f, +0.0563065f, +0.0546096f, +0.1906405f, -0.1433197f, +0.0467326f, -0.1334338f,
  -0.1679908f, +0.0697941f, +0.0963933f, +0.0326850f, -0.0379265f, -0.1234423f, -0.0347655f, +0.1530906f,
  +0.0723155f, -0.1020036f, +0.3154191f, +0.1416526f, +0.0544897f, -0.0701665f, -0.0548138f, -0.1491330f,
  -0.0680680f, +0.0134257f, +0.2070978f, +0.0186351f, +0.0581391f, +0.0934005f, -0.0497742f, +0.1248581f,
  -0.0420012f, +0.0057512f, +0.0680586f, -0.2008941f, -0.3161276f, -0.0158618f, +0.0578169f, -0.0440936f,
  +0.2289408f, +0.0974289f, -0.1980682f, -0.0744715f, -0.0020918f, -0.0711531f, -0.1021602f, +0.0362308f,
  -0.1442864f, -0.0964503f, +0.1356605f, +0.1701758f, -0.1228879f, -0.1526063f, +0.0269377f, +0.0882494f,
  -0.2165304f, -0.0986902f, -0.1201928f, +0.1248566f, +0.1825640f, +0.1318099f, -0.0504052f, +0.2521957f,
  +0.0843230f, +0.0844026f, -0.0468835f, -0.1882049f, -0.0015934f, +0.0146054f, -0.0591992f, -0.0243738f,
  +0.1336803f, +0.2192660f, +0.1717008f, +0.0688439f, -0.0218141f, +0.1581119f, +0.0410068f, -0.1020897f,
  -0.4731328f, -0.0529301f, -0.0217211f, -0.1873621f, +0.1635053f, -0.1298281f, -0.1080139f, +0.0241166f,
  -0.1671714f, -0.0934799f, -0.0546030f, +0.0422509f, -0.2710705f, +0.1872437f, +0.1222230f, +0.4441944f,
  +0.2970883f, -0.0695378f, +0.0606794f, +0.0391069f, -0.2074045f, +0.2034705f, +0.1918326f, -0.2744382f,
  -0.1180819f, +0.1530891f, -0.0179541f, +0.0474776f, +0.1052073f, +0.0565983f, +0.1103333f, +0.1725752f,
  -0.1602553f, +0.2339885f, +0.0639222f, -0.0616653f, -0.0246565f, +0.1434177f, -0.1138397f, -0.1262368f,
  -0.1999833f, -0.0720948f, -0.1535659f, +0.0563131f, +0.0078141f, +0.1443432f, +0.0228469f, +0.0248073f,
  +0.2110383f, -0.1015730f, +0.2784603f, +0.1082602f, +0.0629321f, +0.0557095f, +0.2044540f, +0.3032151f,
  +0.2933286f, +0.2167531f, -0.1439577f, +0.2139179f, +0.0639380f, -0.2053623f, +0.0700317f, -0.0123227f,
  +0.0378921f, +0.3988171f, +0.1661023f, +0.0599665f, +0.0007377f, +0.1338424f, +0.1351912f, -0.4213645f,
  +0.0874741f, +0.0325626f, -0.0369658f, -0.1821575f, -0.1167037f, +0.0635397f, -0.2607290f, -0.0965328f,
  +0.0661524f, +0.0487409f, +0.1070900f, -0.2199066f, -0.1118367f, +0.0461496f, -0.0184617f, +0.0412544f,
  -0.3545438f, +0.0488486f, -0.1229069f, -0.1349594f, +0.2557519f, +0.0519611f, -0.3351326f, +0.1560562f,
  -0.0841654f, -0.1099862f, +0.2199541f, -0.1138326f, -0.0973829f, -0.0028238f, +0.1065309f, +0.3033767f,
  -0.1123395f, +0.1058615f, +0.2412748f, +0.0669893f, +0.1307817f, -0.0421754f, -0.3245688f, -0.0088542f,
  +0.0671027f, +0.0282298f, -0.0718953f, -0.0748464f, +0.0672351f, +0.0506133f, +0.0303173f, -0.2200827f,
  -0.0938168f, +0.2854315f, +0.2386966f, -0.2667391f, -0.2444545f, +0.1424955f, +0.0662700f, +0.2329813f,
  -0.0992411f, -0.0337246f, +0.0152425f, -0.0171418f, -0.1582223f, +0.1147000f, +0.2188893f, +0.2521025f,
  -0.0133165f, -0.0895860f, +0.1073061f, -0.1732050f, -0.0300289f, +0.3860497f, +0.1988573f, +0.0879378f,
  -0.3518956f, -0.0366430f, -0.3095160f, +0.0899476f, +0.2034854f, -0.2296522f, +0.0158024f, +0.0135378f,
  +0.0334825f, -0.0831477f, +0.1274736f, +0.0516563f, +0.2251218f, +0.1492932f, +0.1856820f, -0.4884243f,
  +0.0354744f, -0.0873779f, +0.0413183f, +0.2339254f, +0.0656421f, -0.1883154f, -0.1259388f, +0.2767734f,
  -0.0540085f, +0.0135913f, +0.0942889f, +0.0544751f, +0.1685038f, -0.1651562f, -0.0277042f, -0.1406315f,
  +0.1145234f, -0.0951268f, -0.1338880f, -0.0987136f, -0.1295483f, +0.1401685f, +0.0773588f, +0.0775649f,
  -0.0712176f, +0.0691099f, -0.0607214f, +0.1031439f, +0.2091631f, -0.0048766f, +0.0093928f, -0.0004762f,
  +0.0308271f, +0.1014958f, +0.0185432f, +0.3077277f, -0.1117110f, -0.0514422f, -0.1714530f, -0.0417055f
);

const float biases[4] = float[4](
  +0.0001006f, -0.0091534f, +0.0164598f, -0.0301114f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer124 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0606552f, -0.0880449f, +0.1750268f, +0.0081201f, -0.0545083f, -0.1153632f, -0.1297982f, +0.0544019f,
  +0.0214393f, +0.2307483f, +0.1636547f, +0.0912969f, -0.0548316f, +0.1103297f, +0.0149986f, +0.1543110f,
  +0.3096664f, -0.0651886f, -0.1135058f, +0.2273530f, +0.0147343f, -0.0655034f, -0.0977654f, +0.0000514f,
  -0.2120579f, -0.0357557f, +0.1842784f, -0.0506702f, -0.1569038f, +0.0060692f, -0.1683682f, +0.0211070f,
  +0.0388016f, -0.1620746f, -0.2296075f, +0.0087700f, -0.0351817f, +0.0171240f, +0.1607144f, -0.2123924f,
  -0.4072428f, +0.0476428f, +0.0690834f, +0.0661803f, -0.0533684f, +0.0596255f, -0.1108246f, -0.0305316f,
  -0.1402219f, -0.0325991f, -0.0534407f, +0.0752805f, +0.1071221f, -0.0683411f, -0.0757381f, +0.1053804f,
  +0.0235772f, +0.0559428f, -0.0049099f, +0.0191175f, +0.2140293f, -0.0083535f, -0.0770881f, -0.1120910f,
  +0.2618353f, +0.0010128f, -0.0731637f, +0.0603897f, -0.0750241f, -0.1808158f, -0.1575889f, +0.1534873f,
  +0.1274597f, +0.2804286f, -0.3201261f, +0.1313182f, -0.0296674f, +0.1460385f, +0.1797371f, +0.0248483f,
  +0.2403812f, -0.0582059f, +0.2984281f, +0.4024728f, -0.0693566f, +0.2254214f, -0.1260966f, +0.2080761f,
  -0.1755163f, +0.0380714f, +0.1593633f, -0.0026189f, -0.1939315f, -0.0399030f, -0.2910679f, -0.1189314f,
  +0.0951511f, +0.1400686f, -0.1387837f, -0.0566069f, -0.2020577f, -0.0232847f, -0.0621241f, -0.1180895f,
  -0.1943655f, +0.1723633f, -0.0651594f, +0.0041907f, +0.1591512f, -0.1327916f, +0.0554107f, +0.1429045f,
  +0.1584966f, +0.1317689f, -0.0115993f, -0.0118025f, -0.2628151f, -0.1099456f, +0.1718201f, +0.1205584f,
  +0.3673928f, +0.0326199f, +0.1816996f, -0.1176557f, +0.1216035f, -0.1253427f, +0.0250065f, +0.0931699f,
  +0.0505298f, +0.2198260f, +0.2990254f, -0.0338198f, -0.0355975f, -0.2930947f, +0.1260580f, -0.0403097f,
  +0.0581930f, -0.1281759f, -0.2621820f, -0.1044223f, +0.0652534f, -0.2964996f, +0.0132355f, -0.1388879f,
  -0.1114365f, -0.2819475f, +0.0344431f, +0.2346011f, -0.1007448f, +0.0675122f, -0.0627798f, -0.0693254f,
  -0.1119044f, -0.1941210f, -0.1230121f, +0.0422384f, -0.1054716f, -0.0947718f, -0.0587059f, +0.0212431f,
  +0.2140489f, +0.0440478f, -0.4722409f, -0.0529365f, -0.0043776f, +0.0564541f, +0.0316348f, -0.0026799f,
  +0.2460120f, -0.2053145f, +0.2917343f, -0.1311536f, +0.0514805f, +0.1044575f, +0.0263562f, -0.0959317f,
  -0.1357037f, +0.0996895f, -0.2240583f, -0.1188235f, +0.1832138f, +0.2086468f, -0.3660071f, +0.0813525f,
  +0.0128537f, +0.0024154f, -0.0180147f, +0.0561226f, +0.0169403f, +0.0578810f, +0.1826086f, -0.1061902f,
  +0.1460668f, -0.0107284f, -0.0869594f, +0.1885058f, +0.2081171f, -0.1947652f, +0.0708168f, -0.0928913f,
  -0.0755440f, +0.1463830f, -0.0514825f, +0.1051193f, +0.2010279f, +0.1461518f, -0.0445440f, +0.3039274f,
  -0.0919775f, -0.2590834f, -0.1369156f, -0.0936458f, -0.1269796f, -0.0472621f, +0.2011930f, +0.2422345f,
  +0.0355584f, -0.0362661f, -0.1303114f, +0.0082411f, +0.0829265f, -0.1522830f, -0.2491074f, +0.0309934f,
  +0.0711229f, +0.2100798f, -0.0711581f, +0.3602694f, -0.0678891f, +0.0732735f, +0.0118568f, +0.1506092f,
  +0.2073089f, +0.0478093f, +0.2441959f, +0.2039544f, -0.1781431f, -0.0158132f, -0.0158737f, +0.0301877f,
  -0.0373386f, +0.1048198f, +0.2334399f, +0.0761957f, +0.0269705f, -0.1307400f, -0.1476650f, +0.2740508f,
  -0.2413625f, +0.2033369f, -0.1620151f, -0.0982260f, +0.2624874f, +0.0868386f, +0.1371793f, -0.1050298f,
  -0.1917272f, -0.0812537f, -0.0154321f, -0.0140388f, -0.0482231f, +0.0148778f, +0.2937802f, +0.0784425f,
  +0.1285009f, -0.1517736f, +0.3795382f, +0.1446920f, +0.0124341f, +0.1184783f, -0.2113879f, -0.2195563f,
  +0.1132356f, +0.1839692f, +0.1368858f, +0.0280353f, -0.1979603f, -0.1150549f, -0.4964386f, -0.2266124f,
  +0.0942435f, +0.2390851f, -0.0217396f, -0.0734450f, +0.2535465f, +0.1500087f, -0.1040182f, +0.0953625f
);

const float biases[4] = float[4](
  +0.0104392f, -0.0019785f, -0.0061862f, +0.0086693f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer125 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1106704f, +0.2318450f, +0.0333449f, +0.0794253f, -0.0384505f, -0.1245119f, +0.1284571f, -0.0678505f,
  +0.1103979f, +0.0370882f, -0.0650965f, -0.0669329f, +0.0975105f, -0.1193995f, +0.0778889f, +0.2903201f,
  +0.0973020f, +0.0485290f, +0.4117989f, -0.0847250f, -0.1100029f, -0.1554424f, +0.0504019f, -0.0415099f,
  +0.2003860f, -0.1615230f, +0.2185479f, -0.0124772f, -0.2272008f, -0.0914642f, +0.1867658f, -0.0173123f,
  +0.0791523f, -0.1785801f, +0.1786738f, -0.0202733f, +0.0980088f, +0.0696652f, +0.1464728f, +0.3801678f,
  -0.3838737f, -0.1124028f, +0.1778727f, +0.0626515f, -0.0763643f, -0.2862527f, +0.2978631f, +0.2534162f,
  -0.0979801f, +0.0155098f, -0.0702517f, +0.2167421f, -0.0561985f, -0.1447534f, +0.0318245f, +0.2854171f,
  +0.2225397f, -0.0365251f, -0.0273644f, -0.0242768f, -0.2002896f, +0.1711044f, -0.0643614f, -0.2632324f,
  +0.1531964f, +0.0114427f, +0.1768680f, +0.0594194f, -0.0246237f, +0.1041598f, +0.0602502f, +0.1748354f,
  +0.0804926f, +0.0872921f, +0.3112099f, -0.2585796f, -0.0358913f, +0.0047006f, -0.1871090f, +0.1961386f,
  -0.0837642f, +0.1453706f, +0.1877404f, -0.1142708f, -0.0029445f, +0.0937866f, -0.0489848f, -0.0561495f,
  -0.1907149f, +0.1668563f, -0.0136138f, -0.0998996f, +0.1136689f, -0.3328217f, -0.0464070f, -0.0821277f,
  +0.3614025f, -0.1494394f, -0.0890112f, -0.0853512f, -0.1126943f, -0.1376753f, -0.0489668f, -0.0433537f,
  -0.1829024f, -0.0919567f, +0.0723142f, -0.3577400f, +0.0656576f, -0.3108565f, +0.0966460f, -0.2488288f,
  +0.2104758f, -0.1936145f, +0.0970770f, -0.0238498f, -0.2004455f, -0.0341473f, +0.1366091f, -0.2056240f,
  +0.0450080f, +0.0677212f, -0.0073339f, -0.0750535f, -0.0409904f, +0.0059997f, +0.0888456f, -0.0184912f,
  -0.1038587f, -0.1927650f, +0.1994137f, -0.3116241f, +0.1526420f, -0.1027325f, +0.2454942f, -0.1208621f,
  +0.0837266f, +0.0514927f, +0.0042801f, -0.1918770f, +0.2439977f, -0.0184488f, -0.1418392f, -0.0609855f,
  +0.1232178f, +0.2171842f, -0.1296282f, -0.3012842f, +0.1383204f, -0.0482167f, -0.3467154f, -0.0315529f,
  -0.0123888f, +0.1188496f, +0.2148639f, -0.0876235f, +0.1060574f, +0.1488130f, +0.1871401f, +0.0667653f,
  +0.0698420f, +0.2704137f, +0.1063742f, +0.0439865f, -0.0578470f, +0.1138470f, -0.1386642f, -0.2243332f,
  -0.2877475f, -0.1920339f, -0.0996526f, +0.1458167f, -0.2827643f, +0.2211125f, +0.0214968f, +0.2151664f,
  -0.0166278f, -0.0497650f, -0.2010300f, +0.3135669f, -0.2565384f, +0.1452508f, -0.3051317f, +0.1588713f,
  -0.0968804f, +0.2096816f, +0.2202380f, +0.0492901f, -0.1119413f, -0.1500480f, +0.0024297f, -0.0815624f,
  +0.1633268f, +0.1503400f, +0.0503475f, +0.0240301f, +0.2086406f, +0.0427852f, +0.0273060f, -0.3088280f,
  -0.3984544f, -0.0878126f, -0.1857470f, +0.0364019f, +0.0513143f, -0.1221299f, -0.1122178f, -0.1674664f,
  -0.0109694f, +0.0657163f, +0.0170212f, +0.0137791f, +0.1700340f, +0.2099567f, -0.1882670f, +0.0632517f,
  -0.0845710f, -0.3215792f, +0.1066540f, -0.0374288f, -0.0991744f, +0.0792937f, +0.0246762f, +0.1265884f,
  +0.0236691f, -0.1351634f, +0.0286807f, -0.1836851f, -0.0082391f, +0.0160221f, +0.1726695f, -0.0397441f,
  +0.1448645f, -0.0765908f, -0.3195297f, -0.0647401f, -0.0835848f, -0.2878196f, +0.1842073f, -0.0048776f,
  +0.0793162f, -0.1549334f, +0.1161225f, -0.2427568f, +0.0646962f, +0.2386203f, -0.1185301f, -0.1122999f,
  -0.0121095f, -0.1825620f, -0.0265326f, -0.0456163f, -0.0225380f, +0.1018081f, -0.0458692f, +0.0673874f,
  -0.2077598f, -0.2101413f, +0.0776180f, -0.1299621f, +0.1319783f, +0.0601578f, +0.1266958f, +0.1533209f,
  -0.1706529f, -0.1304497f, -0.1848803f, -0.0305854f, +0.0512241f, +0.0789080f, +0.2142144f, +0.1839042f,
  +0.1800994f, +0.0652773f, -0.1147014f, +0.1138937f, +0.1816792f, +0.0139294f, +0.1388054f, +0.0138615f,
  -0.0290531f, -0.1684016f, +0.2264335f, +0.0635195f, -0.0040852f, -0.1558403f, +0.1963443f, -0.1744371f
);

const float biases[4] = float[4](
  -0.0010624f, -0.0305195f, -0.0377836f, +0.0345291f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer125 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0832666f, +0.0499663f, +0.3230166f, +0.0245974f, +0.1232260f, +0.0377154f, +0.1109677f, +0.2158981f,
  -0.0984868f, -0.2126220f, +0.1005173f, -0.1842008f, -0.1000876f, +0.3304375f, -0.1221129f, +0.0586464f,
  -0.3699261f, -0.1286167f, +0.4157456f, -0.1128320f, +0.1305957f, +0.2082705f, -0.1093260f, +0.1754841f,
  +0.0727965f, -0.1688565f, +0.2701628f, -0.0021565f, +0.0576920f, +0.0204251f, +0.1129802f, +0.0654508f,
  +0.1532356f, -0.2318025f, -0.0980396f, +0.1119506f, +0.0240045f, +0.1785704f, -0.0606643f, +0.2876036f,
  +0.2538446f, +0.2566223f, +0.0225031f, +0.0366794f, -0.0665448f, +0.2386880f, -0.0260659f, +0.0215108f,
  -0.0709267f, +0.0114919f, -0.0641565f, +0.0416367f, -0.0765972f, +0.2204879f, -0.0703530f, +0.1120250f,
  +0.1342537f, -0.0857091f, +0.2150535f, +0.2173437f, -0.2551857f, +0.0122804f, +0.1093864f, +0.1585642f,
  +0.2912906f, +0.0537043f, +0.1915514f, -0.2125156f, -0.1181318f, +0.0097411f, -0.0231945f, +0.0724799f,
  -0.0603529f, +0.1614590f, +0.0677675f, +0.0314390f, -0.2250979f, +0.2126900f, -0.1332240f, +0.1824000f,
  -0.3694492f, +0.0245773f, +0.1745717f, -0.0422475f, +0.0929823f, +0.1222677f, -0.2121728f, +0.1736529f,
  +0.0750520f, +0.2470632f, +0.0183163f, +0.0734599f, +0.2211882f, -0.2024104f, +0.0136317f, -0.1200199f,
  -0.0750334f, -0.0889395f, +0.1262358f, -0.0969368f, -0.0972196f, -0.1991194f, -0.1064207f, +0.0434992f,
  +0.1338205f, +0.0115327f, -0.0867868f, -0.0474648f, -0.2021301f, -0.2567933f, +0.1566658f, +0.3306460f,
  -0.4122162f, +0.1061031f, +0.2571377f, +0.1705331f, -0.1200448f, +0.1495395f, -0.1873596f, +0.0671172f,
  -0.0405274f, -0.1474717f, +0.0231198f, +0.0864483f, -0.0963705f, -0.1983389f, -0.0337382f, -0.0298603f,
  -0.0107989f, +0.1015761f, -0.0791428f, -0.0587637f, -0.0491616f, +0.0819626f, -0.2821571f, -0.2181388f,
  -0.0255144f, -0.0433897f, +0.1839265f, +0.1987915f, -0.0828083f, +0.1467905f, -0.0376394f, +0.0947397f,
  -0.0789912f, +0.3358227f, +0.1762127f, -0.4516153f, +0.0814588f, +0.5445848f, -0.0030968f, -0.0868421f,
  +0.2554241f, -0.0871046f, +0.0533534f, -0.0850939f, +0.0946625f, -0.0123549f, +0.2090568f, +0.2774127f,
  +0.1458802f, -0.0318363f, +0.1563226f, -0.1422707f, +0.0564993f, +0.1515691f, -0.1367870f, +0.2304357f,
  -0.3059385f, -0.0309450f, +0.2412444f, -0.2474891f, -0.0382231f, -0.0248087f, +0.0983154f, +0.0020492f,
  +0.0221543f, +0.0956775f, -0.1183137f, -0.1078076f, +0.2824553f, +0.0561774f, -0.1791664f, +0.1398139f,
  +0.0877671f, -0.2850583f, +0.0979292f, -0.0483344f, -0.1527185f, -0.2110708f, +0.0245351f, -0.2017095f,
  +0.0537071f, -0.0064003f, +0.1811562f, -0.2115919f, +0.0966237f, -0.0628627f, +0.0930968f, +0.3006450f,
  -0.0031843f, -0.5944150f, +0.1502459f, -0.3290668f, +0.1857082f, +0.1697040f, +0.1266838f, -0.0556938f,
  +0.2743488f, -0.0947186f, -0.1657403f, -0.1308860f, +0.2719423f, -0.2953299f, +0.0141684f, +0.1526854f,
  +0.1486747f, +0.2478340f, +0.3481832f, +0.1123638f, -0.0074467f, +0.0812696f, +0.1563334f, +0.0689691f,
  -0.4120075f, +0.0124694f, +0.1690887f, +0.2875116f, +0.1683143f, +0.0178618f, +0.2433763f, +0.1497162f,
  -0.1805471f, +0.0544382f, +0.1219982f, -0.0443682f, -0.1268458f, +0.2162964f, -0.3569083f, -0.0651396f,
  -0.2328858f, +0.0107473f, -0.0439133f, +0.0306698f, +0.0070948f, +0.1374331f, +0.0743485f, +0.0140407f,
  +0.1186259f, +0.2160274f, -0.1910259f, +0.0065679f, +0.0680483f, +0.0289250f, -0.0545226f, -0.2039057f,
  -0.0279362f, -0.1444310f, +0.2537175f, -0.0443387f, +0.0926759f, +0.1229829f, +0.0234102f, +0.0125206f,
  +0.1105083f, +0.1072433f, +0.1556487f, +0.2840419f, -0.1586769f, -0.2063321f, -0.0030963f, +0.1098222f,
  +0.0278627f, +0.1878156f, +0.0890424f, +0.1056691f, -0.1258970f, +0.1349642f, -0.1666499f, -0.1332583f,
  -0.3442220f, -0.1601482f, -0.3144125f, +0.0209163f, +0.1444310f, +0.1220677f, +0.1277238f, +0.1964279f
);

const float biases[4] = float[4](
  -0.0378749f, +0.0260946f, -0.0498935f, +0.0038481f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer126 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0537289f, -0.1046161f, -0.1051809f, -0.2931536f, -0.0256174f, +0.0721190f, +0.3835471f, -0.0120327f,
  +0.0546185f, +0.1128046f, +0.1466320f, -0.0242887f, -0.0190243f, -0.1966794f, +0.0921677f, -0.0739620f,
  +0.0856264f, -0.0562087f, +0.2741509f, -0.1097885f, +0.1176463f, -0.1070157f, +0.2038728f, +0.0893440f,
  +0.1072764f, +0.2441991f, -0.1785588f, -0.1716080f, +0.0882380f, +0.1922398f, +0.2240823f, -0.2521183f,
  +0.0437289f, -0.1542889f, -0.1568166f, -0.3097440f, -0.0991599f, +0.1253961f, -0.3147613f, +0.1631643f,
  +0.1079495f, +0.1705783f, -0.0888609f, -0.0971586f, +0.1482243f, +0.0042656f, +0.0367228f, +0.0899760f,
  +0.1794634f, -0.0274536f, -0.0381124f, -0.0874654f, +0.2655868f, -0.1752390f, -0.0550404f, -0.1187043f,
  -0.0377519f, -0.0072262f, -0.0413392f, +0.2024425f, +0.0984262f, -0.0806921f, -0.0048130f, -0.1109967f,
  -0.3010949f, +0.1096402f, +0.1454547f, +0.1956146f, +0.3155361f, +0.0459885f, +0.0880368f, -0.1184359f,
  +0.3423884f, +0.0321225f, -0.0216908f, +0.0992026f, +0.0293156f, -0.1066080f, -0.0155063f, +0.0379847f,
  -0.2084774f, +0.0564409f, +0.0171034f, +0.3210472f, -0.2181036f, -0.0261222f, +0.0814322f, +0.1025178f,
  -0.1274736f, -0.1112718f, +0.0006219f, +0.2486951f, -0.0647575f, -0.0775951f, +0.1598104f, -0.1409327f,
  -0.1860955f, -0.0099853f, -0.1824933f, -0.1665619f, -0.1690226f, -0.3321801f, +0.0633533f, +0.2761370f,
  -0.2318725f, +0.0935158f, -0.2517285f, +0.2073870f, +0.0179198f, +0.0772116f, -0.1061163f, +0.1794607f,
  +0.1946478f, +0.0990530f, +0.1037990f, +0.1502865f, -0.0492657f, -0.0527553f, +0.0445157f, +0.0476611f,
  -0.0715285f, +0.1394791f, +0.3142844f, +0.0438750f, +0.0779081f, -0.1217478f, +0.1055746f, +0.3150891f,
  +0.0312304f, -0.0658277f, -0.0567406f, +0.0001300f, +0.1556968f, +0.2157757f, -0.0270342f, -0.1612550f,
  +0.1623676f, -0.0742654f, +0.0644148f, +0.0831673f, -0.0878226f, -0.1491402f, -0.0068140f, -0.2421395f,
  -0.1056165f, -0.1098337f, +0.2059427f, -0.0161586f, +0.1640184f, -0.0081537f, -0.0457243f, +0.1464128f,
  -0.1225539f, +0.0589550f, -0.2289787f, +0.0029058f, -0.0020927f, -0.1672019f, +0.0738997f, +0.0105859f,
  -0.2794119f, +0.1432094f, -0.0546620f, +0.1697339f, -0.0647859f, -0.3719825f, +0.1047317f, -0.0512596f,
  +0.0477994f, -0.1937136f, +0.1947331f, +0.0525948f, +0.1656868f, +0.1446103f, -0.2328413f, -0.4803153f,
  +0.1599842f, +0.0760434f, +0.2322582f, -0.0453386f, -0.0260448f, +0.0771216f, -0.1048348f, +0.1604535f,
  -0.2395851f, +0.0589198f, -0.1936180f, +0.0403565f, -0.4222894f, +0.0486597f, -0.0762847f, +0.0009046f,
  -0.1070404f, -0.0368487f, -0.0635681f, -0.2764052f, +0.0250393f, +0.1291307f, +0.0822691f, -0.1761861f,
  -0.0148689f, -0.1857325f, +0.1698978f, -0.0547208f, -0.0364256f, -0.2702700f, -0.0929956f, +0.0313707f,
  -0.2133680f, -0.0925438f, -0.1285841f, -0.0299648f, -0.1813926f, +0.1305582f, -0.4749207f, -0.1385714f,
  -0.3450202f, -0.0437360f, -0.0494373f, +0.0722527f, +0.1420265f, -0.3031051f, -0.0674145f, -0.1029304f,
  +0.1448983f, +0.0340654f, -0.1578981f, +0.2773050f, -0.1303374f, -0.3409387f, -0.0081573f, -0.0876840f,
  +0.2746161f, +0.1095163f, -0.2281724f, -0.2667771f, +0.0119960f, -0.1224482f, -0.0683231f, -0.0249664f,
  -0.0354932f, +0.2439217f, +0.1654567f, +0.2665736f, -0.0043043f, -0.0490419f, +0.0335229f, -0.1735941f,
  -0.2245671f, +0.2357929f, +0.0904428f, -0.1768269f, +0.1016310f, -0.1541652f, +0.0873184f, -0.1708755f,
  -0.0571507f, +0.0799211f, -0.0775144f, +0.0073130f, +0.2238258f, +0.0545468f, -0.0145096f, +0.0855123f,
  +0.1865285f, +0.2375788f, -0.2111244f, +0.0819586f, -0.0048141f, +0.1113378f, +0.0032904f, -0.3844360f,
  +0.0118424f, +0.2211443f, +0.0501182f, +0.0477238f, +0.1793019f, -0.0812467f, +0.0957144f, +0.1400533f,
  +0.1330914f, -0.1497466f, +0.1076730f, -0.0292246f, -0.1026517f, +0.1031604f, +0.0524995f, +0.0213173f
);

const float biases[4] = float[4](
  -0.0041561f, +0.0075607f, +0.0128201f, -0.0094581f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer126 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0400336f, +0.1252494f, -0.0448208f, -0.1749998f, +0.0565339f, -0.0344267f, +0.1478527f, +0.1155082f,
  -0.0535252f, -0.1101789f, +0.0473073f, -0.2328380f, +0.0564925f, +0.1129975f, +0.0593721f, -0.0103031f,
  -0.0944767f, +0.2417819f, +0.0729014f, -0.0177350f, +0.1624779f, -0.0291587f, +0.1100631f, -0.0389110f,
  -0.0293738f, -0.0113233f, -0.1124845f, +0.1685419f, +0.0718059f, -0.1880509f, -0.0291858f, +0.1114227f,
  +0.0946065f, +0.3475638f, +0.2767895f, +0.0889199f, +0.2422754f, +0.0890760f, +0.3135727f, +0.0572976f,
  -0.0025801f, +0.0115407f, -0.0962760f, +0.1150794f, +0.1352664f, +0.0150804f, +0.0974062f, +0.0722371f,
  +0.0832635f, +0.2832938f, +0.0590153f, +0.0887338f, +0.0105539f, +0.2123379f, +0.1180371f, -0.2077813f,
  -0.1143522f, +0.0369820f, -0.1036728f, +0.1230737f, -0.1405195f, -0.0251776f, +0.3381858f, -0.0517287f,
  -0.1372531f, -0.0525198f, +0.0315828f, +0.1601523f, -0.0601067f, +0.1371579f, -0.0811741f, -0.0552509f,
  -0.0295045f, -0.0433559f, -0.0526639f, -0.0492724f, +0.0368529f, -0.0637608f, +0.0843475f, -0.3041635f,
  +0.3691512f, +0.1092888f, +0.1975791f, +0.0639210f, -0.1146039f, -0.1001626f, -0.2288475f, -0.2119493f,
  -0.0254371f, +0.1134249f, +0.1187828f, +0.0933231f, -0.1927023f, +0.0384902f, -0.0606853f, +0.0738473f,
  -0.0748179f, +0.2895466f, +0.0544628f, -0.1456734f, -0.3800888f, +0.2293079f, -0.0991050f, +0.1257125f,
  -0.0932593f, +0.0855847f, +0.0415531f, -0.4107558f, -0.0723991f, +0.1292592f, +0.0597628f, +0.0427018f,
  +0.3052831f, -0.0539835f, -0.0732614f, +0.1371297f, -0.3985665f, -0.0067377f, +0.1594603f, -0.0208464f,
  -0.1043960f, +0.2787023f, -0.1430883f, +0.1246783f, -0.0813187f, +0.0193220f, -0.0463002f, -0.0547745f,
  +0.1082291f, +0.0113568f, -0.0204516f, +0.0961041f, -0.1070997f, -0.1627810f, -0.0268511f, +0.0600422f,
  +0.1781481f, +0.0753382f, -0.2065456f, -0.1305880f, +0.1932184f, -0.0232582f, -0.1237021f, +0.0266873f,
  -0.1769759f, -0.0426870f, +0.2091151f, +0.4102193f, +0.0327560f, +0.0499013f, +0.0715299f, -0.1346984f,
  -0.0954100f, +0.2190442f, +0.1361184f, -0.1009306f, -0.0174527f, +0.1328828f, -0.2157020f, +0.1019687f,
  -0.2054329f, +0.0921424f, +0.0432024f, +0.1473979f, -0.0784587f, +0.1641361f, -0.0874094f, +0.1544150f,
  -0.1232339f, -0.1742621f, +0.0403678f, +0.0753604f, -0.0170214f, -0.0318568f, -0.3797561f, -0.1857987f,
  +0.2117376f, +0.1896421f, +0.0271411f, -0.1333222f, -0.4024408f, +0.1167750f, -0.1382473f, +0.1571240f,
  -0.1454286f, +0.0950334f, +0.1287257f, -0.2370453f, +0.3506438f, +0.0815731f, +0.0399561f, -0.1343140f,
  +0.1168274f, -0.2957123f, -0.0658194f, +0.0750246f, -0.1643503f, +0.0325988f, +0.0910613f, +0.1769584f,
  +0.1515854f, +0.0666640f, +0.1989062f, -0.0168232f, -0.1706266f, +0.0546785f, +0.0098460f, +0.0628840f,
  -0.1951383f, +0.1988632f, +0.0303941f, -0.0511118f, +0.1394582f, -0.0699576f, -0.0328402f, +0.1631092f,
  -0.0399164f, +0.0650635f, -0.1200840f, +0.1519118f, -0.0199223f, -0.0954292f, -0.0911525f, -0.0070645f,
  -0.1211532f, -0.0621862f, -0.1236537f, +0.0028800f, +0.0407593f, -0.2495749f, -0.1771992f, -0.1812997f,
  -0.0621964f, -0.0044423f, +0.1284773f, -0.1163197f, +0.1862978f, +0.0908615f, +0.0794283f, -0.0706342f,
  -0.3008732f, -0.2098930f, -0.1924050f, -0.1443420f, +0.2281389f, -0.1593321f, -0.0085894f, -0.2132147f,
  -0.0541228f, -0.0649332f, -0.0587902f, +0.1701958f, +0.0448214f, -0.4252942f, -0.0184618f, +0.1911620f,
  -0.0490435f, -0.1372596f, +0.0064197f, -0.0549340f, -0.2177749f, +0.0751343f, -0.0729446f, +0.0530913f,
  +0.2765244f, -0.2139635f, +0.0759261f, -0.0445688f, -0.1568740f, -0.1504215f, -0.0425024f, -0.1537409f,
  +0.0971790f, +0.3071123f, +0.0364162f, +0.0568361f, -0.2885051f, -0.0616222f, -0.1354608f, +0.0703076f,
  -0.1735234f, -0.0459752f, +0.0752472f, -0.0287734f, -0.2969057f, +0.0100765f, +0.1341345f, +0.0554726f
);

const float biases[4] = float[4](
  -0.0118719f, -0.0151762f, +0.0069743f, +0.0202081f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer127 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0055575f, -0.0696870f, +0.2538147f, +0.0634358f, -0.0972373f, +0.1391924f, -0.0800637f, +0.1837560f,
  -0.4233027f, -0.1674659f, +0.0466890f, +0.2148132f, -0.2007883f, +0.2107126f, -0.0913602f, +0.1274695f,
  -0.1628534f, -0.2570294f, +0.0106527f, -0.1073792f, -0.0521367f, -0.2009663f, +0.0584974f, +0.0528580f,
  -0.0232279f, -0.0376859f, +0.0082038f, -0.0525596f, -0.2922006f, +0.1796565f, -0.0496624f, -0.1032159f,
  -0.1233273f, +0.1854846f, -0.3442629f, -0.1647796f, +0.0599981f, +0.0357289f, +0.0491391f, -0.0475680f,
  -0.2523107f, +0.2247457f, -0.0707196f, +0.0408626f, +0.0756560f, +0.1209112f, -0.0842932f, -0.0957201f,
  -0.0864018f, +0.0837061f, -0.2420726f, -0.0244695f, +0.1811939f, +0.0573030f, +0.1804910f, -0.1099284f,
  -0.1260282f, -0.1635050f, +0.1572763f, +0.0776335f, +0.0605505f, +0.2081058f, -0.1032007f, +0.0318275f,
  -0.3090676f, +0.1600325f, +0.2205818f, -0.0669446f, -0.0028009f, +0.1731392f, -0.2622661f, -0.0808271f,
  +0.0182456f, -0.3130923f, +0.2439552f, +0.1622210f, +0.0645089f, +0.2826373f, -0.1713578f, +0.2632596f,
  +0.1988064f, -0.2139766f, +0.3149997f, -0.0067620f, -0.2319288f, +0.3203187f, +0.0916756f, +0.0433662f,
  -0.0532229f, -0.2898186f, +0.0998646f, +0.0904112f, -0.1593179f, +0.0284881f, -0.0099893f, +0.1253238f,
  +0.0348261f, -0.4527263f, +0.1490108f, -0.1987332f, -0.1201905f, -0.2663245f, -0.0465427f, -0.0403895f,
  -0.0968029f, -0.2490653f, +0.3842314f, -0.1460903f, -0.0166269f, +0.0570440f, +0.1658844f, +0.2491489f,
  -0.1988499f, -0.0950607f, -0.0674188f, -0.0031166f, +0.3529491f, +0.2484471f, +0.0492836f, -0.1617561f,
  +0.2841609f, -0.0340179f, +0.0748729f, -0.1855307f, +0.1057632f, -0.0474975f, -0.0027558f, -0.1356521f,
  -0.0546432f, -0.2102029f, -0.1599877f, -0.3370070f, -0.0258126f, -0.0819864f, +0.2955438f, -0.1891745f,
  -0.0778753f, +0.0381811f, -0.0187372f, -0.1515926f, -0.2900156f, -0.2351406f, +0.0942772f, -0.1398366f,
  -0.1743005f, +0.0986619f, -0.0085089f, -0.0374379f, -0.0942835f, +0.0170773f, +0.1261772f, -0.0643406f,
  -0.1934866f, -0.0071064f, -0.0886091f, -0.1801136f, -0.1460415f, -0.1586473f, +0.1162492f, -0.1145178f,
  -0.1626600f, -0.1040406f, +0.1521652f, -0.1548239f, -0.2268539f, -0.0219727f, +0.0821623f, -0.1898379f,
  +0.2134102f, -0.0777878f, -0.0579195f, -0.1113342f, -0.0133799f, -0.2137823f, -0.0540344f, +0.0017833f,
  +0.1819168f, +0.0661567f, -0.1669175f, -0.1317300f, +0.2273425f, -0.1237005f, +0.1310201f, -0.2936845f,
  +0.1044840f, +0.0404695f, +0.0334509f, +0.0591996f, -0.1031686f, +0.0963165f, -0.0357467f, -0.1588276f,
  +0.2574507f, -0.1793129f, -0.1551154f, -0.0978303f, +0.0522746f, -0.1962434f, -0.1268893f, -0.0345706f,
  +0.0339973f, +0.1382463f, -0.1511379f, +0.1816473f, +0.0286577f, +0.1010838f, +0.1020972f, -0.0720531f,
  -0.2464162f, +0.0099270f, +0.0183849f, +0.0075589f, -0.0992367f, -0.0418349f, +0.0559264f, -0.2491048f,
  +0.0001395f, -0.0346510f, -0.1533722f, +0.1696245f, -0.0302228f, +0.0645447f, -0.0257143f, -0.2710686f,
  +0.1728932f, +0.0243849f, -0.0865797f, -0.1815260f, -0.1563162f, -0.2488153f, -0.0147190f, -0.2836470f,
  +0.3125261f, +0.3035590f, -0.0137575f, +0.0886583f, +0.4828187f, -0.1522409f, -0.2683585f, -0.4404741f,
  +0.0831535f, +0.2387891f, -0.0754182f, -0.1434690f, +0.1826038f, +0.1139770f, +0.1139645f, -0.1897910f,
  -0.1688807f, +0.2381724f, -0.1404796f, +0.1498994f, +0.0324044f, +0.1472924f, -0.0623665f, +0.0688417f,
  +0.0144611f, +0.0691271f, -0.0360326f, -0.1150271f, +0.1712231f, -0.0197109f, +0.0122804f, -0.0387744f,
  -0.1484547f, +0.3879071f, +0.1185249f, -0.2397081f, +0.0663047f, +0.0532972f, -0.0663593f, +0.1814878f,
  +0.0607697f, +0.1060505f, -0.2552453f, -0.1853064f, +0.0315695f, +0.1992534f, -0.0853528f, -0.3100020f,
  -0.0519032f, -0.0514566f, -0.1353957f, -0.2478465f, +0.1808576f, -0.3170859f, -0.4064278f, -0.1793853f
);

const float biases[4] = float[4](
  +0.0102071f, -0.0467346f, +0.0245730f, -0.0582426f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer127 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1396033f, +0.1368420f, -0.0856907f, -0.2343843f, -0.1032477f, +0.1038140f, +0.0686611f, +0.2481550f,
  +0.0288882f, +0.0059061f, -0.0400195f, -0.1761410f, -0.1179183f, +0.0814724f, -0.1925886f, +0.2831405f,
  +0.2230562f, -0.1878732f, -0.0630066f, -0.3890938f, -0.2293665f, -0.0787360f, -0.2612356f, +0.0545321f,
  -0.0255254f, -0.0488038f, -0.0285232f, -0.2522725f, -0.0916665f, +0.1122239f, -0.2947005f, -0.1966778f,
  +0.1284720f, -0.0034560f, +0.1291409f, -0.1064497f, -0.0877871f, +0.1034862f, +0.0152793f, +0.2609566f,
  +0.1809397f, -0.0477101f, +0.2325880f, -0.2723858f, +0.0374408f, +0.1249798f, -0.0527085f, -0.0220586f,
  -0.3220034f, -0.2371531f, +0.0813068f, -0.0408440f, -0.2517291f, -0.1291705f, +0.1129262f, +0.2957453f,
  -0.0174988f, -0.2759284f, -0.2333732f, -0.3604703f, -0.2772396f, +0.2479433f, +0.1795070f, +0.1188751f,
  +0.0261089f, +0.0373791f, +0.2111928f, -0.1319265f, +0.0737264f, +0.0119768f, -0.2230509f, +0.1399903f,
  -0.2233191f, +0.3771651f, +0.2924846f, -0.1011734f, -0.2980717f, +0.1673936f, -0.2702663f, +0.2479494f,
  +0.0690141f, +0.0234403f, +0.2659446f, -0.2790280f, +0.2330957f, -0.0878882f, -0.1315716f, +0.0183322f,
  +0.2683883f, +0.2100161f, -0.0747869f, +0.0537115f, -0.0464964f, +0.0051627f, -0.0486906f, +0.2131405f,
  +0.2054822f, +0.3725070f, +0.1357588f, +0.2237360f, -0.0745168f, +0.3316594f, -0.1269672f, +0.0492917f,
  +0.1020711f, -0.0514323f, +0.1078088f, +0.0045994f, +0.1024656f, -0.1523550f, -0.0715378f, +0.0317033f,
  +0.0919451f, -0.1259851f, +0.1255364f, -0.1885826f, +0.1121466f, -0.0669631f, -0.1294108f, -0.1412563f,
  -0.2302929f, -0.1866239f, -0.0678347f, -0.2389003f, -0.3346684f, -0.1425896f, -0.0059817f, -0.1954520f,
  +0.0051929f, -0.2739316f, -0.0371503f, -0.1730435f, +0.1055355f, +0.1347545f, -0.0144963f, +0.3483107f,
  +0.1068092f, +0.1447061f, +0.1085229f, -0.0892061f, -0.0406246f, +0.0036822f, +0.2772914f, -0.0673340f,
  -0.2666299f, +0.1946334f, -0.1194670f, -0.2274599f, +0.0448444f, +0.0115305f, +0.2125833f, -0.1584505f,
  -0.3411646f, +0.0247277f, -0.1810727f, -0.1467871f, -0.2232296f, +0.1240043f, -0.0471859f, -0.0626638f,
  +0.1298583f, +0.3572253f, +0.0225532f, +0.1018551f, +0.1391114f, +0.1521628f, -0.2847187f, -0.2399043f,
  +0.1520155f, +0.0495453f, -0.2643648f, +0.2816900f, +0.0873238f, +0.1657272f, -0.0746213f, +0.0419778f,
  -0.1288002f, +0.0155116f, -0.2369390f, +0.0013028f, -0.0483288f, +0.1801879f, +0.0245237f, +0.0439011f,
  -0.0296338f, +0.0201021f, +0.1145844f, +0.1622038f, +0.0991722f, +0.0491097f, +0.0067314f, +0.1442128f,
  +0.1212716f, -0.0168530f, -0.0396302f, -0.0115050f, +0.1438540f, +0.1346797f, +0.1475105f, +0.0287069f,
  -0.2348656f, +0.0339469f, +0.0817306f, +0.0294453f, -0.0021418f, +0.1382641f, -0.0954083f, +0.0976703f,
  -0.0773040f, -0.0215758f, -0.1070691f, +0.1258981f, -0.2873296f, +0.1391197f, +0.0358593f, -0.0568704f,
  +0.2008341f, +0.1500841f, -0.0308894f, +0.0375798f, -0.3231954f, +0.0299762f, -0.0076096f, -0.0024520f,
  -0.1554584f, +0.0254108f, +0.1253233f, -0.0225928f, +0.0539453f, -0.1846948f, -0.0291354f, +0.4319893f,
  -0.1607185f, -0.0778989f, -0.1227190f, -0.0821460f, +0.1005618f, -0.1262219f, +0.1325387f, -0.0335498f,
  +0.0968923f, +0.2583849f, +0.3532068f, +0.0742941f, +0.2328300f, +0.0066934f, +0.2953597f, +0.0154959f,
  +0.0760677f, -0.1112274f, +0.5185978f, +0.0578644f, -0.2056691f, +0.0251020f, +0.0276525f, +0.0743429f,
  -0.3011116f, -0.0074222f, +0.1207058f, -0.0931010f, -0.0294708f, +0.0327824f, -0.0693852f, -0.0592087f,
  +0.0358110f, -0.0629083f, +0.2791769f, +0.0047992f, -0.2205599f, -0.2565848f, +0.1184695f, -0.2385484f,
  +0.0982931f, +0.0086123f, +0.2716635f, +0.0945942f, -0.1201606f, -0.0887161f, -0.2208604f, +0.0438857f,
  -0.2035708f, -0.1563072f, +0.0240398f, -0.0805595f, +0.1015936f, -0.0450450f, +0.2526822f, -0.1297889f
);

const float biases[4] = float[4](
  -0.0376140f, -0.0481633f, +0.0095359f, -0.0030395f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer128 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!BIND FEAT_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

#define TEX_BIND_L3_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L3_TEX FEAT_L0_tex
#define TEX_BIND_L3_POS FEAT_L0_pos
#define TEX_BIND_L3_SIZE FEAT_L0_size
#define TEX_BIND_L3_PT FEAT_L0_pt

const float kernels[288] = float[288](
  -0.0211609f, +0.2854026f, -0.1551940f, -0.0038298f, -0.0308578f, +0.1442474f, +0.1205498f, -0.0121801f,
  -0.0823805f, +0.0060851f, -0.0017825f, +0.1021790f, -0.2198848f, +0.2277895f, +0.0096621f, -0.1299791f,
  -0.0855002f, -0.2277143f, -0.0908545f, +0.0311719f, -0.1112076f, -0.0605967f, -0.2457141f, -0.1645114f,
  +0.2687346f, +0.2183988f, -0.1432142f, -0.0333321f, +0.2599839f, +0.2399787f, -0.1561303f, -0.0185508f,
  -0.0808138f, -0.1718524f, -0.1381728f, -0.1164067f, -0.0155897f, -0.0086820f, -0.1378003f, +0.2223724f,
  +0.2493664f, -0.2126727f, +0.0763803f, -0.1024456f, +0.0527888f, +0.0492189f, +0.2264186f, +0.1536714f,
  -0.2823955f, -0.0575174f, +0.0266593f, +0.0091580f, +0.0816497f, +0.0059061f, +0.0473677f, +0.1157653f,
  +0.1257938f, -0.0540344f, -0.0773424f, +0.0284565f, -0.0649819f, -0.1412167f, -0.3109168f, +0.2573978f,
  -0.0337873f, +0.0749311f, -0.4341416f, +0.2263216f, +0.0510719f, -0.0985986f, -0.1261942f, -0.3306351f,
  -0.0451155f, -0.2224258f, -0.1034085f, +0.0386071f, -0.2632326f, -0.3053734f, +0.0523501f, -0.0047386f,
  +0.0787840f, -0.0335354f, -0.2114255f, +0.0399403f, +0.1728628f, -0.0488402f, +0.2570036f, +0.2244896f,
  +0.1808055f, +0.0440961f, +0.0644029f, -0.2227355f, +0.0857329f, +0.1812158f, +0.1610166f, -0.1970745f,
  +0.0841666f, -0.1272508f, +0.0190084f, -0.0790554f, -0.1415405f, +0.1671818f, +0.1514518f, -0.3498677f,
  -0.1795390f, -0.1178427f, -0.1567250f, +0.0838015f, -0.1871388f, -0.1294555f, +0.0418658f, -0.1580512f,
  -0.2157970f, +0.2534479f, -0.0699804f, +0.1250373f, -0.1157202f, +0.0691406f, -0.2205622f, -0.0127976f,
  -0.0753886f, +0.0747184f, +0.0380389f, -0.1527911f, +0.0166507f, +0.0267259f, -0.2252469f, -0.1933094f,
  +0.2209349f, -0.1856034f, +0.0713681f, -0.0831812f, +0.1275183f, +0.0960060f, -0.0851500f, +0.1438205f,
  +0.0301719f, +0.2163737f, -0.1687792f, -0.1069711f, -0.0147294f, -0.1552646f, -0.0312831f, -0.0579054f,
  -0.0013634f, +0.1787077f, +0.0801228f, +0.1681389f, -0.3008434f, -0.1159820f, +0.0548641f, -0.0299677f,
  +0.0829997f, +0.0618751f, +0.1568584f, +0.0068550f, +0.0425228f, -0.0670833f, -0.0191690f, +0.0567513f,
  +0.1453109f, -0.1102562f, -0.2765840f, +0.1393845f, +0.2997711f, -0.2034583f, +0.0122183f, -0.2113526f,
  +0.1225173f, -0.0524150f, +0.3703433f, -0.3532366f, +0.0364506f, +0.3117810f, -0.1299309f, +0.0979909f,
  -0.2298608f, -0.1298113f, -0.1153033f, +0.4770370f, +0.0554485f, +0.0601063f, -0.1335383f, -0.0461564f,
  -0.1802210f, +0.0634031f, +0.0819465f, +0.0536009f, +0.0445065f, -0.3892382f, -0.0499096f, -0.1577019f,
  +0.0315629f, -0.0329463f, -0.0011896f, +0.0727149f, -0.0509455f, -0.0185050f, +0.0394305f, +0.0802903f,
  -0.1990895f, -0.2109645f, -0.0495694f, -0.1573838f, -0.3106964f, +0.2208433f, -0.2712791f, -0.1599124f,
  +0.0586576f, -0.2070304f, +0.1097970f, +0.1322122f, +0.0195519f, -0.2402015f, -0.1063917f, -0.0010148f,
  +0.1014204f, -0.0890603f, +0.0684305f, +0.0618345f, +0.0944860f, -0.1385097f, -0.0095475f, +0.1005355f,
  +0.2930090f, -0.0839494f, +0.2179312f, +0.2293999f, -0.1051900f, +0.0025720f, -0.1287849f, -0.1957328f,
  +0.2276998f, -0.1224087f, -0.1081734f, +0.3437108f, +0.1035592f, +0.0190057f, -0.0176381f, +0.1896014f,
  -0.1631913f, +0.1387026f, -0.1521338f, -0.1815838f, -0.2154214f, +0.0159141f, +0.0421772f, -0.0270647f,
  -0.2728962f, -0.0396407f, +0.0563887f, -0.0167796f, +0.2553943f, +0.2441810f, -0.1181640f, +0.0562980f,
  +0.0256299f, -0.1132981f, +0.3735024f, +0.1547729f, -0.1536663f, +0.1142082f, -0.0760288f, +0.0331662f,
  -0.0748456f, -0.0544210f, -0.0537263f, -0.1964520f, -0.1276449f, -0.1201321f, -0.1048101f, -0.0866865f,
  +0.1593080f, +0.0101723f, +0.0483129f, -0.1736561f, +0.1154521f, -0.1340407f, +0.1750424f, -0.0209219f,
  +0.0530955f, -0.0804656f, -0.1673268f, +0.0392092f, -0.1234614f, +0.2520882f, -0.0270783f, +0.1054537f
);

const float biases[4] = float[4](
  -0.0096413f, +0.0177095f, +0.0026640f, +0.0086553f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)) + TEX_BIND_L3_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer128 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!BIND FEAT_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

#define TEX_BIND_L3_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L3_TEX FEAT_L1_tex
#define TEX_BIND_L3_POS FEAT_L1_pos
#define TEX_BIND_L3_SIZE FEAT_L1_size
#define TEX_BIND_L3_PT FEAT_L1_pt

const float kernels[288] = float[288](
  -0.0273623f, -0.1637009f, -0.2910653f, -0.1137582f, +0.0098613f, +0.2976834f, +0.0376274f, +0.1276450f,
  +0.1098484f, -0.1076391f, +0.0969769f, +0.1850879f, +0.1076170f, +0.0665235f, +0.2097431f, -0.1441035f,
  +0.1622831f, -0.1177243f, +0.3021249f, +0.0090801f, +0.1948873f, +0.3298733f, +0.0943990f, +0.1263262f,
  -0.3342443f, +0.1137171f, +0.1133325f, -0.0754102f, -0.1420647f, +0.1750387f, +0.1101665f, -0.0381002f,
  -0.0318444f, -0.1080526f, -0.0143377f, +0.0146580f, +0.1904621f, +0.0642137f, -0.1111384f, -0.0074961f,
  +0.1320185f, -0.2690586f, +0.1497959f, +0.0031508f, -0.0131058f, +0.1874815f, -0.0707547f, +0.0529802f,
  +0.1572018f, +0.2142442f, -0.3827114f, -0.0329599f, +0.2720540f, +0.0602734f, -0.3322555f, -0.1886870f,
  +0.0790703f, -0.0568487f, +0.1415559f, -0.0357029f, +0.3926695f, +0.0443330f, -0.0387857f, +0.0693629f,
  -0.1179628f, -0.2359307f, -0.1023700f, +0.1662619f, +0.0356734f, -0.2571526f, +0.0002608f, +0.0260518f,
  -0.1299323f, +0.0965064f, -0.0503308f, +0.0242680f, -0.0648739f, +0.0841891f, -0.1357706f, +0.0977386f,
  +0.0653089f, +0.0781614f, -0.1906256f, +0.1468271f, -0.0965196f, +0.1925031f, +0.0906696f, +0.2386823f,
  -0.0628268f, +0.1309894f, +0.0401039f, +0.0592632f, -0.2145869f, +0.2207859f, -0.1187526f, -0.1745323f,
  +0.0575150f, -0.1368965f, -0.0038356f, -0.0961398f, -0.2528014f, +0.1138170f, -0.1916230f, +0.0190695f,
  -0.1379790f, +0.0793675f, +0.1540197f, -0.0320661f, -0.1000887f, -0.0023104f, +0.2801898f, +0.0843166f,
  -0.2150875f, -0.2542635f, +0.0071183f, +0.0883232f, -0.1210102f, -0.2896878f, -0.4299189f, -0.0952747f,
  -0.0160792f, -0.0219700f, -0.0168357f, +0.3129135f, +0.2896972f, -0.1146905f, -0.1129485f, +0.1720585f,
  -0.3492132f, +0.0432138f, -0.1338951f, +0.1978676f, -0.2944358f, +0.1610244f, -0.3925761f, +0.0257168f,
  -0.3042109f, -0.0724433f, +0.0283512f, +0.0933980f, -0.0911776f, -0.0478104f, +0.2026659f, -0.0905460f,
  +0.3219097f, -0.0227376f, +0.0915917f, +0.0375574f, -0.0940979f, +0.1153592f, +0.0748334f, +0.0659459f,
  +0.0890322f, -0.1599724f, +0.1827134f, -0.2362678f, -0.1025153f, +0.1173285f, +0.3788903f, +0.2058968f,
  -0.0193381f, -0.1905735f, +0.4402683f, -0.0022975f, -0.1220586f, -0.1629431f, +0.0585167f, -0.0076009f,
  -0.0053661f, -0.4439351f, +0.1975747f, -0.0231309f, -0.0326213f, +0.0420198f, +0.0294685f, +0.0798950f,
  -0.0584393f, +0.3100955f, -0.1838163f, -0.1323318f, -0.0130384f, -0.1609547f, +0.0864195f, +0.0082946f,
  +0.1898888f, -0.1542519f, -0.0948470f, -0.0881974f, -0.1250351f, +0.2115459f, -0.0186084f, +0.1547985f,
  +0.2280442f, -0.0429909f, +0.0866762f, -0.1410786f, +0.1889704f, -0.0517393f, +0.2476332f, -0.0485329f,
  +0.1430742f, +0.1093509f, -0.2625768f, +0.0225985f, +0.0176756f, +0.1171202f, +0.0597677f, +0.0308117f,
  -0.0047850f, -0.1391631f, +0.0828633f, -0.0995784f, +0.0726708f, -0.0022061f, +0.2199517f, +0.0700098f,
  +0.2181185f, -0.1392931f, -0.1248411f, +0.3113340f, -0.3816051f, +0.1568889f, -0.0163906f, -0.0204659f,
  -0.1219821f, +0.0177044f, +0.1992088f, -0.0797822f, +0.2062881f, +0.0106273f, -0.0803514f, -0.0703682f,
  +0.1543510f, +0.1172478f, -0.1499053f, -0.0731393f, -0.1295598f, +0.0839270f, -0.2424038f, +0.0062365f,
  +0.1821461f, -0.0431677f, +0.3465905f, +0.0200907f, -0.0529768f, +0.0049614f, +0.2017674f, -0.3304633f,
  +0.2701168f, -0.0467643f, -0.1743235f, +0.2222905f, +0.1395019f, -0.1883010f, +0.2770608f, +0.0206388f,
  -0.0490797f, +0.0621277f, +0.0932787f, -0.0272090f, +0.1988809f, -0.0455069f, +0.0395455f, -0.0923784f,
  -0.2458649f, -0.0136153f, +0.1106820f, +0.1266540f, -0.1631474f, -0.0991277f, +0.2069384f, -0.1232603f,
  +0.1595413f, -0.1281513f, +0.0955419f, +0.1227291f, -0.0037196f, +0.0557850f, +0.3093372f, -0.0472574f,
  -0.0632339f, -0.0268568f, -0.2106648f, +0.0593799f, -0.2072406f, +0.0170085f, +0.0873629f, -0.4030907f
);

const float biases[4] = float[4](
  -0.0174946f, -0.0145143f, +0.0080450f, +0.0191829f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)) + TEX_BIND_L3_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b64 Layer129 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0204751f, -0.0200392f, -0.1839072f, +0.1743085f, +0.1078155f, +0.2060310f, +0.0360876f, +0.0272672f,
  +0.2287581f, -0.0607296f, -0.0300564f, +0.1840361f, -0.3239703f, +0.0161806f, +0.0895356f, +0.2098929f,
  +0.2432677f, +0.0408800f, +0.1885572f, +0.0457432f, +0.1559753f, -0.1807591f, -0.1051061f, -0.1404576f,
  -0.0879664f, -0.1090876f, +0.0563936f, +0.1552686f, +0.1273245f, +0.0679493f, +0.0952234f, +0.0318352f,
  -0.2175374f, -0.4233027f, -0.3755290f, -0.1933694f, +0.0235227f, +0.0285494f, +0.0250543f, +0.0982567f,
  +0.0222166f, +0.0122828f, -0.0952488f, +0.0576065f, -0.1289500f, +0.1861701f, -0.1138141f, +0.0622643f,
  -0.0412008f, -0.0458005f, +0.0925784f, -0.1036438f, +0.1778386f, +0.1430909f, -0.0767437f, -0.0040631f,
  +0.0441596f, +0.0721027f, -0.0634313f, -0.2013731f, -0.0403310f, -0.1652962f, +0.1196928f, +0.0283040f,
  -0.1055003f, +0.0047483f, +0.1438353f, -0.0721573f, +0.0667966f, -0.0462368f, +0.0610800f, -0.1655257f,
  +0.1208103f, +0.1692401f, -0.0887129f, +0.1192253f, -0.1293267f, -0.0311656f, -0.0220462f, -0.1510325f,
  +0.0561173f, -0.1493437f, +0.0532183f, +0.1832657f, -0.0433238f, -0.0126535f, -0.0792327f, -0.1270713f,
  -0.0444440f, -0.0876013f, -0.0846043f, +0.0530146f, +0.1796722f, +0.1536850f, +0.0022445f, -0.0954592f,
  -0.2426611f, +0.0305692f, +0.0685237f, -0.0010782f, +0.3479577f, +0.0413167f, -0.0828386f, -0.1356408f,
  +0.1248696f, -0.1202418f, -0.2442027f, -0.1586052f, -0.4670324f, -0.2484121f, +0.0556807f, +0.0582122f,
  -0.1096858f, +0.2475213f, -0.0623284f, +0.0710953f, -0.0883389f, +0.0590188f, -0.0621765f, -0.0815427f,
  -0.0814235f, +0.0987156f, +0.0224793f, -0.0268885f, +0.1386270f, +0.2530981f, +0.2867796f, -0.0401181f,
  +0.2995305f, -0.3555314f, -0.1931290f, -0.2162733f, +0.0099112f, -0.0645936f, +0.0062414f, +0.1270999f,
  +0.0694366f, -0.0481070f, -0.0356361f, -0.1330086f, +0.1368019f, -0.2263953f, -0.0813157f, +0.1040924f,
  -0.2434592f, -0.2041067f, +0.0912612f, -0.0486963f, +0.1584140f, +0.1574342f, -0.1294925f, -0.1175980f,
  -0.1839945f, +0.0194984f, -0.0975319f, -0.0408446f, +0.0054848f, +0.1432094f, +0.0616640f, -0.2129924f,
  -0.0414972f, +0.0816807f, -0.0116582f, -0.0712905f, +0.1553558f, -0.1165461f, -0.0492656f, -0.0026938f,
  -0.1425356f, -0.2079861f, -0.1528496f, +0.0314456f, +0.0549630f, +0.0521632f, -0.1016476f, +0.1193345f,
  +0.0478329f, +0.0024336f, -0.2285370f, +0.1923501f, +0.0050755f, -0.0627389f, +0.0930408f, +0.0077414f,
  +0.0704858f, +0.0324818f, +0.1164080f, -0.0788805f, -0.0773113f, -0.0701926f, -0.0537772f, -0.1019139f,
  +0.0320930f, +0.1909832f, +0.0770326f, +0.1334774f, -0.1174835f, +0.1314262f, +0.0212793f, +0.0867882f,
  +0.0053146f, +0.0947912f, -0.1299014f, +0.1066443f, +0.0529237f, +0.2466367f, -0.0649269f, +0.0279228f,
  +0.1900891f, -0.0195358f, -0.0919547f, -0.0208266f, -0.0875842f, +0.0355690f, +0.0787918f, +0.0684544f,
  +0.0438223f, +0.1228136f, -0.0765147f, -0.0136035f, -0.0872881f, -0.0529154f, +0.0170259f, -0.0700569f,
  +0.0222686f, -0.2772993f, +0.0101226f, -0.0636374f, -0.0901507f, -0.0733931f, +0.0064409f, +0.1793852f,
  -0.0083954f, -0.0296381f, -0.0015974f, -0.0205207f, +0.0851110f, -0.0085725f, -0.0237541f, -0.0618917f,
  -0.0022596f, -0.0786793f, -0.0076108f, -0.0145889f, +0.1614934f, +0.1890933f, +0.0728366f, -0.0939936f,
  +0.0666649f, -0.0049627f, -0.3438491f, +0.1971842f, -0.2269323f, -0.1940524f, +0.1832242f, -0.3839036f,
  +0.0957013f, +0.2135826f, +0.0453297f, +0.1753802f, +0.0365562f, +0.0360530f, -0.1230823f, +0.1189326f,
  -0.0752327f, -0.0816457f, +0.0268393f, -0.0591363f, +0.1977576f, -0.0282197f, +0.0371222f, +0.0387720f,
  +0.0097908f, +0.0995683f, +0.0555190f, -0.2110396f, +0.1715518f, +0.0914906f, -0.1537748f, -0.1206015f,
  +0.0069473f, +0.1917432f, -0.2106870f, +0.1150613f, +0.0595518f, -0.1349242f, -0.0179652f, -0.1546333f
);

const float biases[4] = float[4](
  +0.0190355f, +0.0237431f, +0.0216320f, +0.0168892f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ACNet b64 Layer130 L0
//!WIDTH LUMA.w 2 *
//!HEIGHT LUMA.h 2 *
//!BIND TMP1_L0
//!COMPONENTS 1

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

vec4 hook() {
    vec2 fcoord = fract(TEX_BIND_L0_POS * TEX_BIND_L0_SIZE);
    vec2 pos = TEX_BIND_L0_POS + (vec2(0.5f) - fcoord) * TEX_BIND_L0_PT;

    ivec2 icoord = ivec2(fcoord * vec2(2.0f));
    int index = icoord.y * 2 + icoord.x;

    vec4 r = TEX_BIND_L0_TEX(pos);

    return vec4(clamp(float[4](r.x, r.y, r.z, r.w)[index], 0.0f, 1.0f), 0.0f, 0.0f, 1.0f);
}
