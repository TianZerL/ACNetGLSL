//!HOOK LUMA
//!DESC ARNet b32 Layer0 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND LUMA
//!SAVE FEAT_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF LUMA_texOff
#define TEX_BIND_L0_TEX LUMA_tex
#define TEX_BIND_L0_POS LUMA_pos
#define TEX_BIND_L0_SIZE LUMA_size
#define TEX_BIND_L0_PT LUMA_pt

const float kernels[36] = float[36](
  -0.8181759f, +1.0766987f, +0.3013737f, -0.4039845f, +0.2907110f, -0.0510127f, +0.0093384f, -0.7717317f,
  +0.3520458f, +0.6900908f, -0.3709174f, -0.8989386f, -0.5181811f, +0.8399305f, -0.0153819f, +0.9479285f,
  -0.0904569f, -0.3683722f, -0.4314236f, +0.8638284f, +0.2026215f, +0.4202927f, -0.4159712f, -0.7349547f,
  -0.2379741f, -0.3609224f, -0.0760715f, +0.3983822f, +0.2404132f, -0.2368739f, -0.2688420f, +0.0930678f,
  +0.0668308f, +0.0203003f, -0.0893989f, -0.2412121f
);

const float biases[4] = float[4](
  +0.0017026f, -0.0502354f, +0.0947056f, +0.0131193f
);

vec4 hook() {
    const vec4 r0 = vec4(
        TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)).x
    );
    const vec4 r4 = vec4(
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)).x
    );
    const float r8 = TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)).x;

    float sum[4] = biases;
    for(int n = 0; n < 4; n++) {
        const vec4 k0 = vec4(kernels[n * 9 + 0], kernels[n * 9 + 1], kernels[n * 9 + 2], kernels[n * 9 + 3]);
        const vec4 k4 = vec4(kernels[n * 9 + 4], kernels[n * 9 + 5], kernels[n * 9 + 6], kernels[n * 9 + 7]);
        const float k8 = kernels[n * 9 + 8];
        sum[n] += (dot(r0, k0) + dot(r4, k4) + r8 * k8);
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer0 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND LUMA
//!SAVE FEAT_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF LUMA_texOff
#define TEX_BIND_L0_TEX LUMA_tex
#define TEX_BIND_L0_POS LUMA_pos
#define TEX_BIND_L0_SIZE LUMA_size
#define TEX_BIND_L0_PT LUMA_pt

const float kernels[36] = float[36](
  -0.4275913f, +0.2743124f, -0.3395295f, -0.6239216f, -0.2548060f, +0.6685265f, -0.2947783f, +0.6703063f,
  +0.3268245f, +0.0916030f, +0.1311542f, +0.8203193f, +0.4978331f, +0.4680474f, +0.0990670f, -0.4856798f,
  -0.7093938f, +0.1105640f, -0.2673872f, -0.0980493f, -0.2688880f, -0.4085585f, +0.7486803f, +0.3276058f,
  +0.3901923f, -0.3238000f, -0.1996654f, +0.2845759f, +0.1915527f, -0.0954283f, -0.7698542f, -0.1180700f,
  -0.2739601f, +0.3721467f, -0.0788741f, +0.4245671f
);

const float biases[4] = float[4](
  -0.0118882f, -0.0705506f, +0.0291527f, +0.0494107f
);

vec4 hook() {
    const vec4 r0 = vec4(
        TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)).x
    );
    const vec4 r4 = vec4(
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)).x,
        TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)).x
    );
    const float r8 = TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)).x;

    float sum[4] = biases;
    for(int n = 0; n < 4; n++) {
        const vec4 k0 = vec4(kernels[n * 9 + 0], kernels[n * 9 + 1], kernels[n * 9 + 2], kernels[n * 9 + 3]);
        const vec4 k4 = vec4(kernels[n * 9 + 4], kernels[n * 9 + 5], kernels[n * 9 + 6], kernels[n * 9 + 7]);
        const float k8 = kernels[n * 9 + 8];
        sum[n] += (dot(r0, k0) + dot(r4, k4) + r8 * k8);
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer1 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND FEAT_L0
//!BIND FEAT_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L0_TEX FEAT_L0_tex
#define TEX_BIND_L0_POS FEAT_L0_pos
#define TEX_BIND_L0_SIZE FEAT_L0_size
#define TEX_BIND_L0_PT FEAT_L0_pt

#define TEX_BIND_L1_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L1_TEX FEAT_L1_tex
#define TEX_BIND_L1_POS FEAT_L1_pos
#define TEX_BIND_L1_SIZE FEAT_L1_size
#define TEX_BIND_L1_PT FEAT_L1_pt

const float kernels[288] = float[288](
  -0.0592438f, +0.0348333f, +0.0017820f, +0.1380114f, +0.1449054f, -0.0137587f, +0.2392911f, +0.0520362f,
  -0.1192619f, -0.1696850f, -0.4353722f, -0.1056021f, +0.3223442f, +0.2116207f, -0.2446608f, -0.0652353f,
  -0.4575104f, -0.0570264f, +0.3039273f, -0.1420126f, +0.4013349f, -0.0067618f, +0.3442000f, -0.3744174f,
  +0.0819994f, +0.0586744f, -0.2772144f, +0.0617670f, -0.2507123f, -0.2257070f, -0.3381758f, +0.1729389f,
  -0.2663613f, -0.3517973f, -0.3220314f, -0.4162120f, +0.0303139f, +0.2152004f, -0.3548064f, -0.0064758f,
  +0.3843300f, +0.0315434f, +0.2496483f, +0.1418735f, +0.0780115f, -0.1304691f, +0.1546435f, -0.0560010f,
  +0.0124131f, +0.0377576f, +0.1391593f, -0.1698124f, +0.1686126f, -0.0061247f, +0.1313945f, -0.1228631f,
  -0.3287740f, -0.0143604f, -0.1889309f, -0.2503401f, -0.0541313f, +0.0035221f, -0.0275601f, -0.0012903f,
  +0.1044079f, -0.0040684f, +0.3647160f, +0.1903268f, +0.2540568f, -0.0688560f, +0.1075029f, -0.3660461f,
  +0.3735165f, -0.1730368f, +0.0956882f, +0.1949167f, -0.7235990f, +0.2703544f, -0.0966379f, +0.0486593f,
  +0.5506512f, -0.1208612f, +0.0744784f, +0.5557464f, -0.2742119f, +0.1915194f, +0.3044835f, +0.5283209f,
  -0.0705517f, -0.0030731f, -0.2201307f, +0.4850386f, -0.1590795f, -0.0584231f, -0.3108262f, -0.3533720f,
  +0.5581307f, -0.1388641f, +0.1697512f, +0.2408256f, -0.3146697f, +0.2123244f, +0.0506169f, +0.1544506f,
  +0.1909568f, -0.1790151f, +0.1497372f, +0.3523121f, -0.3284361f, +0.0108588f, -0.3510525f, +0.5186139f,
  +0.3555237f, +0.0106552f, +0.1079172f, +0.4044193f, +0.0990259f, +0.0297201f, +0.0066893f, +0.0239572f,
  -0.2737495f, +0.0525184f, -0.1030541f, -0.0784497f, +0.1896951f, -0.2679507f, +0.1564860f, -0.5383810f,
  -0.6787179f, -0.0620381f, +0.1840893f, -0.1079606f, +0.2830760f, +0.1087027f, +0.0092229f, -0.6785171f,
  -0.2081008f, -0.1321672f, +0.1445905f, -0.3945830f, +0.0926920f, +0.0514109f, +0.1234384f, -0.0028837f,
  +0.3659812f, +0.2840544f, -0.0208334f, +0.6311876f, -0.2219476f, -0.0939755f, +0.4592949f, -0.5029787f,
  +0.1522305f, -0.0327382f, +0.1232350f, +0.2949174f, +0.1766904f, +0.2289175f, +0.0641404f, -0.2800774f,
  -0.3210335f, -0.1715774f, -0.0188827f, +0.3977070f, +0.0989584f, +0.1459801f, +0.1845237f, -0.5678626f,
  +0.0102798f, +0.3477409f, +0.3600542f, +0.3591241f, -0.0529383f, -0.3825590f, +0.0120559f, -0.3950617f,
  +0.1604215f, -0.1404461f, +0.0477923f, +0.1390781f, -0.0770061f, +0.0141191f, +0.4003947f, +0.2240714f,
  +0.0772747f, +0.1352267f, -0.0813365f, +0.0366497f, +0.3296522f, -0.0248684f, +0.2770152f, -0.0292879f,
  -0.2740110f, +0.0071319f, -0.0066826f, -0.0277914f, +0.2367847f, -0.3863719f, +0.0393273f, -0.3180161f,
  -0.6810455f, -0.0972703f, -0.0173962f, -0.3846226f, +0.4021110f, +0.0562773f, -0.5179172f, +0.1144133f,
  +0.0472528f, +0.0588284f, -0.1696149f, -0.1202582f, -0.1101519f, +0.1247052f, -0.1444295f, +0.0955282f,
  -0.1839153f, -0.1681442f, -0.1867110f, +0.0367623f, +0.1039404f, +0.1533500f, -0.3192548f, -0.2357420f,
  -0.0355502f, -0.1460362f, -0.1712562f, +0.3500816f, +0.5466783f, +0.1057812f, -0.0986147f, -0.3288708f,
  -0.1417195f, +0.3570530f, +0.0914945f, -0.0623672f, -0.1791315f, +0.0243226f, -0.3708342f, -0.2532594f,
  +0.0951842f, -0.5057634f, +0.5297854f, +0.0476796f, -0.0612748f, -0.0408195f, -0.1434419f, +0.0628732f,
  +0.6085841f, -0.0669615f, -0.0632261f, +0.1405763f, +0.2346613f, +0.3533479f, +0.2636966f, -0.1167477f,
  +0.5769691f, -0.1132483f, -0.1437346f, +0.4098946f, +0.0111150f, +0.0524322f, +0.4130020f, -0.5069679f,
  -0.2997329f, -0.0236361f, +0.0540314f, -0.4146097f, -0.2550507f, -0.1154999f, -0.0954099f, -0.2010394f,
  +0.0073389f, -0.4335603f, -0.0072371f, -0.1215143f, +0.1325887f, -0.1329505f, +0.3014197f, -0.0395602f,
  +0.2276239f, -0.0321056f, +0.1100847f, +0.0357021f, +0.1886645f, -0.0082973f, +0.1074675f, -0.2219762f
);

const float biases[4] = float[4](
  +0.0714367f, -0.1454446f, +0.0077199f, +0.0898536f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer1 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND FEAT_L0
//!BIND FEAT_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L0_TEX FEAT_L0_tex
#define TEX_BIND_L0_POS FEAT_L0_pos
#define TEX_BIND_L0_SIZE FEAT_L0_size
#define TEX_BIND_L0_PT FEAT_L0_pt

#define TEX_BIND_L1_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L1_TEX FEAT_L1_tex
#define TEX_BIND_L1_POS FEAT_L1_pos
#define TEX_BIND_L1_SIZE FEAT_L1_size
#define TEX_BIND_L1_PT FEAT_L1_pt

const float kernels[288] = float[288](
  +0.2199337f, -0.0781636f, -0.2402016f, +0.0670282f, +0.0982462f, +0.0428834f, -0.0859286f, +0.0724180f,
  -0.3419212f, -0.0375861f, -0.2107857f, -0.2060840f, +0.0273839f, +0.2321957f, -0.2386164f, +0.0136714f,
  -0.0809328f, +0.1378834f, +0.0754269f, -0.2690094f, +0.1281936f, -0.0599125f, +0.0666077f, +0.3753869f,
  -0.0752437f, +0.3025142f, -0.1833889f, +0.2392768f, -0.2180124f, +0.2690988f, +0.0859998f, -0.4218347f,
  -0.1165347f, -0.0045319f, +0.1807132f, -0.2591427f, -0.2627673f, -0.1424671f, -0.2894525f, -0.3638676f,
  -0.0424688f, +0.0109398f, +0.1011097f, -0.0206246f, +0.0585825f, +0.0429092f, -0.0796468f, -0.1035129f,
  +0.0477166f, +0.1143944f, +0.2804014f, +0.0020985f, +0.1714930f, -0.2210402f, +0.2710956f, -0.2662943f,
  +0.0600603f, -0.0422013f, +0.1076675f, -0.2570539f, +0.0536312f, -0.0315321f, +0.5009879f, -0.2434201f,
  -0.0376089f, +0.2853165f, -0.1256789f, +0.1015615f, +0.0771151f, +0.1605129f, -0.0143216f, +0.2063998f,
  +0.0085006f, -0.0595767f, -0.1969267f, +0.0846130f, +0.0329910f, +0.0998654f, +0.0010237f, -0.0942072f,
  +0.3794515f, +0.1227724f, +0.0492817f, +0.2791149f, -0.4342813f, +0.1051264f, +0.3246554f, +0.3896763f,
  +0.1038948f, -0.1574874f, -0.0709593f, -0.2615009f, +0.8549666f, +0.0792718f, +0.0750646f, -0.1402146f,
  -0.0823992f, -0.1018339f, +0.3123193f, +0.2911607f, -0.0965554f, -0.1843355f, -0.0753854f, -0.1492764f,
  +0.0109138f, -0.0414593f, +0.3537172f, +0.1502460f, -0.3975794f, +0.1246177f, -0.0722686f, +0.2959686f,
  +0.4543862f, -0.3063075f, +0.0551563f, +0.0379738f, +0.4533049f, +0.4427246f, -0.1657783f, -0.4646191f,
  -0.1201132f, +0.1229168f, +0.1376971f, -0.2699214f, +0.0993806f, -0.1084227f, +0.3764355f, -0.0970402f,
  -0.2343744f, -0.1585717f, -0.0585550f, -0.6495553f, +0.1916589f, -0.1436057f, -0.0216578f, -0.3430166f,
  +0.0752162f, -0.5513464f, -0.1219288f, -0.1412965f, -0.1064430f, +0.0475509f, -0.0901687f, -0.4509686f,
  -0.2778562f, +0.0527695f, +0.3075800f, +0.1055127f, +0.1526564f, -0.0207599f, -0.0889707f, -0.3115553f,
  +0.2157744f, -0.1251316f, -0.0712052f, +0.2506317f, -0.3420922f, +0.0377460f, -0.0717988f, -0.1836803f,
  -0.3403467f, -0.3246301f, -0.1250565f, +0.0128178f, +0.2655983f, +0.0734679f, +0.2530968f, -0.1893399f,
  +0.2669579f, -0.1195166f, -0.1601807f, +0.2148690f, +0.0652874f, -0.1092566f, -0.1182827f, -0.0175274f,
  +0.1246208f, -0.1436439f, +0.1976965f, -0.0604677f, -0.0326405f, +0.1370542f, +0.3713765f, -0.2754127f,
  -0.1459654f, -0.1845822f, -0.3967762f, -0.0526615f, +0.2749294f, +0.0673202f, +0.6683393f, +0.3205384f,
  +0.1404203f, +0.1134387f, -0.3454423f, +0.0582268f, -0.1124334f, +0.0074968f, -0.2691483f, -0.1142839f,
  -0.1553459f, +0.0340823f, +0.2311643f, -0.3856238f, -0.0557648f, -0.0332741f, -0.3903340f, +0.1726388f,
  +0.2644026f, -0.3747156f, +0.1980658f, +0.0914184f, +0.4039011f, +0.0697000f, +0.2299556f, +0.0332785f,
  +0.1815245f, -0.0601414f, +0.2350989f, +0.6487836f, -0.0563513f, +0.1590468f, +0.2444935f, -0.3699310f,
  +0.4584585f, -0.0636578f, +0.3807900f, +0.4416488f, -0.2471395f, +0.1602478f, +0.3043026f, -0.3823972f,
  +0.4366145f, +0.1442819f, +0.0746661f, +0.1711012f, -0.2590011f, +0.0145375f, -0.0198059f, -0.0657190f,
  -0.1513232f, -0.0545532f, -0.0609612f, +0.0550760f, +0.0671126f, +0.1371299f, -0.1882178f, -0.0711751f,
  +0.3225122f, -0.0552388f, +0.1403376f, -0.3437174f, -0.3031234f, +0.1165871f, -0.1082055f, +0.1310098f,
  -0.0568021f, -0.0903569f, +0.2604885f, +0.1193964f, -0.1620224f, +0.1830849f, -0.0041103f, +0.6445250f,
  +0.1365389f, +0.1205981f, -0.0076086f, -0.2284884f, -0.1136242f, +0.0406783f, +0.0236919f, -0.0991040f,
  -0.0404170f, +0.1968718f, -0.1396052f, +0.0139430f, +0.1097510f, -0.0011670f, +0.1530264f, -0.3129790f,
  -0.2246263f, -0.1222487f, +0.0094566f, +0.0308425f, -0.1689582f, +0.0080260f, +0.0011347f, +0.3033398f
);

const float biases[4] = float[4](
  +0.0847386f, -0.0764907f, +0.0841110f, +0.0436610f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer2 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND FEAT_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L2_TEX FEAT_L0_tex
#define TEX_BIND_L2_POS FEAT_L0_pos
#define TEX_BIND_L2_SIZE FEAT_L0_size
#define TEX_BIND_L2_PT FEAT_L0_pt

const float kernels[288] = float[288](
  -0.0142848f, +0.0321839f, -0.3311227f, -0.1659752f, +0.2669548f, -0.0610662f, +0.1485763f, +0.2501417f,
  +0.1001723f, -0.1345800f, -0.1136789f, -0.0446554f, -0.1081548f, -0.2333668f, +0.1122704f, +0.0879150f,
  +0.1697414f, -0.2130385f, +0.0731638f, +0.3443461f, -0.4018412f, +0.1050932f, -0.1334845f, +0.0751789f,
  +0.5143673f, +0.1022393f, -0.0150479f, +0.0045622f, -0.3943779f, -0.2708806f, +0.6646963f, -0.0666553f,
  -0.1577709f, -0.1896001f, -0.3521805f, -0.0125352f, +0.2190538f, +0.1858570f, +0.0308197f, +0.0683920f,
  +0.0565641f, -0.1669842f, -0.0504948f, -0.1937462f, -0.1191042f, -0.1850181f, +0.1997785f, -0.3292665f,
  +0.2844609f, -0.2430745f, +0.1787761f, +0.1427169f, +0.5024072f, +0.0201364f, +0.2023328f, +0.3176934f,
  +0.0113990f, -0.1521894f, -0.1649983f, -0.2299557f, +0.1471373f, +0.2238981f, +0.1030300f, +0.1424338f,
  +0.2563054f, -0.0653146f, -0.0215234f, -0.2126437f, -0.3603472f, -0.0086027f, -0.0324077f, -0.0951535f,
  -0.2498740f, -0.0402560f, +0.2579743f, -0.1251209f, -0.4325057f, -0.1811350f, +0.2636243f, -0.0435235f,
  -0.2769442f, +0.0013765f, +0.1375037f, +0.3959966f, -0.5372899f, -0.1877337f, -0.2772300f, -0.1558736f,
  +0.3616870f, -0.0746286f, -0.4286967f, +0.0312144f, -0.2822309f, -0.1078571f, +0.1454871f, +0.1091417f,
  -0.6477774f, -0.0360256f, +0.0000510f, -0.0822375f, -0.2801758f, +0.2694863f, -0.1354581f, +0.1139458f,
  -0.2990952f, +0.0552372f, +0.0270313f, +0.2145369f, -0.2259471f, +0.3473923f, -0.0681149f, +0.0135645f,
  +0.3188763f, +0.2489647f, -0.7549480f, +0.3210610f, +0.0653803f, -0.0557891f, +0.0923420f, -0.0085130f,
  -0.5751668f, +0.0116736f, +0.0635035f, -0.4022228f, -0.6112059f, +0.2837108f, +0.0373087f, -0.0669195f,
  -0.0877282f, +0.1372931f, +0.3906855f, +0.2388595f, -0.4005460f, +0.1405054f, -0.0279556f, -0.2419071f,
  +0.0418756f, +0.3331655f, -0.2411019f, -0.0136136f, -0.0437549f, -0.2278363f, +0.1361192f, +0.2779191f,
  +0.0223193f, +0.0637995f, +0.0098243f, +0.0508527f, -0.0584234f, -0.2882153f, +0.1272687f, -0.0358059f,
  +0.1320932f, -0.0141394f, -0.0359502f, +0.1433146f, -0.0254440f, -0.2439914f, +0.1986548f, -0.0578471f,
  -0.0816880f, +0.1837467f, +0.0306764f, +0.1049792f, -0.1513257f, +0.0792954f, -0.1716132f, -0.1027834f,
  -0.0662788f, +0.0808386f, -0.0923399f, -0.0778427f, -0.1876221f, -0.3012077f, +0.0615282f, +0.0687704f,
  -0.3544275f, -0.3517745f, -0.1411132f, -0.0361326f, -0.1350491f, -0.2440515f, +0.0635929f, +0.2844748f,
  +0.2207210f, -0.1542648f, -0.0691323f, +0.0801938f, -0.0299656f, +0.0638828f, +0.1153802f, -0.1344789f,
  +0.0478950f, +0.2308608f, -0.1881239f, -0.0275895f, +0.3015452f, -0.2336009f, +0.0900247f, -0.0546258f,
  -0.2012351f, -0.1548637f, +0.0866344f, +0.1581835f, +0.1602039f, -0.1998660f, -0.0011098f, +0.2780816f,
  -0.0641518f, -0.1151686f, -0.0206754f, +0.0010882f, +0.0542869f, -0.0101072f, +0.0148880f, -0.0278081f,
  +0.2475739f, +0.0434420f, +0.1137754f, +0.0829815f, +0.1092050f, +0.1900844f, -0.4070171f, +0.3825536f,
  -0.1404643f, -0.6522060f, -0.1131251f, +0.0387065f, +0.1135115f, -0.0605242f, -0.1985128f, +0.1173163f,
  -0.0812003f, +0.0924556f, -0.3857869f, +0.2056995f, -0.0418238f, +0.0132957f, -0.0295847f, -0.0573673f,
  +0.2668394f, -0.2084738f, -0.1278286f, -0.0946855f, +0.0001361f, -0.0903375f, -0.3118933f, +0.0816302f,
  -0.0227523f, -0.5602028f, +0.2120408f, -0.1552263f, -0.1544660f, +0.0728858f, -0.3498714f, +0.4159957f,
  +0.4023113f, +0.0559174f, -0.5142099f, -0.3504934f, +0.1594625f, +0.1188435f, -0.1962496f, -0.1266461f,
  +0.1943096f, -0.4105194f, +0.0286132f, +0.0662013f, +0.1514891f, +0.1360746f, -0.2489498f, +0.0887311f,
  -0.5039982f, -0.0435417f, -0.2270270f, +0.0246721f, -0.2582655f, +0.1797674f, +0.0342962f, -0.0022327f,
  +0.2236329f, +0.1662107f, -0.0506352f, -0.2376055f, +0.3825833f, -0.1313737f, +0.1652427f, -0.1838326f
);

const float biases[4] = float[4](
  -0.1398373f, +0.1435612f, +0.2538859f, -0.0940477f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer2 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND FEAT_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L2_TEX FEAT_L1_tex
#define TEX_BIND_L2_POS FEAT_L1_pos
#define TEX_BIND_L2_SIZE FEAT_L1_size
#define TEX_BIND_L2_PT FEAT_L1_pt

const float kernels[288] = float[288](
  -0.0721728f, -0.2427456f, -0.0970110f, -0.0620596f, +0.1422261f, -0.1274538f, +0.1722712f, +0.2289218f,
  -0.0971556f, +0.0436612f, -0.2480967f, -0.2774180f, +0.0027434f, +0.0489195f, +0.0020878f, -0.1413711f,
  -0.0459240f, -0.2853253f, -0.3241897f, -0.1237084f, -0.1669731f, -0.1275741f, -0.2701765f, +0.1401671f,
  +0.2333183f, +0.0639815f, +0.0060402f, +0.1153006f, +0.1607884f, -0.2597465f, +0.3846165f, -0.2223524f,
  +0.1778400f, +0.6122053f, -0.3375210f, -0.0893902f, +0.1295941f, -0.0986389f, -0.0575643f, -0.2848394f,
  -0.1659387f, +0.4827897f, -0.0627836f, -0.0289282f, -0.0215749f, +0.4407434f, -0.1750916f, +0.1170520f,
  +0.1425060f, +0.3215733f, -0.2129923f, +0.1121727f, +0.1237667f, -0.3438362f, +0.2104162f, -0.3306620f,
  +0.2733594f, +0.5320914f, -0.0757884f, -0.1820075f, +0.0387478f, -0.4803602f, +0.1775344f, -0.5430206f,
  -0.2006873f, +0.3996835f, +0.2125259f, +0.1454762f, -0.1565920f, -0.0035779f, +0.0251068f, -0.1561078f,
  -0.0110465f, +0.1682450f, +0.0046779f, -0.0302004f, -0.1730425f, -0.0902052f, +0.0768011f, -0.1506940f,
  +0.0214039f, -0.1375236f, +0.0280757f, +0.0738452f, -0.1434368f, -0.0630617f, -0.1788301f, -0.0017178f,
  -0.1797035f, +0.3229361f, -0.0083703f, -0.0435898f, +0.0608715f, +0.0999619f, +0.0478917f, -0.1979414f,
  -0.1183976f, -0.1351668f, +0.2896723f, -0.1246349f, -0.2103902f, -0.3495711f, +0.2105963f, +0.0787114f,
  -0.1299623f, -0.3696233f, -0.0286975f, +0.2165084f, +0.0527306f, -0.1095365f, +0.1277193f, +0.1557845f,
  -0.2242856f, -0.2642270f, -0.1079845f, -0.0615455f, +0.1222095f, -0.2249117f, -0.0240394f, -0.0665319f,
  +0.2466608f, +0.0111348f, -0.2656554f, +0.1072643f, -0.0251227f, -0.2882060f, +0.0494033f, +0.0734381f,
  +0.0976321f, -0.1125192f, +0.0864779f, +0.2188669f, +0.2153873f, -0.3286498f, -0.0183676f, +0.4710533f,
  -0.0779747f, -0.2846003f, +0.0800084f, +0.1762749f, -0.1030873f, +0.0581886f, +0.1387651f, +0.0626782f,
  -0.1840783f, -0.0282751f, -0.1302994f, +0.1179962f, +0.2615228f, -0.0053101f, +0.1235370f, -0.2391340f,
  -0.0918542f, +0.0380864f, -0.0147328f, +0.0864243f, +0.0681610f, -0.3106144f, +0.2678936f, +0.0150982f,
  -0.0125819f, +0.0871077f, +0.2226987f, +0.3967341f, +0.1618563f, +0.0158304f, -0.0265351f, -0.1631533f,
  +0.0936604f, +0.1940974f, -0.1981742f, +0.0084432f, +0.1379638f, +0.1257258f, -0.1415090f, -0.0240945f,
  +0.1118692f, -0.4596111f, -0.0577723f, +0.2257740f, -0.1023229f, -0.4974308f, -0.0976062f, -0.0184708f,
  +0.0350393f, -0.2417730f, +0.2434170f, +0.1989718f, +0.1514332f, -0.1157803f, +0.0795155f, +0.2137619f,
  -0.2453435f, +0.1176031f, +0.0815480f, -0.0374908f, +0.2882396f, +0.5455374f, -0.3956611f, -0.1057414f,
  +0.2034618f, -0.0030075f, -0.3087693f, -0.3643658f, +0.0902450f, -0.1732341f, -0.1877080f, -0.0774959f,
  -0.1571958f, -0.1685436f, -0.3086195f, +0.2514915f, -0.3103563f, +0.0387239f, -0.2986034f, -0.0905527f,
  +0.1430070f, +0.0630386f, +0.1592930f, -0.1631953f, +0.0241031f, -0.1718555f, +0.1238608f, -0.1333886f,
  -0.3320897f, +0.0641177f, +0.1269823f, -0.0322154f, -0.1151362f, -0.5759957f, -0.0356428f, -0.2340443f,
  +0.0476007f, +0.2720177f, +0.0590689f, +0.6249634f, -0.1748555f, +0.2795635f, -0.2168158f, -0.0129662f,
  +0.1235274f, +0.1801469f, +0.1706222f, +0.2230515f, +0.1149113f, -0.2952952f, +0.3382379f, -0.1262784f,
  -0.4521522f, +0.0579625f, -0.1364494f, +0.1591311f, -0.0753469f, -0.4412296f, -0.1286028f, +0.2440318f,
  +0.1639330f, +0.0095079f, -0.0054444f, +0.8903362f, +0.0920483f, +0.0782004f, -0.0278503f, -0.1715709f,
  -0.0134374f, -0.0569658f, +0.2950508f, +0.0600106f, -0.0286692f, -0.2426647f, +0.0549256f, -0.1565335f,
  -0.3011841f, -0.3270108f, -0.1072662f, +0.2574978f, -0.1139204f, -0.2738414f, -0.0563957f, -0.1828848f,
  -0.0597661f, -0.0443226f, +0.3005815f, +0.4237770f, +0.0083049f, +0.0292059f, -0.0528062f, +0.0196051f
);

const float biases[4] = float[4](
  +0.0439153f, -0.5209196f, +0.0019553f, -0.1149043f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer3 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0667704f, -0.1189266f, +0.0824776f, +0.1107725f, +0.1776259f, -0.2404850f, -0.2396487f, +0.1042404f,
  -0.2944182f, -0.0140615f, +0.1463831f, +0.1763690f, +0.4259296f, +0.1305024f, +0.1810378f, -0.4598022f,
  -0.1221291f, +0.1055832f, +0.0775786f, -0.1960555f, -0.4976662f, +0.0973646f, +0.0553917f, -0.2453591f,
  -0.2150470f, -0.1253990f, -0.0258014f, -0.1886658f, +0.0299359f, +0.3938714f, +0.2451153f, +0.2958738f,
  -0.2617826f, -0.0846599f, +0.1785725f, +0.4137543f, +0.2097742f, -0.1274454f, +0.4123075f, -0.6480107f,
  -0.9332598f, -0.3635703f, +0.0021913f, -0.0486787f, -0.4424653f, +0.0742152f, -0.5977545f, -0.0648442f,
  +0.0444132f, +0.0609876f, +0.0626666f, -0.2152601f, -0.1310390f, -0.1999697f, -0.2170205f, -0.1749485f,
  +0.1513715f, -0.3038684f, +0.0974118f, +0.5093178f, -0.3656153f, -0.0656381f, +0.0318526f, +0.0098583f,
  -0.4025764f, -0.2361323f, -0.5760694f, -0.5776901f, -0.5295832f, -0.0509700f, -0.3417918f, -0.1300453f,
  +0.2101220f, -0.1211152f, +0.0180110f, -0.0099078f, -0.1580420f, -0.0652785f, -0.3270048f, +0.0186954f,
  -0.3947647f, -0.0167827f, -0.0682693f, +0.0292969f, +0.3710199f, +0.0003122f, -0.2463470f, -0.2768940f,
  +0.1127954f, +0.2543123f, +0.1124531f, -0.2833502f, -0.0606004f, +0.1300055f, -0.2953862f, +0.0543872f,
  +0.0510368f, +0.1855338f, +0.0824380f, +0.2115401f, +0.2111803f, +0.0617929f, -0.4800446f, +0.1047096f,
  +0.5647945f, +0.0716483f, +0.0512882f, +0.5749125f, +0.3286342f, +0.2252463f, +0.5688357f, -0.5993333f,
  +0.0806304f, -0.2712795f, -0.0469013f, -0.3460388f, -0.0497914f, -0.2308957f, -0.7252171f, -0.7172835f,
  -0.4275902f, +0.1451117f, +0.3004545f, +0.1998281f, +0.3147404f, +0.2383749f, -0.1060297f, +0.0163409f,
  +0.3133905f, -0.0063693f, +0.1415181f, +0.3811131f, +0.5642079f, -0.0359109f, +0.3891325f, -0.5877818f,
  +0.0318049f, +0.0658303f, -0.1797047f, +0.0651384f, -0.0363521f, -0.0988502f, -0.1921238f, -0.1728056f,
  -0.0134751f, -0.5087066f, -0.0217249f, -0.1106677f, -0.1510295f, -0.2440207f, +0.0076584f, +0.1412006f,
  -0.5056539f, -0.3911300f, -0.0906341f, -0.0635320f, +0.2895110f, -0.2907641f, -0.4225536f, +0.5250543f,
  +0.4562257f, -0.4926138f, -0.1765168f, +0.2064816f, +0.0573682f, -0.2151535f, +0.4790309f, +0.2000409f,
  +0.0828219f, -0.1665696f, -0.1859833f, +0.3889983f, +0.1950016f, +0.1375366f, +0.2262979f, -0.1061584f,
  -0.1824402f, +0.0266943f, -0.3723806f, +0.3318117f, -0.6454372f, +0.0526257f, +0.0805099f, -0.1241915f,
  -0.0726062f, -0.0329919f, -0.1411840f, +0.3277762f, -0.1888702f, +0.0456723f, -0.1371291f, -0.2215895f,
  +0.0461603f, -0.2647933f, -0.1941071f, -0.2253035f, -0.3129472f, -0.1082731f, +0.2835989f, -0.0569103f,
  +0.6115541f, +0.0490085f, +0.1531334f, -0.1116040f, +0.0973961f, +0.0989358f, +0.1894046f, +0.2168719f,
  +0.0846237f, +0.0615373f, -0.1323056f, +0.2455713f, -0.1293754f, -0.1388310f, +0.1192151f, +0.1237453f,
  +0.0992759f, +0.1173182f, +0.0751791f, +0.2072330f, -0.0655335f, +0.3089820f, -0.3960869f, -0.2287330f,
  +0.1128867f, -0.1128896f, +0.0197271f, -0.1274293f, +0.0970124f, +0.1487718f, +0.0298285f, -0.6248978f,
  -0.4638766f, -0.2176178f, -0.0443678f, -0.3782734f, -0.0591103f, +0.0086910f, +0.0593322f, -0.4201904f,
  +0.6170092f, -0.6152892f, +0.2450423f, +0.3382892f, -0.5912688f, +0.1027337f, -0.4238251f, +0.5525873f,
  +0.7427475f, -0.2312484f, +0.2784537f, +0.4745748f, -0.2369685f, -0.0855531f, -0.3398019f, +0.3995166f,
  +0.2168840f, -0.0500633f, -0.0084732f, +0.2808439f, -0.2089604f, +0.0854806f, +0.1383866f, +0.4636026f,
  +0.0064333f, -0.2793570f, +0.1019902f, +0.1393633f, -0.3985226f, +0.1190103f, +0.3257674f, +0.0287499f,
  -0.0348160f, -0.0236527f, +0.0587014f, +0.0634179f, -0.0826328f, -0.2261406f, +0.0111308f, +0.2422877f,
  +0.1926467f, +0.1319797f, +0.0057174f, +0.2905326f, +0.1433153f, +0.0316883f, -0.1747103f, -0.0278019f
);

const float biases[4] = float[4](
  +0.1111696f, +0.1751774f, +0.0970048f, -0.0053652f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer3 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0696500f, +0.3877296f, +0.2790223f, +0.2339543f, -0.1049565f, -0.0080600f, +0.3752132f, -0.3438577f,
  +0.1188064f, -0.2844048f, -0.2966643f, +0.3390200f, -0.8313980f, -0.1096890f, -0.3183354f, -0.5375427f,
  -0.3376954f, +0.0896232f, +0.1164249f, -0.0254549f, -0.0004849f, +0.1301037f, +0.0604351f, +0.0714876f,
  +0.1487456f, +0.0549541f, +0.1689475f, +0.6757541f, -0.2327656f, -0.1609759f, +0.1631080f, -0.7096141f,
  -0.1795960f, -0.2348922f, +0.1450880f, -0.2641454f, -0.3575286f, +0.1246480f, -0.8481605f, -0.3183769f,
  +0.0810791f, -0.3923382f, -0.0252476f, -0.3527224f, +0.1623903f, -0.2662387f, +0.2854841f, +0.0939578f,
  +0.3281331f, +0.2115454f, +0.1310626f, +0.9580754f, +0.2899826f, +0.3015687f, -0.3885846f, +0.0535981f,
  -0.5870157f, -0.1202810f, -0.3869626f, -0.4220519f, -0.3900965f, +0.1323902f, -0.1068935f, +0.1989038f,
  +0.1190486f, -0.0610957f, +0.1419336f, -0.1595117f, -0.0832057f, -0.1667327f, +0.2912740f, -0.0031789f,
  +0.1244660f, +0.0423566f, -0.0106550f, +0.2595446f, +0.0553865f, -0.1610480f, -0.3135685f, -0.1860239f,
  +0.2572769f, -0.2046742f, +0.2685599f, -0.3136895f, +0.4821260f, -0.2182063f, +0.5203047f, -0.1999656f,
  +0.0197580f, +0.2658753f, +0.2359613f, +0.0683919f, -0.3374726f, +0.1825821f, +0.1185914f, +0.1987461f,
  +0.1171331f, -0.1249550f, -0.2439280f, +0.0436229f, -0.0528376f, +0.2467185f, -0.8794848f, +0.2760551f,
  -0.3226174f, +0.8257440f, +0.0087746f, -0.0541646f, +0.2551273f, -0.3183327f, +1.0036775f, -0.5578586f,
  -0.1829763f, +0.0915218f, -0.0210240f, -0.2692521f, -0.3014554f, +0.1304053f, -0.1175343f, +0.2207235f,
  -0.0812839f, -0.1126966f, -0.0089067f, -0.1800627f, -0.4490659f, +0.1083351f, -0.3798956f, +0.1984499f,
  +0.4148602f, +0.3309189f, +0.5383071f, +0.1308048f, +0.5441496f, -0.1543028f, -0.3107701f, +0.2600677f,
  +0.1622857f, -0.0945241f, -0.1054466f, -0.2726577f, -0.1634322f, +0.0318851f, +0.1948583f, +0.2403987f,
  +0.3170935f, +0.1344573f, -0.1570785f, -0.1813807f, -0.1372951f, +0.0076409f, -0.4552883f, -0.1537189f,
  +0.1486304f, -0.2084020f, -0.1445899f, +0.1115474f, -0.0318959f, -0.0756855f, +0.0340502f, +0.0338904f,
  +0.1019675f, -0.5057191f, -0.3328328f, +0.1423486f, +0.1249558f, -0.3301737f, -0.0311683f, +0.0261069f,
  -0.0996677f, +0.3012197f, +0.1386739f, -0.2161326f, +0.3257214f, -0.3089540f, -0.4554934f, -0.1866086f,
  -0.2042470f, +0.1922209f, -0.3260481f, -0.4100305f, +0.0856824f, -0.1200326f, -0.0270878f, -0.7194098f,
  +0.3342959f, +0.2285155f, +0.2201633f, -0.6218787f, -0.1168157f, -0.1116695f, +0.5048168f, +0.1257309f,
  -0.1520339f, -0.1105892f, +0.0413143f, +0.0159768f, +0.0547439f, -0.0085975f, +0.0778263f, +0.1642880f,
  +0.3806080f, -0.3498054f, -0.0816317f, +0.1966833f, +0.3086356f, +0.1925673f, +0.2371924f, -0.3664918f,
  +0.0668468f, +0.2289398f, +0.2165118f, +0.1617070f, +0.3202400f, +0.2168490f, +0.0965881f, -0.4883848f,
  +0.2827458f, -0.1200997f, +0.1279277f, +0.1286125f, +0.0755052f, -0.0687478f, -0.0689416f, -0.0604438f,
  +0.0472947f, +0.1966061f, +0.2485343f, +0.1035269f, +0.2656631f, -0.3583908f, +0.4355696f, -0.4732481f,
  +0.0704543f, -0.1709609f, -0.0798816f, +0.2998509f, +0.5646218f, -0.3334764f, -0.3391083f, -0.2049034f,
  -0.0205931f, +0.1990425f, -0.1080032f, -0.5084293f, -0.0810115f, -0.1140806f, -0.0807518f, -0.1939907f,
  +0.0386285f, +0.0980648f, +0.2439161f, +0.0871641f, -0.2603515f, -0.0123510f, -0.1973252f, -0.3426214f,
  -0.0771937f, +0.1696064f, +0.0112839f, +0.1089768f, +0.6117314f, -0.1957760f, -0.5406688f, -0.2604572f,
  +0.2184034f, +0.1618462f, +0.0983087f, -0.5525668f, +0.3639883f, -0.0618944f, -0.1806126f, -0.1297590f,
  +0.4937577f, +0.1795995f, +0.3886126f, +0.1309951f, -0.1410985f, -0.2562103f, +0.0150572f, -0.5803143f,
  -0.4861192f, -0.1606506f, -0.1401292f, -0.0919107f, +0.0071394f, -0.2904076f, +0.1906192f, -0.5874172f
);

const float biases[4] = float[4](
  -0.1027029f, -0.2663576f, -0.0052625f, -0.2527225f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer4 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2022784f, +0.0612816f, +0.0302202f, -0.1767150f, -0.0598536f, +0.1589167f, -0.2731502f, -0.3686596f,
  -0.5657772f, -0.0980072f, -0.0652563f, +0.0515718f, +0.1046575f, +0.2432441f, -0.3759624f, +0.3145570f,
  -0.0255698f, +0.2990325f, -0.0398156f, -0.0418285f, +0.7928885f, +0.1766218f, -0.0742263f, +0.3930012f,
  -0.2150218f, -0.6577615f, +0.0694779f, +0.1875690f, +0.0732409f, -0.1398204f, -0.3183475f, -0.1024355f,
  +0.5399042f, -0.1709498f, -0.2106309f, -0.1394480f, +0.3031905f, +0.1340656f, -0.2777405f, -0.1547941f,
  +0.2234919f, +0.0295171f, -0.0461010f, -0.0670523f, +0.0004427f, +0.2457253f, -0.0514431f, -0.1536732f,
  -0.1625277f, -0.1397711f, -0.0719479f, -0.1594516f, +0.0340654f, -0.5356084f, -0.0406176f, -0.0732212f,
  +0.5985281f, -0.0770656f, -0.1241371f, +0.2194686f, +0.1904811f, -0.5973191f, +0.0959348f, +0.1910345f,
  +0.0967480f, -0.0086539f, +0.2232512f, +0.0564716f, -0.1636070f, +0.0081373f, -0.0848380f, +0.0945871f,
  +0.2353383f, +0.0378262f, -0.0598008f, +0.1411771f, -0.0216975f, -0.5286893f, +0.3511201f, -0.0584131f,
  +0.1520711f, +0.3329768f, +0.4682167f, +0.1094826f, -0.1181893f, -0.2605068f, -0.0857930f, +0.0277107f,
  +0.0610650f, -0.5970652f, +0.1417651f, -0.0265049f, -0.0519790f, -0.1589678f, -0.4516695f, +0.3054615f,
  +0.0759742f, +0.5758272f, -0.0671035f, -0.1937179f, -0.0008719f, +0.0826756f, +0.3118468f, +0.1213670f,
  -0.4760279f, +0.4891431f, +0.0885296f, +0.0599107f, -0.1570160f, +0.3248771f, -0.1723188f, +0.5533201f,
  +0.0956548f, -0.3508006f, +0.4218252f, -0.1981675f, +0.7275139f, +0.0050047f, -0.1393536f, -0.1886846f,
  +0.2039229f, +0.2595753f, -0.1621644f, +0.1902124f, -0.0753350f, +0.1005930f, +0.3121095f, +0.1167753f,
  -0.0862004f, -0.2050092f, +0.2759178f, +0.1252513f, -0.4701753f, -0.2196022f, +0.1561713f, +0.1278851f,
  +0.1650633f, -0.0659553f, +0.4842684f, -0.1534160f, +0.1869569f, +0.0836152f, +0.0096780f, -0.2879285f,
  +0.0505514f, -0.1960260f, +0.1520439f, -0.0652153f, +0.0873906f, +0.0768908f, -0.0692937f, -0.3892781f,
  -0.0089842f, -0.1514146f, +0.1607253f, +0.3861640f, -0.1278829f, -0.0680227f, +0.2512211f, -0.0716494f,
  -0.2126247f, +0.4022389f, +0.1161269f, +0.1968463f, -0.0748259f, -0.3687640f, +0.0316726f, -0.4078898f,
  -0.0778072f, -0.2188277f, -0.1010354f, +0.0274776f, +0.0456541f, -0.2436796f, +0.0220558f, -0.3066554f,
  +0.0651133f, -0.3125129f, -0.3888357f, +0.3016058f, -0.0873948f, -0.2925688f, +0.3949873f, +0.1853873f,
  -0.2246758f, +0.1245022f, -0.3435088f, +0.4362263f, -0.1885668f, -0.1744107f, +0.2355628f, -0.3651865f,
  +0.0019843f, +0.1599022f, +0.1386705f, -0.3031871f, +0.0596768f, +0.2705730f, +0.2058528f, +0.2984204f,
  -0.1193593f, -0.0253785f, +0.0895201f, -0.0644336f, -0.0522892f, -0.1342106f, +0.2102915f, -0.0284706f,
  -0.1603156f, +0.2002136f, -0.1637149f, -0.0685860f, -0.0721289f, -0.0109597f, +0.1183229f, -0.0997138f,
  +0.2832361f, -0.0419412f, -0.0109094f, +0.0543740f, +0.1553950f, -0.0667876f, -0.0329879f, -0.0398413f,
  +0.2563939f, +0.4137906f, +0.1219703f, +0.2563786f, -0.1645871f, -0.2696023f, +0.1880727f, +0.6512294f,
  +0.2118966f, -0.1698244f, -0.1008123f, +0.1588128f, -0.0787550f, -0.2861561f, +0.3900727f, +0.0643050f,
  +0.6041746f, +0.2268246f, -0.0715953f, +0.2669419f, -0.0092269f, +0.2376661f, +0.5102636f, +0.0511496f,
  +0.1353342f, +0.3848848f, +0.0919872f, -0.1592302f, -0.8319271f, +0.7720828f, +0.3371472f, +0.4498498f,
  +0.3742821f, -0.3151157f, -0.2106889f, -0.0996727f, -0.1139804f, -0.9041234f, +0.3508425f, -0.0144148f,
  +0.4238946f, +0.0318639f, -0.2865803f, +0.3915560f, +0.2194437f, -0.4138463f, +0.1103500f, +0.1104600f,
  +0.1887124f, +0.1633259f, -0.4975409f, -0.1759417f, -0.2135255f, -0.0226653f, +0.0246343f, -0.3559086f,
  +0.0418113f, -0.0445953f, +0.0147578f, +0.0067520f, -0.2030735f, -0.0565814f, +0.1114496f, -0.3633268f
);

const float biases[4] = float[4](
  +0.0259182f, -0.1398144f, +0.1511142f, -0.1806220f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer4 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2658506f, +0.2565858f, -0.0781907f, +0.0819261f, -0.0193232f, -0.2798909f, -0.0319444f, +0.0272017f,
  -0.2568996f, +0.1080410f, -0.4075220f, +0.0224670f, +0.1373413f, -0.7055845f, +0.0646216f, +0.1720479f,
  +0.0694139f, +0.1631627f, -0.2254488f, +0.4786676f, +0.0704880f, +0.0171359f, +0.3543493f, -0.3913619f,
  -0.3112312f, -0.1014981f, +0.3650827f, -0.1453071f, -0.0868893f, -0.0041685f, -0.2951484f, +0.0312467f,
  -0.3841693f, +0.1368464f, +0.6124783f, -0.5629963f, +0.4447891f, +0.2221044f, -0.1911555f, +0.1169140f,
  -0.0050561f, +0.6020442f, +0.3602959f, -1.0160642f, +0.4354781f, -0.0591520f, -0.1764882f, +0.0578959f,
  -0.0640969f, -0.0875196f, +0.1118259f, +0.1754891f, +0.1620052f, -0.3102962f, -0.0047714f, -0.2395859f,
  -0.4154106f, -0.1372193f, +0.4531149f, -0.3370205f, +0.3774141f, +0.2505103f, -0.3214316f, -0.4117996f,
  -0.1511680f, -0.0722475f, +0.0550887f, -0.6194733f, +0.7013819f, +0.2794577f, +0.0475694f, +0.1357354f,
  +0.1452183f, -0.2464868f, +0.1459174f, +0.1601155f, +0.0823350f, -0.0269613f, +0.0362145f, +0.3924327f,
  +0.0155118f, +0.0403123f, +0.1740262f, +0.0488800f, -0.1185744f, +0.1891885f, +0.0753723f, +0.2014075f,
  -0.0370672f, -0.0051467f, +0.1171534f, -0.0844725f, -0.1753300f, -0.1358948f, -0.0266041f, +0.3097816f,
  -0.1783164f, -0.0101523f, -0.1597595f, -0.0161987f, +0.1191386f, -0.0009044f, +0.2939914f, -0.0217603f,
  -0.1088404f, -0.1603482f, -0.1516490f, +0.0289305f, -0.3217660f, +0.2788525f, +0.1826262f, +0.0500414f,
  -0.0053282f, -0.1171055f, +0.0913698f, +0.1849268f, -0.2288952f, +0.1575723f, +0.2155307f, +0.2378158f,
  +0.0226883f, -0.0394634f, +0.2033219f, -0.1893824f, +0.0704319f, -0.2137646f, +0.0592068f, -0.1334207f,
  -0.1555125f, +0.0032646f, -0.1973368f, +0.1018298f, +0.1570385f, -0.0576417f, -0.0092061f, +0.1742482f,
  +0.0359442f, +0.0840766f, -0.3684438f, +0.2416252f, -0.0884644f, -0.2061062f, -0.0367953f, -0.0039076f,
  -0.1813308f, +0.2087960f, -0.1665589f, -0.0495850f, -0.1754526f, +0.0075477f, -0.4276488f, -0.1061931f,
  -0.2377873f, -0.1041660f, -0.2516835f, +0.2220962f, +0.2339608f, -0.1757918f, -0.1681907f, -0.1473847f,
  +0.0909433f, +0.1579218f, -0.0820655f, +0.5540891f, +0.0920563f, +0.4717050f, +0.4493652f, +0.1090883f,
  -0.1106216f, +0.0626533f, -0.1338266f, +0.0998369f, -0.1304144f, -0.5213960f, -0.1765578f, -0.1954320f,
  -0.5478061f, -0.0804346f, -0.2914043f, +0.6543177f, +0.0002347f, -0.0106550f, -0.0581388f, +0.1239408f,
  -0.3023162f, +0.1813445f, +0.1474227f, +0.8059893f, +0.7396703f, -0.2643413f, -0.0865199f, +0.4555846f,
  -0.1568750f, +0.1159079f, -0.0373351f, +0.0493895f, -0.1237637f, -0.3546939f, +0.0912147f, +0.1133337f,
  -0.3510928f, +0.0509058f, +0.1311273f, +0.0012055f, +0.0697195f, -0.6874300f, -0.1817651f, +0.2040206f,
  +0.1122889f, +0.0575313f, +0.1119599f, -0.1348044f, +0.3763008f, -0.4431070f, -0.0728236f, +0.0599940f,
  +0.0467855f, +0.0971367f, +0.0735256f, +0.2419353f, +0.0262272f, -0.0622809f, +0.0838506f, -0.3458879f,
  +0.0897138f, +0.2461475f, +0.1845785f, +0.0010188f, -0.1415274f, +0.6794627f, +0.3709752f, +0.0476959f,
  -0.0624037f, +0.3001447f, +0.1538368f, +0.0068827f, +0.0440275f, -0.1091607f, -0.0865248f, +0.3971608f,
  -0.3883189f, -0.2055162f, +0.4561836f, +0.1569624f, -0.0023468f, -0.2217139f, -0.1448522f, +0.0003876f,
  -0.1837779f, -0.2262564f, +0.0754113f, +0.3397139f, +0.7597719f, -0.0884604f, +0.1031646f, +0.1773347f,
  +0.0623011f, +0.2312232f, -0.0330091f, +0.2519909f, +0.9025423f, +0.0882019f, +0.3687084f, -0.1397496f,
  -0.1537152f, -0.5188211f, +0.1893609f, +0.0720700f, +0.0747534f, +0.1929978f, +0.0063573f, -0.1179876f,
  +0.1263421f, -0.3920519f, -0.2091667f, +0.3168196f, +0.4353942f, +0.2228714f, +0.5551096f, +0.4106106f,
  +0.0571380f, +0.1001439f, -0.3103939f, +0.4237049f, +0.1102868f, +0.2111374f, +0.0099569f, +0.5407988f
);

const float biases[4] = float[4](
  -0.0061760f, -0.3384310f, -0.0619527f, -0.0462725f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer5 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2912769f, +0.3040220f, +0.1234236f, +0.4781923f, +0.1162764f, -0.1515136f, +0.1128968f, -0.0958083f,
  -0.5871431f, +0.1157509f, +0.1026572f, -0.5128133f, +0.0144333f, -0.2826828f, +0.4443290f, +0.2601960f,
  -0.2472596f, +0.0093559f, -0.0767163f, -0.2613561f, +0.3212471f, -0.1277235f, +0.4311942f, +0.4804265f,
  -0.1209551f, -0.2287730f, -0.0469962f, +0.2728494f, -0.3004563f, -0.0474174f, +0.4443583f, -0.1907230f,
  -0.2589432f, +0.1170973f, -0.1191150f, -0.0963020f, +0.0474644f, +0.0093794f, +0.4181760f, +0.0965289f,
  -0.1384690f, +0.1396142f, -0.1795216f, -0.2331757f, +0.1562832f, -0.0656814f, +0.2306370f, -0.2390257f,
  +0.1893199f, -0.2354926f, -0.2383413f, +0.3170899f, -0.1452460f, +0.0139714f, +0.3132109f, -0.1836554f,
  +0.1202126f, -0.0828770f, -0.0780006f, +0.2329970f, -0.0286434f, +0.1179168f, +0.1831872f, +0.0010476f,
  +0.0768503f, +0.2016575f, -0.2508205f, -0.0681316f, -0.0147359f, -0.0946507f, -0.0335547f, +0.0202303f,
  +0.1424087f, +0.3000115f, -0.2682301f, -0.1242285f, +0.0145763f, -0.3146602f, -0.3538316f, +0.1260993f,
  -0.0313352f, -0.2551583f, -0.1695973f, -0.3483359f, +0.4225706f, -0.2857098f, -0.5544550f, +0.0607569f,
  -0.0850533f, -0.4683147f, +0.0213953f, -0.1279047f, +0.2916868f, -0.0121320f, -0.0667614f, -0.1607034f,
  +0.3119303f, -0.1421707f, -0.1343985f, +0.0611206f, +0.1072560f, +0.0644172f, +0.1226649f, -0.4380880f,
  -0.2427512f, +0.3295712f, -0.2468785f, +0.2192856f, +0.7579675f, -0.3816481f, +0.9160996f, -0.8498989f,
  -0.5922658f, +0.2495485f, +0.0009769f, +0.0832695f, +0.2860331f, -0.1861645f, -0.0424396f, -0.5114090f,
  -0.0925926f, -0.2849998f, -0.1738000f, +0.0491281f, -0.2916256f, -0.0619957f, +0.3168653f, +0.1378644f,
  +0.0301406f, -0.0563257f, +0.0079584f, -0.2158304f, -0.1481584f, +0.0334844f, -0.2056316f, +0.4757480f,
  +0.1177895f, +0.0599026f, -0.0659001f, -0.0689619f, -0.2297213f, +0.0087685f, +0.0493613f, +0.1070269f,
  +0.1297921f, +0.0452555f, -0.2157881f, +0.2751642f, +0.0456600f, +0.0315095f, +0.0582033f, -0.2816351f,
  +0.2314993f, -0.0333863f, +0.2644750f, +0.4159470f, -0.0955768f, +0.1121902f, +0.2178713f, -0.3400168f,
  +0.6163447f, -0.0546911f, -0.2891728f, +0.1231316f, +0.2790691f, +0.1025287f, -0.2092647f, +0.1260104f,
  -0.0408701f, -0.0407218f, -0.0544368f, +0.2033097f, +0.0937913f, +0.0421368f, +0.1827674f, -0.0030028f,
  -0.0429763f, -0.2796222f, +0.6593370f, -0.1451698f, -0.2883076f, -0.4492677f, -0.5839577f, -0.0603120f,
  -0.2756756f, -0.2815447f, +0.1972740f, -0.3589120f, +0.4823685f, +0.0187750f, -0.1045760f, +0.4039169f,
  +0.1863603f, -0.2014261f, +0.0452484f, +0.0400408f, -0.2419950f, +0.0273022f, +0.4155481f, -0.3854962f,
  -0.1469033f, +0.2251712f, -0.1973186f, +0.0371400f, +0.3737330f, -0.1723661f, +0.1255837f, -0.2255037f,
  +0.1121035f, -0.1827308f, -0.1139564f, +0.3823219f, -0.0672273f, -0.0707930f, +0.0483992f, -0.2165627f,
  +0.4635519f, -0.1583197f, -0.0710925f, -0.0471250f, +0.0065480f, +0.2442719f, +0.9517731f, +0.1962257f,
  +0.1057555f, +0.0702606f, -0.0557779f, +0.3519965f, +0.2873684f, -0.0986728f, +0.4421690f, +0.1676582f,
  -0.2413924f, +0.0846560f, -0.2746502f, -0.1825389f, +0.0701775f, +0.1134865f, -0.5786457f, -0.0627768f,
  -0.0556471f, -0.1569860f, +0.1783863f, -0.4521576f, -0.0415833f, -0.1154741f, +0.3559350f, -0.0491416f,
  +0.7529329f, -0.1062763f, +0.2759427f, +0.1606033f, +0.1710316f, +0.1493140f, +0.9943711f, +0.4131328f,
  +0.2225711f, +0.3645160f, +0.1671679f, +0.0047789f, -0.0872961f, +0.0163638f, +0.3560362f, +0.2098637f,
  -0.1627975f, +0.2529558f, -0.0273783f, +0.2958003f, -0.1379353f, -0.1304250f, -0.1262400f, -1.0206114f,
  -0.0728421f, +0.0660812f, -0.1416217f, -0.3317538f, +0.0588368f, -0.0977719f, -0.2915975f, -0.1268509f,
  +0.0597741f, -0.1595689f, +0.0729530f, -0.1104699f, -0.1096501f, -0.1610690f, +0.4095655f, -0.4222739f
);

const float biases[4] = float[4](
  -0.0772062f, +0.0196875f, -0.0987797f, -0.1187268f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer5 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2895848f, +0.0248399f, -0.2988070f, -0.0396285f, -0.0114456f, -0.0270995f, +0.1288702f, -0.1038714f,
  +0.0674240f, +0.1186997f, +0.2835109f, +0.6529576f, +0.0226481f, -0.2464425f, -0.1982419f, -0.5625007f,
  +0.2375942f, +0.2584997f, -0.0026975f, -0.3344239f, -0.5418473f, +0.0601395f, +0.1235874f, -0.1043350f,
  +0.0630876f, -0.1539237f, -0.1685078f, +0.1389472f, +0.2052399f, -0.0839149f, +0.1276004f, -0.2710037f,
  -0.6909282f, +0.1575093f, +0.3626564f, +0.6018773f, +0.2270114f, -0.0777483f, -0.3675044f, -0.5723379f,
  -0.0996637f, -0.3424829f, +0.1729946f, -0.5872195f, -0.5048208f, -0.0501762f, -0.6927635f, -0.4391282f,
  -0.2478679f, +0.1368066f, +0.2045556f, -0.5664812f, -0.0461420f, +0.0507959f, -0.0081671f, +0.4613413f,
  +0.2888671f, -0.0882972f, -0.1943584f, +1.2264824f, +0.2570424f, +0.2438316f, -0.1250409f, -0.1165235f,
  -0.0855642f, +0.0876660f, +0.0644296f, -0.4124307f, -0.0880813f, -0.0244269f, +0.0493149f, -0.2114486f,
  +0.0193022f, -0.1058138f, -0.1950334f, -0.0405227f, -0.1506590f, +0.0783694f, -0.0301461f, -0.3654928f,
  -0.1388210f, +0.0309937f, -0.2606522f, +0.0983083f, -0.0753847f, -0.0484810f, +0.4479921f, +0.1944671f,
  +0.1640081f, -0.2595955f, -0.0378619f, +0.2030639f, -0.4909491f, +0.0468830f, -0.1771458f, -0.1748138f,
  -0.1839433f, +0.0432310f, +0.4314419f, +0.1327606f, -0.1759720f, +0.1104437f, -0.2491444f, +0.3590707f,
  +0.0664998f, -0.3396254f, +0.5197270f, +0.1696055f, -0.2383679f, +0.1643684f, -0.3611688f, +0.2478919f,
  -0.1466429f, -0.0399906f, +0.2754419f, +0.2098204f, -0.1515821f, -0.0183158f, -0.1884994f, -0.2304267f,
  +0.3194064f, +0.1632557f, -0.3069725f, -0.1545669f, +0.4213700f, -0.2564515f, -0.0376793f, -0.1224014f,
  +0.1564040f, +0.2331221f, +0.1427586f, -0.3170247f, +0.3818456f, -0.0283895f, +0.3566281f, -0.5874773f,
  +0.0577116f, +0.1382115f, +0.0528800f, -0.3217927f, +0.1840314f, +0.1701062f, +0.1163206f, -0.1590769f,
  -0.2485568f, -0.2125184f, +0.6160316f, +0.0031480f, +0.0122674f, +0.2977585f, +0.5179127f, +0.2756622f,
  +0.2871439f, -0.3561668f, +0.3243569f, +0.1815918f, -0.1445383f, +0.0082501f, -0.1507334f, -0.0664623f,
  -0.1371322f, +0.3811847f, +0.1796005f, +0.0841050f, +0.2796329f, +0.2409903f, -0.3756629f, +0.4190186f,
  -0.1625881f, +0.0179303f, -0.1599783f, +0.2296270f, -0.0171803f, -0.0813963f, +0.3236595f, -0.5099167f,
  +0.0478966f, -0.9920403f, -0.1856044f, -0.5153413f, +0.2163108f, -0.1227986f, -0.0670583f, -0.5513831f,
  +0.0932046f, -0.3388121f, -0.3443040f, -0.1409916f, +0.0196375f, -0.2305801f, -0.2441124f, -0.3799615f,
  +0.3183073f, -0.2301078f, -0.0109001f, +0.4258195f, +0.0712190f, -0.1744214f, +0.1112381f, +0.1621786f,
  -0.1777919f, -0.1373868f, -0.0443284f, +0.2949789f, -0.3218969f, -0.0284979f, +0.2340806f, -0.1715168f,
  -0.1300111f, +0.1712620f, -0.0975898f, -0.0054082f, +0.2285127f, -0.0672055f, -0.0821771f, +0.1026240f,
  +0.1344136f, -0.2931716f, +0.1665711f, +0.1368973f, -0.1011437f, +0.0905775f, +0.7903584f, -0.4614207f,
  -0.3224173f, -0.1376750f, +0.3217382f, +0.2542535f, +0.2002838f, +0.2001042f, -0.3997399f, -0.4817835f,
  -0.1369259f, -0.3103118f, +0.4182555f, +0.4867725f, +0.0838883f, -0.2290865f, -0.1784792f, -1.0598392f,
  +0.0923143f, +0.2594317f, -0.2039690f, -0.0126826f, -0.0904008f, -0.0961400f, +0.4020689f, +0.1715804f,
  -0.5577321f, +0.0292087f, +0.2115026f, +0.0913751f, -0.3332522f, +0.1951028f, -0.2422446f, +0.2794119f,
  -0.4175551f, -0.1795208f, +0.2338530f, +0.3732924f, +0.2347708f, +0.3123878f, +0.1526842f, +0.0164804f,
  -0.1805295f, +0.1385940f, +0.1195698f, -0.3551922f, -0.0405448f, +0.0768356f, -0.2633311f, +0.3009065f,
  -0.4252982f, +0.2180680f, +0.1992462f, +0.1564851f, -0.0001066f, -0.0485814f, -0.4907047f, +0.1081816f,
  +0.0308074f, -0.1836977f, -0.0775746f, +0.1581253f, +0.0588579f, +0.1507195f, +0.1089364f, -0.1746874f
);

const float biases[4] = float[4](
  -0.0823552f, -0.0988607f, -0.0423378f, -0.0278038f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer6 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0355672f, -0.0293873f, +0.4839445f, +0.2548379f, +0.3691680f, +0.0556967f, -0.3408823f, -0.0712699f,
  -0.1456381f, +0.1526958f, +0.3572343f, -0.0986906f, +0.3232803f, -0.3374487f, -0.4487177f, +0.1003029f,
  -0.1092176f, +0.0825219f, -0.2212178f, -0.0516825f, +0.0395901f, -0.1508716f, -0.2558756f, +0.1893299f,
  +0.1225459f, +0.1063996f, -0.2476540f, +0.2314694f, +1.0662950f, +0.0746646f, -0.0408078f, -0.1566143f,
  +0.1488980f, -0.0388816f, -0.2438184f, -0.0238146f, +0.4376467f, -0.1192867f, -0.6026119f, +0.2231330f,
  -0.2483506f, +0.0567951f, -0.0070907f, +0.3598769f, +0.0356752f, -0.1941005f, -0.2569628f, -0.3678614f,
  +0.3253098f, +0.0253722f, -0.0558028f, +0.2934904f, +0.6363814f, +0.1062451f, -0.4037018f, +0.0165065f,
  +0.2196464f, -0.2920440f, -0.3578315f, -0.3244761f, +0.3856673f, -0.2007374f, -0.1906205f, +0.4204690f,
  -0.0639452f, -0.0375481f, -0.1685535f, +0.3046275f, +0.1469086f, -0.3577890f, -0.1139870f, +0.3696477f,
  +0.0979597f, +0.0499891f, +0.2188092f, -0.1562787f, -0.0599651f, -0.3242999f, +0.2127160f, +0.0673188f,
  +0.2414483f, -0.0447620f, -0.3966831f, -0.2813456f, +0.2645075f, -0.0961014f, +0.2458846f, -0.4379772f,
  +0.2119783f, +0.0142951f, +0.3806137f, +0.2170971f, +0.2532271f, -0.1647158f, +0.3522103f, -0.4544813f,
  -0.2929215f, +0.3997921f, +0.5422652f, +0.1328537f, -0.4651461f, -0.1560173f, +0.1435826f, +0.0919650f,
  -0.1053343f, -0.3873033f, +0.1466227f, -0.1624322f, -0.4439225f, +0.4181195f, +0.6500549f, -0.1066691f,
  +0.1526588f, -0.1658583f, +0.7107112f, -0.2348478f, -0.1131230f, -0.0822982f, +0.2816451f, +0.1752507f,
  +0.2229877f, -0.2048258f, +0.3668141f, -0.0579639f, -0.3468566f, -0.2204003f, -0.3010458f, +0.2733797f,
  -0.0029884f, -0.5172186f, -0.1633868f, +0.1268145f, -0.0021095f, +0.0475638f, +0.1525871f, -0.4646212f,
  +0.2032419f, -0.5707887f, +0.3771381f, -0.3685719f, +0.0201905f, -0.2082585f, +0.2673385f, +0.1066519f,
  +0.0373234f, -0.0383872f, -0.0138770f, +0.0324352f, -0.2367003f, +0.1097969f, -0.0229334f, -0.2403610f,
  +0.0091469f, -0.2158805f, -0.1628259f, -0.3586741f, -0.0400810f, -0.0913374f, +0.0342158f, +0.0087631f,
  +0.1230099f, -0.0588058f, -0.2133377f, -0.2658284f, -0.1322686f, +0.0723510f, +0.1712890f, +0.1293154f,
  -0.0294582f, +0.1041247f, +0.0552692f, +0.1474195f, -0.1865247f, -0.0053932f, -0.0892173f, -0.2055361f,
  +0.2121038f, +0.0229855f, -0.1370911f, -0.1629632f, -0.0197346f, +0.2078234f, -0.1032448f, -0.0073887f,
  +0.0879707f, +0.1086610f, +0.1354461f, -0.5344966f, -0.2011805f, +0.0108922f, +0.1691803f, -0.1578508f,
  +0.1619022f, -0.1620553f, +0.0574178f, +0.0460501f, +0.1997946f, +0.0518620f, -0.3006802f, -0.3662175f,
  +0.1547087f, -0.0216715f, -0.1748891f, -0.1139339f, -0.1540895f, +0.0135969f, -0.4190279f, -0.3192756f,
  +0.1046251f, +0.0023113f, +0.2014659f, -0.2606663f, -0.2279777f, +0.0988947f, -0.1837869f, +0.3069017f,
  +0.0303871f, -0.1643494f, -0.2787094f, -0.1609356f, -0.2738919f, +0.2588762f, +0.1506221f, +0.1561817f,
  -0.2497627f, -0.0376369f, -0.2270369f, -0.0888467f, -0.3180988f, -0.0459086f, -0.0615064f, +0.1031413f,
  -0.1624323f, -0.0705448f, +0.0955123f, -0.0570674f, -0.2797776f, -0.1518284f, -0.1403827f, +0.1998083f,
  +0.0057063f, +0.2029044f, +0.1814596f, +0.0135811f, -0.0327925f, -0.1881249f, -0.0157754f, -0.1655465f,
  -0.0908915f, +0.2179469f, +0.1689977f, -0.1695042f, +0.3342801f, +0.1912249f, -0.0051174f, +0.0911857f,
  -0.1214317f, -0.0764173f, -0.3850028f, -0.5811661f, -0.1192335f, +0.4212810f, -0.0676811f, +0.4137877f,
  +0.2446291f, -0.1487848f, -0.2755313f, -0.0662341f, -0.2605004f, +0.5884945f, -0.3851700f, -0.1118547f,
  +0.2966337f, +0.1206904f, +0.1958805f, +0.2149102f, -0.1200027f, +0.2220786f, -0.5006715f, +0.2585243f,
  -0.1655893f, +0.2833644f, -0.2351213f, -0.2864597f, -0.1349867f, +0.1994877f, -0.3121300f, +0.2038870f
);

const float biases[4] = float[4](
  -0.0124681f, +0.0661425f, +0.1273111f, -0.1306376f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer6 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0462298f, +0.0475817f, +0.1727011f, -0.0672298f, -0.3712766f, -0.4492148f, -0.2483955f, -0.2002235f,
  +0.2422297f, -0.1437683f, +0.0389227f, -0.3204025f, -0.2106105f, -0.3022264f, +0.1399697f, +0.1580554f,
  +0.0233348f, -0.0836155f, +0.1070368f, -0.5071863f, +0.0351953f, -0.2857094f, +0.0033339f, +0.0439182f,
  +0.1982510f, -0.3088283f, -0.5268577f, -0.0989335f, -0.1604815f, -0.0494737f, +0.1877990f, -0.1666480f,
  +0.1620961f, -0.6992328f, +0.1512346f, -0.1281652f, -0.0949457f, +0.4139409f, +0.1628453f, +0.0646427f,
  +0.1679028f, -0.3644719f, -0.0886303f, -0.1650671f, -0.1876901f, +0.1097789f, +0.0988886f, +0.0006815f,
  +0.0971786f, -0.0627619f, -0.0415590f, -0.1214722f, -0.0151449f, -0.0318696f, -0.1211544f, -0.1733354f,
  +0.2389939f, -0.7117849f, +0.1677125f, -0.0761211f, +0.2625009f, -0.1231333f, -0.2690898f, -0.0883657f,
  +0.2393863f, +0.0391359f, +0.0177454f, -0.2738948f, +0.0451535f, +0.4149958f, -0.2680079f, -0.1597808f,
  -0.0646093f, -0.1012079f, -0.0992842f, -0.0216060f, -0.1194149f, +0.1202410f, -0.0142832f, -0.1514199f,
  +0.0056781f, +0.0080617f, -0.1083001f, +0.0144572f, +0.0862971f, -0.0346281f, -0.0759159f, -0.0219748f,
  +0.2051834f, -0.2183748f, -0.0779738f, -0.1491812f, -0.0813557f, +0.1600478f, +0.0631446f, -0.0388300f,
  +0.0615137f, +0.0793504f, -0.1251257f, +0.0750985f, -0.1174904f, +0.0286002f, -0.0841483f, -0.0884960f,
  +0.1235771f, +0.3330589f, -0.2482505f, +0.1307318f, -0.1451446f, -0.1143367f, -0.1308167f, -0.0881025f,
  +0.0955434f, +0.0081744f, +0.0005476f, -0.2623493f, +0.0784008f, -0.1564547f, +0.0691692f, -0.1053637f,
  +0.0054236f, +0.0542335f, -0.0167364f, -0.0539526f, +0.1102998f, +0.1029797f, -0.1232292f, -0.0308281f,
  -0.0603175f, +0.1640354f, +0.0720843f, +0.0182281f, +0.0601952f, +0.0764013f, -0.0976569f, -0.1262885f,
  +0.2195755f, -0.0056114f, +0.0714854f, -0.1443570f, -0.0535294f, +0.0277465f, -0.0696182f, +0.1179392f,
  +0.0235031f, +0.0958443f, -0.0414124f, -0.0652295f, +0.0932920f, +0.2476913f, +0.1400819f, +0.3211105f,
  -0.4452257f, +0.2550866f, -0.0342564f, +0.1081438f, -0.1396634f, +0.4808201f, -0.0120198f, +0.1806333f,
  -0.2839868f, +0.1717966f, -0.2415191f, +0.1363711f, +0.0318067f, +0.0535544f, +0.0044015f, +0.2585564f,
  +0.1665530f, +0.0395049f, +0.1987123f, -0.2241416f, -0.2707244f, +0.0956103f, -0.1593819f, +0.3602220f,
  -0.2724061f, +0.5387425f, +0.2581741f, -0.1573800f, +0.2179426f, -0.5796825f, -0.1819496f, +0.2755133f,
  -0.3428456f, +0.1126302f, -0.4680502f, -0.4956789f, +0.0046058f, -0.4125617f, -0.5245719f, -0.0813675f,
  -0.0623589f, -0.0584058f, +0.4457151f, -0.0726983f, -0.1003509f, -0.2029540f, +0.3126069f, -0.1027178f,
  -0.1498797f, -0.0617910f, +0.1881860f, +0.0170338f, -0.1162686f, -0.0141250f, -0.0490058f, -0.0117014f,
  -0.2013461f, -0.0653685f, -0.2244317f, -0.2856655f, -0.1551844f, +0.2604542f, -0.1014619f, -0.5958980f,
  -0.0584986f, -0.0489308f, +0.1958774f, +0.0388689f, +0.2467225f, +0.0225358f, +0.0116322f, -0.0945710f,
  +0.1602045f, -0.1243254f, +0.2327872f, +0.1009538f, +0.0167645f, -0.0494434f, -0.0129909f, +0.2164945f,
  -0.0398419f, -0.0544067f, +0.0299718f, +0.3548719f, -0.1134938f, +0.2315503f, -0.1564782f, -0.1002460f,
  +0.1427498f, -0.0933468f, +0.1385219f, -0.0960466f, +0.5397920f, +0.1738608f, +0.3155406f, +0.3612469f,
  +0.1481091f, +0.4335026f, -0.0066256f, -0.0015938f, +0.7831883f, +0.2787904f, +0.0762447f, +0.1446460f,
  +0.0569217f, +0.0612070f, +0.0750220f, +0.2557094f, +0.1813603f, +0.1073045f, -0.1594057f, +0.0879540f,
  +0.0658872f, +0.0288558f, +0.1085053f, +0.1003869f, +0.2844338f, +0.2945895f, +0.1006448f, +0.0214225f,
  -0.5345182f, +0.9274225f, +0.3732328f, -0.1189668f, +0.3811292f, +0.2150283f, +0.2074425f, -0.2095640f,
  -0.2833333f, +0.3065102f, +0.0952672f, +0.3427938f, +0.0754296f, +0.0723202f, -0.0113335f, -0.0367314f
);

const float biases[4] = float[4](
  +0.0363512f, -0.2436985f, -0.0866967f, -0.0231269f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer7 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2037516f, +0.0248174f, -0.0274690f, -0.2153719f, +0.0569466f, +0.2865001f, -0.1746087f, +0.0812313f,
  -0.0460156f, +0.0197871f, -0.2112318f, +0.1047694f, -0.1963433f, -0.1731982f, -0.4293316f, +0.2683528f,
  +0.0735494f, -0.0415962f, -0.1080640f, +0.1028678f, +0.4973533f, -0.1036974f, +0.0851728f, -0.1129031f,
  -0.0578316f, -0.1260852f, -0.0762321f, -0.1413582f, -0.0107850f, +0.0602650f, -0.2726056f, -0.1579481f,
  -0.5526127f, -0.4595946f, -0.0706803f, -0.2063857f, -0.0619009f, +0.2000759f, +0.2917666f, -0.1204446f,
  +0.0089896f, +0.0147169f, -0.0555575f, +0.6287569f, +0.0410837f, +0.1546466f, +0.5029947f, -0.0837450f,
  -0.0804857f, +0.0308993f, +0.0416555f, +0.1409530f, +0.0191445f, +0.0021783f, +0.0824954f, -0.0047215f,
  +0.0421806f, -0.0102152f, +0.3247127f, -0.1551711f, +0.2017417f, -0.2379331f, -0.2334628f, -0.2118804f,
  +0.0668422f, +0.2190218f, +0.0053271f, +0.0709295f, +0.0259517f, +0.2946582f, -0.2600847f, +0.0678990f,
  -0.0032474f, -0.0857574f, -0.1525920f, +0.3012028f, -0.2085306f, +0.2300027f, +0.1819450f, +0.0665813f,
  +0.4505217f, +0.1624863f, +0.0863520f, +0.2707467f, -0.2933758f, -0.0967352f, -0.1097316f, +0.1228083f,
  +0.2258318f, -0.3979525f, +0.1626923f, +0.2615953f, +0.0392695f, +0.0979641f, -0.5120658f, -0.2379586f,
  +0.2003652f, +0.1800952f, -0.0370004f, +0.1684666f, +0.0582153f, +0.1795065f, -0.0284876f, +0.0310218f,
  +0.1191228f, +0.1901287f, -0.4105272f, +0.3807331f, -0.2293137f, -0.0831966f, -0.0230465f, +0.0841943f,
  -0.0048928f, -0.2973896f, +0.4216596f, -0.0780683f, +0.6821142f, -0.2970048f, -0.1298857f, -0.1379499f,
  -0.0156470f, +0.0970074f, -0.0993802f, -0.0159868f, +0.0915446f, +0.0651036f, +0.2417225f, -0.1356155f,
  +0.2046623f, +0.1168753f, -0.0810945f, +0.0451200f, +0.0255273f, -0.4340151f, +0.2828937f, +0.0280447f,
  -0.1833054f, -0.0677311f, +0.1169752f, +0.1132872f, -0.0980937f, +0.0178747f, +0.1719062f, -0.2863516f,
  +0.4578653f, +0.1959494f, -0.1670068f, -0.0845743f, -0.1129407f, +0.1350018f, +0.3543994f, -0.3150345f,
  +0.2751056f, +0.0091277f, +0.0174214f, +0.4875738f, -0.1279329f, +0.0167514f, +1.0248435f, +0.1425772f,
  -0.1546939f, -0.0998366f, +0.2842283f, -0.0872354f, -0.4336521f, +0.2118160f, +0.0093627f, +0.1932705f,
  +0.1880749f, +0.2522355f, +0.2026775f, -0.1123946f, -0.2004041f, +0.1496975f, -0.0886758f, -0.2602302f,
  -0.0378958f, -0.2370648f, -0.2518834f, -0.2353710f, +0.0219793f, -0.0258272f, +0.1749970f, +0.0300436f,
  +0.1025069f, -0.1671150f, +0.2059139f, +0.3027287f, -0.4658485f, +0.3140254f, +0.0691247f, -0.5335196f,
  -0.1797881f, -0.0873402f, +0.0305001f, +0.1521721f, -0.3741960f, -0.3546278f, -0.0146735f, -0.0461426f,
  -0.8947117f, -0.1860314f, -0.1010494f, -0.5241184f, -0.3208943f, -0.1055018f, +0.5507717f, +0.0998202f,
  +0.0362546f, -0.1829187f, +0.0765998f, -0.0088779f, -0.0722206f, -0.1395055f, +0.1435033f, -0.2093915f,
  -0.2122074f, -0.0207094f, +0.0692646f, +0.4067959f, +0.1055055f, -0.1703213f, -0.2108891f, +0.3606652f,
  +0.1006915f, -0.1350294f, -0.1509368f, -0.2431163f, +0.0935364f, -0.0030662f, -0.5313616f, +0.1760105f,
  -0.1340399f, +0.0864718f, -0.3808064f, -0.2803201f, -0.0105026f, -0.1688711f, +0.0086448f, -0.2093937f,
  +0.2370950f, -0.3188972f, -0.0802303f, +0.1278086f, +0.0783338f, +0.1594683f, -0.2359293f, -0.1078308f,
  +0.3797956f, -0.3526437f, +0.1156507f, -0.0527732f, -0.2487320f, -0.0880808f, -0.4918325f, -0.2351436f,
  +0.0492542f, +0.3761869f, +0.0861207f, -0.0579816f, -0.0960445f, -0.1660167f, +0.0852565f, -0.5272138f,
  +0.2936709f, -0.1484493f, -0.0849009f, +0.0221669f, +0.1682580f, -0.2081789f, -0.1697365f, -0.4862953f,
  -0.0042194f, -0.0119657f, -0.2271834f, +0.2720177f, +1.3217502f, -0.2912800f, -0.3213411f, -0.7689963f,
  +0.0754967f, +0.1070260f, -0.0139408f, -0.2965456f, +0.3772245f, -0.1348900f, +0.0344025f, +0.0760789f
);

const float biases[4] = float[4](
  -0.4383685f, -0.1165949f, -0.2118583f, +0.1081292f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer7 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2738419f, -0.1377615f, +0.0735673f, -0.2020471f, +0.1104958f, +0.1695364f, +0.1190692f, +0.0916736f,
  -0.0513316f, -0.1727116f, -0.0400324f, +0.0890769f, -0.1755524f, +0.3865061f, +0.5273433f, +0.1483217f,
  +0.2564645f, +0.1627284f, +0.0586461f, -0.0563573f, -0.2774675f, +0.2677116f, +0.4458170f, +0.2074260f,
  +0.0638259f, +0.2029591f, -0.0069041f, -0.0095022f, -0.4133503f, +0.0516275f, -0.2606516f, -0.2595387f,
  +0.2518592f, -0.1561766f, +0.2926777f, +0.0631485f, +0.1233921f, -0.0985106f, +0.6786711f, -0.4410850f,
  -0.3891747f, +0.1600891f, +0.5275239f, -0.0280236f, -0.5125880f, -0.0968655f, -0.1406820f, -0.4135771f,
  -0.1030461f, +0.0136597f, +0.0944188f, +0.0825889f, +0.1603585f, +0.2276758f, -0.4182458f, -0.3144703f,
  -0.1922499f, +0.2176888f, -0.0267234f, +0.3986437f, +0.5672004f, -0.0138503f, +0.0994709f, -0.5511528f,
  -0.2464116f, +0.1463104f, +0.2631064f, +0.1483695f, +0.4771915f, -0.3895364f, -0.5321273f, -0.3106393f,
  +0.0500164f, -0.2869933f, +0.0800671f, +0.0021137f, -0.0613204f, -0.0359582f, +0.2136765f, -0.2937839f,
  -0.3184796f, -0.1572690f, +0.2321836f, +0.1014754f, -0.0227046f, +0.1169255f, +0.7620180f, -0.2656405f,
  -0.0345185f, -0.1418047f, +0.0940213f, +0.0178043f, -0.4067058f, +0.0892180f, -0.0040363f, -0.2879054f,
  +0.1968134f, +0.2585993f, +0.1127802f, +0.2383796f, +0.1101473f, -0.1258369f, +0.0952737f, -0.2306453f,
  -0.4154557f, -0.2846763f, +0.2246344f, +0.2890170f, +0.1420538f, -0.0006669f, -0.0046141f, +0.0904797f,
  -0.2408912f, -0.4885373f, -0.0058323f, +0.2205568f, -0.3935687f, -0.0270040f, -0.1834857f, -0.3065472f,
  -0.1029365f, +0.0323508f, -0.3087934f, -0.2201520f, +0.0527766f, -0.1021160f, -0.3364581f, -0.2500536f,
  -0.4932536f, -0.1777392f, -0.0117648f, +0.6323658f, -0.0380510f, +0.3313341f, -0.3003180f, -0.0550208f,
  -0.0411153f, -0.5755636f, -0.3433663f, -0.1560876f, -0.4662206f, -0.2726285f, -0.0114302f, +0.0829361f,
  +0.0736863f, -0.4078456f, -0.2240431f, -0.1614120f, -0.0552950f, +0.0475982f, +0.3601469f, +0.0312665f,
  +0.1816062f, -0.5500782f, -0.4590451f, +0.3487531f, -0.0607108f, -0.0889548f, -0.0027707f, -0.0232281f,
  -0.1808856f, -0.3903574f, -0.0180327f, +0.0311363f, +0.1459245f, -0.2596608f, -0.1071664f, +0.0432928f,
  -0.3377129f, -0.6160290f, -0.1002900f, -0.2711648f, -0.2224589f, -0.0649522f, +0.4125412f, +0.4072072f,
  +0.1021850f, -0.3814877f, +0.0031277f, +0.1944341f, -0.1049893f, -0.0780885f, +0.0452613f, -0.1384644f,
  +0.2208560f, -0.2878401f, -0.2341963f, +0.3216166f, +0.0057844f, +0.0210539f, +0.1798441f, +0.3010439f,
  -0.0168636f, -0.1274076f, +0.1527602f, +0.2161143f, +0.0199920f, +0.3066149f, -0.0825239f, +0.4818403f,
  +0.1878342f, -0.3097163f, +0.1417186f, -0.2643870f, -0.3884222f, -0.1727809f, -0.0997804f, +0.4676823f,
  +0.2816081f, -0.3370085f, -0.1807413f, -0.0494759f, -0.2338972f, -0.0448002f, +0.0288141f, +0.0486259f,
  +0.1114193f, +0.1130989f, -0.2493516f, +0.1387844f, -0.0272559f, -0.0358212f, -0.1178803f, -0.1627223f,
  +0.2301356f, -0.2690943f, -0.2524629f, -0.1047569f, +0.1645837f, -0.0595574f, -0.0849318f, +0.1183603f,
  +0.3449522f, -0.1804419f, -0.1477972f, +0.0111841f, +0.0896147f, -0.0269009f, -0.0647988f, -0.2861570f,
  +0.3137768f, +0.0631385f, -0.1428139f, -0.3082265f, -0.1906056f, -0.1090873f, -0.5559962f, -0.4849301f,
  -0.0823428f, +0.0025746f, +0.2174449f, +0.0056718f, -0.1642437f, +0.0587340f, +0.5637509f, +0.0960412f,
  -0.0457934f, +0.1931991f, +0.2516504f, -0.0524260f, -0.1562361f, +0.0313462f, -0.1133382f, -0.4315561f,
  +0.0875946f, +0.4140866f, +0.2300917f, -0.3203723f, +0.3320099f, -0.0767732f, -0.5672467f, +0.0433307f,
  +0.1193423f, +0.4780098f, +0.2586354f, -0.1381028f, +0.0172389f, +0.1688861f, -0.8598412f, -0.7893202f,
  +0.7531435f, +0.3485658f, +0.1463902f, +0.0474060f, +0.0787535f, -0.0659350f, -0.3864017f, -0.4926309f
);

const float biases[4] = float[4](
  -0.1103432f, +0.0916570f, -0.0084086f, +0.0636375f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer8 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.3947200f, +0.1560912f, +0.0791775f, -0.1362045f, -0.1259319f, -0.3009672f, +0.1252302f, +0.1399002f,
  -0.0568064f, -0.0342899f, -0.1981858f, -0.4268345f, -0.0482360f, +0.0382403f, +0.1908637f, +0.2306812f,
  +0.1522665f, -0.0393521f, -0.0521943f, -0.2669236f, +0.1990657f, +0.0583471f, +0.0682788f, +0.0453591f,
  -0.0851302f, -0.1237732f, +0.0921815f, +0.1801634f, -0.3903935f, +0.1439824f, -0.5277119f, -0.0134756f,
  +0.0886792f, -0.3231767f, -0.1594881f, -0.5604798f, +0.1861265f, +0.2858015f, +0.4486233f, +0.0267416f,
  +0.2022930f, +0.0386615f, -0.1357211f, -0.0573130f, +0.2743421f, +0.1164426f, +0.1989202f, -0.2471854f,
  +0.4291970f, -0.0323424f, +0.0426092f, +0.3287724f, -0.1853161f, -0.0307144f, -0.2449669f, +0.1562575f,
  -0.0102661f, -0.5753009f, -0.2256002f, -0.0660260f, +0.2119551f, -0.2308419f, -0.4713563f, -0.1816979f,
  -0.1223912f, -0.6485393f, -0.3418540f, +0.2275614f, -0.2911075f, -0.3504523f, +0.1269995f, -0.2976644f,
  +0.1333350f, +0.1820186f, +0.0335927f, -0.3045499f, +0.0624493f, -0.0102017f, -0.0702274f, +0.0285705f,
  +0.1189793f, -0.2255592f, +0.5579357f, +0.3842302f, +0.3197259f, -0.4391941f, +0.0130656f, -0.6803671f,
  -0.0190426f, -0.3151094f, +0.0405636f, +0.5417011f, -0.2689637f, +0.1050278f, +0.1502136f, -0.2306687f,
  +0.1875819f, +0.1703398f, -0.1308838f, -0.0919117f, +0.0075676f, +0.1958858f, +0.0655468f, -0.0715059f,
  +0.2349805f, -0.1262432f, +0.0231062f, +0.4180511f, +0.1797459f, +0.0336171f, +0.1356309f, -0.0525232f,
  +0.1443317f, +0.0765621f, +0.1394199f, +0.3849607f, -0.4515915f, -0.0526412f, +0.3664633f, +0.0519032f,
  +0.2676243f, +0.0972535f, +0.0539469f, -0.1950274f, -0.2426319f, +0.3518680f, -0.1057434f, +0.1510756f,
  -0.2902843f, +0.1423539f, +0.1426006f, +0.1743107f, -0.0487999f, +0.4155765f, +0.0413895f, +0.2850949f,
  +0.2713652f, +0.1862547f, +0.0692501f, +0.0355188f, -0.0941007f, -0.3708096f, -0.2055728f, +0.3057790f,
  -0.0769312f, +0.1141016f, -0.3904942f, +0.0730602f, +0.0198514f, +0.2911744f, +0.0858952f, +0.1678561f,
  -0.0518967f, +0.1010899f, +0.2236836f, -0.4975550f, +0.0168415f, +0.0355244f, -0.1485510f, +0.2191903f,
  -0.0981378f, -0.1737755f, +0.1731608f, -0.2638587f, +0.0675802f, -0.2399210f, -0.1277744f, +0.2366231f,
  -0.0163069f, +0.3819220f, -0.3265980f, +0.1252827f, +0.2234660f, +0.3324253f, +0.1941723f, -0.1045853f,
  +0.1454570f, +0.0999390f, -0.4900482f, -0.2590688f, +0.2653796f, -0.2158621f, +0.1603307f, -0.0176322f,
  -0.0671460f, +0.2985053f, -0.5051202f, -0.0518219f, +0.2184062f, -0.0967152f, +0.1412736f, +0.1576078f,
  -0.3320342f, +0.1499407f, -0.0599474f, +0.2899564f, +0.0500152f, +0.2557718f, +0.3026763f, +0.1986209f,
  +0.0811183f, +0.1450080f, +0.1315137f, +0.0435759f, +0.3898677f, +0.3288311f, +0.0998185f, -0.0087322f,
  +0.0223576f, +0.2416719f, -0.1806783f, -0.0321166f, +0.3454512f, +0.1153091f, -0.1784361f, +0.1242553f,
  -0.2492422f, +0.1952505f, -0.2480846f, +0.2091084f, +0.2910394f, +0.4382905f, -0.2896095f, +0.4151719f,
  -0.0801575f, -0.0892128f, +0.2667259f, -0.2461253f, +0.0705521f, -0.0037832f, -0.4671187f, +0.0805236f,
  -0.0299541f, -0.0492243f, +0.0623220f, -0.0318842f, +0.0119225f, -0.0243460f, -0.1607328f, +0.2162401f,
  -0.5200935f, -0.0962862f, -0.0199073f, +0.0766757f, +0.4305114f, -0.0421343f, +0.3723595f, +0.0533736f,
  +0.2763738f, -0.3069095f, +0.0198159f, +0.1057466f, +0.0924011f, +0.0507079f, +0.0073724f, +0.1449090f,
  +0.0878842f, -0.2910074f, +0.1387585f, -0.2069256f, +0.0098531f, +0.0314995f, +0.0013033f, +0.3071713f,
  +0.1249192f, -0.1482948f, -0.1987060f, +0.0500779f, -0.1532369f, -0.1306157f, +0.2263957f, +0.0627784f,
  +0.1101851f, -0.2815661f, -0.1138499f, +0.1469562f, -0.6185577f, -0.0544909f, +0.0088750f, -0.1070894f,
  +0.0905375f, +0.1264715f, +0.1405496f, -0.1375144f, +0.1444110f, +0.0457405f, -0.1482836f, -0.2579082f
);

const float biases[4] = float[4](
  +0.0475989f, -0.0025921f, +0.0867992f, -0.1748259f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer8 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2633872f, +0.1861186f, -0.1700815f, +0.0216052f, +0.1938553f, -0.0295865f, +0.0219755f, -0.2870389f,
  -0.0441457f, -0.0196189f, +0.2093432f, -0.0779757f, +0.0086268f, +0.1945587f, -0.2767826f, -0.3182818f,
  -0.1554231f, +0.0660171f, +0.3199115f, -0.0348366f, +0.2595334f, +0.1781284f, -0.0716489f, -0.0249865f,
  +0.1081592f, +0.0446353f, -0.1011206f, -0.0464387f, +0.1633002f, +0.0993849f, +0.0027751f, +0.2088624f,
  +0.3042228f, +0.4820322f, +0.2981075f, +0.5515847f, +0.0414908f, -0.3884374f, +0.0284584f, +0.0073539f,
  +0.0137727f, -0.0895185f, +0.2637917f, +0.2915435f, -0.1493234f, -0.1855423f, -0.0701448f, -0.1375526f,
  -0.7100448f, -0.0262775f, -0.4293911f, +0.2665228f, +0.2497880f, -0.0435061f, +0.2306103f, -0.0191492f,
  +0.1983725f, +0.3533924f, +0.3270918f, +0.5007226f, -0.0435069f, -0.0592347f, +0.4684408f, +0.3991572f,
  +0.1017175f, +0.4901774f, +0.1801668f, -0.1006884f, -0.2771332f, +0.5450534f, +0.2111086f, +0.3936197f,
  +0.1122228f, -0.0965559f, -0.2118674f, +0.0172111f, +0.0020432f, +0.2013630f, +0.1246830f, +0.2993411f,
  +0.0824252f, +0.3000789f, +0.0814965f, -0.1586188f, -0.0419773f, -0.0258692f, -0.0755145f, -0.0537611f,
  -0.0055935f, -0.0348066f, +0.1366654f, -0.1274171f, -0.0640833f, -0.1094688f, +0.0590121f, +0.1341165f,
  +0.1225238f, +0.2551135f, -0.0586666f, +0.0134472f, +0.0696305f, +0.0579149f, +0.0802158f, -0.0980522f,
  -0.0907742f, -0.1063832f, -0.4416275f, -0.1834534f, +0.2257266f, -0.0046206f, -0.0818297f, +0.1107530f,
  -0.0934414f, +0.2583902f, -0.2701589f, -0.0578637f, +0.1162131f, -0.0359832f, -0.1316793f, -0.0365647f,
  -0.1430804f, -0.1079871f, -0.0399660f, +0.1180574f, -0.0201262f, +0.2169579f, +0.2044025f, +0.0785155f,
  +0.0064440f, +0.2813931f, +0.0391769f, -0.1807347f, +0.2443179f, -0.0128716f, -0.0553843f, -0.0770817f,
  +0.0091499f, +0.0464747f, -0.1236948f, +0.0747752f, +0.2700090f, +0.1661143f, +0.0378726f, +0.1440818f,
  +0.1973395f, +0.0831175f, +0.0332623f, -0.1432734f, -0.1043500f, +0.1043074f, -0.1373564f, +0.0590389f,
  +0.1980665f, -0.0146692f, -0.1530123f, -0.4843723f, -0.2562072f, -0.1435884f, -0.1889114f, +0.3673628f,
  +0.2257394f, -0.1510823f, +0.1279620f, +0.0808138f, +0.1619659f, +0.3462059f, +0.1338410f, -0.0589689f,
  -0.9473381f, -0.3192612f, -0.0522396f, +0.0046776f, -0.1250368f, -0.0008413f, +0.2370683f, +0.0389020f,
  -0.2402432f, +0.0076407f, -0.1568533f, +0.2819787f, -0.5053543f, -0.2722297f, +0.2018213f, -0.1464375f,
  +0.1695009f, +0.2933901f, -0.1789225f, +0.1394720f, +0.0069469f, +0.1439928f, -0.0201556f, +0.1046903f,
  +0.3773123f, -0.0677768f, +0.1801605f, -0.3768971f, -0.5135370f, -0.1244946f, -0.5659770f, +0.0617417f,
  +0.2682645f, +0.1335363f, -0.0890409f, -0.0682588f, -0.3176082f, +0.0100134f, +0.1361768f, -0.0059728f,
  +0.2800449f, +0.2226578f, +0.1784781f, -0.2259734f, +0.4559725f, +0.1659069f, -0.2233290f, +0.1722766f,
  +0.1468650f, +0.0245423f, +0.1560878f, -0.0562619f, +0.0693986f, -0.3326474f, +0.2210979f, -0.0136652f,
  +0.2702911f, -0.0919649f, +0.0200673f, +0.0283006f, +0.1013959f, +0.0292820f, +0.0665819f, +0.5555326f,
  +0.2734367f, -0.1569817f, -0.4982112f, -0.1830616f, -0.1774017f, +0.2702457f, +0.1015212f, +0.5814210f,
  +0.3446152f, -0.4123215f, +0.1664654f, -0.3120517f, -0.1497716f, -0.1702115f, -0.1907111f, +0.0719077f,
  +0.5344279f, -0.1186296f, -0.2273625f, -0.3470221f, +0.3892778f, +0.0603797f, -0.1175548f, +0.0273662f,
  +0.4392176f, -0.0233281f, -0.7320379f, -0.4607763f, +0.2105435f, +0.2305735f, +0.1355911f, +0.2529902f,
  -0.1784652f, +0.0939107f, -0.0804645f, -0.0726410f, -0.0849188f, -0.2140430f, +0.1613491f, +0.3557976f,
  +0.3244962f, -0.0242989f, +0.0778785f, -0.0884757f, +0.3084406f, -0.1178804f, +0.3492115f, -0.0074779f,
  +0.0317614f, -0.2085299f, -0.3882622f, +0.0631703f, -0.2222677f, +0.4637747f, +0.1034425f, -0.0764439f
);

const float biases[4] = float[4](
  -0.0696849f, -0.2138821f, -0.0057005f, +0.0319694f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer9 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1670318f, -0.4101189f, -0.2283857f, +0.2928758f, -0.2739110f, +0.4933643f, -0.0982764f, +0.2574868f,
  +0.1121370f, -0.8286779f, +0.0270305f, -0.2015038f, +0.1917439f, -0.0180525f, -0.1791930f, +0.5204890f,
  -0.0453476f, +0.1754242f, -0.0246182f, -0.0299681f, +0.1455469f, -0.1720331f, +0.1880239f, +0.0810642f,
  +0.0403413f, -0.0635043f, +0.1172230f, +0.0454555f, +0.1502189f, +0.0187254f, +0.0054904f, -0.1402297f,
  +0.2185893f, -0.7037081f, -0.1178338f, -0.1778657f, +0.1965225f, -0.1463901f, -0.5613175f, +0.2633832f,
  +0.2611001f, +0.0419360f, +0.2071379f, -0.1336742f, +0.1843197f, +0.2497422f, +0.1619477f, +0.1025987f,
  +0.3367198f, +0.4865388f, +0.0141863f, -0.0815232f, +0.4237085f, -0.1887835f, -0.3269600f, -1.0339962f,
  +0.0463403f, +0.0184971f, +0.0795498f, +0.3377932f, +0.1467539f, -0.0938710f, +0.2707977f, -0.6936563f,
  +0.2648236f, +0.2007405f, -0.0461424f, +0.2021251f, +0.1661817f, -0.4050982f, -0.1585262f, -0.3935570f,
  -0.0499053f, -0.1736518f, -0.0208111f, +0.1457279f, +0.1331981f, +0.1081029f, +0.2830507f, +0.3192405f,
  +0.4140073f, +0.2573394f, +0.0031866f, +0.2864411f, -0.5423197f, +0.2226803f, +0.1770025f, -0.3168193f,
  -0.1580340f, -0.1304755f, +0.0456478f, -0.0376507f, +0.5007886f, +0.0167973f, -0.0714225f, +0.2881911f,
  +0.3364685f, -0.0257300f, -0.1576837f, +0.7527849f, -0.7618564f, -0.1185598f, +0.0054434f, -0.2519088f,
  +0.4987137f, +0.0182747f, +0.1125008f, +0.2607582f, -1.0509145f, +0.1133676f, -0.7588831f, -0.1126170f,
  -0.3426908f, -0.3802302f, -0.1906516f, -0.2410630f, +0.2741071f, -0.3405316f, -0.1098453f, -0.2282412f,
  +0.3181432f, -0.2369249f, -0.0164776f, +0.2371877f, -0.0319926f, -0.0000290f, +0.0904755f, -0.0898180f,
  -0.0038730f, -0.3642603f, +0.0109241f, -0.2440988f, -0.1097872f, +0.0133195f, -0.1117848f, -0.0209779f,
  -0.1545991f, +0.0475560f, +0.2300119f, -0.0801110f, +0.5348713f, -0.0810931f, +0.1934706f, -0.0816008f,
  +0.0442610f, +0.3708461f, +0.0960608f, -0.0331831f, +0.1484866f, +0.1353759f, -0.1978302f, -0.0493426f,
  +0.0941261f, +0.0351813f, +0.6386877f, -0.0908328f, -0.0491108f, -0.1978653f, -0.6367668f, +0.1046664f,
  -0.4165102f, -0.0959149f, -0.1044592f, -0.5452188f, +0.3678134f, -0.1704027f, +0.2673876f, +0.0468345f,
  +0.0367566f, -0.0602452f, -0.3606982f, -0.1763886f, -0.0164637f, -0.0091048f, -0.1882613f, -0.2182938f,
  -0.2932274f, +0.0838630f, -0.2247159f, +0.2396039f, -0.0700394f, -0.1861328f, +0.1663548f, +0.3173146f,
  -0.5194065f, -0.0581677f, -0.1297862f, -0.1672190f, +0.0394962f, -0.1783253f, +0.2030812f, -0.2824307f,
  -0.0097865f, +0.0191179f, +0.1063880f, -0.0765307f, +0.2001334f, +0.0519660f, -0.1399835f, +0.0556385f,
  -0.0917261f, +0.0017725f, +0.0992630f, +0.0104531f, +0.1629864f, +0.0398379f, +0.1376330f, +0.1956868f,
  +0.1038870f, +0.2334513f, -0.1459411f, +0.1881893f, -0.2454779f, +0.0484505f, +0.0746841f, +0.2634409f,
  +0.0807734f, -0.2246174f, +0.0774465f, +0.3346416f, -0.1307223f, -0.0053718f, +0.3885637f, -0.1070250f,
  +0.2371325f, +0.0702313f, -0.0695785f, +0.3271806f, -0.2577190f, -0.1641004f, -0.2165916f, +0.0799346f,
  +0.0423561f, -0.0010022f, +0.1057877f, +0.0959994f, +0.0828304f, +0.1137606f, -0.1042999f, -0.1743614f,
  +0.3441977f, +0.1814387f, -0.0253314f, -0.2408960f, -0.0505307f, -0.0825338f, +0.0023055f, +0.1455462f,
  -0.3690170f, -0.0958163f, -0.2601030f, -0.8520669f, +1.0415781f, -0.2229787f, -0.0582573f, +0.3767475f,
  +0.0459129f, -0.1758681f, +0.0104306f, -0.5262827f, +0.5181137f, -0.1721593f, +0.1488438f, +0.0081217f,
  -0.3248682f, +0.2189752f, -0.3967695f, -0.1165482f, -0.1790924f, -0.1018732f, +0.3118794f, -0.2396015f,
  -0.7843771f, +0.1540907f, -0.3287275f, -0.3127693f, +0.6692059f, -0.3261489f, +0.6557550f, -0.4408743f,
  -0.2865700f, +0.1156563f, +0.0211082f, +0.3002253f, -0.2286060f, +0.1777538f, +0.3502326f, -0.1048365f
);

const float biases[4] = float[4](
  +0.0033622f, -0.1028839f, -0.1477683f, -0.0486454f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer9 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0077973f, -0.2488360f, -0.2063729f, -0.4243952f, +0.0728884f, +0.0990999f, +0.4894839f, -0.8465015f,
  +0.2514480f, -0.2843345f, -0.1615205f, +0.3995411f, +0.1673785f, -0.0974410f, -0.1177793f, -0.7560290f,
  +0.2345108f, -0.1288406f, +0.4186761f, -0.0604214f, +0.0781455f, +0.2366804f, +0.1556300f, -0.0029176f,
  -0.0290303f, -0.4623197f, -0.0644653f, -0.2281656f, -0.2174507f, +0.0403010f, +0.0915805f, -0.1962911f,
  +0.3246683f, -0.1070338f, -0.0244364f, +0.2562810f, +0.1241010f, -0.4152580f, -0.0392952f, -0.0183328f,
  -0.5570651f, -0.1033859f, -0.0669274f, -0.1824169f, -0.4630192f, -0.0082737f, +0.2208719f, -0.1955666f,
  -0.1408235f, -0.0762829f, +0.1477179f, +0.2322024f, -0.1018931f, -0.1320033f, +0.2316202f, -0.3090667f,
  +0.4606839f, +0.0616382f, +0.1057309f, -0.0563347f, +0.1622432f, +0.0584372f, -0.0688940f, -0.1449820f,
  +0.1100449f, -0.0453699f, -0.3157531f, -0.0574873f, +0.0421444f, -0.0297957f, -0.1173345f, +0.1355192f,
  -0.4303541f, -0.2645176f, +0.0551852f, -0.4516510f, -0.0209835f, +0.3142873f, +0.2761340f, +0.2760494f,
  -0.2035012f, +0.3012991f, +0.0266407f, +0.2202323f, -0.3002633f, -0.4245514f, -0.4199794f, -0.5963110f,
  +0.0821684f, -0.0053842f, +0.1493945f, +0.0609684f, -0.2281111f, +0.0853796f, -0.0021828f, -0.0667546f,
  -0.5098988f, -0.1775737f, -0.0033983f, +0.2392761f, +0.2262959f, +0.2102941f, +0.1690676f, -0.0905830f,
  -0.5037721f, +0.4994786f, +0.1904652f, +0.5188422f, -0.2656086f, -0.0840767f, -0.9500710f, -0.5190490f,
  -0.0632347f, -0.5303581f, -0.3046935f, -0.2876677f, -0.1881420f, -0.2074927f, -0.7615636f, -0.0697050f,
  -0.2761889f, +0.0428561f, -0.0831257f, -0.0523735f, +0.0890757f, +0.1507364f, -0.1138476f, +0.3992123f,
  +0.0995782f, -0.0048115f, -0.0217859f, +0.5234744f, +0.1057000f, +0.0970991f, +0.2558302f, -0.1801328f,
  -0.5216017f, +0.2406531f, +0.0331882f, +0.1450248f, -0.2471336f, -0.0618292f, +0.0909638f, -0.0268738f,
  -0.1451722f, +0.0474418f, +0.0702636f, -0.1230699f, +0.1982113f, -0.1314123f, -0.5385319f, +0.2038854f,
  -0.1725735f, +0.1510964f, +0.0247520f, -0.1679687f, +0.0395380f, -0.4335311f, -0.2343954f, -0.3483809f,
  -0.1691761f, -0.2268583f, -0.1808056f, -0.0135666f, -0.0340851f, -0.2355789f, +0.0177421f, -0.0022480f,
  -0.0163456f, -0.3265843f, +0.1053215f, -0.0725467f, +0.1249094f, +0.1626813f, -0.5053891f, +0.2240403f,
  +0.3381301f, -0.1309855f, -0.3442494f, -0.2618314f, +0.3726180f, +0.0594180f, -0.3807879f, -0.4853742f,
  +0.0040416f, -0.0536089f, +0.0923250f, -0.1443999f, -0.1516852f, +0.1053292f, +0.3591289f, -0.3595238f,
  -0.2085189f, -0.0967370f, +0.0861363f, -0.1284510f, -0.0585442f, +0.2100935f, -0.0591524f, +0.1323239f,
  +0.3255269f, -0.1342068f, +0.1342626f, +0.1621378f, +0.1479824f, +0.2389051f, +0.2814283f, +0.1389891f,
  +0.0493011f, +0.1440222f, +0.2747328f, +0.2612003f, +0.3942578f, +0.0982273f, +0.0674601f, +0.0454804f,
  +0.0601899f, -0.1894801f, +0.0259108f, -0.0124913f, -0.3426076f, -0.0344752f, +0.1973153f, -0.2951637f,
  -0.2654585f, -0.0897776f, -0.1144202f, -0.0706456f, -0.3128171f, -0.1901308f, -0.0330828f, +0.0132024f,
  -0.1364858f, -0.3444079f, -0.0688597f, +0.1980436f, +0.1001167f, +0.0683777f, -0.3416524f, +0.2772286f,
  +0.0071079f, +0.1395471f, +0.0390987f, -0.2719752f, +0.1255880f, -0.1765069f, +0.3802741f, -0.0760870f,
  -0.2190569f, -0.2421559f, +0.0076944f, -0.4367824f, +0.0806931f, +0.0445099f, -0.2074815f, -0.1907213f,
  +0.3793938f, -0.0071552f, -0.2660586f, -0.0040832f, -0.3615989f, +0.2410434f, -0.3197483f, +0.3490381f,
  -0.3018896f, +0.2508792f, -0.3266778f, -0.0180627f, +0.0010007f, -0.1236101f, +0.3176843f, -0.1785009f,
  +0.4269934f, -0.2075863f, -0.0379537f, +0.2335691f, -0.4254030f, -0.0281965f, -0.1968801f, -0.1493324f,
  +0.2991429f, +0.2166296f, +0.0763025f, +0.3453223f, -0.1036362f, -0.0828322f, -0.6172649f, +0.1710596f
);

const float biases[4] = float[4](
  +0.0091304f, +0.0254001f, +0.0094418f, -0.0137207f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer10 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1830714f, -0.0491378f, +0.2447431f, -0.2497017f, +0.1139223f, +0.2073611f, -0.1978417f, +0.1522028f,
  +0.2568266f, -0.1683413f, -0.1066941f, +0.1550447f, +0.0691476f, -0.1259963f, -0.0887716f, -0.4107031f,
  +0.0729190f, +0.0831149f, -0.1563770f, -0.0442553f, -0.1699242f, +0.0104968f, -0.1313351f, -0.2298602f,
  +0.1727448f, +0.1373756f, +0.6310782f, +0.2940789f, +0.1141867f, -0.0249933f, -0.3457619f, +0.3025263f,
  -0.2477970f, +0.0138262f, +0.2327105f, +0.2381541f, +0.3024053f, +0.4373105f, +0.0268689f, -0.1546301f,
  -0.1364044f, -0.1840171f, -0.0630740f, -0.0221593f, +0.5124545f, +0.3583900f, -0.0608870f, -0.1448574f,
  +0.3115009f, +0.3137482f, -0.3909428f, +0.2966688f, -0.0574084f, -0.0451385f, -0.5255227f, -0.2258654f,
  +0.0355487f, +0.0713077f, -0.2032221f, -0.0799982f, -0.1136282f, +0.1737095f, -0.1206781f, -0.0584771f,
  -0.0125387f, -0.2255625f, -0.0343084f, -0.3842205f, +0.1538159f, +0.1878724f, +0.0662537f, -0.1533792f,
  +0.1303931f, -0.4976033f, -0.1506200f, +0.0410980f, -0.1186863f, -0.2750669f, -0.2788869f, -0.3647638f,
  -0.0516005f, -0.4297049f, -0.3186310f, -0.7112642f, +0.1652971f, +0.0232166f, +0.0344245f, +0.1154689f,
  -0.2995436f, +0.4815951f, +0.0924422f, +0.0809687f, -0.4917576f, +0.3382459f, -0.0898935f, +0.7045173f,
  -0.0784492f, -0.4698781f, -0.1158241f, -0.2037351f, -0.0015672f, -0.1369217f, -0.1253279f, -0.2162178f,
  +0.1059294f, +0.4946557f, -0.2832305f, -0.3954424f, +0.1998261f, -0.2971826f, +0.6007628f, +0.2414157f,
  -0.0420581f, +0.2884597f, +0.0096212f, +0.3441818f, -0.1580718f, +0.4771569f, +0.6561961f, +0.2675446f,
  -0.4781273f, -0.2781391f, +0.5364691f, -0.1753597f, +0.7670825f, +0.1620940f, +0.1825180f, +0.1248030f,
  +0.0000945f, +0.4360682f, -0.2159011f, +0.3287610f, -0.0379817f, -0.4362468f, +0.0464445f, +0.3016687f,
  -0.1142528f, -0.1183021f, -0.1164776f, +0.0503293f, +0.0239413f, +0.1978617f, +0.2358684f, +0.0981791f,
  +0.1767215f, +0.0626643f, +0.1208082f, -0.0105269f, -0.0879555f, +0.0498538f, -0.1153713f, -0.1626229f,
  +0.0356881f, -0.0700888f, -0.2123095f, +0.0429046f, -0.0770174f, -0.4829337f, +0.1551545f, +0.0148966f,
  -0.2069293f, -0.0581254f, -0.1130828f, -0.0491995f, -0.3717404f, -0.2880127f, +0.2348549f, +0.0151156f,
  -0.0023258f, +0.2158861f, +0.1612703f, +0.0783202f, +0.0847715f, +0.2672527f, +0.0136901f, +0.1019899f,
  -0.1605050f, +0.0631147f, -0.1542048f, +0.1061670f, +0.4240682f, -0.0258972f, -0.0808139f, +0.0564631f,
  -0.3601087f, -0.2125382f, +0.1129093f, +0.3689294f, +0.2212878f, -0.3312160f, -0.1679421f, +0.1593680f,
  +0.3437807f, +0.0295003f, -0.0567973f, -0.0409252f, +0.1539071f, -0.0340071f, +0.0910587f, +0.0759227f,
  -0.0040950f, +0.1305662f, -0.2789618f, +0.3992188f, -0.3042795f, -0.0402732f, +0.0649494f, +0.1758252f,
  +0.0324046f, -0.1656272f, -0.1503786f, -0.0396237f, +0.3177081f, +0.1749317f, -0.0364714f, +0.1347698f,
  -0.0869633f, +0.1557589f, -0.2902773f, +0.2487569f, +0.1507508f, -0.2055154f, -0.0142758f, -0.0433351f,
  -0.0368672f, +0.0780512f, -0.2139232f, +0.4755907f, +0.0597555f, -0.2244760f, +0.1612974f, +0.1532321f,
  -0.0281151f, +0.1624839f, +0.0407817f, +0.0714040f, +0.1170492f, -0.1248098f, +0.0362086f, -0.1337439f,
  +0.0387923f, +0.0488810f, -0.1775955f, +0.0399220f, -0.1316376f, +0.4890256f, +0.1214366f, +0.1086485f,
  -0.0059014f, +0.2808687f, +0.2880573f, +0.1109669f, +0.4475495f, +0.2461782f, -0.1072078f, +0.0515303f,
  -0.2166318f, +0.2976005f, +0.0883940f, +0.4699773f, -0.1942950f, -0.0616400f, -0.1129843f, +0.1403132f,
  -0.0552175f, -0.0224646f, +0.4020491f, -0.0693774f, +0.2141017f, -0.1230089f, +0.1137527f, +0.2172738f,
  +0.0253212f, +0.1657278f, -0.0170252f, +0.2397695f, +0.4303067f, +0.1939689f, -0.3051060f, +0.3944995f,
  -0.0853273f, +0.2736927f, -0.2086908f, +0.3454796f, -0.1360954f, -0.0404059f, +0.3330293f, +0.1748311f
);

const float biases[4] = float[4](
  -0.0423467f, -0.1082892f, +0.0688052f, -0.0144234f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer10 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2235556f, -0.0327957f, -0.1815544f, -0.0823483f, -0.0359321f, +0.1320617f, -0.1489529f, -0.3425585f,
  -0.1042986f, -0.0202958f, -0.3139586f, -0.3288275f, +0.1598263f, -0.4132377f, -0.1810482f, -0.2356042f,
  -0.2353326f, -0.1503444f, +0.0505711f, -0.1728210f, +0.4161713f, -0.1721904f, -0.2266518f, -0.0333076f,
  +0.0471592f, +0.1738189f, +0.0740165f, +0.0604762f, +0.3190230f, +0.0717435f, +0.2156093f, -0.0216056f,
  -0.3079260f, +0.4679858f, -0.1877321f, -0.4428853f, +0.3240357f, +0.0003022f, +0.4025578f, +0.2424780f,
  -0.1372932f, +0.1418468f, +0.0182877f, +0.0157361f, -0.0543000f, -0.1128141f, +0.0255033f, +0.1644364f,
  +0.0081123f, -0.1230728f, -0.0054739f, -0.0850462f, +0.0051360f, +0.1398247f, +0.0823202f, -0.0947749f,
  -0.4495500f, +0.3353268f, -0.1196366f, +0.1097054f, +0.0123272f, +0.0421211f, +0.4004332f, +0.2945335f,
  -0.3431867f, +0.3217449f, +0.0889618f, +0.2897699f, -0.1183029f, -0.0496973f, -0.1701236f, +0.3753673f,
  +0.1346402f, +0.2009298f, +0.0904231f, +0.0798306f, -0.1081261f, +0.0417820f, +0.0544825f, +0.1286115f,
  +0.0128957f, +0.0067085f, +0.0344038f, -0.1439258f, -0.1470271f, -0.1475041f, +0.1078279f, +0.1010490f,
  -0.0588570f, -0.2374482f, -0.1357807f, -0.0320319f, -0.0870058f, -0.1995834f, +0.0787084f, -0.0434997f,
  -0.0069860f, +0.1271522f, +0.1136695f, -0.0336908f, +0.0628990f, +0.0456057f, +0.0329897f, -0.0093358f,
  +0.1151995f, -0.3511631f, -0.0632582f, +0.2620179f, +0.0614801f, -0.1219295f, -0.1117118f, -0.0647083f,
  -0.0510928f, -0.1305136f, -0.0049321f, -0.1103049f, -0.0903160f, -0.2220180f, -0.3032291f, -0.0872300f,
  +0.1413302f, +0.0431220f, -0.1007056f, +0.0940378f, -0.1682477f, -0.0059080f, +0.1977688f, +0.1204071f,
  -0.0909405f, +0.0330564f, +0.0336146f, +0.1461855f, +0.1203813f, +0.0588524f, -0.0794292f, -0.0795901f,
  +0.1311146f, -0.1632696f, +0.0391491f, -0.0465994f, +0.2079710f, -0.0048552f, +0.0331658f, +0.0046612f,
  +0.1396145f, +0.1519010f, +0.4145361f, +0.3069954f, +0.1195515f, -0.1371526f, -0.0399801f, +0.1195503f,
  +0.2023213f, +0.0451543f, +0.1689667f, +0.7711321f, +0.1738229f, +0.3414670f, +0.1283314f, +0.1354749f,
  +0.0401871f, +0.0741067f, +0.3883940f, +0.0699058f, -0.0594080f, +0.1110539f, +0.3511919f, +0.1778861f,
  -0.1149311f, +0.3061630f, -0.3535659f, +0.3524764f, -0.2100242f, +0.3880985f, -0.0844250f, +0.0966055f,
  +0.4312706f, +0.3542390f, +0.0219895f, +0.5307254f, -0.2508709f, +0.2631122f, +0.2190292f, -0.0724303f,
  -0.0808028f, +0.7221960f, +0.3472870f, +0.0362062f, -0.2417672f, -0.0058929f, +0.0655913f, -0.0997897f,
  +0.0194162f, +0.0534823f, +0.3204855f, +0.0874035f, -0.1605025f, -0.0885655f, -0.0193142f, +0.0514029f,
  +0.0825799f, +0.4758548f, +0.4593939f, +0.1104765f, +0.1341071f, -0.0992230f, -0.0004943f, +0.2069793f,
  -0.2010249f, +0.5644109f, +0.0241370f, +0.0253834f, +0.3310263f, +0.1129019f, -0.2724435f, +0.1078082f,
  +0.1731073f, -0.1554361f, -0.0045448f, +0.1052367f, +0.1035082f, +0.1211879f, -0.0764426f, +0.0686688f,
  +0.1584177f, +0.2214271f, -0.2212507f, +0.2237002f, -0.3307527f, +0.0781185f, -0.1166029f, +0.1465504f,
  +0.1722591f, +0.3560810f, -0.0690883f, +0.4960777f, -0.2757698f, +0.1315371f, +0.2352934f, -0.3271747f,
  +0.2369673f, +0.3796141f, +0.5841013f, +0.2594281f, +0.1202181f, -0.1062011f, -0.1168170f, -0.1447790f,
  -0.0312093f, +0.7549945f, +0.1537864f, +0.8641379f, +0.3406154f, +0.0999681f, -0.0469434f, +0.2059927f,
  +0.2026468f, +0.1285130f, +0.1166817f, +0.3869315f, +0.0841882f, +0.0033162f, -0.0401242f, -0.0107221f,
  +0.5015477f, +0.1547134f, -0.0076772f, +0.1619228f, -0.3413787f, +0.0186593f, -0.2700796f, -0.2184183f,
  +0.4128421f, +0.1692481f, -0.0096180f, +0.1027703f, -0.4744155f, +0.3654265f, +0.0233876f, -0.2570216f,
  +0.2541142f, +0.1225623f, +0.0469653f, -0.3412871f, -0.3793594f, +0.0277694f, -0.3819527f, -0.1791741f
);

const float biases[4] = float[4](
  +0.0403768f, -0.1320791f, -0.1250001f, -0.0716471f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer11 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.4261087f, -0.2054102f, -0.1720326f, +0.1941759f, -0.1356868f, +0.1224518f, -0.4818072f, -0.0059761f,
  +0.1137062f, +0.0956334f, +0.0396454f, +0.0225218f, +0.5120147f, +0.0477679f, -0.5405379f, -0.6701873f,
  +0.1399974f, -0.2063749f, +0.0880718f, -0.1159145f, +0.3929630f, -0.2712747f, -0.0732200f, -0.0812756f,
  +0.0933158f, -0.2096675f, +0.0486753f, +0.0386379f, -0.2678328f, +0.2409144f, -0.0128633f, -0.4050658f,
  +0.3227954f, +0.1513569f, +0.1594235f, -0.3790513f, +0.0720104f, -0.1391822f, +0.3827833f, -0.4645187f,
  +0.4891597f, -0.0267615f, +0.1043796f, -0.1207181f, +0.2964500f, -0.2571803f, +0.2245200f, -0.2106796f,
  -0.1988453f, +0.2974260f, -0.2368402f, -0.2594498f, +0.3232664f, -0.0398316f, -0.3437506f, +0.2606919f,
  +0.0760924f, -0.0993640f, -0.1842427f, -0.1844738f, +0.3819379f, -0.2573885f, -0.0406626f, +0.4238635f,
  +0.2642509f, -0.0402782f, -0.1873340f, +0.0263200f, +0.8964442f, -0.0008463f, +0.4647987f, +0.2116049f,
  +0.3143390f, +0.1836086f, -0.1866126f, +0.0535600f, +0.1146918f, -0.0193169f, +0.0059614f, +0.1418230f,
  +0.5190136f, -0.5240850f, -0.0993966f, -0.0975672f, -0.1265880f, +0.0315750f, +0.2709621f, +0.4251530f,
  +0.4352882f, -0.5618582f, +0.0820978f, -0.4014938f, +0.1268169f, -0.0291001f, +0.0736719f, -0.1517416f,
  +0.0501788f, +0.1350858f, -0.2478850f, -0.4007916f, +0.1244532f, -0.0567701f, -0.0412030f, +0.0263234f,
  +0.3188349f, -0.5901552f, -0.0958457f, -0.3796937f, +0.0112073f, -0.0958326f, -0.3107947f, +0.5297449f,
  +0.3043450f, -0.4472674f, -0.1326462f, -0.2100439f, -0.0475956f, +0.0225539f, +0.1716001f, +0.0074310f,
  +0.1274056f, +0.0309949f, +0.1817333f, +0.4836688f, -0.1765576f, -0.1776289f, +0.3747346f, -0.1277647f,
  +0.0049555f, +0.0953427f, -0.1467135f, -0.1390176f, -0.1225737f, +0.0398537f, -0.2617030f, +0.0790745f,
  -0.0871146f, -0.1413990f, +0.0205273f, -0.1339442f, +0.1313811f, -0.0537389f, +0.3569543f, -0.1824988f,
  -0.3530429f, -0.3594754f, +0.0979911f, -0.3769238f, -0.3795598f, +0.0478896f, +0.1109798f, +0.4660707f,
  -0.4108500f, -0.1190284f, -0.0524049f, +0.1463851f, -0.4973219f, +0.0608169f, +0.1543261f, -0.3203910f,
  +0.2085800f, -0.1614743f, -0.1651102f, +0.1406845f, -0.0438104f, -0.5529324f, -0.2651587f, -0.5020580f,
  -0.3570562f, -0.5402576f, +0.0736723f, +0.3571936f, +0.5482743f, -0.3175807f, -0.3866414f, +0.2242700f,
  -0.9696841f, -0.3949365f, +0.2200698f, +0.3640147f, -0.1498961f, +0.3012598f, +0.3175004f, -0.3395565f,
  +0.1934279f, +0.5197216f, +0.2416362f, -0.1499360f, +0.1035437f, -0.0013551f, +0.3602189f, -0.4742920f,
  +0.1844470f, -0.0309823f, -0.3436973f, +0.1577734f, +0.2951404f, +0.1307029f, +0.1281111f, +0.1277451f,
  -0.3939223f, -0.7882867f, -0.1271074f, +0.3760769f, +0.0854990f, -0.0338569f, +0.2060330f, -0.1088500f,
  +0.0851207f, -0.2214346f, +0.0180574f, +0.2062263f, +0.3610367f, +0.1097277f, -0.0933552f, -0.1338785f,
  +0.0755576f, -0.0195646f, -0.3444105f, +0.1032827f, -0.3086737f, -0.1008194f, -0.3989196f, -0.2177313f,
  +0.1908793f, -0.0719012f, +0.2010249f, -0.2213514f, -0.0790146f, -0.1078110f, -0.4941663f, -0.5177453f,
  -0.1805372f, -0.0092218f, +0.0868569f, +0.1568300f, -0.3141440f, -0.0856118f, -0.0077235f, -0.0221077f,
  +0.0612926f, -0.2151514f, -0.0831319f, +0.3628004f, +0.0980630f, +0.0765348f, +0.0152276f, +0.1729560f,
  +0.0766482f, -0.2015335f, -0.2897713f, -0.4830419f, -0.3683241f, -0.2986603f, -0.4698652f, +0.1914551f,
  +0.1001474f, +0.1037539f, -0.2420938f, -0.4343831f, -0.1416362f, -0.2403848f, -0.1027510f, -0.3003316f,
  -0.0382417f, -0.0302556f, -0.1617592f, -0.1947387f, -0.2255209f, -0.1742477f, +0.1545354f, -0.2123230f,
  -0.3283767f, -0.1070688f, -0.2726837f, +0.1268985f, -0.2480750f, +0.1547028f, +0.0204707f, +0.1550984f,
  +0.0063401f, -0.1849828f, -0.1153244f, -0.2840269f, -0.2170250f, -0.0021798f, +0.1138440f, -0.1012938f
);

const float biases[4] = float[4](
  -0.0458609f, -0.0361415f, -0.1043178f, -0.2089694f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer11 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0711349f, +0.1045308f, +0.3416605f, +0.2029361f, -0.0248624f, +0.3541949f, -0.2801390f, -0.5935218f,
  +0.2918738f, +0.2362596f, +0.0894194f, +0.1858665f, -0.2343464f, -0.2401029f, -0.0328051f, -0.3264558f,
  -0.1485547f, +0.1332700f, -0.0786523f, -0.0467981f, -0.1879603f, -0.0475504f, -0.2610968f, +0.0448613f,
  -0.3796413f, -0.1757538f, -0.0762718f, +0.0220428f, +0.3032340f, -0.0195614f, -0.2974326f, -0.2072963f,
  +0.3516399f, -0.0823463f, +0.1468780f, +0.1379930f, +0.0366554f, +0.0383996f, -0.2146452f, -0.5584873f,
  +0.3768983f, -0.1423353f, +0.0667081f, -0.4384809f, -0.3795865f, -0.4628991f, -0.1367390f, -0.0066022f,
  -0.0388986f, -0.1079426f, -0.1495801f, +0.1428419f, -0.1229569f, +0.1502539f, -0.4742366f, +0.5547255f,
  +0.2179853f, +0.0351001f, +0.0246691f, +0.1519462f, -0.0274538f, +0.3441499f, -0.3412389f, +0.0844161f,
  -0.2264670f, +0.0994349f, -0.1158829f, +0.1686635f, -0.0234721f, +0.0141032f, -0.1554463f, +0.0704508f,
  +0.0673950f, -0.1997948f, -0.3207952f, +0.0148676f, -0.2312001f, +0.0264468f, +0.0993491f, -0.3732438f,
  -0.3595187f, -0.4203760f, +0.0146079f, +0.1573371f, -0.4961095f, +0.0125794f, -0.7166354f, -0.1325757f,
  +0.9930573f, +0.3250499f, -0.2283792f, -0.1950013f, -0.0274683f, -0.2689546f, +0.2322131f, +0.0373624f,
  +0.5758992f, -0.1318325f, -0.2362348f, -0.0716728f, +0.1570405f, -0.0789014f, +0.3784535f, +0.2212545f,
  -0.0963431f, +0.4118827f, -0.0221588f, +0.3074586f, +0.1703386f, +0.0244918f, +0.2609177f, +0.3329666f,
  -0.4721614f, -0.7574064f, -0.2515533f, -0.0187067f, +0.0380361f, -0.0557656f, -0.4723242f, -0.4479094f,
  -0.1987641f, -0.1297128f, +0.0235355f, -0.1868607f, -0.5051755f, -0.3066066f, -0.5055214f, -0.0017252f,
  +0.4259309f, -0.2299471f, -0.0028034f, +0.0523340f, +0.1788285f, +0.2093180f, +0.3037098f, -0.1892979f,
  +0.0517806f, +0.0506063f, -0.0315256f, -0.2002479f, -0.0793406f, -0.1695571f, +0.0066342f, -0.0939115f,
  -0.0198025f, +0.3066788f, -0.2674366f, -0.7436056f, +0.5193076f, -0.2531084f, -0.2690816f, +0.0196891f,
  -0.0530409f, -0.1474535f, -0.1555037f, -0.5517231f, +0.6162027f, -0.2137834f, +0.2860995f, -0.4134868f,
  +0.2771136f, -0.2898033f, +0.2983005f, +0.1249355f, +0.5775035f, +0.0516938f, +0.3041194f, +0.0643592f,
  -0.1892589f, -0.1541532f, -0.3898252f, +0.0625928f, +0.0156393f, -0.2563352f, +0.5932204f, -0.3189433f,
  -0.4604993f, +0.0391733f, -0.1638805f, +0.6029032f, +0.2474958f, -0.1193552f, +0.2129494f, -0.5846212f,
  -0.1442117f, +0.0830450f, +0.0163510f, +0.3164104f, -0.1161559f, +0.0288259f, -0.0789312f, -0.0859820f,
  +0.4122450f, +0.1331897f, -0.2712973f, -0.0179071f, -0.2989630f, -0.2576974f, +0.7061437f, -0.0197566f,
  +0.3712620f, +0.0978513f, -0.0449482f, +0.0356494f, -0.4377539f, +0.2068236f, -0.2972398f, +0.1354797f,
  +0.6580925f, -0.3944964f, -0.0489440f, -0.4047040f, -0.1758671f, -0.0864668f, +0.2617215f, -0.2205762f,
  +0.3892442f, -0.1358019f, -0.0898947f, +0.0835803f, -0.3232078f, -0.2041679f, -0.6084977f, +0.0836528f,
  +0.3995413f, -0.3346833f, -0.1467967f, +0.0537528f, -0.0249097f, -0.0737218f, +0.0041918f, +0.1100014f,
  +0.2437771f, +0.0635111f, +0.0832473f, -0.1427125f, +0.1121489f, -0.0151378f, +0.0556864f, +0.0540809f,
  +0.1814175f, -0.5228295f, -0.2903192f, +0.0778594f, +0.0750677f, +0.1816063f, -0.2397842f, -0.1957307f,
  +0.1953003f, -0.0121441f, -0.1465657f, +0.1208884f, +0.0450388f, +0.1750781f, +0.3554765f, -0.1925380f,
  +0.0769606f, +0.3732291f, +0.2295725f, +0.0567623f, -0.0289526f, -0.2157175f, -0.2838062f, -0.0050248f,
  +0.0551509f, +0.1114515f, -0.0620923f, -0.4396559f, -0.1794169f, +0.1302861f, -0.4314697f, +0.1980819f,
  +0.0495019f, +0.3658877f, +0.2701905f, -0.0377655f, +0.2776289f, +0.0502019f, -0.5057112f, -0.0148992f,
  +0.1469241f, +0.0250892f, -0.0298251f, -0.1441197f, -0.3720196f, -0.0852778f, -0.3398377f, -0.3924503f
);

const float biases[4] = float[4](
  -0.0646877f, -0.0181677f, -0.0381993f, -0.0423457f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer12 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2324926f, -0.0658331f, -0.3540366f, -0.1045874f, -0.1709297f, +0.2535038f, -0.2044071f, +0.3606082f,
  -0.0621500f, -0.1542308f, -0.3449218f, +0.1661244f, -0.2797430f, +0.2894138f, -0.0033458f, +0.3608620f,
  +0.2908942f, +0.1790306f, +0.0014299f, +0.0469227f, -0.1180637f, -0.2592979f, -0.1553812f, +0.0603397f,
  -0.1148947f, -0.2084840f, -0.5467937f, -0.6942925f, -0.3747360f, +0.2688638f, +0.1027353f, +0.3716044f,
  -0.0229052f, -0.1893678f, -0.4085061f, -0.2042001f, +0.0136057f, +0.3070800f, +0.3636789f, -0.1412054f,
  -0.0011837f, -0.0795541f, +0.1754647f, -0.0794405f, -0.0181478f, +0.0017534f, -0.1018276f, -0.1200594f,
  -0.0976426f, -0.2729066f, -0.0249156f, -0.4427188f, -0.2121091f, +0.0010041f, -0.0029001f, +0.2731296f,
  +0.2868296f, -0.1224680f, -0.2635208f, -0.0183782f, +0.0554757f, +0.2758866f, +0.3481916f, -0.2842976f,
  +0.0164098f, -0.1933771f, -0.0257579f, +0.2973085f, +0.0354455f, +0.0670734f, +0.0119579f, -0.0914256f,
  +0.4149556f, +0.0638023f, +0.4031745f, -0.0816548f, +0.5579358f, +0.0413565f, -0.2867176f, -0.0566405f,
  +0.7068769f, +0.0796467f, +0.2790891f, -0.3421340f, +0.1655483f, -0.5392864f, -0.0035890f, -0.5469545f,
  -0.0911450f, -0.0166431f, +0.2923837f, -0.0324137f, +0.1940563f, -0.5240514f, -0.0019111f, -0.0798267f,
  +0.4110348f, +0.1640817f, +0.0237358f, +0.2648242f, +0.0815263f, +0.0800136f, -0.0404808f, -0.2824761f,
  -0.1117872f, +0.3156401f, +0.3010549f, +0.0774108f, -0.0295879f, +0.0129266f, -0.3974976f, +0.1368491f,
  +0.0313475f, -0.0013461f, +0.4623600f, +0.2592563f, -0.3622714f, -0.1307801f, -0.3735846f, +0.4309351f,
  +0.0075951f, +0.0800921f, +0.1856147f, -0.1357480f, -0.2993075f, -0.1927569f, -0.0911578f, -0.1957977f,
  +0.0580243f, +0.1521565f, -0.0910380f, +0.0400063f, -0.4006779f, +0.1404105f, -0.2002397f, +0.1332642f,
  -0.0873676f, +0.1634233f, +0.1351432f, -0.1718783f, -0.5824295f, -0.6287086f, -0.4886734f, +0.1971071f,
  +0.0976446f, -0.2424047f, -0.0056385f, -0.0585044f, -0.1242406f, +0.1251802f, +0.0944889f, +0.2602056f,
  +0.3757257f, -0.2354123f, -0.1379813f, +0.1747442f, -0.3310625f, +0.1377670f, +0.2069883f, +0.0120453f,
  +0.0142776f, -0.0281540f, +0.0203351f, +0.1461096f, -0.1640552f, +0.1241923f, -0.0009606f, +0.1608310f,
  -0.1426972f, +0.0063923f, -0.0839630f, -0.1497633f, +0.0988194f, +0.1036143f, +0.1455851f, -0.0910483f,
  +0.0628014f, -0.0081787f, -0.2504801f, -0.0547111f, +0.0493753f, +0.2524208f, +0.3175097f, +0.1420851f,
  +0.2080380f, +0.1754322f, +0.2918869f, +0.3552513f, -0.0543265f, +0.2817934f, -0.0508649f, +0.0062134f,
  -0.0839074f, +0.0020796f, +0.1278089f, -0.0926450f, +0.0860462f, +0.1798736f, -0.1623276f, -0.0734525f,
  +0.0666633f, -0.2708685f, -0.0305022f, -0.0777028f, +0.0055365f, +0.0158112f, -0.1183223f, -0.0999356f,
  +0.2522128f, -0.1008450f, +0.1560747f, +0.1881518f, -0.0285382f, -0.0684801f, -0.1445092f, -0.2498281f,
  -0.0394574f, +0.0708287f, +0.1769839f, +0.0315581f, -0.0536207f, -0.1911606f, +0.0626740f, +0.4579671f,
  -0.0247299f, +0.0765272f, +0.1472245f, +0.2567578f, +0.2901970f, +0.1602227f, +0.1686237f, +0.1499626f,
  -0.2374665f, -0.0476508f, +0.0037973f, +0.1677661f, +0.1357218f, +0.1658121f, +0.2042270f, +0.4337277f,
  -0.1314770f, +0.0697997f, +0.1072636f, +0.3409055f, +0.4317419f, -0.2942086f, -0.2191821f, -0.4168729f,
  -0.1671297f, -0.0577378f, -0.0823997f, +0.0254396f, +0.0868637f, +0.2301704f, -0.0232469f, +0.0026410f,
  +0.2669496f, +0.0033066f, -0.2105444f, -0.1565990f, -0.1538126f, -0.0881169f, -0.0947428f, -0.1225399f,
  +0.0184132f, +0.1590864f, +0.1000740f, +0.0670378f, -0.0431070f, +0.1538262f, +0.0943639f, -0.2882051f,
  -0.3292327f, +0.0320795f, +0.0980643f, +0.2928874f, +0.1955857f, -0.5482411f, -0.0093698f, -0.2184982f,
  +0.1264707f, +0.0870488f, +0.0154471f, +0.1611565f, -0.0112730f, +0.0923915f, +0.1811610f, -0.0796559f
);

const float biases[4] = float[4](
  -0.0600775f, -0.0698333f, +0.0180991f, +0.0671451f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer12 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2666567f, +0.1566053f, -0.3223598f, +0.3432674f, -0.1925067f, -0.1820929f, +0.0585231f, +0.1516469f,
  +0.1478529f, +0.1037530f, +0.0641372f, +0.1434554f, -0.0329413f, +0.3858475f, +0.0322886f, -0.2057510f,
  +0.3217352f, +0.0245368f, +0.0782672f, +0.3552847f, +0.2542987f, -0.0117294f, +0.0836576f, +0.2243637f,
  +0.2155708f, +0.0635408f, -0.2365025f, +0.4244945f, -0.1877409f, +0.0647338f, -0.1960812f, -0.2342368f,
  -0.5703279f, -0.0199992f, -0.1010798f, +0.2484646f, -0.0702231f, -0.3542537f, -0.0635348f, -0.2661964f,
  -0.0459951f, -0.0866845f, -0.5256719f, -0.0607253f, -0.1908646f, +0.0784670f, -0.2521784f, -0.1652948f,
  +0.1115903f, +0.1030813f, +0.0404646f, -0.2430662f, +0.0089511f, +0.2798190f, +0.1241357f, -0.3576147f,
  +0.0295494f, +0.0250095f, +0.0400431f, -0.3778732f, -0.3226321f, -0.1540847f, +0.1220130f, -0.1448248f,
  +0.0914557f, +0.1429971f, -0.0473617f, -0.2931849f, -0.1265449f, +0.3885314f, +0.0846117f, +0.0652633f,
  +0.2268246f, -0.1996685f, +0.1086564f, -0.0633992f, -0.0594155f, +0.2618744f, +0.1797091f, +0.0468503f,
  +0.1326554f, -0.1665208f, -0.0915915f, -0.1747510f, -0.1996042f, +0.1074134f, +0.0701948f, +0.1344474f,
  +0.0145587f, -0.0296019f, +0.1069332f, +0.1279039f, -0.2231967f, +0.1261552f, -0.0361215f, -0.0247184f,
  -0.1967664f, -0.0275378f, -0.0889662f, +0.0926329f, +0.2033209f, -0.0798019f, +0.0851957f, +0.0372177f,
  +0.1072372f, -0.0717970f, -0.0460691f, +0.2411710f, +0.0483961f, +0.0661507f, +0.1554772f, +0.0426152f,
  +0.1150526f, +0.0724424f, +0.2206903f, +0.0768077f, -0.1150551f, +0.1347246f, +0.0440264f, +0.0940557f,
  -0.0503923f, -0.0080714f, +0.0312272f, +0.0552124f, +0.0551168f, +0.1129714f, +0.0670558f, +0.0171665f,
  +0.0258773f, -0.1070698f, -0.0264740f, -0.1373821f, -0.0158515f, -0.1310301f, -0.1010497f, +0.0609175f,
  -0.0168812f, -0.1457389f, -0.0959838f, +0.1347773f, +0.1633776f, +0.1213417f, -0.0287790f, -0.2279076f,
  -0.3812456f, -0.1091146f, -0.2642162f, -0.2143962f, +0.0070744f, -0.5687710f, -0.0558965f, +0.0922776f,
  -0.7511206f, +0.1127267f, -0.2698658f, +0.1079751f, +0.3253020f, -0.1141462f, -0.0698707f, +0.4593492f,
  -0.0046376f, -0.0965331f, -0.8666810f, -0.5764095f, -0.1732391f, +0.0592611f, -0.0431138f, -0.0899433f,
  -0.3050086f, +0.4355819f, +0.0269792f, -0.5479648f, -0.0697192f, -0.1850350f, -0.1230990f, +0.3208925f,
  -0.1922566f, +0.2740051f, -0.3329064f, +0.6519848f, +0.1708242f, +0.2729023f, +0.2739472f, +0.0626056f,
  -0.0537226f, -0.0733053f, -0.6695176f, +0.2445489f, +0.1571646f, +0.0060475f, +0.1364274f, -0.0897230f,
  +0.0334887f, +0.1182555f, +0.0862435f, -0.4737792f, +0.0972090f, +0.1598568f, -0.3556152f, +0.2093079f,
  +0.2068443f, +0.0475482f, -0.2184713f, -0.0748967f, -0.1063054f, +0.0480884f, -0.1809669f, +0.0762418f,
  +0.1805117f, +0.1041827f, -0.5040030f, +0.1398193f, +0.0894659f, +0.0383849f, -0.2432560f, +0.2012741f,
  -0.0952404f, -0.3842184f, -0.1333488f, +0.0254823f, -0.1799855f, +0.1522830f, +0.1517477f, +0.1227914f,
  -0.2810729f, -0.0805849f, -0.2602455f, +0.1790378f, -0.1832377f, -0.3320364f, +0.0590810f, +0.0956536f,
  -0.1282947f, -0.0865913f, -0.0068240f, +0.2132268f, +0.1468657f, +0.0777889f, +0.1000373f, +0.2155526f,
  -0.1344678f, -0.3134030f, +0.1823619f, -0.0492697f, -0.4876270f, -0.0187545f, +0.3903845f, +0.2170691f,
  +0.1507160f, -0.0170838f, -0.2463869f, -0.1712896f, -0.0353169f, -0.1051543f, +0.2576147f, -0.2516659f,
  +0.3899870f, -0.0495892f, -0.6576153f, -0.0575356f, +0.0144597f, -0.1857449f, +0.2607575f, -0.1980439f,
  +0.0778846f, -0.4361572f, +0.1463013f, +0.1671726f, +0.0481324f, +0.0123307f, +0.5401422f, +0.1390304f,
  +0.3253222f, -0.0320749f, +0.2644768f, -0.1493513f, +0.2253264f, +0.1207684f, +0.6402302f, -0.0786021f,
  -0.0688865f, -0.1982192f, -0.0349029f, +0.0279666f, +0.0709685f, +0.2351208f, +0.5996495f, -0.1104131f
);

const float biases[4] = float[4](
  +0.0975631f, -0.0565792f, -0.0696842f, +0.0095159f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer13 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2618804f, -0.1804339f, -0.1956086f, -0.0522994f, -0.2979778f, -0.0241275f, -0.0877477f, -0.2348280f,
  -0.0489640f, -0.0082053f, -0.1372394f, -0.5145927f, +0.0512022f, -0.6354030f, -0.4028150f, -0.1528027f,
  -0.1533342f, -0.1382470f, -0.0125142f, -0.0052236f, -0.2754345f, -0.3205808f, -0.0483240f, -0.4902384f,
  -0.3381690f, +0.1891026f, -0.1742379f, -0.1580204f, +0.0055988f, +0.0811202f, +0.2302326f, -0.1491153f,
  -0.4559970f, +0.7033415f, -0.1309134f, -0.4579432f, +0.9127030f, +0.2483038f, -0.4533002f, -0.4130243f,
  +0.4087833f, +0.5268132f, -0.3283871f, -0.5866649f, -0.7261863f, -0.0871966f, -0.3328961f, -0.2963019f,
  +0.0472950f, +0.1864757f, -0.0135961f, +0.0349185f, -0.2065159f, -0.0802501f, -0.0085451f, -0.0557106f,
  +0.3475717f, +0.2398848f, -0.3437665f, +0.2436476f, +0.2067687f, +0.0515288f, -0.2904688f, -0.5572528f,
  +0.3158118f, +0.4447657f, +0.1085456f, -0.4020651f, -0.5201780f, +0.0528646f, -0.3695755f, +0.0529141f,
  +0.1656046f, -0.3726861f, +0.2552720f, -0.1380184f, +0.5348714f, +0.0802769f, -0.1567758f, +0.0075643f,
  -0.1784227f, -0.2223161f, +0.4435517f, +0.1847631f, +0.4228436f, -0.0676725f, +0.2206745f, -0.0490885f,
  +0.2198692f, +0.0036803f, +0.4332756f, +0.1480671f, +0.1257469f, -0.0025318f, +0.1624839f, -0.1830562f,
  +0.3132192f, -0.2410804f, -0.4798686f, -0.0419466f, +0.5987910f, +0.0959828f, -0.0381803f, -0.1545693f,
  +0.6656090f, +0.9072230f, -0.0798778f, +0.3820801f, -0.2405411f, -0.0648641f, -0.0477442f, +0.4434456f,
  -0.1378803f, -0.3123085f, -0.1488657f, -0.1054157f, -0.0566537f, +0.0730351f, +0.0878823f, +0.0541197f,
  +0.4136195f, -0.0533429f, +0.0811033f, -0.3812328f, +0.0729954f, -0.0365634f, -0.2256241f, +0.0062593f,
  +0.1495296f, -0.1482095f, +0.0149031f, -0.0219122f, +0.3805488f, -0.1856340f, -0.2419254f, +0.1730125f,
  +0.1574560f, -0.2295682f, -0.0103425f, +0.0571335f, -0.2662019f, +0.1978246f, -0.0515694f, -0.1970917f,
  -0.1727224f, -0.2097564f, -0.0304130f, +0.0842615f, -0.1229454f, +0.2495448f, -0.0438103f, +0.2747838f,
  -0.5928510f, +0.1172921f, +0.0791147f, +0.1146206f, -0.2315863f, +0.0493118f, +0.0410374f, -0.1498234f,
  -0.1300255f, -0.0766436f, -0.2737223f, +0.1724150f, -0.3695355f, -0.2651642f, -0.6396275f, -0.5960399f,
  -0.1361902f, -0.1352028f, +0.1868102f, +0.0355567f, +0.1209040f, +0.2915533f, -0.0641468f, +0.0105775f,
  -0.3725381f, +0.1352226f, +0.0754403f, +0.0983180f, -0.0300188f, +0.0169417f, +0.2240954f, +0.1304512f,
  -0.4414996f, +0.1455041f, -0.2434173f, -0.0060008f, +0.2477477f, -0.2477605f, +0.2121684f, +0.1934462f,
  +0.1057853f, -0.3777509f, +0.0212786f, +0.1361346f, -0.2151569f, +0.1438845f, -0.6532834f, +0.1893369f,
  +0.5071853f, -0.1307914f, +0.7234679f, +0.0806638f, +0.1825633f, +0.0096780f, -0.3723442f, +0.0850251f,
  +0.3581610f, +0.3509902f, +0.0063825f, -0.2369044f, +0.0088951f, +0.2049450f, -0.3123715f, -0.0832150f,
  -0.2424408f, -0.1261300f, -0.2094236f, -0.3821975f, +0.2559914f, +0.0407531f, +0.3810998f, -0.1968601f,
  -0.3122161f, -0.0538236f, +0.0568952f, -0.0466048f, -0.0798128f, -0.3763796f, -0.0146744f, -0.1564582f,
  +0.3768829f, +0.0084925f, -0.3064931f, -0.1938296f, -0.0227733f, -0.4791066f, -0.3719820f, -0.1655684f,
  +0.3608516f, -0.3778911f, -0.1010461f, -0.1505188f, +0.0899077f, +0.2603038f, -0.0814808f, -0.5166631f,
  -0.7373707f, +0.0838705f, +0.0023994f, -0.0553652f, -0.3874080f, -0.0440877f, -0.3891836f, -0.3689214f,
  +0.1898306f, +0.5976208f, +0.0376733f, -0.0855676f, -0.2539039f, +0.0053654f, -0.2853805f, +0.0344476f,
  +0.1199429f, +0.2229376f, -0.0923735f, -0.0836779f, +0.1498163f, +0.2331237f, +0.0784554f, -0.3493683f,
  -0.0918110f, +0.2013214f, -0.0684750f, +0.3900808f, +0.2008086f, +0.0320246f, -0.3004839f, -0.7765247f,
  +0.2251889f, +0.1900348f, +0.0800066f, +0.4064460f, -0.0608077f, -0.1250396f, +0.1909063f, -0.3380183f
);

const float biases[4] = float[4](
  +0.0284897f, -0.0695381f, +0.0418675f, +0.0204147f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer13 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1957029f, +0.2717939f, -0.4112788f, +0.0145440f, +0.5647963f, -0.0249121f, -0.0147952f, +0.0926913f,
  -0.1535902f, +0.2108962f, -0.2501874f, -0.3537653f, +0.4040390f, -0.0527549f, -0.0328856f, -0.0495185f,
  -0.4048758f, +0.0637908f, -0.0371833f, -0.0432834f, +0.0837903f, +0.0373640f, -0.3174547f, -0.2637144f,
  +0.0673077f, +0.1404930f, -0.0785606f, +0.1373544f, -0.2289747f, -0.2213628f, +0.0954914f, +0.1172726f,
  +0.1641095f, +0.4444900f, +0.3779975f, +0.1525344f, +0.0728844f, -0.1219545f, +0.3193113f, -0.0443796f,
  -0.2079955f, -0.2552719f, -0.2310465f, +0.2929500f, +0.2360752f, +0.0867230f, +0.0695509f, +0.3570158f,
  -0.0735515f, -0.3870957f, +0.1471311f, -0.1349034f, -0.0010624f, +0.2618850f, -0.1771941f, +0.0299789f,
  +0.0414122f, +0.0907984f, +0.3073224f, +0.3904441f, -0.4138393f, -0.1169223f, -0.1740838f, -0.3948026f,
  +0.4413077f, -0.5277930f, +0.3889068f, +0.1240257f, -0.4262134f, +0.1428732f, +0.1088170f, -0.2348339f,
  +0.0676022f, -0.3217077f, +0.1487490f, -0.1014591f, -0.2940148f, -0.0263026f, -0.0396244f, -0.0821371f,
  +0.3587066f, -0.3376478f, +0.1698177f, -0.1450312f, -0.3080792f, -0.2541180f, +0.1348237f, -0.0268412f,
  +0.6994139f, -0.0634116f, +0.2145501f, -0.1858179f, +0.0749532f, -0.1448369f, +0.5228025f, -0.0941101f,
  +0.2318307f, -0.4021543f, -0.1489154f, +0.2988462f, +0.0749036f, +0.1917820f, -0.3347770f, +0.2057903f,
  -0.1162392f, -0.2672352f, -0.1432394f, -0.1780173f, +0.0264832f, +0.4295924f, +0.0097525f, +0.2249669f,
  +0.6789742f, -0.1920030f, -0.0278106f, -0.0057149f, +0.0034039f, +0.0522023f, -0.2608945f, +0.1199867f,
  +0.1796761f, -0.0105685f, +0.0594506f, +0.2648094f, -0.0422785f, -0.0953594f, -0.3142880f, -0.1302833f,
  +0.2052356f, -0.8112822f, +0.1601153f, -0.2648944f, -0.0620642f, +0.1995536f, -0.5385625f, +0.2208956f,
  +0.2821716f, -0.2097887f, -0.0957671f, +0.0822466f, +0.3949740f, -0.1292456f, -0.2103610f, +0.1796200f,
  -0.1476497f, -0.1770751f, -0.2582714f, +0.0710065f, -0.4999037f, +0.0460493f, -0.2377832f, +0.1012524f,
  -0.2586783f, +0.1466988f, -0.2454524f, -0.0070725f, -0.1597876f, -0.2386542f, -0.2020513f, +0.1251400f,
  +0.3495896f, +0.2368151f, +0.0741995f, -0.3641134f, -0.2085932f, -0.0053775f, +0.0565084f, +0.2384159f,
  +0.3199399f, +0.2597780f, +0.0035671f, -0.1900376f, -0.2070361f, +0.2308788f, +0.0444115f, -0.5363808f,
  -0.2970987f, -0.1333758f, -0.1428352f, -0.0083892f, +0.0479370f, +0.0811568f, -0.3565300f, -0.3435282f,
  +0.4078348f, -0.0233787f, +0.0341122f, -0.1616396f, +0.3170069f, -0.1401562f, -0.0566233f, +0.0381173f,
  -0.2360556f, +0.2650976f, +0.4377854f, +0.0811894f, +0.6878558f, -0.0009732f, +0.2727892f, -0.6684034f,
  -0.6012232f, +0.1045362f, +0.1292389f, -0.0345308f, +0.5271999f, -0.1909032f, +0.1764069f, -0.0901403f,
  +0.3327565f, -0.4345717f, -0.1079194f, -0.0408090f, -0.0557580f, +0.1028353f, +0.1375236f, +0.0289876f,
  +0.1134719f, -0.0139060f, +0.1949391f, -0.1530500f, +0.0510561f, +0.2002600f, +0.3735461f, -0.1813637f,
  -0.3157950f, +0.2129124f, -0.0706735f, -0.1663490f, -0.0028202f, -0.3131545f, -0.2613150f, +0.2100570f,
  +0.1321771f, +0.0192682f, -0.1282494f, +0.1309903f, -0.3441070f, -0.0939777f, +0.1343279f, -0.3252245f,
  -0.3247854f, +0.1868119f, -0.0814538f, -0.1920750f, +0.1243785f, +0.1728182f, -0.1840239f, -0.2337281f,
  -0.6319383f, +0.3084603f, -0.0175749f, -0.5760396f, +0.4329331f, +0.0865726f, -0.1858418f, -0.1596673f,
  -0.5677311f, +0.1407548f, -0.1973787f, +0.0020618f, +0.0560353f, -0.1841459f, -0.2086105f, -0.0791529f,
  -0.1368476f, -0.0671193f, +0.5525432f, +0.0519457f, -0.0353525f, -0.1615604f, -0.3154629f, -0.4355455f,
  +0.1860884f, -0.2584501f, -0.1989228f, -0.5560217f, +0.0917637f, -0.0020829f, -0.0090224f, -0.4974129f,
  -0.4074789f, +0.2834780f, -0.2924358f, +0.2859780f, +0.1366223f, -0.0004485f, -0.1254015f, -0.6846468f
);

const float biases[4] = float[4](
  -0.1308659f, -0.0699232f, +0.0511923f, -0.1089585f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer14 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.4121846f, +0.0321726f, -0.0466150f, -0.3372393f, +0.1394726f, +0.5312029f, -0.3077196f, +0.6932421f,
  -0.3821935f, -0.0683186f, +0.0573241f, +0.1256223f, +0.3170697f, -0.0400893f, -0.0514768f, +0.0314667f,
  -0.0422948f, -0.2565219f, +0.1746706f, +0.0953728f, +0.2334608f, +0.1398392f, +0.6746055f, +0.2209766f,
  +0.3491603f, +0.2030902f, +0.0281885f, -0.3190923f, +0.3312494f, +0.1946818f, -0.2429920f, +0.1660823f,
  -0.0128116f, -0.1587586f, -0.2033050f, -0.3684042f, +0.0601277f, +0.4579068f, -0.3688033f, +0.1023359f,
  +0.3429885f, -0.4935220f, +0.0081330f, -0.3097356f, -0.0754574f, +0.2404261f, -0.1361965f, +0.2005970f,
  +0.1660045f, +0.3010246f, +0.2132210f, -0.0078771f, -0.1286294f, -0.3553030f, -0.0090595f, +0.0234103f,
  -0.6365871f, -0.1268063f, +0.2697714f, -0.4128707f, -0.2998379f, -0.0787962f, -0.3816811f, +0.1271231f,
  -0.3493825f, +0.0584713f, -0.1950546f, -0.3293698f, +0.0823399f, -0.2049893f, +0.0046786f, +0.0971634f,
  +0.3017326f, +0.0387360f, -0.0259809f, -0.0189700f, +0.5939692f, -0.1437639f, +0.2578790f, -0.5412941f,
  +0.3262906f, +0.2294859f, +0.4865187f, +0.1935031f, +0.1682429f, +0.0613259f, +0.2187329f, +0.0097782f,
  +0.0163081f, -0.2960342f, +0.0952631f, -0.2740166f, +0.3547895f, +0.0964657f, +0.1963635f, -0.2597504f,
  -0.1950817f, -0.3128430f, -0.2117951f, -0.1854747f, +0.2592624f, -0.2105787f, +0.2147640f, +0.0489545f,
  +0.6316186f, -0.3215609f, -0.3671789f, -0.0919545f, -0.2577761f, -0.1034808f, +0.2179735f, -0.5497302f,
  +0.0981918f, -0.3287833f, +0.2068296f, +0.1512870f, +0.2242480f, -0.1768387f, +0.0798423f, -0.0585244f,
  +0.6952905f, -0.3085533f, -0.0063204f, +0.0485411f, +0.3177782f, -0.1171651f, -0.1038403f, -0.0991894f,
  +0.2444419f, -0.3925875f, -0.0322327f, -0.0468005f, -0.0127792f, +0.3574487f, -0.1972611f, -0.2069773f,
  +0.0697755f, -0.1179440f, +0.2615596f, +0.1090301f, +0.1448155f, -0.1799785f, +0.0958069f, -0.2302218f,
  -0.2823119f, +0.2243301f, -0.1450236f, -0.1949360f, +0.0909537f, -0.1166573f, +0.1298240f, +0.2234893f,
  -0.0413111f, +0.3306090f, -0.1190864f, -0.1891200f, +0.0253759f, -0.3152204f, +0.0972693f, +0.2245199f,
  +0.0322386f, +0.3390045f, +0.0709192f, -0.0907515f, -0.2005471f, +0.0043850f, -0.1358450f, -0.1465790f,
  +0.0291652f, -0.3173732f, +0.1787669f, -0.2066468f, -0.0026527f, -0.0315781f, -0.1593726f, +0.2036792f,
  +0.3120117f, +0.2624319f, +0.0538510f, -0.1397899f, -0.3242640f, -0.3717294f, -0.0917711f, +0.0601187f,
  +0.2933054f, -0.2638696f, -0.2544764f, -0.2359955f, +0.0787884f, -0.2744896f, -0.2116123f, +0.0640367f,
  +0.0914038f, +0.0061401f, -0.0246962f, +0.2993823f, +0.0710956f, +0.0809795f, +0.0352627f, -0.0841880f,
  -0.1486881f, -0.1926777f, +0.0417552f, -0.1007925f, +0.1066260f, -0.0950709f, -0.2477602f, -0.0904377f,
  -0.3610327f, -0.3877178f, +0.0114840f, -0.0561259f, +0.0139262f, -0.1384150f, -0.1545227f, +0.1337839f,
  +0.2084229f, +0.1102814f, -0.3307539f, +0.2080924f, -0.2530921f, -0.4746292f, +0.0712596f, -0.2543757f,
  +0.1378890f, -0.0033198f, -0.1784276f, +0.1274604f, -0.1534985f, -0.3044793f, -0.4926393f, -0.0908966f,
  -0.0423954f, +0.3073776f, -0.0135369f, +0.3896582f, -0.1136846f, -0.1978896f, -0.4636766f, -0.2449737f,
  -0.2637059f, -0.5083973f, -0.6086563f, +0.3812073f, -0.1287227f, -0.0103624f, +0.2592894f, -0.1632661f,
  +0.1435138f, +0.2684908f, +0.3309097f, +0.1827931f, +0.0982162f, -0.4688520f, +0.2694687f, -0.1000860f,
  +0.2271702f, -0.3422355f, +0.0840301f, +0.2019750f, +0.1903177f, -0.1974926f, +0.3036731f, -0.1703343f,
  -0.0846031f, +0.0266446f, -0.2252538f, +0.0328424f, +0.0547901f, +0.2705343f, -0.0870920f, -0.2541769f,
  +0.4928811f, +0.1508283f, +0.1787133f, +0.2537501f, +0.2708959f, -0.0416449f, +0.3951439f, +0.0506090f,
  -0.3005690f, -0.2321838f, -0.0006925f, +0.1228553f, +0.0763208f, +0.2113508f, -0.1141223f, -0.0651972f
);

const float biases[4] = float[4](
  -0.0379358f, -0.0035717f, +0.0277642f, +0.0199695f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer14 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0551856f, +0.0625236f, -0.4947373f, -0.1220348f, +0.1467741f, +0.0140484f, +0.0204295f, +0.5864275f,
  +0.1020436f, -0.1244252f, -0.4119332f, -0.2762787f, +0.4430210f, +0.1957615f, -0.1120547f, +0.1265251f,
  -0.0067130f, +0.1742692f, -0.0553036f, +0.3644337f, -0.0820054f, -0.1805559f, -0.4705895f, -0.1678465f,
  +0.0560037f, +0.0166567f, -0.0624479f, -0.0522450f, -0.3631623f, +0.2451961f, -0.1043577f, +0.3032938f,
  +0.6885967f, -0.0907965f, -0.0953675f, -0.2855966f, +0.0673142f, +0.2519735f, -0.1845931f, +0.1210676f,
  +0.4188418f, -0.3306937f, +0.1357785f, -0.0169717f, -0.0218685f, -0.1369126f, +0.0505276f, -0.0853103f,
  -0.4201486f, +0.2404142f, +0.2101840f, -0.0604249f, +0.0286160f, +0.1447745f, -0.0960933f, -0.1864428f,
  +0.0703419f, -0.0354960f, -0.2949393f, +0.1181200f, +0.2051810f, -0.0787164f, +0.0949049f, +0.0673690f,
  +0.1002767f, +0.1108215f, -0.2626192f, +0.2068097f, -0.3036363f, -0.0832616f, +0.1252677f, +0.0893879f,
  +0.0041218f, +0.0675208f, +0.0021491f, -0.1056121f, -0.0169136f, -0.0017446f, +0.0089219f, -0.0591843f,
  -0.0877558f, +0.1795406f, -0.0699068f, -0.2189001f, -0.1673289f, -0.2355067f, +0.2148503f, +0.1047747f,
  +0.0333488f, +0.0618763f, -0.0670059f, -0.2024263f, -0.1400771f, +0.0632712f, -0.0129188f, -0.0197630f,
  +0.0139860f, +0.0072586f, +0.2578594f, -0.0879030f, +0.1225610f, -0.1083834f, +0.0346455f, -0.0249704f,
  +0.0503138f, +0.2156342f, +0.0641198f, -0.0907516f, +0.0629071f, -0.1101515f, -0.2277805f, +0.1654669f,
  +0.0293063f, +0.1223418f, +0.0430531f, -0.1403163f, -0.0365855f, -0.0484589f, -0.0591439f, -0.0312859f,
  +0.0232054f, +0.0071625f, -0.0155793f, +0.1079659f, -0.1076294f, +0.1285059f, +0.0695706f, +0.0371026f,
  -0.1351969f, -0.0105556f, +0.0355853f, -0.0339022f, -0.0488703f, -0.2346522f, -0.0313059f, -0.0718819f,
  -0.1423137f, -0.2091140f, -0.0482133f, +0.0341483f, +0.0299188f, +0.0276465f, -0.1334134f, +0.1661343f,
  -0.2702837f, -0.0311353f, +0.0752502f, +0.0670027f, +0.0617872f, +0.3614615f, -0.0383912f, +0.3155189f,
  -0.5510386f, -0.1346761f, +0.1246568f, +0.3870524f, +0.0312980f, -0.2672091f, -0.4060642f, -0.1667033f,
  -0.2528308f, +0.0691593f, +0.2075880f, +0.1235084f, -0.0893114f, +0.0795187f, -0.1824178f, +0.5763968f,
  -0.2424580f, -0.2116360f, -0.3477086f, +0.2233789f, +0.0948104f, +0.1986766f, -0.2445196f, +0.1513074f,
  -0.7701742f, -0.3289771f, +0.1317872f, +0.4279969f, -0.2343263f, -0.0881769f, -0.5332314f, +0.5076438f,
  +0.0621623f, +0.3512789f, +0.1070110f, +0.3355622f, +0.1741471f, +0.1068517f, +0.1742796f, +0.7516276f,
  +0.0260807f, -0.2347771f, -0.1940771f, +0.2523402f, -0.0638228f, -0.1752055f, -0.1342666f, -0.1693090f,
  -0.0489533f, -0.3163721f, -0.6388355f, -0.1852479f, -0.1118161f, -0.1165351f, -0.2891248f, +0.1791649f,
  +0.1645492f, +0.1303122f, -0.1511832f, +0.0470668f, -0.1756759f, -0.2702040f, -0.1204981f, +0.0470376f,
  -0.5275155f, +0.0590766f, +0.0217731f, -0.4816349f, +0.2169682f, +0.3551285f, +0.0990534f, +0.5093793f,
  -0.0571252f, +0.1464518f, -0.2985591f, +0.3475256f, +0.0216098f, +0.0029041f, +0.3749611f, +0.4232845f,
  +0.2757186f, -0.0851923f, -0.6888912f, -0.1433803f, -0.0574610f, +0.4495318f, +0.4136958f, -0.3212437f,
  +0.3329423f, +0.4110314f, +0.0790756f, -0.6147344f, +0.1125850f, +0.0653247f, -0.2186411f, +0.1261291f,
  +0.2831672f, +0.0682327f, +0.3544326f, -0.5073408f, +0.1598058f, -0.0494591f, +0.0439943f, +0.0516116f,
  -0.4235088f, +0.0787251f, +0.1769098f, -0.4633312f, +0.2117378f, +0.2078472f, -0.3367663f, -0.1765907f,
  -0.1954010f, +0.4036912f, +0.2018829f, +0.0444800f, -0.1014725f, -0.1051371f, -0.1691090f, +0.0740831f,
  -0.2515814f, +0.5126408f, +0.0321773f, -0.0902980f, +0.1716543f, -0.0841613f, +0.0727309f, +0.3090162f,
  -0.2269331f, +0.4981931f, +0.0606747f, +0.0271227f, +0.0934646f, +0.0376970f, -0.0355061f, -0.0011844f
);

const float biases[4] = float[4](
  +0.0241129f, -0.0107869f, -0.0575557f, -0.0170307f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer15 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0483325f, -0.3450110f, -0.1455415f, +0.1185324f, +0.7102870f, -0.2377673f, -0.3991628f, -0.4867536f,
  +0.3421987f, -0.5581192f, +0.1460087f, -0.2236464f, +1.0869154f, -0.3717383f, -0.0436453f, -0.4146464f,
  +0.1543464f, -0.1725509f, -0.0617561f, +0.1425347f, +0.1246934f, -0.0950465f, +0.3262217f, +0.2205479f,
  +0.1783434f, +0.2900151f, -0.6928393f, +0.2969258f, -0.3911718f, -0.2494992f, +0.2838906f, -0.1601771f,
  +0.1776527f, -0.3348848f, +0.1558196f, -0.2430472f, +0.0729607f, -0.1764751f, -0.2750305f, -0.4042118f,
  +0.3308570f, -0.4041184f, -0.0186609f, -0.3231149f, +0.3881115f, -0.2008837f, +0.1436140f, -0.3548856f,
  -0.2936722f, +0.1683590f, -0.4489604f, -0.0652175f, +0.2912772f, +0.2300431f, +0.2350187f, +0.1353704f,
  -0.2294498f, -0.0979695f, -0.1113733f, +0.1701422f, -0.4161757f, -0.2610034f, -0.5307336f, -0.2168134f,
  +0.4653765f, -0.2702390f, +0.0043500f, -0.1830535f, -0.1786879f, +0.0283799f, +0.3405620f, +0.0881812f,
  +0.2165708f, -0.1175713f, -0.0004535f, -0.2498710f, -0.0868470f, -0.0263616f, +0.0845312f, -0.0621858f,
  +0.1444234f, +0.0683991f, +0.3002827f, -0.0133497f, -0.0480752f, -0.1255240f, -0.0541555f, -0.2460791f,
  +0.0327582f, -0.1828467f, +0.4936250f, +0.0218378f, +0.0347710f, +0.1250563f, +0.0517964f, -0.0819488f,
  +0.0140326f, -0.0227277f, -0.0768428f, +0.1860712f, -0.4387417f, -0.0923935f, +0.0112399f, +0.3111085f,
  +0.1867827f, -0.5461269f, -0.1025071f, -0.2505161f, -0.3571862f, +0.0559363f, +0.0972373f, +0.2761101f,
  +0.0850569f, -0.4586731f, -0.1071109f, -0.0560187f, -0.0067548f, -0.1122015f, +0.3722093f, -0.0850763f,
  -0.3330499f, -0.0142952f, +0.2060973f, +0.1461813f, -0.1989113f, +0.1345116f, +0.0488106f, +0.3046418f,
  +0.1890683f, -0.4982975f, -0.1928482f, +0.0724335f, -0.0265273f, +0.0530220f, +0.1375435f, +0.1365641f,
  -0.1197809f, -0.2133816f, -0.1229786f, -0.0537897f, -0.1117666f, -0.0496995f, +0.4615076f, +0.0744845f,
  -0.2882847f, -0.1766519f, +0.2171788f, +0.3848074f, +0.0522334f, +0.0090200f, +0.2103768f, -0.1130464f,
  +0.0037222f, +0.2542486f, +0.2054039f, +0.0474059f, -0.0427014f, +0.1740895f, -0.1295330f, -0.1497678f,
  -0.3171154f, -0.2328622f, +0.1382670f, +0.1948819f, -0.1863393f, +0.1446194f, +0.0128201f, -0.0533053f,
  +0.0711097f, -0.5200381f, -0.1489781f, +0.1081434f, +0.0374793f, -0.0238895f, +0.3191875f, +0.5483279f,
  +0.1318563f, +0.2457554f, +0.0362835f, -0.2515656f, +0.0689481f, -0.0131469f, -0.3307124f, +0.1203803f,
  -0.4672686f, +0.1870427f, -0.1924929f, +0.2061758f, -0.0033407f, +0.2039822f, -0.1197425f, +0.0024462f,
  -0.1153440f, -0.2726817f, +0.3125001f, +0.0236126f, -0.0744609f, -0.0512928f, -0.0056047f, +0.1636206f,
  +0.4740649f, -0.4715844f, +0.1045683f, -0.0991303f, +0.4620544f, -0.0480564f, -0.0045532f, +0.2207889f,
  -0.2147200f, -0.0963715f, +0.3083019f, +0.0175726f, +0.1964695f, +0.2156765f, -0.1501387f, -0.1179121f,
  -0.0218577f, -0.1181343f, -0.0247853f, -0.2715400f, +0.1446329f, +0.2446529f, -0.0166791f, +0.3053430f,
  -0.2518992f, -0.5268627f, +0.0424668f, -0.1433468f, +0.2021216f, -0.0082481f, -0.2726760f, +0.1595645f,
  +0.2620604f, +0.5043731f, +0.1858026f, +0.3056340f, -0.2027428f, +0.0264065f, -0.0704764f, -0.0555247f,
  -0.2358868f, -0.4591999f, +0.0536759f, -0.2072133f, -0.1920363f, +0.0288775f, -0.3278967f, +0.2632513f,
  -0.0682010f, -0.0187835f, -0.2259117f, +0.2057181f, -0.1965612f, +0.1853088f, -0.0510550f, +0.0014961f,
  +0.1222386f, +0.6827372f, -0.0865672f, -0.0312700f, -0.1600074f, +0.0020629f, -0.1781309f, -0.4529051f,
  -0.2093388f, -0.0402157f, +0.1442849f, -0.1252429f, +0.3272027f, -0.1596346f, +0.0923627f, +0.0839861f,
  -0.2264255f, -0.0361324f, +0.0485346f, +0.1412827f, +0.0767710f, +0.0629387f, -0.0288344f, -0.1158491f,
  -0.2026321f, +0.2401570f, +0.0256577f, +0.0183076f, +0.0066769f, -0.1442955f, +0.4670335f, -0.2395011f
);

const float biases[4] = float[4](
  -0.2023549f, -0.2256042f, +0.0079650f, +0.0586068f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer15 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3914304f, +0.0689115f, -0.0519476f, +0.1214119f, +0.1570666f, -0.3540628f, -0.4051610f, -0.2396861f,
  +0.2595276f, +0.4933019f, -0.0757366f, +0.0774658f, +0.3751666f, -0.0397173f, -0.5357770f, -0.4841758f,
  +0.0839817f, +0.1238483f, +0.1871140f, +0.3873601f, +0.2524529f, +0.1101194f, +0.3777179f, -0.2244001f,
  +0.2059074f, -0.1531838f, +0.0702632f, +0.0696853f, +0.1600346f, +0.3267106f, -0.2298725f, -0.2334398f,
  +0.1928853f, -0.3964312f, +0.0599386f, +0.3045954f, +0.2848129f, +0.0171387f, -0.0671032f, +0.1930940f,
  +0.1663400f, -0.4281164f, -0.0697178f, +0.0346701f, +0.2166993f, +0.0019253f, +0.1436578f, +0.1012587f,
  -0.0245535f, +0.2962956f, +0.1216899f, +0.1501067f, -0.1638214f, +0.1606016f, -0.1630527f, -0.2339243f,
  +0.7308944f, +0.0280408f, +0.1991412f, +0.2893091f, +0.2562300f, -0.0600464f, -0.0002962f, +0.0288321f,
  +0.2334559f, -0.0147961f, +0.1958200f, -0.3249839f, +0.2151223f, -0.2428859f, +0.4460050f, +0.5184798f,
  -0.0817253f, -0.0235226f, +0.1216371f, -0.0128064f, -0.0466525f, -0.0634821f, +0.1794471f, +0.1470097f,
  +0.1014645f, -0.1418734f, +0.2185487f, -0.0786531f, +0.1585107f, -0.0056078f, -0.2053008f, -0.0023080f,
  -0.0787650f, -0.2866262f, +0.0681304f, +0.1551843f, -0.0602513f, -0.1365460f, +0.3557081f, +0.2215146f,
  +0.0198259f, -0.0970247f, -0.0748242f, +0.0710143f, -0.0959158f, +0.0383950f, -0.2788993f, +0.2598604f,
  -0.0330987f, +0.4246860f, +0.0379179f, +0.3291899f, +0.3770587f, -0.3315385f, -1.1355457f, +0.3522690f,
  +0.0383760f, -0.0460190f, +0.2916943f, -0.0008365f, +0.1793426f, +0.0796467f, -0.1800441f, -0.1603724f,
  +0.1288304f, +0.1388393f, -0.2614772f, -0.2078991f, +0.1635957f, +0.0953072f, +0.3839952f, -0.3161294f,
  -0.7034290f, +0.3373941f, -0.4309655f, +0.6026313f, +0.3031558f, -0.0827528f, +0.2232413f, -0.2434110f,
  -0.2760716f, -0.1487425f, -0.2616537f, +0.2322214f, +0.1140531f, +0.0269304f, -0.2589644f, -0.1754991f,
  +0.3343393f, -0.0679919f, +0.0771364f, +0.0805276f, -0.1161425f, +0.0869237f, -0.0744425f, -0.1045651f,
  +0.4699610f, -0.0094132f, +0.0637223f, +0.3483512f, -0.2020920f, -0.0082409f, +0.5536889f, +0.0326880f,
  +0.0487639f, +0.1906546f, +0.1828301f, +0.0320499f, +0.2336767f, +0.1341171f, +0.4621762f, +0.2567066f,
  +0.1465646f, -0.3330715f, -0.2177682f, -0.0771881f, +0.1753769f, -0.0974950f, -0.2163243f, -0.2419792f,
  -0.1393738f, -0.4727644f, +0.2336351f, +0.0207854f, -0.3301919f, -0.1391699f, -0.3281544f, -0.5899006f,
  -0.0618421f, -0.0890932f, +0.2430438f, -0.3170582f, +0.1373799f, -0.2428623f, +0.3248900f, -0.4734420f,
  +0.4898301f, -0.0724020f, -0.2003968f, +0.0704450f, +0.2150265f, +0.0950315f, -0.3151555f, -0.1952793f,
  +0.1387590f, +0.0968408f, -0.0663801f, -0.0234609f, +0.1587091f, +0.0402373f, -0.2355802f, +0.1780635f,
  -0.0269095f, +0.2919864f, -0.5204388f, -0.0429813f, -0.1461292f, +0.0249033f, +0.0949191f, +0.0769946f,
  +0.2005718f, -0.0244745f, -0.0623588f, -0.0065785f, -0.3304566f, +0.3109871f, -0.1352946f, -0.4018128f,
  -0.0805523f, -0.1339166f, +0.0635982f, -0.1060436f, -0.0133729f, +0.0069538f, -0.0655618f, +0.1969121f,
  -0.0475758f, +0.0020891f, -0.0861639f, -0.1314127f, -0.0287065f, -0.0014882f, -0.0459041f, +0.3174948f,
  +0.4419528f, +0.4629611f, +0.2263894f, -0.5019091f, +0.0687078f, -0.0523082f, -0.5144562f, +0.1973497f,
  +0.5884080f, -0.1186614f, +0.1856221f, -0.2798513f, +0.4387034f, -0.0210370f, +0.2576370f, -0.0945245f,
  -0.0747122f, -0.2058224f, +0.0505744f, -0.0156818f, +0.0519157f, +0.2272092f, +0.0178206f, +0.3686461f,
  -0.1572942f, -0.1956456f, -0.2152694f, -0.1078567f, +0.0625175f, -0.2540078f, +0.3497973f, -0.1358255f,
  +0.0171740f, -0.4738499f, -0.0988006f, -0.1939253f, +0.4462936f, -0.0850654f, +0.3001524f, -0.2503524f,
  +0.1259711f, -0.1106631f, +0.0622759f, -0.0022638f, +0.0933570f, +0.0697158f, -0.1852719f, +0.0179048f
);

const float biases[4] = float[4](
  -0.0433418f, -0.0410213f, +0.0982882f, -0.0877865f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer16 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0473290f, +0.0979801f, -0.0445367f, +0.3049512f, +0.1946772f, +0.3535439f, -0.1301946f, +0.0244256f,
  -0.3061677f, -0.1533002f, -0.3759540f, +0.0867922f, -0.4795904f, +0.6663473f, -0.1486828f, -0.2335942f,
  -0.1602231f, +0.0273058f, -0.1009736f, +0.1730863f, -0.2017291f, +0.0248679f, -0.3741182f, +0.4716389f,
  +0.3633245f, +0.0894225f, +0.1314025f, -0.3063434f, +0.0363672f, +0.2346088f, +0.1023545f, -0.1862767f,
  -0.3028915f, -0.1677696f, -0.3618363f, +0.1852751f, -0.2159891f, +0.2038244f, +0.2635683f, -0.1077857f,
  -0.7358143f, +0.2394612f, -0.2745055f, -0.2800949f, -0.1997860f, +0.0019523f, +0.0036452f, -0.0359522f,
  -0.1668862f, +0.2126595f, +0.2842184f, +0.1949932f, -0.1187376f, +0.2197997f, +0.0622262f, -0.2273609f,
  +0.1970385f, -0.1441363f, +0.3547394f, +0.3038407f, +0.2278246f, -0.1141146f, -0.2978794f, +0.0778726f,
  -0.0424348f, +0.1180729f, -0.1560840f, -0.0900876f, -0.2178715f, -0.1029032f, -0.0200271f, +0.0728861f,
  -0.5718184f, +0.2006329f, +0.1810952f, -0.0933520f, -0.0142071f, -0.3765112f, -0.3998504f, +0.1292961f,
  +0.3073035f, +0.4061921f, +0.1035402f, +0.0092559f, +0.3256758f, -0.4655432f, +0.2180176f, -0.2038229f,
  -0.1159243f, +0.1286766f, +0.1295409f, +0.2299379f, +0.3819653f, -0.0930523f, +0.4328685f, +0.2937834f,
  -0.2440480f, +0.2693401f, -0.2937891f, -0.6528350f, +0.1490819f, +0.1762539f, -0.0849506f, +0.0173538f,
  -0.0899319f, +0.6430421f, +0.0960171f, +0.1812888f, +0.1990925f, -0.1597398f, -0.1353242f, +0.0267811f,
  +0.0366040f, +0.1879305f, +0.5975851f, +0.1627322f, +0.2724347f, +0.1512332f, -0.0134287f, -0.0550270f,
  +0.0464030f, -0.2366497f, -0.0639632f, -0.0675238f, +0.3809977f, +0.2359739f, +0.1643084f, +0.1056199f,
  +0.1640463f, -0.3549517f, -0.0069493f, +0.7549645f, -0.3206404f, -0.0594137f, +0.2237879f, -0.1014106f,
  -0.0835864f, -0.0224881f, +0.1959048f, +0.3695148f, +0.2610331f, -0.0681646f, -0.1685207f, +0.0526362f,
  -0.2963155f, +0.0420919f, +0.1200540f, +0.1358117f, -0.0165890f, +0.0173993f, +0.0965953f, -0.0933934f,
  -0.2225197f, +0.1895486f, -0.0912028f, -0.2695211f, -0.3502190f, -0.0886363f, +0.1224223f, -0.0248916f,
  +0.1457446f, +0.1326048f, +0.1706959f, +0.0353222f, +0.2010832f, -0.3308076f, -0.0520663f, -0.0137294f,
  -0.1542660f, -0.0367961f, +0.1260888f, -0.0245213f, +0.2435522f, -0.0374327f, +0.0063677f, -0.0541339f,
  -0.2092329f, +0.1622141f, +0.0148641f, +0.1478209f, +0.1071673f, -0.2307238f, +0.0778592f, -0.3560519f,
  +0.1654876f, +0.0109164f, +0.3041672f, +0.0619011f, -0.0953117f, -0.4281417f, +0.1832875f, -0.3639281f,
  -0.2530558f, -0.0738819f, +0.1706620f, -0.1409918f, +0.1694269f, +0.0015134f, -0.0165592f, -0.0248724f,
  -0.2008392f, -0.4653122f, +0.1880796f, +0.1199521f, -0.1672654f, -0.0873118f, -0.0329560f, -0.1793484f,
  +0.0571045f, -0.2411926f, +0.0534890f, -0.0085132f, -0.1020287f, -0.1350388f, +0.0109970f, +0.0292861f,
  +0.1447502f, -0.1119240f, +0.1249109f, -0.0823663f, -0.1028054f, +0.0323449f, +0.0265245f, -0.0993803f,
  +0.2437319f, +0.1160422f, +0.1081366f, -0.1773106f, -0.0415613f, -0.3782939f, -0.0865493f, +0.0386819f,
  +0.1070698f, -0.0528981f, +0.1430141f, -0.0536865f, +0.1306100f, -0.0193436f, -0.0130398f, +0.0839299f,
  +0.0935626f, +0.0788208f, -0.0825779f, +0.1568190f, -0.0576375f, -0.0536977f, -0.1358282f, +0.0363870f,
  -0.0377314f, +0.2495212f, +0.0122352f, -0.1483949f, -0.0359120f, -0.0090164f, -0.0936142f, +0.1751110f,
  +0.2697971f, -0.2477516f, +0.0669877f, +0.0713300f, +0.2202204f, -0.2629894f, +0.0695677f, +0.4820813f,
  +0.4443527f, -0.2806399f, +0.0551732f, -0.2029664f, +0.0838476f, -0.1772160f, +0.0423908f, -0.0038999f,
  -0.7568902f, -0.1730512f, +0.0531263f, +0.0340236f, -0.1139063f, +0.0919684f, -0.1834875f, +0.1621680f,
  -0.2597010f, -0.0247978f, -0.1540566f, +0.2818630f, -0.0556243f, -0.2948250f, +0.0017798f, -0.0173275f
);

const float biases[4] = float[4](
  -0.0653771f, -0.0548593f, -0.0020009f, +0.0268141f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer16 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.6154452f, -0.1147257f, -0.0035618f, +0.1322357f, -0.2450303f, +0.7232565f, +0.3506666f, +0.2889342f,
  -0.1767528f, -0.3227316f, -0.2333168f, -0.1040822f, -0.2608906f, +0.6090304f, -0.3463556f, -0.3181889f,
  -0.0049209f, +0.2570338f, +0.2796018f, -0.0697290f, +0.1138073f, -0.3656200f, -0.2345863f, +0.2834296f,
  +0.4489861f, -0.1473347f, +0.0681028f, +0.0871617f, -0.0821876f, -0.1876455f, +0.1246371f, +0.2379957f,
  -0.3008157f, +0.2324634f, -0.2203049f, -0.1305191f, -0.1801926f, -0.0888250f, -0.0607364f, -0.6661134f,
  +0.1355334f, +0.4338748f, +0.1067035f, -0.0028707f, -0.0035026f, -0.3812763f, +0.1855327f, -0.3792315f,
  +0.1704700f, +0.1741687f, -0.0006607f, -0.2329684f, -0.0311175f, -0.0139544f, -0.0049149f, -0.0373798f,
  -0.4536670f, +0.3015796f, -0.2327411f, -0.1578792f, -0.0532900f, -0.0418914f, -0.1926115f, -0.1028628f,
  -0.3960769f, -0.1781786f, +0.0371315f, +0.1369599f, +0.0356022f, +0.0974794f, +0.0596049f, +0.1757930f,
  -0.2501621f, +0.0636627f, -0.0341772f, +0.0297549f, -0.0111763f, -0.0256654f, +0.0714440f, -0.2306666f,
  -0.1675275f, +0.0852501f, +0.0729743f, +0.0032084f, -0.1224523f, -0.1235387f, +0.2102659f, +0.2564103f,
  -0.0520003f, -0.1318519f, -0.0790222f, +0.0985392f, +0.0466879f, -0.0754736f, -0.0406780f, +0.0071130f,
  -0.0841283f, +0.0679827f, -0.0113848f, +0.0431851f, +0.1421142f, -0.0921806f, +0.1232978f, -0.0532136f,
  -0.0156589f, -0.1717511f, +0.0906738f, +0.0788041f, +0.1052964f, -0.1605121f, -0.0670139f, +0.0059624f,
  +0.1499806f, +0.0405913f, +0.0819125f, -0.1433762f, -0.2866867f, -0.1305152f, +0.0666553f, -0.3896905f,
  -0.3220013f, -0.0596710f, +0.0869366f, +0.0044130f, +0.0306258f, +0.0308376f, -0.0002447f, +0.0015655f,
  -0.0013654f, -0.2009330f, +0.1129972f, -0.0877019f, +0.0004259f, +0.0059639f, +0.0345833f, -0.0878453f,
  +0.0373590f, -0.1049808f, -0.0120901f, -0.1516887f, -0.0572723f, +0.0460468f, +0.0297037f, -0.0184799f,
  +0.0405448f, -0.2572822f, +0.0587936f, -0.1004937f, -0.0525182f, +0.3543398f, -0.2565810f, +0.2035410f,
  -0.1958354f, +0.1135109f, +0.1382615f, -0.0426766f, +0.1918756f, -0.5195808f, +0.0300266f, -0.2466232f,
  +0.4908407f, +0.2371620f, +0.0937757f, -0.2349819f, -0.0688927f, -0.1719803f, +0.1401231f, -0.4631081f,
  +0.2917646f, -0.4870144f, +0.4094125f, -0.0116395f, +0.1240661f, +0.3505656f, -0.4317302f, +0.1159301f,
  -0.6930618f, +0.0160845f, +0.1246638f, -0.1907031f, -0.0254323f, +0.2096772f, -0.0399566f, -0.3077191f,
  +0.2357403f, +0.1483957f, +0.0828446f, +0.2169620f, -0.0280413f, +0.0551923f, -0.1177752f, +0.1575409f,
  +0.1390023f, -0.1929403f, +0.3727451f, -0.1091542f, +0.1851628f, +0.1457707f, -0.4358639f, -0.0538898f,
  +0.1836117f, +0.1240161f, +0.0101790f, +0.3767964f, +0.0846635f, +0.0902184f, +0.0507557f, -0.0834586f,
  +0.0347315f, +0.2917246f, -0.0487540f, +0.3953651f, +0.2715062f, -0.1454503f, -0.1477358f, +0.3155863f,
  -0.1527875f, +0.0792518f, -0.1977375f, -0.1021336f, -0.0013838f, -0.0680744f, -0.1747824f, -0.2846422f,
  +0.1808415f, +0.0099491f, -0.3362838f, +0.1020438f, -0.0463047f, +0.2429158f, +0.0528691f, -0.0341463f,
  -0.4068596f, +0.0376708f, -0.0021400f, +0.1372512f, -0.2953358f, -0.0578200f, -0.0196350f, +0.1050808f,
  -0.3067548f, -0.0462571f, +0.0840154f, -0.0391592f, -0.0922554f, +0.0966593f, +0.2251573f, -0.5580434f,
  +0.1188303f, -0.4520284f, +0.0528504f, +0.0466530f, -0.1359891f, +0.0280648f, +0.4333004f, -0.0609735f,
  -0.1296047f, -0.2615820f, -0.2770345f, -0.0827447f, -0.1655121f, -0.0677423f, +0.0673370f, -0.1127146f,
  -0.5797102f, +0.1161030f, -0.0054977f, +0.3013345f, -0.2560554f, -0.0693068f, +0.1367325f, +0.0070225f,
  +0.1679361f, -0.1070457f, +0.3186756f, +0.0248661f, +0.0154211f, -0.0097276f, -0.1066848f, +0.1210442f,
  +0.4701741f, -0.1373304f, +0.1872571f, -0.2869253f, +0.2151263f, +0.0694897f, +0.1736066f, +0.0268327f
);

const float biases[4] = float[4](
  +0.1079148f, -0.0258710f, -0.0791058f, +0.0293868f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer17 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0035256f, +0.0362229f, -0.1195650f, +0.0442957f, +0.0094857f, -0.0244275f, +0.3247575f, -0.2941417f,
  +0.0798358f, -0.2837136f, +0.1580899f, +0.0163146f, -0.2958714f, -0.0698136f, +0.4018604f, -0.4180768f,
  +0.0474300f, +0.0219387f, -0.1469343f, +0.0769301f, +0.1266693f, +0.1141268f, -0.4586224f, +0.0016146f,
  -0.1347177f, +0.2709811f, +0.1681399f, +0.1062972f, +0.2286203f, -0.1085150f, +0.1220692f, -0.2958143f,
  +0.3278155f, -0.1142097f, +0.2415296f, -0.3570264f, -0.4302980f, +0.1349000f, +0.6134122f, -0.1903915f,
  +0.9370952f, +0.1841112f, +0.2198633f, -0.4499646f, -0.2435336f, -0.0198425f, +0.5124755f, -0.1686308f,
  -0.0408617f, +0.0124107f, -0.2954522f, +0.0693177f, +0.0124349f, -0.1734557f, -0.3813601f, +0.0212821f,
  +0.1351739f, -0.2271459f, -0.1304646f, -0.2776425f, -0.2002990f, -0.0507211f, +0.0748987f, +0.5315380f,
  -0.1361818f, +0.0473279f, +0.0851154f, -0.1063009f, -0.2789964f, +0.2526554f, -0.1730058f, +0.0637291f,
  -0.1675792f, -0.4709038f, +0.3176166f, +0.0228232f, +0.0521024f, -0.0020478f, -0.0639620f, +0.0448746f,
  -0.2387087f, -0.6555619f, -0.0950249f, +0.1552555f, +0.0413947f, -0.1552752f, -0.1127414f, +0.0153961f,
  +0.3184136f, +0.1501813f, -0.0565350f, -0.0150104f, -0.0125368f, -0.1255090f, +0.1745476f, +0.0176100f,
  -0.1406296f, -0.5079579f, -0.1397019f, -0.1478564f, -0.3606432f, +0.0569395f, +0.2557800f, -0.4322691f,
  +0.2598916f, +0.2516187f, +0.2488239f, +0.6167668f, -0.3114727f, +0.2732005f, +0.6028963f, -0.1259940f,
  -0.1594285f, +0.1544333f, +0.2893097f, +0.2627899f, -0.0493868f, +0.1648182f, +0.1182459f, -0.2756233f,
  +0.1102989f, -0.3737846f, -0.2976305f, +0.2699272f, -0.0165221f, -0.1627386f, +0.3816428f, -0.1189331f,
  +0.0066503f, +0.1573725f, +0.0469563f, -0.1782861f, -0.2864265f, -0.2212492f, +0.0348232f, +0.4237850f,
  -0.0996722f, +0.2299879f, -0.1995799f, -0.2684371f, -0.2705835f, +0.1134478f, +0.4585321f, +0.1431873f,
  -0.4827571f, -0.3687969f, -0.0435993f, +0.1582535f, +0.0347790f, +0.1782754f, +0.1745304f, -0.3854125f,
  -0.8572443f, -0.2814333f, -0.0845536f, +0.3266270f, -0.1728405f, +0.2006807f, +0.0950041f, -0.4663791f,
  +0.1071230f, -0.3748972f, -0.0140409f, +0.0323878f, +0.0550566f, -0.0112571f, -0.1592128f, -0.1617552f,
  +0.4827957f, -0.1918836f, +0.5203185f, -0.1835102f, -0.1757144f, +0.4075374f, +0.2848686f, -0.0586833f,
  +0.5603474f, +0.2519336f, +0.2871016f, -0.0164211f, -0.5807233f, +0.2414448f, +0.2381743f, +0.1901898f,
  +0.0824933f, +0.0192673f, +0.0229738f, -0.0195416f, -0.2269165f, -0.0286194f, +0.1083139f, +0.0116383f,
  +0.1180151f, -0.0610895f, +0.2998564f, -0.3188152f, -0.1962492f, -0.1999962f, -0.1188056f, +0.3758278f,
  +0.4176235f, -0.4756153f, -0.0555480f, -0.4858397f, -0.0534778f, +0.0385125f, +0.1946783f, +0.1793624f,
  +0.0752966f, +0.0515547f, -0.0891258f, -0.2241772f, +0.0996287f, -0.1443394f, +0.3054981f, +0.0878157f,
  -0.3533211f, -0.1203703f, -0.1438559f, +0.1816445f, +0.1066095f, -0.1578792f, -0.1437181f, -0.3283756f,
  -0.0293390f, +0.3085792f, -0.1689703f, +0.3087063f, -0.4069307f, +0.1411083f, -0.2614144f, -0.3839631f,
  +0.0472619f, +0.1611337f, +0.0928126f, +0.1434780f, -0.0649230f, -0.1845725f, -0.0175452f, -0.4403813f,
  +0.1443145f, +0.0355341f, -0.3756388f, +0.1543939f, -0.0804788f, -0.1301522f, +0.2129039f, -0.1899800f,
  +0.0934182f, +0.4197587f, -0.2287640f, -0.0900404f, -0.5381413f, +0.1288699f, -0.4396606f, +0.0028847f,
  -0.1668013f, +0.2166738f, -0.0912295f, -0.1176775f, -0.1711005f, -0.1857175f, -0.1299876f, +0.0633889f,
  +0.2833178f, +0.3434961f, +0.2255912f, +0.0572156f, -0.0450585f, -0.1072810f, -0.1848408f, +0.1018674f,
  -0.1417177f, -0.0413418f, -0.3694490f, -0.3283802f, +0.1423785f, -0.0109798f, -0.0686253f, -0.1348012f,
  -0.1923114f, +0.5091138f, -0.1064441f, -0.2131449f, +0.2624855f, -0.3411168f, +0.0626030f, -0.2761939f
);

const float biases[4] = float[4](
  -0.0894457f, -0.0944444f, -0.0358526f, -0.0142197f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer17 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0527822f, -0.4432440f, +0.0098818f, -0.1230218f, -0.0826461f, +0.1203876f, +0.0038277f, +0.2526937f,
  -0.2600933f, -0.0379492f, +0.1635676f, +0.2804871f, +0.0047147f, +0.0743979f, +0.2091557f, +0.0654624f,
  +0.3216546f, +0.0840508f, +0.0229679f, +0.0925985f, +0.3636601f, +0.0981577f, -0.4314328f, +0.3585226f,
  -0.0920546f, -0.6376488f, +0.4100175f, +0.1919665f, -0.3350406f, -0.0574486f, +0.5780407f, -0.3754481f,
  -0.6945189f, +0.1726730f, +0.0713997f, +0.3519934f, +0.3726525f, -0.1556396f, +0.7356225f, -0.4038270f,
  +0.3021756f, +0.1526198f, +0.0765124f, +0.3028661f, +0.3596460f, +0.1823173f, -0.6110826f, +0.2357315f,
  +0.2200688f, -0.0129867f, -0.0423593f, +0.0518417f, +0.5310622f, +0.0540954f, +0.0542325f, +0.2151894f,
  -0.1021727f, +0.1624989f, +0.0708897f, -0.4466738f, +0.0690506f, -0.0940241f, +0.2062094f, -0.3040590f,
  +0.4642554f, -0.1469692f, +0.0277229f, -0.0799984f, -0.1859369f, +0.0816296f, +0.0944016f, +0.0112910f,
  -0.0112874f, +0.0743169f, +0.0963482f, -0.0744492f, +0.1792355f, +0.2196293f, -0.1653724f, -0.2328790f,
  -0.0686470f, -0.2991888f, +0.4036482f, -0.0256485f, -0.0722006f, -0.1029130f, +0.1477672f, -0.2800875f,
  +0.2973942f, -0.4894376f, -0.1751702f, -0.1477819f, +0.2593940f, -0.0614752f, +0.3396921f, +0.0944303f,
  -0.1695490f, -0.0085605f, +0.4127181f, +0.0019377f, +0.2398582f, +0.1346792f, +0.3849909f, -0.0457302f,
  -0.1412718f, -0.2680767f, -0.1193454f, -0.2881983f, +0.6707577f, +0.1614780f, +0.1148146f, -0.2066200f,
  -0.1557580f, -0.1460450f, -0.1695701f, -0.0819182f, -0.2879756f, +0.2005600f, +0.1284529f, +0.1221040f,
  +0.0234515f, +0.2591474f, +0.3461404f, +0.3291294f, +0.0252474f, -0.1507313f, -0.2109302f, +0.3184022f,
  +0.2602624f, -0.0416799f, +0.1029320f, +0.3930190f, -0.0172508f, +0.0867362f, -0.4739062f, +0.1883382f,
  +0.2466947f, -0.1244721f, +0.1260265f, -0.0463016f, +0.1902785f, +0.1659990f, -0.5028160f, +0.1819489f,
  +0.0042475f, -0.3711589f, -0.0123956f, -0.1181282f, -0.2079496f, +0.0776311f, +1.0275410f, -0.1996953f,
  +0.4832561f, -0.4258948f, -0.1641637f, -0.1733750f, -0.5426806f, +0.0278986f, -0.1051256f, -0.1797002f,
  +0.1550941f, -0.1588285f, -0.1670962f, -0.2469447f, -0.2005538f, -0.1859978f, -0.1201130f, +0.0102548f,
  +0.1607360f, +0.0402167f, -0.0939449f, +0.4014268f, -0.1762690f, +0.1811318f, +0.1699600f, -0.1819828f,
  -0.0778487f, -0.3282420f, +0.1943344f, -0.0608131f, -0.4790358f, +0.0641666f, -0.5940430f, -0.0431717f,
  -0.0617319f, +0.2710699f, -0.0556936f, +0.2008976f, -0.1196952f, -0.0927406f, -0.0138831f, -0.1320076f,
  -0.1687517f, -0.0916242f, -0.1547926f, -0.2296750f, +0.1751296f, -0.2909130f, +0.1547682f, -0.1598041f,
  -0.2233838f, -0.0746441f, -0.3760571f, -0.1077194f, -0.2476650f, +0.0302070f, +0.0316611f, -0.3884325f,
  +0.0673044f, -0.0111984f, -0.0624440f, -0.0858772f, -0.0495071f, -0.1664654f, -0.0554372f, -0.3579779f,
  +0.5212001f, -0.2195177f, -0.1593142f, -0.3688894f, -0.3732330f, +0.0533020f, -0.1912707f, +0.0350827f,
  +0.0877007f, -0.3902405f, +0.0065315f, +0.0925097f, -0.0048249f, -0.4020703f, -0.6317707f, -0.0481773f,
  +0.5186074f, -0.2997514f, -0.0880613f, +0.0156440f, +0.4113556f, -0.0633261f, -0.5128613f, +0.0161449f,
  -0.0066366f, -0.2113511f, +0.3514266f, -0.2563295f, -0.2569530f, +0.0184333f, +0.2187506f, -0.2529254f,
  -0.0111309f, +0.5003484f, -0.2003300f, +0.1838328f, -0.1026208f, +0.4195527f, +0.7414530f, +0.2062545f,
  -0.2804781f, -0.7503191f, +0.1182775f, +0.0813469f, +0.6504418f, -0.0357728f, -0.1279184f, +0.1285044f,
  -0.0838585f, -0.4127091f, +0.1007630f, -0.0964053f, +0.0461131f, +0.2451649f, -0.2635693f, +0.2337430f,
  -0.2111017f, -0.7349555f, +0.4896880f, -0.1152735f, -0.1569013f, +0.1395396f, -0.3058800f, -0.0327953f,
  +0.4849922f, -0.1170063f, +0.0129695f, -0.0211906f, +0.2400923f, -0.0295864f, -0.0498475f, +0.4982466f
);

const float biases[4] = float[4](
  -0.0468946f, +0.0155282f, +0.0607610f, -0.1790788f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer18 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2839738f, +0.5402868f, +0.1024679f, -0.0538204f, -0.4886172f, -0.0572426f, -0.0792169f, +0.3093637f,
  -0.4481223f, +0.3534268f, +0.1737889f, +0.1720043f, -0.4657078f, +0.1083559f, +0.3466021f, +0.2930027f,
  -0.0369371f, +0.1225361f, +0.6093132f, -0.2376585f, -0.2315526f, +0.0063990f, -0.1224356f, -0.1256410f,
  -0.3887806f, +0.1241067f, -0.0217337f, -0.0616553f, -0.6048744f, +0.3499309f, +0.0819328f, +0.4246248f,
  -0.0056491f, -0.1777264f, +0.1598487f, -0.2141647f, -0.1746258f, -0.2527852f, +0.1516452f, +0.6454102f,
  +0.2521737f, -0.1316970f, +0.3684649f, -0.0279863f, +0.0478178f, +0.1957052f, -0.2963729f, +0.1479808f,
  -0.0973426f, -0.1413825f, +0.1338014f, +0.1644029f, -0.1189942f, -0.3975174f, -0.2842809f, +0.4653743f,
  -0.5888334f, -0.1408772f, +0.0870234f, -0.0184430f, +0.0155342f, -0.0789882f, +0.0083861f, +0.3608412f,
  +0.1669093f, +0.1412229f, -0.1162091f, +0.1406001f, +0.1085965f, +0.3488827f, +0.0901313f, +0.3705714f,
  +0.0832241f, -0.8139610f, -0.2470748f, -0.8138351f, -0.1018144f, +0.1819688f, +0.0159855f, +0.3211480f,
  -0.1696885f, +0.0338243f, -0.6752402f, +0.0125860f, +0.2620981f, +0.1364382f, +0.1704714f, +0.2034777f,
  -0.6064823f, +0.1712275f, +0.0451019f, -0.4704737f, -0.0235995f, +0.0039556f, +0.3176806f, +0.1549701f,
  -0.2291193f, -0.4643699f, +0.0237465f, +0.0697943f, +0.0181541f, +0.2082108f, -0.1509110f, +0.1287297f,
  -0.3954729f, -0.2452841f, +0.1713411f, -0.2018712f, +0.5026962f, +0.1892593f, -0.0433963f, -0.2420434f,
  -0.3417123f, +0.2337578f, +0.3642851f, -0.1374416f, -0.3725263f, +0.0722096f, -0.4513719f, -0.0046812f,
  +0.1336036f, -0.1883765f, +0.1007264f, +0.1899714f, +0.4274449f, -0.1400061f, +0.0739577f, +0.2673741f,
  -0.1372120f, +0.0812523f, -0.0650698f, -0.2435297f, +0.3766327f, +0.2973485f, +0.1614771f, -0.2501179f,
  -0.1903051f, +0.2171259f, -0.2772736f, +0.1169378f, +0.4731433f, +0.1071483f, +0.1755697f, -0.6240293f,
  -0.3274234f, -0.0410616f, +0.0207786f, +0.1335245f, -0.1211941f, +0.3489713f, +0.1654399f, -0.2518733f,
  -0.2389960f, -0.0719348f, +0.1639662f, +0.2951843f, +0.1820220f, -0.0420609f, +0.2290077f, -0.4488816f,
  -0.0660518f, +0.0690610f, -0.1188180f, +0.0074646f, +0.2694542f, -0.1813610f, +0.0857700f, -0.2006649f,
  +0.0504756f, +0.3769605f, +0.0011803f, +0.0193582f, -0.1749175f, +0.2200505f, -0.0493132f, +0.0903729f,
  -0.4192726f, -0.2098367f, +0.0673082f, -0.3301230f, -0.0074145f, -0.0741644f, -0.1919997f, -0.0068849f,
  -0.2630501f, +0.1633251f, -0.7179123f, +0.0057311f, +0.0694152f, +0.1580105f, -0.3621699f, +0.0082376f,
  +0.2181875f, +0.0004363f, -0.0068778f, -0.0216612f, -0.3114539f, +0.1770258f, -0.1199484f, +0.0337702f,
  -0.4526146f, -0.3188102f, -0.1304184f, -0.0011959f, -0.0330692f, +0.3239316f, +0.1878767f, +0.1298666f,
  -0.0293479f, +0.0776430f, -0.5746708f, +0.0964582f, -0.1768843f, +0.1274349f, +0.3436194f, +0.0094536f,
  +0.1650907f, -0.1418920f, +0.1619257f, -0.2346566f, +0.0770851f, +0.2151048f, +0.2130254f, -0.0090326f,
  -0.2812077f, -0.2811198f, -0.1040454f, +0.3517744f, +0.4072386f, -0.1817980f, -0.2002270f, -0.3494440f,
  +0.0564912f, +0.0129319f, +0.0106312f, -0.2473429f, +0.2645704f, -0.1241595f, -0.2003489f, +0.3244602f,
  +0.3553293f, +0.0383098f, +0.1178541f, -0.0276693f, -0.1962176f, +0.0401811f, -0.0568003f, -0.3095289f,
  -0.0827329f, +0.0630041f, +0.0436344f, +0.1484974f, -0.1580132f, +0.2485537f, -0.1336560f, -0.2472396f,
  -0.1399624f, -0.2472703f, -0.3462426f, +0.0758058f, -0.2094145f, -0.1280484f, -0.0682112f, -0.4268752f,
  -0.1941859f, +0.0858515f, +0.0678452f, +0.1132639f, +0.0108292f, -0.1005471f, +0.3143499f, -0.4723338f,
  +0.2414284f, +0.0206944f, +0.0432835f, -0.0050844f, -0.3163396f, +0.0778157f, +0.4228928f, -0.2247583f,
  -0.0808424f, -0.2739734f, +0.0461904f, +0.1100184f, -0.3602225f, +0.1405702f, +0.1016812f, +0.0507418f
);

const float biases[4] = float[4](
  -0.0408230f, -0.1187482f, +0.0171854f, +0.0690265f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer18 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1152262f, +0.7756266f, +0.1425335f, +0.2307010f, -0.3959322f, +0.4401142f, +0.1263979f, +0.0250781f,
  -0.1762367f, +0.5191975f, +0.5159737f, +0.2025801f, -0.0461689f, +0.1453781f, +0.1714269f, -0.1844604f,
  -0.4426030f, +0.0197033f, +0.2805577f, -0.0279586f, -0.0289868f, +0.1004140f, -0.1507816f, -0.2466264f,
  +0.5241942f, +0.6417080f, +0.0254516f, +0.0314340f, -0.1877824f, +0.0876466f, -0.0575138f, -0.0632891f,
  +0.2510195f, +0.0769505f, +0.7529480f, -0.1043639f, -0.3028967f, -0.7282033f, -0.1305119f, +0.2655290f,
  -0.3748375f, +0.1839979f, +0.3975989f, -0.1510129f, -0.3991582f, +0.2134337f, -0.0320753f, +0.3571393f,
  -0.2152153f, +0.1007899f, -0.0548439f, -0.0787887f, -0.1304935f, +0.1947438f, +0.0071445f, -0.1008813f,
  -0.1345833f, +0.0556119f, -0.0280924f, -0.0766654f, -0.3464403f, -0.2164842f, +0.1436116f, -0.0773964f,
  -0.0530248f, +0.1130106f, -0.0877522f, -0.3286370f, -0.4085105f, +0.4302060f, +0.1500013f, +0.3598416f,
  -0.1521850f, -0.1365063f, +0.0005847f, +0.1217302f, +0.0093972f, -0.0293387f, +0.0212366f, -0.2316793f,
  -0.1912110f, -0.0710188f, +0.0433451f, +0.0153107f, +0.1362735f, -0.0579379f, +0.0190416f, -0.2390362f,
  +0.0974648f, +0.1332433f, -0.0982758f, +0.1166330f, +0.0701260f, -0.0485223f, +0.1344547f, -0.1185765f,
  -0.0317049f, +0.1158040f, -0.0701364f, +0.0439743f, -0.1280738f, +0.1774929f, +0.0877576f, +0.0422353f,
  -0.1220323f, -0.0404332f, -0.1705050f, -0.0452504f, +0.2314691f, +0.0521648f, -0.1268288f, -0.0158499f,
  +0.0584063f, +0.0192105f, -0.3621747f, +0.0250311f, +0.1713069f, +0.0048397f, -0.0001954f, +0.0717200f,
  +0.0456132f, -0.0393063f, -0.0521859f, -0.0686135f, -0.1205947f, +0.1635009f, -0.0463158f, +0.0067892f,
  -0.0171413f, +0.0221058f, -0.1524807f, +0.0155332f, -0.1182639f, +0.1672408f, -0.0017531f, +0.2428559f,
  -0.1353799f, -0.0257241f, -0.1697861f, -0.0869950f, -0.0402222f, -0.0352904f, +0.0180781f, +0.0018243f,
  +0.0221819f, +0.0277639f, +0.2325922f, -0.4517600f, -0.4998161f, +0.1124835f, +0.0800795f, +0.1393063f,
  +0.0800422f, -0.3084452f, +0.1645606f, -0.0849044f, -0.0137414f, +0.3623028f, +0.1660967f, -0.2837539f,
  +0.1316559f, -0.2411239f, -0.5044146f, +0.3331797f, -0.2267400f, -0.0045664f, -0.0931559f, -0.2373052f,
  -0.1920269f, -0.0129569f, +0.3501143f, +0.1136858f, -0.0578960f, +0.1114338f, +0.0216627f, +0.3520516f,
  -0.1272949f, +0.3471685f, +0.1111616f, +0.6741573f, -0.4105317f, -0.0259655f, +0.5363199f, +0.1020915f,
  +0.0610665f, +0.1482645f, +0.2308216f, +0.1480868f, -0.3957556f, -0.0289677f, -0.6896914f, -0.5814872f,
  +0.0129279f, -0.2144736f, +0.1518201f, -0.0236180f, +0.1093721f, -0.0799664f, -0.2788437f, +0.0718502f,
  +0.0737449f, +0.0340005f, +0.2103966f, +0.1441878f, -0.0298305f, -0.0133042f, +0.1583891f, -0.2180445f,
  -0.0781548f, +0.0536457f, +0.3403038f, -0.0247068f, -0.1745225f, -0.4104263f, -0.5322845f, -0.2860587f,
  -0.2074450f, -0.2344879f, -0.1980019f, +0.3319281f, -0.1225596f, -0.1251786f, +0.0345323f, +0.0222436f,
  -0.2563302f, -0.1445279f, +0.1340059f, +0.0946590f, +0.3182561f, -0.5389357f, +0.4443090f, +0.2020239f,
  +0.1620662f, +0.0942556f, +0.2053137f, -0.0932000f, +0.0932332f, -0.1814139f, +0.1187996f, +0.2500367f,
  -0.1603303f, +0.0609499f, -0.0502322f, -0.0170884f, +0.0945041f, -0.0916549f, +0.2601910f, +0.1734549f,
  +0.0115265f, -0.4626376f, +0.0308946f, -0.4372649f, +0.3740300f, +0.1521130f, -0.3119885f, +0.0470433f,
  +0.3579516f, -0.1040081f, -0.9350541f, +0.2689432f, +0.1578657f, +0.6159013f, +0.3944946f, +0.2882127f,
  +0.2832493f, -0.3025905f, -0.1037001f, +0.1183806f, -0.3667170f, +0.1661669f, -0.3306597f, +0.3423521f,
  +0.3271487f, -0.3166733f, +0.0895044f, +0.2035158f, -0.1889300f, +0.2314422f, -0.3541861f, +0.7758276f,
  +0.2136514f, -0.2276255f, -0.1375385f, +0.3458593f, -0.1994955f, +0.4629825f, -0.0740072f, +0.4300801f
);

const float biases[4] = float[4](
  -0.0298803f, +0.0203422f, -0.0428778f, +0.0674586f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer19 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.4250560f, -0.4074340f, +0.2031185f, -0.1584231f, -0.1971231f, -0.1296775f, -0.0045247f, +0.2170483f,
  -0.5678596f, -0.2839616f, +0.2947246f, +0.0396419f, +0.6349919f, -0.0622140f, +0.5305551f, -0.3237027f,
  -0.0538069f, +0.0697595f, +0.2696657f, -0.1490569f, +0.0639362f, -0.0141852f, +0.1875959f, -0.0241230f,
  +0.5063718f, +0.1618278f, -0.4183164f, -0.0065953f, +0.2100959f, -0.0804195f, -0.2799217f, -0.0808340f,
  -0.0065243f, -0.0012084f, -0.0530882f, +0.1733383f, -0.3210769f, +0.2568007f, +0.3386432f, -0.1155967f,
  -0.2626706f, +0.0741054f, +0.0496261f, +0.0959040f, +0.1040018f, +0.0242434f, +0.2649326f, -0.1293906f,
  -0.0563449f, +0.1351719f, +0.0324859f, +0.1192944f, +0.1406273f, +0.2139803f, -0.0728813f, +0.1681369f,
  -0.1782934f, +0.0979518f, +0.0869759f, -0.1013523f, -0.4998125f, +0.0179164f, -0.4115200f, +0.2233648f,
  -0.0532247f, +0.1879523f, +0.1754592f, +0.3091552f, -0.0167217f, +0.1520988f, -0.1488174f, -0.0023616f,
  +0.2068082f, +0.0996452f, -0.0262003f, +0.2403590f, +0.0801247f, -0.1533208f, -0.4137053f, +0.2525179f,
  -0.1042847f, -0.2661885f, +0.0965295f, +0.1259503f, +0.1961462f, -0.0321230f, -0.5087911f, +0.1818697f,
  +0.1841673f, +0.2810954f, +0.0830023f, +0.1356118f, +0.2613419f, -0.1477474f, -0.1140082f, -0.1095589f,
  -0.1365667f, -0.3403556f, -0.0604540f, -0.3019835f, +0.2186625f, +0.1517347f, +0.1801000f, -0.2767192f,
  +0.2595874f, +0.1833931f, -0.3009024f, -0.1946530f, +0.5395210f, +0.2885214f, +0.5545492f, -0.2940927f,
  +0.0655761f, +0.1232167f, +0.4064447f, -0.0468201f, -0.0052577f, +0.0139107f, -0.2745658f, -0.4224448f,
  +0.0870132f, -0.1474425f, +0.1172249f, +0.1230718f, -0.3071692f, +0.0410278f, -0.2786845f, +0.4646280f,
  +0.0606093f, -0.2983163f, -0.1535676f, -0.3781110f, -0.2655667f, +0.0122971f, -0.2649815f, +0.0340408f,
  +0.0774821f, -0.0258402f, -0.2204912f, +0.1529173f, +0.2687576f, -0.2464426f, +0.4176187f, -0.0560653f,
  -0.3878451f, +0.0121260f, -0.2953611f, +0.1883470f, -0.1580767f, +0.1308702f, +0.0337419f, -0.1772872f,
  +0.0018846f, -0.1142309f, -0.0329533f, +0.1514544f, -0.0641922f, -0.0730838f, -0.5111841f, -0.3720920f,
  -0.5516856f, -0.3958565f, -0.0604993f, +0.0001003f, -0.2312415f, +0.0672545f, +0.2707560f, -0.0391256f,
  +0.0447137f, -0.1204507f, -0.1336592f, -0.0041911f, +0.1054354f, +0.0943395f, -0.2757215f, +0.0099098f,
  +0.2999941f, -0.0679747f, +0.1212822f, -0.3580754f, -0.5571233f, -0.0333008f, -0.4678380f, -0.0674938f,
  -0.3193625f, -0.1161194f, -0.1500190f, -0.1325367f, -0.4118187f, -0.1104095f, +0.0856398f, +0.2207425f,
  -0.2960688f, +0.1600009f, +0.0384778f, +0.2134244f, +0.0130982f, -0.1256852f, -0.1113778f, +0.1867661f,
  +0.2712794f, +0.7236447f, -0.1096017f, -0.0571762f, -0.8886814f, +0.0108121f, -0.2581847f, +0.4898247f,
  -0.0445636f, +0.4675598f, +0.1690250f, -0.0288740f, -0.0433627f, -0.0657546f, +0.0592440f, +0.2339282f,
  -0.3969653f, -0.6536130f, +0.1424983f, +0.2349294f, +0.5429420f, -0.0570897f, -0.1130153f, -0.2656072f,
  +0.0639154f, -0.2337957f, +0.2292397f, +0.1085053f, -0.2220770f, +0.1525046f, +0.0434532f, -0.2251772f,
  -0.3219164f, +0.0998348f, -0.0521164f, +0.2881230f, +0.0501299f, -0.0485346f, +0.0789425f, -0.0996194f,
  -0.0759066f, -0.2430707f, +0.2798984f, -0.5765218f, +0.2353226f, +0.0019432f, -0.3533812f, +0.2453887f,
  +0.5818919f, -0.1723449f, +0.2397527f, -0.7260157f, +0.0456863f, +0.1269181f, -0.3504310f, +0.4812458f,
  +0.3989956f, +0.2829532f, +0.5604526f, -0.5272890f, +0.0357591f, -0.1922072f, +0.7465557f, -0.0568990f,
  -0.3577547f, -0.4652346f, -0.3007046f, +0.8575947f, +0.6574734f, -0.0900486f, -0.4066359f, -0.3030921f,
  +0.3567541f, +0.0684618f, -0.2880251f, -0.1874275f, -0.3876828f, +0.0044055f, -0.2495651f, -0.0010828f,
  +0.5035029f, +0.0937091f, -0.3127745f, +0.0016994f, -0.2097727f, -0.0965503f, +0.1800233f, -0.2971573f
);

const float biases[4] = float[4](
  -0.0115407f, -0.0776773f, -0.0439510f, -0.2427595f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer19 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0104725f, +0.0687014f, -0.1387755f, +0.0726184f, -0.0569420f, +0.0745266f, -0.1718943f, +0.1898596f,
  +0.1434303f, -0.0004528f, -0.1690754f, +0.1451802f, +0.1680939f, -0.0451654f, -0.0218506f, -0.1089212f,
  -0.1032694f, +0.0694535f, +0.0269691f, +0.0080140f, -0.0602853f, -0.0366003f, +0.0485479f, -0.1508138f,
  -0.0216179f, +0.1395086f, -0.2240431f, -0.2941224f, +0.0753523f, +0.1053021f, +0.1398648f, -0.3781701f,
  +0.4140065f, +0.2976798f, -0.0830068f, +0.2780145f, -0.0801241f, +0.4227690f, +0.0706057f, -0.1814152f,
  -0.1105771f, -0.0637161f, -0.0752393f, -0.0521033f, -0.2214016f, +0.0846636f, -0.0791032f, +0.0035697f,
  +0.1509543f, -0.0039987f, -0.1510961f, -0.0440674f, -0.1376598f, +0.1646085f, -0.1787446f, +0.1599968f,
  -0.0121700f, +0.0440334f, -0.0516882f, -0.0220176f, -0.2237681f, +0.1441552f, +0.0347777f, +0.2473196f,
  -0.1090584f, +0.0364089f, -0.0369739f, +0.0042602f, -0.0963199f, -0.0304503f, +0.0073588f, -0.0975859f,
  +0.0763878f, -0.0340680f, -0.1584768f, +0.0159395f, +0.0068445f, +0.0018327f, +0.1778376f, +0.0485417f,
  +0.1344722f, +0.1804546f, +0.1488776f, -0.0909102f, +0.2199345f, +0.0585495f, -0.1662139f, -0.0492356f,
  -0.1429609f, +0.0404680f, -0.3765439f, -0.0220536f, +0.0010083f, +0.0621216f, +0.3487444f, +0.0456558f,
  -0.0093447f, +0.0017690f, +0.1108006f, +0.0041139f, +0.0769064f, -0.0114230f, +0.1023692f, -0.2440732f,
  +0.0726886f, +0.0810160f, -0.2354967f, -0.2054364f, -0.2084967f, -0.1071948f, -0.3672176f, -0.2326800f,
  +0.0354751f, +0.2869786f, -0.2869926f, -0.1132086f, -0.0759917f, +0.2025921f, -0.2110211f, -0.0863719f,
  +0.0363601f, -0.0345837f, -0.0349796f, +0.0219234f, +0.0834892f, +0.1217244f, +0.0413192f, +0.0515278f,
  +0.0344117f, -0.1974186f, -0.1110337f, +0.1197357f, +0.1322337f, +0.1353712f, +0.1687133f, -0.1028229f,
  -0.1507127f, -0.0905878f, +0.0342300f, +0.1173554f, +0.0610264f, -0.0083340f, +0.1388251f, +0.2536243f,
  -0.2903634f, -0.1227971f, -0.1556713f, -0.1582348f, +0.3748222f, +0.4672137f, -0.5369828f, +0.1107640f,
  -0.4501802f, -0.7224158f, -0.1319201f, +0.2433141f, -0.7838425f, +0.1423055f, -0.0675456f, -0.1068034f,
  -0.1641535f, +0.3078333f, +0.2506947f, -0.3003806f, -0.6605982f, -0.2605578f, +0.3448079f, -0.0962630f,
  -0.1904844f, +0.1483685f, -0.0323591f, +0.1560574f, -0.1598663f, +0.1926683f, +0.1325648f, +0.0487874f,
  +0.7351177f, -0.2928328f, -0.2175591f, +0.2727633f, -0.0860910f, -0.2747170f, -0.0439325f, -0.1391733f,
  -0.0789482f, +0.0579774f, -0.3088567f, -0.3485530f, +0.3384215f, -0.0545067f, -0.1363300f, +0.5377905f,
  -0.3253474f, -0.2637173f, +0.2378492f, -0.0017533f, -0.2260170f, +0.0570628f, +0.2457512f, +0.0945009f,
  +0.3259495f, +0.0157009f, -0.1173002f, +0.2101907f, +0.1919953f, -0.1476219f, +0.0822591f, +0.0747809f,
  +0.1723106f, +0.0332298f, +0.2879235f, -0.1587892f, -0.3191859f, -0.0493610f, -0.1512582f, -0.0663029f,
  -0.0799876f, +0.3136659f, +0.2087940f, -0.1437595f, -0.0747508f, +0.0922137f, +0.0494711f, -0.0317050f,
  -0.2166281f, +0.1000282f, +0.0384144f, -0.1887019f, +0.2045918f, -0.1389543f, -0.0497212f, +0.0492475f,
  -0.1339203f, +0.0219771f, +0.0697061f, +0.0982774f, +0.3378149f, +0.0543908f, -0.0630413f, -0.0440792f,
  +0.1057049f, -0.4733926f, +0.3798504f, -0.0393924f, -0.4541273f, +0.3734411f, -0.1549895f, +0.1951731f,
  +0.1609948f, -0.0751070f, -0.0098181f, +0.2848738f, +0.0570846f, +0.1917187f, +0.0080681f, +0.3539679f,
  +0.1835764f, +0.3203996f, +0.1504634f, +0.0530137f, -0.0830498f, -0.1854012f, +0.2500143f, -0.0971654f,
  +0.7941341f, -0.3206610f, +0.4044831f, -0.1499294f, -0.3060012f, +0.3061194f, -0.3493350f, +0.5793267f,
  +0.0195951f, -0.5356937f, +0.1424518f, +0.1669021f, +0.2688228f, +0.1320429f, -0.0620785f, +0.2796170f,
  +0.1734162f, +0.2743134f, +0.0265099f, +0.1889184f, +0.3451979f, -0.0159392f, -0.0603043f, +0.2555542f
);

const float biases[4] = float[4](
  -0.7209331f, -0.4856538f, -0.1551925f, -0.0240129f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer20 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1569391f, +0.1971895f, +0.1126631f, +0.1872868f, +0.5239968f, +0.6815169f, -0.2218240f, -0.1278810f,
  +0.0750163f, +0.4583850f, -0.6877179f, -0.1003077f, -0.3696406f, +0.2666447f, -0.1672439f, +0.0088288f,
  -0.1914840f, +0.4995329f, -0.1660583f, -0.0733548f, -0.3204796f, -0.0111173f, -0.0162486f, -0.0808373f,
  +0.0451338f, +0.2328715f, -0.0764622f, -0.6415977f, +0.1972239f, -0.0294684f, -0.1972955f, -0.1414533f,
  -0.0183773f, -0.0627557f, -0.2714702f, -0.1150953f, -0.7902919f, +0.0705964f, -0.5418066f, +0.0577099f,
  -0.4520796f, +0.0460250f, -0.1589246f, +0.2050022f, -0.3666784f, +0.1072663f, +0.1325489f, +0.2149569f,
  +0.0307674f, -0.2618569f, +0.1907754f, -0.2545968f, -0.2180779f, +0.0431227f, -0.0883791f, +0.2458153f,
  +0.3038421f, -0.2059330f, +0.0275876f, -0.1171124f, -0.9096323f, -0.0498414f, +0.2653077f, +0.2101996f,
  -0.1381583f, +0.2386305f, -0.2136263f, +0.2286286f, -0.4993337f, +0.3679460f, +0.0794113f, -0.0279264f,
  -0.1767885f, -0.1676042f, -0.3517236f, -0.0117047f, -0.0754372f, -0.3817018f, +0.2574890f, +0.0921258f,
  -0.2684006f, -0.1465905f, -0.3693052f, +0.0594122f, -0.0468055f, -0.1517525f, +0.2052212f, +0.1521496f,
  +0.2480291f, +0.0097895f, -0.0457906f, +0.1555323f, +0.0657513f, +0.0077964f, +0.2795404f, +0.5559185f,
  +0.4009965f, -0.2455267f, -0.0990737f, +0.2694028f, +0.0852687f, -0.3348939f, +0.1565942f, -0.0918883f,
  -0.0554281f, -0.5733202f, +0.3403331f, +0.2806517f, -0.0827061f, +0.1490668f, +0.1396594f, -0.1642652f,
  -0.2223562f, +0.0725125f, +0.0984069f, -0.0134752f, -0.1174576f, +0.1431943f, +0.0266008f, +0.5275617f,
  +0.1672771f, -0.1721908f, +0.0580726f, +0.5835626f, -0.0205455f, -0.1461467f, -0.1159010f, -0.2596100f,
  -0.1358847f, -0.0804807f, +0.0718033f, -0.0846988f, -0.2666081f, -0.0920771f, -0.0926233f, -0.2864926f,
  -0.0670647f, +0.0716337f, -0.2181596f, -0.0530342f, +0.5153160f, +0.0175708f, +0.0515981f, +0.1407366f,
  +0.1357734f, +0.2382503f, +0.1113324f, -0.4129177f, +0.2820084f, +0.2620372f, -0.2243038f, +0.2628461f,
  +0.1441286f, +0.2753289f, +0.1760291f, -0.3080700f, +0.3673291f, -0.0319576f, -0.1779189f, -0.3576061f,
  +0.0494635f, +0.1465060f, +0.0169590f, -0.0455564f, +0.0510202f, -0.0073457f, +0.0915964f, +0.0840111f,
  +0.2903131f, +0.0245209f, -0.0864993f, -0.3101329f, +0.0527071f, +0.3993639f, +0.0148104f, +0.0523417f,
  +0.2421388f, +0.0272470f, -0.1714635f, -0.7502142f, -0.4499912f, -0.2349459f, -0.3075357f, +0.0694613f,
  -0.1670517f, -0.1505104f, +0.2165969f, -0.3162022f, +0.0428924f, -0.1046690f, +0.0760122f, -0.0738487f,
  -0.1065106f, -0.1535869f, -0.0225758f, -0.1881915f, +0.1676898f, +0.6243415f, +0.0718947f, +0.0028764f,
  -0.0782411f, -0.0644020f, +0.1449852f, -0.3118351f, -0.1231453f, -0.0950240f, +0.2662190f, +0.0423994f,
  -0.4870465f, +0.0697997f, +0.1573549f, -0.1166096f, +0.2887664f, +0.0874162f, +0.3475181f, +0.2227499f,
  +0.2059770f, +0.0134141f, +0.3366852f, +0.1679802f, -0.4155676f, -0.4363171f, +0.2169977f, +0.4469230f,
  +0.1902751f, +0.0508282f, +0.2095361f, +0.2427646f, -0.0084496f, +0.1177858f, +0.1166904f, -0.0196635f,
  +0.2689019f, +0.2521248f, +0.0644536f, +0.0187538f, -0.1568954f, -0.2656142f, +0.2100713f, +0.1220317f,
  +0.0832788f, +0.0239939f, +0.1048727f, +0.2491141f, +0.2112986f, +0.3547076f, -0.0348613f, +0.2040824f,
  +0.2461085f, +0.9674254f, +0.2987180f, -0.0729528f, -0.1514047f, +0.3009479f, +0.1012284f, -0.1589880f,
  -0.1377311f, +0.0089842f, +0.1228332f, -0.1058266f, +1.0069114f, -0.0741196f, +0.1635710f, -0.1185103f,
  -0.0682509f, +0.1393362f, +0.2834661f, -0.1079298f, +0.0334979f, +0.2131731f, +0.0075381f, -0.3511913f,
  +0.0844949f, -0.2009254f, +0.1355524f, +0.0256716f, +0.1472919f, -0.0068550f, +0.1237861f, -0.1878901f,
  +0.1903973f, -0.1505604f, -0.0455518f, -0.1714725f, -0.2256010f, -0.2802725f, +0.1111034f, -0.0446225f
);

const float biases[4] = float[4](
  +0.0124810f, +0.0081836f, -0.0874491f, -0.0237635f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer20 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1594100f, +0.0328148f, +0.0076999f, +0.6818601f, -0.0644426f, +0.1446059f, +0.0049104f, -0.1674448f,
  +0.0705549f, +0.3917411f, +0.3492555f, +0.0192543f, +0.2156380f, -0.1167518f, -0.3207280f, -0.1458003f,
  +0.1695479f, +0.4441392f, -0.0004292f, -0.0334922f, +0.1293739f, -0.1605907f, -0.1054184f, +0.1711583f,
  -0.1300893f, -0.1955557f, -0.2975467f, +0.4111896f, -0.0990531f, +0.5335760f, -0.0415511f, +0.1430308f,
  +0.2956268f, -0.1759052f, -0.2463002f, +0.2666530f, -0.4855274f, +0.2768844f, -0.3532300f, +0.0840092f,
  -0.1046693f, +0.0294271f, -0.2025968f, -0.0607774f, +0.0803717f, -0.0124167f, -0.2137232f, +0.2709436f,
  +0.1074702f, -0.1324480f, -0.1418820f, -0.1106068f, -0.4485471f, +0.5688305f, -0.3127347f, -0.1535095f,
  -0.1685502f, +0.0896364f, -0.4396937f, +0.0871704f, -0.2301991f, +0.0332151f, -0.0939905f, -0.0375821f,
  -0.2575423f, +0.0691607f, +0.0224946f, -0.0329991f, +0.0301683f, +0.1091634f, -0.1467330f, +0.0334963f,
  +0.0839382f, +0.2519360f, +0.1108204f, -0.3389458f, -0.0174487f, +0.1438745f, -0.1125695f, +0.1035834f,
  +0.0061106f, -0.0616501f, +0.1007714f, -0.2999336f, +0.1685492f, -0.2716037f, +0.0342217f, -0.2681143f,
  -0.0689768f, +0.0245298f, +0.0554618f, -0.2064509f, +0.0892355f, +0.0679902f, -0.0037359f, -0.1242459f,
  +0.1188861f, -0.0531631f, -0.0861518f, -0.3484898f, +0.1833668f, +0.1125673f, -0.1320755f, +0.1439344f,
  +0.2258464f, -0.1167288f, -0.0926273f, -0.3179629f, +0.2367345f, +0.2257359f, +0.1087597f, -0.0528729f,
  +0.0066779f, -0.2770229f, +0.0138410f, +0.0127560f, +0.5255959f, -0.1061702f, -0.1132371f, -0.1220717f,
  -0.0654285f, +0.0601631f, +0.0521821f, -0.1926068f, +0.0286419f, +0.1251663f, +0.0388045f, +0.1434303f,
  +0.0784092f, -0.0345345f, -0.0605046f, -0.2032815f, +0.2047177f, -0.0697083f, +0.4201544f, +0.0889629f,
  -0.2453300f, +0.0841971f, +0.1735379f, -0.1633132f, -0.0082214f, -0.0369518f, -0.0336708f, +0.1145474f,
  -0.0522842f, -0.3863136f, -0.0526803f, +0.1408300f, -0.0504044f, -0.0009165f, +0.0049341f, +0.0584784f,
  +0.1513625f, -0.1808522f, -0.0166521f, +0.1005805f, +0.1842682f, +0.2588703f, +0.1766396f, +0.0172420f,
  -0.0435560f, -0.0122128f, +0.0508686f, +0.0523808f, +0.5189644f, +0.0214696f, -0.0779500f, +0.4642356f,
  +0.0166978f, +0.2271311f, +0.0867992f, +0.2790711f, +0.0255636f, +0.2634521f, +0.3153330f, -0.2820758f,
  -0.1238045f, +0.4084592f, +0.0594220f, +0.2875618f, -0.1639432f, +0.3510548f, +0.3869006f, +0.0845721f,
  -0.1058817f, +0.3286172f, +0.0316973f, -0.0134702f, -0.2529480f, +0.1147853f, -0.1013497f, +0.3957144f,
  -0.2679033f, -0.0431832f, +0.0388449f, +0.0351547f, -0.3398982f, +0.0993738f, +0.2004881f, -0.5518109f,
  -0.5252914f, +0.1087691f, +0.4190031f, +0.1975184f, +0.0410110f, +0.1757497f, +0.1331463f, -0.1304514f,
  -0.1512435f, +0.2164708f, +0.0118768f, +0.4423390f, +0.0052613f, +0.1005104f, -0.2991342f, -0.2879854f,
  -0.2135276f, +0.4343313f, -0.5740585f, -0.0317918f, +0.0376738f, +0.1107367f, -0.2672008f, -0.0139929f,
  -0.1904415f, +0.5111791f, -0.3793270f, -0.1484969f, -0.2971115f, +0.2792993f, -0.1318231f, -0.2409240f,
  -0.2833700f, -0.0733579f, -0.1206492f, +0.1846249f, -0.0339755f, +0.2093496f, -0.1323627f, +0.1918514f,
  -0.0159433f, +0.2173298f, -0.6951315f, -0.0573262f, +0.1413509f, +0.4610306f, -0.5017860f, -0.0810256f,
  -0.4628613f, +0.1220119f, -0.2673097f, -0.7476022f, -0.0666215f, +0.0447998f, -0.5167445f, -0.4046384f,
  -0.0802930f, +0.0095972f, +0.2208173f, -0.0213404f, +0.3866329f, +0.0491411f, +0.0233271f, +0.2740875f,
  -0.0440958f, -0.0045838f, -0.2878466f, -0.1969708f, +0.1965413f, +0.5780380f, -0.2055141f, +0.3982925f,
  +0.1509016f, +0.1136623f, -0.3499973f, -0.3301894f, -0.0889143f, +0.0346049f, +0.2225806f, +0.3580422f,
  -0.1461288f, -0.0672601f, +0.0845795f, -0.0050531f, -0.6134553f, +0.0847273f, +0.0435291f, +0.3874019f
);

const float biases[4] = float[4](
  +0.0027463f, +0.0330204f, +0.0808728f, -0.0969723f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer21 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0802349f, +0.4607727f, +0.0032225f, -0.2064070f, -0.0706308f, -0.0363931f, +0.1722003f, -0.1977466f,
  -0.1204519f, +0.2781159f, -0.0821091f, +0.2972252f, +0.4865876f, +0.0155236f, -0.2644702f, +0.0966370f,
  -0.3174009f, -0.0849451f, +0.1279417f, +0.2353469f, -0.2884268f, -0.4244284f, -0.5682633f, -0.3079853f,
  +0.0677308f, +0.1937345f, -0.0867176f, +0.1144355f, -0.0944958f, -0.1853425f, +0.2079017f, +0.1670073f,
  -0.4771081f, -0.0822308f, -0.0593258f, +0.4005925f, +0.2913547f, +0.3101099f, +0.5298202f, +0.0543682f,
  -0.1780802f, -0.0749489f, +0.2631486f, +0.1642105f, -0.0123651f, +0.1161005f, -0.7053058f, -0.0922967f,
  -0.1422754f, +0.1187424f, +0.0626676f, +0.1771289f, +0.1867852f, +0.0100588f, +0.1528755f, +0.0873552f,
  -0.0047619f, -0.1579540f, +0.3665631f, +0.0091695f, -0.0329249f, +0.2293108f, +0.1414523f, +0.4207805f,
  +0.4127223f, +0.2104667f, -0.3589309f, +0.2109039f, +0.2779170f, -0.1364511f, +0.1270369f, -0.0066887f,
  -0.0985962f, +0.2347167f, -0.1121188f, -0.0182457f, +0.0486830f, -0.2752922f, -0.0775227f, +0.1408782f,
  +0.2293616f, +0.0963059f, +0.1618437f, +0.1255134f, -0.1762247f, -0.0158274f, +0.0380547f, +0.1101616f,
  +0.2158647f, +0.3043028f, -0.0663047f, -0.0983111f, -0.2157009f, +0.1900267f, +0.0724654f, +0.1680521f,
  +0.3849824f, -0.0480225f, +0.2582373f, -0.0763719f, -0.1403573f, +0.0372753f, -0.1555554f, +0.0229548f,
  -0.0220546f, -0.2837035f, -0.0411372f, -0.0790513f, +0.1258678f, -0.0600767f, +0.1935812f, +0.2351316f,
  -0.0951181f, +0.4173438f, +0.0418821f, +0.3272430f, +0.0291553f, +0.2414002f, +0.1744166f, +0.7710467f,
  -0.2174204f, -0.0736996f, +0.0620829f, -0.4250282f, -0.0827700f, +0.3033108f, +0.3114785f, -0.1479473f,
  -0.2128899f, +0.0974191f, +0.2515124f, +0.2439822f, +0.2045307f, -0.0260658f, +0.4646458f, -0.0886220f,
  -0.0414025f, +0.1880935f, +0.2670326f, +0.1754443f, +0.1525927f, -0.1438374f, +0.0056970f, +0.0005709f,
  +0.0948886f, -0.2096948f, +0.1538991f, -0.0771539f, -0.0486984f, +0.2365775f, +0.1791673f, -0.1314958f,
  -0.1422264f, -0.2221189f, -0.2523765f, -0.0144822f, +0.2492787f, +0.1015427f, -0.0287143f, -0.3481047f,
  -0.4853925f, -0.2099235f, -0.0552269f, +0.3718319f, +0.2301075f, -0.0361953f, +0.0702983f, -0.3714527f,
  +0.2095090f, -0.1025734f, +0.0056449f, +0.1126445f, -0.1486923f, +0.0627720f, -0.1702777f, +0.2308604f,
  +0.2121133f, +0.5023100f, +0.3957728f, -0.3216303f, -0.4696216f, -0.1385635f, -0.2444442f, +0.3214824f,
  +0.0244871f, -0.0788215f, -0.1773269f, -0.0358471f, -0.3650951f, +0.1646181f, -0.0710619f, -0.2290392f,
  +0.2385450f, +0.0774668f, +0.1752457f, -0.1113884f, -0.1208325f, -0.1409302f, -0.3185192f, -0.2024889f,
  +0.4324408f, +0.1535351f, +0.3137648f, -0.0597850f, -0.2279094f, +0.0916124f, -0.1298633f, +0.1955781f,
  -0.0058645f, -0.1536092f, +0.1087843f, +0.0004746f, -0.1948453f, +0.1527707f, -0.0758234f, -0.2937491f,
  -0.0923546f, +0.1583098f, +0.1293964f, -0.1408151f, +0.3020883f, +0.0139777f, +0.2264706f, -0.4928057f,
  +0.3524044f, -0.0249527f, +0.2588459f, -0.2192543f, -0.4063095f, +0.4570302f, +0.2655706f, -0.4780398f,
  -0.5090171f, -0.1491444f, +0.0071854f, +0.0856614f, -0.3815418f, +0.2160004f, -0.1779473f, -0.0089781f,
  -0.4556335f, +0.0340061f, +0.5716393f, +0.3226025f, +0.2486953f, -0.1122286f, +0.0642428f, +0.2685381f,
  +0.2593953f, +0.2297693f, +0.4838816f, -0.4813436f, -0.1284134f, +0.1165297f, -0.1857020f, -0.2269902f,
  +0.3217326f, +0.5071442f, +0.1006552f, +0.1120255f, -0.3967603f, +0.2235205f, -0.0259125f, +0.2384042f,
  -0.2368025f, -0.0848843f, -0.0761137f, +0.2186818f, -0.0089427f, -0.0843155f, -0.0121951f, +0.0567905f,
  +0.0438604f, +0.0464270f, -0.0840225f, -0.1416732f, -0.0011875f, -0.0882935f, +0.2428721f, -0.1277596f,
  -0.0169518f, -0.0907265f, +0.0516762f, +0.0128264f, +0.2308675f, -0.0795553f, -0.0879276f, +0.0173139f
);

const float biases[4] = float[4](
  -0.0658682f, +0.0070121f, -0.0489811f, +0.0555142f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer21 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.4380385f, -0.1101470f, +0.0754227f, -0.3679515f, -0.5336336f, +0.2822901f, -0.2834935f, +0.2149143f,
  -0.2015930f, +0.1345838f, +0.0124795f, -0.1618606f, -0.4490061f, +0.1524530f, -0.1087135f, +0.0015372f,
  +0.0404230f, -0.0279218f, +0.1910443f, +0.2163040f, -0.0636157f, -0.0492470f, -0.1267460f, +0.0913348f,
  +0.2114806f, -0.1606787f, -0.2466282f, -0.0077364f, -0.5383919f, +0.0019483f, -0.1752207f, +0.1297512f,
  -0.1412900f, -0.0422817f, -0.1894126f, -0.0112416f, -0.3112239f, -0.0214839f, +0.1215994f, +0.2532547f,
  +0.0164162f, +0.1715376f, +0.1484699f, -0.1960298f, +0.0383611f, -0.0188196f, -0.2394059f, -0.1186516f,
  +0.1052066f, -0.6944126f, +0.2444937f, -0.4087298f, +0.2106400f, -0.0241846f, -0.1681023f, +0.2951090f,
  +0.3677701f, -0.3822116f, -0.0011253f, -0.0592506f, -0.0856677f, +0.2569637f, -0.3418012f, -0.0871318f,
  -0.1132121f, +0.0254638f, +0.1709826f, +0.0811176f, -0.0949084f, -0.0325466f, -0.0381017f, +0.2652164f,
  +0.1363017f, +0.2425746f, +0.0524284f, +0.3668782f, -0.1492067f, -0.1195779f, -0.0724306f, -0.1194987f,
  +0.1457489f, +0.1334829f, -0.0725942f, -0.3806619f, +0.1856860f, -0.2132055f, -0.2895227f, +0.2599844f,
  -0.0237861f, -0.0194647f, +0.2236309f, +0.1487079f, +0.1429564f, -0.0293046f, +0.2313563f, -0.0685512f,
  +0.0258285f, +0.2167482f, +0.1965166f, +0.3431027f, +0.0134501f, -0.2642954f, +0.2333045f, +0.4181279f,
  -0.0779764f, -0.6636915f, +0.0242568f, -0.4974837f, -0.3249184f, -0.0947179f, +0.0344019f, +0.4613002f,
  +0.6558804f, -0.1855579f, -0.0050218f, +0.3467817f, +0.4197066f, +0.1694410f, -0.4520095f, -0.3502787f,
  -0.1581759f, -0.0339209f, -0.2429537f, +0.0622200f, +0.2002914f, +0.0956571f, -0.1650945f, -0.0849504f,
  +0.0205826f, +0.2270795f, +0.0132300f, -0.2634255f, -0.0216339f, +0.1360828f, -0.1630039f, -0.4707018f,
  -0.1597598f, -0.0532882f, -0.0569060f, +0.0914204f, +0.3563704f, -0.0427905f, +0.0076111f, +0.0548056f,
  +0.0118646f, -0.0081961f, +0.1077834f, -0.0255017f, +0.0130421f, -0.2217461f, +0.3754883f, +0.1404494f,
  +0.0977007f, +0.0239767f, +0.1333838f, +0.0356841f, +0.3296103f, -0.0772513f, +0.0192126f, +0.1477335f,
  +0.3536068f, +0.1450485f, +0.3799104f, -0.1824502f, +0.0459478f, -0.0283815f, +0.5250250f, -0.0222317f,
  +0.3343704f, -0.1249069f, -0.4719123f, -0.0585707f, -0.2323968f, +0.0453920f, -0.2582925f, +0.2951207f,
  -0.2205451f, -0.3212507f, -0.6115994f, +0.0019015f, +0.4998236f, -0.3965966f, -0.1035961f, +0.3746731f,
  -0.1602819f, -0.2247132f, -0.2591498f, +0.0925564f, +0.3146226f, -0.0286640f, -0.1269011f, +0.2397971f,
  +0.0643119f, +0.0449691f, -0.1024273f, +0.0929744f, +0.1868360f, +0.1373015f, -0.1977325f, -0.1824374f,
  -0.0666663f, +0.1158932f, +0.0523317f, +0.0174742f, +0.2220307f, +0.1537072f, -0.2347088f, -0.4521260f,
  -0.1356790f, -0.0900806f, +0.2317623f, +0.1757483f, +0.1510572f, +0.0381323f, -0.0168655f, -0.2929728f,
  +0.1517939f, -0.2600657f, +0.2761327f, +0.4644474f, -0.2403818f, -0.1476457f, -0.2197553f, +0.2899594f,
  -0.7314348f, -0.2090801f, -0.0895050f, -0.1369066f, +0.5247005f, -0.5242922f, -0.9079282f, +0.0553470f,
  -0.3129074f, -0.3621719f, -0.1110277f, -0.2801985f, -0.0580620f, -0.0041438f, -0.2349441f, -0.3718620f,
  +0.0082206f, +0.0727278f, -0.0478901f, +0.2652452f, -0.1904483f, +0.0717315f, -0.2173586f, +0.1172455f,
  -0.2155196f, +0.2359366f, -0.2091095f, +0.2327760f, +0.0776635f, +0.1827253f, -0.1295897f, -0.2568871f,
  -0.2220038f, +0.1915118f, -0.0816491f, -0.0912842f, -0.3393508f, +0.0482496f, -0.1094101f, +0.1353983f,
  -0.0009225f, +0.0611974f, -0.1295032f, +0.0533819f, -0.0234079f, -0.0576580f, -0.1950189f, +0.0261988f,
  -0.0441742f, -0.0063043f, -0.0795269f, +0.0340527f, -0.1366566f, +0.0800754f, -0.1043753f, +0.0872855f,
  -0.1123821f, -0.0696874f, -0.1968801f, -0.0597208f, -0.1073433f, -0.0394058f, -0.0440426f, -0.0976787f
);

const float biases[4] = float[4](
  +0.0955228f, -0.1938401f, -0.0544332f, -0.1906980f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer22 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.3544350f, -0.2323872f, -0.6544352f, +0.0992095f, +0.5826566f, -0.0057586f, -0.0930930f, -0.0687901f,
  -0.4986247f, +0.2686932f, -0.6185254f, +0.1471375f, +0.0154962f, -0.1569575f, -0.2117919f, -0.0143484f,
  -0.1101667f, +0.0113692f, -0.2426436f, +0.2531867f, -0.0640266f, -0.0193246f, -0.0333539f, -0.0415339f,
  +0.4130166f, -0.0451004f, -0.1178791f, -0.1085615f, +0.4044878f, -0.4405029f, +0.3511238f, +0.3631382f,
  +0.3635799f, -0.1924019f, -0.2549805f, -0.7117231f, -0.0268685f, -0.3217165f, -0.1747864f, +0.3055663f,
  -0.0754679f, +0.5262629f, -0.3333994f, -0.0535549f, -0.1265533f, -0.0649645f, -0.1275340f, +0.0810817f,
  +0.3136437f, -0.2506272f, +0.4881791f, +0.4081221f, +0.2533719f, -0.2145808f, +0.0532473f, -0.4966040f,
  +0.2747589f, +0.1867667f, +0.1653562f, -0.0677314f, +0.3103519f, -0.3325956f, +0.3443284f, -0.0574135f,
  -0.0928564f, +0.0015729f, -0.0101300f, +0.2268733f, +0.2606744f, -0.3287280f, +0.1184256f, -0.2154343f,
  -0.1824051f, +0.1220480f, +0.2440910f, +0.1671041f, -0.1019419f, -0.0750538f, +0.1540097f, +0.2440208f,
  +0.1520573f, -0.4424621f, +0.2705301f, -0.1539750f, +0.2037503f, -0.3546059f, +0.4583951f, +0.3121096f,
  -0.0007531f, -0.1981986f, +0.0272094f, -0.1165589f, +0.1952195f, -0.2186557f, +0.1815609f, +0.1495619f,
  -0.0154459f, -0.1402398f, +0.2286147f, -0.0237522f, -0.1745948f, -0.0555848f, -0.0061165f, -0.3890630f,
  -0.0549921f, -0.1034062f, -0.3636248f, +0.2005033f, +0.0253855f, +0.0960597f, -0.3116944f, -0.2380707f,
  -0.2847924f, +0.3639639f, -0.0378950f, -0.0046791f, -0.0973931f, -0.3571663f, +0.0853437f, -0.1774269f,
  -0.4817922f, -0.0557786f, -0.3255152f, +0.1689598f, -0.3084379f, -0.2643275f, -0.2573673f, +0.0994187f,
  -0.4378022f, +0.1403111f, +0.0590789f, +0.4629475f, -0.3199717f, -0.2228272f, +0.5214111f, +0.1158765f,
  -0.4438353f, -0.1641623f, -0.1520194f, -0.1185094f, -0.2131757f, -0.3236232f, +0.1833478f, +0.3738849f,
  -0.1297730f, -0.3081432f, -0.1625845f, -0.1000802f, +0.2328357f, +0.0203708f, -0.0128862f, -0.2213852f,
  -0.2111478f, -0.1319116f, -0.1027458f, +0.2535144f, -0.0750961f, +0.0553436f, -0.0206503f, -0.0868890f,
  +0.1364530f, +0.1582731f, -0.2014176f, -0.0087784f, -0.0172253f, +0.1979850f, -0.1058034f, -0.0655522f,
  -0.1998852f, +0.0661980f, +0.1216059f, -0.1296196f, +0.3082947f, +0.1349925f, -0.1367713f, -0.2633357f,
  +0.2888084f, -0.1785862f, +0.0294160f, +0.0318058f, +0.1068835f, +0.0876824f, +0.3695254f, +0.0137162f,
  +0.1564899f, +0.3538607f, -0.0342746f, -0.2262025f, +0.0289696f, -0.0223501f, +0.1142096f, -0.0889258f,
  -0.0517054f, -0.0079963f, +0.0448953f, -0.0437319f, +0.1523704f, -0.2312066f, -0.0644329f, +0.1165553f,
  -0.0204387f, -0.2933643f, +0.6539053f, +0.4831878f, +0.1720544f, -0.1007517f, +0.2035013f, +0.1382058f,
  +0.0754092f, +0.0380009f, -0.2575687f, +0.2633605f, -0.0453742f, -0.1817283f, -0.0500787f, -0.3421537f,
  -0.1216286f, -0.5113773f, +0.1580641f, +0.0640783f, -0.3858292f, +0.2164952f, +0.0540962f, -0.0842893f,
  +0.2172182f, -0.1146373f, -0.0070360f, +0.2135192f, -0.1084423f, +0.4349351f, +0.0315629f, +0.0748771f,
  -0.1456372f, +0.0366284f, -0.0110424f, -0.3257129f, -0.2896662f, +0.4537428f, -0.2455636f, -0.1233329f,
  -0.1010998f, -0.0135691f, -0.1081713f, -0.2462760f, +0.0298609f, +0.2954730f, -0.2699596f, -0.1931791f,
  +0.1166328f, +0.0450548f, +0.2419558f, +0.2516716f, +0.3582842f, +0.4877350f, +0.3986122f, +0.1218712f,
  +0.0185465f, +0.2937548f, +0.0894505f, -0.5306335f, -0.1889769f, +0.2326150f, -0.0577677f, +0.2911715f,
  +0.1036841f, -0.0857004f, -0.2220779f, -0.1401720f, +0.0057412f, -0.0452325f, +0.0650113f, -0.4032553f,
  -0.0099704f, -0.1561118f, -0.1794636f, -0.1216872f, -0.0118739f, +0.3921283f, -0.2713178f, +0.1866674f,
  +0.0171202f, -0.2506141f, +0.0674965f, +0.1356505f, +0.0259544f, +0.1328789f, +0.3677800f, -0.1767109f
);

const float biases[4] = float[4](
  -0.0049549f, +0.0293455f, -0.0292006f, +0.1299643f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer22 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1587602f, -0.0083669f, +0.0954769f, -0.3365120f, -0.2050925f, +0.1186769f, -0.0655914f, -0.0421502f,
  -0.0954001f, -0.0085202f, +0.0444821f, +0.0206673f, -0.0032967f, +0.3615869f, -0.3025338f, +0.0375102f,
  -0.3296725f, +0.0915723f, -0.0414857f, -0.2977196f, -0.0298101f, +0.2173649f, -0.0135411f, +0.0784607f,
  -0.0985075f, -0.0095086f, +0.1545961f, -0.0847135f, -0.1484994f, -0.1458457f, +0.1016102f, +0.3669748f,
  -0.0098434f, -0.1777167f, -0.3446869f, -0.2833249f, -0.0177250f, +0.3973244f, -0.2549604f, +0.3541432f,
  +0.0533942f, +0.0455396f, -0.1938915f, -0.1189222f, -0.0142563f, +0.2875982f, -0.1353034f, -0.1102182f,
  -0.0454228f, +0.0800442f, -0.2992429f, +0.3367549f, +0.0486775f, +0.0237360f, -0.0291189f, +0.1623020f,
  -0.1499121f, -0.1518192f, +0.0877540f, +0.5975879f, +0.3219064f, +0.0908999f, +0.1677070f, +0.2679078f,
  -0.1604136f, +0.1595504f, -0.0204399f, +0.2367849f, +0.0653269f, +0.3860353f, -0.0702554f, -0.2790951f,
  +0.0070730f, +0.0859724f, -0.0367848f, +0.1292484f, +0.2441230f, -0.0110847f, -0.0380455f, -0.0403234f,
  +0.0406853f, -0.0532921f, -0.1231635f, +0.0137131f, -0.0831053f, -0.2057627f, -0.0577727f, -0.0816028f,
  +0.0952042f, +0.0704136f, +0.0902256f, +0.1225032f, +0.1039392f, -0.1094189f, +0.1572164f, +0.0111358f,
  -0.1134758f, -0.0185544f, -0.0413701f, -0.2199211f, +0.1679860f, -0.0489212f, -0.2052160f, -0.1840726f,
  -0.0006183f, -0.1128965f, +0.0665819f, -0.0473972f, -0.0020941f, -0.1092670f, +0.2195694f, -0.0584213f,
  +0.0747283f, +0.0306041f, -0.0833384f, +0.0895966f, -0.0076201f, -0.1381578f, -0.0091867f, -0.1834351f,
  +0.0376002f, -0.0247433f, +0.1194548f, -0.0377382f, +0.1465546f, -0.1120948f, +0.1509002f, +0.0250429f,
  -0.0193681f, -0.0695609f, +0.2076806f, -0.0198671f, -0.0139535f, -0.1155174f, -0.0058484f, +0.1573592f,
  +0.0570393f, +0.1203736f, -0.0540286f, +0.1731696f, +0.0350068f, -0.1646702f, -0.0096496f, -0.1112148f,
  -0.1872842f, -0.2296845f, -0.0881473f, -0.1209211f, -0.0603675f, +0.0897270f, +0.1267214f, -0.0661214f,
  +0.0274987f, +0.2126140f, +0.0514729f, -0.0113268f, +0.2547332f, +0.2075729f, +0.2146805f, -0.2193240f,
  -0.1002985f, -0.2595882f, +0.2609337f, -0.1321233f, -0.1258644f, +0.2527299f, +0.1236617f, +0.2020185f,
  +0.1324158f, -0.0665696f, +0.0649544f, +0.3950363f, +0.0929385f, +0.1847982f, +0.6500134f, -0.0672770f,
  -0.6576043f, +0.2394423f, -0.0208695f, +0.7164298f, -0.2504096f, +0.2815186f, +0.7121568f, -0.4948834f,
  +0.0841364f, -0.4197768f, +0.1459775f, +0.1904815f, -0.0490299f, -0.0938053f, -0.2179682f, -0.1843765f,
  +0.3156498f, -0.1380232f, -0.0331528f, +0.2397770f, +0.0473967f, +0.0964174f, -0.0224893f, -0.3330375f,
  -0.0115052f, +0.4761862f, -0.1849048f, +0.0094301f, -0.0183494f, +0.4332613f, -0.2234211f, +0.4199622f,
  +0.0160976f, +0.0759756f, -0.0075309f, -0.1616041f, -0.0013622f, +0.1007226f, -0.2819893f, -0.0034087f,
  -0.2170178f, +0.1357408f, -0.0299070f, -0.1238719f, +0.2182707f, -0.0946920f, +0.1683492f, -0.0427383f,
  -0.4016901f, -0.1059237f, -0.4209131f, +0.2026458f, +0.1952071f, +0.0197965f, -0.0987019f, -0.2232201f,
  +0.0597178f, +0.5547768f, -0.3744459f, -0.0744060f, -0.0470293f, +0.0058777f, -0.5678584f, +0.0958618f,
  +0.0300210f, -0.5641789f, +0.0078775f, +0.1711076f, -0.0149725f, -0.0862230f, -0.0874807f, +0.0941987f,
  +0.2260237f, -0.1623146f, -0.2153595f, +0.0276321f, -0.0963790f, -0.1598013f, +0.2178920f, +0.3028013f,
  +0.0323704f, +0.2336329f, -0.3568104f, -0.4951111f, +0.1152324f, -0.1819342f, +0.0764962f, +0.0991646f,
  +0.2630111f, -0.1315060f, +0.0574311f, -0.0108184f, +0.0356672f, -0.1361853f, +0.1676414f, +0.6077120f,
  +0.3051985f, -0.3179417f, +0.3111238f, +0.1643060f, -0.1804592f, -0.3824358f, +0.4299109f, -0.0695480f,
  +0.3091357f, +0.0000323f, +0.3607896f, +0.3284812f, -0.0300195f, -0.2882943f, +0.0821749f, -0.3035111f
);

const float biases[4] = float[4](
  +0.1349866f, +0.0188420f, +0.0156636f, -0.0297928f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer23 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1544544f, +0.1317653f, +0.0476064f, -0.2030901f, +0.2291889f, -0.0373919f, -0.1536080f, -0.1436268f,
  -0.3875867f, +0.0341246f, +0.1774498f, -0.5249197f, +0.4638308f, +0.0019598f, -0.1408534f, +0.1837054f,
  -0.2561886f, +0.3486839f, -0.0473242f, +0.0171314f, +0.1985091f, -0.0244261f, +0.0331326f, +0.2371935f,
  -0.1589889f, +0.1384668f, +0.4196464f, -0.1761701f, +0.1937281f, +0.0220265f, -0.2193095f, -0.0877732f,
  -0.1100455f, +0.1758185f, -0.2114117f, -0.5679567f, +0.2341287f, +0.2119368f, -0.0755447f, -0.3797117f,
  -0.2271984f, +0.0094313f, -0.1957532f, +0.0328046f, +0.2273301f, +0.0520843f, +0.2887239f, +0.6190903f,
  -0.1388171f, -0.0982910f, +0.0587181f, -0.0452496f, -0.0301891f, -0.0592178f, +0.1974969f, +0.0554468f,
  +0.0555890f, -0.4275879f, +0.2764346f, -0.3461765f, +0.1520894f, +0.0837909f, -0.0180914f, -0.2220572f,
  +0.1762546f, -0.0944707f, +0.0903267f, -0.1249360f, +0.2859930f, +0.0168900f, -0.1526620f, +0.1655266f,
  +0.2438727f, +0.2522815f, -0.1448841f, -0.4385551f, -0.1020361f, -0.2049180f, -0.2677253f, -0.1082338f,
  -0.4234579f, -0.2062675f, -0.3576767f, -0.5557511f, +0.4086636f, -0.3273518f, -0.3206790f, +0.5642554f,
  -0.1832339f, +0.5054941f, -0.0711193f, -0.1796543f, -0.2808415f, +0.1207627f, +0.0902529f, -0.1171659f,
  -0.0897751f, +0.1141779f, +0.2004210f, -0.3568847f, -0.0181892f, +0.0933198f, -0.0670135f, -0.3171082f,
  -0.2618648f, -0.3093227f, -0.0548423f, +0.2845529f, +0.5345320f, +0.0159828f, -0.2294277f, +0.2608144f,
  -0.0124923f, +0.2115523f, +0.2228123f, -0.0663578f, -0.1938943f, -0.0222713f, +0.0464178f, +0.2045058f,
  +0.2257856f, +0.1324870f, -0.0329854f, +0.1038639f, -0.2451151f, -0.1425878f, -0.1297331f, +0.0229447f,
  +0.3307504f, +0.5217115f, -0.5178451f, +0.4576581f, -0.0544292f, -0.1353777f, -0.0188097f, +0.2088403f,
  -0.0189132f, +0.1386229f, +0.0455890f, +0.0147658f, -0.1654496f, +0.2306317f, -0.2724980f, -0.0117455f,
  -0.0099337f, +0.2443704f, +0.2650455f, -0.0811823f, +0.0207717f, +0.2851719f, -0.0074692f, -0.2631921f,
  +0.5046086f, -0.4043836f, -0.2484630f, -0.1792642f, +0.4675309f, +0.1958261f, +0.0444940f, +0.1238807f,
  +0.0209592f, -0.0662691f, +0.0836366f, -0.0801266f, +0.1748281f, +0.0430083f, +0.2527765f, -0.1771585f,
  -0.3283340f, +0.1949074f, +0.6987078f, +0.4857583f, +0.1638023f, -0.0772099f, -0.2060680f, +0.3311064f,
  +0.2552605f, -0.2621279f, +0.1765571f, +0.0440280f, -0.2071389f, +0.0813463f, -0.2681575f, +0.3508038f,
  +0.5459855f, -0.2583050f, -0.0923034f, -0.0761036f, +0.0627323f, -0.0025494f, +0.1473480f, -0.4945844f,
  -0.0678608f, +0.1369996f, -0.1821732f, +0.1791034f, -0.1159447f, -0.2234008f, +0.0564598f, +0.2113318f,
  -0.4386628f, +0.0875544f, -0.1252424f, -0.1625976f, -0.3504407f, +0.0020952f, +0.0856939f, -0.5566448f,
  -0.1074149f, +0.4824205f, -0.2477432f, -0.0342390f, +0.1353242f, -0.1741518f, +0.0313752f, +0.0861658f,
  -0.2068384f, +0.2375349f, -0.0374913f, -0.0044809f, +0.0958863f, +0.0030570f, -0.0220564f, -0.2051203f,
  -0.1338588f, -0.3051417f, -0.0478588f, -0.0554781f, +0.0097222f, +0.0114144f, -0.0054566f, -0.3148525f,
  +0.3056203f, -0.4331718f, -0.0330508f, -0.3326675f, -0.3397717f, +0.1502837f, -0.3314086f, +0.3389890f,
  -0.1126279f, +0.2949969f, -0.4473509f, +0.2258322f, +0.0964140f, -0.0264859f, +0.0720042f, -0.1351775f,
  +0.2012285f, +0.2152016f, +0.3206643f, +0.3269750f, +0.0188138f, -0.0298034f, +0.1377093f, -0.4172750f,
  +0.8028582f, +0.1359968f, -0.0854004f, -0.5039628f, -0.1592929f, -0.0638171f, -0.2384507f, +0.0161604f,
  +0.0373779f, +0.7145200f, -0.3269511f, +0.1556475f, -0.2022544f, -0.1833463f, +0.2325165f, -0.0808628f,
  +0.3082101f, -0.2607928f, +0.1422074f, -0.2181383f, -0.0676585f, -0.0819812f, -0.1261486f, +0.0296642f,
  +0.0522036f, +0.0024277f, +0.2657126f, -0.1061615f, -0.4160922f, +0.1680398f, +0.1349283f, +0.2619927f
);

const float biases[4] = float[4](
  -0.0549038f, -0.1071914f, -0.0869008f, +0.0385816f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer23 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1054022f, +0.1660360f, +0.4421197f, +0.1608357f, -0.3449385f, +0.1363028f, +0.2755390f, +0.2513049f,
  +0.1955994f, +0.4049674f, +0.0310347f, -0.1201506f, +0.0373491f, -0.3390221f, +0.0396690f, +0.0391914f,
  +0.0135647f, +0.3193181f, +0.1852947f, -0.1894356f, +0.0604942f, -0.2261759f, +0.2178383f, +0.1686886f,
  +0.1063613f, +0.0694062f, +0.2254920f, -0.0835052f, -0.1108588f, +0.3204706f, -0.0382139f, -0.0853648f,
  +0.2344790f, +0.1132565f, -0.4475648f, +0.3774233f, -0.4264655f, +0.0232533f, -0.3183657f, -0.1776833f,
  -0.1300682f, -0.6268610f, -0.0353275f, -0.3316852f, +0.0395953f, +0.0675343f, -0.0200867f, +0.2873431f,
  -0.1378283f, +0.0055168f, +0.1395509f, -0.0171769f, +0.1146902f, +0.3247047f, -0.4095085f, -0.0992240f,
  +0.2406112f, +0.3802367f, +0.0030618f, +0.2103818f, +0.0782257f, -0.0282594f, -0.3103999f, -0.1559682f,
  -0.1513292f, +0.0415493f, +0.3079508f, +0.2263975f, -0.2717928f, +0.0394034f, -0.1794306f, +0.0895701f,
  +0.1894224f, +0.0667026f, +0.3047775f, -0.0744510f, -0.0228888f, +0.2571526f, +0.2086390f, -0.0042342f,
  +0.2448299f, +0.0412344f, +0.0417817f, +0.0624921f, -0.0354240f, -0.0580212f, -0.1399757f, +0.2879499f,
  -0.2334611f, +0.1240748f, +0.1209497f, -0.0688780f, -0.0296383f, -0.0509419f, -0.2413851f, -0.0499955f,
  -0.0623796f, +0.0312562f, +0.2560505f, +0.1756559f, -0.0043898f, +0.1041592f, -0.0735694f, -0.2243606f,
  -0.3262885f, -0.3920273f, -0.5372468f, -0.4090158f, +0.4501096f, +0.3202194f, -0.0608165f, +0.2221045f,
  +0.4720168f, -0.0348346f, +0.0990802f, -0.1508515f, +0.0370573f, -0.3399558f, +0.0667516f, +0.5259762f,
  +0.0131853f, +0.2712475f, +0.1536280f, +0.2973599f, -0.1447758f, +0.1246166f, -0.1868076f, +0.0037524f,
  -0.2794622f, -0.1334198f, -0.2846606f, -0.4498582f, +0.3286573f, +0.0038608f, +0.2660632f, -0.5051539f,
  +0.0076496f, -0.0185534f, +0.2972474f, +0.0562055f, +0.3985977f, -0.1147397f, +0.0691139f, +0.1451850f,
  +0.0975849f, +0.1063954f, -0.1688856f, -0.3032018f, +0.1319224f, -0.1123086f, -0.0813550f, +0.0944991f,
  -0.1977305f, -0.0629467f, -0.0616328f, +0.0854546f, +0.1152869f, +0.1799471f, -0.1632865f, +0.2793852f,
  -0.1874386f, -0.1034231f, -0.1628541f, -0.0779354f, +0.0712560f, +0.0968638f, +0.0102757f, +0.1398220f,
  +0.1788110f, +0.3571588f, +0.0185489f, -0.3463330f, +0.1471558f, -0.0421222f, -0.0770345f, -0.2180155f,
  -0.4999734f, -0.5794107f, +0.0603848f, +0.3172830f, +0.1757058f, -0.3526135f, +0.1831394f, -0.1267505f,
  +0.4235765f, -0.0758552f, -0.1476307f, +0.4101587f, +0.6642532f, -0.0395507f, +0.0873274f, -0.2759303f,
  -0.0125996f, +0.2362870f, +0.0552187f, -0.2010734f, +0.2159918f, +0.0110971f, -0.0083895f, -0.3495398f,
  -0.0660522f, -0.3358981f, -0.2962638f, -0.0578622f, +0.5425202f, +0.2601866f, -0.1918616f, -0.2094001f,
  +0.5552404f, -0.1878312f, +0.3001740f, +0.2205563f, +0.5616896f, -0.1771788f, +0.3156323f, +0.4563769f,
  +0.3629930f, -0.2360332f, -0.1337273f, -0.2744133f, -0.2153540f, -0.0212808f, -0.0174061f, +0.0694263f,
  +0.1345246f, +0.0173512f, +0.3113007f, +0.0602203f, +0.0512419f, -0.1058816f, -0.1995198f, +0.0300195f,
  +0.3802285f, -0.0794786f, -0.1102112f, +0.0053612f, -0.0311821f, +0.1402746f, -0.1119063f, +0.2093991f,
  +0.1424021f, -0.0070195f, -0.2158088f, -0.2247249f, -0.0341897f, +0.0379881f, -0.3462349f, -0.0804693f,
  +0.4650803f, -0.0448557f, +0.0956098f, -0.2234666f, -0.2976962f, +0.1399831f, -0.3007214f, -0.2626743f,
  +0.0642009f, +0.1504512f, -0.0356171f, +0.1100475f, +0.1574203f, +0.1366612f, +0.0329849f, +0.0960620f,
  +0.0074737f, -0.0814710f, +0.3055390f, +0.1434289f, -0.1868268f, +0.2272518f, -0.1315654f, -0.0707764f,
  +0.0789022f, -0.2368306f, +0.1162600f, -0.1389635f, -0.1981285f, +0.0170145f, +0.1029554f, +0.2054361f,
  +0.3528092f, -0.1902034f, +0.0288307f, +0.0359077f, +0.2500079f, -0.0000173f, -0.0936456f, +0.2729765f
);

const float biases[4] = float[4](
  -0.0713249f, +0.0206420f, -0.0583694f, +0.0155309f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer24 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0087041f, -0.0312408f, +0.1073164f, +0.4725817f, +0.3670299f, +0.4856081f, -0.3507071f, -0.3896874f,
  -0.3129192f, -0.1105105f, +0.2832802f, -0.0698188f, +0.0783207f, +0.4076480f, -0.2245557f, -0.1917268f,
  -0.2084427f, -0.0448031f, +0.0742605f, -0.2228060f, +0.0450087f, +0.0015119f, -0.0272030f, +0.1941122f,
  +0.0819482f, +0.1573760f, +0.1098383f, -0.2948841f, -0.3685071f, -0.0509371f, -0.2243161f, -0.0654587f,
  +0.0806913f, +0.2741974f, -0.0320893f, -0.0041125f, +0.0187441f, -0.0084091f, +0.1299206f, -0.0903675f,
  +0.0003198f, -0.1910603f, +0.0905174f, -0.0256887f, -0.0381748f, -0.0851856f, +0.0279165f, -0.1048214f,
  +0.0039227f, +0.4489837f, +0.0043753f, +0.0814791f, -0.1979734f, +0.3717853f, -0.1723969f, +0.0497710f,
  -0.1252096f, +0.5040137f, -0.0267594f, +0.0256780f, -0.1482647f, +0.0912739f, -0.1091637f, -0.0697437f,
  +0.1163959f, +0.0150977f, +0.0879805f, -0.2393575f, -0.0953001f, -0.2275072f, -0.1914161f, -0.4577548f,
  +0.0984135f, -0.0484575f, +0.0778183f, +0.2552778f, -0.5267852f, +0.1830129f, -0.1608181f, +0.0757167f,
  +0.2246993f, -0.5062128f, +0.2512740f, +0.0651049f, -0.5582318f, -0.2043277f, +0.2443854f, -0.0537441f,
  +0.1383705f, -0.1342375f, -0.0200325f, -0.5184913f, -0.0187913f, -0.4581072f, -0.2706760f, -0.0794921f,
  -0.0575666f, -0.0825640f, +0.4414983f, +0.4575674f, +0.1384997f, -0.1538064f, -0.0630698f, -0.1131090f,
  -0.6598229f, -0.3112589f, +0.7070886f, -0.2246604f, -0.1541688f, -0.1357337f, +0.2783155f, -0.0225102f,
  -0.0495420f, -0.1371788f, +0.0988025f, -0.4798286f, -0.0259826f, +0.0341835f, -0.2257689f, -0.1979542f,
  -0.5036413f, -0.1784588f, -0.0260425f, +0.4384664f, -0.1344514f, +0.0372299f, +0.5488330f, -0.4658173f,
  -0.4387597f, -0.1014871f, +0.4100472f, +0.0366682f, -0.1624286f, +0.4076349f, +0.2692345f, +0.0194677f,
  +0.0267022f, -0.0366168f, +0.2930089f, +0.0122665f, +0.0608915f, +0.1741443f, -0.2426505f, +0.0566804f,
  -0.0104888f, +0.1885261f, +0.1602993f, -0.2718347f, +0.1765361f, +0.2638525f, -0.0313656f, +0.1296390f,
  -0.1096494f, +0.3650330f, -0.0578273f, -0.0518562f, +0.0712945f, +0.1094008f, +0.1066377f, -0.0120529f,
  -0.0557371f, +0.0902086f, -0.0414392f, +0.2497049f, -0.0320139f, +0.0438978f, +0.2612651f, +0.0274891f,
  -0.2072037f, -0.0011936f, -0.0523443f, +0.0250108f, +0.2469257f, +0.0448573f, -0.1706487f, +0.0178912f,
  -0.0682341f, -0.2069754f, -0.1711835f, +0.0654250f, -0.0721367f, +0.2384676f, +0.2063796f, -0.1059994f,
  -0.2614290f, +0.0262367f, -0.3131454f, +0.0220712f, -0.2079087f, +0.0926153f, +0.1925752f, +0.2727826f,
  -0.0943106f, +0.1473763f, +0.2091614f, -0.2262418f, -0.1113884f, -0.1717855f, +0.1386737f, +0.1061860f,
  -0.4832660f, +0.0326294f, -0.1975289f, -0.2633153f, -0.4813804f, +0.0664827f, +0.2338747f, -0.2259698f,
  -0.1512844f, -0.1816101f, -0.3956551f, -0.0836552f, -0.0778449f, -0.0308264f, +0.0392895f, -0.0795128f,
  -0.0171925f, +0.0925902f, -0.1259273f, -0.3918530f, -0.1640060f, +0.2284241f, +0.0038242f, +0.1119381f,
  +0.1192925f, -0.2742244f, -0.2552884f, -0.0878887f, -0.4137535f, -0.1139257f, +0.0528254f, +0.0332635f,
  +0.0150806f, -0.3645990f, -0.3784288f, -0.1977454f, -0.0040873f, +0.0852802f, +0.2713518f, -0.2301056f,
  +0.3046370f, -0.1935493f, -0.0856811f, +0.0032831f, +0.2438954f, +0.4434093f, -0.0756237f, -0.0768746f,
  +0.0799535f, -0.1515759f, -0.2372711f, +0.1350578f, +0.0373395f, +0.5070664f, -0.2926225f, +0.2126147f,
  -0.1345407f, -0.0836307f, -0.1729488f, +0.0520594f, +0.3751850f, +0.2061468f, +0.2795519f, +0.2009416f,
  +0.1849649f, -0.2589537f, +0.0610193f, -0.2953992f, -0.0238506f, +0.0316658f, +0.1681148f, +0.1955474f,
  +0.0550958f, +0.1740158f, -0.1412067f, -0.2780014f, -0.0298796f, +0.0536081f, -0.0154597f, -0.2186251f,
  -0.0682544f, +0.0000679f, -0.1759111f, -0.0272036f, +0.1335336f, -0.0994244f, +0.1813828f, +0.2058871f
);

const float biases[4] = float[4](
  +0.0340383f, +0.1468106f, -0.0879666f, +0.0076857f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer24 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1423450f, -0.0124506f, +0.1012708f, -0.3057357f, +0.1419659f, -0.1824989f, +0.1231660f, -0.2533653f,
  +0.0003090f, -0.3009824f, +0.2510940f, -0.0151748f, -0.2495422f, +0.0112357f, -0.2350910f, +0.2054304f,
  -0.1542662f, -0.3625512f, -0.0173296f, -0.0769884f, -0.1222570f, +0.2198026f, +0.1886351f, +0.0417762f,
  -0.0520091f, +0.2524400f, +0.1764204f, -0.0960154f, -0.0658297f, +0.0309566f, -0.4334681f, -0.0161628f,
  +0.3181263f, -0.2234725f, -0.0244776f, -0.3369780f, +0.3882687f, -0.2042737f, -0.2093807f, +0.4197897f,
  -0.1401625f, -0.2279407f, +0.1498228f, -0.2405737f, +0.0898629f, -0.1055733f, -0.1203955f, -0.0433063f,
  -0.1954165f, +0.0737820f, -0.1159013f, -0.1501531f, -0.3495790f, +0.1713444f, +0.1687208f, +0.0979592f,
  -0.1654242f, -0.1778737f, +0.0642092f, +0.0384661f, -0.3084303f, +0.1269553f, +0.1770112f, -0.1943361f,
  -0.1841558f, -0.3135677f, -0.0762935f, -0.0301363f, -0.1565714f, -0.0017281f, +0.2300141f, +0.1495604f,
  -0.0095837f, -0.0724066f, +0.0089306f, -0.0390953f, +0.1254988f, +0.1420563f, -0.0094812f, +0.0353876f,
  -0.0027790f, +0.2369495f, -0.0318341f, -0.0540575f, +0.0774282f, -0.0275570f, +0.1554163f, -0.0337853f,
  +0.0983204f, +0.1508823f, +0.1100632f, +0.2347752f, -0.1130577f, +0.0451346f, +0.0208233f, +0.0601463f,
  +0.0873675f, +0.1063578f, +0.0639416f, +0.0861640f, +0.1029374f, +0.1042143f, -0.0617750f, +0.0522190f,
  -0.2483697f, +0.0983956f, -0.1287438f, +0.0570393f, +0.0765049f, -0.0887336f, +0.2006727f, -0.1875903f,
  -0.2755588f, -0.0521845f, -0.0030073f, -0.0159757f, -0.1731496f, -0.0991626f, +0.0893976f, +0.0634093f,
  -0.0736530f, +0.0010738f, +0.0676399f, -0.1051001f, +0.0543688f, -0.2003977f, -0.0215465f, +0.0024294f,
  -0.0183660f, +0.0933910f, -0.1334968f, -0.0033056f, -0.0171005f, -0.1192251f, +0.0305375f, -0.0734102f,
  -0.0443867f, -0.0178453f, -0.0784551f, +0.0020392f, -0.0884337f, +0.0584946f, +0.0281116f, -0.0541840f,
  -0.0135253f, +0.0636203f, +0.0599932f, +0.0124648f, -0.0008733f, -0.0235216f, -0.1639245f, +0.2748175f,
  -0.1070629f, +0.1338524f, -0.0130708f, +0.0710828f, -0.0023438f, +0.1871711f, -0.0670760f, -0.1143947f,
  -0.0679834f, +0.3206781f, -0.2124081f, +0.1397658f, +0.3644907f, +0.4409975f, -0.0016353f, +0.1731994f,
  +0.5421034f, -0.1156579f, -0.4384524f, -0.1179205f, -0.3149730f, +0.0631126f, -0.0763777f, -0.0738425f,
  +0.2975434f, +0.1025125f, +0.2573909f, -0.0009473f, +0.0376255f, +0.1645001f, -0.3329765f, +0.1705066f,
  -0.2596094f, +0.1901056f, -0.2406131f, +0.2255604f, +0.0589105f, -0.1220780f, +0.0568169f, +0.2451315f,
  -0.0760867f, -0.1409936f, -0.4351456f, +0.0312727f, -0.2981814f, +0.2328489f, +0.0438953f, -0.0466806f,
  -0.3273767f, +0.1073929f, -0.2852889f, -0.2183172f, -0.4921744f, +0.1764903f, +0.1259651f, +0.0622073f,
  +0.0176757f, +0.1171746f, +0.0902522f, +0.1593590f, -0.1183435f, +0.1758247f, +0.1063266f, +0.0541096f,
  +0.1818224f, -0.0080404f, +0.1732957f, +0.3590483f, -0.2489834f, -0.0216524f, -0.3350670f, -0.0245895f,
  -0.2431900f, -0.1425734f, +0.1688923f, +0.0687516f, +0.2107916f, +0.1337947f, +0.1263228f, -0.3635672f,
  +0.1166208f, +0.1282747f, -0.2363244f, -0.0964405f, +0.0650434f, +0.0101348f, +0.0464272f, -0.3870296f,
  -0.3370033f, -0.1141984f, +0.0601315f, +0.2188316f, -0.3904167f, -0.3415020f, +0.2769340f, -0.0988625f,
  -0.3343306f, +0.1177468f, -0.5735181f, +0.1950505f, -0.1320504f, +0.1703818f, +0.3121847f, -0.1573833f,
  -0.0136026f, +0.4318830f, -0.2057429f, +0.0555503f, +0.2623115f, +0.1932324f, -0.2224586f, -0.0971591f,
  +0.2554000f, +0.0420647f, -0.2475085f, -0.1496936f, +0.2069191f, +0.0101702f, -0.1613954f, +0.0145416f,
  -0.3320940f, -0.1721156f, -0.2307610f, +0.4003972f, +0.0347368f, -0.0093769f, -0.0823045f, +0.0864488f,
  -0.1437202f, +0.3042440f, -0.3449060f, -0.1061477f, -0.2479146f, +0.0019781f, -0.2620877f, -0.0470251f
);

const float biases[4] = float[4](
  +0.1015354f, +0.0417301f, +0.0026128f, -0.0074229f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer25 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0552757f, +0.0417658f, -0.3317202f, -0.2279669f, -0.3947719f, -0.2291983f, -0.3575173f, -0.1301786f,
  +0.1648753f, +0.1086083f, +0.1281219f, +0.0084230f, -0.4795697f, +0.0017091f, +0.1602976f, -0.1997244f,
  +0.2703337f, +0.0017996f, -0.3354571f, -0.1851706f, -0.4159423f, -0.0487542f, +0.2596508f, +0.2360202f,
  +0.2660691f, +0.2354984f, -0.2704047f, -0.1114098f, +0.4784946f, +0.1261141f, -0.4506817f, -0.2352076f,
  -0.2043039f, -0.3631429f, -0.0761817f, +0.2166153f, -0.7127244f, -0.1577184f, -0.1768804f, -0.3579274f,
  -0.1925708f, +0.3265082f, -0.0139138f, -0.2414536f, +0.1325313f, +0.1305153f, +0.0555643f, +0.4477229f,
  -0.2192846f, +0.4548712f, -0.0922827f, +0.0409897f, +0.1923040f, +0.0720774f, -0.0460972f, -0.0746580f,
  +0.0070467f, +0.2955689f, +0.3942571f, -0.1986804f, +0.2997815f, +0.0070015f, -0.3648307f, -0.1017858f,
  +0.5645314f, -0.0097261f, +0.0710608f, -0.1071163f, -0.2771515f, +0.2193480f, -0.4650920f, +0.0158158f,
  -0.0569259f, -0.1410265f, -0.0205864f, -0.0532964f, +0.1041484f, -0.0104340f, -0.2221129f, -0.0702231f,
  -0.2368876f, -0.2598307f, +0.0332594f, +0.0314845f, -0.0908772f, -0.1417758f, -0.2039864f, +0.0547032f,
  -0.0246097f, -0.2434632f, -0.0908981f, +0.2178200f, -0.3394038f, +0.2064202f, -0.1495944f, +0.4076286f,
  -0.2445372f, -0.1588114f, +0.4352365f, +0.0647489f, +0.4010803f, +0.1365637f, -0.0335281f, +0.0751527f,
  -0.3785307f, -0.2379290f, +0.0395405f, -0.4915017f, +0.3126690f, +0.1098773f, +0.4519799f, -0.3713332f,
  -0.4297891f, +0.7033614f, +0.0149883f, +0.2581687f, -0.5431063f, +0.1216016f, -0.0548189f, +0.2464023f,
  -0.1405324f, +0.2773410f, +0.5235467f, +0.0567388f, -0.0109737f, +0.0181561f, +0.0855882f, +0.0146458f,
  +0.1239504f, +0.1838750f, +0.1944566f, -0.2646013f, +0.2653935f, -0.0613890f, +0.0988556f, -0.3754512f,
  +0.0538803f, +0.2745116f, -0.1514535f, -0.3104391f, -0.2000467f, +0.1168833f, -0.5430954f, +0.0714957f,
  -0.0229512f, -0.2021988f, +0.1914725f, -0.4070734f, -0.0302664f, +0.1497853f, +0.0716327f, -0.3058695f,
  -0.3842549f, -0.4802963f, -0.3895276f, +0.1898105f, -0.1680257f, -0.0331448f, +0.1577012f, -0.1853026f,
  -0.2569804f, +0.2551200f, -0.0004601f, +0.1605757f, -0.2911968f, -0.1696609f, +0.1956332f, +0.2633476f,
  -0.2585415f, +0.0246366f, -0.1626380f, -0.0526213f, -0.0728506f, +0.1051358f, +0.0422900f, -0.0879057f,
  +0.1242350f, -0.3254540f, -0.1963489f, +0.2503231f, -0.0212789f, -0.2173923f, +0.3105887f, -0.0459443f,
  -0.9072757f, -0.0267047f, +0.0811263f, +0.1925595f, +0.4741371f, -0.2070825f, +0.1110403f, -0.0654187f,
  -0.1959309f, +0.3991680f, +0.1041239f, +0.4462195f, +0.4147134f, -0.2486068f, +0.0848098f, +0.2087561f,
  +0.5601362f, +0.3041016f, -0.1259660f, +0.0457019f, +0.1117039f, +0.1713875f, -0.0578096f, -0.0226399f,
  -0.0184625f, +0.1384991f, +0.0216613f, +0.0214027f, +0.1866188f, -0.1206677f, +0.0544939f, +0.1010557f,
  -0.0256335f, +0.1325513f, -0.2324872f, -0.1327928f, +0.0741030f, +0.2530111f, -0.2200669f, +0.1798728f,
  -0.2193114f, +0.6185666f, +0.1755346f, -0.1789548f, -0.0005741f, -0.0025678f, -0.3258986f, +0.0429089f,
  +0.3479929f, +0.1985714f, -0.0756057f, -0.1408776f, -0.0990667f, -0.0215633f, -0.1246279f, +0.0735862f,
  -0.1715856f, -0.1872951f, -0.0523239f, -0.5318974f, +0.4254912f, +0.0533031f, -0.0348875f, -0.0514783f,
  -0.4588985f, -0.2343914f, +0.4413710f, -0.2236338f, -0.0069401f, +0.1016495f, -0.3752763f, -0.2041177f,
  -0.2093400f, -0.0160004f, -0.0884790f, +0.1809327f, -0.0726886f, +0.0200510f, +0.0319020f, +0.4018067f,
  +0.0758873f, +0.0075821f, +0.2113261f, -0.1045966f, -0.0230390f, -0.3690381f, +0.0482204f, +0.2574684f,
  +0.3582627f, -0.4284750f, -0.0367552f, -0.0151857f, -0.2660750f, -0.1510712f, -0.4175043f, -0.1838995f,
  -0.2710150f, +0.2657919f, -0.2817587f, -0.1535394f, -0.4222983f, +0.2717643f, -0.0457472f, +0.0318063f
);

const float biases[4] = float[4](
  -0.0461291f, -0.0380834f, -0.1496613f, +0.0581231f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer25 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2108470f, -0.3669044f, +0.0304085f, +0.2689017f, +0.1133653f, -0.0760261f, +0.1338639f, +0.1282444f,
  +0.2640053f, +0.0060436f, +0.3521663f, -0.0097373f, +0.6150038f, +0.0750661f, +0.0315265f, +0.0602334f,
  +0.3280369f, -0.1456788f, +0.0304274f, +0.0836734f, +0.3363073f, -0.1053427f, -0.1422317f, -0.3007121f,
  -0.0421448f, -0.3746276f, +0.2721308f, -0.1455167f, -0.0902894f, -0.0561285f, +0.4071951f, -0.4030220f,
  -0.3602445f, -0.2678728f, +0.2340599f, +0.2148782f, +0.2515535f, -0.1429196f, +0.3749737f, -0.2341886f,
  +0.2293835f, +0.3626076f, -0.2858036f, -0.0008210f, -0.0700408f, +0.1411566f, +0.1018729f, +0.0623182f,
  -0.0054221f, +0.0252770f, -0.3109972f, +0.2431432f, +0.3027979f, +0.0288645f, +0.0670944f, +0.0600501f,
  -0.1618625f, -0.0214524f, -0.0737005f, +0.2161786f, +0.6763323f, -0.0349538f, +0.0724632f, -0.3281237f,
  +0.0073805f, +0.0174935f, +0.1728449f, -0.0983177f, -0.4542268f, +0.0042772f, +0.0967456f, +0.2603740f,
  +0.3520558f, -0.3124021f, +0.1928031f, -0.0053856f, -0.1650459f, +0.3199363f, +0.1947179f, -0.3802068f,
  +0.4439247f, -0.0844810f, -0.0796409f, -0.3859466f, +0.2434103f, -0.0560351f, +0.2430333f, -0.1729001f,
  +0.1536233f, -0.3281791f, -0.1583614f, -0.4291526f, +0.1927350f, -0.0193820f, +0.0947282f, -0.0411586f,
  +0.0028946f, -0.0387769f, +0.3025000f, +0.4020674f, +0.0153264f, -0.0585765f, -0.1106212f, +0.1052936f,
  +0.2574175f, -0.0310701f, +0.1217182f, -0.0906902f, +0.2404091f, -0.4131052f, -0.3968962f, +0.3208905f,
  -0.2185815f, -0.2521145f, -0.0413366f, -0.4203094f, +0.0289430f, +0.1222546f, +0.4163936f, +0.0371158f,
  +0.2615751f, -0.4146573f, +0.1864951f, +0.2635230f, -0.0988801f, +0.0884001f, -0.0888515f, +0.1016680f,
  -0.1613980f, -0.3011271f, +0.3463380f, +0.1671773f, -0.0359042f, -0.2015778f, -0.1761658f, +0.2519408f,
  -0.4518267f, -0.3942403f, -0.0327923f, +0.0957541f, -0.4118381f, -0.0565844f, -0.0367245f, +0.2667351f,
  +0.3193811f, -0.0983663f, +0.0163445f, -0.1184984f, +0.2113643f, -0.1655601f, -0.4451436f, +0.1278618f,
  -0.0002916f, +0.0070213f, +0.1707113f, +0.1659514f, -0.0093764f, -0.2792055f, -0.3093158f, +0.0648809f,
  +0.0754696f, -0.1429221f, -0.3434325f, +0.1741685f, +0.1270256f, +0.1496443f, -0.5063233f, -0.1608248f,
  +0.2851675f, -0.1528091f, -0.5750487f, -0.4602954f, -0.5118411f, +0.0343916f, +0.1040457f, -0.5851437f,
  -0.3085070f, +0.5883306f, -0.2018294f, +0.1172704f, -0.1374164f, -0.0457582f, +0.1755600f, -0.2217205f,
  +0.1095595f, +0.3458264f, -0.0957505f, -0.1043184f, -0.3572535f, +0.0108511f, -0.3032781f, +0.5036329f,
  +0.1019122f, +0.0922449f, -0.2997283f, -0.2289230f, +0.2611105f, +0.1935380f, +0.1191379f, -0.0549821f,
  +0.7223917f, +0.2409561f, -0.5114434f, +0.0286214f, +0.1424464f, -0.0552299f, -0.3213877f, -0.2387616f,
  +0.1860862f, +0.4784535f, -0.0662416f, -0.2065273f, -0.3005917f, -0.0976490f, -0.4546609f, +0.2082268f,
  -0.2459566f, -0.1313307f, +0.1636816f, -0.1627404f, -0.0621839f, -0.0073270f, -0.0243094f, -0.2258517f,
  -0.2852276f, -0.0249411f, +0.2447940f, +0.0101990f, +0.0572430f, +0.0166825f, +0.3563028f, +0.1086279f,
  +0.0475054f, -0.2172682f, +0.1366319f, -0.3953176f, -0.2504653f, -0.1205001f, -0.0361774f, -0.0522781f,
  -0.0557525f, +0.0085496f, +0.1627821f, -0.3502591f, -0.2464181f, +0.2922477f, -0.0838063f, -0.2560398f,
  +0.3823822f, +0.1858093f, +0.0916809f, -0.0907143f, -0.0797746f, -0.1668325f, +0.0984052f, +0.0559301f,
  +0.6051996f, -0.0433433f, +0.0470693f, -0.0245681f, +0.0173351f, +0.3507795f, +0.3900431f, -0.0771375f,
  -0.0521809f, -0.1046993f, +0.0202187f, +0.3953995f, -0.2487057f, +0.0692089f, -0.0130049f, -0.0891323f,
  -0.0851454f, -0.4495893f, -0.1426280f, -0.4267013f, +0.0741460f, -0.2363467f, -0.1300017f, +0.2865566f,
  +0.5478455f, -0.6325621f, +0.0946822f, -0.1359474f, +0.0072993f, +0.1110052f, +0.2153823f, +0.1068156f
);

const float biases[4] = float[4](
  -0.1040861f, -0.2696601f, +0.0767576f, +0.0924342f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer26 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1768824f, -0.1299613f, +0.0879225f, -0.1173555f, -0.0168027f, -0.1560223f, +0.1423494f, +0.1530204f,
  +0.0112709f, +0.1455077f, -0.1663844f, -0.1021963f, -0.0346484f, -0.1091525f, -0.1265769f, -0.1120446f,
  -0.4158845f, +0.0099670f, +0.0545301f, -0.1088217f, +0.1832372f, -0.1161648f, -0.0212567f, -0.1746741f,
  +0.4243927f, +0.2716756f, +0.3422421f, +0.2417461f, -0.0264708f, -0.5491157f, +0.0894245f, -0.3770381f,
  +0.2258482f, +0.1923442f, -0.0787867f, +0.4565235f, -0.0288038f, -0.2791989f, +0.3254188f, -0.0816239f,
  -0.3794266f, +0.0204764f, -0.0023704f, +0.2491452f, +0.1096099f, +0.0189448f, +0.1784202f, -0.1203439f,
  +0.0493220f, +0.1294896f, +0.1911729f, -0.2337971f, +0.0907796f, -0.1356326f, -0.0304868f, -0.2825104f,
  -0.1788490f, +0.0252773f, +0.2095120f, -0.1609471f, -0.0725027f, -0.3809097f, +0.0434840f, -0.0031928f,
  -0.1059506f, -0.0508181f, +0.1200206f, -0.0524971f, +0.0607995f, -0.0304614f, +0.1083710f, -0.0960145f,
  +0.6176847f, +0.0325747f, +0.0496296f, -0.0626859f, -0.2126483f, +0.2182965f, +0.2449892f, -0.3865947f,
  +0.1368058f, +0.1436019f, -0.2096341f, +0.1853491f, -0.2506932f, -0.0266527f, +0.0953433f, -0.0895251f,
  +0.0204636f, -0.0614864f, -0.1662519f, +0.1360557f, -0.1366723f, +0.0381152f, +0.3590280f, -0.2587810f,
  +0.5522588f, -0.5058386f, -0.1432961f, -0.0864709f, -0.3934045f, +0.3814634f, +0.1905557f, -0.1873436f,
  -0.0776801f, +0.0847367f, +0.0215371f, +0.3075384f, +0.2824275f, -0.2215623f, -0.0856443f, +0.3917215f,
  +0.1524828f, +0.1276725f, +0.0235492f, +0.2624125f, +0.6062530f, +0.1870224f, +0.0358632f, -0.2266961f,
  -0.0539581f, -0.0181802f, +0.1773076f, -0.2525062f, -0.2691304f, -0.4249082f, +0.1945230f, +0.0126588f,
  -0.6746046f, +0.2402250f, +0.1329412f, -0.3930556f, -0.2740688f, +0.0822038f, -0.4092574f, +0.3980078f,
  +0.1582501f, +0.0158398f, +0.0805278f, +0.0574658f, -0.1553102f, +0.4038130f, +0.3748977f, +0.1633300f,
  +0.3003723f, +0.1862957f, +0.0458440f, -0.2429618f, +0.2428879f, +0.0776632f, -0.0644181f, +0.3127423f,
  +0.3467649f, -0.0451191f, -0.0186723f, -0.0389862f, -0.0593340f, -0.2346445f, +0.0866710f, +0.1621923f,
  +0.1114076f, -0.1109124f, -0.0179222f, -0.1096763f, +0.2140649f, -0.0289544f, -0.0845024f, +0.2409522f,
  +0.1754141f, -0.2094931f, +0.0293310f, -0.1118371f, +0.3061965f, -0.0481169f, +0.1148357f, +0.0807161f,
  +0.1474424f, +0.3178873f, +0.0978495f, -0.1432975f, -0.3094536f, -0.2712248f, +0.1566356f, +0.1953264f,
  +0.1606460f, +0.1321746f, -0.0029416f, -0.0984002f, -0.1932306f, -0.0321396f, -0.0098700f, -0.1413267f,
  +0.1419522f, -0.0523896f, -0.0078408f, -0.1481297f, +0.0476030f, -0.1758316f, +0.0764081f, -0.3365314f,
  -0.3143866f, +0.0415788f, +0.0809203f, +0.3010208f, -0.0514002f, -0.3001709f, +0.2434610f, -0.1999087f,
  +0.3576066f, -0.0255349f, -0.1916121f, +0.3629369f, -0.0375888f, +0.1020579f, +0.1713891f, -0.3436363f,
  -0.1906195f, +0.1805728f, -0.0384241f, +0.2881043f, +0.2117790f, +0.0037798f, -0.1312384f, +0.1087219f,
  -0.0113375f, +0.1317631f, -0.3235853f, -0.2335305f, -0.2160323f, -0.0947902f, +0.1355355f, -0.0669791f,
  -0.2182218f, +0.1949693f, -0.3748734f, -0.3040425f, +0.1557750f, -0.1330644f, +0.0118954f, +0.0784105f,
  +0.1425736f, -0.4386723f, -0.3754974f, -0.3660204f, +0.1417059f, +0.1002626f, +0.2431610f, +0.0274301f,
  -0.0816858f, +0.1410683f, -0.3053234f, +0.2447230f, -0.5409408f, +0.0502975f, +0.3497684f, -0.1871456f,
  -0.5625553f, -0.0972376f, -0.1999984f, -0.0829729f, -0.0842476f, -0.4835718f, -0.3471123f, +0.2199647f,
  -0.1879153f, +0.1125623f, +0.0094330f, +0.2161540f, +0.3456489f, +0.2969311f, -0.3129762f, +0.1481302f,
  +0.1137911f, +0.0291284f, +0.0350536f, +0.1456761f, -0.0326533f, +0.2329706f, -0.3386070f, +0.1465360f,
  +0.2755445f, -0.1112647f, +0.2027984f, -0.0852282f, -0.2126464f, -0.1932826f, -0.5560971f, +0.1300955f
);

const float biases[4] = float[4](
  +0.0232899f, +0.0202860f, -0.0500634f, -0.0427873f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer26 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0422680f, +0.1109086f, -0.2455914f, +0.4139885f, +0.0694017f, +0.1577876f, +0.3154495f, +0.1251125f,
  -0.0079542f, +0.0928573f, -0.2543888f, +0.5078098f, -0.3651032f, +0.1455781f, -0.0157341f, -0.6836807f,
  -0.1837517f, +0.1598121f, -0.0376033f, +0.3397905f, -0.2588139f, -0.1200722f, +0.0459881f, -0.0667969f,
  -0.0042527f, +0.0830619f, -0.3273433f, -0.0771070f, +0.1401588f, -0.5431563f, -0.0257143f, +0.0166776f,
  -0.0665957f, +0.0487738f, -0.1418422f, +0.0101099f, -0.0549773f, +0.0775715f, +0.1472609f, +0.1458856f,
  +0.0842498f, -0.3198165f, -0.0913195f, -0.1040627f, -0.0420843f, -0.0397315f, +0.1757168f, +0.1002372f,
  -0.0782873f, +0.3329466f, +0.2186984f, +0.0328698f, -0.0287301f, -0.1598466f, -0.1294752f, +0.0644965f,
  -0.5160155f, +0.0674938f, -0.2016515f, +0.1149312f, -0.3831829f, +0.2014168f, -0.1174500f, +0.0567612f,
  -0.2446513f, +0.0094346f, +0.1683278f, +0.2604994f, -0.0717186f, +0.1862386f, -0.2481228f, +0.1960226f,
  +0.0111749f, -0.1171071f, +0.1970968f, -0.1950328f, +0.2389157f, +0.0215029f, -0.1705338f, +0.1891998f,
  +0.0683287f, -0.1378463f, +0.0144369f, -0.0072010f, +0.1080226f, +0.0083641f, +0.0324327f, +0.1228197f,
  +0.1972093f, -0.1837209f, +0.0111423f, -0.0396275f, -0.0416431f, +0.1064342f, -0.0130269f, +0.1525178f,
  +0.1121019f, +0.0350840f, +0.0503041f, -0.1116112f, -0.0127710f, -0.0783769f, -0.0303755f, -0.0573455f,
  +0.3765281f, +0.1625101f, +0.1924817f, -0.2368187f, -0.0157434f, -0.1883358f, +0.1416817f, +0.0037785f,
  -0.0293177f, +0.0295575f, +0.1027278f, +0.0755234f, +0.0192726f, +0.1288652f, +0.1381869f, -0.1345133f,
  +0.0445414f, -0.1113537f, -0.0521978f, -0.0226715f, +0.1201938f, +0.0570488f, +0.0627898f, -0.1448314f,
  -0.0127419f, -0.0316904f, +0.0849222f, -0.0439955f, -0.0641855f, -0.1509773f, +0.2590055f, -0.1343369f,
  +0.0982261f, +0.0291538f, -0.1784064f, +0.0322951f, +0.0519363f, -0.0608220f, +0.0791727f, -0.1319541f,
  -0.1955324f, +0.3840414f, -0.1781648f, +0.1529065f, -0.2857514f, -0.0685729f, +0.2067885f, -0.0584569f,
  +0.0180097f, +0.6825742f, +0.0277543f, +0.0338824f, -0.2282498f, +0.2692286f, +0.1680548f, -0.0266395f,
  -0.3326309f, +0.2531260f, +0.5244392f, -0.6162151f, +0.4270266f, +0.1139156f, -0.6293675f, -0.0669783f,
  -0.3894474f, +0.2382519f, -0.1297770f, +0.2834989f, +0.0401912f, -0.2363512f, -0.0167878f, +0.0338087f,
  +0.5395982f, +0.0129031f, -0.4522839f, +0.4467442f, -0.1392855f, +0.2324163f, -0.3222631f, +0.1452098f,
  +0.1681214f, -0.1231575f, -0.1669359f, +0.0442662f, -0.3741468f, -0.0621621f, +0.0239585f, +0.2724060f,
  +0.0934913f, +0.2435167f, +0.0155083f, +0.1455040f, -0.1148951f, +0.1216343f, +0.1771203f, -0.1072279f,
  -0.3465246f, +0.1904812f, -0.1691139f, -0.2243357f, +0.3061936f, -0.3482549f, -0.7961649f, -0.1323042f,
  -0.0771839f, +0.2089606f, -0.0574069f, +0.0785075f, +0.0783427f, +0.1896515f, -0.1023120f, -0.0180771f,
  +0.5419807f, -0.2029636f, -0.3742466f, -0.0324084f, -0.3558741f, -0.2402796f, -0.0662536f, -0.2659653f,
  -0.3756683f, +0.0687320f, -0.0296210f, -0.1099050f, +0.1057164f, -0.3916383f, +0.0235076f, +0.3441329f,
  +0.0761628f, +0.2618621f, +0.0233064f, -0.3901170f, +0.3413595f, -0.1770117f, -0.2847993f, +0.1486386f,
  +0.0716650f, +0.0233804f, +0.1028347f, +0.2108004f, -0.1962957f, -0.2761430f, -0.4354367f, +0.3995353f,
  -0.3497780f, +0.6804695f, +0.0662920f, +0.3863078f, +0.0737197f, -0.7462566f, -0.0140942f, -0.5374339f,
  -0.0964696f, +0.2152598f, +0.4917234f, -0.1274090f, +0.3417132f, +0.1256023f, -0.1898621f, -0.2181895f,
  +0.0501077f, -0.3837309f, -0.1395148f, +0.0116882f, +0.1045277f, -0.1066702f, +0.2536061f, +0.0968338f,
  +0.4750905f, -0.2738230f, -0.0299276f, +0.1406678f, -0.1238559f, -0.0660832f, +0.2078076f, -0.0707056f,
  +0.2515666f, +0.2276038f, +0.0783199f, -0.1444066f, +0.0921152f, +0.1712221f, +0.1648459f, -0.0447330f
);

const float biases[4] = float[4](
  -0.0272173f, +0.0222556f, -0.0308119f, +0.0919122f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer27 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0642171f, -0.1375388f, +0.2805249f, +0.3546592f, -0.1837662f, -0.1203176f, -0.1566808f, +0.1891843f,
  +0.2579119f, +0.2191381f, +0.3230585f, +0.2520638f, +0.2012113f, -0.0437540f, -0.1579491f, +0.3761541f,
  -0.3880063f, -0.3047680f, +0.0519718f, +0.4870950f, +0.0885021f, +0.1403635f, -0.4834322f, +0.3573781f,
  -0.2692659f, +0.1794998f, +0.1423164f, -0.4645526f, +0.4609258f, -0.2433110f, +0.1365510f, -0.1628640f,
  +0.2256632f, +0.3705719f, +0.1112316f, -0.7125593f, +0.0321340f, +0.0486189f, +0.2163463f, -0.3826038f,
  -0.3512073f, +0.0694077f, +0.0436613f, +0.1455210f, +0.0474701f, +0.2462677f, -0.2377386f, -0.2110366f,
  +0.0788626f, -0.0002373f, -0.0057809f, -0.0325339f, +0.1060373f, -0.1866090f, +0.5225955f, +0.0871178f,
  +0.2100759f, -0.0217929f, -0.1527849f, +0.0668167f, +0.1945126f, -0.0118388f, +0.0760797f, -0.0509783f,
  -0.2283673f, +0.2690983f, -0.0870244f, +0.2825281f, -0.3035533f, +0.3932288f, -0.2343512f, -0.0810701f,
  +0.2501415f, +0.2777224f, -0.3249712f, -0.0170206f, +0.2762081f, -0.0868443f, -0.0606971f, -0.1273161f,
  +0.3256575f, -0.4381488f, +0.1567643f, -0.0816316f, -0.0045969f, +0.1894018f, +0.1483686f, +0.1470198f,
  -0.1898217f, -0.1684266f, +0.0262431f, +0.1094754f, +0.1375329f, +0.2036882f, -0.2552823f, +0.0595125f,
  -0.1185227f, -0.0970868f, +0.2073535f, -0.1488217f, +0.2291830f, +0.0977891f, -0.0977284f, +0.2491263f,
  -0.2523773f, -0.0993117f, -0.1790844f, -0.5153657f, +0.1781845f, -0.0853876f, -0.0456151f, -0.6591443f,
  -0.0453505f, +0.0119974f, +0.0523838f, +0.0088392f, -0.4128175f, -0.0681438f, -0.3078985f, +0.1284932f,
  +0.0917533f, +0.0054892f, +0.2137942f, +0.1581978f, -0.2101434f, +0.1063250f, -0.0035850f, +0.2670516f,
  -0.1837302f, -0.1162646f, +0.3235160f, -0.2994765f, -0.1563145f, +0.2532422f, -0.0177566f, -0.1755073f,
  +0.0137015f, -0.0907898f, +0.3132092f, -0.4054016f, -0.4973502f, -0.1318140f, +0.0145722f, -0.0310733f,
  +0.1301494f, -0.1951954f, -0.3625675f, +0.4546778f, -0.0554754f, -0.0964528f, -0.3345129f, -0.0899819f,
  +0.0332672f, -0.1354941f, -0.4709480f, -0.5999494f, +0.1411239f, +0.0341585f, -0.5012300f, -0.3643885f,
  -0.0988706f, +0.3961506f, +0.0975787f, -0.3277928f, +0.2604805f, -0.1846767f, +0.8688610f, -0.0397750f,
  +0.0552763f, -0.0292674f, -0.0349633f, +0.2260535f, -0.2423057f, -0.1777589f, +0.0997391f, -0.0560227f,
  +0.4339087f, -0.5879723f, -0.3221131f, +0.5352017f, -0.3913105f, -0.0755128f, -0.8624909f, +0.3613363f,
  +0.1865298f, -0.1357930f, -0.3274922f, -0.1475957f, +0.2041070f, -0.1280898f, -0.1891596f, -0.5701500f,
  -0.1800307f, +0.3688136f, +0.3270013f, -0.5486653f, +0.0016360f, +0.2960474f, +0.1210355f, -0.3300042f,
  +0.2222754f, -0.0084256f, +0.0339615f, -0.2572334f, +0.3158864f, -0.0469412f, +0.2000002f, +0.0967701f,
  +0.1254680f, -0.1648888f, +0.0071715f, +0.4334984f, +0.0711748f, -0.0732572f, -0.0374384f, +0.3287767f,
  +0.0626844f, +0.3825063f, +0.5121439f, +0.0323487f, +0.0981272f, -0.1771815f, +0.0407922f, +0.0594167f,
  +0.0096508f, -0.1321571f, +0.3527122f, -0.0345526f, +0.1638109f, -0.0790936f, +0.0123353f, +0.0838321f,
  +0.0340435f, -0.0787054f, +0.2684602f, +0.2613888f, -0.1761034f, -0.2346744f, +0.0410241f, -0.1073089f,
  -0.0568116f, +0.1592423f, -0.3169900f, +0.1185907f, +0.0907024f, +0.0786771f, -0.1017314f, +0.1440766f,
  -0.0318938f, +0.1269391f, -0.2058070f, +0.1780801f, -0.2585239f, +0.2925100f, -0.0114327f, -0.2099237f,
  +0.1613937f, +0.1377608f, -0.3790380f, -0.2348346f, +0.0506574f, +0.1580655f, -0.3323207f, +0.0009048f,
  -0.1134884f, +0.1774786f, +0.3401411f, -0.1775656f, +0.1707074f, +0.1409714f, -0.1393197f, +0.1004659f,
  -0.0360306f, +0.0934910f, +0.1871054f, +0.0244347f, -0.0110046f, +0.3012765f, -0.3108073f, -0.2783023f,
  +0.0423766f, +0.0460226f, +0.3025935f, -0.0913843f, -0.0849444f, +0.1980664f, -0.2629883f, +0.1542307f
);

const float biases[4] = float[4](
  +0.0157364f, +0.0563853f, -0.2485019f, +0.0887974f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer27 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1851793f, -0.0977784f, +0.5389928f, +0.0165890f, -0.0672762f, +0.1184660f, +0.2761960f, +0.1696663f,
  +0.0116523f, -0.3348336f, +0.6011806f, -0.0711488f, +0.0300219f, -0.0522827f, -0.1229299f, +0.0988928f,
  +0.0596721f, +0.0016123f, -0.0389331f, -0.0558612f, -0.0007333f, +0.0642349f, +0.1150454f, -0.1242341f,
  -0.2172286f, +0.1468612f, +0.4491343f, -0.2089770f, +0.4447414f, +0.1982500f, -0.4571226f, -0.1249107f,
  -0.4196557f, +0.1086418f, +0.3488726f, -0.2503340f, +0.1046719f, +0.1578828f, +0.2569985f, -0.1845369f,
  -0.2612337f, +0.3641871f, -0.2534052f, +0.0030080f, -0.4906962f, +0.1306298f, -0.2095390f, +0.0599951f,
  -0.5060174f, -0.2987880f, +0.0060549f, +0.3947349f, +0.1900015f, -0.1832791f, -0.5159417f, +0.2029639f,
  -0.8738933f, -0.0094409f, -0.1374435f, -0.1531261f, -0.1254353f, +0.0445074f, -0.2720474f, +0.3059621f,
  +0.0967865f, +0.2932692f, -0.0706330f, +0.2014573f, +0.1451198f, +0.0479216f, -0.1206519f, +0.4695478f,
  +0.0195423f, -0.1022260f, -0.1023545f, +0.2440907f, -0.0766853f, -0.0244529f, +0.2694345f, -0.3024957f,
  +0.3826397f, +0.5914376f, -0.2541966f, +0.0818131f, -0.3531542f, +0.0136589f, -0.1658607f, +0.3391607f,
  -0.3666593f, -0.5138640f, +0.0758820f, -0.3471236f, +0.3949976f, +0.2538233f, -0.4207540f, -0.0168797f,
  -0.1873480f, -0.2758147f, -0.0747644f, -0.3608671f, +0.1414969f, -0.0538862f, +0.0513075f, +0.3716174f,
  -0.0111137f, -0.1085210f, -0.3215866f, +0.1114294f, -0.3190348f, -0.0907996f, +0.1204739f, +0.5127304f,
  +0.2600801f, +0.0443540f, -0.2808399f, -0.0073610f, +0.1589161f, +0.0442421f, +0.1122195f, -0.2828949f,
  -0.1861508f, -0.4025896f, +0.1225730f, +0.1138498f, -0.0456120f, -0.3624406f, -0.0618350f, -0.1357132f,
  +0.1342238f, +0.2873622f, +0.1990343f, +0.3172991f, -0.2222930f, -0.1531351f, -0.1994967f, +0.1401394f,
  -0.0720768f, +0.2800916f, +0.0470669f, +0.1703168f, -0.0359889f, +0.1742047f, -0.0486332f, -0.3903244f,
  +0.0606219f, +0.1595690f, -0.0459085f, -0.0169407f, +0.1700376f, -0.0988494f, +0.0901890f, -0.1183959f,
  +0.2946214f, -0.2398928f, -0.5308715f, -0.0917412f, -0.2842419f, +0.1594639f, -0.0288105f, +0.3226218f,
  -0.0353029f, -0.4895746f, +0.1068573f, +0.0598406f, +0.0683525f, -0.1409539f, +0.1745535f, -0.4216793f,
  -0.0232836f, +0.1386007f, -0.0304738f, -0.2862732f, +0.0053295f, -0.0724911f, -0.2340537f, +0.2006558f,
  +0.1029428f, +0.1539787f, -0.2260841f, +0.2386782f, -0.1620559f, +0.1873200f, +0.5318368f, +0.1558811f,
  -0.6612847f, -0.1492443f, -0.2035276f, -0.2150004f, -0.0090714f, +0.1081037f, +0.2641856f, +0.0895272f,
  -0.2373077f, +0.0491738f, +0.0275152f, +0.0845316f, -0.0219751f, -0.1617219f, +0.0037007f, +0.0663807f,
  +0.4108319f, +0.0209611f, +0.0364461f, +0.0390063f, +0.3305582f, -0.4397286f, +0.0284611f, +0.1165888f,
  -0.0388784f, +0.0390192f, +0.0634683f, +0.1741475f, +0.0853982f, +0.0853849f, +0.0720194f, -0.0948117f,
  -0.0583357f, -0.1347929f, +0.3336711f, +0.1032313f, +0.7307423f, +0.0708548f, +0.0534011f, -0.0992638f,
  -0.2966525f, +0.0978823f, -0.3180357f, +0.0354952f, -0.0298127f, -0.1812997f, -0.2848707f, -0.0983090f,
  +0.0798213f, +0.0683847f, -0.1192175f, +0.1363636f, -0.1794378f, +0.0191756f, -0.1075077f, -0.1530729f,
  +0.0461839f, -0.2666632f, -0.0555367f, -0.4528335f, +0.3687133f, -0.0073804f, -0.1112732f, +0.0159783f,
  -0.1627696f, -0.0557246f, +0.0139582f, +0.2267589f, +0.0226187f, -0.1920091f, +0.3680914f, -0.7487870f,
  +0.0727325f, +0.1911612f, +0.0103579f, +0.1914865f, -0.2259165f, +0.0765455f, +0.5467788f, -0.4953834f,
  -0.1123861f, -0.1367317f, +0.1529559f, +0.1251839f, -0.0501648f, +0.1072088f, -0.1051052f, +0.1594983f,
  +0.2173891f, -0.0558287f, +0.1370854f, +0.4769475f, -0.4971928f, -0.2585776f, -0.4648953f, +0.3856736f,
  +0.3642400f, +0.1212193f, -0.0264455f, +0.3927340f, -0.2246583f, +0.2590728f, -0.0540671f, +0.0729431f
);

const float biases[4] = float[4](
  -0.0935545f, +0.0408199f, +0.1551464f, -0.0676083f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer28 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1275438f, +0.0730318f, +0.1873090f, -0.3118088f, -0.0325665f, +0.1432002f, +0.1395099f, +0.0830443f,
  +0.1021364f, -0.0473969f, +0.3419400f, -0.2653034f, +0.0089842f, +0.2468293f, +0.0711692f, +0.2306486f,
  -0.0017976f, -0.1220071f, +0.0318444f, +0.0039107f, +0.0673232f, +0.1706553f, -0.1990322f, +0.3731714f,
  +0.0141810f, +0.0137062f, +0.4040354f, -0.2128308f, -0.0518722f, -0.0040076f, +0.4560539f, +0.2936378f,
  -0.5212048f, +0.2588594f, +0.3379340f, -0.0708444f, -0.0233254f, +0.2063363f, +0.0984059f, +0.2161099f,
  -0.0355177f, +0.0882449f, -0.3504528f, +0.1195086f, +0.1715166f, +0.1428568f, -0.2380554f, +0.3557195f,
  +0.0960990f, -0.0398051f, +0.1067976f, -0.3678140f, -0.2935922f, +0.2115137f, -0.1927763f, -0.0986402f,
  -0.2731741f, -0.2685379f, +0.1751623f, +0.0529579f, -0.4731241f, +0.1262589f, -0.0873103f, +0.3908717f,
  +0.0999095f, +0.0071590f, +0.2893003f, +0.4729978f, +0.2909520f, +0.2293115f, -0.4322866f, -0.0213258f,
  +0.0051484f, -0.1675669f, +0.2328431f, -0.0900828f, -0.3669243f, -0.2792070f, +0.0916559f, +0.4977105f,
  +0.1642530f, -0.0052060f, +0.1459694f, +0.2019523f, +0.0795751f, +0.1326794f, +0.1381943f, +0.2705645f,
  -0.0896047f, +0.2811094f, +0.0316126f, +0.1013816f, -0.0668767f, +0.2706206f, -0.1565767f, +0.3563168f,
  -0.1155340f, -0.0773565f, -0.1108847f, -0.2660714f, -0.4759295f, -0.2774968f, +0.1115317f, -0.2200148f,
  -0.1632176f, +0.1780135f, -0.4118584f, -0.1979710f, -0.0389178f, +0.0118476f, -0.3568982f, +0.2173753f,
  +0.0250988f, +0.3471930f, -0.1982382f, -0.1658553f, -0.2496401f, +0.0315517f, -0.1823083f, +0.1497509f,
  +0.1702399f, +0.3102323f, +0.2213789f, -0.4311124f, -0.0901081f, -0.0611468f, +0.3539155f, -0.0202813f,
  +0.5475677f, +0.4692088f, +0.7637557f, -0.3228768f, +0.3225266f, -0.4492107f, +0.1988919f, -0.1760096f,
  +0.0251826f, +0.0657331f, -0.0439124f, -0.5060688f, -0.0852716f, -0.0345035f, -0.0365473f, +0.0976276f,
  -0.2542582f, -0.1724764f, +0.0783665f, -0.1171645f, -0.1874688f, +0.4687173f, +0.0396104f, +0.0225627f,
  -0.0102370f, -0.1801360f, -0.0596367f, -0.0250807f, +0.1437754f, +0.3383406f, -0.1057880f, +0.1273564f,
  +0.2436315f, -0.2779850f, -0.3871200f, -0.1338879f, -0.2473644f, -0.0314339f, -0.0365342f, +0.0897096f,
  -0.0410311f, -0.0307159f, -0.2686117f, +0.3937516f, -0.3571047f, +0.1162147f, +0.2829009f, +0.0988838f,
  -0.1331251f, +0.2416025f, +0.0381369f, +0.0935347f, -0.7808269f, +0.5876184f, -0.0063162f, -0.2258072f,
  +0.2147897f, -0.0381520f, -0.2694360f, +0.0146662f, -0.2281556f, -0.0031359f, -0.3476845f, +0.0977334f,
  +0.0844055f, -0.0035415f, -0.0023615f, -0.1403272f, -0.2389764f, -0.0426156f, +0.0475108f, +0.2848874f,
  -0.0672029f, +0.0782820f, +0.6308339f, -0.0106414f, -0.3749380f, +0.0640418f, +0.3435090f, +0.4089673f,
  +0.0533915f, +0.4877195f, +0.2395766f, -0.0323138f, +0.0937431f, +0.0625765f, +0.0574977f, +0.0564164f,
  -0.0940319f, +0.3464658f, -0.2482360f, +0.5173894f, -0.1003283f, -0.2755047f, -0.2964637f, -0.0827141f,
  -0.3556684f, +0.1496217f, +0.2073725f, +0.2523230f, +0.2169178f, -0.1672973f, -0.1383418f, -0.3319362f,
  -0.1317627f, -0.0694405f, -0.0508964f, +0.0156793f, -0.5786616f, -0.0200752f, -0.0618984f, -0.1804150f,
  -0.1996123f, +0.2920958f, -0.6980032f, +0.6017185f, +0.1142703f, -0.1358717f, +0.0966501f, -0.2143289f,
  +0.0254702f, +0.0423482f, +0.7543308f, -0.1023427f, +0.1433911f, +0.0152094f, -0.1347386f, -0.2443380f,
  +0.0147125f, -0.0069786f, -0.0887398f, -0.1368084f, -0.0740836f, -0.0334518f, -0.0762477f, -0.0082008f,
  -0.2608632f, +0.0076163f, +0.0618697f, -0.0423379f, -0.0235941f, +0.1049626f, -0.1712024f, -0.0285624f,
  -0.0915306f, -0.1793417f, -0.2515512f, -0.2139978f, +0.1199852f, +0.2306394f, +0.3212309f, -0.0115389f,
  -0.0759200f, -0.2466628f, -0.0132333f, -0.1779363f, +0.1430940f, +0.1801946f, +0.0518227f, +0.0310121f
);

const float biases[4] = float[4](
  +0.1447515f, +0.2103914f, -0.0310090f, -0.0246163f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer28 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0131209f, +0.1185109f, -0.0932524f, +0.1842851f, -0.0869038f, -0.0231777f, -0.1886184f, +0.1038820f,
  -0.0364434f, +0.1377812f, +0.0470088f, -0.0084135f, -0.1269756f, +0.0797634f, -0.3066322f, -0.0995633f,
  +0.0569191f, +0.2066615f, -0.2510971f, -0.1236618f, -0.2180382f, -0.0415093f, -0.3347029f, +0.2422167f,
  +0.1804582f, +0.2450325f, +0.1029530f, -0.2082141f, +0.2751758f, -0.1609989f, -0.1281859f, -0.0261269f,
  +0.0620691f, -0.0530486f, -0.3099091f, +0.2510123f, -0.1555960f, +0.2711978f, -0.0126733f, -0.1655421f,
  -0.1108705f, -0.0868052f, -0.1358408f, +0.2856485f, -0.1677471f, +0.1999336f, -0.3599822f, -0.0833901f,
  +0.1461800f, -0.2267590f, +0.5176381f, -0.0510890f, +0.2934047f, +0.1603803f, +0.0613984f, +0.0840304f,
  -0.1363836f, +0.6141025f, +0.3031598f, -0.3246474f, +0.3934380f, -0.0123653f, +0.1436944f, -0.0475962f,
  +0.1987483f, -0.0032822f, -0.2165357f, -0.1814498f, +0.2579982f, +0.1792122f, +0.0126248f, -0.2608522f,
  -0.0649741f, -0.1462175f, -0.1022321f, -0.1629513f, -0.0239425f, +0.2424333f, +0.0981601f, -0.0562218f,
  +0.1052661f, -0.2131272f, +0.0523521f, -0.1382332f, -0.0692514f, +0.0577920f, +0.2057180f, +0.0309412f,
  +0.2275019f, -0.1206173f, -0.2529970f, -0.1220608f, +0.1477394f, +0.0732702f, -0.0495625f, -0.0154977f,
  -0.1174001f, -0.0447109f, +0.1079186f, +0.1864958f, -0.1836347f, +0.0730665f, +0.1325003f, +0.0289799f,
  -0.0885505f, +0.0350067f, +0.0301672f, -0.1106041f, -0.1456575f, +0.1702321f, -0.0562716f, +0.1129010f,
  +0.0531692f, -0.0383212f, +0.0802256f, +0.0733119f, +0.0067798f, -0.1607985f, +0.0247176f, -0.0486037f,
  -0.0905153f, +0.0728363f, -0.0813819f, +0.1308487f, -0.2436067f, -0.0923080f, -0.0121610f, +0.1170333f,
  +0.0691349f, +0.0180872f, +0.0097221f, +0.0782019f, -0.1907262f, +0.1234159f, +0.1919946f, +0.1784573f,
  +0.0321320f, +0.2363771f, +0.1815474f, +0.0722962f, -0.0042765f, -0.0252352f, +0.0256510f, -0.0061717f,
  -0.0871881f, -0.0777348f, +0.1608370f, -0.1861531f, -0.0661064f, +0.0085126f, -0.0562566f, +0.1849852f,
  -0.0773938f, -0.0209574f, +0.1521256f, +0.1860657f, -0.2012440f, +0.3021227f, -0.3916208f, +0.2411730f,
  -0.2103376f, -0.3877605f, -0.2174099f, -0.0617576f, -0.0157012f, +0.0951865f, -0.1380137f, +0.2585857f,
  +0.3017923f, +0.0235185f, -0.0158243f, -0.0032364f, +0.0417640f, +0.2995531f, -0.3732974f, -0.2032459f,
  +0.2146014f, +0.0130358f, +0.7008841f, -0.1007780f, -0.3065735f, +0.4022444f, -0.2405109f, -0.1646079f,
  +0.1092324f, -0.2263455f, -0.0437521f, +0.3282343f, +0.1786439f, +0.3840913f, +0.1550306f, +0.2837545f,
  +0.3457938f, -0.2120453f, -0.2860996f, -0.2946593f, +0.1469813f, +0.3846324f, -0.2368929f, +0.0066350f,
  +0.0967761f, -0.1761354f, -0.0184806f, +0.1708696f, -0.3572426f, +0.1573866f, -0.0942202f, -0.0271265f,
  +0.2225277f, -0.2320536f, +0.2137433f, +0.1474405f, -0.3209787f, -0.2143820f, +0.0163847f, -0.0717091f,
  +0.1061318f, -0.0566520f, -0.1529013f, -0.0834573f, -0.3244783f, +0.0299852f, +0.0005953f, +0.0130398f,
  -0.0987060f, -0.0724803f, -0.1457465f, +0.1778226f, -0.1530905f, +0.1011262f, -0.0737924f, +0.0197834f,
  +0.0744843f, -0.0093805f, -0.2654091f, -0.2225111f, -0.4228757f, +0.1117758f, -0.3009503f, +0.0104097f,
  +0.1470544f, -0.2544782f, +0.5230797f, +0.0564504f, -0.3894530f, -0.0878286f, -0.0679106f, +0.2710472f,
  +0.1865074f, +0.3103994f, +0.6921819f, -0.0481876f, -0.3090760f, -0.2856033f, -0.0846844f, +0.5779599f,
  +0.1791239f, +0.0420290f, -0.2281301f, -0.1323406f, +0.2081217f, -0.2319983f, -0.2776283f, +0.2269680f,
  +0.0469181f, -0.0341108f, -0.5264964f, +0.0821208f, -0.0942685f, -0.2268803f, +0.1590189f, +0.0300442f,
  -0.1876950f, -0.2581961f, +0.0574714f, +0.2071191f, -0.2334672f, +0.0272738f, -0.2643927f, +0.5148346f,
  +0.1597959f, +0.0955472f, +0.1597076f, +0.1242559f, +0.1447353f, -0.0707918f, -0.1109010f, +0.3146824f
);

const float biases[4] = float[4](
  +0.0245555f, -0.0495248f, -0.1259454f, -0.0791557f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer29 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2562341f, -0.0767068f, -0.2821361f, +0.2566861f, -0.0454704f, -0.1983805f, -0.2981116f, +0.4710811f,
  +0.1399466f, +0.3955111f, +0.4001803f, +0.3042520f, +0.1540022f, +0.0889249f, +0.0383032f, +0.1663713f,
  +0.6457664f, -0.8568956f, -0.1800605f, -0.5049456f, +0.6017767f, -0.1511946f, +0.1616848f, +0.0249000f,
  +0.0058422f, -0.2555265f, -0.0994381f, +0.3576509f, -0.0605683f, -0.2111514f, +0.0436321f, -0.1645183f,
  -0.0778627f, -0.3536303f, +0.0876238f, -0.0028243f, -0.1884693f, -0.1840958f, +0.3565646f, +0.0485948f,
  -0.0580762f, -0.5966720f, -0.1107209f, -0.1838588f, +0.1172421f, -0.1411376f, +0.4358115f, -0.1938993f,
  +0.2257590f, +0.2277582f, -0.2444012f, -0.0305560f, -0.0281177f, +0.1179620f, +0.0842937f, -0.0230907f,
  -0.0920755f, +0.0479228f, +0.0860301f, +0.0404524f, +0.1269651f, +0.2795501f, -0.3047722f, -0.1900752f,
  +0.2948714f, +0.0112481f, -0.1086302f, -0.1136836f, +0.0406154f, +0.0208492f, -0.3993837f, -0.0696302f,
  +0.0299934f, +0.1070634f, +0.1199549f, +0.0860895f, -0.0927505f, -0.2573200f, +0.0942359f, -0.1450439f,
  +0.5588484f, -0.3622547f, -0.1394905f, -0.3126033f, +0.1579000f, -0.4921472f, -0.0396730f, +0.0470535f,
  -0.0461521f, -0.4005190f, +0.0050918f, -0.1210350f, +0.2186282f, +0.0851787f, -0.1821627f, +0.3394612f,
  +0.2199787f, +0.0195961f, -0.3455714f, +0.1130743f, -0.1177059f, -0.3047089f, -0.1304212f, -0.1991460f,
  +0.0077749f, -0.1828746f, -0.5156974f, -0.2703413f, -0.0942547f, +0.0575017f, -0.6229639f, +0.2839909f,
  -0.5284131f, -0.0759156f, +0.2696688f, -0.0505594f, -0.3318757f, -0.0165595f, -0.2724751f, -0.0005752f,
  +0.1534039f, -0.1285194f, -0.0890047f, +0.0330295f, +0.0882934f, +0.3090886f, +0.1961678f, +0.3411008f,
  -0.1910236f, +0.0454098f, +0.1671747f, +0.2266981f, +0.2610282f, +0.3232044f, -0.1216496f, +0.0453718f,
  -0.2456229f, +0.1925941f, -0.2923079f, -0.0424646f, -0.3376413f, -0.0286870f, -0.1457995f, +0.0844954f,
  +0.1550928f, -0.1721676f, +0.0587144f, -0.0569933f, -0.1658349f, -0.1151166f, -0.1086939f, +0.0040314f,
  +0.0305947f, -0.4645577f, +0.0879182f, +0.1714075f, -0.3200518f, +0.2942869f, +0.2199621f, -0.0865682f,
  +0.0675568f, -0.0959845f, -0.0755274f, -0.0746358f, +0.0673205f, +0.2779946f, -0.2753525f, +0.0724120f,
  +0.1405115f, +0.2384345f, -0.3209253f, +0.2543983f, -0.0965272f, -0.1602560f, +0.5201441f, -0.2047679f,
  +0.0755481f, +0.1301575f, -0.0273931f, -0.0648028f, +0.4816886f, -0.0966171f, +0.5294125f, -0.2162182f,
  +0.4650705f, -0.0048703f, +0.2000845f, +0.5345182f, +0.5671970f, -0.3517665f, +0.3652482f, -0.0583155f,
  -0.1297422f, +0.2284747f, +0.1829423f, +0.2697368f, -0.0172070f, -0.1097725f, +0.2862197f, +0.1248616f,
  +0.1002618f, -0.0453566f, +0.1274015f, -0.2609894f, +0.1357393f, -0.0426533f, -0.1667221f, -0.0398924f,
  +0.2301318f, -0.3424367f, -0.0216064f, -0.1301413f, +0.3059459f, +0.0125369f, +0.4194338f, +0.0508577f,
  +0.0397327f, +0.3996159f, +0.2311431f, +0.1891677f, -0.1201712f, +0.0088979f, +0.0055010f, +0.1700235f,
  -0.2038554f, +0.0990032f, -0.3834289f, -0.0837694f, +0.1380313f, -0.0541800f, -0.2576637f, +0.2114807f,
  +0.0588541f, +0.1522838f, +0.0595256f, -0.3351444f, +0.2468321f, -0.1283719f, +0.1145568f, -0.1503796f,
  -0.2160970f, +0.0163679f, -0.0167800f, +0.0627293f, -0.0096501f, -0.1306264f, -0.7435840f, +0.3408445f,
  -0.4197934f, -0.4072249f, +0.1499714f, -0.0233138f, -0.3131127f, +0.0392705f, -0.1219078f, -0.1466232f,
  -0.0198895f, -0.1239028f, -0.1821177f, +0.2943723f, -0.0157198f, +0.3073223f, -0.2163135f, -0.3437897f,
  +0.1200053f, +0.0370469f, -0.1438410f, +0.0954909f, -0.2993209f, -0.0376283f, -0.2867331f, +0.0871096f,
  -0.3236103f, +0.4303291f, -0.0982307f, +0.2307739f, -0.4255614f, -0.0810143f, +0.2392041f, +0.2885714f,
  -0.0833910f, -0.1277136f, -0.0987420f, -0.0161795f, -0.4344172f, +0.1530274f, -0.1809839f, -0.0719265f
);

const float biases[4] = float[4](
  -0.0699457f, -0.0861338f, -0.1712077f, +0.0924916f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer29 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0232879f, +0.1051790f, -0.1079594f, +0.0071339f, -0.0749958f, -0.0258719f, -0.1819921f, +0.2146226f,
  -0.0778134f, -0.1225163f, -0.0260547f, +0.2332307f, +0.0948175f, +0.3203288f, -0.1871423f, +0.1613131f,
  +0.2696935f, -0.0387122f, +0.1013426f, +0.0024277f, -0.0232537f, +0.3599964f, +0.0635749f, -0.0214332f,
  +0.0317770f, +0.2181391f, -0.1688981f, -0.0867722f, +0.0149210f, +0.1418978f, +0.0436948f, -0.2052302f,
  +0.0441675f, +0.0810328f, +0.3092459f, -0.0967104f, +0.3639596f, -0.2534386f, -0.2165521f, -0.4713103f,
  -0.1420462f, -0.0574032f, +0.5022848f, +0.3420908f, -0.0144727f, +0.0308145f, -0.1861473f, -0.5544802f,
  -0.0641987f, -0.0344550f, -0.0879966f, -0.2297716f, -0.0105081f, +0.1387405f, -0.0359692f, -0.3295482f,
  +0.2750104f, +0.0519771f, -0.3388997f, +0.0077286f, -0.3663938f, -0.2942389f, -0.2884792f, +0.1150356f,
  -0.6003316f, +0.1840875f, +0.1788937f, -0.0842554f, -0.6230192f, -0.1645917f, +0.0365167f, -0.1416807f,
  +0.0978249f, +0.0220394f, +0.1750635f, -0.0138635f, +0.1311330f, -0.0568915f, +0.3331078f, -0.1949707f,
  +0.1618443f, -0.1636319f, +0.1129284f, -0.0078472f, -0.3998785f, +0.0044731f, +0.0668771f, -0.4124739f,
  -0.0325126f, +0.0805733f, -0.2570401f, +0.0051103f, -0.4824530f, +0.2988363f, +0.4509935f, -0.2123657f,
  +0.4651796f, -0.1095695f, -0.0276680f, -0.1581440f, +0.0524028f, -0.0229032f, -0.1154100f, +0.0767475f,
  -0.2189238f, -0.2508961f, +0.3865016f, +0.0322681f, -0.0165701f, -0.1698763f, -0.2538217f, -0.0327131f,
  -0.2010338f, -0.0140160f, -0.3639522f, +0.0135447f, +0.2333704f, +0.0322876f, +0.1692146f, +0.4791389f,
  +0.0165388f, -0.0635438f, +0.1213025f, -0.0008243f, +0.0229369f, -0.0352660f, +0.1304032f, -0.0321840f,
  -0.0139150f, -0.3967989f, +0.3105464f, +0.1998461f, +0.1635942f, -0.2137990f, -0.4089228f, -0.0812827f,
  +0.1525926f, +0.0586056f, +0.1895140f, +0.5401796f, +0.1137591f, +0.2351304f, -0.1482876f, +0.1266814f,
  -0.0043626f, +0.4395549f, +0.0625830f, -0.0556739f, +0.0498964f, +0.0009711f, +0.3026093f, -0.1067308f,
  +0.5699878f, +0.3441962f, +0.0329032f, -0.1123699f, -0.3676682f, -0.0996050f, +0.3191242f, +0.1955035f,
  +0.2228640f, -0.2415519f, -0.0982719f, -0.2124948f, +0.1184576f, +0.0194486f, +0.2495874f, +0.1636232f,
  -0.3708376f, +0.1023316f, +0.3970551f, +0.1603753f, -0.3763052f, +0.1762580f, +0.2311897f, +0.2739312f,
  -0.1390203f, -0.5291494f, -0.1337144f, -0.3446122f, -0.0413177f, -0.0392009f, -0.2080841f, +0.3005590f,
  -0.2398747f, -0.7408962f, -0.1776863f, -0.2761635f, +0.4135915f, -0.2279585f, -0.2957832f, +0.0576565f,
  -0.3786010f, +0.0267526f, +0.5158359f, -0.0267971f, -0.0066403f, -0.0348199f, -0.1643690f, -0.1330844f,
  +0.0324354f, -0.0054231f, +0.0925510f, -0.1462784f, +0.1540621f, +0.2308082f, -0.9152582f, +0.1886717f,
  +0.2110539f, -0.0568860f, +0.1775285f, -0.2110432f, -0.1844418f, +0.2678081f, -0.6520709f, -0.0697699f,
  +0.1662930f, +0.2546506f, +0.1802664f, -0.0030972f, -0.0576764f, -0.0561777f, +0.1005709f, -0.1010525f,
  +0.0007112f, +0.0249350f, +0.1365676f, -0.0099975f, +0.0162324f, +0.0242892f, -0.4935749f, +0.1865149f,
  -0.0640030f, +0.0385968f, +0.2768264f, +0.0223703f, +0.1113672f, -0.0774284f, -0.0035304f, +0.0135116f,
  +0.3901445f, -0.1483077f, -0.1489307f, +0.2413800f, -0.0021303f, +0.2848892f, +0.4115759f, -0.2659699f,
  +0.2643242f, +0.2594141f, -0.0174314f, +0.0413214f, +0.0029556f, +0.1050682f, -0.3203607f, -0.2377824f,
  -0.1831072f, -0.0052203f, +0.0783756f, -0.1037581f, -0.1916230f, -0.2880580f, -0.4404725f, -0.0751943f,
  +0.2005862f, +0.1450513f, +0.0065004f, +0.2236119f, -0.1539870f, +0.3081732f, +0.2125006f, +0.2044549f,
  +0.3309110f, +0.2485945f, -0.0650001f, +0.1586134f, +0.0012740f, +0.1410850f, -0.3226600f, -0.1621817f,
  -0.5244625f, +0.1450961f, +0.0060743f, +0.0380065f, -0.2465969f, -0.0793045f, -0.1194012f, +0.1030055f
);

const float biases[4] = float[4](
  -0.1803851f, +0.0100061f, -0.2047891f, -0.0310468f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer30 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0805175f, +0.0684507f, -0.1679011f, -0.1879380f, +0.0392450f, -0.0672804f, -0.4361361f, +0.4413714f,
  -0.0708119f, +0.0887048f, -0.0462637f, -0.1375280f, -0.1356381f, -0.3674393f, -0.2276896f, -0.0707228f,
  -0.0833729f, -0.3135757f, -0.0999159f, -0.2782040f, -0.0313965f, +0.0332510f, -0.0740712f, -0.0343974f,
  +0.2271037f, +0.2493421f, -0.1640971f, +0.1822183f, +0.5408101f, +0.1538841f, -0.0100831f, +0.1317756f,
  -0.2562955f, -0.0599309f, -0.4536000f, +0.0733781f, +0.5264426f, -0.0704014f, -0.0484615f, -0.1971972f,
  +0.0575918f, -0.4086273f, -0.4303517f, +0.0842611f, -0.1611584f, -0.1934698f, -0.0179461f, -0.2206813f,
  -0.3270379f, +0.0870973f, -0.2548733f, +0.0525157f, +0.1720018f, -0.0364684f, +0.2768846f, -0.0286968f,
  -0.0503560f, -0.4622957f, -0.1659888f, -0.1333746f, -0.2468403f, -0.2884063f, +0.1302598f, -0.0964494f,
  +0.0582549f, -0.1279644f, +0.1282630f, -0.0407900f, -0.1575159f, -0.1844663f, +0.4478928f, -0.1452931f,
  -0.0713626f, +0.0269594f, -0.1465318f, +0.3850455f, +0.0061393f, +0.0297098f, +0.2805273f, -0.2362393f,
  +0.2514330f, -0.1311967f, -0.7188894f, -0.0687596f, -0.0618366f, +0.1669706f, -0.1588377f, -0.1025449f,
  +0.1143656f, -0.3645563f, -0.3356593f, -0.0772968f, +0.1011558f, -0.2287208f, +0.0036652f, -0.0684510f,
  +0.0673983f, -0.1085067f, -0.2580555f, +0.1770953f, +0.5374905f, -0.0409816f, +0.2984059f, -0.0839281f,
  +0.5013525f, -0.0705546f, -0.2727302f, +0.5264285f, +0.1386981f, +0.2337846f, -0.1990117f, -0.1986209f,
  +0.4099292f, -0.1710101f, -0.0931619f, -0.1531225f, -0.2074357f, +0.0533505f, -0.0582402f, +0.1701378f,
  +0.3030733f, +0.0630595f, +0.1655136f, -0.3627596f, -0.0617377f, +0.3366210f, -0.1791147f, +0.1368705f,
  +0.4358259f, -0.1452468f, +0.3757786f, +0.0950025f, -0.4426664f, +0.2003316f, +0.0512687f, -0.0412759f,
  +0.0728490f, +0.0325893f, +0.2642612f, -0.2236157f, +0.0129026f, +0.0228690f, +0.4672638f, -0.2059466f,
  +0.0367041f, -0.0057840f, -0.1291126f, +0.0458749f, -0.0760759f, -0.1137939f, +0.0720739f, +0.0496319f,
  +0.0970102f, -0.1577786f, -0.2369918f, +0.0495489f, +0.2546216f, -0.1164200f, +0.0712488f, +0.0891115f,
  +0.1300339f, -0.5264115f, +0.0425247f, -0.1727583f, +0.0518141f, -0.0858970f, +0.1533218f, -0.0354031f,
  +0.0344679f, -0.2982312f, -0.0404153f, +0.2145799f, -0.1398532f, -0.1231937f, +0.1964633f, +0.2056778f,
  -0.0382903f, -0.2197823f, -0.1557783f, +0.0962183f, +0.0706074f, -0.2867179f, +0.1167156f, -0.0585780f,
  +0.3994608f, -0.4255827f, +0.0749671f, +0.0641936f, -0.1817658f, -0.1745248f, +0.1842171f, +0.1766253f,
  -0.0360672f, +0.1944075f, -0.5456041f, +0.2285020f, -0.2049233f, +0.1358383f, +0.5335896f, -0.1730712f,
  -0.1930378f, +0.0548564f, -0.3740257f, +0.3180892f, -0.4539755f, -0.0371781f, +0.4223705f, -0.3771975f,
  +0.4842536f, -0.1154114f, +0.2338378f, +0.0179754f, -0.3203269f, -0.0458746f, +0.5969197f, -0.1928268f,
  +0.0574498f, +0.0443231f, +0.0086230f, +0.0790687f, +0.0302870f, -0.1049011f, +0.1444297f, +0.1048754f,
  +0.0366775f, +0.2581686f, +0.3099905f, +0.0690960f, +0.0668347f, -0.2012104f, +0.0001422f, +0.2840176f,
  +0.0629587f, -0.0265174f, +0.1115756f, -0.1614178f, +0.1050220f, +0.0981858f, +0.2134213f, +0.1789473f,
  -0.0228557f, -0.2500188f, -0.2261517f, -0.1805234f, -0.5676866f, -0.4823232f, +0.2645688f, +0.2119237f,
  -0.2784520f, -0.1660812f, -0.3039989f, -0.3914987f, -0.1108388f, -0.1920836f, -0.0064106f, +0.2821821f,
  -0.2980194f, +0.0047402f, -0.0129315f, -0.0685430f, +0.3844207f, +0.4068674f, +0.1501175f, +0.0698685f,
  +0.3522862f, -0.2028659f, -0.0152390f, +0.1246029f, -0.1316436f, -0.1751525f, -0.2088213f, +0.0813602f,
  -0.3702610f, -0.1534819f, +0.2936085f, -0.3828568f, +0.2130436f, +0.1598419f, -0.5689973f, +0.1884519f,
  -0.3982150f, +0.3911256f, +0.0342847f, +0.1182104f, +0.1446506f, +0.2321870f, +0.0317741f, +0.1234373f
);

const float biases[4] = float[4](
  +0.2567839f, +0.1406415f, +0.1036669f, -0.1128701f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer30 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0268718f, +0.0970191f, -0.0207790f, +0.1166461f, -0.1282931f, +0.1442713f, -0.0502836f, +0.1518011f,
  -0.0523707f, +0.0202436f, -0.1978509f, +0.2436761f, +0.0832671f, +0.1046501f, -0.0192630f, -0.1992583f,
  +0.0345234f, -0.0001064f, +0.3199835f, +0.1538380f, -0.1096654f, +0.2844540f, +0.1673560f, +0.2024494f,
  +0.0122495f, +0.0698734f, -0.1318814f, +0.0181206f, +0.0328349f, -0.2167785f, -0.1606119f, -0.0976064f,
  -0.1485877f, -0.2395682f, +0.0123535f, -0.0149341f, -0.0078597f, -0.0628927f, -0.1546787f, -0.3472190f,
  -0.1686753f, -0.1932884f, -0.0201555f, +0.2067875f, +0.1044761f, +0.1219640f, +0.2314833f, +0.1491617f,
  -0.2645456f, +0.1357585f, +0.3849967f, -0.2854358f, -0.0351272f, +0.3042269f, -0.0011145f, -0.1247553f,
  -0.0357954f, -0.0158662f, +0.0346971f, -0.2759716f, -0.1278044f, +0.7359018f, -0.3236986f, -0.0012664f,
  -0.0381603f, +0.0943261f, +0.0340047f, +0.1591100f, +0.1410783f, +0.2897305f, +0.0241144f, +0.0857988f,
  -0.0408866f, +0.0118856f, +0.0022537f, -0.0577482f, +0.1676902f, -0.1414946f, -0.0426273f, -0.0745978f,
  +0.0744602f, -0.1846908f, -0.0373116f, +0.0517947f, +0.0314219f, -0.0274816f, +0.1194013f, -0.0788023f,
  -0.0659206f, -0.1867208f, -0.0118127f, +0.0119006f, +0.0319986f, -0.1609662f, -0.0372482f, -0.1100360f,
  +0.1175070f, -0.0799164f, +0.0544310f, -0.1054003f, -0.1913684f, +0.0743101f, +0.0787543f, +0.1639200f,
  -0.0559895f, -0.0701093f, -0.0557435f, +0.1065813f, -0.1401559f, -0.0709333f, +0.2715700f, +0.0617164f,
  +0.3755654f, +0.0175222f, +0.0742855f, +0.0971415f, -0.1643227f, +0.0858233f, -0.0168467f, -0.0583874f,
  -0.0007495f, +0.0397222f, -0.3554147f, +0.2624291f, -0.0897558f, -0.0981337f, +0.1322532f, -0.1085023f,
  +0.0051622f, +0.2072135f, -0.2452772f, +0.1112683f, -0.1362566f, -0.1569913f, +0.3794178f, -0.2317702f,
  +0.2414122f, -0.1539182f, +0.0711794f, +0.0864029f, -0.1901823f, -0.2191020f, +0.1838211f, -0.0216672f,
  -0.0134639f, -0.0744683f, -0.1757923f, +0.0110556f, +0.0374187f, -0.0133984f, -0.3885381f, +0.2243070f,
  +0.0257038f, +0.2016573f, -0.0137505f, -0.2833008f, +0.1601681f, +0.2092793f, +0.0306457f, +0.1948895f,
  +0.0500004f, +0.1673400f, -0.1828185f, -0.2211629f, +0.2606115f, +0.1589186f, -0.4035572f, +0.0640898f,
  -0.3321854f, -0.0366485f, -0.0752185f, +0.2780731f, +0.6609234f, +0.2196288f, -0.1083056f, +0.1559803f,
  -0.4317451f, +0.0850096f, +0.0193916f, -0.0740510f, +0.2349344f, +0.0219183f, +0.0059731f, -0.0284332f,
  -0.0432745f, +0.1092634f, -0.1070847f, +0.0557359f, -0.0879254f, +0.0014855f, +0.1148757f, -0.4404912f,
  -0.3541521f, -0.0329591f, -0.2403020f, -0.1424049f, +0.1743387f, -0.2638880f, +0.4746962f, -0.1318110f,
  -0.1482131f, -0.2044699f, -0.1908752f, -0.1596677f, +0.3077613f, +0.0694483f, +0.0891311f, +0.3724431f,
  +0.2498289f, -0.2638067f, +0.1682677f, -0.3306376f, -0.1308150f, -0.2127790f, +0.1679059f, -0.0081266f,
  +0.0327375f, -0.0515886f, -0.1718426f, +0.0822604f, -0.1609242f, -0.1763185f, -0.1871046f, +0.0933648f,
  +0.1026899f, +0.2027698f, -0.0233144f, -0.3813199f, -0.2594354f, -0.2552623f, -0.0562670f, +0.1477439f,
  +0.1370516f, +0.1754710f, -0.0896501f, -0.3062237f, +0.1166063f, +0.1570620f, +0.2438679f, +0.0004307f,
  +0.1265773f, +0.1776395f, -0.1503905f, +0.3635422f, +0.1755417f, +0.1585939f, -0.0502902f, +0.1811852f,
  +0.1207654f, +0.1049516f, -0.0506744f, +0.1242279f, +0.3627369f, +0.1062240f, -0.2580310f, -0.1945574f,
  +0.2049369f, +0.3107266f, -0.0663156f, -0.0437506f, -0.1436253f, -0.0053784f, +0.2803911f, -0.3322078f,
  -0.0905426f, +0.1420124f, -0.3874476f, +0.2999355f, +0.0006514f, +0.1116883f, +0.1658149f, -0.0872826f,
  +0.0507879f, +0.4474992f, +0.0753418f, -0.0467153f, -0.1260491f, -0.2042426f, +0.2329017f, -0.2978420f,
  +0.0173223f, +0.1847142f, +0.2044626f, +0.0092112f, -0.1167436f, +0.0046165f, +0.4346864f, -0.0927431f
);

const float biases[4] = float[4](
  +0.0729091f, -0.0469046f, -0.3665878f, -0.1769584f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer31 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1903079f, -0.0675312f, -0.0722196f, +0.0049610f, -0.0651542f, -0.1309945f, -0.1295077f, -0.0756946f,
  -0.0552731f, -0.3072843f, -0.2323645f, -0.2049959f, -0.1371868f, -0.1648737f, +0.3377139f, +0.1242182f,
  +0.0108534f, -0.4730392f, -0.1832453f, +0.1652663f, +0.0855199f, +0.0214340f, +0.0400010f, -0.3112963f,
  -0.1309495f, +0.1446100f, +0.1114745f, -0.0686265f, +0.5443394f, +0.0319254f, -0.0482124f, -0.1346373f,
  +0.4449573f, +0.1818289f, +0.1502021f, +0.2462552f, -0.4932928f, +0.1462466f, -0.4742094f, -0.0575915f,
  -0.0527352f, +0.0756578f, -0.2050238f, -0.1824229f, +0.2485272f, +0.1240975f, +0.2048411f, +0.1081617f,
  +0.0301215f, +0.1667915f, -0.0319233f, +0.1924634f, +0.1341458f, -0.1195381f, -0.0131804f, +0.1790388f,
  -0.1589405f, -0.4144363f, -0.1130995f, +0.4774936f, +0.1940679f, -0.4518410f, -0.0647855f, +0.2105647f,
  +0.0011151f, -0.5523701f, -0.1819355f, -0.1619380f, +0.5562636f, +0.0019422f, +0.6469519f, +0.2098874f,
  +0.0567348f, -0.0243599f, -0.1791813f, +0.1469572f, +0.0952995f, -0.1264342f, -0.3122284f, -0.0449850f,
  +0.1010402f, -0.0908350f, -0.0493907f, +0.2619465f, +0.0628328f, +0.0255487f, -0.0128991f, -0.1136040f,
  -0.1098263f, -0.0318481f, +0.0609963f, +0.1056376f, +0.1232337f, +0.0997551f, +0.3303363f, -0.0507068f,
  -0.0322174f, -0.0057339f, +0.1320626f, +0.1647158f, +0.1056140f, -0.0500645f, +0.1324208f, -0.3205702f,
  -0.0335965f, +0.4685501f, -0.0366978f, -0.4710215f, +0.1353643f, -0.3465939f, -0.1801741f, -0.2703117f,
  -0.2217975f, -0.1196027f, +0.0209846f, -0.1258108f, +0.1837691f, +0.0965323f, -0.0457725f, -0.0778857f,
  +0.1215695f, -0.1898603f, -0.0429180f, +0.6102660f, -0.1167711f, -0.0349999f, -0.1889328f, +0.2060294f,
  -0.3241238f, -0.5249810f, +0.2212957f, -0.0014636f, -0.5301613f, -0.4941184f, +0.0726926f, +0.3732841f,
  +0.0565705f, -0.3527929f, -0.1713485f, +0.0461848f, +0.2230934f, +0.2722975f, +0.1703605f, +0.1381123f,
  +0.1730556f, +0.1531976f, -0.1397417f, -0.0806093f, -0.1903122f, -0.0024545f, +0.2163941f, +0.3799933f,
  +0.3209779f, -0.1251419f, -0.1592539f, +0.0865764f, -0.0397112f, +0.2472225f, -0.6334983f, -0.2361548f,
  +0.0661309f, -0.3338104f, +0.0469043f, -0.1079421f, +0.0230160f, +0.0681337f, -0.0638494f, +0.0348214f,
  +0.3828051f, -0.3621657f, +0.0542673f, -0.0933689f, +0.0881231f, -0.1246512f, +0.0170335f, -0.1426522f,
  +0.3541294f, -0.0509659f, +0.2569721f, -0.2381238f, -0.5625343f, +0.0182594f, -0.4956922f, -0.1405635f,
  -0.1364263f, -0.3392477f, +0.0705345f, +0.0610094f, +0.0911925f, +0.0459641f, -0.2362828f, -0.1464445f,
  +0.0944716f, -0.1436845f, -0.2662771f, -0.1443235f, +0.0814408f, -0.1568597f, -0.0085104f, -0.1226733f,
  -0.3905076f, +0.0145385f, -0.2082570f, +0.1165166f, +0.2590170f, +0.0189496f, +0.3415807f, -0.0758308f,
  -0.4546404f, -0.1585034f, -0.2885149f, +0.1691170f, -0.0582813f, -0.2594320f, +0.0076117f, -0.1665249f,
  +0.0570238f, -0.0904439f, -0.0534680f, -0.2675716f, -0.0640331f, +0.1103481f, -0.0411902f, +0.2147123f,
  +0.0826645f, -0.1884658f, -0.1836297f, -0.3185736f, -0.3408052f, -0.0888253f, +0.0420615f, +0.2041442f,
  -0.1392006f, -0.0274159f, -0.2546126f, +0.2805492f, -0.0620911f, -0.2217244f, -0.0636355f, -0.4469899f,
  -0.1122886f, +0.0542326f, +0.1356196f, -0.0124451f, +0.0360658f, +0.1138173f, -0.1213101f, -0.2620926f,
  +0.3027306f, +0.5269198f, +0.2436679f, +0.1026315f, -0.1058508f, +0.2613509f, -0.6635712f, -0.4782943f,
  +0.0292161f, +0.6886178f, -0.0867446f, +0.0070511f, -0.5565711f, -0.0313524f, +0.0236055f, -0.0118433f,
  +0.1646101f, +0.3274012f, +0.1771085f, +0.2252828f, -0.1303854f, +0.0431608f, -0.1008926f, +0.0083234f,
  -0.3089374f, -0.0404173f, -0.1438226f, -0.0325278f, +0.0508590f, +0.1741703f, +0.0779547f, +0.3292169f,
  +0.1392844f, -0.3810128f, -0.1441227f, -0.2411661f, +0.3712340f, -0.1352092f, +0.3519291f, -0.0177878f
);

const float biases[4] = float[4](
  +0.0459956f, -0.1822554f, +0.0451282f, -0.0100634f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer31 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0770074f, -0.1374322f, +0.0498805f, +0.0613918f, -0.0005519f, +0.0538757f, -0.0718835f, +0.0777461f,
  -0.2496478f, +0.0305989f, -0.0078749f, -0.1874228f, +0.1943487f, -0.0549272f, -0.1729068f, -0.1199386f,
  +0.1548865f, +0.0103597f, +0.1407010f, +0.0940757f, -0.1992236f, -0.0138329f, +0.2607110f, +0.2905201f,
  -0.2638620f, -0.1205431f, +0.1365225f, -0.1489156f, +0.1035769f, +0.0959541f, +0.0971591f, -0.0916642f,
  -0.0816222f, +0.1882190f, +0.5339577f, -0.0871424f, -0.0850010f, +0.1460036f, -0.1605197f, +0.0453534f,
  -0.1795595f, -0.1792290f, -0.1215821f, +0.2983822f, +0.0802199f, +0.1858767f, +0.4442258f, +0.3171493f,
  +0.0846698f, +0.0057218f, +0.0996837f, +0.0185945f, +0.0724431f, -0.2259557f, +0.1272671f, -0.0310381f,
  -0.1466970f, +0.3875639f, +0.6074741f, +0.0612463f, +0.2332181f, -0.0407513f, -0.3337640f, -0.0363817f,
  -0.3991178f, +0.6731629f, +0.0769052f, +0.2793568f, -0.0396658f, +0.3042935f, -0.1879507f, -0.5773070f,
  -0.3019512f, +0.1012683f, +0.1380944f, +0.0818946f, -0.2521220f, +0.2999766f, +0.0741602f, +0.2194120f,
  +0.0818182f, +0.3109306f, +0.3797714f, -0.1013196f, -0.2087182f, +0.0921028f, -0.5216824f, -0.1289051f,
  +0.0610820f, -0.0806827f, +0.0138031f, +0.0269986f, +0.0885402f, +0.2213047f, -0.2970876f, +0.3070296f,
  -0.1874950f, -0.1035393f, +0.2751111f, +0.3251147f, +0.1154752f, -0.0304925f, +0.4614199f, +0.3013720f,
  +0.0288420f, +0.0559209f, +0.0041467f, +0.0243740f, -0.0379706f, -0.0037255f, -0.1385431f, -0.0968290f,
  -0.1029478f, +0.2396693f, +0.1365253f, -0.0371626f, +0.5139298f, -0.1352205f, +0.1821077f, +0.2979898f,
  +0.1977701f, +0.1173257f, +0.2622022f, -0.1662186f, -0.2881656f, +0.1196433f, +0.1703493f, +0.1881443f,
  +0.2945798f, -0.3955705f, +0.3382791f, -0.6349511f, +0.0970255f, -0.2657668f, +0.0438219f, -0.2437619f,
  +0.5292322f, +0.2617278f, +0.0093944f, +0.1269927f, +0.1190633f, +0.1020747f, +0.1243334f, -0.0565890f,
  -0.0834200f, +0.0273459f, -0.0025944f, -0.0461892f, -0.1077666f, +0.1336007f, +0.0637839f, -0.0189685f,
  +0.1433815f, +0.0383224f, -0.2194362f, +0.0625224f, +0.1143443f, -0.0404111f, +0.0311785f, -0.0373119f,
  +0.0051040f, -0.0120280f, +0.1131945f, +0.0037588f, +0.0486742f, +0.0761420f, -0.0902544f, -0.0580283f,
  +0.0382696f, -0.0726841f, -0.1803120f, +0.0030690f, -0.0386045f, +0.0089998f, -0.1383222f, +0.0470129f,
  -0.3243338f, -0.0946653f, -0.1946578f, +0.0943652f, -0.1634946f, +0.4755217f, +0.3611947f, +0.0936869f,
  -0.0543232f, -0.0338763f, -0.2277939f, -0.1097845f, +0.0348271f, +0.2592160f, -0.0187149f, +0.0735850f,
  +0.0355897f, +0.0495236f, -0.2043960f, +0.0213363f, -0.0189794f, -0.0266708f, +0.1374118f, +0.0739663f,
  -0.0855554f, -0.1456586f, -0.0918200f, -0.0998931f, -0.1590942f, +0.2262085f, +0.2538819f, +0.1742730f,
  +0.0328976f, -0.1065396f, -0.0655112f, +0.1905365f, +0.0821671f, -0.0775304f, +0.2730998f, +0.1649739f,
  +0.1348323f, +0.2763495f, +0.1572073f, +0.1711570f, +0.2692003f, -0.0546001f, +0.0517036f, +0.1226886f,
  +0.2158487f, +0.1786179f, +0.0605116f, -0.0040610f, +0.3385510f, +0.0603369f, -0.3131917f, +0.0810427f,
  -0.1759076f, +0.1638590f, +0.2307404f, -0.1353852f, +0.0975563f, -0.4469621f, +0.0834052f, +0.0514482f,
  -0.2485192f, -0.0139608f, -0.1119578f, -0.0944030f, +0.2828389f, +0.3770319f, +0.2517944f, -0.2861288f,
  -0.5460694f, +0.7469983f, -0.2395778f, +0.4983767f, -0.0258400f, +0.2975950f, -0.2028172f, -0.1734535f,
  -0.3465514f, +0.1027516f, +0.2338759f, +0.0102272f, -0.2431891f, -0.1321613f, -0.3709265f, +0.0756307f,
  +0.2488048f, +0.0563801f, -0.1971330f, +0.1563110f, +0.0540608f, +0.0561345f, -0.1807196f, -0.0134622f,
  +0.1922314f, -0.0686400f, -0.2747477f, +0.0707652f, +0.0310216f, +0.0298446f, +0.0010908f, +0.0862254f,
  -0.1546192f, +0.0984045f, +0.0555637f, -0.0158945f, -0.3186609f, -0.0739980f, +0.1309999f, -0.0295967f
);

const float biases[4] = float[4](
  -0.1238941f, -0.1828179f, -0.6957891f, -0.0477375f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer32 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1726212f, -0.1605754f, +0.1983236f, -0.1996976f, +0.5432810f, -0.3204725f, +0.3455599f, -0.2054197f,
  +0.2733897f, +0.1962733f, +0.5287709f, -0.0986180f, +0.2705888f, -0.2306822f, +0.4258861f, -0.1248578f,
  +0.2921525f, +0.0277851f, +0.0238705f, -0.3785058f, -0.2814688f, -0.0901141f, -0.0283036f, +0.1336303f,
  -0.2580579f, -0.1058470f, -0.2410506f, +0.3329434f, +0.2081054f, +0.1580353f, +0.6312906f, -0.0822524f,
  -0.1187368f, -0.2878344f, -0.0258357f, -0.4199692f, +0.1126177f, -0.0809088f, +0.4475520f, +0.2996846f,
  -0.3473312f, -0.0640189f, +0.1080931f, -0.0676723f, +0.0391092f, -0.0921216f, -0.0454566f, +0.0375442f,
  +0.0617155f, +0.0881236f, -0.1597960f, +0.0507287f, -0.0409005f, -0.1732353f, +0.2307738f, -0.2251604f,
  -0.0861774f, -0.1538480f, -0.0249639f, -0.1332236f, +0.0929272f, -0.0582163f, +0.0467913f, +0.0998020f,
  -0.2792894f, -0.0587804f, -0.0929572f, -0.2128940f, -0.2519911f, +0.1516472f, -0.0733946f, -0.0211608f,
  +0.1353486f, +0.1147437f, +0.0401824f, +0.1497887f, +0.2136824f, +0.0088307f, +0.6925935f, +0.1694843f,
  +0.1054262f, +0.4575524f, -0.0408078f, -0.0926111f, +0.1273213f, +0.2111692f, +0.3669059f, +0.3500979f,
  -0.3280530f, +0.2588135f, +0.1058381f, -0.2494233f, -0.2423636f, +0.5046585f, -0.1724899f, +0.2156971f,
  +0.3694788f, +0.1498461f, +0.1130812f, -0.5462317f, +0.3883168f, -0.1204084f, -0.2850022f, +0.3611290f,
  -0.2996375f, -0.4598919f, +0.2026449f, -0.4987078f, -0.1687002f, +0.1204092f, +0.0165607f, -0.4725531f,
  -0.2591488f, +0.3116329f, +0.2288370f, +0.0191692f, -0.0054169f, +0.5917924f, +0.1009014f, +0.2255416f,
  -0.2939878f, +0.0860474f, +0.1410761f, +0.0195466f, +0.1740195f, -0.1568740f, +0.3939998f, +0.1127244f,
  -0.3418453f, +0.2309852f, +0.3176424f, -0.0137107f, -0.2066051f, +0.3367265f, +0.3291655f, -0.4312483f,
  +0.0233079f, +0.0971168f, +0.0033868f, +0.1132244f, -0.0202322f, +0.0552527f, +0.1889996f, -0.1882199f,
  +0.0834279f, +0.3532067f, +0.1186534f, -0.0499172f, -0.1553625f, -0.0321947f, -0.5018701f, +0.1597997f,
  +0.0084388f, +0.4258021f, +0.1789026f, +0.0016028f, -0.3259427f, +0.1654478f, +0.4907852f, +0.3877966f,
  -0.2354579f, +0.0522430f, +0.0892572f, -0.0579066f, -0.2123508f, +0.0971393f, +0.5820146f, +0.2435706f,
  -0.0097570f, +0.1708614f, -0.1815299f, +0.2183133f, +0.3646837f, -0.0755149f, -0.1133899f, +0.1227909f,
  +0.0828803f, +0.0573861f, -0.2169870f, +0.1280657f, +0.0159580f, +0.5520582f, +0.6157564f, +0.5145380f,
  -0.4688793f, -0.0759762f, -0.1646326f, +0.0882343f, -0.0584820f, +0.2526555f, +0.2232870f, -0.1740242f,
  +0.1057681f, -0.0481588f, -0.2500466f, +0.1996460f, -0.0464454f, +0.2020576f, -0.2801942f, -0.1506583f,
  -0.3856682f, +0.1382332f, -0.1709863f, +0.3068141f, +0.0241074f, +0.0676788f, +0.3006221f, -0.0416374f,
  -0.0995008f, +0.1131883f, +0.0831651f, -0.0901552f, -0.0861352f, +0.3380382f, -0.0519240f, -0.0466604f,
  -0.1992487f, +0.0502669f, -0.3491063f, +0.0521874f, -0.3367671f, -0.1554555f, -0.0007527f, +0.2169851f,
  +0.2025761f, -0.2451702f, -0.3980855f, -0.1418640f, -0.2581063f, -0.3678699f, +0.7342713f, +0.1513929f,
  -0.2796801f, -0.3875566f, +0.1066462f, +0.0303965f, -0.0256763f, +0.0799666f, +0.2054809f, -0.4715968f,
  -0.0819638f, -0.1103274f, +0.0818773f, +0.2602997f, -0.4319032f, +0.2138832f, +0.2524525f, +0.4005163f,
  +0.2838425f, +0.4932694f, +0.0431978f, +0.0652240f, +0.0913764f, -0.2730218f, +0.1287122f, +0.0659196f,
  -0.1695849f, -0.2833877f, +0.3543994f, +0.0431204f, -0.0036329f, +0.0854560f, -0.0337072f, +0.0329823f,
  +0.1768264f, +0.0390603f, +0.1688913f, -0.1649407f, -0.0066347f, -0.0629095f, -0.4264855f, +0.1966009f,
  -0.2519166f, -0.0039848f, +0.1145730f, +0.1802254f, +0.0131598f, -0.1024168f, -0.1482179f, +0.2793882f,
  +0.0757745f, -0.0090427f, +0.3143148f, +0.1426285f, +0.0538158f, -0.1599613f, +0.1981607f, -0.3434632f
);

const float biases[4] = float[4](
  -0.0759969f, -0.0313242f, -0.2317275f, -0.0062736f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer32 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.3717958f, -0.3446140f, +0.1087324f, -0.0623948f, -0.0559934f, +0.0689972f, -0.0715897f, -0.1421067f,
  +0.0634309f, +0.0913296f, -0.2341614f, +0.0906015f, -0.2559224f, -0.0471572f, +1.0092760f, +0.1277967f,
  -0.1678273f, -0.0985331f, -0.2846922f, +0.2265509f, +0.0114364f, +0.2302396f, +0.0728436f, -0.2967081f,
  -0.0144932f, -0.1252843f, -0.0487015f, +0.1596925f, +0.1094149f, -0.0865000f, -0.1316511f, -0.2113355f,
  +0.1917050f, -0.0211675f, +0.3263636f, -0.2810721f, +0.3638678f, -0.6181492f, +0.9350833f, +0.0621484f,
  -0.0003384f, -0.0782294f, -0.1803268f, +0.2000014f, +0.0962704f, -0.1765413f, +0.2318978f, +0.2028841f,
  +0.3212625f, -0.0381043f, -0.0644349f, +0.1228434f, +0.1679739f, +0.1360416f, -0.3290167f, -0.2107284f,
  -0.2919726f, -0.1012839f, +0.1887113f, +0.3216828f, -0.1507907f, +0.0289291f, +0.0002052f, -0.3733082f,
  -0.0458550f, +0.0312715f, +0.1291293f, +0.3354631f, +0.0022391f, +0.2582549f, -0.1792794f, -0.0921188f,
  +0.0357404f, -0.0310824f, +0.1866518f, -0.0003690f, -0.2478590f, -0.0535792f, +0.2150042f, +0.0883262f,
  +0.2427583f, +0.3045470f, +0.1473935f, +0.1189903f, +0.1052032f, +0.3040682f, +0.1192661f, +0.0744495f,
  +0.0214049f, +0.0893530f, +0.0984967f, +0.0070878f, -0.0052463f, -0.1282012f, +0.0548307f, +0.1941300f,
  -0.0034708f, +0.0785423f, -0.1079267f, +0.0330243f, -0.0939712f, -0.0832207f, +0.1791956f, +0.1858384f,
  -0.1353837f, +0.0658183f, -0.1620141f, -0.1788209f, -0.0680545f, +0.0942311f, +0.1131875f, -0.0094280f,
  -0.0709662f, +0.1119214f, -0.0870516f, -0.0229406f, +0.0024038f, +0.1488194f, +0.2201424f, -0.0220497f,
  -0.1766500f, -0.0627443f, -0.1093090f, +0.3146646f, -0.0727529f, +0.1397592f, -0.1927567f, -0.0648575f,
  +0.0283920f, -0.0462525f, -0.2132132f, +0.0872571f, +0.0573106f, +0.0027210f, +0.0442552f, -0.0031188f,
  +0.0259039f, -0.0069826f, -0.0948231f, -0.0858799f, -0.1136575f, -0.0436678f, -0.1718781f, +0.0622884f,
  +0.4439616f, +0.1613828f, -0.1852213f, -0.2894326f, +0.4422382f, -0.1762761f, -0.6778592f, -0.0410804f,
  +0.1032413f, +0.1287634f, -0.1325127f, -0.0493712f, +0.2838617f, -0.1418086f, -0.9204806f, +0.1104288f,
  +0.0552989f, +0.0367755f, +0.1872221f, +0.0083369f, -0.0600357f, -0.0768894f, -0.3282014f, +0.3344800f,
  +0.3213108f, +0.2300517f, -0.0512748f, +0.0295010f, -0.3850174f, +0.0488465f, -0.1146096f, -0.0444167f,
  +0.1985054f, -0.0177727f, +0.2735088f, +0.4524790f, -0.0891117f, +0.1190160f, -0.7561260f, +0.0149094f,
  +0.0538038f, -0.2042501f, -0.0212998f, +0.1294243f, -0.1280473f, +0.2096964f, -0.2084630f, -0.1165525f,
  +0.2192445f, +0.0738321f, -0.0876383f, +0.1984418f, -0.1308263f, -0.1841634f, -0.0147207f, -0.4512888f,
  -0.3576165f, +0.3052925f, +0.3071277f, +0.0414194f, -0.2442335f, +0.4495108f, +0.0067126f, -0.1667122f,
  -0.1258907f, +0.2053812f, -0.0352792f, +0.1762392f, -0.0862152f, -0.0926654f, +0.0267054f, -0.1647115f,
  -0.3681885f, -0.2116909f, +0.1030320f, +0.3547475f, +0.4150797f, +0.1840139f, -0.5708261f, +0.2406397f,
  +0.2351437f, -0.3784208f, +0.1070827f, -0.4460500f, -0.2301295f, +0.1114959f, -0.3318751f, +0.2215228f,
  -0.2161703f, +0.0021902f, -0.0664432f, -0.0056238f, -0.2724555f, +0.3001503f, +0.1336761f, +0.0635527f,
  -0.2326260f, -0.0309055f, -0.0687936f, +0.1611618f, -0.1143201f, -0.4003359f, -0.2014099f, -0.0488191f,
  -0.5169274f, -0.1321830f, +0.1316036f, +0.1611265f, -0.0255540f, +0.2847404f, -0.0557754f, +0.1569010f,
  -0.5444388f, +0.1812221f, -0.1036934f, +0.2408504f, +0.0621905f, +0.3758924f, +0.1317033f, -0.0947251f,
  -0.0762707f, -0.0979437f, -0.1549449f, +0.4418249f, +0.1656245f, +0.1313434f, -0.0185009f, -0.1602527f,
  -0.1728124f, -0.1193732f, -0.1997604f, +0.0863319f, +0.2191542f, -0.1035867f, +0.1307371f, +0.0984138f,
  +0.1302164f, -0.0275816f, -0.1635891f, -0.1479639f, +0.0580979f, -0.0093160f, -0.0375961f, -0.0273891f
);

const float biases[4] = float[4](
  +0.0634530f, +0.0770028f, -0.0971531f, -0.0005452f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer33 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0301175f, +0.0212766f, +0.0204183f, -0.2185903f, -0.0402869f, +0.0708731f, -0.4023745f, +0.2123876f,
  +0.0651513f, -0.5853733f, +0.0152343f, -0.0456381f, +0.1613774f, +0.0332200f, +0.2987027f, -0.3062217f,
  +0.1700949f, -0.0992726f, +0.1056348f, +0.1763007f, -0.1545032f, -0.0914324f, +0.3761950f, -0.0919769f,
  -0.1490885f, +0.0467385f, +0.1121451f, +0.1179361f, -0.0923323f, -0.0554335f, -0.0591960f, -0.4807712f,
  +0.3797225f, +0.0338435f, +0.8182299f, +0.3017203f, +0.3757566f, -0.1141346f, +0.1119254f, +0.1293904f,
  -0.7412831f, -0.0016413f, +0.3097300f, -0.2094993f, +0.2651595f, +0.0750776f, +0.1266475f, +0.3930817f,
  -0.4089881f, +0.1196209f, +0.3012869f, +0.1045753f, -0.3112191f, +0.2885149f, +0.2897769f, +0.2104286f,
  +0.3360388f, -0.6268033f, -0.4050078f, +0.0523032f, +0.6843075f, -0.2053897f, +0.0744873f, +0.6398531f,
  -0.1746141f, -0.2333843f, +0.0145833f, +0.1030559f, +0.3743391f, -0.0174582f, +0.3864900f, -0.1752707f,
  -0.0121807f, +0.2572594f, +0.2331200f, -0.1430666f, +0.2435415f, +0.0564220f, -0.4154249f, -0.1505795f,
  -0.1329618f, -0.2441737f, +0.3546883f, +0.2345894f, +0.1381270f, +0.4009446f, +0.0270160f, -0.0085646f,
  +0.0965076f, -0.1051618f, +0.0897045f, -0.3565720f, -0.2371030f, +0.1765497f, -0.1997796f, -0.0569542f,
  -0.0277311f, -0.0772567f, +0.4244139f, -0.0849607f, +0.3741511f, +0.1872325f, -0.2931978f, +0.1641351f,
  -0.1343039f, -0.2763278f, +0.0098553f, +0.2766121f, -0.4735923f, +0.0079174f, +0.0182222f, -0.0891298f,
  -0.2056904f, +0.0936364f, -0.0002213f, -0.0253938f, -0.2009800f, +0.0467027f, +0.1237651f, +0.0505224f,
  -0.4482684f, +0.1997024f, +0.1279187f, -0.1034107f, +0.2233913f, -0.3570853f, -0.0402918f, +0.0256570f,
  +0.1944417f, +0.2924309f, -0.3288234f, +0.0173743f, +0.1719271f, -0.0057448f, +0.0233141f, -0.0455797f,
  +0.1043424f, +0.2570620f, -0.0605204f, -0.1240809f, -0.2953117f, -0.1723131f, +0.0797509f, +0.1368154f,
  -0.1794071f, +0.1142728f, +0.3912456f, -0.0298373f, +0.4963495f, -0.2794775f, +0.0430607f, -0.2299501f,
  +0.0813655f, +0.2425772f, -0.2015260f, +0.1602826f, -0.2147605f, -0.0392594f, +0.0086485f, +0.0558926f,
  -0.3271542f, +0.1319913f, -0.1246441f, -0.0900546f, -0.2913289f, +0.0465752f, +0.3221035f, +0.1918527f,
  +0.0419229f, +0.1498895f, +0.1035636f, +0.0688283f, +0.1979959f, +0.3234727f, +0.1596589f, +0.4904740f,
  +0.4803973f, -0.2368786f, -0.0892675f, +0.3301696f, -0.3964609f, +0.0115532f, -0.0971617f, +0.2139849f,
  +0.0867583f, +0.1136292f, -0.0446782f, -0.1183477f, +0.0410856f, -0.1646743f, +0.5361578f, -0.1370913f,
  +0.0116776f, -0.1415726f, +0.0752120f, +0.1409598f, +0.4316510f, +0.1087123f, -0.2854370f, -0.0543335f,
  +0.2327377f, +0.0094478f, +0.0396659f, -0.0940529f, +0.2100520f, +0.1110658f, -0.2861865f, -0.4967173f,
  +0.1514877f, -0.0721291f, -0.1392011f, -0.1723930f, -0.0022626f, -0.0443049f, +0.1017940f, +0.0813290f,
  -0.0294919f, -0.4498735f, -0.5280141f, -0.0533177f, -0.2707675f, -0.1706685f, +0.3848737f, -0.1339834f,
  +0.3008015f, +0.1331476f, +0.0196369f, +0.0529871f, -0.0174408f, -0.1944991f, -0.1771915f, -0.2317024f,
  -0.1093306f, -0.2922093f, +0.0025530f, +0.0941595f, +0.0515272f, +0.0890145f, -0.1912368f, -0.0598768f,
  -0.1740314f, -0.0576471f, -0.4147989f, +0.2846539f, +0.0698011f, +0.1198274f, -0.0701850f, -0.2214641f,
  -0.4476729f, -0.0983117f, +0.1104358f, -0.1470244f, -0.1609097f, -0.1905058f, -0.0299056f, -0.2488528f,
  -0.0189937f, +0.3670009f, -0.1665179f, +0.1190359f, +0.1830354f, +0.2837653f, -0.2566434f, +0.1728830f,
  +0.0177561f, -0.1025447f, +0.2219895f, -0.0072704f, -0.0768813f, +0.0384518f, +0.2829153f, +0.3993580f,
  +0.1469478f, -0.1831201f, +0.1980724f, -0.2290452f, -0.1088399f, +0.0921166f, +0.3908027f, +0.1511277f,
  +0.2500886f, +0.0441799f, +0.1230582f, -0.1505274f, -0.0801926f, +0.0907729f, +0.1233372f, +0.1064520f
);

const float biases[4] = float[4](
  -0.0778471f, -0.0238084f, -0.1937119f, +0.0633083f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer33 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0765597f, +0.1232324f, +0.3336588f, +0.4970352f, +0.0208088f, -0.0668550f, -0.0967922f, +0.5645710f,
  -0.1445325f, +0.1804787f, -0.0321052f, -0.2563882f, +0.0913402f, +0.4329068f, -0.6667810f, -0.4136913f,
  +0.2984972f, +0.0278990f, +0.0810473f, -0.1466403f, +0.1790984f, -0.1245575f, -0.0978310f, +0.2284263f,
  +0.0040411f, -0.2580315f, -0.1932852f, +0.4053420f, +0.1572978f, -0.0978968f, -0.1025743f, -0.1547002f,
  -0.0429295f, -0.2924645f, +0.2619863f, -0.3468173f, -0.2042557f, -0.0415480f, -0.3931201f, -0.2972650f,
  +0.3580517f, +0.0661831f, -0.1412225f, -0.0867185f, -0.0066837f, -0.1269008f, +0.0399128f, -0.1565655f,
  -0.2489410f, -0.6401990f, -0.3933036f, -0.0394752f, +0.1295018f, -0.2429442f, +0.0584806f, -0.1268184f,
  +0.3743071f, -0.8372959f, +0.4508743f, +0.0512030f, +0.1914785f, +0.0962374f, -0.3463811f, +0.5201188f,
  -0.0049434f, +0.2751273f, +0.1874078f, -0.3433633f, -0.2642830f, -0.0816415f, +0.4081862f, -0.5635678f,
  +0.0356199f, +0.1598679f, +0.5477477f, -0.0535477f, +0.2023377f, -0.0820538f, -0.0976187f, +0.0543520f,
  -0.0428121f, +0.5818692f, +0.0682030f, -0.2476508f, +0.0766631f, +0.0399920f, +0.2270665f, +0.0622246f,
  -0.1617652f, +0.3313958f, +0.1569138f, +0.1142641f, +0.0444837f, +0.0500756f, +0.1982083f, -0.3074016f,
  +0.1439168f, -0.1429745f, +0.5630064f, +0.0666908f, -0.0041688f, -0.1342239f, -0.0036372f, +0.3853976f,
  +0.0252347f, -0.3829622f, +0.5877136f, -0.3092292f, -0.2115725f, +0.0401396f, +0.1220187f, +0.4324248f,
  +0.2881526f, -0.3034758f, -0.0063123f, -0.2299138f, +0.1957864f, -0.0021950f, +0.2974625f, -0.0158637f,
  -0.2409158f, -0.2241032f, +0.0433422f, +0.2071322f, +0.2854486f, -0.2546227f, +0.0205587f, +0.2609002f,
  -0.1186258f, +0.0707735f, +0.2454431f, +0.5400129f, -0.2610864f, +0.0146070f, +0.0320867f, +0.0829953f,
  +0.0172472f, -0.0819289f, +0.0333910f, -0.1421803f, -0.1059069f, +0.2865535f, +0.0232184f, -0.1560839f,
  -0.1061504f, +0.0574322f, -0.1639128f, -0.1408240f, +0.0917857f, -0.0730153f, -0.0208372f, -0.0865884f,
  +0.1742740f, -0.1267049f, +0.2324982f, -0.1017795f, +0.0612557f, -0.2403662f, +0.0181296f, +0.0386543f,
  -0.0016504f, -0.1517875f, +0.1724961f, -0.0153288f, +0.2955872f, +0.0855305f, +0.2119077f, +0.2022364f,
  +0.0188395f, +0.3437817f, +0.0535412f, -0.0559707f, -0.0421115f, +0.0986586f, -0.1847695f, -0.0723531f,
  -0.3756506f, +0.4047964f, -0.2506324f, -0.3353677f, +0.4291526f, +0.1986308f, +0.1056486f, -0.1529265f,
  -0.0748739f, -0.2083229f, -0.1696274f, -0.3786061f, +0.1108814f, +0.0196754f, +0.1302789f, +0.4307898f,
  -0.0812132f, +0.2632689f, +0.1898991f, +0.1167202f, -0.0425245f, -0.0512716f, +0.0107470f, +0.1429020f,
  +0.1866447f, -0.2068127f, -0.2929691f, -0.3355688f, -0.0251483f, +0.2134983f, +0.0592116f, -0.3404405f,
  -0.1245116f, +0.1319471f, +0.1411305f, -0.0919736f, +0.2601588f, -0.0686552f, -0.1218931f, +0.1398773f,
  -0.2027908f, +0.2424157f, -0.1330788f, -0.2328518f, +0.1229347f, +0.1513908f, -0.0261216f, -0.1914971f,
  -0.0046928f, +0.4935518f, +0.1314062f, -0.5065692f, -0.0538712f, -0.2843854f, -0.2159743f, -0.1601364f,
  -0.1791500f, -0.2164595f, +0.1697543f, +0.0158271f, +0.2534230f, -0.1065994f, +0.3665478f, +0.4457877f,
  +0.2455890f, +0.2603376f, -0.0092042f, +0.1441344f, -0.3353292f, -0.0238005f, -0.2645886f, -0.0220731f,
  +0.6922244f, +0.3185103f, -0.0092476f, -0.1325872f, -0.0681770f, -0.0662667f, -0.3011115f, -0.1564496f,
  +0.7016329f, +0.4917702f, +0.0577301f, -0.3366133f, +0.3229159f, -0.0928849f, +0.2068133f, -0.0298043f,
  -0.0856581f, -0.1651153f, -0.0575227f, -0.0277415f, -0.1370128f, +0.1392636f, -0.2096811f, -0.2069414f,
  +0.1349167f, -0.0569387f, -0.2105515f, -0.0341205f, -0.0346842f, +0.1296749f, -0.0499793f, -0.0937376f,
  +0.1385305f, +0.1206316f, -0.1021804f, +0.0149681f, +0.1290694f, +0.2136758f, +0.0536148f, +0.0348113f
);

const float biases[4] = float[4](
  -0.1757603f, -0.3703749f, +0.0415514f, -0.1624851f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer34 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.1718969f, -0.0686195f, +0.0829177f, +0.1169082f, +0.5325578f, -0.1315706f, +0.2006914f, +0.0464320f,
  -0.1558376f, -0.0770130f, +0.2298779f, -0.1603275f, +0.0153943f, -0.0113620f, +0.2342691f, -0.4516412f,
  +0.2359882f, +0.2932287f, +0.1459032f, +0.0541984f, +0.1597623f, +0.0347282f, +0.3100263f, -0.1605110f,
  +0.0531376f, +0.2207243f, -0.2068739f, +0.0576755f, +0.1299383f, -0.1521004f, +0.2511520f, -0.3199024f,
  +0.2124445f, -0.0699077f, -0.2777951f, -0.0305253f, +0.4356374f, +0.1170205f, +0.2372099f, -0.0775485f,
  -0.3724641f, -0.0092116f, +0.3192849f, +0.2304871f, -0.0501097f, -0.1950645f, +0.2074839f, -0.0182506f,
  -0.0279657f, +0.0548612f, -0.1356272f, -0.0290589f, +0.2202515f, +0.0345039f, -0.2889752f, +0.0922414f,
  -0.0748288f, +0.0461367f, +0.0620766f, -0.1846082f, +0.4791380f, -0.1081422f, -0.1298174f, -0.0971886f,
  +0.2273718f, -0.0561127f, -0.2313156f, +0.0864121f, +0.3320656f, -0.5098698f, +0.0402423f, +0.3197474f,
  -0.5404046f, +0.2269198f, +0.1041306f, -0.3314831f, -0.1701914f, -0.1050216f, +0.0050081f, +0.0115829f,
  +0.0026535f, -0.1514010f, +0.6307660f, -0.2341756f, +0.5885177f, -0.3421178f, +0.4300496f, +0.0380697f,
  +0.1953159f, -0.0795701f, +0.2740294f, +0.0039812f, +0.1224518f, -0.2143404f, -0.0692286f, +0.3434063f,
  -0.4985231f, +0.1475730f, +0.0663022f, -0.3974137f, -0.0781934f, +0.1053639f, +0.3407926f, -0.0048215f,
  +0.8740017f, -0.3249515f, +0.1718708f, +0.1482494f, +0.5693600f, -0.1430609f, -0.1754742f, -0.1008542f,
  +0.1422332f, +0.4105529f, -0.1788777f, +0.2164718f, +0.0941815f, -0.2235995f, -0.2851561f, -0.2316433f,
  +0.2638426f, +0.4677383f, +0.0901227f, -0.1129130f, -0.0453996f, +0.1567852f, +0.3326438f, -0.1540853f,
  -0.1772658f, +0.4366404f, -0.1209415f, -0.0288726f, +0.3176646f, +0.2025177f, +0.0456026f, -0.0868761f,
  +0.2679790f, +0.1034742f, -0.2434396f, +0.1227466f, -0.1026777f, -0.0741736f, -0.1001887f, -0.0577003f,
  +0.3137550f, +0.1803404f, +0.1321911f, -0.0148845f, -0.0643591f, -0.2391713f, -0.2598085f, +0.0783128f,
  +0.1577878f, +0.1245116f, +0.0428591f, -0.3698428f, -0.0735501f, -0.3075379f, -0.3388394f, +0.1392568f,
  +0.0174203f, +0.1026079f, -0.1721174f, -0.2948335f, +0.2316916f, -0.1678187f, -0.0902828f, -0.0379436f,
  -0.2407721f, +0.1686554f, +0.0496229f, +0.1181081f, +0.2324844f, -0.1312290f, +0.0652966f, -0.1198854f,
  -0.1777580f, -0.3423473f, -0.1194601f, -0.2189331f, +0.1668108f, -0.7361891f, +0.1264427f, +0.3476810f,
  -0.0183085f, -0.2881699f, +0.2008504f, +0.3680608f, +0.0614118f, -0.6779236f, +0.0664107f, +0.3872475f,
  +0.2930299f, -0.0422431f, -0.2481766f, +0.0187509f, -0.0225062f, -0.0528781f, -0.0961929f, +0.1093406f,
  +0.0263188f, -0.3022870f, +0.2228682f, +0.1684068f, -0.0373249f, -0.2096357f, -0.2029926f, -0.2152801f,
  +0.1924871f, +0.1845526f, -0.1147891f, +0.4066958f, -0.0045859f, -0.7980915f, +0.0288679f, +0.0857385f,
  +0.0263436f, +0.0095416f, +0.0947651f, -0.0022067f, +0.1846324f, -0.1025136f, -0.0455927f, -0.0005857f,
  +0.2683329f, -0.0569052f, +0.2058498f, +0.2717631f, +0.2333177f, -0.2788076f, +0.0016834f, -0.0620738f,
  +0.0633984f, -0.3229246f, -0.2396902f, -0.2572181f, -0.3469785f, -0.1746274f, -0.5108725f, +0.1861750f,
  -0.2027276f, +0.0483809f, -0.5928165f, -0.2904889f, +0.1092279f, -0.1832993f, -0.1830954f, -0.0069630f,
  +0.2699946f, -0.1130775f, +0.1946917f, -0.1902716f, -0.1267356f, -0.0259328f, +0.2811365f, -0.3309636f,
  +0.2508179f, -0.0866901f, +0.0329918f, -0.0215685f, +0.0234989f, -0.0256343f, -0.3293604f, +0.3343838f,
  +0.0926756f, +0.1874619f, +0.0157807f, -0.1113881f, +0.1692121f, -0.4054050f, -0.1848106f, +0.2485578f,
  +0.0014731f, +0.2976547f, +0.1171582f, -0.1637210f, -0.0198761f, -0.0561183f, -0.1139209f, +0.1036463f,
  -0.0257900f, +0.1388171f, +0.1126651f, -0.2384423f, -0.1198363f, +0.2783265f, -0.0816213f, +0.2198218f
);

const float biases[4] = float[4](
  -0.1313228f, -0.0761182f, -0.1333982f, -0.0088606f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer34 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0229012f, -0.1840304f, -0.1603859f, -0.1499007f, -0.1336407f, +0.1108493f, +0.1109399f, +0.0397976f,
  -0.1646965f, -0.1477597f, -0.5860467f, -0.1302561f, -0.5544805f, +0.1291732f, -0.0084751f, -0.2432037f,
  -0.2237795f, -0.2106095f, -0.1425236f, -0.0577517f, -0.1550960f, -0.2615429f, -0.1179203f, +0.5490353f,
  -0.2628648f, -0.1471296f, -0.3323325f, -0.2332921f, +0.0759247f, -0.0292225f, +0.0713647f, +0.3495244f,
  -0.1480819f, +0.1098520f, +0.4746338f, -0.1419677f, -0.4067108f, +0.2737546f, -0.0437234f, -0.6233832f,
  -0.1080292f, -0.1237734f, +0.1386717f, -0.0161466f, -0.1701202f, -0.0144014f, -0.1561933f, -0.0038381f,
  -0.0416060f, +0.0067095f, +0.3236127f, -0.2159123f, -0.1418640f, -0.1001404f, -0.1840343f, -0.1646920f,
  -0.1100200f, -0.1724390f, +0.0348723f, -0.1098161f, -0.1665919f, +0.0501817f, +0.0267091f, -0.2109378f,
  -0.2220490f, +0.0559342f, -0.2038341f, -0.0013309f, -0.3300365f, -0.1542192f, +0.0762368f, +0.2665848f,
  +0.2374968f, +0.2400441f, +0.0936683f, +0.0743792f, +0.0930425f, -0.0266102f, -0.2015348f, +0.0267251f,
  -0.1158464f, +0.0253733f, +0.1419564f, -0.1801489f, -0.1674607f, -0.0518105f, -0.1680363f, -0.0067493f,
  -0.1702198f, +0.2978586f, +0.0426372f, -0.0286836f, -0.0748525f, +0.0064659f, +0.1309435f, -0.0331479f,
  +0.0701057f, +0.0631557f, -0.0178203f, +0.0727633f, -0.0099444f, +0.0344438f, +0.0306768f, +0.2120220f,
  -0.0415522f, +0.0106812f, +0.1610379f, -0.0483722f, +0.2556468f, -0.0689860f, +0.0123242f, +0.0188475f,
  -0.0823740f, -0.1715047f, -0.2035678f, +0.1209731f, +0.1175701f, -0.1298377f, +0.2634344f, +0.1355087f,
  +0.0869609f, -0.1046308f, -0.1888492f, +0.1020748f, +0.1534102f, -0.0780206f, -0.1305728f, -0.1404477f,
  +0.0816741f, -0.1602582f, +0.1737467f, +0.1031818f, -0.1617984f, -0.0525813f, +0.1249925f, +0.0963669f,
  -0.0518173f, -0.1294455f, +0.2291178f, +0.2596983f, +0.0851705f, -0.1068100f, +0.1384055f, -0.0548713f,
  -0.1013196f, -0.0395988f, -0.2487968f, -0.1002176f, -0.2659000f, -0.1479195f, +0.0159448f, -0.0609052f,
  -0.1635497f, -0.0155808f, -0.1368876f, -0.0438417f, -0.0699629f, -0.3923672f, -0.0376635f, -0.0123287f,
  +0.3927542f, +0.1030197f, -0.1289130f, -0.1846501f, +0.1370749f, -0.2046500f, +0.0644789f, +0.1716092f,
  -0.4940124f, -0.0030259f, -0.1515580f, +0.0348651f, -0.0012719f, -0.4024437f, +0.0392778f, -0.0768682f,
  -0.2598004f, +0.2027678f, -0.1506632f, -0.1386325f, -0.3662169f, -0.2345179f, +0.1444064f, -0.4428534f,
  +0.2760322f, +0.0297707f, -0.5850827f, -0.1199771f, +0.1222515f, -0.1694918f, +0.3186007f, +0.0239346f,
  +0.0812244f, -0.0183974f, +0.1469500f, -0.1141169f, +0.1401019f, -0.0712869f, +0.0736237f, -0.1855856f,
  -0.0597691f, +0.0736420f, +0.1685358f, +0.1999510f, -0.0544078f, -0.1044294f, -0.0372132f, +0.7326626f,
  +0.0154342f, +0.0739774f, -0.1049284f, -0.1417866f, -0.0310470f, +0.1252303f, +0.0218976f, +0.0291481f,
  -0.2038296f, -0.0102838f, +0.0689308f, -0.2642455f, -0.0944099f, -0.0661683f, +0.3831338f, -0.0161066f,
  +0.1621985f, -0.3915013f, -0.2636606f, -0.1719848f, -0.1190145f, -0.0433897f, +0.1320447f, +0.0693578f,
  +0.0522255f, -0.3729702f, +0.0815234f, -0.2114639f, +0.2007711f, -0.1338182f, -0.2060328f, +0.1031946f,
  +0.2456991f, +0.0146820f, +0.3352896f, -0.1524416f, -0.0330566f, -0.0189409f, -0.2359278f, -0.1027099f,
  +0.0421684f, -0.2685635f, -0.1715819f, +0.1190684f, +0.6239393f, -0.1207272f, +0.2324088f, +0.3474245f,
  -0.2577163f, -0.3065376f, +0.0315916f, +0.3031463f, +0.4235477f, -0.3807890f, +0.0417886f, +0.2498564f,
  +0.0905460f, +0.1016954f, -0.1846505f, +0.0549315f, +0.0898768f, +0.1175684f, -0.3353208f, +0.0022696f,
  +0.2916034f, -0.0646059f, -0.1270520f, +0.0623701f, -0.0486078f, -0.2908946f, +0.2059287f, -0.1680153f,
  +0.2232908f, -0.1255285f, -0.0897665f, +0.1895500f, -0.1248117f, -0.0607613f, +0.1412941f, -0.1886963f
);

const float biases[4] = float[4](
  +0.0383733f, +0.0290368f, -0.0820539f, -0.0127080f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer35 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0688376f, +0.0646404f, +0.2034561f, -0.0210800f, +0.3322307f, -0.0060004f, +0.0772399f, +0.0568476f,
  -0.3607166f, -0.1770037f, +0.0826664f, +0.0730603f, +0.1543872f, +0.0596327f, +0.2881223f, +0.3287728f,
  -0.0896213f, +0.3844398f, +0.0566629f, -0.2462985f, -0.3052175f, +0.1256661f, -0.2830051f, -0.2105805f,
  +0.1856387f, +0.1705447f, +0.0407069f, +0.0059506f, +0.1460036f, +0.0217300f, +0.2498311f, +0.3255702f,
  -0.4377908f, -0.0287497f, -0.1192892f, -0.0635469f, +0.7497539f, -0.1168247f, +0.3659114f, +0.0208457f,
  -0.1321942f, -0.1250519f, +0.4744626f, +0.1588921f, -0.3720700f, +0.2127560f, -0.1017294f, -0.0560337f,
  -0.0761558f, -0.2395157f, +0.0676768f, +0.2028144f, +0.0197005f, +0.0653870f, +0.0983044f, +0.1858411f,
  -0.3445422f, -0.2905165f, -0.1954467f, +0.0330038f, +0.1195457f, +0.0715334f, +0.3198053f, -0.0357201f,
  -0.3575573f, -0.1215385f, -0.0333024f, +0.0395739f, +0.3396024f, -0.1645032f, -0.1431573f, -0.0087142f,
  +0.2104391f, -0.0917402f, -0.0727516f, +0.2216132f, -0.2967039f, +0.1827769f, +0.1641119f, -0.0942114f,
  -0.0964816f, +0.3003781f, +0.0105732f, -0.1024362f, +0.2281933f, +0.5077938f, +0.0805963f, -0.2320254f,
  +0.1271249f, +0.1967998f, +0.1361427f, -0.2590300f, -0.3179267f, +0.2751771f, -0.1311897f, -0.0063651f,
  -0.0115519f, -0.2433468f, -0.3123213f, +0.1131277f, -0.2370512f, -0.0565820f, -0.3317755f, -0.0203122f,
  -0.4943808f, +0.2476432f, -0.1036023f, -0.0424734f, +0.3772084f, -0.0501269f, +0.0923625f, +0.7695279f,
  -0.3241602f, +0.1611792f, +0.2032718f, -0.1525290f, -0.2195721f, -0.2159351f, -0.1457562f, +0.2429190f,
  +0.0737755f, -0.0829091f, -0.2288281f, -0.1063779f, -0.0806971f, +0.1338839f, +0.0593349f, -0.4108345f,
  +0.1203689f, -0.0567348f, -0.2923076f, -0.1848035f, -0.2254901f, -0.1846917f, +0.0742859f, -0.4408410f,
  -0.0603255f, +0.1287126f, +0.1044870f, +0.1829305f, +0.1332545f, -0.3942167f, -0.0352204f, -0.0524579f,
  +0.0955423f, +0.0219790f, -0.0305317f, -0.0424300f, -0.1674759f, -0.0129774f, -0.0606338f, -0.0441789f,
  +0.2910479f, -0.2244650f, -0.1730561f, -0.0058760f, -0.4635478f, -0.0396539f, +0.0126276f, +0.0944298f,
  -0.1233052f, +0.3073583f, +0.3123173f, +0.1221565f, +0.3310755f, +0.0241085f, +0.3133241f, +0.1677686f,
  +0.0984513f, +0.3914225f, +0.2584620f, -0.0499011f, +0.0365436f, -0.1597696f, -0.1659188f, -0.0991591f,
  +0.4484777f, -0.2273780f, +0.4679585f, +0.1843104f, -0.1015617f, -0.0059437f, -0.4711202f, -0.0577540f,
  +0.1192151f, +0.0680766f, +0.2338861f, +0.2951042f, +0.1916326f, +0.1655014f, +0.0392039f, -0.3233219f,
  +0.0481843f, +0.1900040f, -0.0384474f, -0.1139339f, +0.2011496f, -0.1971704f, +0.0479848f, +0.3800995f,
  +0.1544700f, -0.3647090f, +0.6221076f, -0.1473912f, -0.3681752f, +0.0759101f, +0.3490014f, +0.6542267f,
  +0.3667285f, -0.3199993f, +0.2999851f, -0.3577076f, +0.2069651f, +0.1788460f, +0.0103795f, +0.0520883f,
  -0.1336512f, +0.0078238f, +0.1322973f, -0.0089982f, +0.0995010f, -0.0303402f, -0.2197242f, -0.1801081f,
  +0.1282295f, -0.1519027f, +0.1096693f, +0.0049855f, +0.0651243f, -0.0556167f, +0.1823848f, -0.1560390f,
  +0.1061426f, -0.1721246f, +0.0331423f, +0.0405590f, +0.1463066f, -0.0753334f, +0.1430829f, +0.1160934f,
  +0.0145370f, +0.1691249f, +0.5082829f, +0.1805235f, -0.1154007f, -0.1519351f, -0.1863412f, +0.0296329f,
  -0.4036430f, +0.5677999f, +0.1350919f, -0.5747353f, +0.2337452f, +0.0078049f, +0.1003972f, +0.0618359f,
  -0.0690589f, +0.1915924f, +0.1525039f, -0.3399120f, -0.2883968f, -0.0620402f, +0.0938349f, +0.0647033f,
  -0.2400651f, -0.1890472f, +0.2499698f, +0.2469214f, +0.0223719f, -0.2604317f, +0.0623877f, +0.5409993f,
  -0.0228483f, -0.9417188f, +0.2373433f, -0.2000606f, -0.0280951f, -0.1606804f, -0.0045131f, -0.1235862f,
  +0.2402156f, -0.1333174f, +0.0490851f, +0.1173730f, +0.1873893f, +0.0319358f, +0.1259325f, +0.0949138f
);

const float biases[4] = float[4](
  +0.1690473f, +0.1129578f, -0.0481080f, -0.4764996f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer35 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1020880f, -0.0326947f, -0.1205179f, -0.0536660f, +0.0720023f, +0.0850691f, -0.2104558f, +0.3934413f,
  +0.0581767f, +0.3194090f, +0.2377394f, -0.1990572f, +0.0449672f, -0.1198981f, -0.1516032f, -0.1828020f,
  -0.0019991f, -0.0976899f, -0.2474561f, +0.1393586f, +0.2974870f, -0.1142664f, +0.2946212f, +0.0741125f,
  +0.2236187f, -0.0368745f, +0.6238876f, +0.1509132f, +0.0690404f, -0.1947801f, -0.0217802f, +0.0347228f,
  -0.5611604f, +0.5200768f, -0.5822555f, -0.3661043f, +0.2383153f, -0.0095573f, -0.1592903f, -0.0744604f,
  -0.3199128f, -0.1447345f, -0.3384891f, +0.3029093f, +0.1167833f, +0.0624892f, +0.1874675f, -0.3441968f,
  -0.1061495f, +0.1091058f, +0.2380540f, +0.0421581f, +0.1105043f, -0.0395695f, -0.0370446f, +0.1915634f,
  -0.1210376f, -0.1590575f, -0.2666404f, -0.1881428f, +0.1640207f, -0.0392487f, +0.2225800f, -0.1929650f,
  +0.0506431f, +0.0436130f, +0.0218935f, +0.0582638f, +0.1649739f, +0.3134821f, -0.1527139f, +0.1615952f,
  -0.0186573f, +0.0434090f, +0.0971193f, +0.0112111f, +0.2426021f, -0.1403648f, -0.0172391f, -0.1164594f,
  -0.1745752f, -0.0191575f, +0.0083264f, +0.2228674f, +0.2737108f, -0.3261802f, +0.1994612f, -0.3210066f,
  -0.2374161f, +0.0214996f, +0.0459449f, -0.0694490f, +0.1093070f, -0.0023490f, +0.0833320f, +0.0942025f,
  -0.1641095f, +0.2900278f, +0.0627591f, +0.2006776f, +0.0118897f, +0.1110846f, +0.1598849f, -0.0416507f,
  -0.4199357f, +0.4898714f, +0.1253741f, -0.4256025f, -0.1039193f, +0.1927502f, -0.1168385f, +0.5399459f,
  -0.0311567f, +0.2538892f, +0.0468726f, -0.2376996f, -0.2259905f, +0.1022521f, +0.0940865f, -0.0555472f,
  +0.0466899f, -0.2675729f, -0.3398884f, +0.3160253f, +0.0576901f, -0.0775715f, +0.2678052f, +0.4807703f,
  +0.0213933f, -1.2836764f, -0.4360497f, +0.1191026f, +0.2260697f, +0.0102084f, +0.2835737f, +0.7226881f,
  +0.4760317f, -0.6100529f, +0.0272502f, +0.0144609f, +0.4805495f, -0.0166516f, +0.2134326f, +0.1285220f,
  +0.2273147f, -0.3193563f, +0.2295963f, -0.0890370f, +0.0238820f, -0.0703056f, +0.1057626f, -0.0265972f,
  +0.1162096f, -0.1879940f, +0.0054891f, +0.2000072f, +0.1264173f, +0.1439507f, -0.1959805f, -0.0455043f,
  -0.0714606f, -0.2114781f, +0.1037542f, -0.2030247f, -0.0188244f, +0.0849249f, -0.1063522f, -0.2223693f,
  -0.1729127f, -0.0280590f, +0.0421026f, -0.2349615f, -0.0177807f, +0.1604925f, +0.3539272f, -0.0288717f,
  +0.0798904f, +0.2420027f, +0.1860848f, -0.0151929f, +0.3200903f, +0.4474344f, -0.1097615f, +0.1306150f,
  -0.7359582f, -0.1162650f, +0.3156247f, +0.0444381f, -0.1082969f, -0.0328455f, +0.0000678f, +0.0572196f,
  +0.3376116f, +0.2701388f, -0.1444128f, -0.0139005f, -0.3274902f, -0.2782439f, +0.1133857f, +0.0318237f,
  -0.2481540f, +0.4919136f, +0.3240574f, +0.1975608f, +0.0129476f, -0.2112336f, -0.1961963f, +0.2639141f,
  +0.0978328f, -0.1478395f, +0.1987013f, +0.0200489f, -0.1649024f, +0.0910417f, +0.0515614f, -0.0004177f,
  -0.3452810f, +0.0460805f, -0.0581742f, +0.1379120f, +0.2056251f, +0.0367236f, +0.1090952f, -0.3532347f,
  -0.3600939f, +0.4407247f, +0.1466083f, -0.0001879f, -0.0255236f, -0.1491478f, +0.2059637f, -0.2701747f,
  -0.0759782f, +0.1721548f, +0.0088164f, +0.0015589f, -0.1468238f, +0.0868043f, +0.1455783f, -0.0637189f,
  +0.0244924f, +0.2685169f, -0.1717983f, +0.1064977f, -0.3247005f, +0.0039266f, -0.0469576f, +1.0479183f,
  +0.2899638f, -0.7113301f, +0.0351504f, -0.6488752f, +0.1291467f, +0.3704626f, -0.3787165f, +1.0930557f,
  +0.3579553f, -0.0374152f, +0.1642412f, -0.0940829f, -0.0174916f, -0.0256151f, +0.2391610f, -0.0437019f,
  -0.2236086f, -0.5379660f, -0.0891540f, +0.1074525f, +0.3546528f, +0.0008606f, +0.0282872f, -0.0503805f,
  +0.0685139f, -0.4514616f, +0.1800612f, +0.3391593f, +0.3631117f, -0.1867476f, +0.5680352f, +0.0529038f,
  +0.3338547f, -0.5232087f, +0.0633539f, -0.1256857f, +0.3697187f, -0.1638304f, +0.0010176f, +0.0052765f
);

const float biases[4] = float[4](
  +0.1170134f, -0.0308094f, +0.0596633f, -0.1233922f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer36 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0569956f, -0.0136761f, -0.0939403f, -0.1240781f, +0.0289989f, +0.3599587f, +0.1517899f, -0.3321432f,
  -0.1275341f, -0.2514011f, +0.0410693f, -0.1936885f, +0.0186335f, +0.0404580f, +0.1812711f, -0.2131267f,
  -0.1488850f, -0.2398812f, +0.1331120f, +0.6323669f, +0.0031689f, -0.3527794f, +0.0421228f, -0.4183488f,
  -0.0359665f, +0.5868180f, +0.1218064f, +0.0567468f, +0.4293967f, +0.0796477f, +0.5736403f, -0.3522574f,
  +0.3360170f, +0.4959562f, -0.0005933f, -0.0663497f, +0.1926396f, -0.1004115f, +0.1344645f, +0.2881819f,
  -0.1684661f, +0.1716513f, -0.1900317f, -0.2205190f, -0.2936637f, +0.1392277f, -0.4073446f, +0.4059439f,
  -0.1548508f, +0.1539867f, -0.1884205f, +0.0117006f, +0.1413027f, -0.1165352f, +0.0233578f, -0.1841982f,
  +0.1428354f, +0.0933725f, -0.3059717f, -0.3823821f, -0.0947709f, -0.0782701f, +0.0311577f, -0.1215845f,
  +0.1030712f, -0.1077624f, -0.0096035f, +0.2339889f, +0.0349212f, -0.1501334f, -0.3049613f, +0.3215076f,
  +0.3520804f, -0.0861298f, +0.1217752f, +0.1384650f, +0.1510528f, -0.0630194f, -0.2894212f, -0.2123858f,
  +0.4250635f, +0.2509142f, +0.2837539f, +0.7523267f, +0.2126869f, -0.5100631f, -0.2009269f, +0.1410684f,
  +0.3800821f, +0.1581969f, +0.3083082f, +0.1072605f, +0.0066134f, +0.0900917f, -0.2177457f, -0.3749864f,
  -0.3143703f, -0.1234308f, -0.0795449f, +0.0735468f, +0.5991706f, -0.2191962f, -0.0718106f, +0.1129815f,
  -0.0827446f, -0.1455031f, +0.3916018f, -0.6516763f, -0.2102587f, +0.4811224f, +0.2660919f, +0.4622349f,
  -0.2404124f, +0.2937439f, +0.0718763f, +0.1138975f, +0.3209437f, -0.1676003f, -0.2792789f, -0.0330836f,
  -0.5768453f, +0.1417474f, -0.2936199f, +0.2402398f, +0.2406530f, +0.0006931f, -0.0542103f, +0.1734022f,
  +0.3236758f, -0.0954399f, -0.2938772f, +0.3814473f, -0.1450653f, -0.0384381f, +0.2834203f, -0.2893347f,
  -0.0770962f, +0.4501680f, +0.1831590f, +0.3020002f, +0.1820893f, -0.3660319f, +0.0705068f, +0.2157489f,
  +0.2546417f, -0.2207792f, +0.0712243f, -0.0251848f, -0.2249304f, +0.3136787f, -0.0685229f, +0.0459549f,
  +0.2996010f, -0.0999369f, +0.2600721f, -0.1132115f, -0.0462848f, +0.3023444f, -0.1925114f, +0.8222189f,
  -0.1661069f, -0.0460554f, +0.4321473f, -0.2834458f, -0.1931108f, -0.0238177f, +0.0142074f, +0.0612162f,
  -0.2363644f, -0.2652047f, +0.1825697f, -0.3035757f, +0.0054519f, +0.0406944f, -0.2004866f, +0.1395013f,
  +0.0184239f, -0.1010257f, +0.0795274f, -0.0186987f, +0.6091782f, -0.1580009f, +0.2143099f, -0.1108522f,
  -0.1566028f, +0.3345413f, +0.2165375f, -0.5152199f, -0.2581703f, +0.3535261f, -0.1394898f, +0.0093609f,
  +0.1882955f, -0.0969177f, +0.4202836f, +0.1738176f, +0.1048633f, -0.2888366f, +0.1513070f, +0.0679133f,
  -0.0992046f, +0.1912869f, +0.0599304f, +0.0470795f, -0.1571718f, +0.0116472f, +0.1668454f, -0.0111143f,
  -0.2086488f, +0.3547243f, +0.2096386f, +0.2956194f, +0.0928614f, -0.4067073f, -0.1980139f, +0.3647043f,
  -0.1232907f, +0.1554272f, +0.0817880f, +0.3118325f, -0.0388062f, -0.0180384f, -0.3725483f, -0.4300984f,
  +0.1954923f, +0.5188962f, +0.1557675f, +0.2900275f, +0.4088400f, -0.1813226f, -0.2458426f, +0.2505533f,
  -0.1873882f, +0.4483821f, -0.1004012f, -0.3116977f, +0.0432091f, +0.2553597f, -0.0276018f, -0.5129884f,
  -0.1016469f, +0.3201560f, -0.3116103f, +0.5208907f, -0.6300091f, +0.1245607f, -0.0778162f, +0.1668993f,
  -0.0654237f, +0.2348914f, -0.6151294f, +0.4264237f, +0.1025972f, -0.2784595f, +0.8593056f, -0.6946086f,
  +0.0378512f, -0.0991084f, -0.1434677f, -0.2182534f, -0.4219711f, +0.1626715f, -0.0318777f, +0.1615235f,
  +0.5522606f, +0.4041536f, -0.0760986f, +0.1567172f, -0.3334773f, -0.0594489f, +0.2401270f, +0.2345291f,
  -0.4327484f, +0.3199646f, -0.4080950f, -0.0337201f, -0.0311526f, -0.0093711f, -0.3736033f, +0.6096366f,
  +0.2549957f, -0.1720074f, -0.2642855f, +0.0088948f, +0.1238993f, -0.0793956f, -0.3011093f, -0.0926608f
);

const float biases[4] = float[4](
  -0.3263656f, -0.1428625f, -0.0314392f, -0.0813061f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer36 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2213741f, -0.0666681f, -0.0168119f, +0.1574247f, -0.2661025f, -0.4285475f, +0.0355074f, -0.2326386f,
  -0.0986726f, +0.2204729f, -0.1621439f, +0.3434033f, -0.0601260f, -0.3970282f, +0.0130261f, +0.1772806f,
  -0.0703017f, +0.0024830f, -0.2346986f, +0.1466707f, -0.0194833f, -0.0760113f, +0.0584225f, +0.1878134f,
  +0.5664102f, +0.3014712f, +0.1562829f, +0.0552650f, -0.0918702f, +0.0398374f, -0.0590778f, -0.0803032f,
  -0.5191904f, -0.1075695f, -0.1376084f, -0.7392020f, +0.1369560f, +0.6902134f, -0.1435974f, -0.2985173f,
  -0.2024458f, +0.0046229f, +0.2293971f, -0.3072878f, -0.1907012f, +0.6212520f, +0.2611649f, -0.1846574f,
  +0.2002362f, +0.4823114f, -0.0461110f, -0.0269353f, -0.2054653f, +0.1411927f, -0.1181295f, -0.1384284f,
  +0.0278429f, +0.1725937f, +0.0088906f, +0.0676292f, -0.1239222f, -0.0783868f, -0.1536936f, +0.0146885f,
  -0.0192814f, +0.1104885f, -0.3061719f, +0.0908567f, -0.0758062f, -0.0579273f, +0.0794443f, +0.1454726f,
  +0.1013814f, -0.0944047f, -0.0553535f, -0.0325456f, +0.0055367f, -0.0184733f, -0.1329396f, +0.1687391f,
  +0.0819023f, -0.0724891f, -0.0058972f, -0.3787443f, -0.0983085f, +0.0239092f, +0.2033043f, +0.3569076f,
  -0.0008226f, -0.2662085f, +0.1161762f, +0.0101095f, -0.0769895f, +0.1768734f, +0.1252586f, +0.0330878f,
  -0.2277485f, -0.0333076f, -0.0354607f, +0.1616274f, +0.1499045f, -0.0311828f, +0.1175106f, -0.0065456f,
  +0.1505202f, -0.1028459f, +0.1839109f, -0.2998850f, +0.1921619f, -0.0554037f, -0.2570378f, -0.3496386f,
  -0.0135866f, +0.0626713f, -0.0093623f, -0.3351241f, +0.0021321f, -0.2314103f, -0.0238619f, +0.2185039f,
  +0.0375114f, -0.2043009f, +0.0315347f, -0.1024533f, +0.1373172f, -0.1025050f, -0.0448625f, +0.1253475f,
  -0.0187973f, -0.1536735f, +0.1171283f, -0.0222330f, +0.0096287f, -0.1497457f, +0.0810399f, +0.1459312f,
  -0.0386248f, -0.0064112f, +0.1869205f, +0.0698410f, -0.1287223f, +0.0864736f, -0.0428577f, -0.1460507f,
  +0.2747919f, +0.0568019f, -0.0793746f, -0.2136512f, +0.1175537f, +0.3122499f, -0.0531218f, -0.0329805f,
  -0.0941877f, +0.1051659f, +0.1487638f, -0.2281488f, -0.2180623f, +1.2964773f, -0.0822975f, -0.0460239f,
  -0.0469795f, +0.0533886f, +0.0496831f, -0.2594454f, +0.0477635f, +0.0739858f, -0.0933978f, +0.1285938f,
  +0.0782426f, +0.0440045f, +0.4642885f, -0.1112417f, +0.1929529f, +0.2529562f, +0.0037301f, -0.0813763f,
  -0.2072076f, -0.4222092f, +0.4349200f, -0.1593393f, +0.1743274f, -0.0811860f, +0.0040515f, +0.9304704f,
  -0.2803429f, +0.2872851f, +0.5005701f, +0.1955278f, -0.0562393f, -0.1589180f, +0.0844202f, -0.0202016f,
  +0.0396747f, +0.4385592f, -0.0084897f, +0.0513744f, -0.1020064f, -0.0309446f, +0.0297539f, +0.0165805f,
  -0.1423806f, -0.1018957f, +0.0571955f, -0.0324831f, -0.0685946f, -0.0463707f, -0.2223210f, -0.0721566f,
  -0.0386947f, +0.1586753f, +0.3055742f, +0.2954431f, -0.0639733f, -0.1401269f, -0.0933769f, +0.0355235f,
  +0.0346828f, -0.1019162f, -0.0724553f, +0.2504413f, +0.0700039f, -0.2325985f, -0.0693715f, +0.0235371f,
  -0.0234663f, +0.3858743f, -0.1003391f, +0.6302448f, +0.1260682f, +0.1698806f, -0.3644780f, -0.7838497f,
  -0.0459165f, +0.4186987f, +0.0139140f, -0.1266280f, -0.0293975f, +0.0924591f, -0.3791574f, -0.4366286f,
  -0.1835759f, +0.1300487f, +0.0405752f, +0.0156448f, +0.6310189f, +0.2704695f, -0.2046324f, -0.2759907f,
  +0.3708836f, -0.2770120f, -0.0651455f, -0.0937445f, -0.2467699f, -0.1652539f, -0.0478150f, +0.2787646f,
  -0.0699605f, -0.1428010f, -0.1716088f, -0.3427772f, -0.2458522f, +0.0436232f, -0.2073655f, +0.1742315f,
  +0.0158549f, -0.0622516f, -0.1799459f, -0.0017522f, +0.3206542f, +0.1786334f, -0.2390716f, -0.0922273f,
  -0.3071272f, +0.0646500f, -0.3583208f, -0.0741019f, +0.2576520f, -0.1996092f, +0.0206360f, -0.2882985f,
  +0.1444112f, -0.1217816f, -0.0569944f, -0.0126668f, -0.2243802f, +0.0406845f, +0.2269050f, -0.1507272f
);

const float biases[4] = float[4](
  +0.0792417f, -0.0667137f, -0.0562733f, +0.0450877f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer37 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1436685f, -0.0968487f, -0.0535492f, -0.0006072f, -0.1150345f, +0.0648433f, -0.0279230f, -0.0382914f,
  +0.0078624f, +0.0905977f, +0.1340251f, +0.0865166f, -0.1885726f, -0.2246341f, -0.1462927f, -0.0180677f,
  +0.0009450f, +0.2444425f, +0.2137421f, +0.0739463f, -0.0576151f, -0.0235687f, -0.2406232f, -0.0066851f,
  -0.0427551f, +0.1307581f, -0.2778637f, +0.0094809f, -0.4090420f, +0.1027560f, +0.2559257f, -0.1270721f,
  +0.0640792f, +0.1393294f, -0.4760705f, -0.2849171f, -0.3215893f, +0.0689137f, -0.8176657f, +0.3057144f,
  +0.1184475f, -0.4663602f, -0.1676365f, -0.2928790f, -0.2056359f, +0.0673077f, -0.3891367f, +0.1314174f,
  +0.2338383f, +0.1079030f, -0.3650529f, +0.0798419f, -0.1447524f, -0.1170769f, +0.1393487f, +0.0147637f,
  -0.1429731f, -0.2812437f, -0.1954147f, -0.2002309f, -0.0105138f, -0.1589236f, -0.3913249f, +0.1928860f,
  +0.3228449f, +0.0770862f, +0.3306569f, +0.0496378f, -0.1504705f, +0.2696396f, +0.4927162f, -0.4922444f,
  -0.2197348f, +0.1333575f, +0.0844001f, -0.2953512f, +0.1516044f, -0.0093826f, -0.0525701f, -0.0774133f,
  -0.1273566f, -0.2389240f, -0.0859848f, -0.1729795f, -0.3257022f, -0.0428387f, -0.5606780f, +0.4225398f,
  -0.3372807f, +0.0317142f, -0.0635892f, -0.2515075f, -0.3013209f, -0.0116688f, -0.4545339f, +0.2986933f,
  -0.2167689f, +0.2642133f, -0.0204822f, -0.5533531f, -0.0020017f, +0.0498959f, -0.1152392f, -0.3359157f,
  -0.3251914f, -0.1066866f, +0.2922913f, +0.5965253f, +0.0865491f, +0.0769337f, -0.2326894f, -0.1239360f,
  +0.0411255f, +0.3407074f, +0.0280063f, +0.3685194f, -0.4297732f, +0.1053306f, -0.3565089f, +0.1843148f,
  -0.0818390f, +0.1498485f, -0.1024462f, -0.2640096f, +0.0678032f, +0.0722958f, -0.0303999f, -0.2409803f,
  +0.4388627f, +0.0140784f, -0.0171425f, -0.0071534f, -0.0029513f, +0.0559551f, -0.2998003f, -0.4001236f,
  +0.0805555f, +0.4358968f, +0.0823232f, +0.0558129f, +0.0859540f, -0.0699362f, +0.1465082f, +0.2069426f,
  -0.1705675f, +0.0717337f, -0.0653532f, -0.2121267f, +0.0471059f, -0.1274716f, +0.1318343f, +0.0632915f,
  +0.0767372f, +0.1031910f, +0.0560637f, -0.1596668f, -0.0145054f, +0.0184562f, +0.1310885f, +0.1366210f,
  +0.2099013f, -0.4114054f, +0.0750974f, +0.3298590f, -0.4007013f, +0.2706777f, -0.0597430f, -0.1468783f,
  +0.3074295f, +0.0603726f, +0.1978325f, +0.0715077f, +0.0520620f, +0.0778109f, +0.4242111f, +0.1506496f,
  +0.0064292f, +0.3235977f, +0.6797926f, +0.0634244f, -0.1569740f, -0.4450206f, -0.5867087f, -0.5330933f,
  +0.0326398f, -0.6302593f, +0.3326428f, -0.0462626f, +0.0319611f, -0.1206950f, -0.5910086f, -0.2586536f,
  +0.1260800f, +0.1422714f, -0.2248480f, -0.1121190f, +0.0798876f, -0.0910406f, +0.2516741f, -0.1313878f,
  +0.1698321f, +0.0184481f, -0.1950670f, +0.1259258f, -0.1840225f, -0.1723401f, -0.4737992f, +0.2228265f,
  -0.1146803f, +0.1736161f, -0.1393361f, +0.1929676f, +0.1628892f, +0.4544359f, -0.3072361f, -0.3736247f,
  +0.1341384f, -0.1900199f, -0.0393887f, +0.0458384f, -0.1175959f, -0.0465171f, +0.3369714f, +0.1352067f,
  -0.0635456f, +0.4313669f, -0.0174240f, -0.1136076f, -0.0739108f, +0.0033528f, -0.5246829f, -0.2392055f,
  -0.0973060f, -0.1319131f, +0.3794893f, +0.0188599f, +0.0487262f, -0.0060745f, -0.0204747f, +0.0828764f,
  +0.3046765f, -0.5328551f, -0.4256756f, +0.5664868f, -0.2664468f, +0.1813940f, +0.5476007f, +0.2622514f,
  +0.5878538f, +0.0487959f, +0.7288781f, +0.4002518f, -0.3524347f, -0.2275880f, -0.6265069f, +0.0282747f,
  -0.3338190f, -0.1296692f, +0.1851584f, -0.3261420f, -0.0088650f, -0.2028401f, -0.0748673f, -0.4858642f,
  +0.0119554f, +0.1653961f, -0.4871194f, -0.0045136f, +0.0929506f, +0.2824772f, +0.2710702f, +0.1678628f,
  +0.0194871f, -0.2369345f, +0.4394353f, +0.3705219f, +0.2006471f, -0.0520204f, -0.4186599f, +0.1149401f,
  -0.0111490f, -0.4089957f, -0.0713795f, -0.0630614f, +0.0192531f, -0.1519480f, +0.2197500f, -0.0342768f
);

const float biases[4] = float[4](
  +0.0937625f, -0.1127845f, -0.1244840f, -0.0644493f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer37 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0877775f, -0.5151130f, -0.3976711f, +0.0315038f, +0.1825430f, -0.0111125f, -0.3255599f, -0.0440748f,
  +0.0561950f, -0.6290173f, -0.1616393f, -0.1247025f, -0.0477954f, -0.1222266f, +0.1157835f, -0.1489158f,
  +0.0453589f, +0.0231774f, -0.1512153f, -0.0467683f, +0.0115130f, -0.1318846f, -0.0154651f, -0.0131214f,
  +0.4388968f, -0.0649827f, -0.1916287f, +0.4184776f, -0.1845789f, -0.2039171f, +0.1386512f, -0.3562264f,
  +0.1835138f, -0.5602729f, -0.3311633f, -0.3983318f, +0.7290221f, -0.1967834f, +0.0218795f, -0.2491087f,
  +0.2803691f, +0.2902125f, -0.2582441f, -0.1734624f, +0.1161303f, +0.0770008f, +0.1193684f, +0.1794602f,
  -0.1251360f, -0.0947256f, -0.5549787f, +0.0489669f, +0.1475755f, -0.0113420f, +0.1403909f, +0.0348959f,
  +0.2897101f, -0.0195056f, -0.0352594f, +0.4509722f, +0.0331788f, +0.1641999f, -0.1891457f, +0.1083955f,
  -0.0719478f, +0.6587901f, +0.1082529f, +0.1280521f, -0.0691796f, -0.0635449f, +0.0255045f, +0.2851207f,
  +0.2468753f, -0.0275537f, +0.0912422f, +0.0360888f, +0.0914761f, -0.0118689f, -0.0128349f, -0.2036983f,
  +0.1198795f, -0.4958798f, +0.1322963f, -0.0479154f, +0.1284147f, +0.0779020f, -0.3024152f, -0.5438648f,
  -0.0900503f, -0.5331847f, +0.0288290f, +0.0410152f, -0.2822537f, +0.1185891f, -0.0345477f, -0.4029351f,
  +0.4777793f, +0.0659783f, +0.4402214f, +0.1733080f, -0.4955431f, +0.1307797f, +0.6092722f, +0.0097560f,
  +0.2148872f, +0.2319798f, +0.0219498f, -0.0911589f, +0.0454543f, -0.2522170f, -0.0757226f, +0.0660468f,
  -0.5988483f, -0.0720976f, +0.1755253f, +0.1134054f, -0.1541121f, -0.1128651f, -0.2060588f, -0.2570172f,
  +0.3031676f, +0.0112047f, -0.0808422f, +0.3597710f, -0.0980695f, -0.1446270f, +0.0646689f, +0.1109930f,
  -0.0257971f, -0.5101166f, +0.0908265f, +0.1308605f, -0.2254378f, +0.0720810f, -0.2263160f, -0.2251776f,
  -0.1461692f, +0.1100609f, -0.3120762f, +0.0738298f, +0.3508331f, -0.1024784f, +0.1634740f, +0.0622968f,
  +0.1430789f, -0.0019988f, -0.0267516f, +0.2612629f, -0.1600102f, -0.0580214f, +0.2899124f, -0.0743397f,
  +0.1714013f, +0.4495903f, +0.1338942f, -0.0001193f, +0.1985026f, +0.1078694f, -0.2143114f, -0.1436711f,
  +0.2098984f, +0.0417275f, -0.0919461f, +0.1523685f, +0.1532538f, +0.0296291f, -0.0104870f, -0.1682955f,
  -0.0176032f, -0.1835370f, +0.1341165f, +0.1593021f, +0.1151946f, +0.3023667f, +0.2993922f, +0.2859111f,
  +0.2659388f, -0.2009728f, +0.3096992f, +0.1679158f, -0.4203177f, +0.2848732f, -0.0902342f, +0.2358582f,
  +0.1164326f, -0.4478555f, -0.3471409f, -0.5096651f, +0.1549687f, -0.0098739f, -0.0214310f, +0.0220644f,
  +0.1647318f, +0.0104024f, +0.1252195f, +0.0689265f, -0.1552077f, -0.0530400f, -0.0506626f, +0.1284490f,
  -0.2650073f, +0.1852985f, -0.0229549f, +0.1026813f, -0.2947090f, +0.0329513f, -0.0500880f, +0.0386257f,
  +0.0947547f, -0.0411061f, -0.1405780f, -0.0569101f, -0.1844060f, -0.1017578f, +0.1039130f, -0.0891805f,
  -0.0615303f, -0.1117648f, -0.1388355f, +0.0562410f, -0.2585485f, +0.1574204f, +0.2485228f, +0.0368241f,
  +0.2208164f, -0.1966252f, -0.1852100f, +0.1493731f, -0.0224486f, -0.0194204f, +0.0771794f, +0.2995529f,
  +0.0027273f, -0.0794807f, -0.0439487f, +0.0230491f, -0.0849939f, +0.0001265f, -0.0909877f, -0.0607193f,
  +0.1256032f, +0.0881701f, -0.2014913f, +0.0579106f, -0.2638885f, +0.2222943f, +0.0306654f, -0.2376729f,
  +0.5084034f, +0.5104278f, -0.1446116f, -0.0697190f, +0.0901797f, +0.3101353f, -0.4570010f, -0.4641809f,
  +0.1666693f, +0.0420654f, +0.0607579f, +0.0725407f, +0.0355078f, -0.0337702f, -0.1275910f, -0.0564183f,
  -0.0577909f, -0.0870826f, -0.0043890f, +0.0226692f, -0.1337099f, +0.1131721f, -0.0022053f, +0.0324950f,
  +0.0183859f, -0.0965887f, +0.0105418f, +0.0505998f, +0.0050713f, -0.0275326f, -0.0622678f, +0.0142199f,
  -0.0356840f, +0.1190743f, +0.1291150f, +0.0018781f, +0.0831190f, -0.0570217f, +0.0776786f, +0.0862578f
);

const float biases[4] = float[4](
  +0.1254013f, -0.0657226f, -0.3596952f, -0.5688750f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer38 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2776186f, -0.4026814f, -0.2277769f, +0.1110372f, -0.2129760f, -0.2171493f, -0.0851508f, +0.0110337f,
  +0.2934550f, -0.5226610f, -0.1004015f, -0.2266635f, -0.2814719f, -0.1177413f, +0.0808544f, -0.2643870f,
  +0.0367597f, -0.2900038f, -0.1940896f, +0.3468642f, +0.1036597f, -0.3831379f, -0.1244958f, -0.1557671f,
  -0.3509084f, -0.4989040f, +0.0562439f, +0.2628708f, -0.1787037f, -0.1573896f, +0.0380893f, -0.3658261f,
  -0.2042640f, +0.3772990f, +0.3066034f, +0.4730542f, -0.1305723f, +0.3180937f, -0.3177520f, -0.7846731f,
  +0.2269500f, -0.1560728f, +0.0687883f, -0.3981900f, -0.1087544f, +0.0759308f, -0.3309489f, -0.6144087f,
  +0.0407008f, +0.1229874f, -0.2237630f, +0.0767714f, +0.0507985f, -0.0763088f, -0.2406847f, -0.0200472f,
  -0.0379123f, +0.0118615f, -0.0635072f, -0.0071215f, -0.4121052f, +0.4971184f, -0.4165605f, -0.2081306f,
  -0.0577576f, -0.0644063f, -0.3101420f, +0.0517368f, -0.0962708f, +0.1276877f, +0.3215839f, +0.3316053f,
  -0.0576638f, -0.1717959f, +0.0474846f, -0.1490478f, -0.4133289f, +0.0156881f, -0.0642162f, -0.6627648f,
  +0.2000712f, +0.2757040f, -0.2926861f, +0.1653902f, -0.2640348f, +0.1251134f, +0.1493743f, -0.2288684f,
  -0.0970368f, +0.0342945f, -0.4924036f, -0.0011066f, -0.0467676f, -0.2532968f, +0.0681817f, +0.1136416f,
  +0.4361145f, -0.1765343f, +0.2725261f, +0.4299908f, -0.4285805f, -0.1810554f, -0.4033980f, +0.0221929f,
  -0.0428201f, +0.0088758f, -0.0695126f, +0.5287386f, +0.4630515f, -0.0619267f, +0.4276780f, -0.3493432f,
  +0.0120382f, -0.1920783f, -0.1989881f, +0.0908281f, +0.0612943f, -0.1714727f, +0.1234906f, -0.2619751f,
  -0.1363789f, -0.1622393f, +0.0155294f, -0.1188231f, +0.1708173f, +0.1195572f, +0.1057802f, -0.1859310f,
  -0.0228235f, -0.1021449f, +0.2443575f, +0.0604916f, +0.4942922f, +0.2110435f, +0.1563094f, -0.0312042f,
  +0.0547647f, +0.0318122f, +0.0537479f, -0.0030973f, +0.4222940f, -0.0471074f, -0.1086768f, -0.1154879f,
  -0.6416132f, +0.2407979f, -0.1573018f, -0.2174505f, -0.2359215f, +0.1582702f, +0.0401618f, -0.1170196f,
  +0.3149796f, +0.0204579f, -0.2123328f, +0.0230884f, -0.3706073f, -0.3999963f, +0.0113836f, -0.1586359f,
  -0.0199848f, +0.0685798f, -0.0707003f, +0.3053608f, +0.2380214f, -0.2750299f, -0.3036014f, +0.2452414f,
  +0.2071905f, +0.1886800f, -0.1753487f, -0.5601935f, +0.0109218f, +0.1785734f, +0.2066254f, -0.1704767f,
  +0.5517615f, -0.1687745f, -0.4104734f, +0.0282659f, +0.0534470f, -0.3362640f, -0.1726935f, +0.2439319f,
  +0.1756642f, +0.0253263f, -0.1702382f, +0.3158603f, +0.2206491f, -0.1902905f, -0.2839684f, +0.0903522f,
  +0.0461653f, +0.3189514f, -0.3692763f, -0.2773293f, -0.1054716f, -0.0555275f, +0.2327030f, -0.0040288f,
  -0.1181498f, +0.1523768f, -0.1039018f, -0.0515655f, -0.1950671f, -0.1977778f, +0.0171461f, +0.3779256f,
  -0.0217697f, -0.0207771f, -0.3657968f, +0.1580051f, -0.0536299f, +0.3162326f, +0.0153544f, +0.3535325f,
  +0.0047439f, -0.0384556f, +0.1602495f, -0.2583703f, -0.1012100f, +0.2543458f, +0.1555786f, -0.3627911f,
  +0.1595738f, +0.0748520f, -0.3507247f, +0.0269000f, -0.6117138f, +0.1794389f, +0.1098283f, -0.2154819f,
  +0.0337521f, -0.2026636f, +0.2014859f, -0.2870991f, -0.0468246f, -0.0828011f, +0.2027546f, -0.0572264f,
  +0.3782849f, -0.2009273f, +0.2046633f, -0.3438167f, +0.0464000f, +0.0997313f, +0.1928910f, -0.0068762f,
  +0.1819102f, -0.3645333f, -0.1019193f, -0.1852719f, +0.1765379f, -0.1506467f, +0.2485740f, +0.9018170f,
  -0.1546824f, +0.0852567f, +0.2398583f, -0.0106573f, -0.1239744f, +0.0364661f, -0.1011526f, -0.5832545f,
  -0.1245028f, -0.0182952f, +0.1065582f, +0.0622501f, +0.1139604f, +0.0907247f, +0.0992707f, +0.0434770f,
  +0.0457857f, +0.2939076f, +0.1804450f, -0.2354369f, +0.4736357f, +0.1725086f, -0.0917621f, -0.1681875f,
  +0.0168255f, +0.0423367f, +0.5595360f, -0.2532475f, +0.3034794f, -0.1723630f, -0.0394765f, -0.1396963f
);

const float biases[4] = float[4](
  -0.0375130f, -0.2236305f, -0.0979522f, +0.1753932f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer38 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0042987f, +0.0909430f, +0.1421867f, -0.1237176f, +0.2522842f, -0.0075038f, +0.0541516f, -0.1573353f,
  -0.1383288f, +0.5316732f, +0.0143222f, +0.0166085f, +0.2576600f, +0.0245023f, +0.1362635f, -0.1045457f,
  -0.0429176f, +0.2667101f, -0.1584720f, +0.0724911f, -0.0533201f, +0.3151869f, +0.0644967f, +0.1458146f,
  +0.1214733f, +0.1481237f, -0.1341916f, +0.5209354f, -0.0413751f, -0.3560304f, +0.1818473f, -0.2318409f,
  +0.0981009f, +0.0515743f, +0.3245241f, -0.1261222f, -0.4194619f, +0.3875718f, +0.0795806f, +0.2021663f,
  -0.0879630f, +0.0409954f, +0.0700807f, +0.1686037f, -0.1919855f, +0.1839195f, +0.2352690f, +0.6774113f,
  -0.1204681f, -0.2058714f, +0.4301454f, +0.0854584f, +0.0988849f, +0.1049626f, -0.5044705f, +0.0528524f,
  -0.0506076f, +0.1888703f, +0.2697647f, +0.2248620f, +0.0923324f, -0.1166598f, -0.0191970f, +0.2650654f,
  -0.1919306f, -0.1184845f, +0.0261304f, -0.0108659f, +0.0456189f, +0.0392710f, -0.0624810f, +0.5100154f,
  -0.2704545f, -0.0137885f, -0.1909061f, -0.0158560f, -0.0613740f, +0.0856859f, +0.0727111f, -0.0020363f,
  +0.2910209f, -0.0574211f, +0.0955901f, -0.0060912f, -0.0962691f, -0.1750119f, -0.2347125f, +0.1512392f,
  +0.0938727f, -0.0206349f, -0.0308762f, -0.0789248f, +0.1650799f, -0.1559730f, -0.0027513f, +0.2008348f,
  -0.0094864f, -0.0753248f, +0.0400803f, -0.2194982f, -0.0294213f, +0.0721599f, +0.1499374f, -0.0683576f,
  -0.2398552f, -0.3328805f, -0.0126561f, -0.0388943f, +0.1754809f, -0.1739459f, +0.2728137f, -0.2890426f,
  +0.1710846f, -0.0766766f, -0.2251123f, +0.4026850f, +0.1455739f, +0.0848256f, -0.3657998f, -0.0704345f,
  -0.0146936f, +0.2136062f, -0.3188354f, +0.0804197f, -0.0234016f, -0.0301603f, +0.1182644f, +0.1554893f,
  +0.2499718f, +0.1091076f, -0.2240296f, -0.1920940f, -0.1834788f, -0.0619520f, +0.1501329f, -0.1447518f,
  -0.0413134f, +0.0528171f, -0.1640377f, +0.1029122f, -0.1948684f, +0.0739183f, -0.0588789f, -0.1936833f,
  -0.1288852f, +0.1164682f, +0.0142801f, +0.0542887f, -0.3491501f, -0.1005920f, +0.0998854f, +0.3558225f,
  +0.0584344f, +0.2511782f, +0.0735636f, +0.2138791f, +0.2204477f, -0.2080242f, +0.0686848f, +0.1539215f,
  -0.2131460f, +0.0266269f, -0.2089323f, +0.1609741f, +0.0852907f, -0.1522845f, +0.0263345f, +0.1448183f,
  -0.1084730f, +0.0690474f, +0.0959153f, -0.0713502f, -0.3424593f, -0.1602954f, +0.1468627f, +0.1914632f,
  +0.3354846f, -0.7589191f, +0.0308822f, -0.2115039f, -0.1690509f, -0.8394982f, +0.0757575f, +0.1879695f,
  -0.0949083f, -0.0471648f, -0.0950293f, +0.8585283f, +0.0903842f, -0.2421946f, -0.6287167f, -0.3304553f,
  +0.1379359f, +0.3811830f, +0.0399680f, -0.0685338f, +0.0729715f, -0.1100807f, +0.0111362f, +0.1875994f,
  +0.0008641f, +0.3816210f, -0.1099918f, -0.1054226f, -0.1227679f, +0.0245877f, -0.0856176f, -0.2391441f,
  +0.0519000f, +0.0488249f, -0.1187307f, +0.0409524f, +0.1354326f, +0.2002335f, -0.2337153f, -0.3273331f,
  +0.3804377f, -0.1266156f, -0.1189239f, +0.2194748f, -0.2602047f, -0.0445024f, -0.1609287f, +0.1143815f,
  -0.1865552f, +0.0075131f, -0.1159393f, +0.0543212f, +0.0302049f, +0.0992623f, +0.2963907f, +0.0851983f,
  -0.1252822f, +0.0987582f, +0.0517916f, +0.1118626f, -0.0068966f, +0.0552512f, -0.1932052f, -0.0365596f,
  -0.1431144f, -0.2209198f, -0.0242228f, +0.3820172f, -0.2947564f, -0.1224694f, -0.4060240f, +0.2130875f,
  -0.5508000f, +0.4821948f, +0.4467755f, +0.6540716f, +0.0024396f, -0.1357801f, +0.2738758f, +0.0325714f,
  +0.1673979f, +0.0742715f, +0.2072945f, +0.4715247f, +0.2112447f, +0.0031081f, -0.5402866f, -0.0513416f,
  -0.0005029f, +0.1030422f, -0.2244350f, +0.1342954f, +0.0763143f, -0.1048884f, +0.0735713f, +0.4387518f,
  +0.0704508f, -0.1099384f, -0.0455735f, -0.0413742f, -0.1379583f, +0.2437758f, -0.1897708f, -0.2912301f,
  -0.2560500f, +0.1688060f, -0.0291704f, +0.3886367f, +0.0253675f, +0.2473646f, +0.1231708f, -0.0292861f
);

const float biases[4] = float[4](
  +0.0551828f, +0.0675120f, -0.0317470f, -0.0042005f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer39 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1693100f, -0.4174931f, +0.2208727f, +0.0276204f, +0.2986669f, -0.2200209f, +0.3057879f, -0.0546235f,
  -0.0712368f, +0.0486580f, +0.3646387f, +0.1817514f, -0.1311409f, -0.2141964f, +0.2140481f, -0.3839490f,
  +0.1420713f, +0.0888705f, +0.0755626f, +0.0853623f, +0.0125703f, +0.1222038f, +0.0590158f, -0.0023096f,
  +0.4081768f, -0.0218362f, -0.0742058f, +0.7223287f, -0.1976107f, -0.2278782f, +0.0666839f, -0.1636174f,
  +0.2299216f, +0.3493115f, -0.3224850f, -0.4530111f, -0.2451888f, -0.0825881f, -0.4478316f, -0.0398800f,
  +0.2271366f, -0.0482119f, +0.0779425f, -0.2178145f, +0.2205715f, -0.1327634f, +0.1187067f, +0.2574726f,
  -0.0229217f, -0.3892934f, -0.0300938f, +0.4150033f, -0.0483402f, +0.1600118f, -0.2822070f, +0.1769278f,
  +0.0030684f, -0.6180119f, -0.2975289f, -0.4464792f, -0.2678111f, -0.0147803f, -0.1935159f, -0.1107355f,
  +0.3366848f, -0.1545379f, +0.0650389f, -0.1642839f, -0.0734068f, +0.1591093f, -0.0266524f, -0.2128495f,
  +0.0657958f, +0.0689037f, +0.3096031f, -0.0091055f, -0.2194434f, +0.0049225f, +0.0690738f, -0.0140891f,
  -0.1664605f, +0.3760572f, +0.2024382f, -0.1509627f, +0.1499993f, -0.0444825f, +0.1124543f, +0.0973494f,
  +0.0794083f, +0.0183843f, +0.2199671f, -0.0166024f, +0.0368701f, -0.2730614f, +0.0706751f, +0.0806403f,
  -0.1116505f, +0.1253396f, -0.1912559f, -0.0238773f, -0.0026364f, -0.0491270f, -0.0525647f, -0.6647382f,
  -0.0660026f, -0.1011954f, -0.0320427f, -0.0346380f, +0.1784101f, +0.1796639f, +0.5010232f, -0.0463474f,
  -0.2089536f, +0.0394805f, +0.0426336f, -0.1963237f, -0.0545811f, -0.3016979f, +0.3585192f, -0.0387249f,
  -0.0510341f, -0.1682259f, -0.1721549f, +0.3550118f, -0.1910410f, +0.3096501f, -0.2360038f, +0.1851422f,
  +0.1573979f, -0.2121249f, -0.1262956f, +0.3493195f, +0.1222330f, +0.2036552f, +0.0572973f, +0.2331032f,
  -0.2978208f, +0.2842897f, -0.1183807f, +0.1291218f, +0.0407885f, +0.1306478f, +0.2218955f, +0.0937735f,
  -0.0850213f, +0.0557282f, +0.0233841f, +0.0480614f, +0.1585356f, -0.0581245f, -0.0541142f, -0.1899858f,
  +0.0337922f, +0.0936663f, +0.2167650f, -0.1233828f, +0.0656460f, -0.0123211f, +0.5161024f, -0.0414817f,
  +0.1459754f, -0.0853083f, +0.3234951f, +0.0947146f, +0.0136804f, +0.1986957f, +0.1842216f, +0.3278435f,
  -0.1906203f, +0.1295211f, +0.2278269f, +0.0651850f, +0.2280637f, -0.3226709f, -0.0920516f, -0.1444590f,
  -0.2082435f, +0.2748473f, +0.3327672f, -0.4876958f, +0.5194460f, +0.0505142f, -0.4255664f, -0.5944257f,
  -0.0013971f, -0.3944960f, +0.2470266f, +0.3014535f, +0.3464335f, +0.3183463f, -0.6012390f, -0.4734688f,
  -0.2217669f, +0.1289594f, -0.1236231f, +0.0753484f, +0.1752724f, -0.1598833f, +0.0007473f, +0.1058168f,
  -0.0203698f, +0.0849917f, -0.0011025f, +0.1910479f, +0.1370825f, -0.0600280f, +0.0387283f, -0.0145427f,
  -0.2838861f, +0.1888923f, +0.0997022f, -0.0529200f, -0.4661579f, -0.1322477f, -0.0299017f, +0.1963460f,
  -0.0559205f, -0.5726759f, +0.0135920f, -0.2768454f, +0.3684687f, -0.0775274f, -0.3250303f, -0.0080585f,
  -0.1542253f, -0.1890167f, -0.3558140f, -0.3945396f, +0.1708259f, -0.0015687f, -0.6120453f, +0.3653424f,
  -0.4446649f, -0.4205347f, -0.2971628f, -0.5353686f, -0.4840970f, +0.0939249f, -0.4013542f, +0.3258299f,
  +0.0894966f, -0.0100262f, -0.1712331f, -0.1386474f, +0.1143368f, -0.3037686f, +0.0557864f, -0.0713678f,
  +0.2153410f, -0.2113935f, +0.2641272f, -0.0915995f, -0.1585733f, -0.0376607f, +0.5966203f, -0.0925249f,
  +0.0434774f, +0.4784513f, -0.0914854f, +0.3135018f, -0.0914637f, +0.2788187f, +0.1417659f, +0.2260161f,
  -0.0554108f, +0.1321663f, -0.0285169f, +0.0311327f, +0.1763315f, -0.0340712f, +0.0840646f, -0.1915828f,
  +0.1463877f, +0.1315333f, +0.0249993f, +0.2840042f, -0.1396344f, -0.0883389f, -0.1340108f, +0.2822992f,
  +0.2339267f, +0.2486124f, -0.3960138f, +0.0928600f, +0.2701431f, +0.1048744f, +0.1147848f, +0.0488931f
);

const float biases[4] = float[4](
  -0.2211395f, +0.1511396f, +0.0220849f, +0.0188082f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer39 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0736216f, -0.0922355f, +0.1912231f, -0.0053148f, -0.0579370f, -0.2040593f, -0.1402883f, +0.0265923f,
  -0.0698580f, +0.2815728f, +0.2371954f, -0.1583049f, -0.2931987f, -0.0120132f, -0.0220211f, -0.2198664f,
  +0.1353161f, -0.0726124f, -0.2627286f, -0.0308857f, +0.1113616f, +0.2338998f, -0.0531164f, +0.4303766f,
  +0.2329145f, +0.0499696f, +0.4773961f, +0.3709224f, -0.3969940f, -0.3705411f, -0.5698322f, -0.0836353f,
  -0.2438875f, +0.2246703f, -0.3206654f, -0.7533597f, -0.6395378f, +0.1133050f, -0.1815654f, -0.1452684f,
  +0.4396741f, -0.1615614f, -0.5101582f, -0.0757846f, +0.6613630f, +0.4117464f, +0.3673263f, +0.0459570f,
  -0.0000280f, +0.0360275f, +0.0127269f, +0.0142726f, -0.0209278f, -0.2592250f, -0.0997314f, -0.0855855f,
  +0.2747478f, -0.2432388f, -0.0395296f, -0.2667757f, -0.4216332f, +0.1852798f, +0.0106884f, -0.2541620f,
  +0.2103315f, +0.1148518f, -0.2138901f, +0.2108745f, +0.1385210f, +0.0638702f, -0.0699751f, +0.1166438f,
  -0.2002344f, -0.2912949f, -0.1377901f, +0.0260264f, -0.0622909f, +0.0722087f, +0.1470929f, -0.0675491f,
  -0.0138775f, -0.2780254f, +0.0227207f, +0.3708180f, +0.1431784f, +0.1707031f, +0.5563752f, -0.0097918f,
  +0.2155948f, +0.0341737f, +0.0476046f, +0.1282443f, +0.0921613f, -0.2078742f, +0.1608286f, -0.2903184f,
  +0.4720579f, -0.0023633f, -0.0215559f, +0.4820831f, -0.1490366f, -0.0804592f, +0.0841049f, -0.3216780f,
  +0.3228415f, +0.5609754f, +0.0599844f, -0.4553714f, +0.6713322f, -0.3219146f, +0.6333071f, -0.3735108f,
  +0.3152753f, +0.0352521f, -0.0022627f, -0.2535913f, +0.4835079f, +0.0207006f, +0.5257502f, -0.2593277f,
  +0.1641822f, -0.4428272f, -0.1414154f, +0.3877439f, -0.2881596f, +0.0857419f, -0.1791599f, +0.4049331f,
  -0.1031590f, -0.7424904f, +0.1339401f, -0.0942748f, -0.3224196f, -0.0416685f, -0.0981266f, +0.3997186f,
  -0.1456808f, -0.1010529f, +0.2621342f, -0.0652188f, -0.0181883f, +0.0755707f, +0.1709553f, -0.1535788f,
  -0.0138116f, -0.1813693f, -0.4268887f, +0.3001000f, -0.2429272f, +0.3026918f, -0.1493670f, -0.0710674f,
  -0.3241854f, +0.2854028f, -0.4922709f, -0.2256325f, +0.1358786f, +0.5469238f, +0.1601343f, -0.3108595f,
  -0.0115940f, -0.3854679f, -0.2031926f, -0.2046190f, -0.0833539f, -0.2020992f, -0.0846619f, +0.1036585f,
  -0.0030156f, -0.0696201f, +0.1306444f, -0.0211945f, -0.1940340f, +0.2489201f, +0.0922934f, +0.1493210f,
  -0.2676122f, +0.1513399f, +0.3410379f, -0.0139801f, -0.1029733f, +0.1378639f, +0.2165894f, -0.1029582f,
  -0.5131347f, -0.1257596f, +0.5295267f, -0.1191386f, -0.1261505f, -0.3745250f, -0.0048706f, -0.0666596f,
  +0.1024179f, -0.0851308f, +0.0260211f, +0.1137855f, -0.2600868f, -0.0915528f, -0.0402256f, +0.1763074f,
  +0.0206838f, +0.1410629f, +0.0640597f, -0.2230404f, +0.0802378f, +0.1602144f, -0.0160873f, -0.1357351f,
  +0.1848299f, -0.1755633f, +0.2118268f, +0.1491095f, +0.2030176f, -0.4739859f, +0.3095537f, -0.1279410f,
  -0.0887660f, +0.1425939f, +0.1480639f, -0.0319513f, +0.0898337f, +0.0385257f, +0.0596536f, +0.1722890f,
  -0.1223596f, +0.2422118f, +0.1116277f, +0.0108820f, -0.0693535f, -0.0580928f, -0.0520675f, -0.0170041f,
  -0.0600215f, +0.0304957f, +0.0764031f, +0.0117569f, +0.0365339f, +0.0448100f, +0.1090790f, -0.1866307f,
  +0.0937933f, -0.1901401f, +0.0598812f, +0.3197957f, -0.1234178f, +0.2189368f, +0.2797254f, +0.1737594f,
  +0.2479155f, -0.1540758f, +0.3649581f, +0.4201866f, -0.0029875f, -0.1839008f, -0.4954921f, -0.0986749f,
  -0.5556795f, -0.2236538f, +0.4087813f, -0.0228101f, -0.2357806f, -0.1618301f, -0.1018377f, -0.3493212f,
  -0.1752581f, +0.0153768f, +0.1338569f, -0.1228565f, +0.4194799f, +0.0969308f, +0.3593559f, +0.2458163f,
  -0.6579232f, +0.0020228f, +0.4409639f, +0.5111439f, +0.2193606f, +0.1902975f, +0.1445269f, +0.1010710f,
  -0.5257342f, -0.3740975f, +0.2154731f, +0.0518445f, -0.1538238f, -0.3366927f, +0.0241031f, +0.0703901f
);

const float biases[4] = float[4](
  -0.0981577f, +0.0034864f, +0.1262063f, +0.0396608f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer40 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2781255f, -0.0674620f, -0.1978858f, -0.4188049f, +0.2331149f, +0.1666815f, +0.1957096f, +0.3110229f,
  -0.3277352f, +0.1501822f, -0.2994144f, +0.0560381f, +0.1192643f, +0.0925964f, -0.1159592f, +0.5602756f,
  +0.0038044f, +0.0286021f, -0.0054787f, -0.0469600f, -0.1804069f, -0.2036638f, -0.1497862f, +0.0808401f,
  +0.2524877f, +0.0575129f, -0.0900942f, -0.1396285f, -0.0252040f, -0.2708021f, +0.6348932f, +0.3340895f,
  +0.2080732f, -0.2597739f, -0.0408812f, -0.1304517f, +0.0502550f, -0.4562604f, +0.2893380f, -0.4672632f,
  +0.1682580f, +0.3192658f, -0.1342349f, -0.0680430f, +0.1533181f, +0.3256406f, -0.2128086f, +0.3463358f,
  +0.0577680f, -0.2164367f, -0.1956142f, +0.0685285f, +0.1009039f, -0.0987012f, +0.3469835f, +0.0717374f,
  +0.0111013f, -0.3172193f, -0.1138350f, -0.1015285f, +0.5222566f, +0.0075463f, +0.7795674f, +0.0484870f,
  +0.1302543f, -0.2189794f, -0.0070917f, -0.1400717f, -0.1128408f, -0.0885316f, +0.4448902f, +0.0140876f,
  +0.0715458f, -0.0215463f, -0.0042958f, -0.2448281f, -0.2217188f, -0.0492882f, -0.1164390f, +0.0404578f,
  +0.1020685f, -0.2424994f, +0.1346421f, -0.2722151f, -0.2385368f, -0.0179023f, -0.2477601f, -0.4310442f,
  +0.4080199f, -0.0558585f, +0.0173251f, -0.3433776f, +0.0587989f, -0.3162834f, +0.0091902f, -0.1705917f,
  -0.1259015f, +0.2481745f, +0.5832340f, -0.3263258f, -0.5161516f, +0.0076925f, +0.5005755f, +0.0032730f,
  -0.5664923f, -0.2909639f, +0.0763782f, -0.0288060f, +0.0586984f, +0.6267444f, +0.6998923f, -0.4220291f,
  +0.2195597f, +0.2211208f, -0.1929310f, -0.2283614f, -0.2615423f, +0.0331134f, +0.0891441f, +0.1541370f,
  -0.2418122f, +0.1717702f, -0.3364646f, +0.1078307f, -0.3043123f, +0.0882650f, +0.2575760f, -0.0598718f,
  -0.1771569f, -0.3180860f, -0.0193068f, +0.2788536f, +0.1915801f, -0.0681573f, -0.0107445f, -0.1545098f,
  +0.0952029f, -0.2225648f, -0.1093146f, +0.1335461f, +0.0296681f, +0.3135861f, -0.0275967f, +0.2598506f,
  -0.2121788f, +0.1282839f, -0.1032232f, -0.2874497f, +0.2014281f, -0.0885826f, -0.0413945f, +0.3011027f,
  +0.0389632f, -0.1744731f, -0.1790929f, -0.1149292f, +0.2235131f, -0.0605171f, -0.2451801f, +0.0680947f,
  +0.1107886f, +0.1551106f, -0.2188648f, -0.5147345f, +0.0295894f, +0.0529726f, -0.3691586f, +0.0165780f,
  -0.4490330f, +0.0447802f, -0.6554564f, -0.2536458f, +0.5425058f, +0.2027016f, -0.2044242f, +0.2725542f,
  -0.0690497f, -0.1374858f, -0.2538209f, -0.4459213f, -0.2291732f, -0.0995712f, -0.0531973f, -0.2139479f,
  +0.1414720f, +0.3937826f, -0.1729510f, -0.4037758f, +0.4304318f, +0.6453772f, -0.1584207f, +0.1103940f,
  -0.0003253f, -0.0349675f, -0.3445097f, -0.2920506f, +0.0543167f, -0.0508858f, +0.0620651f, +0.1702023f,
  +0.1262005f, +0.0259288f, -0.1256868f, -0.0942193f, +0.0570144f, +0.0416830f, +0.0758946f, +0.0674082f,
  +0.2450177f, -0.4902458f, +0.0635196f, -0.2826947f, -0.0537413f, +0.0826477f, +0.2363262f, -0.1533296f,
  -0.0018187f, -0.0399934f, +0.1476253f, -0.1175518f, -0.0138744f, +0.1293998f, +0.1837903f, -0.0096307f,
  +0.2059859f, -0.7228851f, -0.0776209f, -0.1228150f, -0.1469477f, +0.0753362f, +0.5244601f, -0.4193371f,
  -0.4423585f, -0.0724319f, +0.0577039f, +0.1589658f, +0.2376128f, +0.1048784f, +0.0622793f, +0.3632198f,
  +0.2710001f, +0.1566897f, -0.1978167f, -0.2491071f, +0.2266899f, -0.1058978f, +0.4942418f, +0.1483915f,
  +1.0374680f, +0.1625900f, +0.2419194f, +0.2724443f, -0.5240217f, -0.8714622f, -0.0436363f, -0.0241680f,
  -0.6541128f, -0.0437045f, -0.0537560f, +0.1256817f, +0.3861795f, -0.2145495f, +0.2250492f, -0.1566642f,
  -0.1291803f, -0.0977992f, +0.2851776f, +0.3096312f, +0.2089076f, -0.0527698f, +0.0431874f, -0.2144919f,
  -0.0923120f, -0.1895048f, -0.0097940f, +0.0801023f, -0.0944318f, +0.1481656f, -0.1920524f, +0.0521414f,
  -0.0492865f, +0.1221125f, -0.0448401f, +0.1901123f, +0.0708332f, -0.3335665f, -0.1346994f, +0.0616692f
);

const float biases[4] = float[4](
  -0.0529970f, +0.0512323f, -0.1442600f, -0.0165785f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer40 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1305083f, -0.1905577f, +0.0386823f, -0.0285022f, -0.0814682f, +0.1537638f, -0.1933942f, -0.0981366f,
  +0.1770757f, +0.0752273f, -0.1529687f, +0.1061456f, -0.1576071f, -0.2263172f, -0.1235186f, -0.1658578f,
  -0.2530593f, -0.1032591f, +0.0117117f, -0.1453950f, +0.0562974f, +0.4704504f, +0.1912547f, -0.2070160f,
  +0.2005979f, -0.0271318f, +0.0113824f, +0.0386305f, -0.1143175f, -0.1455284f, +0.0263237f, +0.0133127f,
  -0.5686718f, +0.1805764f, +0.1742425f, +0.1243900f, -0.2109888f, +0.7563245f, -0.0876056f, +0.0301761f,
  -0.1172913f, -0.0806624f, -0.0864126f, +0.0804222f, +0.3098279f, +0.4305393f, +0.2880780f, +0.3022669f,
  +0.0047550f, +0.1105027f, +0.2100888f, +0.1813127f, -0.2370586f, +0.0863577f, -0.0671651f, -0.0140240f,
  +0.1940306f, -0.1483398f, +0.2095620f, -0.0454102f, -0.0772899f, -0.5334386f, +0.0753173f, -0.1983123f,
  -0.0262980f, +0.0365509f, -0.1847908f, -0.1132427f, +0.0606613f, -0.1695767f, +0.2033342f, -0.0338682f,
  -0.1336660f, +0.0920650f, +0.1486887f, +0.0166294f, +0.1676134f, -0.0121970f, +0.1058817f, +0.1255029f,
  +0.1601787f, +0.0691637f, +0.0924090f, +0.1131596f, +0.0284843f, -0.2216746f, -0.3118456f, -0.1511154f,
  +0.1551975f, +0.1021839f, -0.0496989f, -0.0646591f, -0.0652123f, -0.2096647f, +0.0821193f, -0.0298257f,
  +0.1063370f, +0.0570408f, -0.3499919f, +0.0150250f, +0.1951979f, -0.1680729f, +0.0150929f, +0.0884441f,
  -0.4014020f, -0.0841525f, -0.1457347f, -0.0956646f, -0.3074416f, +0.1946459f, -0.0730415f, +0.1461370f,
  +0.2270730f, +0.1514650f, +0.1111717f, -0.0185272f, -0.0607480f, +0.1767444f, -0.3442962f, -0.1052249f,
  +0.0972709f, +0.0631896f, -0.0991838f, -0.1472252f, +0.0505125f, -0.0782397f, +0.2144029f, +0.0181434f,
  +0.0977981f, +0.0792542f, -0.1037346f, +0.0364523f, +0.0791083f, +0.0757922f, -0.1061817f, +0.1700957f,
  +0.0045029f, +0.0418131f, +0.0614296f, -0.2488301f, -0.0126675f, +0.0606036f, +0.1427929f, -0.1006542f,
  -0.2531898f, -0.1488156f, -0.2238507f, -0.2599126f, +0.0940142f, +0.1253728f, -0.2396904f, -0.0083862f,
  -0.4930107f, -0.1116193f, -0.2737621f, -0.0492077f, +0.3525012f, +0.4026906f, +0.0598117f, +0.2131620f,
  +0.0648649f, +0.1548411f, -0.1272648f, -0.1503332f, -0.0251123f, -0.0622141f, -0.1167829f, -0.0008691f,
  +0.0185467f, -0.3684105f, +0.2346879f, +0.0095781f, +0.3602045f, -0.0843171f, +0.1027557f, +0.1487991f,
  +0.3580690f, -0.1263408f, -0.1289979f, -0.1199083f, +0.4267276f, -0.7368877f, -0.1147255f, +0.6769761f,
  +0.1502670f, -0.0236289f, +0.0464146f, +0.0334267f, +0.3623969f, +0.0616517f, -0.1457445f, -0.3363657f,
  -0.0300534f, -0.2200925f, -0.0036180f, -0.1607545f, +0.3063861f, +0.0199732f, -0.2157434f, -0.1093644f,
  -0.1019935f, -0.2279890f, -0.3503393f, +0.2231284f, +0.3392294f, +0.5549203f, -0.2206092f, +0.2721467f,
  -0.0118665f, -0.0441466f, +0.0409467f, +0.2360992f, +0.0905484f, +0.1816620f, +0.1605034f, +0.0780927f,
  +0.1702334f, +0.0700113f, +0.0084771f, -0.0529329f, -0.0037033f, +0.0294640f, +0.1655102f, -0.1113687f,
  -0.2708609f, -0.2908881f, -0.0519691f, -0.2707823f, +0.0569993f, +0.2250943f, +0.2525535f, +0.0401821f,
  +0.0342217f, +0.2939228f, -0.0589701f, -0.2910109f, +0.1392856f, +0.1557518f, +0.0987234f, -0.0055557f,
  +0.0076662f, +0.0671653f, +0.3085133f, -0.0865224f, -0.8655649f, +0.1881170f, +0.0758339f, -0.0408779f,
  +0.0887827f, -0.2213960f, +0.4902517f, +0.1933909f, +0.3579495f, -0.0300339f, +0.0734555f, -0.4512834f,
  +0.1692137f, +0.7386371f, -0.0396785f, +0.0657217f, +0.2976035f, +0.0393710f, -0.2793968f, -0.2243324f,
  +0.2231951f, +0.2769645f, -0.3129750f, -0.2201564f, -0.1703471f, +0.1058866f, +0.0599971f, +0.2442636f,
  +0.3064006f, +0.0415326f, +0.1255807f, -0.1049088f, -0.3568430f, -0.2391647f, +0.5611938f, +0.0240939f,
  +0.1413603f, +0.2493793f, -0.0752588f, -0.1796694f, -0.1289619f, -0.0266204f, +0.3349121f, -0.2700656f
);

const float biases[4] = float[4](
  +0.0047576f, +0.0628205f, -0.1483263f, -0.2490440f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer41 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0238204f, -0.0230500f, +0.0835408f, +0.0399554f, +0.2379936f, -0.0010813f, -0.0116771f, +0.0963592f,
  +0.1296673f, +0.1901212f, +0.2387537f, +0.2863648f, -0.0110365f, -0.2620402f, +0.1908979f, -0.5303581f,
  +0.1332575f, +0.1859634f, +0.0498306f, -0.0240125f, +0.2477861f, -0.0046374f, +0.2823876f, -0.2409266f,
  +0.0157875f, -0.1636696f, +0.2452091f, -0.1564152f, +0.1022676f, +0.0408991f, -0.2261785f, -0.0027188f,
  +0.4157131f, +0.0152725f, +0.3540685f, +0.3168997f, -0.5187294f, -0.1261548f, -0.1562722f, +0.4865150f,
  +0.0961633f, -0.5164294f, -0.0766839f, -0.7766789f, -0.0731525f, -0.1185672f, -0.1996030f, +0.2422143f,
  -0.1413321f, -0.0521904f, +0.1339625f, +0.0096862f, +0.2272308f, -0.0986844f, +0.0715632f, +0.0870553f,
  +0.0377900f, +0.0012551f, +0.4192393f, +0.0532618f, -0.2451182f, -0.2169819f, +0.0536031f, +0.0354537f,
  -0.0292377f, -0.1804978f, +0.1406748f, -0.0924846f, -0.0118043f, +0.0583447f, +0.1776061f, -0.1153649f,
  -0.0914554f, +0.6068711f, -0.0664273f, +0.0615963f, -0.0504475f, +0.2013471f, +0.2436107f, +0.0612387f,
  -0.1907308f, +0.5467916f, +0.4975116f, -0.1467925f, -0.3483177f, +0.1367099f, -0.0951138f, -0.1992821f,
  +0.2201032f, -0.0413780f, -0.0927325f, -0.0975486f, +0.1725644f, -0.2250769f, +0.0091398f, +0.0294085f,
  -0.2085333f, +0.1219735f, +0.5417228f, -0.0297735f, -0.2747786f, +0.0958205f, +0.0823256f, +0.0671243f,
  +0.0207786f, -0.0474255f, +0.7054622f, -0.3581721f, -0.2602842f, +0.0161113f, +0.1412338f, -0.0257362f,
  +0.0251788f, -0.4286152f, +0.1754539f, +0.0984926f, +0.2937019f, -0.0574486f, -0.1978915f, -0.1052565f,
  -0.2263332f, +0.0812235f, -0.0528643f, +0.3253509f, +0.1273758f, -0.0811884f, -0.0574128f, +0.2704504f,
  -0.0287382f, +0.0110269f, +0.2506746f, +0.0692095f, +0.1881519f, -0.0054639f, +0.0577400f, -0.1722564f,
  -0.0026384f, -0.2152467f, +0.1969814f, -0.1976922f, -0.0894404f, +0.0999940f, -0.0303166f, -0.1531144f,
  -0.0711359f, -0.0847334f, +0.0455030f, +0.0055425f, +0.0185111f, +0.0010197f, -0.0310916f, +0.0108661f,
  +0.1269931f, +0.2087423f, -0.0117521f, -0.0277471f, -0.0331370f, +0.0620285f, +0.1289762f, -0.0861875f,
  +0.1772697f, -0.1805589f, -0.4456827f, +0.1063938f, -0.1455092f, +0.1933646f, +0.4500146f, +0.1162688f,
  +0.0003262f, +0.0012319f, +0.0800280f, +0.0556543f, +0.0604523f, -0.0671056f, -0.0014988f, +0.0302392f,
  -0.0998119f, +0.0847444f, +0.1279742f, +0.1075802f, +0.1702525f, +0.1246055f, +0.0903501f, +0.1334760f,
  -0.2332256f, -0.1493094f, +0.0663441f, -0.1832268f, +0.3974920f, +0.4060729f, +0.1094097f, -0.3810050f,
  +0.0258284f, +0.0071846f, -0.0335661f, +0.0249144f, +0.1086071f, -0.0352496f, +0.0981722f, +0.0469030f,
  +0.0292804f, +0.0804292f, +0.0459487f, +0.0322838f, -0.0295706f, -0.0476453f, +0.0264966f, -0.0019429f,
  -0.0154868f, -0.0076492f, -0.0503987f, -0.0080092f, -0.0561715f, +0.2137969f, -0.1218016f, +0.0753944f,
  +0.1019587f, -0.1354608f, -0.5514991f, +0.3771976f, -0.5081337f, +0.1168814f, +0.0232219f, -0.2653893f,
  +0.0189705f, -0.3377206f, -0.1023154f, +0.0954308f, +0.1359366f, -0.0684346f, +0.0814046f, -0.2900982f,
  -0.0006584f, -0.0621705f, -0.1218670f, +0.0895578f, +0.1119960f, -0.0494210f, -0.1721911f, +0.0009131f,
  -0.0077908f, +0.3759654f, -0.0458106f, +0.1433500f, -0.2081432f, +0.0224678f, +0.3208604f, +0.1164853f,
  -0.1271276f, +0.2439250f, -0.2686279f, +0.3683700f, +0.4643288f, -0.2577831f, +0.3165250f, +0.0854750f,
  +0.1714251f, -0.2430821f, -0.0118660f, +0.3162968f, -0.2162365f, +0.2490309f, -0.2029844f, -0.2222490f,
  +0.1227528f, -0.1225977f, +0.1189452f, -0.0839490f, -0.3788506f, -0.0028652f, +0.0931304f, +0.0142836f,
  +0.0676193f, +0.0071658f, -0.0167763f, -0.2772184f, +0.0008692f, +0.1177534f, +0.1789596f, +0.2146510f,
  -0.0165890f, +0.0469903f, -0.1186132f, -0.0414325f, +0.0009942f, -0.1163664f, -0.0305712f, +0.0062834f
);

const float biases[4] = float[4](
  -0.3474544f, -0.2203797f, -0.5711745f, -0.0093688f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer41 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0034225f, +0.0214221f, -0.2465453f, -0.0284815f, -0.1698974f, +0.2104585f, -0.3665276f, +0.2221057f,
  -0.0694998f, -0.8130285f, -0.6658973f, +0.3008802f, +0.0889376f, -0.0434211f, +0.1354152f, -0.0998691f,
  +0.2591080f, -0.0075699f, -0.2893964f, +0.1709840f, +0.2141498f, -0.2080374f, +0.1476146f, +0.0701613f,
  -0.1413831f, -0.2780012f, -0.1420333f, -0.1876613f, -0.1088682f, +0.0359412f, -0.1729007f, -0.1516943f,
  -0.1899216f, -0.0519777f, -0.5123952f, +0.1640366f, +0.3970848f, +0.0102407f, -0.1249011f, -0.2525447f,
  +0.0587735f, +0.0304195f, +0.0170859f, +0.2356976f, +0.0689434f, -0.1683628f, -0.0233172f, -0.2901507f,
  -0.0873388f, -0.0110701f, -0.2667775f, -0.0951800f, -0.0139028f, +0.0336700f, -0.0099556f, -0.0099188f,
  +0.0223493f, +0.0021951f, -0.2730820f, +0.0197140f, +0.0716354f, -0.0213859f, -0.0202626f, +0.0737649f,
  -0.0111971f, -0.1029397f, +0.0309559f, +0.0413797f, +0.0467659f, -0.0618092f, +0.0330737f, -0.0026798f,
  +0.0079643f, -0.0271542f, +0.0984857f, +0.0298731f, +0.0446072f, +0.0173079f, -0.2139743f, +0.1235921f,
  +0.0213074f, -0.1482104f, +0.0906034f, +0.3857282f, -0.0073115f, +0.0705966f, -0.3525489f, +0.2947780f,
  +0.3562310f, +0.4388596f, -0.0104347f, +0.0373030f, +0.0148849f, +0.0970030f, +0.2934910f, -0.3307005f,
  -0.1378354f, -0.1346183f, -0.1875450f, -0.0071170f, +0.1708472f, -0.1337473f, -0.0082652f, -0.0082662f,
  +0.1367387f, -0.4223609f, +0.1594409f, -0.2060943f, +0.4614863f, +0.2732562f, -0.2991216f, +0.2297842f,
  -0.1984735f, -0.0363511f, -0.1658218f, +0.1731456f, +0.1235904f, +0.1605487f, -0.0772034f, -0.2979343f,
  -0.0242561f, +0.0877798f, +0.2103153f, -0.1227709f, -0.1161273f, +0.2459922f, -0.0868945f, -0.0499879f,
  -0.0273068f, -0.0035063f, +0.0879989f, -0.2291907f, -0.1647533f, +0.0124362f, -0.1774762f, -0.0898108f,
  -0.1050151f, -0.1819258f, +0.0527259f, -0.2760375f, -0.0349430f, -0.1664130f, +0.2046360f, -0.1996112f,
  +0.1122368f, +0.0509193f, +0.0987714f, +0.2931435f, -0.0843893f, -0.2157176f, -0.0476394f, +0.0523443f,
  +0.0442850f, +0.1938062f, -0.1316751f, -0.3746617f, +0.2006597f, -0.1277699f, -0.2979453f, +0.0432607f,
  -0.1420315f, -0.2337045f, +0.1106234f, -0.3958967f, -0.0898539f, -0.0196675f, -0.0494198f, +0.3384318f,
  +0.3394281f, -0.1641456f, -0.2794265f, -0.0350656f, -0.5438079f, -0.0157287f, -0.6482838f, -0.0704774f,
  +0.2015262f, +0.2604997f, -0.2058621f, -0.1111483f, +0.2064419f, -0.1770813f, -0.0855524f, -0.3016278f,
  +0.0589083f, +0.1103102f, -0.0143002f, +0.2878199f, +0.1052017f, +0.2841326f, -0.0304556f, +0.0670943f,
  -0.0434042f, -0.0784666f, -0.3391685f, -0.0836402f, +0.0614028f, +0.0832845f, -0.2255328f, -0.0416657f,
  +0.4490298f, -0.0182122f, -0.2172661f, -0.4721630f, -0.1455849f, +0.0334362f, -0.1845140f, -0.2333620f,
  +0.4269533f, -0.0426363f, +0.2267843f, -0.1866887f, +0.2095557f, +0.1146831f, +0.2521752f, +0.1304044f,
  +0.2242274f, +0.1639555f, +0.0340464f, -0.0824250f, -0.1464618f, -0.1417808f, -0.3150532f, +0.2102284f,
  -0.1350269f, +0.1901335f, +0.1376325f, -0.2387913f, +0.1516729f, +0.1610545f, +0.1041292f, +0.1931583f,
  -0.3455538f, -0.1413189f, +0.2267930f, -0.1028193f, -0.1137131f, -0.0114096f, -0.1370737f, +0.1497999f,
  +0.0192987f, +0.1937824f, -0.4329477f, -0.4656355f, +0.1282872f, +0.2085704f, -0.1259497f, -0.2743382f,
  +0.2462393f, -0.0386879f, +0.6457669f, +0.2985626f, +0.1599385f, +0.1813365f, -0.4652671f, -0.1770397f,
  -0.3980877f, -0.0778184f, -0.0410273f, -0.0352820f, -0.0330601f, -0.3470920f, -0.0823208f, -0.0636220f,
  -0.0624337f, +0.1232828f, -0.2759103f, -0.1145651f, +0.2620074f, +0.3778203f, -0.0651040f, -0.1958196f,
  -0.0331137f, +0.0902198f, -0.0485334f, +0.1480574f, +0.5701548f, -0.2812531f, +0.0900194f, +0.2217005f,
  -0.2712477f, -0.0047130f, +0.1624042f, -0.1455958f, -0.1136514f, -0.1981040f, +0.1276978f, +0.1556789f
);

const float biases[4] = float[4](
  -0.0438704f, +0.1818250f, -0.0588240f, +0.0678531f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer42 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2714561f, +0.1226732f, -0.2605754f, -0.0198880f, +0.0273387f, +0.1324933f, -0.2141287f, +0.1844554f,
  +0.0458571f, -0.1278509f, -0.2504020f, -0.3321024f, +0.1104652f, +0.0466706f, -0.4114607f, +0.3628102f,
  -0.2340794f, +0.0576277f, -0.0753776f, -0.0563633f, +0.1119589f, -0.1570466f, +0.1502899f, +0.2197916f,
  -0.1948175f, -0.0483896f, -0.2964404f, +0.1126574f, +0.4121778f, +0.1391609f, -0.2786368f, +0.2507002f,
  -0.1933697f, -0.0030466f, -0.1311105f, -0.2905500f, -0.0111807f, -0.0627107f, -0.2910420f, +0.1276509f,
  +0.1117674f, +0.0613616f, -0.1902235f, +0.1625541f, +0.1189606f, -0.5516621f, +0.2000325f, +0.0331095f,
  -0.0846282f, +0.0884879f, +0.2002331f, +0.0591897f, +0.2530987f, -0.2654362f, +0.0323747f, +0.1668673f,
  +0.1279159f, +0.1371008f, +0.1159626f, -0.2776109f, +0.1898050f, -0.0868370f, -0.2532571f, -0.0249672f,
  -0.0395320f, -0.2026812f, -0.0366105f, +0.0624465f, -0.2881549f, -0.4052221f, +0.1128782f, -0.3041612f,
  -0.2348959f, -0.0226187f, -0.0847673f, -0.0424859f, -0.2546088f, -0.0040992f, +0.1805179f, +0.1684439f,
  -0.0806520f, +0.1873770f, +0.0843622f, +0.2038900f, -0.1625796f, +0.1277776f, +0.2807222f, +0.1213039f,
  -0.1299871f, -0.0312523f, +0.0613606f, +0.1294566f, -0.0768810f, +0.0349654f, -0.0244923f, -0.1365099f,
  +0.5890823f, +0.1940976f, +0.7265256f, +0.3368466f, -0.2639996f, +0.2411522f, +0.1498951f, -0.0423186f,
  -0.0427220f, -0.1521214f, -0.0403637f, -0.6917151f, -0.1506874f, +0.3296152f, +0.0471770f, -0.3372189f,
  -0.0550534f, -0.2822814f, -0.0659177f, -0.1767049f, -0.0116803f, +0.2240146f, +0.1152036f, -0.4166576f,
  +0.0284169f, -0.0557892f, -0.1834096f, -0.0778572f, -0.1630740f, -0.5917561f, -0.0925951f, +0.0500876f,
  -0.1506819f, -0.0669404f, -0.0843208f, +0.0910589f, +0.7159784f, -0.2646972f, -0.2568043f, -0.2799006f,
  +0.0025277f, -0.2753710f, -0.0091904f, +0.1071547f, -0.1506247f, +0.3520195f, -0.2525544f, -0.1888745f,
  -0.1015890f, -0.1700343f, +0.0504667f, -0.0183241f, +0.0155381f, +0.0929359f, -0.3740054f, -0.0156866f,
  -0.3219834f, -0.2777987f, +0.1139844f, -0.0448734f, +0.0754565f, +0.0102669f, -0.0711885f, +0.2485845f,
  -0.2416106f, -0.0698781f, +0.1169090f, -0.3849889f, +0.0560021f, -0.2418511f, +0.2551554f, +0.0787727f,
  -0.2815704f, +0.0896059f, -0.1246122f, +0.0467326f, -0.0558852f, -0.0413163f, -0.3110423f, +0.2200927f,
  -0.3619539f, -0.5196960f, +0.4023107f, +0.3471804f, +0.1525314f, -0.0437264f, +0.1059178f, -0.2346018f,
  -0.4015109f, -0.5972807f, -0.0607216f, +0.2129676f, -0.2880106f, +0.2320066f, +0.2852278f, +0.0225259f,
  +0.0724383f, -0.3314820f, +0.4109885f, -0.1341933f, +0.0834713f, +0.1132539f, -0.1611549f, -0.0954506f,
  -0.2221737f, -0.2855892f, +0.2932864f, +0.2117372f, +0.2112889f, +0.0737746f, +0.4325664f, -0.0773796f,
  -0.0381120f, -0.0857070f, -0.0319587f, +0.1128529f, -0.1412480f, -0.0055598f, +0.2793360f, -0.0001256f,
  -0.1565716f, -0.1838768f, -0.0861522f, +0.1342028f, -0.2049872f, +0.2031607f, +0.2666951f, +0.2570207f,
  +0.1311466f, -0.0216233f, +0.1120502f, +0.2513507f, -0.1604917f, +0.1358904f, +0.2025500f, -0.2257514f,
  +0.0494824f, -0.1874234f, +0.0064831f, +0.1957723f, +0.0159993f, +0.0365159f, -0.0736905f, -0.1568658f,
  +0.7745956f, -0.1276858f, +0.8543350f, -0.3064811f, -0.2102265f, +0.1860580f, -0.1705216f, +0.1769567f,
  -0.4727263f, -0.0440960f, -0.1325299f, +0.1692818f, -0.2163911f, +0.3479404f, +0.0305918f, -0.0585377f,
  +0.2427238f, +0.0875475f, -0.0765538f, +0.0089373f, +0.1183726f, -0.1207324f, -0.2263840f, +0.2138628f,
  -0.6915449f, +0.0481210f, -0.3618631f, +0.0495011f, -0.0286446f, -0.1815896f, +0.3564490f, +0.0445173f,
  -0.2192345f, +0.0223376f, -0.0632905f, +0.0511953f, -0.3150712f, -0.1256795f, +0.1248138f, +0.0677077f,
  +0.0027188f, +0.0639148f, -0.0095240f, -0.1271922f, +0.1163753f, -0.1427260f, -0.0781918f, -0.0738829f
);

const float biases[4] = float[4](
  -0.0896868f, +0.0158351f, -0.0658665f, -0.0259463f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer42 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1422445f, +0.0173545f, +0.1393094f, -0.1041458f, -0.0535267f, +0.0380299f, +0.1933726f, +0.0884147f,
  +0.0121690f, -0.0936102f, +0.0672757f, +0.2364799f, -0.0760660f, +0.2458366f, +0.1553448f, -0.5357191f,
  -0.2021014f, -0.1592049f, -0.0465011f, +0.2997283f, -0.0778476f, +0.1908316f, +0.1941658f, -0.0882285f,
  +0.1261771f, -0.2072337f, -0.2676721f, +0.0440219f, +0.1129658f, +0.0434602f, +0.1945321f, -0.3010609f,
  -0.0669602f, +0.3436638f, +0.3698446f, -0.5258456f, -0.2330171f, -0.0962379f, -0.2318239f, +0.2503240f,
  -0.0796119f, +0.1745930f, +0.0045991f, +0.4379211f, -0.0194914f, -0.1764979f, +0.3812511f, +0.3040695f,
  +0.1130612f, -0.0486191f, +0.6108684f, +0.0237750f, -0.1484231f, +0.0418990f, -0.0217978f, +0.1548184f,
  -0.0989780f, +0.2679568f, +0.3763910f, -0.2331956f, +0.2513552f, +0.2601375f, -0.3600207f, +0.0992597f,
  -0.0745796f, -0.0935365f, -0.0521156f, +0.5299222f, +0.2603955f, -0.1721222f, -0.0964752f, +0.1769075f,
  -0.0656386f, +0.0183783f, +0.1892040f, +0.0374356f, +0.0587892f, -0.0416827f, -0.1816060f, +0.0803993f,
  +0.0531791f, +0.0790946f, +0.0314221f, -0.1056317f, +0.1377804f, -0.1497137f, -0.0784905f, +0.2458058f,
  -0.0043987f, +0.1317033f, +0.1305547f, -0.1731913f, -0.0563433f, -0.1913321f, -0.1029307f, -0.0123371f,
  +0.0080819f, +0.0566940f, -0.4687786f, -0.0647902f, -0.0242169f, -0.1916680f, -0.2126504f, +0.2245201f,
  -0.2474968f, -0.1675109f, -0.0972764f, +0.5528920f, -0.0819918f, -0.2650759f, +0.2787175f, -0.3998376f,
  -0.0957084f, +0.0712870f, +0.0513533f, -0.2708792f, +0.1296332f, +0.0054682f, -0.0612817f, -0.0651071f,
  -0.2603749f, -0.0974623f, -0.1531685f, -0.0867348f, +0.1850693f, +0.0470167f, +0.0778086f, -0.0490595f,
  +0.3550232f, -0.0503829f, -0.0915693f, -0.0497302f, -0.0944708f, -0.1989009f, -0.0276761f, -0.2028326f,
  -0.0568261f, -0.1166141f, +0.0107152f, -0.1140970f, -0.0627749f, +0.0669884f, +0.0648412f, +0.1017535f,
  -0.0789039f, +0.0736737f, +0.1975608f, -0.0515616f, -0.0786228f, +0.0562438f, -0.1525573f, -0.0837353f,
  +0.0947399f, -0.1597248f, +0.0673529f, -0.1774457f, +0.0028376f, +0.1932513f, +0.0901254f, -0.0196250f,
  -0.1936947f, -0.1712801f, -0.0331881f, -0.2310134f, +0.0129056f, +0.1375356f, +0.0317312f, -0.0879255f,
  -0.2227434f, -0.0235884f, -0.0664916f, +0.1607921f, +0.1914615f, +0.2022993f, -0.0762419f, -0.0008657f,
  +0.0643066f, -0.3251225f, -0.4373486f, -0.1505567f, +0.0309464f, +0.0808198f, -0.0319187f, +0.0888210f,
  +0.1855085f, -0.2405600f, +0.0924534f, +0.0671901f, +0.0685466f, +0.0816561f, +0.3812327f, -0.2151901f,
  -0.1699772f, +0.0023286f, -0.5460013f, +0.1569433f, +0.0551157f, -0.0462262f, -0.2724321f, -0.0075205f,
  +0.0947474f, -0.1693597f, -0.5497075f, -0.0369286f, -0.0131989f, -0.0148913f, +0.1213970f, +0.0435310f,
  -0.0209998f, -0.0246105f, +0.1336598f, -0.0727602f, +0.3224737f, +0.0189983f, -0.0661336f, +0.1835985f,
  -0.0704953f, -0.1283729f, -0.4102507f, +0.1305874f, -0.0481301f, -0.0160448f, +0.1919791f, -0.2226887f,
  -0.0684959f, +0.0588914f, +0.1604088f, +0.0820544f, +0.0295871f, -0.0246356f, -0.0160885f, -0.1770078f,
  +0.0694118f, -0.0091012f, +0.0796585f, +0.1549556f, +0.0012218f, -0.2838971f, +0.1106552f, +0.0695650f,
  +0.1749535f, +0.0926162f, -0.0577254f, +0.2469611f, -0.3634529f, +0.6017272f, +0.4584509f, -0.0730340f,
  -0.5675805f, +0.0961860f, +0.2649038f, -0.2086770f, +0.6867025f, -0.2813398f, +0.0063688f, -0.1739718f,
  -0.0428178f, +0.1596686f, -0.0325374f, +0.0527341f, -0.0487890f, -0.2262821f, +0.1987815f, +0.3050562f,
  +0.2668153f, -0.0804961f, -0.2905263f, -0.0858699f, -0.2437482f, +0.4931891f, +0.2489513f, -0.0105363f,
  +0.1654751f, +0.0188845f, +0.2245336f, -0.2799047f, -0.0187087f, -0.3676791f, +0.0344380f, -0.0153180f,
  -0.3122355f, +0.0625610f, -0.1766013f, +0.4026852f, +0.0204121f, -0.3503685f, +0.1425188f, +0.2854531f
);

const float biases[4] = float[4](
  +0.0088752f, -0.0445057f, -0.0321841f, -0.0924215f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer43 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0228329f, +0.0716887f, +0.0792579f, +0.0660776f, -0.3170578f, -0.1315700f, -0.0885189f, -0.0095075f,
  +0.0204102f, +0.0878354f, +0.3795953f, +0.1782898f, +0.0130451f, -0.0838954f, -0.4238188f, +0.0970460f,
  -0.1825293f, -0.1618946f, -0.0060617f, +0.0465372f, -0.1155640f, -0.2431131f, -0.6758508f, -0.4671916f,
  +0.1768530f, +0.2832133f, -0.1649684f, -0.2780603f, +0.1543973f, +0.2096418f, +0.2522052f, -0.1109151f,
  +0.0026707f, -0.1444611f, -0.0859135f, +0.3174862f, -0.0494012f, +0.2319262f, +0.5664344f, -0.1900256f,
  +0.2141079f, -0.3501079f, -0.3268007f, +0.0971643f, -0.1942926f, -0.5041904f, -0.4564977f, -0.4629202f,
  +0.1758074f, +0.0376595f, -0.0102499f, +0.0537067f, -0.2604918f, +0.2132691f, -0.1530721f, +0.3239467f,
  +0.0958584f, +0.0902347f, -0.2877281f, -0.4343175f, +0.2734033f, +0.4467376f, +0.3276466f, +0.1669198f,
  -0.1242041f, -0.0541079f, -0.1944417f, -0.1187612f, -0.0128107f, +0.0824722f, -0.1309751f, -0.0274780f,
  +0.0505408f, +0.3061705f, +0.0450213f, +0.0343818f, +0.0713642f, -0.1439066f, +0.1848812f, -0.0221826f,
  +0.0777191f, +0.5642754f, +0.2678367f, +0.1662771f, +0.1111262f, +0.0552783f, +0.5908107f, -0.1151664f,
  -0.0570582f, +0.2585279f, +0.1774275f, -0.0426557f, +0.0889631f, -0.1551872f, +0.2500635f, -0.2444140f,
  -0.0234745f, +0.3180019f, +0.1508867f, -0.0053395f, -0.2984132f, +0.2329162f, -0.1821060f, -0.0295066f,
  +0.4353195f, +0.4462038f, +1.0936832f, -0.0408745f, -0.6096534f, +0.3252304f, -0.2632906f, +0.3401137f,
  +0.0801082f, +0.0281423f, +0.1302362f, -0.6994074f, -0.2322888f, +0.0909585f, -0.4450884f, +0.1566929f,
  -0.0828371f, -0.0143355f, +0.2934551f, +0.0312062f, +0.1773447f, +0.0276253f, -0.0826686f, +0.0934575f,
  -0.0492635f, +0.0841632f, +0.6081198f, +0.2201890f, -0.2074168f, -0.2435597f, +0.1573618f, +0.0929870f,
  +0.1228598f, -0.5376183f, +0.7405536f, -0.5830085f, -0.1682522f, -0.0773932f, +0.2852972f, -0.2004169f,
  -0.0366283f, -0.1785686f, +0.1260183f, +0.0121308f, +0.0068854f, -0.1119797f, +0.0603800f, -0.0527707f,
  -0.0158038f, +0.0937779f, +0.1478959f, +0.0280748f, -0.1797721f, -0.1410211f, -0.1090825f, -0.3836384f,
  +0.1156238f, +0.0404147f, +0.2634346f, -0.0569459f, -0.0003044f, +0.2723164f, +0.1008967f, -0.1337138f,
  +0.0870417f, -0.0385148f, +0.1891402f, +0.2257065f, -0.1404841f, -0.1748519f, +0.0175330f, -0.4466949f,
  -0.0360256f, +0.5255663f, +0.2311842f, -0.2289306f, -0.5403882f, -0.0870848f, -0.3450677f, +0.0772385f,
  -0.4768122f, -0.4943838f, -0.2123435f, -0.2367835f, -0.0879124f, +0.3975895f, +0.2458291f, +0.3762076f,
  -0.0583815f, +0.0226887f, +0.2400542f, +0.0952077f, +0.1162605f, -0.1441728f, +0.0996637f, -0.0716728f,
  -0.0753078f, +0.0432612f, -0.0625070f, -0.0323410f, -0.2991372f, -0.2949483f, +0.1906476f, +0.0849809f,
  -0.2228895f, -0.2796831f, -0.3641471f, -0.1862963f, +0.3856024f, +0.4012845f, +0.0359463f, -0.0139165f,
  +0.1647500f, -0.0299183f, -0.3453677f, -0.1240793f, +0.0462353f, +0.0813431f, -0.1575597f, +0.1092771f,
  +0.2340974f, -0.3713451f, -0.1974166f, +0.4776793f, +0.3093131f, +0.0023061f, +0.3248396f, -0.1756776f,
  +0.6036794f, +0.2811455f, +0.2996897f, +0.1034086f, +0.0982595f, -0.1207902f, +0.1576915f, -0.3118570f,
  +0.0789778f, -0.1113219f, -0.2413476f, +0.0092161f, +0.1391444f, +0.2197641f, -0.0937470f, +0.1710589f,
  +0.7572666f, -0.3684117f, +0.4704802f, +0.1595330f, +0.0144721f, +0.2918262f, -0.2647893f, -0.2068007f,
  +0.3794968f, +0.0471939f, +0.6419089f, -0.1504371f, -0.3181082f, -0.3830405f, +0.2410678f, -0.0085785f,
  +0.1508683f, +0.0267107f, +0.0977747f, -0.0719509f, -0.1017772f, +0.0769318f, -0.1227548f, +0.0883962f,
  +0.1565965f, -0.0343763f, +0.0313227f, -0.1150954f, -0.2548646f, +0.1471125f, -0.1140934f, +0.1284683f,
  +0.1557626f, -0.2108035f, +0.0683336f, -0.2756093f, +0.0706673f, -0.1087789f, +0.1485070f, -0.1613409f
);

const float biases[4] = float[4](
  -0.0831988f, -0.0460332f, -0.0639675f, -0.0952830f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer43 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.3133065f, +0.0138474f, -0.1332480f, +0.4340296f, -0.2519341f, -0.0034288f, -0.0496720f, -0.3963483f,
  +0.0005409f, +0.2915959f, +0.1124369f, -0.0156033f, -0.2168108f, +0.1735242f, -0.0532515f, +0.0063310f,
  +0.3829345f, +0.0273654f, -0.1411025f, -0.2772729f, +0.1607635f, -0.2187100f, -0.0513128f, +0.0518218f,
  +0.2967116f, +0.4865203f, +0.2825458f, +0.3728934f, -0.9514536f, -0.0086585f, -0.2099944f, +0.0474832f,
  -0.4420284f, -0.7378652f, -0.6030506f, -1.0673462f, +0.3053959f, +0.4020051f, +0.1752288f, +0.0539627f,
  +0.6585432f, +0.0464884f, -0.0542212f, +0.0149964f, +0.3254018f, +0.0597099f, -0.4641949f, -0.3359244f,
  +0.0672412f, +0.1675088f, +0.0823970f, +0.1285111f, -0.3600959f, +0.0770647f, -0.0166753f, -0.0052090f,
  +0.1109219f, -0.1286122f, -0.0878651f, -0.3499495f, -0.0885650f, +0.1843679f, -0.1083880f, -0.2530498f,
  +0.1252037f, +0.0190562f, -0.1096058f, -0.0307547f, +0.1550244f, +0.0495012f, -0.0848036f, -0.0213408f,
  +0.0556978f, +0.0620038f, -0.1644244f, -0.0007046f, +0.1164403f, +0.1026006f, +0.2307927f, +0.1528851f,
  +0.0815260f, -0.0546125f, -0.1882528f, +0.2078072f, +0.1855341f, -0.0097921f, +0.1793699f, +0.0806726f,
  +0.0846492f, +0.0477523f, -0.0632434f, +0.1594535f, +0.0352710f, +0.0548123f, +0.0170545f, +0.0730812f,
  -0.0126357f, -0.1512172f, -0.2395854f, +0.2005259f, -0.3189292f, -0.0385248f, +0.2370060f, +0.0812210f,
  -0.6068781f, -0.0049672f, +0.1730474f, +0.1376092f, -0.2490078f, -0.5171292f, +0.0101132f, -0.7469581f,
  +0.2884257f, -0.0590047f, -0.2256332f, -0.2970442f, +0.0990067f, -0.0994883f, +0.1333890f, +0.0793501f,
  +0.2225120f, -0.1236713f, -0.1529901f, -0.1993117f, -0.0011713f, +0.0596819f, +0.0258265f, +0.1389105f,
  -0.0215280f, -0.0055288f, +0.1882450f, +0.3050984f, +0.2251818f, +0.1449742f, -0.1910565f, -0.0383137f,
  +0.2023784f, +0.2365368f, -0.2897861f, +0.1312040f, +0.2530433f, +0.2571633f, -0.0343630f, +0.2096290f,
  +0.0413545f, -0.0913384f, -0.1050138f, -0.2401299f, -0.0381896f, +0.1498219f, -0.2661825f, +0.2323159f,
  -0.0414739f, +0.1739062f, +0.3056838f, -0.0766886f, -0.1409439f, -0.0005434f, -0.1247500f, +0.0207703f,
  +0.1347166f, -0.1824619f, +0.2217368f, -0.1786555f, -0.1173320f, +0.0335283f, -0.0734327f, -0.0559849f,
  -0.2938184f, -0.0702973f, -0.1530605f, +0.0515152f, +0.2876159f, -0.4523461f, +0.1319134f, -0.3412169f,
  +0.1382434f, -0.1439844f, +0.3479139f, +0.3077289f, +0.1022943f, +0.1238292f, +0.0826813f, -0.4626036f,
  +0.0593684f, -0.0576459f, -0.1657705f, +0.0099085f, +0.0750103f, +0.1347323f, -0.0298897f, -0.2947859f,
  -0.1868394f, -0.1292899f, -0.3829427f, +0.0173400f, +0.0338719f, +0.0710796f, -0.0303880f, +0.2289999f,
  -0.4929373f, -0.2707998f, -0.2316545f, -0.0993362f, +0.0658310f, +0.1741316f, +0.0815657f, +0.3003600f,
  -0.2300639f, -0.0790410f, -0.1456122f, -0.0503830f, -0.2272751f, -0.0432813f, +0.0164738f, +0.1472562f,
  +0.1762252f, +0.0549512f, +0.0674510f, -0.2284147f, -0.3722584f, +0.2886701f, +0.0430425f, -0.0849055f,
  -0.2975416f, +0.2076750f, +0.3252690f, -0.5309871f, +0.2765512f, -0.2336127f, -0.2693090f, +0.0628491f,
  -0.1787423f, -0.2379705f, +0.1430843f, +0.3579678f, -0.1924222f, -0.0466154f, -0.1131716f, +0.4573894f,
  -0.0132220f, +0.0466065f, -0.3771359f, -0.0811826f, -0.1783509f, +0.1738732f, +0.3239335f, -0.4595423f,
  -0.0345142f, +0.3124185f, -0.0663956f, -0.2329914f, -0.0346818f, +0.1456982f, -0.2871348f, -0.1996564f,
  -0.2556579f, +0.3560814f, -0.0874167f, +0.3745227f, +0.0244076f, -0.4988667f, -0.1104237f, +0.1019897f,
  +0.1993804f, -0.0769758f, -0.1598653f, +0.0252593f, -0.0002910f, +0.1897883f, -0.1190128f, +0.0404715f,
  -0.1761693f, -0.0117567f, -0.1717677f, +0.2350526f, +0.0492309f, -0.0392585f, +0.0818931f, +0.1246179f,
  +0.0839947f, +0.2478944f, -0.5294636f, -0.0577648f, +0.2205731f, +0.1964613f, +0.0077294f, -0.1231582f
);

const float biases[4] = float[4](
  -0.0709642f, +0.0545301f, +0.1610366f, +0.1393755f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer44 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0711583f, -0.0500733f, +0.0513186f, +0.1393721f, -0.1155279f, -0.3743624f, +0.2047106f, -0.1777827f,
  -0.5296090f, -0.5352243f, -0.2761182f, -0.2515999f, -0.0316392f, +0.1014846f, +0.1594127f, +0.1283772f,
  -0.1503231f, +0.0756022f, +0.0311710f, -0.0168251f, -0.3757204f, -0.0128020f, +0.4617873f, -0.0189059f,
  -0.1736915f, -0.3940460f, +0.1625198f, -0.1073937f, +0.0354018f, -0.1683637f, -0.0312614f, +0.2072116f,
  +0.5295549f, +0.2787275f, +0.0630812f, -0.1028891f, -0.0425265f, +0.7005162f, -0.0446476f, +0.2245261f,
  -0.7675350f, -0.5559248f, -0.2102908f, -0.3848451f, +0.2135577f, +0.3490492f, -0.0793670f, -0.1198023f,
  +0.1682459f, -0.0627541f, +0.0227633f, -0.0637729f, -0.1488733f, -0.0746109f, -0.1804916f, +0.2218960f,
  +0.1441512f, -0.2904124f, -0.2314354f, -0.4039091f, -0.0968852f, -0.1258412f, -0.0308984f, +0.3701721f,
  -0.0756426f, -0.0616398f, +0.0110446f, +0.2488089f, +0.1990631f, -0.0051874f, -0.1224490f, +0.1349117f,
  -0.0649603f, -0.2409767f, -0.1613043f, +0.1557844f, +0.1022343f, -0.2226320f, +0.2690162f, -0.1299441f,
  +0.0573707f, -0.1473831f, -0.0452061f, +0.0180408f, +0.2260744f, +0.0183015f, +0.1048919f, -0.2015099f,
  -0.0462968f, +0.1043961f, -0.0698285f, +0.1293924f, +0.2509539f, +0.3594463f, -0.0221994f, +0.0929793f,
  +0.1592983f, -0.2121334f, +0.0491877f, +0.3057064f, +0.0644417f, -0.0892751f, +0.1915974f, -0.2185593f,
  -0.4202723f, +0.4475973f, +0.6963688f, +0.6285861f, -0.2201297f, +0.4350748f, +0.0014885f, -0.4733878f,
  -0.0109702f, -0.0991141f, +0.1852508f, +0.1332654f, +0.3302771f, +0.6360871f, -0.2694200f, -0.0553481f,
  -0.1603228f, -0.2370374f, +0.3008353f, +0.4783864f, +0.1611972f, +0.0667588f, +0.0945034f, +0.1207233f,
  +0.3076922f, +0.1855793f, +0.2325553f, +0.0677852f, -0.3262321f, +0.2246171f, -0.4826529f, -0.6462666f,
  +0.3088141f, +0.1314346f, +0.0086702f, +0.1715917f, +0.2604316f, +0.3109226f, -0.2009522f, +0.0936062f,
  +0.1945238f, +0.1028574f, +0.3984813f, +0.0845745f, +0.0201863f, -0.0755469f, +0.2581447f, +0.3073783f,
  +0.4229184f, +0.3712493f, +0.1981309f, -0.0141078f, +0.2422656f, -0.3255455f, +0.2276510f, +0.0533304f,
  -0.1240901f, +0.1367152f, +0.0409346f, -0.0114042f, +0.5233377f, +0.1166184f, +0.4693208f, -0.1531083f,
  -0.1783487f, -0.1605490f, -0.1381917f, -0.3239179f, -0.0857722f, -0.2381658f, +0.3208011f, +0.1466250f,
  -0.1546712f, +0.1044828f, -0.3768540f, -0.0685077f, +0.8198311f, -0.1689605f, -0.0414163f, +0.0015762f,
  +0.0436139f, +0.0888477f, +0.0827030f, +0.1506659f, +0.0806160f, +0.3909709f, -0.1387734f, +0.0798369f,
  -0.1206454f, +0.2413784f, +0.2503912f, +0.0074203f, +0.0400218f, +0.0791786f, +0.0167795f, +0.0951708f,
  +0.0867392f, -0.0597026f, -0.1525242f, +0.0008659f, -0.1377213f, +0.2456833f, -0.2707938f, -0.3673935f,
  +0.0037917f, +0.1071215f, +0.0518695f, +0.0095896f, +0.3896545f, +0.1377234f, +0.1349125f, -0.2608674f,
  -0.3101446f, -0.0156215f, -0.2559489f, -0.0036203f, +0.2789997f, +0.3740494f, -0.0773599f, -0.0911236f,
  +0.2233860f, +0.2077666f, +0.0642563f, +0.1662949f, +0.1762806f, -0.1311955f, -0.1505652f, -0.0559619f,
  -0.2909392f, +0.0110318f, +0.0224617f, +0.0410851f, +0.2942462f, +0.5496148f, -0.3630783f, +0.0644442f,
  +0.1463470f, -0.6368464f, -0.0106762f, +0.1106653f, +0.0691290f, +0.0710106f, -0.1802491f, -0.3178811f,
  +0.1201844f, +0.1641193f, -0.2322044f, +0.4150188f, +0.5720316f, -0.5249178f, -0.1536105f, -0.1950203f,
  +0.0632727f, +0.0182645f, +0.0110386f, -0.1696668f, +0.3554965f, -0.0571823f, -0.4240579f, +0.2513018f,
  +0.3184323f, +0.2547055f, -0.1512969f, -0.5766445f, +0.1725026f, +0.0356961f, -0.1660041f, -0.3782369f,
  -0.3829264f, +0.3553258f, +0.0364423f, +0.2472592f, +0.4884485f, -0.2467901f, -0.1934381f, +0.2804118f,
  +0.0037445f, -0.0509354f, -0.0930270f, -0.0909739f, +0.0358618f, +0.0294898f, -0.2713142f, -0.0325442f
);

const float biases[4] = float[4](
  +0.0799095f, +0.1686841f, -0.1157170f, +0.1168880f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer44 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1359676f, -0.0625416f, -0.1197230f, +0.0409534f, -0.0089033f, -0.0158339f, -0.1192393f, -0.0497698f,
  +0.5251462f, +0.3223144f, -0.2933733f, -0.0218382f, -0.3512933f, -0.3036955f, -0.1279579f, +0.1757378f,
  -0.0990500f, +0.1733577f, -0.1961007f, +0.0590273f, -0.0077611f, +0.0827775f, -0.0130284f, -0.0442403f,
  +0.3500742f, +0.5243394f, +0.0044664f, -0.1414052f, -0.3260874f, +0.0432837f, -0.1491949f, -0.2420565f,
  -0.4591876f, +0.3732947f, +0.1423499f, +0.2615233f, -0.4072133f, +0.1210110f, +0.0970325f, +0.0135174f,
  -0.2131786f, +0.3236224f, +0.1463325f, +0.1817572f, +0.0481596f, +0.2706014f, +0.0210311f, +0.1092431f,
  -0.0337638f, -0.0786739f, +0.0120985f, -0.1127500f, -0.2005151f, +0.0685753f, -0.1347160f, +0.0755702f,
  -0.0005283f, -0.0761104f, -0.1533728f, -0.2322424f, -0.0147509f, +0.1433435f, +0.0746568f, -0.2793549f,
  -0.1909538f, +0.1090423f, +0.1312669f, -0.1471436f, -0.2515855f, +0.0374265f, -0.2875199f, +0.0399709f,
  -0.2588800f, +0.2133077f, +0.2280411f, +0.1614883f, +0.0374688f, +0.0724111f, -0.0482487f, +0.0190217f,
  -0.0260747f, -0.3132731f, +0.0700008f, -0.0351227f, +0.2203933f, -0.1922309f, -0.2434012f, +0.0336777f,
  -0.0458331f, -0.0713324f, +0.0616377f, -0.0306858f, +0.0074190f, -0.1492995f, +0.1730047f, +0.0408303f,
  +0.1295225f, -0.5745680f, +0.1504713f, -0.1473843f, +0.0182182f, +0.1351481f, -0.1604276f, +0.1838996f,
  +0.3989580f, -0.3615115f, -0.2699823f, +0.1132638f, -0.4006431f, +0.2687152f, +0.0181964f, -0.2220552f,
  +0.1284771f, -0.0624309f, +0.0065009f, -0.0272740f, -0.0870256f, +0.0069016f, +0.4510964f, +0.0997006f,
  +0.0071682f, +0.2071554f, -0.1210473f, +0.0107854f, +0.1324387f, -0.0896011f, +0.0282952f, -0.1222944f,
  -0.0255140f, -0.1832546f, -0.1337468f, +0.1698448f, +0.3107612f, -0.0988602f, +0.1327288f, +0.3188442f,
  +0.0724093f, +0.0255100f, -0.0238934f, -0.1072107f, -0.1730466f, -0.0138432f, +0.1519024f, -0.0308021f,
  +0.5490900f, +0.1714614f, +0.2648915f, -0.0900504f, -0.1472849f, +0.0319397f, +0.0409347f, +0.0612786f,
  +0.0822197f, +0.4498414f, +0.1796605f, -0.0344897f, -0.1929433f, +0.0398286f, -0.1282553f, -0.0056769f,
  +0.1618489f, +0.2819190f, -0.0741788f, +0.0260778f, +0.0737028f, -0.0140390f, +0.2806000f, +0.1351961f,
  +0.0423731f, +0.4295796f, +0.5158763f, -0.4450404f, -0.4263446f, -0.1387144f, +0.0557735f, +0.0682244f,
  -0.4370514f, -0.0559661f, -0.6651704f, -0.1344544f, +0.9130660f, +0.0703495f, +0.1977471f, +0.1375840f,
  +0.2243351f, +0.2105127f, +0.0117063f, +0.0956278f, -0.4819229f, +0.0282270f, +0.0489607f, -0.2249438f,
  +0.0511988f, +0.3664525f, +0.1343475f, -0.4295778f, -0.5689530f, +0.1715463f, -0.0746815f, -0.2804890f,
  -0.6322331f, -0.0805425f, +0.1948010f, +0.4462469f, +0.3018552f, -0.0555912f, +0.1439765f, +0.1112082f,
  -0.0758430f, +0.0011157f, +0.0962076f, -0.0795128f, -0.0424394f, +0.0228956f, -0.0806719f, -0.1555109f,
  +0.0146045f, -0.0534489f, -0.3440134f, -0.1328167f, -0.0490314f, -0.1238694f, +0.2193982f, +0.0155475f,
  +0.1205340f, +0.1569366f, +0.2197822f, +0.2082310f, +0.0892386f, +0.1687297f, -0.0508655f, -0.1388507f,
  -0.1284997f, -0.0035539f, +0.0323482f, +0.0926730f, +0.1643702f, +0.0377450f, -0.1120821f, -0.0049746f,
  +0.1680861f, +0.3064531f, +0.0627220f, +0.7548225f, -0.1941236f, -0.1408588f, +0.2617769f, -0.1985588f,
  +0.5679381f, +0.4929958f, +0.2056083f, +0.0228007f, -0.4186843f, +0.7127335f, +0.2064620f, -0.3498197f,
  +0.2403875f, +0.0243375f, +0.0114399f, -0.1818701f, +0.1265970f, -0.0218500f, +0.1857542f, +0.0454724f,
  +0.1142674f, -0.1453476f, -0.0811412f, +0.0846077f, -0.0839043f, +0.0861990f, +0.3289804f, -0.1473124f,
  -0.0695768f, -0.0893058f, -0.0673047f, +0.0278955f, +0.3148835f, -0.1736979f, +0.1565391f, -0.1907551f,
  +0.0652260f, +0.0408043f, +0.0121571f, +0.0280925f, -0.2030770f, -0.1138579f, -0.0865769f, +0.0674572f
);

const float biases[4] = float[4](
  -0.1021894f, +0.0164141f, +0.1643810f, -0.0238270f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer45 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0588865f, -0.1529509f, -0.1317358f, +0.1719225f, +0.3204620f, +0.0129199f, +0.1895686f, +0.0379131f,
  +0.2014400f, +0.0924722f, +0.1125227f, +0.3680766f, +0.0979768f, -0.1245330f, -0.1783233f, -0.3838728f,
  -0.1840842f, +0.1032072f, -0.1012742f, +0.0904593f, +0.3583567f, -0.0635063f, +0.1129339f, -0.4281977f,
  +0.3740244f, -0.1713930f, +0.4926583f, +0.5877652f, -0.0426586f, -0.0954432f, -0.1356478f, +0.0045366f,
  +0.2654960f, -0.3470240f, -0.4994395f, +0.1738281f, -0.1074282f, +0.0049191f, -0.9827383f, -0.2317404f,
  -0.2985012f, +0.3018400f, -0.1909001f, -0.0165888f, -0.1118201f, +0.1693029f, -0.2537286f, -0.6073086f,
  +0.1215709f, -0.0797179f, +0.2095625f, +0.0112388f, -0.3817791f, +0.0982760f, -0.2313295f, +0.4162670f,
  +0.1583200f, -0.3333423f, +0.1422056f, -0.3161227f, -0.6370578f, +0.0196510f, +0.0168352f, -0.0546971f,
  -0.3808417f, -0.2373777f, +0.4959798f, -0.3227036f, -0.3616623f, +0.0171618f, -0.0032352f, -0.0725678f,
  +0.0714470f, +0.1201356f, -0.1132120f, +0.0024487f, +0.0904584f, +0.2186149f, +0.1426301f, +0.2279496f,
  +0.1730710f, -0.0142966f, +0.1117657f, +0.3104331f, +0.0698725f, -0.0731602f, +0.2181011f, +0.0935182f,
  +0.0398861f, +0.3440312f, -0.1809801f, +0.1045247f, +0.1153512f, +0.1887222f, +0.1119910f, -0.0263988f,
  -0.0543428f, -0.1573929f, +0.1920664f, -0.0895577f, -0.3778183f, -0.1648036f, -0.0775310f, -0.1659002f,
  -0.2129057f, +0.2700600f, +0.1055442f, -0.1659606f, -0.4868598f, -0.0299975f, -0.1334224f, +0.3465865f,
  +0.1099998f, +0.1516423f, -0.0827521f, -0.0075784f, +0.1237797f, +0.4398744f, -0.1863730f, +0.1500310f,
  +0.5721357f, -0.0334836f, -0.3266245f, +0.2523271f, -0.2187472f, -0.1914042f, +0.0773331f, -0.0829079f,
  +0.3224577f, -0.0958329f, +0.0443125f, -0.2513769f, -0.0541434f, +0.0228364f, -0.0886639f, -0.1335024f,
  +0.1714312f, +0.2219842f, -0.0491851f, -0.1237017f, +0.2121661f, -0.0620639f, +0.1456851f, +0.1214273f,
  -0.2278332f, +0.3302815f, -0.0449408f, -0.1083619f, -0.1391741f, +0.0599587f, +0.1578622f, -0.1121173f,
  -0.1929126f, -0.0486611f, -0.3313002f, -0.0147788f, -0.2463586f, -0.1411744f, +0.0347221f, +0.1062802f,
  -0.1989307f, -0.1616483f, +0.0443696f, -0.0794957f, -0.0243933f, +0.0360268f, -0.1813343f, +0.0651129f,
  -0.4277217f, +0.3684078f, -0.2344181f, -0.2238464f, -0.0166366f, -0.0763367f, -0.1530590f, -0.1889723f,
  -0.3663278f, -0.4388403f, +0.3442846f, +0.0907817f, +0.1703139f, -0.0462328f, +0.0576109f, +0.2064462f,
  -0.0120676f, +0.0970541f, +0.0188534f, +0.2125070f, -0.1158421f, -0.0974876f, -0.4985870f, -0.0607542f,
  -0.1281247f, +0.2652260f, +0.1548763f, -0.1994714f, +0.2499386f, +0.1925338f, +0.1331242f, -0.0553844f,
  -0.0442529f, +0.0148318f, +0.4462218f, +0.2962698f, -0.1329990f, +0.0968174f, +0.0209804f, +0.1593454f,
  +0.2551199f, +0.0984612f, +0.0180662f, +0.0217955f, +0.1691609f, -0.1027268f, -0.0829195f, -0.2212479f,
  +0.0570585f, +0.0973324f, +0.1792814f, -0.0131391f, +0.0004400f, -0.1290687f, -0.0659395f, -0.0092479f,
  +0.0370925f, -0.3211146f, -0.2606264f, +0.0336113f, -0.0107025f, -0.1061698f, -0.0606183f, +0.1517662f,
  -0.0923509f, +0.1495172f, -0.2769502f, -0.0036512f, +0.0404843f, +0.1030857f, +0.0163446f, +0.0311244f,
  -0.2993390f, -0.1426003f, -0.4049210f, -0.3827839f, +0.3415004f, +0.2571255f, -0.1237679f, +0.2579369f,
  +0.4729160f, -0.4978715f, -0.0872984f, +0.3950505f, +0.4086506f, -0.2718053f, +0.0010228f, -0.4350026f,
  +0.0898623f, +0.2142219f, -0.2551735f, +0.0271940f, +0.1206254f, -0.0619532f, +0.1486093f, -0.1097921f,
  -0.0813027f, -0.0473785f, -0.0942812f, -0.3881774f, +0.0017945f, +0.0671894f, -0.0224278f, -0.0815083f,
  +0.1788927f, -0.1479901f, +0.2436012f, +0.2366784f, +0.2042774f, +0.2108138f, -0.2610428f, +0.1553562f,
  -0.0389556f, +0.1617725f, -0.0255018f, -0.2957590f, -0.2351982f, -0.1050587f, +0.3037229f, +0.0271916f
);

const float biases[4] = float[4](
  +0.0823765f, -0.0640611f, +0.1266129f, +0.0682826f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer45 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1459318f, -0.0234317f, -0.2591095f, +0.1333551f, -0.0237422f, +0.1328216f, +0.2588393f, -0.0743911f,
  +0.2552581f, +0.1675747f, -0.0652633f, +0.0325329f, +0.0816124f, +0.0765088f, +0.1674722f, -0.0109422f,
  +0.0210572f, -0.1900662f, -0.0723844f, +0.0399965f, +0.0976410f, +0.0522233f, +0.0558124f, +0.0154522f,
  +0.1048348f, +0.0537823f, +0.7876889f, +0.6382151f, +0.0275309f, +0.0654516f, +0.4825130f, -0.2236333f,
  +0.1417605f, +0.4261301f, +0.4000535f, -0.1720155f, +0.0618961f, +0.1551430f, -0.2422707f, -0.1451058f,
  -0.0930070f, -0.4253647f, +0.2497274f, +0.1379585f, -0.1207450f, -0.4134719f, -0.0831010f, -0.1089491f,
  +0.2763434f, +0.2491091f, +0.3801602f, +0.3254165f, -0.1306905f, +0.0702763f, -0.0512098f, +0.4281420f,
  +0.2858759f, -0.1275963f, +0.2218877f, -0.3477420f, -0.1603573f, -0.1679394f, +0.0369390f, -0.0074917f,
  -0.2389633f, -0.1726040f, +0.3252409f, +0.0350649f, -0.2024347f, -0.1283253f, -0.0346760f, -0.0209349f,
  +0.0632997f, -0.1347220f, +0.2842636f, -0.3002780f, +0.0205438f, -0.0677098f, +0.2743203f, +0.0467609f,
  -0.0553471f, +0.0873352f, +0.0676843f, -0.3090650f, -0.1227621f, +0.0456443f, -0.0466608f, +0.1983295f,
  -0.1774810f, -0.4682280f, +0.2047140f, -0.0536559f, -0.1382629f, -0.0138005f, -0.3463945f, +0.1135106f,
  -0.1676652f, +0.2375074f, +0.0248867f, -0.1162345f, +0.2763329f, +0.1321822f, +0.2585497f, -0.9361327f,
  +0.3940387f, -0.5018970f, +0.5743903f, -0.1461632f, -0.1203432f, -0.1614632f, +0.2800941f, +0.0741332f,
  +0.2237021f, -0.1263912f, +0.2111254f, +0.0803670f, +0.1384158f, +0.0607276f, +0.0588768f, +0.4262625f,
  +0.4092721f, +0.1149419f, +0.0317701f, -0.3077296f, +0.1501609f, +0.0866299f, +0.2434236f, -0.6348941f,
  +0.3543030f, +0.1340073f, +0.0080835f, +0.4628033f, +0.1375733f, -0.2664918f, -0.4545870f, +0.3936575f,
  +0.3402942f, +0.2119594f, +0.1545461f, +0.4234240f, +0.2205546f, -0.0714504f, -0.0744189f, +0.1937079f,
  -0.0044368f, -0.2062801f, +0.1346272f, +0.0783761f, -0.0249950f, -0.1337536f, -0.2903219f, -0.1237952f,
  +0.1414800f, -0.0654819f, +0.1958627f, +0.0053535f, -0.2009472f, -0.1620301f, -0.1487714f, -0.1890841f,
  +0.0956611f, -0.0546932f, +0.1096968f, +0.0777652f, +0.1287985f, +0.0362610f, +0.1480444f, +0.0577234f,
  +0.0399740f, -0.0354389f, -0.0012309f, +0.0617925f, -0.1689148f, -0.1016221f, -0.1767326f, +0.1181676f,
  +0.6476558f, -0.1068655f, +0.1398330f, +0.0458228f, -0.6024069f, +0.6223752f, -0.0592914f, -0.0883183f,
  +0.1118013f, -0.1168963f, -0.2397064f, -0.1985391f, +0.1075754f, -0.2442361f, -0.2225577f, +0.1402770f,
  +0.0099503f, +0.4131455f, +0.4239117f, -0.1204473f, +0.2020395f, -0.0697601f, -0.0330609f, -0.2855288f,
  +0.0273316f, +0.9087068f, +0.0515680f, -0.2344192f, +0.1772341f, +0.0589023f, +0.2403313f, -0.1455475f,
  -0.0228930f, +0.2469490f, -0.0686720f, +0.2658495f, -0.2019527f, +0.0393740f, -0.1330606f, +0.0106445f,
  -0.0382852f, +0.2114331f, -0.0185613f, +0.0155469f, -0.2656017f, +0.0104738f, -0.2702732f, -0.0483058f,
  -0.0911825f, -0.5626550f, -0.0297126f, -0.1569184f, +0.4422158f, +0.0882336f, +0.0400252f, +0.1275785f,
  +0.0542436f, +0.2146724f, +0.0762931f, -0.1192293f, -0.1255769f, -0.4606962f, -0.2071811f, +0.0625273f,
  -0.0664573f, +0.2206179f, -0.2795398f, -0.0526360f, +0.0834962f, +0.1388000f, +0.1161735f, +0.0662124f,
  +0.3693614f, -0.3221775f, -0.4151667f, +0.0111029f, +0.6463562f, +0.1318115f, +0.1991641f, -0.6346208f,
  -0.0668048f, +0.2986672f, -0.5823722f, -0.2143081f, -0.0130470f, -0.2832857f, +0.1316622f, -0.2113111f,
  -0.0559593f, -0.0143945f, -0.1578938f, +0.0820228f, -0.1265090f, +0.1398074f, -0.1476067f, +0.1280984f,
  -0.0603782f, +0.0584031f, -0.2734412f, -0.2013873f, -0.0512153f, +0.4684823f, -0.0770105f, +0.1187522f,
  -0.1004620f, -0.0385212f, +0.0458326f, -0.0212823f, -0.0175245f, +0.0072419f, +0.0628022f, +0.0642413f
);

const float biases[4] = float[4](
  -0.0836579f, +0.1050009f, -0.0128699f, +0.0476792f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer46 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.2490947f, +0.1918021f, -0.0283923f, +0.0986873f, +0.0852854f, -0.2450622f, +0.0075640f, -0.0533975f,
  +0.0932878f, +0.1135611f, +0.5965050f, -0.0746928f, -0.3860803f, +0.0466096f, -0.1036064f, -0.0060456f,
  +0.0300444f, -0.2661712f, +0.1195830f, -0.0224077f, -0.0181124f, +0.0317649f, +0.2068929f, -0.0289153f,
  +0.3573686f, +0.0010695f, -0.0332712f, +0.1286203f, -0.1761148f, -0.4736687f, -0.0674849f, +0.3259978f,
  +0.0065983f, -0.1966405f, +0.3716860f, -0.4923756f, +0.0244853f, -0.4718229f, -0.3325971f, -0.4241607f,
  +0.3693425f, +0.0685917f, +0.3871413f, +0.4544010f, -0.1862123f, -0.1813294f, -0.2367351f, +0.0444910f,
  +0.0908759f, +0.1428985f, +0.0338239f, +0.0738008f, -0.0356433f, -0.1176226f, +0.0159052f, +0.1792957f,
  +0.0410670f, -0.0840001f, -0.0740901f, +0.0673182f, -0.1366753f, -0.2327182f, -0.2322793f, +0.3554109f,
  -0.0027582f, -0.1318034f, -0.0921876f, -0.2124357f, -0.0333503f, -0.1622665f, -0.1086806f, -0.1290560f,
  +0.1287315f, +0.2846739f, +0.1136017f, +0.0987400f, -0.0747924f, +0.0355571f, -0.1386811f, -0.1080076f,
  +0.2561890f, +0.3609033f, -0.3215705f, -0.1279292f, -0.4348236f, -0.0091766f, -0.3516556f, +0.0207539f,
  +0.0619972f, +0.0725586f, -0.1598684f, +0.0429656f, -0.1491466f, -0.0116808f, -0.2237936f, +0.0449086f,
  +0.0616353f, -0.2095009f, +0.2242369f, +0.0831226f, +0.0800264f, -0.3556582f, -0.1543701f, -0.1148559f,
  +0.0485603f, -0.2402633f, -0.3164013f, -0.0881507f, -0.1492777f, +0.0525301f, +0.1357460f, +0.5975758f,
  +0.4243797f, -0.0675241f, +0.1800406f, +0.1629925f, +0.1587721f, -0.3829943f, +0.0059451f, -0.0442884f,
  +0.0523315f, -0.1997010f, -0.1567856f, +0.2741995f, +0.0772522f, -0.0172030f, -0.0035592f, -0.2698577f,
  +0.0470685f, +0.0797769f, -0.1157579f, +0.3467129f, +0.0406934f, -0.0267304f, -0.0822605f, +0.7018344f,
  +0.2183552f, -0.1503327f, -0.1062399f, -0.2262777f, -0.2531056f, -0.1842152f, -0.0395037f, -0.1199242f,
  -0.2894010f, -0.0068286f, +0.1177864f, +0.0073436f, -0.2280215f, +0.1399854f, +0.0235341f, -0.1229511f,
  -0.2386920f, +0.1791955f, -0.2042169f, -0.2540438f, +0.0437974f, +0.2063630f, -0.1398845f, +0.1534943f,
  +0.0713611f, +0.0393421f, -0.2322667f, -0.0611367f, +0.2097866f, -0.2630185f, -0.1477793f, +0.0823707f,
  +0.1880809f, +0.1670682f, -0.0882557f, +0.2180012f, -0.1541548f, -0.0733541f, +0.1827344f, +0.2380484f,
  +0.0279980f, -0.1811972f, +0.0467189f, -0.0066715f, -0.4771257f, +0.0679466f, -0.3211575f, +0.2475041f,
  +0.1976746f, -0.4167185f, +0.2355403f, +0.1169667f, +0.1740782f, -0.2263415f, -0.1072339f, +0.2214769f,
  +0.1082766f, -0.0262162f, +0.0096037f, +0.0602210f, -0.0577803f, -0.0892596f, +0.0003037f, +0.0831022f,
  +0.0596430f, -0.1947703f, -0.1938163f, +0.1369653f, -0.0749740f, -0.1703883f, -0.2980476f, +0.3157834f,
  +0.1126362f, -0.5256702f, -0.1134731f, -0.3955278f, -0.0835259f, -0.3006633f, -0.0480994f, +0.0434765f,
  -0.2019756f, -0.0448494f, -0.1902287f, +0.2475054f, +0.0851594f, +0.0503834f, -0.0093492f, -0.0279772f,
  -0.1614321f, +0.3209932f, +0.1079795f, -0.2623569f, -0.2578406f, +0.0444269f, +0.4989946f, +0.1913667f,
  -0.1139254f, +0.0103468f, +0.0571629f, +0.2383420f, +0.2852616f, +0.0271974f, -0.0098235f, -0.0834063f,
  -0.1832836f, -0.1487595f, -0.2853747f, -0.0410011f, -0.1430585f, +0.0309492f, +0.0154509f, +0.2714914f,
  -0.1242274f, -0.0914188f, +0.3202025f, -0.3149767f, -0.6618374f, +0.3540632f, -0.0101678f, +0.5775595f,
  -0.6088448f, +0.1425956f, -0.0063685f, +0.5377888f, +0.4811061f, +0.1024599f, -0.0831431f, -0.1781623f,
  -0.2566622f, -0.2891150f, +0.0469922f, -0.1406613f, -0.0039178f, +0.1136536f, -0.1932254f, +0.2872990f,
  -0.1204396f, -0.0359851f, +0.1607028f, +0.0335273f, +0.2033095f, +0.0404556f, +0.1477795f, +0.2779009f,
  -0.2629325f, +0.0272239f, +0.1757299f, -0.0980055f, +0.2440962f, +0.0662852f, +0.0351482f, -0.0092812f
);

const float biases[4] = float[4](
  +0.1799011f, +0.1997057f, -0.1526008f, +0.0128438f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer46 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2433726f, -0.2459128f, -0.2459422f, +0.3709692f, +0.0436813f, -0.3129893f, -0.1939094f, -0.1269717f,
  +0.1511145f, -0.2144405f, +0.1200433f, -0.1417628f, -0.5395377f, -0.2079463f, -0.2716233f, +0.1158122f,
  +0.2735135f, +0.2139309f, -0.0954075f, +0.0329325f, +0.1881926f, -0.1155073f, -0.2003591f, +0.0091447f,
  +0.2810560f, -0.1339459f, -0.1137479f, -0.4038107f, +0.0212480f, -0.2694933f, -0.2211670f, +0.1076141f,
  -0.1414802f, +0.3071400f, +0.0686284f, +0.0983304f, +0.7922223f, -0.1482750f, +0.2179709f, -0.3661519f,
  -0.0419258f, +0.6340566f, +0.0053040f, +0.2542377f, +0.3209001f, +0.0955883f, -0.0310492f, -0.0728833f,
  +0.1390066f, -0.1260234f, -0.2163042f, -0.1052418f, -0.0995532f, -0.1060853f, -0.2298202f, -0.0250263f,
  +0.0505890f, -0.0194177f, +0.2612517f, -0.1760693f, -0.0285087f, +0.0571306f, +0.0220227f, -0.2248241f,
  -0.2966415f, +0.0237994f, +0.1775760f, +0.0544664f, +0.2696957f, +0.0308625f, +0.0994196f, +0.0232184f,
  -0.2815525f, +0.1555484f, -0.0025271f, +0.0909887f, +0.1434708f, +0.3563274f, +0.1806987f, -0.0584570f,
  -0.0187496f, -0.2176136f, -0.2231922f, -0.2587458f, -0.0767409f, +0.1248625f, +0.2596001f, -0.1016151f,
  -0.2144369f, +0.0778980f, -0.2580850f, -0.0806974f, +0.0201767f, +0.1986305f, +0.0707436f, +0.0279872f,
  -0.0578658f, -0.0610135f, +0.2581179f, +0.2127810f, +0.0474166f, +0.0800642f, +0.2715999f, +0.1986008f,
  +0.0094322f, +0.0081999f, +0.0092494f, +0.0327738f, +0.0830982f, +0.1194325f, -0.2351200f, +0.0418686f,
  +0.0750467f, -0.0054148f, +0.2980040f, -0.2518982f, -0.2902969f, -0.0515133f, +0.0241979f, +0.0565173f,
  -0.0911002f, +0.0886994f, -0.0287910f, -0.0489163f, -0.0758794f, +0.1320277f, +0.0642375f, -0.0073219f,
  +0.1436369f, -0.0184636f, +0.0184199f, +0.1477346f, -0.0362668f, -0.2096367f, +0.1519697f, -0.1386791f,
  +0.0169371f, -0.0384034f, -0.1351072f, +0.1076110f, -0.1529389f, +0.0265879f, -0.1054706f, -0.2013360f,
  -0.1116360f, -0.1874540f, +0.1345185f, -0.2097865f, -0.1097201f, -0.0411930f, -0.1050850f, -0.0758234f,
  +0.0310193f, +0.2857738f, +0.0496826f, +0.3994049f, +0.0667338f, +0.0392007f, -0.2065886f, +0.0936821f,
  +0.2157289f, +0.1182613f, -0.0523174f, +0.0936799f, -0.2026504f, -0.2260851f, +0.0730796f, +0.0080008f,
  +0.1812696f, +0.0514130f, -0.0752310f, -0.2274869f, -0.4838323f, -0.2784019f, -0.0445790f, +0.0488182f,
  +0.8095052f, -0.0532385f, +0.1100861f, -0.1426730f, -0.2409807f, -0.2969324f, -0.3122917f, -0.4051453f,
  +0.1540081f, -0.0605760f, +0.1458048f, +0.1882051f, +0.0633266f, -0.3542331f, +0.0162394f, -0.0146078f,
  -0.1132056f, -0.0634226f, -0.1028694f, -0.1278592f, +0.0570486f, -0.0061297f, -0.1552934f, +0.1838956f,
  +0.1882056f, -0.1497233f, -0.0177950f, +0.2869982f, +0.1403311f, -0.1759883f, +0.1121721f, -0.2190222f,
  +0.0947105f, -0.0701291f, +0.1275232f, -0.0068023f, +0.1154360f, -0.1685174f, +0.0756914f, +0.1209062f,
  +0.0904761f, -0.2100655f, +0.1049590f, -0.2150504f, -0.1422295f, -0.0285662f, -0.1314321f, +0.0095705f,
  -0.0549076f, +0.1566882f, -0.2170575f, -0.1042878f, +0.2387089f, +0.0498886f, -0.2156551f, -0.1044221f,
  -0.0601848f, -0.0037176f, +0.0885584f, +0.1484187f, +0.2118163f, +0.1643321f, +0.0860979f, +0.0042871f,
  +0.1543887f, -0.1064609f, -0.2785390f, -0.1104554f, +0.1021507f, -0.3178410f, -0.1912799f, -0.1640032f,
  +0.1501865f, -0.6418551f, -0.2978681f, +0.5061767f, +0.0748032f, -0.1446428f, +0.2118519f, +0.5363662f,
  -0.0597007f, +0.1546525f, +0.1294346f, -0.1331486f, -0.3121979f, +0.0568841f, -0.0114968f, -0.1869608f,
  +0.1800299f, -0.0366193f, -0.0403248f, -0.1122535f, +0.1259000f, -0.2619098f, -0.0658505f, +0.0443648f,
  +0.3831005f, -0.5209530f, +0.0670110f, -0.1948724f, -0.0021582f, -0.0552201f, -0.0484596f, -0.0483690f,
  -0.1918401f, -0.1990337f, -0.0719604f, -0.0144075f, +0.2785542f, +0.0083632f, +0.0013181f, +0.0054972f
);

const float biases[4] = float[4](
  -0.1431644f, +0.1016214f, +0.1720092f, +0.1946548f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer47 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1572147f, -0.4202170f, -0.3852762f, +0.2197170f, +0.1433933f, -0.0919315f, +0.0572732f, +0.0325687f,
  +0.2560975f, +0.2655388f, +0.5073283f, +0.0827290f, +0.0833749f, +0.0100796f, -0.1696879f, +0.0342725f,
  +0.0982418f, -0.2767093f, -0.0527819f, +0.2580761f, +0.0157570f, -0.0080938f, +0.0268043f, -0.1845634f,
  -0.6187071f, -0.0863651f, +0.2838827f, +0.0562688f, +0.0694002f, -0.1966559f, +0.3171883f, -0.0864120f,
  +0.3768281f, +0.5240889f, +0.6386756f, +0.2841075f, -0.1336586f, +0.0808867f, +0.2089265f, -0.0222445f,
  -0.3034259f, -0.1958195f, -0.0203240f, -0.0061297f, -0.2665096f, -0.1223796f, -0.0695014f, -0.1241066f,
  +0.0658148f, -0.1710262f, -0.1245553f, +0.2826702f, -0.0291663f, +0.0425103f, -0.1445542f, +0.0292671f,
  +0.2359599f, -0.1609866f, +0.0712359f, -0.0679940f, -0.0774401f, -0.2881063f, +0.2191633f, +0.1598620f,
  +0.0077957f, +0.0839935f, -0.0566590f, +0.0070073f, +0.1215249f, +0.3133424f, -0.0524501f, +0.0431763f,
  +0.1447305f, -0.0684171f, -0.2209967f, +0.2015645f, +0.3838457f, -0.0299310f, +0.1261025f, +0.0197737f,
  -0.0602657f, -0.1751377f, -0.4542958f, +0.4098454f, +0.1956141f, -0.2211253f, +0.1754669f, -0.2879268f,
  +0.1830816f, +0.5950993f, -0.1973245f, -0.1012748f, +0.1381515f, +0.1396991f, +0.4612999f, +0.0509330f,
  +0.0121334f, -0.1125464f, -0.0143069f, +0.3825686f, +0.4043268f, +0.1358818f, +0.0077904f, +0.2913967f,
  -0.0164608f, +0.1261918f, -0.3294307f, -0.2455584f, -0.3020431f, +0.2458464f, +0.0754418f, -0.1638055f,
  +0.4420205f, -0.0613254f, -0.3452328f, -0.2252458f, -0.1709737f, -0.0935694f, +0.0618308f, -0.2750696f,
  -0.3689462f, -0.1222895f, -0.0029835f, -0.2609925f, -0.0243591f, +0.0111863f, -0.0587125f, +0.1441348f,
  -0.3745556f, -0.2271964f, -0.2825811f, -0.2694120f, +0.2805055f, +0.0711585f, -0.1076139f, -0.1055253f,
  -0.0166878f, +0.1072272f, -0.3091232f, +0.0206633f, +0.0930251f, +0.0735527f, -0.0360767f, +0.0604169f,
  +0.5153046f, -0.0666550f, +0.3985045f, -0.0634177f, +0.4120614f, +0.0114536f, +0.0641534f, +0.0449085f,
  +0.2154835f, +0.1531392f, -0.3741067f, +0.3354307f, -0.1187979f, -0.1684479f, +0.3275508f, +0.0648518f,
  -0.4918324f, +0.0634485f, +0.5065168f, +0.1875186f, -0.2945302f, +0.0692113f, -0.2589132f, -0.7143370f,
  +0.6316316f, -0.2297243f, +0.1493173f, +0.1743884f, +0.2025395f, -0.1293404f, +0.0194218f, +0.0448416f,
  +0.4148597f, -0.0814980f, -0.0877841f, +0.2701419f, -0.1147689f, -0.0174987f, -0.4108433f, +0.1866315f,
  -0.6555071f, -0.4060074f, +0.8892129f, +0.1475566f, -0.2171947f, -0.1778985f, -0.6525282f, -0.5893503f,
  +0.1101420f, -0.0134481f, +0.4164050f, -0.1379954f, -0.1520185f, +0.0902843f, -0.2783442f, +0.3002742f,
  +0.5618187f, +0.2082445f, -0.0456058f, +0.1684229f, +0.1019718f, -0.1734216f, +0.0726175f, +0.3371214f,
  -0.1760692f, -0.5411702f, +0.8309888f, -0.1158183f, +0.1438139f, -0.1596841f, -0.0276102f, -0.2189608f,
  +0.1339788f, +0.0376605f, -0.2142985f, +0.0967416f, +0.0924215f, +0.0808802f, +0.1193152f, +0.1216880f,
  -0.0004960f, -0.1111311f, -0.3290420f, +0.0654116f, +0.1529947f, -0.0886970f, -0.0160468f, -0.0836555f,
  -0.0697374f, -0.0404738f, -0.0344075f, -0.0207133f, +0.0738730f, -0.0327004f, +0.0329986f, -0.1234933f,
  +0.0839169f, -0.1039990f, -0.1501385f, +0.5724491f, +0.1453829f, -0.1565546f, -0.0555793f, -0.0605331f,
  +0.0046487f, -0.2040747f, +0.3743630f, +0.1299758f, +0.1212331f, +0.1708626f, -0.1767139f, -0.2138738f,
  -0.2767008f, +0.1662421f, -0.0853588f, +0.0698238f, -0.0654687f, -0.1120874f, +0.1981311f, -0.0979996f,
  +0.6334370f, +0.0277980f, -0.0176035f, -0.3238562f, -0.5795114f, -0.1363995f, -0.2679284f, +0.1661551f,
  +0.3712927f, +0.3463680f, +0.5560017f, -0.1052691f, -0.3580650f, +0.3608873f, -0.2441322f, -0.0435877f,
  -0.1722430f, +0.1059491f, +0.1925496f, -0.0788425f, -0.1878667f, +0.1238108f, +0.0472272f, -0.1151824f
);

const float biases[4] = float[4](
  -0.0854698f, +0.1367581f, -0.1582745f, +0.0811158f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer47 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2757820f, -0.0619977f, +1.0268222f, -0.4915569f, -0.1165494f, -0.3850599f, -0.1488908f, -0.3437502f,
  +0.2795717f, +0.1243556f, -0.1537484f, -0.1517806f, +0.0441999f, -0.0733555f, +0.0035595f, +0.7579837f,
  -0.1759106f, -0.1426271f, +0.1837857f, -0.1236333f, -0.3569731f, +0.2224121f, -0.0624528f, +0.0225287f,
  -0.0882919f, -0.0470002f, +0.7324080f, -0.0917419f, +0.2389920f, -0.3346689f, -0.5160703f, -0.8189778f,
  +1.0560098f, +0.0424278f, -0.2037817f, +0.2770250f, +0.6785868f, +0.0845143f, +0.4721624f, +0.0010879f,
  +0.0339534f, -0.2455633f, -0.0545114f, +0.3158313f, -0.1569897f, +0.1730468f, -0.2831621f, +0.2105309f,
  -0.3400032f, -0.0704103f, +0.5171631f, +0.3122375f, +0.2860146f, -0.1096289f, -0.2049351f, -0.4955328f,
  -0.0511406f, +0.0510126f, -0.3466110f, +0.2517658f, +0.6196584f, -0.3346080f, +0.1567502f, +0.3042058f,
  +0.0071135f, -0.1546413f, +0.1874141f, -0.0534496f, +0.2167287f, -0.2380674f, +0.0551166f, +0.0738363f,
  -0.0890529f, -0.1940981f, +0.2354735f, +0.0700472f, +0.2641206f, +0.1516068f, -0.0987884f, +0.0580992f,
  +0.2715738f, +0.0077672f, +0.3442300f, +0.1276097f, +0.2963412f, +0.0326352f, +0.3259442f, -0.1144152f,
  +0.2238709f, +0.0766697f, +0.0187483f, +0.0217631f, -0.0210921f, +0.2558436f, +0.1982317f, -0.1219571f,
  +0.0999478f, +0.0281716f, -0.0180533f, -0.1052225f, +0.0356736f, -0.1626039f, -0.1164421f, +0.1164135f,
  -0.4168882f, -0.1330737f, -0.3195106f, +0.0981126f, +0.0615560f, +0.3165668f, +0.1393111f, +0.3049431f,
  -0.0253953f, +0.0859351f, +0.1175258f, -0.0811624f, -0.0816767f, -0.0464115f, +0.1190800f, +0.0605606f,
  +0.0002108f, +0.0817897f, +0.0520013f, -0.0162059f, -0.2274716f, +0.1354309f, -0.1862318f, +0.0167734f,
  +0.0417686f, -0.0062733f, +0.0702417f, +0.0940373f, -0.3790735f, -0.0615990f, -0.0607009f, +0.1392660f,
  -0.0029134f, +0.0470590f, -0.3742415f, -0.0945687f, +0.1484148f, +0.2202238f, +0.0817649f, -0.0037005f,
  +0.1682670f, -0.0452971f, +0.0235388f, +0.0621065f, +0.0479078f, -0.1369651f, -0.0721848f, -0.0047709f,
  +0.0116432f, +0.0140357f, -0.1465427f, -0.0777166f, -0.0375945f, +0.1482186f, -0.0549758f, +0.0458376f,
  -0.0380841f, -0.0269960f, +0.1484990f, -0.0330942f, +0.0274907f, +0.1648311f, +0.0473384f, +0.1027564f,
  +0.0179604f, +0.2317054f, +0.1328531f, -0.0982282f, +0.0656760f, -0.1131086f, +0.0095277f, -0.1475345f,
  -0.4594263f, -0.2428157f, -0.5324023f, -0.1065259f, +0.3316799f, -0.1555977f, -0.1882530f, -0.0550088f,
  +0.0999468f, +0.2431365f, +0.3069931f, +0.1219622f, -0.0392204f, -0.0860956f, -0.0440340f, +0.3634371f,
  +0.2209812f, +0.2367447f, -0.1070866f, -0.0432293f, -0.0928100f, +0.1255899f, +0.0305891f, -0.0358990f,
  -0.2190763f, -0.0983702f, -0.5673497f, -0.7612591f, -0.1048661f, +0.1218021f, +0.0010696f, -0.2802750f,
  -0.0039216f, +0.1456890f, -0.1858463f, +0.1915385f, +0.1530154f, +0.0626016f, -0.3738926f, +0.1240828f,
  -0.0832240f, -0.0188085f, +0.1020380f, -0.1387047f, -0.0549164f, -0.0383978f, -0.0321735f, -0.0602552f,
  -0.0545737f, -0.0671190f, +0.1488653f, +0.0316046f, +0.0482729f, +0.0987322f, -0.0540233f, +0.2278804f,
  -0.0517282f, +0.1411712f, +0.0876064f, +0.0136339f, -0.1315999f, +0.0736956f, -0.3256897f, +0.0753724f,
  +0.1016716f, +0.0230122f, +0.2244078f, -0.0056433f, +0.2426119f, -0.0391088f, -0.1354499f, -0.0499252f,
  -0.5293292f, -0.6089531f, +0.1682945f, +0.1858340f, +0.4119961f, -0.0528571f, +0.2834185f, -0.2303116f,
  +0.1881922f, -0.1021728f, +0.2104900f, +0.0333485f, -0.0006251f, +0.1819818f, -0.1955409f, -0.0168758f,
  -0.2434146f, -0.0850920f, +0.0227756f, -0.0991368f, +0.1361951f, +0.0069698f, -0.0530924f, -0.1196513f,
  -0.0943447f, +0.2156297f, -0.2071688f, -0.0983515f, +0.2309367f, +0.2177067f, -0.1154485f, -0.1196770f,
  -0.0767050f, +0.1169104f, -0.1283203f, +0.1410251f, +0.0074400f, +0.1016003f, -0.2519725f, +0.0929942f
);

const float biases[4] = float[4](
  -0.0334676f, -0.1317986f, +0.0746095f, -0.5898855f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer48 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  +0.0128284f, +0.1258156f, +0.0825416f, +0.1604725f, -0.1809545f, -0.0699349f, +0.1610229f, +0.1819414f,
  -0.1385936f, +0.3096735f, -0.6696387f, -0.0432760f, -0.3538610f, +0.1890126f, -0.0975237f, +0.1747250f,
  -0.0512183f, +0.3384118f, +0.1187237f, -0.4224598f, +0.0822607f, -0.0201560f, -0.0990793f, +0.4511048f,
  +0.4007918f, -0.2871437f, +0.2336918f, +0.2027690f, -0.1790747f, -0.1179595f, +0.0312594f, +0.2832404f,
  -0.1782616f, +0.0667167f, -0.2944472f, +0.0069267f, -0.7126322f, +0.2604175f, +0.2255100f, +1.9461817f,
  +0.1774038f, -0.1764700f, -0.1661482f, +0.0903107f, -0.3314424f, +0.1169624f, +0.1637562f, +0.3631258f,
  +0.2165294f, -0.1655829f, +0.2683085f, +0.0505715f, +0.0330730f, -0.1425437f, +0.0013454f, +0.1618694f,
  +0.1160041f, -0.0210448f, -0.2585731f, -0.0359120f, -0.2974983f, +0.0444184f, -0.0355328f, +0.4551555f,
  +0.0823398f, +0.0015029f, +0.0444899f, +0.0554758f, -0.1432150f, +0.1970182f, -0.1653090f, +0.1321319f,
  -0.1217766f, +0.0115291f, +0.3032327f, -0.1782678f, -0.0661766f, -0.0365737f, -0.1319713f, +0.3921947f,
  -0.1302492f, +0.3162892f, -0.2377760f, -0.2367925f, +0.3529999f, -0.2057334f, +0.2114388f, +0.1302795f,
  +0.0888417f, +0.1148007f, -0.2054277f, +0.2790905f, +0.1951349f, -0.0559745f, +0.0549239f, +0.0473554f,
  +0.1874329f, -0.1764622f, +0.3186034f, +0.1071885f, +0.3152922f, -0.3793562f, +0.0763413f, +0.7560670f,
  +0.3223491f, -0.2790821f, -0.0269097f, +0.2496592f, +0.1611007f, -0.1383712f, +0.4121439f, +0.5275718f,
  -0.0354222f, -0.1569665f, -0.0577434f, +0.2089072f, -0.5012235f, +0.1296940f, -0.0879777f, +0.0658511f,
  -0.4569542f, -0.5154935f, -0.1348089f, +0.1205310f, -0.4025416f, +0.0991653f, -0.0904247f, -0.0840522f,
  +0.0604490f, +0.2096060f, -0.1637653f, -0.0280806f, -0.5687252f, +0.1079017f, -0.0926867f, +0.2866836f,
  +0.0357784f, -0.0656625f, -0.0704015f, -0.0683783f, -0.1218761f, +0.0133789f, -0.0695308f, +0.2643389f,
  -0.1867044f, +0.1681652f, -0.4451973f, -0.0081105f, +0.0515135f, +0.1289255f, +0.0591688f, -0.1132159f,
  +0.2131313f, +0.3435821f, +0.1720941f, -0.2798109f, +0.0448860f, +0.1114611f, +0.4225436f, +0.3668194f,
  -0.1900784f, -0.1184773f, +0.0027761f, +0.1738835f, +0.1423945f, +0.1574503f, +0.0164939f, +0.1145771f,
  -0.0748885f, +0.3666685f, -0.3709529f, +0.0431079f, +0.2509476f, +0.1376281f, -0.2511138f, +0.1539379f,
  -0.0197573f, +0.1224819f, +0.0741062f, -0.2898188f, -0.0584006f, +0.1547879f, +0.3326668f, +0.4272587f,
  -0.7299895f, -0.1091610f, +0.2287804f, +0.1712364f, +0.4074157f, +0.1923421f, +0.0417985f, +0.2218332f,
  +0.1707746f, +0.0030271f, +0.0689228f, +0.0427768f, +0.0622072f, -0.0937395f, -0.1801262f, +0.1706891f,
  +0.0933116f, +0.0481992f, +0.2015856f, +0.0755027f, +0.1449131f, +0.0465393f, +0.0587525f, -0.0136871f,
  +0.1288969f, +0.0753426f, +0.2412245f, -0.0027787f, -0.4064607f, -0.0959775f, -0.1897040f, +0.2537851f,
  -0.0895552f, -0.2284410f, +0.0724793f, -0.3437127f, -0.2630861f, -0.0356300f, -0.3303087f, -0.0070474f,
  +0.0989335f, -0.2371323f, +0.0380487f, +0.0347117f, -0.3840832f, -0.0639897f, +0.6745942f, +0.0705605f,
  -0.0210283f, -0.1226167f, -0.0615472f, -0.0203904f, +0.2901253f, +0.0688913f, +0.1488748f, -0.0121696f,
  +0.4080310f, +0.2052521f, -0.1431080f, -0.4167722f, +0.0710856f, +0.1393432f, +0.0122552f, +0.2393464f,
  +0.3584805f, -0.1478150f, -0.2285534f, -0.0898723f, +0.0467153f, +0.0420297f, +0.0210293f, -0.4788347f,
  -0.1048347f, -0.2389727f, -0.1549046f, -0.5711710f, +0.1874689f, +0.1746923f, -0.0248216f, +0.2048423f,
  -0.0133781f, -0.0322744f, -0.0254167f, -0.0324526f, -0.0464953f, +0.1724421f, +0.1737538f, -0.2281477f,
  -0.1782860f, -0.0934737f, -0.1945672f, -0.0401566f, -0.0837843f, +0.3600291f, +0.1189137f, -0.4634938f,
  -0.3353800f, -0.1026288f, -0.1550240f, -0.0578104f, +0.6482511f, +0.2422521f, +0.0355339f, -0.1342789f
);

const float biases[4] = float[4](
  +0.0663490f, -0.0159464f, +0.0873050f, +0.1562210f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer48 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0561104f, +0.0369757f, +0.1570083f, +0.1718180f, -0.2576638f, -0.0049808f, -0.1457161f, +0.1542208f,
  -0.1695718f, +0.1431051f, -0.2196503f, +0.1772617f, -0.5035913f, +0.0855158f, +0.3492483f, +0.1027068f,
  -0.0790460f, -0.0142676f, +0.2570520f, +0.4585617f, -0.2424375f, -0.1169119f, +0.1125736f, -0.0681642f,
  -0.1563055f, +0.2177582f, +0.3811359f, +0.1382118f, -0.5145963f, +0.0587589f, -0.1198102f, +0.1434088f,
  -0.4350953f, +0.2024210f, -0.3422854f, +0.2147709f, -1.0738649f, +0.0771241f, -0.4851372f, +0.0625344f,
  -0.1299631f, -0.2871544f, -0.1948252f, -0.1826275f, -0.1173988f, -0.1241628f, -0.0104935f, -0.2411523f,
  +0.0063613f, +0.0713216f, +0.0072683f, +0.1680287f, +0.1816462f, +0.0376323f, -0.0479827f, +0.1584065f,
  -0.1278476f, +0.0487073f, +0.1157440f, -0.0530585f, -0.2005326f, -0.2334048f, +0.1129939f, +0.0088242f,
  +0.2084978f, -0.1128376f, -0.1223500f, -0.2888588f, -0.3754614f, -0.3977271f, +0.0162907f, +0.0319392f,
  +0.0704524f, -0.2457813f, +0.1482057f, -0.0953249f, -0.0860351f, -0.2390808f, -0.0880833f, -0.1307454f,
  -0.0471098f, -0.0656589f, -0.0874957f, -0.0273848f, +0.4783251f, -0.1508728f, +0.1405383f, -0.3666739f,
  +0.0489471f, +0.0219557f, +0.0354682f, -0.0296386f, -0.0505976f, -0.1752480f, -0.0308521f, -0.2012729f,
  +0.0143082f, -0.0176651f, -0.1856293f, +0.0050054f, +0.2401295f, -0.0245346f, +0.1072856f, -0.3901234f,
  +0.2815779f, -0.0393351f, -0.1314070f, -0.1435071f, +0.5689353f, +0.1131332f, +0.0581473f, -0.4101093f,
  -0.1380821f, +0.0529008f, -0.1370809f, +0.1411116f, -0.1836978f, +0.0230681f, -0.0420320f, -0.1477583f,
  +0.1017363f, -0.1321674f, -0.3558253f, -0.0612754f, -0.0405163f, -0.0758857f, +0.0594406f, +0.0211471f,
  -0.2638582f, +0.2415722f, +0.0295623f, +0.1253736f, +0.2459195f, -0.0712369f, -0.1429437f, -0.1308227f,
  +0.0659722f, +0.1362348f, -0.1831216f, +0.0801453f, -0.0675852f, -0.0479785f, +0.0630670f, +0.1287428f,
  -0.1436034f, +0.1698050f, -0.1485602f, -0.0339215f, -0.2915612f, +0.0075497f, +0.2986386f, +0.3976150f,
  +0.2612222f, +0.2020915f, +0.2313519f, -0.0080302f, -0.2596478f, +0.0780619f, -0.0082586f, +0.2965975f,
  +0.0590549f, +0.1033768f, +0.2539146f, +0.0198456f, +0.0700952f, +0.0346106f, -0.0255378f, +0.1676026f,
  +0.4935682f, +0.0664067f, +0.2144773f, -0.0035795f, +0.0556169f, -0.1712144f, +0.1541511f, +0.6913859f,
  -0.6565256f, +0.0626122f, +0.5760883f, -0.0119502f, -0.7278451f, +0.0160485f, +0.0614017f, -0.7413286f,
  +0.1137841f, +0.0403213f, +0.1613822f, -0.1436112f, -0.0115441f, +0.3119932f, -0.1846507f, -0.1208875f,
  +0.1962162f, -0.3238641f, +0.1504565f, -0.0749324f, -0.2059951f, +0.0385076f, -0.1838750f, +0.6648432f,
  +0.1218155f, -0.0315099f, +0.1554868f, +0.1049619f, -0.2489776f, -0.1577950f, -0.0782191f, +0.1531760f,
  -0.2382277f, -0.0553098f, +0.4368815f, -0.1264787f, -0.2894017f, +0.0107982f, -0.0991052f, +0.2818146f,
  -0.1545136f, -0.0730004f, +0.3091127f, +0.0400950f, -0.0531146f, +0.1103419f, +0.0088478f, -0.0063261f,
  +0.3328937f, -0.1066947f, -0.0055077f, -0.2537479f, +0.0508683f, -0.2379057f, -0.1789763f, -0.1787350f,
  -0.0068078f, -0.2813160f, -0.2972002f, -0.0525351f, +0.2000900f, -0.0234161f, +0.0142216f, -0.1567007f,
  -0.1205465f, +0.0420436f, +0.3223689f, +0.1217133f, -0.2872735f, +0.0559659f, -0.1834137f, +0.1049241f,
  +0.1869638f, +0.3072403f, +0.0802827f, +0.0175147f, -0.1056925f, -0.1980802f, -0.0260404f, -0.0949623f,
  +0.0975915f, +0.2217325f, -0.2485249f, +0.1927104f, +0.2270422f, +0.0418505f, -0.0106031f, -0.1841164f,
  -0.1052225f, -0.1471514f, +0.7862285f, +0.1898605f, -0.3346426f, +0.0450004f, -0.1222257f, +0.2636048f,
  -0.3109809f, +0.0413682f, +0.1160370f, +0.2287837f, -0.7443998f, -0.3265648f, -0.0904556f, -0.0593228f,
  -0.0984286f, -0.1627118f, -0.1625861f, +0.0385129f, -0.6596525f, -0.2578053f, +0.0530756f, -0.0984965f
);

const float biases[4] = float[4](
  +0.1528128f, +0.2105532f, +0.0359799f, -0.0613686f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer49 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0465781f, -0.0549746f, -0.2042360f, +0.1240469f, +0.0369416f, -0.2133217f, -0.0349610f, +0.0555226f,
  -0.1154883f, +0.3478429f, +0.2540743f, -0.1772368f, +0.1847484f, -0.1087357f, +0.0879360f, -0.0553203f,
  -0.0850298f, +0.0345706f, +0.1661763f, +0.0119017f, +0.1107068f, -0.2236336f, +0.2316311f, -0.0179038f,
  +0.2433840f, -0.3706144f, -0.1575042f, -0.1167336f, +0.1304551f, -0.0990400f, -0.1932443f, +0.2768700f,
  -0.1537908f, +0.2044143f, +0.0478382f, -0.2365125f, +0.0199502f, +0.3033080f, +0.1134701f, -0.1586712f,
  -0.2250252f, +0.0686998f, +0.0164672f, -0.1311042f, +0.2201029f, +0.1610486f, +0.2208358f, +0.2958024f,
  +0.2213365f, +0.3177125f, -0.3711261f, -0.0828461f, -0.0262269f, +0.0464041f, +0.1267856f, +0.0335957f,
  +0.2952836f, -0.0567982f, +0.2248488f, -0.2157659f, -0.0722533f, +0.2073687f, -0.0904120f, -0.0615752f,
  -0.1847874f, +0.4053310f, -0.0917827f, -0.0641080f, -0.4280875f, +0.0632302f, +0.1397154f, +0.2545884f,
  +0.1594951f, -0.2875929f, -0.0485334f, +0.1332234f, -0.2462576f, +0.0508910f, -0.2319601f, +0.0676244f,
  -0.0257886f, -0.1747903f, -0.0768961f, -0.1202089f, -0.2295946f, -0.0813792f, -0.2727494f, +0.1318192f,
  +0.0560911f, -0.0800080f, -0.0940329f, -0.0482673f, +0.0563532f, -0.0815191f, -0.0165416f, +0.0783548f,
  -0.6265093f, +0.4220878f, +0.4241360f, -0.3649629f, +0.4013359f, -0.1839256f, +0.2440257f, -0.4929340f,
  -0.4463360f, +0.4841056f, +0.3262199f, +0.1908503f, +0.3362495f, +0.4909703f, +0.2225851f, -0.7976091f,
  +0.0116536f, -0.1744563f, -0.0091592f, +0.0996573f, +0.0963308f, -0.2221077f, +0.0145546f, -0.0679032f,
  +0.0904972f, -0.2505457f, -0.3335304f, +0.2463954f, +0.3556406f, +0.2911289f, -0.0599593f, +0.3268615f,
  -0.1322732f, -0.8899865f, +0.0366811f, -0.3279010f, +0.2120556f, -0.2710651f, +0.0079971f, +0.4093160f,
  -0.2446915f, -0.1078434f, +0.0451376f, -0.2402668f, +0.1823255f, -0.2728218f, +0.2048412f, +0.1463020f,
  -0.1972131f, +0.0112407f, -0.0392579f, +0.1316350f, +0.0931363f, +0.1524756f, +0.1852554f, +0.0120115f,
  +0.0310819f, +0.2880120f, +0.0189364f, +0.0844630f, +0.0263208f, +0.0426042f, +0.2500289f, -0.1517741f,
  +0.2268955f, -0.1134503f, +0.1465213f, -0.0075568f, +0.0716125f, +0.0858527f, +0.0281413f, +0.0899741f,
  -0.0623991f, -0.2252365f, -0.0586215f, +0.1806652f, -0.2451998f, -0.0197102f, -0.1401597f, +0.0417913f,
  +0.3801786f, +0.1766404f, +0.1710004f, -0.4649734f, +0.3609503f, +0.2187435f, -0.0561904f, +0.0076828f,
  +0.0809117f, -0.3541519f, -0.0423169f, -0.2439370f, +0.2034396f, -0.0047724f, +0.2438139f, +0.1413725f,
  +0.0456678f, -0.1549362f, +0.2121573f, -0.0379019f, -0.3960319f, -0.0664373f, -0.0974267f, +0.1257899f,
  +0.0871228f, -0.2975526f, -0.0207781f, +0.4429351f, -0.3350744f, -0.5432752f, -0.1601834f, -0.1671354f,
  +0.1388061f, -0.0165386f, -0.1038368f, +0.3513267f, -0.1577152f, -0.2168242f, -0.0341146f, +0.0933035f,
  +0.0854775f, +0.0324327f, -0.2486212f, +0.0025352f, +0.1113713f, +0.1321292f, +0.2343203f, +0.0889458f,
  -0.0054837f, +0.1841419f, -0.0629413f, -0.0581269f, -0.2348747f, -0.0626442f, +0.0985785f, -0.0816180f,
  +0.1637727f, -0.1342417f, -0.0169781f, -0.0055240f, +0.0877601f, +0.0831457f, +0.1582918f, +0.1377736f,
  +0.1176727f, +0.0096863f, -0.1543460f, +0.1102779f, +0.0307600f, -0.1333683f, +0.0304218f, +0.1557044f,
  -0.0778983f, +0.5668308f, +0.0512255f, -0.6724918f, +0.2298907f, -0.3819317f, -0.4499921f, +0.2277537f,
  -0.1064391f, -0.0768841f, -0.1005605f, -0.0913438f, +0.1445251f, -0.4307716f, -0.0132714f, -0.0059743f,
  +0.0793920f, +0.1193890f, -0.0682892f, +0.0324025f, -0.0670341f, -0.2114474f, +0.0418742f, +0.0445650f,
  -0.3354819f, +0.0310039f, +0.4669768f, +0.0259312f, -0.2886976f, -0.2105664f, -0.1448546f, +0.2408886f,
  -0.0803088f, -0.0149811f, -0.0922276f, -0.1511353f, -0.1730262f, +0.1015450f, -0.0141833f, -0.1490813f
);

const float biases[4] = float[4](
  -0.0488417f, -0.0501735f, +0.1563236f, -0.3169121f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer49 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1778846f, -0.1088265f, -0.0481730f, -0.0462553f, -0.1281192f, -0.0732859f, -0.1869415f, +0.0495867f,
  +0.1789586f, -0.1562961f, -0.1846183f, +0.3993421f, -0.0815442f, +0.0235073f, +0.1452977f, +0.0178020f,
  +0.0325785f, +0.0916087f, +0.0376970f, +0.0216384f, -0.1938335f, +0.2322824f, -0.0132239f, -0.0054406f,
  -0.2366813f, +0.1520741f, +0.0651348f, -0.0635076f, -0.1328383f, -0.0419922f, +0.1003407f, -0.1682238f,
  +0.7039390f, +0.6069630f, -0.2637241f, -0.1909243f, -0.1405373f, -0.1031833f, +0.0297205f, +0.1535373f,
  -0.0372855f, +0.7746716f, -0.2175069f, +0.2699503f, -0.1436215f, +0.2630879f, -0.1473006f, -0.3690987f,
  +0.0844458f, -0.0249890f, -0.0546037f, +0.0372392f, -0.2471203f, -0.0456762f, -0.1305746f, -0.0450671f,
  +0.1647947f, +0.0813980f, -0.0198383f, +0.0985484f, -0.3840610f, -0.0573956f, -0.1612523f, +0.3643353f,
  +0.0486625f, +0.0561887f, +0.0190681f, -0.1182692f, -0.0301576f, +0.2933828f, +0.0616107f, -0.2060604f,
  -0.3725170f, -0.0707005f, +0.3409743f, +0.0302563f, +0.1975082f, +0.1446720f, -0.0348158f, +0.1679653f,
  -0.5317686f, +0.4965207f, +0.2402954f, -0.1673840f, +0.3156381f, -0.1452512f, +0.2189438f, -0.1001086f,
  -0.3805028f, -0.0480467f, +0.2519153f, -0.0060708f, +0.1545915f, +0.0792994f, -0.1802329f, -0.0681904f,
  -0.1898085f, -0.2669722f, +0.0204516f, -0.1198551f, -0.1345639f, +0.0055135f, -0.1595205f, +0.0697007f,
  -0.3150005f, -0.0559784f, +0.2234526f, +0.4903623f, +0.0050477f, -0.1707486f, +0.0161563f, +0.0300952f,
  -0.3119607f, -0.2966282f, +0.0226791f, -0.3949184f, +0.0950496f, -0.0000227f, +0.2840764f, +0.2178529f,
  -0.0381508f, -0.0652706f, +0.1749898f, +0.0121844f, -0.1131819f, -0.1180077f, -0.0182607f, -0.0034816f,
  -0.1620055f, -0.0474599f, +0.3285706f, +0.6647460f, +0.2052494f, -0.3685888f, -0.0585461f, +0.0425976f,
  -0.5383044f, -0.1352640f, +0.2611903f, -0.0650206f, -0.2235167f, -0.1189086f, -0.0366758f, +0.0225809f,
  -0.0834536f, +0.0126401f, -0.0575997f, +0.1071394f, +0.2903985f, -0.2240211f, +0.0257634f, +0.0787442f,
  -0.7419927f, +0.4331104f, +0.0527281f, +0.0096384f, +0.0090209f, -0.2894323f, -0.1300671f, -0.6055803f,
  -0.1001853f, +0.0159962f, +0.0486179f, +0.0722509f, -0.0624917f, -0.1526832f, -0.0079395f, -0.1235677f,
  +0.2454716f, +0.1541774f, +0.0414565f, +0.2261761f, +0.0290524f, -0.2486195f, -0.0684995f, +0.1672142f,
  -0.1528502f, -0.2229499f, -0.2359241f, -1.0260384f, -0.8827204f, -0.6497290f, -0.1361231f, +0.6537529f,
  +0.0174370f, -0.0241309f, +0.0688711f, -0.0955360f, +0.1224086f, -0.0600964f, -0.0994095f, -0.0259859f,
  -0.0764931f, +0.0191369f, +0.1682447f, +0.1505879f, -0.0172561f, -0.1928306f, -0.0218554f, +0.1351349f,
  -0.3019360f, +0.0074823f, +0.2300916f, +0.0191388f, +0.0736582f, -0.0863503f, +0.1146442f, -0.1024708f,
  -0.0637530f, -0.0523190f, +0.0762257f, +0.0545249f, -0.0479415f, -0.1883433f, +0.0051825f, +0.0531337f,
  +0.3388393f, +0.1941527f, +0.0722157f, -0.2891250f, +0.1364752f, +0.0725501f, -0.0366200f, -0.0743379f,
  +0.4219705f, -0.4997829f, -0.1354905f, -0.1348394f, +0.0737802f, +0.0507659f, +0.0304988f, -0.0146863f,
  -0.0791142f, -0.1490773f, -0.0810846f, -0.1165574f, +0.0382521f, -0.1473913f, +0.0903589f, -0.0449520f,
  +0.1712658f, -0.0410675f, -0.3340838f, -0.3724650f, +0.3887451f, -0.2105756f, -0.7763016f, -0.2596016f,
  +0.1253543f, -0.1434871f, -0.1704818f, +0.0344241f, +0.1193558f, +0.1822091f, +0.3109179f, -0.2455903f,
  -0.3908126f, -0.2121409f, +0.2874438f, +0.0162549f, +0.0443458f, -0.0581980f, +0.0252361f, -0.0108007f,
  -0.3879096f, -0.0428390f, +0.1621564f, -0.2418072f, +0.3848672f, -0.0628805f, +0.1011933f, -0.0716909f,
  -0.2188618f, -0.1865226f, -0.0822943f, +0.2049001f, +0.2258317f, +0.1630950f, -0.2827734f, -0.0431728f,
  -0.2778219f, -0.2312162f, +0.3199899f, +0.0348574f, +0.0599895f, -0.2544912f, -0.2572419f, +0.1422868f
);

const float biases[4] = float[4](
  +0.0186230f, +0.0219332f, -0.4890849f, -0.0148377f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer50 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0474895f, +0.0685793f, -0.1619307f, -0.0979166f, -0.1346902f, -0.2001872f, +0.1393660f, +0.1692582f,
  -0.1142998f, +0.0620378f, +0.1934010f, +0.4725639f, +0.2411424f, +0.0121795f, +0.2836104f, -0.0914229f,
  -0.0848158f, +0.0167606f, -0.1648523f, -0.1570913f, +0.0268890f, +0.0679935f, +0.2459626f, -0.1669161f,
  +0.1019680f, -0.0798831f, -0.1498545f, -0.1185334f, +0.1087374f, -0.3148308f, +0.1803205f, +0.1591974f,
  +0.1020145f, +0.0663930f, +0.0162364f, +0.2375687f, -0.2324305f, +0.4417563f, +0.0462656f, -0.2530464f,
  +0.0260066f, -0.4351816f, +0.1793339f, +0.1989162f, +0.1825976f, +0.1313437f, -0.1821322f, -0.0025878f,
  +0.0438623f, -0.0022561f, -0.2565850f, -0.1178233f, -0.1435700f, +0.0930407f, +0.3078267f, -0.0529482f,
  -0.1550160f, +0.0844186f, -0.1964879f, -0.1980389f, -0.1010034f, -0.2542177f, +0.2891224f, -0.1181187f,
  +0.3391988f, +0.3664197f, +0.0222840f, -0.2069033f, -0.1273969f, -0.1232557f, +0.1938696f, -0.1704703f,
  +0.0089042f, -0.2384464f, -0.0414805f, -0.1327977f, -0.1833887f, -0.0910223f, -0.2063525f, +0.2783961f,
  +0.1728597f, -0.2451237f, +0.1591184f, -0.0391194f, -0.0687552f, +0.1337527f, -0.2040128f, +0.2343894f,
  +0.0314572f, -0.1554629f, -0.0377445f, -0.0541432f, -0.0610677f, -0.0073315f, -0.1360367f, +0.0451578f,
  -0.1089622f, -0.0868036f, +0.3706501f, -0.1107617f, -0.8829821f, -0.1380759f, -0.2118298f, +0.1579408f,
  -0.3003029f, -0.6616360f, -0.1819690f, -0.3769620f, -0.7653134f, -0.0376135f, -0.0877037f, +0.2248137f,
  +0.0088396f, -0.1863939f, +0.0499248f, +0.0799529f, -0.1384874f, -0.0220362f, -0.2770908f, +0.1655940f,
  +0.0850037f, +0.0027102f, +0.0691572f, +0.0122005f, -0.1955343f, -0.0176061f, +0.0663580f, -0.0368191f,
  -0.0036011f, +0.0322990f, -0.0409586f, -0.1127704f, +0.0560137f, -0.0230693f, +0.0171521f, +0.5202447f,
  -0.1830694f, -0.0466429f, -0.0324185f, -0.1434934f, +0.0142314f, -0.0609677f, +0.2880597f, -0.1704446f,
  +0.1206304f, -0.2587683f, +0.1991447f, +0.1956483f, +0.0211502f, +0.1355954f, -0.2006363f, -0.1747868f,
  -0.2553942f, -0.2580190f, -0.0788486f, -0.4878159f, -0.0543347f, -0.1647153f, -0.0434346f, -0.1203415f,
  +0.3966983f, -0.3120531f, -0.1214320f, -0.0799703f, +0.1552749f, -0.1135973f, -0.2861418f, +0.0235182f,
  -0.0672885f, -0.0649950f, +0.2651881f, -0.1102229f, +0.0386389f, -0.1159511f, -0.0297754f, +0.0070249f,
  +0.1766777f, +0.1924585f, -0.3979132f, -0.1035712f, +0.1244584f, +0.0502132f, -0.0734327f, -0.1492760f,
  +0.3356220f, -0.2908366f, +0.3274915f, -0.0697885f, -0.2245042f, +0.0912044f, -0.1755512f, +0.3961292f,
  -0.1714829f, -0.0111256f, -0.0564353f, -0.0783697f, -0.0715326f, +0.0923840f, +0.0242615f, +0.1496450f,
  -0.3736732f, -0.1080837f, +0.0503596f, +0.0511343f, +0.0078045f, -0.0058660f, +0.0573189f, +0.1054187f,
  +0.1425056f, +0.2444201f, +0.0740260f, -0.0501226f, +0.2213755f, +0.0141928f, +0.2135571f, -0.1241322f,
  -0.0578390f, +0.0568987f, -0.0729969f, +0.0001550f, -0.0508809f, -0.1055284f, +0.2022143f, +0.0107492f,
  -0.0666436f, -0.3930517f, -0.4267967f, -0.1598825f, -0.1266805f, -0.0798024f, +0.2115091f, -0.0588821f,
  +0.0318857f, +0.2640064f, -0.3701035f, +0.0664142f, -0.1098099f, +0.0126840f, +0.1236933f, +0.0250906f,
  +0.0064682f, +0.0814337f, +0.1044306f, -0.2529463f, -0.4779967f, -0.6451895f, -0.6529253f, -0.0675130f,
  +0.2493263f, +0.6813574f, +0.3079783f, +0.5912679f, +0.2882762f, +0.7131779f, +0.2464290f, +0.0400875f,
  +0.0548008f, +0.0232899f, -0.3729011f, -0.0270029f, +0.0015599f, -0.2177561f, -0.1652070f, +0.1164892f,
  -0.0488770f, +0.0217443f, +0.2553014f, +0.2057472f, -0.2018451f, +0.0741253f, -0.0947163f, +0.0256270f,
  -0.1146116f, +0.0177037f, +0.0566233f, +0.0136808f, +0.0233485f, -0.1911765f, -0.1642617f, +0.1028923f,
  -0.0434196f, +0.1792619f, +0.0445001f, +0.0707612f, +0.0646000f, +0.0331309f, -0.1391100f, +0.1282795f
);

const float biases[4] = float[4](
  -0.0730503f, +0.0507849f, +0.0652844f, +0.0966734f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer50 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0216761f, +0.1271199f, +0.0354095f, +0.0936458f, -0.0292201f, -0.0670045f, -0.0942450f, +0.1076642f,
  -0.1658453f, -0.6967193f, +0.5113571f, -0.0105803f, +0.1336640f, -0.2072670f, -0.1586116f, -0.0272981f,
  -0.0687020f, -0.2056687f, +0.1225448f, +0.1292787f, +0.0959288f, +0.0342611f, -0.0092765f, -0.2098964f,
  -0.0894546f, +0.0164980f, +0.0244823f, -0.2847577f, +0.0139062f, -0.1260734f, -0.2124591f, +0.1388569f,
  +0.2952003f, +0.7865386f, -0.2393270f, -0.7575453f, +0.0381993f, -0.2700157f, +1.2650138f, +0.1399966f,
  -0.1742938f, +0.3070270f, +0.1661656f, -0.0871082f, +0.0724167f, +0.1824751f, -0.2920528f, +0.0318997f,
  -0.1884938f, -0.0732937f, -0.1455113f, -0.0514336f, +0.1585573f, +0.2135527f, +0.2631787f, +0.1098566f,
  -0.1879921f, +0.2662184f, +0.0749983f, +0.0753987f, +0.3149972f, +0.3324709f, -0.2116435f, -0.0444073f,
  -0.0724298f, -0.0005866f, +0.0600244f, -0.1188858f, +0.0357954f, -0.0616269f, -0.6467213f, +0.1139017f,
  +0.0866033f, +0.1160340f, +0.0574749f, +0.0398066f, -0.1375270f, -0.2341650f, +0.1611685f, -0.1561777f,
  -0.0228578f, -0.1736569f, +0.3511693f, +0.0669482f, +0.1105246f, +0.0882699f, +0.0484814f, -0.1909816f,
  -0.3553323f, -0.0754144f, +0.1357348f, +0.1428812f, -0.0394276f, +0.2363427f, +0.0344052f, -0.1632282f,
  +0.0366620f, +0.2001297f, -0.1343750f, +0.1246042f, -0.0297162f, -0.3616477f, -0.3911554f, -0.1518348f,
  +0.0294283f, -0.1445029f, -0.2565441f, +0.0136594f, +0.0574907f, +0.0142908f, +0.0345095f, +0.1362604f,
  -0.4556094f, -0.3263344f, +0.0193235f, +0.0035945f, +0.0438744f, -0.0423534f, -0.1543850f, +0.2877894f,
  +0.0699998f, -0.0275126f, +0.0015071f, -0.1244054f, +0.0180191f, -0.1872460f, -0.0315057f, -0.0660615f,
  +0.0766494f, -0.1465762f, -0.0124855f, -0.0819250f, -0.1530211f, -0.3210135f, +0.1177475f, -0.0722294f,
  +0.0270361f, +0.1228520f, -0.1162222f, -0.1755049f, +0.0149719f, -0.0450876f, +0.3369558f, -0.0617971f,
  +0.0609441f, -0.0145212f, -0.0435028f, -0.2322589f, -0.1688065f, +0.0437426f, -0.1021422f, +0.0934144f,
  +0.1943687f, +0.5814162f, -0.1462346f, +0.1462196f, -0.0733316f, +0.0049678f, -0.2303346f, +0.2464099f,
  +0.4364654f, -0.1508042f, -0.0274319f, -0.0799237f, +0.0169084f, -0.2017157f, -0.0460386f, +0.0897896f,
  -0.0851706f, -0.3247956f, +0.1198643f, -0.0414122f, +0.0968777f, +0.1578489f, +0.4854276f, +0.0478555f,
  -0.2162491f, -0.4928404f, -0.2271131f, +0.2206629f, +0.0388440f, +0.1892088f, -0.0795688f, -0.3380577f,
  +0.3058732f, -0.0760267f, -0.0034387f, -0.1581953f, -0.0728181f, -0.1495199f, -0.1325623f, +0.5773018f,
  +0.1790610f, -0.0714527f, +0.1129580f, -0.0826834f, -0.1419426f, -0.0789252f, +0.0828233f, -0.1464598f,
  -0.0130692f, -0.0570222f, -0.1885168f, -0.0392532f, -0.1678012f, -0.3027289f, +0.2585467f, -0.1786636f,
  +0.3198653f, +0.0577014f, -0.1167877f, -0.2248750f, +0.0948151f, -0.1744148f, +0.2443442f, -0.2681986f,
  +0.0408057f, -0.1219770f, -0.2259544f, +0.1088637f, +0.1049947f, +0.1064556f, +0.0752923f, -0.2412455f,
  +0.1826678f, +0.7139355f, -0.3637922f, -0.0150267f, -0.1634882f, +0.1366852f, +0.3103665f, -0.2138918f,
  +0.0226194f, +0.2021422f, -0.3846395f, +0.0461676f, +0.1297549f, -0.0905774f, +0.1347863f, +0.0242412f,
  -0.2571139f, -0.1476502f, -0.1579726f, +0.0315637f, +0.1278885f, +0.1936538f, +0.1689230f, +0.2450484f,
  +0.2566347f, -0.3259538f, +0.5666698f, -0.5733946f, +0.2138089f, +0.1095305f, -1.2877033f, +0.0433900f,
  -0.3245422f, -0.3551207f, +0.0500368f, -0.0968603f, +0.2726557f, +0.0825242f, +0.0903590f, +0.0024092f,
  +0.0203649f, -0.0086455f, -0.2076047f, +0.0530980f, -0.0995074f, +0.0416657f, +0.0781770f, -0.0580416f,
  +0.0546837f, +0.1257999f, +0.0580855f, +0.1002125f, +0.1795302f, -0.1045079f, +0.4405106f, -0.2560403f,
  +0.0320012f, +0.2126125f, -0.0317775f, -0.0297533f, -0.0708803f, +0.0407400f, -0.0533031f, -0.0205300f
);

const float biases[4] = float[4](
  +0.1517821f, +0.0780526f, +0.0464367f, +0.0000216f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer51 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.2562381f, -0.0135258f, +0.1661535f, -0.0519058f, +0.0641375f, -0.2126460f, +0.0555484f, +0.0298875f,
  -0.1134413f, +0.2181028f, +0.1081107f, -0.1341366f, +0.2859350f, -0.1359250f, +0.0585033f, +0.2995086f,
  -0.2682124f, +0.0039024f, -0.0143304f, +0.2148451f, -0.1311684f, +0.0081362f, -0.1924811f, -0.1541094f,
  +0.1678979f, +0.1301407f, -0.2178747f, -0.1286005f, +0.2206648f, -0.2652009f, +0.0026069f, -0.2583984f,
  -0.2550026f, +0.0238852f, +0.3749505f, -0.7367451f, +0.1085036f, +0.2852627f, -0.5445285f, +0.6484497f,
  -0.2549179f, -0.0681856f, -0.0675822f, +0.0917742f, +0.0753820f, +0.1314938f, -0.3957717f, +0.0461864f,
  +0.1156814f, +0.0328031f, +0.0499189f, -0.1034345f, +0.2877614f, +0.0733401f, +0.0284713f, +0.1726955f,
  -0.1511910f, +0.0446228f, +0.2714433f, -0.0181406f, +0.3254950f, -0.0416018f, +0.2279761f, -0.1366711f,
  -0.1742815f, +0.0842070f, -0.0417328f, -0.0827845f, +0.0092917f, -0.0800231f, -0.0504996f, +0.1080602f,
  +0.2507991f, +0.2884660f, +0.0613684f, -0.0298366f, +0.0712760f, +0.0519069f, +0.0386417f, -0.1336397f,
  -0.3448595f, -0.5003678f, -0.3523778f, +0.2850929f, +0.1910013f, +0.2038528f, +0.3419727f, +0.1035028f,
  -0.3349377f, +0.7728912f, -0.0078024f, -0.0000303f, -0.5440616f, -0.1293070f, +0.1210927f, -0.0641706f,
  -0.4653691f, -0.1519913f, +0.0121957f, -0.0337760f, -0.0333447f, +0.2736575f, -0.1419982f, -0.1126570f,
  +0.1867825f, +0.0060239f, -0.4980016f, +0.2737243f, +0.2547939f, -0.0898798f, +0.3235311f, -0.5945390f,
  -0.0052194f, +0.3527298f, +0.0886314f, -0.2198501f, -0.2536952f, -0.0177205f, +0.0386007f, +0.4302811f,
  -0.0233943f, -0.0276110f, +0.0693729f, +0.1214459f, -0.0083157f, -0.0996705f, -0.0302494f, -0.0228470f,
  -0.0015244f, +0.1330619f, +0.0056400f, +0.2894843f, +0.0026065f, +0.0171548f, -0.1955172f, +0.2753592f,
  +0.0291583f, -0.1437969f, +0.2162645f, +0.0324892f, -0.2449828f, -0.1759780f, +0.1470901f, +0.0827954f,
  -0.0225435f, +0.0251715f, +0.0815124f, +0.0481161f, -0.0795033f, -0.0509481f, +0.0960501f, -0.0531795f,
  -0.2498484f, -0.0342989f, +0.0341782f, +0.3186547f, -0.1913388f, -0.2615297f, +0.0957675f, -0.1763150f,
  -0.0301615f, +0.1368797f, +0.0580840f, +0.2969458f, -0.2514004f, -0.2395159f, -0.0141248f, -0.2497652f,
  -0.1431676f, -0.1697955f, -0.1990825f, +0.1093187f, -0.0216353f, -0.1962554f, +0.0403238f, -0.0167471f,
  +0.1939110f, +0.4243529f, +0.2879665f, -0.1362729f, +0.0026258f, -0.4467873f, -0.4132940f, +0.1496119f,
  -0.0567919f, -0.1953265f, -0.1863166f, -0.3918549f, +0.3799483f, -0.2429973f, -0.0352637f, -0.2224800f,
  +0.2903561f, -0.0210367f, -0.1839823f, +0.1995272f, -0.0392310f, -0.2063944f, +0.0632115f, -0.0343101f,
  -0.2241537f, -0.3997971f, +0.3904544f, +0.4940235f, -0.1376175f, -0.3150779f, -0.0735511f, +0.3650256f,
  +0.0144124f, -0.6516238f, -0.0092287f, -0.3956062f, -0.0850535f, -0.3189763f, +0.2912490f, -0.3115367f,
  -0.8141414f, -0.0280877f, -0.2011795f, -0.1426000f, +0.0170383f, -0.0090727f, +0.1197176f, -0.4237657f,
  +0.3538008f, -0.0206283f, +0.0337020f, +0.1144394f, -0.3757893f, +0.2651646f, +0.1921715f, +0.1532118f,
  +0.0416727f, -0.1355031f, -0.0478204f, +0.0497464f, +0.1158575f, +0.0348709f, -0.0219736f, -0.0109217f,
  -0.2037410f, +0.4886826f, -0.2687238f, -0.9835352f, -0.0208553f, -0.0548039f, -0.2577915f, +0.0053888f,
  +0.2190228f, -0.0329791f, -0.0461138f, +0.2342256f, +0.8058920f, +0.2894875f, +0.0459928f, -0.0534809f,
  -0.2278713f, +0.1342600f, +0.0890233f, -0.0808739f, -0.0893596f, +0.0444925f, -0.0387156f, +0.1918824f,
  -0.1428395f, +0.0754184f, +0.2858154f, +0.1565480f, -0.0380646f, -0.5250691f, +0.1525543f, +0.1054667f,
  +0.0267766f, +0.1777543f, +0.0302450f, +0.0074660f, -0.2348441f, -0.0879437f, +0.0045102f, +0.0288435f,
  +0.0008865f, +0.0205175f, -0.0766414f, +0.1075797f, -0.0476592f, +0.0201940f, -0.0853438f, -0.1262311f
);

const float biases[4] = float[4](
  -0.0703038f, -0.0315632f, -0.5297768f, -0.1561453f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer51 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0082368f, +0.1073116f, -0.0965842f, +0.1220067f, -0.0607384f, -0.0912022f, +0.2095646f, +0.0228674f,
  -0.0085206f, +0.3489507f, +0.4683525f, -0.0927741f, -0.0136395f, -0.0564300f, -0.0634365f, -0.2330105f,
  -0.0990990f, -0.1825761f, +0.0833322f, +0.0501494f, -0.0217639f, -0.2149031f, +0.1747257f, -0.0176777f,
  +0.2607796f, -0.0220069f, -0.2378073f, +0.3055146f, -0.1539546f, -0.2149840f, -0.0487724f, +0.0262340f,
  +0.8568310f, -0.0111734f, +0.4313073f, +0.0132112f, -0.2219518f, +0.0580399f, -0.2498593f, -0.2661997f,
  -0.3216105f, -0.1944070f, +0.0248579f, -0.1136003f, -0.2922234f, -0.0014200f, +0.0518746f, -0.2003341f,
  +0.0339893f, -0.0291936f, -0.1305729f, +0.0336918f, +0.1156116f, +0.0602373f, +0.0024247f, +0.0047270f,
  -0.0230966f, -0.3274314f, +0.2862168f, +0.0485390f, +0.0393337f, -0.1019281f, +0.0078824f, -0.0693481f,
  -0.0809222f, -0.0938859f, -0.0624905f, -0.0089405f, +0.3272902f, -0.0336983f, -0.0148532f, +0.1120822f,
  +0.2207315f, +0.0477752f, +0.0908274f, -0.0333753f, -0.3004796f, -0.0316887f, -0.1492833f, -0.0569498f,
  +0.4671942f, +0.0115629f, -0.0021516f, +0.0159098f, -0.2611806f, -0.0536659f, -0.3413767f, -0.1831533f,
  +0.0399249f, -0.1899213f, -0.1185724f, -0.1576178f, -0.1638971f, -0.0793512f, -0.2032077f, -0.0576998f,
  +0.3685102f, +0.0199737f, -0.2852025f, +0.2513133f, +0.2786489f, +0.0296294f, +0.0894738f, +0.0344000f,
  +0.5344138f, +0.1907437f, +0.1990140f, +0.0957463f, +0.5459869f, +0.1087293f, +0.5976316f, -0.0216822f,
  -0.1870054f, +0.1018801f, +0.1452240f, -0.1424876f, -0.0453060f, -0.1232584f, +0.5506950f, +0.1239695f,
  -0.2213449f, -0.0504449f, +0.2346570f, -0.0590591f, -0.1795606f, +0.1614639f, -0.1778997f, +0.3523723f,
  +0.1024197f, -0.0284447f, -0.0435198f, +0.1915030f, +0.0428680f, -0.0057435f, -0.1182734f, +0.0481359f,
  -0.1133926f, -0.2376091f, -0.0205974f, -0.0573129f, -0.1397815f, -0.0992316f, +0.1250356f, -0.0153059f,
  -0.0177201f, -0.0681352f, -0.1549185f, +0.1402566f, +0.3186236f, -0.0331146f, +0.0410289f, +0.1500988f,
  +0.0109251f, +0.1668677f, -0.0186088f, -0.0442762f, +0.3371700f, +0.3507189f, +0.1791899f, +0.1612553f,
  +0.2080550f, +0.1790053f, +0.0100392f, -0.0072675f, +0.0305737f, -0.0256035f, +0.1394412f, +0.0200416f,
  +0.1701022f, +0.0640778f, -0.0546256f, +0.0545725f, -0.0363469f, +0.3149978f, +0.1194199f, +0.3592876f,
  -0.3299297f, -0.2069023f, -0.1505426f, -0.1455275f, +0.0547692f, +0.4582137f, +0.4279141f, +0.1580115f,
  +0.1053659f, -0.0467195f, -0.5062703f, -0.3681888f, -0.1293139f, -0.1792038f, -0.3643382f, -0.1389859f,
  -0.0205825f, +0.0023122f, -0.1379282f, +0.1005347f, -0.3603128f, -0.0537352f, -0.1456992f, +0.0850021f,
  +0.2923652f, -0.0405747f, -0.0346593f, -0.1164690f, -0.0382006f, +0.1997880f, -0.0009058f, -0.2006422f,
  +0.2286782f, +0.0170774f, -0.2507095f, -0.2864120f, -0.0869836f, -0.3145873f, +0.1792031f, -0.3025576f,
  +0.0492376f, +0.2739077f, +0.1673343f, -0.2381334f, -0.0948172f, -0.0387792f, +0.1329269f, -0.1880059f,
  +0.0596451f, +0.0533983f, -0.0409650f, -0.3827528f, -0.2306174f, -0.1231388f, -0.5493906f, +0.5329003f,
  -0.1087890f, +0.0784618f, +0.1565804f, -0.1979170f, -0.0808584f, +0.0114686f, -0.0906388f, +0.1340137f,
  -0.2493582f, +0.2268006f, +0.0776983f, -0.0622203f, +0.0448076f, -0.1054197f, +0.2469219f, +0.0534162f,
  -0.0610650f, +0.3120750f, -0.4415357f, -0.0781390f, +0.0315738f, -0.3989230f, -0.4247169f, +0.4465837f,
  -0.1005240f, +0.3466217f, -0.2410192f, +0.3052150f, +0.1783844f, +0.1069569f, -0.3037104f, -0.0355155f,
  +0.0875283f, +0.1358900f, +0.0144642f, -0.1069083f, -0.1340064f, -0.0657703f, -0.0110763f, +0.0588745f,
  +0.0146638f, +0.3090160f, -0.0378067f, -0.2830728f, -0.0161794f, +0.2252940f, +0.0802014f, -0.1122835f,
  -0.1068460f, +0.2014791f, +0.0631364f, -0.0189756f, +0.2038637f, +0.0967604f, +0.1031582f, +0.0376039f
);

const float biases[4] = float[4](
  +0.2739267f, +0.1978350f, -0.0985925f, +0.0178426f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer52 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1001995f, -0.1913875f, -0.6118038f, -0.0034938f, +0.0408389f, +0.1469508f, +0.0577333f, -0.2018904f,
  +0.1087228f, -0.0000637f, +0.4775229f, +0.0685127f, +0.0114276f, -0.1008027f, -0.0691339f, -0.0434915f,
  -0.0769945f, -0.0406937f, -0.1785465f, -0.1569995f, -0.3638538f, +0.0700566f, -0.0386263f, +0.1674807f,
  +0.2697991f, -0.3371688f, -0.1453609f, -0.0542561f, +0.3528170f, +0.2306785f, -0.0129989f, +0.0378970f,
  +0.1013732f, -0.0417511f, -0.2625108f, -0.1967692f, -0.6030284f, +0.0012466f, +0.4236720f, +0.4747422f,
  -0.2058163f, -0.0332711f, +0.5342135f, +0.1115307f, -0.1680958f, -0.1665875f, -0.1071048f, +0.2836944f,
  +0.2455960f, -0.1579701f, +0.0531897f, -0.0092710f, +0.0748784f, +0.0953805f, -0.1199207f, +0.0769223f,
  -0.2099301f, -0.0724790f, +0.1723206f, +0.1487363f, +0.1167181f, -0.1407220f, -0.0198014f, -0.0373043f,
  +0.2339068f, +0.0167048f, -0.0556416f, -0.4116199f, +0.0663414f, -0.1303080f, +0.2707812f, +0.1188823f,
  +0.0313376f, +0.1858060f, +0.9368831f, -0.0753349f, +0.2670231f, +0.2187007f, +0.1902265f, +0.2126859f,
  -0.3279032f, +0.1121508f, +0.2864201f, -0.2516811f, +0.2767586f, +0.0004767f, +0.0378921f, -0.0231833f,
  -0.1003463f, +0.0983496f, +0.0876449f, +0.2533539f, +0.0557873f, -0.0848006f, -0.0769879f, -0.0150206f,
  -0.0445088f, -0.0760056f, -0.0700810f, -0.0804874f, +0.3180614f, +0.0777072f, +0.3146368f, +0.2200933f,
  -0.0546492f, -0.0868557f, -0.1991582f, +0.3551889f, +0.2184236f, +0.0032459f, +0.5056470f, -0.2280147f,
  +0.0773321f, +0.1367323f, +0.1302022f, +0.5044395f, +0.1198774f, -0.2336294f, -0.0616032f, -0.0724340f,
  +0.3033756f, +0.2872189f, +0.1095871f, +0.1674212f, +0.0998999f, +0.2523400f, +0.0340956f, +0.3712411f,
  -0.3979215f, -0.1096702f, +0.1217582f, -0.1995102f, -0.0278582f, +0.0129668f, -0.0141343f, +0.1215061f,
  -0.0584715f, +0.0562024f, -0.0952108f, +0.3901848f, +0.1213781f, -0.0650335f, +0.0584765f, -0.1706821f,
  -0.0209723f, -0.0288050f, +0.1980296f, +0.0279841f, +0.0425472f, +0.1569499f, -0.0031299f, -0.0196649f,
  -0.0642148f, -0.1873173f, +0.0364506f, +0.0635086f, -0.1768930f, +0.0017779f, -0.2881768f, -0.0809659f,
  -0.3560225f, -0.1238966f, -0.0799417f, +0.0217996f, +0.1763649f, -0.2137193f, -0.1483550f, -0.1563726f,
  +0.1006114f, -0.1043055f, +0.0627159f, +0.0247377f, -0.1881495f, -0.0349167f, -0.0212729f, +0.1629294f,
  +0.0874213f, +0.3909355f, -0.3151795f, +0.0922467f, -0.4119066f, -0.2400767f, +0.3837966f, +0.1958449f,
  -0.1304746f, -0.0883433f, +0.0419631f, -0.1897293f, +0.2420698f, +0.1972022f, -0.0378206f, -0.3374438f,
  +0.2155010f, -0.0800192f, -0.2225330f, -0.0355238f, +0.0629981f, +0.2551116f, -0.2307153f, -0.0408562f,
  -0.0335531f, +0.1711642f, -0.0172046f, +0.2034552f, -0.1231459f, -0.1179194f, -0.0873073f, +0.1664844f,
  -0.2572470f, -0.0801748f, -0.2220011f, -0.1013069f, +0.0788906f, +0.1573007f, +0.1025070f, -0.3529866f,
  +0.0739296f, -0.1485644f, +0.7490326f, -0.0253257f, +0.0940608f, -0.1490652f, -0.0350632f, -0.0902351f,
  -0.0553096f, +0.0790822f, -0.2898246f, -0.2372961f, +0.0407223f, -0.1622145f, +0.2341622f, +0.0085697f,
  +0.0154485f, +0.1249134f, -0.0874987f, +0.2392105f, -0.0781878f, -0.1499086f, -0.1071121f, +0.0726606f,
  -0.1784835f, +0.0803906f, +0.0078667f, -0.0755141f, +0.1219328f, -0.3260894f, +0.1021165f, -0.0278405f,
  +0.0161595f, -0.0490736f, -0.2289588f, +0.8524593f, -0.2263805f, -0.0146143f, +0.5322962f, -0.4769953f,
  +0.0294012f, +0.0400724f, -0.0164538f, -1.0222042f, -0.2148790f, -0.0736721f, -0.0339651f, -0.0175676f,
  -0.0082786f, -0.0461734f, -0.1199660f, +0.1472528f, -0.1722967f, +0.0622605f, +0.0422802f, +0.1526987f,
  +0.0479852f, -0.0707159f, -0.2177005f, +0.0383707f, -0.0939554f, +0.1556795f, +0.0101510f, +0.2695337f,
  +0.1134350f, +0.0700439f, +0.0206205f, +0.0742305f, -0.0380666f, -0.0436992f, -0.0760920f, +0.2266940f
);

const float biases[4] = float[4](
  -0.2315236f, +0.1184840f, -0.0195311f, -0.0482744f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer52 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1197116f, +0.0281215f, -0.0989269f, -0.0083777f, -0.1385608f, +0.0704115f, +0.0464118f, -0.1196284f,
  -0.1409683f, -0.0420038f, -0.0803640f, -0.1846471f, +0.0802757f, +0.0232438f, +0.0250124f, -0.1240639f,
  +0.0161617f, -0.0646669f, +0.2056984f, +0.1409865f, -0.1082343f, -0.0134678f, +0.0614699f, +0.0450813f,
  +0.2081091f, +0.3173852f, -0.7540953f, -0.0833916f, +0.1775383f, +0.0955471f, +0.1202508f, -0.0859007f,
  -0.0641892f, +0.2228191f, -0.6632851f, +0.4959315f, +0.3617407f, -0.2504769f, +0.1622980f, -0.0962169f,
  -0.2117795f, +0.1301547f, +0.0019627f, +0.1296602f, +0.0178566f, -0.1062104f, +0.1731137f, -0.0342514f,
  +0.2798811f, -0.1676960f, +0.0143322f, +0.0408913f, +0.0599204f, +0.0088969f, +0.0131437f, +0.0566154f,
  -0.1266092f, +0.0691554f, -0.0821867f, -0.3175117f, +0.3217490f, +0.1487006f, -0.0054143f, +0.0005231f,
  -0.1486339f, +0.0212404f, +0.1520126f, -0.2240926f, -0.0675915f, -0.1761873f, +0.1094790f, +0.0085596f,
  -0.1507199f, -0.1213835f, +0.3326329f, +0.0147753f, -0.0664032f, -0.1479562f, -0.0427932f, +0.1282270f,
  +0.2879930f, +0.0554543f, +0.1084733f, -0.0973829f, -0.2324880f, +0.1095675f, -0.0377543f, +0.2690035f,
  -0.1021079f, +0.0331196f, +0.2697392f, +0.0809792f, -0.2672482f, -0.1717797f, -0.0370817f, +0.1658201f,
  -0.1412943f, -0.0548160f, +0.2761668f, -0.0487940f, +0.0117323f, -0.2614159f, +0.0746743f, -0.2006732f,
  -0.3552181f, +0.1847265f, +0.2569511f, +0.5229664f, +0.0747557f, +0.1864609f, -0.0374947f, +0.1507639f,
  +0.2462226f, +0.0826427f, +0.0923666f, -0.3414579f, -0.0063246f, -0.1930967f, -0.0273646f, +0.2139248f,
  -0.2731565f, -0.2934832f, +0.1095371f, +0.1195545f, +0.0688450f, +0.0122323f, -0.0929300f, +0.1744576f,
  +0.0450308f, +0.1058295f, +0.0627805f, -0.0323359f, +0.0339916f, +0.0973752f, -0.0040013f, +0.2672658f,
  +0.3240619f, +0.0522265f, -0.0148646f, -0.0207829f, +0.1051885f, +0.0757469f, +0.0027495f, +0.1945750f,
  +0.1612491f, +0.0153492f, -0.4066255f, -0.0234818f, +0.3318474f, +0.1791810f, +0.1955623f, +0.0209227f,
  -0.1781589f, -0.0860350f, +0.3355022f, +0.0323618f, +0.2541262f, -0.0553616f, -0.0674398f, -0.1045287f,
  -0.1866512f, -0.0267588f, +0.0040894f, +0.0446173f, +0.0865895f, -0.0322933f, -0.0373978f, +0.0674367f,
  +0.4302004f, -1.1556209f, -0.1136024f, -0.0661322f, +0.0309059f, +0.1266540f, -0.0534578f, +0.3485110f,
  +0.4650728f, +0.3001772f, -0.1037021f, -0.2964142f, -0.1821208f, -0.1987061f, +0.1587270f, +0.4506190f,
  +0.0076922f, +0.0356217f, -0.0949754f, -0.5066233f, +0.1403284f, -0.0649508f, -0.3473412f, -0.2337704f,
  +0.2018912f, -0.2851446f, +0.0167508f, +0.0026756f, -0.1567683f, +0.2933627f, +0.0452843f, +0.1809945f,
  -0.1090798f, +0.0267727f, +0.0506982f, +0.1739937f, -0.0006463f, +0.4975943f, +0.1622269f, +0.0980986f,
  -0.1151425f, -0.0942286f, +0.0127182f, +0.0017318f, +0.0341214f, +0.2164209f, +0.0341887f, +0.0438255f,
  +0.1597841f, +0.2260464f, +0.4209488f, -0.0007401f, -0.1244752f, +0.0951933f, +0.1493288f, -0.1288870f,
  -0.0622400f, +0.1280495f, -0.5972158f, -0.1238833f, -0.0321716f, -0.3021137f, +0.0277000f, +0.0424961f,
  +0.1689087f, +0.0040736f, +0.0034517f, +0.1208167f, +0.0670699f, -0.0066138f, -0.0998559f, +0.1032140f,
  -0.3887749f, +0.2491664f, +0.1072607f, -0.0703179f, -0.1914355f, +0.2907215f, +0.1529941f, -0.0456044f,
  -0.3489480f, -0.4929055f, -0.5561758f, -0.4715120f, +0.1881884f, +0.0845302f, -0.4999843f, -0.1452323f,
  -0.0619107f, +0.0075457f, +0.0224647f, +0.2383005f, -0.0151745f, +0.1175989f, -0.3064704f, +0.1145127f,
  +0.2970629f, -0.0095611f, +0.1056041f, -0.1023077f, +0.0704139f, +0.3864154f, +0.1445786f, -0.0532721f,
  -0.4039780f, -0.0708707f, +0.0150606f, +0.0598901f, +0.2446570f, +0.3460378f, +0.0632644f, -0.1633932f,
  -0.0838140f, -0.0660517f, -0.0690532f, -0.2933180f, +0.1245814f, +0.1467512f, +0.1532106f, +0.1923574f
);

const float biases[4] = float[4](
  +0.4081150f, +0.0120840f, -0.0230424f, +0.0657031f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer53 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1613532f, +0.0002552f, +0.0378553f, +0.0740922f, -0.0668769f, -0.0921695f, -0.0552171f, -0.0786174f,
  -0.1920159f, +0.0208677f, +0.0464642f, -0.1538798f, +0.0489112f, -0.0682334f, +0.0396747f, -0.2022159f,
  -0.0911046f, -0.3050067f, +0.2491335f, +0.0840283f, -0.1257878f, +0.2814502f, +0.0576118f, +0.2628707f,
  -0.0077011f, +0.1249587f, +0.1379445f, +0.0073671f, +0.0637456f, +0.0132725f, +0.0761877f, +0.0652997f,
  +0.2739587f, +0.4743218f, -0.7018774f, -0.6156411f, +0.0017055f, -0.0759965f, -0.1442496f, -0.3057035f,
  +0.0782110f, +0.4117663f, -0.0358151f, +0.3679372f, +0.2154984f, +0.2116325f, -0.1512381f, -0.0376862f,
  -0.0736455f, -0.0377901f, +0.0341091f, +0.0613344f, -0.0098780f, -0.0379870f, +0.0067901f, +0.1959222f,
  -0.0822002f, -0.0050984f, -0.0199393f, -0.0238084f, -0.0052487f, +0.0493478f, +0.1296220f, +0.0110895f,
  +0.0329697f, -0.0587689f, -0.0090138f, -0.0693536f, +0.0192865f, -0.0182792f, +0.0414517f, -0.0441168f,
  -0.3161696f, -0.2639261f, +0.1718715f, -0.1570964f, -0.1098499f, -0.0065538f, -0.0197093f, -0.0177820f,
  -0.4762222f, -0.2512278f, -0.2282498f, +0.0719339f, +0.1619982f, -0.0632942f, -0.0936661f, +0.2228945f,
  +0.1818216f, -0.0189070f, +0.0740095f, +0.0597923f, +0.0934491f, +0.0700813f, -0.1992540f, +0.1598523f,
  -0.3995895f, -0.3114934f, +0.1826542f, -0.3981761f, -0.3629411f, +0.2236508f, -0.2023837f, -0.3224255f,
  +0.0872312f, -0.3255950f, -0.1147238f, +0.0635466f, +0.0698979f, -0.1730533f, -0.3347340f, -0.0327499f,
  -0.1480619f, -0.1265547f, -0.2320782f, +0.3478629f, +0.0783473f, +0.2605500f, -0.2874477f, -0.0788704f,
  -0.0881404f, -0.2595709f, +0.0267662f, -0.1325165f, -0.3406601f, +0.0874060f, -0.1793088f, -0.5144684f,
  +0.0971553f, -0.0092972f, -0.2239677f, +0.3778616f, -0.1303411f, +0.0625182f, -0.2594579f, -0.3794515f,
  +0.0298785f, +0.0572313f, +0.1768131f, +0.3260573f, +0.0366851f, +0.0137735f, -0.4481267f, +0.0865269f,
  +0.0936780f, +0.0897158f, +0.0335386f, -0.0306115f, +0.1263541f, +0.1130570f, +0.0453091f, +0.0218333f,
  -0.2198715f, +0.0102786f, -0.0228338f, +0.3250237f, -0.1707037f, -0.1270974f, +0.2149749f, -0.0951517f,
  -0.0732194f, +0.0957216f, +0.0779076f, +0.1295403f, -0.0636563f, -0.0478968f, -0.0474943f, -0.1303465f,
  -0.5776099f, -0.0923828f, -0.0791347f, +0.0658852f, +0.3423142f, +0.0006436f, +0.2368324f, +0.1741726f,
  -0.0374461f, +0.7465163f, +0.1375622f, +0.2207255f, -0.0311269f, -0.2170525f, +0.2087148f, +0.1622640f,
  -0.1927062f, -0.1172567f, +0.0264323f, -0.1687478f, +0.0294425f, -0.1906090f, -0.1757772f, -0.1352520f,
  +0.0708019f, +0.1254733f, -0.0360471f, -0.0289311f, +0.0329152f, -0.0471208f, +0.0062453f, -0.0189710f,
  -0.2930256f, +0.0140666f, +0.3380834f, +0.5503994f, -0.4082590f, -0.0586286f, -0.2379659f, +0.6447076f,
  -0.0397542f, -0.2688866f, +0.0431961f, -0.1946008f, -0.3079312f, +0.0798900f, -0.0889034f, -0.4119253f,
  -0.0033948f, -0.0759827f, -0.0045153f, +0.0227501f, -0.0688725f, -0.0207707f, -0.0533144f, -0.0011007f,
  +0.3023559f, +0.1476069f, +0.3561879f, -0.2112544f, -0.1449939f, +0.2456539f, -0.0869199f, +0.0452452f,
  +0.3629675f, -0.1337584f, +0.0744169f, +0.0984449f, -0.2016457f, +0.1658366f, +0.1093289f, +0.2105159f,
  +0.0992526f, -0.0493493f, +0.1080175f, -0.0161827f, -0.2241113f, +0.0374657f, -0.0712512f, -0.0712928f,
  -0.2051493f, -0.2190487f, +0.3019023f, -0.1411432f, +0.0283987f, +0.0714894f, -0.0410247f, -0.1331764f,
  +0.4147689f, -0.0796468f, +0.0889637f, +0.8127663f, +0.3515188f, +0.2274680f, -0.1520510f, -0.4878254f,
  +0.1098554f, -0.0771211f, +0.0257116f, +0.0501309f, -0.0562605f, -0.0700029f, -0.0348226f, -0.0199217f,
  +0.1426139f, +0.0078240f, +0.1540428f, -0.0099117f, -0.0413680f, -0.0234143f, -0.0101102f, -0.1627228f,
  +0.1032980f, +0.1114116f, +0.0046910f, -0.0410051f, +0.0235084f, +0.1911419f, -0.1019047f, -0.0573058f
);

const float biases[4] = float[4](
  -0.0003990f, -0.0234104f, -0.0418478f, -0.7298037f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer53 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0489725f, -0.0153164f, -0.0476350f, -0.0991713f, +0.0111614f, -0.1338364f, -0.1948543f, -0.0762897f,
  -0.2521521f, -0.1145159f, -0.3492583f, +0.1477724f, +0.0927693f, +0.0919602f, +0.1359324f, +0.2775216f,
  +0.0668172f, +0.2081879f, +0.0533987f, -0.0210443f, -0.1077061f, +0.1243197f, -0.0890907f, -0.1470848f,
  +0.3058910f, +0.3227157f, +0.0226869f, -0.1854984f, +0.2393511f, +0.1459062f, +0.0663236f, -0.1351341f,
  +0.3010424f, +0.0498201f, -0.1421729f, +0.2674954f, +0.3298126f, -0.0169884f, +0.4160897f, +0.3225785f,
  -0.0297965f, +0.0906632f, +0.0115198f, +0.0543226f, +0.1170622f, -0.0585422f, +0.2208496f, -0.2067185f,
  +0.2458730f, +0.0212371f, -0.3324238f, +0.1541073f, -0.0546616f, +0.0135121f, -0.1237721f, -0.0579340f,
  +0.1875461f, -0.0395360f, +0.0188301f, -0.1411616f, -0.1445616f, +0.0367937f, -0.0454444f, +0.1820010f,
  -0.1506491f, -0.1428286f, +0.0214714f, -0.0205586f, -0.0906977f, +0.2264236f, -0.1680185f, -0.0580010f,
  -0.1116077f, -0.0337284f, -0.0515270f, +0.1924209f, -0.1624002f, -0.1877356f, +0.0045007f, -0.0782017f,
  +0.0512809f, +0.2540843f, +0.0275460f, +0.2973059f, -0.4383735f, -0.1907843f, +0.0597760f, -0.2258895f,
  -0.0542543f, +0.0491837f, -0.0111311f, +0.1220461f, +0.0789756f, -0.0767982f, -0.0429502f, -0.1267881f,
  +0.3807582f, +0.2270674f, -0.0368832f, +0.3351718f, -0.2403723f, -0.4190322f, +0.0220638f, -0.0933439f,
  -0.1709700f, +0.6573193f, -0.4911960f, -0.9859458f, +0.1453784f, -0.8335477f, -0.6881639f, -0.0968430f,
  +0.0025243f, -0.0556785f, +0.0104319f, -0.0759416f, -0.2467912f, -0.2394010f, -0.0289750f, -0.0112901f,
  +0.2664132f, -0.1638914f, -0.2141091f, +0.5066333f, -0.3566761f, -0.3448732f, -0.0464085f, +0.2408260f,
  -0.0597623f, -0.3480138f, +0.1639578f, -0.0084473f, -0.3863578f, -0.6083106f, +0.4404536f, +0.1590369f,
  +0.1686828f, -0.2695362f, -0.0235297f, -0.0423297f, -0.0519141f, -0.0953282f, +0.1858653f, -0.2262162f,
  +0.1883700f, -0.0567466f, -0.1404322f, +0.1087933f, -0.2599329f, -0.0442042f, -0.0880342f, -0.0899271f,
  -0.0147445f, -0.0830562f, -0.2256794f, -0.1225094f, +0.1974548f, +0.1606557f, -0.1803737f, +0.1079602f,
  -0.0623028f, +0.0455770f, -0.2118557f, -0.0048441f, +0.0445858f, -0.0777671f, -0.0393641f, -0.0985260f,
  -0.1176035f, -0.0452210f, -0.0809572f, +0.0184395f, -0.0710086f, +0.0075734f, +0.0488965f, -0.0726807f,
  +0.0028790f, -0.2263040f, -0.5266194f, -0.1221131f, +0.1240971f, -0.0413952f, -0.0853044f, -0.0565332f,
  -0.2561933f, +0.2516908f, +0.0178214f, +0.0748724f, -0.0798841f, +0.0562911f, -0.3651887f, -0.0657547f,
  +0.0106092f, +0.1818494f, +0.3063533f, +0.0809947f, +0.1453818f, +0.0284093f, +0.0155328f, +0.3016344f,
  -0.5027790f, -0.1831947f, -0.0794101f, -0.5338844f, -0.1566745f, +0.3011066f, -0.0083978f, +0.0025333f,
  -0.1900190f, +0.3866482f, +0.1643869f, +0.1558364f, +0.1528061f, +0.3443851f, -0.2445996f, +0.1703328f,
  +0.0367293f, +0.0370152f, +0.0212096f, +0.0413355f, -0.0735031f, -0.0639787f, -0.0252752f, -0.0321692f,
  -0.0821724f, -0.0650720f, -0.1375466f, +0.2830870f, -0.2680776f, -0.2259058f, -0.0240799f, -0.1026643f,
  -0.1507994f, +0.3375694f, +0.1485684f, +0.0123158f, -0.0881519f, -0.5169694f, -0.3775795f, -0.4219607f,
  -0.0498361f, +0.0066513f, -0.0314100f, +0.0394124f, +0.0519661f, -0.0772935f, +0.0604020f, -0.0300941f,
  +0.3496504f, +0.1440672f, +0.0603797f, +0.3923988f, -0.3247748f, -0.3975414f, +0.0845588f, +0.0492709f,
  +0.0629179f, +0.0411159f, -0.1832729f, -0.7781196f, -0.5202116f, -0.5663264f, -0.0381188f, +0.4936025f,
  +0.0308467f, +0.0472542f, -0.0481671f, +0.0473900f, +0.0618093f, +0.0036344f, +0.0263061f, +0.0098779f,
  +0.0263462f, -0.1483264f, -0.0758583f, +0.1339783f, -0.0574431f, -0.1103950f, +0.0325212f, +0.0593738f,
  -0.0115561f, -0.1274581f, +0.0536999f, +0.0613778f, -0.0325167f, -0.2550986f, +0.0759201f, -0.0506112f
);

const float biases[4] = float[4](
  +0.1934520f, -0.4571529f, +0.0553939f, -0.3750853f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer54 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1510726f, -0.1875929f, +0.5525699f, +0.0594749f, +0.3033746f, +0.0330957f, +0.3616332f, -0.2295648f,
  +0.1158595f, -0.0100835f, -0.3382276f, -0.2664425f, -0.1928028f, +0.1469300f, +0.4809637f, +0.1487913f,
  +0.0041813f, -0.0809387f, +0.2566323f, +0.1200154f, -0.1991990f, -0.0176348f, +0.3014466f, -0.1028781f,
  +0.0083296f, -0.0708141f, +0.4798644f, +0.0843713f, +0.0736990f, +0.2238017f, +0.5318840f, +0.4709769f,
  -0.2149275f, +0.3428952f, +0.7639698f, +0.5601740f, -0.3377418f, +1.0805157f, +0.1371386f, -0.2864482f,
  +0.0095249f, +0.1464035f, -0.1692130f, +0.0248206f, -0.3158805f, +0.0230319f, +0.1421192f, +0.1707912f,
  +0.1509318f, +0.0198293f, +0.2111014f, +0.0324027f, +0.3254088f, +0.0340254f, -0.0100714f, +0.6432126f,
  +0.3809168f, +0.1800866f, +0.0718201f, +0.2469394f, +0.3276937f, -0.2366664f, -0.1057381f, -0.0483184f,
  +0.0552435f, +0.1211533f, +0.1790328f, +0.0104932f, +0.3005626f, +0.3002902f, +0.0779566f, -0.0508575f,
  +0.2255421f, +0.3959524f, -0.3719220f, -0.0429031f, +0.2418289f, -0.1070386f, -0.3253760f, -0.0614347f,
  -0.0876601f, +0.4269088f, -0.3465669f, -0.4760163f, +0.1040961f, -0.0061378f, -0.1536342f, -0.0196329f,
  -0.0040404f, +0.1592753f, -0.0268006f, -0.0116356f, +0.0971477f, +0.1177794f, -0.1321370f, -0.0274977f,
  -0.3032935f, +0.2372222f, +0.4760525f, +0.2382613f, +0.0790695f, +0.3960735f, -0.2129663f, +0.0632291f,
  -0.3822680f, +0.4270019f, +0.0089548f, +0.1023301f, -0.0856576f, -0.4281666f, -0.0190309f, -0.4805456f,
  -0.0305455f, +0.1490782f, -0.2124277f, -0.0010523f, -0.2006422f, +0.0501611f, -0.1094224f, +0.0040224f,
  +0.1134473f, +0.0199577f, -0.0162488f, -0.2775865f, -0.0975468f, +0.0357458f, -0.1638941f, +0.0069258f,
  -0.1343563f, +0.1094728f, -0.0466274f, -0.2609687f, +0.1305462f, -0.4652666f, +0.0096350f, -0.0481795f,
  +0.0049352f, +0.0066630f, -0.0073833f, +0.0700452f, -0.0034022f, -0.0101237f, -0.0558155f, +0.0262575f,
  -0.0537184f, -0.0020857f, +0.1928231f, +0.1562385f, +0.1174317f, +0.1026288f, -0.0786381f, -0.0589002f,
  -0.0416237f, -0.1935889f, -0.2353007f, +0.1085956f, +0.1640630f, -0.2562351f, -0.0535861f, +0.0058335f,
  -0.1724214f, +0.0057214f, +0.1638801f, +0.0039572f, +0.4879641f, +0.4229196f, -0.1270569f, -0.0999157f,
  +0.0547818f, -0.1443221f, +0.1932783f, -0.3307849f, +0.0016772f, +0.3136795f, +0.0194812f, +0.0294712f,
  +0.5419435f, +0.0405279f, +0.9721985f, +0.2739411f, +0.0629630f, +0.4372467f, +0.5205913f, -0.8383534f,
  -0.1566209f, +0.1632007f, -0.2333901f, -0.1144329f, +0.1090491f, +0.1609113f, +0.3679183f, -0.1390943f,
  -0.1010251f, -0.1125954f, +0.1933123f, +0.1399655f, +0.0156949f, +0.1554742f, +0.1221667f, +0.2547170f,
  +0.1168877f, +0.0850454f, +0.0835418f, +0.2338016f, +0.2451668f, -0.0852098f, +0.1842409f, +0.2702307f,
  -0.0947659f, +0.0295573f, +0.2536476f, -0.0754230f, +0.1184658f, -0.0537666f, +0.2069540f, +0.0481510f,
  +0.2741400f, +0.1237684f, -0.4301828f, -0.0545161f, +0.0350821f, -0.1109930f, -0.3771461f, +0.0469216f,
  -0.0989566f, +0.0268775f, +0.2956212f, -0.0746228f, +0.1066795f, -0.2501584f, -0.1327918f, -0.1260060f,
  +0.1523283f, -0.0346011f, -0.1363792f, -0.0532831f, -0.0722204f, -0.1758316f, -0.1140751f, +0.0332587f,
  -0.5180389f, +0.1405446f, +0.1612541f, -1.0075459f, -0.3594174f, +0.3269615f, -0.0067538f, +0.7052343f,
  +0.4121952f, -0.0728186f, -0.0515150f, +0.1248681f, -0.1174418f, +1.0703080f, +0.0451649f, +0.1412845f,
  +0.1030393f, -0.0186605f, +0.0209176f, +0.1264528f, +0.2257845f, -0.0486107f, +0.1264683f, +0.1420672f,
  +0.1942866f, +0.0256960f, -0.0810243f, -0.1173889f, -0.2197748f, +0.0361781f, +0.0007526f, -0.4229269f,
  +0.1785250f, +0.0515645f, -0.0163307f, +0.0903882f, -0.1525169f, +0.1893804f, +0.2382310f, -0.0936300f,
  +0.0307500f, -0.0346044f, -0.1425451f, +0.0093428f, +0.1049231f, +0.0512655f, +0.0330854f, -0.0188133f
);

const float biases[4] = float[4](
  +0.1698319f, -0.0286197f, +0.1765595f, +0.3054733f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer54 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0325736f, -0.0424590f, +0.1715233f, +0.5522771f, +0.0549761f, -0.1375959f, -0.2692539f, -0.1040801f,
  -0.0001589f, -0.2378289f, -0.2158084f, -0.0030256f, +0.1474049f, -0.5549933f, +0.0501043f, +0.0065529f,
  -0.0770291f, +0.0676622f, +0.1411624f, +0.1033213f, -0.1323509f, +0.0221655f, +0.0767207f, -0.0900725f,
  -0.3601293f, +0.1615243f, +0.4170348f, -0.8404714f, -0.1337481f, +0.2422464f, +0.2292359f, +1.2490693f,
  +0.4200309f, +0.2631956f, -0.0825453f, -0.6432038f, -0.0732360f, -0.9343070f, +0.0445883f, +0.1324157f,
  -0.0666853f, +0.0416042f, -0.0916460f, +0.2617865f, -0.2928438f, +0.1589884f, +0.1481563f, +0.0756020f,
  +0.4348015f, +0.0858300f, +0.0043913f, +0.5054471f, +0.2082450f, -0.4939145f, -0.0027130f, +0.2636610f,
  +0.0136621f, +0.0016583f, +0.0431870f, -0.1549141f, -0.1036066f, +0.2285622f, -0.3169950f, -0.3138749f,
  -0.0269356f, +0.0304914f, +0.0125087f, +0.0712337f, -0.0929099f, -0.1314141f, +0.1311625f, +0.0252440f,
  +0.0741635f, +0.1112071f, -0.4659054f, -0.4960364f, -0.1656957f, +0.1000811f, -0.0960774f, +0.1382465f,
  -0.0277708f, +0.3105013f, -0.2123076f, -0.2952759f, -0.1360761f, +0.3790768f, +0.1059330f, +0.2487638f,
  -0.0018527f, +0.1373749f, -0.2280150f, -0.1025557f, +0.0712072f, +0.0294594f, -0.0991688f, -0.0131294f,
  -0.0514867f, +0.0441857f, -0.0183891f, -0.5597581f, +0.0621160f, +0.0465273f, +0.0809577f, +0.2727081f,
  +0.0823546f, +0.0705203f, -0.2437066f, -0.3397425f, -0.0469347f, +0.2554242f, +0.1902946f, +0.0517631f,
  -0.0481992f, -0.0040032f, -0.0583093f, -0.2824201f, -0.1841599f, +0.1703685f, -0.2580475f, +0.1613915f,
  -0.1005126f, -0.0315207f, -0.1026567f, -0.3479081f, -0.2342860f, +0.2054768f, +0.0203700f, +0.0509445f,
  +0.0736330f, +0.0608396f, -0.2387594f, -0.2649861f, +0.2943217f, +0.0478952f, -0.0123285f, +0.0707922f,
  +0.1223506f, +0.0145003f, -0.0675854f, -0.1018208f, +0.3399932f, +0.1257858f, -0.1740825f, -0.0445468f,
  -0.0884882f, +0.1100330f, +0.7854525f, +0.2612783f, +0.2834987f, +0.0504611f, +0.0305625f, +0.0438236f,
  +0.1036310f, +0.2859451f, -0.2350738f, -0.0959361f, +0.0235264f, -0.3777940f, -0.0218208f, +0.1288726f,
  +0.0164788f, +0.1264554f, +0.0548957f, -0.1072560f, -0.1078893f, -0.0914368f, +0.0329017f, +0.0088377f,
  +0.2614081f, +0.1581994f, +0.2448953f, -0.0219252f, -0.1901721f, +0.3079368f, +0.2464816f, +0.4259264f,
  +0.1176762f, +0.1823829f, -0.5365388f, +0.2744001f, -0.2518345f, +1.0371078f, +0.2121355f, +0.0169108f,
  -0.1102750f, +0.0994305f, -0.0809498f, +0.0707043f, -0.1923652f, -0.1284627f, -0.1788346f, +0.0065780f,
  -0.0329456f, +0.0603536f, +0.0128711f, -0.5003694f, +0.0193906f, +0.0442437f, -0.1051928f, +0.0337307f,
  -0.0032723f, +0.1277514f, -0.0932087f, -0.2376987f, +0.2193171f, -0.1442283f, +0.0485048f, -0.0540597f,
  -0.0734114f, +0.1009062f, -0.1104672f, +0.0001067f, +0.0314668f, +0.0524300f, -0.0111123f, +0.0819253f,
  +0.3315128f, -0.0458369f, -0.1893400f, +0.2288215f, +0.0702668f, -0.2723540f, -0.1464251f, -0.1304996f,
  +0.0301543f, -0.0321041f, +0.0568470f, +0.0740104f, -0.3308478f, -0.0015799f, -0.1047306f, -0.0347891f,
  +0.0674738f, +0.0137975f, -0.0023033f, +0.0515643f, +0.1535089f, -0.0163757f, -0.2556477f, +0.0549112f,
  +0.0361147f, -0.0161791f, -0.1714520f, +0.8807824f, +0.4303955f, -0.3231085f, +0.2003655f, -1.0662347f,
  +0.0377749f, +0.0889681f, -0.0810689f, -0.0720850f, -0.5092811f, +0.2341809f, +0.0381094f, -0.4014879f,
  +0.0689106f, +0.0009366f, -0.0324320f, +0.1724565f, +0.0477314f, +0.3045990f, +0.0569833f, +0.1653056f,
  -0.0693934f, +0.0209183f, +0.1848147f, +0.0822845f, +0.2583726f, -0.1221617f, +0.1192848f, +0.0785093f,
  +0.1637601f, +0.0700682f, -0.1578047f, -0.0559964f, -0.2608166f, -0.1079732f, -0.2423802f, -0.1349265f,
  +0.0906183f, +0.0328284f, +0.0880856f, -0.0016752f, +0.0503020f, -0.0010305f, -0.0095889f, -0.1282329f
);

const float biases[4] = float[4](
  -0.2137802f, +0.0072291f, -0.1479362f, -0.0234270f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer55 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1290327f, +0.0726477f, +0.1352334f, +0.0408153f, +0.0399517f, -0.0660635f, -0.0316065f, +0.0188076f,
  +0.2340698f, +0.0585301f, -0.0055155f, +0.0527753f, -0.1773027f, -0.0298986f, -0.0000578f, +0.1217759f,
  +0.0172471f, +0.4299701f, +0.0650399f, -0.3582733f, -0.0522478f, -0.0702609f, -0.1993281f, +0.3690657f,
  +0.0002864f, +0.0338237f, +0.1075153f, +0.0486892f, -0.0956456f, -0.0686892f, -0.0734411f, -0.0680831f,
  -0.3075298f, -0.1488037f, +0.1219645f, -0.3042148f, +0.1562010f, +0.1845127f, -0.2226816f, -0.2884308f,
  +0.3762203f, +0.5755908f, -0.3128853f, +0.0423893f, -0.0890338f, +0.2310572f, -0.2063465f, -0.0021954f,
  +0.0379766f, -0.0531566f, +0.0086524f, -0.0088642f, -0.0273647f, -0.0075183f, +0.0123599f, +0.0815901f,
  -0.2204404f, -0.0255880f, +0.2076273f, +0.0325659f, -0.0130701f, +0.0697852f, +0.0794994f, +0.0347171f,
  +0.0120750f, -0.0513489f, -0.0100699f, +0.0168067f, -0.0955503f, +0.0138267f, +0.0920305f, +0.0065759f,
  -0.0340496f, -0.0080670f, -0.0867581f, -0.0907572f, -0.0141484f, +0.0819420f, +0.0011843f, +0.0581686f,
  -0.3322507f, -0.0313364f, -0.0101140f, -0.2826602f, -0.1912880f, +0.1047514f, -0.1421345f, -0.1085874f,
  -0.2297672f, +0.2759346f, +0.0406715f, +0.1367091f, +0.1697017f, -0.3131067f, +0.0778514f, +0.3151321f,
  -0.2849215f, -0.0823418f, -0.0209786f, -0.2678656f, -0.1276601f, -0.1045233f, -0.1383676f, -0.1768464f,
  -0.3928963f, +0.1528341f, -0.4277571f, +0.0453662f, -0.0022564f, -0.1511913f, -0.2730962f, -0.0822272f,
  +0.0699624f, +0.2225432f, +0.3083746f, +0.5591882f, -0.1846123f, -0.2015454f, +0.0855885f, +0.3369088f,
  +0.1163691f, +0.0743746f, +0.0996978f, -0.0176873f, +0.0628524f, +0.0489526f, +0.0407737f, -0.0343609f,
  -0.3190930f, -0.1044321f, +0.1971803f, -0.1766650f, +0.0150196f, -0.1470194f, +0.1397499f, -0.0171940f,
  +0.0221030f, +0.1885971f, -0.2188193f, +0.2362867f, +0.1727886f, -0.0985647f, -0.0122691f, +0.0964538f,
  -0.0084443f, +0.0643016f, -0.2387936f, +0.0366122f, -0.2262326f, -0.1969401f, -0.0568461f, -0.2824250f,
  -0.0637043f, -0.0440397f, +0.0105034f, +0.1378561f, -0.1955782f, +0.0115900f, +0.1169442f, -0.0362698f,
  -0.0491561f, +0.0649944f, -0.0136842f, +0.0398799f, +0.0091149f, +0.0071208f, +0.0083577f, -0.0267016f,
  +0.8024322f, +0.6154995f, -0.3534192f, +0.0281435f, -0.3123111f, -0.5501668f, -0.4324842f, -0.3473637f,
  +0.0651979f, +0.6161673f, -0.3367363f, -0.2957562f, +0.2328822f, -0.3494528f, +0.3691256f, -0.3591588f,
  +0.0366553f, -0.1938822f, -0.0267735f, -0.1202971f, -0.0604126f, -0.2119241f, +0.1926680f, +0.0743844f,
  +0.0010043f, -0.2354770f, -0.2519935f, +0.6033561f, -0.3095877f, -0.5673162f, +0.1671157f, +0.4649096f,
  +0.0307704f, -0.5554410f, -0.0311533f, -0.3235850f, -0.4309417f, -0.2460696f, +0.2130646f, -0.0814876f,
  +0.0264198f, -0.0666412f, -0.0629576f, -0.0154097f, -0.0459877f, -0.0017205f, -0.0330124f, -0.0514157f,
  -0.0539960f, +0.2379565f, -0.0014741f, -0.3166885f, -0.0430762f, -0.0064856f, -0.2429543f, -0.2035920f,
  -0.2246020f, -0.4398002f, -0.1105575f, -0.0092749f, +0.2626530f, -0.1747867f, +0.1415843f, +0.2360606f,
  -0.0448169f, +0.1614143f, -0.1024549f, +0.0284101f, -0.0366768f, +0.0595379f, -0.0187748f, -0.0252899f,
  -0.0069635f, -0.2753246f, -0.4998549f, -0.6900052f, +0.0559948f, -0.0006215f, -0.8654816f, -0.1338235f,
  -0.5292548f, +0.0436316f, -0.1034989f, +0.3668744f, +0.0005937f, -0.0012454f, +0.0217329f, +0.0660405f,
  -0.0621114f, +0.0672780f, +0.0786584f, -0.0480933f, +0.1809209f, +0.0524540f, +0.0637470f, +0.2339106f,
  -0.1268516f, +0.0062370f, +0.1378816f, -0.3435340f, +0.0364358f, +0.0784973f, -0.0502861f, -0.3576046f,
  -0.2386768f, -0.0265217f, -0.1914263f, -0.0836945f, -0.0447316f, -0.2963457f, -0.0258209f, +0.1401773f,
  -0.0147732f, +0.0178498f, -0.0351986f, +0.1232947f, -0.0537637f, +0.0110218f, -0.1141044f, -0.0449519f
);

const float biases[4] = float[4](
  +0.0636311f, -0.0606526f, -0.2090745f, -0.0834678f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer55 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0597863f, +0.0248551f, -0.1230350f, +0.0633534f, -0.0998306f, -0.0702908f, +0.0567302f, +0.0166502f,
  +0.0511808f, +0.2403316f, -0.0779208f, +0.2775398f, -0.3937450f, -0.8169070f, -0.4005636f, -0.7420585f,
  +0.0370198f, -0.0985460f, -0.0182120f, +0.3348688f, -0.1779267f, -0.1346145f, +0.0534792f, -0.5717559f,
  +0.0752393f, +0.0604555f, -0.0835231f, +0.0443949f, -0.0725110f, -0.1379209f, +0.0767601f, +0.0567237f,
  +0.8924677f, +0.2402199f, -0.8872619f, +0.2323484f, -0.8949657f, -0.7479665f, -0.3174759f, +0.4754470f,
  +0.1534832f, +0.1115615f, -0.5082160f, -0.8335284f, -0.3768629f, -0.9410382f, +0.9004999f, +0.1263639f,
  +0.0317755f, +0.0287186f, -0.1604817f, +0.0038811f, +0.0313840f, +0.0221463f, +0.0194164f, +0.0125099f,
  -0.0570665f, -0.3062542f, -0.0843923f, +0.3612658f, -0.0381146f, -0.3584208f, +0.1377559f, +0.1190880f,
  +0.0519593f, -0.3049313f, -0.1753294f, -0.2012314f, -0.0635582f, -0.1103922f, +0.0742799f, -0.1256340f,
  -0.0248446f, -0.0447729f, -0.0941431f, +0.2347168f, +0.0882019f, +0.0348484f, +0.0820904f, -0.0548507f,
  +0.0001938f, -0.0785168f, +0.1421976f, +0.1332353f, -0.0233307f, +0.1590982f, +0.1282415f, -0.1569211f,
  -0.0389001f, +0.0775425f, -0.0254786f, -0.1047593f, -0.0523925f, -0.0546873f, -0.0916929f, -0.0787555f,
  -0.1349404f, -0.1653432f, +0.0891654f, +0.2723238f, -0.0874213f, -0.1294559f, +0.0928075f, +0.1517239f,
  -0.4748729f, -0.0381440f, +0.2726803f, +0.3763594f, -0.2167178f, -0.4985072f, +0.0020910f, -0.1554351f,
  -0.0088164f, +0.0154605f, +0.1301101f, +0.1829553f, -0.0858693f, +0.2018760f, -0.2013510f, -0.2455606f,
  +0.0095930f, +0.0810416f, +0.1166613f, +0.5342925f, -0.1399537f, -0.3469809f, +0.0738852f, +0.0874416f,
  -0.5483137f, -0.1501485f, +0.1431857f, -0.0313898f, -0.1082033f, -0.2843521f, +0.0702822f, +0.2116809f,
  +0.3250690f, -0.2817590f, -0.0468784f, +0.0258202f, +0.0421093f, -0.1123876f, +0.2301438f, -0.0280571f,
  -0.1180247f, +0.0621333f, -0.1035014f, +0.0150306f, +0.1950148f, +0.1589378f, +0.0890549f, -0.0076009f,
  -0.0985932f, +0.0428933f, +0.0634410f, -0.0150124f, -0.1572778f, +0.0303442f, +0.1411299f, -0.0698752f,
  -0.0335422f, +0.0430739f, +0.0477707f, +0.0404018f, +0.0420270f, -0.1941136f, +0.0456639f, -0.1532383f,
  +0.4740010f, +0.2269856f, +0.1803584f, -0.3009988f, +0.2244173f, +0.2659030f, -0.0619016f, +0.2425468f,
  +0.1238800f, +0.2648460f, +0.4138757f, -0.3038153f, +0.2070336f, -0.0160261f, +0.0568953f, +0.1148324f,
  +0.0338863f, -0.5311732f, +0.2413371f, -0.2108382f, +0.1113100f, -0.1350209f, -0.1269848f, -0.0987742f,
  -0.1529816f, -0.1070259f, -0.2552083f, -0.0687314f, +0.1023738f, +0.1311175f, -0.1080834f, -0.1592707f,
  +0.1882134f, +0.0179175f, -0.0460909f, +0.0071772f, -0.1286241f, +0.2433787f, +0.1109112f, +0.0642104f,
  -0.1688200f, -0.0674910f, +0.0630021f, -0.0269103f, -0.2110672f, +0.1179622f, -0.2472240f, -0.1291246f,
  +0.0897295f, +0.1150693f, +0.0912402f, -0.1170212f, -0.0130451f, -0.0996499f, -0.1117352f, -0.0754385f,
  -0.0250442f, -0.2128059f, +0.2633364f, -0.2157110f, +0.2482641f, +0.0832573f, -0.1853905f, +0.1396749f,
  -0.0276811f, +0.0033804f, +0.0929467f, -0.0759152f, -0.0511513f, -0.0500267f, -0.0207431f, +0.0727714f,
  +0.2059730f, +0.1819422f, -0.1002822f, +0.0063858f, -0.2047072f, -0.0713613f, -0.0773541f, -0.2054299f,
  +0.3032415f, +0.1046935f, +0.0751214f, +0.4285536f, -0.7121441f, -0.3968825f, +0.4376775f, +0.3128175f,
  -0.0229187f, +0.6173655f, +0.0566228f, +0.1352640f, -0.1254124f, +0.2732378f, -0.1060802f, -0.1302675f,
  -0.0140030f, +0.0460426f, +0.1151728f, -0.1102278f, +0.0679655f, +0.1453540f, -0.0349524f, -0.0320219f,
  -0.2073479f, +0.2875752f, +0.1648123f, -0.0381401f, +0.0110271f, +0.2733129f, -0.1354422f, +0.2513935f,
  -0.1071319f, +0.2517060f, +0.1555394f, +0.0314074f, -0.1215123f, +0.2191886f, +0.0204126f, +0.0613761f
);

const float biases[4] = float[4](
  -0.3010414f, +0.0498127f, +0.0742562f, +0.0905525f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer56 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0920953f, +0.1200907f, -0.3210509f, -0.1012289f, +0.0702292f, +0.0216491f, -0.0314488f, +0.3174347f,
  -0.0406389f, +0.1958176f, -0.5971453f, +0.1649093f, -0.1590704f, +0.1801177f, +0.2930935f, +0.3180511f,
  +0.0052411f, -0.1322660f, +0.5584158f, -0.0110475f, +0.0499962f, -0.1875228f, -0.0570844f, -0.3227282f,
  -0.0684560f, -0.0423837f, -0.4235117f, -0.0754586f, -0.2855148f, -0.0673933f, -0.0708860f, +0.3032332f,
  +0.1563137f, +0.2102805f, -0.6622235f, +0.0679153f, -0.5248616f, -0.1420022f, +0.0379694f, -0.0394299f,
  +0.0407149f, -0.1862676f, -0.3999862f, +0.4071512f, +0.0337368f, -0.2892492f, -0.4311047f, -0.2404196f,
  +0.1147511f, +0.0456886f, -0.0851128f, -0.1021558f, -0.3345523f, +0.0583657f, -0.0411340f, +0.0970031f,
  +0.1546683f, +0.3788824f, +0.2826657f, +0.2207740f, +0.4921995f, +0.0731915f, -0.1115458f, +0.1068578f,
  +0.0802287f, +0.0694095f, +0.1743555f, -0.2117893f, -0.0066673f, -0.1335309f, -0.4438903f, +0.0106451f,
  +0.1869221f, -0.1771269f, +0.0794489f, -0.0727982f, +0.0206490f, +0.1191277f, +0.1758310f, -0.1732541f,
  +0.0604380f, +0.0041312f, +0.4362154f, +0.0447211f, -0.0451962f, +0.1070581f, +0.0628088f, -0.1738799f,
  +0.0221173f, -0.0420170f, -0.0054702f, -0.0314219f, -0.0222630f, +0.0182376f, -0.1049948f, -0.0833389f,
  -0.3426572f, +0.0921896f, +0.2533502f, -0.4010650f, +0.1800900f, +0.1356061f, +0.2156400f, -0.5082795f,
  +0.2007097f, +0.0311228f, -0.4915278f, -0.2547148f, +0.1451537f, +0.3327768f, -0.2446577f, -0.0109276f,
  +0.0154307f, -0.1001825f, -0.2378094f, +0.1034704f, +0.0415233f, -0.0596529f, -0.1729521f, -0.0499284f,
  -0.2628158f, -0.1603352f, -0.0986997f, -0.0240154f, +0.4546955f, +0.0685412f, +0.1130538f, -0.1637485f,
  -0.1089009f, +0.0277292f, -0.1960298f, +0.1795126f, -0.2700098f, +0.0295500f, -0.0648173f, +0.2055928f,
  +0.0416819f, -0.0580390f, +0.2090325f, -0.0889040f, -0.0632301f, -0.0646496f, -0.0395437f, -0.1308340f,
  -0.1199738f, +0.0931773f, +0.1167958f, +0.3275131f, -0.0582210f, -0.1488536f, -0.1755501f, -0.0362016f,
  -0.0016426f, -0.1843456f, +0.3300892f, +0.0437093f, +0.2105927f, -0.3783922f, -0.2182498f, -0.2926864f,
  +0.0647630f, +0.0359397f, -0.1801496f, +0.1397246f, -0.0537835f, +0.0843111f, +0.1630197f, -0.2259946f,
  +0.4186549f, -0.1618592f, -0.1083250f, +0.2311796f, -0.0492489f, -0.3177744f, -0.2410228f, +0.1063477f,
  -0.1777813f, -0.0574162f, +0.4066506f, +0.2865646f, +0.9805397f, -0.0502016f, -0.5220485f, -0.2665167f,
  +0.0815824f, -0.1672395f, -0.2667780f, +0.4365641f, +0.2968309f, -0.1088134f, +0.0026264f, +0.0833852f,
  +0.2650755f, -0.1803381f, +0.0306071f, +0.2074095f, -0.1721227f, +0.0003957f, -0.2041623f, -0.0916227f,
  +0.3627166f, +0.0371753f, -0.0645338f, -0.0342521f, -0.5165195f, -0.1283777f, -0.0344043f, -0.2676076f,
  +0.0200034f, +0.0327943f, +0.6698070f, +0.0771354f, -0.1548008f, +0.0081267f, +0.0989700f, -0.3194391f,
  +0.0770270f, -0.0849976f, +0.1378129f, -0.0172509f, -0.0684176f, +0.0194474f, +0.2089388f, -0.3140130f,
  -0.0471154f, -0.1442766f, +0.3348062f, +0.1541039f, +0.0427187f, -0.4683375f, +0.3141025f, -0.2541248f,
  -0.0745710f, -0.0029333f, -0.3073100f, +0.2212598f, +0.0901167f, -0.0577317f, +0.0888578f, -0.0383366f,
  -0.2957386f, +0.2268987f, +0.3942268f, -0.0511925f, +0.4322202f, -0.0587442f, +0.0179440f, -0.4642177f,
  +0.4938036f, -0.0657111f, -0.0460213f, -0.4321622f, -0.4707385f, -0.5157360f, -0.0410728f, -0.4484128f,
  -0.0366000f, -0.0230950f, -0.2886829f, +0.0130657f, -0.0320214f, -0.0987195f, +0.1630390f, -0.2206094f,
  +0.2990802f, +0.1580213f, -0.0075062f, +0.0016232f, -0.1933080f, -0.0566524f, +0.1422466f, -0.1025806f,
  -0.0775194f, +0.0150223f, +0.1144248f, +0.1520592f, +0.3037156f, +0.0638699f, +0.2929794f, -0.1709906f,
  -0.0230370f, -0.1614170f, -0.1890454f, +0.2411413f, +0.1921453f, +0.0262098f, +0.1369053f, +0.0090467f
);

const float biases[4] = float[4](
  +0.0372095f, +0.1552901f, +0.2373673f, +0.1601892f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer56 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0939175f, -0.1193005f, -0.1103765f, +0.1151931f, +0.2800619f, -0.1075889f, -0.1078839f, +0.0824559f,
  -0.2785798f, -0.0238117f, +0.2933415f, +0.0487994f, +0.1135319f, -0.4707190f, -0.1806328f, -0.0154869f,
  -0.0308902f, -0.0288342f, +0.1110294f, -0.0507179f, +0.1365432f, -0.1069630f, -0.2599664f, -0.1777054f,
  -0.0408330f, -0.1341075f, +0.0895552f, -0.2369491f, +0.1797546f, +0.1404615f, -0.1803822f, +0.0839558f,
  -0.3692499f, -0.0402009f, -0.8102167f, -0.0389039f, +0.6359263f, +0.0688715f, -0.1035691f, +0.8113390f,
  +0.0641620f, -0.0072485f, -0.4104767f, -0.1528224f, -0.1496011f, -0.1454939f, -0.3809050f, -0.0148249f,
  -0.2738435f, -0.1832509f, -0.0793343f, -0.1954310f, +0.2987500f, +0.1850176f, -0.0845570f, +0.0230602f,
  +0.1127348f, -0.1092310f, +0.1235848f, -0.3414455f, +0.7344654f, +0.1177288f, -0.1484843f, -0.0931976f,
  -0.0962111f, +0.0031906f, -0.0732646f, -0.1191321f, +0.0129901f, +0.0254366f, -0.2317664f, +0.2213353f,
  -0.1170688f, +0.1286129f, +0.2570918f, -0.0918768f, -0.1368738f, -0.1718508f, -0.0047881f, -0.2571426f,
  +0.0176619f, -0.1251857f, -0.1680264f, +0.2204443f, +0.1990992f, -0.0953169f, -0.0341715f, +0.0029282f,
  +0.0836104f, +0.0515623f, +0.3140767f, -0.1980369f, -0.0272526f, -0.1237531f, -0.2392650f, -0.0850011f,
  -0.4226357f, +0.0411688f, +0.2164902f, +0.1400100f, +0.4154310f, -0.2409319f, -0.0244763f, -0.2499636f,
  +0.1311914f, +0.2709115f, -0.0214095f, -0.0938768f, -0.0720645f, -0.2703155f, +0.0356897f, +0.1181651f,
  -0.0104311f, -0.0073734f, +0.1355553f, -0.1227469f, -0.0316566f, +0.0143133f, -0.1707373f, +0.2729172f,
  +0.0513675f, +0.3600142f, +0.0554113f, -0.0605814f, -0.2286805f, -0.0641700f, +0.3654822f, +0.0953879f,
  +0.0293740f, -0.0527184f, -0.0319775f, +0.1743342f, +0.3359766f, +0.0484542f, -0.0973196f, +0.2004463f,
  +0.0699899f, +0.2361943f, -0.0402805f, +0.0879538f, -0.0130871f, -0.0356784f, -0.3481480f, +0.1632401f,
  +0.0856823f, -0.0678955f, -0.1472100f, -0.0972582f, +0.2970960f, +0.0365425f, +0.1019236f, +0.1193254f,
  +0.0553705f, +0.0740096f, +0.0224193f, -0.0235893f, -0.1187114f, -0.0764554f, -0.0571765f, +0.1730659f,
  -0.0195134f, -0.0525200f, +0.0980038f, +0.0054811f, +0.0590914f, -0.0434542f, -0.0280056f, +0.0028050f,
  +0.3648558f, +0.1460219f, -0.2766726f, -0.2116921f, -0.9620950f, +0.1534290f, +0.1975840f, +0.1155056f,
  +0.1949541f, +0.0275638f, -0.6703615f, -0.1045716f, +0.3051731f, -0.0807479f, +0.1566842f, -0.2033741f,
  +0.0851808f, -0.0012212f, -0.3584348f, +0.4098254f, -0.0784725f, +0.0128035f, -0.0662699f, +0.0527918f,
  +0.2900975f, +0.0659391f, -0.1435116f, -0.1475026f, -0.3400197f, +0.0126975f, +0.1181368f, +0.0294630f,
  +0.0798416f, +0.0539842f, -0.1829743f, -0.0250050f, +0.2035207f, +0.1686896f, -0.1757934f, +0.0825807f,
  -0.0235806f, -0.0615253f, -0.2484040f, +0.0255371f, +0.0546675f, -0.0381619f, -0.1289786f, +0.1919210f,
  +0.0885187f, -0.1069589f, +0.0453327f, +0.0791751f, -0.1051110f, +0.0445639f, -0.0070794f, -0.0449274f,
  -0.0824361f, +0.1961970f, +0.7486150f, +0.0189450f, +0.0268620f, -0.2149760f, +0.0862781f, -0.3887066f,
  -0.0035481f, -0.0065003f, -0.2715567f, -0.1188746f, +0.0460011f, -0.2415686f, -0.2028399f, -0.0307760f,
  +0.0108269f, -0.0970620f, +0.0253896f, -0.1800579f, -0.4533900f, -0.0185237f, +0.2533252f, +0.2106368f,
  +0.2097585f, +0.1845784f, +0.3666109f, -0.1120139f, -0.0642423f, +0.0306197f, +0.1117105f, -0.2872004f,
  +0.0399690f, +0.0289556f, -0.2548006f, -0.3280392f, -0.0014683f, -0.0567005f, -0.1351558f, +0.1487869f,
  -0.3529740f, +0.0143088f, -0.1896110f, -0.3941845f, -0.1152539f, +0.0313321f, +0.1605568f, -0.0589446f,
  -0.1004736f, +0.0488493f, -0.0785557f, -0.2632505f, +0.7225157f, +0.1498099f, +0.1281129f, +0.0438659f,
  -0.0913014f, +0.1155224f, +0.1578557f, -0.1958982f, +0.0745089f, +0.0836508f, -0.2162343f, +0.1238910f
);

const float biases[4] = float[4](
  -0.0820455f, -0.0017587f, -0.1526409f, -0.0080406f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer57 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0984729f, +0.0034517f, -0.4626844f, -0.2288921f, -0.3014956f, +0.2896876f, -0.1167331f, -0.1389988f,
  +0.1303750f, +0.1793500f, -0.2839226f, -0.1209235f, -0.0329347f, +0.0414558f, -0.0716161f, +0.1631866f,
  -0.1650928f, +0.3274270f, -0.1041103f, +0.0897121f, +0.3012497f, -0.0459074f, -0.0003380f, +0.0691062f,
  -0.1866828f, +0.0138670f, -0.0142837f, +0.0063103f, -0.1927041f, -0.0180303f, +0.2043822f, -0.0513655f,
  -0.0540572f, +0.2328002f, +0.0484326f, -0.0930944f, +0.4285187f, +0.0550200f, -0.0044829f, +0.2862867f,
  -0.1606559f, -0.0947513f, +0.3539910f, +0.0381227f, -0.0020664f, +0.2133018f, +0.1750523f, -0.0116657f,
  +0.3902245f, -0.0044408f, -0.3899760f, +0.0682255f, -0.2328881f, -0.0261851f, -0.1819055f, -0.2207941f,
  -0.0256687f, -0.0609182f, +0.3283164f, +0.2532506f, +0.1050456f, -0.1703863f, +0.0917585f, -0.0531255f,
  -0.2441887f, -0.3487367f, +0.1778176f, +0.0170360f, +0.1133575f, -0.0937293f, +0.0532845f, +0.1133771f,
  -0.0647909f, +0.0125388f, -0.0656087f, +0.0177352f, -0.0198313f, +0.1695061f, +0.1052044f, +0.1076481f,
  -0.0706180f, -0.0943365f, -0.2909048f, +0.0581475f, +0.0220444f, +0.0045327f, +0.2026746f, -0.0043842f,
  -0.0228873f, -0.1243071f, +0.0002622f, +0.1182825f, +0.0032245f, -0.1124614f, +0.1744829f, -0.1518445f,
  -0.0222235f, +0.0969457f, -0.2041354f, +0.1023795f, -0.0700221f, +0.0718497f, +0.2189378f, -0.1233341f,
  -0.0611594f, +0.0767262f, +0.1323301f, +0.1478797f, +0.1480658f, +0.1965885f, +0.2892561f, +0.4163948f,
  -0.2008367f, -0.1352085f, +0.0594310f, -0.3467560f, +0.0869779f, -0.1282516f, +0.2751123f, +0.1217291f,
  +0.2220708f, +0.1742683f, -0.5845678f, -0.0450204f, -0.1278394f, -0.2826052f, -0.0846280f, -0.0944999f,
  +0.2810529f, +0.1350377f, -0.1123343f, +0.1504717f, -0.0679224f, +0.0318173f, -0.1624952f, -0.3706084f,
  +0.1220467f, -0.2297562f, -0.0349906f, +0.0864919f, +0.0051139f, -0.2960836f, +0.0676899f, +0.0664815f,
  +0.1742514f, -0.4552690f, -0.1277417f, +0.2375459f, -0.0428953f, +0.2343320f, -0.1889587f, +0.0378936f,
  -0.1160745f, +0.1908086f, -0.2601948f, +0.0910904f, -0.0588698f, -0.0126181f, +0.2027156f, -0.0144113f,
  +0.0322175f, -0.0490003f, +0.0768087f, -0.0472336f, +0.0374078f, -0.0595877f, -0.0237469f, +0.0620548f,
  -0.7480718f, +0.5437279f, +1.1485124f, -0.2666682f, +0.2292828f, +0.2357346f, +0.4890998f, +0.1509159f,
  -0.1076961f, -0.1787966f, +0.3111795f, +0.1683101f, +0.1036209f, -0.2080533f, +0.2883718f, +0.0859552f,
  +0.0867869f, +0.2174762f, -0.0432319f, -0.0095169f, +0.0023242f, +0.0881773f, -0.0016751f, +0.1112596f,
  +0.1281264f, -0.0749456f, +0.3510762f, +0.1732783f, +0.0794224f, -0.0941674f, +0.0346057f, -0.0206641f,
  +0.0318024f, +0.2857299f, -0.2920263f, -0.3004037f, -0.0597491f, -0.1009057f, +0.0276556f, +0.0947113f,
  -0.0519597f, +0.3836200f, +0.0051919f, +0.1115337f, -0.0634253f, +0.1956520f, -0.0611492f, +0.1639526f,
  +0.0089344f, +0.1476644f, +0.0816788f, -0.6286778f, +0.0202204f, -0.1887779f, -0.5929242f, +0.0685232f,
  +0.0934276f, +0.1107135f, -0.0521571f, +0.0750314f, +0.1123426f, -0.1003780f, -0.2278508f, +0.0378594f,
  -0.0619850f, +0.1873684f, -0.0037671f, +0.0821423f, -0.0735004f, +0.0507727f, -0.0656862f, -0.0852642f,
  -0.0796176f, +0.2251950f, +0.7996215f, -0.3898902f, +0.0386619f, +0.2803532f, -0.1524961f, +0.3226236f,
  -0.0611726f, +0.0354991f, +0.1203018f, -0.0068190f, -0.0010341f, +0.2785050f, -0.1123817f, +0.0740161f,
  -0.0523925f, +0.1737556f, +0.0432451f, +0.1235150f, +0.0805107f, +0.2107731f, -0.0571310f, -0.0427824f,
  +0.0401804f, +0.1285261f, +0.2603455f, +0.0424006f, -0.1290856f, -0.0794633f, +0.0183642f, +0.0350207f,
  -0.0269160f, +0.1076696f, +0.0225250f, -0.0574638f, +0.0007827f, -0.0436239f, +0.1065761f, +0.0168995f,
  +0.0609277f, -0.0695263f, -0.0605052f, -0.0875983f, -0.0519649f, +0.0312158f, +0.0344126f, -0.0379354f
);

const float biases[4] = float[4](
  +0.0238768f, +0.0322549f, +0.0919271f, -0.0700837f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer57 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.2423537f, -0.0053006f, -0.0872045f, +0.2779579f, -0.0749196f, -0.1583838f, -0.0067661f, -0.0672756f,
  +0.2678399f, -0.0840343f, +0.1024689f, -0.0727098f, -0.1118853f, +0.5207230f, +0.2393883f, +0.1028360f,
  +0.0613393f, +0.1137759f, +0.1567205f, +0.0012833f, -0.0769261f, -0.3345887f, +0.2941514f, -0.1425633f,
  +0.1896948f, +0.1045330f, -0.0213865f, +0.0414802f, -0.2045987f, -0.0678971f, -0.1659454f, -0.0058898f,
  -0.1519557f, -0.1044993f, -0.0942900f, -0.0156362f, -0.2155522f, -0.1827453f, +0.3094451f, +0.1341898f,
  +0.1666429f, +0.4560437f, -0.1389540f, +0.2550614f, +0.0062034f, +0.0701029f, +0.0073218f, -0.0501416f,
  +0.0478596f, -0.0921115f, +0.1183293f, +0.0875988f, -0.0696323f, -0.0074691f, +0.0328023f, -0.0460195f,
  +0.0793733f, +0.1320553f, +0.1919402f, -0.0476632f, -0.2285835f, +0.1230143f, -0.0649238f, -0.1089546f,
  -0.0972233f, -0.0669815f, +0.1848155f, +0.0045725f, +0.0028647f, -0.1064123f, +0.0284294f, +0.0064864f,
  -0.0149792f, +0.0306537f, +0.0152346f, -0.0389902f, -0.0554371f, +0.0434170f, -0.0289556f, +0.0324512f,
  +0.1862125f, -0.0213909f, -0.0267068f, +0.1806649f, -0.3569375f, +0.0194001f, +0.0918670f, -0.0290180f,
  -0.0645236f, -0.1221522f, -0.0728366f, +0.0633627f, +0.0920850f, -0.0450405f, -0.0291664f, -0.1164683f,
  -0.2055251f, -0.0611950f, -0.2897886f, -0.1848653f, +0.1383246f, +0.0559302f, -0.0228551f, -0.1840774f,
  -0.2009962f, +0.4347022f, -0.5933353f, -0.4612320f, +0.9232720f, -0.0268668f, -0.1936061f, +0.0283894f,
  -0.1811502f, +0.0093407f, -0.3294785f, -0.1434955f, +0.0350024f, -0.2654088f, +0.1491839f, +0.3103854f,
  +0.1336456f, -0.1315959f, -0.1513768f, +0.0786003f, -0.0323165f, -0.0014588f, -0.0272455f, +0.0157834f,
  -0.2628157f, -0.6675897f, +0.3674923f, +0.3447447f, +0.2687116f, -0.1744984f, +0.1516625f, +0.0340053f,
  +0.1472098f, -0.6736256f, -0.1047629f, -0.1346444f, +0.0788710f, +0.0723497f, -0.1028890f, -0.3648510f,
  +0.1861152f, +0.2927609f, +0.2327310f, -0.2987354f, -0.0302898f, +0.1315830f, -0.0565242f, +0.0462146f,
  +0.4114118f, +0.3095446f, +0.1075068f, -0.9023640f, +0.4668012f, +0.1872619f, -0.2293302f, +0.4457906f,
  +0.0646778f, -0.1110290f, +0.2130056f, -0.4257918f, -0.0625311f, -0.1867295f, -0.0114026f, +0.1652209f,
  +0.0178712f, -0.0981993f, +0.0527274f, -0.0183022f, -0.1177830f, +0.1160180f, +0.0295343f, +0.0099724f,
  -0.4146862f, +0.3676534f, +0.6248381f, +0.2649469f, +0.3172610f, +0.2520622f, +0.0258084f, -0.2204141f,
  +0.1483322f, +0.1314384f, +0.1161352f, +0.2409767f, -0.1998752f, +0.1141734f, -0.1334578f, -0.0652288f,
  +0.0858550f, -0.0494912f, -0.0059413f, -0.0021109f, -0.0814716f, +0.0683920f, +0.0238256f, +0.0037592f,
  +0.0412611f, +0.1353187f, +0.0924566f, -0.0210386f, -0.0832900f, +0.2504650f, -0.1271494f, -0.0797701f,
  +0.0590092f, +0.0649835f, +0.0413764f, -0.0105885f, -0.0657721f, +0.0317869f, +0.0341338f, -0.0734104f,
  +0.1592744f, -0.0965635f, -0.0755955f, +0.3258751f, -0.1350126f, -0.3625170f, -0.1483364f, -0.2837944f,
  +0.0043807f, -0.2353361f, +0.1059159f, +0.1393287f, -0.0223510f, +0.0865121f, -0.0660399f, +0.0274589f,
  +0.0799351f, +0.0501413f, -0.0719450f, -0.0167958f, +0.0448833f, +0.0420508f, -0.0764917f, -0.0611388f,
  +0.2267878f, +0.1293634f, +0.4977151f, -0.3276229f, +0.1436312f, +0.5599629f, -0.1656521f, +0.2996535f,
  +0.1124702f, -0.3954057f, -0.0551519f, -0.2717317f, -0.0080089f, -0.1750086f, +0.4344093f, -0.1389222f,
  +0.0311435f, -0.0382588f, +0.1416480f, +0.1847817f, -0.0608256f, -0.2838483f, +0.2696589f, -0.1522349f,
  -0.0392485f, -0.0344667f, -0.2680106f, -0.2061062f, +0.0130876f, +0.1957427f, +0.1833831f, +0.0947730f,
  -0.1611747f, +0.2138145f, -0.2075258f, +0.0393556f, +0.1167310f, +0.1978437f, -0.0594802f, -0.1001997f,
  -0.0689105f, -0.0728537f, -0.0148918f, +0.0515125f, +0.1482484f, -0.1244735f, +0.0440851f, +0.0477092f
);

const float biases[4] = float[4](
  +0.0420308f, +0.0036623f, +0.0963009f, +0.0702121f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer58 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.1043197f, -0.3061781f, +0.0200903f, -0.0252781f, -0.0825814f, +0.0920536f, +0.0040893f, +0.1200074f,
  -0.2364029f, +0.0897963f, +0.1255386f, -0.0642048f, -0.1680180f, -0.0266069f, +0.0976877f, +0.1441184f,
  -0.2181307f, -0.2778894f, +0.0223566f, -0.1438207f, -0.0975292f, +0.1336173f, +0.0400200f, +0.2299921f,
  +0.0473093f, -0.4236722f, -0.1983261f, +0.0068353f, -0.1265969f, +0.0916678f, -0.2590201f, -0.0613328f,
  -0.3091569f, -0.1148002f, +0.2586688f, -0.0890751f, +0.2734190f, +0.5402769f, +0.0292353f, -0.1248888f,
  -0.0853106f, -0.2807977f, +0.1526533f, -0.1927370f, +0.0025857f, -0.0826802f, +0.0567705f, -0.0902430f,
  -0.0394899f, -0.0725700f, -0.1401821f, -0.0363965f, -0.1573881f, +0.0425884f, -0.1494462f, -0.1695457f,
  +0.0257843f, +0.2872982f, +0.2219401f, -0.2092882f, +0.2153398f, +0.1426854f, -0.7218630f, +0.0572807f,
  +0.1144308f, -0.0693483f, -0.2323161f, -0.7061935f, +0.1635039f, +0.0062628f, -0.1226380f, -0.1412010f,
  +0.0652278f, +0.2423921f, -0.1637778f, +0.0160983f, +0.0068755f, +0.1746683f, -0.1781567f, -0.1527355f,
  +0.1352746f, +0.2010650f, -0.4680605f, +0.0773448f, +0.1438812f, +0.2582282f, +0.1164796f, -0.2597220f,
  -0.0278532f, +0.1911386f, -0.1414037f, +0.0830773f, +0.0853512f, -0.1009771f, +0.0937861f, -0.1534743f,
  +0.0695523f, +0.1389842f, -0.0378557f, +0.1431470f, -0.2076030f, -0.0494179f, +0.0016664f, +0.1175730f,
  -0.0506737f, +0.4190045f, -0.2651568f, +0.2330504f, +0.0051991f, -0.0867362f, -0.2811096f, -0.0584870f,
  +0.0176969f, +0.1535181f, -0.3374488f, +0.0295914f, +0.2200872f, -0.2526154f, +0.0489148f, -0.2704515f,
  +0.0805087f, -0.0611450f, -0.1237069f, +0.2234626f, -0.1857637f, -0.1899387f, +0.3397966f, -0.1066220f,
  -0.0663780f, +0.1068246f, -0.2064997f, +0.0328413f, +0.1301398f, +0.0367247f, +0.0377519f, -0.0071732f,
  +0.1683811f, +0.0447606f, +0.1296093f, -0.3103617f, +0.2337063f, -0.0773673f, +0.0665912f, +0.0475453f,
  +0.0382827f, -0.1110657f, +0.0438276f, -0.0590118f, +0.0116859f, -0.0890207f, +0.0962755f, +0.0419632f,
  +0.1134205f, -0.0515976f, +0.0937033f, -0.0201789f, +0.0293419f, +0.2432426f, -0.1616006f, +0.1746424f,
  +0.0447927f, +0.1836003f, -0.5413298f, +0.0216007f, +0.2002924f, +0.0577246f, -0.0389289f, +0.2084680f,
  +0.0304331f, -0.1345899f, -0.0293159f, -0.0209313f, +0.2766312f, +0.1793385f, +0.0300275f, -0.1013101f,
  +0.0083128f, -0.1550450f, -0.1197945f, +0.0657710f, -0.0302200f, +0.6125753f, -0.5227132f, +0.1073048f,
  -0.0394546f, +0.1016089f, -1.1823030f, +0.1038011f, +0.1755260f, -0.6246747f, +0.0632730f, -0.5905406f,
  +0.1448526f, -0.0926876f, +0.0212758f, +0.0052145f, +0.0675479f, +0.0112354f, -0.1723614f, +0.0552100f,
  +0.0730981f, +0.0346007f, +0.0700769f, +0.0478154f, +0.1803956f, -0.0054040f, -0.0610151f, -0.1974206f,
  +0.3528285f, -0.0368546f, -0.0539157f, -0.4469762f, +0.4727257f, -0.1340497f, +0.0034953f, +0.0270909f,
  -0.0760635f, +0.3191256f, -0.1158765f, -0.0086360f, +0.0873816f, +0.0485533f, -0.0208568f, -0.0480366f,
  -0.2431808f, +0.1435334f, -0.0446867f, +0.0090116f, +0.1757731f, +0.0106010f, +0.0747717f, -0.0574859f,
  -0.0734739f, +0.0245512f, +0.0201431f, +0.0501689f, +0.0039736f, -0.1371983f, +0.0435602f, +0.1230809f,
  -0.1232296f, -0.0962808f, -0.0231874f, +0.1264409f, +0.1240810f, -0.2741098f, +0.0996881f, +0.0753056f,
  -0.0711448f, +0.0772782f, -0.2718197f, +0.1509824f, +0.2247332f, -0.8453302f, +0.0474227f, +0.2471567f,
  -0.1012919f, -0.2885955f, +0.1989200f, -0.0472480f, +0.0269356f, -0.0387740f, +0.0829893f, +0.2346442f,
  +0.0967606f, -0.0548552f, -0.1033572f, +0.0095116f, +0.0530203f, -0.0492684f, +0.3263523f, -0.1539373f,
  +0.1182044f, +0.0386742f, -0.1260953f, -0.3276226f, +0.0911363f, -0.0500297f, +0.4797859f, -0.0859623f,
  -0.0895254f, -0.0269878f, -0.1212975f, -0.4251496f, -0.1689173f, -0.1236651f, +0.1186712f, -0.1376102f
);

const float biases[4] = float[4](
  +0.1082553f, +0.0964980f, +0.0994678f, +0.1327976f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer58 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1665781f, +0.1709054f, +0.0968124f, +0.1128755f, +0.0146995f, -0.0016356f, -0.0880002f, -0.1025101f,
  -0.2656439f, -0.0690385f, +0.3013771f, +0.1757213f, +0.1594260f, +0.4980908f, -0.0322351f, -0.1958276f,
  +0.0271515f, +0.1036437f, +0.0012523f, +0.1154102f, +0.0663852f, -0.2723590f, +0.0931934f, -0.0588589f,
  -0.0446187f, -0.4277221f, -0.0236040f, +0.1318399f, +0.0030278f, +0.1590271f, +0.1315698f, -0.0061079f,
  -0.3597220f, +0.0278689f, +0.1495422f, -0.1059288f, +0.3790192f, +0.9845116f, -0.3821545f, +0.0860008f,
  -0.2176117f, -0.1170245f, +0.1427025f, -0.1610383f, +0.2418436f, -0.0955583f, +0.0939050f, -0.1733931f,
  -0.1578072f, +0.0677009f, -0.1150039f, -0.0573704f, +0.1387004f, +0.1130492f, -0.0532676f, -0.2604125f,
  -0.0772168f, +0.0698043f, -0.0311233f, -0.2186268f, +0.2068399f, -0.3280500f, -0.8603920f, +0.2066424f,
  -0.2252402f, -0.0299740f, -0.1763705f, -0.0402296f, +0.0993383f, +0.1278467f, -0.0280846f, -0.0954508f,
  +0.0140032f, +0.2440148f, -0.0231128f, -0.0506924f, -0.0033031f, +0.0697934f, +0.1921141f, +0.2237617f,
  +0.0128140f, +0.0120602f, +0.0219961f, -0.1006775f, -0.0114210f, -0.2764087f, +0.0353647f, -0.1599914f,
  +0.0782459f, -0.0777315f, +0.0909718f, -0.0130356f, +0.0197157f, -0.0574404f, +0.0056910f, -0.1338947f,
  -0.0980109f, +0.0085892f, -0.0546788f, +0.0249868f, +0.0835581f, -0.6960403f, -0.0326304f, +0.1638416f,
  +0.1474841f, -0.0482816f, +0.0734051f, +0.2512684f, +0.1478301f, +0.1805286f, -0.1016881f, +0.1587794f,
  +0.0808621f, +0.0243100f, +0.0553586f, +0.0856564f, -0.0916323f, +0.1346844f, -0.1059079f, -0.2614812f,
  -0.0928682f, +0.0926997f, -0.0291340f, -0.1160030f, +0.2644362f, +0.1517781f, +0.0895273f, -0.1735879f,
  -0.0115617f, -0.0714245f, -0.0241657f, -0.3183868f, -0.1204964f, +0.1419988f, -0.1679685f, +0.0193701f,
  -0.1360475f, -0.1355964f, -0.0484750f, +0.0565247f, +0.0246137f, +0.2677108f, -0.1127034f, +0.0529402f,
  +0.1292581f, -0.2633608f, +0.0090380f, -0.0078711f, -0.0869048f, +0.0897178f, -0.1776817f, -0.1612308f,
  +0.0237584f, +0.1086750f, -0.0412769f, +0.0443593f, +0.0937920f, +0.2154608f, +0.0086074f, -0.0417775f,
  +0.0511482f, -0.0512475f, -0.0237528f, +0.1578957f, +0.0224578f, -0.1629744f, +0.0434869f, -0.1052608f,
  +0.3693983f, -0.1816754f, -0.1622746f, -0.0034286f, +0.2044594f, +0.0279545f, -0.0656535f, -0.3252273f,
  -0.0175313f, +0.1257768f, -0.1134021f, -0.2937188f, -0.2506329f, -0.2085779f, -0.2867421f, -0.4275124f,
  -0.0212836f, -0.1234599f, -0.1354770f, -0.3022111f, +0.0753838f, -0.0794922f, +0.0527984f, +0.1190483f,
  +0.0988231f, -0.0886391f, -0.0807342f, -0.0697390f, -0.1679043f, -0.0777175f, +0.2470657f, -0.1688869f,
  +0.0063050f, -0.0183617f, -0.0954292f, -0.3584408f, -0.0179464f, +0.1559186f, +0.0668755f, +0.1007214f,
  +0.1380546f, -0.1495492f, -0.0588977f, -0.3980152f, -0.0437501f, +0.0568104f, -0.0077550f, -0.0154627f,
  -0.0817098f, +0.0558512f, -0.0483338f, +0.0263452f, +0.2114395f, -0.3071539f, -0.0877432f, -0.3660962f,
  -0.1518335f, +0.4113745f, -0.0351003f, -0.0752263f, +0.1446386f, +0.1380423f, +0.0045301f, +0.2109572f,
  -0.1020769f, -0.1329141f, +0.0086516f, -0.2387778f, +0.1315555f, -0.2706193f, -0.0134457f, -0.2650886f,
  -0.2697274f, +0.1390281f, +0.0476119f, -0.1284801f, +0.0082345f, +0.1706296f, +0.2503813f, -0.0402971f,
  +0.0115308f, -0.3272679f, -0.1769655f, -0.2605926f, +0.2012864f, -0.0257376f, +0.2902259f, +0.4073129f,
  -0.1094437f, -0.0673865f, -0.2141785f, -0.1277175f, +0.2212435f, +0.1583779f, +0.1415116f, -0.1905677f,
  -0.2019100f, -0.0113227f, -0.0141831f, +0.0293687f, -0.1440338f, +0.0457518f, +0.0465867f, -0.0437515f,
  +0.0300624f, +0.0639902f, -0.0177369f, +0.2275461f, -0.4553438f, +0.0744817f, -0.2463735f, -0.0455692f,
  +0.1027568f, -0.0497165f, +0.0165238f, +0.2965489f, +0.0815428f, +0.0160247f, -0.1396830f, +0.0060904f
);

const float biases[4] = float[4](
  +0.1117141f, +0.0018273f, -0.0518314f, +0.0621823f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer59 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0531622f, +0.0501901f, +0.0723162f, +0.0641481f, -0.0872967f, -0.1012293f, -0.0299800f, +0.0008344f,
  -0.0128099f, -0.1093520f, -0.0008060f, +0.0213081f, +0.2191827f, +0.1401696f, -0.0827767f, +0.1621628f,
  -0.1172099f, +0.0472076f, -0.0474034f, +0.0427104f, -0.0361193f, -0.0667927f, +0.2282286f, -0.0005279f,
  -0.1618874f, +0.1909233f, +0.1812512f, -0.2781347f, -0.0413650f, +0.2380255f, +0.1327037f, +0.0904566f,
  +0.2393682f, +0.1759438f, +0.6751856f, -0.1373775f, +0.1806643f, +0.2974165f, -0.1259556f, +0.3108681f,
  -0.1305861f, +0.1708049f, -0.1954624f, +0.0226981f, +0.0321203f, -0.1154663f, +0.5147349f, -0.1499687f,
  +0.1239267f, +0.0198697f, -0.1280600f, -0.0756995f, +0.0492388f, +0.0388552f, -0.0281211f, +0.0123221f,
  +0.6852773f, -0.3206096f, -0.9410000f, +0.0224757f, -0.2995970f, +0.1083053f, -0.4238968f, -0.2912826f,
  -0.0543546f, -0.0157608f, -0.3392957f, +0.0356583f, -0.0328975f, -0.4175256f, +0.5641435f, -0.1415293f,
  +0.2541041f, -0.0005899f, +0.0101605f, +0.1273918f, +0.0014947f, -0.0181675f, +0.0185639f, +0.1032341f,
  +0.1325168f, -0.0169312f, -0.0473124f, +0.1753225f, -0.1122653f, -0.0431999f, +0.1219122f, +0.0780305f,
  +0.0754034f, +0.0705188f, -0.0766588f, +0.0184505f, +0.0680869f, +0.1549557f, -0.0679621f, -0.0564295f,
  +0.0543591f, +0.1453218f, +0.0001332f, -0.0827780f, -0.1614700f, -0.0397176f, -0.0538087f, -0.1488803f,
  +0.5857848f, -0.0099356f, -0.4671614f, -0.1305900f, -0.0423676f, +0.2002808f, -0.0034636f, -0.1327731f,
  -0.0296431f, +0.0383404f, +0.2346196f, -0.1815418f, +0.0914509f, -0.0326828f, +0.0974015f, -0.0554017f,
  +0.0238180f, -0.1925349f, +0.0411473f, +0.1342819f, -0.0058124f, -0.0537273f, +0.0296400f, +0.1693940f,
  -0.1837875f, +0.0297970f, +0.1960873f, -0.1299974f, +0.0993177f, +0.0866835f, +0.0695387f, +0.0205224f,
  +0.0214676f, -0.2107333f, -0.2163612f, -0.0292534f, -0.0260039f, -0.0701488f, +0.0688227f, -0.0765069f,
  -0.1078196f, -0.0247893f, +0.0313000f, +0.0772757f, -0.0043394f, -0.0200828f, +0.0953369f, -0.0303882f,
  +0.1811577f, +0.0807598f, +0.1027273f, +0.0460737f, -0.1646829f, -0.1134604f, -0.0428448f, -0.1436851f,
  +0.0605054f, -0.1198994f, +0.1395336f, -0.1299303f, +0.0316962f, +0.0808586f, -0.1118982f, +0.0664431f,
  +0.1715925f, -0.2991445f, -0.4170502f, +0.4144719f, +0.3013216f, -0.3016491f, +0.0013681f, +0.1172480f,
  -0.8575690f, +0.3684609f, +0.1398183f, -0.2367729f, -0.2331704f, +0.0959118f, +0.2891330f, -0.3352238f,
  +0.3414892f, +0.0946307f, +0.2830448f, -0.0292920f, +0.1932392f, +0.0408234f, -0.1655551f, +0.2916881f,
  -0.2757448f, +0.2688261f, +0.5801554f, +0.2505083f, +0.0623426f, -0.1370924f, -0.0597594f, +0.1813849f,
  -0.3617764f, -0.1616066f, +0.2021828f, -0.6720173f, -0.0652390f, -0.0235681f, +0.1969779f, +0.2298668f,
  +0.3791954f, +0.1711510f, -0.1333191f, +0.1638233f, +0.0518686f, +0.5753675f, -0.4679553f, -0.2360702f,
  -0.0160292f, +0.4406034f, +0.0867137f, +0.0404406f, -0.0903328f, -0.0561032f, +0.1192586f, -0.0337176f,
  -0.1668803f, +0.2491421f, +0.1702113f, +0.1375198f, +0.4462229f, +0.1334329f, +0.1370778f, +0.0868347f,
  -0.2322938f, +0.3228663f, +0.1507733f, -0.0065512f, -0.0964859f, +0.0486396f, +0.2677865f, -0.2227185f,
  +0.3484029f, +0.0966037f, -0.6180767f, +0.4631862f, +0.0759786f, -0.1604654f, +0.0696118f, +0.1808973f,
  -0.0262540f, +0.2188971f, +0.2364784f, -0.0849453f, -0.1002992f, -0.2184191f, +0.1388692f, -0.1056077f,
  -0.2534678f, +0.0081704f, +0.2349904f, +0.0173009f, -0.1773098f, -0.0312816f, +0.2069913f, -0.1544484f,
  +0.2201388f, +0.0798776f, -0.4562499f, -0.3035312f, +0.2169695f, +0.2814421f, -0.0123570f, +0.4729340f,
  -0.1009278f, -0.1357340f, -0.0237755f, -0.1367846f, +0.0203137f, +0.2403691f, +0.2632563f, +0.3358327f,
  -0.3430461f, -0.2520865f, +0.2091108f, -0.3266929f, -0.0028284f, -0.0580630f, +0.0172603f, +0.0621680f
);

const float biases[4] = float[4](
  +0.1043581f, +0.2012987f, -0.0456575f, +0.0164905f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer59 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0914140f, +0.2318013f, +1.0276854f, -0.8061119f, +0.4413606f, +0.4789107f, +0.1140354f, +0.4673457f,
  -0.5313435f, +0.2087608f, +0.1094543f, -0.1884786f, -0.0840181f, +0.0252776f, -0.2791079f, +0.0548294f,
  +0.1604298f, -0.1235558f, +0.1829832f, -0.1309433f, -0.0128978f, +0.1784811f, +0.0905057f, +0.3308092f,
  +0.1691042f, +0.2685321f, +0.4762819f, -0.5006104f, -0.0419503f, +0.2975633f, -0.2849680f, -0.5861840f,
  +0.0528618f, +0.1848474f, +0.2652884f, -0.3339864f, -0.0723187f, +0.2493119f, +0.1373929f, +0.3174851f,
  -0.0480331f, +0.4503568f, -0.2003767f, -0.0672192f, +0.0325074f, +0.1093720f, -0.2764661f, +0.1330000f,
  -0.0593092f, -0.0325303f, +0.7791513f, +0.0697145f, +0.0245535f, +0.0113703f, +0.0023354f, -0.3220183f,
  -0.3208513f, -0.0887238f, +0.2779301f, -0.0870219f, -0.0299178f, -0.3864183f, +0.0278892f, -0.0453685f,
  +0.0040197f, +0.0163308f, -0.3027110f, +0.0557924f, +0.0164022f, -0.1890281f, -0.1325400f, +0.1199563f,
  +0.1138036f, -0.0483026f, -0.0684810f, +0.1574707f, -0.0786804f, -0.1049733f, +0.0066085f, +0.0223166f,
  -0.0446891f, -0.0854541f, +0.0987174f, +0.0410769f, +0.1317998f, +0.0935405f, +0.0013886f, -0.0313961f,
  -0.0045967f, -0.0159160f, +0.1569050f, +0.0677828f, +0.0382137f, -0.0793891f, +0.0299870f, +0.0196892f,
  -0.0230299f, +0.0393688f, -0.1881262f, +0.1079889f, -0.2602974f, -0.3468056f, -0.1433279f, -0.1351195f,
  -0.0621844f, -0.3622466f, -0.1727140f, +0.1859342f, -0.0501527f, -0.2244343f, +0.0005854f, -0.1609055f,
  -0.2014248f, -0.2599486f, +0.0883021f, +0.3282634f, +0.0722444f, -0.0723898f, -0.2771602f, +0.0584500f,
  +0.0901791f, +0.1482857f, -0.0654885f, -0.0752141f, +0.0581654f, +0.1442017f, +0.2045785f, +0.1688748f,
  -0.3084750f, +0.0967939f, -0.1341631f, -0.1108409f, +0.2014362f, -0.0295407f, +0.1892062f, +0.0682593f,
  -0.1929643f, +0.0667254f, -0.0443639f, +0.0762226f, +0.1517251f, +0.1728497f, -0.1188063f, +0.0824605f,
  -0.1004989f, -0.0527712f, -0.0475172f, -0.1620820f, -0.0058827f, +0.3718023f, +0.2511602f, +0.3527975f,
  -0.0703196f, +0.1196932f, +0.0614112f, -0.2078812f, +0.0675262f, +0.0845869f, +0.2225474f, +0.2166591f,
  +0.0424915f, -0.0565033f, +0.0657914f, -0.0186451f, -0.0098069f, -0.0748129f, +0.1228067f, -0.0065412f,
  +0.1155569f, +0.0568271f, -0.0740839f, +0.2187664f, +0.0803787f, -0.4407077f, -0.2828236f, -0.4021138f,
  +0.3860876f, +0.4687544f, -0.0861665f, +0.2893981f, +0.3134127f, +0.3675762f, -0.6397310f, -0.6841644f,
  +0.0394850f, +0.0253763f, -0.0372936f, +0.0653626f, -0.0040373f, -0.1140989f, +0.0242541f, -0.0637899f,
  -0.0452029f, -0.0164815f, -0.0025940f, -0.0441707f, +0.0747399f, +0.2148636f, +0.0930590f, +0.1952170f,
  -0.2527063f, -0.1943485f, +0.3308625f, -0.1500784f, -0.0398623f, -0.0529590f, +0.4483123f, +0.4680673f,
  -0.1427674f, -0.1404816f, +0.1968129f, -0.0366304f, +0.0788525f, -0.0137590f, +0.0872411f, +0.0316597f,
  +0.1451680f, +0.0537881f, -0.1716551f, -0.1277108f, +0.0382980f, +0.0158837f, -0.0571379f, -0.0162472f,
  -0.1014409f, +0.2266341f, -0.3304041f, -0.4710710f, +0.0074891f, +0.1014915f, -0.0333968f, +0.2066290f,
  -0.0223680f, -0.0441962f, +0.0122077f, -0.1125645f, +0.0786218f, -0.1707121f, +0.0245631f, +0.0886509f,
  -0.1374787f, -0.0471589f, +0.0436372f, -0.0312027f, +0.0564638f, +0.1641007f, -0.0060490f, +0.1819625f,
  +0.0593434f, -0.6858970f, +0.5901623f, +0.2545789f, +0.3430877f, -0.1050607f, -0.0721439f, -0.3958151f,
  +0.1918042f, -0.3322153f, +0.0952672f, -0.0514477f, -0.0143174f, +0.0513877f, -0.1371520f, -0.2050629f,
  +0.0850766f, +0.0552326f, +0.0395621f, -0.0904624f, -0.0251527f, +0.0597696f, -0.0108112f, -0.1160950f,
  +0.1599766f, +0.3728650f, -0.2993647f, -0.1396526f, -0.2158917f, +0.1430629f, -0.1737844f, -0.0374185f,
  -0.0670156f, +0.1410606f, -0.0492339f, -0.0393777f, -0.0565613f, +0.0653446f, -0.0818994f, -0.0229933f
);

const float biases[4] = float[4](
  -0.3828388f, +0.0932320f, +0.0631198f, +0.0159819f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer60 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.2868693f, +0.1610245f, -0.5582042f, -0.0346472f, -0.1852638f, +0.2955195f, +0.0139150f, +0.0484904f,
  -0.2604978f, -0.2246314f, -0.0072922f, +0.1664564f, +0.0990924f, +0.1696955f, -0.0811327f, -0.1500059f,
  -0.0481771f, +0.0781099f, -0.1568532f, -0.2760980f, +0.0082573f, +0.4445322f, -0.0138257f, +0.0323284f,
  -0.2231968f, +0.1074275f, -0.1202506f, +0.1092034f, +0.1100970f, +0.1649235f, +0.0259103f, -0.0083852f,
  -0.2790851f, -0.4778184f, -0.0462051f, +0.2382163f, +0.5047088f, +0.3281393f, -0.2601439f, -0.0930284f,
  -0.1093311f, -0.1179572f, +0.1827955f, -0.0133739f, -0.4509963f, -0.1532366f, +0.0180967f, -0.0883113f,
  -0.0980692f, +0.3950433f, -0.1302239f, -0.0339433f, -0.1688078f, +0.0301706f, -0.0762219f, +0.0454901f,
  +0.1159190f, +0.2301487f, +0.2145843f, +0.1614622f, +0.0538250f, -0.0024763f, -0.2402973f, +0.5695403f,
  -0.2070754f, -0.1582142f, +0.0236860f, -0.0964335f, +0.3393630f, -0.0928458f, -0.1295977f, -0.1115908f,
  +0.0116907f, -0.3362311f, +0.1990014f, +0.3364446f, -0.0521342f, +0.3964321f, +0.1478208f, -0.1245189f,
  -0.1951771f, -0.1032947f, +0.0550664f, +0.1181161f, +0.2620999f, +0.2397575f, +0.1024727f, -0.0880336f,
  -0.1470461f, -0.1220864f, +0.0671315f, -0.0295902f, -0.1760620f, -0.0007526f, +0.0608119f, -0.1484064f,
  -0.0853280f, +0.0981901f, -0.2540896f, -0.0835848f, +0.1842310f, +0.3075815f, +0.5416277f, -0.0885521f,
  -0.3776567f, +0.1460525f, -0.3509652f, -0.0899709f, +0.3153109f, +0.3640532f, -0.1984253f, +0.1407784f,
  -0.2171595f, -0.1402278f, -0.0664189f, -0.0326693f, -0.2261063f, -0.0655688f, +0.1380461f, -0.2280301f,
  -0.0576590f, -0.2402338f, -0.1006916f, -0.0868807f, +0.1544583f, -0.0329541f, +0.2242067f, -0.3637882f,
  +0.0352594f, +0.1296208f, -0.0232993f, -0.2790244f, +0.0768836f, +0.3395604f, -0.0739276f, +0.0734305f,
  -0.1856792f, +0.0383790f, -0.0108923f, -0.1557873f, -0.2323997f, +0.0265452f, +0.1494452f, -0.0255243f,
  -0.1105725f, +0.0942969f, -0.1910830f, -0.1235158f, +0.0579881f, +0.0820834f, +0.0309177f, +0.0347641f,
  +0.4375549f, +0.0081394f, +0.1538887f, -0.0517963f, -0.1342104f, +0.0189749f, -0.0709120f, +0.0755115f,
  -0.0389428f, -0.1567143f, +0.2543739f, -0.1169498f, +0.1246630f, +0.0767343f, -0.0582746f, +0.0633583f,
  -0.1708431f, -0.2207032f, +0.0442558f, +0.0700895f, +0.3811301f, +0.0660290f, -0.1126685f, +0.0654442f,
  -0.3375171f, +0.4185533f, -0.2022819f, +0.1660126f, -0.0836383f, +0.1757188f, +0.0724462f, +0.3338209f,
  -0.2512723f, -0.3469178f, +0.0140883f, +0.0219882f, -0.1650445f, +0.0547453f, +0.0135377f, -0.3247705f,
  -0.0000675f, +0.1715227f, +0.0675409f, +0.0108780f, -0.1435467f, -0.0502273f, +0.0456524f, +0.1844427f,
  +0.0085768f, +0.1309988f, +0.2794887f, +0.0067849f, -0.2254661f, -0.0993477f, -0.0292683f, -0.0404365f,
  -0.1461966f, +0.0066133f, +0.0868856f, -0.0657037f, +0.0725359f, +0.0425458f, +0.0308598f, +0.1460647f,
  -0.0857670f, -0.2758015f, +0.1035411f, +0.0092955f, +0.0933589f, -0.0341838f, +0.0807029f, -0.1152025f,
  -0.0547544f, +0.2304624f, -0.4690035f, -0.0514142f, +0.4104555f, -0.1360956f, -0.0813017f, +0.1190412f,
  +0.1624965f, +0.0091249f, -0.0301143f, +0.0425383f, +0.2792712f, -0.0046695f, -0.0739384f, -0.0448180f,
  -0.2896369f, +0.0680734f, -0.3254125f, -0.1141965f, -0.0036306f, +0.0686338f, +0.3604783f, +0.0014664f,
  +0.0026423f, +0.2500570f, -0.0930870f, -0.2470084f, -0.0435309f, -0.1076800f, +0.3138270f, +0.0592792f,
  +0.2428657f, -0.1156855f, +0.0866975f, -0.1536739f, +0.5692217f, -0.5360755f, +0.1120071f, -0.1383770f,
  -0.0399671f, -0.1682653f, +0.0779792f, -0.1464056f, +0.2698019f, +0.0237298f, +0.1291495f, -0.3645499f,
  +0.0507292f, -0.3473346f, +0.0190254f, -0.2496752f, +0.1422996f, -0.0147647f, +0.1830852f, -0.2851932f,
  +0.0228941f, -0.2296984f, +0.1166048f, -0.1106350f, +0.9786201f, -0.0831566f, +0.0900950f, -0.0467386f
);

const float biases[4] = float[4](
  +0.1022093f, +0.0760623f, -0.0627401f, +0.0419704f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer60 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0635235f, +0.1151642f, -0.5410047f, +0.0495686f, -0.0818108f, -0.0158812f, -0.1050104f, +0.0933715f,
  +0.6154850f, +0.2125580f, +0.1285421f, +0.2474498f, +0.0419095f, -0.4126679f, -0.1614615f, +0.2936039f,
  +0.0987381f, -0.1047664f, -0.2228097f, +0.0252564f, +0.2183157f, -0.1843417f, -0.1145287f, -0.1675267f,
  -0.0352225f, +0.1279600f, -0.0304149f, +0.1891874f, +0.0589903f, -0.0142018f, -0.1870939f, +0.0690244f,
  +0.1925966f, +0.0489556f, -0.0785068f, -0.1798078f, +0.0531659f, -0.2354705f, -1.0142374f, +0.6777583f,
  +0.0805797f, +0.5709289f, -0.0108821f, -0.3360629f, +0.4561104f, +0.0299045f, -0.5076400f, +0.0663198f,
  -0.0292883f, +0.2730063f, -0.0939722f, +0.0510896f, -0.4295806f, -0.2049833f, -0.3009802f, +0.1134733f,
  +0.0927512f, +0.3940158f, -0.1297524f, +0.1359321f, +0.0914774f, -0.0915726f, -0.1759884f, +0.6776043f,
  +0.0565882f, -0.0022076f, -0.1561470f, +0.0143442f, +0.0016557f, -0.0763496f, -0.2560092f, -0.1999546f,
  +0.1227321f, -0.1051624f, +0.4528917f, -0.2175609f, +0.2277416f, -0.2045680f, -0.0189923f, -0.0546191f,
  -0.0202847f, -0.1171859f, -0.0707856f, -0.3627147f, +0.4106829f, -0.0396572f, -0.0021514f, -0.2179943f,
  +0.1343849f, +0.1885704f, +0.0848536f, -0.1544648f, +0.5086967f, -0.0966089f, -0.1193109f, +0.0673260f,
  -0.0925860f, -0.0021803f, -0.1759637f, -0.1733203f, -0.0589937f, -0.0745953f, +0.3000934f, +0.0008204f,
  -0.2384781f, +0.2708915f, -0.1679733f, -0.0103827f, -0.1874177f, +0.1933464f, -0.3280376f, +0.4792649f,
  -0.0205442f, -0.1557782f, +0.0998192f, -0.0843746f, -0.1111329f, +0.1808653f, -0.0362961f, -0.0713502f,
  +0.0387953f, -0.1457274f, +0.0456759f, -0.1452220f, +0.0399709f, +0.2366574f, +0.1785874f, -0.1008118f,
  -0.0249993f, -0.0428752f, +0.0876465f, +0.0714393f, -0.0563014f, -0.1776747f, -0.0637395f, -0.1123807f,
  +0.1004537f, -0.1101401f, -0.0902966f, -0.0281979f, -0.1841301f, -0.1123415f, -0.1563440f, +0.0684846f,
  -0.3331815f, +0.0226442f, -0.8490629f, +0.1615448f, -0.1353107f, +0.3736539f, +0.1469620f, +0.0603549f,
  +0.0977182f, +0.1010156f, +0.1529633f, +0.1568511f, -0.1092724f, -0.1168863f, -0.0901862f, -0.0290119f,
  +0.0654287f, -0.1127237f, +0.0045907f, +0.0487211f, -0.1352929f, -0.0178952f, +0.1046621f, +0.0236897f,
  -0.4450698f, -0.1089096f, -0.4103386f, -0.0125112f, -0.0522436f, +0.0601590f, +0.0988434f, -0.1875281f,
  -0.0735930f, +0.0277666f, -0.3689763f, -0.0869144f, +0.0561922f, -0.0549247f, +0.3153961f, -0.0564217f,
  +0.0253544f, -0.0797891f, +0.2604370f, -0.1361204f, -0.2708430f, -0.2365220f, -0.0783558f, -0.1833438f,
  -0.1637678f, +0.0236984f, -0.1749508f, -0.1204746f, +0.2444254f, +0.1351756f, -0.0640812f, -0.0945121f,
  +0.0006757f, +0.2399181f, -0.2949405f, -0.0266173f, +0.0147545f, +0.1463781f, -0.0911227f, +0.1540710f,
  -0.0902139f, -0.0933348f, -0.1624389f, -0.1399744f, -0.0708497f, -0.1037994f, -0.0865339f, -0.0170023f,
  -0.0162457f, -0.1400758f, -0.0548043f, +0.1819056f, +0.0164403f, -0.1151826f, -0.0227586f, -0.0296919f,
  -0.0665323f, -0.0044426f, -0.0422148f, +0.0134816f, +0.2110224f, -0.2254744f, +0.0664713f, +0.3045798f,
  -0.0294913f, -0.0728320f, -0.0477757f, -0.1399268f, +0.0039996f, -0.2307132f, -0.2094888f, -0.2298744f,
  +0.1609487f, +0.0490945f, +0.2697963f, +0.1708775f, -0.2591940f, +0.1071034f, -0.1554265f, +0.0903339f,
  -0.2930448f, -0.2107066f, -0.4452749f, +0.0064841f, -0.1041886f, +0.3208626f, +0.6609370f, -0.4839313f,
  -0.1682696f, +0.1189886f, -0.1610501f, -0.2669992f, -0.0101881f, -0.1267742f, +0.1834988f, +0.1843693f,
  -0.0398929f, -0.0209744f, -0.0733272f, +0.1191634f, -0.1042292f, -0.1129223f, -0.0417539f, -0.0001170f,
  +0.0242983f, +0.0213134f, +0.0538114f, +0.1162743f, +0.3125778f, +0.0658011f, +0.0651057f, +0.0942340f,
  -0.0864433f, -0.1509126f, -0.0983835f, +0.0268474f, -0.2792713f, -0.1319585f, -0.0665036f, -0.2153602f
);

const float biases[4] = float[4](
  +0.0824854f, +0.0182362f, -0.0678563f, +0.1051974f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer61 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.4032354f, +0.1122180f, +0.2298371f, -0.4207604f, +0.2466199f, +0.4044083f, +0.0762821f, +0.2138696f,
  +0.5198033f, +0.0203207f, +0.0720256f, +0.1519543f, +0.0529757f, -0.1338752f, -0.0881695f, -0.0215378f,
  -0.1413721f, -0.0271972f, +0.1120141f, -0.0881955f, -0.0398064f, -0.0886793f, +0.2298100f, -0.0780246f,
  -0.0974030f, +0.3001307f, +0.2066794f, -0.4281401f, +0.2682880f, +0.3213669f, +0.1020343f, +0.0803514f,
  +0.1737449f, +0.0045646f, -0.4908605f, -0.1321504f, -0.0260258f, -0.0012993f, -0.1503207f, -0.1842031f,
  -0.0119650f, +0.0125186f, +0.0038411f, +0.1673386f, -0.1087950f, +0.0489917f, -0.0640028f, +0.1597533f,
  -0.0312688f, +0.0773022f, -0.0072403f, -0.0816053f, +0.0144074f, +0.0271893f, -0.0000689f, -0.0034485f,
  +0.1326709f, -0.0450837f, -0.0395664f, +0.0913464f, -0.0181644f, -0.0785633f, -0.0127277f, -0.1644671f,
  +0.0130536f, -0.2579915f, +0.1629189f, -0.0234969f, +0.0457514f, -0.0927460f, +0.0949347f, -0.0649576f,
  -0.1528423f, +0.2601025f, -0.0329110f, +0.1111180f, +0.2078436f, -0.0132266f, +0.1695794f, +0.0404981f,
  -0.4678699f, +0.3749117f, -0.0964006f, +0.3382071f, +0.1859591f, -0.5452465f, -0.0144650f, -0.4294526f,
  -0.2846960f, +0.0674413f, +0.0404070f, +0.3966427f, -0.0041618f, -0.0118566f, +0.0391856f, -0.2168779f,
  +0.1322826f, +0.0726523f, -0.1561585f, +0.0529318f, +0.1781211f, -0.1106532f, +0.0875351f, +0.2372381f,
  +0.0934755f, -0.2182164f, -0.8725765f, -0.3032410f, -0.4010025f, -0.1042039f, -0.0656334f, +0.7867701f,
  -0.3435546f, -0.2619934f, -0.2132381f, -0.2104201f, +0.0440356f, -0.0350246f, +0.2400182f, -0.0322643f,
  +0.0873429f, +0.1851276f, -0.2804861f, -0.0590378f, +0.0355284f, -0.0086153f, -0.0887699f, -0.0486949f,
  -0.0369429f, -0.1882469f, -0.1562952f, +0.1183204f, +0.0603491f, -0.2323242f, -0.0700928f, -0.0338792f,
  -0.0598423f, -0.4455707f, -0.0300826f, +0.0748372f, +0.0796319f, -0.0172549f, -0.0674022f, -0.1649620f,
  +0.2405232f, -0.6217486f, -0.8287993f, +0.4610997f, -0.1259056f, -0.0518408f, +0.1294848f, -0.1369162f,
  -0.2022472f, -0.1391634f, -0.2877235f, -0.1048116f, -0.0012714f, -0.4892838f, -0.5291783f, +0.1401617f,
  -0.1079684f, +0.2012256f, +0.0013289f, +0.1291286f, -0.0810956f, +0.0813810f, -0.1154079f, +0.0033964f,
  -0.3203123f, +0.0427530f, +0.4364725f, -0.1359778f, +0.1581040f, +0.3217176f, +0.2947377f, -0.2008287f,
  +0.1354987f, +0.1830532f, -0.2434609f, +0.1749155f, +0.0124976f, -0.3237806f, -0.1688058f, +0.4598726f,
  -0.1052317f, +0.1011583f, +0.1852248f, -0.0143806f, +0.0712358f, +0.1587662f, -0.0151720f, -0.0952129f,
  +0.0646947f, -0.0008304f, +0.0666078f, -0.0834141f, +0.0127443f, +0.1449892f, +0.0258185f, -0.0326885f,
  -0.0137453f, +0.1167468f, +0.0895993f, -0.0192851f, +0.0767796f, -0.0273858f, +0.0739686f, +0.0050672f,
  -0.0563885f, -0.1410377f, +0.0836051f, -0.0020043f, +0.0267876f, +0.0253330f, +0.0391654f, +0.0664475f,
  -0.2372125f, +0.0415223f, +0.1134545f, -0.1045005f, +0.0266205f, +0.2433753f, +0.0655687f, +0.1357197f,
  +0.1737985f, +0.1837527f, +0.0777671f, -0.0581523f, +0.1670457f, +0.1268822f, +0.0941861f, +0.1566330f,
  -0.1248114f, +0.0188111f, +0.0993890f, -0.0914565f, +0.0876088f, -0.1474278f, +0.1244029f, -0.0778897f,
  +0.1586168f, -0.3294212f, -0.0043024f, +0.3452618f, -0.1530314f, -0.4238468f, -0.0610499f, -0.0699401f,
  +0.2335340f, +0.0390283f, -0.6813819f, -0.4963934f, -0.0869360f, +0.1330382f, -0.4674418f, -0.2722950f,
  -0.1625574f, +0.1891306f, -0.2091464f, +0.1443533f, -0.1952209f, +0.2335491f, -0.0763867f, +0.1919014f,
  -0.0984239f, -0.0617690f, -0.1201434f, +0.0908577f, -0.0044485f, -0.0382129f, +0.1070613f, +0.0718214f,
  -0.1364398f, +0.0826877f, +0.2561754f, -0.1613421f, +0.1834695f, +0.1121095f, +0.2108942f, -0.1751790f,
  -0.1132036f, -0.0220340f, +0.0899081f, +0.1477118f, +0.0683856f, -0.0722364f, -0.0227958f, +0.1537968f
);

const float biases[4] = float[4](
  +0.0159933f, -0.0686655f, +0.0437271f, +0.0343085f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer61 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.1088604f, -0.0974874f, -0.2717201f, +0.0476391f, +0.0277830f, +0.1148442f, +0.1003206f, +0.0257847f,
  +0.2135231f, -0.1329708f, -0.2394131f, +0.0327000f, +0.0177788f, -0.0473999f, +0.0413958f, -0.0672912f,
  +0.1056388f, +0.1051530f, -0.0061709f, +0.0016277f, -0.1888653f, +0.2518966f, -0.0177464f, +0.0992300f,
  +0.0127984f, -0.1299527f, +0.1497387f, -0.0844664f, +0.0349511f, +0.2459161f, +0.0014367f, -0.0155156f,
  +0.1743284f, +0.2573952f, -0.4037994f, -0.1889958f, -0.4531724f, +0.3792883f, -0.1671375f, +0.1064591f,
  -0.2524578f, +0.3242570f, +0.0989367f, +0.2231999f, -0.0734633f, +0.3404344f, -0.2237190f, -0.0027144f,
  -0.1954667f, -0.0696379f, +0.0158601f, -0.0168598f, +0.0163131f, +0.0554530f, +0.0239211f, -0.2101857f,
  -0.0418252f, -0.2391808f, -0.0888814f, +0.1402045f, +0.0914745f, +0.0542802f, -0.0644791f, -0.2521192f,
  -0.0386882f, +0.4691023f, -0.1962379f, +0.0963599f, +0.1448181f, +0.3142160f, -0.1337859f, +0.1191217f,
  -0.0594714f, -0.0667587f, -0.0471441f, -0.0375399f, -0.0076610f, +0.0154160f, +0.0628817f, +0.0237959f,
  -0.0692544f, -0.2854947f, -0.3042384f, +0.0471339f, -0.0297489f, -0.0509653f, +0.1306921f, +0.0523375f,
  -0.1489291f, +0.0450372f, -0.2855952f, +0.2078221f, -0.0201570f, +0.0280507f, +0.2845110f, +0.0556734f,
  +0.0822173f, -0.0009312f, +0.0126594f, +0.2399636f, +0.0543687f, -0.2278066f, +0.0370955f, +0.0025587f,
  +0.4418778f, -0.1449762f, -0.0797269f, -0.1102639f, +0.0646953f, +0.2782900f, -0.1936636f, +0.3725419f,
  -0.1001841f, +0.2523187f, -0.5233027f, +0.2514564f, +0.1024419f, -0.0757282f, -0.0554171f, -0.3590092f,
  +0.0311665f, +0.0388373f, +0.2190626f, -0.0204774f, +0.0019605f, +0.0519489f, +0.0188377f, -0.0059006f,
  -0.0209467f, +0.1688703f, -0.1480249f, -0.3847063f, +0.0298619f, +0.1313707f, +0.1316003f, -0.0618887f,
  +0.0149470f, +0.1620742f, -0.1691020f, -0.1685378f, -0.0240850f, +0.2566957f, -0.0445686f, -0.1230951f,
  +0.1927133f, -0.2973707f, -0.4530168f, +0.1025498f, -0.0512114f, -0.1188167f, -0.1718847f, -0.2060418f,
  +0.0003534f, -0.0217854f, -0.0801488f, +0.0689390f, -0.1332290f, +0.0268896f, -0.0205447f, -0.0174599f,
  +0.1849051f, -0.0609581f, -0.0682372f, +0.0573358f, -0.0806398f, +0.1420307f, -0.0778278f, -0.0482274f,
  -0.0690106f, -0.1138136f, +0.2260831f, +0.0702956f, -0.0709073f, +0.0327038f, -0.1486965f, -0.1210849f,
  +0.3318872f, +0.0494157f, +0.4747689f, -0.2169851f, +0.1532775f, +0.2849891f, +0.0473949f, +0.1657812f,
  -0.0795169f, +0.3759062f, +0.4548937f, -0.2348566f, +0.0458715f, +0.1717593f, +0.1735513f, +0.0412927f,
  +0.0281465f, -0.1113144f, +0.2459812f, +0.2235168f, -0.0763943f, -0.1665130f, +0.0537331f, +0.0546446f,
  +0.0359400f, -0.0079959f, +0.2348884f, +0.0168837f, -0.1809456f, -0.1911645f, +0.0364735f, -0.0106212f,
  +0.1269392f, -0.1067817f, +0.2241124f, +0.1002503f, -0.0172331f, -0.1615703f, +0.1273161f, -0.0199704f,
  -0.2816768f, +0.1173591f, +0.1536521f, -0.1027062f, +0.0125210f, +0.0689032f, +0.1224167f, +0.0154100f,
  +0.1298969f, +0.1188300f, +0.3422207f, +0.3707096f, -0.3445465f, -0.6360331f, -0.0417422f, -0.0649787f,
  +0.4086435f, +0.0196300f, -0.0832497f, +0.3486148f, +0.2650683f, +0.1844253f, -0.0000107f, -0.4052250f,
  -0.0244137f, +0.0333059f, -0.0292691f, -0.0698678f, +0.0365019f, +0.0383500f, -0.0643984f, +0.1164048f,
  -0.3171796f, -0.0484900f, +0.6077913f, +0.3915678f, +0.2226335f, -0.0123481f, -0.0253064f, +0.5821542f,
  -0.1107716f, -0.5031841f, +0.3813417f, -0.6910365f, -0.1693261f, +0.3361008f, +0.0518270f, +0.0846894f,
  +0.0363065f, +0.0130456f, +0.0919180f, -0.0856370f, +0.0031911f, +0.0494245f, +0.0194434f, -0.1301873f,
  -0.0211260f, +0.1488196f, -0.0646910f, -0.0445078f, -0.0106765f, -0.0306738f, +0.0037363f, +0.0797240f,
  +0.0393519f, +0.1169328f, -0.0796809f, +0.1478502f, +0.0119635f, -0.1643781f, -0.0561814f, -0.1160128f
);

const float biases[4] = float[4](
  +0.0204610f, +0.0481195f, +0.0464801f, -0.0631528f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer62 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

const float kernels[288] = float[288](
  -0.0109395f, +0.0783682f, +0.1589672f, -0.0050252f, +0.1707345f, +0.2098247f, +0.2559563f, -0.0932020f,
  -0.2677196f, -0.0831873f, +0.0538244f, +0.0547969f, +0.1211798f, +0.1066825f, -0.3910950f, +0.3067090f,
  -0.2366396f, +0.2907155f, -0.1558332f, +0.2681771f, -0.0217909f, +0.2595551f, -0.2838295f, -0.2356860f,
  +0.1791691f, -0.1593864f, +0.2036466f, +0.5830725f, +0.0324325f, -0.1907079f, +0.2566541f, +0.2075484f,
  +0.2003282f, +1.0148017f, -0.1241218f, +0.1710048f, +0.1859404f, +0.2237004f, -0.5516266f, +0.2208783f,
  -0.0520881f, -0.0172476f, +0.5379297f, +0.2554967f, -0.0226816f, +0.0458995f, -0.3996119f, +0.4686364f,
  -0.2789712f, -0.1767253f, +0.3552170f, +0.1506508f, +0.0144641f, -0.1301829f, +0.1208252f, +0.8751866f,
  -0.1633868f, -0.1433056f, +0.2440951f, -0.4877250f, +0.1520617f, +0.0468476f, +0.0904032f, +0.4592460f,
  +0.0327426f, +0.3106785f, -0.3455616f, -0.0277271f, -0.2925850f, +0.1742930f, -0.0000830f, -0.4944065f,
  -0.1735158f, -0.4388908f, -0.1398031f, -0.2023641f, -0.1623184f, -0.3399732f, -0.0717289f, +0.2347363f,
  -0.1542713f, -0.0175296f, -0.3217706f, +0.0284277f, -0.0995210f, -0.1398329f, +0.0538553f, +0.1265311f,
  +0.0581543f, -0.1060741f, -0.1137984f, +0.0727636f, -0.0444089f, +0.0193875f, -0.1316991f, -0.0213649f,
  +0.1031046f, -0.1988664f, +0.0576594f, -0.1926276f, +0.0364205f, -0.1843094f, +0.1370258f, +0.2663208f,
  -0.4461529f, -0.0916646f, -0.0744441f, +0.1117359f, -0.2838284f, -0.0694510f, +0.2433907f, -0.1458057f,
  -0.1108851f, +0.0817500f, -0.0795483f, +0.1904823f, -0.0620858f, -0.2154068f, -0.1035448f, -0.0029106f,
  -0.0151881f, -0.2847393f, -0.0281544f, +0.3078823f, -0.1567435f, -0.1563540f, -0.0907578f, +0.0101615f,
  -0.0295764f, -0.0734868f, +0.0409059f, +0.0182509f, -0.0803301f, +0.0046175f, -0.1275483f, -0.2101668f,
  +0.0462671f, +0.0308356f, +0.1479669f, +0.2176346f, +0.0221342f, -0.0595545f, -0.0550711f, -0.1120084f,
  +0.1249653f, +0.1568776f, +0.0977061f, +0.1108395f, +0.1741640f, +0.1076467f, +0.0228373f, -0.0007514f,
  -0.0880652f, +0.0157675f, +0.0285693f, +0.1123003f, +0.1606164f, +0.0826141f, -0.1552861f, -0.0477397f,
  -0.0827839f, +0.2129922f, +0.0475923f, +0.1167211f, +0.1416228f, +0.0099143f, -0.0500062f, -0.1895052f,
  +0.2533598f, +0.1530112f, -0.0460582f, +0.2562911f, -0.0853232f, -0.0860534f, -0.0136013f, -0.1503634f,
  +0.1753542f, +0.3386942f, -0.0209134f, +0.2293105f, -0.0037719f, +0.1993510f, -0.3327951f, -0.0864901f,
  -0.1840458f, +0.2411876f, -0.1428900f, -0.0445558f, +0.0196698f, +0.0684983f, -0.1433810f, +0.0588278f,
  +0.0892199f, +0.0572790f, +0.0014803f, -0.1042039f, +0.1864415f, +0.0898463f, +0.0826198f, +0.1769100f,
  +0.3056554f, +0.0536575f, +0.0402853f, -0.1370961f, +0.1390229f, +0.0080071f, -0.1962757f, +0.2127416f,
  +0.0283933f, +0.1637743f, -0.0047749f, +0.0352820f, -0.0134032f, +0.1184964f, -0.0505784f, -0.0587915f,
  -0.1160565f, -0.2523004f, +0.0009845f, -0.0694540f, -0.0254956f, -0.0688187f, +0.0276078f, +0.2044919f,
  -0.1361796f, +0.0489768f, -0.1417775f, +0.0136368f, -0.1091302f, +0.0669126f, +0.0291075f, -0.1361728f,
  +0.0881055f, -0.0204062f, -0.0794680f, +0.0182952f, -0.0460525f, +0.0630043f, -0.2712823f, -0.0069247f,
  +0.1043411f, +0.0796074f, -0.0983383f, -0.0331681f, -0.1272025f, -0.2033097f, +0.1157997f, -0.3073490f,
  +0.3574460f, -0.1918896f, +0.1643693f, +0.7979692f, -0.0763444f, -0.1491268f, +0.0972375f, +0.2076239f,
  +0.4559750f, +0.0677531f, -0.0436607f, +0.0217297f, -0.0338291f, -0.1575051f, -0.1377932f, +0.0906998f,
  -0.2052862f, -0.1743066f, +0.0875523f, +0.2228793f, -0.0812467f, -0.0673774f, -0.0299725f, +0.3720555f,
  -0.0437177f, +0.0356813f, +0.0464060f, +0.1971186f, -0.2125605f, +0.1155265f, -0.0330101f, -0.5856082f,
  +0.2695091f, +0.0312121f, -0.3837074f, +0.1579884f, -0.0495921f, +0.0127565f, -0.1697187f, -0.2888618f
);

const float biases[4] = float[4](
  -0.0528367f, -0.0568835f, -0.0078058f, +0.0135450f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer62 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1296650f, -0.0746583f, +0.1122641f, -0.2103639f, +0.0563343f, +0.1565578f, +0.2750298f, -0.2213110f,
  +0.1312681f, -0.1820579f, +0.0035042f, -0.2587996f, -0.2526442f, -0.0634541f, +0.1207235f, -0.0198215f,
  +0.2113046f, -0.1870047f, -0.1858490f, -0.0716221f, -0.2419863f, -0.1105884f, -0.1615756f, +0.2495982f,
  -0.0969618f, -0.2873284f, +0.1747660f, +0.2939239f, +0.1981400f, -0.1310723f, +0.2875803f, -0.3433350f,
  +0.5810429f, -0.4610211f, +0.1102007f, +0.3156517f, +0.1587710f, -0.0516214f, +0.0515358f, -0.3446283f,
  +0.3200269f, -0.3245966f, -0.0223033f, +0.3721178f, -0.2261353f, -0.2568162f, -0.1183850f, +0.0197383f,
  -0.6000736f, -0.2634135f, +0.4209500f, +0.0102920f, +0.0500434f, -0.0440786f, +0.1207514f, +0.7593290f,
  -0.1717701f, +0.1644140f, -0.2283736f, -0.0279555f, -0.0188551f, -0.0676925f, +0.2068863f, -0.0141812f,
  -0.2660629f, -0.1250031f, +0.0744063f, +0.0482642f, -0.1850439f, -0.0363059f, +0.0158067f, -0.0921237f,
  +0.1275093f, +0.2066291f, +0.0235773f, +0.1733753f, -0.0434352f, +0.0266521f, -0.0502469f, +0.0442976f,
  +0.0746377f, +0.2020816f, +0.0049324f, +0.0015002f, -0.0568581f, +0.0556508f, -0.0813577f, -0.1022415f,
  -0.0264035f, +0.1232689f, +0.0653480f, +0.0834000f, -0.0387587f, -0.0070708f, +0.1104223f, -0.0521891f,
  -0.1151380f, +0.0601095f, -0.2323538f, +0.1130236f, -0.1487962f, +0.0042111f, -0.2460715f, -0.3108438f,
  +0.0589999f, -0.0587095f, +0.2061515f, -0.1525012f, -0.0112024f, -0.3306856f, -0.2080223f, +0.2258968f,
  -0.0203341f, +0.0311114f, +0.0351771f, -0.1412444f, -0.0172614f, +0.3499758f, +0.1977051f, -0.0927681f,
  +0.2596874f, +0.2220300f, -0.0758208f, +0.0790771f, -0.1880746f, -0.0807460f, -0.0378432f, -0.0665898f,
  +0.0025013f, +0.0758644f, +0.0752005f, +0.0916812f, -0.0075889f, +0.2239420f, -0.0538903f, +0.4387616f,
  +0.0294517f, -0.0139630f, -0.0117232f, -0.2058527f, -0.0965456f, +0.0515498f, -0.0709391f, +0.0762357f,
  -0.0834466f, -0.1966636f, +0.0473324f, -0.1177297f, -0.0243767f, -0.0386346f, +0.0544214f, +0.0070236f,
  +0.0454178f, -0.0540364f, +0.0185088f, -0.1064055f, -0.1131457f, -0.0450299f, +0.1356993f, +0.0716989f,
  +0.0313584f, -0.0704331f, -0.0955799f, +0.0184644f, -0.0529402f, -0.0657220f, +0.0257055f, +0.0375322f,
  +0.2818621f, -0.1833284f, +0.2666605f, +0.5183518f, +0.0874319f, -0.1552588f, +0.2634425f, +0.3517326f,
  -0.1086994f, -0.4368019f, +0.1173994f, +0.6196077f, -0.1185630f, -0.2604114f, +0.2668205f, -0.1197858f,
  +0.1755148f, -0.0444088f, -0.0522028f, +0.0597642f, -0.0078026f, +0.0031546f, +0.0984913f, -0.1419151f,
  -0.1210361f, -0.1218390f, +0.1769188f, +0.3775502f, -0.2101790f, -0.2414765f, +0.0231415f, +0.4389360f,
  -0.3227305f, -0.3636858f, +0.5592281f, +0.1908228f, -0.0713624f, +0.0279269f, +0.1391853f, +0.0081531f,
  -0.0154494f, -0.0299069f, -0.2848993f, +0.0534383f, -0.1067803f, -0.0214003f, +0.0929562f, -0.1877301f,
  -0.0985157f, -0.3026482f, -0.0260205f, -0.0924977f, -0.0718519f, +0.0614892f, +0.0684092f, +0.0477864f,
  -0.1320974f, -0.0595336f, +0.0509313f, +0.3197346f, -0.0195088f, +0.0116144f, -0.1399788f, -0.1690648f,
  +0.0183245f, -0.0476010f, -0.0334044f, +0.1100062f, -0.0795259f, +0.2304203f, -0.2685015f, -0.0911588f,
  +0.0167950f, +0.0043805f, +0.0783001f, -0.2937929f, -0.0308009f, -0.0080670f, +0.2156459f, +0.1818145f,
  -0.3887078f, +0.4591379f, -0.5469679f, -0.1428542f, +0.1996022f, +0.2254720f, -0.0110485f, -0.4344660f,
  -0.2654584f, -0.0228221f, +0.3578816f, +0.4268110f, -0.0317218f, -0.0054452f, -0.0232525f, +0.0567660f,
  -0.1157830f, -0.1780532f, +0.0153530f, -0.0698641f, -0.0231482f, -0.0781157f, +0.1926900f, +0.0336321f,
  -0.1476591f, -0.0309014f, +0.0422532f, -0.2317522f, +0.0163766f, +0.0499757f, +0.2560551f, +0.4748608f,
  -0.3924817f, +0.0309460f, +0.1118306f, -0.1116891f, -0.1378451f, +0.0173082f, +0.1367135f, -0.1010871f
);

const float biases[4] = float[4](
  -0.0234942f, -0.0205476f, +0.0149111f, -0.0094137f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer63 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.0137018f, -0.0169701f, +0.1287659f, +0.0868869f, -0.0621243f, -0.0830984f, -0.0338767f, +0.0097375f,
  +0.0339772f, -0.0308466f, +0.2509039f, +0.1939894f, -0.0713501f, -0.1640605f, -0.1105008f, -0.0305258f,
  +0.0728085f, -0.0463766f, +0.0779249f, +0.0374945f, +0.1550500f, +0.0590334f, -0.1107352f, +0.0259159f,
  +0.0761873f, -0.2867504f, -0.5175464f, +0.2609818f, -0.0710668f, +0.3507505f, +0.3608064f, +0.1789083f,
  -0.2073953f, +0.3685996f, -0.2329310f, -0.3143879f, +0.0499731f, -0.6036567f, -0.4766585f, +0.0391821f,
  +0.0285805f, -0.1096351f, +0.2143199f, +0.1473622f, -0.0243705f, +0.0288252f, -0.0719861f, -0.1588972f,
  -0.2760838f, +0.0342427f, +0.1466959f, -0.1553245f, +0.2588010f, +0.3765103f, +0.3494365f, -0.1827844f,
  -0.2412395f, +0.1566297f, +0.0231440f, +0.1187037f, -0.1966928f, -0.2529977f, -0.0798069f, +0.8126030f,
  -0.1131615f, +0.2144383f, +0.0572524f, -0.0628104f, +0.1063114f, +0.2251716f, -0.1664312f, -0.1545675f,
  +0.0315614f, -0.0119449f, -0.0843338f, +0.1612429f, -0.0021608f, -0.4372880f, -0.1305674f, -0.2527002f,
  -0.0927644f, -0.1736287f, +0.1427538f, -0.0624957f, -0.0073296f, -0.1199390f, +0.0339793f, +0.0632915f,
  -0.1227197f, +0.1926174f, -0.1309815f, -0.0175775f, -0.0374618f, -0.0829475f, +0.0311382f, -0.0945978f,
  -0.0864784f, -0.1246414f, +0.0859158f, +0.2512820f, +0.1776196f, -0.4322172f, +0.1209306f, -0.0554655f,
  +0.1193708f, +0.0605433f, -0.0596577f, -0.0966687f, +0.1369963f, -0.1964668f, +0.0841118f, +0.0897441f,
  +0.0215061f, -0.1323681f, -0.0430378f, +0.1790127f, +0.0732939f, -0.2419307f, +0.0766940f, -0.0222726f,
  +0.0606042f, -0.1357094f, +0.0613708f, +0.3710972f, -0.0347920f, -0.3936815f, +0.0423003f, +0.1126576f,
  +0.1284387f, -0.3462011f, +0.1702367f, +0.0089050f, -0.0138705f, -0.1522192f, +0.3556793f, +0.0516182f,
  -0.1545826f, -0.0277521f, +0.2991441f, -0.1123942f, -0.0016294f, +0.0117479f, +0.2222291f, +0.0915217f,
  +0.0296272f, +0.0038353f, -0.0496199f, +0.0211943f, +0.0516200f, +0.1616208f, +0.0136421f, +0.1309219f,
  +0.0006416f, -0.1272153f, -0.1304256f, +0.0206194f, +0.1263448f, -0.2956679f, -0.2509206f, -0.0524037f,
  -0.0389797f, -0.1556918f, +0.1980408f, +0.1794060f, +0.0495889f, -0.1292793f, -0.0421829f, -0.0006284f,
  -0.1088771f, +0.0466139f, +0.1136627f, -0.2298522f, +0.1072462f, +0.2796408f, +0.2238457f, +0.0138227f,
  +0.2427109f, -0.0856672f, +0.1642572f, +0.1725823f, -0.1253727f, -0.0920774f, -0.5844295f, -0.0277846f,
  -0.1732122f, +0.0671367f, +0.2751683f, -0.2355663f, +0.0947345f, +0.1938848f, +0.0671649f, +0.0987612f,
  +0.0771396f, +0.0444603f, -0.1149191f, -0.1622523f, -0.0432932f, +0.1367514f, +0.0947787f, -0.2188634f,
  -0.2180180f, -0.0318413f, +0.1484588f, +0.2755423f, +0.1761860f, -0.0093642f, -0.0472414f, +0.2036214f,
  +0.0176189f, -0.0845784f, +0.0619043f, +0.0628318f, -0.0462020f, -0.1795543f, +0.0749740f, +0.0613060f,
  -0.5338129f, +0.2199186f, -0.2050662f, -0.1220686f, +0.4181700f, +0.0055314f, +0.0281647f, +0.0970196f,
  -0.1250063f, +0.0565123f, -0.2544468f, +0.0305566f, -0.1572891f, -0.0275797f, +0.0471426f, +0.0272105f,
  -0.1944327f, +0.2239802f, -0.3811232f, -0.0591507f, +0.0112521f, +0.2212357f, -0.0203636f, +0.0210642f,
  -0.4475174f, +0.0552436f, -0.4200949f, +0.1603351f, +0.4546971f, +0.3026492f, -0.2249792f, +0.2422349f,
  +0.0286915f, -0.1205345f, -0.2346012f, +0.3040102f, -0.0800049f, -0.2218963f, +0.1597458f, +0.1171222f,
  -0.1808193f, +0.2407939f, +0.0271503f, -0.1487450f, +0.1316662f, +0.2137128f, -0.0993033f, -0.0058182f,
  -0.2032169f, -0.0828071f, +0.0475815f, +0.1222154f, +0.0310615f, -0.0471609f, +0.0353890f, -0.1077479f,
  +0.2243084f, -0.2242562f, -0.2274226f, +0.1395371f, -0.0491979f, -0.2235997f, +0.1549827f, -0.0933582f,
  +0.0825800f, +0.1763593f, -0.0140774f, -0.0200471f, +0.0317685f, +0.1623713f, -0.0268927f, -0.0322479f
);

const float biases[4] = float[4](
  -0.0473079f, +0.0143728f, +0.0372846f, -0.0195450f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer63 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L1
//!COMPONENTS 4

#define ACTIVE(v) (max(v, v * 0.2000000f))

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  -0.1412978f, +0.0578601f, +0.4088854f, -0.1614867f, -0.0887013f, +0.2866534f, +0.2465544f, +0.1878082f,
  +0.0848682f, -0.0128807f, +0.4206511f, +0.0927811f, +0.0247644f, -0.0787027f, +0.0599197f, +0.0822763f,
  +0.1276171f, -0.2197721f, +0.3862552f, +0.0643080f, +0.1639550f, +0.0236989f, +0.0330741f, +0.3140133f,
  +0.0850810f, -0.0900373f, +0.3677916f, +0.0563339f, -0.3754171f, -0.0406981f, +0.0132516f, -0.0150280f,
  +0.1885961f, +0.0847587f, +0.2984874f, -0.0226322f, +0.0483399f, +0.0622572f, -0.3225584f, -0.0788753f,
  +0.0820770f, +0.1346883f, +0.2955843f, +0.0457212f, +0.1720894f, +0.1220847f, -0.1444231f, +0.1560488f,
  +0.0018250f, +0.0302424f, +0.0977483f, +0.0806098f, -0.3494761f, -0.2887881f, +0.0241786f, -0.3520851f,
  +0.2773074f, -0.0725003f, -0.0724491f, -0.0673493f, -0.1383391f, +0.2207125f, -0.2514324f, -0.3413767f,
  +0.1578976f, -0.0388289f, +0.0859275f, +0.0784554f, +0.1099790f, -0.0014640f, -0.1320838f, -0.0642248f,
  +0.0756069f, -0.1364112f, -0.1640202f, +0.2261074f, -0.1578624f, -0.2508529f, -0.0300753f, -0.0986290f,
  -0.0743530f, -0.2564189f, -0.4687147f, -0.0164809f, -0.1641361f, +0.1168416f, +0.2602859f, +0.1311647f,
  -0.1374245f, +0.0554364f, -0.4055432f, +0.1890917f, -0.0987880f, +0.0186758f, +0.1317984f, +0.1229733f,
  -0.2400400f, -0.0587894f, +0.0295885f, +0.1363351f, +0.0119673f, -0.1373565f, +0.1032015f, -0.0469132f,
  +0.3225730f, +0.1870162f, -0.5212150f, -0.1455649f, +0.0059031f, -0.1477807f, +0.0086838f, -0.2135012f,
  -0.1312883f, +0.4913429f, -0.0665697f, +0.2786320f, +0.1702326f, +0.1622451f, -0.2364889f, -0.0503278f,
  -0.0116915f, -0.0991789f, +0.0517907f, +0.0899670f, +0.0061490f, -0.0575954f, +0.0259137f, +0.0374081f,
  +0.0897244f, +0.0320110f, -0.1688346f, -0.1335685f, +0.0388429f, +0.0355481f, +0.0128929f, -0.1739340f,
  -0.1193134f, -0.1072875f, +0.0842397f, -0.0392464f, +0.0372303f, +0.0034831f, +0.1887109f, +0.1196306f,
  +0.1163793f, -0.2618925f, -0.0173030f, +0.1642919f, +0.1019051f, -0.0165937f, -0.0470238f, +0.1304386f,
  -0.0210563f, +0.1534902f, -0.0349984f, +0.1674434f, -0.2409004f, -0.3342535f, -0.0891147f, -0.2027359f,
  +0.0363262f, +0.0448535f, +0.1587937f, -0.0414094f, +0.1051486f, +0.1414935f, -0.0833063f, -0.0280247f,
  -0.0734418f, +0.3424353f, +0.7540243f, +0.1074276f, -0.1776367f, -0.3529143f, -0.1627955f, -0.1322264f,
  -0.2313170f, +0.1099339f, -0.3689765f, -0.1302828f, +0.2708372f, +0.2479379f, +0.0042650f, +0.0844300f,
  -0.0587678f, -0.1501860f, +0.1958039f, -0.0297426f, -0.0644886f, +0.1149381f, +0.1295761f, +0.1965854f,
  -0.6050146f, -0.2897942f, -0.5859888f, +0.2754973f, -0.0267421f, -0.1204978f, +0.3641718f, +0.5456309f,
  +0.0802997f, -0.1075199f, -0.4094077f, +0.3182449f, -0.1202457f, +0.1844718f, -0.5147536f, -0.4344486f,
  +0.1035433f, +0.0116871f, -0.2709448f, +0.0244520f, -0.0599166f, -0.2962861f, +0.2310101f, -0.0707724f,
  -0.0818957f, +0.0955267f, +0.2108315f, -0.1137591f, -0.0303842f, +0.1301680f, +0.0685147f, +0.0811935f,
  +0.0909848f, +0.2061009f, +0.0481956f, -0.3019898f, +0.2478048f, +0.3268946f, -0.0616992f, +0.2028973f,
  +0.0283275f, -0.1583055f, -0.0838443f, -0.0788706f, -0.0036478f, -0.1667079f, +0.0637253f, -0.0095855f,
  +0.0195432f, -0.0878610f, -0.0199064f, +0.0299169f, -0.0633997f, -0.1446220f, -0.0757050f, -0.1221781f,
  -0.0204139f, -0.0868932f, +0.2120755f, +0.4575434f, -0.2589309f, -0.3521382f, -0.1713550f, -0.2245586f,
  +0.0958750f, -0.0624985f, -0.1374988f, +0.0427068f, +0.0787277f, +0.0234705f, -0.1731453f, +0.1449458f,
  +0.0682562f, +0.0270851f, +0.0974885f, -0.0150677f, -0.0613693f, -0.0211361f, +0.0145808f, -0.0624973f,
  -0.0079734f, -0.0865507f, +0.3353342f, -0.1407330f, +0.0649657f, +0.1266760f, +0.0721888f, +0.0563248f,
  -0.0339905f, +0.1699880f, +0.3053405f, -0.1063480f, +0.0567663f, +0.2041863f, -0.0368158f, +0.0447445f
);

const float biases[4] = float[4](
  -0.0573802f, -0.0114172f, -0.0380918f, +0.0461596f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer64 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L0
//!BIND FEAT_L0
//!SAVE TMP2_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L2_TEX TMP2_L0_tex
#define TEX_BIND_L2_POS TMP2_L0_pos
#define TEX_BIND_L2_SIZE TMP2_L0_size
#define TEX_BIND_L2_PT TMP2_L0_pt

#define TEX_BIND_L3_TEXOFF FEAT_L0_texOff
#define TEX_BIND_L3_TEX FEAT_L0_tex
#define TEX_BIND_L3_POS FEAT_L0_pos
#define TEX_BIND_L3_SIZE FEAT_L0_size
#define TEX_BIND_L3_PT FEAT_L0_pt

const float kernels[288] = float[288](
  -0.1376305f, -0.1963000f, +0.0537904f, +0.1366854f, +0.0890574f, -0.1295981f, -0.2299805f, +0.1202285f,
  +0.4467730f, +0.1918317f, +0.1359670f, +0.4209286f, -0.1961325f, +0.0245430f, -0.2704151f, -0.2806201f,
  -0.6589071f, +0.0802497f, -0.0446494f, -0.5606215f, -0.1312731f, +0.1638169f, +0.7664774f, -0.5244325f,
  -0.0814316f, -0.1521859f, -0.1990015f, +0.0308022f, -0.0306191f, +0.0609036f, -0.0931121f, +0.2922215f,
  -0.3642882f, -0.1123130f, -0.2447282f, +0.6957637f, -0.2883248f, +0.1117399f, +0.0951234f, -0.0109366f,
  +0.3694480f, +0.0238101f, +0.2561399f, -0.5486874f, -0.0970618f, -0.1346254f, +0.4145276f, +0.3421510f,
  -0.2024645f, -0.0815084f, +0.2636585f, -0.2915746f, +0.0612482f, +0.1355408f, +0.0676292f, +0.2565908f,
  -0.0282054f, -0.0303221f, +0.1516291f, +0.7289066f, +0.0301551f, +0.2002799f, -0.3442834f, +0.1101895f,
  -0.0886544f, +0.3047773f, -0.3745617f, +0.1583138f, -0.0439576f, +0.1136964f, +0.1888196f, -0.3128503f,
  +0.1574040f, +0.2103311f, -0.0614307f, -0.2872962f, -0.1154827f, -0.0976223f, +0.4577500f, -0.1022822f,
  -0.0173466f, +0.3040396f, -0.0729731f, -0.4172764f, -0.0837073f, -0.1383289f, +0.4714090f, +0.0096511f,
  -0.2195125f, -0.0413225f, -0.0038736f, +0.2502572f, -0.0135924f, -0.2007071f, +0.3932064f, -0.0947801f,
  +0.0200720f, +0.0511730f, -0.1148267f, -0.2179218f, +0.0543427f, -0.0979479f, -0.1945780f, +0.3448091f,
  -0.1988472f, +0.0799555f, -0.0263424f, -0.2081474f, +0.1340544f, -0.0367502f, -0.0320660f, -0.0814195f,
  -0.0031443f, -0.0562356f, -0.0373533f, -0.0994353f, -0.0208800f, -0.1276904f, +0.2916844f, +0.0296838f,
  +0.0902028f, +0.1530055f, -0.0645322f, -0.1312819f, -0.0539333f, +0.1793274f, -0.0300893f, +0.1761945f,
  +0.0332451f, +0.0727407f, +0.1179365f, -0.3968898f, +0.0224536f, +0.1964600f, +0.1288979f, +0.0737163f,
  +0.0137999f, -0.0946944f, -0.0467345f, +0.1735054f, +0.0555864f, -0.0314858f, +0.1942166f, -0.0326006f,
  -0.0861539f, -0.0890863f, +0.0836607f, +0.1885950f, +0.0557901f, +0.1140966f, -0.2564256f, -0.1935022f,
  +0.0158476f, +0.0652436f, -0.0860513f, +0.2109708f, +0.0144073f, +0.2821110f, -0.0086555f, -0.2693291f,
  -0.0771722f, -0.0270934f, +0.0629608f, -0.5332134f, -0.0843263f, +0.2468243f, +0.1460194f, -0.1510384f,
  -0.0608490f, -0.0686654f, +0.0963143f, -0.0925008f, -0.0808406f, +0.0299117f, +0.0677580f, -0.0632388f,
  -0.0667766f, -0.1869165f, +0.0454952f, -0.2272899f, -0.2469146f, +0.0502044f, -0.1393299f, +0.0480286f,
  -0.1331310f, -0.0786749f, +0.1335834f, -0.4296904f, -0.1668188f, -0.1676845f, +0.6316555f, +0.2423055f,
  -0.0256610f, -0.0260629f, +0.0329353f, -0.0490512f, -0.0996217f, +0.0544780f, +0.0016287f, +0.2055425f,
  +0.0232241f, -0.0499754f, +0.0121821f, +0.2391382f, -0.0120732f, +0.1526455f, +0.0383996f, +0.0163726f,
  +0.0216661f, +0.0625788f, -0.0484957f, -0.0603859f, -0.1512538f, +0.1672022f, +0.1528458f, -0.0209767f,
  +0.0593493f, +0.1276975f, +0.1179502f, -0.0391055f, +0.0305516f, +0.0931910f, +0.2946945f, -0.3318336f,
  -0.1249560f, +0.2805247f, -0.1231218f, -0.1711649f, -0.0848705f, +0.1501975f, +0.1100402f, -0.2549422f,
  -0.3546371f, +0.0673357f, +0.0547771f, +0.0237250f, -0.0551552f, -0.0618136f, +0.1247039f, -0.0312492f,
  +0.0341053f, -0.1253815f, -0.2173037f, -0.1062718f, -0.0075346f, -0.2141583f, -0.1214531f, +0.4743020f,
  -0.4499094f, -0.0914699f, +0.2911447f, +0.0896899f, +0.0616924f, -0.1386903f, +0.0396570f, -0.1792497f,
  +0.2547499f, +0.0326571f, +0.1536994f, +0.2112840f, +0.0930831f, -0.1042812f, -0.0132169f, +0.2538157f,
  +0.0242538f, +0.0570023f, +0.0567370f, +0.0286729f, +0.0094669f, +0.0707422f, +0.0760574f, +0.1479932f,
  +0.0680396f, +0.0447767f, +0.0823215f, +0.2312317f, -0.0321944f, +0.0772813f, -0.0108526f, +0.3533564f,
  -0.0573721f, +0.0536008f, -0.0521705f, +0.2169118f, +0.0012036f, -0.0663546f, +0.2118619f, -0.2323654f
);

const float biases[4] = float[4](
  +0.0288194f, -0.0617010f, +0.0244644f, +0.0197814f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)) + TEX_BIND_L3_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer64 L1
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP1_L0
//!BIND TMP1_L1
//!BIND TMP2_L1
//!BIND FEAT_L1
//!SAVE TMP2_L1
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

#define TEX_BIND_L1_TEXOFF TMP1_L1_texOff
#define TEX_BIND_L1_TEX TMP1_L1_tex
#define TEX_BIND_L1_POS TMP1_L1_pos
#define TEX_BIND_L1_SIZE TMP1_L1_size
#define TEX_BIND_L1_PT TMP1_L1_pt

#define TEX_BIND_L2_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L2_TEX TMP2_L1_tex
#define TEX_BIND_L2_POS TMP2_L1_pos
#define TEX_BIND_L2_SIZE TMP2_L1_size
#define TEX_BIND_L2_PT TMP2_L1_pt

#define TEX_BIND_L3_TEXOFF FEAT_L1_texOff
#define TEX_BIND_L3_TEX FEAT_L1_tex
#define TEX_BIND_L3_POS FEAT_L1_pos
#define TEX_BIND_L3_SIZE FEAT_L1_size
#define TEX_BIND_L3_PT FEAT_L1_pt

const float kernels[288] = float[288](
  -0.1776821f, -0.1844727f, +0.2128223f, +0.1348288f, +0.0547458f, -0.0368312f, -0.0452800f, +0.2871680f,
  -0.0542070f, +0.1206774f, -0.1558081f, +0.0613561f, -0.2628784f, -0.0765421f, -1.0405263f, +0.2752420f,
  +0.1768268f, +0.1285489f, -0.0016042f, -0.0831957f, -0.0526876f, -0.2698746f, -0.0018656f, +0.0807227f,
  +0.0614111f, -0.2204273f, -0.3027005f, -0.0217797f, -0.0872424f, +0.0641711f, +0.0088895f, +0.6447423f,
  +0.1543313f, +0.0397348f, +0.5059988f, +0.2379354f, +0.0483206f, -0.5167245f, -0.0088902f, +0.5663503f,
  -0.1625647f, +0.1294233f, -0.0402636f, +0.1769942f, +0.1911437f, +0.0452996f, -0.0585950f, -0.1732907f,
  -0.1698793f, -0.0513287f, +0.2152880f, -0.0672748f, -0.0471308f, -0.0530938f, +0.2162306f, +0.2176908f,
  +0.0512402f, -0.1293316f, -0.0929690f, +0.3659239f, -0.0371911f, -0.0279946f, -0.3891096f, -0.2247368f,
  -0.0744252f, +0.1291485f, -0.0936658f, +0.1381407f, +0.0804213f, +0.0002940f, -0.0825457f, -0.2751579f,
  +0.1138402f, +0.0486469f, +0.0045677f, +0.0154776f, +0.0445464f, +0.0718293f, +0.0988962f, -0.1846804f,
  +0.1023975f, -0.0180341f, +0.1483504f, -0.0111149f, -0.0221929f, +0.0423439f, +0.2855527f, -0.0704362f,
  +0.1710240f, +0.1298018f, -0.0214246f, -0.0697510f, +0.0771697f, +0.1859951f, -0.1239547f, -0.0113943f,
  -0.0444595f, +0.0071985f, +0.0161526f, +0.1394450f, -0.0221299f, -0.1519032f, -0.0693374f, -0.0325692f,
  -0.3558740f, +0.1124314f, +0.1476301f, +0.6979784f, -0.0744958f, +0.0332025f, +0.0041369f, +0.1059135f,
  -0.1380684f, +0.1951856f, +0.0234933f, +0.2591651f, +0.1346983f, +0.0480730f, -0.1210141f, +0.2741933f,
  -0.0090414f, -0.0596578f, +0.0041059f, +0.0959275f, +0.2233657f, +0.0015735f, -0.0826769f, -0.0915826f,
  -0.1021563f, +0.0371378f, +0.0424195f, +0.2880173f, +0.0881403f, -0.1837244f, -0.0149553f, -0.2661496f,
  -0.0908004f, +0.1231910f, -0.0887175f, +0.0617524f, +0.0046548f, -0.0442618f, -0.0010509f, +0.0694407f,
  -0.1533719f, -0.0423400f, +0.0574504f, +0.0412589f, +0.0332400f, -0.1184289f, -0.0575553f, +0.1848662f,
  -0.2504984f, +0.0231765f, +0.0356529f, +0.1112943f, +0.0200857f, -0.1296395f, -0.4307542f, +0.2762706f,
  +0.0077175f, -0.0847144f, -0.0758003f, -0.0615763f, +0.0148597f, -0.1048280f, +0.0797815f, -0.0456979f,
  +0.0051210f, -0.0793467f, -0.1434804f, -0.2148630f, +0.0723719f, +0.3832245f, -0.2526706f, -0.0646731f,
  -0.9052657f, +0.1044963f, +0.4806159f, +0.0132714f, +0.0574697f, -0.0029680f, -0.3565143f, -0.0790889f,
  +0.2290940f, +0.0333822f, -0.0208803f, +0.0763117f, +0.0835336f, +0.1445773f, -0.2199721f, +0.0590843f,
  -0.1180042f, -0.0248179f, +0.0901745f, -0.2532604f, +0.1063149f, -0.0515022f, +0.1136757f, -0.1720936f,
  -0.0495258f, -0.0835137f, +0.3414249f, +0.0839614f, +0.1603726f, -0.2210310f, -0.2612287f, +0.2165158f,
  -0.1743700f, +0.0311473f, -0.0597319f, +0.0073986f, +0.1552464f, -0.0516246f, +0.2276405f, +0.0452732f,
  +0.0036166f, +0.0671754f, -0.0187912f, -0.1274115f, +0.1270797f, +0.1856647f, -0.0413934f, -0.2890120f,
  +0.0976298f, +0.0867769f, -0.4167385f, +0.1858787f, -0.0448243f, +0.2360335f, -0.2091609f, -0.3466117f,
  -0.2048477f, +0.0150116f, +0.1416030f, +0.0810412f, -0.0251595f, -0.0120511f, +0.2308276f, +0.0650265f,
  +0.0632243f, -0.0156709f, -0.0575897f, +0.0000985f, +0.2928101f, +0.0694174f, +0.0407117f, -0.3334712f,
  +0.0782903f, -0.0724990f, -0.7013446f, +0.3147819f, +0.3446932f, +0.2897505f, -0.1624055f, +0.6206983f,
  -0.1784130f, -0.0856387f, -0.2824152f, +0.3438143f, +0.3151824f, -0.0555977f, +0.3947533f, +0.4927033f,
  -0.0692690f, +0.0275401f, +0.0090778f, -0.0352193f, -0.0286126f, +0.0054751f, -0.0350719f, +0.0028988f,
  +0.0135805f, -0.0760992f, +0.0417569f, +0.1420368f, +0.0168012f, +0.4399625f, -0.1702442f, -0.1549440f,
  +0.0588058f, +0.1248791f, -0.2875290f, -0.0552973f, -0.0203671f, +0.0346727f, -0.1701422f, -0.0316470f
);

const float biases[4] = float[4](
  -0.0623125f, -0.0050097f, -0.0746281f, -0.0515667f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]) * 0.2000000f + TEX_BIND_L2_TEXOFF(vec2(0.0f, 0.0f)) + TEX_BIND_L3_TEXOFF(vec2(0.0f, 0.0f)));
}

//!HOOK LUMA
//!DESC ARNet b32 Layer65 L0
//!WHEN OUTPUT.w LUMA.w / 1.2 > OUTPUT.h LUMA.h / 1.2 > *
//!BIND TMP2_L0
//!BIND TMP2_L1
//!SAVE TMP1_L0
//!COMPONENTS 4

#define ACTIVE(v) (v)

#define TEX_BIND_L0_TEXOFF TMP2_L0_texOff
#define TEX_BIND_L0_TEX TMP2_L0_tex
#define TEX_BIND_L0_POS TMP2_L0_pos
#define TEX_BIND_L0_SIZE TMP2_L0_size
#define TEX_BIND_L0_PT TMP2_L0_pt

#define TEX_BIND_L1_TEXOFF TMP2_L1_texOff
#define TEX_BIND_L1_TEX TMP2_L1_tex
#define TEX_BIND_L1_POS TMP2_L1_pos
#define TEX_BIND_L1_SIZE TMP2_L1_size
#define TEX_BIND_L1_PT TMP2_L1_pt

const float kernels[288] = float[288](
  +0.0430900f, -0.0697216f, -0.1351205f, -0.0192249f, -0.0491351f, +0.1594570f, +0.1366026f, +0.1038102f,
  +0.0047504f, +0.0421185f, -0.0508487f, -0.0598125f, -0.0072821f, -0.0133535f, -0.0262950f, +0.0480135f,
  -0.0136917f, -0.0488227f, +0.0436711f, +0.0117398f, -0.0014410f, -0.0510877f, +0.0293469f, +0.0100775f,
  -0.3123477f, +0.0159393f, +0.0293421f, -0.1679319f, +0.1962833f, +0.1648909f, +0.1815776f, -0.0166724f,
  +0.0021567f, +0.0746716f, -0.0722321f, +0.2375959f, +0.0529772f, +0.2376353f, -0.4030130f, -0.0901046f,
  +0.0115909f, -0.0021640f, -0.0736076f, -0.0144621f, -0.0154573f, +0.0308386f, -0.0245328f, +0.0298474f,
  +0.0481395f, +0.0687940f, -0.0559801f, -0.0966335f, -0.0018580f, +0.0699786f, -0.0040467f, -0.1027213f,
  -0.0306035f, +0.0718497f, +0.0041135f, +0.0096419f, +0.0236196f, +0.0413217f, -0.0102352f, +0.0566568f,
  -0.0207857f, +0.0440294f, +0.0319131f, -0.0037172f, +0.0142221f, +0.0351332f, -0.0107397f, +0.0337721f,
  -0.0402385f, +0.1312465f, +0.1356089f, -0.1887448f, +0.0199891f, +0.1954501f, +0.1127623f, +0.1229078f,
  +0.0173153f, +0.0111197f, -0.0218738f, -0.0208548f, -0.0265043f, +0.1416410f, +0.1994663f, +0.0762504f,
  +0.0043671f, -0.0367359f, -0.0326896f, -0.0338010f, -0.0251312f, -0.0452879f, +0.0565015f, +0.0315855f,
  +0.0432661f, -0.0478780f, -0.3256687f, -0.1238681f, +0.0536419f, +0.0508948f, -0.0567939f, -0.0338187f,
  -0.1067773f, +0.0456785f, +0.0393994f, +0.3307664f, +0.1036242f, +0.1853183f, -0.0114178f, -0.2356848f,
  +0.0356312f, -0.0857341f, -0.0871817f, +0.0759304f, +0.0267197f, -0.0597368f, -0.0477574f, +0.0057894f,
  +0.0147030f, +0.0430752f, -0.0306874f, -0.0582577f, +0.0012533f, +0.0134043f, +0.0027685f, -0.0698366f,
  +0.0466079f, -0.0194005f, -0.0918093f, -0.0060668f, -0.0455922f, +0.0445560f, -0.0435370f, +0.0274747f,
  -0.0070345f, +0.1180220f, +0.0143807f, -0.0303268f, +0.0087316f, +0.0638219f, -0.0172293f, +0.0370756f,
  +0.0003793f, +0.0726061f, +0.0552631f, -0.0859154f, +0.0416611f, +0.1206219f, +0.0288023f, +0.0749403f,
  +0.0482935f, -0.0408421f, -0.0864149f, +0.0092796f, +0.0377129f, -0.0689876f, -0.0837889f, -0.0134041f,
  -0.0160129f, -0.0305069f, +0.0385025f, +0.0042157f, -0.0121955f, -0.0327228f, +0.0168224f, -0.0002321f,
  -0.0997783f, -0.2288541f, -0.2785662f, +0.0671589f, -0.1161202f, +0.0020446f, +0.2330231f, -0.0881646f,
  -0.0997521f, -0.1478750f, -0.0814567f, +0.2770633f, -0.2203681f, +0.0112232f, -0.1119246f, +0.1528542f,
  +0.0100330f, +0.1104006f, -0.0970804f, +0.0062762f, -0.0064696f, +0.1419518f, -0.0585502f, -0.0162074f,
  +0.0457136f, +0.0785083f, -0.1120190f, -0.1672426f, +0.0474735f, +0.0545776f, +0.0069386f, -0.1790770f,
  -0.0174909f, +0.1636264f, -0.0409980f, +0.0856981f, +0.0941852f, +0.2008163f, -0.1829362f, +0.0544627f,
  +0.0193259f, +0.0699406f, -0.0256863f, -0.0482940f, -0.0053764f, +0.0241346f, +0.0092816f, +0.0004089f,
  +0.0385894f, +0.0103413f, +0.0072125f, +0.0486387f, -0.0332748f, -0.1012310f, -0.0329858f, -0.0463572f,
  +0.0031082f, -0.1059461f, -0.0715918f, +0.0389931f, +0.0104474f, +0.0253855f, -0.0171650f, +0.0191379f,
  -0.0059918f, +0.0230960f, -0.0568208f, -0.0047950f, -0.0382626f, +0.0117882f, -0.0210942f, +0.0182414f,
  -0.1231868f, +0.0803103f, +0.0554769f, -0.2775197f, +0.1418311f, +0.3681099f, +0.1153342f, +0.1738271f,
  -0.0896489f, -0.1997834f, +0.0126838f, +0.4379673f, -0.2266888f, -0.0838258f, +0.4277143f, +0.0418270f,
  +0.0285650f, +0.0397722f, -0.0383090f, +0.0290256f, +0.0262346f, +0.0591151f, +0.0159214f, -0.0309077f,
  +0.0640286f, +0.0628949f, -0.0781585f, -0.1234929f, +0.0154338f, -0.0072326f, -0.0515238f, -0.1392661f,
  +0.1899704f, +0.0684441f, -0.3487709f, +0.0267584f, -0.0410941f, +0.1308121f, -0.2230143f, -0.1084550f,
  +0.0468327f, +0.1104202f, -0.1061905f, -0.0369687f, -0.0416742f, +0.0476117f, -0.0356698f, -0.0034678f
);

const float biases[4] = float[4](
  +0.1135169f, +0.1104515f, +0.1136552f, +0.1094338f
);

vec4 hook() {
    const vec4 r[9][2] = vec4[9][2](
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f,-1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f,-1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 0.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 0.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2(-1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2(-1.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 0.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 0.0f, 1.0f))),
        vec4[2](TEX_BIND_L0_TEXOFF(vec2( 1.0f, 1.0f)), TEX_BIND_L1_TEXOFF(vec2( 1.0f, 1.0f)))
    );

    float sum[4] = biases;
    for (int n = 0; n < 4; n++) {
        for (int i = 0; i < 9; i++) {
            const vec4 k0 = vec4(kernels[n * 8 * 9 + 8 * i + 0], kernels[n * 8 * 9 + 8 * i + 1], kernels[n * 8 * 9 + 8 * i + 2], kernels[n * 8 * 9 + 8 * i + 3]);
            const vec4 k1 = vec4(kernels[n * 8 * 9 + 8 * i + 4], kernels[n * 8 * 9 + 8 * i + 5], kernels[n * 8 * 9 + 8 * i + 6], kernels[n * 8 * 9 + 8 * i + 7]);
            sum[n] += (dot(k0, r[i][0]) + dot(k1, r[i][1]));
        }
    }

    return ACTIVE(vec4(sum[0], sum[1], sum[2], sum[3]));
}

//!HOOK LUMA
//!DESC ACNet b32 Layer66 L0
//!WIDTH LUMA.w 2 *
//!HEIGHT LUMA.h 2 *
//!BIND TMP1_L0
//!COMPONENTS 1

#define TEX_BIND_L0_TEXOFF TMP1_L0_texOff
#define TEX_BIND_L0_TEX TMP1_L0_tex
#define TEX_BIND_L0_POS TMP1_L0_pos
#define TEX_BIND_L0_SIZE TMP1_L0_size
#define TEX_BIND_L0_PT TMP1_L0_pt

vec4 hook() {
    vec2 fcoord = fract(TEX_BIND_L0_POS * TEX_BIND_L0_SIZE);
    vec2 pos = TEX_BIND_L0_POS + (vec2(0.5f) - fcoord) * TEX_BIND_L0_PT;

    ivec2 icoord = ivec2(fcoord * vec2(2.0f));
    int index = icoord.y * 2 + icoord.x;

    vec4 r = TEX_BIND_L0_TEX(pos);

    return vec4(clamp(float[4](r.x, r.y, r.z, r.w)[index], 0.0f, 1.0f), 0.0f, 0.0f, 1.0f);
}
